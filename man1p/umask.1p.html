<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>UMASK(1P)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">UMASK(1P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">UMASK(1P)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
umask - get or set the file mode creation mask
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>umask</b> <b>[</b><b>-S</b><b>][</b><i>mask</i><b>]</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>umask</i> utility shall set the file mode creation mask of the current
  shell execution environment (see <i>Shell Execution Environment</i> ) to the
  value specified by the <i>mask</i> operand. This mask shall affect the initial
  value of the file permission bits of subsequently created files. If
  <i>umask</i> is called in a subshell or separate utility execution
  environment, such as one of the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>(umask 002)</b>
<b>nohup umask ...</b>
<b>find . -exec umask ... \;</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
it shall not affect the file mode creation mask of the caller's environment.
<div class="Pp"></div>
If the <i>mask</i> operand is not specified, the <i>umask</i> utility shall
  write to standard output the value of the invoking process' file mode creation
  mask.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <i>umask</i> utility shall conform to the Base Definitions volume of
  IEEE&#x00A0;Std&#x00A0;1003.1-2001, Section 12.2, Utility Syntax Guidelines.
<div class="Pp"></div>
The following option shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag">Produce symbolic output.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
The default output style is unspecified, but shall be recognized on a subsequent
  invocation of <i>umask</i> on the same system as a <i>mask</i> operand to
  restore the previous file mode creation mask.
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The following operand shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><i>mask</i></dt>
  <dd class="It-tag">A string specifying the new file mode creation mask. The
      string is treated in the same way as the <i>mode</i> operand described in
      the EXTENDED DESCRIPTION section for <i>chmod</i>.</dd>
</dl>
<div class="Pp"></div>
For a <i>symbolic_mode</i> value, the new value of the file mode creation mask
  shall be the logical complement of the file permission bits portion of the
  file mode specified by the <i>symbolic_mode</i> string.
<div class="Pp"></div>
In a <i>symbolic_mode</i> value, the permissions <i>op</i> characters <b>'+'</b>
  and <b>'-'</b> shall be interpreted relative to the current file mode creation
  mask; <b>'+'</b> shall cause the bits for the indicated permissions to be
  cleared in the mask; <b>'-'</b> shall cause the bits for the indicated
  permissions to be set in the mask.
<div class="Pp"></div>
The interpretation of <i>mode</i> values that specify file mode bits other than
  the file permission bits is unspecified.
<div class="Pp"></div>
In the octal integer form of <i>mode</i>, the specified bits are set in the file
  mode creation mask.
<div class="Pp"></div>
The file mode creation mask shall be set to the resulting numeric value.
<div class="Pp"></div>
The default output of a prior invocation of <i>umask</i> on the same system with
  no operand also shall be recognized as a <i>mask</i> operand.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
Not used.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>umask</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      IEEE&#x00A0;Std&#x00A0;1003.1-2001, Section 8.2, Internationalization
      Variables for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">Determine the locale that should be used to affect the
      format and contents of diagnostic messages written to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i> <i>.</i>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
When the <i>mask</i> operand is not specified, the <i>umask</i> utility shall
  write a message to standard output that can later be used as a <i>umask</i>
  <i>mask</i> operand.
<div class="Pp"></div>
If <b>-S</b> is specified, the message shall be in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>&quot;u=%s,g=%s,o=%s\n&quot;, &lt;</b><i>owner permissions</i><b>&gt;, &lt;</b><i>group permissions</i><b>&gt;,</b>
<b>    &lt;</b><i>other permissions</i><b>&gt;</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
where the three values shall be combinations of letters from the set { <i>r</i>,
  <i>w</i>, <i>x</i>}; the presence of a letter shall indicate that the
  corresponding bit is clear in the file mode creation mask.
<div class="Pp"></div>
If a <i>mask</i> operand is specified, there shall be no output written to
  standard output.
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
The standard error shall be used only for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x00A0;0</dt>
  <dd class="It-tag">The file mode creation mask was successfully changed, or no
      <i>mask</i> operand was supplied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;0</dt>
  <dd class="It-tag">An error occurred.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
Default.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
Since <i>umask</i> affects the current shell execution environment, it is
  generally provided as a shell regular built-in.
<div class="Pp"></div>
In contrast to the negative permission logic provided by the file mode creation
  mask and the octal number form of the <i>mask</i> argument, the symbolic form
  of the <i>mask</i> argument specifies those permissions that are left alone.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Either of the commands:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>umask a=rx,ug+w</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
umask 002
<b></b>
</pre>
</div>
<div class="Pp"></div>
sets the mode mask so that subsequently created files have their S_IWOTH bit
  cleared.
<div class="Pp"></div>
After setting the mode mask with either of the above commands, the <i>umask</i>
  command can be used to write out the current value of the mode mask:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>$</b> <b>umask</b>
<b></b><b>0002</b>
</pre>
</div>
<div class="Pp"></div>
(The output format is unspecified, but historical implementations use the octal
  integer mode format.)
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>$</b> <b>umask -S</b>
<b></b><b>u=rwx,g=rwx,o=rx</b>
</pre>
</div>
<div class="Pp"></div>
Either of these outputs can be used as the mask operand to a subsequent
  invocation of the <i>umask</i> utility.
<div class="Pp"></div>
Assuming the mode mask is set as above, the command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>umask g-w</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
sets the mode mask so that subsequently created files have their S_IWGRP and
  S_IWOTH bits cleared.
<div class="Pp"></div>
The command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>umask -- -w</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
sets the mode mask so that subsequently created files have all their write bits
  cleared. Note that <i>mask</i> operands <b>-r</b>, <b>-w</b>, <b>-x</b> or
  anything beginning with a hyphen, must be preceded by <b>&quot;--&quot;</b> to
  keep it from being interpreted as an option.
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
Since <i>umask</i> affects the current shell execution environment, it is
  generally provided as a shell regular built-in. If it is called in a subshell
  or separate utility execution environment, such as one of the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>(umask 002)</b>
<b>nohup umask ...</b>
<b>find . -exec umask ... \;</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
it does not affect the file mode creation mask of the environment of the caller.
<div class="Pp"></div>
The description of the historical utility was modified to allow it to use the
  symbolic modes of <i>chmod</i>. The <b>-s</b> option used in early proposals
  was changed to <b>-S</b> because <b>-s</b> could be confused with a
  <i>symbolic_mode</i> form of mask referring to the S_ISUID and S_ISGID bits.
<div class="Pp"></div>
The default output style is implementation-defined to permit implementors to
  provide migration to the new symbolic style at the time most appropriate to
  their users. A <b>-o</b> flag to force octal mode output was omitted because
  the octal mode may not be sufficient to specify all of the information that
  may be present in the file mode creation mask when more secure file access
  permission checks are implemented.
<div class="Pp"></div>
It has been suggested that trusted systems developers might appreciate
  ameliorating the requirement that the mode mask &quot;affects&quot; the file
  access permissions, since it seems access control lists might replace the mode
  mask to some degree. The wording has been changed to say that it affects the
  file permission bits, and it leaves the details of the behavior of how they
  affect the file access permissions to the description in the System Interfaces
  volume of IEEE&#x00A0;Std&#x00A0;1003.1-2001.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>Shell Command Language</i>, <i>chmod</i>, the System Interfaces volume of
  IEEE&#x00A0;Std&#x00A0;1003.1-2001, <i>umask</i>()
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. In the event of any discrepancy between
  this version and the original IEEE and The Open Group Standard, the original
  IEEE and The Open Group Standard is the referee document. The original
  Standard can be obtained online at http://www.opengroup.org/unix/online.html
  .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2003</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
