<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:45:12 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FILE(1P) POSIX Programmer&rsquo;s Manual FILE(1P)</p>

<p style="margin-top: 1em">PROLOG <br>
This manual page is part of the POSIX Programmer&rsquo;s
Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of <br>
Linux behavior), or the interface may not be implemented on
Linux.</p>

<p style="margin-top: 1em">NAME <br>
file - determine file type</p>

<p style="margin-top: 1em">SYNOPSIS <br>
file [-dh][-M file][-m file] file ...</p>

<p style="margin-top: 1em">file -i [-h] file ...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The file utility shall perform a series of tests in sequence
on each specified file in an attempt to classify it:</p>

<p style="margin-top: 1em">1. If file does not exist,
cannot be read, or its file status could not be determined,
the output shall indicate that the file was processed, but
that its type could not be <br>
determined.</p>

<p style="margin-top: 1em">2. If the file is not a regular
file, its file type shall be identified. The file types
directory, FIFO, socket, block special, and character
special shall be identified as <br>
such. Other implementation-defined file types may also be
identified. If file is a symbolic link, by default the link
shall be resolved and file shall test the type of file <br>
referenced by the symbolic link. (See the -h and -i options
below.)</p>

<p style="margin-top: 1em">3. If the length of file is
zero, it shall be identified as an empty file.</p>

<p style="margin-top: 1em">4. The file utility shall
examine an initial segment of file and shall make a guess at
identifying its contents based on position-sensitive tests.
(The answer is not guaranteed <br>
to be correct; see the -d, -M, and -m options below.)</p>

<p style="margin-top: 1em">5. The file utility shall
examine file and make a guess at identifying its contents
based on context-sensitive default system tests. (The answer
is not guaranteed to be cor&acirc; <br>
rect.)</p>

<p style="margin-top: 1em">6. The file shall be identified
as a data file.</p>

<p style="margin-top: 1em">If file does not exist, cannot
be read, or its file status could not be determined, the
output shall indicate that the file was processed, but that
its type could not be deter&acirc; <br>
mined.</p>

<p style="margin-top: 1em">If file is a symbolic link, by
default the link shall be resolved and file shall test the
type of file referenced by the symbolic link.</p>

<p style="margin-top: 1em">OPTIONS <br>
The file utility shall conform to the Base Definitions
volume of IEEE Std 1003.1-2001, Section 12.2, Utility Syntax
Guidelines, except that the order of the -m, -d, and -M <br>
options shall be significant.</p>

<p style="margin-top: 1em">The following options shall be
supported by the implementation:</p>

<p style="margin-top: 1em">-d Apply any position-sensitive
default system tests and context-sensitive default system
tests to the file. This is the default if no -M or -m option
is specified.</p>

<p style="margin-top: 1em">-h When a symbolic link is
encountered, identify the file as a symbolic link. If -h is
not specified and file is a symbolic link that refers to a
nonexistent file, file shall <br>
identify the file as a symbolic link, as if -h had been
specified.</p>

<p style="margin-top: 1em">-i If a file is a regular file,
do not attempt to classify the type of the file further, but
identify the file as specified in the STDOUT section.</p>

<p style="margin-top: 1em">-M file <br>
Specify the name of a file containing position-sensitive
tests that shall be applied to a file in order to classify
it (see the EXTENDED DESCRIPTION). No position-sensi&acirc;
<br>
tive default system tests nor context-sensitive default
system tests shall be applied unless the -d option is also
specified.</p>

<p style="margin-top: 1em">-m file <br>
Specify the name of a file containing position-sensitive
tests that shall be applied to a file in order to classify
it (see the EXTENDED DESCRIPTION).</p>

<p style="margin-top: 1em">If the -m option is specified
without specifying the -d option or the -M option,
position-sensitive default system tests shall be applied
after the position-sensitive tests spec&acirc; <br>
ified by the -m option. If the -M option is specified with
the -d option, the -m option, or both, or the -m option is
specified with the -d option, the concatenation of the
posi&acirc; <br>
tion-sensitive tests specified by these options shall be
applied in the order specified by the appearance of these
options. If a -M or -m file option-argument is -, the
results <br>
are unspecified.</p>

<p style="margin-top: 1em">OPERANDS <br>
The following operand shall be supported:</p>

<p style="margin-top: 1em">file A pathname of a file to be
tested.</p>

<p style="margin-top: 1em">STDIN <br>
Not used.</p>

<p style="margin-top: 1em">INPUT FILES <br>
The file can be any file type.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
The following environment variables shall affect the
execution of file:</p>

<p style="margin-top: 1em">LANG Provide a default value for
the internationalization variables that are unset or null.
(See the Base Definitions volume of IEEE Std 1003.1-2001,
Section 8.2, Internation&acirc; <br>
alization Variables for the precedence of
internationalization variables used to determine the values
of locale categories.)</p>

<p style="margin-top: 1em">LC_ALL If set to a non-empty
string value, override the values of all the other
internationalization variables.</p>

<p style="margin-top: 1em">LC_CTYPE <br>
Determine the locale for the interpretation of sequences of
bytes of text data as characters (for example, single-byte
as opposed to multi-byte characters in arguments and <br>
input files).</p>

<p style="margin-top: 1em">LC_MESSAGES <br>
Determine the locale that should be used to affect the
format and contents of diagnostic messages written to
standard error and informative messages written to standard
<br>
output.</p>

<p style="margin-top: 1em">NLSPATH <br>
Determine the location of message catalogs for the
processing of LC_MESSAGES .</p>

<p style="margin-top: 1em">ASYNCHRONOUS EVENTS <br>
Default.</p>

<p style="margin-top: 1em">STDOUT <br>
In the POSIX locale, the following format shall be used to
identify each operand, file specified:</p>

<p style="margin-top: 1em">&quot;%s: %s0, &lt;file&gt;,
&lt;type&gt;</p>

<p style="margin-top: 1em">The values for &lt;type&gt; are
unspecified, except that in the POSIX locale, if file is
identified as one of the types listed in the following
table, &lt;type&gt; shall contain (but is not <br>
limited to) the corresponding string, unless the file is
identified by a position-sensitive test specified by a -M or
-m option. Each space shown in the strings shall be exactly
<br>
one &lt;space&gt;.</p>

<p style="margin-top: 1em">Table: File Utility Output
Strings</p>

<p style="margin-top: 1em">If file is: &lt;type&gt; shall
contain the Notes <br>
string: <br>
Nonexistent cannot open <br>
Block special block special 1 <br>
Character special character special 1 <br>
Directory directory 1 <br>
FIFO fifo 1 <br>
Socket socket 1 <br>
Symbolic link symbolic link to 1 <br>
Regular file regular file 1,2 <br>
Empty regular file empty 3 <br>
Regular file that cannot be read cannot open 3 <br>
Executable binary executable 4,6 <br>
ar archive library (see ar) archive 4,6 <br>
Extended cpio format (see pax) cpio archive 4,6 <br>
Extended tar format (see ustar in pax) tar archive 4,6</p>

<p style="margin-top: 1em">Shell script commands text 5,6
<br>
C-language source c program text 5,6 <br>
FORTRAN source fortran program text 5,6 <br>
Regular file whose type cannot be deter&acirc; data <br>
mined</p>

<p style="margin-top: 1em">Notes:</p>

<p style="margin-top: 1em">1. This is a file type test.</p>

<p style="margin-top: 1em">2. This test is applied only if
the -i option is specified.</p>

<p style="margin-top: 1em">3. This test is applied only if
the -i option is not specified.</p>

<p style="margin-top: 1em">4. This is a position-sensitive
default system test.</p>

<p style="margin-top: 1em">5. This is a context-sensitive
default system test.</p>

<p style="margin-top: 1em">6. Position-sensitive default
system tests and context-sensitive default system tests are
not applied if the -M option is specified unless the -d
option is also speci&acirc; <br>
fied.</p>

<p style="margin-top: 1em">In the POSIX locale, if file is
identified as a symbolic link (see the -h option), the
following alternative output format shall be used:</p>

<p style="margin-top: 1em">&quot;%s: %s %s0, &lt;file&gt;,
&lt;type&gt;, &lt;contents of link&gt;&quot;</p>

<p style="margin-top: 1em">If the file named by the file
operand does not exist, cannot be read, or the type of the
file named by the file operand cannot be determined, this
shall not be considered an <br>
error that affects the exit status.</p>

<p style="margin-top: 1em">STDERR <br>
The standard error shall be used only for diagnostic
messages.</p>

<p style="margin-top: 1em">OUTPUT FILES <br>
None.</p>

<p style="margin-top: 1em">EXTENDED DESCRIPTION <br>
A file specified as an option-argument to the -m or -M
options shall contain one position-sensitive test per line,
which shall be applied to the file. If the test succeeds,
the <br>
message field of the line shall be printed and no further
tests shall be applied, with the exception that tests on
immediately following lines beginning with a single
&rsquo;&gt;&rsquo; charac&acirc; <br>
ter shall be applied.</p>

<p style="margin-top: 1em">Each line shall be composed of
the following four &lt;blank&gt;-separated fields:</p>

<p style="margin-top: 1em">offset An unsigned number
(optionally preceded by a single &rsquo;&gt;&rsquo;
character) specifying the offset, in bytes, of the value in
the file that is to be compared against the value field <br>
of the line. If the file is shorter than the specified
offset, the test shall fail.</p>

<p style="margin-top: 1em">If the offset begins with the
character &rsquo;&gt;&rsquo;, the test contained in the line
shall not be applied to the file unless the test on the last
line for which the offset did not begin <br>
with a &rsquo;&gt;&rsquo; was successful. By default, the
offset shall be interpreted as an unsigned decimal number.
With a leading 0x or 0X, the offset shall be interpreted as
a hexadecimal <br>
number; otherwise, with a leading 0, the offset shall be
interpreted as an octal number.</p>

<p style="margin-top: 1em">type The type of the value in
the file to be tested. The type shall consist of the type
specification characters c, d, f, s, and u, specifying
character, signed decimal, float&acirc; <br>
ing point, string, and unsigned decimal, respectively.</p>

<p style="margin-top: 1em">The type string shall be
interpreted as the bytes from the file starting at the
specified offset and including the same number of bytes
specified by the value field. If insuffi&acirc; <br>
cient bytes remain in the file past the offset to match the
value field, the test shall fail.</p>

<p style="margin-top: 1em">The type specification
characters d, f, and u can be followed by an optional
unsigned decimal integer that specifies the number of bytes
represented by the type. The type speci&acirc; <br>
fication character f can be followed by an optional F, D, or
L, indicating that the value is of type float, double, or
long double, respectively. The type specification
charac&acirc; <br>
ters d and u can be followed by an optional C, S, I, or L,
indicating that the value is of type char, short, int, or
long, respectively.</p>

<p style="margin-top: 1em">The default number of bytes
represented by the type specifiers d, f, and u shall
correspond to their respective C-language types as follows.
If the system claims conformance to <br>
the C-Language Development Utilities option, those
specifiers shall correspond to the default sizes used in the
c99 utility. Otherwise, the default sizes shall be
implementa&acirc; <br>
tion-defined.</p>

<p style="margin-top: 1em">For the type specifier
characters d and u, the default number of bytes shall
correspond to the size of a basic integer type of the
implementation. For these specifier characters, <br>
the implementation shall support values of the optional
number of bytes to be converted corresponding to the number
of bytes in the C-language types char, short, int, or long.
<br>
These numbers can also be specified by an application as the
characters C, S, I, and L, respectively. The byte order used
when interpreting numeric values is implementation- <br>
defined, but shall correspond to the order in which a
constant of the corresponding type is stored in memory on
the system.</p>

<p style="margin-top: 1em">For the type specifier f, the
default number of bytes shall correspond to the number of
bytes in the basic double precision floating-point data type
of the underlying implementa&acirc; <br>
tion. The implementation shall support values of the
optional number of bytes to be converted corresponding to
the number of bytes in the C-language types float, double,
and <br>
long double. These numbers can also be specified by an
application as the characters F, D, and L, respectively.</p>

<p style="margin-top: 1em">All type specifiers, except for
s, can be followed by a mask specifier of the form
&amp;number. The mask value shall be AND&rsquo;ed with the
value of the input file before the comparison <br>
with the value field of the line is made. By default, the
mask shall be interpreted as an unsigned decimal number.
With a leading 0x or 0X, the mask shall be interpreted as an
<br>
unsigned hexadecimal number; otherwise, with a leading 0,
the mask shall be interpreted as an unsigned octal
number.</p>

<p style="margin-top: 1em">The strings byte, short, long,
and string shall also be supported as type fields, being
interpreted as dC, dS, dL, and s, respectively.</p>

<p style="margin-top: 1em">value The value to be compared
with the value from the file.</p>

<p style="margin-top: 1em">If the specifier from the type
field is s or string, then interpret the value as a string.
Otherwise, interpret it as a number. If the value is a
string, then the test shall suc&acirc; <br>
ceed only when a string value exactly matches the bytes from
the file.</p>

<p style="margin-top: 1em">If the value is a string, it can
contain the following sequences:</p>

<p style="margin-top: 1em">The backslash-escape sequences
as specified in the Base Definitions volume of IEEE Std
1003.1-2001, Table 5-1, Escape Sequences and Associated
Actions ( &rsquo;\&rsquo;, &rsquo;&rsquo;, &rsquo;,&rsquo;,
&rsquo;&rsquo;, &rsquo;. The results of using any other <br>
&rsquo;, &rsquo;0, &rsquo; character, other than an octal
digit, following the backslash are unspecified. l</p>

<p style="margin-top: 1em">Octal sequences that can be used
to represent characters with specific coded values. An octal
sequence shall consist of a backslash followed by the
longest sequence of <br>
one, two, or three octal-digit characters (01234567). If the
size of a byte on the system is greater than 9 bits, the
valid escape sequence used to represent a byte is <br>
implementation-defined.</p>

<p style="margin-top: 1em">By default, any value that is
not a string shall be interpreted as a signed decimal
number. Any such value, with a leading 0x or 0X, shall be
interpreted as an unsigned hexadeci&acirc; <br>
mal number; otherwise, with a leading zero, the value shall
be interpreted as an unsigned octal number.</p>

<p style="margin-top: 1em">If the value is not a string, it
can be preceded by a character indicating the comparison to
be performed. Permissible characters and the comparisons
they specify are as follows:</p>

<p style="margin-top: 1em">= <br>
The test shall succeed if the value from the file equals the
value field.</p>

<p style="margin-top: 1em">&lt; <br>
The test shall succeed if the value from the file is less
than the value field.</p>

<p style="margin-top: 1em">&gt; <br>
The test shall succeed if the value from the file is greater
than the value field.</p>

<p style="margin-top: 1em">&amp; <br>
The test shall succeed if all of the set bits in the value
field are set in the value from the file.</p>

<p style="margin-top: 1em">^ <br>
The test shall succeed if at least one of the set bits in
the value field is not set in the value from the file.</p>

<p style="margin-top: 1em">x <br>
The test shall succeed if the file is large enough to
contain a value of the type specified starting at the offset
specified.</p>

<p style="margin-top: 1em">message <br>
The message to be printed if the test succeeds. The message
shall be interpreted using the notation for the printf
formatting specification; see printf(). If the value <br>
field was a string, then the value from the file shall be
the argument for the printf formatting specification;
otherwise, the value from the file shall be the
argument.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The following exit values shall be returned:</p>

<p style="margin-top: 1em">0 Successful completion.</p>

<p style="margin-top: 1em">&gt;0 An error occurred.</p>

<p style="margin-top: 1em">CONSEQUENCES OF ERRORS <br>
Default.</p>

<p style="margin-top: 1em">The following sections are
informative.</p>

<p style="margin-top: 1em">APPLICATION USAGE <br>
The file utility can only be required to guess at many of
the file types because only exhaustive testing can determine
some types with certainty. For example, binary data on some
<br>
implementations might match the initial segment of an
executable or a tar archive.</p>

<p style="margin-top: 1em">Note that the table indicates
that the output contains the stated string. Systems may add
text before or after the string. For executables, as an
example, the machine architec&acirc; <br>
ture and various facts about how the file was link-edited
may be included. Note also that on systems that recognize
shell script files starting with &quot;#!&quot; as
executable files, <br>
these may be identified as executable binary files rather
than as shell scripts.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Determine whether an argument is a binary executable
file:</p>

<p style="margin-top: 1em">file &quot;$1&quot; | grep -Fq
executable &amp;&amp; <br>
printf &quot;%s is executable.0 &quot;$1&quot;</p>

<p style="margin-top: 1em">RATIONALE <br>
The -f option was omitted because the same effect can (and
should) be obtained using the xargs utility.</p>

<p style="margin-top: 1em">Historical versions of the file
utility attempt to identify the following types of files:
symbolic link, directory, character special, block special,
socket, tar archive, cpio <br>
archive, SCCS archive, archive library, empty, compress
output, pack output, binary data, C source, FORTRAN source,
assembler source, nroff/ troff/ eqn/ tbl source troff
output, <br>
shell script, C shell script, English text, ASCII text,
various executables, APL workspace, compiled terminfo
entries, and CURSES screen images. Only those types that are
reason&acirc; <br>
ably well specified in POSIX or are directly related to
POSIX utilities are listed in the table.</p>

<p style="margin-top: 1em">Historical systems have used a
&quot;magic file&quot; named /etc/magic to help identify
file types. Because it is generally useful for users and
scripts to be able to identify special file <br>
types, the -m flag and a portable format for user-created
magic files has been specified. No requirement is made that
an implementation of file use this method of identifying
<br>
files, only that users be permitted to add their own
classifying tests.</p>

<p style="margin-top: 1em">In addition, three options have
been added to historical practice. The -d flag has been
added to permit users to cause their tests to follow any
default system tests. The -i <br>
flag has been added to permit users to test portably for
regular files in shell scripts. The -M flag has been added
to permit users to ignore any default system tests.</p>

<p style="margin-top: 1em">The IEEE Std 1003.1-2001
description of default system tests and the interaction
between the -d, -M, and -m options did not clearly indicate
that there were two types of &quot;default <br>
system tests&quot;. The &quot;position-sensitive
tests&rsquo;&rsquo; determine file types by looking for
certain string or binary values at specific offsets in the
file being examined. These position- <br>
sensitive tests were implemented in historical systems using
the magic file described above. Some of these tests are now
built into the file utility itself on some implementa&acirc;
<br>
tions so the output can provide more detail than can be
provided by magic files. For example, a magic file can
easily identify a core file on most implementations, but
cannot <br>
name the program file that dropped the core. A magic file
could produce output such as:</p>

<p style="margin-top: 1em">/home/dwc/core: ELF 32-bit MSB
core file SPARC Version 1</p>

<p style="margin-top: 1em">but by building the test into
the file utility, you could get output such as:</p>

<p style="margin-top: 1em">/home/dwc/core: ELF 32-bit MSB
core file SPARC Version 1, from &rsquo;testprog&rsquo;</p>

<p style="margin-top: 1em">These extended built-in tests
are still to be treated as position-sensitive default system
tests even if they are not listed in /etc/magic or any other
magic file.</p>

<p style="margin-top: 1em">The context-sensitive default
system tests were always built into the file utility. These
tests looked for language constructs in text files trying to
identify shell scripts, C, <br>
FORTRAN, and other computer language source files, and even
plain text files. With the addition of the -m and -M options
the distinction between position-sensitive and context- <br>
sensitive default system tests became important because the
order of testing is important. The context-sensitive system
default tests should never be applied before any position-
<br>
sensitive tests even if the -d option is specified before a
-m option or -M option due to the high probability that the
context-sensitive system default tests will incorrectly <br>
identify arbitrary text files as text files before
position-sensitive tests specified by the -m or -M option
would be applied to give a more accurate identification.</p>

<p style="margin-top: 1em">Leaving the meaning of -M - and
-m - unspecified allows an existing prototype of these
options to continue to work in a backwards-compatible
manner. (In that implementation, -M - <br>
was roughly equivalent to -d in IEEE Std 1003.1-2001.)</p>

<p style="margin-top: 1em">The historical -c option was
omitted as not particularly useful to users or portable
shell scripts. In addition, a reasonable implementation of
the file utility would report any <br>
errors found each time the magic file is read.</p>

<p style="margin-top: 1em">The historical format of the
magic file was the same as that specified by the Rationale
in the ISO POSIX-2:1993 standard for the offset, value, and
message fields; however, it <br>
used less precise type fields than the format specified by
the current normative text. The new type field values are a
superset of the historical ones.</p>

<p style="margin-top: 1em">The following is an example
magic file:</p>

<p style="margin-top: 1em">0 short 070707 cpio archive <br>
0 short 0143561 Byte-swapped cpio archive <br>
0 string 070707 ASCII cpio archive <br>
0 long 0177555 Very old archive <br>
0 short 0177545 Old archive <br>
0 short 017437 Old packed data <br>
0 string 37 36 Packed data <br>
0 string 377 37 Compacted data <br>
0 string 37235 Compressed data <br>
&gt;2 byte&amp;0x80 &gt;0 Block compressed <br>
&gt;2 byte&amp;0x1f x %d bits <br>
0 string 32 01 Compiled Terminfo Entry <br>
0 short 0433 Curses screen image <br>
0 short 0434 Curses screen image <br>
0 string &lt;ar&gt; System V Release 1 archive <br>
0 string !&lt;arch&gt;0_.SYMDEF Archive random library <br>
0 string !&lt;arch&gt; Archive <br>
0 string ARF_BEGARF PHIGS clear text archive <br>
0 long 0x137A2950 Scalable OpenFont binary <br>
0 long 0x137A2951 Encrypted scalable OpenFont binary</p>

<p style="margin-top: 1em">The use of a basic integer data
type is intended to allow the implementation to choose a
word size commonly used by applications on that
architecture.</p>

<p style="margin-top: 1em">FUTURE DIRECTIONS <br>
None.</p>

<p style="margin-top: 1em">SEE ALSO <br>
ar, ls, pax</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Portions of this text are reprinted and reproduced in
electronic form from IEEE Std 1003.1, 2003 Edition, Standard
for Information Technology -- Portable Operating System
Inter&acirc; <br>
face (POSIX), The Open Group Base Specifications Issue 6,
Copyright (C) 2001-2003 by the Institute of Electrical and
Electronics Engineers, Inc and The Open Group. In the event
<br>
of any discrepancy between this version and the original
IEEE and The Open Group Standard, the original IEEE and The
Open Group Standard is the referee document. The original
<br>
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p style="margin-top: 1em">IEEE/The Open Group 2003
FILE(1P)</p>
<hr>
</body>
</html>
