<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EXPR(1P)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EXPR(1P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">EXPR(1P)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
expr - evaluate arguments as an expression
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>expr</b> <i>operand</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>expr</i> utility shall evaluate an expression and write the result to
  standard output.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The single expression evaluated by <i>expr</i> shall be formed from the
  operands, as described in the EXTENDED DESCRIPTION section. The application
  shall ensure that each of the expression operator symbols:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>(  )  |  &amp;  =  &gt;  &gt;=  &lt;  &lt;=  !=  +  -  *  /  %  :</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
and the symbols <i>integer</i> and <i>string</i> in the table are provided as
  separate arguments to <i>expr</i>.
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
Not used.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>expr</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      IEEE&#x00A0;Std&#x00A0;1003.1-2001, Section 8.2, Internationalization
      Variables for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_COLLATE</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Determine the locale for the behavior of ranges, equivalence classes, and
      multi-character collating elements within regular expressions and by the
      string comparison operators.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments) and the behavior of character classes
      within regular expressions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">Determine the locale that should be used to affect the
      format and contents of diagnostic messages written to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i> <i>.</i>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
The <i>expr</i> utility shall evaluate the expression and write the result,
  followed by a &lt;newline&gt;, to standard output.
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
The standard error shall be used only for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
The formation of the expression to be evaluated is shown in the following table.
  The symbols <i>expr</i>, <i>expr1</i>, and <i>expr2</i> represent expressions
  formed from <i>integer</i> and <i>string</i> symbols and the expression
  operator symbols (all separate arguments) by recursive application of the
  constructs described in the table. The expressions are listed in order of
  increasing precedence, with equal-precedence operators grouped between
  horizontal lines. All of the operators shall be left-associative.
<table class="tbl">
  <colgroup>
    <col style="width: 28.00ex;"/>
    <col style="width: 40.00ex;"/>
  </colgroup>
  <tr>
    <td><b>Expression</b></td>
    <td><b>Description</b></td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;|&#x00A0;<i>expr2</i></td>
    <td>Returns the evaluation of <i>expr1</i> if it is neither null nor zero;
      otherwise, returns the evaluation of <i>expr2</i> if it is not null;
      otherwise, zero.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;&amp;&#x00A0;<i>expr2</i></td>
    <td>Returns the evaluation of <i>expr1</i> if neither expression evaluates
      to null or zero; otherwise, returns zero.</td>
  </tr>
  <tr>
    <td>&#x00A0;</td>
    <td>Returns the result of a decimal integer comparison if both arguments are
      integers; otherwise, returns the result of a string comparison using the
      locale-specific collation sequence. The result of each comparison is 1 if
      the specified relationship is true, or 0 if the relationship is
      false.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;=&#x00A0;<i>expr2</i></td>
    <td>Equal.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;&gt;&#x00A0;<i>expr2</i></td>
    <td>Greater than.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;&gt;=&#x00A0;<i>expr2</i></td>
    <td>Greater than or equal.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;&lt;&#x00A0;<i>expr2</i></td>
    <td>Less than.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;&lt;=&#x00A0;<i>expr2</i></td>
    <td>Less than or equal.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;!=&#x00A0;<i>expr2</i></td>
    <td>Not equal.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;+&#x00A0;<i>expr2</i></td>
    <td>Addition of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;-&#x00A0;<i>expr2</i></td>
    <td>Subtraction of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;*&#x00A0;<i>expr2</i></td>
    <td>Multiplication of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;/&#x00A0;<i>expr2</i></td>
    <td>Integer division of decimal integer-valued arguments, producing an
      integer result.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;%&#x00A0;<i>expr2</i></td>
    <td>Remainder of integer division of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td><i>expr1</i>&#x00A0;:&#x00A0;<i>expr2</i></td>
    <td>Matching expression; see below.</td>
  </tr>
  <tr>
    <td>(&#x00A0;<i>expr</i>&#x00A0;)</td>
    <td>Grouping symbols. Any expression can be placed within parentheses.
      Parentheses can be nested to a depth of {EXPR_NEST_MAX}.</td>
  </tr>
  <tr>
    <td><i>integer</i></td>
    <td>An argument consisting only of an (optional) unary minus followed by
      digits.</td>
  </tr>
  <tr>
    <td><i>string</i></td>
    <td>A string argument; see below.</td>
  </tr>
</table>
<h2 class="Ss" title="Ss" id="Matching_Expression"><a class="selflink" href="#Matching_Expression">Matching
  Expression</a></h2>
The <b>':'</b> matching operator shall compare the string resulting from the
  evaluation of <i>expr1</i> with the regular expression pattern resulting from
  the evaluation of <i>expr2</i>. Regular expression syntax shall be that
  defined in the Base Definitions volume of IEEE&#x00A0;Std&#x00A0;1003.1-2001,
  Section 9.3, Basic Regular Expressions, except that all patterns are anchored
  to the beginning of the string (that is, only sequences starting at the first
  character of a string are matched by the regular expression) and, therefore,
  it is unspecified whether <b>'^'</b> is a special character in that context.
  Usually, the matching operator shall return a string representing the number
  of characters matched ( <b>'0'</b> on failure). Alternatively, if the pattern
  contains at least one regular expression subexpression
  <b>&quot;[\(...\)]&quot;</b>, the string corresponding to
  <b>&quot;\1&quot;</b> shall be returned.
<h2 class="Ss" title="Ss" id="String_Operand"><a class="selflink" href="#String_Operand">String
  Operand</a></h2>
A string argument is an argument that cannot be identified as an <i>integer</i>
  argument or as one of the expression operator symbols shown in the OPERANDS
  section.
<div class="Pp"></div>
The use of string arguments <b>length</b>, <b>substr</b>, <b>index</b>, or
  <b>match</b> produces unspecified results.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x00A0;0</dt>
  <dd class="It-tag">The <i>expression</i> evaluates to neither null nor
    zero.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x00A0;1</dt>
  <dd class="It-tag">The <i>expression</i> evaluates to null or zero.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x00A0;2</dt>
  <dd class="It-tag">Invalid <i>expression</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;2</dt>
  <dd class="It-tag">An error occurred.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
Default.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
After argument processing by the shell, <i>expr</i> is not required to be able
  to tell the difference between an operator and an operand except by the value.
  If <b>&quot;$a&quot;</b> is <b>'='</b>, the command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr $a = '='</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
looks like:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr = = =</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
as the arguments are passed to <i>expr</i> (and they all may be taken as the
  <b>'='</b> operator). The following works reliably:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr X$a = X=</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
Also note that this volume of IEEE&#x00A0;Std&#x00A0;1003.1-2001 permits
  implementations to extend utilities. The <i>expr</i> utility permits the
  integer arguments to be preceded with a unary minus. This means that an
  integer argument could look like an option. Therefore, the conforming
  application must employ the <b>&quot;--&quot;</b> construct of Guideline 10 of
  the Base Definitions volume of IEEE&#x00A0;Std&#x00A0;1003.1-2001, Section
  12.2, Utility Syntax Guidelines to protect its operands if there is any chance
  the first operand might be a negative integer (or any string with a leading
  minus).
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The <i>expr</i> utility has a rather difficult syntax:
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">Many of the operators are also shell control operators or
      reserved words, so they have to be escaped on the command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">Each part of the expression is composed of separate
      arguments, so liberal usage of &lt;blank&gt;s is required. For example:
    <table class="tbl">
      <colgroup>
        <col style="width: 22.00ex;"/>
        <col style="width: 30.00ex;"/>
      </colgroup>
      <tr>
        <td><b>Invalid</b></td>
        <td><b>Valid</b></td>
      </tr>
      <tr>
        <td><i>expr</i> 1+2</td>
        <td><i>expr</i> 1 + 2</td>
      </tr>
      <tr>
        <td><i>expr</i> &quot;1 + 2&quot;</td>
        <td><i>expr</i> 1 + 2</td>
      </tr>
      <tr>
        <td><i>expr</i> 1 + (2 * 3)</td>
        <td><i>expr</i> 1 + \( 2 \* 3 \)</td>
      </tr>
    </table>
  </dd>
</dl>
<div class="Pp"></div>
In many cases, the arithmetic and string features provided as part of the shell
  command language are easier to use than their equivalents in <i>expr</i>.
  Newly written scripts should avoid <i>expr</i> in favor of the new features
  within the shell; see <i>Parameters and</i> <i>Variables</i> and
  <i>Arithmetic</i> <i>Expansion</i> .
<div class="Pp"></div>
The following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>a=$(expr $a + 1)</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
adds 1 to the variable <i>a</i>.
<div class="Pp"></div>
The following command, for <b>&quot;$a&quot;</b> equal to either
  <b>/usr/abc/file</b> or just <b>file</b>:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr $a : '.*/\(.*\)' \| $a</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
returns the last segment of a pathname (that is, <b>file</b>). Applications
  should avoid the character <b>'/'</b> used alone as an argument; <i>expr</i>
  may interpret it as the division operator.
<div class="Pp"></div>
The following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr &quot;//$a&quot; : '.*/\(.*\)'</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
is a better representation of the previous example. The addition of the
  <b>&quot;//&quot;</b> characters eliminates any ambiguity about the division
  operator and simplifies the whole expression. Also note that pathnames may
  contain characters contained in the <i>IFS</i> variable and should be quoted
  to avoid having <b>&quot;$a&quot;</b> expand into multiple arguments.
<div class="Pp"></div>
The following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr &quot;$VAR&quot; : '.*'</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
returns the number of characters in <i>VAR</i>.
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
In an early proposal, EREs were used in the matching expression syntax. This was
  changed to BREs to avoid breaking historical applications.
<div class="Pp"></div>
The use of a leading circumflex in the BRE is unspecified because many
  historical implementations have treated it as a special character, despite
  their system documentation. For example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
<b>expr foo : ^foo     expr ^foo : ^foo</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
return 3 and 0, respectively, on those systems; their documentation would imply
  the reverse. Thus, the anchoring condition is left unspecified to avoid
  breaking historical scripts relying on this undocumented feature.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>Parameters and Variables</i>, <i>Arithmetic</i> <i>Expansion</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. In the event of any discrepancy between
  this version and the original IEEE and The Open Group Standard, the original
  IEEE and The Open Group Standard is the referee document. The original
  Standard can be obtained online at http://www.opengroup.org/unix/online.html
  .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2003</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
