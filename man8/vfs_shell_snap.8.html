<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:28 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VFS_SHELL_SNAP(8) System Administration tools
VFS_SHELL_SNAP(8)</p>

<p style="margin-top: 1em">NAME <br>
vfs_shell_snap - Shell script callouts for snapshot creation
and deletion</p>

<p style="margin-top: 1em">SYNOPSIS <br>
vfs objects = shell_snap</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This VFS module is part of the samba(8) suite.</p>

<p style="margin-top: 1em">The vfs_shell_snap VFS provides
shell-script callouts for snapshot creation and deletion
operations issued by remote clients using the File Server
Remote VSS Protocol (FSRVP).</p>

<p style="margin-top: 1em">The following shell callouts may
be configured in smb.conf:</p>

<p style="margin-top: 1em">shell_snap:check path
command</p>

<p style="margin-top: 1em">&Acirc;&middot; Called when an
FSRVP client wishes to check whether a given share supports
snapshot create/delete requests.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command is
called with a single share_path argument.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command must
return 0 if share_path is capable of being snapshotted.</p>

<p style="margin-top: 1em">shell_snap:create command</p>

<p style="margin-top: 1em">&Acirc;&middot; Called when an
FSRVP client wishes to create a snapshot.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command is
called with a single share_path argument.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command must
return 0 status if the snapshot was successfully taken.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command must
output the path of the newly created snapshot to stdout.</p>

<p style="margin-top: 1em">shell_snap:delete command</p>

<p style="margin-top: 1em">&Acirc;&middot; Called when an
FSRVP client wishes to delete a snapshot.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command is
called with base_share_path and snapshot_share_path
arguments.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command must
return 0 status if the snapshot was successfully
removed.</p>

<p style="margin-top: 1em">All commands are executed as the
authenticated FSRVP client user.</p>

<p style="margin-top: 1em">This module is stackable.</p>

<p style="margin-top: 1em">CONFIGURATION <br>
[share] <br>
vfs objects = shell_snap <br>
shell_snap:check path command = snap_check_path.sh <br>
shell_snap:create command = snap_create.sh <br>
shell_snap:delete command = snap_delete.sh</p>

<p style="margin-top: 1em">Samba&rsquo;s FSRVP server must
be configured in the [global] section:</p>

<p style="margin-top: 1em">[global] <br>
rpc_daemon:fssd = fork <br>
registry shares = yes <br>
include = registry</p>

<p style="margin-top: 1em">VERSION <br>
This man page is correct for version 4.2.0 of the Samba
suite.</p>

<p style="margin-top: 1em">AUTHOR <br>
The original Samba software and related utilities were
created by Andrew Tridgell. Samba is now developed by the
Samba Team as an Open Source project similar to the way the
Linux <br>
kernel is developed.</p>

<p style="margin-top: 1em">Samba 4.4 05/25/2017
VFS_SHELL_SNAP(8)</p>
<hr>
</body>
</html>
