<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opahostsmanalysis(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opahostsmanalysis(8)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opahostsmanalysis(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opahostsmanalysis
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(All)</b> Performs analysis against the local server only. It is assumed that
  both the host SM and the FastFabric are installed on the same system.
<div class="Pp"></div>
The host SM analysis tool checks the following:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Host SM software version</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Host SM configuration file (simple text compare using
      FF_DIFF_CMD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Host SM health (for example, is it running?)</dd>
</dl>
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opahostsmanalysis [-b|-e] [-s] [-d <i>dir</i>]
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-b</dt>
  <dd class="It-tag">Baseline mode. Default is the compare/check mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e</dt>
  <dd class="It-tag">Evaluates health only. Default is the compare/check
    mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s</dt>
  <dd class="It-tag">Saves history of failures (errors/differences).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d <i>dir</i></dt>
  <dd class="It-tag">Top-level directory for saving baseline and history of
      failed checks. Default = /var/lib/opa-ff/analysis</dd>
</dl>
<h1 class="Sh" title="Sh" id="Example"><a class="selflink" href="#Example">Example</a></h1>
opahostsmanalysis
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
The following environment variables are also used by this command:
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_ANALYSIS_DIR</b></dt>
  <dd class="It-tag">Top-level directory for baselines and failed health
    checks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_CURTIME</b></dt>
  <dd class="It-tag">Timestamp to use on the directory created in
    FF_DIFF_CMD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_DIFF_CMD</b></dt>
  <dd class="It-tag">Linux* command to use to compare baseline to latest
      snapshot.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Details"><a class="selflink" href="#Details">Details</a></h1>
All files generated by opahostsmanalysis start with hostsm in the file name.
<div class="Pp"></div>
The opahostsmanalysis tool generates files such as the following within
  FF_ANALYSIS_DIR. The actual file names reflect the individual chassis commands
  that have been configured using the <b>FF_CHASSIS_HEALTH</b> and
  <b>FF_CHASSIS_CMDS</b> parameters:
<div class="Pp"></div>
<b>Health Check</b>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">latest/hostsm.smstatus #8217#8211; Output of the sm_query
      smShowStatus command.</dd>
</dl>
<div class="Pp"></div>
<b>Baseline</b>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">baseline/hostsm.smver #8217#8211; Host SM version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">baseline/hostsm.smconfig #8217#8211; Copy of
    opafm.config.</dd>
</dl>
<div class="Pp"></div>
During a baseline run, the files are also created in FF_ANALYSIS_DIR/latest.
<div class="Pp"></div>
<b>Full Analysis</b>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">latest/hostsm.smstatus #8217#8211; Output of the sm_query
      smShowStatus command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">latest/hostsm.smver #8217#8211; Host SM version.
      latest/hostsm.smver.diff - diff of the baseline and latest host SM
      version.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">latest/hostsm.smconfig #8217#8211; Copy of opafm.xml.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">latest/hostsm.smconfig.diff #8217#8211; diff of the
      baseline and the latest opafm.xml.</dd>
</dl>
<div class="Pp"></div>
The .diff files are only created if differences are detected.
<div class="Pp"></div>
If the -s option is used and failures are detected, files related to the checks
  that failed are also copied to a time-stamped directory name under
  FF_ANALYSIS_DIR.
<h1 class="Sh" title="Sh" id="Host_SM_Items_Checked_Against_the_Baseline"><a class="selflink" href="#Host_SM_Items_Checked_Against_the_Baseline">Host
  SM Items Checked Against the Baseline</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">SM configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Version of the SM rpm installed on the system.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Host_SM_Items_Also_Checked_During_Health_Check"><a class="selflink" href="#Host_SM_Items_Also_Checked_During_Health_Check">Host
  SM Items Also Checked During Health Check</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The SM is in the running state.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
