<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MANDOS-CTL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MANDOS-CTL(8)</td>
    <td class="head-vol">Mandos Manual</td>
    <td class="head-rtitle">MANDOS-CTL(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mandos-ctl - Control or query the operation of the Mandos server
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  {[ <b>--enable</b> | <b>-e</b>
<div>&#x00A0;</div>
<br/>
 | <b>--disable</b> | <b>-d</b>]
<div>&#x00A0;</div>
[ <b>--bump-timeout</b> | <b>-b</b>]
<div>&#x00A0;</div>
[ <b>--start-checker</b>]
<div>&#x00A0;</div>
[ <b>--stop-checker</b>]
<div>&#x00A0;</div>
[ <b>--remove</b> | <b>-r</b>]
<div>&#x00A0;</div>
[ <b>--checker&#x00A0;</b><b></b><i>COMMAND</i> |
  <b>-c&#x00A0;</b><b></b><i>COMMAND</i>]
<div>&#x00A0;</div>
[ <b>--timeout&#x00A0;</b><b></b><i>TIME</i> |
  <b>-t&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--extended-timeout&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--interval&#x00A0;</b><b></b><i>TIME</i> |
  <b>-i&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--approve-by-default</b>
<div>&#x00A0;</div>
<br/>
 | <b>--deny-by-default</b>]
<div>&#x00A0;</div>
[ <b>--approval-delay&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--approval-duration&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--interval&#x00A0;</b><b></b><i>TIME</i> |
  <b>-i&#x00A0;</b><b></b><i>TIME</i>]
<div>&#x00A0;</div>
[ <b>--host&#x00A0;</b><b></b><i>STRING</i> |
  <b>-H&#x00A0;</b><b></b><i>STRING</i>]
<div>&#x00A0;</div>
[ <b>--secret&#x00A0;</b><b></b><i>FILENAME</i> |
  <b>-s&#x00A0;</b><b></b><i>FILENAME</i>]
<div>&#x00A0;</div>
[ <b>--approve</b> | <b>-A</b>
<div>&#x00A0;</div>
<br/>
 | <b>--deny</b> | <b>-D</b>]}
<div>&#x00A0;</div>
{ <b>--all</b> | <b>-a</b> | <i>CLIENT</i>...}</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  [ <b>--verbose</b> | <b>-v</b>
<div>&#x00A0;</div>
<br/>
 | <b>--dump-json</b> | <b>-j</b>] [<i>CLIENT</i>...]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  { <b>--is-enabled</b> | <b>-V</b>} <i>CLIENT</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  { <b>--help</b> | <b>-h</b>}</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  { <b>--version</b> | <b>-v</b>}</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>mandos-ctl</b>
  <b>--check</b></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>mandos-ctl</b> is a program to control or query the operation of the Mandos
  server <b>mandos</b>(8).
<div class="Pp"></div>
This program can be used to change client settings, approve or deny client
  requests, and to remove clients from the server.
<h1 class="Sh" title="Sh" id="PURPOSE"><a class="selflink" href="#PURPOSE">PURPOSE</a></h1>
The purpose of this is to enable <i>remote and unattended rebooting</i> of
  client host computer with an <i>encrypted root file system</i>. See the
  section called &#x201C;OVERVIEW&#x201D; for details.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--help</b>, <b>-h</b>
<div style="margin-left: 4.00ex;">Show a help message and exit</div>
<div class="Pp"></div>
<b>--enable</b>, <b>-e</b>
<div style="margin-left: 4.00ex;">Enable client(s). An enabled client will be
  eligble to receive its secret.</div>
<div class="Pp"></div>
<b>--disable</b>, <b>-d</b>
<div style="margin-left: 4.00ex;">Disable client(s). A disabled client will not
  be eligble to receive its secret, and no checkers will be started for
  it.</div>
<div class="Pp"></div>
<b>--bump-timeout</b>
<div style="margin-left: 4.00ex;">Bump the timeout of the specified client(s),
  just as if a checker had completed successfully for it/them.</div>
<div class="Pp"></div>
<b>--start-checker</b>
<div style="margin-left: 4.00ex;">Start a new checker now for the specified
  client(s).</div>
<div class="Pp"></div>
<b>--stop-checker</b>
<div style="margin-left: 4.00ex;">Stop any running checker for the specified
  client(s).</div>
<div class="Pp"></div>
<b>--remove</b>, <b>-r</b>
<div style="margin-left: 4.00ex;">Remove the specified client(s) from the
  server.</div>
<div class="Pp"></div>
<b>--checker </b><b></b><i>COMMAND</i>, <b>-c </b><b></b><i>COMMAND</i>
<div style="margin-left: 4.00ex;">Set the <i>checker</i> option of the specified
  client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--timeout </b><b></b><i>TIME</i>, <b>-t </b><b></b><i>TIME</i>
<div style="margin-left: 4.00ex;">Set the <i>timeout</i> option of the specified
  client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--extended-timeout </b><b></b><i>TIME</i>
<div style="margin-left: 4.00ex;">Set the <i>extended_timeout</i> option of the
  specified client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--interval </b><b></b><i>TIME</i>, <b>-i </b><b></b><i>TIME</i>
<div style="margin-left: 4.00ex;">Set the <i>interval</i> option of the
  specified client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--approve-by-default</b>, <b>--deny-by-default</b>
<div style="margin-left: 4.00ex;">Set the <i>approved_by_default</i> option of
  the specified client(s) to True or False, respectively; see
  <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--approval-delay </b><b></b><i>TIME</i>
<div style="margin-left: 4.00ex;">Set the <i>approval_delay</i> option of the
  specified client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--approval-duration </b><b></b><i>TIME</i>
<div style="margin-left: 4.00ex;">Set the <i>approval_duration</i> option of the
  specified client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--host </b><b></b><i>STRING</i>, <b>-H </b><b></b><i>STRING</i>
<div style="margin-left: 4.00ex;">Set the <i>host</i> option of the specified
  client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--secret </b><b></b><i>FILENAME</i>, <b>-s </b><b></b><i>FILENAME</i>
<div style="margin-left: 4.00ex;">Set the <i>secfile</i> option of the specified
  client(s); see <b>mandos-clients.conf</b>(5).</div>
<div class="Pp"></div>
<b>--approve</b>, <b>-A</b>
<div style="margin-left: 4.00ex;">Approve client(s) if currently waiting for
  approval.</div>
<div class="Pp"></div>
<b>--deny</b>, <b>-D</b>
<div style="margin-left: 4.00ex;">Deny client(s) if currently waiting for
  approval.</div>
<div class="Pp"></div>
<b>--all</b>, <b>-a</b>
<div style="margin-left: 4.00ex;">Make the client-modifying options modify
  <i>all</i> clients.</div>
<div class="Pp"></div>
<b>--verbose</b>, <b>-v</b>
<div style="margin-left: 4.00ex;">Show all client settings, not just a
  subset.</div>
<div class="Pp"></div>
<b>--dump-json</b>, <b>-j</b>
<div style="margin-left: 4.00ex;">Dump client settings as JSON to standard
  output.</div>
<div class="Pp"></div>
<b>--is-enabled</b>, <b>-V</b>
<div style="margin-left: 4.00ex;">Check if a single client is enabled or not,
  and exit with a successful exit status only if the client is enabled.</div>
<div class="Pp"></div>
<b>--check</b>
<div style="margin-left: 4.00ex;">Run self-tests. This includes any unit tests,
  etc.</div>
<h1 class="Sh" title="Sh" id="OVERVIEW"><a class="selflink" href="#OVERVIEW">OVERVIEW</a></h1>
This is part of the Mandos system for allowing computers to have encrypted root
  file systems and at the same time be capable of remote and/or unattended
  reboots. The computers run a small client program in the initial RAM disk
  environment which will communicate with a server over a network. All network
  communication is encrypted using TLS. The clients are identified by the server
  using an OpenPGP key; each client has one unique to it. The server sends the
  clients an encrypted password. The encrypted password is decrypted by the
  clients using the same OpenPGP key, and the password is then used to unlock
  the root file system, whereupon the computers can continue booting normally.
<div class="Pp"></div>
This program is a small utility to generate new OpenPGP keys for new Mandos
  clients, and to generate sections for inclusion in clients.conf on the server.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
If the <b>--is-enabled</b> option is used, the exit status will be 0 only if the
  specified client is enabled.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please report bugs to the Mandos development mailing list:
  &lt;mandos-dev@recompile.se&gt; (subscription required). Note that this list
  is public. The developers can be reached privately at
  &lt;mandos@recompile.se&gt; (OpenPGP key fingerprint 153A 37F1 0BBA 0435 987F
  2C4A 7223 2973 CA34 C2C4 for encrypted mail).
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
To list all clients:
<div class="Pp"></div>
<b>mandos-ctl</b>
<div class="Pp"></div>
To list <i>all</i> settings for the clients named
  &#x201C;foo1.example.org&#x201D; and &#x201C;foo2.example.org&#x201D;:
<div class="Pp"></div>
<b>mandos-ctl --verbose foo1.example.org foo2.example.org</b>
<div class="Pp"></div>
To enable all clients:
<div class="Pp"></div>
<b>mandos-ctl --enable --all</b>
<div class="Pp"></div>
To change timeout and interval value for the clients named
  &#x201C;foo1.example.org&#x201D; and &#x201C;foo2.example.org&#x201D;:
<div class="Pp"></div>
<b>mandos-ctl --timeout=&quot;5m&quot; --interval=&quot;1m&quot;
  foo1.example.org foo2.example.org</b>
<div class="Pp"></div>
To approve all clients currently waiting for it:
<div class="Pp"></div>
<b>mandos-ctl --approve --all</b>
<h1 class="Sh" title="Sh" id="SECURITY"><a class="selflink" href="#SECURITY">SECURITY</a></h1>
This program must be permitted to access the Mandos server via the D-Bus
  interface. This normally requires the root user, but could be configured
  otherwise by reconfiguring the D-Bus server.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>intro</b>(8mandos), <b>mandos</b>(8), <b>mandos-clients.conf</b>(5),
  <b>mandos-monitor</b>(8)
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2010-2016 Teddy Hogeborn, Bj&#x00F6;rn P&#x00E5;hlsson
<div>&#x00A0;</div>
<div class="Pp"></div>
This manual page is free software: you can redistribute it and/or modify it
  under the terms of the GNU General Public License as published by the Free
  Software Foundation, either version 3 of the License, or (at your option) any
  later version.
<div class="Pp"></div>
This manual page is distributed in the hope that it will be useful, but WITHOUT
  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
  FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program. If not, see <b>http://www.gnu.org/licenses/</b>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-06-27</td>
    <td class="foot-os">Mandos 1.7.14</td>
  </tr>
</table>
</body>
</html>
