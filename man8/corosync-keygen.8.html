<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>COROSYNC-KEYGEN(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">COROSYNC-KEYGEN(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">COROSYNC-KEYGEN(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
corosync-keygen - Generate an authentication key for Corosync.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>corosync-keygen [-k &lt;filename&gt;] [-l]</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
If you want to configure corosync to use cryptographic techniques to ensure
  authenticity and privacy of the messages, you will need to generate a private
  key.
<div class="Pp"></div>
<b>corosync-keygen</b> creates this key and writes it to /etc/corosync/authkey
  or to file specified by -k option.
<div class="Pp"></div>
This private key must be copied to every processor in the cluster. If the
  private key isn't the same for every node, those nodes with nonmatching
  private keys will not be able to join the same configuration.
<div class="Pp"></div>
Copy the key to some security transportable storage or use ssh to transmit the
  key from node to node. Then install the key with the command:
<div class="Pp"></div>
unix#: install -D --group=0 --owner=0 --mode=0400 /path_to_authkey/authkey
  /etc/corosync/authkey
<div class="Pp"></div>
If a message &quot;Invalid digest&quot; appears from the corosync executive, the
  keys are not consistent between processors.
<div class="Pp"></div>
<b>Note: corosync-keygen</b> will ask for user input to assist in generating
  entropy unless the -l option is used.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k &lt;filename&gt;</b></dt>
  <dd class="It-tag">This specifies the fully qualified path to the shared key
      to create.
    <div>&#x00A0;</div>
    The default is /etc/corosync/authkey.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">Use a less secure random data source that will not require
      user input to help generate entropy. This may be useful when this utility
      is used from a script or hardware random number generator is not available
      (f.e. in virtual machine).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Generate the key.</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
# corosync-keygen
<div>&#x00A0;</div>
Corosync Cluster Engine Authentication key generator.
<div>&#x00A0;</div>
Gathering 1024 bits for key from /dev/random.
<div>&#x00A0;</div>
Press keys on your keyboard to generate entropy.
<div>&#x00A0;</div>
<div class="Pp"></div>
$ corosync-keygen -l -k /tmp/authkey
<div>&#x00A0;</div>
Corosync Cluster Engine Authentication key generator.
<div>&#x00A0;</div>
Writing corosync key to /tmp/authkey.
<div>&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>corosync_overview</b>(8), <b>corosync.conf</b>(5),
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Angus Salkeld</div>
<table class="foot">
  <tr>
    <td class="foot-date">2010-05-30</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
