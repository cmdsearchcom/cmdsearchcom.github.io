<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ecryptfs-migrate-home(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ecryptfs-migrate-home(8)</td>
    <td class="head-vol">eCryptfs</td>
    <td class="head-rtitle">ecryptfs-migrate-home(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ecryptfs-migrate-home - migrate a user's home directory to an encrypted home
  setup
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>ecryptfs-migrate-home</b> [-u|--user USER]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u, --user USER</b></dt>
  <dd class="It-tag">Migrate USER's home directory to an encrypted home
      directory
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>WARNING</b>: Make a complete backup copy of the non-encrypted data to another
  system or external media. This script is dangerous and in case of an error,
  could result in data lost, or USER locked out of the system!
<div style="height: 1.00em;">&#x00A0;</div>
This program must be executed by root.
<div style="height: 1.00em;">&#x00A0;</div>
This program will attempt to migrate a user's home directory to an encrypted
  home directory.
<div style="height: 1.00em;">&#x00A0;</div>
This program requires free disk space 2.5x the current size of the home
  directory to be migrated. Once successful, you can recover most of this space
  by deleting the cleartext directory.
<div style="height: 1.00em;">&#x00A0;</div>
The USER must be logged out of all sessions in order to perform the migration,
  and have no open files according to <b>lsof</b>(1).
<div style="height: 1.00em;">&#x00A0;</div>
Once the migration has completed, the USER must login immediately, BEFORE THE
  NEXT REBOOT in order to complete the migration.
<div style="height: 1.00em;">&#x00A0;</div>
After logging in, if USER can read and write files in their home directory
  successfully, then the migration has completed successfully and can remove the
  cleartext backup in <i>/home/</i>.
<div style="height: 1.00em;">&#x00A0;</div>
After a successful migration, the USER really must run
  <b>ecryptfs-unwrap-passphrase</b>(1) or <b>zescrow</b>(1) and record their
  randomly generated mount passphrase.
<div style="height: 1.00em;">&#x00A0;</div>
If swap is not already encrypted, it is highly recommended that your
  administrator setup encrypted swap using <b>ecryptfs-setup-swap</b>(1).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>ecryptfs-unwrap-passphrase</b>(1), <b>ecryptfs-setup-private</b>(1),
  <b>ecryptfs-setup-swap</b>(1), <b>lsof</b>(1), <b>rsync</b>(1),
  <b>zescrow</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
<i>http://ecryptfs.org/</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manpage was written by Dustin Kirkland &lt;kirkland@ubuntu.com&gt; for
  Ubuntu systems (but may be used by others). Permission is granted to copy,
  distribute and/or modify this document under the terms of the GNU General
  Public License, Version 2 or any later version published by the Free Software
  Foundation.
<div style="height: 1.00em;">&#x00A0;</div>
On Debian and Ubuntu systems, the complete text of the GNU General Public
  License can be found in /usr/share/common-licenses/GPL.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-01-24</td>
    <td class="foot-os">ecryptfs-utils</td>
  </tr>
</table>
</body>
</html>
