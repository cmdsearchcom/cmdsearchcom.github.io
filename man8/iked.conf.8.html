<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>IKED(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IKED(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">IKED(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">iked.conf</b> &#x2014;
  <span class="Nd" title="Nd">Internet Key Exchange Daemon Configuration
  File</span>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">iked.conf</b> file is used to configure
  <a class="Xr" title="Xr">iked(8)</a> ( Internet Key Exchange Daemon ). The
  parameters supplied are used to negotiate ISAKMP ( phase1 ) and IPsec ( phase2
  ) SAs for IPsec capable hosts.
<h1 class="Sh" title="Sh" id="SYNTAX"><a class="selflink" href="#SYNTAX">SYNTAX</a></h1>
The configuration parameters are expressed as a series of sections containing a
  number of statements. Sections begin with a keyword optionally followed by a
  parameter list. All statements for a section are enclosed using the
  &#x2018;<code class="Li">{</code>&#x2019; and
  &#x2018;<code class="Li">}</code>&#x2019; characters. Statements begin with a
  keyword optionally followed by a parameter list and are terminated with the
  &#x2018;<code class="Li">;</code>&#x2019; character. Lines that begin with the
  &#x2018;<code class="Li">#</code>&#x2019; character are treated as comments.
<div class="Pp"></div>
This document denotes keywords using <b class="Ic" title="Ic">this</b> font and
  user supplied parameters using <var class="Ar" title="Ar">this</var> font.
  Optional parameters are enclosed using the
  &#x2018;<code class="Li">[</code>&#x2019; and
  &#x2018;<code class="Li">]</code>&#x2019; characters. Multiple keywords that
  may be valid for a single parameter are enclosed using the
  &#x2018;<code class="Li">(</code>&#x2019; and
  &#x2018;<code class="Li">)</code>&#x2019; characters and separated using the
  &#x2018;<code class="Li">|</code>&#x2019; character.
<div class="Pp"></div>
The defined parameter types are as follows ...
<div class="Pp"></div>
<dl class="Bl-tag Bl-compact" style="margin-left: 12.60ex;">
  <dt class="It-tag" style="margin-left: -12.60ex;"><var class="Ar" title="Ar">number</var></dt>
  <dd class="It-tag">A decimal number</dd>
  <dt class="It-tag" style="margin-left: -12.60ex;"><var class="Ar" title="Ar">label</var></dt>
  <dd class="It-tag">A string comprised of alphanumeric characters</dd>
  <dt class="It-tag" style="margin-left: -12.60ex;"><var class="Ar" title="Ar">quoted</var></dt>
  <dd class="It-tag">A quoted string enclosed in
      &#x2018;<code class="Li">&quot;</code>&#x2019; characters</dd>
  <dt class="It-tag" style="margin-left: -12.60ex;"><var class="Ar" title="Ar">address</var></dt>
  <dd class="It-tag">An IP address expressed as x.x.x.x</dd>
  <dt class="It-tag" style="margin-left: -12.60ex;"><var class="Ar" title="Ar">network</var></dt>
  <dd class="It-tag">An IP network and prefix length expressed as x.x.x.x/y</dd>
</dl>
<h2 class="Ss" title="Ss" id="Daemon_Section"><a class="selflink" href="#Daemon_Section">Daemon
  Section</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt class="It-tag"><a class="selflink" href="#daemon_{"><b class="Ic" title="Ic" id="daemon_{">daemon
    {</b></a> <var class="Ar" title="Ar">statements</var>
    <b class="Ic" title="Ic">}</b></dt>
  <dd class="It-tag">Specifies the general configuration for
      <a class="Xr" title="Xr">iked(8)</a> operation. This includes parameters
      related to the basic network configuration, log file and debug output.
      Only one <b class="Ic" title="Ic">daemon</b> section should be defined.
    <div class="Pp"></div>
    <dl class="Bl-tag Bl-compact">
      <dt class="It-tag"><a class="selflink" href="#socket"><b class="Ic" title="Ic" id="socket">socket</b></a>
        (<b class="Ic" title="Ic">ike</b> |
        <a class="selflink" href="#natt"><b class="Ic" title="Ic" id="natt">natt</b></a>)
        [<var class="Ar" title="Ar">address</var>]
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">An address and port number that should be used for ike
          or natt communications. If the address parameter is omitted, the
          daemon will attempt to bind to any address for the given port number.
          If no socket statements are specified, the daemon will attempt to bind
          to all interfaces for both ike and natt using the default port numbers
          ( 500 &amp; 4500 respectively ). Note, the
          <var class="Ar" title="Ar">natt</var> keyword can only be specified if
          the daemon was compiled with natt support.</dd>
      <dt class="It-tag"><a class="selflink" href="#retry_count"><b class="Ic" title="Ic" id="retry_count">retry_count</b></a>
        <var class="Ar" title="Ar">number;</var></dt>
      <dd class="It-tag">The number of times an exchange packet should be resent
          to a peer. The default value for this parameter is 2.</dd>
      <dt class="It-tag"><a class="selflink" href="#retry_delay"><b class="Ic" title="Ic" id="retry_delay">retry_delay</b></a>
        <var class="Ar" title="Ar">number;</var></dt>
      <dd class="It-tag">The number of seconds to wait between packet resend
          attempts. The default value for this parameter is 10.</dd>
      <dt class="It-tag"><a class="selflink" href="#log_file"><b class="Ic" title="Ic" id="log_file">log_file</b></a>
        <var class="Ar" title="Ar">quoted</var>;</dt>
      <dd class="It-tag">The path and file name that should be used for log
          output.</dd>
      <dt class="It-tag"><a class="selflink" href="#log_level_(none"><b class="Ic" title="Ic" id="log_level_(none">log_level
        (none</b></a> |
        <a class="selflink" href="#error"><b class="Ic" title="Ic" id="error">error</b></a>
        |
        <a class="selflink" href="#info"><b class="Ic" title="Ic" id="info">info</b></a>
        |
        <a class="selflink" href="#debug"><b class="Ic" title="Ic" id="debug">debug</b></a>
        |
        <a class="selflink" href="#loud"><b class="Ic" title="Ic" id="loud">loud</b></a>
        |
        <a class="selflink" href="#decode)"><b class="Ic" title="Ic" id="decode)">decode)</b></a>;</dt>
      <dd class="It-tag">The log output detail level. The default value for this
          parameter is <b class="Ic" title="Ic">none</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#pcap_decrypt"><b class="Ic" title="Ic" id="pcap_decrypt">pcap_decrypt</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The path and file name that should be used to dump
          decrypted ike packets in pcap format. If no
          <b class="Ic" title="Ic">pcap_decrypt</b> statement is specified, this
          feature is disabled.</dd>
      <dt class="It-tag"><a class="selflink" href="#pcap_encrypt"><b class="Ic" title="Ic" id="pcap_encrypt">pcap_encrypt</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The path and file name that should be used to dump
          encrypted ike packets in pcap format. If no
          <b class="Ic" title="Ic">pcap_encrypt</b> statement is specified, this
          feature is disabled.</dd>
      <dt class="It-tag"><a class="selflink" href="#dhcp_file"><b class="Ic" title="Ic" id="dhcp_file">dhcp_file</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The path and file name that should be used to store a
          dhcp mac address seed value for dhcp over ipsec negotiation. If no
          file is present, the file will be created.</dd>
    </dl>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Network_Group_Section"><a class="selflink" href="#Network_Group_Section">Network
  Group Section</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt class="It-tag"><a class="selflink" href="#netgroup"><b class="Ic" title="Ic" id="netgroup">netgroup</b></a>
    <var class="Ar" title="Ar">label</var> <b class="Ic" title="Ic">{</b>
    <var class="Ar" title="Ar">statements</var>
    <b class="Ic" title="Ic">}</b></dt>
  <dd class="It-tag">Specifies a group of networks that can be refferred to by
      the assigned label. Multiple <b class="Ic" title="Ic">netgroup</b>
      sections may be defined.
    <div class="Pp"></div>
    <dl class="Bl-tag Bl-compact">
      <dt class="It-tag"><a class="selflink" href="#network"><b class="Ic" title="Ic" id="network">network</b></a>;</dt>
      <dd class="It-tag">A network to be associated with this network
        group.</dd>
    </dl>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="XAuth_LDAP_Section"><a class="selflink" href="#XAuth_LDAP_Section">XAuth
  LDAP Section</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt class="It-tag"><a class="selflink" href="#xauth_ldap_{"><b class="Ic" title="Ic" id="xauth_ldap_{">xauth_ldap
    {</b></a> <var class="Ar" title="Ar">statements</var>
    <b class="Ic" title="Ic">}</b></dt>
  <dd class="It-tag">Specifies the LDAP configuration to be used for when the
      <b class="Ic" title="Ic">xauth_source</b> is set to
      <b class="Ic" title="Ic">ldap</b> for a given peer section. Only one
      <b class="Ic" title="Ic">xauth_ldap</b> section should be defined. Note,
      an <b class="Ic" title="Ic">xauth_ldap</b> section can only be defined if
      the daemon was compiled with LDAP support.
    <div class="Pp"></div>
    <dl class="Bl-tag Bl-compact">
      <dt class="It-tag"><a class="selflink" href="#version"><b class="Ic" title="Ic" id="version">version</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">The LDAP protocol version to be used ( 2 or 3 ). The
          default value for this parameter is 3.</dd>
      <dt class="It-tag"><a class="selflink" href="#url"><b class="Ic" title="Ic" id="url">url</b></a>
        <var class="Ar" title="Ar">quoted</var>;</dt>
      <dd class="It-tag">The LDAP server url. For example, a url may look like
          &quot;ldap://ldap.shrew.net:389&quot;.</dd>
      <dt class="It-tag"><a class="selflink" href="#base"><b class="Ic" title="Ic" id="base">base</b></a>
        <var class="Ar" title="Ar">quoted</var>;</dt>
      <dd class="It-tag">The base dn to be used for LDAP searches. For example,
          a base dn may look like &quot;ou=users,dc=shrew,dc=net&quot;.</dd>
      <dt class="It-tag"><a class="selflink" href="#subtree_(enable"><b class="Ic" title="Ic" id="subtree_(enable">subtree
        (enable</b></a> |
        <a class="selflink" href="#disable);"><b class="Ic" title="Ic" id="disable);">disable);</b></a></dt>
      <dd class="It-tag">The search scope to be used for LDAP searches. If
          enabled, searches will be performed using the subtree search scope. If
          disabled, searches will be performed using the one level search scope.
          The default value for this parameter is
          <b class="Ic" title="Ic">disable</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#bind_dn"><b class="Ic" title="Ic" id="bind_dn">bind_dn</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The dn to bind as before performing LDAP searches. If
          this parameter is omitted, searches will be performed using anonymous
          binds.</dd>
      <dt class="It-tag"><a class="selflink" href="#bind_pw"><b class="Ic" title="Ic" id="bind_pw">bind_pw</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The password to use when a
          <b class="Ic" title="Ic">bind_dn</b> is specified.</dd>
      <dt class="It-tag"><a class="selflink" href="#attr_user"><b class="Ic" title="Ic" id="attr_user">attr_user</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The attribute used to specify a user name in the LDAP
          directory. For example, if a user dn is
          &quot;cn=user,dc=shrew,dc=net&quot; then the attribute would be
          &quot;cn&quot;. The default value for this parameter is
          &quot;cn&quot;.</dd>
      <dt class="It-tag"><a class="selflink" href="#attr_group"><b class="Ic" title="Ic" id="attr_group">attr_group</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The attribute used to specify a group name in the LDAP
          directory. For example, if a group dn is
          &quot;cn=group,dc=shrew,dc=net&quot; then the attribute would be
          &quot;cn&quot;. The default value for this parameter is
          &quot;cn&quot;.</dd>
      <dt class="It-tag"><a class="selflink" href="#attr_member"><b class="Ic" title="Ic" id="attr_member">attr_member</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The attribute used to specify a group member in the
          LDAP directory. The default value for this parameter is
          &quot;member&quot;.</dd>
    </dl>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="XConf_Local_Section"><a class="selflink" href="#XConf_Local_Section">XConf
  Local Section</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt class="It-tag"><a class="selflink" href="#xconf_local_{"><b class="Ic" title="Ic" id="xconf_local_{">xconf_local
    {</b></a> <var class="Ar" title="Ar">statements</var>
    <b class="Ic" title="Ic">}</b></dt>
  <dd class="It-tag">Specifies the Configuration Exchange settings to be used
      when the <b class="Ic" title="Ic">xconf_source</b> is set to
      <b class="Ic" title="Ic">local</b> for a given peer section. Only one
      <b class="Ic" title="Ic">xconf_local</b> section should be defined.
    <div class="Pp"></div>
    <dl class="Bl-tag Bl-compact">
      <dt class="It-tag"><a class="selflink" href="#network4"><b class="Ic" title="Ic" id="network4">network4</b></a>
        <var class="Ar" title="Ar">network [number];</var></dt>
      <dd class="It-tag">The network that will be used to define a local address
          pool. An optional number can be specified to restrict the pool to a
          specific size. An address from this pool along with the network mask
          are passed to a peer when requested.</dd>
      <dt class="It-tag"><a class="selflink" href="#dnss4"><b class="Ic" title="Ic" id="dnss4">dnss4</b></a>
        <var class="Ar" title="Ar">address;</var></dt>
      <dd class="It-tag">The dns server address to be passed to a peer when
          requested.</dd>
      <dt class="It-tag"><a class="selflink" href="#nbns4"><b class="Ic" title="Ic" id="nbns4">nbns4</b></a>
        <var class="Ar" title="Ar">address;</var></dt>
      <dd class="It-tag">The netbios name server address to be passed to a peer
          when requested.</dd>
      <dt class="It-tag"><a class="selflink" href="#dns_suffix"><b class="Ic" title="Ic" id="dns_suffix">dns_suffix</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The dns suffix to be passed to a peer when
        requested.</dd>
      <dt class="It-tag"><a class="selflink" href="#dns_list"><b class="Ic" title="Ic" id="dns_list">dns_list</b></a>
        <var class="Ar" title="Ar">quoted quoted ...</var>;</dt>
      <dd class="It-tag">A list of split dns suffixes to be passed to a peer
          when requested. A peer can use this list to selectivly forward dns
          requests to the <b class="Ic" title="Ic">dnss4</b> server when a query
          matches one of the supplied split dns suffixes.</dd>
      <dt class="It-tag"><a class="selflink" href="#banner"><b class="Ic" title="Ic" id="banner">banner</b></a>
        <var class="Ar" title="Ar">quoted;</var></dt>
      <dd class="It-tag">The path to a file that contains a login banner to be
          passed to a peer when requested.</dd>
      <dt class="It-tag"><a class="selflink" href="#pfs_group"><b class="Ic" title="Ic" id="pfs_group">pfs_group</b></a>
        <var class="Ar" title="Ar">number;</var></dt>
      <dd class="It-tag">The pfs group number to be passed to a peer when
          requested.</dd>
    </dl>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Peer_Section"><a class="selflink" href="#Peer_Section">Peer
  Section</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt class="It-tag"><a class="selflink" href="#peer"><b class="Ic" title="Ic" id="peer">peer</b></a>
    <var class="Ar" title="Ar">address</var>
    [<var class="Ar" title="Ar">number</var>] <b class="Ic" title="Ic">{</b>
    <var class="Ar" title="Ar">statements</var>
    <b class="Ic" title="Ic">}</b></dt>
  <dd class="It-tag">Specifies the parameters used to communicate with a given
      peer by address and optional port number. If the port value is omitted,
      the default isakmp port number will be used ( 500 ). If an address of
      0.0.0.0 is used, the peer section can be used for any remote host.
      Multiple <b class="Ic" title="Ic">peer</b> sections may be defined.
    <div class="Pp"></div>
    <dl class="Bl-tag Bl-compact">
      <dt class="It-tag"><a class="selflink" href="#contact_(initiator"><b class="Ic" title="Ic" id="contact_(initiator">contact
        (initiator</b></a> |
        <a class="selflink" href="#responder"><b class="Ic" title="Ic" id="responder">responder</b></a>
        |
        <a class="selflink" href="#both)"><b class="Ic" title="Ic" id="both)">both)</b></a>;</dt>
      <dd class="It-tag">Specifies the contact type when establishing phase1
          negotiations with a peer. If <b class="Ic" title="Ic">initiator</b> is
          used, the daemon will initiate contact but deny contact initiated by
          the peer. If <b class="Ic" title="Ic">responder</b> is used, the
          daemon will allow contact initiated by the peer but will not initiate
          contact. If <b class="Ic" title="Ic">both</b> is specified, the daemon
          will initiate contact and allow the peer to initiate contact.</dd>
      <dt class="It-tag"><a class="selflink" href="#exchange_(main"><b class="Ic" title="Ic" id="exchange_(main">exchange
        (main</b></a> |
        <a class="selflink" href="#aggressive)"><b class="Ic" title="Ic" id="aggressive)">aggressive)</b></a>;</dt>
      <dd class="It-tag">Specifies the exchange type to be used for phase1
          negotiations with a peer. The default value for this parameter is
          <b class="Ic" title="Ic">main</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#natt_mode_(disable"><b class="Ic" title="Ic" id="natt_mode_(disable">natt_mode
        (disable</b></a> |
        <a class="selflink" href="#enable"><b class="Ic" title="Ic" id="enable">enable</b></a>
        |
        <a class="selflink" href="#force"><b class="Ic" title="Ic" id="force">force</b></a>
        [<b class="Ic" title="Ic">draft</b> |
        <a class="selflink" href="#rfc"><b class="Ic" title="Ic" id="rfc">rfc</b></a>]);</dt>
      <dd class="It-tag">Specifies the NAT Traversal mode to be used for phase1
          negotiations with a peer. If <b class="Ic" title="Ic">disable</b> is
          used, natt negotiations will not be attempted. If
          <b class="Ic" title="Ic">enable</b> is used, the daemon will attempt
          to negotiate and use NAT Traversal when appropriate. If
          <b class="Ic" title="Ic">force</b> is used, the daemon will use NAT
          Traversal even if the peer does not negotiate support for this
          feature. When force is used, the <b class="Ic" title="Ic">draft</b> or
          <b class="Ic" title="Ic">rfc</b> modifiers can optionally be specified
          to select the required method with <b class="Ic" title="Ic">rfc</b>
          being the default if omitted. The default value for this parameter is
          <b class="Ic" title="Ic">disable</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#natt_port"><b class="Ic" title="Ic" id="natt_port">natt_port</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the NAT Traversal port number to be used for
          phase1 negotiations with a peer when acting as an initiator. The
          default value for this parameter is 4500.</dd>
      <dt class="It-tag"><a class="selflink" href="#natt_rate"><b class="Ic" title="Ic" id="natt_rate">natt_rate</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the number of seconds between sending NAT
          Traversal keep-alive messages. The default value for this parameter is
          15.</dd>
      <dt class="It-tag"><a class="selflink" href="#dpd_mode_(disable"><b class="Ic" title="Ic" id="dpd_mode_(disable">dpd_mode
        (disable</b></a> |
        <a class="selflink" href="#enable"><b class="Ic" title="Ic" id="enable">enable</b></a>
        |
        <a class="selflink" href="#force)"><b class="Ic" title="Ic" id="force)">force)</b></a>;</dt>
      <dd class="It-tag">Specifies the Dead Peer Detection mode to be used with
          a peer. If <b class="Ic" title="Ic">disable</b> is used, DPD
          negotiations will not be attempted. If
          <b class="Ic" title="Ic">enable</b> is used, the daemon will attempt
          to negotiate and use DPD when appropriate. If
          <b class="Ic" title="Ic">force</b> is used, the daemon will use DPD
          even if the peer does not negotiate support for this feature. The
          default value for this parameter is
          <b class="Ic" title="Ic">disable</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#dpd_delay"><b class="Ic" title="Ic" id="dpd_delay">dpd_delay</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the number of seconds between sending DPD
          are-you-there messages. The default value for this parameter is
        15.</dd>
      <dt class="It-tag"><a class="selflink" href="#dpd_retry"><b class="Ic" title="Ic" id="dpd_retry">dpd_retry</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the number times a DPD are-you-there message
          will be retransmitted when no response is received. The default value
          for this parameter is 5.</dd>
      <dt class="It-tag"><a class="selflink" href="#frag_ike_mode_(disable"><b class="Ic" title="Ic" id="frag_ike_mode_(disable">frag_ike_mode
        (disable</b></a> |
        <a class="selflink" href="#enable"><b class="Ic" title="Ic" id="enable">enable</b></a>
        |
        <a class="selflink" href="#force)"><b class="Ic" title="Ic" id="force)">force)</b></a>;</dt>
      <dd class="It-tag">Specifies the IKE Fragmentation mode to be used with a
          peer. If <b class="Ic" title="Ic">disable</b> is used, IKE
          Fragmentation negotiations will not be attemted. If
          <b class="Ic" title="Ic">enable</b> is used, the daemon will attempt
          to negotiate and use IKE Fragmentation when appropriate. If
          <b class="Ic" title="Ic">force</b> is used, the daemon will use IKE
          Fragmentation even if the peer does not negotiate support for this
          feature. The default value for this parameter is
          <b class="Ic" title="Ic">disable</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#frag_ike_size"><b class="Ic" title="Ic" id="frag_ike_size">frag_ike_size</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the maximum number of bytes for an IKE
          Fragment. The default value for this parameter is 520.</dd>
      <dt class="It-tag"><a class="selflink" href="#frag_esp_mode_(disable"><b class="Ic" title="Ic" id="frag_esp_mode_(disable">frag_esp_mode
        (disable</b></a> |
        <a class="selflink" href="#enable)"><b class="Ic" title="Ic" id="enable)">enable)</b></a>;</dt>
      <dd class="It-tag">Specifies the ESP Fragmentation mode to be used with a
          peer. If <b class="Ic" title="Ic">disable</b> is used, the daemon will
          create IPsec SAs without the ESP Fragmentation option. If
          <b class="Ic" title="Ic">enable</b> is used, the daemon will create
          IPsec SAs with the ESP Fragmentation option. The default value for
          this parameter is <b class="Ic" title="Ic">disable</b>. Note, ESP
          Fragmentation is only valid for IPsec SAs using NAT Traversal. The
          operating system must also have support for this feature. ( NetBSD
          Only )</dd>
      <dt class="It-tag"><a class="selflink" href="#frag_esp_size"><b class="Ic" title="Ic" id="frag_esp_size">frag_esp_size</b></a>
        <var class="Ar" title="Ar">number</var>;</dt>
      <dd class="It-tag">Specifies the maximum number of bytes for an ESP
          Fragment. The default value for this parameter is 520.</dd>
      <dt class="It-tag"><a class="selflink" href="#peerid_(local"><b class="Ic" title="Ic" id="peerid_(local">peerid
        (local</b></a> |
        <a class="selflink" href="#remote)"><b class="Ic" title="Ic" id="remote)">remote)</b></a>
        <var class="Ar" title="Ar">type ...</var>;</dt>
      <dd class="It-tag">Specifies either the <b class="Ic" title="Ic">local</b>
          identity to be sent to a peer or the
          <b class="Ic" title="Ic">remote</b> identity to be compared with the
          value received from a peer during phase1 negotiations. The valid
          identity <var class="Ar" title="Ar">types</var> are as follows ...
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#address"><b class="Ic" title="Ic" id="address">address</b></a>
            <var class="Ar" title="Ar">[address]</var>;</dt>
          <dd class="It-tag">An IP Address. If the address value is omitted, the
              network address used during phase1 negotiations is used.</dd>
          <dt class="It-tag"><a class="selflink" href="#fqdn"><b class="Ic" title="Ic" id="fqdn">fqdn</b></a>
            <var class="Ar" title="Ar">quoted</var>;</dt>
          <dd class="It-tag">A Fully Qualified Domain Name string.</dd>
          <dt class="It-tag"><a class="selflink" href="#ufqdn"><b class="Ic" title="Ic" id="ufqdn">ufqdn</b></a>
            <var class="Ar" title="Ar">quoted</var>;</dt>
          <dd class="It-tag">A User Fully Qualified Domain Name string.</dd>
          <dt class="It-tag"><a class="selflink" href="#asn1dn"><b class="Ic" title="Ic" id="asn1dn">asn1dn</b></a>
            <var class="Ar" title="Ar">[quoted]</var>;</dt>
          <dd class="It-tag">An ASN.1 Distinguished Name string. If the quoted
              value is omitted, the daemon will aquire the DN from the subject
              field contained within the certificate.</dd>
        </dl>
      </dd>
      <dt class="It-tag"><a class="selflink" href="#authdata"><b class="Ic" title="Ic" id="authdata">authdata</b></a>
        <var class="Ar" title="Ar">type ...</var>;</dt>
      <dd class="It-tag">Specifies the authentication data to use during phase1
          negotiations. The valid authentication data
          <var class="Ar" title="Ar">types</var> are as follows ...
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#psk"><b class="Ic" title="Ic" id="psk">psk</b></a>
            <var class="Ar" title="Ar">quoted</var>;</dt>
          <dd class="It-tag">A Pre Shared Secret.</dd>
          <dt class="It-tag"><a class="selflink" href="#ca"><b class="Ic" title="Ic" id="ca">ca</b></a>
            <var class="Ar" title="Ar">quoted [quoted];</var></dt>
          <dd class="It-tag">A path to a OpenSSL PEM or PSK12 file that contains
              the Remote Certificate Autority. In the case where a PSK12 file is
              encrypted, the second quoted parameter specifies the file
              password.</dd>
          <dt class="It-tag"><a class="selflink" href="#cert"><b class="Ic" title="Ic" id="cert">cert</b></a>
            <var class="Ar" title="Ar">quoted [quoted];</var></dt>
          <dd class="It-tag">A path to a OpenSSL PEM or PSK12 file that contains
              the Local Public Certificate. In the case where a PSK12 file is
              encrypted, the second quoted parameter specifies the file
              password.</dd>
          <dt class="It-tag"><a class="selflink" href="#pkey"><b class="Ic" title="Ic" id="pkey">pkey</b></a>
            <var class="Ar" title="Ar">quoted [quoted];</var></dt>
          <dd class="It-tag">A path to a OpenSSL PEM or PSK12 file that contains
              the Local Private Key. In the case where a PSK12 file is
              encrypted, the second quoted parameter specifies the
            password.</dd>
        </dl>
      </dd>
      <dt class="It-tag"><a class="selflink" href="#life_check"><b class="Ic" title="Ic" id="life_check">life_check</b></a>
        <var class="Ar" title="Ar">level</var>;</dt>
      <dd class="It-tag">Specifies the behavior when validating peer lifetime
          proposal values. The default level is
          <b class="Ic" title="Ic">claim</b>. The valid levels are as follows
          ...
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#obey"><b class="Ic" title="Ic" id="obey">obey</b></a></dt>
          <dd class="It-tag">A responder will always use the initiators
            value.</dd>
          <dt class="It-tag"><a class="selflink" href="#strict"><b class="Ic" title="Ic" id="strict">strict</b></a></dt>
          <dd class="It-tag">A responder will use the initiators value if it is
              shorter than the responders. A responder will reject the proposal
              if the initiators value is greater than the responders.</dd>
          <dt class="It-tag"><a class="selflink" href="#claim"><b class="Ic" title="Ic" id="claim">claim</b></a></dt>
          <dd class="It-tag">A responder will use the initiators value if it is
              shorter than the responders. A responder will use its own value if
              it is shorter than the initiators. In the second case, the
              responder will send a RESPONDER-LIFETIME notification to the
              initiator when responding to phase2 proposals.</dd>
          <dt class="It-tag"><a class="selflink" href="#exact"><b class="Ic" title="Ic" id="exact">exact</b></a>;</dt>
          <dd class="It-tag">A responder will reject the proposal if the
              initiators value is not equal to the responders.</dd>
        </dl>
      </dd>
      <dt class="It-tag"><a class="selflink" href="#xauth_source_(local"><b class="Ic" title="Ic" id="xauth_source_(local">xauth_source
        (local</b></a> |
        <a class="selflink" href="#ldap)"><b class="Ic" title="Ic" id="ldap)">ldap)</b></a>
        <var class="Ar" title="Ar">[quoted]</var>;</dt>
      <dd class="It-tag">Sepcifies the Extended Authentication source to be used
          for user authentication post phase1 negotitations. The optional quoted
          value specifies a group name that can be used to restrict access to
          only users that are valid members of the group. If
          <b class="Ic" title="Ic">local</b> is used, the peer supplied
          credentials will be compared to the local account database. If
          <b class="Ic" title="Ic">ldap</b> is used, the peer supplied
          credentials will be compared to an LDAP account database. The LDAP
          source configuration is defined in the
          <b class="Ic" title="Ic">xauth_ldap</b> section. The default value for
          this parameter is <b class="Ic" title="Ic">local</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#xconf_source_local"><b class="Ic" title="Ic" id="xconf_source_local">xconf_source
        local</b></a> <b class="Ic" title="Ic">[(push</b> |
        <a class="selflink" href="#pull)];"><b class="Ic" title="Ic" id="pull)];">pull)];</b></a></dt>
      <dd class="It-tag">Sepcifies the Configuration Exchange source to be used
          when responding to peer configuration requests. If
          <b class="Ic" title="Ic">local</b> is used, the daemon will supply
          configuration information defined in the
          <b class="Ic" title="Ic">xconf_local</b> section. The default value
          for this parameter is <b class="Ic" title="Ic">local</b>.</dd>
      <dt class="It-tag"><a class="selflink" href="#plcy_mode_(disable"><b class="Ic" title="Ic" id="plcy_mode_(disable">plcy_mode
        (disable</b></a> |
        <a class="selflink" href="#config"><b class="Ic" title="Ic" id="config">config</b></a>
        |
        <a class="selflink" href="#compat)"><b class="Ic" title="Ic" id="compat)">compat)</b></a>;</dt>
      <dd class="It-tag">Specifies the policy generation mode. When
          <b class="Ic" title="Ic">disable</b> is used, no policy generation is
          performed. When <b class="Ic" title="Ic">config</b> mode is used,
          policy generation is performed during Configuration Exchange. This
          allows the daemon to generate polices using the peers private tunnel
          address. When <b class="Ic" title="Ic">compat</b> mode is used, policy
          generation is performed post phase1 negotiations. This allows the
          daemon to interoperate with peers that do not support Configuration
          Exchanges.</dd>
      <dt class="It-tag"><a class="selflink" href="#plcy_list_{"><b class="Ic" title="Ic" id="plcy_list_{">plcy_list
        {</b></a> <var class="Ar" title="Ar">statements</var>
        <b class="Ic" title="Ic">}</b></dt>
      <dd class="It-tag">Specifies a list of network groups and parameters that
          can be used to perform policy generation. If no
          <b class="Ic" title="Ic">plcy_list</b> is defined but
          <b class="Ic" title="Ic">plcy_mode</b> is set to
          <b class="Ic" title="Ic">config</b> or
          <b class="Ic" title="Ic">compat</b>, the daemon operates as if a
          single <b class="Ic" title="Ic">include</b> statement was used that
          specified a netmap defining all networks.
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#(include"><b class="Ic" title="Ic" id="(include">(include</b></a>
            |
            <a class="selflink" href="#exclude)"><b class="Ic" title="Ic" id="exclude)">exclude)</b></a>
            <var class="Ar" title="Ar">label [quoted]</var>;</dt>
          <dd class="It-tag">Specifies a <b class="Ic" title="Ic">netgroup</b>
              by label for use with policy generation. When
              <b class="Ic" title="Ic">include</b> is used, the daemon will
              generate appropriate IPsec policies and pass all
              <b class="Ic" title="Ic">netgroup</b> defined networks during the
              Configuration Exchange if requested. A peer would use this
              configuration information to selectively tunnel all traffic
              destined for any one of these networks. If
              <b class="Ic" title="Ic">exclude</b> is used, the daemon will
              generate appropriate discard policies and pass all
              <b class="Ic" title="Ic">netgroup</b> defined networks during the
              Configuration Exchange if requested. A peer would use this
              configuration information to selectively bypass IPsec processing
              for all traffic destined to any one of these networks. The
              optional quoted string specifies a group name that can be used to
              restrict processing of this netgroup to only users that are valid
              members of the group. If XAuth is not performed, statements that
              define a group name are skipped.</dd>
        </dl>
      </dd>
      <dt class="It-tag"><a class="selflink" href="#proposal"><b class="Ic" title="Ic" id="proposal">proposal</b></a>
        <var class="Ar" title="Ar">type { statements }</var></dt>
      <dd class="It-tag">Specifies a proposal to be used during SA negotiations
          with a peer. The valid proposal types are as follows ...
        <div class="Pp"></div>
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#isakmp"><b class="Ic" title="Ic" id="isakmp">isakmp</b></a></dt>
          <dd class="It-tag">An ISAKMP proposal supports the following ...
            <dl class="Bl-tag Bl-compact">
              <dt class="It-tag"><a class="selflink" href="#auth"><b class="Ic" title="Ic" id="auth">auth</b></a>
                <var class="Ar" title="Ar">type</var>;</dt>
              <dd class="It-tag">Define the authentication mechanism for the
                  ISAKMP proposal. The accepted types are
                  <b class="Ic" title="Ic">hybrid_xauth_rsa</b>,
                  <b class="Ic" title="Ic">mutual_xauth_rsa</b>,
                  <b class="Ic" title="Ic">mutual_xauth_psk</b>,
                  <b class="Ic" title="Ic">mutual_rsa</b> and
                  <b class="Ic" title="Ic">mutual_psk</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#ciph"><b class="Ic" title="Ic" id="ciph">ciph</b></a>
                <var class="Ar" title="Ar">type [number]</var>;</dt>
              <dd class="It-tag">Define the cipher algorithm for this proposal.
                  The optional number specifies the keylength for algorithms
                  that support it. The accepted types are
                  <b class="Ic" title="Ic">aes</b>,
                  <b class="Ic" title="Ic">blowfish</b>,
                  <b class="Ic" title="Ic">3des</b>,
                  <b class="Ic" title="Ic">cast</b> and
                  <b class="Ic" title="Ic">des</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#hash"><b class="Ic" title="Ic" id="hash">hash</b></a>
                <var class="Ar" title="Ar">type</var>;</dt>
              <dd class="It-tag">Define the hash algorithm for this proposal.
                  The accepted types are <b class="Ic" title="Ic">md5</b> and
                  <b class="Ic" title="Ic">sha1</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#dhgr"><b class="Ic" title="Ic" id="dhgr">dhgr</b></a>
                <var class="Ar" title="Ar">number</var>;</dt>
              <dd class="It-tag">Define the DH group for this proposal. The
                  accepted values are <b class="Ic" title="Ic">1</b>,
                  <b class="Ic" title="Ic">2</b>,
                  <b class="Ic" title="Ic">5</b>,
                  <b class="Ic" title="Ic">14</b>, <b class="Ic" title="Ic">15,
                  16, 17, 18</b> and <b class="Ic" title="Ic">16</b>.</dd>
            </dl>
            <div class="Pp"></div>
          </dd>
          <dt class="It-tag"><a class="selflink" href="#ah"><b class="Ic" title="Ic" id="ah">ah</b></a></dt>
          <dd class="It-tag">An AH proposal supports the following ...
            <dl class="Bl-tag Bl-compact">
              <dt class="It-tag"><a class="selflink" href="#hash"><b class="Ic" title="Ic" id="hash">hash</b></a>
                <var class="Ar" title="Ar">type</var>;</dt>
              <dd class="It-tag">Define the hash algorithm for this proposal.
                  The accepted types are <b class="Ic" title="Ic">md5</b> and
                  <b class="Ic" title="Ic">sha1</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#dhgr"><b class="Ic" title="Ic" id="dhgr">dhgr</b></a>
                <var class="Ar" title="Ar">number</var>;</dt>
              <dd class="It-tag">Define the DH group for this proposal. The
                  accepted values are <b class="Ic" title="Ic">1</b>,
                  <b class="Ic" title="Ic">2</b>,
                  <b class="Ic" title="Ic">5</b>,
                  <b class="Ic" title="Ic">14</b>, <b class="Ic" title="Ic">15,
                  16, 17, 18</b> and <b class="Ic" title="Ic">16</b>.</dd>
            </dl>
            <div class="Pp"></div>
          </dd>
          <dt class="It-tag"><a class="selflink" href="#esp"><b class="Ic" title="Ic" id="esp">esp</b></a></dt>
          <dd class="It-tag">An ESP proposal supports the following ...
            <dl class="Bl-tag Bl-compact">
              <dt class="It-tag"><a class="selflink" href="#ciph"><b class="Ic" title="Ic" id="ciph">ciph</b></a>
                <var class="Ar" title="Ar">type [number]</var>;</dt>
              <dd class="It-tag">Define the cipher algorithm for this proposal.
                  The optional number specifies the keylength for algorithms
                  that support it. The accepted types are
                  <b class="Ic" title="Ic">aes</b>,
                  <b class="Ic" title="Ic">blowfish</b>,
                  <b class="Ic" title="Ic">3des</b>,
                  <b class="Ic" title="Ic">cast</b> and
                  <b class="Ic" title="Ic">des</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#hmac"><b class="Ic" title="Ic" id="hmac">hmac</b></a>
                <var class="Ar" title="Ar">type</var>;</dt>
              <dd class="It-tag">Define the message authentication algorithm for
                  this proposal. The accepted types are
                  <b class="Ic" title="Ic">md5</b> and
                  <b class="Ic" title="Ic">sha1</b>.</dd>
              <dt class="It-tag"><a class="selflink" href="#dhgr"><b class="Ic" title="Ic" id="dhgr">dhgr</b></a>
                <var class="Ar" title="Ar">number</var>;</dt>
              <dd class="It-tag">Define the DH group for this proposal. The
                  accepted values are <b class="Ic" title="Ic">1</b>,
                  <b class="Ic" title="Ic">2</b>,
                  <b class="Ic" title="Ic">5</b>,
                  <b class="Ic" title="Ic">14</b>, <b class="Ic" title="Ic">15,
                  16, 17, 18</b> and <b class="Ic" title="Ic">16</b>.</dd>
            </dl>
            <div class="Pp"></div>
          </dd>
          <dt class="It-tag"><a class="selflink" href="#ipcomp"><b class="Ic" title="Ic" id="ipcomp">ipcomp</b></a></dt>
          <dd class="It-tag">An IPCOMP proposal supports the following ...
            <dl class="Bl-tag Bl-compact">
              <dt class="It-tag"><a class="selflink" href="#comp"><b class="Ic" title="Ic" id="comp">comp</b></a>
                <var class="Ar" title="Ar">type</var>;</dt>
              <dd class="It-tag">Define the compression algorithm for this
                  proposal. The accepted types are
                  <b class="Ic" title="Ic">deflate</b> and
                  <b class="Ic" title="Ic">lzs</b>.</dd>
            </dl>
          </dd>
        </dl>
        <div class="Pp"></div>
        All proposals types support the following ...
        <div class="Pp"></div>
        <dl class="Bl-tag Bl-compact">
          <dt class="It-tag"><a class="selflink" href="#life_sec"><b class="Ic" title="Ic" id="life_sec">life_sec</b></a>
            <var class="Ar" title="Ar">number</var>;</dt>
          <dd class="It-tag">Define the lifetime in seconds for this
            proposal.</dd>
          <dt class="It-tag"><a class="selflink" href="#life_kbs"><b class="Ic" title="Ic" id="life_kbs">life_kbs</b></a>
            <var class="Ar" title="Ar">number</var>;</dt>
          <dd class="It-tag">Define the lifetime in kilobytes for this
            proposal.</dd>
        </dl>
      </dd>
    </dl>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
This section contains a few iked configuration examples.
<div class="Pp"></div>
The first example shows a configuration that only defines the parameters
  required to support client connectivity mode with NATT and debug options
  enabled.
<div class="Pp"></div>
<div class="Bd" style="margin-left: 0.00ex;">
<pre class="Li">
daemon 
{ 
    socket ike 500; 
    socket natt 4500; 
 
    log_level debug; 
    log_file &quot;/var/log/iked.log&quot;; 
 
    pcap_decrypt &quot;/var/log/ike-decrypt.pcap&quot;; 
    pcap_encrypt &quot;/var/log/ike-encrypt.pcap&quot;; 
 
    retry_delay 10; 
    retry_count 2; 
}
</pre>
</div>
<div class="Pp"></div>
The second example shows a configuration that supports simple peer to peer
  negotiations using mutual preshared key authentication.
<div class="Pp"></div>
<div class="Bd" style="margin-left: 0.00ex;">
<pre class="Li">
daemon 
{ 
    socket ike 500; 
 
    log_level debug; 
    log_file &quot;/var/log/iked.log&quot;; 
} 
 
peer 1.2.3.4 
{ 
    exchange main; 
 
    peerid local address; 
    peerid remote address; 
 
    authdata psk &quot;sharedsecret&quot;; 
 
    life_check claim; 
 
    proposal isakmp 
    { 
        auth mutual_psk; 
        life_sec 28800; 
        life_kbs 0; 
    } 
 
    proposal esp 
    { 
        life_sec 3800; 
        life_kbs 0; 
    } 
}
</pre>
</div>
<div class="Pp"></div>
The third example shows a configuration that supports client gateway
  negotiations using mutual preshared key authentication with xauth, nat
  traversal, dead peer detection, ike fragmentation and policy generation. The
  daemon would allow xauth users that are members of the &quot;remote&quot;
  group to connect to the gateway. Policies would be generated to allow a peer
  access to the 10.1.1.0/24 and 1.3.3.0/24 networks with the exception of
  1.1.1.15/32 which be accessed directly ( not via IPsec ). Peers that use an
  xauth user account that is a member of the &quot;netadmin&quot; group would
  have additional policies generated to allow access to the 10.4.4.0/24 network.
<div class="Pp"></div>
<div class="Bd" style="margin-left: 0.00ex;">
<pre class="Li">
daemon 
{ 
    socket ike 500; 
    socket natt 4500; 
 
    log_level debug; 
    log_file &quot;/var/log/iked.log&quot;; 
 
    pcap_decrypt &quot;/var/log/ike-decrypt.pcap&quot;; 
    pcap_encrypt &quot;/var/log/ike-encrypt.pcap&quot;; 
} 
 
netgroup allow 
{ 
    10.1.1.0/24; 
    10.3.3.0/24; 
} 
 
netgroup deny 
{ 
    1.1.1.15/32; 
} 
 
netgroup protect 
{ 
    10.4.4.0/24; 
} 
 
xconf_local 
{ 
    network4 10.2.1.0/24; 
    dnss4 10.1.1.1; 
    nbns4 10.1.1.1; 
    dns_suffix &quot;foo.com&quot;; 
    dns_list &quot;foo.com&quot; &quot;bar.com&quot;; 
    banner &quot;/etc/iked.motd&quot;; 
    pfs_group 2; 
} 
 
peer 0.0.0.0 
{ 
    contact responder; 
    exchange main; 
 
    natt_mode enable; 
    dpd_mode enable; 
    frag_ike_mode enable; 
 
    peerid local address; 
    peerid remote address; 
 
    authdata psk &quot;sharedsecret&quot;; 
 
    life_check claim; 
 
    xauth_source local &quot;remote&quot;; 
    xconf_source local; 
 
    plcy_mode config; 
    plcy_list 
    { 
        include allow; 
        exclude deny; 
        include protect &quot;netadmin&quot;; 
    } 
 
    proposal isakmp 
    { 
        auth mutual_xauth_psk; 
        ciph 3des; 
        hash md5; 
        dhgr 2; 
        life_sec 28800; 
        life_kbs 0; 
    } 
 
    proposal esp 
    { 
        life_sec 3800; 
        life_kbs 0; 
    } 
}
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">ipsec(4)</a>, <a class="Xr" title="Xr">iked(8)</a>,
  <a class="Xr" title="Xr">setkey(8)</a>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
The <b class="Nm" title="Nm">iked.conf</b> parser was written by Matthew Grooms
  ( mgrooms@shrew.net ) as part of the Shrew Soft ( http://www.shrew.net )
  family of IPsec products.</div>
<table class="foot">
  <tr>
    <td class="foot-date">Febuary 2, 2007</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
