<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:37 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SDPARM(8) SDPARM SDPARM(8)</p>

<p style="margin-top: 1em">NAME <br>
sdparm - access SCSI modes pages; read VPD pages; send
simple SCSI commands.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sdparm [--all] [--clear=STR] [--command=CMD] [--dbd]
[--defaults] [--dummy] [--flexible] [--get=STR] [--help]
[--hex] [--inquiry] [--long] [--num-desc] [--page=PG[,SPG]]
<br>
[--quiet] [--readonly] [--save] [--set=STR] [--six]
[--transport=TN] [--vendor=VN] [--verbose] [--version]
DEVICE [DEVICE...]</p>

<p style="margin-top: 1em">sdparm --enumerate [--all]
[--inquiry] [--long] [--page=PG[,SPG]] [--transport=TN]
[--vendor=VN]</p>

<p style="margin-top: 1em">sdparm --wscan [--verbose]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility fetches and potentially changes SCSI device
(e.g. disk) mode pages. Inquiry data including Vital Product
Data (VPD) pages can also be displayed. Commands associated
<br>
with starting and stopping the medium; loading and unloading
the medium; and other housekeeping function may also be
issued by this utility.</p>

<p style="margin-top: 1em">Of the three invocations shown
in the synopsis, the first is the most general. The second
variant that uses --enumerate is for dumping information
held in sdparm&rsquo;s internal <br>
tables. The last variant is for Windows only and lists the
available device names; see the OPTIONS entry for
--wscan.</p>

<p style="margin-top: 1em">If no options (other than
DEVICE) are given then a selection of common mode page
fields for that device are listed. If the --long option is
also given then a description of the <br>
fields is placed on the right of each line. If the --all
option is given then all known mode page fields for that
device are listed. Individual fields can be displayed with
the <br>
--get=STR option (e.g. &rsquo;--get=WCE&rsquo; to fetch the
state of the Writeback Cache Enable field).</p>

<p style="margin-top: 1em">This utility completes with an
exit status of 0 when successful. For other values see the
EXIT STATUS section below.</p>

<p style="margin-top: 1em">One or more DEVICE arguments can
be given. The utility will essentially apply the given
options to each DEVICE in the list. If an error is detected,
it is noted and the utility <br>
continues. Error value 5 (file open or close problem) is
treated as lower priority when other errors are detected.
The exit status is the most recently detected error value
<br>
(excluding error value 5 if other errors have been
detected). If all actions succeed the exit status is
zero.</p>

<p style="margin-top: 1em">By default this utility shows
mode pages that are common to all transport protocols. These
are termed as &quot;generic&quot; mode pages. If there is no
match on a generic mode page name <br>
or field then those pages specific to the SAS transport are
checked. Transport protocol specific mode pages are selected
with the --transport=TN option. See the TRANSPORT sec&acirc;
<br>
tion below. Vendor specific mode pages are selected with the
--vendor=VN option. See the VENDORS section below.</p>

<p style="margin-top: 1em">Although originally for SCSI
disks (or storage devices that appear to the OS as SCSI
disks) many of the mode pages are for other SCSI device
types. These include CD/DVD players <br>
that use the ATAPI (or any other) transport, SCSI tapes
drives and SCSI enclosures.</p>

<p style="margin-top: 1em">When the --inquiry option is
given without a page number then the Device Identification
VPD page (page number 0x83) is requested and if found it is
decoded and output. If no page <br>
number is given and the --all option is given then a list of
VPD page names (but not their contents) supported by the
DEVICE is output. When both the --inquiry and --page=PG <br>
options are given then the VPD page can be specified as an
abbreviation (e.g. &quot;sp&quot; for the SCSI ports VPD
page) or numerically (e.g. &quot;0x88&quot;). If a VPD page
is returned by the <br>
DEVICE but sdparm cannot decode it or the --hex option is
given then it is output in hex.</p>

<p style="margin-top: 1em">OPTIONS <br>
Mandatory arguments to long options are mandatory for short
options as well. If an option takes a numeric argument then
that argument is assumed to be decimal unless otherwise <br>
indicated (e.g. with a leading &quot;0x&quot; or a trailing
&quot;h&quot;). The options are in alphabetical order, based
on the long option name.</p>

<p style="margin-top: 1em">-a, --all <br>
output all recognized fields for the device type (e.g. disk)
of the DEVICE. Without this option (or the --page=PG[,SPG]
option) the default action is to output a rela&acirc; <br>
tively small number of commonly used fields from different
pages. When a specific (mode) page number is given with the
--page=PG[,SPG] option then all the fields of that <br>
page are output (irrespective of the setting of this
option). For this option&rsquo;s action when used with the
--enumerate option see the ENUMERATE section below.</p>

<p style="margin-top: 1em">-c, --clear=STR <br>
In its simplest form STR contains a field acronym_name or a
field numerical descriptor. In the absence of an explicit
value argument (e.g. &rsquo;--clear=WCE=1&rsquo;), the field
has <br>
its value cleared to zero. See the PARAMETERS section
below.</p>

<p style="margin-top: 1em">-C, --command=CMD <br>
Perform given CMD. See section below on COMMANDS. To
enumerate supported commands use &rsquo;-e -C x&rsquo;
(using any CMD name, valid or otherwise).</p>

<p style="margin-top: 1em">-B, --dbd <br>
disable block descriptors. This is a bit in MODE SENSE cdbs
that rarely needs to be set. One known case is a MODE SENSE
6 issued to a Reduced Block Commands (RBC) device <br>
where the RBC standard says it shall be set.</p>

<p style="margin-top: 1em">-D, --defaults <br>
sets the given mode page to its default values. Requires the
--page=PG[,SPG] option to be given to specify the mode page.
To make the default mode page values also the <br>
saved mode page values, use the --save option as well.</p>

<p style="margin-top: 1em">-d, --dummy <br>
when set inhibits changes being placed in the DEVICE&rsquo;s
mode page. Instead the mode data that would have been sent
to a MODE SELECT command, is output in ASCII hex to the <br>
console. This option is mainly for testing.</p>

<p style="margin-top: 1em">-e, --enumerate <br>
lists out descriptive information about the pages and fields
known to this utility. Ignores the DEVICE argument and other
options apart from the --all, --inquiry, --long, <br>
--page=PG[,SPG], --transport=TN and --vendor=VN. If
--enumerate is given without other options then the known
(generic) mode pages are listed. See the ENUMERATE section
<br>
below.</p>

<p style="margin-top: 1em">-f, --flexible <br>
Some devices, bridges and/or drivers attempt crude
transformations between mode sense 6 and 10 byte commands
without correctly rebuilding the response. This will cause
<br>
the response to be mis-interpreted (usually with an error
saying the response is malformed). With this option, the
length of the response is checked, and if it looks <br>
wrong, various corrections are attempted. This option will
also allow mode pages that don&rsquo;t belong to the current
device&rsquo;s peripheral type to be listed.</p>

<p style="margin-top: 1em">-g, --get=STR <br>
In its simplest form STR contains a field acronym_name or a
field numerical descriptor. The field is fetched from mode
page. See the PARAMETERS section below. The --long <br>
and --hex options effect the output format. Also if a value
of &quot;1&quot; is given (e.g. &rsquo;--get=WCE=1&rsquo;)
only the current value is output (i.e. not the change mask,
the default <br>
value and the saved value).</p>

<p style="margin-top: 1em">-h, --help <br>
output the usage message then exit.</p>

<p style="margin-top: 1em">-H, --hex <br>
rather than trying to decode mode (or VPD) pages, print them
out in hex. When used with the --get=STR option the
corresponding current, changeable, default and saved
val&acirc; <br>
ues are output in hex, prefixed by &quot;0x&quot; and space
separated. If a value of &quot;1&quot; is given with the
--get=STR option (e.g. &rsquo;--get=WCE=1&rsquo;) then only
the current value is out&acirc; <br>
put in hex, prefixed by &quot;0x&quot;. If a value of
&quot;2&quot; is given with the --get=STR option then only
the current value is output as a (signed) integer. This
option can be used <br>
multiple times (e.g. &rsquo;-HH&rsquo;). Useful with the ATA
Information VPD page which usually outputs its IDENTIFY
(PACKET) DEVICE response in 16 bit hex words; with
&rsquo;-HH&rsquo; outputs <br>
that response in hex bytes; with &rsquo;-HHH&rsquo; outputs
the same response in a format suitable for &rsquo;hdparm
--Istdin&rsquo; to decode.</p>

<p style="margin-top: 1em">-i, --inquiry <br>
output INQUIRY VPD pages. In the absence of this option the
default action is to output mode pages. If the --inquiry
option is given without the --page=PG[,SPG] option <br>
then the device identification VPD page (0x83) is decoded
and output. If this option and the --all option are given
then the supported VPD pages page (0x0) is decoded and <br>
output.</p>

<p style="margin-top: 1em">-l, --long <br>
output extra information. In the case of mode page fields a
description (with units if applicable) is output to the
right. If used twice, then for some fields more infor&acirc;
<br>
mation about its values is given on one or more following
lines, each prefixed by a tab character. For usage with
--enumerate see the ENUMERATE section below.</p>

<p style="margin-top: 1em">-n, --num-desc <br>
for a mode page that can have descriptors, the number of
descriptors for the given page on the DEVICE is output.
Otherwise 0 is output.</p>

<p style="margin-top: 1em">-p, --page=PG[,SPG] <br>
supply the page number (PG) and optionally the sub page
number (SPG) of the mode (or VPD) page to fetch. These
numbers are interpreted as decimal unless prefixed with
&quot;0x&quot; <br>
or a trailing. Sub page numbers are only valid for mode
pages (not VPD pages). Alternatively an abbreviation for a
page can be given (see next entry).</p>

<p style="margin-top: 1em">-p, --page=STR <br>
a two or three letter abbreviation for a page can be given.
Known mode page abbreviations are checked first followed by
known VPD page abbreviations. For example <br>
&rsquo;--page=ca&rsquo; matches the caching mode page. If no
match is found then an error is issued and a list of
possibilities in the current context is given (so &rsquo;-p
x&rsquo; can be quite <br>
useful). If the STR matches a known VPD page abbreviation
then the --inquiry option is assumed. For usage with
--enumerate see the ENUMERATE section below.</p>

<p style="margin-top: 1em">-q, --quiet <br>
suppress output of device name followed by the vendor,
product and revision strings fetched from an INQUIRY
response. Without this option such a line is typically the
<br>
first line output by sdparm. Reduces output from the device
identification VPD page, typically to one line (or none) for
each of di_lu, di_port, di_target and di_asis.</p>

<p style="margin-top: 1em">-r, --readonly <br>
override other logic to open DEVICE in read-only mode. The
default setting of the open read-only/read-write mode
depends on the operation requested (e.g. a --set=STR
oper&acirc; <br>
ation by default will try a read-write mode open on DEVICE).
This option may be useful if a command is being sent to an
ATA disk via a SCSI command set. For example in <br>
Linux &rsquo;-C stop&rsquo; may require this option to stop
an ATA disk being restarted immediately.</p>

<p style="margin-top: 1em">-S, --save <br>
when a mode page is being modified (by using the --clear=STR
and/or --set=STR options) then the default action is to
modify only the current values mode page. When this <br>
option is given then the corresponding value(s) in the saved
values mode page is also changed. The next time the device
is power cycled (or reset) the saved values mode <br>
page becomes (i.e. is copied to) the current values mode
page. See NOTES section below.</p>

<p style="margin-top: 1em">-s, --set=STR <br>
in its simplest form STR contains a field acronym_name or a
field numerical descriptor. In the absence of an explicit
value, each acronym_name has its value set to (all) <br>
ones. This means a 16 bit field will be set to 0xffff which
is 65535 in decimal. Alternatively each acronym_name or
numerical descriptor may be followed by
&quot;=&lt;n&gt;&quot; where <br>
&lt;n&gt; is the value to set that field to. See the
PARAMETERS section below.</p>

<p style="margin-top: 1em">-6, --six <br>
The default action of this utility is to issue MODE SENSE
and MODE SELECT SCSI commands with 10 byte cdbs. When this
option is given the 6 byte cdb variants are used. RBC <br>
and old SCSI devices may need this option. This utility
outputs a suggestion to use this option if the SCSI status
indicates that the 10 byte cdb variant is not supported.</p>

<p style="margin-top: 1em">-t, --transport=TN <br>
Specifies the transport protocol where TN is either a number
in the range 0 to 15 (inclusive) or an abbreviation (e.g.
&quot;fcp&quot; for the Fibre Channel Protocol). One way to
<br>
list available transport protocols numbers and their
associated abbreviations is to give an invalid transport
protocol number such as &rsquo;-t x&rsquo;; another way is
&rsquo;-e -l&rsquo;.</p>

<p style="margin-top: 1em">-M, --vendor=VN <br>
Specifies the vendor (i.e. manufacturer) where VN is either
a number (0 or more) or an abbreviation (e.g.
&quot;sea&quot; for Seagate disk vendor specific). One way
to list avail&acirc; <br>
able vendor numbers and their associated abbreviations is to
give an invalid vendor number such as &rsquo;-M x&rsquo;;
another way is &rsquo;-e -l&rsquo;.</p>

<p style="margin-top: 1em">-v, --verbose <br>
increase the level of verbosity, (i.e. debug output). In
some cases more decoding is done (e.g. fields within a
standard INQUIRY response).</p>

<p style="margin-top: 1em">-V, --version <br>
print the version string and then exit.</p>

<p style="margin-top: 1em">-w, --wscan <br>
this option is available in Windows only. It lists storage
device names and the corresponding volumes, if any. When
used twice it adds the &quot;bus type&quot; of the closest
trans&acirc; <br>
port (e.g. a SATA disk in a USB connected enclosure has bus
type Usb). When used three times a SCSI adapter scan is
added. When used four times only a SCSI adapter scan is <br>
shown. See examples below and the &quot;Win32 port&quot;
section in the README file.</p>

<p style="margin-top: 1em">NOTES <br>
The reference document used for interpreting mode and VPD
pages (and the INQUIRY standard response) is T10/1713-D
Revision 36e (SPC-4, 24 August 2012) found at
http://www.t10.org <br>
. Obsolete and reserved items in the standard INQUIRY
response output are displayed in brackets.</p>

<p style="margin-top: 1em">A mode page for which no
abbreviation is known (e.g. a vendor specific mode page) can
be listed in hexadecimal by using the option combination
&rsquo;--page=PG --hex&rsquo;.</p>

<p style="margin-top: 1em">Numbers input to sdparm (e.g. in
the command line arguments) are assumed to be in decimal
unless there is a hexadecimal indicator. A hexadecimal
indicator is either a leading <br>
&rsquo;0x&rsquo; or &rsquo;0X&rsquo; (i.e. the C language
convention) or a trailing &rsquo;h&rsquo; or &rsquo;H&rsquo;
(i.e. the convention used at www.t10.org ). In the case of
--page= either a string or number is expected, <br>
so hex numbers like &rsquo;ch&rsquo; (12) should be prefixed
by a zero (e.g. &rsquo;0ch&rsquo;).</p>

<p style="margin-top: 1em">The SPC-4 draft (rev 2) says
that devices that implement no distinction between current
and saved pages can return an error (ILLEGAL REQUEST,
invalid field in cdb) if the SP bit <br>
(which corresponds to the --save option) is _not_ set. In
such cases the --save option needs to be given.</p>

<p style="margin-top: 1em">If the --save option is given
but the existing mode page indicates (via its PS bit) that
the page is not savable, then this utility generates an
error message. That message sug&acirc; <br>
gests to try again without the --save option.</p>

<p style="margin-top: 1em">Since the device identification
VPD page (acronym_name &quot;di&quot;) potentially contains
a lot of diverse designators, several associated acronyms
are available. They are &quot;di_lu&quot; for <br>
designators associated with the addressed logical unit,
&quot;di_port&quot; for designators associated with the
target port (which the command arrived via) and
&quot;di_target&quot; for designators <br>
associated with the target device. When &quot;di&quot; is
used designators are grouped by lu, then port and then
target device. To see all designators decoded in the order
that they <br>
appear in the VPD page use &quot;di_asis&quot;.</p>

<p style="margin-top: 1em">Only those VPD pages defined by
t10.org are decoded by this utility. SPC-4 sets aside VPD
pages codes from 0xc0 to 0xff (inclusive) for vendor
specific pages some of which are <br>
decoded in the sg_vpd utility.</p>

<p style="margin-top: 1em">In the linux kernel 2.6 series
any device node that understands a SCSI command set (e.g.
SCSI disks and CD/DVD drives) may be specified. More
precisely the driver that &quot;owns&quot; the <br>
device node must support the SG_IO ioctl. In the lk 2.4
series only SCSI generic (sg) device nodes support the SG_IO
ioctl. However in the lk 2.4 series other SCSI device nodes
<br>
are mapped within this utility to their corresponding sg
device nodes. So if there is a SCSI disk at /dev/sda then
&rsquo;sdparm /dev/sda&rsquo; will work in both the lk 2.6
and lk 2.4 <br>
series. However if there is an ATAPI cd/dvd drive at
/dev/hdc then &rsquo;sdparm /dev/hdc&rsquo; will only work
in the lk 2.6 series.</p>

<p style="margin-top: 1em">In the Linux 2.6 series,
especially with ATA disks, using sdparm to stop (spin down)
a disk may not be sufficient and other mechanisms will start
the disk again some time later. <br>
The user might additionally mark the disk as
&quot;offline&quot; with &rsquo;echo offline &gt;
/sys/block/sda/device/state&rsquo; where sda is the block
name of the disk. To restart the disk &quot;offline&quot;
<br>
can be replaced with &quot;running&quot;.</p>

<p style="margin-top: 1em">PARAMETERS <br>
In their simplest form the --clear=, --get= and --set=
options (or their short forms) take an acronym_name such as
&quot;WCE&quot;. In the case of &rsquo;--get=WCE&rsquo; the
value of &quot;Writeback Cache <br>
Enable&quot; in the caching mode page will be fetched. In
the case of &rsquo;--set=WCE&rsquo; that bit will be set (to
one). In the case of &rsquo;--clear=WCE&rsquo; that bit will
be cleared (to zero). When <br>
an acronym_name is given then the mode page is imputed from
that acronym_name (e.g. WCE is in the caching mode
page).</p>

<p style="margin-top: 1em">Instead of an acronym_name a
field within a mode page can be described numerically with a
&lt;start_byte&gt;:&lt;start_bit&gt;:&lt;num_bits&gt; tuple.
These are the &lt;start_byte&gt; (origin 0) within <br>
the mode page, a &lt;start_bit&gt; (0 to 7 inclusive) and
&lt;num_bits&gt; (1 to 64 inclusive). For example, the low
level representation of the RCD bit (the &quot;Read Cache
Disable bit in the <br>
caching mode page) is &quot;2:0:1&quot;. The
&lt;start_byte&gt; can optionally be given in hex (e.g.
&rsquo;--set=0x2:0:1&rsquo; or &rsquo;--set=2h:0:1&rsquo;).
With this form the --page= option is required to
estab&acirc; <br>
lish which mode page is to be used.</p>

<p style="margin-top: 1em">Either form can optionally be
followed by &quot;=&lt;val&gt;&quot;. By default &lt;val&gt;
is decimal but can be given in hex in the normal fashion.
Here are some examples: &rsquo;--set=2h:0:1=1h&rsquo; and
&rsquo;-s <br>
MRIE=0x3&rsquo;. When the acronym_name or numeric form
following --clear= is not given an explicit
&rsquo;=&lt;val&gt;&rsquo; then the value defaults to zero.
When the acronym_name or numeric form fol&acirc; <br>
lowing --set= is not given an explicit
&rsquo;=&lt;val&gt;&rsquo; then the value defaults to
&quot;all ones&quot; (i.e. as many as &lt;num_bits&gt;
permits). For example &rsquo;--clear=WCE&rsquo; and
&rsquo;--clear=WCE=0&rsquo; have the <br>
same meaning: clear Writeback Cache Enable or, put more
simply: turn off the writeback cache.</p>

<p style="margin-top: 1em">Multiple fields within the same
mode page can be changed by giving a comma separated list of
acronym_names and/or the numerical form. For example:
&rsquo;--set=TEST,MRIE=6&rsquo;.</p>

<p style="margin-top: 1em">Some mode page have multiple
descriptors. They typically have a fixed header section at
the start of the mode page that includes a field containing
the number of descriptors that <br>
follow. Following the header is a variable number of
descriptors. An example is the SAS Phy Control and Discover
mode page. An acronym_name may include a trailing
&rsquo;.&lt;num&gt;&rsquo; where <br>
&quot;&lt;num&gt;&quot; is a descriptor number (origin 0).
For example &rsquo;-t sas -g PHID.0&rsquo; and &rsquo;-t sas
-g PHID&rsquo; will yield the phy identifier of the first
descriptor of the above mode page; &rsquo;-t <br>
sas -g PHID.1&rsquo; will yield the phy identifier of the
second descriptor.</p>

<p style="margin-top: 1em">ENUMERATE <br>
The --enumerate option essentially dumps out static
information held by this utility. A list of --enumerate
variants and their actions follows. For brevity subsequent
examples of <br>
options are shown in their shorter form.</p>

<p style="margin-top: 1em">--enumerate list generic mode
page information <br>
-e --all list generic mode page contents <br>
(i.e. parameters) <br>
-e --page=rw list contents of read write error <br>
recovery mode page <br>
-e --inquiry list VPD pages this utility can decode <br>
-e --long list generic mode pages, transport <br>
protocols, mode pages for each <br>
supported transport protocol and <br>
supported commands <br>
-e -l --all additionally list the contents of <br>
each mode page <br>
-e --transport=fcp list mode pages for the fcp <br>
transport protocol <br>
-e -t fcp --all additionally list the contents of <br>
each mode page <br>
-e --vendor=sea list vendor specific mode pages for <br>
&quot;sea&quot; (Seagate) <br>
-e -M sea --all additionally list the contents of vendor
<br>
specific mode pages for &quot;sea&quot; (Seagate) <br>
-e -p pcd -l list contents of SAS phy control and <br>
discovery mode page plus (due to &quot;-l&quot;) <br>
some descfriptor format information</p>

<p style="margin-top: 1em">When known mode pages are listed
(via the --enumerate option) each line starts with a two or
three letter abbreviation. This is followed by the page
number (in hex prefixed by <br>
&quot;0x&quot;) optionally followed by a comma and the
subpage number. Finally the descriptive name of the mode
page (e.g. as found in SPC-4) is output.</p>

<p style="margin-top: 1em">When known parameters (fields)
of a mode page are listed, each line starts with an acronym
(indented a few spaces). This will match (or be an acronym
for) the description for <br>
that field found in the (draft) standards. Next are three
numbers, separated by colons, surrounded by brackets. These
are the start byte (in hex, prefixed by &quot;0x&quot;) of
the begin&acirc; <br>
ning of the field within the mode page; the starting bit (0
through 7 inclusive) and then the number of bits. The
descriptive name of the parameter (field) is then given. If
<br>
appropriate the descriptive name includes units (e.g.
&quot;(ms)&quot; means the units are milliseconds). Adding
the &rsquo;-ll&rsquo; option will list information about
possible field values for <br>
selected mode page parameters.</p>

<p style="margin-top: 1em">Mode parameters for which the
num_bits is greater than 1 can be viewed as unsigned
integers. Often 16 and 32 bit fields are set to 0xffff and
0xffffffff respectively (all ones) <br>
which usually has a special meaning (see drafts). This
utility outputs such values as &quot;-1&quot; to save space
(rather than their unsigned integer equivalents).
&quot;-1&quot; can also be given <br>
as the value to a mode page field acronym (e.g.
&rsquo;--set=INTT=-1&rsquo; sets the interval timer field in
the Informational Exceptions control mode page to
0xffffffff).</p>

<p style="margin-top: 1em">TRANSPORTS <br>
SCSI transport protocols are a relatively specialized area
that can be safely ignored by the majority of users.</p>

<p style="margin-top: 1em">Some transport protocols have
protocol specific mode pages. These are usually the
disconnect-reconnect (0x2), the protocol specific logical
unit (0x18) and the protocol specific <br>
port (0x19) mode pages. In some cases the latter mode page
has several subpages. The most common transport protocol
abbreviations likely to be used are &quot;fcp&quot;,
&quot;spi&quot; and &quot;sas&quot;.</p>

<p style="margin-top: 1em">Many of the field names are
re-used in the same position so the acronym_name namespaces
have been divided between generic mode pages (i.e. when the
--transport= option is _not_ <br>
given) and a namespace for each transport protocol. A LUPID
field from the protocol specific logical unit (0x18) mode
page and the PPID field from protocol specific port (0x19)
<br>
mode page are included in the generic modes pages; this is
so the respective (transport) protocol identifiers can be
seen. In most cases the user will know what the
&quot;port&quot; trans&acirc; <br>
port is (i.e. the same transport as the HBA in the computer)
but the logical unit&rsquo;s transport could be
different.</p>

<p style="margin-top: 1em">VENDORS <br>
SCSI leaves a lot of space for vendor specific information.
Often this is described in product manuals. The --vendor=VN
(or -M=VN) option allows known vendor specific mode pages
<br>
to be examined and/or modified by acronym.</p>

<p style="margin-top: 1em">In this utility the syntax and
semantics of vendor specific mode pages is very similar to
those of transport protocol specific mode pages. Both cannot
be specified together. Ven&acirc; <br>
dor specific modes pages can still be accessed numerically
(as shown at the end of the EXAMPLES section).</p>

<p style="margin-top: 1em">COMMANDS <br>
The command option sends a SCSI command to the DEVICE. If
the command fails then this is reflected in the non-zero
exit status. To obtain more information about the error use
<br>
the -v option.</p>

<p style="margin-top: 1em">capacity <br>
sends a READ CAPACITY command (valid for disks and cd/dvd
media). If successful yields &quot;blocks: &quot; [the
number of blocks], &quot;block_length: &quot; [typically
either 512 or 2048] <br>
and &quot;capacity_mib: &quot; [capacity in MibiBytes
(1048576 byte units)].</p>

<p style="margin-top: 1em">eject stops the medium and
ejects it from the device. Note that ejection (by command or
button) may be prevented in which case the
&rsquo;unlock&rsquo; command may be useful in extreme <br>
cases. Typically only appropriate for cd/dvd drives and disk
drives with removable media. Objects if sent to another
peripheral device type (but objection can be overrid&acirc;
<br>
den with &rsquo;-f&rsquo; option).</p>

<p style="margin-top: 1em">load loads the medium and and
starts it (i.e. spins it up). See &rsquo;eject&rsquo;
command for supported device types.</p>

<p style="margin-top: 1em">profile <br>
lists the various formats that a CD/DVD/HD-DVD/BD drive
supports. These are called &quot;profiles&quot; in the MMC
standard. The profiles are listed one per line. If media is
in <br>
the drive then the profile that matches the media (if any)
has an &quot;*&quot; to the right of the line.</p>

<p style="margin-top: 1em">ready sends the &quot;Test Unit
Ready&quot; SCSI command to the DEVICE. No error is reported
if the device will respond to data requests (e.g. READ) in a
reasonable timescale. For exam&acirc; <br>
ple, if a disk is stopped then it will report &quot;not
ready&quot;. All devices should respond to this command.</p>

<p style="margin-top: 1em">sense sends a REQUEST SENSE
command. It reports a hardware threshold exceeded, warning
or low power condition if flagged. If a progress indication
is present (e.g. during a for&acirc; <br>
mat) then it will be output as a percentage. Yields a
process status of 0 if the command succeeds and the sense
key is 0; else yields 1. The --quiet option can be used to
<br>
lessen output, and --hex to output sense data in hex.</p>

<p style="margin-top: 1em">speed=SPEED <br>
permits the speed of a CD, DVD, HD_DVD or BD disc in a drive
to be set (or at least influenced). It has this format:
--command=speed=SPEED where SPEED is in kilobytes per <br>
second. In this case a kilobyte is 1000 bytes. The
&quot;times one&quot; speed for a CD is 176.4 kB/s, for a
DVD is 1350 kB/s and for both HD-DVD and BD it is 4500 kB/s.
If SPEED is <br>
zero then the drive is set to the speed that it considers
gives optimal performance. This command sends a SET
STREAMING multi-media command (MMC) to the drive. The EXACT
<br>
bit is clear so the drive will round the given SPEED as
necessary. The command is designed to control read speed;
setting write speed should be left to &quot;burning&quot;
pro&acirc; <br>
grams.</p>

<p style="margin-top: 1em">start starts the medium (i.e.
spins it up). Harmless if medium has already been started.
See &rsquo;eject&rsquo; command for supported device types.
If the DEVICE is an ATA disk in Linux <br>
the &rsquo;--readonly&rsquo; option may be required.</p>

<p style="margin-top: 1em">stop stops the medium (i.e.
spins it down). Harmless if medium has already been stopped.
See &rsquo;eject&rsquo; command for supported device types.
If the DEVICE is an ATA disk in Linux <br>
the &rsquo;--readonly&rsquo; option may be required. See the
NOTES section above.</p>

<p style="margin-top: 1em">sync sends a SYNCHRONIZE CACHE
command. The device should flush any data held in its
(volatile) buffers to the media.</p>

<p style="margin-top: 1em">unlock tells a device to allow
medium removal. It uses the SCSI &quot;prevent allow medium
removal&quot; command. This is desperation stuff, possibly
overriding a prevention applied by the <br>
OS on a mounted file system. The &quot;eject&quot; utility
(from the &quot;eject&quot; package) is more graceful and
should be tried first. This command is only appropriate for
devices with <br>
removable media.</p>

<p style="margin-top: 1em">For loading and ejecting tapes
the mt utility should be used (i.e. not these commands). The
&rsquo;ready&rsquo; command is valid for tape devices.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To list the common (generic) mode parameters of a disk:</p>

<p style="margin-top: 1em">sdparm /dev/sda</p>

<p style="margin-top: 1em">To list the designators within
the device identification VPD page of a disk:</p>

<p style="margin-top: 1em">sdparm --inquiry /dev/sda</p>

<p style="margin-top: 1em">To see all parameters for the
caching mode page:</p>

<p style="margin-top: 1em">sdparm --page=ca /dev/sda</p>

<p style="margin-top: 1em">To see all parameters for the
caching mode page with parameter descriptions to the
right:</p>

<p style="margin-top: 1em">sdparm --page=ca --long
/dev/sda</p>

<p style="margin-top: 1em">To get the WCE values (current
changeable default and saved) in hex:</p>

<p style="margin-top: 1em">sdparm -g WCE -H /dev/sda <br>
0x01 0x00 0x01 0x01</p>

<p style="margin-top: 1em">To get the WCE current value in
hex:</p>

<p style="margin-top: 1em">sdparm -g WCE=1 -H /dev/sda <br>
0x01</p>

<p style="margin-top: 1em">To set the &quot;Writeback Cache
Enable&quot; bit in the current values page:</p>

<p style="margin-top: 1em">sdparm --set=WCE /dev/sda</p>

<p style="margin-top: 1em">To set the &quot;Writeback Cache
Enable&quot; bit in the current and saved values page:</p>

<p style="margin-top: 1em">sdparm --set=WCE --save
/dev/sda</p>

<p style="margin-top: 1em">To set the &quot;Writeback Cache
Enable&quot; and clear &quot;Read Cache Disable&quot;:</p>

<p style="margin-top: 1em">sdparm --set=WCE --clear=RCD
--save /dev/sda</p>

<p style="margin-top: 1em">The previous example can also by
written as:</p>

<p style="margin-top: 1em">sdparm -s WCE=1,RCD=0 -S
/dev/sda</p>

<p style="margin-top: 1em">To re-establish the
manufacturer&rsquo;s defaults in the current and saved
values of the caching mode page:</p>

<p style="margin-top: 1em">sdparm --page=ca --defaults
--save /dev/sda</p>

<p style="margin-top: 1em">If an ATAPI cd/dvd drive is at
/dev/hdc then its common (mode) parameters could be listed
in the lk 2.6 series with:</p>

<p style="margin-top: 1em">sdparm /dev/hdc</p>

<p style="margin-top: 1em">If there is a DVD in the drive
at /dev/hdc then it could be ejected in the lk 2.6 series
with:</p>

<p style="margin-top: 1em">sdparm --command=eject
/dev/hdc</p>

<p style="margin-top: 1em">If the ejection is being
prevented by software then that can be overridden with:</p>

<p style="margin-top: 1em">sdparm --command=unlock
/dev/hdc</p>

<p style="margin-top: 1em">One disk vendor has a
&quot;Performance Mode&quot; bit (PM) in the vendor specific
unit attention mode page [0x0,0x0]. PM=0 is server mode (the
default) while PM=1 is desktop mode. Desktop <br>
mode can be set (both current and saved values) with:</p>

<p style="margin-top: 1em">sdparm --page=0 --set=2:7:1=1
--save /dev/sda</p>

<p style="margin-top: 1em">The resultant change can be
viewed in hex with the --hex option as there are no acronyms
for vendor extensions yet. The PM bit is now covered by
vendor specific mode pages and <br>
the above can also be accomplished with:</p>

<p style="margin-top: 1em">sdparm --vendor=sea --set=PM
--save /dev/sda</p>

<p style="margin-top: 1em">What follows are some examples
from Windows using the &rsquo;--wscan&rsquo; option. The
idea is to list the storage device names on the system that
might be invoked by other uses of sdparm.</p>

<p style="margin-top: 1em"># sdparm --wscan <br>
PD0 [C] FUJITSU MHY2160BH 0000 <br>
PD1 [DF] WD 2500BEV External 1.05 WD-WXE90 <br>
CDROM0 [E] MATSHITA DVD/CDRW UJDA775 CB03</p>

<p style="margin-top: 1em">So &rsquo;sdparm -a
CDROM0&rsquo; and &rsquo;sdparm -a E&rsquo; will show all
the (known) mode page fields for the Matshita DVD/CD drive.
By using the &rsquo;--wsacan&rsquo; option twice, the bus
type (as seen by <br>
the OS) is added to the output:</p>

<p style="margin-top: 1em"># sdparm -ww <br>
PD0 [C] &lt;Ata &gt; FUJITSU MHY2160BH 0000 <br>
PD1 [DF] &lt;Usb &gt; WD 2500BEV External 1.05 WD-WXE90 <br>
CDROM0 [E] &lt;Atapi&gt; MATSHITA DVD/CDRW UJDA775 CB03</p>

<p style="margin-top: 1em">And the pattern continues to add
a SCSI adapter scan. This may be useful if there are
specialized storage related devices (e.g. a SES device in an
enclosure) but does add much <br>
extra information in this case.</p>

<p style="margin-top: 1em"># sdparm -www <br>
PD0 [C] &lt;Ata &gt; FUJITSU MHY2160BH 0000 <br>
PD1 [DF] &lt;Usb &gt; WD 2500BEV External 1.05 WD-WXE90 <br>
CDROM0 [E] &lt;Atapi&gt; MATSHITA DVD/CDRW UJDA775 CB03</p>

<p style="margin-top: 1em">SCSI0:0,0,0 claimed=1 pdt=0h
FUJITSU MHY2160BH 0000 <br>
SCSI1:0,0,0 claimed=1 pdt=5h MATSHITA DVD/CDRW UJDA775
CB03</p>

<p style="margin-top: 1em">EXIT STATUS <br>
To aid scripts that call sdparm, the exit status is set to
indicate success (0) or failure (1 or more). Note that some
of the lower values correspond to the SCSI sense key
val&acirc; <br>
ues. The exit status values are:</p>

<p style="margin-top: 1em">0 success</p>

<p style="margin-top: 1em">1 syntax error. Either illegal
command line options, options with bad arguments or a
combination of options that is not permitted.</p>

<p style="margin-top: 1em">2 the DEVICE reports that it is
not ready for the operation requested. The device may be in
the process of becoming ready (e.g. spinning up but not at
speed) so the utility <br>
may work after a wait.</p>

<p style="margin-top: 1em">3 the DEVICE reports a medium or
hardware error (or a blank check). For example an attempt to
read a corrupted block on a disk will yield this value.</p>

<p style="margin-top: 1em">5 the DEVICE reports an
&quot;illegal request&quot; with an additional sense code
other than &quot;invalid operation code&quot;. This is often
a supported command with a field set requesting an <br>
unsupported capability. For commands that require a
&quot;service action&quot; field this value can indicate
that the command is not supported.</p>

<p style="margin-top: 1em">6 the DEVICE reports a
&quot;unit attention&quot; condition. This usually indicates
that something unrelated to the requested command has
occurred (e.g. a device reset) potentially <br>
before the current SCSI command was sent. The requested
command has not been executed by the device. Note that unit
attention conditions are usually only reported once by <br>
a device.</p>

<p style="margin-top: 1em">9 the DEVICE reports an illegal
request with an additional sense code of &quot;invalid
operation code&quot; which means that it doesn&rsquo;t
support the requested command.</p>

<p style="margin-top: 1em">11 the DEVICE reports an aborted
command. In some cases aborted commands can be retried
immediately (e.g. if the transport aborted the command due
to congestion).</p>

<p style="margin-top: 1em">15 the utility is unable to
open, close or use the given DEVICE. The given file name
could be incorrect or there may be permission problems.
Adding the -v option may give <br>
more information.</p>

<p style="margin-top: 1em">20 the DEVICE reports it has a
check condition but &quot;no sense&quot;. Some polling
commands (e.g. REQUEST SENSE) can react this way. It is
unlikely that this value will occur as <br>
an exit status.</p>

<p style="margin-top: 1em">21 the DEVICE reports a
&quot;recovered error&quot;. The requested command was
successful. Most likely a utility will report a recovered
error to stderr and continue, probably leaving <br>
the utility with an exit status of 0 .</p>

<p style="margin-top: 1em">33 the command sent to DEVICE
has timed out. This occurs in Linux only; in other ports a
command timeout will appear as a transport (or OS)
error.</p>

<p style="margin-top: 1em">97 the response to a SCSI
command failed sanity checks.</p>

<p style="margin-top: 1em">98 the DEVICE reports it has a
check condition but the error doesn&rsquo;t fit into any of
the above categories.</p>

<p style="margin-top: 1em">99 any errors that can&rsquo;t
be categorized into values 1 to 98 may yield this value.
This includes transport and operating system errors after
the command has been sent to the <br>
device.</p>

<p style="margin-top: 1em">Most of the error conditions
reported above will be repeatable (an example of one that is
not is &quot;unit attention&quot;) so the utility can be run
again with the -v option (or several) <br>
to obtain more information.</p>

<p style="margin-top: 1em">AUTHORS <br>
Written by Douglas Gilbert.</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Report bugs to &lt;dgilbert at interlog dot com&gt;.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2005-2013 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<p style="margin-top: 1em">WEB SITE <br>
There is a web page discussing this package at
http://sg.danny.cz/sg/sdparm.html .</p>

<p style="margin-top: 1em">SEE ALSO <br>
hdparm(hdparm), sg_modes, sg_wr_mode, sginfo, sg_inq,
sg_vpd(all in sg3_utils),
smartmontools(smartmontools.sourceforge.net), mt,
eject(eject),</p>

<p style="margin-top: 1em">sdparm-1.08 June 2013
SDPARM(8)</p>
<hr>
</body>
</html>
