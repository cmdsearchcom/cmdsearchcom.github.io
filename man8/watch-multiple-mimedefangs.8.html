<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>WATCH-MULTIPLE-MIMDEFANGS(8) System Manager&rsquo;s
Manual WATCH-MULTIPLE-MIMDEFANGS(8)</p>

<p style="margin-top: 1em">NAME <br>
watch-multiple-mimdefangs.tcl - Keep an eye on a cluster of
MIMEDefang machines</p>

<p style="margin-top: 1em">SYNOPSIS <br>
watch-multiple-mimdefangs.tcl [-n] [-r] [-s] [-t] [-archive]
machine-1 machine-2 ... machine-N</p>

<p style="margin-top: 1em">DESCRIPTION <br>
watch-multiple-mimdefangs.tcl is a Tk script that
graphically displays the status of mimedefang-multiplexor(8)
on a cluster of machines. Note that Tcl/Tk 8.4 or higher is
<br>
required to run watch-multiple-mimdefangs.tcl.</p>

<p style="margin-top: 1em">If you supply the -archive
command-line option, then watch-multiple-mimdefangs.tcl logs
the output of md-mx-ctrl rawload for each machine. The
output for machine_name is logged <br>
in:</p>


<p style="margin-top: 1em">$HOME/.watch-multiple-mimedefangs/machine_name/data.</p>

<p style="margin-top: 1em">If you supply any of -n, -r, -s
or -t options, then watch-multiple-mimdefangs.tcl uses the
rawload1 command rather than rawload command to read
performance data. Do not use <br>
these options unless all monitored machines are running
MIMEDefang 2.74 or newer!.</p>

<p style="margin-top: 1em">The -n, -r, -s, and -t options
enable monitoring of scan times, filter_relay times,
filter_sender times and filter_recipient times,
respectively.</p>

<p style="margin-top: 1em">PREREQUISITES <br>
To use watch-multiple-mimdefangs.tcl to monitor a cluster of
machines, you need the following prerequisites:</p>

<p style="margin-top: 1em">o A UNIX-like machine with
Tcl/Tk 8.4, the X window system and an SSH client. You also
need &quot;xterm&quot; to use some of the features.</p>

<p style="margin-top: 1em">o The ability to SSH as root to
all of the machines you want to monitor. Ideally, you should
be using the SSH agent so that you can SSH to the monitored
machines as root <br>
without being prompted for a password or pass phrase.</p>

<p style="margin-top: 1em">o The program md-mx-ctrl on
root&rsquo;s path on all the machines you want to
monitor.</p>

<p style="margin-top: 1em">DISPLAY <br>
For each machine specified on the command line,
watch-multiple-mimdefangs.tcl creates a chart with five
columns. The columns are:</p>

<p style="margin-top: 1em">o A button with the name of the
machine. Clicking the button pops up a menu that lets you
take various actions, as described later. If all slaves on
the machine are busy, <br>
the button turns yellow.</p>

<p style="margin-top: 1em">o A label showing the number of
busy slaves in the form &quot;busy/total&quot;, where total
is the total number of slaves.</p>

<p style="margin-top: 1em">o A label showing the average
number of messages per second over the last 10 seconds.</p>

<p style="margin-top: 1em">o A label showing the average
number of milliseconds per scan over the last 10
seconds.</p>

<p style="margin-top: 1em">o A chart that graphs the
average number of busy slaves, the average number of
messages per second and the average scan time in
milliseconds, all averaged over the last 10 <br>
seconds.</p>

<p style="margin-top: 1em">MACHINE MENU <br>
If you click on a machine name, a menu with three options
pops up:</p>

<p style="margin-top: 1em">SSH Open an xterm session and
ssh as root to the machine.</p>

<p style="margin-top: 1em">Busy Slaves <br>
Monitor the busy slaves on the machine. If you click on the
process-ID of a slave, an xterm will open up and the command
&quot;strace -s 100 -t -p pid&quot; will be executed on the
<br>
remote machine. This is Linux-specific, but you can edit
watch-multiple-mimdefangs.tcl to replace the command with
your particular system&rsquo;s command for tracing system
<br>
calls.</p>

<p style="margin-top: 1em">Delete Remove the machine from
the list of machines being monitored.</p>

<p style="margin-top: 1em">ADDING A MACHINE <br>
If you need to add a machine to the display, simply type the
name of the machine in the &quot;Add Machine:&quot; box and
press Enter.</p>

<p style="margin-top: 1em">AUTHOR <br>
watch-multiple-mimdefangs.tcl was written by Dianne
Skoll.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mimedefang.pl(8), mimedefang-filter(5), mimedefang(8),
mimedefang-protocol(7), md-mx-ctrl(8),
watch-mimedefang(8)</p>

<p style="margin-top: 1em">4th Berkeley Distribution 12
January 2007 WATCH-MULTIPLE-MIMDEFANGS(8)</p>
<hr>
</body>
</html>
