<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>arc-blahp-logger(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">arc-blahp-logger(8)</td>
    <td class="head-vol">NorduGrid Toolkit</td>
    <td class="head-rtitle">arc-blahp-logger(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
arc-blahp-logger - ARC authplugin to store BLAH accouting logs about FINISHED
  jobs
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>ARC BLAH logger</b> is an authplugin to store FINISHED jobs information in
  log files used by BLAH parser. Generated logs can be used by APEL/DGAS client
  tools to send accounting information.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
arc-blahp-logger -I &lt;jobID&gt; -U &lt;user&gt; -P &lt;proxy file&gt; -L
  &lt;job status file&gt; [-c &lt;ceid prefix&gt;] [-p &lt;log prefix&gt; ] [-d
  &lt;log level&gt;]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b> <i>jobID</i></dt>
  <dd class="It-tag">A-REX job identifier</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b> <i>user</i></dt>
  <dd class="It-tag">local account that own the job files and processes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b> <i>user proxy</i></dt>
  <dd class="It-tag">path to user proxy certificate file to get VOMS membership
      info</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b> <i>job status file</i></dt>
  <dd class="It-tag">A-REX jobstatus .local file containint more info about job
      (like LRMS id)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b> <i>ceid prefix</i></dt>
  <dd class="It-tag">prefix to generate CE ID in accordance to GLUE1.3
      publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b> <i>log prefix</i></dt>
  <dd class="It-tag">logs location and filename prefix. Default is
      <b>/var/log/arc/accounting/blahp.log</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b> <i>loglevel</i></dt>
  <dd class="It-tag">logging level from 0(ERROR) to 5(DEBUG)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ENABLING_PLUGIN_IN_A-REX_CONFIGURATION"><a class="selflink" href="#ENABLING_PLUGIN_IN_A-REX_CONFIGURATION">ENABLING
  PLUGIN IN A-REX CONFIGURATION</a></h1>
You need to add BLAH logger plugin as a handler for FINISHED state, e.g.:
<div style="height: 1.00em;">&#x00A0;</div>
<b>authplugin=&quot;FINISHED timeout=10,onfailure=pass
  /usr/libexec/arc/arc-blahp-logger -I %I -U %u -L %C/job.%I.local -P
  %C/job.%I.proxy&quot;</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
There are no particular plugin configuration except passing correct options.
<div style="height: 1.00em;">&#x00A0;</div>
By default BLAH log is written to
  <b>/var/log/arc/accounting/blahp.log-YYYYMMDD.</b> The log prefix (without
  <b>-YYYYMMDD</b>) can be redefined with optional <b>-p</b> option.
<div style="height: 1.00em;">&#x00A0;</div>
CE ID is generated automatically and has a format
  <b>host.fqdn:2811/nordugrid-torque-queue</b> in accordance to GLUE1.3
  publishing. Queue is added in runtime anyway, but prefix can be redefined with
  <b>-c</b> option. This option should be added in case of LRMS.
<div style="height: 1.00em;">&#x00A0;</div>
To debug logger execution you can add <b>-d 5</b> option and see all ARC logger
  output from all subsystems used.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Andrii Salnikov &lt;manf at grid dot org dot ua&gt;
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-02-20</td>
    <td class="foot-os">NorduGrid 5.3.2</td>
  </tr>
</table>
</body>
</html>
