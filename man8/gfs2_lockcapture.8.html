<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>gfs2_lockcapture(8) System Manager&rsquo;s Manual
gfs2_lockcapture(8)</p>

<p style="margin-top: 1em">NAME <br>
gfs2_lockcapture - capture locking information from GFS2
file systems and DLM.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
gfs2_lockcapture [-dqyP] [-o output directory] [-r number of
runs] [-s seconds to sleep] [-n name of GFS2 file
system]</p>

<p style="margin-top: 1em">gfs2_lockcapture [-dqyi]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
gfs2_lockcapture is used to capture the GFS2 lockdump data
and corresponding DLM data for GFS2 file systems. The number
of captures and their frequency can be configured. By <br>
default all of the mounted GFS2 file systems will have their
data collected unless GFS2 file systems are specified.</p>

<p style="margin-top: 1em">Please note that sysrq -t
(thread) and -m (memory) dumps and the pid directories in
/proc are collected unless they are disabled with the -P
option.</p>

<p style="margin-top: 1em">OPTIONS <br>
-h, --help <br>
Prints out a short usage message and exits.</p>

<p style="margin-top: 1em">-d, --debug <br>
Enables debug logging.</p>

<p style="margin-top: 1em">-q, --quiet <br>
Disables logging to console.</p>

<p style="margin-top: 1em">-y, --no_ask <br>
Disables all questions and assumes yes.</p>

<p style="margin-top: 1em">-i, --info <br>
Prints information about the mounted GFS2 file systems.</p>

<p style="margin-top: 1em">-P, --disable_process_gather
<br>
The gathering of process information will be disabled.</p>

<p style="margin-top: 1em">-o &lt;output directory&gt;,
--path_to_output_dir=&lt;output directory&gt; <br>
The directory where all the collect data will be stored.</p>

<p style="margin-top: 1em">-r &lt;number of runs&gt;,
--num_of_runs=&lt;number of runs&gt; <br>
The number of runs capturing the lockdump data. The default
is 3 runs.</p>

<p style="margin-top: 1em">-s &lt;seconds to sleep&gt;,
--seconds_sleep=&lt;seconds to sleep&gt; <br>
The number of seconds to sleep between runs of capturing the
lockdump data. The default is 120 seconds.</p>

<p style="margin-top: 1em">-n &lt;name of GFS2
filesystem&gt;, --fs_name=&lt;name of GFS2 filesystem&gt;
<br>
The name of the GFS2 filesystem(s) that will have their
lockdump data captured. By default, all mounted GFS2 file
systems will have their data captured.</p>

<p style="margin-top: 1em">NOTES <br>
The output of the following commands will be captured:</p>

<p style="margin-top: 1em">&Acirc;&middot; uname -a</p>

<p style="margin-top: 1em">&Acirc;&middot; uptime</p>

<p style="margin-top: 1em">&Acirc;&middot; ps h -AL -o
&quot;tid,s,cmd&quot;</p>

<p style="margin-top: 1em">&Acirc;&middot; df -h</p>

<p style="margin-top: 1em">&Acirc;&middot; lsof</p>

<p style="margin-top: 1em">&Acirc;&middot; mount -l</p>

<p style="margin-top: 1em">&Acirc;&middot; dlm_tool ls</p>

<p style="margin-top: 1em">&Acirc;&middot; dlm_tool
lockdebug -v -s -w &lt;lockspace name&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; echo
&quot;t&quot; &gt; /proc/sysrq-trigger (If /proc/1/stack
does not exist)</p>

<p style="margin-top: 1em">&Acirc;&middot; echo
&quot;m&quot; &gt; /proc/sysrq-trigger (If /proc/1/stack
does not exist)</p>

<p style="margin-top: 1em">AUTHOR <br>
Shane Bradley &lt;sbradley@fedoraproject.org&gt;</p>

<p style="margin-top: 1em">FILES <br>
/proc/mounts <br>
/proc/slabinfo <br>
/sys/kernel/config/dlm/cluster/lkbtbl_size <br>
/sys/kernel/config/dlm/cluster/dirtbl_size <br>
/sys/kernel/config/dlm/cluster/rsbtbl_size <br>
/sys/kernel/debug/gfs2/ <br>
/sys/kernel/debug/dlm/ <br>
/proc/&lt;int&gt;/ (If /proc/1/stack does exists) <br>
/var/log/messages <br>
/var/log/cluster/</p>

<p style="margin-top: 1em">SEE ALSO <br>
 gfs2_lockcapture(8)</p>
<hr>
</body>
</html>
