<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>TDBBACKUP(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TDBBACKUP(8)</td>
    <td class="head-vol">System Administration tools</td>
    <td class="head-rtitle">TDBBACKUP(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
tdbbackup - tool for backing up and for validating the integrity of samba .tdb
  files
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 10.00ex; text-indent: -10.00ex;"><b>tdbbackup</b>
  [-s&#x00A0;suffix] [-v] [-h] [-l]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This tool is part of the <b>samba</b>(1) suite.
<div class="Pp"></div>
<b>tdbbackup</b> is a tool that may be used to backup samba .tdb files. This
  tool may also be used to verify the integrity of the .tdb files prior to samba
  startup or during normal operation. If it finds file damage and it finds a
  prior backup the backup file will be restored.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
-h
<div style="margin-left: 4.00ex;">Get help information.</div>
<div class="Pp"></div>
-s suffix
<div style="margin-left: 4.00ex;">The <b>-s</b> option allows the administrator
  to specify a file backup extension. This way it is possible to keep a history
  of tdb backup files by using a new suffix for each backup.</div>
<div class="Pp"></div>
-v
<div style="margin-left: 4.00ex;">The <b>-v</b> will check the database for
  damages (corrupt data) which if detected causes the backup to be
  restored.</div>
<div class="Pp"></div>
-l
<div style="margin-left: 4.00ex;">This options disables any locking, by passing
  TDB_NOLOCK to tdb_open_ex(). Only use this for database files which are not
  used by any other process! And also only if it is otherwise not possible to
  open the database, e.g. databases which were created with mutex locking.</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<i>GENERAL INFORMATION</i>
<div class="Pp"></div>
The <b>tdbbackup</b> utility can safely be run at any time. It was designed so
  that it can be used at any time to validate the integrity of tdb files, even
  during Samba operation. Typical usage for the command will be:
<div class="Pp"></div>
tdbbackup [-s suffix] *.tdb
<div class="Pp"></div>
Before restarting samba the following command may be run to validate .tdb files:
<div class="Pp"></div>
tdbbackup -v [-s suffix] *.tdb
<div class="Pp"></div>
Samba .tdb files are stored in various locations, be sure to run backup all .tdb
  file on the system. Important files includes:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>secrets.tdb</b> - usual location is
  in the /usr/local/samba/private directory, or on some systems in
  /etc/samba.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>passdb.tdb</b> - usual location is
  in the /usr/local/samba/private directory, or on some systems in
  /etc/samba.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>*.tdb</b> located in the
  /usr/local/samba/var directory or on some systems in the /var/cache or
  /var/lib/samba directories.</div>
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
This man page is correct for version 3 of the Samba suite.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original Samba software and related utilities were created by Andrew
  Tridgell. Samba is now developed by the Samba Team as an Open Source project
  similar to the way the Linux kernel is developed.
<div class="Pp"></div>
The tdbbackup man page was written by John H Terpstra.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-04-25</td>
    <td class="foot-os">Samba 3.6</td>
  </tr>
</table>
</body>
</html>
