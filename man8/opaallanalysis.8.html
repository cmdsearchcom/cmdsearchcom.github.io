<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opaallanalysis(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opaallanalysis(8)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opaallanalysis(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opaallanalysis
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(All)</b> opaallanalysis command performs the set of analysis specified in
  FF_ALL_ANALYSIS and can be specified for fabric, chassis, esm, or hostsm.
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opaallanalysis [-b|-e] [-s] [-d <i>dir</i>] [-c <i>file</i>] [-t
  <i>portsfile</i>] [-p <i>ports</i>] [-F#8217#160; <i>chassisfile</i>] [-H
  '<i>chassis</i>'] [-G <i>esmchassisfile</i>] [-E <i>esmchassis</i>] [-T
  <i>topology_input</i>]
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-b</dt>
  <dd class="It-tag">Baseline mode. Default is compare/check mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e</dt>
  <dd class="It-tag">Evaluates health only. Default is compare/check mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s</dt>
  <dd class="It-tag">Saves history of failures (errors/differences).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d <i>dir</i></dt>
  <dd class="It-tag">Top-level directory for saving baseline and history of
      failed checks. Default = /var/lib/opa-ff/analysis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-c <i>file</i></dt>
  <dd class="It-tag">Error thresholds configuration file. Default =
      /etc/sysconfig/opa/opamon.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-t <i>portsfile</i></dt>
  <dd class="It-tag">File with list of local HFI ports used to access fabric(s)
      for analysis. Default = /etc/sysconfig/opa/ports</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>ports</i></dt>
  <dd class="It-tag">List of local HFI ports used to access fabric(s) for
      analysis. Default is the first active port. Specified as HFI:port as
      follows:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:0 First active port in system.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0: <i>y</i> Port <i>y</i> within system.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 <i>x</i>:0 First active port on HFI <i>x</i>.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 <i>x</i>: <i>y</i> HFI <i>x</i>, port <i>y</i>.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-F#8217#160; <i>chassisfile</i></dt>
  <dd class="It-tag">File with a chassis in a cluster. Default =
      /etc/sysconfig/opa/chassis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-H '<i>chassis</i>'</dt>
  <dd class="It-tag">List of chassis on which to execute the command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-G <i>esmchassisfile</i></dt>
  <dd class="It-tag">File with embedded SM chassis in the cluster. Default =
      /etc/sysconfig/opa/esm_chassis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-E <i>esmchassis</i></dt>
  <dd class="It-tag">List of embedded SM chassis to analyze.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-T <i>topology_input</i></dt>
  <dd class="It-tag">Name of topology input file to use. Any %P markers in this
      filename are replaced with the HFI:port being operated on, such as 0:0 or
      1:2. Default = /etc/sysconfig/opa/topology.%P.xml. If -T NONE is
      specified, no topology input file is used. See <i>opareport</i> for more
      information.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Example"><a class="selflink" href="#Example">Example</a></h1>
opaallanalysis
<div>&#x00A0;</div>
opaallanalysis -p '1:1 2:1'
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
The following environment variables are also used by this command:
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS</b></dt>
  <dd class="It-tag">List of ports, used in absence of -t and -p.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS_FILE</b></dt>
  <dd class="It-tag">File containing list of ports, used in absence of -t and
      -p.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_TOPOLOGY_FILE</b></dt>
  <dd class="It-tag">File containing topology_input (may have %P marker in
      filename), used in absence of -T.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CHASSIS</b></dt>
  <dd class="It-tag">List of chassis, used if -F and -H options are not
      supplied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CHASSIS_FILE</b></dt>
  <dd class="It-tag">File containing list of chassis, used if -F and -H options
      are not supplied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ESM_CHASSIS</b></dt>
  <dd class="It-tag">List of SM chassis, used if -G and -E options are not
      supplied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ESM_CHASSIS_FILE</b></dt>
  <dd class="It-tag">File containing list of SM chassis, used if -G and -E
      options are not supplied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_ANALYSIS_DIR</b></dt>
  <dd class="It-tag">Top level directory for baselines and failed health
    checks.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Details"><a class="selflink" href="#Details">Details</a></h1>
The opaallanalysis command performs the set of analysis specified in
  <b>FF_ALL_ANALYSIS</b>, which must be a space-separated list. This can be
  provided by the environment or using /etc/sysconfig/opa/opafastfabric.conf.
  The analysis set includes the options: fabric, chassis, esm, or hostsm.
<div class="Pp"></div>
Note that the opaallanalysis command has options which are a super-set of the
  options for all other analysis commands. The options are passed along to the
  respective tools as needed. For example, the -c file option is passed on to
  opafabricanalysis if it is specified in <b>FF_ALL_ANALYSIS</b>.
<div class="Pp"></div>
The output files are all the output files for the <b>FF_ALL_ANALYSIS</b>
  selected set of analysis. See the previous sections for the specific output
  files.</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
