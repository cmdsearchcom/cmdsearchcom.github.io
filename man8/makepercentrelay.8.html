<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MAKEPERCENTRELAY(8) Double Precision, Inc.
MAKEPERCENTRELAY(8)</p>

<p style="margin-top: 1em">NAME <br>
makepercentrelay - Build a list of %-relayed domains</p>

<p style="margin-top: 1em">SYNOPSIS <br>
makepercentrelay</p>

<p style="margin-top: 1em">DESCRIPTION <br>
makepercentrelay reads /etc/courier/esmtppercentrelay.dir
and creates /etc/courier/esmtppercentrelay.dat which is a
binary database file. The files
/etc/courier/esmtppercentrelay <br>
and /etc/courier/esmtppercentrelay.dat specify a list of
&quot;percent-hack&quot; domains.
/etc/courier/esmtppercentrelay is a plain text file,
containing one domain per line. The Courier <br>
mail server loads the contents of
/etc/courier/esmtppercentrelay into memory, so if you have a
lot of domains, you will want to use the binary database
file. The makepercentrelay <br>
command reads /etc/courier/esmtppercentrelay.dir, which can
be either a plain text file itself, or a directory
containing plain text files. All files in the subdirectory
are <br>
concatenated, and the binary database file is created from
the result. Note that this build of courier ignores any
files that match the regex pattern
&quot;.*.dpkg-[a-z]*&quot; (dpkg <br>
configuration file handling) and &quot;.*~&quot; (backup
files of some editors).</p>

<p style="margin-top: 1em">the Courier mail server can use
both /etc/courier/esmtppercentrelay and
/etc/courier/esmtppercentrelay.dat at the same time. Usually
you would put a couple of your most frequent <br>
domains in /etc/courier/esmtppercentrelay, then put the rest
in /etc/courier/esmtppercentrelay.dir, and use
makepercentrelay to turn it into a database file.</p>

<p style="margin-top: 1em">&quot;percent-hack&quot; domains
are a list of domains for which the Courier mail server
accepts mail via ESMTP addressed as
&quot;local%percent.hack.domain@local.domain&quot;, where
<br>
&quot;percent.hack.domain&quot; is a domain found in
/etc/courier/esmtppercentrelay or
/etc/courier/esmtppercentrelay.dat, and
&quot;local.domain&quot; is any domain found in
/etc/courier/locals. <br>
The Courier mail server removes the local domain, and
rewrites the address as
&quot;local@percent.hack.domain&quot;, then attempts to
deliver it.</p>

<p style="margin-top: 1em">The percent hack applies only to
mail received via ESMTP. The Courier mail server does not
check this list of domains if the message is received via
any other way (such as by <br>
running /usr/bin/sendmail directly from the command line).
&quot;percent.hack.domain&quot; would likely to be a domain
that the Courier mail server knows how to handle via some
other <br>
means. It might be an entry in /etc/courier/aliases, or an
entry in /etc/courier/esmtproutes.</p>

<p style="margin-top: 1em">SEE ALSO <br>
esmtpd(8)[1], makealiases(8)[2].</p>

<p style="margin-top: 1em">AUTHOR <br>
Sam Varshavchik <br>
Author</p>

<p style="margin-top: 1em">NOTES <br>
1. esmtpd(8) <br>
[set $man.base.url.for.relative.links]/esmtpd.html</p>

<p style="margin-top: 1em">2. makealiases(8) <br>
[set $man.base.url.for.relative.links]/makealiases.html</p>

<p style="margin-top: 1em">Courier Mail Server 06/27/2015
MAKEPERCENTRELAY(8)</p>
<hr>
</body>
</html>
