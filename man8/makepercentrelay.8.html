<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MAKEPERCENTRELAY(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MAKEPERCENTRELAY(8)</td>
    <td class="head-vol">Double Precision, Inc.</td>
    <td class="head-rtitle">MAKEPERCENTRELAY(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
makepercentrelay - Build a list of %-relayed domains
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 17.00ex; text-indent: -17.00ex;"><b>makepercentrelay</b></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>makepercentrelay</b> reads /etc/courier/esmtppercentrelay.dir and creates
  /etc/courier/esmtppercentrelay.dat which is a binary database file. The files
  /etc/courier/esmtppercentrelay and /etc/courier/esmtppercentrelay.dat specify
  a list of &quot;percent-hack&quot; domains. /etc/courier/esmtppercentrelay is
  a plain text file, containing one domain per line. The Courier mail server
  loads the contents of /etc/courier/esmtppercentrelay into memory, so if you
  have a lot of domains, you will want to use the binary database file. The
  <b>makepercentrelay</b> command reads /etc/courier/esmtppercentrelay.dir,
  which can be either a plain text file itself, or a directory containing plain
  text files. All files in the subdirectory are concatenated, and the binary
  database file is created from the result. Note that this build of courier
  ignores any files that match the regex pattern &quot;.*.dpkg-[a-z]*&quot;
  (dpkg configuration file handling) and &quot;.*~&quot; (backup files of some
  editors).
<div class="Pp"></div>
the Courier mail server can use both /etc/courier/esmtppercentrelay and
  /etc/courier/esmtppercentrelay.dat at the same time. Usually you would put a
  couple of your most frequent domains in /etc/courier/esmtppercentrelay, then
  put the rest in /etc/courier/esmtppercentrelay.dir, and use
  <b>makepercentrelay</b> to turn it into a database file.
<div class="Pp"></div>
&quot;percent-hack&quot; domains are a list of domains for which the Courier
  mail server accepts mail via ESMTP addressed as
  &quot;local%percent.hack.domain@local.domain&quot;, where
  &quot;percent.hack.domain&quot; is a domain found in
  /etc/courier/esmtppercentrelay or /etc/courier/esmtppercentrelay.dat, and
  &quot;local.domain&quot; is any domain found in /etc/courier/locals. The
  Courier mail server removes the local domain, and rewrites the address as
  &quot;local@percent.hack.domain&quot;, then attempts to deliver it.
<div class="Pp"></div>
The percent hack applies only to mail received via ESMTP. The Courier mail
  server does not check this list of domains if the message is received via any
  other way (such as by running <b>/usr/bin/sendmail</b> directly from the
  command line). &quot;percent.hack.domain&quot; would likely to be a domain
  that the Courier mail server knows how to handle via some other means. It
  might be an entry in /etc/courier/aliases, or an entry in
  /etc/courier/esmtproutes.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b></b><b>esmtpd</b>(8)[1], <b></b><b>makealiases</b>(8)[2].
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Sam Varshavchik</b>
<div style="margin-left: 4.00ex;">Author</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag"><b>esmtpd</b>(8)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/esmtpd.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag"><b>makealiases</b>(8)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/makealiases.html</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/27/2015</td>
    <td class="foot-os">Courier Mail Server</td>
  </tr>
</table>
</body>
</html>
