<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DUMPSEG(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DUMPSEG(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">DUMPSEG(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dumpseg - print segment information of NILFS2
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dumpseg</b> [ <b>-hV</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>dumpseg</b> [ <i>device</i>] <i>segment-number</i> ...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>dumpseg</b> program is an analysis tool for on-disk logs of a NILFS2 file
  system found in <i>device</i>. It displays the configuration of every log
  stored in the segments specified by one or more <i>segment-numbers</i>. The
  term segment here means a contiguous lump of disk blocks giving an allocation
  unit of NILFS2 disk space. When <i>device</i> is omitted, it tries to find an
  active NILFS2 file system from <i>/proc/mounts</i>.
<div class="Pp"></div>
<b>dumpseg</b> is a tool for debugging rather than administration. To list a
  summary of segments, <b>lssu</b>(1) is available instead.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Display help message and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Display version and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FIELD_DESCRIPTION"><a class="selflink" href="#FIELD_DESCRIPTION">FIELD
  DESCRIPTION</a></h1>
<b>dumpseg</b> shows the configuration of each log with the following fields,
  where each field is printed in the style of `` <i>field-name</i> <b>=</b>
  <i>value</i>''.
<dl class="Bl-tag">
  <dt class="It-tag"><b>creation time</b></dt>
  <dd class="It-tag">Creation date and time of the log.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nfinfo</b></dt>
  <dd class="It-tag">Number of file information summaries.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>finfo</b></dt>
  <dd class="It-tag">File information summary. This information starts with the
      following fields:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>ino</b></dt>
  <dd class="It-tag">Inode number of the file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cno</b></dt>
  <dd class="It-tag">Number of the checkpoint that the blocks included in the
      file belong to. For normal writings, this is equal to the latest
      checkpoint number. For the writings involved in garbage collection, this
      indicates a past checkpoint number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nblocks</b></dt>
  <dd class="It-tag">Number of blocks of the file written in the log. This
      number is a sum of the number of data blocks and B-tree node blocks. The
      contents of these blocks are written serially in the payload part of the
      log. Only modified or newly created blocks are written to each log.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ndatblk</b></dt>
  <dd class="It-tag">Number of data blocks of the file written in the log.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <div class="Pp"></div>
  </b></dt>
  <dd class="It-tag">Then, for each update block in the file, the following
      information will follow these headings.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>vblocknr</b></dt>
  <dd class="It-tag">Virtual block number. Not printed for data blocks of the
      Disk Address Translation file (DAT file).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blkoff</b></dt>
  <dd class="It-tag">Block offset number. Not printed for B-tree node blocks
      except for the DAT file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">Level of B-tree node block. Printed only for the DAT
    file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocknr</b></dt>
  <dd class="It-tag">Block address on the <i>device</i>. This is not an actual
      field in the summary but is calculated from the disk address of each
    log.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Koji Sato
<h1 class="Sh" title="Sh" id="AVAILABILITY"><a class="selflink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<b>dumpseg</b> is part of the nilfs-utils package and is available from
  http://nilfs.sourceforge.net.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>nilfs</b>(8), <b>lssu</b>(1).</div>
<table class="foot">
  <tr>
    <td class="foot-date">Apr 2014</td>
    <td class="foot-os">nilfs-utils version 2.2</td>
  </tr>
</table>
</body>
</html>
