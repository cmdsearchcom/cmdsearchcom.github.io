<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:47 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PACEMAKER(8) System Administration Utilities
PACEMAKER(8)</p>

<p style="margin-top: 1em">NAME <br>
Pacemaker - Part of the Pacemaker cluster resource
manager</p>

<p style="margin-top: 1em">SYNOPSIS <br>
crm_resource (query|command) [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
crm_resource - Perform tasks related to cluster resources.
Allows resources to be queried (definition and location),
modified, and moved around the cluster.</p>

<p style="margin-top: 1em">OPTIONS <br>
-?, --help <br>
This text</p>

<p style="margin-top: 1em">-$, --version <br>
Version information</p>

<p style="margin-top: 1em">-V, --verbose <br>
Increase debug output</p>

<p style="margin-top: 1em">-Q, --quiet <br>
Print only the value on stdout</p>

<p style="margin-top: 1em">-r, --resource=value <br>
Resource ID</p>

<p style="margin-top: 1em">Queries: <br>
-L, --list <br>
List all cluster resources</p>

<p style="margin-top: 1em">-l, --list-raw <br>
List the IDs of all instantiated resources (no
groups/clones/...)</p>

<p style="margin-top: 1em">-O, --list-operations <br>
List active resource operations. Optionally filtered by
resource (-r) and/or node (-N)</p>

<p style="margin-top: 1em">-o, --list-all-operations <br>
List all resource operations. Optionally filtered by
resource (-r) and/or node (-N)</p>

<p style="margin-top: 1em">-j, --pending <br>
Display pending state if &rsquo;record-pending&rsquo; is
enabled</p>

<p style="margin-top: 1em">--list-standards <br>
List supported standards</p>

<p style="margin-top: 1em">--list-ocf-providers <br>
List all available OCF providers</p>

<p style="margin-top: 1em">--list-agents=value <br>
List all agents available for the named standard and/or
provider.</p>

<p style="margin-top: 1em">--list-ocf-alternatives=value
<br>
List all available providers for the named OCF agent</p>

<p style="margin-top: 1em">--show-metadata=value <br>
Show the metadata for the named class:provider:agent</p>

<p style="margin-top: 1em">-q, --query-xml <br>
Query the definition of a resource (template expanded)</p>

<p style="margin-top: 1em">-w, --query-xml-raw <br>
Query the definition of a resource (raw xml)</p>

<p style="margin-top: 1em">-W, --locate <br>
Display the current location(s) of a resource</p>

<p style="margin-top: 1em">-A, --stack <br>
Display the prerequisites and dependents of a resource</p>

<p style="margin-top: 1em">-a, --constraints <br>
Display the (co)location constraints that apply to a
resource</p>

<p style="margin-top: 1em">Commands: <br>
-C, --cleanup <br>
Delete the resource history and re-check the current state.
Optional: --resource</p>

<p style="margin-top: 1em">-p, --set-parameter=value <br>
Set the named parameter for a resource. See also -m,
--meta</p>

<p style="margin-top: 1em">-g, --get-parameter=value <br>
Display the named parameter for a resource. See also -m,
--meta</p>

<p style="margin-top: 1em">-d, --delete-parameter=value
<br>
Delete the named parameter for a resource. See also -m,
--meta</p>

<p style="margin-top: 1em">Resource location: <br>
-M, --move <br>
Move a resource from its current location to the named
destination. Requires: --host. Optional: --lifetime,
--master</p>

<p style="margin-top: 1em">NOTE: This may prevent the
resource from running on the previous location node until
the implicit constraints expire or are removed with
--unban</p>

<p style="margin-top: 1em">-B, --ban <br>
Prevent the named resource from running on the named --host.
Requires: --resource. Optional: --host, --lifetime,
--master</p>

<p style="margin-top: 1em">If --host is not specified, it
defaults to:</p>

<p style="margin-top: 1em">* the current location for
primitives and groups, or</p>

<p style="margin-top: 1em">* the current location of the
master for m/s resources with master-max=1</p>

<p style="margin-top: 1em">All other situations result in
an error as there is no sane default.</p>

<p style="margin-top: 1em">NOTE: This will prevent the
resource from running on this node until the constraint
expires or is removed with --clear</p>

<p style="margin-top: 1em">-U, --clear <br>
Remove all constraints created by the --ban and/or --move
commands. Requires: --resource. Optional: --host,
--master</p>

<p style="margin-top: 1em">If --host is not specified, all
constraints created by --ban and --move will be removed for
the named resource.</p>

<p style="margin-top: 1em">-u, --lifetime=value <br>
Lifespan of constraints created by the --ban and --move
commands</p>

<p style="margin-top: 1em">--master <br>
Limit the scope of the --ban, --move and --clear commands to
the Master role. For --ban and --move, the previous master
can still remain active in the Slave role.</p>

<p style="margin-top: 1em">Advanced Commands: <br>
-D, --delete <br>
(Advanced) Delete a resource from the CIB</p>

<p style="margin-top: 1em">-F, --fail <br>
(Advanced) Tell the cluster this resource has failed</p>

<p style="margin-top: 1em">--restart <br>
(Advanced) Tell the cluster to restart this resource and
anything that depends on it</p>

<p style="margin-top: 1em">--wait (Advanced) Wait until the
cluster settles into a stable state</p>

<p style="margin-top: 1em">--force-demote <br>
(Advanced) Bypass the cluster and demote a resource on the
local node. Additional detail with -V</p>

<p style="margin-top: 1em">--force-stop <br>
(Advanced) Bypass the cluster and stop a resource on the
local node. Additional detail with -V</p>

<p style="margin-top: 1em">--force-start <br>
(Advanced) Bypass the cluster and start a resource on the
local node. Additional detail with -V</p>

<p style="margin-top: 1em">--force-promote <br>
(Advanced) Bypass the cluster and promote a resource on the
local node. Additional detail with -V</p>

<p style="margin-top: 1em">--force-check <br>
(Advanced) Bypass the cluster and check the state of a
resource on the local node. Additional detail with -V</p>

<p style="margin-top: 1em">Additional Options: <br>
-N, --node=value <br>
Host uname</p>

<p style="margin-top: 1em">--recursive <br>
Follow colocation chains when using --set-parameter</p>

<p style="margin-top: 1em">-t, --resource-type=value <br>
Resource type (primitive, clone, group, ...)</p>

<p style="margin-top: 1em">-v, --parameter-value=value <br>
Value to use with -p or -S</p>

<p style="margin-top: 1em">-m, --meta <br>
Modify a resource&rsquo;s configuration option rather than
one which is passed to the resource agent script. For use
with -p, -g, -d</p>

<p style="margin-top: 1em">-z, --utilization <br>
Modify a resource&rsquo;s utilization attribute. For use
with -p, -g, -d</p>

<p style="margin-top: 1em">-s, --set-name=value <br>
(Advanced) ID of the instance_attributes object to
change</p>

<p style="margin-top: 1em">-i, --nvpair=value <br>
(Advanced) ID of the nvpair object to change/delete</p>

<p style="margin-top: 1em">-T, --timeout=value <br>
(Advanced) Abort if command does not finish in this time
(with --restart or --wait)</p>

<p style="margin-top: 1em">-f, --force</p>

<p style="margin-top: 1em">EXAMPLES <br>
List the configured resources:</p>

<p style="margin-top: 1em"># crm_resource --list</p>

<p style="margin-top: 1em">List the available OCF
agents:</p>

<p style="margin-top: 1em"># crm_resource --list-agents
ocf</p>

<p style="margin-top: 1em">List the available OCF agents
from the linux-ha project:</p>

<p style="margin-top: 1em"># crm_resource --list-agents
ocf:heartbeat</p>

<p style="margin-top: 1em">Display the current location of
&rsquo;myResource&rsquo;:</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --locate</p>

<p style="margin-top: 1em">Move &rsquo;myResource&rsquo; to
another machine:</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --move</p>

<p style="margin-top: 1em">Move &rsquo;myResource&rsquo; to
a specific machine:</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --move --node altNode</p>

<p style="margin-top: 1em">Allow (but not force)
&rsquo;myResource&rsquo; to move back to its original
location:</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --un-move</p>

<p style="margin-top: 1em">Tell the cluster that
&rsquo;myResource&rsquo; failed:</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --fail</p>

<p style="margin-top: 1em">Stop &rsquo;myResource&rsquo;
(and anything that depends on it):</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --set-parameter target-role --meta
--parameter-value Stopped</p>

<p style="margin-top: 1em">Tell the cluster not to manage
&rsquo;myResource&rsquo;:</p>

<p style="margin-top: 1em">The cluster will not attempt to
start or stop the resource under any circumstances. Useful
when performing maintenance tasks on a resource.</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --set-parameter is-managed --meta
--parameter-value false</p>

<p style="margin-top: 1em">Erase the operation history of
&rsquo;myResource&rsquo; on &rsquo;aNode&rsquo;:</p>

<p style="margin-top: 1em">The cluster will
&rsquo;forget&rsquo; the existing resource state (including
any errors) and attempt to recover the resource. Useful when
a resource had failed permanently and has been <br>
repaired by an administrator.</p>

<p style="margin-top: 1em"># crm_resource --resource
myResource --cleanup --node aNode</p>

<p style="margin-top: 1em">AUTHOR <br>
Written by Andrew Beekhof</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Report bugs to pacemaker@oss.clusterlabs.org</p>

<p style="margin-top: 1em">Pacemaker 1.1.15-11.el7_3.5 June
2017 PACEMAKER(8)</p>
<hr>
</body>
</html>
