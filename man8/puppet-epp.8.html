<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:55 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PUPPET-EPP(8) Puppet manual PUPPET-EPP(8)</p>

<p style="margin-top: 1em">NAME <br>
puppet-epp - Interact directly with the EPP template
parser/renderer.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
puppet epp action</p>

<p style="margin-top: 1em">OPTIONS <br>
Note that any setting that&Acirc;&acute;s valid in the
configuration file is also a valid long argument, although
it may or may not be relevant to the present action. For
example, server and <br>
run_mode are valid settings, so you can specify --server
&lt;servername&gt;, or --run_mode &lt;runmode&gt; as an
argument.</p>

<p style="margin-top: 1em">See the configuration file
documentation at
https://docs.puppetlabs.com/references/stable/configuration.html
for the full list of acceptable parameters. A commented list
of all <br>
configuration options can also be generated by running
puppet with --genconfig.</p>

<p style="margin-top: 1em">--render-as FORMAT <br>
The format in which to render output. The most common
formats are json, s (string), yaml, and console, but other
options such as dot are sometimes available.</p>

<p style="margin-top: 1em">--verbose <br>
Whether to log verbosely.</p>

<p style="margin-top: 1em">--debug <br>
Whether to log debug information.</p>

<p style="margin-top: 1em">ACTIONS <br>
dump - Outputs a dump of the internal template parse tree
for debugging <br>
SYNOPSIS</p>

<p style="margin-top: 1em">puppet epp dump [--e source]
[--[no-]validate] [--[no-]header] -e source | [templates
...]</p>

<p style="margin-top: 1em">DESCRIPTION</p>

<p style="margin-top: 1em">The dump action parses and
validates the EPP syntax and dumps the resulting AST model
in a human readable (but not necessarily an easy to
understand) format. The output <br>
format of the dumped tree is intended for epp parser
debugging purposes and is not API, and may thus change
between versions without deprecation warnings.</p>

<p style="margin-top: 1em">The command accepts one or more
templates (.epp) files, or an -e followed by the template
source text. The given templates can be paths to template
files, or references to <br>
templates in modules when given on the form
modulename/template-name.epp. If no arguments are given, the
stdin is read (unless it is attached to a terminal)</p>

<p style="margin-top: 1em">If multiple templates are given,
they are separated with a header indicating the name of the
template. This can be surpressed with the option
--no-header. The option <br>
--[no-]header has no effect whe a single template is
dumped.</p>

<p style="margin-top: 1em">When debugging the epp parser
itself, it may be useful to surpress the valiation step with
the --no-validate option to observe what the parser produced
from the given <br>
source.</p>

<p style="margin-top: 1em">This command ignores the
--render-as setting/option.</p>

<p style="margin-top: 1em">OPTIONS --e &lt;source&gt; -
Dump one epp source expression given on the command
line.</p>

<p style="margin-top: 1em">--[no-]header - Whether or not
to show a file name header between files.</p>

<p style="margin-top: 1em">--[no-]validate - Whether or not
to validate the parsed result, if no-validate only syntax
errors are reported.</p>

<p style="margin-top: 1em">RETURNS</p>

<p style="margin-top: 1em">A dump of the resulting AST
model unless there are syntax or validation errors.</p>

<p style="margin-top: 1em">render - Renders an epp template
as text <br>
SYNOPSIS</p>

<p style="margin-top: 1em">puppet epp render [--e source]
[--values values_hash] [--values_file pp_or_yaml_file]
[--facts yaml_file] [--[no-]header] -e source | [templates
...]</p>

<p style="margin-top: 1em">DESCRIPTION</p>

<p style="margin-top: 1em">This action renders one or more
EPP templates.</p>

<p style="margin-top: 1em">The command accepts one or more
templates (.epp files), given the same way as templates are
given to the puppet epp function (a full path, or a relative
reference on the <br>
form
&Acirc;&acute;modulename/template-name.epp&Acirc;&acute;),
or as a relative path.args In case the given path matches
both a modulename/template and a file, the template from the
module is <br>
used.</p>

<p style="margin-top: 1em">An inline_epp equivalent can
also be performed by giving the template after an -e, or by
piping the EPP source text to the command.</p>

<p style="margin-top: 1em">Values to the template can be
defined using the Puppet Language on the command line with
--values or in a .pp or .yaml file referenced with
--values_file. If specifying <br>
both the result is merged with --values having higher
precedence.</p>

<p style="margin-top: 1em">The --values option allows a
Puppet Language sequence of expressions to be defined on the
command line the same way as it may be given in a .pp file
referenced with --val&acirc; <br>
ues_file. It may set variable values (that become available
in the template), and must produce either undef or a Hash of
values (the hash may be empty). Producing undef <br>
simulates that the template is called without an arguments
hash and thus only references variables in its outer scope.
When a hash is given, a template is limited to see&acirc;
<br>
ing only the global scope. It is thus possible to simulate
the different types of calls to the epp and inline_epp
functions, with or without a given hash. Note that if <br>
variables are given, they are always available in this
simulation - to test that the template only references
variables given as arguments, produce a hash in --values or
<br>
the --values_file, do not specify any variables that are not
global, and turn on --strict_variables setting.</p>

<p style="margin-top: 1em">If multiple templates are given,
the same set of values are given to each template. If both
--values and --value_file are used, the --values are merged
on top of those <br>
given in the file.</p>

<p style="margin-top: 1em">When multiple templates are
rendered, a separating header is output between the
templates showing the name of the template before the
output. The header output can be <br>
turned off with --no-header. This also concatenates the
template results without any added newline separators.</p>

<p style="margin-top: 1em">Facts for the simulated node can
be feed to the rendering process by referencing a .yaml file
with facts using the --facts option. (Values can be obtained
in yaml format <br>
directly from facter, or from puppet for a given node). Note
that it is not possible to simulate the reserved variable
name $facts in any other way.</p>

<p style="margin-top: 1em">Note that it is not possible to
set variables using the Puppet Language that have the same
names as facts as this result in an error; &quot;attempt to
redefine a variable&quot; <br>
since facts are set first.</p>

<p style="margin-top: 1em">Exits with 0 if there were no
validation errors. On errors, no rendered output is produced
for that template file.</p>

<p style="margin-top: 1em">When designing EPP templates, it
is strongly recommended to define all template arguments in
the template, and to give them in a hash when calling epp or
inline_epp and to <br>
use as few global variables as possible, preferrably only
the $facts hash. This makes templates more free standing and
are easier to reuse, and to test.</p>

<p style="margin-top: 1em">OPTIONS --e &lt;source&gt; -
Render one inline epp template given on the command
line.</p>

<p style="margin-top: 1em">--facts &lt;yaml_file&gt; - A
.yaml file containing a hash of facts made available in
$facts</p>

<p style="margin-top: 1em">--[no-]header - Whether or not
to show a file name header between rendered results.</p>

<p style="margin-top: 1em">--values &lt;values_hash&gt; - A
Hash in Puppet DSL form given as arguments to the template
being rendered.</p>

<p style="margin-top: 1em">--values_file
&lt;pp_or_yaml_file&gt; - A .pp or .yaml file that is
processed to produce a hash of values for the template.</p>

<p style="margin-top: 1em">RETURNS</p>

<p style="margin-top: 1em">A rendered result of one or more
given templates.</p>

<p style="margin-top: 1em">validate - Validate the syntax
of one or more EPP templates. <br>
SYNOPSIS</p>

<p style="margin-top: 1em">puppet epp validate
[--[no-]continue_on_error] [template] [template ...]</p>

<p style="margin-top: 1em">DESCRIPTION</p>

<p style="margin-top: 1em">This action validates EPP syntax
without producing any output.</p>

<p style="margin-top: 1em">When validating, multiple issues
per file are reported up to the settings of max_error, and
max_warnings. The processing stops after having reported
issues for the first <br>
encountered file with errors unless the option
--continue_on_error is given.</p>

<p style="margin-top: 1em">Files can be given using the
modulename/template.epp style to lookup the template from a
module, or be given as a reference to a file. If the
reference to a file can be <br>
resolved against a template in a module, the module version
wins - in this case use an absolute path to reference the
template file if the module version is not wanted.</p>

<p style="margin-top: 1em">Exits with 0 if there were no
validation errors.</p>

<p style="margin-top: 1em">OPTIONS --[no-]continue_on_error
- Whether or not to continue after errors are reported for a
template.</p>

<p style="margin-top: 1em">RETURNS</p>

<p style="margin-top: 1em">Nothing, or encountered syntax
errors.</p>

<p style="margin-top: 1em">EXAMPLES <br>
render</p>

<p style="margin-top: 1em">Render the template in module
&Acirc;&acute;mymodule&Acirc;&acute; called
&Acirc;&acute;mytemplate.epp&Acirc;&acute;, and give it two
arguments a and b:</p>

<p style="margin-top: 1em">$ puppet epp render
mymodule/mytemplate.epp --values &Acirc;&acute;{a =&gt; 10,
b =&gt; 20}&Acirc;&acute;</p>

<p style="margin-top: 1em">Render a template using an
absolute path:</p>

<p style="margin-top: 1em">$ puppet epp render
/tmp/testing/mytemplate.epp --values &Acirc;&acute;{a =&gt;
10, b =&gt; 20}&Acirc;&acute;</p>

<p style="margin-top: 1em">Render a template with data from
a .pp file:</p>

<p style="margin-top: 1em">$ puppet epp render
/tmp/testing/mytemplate.epp --values_file mydata.pp</p>

<p style="margin-top: 1em">Render a template with data from
a .pp file and override one value on the command line:</p>

<p style="margin-top: 1em">$ puppet epp render
/tmp/testing/mytemplate.epp --values_file mydata.pp --values
&Acirc;&acute;{a=&gt;10}&Acirc;&acute;</p>

<p style="margin-top: 1em">Render from STDIN:</p>

<p style="margin-top: 1em">$ cat template.epp | puppet epp
render --values &Acirc;&acute;{a =&gt; 10, b =&gt;
20}&Acirc;&acute;</p>

<p style="margin-top: 1em">Set variables in a .pp file and
render a template that uses variable references:</p>

<p style="margin-top: 1em"># data.pp file <br>
$greeted = &Acirc;&acute;a global var&Acirc;&acute; <br>
undef</p>

<p style="margin-top: 1em">$ puppet epp render -e
&Acirc;&acute;hello &lt;%= $greeted %&gt;&Acirc;&acute;
--values_file data.pp</p>

<p style="margin-top: 1em">Render a template that outputs a
fact:</p>

<p style="margin-top: 1em">$ facter --yaml &gt; data.yaml
<br>
$ puppet epp render -e &Acirc;&acute;&lt;% $facts[osfamily]
%&gt;&Acirc;&acute; --facts data.yaml</p>

<p style="margin-top: 1em">validate</p>

<p style="margin-top: 1em">Validate the template
&Acirc;&acute;template.epp&Acirc;&acute; in module
&Acirc;&acute;mymodule&Acirc;&acute;:</p>

<p style="margin-top: 1em">$ puppet epp validate
mymodule/template.epp</p>

<p style="margin-top: 1em">Validate two arbitrary template
files:</p>

<p style="margin-top: 1em">$ puppet epp validate
mymodule/template1.epp yourmodule/something.epp</p>

<p style="margin-top: 1em">Validate a template somewhere in
the file system:</p>

<p style="margin-top: 1em">$ puppet epp validate
/tmp/testing/template1.epp</p>

<p style="margin-top: 1em">Validate a template against a
file relative to the current directory:</p>

<p style="margin-top: 1em">$ puppet epp validate
template1.epp <br>
$ puppet epp validate ./template1.epp</p>

<p style="margin-top: 1em">Validate from STDIN:</p>

<p style="margin-top: 1em">$ cat template.epp | puppet epp
validate</p>

<p style="margin-top: 1em">Continue on error to see errors
for all templates:</p>

<p style="margin-top: 1em">$ puppet epp validate
mymodule/template1.epp mymodule/template2.epp
--continue_on_error</p>

<p style="margin-top: 1em">COPYRIGHT AND LICENSE <br>
Copyright 2014 by Puppet Labs Apache 2 license; see
COPYING</p>

<p style="margin-top: 1em">Puppet Labs, LLC May 2015
PUPPET-EPP(8)</p>
<hr>
</body>
</html>
