<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:16:22 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>IPSEC_SCEPCLIENT(8) IPSEC_SCEPCLIENT(8)</p>

<p style="margin-top: 1em">NAME <br>
ipsec scepclient - Client for the SCEP protocol</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ipsec scepclient [argument ...]</p>

<p style="margin-top: 1em">ipsec scepclient --help <br>
ipsec scepclient --version</p>

<p style="margin-top: 1em">DESCRIPTION <br>
scepclient is a client implementation of Cisco
System&rsquo;s Simple Certificate Enrollment Protocol (SCEP)
written for Linux strongSwan
&lt;http://www.strongswan.org&gt;. scepclient is <br>
designed to be used for certificate enrollment on machines
using the OpenSource IPsec solution strongSwan.</p>

<p style="margin-top: 1em">FEATURES <br>
scepclient implements the following features of SCEP:</p>

<p style="margin-top: 1em">- Automatic enrollment of client
certificate using a preshared secret</p>

<p style="margin-top: 1em">- Manual enrollment of client
certificate. Offline fingerprint check required!</p>

<p style="margin-top: 1em">- Acquisition of CA
certificate(s)</p>

<p style="margin-top: 1em">OPTIONS <br>
Basic Startup Options <br>
-v, --version <br>
Display the version of ipsec scepclient.</p>

<p style="margin-top: 1em">-h, --help <br>
Display usage of ipsec scepclient.</p>

<p style="margin-top: 1em">General Options <br>
-u, --url url <br>
Full HTTP URL of the SCEP server to be used for certificate
enrollment and CA certificate acquisition.</p>

<p style="margin-top: 1em">-+, --optionsfrom filename <br>
Reads additional options from filename.</p>

<p style="margin-top: 1em">-f, --force <br>
Overwrite existing output file[s].</p>

<p style="margin-top: 1em">-q, --quiet <br>
Do not write log output to stderr.</p>

<p style="margin-top: 1em">Options for CA Certificate
Acquisition <br>
-o, --out cacert[=filename] <br>
Output file of acquired CA certificate. If more then one CA
certificate is available, filename is used as prefix for the
resulting files (refer to EXAMPLES below for <br>
details). <br>
The default filename is
$CONFDIR/ipsec.d/cacerts/caCert.der.</p>

<p style="margin-top: 1em">Options For Certificate
Enrollment <br>
-i, --in type[=filename] <br>
Input file for certificate enrollment. This option can be
specified multiple times to specify input files for every
type. Input files can be either DER or PEM encoded.</p>

<p style="margin-top: 1em">Supported values for type:</p>

<p style="margin-top: 1em">pkcs1 RSA private key in PKCS#1
file format. If no input of this type is specified, a RSA
key gets generated. <br>
The default filename is
$CONFDIR/ipsec.d/private/myKey.der.</p>

<p style="margin-top: 1em">pkcs10 PKCS#10 certificate
request to be used in the SCEP request. If no input of this
type is specified, a request is generated. <br>
The default filename is $CONFDIR/ipsec.d/req/myReq.der.</p>

<p style="margin-top: 1em">cacert-enc CA certificate to
encrypt the SCEP request. Has to be specified for
certificate enrollment. <br>
The default filename is
$CONFDIR/ipsec.d/cacerts/caCert.der.</p>

<p style="margin-top: 1em">cacert-sig CA certificate to
check signature of SCEP reply. Has to be specified for
certificate enrollment. <br>
The default filename is
$CONFDIR/ipsec.d/cacerts/caCert.der.</p>

<p style="margin-top: 1em">cert-self Certificate to be used
in the SCEP request. If it is not specified a self-signed
certificate is generated automatically. <br>
The default filename is
$CONFDIR/ipsec.d/certs/selfCert.der.</p>

<p style="margin-top: 1em">-k, --keylength bits <br>
sets the key length for RSA key generation. The default
length for a generated rsa key is set to 2048 bit.</p>

<p style="margin-top: 1em">-D, --days days <br>
Validity of the self-signed X.509 certificate in days. The
default is 1825 days (5 years).</p>

<p style="margin-top: 1em">-S, --startdate YYMMDDHHMMSSZ
<br>
defines the notBefore date when the X.509 certificate
becomes valid. The date has the format YYMMDDHHMMSS and must
be specified in UTC (Zulu time). If the --startdate <br>
option is not specified then the current date is taken as a
default.</p>

<p style="margin-top: 1em">-E, --enddate YYMMDDHHMMSSZ <br>
defines the notAfter date when the X.509 certificate will
expire. The date has the format YYMMDDHHMMSS and must be
specified in UTC (Zulu time). If the --enddate option is
<br>
not specified then the default notAfter value is computed by
adding the validity interval specified by the --days option
to the notBefore date.</p>

<p style="margin-top: 1em">-d, --dn dn <br>
Distinguished name as comma separated list of relative
distinguished names. Use quotation marks for a distinguished
name containing spaces. If the --dn parameter is missing
<br>
then the default &quot;C=CH, O=Linux strongSwan,
CN=hostname&quot; is used with hostname being the return
value of the gethostname() function.</p>

<p style="margin-top: 1em">-s, --subjectAltName type=value
<br>
Include subjectAltName in certificate request. This option
can be specified multiple times to specify a subjectAltName
for every type.</p>

<p style="margin-top: 1em">Supported values for type:</p>

<p style="margin-top: 1em">email subjectAltName is a email
address.</p>

<p style="margin-top: 1em">dns subjectAltName is a
hostname.</p>

<p style="margin-top: 1em">ip subjectAltName is a IP
address.</p>

<p style="margin-top: 1em">-p, --password pw <br>
Password to be included as a challenge password in SCEP
request. If pw is %prompt&rsquo;, the password gets prompted
for on the command line.</p>

<p style="margin-top: 1em">- In automatic mode, this
password corresponds to the preshared secret for the given
enrollment.</p>

<p style="margin-top: 1em">- In manual mode, this password
can be used to later revoke the corresponding
certificate.</p>

<p style="margin-top: 1em">-a, --algorithm [type=]algo <br>
Change the algorithms to be used when generating and
transporting (PKCS#7) certificate requests (PKCS#10).</p>

<p style="margin-top: 1em">Supported values for type:</p>

<p style="margin-top: 1em">enc symmetric encryption
algorithm in PKCS#7</p>

<p style="margin-top: 1em">dgst hash algorithm for message
digest in PKCS#7</p>

<p style="margin-top: 1em">sig hash algorithm for the
signature in PKCS#10</p>

<p style="margin-top: 1em">If type is not specified enc is
assumed.</p>

<p style="margin-top: 1em">Supported values for algo
(enc):</p>

<p style="margin-top: 1em">des DES-CBC encryption (key size
= 56 bit). Default.</p>

<p style="margin-top: 1em">3des Triple DES-EDE-CBC
encryption (key size = 168 bit).</p>

<p style="margin-top: 1em">aes128 AES-CBC encryption (key
size = 128 bit).</p>

<p style="margin-top: 1em">aes192 AES-CBC encryption (key
size = 192 bit).</p>

<p style="margin-top: 1em">aes256 AES-CBC encryption (key
size = 256 bit).</p>

<p style="margin-top: 1em">camellia128 Camellia-CBC
encryption (key size = 128 bit).</p>

<p style="margin-top: 1em">camellia192 Camelllia-CBC
encryption (key size = 192 bit).</p>

<p style="margin-top: 1em">camellia256 Camellia-CBC
encryption (key size = 256 bit).</p>

<p style="margin-top: 1em">Supported values for algo (dgst
or sig):</p>

<p style="margin-top: 1em">md5 (default), sha1, sha256,
sha384, sha512</p>

<p style="margin-top: 1em">-o, --out type[=filename] <br>
Output file for certificate enrollment. This option can be
specified multiple times to specify output files for every
type.</p>

<p style="margin-top: 1em">Supported values for type:</p>

<p style="margin-top: 1em">pkcs1 RSA private key in PKCS#1
file format. If specified, the RSA key used for enrollment
is stored in file filename. If none of the types listed
below are specified, <br>
scepclient will stop after outputting this file. <br>
The default filename is
$CONFDIR/ipsec.d/private/myKey.der.</p>

<p style="margin-top: 1em">pkcs10 PKCS#10 certificate
request. If specified, the PKCS#10 request used or
certificate enrollment is stored in file filename. If none
of the types listed below are <br>
specified, scepclient will stop after outputting this file.
<br>
The default filename is $CONFDIR/ipsec.d/req/myReq.der.</p>

<p style="margin-top: 1em">pkcs7 PKCS#7 SCEP request as it
is sent using HTTP to the SCEP server. If specified, this
SCEP request is stored in file filename. If none of types
listed below is not <br>
specified, scepclient will stop after outputting this file.
<br>
The default filename is $CONFDIR/ipsec.d/req/pkcs7.der.</p>

<p style="margin-top: 1em">cert-self Self-signed
certificate. If specified the self-signed certificate is
stored in file filename. <br>
The default filename is
$CONFDIR/ipsec.d/certs/selfCert.der.</p>

<p style="margin-top: 1em">cert Enrolled certificate. This
type must be specified for certificate enrollment. The
enrolled certificate is stored in file filename. <br>
The default filename is set to
$CONFDIR/ipsec.d/certs/myCert.der.</p>

<p style="margin-top: 1em">-m, --method method <br>
Change HTTP request method for certificate enrollment.
Default is get.</p>

<p style="margin-top: 1em">Supported values for method:</p>

<p style="margin-top: 1em">post Certificate enrollment
using HTTP POST. Must be supported by the given SCEP
server.</p>

<p style="margin-top: 1em">get Certificate enrollment using
HTTP GET.</p>

<p style="margin-top: 1em">-t, --interval seconds <br>
Set interval time in seconds when polling in manual mode.
The default interval is set to 5 seconds.</p>

<p style="margin-top: 1em">-x, --maxpolltime seconds <br>
Set max time in seconds to poll in manual mode. The default
max time is set to unlimited.</p>

<p style="margin-top: 1em">Debugging Output Options: <br>
-l, --debug level <br>
Changes the log level (-1..4, default: 1)</p>

<p style="margin-top: 1em">EXAMPLES <br>
ipsec scepclient --out caCert --url
http://scepserver/cgi-bin/pkiclient.exe -f <br>
Acquire CA certificate from SCEP server and store it in the
default file $CONFDIR/ipsec.d/cacerts/caCert.der. If more
then one CA certificate is returned, store them in <br>
files named &Acirc;&acute;caCert-1.der&Acirc;&acute;,
&Acirc;&acute;caCert-2.der&Acirc;&acute;, etc. If an RA
certificate is returned, store it in a file named
&Acirc;&acute;caCert-ra.der&Acirc;&acute;. If more than one
RA certificate is returned, <br>
store them in files named
&Acirc;&acute;caCert-ra-1.der&Acirc;&acute;,
&Acirc;&acute;caCert-ra-2.der&Acirc;&acute;, etc.</p>

<p style="margin-top: 1em">ipsec scepclient --out
pkcs1=joeKey.der -k 1024 <br>
Generate RSA private key with key length of 1024 bit and
store it in file joeKey.der.</p>

<p style="margin-top: 1em">ipsec scepclient --in
pkcs1=joeKey.der --out pkcs10=joeReq.der --dn &acirc;C=AT,
CN=John Doe&acirc; -s email=john@doe.com -p mypassword <br>
Generate a PKCS#10 request and store it in file joeReq.der.
Use the RSA private key joeKey.der created earlier to sign
the PKCS#10-Request. In addition to the distinguished <br>
name include a email-subjectAltName and a challenge password
in the request.</p>

<p style="margin-top: 1em">ipsec scepclient --out
pkcs1=joeKey.der --out cert==joeCert.der --dn &acirc;C=CH,
CN=John Doe&acirc; -k 512 -p 5xH2pnT7wq --url
http://scep.hsr.ch/cgi-bin/pkiclient.exe --in
cacert-enc=caCert.der --in cacert-sig=caCert.der <br>
Generate a new RSA key for the request and store it in
joeKey.der. Then enroll a certificate and store as
joeCert.der. The challenge password is
&rsquo;5xH2pnT7wq&rsquo;. The encryption <br>
and signature check has to be made with the same CA
certificate caCert.der.</p>

<p style="margin-top: 1em">BUGS <br>
--optionsfrom seems to have parsing problems reading option
files containing strings in quotation marks.</p>

<p style="margin-top: 1em">strongSwan 2012-05-11
IPSEC_SCEPCLIENT(8)</p>
<hr>
</body>
</html>
