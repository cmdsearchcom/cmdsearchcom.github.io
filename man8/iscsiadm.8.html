<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ISCSIADM(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ISCSIADM(8)</td>
    <td class="head-vol">Linux Administrator's Manual</td>
    <td class="head-rtitle">ISCSIADM(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
iscsiadm - open-iscsi administration utility
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>iscsiadm</b> <b>-m discoverydb</b> [<b>-hV</b>] [<b>-d</b>
  <i>debug_level</i>] [<b>-P</b> <i>printlevel</i>] [&#x00A0;
  <b>-I&#x00A0;</b><i>iface&#x00A0;</i><b>-t&#x00A0;</b><i>type&#x00A0;</i><b>-p&#x00A0;</b><i>ip:port</i>
  [<b>-lD</b>] ] | [ [<b>-p</b> <i>ip:port</i> <b>-t</b> <i>type</i>] [<b>-o</b>
  <i>operation</i>] [<b>-n</b> <i>name</i>] [<b>-v</b> <i>value</i>]
  [<b>-lD</b>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m discovery</b> [<b>-hV</b>] [<b>-d</b> <i>debug_level</i>]
  [<b>-P</b> <i>printlevel</i>] [&#x00A0;
  <b>-I&#x00A0;</b><i>iface&#x00A0;</i><b>-t&#x00A0;</b><i>type&#x00A0;</i><b>-p&#x00A0;</b><i>ip:port</i>
  [<b>-l</b>] ] | [ [<b>-p</b> <i>ip:port</i>] [<b>-l</b>|<b>-D</b>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m node</b> [<b>-hV</b>] [<b>-d</b> <i>debug_level</i>]
  [<b>-P</b> <i>printlevel</i>] [<b>-L</b> <i>all,manual,automatic</i>]
  [<b>-U</b> <i>all,manual,automatic</i>] [<b>-S</b>] [ [<b>-T</b>
  <i>targetname&#x00A0;</i><b>-p&#x00A0;</b><i>ip:port&#x00A0;</i><b>-I&#x00A0;</b><i>iface</i>
  ] [<b>-l</b>|<b>-u</b>|<b>-R</b>|<b>-s</b>] ] [ [<b>-o</b> <i>operation</i>]
  [<b>-n</b> <i>name</i>] [<b>-v</b> <i>value</i>] [<b>-p</b> <i>ip:port</i>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m session</b> [<b>-d</b> <i>debug_level</i>] [<b>-P</b>
  <i>printlevel</i>] [ <b>-r</b> <i>sessionid</i>|<i>sysfsdir</i> [<b>-R</b>]
  [<b>-u</b>|<b>-s</b>|<b>-o</b> <i>new</i>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m iface</b> [<b>-hV</b>] [<b>-d</b> <i>debug_level</i>]
  [<b>-P</b> <i>printlevel</i>] [ <b>-I&#x00A0;</b><i>ifacename</i> |
  <b>-H&#x00A0;</b><i>hostno|MAC</i> ] [ [<b>-o</b> <i>operation</i>] [<b>-n</b>
  <i>name</i>] [<b>-v</b> <i>value</i>] ] [ <b>-C&#x00A0;</b><i>ping</i>
  [<b>-a</b> <i>ip</i>] [<b>-b</b> <i>packetsize</i>] [<b>-c</b> <i>count</i>]
  [<b>-i</b> <i>interval</i>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m fw</b> [<b>-d</b> <i>debug_level</i>] [<b>-l</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-m host</b> [<b>-P</b> <i>printlevel</i>] [<b>-H</b>
  <i>hostno|MAC</i>] [ [&#x00A0;<b>-C</b> <i>chap</i> [<b>-x</b>
  <i>chap_tbl_idx</i>] ] | [&#x00A0;<b>-C</b> <i>flashnode</i> [<b>-A</b>
  <i>portal_type</i>] [<b>-x</b> <i>flashnode_idx</i>] ] | [&#x00A0;<b>-C</b>
  <i>stats</i>&#x00A0;] ] [ [<b>-o</b> <i>operation</i>] [<b>-n</b> <i>name</i>]
  [<b>-v</b> <i>value</i>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>iscsiadm</b> <b>-k priority</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The iscsiadm utility is a command-line tool allowing discovery and login to
  iSCSI targets, as well as access and management of the open-iscsi database.
<div style="height: 1.00em;">&#x00A0;</div>
Open-iscsi does not use the term node as defined by the iSCSI RFC, where a node
  is a single iSCSI initiator or target. Open-iscsi uses the term node to refer
  to a portal on a target.
<div style="height: 1.00em;">&#x00A0;</div>
For session mode, a session id (sid) is used. The sid of a session can be found
  by running iscsiadm -m session -P 1. The session id and sysfs path are not
  currently persistent and is partially determined by when the session is setup.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Note that many of the node and discovery operations require that the iSCSI
  daemon (iscsid) be running.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>, <b>--ip=</b><i>ipaddr</i><b></b></dt>
  <dd class="It-tag"><i>ipaddr</i> can be IPv4 or IPv6.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only valid for ping submode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b>, <b>--portal_type=</b><i>[ipv4|ipv6]</i></dt>
  <dd class="It-tag">Specify the portal type for the new flash node entry to be
      created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for flashnode submode of host
      mode and only with <i>new</i> operation.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>,
    <b>--packetsize=</b><i>packetsize</i><b></b></dt>
  <dd class="It-tag">Specify the ping <i>packetsize</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only valid for ping submode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--count=</b><i>count</i><b></b></dt>
  <dd class="It-tag"><i>count</i> specify number of ping iterations.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only valid for ping submode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b>, <b>--submode=</b><i>op</i><b></b></dt>
  <dd class="It-tag">Specify the submode for mode. op must be name of submode.
    <div style="height: 1.00em;">&#x00A0;</div>
    Currently iscsiadm support ping as submode for iface. For example,
    <div style="height: 1.00em;">&#x00A0;</div>
    iscsiadm -m iface -I ifacename -C ping -a ipaddr -b packetsize -c count -i
      interval
    <div style="height: 1.00em;">&#x00A0;</div>
    For host, it supports chap , flashnode and stats as submodes. For example,
    <div style="height: 1.00em;">&#x00A0;</div>
    iscsiadm -m host -H hostno -C chap -x chap_tbl_idx -o operation
    <div style="height: 1.00em;">&#x00A0;</div>
    iscsiadm -m host -H hostno -C flashnode -x flashnode_idx -o operation
    <div style="height: 1.00em;">&#x00A0;</div>
    iscsiadm -m host -H hostno -C stats
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--debug=</b><i>debug_level</i><b></b></dt>
  <dd class="It-tag">print debugging information. Valid values for debug_level
      are 0 to 8.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">display help text and exit
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b>, <b>--host=</b><i>[hostno|MAC]</i></dt>
  <dd class="It-tag">The host agrument specifies the SCSI host to use for the
      operation. It can be the scsi host number assigned to the host by the
      kernel's scsi layer, or the MAC address of a scsi host.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--interval=</b><i>interval</i><b></b></dt>
  <dd class="It-tag"><i>interval</i> specify delay between two ping iterations.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only valid for ping submode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b>, <b>--interface=</b><i>[iface]</i></dt>
  <dd class="It-tag">The interface argument specifies the iSCSI interface to use
      for the operation. iSCSI interfaces (iface) are defined in
      /var/lib/iscsi/ifaces. For hardware iSCSI (qla4xxx) the iface config must
      have the hardware address (iface.hwaddress = port's MAC address) and the
      driver/transport_name (iface.transport_name). The iface's name is then the
      filename of the iface config. For software iSCSI, the iface config must
      have either the hardware address (iface.hwaddress), or the network layer's
      interface name (iface.net_ifacename), and it must have the
      driver/transport_name
    <div style="height: 1.00em;">&#x00A0;</div>
    The available drivers/iscsi_transports are tcp (software iSCSI over TCP/IP),
      iser (software iSCSI over infinniband), or qla4xxx (Qlogic 4XXXX HBAs).
      The hwaddress is the MAC address or for software iSCSI it may be the
      special value &quot;default&quot; which directs the initiator to not bind
      the session to a specific hardware resource and instead allow the network
      or infinniband layer to decide what to do. There is no need to create a
      iface config with the default behavior. If you do not specify a iface,
      then the default behavior is used.
    <div style="height: 1.00em;">&#x00A0;</div>
    As mentioned above there is a special iface name default. There are three
      others -- cxgb3i, bnx2i and iser, which does not bind the session to a
      specific card, but will bind the session to the cxgb3i, bnx2i or iser
      transport. These are experimental and the use is not supported as a stable
      interface yet.
    <div style="height: 1.00em;">&#x00A0;</div>
    In discovery mode multiple interfaces can be specified by passing in
      multiple -I/--interface instances. For example,
    <div style="height: 1.00em;">&#x00A0;</div>
    &quot;iscsiadm -m discoverydb -t st -p ip:port -I iface0 -I iface2
      --discover&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Will direct iscsiadm to setup the node db to create records which will
      create sessions though the two intefaces passed in.
    <div style="height: 1.00em;">&#x00A0;</div>
    In node mode, only a single interface is supported in each call to
    iscsiadm.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is valid for discovery, node and iface mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b>, <b>--killiscsid=</b><i>[priority]</i></dt>
  <dd class="It-tag">Currently priority must be zero. This will immediately stop
      all iscsid operations and shutdown iscsid. It does not logout any
      sessions. Running this command is the same as doing &quot;killall
      iscsid&quot;. Neither should normally not be used, because if iscsid is
      doing error recovery or if there is an error while iscsid is not running,
      the system may not be able to recover. This command and iscsid's SIGTERM
      handling are experimental.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--discover</b></dt>
  <dd class="It-tag">Discover targets using the discovery record with the
      <i>recid</i> matching the the discovery type and portal passed in. If
      there is no matching record, it will be created using the iscsid.conf
      discovery settings. This must be passed in <i>discoverydb</i> mode to
      instruct iscsiadm to perform discovery.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for SendTargets discovery mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--login</b></dt>
  <dd class="It-tag">For node and fw mode, login to a specified record. For
      discovery mode, login to all discovered targets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for discovery and node modes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b>,
    <b>--loginall==</b><i>[all|manual|automatic]</i></dt>
  <dd class="It-tag">For node mode, login all sessions with the node or conn
      startup values passed in or all running sesssion, except ones marked
      onboot, if all is passed in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for node mode (it is valid but
      not functional for session mode).
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m, --mode </b><i>op</i></dt>
  <dd class="It-tag">specify the mode. <i>op</i> must be one of
      <i>discovery</i>, <i>discoverydb</i>, <i>node</i>, <i>fw</i>, <i>host</i>
      <i>iface</i> or <i>session</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If no other options are specified: for <i>discovery</i>,
      <i>discoverydb</i> and <i>node</i>, all of their respective records are
      displayed; for <i>session</i>, all active sessions and connections are
      displayed; for <i>fw</i>, all boot firmware values are displayed; for
      <i>host</i>, all iSCSI hosts are displayed; and for <i>iface</i>, all
      ifaces setup in /var/lib/iscsi/ifaces are displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b>, <b>--name=</b><i>name</i></dt>
  <dd class="It-tag">In node mode, specify a field <i>name</i> in a record. In
      flashnode submode of host mode, specify name of the flash node parameter.
    <div style="height: 1.00em;">&#x00A0;</div>
    For use with the <i>update</i> operator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--op=</b><i>op</i></dt>
  <dd class="It-tag">Specifies a database operator <i>op</i>. <i>op</i> must be
      one of <i>new</i>, <i>delete</i>, <i>update</i>, <i>show</i> or
      <i>nonpersistent</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">For iface mode, <i>apply</i> and <i>applyall</i> are also
      applicable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">For flashnode submode of host mode, <i>login</i> and
      <i>logout</i> are also applicable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is valid for all modes except fw. Delete should
      not be used on a running session. If it is iscsiadm will stop the session
      and then delete the record.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>new</i> creates a new database record for a given
      object. In node mode, the <i>recid</i> is the target name and portal
      (IP:port). In iface mode, the <i>recid</i> is the iface name. In discovery
      mode, the <i>recid</i> is the portal and discovery type.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">In session mode, the <i>new</i> operation logs in a new
      session using the same node database and iface information as the
      specified session.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">In discovery mode, if the <i>recid</i> and new operation is
      passed in, but the <i>--discover</i> argument is not, then iscsiadm will
      only create a discovery record (it will not perform discovery). If the
      <i>--discover</i> argument is passed in with the portal and discovery
      type, then iscsiadm will create the discovery record if needed, and it
      will create records for portals returned by the target that do not yet
      have a node DB record.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>delete</i> deletes a specified <i>recid</i>. In
      discovery node, if iscsiadm is performing discovery it will delete records
      for portals that are no longer returned.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>update</i> will update the <i>recid</i> with <i>name</i>
      to the specified <i>value</i>. In discovery node, if iscsiadm is
      performing discovery the <i>recid</i>, <i>name</i> and <i>value</i>
      arguments are not needed. The update operation will operate on the portals
      returned by the target, and will update the node records with info from
      the config file and command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>show</i> is the default behaviour for node, discovery
      and iface mode. It is also used when there are no commands passed into
      session mode and a running sid is passed in. <i>name</i> and <i>value</i>
      are currently ignored when used with <i>show</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>nonpersistent</i> instructs iscsiadm to not manipulate
      the node DB.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>apply</i> will cause the network settings to take effect
      on the specified iface.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>applyall</i> will cause the network settings to take
      effect on all the ifaces whose MAC address or host number matches that of
      the specific host.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>login</i> will log into the specified flash node entry.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>logout</i> does the logout from the given flash node
      entry.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>, <b>--portal=</b><i>ip[:port]</i></dt>
  <dd class="It-tag">Use target portal with ip-address <i>ip</i> and
      <i>port</i>. If port is not passed in the default <i>port</i> value is
      3260.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">IPv6 addresses can bs specified as [ddd.ddd.ddd.ddd]:port
      or ddd.ddd.ddd.ddd.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Hostnames can also be used for the ip argument.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for discovery, or for node
      operations with the <i>new</i> operator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This should be used along with --target in node mode, to
      specify what the open-iscsi docs refer to as a node or node record. Note:
      open-iscsi's use of the word node, does not match the iSCSI RFC's iSCSI
      Node term.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>, <b>--print=</b><i>printlevel</i></dt>
  <dd class="It-tag">If in node mode print nodes in tree format. If in session
      mode print sessions in tree format. If in discovery mode print the nodes
      in tree format.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b>, <b>--targetname=</b><i>targetname</i></dt>
  <dd class="It-tag">Use target <i>targetname</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This should be used along with --portal in node mode, to
      specify what the open-iscsi docs refer to as a node or node record. Note:
      open-iscsi's use of the word node, does not match the iSCSI RFC's iSCSI
      Node term.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--sid=</b><i>sid | sysfsdir</i></dt>
  <dd class="It-tag">Use session ID <i>sid</i>. The sid of a session can be
      found from running iscsiadm in session mode with the --info argument.
    <div style="height: 1.00em;">&#x00A0;</div>
    Instead of sid, a sysfs path containing the session can be used. For example
      using one of the following:
      /sys/devices/platform/hostH/sessionS/targetH:B:I/H:B:I:L,
      /sys/devices/platform/hostH/sessionS/targetH:B:I, or
      /sys/devices/platform/hostH/sessionS, for the sysfsdir argument would
      result in the session with sid S to be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>sid | sysfsdir</i> is only required for session mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b>, <b>--rescan</b></dt>
  <dd class="It-tag">In session mode, if sid is also passed in rescan the
      session. If no sid has been passed in rescan all running sessions.
    <div style="height: 1.00em;">&#x00A0;</div>
    In node mode, rescan a session running through the target, portal, iface
      tuple passed in.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--stats</b></dt>
  <dd class="It-tag">Display session statistics. This option when used with host
      mode, displays host statistics.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>, <b>--show</b></dt>
  <dd class="It-tag">When displaying records, do not hide masked values, such as
      the CHAP secret (password).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for node and session mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--type=</b><i>type</i></dt>
  <dd class="It-tag"><i>type</i> must be <i>sendtargets</i> (or abbreviated as
      <i>st</i>), <i>slp</i>, <i>isns</i> or <i>fw</i>. Currently only
      sendtargets, fw, and iSNS is supported, see the DISCOVERY TYPES
    section.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for discovery mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b>, <b>--logout</b></dt>
  <dd class="It-tag">logout for a specified record.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for node and session mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b>,
    <b>--logoutall==</b><i>[all,manual,automatic]</i></dt>
  <dd class="It-tag">logout all sessions with the node or conn startup values
      passed in or all running sesssion, except ones marked onboot, if all is
      passed in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for node mode (it is valid but
      not functional for session mode).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--value=</b><i>value</i></dt>
  <dd class="It-tag">Specify a <i>value</i> for use with the <i>update</i>
      operator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for node mode and flashnode
      submode of host mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">display version and exit
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b>, <b>--index=</b><i>index</i></dt>
  <dd class="It-tag">Specify the <i>index</i> of the entity to operate on.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is only valid for chap and flashnode submodes
      of host mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="DISCOVERY_TYPES"><a class="selflink" href="#DISCOVERY_TYPES">DISCOVERY
  TYPES</a></h1>
iSCSI defines 3 discovery types: SendTargets, SLP, and iSNS.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SendTargets</b></dt>
  <dd class="It-tag">A native iSCSI protocol which allows each iSCSI target to
      send a list of available targets to the initiator.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SLP</b></dt>
  <dd class="It-tag">Optionally an iSCSI target can use the Service Location
      Protocol (SLP) to announce the available targets. The initiator can either
      implement SLP queries directly or can use a separate tool to acquire the
      information about available targets.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>iSNS</b></dt>
  <dd class="It-tag">iSNS (Internet Storage Name Service) records information
      about storage volumes within a larger network. To utilize iSNS, pass the
      address and optionally the port of the iSNS server to do discovery to.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fw</b></dt>
  <dd class="It-tag">Several NICs and systems contain a mini iSCSI initiator
      which can be used for boot. To get the values used for boot the fw option
      can be used. Doing fw discovery, does not store persistent records in the
      node or discovery DB, because the values are stored in the system's or
      NIC's resource.
    <div style="height: 1.00em;">&#x00A0;</div>
    Performing fw discovery will print the portals, like with other discovery
      methods. To see other settings like CHAP values and initiator settings,
      like you would in node mode, run &quot;iscsiadm -m fw&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    fw support in open-iscsi is experimental. The settings and iscsiadm syntax
      and output format may change.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
iscsiadm supports the <b>iSNS (isns)</b> or <b>SendTargets (st)</b> discovery
  type. An SLP implementation is under development.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
On success 0 is returned. On error one of the return codes below will be
  returned.
<div style="height: 1.00em;">&#x00A0;</div>
Commands that operation on multiple objects (sessions, records, etc),
  iscsiadm/iscsistart will return the first error that is encountered.
  iscsiadm/iscsistart will attempt to execute the operation on the objects it
  can. If no objects are found ISCSI_ERR_NO_OBJS_FOUND is returned.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">ISCSI_SUCCESS - command executed successfully.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">ISCSI_ERR - generic error code.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">ISCSI_ERR_SESS_NOT_FOUND - session could not be found.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>3</b></dt>
  <dd class="It-tag">ISCSI_ERR_NOMEM - could not allocate resource for
      operation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>4</b></dt>
  <dd class="It-tag">ISCSI_ERR_TRANS - connect problem caused operation to fail.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>5</b></dt>
  <dd class="It-tag">ISCSI_ERR_LOGIN - generic iSCSI login failure.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>6</b></dt>
  <dd class="It-tag">ISCSI_ERR_IDBM - error accessing/managing iSCSI DB.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>7</b></dt>
  <dd class="It-tag">ISCSI_ERR_INVAL - invalid argument.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>8</b></dt>
  <dd class="It-tag">ISCSI_ERR_TRANS_TIMEOUT - connection timer exired while
      trying to connect.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>9</b></dt>
  <dd class="It-tag">ISCSI_ERR_INTERNAL - generic internal iscsid/kernel
      failure.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>10</b></dt>
  <dd class="It-tag">ISCSI_ERR_LOGOUT - iSCSI logout failed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>11</b></dt>
  <dd class="It-tag">ISCSI_ERR_PDU_TIMEOUT - iSCSI PDU timedout.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>12</b></dt>
  <dd class="It-tag">ISCSI_ERR_TRANS_NOT_FOUND - iSCSI transport module not
      loaded in kernel or iscsid.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>13</b></dt>
  <dd class="It-tag">ISCSI_ERR_ACCESS - did not have proper OS permissions to
      access iscsid or execute iscsiadm command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>14</b></dt>
  <dd class="It-tag">ISCSI_ERR_TRANS_CAPS - transport module did not support
      operation.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>15</b></dt>
  <dd class="It-tag">ISCSI_ERR_SESS_EXISTS - session is logged in.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>16</b></dt>
  <dd class="It-tag">ISCSI_ERR_INVALID_MGMT_REQ - invalid IPC MGMT request.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>17</b></dt>
  <dd class="It-tag">ISCSI_ERR_ISNS_UNAVAILABLE - iSNS service is not supported.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>18</b></dt>
  <dd class="It-tag">ISCSI_ERR_ISCSID_COMM_ERR - a read/write to iscsid failed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>19</b></dt>
  <dd class="It-tag">ISCSI_ERR_FATAL_LOGIN - fatal iSCSI login error.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>20</b></dt>
  <dd class="It-tag">ISCSI_ERR_ISCSID_NOTCONN - could not connect to iscsid.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>21</b></dt>
  <dd class="It-tag">ISCSI_ERR_NO_OBJS_FOUND - no
      records/targets/sessions/portals found to execute operation on.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>22</b></dt>
  <dd class="It-tag">ISCSI_ERR_SYSFS_LOOKUP - could not lookup object in sysfs.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>23</b></dt>
  <dd class="It-tag">ISCSI_ERR_HOST_NOT_FOUND - could not lookup host.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>24</b></dt>
  <dd class="It-tag">ISCSI_ERR_LOGIN_AUTH_FAILED - login failed due to
      authorization failure.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>25</b></dt>
  <dd class="It-tag">ISCSI_ERR_ISNS_QUERY - iSNS query failure.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>26</b></dt>
  <dd class="It-tag">ISCSI_ERR_ISNS_REG_FAILED - iSNS
      registration/deregistration failed.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
Discover targets at a given IP address:
<div class="Pp"></div>
	iscsiadm --mode discoverydb --type sendtargets --portal 192.168.1.10 --discover
<div class="Pp"></div>
Login, must use a node record id found by the discovery:
<div class="Pp"></div>
	iscsiadm --mode node --targetname iqn.2001-05.com.doe:test --portal 192.168.1.1:3260 --login
<div class="Pp"></div>
Logout:
<div class="Pp"></div>
	iscsiadm --mode node --targetname iqn.2001-05.com.doe:test --portal 192.168.1.1:3260 --logout
<div class="Pp"></div>
List node records:
<div class="Pp"></div>
	iscsiadm --mode node
<div class="Pp"></div>
<div class="Pp"></div>
Display all data for a given node record:
<div class="Pp"></div>
	iscsiadm --mode node --targetname iqn.2001-05.com.doe:test --portal 192.168.1.1:3260
<div class="Pp"></div>
</pre>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/iscsi/iscsid.conf</dt>
  <dd class="It-tag">The configuration file read by <b>iscsid</b> and
      <b>iscsiadm</b> on startup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/iscsi/initiatorname.iscsi</dt>
  <dd class="It-tag">The file containing the iSCSI InitiatorName and
      InitiatorAlias read by <b>iscsid</b> and <b>iscsiadm</b> on startup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/var/lib/iscsi/nodes/</dt>
  <dd class="It-tag">This directory contains the nodes with their targets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/var/lib/iscsi/send_targets</dt>
  <dd class="It-tag">This directory contains the portals.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>iscsid</b>(8)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Open-iSCSI project &lt;http://www.open-iscsi.org/&gt;
<div>&#x00A0;</div>
Alex Aizman &lt;itn780@yahoo.com&gt;
<div>&#x00A0;</div>
Dmitry Yusupov &lt;dmitry_yus@yahoo.com&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">Sep 2006</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
