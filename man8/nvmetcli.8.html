<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>NVMETCLI(8) NVMETCLI(8)</p>

<p style="margin-top: 1em">NAME <br>
nvmetcli - Configure NVMe-over-Fabrics Target.</p>

<p style="margin-top: 1em">USAGE <br>
nvmetcli <br>
nvmetcli clear <br>
nvmetcli restore [filename.json]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
nvmetcli is a program used for viewing, editing, saving, and
starting a Linux kernel NVMe Target, used for an
NVMe-over-Fabrics network configuration. It allows an
administrator <br>
to export a storage resource (such as NVMe devices, files,
and volumes) to a local block device and expose them to
remote systems based on the NVMe-over-Fabrics specification
<br>
from http://www.nvmexpress.org.</p>

<p style="margin-top: 1em">nvmetcli is run as root and has
two modes:</p>

<p style="margin-top: 1em">1. An interactive configuration
shell</p>

<p style="margin-top: 1em">2. Command-line mode which uses
an argument</p>

<p style="margin-top: 1em">BACKGROUND <br>
The term NQN used throughout this man page is the NVMe
Qualified Name format which an NVMe endpoint (device,
subsystem, etc) must follow to guarantee a unique name under
the NVMe <br>
standard. Any name in a network system setup can be used,
but if it does not follow the NQN format, it may not be
unique on an NVMe-over-Fabrics network.</p>

<p style="margin-top: 1em">Note that some of the fields set
for an NVMe Target port under interactive mode are defined
in the &quot;Discovery Log Page&quot; section of
NVMe-over-Fabrics specification. Each NVMe <br>
Target has a discovery controller mechanism that an NVMe
Host can use to determine the NVM subsystems it can access.
nvmetcli can be used to add a new record to the discovery
<br>
controller upon each new subsystem entry and port entry that
the newly created subsystem entry binds to (see OPTIONS and
EXAMPLES sections). Each NVMe Host only gets to see the <br>
discovery entries defined in /subsystems/[NQN
NAME]/allowed_hosts and the IP port it is connected to the
NVMe Target. An NVMe Host can retrieve these discovery logs
via the <br>
nvme-cli tool (https://github.com/linux-nvme/nvme-cli).</p>

<p style="margin-top: 1em">OPTIONS <br>
Interactive Configuration Shell</p>

<p style="margin-top: 1em">To start the interactive
configuration shell, type nvmetcli on the command-line.
nvmetcli interacts with the Linux kernel NVMe Target
configfs subsystem starting at base nvmetcli <br>
directories /port, /subsystem, and /host. Configuration
changes entered by the administrator are made immediately to
the kernel target configuration. The following commands can
<br>
be used while in the interactive configuration shell
mode:</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;cd &acirc; Allows to move around the tree. &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;ls &acirc; Lists contents of current tree node.
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;create [NQN name]/[#] &acirc; Create a new object
using the specified name or number. If a &acirc; <br>
&acirc; &acirc; [NQN name]/[#] is not specified, a random
entry will be used. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;delete [NQN name]/[#] &acirc; Delete an object with
the specified name or number. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;set attr allow_any_host=[0/1] &acirc; Used under
/subsystems/[NQN name] to specify if any NVMe Host &acirc;
<br>
&acirc; &acirc; can connect to the subsystem. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;set device path=[device path] &acirc; Used under
/subsystems/[NQN name]/namespaces to set the &acirc; <br>
&acirc; &acirc; (storage) device to be used. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;set device nguid=[string] &acirc; Used under
/subsystems/[NQN name]/namespaces to set the unique &acirc;
<br>
&acirc; &acirc; id of the device to the defined namespace.
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;enable/disable &acirc; Used under /subsystems/[NQN
name]/namespaces to enable and &acirc; <br>
&acirc; &acirc; disable the namespace. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;set addr [discovery log page field]=[string] &acirc;
Used under /ports/[#] to create a port which access is
&acirc; <br>
&acirc; &acirc; allowed. See EXAMPLES for more information.
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;saveconfig [filename.json] &acirc; Save the NVMe
Target configuration in .json format. Without &acirc; <br>
&acirc; &acirc; specifying the filename this will save as
&acirc; <br>
&acirc; &acirc; /etc/nvmet/config.json. This file is in JSON
format and can be &acirc; <br>
&acirc; &acirc; edited directly using a prefered file
editor. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;exit &acirc; Quits interactive configuration shell
mode. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;</p>

<p style="margin-top: 1em">Command Line Mode</p>

<p style="margin-top: 1em">Typing nvmetcli [cmd] on the
command-line will execute a command and not enter the
interactive configuration shell.</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;restore [filename.json] &acirc; Loads a saved NVMe
Target configuration. Without specifying &acirc; <br>
&acirc; &acirc; the filename this will use
/etc/nvmet/config.json. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;clear &acirc; Clears a current NVMe Target
configuration. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;</p>

<p style="margin-top: 1em">EXAMPLES <br>
Make sure to run nvmetcli as root, the nvmet module is
loaded, your devices and all dependent modules are loaded,
and configfs is mounted on /sys/kernel/config using:</p>

<p style="margin-top: 1em">mount -t configs none
/sys/kernel/config</p>

<p style="margin-top: 1em">The following section walks
through a configuration example.</p>

<p style="margin-top: 1em">&Acirc;&middot; To get started
with the interactive mode and the nvmetcli command prompt,
type (in root):</p>

<p style="margin-top: 1em"># ./nvmetcli <br>
...&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Create a
subsystem. If you do not specify a name a NQN will be
generated, which is probably the best choice. We don&acirc;t
do it here as the name would be random:</p>

<p style="margin-top: 1em">&gt; cd /subsystems <br>
...&gt; create testnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; Add access for a
specific NVMe Host by it&acirc;s NQN:</p>

<p style="margin-top: 1em">...&gt; cd /hosts <br>
...&gt; create hostnqn <br>
...&gt; cd /subsystems/testnqn <br>
...&gt; set attr allow_any_host=0 <br>
...&gt; cd /subsystems/testnqn/allowed_hosts/ <br>
...&gt; create hostnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; Remove access of
a subsystem by deleting the Host NQN:</p>

<p style="margin-top: 1em">...&gt; cd
/subsystems/testnqn/allowed_hosts/ <br>
...&gt; delete hostnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; Alternatively
this allows any Host to connect to the subsystsem. Only use
this in tightly controlled environments:</p>

<p style="margin-top: 1em">...&gt; cd /subsystems/testnqn/
<br>
...&gt; set attr allow_any_host=1</p>

<p style="margin-top: 1em">&Acirc;&middot; Create a new
namespace. If you do not specify a namespace ID the fist
unused one will be used:</p>

<p style="margin-top: 1em">...&gt; cd
/subsystems/testnqn/namespaces <br>
...&gt; create 1 <br>
...&gt; cd 1 <br>
...&gt; set device path=/dev/nvme0n1 <br>
...&gt; enable</p>

<p style="margin-top: 1em">Note that in the above setup the
device_nguid attribute does not have to be set for correct
NVMe Target functionality (but to correctly match a
namespace to the exact device upon <br>
clear and restore operations, it is advised to set the
device_nguid parameter).</p>

<p style="margin-top: 1em">&Acirc;&middot; Create a
loopback port that can be used with nvme-loop module on the
same physical machine...</p>

<p style="margin-top: 1em">...&gt; cd /ports/ <br>
...&gt; create 1 <br>
...&gt; cd 1/ <br>
...&gt; set addr trtype=loop <br>
...&gt; cd subsystems/ <br>
...&gt; create testnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; or create an
RDMA (IB, RoCE, iWarp) port using IPv4 addressing. 4420 is
the IANA assigned default port for NVMe over Fabrics using
RDMA:</p>

<p style="margin-top: 1em">...&gt; cd /ports/ <br>
...&gt; create 2 <br>
...&gt; cd 2/ <br>
...&gt; set addr trtype=rdma <br>
...&gt; set addr adrfam=ipv4 <br>
...&gt; set addr traddr=192.168.6.68 <br>
...&gt; set addr trsvcid=4420 <br>
...&gt; cd subsystems/ <br>
...&gt; create testnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; or create an FC
port. traddr is the WWNN/WWPN of the FC port.</p>

<p style="margin-top: 1em">...&gt; cd /ports/ <br>
...&gt; create 3 <br>
...&gt; cd 3/ <br>
...&gt; set addr trtype=fc <br>
...&gt; set addr adrfam=fc <br>
...&gt; set addr
traddr=nn-0x1000000044001123:pn-0x2000000055001123 <br>
...&gt; set addr trsvcid=none <br>
...&gt; cd subsystems/ <br>
...&gt; create testnqn</p>

<p style="margin-top: 1em">&Acirc;&middot; Saving the NVMe
Target configuration:</p>

<p style="margin-top: 1em">./nvmetcli <br>
...&gt; saveconfig test.json</p>

<p style="margin-top: 1em">&Acirc;&middot; Loading an NVMe
Target configuration:</p>

<p style="margin-top: 1em">./nvmetcli restore test.json</p>

<p style="margin-top: 1em">&Acirc;&middot; Clearing a
current NVMe Target configuration:</p>

<p style="margin-top: 1em">./nvmetcli clear</p>

<p style="margin-top: 1em">ADDITIONAL INFORMATION <br>
nvmetcli has the ability to start and stop the NVMe Target
configuration on boot and shutdown through the systemctl
Linux utility via a .service file. nvmetcli package comes
with <br>
nvmet.service which when installed, it can automatically
restore the default, saved NVMe Target configuration from
/etc/nvmet/config.json. nvmet.service can be installed in
<br>
directories such as /lib/systemd/system.</p>

<p style="margin-top: 1em">To explicitly enable the
service, type:</p>

<p style="margin-top: 1em">systemctl enable nvmet</p>

<p style="margin-top: 1em">To explicitly disable the
service, type:</p>

<p style="margin-top: 1em">systemctl disable nvmet</p>

<p style="margin-top: 1em">See also systemctl(1).</p>

<p style="margin-top: 1em">AUTHORS <br>
This man page was written by Jay Freyensee[1]. nvmetcli was
originally written by Christoph Hellwig[2].</p>

<p style="margin-top: 1em">REPORTING BUGS &amp; DEVELOPMENT
<br>
Please send patches and bug reports to
linux-nvme@lists.infradead.org[3] for review and
acceptance.</p>

<p style="margin-top: 1em">LICENSE <br>
nvmetcli is licensed under the Apache License, Version 2.0.
Software distributed under this license is distributed on an
&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
ANY <br>
KIND, either expressed or implied.</p>

<p style="margin-top: 1em">NOTES <br>
1. Jay Freyensee <br>
mailto:james.p.freyensee@intel.com</p>

<p style="margin-top: 1em">2. Christoph Hellwig <br>
mailto:hch@infradead.org</p>

<p style="margin-top: 1em">3.
linux-nvme@lists.infradead.org <br>
mailto:linux-nvme@lists.infradead.org</p>

<p style="margin-top: 1em">05/09/2017 NVMETCLI(8)</p>
<hr>
</body>
</html>
