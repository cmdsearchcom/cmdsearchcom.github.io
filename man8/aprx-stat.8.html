<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>aprx-stat(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">aprx-stat(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">aprx-stat(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>aprx-stat</b> - statistics utility for <b>aprx</b>(8)
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>aprx-stat</b> [<b>-t</b>] [<b>-f</b><i>/var/run/aprx.state</i>]
  {<b>-S</b>|<b>-x</b>|<b>-X</b>}
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>aprx-stat</b> is a statistics utility for <b>aprx</b>(8) program.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <b>aprx-stat</b> has following runtime options:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f <i>/var/run/aprx.state</i></b></dt>
  <dd class="It-tag">Turn on verbose debugging, outputs data to STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag">SNMP data mode, current counter and gauge values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">Use UNIX <i>time_t</i> for timestamps, instead of human
      readable text format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Lattest of extended historical gauge values. This gives for
      each input interface</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">SNMP data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">last 90 of 1 minute values,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">10 of 10 minute values,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">3 of 60 minute values.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-X</b></dt>
  <dd class="It-tag">Full extended historical gauge values. This gives all the
      contents of historical value data ring-buffers.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">SNMP data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">1 minute resolution: 24 hours</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">10 minute resolution: 7 days</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">60 minute resolution: 3 months</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SNMP_DATA_OUTPUT"><a class="selflink" href="#SNMP_DATA_OUTPUT">SNMP
  DATA OUTPUT</a></h1>
For each interface feeding AX.25 packets and/or KISS frames to this program,
  there are following kind of
<pre>
SNMP  /dev/ttyUSB1   798282 11088   0  0     3
SNMP  ax0   798282 11088   0  0     7
SNMP  ax1   798282 11088   0  0     94
</pre>
<div class="Pp"></div>
where columns are:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;SNMP&quot; - keyword</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Interface (AX.25 IF name, or serial port device name)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Received byte counter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Received frame (packet) counter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Dropped</i> byte counter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Dropped</i> frame counter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Age in seconds of last update of this statistics.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXTENDED_DATA_OUTPUT"><a class="selflink" href="#EXTENDED_DATA_OUTPUT">EXTENDED
  DATA OUTPUT</a></h1>
Extended data output gives formatted historical periodic accumulates of
  interface traffic counters, and Erlang value estimates based on that.
<div class="Pp"></div>
<pre>
<div class="Pp"></div>
SNMP  /dev/ttyUSB1   816675 11332   0  0     15
<div class="Pp"></div>
1min data
2007-12-24 14:10  /dev/ttyUSB1  1m    374    6      0    0   0.047  0.000
2007-12-24 14:09  /dev/ttyUSB1  1m    377    5      0    0   0.047  0.000
2007-12-24 14:08  /dev/ttyUSB1  1m    347    5      0    0   0.043  0.000
2007-12-24 14:07  /dev/ttyUSB1  1m    140    2      0    0   0.018  0.000
&#x2022;&#x2022;&#x2022;
<div class="Pp"></div>
10min data
2007-12-24 14:10  /dev/ttyUSB1 10m   3829   55      0    0   0.048  0.000
2007-12-24 14:00  /dev/ttyUSB1 10m   2182   28      0    0   0.027  0.000
2007-12-24 13:50  /dev/ttyUSB1 10m   3205   44      0    0   0.040  0.000
2007-12-24 13:40  /dev/ttyUSB1 10m   3811   50      0    0   0.048  0.000
&#x2022;&#x2022;&#x2022;
<div class="Pp"></div>
60min data
2007-12-24 14:00  /dev/ttyUSB1 60m  22510  295      0    0   0.047  0.000
2007-12-24 13:00  /dev/ttyUSB1 60m  24886  347      0    0   0.052  0.000
&#x2022;&#x2022;&#x2022;
</pre>
<div class="Pp"></div>
The output repeats for all interfaces.
<div class="Pp"></div>
The SNMP dataset is given in the beginning, and described above. Then each
  extended output line has following fields:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Timestamp is two fields, date and time (in minute
      resolution) is in UTC.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Alternate timestamp format is UNIX <i>time_t</i> as an
      integer, counting seconds from epoch, and as single field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Interface name is same as in SNMP case.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Data qualifier tells what integration period the data is
      valid for: <i>1m</i>, <i>10m</i>, <i>60m</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Counter of received bytes on interface (including KISS
      flags etc.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Counter of received frames.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Counter of dropped bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Counter of dropped frames.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Reception <i>Erlang</i> value estimate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Dropped bytes <i>Erlang</i> value estimate.</dd>
</dl>
<h1 class="Sh" title="Sh" id="TODO"><a class="selflink" href="#TODO">TODO</a></h1>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>aprx</b>(8)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILE"><a class="selflink" href="#CONFIGURATION_FILE">CONFIGURATION
  FILE</a></h1>
There is no configuration file.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NOTES:_ERLANG"><a class="selflink" href="#NOTES:_ERLANG">NOTES:
  ERLANG</a></h1>
The <i>Erlang</i> is telecom measurement of channel occupancy, and in this
  application sense it does tell how much traffic there is on the radio channel.
<div class="Pp"></div>
Most radio transmitters are not aware of all transmitters on channel, and thus
  there can happen a collision causing loss of both messages. The higher the
  channel activity, the more likely that collision is. For further details,
  refer to statistical mathematics books, or perhaps on Wikipedia.
<div class="Pp"></div>
In order to measure channel activity, the <b>aprx</b> program suite has these
  built-in statistics counter and summary estimators.
<div class="Pp"></div>
The <i>Erlag</i> value that the estimators present are likely somewhat
  <i>underestimating</i> the true channel occupancy simply because it calculates
  estimate of channel bit transmit rate, and thus a per-minute character
  capacity. It does not know true frequency of bit-stuffing events of the HDLC
  framing, nor each transmitter pre- and port frame PTT times. The transmitters
  need to stabilize their transmit oscillators in many cases, which may take up
  to around 500 ms! The counters are not aware of this preamble-, nor
  postamble-times.
<div class="Pp"></div>
The HDLC bit stuffing ratio is guessed to be 8.2 bits for each 8 bits of
  payload.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NOTES:_SUID_ROOT"><a class="selflink" href="#NOTES:_SUID_ROOT">NOTES:
  SUID ROOT</a></h1>
This program needs probably to be run as <i>suid-root</i> ! It is considered
  safe to do so, as this checks that the <b>-f</b> parameter file is of correct
  &quot;magic value&quot;, and will not try to create it if it does not exist,
  nor modify that file under any circumstances, nor reveal content of
  &quot;wrong magic kind&quot; of file.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This little piece was written by <i>Matti Aarnio, OH2MQK</i> during a dark and
  rainy fall and winter of 2007-2008 after a number of discussions grumbling
  about current breed of available software for APRS iGate use in Linux (or of
  any UNIX) platforms. Fall and winter 2009-2010 saw appearance of digipeater
  functionality.
<div class="Pp"></div>
Principal contributors and test users include: <i>Pentti Gronlund, OH3BK</i>,
  <i>Reijo Hakala, OH1GWK</i>. Debian packaging by <i>Kimmo Jukarinen,
  OH3GNU</i>.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2.9.0 - 2017 January 24</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
