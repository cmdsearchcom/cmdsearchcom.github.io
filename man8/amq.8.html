<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:08:28 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>AMQ(8) System Manager&rsquo;s Manual AMQ(8)</p>

<p style="margin-top: 1em">NAME <br>
amq - automounter query tool</p>

<p style="margin-top: 1em">SYNOPSIS <br>
amq [ -fmpqsvwHTU ] [ -h hostname ] [ -l log_file ] [ -x
log_options ] [ -D debug_options ] [ -P program_number ] [[
-u ] directory ... ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Amq provides a simple way of determining the current state
of amd program. Communication is by RPC. Three modes of
operation are supported by the current protocol. By default
<br>
a list of mount points and auto-mounted filesystems is
output. An alternative host can be specified using the -h
option.</p>

<p style="margin-top: 1em">If directory names are given, as
output by default, then per-filesystem information is
displayed.</p>

<p style="margin-top: 1em">OPTIONS <br>
-f Ask the automounter to flush the internal caches and
reload all the maps.</p>

<p style="margin-top: 1em">-h hostname <br>
Specify an alternate host to query. By default the local
host is used. In an HP-UX cluster, the root server is
queried by default, since that is the system on which the
<br>
automounter is normally run.</p>

<p style="margin-top: 1em">-l log_file <br>
Tell amd to use log_file as the log file name. For security
reasons, this must be the same log file which amd used when
started. This option is therefore only useful to <br>
refresh amd&rsquo;s open file handle on the log file, so
that it can be rotated and compressed via daily cron
jobs.</p>

<p style="margin-top: 1em">-m Ask the automounter to
provide a list of mounted filesystems, including the number
of references to each filesystem and any error which
occurred while mounting.</p>

<p style="margin-top: 1em">-p Return the process ID of the
remote or locally running amd. Useful when you need to send
a signal to the local amd process, and would rather not have
to search through <br>
the process table. This option is used in the ctl-amd
script.</p>

<p style="margin-top: 1em">-q Suppress error messages
produced when attempting synchronous unmounts with the -u
option.</p>

<p style="margin-top: 1em">-s Ask the automounter to
provide system-wide mount statistics.</p>

<p style="margin-top: 1em">-u Ask the automounter to
unmount the filesystems named in directory instead of
providing information about them. Unmounts are requested,
not forced. They merely cause the <br>
mounted filesystem to timeout, which will be picked up by
amd&rsquo;s main scheduler thus causing the normal timeout
action to be taken. If the -u option is repeated, amq will
<br>
attempt to unmount the file system synchronously by waiting
until the timeout action is taken and returning an error if
the unmount fails. Any error messages produced may <br>
be suppressed with the -q option.</p>

<p style="margin-top: 1em">-v Ask the automounter for its
version information. This is a subset of the information
output by amd&rsquo;s -v option.</p>

<p style="margin-top: 1em">-w Translate a full pathname as
returned by getcwd(3) into a short Amd pathname that goes
through its mount points. This option requires that Amd is
running.</p>

<p style="margin-top: 1em">-x log_options <br>
Ask the automounter to use the logging options specified in
log_options from now on. Note that the &quot;fatal&quot; and
&quot;error&quot; options cannot be turned off.</p>

<p style="margin-top: 1em">-D debug_options <br>
Ask the automounter to use the debugging options specified
in debug_options from now on.</p>

<p style="margin-top: 1em">-H Display short usage
message.</p>

<p style="margin-top: 1em">-P program_number <br>
Contact an alternate running amd that had registered itself
on a different RPC program_number and apply all other
operations to that instance of the automounter. This is <br>
useful when you run multiple copies of amd, and need to
manage each one separately. If not specified, amq will use
the default program number for amd, 300019. For secu&acirc;
<br>
rity reasons, the only alternate program numbers amd can use
range from 300019 to 300029, inclusive.</p>

<p style="margin-top: 1em">-T Contact amd using the TCP
transport only. Normally amq will try TCP, and if that
failed, will try UDP.</p>

<p style="margin-top: 1em">-U Contact amd using UDP
(connectionless) transport only. Normally amq will try TCP,
and if that failed, will try UDP.</p>

<p style="margin-top: 1em">FILES <br>
amq.x RPC protocol description.</p>

<p style="margin-top: 1em">CAVEATS <br>
Amq uses a Sun registered RPC program number (300019
decimal) which may not be in the /etc/rpc database.</p>

<p style="margin-top: 1em">If the TCP wrappers library is
available, and the use_tcpwrappers global amd.conf option is
set to &lsquo;&lsquo;yes&rsquo;&rsquo;, then amd will verify
that the host running amq is authorized to con&acirc; <br>
nect. The amd service name must used in the /etc/hosts.allow
and /etc/hosts.deny files. For example, to allow only
localhost to connect to amd, add this line to <br>
/etc/hosts.allow:</p>

<p style="margin-top: 1em">amd: localhost</p>

<p style="margin-top: 1em">and this line to
/etc/hosts.deny:</p>

<p style="margin-top: 1em">amd: ALL</p>

<p style="margin-top: 1em">SEE ALSO <br>
amd(8), amd.conf(5), hosts_access(5).</p>


<p style="margin-top: 1em">&lsquo;&lsquo;am-utils&rsquo;&rsquo;
info(1) entry.</p>

<p style="margin-top: 1em">Linux NFS and Automounter
Administration by Erez Zadok, ISBN 0-7821-2739-8, (Sybex,
2001).</p>

<p style="margin-top: 1em">http://www.am-utils.org</p>

<p style="margin-top: 1em">Amd - The 4.4 BSD
Automounter</p>

<p style="margin-top: 1em">AUTHORS <br>
Jan-Simon Pendry &lt;jsp@doc.ic.ac.uk&gt;, Department of
Computing, Imperial College, London, UK.</p>

<p style="margin-top: 1em">Erez Zadok
&lt;ezk@cs.sunysb.edu&gt;, Computer Science Department,
Stony Brook University, Stony Brook, New York, USA.</p>

<p style="margin-top: 1em">Other authors and contributors
to am-utils are listed in the AUTHORS file distributed with
am-utils.</p>

<p style="margin-top: 1em">25 April 1989 AMQ(8)</p>
<hr>
</body>
</html>
