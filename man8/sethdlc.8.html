<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SETHDLC(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SETHDLC(8)</td>
    <td class="head-vol">Linux Programmer's Manual</td>
    <td class="head-rtitle">SETHDLC(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
sethdlc - get/set Linux HDLC packet radio modem driver port information
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>sethdlc</b> <b>[ -bdhs ]</b> <b>[-i device]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>sethdlc [-i device] -c</b> cal
<div style="height: 1.00em;">&#x00A0;</div>
<b>sethdlc&#x00A0;-p</b> <b>[-i&#x00A0;device]</b>
  <b>[&#x00A0;mode&#x00A0;</b>mode<b>&#x00A0;]</b>
  <b>[&#x00A0;io&#x00A0;</b>iobase<b>&#x00A0;]</b>
  <b>[&#x00A0;irq&#x00A0;</b>irq<b>&#x00A0;]</b>
  <b>[&#x00A0;dma&#x00A0;</b>dma<b>&#x00A0;]</b>
  <b>[&#x00A0;dma2&#x00A0;</b>dma2<b>&#x00A0;]</b>
  <b>[&#x00A0;serio&#x00A0;</b>seriobase<b>&#x00A0;]</b>
  <b>[&#x00A0;pario&#x00A0;</b>pariobase<b>&#x00A0;]</b>
  <b>[&#x00A0;midiio&#x00A0;</b>midiiobase<b>&#x00A0;]</b>
  <b>[&#x00A0;options&#x00A0;</b>options<b>&#x00A0;]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>sethdlc&#x00A0;-a</b> <b>[-i&#x00A0;device]</b>
  <b>[&#x00A0;txd&#x00A0;</b>txdelay<b>&#x00A0;]</b>
  <b>[&#x00A0;txtail&#x00A0;</b>txtail<b>&#x00A0;]</b>
  <b>[&#x00A0;slot&#x00A0;</b>slottime<b>&#x00A0;]</b>
  <b>[&#x00A0;ppersist&#x00A0;</b>ppersistence<b>&#x00A0;]</b>
  <b>[&#x00A0;full&#x00A0;]</b> <b>[&#x00A0;half&#x00A0;]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>sethdlc</b> is a program designed to set and/or report the configuration
  information associated with a soundcard radio modem port. This information
  includes the modem type, what I/O port, IRQ and DMA channel a particular modem
  port is using, and where to output a transmitter keying (PTT) signal.
<div style="height: 1.00em;">&#x00A0;</div>
With the <b>-p</b> option, <b>sethdlc</b> sets and/or reports the port
  configuration.
<div style="height: 1.00em;">&#x00A0;</div>
With the <b>-a</b> option, <b>sethdlc</b> sets and/or reports the AX.25 channel
  access parameters. These parameters can also be set with the <i>kissparms</i>
  utility.
<div style="height: 1.00em;">&#x00A0;</div>
With the <b>-c</b> option, <b>sethdlc</b> instructs the driver to send a
  calibration pattern for <i>cal</i> seconds.
<div style="height: 1.00em;">&#x00A0;</div>
Without the <b>-p,</b> <b>-a</b> and <b>-c</b> option, <b>sethdlc</b> will stay
  in the foreground and display received packets. The AX.25 header and
  eventually a FlexNet compressed header are decoded. CTRL-C terminates
  <b>sethdlc.</b> Specifying additional options, <b>sethdlc</b> may display
  additional information.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>sethdlc</b> accepts the following options:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">Trace the bits at the output of the demodulator, after RX
      clock recovery. This option is only available if <b>sethdlc</b> and the
      soundcard modem kernel driver is compiled with debugging support on. This
      is useful for driver debugging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Trace DCD, PTT and other status information on stdout.
      <b>sethdlc</b> displays two times per second a line containing this
      information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Display an overview of the available command line
      parameters and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">The <i>device</i> argument specifies the HDLC modem device
      which should be configured or interrogated. It will usually have the
      following form: <i>bc[0-3]</i> for the baycom driver and <i>sm[0-3]</i>
      for the soundcard modem driver.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">Trace the bits at the demodulator output, <i>before</i> the
      RX clock recovery, to stdout. This option is only available the modem
      driver is compiled with debugging support on. It may not be available on
      some modem, such as the <i>par96</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="PARAMETERS"><a class="selflink" href="#PARAMETERS">PARAMETERS</a></h1>
The following parameters can be assigned to a soundcard radio modem port.
<div style="height: 1.00em;">&#x00A0;</div>
All numerical parameter values are assumed to be in decimal unless preceded by
  &quot;0x&quot;.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>mode</b> parameter sets the type of hardware and the operating mode of
  the driver. <i>ser12</i> and <i>par96</i> are valid modes for the
  <b>baycom</b> driver. A star &quot; <i>*</i>&quot; may be added to enable
  software DCD. The <b>mode</b> string format of the <b>soundmodem</b> driver is
  as follows: <i>hw:mode</i>. <i>hw</i> may be either <i>sbc</i>, <i>wss</i> or
  <i>wssfdx</i>. The first one specifies SoundBlaster compatible soundcards, the
  second one WindowsSoundSystem compatible hardware, and the third one WSS
  fullduplex operation (which currently works with Crystal Semiconductor
  Chipsets CS423[126]). The <i>mode</i> portion may be <i>afsk1200</i> or
  <i>fsk9600</i>. Optionally, the receive and transmit modes may be different (
  <i>hw:txmode.rxmode</i>).
<div style="height: 1.00em;">&#x00A0;</div>
The <b>ioport</b> parameter sets the I/O port address. Typical values for the
  <i>ser12</i> modem are 0x3f8, 0x2f8, 0x3e8 or 0x2e8, for the <i>par96</i>
  modem 0x378, 0x278 or 0x3bc, for the <i>sbc</i> modems 0x220 and for the
  <i>wss</i> modems 0x530, 0x608, 0xe80 or 0xf40.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>irq</b> parameter sets the hardware IRQ number. Typical values for the
  <i>ser12</i> modem are 4 and 3, for the <i>par96</i> modem 7 or 5, for the
  <i>sbc</i> modems are 7 or 5 and for the <i>wss</i> modems, any free IRQ from
  the set 2, 7, 9, 10, 11 will do. The driver automatically configures the WSS
  soundcard to the correct IRQ.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>dma</b> parameter sets the hardware DMA number. Typical values for the
  <i>sbc</i> modems are 1 or 0 and for the <i>wss</i> modems, any free DMA from
  0 to 3 (except 2) will do. The driver automatically configures the WSS
  soundcard to the correct DMA. The Baycom modems do not need DMA.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>dma2</b> parameter sets the second hardware DMA number. This is only
  needed for full duplex operation with the <b>soundmodem</b> driver.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>seriobase</b> parameter optionally sets the address of a serial port,
  where the driver will output a PTT signal at the TxD and RTS pins, and a DCD
  signal at the DTR pin. As Baycom modems do have their own PTT pin, this
  parameter is not used by the Baycom modem driver.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>pariobase</b> parameter optionally sets the address of a LPT port where
  the driver will output a PTT signal on the DATA0 line and a DCD signal on the
  DATA1 line. As Baycom modems do have their own PTT pin, this parameter is not
  used by the Baycom modem driver.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>midiiobase</b> parameter optionally sets the address of a MPU401
  compatible MIDI port, where the driver will output a PTT signal. Since the
  MIDI port is effectively an UART and therefore cannot output a DC signal, the
  output must be fed through a retriggerable monoflop with a period of about
  15ms. See <i>http://www.ife.ee.ethz.ch/~sailer/pcf/ptt_circ/ptt.html</i> for a
  sample schematic diagram. As Baycom modems do have their own PTT pin, this
  parameter is not used by the Baycom modem driver.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>txdelay</b> sets the transmitter keyup delay time. Unlike
  <i>kissparms</i>, the unit is <i>tens of ms</i>. This is the time the
  transmitter needs to switch its PA on and for its frequency synthesizer to
  settle. Typical values for a handheld transceiver are 200ms (i.e. 20), and for
  a good crystal driven transceiver 20ms (i.e. 2).
<div style="height: 1.00em;">&#x00A0;</div>
The <b>txtail</b> sets the time PTT is held after the last packet. Unlike
  <i>kissparms</i>, the unit is <i>tens of ms</i>. Do not set this value to 0.
  Most modems need some extra time to actually clock the last bits out to the
  transmitter.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>slottime</b> parameter specifies how often the channel access algorithm
  is executed. Unlike <i>kissparms</i>, the unit is <i>tens of ms</i>. Unless
  you have very specific requirements, set this to 100ms (i.e. 10).
<div style="height: 1.00em;">&#x00A0;</div>
The <b>ppersist</b> sets how &quot;eagerly&quot; the station starts to transmit
  as soon as the channel gets free. The optimum value is 256 divided by the
  number of stations on the channel. (This should really be done automatically
  by the L2)
<div style="height: 1.00em;">&#x00A0;</div>
<b>full</b> sets the modem to full duplex mode. Note that some modems do not
  actually support full duplex mode, in this case this parameter makes the modem
  start its transmission as soon as it gets packets from the upper layer,
  without waiting for the channel to become free. This is needed by some
  implementations of alternative channel access algorithms, e.g. <i>DAMA</i>.
<div style="height: 1.00em;">&#x00A0;</div>
<b>half</b> sets the modem to half duplex mode.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CONSIDERATIONS_OF_CONFIGURING_BAYCOM_PORTS"><a class="selflink" href="#CONSIDERATIONS_OF_CONFIGURING_BAYCOM_PORTS">CONSIDERATIONS
  OF CONFIGURING BAYCOM PORTS</a></h1>
It is important to note that sethdlc merely tells the Linux kernel where it
  should expect to find the I/O port and IRQ lines of a particular serial port.
  It does <i>not</i> configure the hardware to use a particular I/O port. In
  order to do that, you will need to physically program the serial board,
  usually by setting some jumpers or by switching some DIP switches.
<div style="height: 1.00em;">&#x00A0;</div>
This section will provide some pointers in helping you decide how you would like
  to configure your baycom ports.
<div style="height: 1.00em;">&#x00A0;</div>
The &quot;standard MS-DOS&quot; port associations are given below:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
COM1, port 0x3f8, irq 4
COM2, port 0x2f8, irq 3
COM3, port 0x3e8, irq 4
COM4, port 0x2e8, irq 3
LPT1, port 0x378, irq 7
LPT1 (on hercules graphics adapter), port 0x3bc, irq 7
LPT1, port 0x278, irq 5
</pre>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CONSIDERATIONS_OF_CONFIGURING_SOUNDCARD_RADIO_MODEM_PORTS"><a class="selflink" href="#CONSIDERATIONS_OF_CONFIGURING_SOUNDCARD_RADIO_MODEM_PORTS">CONSIDERATIONS
  OF CONFIGURING SOUNDCARD RADIO MODEM PORTS</a></h1>
Some cards need to be initialized before they act as a WSS or SoundBlaster
  compatible card. This driver does <i>not</i> do this. You can use the standard
  linux sound driver, if compiled as a module. Just load the sound driver
  (insmod sound) and remove it again (rmmod sound). The card should then be
  configured for either soundblaster or WSS compatibility. If this does not work
  for some reason, you'll have to write your own soundcard configuration
  utility. This is not as complicated as it sounds; it can be done from user
  space (but requiring root privileges) using <i>ioperm</i> and/or <i>iopl</i>.
<div style="height: 1.00em;">&#x00A0;</div>
It is important that the audio levels of your radio match those of the
  soundcard. To help achieve this, there are two utilities: <i>smdiag</i> and
  <i>smmixer</i>. See their respective manpage.
<div style="height: 1.00em;">&#x00A0;</div>
The sound driver and the soundcard modem driver are mutually exclusive, i.e.
  they cannot both access the same soundcard at the same time. Even worse, the
  sound driver reserves the soundcard as soon as it gets loaded. The souncard
  modem driver however reserves the card only when the interface is started,
  i.e. during ifconfig sm[0-3] up.
<div style="height: 1.00em;">&#x00A0;</div>
9600 baud may not currently work on SoundBlaster cards with DSP revision 4.x,
  i.e. SB16 and SB32 AWE. This is because they seem to not be fully backwards
  compatible.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CAUTION"><a class="selflink" href="#CAUTION">CAUTION</a></h1>
CAUTION: Using an invalid port can lock up your machine.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<pre>
<b>smdiag</b>&#x00A0;(8), <b>smmixer</b>&#x00A0;(8), <b>kissparms</b>&#x00A0;(8),
linux/drivers/net/hdlcdrv.c,
linux/drivers/net/baycom.c,
linux/drivers/net/soundmodem.c
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
sethdlc was written by Thomas Sailer, HB9JNX/AE4WA (t.sailer@alumni.ethz.ch).
  Inspired by setserial.</div>
<table class="foot">
  <tr>
    <td class="foot-date">1 October 1996</td>
    <td class="foot-os">Sethdlc 0.1</td>
  </tr>
</table>
</body>
</html>
