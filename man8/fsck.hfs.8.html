<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>FSCK_HFS(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FSCK_HFS(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">FSCK_HFS(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">fsck.hfsplus</b> &#x2014;
  <span class="Nd" title="Nd">HFS file system consistency check</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">fsck.hfsplus</b></td>
    <td><b class="Fl" title="Fl">-q</b>
      [<span class="Op"><b class="Fl" title="Fl">-df</b></span>]
      <var class="Ar" title="Ar">special ...</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">fsck.hfsplus</b></td>
    <td><b class="Fl" title="Fl">-p</b>
      [<span class="Op"><b class="Fl" title="Fl">-df</b></span>]
      <var class="Ar" title="Ar">special ...</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">fsck.hfsplus</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-n</b> |
      <b class="Fl" title="Fl">-y</b> | <b class="Fl" title="Fl">-r</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-dfgxlE</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-D</b>
      <var class="Ar" title="Ar">flags</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-b</b>
      <var class="Ar" title="Ar">size</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-B</b>
      <var class="Ar" title="Ar">path</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-m</b>
      <var class="Ar" title="Ar">mode</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-c</b>
      <var class="Ar" title="Ar">size</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-R</b>
      <var class="Ar" title="Ar">flags</var></span>]
      <var class="Ar" title="Ar">special ...</var></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">fsck.hfsplus</b> utility verifies and repairs
  standard HFS and HFS+ file systems.
<div class="Pp"></div>
The first form of <b class="Nm" title="Nm">fsck.hfsplus</b> quickly checks the
  specified file systems to determine whether they were cleanly unmounted.
<div class="Pp"></div>
The second form of <b class="Nm" title="Nm">fsck.hfsplus</b> preens the
  specified file systems. It is normally started by
  <a class="Xr" title="Xr">fsck(8)</a> run from
  <i class="Pa" title="Pa">/etc/rc.boot</i> during automatic reboot, when a HFS
  file system is detected. When preening file systems,
  <b class="Nm" title="Nm">fsck.hfsplus</b> will fix common inconsistencies for
  file systems that were not unmounted cleanly. If more serious problems are
  found, <b class="Nm" title="Nm">fsck.hfsplus</b> does not try to fix them,
  indicates that it was not successful, and exits.
<div class="Pp"></div>
The third form of <b class="Nm" title="Nm">fsck.hfsplus</b> checks the specified
  file systems and tries to repair all detected inconsistencies.
<div class="Pp"></div>
If no options are specified <b class="Nm" title="Nm">fsck.hfsplus</b> will
  always check and attempt to fix the specified file systems.
<div class="Pp"></div>
The options are as follows:
<dl class="Bl-hang" style="margin-left: 6.00ex;">
  <dt class="It-hang"><a class="selflink" href="#c"><b class="Fl" title="Fl" id="c">-c</b></a>
    <var class="Ar" title="Ar">size</var></dt>
  <dd class="It-hang">Specify the <var class="Ar" title="Ar">size</var> of the
      cache used by <b class="Nm" title="Nm">fsck.hfsplus</b> internally. Bigger
      <var class="Ar" title="Ar">size</var> can result in better performance but
      can result in deadlock when used with <b class="Fl" title="Fl">-l</b>
      option. Size can be specified as a decimal, octal, or hexadecimal number.
      If the number ends with a ``k'', ``m'', or ``g'', the number is multiplied
      by 1024 (1K), 1048576 (1M), or 1073741824 (1G), respectively.</dd>
  <dt class="It-hang"><a class="selflink" href="#d"><b class="Fl" title="Fl" id="d">-d</b></a></dt>
  <dd class="It-hang">Display debugging information. This option may provide
      useful information when <b class="Nm" title="Nm">fsck.hfsplus</b> cannot
      repair a damaged file system.</dd>
  <dt class="It-hang"><a class="selflink" href="#D"><b class="Fl" title="Fl" id="D">-D</b></a>
    <var class="Ar" title="Ar">flags</var></dt>
  <dd class="It-hang">Print extra debugging information. The
      <var class="Ar" title="Ar">flags</var> are a bitmap that control which
      kind of debug information is printed. The following values are currently
      implemented:
    <dl class="Bl-hang Bl-compact" style="margin-left: 6.00ex;">
      <dt class="It-hang">0x0001</dt>
      <dd class="It-hang">Informational messages</dd>
      <dt class="It-hang">0x0002</dt>
      <dd class="It-hang">Error messages</dd>
      <dt class="It-hang">0x0010</dt>
      <dd class="It-hang">Extended attributes related messages</dd>
      <dt class="It-hang">0x0020</dt>
      <dd class="It-hang">Overlapped extents related messages</dd>
    </dl>
  </dd>
  <dt class="It-hang"><a class="selflink" href="#b"><b class="Fl" title="Fl" id="b">-b</b></a>
    <var class="Ar" title="Ar">size</var></dt>
  <dd class="It-hang">Specify the size, in bytes, of the physical blocks used by
      the <b class="Fl" title="Fl">-B</b> option.</dd>
  <dt class="It-hang"><a class="selflink" href="#B"><b class="Fl" title="Fl" id="B">-B</b></a>
    <var class="Ar" title="Ar">path</var></dt>
  <dd class="It-hang">Print the files containing the physical blocks listed in
      the file <var class="Ar" title="Ar">path</var>. The file should contain
      one or more decimal, octal (with leading 0) or hexadecimal (with leading
      0x) numbers separated by white space. The physical block numbers are
      relative to the start of the partition, so if you have block numbers
      relative to the start of the device, you will have to subtract the block
      number of the start of the partition. The size of a physical block is
      given with the <b class="Fl" title="Fl">-b</b> option; the default is 512
      bytes per block.</dd>
  <dt class="It-hang"><a class="selflink" href="#f"><b class="Fl" title="Fl" id="f">-f</b></a></dt>
  <dd class="It-hang">When used with the <b class="Fl" title="Fl">-p</b> option,
      force <b class="Nm" title="Nm">fsck.hfsplus</b> to check `clean' file
      systems, otherwise it means force
      <b class="Nm" title="Nm">fsck.hfsplus</b> to check and repair journaled
      HFS+ file systems.</dd>
  <dt class="It-hang"><a class="selflink" href="#g"><b class="Fl" title="Fl" id="g">-g</b></a></dt>
  <dd class="It-hang">Causes <b class="Nm" title="Nm">fsck.hfsplus</b> to
      generate its output strings in GUI format. This option is used when
      another application with a graphical user interface (like Mac OS X Disk
      Utility) is invoking the <b class="Nm" title="Nm">fsck.hfsplus</b>
    tool.</dd>
  <dt class="It-hang"><a class="selflink" href="#x"><b class="Fl" title="Fl" id="x">-x</b></a></dt>
  <dd class="It-hang">Causes <b class="Nm" title="Nm">fsck.hfsplus</b> to
      generate its output strings in XML (plist) format. This option implies the
      <b class="Fl" title="Fl">-g</b> option.</dd>
  <dt class="It-hang"><a class="selflink" href="#l"><b class="Fl" title="Fl" id="l">-l</b></a></dt>
  <dd class="It-hang">Lock down the file system and perform a test-only check.
      This makes it possible to check a file system that is currently mounted,
      although no repairs can be made.</dd>
  <dt class="It-hang"><a class="selflink" href="#m"><b class="Fl" title="Fl" id="m">-m</b></a>
    <var class="Ar" title="Ar">mode</var></dt>
  <dd class="It-hang">Mode is an octal number that will be used to set the
      permissions for the lost+found directory when it is created. The
      lost+found directory is only created when a volume is repaired and
      orphaned files or directories are detected.
      <b class="Nm" title="Nm">fsck.hfsplus</b> places orphaned files and
      directories into the lost+found directory (located at the root of the
      volume). The default mode is 01777.</dd>
  <dt class="It-hang"><a class="selflink" href="#p"><b class="Fl" title="Fl" id="p">-p</b></a></dt>
  <dd class="It-hang">Preen the specified file systems.</dd>
  <dt class="It-hang"><a class="selflink" href="#q"><b class="Fl" title="Fl" id="q">-q</b></a></dt>
  <dd class="It-hang">Causes <b class="Nm" title="Nm">fsck.hfsplus</b> to
      quickly check whether the volume was unmounted cleanly. If the volume was
      unmounted cleanly, then the exit status is 0. If the volume was not
      unmounted cleanly, then the exit status will be non-zero. In either case,
      a message is printed to standard output describing whether the volume was
      clean or dirty.</dd>
  <dt class="It-hang"><a class="selflink" href="#y"><b class="Fl" title="Fl" id="y">-y</b></a></dt>
  <dd class="It-hang">Always attempt to repair any damage that is found.</dd>
  <dt class="It-hang"><a class="selflink" href="#n"><b class="Fl" title="Fl" id="n">-n</b></a></dt>
  <dd class="It-hang">Never attempt to repair any damage that is found.</dd>
  <dt class="It-hang"><a class="selflink" href="#E"><b class="Fl" title="Fl" id="E">-E</b></a></dt>
  <dd class="It-hang">Cause <b class="Nm" title="Nm">fsck.hfsplus</b> to exit
      (with a value of 47) if it encounters any major errors. A ``major error''
      is considered one which would impact using the volume in normal usage; an
      inconsistency which would not impact such use is considered ``minor'' for
      this option. Only valid with the <b class="Fl" title="Fl">-n</b>
    option.</dd>
  <dt class="It-hang"><a class="selflink" href="#R"><b class="Fl" title="Fl" id="R">-R</b></a>
    <var class="Ar" title="Ar">flags</var></dt>
  <dd class="It-hang">Rebuilds the requested btree. The following flags are
      supported:
    <dl class="Bl-hang Bl-compact" style="margin-left: 6.00ex;">
      <dt class="It-hang">a</dt>
      <dd class="It-hang">Attribute btree</dd>
      <dt class="It-hang">c</dt>
      <dd class="It-hang">Catalog btree</dd>
      <dt class="It-hang">e</dt>
      <dd class="It-hang">Extents overflow btree</dd>
    </dl>
    Rebuilding a btree will only work if there is enough free space on the file
      system for the new btree file, and if
      <b class="Nm" title="Nm">fsck.hfsplus</b> is able to traverse each of the
      nodes in the requested btree successfully. Rebuilding btrees is not
      supported on HFS Standard volumes.</dd>
  <dt class="It-hang"><a class="selflink" href="#r"><b class="Fl" title="Fl" id="r">-r</b></a></dt>
  <dd class="It-hang">Rebuild the catalog btree. This is synonymous with
      <b class="Fl" title="Fl">-Rc</b>.</dd>
</dl>
<div class="Pp"></div>
Because of inconsistencies between the block device and the buffer cache, the
  raw device should always be used.
<h1 class="Sh" title="Sh" id="EXIT_VALUES"><a class="selflink" href="#EXIT_VALUES">EXIT
  VALUES</a></h1>
<b class="Nm" title="Nm">fsck.hfsplus</b> indicates some status by exit value.
  The current list of exit status results is:
<dl class="Bl-hang Bl-compact" style="margin-left: 6.00ex;">
  <dt class="It-hang">0</dt>
  <dd class="It-hang">No errors found, or successfully repaired.</dd>
  <dt class="It-hang">3</dt>
  <dd class="It-hang">A quick-check (the <b class="Fl" title="Fl">-n</b> option)
      found a dirty filesystem; no repairs were made.</dd>
  <dt class="It-hang">4</dt>
  <dd class="It-hang">During boot, the root filesystem was found to be dirty;
      repairs were made, and the filesystem was remounted. The system should be
      rebooted.</dd>
  <dt class="It-hang">8</dt>
  <dd class="It-hang">A corrupt filesystem was found during a check, or repairs
      did not succeed.</dd>
  <dt class="It-hang">47</dt>
  <dd class="It-hang">A major error was found with
      <b class="Fl" title="Fl">-E</b>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">fsck(8)</a>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<b class="Nm" title="Nm">fsck.hfsplus</b> is not able to fix some
  inconsistencies that it detects.
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
The <b class="Nm" title="Nm">fsck.hfsplus</b> command appeared in Mac OS X
  Server 1.0 .</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 5, 2008</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
