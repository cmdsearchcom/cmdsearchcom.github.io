<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>TCPLAY(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TCPLAY(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">TCPLAY(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">tcplay</b> &#x2014; <span class="Nd" title="Nd">tool to
  manage TrueCrypt volumes</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-c</b> <b class="Fl" title="Fl">-d</b>
      <var class="Ar" title="Ar">device</var>
      [<span class="Op"><b class="Fl" title="Fl">-g</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-z</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-w</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-a</b>
      <var class="Ar" title="Ar">pbkdf_hash</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-b</b>
      <var class="Ar" title="Ar">cipher</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-f</b>
      <var class="Ar" title="Ar">keyfile_hidden</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">keyfile</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-x</b>
      <var class="Ar" title="Ar">pbkdf_hash</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-y</b>
      <var class="Ar" title="Ar">cipher</var></span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-i</b> <b class="Fl" title="Fl">-d</b>
      <var class="Ar" title="Ar">device</var>
      [<span class="Op"><b class="Fl" title="Fl">-e</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-f</b>
      <var class="Ar" title="Ar">keyfile_hidden</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">keyfile</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-s</b>
      <var class="Ar" title="Ar">system_device</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--fde</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-backup</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hidden-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-j</b>
      <var class="Ar" title="Ar">mapping</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-m</b> <var class="Ar" title="Ar">mapping</var>
      <b class="Fl" title="Fl">-d</b> <var class="Ar" title="Ar">device</var>
      [<span class="Op"><b class="Fl" title="Fl">-e</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-f</b>
      <var class="Ar" title="Ar">keyfile_hidden</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">keyfile</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-s</b>
      <var class="Ar" title="Ar">system_device</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-t</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--fde</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-backup</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hidden-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">--modify</b> <b class="Fl" title="Fl">-d</b>
      <var class="Ar" title="Ar">device</var>
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">keyfile</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--new-keyfile</b>
      <var class="Ar" title="Ar">new_keyfile</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--new-pbkdf-prf</b>
      <var class="Ar" title="Ar">pbkdf_hash</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-s</b>
      <var class="Ar" title="Ar">system_device</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--fde</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-backup</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--use-hidden-hdr-file</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">--save-hdr-backup</b>
      <var class="Ar" title="Ar">hdr_file</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-w</b></span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">--modify</b> <b class="Fl" title="Fl">-d</b>
      <var class="Ar" title="Ar">device</var>
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">keyfile</var></span>]
      <b class="Fl" title="Fl">--restore-from-backup-hdr</b>
      [<span class="Op"><b class="Fl" title="Fl">-w</b></span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-u</b>
      <var class="Ar" title="Ar">mapping</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">tcplay</b></td>
    <td><b class="Fl" title="Fl">-h</b> | <b class="Fl" title="Fl">-v</b></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">tcplay</b> utility provides full support for
  creating and opening/mapping TrueCrypt-compatible volumes. It supports the
  following commands, each with a set of options detailed further below:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#c"><b class="Fl" title="Fl" id="c">-c</b></a>,
    <b class="Fl" title="Fl">--create</b></dt>
  <dd class="It-tag">Create a new encrypted TrueCrypt volume on the device
      specified by <b class="Fl" title="Fl">--device</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#h,"><b class="Fl" title="Fl" id="h,">-h,</b></a>
    <b class="Fl" title="Fl">--help</b></dt>
  <dd class="It-tag">Print help message and exit.</dd>
  <dt class="It-tag"><a class="selflink" href="#i"><b class="Fl" title="Fl" id="i">-i</b></a>,
    <b class="Fl" title="Fl">--info</b></dt>
  <dd class="It-tag">Print out information about the encrypted device specified
      by <b class="Fl" title="Fl">--device</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#j"><b class="Fl" title="Fl" id="j">-j</b></a>
    <var class="Ar" title="Ar">mapping</var>,
    <b class="Fl" title="Fl">--info-mapped</b>=<var class="Ar" title="Ar">mapping</var></dt>
  <dd class="It-tag">Print out information about the mapped tcplay volume
      specified by <var class="Ar" title="Ar">mapping</var>. Information such as
      key CRC and the PBKDF2 PRF is not available via this command.</dd>
  <dt class="It-tag"><a class="selflink" href="#-modify"><b class="Fl" title="Fl" id="-modify">--modify</b></a></dt>
  <dd class="It-tag">Modify the volume header. This mode allows changing
      passphrase, keyfiles, PBKDF2 PRF as well as restoring from a backup
      header.</dd>
  <dt class="It-tag"><a class="selflink" href="#m"><b class="Fl" title="Fl" id="m">-m</b></a>
    <var class="Ar" title="Ar">mapping</var>,
    <b class="Fl" title="Fl">--map</b>=<var class="Ar" title="Ar">mapping</var></dt>
  <dd class="It-tag">Map the encrypted TrueCrypt volume on the device specified
      by <b class="Fl" title="Fl">--device</b> as a
      <a class="Xr" title="Xr">dm(4)</a> mapping called
      <var class="Ar" title="Ar">mapping</var>. The
      <var class="Ar" title="Ar">mapping</var> argument should not contain any
      spaces or special characters.</dd>
  <dt class="It-tag"><a class="selflink" href="#u"><b class="Fl" title="Fl" id="u">-u</b></a>
    <var class="Ar" title="Ar">mapping</var>,
    <b class="Fl" title="Fl">--unmap</b>=<var class="Ar" title="Ar">mapping</var></dt>
  <dd class="It-tag">Removes (unmaps) the <a class="Xr" title="Xr">dm(4)</a>
      mapping specified by <var class="Ar" title="Ar">mapping</var> as well as
      any related cascade mappings. If you mapped a volume using full disk
      encryption and created mapping for individual partitions using
      <a class="Xr" title="Xr">kpartx(8)</a>, you must remove these prior to
      unmapping the volume.</dd>
  <dt class="It-tag"><a class="selflink" href="#v,"><b class="Fl" title="Fl" id="v,">-v,</b></a>
    <b class="Fl" title="Fl">--version</b></dt>
  <dd class="It-tag">Print version message and exit.</dd>
</dl>
<div class="Pp"></div>
Options common to all commands are:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#d"><b class="Fl" title="Fl" id="d">-d</b></a>
    <var class="Ar" title="Ar">device</var>,
    <b class="Fl" title="Fl">--device</b>=<var class="Ar" title="Ar">device</var></dt>
  <dd class="It-tag">Specifies the disk <var class="Ar" title="Ar">device</var>
      on which the TrueCrypt volume resides/will reside. This option is
      mandatory for all commands.</dd>
  <dt class="It-tag"><a class="selflink" href="#f"><b class="Fl" title="Fl" id="f">-f</b></a>
    <var class="Ar" title="Ar">keyfile_hidden</var>,
    <b class="Fl" title="Fl">--keyfile-hidden</b>=<var class="Ar" title="Ar">keyfile_hidden</var></dt>
  <dd class="It-tag">Specifies a keyfile to use in addition to the passphrase
      when either creating a hidden volume or when protecting a hidden volume
      while mapping or querying the outer volume. If you only intend to map a
      hidden volume, the <b class="Fl" title="Fl">--keyfile</b> option has to be
      used. This option can appear multiple times; if so, multiple keyfiles will
      be used. This option is not valid in the
      <b class="Fl" title="Fl">--modify</b> mode.</dd>
  <dt class="It-tag"><a class="selflink" href="#k"><b class="Fl" title="Fl" id="k">-k</b></a>
    <var class="Ar" title="Ar">keyfile</var>,
    <b class="Fl" title="Fl">--keyfile</b>=<var class="Ar" title="Ar">keyfile</var></dt>
  <dd class="It-tag">Specifies a <var class="Ar" title="Ar">keyfile</var> to use
      in addition to the passphrase. This option can appear multiple times; if
      so, multiple keyfiles will be used.</dd>
</dl>
<div class="Pp"></div>
Additional options for the <b class="Fl" title="Fl">--create</b> command are:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#a"><b class="Fl" title="Fl" id="a">-a</b></a>
    <var class="Ar" title="Ar">pbkdf_hash</var>,
    <b class="Fl" title="Fl">--pbkdf-prf</b>=<var class="Ar" title="Ar">pbkdf_hash</var></dt>
  <dd class="It-tag">Specifies which hash algorithm to use for the PBKDF2
      password derivation. To see which algorithms are supported, specify
      <b class="Fl" title="Fl">--pbkdf-prf</b>=<b class="Cm" title="Cm">help</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#b"><b class="Fl" title="Fl" id="b">-b</b></a>
    <var class="Ar" title="Ar">cipher</var>,
    <b class="Fl" title="Fl">--cipher</b>=<var class="Ar" title="Ar">cipher</var></dt>
  <dd class="It-tag">Specifies which cipher algorithm or cascade of ciphers to
      use to encrypt the new volume. To see which algorithms are supported,
      specify
      <b class="Fl" title="Fl">--cipher</b>=<b class="Cm" title="Cm">help</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#g,"><b class="Fl" title="Fl" id="g,">-g,</b></a>
    <b class="Fl" title="Fl">--hidden</b></dt>
  <dd class="It-tag">Specifies that the newly created volume will contain a
      hidden volume. The keyfiles applied to the passphrase for the hidden
      volume are those specified by
      <b class="Fl" title="Fl">--keyfile-hidden</b>. The user will be prompted
      for the size of the hidden volume interactively.</dd>
  <dt class="It-tag"><a class="selflink" href="#w,"><b class="Fl" title="Fl" id="w,">-w,</b></a>
    <b class="Fl" title="Fl">--weak-keys</b></dt>
  <dd class="It-tag">Use <a class="Xr" title="Xr">urandom(4)</a> for key
      material instead of a strong entropy source. This is in general a really
      bad idea and should only be used for testing.</dd>
  <dt class="It-tag"><a class="selflink" href="#x"><b class="Fl" title="Fl" id="x">-x</b></a>
    <var class="Ar" title="Ar">pbkdf_hash</var>,
    <b class="Fl" title="Fl">--pbkdf-prf-hidden</b>=<var class="Ar" title="Ar">pbkdf_hash</var></dt>
  <dd class="It-tag">Specifies which hash algorithm to use for the PBKDF2
      password derivation for the hidden volume. Only valid in conjunction with
      <b class="Fl" title="Fl">--hidden</b>. If no algorithm is specified, the
      same as for the outer volume will be used. To see which algorithms are
      supported, specify
      <b class="Fl" title="Fl">--pbkdf-prf-hidden</b>=<b class="Cm" title="Cm">help</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#y"><b class="Fl" title="Fl" id="y">-y</b></a>
    <var class="Ar" title="Ar">cipher</var>,
    <b class="Fl" title="Fl">--cipher-hidden</b>=<var class="Ar" title="Ar">cipher</var></dt>
  <dd class="It-tag">Specifies which cipher algorithm or cascade of ciphers to
      use to encrypt the hidden volume on the new TrueCrypt volume. Only valid
      in conjunction with <b class="Fl" title="Fl">--hidden</b>. If no cipher is
      specified, the same as for the outer volume will be used. To see which
      algorithms are supported, specify
      <b class="Fl" title="Fl">--cipher-hidden</b>=<b class="Cm" title="Cm">help</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#z,"><b class="Fl" title="Fl" id="z,">-z,</b></a>
    <b class="Fl" title="Fl">--insecure-erase</b></dt>
  <dd class="It-tag">Skips the secure erase of the disk. Use this option
      carefully as it is a security risk!</dd>
</dl>
<div class="Pp"></div>
Additional options for the <b class="Fl" title="Fl">--info</b>,
  <b class="Fl" title="Fl">--map</b> and <b class="Fl" title="Fl">--modify</b>
  commands are:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#e,"><b class="Fl" title="Fl" id="e,">-e,</b></a>
    <b class="Fl" title="Fl">--protect-hidden</b></dt>
  <dd class="It-tag">Specifies that an outer volume will be queried or mapped,
      but its reported size will be adjusted accordingly to the size of the
      hidden volume contained in it. Both the hidden volume and outer volume
      passphrase and keyfiles will be required. This option only applies to the
      <b class="Fl" title="Fl">--info</b> and <b class="Fl" title="Fl">--map</b>
      commands.</dd>
  <dt class="It-tag"><a class="selflink" href="#s"><b class="Fl" title="Fl" id="s">-s</b></a>
    <var class="Ar" title="Ar">system_device</var>,
    <b class="Fl" title="Fl">--system-encryption</b>=<var class="Ar" title="Ar">system_device</var></dt>
  <dd class="It-tag">This option is required if you are attempting to access a
      device that uses system encryption, for example an encrypted Windows
      system partition. It does not apply to disks using full disk encryption.
      The <b class="Fl" title="Fl">--device</b> option will point at the actual
      encrypted partition, while the
      <var class="Ar" title="Ar">system_device</var> argument will point to the
      parent device (i.e. underlying physical disk) of the encrypted
    partition.</dd>
  <dt class="It-tag"><a class="selflink" href="#-fde"><b class="Fl" title="Fl" id="-fde">--fde</b></a></dt>
  <dd class="It-tag">This option is intended to be used with disks using full
      disk encryption (FDE). When a disk has been encrypted using TrueCrypt's
      FDE, the complete disk is encrypted except for the first 63 sectors. The
      <b class="Fl" title="Fl">--device</b> option should point to the whole
      disk device, not to any particular partition. The resultant mapping will
      cover the whole disk, and will not appear as separate partitions. To
      access individual partitions after mapping,
      <a class="Xr" title="Xr">kpartx(8)</a> can be used.</dd>
  <dt class="It-tag"><a class="selflink" href="#-use-backup"><b class="Fl" title="Fl" id="-use-backup">--use-backup</b></a></dt>
  <dd class="It-tag">This option is intended to be used when the primary headers
      of a volume have been corrupted. This option will force
      <b class="Nm" title="Nm">tcplay</b> to use the backup headers, which are
      located at the end of the device, to access the volume.</dd>
</dl>
<div class="Pp"></div>
Additional options only for the <b class="Fl" title="Fl">--map</b> command are:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#t"><b class="Fl" title="Fl" id="t">-t</b></a>,
    <b class="Fl" title="Fl">--allow-trim</b></dt>
  <dd class="It-tag">This option enables TRIM (discard) support on the mapped
      volume.</dd>
</dl>
<div class="Pp"></div>
Additional options only for the <b class="Fl" title="Fl">--modify</b> command
  are:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#-new-pbkdf-prf"><b class="Fl" title="Fl" id="-new-pbkdf-prf">--new-pbkdf-prf</b></a>=<var class="Ar" title="Ar">pbkdf_hash</var></dt>
  <dd class="It-tag">Specifies which hash algorithm to use for the PBKDF2
      password derivation on reencrypting the volume header. If this option is
      not specified, the reencrypted header will use the current PRF. To see
      which algorithms are supported, specify
      <b class="Fl" title="Fl">--pbkdf-prf</b>=<b class="Cm" title="Cm">help</b>.</dd>
  <dt class="It-tag"><a class="selflink" href="#-new-keyfile"><b class="Fl" title="Fl" id="-new-keyfile">--new-keyfile</b></a>=<var class="Ar" title="Ar">keyfile</var></dt>
  <dd class="It-tag">Specifies a <var class="Ar" title="Ar">keyfile</var> to use
      in addition to the new passphrase on reencrypting the volume header. This
      option can appear multiple times; if so, multiple keyfiles will be
    used.</dd>
  <dt class="It-tag"><a class="selflink" href="#-restore-from-backup-hdr"><b class="Fl" title="Fl" id="-restore-from-backup-hdr">--restore-from-backup-hdr</b></a></dt>
  <dd class="It-tag">If this option is specified, neither
      <b class="Fl" title="Fl">--new-pbkdf-prf</b> nor
      <b class="Fl" title="Fl">--new-keyfile</b> should be specified. This
      option implies <b class="Fl" title="Fl">--use-backup</b>. Use this option
      to restore the volume headers from the backup header.</dd>
</dl>
<div class="Pp"></div>
Sending a <code class="Dv" title="Dv">SIGINFO</code> or
  <code class="Dv" title="Dv">SIGUSR1</code> signal to a running
  <b class="Nm" title="Nm">tcplay</b> process makes it print progress on slower
  tasks such as gathering entropy or wiping the volume.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
TrueCrypt limits passphrases to 64 characters (including the terminating null
  character). To be compatible with it, <b class="Nm" title="Nm">tcplay</b> does
  the same. All passphrases (excluding keyfiles) are trimmed to 64 characters.
  Similarly, keyfiles are limited to a size of 1 MB, but up to 256 keyfiles can
  be used.
<h1 class="Sh" title="Sh" id="PLAUSIBLE_DENIABILITY"><a class="selflink" href="#PLAUSIBLE_DENIABILITY">PLAUSIBLE
  DENIABILITY</a></h1>
<b class="Nm" title="Nm">tcplay</b> offers plausible deniability. Hidden volumes
  are created within an outer volume. Which volume is accessed solely depends on
  the passphrase and keyfile(s) used. If the passphrase and keyfiles for the
  outer volume are specified, no information about the existance of the hidden
  volume is exposed. Without knowledge of the passphrase and keyfile(s) of the
  hidden volume its existence remains unexposed. The hidden volume can be
  protected when mapping the outer volume by using the
  <b class="Fl" title="Fl">--protect-hidden</b> option and specifying the
  passphrase and keyfiles for both the outer and hidden volumes.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Create a new TrueCrypt volume on <i class="Pa" title="Pa">/dev/vn0</i> using the
  cipher cascade of AES and Twofish and the Whirlpool hash algorithm for PBKDF2
  password derivation and two keyfiles, <i class="Pa" title="Pa">one.key</i> and
  <i class="Pa" title="Pa">two.key</i>:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--create</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/vn0</b>
  <b class="Fl" title="Fl">--cipher</b>=<b class="Cm" title="Cm">AES-256-XTS,TWOFISH-256-XTS</b>
  <b class="Fl" title="Fl">--pbkdf-prf</b>=<b class="Cm" title="Cm">whirlpool</b>
  <b class="Fl" title="Fl">--keyfile</b>=<b class="Cm" title="Cm">one.key</b>
  <b class="Fl" title="Fl">--keyfile</b>=<b class="Cm" title="Cm">two.key</b></div>
<div class="Pp"></div>
Map the outer volume on the TrueCrypt volume on
  <i class="Pa" title="Pa">/dev/vn0</i> as
  <b class="Sy" title="Sy">truecrypt1</b>, but protect the hidden volume, using
  the keyfile <i class="Pa" title="Pa">hidden.key</i>, from being overwritten:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--map</b>=<b class="Cm" title="Cm">truecrypt1</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/vn0</b>
  <b class="Fl" title="Fl">--protect-hidden</b>
  <b class="Fl" title="Fl">--keyfile-hidden</b>=<b class="Cm" title="Cm">hidden.key</b></div>
<div class="Pp"></div>
Map the hidden volume on the TrueCrypt volume on
  <i class="Pa" title="Pa">/dev/vn0</i> as
  <b class="Sy" title="Sy">truecrypt2</b>, using the keyfile
  <i class="Pa" title="Pa">hidden.key</i>:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--map</b>=<b class="Cm" title="Cm">truecrypt2</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/vn0</b>
  <b class="Fl" title="Fl">--keyfile</b>=<b class="Cm" title="Cm">hidden.key</b></div>
<div class="Pp"></div>
Map and mount the volume in the file <i class="Pa" title="Pa">secvol</i> on
  Linux:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">losetup</b>
  <b class="Cm" title="Cm">/dev/loop1</b>
  <b class="Cm" title="Cm">secvol</b></div>
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--map</b>=<b class="Cm" title="Cm">secv</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/loop1</b></div>
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">mount</b>
  <b class="Cm" title="Cm">/dev/mapper/secv</b>
  <b class="Cm" title="Cm">/mnt</b></div>
<div class="Pp"></div>
Similarly on <span class="Ux">DragonFly</span>:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">vnconfig</b>
  <b class="Cm" title="Cm">vn1</b> <b class="Cm" title="Cm">secvol</b></div>
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--map</b>=<b class="Cm" title="Cm">secv</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/vn1</b></div>
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">mount</b>
  <b class="Cm" title="Cm">/dev/mapper/secv</b>
  <b class="Cm" title="Cm">/mnt</b></div>
<div class="Pp"></div>
Unmapping the volume <b class="Sy" title="Sy">truecrypt2</b> on both Linux and
  <span class="Ux">DragonFly</span> after unmounting:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">dmsetup</b>
  <b class="Cm" title="Cm">remove</b>
  <b class="Cm" title="Cm">truecrypt2</b></div>
<div class="Pp"></div>
Or alternatively:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--unmap</b>=<b class="Cm" title="Cm">truecrypt2</b></div>
<div class="Pp"></div>
A hidden volume whose existance can be plausibly denied and its outer volume can
  for example be created with
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--create</b> <b class="Fl" title="Fl">--hidden</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/loop0</b>
  <b class="Fl" title="Fl">--cipher</b>=<b class="Cm" title="Cm">AES-256-XTS,TWOFISH-256-XTS</b>
  <b class="Fl" title="Fl">--pbkdf-prf</b>=<b class="Cm" title="Cm">whirlpool</b>
  <b class="Fl" title="Fl">--keyfile</b>=<b class="Cm" title="Cm">one.key</b>
  <b class="Fl" title="Fl">--cipher-hidden</b>=<b class="Cm" title="Cm">AES-256-XTS</b>
  <b class="Fl" title="Fl">--pbkdf-prf-hidden</b>=<b class="Cm" title="Cm">whirlpool</b>
  <b class="Fl" title="Fl">--keyfile-hidden</b>=<b class="Cm" title="Cm">hidden.key</b></div>
<div class="Pp"></div>
<b class="Nm" title="Nm">tcplay</b> will prompt the user for the passphrase for
  both the outer and hidden volume as well as the size of the hidden volume
  inside the outer volume. The hidden volume will be created inside the area
  spanned by the outer volume. The hidden volume can optionally use a different
  cipher and prf function as specified by the
  <b class="Fl" title="Fl">--cipher-hidden</b> and
  <b class="Fl" title="Fl">--pbkdf-prf-hidden</b> options. Which volume is later
  accessed depends only on which passphrase and keyfile(s) are being used, so
  that the existance of the hidden volume remains unknown without knowledge of
  the passphrase and keyfile it is protected by since it is located within the
  outer volume. To map the outer volume without potentially damaging the hidden
  volume, the passphrase and keyfile(s) of the hidden volume must be known and
  provided alongside the <b class="Fl" title="Fl">--protect-hidden</b> option.
<div class="Pp"></div>
A disk encrypted using full disk encryption can be mapped using
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--map</b>=<b class="Cm" title="Cm">tcplay_sdb</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/sdb</b>
  <b class="Fl" title="Fl">--fde</b></div>
<div class="Pp"></div>
To access individual partitions on the now mapped disk, the following command
  will generate mappings for each individual partition on the encrypted disk:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Sy" title="Sy">kpartx</b>
  <b class="Fl" title="Fl">--av</b>
  <b class="Cm" title="Cm">/dev/mapper/tcplay_sdb</b></div>
<div class="Pp"></div>
To restore the main volume header from the backup header, the following command
  can be used:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--modify</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/sdb</b>
  <b class="Fl" title="Fl">--restore-from-backup-hdr</b></div>
<div class="Pp"></div>
As with most other commands, which header is saved (used as source) depends on
  the passphrase and keyfiles used.
<div class="Pp"></div>
To save a backup copy of a header, the following command can be used:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--modify</b>
  <b class="Fl" title="Fl">--device</b>=<b class="Cm" title="Cm">/dev/sdb</b>
  <b class="Fl" title="Fl">--save-hdr-backup</b>=<b class="Cm" title="Cm">/tmp/sdb_backup_header.hdr</b></div>
<div class="Pp"></div>
As with most other commands, which header is saved (used as source) depends on
  the passphrase and keyfiles used.
<div class="Pp"></div>
To restore a header from a backup header file, the following command can be
  used:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--modify</b>
  <b class="Nm" title="Nm">-use-hdr-file</b>=<b class="Cm" title="Cm">/tmp/sdb_backup_header.hdr</b></div>
<div class="Pp"></div>
Similarly, to restore a hidden header from a backup header file:
<div class="Pp"></div>
<div class="Bd" style="margin-left: 5.00ex;"><b class="Nm" title="Nm">tcplay</b>
  <b class="Fl" title="Fl">--modify</b>
  <b class="Nm" title="Nm">-use-hidden-hdr-file</b>=<b class="Cm" title="Cm">/tmp/sdb_backup_hidden_header.hdr</b></div>
<div class="Pp"></div>
Which header is used as the source of the operation will still depend on the
  passphrase and keyfiles used. Even if you use the
  <b class="Fl" title="Fl">--use-hidden-hdr-file</b> option, if you specify the
  passphrase and keyfiles for the main header, the main header will be used
  instead.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">crypttab(5)</a>,
  <a class="Xr" title="Xr">cryptsetup(8)</a>,
  <a class="Xr" title="Xr">dmsetup(8)</a>,
  <a class="Xr" title="Xr">kpartx(8)</a>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
The <b class="Nm" title="Nm">tcplay</b> utility appeared in
  <span class="Ux">DragonFly 2.11</span>.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<span class="An" title="An">Alex Hornung</span></div>
<table class="foot">
  <tr>
    <td class="foot-date">December 8, 2013</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
