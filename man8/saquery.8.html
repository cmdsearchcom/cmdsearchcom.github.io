<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:33 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SAQUERY(8) Open IB Diagnostics SAQUERY(8)</p>

<p style="margin-top: 1em">NAME <br>
SAQUERY -</p>

<p style="margin-top: 1em">QUERY INFINIBAND SUBNET
ADMINISTRATION ATTRIBUTES <br>
SYNOPSIS <br>
saquery [options] [&lt;name&gt; | &lt;lid&gt; |
&lt;guid&gt;]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
saquery issues the selected SA query. Node records are
queried by default.</p>

<p style="margin-top: 1em">OPTIONS <br>
-p get PathRecord info</p>

<p style="margin-top: 1em">-N get NodeRecord info</p>

<p style="margin-top: 1em">-D, --list <br>
get NodeDescriptions of CAs only</p>

<p style="margin-top: 1em">-S get ServiceRecord info</p>

<p style="margin-top: 1em">-I get InformInfoRecord
(subscription) info</p>

<p style="margin-top: 1em">-L return the Lids of the name
specified</p>

<p style="margin-top: 1em">-l return the unique Lid of the
name specified</p>

<p style="margin-top: 1em">-G return the Guids of the name
specified</p>

<p style="margin-top: 1em">-O return the name for the Lid
specified</p>

<p style="margin-top: 1em">-U return the name for the Guid
specified</p>

<p style="margin-top: 1em">-c get the SA&rsquo;s class port
info</p>

<p style="margin-top: 1em">-s return the PortInfoRecords
with isSM or isSMdisabled capability mask bit on</p>

<p style="margin-top: 1em">-g get multicast group info</p>

<p style="margin-top: 1em">-m get multicast member info. If
a group is specified, limit the output to the group
specified and print one line containing only the GUID and
node description for each <br>
entry. Example: saquery -m 0xc000</p>

<p style="margin-top: 1em">-x get LinkRecord info</p>

<p style="margin-top: 1em">--src-to-dst &lt;src:dst&gt;
<br>
get a PathRecord for &lt;src:dst&gt; where src and dst are
either node names or LIDs</p>

<p style="margin-top: 1em">--sgid-to-dgid &lt;sgid:dgid&gt;
<br>
get a PathRecord for sgid to dgid where both GIDs are in an
IPv6 format acceptable to inet_pton (3)</p>

<p style="margin-top: 1em">--smkey &lt;val&gt; <br>
use SM_Key value for the query. Will be used only with
&quot;trusted&quot; queries. If non-numeric value (like
&rsquo;x&rsquo;) is specified then saquery will prompt for a
value. Default <br>
(when not specified here or in
/etc/infiniband-diags/ibdiag.conf) is to use SM_Key == 0 (or
&quot;untrusted&quot;)</p>

<p style="margin-top: 1em">-K, --show_keys <br>
show security keys (mkey, smkey, etc.) associated with the
request.</p>

<p style="margin-top: 1em">--slid &lt;lid&gt; Source LID
(PathRecord)</p>

<p style="margin-top: 1em">--dlid &lt;lid&gt; Destination
LID (PathRecord)</p>

<p style="margin-top: 1em">--mlid &lt;lid&gt; Multicast LID
(MCMemberRecord)</p>

<p style="margin-top: 1em">--sgid &lt;gid&gt; Source GID
(IPv6 format) (PathRecord)</p>

<p style="margin-top: 1em">--dgid &lt;gid&gt; Destination
GID (IPv6 format) (PathRecord)</p>

<p style="margin-top: 1em">--gid &lt;gid&gt; Port GID
(MCMemberRecord)</p>

<p style="margin-top: 1em">--mgid &lt;gid&gt; Multicast GID
(MCMemberRecord)</p>

<p style="margin-top: 1em">--reversible Reversible path
(PathRecord)</p>

<p style="margin-top: 1em">--numb_path Number of paths
(PathRecord)</p>

<p style="margin-top: 1em">--pkey P_Key (PathRecord,
MCMemberRecord). If non-numeric value (like &rsquo;x&rsquo;)
<br>
is specified then saquery will prompt for a value</p>

<p style="margin-top: 1em">--qos_class QoS Class
(PathRecord)</p>

<p style="margin-top: 1em">--sl Service level (PathRecord,
MCMemberRecord)</p>

<p style="margin-top: 1em">--mtu MTU and selector
(PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--rate Rate and selector
(PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--pkt_lifetime Packet lifetime
and selector (PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--qkey Q_Key (MCMemberRecord).
If non-numeric value (like &rsquo;x&rsquo;) is specified
<br>
then saquery will prompt for a value</p>

<p style="margin-top: 1em">--tclass Traffic Class
(PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--flow_label Flow Label
(PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--hop_limit Hop limit
(PathRecord, MCMemberRecord)</p>

<p style="margin-top: 1em">--scope Scope
(MCMemberRecord)</p>

<p style="margin-top: 1em">--join_state Join state
(MCMemberRecord)</p>

<p style="margin-top: 1em">--proxy_join Proxy join
(MCMemberRecord)</p>

<p style="margin-top: 1em">--service_id ServiceID
(PathRecord)</p>

<p style="margin-top: 1em">Supported query names (and
aliases):</p>

<p style="margin-top: 1em">ClassPortInfo (CPI) <br>
NodeRecord (NR) [lid] <br>
PortInfoRecord (PIR) [[lid]/[port]/[options]] <br>
SL2VLTableRecord (SL2VL) [[lid]/[in_port]/[out_port]] <br>
PKeyTableRecord (PKTR) [[lid]/[port]/[block]] <br>
VLArbitrationTableRecord (VLAR) [[lid]/[port]/[block]] <br>
InformInfoRecord (IIR) <br>
LinkRecord (LR) [[from_lid]/[from_port]]
[[to_lid]/[to_port]] <br>
ServiceRecord (SR) <br>
PathRecord (PR) <br>
MCMemberRecord (MCMR) <br>
LFTRecord (LFTR) [[lid]/[block]] <br>
MFTRecord (MFTR) [[mlid]/[position]/[block]] <br>
GUIDInfoRecord (GIR) [[lid]/[block]] <br>
SwitchInfoRecord (SWIR) [lid] <br>
SMInfoRecord (SMIR) [lid]</p>

<p style="margin-top: 1em">Port Selection flags <br>
-C, --Ca &lt;ca_name&gt; use the specified ca_name.</p>

<p style="margin-top: 1em">-P, --Port &lt;ca_port&gt; use
the specified ca_port.</p>

<p style="margin-top: 1em">Local port Selection <br>
Multiple port/Multiple CA support: when no IB device or port
is specified (see the &quot;local umad parameters&quot;
below), the libibumad library selects the port to use by the
following <br>
criteria:</p>

<p style="margin-top: 1em">1. the first port that is
ACTIVE.</p>

<p style="margin-top: 1em">2. if not found, the first port
that is UP (physical link up).</p>

<p style="margin-top: 1em">If a port and/or CA name is
specified, the libibumad library attempts to fulfill the
user request, and will fail if it is not possible.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">ibaddr # use the first port
(criteria #1 above) <br>
ibaddr -C mthca1 # pick the best port from
&quot;mthca1&quot; only. <br>
ibaddr -P 2 # use the second (active/up) port from the first
available IB device. <br>
ibaddr -C mthca0 -P 2 # use the specified port only.</p>

<p style="margin-top: 1em">Debugging flags <br>
-d raise the IB debugging level. May be used several times
(-ddd or -d -d -d).</p>

<p style="margin-top: 1em">-e show send and receive errors
(timeouts and others)</p>

<p style="margin-top: 1em">-h, --help show the usage
message</p>

<p style="margin-top: 1em">-v, --verbose <br>
increase the application verbosity level. May be used
several times (-vv or -v -v -v)</p>

<p style="margin-top: 1em">-V, --version show the version
info.</p>

<p style="margin-top: 1em">Configuration flags <br>
-t, --timeout &lt;timeout_ms&gt; override the default
timeout for the solicited mads.</p>

<p style="margin-top: 1em">--outstanding_smps, -o
&lt;val&gt; <br>
Specify the number of outstanding SMP&rsquo;s which should
be issued during the scan</p>

<p style="margin-top: 1em">Default: 2</p>

<p style="margin-top: 1em">--node-name-map
&lt;node-name-map&gt; Specify a node name map. <br>
This file maps GUIDs to more user friendly names. See FILES
section.</p>

<p style="margin-top: 1em">--config, -z &lt;config_file&gt;
Specify alternate config file. <br>
Default: /etc/infiniband-diags/ibdiag.conf</p>

<p style="margin-top: 1em">COMMON FILES <br>
CONFIG FILE <br>
/etc/infiniband-diags/ibdiag.conf</p>

<p style="margin-top: 1em">A global config file is provided
to set some of the common options for all tools. See
supplied config file for details.</p>

<p style="margin-top: 1em">NODE NAME MAP FILE FORMAT <br>
The node name map is used to specify user friendly names for
nodes in the output. GUIDs are used to perform the
lookup.</p>

<p style="margin-top: 1em">This functionality is provided
by the opensm-libs package. See opensm(8) for the file
location for your installation.</p>

<p style="margin-top: 1em">Generically:</p>

<p style="margin-top: 1em"># comment <br>
&lt;guid&gt; &quot;&lt;name&gt;&quot;</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em"># IB1 <br>
# Line cards <br>
0x0008f104003f125c &quot;IB1 (Rack 11 slot 1 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; <br>
0x0008f104003f125d &quot;IB1 (Rack 11 slot 1 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; <br>
0x0008f104003f10d2 &quot;IB1 (Rack 11 slot 2 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; <br>
0x0008f104003f10d3 &quot;IB1 (Rack 11 slot 2 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; <br>
0x0008f104003f10bf &quot;IB1 (Rack 11 slot 12 )
ISR9288/ISR9096 Voltaire sLB-24D&quot;</p>

<p style="margin-top: 1em"># Spines <br>
0x0008f10400400e2d &quot;IB1 (Rack 11 spine 1 ) ISR9288
Voltaire sFB-12D&quot; <br>
0x0008f10400400e2e &quot;IB1 (Rack 11 spine 1 ) ISR9288
Voltaire sFB-12D&quot; <br>
0x0008f10400400e2f &quot;IB1 (Rack 11 spine 1 ) ISR9288
Voltaire sFB-12D&quot; <br>
0x0008f10400400e31 &quot;IB1 (Rack 11 spine 2 ) ISR9288
Voltaire sFB-12D&quot; <br>
0x0008f10400400e32 &quot;IB1 (Rack 11 spine 2 ) ISR9288
Voltaire sFB-12D&quot;</p>

<p style="margin-top: 1em"># GUID Node Name <br>
0x0008f10400411a08 &quot;SW1 (Rack 3) ISR9024 Voltaire
9024D&quot; <br>
0x0008f10400411a28 &quot;SW2 (Rack 3) ISR9024 Voltaire
9024D&quot; <br>
0x0008f10400411a34 &quot;SW3 (Rack 3) ISR9024 Voltaire
9024D&quot; <br>
0x0008f104004119d0 &quot;SW4 (Rack 3) ISR9024 Voltaire
9024D&quot;</p>

<p style="margin-top: 1em">DEPENDENCIES <br>
OpenSM (or other running SM/SA), libosmcomp, libibumad,
libibmad</p>

<p style="margin-top: 1em">AUTHORS <br>
Ira Weiny <br>
&lt; ira.weiny@intel.com &gt;</p>

<p style="margin-top: 1em">Hal Rosenstock <br>
&lt; halr@mellanox.com &gt;</p>
 
<p style="margin-top: 1em">SAQUERY(8)</p>
<hr>
</body>
</html>
