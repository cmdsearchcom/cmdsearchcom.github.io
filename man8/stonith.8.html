<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>STONITH(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">STONITH(8)</td>
    <td class="head-vol">System administration utilitie</td>
    <td class="head-rtitle">STONITH(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
stonith - extensible interface for remotely powering down a node in the cluster
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>stonith</b>
  <b>-h</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>stonith</b>
  [ <b>-s</b>] [<b>-h</b>] <b>-L</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>stonith</b>
  [ <b>-s</b>] [<b>-h</b>] <b>-t</b>&#x00A0;<i>stonith-device-type</i>
  <b>-n</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>stonith</b>
  [ <b>-s</b>] [<b>-h</b>] <b>-t</b>&#x00A0;<i>stonith-device-type</i>
  {<i>name</i>= <i>value</i>... |
  <b>-p</b>&#x00A0;<i>stonith-device-parameters</i> |
  <b>-F</b>&#x00A0;<i>stonith-device-parameters-file</i>} [
  <b>-c</b>&#x00A0;<i>count</i>] [ <b>-l</b>] [<b>-S</b>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>stonith</b>
  [ <b>-s</b>] [<b>-h</b>] <b>-t</b>&#x00A0;<i>stonith-device-type</i>
  {<i>name</i>= <i>value</i>... |
  <b>-p</b>&#x00A0;<i>stonith-device-parameters</i> |
  <b>-F</b>&#x00A0;<i>stonith-device-parameters-file</i>} [
  <b>-c</b>&#x00A0;<i>count</i>] [
  <b>-T</b>&#x00A0;{reset&#x00A0;|&#x00A0;on&#x00A0;|&#x00A0;off}] [
  <i>nodename</i>]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The STONITH module provides an extensible interface for remotely powering down a
  node in the cluster (STONITH = Shoot The Other Node In The Head). The idea is
  quite simple: when the software running on one machine wants to make sure
  another machine in the cluster is not using a resource, pull the plug on the
  other machine. It's simple and reliable, albeit admittedly brutal.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The following options are supported:
<div class="Pp"></div>
<b>-c</b> <i>count</i>
<div style="margin-left: 4.00ex;">Perform any actions identified by the
  <b>-l</b>, <b>-S</b> and <b>-T</b> options <i>count</i> times.</div>
<div class="Pp"></div>
<b>-F</b> <i>stonith-device-parameters-file</i>
<div style="margin-left: 4.00ex;">Path of file specifying parameters for a
  stonith device. To determine the syntax of the parameters file for a given
  device type run:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t stonith-device-type -n</b>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
All of the listed parameters need to appear in order on a single line in the
  parameters file and be delimited by whitespace.</div>
<div class="Pp"></div>
<b>-h</b>
<div style="margin-left: 4.00ex;">Display detailed information about a stonith
  device including description, configuration information, parameters and any
  other related information. When specified without a stonith-device-type,
  detailed information on all stonith devices is displayed.
<div style="height: 1.00em;">&#x00A0;</div>
If you don't yet own a stonith device and want to know more about the ones we
  support, this information is likely to be helpful.</div>
<div class="Pp"></div>
<b>-L</b>
<div style="margin-left: 4.00ex;">List the valid stonith device types, suitable
  for passing as an argument to the <b>-t</b> option.</div>
<div class="Pp"></div>
<b>-l</b>
<div style="margin-left: 4.00ex;">List the hosts controlled by the stonith
  device.</div>
<div class="Pp"></div>
<b>-n</b>
<div style="margin-left: 4.00ex;">Output the parameter names of the stonith
  device.</div>
<div class="Pp"></div>
<i>name</i>=<i>value</i>
<div style="margin-left: 4.00ex;">Parameter, in the form of a name/value pair,
  to pass directly to the stonith device. To determine the syntax of the
  parameters for a given device type run:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t stonith-device-type -n</b>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
All of the listed parameter names need to be passed with their corresponding
  values.</div>
<div class="Pp"></div>
<b>-p</b> <i>stonith-device-parameters</i>
<div style="margin-left: 4.00ex;">Parameters to pass directly to the stonith
  device. To determine the syntax of the parameters for a given device type run:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t stonith-device-type -n</b>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
All of the listed parameter names need to appear in order and be delimited by
  whitespace.</div>
<div class="Pp"></div>
<b>-S</b>
<div style="margin-left: 4.00ex;">Show the status of the stonith device.</div>
<div class="Pp"></div>
<b>-s</b>
<div style="margin-left: 4.00ex;">Silent operation. Suppress logging of error
  messages to standard error.</div>
<div class="Pp"></div>
<b>-T</b> <i>action</i>
<div style="margin-left: 4.00ex;">The stonith action to perform on the node
  identified by nodename. Chosen from reset, on, and off.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
If a nodename is specified without the <b>-T</b> option, the stonith action
  defaults to reset.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
<b>-t</b> <i>stonith-device-type</i>
<div style="margin-left: 4.00ex;">The type of the stonith device to be used to
  effect stonith. A list of supported devices for an installation may be
  obtained using the <b>-L</b> option.</div>
<div class="Pp"></div>
<b>-v</b>
<div style="margin-left: 4.00ex;">Ignored.</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To determine which stonith devices are available on your installation, use the
  <b>-L</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -L</b>
</pre>
</div>
<div class="Pp"></div>
All of the supported devices will be displayed one per line. Choose one from
  this list that is best for your environment - let's use wti_nps for the rest
  of this example. To get detailed information about this device, use the
  <b>-h</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps -h</b>
</pre>
</div>
<div class="Pp"></div>
Included in the output is the list of valid parameter names for wti_nps. To get
  <i>just</i> the list of valid parameter names, use the <b>-n</b> option
  instead:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps -n</b>
</pre>
</div>
<div class="Pp"></div>
All of the required parameter names will be displayed one per line. For wti_nps
  the output is:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ipaddr
password
</pre>
</div>
<div class="Pp"></div>
There are three ways to pass these parameters to the device. The first (and
  preferred) way is by passing name/value pairs on the <b>stonith</b> command
  line:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps ipaddr=my-dev-ip password=my-dev-pw ...</b>
</pre>
</div>
<div class="Pp"></div>
The second way, which is maintained only for backward compatibility with legacy
  clusters, is passing the values <i>in order</i> on the <b>stonith</b> command
  line with the <b>-p</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps -p &quot;my-dev-ip my-dev-pw&quot; ...</b>
</pre>
</div>
<div class="Pp"></div>
The third way, which is also maintained only for backward compatibility with
  legacy clusters, is placing the values <i>in order</i> on a single line in a
  config file:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
my-dev-ip my-dev-pw
</pre>
</div>
<div class="Pp"></div>
... and passing the name of the file on the stonith command line with the
  <b>-F</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps -F ~/my-wtinps-config ...</b>
</pre>
</div>
<div class="Pp"></div>
To make sure you have the configuration set up correctly and that the device is
  available for stonith operations, use the <b>-S</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps ipaddr=my-dev-ip password=my-dev-pw -S</b>
</pre>
</div>
<div class="Pp"></div>
If all is well at this point, you should see something similar to:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
stonith: wti_nps device OK.
</pre>
</div>
<div class="Pp"></div>
If you don't, some debugging may be necessary to determine if the config info is
  correct, the device is powered on, etc. The <b>-d</b> option can come in handy
  here - you can add it to any <b>stonith</b> command to cause it to generate
  debug output.
<div class="Pp"></div>
To get the list of hosts controlled by the device, use the <b>-l</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps ipaddr=my-dev-ip password=my-dev-pw -l</b>
</pre>
</div>
<div class="Pp"></div>
All of the hosts controlled by the device will be displayed one per line. For
  wti_nps the output could be:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node1
    node2
    node3
</pre>
</div>
<div class="Pp"></div>
To power off one of these hosts, use the <b>-T</b> option:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#  <b>stonith -t wti_nps ipaddr=my-dev-ip password=my-dev-pw -T off </b><b></b><i>node</i>
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>heartbeat</b>(8), <b>meatclient</b>(8)
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<b>Alan Robertson</b> &lt;alanr@unix.sh&gt;
<div style="margin-left: 4.00ex;">stonith</div>
<div class="Pp"></div>
<b>Simon Horman</b> &lt;horms@vergenet.net&gt;
<div style="margin-left: 4.00ex;">man page</div>
<div class="Pp"></div>
<b>Florian Haas</b> &lt;florian.haas@linbit.com&gt;
<div style="margin-left: 4.00ex;">man page</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">December 7, 2009</td>
    <td class="foot-os">cluster-glue 1.0.12</td>
  </tr>
</table>
</body>
</html>
