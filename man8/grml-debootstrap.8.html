<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:40 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GRML-DEBOOTSTRAP(8) GRML-DEBOOTSTRAP(8)</p>

<p style="margin-top: 1em">NAME <br>
grml-debootstrap - wrapper around debootstrap for installing
plain Debian</p>

<p style="margin-top: 1em">SYNOPSIS <br>
grml-debootstrap [ options ]</p>

<p style="margin-top: 1em">[IMAGE][1] [Screenshot]</p>

<p style="margin-top: 1em">INTRODUCTION <br>
grml-debootstrap is a wrapper suite around debootstrap (and
cdebootstrap if you want) for installing a plain Debian
system very fast and easy.</p>

<p style="margin-top: 1em">All you have to do is adjust a
few variables in the configuration file
/etc/debootstrap/config or specify some command line options
and invoke grml-debootstrap. If invoked <br>
without any configuration modifications or command line
options a dialog based frontend will be available to control
some basic configuration options.</p>

<p style="margin-top: 1em">A plain and base Debian system
will be installed on the given device, directory or virtual
image file then. Customization of this process is possible
as well.</p>

<p style="margin-top: 1em">Caution <br>
The Grml team does not take responsibility for loss of any
data!</p>

<p style="margin-top: 1em">OPTIONS AND ENVIRONMENT
VARIABLES <br>
--arch architecture <br>
Set target architecture you want to install. Defaults to the
architecture you are currently running. If you&acirc;re
running an amd64 kernel and want to deploy an i386 system
use <br>
this option. Note: deploying amd64 from an i386 kernel does
not work. Example: &quot;--arch i386&quot;</p>

<p style="margin-top: 1em">--backportrepos <br>
Enable Debian&acirc;s Backports repository
(http://backports.debian.org/) via the
/etc/apt/sources.list.d/backports.list configuration file.
This provides the option to install <br>
Debian packages from Debian&acirc;s backports
repository.</p>

<p style="margin-top: 1em">--bootappend
appendline-for-the-kernel <br>
Specify appendline for the kernel. E.g.
&quot;pci=nomsi&quot;</p>

<p style="margin-top: 1em">-c, --config file <br>
Use specified configuration file, defaults to
/etc/debootstrap/config.</p>

<p style="margin-top: 1em">--chroot-scripts directory <br>
Execute chroot scripts from specified directory. This allows
customisation of the chroot setup, the executable script(s)
present in the given directory are executed at the <br>
end of the chroot procedure. Default directory:
/etc/debootstrap/chroot-scripts/</p>

<p style="margin-top: 1em">--contrib <br>
Enable the contrib repository in COMPONENTS. By default only
the main repository is enabled.</p>

<p style="margin-top: 1em">-d, --confdir path <br>
Place of configuration files for debootstrap, defaults to
/etc/debootstrap.</p>

<p style="margin-top: 1em">--debconf file <br>
Use specified file for preseeding Debian packages instead of
using the default &lt;confdir&gt;/debconf-selections.</p>

<p style="margin-top: 1em">--debopt params <br>
Extra parameters passed to the debootstrap command.</p>

<p style="margin-top: 1em">--debug <br>
Execute in very verbose way. Useful for debugging possible
problems with grml-debootstrap or identify what&acirc;s
actually executed.</p>

<p style="margin-top: 1em">--efi device <br>
Partition where EFI boot manager should be installed to. If
the specified device doesn&acirc;t use a FAT filesystem yet
grml-debootstrap automatically creates the filesystem. If a
<br>
FAT filesystem is already present the filesystem creation is
skipped. Please ensure that it&acirc;s a valid FAT32
filesystem and the partition has the boot and esp flags
enabled. <br>
This option requires EFI support on the running system and
the option is NOT supported for Virtual Machine
deployments.</p>

<p style="margin-top: 1em">--filesystem filesystem <br>
Filesystem that should be created when installing to a
partition. If unset defaults to ext4. Valid values are all
filesystems that can be created through mkfs.filesystem.</p>

<p style="margin-top: 1em">--force <br>
Skip user acknowledgement and do not prompt for user
input.</p>

<p style="margin-top: 1em">--grmlrepos <br>
Enable Grml.org&acirc;s Debian repository
(http://deb.grml.org/) via the
/etc/apt/sources.list.d/grml.list configuration file. This
provides the option to install Debian packages <br>
from Grml&acirc;s repository.</p>

<p style="margin-top: 1em">--grub device <br>
Device where grub should be installed to. Note that only the
MBR (master boot record) can be used (/dev/sda,
/dev/sdb,...). Partitions (like /dev/sda1, /dev/sdb2,...)
are NOT <br>
supported because grub2 doesn&acirc;t support installation
into the PBR (partition boot record) anymore. Usage example:
--grub /dev/sda. Note: just do not set this option to avoid
<br>
installation of grub.</p>

<p style="margin-top: 1em">--help, -h <br>
Show summary of options and exit.</p>

<p style="margin-top: 1em">--hostname hostname <br>
Use specified hostname instead of the default (being
$HOSTNAME or if unset grml).</p>

<p style="margin-top: 1em">-i, --iso /mntpoint <br>
Specify mount point where you have a Debian ISO mounted
loopback. Using this option instead of the mirror option
gives you the possibility to install the base-system without
<br>
network access. Make sure you mounted the according
Debian-ISO to the given /mntpoint. See section Usage
examples for a demonstration.</p>

<p style="margin-top: 1em">--keep_src_list <br>
Do not overwrite user provided /etc/apt/sources.list.</p>

<p style="margin-top: 1em">-m, --mirror URL <br>
Specify mirror which should be used for apt-get/aptitude.
Corresponding with configuration variable MIRROR.</p>

<p style="margin-top: 1em">--nodebootstrap <br>
Skip debootstrap, only do configuration to the target.</p>

<p style="margin-top: 1em">--nointerfaces <br>
Do not copy /etc/network/interfaces from host system to the
target. This option is automatically enabled when using --vm
or --vmfile.</p>

<p style="margin-top: 1em">--nokernel <br>
Skip installation of default kernel images. This option
might be interesting for you if you want a Debian system
which doesn&acirc;t need to provide regular boot, e.g. a
system <br>
which provides ISOs for booting via GRUB using
grml-rescueboot.</p>

<p style="margin-top: 1em">--non-free <br>
Enable the non-free repository in COMPONENTS. By default
only the main repository is enabled.</p>

<p style="margin-top: 1em">--nopackages <br>
Skip installation of packages defined in
/etc/debootstrap/packages.</p>

<p style="margin-top: 1em">--nopassword <br>
Do not prompt for the root password. Note: Use the
--password option if you want to set the root password
during an automatic installation but don&acirc;t want to use
the <br>
interactive dialog.</p>

<p style="margin-top: 1em">-p, --mntpoint /mntpoint <br>
Specify mount point that should be used for mounting the
target system. Corresponding with configuration variable
MNTPOINT. Note: this option has no effect if option -t is
<br>
given and represents a directory.</p>

<p style="margin-top: 1em">--packages file <br>
Use specified file as list for packages that should be
installed instead of the default package list file
&lt;confdir&gt;/packages.</p>

<p style="margin-top: 1em">--password password <br>
Use specified password as password for user root. Use with
caution, as your command line might be visible in the
process list and the shell history. It&acirc;s meant for
automatic <br>
installation only.</p>

<p style="margin-top: 1em">--post-scripts directory <br>
Execute scripts from specified directory after executing the
chroot script. This allows customisation of the system after
the chroot has been set up. The environment variable <br>
$MNTPOINT is available inside the scripts for direct access
of the chroot. Default directory:
/etc/debootstrap/post-scripts/</p>

<p style="margin-top: 1em">--pre-scripts directory <br>
Execute scripts from specified directory before executing
the chroot script. This allows customisation of the system
before the chroot has been set up. The environment <br>
variable $MNTPOINT is available inside the scripts for
direct access of the chroot. Default directory:
/etc/debootstrap/pre-scripts/</p>

<p style="margin-top: 1em">-r, --release releasename <br>
Specify release of new Debian system. Supported releases
names: lenny, squeeze, wheezy, jessie, stretch and sid.
Corresponding with configuration variable RELEASE. Default
<br>
release: stretch</p>

<p style="margin-top: 1em">--remove-configs <br>
Delete grml-debootstrap configuration files
(/etc/debootstrap/*) from installed system. Useful for
reproducible builds or if you don&acirc;t want to leak
information.</p>

<p style="margin-top: 1em">-t, --target target <br>
Target partition (/dev/...) or directory (anything else
without /dev at the beginning).</p>

<p style="margin-top: 1em">-v, --verbose <br>
Increase verbosity.</p>

<p style="margin-top: 1em">--vm <br>
Set up a Virtual Machine on an existing block device, which
will be partitioned. This allows deployment of a Virtual
Machine. The options needs to be combined with the <br>
--target option. Usage example: --vm --target
/dev/mapper/your-vm-disk</p>

<p style="margin-top: 1em">--vmfile <br>
Set up a Virtual Machine using a regular file instead of
installing to a partition/block device or directory. This
allows deployment of a Virtual Machine. The options needs
<br>
to be combined with the --target option (qemu-img create -f
raw ... is executed on the specified target). Usage example:
--vmfile --target /mnt/sda1/qemu.img</p>

<p style="margin-top: 1em">--vmsize size <br>
Use specified size for size of Virtual Machine disk file. If
not specified it defaults to 2G (being 2GB). Syntax as
supported by qemu-img (see manpage qemu-img(1) for <br>
details. Usage example: --vmsize 3G</p>

<p style="margin-top: 1em">-V, --version <br>
Show version of program and exit.</p>

<p style="margin-top: 1em">Warning <br>
the command line parsing of grml-debootstrap usually does
not validate the provided arguments for the command line
options. Please be careful and check docs and <br>
/etc/debootstrap/config for further information.</p>

<p style="margin-top: 1em">USAGE EXAMPLES <br>
grml-debootstrap --target /dev/sda1 --grub /dev/sda</p>

<p style="margin-top: 1em">Install default Debian release
(stretch) on /dev/sda1 and install bootmanager Grub in MBR
(master boot record) of /dev/sda and use /dev/sda1 as system
partition.</p>

<p style="margin-top: 1em">grml-debootstrap --target
/dev/sda6 --grub /dev/sda --release sid</p>

<p style="margin-top: 1em">Install Debian unstable/sid on
/dev/sda6, install bootmanager Grub in MBR (master boot
record) of /dev/sda and use /dev/sda6 as system
partition.</p>

<p style="margin-top: 1em">mount /dev/sda1 /data/chroot
<br>
grml-debootstrap --target /data/chroot</p>

<p style="margin-top: 1em">Install default Debian release
(stretch) in directory /data/chroot (without any
bootloader).</p>

<p style="margin-top: 1em">grml-debootstrap --target
/dev/sda3 --grub /dev/sda --mirror
ftp://ftp.tugraz.at/mirror/debian</p>

<p style="margin-top: 1em">Install default Debian release
(stretch) on /dev/sda3 and install bootmanager Grub in MBR
(master boot record) of /dev/sda and use /dev/sda3 as system
partition. Use specified <br>
mirror instead of the default
(http://httpredir.debian.org/debian) one.</p>

<p style="margin-top: 1em">mount /dev/sda1 /mnt/sda1 <br>
grml-debootstrap --vmfile --vmsize 3G --target
/mnt/sda1/qemu.img</p>

<p style="margin-top: 1em">Install default debian release
(stretch) in a Virtual Machine file with 3GB disk size
(including Grub as bootmanager in MBR of the virtual disk
file):</p>

<p style="margin-top: 1em">mount -o loop
/mnt/sda6/debian-CD-1.iso /mnt/iso <br>
grml-debootstrap --target /dev/sda1 --grub /dev/sda --iso
file:/mnt/iso/debian/</p>

<p style="margin-top: 1em">Install Debian on /dev/sda1
using the loopback mounted Debian-ISO for the base-system
and install bootmanager Grub in MBR (master boot record) of
/dev/sda and use /dev/sda1 as <br>
system partition. Please notice, that the chroot system
requires network access for all packages which are not part
of the ISO.</p>

<p style="margin-top: 1em">FILES <br>
/etc/debootstrap/config</p>

<p style="margin-top: 1em">Main configuration file. Adjust
it according to your needs if you want to execute
grml-debootstrap in the non-interactive mode without any
special command line arguments.</p>


<p style="margin-top: 1em">/etc/debootstrap/chroot-script</p>

<p style="margin-top: 1em">The script executed within the
new Debian system as soon as the main system has been
installed via [c]debootstrap.</p>

<p style="margin-top: 1em">/etc/debootstrap/locale.gen</p>

<p style="margin-top: 1em">Defines the default locales used
for generating locales via locale-gen.</p>

<p style="margin-top: 1em">/etc/debootstrap/packages</p>

<p style="margin-top: 1em">Defines the software packages
which should be installed in the new Debian system by
default.</p>


<p style="margin-top: 1em">/etc/debootstrap/extrapackages/</p>

<p style="margin-top: 1em">Debian Packages dropped in this
directory will be installed into the new Debian system by
default (Control variable: EXTRAPACKAGES)</p>

<p style="margin-top: 1em">CUSTOMIZATION <br>
You can control execution of grml-debootstrap via adjusting
/etc/debootstrap/config for some main stuff or via setting
some selected variables via command line. The packages <br>
which should be installed in the new Debian system can be
defined via the file /etc/debootstrap/packages. If you want
to put existing files to the new Debian system you can place
<br>
them into the (by default non-existing) directories boot,
etc, share, usr and var in /etc/debootstrap/. Every existing
directory will be copied to the new Debian system then. If
<br>
you want to install additional packages that are not
available via the Grml or Debian mirror drop them into
/etc/debootstrap/extrapackages and make sure that
EXTRAPACKAGES is set <br>
to &quot;yes&quot;.</p>

<p style="margin-top: 1em">AUTOMATIC INSTALLATION <br>
If environment variable AUTOINSTALL is set grml-debootstrap
can be executed in a full automatic mode. While this mode
isn&acirc;t really useful for interactive execution (just
<br>
configure /etc/debootstrap/configure or specify the relevant
variables on the command line instead) it is meant for use
via boot option debian2hd on the Grml live system. The <br>
boot option debian2hd (more precise: the kernelname at the
bootprompt) supports the following boot options (they
correspond with the command line options mentioned
above):</p>

<p style="margin-top: 1em">target=...</p>

<p style="margin-top: 1em">The target partition/directory
of the new Debian system. Usage example:
target=/dev/sda1</p>

<p style="margin-top: 1em">grub=...</p>

<p style="margin-top: 1em">Where do you want to install
grub to? Usage example: grub=/dev/sda</p>

<p style="margin-top: 1em">release=...</p>

<p style="margin-top: 1em">Specify release of new Debian
system. Defaults to Debian stretch. Supported releases:
lenny, squeeze, wheezy, jessie, stretch and sid. Usage
example: release=sid</p>

<p style="margin-top: 1em">mirror=...</p>

<p style="margin-top: 1em">Specify mirror which should be
used for apt-get/aptitude instead of the default one
(http://httpredir.debian.org/debian). Usage example:
mirror=ftp://ftp.tugraz.at/mirror/debian</p>

<p style="margin-top: 1em">password=...</p>

<p style="margin-top: 1em">Set password of user root
without prompting for it but set it to the given argument.
Usage example: password=AiTh5ahn</p>

<p style="margin-top: 1em">Usage example for automatic
installation <br>
debian2hd target=/dev/sda1 grub=/dev/sda
mirror=ftp://ftp.tugraz.at/mirror/debian password=foobar</p>

<p style="margin-top: 1em">You have to enter this command
line at the bootprompt of the Grml live system. Please make
sure that /dev/sda1 is the partition where you really want
to install your new Debian <br>
system.</p>

<p style="margin-top: 1em">Note <br>
Automatic installation within booting process is done in
grml-autoconfig via setting environment variable AUTOINSTALL
and creation of /usr/bin/grml-debootstrap_noninteractive
<br>
with the available and relevant boot options for
grml-debootstrap.</p>

<p style="margin-top: 1em">SUPPORTED RELEASES <br>
Table 1. Current status <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc;Release &acirc; Status &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;lenny &acirc; works[1] &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;squeeze &acirc; works[1] &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;wheezy &acirc; works &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;jessie &acirc; works &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;stretch &acirc; works &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; &acirc; <br>
&acirc;sid &acirc; works[2] &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;</p>

<p style="margin-top: 1em">lenny/squeeze release <br>
[1] Please notice that lenny and squeeze are unsupported
releases within Debian nowadays. grml-debootstrap can handle
the releases but you really should not use them anymore <br>
unless you really know what you are doing. Choose the
current Debian stable version instead.</p>

<p style="margin-top: 1em">Notice that you need to specify
a mirror providing the lenny/squeeze releases, the default
(http://httpredir.debian.org/debian) doesn&acirc;t provide
it any longer nowadays. Set <br>
the mirror to e.g. http://archive.debian.org/debian/ if you
don&acirc;t have your own lenny/squeeze mirror.</p>

<p style="margin-top: 1em">You also need to specify a
filesystem that&acirc;s supported by lenny, e.g.
--filesystem ext3 since grml-debootstrap&acirc;s current
default (ext4) isn&acirc;t supported by lenny.</p>

<p style="margin-top: 1em">Also when debootstrapping lenny
on a live system with a kernel version like
&quot;3.16-1-grml-amd64&quot; lenny&acirc;s libc will fail
to install with:</p>

<p style="margin-top: 1em">[...] <br>
/var/lib/dpkg/tmp.ci/preinst: line 265: [:
3.16-1-grml-amd64: integery expression expected <br>
/var/lib/dpkg/tmp.ci/preinst: line 231: 3.16-1-grml-amd64:
syntax error: invalid arithemtic operator (error token is
&quot;.16-1-grml-amd64&quot;) <br>
dpkg: error processing
/var/cache/apt/archives/libc6_2.7-18lenny7_amd64.deb
(--install): <br>
[....]</p>

<p style="margin-top: 1em">To workaround this either
debootstrap from a system with an according kernel version
or use the &quot;fake uname&quot; workaround (just google
for it).</p>

<p style="margin-top: 1em">When installing lenny to a new
mdraid, grml-debootstrap will use md metadata format version
0.90. This limits the device to a maximum size of 2TB, but
has the advantage of <br>
grub-legacy actually being able to boot from it.</p>

<p style="margin-top: 1em">unstable and testing releases
<br>
[2] Please notice that Debian/testing and Debian/unstable
(sid) might not be always installable due to their nature.
What might work instead is deploying a stable release and
<br>
upgrade it after installation finished.</p>

<p style="margin-top: 1em">BUGS <br>
Probably. Please send bugreports to Michael Prokop
&lt;mika@grml.org[2]&gt;.</p>

<p style="margin-top: 1em">SEE ALSO <br>
debootstrap (8), cdebootstrap (1).</p>

<p style="margin-top: 1em">AUTHOR <br>
Michael Prokop &lt;mika@grml.org[2]&gt;</p>

<p style="margin-top: 1em">NOTES <br>
1.
http://grml.org/grml-debootstrap/images/screenshot.png</p>

<p style="margin-top: 1em">2. mika@grml.org <br>
mailto:mika@grml.org</p>

<p style="margin-top: 1em">01/26/2017
GRML-DEBOOTSTRAP(8)</p>
<hr>
</body>
</html>
