<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DMSETUP(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DMSETUP(8)</td>
    <td class="head-vol">MAINTENANCE COMMANDS</td>
    <td class="head-rtitle">DMSETUP(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dmsetup &#x2014; low level logical volume management
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>dmsetup</b>
  <b>clear</b> <i>device_name</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>create</b> <i>device_name</i> [<b>-u</b>|<b>--uuid</b> <i>uuid</i>]
  [<b>--addnodeoncreate</b>|<b>--addnodeonresume</b>]
  [<b>-n</b>|<b>--notable</b>|<b>--table</b> {<i>table</i>|<i>table_file</i>}]
  [<b>--readahead</b>
  {[<b>+</b>]<b><i>sectors</i></b><i>|</i><b><i>auto</i></b><i>|</i><b><i>none</i></b><i>}]</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>deps</b> [<b>-o</b> <i>options</i>] [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>help</b> [<b>-c</b>|<b>-C</b>|<b>--columns</b>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>info</b> [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>info</b> <b>-c</b>|<b>-C</b>|<b>--columns</b> [<b>--count</b> <i>count</i>]
  [<b>--interval</b> <i>seconds</i>] [<b>--nameprefixes</b>]
  [<b>--noheadings</b>] [<b>-o</b> <i>fields</i>] [<b>-O</b>|<b>--sort</b>
  <i>sort_fields</i>] [<b>--separator</b> <i>separator</i>]
  [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>load</b> <i>device_name</i> [<b>--table</b>
  {<i>table</i>|<i>table_file</i>}]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>ls</b> [<b>--target</b> <i>target_type</i>] [<b>--exec</b> <i>command</i>]
  [<b>--tree</b>] [<b>-o</b> <i>options</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>mangle</b> [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>message</b> <i>device_name</i> <i>sector</i> <i>message</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>mknodes</b> [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>reload</b> <i>device_name</i> [<b>--table</b>
  {<i>table</i>|<i>table_file</i>}]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>remove</b> [<b>-f</b>|<b>--force</b>] [<b>--retry</b>] [<b>--deferred</b>]
  <i>device_name</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>remove_all</b> [<b>-f</b>|<b>--force</b>] [<b>--deferred</b>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>rename</b> <i>device_name</i> <i>new_name</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>rename</b> <i>device_name</i> <b>--setuuid</b> <i>uuid</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>resume</b> <i>device_name</i>
  [<b>--addnodeoncreate</b>|<b>--addnodeonresume</b>] [<b>--noflush</b>]
  [<b>--nolockfs</b>] [<b>--readahead</b>
  {[<b>+</b>]<b><i>sectors</i></b><i>|</i><b><i>auto</i></b><i>|</i><b><i>none</i></b><i>}]</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>setgeometry</b> <i>device_name</i> <i>cyl</i> <i>head</i> <i>sect</i>
  <i>start</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>splitname</b> <i>device_name</i> [<i>subsystem</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>stats</b> <i>command</i> [<i>options</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>status</b> [<b>--target</b> <i>target_type</i>] [<b>--noflush</b>]
  [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>suspend</b> [<b>--nolockfs</b>] [<b>--noflush</b>] <i>device_name</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>table</b> [<b>--target</b> <i>target_type</i>] [<b>--showkeys</b>]
  [<i>device_name</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>targets</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevcomplete</b> <i>cookie</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevcomplete_all</b> [<i>age_in_minutes</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevcookie</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevcreatecookie</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevflags</b> <i>cookie</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>udevreleasecookie</b> [<i>cookie</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>version</b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>wait</b> [<b>--noflush</b>] <i>device_name</i> [<i>event_nr</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>dmsetup</b>
  <b>wipe_table</b> <i>device_name</i> [<b>-f</b>|<b>--force</b>]
  [<b>--noflush</b>] [<b>--nolockfs</b>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>devmap_name
  <i>major minor</i></b></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>devmap_name
  <i>major:minor</i></b></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
dmsetup manages logical devices that use the device-mapper driver. Devices are
  created by loading a table that specifies a target for each sector (512 bytes)
  in the logical device.
<div style="height: 1.00em;">&#x00A0;</div>
The first argument to dmsetup is a command. The second argument is the logical
  device name or uuid.
<div style="height: 1.00em;">&#x00A0;</div>
Invoking the dmsetup tool as <b>devmap_name</b> (which is not normally
  distributed and is supported only for historical reasons) is equivalent to
  <b>dmsetup&#x00A0;info&#x00A0;-c&#x00A0;--noheadings&#x00A0;-j</b><i>&#x00A0;major&#x00A0;</i><b>-m</b><i>&#x00A0;minor</i><b></b>.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--addnodeoncreate</b>
<div>&#x00A0;</div>
Ensure <i>/dev/mapper</i> node exists after <b>dmsetup create</b>.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--addnodeonresume</b>
<div>&#x00A0;</div>
Ensure <i>/dev/mapper</i> node exists after <b>dmsetup resume</b> (default with
  udev).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--checks</b>
<div>&#x00A0;</div>
Perform additional checks on the operations requested and report potential
  problems. Useful when debugging scripts. In some cases these checks may slow
  down operations noticeably.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-c</b>|<b>-C</b>|<b>--columns</b>
<div>&#x00A0;</div>
Display output in columns rather than as Field: Value lines.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--count</b>
  <i>count</i>
<div>&#x00A0;</div>
Specify the number of times to repeat a report. Set this to zero continue until
  interrupted. The default interval is one second.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-f</b>|<b>--force</b>
<div>&#x00A0;</div>
Try harder to complete operation.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-h</b>|<b>--help</b>
<div>&#x00A0;</div>
Outputs a summary of the commands available, optionally including the list of
  report fields (synonym with <b>help</b> command).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--inactive</b>
<div>&#x00A0;</div>
When returning any table information from the kernel report on the inactive
  table instead of the live table. Requires kernel driver version 4.16.0 or
  above.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--interval</b>
  <i>seconds</i>
<div>&#x00A0;</div>
Specify the interval in seconds between successive iterations for repeating
  reports. If <b>--interval</b> is specified but <b>--count</b> is not, reports
  will continue to repeat until interrupted. The default interval is one
  second.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--manglename</b>
  {<b>auto</b>|<b>hex</b>|<b>none</b>}
<div>&#x00A0;</div>
Mangle any character not on a whitelist using mangling_mode when processing
  device-mapper device names and UUIDs. The names and UUIDs are mangled on input
  and unmangled on output where the mangling mode is one of: <b>auto</b> (only
  do the mangling if not mangled yet, do nothing if already mangled, error on
  mixed), <b>hex</b> (always do the mangling) and <b>none</b> (no mangling).
  Default mode is <b>auto</b>. Character whitelist: 0-9, A-Z, a-z, #+-.:=@_.
  This whitelist is also supported by udev. Any character not on a whitelist is
  replaced with its hex value (two digits) prefixed by \x. Mangling mode could
  be also set through <b>DM_DEFAULT_NAME_MANGLING_MODE</b> environment
  variable.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-j</b>|<b>--major</b>
  <i>major</i>
<div>&#x00A0;</div>
Specify the major number.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-m</b>|<b>--minor</b>
  <i>minor</i>
<div>&#x00A0;</div>
Specify the minor number.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-n</b>|<b>--notable</b>
<div>&#x00A0;</div>
When creating a device, don't load any table.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--nameprefixes</b>
<div>&#x00A0;</div>
Add a &quot;DM_&quot; prefix plus the field name to the output. Useful with
  <b>--noheadings</b> to produce a list of field=value pairs that can be used to
  set environment variables (for example, in <b>udev</b>(7) rules).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--noheadings</b>
  Suppress the headings line when using columnar output.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--noflush</b>
  Do not flush outstading I/O when suspending a device, or do not commit
  thin-pool metadata when obtaining thin-pool status.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--nolockfs</b>
<div>&#x00A0;</div>
Do not attempt to synchronize filesystem eg, when suspending a device.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--noopencount</b>
<div>&#x00A0;</div>
Tell the kernel not to supply the open reference count for the device.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--noudevrules</b>
<div>&#x00A0;</div>
Do not allow udev to manage nodes for devices in device-mapper directory.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--noudevsync</b>
<div>&#x00A0;</div>
Do not synchronise with udev when creating, renaming or removing devices.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-o</b>|<b>--options</b>
  <i>options</i>
<div>&#x00A0;</div>
Specify which fields to display.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--readahead</b>
  {[<b>+</b>]<b><i>sectors</i></b><i>|</i><b><i>auto</i></b><i>|</i><b><i>none</i></b><i>}</i>
<div>&#x00A0;</div>
Specify read ahead size in units of sectors. The default value is <b>auto</b>
  which allows the kernel to choose a suitable value automatically. The <b>+</b>
  prefix lets you specify a minimum value which will not be used if it is
  smaller than the value chosen by the kernel. The value <b>none</b> is
  equivalent to specifying zero.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-r</b>|<b>--readonly</b>
<div>&#x00A0;</div>
Set the table being loaded read-only.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-S</b>|<b>--select</b>
  <i>selection</i>
<div>&#x00A0;</div>
Display only rows that match <i>selection</i> criteria. All rows are displayed
  with the additional &quot;selected&quot; column ( <b>-o selected</b>) showing
  1 if the row matches the <i>selection</i> and 0 otherwise. The selection
  criteria are defined by specifying column names and their valid values while
  making use of supported comparison operators. As a quick help and to see full
  list of column names that can be used in selection and the set of supported
  selection operators, check the output of
  <b>dmsetup&#x00A0;info&#x00A0;-c&#x00A0;-S&#x00A0;help</b> command.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--table</b>
  <i>table</i>
<div>&#x00A0;</div>
Specify a one-line table directly on the command line. See below for more
  information on the table format.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--udevcookie</b>
  <i>cookie</i>
<div>&#x00A0;</div>
Use cookie for udev synchronisation. Note: Same cookie should be used for same
  type of operations i.e. creation of multiple different devices. It's not
  adviced to combine different operations on the single device.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-u</b>|<b>--uuid</b>
<div>&#x00A0;</div>
Specify the <i>uuid</i>.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-y</b>|<b>--yes</b>
<div>&#x00A0;</div>
Answer yes to all prompts automatically.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-v</b>|<b>--verbose</b>
  [<b>-v</b>|<b>--verbose</b>]
<div>&#x00A0;</div>
Produce additional output.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--verifyudev</b>
<div>&#x00A0;</div>
If udev synchronisation is enabled, verify that udev operations get performed
  correctly and try to fix up the device nodes afterwards if not.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--version</b>
<div>&#x00A0;</div>
Display the library and kernel driver version.
<div>&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>clear</b>
  <i>device_name</i>
<div>&#x00A0;</div>
Destroys the table in the inactive table slot for device_name.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>create</b>
  <i>device_name</i> [<b>-u</b>|<b>--uuid</b> <i>uuid</i>]
  [<b>--addnodeoncreate</b>|<b>--addnodeonresume</b>]
  [<b>-n</b>|<b>--notable</b>|<b>--table</b> {<i>table</i>|<i>table_file</i>}]
  [<b>--readahead</b>
  {[<b>+</b>]<b><i>sectors</i></b><i>|</i><b><i>auto</i></b><i>|</i><b><i>none</i></b><i>}]</i>
<div>&#x00A0;</div>
Creates a device with the given name. If <i>table</i> or <i>table_file</i> is
  supplied, the table is loaded and made live. Otherwise a table is read from
  standard input unless <b>--notable</b> is used. The optional <i>uuid</i> can
  be used in place of device_name in subsequent dmsetup commands. If successful
  the device will appear in table and for live device the node
  <i>/dev/mapper/device_name</i> is created. See below for more information on
  the table format.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>deps</b>
  [<b>-o</b> <i>options</i>] [<i>device_name</i>]
<div>&#x00A0;</div>
Outputs a list of devices referenced by the live table for the specified device.
  Device names on output can be customised by following <i>options</i>:
  <b>devno</b> (major and minor pair, used by default), <b>blkdevname</b> (block
  device name), <b>devname</b> (map name for device-mapper devices, equal to
  blkdevname otherwise).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>help</b>
  [<b>-c</b>|<b>-C</b>|<b>--columns</b>]
<div>&#x00A0;</div>
Outputs a summary of the commands available, optionally including the list of
  report fields.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>info</b>
  [<i>device_name</i>]
<div>&#x00A0;</div>
Outputs some brief information about the device in the form:</div>
<div style="margin-left: 5.00ex;">
<div style="margin-left: 5.00ex;">
<br/>
 State: SUSPENDED|ACTIVE, READ-ONLY
<br/>
 Tables present: LIVE and/or INACTIVE
<br/>
 Open reference count
<br/>
 Last event sequence number (used by <b>wait</b>)
<br/>
 Major and minor device number
<br/>
 Number of targets in the live table
<br/>
 UUID</div>
</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>info</b>
  <b>-c</b>|<b>-C</b>|<b>--columns</b> [<b>--count</b> <i>count</i>]
  [<b>--interval</b> <i>seconds</i>] [<b>--nameprefixes</b>]
  [<b>--noheadings</b>] [<b>-o</b> <i>fields</i>] [<b>-O</b>|<b>--sort</b>
  <i>sort_fields</i>] [<b>--separator</b> <i>separator</i>] [<i>device_name</i>]
<div>&#x00A0;</div>
Output you can customise. Fields are comma-separated and chosen from the
  following list: <b>name</b>, <b>major</b>, <b>minor</b>, <b>attr</b>,
  <b>open</b>, <b>segments</b>, <b>events</b>, <b>uuid</b>. Attributes are:
  (<i>L</i>)ive, (<i>I</i>)nactive, (<i>s</i>)uspended, (<i>r</i>)ead-only,
  read-(<i>w</i>)rite. Precede the list with ' <b>+</b>' to append to the
  default selection of columns instead of replacing it. Precede any sort field
  with ' <b>-</b>' for a reverse sort on that column.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>ls</b>
  [<b>--target</b> <i>target_type</i>] [<b>--exec</b> <i>command</i>]
  [<b>--tree</b>] [<b>-o</b> <i>options</i>]
<div>&#x00A0;</div>
List device names. Optionally only list devices that have at least one target of
  the specified type. Optionally execute a command for each device. The device
  name is appended to the supplied command. Device names on output can be
  customised by following options: <b>devno</b> (major and minor pair, used by
  default), <b>blkdevname</b> (block device name), <b>devname</b> (map name for
  device-mapper devices, equal to blkdevname otherwise). <b>--tree</b> displays
  dependencies between devices as a tree. It accepts a comma-separate list of
  <i>options</i>. Some specify the information displayed against each node:
  <b>device</b>/<b>nodevice</b>; <b>blkdevname</b>; <b>active</b>, <b>open</b>,
  <b>rw</b>, <b>uuid</b>. Others specify how the tree is displayed:
  <b>ascii</b>, <b>utf</b>, <b>vt100</b>; <b>compact</b>, <b>inverted</b>,
  <b>notrunc</b>.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>load</b>|<b></b><b>reload</b>
  <i>device_name</i> [<b>--table</b> {<i>table</i>|<i>table_file</i>}]
<div>&#x00A0;</div>
Loads <i>table</i> or <i>table_file</i> into the inactive table slot for
  device_name. If neither is supplied, reads a table from standard input.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>mangle</b>
  [<i>device_name</i>]
<div>&#x00A0;</div>
Ensure existing device-mapper <i>device_name</i> and UUID is in the correct
  mangled form containing only whitelisted characters (supported by udev) and do
  a rename if necessary. Any character not on the whitelist will be mangled
  based on the <b>--manglename</b> setting. Automatic rename works only for
  device names and not for device UUIDs because the kernel does not allow
  changing the UUID of active devices. Any incorrect UUIDs are reported only and
  they must be manually corrected by deactivating the device first and then
  reactivating it with proper mangling mode used (see also
  <b>--manglename</b>).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>message</b>
  <i>device_name</i> <i>sector</i> <i>message</i>
<div>&#x00A0;</div>
Send message to target. If sector not needed use 0.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>mknodes</b>
  [<i>device_name</i>]
<div>&#x00A0;</div>
Ensure that the node in <i>/dev/mapper</i> for <i>device_name</i> is correct. If
  no device_name is supplied, ensure that all nodes in <i>/dev/mapper</i>
  correspond to mapped devices currently loaded by the device-mapper kernel
  driver, adding, changing or removing nodes as necessary.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>remove</b>
  [<b>-f</b>|<b>--force</b>] [<b>--retry</b>] [<b>--deferred</b>]
  <i>device_name</i>
<div>&#x00A0;</div>
Removes a device. It will no longer be visible to dmsetup. Open devices cannot
  be removed, but adding <b>--force</b> will replace the table with one that
  fails all I/O. <b>--deferred</b> will enable deferred removal of open devices
  - the device will be removed when the last user closes it. The deferred
  removal feature is supported since version 4.27.0 of the device-mapper driver
  available in upstream kernel version 3.13. (Use <b>dmsetup version</b> to
  check this.) If an attempt to remove a device fails, perhaps because a process
  run from a quick udev rule temporarily opened the device, the <b>--retry</b>
  option will cause the operation to be retried for a few seconds before
  failing. Do NOT combine <b>--force</b> and <b>--udevcookie</b>, as udev may
  start to process udev rules in the middle of error target replacement and
  result in nondeterministic result.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>remove_all</b>
  [<b>-f</b>|<b>--force</b>] [<b>--deferred</b>]
<div>&#x00A0;</div>
Attempts to remove all device definitions i.e. reset the driver. This also runs
  <b>mknodes</b> afterwards. Use with care! Open devices cannot be removed, but
  adding <b>--force</b> will replace the table with one that fails all I/O.
  <b>--deferred</b> will enable deferred removal of open devices - the device
  will be removed when the last user closes it. The deferred removal feature is
  supported since version 4.27.0 of the device-mapper driver available in
  upstream kernel version 3.13.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>rename</b>
  <i>device_name</i> <i>new_name</i>
<div>&#x00A0;</div>
Renames a device.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>rename</b>
  <i>device_name</i> <b>--setuuid</b> <i>uuid</i>
<div>&#x00A0;</div>
Sets the uuid of a device that was created without a uuid. After a uuid has been
  set it cannot be changed.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>resume</b>
  <i>device_name</i> [<b>--addnodeoncreate</b>|<b>--addnodeonresume</b>]
  [<b>--noflush</b>] [<b>--nolockfs</b>] [<b>--readahead</b>
  {[<b>+</b>]<b><i>sectors</i></b><i>|</i><b><i>auto</i></b><i>|</i><b><i>none</i></b><i>}]</i>
<div>&#x00A0;</div>
Un-suspends a device. If an inactive table has been loaded, it becomes live.
  Postponed I/O then gets re-queued for processing.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>setgeometry</b>
  <i>device_name</i> <i>cyl</i> <i>head</i> <i>sect</i> <i>start</i>
<div>&#x00A0;</div>
Sets the device geometry to C/H/S.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>splitname</b>
  <i>device_name</i> [<i>subsystem</i>]
<div>&#x00A0;</div>
Splits given <i>device name</i> into <i>subsystem</i> constituents. The default
  subsystem is LVM. LVM currently generates device names by concatenating the
  names of the Volume Group, Logical Volume and any internal Layer with a hyphen
  as separator. Any hyphens within the names are doubled to escape them. The
  precise encoding might change without notice in any future release, so we
  recommend you always decode using the current version of this command.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>stats</b>
  <i>command</i> [<i>options</i>]
<div>&#x00A0;</div>
Manages IO statistics regions for devices. See <b>dmstats</b>(8) for more
  details.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>status</b>
  [<b>--target</b> <i>target_type</i>] [<b>--noflush</b>] [<i>device_name</i>]
<div>&#x00A0;</div>
Outputs status information for each of the device's targets. With
  <b>--target</b>, only information relating to the specified target type any is
  displayed. With <b>--noflush</b>, the thin target (from version 1.3.0) doesn't
  commit any outstanding changes to disk before reporting its statistics.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>suspend</b>
  [<b>--nolockfs</b>] [<b>--noflush</b>] <i>device_name</i>
<div>&#x00A0;</div>
Suspends a device. Any I/O that has already been mapped by the device but has
  not yet completed will be flushed. Any further I/O to that device will be
  postponed for as long as the device is suspended. If there's a filesystem on
  the device which supports the operation, an attempt will be made to sync it
  first unless <b>--nolockfs</b> is specified. Some targets such as recent
  (October 2006) versions of multipath may support the <b>--noflush</b> option.
  This lets outstanding I/O that has not yet reached the device to remain
  unflushed.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>table</b>
  [<b>--target</b> <i>target_type</i>] [<b>--showkeys</b>] [<i>device_name</i>]
<div>&#x00A0;</div>
Outputs the current table for the device in a format that can be fed back in
  using the create or load commands. With <b>--target</b>, only information
  relating to the specified target type is displayed. Encryption keys are
  suppressed in the table output for the crypt target unless the
  <b>--showkeys</b> parameter is supplied.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>targets</b>
<div>&#x00A0;</div>
Displays the names and versions of the currently-loaded targets.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevcomplete</b>
  <i>cookie</i>
<div>&#x00A0;</div>
Wake any processes that are waiting for udev to complete processing the
  specified cookie.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevcomplete_all</b>
  [<i>age_in_minutes</i>]
<div>&#x00A0;</div>
Remove all cookies older than the specified number of minutes. Any process
  waiting on a cookie will be resumed immediately.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevcookie</b>
<div>&#x00A0;</div>
List all existing cookies. Cookies are system-wide semaphores with keys prefixed
  by two predefined bytes (0x0D4D).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevcreatecookie</b>
<div>&#x00A0;</div>
Creates a new cookie to synchronize actions with udev processing. The output is
  a cookie value. Normally we don't need to create cookies since dmsetup creates
  and destroys them for each action automatically. However, we can generate one
  explicitly to group several actions together and use only one cookie instead.
  We can define a cookie to use for each relevant command by using
  <b>--udevcookie</b> option. Alternatively, we can export this value into the
  environment of the dmsetup process as <b>DM_UDEV_COOKIE</b> variable and it
  will be used automatically with all subsequent commands until it is unset.
  Invoking this command will create system-wide semaphore that needs to be
  cleaned up explicitly by calling udevreleasecookie command.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevflags</b>
  <i>cookie</i>
<div>&#x00A0;</div>
Parses given <i>cookie</i> value and extracts any udev control flags encoded.
  The output is in environment key format that is suitable for use in udev
  rules. If the flag has its symbolic name assigned then the output is
  DM_UDEV_FLAG_&lt;flag_name&gt; = '1', DM_UDEV_FLAG&lt;flag_position&gt; = '1'
  otherwise. Subsystem udev flags don't have symbolic names assigned and these
  ones are always reported as DM_SUBSYSTEM_UDEV_FLAG&lt;flag_position&gt; = '1'.
  There are 16 udev flags altogether.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>udevreleasecookie</b>
  [<i>cookie</i>]
<div>&#x00A0;</div>
Waits for all pending udev processing bound to given cookie value and clean up
  the cookie with underlying semaphore. If the cookie is not given directly, the
  command will try to use a value defined by <b>DM_UDEV_COOKIE</b> environment
  variable.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>version</b>
<div>&#x00A0;</div>
Outputs version information.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>wait</b>
  [<b>--noflush</b>] <i>device_name</i> [<i>event_nr</i>]
<div>&#x00A0;</div>
Sleeps until the event counter for device_name exceeds event_nr. Use <b>-v</b>
  to see the event number returned. To wait until the next event is triggered,
  use <b>info</b> to find the last event number. With <b>--noflush</b>, the thin
  target (from version 1.3.0) doesn't commit any outstanding changes to disk
  before reporting its statistics.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>wipe_table</b>
  <i>device_name</i> [<b>-f</b>|<b>--force</b>] [<b>--noflush</b>]
  [<b>--nolockfs</b>]
<div>&#x00A0;</div>
Wait for any I/O in-flight through the device to complete, then replace the
  table with a new table that fails any new I/O sent to the device. If
  successful, this should release any devices held open by the device's
  table(s).</div>
<h1 class="Sh" title="Sh" id="TABLE_FORMAT"><a class="selflink" href="#TABLE_FORMAT">TABLE
  FORMAT</a></h1>
Each line of the table specifies a single target and is of the form:
<div style="height: 1.00em;">&#x00A0;</div>
<i>logical_start_sector num_sectors</i> <b>target_type</b> <i>target_args</i>
<div style="height: 1.00em;">&#x00A0;</div>
Simple target types and target args include:
<dl class="Bl-tag">
  <dt class="It-tag"><b>linear <i>destination_device start_sector</i></b></dt>
  <dd class="It-tag">The traditional linear mapping.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>striped <i>num_stripes chunk_size </i>[<i>destination
    start_sector</i>]...</b></dt>
  <dd class="It-tag">Creates a striped area.
    <div>&#x00A0;</div>
    e.g. striped 2 32 /dev/hda1 0 /dev/hdb1 0 will map the first chunk (16k) as
      follows:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="margin-left: 5.00ex;">
<br/>
 LV chunk 1 -&gt; hda1, chunk 1
<br/>
 LV chunk 2 -&gt; hdb1, chunk 1
<br/>
 LV chunk 3 -&gt; hda1, chunk 2
<br/>
 LV chunk 4 -&gt; hdb1, chunk 2
<br/>
 etc.</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>error</b></dt>
  <dd class="It-tag">Errors any I/O that goes to this area. Useful for testing
      or for creating devices with holes in them.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zero</b></dt>
  <dd class="It-tag">Returns blocks of zeroes on reads. Any data written is
      discarded silently. This is a block-device equivalent of the
      <i>/dev/zero</i> character-device data sink described in
    <b>null</b>(4).</dd>
</dl>
<div class="Pp"></div>
More complex targets include:
<dl class="Bl-tag">
  <dt class="It-tag"><b>cache</b></dt>
  <dd class="It-tag">Improves performance of a block device (eg, a spindle) by
      dynamically migrating some of its data to a faster smaller device (eg, an
      SSD).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>crypt</b></dt>
  <dd class="It-tag">Transparent encryption of block devices using the kernel
      crypto API.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>delay</b></dt>
  <dd class="It-tag">Delays reads and/or writes to different devices. Useful for
      testing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flakey</b></dt>
  <dd class="It-tag">Creates a similar mapping to the linear target but exhibits
      unreliable behaviour periodically. Useful for simulating failing devices
      when testing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mirror</b></dt>
  <dd class="It-tag">Mirrors data across two or more devices.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>multipath</b></dt>
  <dd class="It-tag">Mediates access through multiple paths to the same
    device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid</b></dt>
  <dd class="It-tag">Offers an interface to the kernel's software raid driver,
      md.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>snapshot</b></dt>
  <dd class="It-tag">Supports snapshots of devices.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>thin</b>, <b>thin-pool</b></dt>
  <dd class="It-tag">Supports thin provisioning of devices and also provides a
      better snapshot support.</dd>
</dl>
<div class="Pp"></div>
To find out more about the various targets and their table formats and status
  lines, please read the files in the Documentation/device-mapper directory in
  the kernel source tree. (Your distribution might include a copy of this
  information in the documentation directory for the device-mapper package.)
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
# A table to join two disks together
<div>&#x00A0;</div>
0 1028160 linear /dev/hda 0
<div>&#x00A0;</div>
1028160 3903762 linear /dev/hdb 0
<div>&#x00A0;</div>
# A table to stripe across the two disks,
<div>&#x00A0;</div>
# and add the spare space from
<div>&#x00A0;</div>
# hdb to the back of the volume
<div>&#x00A0;</div>
0 2056320 striped 2 32 /dev/hda 0 /dev/hdb 0
<div>&#x00A0;</div>
2056320 2875602 linear /dev/hdb 1028160
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DM_DEV_DIR</b></dt>
  <dd class="It-tag">The device directory name. Defaults to &quot;
      <i>/dev</i>&quot; and must be an absolute path.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DM_UDEV_COOKIE</b></dt>
  <dd class="It-tag">A cookie to use for all relevant commands to synchronize
      with udev processing. It is an alternative to using <b>--udevcookie</b>
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DM_DEFAULT_NAME_MANGLING_MODE</b></dt>
  <dd class="It-tag">A default mangling mode. Defaults to
      &quot;<b>auto</b>&quot; and it is an alternative to using
      <b>--manglename</b> option.</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Original version: Joe Thornber &lt;thornber@redhat.com&gt;
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>dmstats</b>(8), <b>udev</b>(7), <b>udevadm</b>(8)
<div class="Pp"></div>
LVM2 resource page: https://www.sourceware.org/lvm2/
<div>&#x00A0;</div>
Device-mapper resource page: http://sources.redhat.com/dm/</div>
<table class="foot">
  <tr>
    <td class="foot-date">Apr 06 2006</td>
    <td class="foot-os">Linux</td>
  </tr>
</table>
</body>
</html>
