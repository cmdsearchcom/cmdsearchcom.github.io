<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>KIMPERSONATE(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">KIMPERSONATE(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">KIMPERSONATE(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">kimpersonate</b> &#x2014;
  <span class="Nd" title="Nd">impersonate a user when there exist a keyfile or
  KeyFile</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">kimpersonate</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-s</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-ccache=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-s</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-server=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-c</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-client=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-k</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-keytab=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-5</b> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-krb5</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-A</b> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-add</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-R</b> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-referral</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-e</b>
      <var class="Ar" title="Ar">integer</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-expire-time=</b><var class="Ar" title="Ar">integer</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-a</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-client-address=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-t</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-enc-type=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-session-enc-type=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-f</b>
      <var class="Ar" title="Ar">string</var> |
      <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-ticket-flags=</b><var class="Ar" title="Ar">string</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-verbose</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-version</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-help</b></span>]</td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">kimpersonate</b> program creates a &quot;fake&quot;
  ticket using the service-key of the service and stores it in the given (or
  default) ccache. This is useful for testing. The service key can be read from
  a Kerberos 5 keytab or AFS KeyFile. Supported options:
<dl class="Bl-tag">
  <dt class="It-tag"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-ccache=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">ccache into which to store the ticket</dd>
  <dt class="It-tag"><a class="selflink" href="#s"><b class="Fl" title="Fl" id="s">-s</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-server=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">name of server principal</dd>
  <dt class="It-tag"><a class="selflink" href="#c"><b class="Fl" title="Fl" id="c">-c</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-client=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">name of client principal</dd>
  <dt class="It-tag"><a class="selflink" href="#k"><b class="Fl" title="Fl" id="k">-k</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-keytab=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">name of keytab file</dd>
  <dt class="It-tag"><a class="selflink" href="#5"><b class="Fl" title="Fl" id="5">-5</b></a>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-krb5</b></dt>
  <dd class="It-tag">create a Kerberos 5 ticket</dd>
  <dt class="It-tag"><a class="selflink" href="#A"><b class="Fl" title="Fl" id="A">-A</b></a>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-add</b></dt>
  <dd class="It-tag">don't re-initialize the ccache, instead add the ticket to
      an existing ccache.</dd>
  <dt class="It-tag"><a class="selflink" href="#R"><b class="Fl" title="Fl" id="R">-R</b></a>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-referral</b></dt>
  <dd class="It-tag">simulate a referrals-based KDC client by storing two
      entries, one with the empty realm for the service principal name.</dd>
  <dt class="It-tag"><a class="selflink" href="#e"><b class="Fl" title="Fl" id="e">-e</b></a>
    <var class="Ar" title="Ar">integer</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-expire-time=</b><var class="Ar" title="Ar">integer</var></dt>
  <dd class="It-tag">lifetime of ticket in seconds</dd>
  <dt class="It-tag"><a class="selflink" href="#a"><b class="Fl" title="Fl" id="a">-a</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-client-address=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">address of client</dd>
  <dt class="It-tag"><a class="selflink" href="#t"><b class="Fl" title="Fl" id="t">-t</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-enc-type=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">encryption type (defaults to
      &quot;aes256-cts-hmac-sha1-96&quot;)</dd>
  <dt class="It-tag"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-session-enc-type=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">session encryption type (defaults to enc-type or
      &quot;des-cbc-crc&quot; for afs service tickets)</dd>
  <dt class="It-tag"><a class="selflink" href="#f"><b class="Fl" title="Fl" id="f">-f</b></a>
    <var class="Ar" title="Ar">string</var>,
    <b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-ticket-flags=</b><var class="Ar" title="Ar">string</var></dt>
  <dd class="It-tag">ticket flags for krb5 ticket</dd>
  <dt class="It-tag"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-verbose</b></dt>
  <dd class="It-tag">Verbose output</dd>
  <dt class="It-tag"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-version</b></dt>
  <dd class="It-tag">Print version</dd>
  <dt class="It-tag"><b class="Fl" title="Fl">-</b><b class="Fl" title="Fl">-help</b></dt>
  <dd class="It-tag" style="width: auto;">&#x00A0;</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
Uses <i class="Pa" title="Pa">/etc/krb5.keytab,</i> and
  <i class="Pa" title="Pa">/usr/afs/etc/KeyFile</i> when available and the
  <b class="Fl" title="Fl">-k</b> option is used with an appropriate prefix.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b class="Nm" title="Nm">kimpersonate</b> can be used in
  <b class="Nm" title="Nm">samba</b> root preexec option or for debugging.
  <b class="Nm" title="Nm">kimpersonate</b> -s host/hummel.e.kth.se@E.KTH.SE -c
  lha@E.KTH.SE -5 will create a Kerberos 5 ticket for lha@E.KTH.SE for the host
  hummel.e.kth.se if there exists a keytab entry for it in
  <i class="Pa" title="Pa">/etc/krb5.keytab</i>.
<div class="Pp"></div>
In combination with the <b class="Nm" title="Nm">ktutil</b> command, this is
  useful for testing. For example,
<div class="Pp"></div>
<b class="Nm" title="Nm">ktutil</b> -k tkt add -p host/foo.test@TEST -V2 -e
  aes256-cts-hmac-sha1-96 -r
<div class="Pp"></div>
<b class="Nm" title="Nm">kimpersonate</b> --cache=tcc -s host/foo.test@TEST -c
  jdoe@TEST -k tkt --referral
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">kinit(1)</a>, <a class="Xr" title="Xr">klist(1)</a>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Love Hornquist Astrand &lt;lha@kth.se&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 18, 2006</td>
    <td class="foot-os">Heimdal</td>
  </tr>
</table>
</body>
</html>
