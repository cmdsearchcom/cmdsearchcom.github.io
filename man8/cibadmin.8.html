<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PACEMAKER(8) System Administration Utilities
PACEMAKER(8)</p>

<p style="margin-top: 1em">NAME <br>
Pacemaker - Part of the Pacemaker cluster resource
manager</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cibadmin command [options] [data]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
cibadmin - Provides direct access to the cluster
configuration.</p>

<p style="margin-top: 1em">Allows the configuration, or
sections of it, to be queried, modified, replaced and
deleted.</p>

<p style="margin-top: 1em">Where necessary, XML data will
be obtained using the -X, -x, or -p options.</p>

<p style="margin-top: 1em">OPTIONS <br>
-?, --help <br>
This text</p>

<p style="margin-top: 1em">-$, --version <br>
Version information</p>

<p style="margin-top: 1em">-V, --verbose <br>
Increase debug output</p>

<p style="margin-top: 1em">Commands: <br>
-u, --upgrade <br>
Upgrade the configuration to the latest syntax</p>

<p style="margin-top: 1em">-Q, --query <br>
Query the contents of the CIB</p>

<p style="margin-top: 1em">-E, --erase <br>
Erase the contents of the whole CIB</p>

<p style="margin-top: 1em">-B, --bump <br>
Increase the CIB&rsquo;s epoch value by 1</p>

<p style="margin-top: 1em">-C, --create <br>
Create an object in the CIB. Will fail if the object already
exists.</p>

<p style="margin-top: 1em">-M, --modify <br>
Find the object somewhere in the CIB&rsquo;s XML tree and
update it. Fails if the object does not exist unless -c is
specified</p>

<p style="margin-top: 1em">-P, --patch <br>
Supply an update in the form of an xml diff (See also:
crm_diff)</p>

<p style="margin-top: 1em">-R, --replace <br>
Recursively replace an object in the CIB</p>

<p style="margin-top: 1em">-D, --delete <br>
Delete the first object matching the supplied criteria, Eg.
&lt;op id=&quot;rsc1_op1&quot;
name=&quot;monitor&quot;/&gt;</p>

<p style="margin-top: 1em">The tagname and all attributes
must match in order for the element to be deleted</p>

<p style="margin-top: 1em">-d, --delete-all <br>
When used with --xpath, remove all matching objects in the
configuration instead of just the first one</p>

<p style="margin-top: 1em">-a, --empty <br>
Output an empty CIB</p>

<p style="margin-top: 1em">-5, --md5-sum <br>
Calculate the on-disk CIB digest</p>

<p style="margin-top: 1em">-6, --md5-sum-versioned <br>
Calculate an on-the-wire versioned CIB digest</p>

<p style="margin-top: 1em">Additional options: <br>
-f, --force</p>

<p style="margin-top: 1em">-t, --timeout=value <br>
Time (in seconds) to wait before declaring the operation
failed</p>

<p style="margin-top: 1em">-U, --user=value <br>
Run the command with permissions of the named user (valid
only for the root and hacluster accounts)</p>

<p style="margin-top: 1em">-s, --sync-call <br>
Wait for call to complete before returning</p>

<p style="margin-top: 1em">-l, --local <br>
Command takes effect locally. Should only be used for
queries</p>

<p style="margin-top: 1em">-c, --allow-create <br>
(Advanced) Allow the target of a --modify,-M operation to be
created if they do not exist</p>

<p style="margin-top: 1em">-n, --no-children <br>
(Advanced) When querying an object, do not return include
its children in the result</p>

<p style="margin-top: 1em">Data: <br>
-X, --xml-text=value <br>
Retrieve XML from the supplied string</p>

<p style="margin-top: 1em">-x, --xml-file=value <br>
Retrieve XML from the named file</p>

<p style="margin-top: 1em">-p, --xml-pipe Retrieve XML from
stdin</p>

<p style="margin-top: 1em">-o, --scope=value <br>
Limit the scope of the operation to a specific section of
the CIB.</p>

<p style="margin-top: 1em">Valid values are: nodes,
resources, constraints, crm_config, rsc_defaults,
op_defaults, status</p>

<p style="margin-top: 1em">-A, --xpath=value <br>
A valid XPath to use instead of --scope,-o</p>

<p style="margin-top: 1em">-e, --node-path <br>
When performing XPath queries, return the address of any
matches found.</p>

<p style="margin-top: 1em">Eg:
/cib/configuration/resources/master[@id=&rsquo;ms_RH1_SCS&rsquo;]/primitive[@id=&rsquo;prm_RH1_SCS&rsquo;]</p>

<p style="margin-top: 1em">-N, --node=value <br>
(Advanced) Send command to the specified host</p>

<p style="margin-top: 1em">EXAMPLES <br>
Query the configuration from the local node:</p>

<p style="margin-top: 1em"># cibadmin --query --local</p>

<p style="margin-top: 1em">Query just the cluster options
configuration:</p>

<p style="margin-top: 1em"># cibadmin --query --scope
crm_config</p>

<p style="margin-top: 1em">Query all
&rsquo;target-role&rsquo; settings:</p>

<p style="margin-top: 1em"># cibadmin --query --xpath
&quot;//nvpair[@name=&rsquo;target-role&rsquo;]&quot;</p>

<p style="margin-top: 1em">Remove all
&rsquo;is-managed&rsquo; settings:</p>

<p style="margin-top: 1em"># cibadmin --delete-all --xpath
&quot;//nvpair[@name=&rsquo;is-managed&rsquo;]&quot;</p>

<p style="margin-top: 1em">Remove the resource named
&rsquo;old&rsquo;:</p>

<p style="margin-top: 1em"># cibadmin --delete --xml-text
&rsquo;&lt;primitive id=&quot;old&quot;/&gt;&rsquo;</p>

<p style="margin-top: 1em">Remove all resources from the
configuration:</p>

<p style="margin-top: 1em"># cibadmin --replace --scope
resources --xml-text &rsquo;&lt;resources/&gt;&rsquo;</p>

<p style="margin-top: 1em">Replace the complete
configuration with the contents of $HOME/pacemaker.xml:</p>

<p style="margin-top: 1em"># cibadmin --replace --xml-file
$HOME/pacemaker.xml</p>

<p style="margin-top: 1em">Replace the constraints section
of the configuration with the contents of
$HOME/constraints.xml:</p>

<p style="margin-top: 1em"># cibadmin --replace --scope
constraints --xml-file $HOME/constraints.xml</p>

<p style="margin-top: 1em">Increase the configuration
version to prevent old configurations from being loaded
accidentally:</p>

<p style="margin-top: 1em"># cibadmin --modify --xml-text
&rsquo;&lt;cib
admin_epoch=&quot;admin_epoch++&quot;/&gt;&rsquo;</p>

<p style="margin-top: 1em">Edit the configuration with your
favorite $EDITOR:</p>

<p style="margin-top: 1em"># cibadmin --query &gt;
$HOME/local.xml</p>

<p style="margin-top: 1em"># $EDITOR $HOME/local.xml</p>

<p style="margin-top: 1em"># cibadmin --replace --xml-file
$HOME/local.xml</p>

<p style="margin-top: 1em">SEE ALSO: <br>
crm(8), pcs(8), crm_shadow(8), crm_diff(8)</p>

<p style="margin-top: 1em">AUTHOR <br>
Written by Andrew Beekhof</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Report bugs to pacemaker@oss.clusterlabs.org</p>

<p style="margin-top: 1em">Pacemaker 1.1.15-11.el7_3.5 June
2017 PACEMAKER(8)</p>
<hr>
</body>
</html>
