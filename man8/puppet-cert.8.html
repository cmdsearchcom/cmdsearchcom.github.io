<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PUPPET-CERT(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PUPPET-CERT(8)</td>
    <td class="head-vol">Puppet manual</td>
    <td class="head-rtitle">PUPPET-CERT(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>puppet-cert</b> - Manage certificates and requests
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
Standalone certificate authority. Capable of generating certificates, but mostly
  used for signing certificate requests from puppet clients.
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
puppet cert <i>action</i> [-h|--help] [-V|--version] [-d|--debug] [-v|--verbose]
  [--digest <i>digest</i>] [<i>host</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Because the puppet master service defaults to not signing client certificate
  requests, this script is available for signing outstanding requests. It can be
  used to list outstanding requests and then either sign them individually or
  sign all of them.
<h1 class="Sh" title="Sh" id="ACTIONS"><a class="selflink" href="#ACTIONS">ACTIONS</a></h1>
Every action except &#x00B4;list&#x00B4; and &#x00B4;generate&#x00B4; requires a
  hostname to act on, unless the &#x00B4;--all&#x00B4; option is set.
<dl class="Bl-tag">
  <dt class="It-tag">clean</dt>
  <dd class="It-tag">Revoke a host&#x00B4;s certificate (if applicable) and
      remove all files related to that host from puppet cert&#x00B4;s storage.
      This is useful when rebuilding hosts, since new certificate signing
      requests will only be honored if puppet cert does not have a copy of a
      signed certificate for that host. If &#x00B4;--all&#x00B4; is specified
      then all host certificates, both signed and unsigned, will be
    removed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fingerprint</dt>
  <dd class="It-tag">Print the DIGEST (defaults to the signing algorithm)
      fingerprint of a host&#x00B4;s certificate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">generate</dt>
  <dd class="It-tag">Generate a certificate for a named client. A
      certificate/keypair will be generated for each client named on the command
      line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">list</dt>
  <dd class="It-tag">List outstanding certificate requests. If
      &#x00B4;--all&#x00B4; is specified, signed certificates are also listed,
      prefixed by &#x00B4;+&#x00B4;, and revoked or invalid certificates are
      prefixed by &#x00B4;-&#x00B4; (the verification outcome is printed in
      parenthesis).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">print</dt>
  <dd class="It-tag">Print the full-text version of a host&#x00B4;s
    certificate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">revoke</dt>
  <dd class="It-tag">Revoke the certificate of a client. The certificate can be
      specified either by its serial number (given as a hexadecimal number
      prefixed by &#x00B4;0x&#x00B4;) or by its hostname. The certificate is
      revoked by adding it to the Certificate Revocation List given by the
      &#x00B4;cacrl&#x00B4; configuration option. Note that the puppet master
      needs to be restarted after revoking certificates.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">sign</dt>
  <dd class="It-tag">Sign an outstanding certificate request.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">verify</dt>
  <dd class="It-tag">Verify the named certificate against the local CA
      certificate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">reinventory</dt>
  <dd class="It-tag">Build an inventory of the issued certificates. This will
      destroy the current inventory file specified by
      &#x00B4;cert_inventory&#x00B4; and recreate it from the certificates found
      in the &#x00B4;certdir&#x00B4;. Ensure the puppet master is stopped before
      running this action.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Note that any setting that&#x00B4;s valid in the configuration file is also a
  valid long argument. For example, &#x00B4;ssldir&#x00B4; is a valid setting,
  so you can specify &#x00B4;--ssldir <i>directory</i>&#x00B4; as an argument.
<div class="Pp"></div>
See the configuration file documentation at
  https://docs.puppetlabs.com/references/stable/configuration.html for the full
  list of acceptable parameters. A commented list of all configuration options
  can also be generated by running puppet cert with &#x00B4;--genconfig&#x00B4;.
<dl class="Bl-tag">
  <dt class="It-tag">--all</dt>
  <dd class="It-tag">Operate on all items. Currently only makes sense with the
      &#x00B4;sign&#x00B4;, &#x00B4;list&#x00B4;, and
      &#x00B4;fingerprint&#x00B4; actions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--digest</dt>
  <dd class="It-tag">Set the digest for fingerprinting (defaults to the digest
      used when signing the cert). Valid values depends on your openssl and
      openssl ruby extension version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--debug</dt>
  <dd class="It-tag">Enable full debugging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Print this help message</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--verbose</dt>
  <dd class="It-tag">Enable verbosity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--version</dt>
  <dd class="It-tag">Print the puppet version number and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>
<div class="Pp"></div>
$ puppet cert list
culain.madstop.com
$ puppet cert sign culain.madstop.com
</pre>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Luke Kanies
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2011 Puppet Labs, LLC Licensed under the Apache 2.0 License</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2015</td>
    <td class="foot-os">Puppet Labs, LLC</td>
  </tr>
</table>
</body>
</html>
