<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:09 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>BTRFS-IMAGE(8) Btrfs Manual BTRFS-IMAGE(8)</p>

<p style="margin-top: 1em">NAME <br>
btrfs-image - create/restore an image of the filesystem</p>

<p style="margin-top: 1em">SYNOPSIS <br>
btrfs-image [options] &lt;source&gt; &lt;target&gt;</p>

<p style="margin-top: 1em">DESCRIPTION <br>
btrfs-image is used to create an image of a btrfs
filesystem. All data will be zeroed, but metadata and the
like is preserved. Mainly used for debugging purposes.</p>

<p style="margin-top: 1em">In the dump mode, source is the
btrfs device/file and target is the output file (use - for
stdout).</p>

<p style="margin-top: 1em">In the restore mode (option -r),
source is the dumped image and target is the btrfs
device/file.</p>

<p style="margin-top: 1em">OPTIONS <br>
-r <br>
Restore metadump image. By default, this fixes super&acirc;s
chunk tree, by using 1 stripe pointing to primary device, so
that file system can be restored by running tree log reply
<br>
if possible. To restore without changing number of stripes
in chunk tree check -o option.</p>

<p style="margin-top: 1em">-c &lt;value&gt; <br>
Compression level (0 ~ 9).</p>

<p style="margin-top: 1em">-t &lt;value&gt; <br>
Number of threads (1 ~ 32) to be used to process the image
dump or restore.</p>

<p style="margin-top: 1em">-o <br>
Use the old restore method, this does not fixup the chunk
tree so the restored file system will not be able to be
mounted.</p>

<p style="margin-top: 1em">-s <br>
Sanitize the file names when generating the image. One -s
means just generate random garbage, which means that the
directory indexes won&acirc;t match up since the hashes
won&acirc;t <br>
match with the garbage filenames. Using -ss will calculate a
collision for the filename so that the hashes match, and if
it can&acirc;t calculate a collision then it will just <br>
generate garbage. The collision calculator is very time and
CPU intensive so only use it if you are having problems with
your file system tree and need to have it mostly <br>
working.</p>

<p style="margin-top: 1em">-w <br>
Walk all the trees manually and copy any blocks that are
referenced. Use this option if your extent tree is corrupted
to make sure that all of the metadata is captured.</p>

<p style="margin-top: 1em">-m <br>
Restore for multiple devices, more than 1 device should be
provided.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
btrfs-image will return 0 if no error happened. If any
problems happened, 1 will be returned.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mkfs.btrfs(8)</p>

<p style="margin-top: 1em">Btrfs v4.4.1 11/05/2016
BTRFS-IMAGE(8)</p>
<hr>
</body>
</html>
