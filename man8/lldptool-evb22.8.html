<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:12:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>lldptool(8) Linux lldptool(8)</p>

<p style="margin-top: 1em">NAME <br>
evb22 - Show / manipulate EVB IEEE 802.1 Ratified Standard
TLV configuration</p>

<p style="margin-top: 1em">SYNOPSIS <br>
lldptool -t -i ethx -g ncb -V evb</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c enabletx</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c enabletx=[yes|no]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c evbmode</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c evbmode=[bridge|station]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c evbrrreq</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c evbrrreq=[yes|no]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c evbrrcap</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c evbrrcap=[yes|no]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c evbgpid</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c evbgpid=[yes|no]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c ecpretries</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c ecpretries=[0..7]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c ecprte</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c ecprte=[0..31]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c vdprwd</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c vdprwd=[0..31]</p>

<p style="margin-top: 1em">lldptool -t -i ethx -g ncb -V
evb -c vdprka</p>

<p style="margin-top: 1em">lldptool -T -i ethx -g ncb -V
evb -c vdprka=[0..31]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The Edge Virtual Bridge (EVB) TLV is a TLV to announce the
station and bridge&rsquo;s edge virtual bridging (EVB)
capabilities and may request the bridge port to be set into
reflective <br>
relay (hairpin) mode. If both sides agree on the modes and
time out values, the edge control protocol (ECP) will be
used to exchange VSI discovery protocol (VDP) data using ECP
<br>
frames between the host interface and the adjacent switch
port facing the host interface.</p>

<p style="margin-top: 1em">This man pages describes the
IEEE 802.1 Qbg ratified standard dated from July 5th, 2012.
The arguments and parameters differ from the IEEE 802.1 Qbg
draft 0.2, which is also <br>
implemented. The EVB protocol version to be used depends on
the organizational unique identifier (OUI) of the EVB TLV in
the LLDP data stream. A OUI value of 0x001b3f stands <br>
for the IEEE 802.1 Qbg draft 0.2, a OUI value of 0x0080c2
stands for the IEEE 802.1 Qbg ratified standard. The version
of the ECP and VDP protocols are determined by the
ether&acirc; <br>
net type field in the ethernet header. The ethernet type
value for IEEE 802.1 Qbg draft 0.2 is 0x88b7, the value for
IEEE 802.1 Qbg ratified standard is 0x8890. Note that the
<br>
EVB protocol is exchanged between nearest customer bridges
only, employing the reserved multicast MAC address
01:80:c2:00:00:00 as destination MAC address. lldpad(8)
supports <br>
both versions, the switch port configuration determines
which version will be used. The switch port configuration
should select only one protocol version, never both.</p>

<p style="margin-top: 1em">The command line options and
arguments are explained in the lldptool(8) man pages. Only
the EVB, ECP and VDP protocol specific parameters are
detailed in this manual page.</p>

<p style="margin-top: 1em">ARGUMENTS <br>
The invocation without command line option &rsquo;-c&rsquo;
and argument displays the complete EVB, ECP and VDP protocol
settings in a pretty print out. See below for a detailed
description <br>
on how to interpret the output.</p>

<p style="margin-top: 1em">-c text <br>
Use of the command line option &rsquo;-c&rsquo; without any
argument displays all known parameters in the format of
key=value, which is suitable for post processing. Use
command line <br>
option &rsquo;-c&rsquo; and one of the following arguments
to display and set individual parameters. Text can be one of
the following values:</p>

<p style="margin-top: 1em">enabletx <br>
Enables or disables the EVB TLV to be transmitted. When set
to disabled no EVB TLV will be included in the LLDP data
stream. Furthermore the output of the complete EVB <br>
settings without option &rsquo;-c&rsquo; will be empty.</p>

<p style="margin-top: 1em">evbmode <br>
Display the current role or sets the role the to given
value. Supported values are either &quot;station&quot; or
&quot;bridge&quot;.</p>

<p style="margin-top: 1em">evbrrreq <br>
Shows the current reflective relay (hairpin) request mode or
sets the reflective relay (hairpin) request mode. If the
value is &quot;yes&quot;, the station requests the interface
<br>
facing switch port to be set in reflective relay (hairpin)
mode. This field is only valid for stations, the output of
evbmode equals &quot;station&quot;.</p>

<p style="margin-top: 1em">evbrrcap <br>
Shows the current reflective relay (hairpin) capabilities or
sets the reflective relay (hairpin) capabilities. If the
value is &quot;yes&quot;, the switch port will be set in
<br>
reflective relay (hairpin) mode. This field is only valid
for switches, the output of evbmode equals
&quot;bridge&quot;.</p>

<p style="margin-top: 1em">gpid Shows the current station
or switch support for grouping or turns on/off the station
or switch support for grouping. If set to true, the station
or switch wants to use <br>
group identifiers in VDP protocols.</p>

<p style="margin-top: 1em">ecpretries <br>
Shows or sets the maximum number of retries for ECP frames
to be retransmitted. A retransmit occurs when no ECP
acknowledgement message has been received during a given
<br>
time period.</p>

<p style="margin-top: 1em">ecprte Shows or sets the local
run time exponent (RTE). The RTE will be used as the base
for the timing of the ECP protocol time outs and
retransmits. The wait time is calcu&acirc; <br>
lated as 10*2ecprte micro seconds.</p>

<p style="margin-top: 1em">vdprwd Shows or sets the number
of resource wait delay value. This value is calculated as
10*2vdprwd micro seconds and determines the maximum wait
time for VDP protocol <br>
acknowledgements.</p>

<p style="margin-top: 1em">vdprka Shows or sets the number
of re-init keep alive value. This value is calculated as
10*2vdprka micro seconds and determines the wait time for
VDP protocol to send a keep <br>
alive message.</p>

<p style="margin-top: 1em">Theory of Operation <br>
The EVB TLV is used to announce and exchange supported
parameters between the station and an adjacent switch. If
reflectiverelay is active, the switch sends back ethernet
frames <br>
on the very same port it received the frame on. This is an
extension to the current bridging standard and allows
communication between virtual machines on the same host
through <br>
the switch port.</p>

<p style="margin-top: 1em">EXAMPLE &amp; USAGE <br>
Display locally configured values for eth0 <br>
lldptool -t -g ncb -i eth0 -V evb <br>
EVB Configuration TLV <br>
bridge:(00) <br>
station:rrreq,rrstat(0x5) <br>
retries:7 rte:31 <br>
mode:station r/l:0 rwd:31 <br>
r/l:0 rka:8</p>

<p style="margin-top: 1em">This output is displayed when
enabletx has been enabled. The first line shows the
currently known status of the bridge. The second line shows
the currently known status of the <br>
station. The status is displayed verbose appended by the
hexadecimal value in parenthesis. The verbose output uses
the bit naming convention used in the standard document. The
<br>
third line displays the values for the ECP protocol number
of retransmits (retries) and the retransmit timeout
exponent. The forth line shows the current mode of
operation, <br>
either bridge or station, the resource wait delay value
(rwd) and an indication if the local (0) or remote (1) rwd
value is used. The fifth line displays the value of the re-
<br>
init keep alive counter (rka) and an indication if the local
(0) or remote (1) rka value is used.</p>

<p style="margin-top: 1em">Display the currently requested
forwarding mode for eth0 <br>
lldptool -t -g ncb -i eth0 -V evb -c evbrrreq</p>

<p style="margin-top: 1em">Display the locally configured
value for RTE <br>
lldptool -t -g ncb -i eth0 -V evb -c evbrte</p>

<p style="margin-top: 1em">Set the value for RTE to its
maximum value <br>
lldptool -T -g ncb -i eth0 -V evb -c rte=7</p>

<p style="margin-top: 1em">Set the value for enabletx to
yes <br>
lldptool -T -g ncb -i eth0 -V evb -c enabletx=yes</p>

<p style="margin-top: 1em">NOTES <br>
Currently the code in lldpad reflects IEEE 802.1 Qbg draft
0.2 of the upcoming standard. Wireshark support for IEEE
802.1 Qbg ratified standard TLVs is currently missing.
Sup&acirc; <br>
port for the IEEE 802.1 Qbg ratified standard protocols ECP
and VDP is currently under development and not fully
functional.</p>

<p style="margin-top: 1em">SEE ALSO <br>
lldptool-vdp(8), lldptool(8), lldpad(8) <br>
IEEE 802.1Qbg
(http://www.ieee802.org/1/pages/802.1bg.html)</p>

<p style="margin-top: 1em">AUTHOR <br>
Thomas Richter</p>

<p style="margin-top: 1em">open-lldp February 2013
lldptool(8)</p>
<hr>
</body>
</html>
