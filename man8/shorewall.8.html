<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SHOREWALL(8) Administrative Commands SHOREWALL(8)</p>

<p style="margin-top: 1em">NAME <br>
shorewall - Administration tool for Shoreline Firewall
(Shorewall)</p>

<p style="margin-top: 1em">SYNOPSIS <br>
shorewall [trace|debug [nolock]] [-options] add {
interface[:host-list]... zone | zone host-list }</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] allow address</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] blacklist address [option ...]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] call function [parameter ...]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] [check | ck ] [-e] [-d] [-p] [-r] [-T] [-i]
[directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] clear [-f]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] close { open-number | sourcedest [protocol [ port
]]}</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] [compile | co ] [-e] [-c] [-d] [-p] [-T] [-i]
[directory] [pathname]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] delete { interface[:host-list]... zone | zone
host-list }</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] disable { interface | provider }</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] drop address</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] dump [-x] [-l] [-m] [-c]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] enable { interface | provider }</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] export [directory1]
[user@]system[:directory2]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] forget [filename]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] help</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] hits [-t]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] ipcalc {address mask | address/vlsm}</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] iprange address1-address2</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] iptrace iptables match expression</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] logdrop address</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] logwatch [-m] [refresh-interval]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] logreject address</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] noiptrace iptables match expression</p>

<p style="margin-top: 1em">shorewall [-options] open source
dest [ protocol [ port ] ]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] reenable { interface | provider }</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] refresh [-n] [-d] [-T] [-i] [-D directory ]
[chain...]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] reject address</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] remote-start [-s] [-c] [-r root-user-name] [-T]
[-i] [[-D]directory] [system]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] remote-reload [-s] [-c] [-r root-user-name] [-T]
[-i] [[-D]directory] [system]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] remote-restart [-s] [-c] [-r root-user-name] [-T]
[-i] [[-D]directory] [system]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] reset [chain ...]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] restart [-n] [-p [-d]] [-f] [-c] [-T] [-i] [-C]
[directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] restore [-n] [-p] [-C] [filename]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] run command [parameter ...]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] safe-restart [-d] [-p] [-t timeout]
[directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] safe-start [-d] [-p] [-t timeout] [directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] save [-C] [filename]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] savesets</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-x] {bl|blacklists}</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-b] [-x] [-l] [-t
{filter|mangle|nat|raw|rawpost}] [chain...]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-f] capabilities</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls }
{actions|classifiers|connections|config|events|filters|ip|ipa|macros|zones|policies|marks}</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } event event</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-c] routing</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } macro macro</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-x]
{mangle|nat|raw|rawpost}</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } tc</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] {show | list | ls } [-m] log</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] start [-n] [-f] [-p] [-c] [-T [-i]] [-C]
[directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] stop [-f]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] status [-i]</p>

<p style="margin-top: 1em">shorewall [trace|debug [nolock]]
[-options] try directory [timeout]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] update [-b] [-d] [-r] [-T] [-a] [-i] [-A]
[directory]</p>

<p style="margin-top: 1em">shorewall [trace|debug]
[-options] version [-a]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The shorewall utility is used to control the Shoreline
Firewall (Shorewall).</p>

<p style="margin-top: 1em">OPTIONS <br>
The trace and debug options are used for debugging. See
http://www.shorewall.net/starting_and_stopping_shorewall.htm#Trace[1].</p>

<p style="margin-top: 1em">The nolock option prevents the
command from attempting to acquire the Shorewall lockfile.
It is useful if you need to include shorewall commands in
/etc/shorewall/started.</p>

<p style="margin-top: 1em">The options control the amount
of output that the command produces. They consist of a
sequence of the letters v and q. If the options are omitted,
the amount of output is <br>
determined by the setting of the VERBOSITY parameter in
shorewall.conf[2](5). Each v adds one to the effective
verbosity and each q subtracts one from the effective
VERBOSITY. <br>
Alternatively, v may be followed immediately with one of
-1,0,1,2 to specify a specify VERBOSITY. There may be no
white-space between v and the VERBOSITY.</p>

<p style="margin-top: 1em">The options may also include the
letter t which causes all progress messages to be
timestamped.</p>

<p style="margin-top: 1em">COMMANDS <br>
The available commands are listed below.</p>

<p style="margin-top: 1em">add { interface[:host-list]...
zone | zone host-list } <br>
Adds a list of hosts or subnets to a dynamic zone usually
used with VPN&rsquo;s.</p>

<p style="margin-top: 1em">The interface argument names an
interface defined in the shorewall-interfaces[3](5) file. A
host-list is comma-separated list whose elements are host or
network addresses..if <br>
n .sp <br>
Caution <br>
The add command is not very robust. If there are errors in
the host-list, you may see a large number of error messages
yet a subsequent shorewall show zones command will <br>
indicate that all hosts were added. If this happens, replace
add by delete and run the same command again. Then enter the
correct command.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.9,
the dynamic_shared zone option (shorewall-zones[4](5))
allows a single ipset to handle entries for multiple
interfaces. When that option is <br>
specified for a zone, the add command has the alternative
syntax in which the zone name precedes the host-list.</p>

<p style="margin-top: 1em">allow address <br>
Re-enables receipt of packets from hosts previously
blacklisted by a drop, logdrop, reject, or logreject
command. Beginning with Shorewall 5.0.10, this command can
also <br>
re-enable addresses blacklisted using the blacklist
command.</p>

<p style="margin-top: 1em">blacklist address [ option ... ]
<br>
Added in Shorewall 5.0.8 and requires
DYNAMIC_BLACKLIST=ipset.. in shorewall.conf[2](5). Causes
packets from the given host or network address to be
dropped, based on the <br>
setting of BLACKLIST in shorewall.conf[2](5). The address
along with any options are passed to the ipset add
command.</p>

<p style="margin-top: 1em">If the disconnect option is
specified in the DYNAMIC_BLACKLISTING setting, then the
effective VERBOSITY determines the amount of information
displayed:</p>

<p style="margin-top: 1em">&Acirc;&middot; If the effective
verbosity is &gt; 0, then a message giving the number of
conntrack flows deleted by the command is displayed.</p>

<p style="margin-top: 1em">&Acirc;&middot; If the effective
verbosity is &gt; 1, then the conntrack table entries
deleted by the command are also displayed.</p>

<p style="margin-top: 1em">call function [ parameter ... ]
<br>
Added in Shorewall 4.6.10. Allows you to call a function in
one of the Shorewall libraries or in your compiled script.
function must name the shell function to be called. The <br>
listed parameters are passed to the function.</p>

<p style="margin-top: 1em">The function is first searched
for in lib.base, lib.common, lib.cli and lib.cli-std. If it
is not found, the call command is passed to the generated
script to be executed.</p>

<p style="margin-top: 1em">check [-e] [-d] [-p] [-r] [-T]
[-i] [directory] <br>
Compiles the configuration in the specified directory and
discards the compiled output script. If no directory is
given, then /etc/shorewall is assumed.</p>

<p style="margin-top: 1em">The -e option causes the
compiler to look for a file named capabilities. This file is
produced using the command shorewall-lite show -f
capabilities &gt; capabilities on a <br>
system with Shorewall Lite installed.</p>

<p style="margin-top: 1em">The -d option causes the
compiler to be run under control of the Perl debugger.</p>

<p style="margin-top: 1em">The -p option causes the
compiler to be profiled via the Perl -wd:DProf command-line
option.</p>

<p style="margin-top: 1em">The -r option was added in
Shorewall 4.5.2 and causes the compiler to print the
generated ruleset to standard out.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.4.20 and causes a Perl stack trace to be
included with each compiler-generated error and warning
message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">clear [-f] <br>
Clear will remove all rules and chains installed by
Shorewall. The firewall is then wide open and unprotected.
Existing connections are untouched. Clear is often used to
see <br>
if the firewall is causing connection problems.</p>

<p style="margin-top: 1em">If -f is given, the command will
be processed by the compiled script that executed the last
successful start, restart or refresh command if that script
exists.</p>

<p style="margin-top: 1em">close { open-number | source
dest [ protocol [ port ] ] } <br>
Added in Shorewall 4.5.8. This command closes a temporary
open created by the open command. In the first form, an
open-number specifies the open to be closed. Open numbers
<br>
are displayed in the num column of the output of the
shorewall show opens command.</p>

<p style="margin-top: 1em">When the second form of the
command is used, the parameters must match those given in
the earlier open command.</p>

<p style="margin-top: 1em">compile [-e] [-c] [-d] [-p] [-T]
[-i] [ directory ] [ pathname ] <br>
Compiles the current configuration into the executable file
pathname. If a directory is supplied, Shorewall will look in
that directory first for configuration files. If the <br>
pathname is omitted, the file firewall in the VARDIR
(normally /var/lib/shorewall/) is assumed. A pathname of
&rsquo;-&rsquo; causes the compiler to send the generated
script to it&rsquo;s <br>
standard output file. Note that &rsquo;-v-1&rsquo; is
usually specified in this case (e.g., shorewall -v-1 compile
-- -) to suppress the &rsquo;Compiling...&rsquo; message
normally generated by <br>
/sbin/shorewall.</p>

<p style="margin-top: 1em">When -e is specified, the
compilation is being performed on a system other than where
the compiled script will run. This option disables certain
configuration options that <br>
require the script to be compiled where it is to be run. The
use of -e requires the presence of a configuration file
named capabilities which may be produced using the <br>
command shorewall-lite show -f capabilities &gt;
capabilities on a system with Shorewall Lite installed</p>

<p style="margin-top: 1em">The -c option was added in
Shorewall 4.5.17 and causes conditional compilation of a
script. The script specified by pathname (or implied if
pathname is omitted) is compiled <br>
if it doesn&rsquo;t exist or if there is any file in the
directory or in a directory on the CONFIG_PATH that has a
modification time later than the file to be compiled. When
no <br>
compilation is needed, a message is issued and an exit
status of zero is returned.</p>

<p style="margin-top: 1em">The -d option causes the
compiler to be run under control of the Perl debugger.</p>

<p style="margin-top: 1em">The -p option causes the
compiler to be profiled via the Perl -wd:DProf command-line
option.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.4.20 and causes a Perl stack trace to be
included with each compiler-generated error and warning
message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">delete {
interface[:host-list]... zone | zone host-list } <br>
The delete command reverses the effect of an earlier add
command.</p>

<p style="margin-top: 1em">The interface argument names an
interface defined in the shorewall-interfaces[3](5) file. A
host-list is comma-separated list whose elements are a host
or network address.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.9,
the dynamic_shared zone option (shorewall-zones[4](5))
allows a single ipset to handle entries for multiple
interfaces. When that option is <br>
specified for a zone, the delete command has the alternative
syntax in which the zone name precedes the host-list.</p>

<p style="margin-top: 1em">disable { interface | provider }
<br>
Added in Shorewall 4.4.26. Disables the optional provider
associated with the specified interface or provider. Where
more than one provider share a single network interface,
<br>
a provider name must be given.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.10,
this command may be used with any optional network
interface. interface may be either the logical or physical
name of the interface. The <br>
command removes any routes added from shorewall-routes[5](5)
and any traffic shaping configuration for the interface.</p>

<p style="margin-top: 1em">drop address <br>
Causes traffic from the listed addresses to be silently
dropped.</p>

<p style="margin-top: 1em">dump [-x] [-l] [-m] [-c] <br>
Produces a verbose report about the firewall configuration
for the purpose of problem analysis.</p>

<p style="margin-top: 1em">The -x option causes actual
packet and byte counts to be displayed. Without that option,
these counts are abbreviated.</p>

<p style="margin-top: 1em">The -m option causes any MAC
addresses included in Shorewall log messages to be
displayed.</p>

<p style="margin-top: 1em">The -l option causes the rule
number for each Netfilter rule to be displayed.</p>

<p style="margin-top: 1em">The -c option causes the route
cache to be dumped in addition to the other routing
information.</p>

<p style="margin-top: 1em">enable { interface | provider }
<br>
Added in Shorewall 4.4.26. Enables the optional provider
associated with the specified interface or provider. Where
more than one provider share a single network interface, a
<br>
provider name must be given.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.10,
this command may be used with any optional network
interface. interface may be either the logical or physical
name of the interface. The <br>
command sets /proc entries for the interface, adds any route
specified in shorewall-routes[5](5) and installs the
interface&rsquo;s traffic shaping configuration, if any.</p>

<p style="margin-top: 1em">export [ directory1 ] [
user@]system[:directory2 ] <br>
If directory1 is omitted, the current working directory is
assumed.</p>

<p style="margin-top: 1em">Allows a non-root user to
compile a shorewall script and stage it on a system
(provided that the user has access to the system via ssh).
The command is equivalent to:</p>

<p style="margin-top: 1em">/sbin/shorewall compile -e
directory1 directory1/firewall &amp;&amp; scp
directory1/firewall directory1/firewall.conf
[user@]system:[directory2]</p>

<p style="margin-top: 1em">In other words, the
configuration in the specified (or defaulted) directory is
compiled to a file called firewall in that directory. If
compilation succeeds, then firewall <br>
and firewall.conf are copied to system using scp.</p>

<p style="margin-top: 1em">forget [ filename ] <br>
Deletes /var/lib/shorewall/filename and
/var/lib/shorewall/save. If no filename is given then the
file specified by RESTOREFILE in shorewall.conf[2](5) is
assumed.</p>

<p style="margin-top: 1em">help <br>
Displays a syntax summary.</p>

<p style="margin-top: 1em">hits [-t] <br>
Generates several reports from Shorewall log messages in the
current log file. If the -t option is included, the reports
are restricted to log messages generated today.</p>

<p style="margin-top: 1em">ipcalc { address mask |
address/vlsm } <br>
Ipcalc displays the network address, broadcast address,
network in CIDR notation and netmask corresponding to the
input[s].</p>

<p style="margin-top: 1em">iprange address1-address2 <br>
Iprange decomposes the specified range of IP addresses into
the equivalent list of network/host addresses.</p>

<p style="margin-top: 1em">iptrace iptables match
expression <br>
This is a low-level debugging command that causes iptables
TRACE log records to be created. See iptables(8) for
details.</p>

<p style="margin-top: 1em">The iptables match expression
must be one or more matches that may appear in both the raw
table OUTPUT and raw table PREROUTING chains.</p>

<p style="margin-top: 1em">The log message destination is
determined by the currently-selected IPv4 logging
backend[6].</p>

<p style="margin-top: 1em">list <br>
list is a synonym for show -- please see below.</p>

<p style="margin-top: 1em">logdrop address <br>
Causes traffic from the listed addresses to be logged then
discarded. Logging occurs at the log level specified by the
BLACKLIST_LOGLEVEL setting in shorewall.conf[2] (5).</p>

<p style="margin-top: 1em">logwatch [-m] [ refresh-interval
] <br>
Monitors the log file specified by the LOGFILE option in
shorewall.conf[2](5) and produces an audible alarm when new
Shorewall messages are logged. The -m option causes the <br>
MAC address of each packet source to be displayed if that
information is available. The refresh-interval specifies the
time in seconds between screen refreshes. You can enter <br>
a negative number by preceding the number with
&quot;--&quot; (e.g., shorewall logwatch -- -30). In this
case, when a packet count changes, you will be prompted to
hit any key to <br>
resume screen refreshes.</p>

<p style="margin-top: 1em">logreject address <br>
Causes traffic from the listed addresses to be logged then
rejected. Logging occurs at the log level specified by the
BLACKLIST_LOGLEVEL setting in shorewall.conf[2] (5).</p>

<p style="margin-top: 1em">ls <br>
ls is a synonym for show -- please see below.</p>

<p style="margin-top: 1em">noiptrace iptables match
expression <br>
This is a low-level debugging command that cancels a trace
started by a preceding iptrace command.</p>

<p style="margin-top: 1em">The iptables match expression
must be one given in the iptrace command being canceled.</p>

<p style="margin-top: 1em">open source dest [ protocol [
port ] ] <br>
Added in Shorewall 4.6.8. This command requires that the
firewall be in the started state and that
DYNAMIC_BLACKLIST=Yes in shorewall.conf (5)[2]. The effect
of the command <br>
is to temporarily open the firewall for connections matching
the parameters.</p>

<p style="margin-top: 1em">The source and dest parameters
may each be specified as all if you don&rsquo;t wish to
restrict the connection source or destination respectively.
Otherwise, each must contain a <br>
host or network address or a valid DNS name.</p>

<p style="margin-top: 1em">The protocol may be specified
either as a number or as a name listed in /etc/protocols.
The port may be specified numerically or as a name listed in
/etc/services.</p>

<p style="margin-top: 1em">To reverse the effect of a
successful open command, use the close command with the same
parameters or simply restart the firewall.</p>

<p style="margin-top: 1em">Example: To open the firewall
for SSH connections to address 192.168.1.1, the command
would be:</p>

<p style="margin-top: 1em">shorewall open all 192.168.1.1
tcp 22</p>

<p style="margin-top: 1em">To reverse that command,
use:</p>

<p style="margin-top: 1em">shorewall close all 192.168.1.1
tcp 22</p>

<p style="margin-top: 1em">reenable{ interface | provider }
<br>
Added in Shorewall 4.6.9. This is equivalent to a disable
command followed by an enable command on the specified
interface or provider.</p>

<p style="margin-top: 1em">refresh [-n] [-d] [-T] [-i] [-D
directory ] [ chain... ] <br>
All steps performed by restart are performed by refresh with
the exception that refresh only recreates the chains
specified in the command while restart recreates the entire
<br>
Netfilter ruleset. If no chain is given, the static
blacklisting chain blacklst is assumed.</p>

<p style="margin-top: 1em">The listed chains are assumed to
be in the filter table. You can refresh chains in other
tables by prefixing the chain name with the table name
followed by &quot;:&quot; (e.g., <br>
nat:net_dnat). Chain names which follow are assumed to be in
that table until the end of the list or until an entry in
the list names another table. Built-in chains such as <br>
FORWARD may not be refreshed.</p>

<p style="margin-top: 1em">The -n option was added in
Shorewall 4.5.3 causes Shorewall to avoid updating the
routing table(s).</p>

<p style="margin-top: 1em">The -d option was added in
Shorewall 4.5.3 causes the compiler to run under the Perl
debugger.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">The -D option was added in
Shorewall 4.5.3 and causes Shorewall to look in the given
directory first for configuration files.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">shorewall refresh net2fw
nat:net_dnat #Refresh the &rsquo;net2loc&rsquo; chain in the
filter table and the &rsquo;net_dnat&rsquo; chain in the nat
table</p>

<p style="margin-top: 1em">The refresh command has slightly
different behavior. When no chain name is given to the
refresh command, the mangle table is refreshed along with
the blacklist chain (if <br>
any). This allows you to modify /etc/shorewall/tcrulesand
install the changes using refresh.</p>

<p style="margin-top: 1em">reject address <br>
Causes traffic from the listed addresses to be silently
rejected.</p>

<p style="margin-top: 1em">reload [-n] [-p] [-d] [-f] [-c]
[-T] [-i] [-C] [ directory ] <br>
This command was re-implemented in Shorewall 5.0.0. The
pre-5.0.0 reload command is now called remote-restart (see
below).</p>

<p style="margin-top: 1em">Reload is similar to shorewall
start except that it assumes that the firewall is already
started. Existing connections are maintained. If a directory
is included in the <br>
command, Shorewall will look in that directory first for
configuration files.</p>

<p style="margin-top: 1em">The -n option causes Shorewall
to avoid updating the routing table(s).</p>

<p style="margin-top: 1em">The -p option causes the
connection tracking table to be flushed; the conntrack
utility must be installed to use this option.</p>

<p style="margin-top: 1em">The -d option causes the
compiler to run under the Perl debugger.</p>

<p style="margin-top: 1em">The -f option suppresses the
compilation step and simply reused the compiled script which
last started/restarted Shorewall, provided that
/etc/shorewall and its contents have <br>
not been modified since the last start/restart.</p>

<p style="margin-top: 1em">The -c option was added in
Shorewall 4.4.20 and performs the compilation step
unconditionally, overriding the AUTOMAKE setting in
shorewall.conf[2](5). When both -f and -c <br>
are present, the result is determined by the option that
appears last.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">The -C option was added in
Shorewall 4.6.5 and is only meaningful when AUTOMAKE=Yes in
shorewall.conf[2](5). If an existing firewall script is used
and if that script was the <br>
one that generated the current running configuration, then
the running netfilter configuration will be reloaded as is
so as to preserve the iptables packet and byte counters.</p>

<p style="margin-top: 1em">remote-start [-s] [-c] [-r
root-user-name] [-T] [-i] [ [ -D ] directory ] [ system ]
<br>
This command was renamed from load in Shorewall 5.0.0.</p>

<p style="margin-top: 1em">If directory is omitted, the
current working directory is assumed. Allows a non-root user
to compile a shorewall script and install it on a system
(provided that the user has <br>
root access to the system via ssh). The command is
equivalent to:</p>

<p style="margin-top: 1em">/sbin/shorewall compile -e
directory directory/firewall &amp;&amp; scp
directory/firewall directory/firewall.conf
root@system:/var/lib/shorewall-lite/ &amp;&amp; ssh
root@system &rsquo;/sbin/shorewall-lite start&rsquo;</p>

<p style="margin-top: 1em">In other words, the
configuration in the specified (or defaulted) directory is
compiled to a file called firewall in that directory. If
compilation succeeds, then firewall is <br>
copied to system using scp. If the copy succeeds, Shorewall
Lite on system is started via ssh. Beginning with Shorewall
5.0.13, if system is omitted, then the FIREWALL option <br>
setting in shorewall6.conf(5)[7] is assumed. In that case,
if you want to specify a directory, then the -D option must
be given.</p>

<p style="margin-top: 1em">If -s is specified and the start
command succeeds, then the remote Shorewall-lite
configuration is saved by executing shorewall-lite save via
ssh.</p>

<p style="margin-top: 1em">if -c is included, the command
shorewall-lite show capabilities -f &gt;
/var/lib/shorewall-lite/capabilities is executed via ssh
then the generated file is copied to directory <br>
using scp. This step is performed before the configuration
is compiled.</p>

<p style="margin-top: 1em">If -r is included, it specifies
that the root user on system is named root-user-name rather
than &quot;root&quot;.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">remote-reload [-s] [-c] [-r
root-user-name] [-T] [-i] [ [ -D ] directory ] [ system ]
<br>
This command was added in Shorewall 5.0.0.</p>

<p style="margin-top: 1em">If directory is omitted, the
current working directory is assumed. Allows a non-root user
to compile a shorewall script and install it on a system
(provided that the user has <br>
root access to the system via ssh). The command is
equivalent to:</p>

<p style="margin-top: 1em">/sbin/shorewall compile -e
directory directory/firewall &amp;&amp; scp
directory/firewall directory/firewall.conf
root@system:/var/lib/shorewall-lite/ &amp;&amp; ssh
root@system &rsquo;/sbin/shorewall-lite reload&rsquo;</p>

<p style="margin-top: 1em">In other words, the
configuration in the specified (or defaulted) directory is
compiled to a file called firewall in that directory. If
compilation succeeds, then firewall is <br>
copied to system using scp. If the copy succeeds, Shorewall
Lite on system is restarted via ssh. Beginning with
Shorewall 5.0.13, if system is omitted, then the FIREWALL
<br>
option setting in shorewall6.conf(5)[7] is assumed. In that
case, if you want to specify a directory, then the -D option
must be given.</p>

<p style="margin-top: 1em">If -s is specified and the
restart command succeeds, then the remote Shorewall-lite
configuration is saved by executing shorewall-lite save via
ssh.</p>

<p style="margin-top: 1em">if -c is included, the command
shorewall-lite show capabilities -f &gt;
/var/lib/shorewall-lite/capabilities is executed via ssh
then the generated file is copied to directory <br>
using scp. This step is performed before the configuration
is compiled.</p>

<p style="margin-top: 1em">If -r is included, it specifies
that the root user on system is named root-user-name rather
than &quot;root&quot;.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">remote-restart [-s] [-c] [-r
root-user-name] [-T] [-i] [ [ -D ] directory ] [ system ]
<br>
This command was renamed from reload in Shorewall 5.0.0.</p>

<p style="margin-top: 1em">If directory is omitted, the
current working directory is assumed. Allows a non-root user
to compile a shorewall script and install it on a system
(provided that the user has <br>
root access to the system via ssh). The command is
equivalent to:</p>

<p style="margin-top: 1em">/sbin/shorewall compile -e
directory directory/firewall &amp;&amp; scp
directory/firewall directory/firewall.conf
root@system:/var/lib/shorewall-lite/ &amp;&amp; ssh
root@system &rsquo;/sbin/shorewall-lite restart&rsquo;</p>

<p style="margin-top: 1em">In other words, the
configuration in the specified (or defaulted) directory is
compiled to a file called firewall in that directory. If
compilation succeeds, then firewall is <br>
copied to system using scp. If the copy succeeds, Shorewall
Lite on system is restarted via ssh. Beginning with
Shorewall 5.0.13, if system is omitted, then the FIREWALL
<br>
option setting in shorewall6.conf(5)[7] is assumed. In that
case, if you want to specify a directory, then the -D option
must be given.</p>

<p style="margin-top: 1em">If -s is specified and the
restart command succeeds, then the remote Shorewall-lite
configuration is saved by executing shorewall-lite save via
ssh.</p>

<p style="margin-top: 1em">if -c is included, the command
shorewall-lite show capabilities -f &gt;
/var/lib/shorewall-lite/capabilities is executed via ssh
then the generated file is copied to directory <br>
using scp. This step is performed before the configuration
is compiled.</p>

<p style="margin-top: 1em">If -r is included, it specifies
that the root user on system is named root-user-name rather
than &quot;root&quot;.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">reset [chain, ...] <br>
Resets the packet and byte counters in the specified
chain(s). If no chain is specified, all the packet and byte
counters in the firewall are reset.</p>

<p style="margin-top: 1em">Beginning with Shorewall 5.0.0,
chain may be composed of both a table name and a chain name
separated by a colon (e.g., mangle:PREROUTING). Chain names
following that don&rsquo;t <br>
include a table name are assumed to be in that same table.
If no table name is given in the command, the filter table
is assumed.</p>

<p style="margin-top: 1em">restart [-n] [-p] [-d] [-f] [-c]
[-T] [-i] [-C] [ directory ] <br>
Beginning with Shorewall 5.0.0, this command performs a true
restart. The firewall is completely stopped as if a stop
command had been issued then it is started again.</p>

<p style="margin-top: 1em">If a directory is included in
the command, Shorewall will look in that directory first for
configuration files.</p>

<p style="margin-top: 1em">The -n option causes Shorewall
to avoid updating the routing table(s).</p>

<p style="margin-top: 1em">The -p option causes the
connection tracking table to be flushed; the conntrack
utility must be installed to use this option.</p>

<p style="margin-top: 1em">The -d option causes the
compiler to run under the Perl debugger.</p>

<p style="margin-top: 1em">The -f option suppresses the
compilation step and simply reused the compiled script which
last started/restarted Shorewall, provided that
/etc/shorewall and its contents have <br>
not been modified since the last start/restart.</p>

<p style="margin-top: 1em">The -c option was added in
Shorewall 4.4.20 and performs the compilation step
unconditionally, overriding the AUTOMAKE setting in
shorewall.conf[2](5). When both -f and -c <br>
are present, the result is determined by the option that
appears last.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">The -C option was added in
Shorewall 4.6.5 and is only meaningful when AUTOMAKE=Yes in
shorewall.conf[2](5). If an existing firewall script is used
and if that script was the <br>
one that generated the current running configuration, then
the running netfilter configuration will be reloaded as is
so as to preserve the iptables packet and byte counters.</p>

<p style="margin-top: 1em">restore [-n] [-p] [-C] [
filename ] <br>
Restore Shorewall to a state saved using the shorewall save
command. Existing connections are maintained. The filename
names a restore file in /var/lib/shorewall created <br>
using shorewall save; if no filename is given then Shorewall
will be restored from the file specified by the RESTOREFILE
option in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">Caution <br>
If your iptables ruleset depends on variables that are
detected at run-time, either in your params file or by
Shorewall-generated code, restore will use the values that
<br>
were current when the ruleset was saved, which may be
different from the current values. <br>
The -n option causes Shorewall to avoid updating the routing
table(s).</p>

<p style="margin-top: 1em">The -p option, added in
Shorewall 4.6.5, causes the connection tracking table to be
flushed; the conntrack utility must be installed to use this
option.</p>

<p style="margin-top: 1em">The -C option was added in
Shorewall 4.6.5. If the -C option was specified during
shorewall save, then the counters saved by that operation
will be restored.</p>

<p style="margin-top: 1em">run command [ parameter ... ]
<br>
Added in Shorewall 4.6.3. Executes command in the context of
the generated script passing the supplied parameters.
Normally, the command will be a function declared in <br>
lib.private.</p>

<p style="margin-top: 1em">Before executing the command,
the script will detect the configuration, setting all SW_*
variables and will run your init extension script with
$COMMAND = &rsquo;run&rsquo;.</p>

<p style="margin-top: 1em">If there are files in the
CONFIG_PATH that were modified after the current firewall
script was generated, the following warning message is
issued: <br>
WARNING: /var/lib/shorewall/firewall is not up to <br>
date</p>

<p style="margin-top: 1em">safe-reload [-d] [-p] [-t
timeout ] [ directory ] <br>
Added in Shorewall 5.0.0, this command performs the same
function as did safe_restart in earlier releases.</p>

<p style="margin-top: 1em">Only allowed if Shorewall is
running. The current configuration is saved in
/var/lib/shorewall/safe-reload (see the save command below)
then a shorewall reload is done. You <br>
will then be prompted asking if you want to accept the new
configuration or not. If you answer &quot;n&quot; or if you
fail to answer within 60 seconds (such as when your new <br>
configuration has disabled communication with your
terminal), the configuration is restored from the saved
configuration. If a directory is given, then Shorewall will
look in <br>
that directory first when opening configuration files.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.0,
you may specify a different timeout value using the -t
option. The numeric timeout may optionally be followed by an
s, m or h suffix (e.g., <br>
5m) to specify seconds, minutes or hours respectively. If
the suffix is omitted, seconds is assumed.</p>

<p style="margin-top: 1em">safe-restart [-d] [-p] [-t
timeout ] [ directory ] <br>
Only allowed if Shorewall is running. The current
configuration is saved in /var/lib/shorewall/safe-restart
(see the save command below) then a shorewall restart is
done. You <br>
will then be prompted asking if you want to accept the new
configuration or not. If you answer &quot;n&quot; or if you
fail to answer within 60 seconds (such as when your new <br>
configuration has disabled communication with your
terminal), the configuration is restored from the saved
configuration. If a directory is given, then Shorewall will
look in <br>
that directory first when opening configuration files.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.0,
you may specify a different timeout value using the -t
option. The numeric timeout may optionally be followed by an
s, m or h suffix (e.g., <br>
5m) to specify seconds, minutes or hours respectively. If
the suffix is omitted, seconds is assumed.</p>

<p style="margin-top: 1em">safe-start [-d] [-p] [-ttimeout
] [ directory ] <br>
Shorewall is started normally. You will then be prompted
asking if everything went all right. If you answer
&quot;n&quot; or if you fail to answer within 60 seconds
(such as when your <br>
new configuration has disabled communication with your
terminal), a shorewall clear is performed for you. If a
directory is given, then Shorewall will look in that
directory <br>
first when opening configuration files.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.0,
you may specify a different timeout value using the -t
option. The numeric timeout may optionally be followed by an
s, m or h suffix (e.g., <br>
5m) to specify seconds, minutes or hours respectively. If
the suffix is omitted, seconds is assumed.</p>

<p style="margin-top: 1em">save [-C] [ filename ] <br>
The dynamic blacklist is stored in /var/lib/shorewall/save.
The state of the firewall is stored in
/var/lib/shorewall/filename for use by the shorewall restore
and shorewall <br>
-f start commands. If filename is not given then the state
is saved in the file specified by the RESTOREFILE option in
shorewall.conf[2](5).</p>

<p style="margin-top: 1em">The -C option, added in
Shorewall 4.6.5, causes the iptables packet and byte
counters to be saved along with the chains and rules.</p>

<p style="margin-top: 1em">savesets <br>
Added in shorewall 4.6.8. Performs the same action as the
stop command with respect to saving ipsets (see the
SAVE_IPSETS option in shorewall.conf[2] (5)). This command
may <br>
be used to proactively save your ipset contents in the event
that a system failure occurs prior to issuing a stop
command.</p>

<p style="margin-top: 1em">show <br>
The show command can have a number of different
arguments:</p>

<p style="margin-top: 1em">actions <br>
Produces a report about the available actions (built-in,
standard and user-defined).</p>

<p style="margin-top: 1em">bl|blacklists [-x] <br>
Added in Shorewall 4.6.2. Displays the dynamic chain along
with any chains produced by entries in shorewall-blrules(5).
The -x option is passed directly through to <br>
iptables and causes actual packet and byte counts to be
displayed. Without this option, those counts are
abbreviated.</p>

<p style="margin-top: 1em">[-f] capabilities <br>
Displays your kernel/iptables capabilities. The -f option
causes the display to be formatted as a capabilities file
for use with compile -e.</p>

<p style="margin-top: 1em">[-b] [-x] [-l] [-t
{filter|mangle|nat|raw|rawpost}] [ chain... ] <br>
The rules in each chain are displayed using the iptables
-Lchain-n -v command. If no chain is given, all of the
chains in the filter table are displayed. The -x option is
<br>
passed directly through to iptables and causes actual packet
and byte counts to be displayed. Without this option, those
counts are abbreviated. The -t option specifies <br>
the Netfilter table to display. The default is filter.</p>

<p style="margin-top: 1em">The -b (&rsquo;brief&rsquo;)
option causes rules which have not been used (i.e. which
have zero packet and byte counts) to be omitted from the
output. Chains with no rules displayed <br>
are also omitted from the output.</p>

<p style="margin-top: 1em">The -l option causes the rule
number for each Netfilter rule to be displayed.</p>

<p style="margin-top: 1em">If the -t option and the chain
keyword are both omitted and any of the listed chains do not
exist, a usage message is displayed.</p>

<p style="margin-top: 1em">classifiers|filters <br>
Displays information about the packet classifiers defined on
the system as a result of traffic shaping configuration.</p>

<p style="margin-top: 1em">config <br>
Displays distribution-specific defaults.</p>

<p style="margin-top: 1em">connections [filter_parameter
...] <br>
Displays the IP connections currently being tracked by the
firewall.</p>

<p style="margin-top: 1em">If the conntrack utility is
installed, beginning with Shorewall 4.6.11 the set of
connections displayed can be limited by including conntrack
filter parameters (-p , -s, <br>
--dport, etc). See conntrack(8) for details.</p>

<p style="margin-top: 1em">event event <br>
Added in Shorewall 4.5.19. Displays the named event.</p>

<p style="margin-top: 1em">events <br>
Added in Shorewall 4.5.19. Displays all events.</p>

<p style="margin-top: 1em">ip <br>
Displays the system&rsquo;s IPv4 configuration.</p>

<p style="margin-top: 1em">ipa <br>
Added in Shorewall 4.4.17. Displays the per-IP accounting
counters (shorewall-accounting[8] (5)).</p>

<p style="margin-top: 1em">[-m] log <br>
Displays the last 20 Shorewall messages from the log file
specified by the LOGFILE option in shorewall.conf[2](5). The
-m option causes the MAC address of each packet <br>
source to be displayed if that information is available.</p>

<p style="margin-top: 1em">macros <br>
Displays information about each macro defined on the
firewall system.</p>

<p style="margin-top: 1em">macro macro <br>
Added in Shorewall 4.4.6. Displays the file that implements
the specified macro (usually
/usr/share/shorewall/macro.macro).</p>

<p style="margin-top: 1em">[-x] mangle <br>
Displays the Netfilter mangle table using the command
iptables -t mangle -L -n -v. The -x option is passed
directly through to iptables and causes actual packet and
byte <br>
counts to be displayed. Without this option, those counts
are abbreviated.</p>

<p style="margin-top: 1em">marks <br>
Added in Shorewall 4.4.26. Displays the various fields in
packet marks giving the min and max value (in both decimal
and hex) and the applicable mask (in hex).</p>

<p style="margin-top: 1em">[-x] nat <br>
Displays the Netfilter nat table using the command iptables
-t nat -L -n -v. The -x option is passed directly through to
iptables and causes actual packet and byte counts <br>
to be displayed. Without this option, those counts are
abbreviated.</p>

<p style="margin-top: 1em">opens <br>
Added in Shorewall 4.5.8. Displays the iptables rules in the
&rsquo;dynamic&rsquo; chain created through use of the open
command..</p>

<p style="margin-top: 1em">policies <br>
Added in Shorewall 4.4.4. Displays the applicable policy
between each pair of zones. Note that implicit intrazone
ACCEPT policies are not displayed for zones associated <br>
with a single network where that network doesn&rsquo;t
specify routeback.</p>

<p style="margin-top: 1em">[-c] routing <br>
Displays the system&rsquo;s IPv4 routing configuration. The
-c option causes the route cache to be displayed along with
the other routing information.</p>

<p style="margin-top: 1em">[-x] raw <br>
Displays the Netfilter raw table using the command iptables
-t raw -L -n -v. The -x option is passed directly through to
iptables and causes actual packet and byte counts <br>
to be displayed. Without this option, those counts are
abbreviated.</p>

<p style="margin-top: 1em">tc <br>
Displays information about queuing disciplines, classes and
filters.</p>

<p style="margin-top: 1em">zones <br>
Displays the current composition of the Shorewall zones on
the system.</p>

<p style="margin-top: 1em">start [-n] [-p] [-d] [-f] [-c]
[-T] [-i] [-C] [ directory ] <br>
Start shorewall. Existing connections through shorewall
managed interfaces are untouched. New connections will be
allowed only if they are allowed by the firewall rules or
<br>
policies. If a directory is included in the command,
Shorewall will look in that directory first for
configuration files. If -f is specified, the saved
configuration <br>
specified by the RESTOREFILE option in shorewall.conf[2](5)
will be restored if that saved configuration exists and has
been modified more recently than the files in <br>
/etc/shorewall. When -f is given, a directory may not be
specified.</p>

<p style="margin-top: 1em">Update: In Shorewall 4.4.20, a
new LEGACY_FASTSTART option was added to
shorewall.conf[2](5). When LEGACY_FASTSTART=No, the
modification times of files in /etc/shorewall are <br>
compared with that of /var/lib/shorewall/firewall (the
compiled script that last started/restarted the
firewall).</p>

<p style="margin-top: 1em">The -n option causes Shorewall
to avoid updating the routing table(s).</p>

<p style="margin-top: 1em">The -p option causes the
connection tracking table to be flushed; the conntrack
utility must be installed to use this option.</p>

<p style="margin-top: 1em">The -c option was added in
Shorewall 4.4.20 and performs the compilation step
unconditionally, overriding the AUTOMAKE setting in
shorewall.conf[2](5). When both -f and -care <br>
present, the result is determined by the option that appears
last.</p>

<p style="margin-top: 1em">The -T option was added in
Shorewall 4.5.3 and causes a Perl stack trace to be included
with each compiler-generated error and warning message.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf(5)[2].</p>

<p style="margin-top: 1em">The -C option was added in
Shorewall 4.6.5 and is only meaningful when the -f option is
also specified. If the previously-saved configuration is
restored, and if the -C <br>
option was also specified in the save command, then the
packet and byte counters will be restored.</p>

<p style="margin-top: 1em">stop [-f] <br>
Stops the firewall. All existing connections, except those
listed in shorewall-routestopped[9](5) or permitted by the
ADMINISABSENTMINDED option in shorewall.conf[2](5), are <br>
taken down. The only new traffic permitted through the
firewall is from systems listed in
shorewall-routestopped[9](5) or by ADMINISABSENTMINDED.</p>

<p style="margin-top: 1em">If -f is given, the command will
be processed by the compiled script that executed the last
successful start, restart or refresh command if that script
exists.</p>

<p style="margin-top: 1em">status [-i] <br>
Produces a short report about the state of the
Shorewall-configured firewall.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.2 and causes the status of each optional or
provider interface to be displayed.</p>

<p style="margin-top: 1em">try directory [ timeout ] <br>
If Shorewall is started then the firewall state is saved to
a temporary saved configuration (/var/lib/shorewall/.try).
Next, if Shorewall is currently started then a restart <br>
command is issued using the specified configuration
directory; otherwise, a start command is performed using the
specified configuration directory. if an error occurs during
<br>
the compilation phase of the restart or start, the command
terminates without changing the Shorewall state. If an error
occurs during the restart phase, then a shorewall <br>
restore is performed using the saved configuration. If an
error occurs during the start phase, then Shorewall is
cleared. If the start/restart succeeds and a timeout is <br>
specified then a clear or restore is performed after timeout
seconds.</p>

<p style="margin-top: 1em">Beginning with Shorewall 4.5.0,
the numeric timeout may optionally be followed by an s, m or
h suffix (e.g., 5m) to specify seconds, minutes or hours
respectively. If the <br>
suffix is omitted, seconds is assumed.</p>

<p style="margin-top: 1em">update [-d] [-r] [-T] [-a] [-i]
[-A] [ directory ] <br>
Added in Shorewall 4.4.21 and causes the compiler to update
/etc/shorewall/shorewall.conf then validate the
configuration. The update will add options not present in
the old <br>
file with their default values, and will move deprecated
options with non-defaults to a deprecated options section at
the bottom of the file. Your existing shorewall.conf <br>
file is renamed shorewall.conf.bak.</p>

<p style="margin-top: 1em">The command was extended over
the years with a set of options that caused additional
configuration updates.</p>

<p style="margin-top: 1em">&Acirc;&middot; Convert an
existing blacklist file into an equivalent blrules file.</p>

<p style="margin-top: 1em">&Acirc;&middot; Convert an
existing routestopped file into an equivalent stoppedrules
file.</p>

<p style="margin-top: 1em">&Acirc;&middot; Convert existing
tcrules and tos files into an equivalent mangle file.</p>

<p style="margin-top: 1em">&Acirc;&middot; Convert an
existing notrack file into an equivalent conntrack file.</p>

<p style="margin-top: 1em">&Acirc;&middot; Convert FORMAT,
SECTION and COMMENT entries into ?FORMAT, ?SECTION and
?COMMENT directives.</p>

<p style="margin-top: 1em">In each case, the old file is
renamed with a .bak suffix.</p>

<p style="margin-top: 1em">In Shorewall 5.0.0, the options
were eliminated and the update command performs all of the
updates described above.</p>

<p style="margin-top: 1em">Important <br>
There are some notable restrictions with the update
command:</p>

<p style="margin-top: 1em">1. Converted rules will be
appended to the existing file; if there is no existing file
in the CONFIG_PATH, one will be created in the directory
specified in the command <br>
or in the first entry in the CONFIG_PATH (normally
/etc/shorewall) otherwise.</p>

<p style="margin-top: 1em">2. Existing comments in the file
being converted will not be transferred to the output
file.</p>

<p style="margin-top: 1em">3. INCLUDEd files will be
expanded inline in the output file.</p>

<p style="margin-top: 1em">4. Columns in the output file
will be separated by a single tab character; there is no
attempt made to otherwise align the columns. <br>
The -a option causes the updated shorewall.conf file to be
annotated with documentation.</p>

<p style="margin-top: 1em">The -i option was added in
Shorewall 4.6.0 and causes a warning message to be issued if
the current line contains alternative input specifications
following a semicolon <br>
(&quot;;&quot;). Such lines will be handled incorrectly if
INLINE_MATCHES is set to Yes in shorewall.conf[2](5).</p>

<p style="margin-top: 1em">The -A option is included for
compatibility with Shorewall 4.6 and is equivalent to
specifying the -i option.</p>

<p style="margin-top: 1em">For a description of the other
options, see the check command above.</p>

<p style="margin-top: 1em">version [-a] <br>
Displays Shorewall&rsquo;s version. The -a option is
included for compatibility with earlier Shorewall releases
and is ignored.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
In general, when a command succeeds, status 0 is returned;
when the command fails, a non-zero status is returned.</p>

<p style="margin-top: 1em">The status command returns exit
status as follows:</p>

<p style="margin-top: 1em">0 - Firewall is started.</p>

<p style="margin-top: 1em">3 - Firewall is stopped or
cleared</p>

<p style="margin-top: 1em">4 - Unknown state; usually means
that the firewall has never been started.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
Two environmental variables are recognized by Shorewall:</p>

<p style="margin-top: 1em">SHOREWALL_INIT_SCRIPT <br>
When set to 1, causes Std out to be redirected to the file
specified in the STARTUP_LOG option in
shorewall.conf(5)[10].</p>

<p style="margin-top: 1em">SW_LOGGERTAG <br>
Added in Shorewall 5.0.8. When set to a non-empty value,
that value is passed to the logger utility in its -t (--tag)
option.</p>

<p style="margin-top: 1em">FILES <br>
/etc/shorewall/</p>

<p style="margin-top: 1em">SEE ALSO <br>

http://www.shorewall.net/starting_and_stopping_shorewall.htm[11]</p>

<p style="margin-top: 1em">shorewall-accounting(5),
shorewall-actions(5), shorewall-blacklist(5),
shorewall-hosts(5), shorewall_interfaces(5),
shorewall-ipsets(5), shorewall-maclist(5),
shorewall-masq(5), <br>
shorewall-nat(5), shorewall-netmap(5), shorewall-params(5),
shorewall-policy(5), shorewall-providers(5),
shorewall-proxyarp(5), shorewall-rtrules(5),
shorewall-routestopped(5), <br>
shorewall-rules(5), shorewall.conf(5),
shorewall-secmarks(5), shorewall-tcclasses(5),
shorewall-tcdevices(5), shorewall-tcrules(5),
shorewall-tos(5), shorewall-tunnels(5), <br>
shorewall-zones(5)</p>

<p style="margin-top: 1em">NOTES <br>
1.
http://www.shorewall.net/starting_and_stopping_shorewall.htm#Trace
<br>

http://www.shorewall.net/starting_and_stopping_shorewall.htm#Trace</p>

<p style="margin-top: 1em">2. shorewall.conf <br>
http://www.shorewall.net/manpages/shorewall.conf.html</p>

<p style="margin-top: 1em">3. shorewall-interfaces <br>

http://www.shorewall.net/manpages/shorewall-interfaces.html</p>

<p style="margin-top: 1em">4. shorewall-zones <br>
http://www.shorewall.net/manpages/shorewall-zones.html</p>

<p style="margin-top: 1em">5. shorewall-routes <br>
http://www.shorewall.net/manpages/shorewall-routes.html</p>

<p style="margin-top: 1em">6. logging backend <br>

http://www.shorewall.net/shorewall_logging.html#Backends</p>

<p style="margin-top: 1em">7. shorewall6.conf(5) <br>
http://www.shorewall.netshorewall6.conf.html</p>

<p style="margin-top: 1em">8. shorewall-accounting <br>

http://www.shorewall.net/manpages/shorewall-accounting.html</p>

<p style="margin-top: 1em">9. shorewall-routestopped <br>

http://www.shorewall.net/manpages/shorewall-routestopped.html</p>

<p style="margin-top: 1em">10. shorewall.conf(5) <br>
http://www.shorewall.netshorewall.conf.html</p>

<p style="margin-top: 1em">11.
http://www.shorewall.net/starting_and_stopping_shorewall.htm
<br>

http://www.shorewall.net/starting_and_stopping_shorewall.htm</p>

<p style="margin-top: 1em">Administrative Commands
11/04/2016 SHOREWALL(8)</p>
<hr>
</body>
</html>
