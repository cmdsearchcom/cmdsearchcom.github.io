<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:45 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>xfs_metadump(8) System Manager&rsquo;s Manual
xfs_metadump(8)</p>

<p style="margin-top: 1em">NAME <br>
xfs_metadump - copy XFS filesystem metadata to a file</p>

<p style="margin-top: 1em">SYNOPSIS <br>
xfs_metadump [ -aefFgow ] [ -m max_extents ] ] [ -l logdev ]
source target <br>
xfs_metadump -V</p>

<p style="margin-top: 1em">DESCRIPTION <br>
xfs_metadump is a debugging tool that copies the metadata
from an XFS filesystem to a file. The source argument must
be the pathname of the device or file containing the XFS
<br>
filesystem and the target argument specifies the destination
file name. If target is -, then the output is sent to
stdout. This allows the output to be redirected to another
<br>
program such as a compression application.</p>

<p style="margin-top: 1em">xfs_metadump may only be used to
copy unmounted filesystems, or read-only mounted
filesystems.</p>

<p style="margin-top: 1em">xfs_metadump does not alter the
source filesystem in any way. The target image is a
contiguous (non-sparse) file containing all the
filesystem&rsquo;s metadata and indexes to where the <br>
blocks were copied from.</p>

<p style="margin-top: 1em">By default, xfs_metadump
obfuscates most file (regular file, directory and symbolic
link) names and extended attribute names to allow the dumps
to be sent without revealing con&acirc; <br>
fidential information. Extended attribute values are zeroed
and no data is copied. The only exceptions are file or
attribute names that are 4 or less characters in length.
Also <br>
file names that span extents (this can only occur with the
mkfs.xfs(8) options where -n size &gt; -b size) are not
obfuscated. Names between 5 and 8 characters in length
inclusively <br>
are partially obfuscated.</p>

<p style="margin-top: 1em">xfs_metadump should not be used
for any purposes other than for debugging and reporting
filesystem problems. The most common usage scenario for this
tool is when xfs_repair(8) <br>
fails to repair a filesystem and a metadump image can be
sent for analysis.</p>

<p style="margin-top: 1em">The file generated by
xfs_metadump can be restored to filesystem image (minus the
data) using the xfs_mdrestore(8) tool.</p>

<p style="margin-top: 1em">OPTIONS <br>
-a Copies entire metadata blocks. Normally, xfs_metadump
will zero any stale bytes interspersed with in-use metadata.
Use this option to copy full metadata blocks, to pro&acirc;
<br>
vide more debugging information for a corrupted filesystem.
Note that the extra data will be unobfuscated.</p>

<p style="margin-top: 1em">-e Stops the dump on a read
error. Normally, it will ignore read errors and copy all the
metadata that is accessible.</p>

<p style="margin-top: 1em">-f Specifies that the filesystem
image to be processed is stored in a regular file (see the
mkfs.xfs -d file option). This can also happen if an image
copy of a filesystem <br>
has been made into an ordinary file with xfs_copy(8).</p>

<p style="margin-top: 1em">-F Specifies that we want to
continue even if the superblock magic is not correct. If the
source is truly not an XFS filesystem, the resulting image
will be useless, and <br>
xfs_metadump may crash.</p>

<p style="margin-top: 1em">-g Shows dump progress. This is
sent to stdout if the target is a file or to stderr if the
target is stdout.</p>

<p style="margin-top: 1em">-l logdev <br>
For filesystems which use an external log, this specifies
the device where the external log resides. The external log
is not copied, only internal logs are copied.</p>

<p style="margin-top: 1em">-m Set the maximum size of an
allowed metadata extent. Extremely large metadata extents
are likely to be corrupt, and will be skipped if they exceed
this value. The default <br>
size is 1000 blocks.</p>

<p style="margin-top: 1em">-o Disables obfuscation of file
names and extended attributes.</p>

<p style="margin-top: 1em">-w Prints warnings of
inconsistent metadata encountered to stderr. Bad metadata is
still copied.</p>

<p style="margin-top: 1em">-V Prints the version number and
exits.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
xfs_metadump returns an exit code of 0 if all readable
metadata is successfully copied or 1 if a write error occurs
or a read error occurs and the -e option used.</p>

<p style="margin-top: 1em">NOTES <br>
As xfs_metadump copies metadata only, it does not matter if
the source filesystem has a realtime section or not. If the
filesystem has an external log, it is not copied. Internal
<br>
logs are copied and any outstanding log transactions are not
obfuscated if they contain names.</p>

<p style="margin-top: 1em">xfs_metadump is a shell wrapper
around the xfs_db(8) metadump command.</p>

<p style="margin-top: 1em">SEE ALSO <br>
xfs_repair(8), xfs_mdrestore(8), xfs_freeze(8), xfs_db(8),
xfs_copy(8), xfs(5)</p>

<p style="margin-top: 1em">BUGS <br>
Email bug reports to xfs@oss.sgi.com.</p>
 
<p style="margin-top: 1em">xfs_metadump(8)</p>
<hr>
</body>
</html>
