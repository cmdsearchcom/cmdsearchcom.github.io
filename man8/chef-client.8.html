<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:27 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CHEF-CLIENT(8) chef-client CHEF-CLIENT(8)</p>

<p style="margin-top: 1em">NAME <br>
chef-client - The man page for the chef-client command line
tool.</p>

<p style="margin-top: 1em">A chef-client is an agent that
runs locally on every node that is under management by Chef.
When a chef-client is run, it will perform all of the steps
that are required to bring <br>
the node into the expected state, including:</p>

<p style="margin-top: 1em">&Acirc;&middot; Registering and
authenticating the node with the Chef server</p>

<p style="margin-top: 1em">&Acirc;&middot; Building the
node object</p>

<p style="margin-top: 1em">&Acirc;&middot; Synchronizing
cookbooks</p>

<p style="margin-top: 1em">&Acirc;&middot; Compiling the
resource collection by loading each of the required
cookbooks, including recipes, attributes, and all other
dependencies</p>

<p style="margin-top: 1em">&Acirc;&middot; Taking the
appropriate and required actions to configure the node</p>

<p style="margin-top: 1em">&Acirc;&middot; Looking for
exceptions and notifications, handling each as required</p>

<p style="margin-top: 1em">The chef-client executable is
run as a command-line tool.</p>

<p style="margin-top: 1em">NOTE: <br>
A client.rb file is used to specify the configuration
details for the chef-client.</p>

<p style="margin-top: 1em">&Acirc;&middot; This file is
loaded every time this executable is run</p>

<p style="margin-top: 1em">&Acirc;&middot; On UNIX- and
Linux-based machines, the default location for this file is
/etc/chef/client.rb; on Microsoft Windows machines, the
default location for this file is <br>
C: <br>
&Acirc;&middot; This file is not created by default</p>

<p style="margin-top: 1em">&Acirc;&middot; When a client.rb
file is present in this directory, the settings contained
within that file will override the default configuration
settings</p>

<p style="margin-top: 1em">OPTIONS <br>
This command has the following syntax:</p>

<p style="margin-top: 1em">chef-client OPTION VALUE OPTION
VALUE ...</p>

<p style="margin-top: 1em">This command has the following
options:</p>

<p style="margin-top: 1em">-A, --fatal-windows-admin-check
<br>
Use to cause a chef-client run to fail when the chef-client
does not have administrator privileges in Microsoft
Windows.</p>

<p style="margin-top: 1em">--chef-zero-port PORT <br>
The port on which chef-zero will listen. If a port is not
specified---individually, as range of ports, or from the
chef_zero.port setting in the client.rb file---the <br>
chef-client will scan for ports between 8889-9999 and will
pick the first port that is available.</p>

<p style="margin-top: 1em">-F FORMAT, --format FORMAT <br>
The output format: doc (default) or min.</p>

<p style="margin-top: 1em">Use doc to print the progress of
the chef-client run using full strings that display a
summary of updates as they occur.</p>

<p style="margin-top: 1em">Use min to print the progress of
the chef-client run using single characters. A summary of
updates is printed at the end of the chef-client run. A dot
(.) is printed for <br>
events that do not have meaningful status information, such
as loading a file or synchronizing a cookbook. For
resources, a dot (.) is printed when the resource is up to
<br>
date, an S is printed when the resource is skipped by not_if
or only_if, and a U is printed when the resource is
updated.</p>

<p style="margin-top: 1em">Other formatting options are
available when those formatters are configured in the
client.rb file using the add_formatter option.</p>

<p style="margin-top: 1em">--force-formatter <br>
Use to show formatter output instead of logger output.</p>

<p style="margin-top: 1em">--force-logger <br>
Use to show logger output instead of formatter output.</p>

<p style="margin-top: 1em">-g GROUP, --group GROUP <br>
The name of the group that owns a process. This is required
when starting any executable as a daemon.</p>

<p style="margin-top: 1em">-h, --help <br>
Shows help for the command.</p>

<p style="margin-top: 1em">-i SECONDS, --interval SECONDS
<br>
The frequency (in seconds) at which the chef-client runs.
When the chef-client is run at intervals, --splay and
--interval values are applied before the chef-client run.
<br>
Default value: 1800.</p>

<p style="margin-top: 1em">-j PATH, --json-attributes PATH
<br>
The path to a file that contains JSON data.</p>

<p style="margin-top: 1em">Use this option to define a
run_list object. For example, a JSON file similar to:</p>

<p style="margin-top: 1em">&quot;run_list&quot;: [ <br>
&quot;recipe[base]&quot;, <br>
&quot;recipe[foo]&quot;, <br>
&quot;recipe[bar]&quot;, <br>
&quot;role[webserver]&quot; <br>
],</p>

<p style="margin-top: 1em">may be used by running
chef-client -j path/to/file.json.</p>

<p style="margin-top: 1em">In certain situations this
option may be used to update normal attributes.</p>

<p style="margin-top: 1em">WARNING: <br>
Any other attribute type that is contained in this JSON file
will be treated as a normal attribute. For example,
attempting to update override attributes using the -j <br>
option:</p>

<p style="margin-top: 1em">{ <br>
&quot;name&quot;: &quot;dev-99&quot;, <br>
&quot;description&quot;: &quot;Install some stuff&quot;,
<br>
&quot;override_attributes&quot;: { <br>
&quot;apptastic&quot;: { <br>
&quot;enable_apptastic&quot;: &quot;false&quot;, <br>
&quot;apptastic_tier_name&quot;: &quot;dev-99.bomb.com&quot;
<br>
} <br>
} <br>
}</p>

<p style="margin-top: 1em">will result in a node object
similar to:</p>

<p style="margin-top: 1em">{ <br>
&quot;name&quot;: &quot;maybe-dev-99&quot;, <br>
&quot;normal&quot;: { <br>
&quot;name&quot;: &quot;dev-99&quot;, <br>
&quot;description&quot;: &quot;Install some stuff&quot;,
<br>
&quot;override_attributes&quot;: { <br>
&quot;apptastic&quot;: { <br>
&quot;enable_apptastic&quot;: &quot;false&quot;, <br>
&quot;apptastic_tier_name&quot;: &quot;dev-99.bomb.com&quot;
<br>
} <br>
} <br>
} <br>
}</p>

<p style="margin-top: 1em">-k KEY_FILE, --client_key
KEY_FILE <br>
The location of the file which contains the client key.
Default value: /etc/chef/client.pem.</p>

<p style="margin-top: 1em">-K KEY_FILE, --validation_key
KEY_FILE <br>
The location of the file which contains the key used when a
chef-client is registered with a Chef server. A validation
key is signed using the validation_client_name for <br>
authentication. Default value: /etc/chef/validation.pem.</p>

<p style="margin-top: 1em">-l LEVEL, --log_level LEVEL <br>
The level of logging that will be stored in a log file.</p>

<p style="margin-top: 1em">-L LOGLOCATION, --logfile c <br>
The location in which log file output files will be saved.
If this location is set to something other than STDOUT,
standard output logging will still be performed
(other&acirc; <br>
wise there would be no output other than to a file). This is
recommended when starting any executable as a daemon.
Default value: STDOUT.</p>

<p style="margin-top: 1em">--[no-]color <br>
Use to view colored output. Default setting: --color.</p>

<p style="margin-top: 1em">-N NODE_NAME, --node-name
NODE_NAME <br>
The name of the node.</p>

<p style="margin-top: 1em">-o RUN_LIST_ITEM,
--override-runlist RUN_LIST_ITEM <br>
Replace the current run list with the specified items. This
option will not clear the list of cookbooks (and related
files) that is cached on the node.</p>

<p style="margin-top: 1em">--once Use to run the
chef-client only once and to cancel interval and splay
options.</p>

<p style="margin-top: 1em">-P PID_FILE, --pid PID_FILE <br>
The location in which a process identification number (pid)
is saved. An executable, when started as a daemon, will
write the pid to the specified file. Default value: <br>
/tmp/name-of-executable.pid.</p>

<p style="margin-top: 1em">-r RUN_LIST_ITEM, --runlist
RUN_LIST_ITEM <br>
Use to permanently replace the current run-list with the
specified run-list items.</p>

<p style="margin-top: 1em">-R, --enable-reporting <br>
Use to enable Chef reporting, which performs data collection
during a chef-client run.</p>

<p style="margin-top: 1em">RECIPE_FILE <br>
The path to a recipe. For example, if a recipe file is in
the current directory, use recipe_file.rb. This is typically
used with the --local-mode option.</p>

<p style="margin-top: 1em">--run-lock-timeout SECONDS <br>
The amount of time (in seconds) to wait for a chef-client
run to finish. Default value: not set (indefinite). Set to 0
to cause a second chef-client to exit immediately.</p>

<p style="margin-top: 1em">-s SECONDS, --splay SECONDS <br>
A number (in seconds) to add to the interval that is used to
determine the frequency of chef-client runs. This number can
help prevent server load when there are many <br>
clients running at the same time. When the chef-client is
run at intervals, --splay and --interval values are applied
before the chef-client run.</p>

<p style="margin-top: 1em">-S CHEF_SERVER_URL, --server
CHEF_SERVER_URL <br>
The URL for the Chef server.</p>

<p style="margin-top: 1em">-u USER, --user USER <br>
The user that owns a process. This is required when starting
any executable as a daemon.</p>

<p style="margin-top: 1em">-v, --version <br>
The version of the chef-client.</p>

<p style="margin-top: 1em">-W, --why-run <br>
Use to run the executable in why-run mode, which is a type
of chef-client run that does everything except modify the
system. Use why-run mode to understand why the <br>
chef-client makes the decisions that it makes and to learn
more about the current and proposed state of the system.</p>

<p style="margin-top: 1em">-z, --local-mode <br>
Use to run the chef-client in local mode. This allows all
commands that work against the Chef server to also work
against the local chef-repo.</p>

<p style="margin-top: 1em">RUN WITH ELEVATED PRIVILEGES
<br>
The chef-client may need to be run with elevated privileges
in order to get a recipe to converge correctly. On UNIX and
UNIX-like operating systems this can be done by running <br>
the command as root. On Microsoft Windows this can be done
by running the command prompt as an administrator.</p>

<p style="margin-top: 1em">Linux <br>
On Linux, the following error sometimes occurs when the
permissions used to run the chef-client are incorrect:</p>

<p style="margin-top: 1em">$ chef-client <br>
[Tue, 29 Nov 2011 19:46:17 -0800] INFO: *** Chef 10.X.X ***
<br>
[Tue, 29 Nov 2011 19:46:18 -0800] WARN: Failed to read the
private key /etc/chef/client.pem: #&lt;Errno::EACCES:
Permission denied - /etc/chef/client.pem&gt;</p>

<p style="margin-top: 1em">This can be resolved by running
the command as root. There are a few ways this can be
done:</p>

<p style="margin-top: 1em">&Acirc;&middot; Log in as root
and then run the chef-client</p>

<p style="margin-top: 1em">&Acirc;&middot; Use su to become
the root user, and then run the chef-client. For
example:</p>

<p style="margin-top: 1em">$ su</p>

<p style="margin-top: 1em">and then:</p>

<p style="margin-top: 1em">$ chef-client</p>

<p style="margin-top: 1em">&Acirc;&middot; Use the sudo
utility</p>

<p style="margin-top: 1em">$ sudo chef-client</p>

<p style="margin-top: 1em">&Acirc;&middot; Give a user
access to read /etc/chef and also the files accessed by the
chef-client. This requires super user privileges and, as
such, is not a recommended approach</p>

<p style="margin-top: 1em">Windows <br>
On Microsoft Windows, running without elevated privileges
(when they are necessary) is an issue that fails silently.
It will appear that the chef-client completed its run
suc&acirc; <br>
cessfully, but the changes will not have been made. When
this occurs, do one of the following to run the chef-client
as the administrator:</p>

<p style="margin-top: 1em">&Acirc;&middot; Log in to the
administrator account. (This is not the same as an account
in the administrator&rsquo;s security group.)</p>

<p style="margin-top: 1em">&Acirc;&middot; Run the
chef-client process from the administrator account while
being logged into another account. Run the following
command:</p>

<p style="margin-top: 1em">$ runas /user:Administrator
&quot;cmd /C chef-client&quot;</p>

<p style="margin-top: 1em">This will prompt for the
administrator account password.</p>

<p style="margin-top: 1em">&Acirc;&middot; Open a command
prompt by right-clicking on the command prompt application,
and then selecting Run as administrator. After the command
window opens, the chef-client can be run <br>
as the administrator</p>

<p style="margin-top: 1em">EXAMPLES <br>
Start a Chef run when the chef-client is running as a
daemon</p>

<p style="margin-top: 1em">A chef-client that is running as
a daemon can be woken up and started by sending the process
a SIGUSR1. For example, to trigger a chef-client run on a
machine running Linux:</p>

<p style="margin-top: 1em">$ sudo killall -USR1
chef-client</p>

<p style="margin-top: 1em">Start a Chef run manually</p>

<p style="margin-top: 1em">$ ps auxw|grep chef-client</p>

<p style="margin-top: 1em">to return something like:</p>

<p style="margin-top: 1em">root 66066 0.9 0.0 2488880 264
s001 S+ 10:26AM 0:03.05 <br>

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
/usr/bin/chef-client -i 3600 -s 20</p>

<p style="margin-top: 1em">and then enter:</p>

<p style="margin-top: 1em">$ sudo kill -USR1 66066</p>

<p style="margin-top: 1em">AUTHOR <br>
Chef</p>

<p style="margin-top: 1em">Chef 12.0 CHEF-CLIENT(8)</p>
<hr>
</body>
</html>
