<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>CHEF-CLIENT(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CHEF-CLIENT(8)</td>
    <td class="head-vol">chef-client</td>
    <td class="head-rtitle">CHEF-CLIENT(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
chef-client - The man page for the chef-client command line tool.
<div style="height: 1.00em;">&#x00A0;</div>
A chef-client is an agent that runs locally on every node that is under
  management by Chef. When a chef-client is run, it will perform all of the
  steps that are required to bring the node into the expected state, including:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Registering and authenticating the node with the Chef
      server</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Building the node object</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Synchronizing cookbooks</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Compiling the resource collection by loading each of the
      required cookbooks, including recipes, attributes, and all other
      dependencies</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Taking the appropriate and required actions to configure
      the node</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Looking for exceptions and notifications, handling each as
      required</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The chef-client executable is run as a command-line tool.
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">A client.rb file is used to specify the
  configuration details for the chef-client.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">This file is loaded every time this executable is run</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">On UNIX- and Linux-based machines, the default location for
      this file is <b>/etc/chef/client.rb</b>; on Microsoft Windows machines,
      the default location for this file is <b>C:\chef\client.rb</b>; use the
      <b>--config</b> option from the command line to change this location</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">This file is not created by default</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">When a client.rb file is present in this directory, the
      settings contained within that file will override the default
      configuration settings</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
This command has the following syntax:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
chef-client OPTION VALUE OPTION VALUE ...
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
This command has the following options:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-A</b>, <b>--fatal-windows-admin-check</b></b></dt>
  <dd class="It-tag">Use to cause a chef-client run to fail when the chef-client
      does not have administrator privileges in Microsoft Windows.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--chef-zero-port PORT</b></b></dt>
  <dd class="It-tag">The port on which chef-zero will listen. If a port is not
      specified---individually, as range of ports, or from the
      <b>chef_zero.port</b> setting in the client.rb file---the chef-client will
      scan for ports between 8889-9999 and will pick the first port that is
      available.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-F FORMAT</b>, <b>--format FORMAT</b></b></dt>
  <dd class="It-tag">The output format: <b>doc</b> (default) or <b>min</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use <b>doc</b> to print the progress of the chef-client run using full
      strings that display a summary of updates as they occur.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use <b>min</b> to print the progress of the chef-client run using single
      characters. A summary of updates is printed at the end of the chef-client
      run. A dot ( <b>.</b>) is printed for events that do not have meaningful
      status information, such as loading a file or synchronizing a cookbook.
      For resources, a dot ( <b>.</b>) is printed when the resource is up to
      date, an <b>S</b> is printed when the resource is skipped by <b>not_if</b>
      or <b>only_if</b>, and a <b>U</b> is printed when the resource is updated.
    <div style="height: 1.00em;">&#x00A0;</div>
    Other formatting options are available when those formatters are configured
      in the client.rb file using the <b>add_formatter</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--force-formatter</b></b></dt>
  <dd class="It-tag">Use to show formatter output instead of logger output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--force-logger</b></b></dt>
  <dd class="It-tag">Use to show logger output instead of formatter output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-g GROUP</b>, <b>--group GROUP</b></b></dt>
  <dd class="It-tag">The name of the group that owns a process. This is required
      when starting any executable as a daemon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-h</b>, <b>--help</b></b></dt>
  <dd class="It-tag">Shows help for the command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-i SECONDS</b>, <b>--interval SECONDS</b></b></dt>
  <dd class="It-tag">The frequency (in seconds) at which the chef-client runs.
      When the chef-client is run at intervals, <b>--splay</b> and
      <b>--interval</b> values are applied before the chef-client run. Default
      value: <b>1800</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-j PATH</b>, <b>--json-attributes PATH</b></b></dt>
  <dd class="It-tag">The path to a file that contains JSON data.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use this option to define a <b>run_list</b> object. For example, a JSON file
      similar to:</dd>
</dl>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
&quot;run_list&quot;: [
  &quot;recipe[base]&quot;,
  &quot;recipe[foo]&quot;,
  &quot;recipe[bar]&quot;,
  &quot;role[webserver]&quot;
],
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
may be used by running <b>chef-client -j path/to/file.json</b>.
<div style="height: 1.00em;">&#x00A0;</div>
In certain situations this option may be used to update <b>normal</b>
  attributes.
<div style="height: 1.00em;">&#x00A0;</div>
<b>WARNING:</b>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">Any other attribute type that is contained in
  this JSON file will be treated as a <b>normal</b> attribute. For example,
  attempting to update <b>override</b> attributes using the <b>-j</b> option:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
{
  &quot;name&quot;: &quot;dev-99&quot;,
  &quot;description&quot;: &quot;Install some stuff&quot;,
  &quot;override_attributes&quot;: {
    &quot;apptastic&quot;: {
      &quot;enable_apptastic&quot;: &quot;false&quot;,
      &quot;apptastic_tier_name&quot;: &quot;dev-99.bomb.com&quot;
    }
  }
}
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
will result in a node object similar to:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
{
  &quot;name&quot;: &quot;maybe-dev-99&quot;,
  &quot;normal&quot;: {
  &quot;name&quot;: &quot;dev-99&quot;,
    &quot;description&quot;: &quot;Install some stuff&quot;,
    &quot;override_attributes&quot;: {
      &quot;apptastic&quot;: {
        &quot;enable_apptastic&quot;: &quot;false&quot;,
        &quot;apptastic_tier_name&quot;: &quot;dev-99.bomb.com&quot;
      }
    }
  }
}
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-k KEY_FILE</b>, <b>--client_key
    KEY_FILE</b></b></dt>
  <dd class="It-tag">The location of the file which contains the client key.
      Default value: <b>/etc/chef/client.pem</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-K KEY_FILE</b>, <b>--validation_key
    KEY_FILE</b></b></dt>
  <dd class="It-tag">The location of the file which contains the key used when a
      chef-client is registered with a Chef server. A validation key is signed
      using the <b>validation_client_name</b> for authentication. Default value:
      <b>/etc/chef/validation.pem</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-l LEVEL</b>, <b>--log_level LEVEL</b></b></dt>
  <dd class="It-tag">The level of logging that will be stored in a log
    file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-L LOGLOCATION</b>, <b>--logfile c</b></b></dt>
  <dd class="It-tag">The location in which log file output files will be saved.
      If this location is set to something other than <b>STDOUT</b>, standard
      output logging will still be performed (otherwise there would be no output
      other than to a file). This is recommended when starting any executable as
      a daemon. Default value: <b>STDOUT</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--[no-]color</b></b></dt>
  <dd class="It-tag">Use to view colored output. Default setting:
      <b>--color</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-N NODE_NAME</b>, <b>--node-name
    NODE_NAME</b></b></dt>
  <dd class="It-tag">The name of the node.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-o RUN_LIST_ITEM</b>, <b>--override-runlist
    RUN_LIST_ITEM</b></b></dt>
  <dd class="It-tag">Replace the current run list with the specified items. This
      option will not clear the list of cookbooks (and related files) that is
      cached on the node.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--once</b></b></dt>
  <dd class="It-tag">Use to run the chef-client only once and to cancel
      <b>interval</b> and <b>splay</b> options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-P PID_FILE</b>, <b>--pid PID_FILE</b></b></dt>
  <dd class="It-tag">The location in which a process identification number (pid)
      is saved. An executable, when started as a daemon, will write the pid to
      the specified file. Default value:
    <b>/tmp/name-of-executable.pid</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-r RUN_LIST_ITEM</b>, <b>--runlist
    RUN_LIST_ITEM</b></b></dt>
  <dd class="It-tag">Use to permanently replace the current run-list with the
      specified run-list items.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-R</b>, <b>--enable-reporting</b></b></dt>
  <dd class="It-tag">Use to enable Chef reporting, which performs data
      collection during a chef-client run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>RECIPE_FILE</b></b></dt>
  <dd class="It-tag">The path to a recipe. For example, if a recipe file is in
      the current directory, use <b>recipe_file.rb</b>. This is typically used
      with the <b>--local-mode</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--run-lock-timeout SECONDS</b></b></dt>
  <dd class="It-tag">The amount of time (in seconds) to wait for a chef-client
      run to finish. Default value: not set (indefinite). Set to <b>0</b> to
      cause a second chef-client to exit immediately.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-s SECONDS</b>, <b>--splay SECONDS</b></b></dt>
  <dd class="It-tag">A number (in seconds) to add to the <b>interval</b> that is
      used to determine the frequency of chef-client runs. This number can help
      prevent server load when there are many clients running at the same time.
      When the chef-client is run at intervals, <b>--splay</b> and
      <b>--interval</b> values are applied before the chef-client run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-S CHEF_SERVER_URL</b>, <b>--server
    CHEF_SERVER_URL</b></b></dt>
  <dd class="It-tag">The URL for the Chef server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-u USER</b>, <b>--user USER</b></b></dt>
  <dd class="It-tag">The user that owns a process. This is required when
      starting any executable as a daemon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-v</b>, <b>--version</b></b></dt>
  <dd class="It-tag">The version of the chef-client.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-W</b>, <b>--why-run</b></b></dt>
  <dd class="It-tag">Use to run the executable in why-run mode, which is a type
      of chef-client run that does everything except modify the system. Use
      why-run mode to understand why the chef-client makes the decisions that it
      makes and to learn more about the current and proposed state of the
      system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-z</b>, <b>--local-mode</b></b></dt>
  <dd class="It-tag">Use to run the chef-client in local mode. This allows all
      commands that work against the Chef server to also work against the local
      chef-repo.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="RUN_WITH_ELEVATED_PRIVILEGES"><a class="selflink" href="#RUN_WITH_ELEVATED_PRIVILEGES">RUN
  WITH ELEVATED PRIVILEGES</a></h1>
The chef-client may need to be run with elevated privileges in order to get a
  recipe to converge correctly. On UNIX and UNIX-like operating systems this can
  be done by running the command as root. On Microsoft Windows this can be done
  by running the command prompt as an administrator.
<h2 class="Ss" title="Ss" id="Linux"><a class="selflink" href="#Linux">Linux</a></h2>
On Linux, the following error sometimes occurs when the permissions used to run
  the chef-client are incorrect:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ chef-client
[Tue, 29 Nov 2011 19:46:17 -0800] INFO: *** Chef 10.X.X ***
[Tue, 29 Nov 2011 19:46:18 -0800] WARN: Failed to read the private key /etc/chef/client.pem: #&lt;Errno::EACCES: Permission denied - /etc/chef/client.pem&gt;
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
This can be resolved by running the command as root. There are a few ways this
  can be done:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Log in as root and then run the chef-client</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Use <b>su</b> to become the root user, and then run the
      chef-client. For example:</dd>
</dl>
<div style="margin-left: 2.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ su
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
and then:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ chef-client
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Use the sudo utility</dd>
</dl>
<div style="margin-left: 2.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ sudo chef-client
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Give a user access to read <b>/etc/chef</b> and also the
      files accessed by the chef-client. This requires super user privileges
      and, as such, is not a recommended approach</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Windows"><a class="selflink" href="#Windows">Windows</a></h2>
On Microsoft Windows, running without elevated privileges (when they are
  necessary) is an issue that fails silently. It will appear that the
  chef-client completed its run successfully, but the changes will not have been
  made. When this occurs, do one of the following to run the chef-client as the
  administrator:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Log in to the administrator account. (This is not the same
      as an account in the administrator's security group.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Run the chef-client process from the administrator account
      while being logged into another account. Run the following command:</dd>
</dl>
<div style="margin-left: 2.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ runas /user:Administrator &quot;cmd /C chef-client&quot;
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
This will prompt for the administrator account password.</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Open a command prompt by right-clicking on the command
      prompt application, and then selecting <b>Run as administrator</b>. After
      the command window opens, the chef-client can be run as the
    administrator</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>Start a Chef run when the chef-client is running as a daemon</b>
<div style="height: 1.00em;">&#x00A0;</div>
A chef-client that is running as a daemon can be woken up and started by sending
  the process a <b>SIGUSR1</b>. For example, to trigger a chef-client run on a
  machine running Linux:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ sudo killall -USR1 chef-client
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Start a Chef run manually</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ ps auxw|grep chef-client
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
to return something like:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
root           66066   0.9  0.0  2488880    264 s001  S+   10:26AM   0:03.05
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby /usr/bin/chef-client -i 3600 -s 20
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
and then enter:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ sudo kill -USR1 66066
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Chef</div>
<table class="foot">
  <tr>
    <td class="foot-date">Chef 12.0</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
