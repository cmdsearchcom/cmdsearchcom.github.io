<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BTRACEBACK(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BTRACEBACK(1)</td>
    <td class="head-vol">Network backup, recovery and verification</td>
    <td class="head-rtitle">BTRACEBACK(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<br/>
 btraceback - wrapper script around gdb and bsmtp
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>btraceback</b> <i>/path/to/binary</i> <i>pid</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>btraceback</b> is a wrapper shell script around the <b>gdb</b> debugger (or
  <b>dbx</b> on Solaris systems) and <b>bsmtp</b>, provided for debugging
  purposes.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
<b>btraceback</b> is called by the exception handlers of the Bacula daemons
  during a crash. It can also be called interactively to view the current state
  of the threads belonging to a process, but this is not recommended unless you
  are trying to debug a problem (see below).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
In order to work properly, debugging symbols must be available to the debugger
  on the system, and gdb, or dbx (on Solaris systems) must be available in the
  <b>$PATH</b>.
<div style="height: 1.00em;">&#x00A0;</div>
If the Director or Storage daemon runs under a non-root uid, you will probably
  need to be modify the <b>btraceback</b> script to elevate privileges for the
  call to <b>gdb</b>/<b>dbx</b>, to ensure it has the proper permissions to
  debug when called by the daemon.
<div style="height: 1.00em;">&#x00A0;</div>
Although Bacula's use of <b>btraceback</b> within its exception handlers is
  always safe, manual or interactive use of <b>btraceback</b> is subject to the
  same risks than live debugging of any program, which means it could cause
  Bacula to crash under rare and abnormal circumstances. Consequently we do not
  recommend manual use of <b>btraceback</b> in production environments unless it
  is required for debugging a problem.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<b>btracback</b> relies on <b>$PATH</b> to find the debugger.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/lib/bacula/btraceback</i></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">The script itself.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/sbin/btraceback</i></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">symbolic link to
  <i>/usr/lib/bacula/btraceback</i></div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/etc/bacula/scripts/btraceback.gdb</i></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">the GDB command batch used to output a stack
  trace</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manual page was written by Lucas B. Cohen &lt;lbc@members.fsf.org&gt;
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>bsmtp</b>(1) </div>
<table class="foot">
  <tr>
    <td class="foot-date">6 December 2009</td>
    <td class="foot-os">Kern Sibbald</td>
  </tr>
</table>
</body>
</html>
