<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MONMAPTOOL(8) Ceph MONMAPTOOL(8)</p>

<p style="margin-top: 1em">NAME <br>
monmaptool - ceph monitor cluster map manipulation tool</p>

<p style="margin-top: 1em">SYNOPSIS <br>
monmaptool mapfilename [ --clobber ] [ --print ] [ --create
] <br>
[ --add ip:port ... ] [ --rm ip:port ... ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
monmaptool is a utility to create, view, and modify a
monitor cluster map for the Ceph distributed storage system.
The monitor map specifies the only fixed addresses in the
Ceph <br>
distributed system. All other daemons bind to arbitrary
addresses and register themselves with the monitors.</p>

<p style="margin-top: 1em">When creating a map with
--create, a new monitor map with a new, random UUID will be
created. It should be followed by one or more monitor
addresses.</p>

<p style="margin-top: 1em">The default Ceph monitor port is
6789.</p>

<p style="margin-top: 1em">OPTIONS <br>
--print <br>
will print a plaintext dump of the map, after any
modifications are made.</p>

<p style="margin-top: 1em">--clobber <br>
will allow monmaptool to overwrite mapfilename if changes
are made.</p>

<p style="margin-top: 1em">--create <br>
will create a new monitor map with a new UUID (and with it,
a new, empty Ceph file system).</p>

<p style="margin-top: 1em">--generate <br>
generate a new monmap based on the values on the command
line or specified in the ceph configuration. This is, in
order of preference,</p>

<p style="margin-top: 1em">1. --monmap filename to specify
a monmap to load</p>

<p style="margin-top: 1em">2. --mon-host
&rsquo;host1,ip2&rsquo; to specify a list of hosts or ip
addresses</p>

<p style="margin-top: 1em">3. [mon.foo] sections containing
mon addr settings in the config</p>

<p style="margin-top: 1em">--filter-initial-members <br>
filter the initial monmap by applying the mon initial
members setting. Monitors not present in that list will be
removed, and initial members not present in the map will
<br>
be added with dummy addresses.</p>

<p style="margin-top: 1em">--add name ip:port <br>
will add a monitor with the specified ip:port to the
map.</p>

<p style="margin-top: 1em">--rm name <br>
will remove the monitor with the specified ip:port from the
map.</p>

<p style="margin-top: 1em">--fsid uuid <br>
will set the fsid to the given uuid. If not specified with
--create, a random fsid will be generated.</p>

<p style="margin-top: 1em">EXAMPLE <br>
To create a new map with three monitors (for a fresh Ceph
file system):</p>

<p style="margin-top: 1em">monmaptool --create --add mon.a
192.168.0.10:6789 --add mon.b 192.168.0.11:6789 --add mon.c
192.168.0.12:6789 --clobber monmap</p>

<p style="margin-top: 1em">To display the contents of the
map:</p>

<p style="margin-top: 1em">monmaptool --print monmap</p>

<p style="margin-top: 1em">To replace one monitor:</p>

<p style="margin-top: 1em">monmaptool --rm mon.a --add
mon.a 192.168.0.9:6789 --clobber monmap</p>

<p style="margin-top: 1em">AVAILABILITY <br>
monmaptool is part of Ceph, a massively scalable,
open-source, distributed storage system. Please refer to the
Ceph documentation at http://ceph.com/docs for more
information.</p>

<p style="margin-top: 1em">SEE ALSO <br>
ceph(8), crushtool(8),</p>

<p style="margin-top: 1em">COPYRIGHT <br>
2010-2017, Inktank Storage, Inc. and contributors. Licensed
under Creative Commons BY-SA</p>

<p style="margin-top: 1em">dev Apr 21, 2017
MONMAPTOOL(8)</p>
<hr>
</body>
</html>
