<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:10:31 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>dotdee(8) dotdee dotdee(8)</p>

<p style="margin-top: 1em">NAME <br>
dotdee - convert a flat file into one dynamically generated
from a .d directory</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dotdee -c|--comment /PATH/TO/FILE [COMMENT_DELIMITER_START
[COMMENT_DELIMITER_END]]</p>

<p style="margin-top: 1em">dotdee -d|--dir
/PATH/TO/FILE</p>

<p style="margin-top: 1em">dotdee -l|--list</p>

<p style="margin-top: 1em">dotdee -o|--original
/PATH/TO/FILE</p>

<p style="margin-top: 1em">dotdee -s|--setup /PATH/TO/FILE
[COMMENT_DELIMITER_START [COMMENT_DELIMITER_END]]</p>

<p style="margin-top: 1em">dotdee -u|--update
/PATH/TO/FILE</p>

<p style="margin-top: 1em">dotdee --update-contents
/PATH/TO/FILE</p>

<p style="margin-top: 1em">dotdee --update-link
/PATH/TO/FILE</p>

<p style="margin-top: 1em">dotdee --undo /PATH/TO/FILE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
dotdee is an administrative utility useful for converting a
flatfile into a dynamically generated file, from a .d
directory.</p>

<p style="margin-top: 1em">The original path at
/PATH/TO/FILE will be replaced with a symbolic link to
/etc/dotdee/PATH/TO/FILE, which is dynamically generated by
concatenating all of the files in <br>
/etc/dotdee/PATH/TO/FILE.d/*, per the order of the
shell.</p>

<p style="margin-top: 1em">The Linux kernel&rsquo;s
inotify(7) mechanism is used by dotdee running iwatch(1)
against the /etc/dotdee/ directory. Any changes to the
constituent files are automatically reflected <br>
in the constructed, dynamically generated file. Therefore,
as long as the iwatch(1) is running, you should never need
to actually run &quot;dotdee --update /PATH/TO/FILE&quot;
manually.</p>

<p style="margin-top: 1em">There is at least 1 file always
present in an /etc/dotdee/PATH/TO/FILE.d/ directory: <br>
- 50-original is the original file being managed; note that
write permissions are removed from this file, as we
don&rsquo;t want to ever modify it</p>

<p style="margin-top: 1em">Optionally, a 2nd file might be
present in an /etc/dotdee/PATH/TO/FILE.d/ directory: <br>
- .comment is a text file that defines the
&quot;comment&quot; string; if, for instance, the contents
of .comment is the # character, the following will be
printed to the head of the <br>
generated file:</p>

<p style="margin-top: 1em"># DO NOT EDIT THIS FILE
DIRECTLY! <br>
# Rather, add, remove, or modify file(s) in
[/etc/dotdee/path/to/some.conf.d] <br>
# per the dotdee(8) manpage.</p>

<p style="margin-top: 1em">Alternativately, .comment might
contain &quot;//&quot;, or &quot;;&quot;, or anything else
that denotes that the rest of the string will be a
comment.</p>

<p style="margin-top: 1em">As for the rest of the contents
of /etc/dotdee/PATH/TO/FILE.d/ directory, all of them must
begin with 2 or more digits, to ensure that they are
processed in a specific order.</p>

<p style="margin-top: 1em">there are 3 supported file
types: <br>
- plain text files, which must not be executable; these
files are simply concatenated in order <br>
- executable files; these files are executed, with the
current state of the managed file provided on STDIN, and the
STDOUT is then written to the managed file <br>
- patch/diff files; these files end in either
&quot;.patch&quot; or &quot;.diff&quot;, and are applied
using the patch(1) command to the current state of the
managed file</p>

<p style="margin-top: 1em">EXAMPLES <br>
$ sudo dotdee --setup /etc/hosts update-alternatives: using
/etc/dotdee/etc/hosts to provide /etc/hosts (etc:hosts) in
auto mode.</p>

<p style="margin-top: 1em">$ ll /etc/hosts lrwxrwxrwx 1
root root 27 2011-05-25 00:26 /etc/hosts -&gt;
/etc/alternatives/etc:hosts</p>

<p style="margin-top: 1em">$ ll /etc/alternatives/etc:hosts
lrwxrwxrwx 1 root root 22 2011-05-25 00:26
/etc/alternatives/etc:hosts -&gt; /etc/dotdee/etc/hosts</p>

<p style="margin-top: 1em">$ ll /etc/dotdee/etc/hosts
-rw-r--r-- 1 root root 221 2011-05-16 01:40
/etc/dotdee/etc/hosts</p>

<p style="margin-top: 1em">$ cat /etc/hosts 127.0.0.1
localhost # The following lines are desirable for IPv6
capable hosts ::1 ip6-localhost ip6-loopback fe00::0
ip6-localnet ff00::0 ip6-mcastprefix <br>
ff02::1 ip6-allnodes ff02::2 ip6-allrouters ff02::3
ip6-allhosts</p>

<p style="margin-top: 1em">$ echo 10.9.8.7 somehost | sudo
tee /etc/dotdee/etc/hosts.d/10-somehost</p>

<p style="margin-top: 1em">$ cat /etc/hosts 10.9.8.7
somehost 127.0.0.1 localhost # The following lines are
desirable for IPv6 capable hosts ::1 ip6-localhost
ip6-loopback fe00::0 ip6-localnet ff00::0 <br>
ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</p>

<p style="margin-top: 1em">$ cat
/etc/dotdee/etc/hosts.d/60-googledns.patch --- /etc/hosts
2011-05-16 01:40:03.000000000 +0000 +++ /tmp/hosts.new
2011-05-25 00:30:41.187412417 +0000 @@ -1,6 +1,8 @@ <br>
10.9.8.7 somehost <br>
127.0.0.1 localhost</p>

<p style="margin-top: 1em">+8.8.8.8 googledns + <br>
# The following lines are desirable for IPv6 capable hosts
<br>
::1 ip6-localhost ip6-loopback <br>
fe00::0 ip6-localnet</p>

<p style="margin-top: 1em">$ cat /etc/hosts 10.9.8.7
somehost 127.0.0.1 localhost</p>

<p style="margin-top: 1em">8.8.8.8 googledns</p>

<p style="margin-top: 1em"># The following lines are
desirable for IPv6 capable hosts ::1 ip6-localhost
ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes ff02::2 ip6-allrouters <br>
ff02::3 ip6-allhosts</p>

<p style="margin-top: 1em">$ cat
/etc/dotdee/etc/hosts.d/90-uppercase #!/bin/sh tr
&rsquo;[:lower:]&rsquo; &rsquo;[:upper:]&rsquo;</p>

<p style="margin-top: 1em">$ cat /etc/hosts 10.9.8.7
SOMEHOST 127.0.0.1 LOCALHOST</p>

<p style="margin-top: 1em">8.8.8.8 GOOGLEDNS</p>

<p style="margin-top: 1em"># THE FOLLOWING LINES ARE
DESIRABLE FOR IPV6 CAPABLE HOSTS ::1 IP6-LOCALHOST
IP6-LOOPBACK FE00::0 IP6-LOCALNET FF00::0 IP6-MCASTPREFIX
FF02::1 IP6-ALLNODES FF02::2 IP6-ALLROUTERS <br>
FF02::3 IP6-ALLHOSTS</p>

<p style="margin-top: 1em">$ sudo dotdee --dir /etc/hosts
/etc/dotdee/etc/hosts.d</p>

<p style="margin-top: 1em">$ cat /some/hosts/snippet &gt;
$(sudo dotdee --dir /etc/hosts)/60-foo</p>

<p style="margin-top: 1em">$ sudo dotdee --original
/etc/hosts /etc/dotdee/etc/hosts.d/50-original</p>

<p style="margin-top: 1em">$ cat /some/other/hosts/file
&gt; $(sudo dotdee --original /etc/hosts)</p>

<p style="margin-top: 1em">$ sudo dotdee --comment
/path/to/some.xml &rsquo;&lt;!--&rsquo;
&rsquo;--&gt;&rsquo;</p>

<p style="margin-top: 1em">SEE ALSO <br>
update-alternatives(8), iwatch(1), patch(1)</p>

<p style="margin-top: 1em">AUTHOR <br>
This manpage and the utility was written by Dustin Kirkland
&lt;kirkland@ubuntu.com&gt; for Ubuntu systems (but may be
used by others). Permission is granted to copy, distribute
<br>
and/or modify this document under the terms of the GNU
General Public License, Version 3 published by the Free
Software Foundation.</p>

<p style="margin-top: 1em">On Debian systems, the complete
text of the GNU General Public License can be found in
/usr/share/common-licenses/GPL, or on the web at
http://www.gnu.org/licenses/gpl.txt.</p>

<p style="margin-top: 1em">dotdee 21 May 2011 dotdee(8)</p>
<hr>
</body>
</html>
