<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:10:54 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FAXADDMODEM(8C) FAXADDMODEM(8C)</p>

<p style="margin-top: 1em">NAME <br>
faxaddmodem - configure a modem for use with HylaFAX</p>

<p style="margin-top: 1em">SYNOPSIS <br>
/usr/sbin/faxaddmodem [ -s speed ] [ -f ] [ -nointeractive ]
[ -skel=file ] [ tty ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
faxaddmodem is an interactive shell script that does the
necessary setup work to configure a modem for use by the
HylaFAX software. To enable use of the configured modem one
<br>
must either use the faxmodem(8C) program or configure the
init(8C) program to startup a faxgetty(8C) process for the
newly configured modem. In either case the faxq(8C) program
<br>
must also be running if outbound services are to be
provided.</p>

<p style="margin-top: 1em">If the serial port name is not
specified on the command line faxaddmodem will prompt for
it.</p>

<p style="margin-top: 1em">The configuration work done by
faxaddmodem falls into two main areas: creating the
necessary files to run a facsimile server process, and
defining the contents of the configura&acirc; <br>
tion database file. The hylafax-config (5F) manual page has
an in-depth description of the contents of the configuration
file and should be consulted when installing a modem.</p>

<p style="margin-top: 1em">Many aspects of configuring a
modem are operating system-specific; faxaddmodem uses a
collection of support routines and parameters that are
generated by the faxsetup(8C) pro&acirc; <br>
gram. If faxsetup has not been run on a machine prior to
running then faxaddmodem will abort.</p>

<p style="margin-top: 1em">faxaddmodem can be used to
install a new modem or re-configure an existing modem. In
the latter case it will propagate all the server-related
configuration parameters from the <br>
existing configuration file to the new configuration file.
These parameter include items such as the phone number, area
code, and tracing control parameters. Modem-related
con&acirc; <br>
figuration parameters are, however, not propagated. Instead
faxaddmodem deduces the type of modem attached to the
specified serial port and then sets up the configuration
param&acirc; <br>
eters using a set of prototype configuration files that have
been tested with like modems. If a modem is to be installed
for which there is no existing prototype file,
faxaddmo&acirc; <br>
dem will work from a comprehensive template of parameters
that can be edited either during or after the installation
process.</p>

<p style="margin-top: 1em">faxaddmodem deduces the type of
modem attached to the serial port by sending commands to the
modem at a fixed speed. By default, this speed is deduced by
sending commands to the <br>
modem at successively decreasing speeds until a valid
response is received. Alternatively, a fixed speed can be
specified from the command line with the -s option.</p>

<p style="margin-top: 1em">Because faxaddmodem needs to
read and write the modem that is to be installed it will not
proceed with an installation if the modem is locked for use
by another process. If the <br>
modem is not locked and the -f option is used, then the
system&rsquo;s fuser(1) command will be invoked to ensure
that faxaddmodem is the only process using the modem.</p>

<p style="margin-top: 1em">Finally, note that an
installation can be safely aborted at any time by hitting
the interrupt key. faxaddmodem delays making
installation-related changes until after everything <br>
has been setup.</p>

<p style="margin-top: 1em">OPTIONS <br>
-s speed Communicate with the modem at a fixed speed; this
may be any value recognized by the stty(1) command.</p>

<p style="margin-top: 1em">-f Use the fuser(1) command for
exclusive access to the device.</p>

<p style="margin-top: 1em">-nointeractive <br>
Do not prompt for any input whenever a default option is
available.</p>

<p style="margin-top: 1em">-skel=file <br>
Use file as the skeleton configuration file (used when there
is no existing modem config file).</p>

<p style="margin-top: 1em">PROTOTYPE CONFIGURATION FILES
<br>
faxaddmodem uses prototype configuration files that have
been created for known modems. These prototype files are
kept in the config subdirectory and, by convention, have
names <br>
that identify a brand or type of modem and the DTE-DCE flow
control scheme the prototype files configures. The
faxaddmodem(8C) program that is used to configure a modem
for use <br>
with HylaFAX selects a prototype configuration file using
information retrieved from the modem and comments embedded
in the prototype files. For Class 1 and Class 1.0 modems the
<br>
product ID code returned by the command
&lsquo;&lsquo;ATI0&rsquo;&rsquo; and the response from the
command &lsquo;&lsquo;ATI3&rsquo;&rsquo; are used to select
a prototype configuration file, while for Class 2 modems the
manu&acirc; <br>
facturer and model as returned by
&lsquo;&lsquo;AT+FMFR?&rsquo;&rsquo; and
&lsquo;&lsquo;AT+FMDL?&rsquo;&rsquo;, respectively, are used
(or &lsquo;&lsquo;AT+FMI?&rsquo;&rsquo; and
&lsquo;&lsquo;AT+FMM?&rsquo;&rsquo; for Class 2.0 and Class
2.1 modems).</p>

<p style="margin-top: 1em">A Class 1 prototype
configuration file is identified for use by faxaddmodem by
searching for a comment of the form: <br>
# CONFIG:CLASS1:144:.*:RTSCTS:
Manufacturer=&rsquo;AT&amp;T&rsquo; Model=Dataport <br>
In this example &lsquo;&lsquo;144&rsquo;&rsquo; is the
product ID code for an AT&amp;T DataPort modem,
&lsquo;&lsquo;.*&rsquo;&rsquo; is a regular expression
matched against the result string returned by the
&lsquo;&lsquo;ATI3&rsquo;&rsquo; command, and <br>
&lsquo;&lsquo;RTSCTS&rsquo;&rsquo; indicates the modem is
configured to use hardware flow control during fax
operation. The remainder of the line is evaluated by the
sh(1) and used to specify the <br>
modem&rsquo;s manufacturer and model (since Class 1 modems
do not have standard commands to query this
information).</p>

<p style="margin-top: 1em">Class 2, 2.0, and 2.1 prototype
configuration files match the string
&lsquo;&lsquo;manufacturer-model-flowcontrol&rsquo;&rsquo;
against a sh(1) glob pattern specified in the configuration
file, where <br>
manufacturer and model are the strings returned by querying
the modem and flowcontrol is either
&lsquo;&lsquo;RTSCTS&rsquo;&rsquo; for hardware flow control
or &lsquo;&lsquo;XONXOFF&rsquo;&rsquo; for software flow
control. <br>
For example: <br>
# CONFIG: CLASS2: ZyXEL*-RTSCTS <br>
# CONFIG: CLASS2.0: USRobotics*-XONXOFF <br>
are configuration comments that appear in the prototype file
for a ZyXEL 1496E with Class 2 support, and for a US
Robotics Courier modem with Class 2.0 firmware.</p>

<p style="margin-top: 1em">The faxaddmodem program merges
server-specific configuration parameters into a prototype
configuration according to comments placed in the prototype
file. All lines between <br>
&lsquo;&lsquo;BEGIN-SERVER&rsquo;&rsquo; and
&lsquo;&lsquo;END-SERVER&rsquo;&rsquo; comments are placed
with the appropriate server configuration parameters. Note
that this means modem-related configuration parameters must
be <br>
placed outside this area of the file.</p>

<p style="margin-top: 1em">FILES <br>
/var/spool/hylafax/etc/setup.cache master configuration
parameters <br>
/var/spool/hylafax/etc/setup.modem modem-related
configuration support <br>
/var/spool/hylafax/config prototype configuration files <br>
/usr/sbin/ondelay program to open device without waiting for
carrier <br>
/usr/sbin/lockname SVR4 UUCP lockfile name generator</p>

<p style="margin-top: 1em">Consult hylafax-server(5F) for a
complete discussion of the structure and content of the
spooling area.</p>

<p style="margin-top: 1em">SEE ALSO <br>
hylafax-server(5F), hylafax-config(5F), faxsetup(8C),
faxq(8C), faxgetty(8C), faxmodem(8C), faxconfig(8C),
faxsend(8C)</p>

<p style="margin-top: 1em">May 12, 1996 FAXADDMODEM(8C)</p>
<hr>
</body>
</html>
