<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:12:39 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>KDB5_LDAP_UTIL(8) MIT Kerberos KDB5_LDAP_UTIL(8)</p>

<p style="margin-top: 1em">NAME <br>
kdb5_ldap_util - Kerberos configuration utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
kdb5_ldap_util [-D user_dn [-w passwd]] [-H ldapuri] command
[command_options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
kdb5_ldap_util allows an administrator to manage realms,
Kerberos services and ticket policies.</p>

<p style="margin-top: 1em">COMMAND-LINE OPTIONS <br>
-D user_dn <br>
Specifies the Distinguished Name (DN) of the user who has
sufficient rights to perform the operation on the LDAP
server.</p>

<p style="margin-top: 1em">-w passwd <br>
Specifies the password of user_dn. This option is not
recommended.</p>

<p style="margin-top: 1em">-H ldapuri <br>
Specifies the URI of the LDAP server. It is recommended to
use ldapi:// or ldaps:// to connect to the LDAP server.</p>

<p style="margin-top: 1em">COMMANDS <br>
create <br>
create [-subtrees subtree_dn_list] [-sscope search_scope]
[-containerref container_reference_dn] [-k mkeytype] [-kv
mkeyVNO] [-m|-P password|-sf stashfilename] [-s] [-r realm]
<br>
[-maxtktlife max_ticket_life] [-maxrenewlife
max_renewable_ticket_life] [ticket_flags]</p>

<p style="margin-top: 1em">Creates realm in directory.
Options:</p>

<p style="margin-top: 1em">-subtrees subtree_dn_list <br>
Specifies the list of subtrees containing the principals of
a realm. The list contains the DNs of the subtree objects
separated by colon (:).</p>

<p style="margin-top: 1em">-sscope search_scope <br>
Specifies the scope for searching the principals under the
subtree. The possible values are 1 or one (one level), 2 or
sub (subtrees).</p>

<p style="margin-top: 1em">-containerref
container_reference_dn <br>
Specifies the DN of the container object in which the
principals of a realm will be created. If the container
reference is not configured for a realm, the principals will
<br>
be created in the realm container.</p>

<p style="margin-top: 1em">-k mkeytype <br>
Specifies the key type of the master key in the database.
The default is given by the master_key_type variable in
kdc.conf(5).</p>

<p style="margin-top: 1em">-kv mkeyVNO <br>
Specifies the version number of the master key in the
database; the default is 1. Note that 0 is not allowed.</p>

<p style="margin-top: 1em">-m Specifies that the master
database password should be read from the TTY rather than
fetched from a file on the disk.</p>

<p style="margin-top: 1em">-P password <br>
Specifies the master database password. This option is not
recommended.</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">-sf stashfilename <br>
Specifies the stash file of the master database
password.</p>

<p style="margin-top: 1em">-s Specifies that the stash file
is to be created.</p>

<p style="margin-top: 1em">-maxtktlife max_ticket_life <br>
(getdate string) Specifies maximum ticket life for
principals in this realm.</p>

<p style="margin-top: 1em">-maxrenewlife
max_renewable_ticket_life <br>
(getdate string) Specifies maximum renewable life of tickets
for principals in this realm.</p>

<p style="margin-top: 1em">ticket_flags <br>
Specifies global ticket flags for the realm. Allowable flags
are documented in the description of the add_principal
command in kadmin(1).</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
create -subtrees o=org -sscope SUB -r ATHENA.MIT.EDU <br>
Password for &quot;cn=admin,o=org&quot;: <br>
Initializing database for realm &rsquo;ATHENA.MIT.EDU&rsquo;
<br>
You will be prompted for the database Master Password. <br>
It is important that you NOT FORGET this password. <br>
Enter KDC database master key: <br>
Re-enter KDC database master key to verify:</p>

<p style="margin-top: 1em">modify <br>
modify [-subtrees subtree_dn_list] [-sscope search_scope]
[-containerref container_reference_dn] [-r realm]
[-maxtktlife max_ticket_life] [-maxrenewlife
max_renew&acirc; <br>
able_ticket_life] [ticket_flags]</p>

<p style="margin-top: 1em">Modifies the attributes of a
realm. Options:</p>

<p style="margin-top: 1em">-subtrees subtree_dn_list <br>
Specifies the list of subtrees containing the principals of
a realm. The list contains the DNs of the subtree objects
separated by colon (:). This list replaces the <br>
existing list.</p>

<p style="margin-top: 1em">-sscope search_scope <br>
Specifies the scope for searching the principals under the
subtrees. The possible values are 1 or one (one level), 2 or
sub (subtrees).</p>

<p style="margin-top: 1em">-containerref
container_reference_dn Specifies the DN of the <br>
container object in which the principals of a realm will be
created.</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">-maxtktlife max_ticket_life <br>
(getdate string) Specifies maximum ticket life for
principals in this realm.</p>

<p style="margin-top: 1em">-maxrenewlife
max_renewable_ticket_life <br>
(getdate string) Specifies maximum renewable life of tickets
for principals in this realm.</p>

<p style="margin-top: 1em">ticket_flags <br>
Specifies global ticket flags for the realm. Allowable flags
are documented in the description of the add_principal
command in kadmin(1).</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">shell% kdb5_ldap_util -D
cn=admin,o=org -H <br>
ldaps://ldap-server1.mit.edu modify +requires_preauth -r
<br>
ATHENA.MIT.EDU <br>
Password for &quot;cn=admin,o=org&quot;: <br>
shell%</p>

<p style="margin-top: 1em">view <br>
view [-r realm]</p>

<p style="margin-top: 1em">Displays the attributes of a
realm. Options:</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
view -r ATHENA.MIT.EDU <br>
Password for &quot;cn=admin,o=org&quot;: <br>
Realm Name: ATHENA.MIT.EDU <br>
Subtree: ou=users,o=org <br>
Subtree: ou=servers,o=org <br>
SearchScope: ONE <br>
Maximum ticket life: 0 days 01:00:00 <br>
Maximum renewable life: 0 days 10:00:00 <br>
Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE</p>

<p style="margin-top: 1em">destroy <br>
destroy [-f] [-r realm]</p>

<p style="margin-top: 1em">Destroys an existing realm.
Options:</p>

<p style="margin-top: 1em">-f If specified, will not prompt
the user for confirmation.</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">shell% kdb5_ldap_util -D
cn=admin,o=org -H <br>
ldaps://ldap-server1.mit.edu destroy -r ATHENA.MIT.EDU <br>
Password for &quot;cn=admin,o=org&quot;: <br>
Deleting KDC database of &rsquo;ATHENA.MIT.EDU&rsquo;, are
you sure? <br>
(type &rsquo;yes&rsquo; to confirm)? yes <br>
OK, deleting database of &rsquo;ATHENA.MIT.EDU&rsquo;...
<br>
shell%</p>

<p style="margin-top: 1em">list <br>
list</p>

<p style="margin-top: 1em">Lists the name of realms.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">shell% kdb5_ldap_util -D
cn=admin,o=org -H <br>
ldaps://ldap-server1.mit.edu list <br>
Password for &quot;cn=admin,o=org&quot;: <br>
ATHENA.MIT.EDU <br>
OPENLDAP.MIT.EDU <br>
MEDIA-LAB.MIT.EDU <br>
shell%</p>

<p style="margin-top: 1em">stashsrvpw <br>
stashsrvpw [-f filename] name</p>

<p style="margin-top: 1em">Allows an administrator to store
the password for service object in a file so that KDC and
Administration server can use it to authenticate to the LDAP
server. Options:</p>

<p style="margin-top: 1em">-f filename <br>
Specifies the complete path of the service password file. By
default, /usr/local/var/service_passwd is used.</p>

<p style="margin-top: 1em">name Specifies the name of the
object whose password is to be stored. If krb5kdc(8) or
kadmind(8) are configured for simple binding, this should be
the distinguished name it <br>
will use as given by the ldap_kdc_dn or ldap_kadmind_dn
variable in kdc.conf(5). If the KDC or kadmind is configured
for SASL binding, this should be the authentication <br>
name it will use as given by the ldap_kdc_sasl_authcid or
ldap_kadmind_sasl_authcid variable.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util stashsrvpw -f
/home/andrew/conf_keyfile <br>
cn=service-kdc,o=org <br>
Password for &quot;cn=service-kdc,o=org&quot;: <br>
Re-enter password for &quot;cn=service-kdc,o=org&quot;:</p>

<p style="margin-top: 1em">create_policy <br>
create_policy [-r realm] [-maxtktlife max_ticket_life]
[-maxrenewlife max_renewable_ticket_life] [ticket_flags]
policy_name</p>

<p style="margin-top: 1em">Creates a ticket policy in the
directory. Options:</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">-maxtktlife max_ticket_life <br>
(getdate string) Specifies maximum ticket life for
principals.</p>

<p style="margin-top: 1em">-maxrenewlife
max_renewable_ticket_life <br>
(getdate string) Specifies maximum renewable life of tickets
for principals.</p>

<p style="margin-top: 1em">ticket_flags <br>
Specifies the ticket flags. If this option is not specified,
by default, no restriction will be set by the policy.
Allowable flags are documented in the description of <br>
the add_principal command in kadmin(1).</p>

<p style="margin-top: 1em">policy_name <br>
Specifies the name of the ticket policy.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
create_policy -r ATHENA.MIT.EDU -maxtktlife &quot;1
day&quot; <br>
-maxrenewlife &quot;1 week&quot; -allow_postdated
+needchange <br>
-allow_forwardable tktpolicy <br>
Password for &quot;cn=admin,o=org&quot;:</p>

<p style="margin-top: 1em">modify_policy <br>
modify_policy [-r realm] [-maxtktlife max_ticket_life]
[-maxrenewlife max_renewable_ticket_life] [ticket_flags]
policy_name</p>

<p style="margin-top: 1em">Modifies the attributes of a
ticket policy. Options are same as for create_policy.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H <br>
ldaps://ldap-server1.mit.edu modify_policy -r ATHENA.MIT.EDU
<br>
-maxtktlife &quot;60 minutes&quot; -maxrenewlife &quot;10
hours&quot; <br>
+allow_postdated -requires_preauth tktpolicy <br>
Password for &quot;cn=admin,o=org&quot;:</p>

<p style="margin-top: 1em">view_policy <br>
view_policy [-r realm] policy_name</p>

<p style="margin-top: 1em">Displays the attributes of a
ticket policy. Options:</p>

<p style="margin-top: 1em">policy_name <br>
Specifies the name of the ticket policy.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
view_policy -r ATHENA.MIT.EDU tktpolicy <br>
Password for &quot;cn=admin,o=org&quot;: <br>
Ticket policy: tktpolicy <br>
Maximum ticket life: 0 days 01:00:00 <br>
Maximum renewable life: 0 days 10:00:00 <br>
Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE</p>

<p style="margin-top: 1em">destroy_policy <br>
destroy_policy [-r realm] [-force] policy_name</p>

<p style="margin-top: 1em">Destroys an existing ticket
policy. Options:</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">-force Forces the deletion of
the policy object. If not specified, the user will be
prompted for confirmation before deleting the policy.</p>

<p style="margin-top: 1em">policy_name <br>
Specifies the name of the ticket policy.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
destroy_policy -r ATHENA.MIT.EDU tktpolicy <br>
Password for &quot;cn=admin,o=org&quot;: <br>
This will delete the policy object &rsquo;tktpolicy&rsquo;,
are you sure? <br>
(type &rsquo;yes&rsquo; to confirm)? yes <br>
** policy object &rsquo;tktpolicy&rsquo; deleted.</p>

<p style="margin-top: 1em">list_policy <br>
list_policy [-r realm]</p>

<p style="margin-top: 1em">Lists the ticket policies in
realm if specified or in the default realm. Options:</p>

<p style="margin-top: 1em">-r realm <br>
Specifies the Kerberos realm of the database.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">kdb5_ldap_util -D cn=admin,o=org
-H ldaps://ldap-server1.mit.edu <br>
list_policy -r ATHENA.MIT.EDU <br>
Password for &quot;cn=admin,o=org&quot;: <br>
tktpolicy <br>
tmppolicy <br>
userpolicy</p>

<p style="margin-top: 1em">SEE ALSO <br>
kadmin(1)</p>

<p style="margin-top: 1em">AUTHOR <br>
MIT</p>

<p style="margin-top: 1em">COPYRIGHT <br>
1985-2016, MIT</p>

<p style="margin-top: 1em">1.14.1 KDB5_LDAP_UTIL(8)</p>
<hr>
</body>
</html>
