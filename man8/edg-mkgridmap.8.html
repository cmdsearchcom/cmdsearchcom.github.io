<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EDG-MKGRIDMAP(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EDG-MKGRIDMAP(8)</td>
    <td class="head-vol"> </td>
    <td class="head-rtitle">EDG-MKGRIDMAP(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
edg-mkgridmap - a tool to build the grid-mapfile
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>edg-mkgridmap</b> [<b>--help</b>] [<b>--version</b>]
<br/>
 [ <b>--conf</b>=<i>config_file</i>]
<br/>
 [ <b>--output</b>[=<i>output_file</i>]]
<br/>
 [ <b>--quiet</b>] [<b>--verbose</b>]
<br/>
 [ <b>--safe</b>] [<b>--nosafe</b>]
<br/>
 [ <b>--cache</b>] [<b>--nocache</b>]
<br/>
 [ <b>--proxy</b>] [<b>--noproxy</b>]
<br/>
 [ <b>--usermode</b>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>edg-mkgridmap</b> is a tool to build the grid-mapfile from VO servers, taking
  into account both VO and local policies.
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
<i>edg-mkgridmap.conf</i> file contains configuration information for
  <b>edg-mkgridmap</b>.
<div class="Pp"></div>
The syntax of the <i>edg-mkgridmap.conf</i> file is discussed seperately. The
  <i>edg-mkgridmap.conf</i>(5) documentation should be consulted for detailed
  reference information.
<div class="Pp"></div>
The default location is <i>/etc/edg-mkgridmap.conf</i>.
<div class="Pp"></div>
The file essentially consists of a list of directives composed by a keyword and
  one or more arguments. Optional arguments are put in square brackets.
<dl class="Bl-tag">
  <dt class="It-tag">* <b>group</b> <i>URI</i> <i>[lcluser]</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>default_lcluser</b> <i>default_lcluser</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>auth</b> <i>URI</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>allow</b>&#x23AA;<b>deny</b>
    <i>pattern_to_match</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>gmf_local</b> <i>grid-mapfile-local</i></dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print a summary of the command line options end exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the version of <b>edg-mkgridmap</b> end exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--conf</b>=<i>config_file</i></dt>
  <dd class="It-tag">Specifies the configuration file that is used by
      <b>edg-mkgridmap</b>. If omitted, <b>edg-mkgridmap</b> checks
      <i>/var/lib/edg-mkgridmap/etc/edg-mkgridmap.conf</i> to see if a
      machine-specific configuration has been setup. If such a file is not
      present, <b>edg-mkgridmap</b> uses the default configuration file
      <i>/etc/edg-mkgridmap.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output</b>[=<i>output_file</i>]</dt>
  <dd class="It-tag">Specifies the output file. If omitted, <i>stdout</i> is
      used. If the optional argument <i>output_file</i> is omitted, the value of
      the environment variable <b>GRIDMAP</b> is used. If <b>GRIDMAP</b> is not
      set, then the default value <i>/etc/grid-security/grid-mapfile</i> is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">Turn off error messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Print lots of useful informations. Ignored if
      <b>--quiet</b> is specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--safe</b>, <b>--nosafe</b></dt>
  <dd class="It-tag">Per <b>group</b> keep (<b>--safe</b>) or remove
      (<b>--nosafe</b>) the old grid-mapfile entries that are not found back,
      when at least one of the sources for that <b>group</b> directive had a
      problem. Default is remove ( <b>--nosafe</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cache</b>, <b>--nocache</b></dt>
  <dd class="It-tag">Disable (<b>--cache</b>) or enable (<b>--nocache</b>) the
      grid-mapfile update when its contents remain unchanged. Default is enable
      ( <b>--nocache</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--proxy</b>, <b>--noproxy</b></dt>
  <dd class="It-tag">Enable (<b>--proxy</b>) or disable (<b>--noproxy</b>) proxy
      support for HTTP/HTTPS and VOMS/VOMSS connections. Default is disable (
      <b>--noproxy</b>).
    <div style="height: 1.00em;">&#x00A0;</div>
    The proxy support must be configured through appropriate environmental
      variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--usermode</b></dt>
  <dd class="It-tag">Facilitate running the script as an ordinary user by having
      the relevant environment variables point to the user's X509 proxy instead
      of using the personal certificate and key. The user's proxy is taken from
      the <b>X509_USER_PROXY</b> environment variable, if defined, else from the
      default location <i>/tmp/x509up_u$UID</i>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ERRORS"><a class="selflink" href="#ERRORS">ERRORS</a></h1>
In case of one or more errors, <b>edg-mkgridmap</b> returns an exit code which
  is computed adding these possible values:
<dl class="Bl-tag">
  <dt class="It-tag">* <b>1</b></dt>
  <dd class="It-tag">per <b>group</b> directive for which a server could not be
      contacted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>16</b></dt>
  <dd class="It-tag">error reading the configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>32</b></dt>
  <dd class="It-tag">error writing the grid-mapfile.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>64</b></dt>
  <dd class="It-tag">error with a <b>group</b> directive.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* <b>128</b></dt>
  <dd class="It-tag">error with an <b>auth</b> directive.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
The <b>--verbose</b> option produces some useful diagnostics.
<div class="Pp"></div>
Any error message generated by <b>edg-mkgridmap</b> is logged to the
  <b>syslogd</b>.
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>EDG_MKGRIDMAP_OPTIONS</b></dt>
  <dd class="It-tag">Used to specify command line options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>GRIDMAP</b></dt>
  <dd class="It-tag">Used to determine the location of the grid-mapfile. If not
      set, then the default value <i>/etc/grid-security/grid-mapfile</i> is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CERTDIR</b></dt>
  <dd class="It-tag">Used to determine the directory containing CA certificates.
      If not set, then the default value <i>/etc/grid-security/certificates</i>
      is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>X509_USER_CERT</b></dt>
  <dd class="It-tag">Used to determine the location of the host certificate. If
      not set, then the default value <i>/etc/grid-security/hostcert.pem</i> is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>X509_USER_KEY</b></dt>
  <dd class="It-tag">Used to determine the location of the host private key. If
      not set, then the default value <i>/etc/grid-security/hostkey.pem</i> is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>X509_USER_PROXY</b></dt>
  <dd class="It-tag">Used to determine the location of the user's proxy when the
      <b>--usermode</b> option is given. If not set, the default value
      <i>/tmp/x509up_u$UID</i> is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>http_proxy</b></dt>
  <dd class="It-tag">Used to determine the proxy for HTTP connections. The
      syntax is:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
  http_proxy=&quot;[http://]&lt;host&gt;:&lt;port&gt;&quot;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>https_proxy</b></dt>
  <dd class="It-tag">Used to determine the proxy for HTTPS connections. The
      syntax is:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
  https_proxy=&quot;[http://]&lt;host&gt;:&lt;port&gt;&quot;
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
  edg-mkgridmap
</pre>
<div class="Pp"></div>
Writes the grid-mapfile to the standard output.
<div class="Pp"></div>
<pre>
  edg-mkgridmap --output=-
</pre>
<div class="Pp"></div>
Writes the grid-mapfile to the standard output.
<div class="Pp"></div>
<pre>
  edg-mkgridmap --output
</pre>
<div class="Pp"></div>
Writes the grid-mapfile to the default location of the grid-mapfile.
<div class="Pp"></div>
<pre>
  edg-mkgridmap --output=&lt;output_file&gt;
</pre>
<div class="Pp"></div>
Writes the grid-mapfile to &lt;output_file&gt;.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<i>/var/lib/edg-mkgridmap/etc/edg-mkgridmap.conf</i>
<div class="Pp"></div>
<i>/etc/edg-mkgridmap.conf</i>
<div class="Pp"></div>
<i>/usr/libexec/edg-mkgridmap/local-subject2user</i>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>edg-mkgridmap.conf</i>(5)
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
EU DataGrid Authorization Working Group, EGEE Middleware Security Group, Maarten
  Litmaath (CERN/WLCG)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2011-04-03</td>
    <td class="foot-os"> </td>
  </tr>
</table>
</body>
</html>
