<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:16:45 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>TB_POLGEN(8) User Manuals TB_POLGEN(8)</p>

<p style="margin-top: 1em">NAME <br>
tb_polgen - manage tboot verified launch policy</p>

<p style="margin-top: 1em">SYNOPSIS <br>
tb_polgen COMMAND [OPTION]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
tb_polgen is used to manage tboot verified launch
policy.</p>

<p style="margin-top: 1em">COMMANDS <br>
--create <br>
Create an empty tboot verified launch policy file.</p>

<p style="margin-top: 1em">--type nonfatal | continue |
halt <br>
Nonfatal means ignoring all non-fatal errors and continuing.
Continue means ignoring verification errors and halting
otherwise. Halt means halting on any errors.</p>

<p style="margin-top: 1em">[--ctrl policy-control-value]
<br>
The default value 1 is to extend policy into PCR 17.</p>

<p style="margin-top: 1em">policy-file</p>

<p style="margin-top: 1em">--add Add a module hash entry
into a policy file.</p>

<p style="margin-top: 1em">--num module-number | any <br>
The module-number is the 0-based module number corresponding
to modules loaded by the bootloader.</p>

<p style="margin-top: 1em">--pcr TPM-PCR-number | none <br>
The TPM-PCR-number is the PCR to extend the module&rsquo;s
measurement into.</p>

<p style="margin-top: 1em">--hash any | image</p>

<p style="margin-top: 1em">[--cmdline command-line] <br>
The command line is from grub.conf, and it should not
include the module name (e.g. &quot;/xen.gz&quot;).</p>

<p style="margin-top: 1em">[--image image-file-name]</p>

<p style="margin-top: 1em">policy-file</p>

<p style="margin-top: 1em">--del Delete a module hash entry
from a policy file.</p>

<p style="margin-top: 1em">--num module-number | any <br>
The module-number is the 0-based module number corresponding
to modules loaded by the bootloader.</p>

<p style="margin-top: 1em">[--pos hash-number] <br>
The hash-number is the 0-based index of the hash, within the
list of hashes for the specified module.</p>

<p style="margin-top: 1em">policy-file</p>

<p style="margin-top: 1em">--unwrap <br>
Extract the tboot verified launch policy from a TXT LCP
element file.</p>

<p style="margin-top: 1em">--elt elt-file</p>

<p style="margin-top: 1em">policy-file</p>

<p style="margin-top: 1em">--show policy-file <br>
Show the policy information in a policy file.</p>

<p style="margin-top: 1em">--help Print out the help
message.</p>

<p style="margin-top: 1em">--verbose <br>
Enable verbose output; can be specified with any
command.</p>

<p style="margin-top: 1em">EXAMPLES <br>
tb_polgen --create --type nonfatal vl.pol</p>

<p style="margin-top: 1em">tb_polgen --add --num 0 --pcr
none --hash image --cmdline &quot;cmdline&quot; --image
/boot/xen.gz vl.pol</p>

<p style="margin-top: 1em">tb_polgen --add --num 1 --pcr 19
--hash image --cmdline &quot;cmdline&quot; --image
/boot/vmlinuz-2.6.18.8-xen vl.pol</p>

<p style="margin-top: 1em">tb_polgen --add --num 2 --pcr 19
--hash image --cmdline &quot;&quot; --image
/boot/initrd-2.6.18.8-xen.img vl.pol</p>

<p style="margin-top: 1em">tb_polgen --del --num 1
vl.pol</p>

<p style="margin-top: 1em">tb_polgen --show --verbose
vl.pol</p>

<p style="margin-top: 1em">Note1: <br>
It is not necessary to specify a PCR for module 0, since
this module&rsquo;s measurement will always be extended to
PCR 18. If a PCR is specified, then the measurement will be
<br>
extended to that PCR in addition to PCR 18.</p>

<p style="margin-top: 1em">Note2: <br>
--unwrap is not implemented correctly. There should be a
defined UUID for this and that should be checked before
copying the data. There should be a wrap or similar command
to <br>
generates an element file for a policy.</p>

<p style="margin-top: 1em">SEE ALSO <br>
lcp_crtpol(8), lcp_crtpol2(8), lcp_crtpolelt(8).</p>

<p style="margin-top: 1em">tboot 2011-12-31
TB_POLGEN(8)</p>
<hr>
</body>
</html>
