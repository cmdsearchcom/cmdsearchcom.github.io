<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GFDUMP.POSTGRESQL(8) Gfarm GFDUMP.POSTGRESQL(8)</p>

<p style="margin-top: 1em">NAME <br>
gfdump.postgresql - dump/restore Gfarm metadata</p>

<p style="margin-top: 1em">SYNOPSIS <br>
gfdump.postgresql -d [options]</p>

<p style="margin-top: 1em">gfdump.postgresql -r
[options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
gfdump.postgresql dumps/restores metadata of Gfarm, managed
by PostgreSQL running as a backend database. You need to
execute this command on the host that the backend database
of <br>
PostgreSQL is running. The command reads gfmd.conf, the
configuration file of gfmd to get access information about
the backend database. If gfmd is configured in the
non-private <br>
mode, the root privilege is required to read the file.</p>

<p style="margin-top: 1em">When gfdump.postgresql is
executed with -d option, it dumps the database to the file
db.out at the current directory.</p>

<p style="margin-top: 1em">When it is executed with -r
option, it restores the database from the dump file, db.out
at the current directory. More specifically, it does the
followings.</p>

<p style="margin-top: 1em">1. Stop gfmd if running.</p>

<p style="margin-top: 1em">2. Remove the current
database.</p>

<p style="margin-top: 1em">3. Create a database again.</p>

<p style="margin-top: 1em">4. Restore a database from the
dump file.</p>

<p style="margin-top: 1em">5. Delete the current journal
file of gfmd, if exists.</p>

<p style="margin-top: 1em">6. Start gfmd again.</p>

<p style="margin-top: 1em">OPTIONS <br>
--prefix path <br>
If this option is given, gfdump.postgresql reads
PREFIX/etc/gfmd.conf as the configuration file of gfmd. By
default, it reads %%SYSCONFDIR%%/etc/gfmd.conf.</p>

<p style="margin-top: 1em">-P prefix <br>
Specify an installation prefix of the backend database (e.g.
/usr/local). When gfdump.postgresql executes a PostgreSQL
command such as pg_dump, it assumes the command is <br>
installed under the given prefix. If this option is omitted,
gfdump.postgresql searches directories listed in the
environment variable PATH for the commands.</p>

<p style="margin-top: 1em">-l <br>
Specify a path to the directory where the backend database
puts files to store metadata of Gfarm.</p>

<p style="margin-top: 1em">If the backend database is
PostgreSQL, the directory is commonly called PGDATA
directory. The default is PREFIX/var/gfarm-pgsql where
PREFIX is a prefix given by --prefix <br>
option.</p>

<p style="margin-top: 1em">-f file <br>
Specify the name of dump file. The default is db.out at the
current directory.</p>

<p style="margin-top: 1em">--help <br>
Show usage, then exit.</p>

<p style="margin-top: 1em">-t <br>
Show values of configurable parameters in human readable
format, then exit immediately.</p>

<p style="margin-top: 1em">-d <br>
Dump mode.</p>

<p style="margin-top: 1em">-n <br>
Do not start/stop gfmd.</p>

<p style="margin-top: 1em">-r <br>
Restore mode.</p>

<p style="margin-top: 1em">FILES <br>
%%SYSCONFDIR%%/gfmd.conf <br>
configuration file for gfmd</p>

<p style="margin-top: 1em">SEE ALSO <br>
pg_dump(1), dropdb(1), createdb(1), psql(1), gfmd(8)</p>

<p style="margin-top: 1em">Gfarm 30 Jan 2015
GFDUMP.POSTGRESQL(8)</p>
<hr>
</body>
</html>
