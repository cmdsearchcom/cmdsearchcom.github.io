<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GFDUMP.POSTGRESQL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GFDUMP.POSTGRESQL(8)</td>
    <td class="head-vol">Gfarm</td>
    <td class="head-rtitle">GFDUMP.POSTGRESQL(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
gfdump.postgresql - dump/restore Gfarm metadata
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 19.00ex; text-indent: -19.00ex;"><b>gfdump.postgresql</b>
  -d [ <i>options</i>]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 19.00ex; text-indent: -19.00ex;"><b>gfdump.postgresql</b>
  -r [ <i>options</i>]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>gfdump.postgresql</b> dumps/restores metadata of Gfarm, managed by PostgreSQL
  running as a backend database. You need to execute this command on the host
  that the backend database of PostgreSQL is running. The command reads
  gfmd.conf, the configuration file of <b>gfmd</b> to get access information
  about the backend database. If <b>gfmd</b> is configured in the non-private
  mode, the root privilege is required to read the file.
<div class="Pp"></div>
When <b>gfdump.postgresql</b> is executed with <b>-d</b> option, it dumps the
  database to the file db.out at the current directory.
<div class="Pp"></div>
When it is executed with <b>-r</b> option, it restores the database from the
  dump file, db.out at the current directory. More specifically, it does the
  followings.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.Stop <b>gfmd</b> if running.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.Remove the current database.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.Create a database again.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 4.Restore a database from the dump
  file.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 5.Delete the current journal file of
  <b>gfmd</b>, if exists.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 6.Start <b>gfmd</b> again.</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--prefix</b> <i>path</i>
<div style="margin-left: 4.00ex;">If this option is given,
  <b>gfdump.postgresql</b> reads PREFIX/etc/gfmd.conf as the configuration file
  of <b>gfmd</b>. By default, it reads %%SYSCONFDIR%%/etc/gfmd.conf.</div>
<div class="Pp"></div>
<b>-P</b> <i>prefix</i>
<div style="margin-left: 4.00ex;">Specify an installation prefix of the backend
  database (e.g. /usr/local). When <b>gfdump.postgresql</b> executes a
  PostgreSQL command such as <b>pg_dump</b>, it assumes the command is installed
  under the given prefix. If this option is omitted, <b>gfdump.postgresql</b>
  searches directories listed in the environment variable <b>PATH</b> for the
  commands.</div>
<div class="Pp"></div>
<b>-l</b>
<div style="margin-left: 4.00ex;">Specify a path to the directory where the
  backend database puts files to store metadata of Gfarm.
<div style="height: 1.00em;">&#x00A0;</div>
If the backend database is PostgreSQL, the directory is commonly called PGDATA
  directory. The default is PREFIX/var/gfarm-pgsql where PREFIX is a prefix
  given by <b>--prefix</b> option.</div>
<div class="Pp"></div>
<b>-f</b> <i>file</i>
<div style="margin-left: 4.00ex;">Specify the name of dump file. The default is
  db.out at the current directory.</div>
<div class="Pp"></div>
<b>--help</b>
<div style="margin-left: 4.00ex;">Show usage, then exit.</div>
<div class="Pp"></div>
<b>-t</b>
<div style="margin-left: 4.00ex;">Show values of configurable parameters in
  human readable format, then exit immediately.</div>
<div class="Pp"></div>
<b>-d</b>
<div style="margin-left: 4.00ex;">Dump mode.</div>
<div class="Pp"></div>
<b>-n</b>
<div style="margin-left: 4.00ex;">Do not start/stop <b>gfmd</b>.</div>
<div class="Pp"></div>
<b>-r</b>
<div style="margin-left: 4.00ex;">Restore mode.</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
%%SYSCONFDIR%%/gfmd.conf
<div style="margin-left: 4.00ex;">configuration file for <b>gfmd</b></div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>pg_dump</b>(1), <b>dropdb</b>(1), <b>createdb</b>(1), <b>psql</b>(1),
  <b>gfmd</b>(8)</div>
<table class="foot">
  <tr>
    <td class="foot-date">30 Jan 2015</td>
    <td class="foot-os">Gfarm</td>
  </tr>
</table>
</body>
</html>
