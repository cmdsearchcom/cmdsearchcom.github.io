<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VFS_SHADOW_COPY(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VFS_SHADOW_COPY(8)</td>
    <td class="head-vol">System Administration tools</td>
    <td class="head-rtitle">VFS_SHADOW_COPY(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
vfs_shadow_copy - Expose snapshots to Windows clients as shadow copies.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 1.00ex; text-indent: -1.00ex;">vfs objects =
  shadow_copy</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This VFS module is part of the <b>samba</b>(7) suite.
<div class="Pp"></div>
The vfs_shadow_copy VFS module functionality that is similar to Microsoft Shadow
  Copy services. When setup properly, this module allows Microsoft Shadow Copy
  clients to browse &quot;shadow copies&quot; on Samba shares.
<div class="Pp"></div>
This module is stackable.
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
vfs_shadow_copy relies on a filesystem snapshot implementation. Many common
  filesystems have native support for this.
<div class="Pp"></div>
Filesystem snapshots must be mounted on specially named directories in order to
  be recognized by vfs_shadow_copy. The snapshot mount points must be immediate
  children of a the directory being shared.
<div class="Pp"></div>
The snapshot naming convention is @GMT-YYYY.MM.DD-hh.mm.ss, where:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;YYYY is the 4 digit year</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;MM is the 2 digit month</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;DD is the 2 digit day</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;hh is the 2 digit hour</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mm is the 2 digit minute</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;ss is the 2 digit second.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The vfs_shadow_copy snapshot naming convention can be produced with the
  following <b>date</b>(1) command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
	TZ=GMT date +@GMT-%Y.%m.%d-%H.%M.%S
	
</pre>
</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Add shadow copy support to user home directories:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
         <i>[homes]</i>
	 <b>vfs objects = shadow_copy</b>
</pre>
</div>
<h1 class="Sh" title="Sh" id="CAVEATS"><a class="selflink" href="#CAVEATS">CAVEATS</a></h1>
This is not a backup, archival, or version control solution.
<div class="Pp"></div>
With Samba or Windows servers, vfs_shadow_copy is designed to be an end-user
  tool only. It does not replace or enhance your backup and archival solutions
  and should in no way be considered as such. Additionally, if you need version
  control, implement a version control system.
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
This man page is correct for version 3.0.25 of the Samba suite.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original Samba software and related utilities were created by Andrew
  Tridgell. Samba is now developed by the Samba Team as an Open Source project
  similar to the way the Linux kernel is developed.</div>
<table class="foot">
  <tr>
    <td class="foot-date">05/25/2017</td>
    <td class="foot-os">Samba 4.4</td>
  </tr>
</table>
</body>
</html>
