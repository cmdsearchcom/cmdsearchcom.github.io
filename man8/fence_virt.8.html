<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>FENCE_AGENT(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FENCE_AGENT(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">FENCE_AGENT(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
fence_virt - Fencing agent for virtual machines using VM Channel
<div style="height: 1.00em;">&#x00A0;</div>
fence_xvm - Fencing agent for virtual machines using multicast
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
fence_virt and fence_xvm are an I/O Fencing agents which can be used with
  virtual machines. Fence_xvm is backward compatible with fence_xvmd.
<div style="height: 1.00em;">&#x00A0;</div>
Fence_virt and fence_xvm talk to fence_virtd, which supports multiple backend
  plugins, including:
<br/>
 - libvirt for single-node operation
<br/>
 - Cluster Checkpoints when using Linux-cluster release 3.0.0 or later
<br/>
 - libvirt-qpid for multi-node, non-cluster operation
<div style="height: 1.00em;">&#x00A0;</div>
For compatibility, fence_xvm may talk to fence_xvmd from linux-cluster release 2
  or later.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
fence_virt and fence_xvm accept options on the command line as well as from
  stdin. The fencing daemon sends parameters through stdin when it execs the
  agent. The agent may be run by itself with command line options, which is
  useful for testing or turning on or off virtual machines from scripts.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="GENERAL_PARAMETERS"><a class="selflink" href="#GENERAL_PARAMETERS">GENERAL
  PARAMETERS</a></h1>
	
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Increment (command line) debug level 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b></dt>
  <dd class="It-tag">Virtual machine (domain UUID or name) to fence
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag">Fencing action (null, off, on, reboot, status, monitor,
      list, or metadata) (Default Value: reboot). See the FENCING ACTIONS
      section.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">Fencing timeout (in seconds) (Default Value: 30)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b></dt>
  <dd class="It-tag">Fencing delay (in seconds). The fence agent will wait the
      specified number of seconds before attempting a fencing operation.
      (Default Value: 0)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="MULTICAST_PARAMETERS"><a class="selflink" href="#MULTICAST_PARAMETERS">MULTICAST
  PARAMETERS</a></h1>
These parameters are used only when using fence_virt in multicast mode (e.g. by
  running fence_xvm).
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">IP Family (auto, ipv4, ipv6) (Default Value: auto) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">Multicast address (Default Values: 225.0.0.12 / ff02::3:1)
      	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">IP port (Default Value: 1229) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b></dt>
  <dd class="It-tag">Multicast time-to-live (in hops) (Default Value: 2) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">Multicast retransmit time (in 1/10sec) (Default Value: 20)
      	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b></dt>
  <dd class="It-tag">Authentication (none, sha1, sha256, sha512) (Default Value:
      sha256) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Packet hash strength (none, sha1, sha256, sha512) (Default
      Value: sha256) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag">Shared key file (Default Value: /etc/cluster/fence_xvm.key)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">Specify if using fence_virt with older fence_xvmd
      installations which are using UUIDs. Fence_virtd ignores this parameter.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SERIAL/VMCHANNEL_PARAMETERS"><a class="selflink" href="#SERIAL/VMCHANNEL_PARAMETERS">SERIAL/VMCHANNEL
  PARAMETERS</a></h1>
These parameters are used only when using fence_virt in serial mode (e.g. by
  running fence_virt).
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b></dt>
  <dd class="It-tag">Serial device (fence_virt mode). On the host, the serial
      device must be mapped in each domain's configuration file. See
      fence_virt.conf(5) for more information. Specifying a serial device causes
      fence_virt to use serial mode (as opposed to VMChannel mode).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b></dt>
  <dd class="It-tag">Serial parameters. (Default Value: 115200,8N1)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b></dt>
  <dd class="It-tag">VMChannel IP address (Default Value: 10.0.2.179)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">VMChannel IP port (Default Value: 1229)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="GENERAL_STDIN_PARAMETERS"><a class="selflink" href="#GENERAL_STDIN_PARAMETERS">GENERAL
  STDIN PARAMETERS</a></h1>
These parameters are passed to fence_virt via standard input if no command line
  options are present. They are presented to fence_virt in the form:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 name=value 	
<dl class="Bl-tag">
  <dt class="It-tag"><b>debug</b></dt>
  <dd class="It-tag">Specify debugging level
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>port</b></dt>
  <dd class="It-tag">Virtual machine (domain UUID or name) to fence
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>action</b></dt>
  <dd class="It-tag">Fencing action (null, off, on, reboot, status, monitor,
      list, or metadata) (Default Value: reboot). See the FENCING ACTIONS
      section. 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>timeout</b></dt>
  <dd class="It-tag">Fencing timeout (in seconds) (Default Value: 30)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="MULTICAST_STDIN_PARAMETERS"><a class="selflink" href="#MULTICAST_STDIN_PARAMETERS">MULTICAST
  STDIN PARAMETERS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ip_family</b></dt>
  <dd class="It-tag">IP Family ([auto], ipv4, ipv6) (Default Value: auto) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>multicast_address</b></dt>
  <dd class="It-tag">Multicast address (Defaults: 225.0.0.12 / ff02::3:1) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>port</b></dt>
  <dd class="It-tag">IP port (Default Value: 1229) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>multicast_ttl</b></dt>
  <dd class="It-tag">Multicast time-to-live (in hops) (Default Value: 2) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>retrans</b></dt>
  <dd class="It-tag">Multicast retransmit time (in 1/10sec) (Default Value: 20)
      	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>auth</b></dt>
  <dd class="It-tag">Authentication (none, sha1, sha256, sha512) (Default Value:
      sha256) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hash</b></dt>
  <dd class="It-tag">Packet hash strength (none, sha1, sha256, sha512) (Default
      Value: sha256) 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>key_file</b></dt>
  <dd class="It-tag">Shared key file (Default Value: /etc/cluster/fence_xvm.key)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use_uuid</b></dt>
  <dd class="It-tag">Specify if using fence_virt with older fence_xvmd
      installations which are using UUIDs. Fence_virtd ignores this parameter.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SERIAL/VMCHANNEL_STDIN_PARAMETERS"><a class="selflink" href="#SERIAL/VMCHANNEL_STDIN_PARAMETERS">SERIAL/VMCHANNEL
  STDIN PARAMETERS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>serial_device</b></dt>
  <dd class="It-tag">Serial device. On the host, the serial device must be
      mapped in each domain's configuration file. See fence_virt.conf(5) for
      more information. If specified, causes fence_virt to operate in serial
      mode (not specifying causes fence_virt to operate in VM Channel mode).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>serial_params</b></dt>
  <dd class="It-tag">Serial parameters. Default=115200,8N1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>channel_ip</b></dt>
  <dd class="It-tag">Channel IP. Default=10.0.2.179
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipport</b></dt>
  <dd class="It-tag">Channel port. Default=1229
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FENCING_ACTIONS"><a class="selflink" href="#FENCING_ACTIONS">FENCING
  ACTIONS</a></h1>
	
<dl class="Bl-tag">
  <dt class="It-tag"><b>off </b></dt>
  <dd class="It-tag">
    <br/>
     Destroy or turn off virtual machine. 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reboot </b></dt>
  <dd class="It-tag">Reboot virtual machine; i.e. restart the virtual machine on
      the same host where it is currently running. 	</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>on </b></dt>
  <dd class="It-tag">Turn on a virtual machine. Note: Turning on a virtual
      machine only works with some fence_virt backends.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>status </b></dt>
  <dd class="It-tag">Check whether a virtual machine is running or not.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>monitor </b></dt>
  <dd class="It-tag">Check the health of fence_virtd's backend plugin.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list </b></dt>
  <dd class="It-tag">List virtual machines which may be fenced by fence_virtd
      (not supported on all backends).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>metadata </b></dt>
  <dd class="It-tag">Print XML metadata to standard output.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
fence_virtd(8), fence(8), fence_virtd.conf(5)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2009-12-04</td>
    <td class="foot-os">fence_virt (Fence Agent)</td>
  </tr>
</table>
</body>
</html>
