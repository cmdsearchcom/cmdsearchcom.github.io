<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:06 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FENCE_AGENT(8) System Manager&rsquo;s Manual
FENCE_AGENT(8)</p>

<p style="margin-top: 1em">NAME <br>
fence_virt - Fencing agent for virtual machines using VM
Channel</p>

<p style="margin-top: 1em">fence_xvm - Fencing agent for
virtual machines using multicast</p>

<p style="margin-top: 1em">DESCRIPTION <br>
fence_virt and fence_xvm are an I/O Fencing agents which can
be used with virtual machines. Fence_xvm is backward
compatible with fence_xvmd.</p>

<p style="margin-top: 1em">Fence_virt and fence_xvm talk to
fence_virtd, which supports multiple backend plugins,
including: <br>
- libvirt for single-node operation <br>
- Cluster Checkpoints when using Linux-cluster release 3.0.0
or later <br>
- libvirt-qpid for multi-node, non-cluster operation</p>

<p style="margin-top: 1em">For compatibility, fence_xvm may
talk to fence_xvmd from linux-cluster release 2 or
later.</p>

<p style="margin-top: 1em">fence_virt and fence_xvm accept
options on the command line as well as from stdin. The
fencing daemon sends parameters through stdin when it execs
the agent. The agent may be <br>
run by itself with command line options, which is useful for
testing or turning on or off virtual machines from
scripts.</p>

<p style="margin-top: 1em">GENERAL PARAMETERS</p>

<p style="margin-top: 1em">-d Increment (command line)
debug level</p>

<p style="margin-top: 1em">-H Virtual machine (domain UUID
or name) to fence</p>

<p style="margin-top: 1em">-o Fencing action (null, off,
on, reboot, status, monitor, list, or metadata) (Default
Value: reboot). See the FENCING ACTIONS section.</p>

<p style="margin-top: 1em">-t Fencing timeout (in seconds)
(Default Value: 30)</p>

<p style="margin-top: 1em">-w Fencing delay (in seconds).
The fence agent will wait the specified number of seconds
before attempting a fencing operation. (Default Value:
0)</p>

<p style="margin-top: 1em">MULTICAST PARAMETERS <br>
These parameters are used only when using fence_virt in
multicast mode (e.g. by running fence_xvm).</p>

<p style="margin-top: 1em">-i IP Family (auto, ipv4, ipv6)
(Default Value: auto)</p>

<p style="margin-top: 1em">-a Multicast address (Default
Values: 225.0.0.12 / ff02::3:1)</p>

<p style="margin-top: 1em">-p IP port (Default Value:
1229)</p>

<p style="margin-top: 1em">-T Multicast time-to-live (in
hops) (Default Value: 2)</p>

<p style="margin-top: 1em">-r Multicast retransmit time (in
1/10sec) (Default Value: 20)</p>

<p style="margin-top: 1em">-C Authentication (none, sha1,
sha256, sha512) (Default Value: sha256)</p>

<p style="margin-top: 1em">-c Packet hash strength (none,
sha1, sha256, sha512) (Default Value: sha256)</p>

<p style="margin-top: 1em">-k Shared key file (Default
Value: /etc/cluster/fence_xvm.key)</p>

<p style="margin-top: 1em">-u Specify if using fence_virt
with older fence_xvmd installations which are using UUIDs.
Fence_virtd ignores this parameter.</p>

<p style="margin-top: 1em">SERIAL/VMCHANNEL PARAMETERS <br>
These parameters are used only when using fence_virt in
serial mode (e.g. by running fence_virt).</p>

<p style="margin-top: 1em">-D Serial device (fence_virt
mode). On the host, the serial device must be mapped in each
domain&rsquo;s configuration file. See fence_virt.conf(5)
for more information. Specify&acirc; <br>
ing a serial device causes fence_virt to use serial mode (as
opposed to VMChannel mode).</p>

<p style="margin-top: 1em">-P Serial parameters. (Default
Value: 115200,8N1)</p>

<p style="margin-top: 1em">-A VMChannel IP address (Default
Value: 10.0.2.179)</p>

<p style="margin-top: 1em">-p VMChannel IP port (Default
Value: 1229)</p>

<p style="margin-top: 1em">GENERAL STDIN PARAMETERS <br>
These parameters are passed to fence_virt via standard input
if no command line options are present. They are presented
to fence_virt in the form:</p>

<p style="margin-top: 1em">name=value</p>

<p style="margin-top: 1em">debug Specify debugging
level</p>

<p style="margin-top: 1em">port Virtual machine (domain
UUID or name) to fence</p>

<p style="margin-top: 1em">action Fencing action (null,
off, on, reboot, status, monitor, list, or metadata)
(Default Value: reboot). See the FENCING ACTIONS
section.</p>

<p style="margin-top: 1em">timeout <br>
Fencing timeout (in seconds) (Default Value: 30)</p>

<p style="margin-top: 1em">MULTICAST STDIN PARAMETERS <br>
ip_family <br>
IP Family ([auto], ipv4, ipv6) (Default Value: auto)</p>

<p style="margin-top: 1em">multicast_address <br>
Multicast address (Defaults: 225.0.0.12 / ff02::3:1)</p>

<p style="margin-top: 1em">port IP port (Default Value:
1229)</p>

<p style="margin-top: 1em">multicast_ttl <br>
Multicast time-to-live (in hops) (Default Value: 2)</p>

<p style="margin-top: 1em">retrans <br>
Multicast retransmit time (in 1/10sec) (Default Value:
20)</p>

<p style="margin-top: 1em">auth Authentication (none, sha1,
sha256, sha512) (Default Value: sha256)</p>

<p style="margin-top: 1em">hash Packet hash strength (none,
sha1, sha256, sha512) (Default Value: sha256)</p>

<p style="margin-top: 1em">key_file <br>
Shared key file (Default Value:
/etc/cluster/fence_xvm.key)</p>

<p style="margin-top: 1em">use_uuid <br>
Specify if using fence_virt with older fence_xvmd
installations which are using UUIDs. Fence_virtd ignores
this parameter.</p>

<p style="margin-top: 1em">SERIAL/VMCHANNEL STDIN
PARAMETERS <br>
serial_device <br>
Serial device. On the host, the serial device must be mapped
in each domain&rsquo;s configuration file. See
fence_virt.conf(5) for more information. If specified,
causes <br>
fence_virt to operate in serial mode (not specifying causes
fence_virt to operate in VM Channel mode).</p>

<p style="margin-top: 1em">serial_params <br>
Serial parameters. Default=115200,8N1.</p>

<p style="margin-top: 1em">channel_ip <br>
Channel IP. Default=10.0.2.179</p>

<p style="margin-top: 1em">ipport Channel port.
Default=1229</p>

<p style="margin-top: 1em">FENCING ACTIONS</p>

<p style="margin-top: 1em">off <br>
Destroy or turn off virtual machine.</p>

<p style="margin-top: 1em">reboot Reboot virtual machine;
i.e. restart the virtual machine on the same host where it
is currently running.</p>

<p style="margin-top: 1em">on Turn on a virtual machine.
Note: Turning on a virtual machine only works with some
fence_virt backends.</p>

<p style="margin-top: 1em">status Check whether a virtual
machine is running or not.</p>

<p style="margin-top: 1em">monitor <br>
Check the health of fence_virtd&rsquo;s backend plugin.</p>

<p style="margin-top: 1em">list List virtual machines which
may be fenced by fence_virtd (not supported on all
backends).</p>

<p style="margin-top: 1em">metadata <br>
Print XML metadata to standard output.</p>

<p style="margin-top: 1em">SEE ALSO <br>
fence_virtd(8), fence(8), fence_virtd.conf(5)</p>

<p style="margin-top: 1em">fence_virt (Fence Agent)
2009-12-04 FENCE_AGENT(8)</p>
<hr>
</body>
</html>
