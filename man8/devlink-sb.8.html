<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:10:13 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DEVLINK-SB(8) Linux DEVLINK-SB(8)</p>

<p style="margin-top: 1em">NAME <br>
devlink-sb - devlink shared buffer configuration</p>

<p style="margin-top: 1em">SYNOPSIS <br>
devlink [ OPTIONS ] sb { COMMAND | help }</p>

<p style="margin-top: 1em">OPTIONS := { -V[ersion] |
-n[no-nice-names] }</p>

<p style="margin-top: 1em">devlink sb show [ DEV [ sb
SB_INDEX ] ]</p>

<p style="margin-top: 1em">devlink sb pool show [ DEV [ sb
SB_INDEX ] <br>
pool POOL_INDEX ]</p>

<p style="margin-top: 1em">devlink sb pool set DEV [ sb
SB_INDEX ] <br>
pool POOL_INDEX <br>
size POOL_SIZE <br>
thtype { static | dynamic }</p>

<p style="margin-top: 1em">devlink sb port pool show [
DEV/PORT_INDEX [ sb SB_INDEX ] <br>
pool POOL_INDEX ]</p>

<p style="margin-top: 1em">devlink sb port pool set
DEV/PORT_INDEX [ sb SB_INDEX ] <br>
pool POOL_INDEX <br>
th THRESHOLD</p>

<p style="margin-top: 1em">devlink sb tc bind show [
DEV/PORT_INDEX [ sb SB_INDEX ] <br>
tc TC_INDEX <br>
type { ingress | egress } ]</p>

<p style="margin-top: 1em">devlink sb tc bind set
DEV/PORT_INDEX [ sb SB_INDEX ] <br>
tc TC_INDEX <br>
type { ingress | egress } <br>
pool POOL_INDEX <br>
th THRESHOLD</p>

<p style="margin-top: 1em">devlink sb occupancy show { DEV
| DEV/PORT_INDEX } [ sb SB_INDEX ]</p>

<p style="margin-top: 1em">devlink sb occupancy snapshot
DEV [ sb SB_INDEX ]</p>

<p style="margin-top: 1em">devlink sb occupancy clearmax
DEV [ sb SB_INDEX ]</p>

<p style="margin-top: 1em">devlink sb help</p>

<p style="margin-top: 1em">DESCRIPTION <br>
devlink sb show - display available shared buffers and their
attributes <br>
DEV - specifies the devlink device to show shared buffers.
If this argument is omitted all shared buffers of all
devices are listed.</p>

<p style="margin-top: 1em">SB_INDEX - specifies the shared
buffer. If this argument is omitted shared buffer with index
0 is selected. Behaviour of this argument it the same for
every command.</p>

<p style="margin-top: 1em">devlink sb pool show - display
available pools and their attributes <br>
DEV - specifies the devlink device to show pools. If this
argument is omitted all pools of all devices are listed.</p>

<p style="margin-top: 1em">devlink sb pool set - set
attributes of pool <br>
DEV - specifies the devlink device to set pool.</p>

<p style="margin-top: 1em">size POOL_SIZE <br>
size of the pool in Bytes.</p>

<p style="margin-top: 1em">thtype { static | dynamic } <br>
pool threshold type.</p>

<p style="margin-top: 1em">static - Threshold values for
the pool will be passed in Bytes.</p>

<p style="margin-top: 1em">dynamic - Threshold values
(&quot;to_alpha&quot;) for the pool will be used to compute
alpha parameter according to formula: <br>
alpha = 2 ^ (to_alpha - 10)</p>

<p style="margin-top: 1em">The range of the passed value is
between 0 to 20. The computed alpha is used to determine the
maximum usage of the flow: <br>
max_usage = alpha / (1 + alpha) * Free_Buffer</p>

<p style="margin-top: 1em">devlink sb port pool show -
display port-pool combinations and threshold for each <br>
DEV/PORT_INDEX - specifies the devlink port.</p>

<p style="margin-top: 1em">pool POOL_INDEX <br>
pool index.</p>

<p style="margin-top: 1em">devlink sb port pool set - set
port-pool threshold <br>
DEV/PORT_INDEX - specifies the devlink port.</p>

<p style="margin-top: 1em">pool POOL_INDEX <br>
pool index.</p>

<p style="margin-top: 1em">th THRESHOLD <br>
threshold value. Type of the value is either Bytes or
&quot;to_alpha&quot;, depends on thtype set for the
pool.</p>

<p style="margin-top: 1em">devlink sb tc bind show -
display port-TC to pool bindings and threshold for each <br>
DEV/PORT_INDEX - specifies the devlink port.</p>

<p style="margin-top: 1em">tc TC_INDEX <br>
index of either ingress or egress TC, usually in range 0 to
8 (depends on device).</p>

<p style="margin-top: 1em">type { ingress | egress } <br>
TC type.</p>

<p style="margin-top: 1em">devlink sb tc bind set - set
port-TC to pool binding with specified threshold <br>
DEV/PORT_INDEX - specifies the devlink port.</p>

<p style="margin-top: 1em">tc TC_INDEX <br>
index of either ingress or egress TC, usually in range 0 to
8 (depends on device).</p>

<p style="margin-top: 1em">type { ingress | egress } <br>
TC type.</p>

<p style="margin-top: 1em">pool POOL_INDEX <br>
index of pool to bind this to.</p>

<p style="margin-top: 1em">th THRESHOLD <br>
threshold value. Type of the value is either Bytes or
&quot;to_alpha&quot;, depends on thtype set for the
pool.</p>

<p style="margin-top: 1em">devlink sb occupancy show -
display shared buffer occupancy values for device or port
<br>
This command is used to browse shared buffer occupancy
values. Values are showed for every port-pool combination as
well as for all port-TC combinations (with pool this port-TC
<br>
is bound to). Format of value is: <br>
current_value/max_value <br>
Note that before showing values, one has to issue command
first.</p>

<p style="margin-top: 1em">DEV - specifies the devlink
device to show occupancy values for.</p>

<p style="margin-top: 1em">DEV/PORT_INDEX - specifies the
devlink port to show occupancy values for.</p>

<p style="margin-top: 1em">devlink sb occupancy snapshot -
take occupancy snapshot of shared buffer for device <br>
This command is used to take a snapshot of shared buffer
occupancy values. After that, the values can be showed using
occupancy show command.</p>

<p style="margin-top: 1em">DEV - specifies the devlink
device to take occupancy snapshot on.</p>

<p style="margin-top: 1em">devlink sb occupancy clearmax -
clear occupancy watermarks of shared buffer for device <br>
This command is used to reset maximal occupancy values
reached for whole device. Note that before browsing reset
values, one has to issue occupancy snapshot command.</p>

<p style="margin-top: 1em">DEV - specifies the devlink
device to clear occupancy watermarks on.</p>

<p style="margin-top: 1em">EXAMPLES <br>
devlink sb show <br>
List available share buffers.</p>

<p style="margin-top: 1em">devlink sb pool show <br>
List available pools and their config.</p>

<p style="margin-top: 1em">devlink sb port pool show
pci/0000:03:00.0/1 pool 0 <br>
Show port-pool setup for specified port and pool.</p>

<p style="margin-top: 1em">sudo devlink sb port pool set
pci/0000:03:00.0/1 pool 0 th 15 <br>
Change threshold for port specified port and pool.</p>

<p style="margin-top: 1em">devlink sb tc bind show
pci/0000:03:00.0/1 tc 0 type ingress <br>
Show pool binding and threshold for specified port and
TC.</p>

<p style="margin-top: 1em">sudo devlink sb tc bind set
pci/0000:03:00.0/1 tc 0 type ingress pool 0 th 9 <br>
Set pool binding and threshold for specified port and
TC.</p>

<p style="margin-top: 1em">sudo devlink sb occupancy
snapshot pci/0000:03:00.0 <br>
Make a snapshot of occupancy of shared buffer for specified
devlink device.</p>

<p style="margin-top: 1em">devlink sb occupancy show
pci/0000:03:00.0/1 <br>
Show occupancy for specified port from the snapshot.</p>

<p style="margin-top: 1em">sudo devlink sb occupancy
clearmax pci/0000:03:00.0 <br>
Clear watermarks for shared buffer of specified devlink
device.</p>

<p style="margin-top: 1em">SEE ALSO <br>
devlink(8), devlink-dev(8), devlink-port(8),
devlink-monitor(8),</p>

<p style="margin-top: 1em">AUTHOR <br>
Jiri Pirko &lt;jiri@mellanox.com&gt;</p>

<p style="margin-top: 1em">iproute2 14 Apr 2016
DEVLINK-SB(8)</p>
<hr>
</body>
</html>
