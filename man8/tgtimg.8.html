<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:16:56 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>TGTIMG(8) [FIXME: manual] TGTIMG(8)</p>

<p style="margin-top: 1em">NAME <br>
tgtimg - Linux SCSI Target Framework Image File Utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
tgtimg [-o --op &lt;operation&gt;] [-Y --device-type
&lt;device-type&gt;] [-b --barcode &lt;barcode&gt;] [-s
--size &lt;size&gt;] [-t --type &lt;media-type&gt;] [-f
--file &lt;path&gt;] [-T --thin-provisioning]</p>

<p style="margin-top: 1em">tgtimg --help</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Tgtimg is a utility to create and manage the image files
used by the TGTD device emulation.</p>

<p style="margin-top: 1em">This command is used to
initialize device image files with the additional metadata,
such as barcode, list of blocks, total size, etc that the
TGTD emulation needs.</p>

<p style="margin-top: 1em">OPTIONS <br>
-h, --help <br>
Show a help screen and exit.</p>

<p style="margin-top: 1em">-o, --op {new|show} <br>
Operation. Is either new to create a new image file or show
to show the content of an existing image file.</p>

<p style="margin-top: 1em">-Y, --device-type &lt;type&gt;
<br>
This specifies the type of image file.</p>

<p style="margin-top: 1em">Supported device types are :
<br>
cd : to create media for a dvd device <br>
disk : to create media for a disk device <br>
tape : to create media for a tape device</p>

<p style="margin-top: 1em">-t, --type &lt;media-type&gt;
<br>
When creating a new image, this specifies the type of media
to emulate. The available mediatypes depend on the type of
the device.</p>

<p style="margin-top: 1em">Supported media types for cd
devices are : <br>
dvd+r : create a blank writeable DVD+R disk</p>

<p style="margin-top: 1em">Supported media types for disk
devices are : <br>
disk : create an empty disk</p>

<p style="margin-top: 1em">Supported media types for tape
devices are : <br>
data : create a normal data tape <br>
clean : create a cleaning tape <br>
worm : create a worm</p>

<p style="margin-top: 1em">-b, --barcode &lt;barcode&gt;
<br>
When creating a new image, this argument specifies the
barcode to use with this image file. Backup application
software often uses barcodes to identify specific tapes.
When <br>
emulating a VTL, make sure that all tape images use unique
barcodes.</p>

<p style="margin-top: 1em">-s, --size &lt;size&gt; <br>
When creating a new image, this specifies the size in
megabytes for the virtual tape image.</p>

<p style="margin-top: 1em">-f, --file &lt;path&gt; <br>
The filename of the image file.</p>

<p style="margin-top: 1em">-T, --thin-provisioning <br>
This argument makes the allocation of the image format use
thin-provisioning. This means that the file created will be
a sparse file that will allocate blocks from the <br>
filesystem on demand.</p>

<p style="margin-top: 1em">Be careful when using
thin-provisioning. If the filesystem fills up a iSCSI write
to a thin-provisioned LUN can fail. Initiators generally do
not handle &quot;out of space&quot; errors <br>
gracefully.</p>

<p style="margin-top: 1em">Thin-provisioning uses
FALLOC_FL_PUNCH_HOLE which is only available on some linux
filesystems. Thin-provisioning can only be used for DISK
images.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To create a new 100MByte disk</p>

<p style="margin-top: 1em">tgtimg --op new --device-type
disk --type disk --size 100 --file /data/hd001.raw</p>

<p style="margin-top: 1em">To create a new tape image</p>

<p style="margin-top: 1em">tgtimg --op new --device-type
tape --barcode 12345 --size 100 --type data --file
/data/tape001.img</p>

<p style="margin-top: 1em">To view the content of an
existing image</p>

<p style="margin-top: 1em">tgtimg --op show --device-type
tape --file /data/tape001.img</p>

<p style="margin-top: 1em">To create a new blank DVD+R
image</p>

<p style="margin-top: 1em">tgtimg --op new --device-type cd
--type dvd+r --file /data/dvd001.iso</p>

<p style="margin-top: 1em">SEE ALSO <br>
tgtd(8), tgtadm(8), tgt-admin(8), tgt-setup-lun(8).
http://stgt.sourceforge.net/</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Report bugs to &lt;stgt@vger.kernel.org&gt;</p>

<p style="margin-top: 1em">[FIXME: source] 01/25/2017
TGTIMG(8)</p>
<hr>
</body>
</html>
