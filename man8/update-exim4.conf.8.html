<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>UPDATE-EXIM4.CONF(8) System Manager&rsquo;s Manual
UPDATE-EXIM4.CONF(8)</p>

<p style="margin-top: 1em">NAME <br>
update-exim4.conf - Generate exim4 configuration files.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
update-exim4.conf [-v|--verbose] [-h|--help]
[--keepcomments] [--removecomments] [-o|--output file]</p>

<p style="margin-top: 1em">OPTIONS <br>
--check <br>
Generate temporary configuration file, check its validity
and exit with either success (exitcode 0) or an error
(exitcode 1). On success the temporary file is deleted, <br>
otherwise the file is left for further debugging.</p>

<p style="margin-top: 1em">-d|--confdir directory <br>
Read input from directory instead of /etc/exim4.</p>

<p style="margin-top: 1em">-h|--help <br>
Show short help message and exit</p>

<p style="margin-top: 1em">--keepcomments <br>
Do not remove comment lines from the output file.</p>

<p style="margin-top: 1em">-o|--output file <br>
Write output to file instead of
/var/lib/exim4/config.autogenerated.</p>

<p style="margin-top: 1em">--removecomments <br>
Remove comment lines from the output file. [Default]</p>

<p style="margin-top: 1em">-v|--verbose <br>
Enable verbose mode</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The script update-exim4.conf generates the main
configuration files /var/lib/exim4/config.autogenerated for
Exim v4 by merging the data in the template file <br>
/etc/exim4/exim4.conf.template or the ones in the
/etc/exim4/conf.d directory tree respectively and
/etc/exim4/update-exim4.conf.conf to the output file
/var/lib/exim4/con&acirc; <br>
fig.autogenerated.</p>

<p style="margin-top: 1em">If dc_use_split_config in
/etc/exim4/update-exim4.conf.conf specifies a split
configuration, update-exim4.conf processes the
/etc/exim4/conf.d subdirectories in the order main, <br>
acl, router, transport, retry, rewrite and auth. Within each
directory it takes files in lexical sort order by file name.
It concatenates all these files and makes the debconf <br>
replacement described below.</p>

<p style="margin-top: 1em">If you are not using split
configuration update-exim4.conf concatenates
/etc/exim4/exim4.conf.localmacros (if this file exists) and
/etc/exim4/exim4.conf.template (in this order) <br>
and makes the debconf replacement described below.</p>

<p style="margin-top: 1em">In either case, before
outputting the result to
/var/lib/exim4/config.autogenerated, update-exim4.conf
generates a number of exim configuration macros from the
contents of <br>
dc_something from /etc/exim4/update-exim4.conf.conf and
inserts them into the configuration right after the
definition of the exim configuration macro
UPEX4CmacrosUPEX4C (which <br>
is only used as placeholder for this case). The macro
definitions are bracketed with .ifdef clauses to allow the
local admin to override the values with earlier definitions.
<br>
update-exim4.conf makes no other changes to the
configuration. This makes it very simple to make small
changes to the configuration and still have the benefits of
debconf.</p>

<p style="margin-top: 1em">On the other hand if you
don&rsquo;t want to manage exim4.conf with debconf install
your own handcrafted version as /etc/exim4/exim4.conf. Exim
will use this file if it exists and <br>
ignore the autogenerated one. Additionally you might want to
set dc_eximconfig_configtype=none in
/etc/exim4/update-exim4.conf.conf to stop debconf from
asking you questions <br>
about exim4.</p>

<p style="margin-top: 1em">update-exim4.conf exits silently
and does nothing if /etc/exim4/exim4.conf exists and -o was
not used to direct the output to a different file than
/var/lib/exim4/config.autogen&acirc; <br>
erated.</p>

<p style="margin-top: 1em">update-exim4.conf will only use
files in the conf.d directory that have a filename which
consists only of letters, numbers, underscores and hyphens
([:alnum:]_-), similar to <br>
run-parts(8). Additionally, update-exim4.conf will use
/etc/exim4/conf.d/foo/bar.rul instead of
/etc/exim4/conf.d/foo/bar if the .rul file exists. This is
meant to be helpful <br>
for easy interaction with packages extending Exim.</p>

<p style="margin-top: 1em">If the new configuration will be
written to /var/lib/exim4/config.autogenerated,
update-exim4.conf will check the validity of the freshly
generated configuration. If the new file <br>
is detected as invalid, update-exim4.conf leaves the old
/var/lib/exim4/config.autogenerated untouched and exits with
an error.</p>

<p style="margin-top: 1em">However, there are still
possible invalidities that can only be detected at run time.
This most notably applies to errors in expressions that are
expanded at run time.</p>

<p style="margin-top: 1em">If the new configuration will be
written to some other file, no validity checking occurs and
that file will always be overwritten.</p>

<p style="margin-top: 1em">EXAMPLES <br>
You want to be able to check exim&rsquo;s queue as normal
user: Generate a new file, e.g.
/etc/exim4/conf.d/main/40_local_mailq, containing only the
line queue_list_requires_admin = <br>
false</p>

<p style="margin-top: 1em">NOTES <br>
update-exim4.conf changes the file permissions of the output
file to the value of the environment variable CFILEMODE. If
CFILEMODE is neither set in <br>
/etc/exim4/update-exim4.conf.conf nor in the environment it
defaults to 0644. Change this to 0640 if you are keeping
sensitive information (LDAP credentials et. al.) in
there.</p>

<p style="margin-top: 1em">CONFIGURATION VARIABLES <br>
All lists given in configuration variables are
semicolon-separated. In the past, they used to be colon
separated. This was changed to semicolon separation to make
specification <br>
of IPv6 addresses easier. Backwards compatibility is
preserved, so that old configurations using colons as
separators do still work. Colons are deprecated and might
stop working <br>
in a later release. If you need to specify a single IPv6
address in a field that is defined as a list of host names
or IP addresses, please prefix &quot;&lt;;&quot; to
explicitly specify the <br>
list separator as a semicolon. Otherwise, the code cannot
tell an IP address from a colon-separated list of strange
host names.</p>

<p style="margin-top: 1em">Using lookups like
&quot;dsearch;something&quot; in update-exim4.conf.conf has
never been supported and does no longer work! If you need
this, please convert to directly setting the appro&acirc;
<br>
priate macros.</p>

<p style="margin-top: 1em">update-exim4.conf evaluates
these patterns in /etc/exim4/update-exim4.conf.conf:</p>

<p style="margin-top: 1em">CFILEMODE <br>
The octal file mode of the generated file.</p>

<p style="margin-top: 1em">dc_eximconfig_configtype <br>
The main configuration type. Sets macro
DC_eximconfig_configtype. The macro usually contains a
shorthand for one of the choices for the &acirc;General type
of mail configura&acirc; <br>
tion&acirc; debconf question (See README.Debian).</p>

<p style="margin-top: 1em">dc_eximconfig_configtype
&lt;-&gt; debconf configtype mapping: <br>
&acirc;internet&acirc; <br>
internet site; mail is sent and received directly using SMTP
<br>
&acirc;smarthost&acirc; <br>
mail sent by smarthost; received via SMTP or fetchmail <br>
&acirc;satellite&acirc; <br>
mail sent by smarthost; no local mail <br>
&acirc;local&acirc; <br>
local delivery only; not on a network <br>
&acirc;none&acirc; no configuration at this time</p>

<p style="margin-top: 1em">dc_hide_mailname <br>
Boolean option that controls whether the local mailname in
the headers of outgoing mail should be hidden. (Only
effective for &acirc;smarthost&acirc; and
&acirc;satellite&acirc;. Sets macro <br>
HIDE_MAILNAME.</p>

<p style="margin-top: 1em">dc_mailname_in_oh <br>
Internal use only Boolean option that is set by the
maintainer scripts after adding the contents of
/etc/mailname to the dc_other_hostnames list. This is a
transition <br>
helper since it wouldn&rsquo;t otherwise be possible to see
whether that domain name has been removed from
dc_other_hostnames on purpose. This is not used by
update-exim4.conf, <br>
and no macro is set.</p>

<p style="margin-top: 1em">ue4c_keepcomments <br>
Boolean option that controls whether update-exim4.conf
strips the comments from the target configuration file
(default) or leaves them in. This can be overridden by the
<br>
command line options --keepcomments and --removecomments.
The value is not written to an exim macro.</p>

<p style="margin-top: 1em">dc_localdelivery <br>
name of the default transport for local mail delivery.
Defaults to mail_spool if unset, use maildir_home for
delivery to ~/Maildir/. Sets macro LOCAL_DELIVERY.</p>

<p style="margin-top: 1em">dc_local_interfaces <br>
List of IP addresses the Exim daemon should listen on. If
this is left empty, Exim listens on all interfaces. Sets
macro MAIN_LOCAL_INTERFACES only if there is a non-empty
<br>
value.</p>

<p style="margin-top: 1em">dc_minimaldns <br>
Boolean option to activate some option to minimize DNS
lookups, if set to &acirc;true&acirc; a macro DC_minimaldns
is defined. If true, the macro DC_minimaldns is set to 1,
and the <br>
macro MAIN_HARDCODE_PRIMARY_HOSTNAME is set to the
appropriately post-processes output of hostname --fqdn.</p>

<p style="margin-top: 1em">dc_other_hostnames <br>
is used to build the local_domains list, together with
&acirc;localhost&acirc;. This is the list of domains for
which this machine should consider itself the final
destination. The <br>
local_domains list ends up in the macro
MAIN_LOCAL_DOMAINS.</p>

<p style="margin-top: 1em">dc_readhost <br>
For &acirc;smarthost&acirc; and &acirc;satellite&acirc; it
is possible to hide the local mailname in the headers of
outgoing mail and replace it with this value instead, using
rewriting. For <br>
&acirc;satellite&acirc; only, this value is also the host to
send local mail to. Sets macro DCreadhost.</p>

<p style="margin-top: 1em">dc_relay_domains <br>
is a list of domains for which we accept mail from anywhere
on the Internet but which are not delivered locally, e.g.
because this machine serves as secondary MX for these <br>
domains. Sets MAIN_RELAY_TO_DOMAINS.</p>

<p style="margin-top: 1em">dc_relay_nets <br>
A list of machines for which we serve as smarthost. Please
note that 127.0.0.1 and ::1 are always permitted to relay
since /usr/lib/sendmail is available anyway and relay <br>
control doesn&rsquo;t make sense here. Sets macro
MAIN_RELAY_NETS.</p>

<p style="margin-top: 1em">dc_smarthost <br>
List of hosts to which all outgoing mail is passed to and
that takes care of delivering it. Each of the hosts is
tried, in the order specified (See exim specification, <br>
chapter 20.5). All deliveries go out to TCP port 25 unless a
different port is specified after the host name, separated
from the host name by two colons. Colons in IPv6 <br>
addresses need to be doubled. If a port number follows, IP
addresses may be enclosed in brackets, which might be the
only possibility to specify delivery to an IPv6 <br>
address and a different port. Examples: <br>
host.domain.example deliver to host looked up on DNS, tcp/25
<br>
host.domain.example::587 deliver to host looked up on DNS,
tcp/587 <br>
192.168.2.4 deliver to IPv4 host, tcp/25 <br>
192.168.2.4::587 deliver to IPv4 host, tcp/587 <br>
[192.168.2.4]::587 deliver to IPv4 host, tcp/587 <br>
2001::0db8::f::4::::2 deliver to IPv6 host, tcp/25 <br>
[2001::0db8::f::4::::2]::587 deliver to IPv6 host, tcp/587
<br>
This is used as value of the DCsmarthost macro.</p>

<p style="margin-top: 1em">dc_use_split_config <br>
Boolean option that controls whether update-exim4.conf uses
/etc/exim4/exim4.conf.template (&acirc;false&acirc;) or the
multiple files below /etc/exim4/conf.d (&acirc;true&acirc;)
as input. This <br>
does not set any macros.</p>

<p style="margin-top: 1em">The macro MAIN_PACKAGE_VERSION
is set to Debian&rsquo;s Version number of <br>
the package being installed for convenient inclusion in the
configuration.</p>

<p style="margin-top: 1em">RECOMMENDED USAGE <br>
If you are running exim as daemon (as it is in the default
setup of the Debian packages) you should not invoke
update-exim4.conf directly when exim is running. For SMTP
receiving <br>
or queue running, exim forks, and the new processes would
use the new configuration file, while the original main exim
daemon would still use the old configuration file. You <br>
should use invoke-rc.d exim4 restart instead.</p>

<p style="margin-top: 1em">BUGS <br>
This manual page needs a major re-work. If somebody knows
better groff than us and has more experience in writing
manual pages, any patches would be greatly appreciated.</p>

<p style="margin-top: 1em">FILES <br>
/var/lib/exim4/config.autogenerated <br>
Exim&rsquo;s main configuration file</p>

<p style="margin-top: 1em">/etc/exim4/exim4.conf <br>
Optional manually managed Exim main configuration file.
Takes precedence over debconf managed one if it exists.</p>


<p style="margin-top: 1em">/etc/exim4/update-exim4.conf.conf
<br>
Configuration file being written by exim4-config maintainer
scripts, which may be hand-edited, and is read as input by
update-exim4.conf.</p>

<p style="margin-top: 1em">SEE ALSO <br>
exim(8), exim4-config_files(5), /usr/share/doc/exim4-base/
and for general notes and details about interaction with
debconf /usr/share/doc/exim4-base/README.Debian.gz</p>

<p style="margin-top: 1em">AUTHOR <br>
Andreas Metzler &lt;ametzler at debian.org&gt; <br>
Marc Haber &lt;mh+debian-packages@zugschlus.de&gt;</p>

<p style="margin-top: 1em">EXIM4 Jun 25, 2005
UPDATE-EXIM4.CONF(8)</p>
<hr>
</body>
</html>
