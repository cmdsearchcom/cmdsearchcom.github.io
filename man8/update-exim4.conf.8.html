<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>UPDATE-EXIM4.CONF(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">UPDATE-EXIM4.CONF(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">UPDATE-EXIM4.CONF(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
update-exim4.conf - Generate exim4 configuration files.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>update-exim4.conf [-v|--verbose] [-h|--help] [--keepcomments]
  [--removecomments] [-o|--output file]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--check</i></dt>
  <dd class="It-tag">Generate temporary configuration file, check its validity
      and exit with either success (exitcode 0) or an error (exitcode 1). On
      success the temporary file is deleted, otherwise the file is left for
      further debugging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-d|--confdir directory</i></dt>
  <dd class="It-tag">Read input from directory instead of /etc/exim4.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-h|--help</i></dt>
  <dd class="It-tag">Show short help message and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--keepcomments</i></dt>
  <dd class="It-tag">Do not remove comment lines from the output file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-o|--output file</i></dt>
  <dd class="It-tag">Write output to file instead of
      /var/lib/exim4/config.autogenerated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--removecomments</i></dt>
  <dd class="It-tag">Remove comment lines from the output file. [Default]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-v|--verbose</i></dt>
  <dd class="It-tag">Enable verbose mode
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The script <b>update-exim4.conf</b> generates the main configuration files
  <i>/var/lib/exim4/config.autogenerated</i> for <b>Exim v4</b> by merging the
  data in the template file <i>/etc/exim4/exim4.conf.template</i> or the ones in
  the <i>/etc/exim4/conf.d</i> directory tree respectively and
  <i>/etc/exim4/update-exim4.conf.conf</i> to the output file
  <i>/var/lib/exim4/config.autogenerated.</i>
<div class="Pp"></div>
If dc_use_split_config in /etc/exim4/update-exim4.conf.conf specifies a split
  configuration, <b>update-exim4.conf</b> processes the /etc/exim4/conf.d
  subdirectories in the order main, acl, router, transport, retry, rewrite and
  auth. Within each directory it takes files in lexical sort order by file name.
  It concatenates all these files and makes the debconf replacement described
  below.
<div style="height: 1.00em;">&#x00A0;</div>
If you are not using split configuration <b>update-exim4.conf</b> concatenates
  /etc/exim4/exim4.conf.localmacros (if this file exists) and
  /etc/exim4/exim4.conf.template (in this order) and makes the debconf
  replacement described below.
<div style="height: 1.00em;">&#x00A0;</div>
In either case, before outputting the result to
  /var/lib/exim4/config.autogenerated, <b>update-exim4.conf</b> generates a
  number of exim configuration macros from the contents of dc_something from
  /etc/exim4/update-exim4.conf.conf and inserts them into the configuration
  right after the definition of the exim configuration macro UPEX4CmacrosUPEX4C
  (which is only used as placeholder for this case). The macro definitions are
  bracketed with .ifdef clauses to allow the local admin to override the values
  with earlier definitions. <b>update-exim4.conf</b> makes no other changes to
  the configuration. This makes it very simple to make small changes to the
  configuration and still have the benefits of debconf.
<div style="height: 1.00em;">&#x00A0;</div>
On the other hand if you don't want to manage exim4.conf with debconf install
  your own handcrafted version as /etc/exim4/exim4.conf. Exim will use this file
  if it exists and ignore the autogenerated one. Additionally you might want to
  set <i>dc_eximconfig_configtype=none</i> in /etc/exim4/update-exim4.conf.conf
  to stop debconf from asking you questions about exim4.
<div style="height: 1.00em;">&#x00A0;</div>
<b>update-exim4.conf</b> exits silently and does nothing if
  /etc/exim4/exim4.conf exists and -o was not used to direct the output to a
  different file than /var/lib/exim4/config.autogenerated.
<div style="height: 1.00em;">&#x00A0;</div>
<b>update-exim4.conf</b> will only use files in the conf.d directory that have a
  filename which consists only of letters, numbers, underscores and hyphens
  ([:alnum:]_-), similar to <b>run-parts(8).</b> Additionally,
  <b>update-exim4.conf</b> will use /etc/exim4/conf.d/foo/bar.rul instead of
  /etc/exim4/conf.d/foo/bar if the .rul file exists. This is meant to be helpful
  for easy interaction with packages extending Exim.
<div style="height: 1.00em;">&#x00A0;</div>
If the new configuration will be written to /var/lib/exim4/config.autogenerated,
  <b>update-exim4.conf</b> will check the validity of the freshly generated
  configuration. If the new file is detected as invalid, update-exim4.conf
  leaves the old /var/lib/exim4/config.autogenerated untouched and exits with an
  error.
<div style="height: 1.00em;">&#x00A0;</div>
However, there are still possible invalidities that can only be detected at run
  time. This most notably applies to errors in expressions that are expanded at
  run time.
<div style="height: 1.00em;">&#x00A0;</div>
If the new configuration will be written to some other file, no validity
  checking occurs and that file will always be overwritten.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
You want to be able to check exim's queue as normal user: Generate a new file,
  e.g. /etc/exim4/conf.d/main/40_local_mailq, containing only the line
  <i>queue_list_requires_admin = false</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<b>update-exim4.conf</b> changes the file permissions of the output file to the
  value of the environment variable CFILEMODE. If CFILEMODE is neither set in
  /etc/exim4/update-exim4.conf.conf nor in the environment it defaults to 0644.
  Change this to 0640 if you are keeping sensitive information (LDAP credentials
  et. al.) in there.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="CONFIGURATION_VARIABLES"><a class="selflink" href="#CONFIGURATION_VARIABLES">CONFIGURATION
  VARIABLES</a></h1>
All lists given in configuration variables are semicolon-separated. In the past,
  they used to be colon separated. This was changed to semicolon separation to
  make specification of IPv6 addresses easier. Backwards compatibility is
  preserved, so that old configurations using colons as separators do still
  work. Colons are deprecated and might stop working in a later release. If you
  need to specify a single IPv6 address in a field that is defined as a list of
  host names or IP addresses, please prefix &quot;&lt;;&quot; to explicitly
  specify the list separator as a semicolon. Otherwise, the code cannot tell an
  IP address from a colon-separated list of strange host names.
<div style="height: 1.00em;">&#x00A0;</div>
Using lookups like &quot;dsearch;something&quot; in update-exim4.conf.conf has
  never been supported and does no longer work! If you need this, please convert
  to directly setting the appropriate macros.
<div style="height: 1.00em;">&#x00A0;</div>
<b>update-exim4.conf</b> evaluates these patterns in
  <b>/etc/exim4/update-exim4.conf.conf:</b>
<dl class="Bl-tag">
  <dt class="It-tag"><i>CFILEMODE</i></dt>
  <dd class="It-tag">The octal file mode of the generated file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_eximconfig_configtype</i></dt>
  <dd class="It-tag">The main configuration type. Sets macro
      DC_eximconfig_configtype. The macro usually contains a shorthand for one
      of the choices for the &#x201C;General type of mail configuration&#x201D;
      debconf question (See README.Debian).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;"><b>dc_eximconfig_configtype &lt;-&gt; debconf
  configtype mapping:</b>
<dl class="Bl-tag">
  <dt class="It-tag">&#x201C;internet&#x201D;</dt>
  <dd class="It-tag">internet site; mail is sent and received directly using
      SMTP</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x201C;smarthost&#x201D;</dt>
  <dd class="It-tag">mail sent by smarthost; received via SMTP or fetchmail</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x201C;satellite&#x201D;</dt>
  <dd class="It-tag">mail sent by smarthost; no local mail</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x201C;local&#x201D;</dt>
  <dd class="It-tag">local delivery only; not on a network</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x201C;none&#x201D;</dt>
  <dd class="It-tag">no configuration at this time</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_hide_mailname</i></dt>
  <dd class="It-tag">Boolean option that controls whether the local mailname in
      the headers of outgoing mail should be hidden. (Only effective for
      &#x201C;smarthost&#x201D; and &#x201C;satellite&#x201D;. Sets macro
      HIDE_MAILNAME.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_mailname_in_oh</i></dt>
  <dd class="It-tag">Internal use only Boolean option that is set by the
      maintainer scripts after adding the contents of /etc/mailname to the
      dc_other_hostnames list. This is a transition helper since it wouldn't
      otherwise be possible to see whether that domain name has been removed
      from dc_other_hostnames on purpose. This is not used by update-exim4.conf,
      and no macro is set.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>ue4c_keepcomments</i></dt>
  <dd class="It-tag">Boolean option that controls whether
      <b>update-exim4.conf</b> strips the comments from the target configuration
      file (default) or leaves them in. This can be overridden by the command
      line options --keepcomments and --removecomments. The value is not written
      to an exim macro.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_localdelivery</i></dt>
  <dd class="It-tag">name of the default transport for local mail delivery.
      Defaults to mail_spool if unset, use maildir_home for delivery to
      ~/Maildir/. Sets macro LOCAL_DELIVERY.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_local_interfaces</i></dt>
  <dd class="It-tag">List of IP addresses the Exim daemon should listen on. If
      this is left empty, Exim listens on all interfaces. Sets macro
      MAIN_LOCAL_INTERFACES only if there is a non-empty value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_minimaldns</i></dt>
  <dd class="It-tag">Boolean option to activate some option to minimize DNS
      lookups, if set to &#x201C;true&#x201D; a macro DC_minimaldns is defined.
      If true, the macro DC_minimaldns is set to 1, and the macro
      MAIN_HARDCODE_PRIMARY_HOSTNAME is set to the appropriately post-processes
      output of hostname --fqdn.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_other_hostnames</i></dt>
  <dd class="It-tag">is used to build the local_domains list, together with
      &#x201C;localhost&#x201D;. This is the list of domains for which this
      machine should consider itself the final destination. The local_domains
      list ends up in the macro MAIN_LOCAL_DOMAINS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_readhost</i></dt>
  <dd class="It-tag">For &#x201C;smarthost&#x201D; and &#x201C;satellite&#x201D;
      it is possible to hide the local mailname in the headers of outgoing mail
      and replace it with this value instead, using rewriting. For
      &#x201C;satellite&#x201D; only, this value is also the host to send local
      mail to. Sets macro DCreadhost.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_relay_domains</i></dt>
  <dd class="It-tag">is a list of domains for which we accept mail from anywhere
      on the Internet but which are not delivered locally, e.g. because this
      machine serves as secondary MX for these domains. Sets
      MAIN_RELAY_TO_DOMAINS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_relay_nets</i></dt>
  <dd class="It-tag">A list of machines for which we serve as smarthost. Please
      note that 127.0.0.1 and ::1 are always permitted to relay since
      /usr/lib/sendmail is available anyway and relay control doesn't make sense
      here. Sets macro MAIN_RELAY_NETS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_smarthost</i></dt>
  <dd class="It-tag">List of hosts to which all outgoing mail is passed to and
      that takes care of delivering it. Each of the hosts is tried, in the order
      specified (See exim specification, chapter 20.5). All deliveries go out to
      TCP port 25 unless a different port is specified after the host name,
      separated from the host name by two colons. Colons in IPv6 addresses need
      to be doubled. If a port number follows, IP addresses may be enclosed in
      brackets, which might be the only possibility to specify delivery to an
      IPv6 address and a different port. Examples:
    <div>&#x00A0;</div>
    <b>host.domain.example</b> deliver to host looked up on DNS, tcp/25
    <div>&#x00A0;</div>
    <b>host.domain.example::587</b> deliver to host looked up on DNS, tcp/587
    <div>&#x00A0;</div>
    <b>192.168.2.4</b> deliver to IPv4 host, tcp/25
    <div>&#x00A0;</div>
    <b>192.168.2.4::587</b> deliver to IPv4 host, tcp/587
    <div>&#x00A0;</div>
    <b>[192.168.2.4]::587</b> deliver to IPv4 host, tcp/587
    <div>&#x00A0;</div>
    <b>2001::0db8::f::4::::2</b> deliver to IPv6 host, tcp/25
    <div>&#x00A0;</div>
    <b>[2001::0db8::f::4::::2]::587</b> deliver to IPv6 host, tcp/587
    <div>&#x00A0;</div>
    This is used as value of the DCsmarthost macro.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>dc_use_split_config</i></dt>
  <dd class="It-tag">Boolean option that controls whether
      <b>update-exim4.conf</b> uses /etc/exim4/exim4.conf.template
      (&#x201C;false&#x201D;) or the multiple files below /etc/exim4/conf.d
      (&#x201C;true&#x201D;) as input. This does not set any macros.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>The macro MAIN_PACKAGE_VERSION is set to Debian's
    Version number of</i></dt>
  <dd class="It-tag">the package being installed for convenient inclusion in the
      configuration.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="RECOMMENDED_USAGE"><a class="selflink" href="#RECOMMENDED_USAGE">RECOMMENDED
  USAGE</a></h1>
If you are running exim as daemon (as it is in the default setup of the Debian
  packages) you should not invoke <b>update-exim4.conf</b> directly when exim is
  running. For SMTP receiving or queue running, exim forks, and the new
  processes would use the new configuration file, while the original main exim
  daemon would still use the old configuration file. You should use
  <i>invoke-rc.d exim4 restart</i> instead.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
This manual page needs a major re-work. If somebody knows better groff than us
  and has more experience in writing manual pages, any patches would be greatly
  appreciated.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/var/lib/exim4/config.autogenerated</b></dt>
  <dd class="It-tag">Exim's main configuration file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/etc/exim4/exim4.conf</b></dt>
  <dd class="It-tag">Optional manually managed Exim main configuration file.
      Takes precedence over debconf managed one if it exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/etc/exim4/update-exim4.conf.conf</b></dt>
  <dd class="It-tag">Configuration file being written by exim4-config maintainer
      scripts, which may be hand-edited, and is read as input by
      update-exim4.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>exim</b>(8), <b>exim4-config_files(5),</b> /usr/share/doc/exim4-base/ and for
  general notes and details about interaction with debconf
  /usr/share/doc/exim4-base/README.Debian.gz
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Andreas Metzler &lt;ametzler at debian.org&gt;
<div>&#x00A0;</div>
Marc Haber &lt;mh+debian-packages@zugschlus.de&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 25, 2005</td>
    <td class="foot-os">EXIM4</td>
  </tr>
</table>
</body>
</html>
