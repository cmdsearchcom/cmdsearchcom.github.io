<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:55 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>zpool(1M) System Administration Commands zpool(1M)</p>

<p style="margin-top: 1em">NAME <br>
zpool - configures ZFS storage pools</p>

<p style="margin-top: 1em">SYNOPSIS <br>
zpool [-?]</p>

<p style="margin-top: 1em">zpool add [-fn] [-o
property=value] pool vdev ...</p>

<p style="margin-top: 1em">zpool attach [-f] [-o
property=value] pool device new_device</p>

<p style="margin-top: 1em">zpool clear [-F [-n]] pool
[device]</p>

<p style="margin-top: 1em">zpool create [-fn] [-o
property=value] ... [-O file-system-property=value] <br>
... [-m mountpoint] [-R root] pool vdev ...</p>

<p style="margin-top: 1em">zpool destroy [-f] pool</p>

<p style="margin-top: 1em">zpool detach pool device</p>

<p style="margin-top: 1em">zpool export [-f] pool ...</p>

<p style="margin-top: 1em">zpool get &quot;all&quot; |
property[,...] pool ...</p>

<p style="margin-top: 1em">zpool history [-il] [pool]
...</p>

<p style="margin-top: 1em">zpool import [-d dir] [-D]</p>

<p style="margin-top: 1em">zpool import [-o mntopts] [-o
property=value] ... [-d dir | -c cachefile] <br>
[-D] [-f] [-R root] [-F [-n]] -a</p>

<p style="margin-top: 1em">zpool import [-o mntopts] [-o
property=value] ... [-d dir | -c cachefile] <br>
[-D] [-f] [-R root] [-F [-n]] pool |id [newpool]</p>

<p style="margin-top: 1em">zpool iostat [-T u | d ] [-v]
[pool] ... [interval[count]]</p>

<p style="margin-top: 1em">zpool list [-H] [-o
property[,...]] [pool] ...</p>

<p style="margin-top: 1em">zpool offline [-t] pool device
...</p>

<p style="margin-top: 1em">zpool online pool device ...</p>

<p style="margin-top: 1em">zpool remove pool device ...</p>

<p style="margin-top: 1em">zpool replace [-f] pool device
[new_device]</p>

<p style="margin-top: 1em">zpool scrub [-s] pool ...</p>

<p style="margin-top: 1em">zpool set property=value
pool</p>

<p style="margin-top: 1em">zpool split [-R altroot] [-n]
[-o mntopts] [-o property=value] pool <br>
newpool [device ...]</p>

<p style="margin-top: 1em">zpool status [-xv] [pool]
...</p>

<p style="margin-top: 1em">zpool upgrade</p>

<p style="margin-top: 1em">zpool upgrade -v</p>

<p style="margin-top: 1em">zpool upgrade [-V version] -a |
pool ...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The zpool command configures ZFS storage pools. A storage
pool is a collection of devices that provides physical
storage and data replication for ZFS datasets.</p>

<p style="margin-top: 1em">All datasets within a storage
pool share the same space. See zfs(1M) for information on
managing datasets.</p>

<p style="margin-top: 1em">Virtual Devices (vdevs) <br>
A &quot;virtual device&quot; describes a single device or a
collection of devices organized according to certain
performance and fault characteristics. The following virtual
devices are <br>
supported:</p>

<p style="margin-top: 1em">disk</p>

<p style="margin-top: 1em">A block device, typically
located under /dev/dsk. ZFS can use individual slices or
partitions, though the recommended mode of operation is to
use whole disks. A disk can be <br>
specified by a full path, or it can be a shorthand name (the
relative portion of the path under &quot;/dev/dsk&quot;). A
whole disk can be specified by omitting the slice or
partition <br>
designation. For example, &quot;c0t0d0&quot; is equivalent
to &quot;/dev/dsk/c0t0d0s2&quot;. When given a whole disk,
ZFS automatically labels the disk, if necessary.</p>

<p style="margin-top: 1em">file</p>

<p style="margin-top: 1em">A regular file. The use of files
as a backing store is strongly discouraged. It is designed
primarily for experimental purposes, as the fault tolerance
of a file is only as <br>
good as the file system of which it is a part. A file must
be specified by a full path.</p>

<p style="margin-top: 1em">mirror</p>

<p style="margin-top: 1em">A mirror of two or more devices.
Data is replicated in an identical fashion across all
components of a mirror. A mirror with N disks of size X can
hold X bytes and can with&acirc; <br>
stand (N-1) devices failing before data integrity is
compromised.</p>

<p style="margin-top: 1em">raidz <br>
raidz1 <br>
raidz2 <br>
raidz3</p>

<p style="margin-top: 1em">A variation on RAID-5 that
allows for better distribution of parity and eliminates the
&quot;RAID-5 write hole&quot; (in which data and parity
become inconsistent after a power loss). <br>
Data and parity is striped across all disks within a raidz
group.</p>

<p style="margin-top: 1em">A raidz group can have single-,
double- , or triple parity, meaning that the raidz group can
sustain one, two, or three failures, respectively, without
losing any data. The <br>
raidz1 vdev type specifies a single-parity raidz group; the
raidz2 vdev type specifies a double-parity raidz group; and
the raidz3 vdev type specifies a triple-parity raidz <br>
group. The raidz vdev type is an alias for raidz1.</p>

<p style="margin-top: 1em">A raidz group with N disks of
size X with P parity disks can hold approximately (N-P)*X
bytes and can withstand P device(s) failing before data
integrity is compromised. The <br>
minimum number of devices in a raidz group is one more than
the number of parity disks. The recommended number is
between 3 and 9 to help increase performance.</p>

<p style="margin-top: 1em">spare</p>

<p style="margin-top: 1em">A special pseudo-vdev which
keeps track of available hot spares for a pool. For more
information, see the &quot;Hot Spares&quot; section.</p>

<p style="margin-top: 1em">log</p>

<p style="margin-top: 1em">A separate-intent log device. If
more than one log device is specified, then writes are
load-balanced between devices. Log devices can be mirrored.
However, raidz vdev types <br>
are not supported for the intent log. For more information,
see the &quot;Intent Log&quot; section.</p>

<p style="margin-top: 1em">cache</p>

<p style="margin-top: 1em">A device used to cache storage
pool data. A cache device cannot be configured as a mirror
or raidz group. For more information, see the &quot;Cache
Devices&quot; section.</p>

<p style="margin-top: 1em">Virtual devices cannot be
nested, so a mirror or raidz virtual device can only contain
files or disks. Mirrors of mirrors (or other combinations)
are not allowed.</p>

<p style="margin-top: 1em">A pool can have any number of
virtual devices at the top of the configuration (known as
&quot;root vdevs&quot;). Data is dynamically distributed
across all top-level devices to balance <br>
data among devices. As new virtual devices are added, ZFS
automatically places data on the newly available
devices.</p>

<p style="margin-top: 1em">Virtual devices are specified
one at a time on the command line, separated by whitespace.
The keywords &quot;mirror&quot; and &quot;raidz&quot; are
used to distinguish where a group ends and another <br>
begins. For example, the following creates two root vdevs,
each a mirror of two disks:</p>

<p style="margin-top: 1em"># zpool create mypool mirror
c0t0d0 c0t1d0 mirror c1t0d0 c1t1d0</p>

<p style="margin-top: 1em">Device Failure and Recovery <br>
ZFS supports a rich set of mechanisms for handling device
failure and data corruption. All metadata and data is
checksummed, and ZFS automatically repairs bad data from a
good <br>
copy when corruption is detected.</p>

<p style="margin-top: 1em">In order to take advantage of
these features, a pool must make use of some form of
redundancy, using either mirrored or raidz groups. While ZFS
supports running in a non-redun&acirc; <br>
dant configuration, where each root vdev is simply a disk or
file, this is strongly discouraged. A single case of bit
corruption can render some or all of your data
unavailable.</p>

<p style="margin-top: 1em">A pool&rsquo;s health status is
described by one of three states: online, degraded, or
faulted. An online pool has all devices operating normally.
A degraded pool is one in which one <br>
or more devices have failed, but the data is still available
due to a redundant configuration. A faulted pool has
corrupted metadata, or one or more faulted devices, and
insuffi&acirc; <br>
cient replicas to continue functioning.</p>

<p style="margin-top: 1em">The health of the top-level
vdev, such as mirror or raidz device, is potentially
impacted by the state of its associated vdevs, or component
devices. A top-level vdev or compo&acirc; <br>
nent device is in one of the following states:</p>

<p style="margin-top: 1em">DEGRADED</p>

<p style="margin-top: 1em">One or more top-level vdevs is
in the degraded state because one or more component devices
are offline. Sufficient replicas exist to continue
functioning.</p>

<p style="margin-top: 1em">One or more component devices is
in the degraded or faulted state, but sufficient replicas
exist to continue functioning. The underlying conditions are
as follows:</p>

<p style="margin-top: 1em">o The number of checksum errors
exceeds acceptable levels and the device is degraded as an
indication that something may be wrong. ZFS continues to use
the device as <br>
necessary.</p>

<p style="margin-top: 1em">o The number of I/O errors
exceeds acceptable levels. The device could not be marked as
faulted because there are insufficient replicas to continue
functioning.</p>

<p style="margin-top: 1em">FAULTED</p>

<p style="margin-top: 1em">One or more top-level vdevs is
in the faulted state because one or more component devices
are offline. Insufficient replicas exist to continue
functioning.</p>

<p style="margin-top: 1em">One or more component devices is
in the faulted state, and insufficient replicas exist to
continue functioning. The underlying conditions are as
follows:</p>

<p style="margin-top: 1em">o The device could be opened,
but the contents did not match expected values.</p>

<p style="margin-top: 1em">o The number of I/O errors
exceeds acceptable levels and the device is faulted to
prevent further use of the device.</p>

<p style="margin-top: 1em">OFFLINE</p>

<p style="margin-top: 1em">The device was explicitly taken
offline by the &quot;zpool offline&quot; command.</p>

<p style="margin-top: 1em">ONLINE</p>

<p style="margin-top: 1em">The device is online and
functioning.</p>

<p style="margin-top: 1em">REMOVED</p>

<p style="margin-top: 1em">The device was physically
removed while the system was running. Device removal
detection is hardware-dependent and may not be supported on
all platforms.</p>

<p style="margin-top: 1em">UNAVAIL</p>

<p style="margin-top: 1em">The device could not be opened.
If a pool is imported when a device was unavailable, then
the device will be identified by a unique identifier instead
of its path since the <br>
path was never correct in the first place.</p>

<p style="margin-top: 1em">If a device is removed and later
re-attached to the system, ZFS attempts to put the device
online automatically. Device attach detection is
hardware-dependent and might not be <br>
supported on all platforms.</p>

<p style="margin-top: 1em">Hot Spares <br>
ZFS allows devices to be associated with pools as &quot;hot
spares&quot;. These devices are not actively used in the
pool, but when an active device fails, it is automatically
replaced by <br>
a hot spare. To create a pool with hot spares, specify a
&quot;spare&quot; vdev with any number of devices. For
example,</p>

<p style="margin-top: 1em"># zpool create pool mirror c0d0
c1d0 spare c2d0 c3d0</p>

<p style="margin-top: 1em">Spares can be shared across
multiple pools, and can be added with the &quot;zpool
add&quot; command and removed with the &quot;zpool
remove&quot; command. Once a spare replacement is initiated,
a <br>
new &quot;spare&quot; vdev is created within the
configuration that will remain there until the original
device is replaced. At this point, the hot spare becomes
available again if another <br>
device fails.</p>

<p style="margin-top: 1em">If a pool has a shared spare
that is currently being used, the pool can not be exported
since other pools may use this shared spare, which may lead
to potential data corruption.</p>

<p style="margin-top: 1em">An in-progress spare replacement
can be cancelled by detaching the hot spare. If the original
faulted device is detached, then the hot spare assumes its
place in the configura&acirc; <br>
tion, and is removed from the spare list of all active
pools.</p>

<p style="margin-top: 1em">Spares cannot replace log
devices.</p>

<p style="margin-top: 1em">Intent Log <br>
The ZFS Intent Log (ZIL) satisfies POSIX requirements for
synchronous transactions. For instance, databases often
require their transactions to be on stable storage devices
when <br>
returning from a system call. NFS and other applications can
also use fsync() to ensure data stability. By default, the
intent log is allocated from blocks within the main pool.
<br>
However, it might be possible to get better performance
using separate intent log devices such as NVRAM or a
dedicated disk. For example:</p>

<p style="margin-top: 1em"># zpool create pool c0d0 c1d0
log c2d0</p>

<p style="margin-top: 1em">Multiple log devices can also be
specified, and they can be mirrored. See the EXAMPLES
section for an example of mirroring multiple log
devices.</p>

<p style="margin-top: 1em">Log devices can be added,
replaced, attached, detached, and imported and exported as
part of the larger pool. Mirrored log devices can be removed
by specifying the top-level mir&acirc; <br>
ror for the log.</p>

<p style="margin-top: 1em">Cache Devices <br>
Devices can be added to a storage pool as &quot;cache
devices.&quot; These devices provide an additional layer of
caching between main memory and disk. For read-heavy
workloads, where the <br>
working set size is much larger than what can be cached in
main memory, using cache devices allow much more of this
working set to be served from low latency media. Using cache
<br>
devices provides the greatest performance improvement for
random read-workloads of mostly static content.</p>

<p style="margin-top: 1em">To create a pool with cache
devices, specify a &quot;cache&quot; vdev with any number of
devices. For example:</p>

<p style="margin-top: 1em"># zpool create pool c0d0 c1d0
cache c2d0 c3d0</p>

<p style="margin-top: 1em">Cache devices cannot be mirrored
or part of a raidz configuration. If a read error is
encountered on a cache device, that read I/O is reissued to
the original storage pool <br>
device, which might be part of a mirrored or raidz
configuration.</p>

<p style="margin-top: 1em">The content of the cache devices
is considered volatile, as is the case with other system
caches.</p>

<p style="margin-top: 1em">Processes <br>
Each imported pool has an associated process, named
zpool-poolname. The threads in this process are the
pool&rsquo;s I/O processing threads, which handle the
compression, checksumming, <br>
and other tasks for all I/O associated with the pool. This
process exists to provides visibility into the CPU
utilization of the system&rsquo;s storage pools. The
existence of this <br>
process is an unstable interface.</p>

<p style="margin-top: 1em">Properties <br>
Each pool has several properties associated with it. Some
properties are read-only statistics while others are
configurable and change the behavior of the pool. The
following are <br>
read-only properties:</p>

<p style="margin-top: 1em">alloc</p>

<p style="margin-top: 1em">Amount of storage space within
the pool that has been physically allocated.</p>

<p style="margin-top: 1em">capacity</p>

<p style="margin-top: 1em">Percentage of pool space used.
This property can also be referred to by its shortened
column name, &quot;cap&quot;.</p>

<p style="margin-top: 1em">dedupratio</p>

<p style="margin-top: 1em">The deduplication ratio
specified for a pool, expressed as a multiplier.
Deduplication can be turned on by entering the command:</p>

<p style="margin-top: 1em"># zfs set dedup=on dataset</p>

<p style="margin-top: 1em">The default value is off.</p>

<p style="margin-top: 1em">dedupratio is expressed as a
single decimal number. For example, a dedupratio value of
1.76 indicates that 1.76 units of data were stored but only
1 unit of disk space was <br>
actually consumed.</p>

<p style="margin-top: 1em">free</p>

<p style="margin-top: 1em">Number of blocks within the pool
that are not allocated.</p>

<p style="margin-top: 1em">guid</p>

<p style="margin-top: 1em">A unique identifier for the
pool.</p>

<p style="margin-top: 1em">health</p>

<p style="margin-top: 1em">The current health of the pool.
Health can be &quot;ONLINE&quot;, &quot;DEGRADED&quot;,
&quot;FAULTED&quot;, &quot; OFFLINE&quot;,
&quot;REMOVED&quot;, or &quot;UNAVAIL&quot;.</p>

<p style="margin-top: 1em">size</p>

<p style="margin-top: 1em">Total size of the storage
pool.</p>

<p style="margin-top: 1em">These space usage properties
report actual physical space available to the storage pool.
The physical space can be different from the total amount of
space that any contained <br>
datasets can actually use. The amount of space used in a
raidz configuration depends on the characteristics of the
data being written. In addition, ZFS reserves some space for
<br>
internal accounting that the zfs(1M) command takes into
account, but the zpool command does not. For non-full pools
of a reasonable size, these effects should be invisible. For
<br>
small pools, or pools that are close to being completely
full, these discrepancies may become more noticeable. The
following property can be set at creation time:</p>

<p style="margin-top: 1em">ashift</p>

<p style="margin-top: 1em">Pool sector size exponent, to
the power of 2 (internally referred to as
&quot;ashift&quot;). I/O operations will be aligned to the
specified size boundaries. Additionally, the minimum <br>
(disk) write size will be set to the specified size, so this
represents a space vs. performance trade-off. The typical
case for setting this property is when performance is <br>
important and the underlying disks use 4KiB sectors but
report 512B sectors to the OS (for compatibility reasons);
in that case, set ashift=12 (which is 1&lt;&lt;12 = 4096).
Since <br>
most large disks have had 4K sectors since 2011, ZFS
defaults to ashift=12 for all disks larger than 512 GB.</p>

<p style="margin-top: 1em">For optimal performance, the
pool sector size should be greater than or equal to the
sector size of the underlying disks. Since the property
cannot be changed after pool cre&acirc; <br>
ation, if in a given pool, you ever want to use drives that
report 4KiB sectors, you must set ashift=12 at pool creation
time.</p>

<p style="margin-top: 1em">The following property can be
set at creation time and import time:</p>

<p style="margin-top: 1em">altroot</p>

<p style="margin-top: 1em">Alternate root directory. If
set, this directory is prepended to any mount points within
the pool. This can be used when examining an unknown pool
where the mount points can&acirc; <br>
not be trusted, or in an alternate boot environment, where
the typical paths are not valid. altroot is not a persistent
property. It is valid only while the system is up. <br>
Setting altroot defaults to using cachefile=none, though
this may be overridden using an explicit setting.</p>

<p style="margin-top: 1em">The following properties can be
set at creation time and import time, and later changed with
the zpool set command:</p>

<p style="margin-top: 1em">autoexpand=on | off</p>

<p style="margin-top: 1em">Controls automatic pool
expansion when the underlying LUN is grown. If set to on,
the pool will be resized according to the size of the
expanded device. If the device is part <br>
of a mirror or raidz then all devices within that
mirror/raidz group must be expanded before the new space is
made available to the pool. The default behavior is off.
This <br>
property can also be referred to by its shortened column
name, expand.</p>

<p style="margin-top: 1em">autoreplace=on | off</p>

<p style="margin-top: 1em">Controls automatic device
replacement. If set to &quot;off&quot;, device replacement
must be initiated by the administrator by using the
&quot;zpool replace&quot; command. If set to &quot;on&quot;,
any <br>
new device, found in the same physical location as a device
that previously belonged to the pool, is automatically
formatted and replaced. The default behavior is
&quot;off&quot;. This <br>
property can also be referred to by its shortened column
name, &quot;replace&quot;.</p>

<p style="margin-top: 1em">bootfs=pool/dataset</p>

<p style="margin-top: 1em">Identifies the default bootable
dataset for the root pool. This property is expected to be
set mainly by the installation and upgrade programs.</p>

<p style="margin-top: 1em">cachefile=path | none</p>

<p style="margin-top: 1em">Controls the location of where
the pool configuration is cached. Discovering all pools on
system startup requires a cached copy of the configuration
data that is stored on <br>
the root file system. All pools in this cache are
automatically imported when the system boots. Some
environments, such as install and clustering, need to cache
this informa&acirc; <br>
tion in a different location so that pools are not
automatically imported. Setting this property caches the
pool configuration in a different location that can later be
<br>
imported with &quot;zpool import -c&quot;. Setting it to the
special value &quot;none&quot; creates a temporary pool that
is never cached, and the special value &rsquo;&rsquo; (empty
string) uses the <br>
default location.</p>

<p style="margin-top: 1em">Multiple pools can share the
same cache file. Because the kernel destroys and recreates
this file when pools are added and removed, care should be
taken when attempting to <br>
access this file. When the last pool using a cachefile is
exported or destroyed, the file is removed.</p>

<p style="margin-top: 1em">delegation=on | off</p>

<p style="margin-top: 1em">Controls whether a
non-privileged user is granted access based on the dataset
permissions defined on the dataset. See zfs(1M) for more
information on ZFS delegated adminis&acirc; <br>
tration.</p>

<p style="margin-top: 1em">failmode=wait | continue |
panic</p>

<p style="margin-top: 1em">Controls the system behavior in
the event of catastrophic pool failure. This condition is
typically a result of a loss of connectivity to the
underlying storage device(s) or <br>
a failure of all devices within the pool. The behavior of
such an event is determined as follows:</p>

<p style="margin-top: 1em">wait</p>

<p style="margin-top: 1em">Blocks all I/O access to the
pool until the device connectivity is recovered and the
errors are cleared. A pool remains in the wait state until
the device issue is <br>
resolved. This is the default behavior.</p>

<p style="margin-top: 1em">continue</p>

<p style="margin-top: 1em">Returns EIO to any new write I/O
requests but allows reads to any of the remaining healthy
devices. Any write requests that have yet to be committed to
disk would be <br>
blocked.</p>

<p style="margin-top: 1em">panic</p>

<p style="margin-top: 1em">Prints out a message to the
console and generates a system crash dump.</p>

<p style="margin-top: 1em">listsnaps=on | off</p>

<p style="margin-top: 1em">Controls whether information
about snapshots associated with this pool is output when
&quot;zfs list&quot; is run without the -t option. The
default value is &quot;off&quot;.</p>

<p style="margin-top: 1em">version=version</p>

<p style="margin-top: 1em">The current on-disk version of
the pool. This can be increased, but never decreased. The
preferred method of updating pools is with the &quot;zpool
upgrade&quot; command, though this <br>
property can be used when a specific version is needed for
backwards compatibility. This property can be any number
between 1 and the current version reported by &quot;zpool
<br>
upgrade -v&quot;.</p>

<p style="margin-top: 1em">Subcommands <br>
All subcommands that modify state are logged persistently to
the pool in their original form.</p>

<p style="margin-top: 1em">The zpool command provides
subcommands to create and destroy storage pools, add
capacity to storage pools, and provide information about the
storage pools. The following subcom&acirc; <br>
mands are supported:</p>

<p style="margin-top: 1em">zpool -?</p>

<p style="margin-top: 1em">Displays a help message.</p>

<p style="margin-top: 1em">zpool add [-fn] [-o
property=value] pool vdev ...</p>

<p style="margin-top: 1em">Adds the specified virtual
devices to the given pool. The vdev specification is
described in the &quot;Virtual Devices&quot; section. The
behavior of the -f option, and the device <br>
checks performed are described in the &quot;zpool
create&quot; subcommand.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces use of vdevs, even if
they appear in use or specify a conflicting replication
level. Not all devices can be overridden in this manner.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Displays the configuration that
would be used without actually adding the vdevs. The actual
pool creation can still fail due to insufficient privileges
or device sharing.</p>

<p style="margin-top: 1em">-o property=value</p>

<p style="margin-top: 1em">Sets the given pool properties.
See the &quot;Properties&quot; section for a list of valid
properties that can be set. The only property supported at
the moment is &quot;ashift&quot;.</p>

<p style="margin-top: 1em">Do not add a disk that is
currently configured as a quorum device to a zpool. After a
disk is in the pool, that disk can then be configured as a
quorum device.</p>

<p style="margin-top: 1em">zpool attach [-f] [-o
property=value] pool device new_device</p>

<p style="margin-top: 1em">Attaches new_device to an
existing zpool device. The existing device cannot be part of
a raidz configuration. If device is not currently part of a
mirrored configuration, <br>
device automatically transforms into a two-way mirror of
device and new_device. If device is part of a two-way
mirror, attaching new_device creates a three-way mirror, and
so <br>
on. In either case, new_device begins to resilver
immediately.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces use of new_device, even
if its appears to be in use. Not all devices can be
overridden in this manner.</p>

<p style="margin-top: 1em">-o property=value</p>

<p style="margin-top: 1em">Sets the given pool properties.
See the &quot;Properties&quot; section for a list of valid
properties that can be set. The only property supported at
the moment is &quot;ashift&quot;.</p>

<p style="margin-top: 1em">zpool clear [-F [-n]] pool
[device] ...</p>

<p style="margin-top: 1em">Clears device errors in a pool.
If no arguments are specified, all device errors within the
pool are cleared. If one or more devices is specified, only
those errors associ&acirc; <br>
ated with the specified device or devices are cleared.</p>

<p style="margin-top: 1em">-F</p>

<p style="margin-top: 1em">Initiates recovery mode for an
unopenable pool. Attempts to discard the last few
transactions in the pool to return it to an openable state.
Not all damaged pools can be <br>
recovered by using this option. If successful, the data from
the discarded transactions is irretrievably lost.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Used in combination with the -F
flag. Check whether discarding transactions would make the
pool openable, but do not actually discard any
transactions.</p>

<p style="margin-top: 1em">zpool create [-fn] [-o
property=value] ... [-O file-system-property=value] ... [-m
mountpoint] [-R root] pool vdev ...</p>

<p style="margin-top: 1em">Creates a new storage pool
containing the virtual devices specified on the command
line. The pool name must begin with a letter, and can only
contain alphanumeric characters <br>
as well as underscore (&quot;_&quot;), dash (&quot;-&quot;),
and period (&quot;.&quot;). The pool names mirror, raidz,
spare, and log are reserved, as are names beginning with the
pattern c[0-9]. The vdev <br>
specification is described in the &quot;Virtual
Devices&quot; section.</p>

<p style="margin-top: 1em">The command verifies that each
device specified is accessible and not currently in use by
another subsystem. There are some uses, such as being
currently mounted, or speci&acirc; <br>
fied as the dedicated dump device, that prevents a device
from ever being used by ZFS. Other uses, such as having a
preexisting UFS file system, can be overridden with the -f
<br>
option.</p>

<p style="margin-top: 1em">The command also checks that the
replication strategy for the pool is consistent. An attempt
to combine redundant and non-redundant storage in a single
pool, or to mix disks <br>
and files, results in an error unless -f is specified. The
use of differently sized devices within a single raidz or
mirror group is also flagged as an error unless -f is <br>
specified.</p>

<p style="margin-top: 1em">Unless the -R option is
specified, the default mount point is &quot;/pool&quot;. The
mount point must not exist or must be empty, or else the
root dataset cannot be mounted. This can <br>
be overridden with the -m option.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces use of vdevs, even if
they appear in use or specify a conflicting replication
level. Not all devices can be overridden in this manner.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Displays the configuration that
would be used without actually creating the pool. The actual
pool creation can still fail due to insufficient privileges
or device shar&acirc; <br>
ing.</p>

<p style="margin-top: 1em">-o property=value [-o
property=value] ...</p>

<p style="margin-top: 1em">Sets the given pool properties.
See the &quot;Properties&quot; section for a list of valid
properties that can be set.</p>

<p style="margin-top: 1em">-O file-system-property=value
<br>
[-O file-system-property=value] ...</p>

<p style="margin-top: 1em">Sets the given file system
properties in the root file system of the pool. See the
&quot;Properties&quot; section of zfs(1M) for a list of
valid properties that can be set.</p>

<p style="margin-top: 1em">-R root</p>

<p style="margin-top: 1em">Equivalent to &quot;-o
cachefile=none,altroot=root&quot;</p>

<p style="margin-top: 1em">-m mountpoint</p>

<p style="margin-top: 1em">Sets the mount point for the
root dataset. The default mount point is &quot;/pool&quot;
or &quot;altroot/pool&quot; if altroot is specified. The
mount point must be an absolute path, <br>
&quot;legacy&quot;, or &quot;none&quot;. For more
information on dataset mount points, see zfs(1M).</p>

<p style="margin-top: 1em">zpool destroy [-f] pool</p>

<p style="margin-top: 1em">Destroys the given pool, freeing
up any devices for other use. This command tries to unmount
any active datasets before destroying the pool.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces any active datasets
contained within the pool to be unmounted.</p>

<p style="margin-top: 1em">zpool detach pool device</p>

<p style="margin-top: 1em">Detaches device from a mirror.
The operation is refused if there are no other valid
replicas of the data.</p>

<p style="margin-top: 1em">zpool export [-f] pool ...</p>

<p style="margin-top: 1em">Exports the given pools from the
system. All devices are marked as exported, but are still
considered in use by other subsystems. The devices can be
moved between systems <br>
(even those of different endianness) and imported as long as
a sufficient number of devices are present.</p>

<p style="margin-top: 1em">Before exporting the pool, all
datasets within the pool are unmounted. A pool can not be
exported if it has a shared spare that is currently being
used.</p>

<p style="margin-top: 1em">For pools to be portable, you
must give the zpool command whole disks, not just slices, so
that ZFS can label the disks with portable EFI labels.
Otherwise, disk drivers on <br>
platforms of different endianness will not recognize the
disks.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forcefully unmount all datasets,
using the &quot;unmount -f&quot; command.</p>

<p style="margin-top: 1em">This command will forcefully
export the pool even if it has a shared spare that is
currently being used. This may lead to potential data
corruption.</p>

<p style="margin-top: 1em">zpool get &quot;all&quot; |
property[,...] pool ...</p>

<p style="margin-top: 1em">Retrieves the given list of
properties (or all properties if &quot;all&quot; is used)
for the specified storage pool(s). These properties are
displayed with the following fields:</p>

<p style="margin-top: 1em">name Name of storage pool <br>
property Property name <br>
value Property value <br>
source Property source, either &rsquo;default&rsquo; or
&rsquo;local&rsquo;.</p>

<p style="margin-top: 1em">See the &quot;Properties&quot;
section for more information on the available pool
properties.</p>

<p style="margin-top: 1em">zpool history [-il] [pool]
...</p>

<p style="margin-top: 1em">Displays the command history of
the specified pools or all pools if no pool is
specified.</p>

<p style="margin-top: 1em">-i</p>

<p style="margin-top: 1em">Displays internally logged ZFS
events in addition to user initiated events.</p>

<p style="margin-top: 1em">-l</p>

<p style="margin-top: 1em">Displays log records in long
format, which in addition to standard format includes, the
user name, the hostname, and the zone in which the operation
was performed.</p>

<p style="margin-top: 1em">zpool import [-d dir | -c
cachefile] [-D]</p>

<p style="margin-top: 1em">Lists pools available to import.
If the -d option is not specified, this command searches for
devices in &quot;/dev/dsk&quot;. The -d option can be
specified multiple times, and all <br>
directories are searched. If the device appears to be part
of an exported pool, this command displays a summary of the
pool with the name of the pool, a numeric identifier, <br>
as well as the vdev layout and current health of the device
for each device or file. Destroyed pools, pools that were
previously destroyed with the &quot;zpool destroy&quot;
command, <br>
are not listed unless the -D option is specified.</p>

<p style="margin-top: 1em">The numeric identifier is
unique, and can be used instead of the pool name when
multiple exported pools of the same name are available.</p>

<p style="margin-top: 1em">-c cachefile</p>

<p style="margin-top: 1em">Reads configuration from the
given cachefile that was created with the
&quot;cachefile&quot; pool property. This cachefile is used
instead of searching for devices.</p>

<p style="margin-top: 1em">-d dir</p>

<p style="margin-top: 1em">Searches for devices or files in
dir. The -d option can be specified multiple times.</p>

<p style="margin-top: 1em">-D</p>

<p style="margin-top: 1em">Lists destroyed pools only.</p>

<p style="margin-top: 1em">zpool import [-o mntopts] [ -o
property=value] ... [-d dir | -c cachefile] [-D] [-f] [-R
root] [-F [-n]] -a</p>

<p style="margin-top: 1em">Imports all pools found in the
search directories. Identical to the previous command,
except that all pools with a sufficient number of devices
available are imported. <br>
Destroyed pools, pools that were previously destroyed with
the &quot;zpool destroy&quot; command, will not be imported
unless the -D option is specified.</p>

<p style="margin-top: 1em">-o mntopts</p>

<p style="margin-top: 1em">Comma-separated list of mount
options to use when mounting datasets within the pool. See
zfs(1M) for a description of dataset properties and mount
options.</p>

<p style="margin-top: 1em">-o property=value</p>

<p style="margin-top: 1em">Sets the specified property on
the imported pool. See the &quot;Properties&quot; section
for more information on the available pool properties.</p>

<p style="margin-top: 1em">-c cachefile</p>

<p style="margin-top: 1em">Reads configuration from the
given cachefile that was created with the
&quot;cachefile&quot; pool property. This cachefile is used
instead of searching for devices.</p>

<p style="margin-top: 1em">-d dir</p>

<p style="margin-top: 1em">Searches for devices or files in
dir. The -d option can be specified multiple times. This
option is incompatible with the -c option.</p>

<p style="margin-top: 1em">-D</p>

<p style="margin-top: 1em">Imports destroyed pools only.
The -f option is also required.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces import, even if the pool
appears to be potentially active.</p>

<p style="margin-top: 1em">-F</p>

<p style="margin-top: 1em">Recovery mode for a
non-importable pool. Attempt to return the pool to an
importable state by discarding the last few transactions.
Not all damaged pools can be recovered <br>
by using this option. If successful, the data from the
discarded transactions is irretrievably lost. This option is
ignored if the pool is importable or already imported.</p>

<p style="margin-top: 1em">-a</p>

<p style="margin-top: 1em">Searches for and imports all
pools found.</p>

<p style="margin-top: 1em">-R root</p>

<p style="margin-top: 1em">Sets the &quot;cachefile&quot;
property to &quot;none&quot; and the &quot;altroot&quot;
property to &quot;root&quot;.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Used with the -F recovery
option. Determines whether a non-importable pool can be made
importable again, but does not actually perform the pool
recovery. For more details <br>
about pool recovery mode, see the -F option, above.</p>

<p style="margin-top: 1em">zpool import [-o mntopts] [ -o
property=value] ... [-d dir | -c cachefile] [-D] [-f] [-R
root] [-F [-n]] pool | id [newpool]</p>

<p style="margin-top: 1em">Imports a specific pool. A pool
can be identified by its name or the numeric identifier. If
newpool is specified, the pool is imported using the name
newpool. Otherwise, it <br>
is imported with the same name as its exported name.</p>

<p style="margin-top: 1em">If a device is removed from a
system without running &quot;zpool export&quot; first, the
device appears as potentially active. It cannot be
determined if this was a failed export, or <br>
whether the device is really in use from another host. To
import a pool in this state, the -f option is required.</p>

<p style="margin-top: 1em">-o mntopts</p>

<p style="margin-top: 1em">Comma-separated list of mount
options to use when mounting datasets within the pool. See
zfs(1M) for a description of dataset properties and mount
options.</p>

<p style="margin-top: 1em">-o property=value</p>

<p style="margin-top: 1em">Sets the specified property on
the imported pool. See the &quot;Properties&quot; section
for more information on the available pool properties.</p>

<p style="margin-top: 1em">-c cachefile</p>

<p style="margin-top: 1em">Reads configuration from the
given cachefile that was created with the
&quot;cachefile&quot; pool property. This cachefile is used
instead of searching for devices.</p>

<p style="margin-top: 1em">-d dir</p>

<p style="margin-top: 1em">Searches for devices or files in
dir. The -d option can be specified multiple times. This
option is incompatible with the -c option.</p>

<p style="margin-top: 1em">-D</p>

<p style="margin-top: 1em">Imports destroyed pool. The -f
option is also required.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces import, even if the pool
appears to be potentially active.</p>

<p style="margin-top: 1em">-F</p>

<p style="margin-top: 1em">Recovery mode for a
non-importable pool. Attempt to return the pool to an
importable state by discarding the last few transactions.
Not all damaged pools can be recovered <br>
by using this option. If successful, the data from the
discarded transactions is irretrievably lost. This option is
ignored if the pool is importable or already imported.</p>

<p style="margin-top: 1em">-R root</p>

<p style="margin-top: 1em">Sets the &quot;cachefile&quot;
property to &quot;none&quot; and the &quot;altroot&quot;
property to &quot;root&quot;.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Used with the -F recovery
option. Determines whether a non-importable pool can be made
importable again, but does not actually perform the pool
recovery. For more details <br>
about pool recovery mode, see the -F option, above.</p>

<p style="margin-top: 1em">zpool iostat [-T u | d] [-v]
[pool] ... [interval[count]]</p>

<p style="margin-top: 1em">Displays I/O statistics for the
given pools. When given an interval, the statistics are
printed every interval seconds until Ctrl-C is pressed. If
no pools are specified, <br>
statistics for every pool in the system is shown. If count
is specified, the command exits after count reports are
printed.</p>

<p style="margin-top: 1em">-T u | d</p>

<p style="margin-top: 1em">Display a time stamp.</p>

<p style="margin-top: 1em">Specify u for a printed
representation of the internal representation of time. See
time(2). Specify d for standard date format. See
date(1).</p>

<p style="margin-top: 1em">-v</p>

<p style="margin-top: 1em">Verbose statistics. Reports
usage statistics for individual vdevs within the pool, in
addition to the pool-wide statistics.</p>

<p style="margin-top: 1em">zpool list [-H] [-o props[,...]]
[pool] ...</p>

<p style="margin-top: 1em">Lists the given pools along with
a health status and space usage. When given no arguments,
all pools in the system are listed.</p>

<p style="margin-top: 1em">-H</p>

<p style="margin-top: 1em">Scripted mode. Do not display
headers, and separate fields by a single tab instead of
arbitrary space.</p>

<p style="margin-top: 1em">-o props</p>

<p style="margin-top: 1em">Comma-separated list of
properties to display. See the &quot;Properties&quot;
section for a list of valid properties. The default list is
name, size, allocated, free, capacity, <br>
health, altroot.</p>

<p style="margin-top: 1em">zpool offline [-t] pool device
...</p>

<p style="margin-top: 1em">Takes the specified physical
device offline. While the device is offline, no attempt is
made to read or write to the device.</p>

<p style="margin-top: 1em">This command is not applicable
to spares or cache devices.</p>

<p style="margin-top: 1em">-t</p>

<p style="margin-top: 1em">Temporary. Upon reboot, the
specified physical device reverts to its previous state.</p>

<p style="margin-top: 1em">zpool online [-e] pool
device...</p>

<p style="margin-top: 1em">Brings the specified physical
device online.</p>

<p style="margin-top: 1em">This command is not applicable
to spares or cache devices.</p>

<p style="margin-top: 1em">-e</p>

<p style="margin-top: 1em">Expand the device to use all
available space. If the device is part of a mirror or raidz
then all devices must be expanded before the new space will
become available to <br>
the pool.</p>

<p style="margin-top: 1em">zpool remove pool device ...</p>

<p style="margin-top: 1em">Removes the specified device
from the pool. This command currently only supports removing
hot spares, cache, and log devices. A mirrored log device
can be removed by specify&acirc; <br>
ing the top-level mirror for the log. Non-log devices that
are part of a mirrored configuration can be removed using
the zpool detach command. Non-redundant and raidz devices
<br>
cannot be removed from a pool.</p>

<p style="margin-top: 1em">zpool replace [-f] pool
old_device [new_device]</p>

<p style="margin-top: 1em">Replaces old_device with
new_device. This is equivalent to attaching new_device,
waiting for it to resilver, and then detaching
old_device.</p>

<p style="margin-top: 1em">The size of new_device must be
greater than or equal to the minimum size of all the devices
in a mirror or raidz configuration.</p>

<p style="margin-top: 1em">new_device is required if the
pool is not redundant. If new_device is not specified, it
defaults to old_device. This form of replacement is useful
after an existing disk has <br>
failed and has been physically replaced. In this case, the
new disk may have the same /dev/dsk path as the old device,
even though it is actually a different disk. ZFS
recog&acirc; <br>
nizes this.</p>

<p style="margin-top: 1em">-f</p>

<p style="margin-top: 1em">Forces use of new_device, even
if its appears to be in use. Not all devices can be
overridden in this manner.</p>

<p style="margin-top: 1em">zpool scrub [-s] pool ...</p>

<p style="margin-top: 1em">Begins a scrub. The scrub
examines all data in the specified pools to verify that it
checksums correctly. For replicated (mirror or raidz)
devices, ZFS automatically repairs <br>
any damage discovered during the scrub. The &quot;zpool
status&quot; command reports the progress of the scrub and
summarizes the results of the scrub upon completion.</p>

<p style="margin-top: 1em">Scrubbing and resilvering are
very similar operations. The difference is that resilvering
only examines data that ZFS knows to be out of date (for
example, when attaching a <br>
new device to a mirror or replacing an existing device),
whereas scrubbing examines all data to discover silent
errors due to hardware faults or disk failure.</p>

<p style="margin-top: 1em">Because scrubbing and
resilvering are I/O-intensive operations, ZFS only allows
one at a time. If a scrub is already in progress, the
&quot;zpool scrub&quot; command terminates it and <br>
starts a new scrub. If a resilver is in progress, ZFS does
not allow a scrub to be started until the resilver
completes.</p>

<p style="margin-top: 1em">-s</p>

<p style="margin-top: 1em">Stop scrubbing.</p>

<p style="margin-top: 1em">zpool set property=value
pool</p>

<p style="margin-top: 1em">Sets the given property on the
specified pool. See the &quot;Properties&quot; section for
more information on what properties can be set and
acceptable values.</p>

<p style="margin-top: 1em">zpool split [-R altroot] [-n]
[-o mntopts] [-o property=value] pool newpool [device
...]</p>

<p style="margin-top: 1em">Splits off one disk from each
mirrored top-level vdev in a pool and creates a new pool
from the split-off disks. The original pool must be made up
of one or more mirrors and <br>
must not be in the process of resilvering. The split
subcommand chooses the last device in each mirror vdev
unless overridden by a device specification on the command
line.</p>

<p style="margin-top: 1em">When using a device argument,
split includes the specified device(s) in a new pool and,
should any devices remain unspecified, assigns the last
device in each mirror vdev to <br>
that pool, as it does normally. If you are uncertain about
the outcome of a split command, use the -n
(&quot;dry-run&quot;) option to ensure your command will
have the effect you <br>
intend.</p>

<p style="margin-top: 1em">-R altroot</p>

<p style="margin-top: 1em">Automatically import the newly
created pool after splitting, using the specified altroot
parameter for the new pool&rsquo;s alternate root. See the
altroot description in the <br>
&quot;Properties&quot; section, above.</p>

<p style="margin-top: 1em">-n</p>

<p style="margin-top: 1em">Displays the configuration that
would be created without actually splitting the pool. The
actual pool split could still fail due to insufficient
privileges or device sta&acirc; <br>
tus.</p>

<p style="margin-top: 1em">-o mntopts</p>

<p style="margin-top: 1em">Comma-separated list of mount
options to use when mounting datasets within the pool. See
zfs(1M) for a description of dataset properties and mount
options. Valid only in <br>
conjunction with the -R option.</p>

<p style="margin-top: 1em">-o property=value</p>

<p style="margin-top: 1em">Sets the specified property on
the new pool. See the &quot;Properties&quot; section, above,
for more information on the available pool properties.</p>

<p style="margin-top: 1em">zpool status [-xv] [pool]
...</p>

<p style="margin-top: 1em">Displays the detailed health
status for the given pools. If no pool is specified, then
the status of each pool in the system is displayed. For more
information on pool and <br>
device health, see the &quot;Device Failure and
Recovery&quot; section.</p>

<p style="margin-top: 1em">If a scrub or resilver is in
progress, this command reports the percentage done and the
estimated time to completion. Both of these are only
approximate, because the amount <br>
of data in the pool and the other workloads on the system
can change.</p>

<p style="margin-top: 1em">-x</p>

<p style="margin-top: 1em">Only display status for pools
that are exhibiting errors or are otherwise unavailable.</p>

<p style="margin-top: 1em">-v</p>

<p style="margin-top: 1em">Displays verbose data error
information, printing out a complete list of all data errors
since the last complete pool scrub.</p>

<p style="margin-top: 1em">zpool upgrade</p>

<p style="margin-top: 1em">Displays all pools formatted
using a different ZFS on-disk version. Older versions can
continue to be used, but some features may not be available.
These pools can be <br>
upgraded using &quot;zpool upgrade -a&quot;. Pools that are
formatted with a more recent version are also displayed,
although these pools will be inaccessible on the system.</p>

<p style="margin-top: 1em">zpool upgrade -v</p>

<p style="margin-top: 1em">Displays ZFS versions supported
by the current software. The current ZFS versions and all
previous supported versions are displayed, along with an
explanation of the features <br>
provided with each version.</p>

<p style="margin-top: 1em">zpool upgrade [-V version] -a |
pool ...</p>

<p style="margin-top: 1em">Upgrades the given pool to the
latest on-disk version. Once this is done, the pool will no
longer be accessible on systems running older versions of
the software.</p>

<p style="margin-top: 1em">-a</p>

<p style="margin-top: 1em">Upgrades all pools.</p>

<p style="margin-top: 1em">-V version</p>

<p style="margin-top: 1em">Upgrade to the specified
version. If the -V flag is not specified, the pool is
upgraded to the most recent version. This option can only be
used to increase the version <br>
number, and only up to the most recent version supported by
this software.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Example 1 Creating a RAID-Z Storage Pool</p>

<p style="margin-top: 1em">The following command creates a
pool with a single raidz root vdev that consists of six
disks.</p>

<p style="margin-top: 1em"># zpool create tank raidz c0t0d0
c0t1d0 c0t2d0 c0t3d0 c0t4d0 c0t5d0</p>

<p style="margin-top: 1em">Example 2 Creating a Mirrored
Storage Pool</p>

<p style="margin-top: 1em">The following command creates a
pool with two mirrors, where each mirror contains two
disks.</p>

<p style="margin-top: 1em"># zpool create tank mirror
c0t0d0 c0t1d0 mirror c0t2d0 c0t3d0</p>

<p style="margin-top: 1em">Example 3 Creating a ZFS Storage
Pool by Using Slices</p>

<p style="margin-top: 1em">The following command creates an
unmirrored pool using two disk slices.</p>

<p style="margin-top: 1em"># zpool create tank
/dev/dsk/c0t0d0s1 c0t1d0s4</p>

<p style="margin-top: 1em">Example 4 Creating a ZFS Storage
Pool by Using Files</p>

<p style="margin-top: 1em">The following command creates an
unmirrored pool using files. While not recommended, a pool
based on files can be useful for experimental purposes.</p>

<p style="margin-top: 1em"># zpool create tank
/path/to/file/a /path/to/file/b</p>

<p style="margin-top: 1em">Example 5 Adding a Mirror to a
ZFS Storage Pool</p>

<p style="margin-top: 1em">The following command adds two
mirrored disks to the pool &quot;tank&quot;, assuming the
pool is already made up of two-way mirrors. The additional
space is immediately available to any <br>
datasets within the pool.</p>

<p style="margin-top: 1em"># zpool add tank mirror c1t0d0
c1t1d0</p>

<p style="margin-top: 1em">Example 6 Listing Available ZFS
Storage Pools</p>

<p style="margin-top: 1em">The following command lists all
available pools on the system.</p>

<p style="margin-top: 1em"># zpool list <br>
NAME SIZE ALLOC FREE CAP DEDUP HEALTH ALTROOT <br>
pool 136G 109M 136G 0% 3.00x ONLINE - <br>
rpool 67.5G 12.6G 54.9G 18% 1.01x ONLINE -</p>

<p style="margin-top: 1em">Example 7 Listing All Properties
for a Pool</p>

<p style="margin-top: 1em">The following command lists all
the properties for a pool.</p>

<p style="margin-top: 1em">% zpool get all pool <br>
NAME PROPERTY VALUE SOURCE <br>
pool size 136G - <br>
pool capacity 0% - <br>
pool altroot - default <br>
pool health ONLINE - <br>
pool guid 15697759092019394988 default <br>
pool version 21 default <br>
pool bootfs - default <br>
pool delegation on default <br>
pool autoreplace off default <br>
pool cachefile - default <br>
pool failmode wait default <br>
pool listsnapshots off default <br>
pool autoexpand off default <br>
pool dedupratio 3.00x - <br>
pool free 136G - <br>
pool allocated 109M -</p>

<p style="margin-top: 1em">Example 8 Destroying a ZFS
Storage Pool</p>

<p style="margin-top: 1em">The following command destroys
the pool &quot;tank&quot; and any datasets contained
within.</p>

<p style="margin-top: 1em"># zpool destroy -f tank</p>

<p style="margin-top: 1em">Example 9 Exporting a ZFS
Storage Pool</p>

<p style="margin-top: 1em">The following command exports
the devices in pool tank so that they can be relocated or
later imported.</p>

<p style="margin-top: 1em"># zpool export tank</p>

<p style="margin-top: 1em">Example 10 Importing a ZFS
Storage Pool</p>

<p style="margin-top: 1em">The following command displays
available pools, and then imports the pool &quot;tank&quot;
for use on the system.</p>

<p style="margin-top: 1em">The results from this command
are similar to the following:</p>

<p style="margin-top: 1em"># zpool import <br>
pool: tank <br>
id: 7678868315469843843 <br>
state: ONLINE <br>
action: The pool can be imported using its name or numeric
identifier. <br>
config:</p>

<p style="margin-top: 1em">tank ONLINE <br>
mirror-0 ONLINE <br>
c1t2d0 ONLINE <br>
c1t3d0 ONLINE</p>

<p style="margin-top: 1em"># zpool import tank</p>

<p style="margin-top: 1em">Example 11 Upgrading All ZFS
Storage Pools to the Current Version</p>

<p style="margin-top: 1em">The following command upgrades
all ZFS Storage pools to the current version of the
software.</p>

<p style="margin-top: 1em"># zpool upgrade -a <br>
This system is currently running ZFS pool version 19.</p>

<p style="margin-top: 1em">All pools are formatted using
this version.</p>

<p style="margin-top: 1em">Example 12 Managing Hot
Spares</p>

<p style="margin-top: 1em">The following command creates a
new pool with an available hot spare:</p>

<p style="margin-top: 1em"># zpool create tank mirror
c0t0d0 c0t1d0 spare c0t2d0</p>

<p style="margin-top: 1em">If one of the disks were to
fail, the pool would be reduced to the degraded state. The
failed device can be replaced using the following
command:</p>

<p style="margin-top: 1em"># zpool replace tank c0t0d0
c0t3d0</p>

<p style="margin-top: 1em">Once the data has been
resilvered, the spare is automatically removed and is made
available should another device fails. The hot spare can be
permanently removed from the pool <br>
using the following command:</p>

<p style="margin-top: 1em"># zpool remove tank c0t2d0</p>

<p style="margin-top: 1em">Example 13 Creating a ZFS Pool
with Mirrored Separate Intent Logs</p>

<p style="margin-top: 1em">The following command creates a
ZFS storage pool consisting of two, two-way mirrors and
mirrored log devices:</p>

<p style="margin-top: 1em"># zpool create pool mirror c0d0
c1d0 mirror c2d0 c3d0 log mirror c4d0 c5d0</p>

<p style="margin-top: 1em">Example 14 Adding Cache Devices
to a ZFS Pool</p>

<p style="margin-top: 1em">The following command adds two
disks for use as cache devices to a ZFS storage pool:</p>

<p style="margin-top: 1em"># zpool add pool cache c2d0
c3d0</p>

<p style="margin-top: 1em">Once added, the cache devices
gradually fill with content from main memory. Depending on
the size of your cache devices, it could take over an hour
for them to fill. Capacity and <br>
reads can be monitored using the iostat option as
follows:</p>

<p style="margin-top: 1em"># zpool iostat -v pool 5</p>

<p style="margin-top: 1em">Example 15 Removing a Mirrored
Log Device</p>

<p style="margin-top: 1em">The following command removes
the mirrored log device mirror-2.</p>

<p style="margin-top: 1em">Given this configuration:</p>

<p style="margin-top: 1em">pool: tank <br>
state: ONLINE <br>
scrub: none requested <br>
config:</p>

<p style="margin-top: 1em">NAME STATE READ WRITE CKSUM <br>
tank ONLINE 0 0 0 <br>
mirror-0 ONLINE 0 0 0 <br>
c6t0d0 ONLINE 0 0 0 <br>
c6t1d0 ONLINE 0 0 0 <br>
mirror-1 ONLINE 0 0 0 <br>
c6t2d0 ONLINE 0 0 0 <br>
c6t3d0 ONLINE 0 0 0 <br>
logs <br>
mirror-2 ONLINE 0 0 0 <br>
c4t0d0 ONLINE 0 0 0 <br>
c4t1d0 ONLINE 0 0 0</p>

<p style="margin-top: 1em">The command to remove the
mirrored log mirror-2 is:</p>

<p style="margin-top: 1em"># zpool remove tank mirror-2</p>

<p style="margin-top: 1em">Example 16 Recovering a Faulted
ZFS Pool</p>

<p style="margin-top: 1em">If a pool is faulted but
recoverable, a message indicating this state is provided by
zpool status if the pool was cached (see cachefile above),
or as part of the error output <br>
from a failed zpool import of the pool.</p>

<p style="margin-top: 1em">Recover a cached pool with the
zpool clear command:</p>

<p style="margin-top: 1em"># zpool clear -F data <br>
Pool data returned to its state as of Tue Sep 08 13:23:35
2009. <br>
Discarded approximately 29 seconds of transactions.</p>

<p style="margin-top: 1em">If the pool configuration was
not cached, use zpool import with the recovery mode
flag:</p>

<p style="margin-top: 1em"># zpool import -F data <br>
Pool data returned to its state as of Tue Sep 08 13:23:35
2009. <br>
Discarded approximately 29 seconds of transactions.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The following exit values are returned:</p>

<p style="margin-top: 1em">0</p>

<p style="margin-top: 1em">Successful completion.</p>

<p style="margin-top: 1em">1</p>

<p style="margin-top: 1em">An error occurred.</p>

<p style="margin-top: 1em">2</p>

<p style="margin-top: 1em">Invalid command line options
were specified.</p>

<p style="margin-top: 1em">ATTRIBUTES <br>
See attributes(5) for descriptions of the following
attributes:</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; ATTRIBUTE TYPE &acirc; ATTRIBUTE VALUE &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;Availability &acirc;SUNWzfsu &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;Interface Stability &acirc;Committed &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;</p>

<p style="margin-top: 1em">SEE ALSO <br>
zfs(1M), attributes(5)</p>

<p style="margin-top: 1em">SunOS 5.11 4 Jan 2010
zpool(1M)</p>
<hr>
</body>
</html>
