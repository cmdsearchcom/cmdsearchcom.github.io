<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opagenswitches(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opagenswitches(8)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opagenswitches(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opagenswitches
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Analyzes the present fabric and produces a list of Externally Managed switches
  in the required format for the /etc/sysconfig/opa/switches file.
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opagenswitches [-t portsfile] [-p ports] [-R] [-L switches_file] [-o
  output_file] [-T topology_file] [-X snapshot_file] [-s] [-v level] [-K]
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-t <i>portsfile</i></dt>
  <dd class="It-tag">File with list of local HFI ports used to access fabric(s)
      for analysis. Default is /etc/sysconfig/opa/ports file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>ports</i></dt>
  <dd class="It-tag">List of local HFI ports used to access fabrics for counter
      clear. Default is first active port. The first HFI in the system is 1. The
      first port on an HFI is 1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Uses the format hfi:port, for example:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:0 First active port in system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:y Port <i>y</i> within system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:0 First active port on HFI <i>x</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:y HFI <i>x</i>, port <i>y</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-R</dt>
  <dd class="It-tag">Does not attempt to get routes for computation of
    distance.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s</dt>
  <dd class="It-tag">Updates/resolves switch names using topology XML data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-L <i>switches_file</i></dt>
  <dd class="It-tag">Specifies the name of a pre-existing <i>switches_file</i>
      to be used as input in conjunction with a topology file. When specified,
      the file is used instead of switches data obtained from the actual fabric.
      The updated switches data is output to stdout (common to all
      opagenswitches operations). Does not generate switches data; must also use
      -s option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-o <i>output_file</i></dt>
  <dd class="It-tag">Writes switches data to <i>output_file</i>. Default is
      stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-T <i>topology_file</i></dt>
  <dd class="It-tag">Specifies <i>topology_file</i> to use. May contain '%P' .
      Must also use -s.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Link data in the topology file is compared to actual fabric
      link data (obtained by opareport -o links or opareport -X snapshot -o
      links). The data is also matched to a list of switch node GUIDs and the
      switch NodeDesc values are generated. This list is then applied to the
      switches data to update NodeDesc values. The comparison of topology link
      data to actual fabric link data starts with the host names. The host names
      in the actual fabric must match those in the topology file for the
      comparison to succeed. However, the comparison logic allows for some
      mismatches, which could be due to swapped or missing cables. Switch
      NodeDesc values are matched to GUIDs based on which switch has the greater
      number of matching links.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-X <i>snapshot_file</i></dt>
  <dd class="It-tag">Uses <i>snapshot_file</i> XML for fabric link
    information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-v <i>level</i></dt>
  <dd class="It-tag">Verbose level. Default = 0. Values include:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No output.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
1 Progress output.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 Reserved.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
4 Time stamps.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
8 Reserved.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-K</dt>
  <dd class="It-tag">Does not clean temporary files. Temporary files are CSV
      format and contain lists of links used during script operation. The files
      are not normally needed after execution, but they can be retained for
      subsequent inspection or processing.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS</b></dt>
  <dd class="It-tag">List of ports, used in absence of -t and -p.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS_FILE</b></dt>
  <dd class="It-tag">File containing list of ports, used in absence of -t and
      -p.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_TOPOLOGY_FILE</b></dt>
  <dd class="It-tag">File containing topology XML data, used in absence of
    -T.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
opagenswitches
<div>&#x00A0;</div>
opagenswitches -p '1:1 2:1'
<div>&#x00A0;</div>
opagenswitches -o switches
<div>&#x00A0;</div>
opagenswitches -s -o switches
<div>&#x00A0;</div>
opagenswitches -L switches -s -o switches
<div>&#x00A0;</div>
opagenswitches -s -T topology.%P.xml
<div>&#x00A0;</div>
opagenswitches -L switches -s -T topology.%P.xml -X snapshot.%P.xml</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
