<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opagenswitches(8) Master map:
IFSFFCLIRG (Man Page) opagenswitches(8)</p>

<p style="margin-top: 1em">NAME <br>
opagenswitches</p>

<p style="margin-top: 1em">Analyzes the present fabric and
produces a list of Externally Managed switches in the
required format for the /etc/sysconfig/opa/switches
file.</p>

<p style="margin-top: 1em">Syntax <br>
opagenswitches [-t portsfile] [-p ports] [-R] [-L
switches_file] [-o output_file] [-T topology_file] [-X
snapshot_file] [-s] [-v level] [-K]</p>

<p style="margin-top: 1em">Options <br>
--help Produces full help text.</p>

<p style="margin-top: 1em">-t portsfile <br>
File with list of local HFI ports used to access fabric(s)
for analysis. Default is /etc/sysconfig/opa/ports file.</p>

<p style="margin-top: 1em">-p ports List of local HFI ports
used to access fabrics for counter clear. Default is first
active port. The first HFI in the system is 1. The first
port on an HFI is 1.</p>

<p style="margin-top: 1em">Uses the format hfi:port, for
example:</p>

<p style="margin-top: 1em">0:0 First active port in
system.</p>

<p style="margin-top: 1em">0:y Port y within system.</p>

<p style="margin-top: 1em">x:0 First active port on HFI
x.</p>

<p style="margin-top: 1em">x:y HFI x, port y.</p>

<p style="margin-top: 1em">-R Does not attempt to get
routes for computation of distance.</p>

<p style="margin-top: 1em">-s Updates/resolves switch names
using topology XML data.</p>

<p style="margin-top: 1em">-L switches_file <br>
Specifies the name of a pre-existing switches_file to be
used as input in conjunction with a topology file. When
specified, the file is used instead of switches data <br>
obtained from the actual fabric. The updated switches data
is output to stdout (common to all opagenswitches
operations). Does not generate switches data; must also use
<br>
-s option.</p>

<p style="margin-top: 1em">-o output_file <br>
Writes switches data to output_file. Default is stdout.</p>

<p style="margin-top: 1em">-T topology_file <br>
Specifies topology_file to use. May contain &rsquo;%P&rsquo;
. Must also use -s.</p>

<p style="margin-top: 1em">Link data in the topology file
is compared to actual fabric link data (obtained by
opareport -o links or opareport -X snapshot -o links). The
data is also matched to a <br>
list of switch node GUIDs and the switch NodeDesc values are
generated. This list is then applied to the switches data to
update NodeDesc values. The comparison of <br>
topology link data to actual fabric link data starts with
the host names. The host names in the actual fabric must
match those in the topology file for the comparison <br>
to succeed. However, the comparison logic allows for some
mismatches, which could be due to swapped or missing cables.
Switch NodeDesc values are matched to GUIDs based <br>
on which switch has the greater number of matching
links.</p>

<p style="margin-top: 1em">-X snapshot_file <br>
Uses snapshot_file XML for fabric link information.</p>

<p style="margin-top: 1em">-v level Verbose level. Default
= 0. Values include:</p>

<p style="margin-top: 1em">0 No output.</p>

<p style="margin-top: 1em">1 Progress output.</p>

<p style="margin-top: 1em">2 Reserved.</p>

<p style="margin-top: 1em">4 Time stamps.</p>

<p style="margin-top: 1em">8 Reserved.</p>

<p style="margin-top: 1em">-K Does not clean temporary
files. Temporary files are CSV format and contain lists of
links used during script operation. The files are not
normally needed after execu&acirc; <br>
tion, but they can be retained for subsequent inspection or
processing.</p>

<p style="margin-top: 1em">Environment Variables <br>
PORTS List of ports, used in absence of -t and -p.</p>

<p style="margin-top: 1em">PORTS_FILE <br>
File containing list of ports, used in absence of -t and
-p.</p>

<p style="margin-top: 1em">FF_TOPOLOGY_FILE <br>
File containing topology XML data, used in absence of
-T.</p>

<p style="margin-top: 1em">Examples <br>
opagenswitches <br>
opagenswitches -p &rsquo;1:1 2:1&rsquo; <br>
opagenswitches -o switches <br>
opagenswitches -s -o switches <br>
opagenswitches -L switches -s -o switches <br>
opagenswitches -s -T topology.%P.xml <br>
opagenswitches -L switches -s -T topology.%P.xml -X
snapshot.%P.xml</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opagenswitches(8)</p>
<hr>
</body>
</html>
