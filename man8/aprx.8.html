<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>aprx(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">aprx(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">aprx(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>Aprx-2</b> - An APRS iGate application with integrated Digipeater.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>aprx</b> [<b>-d</b>[<b>d</b>[<b>d</b>]]] [<b>-e</b>] [<b>-i</b>] [<b>-v</b>]
  [<b>-V</b>] [<b>-l</b> <i>syslogfacilityname</i>] [<b>-f</b>
  <i>/etc/aprx.conf</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>aprx</b> program is a special purpose Ham-radio application supplying
  infrastructure services for APRS protocol use.
<div class="Pp"></div>
A more detailed manual is available at:
<div>&#x00A0;</div>
http://ham.zmailer.org/oh2mqk/aprx/aprx-manual.pdf
<h1 class="Sh" title="Sh" id="FEATURES"><a class="selflink" href="#FEATURES">FEATURES</a></h1>
The Aprx begun as a receive-only APRS iGate application with minimum system
  support technology requirements. This version has also multi-port digipeater
  support, transmit iGate, and experimental D-PRS-to-APRS RF/Rx-iGate.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx does not require machine to have any other
      software in it, than things in UNIX standard libc. In particular no
      special AX.25 libraries at all, nor widgets or even C++ runtime.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Important goal has been to keep R/W memory footprint as
      small as possible, and on general purpose i386 Linux a single radio port
      iGate+digipeater is now around 250 kB of R/W memory allocations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Any UNIX (and UNIX like) platform should work for the Aprx,
      or be trivially ported.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx can listen &quot;TNC2 monitor&quot; and
      &quot;KISS&quot; speaking TNCs on any serial ports.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For Aprx the serial port can be ordinary host computer
      port, a USB serial port, or remote port on a remote server behind the
      internet, like cisco router AUX ports (port 4001, TCP STREAM without
      TELNET escapes.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx does not require machine to have AX.25 protocol
      support internally! (Thus this works also on e.g. Solaris and BSD machines
      without PF_AX25 sockets.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">On Linux machine with kernel internal AX.25 protocol
      support, the Aprx can listen on it with promiscuous mode and in order to
      use that, the Aprx must be started as <i>root</i> user, and be configured
      to list interface callsigns that APRS packets are coming in. The AX.25
      socket listening is not in itself configurable, it is always exists in
      Linux systems, and related configuration parameters are ignored in other
      platforms. This socket listening does not need auxiliary
      &quot;libax25&quot; to function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx program can be run without root privileges at
      least against remote serial port servers. One must change local serial
      port ownership or access-groups (if any are used) to userid that runs the
      program and possibly do several changes of file paths in configuration
      file beginning with its location (startup parameter). How that is done is
      up to the user or system integrator of this program.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx connects with one callsign-ssid pair to APRS-IS
      core for all received radio ports.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx Rx-iGate knows that messages with following tokens
      in AX.25 VIA fields are not to be relayed into APRS-IS network:</dd>
</dl>
<div style="margin-left: 9.00ex;"><b>RFONLY, NOGATE, TCPIP, TCPXX</b></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx Rx-iGate knows that following source address
      prefixes are bogus and thus messages with them are to be junked:</dd>
</dl>
<div style="margin-left: 9.00ex;"><b>WIDE, RELAY, TRACE, TCPIP, TCPXX, NOCALL,
  N0CALL</b></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx Rx-iGate Drops all <i>query</i> messages
      (&quot;?&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx Rx-iGate opens up all 3rd party messages
      (&quot;}&quot;), and checks the internal data if it is OK to be gated out
      to APRS-IS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx has built-in &quot;Erlang monitor&quot; mechanism
      that telemeters each receiving interface to APRS-IS. It can also syslog
      the interface specific channel occupancy, and optionally can output to
      STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx (since version 1.91) can do digipeater
    functions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx (since version 1.99) does have experimental D-STAR
      D-PRS to APRS gateway functionality. See the <i>aprx-manual.pdf</i> for
      details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The Aprx can be run on systems without writable storage,
      even with very little memory, like on NSLU2, and OpenWrt platforms. The
      experiments have shown that a single radio Tx-iGate+digipeater works with
      less than 300 kB of writable RAM for the Aprx itself. Additional memory is
      necessary for operating system services of TCP/IP networking, and serial
      port drivers.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <b>aprx</b> has following runtime options:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">Keep the program foreground without debugging outputs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Turn on verbose debugging, outputs data to STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dd</b></dt>
  <dd class="It-tag">the &quot;more debug&quot; mode shows also details of
      network interaction with the APRS-IS network service.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ddd</b></dt>
  <dd class="It-tag">the &quot;even more debug&quot; mode shows also detail
      classification of every kind of frame received in KISS variants.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag"><i>Erlang output</i> prints 10 minute and 60 minute traffic
      accumulation byte counts, and guestimates on channel occupancy, alias
      &quot;Erlang&quot;. These outputs are sent to STDOUT, which system
      operator may choose to log elsewere. This is independent if the
      &quot;-l&quot; option below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f </b><i>/etc/aprx.conf</i></dt>
  <dd class="It-tag">Configuration file, given path is built-in default, and can
      be overridden by the program runner.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b> <i>syslogfacilityname</i></dt>
  <dd class="It-tag">Defines syslog<b>(3)</b> facility code used by the erlang
      reporter by defining its name. Default value is: <b>NONE</b>, and accepted
      values are: <b>LOG_DAEMON</b>, <b>LOG_FTP</b>, <b>LOG_LPR</b>,
      <b>LOG_MAIL</b>, <b>LOG_NEWS</b>, <b>LOG_USER</b>, <b>LOG_UUCP</b>,
      <b>LOG_LOCAL0</b>, <b>LOG_LOCAL1</b>, <b>LOG_LOCAL2</b>,
      <b>LOG_LOCAL3</b>, <b>LOG_LOCAL4</b>, <b>LOG_LOCAL5</b>,
      <b>LOG_LOCAL6</b>, <b>LOG_LOCAL7</b>. That list is subject to actual
      facility code set in the system, and in any case if you specify a code
      that is not known, then the program will complain during the startup, and
      report it. This is independent of the &quot;-e&quot; option above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Verbose logging of received traffic to STDOUT. Lines begin
      with reception timestamp (UNIX time_t seconds), then TAB, and either data
      as is, or with prefix byte: &quot;*&quot; for &quot;discarded due to data
      content&quot;, or possibly &quot;#&quot; for &quot;discarded due to
      APRS-IS being unreachable&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">Print source version compiled to this binary, and
    exit.</dd>
</dl>
<h2 class="Ss" title="Ss" id="DEBUGGING_SYSTEM"><a class="selflink" href="#DEBUGGING_SYSTEM">DEBUGGING
  SYSTEM</a></h2>
Use parameter set <b>-ddv</b> (or <b>-dddv</b>) to test new configuration by
  running it synchronously to console.
<h2 class="Ss" title="Ss" id="NORMAL_OPERATION"><a class="selflink" href="#NORMAL_OPERATION">NORMAL
  OPERATION</a></h2>
Running the <b>aprx</b> program without any of option flags: <b>-d</b>,
  <b>-v</b>, or <b>-e</b> reads possibly given configuration, then automatically
  backgrounds the process, and writes <i>pidfile</i>. When the process whose
  number written in <i>pidfile</i> is then sent a SIGTERM signal, it
  automatically shuts down itself, and removes the <i>pidfile</i>. The
  <i>pidfile</i> can be runtime configured with the <b>-f</b><i>
  /etc/aprx.conf</i> file, and it has default name of: <i>/var/run/aprx.pid</i>.
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILE"><a class="selflink" href="#CONFIGURATION_FILE">CONFIGURATION
  FILE</a></h1>
The configuration file is used to setup the program to do its job.
<div class="Pp"></div>
You can construct following configurations:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A <i>receive-only</i> iGate server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A digipeater with bi-directional iGate server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A <i>single radio</i> digipeater. (The most common type of
      digipeater.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A <i>multi-interfaced</i> digipeater relaying traffic in
      between multiple radios. (On same or on separate frequencies.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A <i>viscuous digipeater,</i> which relays a packet it
      heard from viscuous source after the viscuous delay, <i>unless it was
      heard more times than only once,</i> or it was heard from non-viscuous
      source before the viscuous one was digipeated. This allows of making
      fill-in digipeaters that will not digipeat the packet, if that same packet
      was heard twice or more before the viscuos delay expired.</dd>
</dl>
<div class="Pp"></div>
In the configuration file a line ending backslash (\) character concatenates
  next input line into itself. Combined result can be up to 8000 bytes long.
  This combination can be a bit surprising:
<div style="margin-left: 3.00ex;">
<pre>
#beacon .... long text  \
       continuation
</pre>
</div>
results in single long input line that begins with '#' (it is comment) and all
  continuations following it have been folded in. Presented line number of
  combined continuation is the line number of the <i>last</i> line segment in
  this type of multi-line input.
<div class="Pp"></div>
In the configuration file there is special treatment for quoted strings. They
  are stripped of the outer quotes, and &quot;\&quot; character is processed
  within the source string to produce an output string. The escapes are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>\n</b></dt>
  <dd class="It-tag">Produces newline character (Control-J) on the output
      string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>\r</b></dt>
  <dd class="It-tag">Produces carriage return character (Control-M) on the
      output string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>\\</b></dt>
  <dd class="It-tag">Places a back-slash on the output string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>\&quot;</b></dt>
  <dd class="It-tag">Places a double-quote on the output string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>\'</b></dt>
  <dd class="It-tag">Places a single-quote on the output string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>\xHH</b></dt>
  <dd class="It-tag">Lower-case &quot;x&quot; precedes two hex digits which
      ensemble is then converted to a single byte in the output string.</dd>
</dl>
<div class="Pp"></div>
The complex encodings are for possible initstrings of the external devices, and
  in particular for initstrings even a nul byte ( \x00 ) is supported.
<div class="Pp"></div>
A configuration token without surrounding quotes does not understand the
  backslash escapes.
<div class="Pp"></div>
<pre>
#
#  Sample configuration file for the APRX -- an Rx-only APRS iGate with
#  Digipeater functionality.
#
#
# Simple sample configuration file for the APRX-2
#
# This configuration is structured with Apache HTTPD style tags
# which then contain subsystem parameters.
#
<div class="Pp"></div>
#
# For simple case, you need to adjust 4 things:
#   - Mycall parameter
#   - Select correct type of interface (ax25-device or serial-device)
#   - Optionally set a beacon telling where this system is
#   - Optionally enable digipeater with or without tx-igate
#
<div class="Pp"></div>
#
#
# Define the parameters in following order:
#   1)  &lt;aprsis&gt;     ** zero to many
#   2)  &lt;logging&gt;    ** zero or one
#   3)  &lt;interface&gt;  ** one to many
#   4)  &lt;beacon&gt;     ** zero to many
#   5)  &lt;telemetry   ** zero to many
#   6)  &lt;digipeater&gt; ** zero to many (at most one for each Tx)
#
<div class="Pp"></div>
#
# Global macro for simplified callsign definition:
# Usable for 99+% of cases.
#
<div class="Pp"></div>
mycall  N0CALL-1
<div class="Pp"></div>
#
# Global macro for simplified &quot;my location&quot; definition in
# place of explicit &quot;lat nn lon mm&quot; at beacons. Will also
# give &quot;my location&quot; reference for &quot;filter m/100&quot;.
#
#myloc lat ddmm.mmN lon dddmm.mmE
<div class="Pp"></div>
&lt;aprsis&gt;
# The  login  parameter: 
# Station call-id used for relaying APRS frames into APRS-IS.
# Use this only to define other callsign for APRS-IS login.
#
#login      OTHERCALL-7  # login defaults to $mycall
<div class="Pp"></div>
#
# The passcode parameter:
# Unique code for your callsign to allow transmitting packets
# into the APRS-IS.
#
passcode -1
<div class="Pp"></div>
<div class="Pp"></div>
<div class="Pp"></div>
# APRS-IS server name and portnumber.
# Every reconnect does re-resolve the name to IP address.
# Some alternates are shown below, choose something local to you.
#
server    rotate.aprs2.net    14580
#server    noam.aprs2.net     14580
#server    soam.aprs2.net     14580
#server    euro.aprs2.net     14580
#server    asia.aprs2.net     14580
#server    aunz.aprs2.net     14580
<div class="Pp"></div>
# Some APRS-IS servers tell every about 20 seconds to all contact
# ports that they are there and alive. Others are just silent.
# Recommended value 3*&quot;heartbeat&quot; + some  -&gt; 120 (seconds)
#
#heartbeat-timeout  0  # Disabler of heartbeat timeout
<div class="Pp"></div>
# APRS-IS server may support some filter commands.
# See:  http://www.aprs-is.net/javAPRSFilter.aspx
#
# You can define the filter as single long quoted string, or as
# many short segments with explaining comments following them.
#
# Usability of these filters for a Tx-iGate is dubious, but
# they exist in case you for example want to Tx-iGate packets
# from some source callsigns in all cases even when they are
# not in your local area.
#
#filter &quot;possibly multiple filter specs in quotes&quot;
#
#filter &quot;m/100&quot;          # My-Range filter
#filter &quot;f/OH2XYZ-3/50&quot;  # Friend-Range filter
&lt;/aprsis&gt;
<div class="Pp"></div>
<div class="Pp"></div>
&lt;logging&gt;
# pidfile is UNIX way to tell that others that this program is
# running with given process-id number.  This has compiled-in
# default value of:  pidfile /var/run/aprx.pid
#
#pidfile /var/run/aprx.pid
<div class="Pp"></div>
# rflog defines a rotatable file into which all RF-received packets
# are logged.
#
#rflog /var/log/aprx/aprx-rf.log
<div class="Pp"></div>
# aprxlog defines a rotatable file into which most important 
# events on APRS-IS connection are logged, namely connects and
# disconnects.
#
#aprxlog /var/log/aprx/aprx.log
<div class="Pp"></div>
# erlangfile defines a mmap():able binary file, which stores
# running sums of interfaces upon which the channel erlang
# estimator runs, and collects data.
# Depending on the system, it may be running on a filesystem
# that actually retains data over reboots, or it may not.
# With this backing store, the system does not loose cumulating
# erlang data over the current period, if the restart is quick,
# and does not stradle any exact minute.
# (Do restarts at 15 seconds over an even minute..)
# This file is around 0.7 MB per each interface talking APRS.
# If this file is not defined and can not be created,
# internal non-persistent in-memory storage will be used.
#
# Built-in default value is: /var/run/aprx.state
#
#erlangfile /var/run/aprx.state
<div class="Pp"></div>
# erlang-loglevel is config file edition of the &quot;-l&quot; option
# pushing erlang data to syslog(3).
# Valid values are (possibly) following: NONE, LOG_DAEMON,
# LOG_FTP, LOG_LPR, LOG_MAIL, LOG_NEWS, LOG_USER, LOG_UUCP,
# LOG_LOCAL0, LOG_LOCAL1, LOG_LOCAL2, LOG_LOCAL3, LOG_LOCAL4,
# LOG_LOCAL5, LOG_LOCAL6, LOG_LOCAL7.  If the parameter value is
# not acceptable, list of accepted values are printed at startup.
#
#erlang-loglevel NONE
<div class="Pp"></div>
# erlanglog defines a rotatable file into which erlang data
# is written in text form.
#
#erlanglog /var/log/aprx/erlang.log
<div class="Pp"></div>
# erlang-log1min option logs to syslog/file also 1 minute
# interval data from the program. (In addition to 10m and 60m.)
#
#erlang-log1min
&lt;/logging&gt;
<div class="Pp"></div>
<div class="Pp"></div>
<div class="Pp"></div>
# ***********  Multiple &lt;interface&gt; definitions can follow   *********
<div class="Pp"></div>
# ax25-device  Lists AX.25 ports by their callsigns that in Linux
#              systems receive APRS packets.  If none are defined,
#              or the system is not Linux, the AX.25 network receiver
#              is not enabled.  Used technologies need at least
#              Linux kernel 2.4.x
#
# tx-ok        Boolean telling if this device is able to transmit.
#
#&lt;interface&gt;
#   ax25-device $mycall  # Either $mycall macro, or actual callsign
#   #tx-ok      false  # transmitter enable defaults to false
#   #telem-to-is true # set to false to disable
#&lt;/interface&gt;
<div class="Pp"></div>
# The  TNC serial  options.  Parameters are:
#   - /dev/ttyUSB1    -- tty device
#   - 19200           -- baud rate, supported ones are:
#                        1200, 2400, 4800, 9600, 19200, 38400, ...
#   - 8n1             -- 8-bits, no parity, one stop-bit,
#                        no other supported modes
#   - &quot;KISS&quot;                  - plain basic KISS mode
#   - &quot;XORSUM&quot; alias &quot;BPQCRC&quot; - KISS with BPQ &quot;CRC&quot; byte
#   - &quot;SMACK&quot;  alias &quot;CRC16&quot;  - KISS with real CRC
#   - &quot;FLEXNET&quot;               - KISS with real CRC
#   - &quot;TNC2&quot;                  - TNC2 monitor format
#   - &quot;DPRS&quot;                  - DPRS (rx) Gateway
#
#&lt;interface&gt;
#   serial-device /dev/ttyUSB0  19200 8n1    KISS
#   #callsign     $mycall  # Either $mycall macro, or actual callsign
#   #tx-ok        false    # transmitter enable defaults to false
#   #telem-to-is true # set to false to disable
#&lt;/interface&gt;
#
#&lt;interface&gt;
#   serial-device /dev/ttyUSB1  19200 8n1    TNC2
#   #callsign     $mycall  # Either $mycall macro, or actual callsign
#   #tx-ok        false    # TNC2 monitor can not have transmitter
#   #telem-to-is true # set to false to disable
#&lt;/interface&gt;
#
#&lt;interface&gt;
#   serial-device /dev/ttyUSB1  19200 8n1    DPRS
#   callsign     dprsgwcallsign  # must define actual callsign
#   #tx-ok        false    # DPRS monitor can not do transmit
#   #telem-to-is true # set to false to disable
#&lt;/interface&gt;
#
<div class="Pp"></div>
<div class="Pp"></div>
# ***********  Multiple &lt;beacon&gt;  definitions can follow   *********
&lt;beacon&gt;
#
#  Beacons are sent out to radio transmitters AND/OR APRSIS.
#  Default is &quot;both&quot;, other modes are settable.
#
#beaconmode { aprsis | both | radio }
#
#  Beacons are sent from a circullar transmission queue, total cycle time
#  of that queue is 20 minutes by default, and beacons are &quot;evenly&quot;
#  distributed along it.  Actual intervals are randomized to be anything
#  in between 80% and 100% of the  cycle-size / number-of-beacons.
#  First beacon is sent out 30 seconds after system start.
#  Tune the cycle-size to be suitable to your number of defined beacons.
#
#cycle-size  20m
#
#
# Basic beaconed thing is positional message of type &quot;!&quot;:
#
#beacon symbol &quot;R&amp;&quot; lat &quot;0000.00N&quot; lon &quot;00000.00E&quot; comment &quot;Rx-only iGate&quot;
#beacon symbol &quot;R&amp;&quot; $myloc comment &quot;Rx-only iGate&quot;
#
# Following are basic options:
#  'symbol'    no default, must be defined!
#  'lat'       coordinate latitude:   ddmm.mmN  (no default!)
#  'lon'       coordinate longitude: dddmm.mmE  (no default!)
#  '$myloc'    coordinate values taken from global 'myloc' entry,
#              and usable in place of explicit 'lat'+'lon'.
#  'comment'   optional tail part of the item, default is nothing
#
# Sample symbols:
#   R&amp;   is for &quot;Rx-only iGate&quot;
#   I&amp;   is for &quot;Tx-iGate&quot;
#   /#   is for &quot;Digipeater&quot;
#   I#   is for &quot;Tx-iGate + Digipeater&quot;
#
# Additional options are:
# 'srccall'   parameter sets claimed origination address.
# 'dstcall'   sets destination address, default &quot;APRXnn&quot;
# 'interface' parameter picks an interface (must be &quot;tx-ok true&quot; type)
# 'via'       sets radio distribution pattern, default: none.
# 'timefix'  On APRS messages with HMS timestamp (hour:min:sec), the
#            system fixes appropriate field with transmit time timestamp.
#
# Message type is by default '!', which is positional no timestamp format.
# Other possible formats are definable with options:
# 'type'   Single character setting type:  ! = / @ 
# 'item'   Defines a name of Item (')') type beacons.
# 'object' Defines a name of Object (';') type beacons.
#
# 'file' option tells a file at which a _raw_ APRS message content is
#        expected to be found as first line of text. Line ending newline
#        is removed, and no escapes are supported.  The timefix is
#        available, though probably should not be used.
#
# 'exec' option defines program path for a program whose stdout is
#        read up to first newline (which must be present), and then
#        transmit as beacon content. No format helpers are supplied,
#        although 'timefix' can be used.
# 'timeout' option is associated with 'exec', and defines when the
#        exec must by latest produce the output, or the subprogram
#        execution is killed. Default value is 10 seconds.
#
# The parameter sets can vary:
#  a) 'srccall nnn-n dstcall &quot;string&quot; symbol &quot;R&amp;&quot; lat &quot;ddmm.mmN&quot; lon &quot;dddmm.mmE&quot; [comment &quot;any text&quot;]
#  b) 'srccall nnn-n dstcall &quot;string&quot; raw &quot;string&quot;'
#
# The a) form flags on some of possible syntax errors in parameters.
# It will also create only &quot;!&quot; type messages.  The dest parameter
# defaults to &quot;APRS&quot;, but can be used to give other destinations.
# The via parameter can be used to add other keywords, like &quot;NOGATE&quot;.
#
# Writing correct RAW format beacon message is very hard,
# which is evidenced by the frequency of bad syntax texts
# people so often put there...   If you can not be persuaded
# not to do it, then at least VERIFY the beacon result on
# web service like  findu.com,  or  aprs.fi
#
#beacon                 file /tmp/wxbeacon.txt
#beacon srccall N0CALL-3 raw &quot;!0000.00NR00000.00E&amp;aprx - an Rx-only iGate&quot;
#beacon srccall N0CALL-3 raw &quot;!0000.00NI00000.00E&amp;aprx - an iGate&quot;
#beacon srccall $mycall symbol &quot;R&amp;&quot; lat &quot;0000.00N&quot; lon &quot;00000.00E&quot;  \
                        comment &quot;aprx - an Rx-only iGate&quot;
#beacon srccall $mycall symbol &quot;I&amp;&quot; lat &quot;0000.00N&quot; lon &quot;00000.00E&quot;  \
                        comment &quot;aprx iGate&quot;
&lt;/beacon&gt;
<div class="Pp"></div>
# ***********  &lt;telemetry&gt;  definition(s) follow   *********
#
# The system will always send telemetry for all of its interfaces
# to APRSIS, but there is an option to define telemetry to be sent
# to radio channel by using following sections for each transmitter
# that is wanted to send out the telemetry.
#
#   transmitter   -  callsign referring to &lt;interface&gt;
#   via           -  optional via-path, only 1 callsign!
#   source        -  one or more of &lt;interface&gt; callsigns for which
#                    the telemetry transmission is wanted for
#
#&lt;telemetry&gt;
#	transmitter	$mycall
#	via		TRACE1-1
#	source		$mycall
#&lt;/telemetry&gt;
<div class="Pp"></div>
<div class="Pp"></div>
# ***********  &lt;digipeater&gt;  definition(s) follow   *********
#
#  The digipeater definitions tell transmitters that receive
#  AX.25 packets from possibly multiple sources, and then what
#  to do on the AX.25 headers of those messages.
#
#  There is one transmitter per digipeater -- and inversely, there
#  can be at most one digipeater for each transmitter.
#
#  In each digipeater there is at least one &lt;source&gt;, usually same
#  as the transmitter.
#
#&lt;digipeater&gt;
#    transmitter     $mycall
#    #ratelimit      60 120      # default: average 60 packets/minute,
#                                #          burst max 120 packets/minute
#    #srcratelimit   10 20       # Example: by sourcecall:
#                                #          average 10 packets/minute,
#                                #          burst max 20 packets/minute
#
#    &lt;source&gt;
#        source         $mycall
#    #   ratelimit      60 120      # default: average 60 packets/minute,
#    #                              #          burst max 120 packets/minute
#    #   viscous-delay  0     # no viscous delay for RF-&gt;RF digipeat
#    #   ratelimit      120   # default: max 120 packets/minute
#    &lt;/source&gt;
#
#    #&lt;source&gt;          # Adding APRSIS source makes this tx-igate
#    #   source        APRSIS
#    #   ratelimit      60 120      # default: average 60 packets/minute,
#    #                              #          burst max 120 packets/minute
#    #   relay-type    third-party  # Must define this for APRSIS source!
#    #   viscous-delay  5 # Recommendation: 5 seconds delay to give
#    #                    # RF delivery time make itself known.
#    #   filter         t/m  # Tx-iGate only messages sent to me by APRSIS
#    #&lt;/source&gt;
#
#&lt;/digipeater&gt;
</pre>
<h1 class="Sh" title="Sh" id="GLOBAL_MYCALL_PARAMETER"><a class="selflink" href="#GLOBAL_MYCALL_PARAMETER">GLOBAL
  MYCALL PARAMETER</a></h1>
In majority of usage models, system needs single configured callsign. This is
  set by using the <b>mycall</b> configuration option, and latter referred to in
  configurations as <b>$mycall</b> parameter in place of callsigns.
<h1 class="Sh" title="Sh" id="GLOBAL_MYLOC_PARAMETER"><a class="selflink" href="#GLOBAL_MYLOC_PARAMETER">GLOBAL
  MYLOC PARAMETER</a></h1>
Usually multiple beacons, and simple filter rules are wanted to be using same
  reference coordinate for this system. This is set by using the <b>myloc</b>
  configuration option, and latter referred to in configurations as
  <b>$myloc</b> parameter in place of &quot;lat nn lon mm&quot; coordinate pair
  of beacons.
<h1 class="Sh" title="Sh" id="APRSIS_SECTION_FOR_APRSIS_CONNECTIVITY"><a class="selflink" href="#APRSIS_SECTION_FOR_APRSIS_CONNECTIVITY">APRSIS
  SECTION FOR APRSIS CONNECTIVITY</a></h1>
Settings in the <b>&lt;aprsis&gt;</b> section define connectivity with the
  APRS-IS network service.
<div class="Pp"></div>
Necessary option is <i>server</i>, and others are optional.
<div class="Pp"></div>
Available options are:
<dl class="Bl-tag">
  <dt class="It-tag">login $mycall</dt>
  <dd class="It-tag">The APRSIS network login. Defaults to the <b>mycall</b>
      configuration entry.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">passcode -1</dt>
  <dd class="It-tag">Defining a small integer in range of 0 to 32767
      authenticating your login to APRS-IS server. Ask for assistance from your
      APRS-IS managers, or calculate it yourself with <i>aprspass</i> program.
      (Web search engines do find several of them.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">server <i>server-name 14850</i></dt>
  <dd class="It-tag">Define which APRS-IS is being connected to. Multiple
      definitions are used in round-robin style, if the connection with the
      previous one fails for some reason.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">filter <i>'filter specs in quotes'</i> #
    <i>comments</i></dt>
  <dd class="It-tag">Set filter adjunct definitions on APRS-IS server. Multiple
      entries are catenated together in entry order, when connecting to the
      server.</dd>
</dl>
<h1 class="Sh" title="Sh" id="LOGGING_SECTION"><a class="selflink" href="#LOGGING_SECTION">LOGGING
  SECTION</a></h1>
The <b>&lt;logging&gt;</b> section defines miscellaneous file names and options
  for state tracking and logging use.
<dl class="Bl-tag">
  <dt class="It-tag">pidfile <i>/var/run/aprx.pid</i></dt>
  <dd class="It-tag">The pidfile is UNIX way to tell that others that this
      program is running with given process-id number. This has compiled-in
      default value of: pidfile /var/run/aprx.pid</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">rflog <i>/var/log/aprx/aprx-rf.log</i></dt>
  <dd class="It-tag">The <i>rflog</i> defines a rotatable file into which all
      RF-received packets are logged. There is no default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">aprxlog <i>/var/log/aprx/aprx.log</i></dt>
  <dd class="It-tag">The <i>aprxlog</i> defines a rotatable file into which most
      important events on APRS-IS connection are logged, namely connects and
      disconnects. There is no default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">erlangfile <i>/var/run/aprx.state</i></dt>
  <dd class="It-tag">The <i>erlangfile</i> defines a mmap():able binary file,
      which stores running sums of interfaces upon which the channel erlang
      estimator runs, and collects data. Depending on the system, it may be
      running on a filesystem that actually retains data over reboots, or it may
      not. With this backing store, the system does not loose cumulating erlang
      data over the current period, if the restart is quick, and does not
      stradle any exact minute. This file is around 0.7 MB per each interface
      talking APRS. If this file is not defined and can not be created, internal
      non-persistent in-memory storage will be used. Built-in default value is:
      /var/run/aprx.state</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">erlang-loglevel <i>NONE</i></dt>
  <dd class="It-tag">The <i>erlang-loglevel</i> is config file edition of the
      &quot;-l&quot; option pushing erlang data to <i>syslog</i>(3). Valid
      values are (possibly) following: NONE, LOG_DAEMON, LOG_FTP, LOG_LPR,
      LOG_MAIL, LOG_NEWS, LOG_USER, LOG_UUCP, LOG_LOCAL0, LOG_LOCAL1,
      LOG_LOCAL2, LOG_LOCAL3, LOG_LOCAL4, LOG_LOCAL5, LOG_LOCAL6, LOG_LOCAL7. If
      the parameter value is not acceptable, list of accepted values are printed
      at startup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">erlanglog <i>/var/log/aprx/erlang.log</i></dt>
  <dd class="It-tag">The erlanglog defines a rotatable file into which erlang
      data is written in text form. There is no default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">erlang-log1min</dt>
  <dd class="It-tag">The <i>erlang-log1min</i> option logs to syslog/file also 1
      minute interval data from the program. (In addition to 10m and 60m.)
      Default is off.</dd>
</dl>
<h1 class="Sh" title="Sh" id="INTERFACE_SECTIONS_FOR_RADIO_PORTS"><a class="selflink" href="#INTERFACE_SECTIONS_FOR_RADIO_PORTS">INTERFACE
  SECTIONS FOR RADIO PORTS</a></h1>
The <b>&lt;interface&gt;</b> sections define connections to radio modems.
  Several different styles are available:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Local serial ports in the machine (<b>device-serial
      /dev/ttyS0 </b><i>speed encapsulation</i>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Local USB serial ports in the machine (<b>device-serial
      /dev/ttyUSB0 </b><i>speed encapsulation</i>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Remote served serial ports over a TCP stream. Implemented
      to talk with Cisco AUX ports on &quot;range 4000&quot; (TCP STREAM, no
      TELNET escapes) (<b>tcp-device 12.34.56.78 4001
    </b><i>encapsulation</i>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Linux internal AX.25 network attached devices
      (<b>ax25-device CALLSIGN-1</b>) are only available when running on a Linux
      system. On a non-Linux system it connects to a null interface, never
      getting anything and can always sink everything.</dd>
</dl>
<div class="Pp"></div>
The serial port name tells what kind of port is in question, and while port
  baud-rate (9600) and character settings (8n1) must always be set, they are
  ignored for the remote connection.
<div class="Pp"></div>
Following <i>speed</i> modes are available:
<div>&#x00A0;</div>
<b> 1200,</b> <i>1800,</i> <b>2400, 4800, 9600, 19200,</b> <i>38400, 57600,</i>
<div>&#x00A0;</div>
<i> 115200, 230400, 460800, 500000, 576000</i>
<div>&#x00A0;</div>
Likely available speeds are in bold, other supported values are listed in
  italics.
<div class="Pp"></div>
Following <i>encapsulation</i> modes are available:
<dl class="Bl-tag">
  <dt class="It-tag"><b>TNC2</b></dt>
  <dd class="It-tag">is capable only to monitor the packets reported by TNC2
      type debug output, and Rx-iGate, but they are not acceptable as source for
      a &lt;digipeater&gt;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DPRS</b></dt>
  <dd class="It-tag">is special mode for gateway from D-STAR D-PRS to APRS. This
      must always have a callsign definition for the gateway.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>KISS</b></dt>
  <dd class="It-tag">Basic KISS encapsulation. No checksums. Will autodetect
      (sometimes) packets with SMACK or FLEXNET characteristics.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SMACK</b></dt>
  <dd class="It-tag"><i>Stuttgart Modified Amateurradio-CRC-KISS</i>, which runs
      CRC-16 checksum on KISS datastream much in the same way as HDLC has
      CCITT-CRC checksum on it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FLEXNET</b></dt>
  <dd class="It-tag"><i>FLEXNET</i> which runs a CRC checksum of its own
      polynomial on KISS datastream much in the same way as HDLC has CCITT-CRC
      checksum on it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BPQCRC</b></dt>
  <dd class="It-tag">XOR &quot;checksum&quot; on dataframes. Also known as
      &quot;XKISS&quot;, and &quot;XORSUM&quot;. This detects single bit
      failure, but weakly any multibit failures. Extra 0x00 bytes have no effect
      on checksum, etc.</dd>
</dl>
<div class="Pp"></div>
On <b>&lt;kiss-subif </b><i>tncid</i><b>&gt;</b> sub-options the parameter is
  <i>tncid</i>, which sets up KISS multiplexer parameter so that subsequent
  options applies only on designated KISS sub-port.
<div class="Pp"></div>
The <i>callsign</i> option sets port specific callsign when relaying to APRS-IS.
<div class="Pp"></div>
The <i>telem-to-is true</i> option can be used to disable (by explicitly setting
  it to 'false') radio interface telemetry transmission to APRS-IS. By default
  it is on. This is separate from &lt;telemetry&gt; sections, which send
  telemetry to RF interfaces.
<div class="Pp"></div>
<pre>
&lt;interface&gt;
   serial-device /dev/ttyUSB1 19200 8n1 KISS
   tx-ok         false          # receive only (default)
   callsign      OH2XYZ-R2      # KISS subif 0
   initstring    &quot;....&quot;         # initstring option
   timeout       900            # 900 seconds of no Rx
&lt;/interface&gt;
<div class="Pp"></div>
&lt;interface&gt;
   serial-device /dev/ttyUSB1 19200 8n1 SMACK
   tx-ok         false          # receive only (default)
   callsign      OH2XYZ-R2      # KISS subif 0
   initstring    &quot;....&quot;         # initstring option
   timeout       900            # 900 seconds of no Rx
&lt;/interface&gt;
<div class="Pp"></div>
&lt;interface&gt;
   serial-device /dev/ttyUSB2 19200 8n1 KISS
   initstring    &quot;....&quot;
   timeout       900            # 900 seconds of no Rx
   &lt;kiss-subif 0&gt;
      callsign OH2XYZ-2
      tx-ok    true             # This is our transmitter
   &lt;/kiss-subif&gt;
   &lt;kiss-subif 1&gt;
      callsign OH2XYZ-R3        # This is receiver
      tx-ok    false            # receive only (default)
   &lt;/kiss-subif&gt;
&lt;/interface&gt;
<div class="Pp"></div>
&lt;interface&gt;
   tcp-device   172.168.1.1 4001 KISS
   tx-ok         false          # receive only (default)
   callsign      OH2XYZ-R4      # KISS subif 0
   initstring    &quot;....&quot;         # initstring option
   timeout       900            # 900 seconds of no Rx
&lt;/interface&gt;
<div class="Pp"></div>
&lt;interface&gt;
   ax25-device OH2XYZ-6         # Works only on Linux systems
   tx-ok       true             # This is also transmitter
&lt;/interface&gt;
<div class="Pp"></div>
&lt;interface&gt; #  <b>RX-IGATE ONLY, NOT USABLE AS DIGIPEATER SOURCE</b>
   serial-device /dev/ttyUSB1 19200 8n1 TNC2
   callsign      OH2XYZ-R6      # TNC2 has no sub-ports
   initstring    &quot;....&quot;         # initstring option
   timeout       900            # 900 seconds of no Rx
&lt;/interface&gt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BEACON_DEFINITIONS"><a class="selflink" href="#BEACON_DEFINITIONS">BEACON
  DEFINITIONS</a></h1>
The beacons are defined using <b>&lt;beacon&gt;</b> configuration sections.
<div class="Pp"></div>
Because classical beacon definitions are highly error-prone, this program has a
  new way to define them:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The new way to define beacons:
    <pre>
beacon symbol &quot;R&amp;&quot; lat &quot;0000.00N&quot; lon &quot;00000.00E&quot;  \
       comment &quot;aprx - iGate&quot; 
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Semi-clasical definition of raw APRS packet:
    <pre>
beacon raw &quot;!0000.00NR00000.00E&amp;aprx - iGate&quot;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Load beacon text from a file, path data is configurable:
    <pre>
beacon file  <i>/path/to/file</i>
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Run a program to produce beacon data in raw format:
    <pre>
beacon exec  <i>/path/to/file</i> timeout <i>10</i> 
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
The fields and parameters:
<dl class="Bl-tag">
  <dt class="It-tag"><b>interface</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;interface&quot; parameter tells
      that this beacon shall be sent only to interface whose callsign is named.
      Default is to send to all interfaces that have &quot;tx-ok true&quot;
      setting.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>type</b></dt>
  <dd class="It-tag">An <i>optional</i> one character string parameter, with one
      of following contents: &quot;!&quot;, &quot;=&quot;, &quot;/&quot;,
      &quot;@&quot;, &quot;;&quot; and &quot;)&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>srccall</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;srccall&quot; parameter tells
      callsign which is claimed as this particular beacon source. It must be
      valid AX.25 callsign in text format. When this &quot;srccall&quot;
      parameter is not given, value of &quot;mycall&quot; configuration entry is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dstcall</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;dstcall&quot; parameter has
      built-in software version dependent value, but it can be used to define
      another value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>via</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;via&quot; parameter defaults to
      nothing, but can be used to define additional &quot;VIA&quot; path tokens,
      for example: &quot;WIDE1-1&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>item</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;item&quot; parameter is for
      defining a name for an item type APRS packet.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>object</b></dt>
  <dd class="It-tag">An <i>optional</i> &quot;object&quot; parameter is for
      defining a name for an object type APRS packet.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>symbol</b></dt>
  <dd class="It-tag">A <i>mandatory</i> &quot;symbol&quot; parameter is two
      character code, which for Rx-only iGate is pair: &quot;R&amp;&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lat</b></dt>
  <dd class="It-tag">This <i>mandatory</i> parameter defines <i>latitude</i>
      coordinate (that is: north/south.) It is expected to be of format:
      &quot;ddmm.mmN&quot; where &quot;dd&quot; defines <i>two digits</i> of
      <i>degrees</i> of latitude, and &quot;mm.mm&quot; defines two digits +
      decimal dot + two digits of <i>minutes</i> of latitude. Then comes literal
      &quot;N&quot; or &quot;S&quot; indicating hemisphere.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lon</b></dt>
  <dd class="It-tag">This <i>mandatory</i> parameter defines <i>longitude</i>
      coordinate (that is: east/west.) It is expected to be of format:
      &quot;dddmm.mmE&quot; where &quot;ddd&quot; defines <i>three digits</i> of
      <i>degrees</i> of longitude, and &quot;mm.mm&quot; defines two digits +
      decimal dot + two digits of <i>minutes</i> of longitude. Then comes
      literal &quot;E&quot; or &quot;W&quot; indicating hemisphere.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>comment</b></dt>
  <dd class="It-tag">This <i>optional</i> parameter defines commentary text tail
      on the beacon packet. If you need characters outside US-ASCII character
      set, use of UTF-8 encoded UNICODE character set is recommended.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raw</b></dt>
  <dd class="It-tag">This <i>alternate</i> format defines whole APRS packet
      content in raw text format. <i>Currently this type of packets are not
      validated for syntax at all!</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>file</b></dt>
  <dd class="It-tag">This <i>alternative</i> way defines path to a file with
      single text line defining content of <i>raw</i> message data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>exec</b></dt>
  <dd class="It-tag">This <i>alternative</i> mode runs designated program, and
      waits for at most a <i>timeout</i> number of seconds (default 10) for the
      program to produce the result.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>timeout</b></dt>
  <dd class="It-tag">This is optional parameter for <i>exec</i> allowing altered
      timeout (number of seconds) for waiting the program to respond. Default is
      10 seconds.</dd>
</dl>
<div class="Pp"></div>
The type/symbol/lat/lon/comment-format supports only a few types of APRS
  packets. It splits input into small slices that are possible to validate in
  detail. (See &quot;DEBUGGING SYSTEM&quot; above.)
<h1 class="Sh" title="Sh" id="RF-TELEMETRY"><a class="selflink" href="#RF-TELEMETRY">RF-TELEMETRY</a></h1>
The <i>aprx</i> system will always send telemetry for all of its interfaces to
  APRSIS, but there is an option to define telemetry to be sent to radio channel
  by using following sections for each transmitter that is wanted to send out
  the telemetry.
<div class="Pp"></div>
The parameters of <b>&lt;telemetry&gt;</b> configuration section are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>transmitter</b></dt>
  <dd class="It-tag">A mandatory callsign referring to an <i>interface.</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>via</b></dt>
  <dd class="It-tag">An optional <i>via-path</i> parameter. Only 1
    callsign!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>source</b></dt>
  <dd class="It-tag">One or more of <i>interface</i> callsigns for which the
      telemetry transmission is made.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DIGIPEATER"><a class="selflink" href="#DIGIPEATER">DIGIPEATER</a></h1>
The <i>aprx</i> is possible to configure as a AX.25 digipeater with APRS twists.
  This is done with <b>&lt;digipeater&gt;</b> configuration section and its
  subsections.
<div class="Pp"></div>
<i>There can be at most one &lt;digipeater&gt; definition per each</i>
  <i>transmit capable interface in the system.</i> <i>On a system with multiple
  transmitters, this means there can</i> <i>be multiple digipeaters, each with
  different behaviour rules.</i>
<div class="Pp"></div>
Minimalistic setup for a digipeater will be as follows:
<div class="Pp"></div>
<pre>
&lt;digipeater&gt;
    transmitter     $mycall
    &lt;source&gt;
        source      $mycall
    &lt;/source&gt;
&lt;/digipeater&gt;
</pre>
<div class="Pp"></div>
In minimalistic approach the system does digipeating of packets heard on the
  <i>$mycall</i> interface back to same interface. Single requirement is that
  the <i>&lt;interface&gt;</i> block has <i>tx-ok true</i> setting on it.
<div class="Pp"></div>
In more complicated approaches it is possible to define multiple sources for
  packets:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Multiple device ports.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">APRSIS pseudoport, which creates the Tx-iGate
      functionality.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&lt;digipeater&gt;_options"><a class="selflink" href="#&lt;digipeater&gt;_options">&lt;digipeater&gt;
  options</a></h2>
Main-level &lt;digipeater&gt; options are:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>transmitter</i> defines which interface the digipeater
      will output to.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>&lt;trace&gt;</i> and <i>&lt;wide&gt;</i> sub-options
      are explained below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>&lt;source&gt;</i> sub-option is explained below.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&lt;trace&gt;_and_&lt;wide&gt;_sub-options"><a class="selflink" href="#&lt;trace&gt;_and_&lt;wide&gt;_sub-options">&lt;trace&gt;
  and &lt;wide&gt; sub-options</a></h2>
The <i>&lt;trace&gt;</i> sub-option has priority over the <i>&lt;wide&gt;</i>
  sub-option, otherwise they are configured the same way.
<div class="Pp"></div>
The <i>&lt;trace&gt;</i> sub-option defines which AX.25 address contained
  keywords are treated with APRS &quot;New-N paradigm&quot; rules in a way where
  each processing node always marks its transmitter callsign on the transmitted
  AX.25 packet address header.
<div class="Pp"></div>
The <i>&lt;wide&gt;</i> sub-option defines which AX.25 address contained
  keywords are treated with APRS &quot;New-N paradigm&quot; rules in a way where
  processing node does not mark its transmitter callsign on the transmitted
  AX.25 packet address header.
<div class="Pp"></div>
Available parameters are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>keys</b></dt>
  <dd class="It-tag">A string of comma-separated set of string tokens:
    <div>&#x00A0;</div>
     keys &quot;TRACE,WIDE&quot;
    <div>&#x00A0;</div>
    Alternative form for this entry is:
    <div>&#x00A0;</div>
     keys &quot;TRACE&quot;
    <div>&#x00A0;</div>
     keys &quot;WIDE&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>maxdone</b></dt>
  <dd class="It-tag">Defines maximum number of redistribution hops that these
      keywords can have completed when reaching here. If accounting finds more
      done, the system will just drop the packet instead of digipeating it
      onwards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>maxreq</b></dt>
  <dd class="It-tag">Defines maximum number of redistribution hops that these
      keywords can define. If accounting finds more requested, the system will
      just drop the packet instead of digipeating it onwards.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&lt;source&gt;_sub-options"><a class="selflink" href="#&lt;source&gt;_sub-options">&lt;source&gt;
  sub-options</a></h2>
Primary definer option is <b>source</b> which gives callsign of an
  <i>&lt;interface&gt;</i> from which the AX.25 packets are received for this
  <i>&lt;source&gt;</i> block.
<div class="Pp"></div>
Available <b>relay-type</b> modes on &lt;source&gt; definitions are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>digipeater</b></dt>
  <dd class="It-tag">Normal AX.25 digipeater behaviour with APRS New-N paradigm
      support. This is default mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>directonly</b></dt>
  <dd class="It-tag">Digipeat only directly heard packets. Useful for systems
      that are designated as &quot;fill-in&quot;. See also
      &quot;viscous-delay&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>third-party</b></dt>
  <dd class="It-tag">Special mode for Tx-iGate.</dd>
</dl>
<div class="Pp"></div>
The <b>ratelimit</b> defines two parameters: <i>average</i> and <i>limit</i>
  number of packets sent in 60 seconds. Its definitions can be both in
  <i>&lt;digipeater&gt;</i> and in digipeater's <i>&lt;source&gt;</i> sections,
  and therefore you can limit each individual source to a max accepted rate as
  well as define separate rate limits for the transmitter.
<div class="Pp"></div>
The <b>viscous-delay</b> defines a number of seconds from 0 (default) maximum of
  9 that the source will put the message on duplicate detector delay processing.
  All occurrences of same packet per duplicate detector during that time will be
  accounted on duplicate detection, and if at the end of the delay period there
  are more than one hit, the packet is discarded. Use delay of 0 seconds for
  normal digipeater, 5 seconds for a fill-in, or a Tx-iGate.
<div class="Pp"></div>
A javAPRSSrvr filter-adjunct style rules are possible with the <b>filter</b>
  options. When you want multiple filters, use multiple options with associated
  parameters:
<pre>
    filter t/m            # APRS messaging type packets
    filter a/la/lo/la/lo  # APRS positional packets within this area
</pre>
<div class="Pp"></div>
Also negative filters are possible (prefixed with minus character), which upon
  match cause rejection of the packet. Filters are evaluated in definition
  order, and first matching one will terminate the evaluation. When no filters
  are defined, everything is passed thru. When any filter is defined, only those
  matching non-negative filters are passed thru, and no default &quot;pass
  everything else&quot; behaviour exists.
<div class="Pp"></div>
Supported &quot;adjunct filters&quot; are following:
<dl class="Bl-tag">
  <dt class="It-tag"><b>A/latN/lonW/latS/lonE</b></dt>
  <dd class="It-tag">Area filter, defined as area enclosing within latS/latN and
      lonW/lonE. Latitude and longitude are entered as degrees and
    decimals.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>B/call1/call2...</b></dt>
  <dd class="It-tag">Budlist filter. Supports *-wildcards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>D/digi1/digi2...</b></dt>
  <dd class="It-tag"><i>Not supported at APRX internal filters</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>E/call1/call2/...</b></dt>
  <dd class="It-tag"><i>Not supported at APRX internal filters</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>F/call/dist_km</b></dt>
  <dd class="It-tag">Great-circle distance in kilometers from friend's
      coordinates. No wildcarding.
    <div>&#x00A0;</div>
    <i>(TODO: check that it really works!)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>M/dist</b></dt>
  <dd class="It-tag">The <i>range around my location</i> filter requires that
      you have defined also the &quot;myloc&quot; configuration entry. It
      defines acceptance of positions and messages with senders within
      <i>dist</i> kilometers of the &quot;myloc&quot; position.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>O/object1/obj2...</b></dt>
  <dd class="It-tag">Object name filter. Supports *-wildcards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>P/aa/bb/cc...</b></dt>
  <dd class="It-tag">Prefix filter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Q/con/ana</b></dt>
  <dd class="It-tag"><i>The Q-construct filter is not supported.</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>R/lat/lon/dist</b></dt>
  <dd class="It-tag">Range filter. Latitude and longitude are in degrees and
      decimals. Distance is in kilometers. No wildcards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>S/pri/alt/over</b></dt>
  <dd class="It-tag">Symbol filter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>T/..../call/km</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">Type filter. Couple possible usages:
<dl class="Bl-tag">
  <dt class="It-tag"> -t/c</dt>
  <dd class="It-tag">Everything except CWOP</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> t/*/OH2RDY/50</dt>
  <dd class="It-tag">Everything within 50 km of OH2RDY's last known
    position</dd>
</dl>
<div class="Pp"></div>
Type code characters are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>*</b></dt>
  <dd class="It-tag">An &quot;all&quot; wild-card.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>C</b></dt>
  <dd class="It-tag">A CWOP.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>I</b></dt>
  <dd class="It-tag">An ITEM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>M</b></dt>
  <dd class="It-tag">A MESSAGE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>N</b></dt>
  <dd class="It-tag">A NWS message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>O</b></dt>
  <dd class="It-tag">An OBJECT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Q</b></dt>
  <dd class="It-tag">A QUERY.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>S</b></dt>
  <dd class="It-tag">A STATUS response.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>T</b></dt>
  <dd class="It-tag">A TELEMETRY packet or parameter message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>U</b></dt>
  <dd class="It-tag">A USERDEF message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>W</b></dt>
  <dd class="It-tag">A WX data packet</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>U/unproto1/unproto2...</b></dt>
  <dd class="It-tag">Filters by value in destination address field, supports
      wildcard.</dd>
</dl>
<div class="Pp"></div>
The <b>&lt;trace&gt;</b> and <b>&lt;wide&gt;</b> sub-options exist also within
  each &lt;source&gt;. Where such occur, the &lt;source&gt; specific
  &lt;trace&gt; sub-option trumps the definition on &lt;digipeater&gt; level,
  and same with &lt;wide&gt; sub-options. This allows things like overriding
  flooding control keywords on source basis, should such be necessary.
<div class="Pp"></div>
A set of <b>regex-filter</b> rules can be used to reject packets that are not of
  approved kind. Available syntax is:
<dl class="Bl-tag">
  <dt class="It-tag">regex-filter source RE</dt>
  <dd class="It-tag">source address field</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">regex-filter destination RE</dt>
  <dd class="It-tag">destination address field</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">regex-filter via RE</dt>
  <dd class="It-tag">any via path field</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">regex-filter data RE</dt>
  <dd class="It-tag">payload content</dd>
</dl>
<div class="Pp"></div>
The regex-filter exists as ad-hoc method when all else fails.
<h1 class="Sh" title="Sh" id="NOTES:_ERLANG"><a class="selflink" href="#NOTES:_ERLANG">NOTES:
  ERLANG</a></h1>
The <i>Erlang</i> is telecom measurement of channel occupancy, and in this
  application sense it does tell how much traffic there is on the radio channel.
<div class="Pp"></div>
Most radio transmitters are not aware of all transmitters on channel, and thus
  there can happen a collision causing loss of both messages. The higher the
  channel activity, the more likely that collision is. For further details,
  refer to statistical mathematics books, or perhaps on Wikipedia.
<div class="Pp"></div>
In order to measure channel activity, the <b>aprx</b> program suite has these
  built-in statistics counter and summary estimators.
<div class="Pp"></div>
The <i>Erlag</i> value that the estimators present are likely somewhat
  <i>underestimating</i> the true channel occupancy simply because it calculates
  estimate of channel bit transmit rate, and thus a per-minute character
  capacity. It does not know true frequency of bit-stuffing events of the HDLC
  framing, nor each transmitter pre- and port frame PTT times. The transmitters
  need to stabilize their transmit oscillators in many cases, which may take up
  to around 500 ms! The counters are not aware of this preamble-, nor
  postamble-times.
<div class="Pp"></div>
The HDLC bit stuffing ratio is guessed to be 1:1.025 (1 extra bit every 5 bytes)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NOTES:_PROGRAM_NAME"><a class="selflink" href="#NOTES:_PROGRAM_NAME">NOTES:
  PROGRAM NAME</a></h1>
Initially this program had name <i>aprsg-ng</i>, which was too close to another
  (a less low-tech C++ approach) program had.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS/WARTS"><a class="selflink" href="#BUGS/WARTS">BUGS/WARTS</a></h1>
The <i>Erlang</i>-monitor mechanisms are of rudimentary quality, and can
  seriously underestimate the channel occupancy by ignoring pre- and postample
  transmissions, which can be as high as 50 centiseconds for preample, and 20
  centiseconds for postample! When entire packet takes 50 centiseconds, such
  preample alone doubles channel occupancy. A 6pack protocol on serial link
  (instead of KISS) could inform receiver better on carrier presence times,
  however even that underestimates RF power presence (RSSI) signal. (6pack is
  not supported.)
<div class="Pp"></div>
On serial lines supports really only 8n1 mode, not at all like: 7e1. On the
  other hand, there really is no sensible usage for anything but 8n1...
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
Couple web sites:
<div>&#x00A0;</div>
<i>http://www.aprs2.net/</i>,
<div>&#x00A0;</div>
<i>http://www.aprs-is.net/</i>,
<div>&#x00A0;</div>
<i>http://wiki.ham.fi/Aprx.en</i>,
<div>&#x00A0;</div>
<i>http://ham.zmailer.org/oh2mqk/aprx/aprx-manual.pdf</i>
<div class="Pp"></div>
<b>aprx-stat</b>(8)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This little piece was written by <i>Matti Aarnio, OH2MQK</i> during a dark and
  rainy fall and winter of 2007-2008 after a number of discussions grumbling
  about current breed of available software for APRS iGate use in Linux (or of
  any UNIX) platforms. Fall and winter 2009-2010 saw appearance of digipeater
  functionality.
<div class="Pp"></div>
Principal contributors and test users include: <i>Pentti Gronlund, OH3BK</i>,
  <i>Reijo Hakala, OH1GWK</i>. Debian packaging by <i>Kimmo Jukarinen,
  OH3GNU</i>. Testing of SMACK variant of KISS by <i>Patrick Hertenstein,
  DL1GHN</i>. The beacon exec functionality prototype by <i>Kamil Palkowiski
  SQ8KFH</i>.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2.9.0 - 2017 January 24</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
