<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>CONFIG(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CONFIG(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">CONFIG(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">config</b> &#x2014; <span class="Nd" title="Nd">build
  system configuration files</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">config</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-CVgp</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-I</b>
      <var class="Ar" title="Ar">path</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-d</b>
      <var class="Ar" title="Ar">destdir</var></span>]
      <var class="Ar" title="Ar">SYSTEM_NAME</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">config</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-x</b>
      <var class="Ar" title="Ar">kernel</var></span>]</td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">config</b> utility builds a set of system
  configuration files from the file <var class="Ar" title="Ar">SYSTEM_NAME</var>
  which describes the system to configure. A second file tells
  <b class="Nm" title="Nm">config</b> what files are needed to generate a system
  and can be augmented by configuration specific set of files that give
  alternate files for a specific machine (see the
  <a class="Sx" title="Sx" href="#FILES">FILES</a> section below).
<div class="Pp"></div>
Available options and operands:
<dl class="Bl-tag" style="margin-left: 21.00ex;">
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#V"><b class="Fl" title="Fl" id="V">-V</b></a></dt>
  <dd class="It-tag">Print the <b class="Nm" title="Nm">config</b> version
      number.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#C"><b class="Fl" title="Fl" id="C">-C</b></a></dt>
  <dd class="It-tag">If the INCLUDE_CONFIG_FILE is present in a configuration
      file, kernel image will contain full configuration files included
      literally (preserving comments). This flag is kept for backward
      compatibility.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#I"><b class="Fl" title="Fl" id="I">-I</b></a>
    <var class="Ar" title="Ar">path</var></dt>
  <dd class="It-tag">Search in <var class="Ar" title="Ar">path</var> for any
      file included by the <b class="Ic" title="Ic">include</b> directive. This
      option may be specified more than once.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#d"><b class="Fl" title="Fl" id="d">-d</b></a>
    <var class="Ar" title="Ar">destdir</var></dt>
  <dd class="It-tag">Use <var class="Ar" title="Ar">destdir</var> as the output
      directory, instead of the default one. Note that
      <b class="Nm" title="Nm">config</b> does not append
      <var class="Ar" title="Ar">SYSTEM_NAME</var> to the directory given.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#m"><b class="Fl" title="Fl" id="m">-m</b></a></dt>
  <dd class="It-tag">Print the MACHINE and MACHINE_ARCH values for this kernel
      and exit.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#g"><b class="Fl" title="Fl" id="g">-g</b></a></dt>
  <dd class="It-tag">Configure a system for debugging.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#x"><b class="Fl" title="Fl" id="x">-x</b></a>
    <var class="Ar" title="Ar">kernel</var></dt>
  <dd class="It-tag">Print kernel configuration file embedded into a kernel
      file. This option makes sense only if <b class="Cd" title="Cd">options
      INCLUDE_CONFIG_FILE</b> entry was present in your configuration file.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><a class="selflink" href="#p"><b class="Fl" title="Fl" id="p">-p</b></a></dt>
  <dd class="It-tag">Configure a system for profiling; for example,
      <a class="Xr" title="Xr">kgmon(8)</a> and
      <a class="Xr" title="Xr">gprof(1)</a>. If two or more
      <b class="Fl" title="Fl">-p</b> options are supplied,
      <b class="Nm" title="Nm">config</b> configures a system for high
      resolution profiling.</dd>
  <dt class="It-tag" style="margin-left: -21.00ex;"><var class="Ar" title="Ar">SYSTEM_NAME</var></dt>
  <dd class="It-tag">Specify the name of the system configuration file
      containing device specifications, configuration options and other system
      parameters for one system configuration.</dd>
</dl>
<div class="Pp"></div>
The <b class="Nm" title="Nm">config</b> utility should be run from the
  <i class="Pa" title="Pa">conf</i> subdirectory of the system source (usually
  <i class="Pa" title="Pa">/sys/</i><var class="Va" title="Va">ARCH</var><i class="Pa" title="Pa">/conf</i>),
  where <var class="Va" title="Va">ARCH</var> represents one of the
  architectures supported by <span class="Ux">FreeBSD</span>. The
  <b class="Nm" title="Nm">config</b> utility creates the directory
  <i class="Pa" title="Pa">../compile/</i><var class="Ar" title="Ar">SYSTEM_NAME</var>
  or the one given with the <b class="Fl" title="Fl">-d</b> option as necessary
  and places all output files there. The output of
  <b class="Nm" title="Nm">config</b> consists of a number of files; for the
  i386, they are: <i class="Pa" title="Pa">Makefile</i>, used by
  <a class="Xr" title="Xr">make(1)</a> in building the system; header files,
  definitions of the number of various devices that will be compiled into the
  system.
<div class="Pp"></div>
After running <b class="Nm" title="Nm">config</b>, it is necessary to run
  &#x201C;<code class="Li">make depend</code>&#x201D; in the directory where the
  new makefile was created. The <b class="Nm" title="Nm">config</b> utility
  prints a reminder of this when it completes.
<div class="Pp"></div>
If any other error messages are produced by <b class="Nm" title="Nm">config</b>,
  the problems in the configuration file should be corrected and
  <b class="Nm" title="Nm">config</b> should be run again. Attempts to compile a
  system that had configuration errors are likely to fail.
<h1 class="Sh" title="Sh" id="DEBUG_KERNELS"><a class="selflink" href="#DEBUG_KERNELS">DEBUG
  KERNELS</a></h1>
Traditional <span class="Ux">BSD</span> kernels are compiled without symbols due
  to the heavy load on the system when compiling a &#x201C;debug&#x201D; kernel.
  A debug kernel contains complete symbols for all the source files, and enables
  an experienced kernel programmer to analyse the cause of a problem. The
  debuggers available prior to <span class="Ux">4.4BSD-Lite</span> were able to
  find some information from a normal kernel;
  <a class="Xr" title="Xr">gdb(1)</a> provides very little support for normal
  kernels, and a debug kernel is needed for any meaningful analysis.
<div class="Pp"></div>
For reasons of history, time and space, building a debug kernel is not the
  default with <span class="Ux">FreeBSD</span>: a debug kernel takes up to 30%
  longer to build and requires about 30 MB of disk storage in the build
  directory, compared to about 6 MB for a non-debug kernel. A debug kernel is
  about 11 MB in size, compared to about 2 MB for a non-debug kernel. This space
  is used both in the root file system and at run time in memory. Use the
  <b class="Fl" title="Fl">-g</b> option to build a debug kernel. With this
  option, <b class="Nm" title="Nm">config</b> causes two kernel files to be
  built in the kernel build directory:
<ul class="Bl-bullet">
  <li class="It-bullet"><i class="Pa" title="Pa">kernel.debug</i> is the
      complete debug kernel.</li>
  <li class="It-bullet"><i class="Pa" title="Pa">kernel</i> is a copy of the
      kernel with the debug symbols stripped off. This is equivalent to the
      normal non-debug kernel.</li>
</ul>
<div class="Pp"></div>
There is currently little sense in installing and booting from a debug kernel,
  since the only tools available which use the symbols do not run on-line. There
  are therefore two options for installing a debug kernel:
<ul class="Bl-bullet">
  <li class="It-bullet">&#x201C;<code class="Li">make install</code>&#x201D;
      installs <i class="Pa" title="Pa">kernel</i> in the root file system.</li>
  <li class="It-bullet">&#x201C;<code class="Li">make
      install.debug</code>&#x201D; installs
      <i class="Pa" title="Pa">kernel.debug</i> in the root file system.</li>
</ul>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact" style="margin-left: 67.80ex;">
  <dt class="It-tag" style="margin-left: -67.80ex;"><i class="Pa" title="Pa">/sys/conf/files</i></dt>
  <dd class="It-tag">list of common files system is built from</dd>
  <dt class="It-tag" style="margin-left: -67.80ex;"><i class="Pa" title="Pa">/sys/conf/Makefile.</i><var class="Va" title="Va">ARCH</var></dt>
  <dd class="It-tag">generic makefile for the
      <var class="Va" title="Va">ARCH</var></dd>
  <dt class="It-tag" style="margin-left: -67.80ex;"><i class="Pa" title="Pa">/sys/conf/files.</i><var class="Va" title="Va">ARCH</var></dt>
  <dd class="It-tag">list of <var class="Va" title="Va">ARCH</var> specific
      files</dd>
  <dt class="It-tag" style="margin-left: -67.80ex;"><i class="Pa" title="Pa">/sys/</i><var class="Va" title="Va">ARCH</var><i class="Pa" title="Pa">/compile/</i><var class="Ar" title="Ar">SYSTEM_NAME</var></dt>
  <dd class="It-tag">default kernel build directory for system
      <var class="Ar" title="Ar">SYSTEM_NAME</var> on
      <var class="Va" title="Va">ARCH</var>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">config(5)</a>
<div class="Pp"></div>
The <a class="Sx" title="Sx" href="#SYNOPSIS">SYNOPSIS</a> portion of each
  device in section 4.
<div class="Pp"></div>
<cite class="Rs" title="Rs"><span class="RsT">Building 4.3 BSD UNIX System with
  Config</span>.</cite>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
The <b class="Nm" title="Nm">config</b> utility appeared in
  <span class="Ux">4.1BSD</span>.
<div class="Pp"></div>
Before support for <b class="Fl" title="Fl">-x</b> was introduced,
  <b class="Cd" title="Cd">options INCLUDE_CONFIG_FILE</b> included entire
  configuration file that used to be embedded in the new kernel. This meant that
  <a class="Xr" title="Xr">strings(1)</a> could be used to extract it from a
  kernel: to extract the configuration information, you had to use the command:
<div class="Pp"></div>
<div class="D1"><code class="Li">strings -n 3 kernel | sed -n
  's/^___//p'</code></div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The line numbers reported in error messages are usually off by one.</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 8, 2007</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
