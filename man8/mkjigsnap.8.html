<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MKJIGSNAP(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MKJIGSNAP(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">MKJIGSNAP(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mkjigsnap - Create a snapshot tree on a jigdo server
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>mkjigsnap</b> [OPTIONS] &lt;-d snapshot_dir&gt; &lt;-j jigdo_file&gt; &lt;-k
  keyword&gt; &lt;-m mirror&gt; &lt;-n CD_name&gt; &lt;-o output_directory&gt;
  &lt;-t template_file&gt;
<div>&#x00A0;</div>
<b>mkjigsnap</b> [OPTIONS] &lt;-b backref_file&gt; &lt;-d snapshot_dir&gt;
  &lt;-m mirror&gt; &lt;-J jigdo_list&gt; &lt;-j jigdo_file&gt; &lt;-k
  keyword&gt;
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
mkjigsnap creates snapshot directories for use by other jigdo tools. It can be
  run in two distinct modes:
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Jigit_/_single-jigdo_mode"><a class="selflink" href="#Jigit_/_single-jigdo_mode">Jigit
  / single-jigdo mode</a></h2>
To build a jigit .conf file for a single jigdo file: add the &quot;-n&quot;
  option with a CD name on the command line and only specify a single jigdo to
  work with using &quot;-j&quot;.
<div style="height: 1.00em;">&#x00A0;</div>
Required arguments for this mode:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d snapshot_dir</b></dt>
  <dd class="It-tag">Specify the output directory name to be used for the
      snapshot tree (e.g. 20041011, rc1). In single-jigdo mode this will be
      <b>relative</b> to the output directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j jigdo_file</b></dt>
  <dd class="It-tag">Specify the location of the jigdo file to be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m mirror</b></dt>
  <dd class="It-tag">Specify the location of the mirror containing all the files
      needed. This <b>must</b> be on the same filesystem as the output
      directory, as hard links will be used to create the snapshot
    efficiently.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n CD_name</b></dt>
  <dd class="It-tag">Specify the output name of the CD for jigit (e.g. warty,
      sarge-i386-1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o output_directory</b></dt>
  <dd class="It-tag">Specify the output location for the jigdo, template, conf
      and snapshot. This <b>must</b> be on the same filesystem as the mirror, as
      hard links will be used to create the snapshot efficiently.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t template_file</b></dt>
  <dd class="It-tag">Specify the location of the template file to be used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Multi-jigdo_mode"><a class="selflink" href="#Multi-jigdo_mode">Multi-jigdo
  mode</a></h2>
To build a snapshot tree for (potentially multiple) jigdo files: do not specify
  the &quot;-n&quot; option, and list as many jigdo files as desired, either on
  the command line using multiple &quot;-j &lt;jigdo&gt;&quot; options or
  (better) via a file listing them with the &quot;-J&quot; option.
<div style="height: 1.00em;">&#x00A0;</div>
Required arguments for this mode:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d snapshot_dir</b></dt>
  <dd class="It-tag">Specify the output directory name to be used for the
      snapshot tree (e.g. 20041011, rc1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-J jigdo_list</b></dt>
  <dd class="It-tag">Specify the location of a file listing the jigdo files to
      be used. May be repeated multiple times for multiple list files if
      desired.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j jigdo_file</b></dt>
  <dd class="It-tag">Specify the location of the jigdo file to be used. May be
      repeated multiple times for multiple jigdo files, but it's better to use
      the &quot;-J&quot; option to point at a file containing a list of jigdo
      files instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k keyword</b></dt>
  <dd class="It-tag">Specify the &quot;keywords&quot; which are used in the
      jigdo files (e.g. Debian, Non-US, Ubuntu).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m mirror</b></dt>
  <dd class="It-tag">Specify the location of the mirror containing all the files
      needed. This <b>must</b> be on the same filesystem as the snapshot
      directory, as hard links will be used to create the snapshot efficiently.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Options"><a class="selflink" href="#Options">Options</a></h2>
Optional arguments for both modes:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b backref_file</b></dt>
  <dd class="It-tag">If using a fail_log, also keep track of which jigdo files
      correspond to each missing file, and output the details in the
      backref_file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f fail_log</b></dt>
  <dd class="It-tag">If any files are required by the specific jigdo files but
      are not available in the mirror, list them in the output file fail_log for
      reference.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i ignore_list</b></dt>
  <dd class="It-tag">If any files are required by the specific jigdo files but
      are not available in the mirror, list them in the ignore_list file to
      supress errors about them.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">mkjigsnap -o /tmp/mjs-test -n mjs-test -m /tmp/mirror
    -j</dt>
  <dd class="It-tag">~/jigdo/update/debian-update-3.0r2.01-i386.jigdo -t
      ~/jigdo/update/debian-update-3.0r2.01-i386.template -k Debian -k Non-US -d
      20041017
    <div style="height: 1.00em;">&#x00A0;</div>
    This command is an example of single-jigdo mode, used for Ubuntu jigit
      generation. It creates a single jigit conf file using the supplied
      jigdo/template file pair, looking for jigdo references to files in the
      &quot;Debian&quot; and &quot;Non-US&quot; areas. Output the files into
      /tmp/mjs-test and call them &quot;mjs-test.&lt;ext&gt;&quot;, creating a
      snapshot of the needed files in /tmp/mjs-test/20041017 by linking files
      from /tmp/mirror as needed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">mkjigsnap -m /org/ftp/debian -J ~/jigdo.list -k Debian</dt>
  <dd class="It-tag">-d /org/jigdo-area/snapshot/Debian -f
      ~/mkjigsnap-failed.log -i ~/mkjigsnap-ignore.list
    <div style="height: 1.00em;">&#x00A0;</div>
    This command is an example of multi-jigdo mode, as run to keep
      http://us.cdimage.debian.org/cdimage/snapshot/ up to date. This reads in
      all the jigdo files listed in ~/jigdo.list, building a list of all the
      files referenced in the &quot;Debian&quot; area. It will then attempt to
      build a snapshot tree of all those files under
      /org/jigdo-area/snapshot/Debian by linking from /org/ftp/debian. Any files
      that are missing will be listed into the output &quot;missing&quot; file
      ~/mkjigsnap-failed.log for later checking, UNLESS they are already listed
      in the &quot;ignore&quot; file ~/mkjigsnap-ignore.list.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>jigdo-file</b>(1), <b>jigit</b>(1), <b>jigdump</b>(1) and <b>mkimage</b>(1).
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2004 - 2014 Steve McIntyre (steve@einval.com)
<div class="Pp"></div>
mkjigsnap may be copied under the terms and conditions of version 2 of the GNU
  General Public License, as published by the Free Software Foundation
  (Cambridge, MA, USA).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Steve McIntyre (steve@einval.com)</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 2004</td>
    <td class="foot-os">Jigit jigdo tools</td>
  </tr>
</table>
</body>
</html>
