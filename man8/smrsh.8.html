<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:16:08 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SMRSH(8) System Manager&rsquo;s Manual SMRSH(8)</p>

<p style="margin-top: 1em">NAME <br>
smrsh - restricted shell for sendmail</p>

<p style="margin-top: 1em">SYNOPSIS <br>
smrsh -c command</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The smrsh program is intended as a replacement for sh for
use in the &lsquo;&lsquo;prog&rsquo;&rsquo; mailer in
sendmail(8) configuration files. It sharply limits the
commands that can be run using the <br>
&lsquo;&lsquo;|program&rsquo;&rsquo; syntax of sendmail in
order to improve the over all security of your system.
Briefly, even if a &lsquo;&lsquo;bad guy&rsquo;&rsquo; can
get sendmail to run a program without going through <br>
an alias or forward file, smrsh limits the set of programs
that he or she can execute.</p>

<p style="margin-top: 1em">Briefly, smrsh limits programs
to be in a single directory, by default /etc/smrsh, allowing
the system administrator to choose the set of acceptable
commands, and to the shell <br>
builtin commands &lsquo;&lsquo;exec&rsquo;&rsquo;,
&lsquo;&lsquo;exit&rsquo;&rsquo;, and
&lsquo;&lsquo;echo&rsquo;&rsquo;. It also rejects any
commands with the characters &lsquo;&lsquo;&rsquo;,
&lsquo;&lt;&rsquo;, &lsquo;&gt;&rsquo;,
&lsquo;;&rsquo;,&rsquo; (carriage return), or &lsquo;0
(newline) &lsquo;$&rsquo;, &lsquo;(&rsquo;, &lsquo;)&rsquo;,
&lsquo; <br>
on the command line to prevent &lsquo;&lsquo;end
run&rsquo;&rsquo; attacks. It allows
&lsquo;&lsquo;||&rsquo;&rsquo; and
&lsquo;&lsquo;&amp;&amp;&rsquo;&rsquo; to enable commands
like: &lsquo;&lsquo;&quot;|exec /usr/local/bin/filter ||
exit 75&quot;&rsquo;&rsquo;</p>

<p style="margin-top: 1em">Initial pathnames on programs
are stripped, so forwarding to
&lsquo;&lsquo;/usr/ucb/vacation&rsquo;&rsquo;,
&lsquo;&lsquo;/usr/bin/vacation&rsquo;&rsquo;,
&lsquo;&lsquo;/home/server/mydir/bin/vacation&rsquo;&rsquo;,
and &lsquo;&lsquo;vacation&rsquo;&rsquo; all actually
for&acirc; <br>
ward to &lsquo;&lsquo;/etc/smrsh/vacation&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">System administrators should be
conservative about populating the /etc/smrsh directory. For
example, a reasonable additions is vacation(1), and the
like. No matter how brow- <br>
beaten you may be, never include any shell or shell-like
program (such as perl(1)) in the /etc/smrsh directory. Note
that this does not restrict the use of shell or perl scripts
<br>
in the sm.bin directory (using the
&lsquo;&lsquo;#!&rsquo;&rsquo; syntax); it simply disallows
execution of arbitrary programs. Also, including mail
filtering programs such as procmail(1) is a very bad <br>
idea. procmail(1) allows users to run arbitrary programs in
their procmailrc(5).</p>

<p style="margin-top: 1em">FILES <br>
/etc/smrsh - directory for restricted programs</p>

<p style="margin-top: 1em">SEE ALSO <br>
sendmail(8)</p>

<p style="margin-top: 1em">$Date: 2004/08/06 03:55:35 $
SMRSH(8)</p>
<hr>
</body>
</html>
