<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:08:17 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>AA-EASYPROF(8) AppArmor AA-EASYPROF(8)</p>

<p style="margin-top: 1em">NAME <br>
aa-easyprof - AppArmor profile generation made easy.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
aa-easyprof [option] &lt;path to binary&gt;</p>

<p style="margin-top: 1em">DESCRIPTION <br>
aa-easyprof provides an easy to use interface for AppArmor
policy generation. aa-easyprof supports the use of templates
and policy groups to quickly profile an application. <br>
Please note that while this tool can help with policy
generation, its utility is dependent on the quality of the
templates, policy groups and abstractions used. Also, this
tool <br>
may create policy which is less restricted than creating
policy by hand or with aa-genprof and aa-logprof.</p>

<p style="margin-top: 1em">OPTIONS <br>
aa-easyprof accepts the following arguments:</p>

<p style="margin-top: 1em">-t TEMPLATE, --template=TEMPLATE
<br>
Specify which template to use. May specify either a system
template from /usr/share/apparmor/easyprof/templates or a
filename for the template to use. If not specified, use <br>
/usr/share/apparmor/easyprof/templates/default.</p>

<p style="margin-top: 1em">-p POLICYGROUPS,
--policy-groups=POLICYGROUPS <br>
Specify POLICY as a comma-separated list of policy groups.
See --list-templates for supported policy groups. The
available policy groups are in <br>
/usr/share/apparmor/easyprof/policy. Policy groups are
simply groupings of AppArmor rules or policies. They are
similar to AppArmor abstractions, but usually encompass more
<br>
policy rules.</p>

<p style="margin-top: 1em">-a ABSTRACTIONS,
--abstractions=ABSTRACTIONS <br>
Specify ABSTRACTIONS as a comma-separated list of AppArmor
abstractions. It is usually recommended you use policy
groups instead, but this is provided as a convenience. <br>
AppArmor abstractions are located in
/etc/apparmor.d/abstractions. See apparmor.d(5) for
details.</p>

<p style="margin-top: 1em">-r PATH, --read-path=PATH <br>
Specify a PATH to allow owner reads. May be specified
multiple times. If the PATH ends in a &rsquo;/&rsquo;, then
PATH is treated as a directory and reads are allowed to all
files under <br>
this directory. Can optionally use &rsquo;/*&rsquo; at the
end of the PATH to only allow reads to files directly in
PATH.</p>

<p style="margin-top: 1em">-w PATH, --write-dir=PATH <br>
Like --read-path but also allow owner writes in additions to
reads.</p>

<p style="margin-top: 1em">-n NAME, --name=NAME <br>
Specify NAME of policy. If not specified, NAME is set to the
name of the binary. The NAME of the policy is typically only
used for profile meta data and does not specify the <br>
AppArmor profile name.</p>

<p style="margin-top: 1em">--profile-name=PROFILENAME <br>
Specify the AppArmor profile name. When set, uses
&rsquo;profile PROFILENAME&rsquo; in the profile. When set
and specifying a binary, uses &rsquo;profile PROFILENAME
BINARY&rsquo; in the profile. If <br>
not set, the binary will be used as the profile name and
profile attachment.</p>


<p style="margin-top: 1em">--template-var=&quot;@{VAR}=VALUE&quot;
<br>
Set VAR to VALUE in the resulting policy. This typically
only makes sense if the specified template uses this value.
May be specified multiple times.</p>

<p style="margin-top: 1em">--list-templates <br>
List available templates.</p>

<p style="margin-top: 1em">--show-template <br>
Display template specified with --template.</p>

<p style="margin-top: 1em">--templates-dir=PATH <br>
Use PATH instead of system templates directory.</p>

<p style="margin-top: 1em">--include-templates-dir=PATH
<br>
Include PATH when searching for templates in addition to the
system templates directory (or the one specified with
--templates-dir). System templates will match before those
<br>
in PATH.</p>

<p style="margin-top: 1em">--list-policy-groups <br>
List available policy groups.</p>

<p style="margin-top: 1em">--show-policy-group <br>
Display policy groups specified with --policy-groups.</p>

<p style="margin-top: 1em">--policy-groups-dir=PATH <br>
Use PATH instead of system policy-groups directory.</p>


<p style="margin-top: 1em">--include-policy-groups-dir=PATH
<br>
Include PATH when searching for policy groups in addition to
the system policy-groups directory (or the one specified
with --policy-groups-dir). System policy-groups will <br>
match before those in PATH.</p>

<p style="margin-top: 1em">--policy-version=VERSION <br>
Must be used with --policy-vendor and is used to specify the
version of policy groups and templates. When specified,
aa-easyprof looks for the subdirectory VENDOR/VERSION <br>
within the policy-groups and templates directory. The
specified version must be a positive decimal number
compatible with the JSON Number type. Eg, when using:</p>

<p style="margin-top: 1em">$ aa-easyprof
--templates-dir=/usr/share/apparmor/easyprof/templates
--policy-groups-dir=/usr/share/apparmor/easyprof/policygroups
--policy-vendor=&quot;foo&quot; --policy-version=1.0</p>

<p style="margin-top: 1em">Then
/usr/share/apparmor/easyprof/templates/foo/1.0 will be
searched for templates and
/usr/share/apparmor/easyprof/policygroups/foo/1.0 for policy
groups.</p>

<p style="margin-top: 1em">--policy-vendor=VENDOR <br>
Must be used with --policy-version and is used to specify
the vendor for policy groups and templates. See
--policy-version for more information.</p>

<p style="margin-top: 1em">--author <br>
Specify author of the policy.</p>

<p style="margin-top: 1em">--copyright <br>
Specify copyright of the policy.</p>

<p style="margin-top: 1em">--comment <br>
Specify comment for the policy.</p>

<p style="margin-top: 1em">-m MANIFEST, --manifest=MANIFEST
<br>
aa-easyprof also supports using a JSON manifest file for
specifying options related to policy. Unlike command line
arguments, the JSON file may specify multiple profiles. The
<br>
structure of the JSON is:</p>

<p style="margin-top: 1em">{ <br>
&quot;security&quot;: { <br>
&quot;profiles&quot;: { <br>
&quot;&lt;profile name 1&gt;&quot;: { <br>
... attributes specific to this profile ... <br>
}, <br>
&quot;&lt;profile name 2&gt;&quot;: { <br>
... <br>
} <br>
} <br>
} <br>
}</p>

<p style="margin-top: 1em">Each profile JSON object (ie,
everything under a profile name) may specify any fields
related to policy. The &quot;security&quot; JSON container
object is optional and may be omitted. <br>
An example manifest file demonstrating all fields is:</p>

<p style="margin-top: 1em">{ <br>
&quot;security&quot;: { <br>
&quot;profiles&quot;: { <br>
&quot;com.example.foo&quot;: { <br>
&quot;abstractions&quot;: [ <br>
&quot;audio&quot;, <br>
&quot;gnome&quot; <br>
], <br>
&quot;author&quot;: &quot;Your Name&quot;, <br>
&quot;binary&quot;: &quot;/opt/foo/**&quot;, <br>
&quot;comment&quot;: &quot;Unstructured single-line
comment&quot;, <br>
&quot;copyright&quot;: &quot;Unstructured single-line
copyright statement&quot;, <br>
&quot;name&quot;: &quot;My Foo App&quot;, <br>
&quot;policy_groups&quot;: [ <br>
&quot;networking&quot;, <br>
&quot;user-application&quot; <br>
], <br>
&quot;policy_vendor&quot;: &quot;somevendor&quot;, <br>
&quot;policy_version&quot;: 1.0, <br>
&quot;read_path&quot;: [ <br>
&quot;/tmp/foo_r&quot;, <br>
&quot;/tmp/bar_r/&quot; <br>
], <br>
&quot;template&quot;: &quot;user-application&quot;, <br>
&quot;template_variables&quot;: { <br>
&quot;APPNAME&quot;: &quot;foo&quot;, <br>
&quot;VAR1&quot;: &quot;bar&quot;, <br>
&quot;VAR2&quot;: &quot;baz&quot; <br>
}, <br>
&quot;write_path&quot;: [ <br>
&quot;/tmp/foo_w&quot;, <br>
&quot;/tmp/bar_w/&quot; <br>
] <br>
} <br>
} <br>
} <br>
}</p>

<p style="margin-top: 1em">A manifest file does not have to
include all the fields. Eg, a manifest file for an Ubuntu
SDK application might be:</p>

<p style="margin-top: 1em">{ <br>
&quot;security&quot;: { <br>
&quot;profiles&quot;: { <br>
&quot;com.ubuntu.developer.myusername.MyCoolApp&quot;: {
<br>
&quot;policy_groups&quot;: [ <br>
&quot;networking&quot;, <br>
&quot;online-accounts&quot; <br>
], <br>
&quot;policy_vendor&quot;: &quot;ubuntu&quot;, <br>
&quot;policy_version&quot;: 1.0, <br>
&quot;template&quot;: &quot;ubuntu-sdk&quot;, <br>
&quot;template_variables&quot;: { <br>
&quot;APPNAME&quot;: &quot;MyCoolApp&quot;, <br>
&quot;APPVERSION&quot;: &quot;0.1.2&quot; <br>
} <br>
} <br>
} <br>
} <br>
}</p>

<p style="margin-top: 1em">--verify-manifest <br>
When used with --manifest, warn about potentially unsafe
definitions in the manifest file.</p>

<p style="margin-top: 1em">--output-format=FORMAT <br>
Specify either text (default if unspecified) for AppArmor
policy output or json for JSON manifest format.</p>

<p style="margin-top: 1em">--output-directory=DIR <br>
Specify output directory for profile. If unspecified, policy
is sent to stdout.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Example usage for a program named &rsquo;foo&rsquo; which is
installed in /opt/foo:</p>

<p style="margin-top: 1em">$ aa-easyprof
--template=user-application
--template-var=&quot;@{APPNAME}=foo&quot;
--policy-groups=opt-application,user-application
/opt/foo/bin/FooApp</p>

<p style="margin-top: 1em">When using a manifest file:</p>

<p style="margin-top: 1em">$ aa-easyprof
--manifest=manifest.json</p>

<p style="margin-top: 1em">To output a manifest file based
on aa-easyprof arguments:</p>

<p style="margin-top: 1em">$ aa-easyprof
--output-format=json --author=&quot;Your Name&quot;
--comment=&quot;Unstructured single-line comment&quot;
--copyright=&quot;Unstructured single-line copyright
statement&quot; --name=&quot;My Foo App&quot;
--profile-name=&quot;com.example.foo&quot;
--template=&quot;user-application&quot;
--policy-groups=&quot;user-application,networking&quot;
--abstractions=&quot;audio,gnome&quot;
--read-path=&quot;/tmp/foo_r&quot;
--read-path=&quot;/tmp/bar_r/&quot;
--write-path=&quot;/tmp/foo_w&quot; --write-path=/tmp/bar_w/
--template-var=&quot;@{APPNAME}=foo&quot;
--template-var=&quot;@{VAR1}=bar&quot;
--template-var=&quot;@{VAR2}=baz&quot;
&quot;/opt/foo/**&quot;</p>

<p style="margin-top: 1em">BUGS <br>
If you find any additional bugs, please report them to
Launchpad at
&lt;https://bugs.launchpad.net/apparmor/+filebug&gt;.</p>

<p style="margin-top: 1em">SEE ALSO <br>
apparmor(7) apparmor.d(5)</p>

<p style="margin-top: 1em">AppArmor 2.11.0 2017-04-11
AA-EASYPROF(8)</p>
<hr>
</body>
</html>
