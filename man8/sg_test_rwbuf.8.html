<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:54 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SG_TEST_RWBUF(8) SG3_UTILS SG_TEST_RWBUF(8)</p>

<p style="margin-top: 1em">NAME <br>
sg_test_rwbuf - test a SCSI host adapter by issuing dummy
writes and reads</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sg_test_rwbuf [--addrd=AR] [--addwr=AW] [--help] [--quick]
--size=SZ [--times=NUM] [--verbose] [--version] DEVICE</p>

<p style="margin-top: 1em">or an older deprecated format
sg_test_rwbuf DEVICE SZ [AW] [AR]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
sg_test_rwbuf writes and reads back SZ bytes to the internal
buffer of DEVICE (e.g. /dev/sda or /dev/sg0). A pseudo
random pattern is written to the data buffer on the device
<br>
then read back. If the same pattern is found
&rsquo;Success&rsquo; is reported. If they do not match
(checksums unequal) then this is reported and up to 24 bytes
from the first point of mis&acirc; <br>
match are reported; the first line shows what was written
and the second line shows what was received. For testing
purposes, you can ask it to write AW or read AR additional
<br>
bytes.</p>

<p style="margin-top: 1em">OPTIONS <br>
Arguments to long options are mandatory for short options as
well.</p>

<p style="margin-top: 1em">-r, --addrd=AR <br>
Read an additional AR bytes (than indicated by SZ) from the
data buffer. Checksum is performed over the first SZ
bytes.</p>

<p style="margin-top: 1em">-w, --addwr=AW <br>
Write an additional AW bytes (than indicated by SZ) of zeros
into the data buffer. Checksum is generated over the first
SZ bytes.</p>

<p style="margin-top: 1em">-h, --help <br>
Print out a usage message the exit.</p>

<p style="margin-top: 1em">-q, --quick <br>
Perform a READ BUFFER descriptor command to find out the
available data buffer length and offset, print them out then
exit (without testing with write/read sequences).</p>

<p style="margin-top: 1em">-s, --size=SZ <br>
where SZ is the size of buffer in bytes to be written then
read and checked. This number needs to be less than or equal
to the size of the device&rsquo;s data buffer which can <br>
be seen from the --quick option. Either this option or the
--quick option should be given.</p>

<p style="margin-top: 1em">-t, --times=NUM <br>
where NUM is the number of times to repeat the write/read to
buffer test. Default value is 1 .</p>

<p style="margin-top: 1em">-v, --verbose <br>
increase verbosity of output.</p>

<p style="margin-top: 1em">-V, --version <br>
print version number (and data of last change) then
exit.</p>

<p style="margin-top: 1em">NOTES <br>
The microcode in a SCSI device is _not_ modified by doing a
WRITE BUFFER command with its mode set to &quot;data&quot;
(0x2) as done by this utility. Therefore this utility is
safe in that <br>
respect. [Mode values 0x4, 0x5, 0x6 and 0x7 are the
dangerous ones :-)]</p>

<p style="margin-top: 1em">WARNING: If you access the
device at the same time (e.g. because it&rsquo;s a hard disk
with a mounted file system on it) the device&rsquo;s buffer
may be used by the device itself for other <br>
data at the same time, and overwriting it may or may not
cause data corruption! HOWEVER the SPC-3 draft standard does
state in its WRITE BUFFER command: &quot;This command shall
not <br>
alter any medium of the logical unit when data mode ... is
specified&quot;. This implies that it _is_ safe to use this
utility with devices that have mounted file systems on them.
<br>
Following this theme further, a disk with active mounted
file systems may cause the data read back to be different
(due to caching activity) to what was written and hence a
<br>
checksum error.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The exit status of sg_test_rwbuf is 0 when it is successful.
Otherwise see the sg3_utils(8) man page.</p>

<p style="margin-top: 1em">AUTHORS <br>
Written by D. Gilbert and K. Garloff</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2000-2012 Douglas Gilbert, Kurt
Garloff <br>
This software is distributed under the GPL version 2. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<p style="margin-top: 1em">sg3_utils-1.35 November 2012
SG_TEST_RWBUF(8)</p>
<hr>
</body>
</html>
