<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MFSMETARESTORE(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MFSMETARESTORE(8)</td>
    <td class="head-vol">&#x00A0;</td>
    <td class="head-rtitle">MFSMETARESTORE(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mfsmetarestore - replay LizardFS metadata change logs or dump LizardFS metadata
  image
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<b>mfsmetarestore</b> [<b>-z</b>] <b>-m</b> <i>OLDMETADATAFILE</i> <b>-o</b> <i>NEWMETADATAFILE</i> [<i>CHANGELOGFILE</i>...]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<b>mfsmetarestore</b> <b>-m</b> <i>METADATAFILE</i>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<b>mfsmetarestore</b> [<b>-z</b>] <b>-a</b> [<b>-d</b> <i>DIRECTORY</i>]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<b>mfsmetarestore</b> <b>-g</b> <b>-d</b> <i>DIRECTORY</i>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<b>mfsmetarestore -v</b>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<b>mfsmetarestore -?</b>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
When <b>mfsmetarestore</b> is called with both <b>-m</b> and <b>-o</b> options,
  it replays given <i>CHANGELOGFILEs</i> on <i>OLDMETADATAFILE</i> and writes
  result to <i>NEWMETADATAFILE</i>. Multiple change log files can be given.
<div style="height: 1.00em;">&#x00A0;</div>
<b>mfsmetarestore</b> with just <b>-m</b> <i>METADATAFILE</i> option dumps
  LizardFS metadata image file in human readable form.
<div style="height: 1.00em;">&#x00A0;</div>
<b>mfsmetarestore</b> called with -a option automatically performs all
  operations needed to merge change log files. Master data directory can be
  specified using -d <i>DIRECTORY</i> option.
<div style="height: 1.00em;">&#x00A0;</div>
<b>mfsmetarestore</b> -g with path to metadata files, prints latest metadata
  version that can be restored from disk. Prints 0 if metadata files are
  corrupted.
<div class="Pp"></div>
<b>-v</b>
<div style="margin-left: 4.00ex;">print version information and exit</div>
<div class="Pp"></div>
<b>-?</b>
<div style="margin-left: 4.00ex;">print version information and exit</div>
<div class="Pp"></div>
<b>-a</b>
<div style="margin-left: 4.00ex;">autorestore mode (see above)</div>
<div class="Pp"></div>
<b>-d</b> <i>DATAPATH</i>
<div style="margin-left: 4.00ex;">master data directory (for autorestore
  mode)</div>
<div class="Pp"></div>
<b>-m</b> <i>METADATAFILE</i>
<div style="margin-left: 4.00ex;">specify input metadata image file</div>
<div class="Pp"></div>
<b>-o</b> <i>NEWMETADATAFILE</i>
<div style="margin-left: 4.00ex;">specify output metadata image file</div>
<div class="Pp"></div>
<b>-z</b>
<div style="margin-left: 4.00ex;">ignore metadata checksum inconsistency while
  applying changelogs</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>metadata.mfs</b>
<div style="margin-left: 4.00ex;">Lizard File System metadata image as read by
  <b>mfsmaster</b> process</div>
<div class="Pp"></div>
<b>metadata.mfs.back</b>
<div style="margin-left: 4.00ex;">Lizard File System metadata image as left by
  killed or crashed <b>mfsmaster</b> process</div>
<div class="Pp"></div>
<b>changelog.</b>*<b>.mfs</b>
<div style="margin-left: 4.00ex;">Lizard File System metadata change logs</div>
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to &lt;contact@lizardfs.org&gt;.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2008-2009 Gemius SA, 2013-2015 Skytechnology sp. z o.o.
<div style="height: 1.00em;">&#x00A0;</div>
LizardFS is free software: you can redistribute it and/or modify it under the
  terms of the GNU General Public License as published by the Free Software
  Foundation, version 3.
<div style="height: 1.00em;">&#x00A0;</div>
LizardFS is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div style="height: 1.00em;">&#x00A0;</div>
You should have received a copy of the GNU General Public License along with
  LizardFS. If not, see http://www.gnu.org/licenses/.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
mfsmaster(8), moosefs(7)</div>
<table class="foot">
  <tr>
    <td class="foot-date">11/19/2016</td>
    <td class="foot-os">&#x00A0;</td>
  </tr>
</table>
</body>
</html>
