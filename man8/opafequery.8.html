<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opafequery(8) Master map:
IFSFFCLIRG (Man Page) opafequery(8)</p>

<p style="margin-top: 1em">NAME <br>
opafequery</p>

<p style="margin-top: 1em">(All) Used for testing or
debugging performance administration (PA) operations to the
Fabric Executive (FE). This tool performs custom PA
client/server queries. The output for&acirc; <br>
mats and arguments are very similar to opapaquery.</p>

<p style="margin-top: 1em">Syntax <br>
opafequery [-v] [-a ipAddr| -h hostName] [-E] [-T
paramsfile] -o type[SA options | PA options]</p>

<p style="margin-top: 1em">General Options <br>
--help Produce this help text.</p>

<p style="margin-top: 1em">-v / --verbose <br>
Verbose output.</p>

<p style="margin-top: 1em">-a / --ipAddr ipAddr <br>
IP address of node running the FE.</p>

<p style="margin-top: 1em">-h / --hostName hostName <br>
Host name of node running the FE.</p>

<p style="margin-top: 1em">-o / --output output <br>
Output type. See SA Output Types and PA Output Types for
details.</p>

<p style="margin-top: 1em">-E / --feEsm ESMName <br>
ESM FE name.</p>

<p style="margin-top: 1em">-T / --sslParmsFile filename
<br>
SSL/TLS parameters XML file. Default =
/etc/sysconfig/opa/opaff.xml</p>

<p style="margin-top: 1em">SA Specific Options <br>
-I / --IB Issues query in legacy InfiniBand* format.</p>

<p style="margin-top: 1em">-l / --lid lid <br>
Queries a specific LID.</p>

<p style="margin-top: 1em">-k / --pkey pkey <br>
Queries a specific pkey.</p>

<p style="margin-top: 1em">-i / --vfindex vfindex <br>
Queries a specific vfindex.</p>

<p style="margin-top: 1em">-S / --serviceId serviceId <br>
Queries a specific service ID.</p>

<p style="margin-top: 1em">-L / --SL SL <br>
Queries by service level.</p>

<p style="margin-top: 1em">-t / --type type <br>
Queries by node type.</p>

<p style="margin-top: 1em">-s / --sysguid guid <br>
Queries by system image GUID.</p>

<p style="margin-top: 1em">-n / --nodeguid guid <br>
Queries by node GUID.</p>

<p style="margin-top: 1em">-p / --portguid guid <br>
Queries by port GUID.</p>

<p style="margin-top: 1em">-u / --portgid gid <br>
Queries by port GID.</p>

<p style="margin-top: 1em">-m / --mcgid gid <br>
Queries by multicast GID.</p>

<p style="margin-top: 1em">-d / --desc name <br>
Queries by node name/description.</p>

<p style="margin-top: 1em">-P / --guidpair &rsquo;guid
guid&rsquo; <br>
Queries by a pair of port GUIDs.</p>

<p style="margin-top: 1em">-G / --gidpair &rsquo;gid
gid&rsquo; <br>
Queries by a pair of GIDs.</p>

<p style="margin-top: 1em">-B / --guidlist &rsquo;sguid
...;dguid ...&rsquo; <br>
Queries by a list of port GUIDs.</p>

<p style="margin-top: 1em">-A / --gidlist &rsquo;sgid
...;dgid ...&rsquo; <br>
Queries by a list of GIDs.</p>

<p style="margin-top: 1em">-x / --sourcegid gid <br>
Specifies a source GID for certain queries.</p>

<p style="margin-top: 1em">PA Specific Options <br>
-g / --groupName groupName <br>
Group name for groupInfo query.</p>

<p style="margin-top: 1em">-l / --lid lid <br>
LID of node for portCounters query.</p>

<p style="margin-top: 1em">-N / --portNumber <br>
Port number for portCounters query.</p>

<p style="margin-top: 1em">-f / --delta <br>
Delta flag for portCounters query. Values include: 0 or
1.</p>

<p style="margin-top: 1em">-U / --userCntrs <br>
User-controlled counters flag for portCounters query.</p>

<p style="margin-top: 1em">-e / --select <br>
32-bit select flag for clearing port counters select bits. 0
is least significant (rightmost).Bit descriptions are listed
below in the order &quot;mask - bit - location&quot;:</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x80000000 - 31
- Transmit Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x40000000 - 30
- Receive Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x20000000 - 29
- Transmit Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x10000000 - 28
- Receive Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x08000000 - 27
- Multicast Transmit Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x04000000 - 26
- Multicast Receive Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x02000000 - 25
- Transmit Wait</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x01000000 - 24
- Congestion Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00800000 - 23
- Receive FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00400000 - 22
- Receive BECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00200000 - 21
- Transmit Time Cong.</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00100000 - 20
- Transmit Time Wasted BW</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00080000 - 19
- Transmit Time Wait Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00040000 - 18
- Receive Bubble</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00020000 - 17
- Mark FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00010000 - 16
- Receive Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00008000 - 15
- Receive Switch Relay</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00004000 - 14
- Transmit Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00002000 - 13
- Transmit Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00001000 - 12
- Receive Remote Phys. Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000800 - 11
- Local Link Integrity</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000400 - 10
- Receive Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000200 - 9 -
Exc. Buffer Overrun</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000100 - 8 -
FM Configuration Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000080 - 7 -
Link Error Recovery</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000040 - 6 -
Link Error Downed</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000020 - 5 -
Uncorrectable Errors</p>

<p style="margin-top: 1em">-c / --focus focus <br>
Focus select value for getting focus ports. Values
include:</p>

<p style="margin-top: 1em">utilhigh Sorted by utilization -
highest first.</p>

<p style="margin-top: 1em">pktrate Sorted by packet rate -
highest first.</p>

<p style="margin-top: 1em">utillow Sorted by utilization -
lowest first.</p>

<p style="margin-top: 1em">integrity Sorted by integrity
errors - highest first.</p>

<p style="margin-top: 1em">congestion <br>
Sorted by congestion errors - highest first.</p>

<p style="margin-top: 1em">smacongesion <br>
Sorted by SMA congestion errors - highest first.</p>

<p style="margin-top: 1em">bubbles Sorted by bubble errors
- highest first.</p>

<p style="margin-top: 1em">security Sorted by security
errors - highest first.</p>

<p style="margin-top: 1em">routing Sorted by routing errors
- highest first.</p>

<p style="margin-top: 1em">-w / --start <br>
Start of window for focus ports - should always be 0.</p>

<p style="margin-top: 1em">-r / --range range <br>
Size of window for focus ports list.</p>

<p style="margin-top: 1em">-b / --imgNum <br>
64-bit image number. May be used with groupInfo,
groupConfig, portCounters (delta) outputs.</p>

<p style="margin-top: 1em">-O / --imgOff <br>
Image offset. May be used with groupInfo, groupConfig,
portCounters (delta) outputs.</p>

<p style="margin-top: 1em">-F / --moveImgNum <br>
64-bit image number. Used with moveFreeze output to move a
freeze image.</p>

<p style="margin-top: 1em">-M / --moveImgOff ImgOff <br>
Image offset. May be used with moveFreeze output to move a
freeze image.</p>

<p style="margin-top: 1em">-V / --vfName <br>
VF name for vfInfo query.</p>

<p style="margin-top: 1em">SA Output Types <br>
Output types include:</p>

<p style="margin-top: 1em">saclassPortInfo <br>
Class port info.</p>

<p style="margin-top: 1em">systemguid <br>
List of system image GUIDs.</p>

<p style="margin-top: 1em">nodeguid List of node GUIDs.</p>

<p style="margin-top: 1em">portguid List of port GUIDs.</p>

<p style="margin-top: 1em">lid List of LIDs.</p>

<p style="margin-top: 1em">desc List of node
descriptions/names.</p>

<p style="margin-top: 1em">path List of path records.</p>

<p style="margin-top: 1em">node List of node records.</p>

<p style="margin-top: 1em">portinfo List of port info
records.</p>

<p style="margin-top: 1em">sminfo List of SM info
records.</p>

<p style="margin-top: 1em">swinfo List of switch info
records.</p>

<p style="margin-top: 1em">link List of link records.</p>

<p style="margin-top: 1em">scsc List of SC to SC mapping
table records.</p>

<p style="margin-top: 1em">slsc List of SL to SC mapping
table records.</p>

<p style="margin-top: 1em">scsl List of SC to SL mapping
table records.</p>

<p style="margin-top: 1em">scvlt List of SC to VLt table
records.</p>

<p style="margin-top: 1em">scvlnt List of SC to VLnt table
records.</p>

<p style="margin-top: 1em">vlarb List of VL arbitration
table records.</p>

<p style="margin-top: 1em">pkey List of PKey table
records.</p>

<p style="margin-top: 1em">service List of service
records.</p>

<p style="margin-top: 1em">mcmember List of multicast
member records.</p>

<p style="margin-top: 1em">inform List of inform info
records.</p>

<p style="margin-top: 1em">linfdb List of switch linear
forwarding database (FDB) records.</p>

<p style="margin-top: 1em">mcfdb List of switch multicast
FDB records.</p>

<p style="margin-top: 1em">trace List of trace records.</p>

<p style="margin-top: 1em">vfinfo List of vFabrics.</p>

<p style="margin-top: 1em">vfinfocsv List of vFabrics in
CSV format.</p>

<p style="margin-top: 1em">vfinfocsv2 <br>
List of vFabrics in CSV format with enums.</p>

<p style="margin-top: 1em">fabricinfo <br>
Summary of fabric devices.</p>

<p style="margin-top: 1em">quarantine <br>
List of quarantined nodes.</p>

<p style="margin-top: 1em">conginfo List of Congestion Info
Records.</p>

<p style="margin-top: 1em">swcongset List of Switch
Congestion Settings.</p>

<p style="margin-top: 1em">hficongset <br>
List of HFI Congestion Settings.</p>

<p style="margin-top: 1em">hficongcon <br>
List of HFI Congestion Control Settings.</p>

<p style="margin-top: 1em">bfrctrl List of buffer control
tables.</p>

<p style="margin-top: 1em">cableinfo List of Cable Info
records.</p>

<p style="margin-top: 1em">portgroup List of AR Port Group
records.</p>

<p style="margin-top: 1em">portgroupfdb <br>
List of AR Port Group FWD records.</p>

<p style="margin-top: 1em">PA Output Types <br>
paclassPortInfo <br>
Class port info.</p>

<p style="margin-top: 1em">groupList List of PA groups.</p>

<p style="margin-top: 1em">groupInfo Summary statistics of
a PA group. Requires -g option for groupName.</p>

<p style="margin-top: 1em">groupConfig <br>
Configuration of a PA group. Requires -g option for
groupName.</p>

<p style="margin-top: 1em">portCounters <br>
Port counters of fabric port. Requires -l lid and -N port
options. Optionally, use the -f delta option.</p>

<p style="margin-top: 1em">clrPortCounters <br>
Clears port counters of fabric port. Requires -l lid, -N
port, and -e select options.</p>

<p style="margin-top: 1em">clrAllPortCounters <br>
Clears all port counters in fabric.</p>

<p style="margin-top: 1em">pmConfig Retrieves PM
configuration information.</p>

<p style="margin-top: 1em">freezeImage <br>
Creates freeze frame for image ID. Requires -b imgNum.</p>

<p style="margin-top: 1em">releaseImage <br>
Releases freeze frame for image ID. Requires -b imgNum.</p>

<p style="margin-top: 1em">renewImage <br>
Renews lease for freeze frame for image ID. Requires
-b#8217#160; imgNum.</p>

<p style="margin-top: 1em">moveFreeze <br>
Moves freeze frame from image ID to new image ID. Requires
-b#8217#160; imgNum and -F moveImgNum.</p>

<p style="margin-top: 1em">focusPorts <br>
Gets sorted list of ports using utilization or error values
(from group buckets).</p>

<p style="margin-top: 1em">imageInfo Gets information about
a PA image (timestamps and other details). Requires -b
imgNum.</p>

<p style="margin-top: 1em">vfList List of virtual
fabrics.</p>

<p style="margin-top: 1em">vfInfo Summary statistics of a
virtual fabric. Requires -V vfName option.</p>

<p style="margin-top: 1em">vfConfig Configuration of a
virtual fabric. Requires -V vfName option.</p>

<p style="margin-top: 1em">vfPortCounters <br>
Port counters of fabric port. Requires -V vfName, -l lid,
and -N port options. Optionally, use the -f delta
option.</p>

<p style="margin-top: 1em">vfFocusPorts <br>
Gets sorted list of virtual fabric ports usingutilization or
error values (from VF buckets). Requires -V vfName
option.</p>

<p style="margin-top: 1em">clrVfPortCounters <br>
Clears VF port counters of fabric port. Requires -l lid, -N
port, -e select, and -V vfName options.</p>

<p style="margin-top: 1em">Examples <br>
opafequery -o saclassPortInfo <br>
opafequery -h stewie -o paclassPortInfo <br>
opafequery -a 172.21.2.155 -o saclassPortInfo <br>
opafequery -o groupList <br>
opafequery -o groupInfo -g All <br>
opafequery -o groupConfig -g All <br>
opafequery -h stewie -o groupInfo -g All <br>
opafequery -a 172.21.2.155 -o groupInfo -g All <br>
opafequery -o portCounters -l 1 -N 1 -d 1 <br>
opafequery -o portCounters -l 1 -N 1 -d 1 -e 0x20000000d02
-O 1 <br>
opafequery -o pmConfig <br>
opafequery -o freezeImage 0x20000000d02 <br>
opafequery -o releaseImage -b 0xd01 <br>
opafequery -o renewImage -b 0xd01 <br>
opafequery -o moveFreeze -b 0xd01 -m 0x20000000d02 -M -2
<br>
opafequery -o focusPorts -g All -f 0x00030001 -w 0 -r 20
<br>
opafequery -o imageInfo -b 0x20000000d02</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opafequery(8)</p>
<hr>
</body>
</html>
