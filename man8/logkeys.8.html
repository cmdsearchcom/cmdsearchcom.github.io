<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:01 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>logkeys(8) System Manager&rsquo;s Manual logkeys(8)</p>

<p style="margin-top: 1em">NAME <br>
logkeys - a GNU/Linux keylogger that works!</p>

<p style="margin-top: 1em">SYNOPSIS <br>
logkeys -s [-m keymap | -u] [-o logfile] [-d device] <br>
[--no-func-keys] [--no-timestamps] <br>
[--post-http=URL] [--post-size=SIZE] <br>
logkeys -k <br>
logkeys [--export-keymap=keymap]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
logkeys is a linux keylogger. It is no more advanced than
other available linux keyloggers, notably lkl and uberkey,
but is a bit newer, more up to date, it doesn&rsquo;t
unreliably <br>
repeat keys and it shouldn&rsquo;t crash your X. All in all,
it just seems to work. It relies on the event interface of
Linux input subsystem (normally devices
/dev/input/eventX).</p>

<p style="margin-top: 1em">Once set, it logs all common
character and function keys, while also being fully aware of
Shift and AltGr key modifiers. It tries to automatically
determine the correct input <br>
device, and may in some cases also get the character keys
mapping right.</p>

<p style="margin-top: 1em">OPTIONS <br>
Non-optional arguments are required for short options
too.</p>

<p style="margin-top: 1em">-s, --start <br>
Starts the keylogging daemon process.</p>

<p style="margin-top: 1em">-k, --kill <br>
Terminates the running logkeys process.</p>

<p style="margin-top: 1em">-o, --output=logfile <br>
Set output log file to logfile. If no -o option is provided,
logkeys appends to /var/log/logkeys.log file. If logfile
doesn&rsquo;t exist, logkeys creates the file with 600
per&acirc; <br>
missions.</p>

<p style="margin-top: 1em">See also LOGFILE FORMAT
section.</p>

<p style="margin-top: 1em">-m, --keymap=keymap <br>
Use file keymap as input keymap for processing pressed
keys.</p>

<p style="margin-top: 1em">This option works best if keymap
is hand corrected file, which had been previously exported
by --export-keymap.</p>

<p style="margin-top: 1em">See also KEYMAP FORMAT
section.</p>

<p style="margin-top: 1em">-m and -u option are mutually
exclusive.</p>

<p style="margin-top: 1em">-d, --device=device <br>
Use device as keyboard input event device instead of
/dev/input/eventX default.</p>

<p style="margin-top: 1em">You can determine the keyboard
device to be used by examining /proc/bus/input/devices.</p>

<p style="margin-top: 1em">-u, --us-keymap <br>
This option makes logkeys interpret keys as on standard US
keyboard.</p>

<p style="margin-top: 1em">-u and -m option are mutually
exclusive.</p>

<p style="margin-top: 1em">--export-keymap=keymap <br>
This option makes logkeys export dynamic keymap as obtained
from dumpkeys(1) to file keymap and then exit.</p>

<p style="margin-top: 1em">keymap can later be used with -m
option to override automatic keymap &quot;calculation&quot;,
which may be wrong.</p>

<p style="margin-top: 1em">It is advised that you manually
edit keymap and correct any mistakes as well as complete
deficient entries. It is also advised that you use
--export-keymap on a virtual <br>
terminal outside of X (/dev/ttyX).</p>

<p style="margin-top: 1em">See section KEYMAP FORMAT for
exported keymap format.</p>

<p style="margin-top: 1em">--no-func-keys <br>
This option makes logkeys log all and only character key
presses (1, 2, ..., q, w, e, ..., a, s, d, f, ..., &quot;,
@, ...).</p>

<p style="margin-top: 1em">This option may be useful when
correct keymap can reliably be expected (i.e. by providing
it with -m option). Then only character keys are logged,
influenced by Shift and <br>
AltGr modifiers.</p>

<p style="margin-top: 1em">--no-timestamps <br>
When this option is set, logkeys doesn&rsquo;t prepend
timestamp to each line of log file. Timestamps are only
logged when logkeys starts and stops.</p>

<p style="margin-top: 1em">--post-size=SIZE <br>
When log size reaches SIZE, the current log filename is
appended .X, where X is ascending number (e.g.
logfile.1).</p>

<p style="margin-top: 1em">When that happens, logkeys
starts remote uploading process and all logfile.X files are
uploaded as specified by --post-http or --post-irc
options.</p>

<p style="margin-top: 1em">If --post-size is set, but no
post method is set, then the logfile is only truncated when
it reaches SIZE, renamed to logfile.X, and a new blank
logfile is created for <br>
active logging.</p>

<p style="margin-top: 1em">If --post-size is not set, but
post method is, then the default SIZE of 500 KB (500.000 B)
is used.</p>

<p style="margin-top: 1em">If --post-size is not set, and
neither is any post method, then logkeys appends to the
single specified log file.</p>

<p style="margin-top: 1em">SIZE can be an integer bytesize,
or an intger followed by K or M for kilobytes or megabytes,
respectively.</p>

<p style="margin-top: 1em">--post-http=URL <br>
This option tells logkeys to POST the log file to URL, where
it is preferrably greeted by a (PHP) script.</p>

<p style="margin-top: 1em">The file is sent with header
Content-Type:&Acirc;&nbsp;multipart/form-data as file, so it
is accessible in PHP via $_FILES[&rsquo;file&rsquo;]
variable.</p>

<p style="margin-top: 1em">FILES <br>
/var/log/logkeys.log <br>
When -o option is not used, logkeys appends to this default
log file.</p>

<p style="margin-top: 1em">etc/logkeys-start.sh <br>
Setuid root program llk runs this script. Edit the contents
to suit your needs.</p>

<p style="margin-top: 1em">etc/logkeys-stop.sh <br>
Setuid root program llkk runs this script. Default value
should work well.</p>

<p style="margin-top: 1em">LOGFILE FORMAT <br>
Log files are UTF-8 encoded.</p>

<p style="margin-top: 1em">Each logging session is enclosed
in &quot;Logging started... [&lt;timestamp&gt;]&quot; and
&quot;Logging stopped at &lt;timestamp&gt;&quot; strings.
Whenever Enter key (Return key) or Ctrl+C or Ctrl+D
combina&acirc; <br>
tion is pressed, a timestamp is appended on a new line
(provided --no-timestamps is not in effect).</p>

<p style="margin-top: 1em">Timestamp format is &quot;%F
%T%z&quot;, which results in &quot;YYYY-mm-dd
HH:MM:SS+ZZZZ&quot;. Timestamp is separated from the logged
keys by one &rsquo;&gt;&rsquo; symbol.</p>

<p style="margin-top: 1em">All character key presses are
logged as they appear. All function key presses are replaced
with strings as obtained from keymap file, or as hardcoded
when no keymap file is pro&acirc; <br>
vided.</p>

<p style="margin-top: 1em">If a key is pressed down long
enough so it repeats, it is logged only once and then
&quot;&lt;#+DD&gt;&quot; is appended, which hints the key
was repeated DD more times. The DD decimal figure is <br>
not to be relied on.</p>

<p style="margin-top: 1em">If a keypress results in
keycode, which is not recognized (i.e. key not found on a
standard US or Intl 105-key keyboard), then the string
&quot;&lt;E-XX&gt;&quot; is appended, where XX is the <br>
received keycode in hexadecimal format. All new
&quot;WWW&quot;, &quot;E-Mail&quot;, &quot;Volume+&quot;,
&quot;Media&quot;, &quot;Help&quot;, etc. keys will result
in such error strings.</p>

<p style="margin-top: 1em">Using US keyboard layout, one
example log file could look like:</p>

<p style="margin-top: 1em">Logging started ...</p>

<p style="margin-top: 1em">2009-12-11 09:58:17+0100 &gt;
llk <br>
2009-12-11 09:58:20+0100 &gt; sudo cp
&lt;RShift&gt;~/foo.&lt;Tab&gt; /usr/bin <br>
2009-12-11 09:58:26+0100 &gt;
&lt;LShift&gt;R00&lt;LShift&gt;T_p455\/0rD <br>
2009-12-11 09:58:39+0100 &gt;
&lt;Up&gt;&lt;Up&gt;&lt;Home&gt;sudo <br>
2009-12-11 09:58:44+0100 &gt;
c&lt;#+53&gt;&lt;BckSp&gt;&lt;#+34&gt;&lt;LCtrl&gt;c <br>
2009-12-11 09:58:54+0100 &gt; llkk</p>

<p style="margin-top: 1em">Logging stopped at 2009-12-11
09:58:54+0100</p>

<p style="margin-top: 1em">If the same log was obtained by
a logkeys process invoked with --no-func-keys option, it
would look like:</p>

<p style="margin-top: 1em">Logging started ...</p>

<p style="margin-top: 1em">2009-12-11 09:58:17+0100 &gt;
llk <br>
2009-12-11 09:58:20+0100 &gt; sudo cp ~/foo. /usr/bin <br>
2009-12-11 09:58:26+0100 &gt; R00T_p455\/0rD <br>
2009-12-11 09:58:39+0100 &gt; sudo <br>
2009-12-11 09:58:44+0100 &gt; c&lt;#+53&gt;c <br>
2009-12-11 09:58:54+0100 &gt; llkk</p>

<p style="margin-top: 1em">Logging stopped at 2009-12-11
09:58:54+0100</p>

<p style="margin-top: 1em">Even when --no-func-keys is in
effect, Space and Tab key presses are logged as a single
space character.</p>

<p style="margin-top: 1em">KEYMAP FORMAT <br>
The keymap file is expected to be UTF-8 encoded.</p>

<p style="margin-top: 1em">Each line of file represents
either one character key or one function key. The format
specifies at least one and up to three space-delimited
characters on character key lines <br>
(first without modifiers, optional second with Shift in
action, optional third with AltGr in action), and up to 7
characters long string on function key lines.</p>

<p style="margin-top: 1em">First three lines in a Slovene
keymap file look like:</p>

<p style="margin-top: 1em">&lt;Esc&gt; <br>
1 ! ~ <br>
2 &quot; &Euml;</p>

<p style="margin-top: 1em">How does one know which lines
belong to character keys and which lines to function
keys?</p>

<p style="margin-top: 1em">Well, the easiest way is to use
--export-keymap, and examine the exported keymap. Make sure
you export in a virtual terminal (ttyX) and not in X as this
way more keys could get <br>
exported correctly (don&rsquo;t ask me why).</p>

<p style="margin-top: 1em">Basically, --export-keymap
ouputs 106 lines for 106 keys, even if some of those keys
aren&rsquo;t located on your keyboard. Lines 1, 14, 15, 28,
29, 42, 54-83, 85-106 belong to func&acirc; <br>
tion keys, all other lines (2-13, 16-27, 30-41, 43-53, 84)
belong to character keys.</p>

<p style="margin-top: 1em">Line 57 is reserved for Space
and it should always be &rsquo; &rsquo;. Line 84 is reserved
for the key just right to left Shift that is present on some
international layouts. Other lines <br>
can be quite reliably determined by looking at one exported
keymap. The keys generally follow the order of their
appearance on the keyboard, top-to-bottom left-to-right.</p>

<p style="margin-top: 1em">If you create full and
completely valid keymap for your particular language, please
upload it to project website or send it to me by e-mail.
Thanks.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To print short help:</p>

<p style="margin-top: 1em">$ logkeys</p>

<p style="margin-top: 1em">To start logging to a custom log
file with dynamically generated keymap:</p>

<p style="margin-top: 1em">$ logkeys --start --output
/home/user/.secret/log</p>

<p style="margin-top: 1em">To start logging to default log
file on a standard US keyboard:</p>

<p style="margin-top: 1em">$ logkeys --start
--us-keymap</p>

<p style="margin-top: 1em">To export dynamically generated
keymap to file:</p>

<p style="margin-top: 1em">$ logkeys --export-keymap
my_keymap</p>

<p style="margin-top: 1em">To start logging to default log
file with a custom keymap:</p>

<p style="margin-top: 1em">$ logkeys --start --keymap
my_keymap</p>

<p style="margin-top: 1em">To use a custom event device
(e.g. /dev/input/event4):</p>

<p style="margin-top: 1em">$ logkeys --start --device
event4</p>

<p style="margin-top: 1em">To end running logkeys
process:</p>

<p style="margin-top: 1em">$ logkeys --kill</p>

<p style="margin-top: 1em">BUGS <br>
logkeys relies on numeric output of dumpkeys(1), which
keymaps(5) manual page specifically discourages as
unportable.</p>

<p style="margin-top: 1em">Be nice and hope nothing
breaks.</p>

<p style="margin-top: 1em">If you come across any bugs,
please report them on project website, issues page:</p>


<p style="margin-top: 1em">http://code.google.com/p/logkeys/issues/</p>

<p style="margin-top: 1em">AUTHOR <br>
logkeys was written by Kernc
&lt;kerncece+logkeys@gmail.com&gt; with much help from the
community.</p>

<p style="margin-top: 1em">You can always obtain the latest
version and information at project website:
&lt;http://code.google.com/p/logkeys/&gt;.</p>

<p style="margin-top: 1em">2010-05-25 logkeys(8)</p>
<hr>
</body>
</html>
