<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:16:48 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>NAT action in tc(8) Linux NAT action in tc(8)</p>

<p style="margin-top: 1em">NAME <br>
nat - stateless native address translation action</p>

<p style="margin-top: 1em">SYNOPSIS <br>
tc ... action nat DIRECTION OLD NEW</p>

<p style="margin-top: 1em">DIRECTION := { ingress | egress
}</p>

<p style="margin-top: 1em">OLD := IPV4_ADDR_SPEC</p>

<p style="margin-top: 1em">NEW := IPV4_ADDR_SPEC</p>

<p style="margin-top: 1em">IPV4_ADDR_SPEC := { default |
any | all | in_addr[/{prefix|netmask}]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The nat action allows to perform NAT without the overhead of
conntrack, which is desirable if the number of flows or
addresses to perform NAT on is large. This action is best
<br>
used in combination with the u32 filter to allow for
efficient lookups of a large number of stateless NAT rules
in constant time.</p>

<p style="margin-top: 1em">OPTIONS <br>
ingress <br>
Translate destination addresses, i.e. perform DNAT.</p>

<p style="margin-top: 1em">egress Translate source
addresses, i.e. perform SNAT.</p>

<p style="margin-top: 1em">OLD Specifies addresses which
should be translated.</p>

<p style="margin-top: 1em">NEW Specifies addresses which
OLD should be translated into.</p>

<p style="margin-top: 1em">NOTES <br>
The accepted address format in OLD and NEW is quite
flexible. It may either consist of one of the keywords
default, any or all, representing the all-zero IP address or
a combina&acirc; <br>
tion of IP address and netmask or prefix length separated by
a slash (/) sign. In any case, the mask (or prefix length)
value of OLD is used for NEW as well so that a one-to-one
<br>
mapping of addresses is assured.</p>

<p style="margin-top: 1em">Address translation is done
using a combination of binary operations. First, the
original (source or destination) address is matched against
the value of OLD. If the original <br>
address fits, the new address is created by taking the
leading bits from NEW (defined by the netmask of OLD) and
taking the remaining bits from the original address.</p>

<p style="margin-top: 1em">There is rudimental support for
upper layer protocols, namely TCP, UDP and ICMP. While for
the first two only checksum recalculation is performed, the
action also takes care of <br>
embedded IP headers in ICMP packets by translating the
respective address therein, too.</p>

<p style="margin-top: 1em">SEE ALSO <br>
tc(8)</p>

<p style="margin-top: 1em">iproute2 12 Jan 2015 NAT action
in tc(8)</p>
<hr>
</body>
</html>
