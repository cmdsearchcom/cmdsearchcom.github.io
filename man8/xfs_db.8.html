<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>xfs_db(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">xfs_db(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">xfs_db(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
xfs_db - debug an XFS filesystem
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>xfs_db</b> [ <b>-c</b> <i>cmd</i> ] ... [
  <b>-i</b>|<b>r</b>|<b>x</b>|<b>F</b> ] [ <b>-f</b> ] [ <b>-l</b> <i>logdev</i>
  ] [ <b>-p</b> <i>progname</i> ] <i>device</i>
<div>&#x00A0;</div>
<b>xfs_db -V</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>xfs_db</b> is used to examine an XFS filesystem. Under rare circumstances it
  can also be used to modify an XFS filesystem, but that task is normally left
  to <b>xfs_repair</b>(8) or to scripts such as <b>xfs_admin</b>(8) that run
  <b>xfs_db</b>.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b><i> cmd</i></dt>
  <dd class="It-tag"><b>xfs_db</b> commands may be run interactively (the
      default) or as arguments on the command line. Multiple <b>-c</b> arguments
      may be given. The commands are run in the sequence given, then the program
      exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">Specifies that the filesystem image to be processed is
      stored in a regular file at <i>device</i> (see the <b>mkfs.xfs</b>(8)
      <b>-d</b> <i>file</i> option). This might happen if an image copy of a
      filesystem has been made into an ordinary file with
    <b>xfs_copy</b>(8).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b></dt>
  <dd class="It-tag">Specifies that we want to continue even if the superblock
      magic is not correct. For use in <b>xfs_metadump</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">Allows execution on a mounted filesystem, provided it is
      mounted read-only. Useful for shell scripts which must only operate on
      filesystems in a guaranteed consistent state (either unmounted or mounted
      read-only). These semantics are slightly different to that of the
      <b>-r</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b><i> logdev</i></dt>
  <dd class="It-tag">Specifies the device where the filesystems external log
      resides. Only for those filesystems which use an external log. See the
      <b>mkfs.xfs</b>(8) <b>-l</b> option, and refer to <b>xfs</b>(5) for a
      detailed description of the XFS log.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b><i> progname</i></dt>
  <dd class="It-tag">Set the program name to <i>progname</i> for prompts and
      some error messages, the default value is <b>xfs_db</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">Open <i>device</i> or <i>filename</i> read-only. This
      option is required if the filesystem is mounted. It is only necessary to
      omit this flag if a command that changes data (<b>write</b>,
      <b>blocktrash</b>) is to be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Specifies expert mode. This enables the <b>write</b> and
      <b>blocktrash</b> commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">Prints the version number and exits.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONCEPTS"><a class="selflink" href="#CONCEPTS">CONCEPTS</a></h1>
<b>xfs_db</b> commands can be broken up into two classes. Most commands are for
  the navigation and display of data structures in the filesystem. Other
  commands are for scanning the filesystem in some way.
<div class="Pp"></div>
Commands which are used to navigate the filesystem structure take arguments
  which reflect the names of filesystem structure fields. There can be multiple
  field names separated by dots when the underlying structures are nested, as in
  C. The field names can be indexed (as an array index) if the underlying field
  is an array. The array indices can be specified as a range, two numbers
  separated by a dash.
<div class="Pp"></div>
<b>xfs_db</b> maintains a current address in the filesystem. The granularity of
  the address is a filesystem structure. This can be a filesystem block, an
  inode or quota (smaller than a filesystem block), or a directory block (could
  be larger than a filesystem block). There are a variety of commands to set the
  current address. Associated with the current address is the current data type,
  which is the structural type of this data. Commands which follow the structure
  of the filesystem always set the type as well as the address. Commands which
  examine pieces of an individual file (inode) need the current inode to be set,
  this is done with the <b>inode</b> command.
<div class="Pp"></div>
The current address/type information is actually maintained in a stack that can
  be explicitly manipulated with the <b>push</b>, <b>pop</b>, and <b>stack</b>
  commands. This allows for easy examination of a nested filesystem structure.
  Also, the last several locations visited are stored in a ring buffer which can
  be manipulated with the <b>forward</b>, <b>back</b>, and <b>ring</b> commands.
<div class="Pp"></div>
XFS filesystems are divided into a small number of allocation groups.
  <b>xfs_db</b> maintains a notion of the current allocation group which is
  manipulated by some commands. The initial allocation group is 0.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
Many commands have extensive online help. Use the <b>help</b> command for more
  details on any command.
<dl class="Bl-tag">
  <dt class="It-tag"><b>a</b></dt>
  <dd class="It-tag">See the <b>addr</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ablock</b><i> filoff</i></dt>
  <dd class="It-tag">Set current address to the offset <i>filoff</i> (a
      filesystem block number) in the attribute area of the current inode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>addr [</b><i>field-expression</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the value of the
      <i>field-expression</i>. This is used to &quot;follow&quot; a reference in
      one structure to the object being referred to. If no argument is given,
      the current address is printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agf [</b><i>agno</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the AGF block for allocation group
      <i>agno</i>. If no argument is given, use the current allocation
    group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agfl [</b><i>agno</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the AGFL block for allocation group
      <i>agno</i>. If no argument is given, use the current allocation
    group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agi [</b><i>agno</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the AGI block for allocation group
      <i>agno</i>. If no argument is given, use the current allocation
    group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>b</b></dt>
  <dd class="It-tag">See the <b>back</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>back</b></dt>
  <dd class="It-tag">Move to the previous location in the position ring.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blockfree</b></dt>
  <dd class="It-tag">Free block usage information collected by the last
      execution of the <b>blockget</b> command. This must be done before another
      <b>blockget</b> command can be given, presumably with different arguments
      than the previous one.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blockget [-npvs] [-b </b><i>bno</i><b>] ... [-i
    </b><i>ino</i><b>] ...</b></dt>
  <dd class="It-tag">Get block usage and check filesystem consistency. The
      information is saved for use by a subsequent <b>blockuse</b>,
      <b>ncheck</b>, or <b>blocktrash</b> command.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">is used to specify filesystem block numbers about which
      verbose information should be printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">is used to specify inode numbers about which verbose
      information should be printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">is used to save pathnames for inodes visited, this is used
      to support the <b>xfs_ncheck</b>(8) command. It also means that pathnames
      will be printed for inodes that have problems. This option uses a lot of
      memory so is not enabled by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">causes error messages to be prefixed with the filesystem
      name being processed. This is useful if several copies of <b>xfs_db</b>
      are run in parallel.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">restricts output to severe errors only. This is useful if
      the output is too long otherwise.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">enables verbose output. Messages will be printed for every
      block and inode processed.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocktrash [-z] [-o </b><i>offset</i><b>] [-n
    </b><i>count</i><b>] [-x </b><i>min</i><b>] [-y </b><i>max</i><b>] [-s
    </b><i>seed</i><b>] [-0|1|2|3] [-t </b><i>type</i><b>] ...</b></dt>
  <dd class="It-tag">Trash randomly selected filesystem metadata blocks.
      Trashing occurs to randomly selected bits in the chosen blocks. This
      command is available only in debugging versions of <b>xfs_db</b>. It is
      useful for testing <b>xfs_repair</b>(8).</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-0</b> | <b>-1</b> | <b>-2</b> | <b>-3</b></dt>
  <dd class="It-tag">These are used to set the operating mode for
      <b>blocktrash</b>. Only one can be used: <b>-0</b> changed bits are
      cleared; <b>-1</b> changed bits are set; <b>-2</b> changed bits are
      inverted; <b>-3</b> changed bits are randomized.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">supplies the <i>count</i> of block-trashings to perform
      (default 1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag">supplies the bit <i>offset</i> at which to start trashing
      the block. If the value is preceded by a '+', the trashing will start at a
      randomly chosen offset that is larger than the value supplied. The default
      is to randomly choose an offset anywhere in the block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">supplies a <i>seed</i> to the random processing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">gives a <i>type</i> of blocks to be selected for trashing.
      Multiple <b>-t</b> options may be given. If no <b>-t</b> options are given
      then all metadata types can be trashed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">sets the <i>minimum</i> size of bit range to be trashed.
      The default value is 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y</b></dt>
  <dd class="It-tag">sets the <i>maximum</i> size of bit range to be trashed.
      The default value is 1024.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b></dt>
  <dd class="It-tag">trashes the block at the top of the stack. It is not
      necessary to run <b>blockget</b> if this option is supplied.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blockuse [-n] [-c </b><i>count</i><b>]</b></dt>
  <dd class="It-tag">Print usage for current filesystem block(s). For each
      block, the type and (if any) inode are printed.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">specifies a <i>count</i> of blocks to process. The default
      value is 1 (the current block only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">specifies that file names should be printed. The prior
      <b>blockget</b> command must have also specified the <b>-n</b>
    option.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmap [-a] [-d] [</b><i>block</i><b>
    [</b><i>len</i><b>]]</b></dt>
  <dd class="It-tag">Show the block map for the current inode. The map display
      can be restricted to an area of the file with the <i>block</i> and
      <i>len</i> arguments. If <i>block</i> is given and <i>len</i> is omitted
      then 1 is assumed for len.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The <b>-a</b> and <b>-d</b> options are used to select the
      attribute or data area of the inode, if neither option is given then both
      areas are shown.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>check</b></dt>
  <dd class="It-tag">See the <b>blockget</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>convert </b><i>type number</i><b> [</b><i>type
    number</i><b>] ... </b><i>type</i></dt>
  <dd class="It-tag">Convert from one address form to another. The known
      <i>type</i>s, with alternate names, are:</dd>
</dl>
<div style="margin-left: 1.00in;">
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>agblock</b>
  or <b>agbno</b> (filesystem block within an allocation group)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>agino</b>
  or <b>aginode</b> (inode number within an allocation group)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>agnumber</b>
  or <b>agno</b> (allocation group number)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>bboff</b>
  or <b>daddroff</b> (byte offset in a <b>daddr</b>)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>blkoff</b>
  or <b>fsboff or</b> <b>agboff</b> (byte offset in a <b>agblock</b> or
  <b>fsblock</b>)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>byte</b>
  or <b>fsbyte</b> (byte address in filesystem)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>daddr</b>
  or <b>bb</b> (disk address, 512-byte blocks)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>fsblock</b>
  or <b>fsb</b> or <b>fsbno</b> (filesystem block, see the <b>fsblock</b>
  command)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>ino</b> or
  <b>inode</b> (inode number)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>inoidx</b>
  or <b>offset</b> (index of inode in filesystem block)</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>inooff</b>
  or <b>inodeoff</b> (byte offset in inode)</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Only conversions that &quot;make sense&quot; are allowed.
      The compound form (with more than three arguments) is useful for
      conversions such as <b>convert agno</b> <i>ag</i> <b>agbno</b> <i>agb</i>
      <b>fsblock</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>daddr [</b><i>d</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the daddr (512 byte block) given by
      <i>d</i>. If no value for <i>d</i> is given, the current address is
      printed, expressed as a daddr. The type is set to <b>data</b>
      (uninterpreted).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dblock</b><i> filoff</i></dt>
  <dd class="It-tag">Set current address to the offset <i>filoff</i> (a
      filesystem block number) in the data area of the current inode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>debug [</b><i>flagbits</i><b>]</b></dt>
  <dd class="It-tag">Set debug option bits. These are used for debugging
      <b>xfs_db</b>. If no value is given for <i>flagbits</i>, print the current
      debug option bits. These are for the use of the implementor.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dquot
    [</b><i>-g</i><b>|</b><i>-p</i><b>|</b><i>-u</i><b>]</b><i> id</i></dt>
  <dd class="It-tag">Set current address to a group, project or user quota block
      for the given ID. Defaults to user quota.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>echo [</b><i>arg</i><b>] ...</b></dt>
  <dd class="It-tag">Echo the arguments to the output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>f</b></dt>
  <dd class="It-tag">See the <b>forward</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>forward</b></dt>
  <dd class="It-tag">Move forward to the next entry in the position ring.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>frag [-adflqRrv]</b></dt>
  <dd class="It-tag">Get file fragmentation data. This prints information about
      fragmentation of file data in the filesystem (as opposed to fragmentation
      of freespace, for which see the <b>freesp</b> command). Every file in the
      filesystem is examined to see how far from ideal its extent mappings are.
      A summary is printed giving the totals.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">sets verbosity, every inode has information printed for it.
      The remaining options select which inodes and extents are examined. If no
      options are given then all are assumed set, otherwise just those given are
      enabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">enables processing of attribute data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">enables processing of directory data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">enables processing of regular file data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">enables processing of symbolic link data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">enables processing of quota file data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b></dt>
  <dd class="It-tag">enables processing of realtime control file data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">enables processing of realtime file data.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>freesp [-bcds] [-a </b><i>ag</i><b>] ... [-e
    </b><i>i</i><b>] [-h </b><i>h1</i><b>] ... [-m </b><i>m</i><b>]</b></dt>
  <dd class="It-tag">Summarize free space for the filesystem. The free blocks
      are examined and totalled, and displayed in the form of a histogram, with
      a count of extents in each range of free extent sizes.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">adds <i>ag</i> to the list of allocation groups to be
      processed. If no <b>-a</b> options are given then all allocation groups
      are processed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">specifies that the histogram buckets are binary-sized, with
      the starting sizes being the powers of 2.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">specifies that <b>freesp</b> will search the by-size (cnt)
      space Btree instead of the default by-block (bno) space Btree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">specifies that every free extent will be displayed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag">specifies that the histogram buckets are equal-sized, with
      the size specified as <i>i</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">specifies a starting block number for a histogram bucket as
      <i>h1</i>. Multiple <b>-h</b>'s are given to specify the complete set of
      buckets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag">specifies that the histogram starting block numbers are
      powers of <i>m</i>. This is the general case of <b>-b</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">specifies that a final summary of total free extents, free
      blocks, and the average free extent size is printed.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fsb</b></dt>
  <dd class="It-tag">See the <b>fsblock</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fsblock [</b><i>fsb</i><b>]</b></dt>
  <dd class="It-tag">Set current address to the fsblock value given by
      <i>fsb</i>. If no value for <i>fsb</i> is given the current address is
      printed, expressed as an fsb. The type is set to <b>data</b>
      (uninterpreted). XFS filesystem block numbers are computed ((<i>agno</i>
      &lt;&lt; <i>agshift</i>) | <i>agblock</i>) where <i>agshift</i> depends on
      the size of an allocation group. Use the <b>convert</b> command to convert
      to and from this form. Block numbers given for file blocks (for instance
      from the <b>bmap</b> command) are in this form.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hash</b><i> string</i></dt>
  <dd class="It-tag">Prints the hash value of <i>string</i> using the hash
      function of the XFS directory and attribute implementation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>help [</b><i>command</i><b>]</b></dt>
  <dd class="It-tag">Print help for one or all commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inode [</b><i>inode#</i><b>]</b></dt>
  <dd class="It-tag">Set the current inode number. If no <i>inode#</i> is given,
      print the current inode number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>label [</b><i>label</i><b>]</b></dt>
  <dd class="It-tag">Set the filesystem label. The filesystem label can be used
      by <b>mount</b>(8) instead of using a device special file. The maximum
      length of an XFS label is 12 characters - use of a longer <i>label</i>
      will result in truncation and a warning will be issued. If no <i>label</i>
      is given, the current filesystem label is printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>log [stop | start </b><i>filename</i><b>]</b></dt>
  <dd class="It-tag">Start logging output to <i>filename</i>, stop logging, or
      print the current logging status.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>metadump [-egow] </b><i>filename</i></dt>
  <dd class="It-tag">Dumps metadata to a file. See <b>xfs_metadump</b>(8) for
      more information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ncheck [-s] [-i </b><i>ino</i><b>] ...</b></dt>
  <dd class="It-tag">Print name-inode pairs. A <b>blockget -n</b> command must
      be run first to gather the information.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">specifies an inode number to be printed. If no <b>-i</b>
      options are given then all inodes are printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">specifies that only setuid and setgid files are
    printed.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>p</b></dt>
  <dd class="It-tag">See the <b>print</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pop</b></dt>
  <dd class="It-tag">Pop location from the stack.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>print [</b><i>field-expression</i><b>] ...</b></dt>
  <dd class="It-tag">Print field values. If no argument is given, print all
      fields in the current structure.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>push [</b><i>command</i><b>]</b></dt>
  <dd class="It-tag">Push location to the stack. If <i>command</i> is supplied,
      set the current location to the results of <i>command</i> after pushing
      the old location.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>q</b></dt>
  <dd class="It-tag">See the <b>quit</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quit</b></dt>
  <dd class="It-tag">Exit <b>xfs_db</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ring [</b><i>index</i><b>]</b></dt>
  <dd class="It-tag">Show position ring (if no <i>index</i> argument is given),
      or move to a specific entry in the position ring given by
    <i>index</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sb [</b><i>agno</i><b>]</b></dt>
  <dd class="It-tag">Set current address to SB header in allocation group
      <i>agno</i>. If no <i>agno</i> is given, use the current allocation group
      number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>source </b><i>source-file</i></dt>
  <dd class="It-tag">Process commands from <i>source-file</i>. <b>source</b>
      commands can be nested.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stack</b></dt>
  <dd class="It-tag">View the location stack.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>type [</b><i>type</i><b>]</b></dt>
  <dd class="It-tag">Set the current data type to <i>type</i>. If no argument is
      given, show the current data type. The possible data types are:
      <b>agf</b>, <b>agfl</b>, <b>agi</b>, <b>attr</b>, <b>bmapbta</b>,
      <b>bmapbtd</b>, <b>bnobt</b>, <b>cntbt</b>, <b>data</b>, <b>dir</b>,
      <b>dir2</b>, <b>dqblk</b>, <b>inobt</b>, <b>inode</b>, <b>log</b>,
      <b>rtbitmap</b>, <b>rtsummary</b>, <b>sb</b>, <b>symlink</b> and
      <b>text</b>. See the TYPES section below for more information on these
      data types.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uuid [</b><i>uuid</i><b> | </b><i>generate</i><b> |
    </b><i>rewrite</i><b> | </b><i>restore</i><b>]</b></dt>
  <dd class="It-tag">Set the filesystem universally unique identifier (UUID).
      The filesystem UUID can be used by <b>mount</b>(8) instead of using a
      device special file. The <i>uuid</i> can be set directly to the desired
      UUID, or it can be automatically generated using the <b>generate</b>
      option. These options will both write the UUID into every copy of the
      superblock in the filesystem. On a CRC-enabled filesystem, this will set
      an incompatible superblock flag, and the filesystem will not be mountable
      with older kernels. This can be reverted with the <b>restore</b> option,
      which will copy the original UUID back into place and clear the
      incompatible flag as needed. <b>rewrite</b> copies the current UUID from
      the primary superblock to all secondary copies of the superblock. If no
      argument is given, the current filesystem UUID is printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>version [</b><i>feature</i><b> | </b><i>versionnum
    features2</i><b>]</b></dt>
  <dd class="It-tag">Enable selected features for a filesystem (certain features
      can be enabled on an unmounted filesystem, after <b>mkfs.xfs</b>(8) has
      created the filesystem). Support for unwritten extents can be enabled
      using the <b>extflg</b> option. Support for version 2 log format can be
      enabled using the <b>log2</b> option. Support for extended attributes can
      be enabled using the <b>attr1</b> or <b>attr2</b> option. Once enabled,
      extended attributes cannot be disabled, but the user may toggle between
      <b>attr1</b> and <b>attr2</b> at will (older kernels may not support the
      newer version).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If no argument is given, the current version and feature
      bits are printed. With one argument, this command will write the updated
      version number into every copy of the superblock in the filesystem. If two
      arguments are given, they will be used as numeric values for the
      <i>versionnum</i> and <i>features2</i> bits respectively, and their string
      equivalent reported (but no modifications are made).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>write [-c] [</b><i>field value</i><b>] ...</b></dt>
  <dd class="It-tag">Write a value to disk. Specific fields can be set in
      structures (struct mode), or a block can be set to data values (data
      mode), or a block can be set to string values (string mode, for symlink
      blocks). The operation happens immediately: there is no buffering.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Struct mode is in effect when the current type is
      structural, i.e. not data. For struct mode, the syntax is
      &quot;<b>write</b> <i>field value</i>&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Data mode is in effect when the current type is data. In
      this case the contents of the block can be shifted or rotated left or
      right, or filled with a sequence, a constant value, or a random value. In
      this mode <b>write</b> with no arguments gives more information on the
      allowed commands.</dd>
</dl>
<div style="margin-left: 1.00in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Skip write verifiers and CRC recalculation; allows invalid
      data to be written to disk.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="TYPES"><a class="selflink" href="#TYPES">TYPES</a></h1>
This section gives the fields in each structure type and their meanings. Note
  that some types of block cover multiple actual structures, for instance
  directory blocks.
<dl class="Bl-tag">
  <dt class="It-tag"><b>agf</b></dt>
  <dd class="It-tag">The AGF block is the header for block allocation
      information; it is in the second 512-byte block of each allocation group.
      The following fields are defined:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magicnum</b></dt>
  <dd class="It-tag">AGF block magic number, 0x58414746 ('XAGF').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>versionnum</b></dt>
  <dd class="It-tag">version number, currently 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>seqno</b></dt>
  <dd class="It-tag">sequence number starting from 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>length</b></dt>
  <dd class="It-tag">size in filesystem blocks of the allocation group. All
      allocation groups except the last one of the filesystem have the
      superblock's <b>agblocks</b> value here.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bnoroot</b></dt>
  <dd class="It-tag">block number of the root of the Btree holding free space
      information sorted by block number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cntroot</b></dt>
  <dd class="It-tag">block number of the root of the Btree holding free space
      information sorted by block count.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bnolevel</b></dt>
  <dd class="It-tag">number of levels in the by-block-number Btree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cntlevel</b></dt>
  <dd class="It-tag">number of levels in the by-block-count Btree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flfirst</b></dt>
  <dd class="It-tag">index into the AGFL block of the first active entry.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fllast</b></dt>
  <dd class="It-tag">index into the AGFL block of the last active entry.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flcount</b></dt>
  <dd class="It-tag">count of active entries in the AGFL block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>freeblks</b></dt>
  <dd class="It-tag">count of blocks represented in the freespace Btrees.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>longest</b></dt>
  <dd class="It-tag">longest free space represented in the freespace
    Btrees.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>btreeblks</b></dt>
  <dd class="It-tag">number of blocks held in the AGF Btrees.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agfl</b></dt>
  <dd class="It-tag">The AGFL block contains block numbers for use of the block
      allocator; it is in the fourth 512-byte block of each allocation group.
      Each entry in the active list is a block number within the allocation
      group that can be used for any purpose if space runs low. The AGF block
      fields <b>flfirst</b>, <b>fllast</b>, and <b>flcount</b> designate which
      entries are currently active. Entry space is allocated in a circular
      manner within the AGFL block. Fields defined:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>bno</b></dt>
  <dd class="It-tag">array of all block numbers. Even those which are not active
      are printed.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agi</b></dt>
  <dd class="It-tag">The AGI block is the header for inode allocation
      information; it is in the third 512-byte block of each allocation group.
      Fields defined:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magicnum</b></dt>
  <dd class="It-tag">AGI block magic number, 0x58414749 ('XAGI').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>versionnum</b></dt>
  <dd class="It-tag">version number, currently 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>seqno</b></dt>
  <dd class="It-tag">sequence number starting from 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>length</b></dt>
  <dd class="It-tag">size in filesystem blocks of the allocation group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>count</b></dt>
  <dd class="It-tag">count of inodes allocated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>root</b></dt>
  <dd class="It-tag">block number of the root of the Btree holding inode
      allocation information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">number of levels in the inode allocation Btree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>freecount</b></dt>
  <dd class="It-tag">count of allocated inodes that are not in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>newino</b></dt>
  <dd class="It-tag">last inode number allocated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dirino</b></dt>
  <dd class="It-tag">unused.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unlinked</b></dt>
  <dd class="It-tag">an array of inode numbers within the allocation group. The
      entries in the AGI block are the heads of lists which run through the
      inode <b>next_unlinked</b> field. These inodes are to be unlinked the next
      time the filesystem is mounted.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>attr</b></dt>
  <dd class="It-tag">An attribute fork is organized as a Btree with the actual
      data embedded in the leaf blocks. The root of the Btree is found in block
      0 of the fork. The index (sort order) of the Btree is the hash value of
      the attribute name. All the blocks contain a <b>blkinfo</b> structure at
      the beginning, see type <b>dir</b> for a description. Nonleaf blocks are
      identical in format to those for version 1 and version 2 directories, see
      type <b>dir</b> for a description. Leaf blocks can refer to
      &quot;local&quot; or &quot;remote&quot; attribute values. Local values are
      stored directly in the leaf block. Remote values are stored in an
      independent block in the attribute fork (with no structure). Leaf blocks
      contain the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>hdr</b></dt>
  <dd class="It-tag">header containing a <b>blkinfo</b> structure <b>info</b>
      (magic number 0xfbee), a <b>count</b> of active entries, <b>usedbytes</b>
      total bytes of names and values, the <b>firstused</b> byte in the name
      area, <b>holes</b> set if the block needs compaction, and array
      <b>freemap</b> as for <b>dir</b> leaf blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>entries</b></dt>
  <dd class="It-tag">array of structures containing a <b>hashval</b>,
      <b>nameidx</b> (index into the block of the name), and flags
      <b>incomplete</b>, <b>root</b>, and <b>local</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nvlist</b></dt>
  <dd class="It-tag">array of structures describing the attribute names and
      values. Fields always present: <b>valuelen</b> (length of value in bytes),
      <b>namelen</b>, and <b>name</b>. Fields present for local values:
      <b>value</b> (value string). Fields present for remote values:
      <b>valueblk</b> (fork block number of containing the value).</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmapbt</b></dt>
  <dd class="It-tag">Files with many extents in their data or attribute fork
      will have the extents described by the contents of a Btree for that fork,
      instead of being stored directly in the inode. Each bmap Btree starts with
      a root block contained within the inode. The other levels of the Btree are
      stored in filesystem blocks. The blocks are linked to sibling left and
      right blocks at each level, as well as by pointers from parent to child
      blocks. Each block contains the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">bmap Btree block magic number, 0x424d4150 ('BMAP').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">level of this block above the leaf level.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>numrecs</b></dt>
  <dd class="It-tag">number of records or keys in the block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>leftsib</b></dt>
  <dd class="It-tag">left (logically lower) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rightsib</b></dt>
  <dd class="It-tag">right (logically higher) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recs</b></dt>
  <dd class="It-tag">[leaf blocks only] array of extent records. Each record
      contains <b>startoff</b>, <b>startblock</b>, <b>blockcount</b>, and
      <b>extentflag</b> (1 if the extent is unwritten).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keys</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of key records. These are the
      first key value of each block in the level below this one. Each record
      contains <b>startoff</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ptrs</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of child block pointers. Each
      pointer is a filesystem block number to the next level in the Btree.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bnobt</b></dt>
  <dd class="It-tag">There is one set of filesystem blocks forming the
      by-block-number allocation Btree for each allocation group. The root block
      of this Btree is designated by the <b>bnoroot</b> field in the
      corresponding AGF block. The blocks are linked to sibling left and right
      blocks at each level, as well as by pointers from parent to child blocks.
      Each block has the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">BNOBT block magic number, 0x41425442 ('ABTB').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">level number of this block, 0 is a leaf.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>numrecs</b></dt>
  <dd class="It-tag">number of data entries in the block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>leftsib</b></dt>
  <dd class="It-tag">left (logically lower) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rightsib</b></dt>
  <dd class="It-tag">right (logically higher) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recs</b></dt>
  <dd class="It-tag">[leaf blocks only] array of freespace records. Each record
      contains <b>startblock</b> and <b>blockcount</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keys</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of key records. These are the
      first value of each block in the level below this one. Each record
      contains <b>startblock</b> and <b>blockcount</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ptrs</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of child block pointers. Each
      pointer is a block number within the allocation group to the next level in
      the Btree.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cntbt</b></dt>
  <dd class="It-tag">There is one set of filesystem blocks forming the
      by-block-count allocation Btree for each allocation group. The root block
      of this Btree is designated by the <b>cntroot</b> field in the
      corresponding AGF block. The blocks are linked to sibling left and right
      blocks at each level, as well as by pointers from parent to child blocks.
      Each block has the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">CNTBT block magic number, 0x41425443 ('ABTC').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">level number of this block, 0 is a leaf.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>numrecs</b></dt>
  <dd class="It-tag">number of data entries in the block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>leftsib</b></dt>
  <dd class="It-tag">left (logically lower) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rightsib</b></dt>
  <dd class="It-tag">right (logically higher) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recs</b></dt>
  <dd class="It-tag">[leaf blocks only] array of freespace records. Each record
      contains <b>startblock</b> and <b>blockcount</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keys</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of key records. These are the
      first value of each block in the level below this one. Each record
      contains <b>blockcount</b> and <b>startblock</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ptrs</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of child block pointers. Each
      pointer is a block number within the allocation group to the next level in
      the Btree.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>data</b></dt>
  <dd class="It-tag">User file blocks, and other blocks whose type is unknown,
      have this type for display purposes in <b>xfs_db</b>. The block data is
      displayed in hexadecimal format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dir</b></dt>
  <dd class="It-tag">A version 1 directory is organized as a Btree with the
      directory data embedded in the leaf blocks. The root of the Btree is found
      in block 0 of the file. The index (sort order) of the Btree is the hash
      value of the entry name. All the blocks contain a <b>blkinfo</b> structure
      at the beginning with the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>forw</b></dt>
  <dd class="It-tag">next sibling block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>back</b></dt>
  <dd class="It-tag">previous sibling block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">magic number for this block type.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    The non-leaf (node) blocks have the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>hdr</b></dt>
  <dd class="It-tag">header containing a <b>blkinfo</b> structure <b>info</b>
      (magic number 0xfebe), the <b>count</b> of active entries, and the
      <b>level</b> of this block above the leaves.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>btree</b></dt>
  <dd class="It-tag">array of entries containing <b>hashval</b> and
      <b>before</b> fields. The <b>before</b> value is a block number within the
      directory file to the child block, the <b>hashval</b> is the last hash
      value in that block.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    The leaf blocks have the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>hdr</b></dt>
  <dd class="It-tag">header containing a <b>blkinfo</b> structure <b>info</b>
      (magic number 0xfeeb), the <b>count</b> of active entries,
      <b>namebytes</b> (total name string bytes), <b>holes</b> flag (block needs
      compaction), and <b>freemap</b> (array of <b>base</b>, <b>size</b> entries
      for free regions).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>entries</b></dt>
  <dd class="It-tag">array of structures containing <b>hashval</b>,
      <b>nameidx</b> (byte index into the block of the name string), and
      <b>namelen</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>namelist</b></dt>
  <dd class="It-tag">array of structures containing <b>inumber</b> and
      <b>name</b>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dir2</b></dt>
  <dd class="It-tag">A version 2 directory has four kinds of blocks. Data blocks
      start at offset 0 in the file. There are two kinds of data blocks:
      single-block directories have the leaf information embedded at the end of
      the block, data blocks in multi-block directories do not. Node and leaf
      blocks start at offset 32GiB (with either a single leaf block or the root
      node block). Freespace blocks start at offset 64GiB. The node and leaf
      blocks form a Btree, with references to the data in the data blocks. The
      freespace blocks form an index of longest free spaces within the data
      blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">A single-block directory block contains the following
      fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>bhdr</b></dt>
  <dd class="It-tag">header containing <b>magic</b> number 0x58443242 ('XD2B')
      and an array <b>bestfree</b> of the longest 3 free spaces in the block
      (<b>offset</b>, <b>length</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bu</b></dt>
  <dd class="It-tag">array of union structures. Each element is either an entry
      or a freespace. For entries, there are the following fields:
      <b>inumber</b>, <b>namelen</b>, <b>name</b>, and <b>tag</b>. For
      freespace, there are the following fields: <b>freetag</b> (0xffff),
      <b>length</b>, and <b>tag</b>. The <b>tag</b> value is the byte offset in
      the block of the start of the entry it is contained in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bleaf</b></dt>
  <dd class="It-tag">array of leaf entries containing <b>hashval</b> and
      <b>address</b>. The <b>address</b> is a 64-bit word offset into the
    file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>btail</b></dt>
  <dd class="It-tag">tail structure containing the total <b>count</b> of leaf
      entries and <b>stale</b> count of unused leaf entries.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    A data block contains the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>dhdr</b></dt>
  <dd class="It-tag">header containing <b>magic</b> number 0x58443244 ('XD2D')
      and an array <b>bestfree</b> of the longest 3 free spaces in the block
      (<b>offset</b>, <b>length</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>du</b></dt>
  <dd class="It-tag">array of union structures as for <b>bu</b>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Leaf blocks have two possible forms. If the Btree consists of a single leaf
      then the freespace information is in the leaf block, otherwise it is in
      separate blocks and the root of the Btree is a node block. A leaf block
      contains the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>lhdr</b></dt>
  <dd class="It-tag">header containing a <b>blkinfo</b> structure <b>info</b>
      (magic number 0xd2f1 for the single leaf case, 0xd2ff for the true Btree
      case), the total <b>count</b> of leaf entries, and <b>stale</b> count of
      unused leaf entries.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lents</b></dt>
  <dd class="It-tag">leaf entries, as for <b>bleaf</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lbests</b></dt>
  <dd class="It-tag">[single leaf only] array of values which represent the
      longest freespace in each data block in the directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ltail</b></dt>
  <dd class="It-tag">[single leaf only] tail structure containing
      <b>bestcount</b> count of <b>lbests</b>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    A node block is identical to that for types <b>attr</b> and <b>dir</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    A freespace block contains the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>fhdr</b></dt>
  <dd class="It-tag">header containing <b>magic</b> number 0x58443246 ('XD2F'),
      <b>firstdb</b> first data block number covered by this freespace block,
      <b>nvalid</b> number of valid entries, and <b>nused</b> number of entries
      representing real data blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fbests</b></dt>
  <dd class="It-tag">array of values as for <b>lbests</b>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dqblk</b></dt>
  <dd class="It-tag">The quota information is stored in files referred to by the
      superblock <b>uquotino</b> and <b>pquotino</b> fields. Each filesystem
      block in a quota file contains a constant number of quota entries. The
      quota entry size is currently 136 bytes, so with a 4KiB filesystem block
      size there are 30 quota entries per block. The <b>dquot</b> command is
      used to locate these entries in the filesystem. The file entries are
      indexed by the user or project identifier to determine the block and
      offset. Each quota entry has the following fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">magic number, 0x4451 ('DQ').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>version</b></dt>
  <dd class="It-tag">version number, currently 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flags</b></dt>
  <dd class="It-tag">flags, values include 0x01 for user quota, 0x02 for project
      quota.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>id</b></dt>
  <dd class="It-tag">user or project identifier.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blk_hardlimit</b></dt>
  <dd class="It-tag">absolute limit on blocks in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blk_softlimit</b></dt>
  <dd class="It-tag">preferred limit on blocks in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ino_hardlimit</b></dt>
  <dd class="It-tag">absolute limit on inodes in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ino_softlimit</b></dt>
  <dd class="It-tag">preferred limit on inodes in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bcount</b></dt>
  <dd class="It-tag">blocks actually in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>icount</b></dt>
  <dd class="It-tag">inodes actually in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>itimer</b></dt>
  <dd class="It-tag">time when service will be refused if soft limit is violated
      for inodes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>btimer</b></dt>
  <dd class="It-tag">time when service will be refused if soft limit is violated
      for blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>iwarns</b></dt>
  <dd class="It-tag">number of warnings issued about inode limit
    violations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bwarns</b></dt>
  <dd class="It-tag">number of warnings issued about block limit
    violations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtb_hardlimit</b></dt>
  <dd class="It-tag">absolute limit on realtime blocks in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtb_softlimit</b></dt>
  <dd class="It-tag">preferred limit on realtime blocks in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtbcount</b></dt>
  <dd class="It-tag">realtime blocks actually in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtbtimer</b></dt>
  <dd class="It-tag">time when service will be refused if soft limit is violated
      for realtime blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtbwarns</b></dt>
  <dd class="It-tag">number of warnings issued about realtime block limit
      violations.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inobt</b></dt>
  <dd class="It-tag">There is one set of filesystem blocks forming the inode
      allocation Btree for each allocation group. The root block of this Btree
      is designated by the <b>root</b> field in the corresponding AGI block. The
      blocks are linked to sibling left and right blocks at each level, as well
      as by pointers from parent to child blocks. Each block has the following
      fields:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">INOBT block magic number, 0x49414254 ('IABT').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>level</b></dt>
  <dd class="It-tag">level number of this block, 0 is a leaf.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>numrecs</b></dt>
  <dd class="It-tag">number of data entries in the block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>leftsib</b></dt>
  <dd class="It-tag">left (logically lower) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rightsib</b></dt>
  <dd class="It-tag">right (logically higher) sibling block, 0 if none.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recs</b></dt>
  <dd class="It-tag">[leaf blocks only] array of inode records. Each record
      contains <b>startino</b> allocation-group relative inode number,
      <b>freecount</b> count of free inodes in this chunk, and <b>free</b>
      bitmap, LSB corresponds to inode 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keys</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of key records. These are the
      first value of each block in the level below this one. Each record
      contains <b>startino</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ptrs</b></dt>
  <dd class="It-tag">[non-leaf blocks only] array of child block pointers. Each
      pointer is a block number within the allocation group to the next level in
      the Btree.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inode</b></dt>
  <dd class="It-tag">Inodes are allocated in &quot;chunks&quot; of 64 inodes
      each. Usually a chunk is multiple filesystem blocks, although there are
      cases with large filesystem blocks where a chunk is less than one block.
      The inode Btree (see <b>inobt</b> above) refers to the inode numbers per
      allocation group. The inode numbers directly reflect the location of the
      inode block on disk. Use the <b>inode</b> command to point <b>xfs_db</b>
      to a specific inode. Each inode contains four regions: <b>core</b>,
      <b>next_unlinked</b>, <b>u</b>, and <b>a</b>. <b>core</b> contains the
      fixed information. <b>next_unlinked</b> is separated from the core due to
      journaling considerations, see type <b>agi</b> field <b>unlinked</b>.
      <b>u</b> is a union structure that is different in size and format
      depending on the type and representation of the file data (&quot;data
      fork&quot;). <b>a</b> is an optional union structure to describe attribute
      data, that is different in size, format, and location depending on the
      presence and representation of attribute data, and the size of the
      <b>u</b> data (&quot;attribute fork&quot;). <b>xfs_db</b> automatically
      selects the proper union members based on information in the inode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The following are fields in the inode core:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magic</b></dt>
  <dd class="It-tag">inode magic number, 0x494e ('IN').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mode</b></dt>
  <dd class="It-tag">mode and type of file, as described in <b>chmod</b>(2),
      <b>mknod</b>(2), and <b>stat</b>(2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>version</b></dt>
  <dd class="It-tag">inode version, 1 or 2.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>format</b></dt>
  <dd class="It-tag">format of <b>u</b> union data (0: xfs_dev_t, 1: local file
      - in-inode directory or symlink, 2: extent list, 3: Btree root, 4: unique
      id [unused]).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nlinkv1</b></dt>
  <dd class="It-tag">number of links to the file in a version 1 inode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nlinkv2</b></dt>
  <dd class="It-tag">number of links to the file in a version 2 inode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>projid_lo</b></dt>
  <dd class="It-tag">owner's project id (low word; version 2 inode only).
      <b>projid_hi</b> owner's project id (high word; version 2 inode
    only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uid</b></dt>
  <dd class="It-tag">owner's user id.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gid</b></dt>
  <dd class="It-tag">owner's group id.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>atime</b></dt>
  <dd class="It-tag">time last accessed (seconds and nanoseconds).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mtime</b></dt>
  <dd class="It-tag">time last modified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ctime</b></dt>
  <dd class="It-tag">time created or inode last modified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>size</b></dt>
  <dd class="It-tag">number of bytes in the file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nblocks</b></dt>
  <dd class="It-tag">total number of blocks in the file including indirect and
      attribute.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>extsize</b></dt>
  <dd class="It-tag">basic/minimum extent size for the file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nextents</b></dt>
  <dd class="It-tag">number of extents in the data fork.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>naextents</b></dt>
  <dd class="It-tag">number of extents in the attribute fork.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>forkoff</b></dt>
  <dd class="It-tag">attribute fork offset in the inode, in 64-bit words from
      the start of <b>u</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>aformat</b></dt>
  <dd class="It-tag">format of <b>a</b> data (1: local attribute data, 2: extent
      list, 3: Btree root).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dmevmask</b></dt>
  <dd class="It-tag">DMAPI event mask.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dmstate</b></dt>
  <dd class="It-tag">DMAPI state information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>newrtbm</b></dt>
  <dd class="It-tag">file is the realtime bitmap and is &quot;new&quot;
    format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prealloc</b></dt>
  <dd class="It-tag">file has preallocated data space after EOF.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>realtime</b></dt>
  <dd class="It-tag">file data is in the realtime subvolume.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gen</b></dt>
  <dd class="It-tag">inode generation number.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    The following fields are in the <b>u</b> data fork union:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmbt</b></dt>
  <dd class="It-tag">bmap Btree root. This looks like a <b>bmapbtd</b> block
      with redundant information removed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmx</b></dt>
  <dd class="It-tag">array of extent descriptors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dev</b></dt>
  <dd class="It-tag">dev_t for the block or character device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sfdir</b></dt>
  <dd class="It-tag">shortform (in-inode) version 1 directory. This consists of
      a <b>hdr</b> containing the <b>parent</b> inode number and a <b>count</b>
      of active entries in the directory, followed by an array <b>list</b> of
      <b>hdr.count</b> entries. Each such entry contains <b>inumber</b>,
      <b>namelen</b>, and <b>name</b> string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sfdir2</b></dt>
  <dd class="It-tag">shortform (in-inode) version 2 directory. This consists of
      a <b>hdr</b> containing a <b>count</b> of active entries in the directory,
      an <b>i8count</b> of entries with inumbers that don't fit in a 32-bit
      value, and the <b>parent</b> inode number, followed by an array
      <b>list</b> of <b>hdr.count</b> entries. Each such entry contains
      <b>namelen</b>, a saved <b>offset</b> used when the directory is converted
      to a larger form, a <b>name</b> string, and the <b>inumber</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>symlink</b></dt>
  <dd class="It-tag">symbolic link string value.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    The following fields are in the <b>a</b> attribute fork union if it
    exists:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmbt</b></dt>
  <dd class="It-tag">bmap Btree root, as above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bmx</b></dt>
  <dd class="It-tag">array of extent descriptors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sfattr</b></dt>
  <dd class="It-tag">shortform (in-inode) attribute values. This consists of a
      <b>hdr</b> containing a <b>totsize</b> (total size in bytes) and a
      <b>count</b> of active entries, followed by an array <b>list</b> of
      <b>hdr.count</b> entries. Each such entry contains <b>namelen</b>,
      <b>valuelen</b>, <b>root</b> flag, <b>name</b>, and <b>value</b>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>log</b></dt>
  <dd class="It-tag">Log blocks contain the journal entries for XFS. It's not
      useful to examine these with <b>xfs_db</b>, use <b>xfs_logprint</b>(8)
      instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtbitmap</b></dt>
  <dd class="It-tag">If the filesystem has a realtime subvolume, then the
      <b>rbmino</b> field in the superblock refers to a file that contains the
      realtime bitmap. Each bit in the bitmap file controls the allocation of a
      single realtime extent (set == free). The bitmap is processed in 32-bit
      words, the LSB of a word is used for the first extent controlled by that
      bitmap word. The <b>atime</b> field of the realtime bitmap inode contains
      a counter that is used to control where the next new realtime file will
      start.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rtsummary</b></dt>
  <dd class="It-tag">If the filesystem has a realtime subvolume, then the
      <b>rsumino</b> field in the superblock refers to a file that contains the
      realtime summary data. The summary file contains a two-dimensional array
      of 16-bit values. Each value counts the number of free extent runs
      (consecutive free realtime extents) of a given range of sizes that starts
      in a given bitmap block. The size ranges are binary buckets (low size in
      the bucket is a power of 2). There are as many size ranges as are
      necessary given the size of the realtime subvolume. The first dimension is
      the size range, the second dimension is the starting bitmap block number
      (adjacent entries are for the same size, adjacent bitmap blocks).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sb</b></dt>
  <dd class="It-tag">There is one sb (superblock) structure per allocation
      group. It is the first disk block in the allocation group. Only the first
      one (block 0 of the filesystem) is actually used; the other blocks are
      redundant information for <b>xfs_repair</b>(8) to use if the first
      superblock is damaged. Fields defined:</dd>
</dl>
<div style="margin-left: 1.40in;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>magicnum</b></dt>
  <dd class="It-tag">superblock magic number, 0x58465342 ('XFSB').</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocksize</b></dt>
  <dd class="It-tag">filesystem block size in bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dblocks</b></dt>
  <dd class="It-tag">number of filesystem blocks present in the data
    subvolume.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rblocks</b></dt>
  <dd class="It-tag">number of filesystem blocks present in the realtime
      subvolume.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rextents</b></dt>
  <dd class="It-tag">number of realtime extents that <b>rblocks</b>
    contain.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uuid</b></dt>
  <dd class="It-tag">unique identifier of the filesystem.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>logstart</b></dt>
  <dd class="It-tag">starting filesystem block number of the log (journal). If
      this value is 0 the log is &quot;external&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rootino</b></dt>
  <dd class="It-tag">root inode number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rbmino</b></dt>
  <dd class="It-tag">realtime bitmap inode number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rsumino</b></dt>
  <dd class="It-tag">realtime summary data inode number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rextsize</b></dt>
  <dd class="It-tag">realtime extent size in filesystem blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agblocks</b></dt>
  <dd class="It-tag">size of an allocation group in filesystem blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agcount</b></dt>
  <dd class="It-tag">number of allocation groups.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rbmblocks</b></dt>
  <dd class="It-tag">number of realtime bitmap blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>logblocks</b></dt>
  <dd class="It-tag">number of log blocks (filesystem blocks).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>versionnum</b></dt>
  <dd class="It-tag">filesystem version information. This value is currently 1,
      2, 3, or 4 in the low 4 bits. If the low bits are 4 then the other bits
      have additional meanings. 1 is the original value. 2 means that attributes
      were used. 3 means that version 2 inodes (large link counts) were used. 4
      is the bitmask version of the version number. In this case, the other bits
      are used as flags (0x0010: attributes were used, 0x0020: version 2 inodes
      were used, 0x0040: quotas were used, 0x0080: inode cluster alignment is in
      force, 0x0100: data stripe alignment is in force, 0x0200: the
      <b>shared_vn</b> field is used, 0x1000: unwritten extent tracking is on,
      0x2000: version 2 directories are in use).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sectsize</b></dt>
  <dd class="It-tag">sector size in bytes, currently always 512. This is the
      size of the superblock and the other header blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inodesize</b></dt>
  <dd class="It-tag">inode size in bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inopblock</b></dt>
  <dd class="It-tag">number of inodes per filesystem block.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fname</b></dt>
  <dd class="It-tag">obsolete, filesystem name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fpack</b></dt>
  <dd class="It-tag">obsolete, filesystem pack name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocklog</b></dt>
  <dd class="It-tag">log2 of <b>blocksize</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sectlog</b></dt>
  <dd class="It-tag">log2 of <b>sectsize</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inodelog</b></dt>
  <dd class="It-tag">log2 of <b>inodesize</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inopblog</b></dt>
  <dd class="It-tag">log2 of <b>inopblock</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agblklog</b></dt>
  <dd class="It-tag">log2 of <b>agblocks</b> (rounded up).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rextslog</b></dt>
  <dd class="It-tag">log2 of <b>rextents</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inprogress</b></dt>
  <dd class="It-tag"><b>mkfs.xfs</b>(8) or <b>xfs_copy</b>(8) aborted before
      completing this filesystem.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>imax_pct</b></dt>
  <dd class="It-tag">maximum percentage of filesystem space used for inode
      blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>icount</b></dt>
  <dd class="It-tag">number of allocated inodes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ifree</b></dt>
  <dd class="It-tag">number of allocated inodes that are not in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fdblocks</b></dt>
  <dd class="It-tag">number of free data blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>frextents</b></dt>
  <dd class="It-tag">number of free realtime extents.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uquotino</b></dt>
  <dd class="It-tag">user quota inode number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pquotino</b></dt>
  <dd class="It-tag">project quota inode number; this is currently unused.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>qflags</b></dt>
  <dd class="It-tag">quota status flags (0x01: user quota accounting is on,
      0x02: user quota limits are enforced, 0x04: quotacheck has been run on
      user quotas, 0x08: project quota accounting is on, 0x10: project quota
      limits are enforced, 0x20: quotacheck has been run on project
    quotas).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flags</b></dt>
  <dd class="It-tag">random flags. 0x01: only read-only mounts are allowed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>shared_vn</b></dt>
  <dd class="It-tag">shared version number (shared readonly filesystems).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>inoalignmt</b></dt>
  <dd class="It-tag">inode chunk alignment in filesystem blocks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unit</b></dt>
  <dd class="It-tag">stripe or RAID unit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>width</b></dt>
  <dd class="It-tag">stripe or RAID width.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dirblklog</b></dt>
  <dd class="It-tag">log2 of directory block size (filesystem blocks).</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>symlink</b></dt>
  <dd class="It-tag">Symbolic link blocks are used only when the symbolic link
      value does not fit inside the inode. The block content is just the string
      value. Bytes past the logical end of the symbolic link value have
      arbitrary values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>text</b></dt>
  <dd class="It-tag">User file blocks, and other blocks whose type is unknown,
      have this type for display purposes in <b>xfs_db</b>. The block data is
      displayed in two columns: Hexadecimal format and printable ASCII
    chars.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
Many messages can come from the <b>check</b> (<b>blockget</b>) command. If the
  filesystem is completely corrupt, a core dump might be produced instead of the
  message
<div style="margin-left: 5.00ex;"><i>device</i> <b>is not a valid
  filesystem</b></div>
<div class="Pp"></div>
If the filesystem is very large (has many files) then <b>check</b> might run out
  of memory. In this case the message
<div style="margin-left: 5.00ex;"><b>out of memory</b></div>
is printed.
<div class="Pp"></div>
The following is a description of the most likely problems and the associated
  messages. Most of the diagnostics produced are only meaningful with an
  understanding of the structure of the filesystem.
<dl class="Bl-tag">
  <dt class="It-tag"><b>agf_freeblks </b><i>n</i><b>, counted </b><i>m</i><b> in
    ag </b><i>a</i></dt>
  <dd class="It-tag">The freeblocks count in the allocation group header for
      allocation group <i>a</i> doesn't match the number of blocks counted
    free.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agf_longest </b><i>n</i><b>, counted </b><i>m</i><b> in
    ag </b><i>a</i></dt>
  <dd class="It-tag">The longest free extent in the allocation group header for
      allocation group <i>a</i> doesn't match the longest free extent found in
      the allocation group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agi_count </b><i>n</i><b>, counted </b><i>m</i><b> in ag
    </b><i>a</i></dt>
  <dd class="It-tag">The allocated inode count in the allocation group header
      for allocation group <i>a</i> doesn't match the number of inodes counted
      in the allocation group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>agi_freecount </b><i>n</i><b>, counted </b><i>m</i><b>
    in ag </b><i>a</i></dt>
  <dd class="It-tag">The free inode count in the allocation group header for
      allocation group <i>a</i> doesn't match the number of inodes counted free
      in the allocation group.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>block </b><i>a/b</i><b> expected inum 0 got
    </b><i>i</i></dt>
  <dd class="It-tag">The block number is specified as a pair (allocation group
      number, block in the allocation group). The block is used multiple times
      (shared), between multiple inodes. This message usually follows a message
      of the next type.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>block </b><i>a/b</i><b> expected type unknown got
    </b><i>y</i></dt>
  <dd class="It-tag">The block is used multiple times (shared).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>block </b><i>a/b</i><b> type unknown not
    expected</b></dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>mkfs.xfs</b>(8), <b>xfs_admin</b>(8), <b>xfs_copy</b>(8),
  <b>xfs_logprint</b>(8), <b>xfs_metadump</b>(8), <b>xfs_ncheck</b>(8),
  <b>xfs_repair</b>(8), <b>mount</b>(8), <b>chmod</b>(2), <b>mknod</b>(2),
  <b>stat</b>(2), <b>xfs</b>(5).</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
