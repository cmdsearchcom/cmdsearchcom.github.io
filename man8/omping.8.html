<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OMPING(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OMPING(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">OMPING(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">omping</b> &#x2014; <span class="Nd" title="Nd">test IP
  multicast</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">omping</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-46CDEFqVv</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-c</b>
      <var class="Ar" title="Ar">count</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-i</b>
      <var class="Ar" title="Ar">interval</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-M</b>
      <var class="Ar" title="Ar">transport_method</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-m</b>
      <var class="Ar" title="Ar">mcast_addr</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-O</b>
      <var class="Ar" title="Ar">op_mode</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-p</b>
      <var class="Ar" title="Ar">port</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-R</b>
      <var class="Ar" title="Ar">rcvbuf</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-r</b>
      <var class="Ar" title="Ar">rate_limit</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-S</b>
      <var class="Ar" title="Ar">sndbuf</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-T</b>
      <var class="Ar" title="Ar">timeout</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-t</b>
      <var class="Ar" title="Ar">ttl</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-w</b>
      <var class="Ar" title="Ar">wait_time</var></span>]
      <var class="Ar" title="Ar">remote_addr...</var></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">omping</b> is program which uses User Datagram
  Protocol to determine if computer is able to send and/or receive IP unicast
  and multicast or Broadcast packets from the network. It's designed to be used
  in very similar way as <a class="Xr" title="Xr">ping(8)</a> and also has some
  features of the <a class="Xr" title="Xr">fping(8)</a> command. Where
  <a class="Xr" title="Xr">ping(8)</a> and <b class="Nm" title="Nm">omping</b>
  differ is in who replies. In <a class="Xr" title="Xr">ping(8)</a> replies are
  sent by the operating system and with <b class="Nm" title="Nm">omping</b>
  another instance of <b class="Nm" title="Nm">omping</b> sends the reply. This
  mean that <b class="Nm" title="Nm">omping</b> must be running on all computers
  to test sending/receiving IP multicast/broadcast. Its arguments are as
  follows:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#4"><b class="Fl" title="Fl" id="4">-4</b></a></dt>
  <dd class="It-tag">Force usage of IPv4.</dd>
  <dt class="It-tag"><a class="selflink" href="#6"><b class="Fl" title="Fl" id="6">-6</b></a></dt>
  <dd class="It-tag">Force usage of IPv6.</dd>
  <dt class="It-tag"><a class="selflink" href="#C"><b class="Fl" title="Fl" id="C">-C</b></a></dt>
  <dd class="It-tag">Display continuous statistics for every reply message.</dd>
  <dt class="It-tag"><a class="selflink" href="#D"><b class="Fl" title="Fl" id="D">-D</b></a></dt>
  <dd class="It-tag">Disable packet duplicate detection. Option is default for
      interval 0.</dd>
  <dt class="It-tag"><a class="selflink" href="#E"><b class="Fl" title="Fl" id="E">-E</b></a></dt>
  <dd class="It-tag">Default behaviour when every client is in stop state is to
      exit. This may happen if all server sends stop message or if
      <var class="Ar" title="Ar">count</var> query messages was sent. This
      option changes default behaviour and <b class="Nm" title="Nm">omping</b>
      doesn't quit automatically.</dd>
  <dt class="It-tag"><a class="selflink" href="#F"><b class="Fl" title="Fl" id="F">-F</b></a></dt>
  <dd class="It-tag">Allow entering of arguments which are not allowed or not
      recommended by the specification. This is typically the interval
      parameter. This option may be used multiple times.</dd>
  <dt class="It-tag"><a class="selflink" href="#q"><b class="Fl" title="Fl" id="q">-q</b></a></dt>
  <dd class="It-tag">Quiet output. Nothing is displayed except state changes and
      summary. Option can be used twice and then only summary is displayed.</dd>
  <dt class="It-tag"><a class="selflink" href="#V"><b class="Fl" title="Fl" id="V">-V</b></a></dt>
  <dd class="It-tag">Display version and quit. Option can be used twice and then
      remote version is displayed.</dd>
  <dt class="It-tag"><a class="selflink" href="#v"><b class="Fl" title="Fl" id="v">-v</b></a></dt>
  <dd class="It-tag">Set level of verbosity. Parameter can be used multiple
      times to achieve higher verbosity.</dd>
  <dt class="It-tag"><a class="selflink" href="#c"><b class="Fl" title="Fl" id="c">-c</b></a>
    <var class="Ar" title="Ar">count</var></dt>
  <dd class="It-tag">Number of request packets to send to each target. After
      sending <var class="Ar" title="Ar">count</var> query messages, given
      client is put to stop state and it is no longer sending query
    messages.</dd>
  <dt class="It-tag"><a class="selflink" href="#i"><b class="Fl" title="Fl" id="i">-i</b></a>
    <var class="Ar" title="Ar">interval</var></dt>
  <dd class="It-tag">Wait <var class="Ar" title="Ar">interval</var> seconds
      between sending each request packet. Float values are supported in
      millisecond precision. It's possible to set there 0 with meaning that
      packets are sent ether after previous unicast reply is received or after 1
      millisecond, depending on which of these intervals is smaller. The default
      is to wait for one second between each packet.</dd>
  <dt class="It-tag"><a class="selflink" href="#M"><b class="Fl" title="Fl" id="M">-M</b></a>
    <var class="Ar" title="Ar">transport_method</var></dt>
  <dd class="It-tag">Set transport method to use. This can be
      <b class="Cm" title="Cm">asm</b> for Any-source Multicast,
      <b class="Cm" title="Cm">ssm</b> for Source-specific Multicast and
      <b class="Cm" title="Cm">ipbc</b> for IP Broadcast.</dd>
  <dt class="It-tag"><a class="selflink" href="#m"><b class="Fl" title="Fl" id="m">-m</b></a>
    <var class="Ar" title="Ar">mcast_addr</var></dt>
  <dd class="It-tag">Multicast or broadcast address to listen on for
      multicast/broadcast answer messages. Default is 232.43.211.234 for IPv4
      and ff3e::4321:1234 for IPv6 multicast, or broadcast address of local
      interface for Broadcast.</dd>
  <dt class="It-tag"><a class="selflink" href="#O"><b class="Fl" title="Fl" id="O">-O</b></a>
    <var class="Ar" title="Ar">op_mode</var></dt>
  <dd class="It-tag"><b class="Nm" title="Nm">omping</b> can be running in three
      different modes. Default and recommended mode for quick testing is
      <b class="Cm" title="Cm">normal</b> mode, when
      <b class="Nm" title="Nm">omping</b> behaves like client and server
      together. It sends queries and is able to respond them. Finally the
      <b class="Cm" title="Cm">client</b> mode sends queries, but never respond
      to other nodes.</dd>
  <dt class="It-tag"><a class="selflink" href="#p"><b class="Fl" title="Fl" id="p">-p</b></a>
    <var class="Ar" title="Ar">port</var></dt>
  <dd class="It-tag">Port to bind and listen on for both unicast and
      multicast/broadcast messages. Default is 4321.</dd>
  <dt class="It-tag"><a class="selflink" href="#R"><b class="Fl" title="Fl" id="R">-R</b></a>
    <var class="Ar" title="Ar">rcvbuf</var></dt>
  <dd class="It-tag">Set socket rcvbuf. Minimum value for this option is 2048.
      If not specified, rcvbuf is not changed and default OS provided value is
      used.</dd>
  <dt class="It-tag"><a class="selflink" href="#r"><b class="Fl" title="Fl" id="r">-r</b></a>
    <var class="Ar" title="Ar">rate_limit</var></dt>
  <dd class="It-tag">Rate limit interval between two query messages to
      <var class="Ar" title="Ar">rate_limit</var> seconds. Default value is same
      as <var class="Ar" title="Ar">interval</var> given by
      <b class="Fl" title="Fl">-i</b> option. Rate limiting can be disabled by
      specifying 0 as value. Rate limiting is by default disabled for
      <b class="Fl" title="Fl">-i</b> with 0 seconds.</dd>
  <dt class="It-tag"><a class="selflink" href="#S"><b class="Fl" title="Fl" id="S">-S</b></a>
    <var class="Ar" title="Ar">sndbuf</var></dt>
  <dd class="It-tag">Set socket sndbuf. Minimum value for this option is 2048.
      If not specified, sndbuf is not changed and default OS provided value is
      used.</dd>
  <dt class="It-tag"><a class="selflink" href="#T"><b class="Fl" title="Fl" id="T">-T</b></a>
    <var class="Ar" title="Ar">timeout</var></dt>
  <dd class="It-tag">Specify a timeout, in seconds, before
      <b class="Nm" title="Nm">omping</b> exits regardless of how many packets
      have been received.</dd>
  <dt class="It-tag"><a class="selflink" href="#t"><b class="Fl" title="Fl" id="t">-t</b></a>
    <var class="Ar" title="Ar">ttl</var></dt>
  <dd class="It-tag">Time-To-Live of sent packets.</dd>
  <dt class="It-tag"><a class="selflink" href="#w"><b class="Fl" title="Fl" id="w">-w</b></a>
    <var class="Ar" title="Ar">wait_time</var></dt>
  <dd class="It-tag">after <b class="Nm" title="Nm">omping</b> is stopped (by
      sending SIGINT or timeout expire) it is moved to special state when no
      queries are made and server answer all queries by server response (stop
      message). This makes possible to give correct (unbiased) result of lost
      packets on other nodes. Default is 3 times interval or 1 second, depending
      which one is larger. Also special value 0 can be used to not wait at all
      or -1 which means wait forever (this can be still terminated by sending
      SIGINT).</dd>
  <dt class="It-tag"><var class="Ar" title="Ar">remote_addr</var></dt>
  <dd class="It-tag">List of addresses to test. One of them must be address of
      local internet interface. This local address is used for bind and
      listening on for unicast packets. It's also used to determine which
      interface should be used for sending multicast/broadcast replies.</dd>
</dl>
<div class="Pp"></div>
Program is normally terminated by SIGINT. After signal receive summary is
  displayed. You can also display summary during running by sending SIGINFO or
  SIGUSR1 signal.
<div class="Pp"></div>
When using <b class="Nm" title="Nm">omping</b> for fault isolation, it should
  first be run against local internet interface only, to verify that the local
  network interface is up and running, and firewall is correctly configured.
  This mode is available by entering only local IP address.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The <b class="Nm" title="Nm">omping</b> utility exits&#x00A0;0 on success,
  and&#x00A0;&gt;0 if an error occurs.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The following commands and output is a typical way how to find-out and solve
  network problems using omping. In this situation, we have 3 computers named
  node-01, node-02 and node-03 with IP addresses 192.168.1.101 - 192.168.1.103.
  Let's run the following command on all of them.
<div class="Pp"></div>
<div class="D1"><code class="Li">$ omping node-01 node-02 node-03</code></div>
<div class="Pp"></div>
on all of nodes we should be able to seen similar output
<div class="Pp"></div>
<div class="D1"><code class="Li">node-01: waiting for response msg</code></div>
<div class="D1"><code class="Li">node-03: waiting for response msg</code></div>
<div class="D1"><code class="Li">node-01: joined (S,G) = (*, 232.43.211.234),
  pinging</code></div>
<div class="D1"><code class="Li">node-03: joined (S,G) = (*, 232.43.211.234),
  pinging</code></div>
<div class="D1"><code class="Li">node-01: unicast, seq=1, size=69 bytes, dist=0,
  time=0.192ms</code></div>
<div class="D1"><code class="Li">node-01: multicast, seq=1, size=69 bytes,
  dist=0, time=0.284ms</code></div>
<div class="D1"><code class="Li">node-03: unicast, seq=1, size=69 bytes, dist=0,
  time=0.279ms</code></div>
<div class="D1"><code class="Li">node-03: multicast, seq=1, size=69 bytes,
  dist=0, time=0.360ms</code></div>
<div class="Pp"></div>
The first two lines tell us, that node-02 (actual node) is waiting for a
  response message from node-01 and node-03. The second two lines contain
  information, that we were successfully able to send an init message and also
  received a response message from remote nodes. Both of these messages are
  unicast, so we are able to send and receive unicast messages on a given port.
  If all of nodes are up and <b class="Nm" title="Nm">omping</b> is running on
  all of them, but we are not able to receive a response message, it's time to
  check connectivity between nodes. First make sure that you are able to
  <a class="Xr" title="Xr">ping(8)</a> them. If so, make sure that your firewall
  allows port 4321 to receive udp packets.
<div class="Pp"></div>
The next line tells us that we were able to receive a 69 byte unicast response
  message from node-01, with a sequence number of 1. The distance between the
  computers is 0 so they are on the same link net. Time between send and receive
  packet was 0.192 ms, that is also the current average time and lastly there
  were no lost packets.
<div class="Pp"></div>
The 6th line tells us the same information as the previous one, but the received
  message is a multicast message. It means, that multicast is probably well
  configured.
<div class="Pp"></div>
The 7th and 8th lines are same as previous two one but for node-03.
<div class="Pp"></div>
If the node is able to receive unicast packets, but never multicast, it means
  that multicast configuration is incorrect. It's recommended to turn off your
  firewall. If multicast packets start to arrive, great. If not, the problem is
  hidden in the switches/routers between the nodes. Contact your system
  administrator to allow multicast traffic on the switch or router.
<div class="Pp"></div>
<b class="Nm" title="Nm">omping</b> is terminated by SIGINT signal (CTRL-c).
  Summary statistics are shown
<div class="Pp"></div>
<div class="D1"><code class="Li">node-01: unicast, xmt/rcv/%loss = 18/18/0%,
  min/avg/max/std-dev = 0.177/0.301/0.463/0.073</code></div>
<div class="D1"><code class="Li">node-01: multicast, xmt/rcv/%loss = 18/18/0%,
  min/avg/max/std-dev = 0.193/0.335/0.547/0.090</code></div>
<div class="D1"><code class="Li">node-03: unicast, xmt/rcv/%loss = 21/21/0%,
  min/avg/max/std-dev = 0.272/0.299/0.327/0.017</code></div>
<div class="D1"><code class="Li">node-03: multicast, xmt/rcv/%loss = 21/20/4%
  (seq&gt;=2 0%), min/avg/max/std-dev = 0.347/0.388/0.575/0.055</code></div>
<div class="Pp"></div>
Last line has additional information (seq&gt;=2 %0) which means, that after
  receiving first multicast packet with seq number 2, no other multicast packet
  was lost. Because creating multicast tree is time consuming, it's pretty
  normal to lost first few multicast packets. rcv field can also be formatted
  like
<div class="Pp"></div>
<div class="D1"><code class="Li">node-01: unicast, xmt/rcv/%loss = 3/3+1/0%,
  min/avg/max/std-dev = 0.294/0.299/0.305/0.006</code></div>
<div class="Pp"></div>
This means, that 1 duplicate packet was received. It's possible to find out
  duplicate packet by looking to output and find line which has following format
<div class="Pp"></div>
<div class="D1"><code class="Li">node-01: unicast, seq=2 (dup), size=69 bytes,
  dist=0, time=0.469ms</code></div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">fping(8)</a>, <a class="Xr" title="Xr">ping(8)</a>
<h1 class="Sh" title="Sh" id="STANDARDS"><a class="selflink" href="#STANDARDS">STANDARDS</a></h1>
<b class="Nm" title="Nm">omping</b> uses Internet-Draft
  draft-ietf-mboned-ssmping-08 as underlaying protocol and tries to be as
  compliant as possible.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
The <b class="Nm" title="Nm">omping</b> utility was written by
  <span class="An" title="An">Jan Friesse</span>
  &#x27E8;jfriesse@redhat.com&#x27E9;.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<ul class="Bl-dash">
  <li class="It-dash">Some OSes may not have support for receiving TTL from
      packet. <b class="Nm" title="Nm">omping</b> then cannot provide distance
      information.</li>
  <li class="It-dash">Some OSes may not provide information about packet
      receive. Less precise actual time is then used.</li>
  <li class="It-dash"><b class="Nm" title="Nm">omping</b> highly depends on
      precise <a class="Xr" title="Xr">poll(2)</a> and
      <a class="Xr" title="Xr">gettimeofday(3)</a> functions. If OS doesn't
      provide at least milliseconds precision, results may be incorrect.</li>
</ul>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 22, 2011</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
