<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:05 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opapaquery(8) Master map:
IFSFFCLIRG (Man Page) opapaquery(8)</p>

<p style="margin-top: 1em">NAME <br>
opapaquery</p>

<p style="margin-top: 1em">(All) Performs various queries
of the performance management (PM)/performance
administration (PA) agent and provides details about fabric
performance. Refer to the Intel(R) Omni- <br>
Path Fabric Suite Fabric Manager User Guide</p>

<p style="margin-top: 1em">for a description of the
operation and client services of the PM/PA.</p>

<p style="margin-top: 1em">By default, opapaquery queries
the most recent data. However, if an image number ( imgNum)
and/or image offset ( imgOff) is provided, the query returns
previous sweep data. <br>
Queries that access previous sweep data return with the
absolute image number representing that data, and therefore
have an image offset of zero.</p>

<p style="margin-top: 1em">opapaquery #8217#8217;s
operation is dependent on an Intel(R) Omni-Path Fabric Suite
Fabric Manager version 6.0 or greater running as master
SM/PM in the fabric.</p>

<p style="margin-top: 1em">By default, opapaquery uses the
first active port on the local system. However, if the
Fabric Management Node is connected to more than one fabric
(for example, a subnet), the <br>
HFI and port may be specified to select the fabric whose PA
is to be queried.</p>

<p style="margin-top: 1em">Syntax <br>
opapaquery [-v] [-h hfi] [-p port] -o type[-g groupName] [-l
nodeLid] <br>
[-P portNumber] [-d delta] [-s select] [-f focus] [-S start]
<br>
[-r range] [-n imgNum] [-O imgOff] [-m moveImgNum] [-M
moveImgOff] <br>
[-V vfName]</p>

<p style="margin-top: 1em">Options <br>
-v/--verbose <br>
Verbose output.</p>

<p style="margin-top: 1em">-h/--hfi hfi <br>
HFI, numbered 1..n. Using 0 specifies that the -p port port
is a system-wide port number. (Default is 0.)</p>

<p style="margin-top: 1em">-p/--port port <br>
Port, numbered 1..n. If -h hfi is 0, then port is a
system-wide port number. (Default is 1.)</p>

<p style="margin-top: 1em">-o/--output type <br>
Output type, default is groupList. See Output Types</p>

<p style="margin-top: 1em">-g/--groupName groupName <br>
Group name for groupInfo query.</p>

<p style="margin-top: 1em">-l/--lid lid <br>
LID of node for portCounters query.</p>

<p style="margin-top: 1em">-P/--portNumber portNumber <br>
Port number for portCounters query.</p>

<p style="margin-top: 1em">-d/--delta delta <br>
Delta flag for portCounters query - 0 or 1.</p>

<p style="margin-top: 1em">-s/--select select <br>
32-bit select flag for clearing port counters.</p>

<p style="margin-top: 1em">Select bits for clrPortCounters.
0 is least significant (rightmost).</p>

<p style="margin-top: 1em">clrPortCounters bit descriptions
listed in the order &quot;mask - bit - location&quot;:</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x80000000 - 31
- Transmit Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x40000000 - 30
- Receive Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x20000000 - 29
- Transmit Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x10000000 - 28
- Receive Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x08000000 - 27
- Multicast Transmit Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x04000000 - 26
- Multicast Receive Packets</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x02000000 - 25
- Transmit Wait</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x01000000 - 24
- Congestion Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00800000 - 23
- Receive FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00400000 - 22
- Receive BECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00200000 - 21
- Transmit Time Cong.</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00100000 - 20
- Transmit Time Wasted BW</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00080000 - 19
- Transmit Time Wait Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00040000 - 18
- Receive Bubble</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00020000 - 17
- Mark FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00010000 - 16
- Receive Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00008000 - 15
- Receive Switch Relay</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00004000 - 14
- Transmit Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00002000 - 13
- Transmit Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00001000 - 12
- Receive Remote Physical Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000800 - 11
- Local Link Integrity</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000400 - 10
- Receive Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000200 - 9 -
Exc. Buffer Overrun</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000100 - 8 -
FM Configuration Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000080 - 7 -
Link Error Recovery</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000040 - 6 -
Link Error Downed</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000020 - 5 -
Uncorrectable Errors</p>

<p style="margin-top: 1em">Select bits for
clrVfPortCounters. 0 is least significant (rightmost).</p>

<p style="margin-top: 1em">clrVfPortCounters bit
descriptions listed in the order &quot;mask - bit -
location&quot;:</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x80000000 - 31
- VLXmitData</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x40000000 - 30
- VLRcvData</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x20000000 - 29
- VLXmitPkts</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x10000000 - 28
- VLRcvPkts</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x08000000 - 27
- VLXmitDiscards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x04000000 - 26
- VLCongDiscards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x02000000 - 25
- VLXmitWait</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x01000000 - 24
- VLRcvFECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00800000 - 23
- VLRcvBECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00400000 - 22
- VLXmitTimeCong</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00200000 - 21
- VLXmitWastedBW</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00100000 - 20
- VLXmitWaitData</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00080000 - 19
- VLRcvBubble</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00040000 - 18
- VLMarkFECN</p>

<p style="margin-top: 1em">&Acirc;&middot; Bits 17-0
reserved</p>

<p style="margin-top: 1em">-f/--focus focus <br>
Focus select value for getting focus ports.</p>

<p style="margin-top: 1em">focus select values:</p>

<p style="margin-top: 1em">utilhigh Sorted by utilization -
highest first.</p>

<p style="margin-top: 1em">pktrate Sorted by packet rate -
highest first.</p>

<p style="margin-top: 1em">utillow Sorted by utilization -
lowest first.</p>

<p style="margin-top: 1em">integrity Sorted by integrity
errors - highest first.</p>

<p style="margin-top: 1em">congestion <br>
Sorted by congestion errors - highest first.</p>

<p style="margin-top: 1em">smacongestion <br>
Sorted by SMA congestion errors - highest first.</p>

<p style="margin-top: 1em">bubbles Sorted by bubble errors
- highest first.</p>

<p style="margin-top: 1em">security Sorted by security
errors - highest first.</p>

<p style="margin-top: 1em">routing Sorted by routing errors
- highest first.</p>

<p style="margin-top: 1em">-S/--start start <br>
Start of window for focus ports, should always be 0.</p>

<p style="margin-top: 1em">-r/--range range <br>
Size of window for focus ports list.</p>

<p style="margin-top: 1em">-n/--imgNum imgNum <br>
64-bit image number. Can be used with groupInfo,
groupConfig, portCounters (delta).</p>

<p style="margin-top: 1em">-O/--imgOff imgOff <br>
Image offset. Can be used with groupInfo, groupConfig,
portCounters (delta).</p>

<p style="margin-top: 1em">-m/--moveImgNum moveImgNum <br>
64-bit image number. Used with moveFreeze to move a freeze
image.</p>

<p style="margin-top: 1em">-M/--moveImgOff moveImgOff <br>
Image offset. Can be used with moveFreeze to move a freeze
image.</p>

<p style="margin-top: 1em">-V/--vfName vfName <br>
VF name for vfInfo query.</p>

<p style="margin-top: 1em">-h and -p options permit a
variety of selections:</p>

<p style="margin-top: 1em">-h 0 First active port in system
(default).</p>

<p style="margin-top: 1em">-h 0 -p 0 First active port in
system.</p>

<p style="margin-top: 1em">-h x First active port on HFI
x.</p>

<p style="margin-top: 1em">-h x#8217#160;-p 0 <br>
First active port on HFI x.</p>

<p style="margin-top: 1em">-h 0 -p y Port y#8217#160;within
system (no matter which ports are active).</p>

<p style="margin-top: 1em">-h x#8217#160;-p y <br>
HFI x, port y.</p>

<p style="margin-top: 1em">Output Types <br>
classPortInfo <br>
Class port info.</p>

<p style="margin-top: 1em">groupList List of PA groups.</p>

<p style="margin-top: 1em">groupInfo Summary statistics of
a PA group. Requires -g option for groupName.</p>

<p style="margin-top: 1em">groupConfig <br>
Configuration of a PA group. Requires -g option for
groupName.</p>

<p style="margin-top: 1em">portCounters <br>
Port counters of fabric port. Requires -l lid and -P port
options, -d delta is optional.</p>

<p style="margin-top: 1em">clrPortCounters <br>
Clears port counters of fabric port. Requires -l lid and
-P#8217#160; port, and -s select options.</p>

<p style="margin-top: 1em">clrAllPortCounters <br>
Clears all port counters in fabric.</p>

<p style="margin-top: 1em">pmConfig Retrieves PM
configuration information.</p>

<p style="margin-top: 1em">freezeImage <br>
Creates freeze frame for image ID. Requires -n imgNum.</p>

<p style="margin-top: 1em">releaseImage <br>
Releases freeze frame for image ID. Requires -n imgNum.</p>

<p style="margin-top: 1em">renewImage <br>
Renews lease for freeze frame for image ID. Requires -n
imgNum.</p>

<p style="margin-top: 1em">moveFreeze <br>
Moves freeze frame from image ID to new image ID. Requires
-n#8217#160; imgNum and -m moveImgNum.</p>

<p style="margin-top: 1em">focusPorts <br>
Gets sorted list of ports using utilization or error values
(from group buckets). Requires -g groupname, -f focus, -S
start, -r range.</p>

<p style="margin-top: 1em">imageInfo Gets configuration of
a PA image (timestamps, etc.). Requires -n#8217#160;
imgNum.</p>

<p style="margin-top: 1em">vfList List of virtual
fabrics.</p>

<p style="margin-top: 1em">vfInfo Summary statistics of a
virtual fabric. Requires -V option for vfName.</p>

<p style="margin-top: 1em">vfConfig Configuration of a
virtual fabric. Requires -V option for vfName.</p>

<p style="margin-top: 1em">vfPortCounters <br>
Port counters of fabric port. Requires -V vfName, -l lid and
-P port options, -d delta is optional.</p>

<p style="margin-top: 1em">vfFocusPorts <br>
Gets sorted list of virtual fabric ports using utilization
or error values (from VF buckets). Requires -V vfname, -f
focus, -S start, -r range.</p>

<p style="margin-top: 1em">clrVfPortCounters <br>
Clears VF port counters of fabric port. Requires -l lid, -P
port, -s select, and -V vfname options.</p>

<p style="margin-top: 1em">Examples <br>
opapaquery -o classPortInfo <br>
opapaquery -o groupList <br>
opapaquery -o groupInfo -g All <br>
opapaquery -o groupConfig -g All <br>
opapaquery -o portCounters -l 1 -P 1 -d 1 <br>
opapaquery -o portCounters -l 1 -P 1 -d 1 -n 0x20000000d02
-O 1 <br>
opapaquery -o clrPortCounters -l 1 -P 1 -s 0xC0000000 <br>
#8217#160; #clears XmitData &amp; RcvData <br>
opapaquery -o clrAllPortCounters -s 0xC0000000 <br>
#8217#160; #clears XmitData &amp; RcvData on all ports <br>
opapaquery -o PMConfig <br>
opapaquery -o freezeImage -n 0x20000000d02 <br>
opapaquery -o releaseImage -n 0xd01 <br>
opapaquery -o renewImage -n 0xd01 <br>
opapaquery -o moveFreeze -n 0xd01 -m 0x20000000d02 -M -2
<br>
opapaquery -o focusPorts -g All -f 0x00030001 -S 0 -r 20
<br>
opapaquery -o imageInfo -n 0x20000000d02 <br>
opapaquery -o vfList <br>
opapaquery -o vfInfo -V Default <br>
opapaquery -o vfConfig -V Default <br>
opapaquery -o vfPortCounters -l 1 -P 1 -d 1 -V Default <br>
opapaquery -o clrVfPortCounters -l 1 -P 1 -s 0xC0000000 <br>
#8217#160; #clears VLXmitData &amp; VLRcvData <br>
opapaquery -o vfFocusPorts -V Default -f 0x00030001 -S 0 -r
20</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opapaquery(8)</p>
<hr>
</body>
</html>
