<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:07 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">FENCE_AGENT(8) System
Manager&rsquo;s Manual FENCE_AGENT(8)</p>

<p style="margin-top: 1em">NAME <br>
fence_vmware - Fence agent for VMWare</p>

<p style="margin-top: 1em">DESCRIPTION <br>
fence_vmware is an I/O Fencing agent which can be used with
the VMware ESX, VMware ESXi or VMware Server to fence
virtual machines.</p>

<p style="margin-top: 1em">Before you can use this agent,
it must be installed VI Perl Toolkit or vmrun command on
every node you want to make fencing.</p>

<p style="margin-top: 1em">VI Perl Toolkit is preferred for
VMware ESX/ESXi and Virtual Center. Vmrun command is only
solution for VMware Server 1/2 (this command will works
against ESX/ESXi 3.5 up2 and VC <br>
up2 too, but not cluster aware!) and is available as part of
VMware VIX API SDK package. VI Perl and VIX API SDK are both
available from VMware web pages (not int RHEL reposi&acirc;
<br>
tory!).</p>

<p style="margin-top: 1em">You can specify type of VMware
you are connecting to with -d switch (or vmware_type for
stdin). Possible values are esx, server2 and server1.Default
value is esx, which will use <br>
VI Perl. With server1 and server2, vmrun command is
used.</p>

<p style="margin-top: 1em">After you have successfully
installed VI Perl Toolkit or VIX API, you should be able to
run fence_vmware_helper (part of this agent) or vmrun
command. This agent supports only <br>
vmrun from version 2.0.0 (VIX API 1.6.0).</p>

<p style="margin-top: 1em">fence_vmware accepts options on
the command line as well as from stdin. Fenced sends
parameters through stdin when it execs the agent.
fence_vmware can be run by itself with com&acirc; <br>
mand line options. This is useful for testing and for
turning outlets on or off from scripts.</p>

<p style="margin-top: 1em">Vendor URL:
http://www.vmware.com</p>

<p style="margin-top: 1em">PARAMETERS</p>

<p style="margin-top: 1em">-o, --action=[action] <br>
Fencing action (Default Value: reboot)</p>

<p style="margin-top: 1em">-e, --exec=[command] <br>
Command to execute</p>

<p style="margin-top: 1em">-k, --identity-file=[filename]
<br>
Identity file (private key) for SSH</p>

<p style="margin-top: 1em">-4, --inet4-only <br>
Forces agent to use IPv4 addresses only</p>

<p style="margin-top: 1em">-6, --inet6-only <br>
Forces agent to use IPv6 addresses only</p>

<p style="margin-top: 1em">-a, --ip=[ip] <br>
IP address or hostname of fencing device</p>

<p style="margin-top: 1em">-u, --ipport=[port] <br>
TCP/UDP port to use for connection with device (Default
Value: 22)</p>

<p style="margin-top: 1em">-l, --username=[name] <br>
Login name This parameter is always required.</p>

<p style="margin-top: 1em">-p, --password=[password] <br>
Login password or passphrase</p>

<p style="margin-top: 1em">-S, --password-script=[script]
<br>
Script to run to retrieve password</p>

<p style="margin-top: 1em">-n, --plug=[ip] <br>
IP address or hostname of fencing device (together with
--port-as-ip)</p>

<p style="margin-top: 1em">-x, --ssh <br>
Use SSH connection (Default Value: 1)</p>

<p style="margin-top: 1em">--ssh-options=[options] <br>
SSH options to use</p>

<p style="margin-top: 1em">-d, --vmware_type=[type] <br>
Type of VMware to connect (Default Value: esx)</p>

<p style="margin-top: 1em">-s, --vmware-datacenter=[dc]
<br>
VMWare datacenter filter</p>

<p style="margin-top: 1em">-q, --quiet <br>
Disable logging to stderr. Does not affect --verbose or
--debug logging to syslog.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Verbose mode</p>

<p style="margin-top: 1em">-D, --debug-file=[debugfile]
<br>
Write debug information to given file</p>

<p style="margin-top: 1em">-V, --version <br>
Display version information and exit</p>

<p style="margin-top: 1em">-h, --help <br>
Display help and exit</p>

<p style="margin-top: 1em">--delay=[seconds] <br>
Wait X seconds before fencing is started (Default Value:
0)</p>

<p style="margin-top: 1em">--login-timeout=[seconds] <br>
Wait X seconds for cmd prompt after login (Default Value:
5)</p>

<p style="margin-top: 1em">--port-as-ip <br>
Make &quot;port/plug&quot; to be an alias to IP address</p>

<p style="margin-top: 1em">--power-timeout=[seconds] <br>
Test X seconds for status change after ON/OFF (Default
Value: 20)</p>

<p style="margin-top: 1em">--power-wait=[seconds] <br>
Wait X seconds after issuing ON/OFF (Default Value: 0)</p>

<p style="margin-top: 1em">--shell-timeout=[seconds] <br>
Wait X seconds for cmd prompt after issuing command (Default
Value: 3)</p>

<p style="margin-top: 1em">--retry-on=[attempts] <br>
Count of attempts to retry power on (Default Value: 1)</p>

<p style="margin-top: 1em">--ssh-path=[path] <br>
Path to ssh binary (Default Value: /usr/bin/ssh)</p>

<p style="margin-top: 1em">ACTIONS</p>

<p style="margin-top: 1em">on Power on machine.</p>

<p style="margin-top: 1em">off Power off machine.</p>

<p style="margin-top: 1em">reboot Reboot machine.</p>

<p style="margin-top: 1em">status This returns the status
of the plug/virtual machine.</p>

<p style="margin-top: 1em">monitor <br>
Check the health of fence device</p>

<p style="margin-top: 1em">metadata <br>
Display the XML metadata describing this resource.</p>

<p style="margin-top: 1em">validate-all <br>
Validate if all required parameters are entered.</p>

<p style="margin-top: 1em">STDIN PARAMETERS</p>

<p style="margin-top: 1em">action Fencing action (Default
Value: reboot)</p>

<p style="margin-top: 1em">exec Command to execute</p>

<p style="margin-top: 1em">identity_file <br>
Identity file (private key) for SSH</p>

<p style="margin-top: 1em">inet4_only <br>
Forces agent to use IPv4 addresses only</p>

<p style="margin-top: 1em">inet6_only <br>
Forces agent to use IPv6 addresses only</p>

<p style="margin-top: 1em">ipaddr IP address or hostname of
fencing device</p>

<p style="margin-top: 1em">ipport TCP/UDP port to use for
connection with device (Default Value: 22)</p>

<p style="margin-top: 1em">login Login name This parameter
is always required.</p>

<p style="margin-top: 1em">passwd Login password or
passphrase</p>

<p style="margin-top: 1em">passwd_script <br>
Script to run to retrieve password</p>

<p style="margin-top: 1em">port IP address or hostname of
fencing device (together with --port-as-ip)</p>

<p style="margin-top: 1em">secure Use SSH connection
(Default Value: 1)</p>

<p style="margin-top: 1em">ssh_options <br>
SSH options to use</p>

<p style="margin-top: 1em">vmware_type <br>
Type of VMware to connect (Default Value: esx)</p>

<p style="margin-top: 1em">vmware_datacenter <br>
VMWare datacenter filter</p>

<p style="margin-top: 1em">quiet Disable logging to stderr.
Does not affect --verbose or --debug logging to syslog.</p>

<p style="margin-top: 1em">verbose <br>
Verbose mode</p>

<p style="margin-top: 1em">debug Write debug information to
given file</p>

<p style="margin-top: 1em">version <br>
Display version information and exit</p>

<p style="margin-top: 1em">help Display help and exit</p>

<p style="margin-top: 1em">delay Wait X seconds before
fencing is started (Default Value: 0)</p>

<p style="margin-top: 1em">login_timeout <br>
Wait X seconds for cmd prompt after login (Default Value:
5)</p>

<p style="margin-top: 1em">port_as_ip <br>
Make &quot;port/plug&quot; to be an alias to IP address</p>

<p style="margin-top: 1em">power_timeout <br>
Test X seconds for status change after ON/OFF (Default
Value: 20)</p>

<p style="margin-top: 1em">power_wait <br>
Wait X seconds after issuing ON/OFF (Default Value: 0)</p>

<p style="margin-top: 1em">shell_timeout <br>
Wait X seconds for cmd prompt after issuing command (Default
Value: 3)</p>

<p style="margin-top: 1em">retry_on <br>
Count of attempts to retry power on (Default Value: 1)</p>

<p style="margin-top: 1em">ssh_path <br>
Path to ssh binary (Default Value: /usr/bin/ssh)</p>

<p style="margin-top: 1em">fence_vmware (Fence Agent)
2009-10-20 FENCE_AGENT(8)</p>
<hr>
</body>
</html>
