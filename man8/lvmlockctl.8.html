<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>LVMLOCKCTL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LVMLOCKCTL(8)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">LVMLOCKCTL(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
lvmlockctl &#x2014; Control for lvmlockd
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This command interacts with <b>lvmlockd</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
lvmlockctl [options]
<div style="height: 1.00em;">&#x00A0;</div>
<b>--help | -h</b>
<br/>
 Show this help information.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--quit | -q</b>
<br/>
 Tell lvmlockd to quit.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--info | -i</b>
<br/>
 Print lock state information from lvmlockd.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--dump | -d</b>
<br/>
 Print log buffer from lvmlockd.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--wait | -w 0|1</b>
<br/>
 Wait option for other commands.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--force | -f 0|1</b>
<br/>
 Force option for other commands.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--kill | -k</b> <i>vgname</i>
<br/>
 Kill access to the VG when sanlock cannot renew lease.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--drop | -r</b> <i>vgname</i>
<br/>
 Clear locks for the VG when it is unused after kill (-k).
<div style="height: 1.00em;">&#x00A0;</div>
<b>--gl-enable | -E</b> <i>vgname</i>
<br/>
 Tell lvmlockd to enable the global lock in a sanlock VG.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--gl-disable | -D</b> <i>vgname</i>
<br/>
 Tell lvmlockd to disable the global lock in a sanlock VG.
<div style="height: 1.00em;">&#x00A0;</div>
<b>--stop-lockspaces | -S</b>
<br/>
 Stop all lockspaces.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
<h2 class="Ss" title="Ss" id="info"><a class="selflink" href="#info">info</a></h2>
This collects and displays lock state from lvmlockd. The display is primitive,
  incomplete and will change in future version. To print the raw lock state from
  lvmlockd, combine this option with --dump|-d.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="dump"><a class="selflink" href="#dump">dump</a></h2>
This collects the circular log buffer of debug statements from lvmlockd and
  prints it.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="kill"><a class="selflink" href="#kill">kill</a></h2>
This is run by sanlock when it loses access to the storage holding leases for a
  VG. It currently emits a syslog message stating that the VG must be
  immediately deactivated. In the future it may automatically attempt to
  forcibly deactivate the VG. For more, see <b>lvmlockd</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="drop"><a class="selflink" href="#drop">drop</a></h2>
This should only be run after a VG has been successfully deactivated following
  an lvmlockctl --kill command. It clears the stale lockspace from lvmlockd. In
  the future, this may become automatic along with an automatic handling of
  --kill. For more, see <b>lvmlockd</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="gl-enable"><a class="selflink" href="#gl-enable">gl-enable</a></h2>
This enables the global lock in a sanlock VG. This is necessary if the VG that
  previously held the global lock is removed. For more, see <b>lvmlockd</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="gl-disable"><a class="selflink" href="#gl-disable">gl-disable</a></h2>
This disables the global lock in a sanlock VG. This is necessary if the global
  lock has mistakenly been enabled in more than one VG. The global lock should
  be disabled in all but one sanlock VG. For more, see <b>lvmlockd</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="stop-lockspaces"><a class="selflink" href="#stop-lockspaces">stop-lockspaces</a></h2>
This tells lvmlockd to stop all lockspaces. It can be useful to stop lockspaces
  for VGs that the vgchange --lock-stop comand can no longer see, or to stop the
  dlm global lockspace which is not directly stopped by the vgchange command.
  The wait and force options can be used with this command.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">LVM TOOLS 2.02.166(2)-RHEL7 (2016-11-16)</td>
    <td class="foot-os">Red Hat, Inc</td>
  </tr>
</table>
</body>
</html>
