<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>AMADDCLIENT(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AMADDCLIENT(8)</td>
    <td class="head-vol">System Administration Commands</td>
    <td class="head-rtitle">AMADDCLIENT(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
amaddclient - program to add client to an existing Amanda configuration
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 12.00ex; text-indent: -12.00ex;"><b>amaddclient</b>
  --config <i>config</i> ||
<br/>
 --client <i>client&#x00A0;name</i> ||
<br/>
 --diskdev <i>directory&#x00A0;to&#x00A0;backup</i> [--m]
  [--dumptype&#x00A0;<i>string</i>] [--includefile&#x00A0; <i>string</i>]
  [--includelist&#x00A0; <i>string</i>] [--excludefile&#x00A0;<i>string</i>]
  [--excludelist&#x00A0; <i>string</i>] [--user&#x00A0;<i>string</i>]
  [--auth&#x00A0; <i>string</i>] [--gnutar_list_dir&#x00A0;<i>string</i>]
  [--amandates&#x00A0; <i>string</i>] [--no-client-update] [--batch]
  [--help]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
After Amanda rpms are successfully installed and <b>amserverconfig</b> is run,
  <b>amaddclient</b> will add client to the Amanda configuration.
  <b>amaddclient</b> create or update Amanda <b>disklist</b>(5) file and create
  or update /var/lib/amanda/.amandahosts file on the server.
<div class="Pp"></div>
If --no-client-update is not specified, <b>amaddclient</b> will attempt to
  update or create /var/lib/amanda/.amandahost, amanda-client.conf and
  gnutar-lists on the client. (See ssh-keygen(1) and ssh-add(1) for detail.)
<div class="Pp"></div>
<b>amaddclient</b> must be run by user amandabackup.
<div class="Pp"></div>
--config, --client and --diskdev must be specified.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Options may be abbreviated, as long as the abbreviation is not ambiguous. Option
  argument can either separated by '=' or a space. Example: --conf=v253,
  --client client8.zmanda.com</div>
<div class="Pp"></div>
<b>--config config</b>
<div style="margin-left: 4.00ex;">Amanda configuration which this program will
  add the client to.</div>
<div class="Pp"></div>
<b>--client client</b>
<div style="margin-left: 4.00ex;">The name of the client machine to add. FQDN
  name recommended.</div>
<div class="Pp"></div>
<b>--diskdev diskdev</b>
<div style="margin-left: 4.00ex;">Directory for this Amanda configuration to
  backup.</div>
<div class="Pp"></div>
<b>--m</b>
<div style="margin-left: 4.00ex;">Modify existing entry in the
  <b>disklist</b>(5) file.
<div style="height: 1.00em;">&#x00A0;</div>
Note: if <b>disklist</b>(5) file has been modified manually, this option might
  not work.</div>
<div class="Pp"></div>
<b>--dumptype dumptype</b>
<div style="margin-left: 4.00ex;">dumptype to use. Dumptype must be defined in
  /etc/amanda/template.d/dumptypes or /etc/amanda/$config/amanda.conf file.
  Default: [user-tar]</div>
<div class="Pp"></div>
<b>--user string</b>
<div style="margin-left: 4.00ex;">name of user using <b>amrecover</b> on the
  client, default is root.</div>
<div class="Pp"></div>
<b>--auth string</b>
<div style="margin-left: 4.00ex;">authentication method to use when running
  <b>amrecover</b> from the client , default is bsdtcp.</div>
<div class="Pp"></div>
<b>--gnutar_list_dir string</b>
<div style="margin-left: 4.00ex;">directory where gnutar keep its state file on
  the client. Absolute path required. Default is /var/lib/amanda/gnutar-lists.
  If --no-client-update is not set, this program will attempt to create the
  directory on the client.</div>
<div class="Pp"></div>
<b>--amandates string</b>
<div style="margin-left: 4.00ex;">file where amanda keep the date of each
  dumplevel on the client, default is /etc/amandates.</div>
<div class="Pp"></div>
<b>--batch</b>
<div style="margin-left: 4.00ex;">Turn on batch mode when copying files to the
  client, default is off</div>
<div class="Pp"></div>
<b>--no-client-update</b>
<div style="margin-left: 4.00ex;">If this option is set, <b>amaddclient</b> will
  not attempt to update/create .amandahosts, amanda-client.conf and gnutar-lists
  file on the client.</div>
<div class="Pp"></div>
<b>--help</b>
<div style="margin-left: 4.00ex;">Display usage.</div>
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
If any of the following four options are used, <b>amaddclient</b> will extend
  the dumptype definition to an in-line definition in the <b>disklist</b>(5)
  file.</div>
<div class="Pp"></div>
<b>--includefile string</b>
<div style="margin-left: 4.00ex;">string is a glob expression</div>
<div class="Pp"></div>
<b>--includelist string</b>
<div style="margin-left: 4.00ex;">string is a file name on the client containing
  glob expressions. Specify either --includefile or --includelist.</div>
<div class="Pp"></div>
<b>--excludefile string</b>
<div style="margin-left: 4.00ex;">string is a glob expression</div>
<div class="Pp"></div>
<b>--excludelist string</b>
<div style="margin-left: 4.00ex;">string is a file name on the client containing
  glob expressions. Specify either --excludefile or --excludelist.</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>/var/lib/amanda/template.d</b>
<div style="margin-left: 4.00ex;">Amanda configuration template files install
  location</div>
<div class="Pp"></div>
<b>/var/lib/amanda</b>
<div style="margin-left: 4.00ex;">amandabackup home directory</div>
<div class="Pp"></div>
<b>/var/lib/amanda/.amandahosts</b>
<div style="margin-left: 4.00ex;">Amanda authentication file.</div>
<div class="Pp"></div>
<b>/var/lib/amanda/gnutar-lists</b>
<div style="margin-left: 4.00ex;">A directory which contains backup timestamp
  and list of files backed up.</div>
<div class="Pp"></div>
<b>/etc/amanda/$config</b>
<div style="margin-left: 4.00ex;">Amanda configuration files location for
  $config(e.g: DailySet1).</div>
<div class="Pp"></div>
<b>/etc/amanda/template.d</b>
<div style="margin-left: 4.00ex;">A directory contains dumptypes and tapetypes
  files used by all Amanda configurations.</div>
<div class="Pp"></div>
<b>/etc/amandates</b>
<div style="margin-left: 4.00ex;">Amanda file on the client. It keeps track of
  structures of previous dumps.</div>
<div class="Pp"></div>
<b>/tmp/amanda</b>
<div style="margin-left: 4.00ex;">directory contains Amanda debug log
  files.</div>
<h1 class="Sh" title="Sh" id="RETURN_VALUE"><a class="selflink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
On success, zero is returned. On error, 1 is returned.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>amanda</b>(8), <b>amanda.conf</b>(5), <b>amserverconfig</b>(8),
  <b>ssh-keygen</b>(1), <b>ssh-add</b>(1), <b>scp</b>(1)
<div class="Pp"></div>
The Amanda Wiki: : http://wiki.zmanda.com/
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Kevin Till</b> &lt;kevin.till@zmanda.com&gt;
<div style="margin-left: 4.00ex;">Zmanda, Inc. (http://www.zmanda.com)</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">01/10/2013</td>
    <td class="foot-os">Amanda 3.3.3</td>
  </tr>
</table>
</body>
</html>
