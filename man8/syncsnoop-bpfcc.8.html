<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>syncsnoop(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">syncsnoop(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">syncsnoop(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
syncsnoop - Trace sync() syscall. Uses Linux eBPF/bcc.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>syncsnoop</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
syncsnoop traces calls to sync(), which flushes file system buffers to storage
  devices. These calls can cause performance perturbations, and it can be useful
  to know if they are happening and how frequently.
<div style="height: 1.00em;">&#x00A0;</div>
This works by tracing the kernel sys_sync() function using dynamic tracing, and
  will need updating to match any changes to this function.
<div style="height: 1.00em;">&#x00A0;</div>
This makes use of a Linux 4.5 feature (bpf_perf_event_output()); for kernels
  older than 4.5, see the version under tools/old, which uses an older
  mechanism.
<div style="height: 1.00em;">&#x00A0;</div>
This program is also a basic example of eBPF/bcc.
<div style="height: 1.00em;">&#x00A0;</div>
Since this uses BPF, only the root user can use this tool.
<h1 class="Sh" title="Sh" id="REQUIREMENTS"><a class="selflink" href="#REQUIREMENTS">REQUIREMENTS</a></h1>
CONFIG_BPF and bcc.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Trace calls to sync():</dt>
  <dd class="It-tag"># <b>syncsnoop</b></dd>
</dl>
<h1 class="Sh" title="Sh" id="FIELDS"><a class="selflink" href="#FIELDS">FIELDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">TIME(s)</dt>
  <dd class="It-tag">Time of the call, in seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">CALL</dt>
  <dd class="It-tag">Call traced.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OVERHEAD"><a class="selflink" href="#OVERHEAD">OVERHEAD</a></h1>
This traces the kernel sync function and prints output for each event. As the
  rate of this is generally expected to be low (&lt;&lt; 100/s), the overhead is
  also expected to be negligible.
<h1 class="Sh" title="Sh" id="SOURCE"><a class="selflink" href="#SOURCE">SOURCE</a></h1>
This is from bcc.
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">https://github.com/iovisor/bcc</dd>
</dl>
<div class="Pp"></div>
Also look in the bcc distribution for a companion _examples.txt file containing
  example usage, output, and commentary for this tool.
<h1 class="Sh" title="Sh" id="OS"><a class="selflink" href="#OS">OS</a></h1>
Linux
<h1 class="Sh" title="Sh" id="STABILITY"><a class="selflink" href="#STABILITY">STABILITY</a></h1>
Unstable - in development.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Brendan Gregg
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
iostat(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-08-18</td>
    <td class="foot-os">USER COMMANDS</td>
  </tr>
</table>
</body>
</html>
