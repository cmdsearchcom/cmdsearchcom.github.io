<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:57 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CYR_EXPIRE(8) System Manager&rsquo;s Manual
CYR_EXPIRE(8)</p>

<p style="margin-top: 1em">NAME <br>
cyr_expire - expire messages and duplicate delivery database
entries</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cyr_expire [ -C config-file ] [ -D delete-duration ] [ -E
expire-duration ] [ -X expunge-duration ] [ -p
mailbox-prefix ] [ -u username ] [ -t ] [ -v ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Cyr_expire is used to run a number of regular maintenance
tasks on Cyrus databases, specifically:</p>

<p style="margin-top: 1em">&Acirc;&middot; expire messages
from mailboxes, and</p>

<p style="margin-top: 1em">&Acirc;&middot; expire entries
from the duplicate delivery database, and</p>

<p style="margin-top: 1em">&Acirc;&middot; cleanse
mailboxes of partially expunged messages (when using the
&quot;delayed&quot; expunge mode), and</p>

<p style="margin-top: 1em">&Acirc;&middot; remove deleted
mailboxes (when using the &quot;delayed&quot; delete
mode).</p>

<p style="margin-top: 1em">The expiration of messages is
controlled by the /vendor/cmu/cyrus-imapd/expire mailbox
annotation which specifies the age (in days) of messages in
the given mailbox that should <br>
be deleted. A value of 0 means that no expiration is to be
performed on that mailbox.</p>

<p style="margin-top: 1em">The value of the
/vendor/cmu/cyrus-imapd/expire annotation is inherited by
all children of the mailbox on which it is set, so an entire
mailbox tree can be configured by setting <br>
a single annotation on the root of that tree. If a mailbox
does not have a /vendor/cmu/cyrus-imapd/expire annotation
set on it (or does not inherit one), then no messages are
<br>
expired from the mailbox.</p>

<p style="margin-top: 1em">The annotation can be examined
using the info command of cyradm(1p), and modified using the
mboxconfig and setinfo commands of cyradm(1p).</p>

<p style="margin-top: 1em">Expiration of duplicate delivery
database entries for a given mailbox is also controlled by
the /vendor/cmu/cyrus-imapd/expire annotation which applies
to that mailbox. Unlike <br>
message expiration, if no annotation applies to the mailbox
then duplicate database entries are expired using the value
given to the -E option.</p>

<p style="margin-top: 1em">Cyr_expire reads its
configuration options out of the imapd.conf(5) file unless
specified otherwise by -C.</p>

<p style="margin-top: 1em">Cyr_expire requires at least one
of -D -E -X or -t to be supplied.</p>

<p style="margin-top: 1em">OPTIONS <br>
-C config-file <br>
Read configuration options from config-file.</p>

<p style="margin-top: 1em">-D delete-duration <br>
Remove previously deleted mailboxes older than
delete-duration (when using the &quot;delayed&quot; delete
mode). The value can be a floating point number, and may
have a suffix to <br>
specify the unit of time. If no suffix, the value is number
of days. Valid suffixes are d (days), h (hours), m (minutes)
and s (seconds).</p>

<p style="margin-top: 1em">-E expire-duration <br>
Prune the duplicate database of entries older than
expire-duration. This value is only used for entries which
do not have a corresponding /vendor/cmu/cyrus-imapd/expire
<br>
mailbox annotation. Format is the same as
delete-duration.</p>

<p style="margin-top: 1em">-X expunge-duration <br>
Expunge previously deleted messages older than
expunge-duration (when using the &quot;delayed&quot; expunge
mode). Format is the same as delete-duration.</p>

<p style="margin-top: 1em">-x Do not expunge messages even
if using delayed expunge mode. This reduces IO traffic
considerably, allowing cyr_expire to be run frequently to
clean up the duplicate data&acirc; <br>
base without overloading the machine.</p>

<p style="margin-top: 1em">-p mailbox-prefix <br>
Only find mailboxes starting with this prefix, e.g.
&quot;user.justgotspammedlots&quot;.</p>

<p style="margin-top: 1em">-u userid <br>
Only find mailboxes belonging to this user, e.g.
&quot;justgotspammedlots@example.com&quot;.</p>

<p style="margin-top: 1em">-t Remove any user flags which
are not used by remaining (not expunged) messages.</p>

<p style="margin-top: 1em">-v Enable verbose output.</p>

<p style="margin-top: 1em">-a Skip the annotation lookup,
so all /vendor/cmu/cyrus-imapd/expire annotations are
ignored entirely. It behaves as if they were not set, so
only expire-days is considered <br>
for all mailboxes.</p>

<p style="margin-top: 1em">FILES <br>
/etc/imapd.conf</p>

<p style="margin-top: 1em">SEE ALSO <br>
imapd.conf(5), cyrmaster(8), cyradm(1p)</p>

<p style="margin-top: 1em">CMU Project Cyrus
CYR_EXPIRE(8)</p>
<hr>
</body>
</html>
