<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:17 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ovs-vsctl(8) Open vSwitch Manual ovs-vsctl(8)</p>

<p style="margin-top: 1em">NAME <br>
ovs-vsctl - utility for querying and configuring
ovs-vswitchd</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ovs-vsctl [options] -- [options] command [args] [--
[options] command [args]]...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The ovs-vsctl program configures ovs-vswitchd(8) by
providing a high-level interface to its configuration
database. See ovs-vswitchd.conf.db(5) for comprehensive
documentation <br>
of the database schema.</p>

<p style="margin-top: 1em">ovs-vsctl connects to an
ovsdb-server process that maintains an Open vSwitch
configuration database. Using this connection, it queries
and possibly applies changes to the data&acirc; <br>
base, depending on the supplied commands. Then, if it
applied any changes, by default it waits until ovs-vswitchd
has finished reconfiguring itself before it exits. (If you
use <br>
ovs-vsctl when ovs-vswitchd is not running, use
--no-wait.)</p>

<p style="margin-top: 1em">ovs-vsctl can perform any number
of commands in a single run, implemented as a single atomic
transaction against the database.</p>

<p style="margin-top: 1em">The ovs-vsctl command line
begins with global options (see OPTIONS below for details).
The global options are followed by one or more commands.
Each command should begin with <br>
-- by itself as a command-line argument, to separate it from
the following commands. (The -- before the first command is
optional.) The command itself starts with command-spe&acirc;
<br>
cific options, if any, followed by the command name and any
arguments. See EXAMPLES below for syntax examples.</p>

<p style="margin-top: 1em">Linux VLAN Bridging
Compatibility <br>
The ovs-vsctl program supports the model of a bridge
implemented by Open vSwitch, in which a single bridge
supports ports on multiple VLANs. In this model, each port
on a bridge <br>
is either a trunk port that potentially passes packets
tagged with 802.1Q headers that designate VLANs or it is
assigned a single implicit VLAN that is never tagged with an
<br>
802.1Q header.</p>

<p style="margin-top: 1em">For compatibility with software
designed for the Linux bridge, ovs-vsctl also supports a
model in which traffic associated with a given 802.1Q VLAN
is segregated into a separate <br>
bridge. A special form of the add-br command (see below)
creates a &lsquo;&lsquo;fake bridge&rsquo;&rsquo; within an
Open vSwitch bridge to simulate this behavior. When such a
&lsquo;&lsquo;fake bridge&rsquo;&rsquo; is <br>
active, ovs-vsctl will treat it much like a bridge separate
from its &lsquo;&lsquo;parent bridge,&rsquo;&rsquo; but the
actual implementation in Open vSwitch uses only a single
bridge, with ports on the <br>
fake bridge assigned the implicit VLAN of the fake bridge of
which they are members. (A fake bridge for VLAN 0 receives
packets that have no 802.1Q tag or a tag with VLAN 0.)</p>

<p style="margin-top: 1em">OPTIONS <br>
The following options affect the behavior ovs-vsctl as a
whole. Some individual commands also accept their own
options, which are given just before the command name. If
the <br>
first command on the command line has options, then those
options must be separated from the global options by --.</p>

<p style="margin-top: 1em">--db=server <br>
Sets server as the database server that ovs-vsctl contacts
to query or modify configuration. The default is
unix:/var/run/openvswitch/db.sock. server must take one of
<br>
the following forms:</p>

<p style="margin-top: 1em">ssl:ip:port <br>
The specified SSL port on the host at the given ip, which
must be expressed as an IP address (not a DNS name) in IPv4
or IPv6 address format. If ip is an IPv6 <br>
address, then wrap ip with square brackets, e.g.:
ssl:[::1]:6640. The --private-key, --certificate, and
--ca-cert options are mandatory when this form is used.</p>

<p style="margin-top: 1em">tcp:ip:port <br>
Connect to the given TCP port on ip, where ip can be IPv4 or
IPv6 address. If ip is an IPv6 address, then wrap ip with
square brackets, e.g.: tcp:[::1]:6640.</p>

<p style="margin-top: 1em">unix:file <br>
On POSIX, connect to the Unix domain server socket named
file.</p>

<p style="margin-top: 1em">On Windows, connect to a local
named pipe that is represented by a file created in the path
file to mimic the behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">pssl:port[:ip] <br>
Listen on the given SSL port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but specifying ip limits connections to those
from the given ip, either IPv4 or IPv6 address. If ip is an
IPv6 address, then wrap ip with square brack&acirc; <br>
ets, e.g.: pssl:6640:[::1]. The --private-key,
--certificate, and --ca-cert options are mandatory when this
form is used.</p>

<p style="margin-top: 1em">ptcp:port[:ip] <br>
Listen on the given TCP port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but ip may be specified to listen only for
connections to the given ip, either IPv4 or IPv6 address. If
ip is an IPv6 address, then wrap ip with square <br>
brackets, e.g.: ptcp:6640:[::1].</p>

<p style="margin-top: 1em">punix:file <br>
On POSIX, listen on the Unix domain server socket named file
for a connection.</p>

<p style="margin-top: 1em">On Windows, listen on a local
named pipe. A file is created in the path file to mimic the
behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">--no-wait <br>
Prevents ovs-vsctl from waiting for ovs-vswitchd to
reconfigure itself according to the modified database. This
option should be used if ovs-vswitchd is not running;
oth&acirc; <br>
erwise, ovs-vsctl will not exit until ovs-vswitchd
starts.</p>

<p style="margin-top: 1em">This option has no effect if the
commands specified do not change the database.</p>

<p style="margin-top: 1em">--no-syslog <br>
By default, ovs-vsctl logs its arguments and the details of
any changes that it makes to the system log. This option
disables this logging.</p>

<p style="margin-top: 1em">This option is equivalent to
--verbose=vsctl:syslog:warn.</p>

<p style="margin-top: 1em">--oneline <br>
Modifies the output format so that the output for each
command is printed on a single line. New-line characters
that would otherwise separate lines are printed as 0 and
<br>
any instances of &nbsp;that would otherwise appear in the
output are doubled. Prints a blank line for each command
that has no output. This option does not affect the
for&acirc; <br>
matting of output from the list or find commands; see Table
Formatting Options below.</p>

<p style="margin-top: 1em">--dry-run <br>
Prevents ovs-vsctl from actually modifying the database.</p>

<p style="margin-top: 1em">-t secs <br>
--timeout=secs <br>
By default, or with a secs of 0, ovs-vsctl waits forever for
a response from the database. This option limits runtime to
approximately secs seconds. If the timeout <br>
expires, ovs-vsctl will exit with a SIGALRM signal. (A
timeout would normally happen only if the database cannot be
contacted, or if the system is overloaded.)</p>

<p style="margin-top: 1em">--retry <br>
Without this option, if ovs-vsctl connects outward to the
database server (the default) then ovs-vsctl will try to
connect once and exit with an error if the connection <br>
fails (which usually means that ovsdb-server is not
running).</p>

<p style="margin-top: 1em">With this option, or if --db
specifies that ovs-vsctl should listen for an incoming
connection from the database server, then ovs-vsctl will
wait for a connection to the <br>
database forever.</p>

<p style="margin-top: 1em">Regardless of this setting,
--timeout always limits how long ovs-vsctl will wait.</p>

<p style="margin-top: 1em">Table Formatting Options <br>
These options control the format of output from the list and
find commands.</p>

<p style="margin-top: 1em">-f format <br>
--format=format <br>
Sets the type of table formatting. The following types of
format are available:</p>

<p style="margin-top: 1em">table 2-D text tables with
aligned columns.</p>

<p style="margin-top: 1em">list (default) <br>
A list with one column per line and rows separated by a
blank line.</p>

<p style="margin-top: 1em">html HTML tables.</p>

<p style="margin-top: 1em">csv Comma-separated values as
defined in RFC 4180.</p>

<p style="margin-top: 1em">json JSON format as defined in
RFC 4627. The output is a sequence of JSON objects, each of
which corresponds to one table. Each JSON object has the
following members <br>
with the noted values:</p>

<p style="margin-top: 1em">caption <br>
The table&rsquo;s caption. This member is omitted if the
table has no caption.</p>

<p style="margin-top: 1em">headings <br>
An array with one element per table column. Each array
element is a string giving the corresponding column&rsquo;s
heading.</p>

<p style="margin-top: 1em">data An array with one element
per table row. Each element is also an array with one
element per table column. The elements of this second-level
array are the <br>
cells that constitute the table. Cells that represent OVSDB
data or data types are expressed in the format described in
the OVSDB specification; other cells <br>
are simply expressed as text strings.</p>

<p style="margin-top: 1em">-d format <br>
--data=format <br>
Sets the formatting for cells within output tables. The
following types of format are available:</p>

<p style="margin-top: 1em">string (default) <br>
The simple format described in the Database Values section
below.</p>

<p style="margin-top: 1em">bare The simple format with
punctuation stripped off: [] and {} are omitted around sets,
maps, and empty columns, items within sets and maps are
space-separated, and <br>
strings are never quoted. This format may be easier for
scripts to parse.</p>

<p style="margin-top: 1em">json JSON.</p>

<p style="margin-top: 1em">The json output format always
outputs cells in JSON format, ignoring this option.</p>

<p style="margin-top: 1em">--no-heading <br>
This option suppresses the heading row that otherwise
appears in the first row of table output.</p>

<p style="margin-top: 1em">--pretty <br>
By default, JSON in output is printed as compactly as
possible. This option causes JSON in output to be printed in
a more readable fashion. Members of objects and ele&acirc;
<br>
ments of arrays are printed one per line, with
indentation.</p>

<p style="margin-top: 1em">This option does not affect JSON
in tables, which is always printed compactly.</p>

<p style="margin-top: 1em">--bare Equivalent to
--format=list --data=bare --no-headings.</p>

<p style="margin-top: 1em">Public Key Infrastructure
Options <br>
-p privkey.pem <br>
--private-key=privkey.pem <br>
Specifies a PEM file containing the private key used as
ovs-vsctl&rsquo;s identity for outgoing SSL connections.</p>

<p style="margin-top: 1em">-c cert.pem <br>
--certificate=cert.pem <br>
Specifies a PEM file containing a certificate that certifies
the private key specified on -p or --private-key to be
trustworthy. The certificate must be signed by the <br>
certificate authority (CA) that the peer in SSL connections
will use to verify it.</p>

<p style="margin-top: 1em">-C cacert.pem <br>
--ca-cert=cacert.pem <br>
Specifies a PEM file containing the CA certificate that
ovs-vsctl should use to verify certificates presented to it
by SSL peers. (This may be the same certificate that <br>
SSL peers use to verify the certificate specified on -c or
--certificate, or it may be a different one, depending on
the PKI design in use.)</p>

<p style="margin-top: 1em">-C none <br>
--ca-cert=none <br>
Disables verification of certificates presented by SSL
peers. This introduces a security risk, because it means
that certificates cannot be verified to be those of known
<br>
trusted hosts.</p>

<p style="margin-top: 1em">--bootstrap-ca-cert=cacert.pem
<br>
When cacert.pem exists, this option has the same effect as
-C or --ca-cert. If it does not exist, then ovs-vsctl will
attempt to obtain the CA certificate from the SSL <br>
peer on its first SSL connection and save it to the named
PEM file. If it is successful, it will immediately drop the
connection and reconnect, and from then on all SSL <br>
connections must be authenticated by a certificate signed by
the CA certificate thus obtained.</p>

<p style="margin-top: 1em">This option exposes the SSL
connection to a man-in-the-middle attack obtaining the
initial CA certificate, but it may be useful for
bootstrapping.</p>

<p style="margin-top: 1em">This option is only useful if
the SSL peer sends its CA certificate as part of the SSL
certificate chain. The SSL protocol does not require the
server to send the CA cer&acirc; <br>
tificate.</p>

<p style="margin-top: 1em">This option is mutually
exclusive with -C and --ca-cert.</p>

<p style="margin-top: 1em">--peer-ca-cert=peer-cacert.pem
<br>
Specifies a PEM file that contains one or more additional
certificates to send to SSL peers. peer-cacert.pem should be
the CA certificate used to sign ovs-vsctl&rsquo;s own <br>
certificate, that is, the certificate specified on -c or
--certificate. If ovs-vsctl&rsquo;s certificate is
self-signed, then --certificate and --peer-ca-cert should
specify <br>
the same file.</p>

<p style="margin-top: 1em">This option is not useful in
normal operation, because the SSL peer must already have the
CA certificate for the peer to have any confidence in
ovs-vsctl&rsquo;s identity. How&acirc; <br>
ever, this offers a way for a new installation to bootstrap
the CA certificate on its first SSL connection.</p>

<p style="margin-top: 1em">-v[spec] <br>
--verbose=[spec] <br>
Sets logging levels. Without any spec, sets the log level
for every module and destination to dbg. Otherwise, spec is
a list of words separated by spaces or commas or <br>
colons, up to one from each category below:</p>

<p style="margin-top: 1em">&Acirc;&middot; A valid module
name, as displayed by the vlog/list command on
ovs-appctl(8), limits the log level change to the specified
module.</p>

<p style="margin-top: 1em">&Acirc;&middot; syslog, console,
or file, to limit the log level change to only to the system
log, to the console, or to a file, respectively. (If
--detach is specified, ovs-vsctl <br>
closes its standard file descriptors, so logging to the
console will have no effect.)</p>

<p style="margin-top: 1em">On Windows platform, syslog is
accepted as a word and is only useful along with the
--syslog-target option (the word has no effect
otherwise).</p>

<p style="margin-top: 1em">&Acirc;&middot; off, emer, err,
warn, info, or dbg, to control the log level. Messages of
the given severity or higher will be logged, and messages of
lower severity will be fil&acirc; <br>
tered out. off filters out all messages. See ovs-appctl(8)
for a definition of each log level.</p>

<p style="margin-top: 1em">Case is not significant within
spec.</p>

<p style="margin-top: 1em">Regardless of the log levels set
for file, logging to a file will not take place unless
--log-file is also specified (see below).</p>

<p style="margin-top: 1em">For compatibility with older
versions of OVS, any is accepted as a word but has no
effect.</p>

<p style="margin-top: 1em">-v <br>
--verbose <br>
Sets the maximum logging verbosity level, equivalent to
--verbose=dbg.</p>

<p style="margin-top: 1em">-vPATTERN:destination:pattern
<br>
--verbose=PATTERN:destination:pattern <br>
Sets the log pattern for destination to pattern. Refer to
ovs-appctl(8) for a description of the valid syntax for
pattern.</p>

<p style="margin-top: 1em">-vFACILITY:facility <br>
--verbose=FACILITY:facility <br>
Sets the RFC5424 facility of the log message. facility can
be one of kern, user, mail, daemon, auth, syslog, lpr, news,
uucp, clock, ftp, ntp, audit, alert, clock2, <br>
local0, local1, local2, local3, local4, local5, local6 or
local7. If this option is not specified, daemon is used as
the default for the local system syslog and local0 is <br>
used while sending a message to the target provided via the
--syslog-target option.</p>

<p style="margin-top: 1em">--log-file[=file] <br>
Enables logging to a file. If file is specified, then it is
used as the exact name for the log file. The default log
file name used if file is omitted is /var/log/open&acirc;
<br>
vswitch/ovs-vsctl.log.</p>

<p style="margin-top: 1em">--syslog-target=host:port <br>
Send syslog messages to UDP port on host, in addition to the
system syslog. The host must be a numerical IP address, not
a hostname.</p>

<p style="margin-top: 1em">--syslog-method=method <br>
Specify method how syslog messages should be sent to syslog
daemon. Following forms are supported:</p>

<p style="margin-top: 1em">&Acirc;&middot; libc, use libc
syslog() function. This is the default behavior. Downside of
using this options is that libc adds fixed prefix to every
message before it is actu&acirc; <br>
ally sent to the syslog daemon over /dev/log UNIX domain
socket.</p>

<p style="margin-top: 1em">&Acirc;&middot; unix:file, use
UNIX domain socket directly. It is possible to specify
arbitrary message format with this option. However, rsyslogd
8.9 and older versions use hard <br>
coded parser function anyway that limits UNIX domain socket
use. If you want to use arbitrary message format with older
rsyslogd versions, then use UDP socket to <br>
localhost IP address instead.</p>

<p style="margin-top: 1em">&Acirc;&middot; udp:ip:port, use
UDP socket. With this method it is possible to use arbitrary
message format also with older rsyslogd. When sending syslog
messages over UDP <br>
socket extra precaution needs to be taken into account, for
example, syslog daemon needs to be configured to listen on
the specified UDP port, accidental iptables <br>
rules could be interfering with local syslog traffic and
there are some security considerations that apply to UDP
sockets, but do not apply to UNIX domain sockets.</p>

<p style="margin-top: 1em">-h <br>
--help Prints a brief help message to the console.</p>

<p style="margin-top: 1em">-V <br>
--version <br>
Prints version information to the console.</p>

<p style="margin-top: 1em">COMMANDS <br>
The commands implemented by ovs-vsctl are described in the
sections below.</p>

<p style="margin-top: 1em">Open vSwitch Commands <br>
These commands work with an Open vSwitch as a whole.</p>

<p style="margin-top: 1em">init Initializes the Open
vSwitch database, if it is empty. If the database has
already been initialized, this command has no effect.</p>

<p style="margin-top: 1em">Any successful ovs-vsctl command
automatically initializes the Open vSwitch database if it is
empty. This command is provided to initialize the database
without executing <br>
any other command.</p>

<p style="margin-top: 1em">show Prints a brief overview of
the database contents.</p>

<p style="margin-top: 1em">emer-reset <br>
Reset the configuration into a clean state. It deconfigures
OpenFlow controllers, OVSDB servers, and SSL, and deletes
port mirroring, fail_mode, NetFlow, sFlow, and IPFIX <br>
configuration. This command also removes all other-config
keys from all database records, except that
other-config:hwaddr is preserved if it is present in a
Bridge <br>
record. Other networking configuration is left as-is.</p>

<p style="margin-top: 1em">Bridge Commands <br>
These commands examine and manipulate Open vSwitch
bridges.</p>

<p style="margin-top: 1em">[--may-exist] add-br bridge <br>
Creates a new bridge named bridge. Initially the bridge will
have no ports (other than bridge itself).</p>

<p style="margin-top: 1em">Without --may-exist, attempting
to create a bridge that exists is an error. With
--may-exist, this command does nothing if bridge already
exists as a real bridge.</p>

<p style="margin-top: 1em">[--may-exist] add-br bridge
parent vlan <br>
Creates a &lsquo;&lsquo;fake bridge&rsquo;&rsquo; named
bridge within the existing Open vSwitch bridge parent, which
must already exist and must not itself be a fake bridge. The
new fake bridge <br>
will be on 802.1Q VLAN vlan, which must be an integer
between 0 and 4095. The parent bridge must not already have
a fake bridge for vlan. Initially bridge will have no <br>
ports (other than bridge itself).</p>

<p style="margin-top: 1em">Without --may-exist, attempting
to create a bridge that exists is an error. With
--may-exist, this command does nothing if bridge already
exists as a VLAN bridge under <br>
parent for vlan.</p>

<p style="margin-top: 1em">[--if-exists] del-br bridge <br>
Deletes bridge and all of its ports. If bridge is a real
bridge, this command also deletes any fake bridges that were
created with bridge as parent, including all of <br>
their ports.</p>

<p style="margin-top: 1em">Without --if-exists, attempting
to delete a bridge that does not exist is an error. With
--if-exists, attempting to delete a bridge that does not
exist has no effect.</p>

<p style="margin-top: 1em">[--real|--fake] list-br <br>
Lists all existing real and fake bridges on standard output,
one per line. With --real or --fake, only bridges of that
type are returned.</p>

<p style="margin-top: 1em">br-exists bridge <br>
Tests whether bridge exists as a real or fake bridge. If so,
ovs-vsctl exits successfully with exit code 0. If not,
ovs-vsctl exits unsuccessfully with exit code 2.</p>

<p style="margin-top: 1em">br-to-vlan bridge <br>
If bridge is a fake bridge, prints the bridge&rsquo;s 802.1Q
VLAN as a decimal integer. If bridge is a real bridge,
prints 0.</p>

<p style="margin-top: 1em">br-to-parent bridge <br>
If bridge is a fake bridge, prints the name of its parent
bridge. If bridge is a real bridge, print bridge.</p>

<p style="margin-top: 1em">br-set-external-id bridge key
[value] <br>
Sets or clears an &lsquo;&lsquo;external ID&rsquo;&rsquo;
value on bridge. These values are intended to identify
entities external to Open vSwitch with which bridge is
associated, e.g. the <br>
bridge&rsquo;s identifier in a virtualization management
platform. The Open vSwitch database schema specifies
well-known key values, but key and value are otherwise
arbitrary <br>
strings.</p>

<p style="margin-top: 1em">If value is specified, then key
is set to value for bridge, overwriting any previous value.
If value is omitted, then key is removed from bridge&rsquo;s
set of external IDs (if <br>
it was present).</p>

<p style="margin-top: 1em">For real bridges, the effect of
this command is similar to that of a set or remove command
in the external-ids column of the Bridge table. For fake
bridges, it actually <br>
modifies keys with names prefixed by fake-bridge- in the
Port table.</p>

<p style="margin-top: 1em">br-get-external-id bridge [key]
<br>
Queries the external IDs on bridge. If key is specified, the
output is the value for that key or the empty string if key
is unset. If key is omitted, the output is <br>
key=value, one per line, for each key-value pair.</p>

<p style="margin-top: 1em">For real bridges, the effect of
this command is similar to that of a get command in the
external-ids column of the Bridge table. For fake bridges,
it queries keys with <br>
names prefixed by fake-bridge- in the Port table.</p>

<p style="margin-top: 1em">Port Commands <br>
These commands examine and manipulate Open vSwitch ports.
These commands treat a bonded port as a single entity.</p>

<p style="margin-top: 1em">list-ports bridge <br>
Lists all of the ports within bridge on standard output, one
per line. The local port bridge is not included in the
list.</p>

<p style="margin-top: 1em">[--may-exist] add-port bridge
port [column[:key]=value]... <br>
Creates on bridge a new port named port from the network
device of the same name.</p>

<p style="margin-top: 1em">Optional arguments set values of
column in the Port record created by the command. For
example, tag=9 would make the port an access port for VLAN
9. The syntax is the <br>
same as that for the set command (see Database Commands
below).</p>

<p style="margin-top: 1em">Without --may-exist, attempting
to create a port that exists is an error. With --may-exist,
this command does nothing if port already exists on bridge
and is not a bonded <br>
port.</p>

<p style="margin-top: 1em">[--fake-iface] add-bond bridge
port iface... [column[:key]=value]... <br>
Creates on bridge a new port named port that bonds together
the network devices given as each iface. At least two
interfaces must be named. If the interfaces are DPDK <br>
enabled then the transaction will need to include operations
to explicitly set the interface type to
&rsquo;dpdk&rsquo;.</p>

<p style="margin-top: 1em">Optional arguments set values of
column in the Port record created by the command. The syntax
is the same as that for the set command (see Database
Commands below).</p>

<p style="margin-top: 1em">With --fake-iface, a fake
interface with the name port is created. This should only be
used for compatibility with legacy software that requires
it.</p>

<p style="margin-top: 1em">Without --may-exist, attempting
to create a port that exists is an error. With --may-exist,
this command does nothing if port already exists on bridge
and bonds together <br>
exactly the specified interfaces.</p>

<p style="margin-top: 1em">[--if-exists] del-port [bridge]
port <br>
Deletes port. If bridge is omitted, port is removed from
whatever bridge contains it; if bridge is specified, it must
be the real or fake bridge that contains port.</p>

<p style="margin-top: 1em">Without --if-exists, attempting
to delete a port that does not exist is an error. With
--if-exists, attempting to delete a port that does not exist
has no effect.</p>

<p style="margin-top: 1em">[--if-exists] --with-iface
del-port [bridge] iface <br>
Deletes the port named iface or that has an interface named
iface. If bridge is omitted, the port is removed from
whatever bridge contains it; if bridge is specified, it <br>
must be the real or fake bridge that contains the port.</p>

<p style="margin-top: 1em">Without --if-exists, attempting
to delete the port for an interface that does not exist is
an error. With --if-exists, attempting to delete the port
for an interface that <br>
does not exist has no effect.</p>

<p style="margin-top: 1em">port-to-br port <br>
Prints the name of the bridge that contains port on standard
output.</p>

<p style="margin-top: 1em">Interface Commands <br>
These commands examine the interfaces attached to an Open
vSwitch bridge. These commands treat a bonded port as a
collection of two or more interfaces, rather than as a
single <br>
port.</p>

<p style="margin-top: 1em">list-ifaces bridge <br>
Lists all of the interfaces within bridge on standard
output, one per line. The local port bridge is not included
in the list.</p>

<p style="margin-top: 1em">iface-to-br iface <br>
Prints the name of the bridge that contains iface on
standard output.</p>

<p style="margin-top: 1em">OpenFlow Controller Connectivity
<br>
ovs-vswitchd can perform all configured bridging and
switching locally, or it can be configured to communicate
with one or more external OpenFlow controllers. The switch
is typ&acirc; <br>
ically configured to connect to a primary controller that
takes charge of the bridge&rsquo;s flow table to implement a
network policy. In addition, the switch can be configured to
<br>
listen to connections from service controllers. Service
controllers are typically used for occasional support and
maintenance, e.g. with ovs-ofctl.</p>

<p style="margin-top: 1em">get-controller bridge <br>
Prints the configured controller target.</p>

<p style="margin-top: 1em">del-controller bridge <br>
Deletes the configured controller target.</p>

<p style="margin-top: 1em">set-controller bridge target...
<br>
Sets the configured controller target or targets. Each
target may use any of the following forms:</p>

<p style="margin-top: 1em">ssl:ip[:port] <br>
tcp:ip[:port] <br>
The specified port on the host at the given ip, which must
be expressed as an IP address (not a DNS name) in IPv4 or
IPv6 address format. Wrap IPv6 addresses in <br>
square brackets, e.g. tcp:[::1]:6653. For ssl, the
--private-key, --certificate, and --ca-cert options are
mandatory.</p>

<p style="margin-top: 1em">If port is not specified, it
defaults to 6653.</p>

<p style="margin-top: 1em">unix:file <br>
On POSIX, a Unix domain server socket named file.</p>

<p style="margin-top: 1em">On Windows, connect to a local
named pipe that is represented by a file created in the path
file to mimic the behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">pssl:[port][:ip] <br>
ptcp:[port][:ip] <br>
Listens for OpenFlow connections on port. The default port
is 6653. By default, connections are allowed from any IPv4
address. Specify ip as an IPv4 address or a <br>
bracketed IPv6 address (e.g. ptcp:6653:[::1]). DNS names may
not be used. For pssl, the --private-key,--certificate, and
--ca-cert options are mandatory.</p>

<p style="margin-top: 1em">punix:file <br>
Listens for OpenFlow connections on the Unix domain server
socket named file.</p>

<p style="margin-top: 1em">Controller Failure Settings</p>

<p style="margin-top: 1em">When a controller is configured,
it is, ordinarily, responsible for setting up all flows on
the switch. Thus, if the connection to the controller fails,
no new network connec&acirc; <br>
tions can be set up. If the connection to the controller
stays down long enough, no packets can pass through the
switch at all.</p>

<p style="margin-top: 1em">If the value is standalone, or
if neither of these settings is set, ovs-vswitchd will take
over responsibility for setting up flows when no message has
been received from the <br>
controller for three times the inactivity probe interval. In
this mode, ovs-vswitchd causes the datapath to act like an
ordinary MAC-learning switch. ovs-vswitchd will continue
<br>
to retry connecting to the controller in the background and,
when the connection succeeds, it discontinues its standalone
behavior.</p>

<p style="margin-top: 1em">If this option is set to secure,
ovs-vswitchd will not set up flows on its own when the
controller connection fails.</p>

<p style="margin-top: 1em">get-fail-mode bridge <br>
Prints the configured failure mode.</p>

<p style="margin-top: 1em">del-fail-mode bridge <br>
Deletes the configured failure mode.</p>

<p style="margin-top: 1em">set-fail-mode bridge
standalone|secure <br>
Sets the configured failure mode.</p>

<p style="margin-top: 1em">Manager Connectivity <br>
These commands manipulate the manager_options column in the
Open_vSwitch table and rows in the Managers table. When
ovsdb-server is configured to use the manager_options column
<br>
for OVSDB connections (as described in the startup scripts
provided with Open vSwitch), this allows the administrator
to use ovs-vsctl to configure database connections.</p>

<p style="margin-top: 1em">get-manager <br>
Prints the configured manager(s).</p>

<p style="margin-top: 1em">del-manager <br>
Deletes the configured manager(s).</p>

<p style="margin-top: 1em">set-manager target... <br>
Sets the configured manager target or targets. Each target
may use any of the following forms:</p>

<p style="margin-top: 1em">ssl:ip:port <br>
The specified SSL port on the host at the given ip, which
must be expressed as an IP address (not a DNS name) in IPv4
or IPv6 address format. If ip is an IPv6 <br>
address, then wrap ip with square brackets, e.g.:
ssl:[::1]:6640. The --private-key, --certificate, and
--ca-cert options are mandatory when this form is used.</p>

<p style="margin-top: 1em">tcp:ip:port <br>
Connect to the given TCP port on ip, where ip can be IPv4 or
IPv6 address. If ip is an IPv6 address, then wrap ip with
square brackets, e.g.: tcp:[::1]:6640.</p>

<p style="margin-top: 1em">unix:file <br>
On POSIX, connect to the Unix domain server socket named
file.</p>

<p style="margin-top: 1em">On Windows, connect to a local
named pipe that is represented by a file created in the path
file to mimic the behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">pssl:port[:ip] <br>
Listen on the given SSL port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but specifying ip limits connections to those
from the given ip, either IPv4 or IPv6 address. If ip is an
IPv6 address, then wrap ip with square brack&acirc; <br>
ets, e.g.: pssl:6640:[::1]. The --private-key,
--certificate, and --ca-cert options are mandatory when this
form is used.</p>

<p style="margin-top: 1em">ptcp:port[:ip] <br>
Listen on the given TCP port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but ip may be specified to listen only for
connections to the given ip, either IPv4 or IPv6 address. If
ip is an IPv6 address, then wrap ip with square <br>
brackets, e.g.: ptcp:6640:[::1].</p>

<p style="margin-top: 1em">punix:file <br>
On POSIX, listen on the Unix domain server socket named file
for a connection.</p>

<p style="margin-top: 1em">On Windows, listen on a local
named pipe. A file is created in the path file to mimic the
behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">SSL Configuration <br>
When ovs-vswitchd is configured to connect over SSL for
management or controller connectivity, the following
parameters are required:</p>

<p style="margin-top: 1em">private-key <br>
Specifies a PEM file containing the private key used as the
virtual switch&rsquo;s identity for SSL connections to the
controller.</p>

<p style="margin-top: 1em">certificate <br>
Specifies a PEM file containing a certificate, signed by the
certificate authority (CA) used by the controller and
manager, that certifies the virtual switch&rsquo;s private
<br>
key, identifying a trustworthy switch.</p>

<p style="margin-top: 1em">ca-cert <br>
Specifies a PEM file containing the CA certificate used to
verify that the virtual switch is connected to a trustworthy
controller.</p>

<p style="margin-top: 1em">These files are read only once,
at ovs-vswitchd startup time. If their contents change,
ovs-vswitchd must be killed and restarted.</p>

<p style="margin-top: 1em">These SSL settings apply to all
SSL connections made by the virtual switch.</p>

<p style="margin-top: 1em">get-ssl <br>
Prints the SSL configuration.</p>

<p style="margin-top: 1em">del-ssl <br>
Deletes the current SSL configuration.</p>

<p style="margin-top: 1em">[--bootstrap] set-ssl
private-key certificate ca-cert <br>
Sets the SSL configuration. The --bootstrap option is
described below.</p>

<p style="margin-top: 1em">CA Certificate Bootstrap</p>

<p style="margin-top: 1em">Ordinarily, all of the files
named in the SSL configuration must exist when ovs-vswitchd
starts. However, if the ca-cert file does not exist and the
--bootstrap option is given, <br>
then ovs-vswitchd will attempt to obtain the CA certificate
from the controller on its first SSL connection and save it
to the named PEM file. If it is successful, it will
imme&acirc; <br>
diately drop the connection and reconnect, and from then on
all SSL connections must be authenticated by a certificate
signed by the CA certificate thus obtained.</p>

<p style="margin-top: 1em">This option exposes the SSL
connection to a man-in-the-middle attack obtaining the
initial CA certificate, but it may be useful for
bootstrapping.</p>

<p style="margin-top: 1em">This option is only useful if
the controller sends its CA certificate as part of the SSL
certificate chain. The SSL protocol does not require the
controller to send the CA cer&acirc; <br>
tificate.</p>

<p style="margin-top: 1em">Auto-Attach Commands <br>
The IETF Auto-Attach SPBM draft standard describes a compact
method of using IEEE 802.1AB Link Layer Discovery Protocol
(LLDP) together with a IEEE 802.1aq Shortest Path Bridging
<br>
(SPB) network to automatically attach network devices to
individual services in a SPB network. The intent here is to
allow network applications and devices using OVS to be able
<br>
to easily take advantage of features offered by industry
standard SPB networks. A fundamental element of the
Auto-Attach feature is to map traditional VLANs onto SPB
I_SIDs. <br>
These commands manage the Auto-Attach I-SID/VLAN
mappings.</p>

<p style="margin-top: 1em">add-aa-mapping bridge i-sid vlan
<br>
Creates a new Auto-Attach mapping on bridge for i-sid and
vlan.</p>

<p style="margin-top: 1em">del-aa-mapping bridge i-sid vlan
<br>
Deletes an Auto-Attach mapping on bridge for i-sid and
vlan.</p>

<p style="margin-top: 1em">get-aa-mapping bridge <br>
Lists all of the Auto-Attach mappings within bridge on
standard output.</p>

<p style="margin-top: 1em">Database Commands <br>
These commands query and modify the contents of ovsdb
tables. They are a slight abstraction of the ovsdb interface
and as such they operate at a lower level than other
ovs-vsctl <br>
commands.</p>

<p style="margin-top: 1em">Identifying Tables, Records, and
Columns</p>

<p style="margin-top: 1em">Each of these commands has a
table parameter to identify a table within the database.
Many of them also take a record parameter that identifies a
particular record within a ta&acirc; <br>
ble. The record parameter may be the UUID for a record, and
many tables offer additional ways to identify records. Some
commands also take column parameters that identify a <br>
particular field within the records in a table.</p>

<p style="margin-top: 1em">The following tables are
currently defined:</p>

<p style="margin-top: 1em">Open_vSwitch <br>
Global configuration for an ovs-vswitchd. This table
contains exactly one record, identified by specifying . as
the record name.</p>

<p style="margin-top: 1em">Bridge Configuration for a
bridge within an Open vSwitch. Records may be identified by
bridge name.</p>

<p style="margin-top: 1em">Port A bridge port. Records may
be identified by port name.</p>

<p style="margin-top: 1em">Interface <br>
A network device attached to a port. Records may be
identified by name.</p>

<p style="margin-top: 1em">Flow_Table <br>
Configuration for a particular OpenFlow flow table. Records
may be identified by name.</p>

<p style="margin-top: 1em">QoS Quality-of-service
configuration for a Port. Records may be identified by port
name.</p>

<p style="margin-top: 1em">Queue Configuration for one
queue within a QoS configuration. Records may only be
identified by UUID.</p>

<p style="margin-top: 1em">Mirror A port mirroring
configuration attached to a bridge. Records may be
identified by mirror name.</p>

<p style="margin-top: 1em">Controller <br>
Configuration for an OpenFlow controller. A controller
attached to a particular bridge may be identified by the
bridge&rsquo;s name.</p>

<p style="margin-top: 1em">Manager <br>
Configuration for an OVSDB connection. Records may be
identified by target (e.g. tcp:1.2.3.4).</p>

<p style="margin-top: 1em">NetFlow <br>
A NetFlow configuration attached to a bridge. Records may be
identified by bridge name.</p>

<p style="margin-top: 1em">SSL The global SSL configuration
for ovs-vswitchd. The record attached to the Open_vSwitch
table may be identified by specifying . as the record
name.</p>

<p style="margin-top: 1em">sFlow An sFlow exporter
configuration attached to a bridge. Records may be
identified by bridge name.</p>

<p style="margin-top: 1em">IPFIX An IPFIX exporter
configuration attached to a bridge. Records may be
identified by bridge name.</p>

<p style="margin-top: 1em">Flow_Sample_Collector_Set <br>
An IPFIX exporter configuration attached to a bridge for
sampling packets on a per-flow basis using OpenFlow sample
actions.</p>

<p style="margin-top: 1em">AutoAttach <br>
Configuration for Auto Attach within a bridge.</p>

<p style="margin-top: 1em">Record names must be specified
in full and with correct capitalization. Names of tables and
columns are not case-sensitive, and -- and _ are treated
interchangeably. Unique <br>
abbreviations are acceptable, e.g. net or n is sufficient to
identify the NetFlow table.</p>

<p style="margin-top: 1em">Database Values</p>

<p style="margin-top: 1em">Each column in the database
accepts a fixed type of data. The currently defined basic
types, and their representations, are:</p>

<p style="margin-top: 1em">integer <br>
A decimal integer in the range -2**63 to 2**63-1,
inclusive.</p>

<p style="margin-top: 1em">real A floating-point
number.</p>

<p style="margin-top: 1em">Boolean <br>
True or false, written true or false, respectively.</p>

<p style="margin-top: 1em">string An arbitrary Unicode
string, except that null bytes are not allowed. Quotes are
optional for most strings that begin with an English letter
or underscore and consist only <br>
of letters, underscores, hyphens, and periods. However, true
and false and strings that match the syntax of UUIDs (see
below) must be enclosed in double quotes to distin&acirc;
<br>
guish them from other basic types. When double quotes are
used, the syntax is that of strings in JSON, e.g.
backslashes may be used to escape special characters. The
<br>
empty string must be represented as a pair of double quotes
(&quot;&quot;).</p>

<p style="margin-top: 1em">UUID Either a universally unique
identifier in the style of RFC 4122, e.g.
f81d4fae-7dec-11d0-a765-00a0c91e6bf6, or an @name defined by
a get or create command within the same <br>
ovs-vsctl invocation.</p>

<p style="margin-top: 1em">Multiple values in a single
column may be separated by spaces or a single comma. When
multiple values are present, duplicates are not allowed, and
order is not important. Con&acirc; <br>
versely, some database columns can have an empty set of
values, represented as [], and square brackets may
optionally enclose other non-empty sets or single values as
well. For a <br>
column accepting a set of integers, database commands accept
a range. A range is represented by two integers separated by
-. A range is inclusive. A range has a maximum size of <br>
4096 elements. If more elements are needed, they can be
specified in seperate ranges.</p>

<p style="margin-top: 1em">A few database columns are
&lsquo;&lsquo;maps&rsquo;&rsquo; of key-value pairs, where
the key and the value are each some fixed database type.
These are specified in the form key=value, where key and
<br>
value follow the syntax for the column&rsquo;s key type and
value type, respectively. When multiple pairs are present
(separated by spaces or a comma), duplicate keys are not
allowed, <br>
and again the order is not important. Duplicate values are
allowed. An empty map is represented as {}. Curly braces may
optionally enclose non-empty maps as well (but use <br>
quotes to prevent the shell from expanding
other-config={0=x,1=y} into other-config=0=x
other-config=1=y, which may not have the desired
effect).</p>

<p style="margin-top: 1em">Database Command Syntax</p>

<p style="margin-top: 1em">[--if-exists]
[--columns=column[,column]...] list table [record]... <br>
Lists the data in each specified record. If no records are
specified, lists all the records in table.</p>

<p style="margin-top: 1em">If --columns is specified, only
the requested columns are listed, in the specified order.
Otherwise, all columns are listed, in alphabetical order by
column name.</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if any specified record does not exist. With
--if-exists, the command ignores any record that does not
exist, without producing any <br>
output.</p>

<p style="margin-top: 1em">[--columns=column[,column]...]
find table [column[:key]=value]... <br>
Lists the data in each record in table whose column equals
value or, if key is specified, whose column contains a key
with the specified value. The following operators <br>
may be used where = is written in the syntax summary:</p>

<p style="margin-top: 1em">= != &lt; &gt; &lt;= &gt;= <br>
Selects records in which column[:key] equals, does not
equal, is less than, is greater than, is less than or equal
to, or is greater than or equal to value, respec&acirc; <br>
tively.</p>

<p style="margin-top: 1em">Consider column[:key] and value
as sets of elements. Identical sets are considered equal.
Otherwise, if the sets have different numbers of elements,
then the set <br>
with more elements is considered to be larger. Otherwise,
consider a element from each set pairwise, in increasing
order within each set. The first pair that dif&acirc; <br>
fers determines the result. (For a column that contains
key-value pairs, first all the keys are compared, and values
are considered only if the two sets contain <br>
identical keys.)</p>

<p style="margin-top: 1em">{=} {!=} <br>
Test for set equality or inequality, respectively.</p>

<p style="margin-top: 1em">{&lt;=} Selects records in which
column[:key] is a subset of value. For example,
flood-vlans{&lt;=}1,2 selects records in which the
flood-vlans column is the empty set or <br>
contains 1 or 2 or both.</p>

<p style="margin-top: 1em">{&lt;} Selects records in which
column[:key] is a proper subset of value. For example,
flood-vlans{&lt;}1,2 selects records in which the
flood-vlans column is the empty set <br>
or contains 1 or 2 but not both.</p>

<p style="margin-top: 1em">{&gt;=} {&gt;} <br>
Same as {&lt;=} and {&lt;}, respectively, except that the
relationship is reversed. For example, flood-vlans{&gt;=}1,2
selects records in which the flood-vlans column con&acirc;
<br>
tains both 1 and 2.</p>

<p style="margin-top: 1em">For arithmetic operators (= !=
&lt; &gt; &lt;= &gt;=), when key is specified but a
particular record&rsquo;s column does not contain key, the
record is always omitted from the results. <br>
Thus, the condition other-config:mtu!=1500 matches records
that have a mtu key whose value is not 1500, but not those
that lack an mtu key.</p>

<p style="margin-top: 1em">For the set operators, when key
is specified but a particular record&rsquo;s column does not
contain key, the comparison is done against an empty set.
Thus, the condition <br>
other-config:mtu{!=}1500 matches records that have a mtu key
whose value is not 1500 and those that lack an mtu key.</p>

<p style="margin-top: 1em">Don&rsquo;t forget to escape
&lt; or &gt; from interpretation by the shell.</p>

<p style="margin-top: 1em">If --columns is specified, only
the requested columns are listed, in the specified order.
Otherwise all columns are listed, in alphabetical order by
column name.</p>

<p style="margin-top: 1em">The UUIDs shown for rows created
in the same ovs-vsctl invocation will be wrong.</p>

<p style="margin-top: 1em">[--if-exists] [--id=@name] get
table record [column[:key]]... <br>
Prints the value of each specified column in the given
record in table. For map columns, a key may optionally be
specified, in which case the value associated with key in
<br>
the column is printed, instead of the entire map.</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if record does not exist or key is specified, if key
does not exist in record. With --if-exists, a missing record
yields no output and <br>
a missing key prints a blank line.</p>

<p style="margin-top: 1em">If @name is specified, then the
UUID for record may be referred to by that name later in the
same ovs-vsctl invocation in contexts where a UUID is
expected.</p>

<p style="margin-top: 1em">Both --id and the column
arguments are optional, but usually at least one or the
other should be specified. If both are omitted, then get has
no effect except to verify <br>
that record exists in table.</p>

<p style="margin-top: 1em">--id and --if-exists cannot be
used together.</p>

<p style="margin-top: 1em">[--if-exists] set table record
column[:key]=value... <br>
Sets the value of each specified column in the given record
in table to value. For map columns, a key may optionally be
specified, in which case the value associated with <br>
key in that column is changed (or added, if none exists),
instead of the entire map.</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if record does not exist. With --if-exists, this
command does nothing if record does not exist.</p>

<p style="margin-top: 1em">[--if-exists] add table record
column [key=]value... <br>
Adds the specified value or key-value pair to column in
record in table. If column is a map, then key is required,
otherwise it is prohibited. If key already exists in a <br>
map column, then the current value is not replaced (use the
set command to replace an existing value).</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if record does not exist. With --if-exists, this
command does nothing if record does not exist.</p>

<p style="margin-top: 1em">[--if-exists] remove table
record column value... <br>
[--if-exists] remove table record column key... <br>
[--if-exists] remove table record column key=value... <br>
Removes the specified values or key-value pairs from column
in record in table. The first form applies to columns that
are not maps: each specified value is removed from <br>
the column. The second and third forms apply to map columns:
if only a key is specified, then any key-value pair with the
given key is removed, regardless of its value; <br>
if a value is given then a pair is removed only if both key
and value match.</p>

<p style="margin-top: 1em">It is not an error if the column
does not contain the specified key or value or pair.</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if record does not exist. With --if-exists, this
command does nothing if record does not exist.</p>

<p style="margin-top: 1em">[--if-exists] clear table record
column... <br>
Sets each column in record in table to the empty set or
empty map, as appropriate. This command applies only to
columns that are allowed to be empty.</p>

<p style="margin-top: 1em">Without --if-exists, it is an
error if record does not exist. With --if-exists, this
command does nothing if record does not exist.</p>

<p style="margin-top: 1em">[--id=@name] create table
column[:key]=value... <br>
Creates a new record in table and sets the initial values of
each column. Columns not explicitly set will receive their
default values. Outputs the UUID of the new row.</p>

<p style="margin-top: 1em">If @name is specified, then the
UUID for the new row may be referred to by that name
elsewhere in the same ovs-vsctl invocation in contexts where
a UUID is expected. Such <br>
references may precede or follow the create command.</p>

<p style="margin-top: 1em">Caution (ovs-vsctl as exmaple)
<br>
Records in the Open vSwitch database are significant only
when they can be reached directly or indirectly from the
Open_vSwitch table. Except for records in the <br>
QoS or Queue tables, records that are not reachable from the
Open_vSwitch table are automatically deleted from the
database. This deletion happens immediately, <br>
without waiting for additional ovs-vsctl commands or other
database activity. Thus, a create command must generally be
accompanied by additional commands within <br>
the same ovs-vsctl invocation to add a chain of references
to the newly created record from the top-level Open_vSwitch
record. The EXAMPLES section gives some <br>
examples that show how to do this.</p>

<p style="margin-top: 1em">[--if-exists] destroy table
record... <br>
Deletes each specified record from table. Unless --if-exists
is specified, each records must exist.</p>

<p style="margin-top: 1em">--all destroy table <br>
Deletes all records from the table.</p>

<p style="margin-top: 1em">Caution (ovs-vsctl as exmaple)
<br>
The destroy command is only useful for records in the QoS or
Queue tables. Records in other tables are automatically
deleted from the database when they become <br>
unreachable from the Open_vSwitch table. This means that
deleting the last reference to a record is sufficient for
deleting the record itself. For records in <br>
these tables, destroy is silently ignored. See the EXAMPLES
section below for more information.</p>

<p style="margin-top: 1em">wait-until table record
[column[:key]=value]... <br>
Waits until table contains a record named record whose
column equals value or, if key is specified, whose column
contains a key with the specified value. Any of the
oper&acirc; <br>
ators !=, &lt;, &gt;, &lt;=, or &gt;= may be substituted for
= to test for inequality, less than, greater than, less than
or equal to, or greater than or equal to, respectively. <br>
(Don&rsquo;t forget to escape &lt; or &gt; from
interpretation by the shell.)</p>

<p style="margin-top: 1em">If no column[:key]=value
arguments are given, this command waits only until record
exists. If more than one such argument is given, the command
waits until all of them <br>
are satisfied.</p>

<p style="margin-top: 1em">Caution (ovs-vsctl as exmaple)
<br>
Usually wait-until should be placed at the beginning of a
set of ovs-vsctl commands. For example, wait-until bridge
br0 -- get bridge br0 datapath_id waits until a <br>
bridge named br0 is created, then prints its datapath_id
column, whereas get bridge br0 datapath_id -- wait-until
bridge br0 will abort if no bridge named br0 <br>
exists when ovs-vsctl initially connects to the
database.</p>

<p style="margin-top: 1em">Consider specifying --timeout=0
along with --wait-until, to prevent ovs-vsctl from
terminating after waiting only at most 5 seconds.</p>

<p style="margin-top: 1em">comment [arg]... <br>
This command has no effect on behavior, but any database log
record created by the command will include the command and
its arguments.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Create a new bridge named br0 and add port eth0 to it:</p>

<p style="margin-top: 1em">ovs-vsctl add-br br0 <br>
ovs-vsctl add-port br0 eth0</p>

<p style="margin-top: 1em">Alternatively, perform both
operations in a single atomic transaction:</p>

<p style="margin-top: 1em">ovs-vsctl add-br br0 -- add-port
br0 eth0</p>

<p style="margin-top: 1em">Delete bridge br0, reporting an
error if it does not exist:</p>

<p style="margin-top: 1em">ovs-vsctl del-br br0</p>

<p style="margin-top: 1em">Delete bridge br0 if it
exists:</p>

<p style="margin-top: 1em">ovs-vsctl --if-exists del-br
br0</p>

<p style="margin-top: 1em">Set the qos column of the Port
record for eth0 to point to a new QoS record, which in turn
points with its queue 0 to a new Queue record:</p>

<p style="margin-top: 1em">ovs-vsctl -- set port eth0
qos=@newqos -- --id=@newqos create qos type=linux-htb
other-config:max-rate=1000000 queues:0=@newqueue --
--id=@newqueue create queue other-con&acirc; <br>
fig:min-rate=1000000 other-config:max-rate=1000000</p>

<p style="margin-top: 1em">CONFIGURATION COOKBOOK <br>
Port Configuration <br>
Add an &lsquo;&lsquo;internal port&rsquo;&rsquo; vlan10 to
bridge br0 as a VLAN access port for VLAN 10, and configure
it with an IP address:</p>

<p style="margin-top: 1em">ovs-vsctl add-port br0 vlan10
tag=10 -- set Interface vlan10 type=internal</p>

<p style="margin-top: 1em">ifconfig vlan10
192.168.0.123</p>

<p style="margin-top: 1em">Add a GRE tunnel port gre0 to
remote IP address 1.2.3.4 to bridge br0:</p>

<p style="margin-top: 1em">ovs-vsctl add-port br0 gre0 --
set Interface gre0 type=gre options:remote_ip=1.2.3.4</p>

<p style="margin-top: 1em">Port Mirroring <br>
Mirror all packets received or sent on eth0 or eth1 onto
eth2, assuming that all of those ports exist on bridge br0
(as a side-effect this causes any packets received on eth2
to <br>
be ignored):</p>

<p style="margin-top: 1em">ovs-vsctl -- set Bridge br0
mirrors=@m <br>
-- --id=@eth0 get Port eth0 <br>
-- --id=@eth1 get Port eth1 <br>
-- --id=@eth2 get Port eth2 <br>
-- --id=@m create Mirror name=mymirror
select-dst-port=@eth0,@eth1 select-src-port=@eth0,@eth1
output-port=@eth2</p>

<p style="margin-top: 1em">Remove the mirror created above
from br0, which also destroys the Mirror record (since it is
now unreferenced):</p>

<p style="margin-top: 1em">ovs-vsctl -- --id=@rec get
Mirror mymirror <br>
-- remove Bridge br0 mirrors @rec</p>

<p style="margin-top: 1em">The following simpler command
also works:</p>

<p style="margin-top: 1em">ovs-vsctl clear Bridge br0
mirrors</p>

<p style="margin-top: 1em">Quality of Service (QoS) <br>
Create a linux-htb QoS record that points to a few queues
and use it on eth0 and eth1:</p>

<p style="margin-top: 1em">ovs-vsctl -- set Port eth0
qos=@newqos <br>
-- set Port eth1 qos=@newqos <br>
-- --id=@newqos create QoS type=linux-htb
other-config:max-rate=1000000000 queues=0=@q0,1=@q1 <br>
-- --id=@q0 create Queue other-config:min-rate=100000000
other-config:max-rate=100000000 <br>
-- --id=@q1 create Queue other-config:min-rate=500000000</p>

<p style="margin-top: 1em">Deconfigure the QoS record above
from eth1 only:</p>

<p style="margin-top: 1em">ovs-vsctl clear Port eth1
qos</p>

<p style="margin-top: 1em">To deconfigure the QoS record
from both eth0 and eth1 and then delete the QoS record
(which must be done explicitly because unreferenced QoS
records are not automatically <br>
destroyed):</p>

<p style="margin-top: 1em">ovs-vsctl -- destroy QoS eth0 --
clear Port eth0 qos -- clear Port eth1 qos</p>

<p style="margin-top: 1em">(This command will leave two
unreferenced Queue records in the database. To delete them,
use &quot;ovs-vsctl list Queue&quot; to find their UUIDs,
then &quot;ovs-vsctl destroy Queue uuid1 <br>
uuid2&quot; to destroy each of them or use &quot;ovs-vsctl
-- --all destroy Queue&quot; to delete all records.)</p>

<p style="margin-top: 1em">Connectivity Monitoring <br>
Monitor connectivity to a remote maintenance point on
eth0.</p>

<p style="margin-top: 1em">ovs-vsctl set Interface eth0
cfm_mpid=1</p>

<p style="margin-top: 1em">Deconfigure connectivity
monitoring from above:</p>

<p style="margin-top: 1em">ovs-vsctl clear Interface eth0
cfm_mpid</p>

<p style="margin-top: 1em">NetFlow <br>
Configure bridge br0 to send NetFlow records to UDP port
5566 on host 192.168.0.34, with an active timeout of 30
seconds:</p>

<p style="margin-top: 1em">ovs-vsctl -- set Bridge br0
netflow=@nf <br>
-- --id=@nf create NetFlow targets=</p>

<p style="margin-top: 1em">Update the NetFlow configuration
created by the previous command to instead use an active
timeout of 60 seconds:</p>

<p style="margin-top: 1em">ovs-vsctl set NetFlow br0
active_timeout=60</p>

<p style="margin-top: 1em">Deconfigure the NetFlow settings
from br0, which also destroys the NetFlow record (since it
is now unreferenced):</p>

<p style="margin-top: 1em">ovs-vsctl clear Bridge br0
netflow</p>

<p style="margin-top: 1em">sFlow <br>
Configure bridge br0 to send sFlow records to a collector on
10.0.0.1 at port 6343, using eth1&Acirc;&acute;s IP address
as the source, with specific sampling parameters:</p>

<p style="margin-top: 1em">ovs-vsctl -- --id=@s create
sFlow agent=eth1 target=</p>

<p style="margin-top: 1em">-- set Bridge br0 sflow=@s</p>

<p style="margin-top: 1em">Deconfigure sFlow from br0,
which also destroys the sFlow record (since it is now
unreferenced):</p>

<p style="margin-top: 1em">ovs-vsctl -- clear Bridge br0
sflow</p>

<p style="margin-top: 1em">IPFIX <br>
Configure bridge br0 to send one IPFIX flow record per
packet sample to UDP port 4739 on host 192.168.0.34, with
Observation Domain ID 123 and Observation Point ID 456, a
flow <br>
cache active timeout of 1 minute (60 seconds), maximum flow
cache size of 13 flows, and flows sampled on output port
with tunnel info(sampling on input and output port is
enabled <br>
by default if not disabled) :</p>

<p style="margin-top: 1em">ovs-vsctl -- set Bridge br0
ipfix=@i <br>
-- --id=@i create IPFIX targets=</p>


<p style="margin-top: 1em">other_config:enable-input-sampling=false
other_config:enable-tunnel-sampling=true</p>

<p style="margin-top: 1em">Deconfigure the IPFIX settings
from br0, which also destroys the IPFIX record (since it is
now unreferenced):</p>

<p style="margin-top: 1em">ovs-vsctl clear Bridge br0
ipfix</p>

<p style="margin-top: 1em">802.1D Spanning Tree Protocol
(STP) <br>
Configure bridge br0 to participate in an 802.1D spanning
tree:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
stp_enable=true</p>

<p style="margin-top: 1em">Set the bridge priority of br0
to 0x7800:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:stp-priority=0x7800</p>

<p style="margin-top: 1em">Set the path cost of port eth0
to 10:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:stp-path-cost=10</p>

<p style="margin-top: 1em">Deconfigure STP from above:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
stp_enable=false</p>

<p style="margin-top: 1em">Multicast Snooping <br>
Configure bridge br0 to enable multicast snooping:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
mcast_snooping_enable=true</p>

<p style="margin-top: 1em">Set the multicast snooping aging
time br0 to 300 seconds:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:mcast-snooping-aging-time=300</p>

<p style="margin-top: 1em">Set the multicast snooping table
size br0 to 2048 entries:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:mcast-snooping-table-size=2048</p>

<p style="margin-top: 1em">Disable flooding of unregistered
multicast packets to all ports. When set to true, the switch
will send unregistered multicast packets only to ports
connected to multicast <br>
routers. When it is set to false, the switch will send them
to all ports. This command disables the flood of
unregistered packets on bridge br0.</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:mcast-snooping-disable-flood-unregistered=true</p>

<p style="margin-top: 1em">Enable flooding of multicast
packets (except Reports) on a specific port.</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth1
other_config:mcast-snooping-flood=true</p>

<p style="margin-top: 1em">Enable flooding of Reports on a
specific port.</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth1
other_config:mcast-snooping-flood-reports=true</p>

<p style="margin-top: 1em">Deconfigure multicasting
snooping from above:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
mcast_snooping_enable=false</p>

<p style="margin-top: 1em">802.1D-2004 Rapid Spanning Tree
Protocol (RSTP) <br>
Configure bridge br0 to participate in an 802.1D-2004 Rapid
Spanning Tree:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
rstp_enable=true</p>

<p style="margin-top: 1em">Set the bridge address of br0 to
00:aa:aa:aa:aa:aa :</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-address=00:aa:aa:aa:aa:aa</p>

<p style="margin-top: 1em">Set the bridge priority of br0
to 0x7000. The value must be specified in decimal notation
and should be a multiple of 4096 (if not, it is rounded down
to the nearest multiple of <br>
4096). The default priority value is 0x800 (32768).</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-priority=28672</p>

<p style="margin-top: 1em">Set the bridge ageing time of
br0 to 1000 s. The ageing time value should be between 10 s
and 1000000 s. The default value is 300 s.</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-ageing-time=1000</p>

<p style="margin-top: 1em">Set the bridge force protocol
version of br0 to 0. The force protocol version has two
acceptable values: 0 (STP compatibility mode) and 2 (normal
operation).</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-force-protocol-version=0</p>

<p style="margin-top: 1em">Set the bridge max age of br0 to
10 s. The max age value should be between 6 s and 40 s. The
default value is 20 s.</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-max-age=10</p>

<p style="margin-top: 1em">Set the bridge forward delay of
br0 to 15 s. This value should be between 4 s and 30 s. The
default value is 15 s.</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-forward-delay=15</p>

<p style="margin-top: 1em">Set the bridge transmit hold
count of br0 to 7 s. This value should be between 1 s and 10
s. The default value is 6 s.</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
other_config:rstp-transmit-hold-count=7</p>

<p style="margin-top: 1em">Enable RSTP on the Port
eth0:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-enable=true</p>

<p style="margin-top: 1em">Disable RSTP on the Port
eth0:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-enable=false</p>

<p style="margin-top: 1em">Set the priority of port eth0 to
32. The value must be specified in decimal notation and
should be a multiple of 16 (if not, it is rounded down to
the nearest multiple of 16). <br>
The default priority value is 0x80 (128).</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-port-priority=32</p>

<p style="margin-top: 1em">Set the port number of port eth0
to 3:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-port-num=3</p>

<p style="margin-top: 1em">Set the path cost of port eth0
to 150:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-path-cost=150</p>

<p style="margin-top: 1em">Set the admin edge value of port
eth0:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-port-admin-edge=true</p>

<p style="margin-top: 1em">Set the auto edge value of port
eth0:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-port-auto-edge=true</p>

<p style="margin-top: 1em">Set the admin point to point MAC
value of port eth0. Acceptable values are 0 (not
point-to-point), 1 (point-to-point, the default value) or 2
(automatic detection). The auto- <br>
detection mode is not currently implemented, and the value 2
has the same effect of 0 (not point-to-point).</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-admin-p2p-mac=1</p>

<p style="margin-top: 1em">Set the admin port state value
of port eth0. true is the default value.</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-admin-port-state=false</p>

<p style="margin-top: 1em">Set the mcheck value of port
eth0:</p>

<p style="margin-top: 1em">ovs-vsctl set Port eth0
other_config:rstp-port-mcheck=true</p>

<p style="margin-top: 1em">Deconfigure RSTP from above:</p>

<p style="margin-top: 1em">ovs-vsctl set Bridge br0
rstp_enable=false</p>

<p style="margin-top: 1em">OpenFlow Version <br>
Configure bridge br0 to support OpenFlow versions 1.0, 1.2,
and 1.3:</p>

<p style="margin-top: 1em">ovs-vsctl set bridge br0
protocols=OpenFlow10,OpenFlow12,OpenFlow13</p>

<p style="margin-top: 1em">Flow Table Configuration <br>
Make flow table 0 on bridge br0 refuse to accept more than
100 flows:</p>

<p style="margin-top: 1em">ovs-vsctl -- --id=@ft create
Flow_Table flow_limit=100 overflow_policy=refuse -- set
Bridge br0 flow_tables=0=@ft</p>

<p style="margin-top: 1em">Make flow table 0 on bridge br0
evict flows, with fairness based on the matched ingress
port, when there are more than 100:</p>

<p style="margin-top: 1em">ovs-vsctl -- --id=@ft create
Flow_Table flow_limit=100 overflow_policy=evict
groups=&rsquo;&quot;NXM_OF_IN_PORT[]&quot;&rsquo; -- set
Bridge br0 flow_tables:0=@ft</p>

<p style="margin-top: 1em">EXIT STATUS <br>
0 Successful program execution.</p>

<p style="margin-top: 1em">1 Usage, syntax, or
configuration file error.</p>

<p style="margin-top: 1em">2 The bridge argument to
br-exists specified the name of a bridge that does not
exist.</p>

<p style="margin-top: 1em">SEE ALSO <br>
ovsdb-server(1), ovs-vswitchd(8),
ovs-vswitchd.conf.db(5).</p>

<p style="margin-top: 1em">Open vSwitch 2.7.0
ovs-vsctl(8)</p>
<hr>
</body>
</html>
