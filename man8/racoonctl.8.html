<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>RACOONCTL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RACOONCTL(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">RACOONCTL(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">racoonctl</b> &#x2014;
  <span class="Nd" title="Nd">racoon administrative control tool</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] reload-config</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] show-schedule</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] show-sa
      [<span class="Op">isakmp|esp|ah|ipsec</span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] get-sa-cert
      [<span class="Op">inet|inet6</span>] <var class="Ar" title="Ar">src
      dst</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] flush-sa
      [<span class="Op">isakmp|esp|ah|ipsec</span>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] delete-sa
      <var class="Ar" title="Ar">saopts</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] establish-sa
      [<span class="Op"><b class="Fl" title="Fl">-w</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-n</b>
      <var class="Ar" title="Ar">remoteconf</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-u</b>
      <var class="Ar" title="Ar">identity</var></span>]
      <var class="Ar" title="Ar">saopts</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] vpn-connect
      [<span class="Op"><b class="Fl" title="Fl">-u</b>
      <var class="Ar" title="Ar">identity</var></span>]
      <var class="Ar" title="Ar">vpn_gateway</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] vpn-disconnect
      <var class="Ar" title="Ar">vpn_gateway</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] show-event</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">racoonctl</b></td>
    <td>[<span class="Op">opts</span>] logout-user
      <var class="Ar" title="Ar">login</var></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b class="Nm" title="Nm">racoonctl</b> is used to control
  <a class="Xr" title="Xr">racoon(8)</a> operation, if ipsec-tools was
  configured with adminport support. Communication between
  <b class="Nm" title="Nm">racoonctl</b> and
  <a class="Xr" title="Xr">racoon(8)</a> is done through a UNIX socket. By
  changing the default mode and ownership of the socket, you can allow non-root
  users to alter <a class="Xr" title="Xr">racoon(8)</a> behavior, so do that
  with caution.
<div class="Pp"></div>
The following general options are available:
<dl class="Bl-tag">
  <dt class="It-tag"><a class="selflink" href="#d"><b class="Fl" title="Fl" id="d">-d</b></a></dt>
  <dd class="It-tag">Debug mode. Hexdump sent admin port commands.</dd>
  <dt class="It-tag"><a class="selflink" href="#l"><b class="Fl" title="Fl" id="l">-l</b></a></dt>
  <dd class="It-tag">Increase verbosity. Mainly for show-sa command.</dd>
  <dt class="It-tag"><a class="selflink" href="#s"><b class="Fl" title="Fl" id="s">-s</b></a>
    <var class="Ar" title="Ar">socket</var></dt>
  <dd class="It-tag">Specify unix socket name used to connecting racoon.</dd>
</dl>
<div class="Pp"></div>
The following commands are available:
<dl class="Bl-tag">
  <dt class="It-tag">reload-config</dt>
  <dd class="It-tag">This should cause <a class="Xr" title="Xr">racoon(8)</a> to
      reload its configuration file.</dd>
  <dt class="It-tag">show-schedule</dt>
  <dd class="It-tag">Unknown command.</dd>
  <dt class="It-tag">show-sa [<span class="Op">isakmp|esp|ah|ipsec</span>]</dt>
  <dd class="It-tag">Dump the SA: All the SAs if no SA class is provided, or
      either ISAKMP SAs, IPsec ESP SAs, IPsec AH SAs, or all IPsec SAs. Use
      <b class="Fl" title="Fl">-l</b> to increase verbosity.</dd>
  <dt class="It-tag">get-sa-cert [<span class="Op">inet|inet6</span>]
    <var class="Ar" title="Ar">src dst</var></dt>
  <dd class="It-tag">Output the raw certificate that was used to authenticate
      the phase 1 matching <var class="Ar" title="Ar">src</var> and
      <var class="Ar" title="Ar">dst</var>.</dd>
  <dt class="It-tag">flush-sa [<span class="Op">isakmp|esp|ah|ipsec</span>]</dt>
  <dd class="It-tag">is used to flush all SAs if no SA class is provided, or a
      class of SAs, either ISAKMP SAs, IPsec ESP SAs, IPsec AH SAs, or all IPsec
      SAs.</dd>
  <dt class="It-tag">establish-sa
    [<span class="Op"><b class="Fl" title="Fl">-w</b></span>]
    [<span class="Op"><b class="Fl" title="Fl">-n</b>
    <var class="Ar" title="Ar">remoteconf</var></span>]
    [<span class="Op"><b class="Fl" title="Fl">-u</b>
    <var class="Ar" title="Ar">username</var></span>]
    <var class="Ar" title="Ar">saopts</var></dt>
  <dd class="It-tag">Establish an SA, either an ISAKMP SA, IPsec ESP SA, or
      IPsec AH SA. The optional <b class="Fl" title="Fl">-u</b>
      <var class="Ar" title="Ar">username</var> can be used when establishing an
      ISAKMP SA while hybrid auth is in use. The exact remote block to use can
      be specified with <b class="Fl" title="Fl">-n</b>
      <var class="Ar" title="Ar">remoteconf</var>.
      <b class="Nm" title="Nm">racoonctl</b> will prompt you for the password
      associated with <var class="Ar" title="Ar">username</var> and these
      credentials will be used in the Xauth exchange.
    <div class="Pp"></div>
    Specifying <b class="Fl" title="Fl">-w</b> will make racoonctl wait until
      the SA is actually established or an error occurs.
    <div class="Pp"></div>
    <var class="Ar" title="Ar">saopts</var> has the following format:
    <dl class="Bl-tag" style="margin-left: 3.00ex;">
      <dt class="It-tag" style="margin-left: -3.00ex;">isakmp {inet|inet6}
        <var class="Ar" title="Ar">src</var>
        <var class="Ar" title="Ar">dst</var></dt>
      <dd class="It-tag" style="width: auto;">&#x00A0;</dd>
      <dt class="It-tag" style="margin-left: -3.00ex;">{esp|ah} {inet|inet6}
        <var class="Ar" title="Ar">src/prefixlen/port</var>
        <var class="Ar" title="Ar">dst/prefixlen/port</var></dt>
      <dd class="It-tag">{icmp|tcp|udp|gre|any}</dd>
    </dl>
  </dd>
  <dt class="It-tag">vpn-connect
    [<span class="Op"><b class="Fl" title="Fl">-u</b>
    <var class="Ar" title="Ar">username</var></span>]
    <var class="Ar" title="Ar">vpn_gateway</var></dt>
  <dd class="It-tag">This is a particular case of the previous command. It will
      establish an ISAKMP SA with
    <var class="Ar" title="Ar">vpn_gateway</var>.</dd>
  <dt class="It-tag">delete-sa <var class="Ar" title="Ar">saopts</var></dt>
  <dd class="It-tag">Delete an SA, either an ISAKMP SA, IPsec ESP SA, or IPsec
      AH SA.</dd>
  <dt class="It-tag">vpn-disconnect
    <var class="Ar" title="Ar">vpn_gateway</var></dt>
  <dd class="It-tag">This is a particular case of the previous command. It will
      kill all SAs associated with
    <var class="Ar" title="Ar">vpn_gateway</var>.</dd>
  <dt class="It-tag">show-event</dt>
  <dd class="It-tag">Listen for all events reported by
      <a class="Xr" title="Xr">racoon(8)</a>.</dd>
  <dt class="It-tag">logout-user <var class="Ar" title="Ar">login</var></dt>
  <dd class="It-tag">Delete all SA established on behalf of the Xauth user
      <var class="Ar" title="Ar">login</var>.</dd>
</dl>
<div class="Pp"></div>
Command shortcuts are available:
<div class="Bl-tag" style="margin-left: 6.00ex;">
<dl class="Bl-tag Bl-compact" style="margin-left: 6.60ex;">
  <dt class="It-tag" style="margin-left: -6.60ex;">rc</dt>
  <dd class="It-tag">reload-config</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">ss</dt>
  <dd class="It-tag">show-sa</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">sc</dt>
  <dd class="It-tag">show-schedule</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">fs</dt>
  <dd class="It-tag">flush-sa</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">ds</dt>
  <dd class="It-tag">delete-sa</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">es</dt>
  <dd class="It-tag">establish-sa</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">vc</dt>
  <dd class="It-tag">vpn-connect</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">vd</dt>
  <dd class="It-tag">vpn-disconnect</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">se</dt>
  <dd class="It-tag">show-event</dd>
  <dt class="It-tag" style="margin-left: -6.60ex;">lu</dt>
  <dd class="It-tag">logout-user</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
The command should exit with 0 on success, and non-zero on errors.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact" style="margin-left: 39.00ex;">
  <dt class="It-tag" style="margin-left: -39.00ex;"><i class="Pa" title="Pa">/var/racoon/racoon.sock</i>
    <span class="No">or</span></dt>
  <dd class="It-tag" style="width: auto;">&#x00A0;</dd>
  <dt class="It-tag" style="margin-left: -39.00ex;"><i class="Pa" title="Pa">/var/run/racoon.sock</i></dt>
  <dd class="It-tag"><a class="Xr" title="Xr">racoon(8)</a> control socket.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">ipsec(4)</a>, <a class="Xr" title="Xr">racoon(8)</a>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
Once was <b class="Ic" title="Ic">kmpstat</b> in the KAME project. It turned
  into <b class="Nm" title="Nm">racoonctl</b> but remained undocumented for a
  while. <span class="An" title="An">Emmanuel Dreyfus</span>
  &#x27E8;manu@NetBSD.org&#x27E9; wrote this man page.</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 12, 2009</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
