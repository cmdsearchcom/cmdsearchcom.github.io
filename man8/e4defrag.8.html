<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>E4DEFRAG(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">E4DEFRAG(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">E4DEFRAG(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
e4defrag - online defragmenter for ext4 filesystem
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>e4defrag</b> [ <b>-c</b> ] [ <b>-v</b> ] <i>target</i> ...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>e4defrag</b> reduces fragmentation of extent based file. The file targeted by
  <b>e4defrag</b> is created on ext4 filesystem made with &quot;-O extent&quot;
  option (see <b>mke2fs</b>(8)). The targeted file gets more contiguous blocks
  and improves the file access speed.
<div class="Pp"></div>
<i>target</i> is a regular file, a directory, or a device that is mounted as
  ext4 filesystem. If <i>target</i> is a directory, <b>e4defrag</b> reduces
  fragmentation of all files in it. If <i>target</i> is a device,
  <b>e4defrag</b> gets the mount point of it and reduces fragmentation of all
  files in this mount point.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Get a current fragmentation count and an ideal
      fragmentation count, and calculate fragmentation score based on them. By
      seeing this score, we can determine whether we should execute
      <b>e4defrag</b> to <i>target</i>. When used with <b>-v</b> option, the
      current fragmentation count and the ideal fragmentation count are printed
      for each file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Also this option outputs the average data size in one
      extent. If you see it, you'll find the file has ideal extents or not. Note
      that the maximum extent size is 131072KB in ext4 filesystem (if block size
      is 4KB).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If this option is specified, <i>target</i> is never
      defragmented.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Print error messages and the fragmentation count before and
      after defrag for each file.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<b>e4defrag</b> does not support swap file, files in lost+found directory, and
  files allocated in indirect blocks. When <i>target</i> is a device or a mount
  point, <b>e4defrag</b> doesn't defragment files in mount point of other
  device.
<div class="Pp"></div>
Non-privileged users can execute <b>e4defrag</b> to their own file, but the
  score is not printed if <b>-c</b> option is specified. Therefore, it is
  desirable to be executed by root user.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Akira Fujita &lt;a-fujita@rs.jp.nec.com&gt; and Takashi Sato
  &lt;t-sato@yk.jp.nec.com&gt;.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>mke2fs</b>(8), <b>mount</b>(8).
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2009</td>
    <td class="foot-os">e4defrag version 2.0</td>
  </tr>
</table>
</body>
</html>
