<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>cowbuilder(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">cowbuilder(8)</td>
    <td class="head-vol">cowdancer</td>
    <td class="head-rtitle">cowbuilder(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
cowbuilder - a pbuilder wrapper for cowdancer.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>cowbuilder create [</b><i>options</i><b>]</b>
<div class="Pp"></div>
<b>cowbuilder update [</b><i>options</i><b>]</b>
<div class="Pp"></div>
<b>cowbuilder build [</b><i>options</i><b>] </b><i>.dsc-file</i>
<div class="Pp"></div>
<b>cowbuilder login [</b><i>options</i><b>]</b>
<div class="Pp"></div>
<b>cowbuilder execute [</b><i>options</i><b>] -- </b><i>script [</i><b>script
  options</b><i>]</i>
<div class="Pp"></div>
<b>cowbuilder dumpconfig</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>cowbuilder</b> Executes the specified pbuilder operation with
  <b>cowdancer</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
Most commands invoke pbuilder with the specified commands, see pbuilder manual
  for details.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>create</b></dt>
  <dd class="It-tag">Create the base.cow image. The directory for base.cow
      should be empty, or this command will fail.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>update</b>, <b>up</b>, <b>u</b></dt>
  <dd class="It-tag">Update the base.cow image.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>build</b>, <b>b</b></dt>
  <dd class="It-tag">Build a package given a .dsc file
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>login</b>, <b>l</b></dt>
  <dd class="It-tag">Start a session within the base.cow.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>execute</b>, <b>e</b></dt>
  <dd class="It-tag">Execute a command within the base.cow.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dumpconfig</b></dt>
  <dd class="It-tag">Dump configuration information, used for debugging.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Most options are the same as pbuilder, except for the following which are
  handled specially
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--buildplace</b></dt>
  <dd class="It-tag">The place where COW operation takes place.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--basepath</b></dt>
  <dd class="It-tag">This has a very different meaning to the <b>--basetgz</b>
      option of pbuilder, since there is no tgz. This option specifies the
      directory in which the COW master data is stored, the default being
      <b>/var/cache/pbuilder/base.cow</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--configfile [</b><i>configuration file to
    load</i><b>]</b></dt>
  <dd class="It-tag">Additional configuration file to read after all other
      configuration files have been read.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-cowdancer-update</b></dt>
  <dd class="It-tag">Do not use cowdancer on cowbuilder update. Please use this
      option when cowdancer is interfering with upgrade process, or cowdancer
      itself is being upgraded within chroot.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debian-etch-workaround</b></dt>
  <dd class="It-tag">Workaround for Debian Etch. cow-shell will search for all
      files in the chroot, but will work.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILES"><a class="selflink" href="#CONFIGURATION_FILES">CONFIGURATION
  FILES</a></h1>
cowbuilder reads the following configuration files per default.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/usr/share/pbuilder/pbuilderrc</b></dt>
  <dd class="It-tag">Application default, not to be changed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/etc/pbuilderrc</b></dt>
  <dd class="It-tag">System-wide default.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.pbuilderrc</b></dt>
  <dd class="It-tag">User default
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>anything specified with --configfile option</i></dt>
  <dd class="It-tag">Additional configuration at runtime.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILE_OPTIONS"><a class="selflink" href="#CONFIGURATION_FILE_OPTIONS">CONFIGURATION
  FILE OPTIONS</a></h1>
The possible configuration options are as follows. Others are ignored.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTRIBUTION=</b><i>distribution</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BUILDRESULT=</b><i>directory</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BUILDPLACE=</b><i>directory</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BASEPATH=</b><i>path</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>MIRRORSITE=</b><i>http://mirror</i></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>NO_COWDANCER_UPDATE=</b><i>1</i></dt>
  <dd class="It-tag">See <b>--no-cowdancer-update</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEBIAN_ETCH_WORKAROUND=</b><i>1</i></dt>
  <dd class="It-tag">See <b>--debian-etch-workaround</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cowbuilder create</b></dt>
  <dd class="It-tag">Create a base.cow image.
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
# cowbuilder create --hookdir /usr/share/doc/pbuilder/examples/workaround/ --distribution etch --debootstrap debootstrap --basepath /var/cache/pbuilder/base-test.cow
bash: /root/.pbuilderrc: No such file or directory
W: /home/dancer/.pbuilderrc does not exist
I: Running in no-targz mode
Distribution is etch.
Building the build environment
I: running debootstrap
/usr/sbin/debootstrap
I: Retrieving Release
	.
	.
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cowbuilder update</b></dt>
  <dd class="It-tag">Update the base.cow image.
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
# cowbuilder update
bash: /root/.pbuilderrc: No such file or directory
I: Copying COW directory
I: Invoking pbuilder
W: /home/dancer/.pbuilderrc does not exist
I: Running in no-targz mode
I: copying local configuration
I: mounting /proc filesystem
I: mounting /dev/pts filesystem
I: policy-rc.d already exists
Refreshing the base.tgz
I: upgrading packages
	.
	.
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cowbuilder build test_0.1.dsc</b></dt>
  <dd class="It-tag">Build the package specified in dsc file, with the base.cow
      image.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pdebuild --pbuilder cowbuilder</b></dt>
  <dd class="It-tag">Run <b>cowbuilder build</b> against the current directory.
      The current directory should be an extracted Debian source package
      directory.
    <div style="height: 1.00em;">&#x00A0;</div>
    Edit <b>/etc/pbuilderrc</b> to have <b>PDEBUILD_PBUILDER=cowbuilder</b> to
      make this the default behavior for <b>pdebuild.</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cowbuilder login --bindmounts /home/dancer</b></dt>
  <dd class="It-tag">Start a cow-shell session inside base.cow, with
      <i>/home/dancer</i> being bind-mounted to within chroot.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that cowbuilder will not cow-protect what is inside <b>/home/</b>
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
# cowbuilder login --bindmount ${HOME}
bash: /root/.pbuilderrc: No such file or directory
I: Copying COW directory
I: Invoking pbuilder
W: /home/dancer/.pbuilderrc does not exist
I: Running in no-targz mode
I: copying local configuration
I: mounting /proc filesystem
I: mounting /dev/pts filesystem
I: Mounting /home/dancer
I: policy-rc.d already exists
I: entering the shell
#
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cowbuilder create --distribution sid --basepath
    /var/cache/pbuilder/base-test.cow</b></dt>
  <dd class="It-tag">Create a base.cow image with the path
      <b>/var/cache/pbuilder/base-test.cow</b> and distribution sid.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Junichi Uekawa (dancer@debian.org)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>/usr/share/doc/pbuilder/pbuilder-doc.html, </b> <b>pbuilder</b>(8),
  <b>pdebuild</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2007 Jun 17</td>
    <td class="foot-os">cowdancer</td>
  </tr>
</table>
</body>
</html>
