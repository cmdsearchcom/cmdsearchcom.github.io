<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PPPOE-SERVER(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PPPOE-SERVER(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">PPPOE-SERVER(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pppoe-server - user-space PPPoE server
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>pppoe-server [<i>options</i>]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>pppoe-server</b> is a user-space server for PPPoE (Point-to-Point Protocol
  over Ethernet) for Linux and other UNIX systems. <b>pppoe-server</b> works in
  concert with the <b>pppoe</b> client to respond to PPPoE discovery packets and
  set up PPPoE sessions.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b></dt>
  <dd class="It-tag">The <b>-F</b> option causes <b>pppoe-server</b> not to fork
      and become a daemon. The default is to fork and become a daemon.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I <i>interface</i></b></dt>
  <dd class="It-tag">The <b>-I</b> option specifies the Ethernet interface to
      use. Under Linux, it is typically <i>eth0</i> or <i>eth1</i>. The
      interface should be &quot;up&quot; before you start <b>pppoe-server</b>,
      but need not have an IP address. You can supply multiple <b>-I</b> options
      if you want the server to respond on more than one interface.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-X <i>pidfile</i></b></dt>
  <dd class="It-tag">This option causes <b>pppoe-server</b> to write its process
      ID to <i>pidfile</i>. Additionally, it keeps the file locked so that only
      a single process may be started for a given <i>pidfile</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q <i>/path/to/pppd</i></b></dt>
  <dd class="It-tag">Specifies the full path to the <b>pppd</b> program. The
      default is determined at compile time. One use of this option is to supply
      a wrapper program that modifies the arguments passed to pppd. This lets
      you do things not directly supported by the server (for example, specify
      IPv6 addresses.)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Q <i>/path/to/pppoe</i></b></dt>
  <dd class="It-tag">Specifies the full path to the <b>pppoe</b> program. The
      default is determined at compile time. This option is only relevant if you
      are <i>not</i> using kernel-mode PPPoE.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T <i>timeout</i></b></dt>
  <dd class="It-tag">This option is passed directly to <b>pppoe</b>; see
      <b>pppoe</b>(8) for details. If you are using kernel-mode PPPoE, this
      option has <i>no effect</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C <i>ac_name</i></b></dt>
  <dd class="It-tag">Specifies which name to report as the access concentrator
      name. If not supplied, the host name is used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S <i>name</i></b></dt>
  <dd class="It-tag">Offer a service named <i>name</i>. Multiple <b>-S</b>
      options may be specified; each one causes the named service to be
      advertised in a Service-Name tag in the PADO frame. The first <b>-S</b>
      option specifies the default service, and is used if the PPPoE client
      requests a Service-Name of length zero.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m <i>MSS</i></b></dt>
  <dd class="It-tag">This option is passed directly to <b>pppoe</b>; see
      <b>pppoe</b>(8) for details. If you are using kernel-mode PPPoE, this
      option has <i>no effect</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x <i>n</i></b></dt>
  <dd class="It-tag">Limit the number of sessions per peer MAC address to
      <i>n</i>. If a given MAC address attempts to create more than <i>n</i>
      sessions, then its PADI and PADR packets are ignored. If you set <i>n</i>
      to 0 (the default), then no limit is imposed on the number of sessions per
      peer MAC address.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">This option is passed directly to <b>pppoe</b>; see
      <b>pppoe</b>(8) for details. In addition, it causes <b>pppd</b> to be
      invoked with the <i>sync</i> option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L <i>ip</i></b></dt>
  <dd class="It-tag">Sets the local IP address. This is passed to spawned
      <b>pppd</b> processes. If not specified, the default is 10.0.0.1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R <i>ip</i></b></dt>
  <dd class="It-tag">Sets the starting remote IP address. As sessions are
      established, IP addresses are assigned starting from <i>ip</i>.
      <b>pppoe-server</b> automatically keeps track of the pool of addresses and
      passes a valid remote IP address to <b>pppd</b>. If not specified, a
      starting address of 10.67.15.1 is used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b></dt>
  <dd class="It-tag">Delegate the allocation of IP addresses to <b>pppd</b>. If
      specified, no local and remote addresses passed to pppd.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N <i>num</i></b></dt>
  <dd class="It-tag">Allows at most <i>num</i> concurrent PPPoE sessions. If not
      specified, the default is 64.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O <i>fname</i></b></dt>
  <dd class="It-tag">This option causes <b>pppoe-server</b> to tell <b>pppd</b>
      to use the option file <i>fname</i> instead of the default
      <i>/etc/ppp/pppoe-server-options</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p <i>fname</i></b></dt>
  <dd class="It-tag">Reads the specified file <i>fname</i> which is a text file
      consisting of one IP address per line. These IP addresses will be assigned
      to clients. The number of sessions allowed will equal the number of
      addresses found in the file. The <b>-p</b> option overrides both <b>-R</b>
      and <b>-N</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    In addition to containing IP addresses, the pool file can contain lines of
      the form:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
	a.b.c.d-e
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    which includes all IP addresses from a.b.c.d to a.b.c.e. For example, the
      line:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
	1.2.3.4-7
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    is equivalent to:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
	1.2.3.4
	1.2.3.5
	1.2.3.6
	1.2.3.7
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">Tells the PPPoE server to randomly permute session numbers.
      Instead of handing out sessions in order, the session numbers are assigned
      in an unpredictable order.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">Tells the server to invoke <b>pppd</b> with the <i>unit</i>
      option. Note that this option only works for <b>pppd</b> version 2.4.0 or
      newer.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o <i>offset</i></b></dt>
  <dd class="It-tag">Instead of numbering PPPoE sessions starting at 1, they
      will be numbered starting at <i>offset</i>+1. This allows you to run
      multiple servers on a given machine; just make sure that their session
      numbers do not overlap.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f disc:sess</b></dt>
  <dd class="It-tag">The <b>-f</b> option sets the Ethernet frame types for
      PPPoE discovery and session frames. The types are specified as hexadecimal
      numbers separated by a colon. Standard PPPoE uses frame types 8863:8864.
      <i>You should not use this option</i> unless you are absolutely sure the
      peer you are dealing with uses non-standard frame types.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag">The <b>-k</b> option tells the server to use kernel-mode
      PPPoE on Linux. This option is available only on Linux kernels 2.4.0 and
      later, and only if the server was built with kernel-mode support.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">The <b>-i</b> option tells the server to completely ignore
      PADI frames if there are no free session slots.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">The <b>-h</b> option prints a brief usage message and
      exits.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPERATION"><a class="selflink" href="#OPERATION">OPERATION</a></h1>
<b>pppoe-server</b> listens for incoming PPPoE discovery packets. When a session
  is established, it spawns a <b>pppd</b> process. The following options are
  passed to <b>pppd</b>:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
nodetach noaccomp nobsdcom nodeflate nopcomp novj novjccomp
default-asyncmap
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
In addition, the local and remote IP address are set based on the <b>-L</b> and
  <b>-R</b> options. The <b>pty</b> option is supplied along with a <b>pppoe</b>
  command to initiate the PPPoE session. Finally, additional <b>pppd</b> options
  can be placed in the file <b>/etc/ppp/pppoe-server-options</b> (which must
  exist, even if it is just empty!)
<div style="height: 1.00em;">&#x00A0;</div>
Note that <b>pppoe-server</b> is meant mainly for testing PPPoE clients. It is
  <i>not</i> a high-performance server meant for production use.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<b>pppoe-server</b> was written by David F. Skoll
  &lt;dfs@roaringpenguin.com&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>pppoe</b> home page is <i>http://www.roaringpenguin.com/pppoe/</i>.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
pppoe-start(8), pppoe-stop(8), pppoe-connect(8), pppd(8), pppoe.conf(5),
  pppoe(8), pppoe-setup(8), pppoe-status(8), pppoe-sniff(8), pppoe-relay(8)
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">21 June 2008</td>
    <td class="foot-os">4th Berkeley Distribution</td>
  </tr>
</table>
</body>
</html>
