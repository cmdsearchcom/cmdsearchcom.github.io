<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:09:05 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>bonnie++(8) System Manager&rsquo;s Manual
bonnie++(8)</p>

<p style="margin-top: 1em">NAME <br>
bonnie++ - program to test hard drive performance.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
bonnie++ [-d dir] [-c concurrency] [-s
size(MiB)[:chunk-size(b)]] [-n
number-to-stat(*1024)[:max-size[:min-size][:num-directories[:chunk-size]]]]
[-m machine-name] [-r <br>
ram-size-in-MiB] [-x number-of-tests] [-u
uid-to-use:gid-to-use] [-g gid-to-use] [-q] [-f
size-for-char-io] [-b] [-D] [-p processes | -y p|s ] [-z
seed-num|-Z random-file]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This manual page documents briefly the bonnie++,
program.</p>

<p style="margin-top: 1em">Bonnie++ is a program to test
hard drives and file systems for performance or the lack
therof. There are a many different types of file system
operations which different applica&acirc; <br>
tions use to different degrees. Bonnie++ tests some of them
and for each test gives a result of the amount of work done
per second and the percentage of CPU time this took. For
<br>
performance results higher numbers are better, for CPU usage
and latency lower are better (NB a configuration scoring a
performance result of 2000 and a CPU result of 90% is
bet&acirc; <br>
ter in terms of CPU use than a configuration delivering
performance of 1000 and CPU usage of 60%).</p>

<p style="margin-top: 1em">There are two sections to the
program&rsquo;s operations. The first is to test the IO
throughput in a fashion that is designed to simulate some
types of database applications. The sec&acirc; <br>
ond is to test creation, reading, and deleting many small
files in a fashion similar to the usage patterns of programs
such as Squid or INN.</p>

<p style="margin-top: 1em">All the details of the tests
performed by Bonnie++ are contained in the file
/usr/share/doc/bonnie++/readme.html</p>

<p style="margin-top: 1em">OPTIONS <br>
For Bonnie++ every option is of the form of a hyphen
followed by a letter and then the next parameter contains
the value.</p>

<p style="margin-top: 1em">-d the directory to use for the
tests.</p>

<p style="margin-top: 1em">-c the level of concurrency
(default 1). The number of copies of the test to be
performed at the same time.</p>

<p style="margin-top: 1em">-s the size of the file(s) for
IO performance measures in megabytes. If the size is greater
than 1G then multiple files will be used to store the data,
and each file will be <br>
up to 1G in size. This parameter may include the chunk size
seperated from the size by a colon. The chunk-size is
measured in bytes and must be a power of two from 256 <br>
to 1048576, the default is 8192. NB You can specify the size
in giga-bytes or the chunk-size in kilo-bytes if you add g
or k to the end of the number respectively.</p>

<p style="margin-top: 1em">If the specified size is 0 then
this test will be skipped.</p>

<p style="margin-top: 1em">-n the number of files for the
file creation test. This is measured in multiples of 1024
files. This is because no-one will want to test less than
1024 files, and we need the <br>
extra space on braille displays.</p>

<p style="margin-top: 1em">If the specified number is 0
then this test will be skipped.</p>

<p style="margin-top: 1em">The default for this test is to
test with 0 byte files. To use files of other sizes you can
specify number:max:min:num-directories:chunk-size where max
is the maximum size <br>
and min is the minimum size (both default to 0 if not
specified). If minimum and maximum sizes are specified then
every file will have a random size from the range <br>
min..max inclusive. If you specify a number of directories
then the files will be evenly distributed amoung that many
sub-directories.</p>

<p style="margin-top: 1em">If max is -1 then hard links
will be created instead of files. If max is -2 then soft
links will be created instead of files.</p>

<p style="margin-top: 1em">-m name of the machine - for
display purposes only.</p>

<p style="margin-top: 1em">-r RAM size in megabytes. If you
specify this the other parameters will be checked to ensure
they make sense for a machine of that much RAM. You should
not need to do this in <br>
general use as it should be able to discover the RAM size.
NB If you specify a size of 0 then all checks will be
disabled...</p>

<p style="margin-top: 1em">-x number of test runs. This is
useful if you want to perform more than one test. It will
dump output continuously in CSV format until either the
number of tests have been <br>
completed, or it is killed.</p>

<p style="margin-top: 1em">-u user-id to use. When running
as root specify the UID to use for the tests. It is not
recommended to use root (since the occasion when a Bonnie++
bug wiped out someone&rsquo;s <br>
system), so if you really want to run as root then use -u
root. Also if you want to specify the group to run as then
use the user:group format. If you specify a user by <br>
name but no group then the primary group of that user will
be chosen. If you specify a user by number and no group then
the group will be nogroup.</p>

<p style="margin-top: 1em">-g group-id to use. Same as
using :group for the -u parameter, just a different way to
specify it for compatibility with other programs.</p>

<p style="margin-top: 1em">-q quiet mode. If specified then
some of the extra informational messages will be suppressed.
Also the csv data will be the only output on standard out
and the plain text <br>
data will be on standard error. This means you can run
bonnie++ -q &gt;&gt; file.csv to record your csv data.</p>

<p style="margin-top: 1em">-f size-for-char-io <br>
fast mode control, skips per-char IO tests if no parameter,
otherwise specifies the size of the tests for per-char IO
tests (default 20M).</p>

<p style="margin-top: 1em">-b no write buffering. fsync()
after every write.</p>

<p style="margin-top: 1em">-p number of processes to serve
semaphores for. This is used to create the semaphores for
synchronising multiple Bonnie++ processes. All the processes
which are told to use <br>
the semaphore with -ys will start each test with
synchronization. Use &quot;-p -1&quot; to delete the
semaphore.</p>

<p style="margin-top: 1em">-y s|p perform synchronization
before each test. Option s for semaphores and option p for
prompting.</p>

<p style="margin-top: 1em">-D use direct IO (O_DIRECT) for
the bulk IO tests</p>

<p style="margin-top: 1em">-z seed <br>
random number seed to repeat the same test.</p>

<p style="margin-top: 1em">-Z random-file <br>
file containing random data in network byte order.</p>

<p style="margin-top: 1em">MULTIPLE PROCESSES <br>
Run the following commands to run three copies of Bonnie++
simultaneously:</p>

<p style="margin-top: 1em">bonnie++ -p3</p>

<p style="margin-top: 1em">bonnie++ -y &gt; out1 &amp;</p>

<p style="margin-top: 1em">bonnie++ -y &gt; out2 &amp;</p>

<p style="margin-top: 1em">bonnie++ -y &gt; out3 &amp;</p>

<p style="margin-top: 1em">OUTPUT <br>
The primary output is plain-text in 80 columns which is
designed to fit well when pasted into email and which will
work well with Braille displays.</p>

<p style="margin-top: 1em">The second type of output is CSV
(Comma Seperated Values). This can easily be imported into
any spread-sheet or database program. Also I have included
the programs bon_csv2html <br>
and bon_csv2txt to convert CSV data to HTML and plain-ascii
respectively.</p>

<p style="margin-top: 1em">For every test two numbers are
reported, the amount of work done (higher numbers are
better) and the percentage of CPU time taken to perform the
work (lower numbers are better). <br>
If a test completes in less than 500ms then the output will
be displayed as &quot;++++&quot;. This is because such a
test result can&rsquo;t be calculated accurately due to
rounding errors and I <br>
would rather display no result than a wrong result.</p>

<p style="margin-top: 1em">Data volumes for the 80 column
text display use &quot;K&quot; for KiB (1024 bytes),
&quot;M&quot; for MiB (1048576 bytes), and &quot;G&quot; for
GiB (1073741824 bytes). So K/sec means a multiple of 1024
<br>
bytes per second.</p>

<p style="margin-top: 1em">AUTHOR <br>
This program, its manual page, and the Debian package were
written by Russell Coker &lt;russell@coker.com.au&gt;, parts
of the program are based on the work of Tim Bray
&lt;tbray@textual&acirc; <br>
ity.com&gt;.</p>

<p style="margin-top: 1em">The documentation, the Perl
scripts, and all the code for testing the creation of
thousands of files was written by Russell Coker, but the
entire package is under joint copyright <br>
with Tim Bray.</p>

<p style="margin-top: 1em">SIGNALS <br>
Handles SIGINT and does a cleanup (which may take some
time), a second SIGINT or a SIGQUIT will cause it to
immediately die.</p>

<p style="margin-top: 1em">SIGXCPU and SIGXFSZ act like
SIGINT.</p>

<p style="margin-top: 1em">Ignores SIGHUP.</p>

<p style="margin-top: 1em">BUGS <br>
The random file sizes will add up to different values for
different test runs. I plan to add some code that checks the
sum and ensures that the sum of the values will be the <br>
same on seperate runs.</p>

<p style="margin-top: 1em">AVAILABILITY <br>
The source is available from
http://www.coker.com.au/bonnie++ .</p>

<p style="margin-top: 1em">See
http://etbe.coker.com.au/category/benchmark for further
information.</p>

<p style="margin-top: 1em">SEE ALSO <br>
zcav(8), getc_putc(8), bon_csv2html(1), bon_csv2txt(1)</p>
 
<p style="margin-top: 1em">bonnie++(8)</p>
<hr>
</body>
</html>
