<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>IPTABLES-APPLY(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IPTABLES-APPLY(8)</td>
    <td class="head-vol">iptables 1.6.0</td>
    <td class="head-rtitle">IPTABLES-APPLY(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
iptables-apply - a safer way to update iptables remotely
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>iptables-apply</b> [-<b>hV</b>] [<b>-t</b> <i>timeout</i>] [<b>-w</b>
  <i>savefile</i>] {[ <i>rulesfile]|-c [runcmd]}</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
iptables-apply will try to apply a new rulesfile (as output by iptables-save,
  read by iptables-restore) or run a command to configure iptables and then
  prompt the user whether the changes are okay. If the new iptables rules cut
  the existing connection, the user will not be able to answer affirmatively. In
  this case, the script rolls back to the previous working iptables rules after
  the timeout expires.
<div class="Pp"></div>
Successfully applied rules can also be written to savefile and later used to
  roll back to this state. This can be used to implement a store last good
  configuration mechanism when experimenting with an iptables setup script:
  iptables-apply -w /etc/network/iptables.up.rules -c
  /etc/network/iptables.up.run
<div class="Pp"></div>
When called as ip6tables-apply, the script will use ip6tables-save/-restore and
  IPv6 default values instead. Default value for rulesfile is
  '/etc/network/iptables.up.rules'.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b> <i>seconds</i>, <b>--timeout</b>
    <i>seconds</i></dt>
  <dd class="It-tag">Sets the timeout in seconds after which the script will
      roll back to the previous ruleset (default: 10).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b> <i>savefile</i>, <b>--write</b>
    <i>savefile</i></dt>
  <dd class="It-tag">Specify the savefile where successfully applied rules will
      be written to (default if empty string is given:
      /etc/network/iptables.up.rules).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b> <i>runcmd</i>, <b>--command</b>
    <i>runcmd</i></dt>
  <dd class="It-tag">Run command runcmd to configure iptables instead of
      applying a rulesfile (default: /etc/network/iptables.up.run).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Display usage information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Display version information.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>iptables-restore</b>(8), <b>iptables-save</b>(8), <b>iptables</b>(8).
<h1 class="Sh" title="Sh" id="LEGALESE"><a class="selflink" href="#LEGALESE">LEGALESE</a></h1>
Original iptables-apply - Copyright 2006 Martin F. Krafft
  &lt;madduck@madduck.net&gt;. Version 1.1 - Copyright 2010 GW
  &lt;gw.2010@tnode.com or http://gw.tnode.com/&gt;.
<div class="Pp"></div>
This manual page was written by Martin F. Krafft &lt;madduck@madduck.net&gt; and
  extended by GW &lt;gw.2010@tnode.com or http://gw.tnode.com/&gt;.
<div class="Pp"></div>
Permission is granted to copy, distribute and/or modify this document under the
  terms of the Artistic License 2.0.</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">iptables 1.6.0</td>
  </tr>
</table>
</body>
</html>
