<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SCSI_CH_SWP(8) SDPARM SCSI_CH_SWP(8)</p>

<p style="margin-top: 1em">NAME <br>
scsi_ch_swp - change SCSI Software WRITE Protect and block
device settings</p>

<p style="margin-top: 1em">SYNOPSIS <br>
scsi_ch_swp [--help] [--set 0|1] [--verbose] [--wr]
BLK_DEVICE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This bash shell script attempts to read or change the
Software Write Protect (SWP) bit in the SCSI Control mode
page using the sdparm utility. If that change is successful
then <br>
it uses the blockdev utility to change BLK_DEVICE&rsquo;s
read-write or read-only setting in sympathy. This script is
only available in Linux since the blockdev utility is Linux
spe&acirc; <br>
cific.</p>

<p style="margin-top: 1em">If changing the SWP bit is
supported, setting the SWP bit makes BLK_DEVICE read-only at
the device (disk) itself. Clearing the SWP bit makes
BLK_DEVICE read-write which is usu&acirc; <br>
ally the default setting at device (disk) power up.</p>

<p style="margin-top: 1em">If no options are given then the
current state of the SWP bit is printed out (using sdparm)
together with blockdev&rsquo;s RO bit. If they are both 1
then BLK_DEVICE is in read-only <br>
mode; if they are both 0 then BLK_DEVICE is in read-write
mode.</p>

<p style="margin-top: 1em">OPTIONS <br>
Arguments to long options are mandatory for short options as
well.</p>

<p style="margin-top: 1em">-h, --help <br>
print out the usage message then exit.</p>

<p style="margin-top: 1em">-s, --set 0|1 <br>
when 0 is given then the SWP bit in the Control mode page is
cleared (i.e. set that bit to 0) using sdparm; and blockdev
is used to set BLK_DEVICE to read-write mode. <br>
When 1 is given then the SWP bit in the Control mode page is
set using sdparm; and blockdev is used to set BLK_DEVICE to
read-only mode. The default (i.e. when this option <br>
is not given) is to read the state of the SWP bit and
BLK_DEVICE&rsquo;s read-only mode and print those values
out.</p>

<p style="margin-top: 1em">-v, --verbose <br>
increase level or verbosity.</p>

<p style="margin-top: 1em">-w, --wr <br>
when the BLK_DEVICE is in read-only mode, Linux will not
typically allow BLK_DEVICE to be opened read-write by
sdparm, so the default action of this script is to use the
<br>
sdparm --readonly option when --set 0 has been invoked. It
is possible that BLK_DEVICE could be a generic device (e.g.
/dev/sg3) which has a different interpretation of <br>
the read-only open flag and may fail. For such rare cases
the --wr option makes sdparm open BLK_DEVICE read-write when
--set 0 is invoked.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The exit status of this script is 0 when it is successful.
Otherwise the exit status is that of the sdparm or the
blockdev utility, whichever is called last. See the
sdparm(8) <br>
man page.</p>

<p style="margin-top: 1em">AUTHORS <br>
Written by D. Gilbert</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2013 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<p style="margin-top: 1em">SEE ALSO <br>
sdparm(sdparm), blockdev(8)</p>

<p style="margin-top: 1em">sdparm-1.08 May 2013
SCSI_CH_SWP(8)</p>
<hr>
</body>
</html>
