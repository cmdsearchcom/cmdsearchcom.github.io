<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PUPPET-DEVICE(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PUPPET-DEVICE(8)</td>
    <td class="head-vol">Puppet manual</td>
    <td class="head-rtitle">PUPPET-DEVICE(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>puppet-device</b> - Manage remote network devices
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
Retrieves all configurations from the puppet master and apply them to the remote
  devices configured in /etc/puppetlabs/puppet/device.conf.
<div class="Pp"></div>
Currently must be run out periodically, using cron or something similar.
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
puppet device [-d|--debug] [--detailed-exitcodes] [-V|--version] [-h|--help]
  [-l|--logdest syslog| <i>file</i>|console] [-v|--verbose] [-w|--waitforcert
  <i>seconds</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Once the client has a signed certificate for a given remote device, it will
  retrieve its configuration and apply it.
<h1 class="Sh" title="Sh" id="USAGE_NOTES"><a class="selflink" href="#USAGE_NOTES">USAGE
  NOTES</a></h1>
One need a /etc/puppetlabs/puppet/device.conf file with the following content:
<div class="Pp"></div>
[remote.device.fqdn] type <i>type</i> url <i>url</i>
<div class="Pp"></div>
where: * type: the current device type (the only value at this time is cisco) *
  url: an url allowing to connect to the device
<div class="Pp"></div>
Supported url must conforms to: scheme://user:password@hostname/?query
<div class="Pp"></div>
with: * scheme: either ssh or telnet * user: username, can be omitted depending
  on the switch/router configuration * password: the connection password *
  query: this is device specific. Cisco devices supports an enable parameter
  whose value would be the enable password.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Note that any setting that&#x00B4;s valid in the configuration file is also a
  valid long argument. For example, &#x00B4;server&#x00B4; is a valid
  configuration parameter, so you can specify &#x00B4;--server
  <i>servername</i>&#x00B4; as an argument.
<dl class="Bl-tag">
  <dt class="It-tag">--debug</dt>
  <dd class="It-tag">Enable full debugging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--detailed-exitcodes</dt>
  <dd class="It-tag">Provide transaction information via exit codes. If this is
      enabled, an exit code of &#x00B4;1&#x00B4; means at least one device had a
      compile failure, an exit code of &#x00B4;2&#x00B4; means at least one
      device had resource changes, and an exit code of &#x00B4;4&#x00B4; means
      at least one device had resource failures. Exit codes of
      &#x00B4;3&#x00B4;, &#x00B4;5&#x00B4;, &#x00B4;6&#x00B4;, or
      &#x00B4;7&#x00B4; means that a bitwise combination of the preceeding exit
      codes happened.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Print this help message</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--logdest</dt>
  <dd class="It-tag">Where to send log messages. Choose between
      &#x00B4;syslog&#x00B4; (the POSIX syslog service),
      &#x00B4;console&#x00B4;, or the path to a log file. If debugging or
      verbosity is enabled, this defaults to &#x00B4;console&#x00B4;. Otherwise,
      it defaults to &#x00B4;syslog&#x00B4;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">A path ending with &#x00B4;.json&#x00B4; will receive
      structured output in JSON format. The log file will not have an ending
      &#x00B4;]&#x00B4; automatically written to it due to the appending nature
      of logging. It must be appended manually to make the content valid
    JSON.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--verbose</dt>
  <dd class="It-tag">Turn on verbose reporting.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--waitforcert</dt>
  <dd class="It-tag">This option only matters for daemons that do not yet have
      certificates and it is enabled by default, with a value of 120 (seconds).
      This causes +puppet agent+ to connect to the server every 2 minutes and
      ask it to sign a certificate request. This is useful for the initial setup
      of a puppet client. You can turn off waiting for certificates by
      specifying a time of 0.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>
<div class="Pp"></div>
  $ puppet device --server puppet.domain.com
</pre>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Brice Figureau
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2011 Puppet Labs, LLC Licensed under the Apache 2.0 License</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2015</td>
    <td class="foot-os">Puppet Labs, LLC</td>
  </tr>
</table>
</body>
</html>
