<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>FSARCHIVER(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FSARCHIVER(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">FSARCHIVER(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
fsarchiver - filesystem archiver
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
fsarchiver is a system tool that allows you to save the contents of a filesystem
  to a compressed archive file. The filesystem contents can be restored on a
  device which has a different size and it can be restored on a different
  filesystem. Unlike tar/dar, fsarchiver also creates the filesystem when it
  extracts the data to devices. Everything is checksummed in the archive in
  order to protect the data. If the archive is corrupt, you just lose the
  current file, not the whole archive.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="LINKS"><a class="selflink" href="#LINKS">LINKS</a></h1>
<h2 class="Ss" title="Ss" id="Official_project_homepage:"><a class="selflink" href="#Official_project_homepage:">Official
  project homepage:</a></h2>
http://www.fsarchiver.org
<h2 class="Ss" title="Ss" id="Quick_Start_Guide:"><a class="selflink" href="#Quick_Start_Guide:">Quick
  Start Guide:</a></h2>
http://www.fsarchiver.org/QuickStart
<h2 class="Ss" title="Ss" id="Forums_where_to_ask_questions:"><a class="selflink" href="#Forums_where_to_ask_questions:">Forums
  where to ask questions:</a></h2>
http://www.fsarchiver.org/forums/
<h2 class="Ss" title="Ss" id="Git_repository:"><a class="selflink" href="#Git_repository:">Git
  repository:</a></h2>
https://github.com/fdupoux/fsarchiver
<h2 class="Ss" title="Ss" id="Report_a_bug:"><a class="selflink" href="#Report_a_bug:">Report
  a bug:</a></h2>
https://github.com/fdupoux/fsarchiver/issues
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>fsarchiver [</b> <i>options</i> <b>] savefs</b> <i>archive</i> <i>device</i>
  <b>...</b>
<div class="Pp"></div>
<b>fsarchiver [</b> <i>options</i> <b>] restfs</b> <i>archive</i>
  <b>id=</b><i>n</i><b>,dest=</b><i>device</i><b>[,mkfs=</b><i>fstype</i><b>,mkfsopt=</b><i>options</i><b>,label=</b><i>newlabel</i><b>,uuid=</b><i>newuuid</i><b>]</b>
  <b>...</b>
<div class="Pp"></div>
<b>fsarchiver [</b> <i>options</i> <b>] savedir</b> <i>archive</i>
  <i>directory</i> <b>...</b>
<div class="Pp"></div>
<b>fsarchiver [</b> <i>options</i> <b>] restdir</b> <i>archive destination</i>
<div class="Pp"></div>
<b>fsarchiver [</b> <i>options</i> <b>] archinfo</b> <i>archive</i>
<div class="Pp"></div>
<b>fsarchiver [</b> <i>options</i> <b>] probe [detailed]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>savefs</b></dt>
  <dd class="It-tag">Save <i>device</i> filesystem to <i>archive</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>restfs</b></dt>
  <dd class="It-tag">Restore filesystems from <i>archive</i>. This overwrites
      the existing data on <i>device</i>. Zero-based index <i>n</i> indicates
      the part of the archive to restore. Optionally, a filesystem may be
      converted to <i>fstype</i> and extra mkfs <i>options</i> specified.
      <i>newlabel</i> and <i>newuuid</i> override values stored in the archive.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>savedir</b></dt>
  <dd class="It-tag">Save <i>directories</i> to <i>archive</i> (similar to a
      compressed tarball).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>restdir</b></dt>
  <dd class="It-tag">Restore data from <i>archive</i> which is not based on a
      filesystem to <i>destination</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>archinfo</b></dt>
  <dd class="It-tag">Show information about an existing <i>archive</i> file and
      its contents.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>probe</b></dt>
  <dd class="It-tag">Show list of filesystems detected on the disks.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show help and information about how to use fsarchiver with
      examples.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">Show program version and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Verbose mode (can be used several times to increase the
      level of details). The details will be printed to the console.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o, --overwrite</b></dt>
  <dd class="It-tag">Overwrite the archive if it already exists instead of
      failing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d, --debug</b></dt>
  <dd class="It-tag">Debug mode (can be used several times to increase the level
      of details). The details will be written in /var/log/fsarchiver.log.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x, --experimental</b></dt>
  <dd class="It-tag">Allow to save filesystems which support is considered
      experimental in fsarchiver.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A, --allow-rw-mounted</b></dt>
  <dd class="It-tag">Allow to save a filesystem which is mounted in read-write
      (live backup). By default fsarchiver fails with an error if the device is
      mounted in read-write mode which allows modifications to be done on the
      filesystem during the backup. Modifications can drive to inconsistencies
      in the backup. Using LVM snapshots is the recommended way to make backups
      since it will provide consistency, but it is only available for
      filesystems which are on LVM logical volumes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --allow-no-acl-xattr</b></dt>
  <dd class="It-tag">Allow to to save a filesystem when ACLs and extended
      attributes are not supported (or are disabled) by the kernel. By default
      fsarchiver fails with an error if it cannot access ACLs and extended
      attributes, since they would not be saved. If you do not need ACLs and
      extended attributes preserved then it is safe to use this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e pattern, --exclude=pattern</b></dt>
  <dd class="It-tag">Exclude files and directories that match specified pattern.
      The pattern can contain shell wildcards such as * and ? or may be either a
      simple file/dir name or an absolute file/dir path. You must use quotes
      around the pattern each time you use wildcards, else it would be
      interpreted by the shell. The wildcards must be interpreted by fsarchiver.
      See examples below for more details about this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L label, --label=label</b></dt>
  <dd class="It-tag">Set the label of the archive: it is just a comment about
      its contents. It can be used to remember a particular thing about the
      archive or the state of the filesystem for instance.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z level, --compress=level</b></dt>
  <dd class="It-tag">Valid compression levels are between 1 (very fast) and 9
      (very good). The memory requirement increases a lot with the best
      compression levels, and it is multiplied by the number of compression
      threads (option -j). Level 9 is considered as an extreme compression level
      and requires an huge amount of memory to run. For more details please read
      this page: http://www.fsarchiver.org/Compression</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s mbsize, --split=mbsize</b></dt>
  <dd class="It-tag">Split the archive into several files of mbsize megabytes
      each.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j count, --jobs=count</b></dt>
  <dd class="It-tag">Create more than one (de)compression thread. Useful on
      multi-core CPUs. By default fsarchiver will only use one (de)compression
      thread (-j 1) and then only one logical processor will be used for the
      task. You should use this option if you have a multi-core CPU or more than
      one physical CPU on your computer. The typical way to use it is to specify
      the number of logical processors available so that all the processing
      power is used to (de)compress the archive very quickly. You may also want
      to use all logical processors but one so that your system stays responsive
      for other applications.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c password, --cryptpass=password</b></dt>
  <dd class="It-tag">Encrypt/decrypt data in archive. Password length: 6 to 64
      characters. You can either provide a real password or a dash (-c -). Use
      the dash if you do not want to provide the password in the command line.
      It will be prompted in the terminal instead.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="save_only_one_filesystem_(/dev/sda1)_to_an_archive:"><a class="selflink" href="#save_only_one_filesystem_(/dev/sda1)_to_an_archive:">save
  only one filesystem (/dev/sda1) to an archive:</a></h2>
fsarchiver savefs /data/myarchive1.fsa /dev/sda1
<h2 class="Ss" title="Ss" id="save_two_filesystems_(/dev/sda1_and_/dev/sdb1)_to_an_archive:"><a class="selflink" href="#save_two_filesystems_(/dev/sda1_and_/dev/sdb1)_to_an_archive:">save
  two filesystems (/dev/sda1 and /dev/sdb1) to an archive:</a></h2>
fsarchiver savefs /data/myarchive2.fsa /dev/sda1 /dev/sdb1
<h2 class="Ss" title="Ss" id="restore_the_first_filesystem_from_an_archive_(first_=_number_0):"><a class="selflink" href="#restore_the_first_filesystem_from_an_archive_(first_=_number_0):">restore
  the first filesystem from an archive (first = number 0):</a></h2>
fsarchiver restfs /data/myarchive2.fsa id=0,dest=/dev/sda1
<h2 class="Ss" title="Ss" id="restore_the_second_filesystem_from_an_archive_(second_=_number_1):"><a class="selflink" href="#restore_the_second_filesystem_from_an_archive_(second_=_number_1):">restore
  the second filesystem from an archive (second = number 1):</a></h2>
fsarchiver restfs /data/myarchive2.fsa id=1,dest=/dev/sdb1
<h2 class="Ss" title="Ss" id="restore_two_filesystems_from_an_archive_(number_0_and_1):"><a class="selflink" href="#restore_two_filesystems_from_an_archive_(number_0_and_1):">restore
  two filesystems from an archive (number 0 and 1):</a></h2>
fsarchiver restfs /data/arch2.fsa id=0,dest=/dev/sda1 id=1,dest=/dev/sdb1
<h2 class="Ss" title="Ss" id="restore_a_filesystem_from_an_archive_and_convert_it_to_reiserfs:"><a class="selflink" href="#restore_a_filesystem_from_an_archive_and_convert_it_to_reiserfs:">restore
  a filesystem from an archive and convert it to reiserfs:</a></h2>
fsarchiver restfs /data/myarchive1.fsa id=0,dest=/dev/sda1,mkfs=reiserfs
<h2 class="Ss" title="Ss" id="restore_a_filesystem_from_an_archive_and_specify_extra_mkfs_options:"><a class="selflink" href="#restore_a_filesystem_from_an_archive_and_specify_extra_mkfs_options:">restore
  a filesystem from an archive and specify extra mkfs options:</a></h2>
fsarchiver restfs /data/myarchive1.fsa
  id=0,dest=/dev/sda1,mkfs=ext4,mkfsopt=&quot;-I 256&quot;
<h2 class="Ss" title="Ss" id="restore_a_filesystem_from_an_archive_and_specify_a_new_filesystem_label:"><a class="selflink" href="#restore_a_filesystem_from_an_archive_and_specify_a_new_filesystem_label:">restore
  a filesystem from an archive and specify a new filesystem label:</a></h2>
fsarchiver restfs /data/myarchive1.fsa id=0,dest=/dev/sda1,label=root
<h2 class="Ss" title="Ss" id="restore_a_filesystem_from_an_archive_and_specify_a_new_filesystem_UUID:"><a class="selflink" href="#restore_a_filesystem_from_an_archive_and_specify_a_new_filesystem_UUID:">restore
  a filesystem from an archive and specify a new filesystem UUID:</a></h2>
fsarchiver restfs /data/myarchive1.fsa
  id=0,dest=/dev/sda1,uuid=5f6e5f4f-dc2a-4dbd-a6ea-9ca997cde75e
<h2 class="Ss" title="Ss" id="save_the_contents_of_/usr/src/linux_to_an_archive_(similar_to_tar):"><a class="selflink" href="#save_the_contents_of_/usr/src/linux_to_an_archive_(similar_to_tar):">save
  the contents of /usr/src/linux to an archive (similar to tar):</a></h2>
fsarchiver savedir /data/linux-sources.fsa /usr/src/linux
<h2 class="Ss" title="Ss" id="save_a_filesystem_(/dev/sda1)_to_an_archive_split_into_volumes_of_680MB:"><a class="selflink" href="#save_a_filesystem_(/dev/sda1)_to_an_archive_split_into_volumes_of_680MB:">save
  a filesystem (/dev/sda1) to an archive split into volumes of 680MB:</a></h2>
fsarchiver savefs -s 680 /data/myarchive1.fsa /dev/sda1
<h2 class="Ss" title="Ss" id="save_a_filesystem_and_exclude_all_files/dirs_called_'pagefile.*':"><a class="selflink" href="#save_a_filesystem_and_exclude_all_files/dirs_called_'pagefile.*':">save
  a filesystem and exclude all files/dirs called 'pagefile.*':</a></h2>
fsarchiver savefs /data/myarchive.fsa /dev/sda1 --exclude='pagefile.*'
<h2 class="Ss" title="Ss" id="generic_exclude_for_'share'_such_as_'/usr/share'_and_'/usr/local/share':"><a class="selflink" href="#generic_exclude_for_'share'_such_as_'/usr/share'_and_'/usr/local/share':">generic
  exclude for 'share' such as '/usr/share' and '/usr/local/share':</a></h2>
fsarchiver savefs /data/myarchive.fsa --exclude=share
<h2 class="Ss" title="Ss" id="absolute_exclude_valid_for_'/usr/share'_but_not_for_'/usr/local/share':"><a class="selflink" href="#absolute_exclude_valid_for_'/usr/share'_but_not_for_'/usr/local/share':">absolute
  exclude valid for '/usr/share' but not for '/usr/local/share':</a></h2>
fsarchiver savefs /data/myarchive.fsa --exclude=/usr/share
<h2 class="Ss" title="Ss" id="save_a_filesystem_(/dev/sda1)_to_an_encrypted_archive:"><a class="selflink" href="#save_a_filesystem_(/dev/sda1)_to_an_encrypted_archive:">save
  a filesystem (/dev/sda1) to an encrypted archive:</a></h2>
fsarchiver savefs -c mypassword /data/myarchive1.fsa /dev/sda1
<h2 class="Ss" title="Ss" id="same_as_before_but_prompt_for_password_in_the_terminal:"><a class="selflink" href="#same_as_before_but_prompt_for_password_in_the_terminal:">same
  as before but prompt for password in the terminal:</a></h2>
fsarchiver savefs -c - /data/myarchive1.fsa /dev/sda1
<h2 class="Ss" title="Ss" id="extract_an_archive_made_of_simple_files_to_/tmp/extract:"><a class="selflink" href="#extract_an_archive_made_of_simple_files_to_/tmp/extract:">extract
  an archive made of simple files to /tmp/extract:</a></h2>
fsarchiver restdir /data/linux-sources.fsa /tmp/extract
<h2 class="Ss" title="Ss" id="show_information_about_an_archive_and_its_filesystems:"><a class="selflink" href="#show_information_about_an_archive_and_its_filesystems:">show
  information about an archive and its filesystems:</a></h2>
fsarchiver archinfo /data/myarchive2.fsa
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="WARNING"><a class="selflink" href="#WARNING">WARNING</a></h1>
<b>fsarchiver</b> is considered stable for Linux filesystems such as EXT4 and
  XFS but unstable for NTFS.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
fsarchiver was written by Francois Dupoux. It is released under the GPL2 (GNU
  General Public License version 2). This manpage was written by Ilya Barygin
  and Francois Dupoux.</div>
<table class="foot">
  <tr>
    <td class="foot-date">30 December 2009</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
