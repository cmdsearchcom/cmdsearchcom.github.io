<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:38 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>security_file_certgen(8) System Manager&rsquo;s Manual
security_file_certgen(8)</p>

<p style="margin-top: 1em">NAME <br>
security_file_certgen - SSL certificate generator for
Squid.</p>

<p style="margin-top: 1em">Version 1.0</p>

<p style="margin-top: 1em">SYNOPSIS <br>
security_file_certgen [-dhv] <br>
security_file_certgen [-d] -s directory [-M size ] <br>
security_file_certgen [-d] -c -s directory [-n serial number
] <br>
security_file_certgen [-d] -g -s directory</p>

<p style="margin-top: 1em">DESCRIPTION <br>
security_file_certgen is an installed binary.</p>

<p style="margin-top: 1em">Because the generation and
signing of SSL certificates takes time Squid must use
external process to handle the work. This process generates
new SSL certificates and uses a disk <br>
cache of certificates to improve response times on repeated
requests. Communication occurs via TCP sockets bound to the
loopback interface.</p>

<p style="margin-top: 1em">OPTIONS <br>
-b fs_block_size <br>
File system block size in bytes. Needed for processing
natural size of certificate on disk. Default value is 2048
bytes.</p>

<p style="margin-top: 1em">-c Initialize the SSL storage
database and exit. Requires the -s option to determine the
storage location being created.</p>

<p style="margin-top: 1em">-d Write debug info to
stderr.</p>

<p style="margin-top: 1em">-g Display the current serial
number using stderr and exit. Requires -s option to
determine which storage directory the serial is located
in.</p>

<p style="margin-top: 1em">-h Display the binary help and
command line syntax info using stderr.</p>

<p style="margin-top: 1em">-s directory <br>
Directory path of disk storage for new SSL certificates.</p>

<p style="margin-top: 1em">-M size Maximum size of SSL
certificate disk storage.</p>

<p style="margin-top: 1em">-n serial number <br>
HEX serial number to use when initializing an SSL storage
database. The default value of serial number is the number
of seconds since Epoch minus 1200000000.</p>

<p style="margin-top: 1em">-v Display the binary version
details using stderr.</p>

<p style="margin-top: 1em">KNOWN ISSUES <br>
SSL errors after changing the CA</p>

<p style="margin-top: 1em">Certificates are stored in this
database in signed form. After any change to the signing CA
in squid.conf be sure to erase and re-initialize the
certificate database.</p>

<p style="margin-top: 1em">Certificate chaining</p>

<p style="margin-top: 1em">The version 1.0 of this helper
will not add chained intermediate CA certificates. The
client must have a full chain of trust from the root CA all
the way down to the end cer&acirc; <br>
tificate generated by this program. Signing with an
intermediate CA needs to install both the root and the
intermediate public CA on the clients.</p>

<p style="margin-top: 1em">CONFIGURATION <br>
Before this helper can be used the storage area for new
certificates must be initialized manually. This is done from
the command line using the -c parameters.</p>

<p style="margin-top: 1em">For example: <br>
/usr/lib64/squid/security_file_certgen -c -s
/var/spool/squid/ssl_db</p>

<p style="margin-top: 1em">Certificates are stored in this
database in signed form. After any change to the signing CA
in squid.conf be sure to erase and re-initialize the
certificate database.</p>

<p style="margin-top: 1em">For simple configuration the
helper defaults can be used. Only HTTP listening port
options are required to enable generation and set the
signing CA certificate. For Example: <br>
http_port 3128 ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB
cert=/etc/squid/ssl_cert/example.com.pem</p>

<p style="margin-top: 1em">For more customized
configuration the helper certificate storage directory
location and size can be altered with the sslcrtd_program
configuration directive. For example: <br>
sslcrtd_program /usr/lib64/squid/security_file_certgen -s
/var/spool/squid/ssl_db -M 4MB <br>
sslcrtd_children 5</p>

<p style="margin-top: 1em">AUTHOR <br>
This program was written by Christos Tsantilas
&lt;christos@chtsanti.net&gt;</p>

<p style="margin-top: 1em">This manual was written by
Christos Tsantilas &lt;christos@chtsanti.net&gt; Amos
Jeffries &lt;squid3@treenet.co.nz&gt;</p>

<p style="margin-top: 1em">COPYRIGHT <br>
* Copyright (C) 1996-2017 The Squid Software Foundation and
contributors <br>
* <br>
* Squid software is distributed under GPLv2+ license and
includes <br>
* contributions from numerous individuals and organizations.
<br>
* Please see the COPYING and CONTRIBUTORS files for
details.</p>

<p style="margin-top: 1em">QUESTIONS <br>
Questions on the usage of this program can be sent to the
Squid Users mailing list
&lt;squid-users@squid-cache.org&gt;</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Bug reports need to be made in English. See
http://wiki.squid-cache.org/SquidFaq/BugReporting for
details of what you need to include with your bug
report.</p>

<p style="margin-top: 1em">Report bugs or bug fixes using
http://bugs.squid-cache.org/</p>

<p style="margin-top: 1em">Report serious security bugs to
Squid Bugs &lt;squid-bugs@squid-cache.org&gt;</p>

<p style="margin-top: 1em">Report ideas for new
improvements to the Squid Developers mailing list
&lt;squid-dev@squid-cache.org&gt;</p>

<p style="margin-top: 1em">SEE ALSO <br>
squid(8), GPL(7), <br>
The Squid FAQ wiki http://wiki.squid-cache.org/SquidFaq <br>
The Squid Configuration Manual
http://www.squid-cache.org/Doc/config/</p>
 
<p style="margin-top: 1em">security_file_certgen(8)</p>
<hr>
</body>
</html>
