<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>security_file_certgen(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">security_file_certgen(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">security_file_certgen(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
security_file_certgen - SSL certificate generator for Squid.
<div class="Pp"></div>
Version 1.0
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>security_file_certgen</b> <b>[-dhv]</b>
<div>&#x00A0;</div>
<b>security_file_certgen</b> <b>[-d] -s </b> directory <b>[-M </b> size <b>]</b>
<div>&#x00A0;</div>
<b>security_file_certgen</b> <b>[-d] -c -s </b> directory <b>[-n </b> serial
  number <b>]</b>
<div>&#x00A0;</div>
<b>security_file_certgen</b> <b>[-d] -g -s </b> directory
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>security_file_certgen</b> is an installed binary.
<div class="Pp"></div>
Because the generation and signing of SSL certificates takes time Squid must use
  external process to handle the work. This process generates new SSL
  certificates and uses a disk cache of certificates to improve response times
  on repeated requests. Communication occurs via TCP sockets bound to the
  loopback interface.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b fs_block_size</b></dt>
  <dd class="It-tag">File system block size in bytes. Needed for processing
      natural size of certificate on disk. Default value is 2048 bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Initialize the SSL storage database and exit. Requires the
      <b>-s</b> option to determine the storage location being created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Write debug info to stderr.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">Display the current serial number using stderr and exit.
      Requires <b>-s</b> option to determine which storage directory the serial
      is located in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Display the binary help and command line syntax info using
      stderr.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s directory</b></dt>
  <dd class="It-tag">Directory path of disk storage for new SSL
    certificates.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M size</b></dt>
  <dd class="It-tag">Maximum size of SSL certificate disk storage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n serial number</b></dt>
  <dd class="It-tag">HEX <b>serial number </b> to use when initializing an SSL
      storage database. The default value of serial number is the number of
      seconds since Epoch minus 1200000000.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Display the binary version details using stderr.</dd>
</dl>
<h1 class="Sh" title="Sh" id="KNOWN_ISSUES"><a class="selflink" href="#KNOWN_ISSUES">KNOWN
  ISSUES</a></h1>
<b>SSL errors after changing the CA</b>
<div class="Pp"></div>
Certificates are stored in this database in signed form. After any change to the
  signing CA in squid.conf be sure to erase and re-initialize the certificate
  database.
<div class="Pp"></div>
<b>Certificate chaining</b>
<div class="Pp"></div>
The version 1.0 of this helper will not add chained intermediate CA
  certificates. The client must have a full chain of trust from the root CA all
  the way down to the end certificate generated by this program. Signing with an
  intermediate CA needs to install both the root and the intermediate public CA
  on the clients.
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
Before this helper can be used the storage area for new certificates must be
  initialized manually. This is done from the command line using the <b>-c</b>
  parameters.
<div class="Pp"></div>
For example:
<div style="margin-left: 5.00ex;"><b>/usr/lib64/squid/security_file_certgen -c
  -s /var/spool/squid/ssl_db</b></div>
<div class="Pp"></div>
Certificates are stored in this database in signed form. After any change to the
  signing CA in squid.conf be sure to erase and re-initialize the certificate
  database.
<div class="Pp"></div>
For simple configuration the helper defaults can be used. Only HTTP listening
  port options are required to enable generation and set the signing CA
  certificate. For Example:
<div style="margin-left: 5.00ex;"><b>http_port 3128 ssl-bump
  generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
  cert=/etc/squid/ssl_cert/example.com.pem</b></div>
<div class="Pp"></div>
For more customized configuration the helper certificate storage directory
  location and size can be altered with the <b>sslcrtd_program</b> configuration
  directive. For example:
<div style="margin-left: 5.00ex;"><b>sslcrtd_program
  /usr/lib64/squid/security_file_certgen -s /var/spool/squid/ssl_db -M 4MB</b>
<div>&#x00A0;</div>
<b>sslcrtd_children 5</b></div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This program was written by <i>Christos Tsantilas
  &lt;christos@chtsanti.net&gt;</i>
<div class="Pp"></div>
This manual was written by <i>Christos Tsantilas
  &lt;christos@chtsanti.net&gt;</i> <i>Amos Jeffries
  &lt;squid3@treenet.co.nz&gt;</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<br/>
 * Copyright (C) 1996-2017 The Squid Software Foundation and contributors
<br/>
 *
<br/>
 * Squid software is distributed under GPLv2+ license and includes
<br/>
 * contributions from numerous individuals and organizations.
<br/>
 * Please see the COPYING and CONTRIBUTORS files for details.
<h1 class="Sh" title="Sh" id="QUESTIONS"><a class="selflink" href="#QUESTIONS">QUESTIONS</a></h1>
Questions on the usage of this program can be sent to the <i>Squid Users mailing
  list</i> &lt;squid-users@squid-cache.org&gt;
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Bug reports need to be made in English. See
  http://wiki.squid-cache.org/SquidFaq/BugReporting for details of what you need
  to include with your bug report.
<div class="Pp"></div>
Report bugs or bug fixes using http://bugs.squid-cache.org/
<div class="Pp"></div>
Report serious security bugs to <i>Squid Bugs
  &lt;squid-bugs@squid-cache.org&gt;</i>
<div class="Pp"></div>
Report ideas for new improvements to the <i>Squid Developers mailing list</i>
  &lt;squid-dev@squid-cache.org&gt;
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>squid</b>(8), <b>GPL</b>(7),
<div>&#x00A0;</div>
The Squid FAQ wiki http://wiki.squid-cache.org/SquidFaq
<div>&#x00A0;</div>
The Squid Configuration Manual http://www.squid-cache.org/Doc/config/</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
