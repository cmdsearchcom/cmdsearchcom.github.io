<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opalinkanalysis(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opalinkanalysis(8)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opalinkanalysis(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opalinkanalysis
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(Switch)</b> Encapsulates the capabilities for link analysis. Additionally,
  this tool includes cable and fabric topology verification capabilities. This
  tool is built on top of opareport (and its analysis capabilities), and accepts
  the same syntax for input topology and snapshot files.
<div class="Pp"></div>
In addition to being able to run assorted opareport link analysis reports, and
  generate human-readable output, this tool additionally analyzes the results
  and appends a concise summary of issues found to the
  FF_RESULT_DIR/punchlist.csv file.
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opalinkanalysis [-U] [-t <i>portsfile</i>] [-p <i>ports</i>] [-T
  <i>topology_input</i>] [-X <i>snapshot_input</i>] [-x <i>snapshot_suffix</i>]
  [-c <i>file</i>] reports ...
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-U</dt>
  <dd class="It-tag">Omits unexpected devices and links in punchlist file from
      verify reports.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-t <i>portsfile</i></dt>
  <dd class="It-tag">File with list of local HFI ports used to access fabric(s)
      for analysis, default is /etc/sysconfig/opa/ports.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>ports</i></dt>
  <dd class="It-tag">List of local HFI ports used to access fabric(s) for
      analysis. The default is the first active port. The first HFI in the
      system is 1. The first port on an HFI is 1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Uses the format hfi:port, for example:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:0 First active port in system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:y Port <i>y</i> within system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:0 First active port on HFI <i>x</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:y HFI <i>x</i>, port <i>y</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-T <i>topology_input</i></dt>
  <dd class="It-tag">Name of a topology input file to use. Any #8217#160; %P
      markers in this filename are replaced with the hfi:port being operated on
      (such as 0:0 or 1:2). Default is /etc/sysconfig/opa/topology.%P.xml. If
      NONE is specified, does not use any topology_input files. See
      <i>opareport</i> for more information on topology_input files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-X <i>snapshot_input</i></dt>
  <dd class="It-tag">Performs analysis using data in <i>snapshot_input</i>.
      <i>snapshot_input</i> must have been generated via a previous opareport -o
      snapshot run. If an errors report is specified, snapshot must have been
      generated with the opareport -s option. When this option is used, only one
      port may be specified to select a topology_input file (unless -T
      specified). When this option is used, clearerrors and clearhwerrors
      reports are not permitted.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-x <i>snapshot_suffix</i></dt>
  <dd class="It-tag">Creates a snapshot file per selected port. The files are
      created in FF_RESULT_DIR with names of the form: snapshotSUFFIX.
      <i>HFI:PORT</i>.xml.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-c <i>file</i></dt>
  <dd class="It-tag">Error thresholds configuration file. The default is
      /etc/sysconfig/opa/opamon.si.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   <i>reports</i></dt>
  <dd class="It-tag">The following reports are supported:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
errors Link error analysis.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
slowlinks Links running slower than expected.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
misconfiglinks Links configured to run slower than supported.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
misconnlinks Links connected with mismatched speed potential.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
all Includes all reports above. (errors, slowlinks, misconfiglinks, and
  misconnlinks)
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifylinks Verifies links against topology input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifyextlinks Verifies links against topology input. Limit analysis to links
  external to systems.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifyfis Verifies FIs against topology input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifysws Verifies switches against topology input.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifyrtrs Verifies routers against topology input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifynodes Verifies FIs, switches, and routers against topology input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifysms Verifies SMs against topology input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
verifyall Verifies links, FIs, switches, routers, and SMs against topology
  input.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
clearerrors Clears error counters, uses PM if available.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
clearhwerrors Clears hardware error counters, bypasses PM.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
clear Includes clearerrors and clearhwerrors.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
A punchlist of bad links is also appended to the file:
  FF_RESULT_DIR/punchlist.csv
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
opalinkanalysis errors
<div>&#x00A0;</div>
opalinkanalysis errors clearerrors
<div>&#x00A0;</div>
opalinkanalysis -p '1:1 1:2 2:1 2:2'
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
The following environment variables are also used by this command:
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS</b></dt>
  <dd class="It-tag">List of ports, used in absence of -t and -p.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS_FILE</b></dt>
  <dd class="It-tag">File containing list of ports, used in absence of -t and
      -p.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_TOPOLOGY_FILE</b></dt>
  <dd class="It-tag">File containing <i>topology_input</i>, used in absence of
      -T.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
