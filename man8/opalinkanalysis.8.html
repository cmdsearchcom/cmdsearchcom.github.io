<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:05 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opalinkanalysis(8) Master map:
IFSFFCLIRG (Man Page) opalinkanalysis(8)</p>

<p style="margin-top: 1em">NAME <br>
opalinkanalysis</p>

<p style="margin-top: 1em">(Switch) Encapsulates the
capabilities for link analysis. Additionally, this tool
includes cable and fabric topology verification
capabilities. This tool is built on top of <br>
opareport (and its analysis capabilities), and accepts the
same syntax for input topology and snapshot files.</p>

<p style="margin-top: 1em">In addition to being able to run
assorted opareport link analysis reports, and generate
human-readable output, this tool additionally analyzes the
results and appends a concise <br>
summary of issues found to the FF_RESULT_DIR/punchlist.csv
file.</p>

<p style="margin-top: 1em">Syntax <br>
opalinkanalysis [-U] [-t portsfile] [-p ports] [-T
topology_input] [-X snapshot_input] [-x snapshot_suffix] [-c
file] reports ...</p>

<p style="margin-top: 1em">Options <br>
--help Produces full help text.</p>

<p style="margin-top: 1em">-U Omits unexpected devices and
links in punchlist file from verify reports.</p>

<p style="margin-top: 1em">-t portsfile <br>
File with list of local HFI ports used to access fabric(s)
for analysis, default is /etc/sysconfig/opa/ports.</p>

<p style="margin-top: 1em">-p ports List of local HFI ports
used to access fabric(s) for analysis. The default is the
first active port. The first HFI in the system is 1. The
first port on an HFI is 1.</p>

<p style="margin-top: 1em">Uses the format hfi:port, for
example:</p>

<p style="margin-top: 1em">0:0 First active port in
system.</p>

<p style="margin-top: 1em">0:y Port y within system.</p>

<p style="margin-top: 1em">x:0 First active port on HFI
x.</p>

<p style="margin-top: 1em">x:y HFI x, port y.</p>

<p style="margin-top: 1em">-T topology_input <br>
Name of a topology input file to use. Any #8217#160; %P
markers in this filename are replaced with the hfi:port
being operated on (such as 0:0 or 1:2). Default is <br>
/etc/sysconfig/opa/topology.%P.xml. If NONE is specified,
does not use any topology_input files. See opareport for
more information on topology_input files.</p>

<p style="margin-top: 1em">-X snapshot_input <br>
Performs analysis using data in snapshot_input.
snapshot_input must have been generated via a previous
opareport -o snapshot run. If an errors report is specified,
<br>
snapshot must have been generated with the opareport -s
option. When this option is used, only one port may be
specified to select a topology_input file (unless -T <br>
specified). When this option is used, clearerrors and
clearhwerrors reports are not permitted.</p>

<p style="margin-top: 1em">-x snapshot_suffix <br>
Creates a snapshot file per selected port. The files are
created in FF_RESULT_DIR with names of the form:
snapshotSUFFIX. HFI:PORT.xml.</p>

<p style="margin-top: 1em">-c file Error thresholds
configuration file. The default is
/etc/sysconfig/opa/opamon.si.conf.</p>

<p style="margin-top: 1em">reports The following reports
are supported:</p>

<p style="margin-top: 1em">errors Link error analysis.</p>

<p style="margin-top: 1em">slowlinks Links running slower
than expected.</p>

<p style="margin-top: 1em">misconfiglinks <br>
Links configured to run slower than supported.</p>

<p style="margin-top: 1em">misconnlinks <br>
Links connected with mismatched speed potential.</p>

<p style="margin-top: 1em">all Includes all reports above.
(errors, slowlinks, misconfiglinks, and misconnlinks)</p>

<p style="margin-top: 1em">verifylinks <br>
Verifies links against topology input.</p>

<p style="margin-top: 1em">verifyextlinks <br>
Verifies links against topology input. Limit analysis to
links external to systems.</p>

<p style="margin-top: 1em">verifyfis Verifies FIs against
topology input.</p>

<p style="margin-top: 1em">verifysws <br>
Verifies switches against topology input.</p>

<p style="margin-top: 1em">verifyrtrs <br>
Verifies routers against topology input.</p>

<p style="margin-top: 1em">verifynodes <br>
Verifies FIs, switches, and routers against topology
input.</p>

<p style="margin-top: 1em">verifysms Verifies SMs against
topology input.</p>

<p style="margin-top: 1em">verifyall Verifies links, FIs,
switches, routers, and SMs against topology input.</p>

<p style="margin-top: 1em">clearerrors <br>
Clears error counters, uses PM if available.</p>

<p style="margin-top: 1em">clearhwerrors <br>
Clears hardware error counters, bypasses PM.</p>

<p style="margin-top: 1em">clear Includes clearerrors and
clearhwerrors.</p>

<p style="margin-top: 1em">A punchlist of bad links is also
appended to the file: FF_RESULT_DIR/punchlist.csv</p>

<p style="margin-top: 1em">Examples <br>
opalinkanalysis errors <br>
opalinkanalysis errors clearerrors <br>
opalinkanalysis -p &rsquo;1:1 1:2 2:1 2:2&rsquo;</p>

<p style="margin-top: 1em">Environment Variables <br>
The following environment variables are also used by this
command:</p>

<p style="margin-top: 1em">PORTS List of ports, used in
absence of -t and -p.</p>

<p style="margin-top: 1em">PORTS_FILE <br>
File containing list of ports, used in absence of -t and
-p.</p>

<p style="margin-top: 1em">FF_TOPOLOGY_FILE <br>
File containing topology_input, used in absence of -T.</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opalinkanalysis(8)</p>
<hr>
</body>
</html>
