<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SG_READ_ATTR(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SG_READ_ATTR(8)</td>
    <td class="head-vol">SG3_UTILS</td>
    <td class="head-rtitle">SG_READ_ATTR(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
sg_read_attr - send SCSI READ ATTRIBUTE command
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>sg_read_attr</b> [ <i>--cache</i>] [<i>--enumerate</i>] [<i>--ea=EA</i>] [
  <i>--filter=FL</i>] [<i>--first=FAI</i>] [<i>--help</i>] [<i>--hex</i>] [
  <i>--in=FN</i>] [ <i>--lvn=LVN</i>] [<i>--maxlen=LEN</i>] [<i>--pn=PN</i>] [
  <i>--quiet</i>] [<i>--raw</i>] [<i>--readonly</i>] [<i>--sa=SA</i>] [
  <i>--verbose</i>] [ <i>--version</i>] <i>DEVICE</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Sends a SCSI READ ATTRIBUTE command to <i>DEVICE</i> and outputs the data
  returned. This command is found in the SPC-5 draft standard, revision 8
  (spc5r08.pdf).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Arguments to long options are mandatory for short options as well.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--cache</b></dt>
  <dd class="It-tag">sets the CACHE bit in the READ ATTRIBUTE cdb. This
      instructs the device server to return cached attributes. By default that
      bit is cleared which instructs the device server not to return cached
      attributes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>, <b>--enumerate</b></dt>
  <dd class="It-tag">enumerates all known attributes and service actions.
      Attributes include an identifier, length, format and a name as defined by
      T10. If <i>DEVICE</i> is given then it is ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b>, <b>--ea</b>=<i>EA</i></dt>
  <dd class="It-tag">where <i>EA</i> is an element address which is placed in
      the READ ATTRIBUTE cdb. This field is only found in SMC-2 and SMC-3 drafts
      for medium changers usually associated with tape libraries. By default
      this field is set to zero.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--filter</b>=<i>FL</i></dt>
  <dd class="It-tag">where <i>FL</i> is an attribute identifier in the range 0
      to 65535 or -1. Attribute identifiers are typical given in hexadecimal in
      which case the hex number should be prefixed by &quot;0x&quot; ot has a
      trailing &quot;h&quot;. &quot;-1&quot; is the default value and means
      'match all'; for all other values of <i>FL</i> on the matching attribute
      is output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b>, <b>--first</b>=<i>FAI</i></dt>
  <dd class="It-tag">where <i>FAI</i> is the &quot;first attribute
      identifier&quot; field in the cdb. It seems as though the intent of this
      field is that only attributes whose identifiers are equal to or greater
      than <i>FAI</i> are returned. The default value of <i>FAI</i> is zero.
      Attributes are returned in ascending identifier order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">output the usage message then exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b>, <b>--hex</b></dt>
  <dd class="It-tag">output the response in hexadecimal to stdout. When used
      once the whole response is output in ASCII hexadecimal with a leading
      address (starting at 0) on each line. When used twice each attribute
      descriptor in the response is output separately in hexadecimal. When used
      thrice the whole response is output in hexadecimal with no leading address
      (on each line).
    <div>&#x00A0;</div>
    Output generated by '-HHH' (or <i>--hex</i> used three times) can be
      redirected to a file. That file will be in suitable format for
      <i>--in=FN</i> to use in a later invocation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--in</b>=<i>FN</i></dt>
  <dd class="It-tag"><i>FN</i> is treated as a file name (or '-' for stdin)
      which contains ASCII hexadecimal or binary representing the response to a
      READ ATTRIBUTE command with service action 0x0 (i.e (fetch) attribute
      values). When this option is given then <i>DEVICE</i> (if also given) is
      ignored.
    <div>&#x00A0;</div>
    By default <i>FN</i> is assumed to contain ASCII hexadecimal arranged as
      bytes which a space, tab or comma delimited. All characters from (and
      including) &quot;#&quot; to the end of line are ignored. If the
      <i>--raw</i> option is also given then <i>FN</i> is assumed to contain
      binary data. When the <i>--raw</i> option is given then after processing
      the input the internal raw variable is reset to 0 so it has no effect on
      the output.
    <div>&#x00A0;</div>
    Since the READ ATTRIBUTE response does not contain the service action number
      that it is a response to, then the <i>--sa=SA</i> should be given (if not
      service action 0 (attribute values) is assumed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--lvn</b>=<i>LVN</i></dt>
  <dd class="It-tag">where <i>LVN</i> is placed in the &quot;logical volume
      number&quot; field of the cdb. The default value is zero which is required
      to be the logical volume number if the device only has one volume.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b>, <b>--maxlen</b>=<i>LEN</i></dt>
  <dd class="It-tag">where <i>LEN</i> is the (maximum) response length in bytes.
      It is placed in the cdb's &quot;allocation length&quot; field. If not
      given (or <i>LEN</i> is zero) then 8192 is used. The maximum allowed value
      of <i>LEN</i> is 1048576.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>, <b>--pn</b>=<i>PN</i></dt>
  <dd class="It-tag">where <i>PN</i> is placed in the &quot;partition
      number&quot; field of the cdb. If the <i>DEVICE</i> only has one partition
      then its partition number must be zero. The default value of <i>PN</i> is
      zero.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--quiet</b></dt>
  <dd class="It-tag">this option reduces the amount of information output. For
      example when used once ( <i>SA</i>=0), it suppresses the header line
      announcing the output of attributes; when used twice it suppresses the
      name of each attribute, leaving only the associated attribute values (or
      strings).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--raw</b></dt>
  <dd class="It-tag">output the SCSI response (i.e. the data-out buffer) in
      binary (to stdout).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b>, <b>--readonly</b></dt>
  <dd class="It-tag">open the <i>DEVICE</i> read-only (e.g. in Unix with the
      O_RDONLY flag). The default is to open it read-write.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--sa</b>=<i>SA</i></dt>
  <dd class="It-tag">where <i>SA</i> is placed on the &quot;service action&quot;
      field of the cdb. Values of 0 to 63 are accepted with a default of 0.
      spc5r08.pdf defines five service actions: 0 for attributes values ; 1 for
      an attribute list (names, not values), 2 for the logical volume list; 3
      for the partition list; 4 is restricted for SMC-3; and 5 for the supported
      attribute list.
    <div>&#x00A0;</div>
    Alternatively an acronym can be given for <i>SA</i>. The acronym should be
      one of &quot;av&quot;, &quot;al&quot;, &quot;lvl&quot;, &quot;pn&quot;,
      &quot;smc&quot; or &quot;sa&quot; for service actions 0 to 5 respectively.
      The acronyms can also be given in upper case.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b></dt>
  <dd class="It-tag">increase the level of verbosity, (i.e. debug output).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">print the version string and then exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Only tape systems seem to implement the SCSI READ ATTRIBUTE command. The vast
  majority of its definition is in the SPC standard so other device types could
  use it.
<div class="Pp"></div>
Much of the information provided by READ ATTRIBUTE can also be found in pages
  returned by LOG SENSE (see the sg_logs utility) and in the VPD pages returned
  by the INQUIRY command.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To list the attributes of a tape drive whose xxxx is /dev/sg1 the following
  could be used:
<div class="Pp"></div>
# sg_read_attr -s al /dev/sg1
<div>&#x00A0;</div>
Attribute list:
<div>&#x00A0;</div>
<br/>
 Remaining capacity in partition [MiB]
<div>&#x00A0;</div>
<br/>
 Maximum capacity in partition [MiB]
<div>&#x00A0;</div>
<br/>
 TapeAlert flags
<div>&#x00A0;</div>
<br/>
 Load count
<div>&#x00A0;</div>
<br/>
 MAM space remaining [B]
<div>&#x00A0;</div>
<br/>
 Assigning organization
<div>&#x00A0;</div>
<br/>
 Format density code
<div>&#x00A0;</div>
<br/>
 ...
<div class="Pp"></div>
To check the number of partitions:
<div class="Pp"></div>
# sg_read_attr -s pl /dev/sg1
<div>&#x00A0;</div>
Partition number list:
<div>&#x00A0;</div>
<br/>
 First partition number: 0
<div>&#x00A0;</div>
<br/>
 Number of partitions available: 2
<div class="Pp"></div>
And to see the attribute values (which is the default service action):
<div class="Pp"></div>
# sg_read_attr /dev/sg1
<div>&#x00A0;</div>
Attribute values:
<div>&#x00A0;</div>
<br/>
 Remaining capacity in partition [MiB]: 1386103
<div>&#x00A0;</div>
<br/>
 Maximum capacity in partition [MiB]: 1386103
<div>&#x00A0;</div>
<br/>
 TapeAlert flags: 0
<div>&#x00A0;</div>
<br/>
 ....
<div class="Pp"></div>
To redirect the attribute values response to a file for later decoding:
<div class="Pp"></div>
# sg_read_attr -HHH /dev/sg1 &gt; av.hex
<div class="Pp"></div>
And later the response held in the av.hex file could be decoded with:
<div class="Pp"></div>
# sg_read_attr -s av --in=av.hex
<div>&#x00A0;</div>
Attribute values:
<div>&#x00A0;</div>
<br/>
 Remaining capacity in partition [MiB]: 1386103
<div>&#x00A0;</div>
<br/>
 Maximum capacity in partition [MiB]: 1386103
<div>&#x00A0;</div>
<br/>
 TapeAlert flags: 0
<div>&#x00A0;</div>
<br/>
 ....
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The exit status of sg_read_attr is 0 when it is successful. Otherwise see the
  sg3_utils(8) man page.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Written by Douglas Gilbert.
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to &lt;dgilbert at interlog dot com&gt;.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2016 Douglas Gilbert
<div>&#x00A0;</div>
This software is distributed under a FreeBSD license. There is NO warranty; not
  even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>sg_vpd,sg_logs(sg3_utils)</b></div>
<table class="foot">
  <tr>
    <td class="foot-date">February 2016</td>
    <td class="foot-os">sg3_utils-1.42</td>
  </tr>
</table>
</body>
</html>
