<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SG_READ_ATTR(8) SG3_UTILS SG_READ_ATTR(8)</p>

<p style="margin-top: 1em">NAME <br>
sg_read_attr - send SCSI READ ATTRIBUTE command</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sg_read_attr [--cache] [--enumerate] [--ea=EA] [--filter=FL]
[--first=FAI] [--help] [--hex] [--in=FN] [--lvn=LVN]
[--maxlen=LEN] [--pn=PN] [--quiet] [--raw] [--readonly] <br>
[--sa=SA] [--verbose] [--version] DEVICE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Sends a SCSI READ ATTRIBUTE command to DEVICE and outputs
the data returned. This command is found in the SPC-5 draft
standard, revision 8 (spc5r08.pdf).</p>

<p style="margin-top: 1em">OPTIONS <br>
Arguments to long options are mandatory for short options as
well.</p>

<p style="margin-top: 1em">-c, --cache <br>
sets the CACHE bit in the READ ATTRIBUTE cdb. This instructs
the device server to return cached attributes. By default
that bit is cleared which instructs the device <br>
server not to return cached attributes.</p>

<p style="margin-top: 1em">-e, --enumerate <br>
enumerates all known attributes and service actions.
Attributes include an identifier, length, format and a name
as defined by T10. If DEVICE is given then it is
ignored.</p>

<p style="margin-top: 1em">-E, --ea=EA <br>
where EA is an element address which is placed in the READ
ATTRIBUTE cdb. This field is only found in SMC-2 and SMC-3
drafts for medium changers usually associated with <br>
tape libraries. By default this field is set to zero.</p>

<p style="margin-top: 1em">-f, --filter=FL <br>
where FL is an attribute identifier in the range 0 to 65535
or -1. Attribute identifiers are typical given in
hexadecimal in which case the hex number should be prefixed
<br>
by &quot;0x&quot; ot has a trailing &quot;h&quot;.
&quot;-1&quot; is the default value and means &rsquo;match
all&rsquo;; for all other values of FL on the matching
attribute is output.</p>

<p style="margin-top: 1em">-F, --first=FAI <br>
where FAI is the &quot;first attribute identifier&quot;
field in the cdb. It seems as though the intent of this
field is that only attributes whose identifiers are equal to
or <br>
greater than FAI are returned. The default value of FAI is
zero. Attributes are returned in ascending identifier
order.</p>

<p style="margin-top: 1em">-h, --help <br>
output the usage message then exit.</p>

<p style="margin-top: 1em">-H, --hex <br>
output the response in hexadecimal to stdout. When used once
the whole response is output in ASCII hexadecimal with a
leading address (starting at 0) on each line. When <br>
used twice each attribute descriptor in the response is
output separately in hexadecimal. When used thrice the whole
response is output in hexadecimal with no leading <br>
address (on each line). <br>
Output generated by &rsquo;-HHH&rsquo; (or --hex used three
times) can be redirected to a file. That file will be in
suitable format for --in=FN to use in a later
invocation.</p>

<p style="margin-top: 1em">-i, --in=FN <br>
FN is treated as a file name (or &rsquo;-&rsquo; for stdin)
which contains ASCII hexadecimal or binary representing the
response to a READ ATTRIBUTE command with service action 0x0
<br>
(i.e (fetch) attribute values). When this option is given
then DEVICE (if also given) is ignored. <br>
By default FN is assumed to contain ASCII hexadecimal
arranged as bytes which a space, tab or comma delimited. All
characters from (and including) &quot;#&quot; to the end of
line <br>
are ignored. If the --raw option is also given then FN is
assumed to contain binary data. When the --raw option is
given then after processing the input the internal raw <br>
variable is reset to 0 so it has no effect on the output.
<br>
Since the READ ATTRIBUTE response does not contain the
service action number that it is a response to, then the
--sa=SA should be given (if not service action 0 (attribute
<br>
values) is assumed.</p>

<p style="margin-top: 1em">-l, --lvn=LVN <br>
where LVN is placed in the &quot;logical volume number&quot;
field of the cdb. The default value is zero which is
required to be the logical volume number if the device only
has <br>
one volume.</p>

<p style="margin-top: 1em">-m, --maxlen=LEN <br>
where LEN is the (maximum) response length in bytes. It is
placed in the cdb&rsquo;s &quot;allocation length&quot;
field. If not given (or LEN is zero) then 8192 is used. The
maximum <br>
allowed value of LEN is 1048576.</p>

<p style="margin-top: 1em">-p, --pn=PN <br>
where PN is placed in the &quot;partition number&quot; field
of the cdb. If the DEVICE only has one partition then its
partition number must be zero. The default value of PN is
<br>
zero.</p>

<p style="margin-top: 1em">-q, --quiet <br>
this option reduces the amount of information output. For
example when used once (SA=0), it suppresses the header line
announcing the output of attributes; when used twice <br>
it suppresses the name of each attribute, leaving only the
associated attribute values (or strings).</p>

<p style="margin-top: 1em">-r, --raw <br>
output the SCSI response (i.e. the data-out buffer) in
binary (to stdout).</p>

<p style="margin-top: 1em">-R, --readonly <br>
open the DEVICE read-only (e.g. in Unix with the O_RDONLY
flag). The default is to open it read-write.</p>

<p style="margin-top: 1em">-s, --sa=SA <br>
where SA is placed on the &quot;service action&quot; field
of the cdb. Values of 0 to 63 are accepted with a default of
0. spc5r08.pdf defines five service actions: 0 for
attributes <br>
values ; 1 for an attribute list (names, not values), 2 for
the logical volume list; 3 for the partition list; 4 is
restricted for SMC-3; and 5 for the supported attribute <br>
list. <br>
Alternatively an acronym can be given for SA. The acronym
should be one of &quot;av&quot;, &quot;al&quot;,
&quot;lvl&quot;, &quot;pn&quot;, &quot;smc&quot; or
&quot;sa&quot; for service actions 0 to 5 respectively. The
acronyms can <br>
also be given in upper case.</p>

<p style="margin-top: 1em">-v, --verbose <br>
increase the level of verbosity, (i.e. debug output).</p>

<p style="margin-top: 1em">-V, --version <br>
print the version string and then exit.</p>

<p style="margin-top: 1em">NOTES <br>
Only tape systems seem to implement the SCSI READ ATTRIBUTE
command. The vast majority of its definition is in the SPC
standard so other device types could use it.</p>

<p style="margin-top: 1em">Much of the information provided
by READ ATTRIBUTE can also be found in pages returned by LOG
SENSE (see the sg_logs utility) and in the VPD pages
returned by the INQUIRY com&acirc; <br>
mand.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To list the attributes of a tape drive whose xxxx is
/dev/sg1 the following could be used:</p>

<p style="margin-top: 1em"># sg_read_attr -s al /dev/sg1
<br>
Attribute list: <br>
Remaining capacity in partition [MiB] <br>
Maximum capacity in partition [MiB] <br>
TapeAlert flags <br>
Load count <br>
MAM space remaining [B] <br>
Assigning organization <br>
Format density code <br>
...</p>

<p style="margin-top: 1em">To check the number of
partitions:</p>

<p style="margin-top: 1em"># sg_read_attr -s pl /dev/sg1
<br>
Partition number list: <br>
First partition number: 0 <br>
Number of partitions available: 2</p>

<p style="margin-top: 1em">And to see the attribute values
(which is the default service action):</p>

<p style="margin-top: 1em"># sg_read_attr /dev/sg1 <br>
Attribute values: <br>
Remaining capacity in partition [MiB]: 1386103 <br>
Maximum capacity in partition [MiB]: 1386103 <br>
TapeAlert flags: 0 <br>
....</p>

<p style="margin-top: 1em">To redirect the attribute values
response to a file for later decoding:</p>

<p style="margin-top: 1em"># sg_read_attr -HHH /dev/sg1
&gt; av.hex</p>

<p style="margin-top: 1em">And later the response held in
the av.hex file could be decoded with:</p>

<p style="margin-top: 1em"># sg_read_attr -s av --in=av.hex
<br>
Attribute values: <br>
Remaining capacity in partition [MiB]: 1386103 <br>
Maximum capacity in partition [MiB]: 1386103 <br>
TapeAlert flags: 0 <br>
....</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The exit status of sg_read_attr is 0 when it is successful.
Otherwise see the sg3_utils(8) man page.</p>

<p style="margin-top: 1em">AUTHORS <br>
Written by Douglas Gilbert.</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Report bugs to &lt;dgilbert at interlog dot com&gt;.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2016 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<p style="margin-top: 1em">SEE ALSO <br>
sg_vpd,sg_logs(sg3_utils)</p>

<p style="margin-top: 1em">sg3_utils-1.42 February 2016
SG_READ_ATTR(8)</p>
<hr>
</body>
</html>
