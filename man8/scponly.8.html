<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>scponly(8) BSD System Manager&rsquo;s Manual
scponly(8)</p>

<p style="margin-top: 1em">NAME <br>
scponly</p>

<p style="margin-top: 1em">SYNOPSIS <br>
scponly &acirc; limited shell for secure file transfers</p>

<p style="margin-top: 1em">DESCRIPTION <br>
scponly is an alternative &quot;shell&quot; (of sorts) for
system administrators who would like to provide access to
remote users to both read and write local files without
providing any <br>
remote execution privileges. Functionally, it is best
described as a wrapper to the trusted suite of ssh
applications.</p>

<p style="margin-top: 1em">A typical usage of scponly is in
creating a semi-public account not unlike the concept of
anonymous login for ftp. This allows an administrator to
share files in the same way an <br>
anonymous ftp setup would, only employing all the protection
that ssh provides. This is especially significant if you
consider that ftp authentications traverse public networks
in <br>
a plaintext format.</p>

<p style="margin-top: 1em">Instead of just a single
anonymous user, scponly supports configuring potentially
many users, each of which could be set up to provide access
to distinct directory trees. Aside <br>
from the installation details, each of these users would
have their default shell in /etc/passwd set to
&quot;/usr/bin/scponly&quot; (or wherever you choose to
install it). This would mean <br>
users with this shell can neither login interactively or
execute commands remotely. They can however, scp files in
and out, governed by the usual Unixish file permissions.</p>

<p style="margin-top: 1em">FEATURES <br>
&Acirc;&middot; Logging: scponly logs time, client IP
address, username, and the actual request to syslog.</p>

<p style="margin-top: 1em">&Acirc;&middot; chroot: scponly
can chroot to the user&rsquo;s home directory (or any other
directory the user has permissions for), disallowing access
to the rest of the filesystem.</p>

<p style="margin-top: 1em">&Acirc;&middot; sftp
compatibility: My testing of sftp against an scponly user
worked great. This is probably the cleanest and most usable
way for an scponly user to access files.</p>

<p style="margin-top: 1em">&Acirc;&middot; Security checks:
root login is disallowed (though root should never be
configured to be using scponly as the default shell.)</p>

<p style="margin-top: 1em">&Acirc;&middot; WinSCP 2.0
compatibility: scponly can be compiled in WinSCP
compatibility mode that will permit a
&quot;semi-interactive&quot; shell that WinSCP can use.</p>

<p style="margin-top: 1em">&Acirc;&middot; gftp
compatibility: scponly is compatible with gftp if you set
&quot;use ssh2 sftp subsys&quot; in your gftp options.</p>

<p style="margin-top: 1em">scponly doesn&rsquo;t do
anything to manage read/write permissions. The ssh
applications already do that just fine. If you use scponly,
be aware that good old Unix-style file permis&acirc; <br>
sions are still doing the work of protecting your files.</p>

<p style="margin-top: 1em">NOTES <br>
&Acirc;&middot; As recent as June 26, 2002, vulnerabilities
have been discovered in OpenSSH. There is also a SSH1
protocol vulnerability. If you&rsquo;re going to use scponly
, be aware it is no <br>
more secure than the ssh installation it runs on.</p>

<p style="margin-top: 1em">&Acirc;&middot; I&rsquo;ve since
discovered that ssh.com&rsquo;s commercial ssh offering
supports BOTH &quot;dummy users&quot; as well as
functionality paralleling scponly. I have not been able to
find any notes <br>
on these features, but I did read that they exist. I will
make a point to include more information later. It appears
that OpenSSH does not yet support these features. At <br>
this time, I have no plans to end-of-life scponly, though
ultimately, I recognize that scponly should eventually
become just a feature of whichever sshd you may run.</p>

<p style="margin-top: 1em">FILES <br>
/usr/bin/scponly The default location for the shell itself.
<br>
/usr/sbin/scponlyc The default location for the chrooted
version of scponly <br>
/etc/shells To be a proper shell, it has to be included
here.</p>

<p style="margin-top: 1em">SEE ALSO <br>
chroot(2), ssh(1), scp(1), sftp(1), shells(5), sshd(8).</p>

<p style="margin-top: 1em">AUTHORS <br>
Joe Boyle &lt;joe@sublimation.org&gt;.</p>

<p style="margin-top: 1em">LEGALITIES <br>
Copyright (C) 2001, 2002, 2003 Joe Boyle
&lt;joe@sublimation.org&gt;.</p>

<p style="margin-top: 1em">Redistribution and use in source
and binary forms, with or without modification, are
permitted provided that the following conditions are
met:</p>

<p style="margin-top: 1em">1. Redistributions of source
code must retain the above copyright notice, this list of
conditions and the following disclaimer.</p>

<p style="margin-top: 1em">2. Redistributions in binary
form must reproduce the above copyright notice, this list of
conditions and the following disclaimer in the documentation
and/or other materials pro&acirc; <br>
vided with the distribution.</p>

<p style="margin-top: 1em">THIS SOFTWARE IS PROVIDED BY THE
AUTHOR &lsquo;&lsquo;AS IS&rsquo;&rsquo; AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A <br>
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
NOT <br>
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CON&acirc; <br>
TRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.</p>

<p style="margin-top: 1em">BUGS <br>
Versions prior to 2.4 have a vulnerability wherein the
.ssh/environment file can be used to override $PATH and
$LD_LIBRARY_PATH vars, compromising the shell.</p>

<p style="margin-top: 1em">Sept 03, 2002</p>
<hr>
</body>
</html>
