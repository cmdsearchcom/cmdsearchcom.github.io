<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:11:07 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fence_zvm(8) System Manager&rsquo;s Manual
fence_zvm(8)</p>

<p style="margin-top: 1em">NAME <br>
fence_zvm - Power Fencing agent for GFS on System z z/VM
Clusters</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fence_zvm [OPTION]...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
fence_zvm is a Power Fencing agent used on a GFS virtual
machine in a System z z/VM cluster. It uses the SMAPI
interface to recycle an active image.</p>

<p style="margin-top: 1em">fence_zvm accepts options on the
command line as well as from stdin. fence_node sends the
options through stdin when it execs the agent. fence_zvm can
be run by itself with <br>
command line options which is useful for testing.</p>

<p style="margin-top: 1em">Vendor URL:
http://www.sinenomine.net</p>

<p style="margin-top: 1em">OPTIONS <br>
-o --action <br>
Fencing action: &quot;off&quot; - deactivate virtual
machine; &quot;on&quot; - activate virtual machine;
&quot;metadata&quot; - display device metadata&quot; -
describe fence agent parameters; &quot;status&quot; - <br>
state of virtual machine</p>

<p style="margin-top: 1em">--delay seconds <br>
Time to delay fencing action in seconds</p>

<p style="margin-top: 1em">-n --plug target <br>
Name of virtual machine to recycle.</p>

<p style="margin-top: 1em">-h --help <br>
Print out a help message describing available options, then
exit.</p>

<p style="margin-top: 1em">-a --ip smapi Server <br>
Name of SMAPI server virtual machine. To be consistent with
other fence agents this name is a little misleading: it is
the name of the virtual machine not its IP address <br>
or hostname.</p>

<p style="margin-top: 1em">--zvmsys z/VM System <br>
Name of z/VM on which the SMAPI server virtual machine
resides. Optional - defaults to system on which the node is
running.</p>

<p style="margin-top: 1em">-h --help <br>
Display usage information</p>

<p style="margin-top: 1em">-t --timeout = &lt; shutdown
timeout &gt; <br>
Amount of grace time to give the virtual machine to shutdown
cleanly before being forcibly terminated. Currently, this
option is ignored.</p>

<p style="margin-top: 1em">STDIN PARAMETERS <br>
agent = &lt; param &gt; <br>
This option is used by fence_node(8) and is ignored by
fence_zvm.</p>

<p style="margin-top: 1em">action = &lt; action &gt; <br>
Fencing action: &quot;off&quot; - fence off device;
&quot;metadata&quot; - display device metadata;
&quot;status&quot; - state of device</p>

<p style="margin-top: 1em">port = &lt; target &gt; <br>
Name of virtual machine to recycle.</p>

<p style="margin-top: 1em">ipaddr= &lt; server name &gt;
<br>
Name of SMAPI server virtual machine. To be consistent with
other fence agents thisname is a little misleading: it is
the name of the virtual machine not its IP address or <br>
hostname.</p>

<p style="margin-top: 1em">timeout = &lt; shutdown timeout
&gt; <br>
Amount of grace time to give the virtual machine to shutdown
cleanly before being forcibly terminated. Currently, this
option is ignored.</p>

<p style="margin-top: 1em">SEE ALSO <br>
fence(8), fenced(8), fence_node(8)</p>

<p style="margin-top: 1em">NOTES <br>
To use this agent the z/VM SMAPI service needs to be
configured to allow the virtual machine running this agent
to connect to it and issue the image_recycle operation. This
<br>
involves updating the VSMWORK1 AUTHLIST VMSYS:VSMWORK1.
file. The entry should look something similar to this:</p>

<p style="margin-top: 1em">Column 1 Column 66 Column 131
<br>
| | | <br>
V V V <br>
XXXXXXXX ALL IMAGE_OPERATIONS</p>

<p style="margin-top: 1em">Where XXXXXXX is the name of the
virtual machine where the agent resides.</p>

<p style="margin-top: 1em">In addition, the VM directory
entry that defines this virtual machine requires the IUCV
ANY statement (or IUCV &lt;userid of SMAPI Server&gt;). This
authorizes use of IUCV to connect <br>
to the SMAPI server.</p>
 
<p style="margin-top: 1em">fence_zvm(8)</p>
<hr>
</body>
</html>
