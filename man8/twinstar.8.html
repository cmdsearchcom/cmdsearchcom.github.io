<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:07 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>TWINSTAR(8) User Contributed Perl Documentation
TWINSTAR(8)</p>

<p style="margin-top: 1em">NAME <br>
twinstar - Control the Twinstar feature of a Xorcom
Astribank</p>

<p style="margin-top: 1em">SYNOPSIS <br>
twinstar {status|jump|enable-wd|disable-wd|ports}</p>

<p style="margin-top: 1em">DESCRIPTION <br>
twinstar is a tool to control the Twinstar (dual USB port)
of a Xorcom Astribank. There is a single and mandatory
argument which is the command to run. That command operates
on <br>
all the Astribanks connected to the system.</p>

<p style="margin-top: 1em">Technically all the commands are
implemented using Dahdi::Xpp::Mpp which in turn uses
astribank_tool. Thus using thus tool will require root
permissions or otherwise read/write <br>
permissions to the USB device.</p>

<p style="margin-top: 1em">The twinstar may be in watchdog
mode, which means that it will jump to the remote host if it
loses contact with the local host. This can happen if the
machine is powered down or <br>
hangs or even if the xpp drivers are unloaded. Which is why
the standard twinstar scripts put the Astribanks in twinstar
mode on startup and remove it on normal shutdown.</p>

<p style="margin-top: 1em">An Astribank will only jump to
the other host (either if asked explicitly or by the
watchdog) only if there is a different Astribank connected
to the other port and running. <br>
Which is why all of this has no effect on systems that
don&rsquo;t need this functionality.</p>

<p style="margin-top: 1em">The command are:</p>

<p style="margin-top: 1em">status <br>
Shows the current status of all Astribanks. Note that it
only shows Astribanks whose current active USB port is the
one connected to this computer.</p>

<p style="margin-top: 1em">Example output:</p>

<p style="margin-top: 1em">DEVICE PORT WATCHDOG POWER0
POWER1 <br>
usb:001/010 0 on yes yes <br>
usb:001/011 0 on yes yes</p>

<p style="margin-top: 1em">For each Astribank on the system
that has Twinstar support we get:</p>

<p style="margin-top: 1em">Device <br>
The address of the device. This is the bus address, e.g. the
address you see in lsusb / dahdi_hardware.</p>

<p style="margin-top: 1em">Port <br>
The active USB port on the Astribank. This should be always
&rsquo;0&rsquo; on the master and always 1 on the slave.</p>

<p style="margin-top: 1em">Watchdog <br>
on if the watchdog is triggered in the Atribank or off
otherwise.</p>

<p style="margin-top: 1em">Power0, Power1 <br>
Shows which ports of this Astribank are connected to a USB
port of a running computer. This only shows whether or not
the USB host provides power.</p>

<p style="margin-top: 1em">ports <br>
Shows the same &rsquo;Port&rsquo; column of the status
command.</p>

<p style="margin-top: 1em">jump <br>
Command all the Astribanks to jump to the other port. This
works regardless the watchdog mode is enabled or not. But
requires that there is power on the other port.</p>

<p style="margin-top: 1em">enable-wd <br>
Enables watchdog mode.</p>

<p style="margin-top: 1em">disable-wd <br>
Disables watchdog mode.</p>

<p style="margin-top: 1em">FILES <br>
twinstar mostly uses astribank_tool which in turn mostly
uses USB files under /dev/bus/usb .</p>

<p style="margin-top: 1em">perl v5.24.1 2017-01-08
TWINSTAR(8)</p>
<hr>
</body>
</html>
