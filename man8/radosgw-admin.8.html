<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:15:05 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>RADOSGW-ADMIN(8) Ceph RADOSGW-ADMIN(8)</p>

<p style="margin-top: 1em">NAME <br>
radosgw-admin - rados REST gateway user administration
utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
radosgw-admin command [ options ... ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
radosgw-admin is a RADOS gateway user administration
utility. It allows creating and modifying users.</p>

<p style="margin-top: 1em">COMMANDS <br>
radosgw-admin utility uses many commands for administration
purpose which are as follows:</p>

<p style="margin-top: 1em">user create <br>
Create a new user.</p>

<p style="margin-top: 1em">user modify <br>
Modify a user.</p>

<p style="margin-top: 1em">user info <br>
Display information of a user, and any potentially available
subusers and keys.</p>

<p style="margin-top: 1em">user rm <br>
Remove a user.</p>

<p style="margin-top: 1em">user suspend <br>
Suspend a user.</p>

<p style="margin-top: 1em">user enable <br>
Re-enable user after suspension.</p>

<p style="margin-top: 1em">user check <br>
Check user info.</p>

<p style="margin-top: 1em">user stats <br>
Show user stats as accounted by quota subsystem.</p>

<p style="margin-top: 1em">caps add <br>
Add user capabilities.</p>

<p style="margin-top: 1em">caps rm <br>
Remove user capabilities.</p>

<p style="margin-top: 1em">subuser create <br>
Create a new subuser (primarily useful for clients using the
Swift API).</p>

<p style="margin-top: 1em">subuser modify <br>
Modify a subuser.</p>

<p style="margin-top: 1em">subuser rm <br>
Remove a subuser.</p>

<p style="margin-top: 1em">key create <br>
Create access key.</p>

<p style="margin-top: 1em">key rm Remove access key.</p>

<p style="margin-top: 1em">bucket list <br>
List all buckets.</p>

<p style="margin-top: 1em">bucket link <br>
Link bucket to specified user.</p>

<p style="margin-top: 1em">bucket unlink <br>
Unlink bucket from specified user.</p>

<p style="margin-top: 1em">bucket stats <br>
Returns bucket statistics.</p>

<p style="margin-top: 1em">bucket rm <br>
Remove a bucket.</p>

<p style="margin-top: 1em">bucket check <br>
Check bucket index.</p>

<p style="margin-top: 1em">object rm <br>
Remove an object.</p>

<p style="margin-top: 1em">object unlink <br>
Unlink object from bucket index.</p>

<p style="margin-top: 1em">quota set <br>
Set quota params.</p>

<p style="margin-top: 1em">quota enable <br>
Enable quota.</p>

<p style="margin-top: 1em">quota disable <br>
Disable quota.</p>

<p style="margin-top: 1em">region get <br>
Show region info.</p>

<p style="margin-top: 1em">region list <br>
List all regions set on this cluster.</p>

<p style="margin-top: 1em">region set <br>
Set region info (requires infile).</p>

<p style="margin-top: 1em">region default <br>
Set default region.</p>

<p style="margin-top: 1em">region-map get <br>
Show region-map.</p>

<p style="margin-top: 1em">region-map set <br>
Set region-map (requires infile).</p>

<p style="margin-top: 1em">zone get <br>
Show zone cluster params.</p>

<p style="margin-top: 1em">zone set <br>
Set zone cluster params (requires infile).</p>

<p style="margin-top: 1em">zone list <br>
List all zones set on this cluster.</p>

<p style="margin-top: 1em">pool add <br>
Add an existing pool for data placement.</p>

<p style="margin-top: 1em">pool rm <br>
Remove an existing pool from data placement set.</p>

<p style="margin-top: 1em">pools list <br>
List placement active set.</p>

<p style="margin-top: 1em">policy Display bucket/object
policy.</p>

<p style="margin-top: 1em">log list <br>
List log objects.</p>

<p style="margin-top: 1em">log show <br>
Dump a log from specific object or (bucket + date +
bucket-id). (NOTE: required to specify formatting of date to
&quot;YYYY-MM-DD-hh&quot;)</p>

<p style="margin-top: 1em">log rm Remove log object.</p>

<p style="margin-top: 1em">usage show <br>
Show the usage information (with optional user and date
range).</p>

<p style="margin-top: 1em">usage trim <br>
Trim usage information (with optional user and date
range).</p>

<p style="margin-top: 1em">gc list <br>
Dump expired garbage collection objects (specify
--include-all to list all entries, including unexpired).</p>

<p style="margin-top: 1em">gc process <br>
Manually process garbage.</p>

<p style="margin-top: 1em">metadata get <br>
Get metadata info.</p>

<p style="margin-top: 1em">metadata put <br>
Put metadata info.</p>

<p style="margin-top: 1em">metadata rm <br>
Remove metadata info.</p>

<p style="margin-top: 1em">metadata list <br>
List metadata info.</p>

<p style="margin-top: 1em">mdlog list <br>
List metadata log.</p>

<p style="margin-top: 1em">mdlog trim <br>
Trim metadata log.</p>

<p style="margin-top: 1em">bilog list <br>
List bucket index log.</p>

<p style="margin-top: 1em">bilog trim <br>
Trim bucket index log (use start-marker, end-marker).</p>

<p style="margin-top: 1em">datalog list <br>
List data log.</p>

<p style="margin-top: 1em">datalog trim <br>
Trim data log.</p>

<p style="margin-top: 1em">opstate list <br>
List stateful operations entries (use client_id, op_id,
object).</p>

<p style="margin-top: 1em">opstate set <br>
Set state on an entry (use client_id, op_id, object,
state).</p>

<p style="margin-top: 1em">opstate renew <br>
Renew state on an entry (use client_id, op_id, object).</p>

<p style="margin-top: 1em">opstate rm <br>
Remove entry (use client_id, op_id, object).</p>

<p style="margin-top: 1em">replicalog get <br>
Get replica metadata log entry.</p>

<p style="margin-top: 1em">replicalog delete <br>
Delete replica metadata log entry.</p>

<p style="margin-top: 1em">orphans find <br>
Init and run search for leaked rados objects</p>

<p style="margin-top: 1em">orphans finish <br>
Clean up search for leaked rados objects</p>

<p style="margin-top: 1em">OPTIONS <br>
-c ceph.conf, --conf=ceph.conf <br>
Use ceph.conf configuration file instead of the default
/etc/ceph/ceph.conf to determine monitor addresses during
startup.</p>

<p style="margin-top: 1em">-m monaddress[:port] <br>
Connect to specified monitor (instead of looking through
ceph.conf).</p>

<p style="margin-top: 1em">--uid=uid <br>
The radosgw user ID.</p>

<p style="margin-top: 1em">--subuser=&lt;name&gt; <br>
Name of the subuser.</p>

<p style="margin-top: 1em">--email=email <br>
The e-mail address of the user.</p>

<p style="margin-top: 1em">--display-name=name <br>
Configure the display name of the user.</p>

<p style="margin-top: 1em">--access-key=&lt;key&gt; <br>
S3 access key.</p>

<p style="margin-top: 1em">--gen-access-key <br>
Generate random access key (for S3).</p>

<p style="margin-top: 1em">--secret=secret <br>
The secret associated with a given key.</p>

<p style="margin-top: 1em">--gen-secret <br>
Generate random secret key.</p>

<p style="margin-top: 1em">--key-type=&lt;type&gt; <br>
key type, options are: swift, S3.</p>

<p style="margin-top: 1em">--temp-url-key[-2]=&lt;key&gt;
<br>
Temporary url key.</p>

<p style="margin-top: 1em">--system <br>
Set the system flag on the user.</p>

<p style="margin-top: 1em">--bucket=bucket <br>
Specify the bucket name.</p>

<p style="margin-top: 1em">--object=object <br>
Specify the object name.</p>

<p style="margin-top: 1em">--date=yyyy-mm-dd <br>
The date needed for some commands.</p>

<p style="margin-top: 1em">--start-date=yyyy-mm-dd <br>
The start date needed for some commands.</p>

<p style="margin-top: 1em">--end-date=yyyy-mm-dd <br>
The end date needed for some commands.</p>

<p style="margin-top: 1em">--shard-id=&lt;shard-id&gt; <br>
Optional for mdlog list. Required for mdlog trim, replica
mdlog get/delete, replica datalog get/delete.</p>

<p style="margin-top: 1em">--auth-uid=auid <br>
The librados auid.</p>

<p style="margin-top: 1em">--purge-data <br>
Remove user data before user removal.</p>

<p style="margin-top: 1em">--purge-keys <br>
When specified, subuser removal will also purge all the
subuser keys.</p>

<p style="margin-top: 1em">--purge-objects <br>
Remove all objects before bucket removal.</p>

<p style="margin-top: 1em">--metadata-key=&lt;key&gt; <br>
Key to retrieve metadata from with metadata get.</p>

<p style="margin-top: 1em">--rgw-region=&lt;region&gt; <br>
Region in which radosgw is running.</p>

<p style="margin-top: 1em">--rgw-zone=&lt;zone&gt; <br>
Zone in which radosgw is running.</p>

<p style="margin-top: 1em">--fix Besides checking bucket
index, will also fix it.</p>

<p style="margin-top: 1em">--check-objects <br>
bucket check: Rebuilds bucket index according to actual
objects state.</p>

<p style="margin-top: 1em">--format=&lt;format&gt; <br>
Specify output format for certain operations: xml, json.</p>

<p style="margin-top: 1em">--sync-stats <br>
Option to &rsquo;user stats&rsquo;, update user stats with
current stats reported by user&rsquo;s buckets indexes.</p>

<p style="margin-top: 1em">--show-log-entries=&lt;flag&gt;
<br>
Enable/disable dump of log entries on log show.</p>

<p style="margin-top: 1em">--show-log-sum=&lt;flag&gt; <br>
Enable/disable dump of log summation on log show.</p>

<p style="margin-top: 1em">--skip-zero-entries <br>
Log show only dumps entries that don&rsquo;t have zero value
in one of the numeric field.</p>

<p style="margin-top: 1em">--infile <br>
Specify a file to read in when setting data.</p>

<p style="margin-top: 1em">--state=&lt;state string&gt;
<br>
Specify a state for the opstate set command.</p>

<p style="margin-top: 1em">--replica-log-type <br>
Replica log type (metadata, data, bucket), required for
replica log operations.</p>

<p style="margin-top: 1em">--categories=&lt;list&gt; <br>
Comma separated list of categories, used in usage show.</p>

<p style="margin-top: 1em">--caps=&lt;caps&gt; <br>
List of caps (e.g., &quot;usage=read, write;
user=read&quot;.</p>

<p style="margin-top: 1em">--yes-i-really-mean-it <br>
Required for certain operations.</p>

<p style="margin-top: 1em">QUOTA OPTIONS <br>
--max-objects <br>
Specify max objects (negative value to disable).</p>

<p style="margin-top: 1em">--max-size <br>
Specify max size (in bytes, negative value to disable).</p>

<p style="margin-top: 1em">--quota-scope <br>
Scope of quota (bucket, user).</p>

<p style="margin-top: 1em">ORPHANS SEARCH OPTIONS <br>
--pool Data pool to scan for leaked rados objects</p>

<p style="margin-top: 1em">--num-shards <br>
Number of shards to use for keeping the temporary scan
info</p>

<p style="margin-top: 1em">--orphan-stale-secs <br>
Number of seconds to wait before declaring an object to be
an orphan. Default is 86400 (24 hours).</p>

<p style="margin-top: 1em">--job-id <br>
Set the job id (for orphans find)</p>

<p style="margin-top: 1em">--max-concurrent-ios <br>
Maximum concurrent ios for orphans find. Default is 32.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Generate a new user:</p>

<p style="margin-top: 1em">$ radosgw-admin user create
--display-name=&quot;johnny rotten&quot; --uid=johnny <br>
{ &quot;user_id&quot;: &quot;johnny&quot;, <br>
&quot;rados_uid&quot;: 0, <br>
&quot;display_name&quot;: &quot;johnny rotten&quot;, <br>
&quot;email&quot;: &quot;&quot;, <br>
&quot;suspended&quot;: 0, <br>
&quot;subusers&quot;: [], <br>
&quot;keys&quot;: [ <br>
{ &quot;user&quot;: &quot;johnny&quot;, <br>
&quot;access_key&quot;: &quot;TCICW53D9BQ2VGC46I44&quot;,
<br>
&quot;secret_key&quot;:
&quot;tfm9aHMI8X76L3UdgE+ZQaJag1vJQmE6HDb5Lbrz&quot;}], <br>
&quot;swift_keys&quot;: []}</p>

<p style="margin-top: 1em">Remove a user:</p>

<p style="margin-top: 1em">$ radosgw-admin user rm
--uid=johnny</p>

<p style="margin-top: 1em">Remove a user and all associated
buckets with their contents:</p>

<p style="margin-top: 1em">$ radosgw-admin user rm
--uid=johnny --purge-data</p>

<p style="margin-top: 1em">Remove a bucket:</p>

<p style="margin-top: 1em">$ radosgw-admin bucket unlink
--bucket=foo</p>

<p style="margin-top: 1em">Show the logs of a bucket from
April 1st, 2012:</p>

<p style="margin-top: 1em">$ radosgw-admin log show
--bucket=foo --date=2012-04-01-01
--bucket-id=default.14193.1</p>

<p style="margin-top: 1em">Show usage information for user
from March 1st to (but not including) April 1st, 2012:</p>

<p style="margin-top: 1em">$ radosgw-admin usage show
--uid=johnny --start-date=2012-03-01
--end-date=2012-04-01</p>

<p style="margin-top: 1em">Show only summary of usage
information for all users:</p>

<p style="margin-top: 1em">$ radosgw-admin usage show
--show-log-entries=false</p>

<p style="margin-top: 1em">Trim usage information for user
until March 1st, 2012:</p>

<p style="margin-top: 1em">$ radosgw-admin usage trim
--uid=johnny --end-date=2012-04-01</p>

<p style="margin-top: 1em">AVAILABILITY <br>
radosgw-admin is part of Ceph, a massively scalable,
open-source, distributed storage system. Please refer to the
Ceph documentation at http://ceph.com/docs for more
informa&acirc; <br>
tion.</p>

<p style="margin-top: 1em">SEE ALSO <br>
ceph(8) radosgw(8)</p>

<p style="margin-top: 1em">COPYRIGHT <br>
2010-2014, Inktank Storage, Inc. and contributors. Licensed
under Creative Commons BY-SA</p>

<p style="margin-top: 1em">dev May 15, 2017
RADOSGW-ADMIN(8)</p>
<hr>
</body>
</html>
