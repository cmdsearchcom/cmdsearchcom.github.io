<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:24 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PAM_SNAPPER(8) Filesystem Snapshot Management
PAM_SNAPPER(8)</p>

<p style="margin-top: 1em">NAME <br>
pam_snapper - PAM module which creates filesystem snapshots
via &quot;snapper&quot;</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pam_snapper.so [debug] [homeprefix=prefix]
[ignoreservices=services] [ignoreusers=users] [rootasroot]
[ignoreroot] [openonly] [closeonly] [cleanup=algorithm]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Create a snapshot at every login of a user, thus he or she
always has a save starting point.</p>

<p style="margin-top: 1em">As many users do not logout for
some time, it is a good idea to enable snapper&rsquo;s time
based snapshots in addition.</p>

<p style="margin-top: 1em">OPTIONS <br>
debug <br>
Switch on debugging in the module.</p>

<p style="margin-top: 1em">homeprefix=prefix <br>
Prefix for the name of the snapper configuration. The
username will be appended to this prefix.</p>

<p style="margin-top: 1em">Default: &quot;home_&quot;</p>

<p style="margin-top: 1em">ignoreservices=comma separated
list of services <br>
Default: &quot;crond&quot;</p>

<p style="margin-top: 1em">ignoreusers=comma separated list
of users <br>
Default: (none)</p>

<p style="margin-top: 1em">rootasroot <br>
Perform a snapshot using the snapper configuration
&quot;root&quot; if the user &quot;root&quot; logs in. In
other words: the homeprefix is not used in this case. As the
snapper configuration <br>
&quot;root&quot; is used for the system (the root
filesystem), this means that with every login of the user
&quot;root&quot; the complete &quot;/&quot; filesystem will
be snapshotted. This can be useful <br>
to help administrators rolling back in case their activity /
configuration changes have been accidentally wrong.</p>

<p style="margin-top: 1em">&quot;rootasroot&quot; and
&quot;ignoreroot&quot; are mutually exclusive.</p>

<p style="margin-top: 1em">ignoreroot <br>
No snapshot is taken, if the user &quot;root&quot;
opens/closes a session.</p>

<p style="margin-top: 1em">&quot;rootasroot&quot; and
&quot;ignoreroot&quot; are mutually exclusive.</p>

<p style="margin-top: 1em">openonly <br>
Only create a single snapshot when opening the PAM
session.</p>

<p style="margin-top: 1em">Default: create pre- and
post-snapshots</p>

<p style="margin-top: 1em">closeonly <br>
Only create a single snapshot when closing the PAM
session.</p>

<p style="margin-top: 1em">Default: create pre- and
post-snapshots</p>

<p style="margin-top: 1em">cleanup=cleanup-algorithm <br>
Set snapper cleanup algorithm.</p>

<p style="margin-top: 1em">Default: (none)</p>

<p style="margin-top: 1em">MODULE TYPES PROVIDED <br>
Only the module type &quot;session&quot; is provided.</p>

<p style="margin-top: 1em">RETURN VALUES <br>
PAM_SUCCESS <br>
pam_snapper will always return PAM_SUCCESS, to not prevent
users from login, in case a snapshot fails. This may change
in the future.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Basic usage <br>
1. Create a btrfs subvolume for the new user and a snapper
configuration, e.g. using the tool
/usr/lib/pam_snapper/pam_snapper_useradd.sh.</p>

<p style="margin-top: 1em">2. Add the following line to
/etc/pam.d/common-session:</p>

<p style="margin-top: 1em">session optional
pam_snapper.so</p>

<p style="margin-top: 1em">SEE ALSO <br>
snapper(8), pam.conf(5), pam(8), pam_snapper_homeconvert,
pam_snapper_pamconfig, pam_snapper_useradd,
pam_snapper_userdel</p>

<p style="margin-top: 1em">HOMEPAGE <br>
http://snapper.io/</p>

<p style="margin-top: 1em">AUTHORS <br>
pam-snapper was written by Matthias G. Eckermann
&lt;mge@suse.com&gt; as part of SUSE Hackweek#9 in April
2013.</p>

<p style="margin-top: 1em">This module would not have been
possible without the work of Arvin Schnell on the snapper
project. pam-snapper inherits DBUS handling from
&quot;snapper_dbus_cli.c&quot; by David <br>
Disseldorp.</p>

<p style="margin-top: 1em">The module builds on the Linux
PAM stack and its documentation, written by Thorsten
Kukuk.</p>

<p style="margin-top: 1em">LICENSE <br>
Copyright (c) 2013 SUSE</p>

<p style="margin-top: 1em">All Rights Reserved.</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
version 2 of the GNU General Public License as published by
the Free Software <br>
Foundation.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. <br>
See the GNU General Public License for more details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, contact SUSE.</p>

<p style="margin-top: 1em">To contact SUSE about this file
by physical or electronic mail, you may find current contact
information at www.suse.com.</p>

<p style="margin-top: 1em">0.2.8 2013-05-23
PAM_SNAPPER(8)</p>
<hr>
</body>
</html>
