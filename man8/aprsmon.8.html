<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>APRSMON(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">APRSMON(8)</td>
    <td class="head-vol">Linux Programmer's Manual</td>
    <td class="head-rtitle">APRSMON(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
aprsmon - monitor APRS AX.25 traffic for javAPRS
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>aprsmon [-a] [-m] [-r] [-k minutes] [-p port] [-t title] [-i infofile]</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Aprsmon</b> uses SOCK_PACKET facilities to provide a network monitor of all
  AX.25 UI text traffic heard by the system. It is based on listen(1).
<div class="Pp"></div>
<b>Aprsmon</b> collects (-m) or displays standard AX.25 UI text frames in a
  format similar to that output by a standard TNC in &quot;Monitor ON&quot; mode
  and is intended to be used with programs like javAPRS which wish to see a TNC
  data stream over a TCP connection. When the <b>aprsmon</b> master has been
  running for a while and a new <b>aprsmon</b> slave starts up, first all saved
  up reports are sent, then a title line indicating the beginning of live data
  is sent, and new reports are sent as received.
<div class="Pp"></div>
Compressed position and telemetry reports as generated by the APRS Mic Encoder
  are translated into the conventional uncompressed APRS Micro-Interface-Module
  (MIM) telemtry format so that these stations are visible in javAPRS. Reports
  containing a TheNet X1J4 beacon header are also edited to strip off the header
  making these nodes visible in javAPRS as well.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">Allow for the monitoring of outgoing frames as well as
      incoming ones.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">Choose &quot;raw&quot; mode which allows non-printable data
      through.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p port</b></dt>
  <dd class="It-tag">Monitor only those frames received on a particular port, by
      default all AX.25 interfaces are monitored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag">&quot;Master&quot; mode. Retain monitored data for the
      number of minutes specified with the <b>-k</b> option in a shared memory
      segment.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k minutes</b></dt>
  <dd class="It-tag">Retain monitored packets going back the given number of
      minutes. Default is 30.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t title</b></dt>
  <dd class="It-tag">Sets the <i>javAPRS</i> or <i>aprsd</i> title string.
      Default is &quot;Live data from Linux.&quot; For use with aprsd the format
      must be something like &quot;aprsmon v2.4.4 padd padb.&quot; pada and padb
      can be anything, and are ignored but you *must* have 4 words in all.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i infofile</b></dt>
  <dd class="It-tag"><i>Infofile</i> is the path to the file that the aprsmon
      master writes the shared memory segment and semaphore id's into. Default
      is &quot;/var/ax25/aprsmon.info.&quot;</dd>
</dl>
<h1 class="Sh" title="Sh" id="javAPRS_CONFIGURATION"><a class="selflink" href="#javAPRS_CONFIGURATION">javAPRS
  CONFIGURATION</a></h1>
Set up one <i>aprsmon</i> master running on your system to collect historical
  data going back a while. You will probably want to set up an /etc/rc.d/init.d
  script for this.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
aprsmon -a -m&amp;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Add an entry into /etc/services with the port number you want javAPRS to connect
  on. For example:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
aprs		14439/tcp	# APRS monitor on 144.39
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Add an entry into /etc/inetd.conf for this service:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
aprs stream tcp nowait root /usr/sbin/aprsmon aprsmon -a
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To test, simply &quot;telnet localhost aprs&quot;. To use with javAPRS, set, for
  example,
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
&lt;PARAM name = &quot;dataFile1&quot; value = &quot;netc:14439:localhost&quot;&gt;
</pre>
in your HTML file as described in the <b>javAPRS</b> documentation, and then use
  <b>appletviewer</b> to run javAPRS:
<pre>
appletviewer mydemo.html
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Mic-E_to_MIM_Translation"><a class="selflink" href="#Mic-E_to_MIM_Translation">Mic-E
  to MIM Translation</a></h1>
The Mic-E reduces the duration of packet noise on a voice frequency by encoding
  its data in a compressed form, some of which is binary. Some APRS-decoding
  software, notably javAPRS, is unable to deal with this data. To solve this
  problem <b>aprsmon</b> expands the Mic-E packet into one or two MIM packets as
  follows:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
@ <b>ddhhmm</b>z<b>DDMM.hhN/DDDMM.hhW$cse/spd/E</b>&gt;mon/M<b>m</b>/<b>status</b>
T#MIC, <b>aaabbbcccdddeeefffComments</b>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ddhhmm</b></dt>
  <dd class="It-tag">is the UTC day and time the packet was received by the host
      running <b>aprsmon.</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DDMM.hhN</b></dt>
  <dd class="It-tag">is the latitude.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/</b></dt>
  <dd class="It-tag">is the symbol table selection (/ or \).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DDDMM.hhW</b></dt>
  <dd class="It-tag">is the longitude.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$</b></dt>
  <dd class="It-tag">is the symbol.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cse,spd</b></dt>
  <dd class="It-tag">are course and speed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>E</b></dt>
  <dd class="It-tag">is the type of Mic-Encoder:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
E - TAPR Mic-Encoder
T - Kenwood TH-D7
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>m</b></dt>
  <dd class="It-tag">is the status message number, and</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>status</b></dt>
  <dd class="It-tag">is the status message number expanded as follows:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
0 -  Off duty..
1 -  Enroute...
2 -  In Service
3 -  Returning.
4 -  Committed.
5 -  Special...
6 -  PRIORITY..
7 -  EMERGENCY.
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>aaa,bbb,ccc,ddd,eee,fff</b></dt>
  <dd class="It-tag">are the values of the telemetry channels.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>/etc/ax25/axports</b> <b>/var/ax25/aprsmon.info</b>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>call</b>(1), <b>listen</b>(1), <b>beacon</b>(1), <b>ax25</b>(4),
  <b>axattach</b>(8), <b>http://www.bridge.net/~sdimse/javAPRS.html,</b>
  <b>http://www.tapr.org,</b> <b>http://www.aprs.net,</b>
  <b>MIC-E.TXT,</b>TELEMTRY.TXT,<b>PROTOCOL.TXT</b>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<pre>
Alan Crosswell, n2ygk@weca.org
</pre>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">9 February 1999</td>
    <td class="foot-os">Linux</td>
  </tr>
</table>
</body>
</html>
