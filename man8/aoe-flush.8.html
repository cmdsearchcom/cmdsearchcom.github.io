<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>aoe-flush(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">aoe-flush(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">aoe-flush(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
aoe-flush - flush the down devices out of the aoe driver
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<b>aoe-flush [-a]</b>
<b>aoe-flush dev1 [dev2 ...]</b>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>aoe-flush</i> command tells the aoe driver to remove devices from the
  system and forget about them. Normally the aoe driver will remember all
  devices it has seen until the module is unloaded. By default, <i>aoe-flush</i>
  will only flush downed devices. With the <b>-a</b> flag all devices are
  candidates for removal.
<div class="Pp"></div>
<i>aoe-flush</i> will not remove devices that are in use. This includes devices
  in the closewait state or those in the process of being installed.
<div class="Pp"></div>
By specifying a series of specific aoe devices, e.g., <b>e7.0 e3.2</b>, it is
  possible to ask the aoe driver to forget these devices. This feature may be
  convenient after a temporary AoE target is no longer being used.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">The <b>-a</b> option tells the aoe driver to forget all
      unused devices.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>
nai# aoe-stat | grep e12.0
     e12.0         0.000GB   eth1 down          
nai# aoe-flush
nai# aoe-stat | grep e12.0
</pre>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Flushed devices may reappear when they are discovered by the periodic discovery
  beacon. <i>aoe-discover</i> may be used to force this behaviour.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>aoe-stat</i>(8), <i>aoe-discover</i>(8), <i>aoetools</i>(8).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Sam Hopkins (sah@coraid.com)</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
