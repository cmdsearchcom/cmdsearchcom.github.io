<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>o2cb(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">o2cb(8)</td>
    <td class="head-vol">OCFS2 Manual Pages</td>
    <td class="head-rtitle">o2cb(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
o2cb - Cluster registration utility for the <i>O2CB</i> cluster stack.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>o2cb</b> [<b>--config-file</b>=path] [-<b>h</b>|<b>--help</b>]
  [-<b>v</b>|<b>--verbose</b>] [ <b>-V</b>|<b>--version</b>] <i>COMMAND</i>
  [<i>ARGS</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>o2cb(8)</b> is used to add, remove and list the information in the
  <b>O2CB</b> cluster configuration file. This utility is also used to register
  and unregister the cluster, as well as start and stop global heartbeat.
<div style="height: 1.00em;">&#x00A0;</div>
The default location of the configuration file, /etc/ocfs2/cluster.conf, can be
  overridden using the --config-file option.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--config-file</b> <i>config-file</i></dt>
  <dd class="It-tag">Specify a path to the configuration file. If not provided,
      it will use the default path of /etc/ocfs2/cluster.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Verbose mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Help.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">Show version and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="O2CB_COMMANDS"><a class="selflink" href="#O2CB_COMMANDS">O2CB
  COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-cluster</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Adds a cluster to the configuration file. The <b>O2CB</b>
      configuration file can hold multiple clusters. However, only one cluster
      can be active at any time.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>remove-cluster</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Removes a cluster from the configuration file. This command
      removes all the nodes and heartbeat regions assigned to the cluster.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-node</b> <i>cluster-name</i> <i>node-name</i>
    [<b>--ip</b> <i>ip-address</i>] [<b>--port</b> <i>port</i>] [<b>--number</b>
    <i>node-number</i>]</dt>
  <dd class="It-tag">Adds a node to the cluster in the configuration file. It
      accepts three optional arguments. If not provided, the <i>ip-address</i>
      defaults to the one assigned to the <i>node-name</i>, <i>port</i> to 7777,
      and <i>node-number</i> to the lowest unused node number.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>remove-node</b> <i>cluster-name</i>
    <i>node-name</i></dt>
  <dd class="It-tag">Removes a node from the cluster in the configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-heartbeat</b> <i>cluster-name</i>
    [<i>uuid</i>|<i>device</i>]</dt>
  <dd class="It-tag">Adds a heartbeat region to the cluster in the configuration
      file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>remove-heartbeat</b> <i>cluster-name</i>
    [<i>uuid</i>|<i>device</i>]</dt>
  <dd class="It-tag">Removes a heartbeat region from the cluster in the
      configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>heartbeat-mode</b> <i>cluster-name</i>
    [<b>local</b>|<b>global</b>]</dt>
  <dd class="It-tag">Sets the heartbeat mode for the cluster in the
      configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list-clusters</b></dt>
  <dd class="It-tag">Lists all the cluster names in the configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list-cluster</b> <i>cluster-name</i>
    <b>--oneline</b></dt>
  <dd class="It-tag">Lists all the nodes and heartbeat regions associated with
      the cluster in the configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list-nodes</b> <i>cluster-name</i> <b>--oneline</b></dt>
  <dd class="It-tag">Lists all the nodes associated with the cluster in the
      configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list-heartbeats</b> <i>cluster-name</i>
    <b>--oneline</b></dt>
  <dd class="It-tag">Lists all the heartbeat regions associated with the cluster
      in the configuration file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>register-cluster</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Registers the cluster listed in the configuration file with
      configfs. If called when the cluster is already registered, it will update
      configfs with the current configuration.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unregister-cluster</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Unregisters the cluster from configfs.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>start-heartbeat</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Starts global heartbeat on all regions for the cluster as
      listed in the configuration file. If repeated, it will start heartbeat on
      new regions and stop on regions since removed. It will silently exit if
      global heartbeat has not been enabled.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stop-heartbeat</b> <i>cluster-name</i></dt>
  <dd class="It-tag">Stops global heartbeat on all regions for the cluster. It
      will silently exit if global heartbeat has not been enabled.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cluster-status</b> <i>[cluster-name]</i></dt>
  <dd class="It-tag">Shows whether the given cluster is offline or online. If no
      cluster is provided, it shows the currently active cluster, if any.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
To create a cluster, mycluster having two nodes, node1 and node2, do:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ o2cb add-cluster mycluster
$ o2cb add-node mycluster node1 --ip 10.10.10.1
$ o2cb add-node mycluster node2 --ip 10.10.10.2
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To specify a global heartbeat device, /dev/sda1, do:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ o2cb add-heartbeat mycluster /dev/sda1
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To enable global heartbeat, do:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ o2cb heartbeat-mode mycluster global
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>o2cb(7)</b> <b>o2cb.sysconfig(5)</b> <b>ocfs2.cluster.conf(5)</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Oracle Corporation
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2010, 2012 Oracle. All rights reserved.</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 2012</td>
    <td class="foot-os">Version 1.8.4</td>
  </tr>
</table>
</body>
</html>
