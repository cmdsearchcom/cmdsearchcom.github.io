<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:59 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>o2cb(8) OCFS2 Manual Pages o2cb(8)</p>

<p style="margin-top: 1em">NAME <br>
o2cb - Cluster registration utility for the O2CB cluster
stack.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
o2cb [--config-file=path] [-h|--help] [-v|--verbose]
[-V|--version] COMMAND [ARGS]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
o2cb(8) is used to add, remove and list the information in
the O2CB cluster configuration file. This utility is also
used to register and unregister the cluster, as well as
start <br>
and stop global heartbeat.</p>

<p style="margin-top: 1em">The default location of the
configuration file, /etc/ocfs2/cluster.conf, can be
overridden using the --config-file option.</p>

<p style="margin-top: 1em">OPTIONS <br>
--config-file config-file <br>
Specify a path to the configuration file. If not provided,
it will use the default path of /etc/ocfs2/cluster.conf.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Verbose mode.</p>

<p style="margin-top: 1em">-h, --help <br>
Help.</p>

<p style="margin-top: 1em">-V, --version <br>
Show version and exit.</p>

<p style="margin-top: 1em">O2CB COMMANDS <br>
add-cluster cluster-name <br>
Adds a cluster to the configuration file. The O2CB
configuration file can hold multiple clusters. However, only
one cluster can be active at any time.</p>

<p style="margin-top: 1em">remove-cluster cluster-name <br>
Removes a cluster from the configuration file. This command
removes all the nodes and heartbeat regions assigned to the
cluster.</p>

<p style="margin-top: 1em">add-node cluster-name node-name
[--ip ip-address] [--port port] [--number node-number] <br>
Adds a node to the cluster in the configuration file. It
accepts three optional arguments. If not provided, the
ip-address defaults to the one assigned to the node-name,
<br>
port to 7777, and node-number to the lowest unused node
number.</p>

<p style="margin-top: 1em">remove-node cluster-name
node-name <br>
Removes a node from the cluster in the configuration
file.</p>

<p style="margin-top: 1em">add-heartbeat cluster-name
[uuid|device] <br>
Adds a heartbeat region to the cluster in the configuration
file.</p>

<p style="margin-top: 1em">remove-heartbeat cluster-name
[uuid|device] <br>
Removes a heartbeat region from the cluster in the
configuration file.</p>

<p style="margin-top: 1em">heartbeat-mode cluster-name
[local|global] <br>
Sets the heartbeat mode for the cluster in the configuration
file.</p>

<p style="margin-top: 1em">list-clusters <br>
Lists all the cluster names in the configuration file.</p>

<p style="margin-top: 1em">list-cluster cluster-name
--oneline <br>
Lists all the nodes and heartbeat regions associated with
the cluster in the configuration file.</p>

<p style="margin-top: 1em">list-nodes cluster-name
--oneline <br>
Lists all the nodes associated with the cluster in the
configuration file.</p>

<p style="margin-top: 1em">list-heartbeats cluster-name
--oneline <br>
Lists all the heartbeat regions associated with the cluster
in the configuration file.</p>

<p style="margin-top: 1em">register-cluster cluster-name
<br>
Registers the cluster listed in the configuration file with
configfs. If called when the cluster is already registered,
it will update configfs with the current configu&acirc; <br>
ration.</p>

<p style="margin-top: 1em">unregister-cluster cluster-name
<br>
Unregisters the cluster from configfs.</p>

<p style="margin-top: 1em">start-heartbeat cluster-name
<br>
Starts global heartbeat on all regions for the cluster as
listed in the configuration file. If repeated, it will start
heartbeat on new regions and stop on regions since <br>
removed. It will silently exit if global heartbeat has not
been enabled.</p>

<p style="margin-top: 1em">stop-heartbeat cluster-name <br>
Stops global heartbeat on all regions for the cluster. It
will silently exit if global heartbeat has not been
enabled.</p>

<p style="margin-top: 1em">cluster-status [cluster-name]
<br>
Shows whether the given cluster is offline or online. If no
cluster is provided, it shows the currently active cluster,
if any.</p>

<p style="margin-top: 1em">EXAMPLE <br>
To create a cluster, mycluster having two nodes, node1 and
node2, do:</p>

<p style="margin-top: 1em">$ o2cb add-cluster mycluster
<br>
$ o2cb add-node mycluster node1 --ip 10.10.10.1 <br>
$ o2cb add-node mycluster node2 --ip 10.10.10.2</p>

<p style="margin-top: 1em">To specify a global heartbeat
device, /dev/sda1, do:</p>

<p style="margin-top: 1em">$ o2cb add-heartbeat mycluster
/dev/sda1</p>

<p style="margin-top: 1em">To enable global heartbeat,
do:</p>

<p style="margin-top: 1em">$ o2cb heartbeat-mode mycluster
global</p>

<p style="margin-top: 1em">SEE ALSO <br>
o2cb(7) o2cb.sysconfig(5) ocfs2.cluster.conf(5)</p>

<p style="margin-top: 1em">AUTHORS <br>
Oracle Corporation</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2010, 2012 Oracle. All rights
reserved.</p>

<p style="margin-top: 1em">Version 1.8.4 January 2012
o2cb(8)</p>
<hr>
</body>
</html>
