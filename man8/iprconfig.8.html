<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>IPRCONFIG(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IPRCONFIG(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">IPRCONFIG(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
iprconfig - IBM Power RAID storage adapter configuration/recovery utility
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>iprconfig [-e editor] [-k dir] [-c command]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>iprconfig --version --debug --force</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>iprconfig</b> is used to configure IBM Power RAID storage adapters, display
  information about them, and to perform adapter and disk unit recovery. The
  menu options are:
<div class="Pp"></div>
<b>1. Display hardware status.</b>
<div>&#x00A0;</div>
This option can be used to display various information regarding the IBM Power
  RAID adapters attached to the system and the disk units controlled by them.
  For each adapter and disk unit, their /dev name, physical location,
  description, vendor/product ID, and hardware status will be available. Beside
  each resource is an OPT field. By entering a 1 beside any resource, detailed
  information about that resource can be obtained. For an adapter resource, this
  will display the adapter firmware version and the physical location amongst
  other things.
<div class="Pp"></div>
<b>2. Work with Disk Arrays</b>
<div>&#x00A0;</div>
This option will present a second menu containing disk array related commands.
<div class="Pp"></div>
<b>Display disk array status</b> is used to display the status of disk arrays on
  the system.
<div class="Pp"></div>
<b>Create a disk array</b> is used to create a disk array.
<div class="Pp"></div>
<b>Delete a disk array</b> is used to delete disk arrays. Selecting this option
  will provide you with a list of disk arrays which can be deleted.
<div class="Pp"></div>
<b>Add a device to a disk array</b> is used to include devices of similar
  capacity into an existing disk array. This function is currently only
  supported for RAID 5 and RAID 6 disk arrays.
<div class="Pp"></div>
<b>Format device for advanced function</b> is used to format disks to 522
  bytes/sector so that they may be used in a disk array. Only disks which are
  not formatted for advanced function or are formatted for advanced function but
  are not known to be zeroed will be available for selection for this function.
<div class="Pp"></div>
<b>Format device for JBOD function (512)</b> is used to format disks to 512
  bytes/sector so that they may be used as standalone disks. Only disks which
  are not formatted for JBOD function or are formatted for JBOD function and are
  in the Format Required state will be available for this function.
<div class="Pp"></div>
<b>Work with hot spares</b> is used to create a hot spare which designates a
  device as a dedicated hot spare. It is also used to delete a hot spare which
  unconfigures a previously configured hot spare.
<div class="Pp"></div>
<b>Work with asymmetric access</b> is used to select which path of a disk array
  will be the primary path in a dual controller environment. Asymmetric Access
  must be enabled on the adapter first. Not all adapters support asymmetric
  access and adapters that do provide support may require updated microcode.
<div class="Pp"></div>
<b>Force RAID Consistency Check</b> is used to force a consistency check on a
  RAID array. All ipr adapters continually perform background consistency
  checking when idle. This option can be used to force a consistency check to be
  performed.
<div class="Pp"></div>
<b>Migrate disk array protection</b> is used to change the RAID protection level
  for an array to another supported level. In some cases, this will require
  adding more disks to the array. In other cases, disks will be freed.
<div class="Pp"></div>
<b>3. Work with disk unit recovery</b> is used to perform the following disk
  unit recovery actions:
<div class="Pp"></div>
<b>Concurrent add device</b> is used to concurrently add a new disk to a running
  system. This feature is only supported with SES (SCSI Enclosure Services)
  packaging.
<div class="Pp"></div>
<b>Concurrent remove device</b> is used to concurrently remove a disk from a
  running system. This feature is only supported with SES (SCSI Enclosure
  Services) packaging.
<div class="Pp"></div>
<b>Initialize and format disk unit</b> is used to issue a SCSI format command to
  attached devices. A format unit command has special meaning to the adapter and
  is used as a service action for certain error conditions. Formatting a disk
  unit will lose all data on that drive. If the disk is attached to an ipr
  adapter that does not support RAID, the drive will be formatted to 512
  bytes/sector. If the disk is attached to an ipr RAID adapter, the block size
  will not be changed. To change the block size, use the format menu options
  under the disk arrays menu.
<div class="Pp"></div>
<b>Reclaim IOA cache storage</b> is used to repair cache error conditions.
  <b>ATTENTION:</b> Use this option with care. This is used to discard data from
  the cache and may result in data loss. This option is designed to be used by
  authorized IBM hardware customer engineers.
<div class="Pp"></div>
<b>Rebuild disk unit data</b> is generally used following concurrent
  maintenance. Select this option after a failing array member device has been
  replaced to reconstruct the device as an active array member.
<div class="Pp"></div>
<b>Work with resources containing cache battery packs</b> is used to display
  information regarding rechargeable cache battery packs and to force
  rechargeable cache battery packs into an error state so that they can be
  replaced prior to failure. <b>ATTENTION:</b> Once an error has been forced on
  a rechargeable cache battery pack write caching will be disabled until the
  battery pack is replaced.
<div class="Pp"></div>
<b>4. Work with SCSI bus configuration</b> is used to change configurable SCSI
  bus attributes, such as maximum SCSI bus speed, SCSI initiator ID, etc.
<div class="Pp"></div>
<b>5. Work with driver configuration</b> is used to change driver configurable
  attributes, such as log_level.
<div class="Pp"></div>
<b>6. Work with disk configuration</b> is used to change configurable disk
  attributes, such as queue depth.
<div class="Pp"></div>
<b>7. Work with adapter configuration</b> is used to change configurable adapter
  attributes, such as dual adapter settings. Refer to the following command line
  options: primary, secondary, query-ha-mode, set-ha-mode,
  set-ioa-asymmetric-access and set-array-asymmetric-access for more information
  regarding these settings.
<div class="Pp"></div>
<b>8. Download microcode</b> is used to download microcode to ipr adapters and
  attached SCSI disks.
<div class="Pp"></div>
<b>9. Analyze Log</b> is an option available to analyze /var/log/messages*
  files. By default it will use vi as the editor to open the concatenated error
  log files. This can be changed by using option 6 on the <b>Kernel Messages
  Log</b> menu. Selecting option 1 on the Kernel Messages Log menu will display
  only the most recent errors logged by the ipr device driver and may be useful
  to filter out some of the clutter. Option 2 will display all recorded errors
  logged by the ipr device driver. Option 3 will display all kernel messages.
  Option 4 will display errors logged by the iprconfig utility. This may be
  useful for debugging problems. Option 5 can be used to change where the tool
  looks to find the kernel messages files. The default is to look in /var/log.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e editor</b></dt>
  <dd class="It-tag">Default editor for viewing error logs. The default editor
      is vi, but can be changed with this parameter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k directory</b></dt>
  <dd class="It-tag">Kernel messages root directory. Root directory to look for
      kernel messages. Default is /var/log.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c command</b></dt>
  <dd class="It-tag">Command line, non-interactive commands. Currently supported
      commands include:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-config</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show ipr configuration.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-alt-config</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show alternate ipr configuration information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-ioas</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all ipr adapters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-arrays</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all ipr arrays.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-battery-info [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show cache battery information for specified IOA. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c show-battery-info sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-details [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show device details for specified device. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c show-details sda</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-hot-spares</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all configured hot spares.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-af-disks</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show disks formatted for Advanced Function that are not configured in an
      array or as a hot spare.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-all-af-disks</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks formatted for Advanced Function</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-jbod-disks</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks formatted for JBOD Function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-slots</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks slots available on the system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>status [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the status of the specified device. This is the same status as which
      shows up in the last column of the Display hardware status menu. Can
      specify either a /dev/sdX name or a /dev/sgX name. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c status /dev/sda</b>
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>alt-status [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the status of the specified device. This is the same status as above
      with the exception of when a long running command is executing to the
      device, in which case the percent complete for the long running command is
      printed.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-raid-create [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all devices attached to the specified IOA that are candidates for being
      used in a RAID array. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c query-raid-create sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-raid-delete [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all RAID arrays attached to the specified IOA that can be deleted.
    <div>&#x00A0;</div>
    <b>iprconfig -c query-raid-delete sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-hot-spare-create [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all devices attached to the specified IOA that are candidates for being
      hot spares.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-hot-spare-delete [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all hot spares attached to the specified IOA that can be deleted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-raid-consistency-check</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all RAID arrays that are candidates for a RAID consistency check.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-format-for-jbod</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks that can be reformatted for JBOD function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-reclaim</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all IOAs that may need a reclaim cache storage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-arrays-raid-include</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all RAID arrays that can have disks included in them to increase their
      capacity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-devices-raid-include [array]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks that can be added to the specified array to increase its
      capacity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-supported-raid-levels [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all RAID levels supported by the specified adapter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-include-allowed [IOA] [raid level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Some RAID levels allow for adding additional disks to existing disk arrays
      to increase their capacity. Prints &quot;yes&quot; to stdout if the
      specified RAID level supports this function, else prints
    &quot;no&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-max-devices-in-array [IOA] [raid level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the maximum number of devices allowed in a RAID array of the specified
      RAID level for the specified RAID adapter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-min-devices-in-array [IOA] [raid level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the minimum number of devices allowed in a RAID array of the specified
      RAID level for the specified RAID adapter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-min-mult-in-array [IOA] [raid level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the minimum multiple of devices required in a RAID array of the
      specified RAID level for the specified RAID adapter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-supp-stripe-sizes [IOA] [raid level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print all supported stripe sizes supported for RAID arrays of the specified
      RAID level on the specified RAID adapter. Stripe sizes are printed in
      units of KB.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-recommended-stripe-size [IOA] [raid
    level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the default/recommended stripe size for RAID arrays of the specified
      RAID level on the specified RAID adapter. Stripe size is in units of
    KB.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-recovery-format</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks that can be formatted for error recovery purposes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-raid-rebuild</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks in RAID arrays that can be rebuilt.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-format-for-raid</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disks that can be formatted such that they can be used in a RAID
      array or as a hot spare.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-ucode-level [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the microcode level that is currently loaded on the specified device.
      Note: The device specified may be the sg device associated with an IOA, in
      which case the IOA's microcode level will be shown.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ssd-report [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Display information about Read Intensive SSD devices in the system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>show-ucode-levels</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the microcode level that is currently loaded for every device and
      adapter in the system. If newer microcode is available on the filesystem
      than what is loaded on the device, an * chararacter will be displayed next
      to the device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-format-timeout [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current format timeout to be used when formatting the specified
      disk. This value is only applicable when the device is currently in
      Advanced Function format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-qdepth [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the queue depth currently being used for the specified disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-tcq-enable [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print 1 to stdout if tagged queuing is enabled for the specified device,
      else print 0 to stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-log-level [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the current log level being used for the specified IOA. Can be a
      number from 0 to n.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-add-device</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all empty disk slots that can have a disk concurrently added.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-remove-device</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show all disk slots which are either empty or have disks in them which can
      be concurrently removed from the running system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-initiator-id [IOA] [busno]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current SCSI initiator ID used by the IOA for the specified SCSI
      bus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-bus-speed [IOA] [busno]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current maximum SCSI bus speed allowed on the specified SCSI
    bus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-bus-width [IOA] [busno]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current SCSI bus width in units of bits for the specified SCSI
    bus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-path-status [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current dual path state for the SAS devices attached specified
    IOA.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-path-details [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current dual path details for the specified SAS device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-arrays-raid-migrate</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the arrays that can be migrated to a different protection level.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-devices-raid-migrate [array]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the AF disks that are candidates to be used in a migration for a given
      array.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-raid-levels-raid-migrate [array]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the protection levels to which the given array can be migrated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-stripe-sizes-raid-migrate [array] [raid
    level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Given an array and a protection level, show the valid stripe sizes to which
      the array can be migrated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-devices-min-max-raid-migrate [array] [raid
    level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the number of devices that will be removed for a migration to a
      protection level that requires fewer devices. Or, show the minmum number
      of devices required, the maximum number of devices allowed and the
      multiple of the number of devices required for a migration that requires
      more devices.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-ioas-asymmetric-access</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the IOAs that support asymmetric access.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-arrays-asymmetric-access</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the disk arrays that are candidates for setting their asymmetric access
      mode to Optimized or Non-Optimized.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-ioa-asymmetric-access-mode [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current asymmetric access mode for the given IOA.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-array-asymmetric-access-mode [array]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current asymmetric access mode for the given disk array.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-ioa-caching [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show whether or not the user requested caching mode for the given IOA is set
      to default or disabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-array-label [label]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the device name of the array with the specified label. Label must have
      been specified when creating the RAID array. See raid-create command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-array-rebuild-rate [IOA]</b></dt>
  <dd class="It-tag">Show the array rebuild rate for the given IOA.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-array-rebuild-verify [IOA]</b></dt>
  <dd class="It-tag">Show whether array rebuild verification is enabled for the
      given IOA.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-array [location]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the device name of the array of which one of the disks in the array has
      the specified platform location code.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-device [location]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the device name of the disk that has the specified platform location
      code.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-location [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The device specified can be either the device name of a disk or the device
      name of a single disk RAID 0 array. If the specified device name is a
      disk, the platform location code will be displayed. If the specified
      device name is a single device RAID 0 array, the platform location of the
      disk which is a member of the specified array will be displayed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-write-cache-policy [device]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the current write cache policy for [device].</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-create [-r raid_level] [-s stripe_size_in_kb] [-l
    label] [--skip-format] [-c cache_policy] [devices...]</b></dt>
  <dd class="It-tag">Create a RAID array. RAID level can be any supported RAID
      level for the given adapter, such as 0, 10, 5, 6. Currently supported
      stripe sizes in kb include 16, 64, and 256. If raid_level is not
      specified, it will default to RAID 5. If stripe size is not specified, it
      will default to the recommended stripe size for the selected RAID level.
      Available cache policies are the same that can be passed to
      set-write-cache-policy command. If none is specified, write back is
      assumed. Devices are specified with their full name, either the /dev/sd
      name or the /dev/sg name is acceptable. On some RAID adapters, a label can
      also be specified. Example array creation:
    <div>&#x00A0;</div>
    <b>iprconfig -c raid-create -r 5 -s 64 /dev/sda /dev/sdb /dev/sdc</b>
    <div>&#x00A0;</div>
    This would create a RAID 5 array with a 64k stripe size using the specified
      devices.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-delete [RAID device]</b></dt>
  <dd class="It-tag">Delete the specified RAID array. Specify either the /dev/sd
      name or the /dev/sg name. Only 1 array can be deleted with a single
      command. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c raid-delete /dev/sda</b>
    <div>&#x00A0;</div>
    This would delete the disk array represented by /dev/sda</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-include [array] [disk] ... [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Add the specified devices to the specified disk array to increase its
      capacity. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c raid-include sda sg6 sg7</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-migrate -r raid_level [-s stripe_size_in_kb] array
    [disk] ... [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Migrate an existing RAID array to a new RAID protection level. Optionally, a
      new stripe size can be given. In some cases one or more new disks must be
      added for the migration to succeed. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c raid-migrate -r 10 -s 64 sda sg5 sg6</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>format-for-raid [disk] ... [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Format the specified disks for Advanced Function so they can be used in a
      RAID array or as a hot spare.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>format-for-jbod [disk] ... [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Format the specified disks for JBOD Function so they can be used as
      standalone disks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recovery-format [disk] ... [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Format the specified disks as directed by the reference guide for error
      recovery purposes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hot-spare-create [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Create a hot spare using the specified Advanced Function disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hot-spare-delete [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Delete the specified hot spare.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disrupt-device [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force the specified Advanced Function device failed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reclaim-cache [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Reclaim the specified IOA's write cache. <b>ATTENTION:</b> Use this option
      with care. This is used to discard data from the cache and may result in
      data loss. This option is designed to be used by authorized IBM hardware
      customer engineers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reclaim-unknown-cache [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Reclaim the specified IOA's write cache and allow unknown data loss.
      <b>ATTENTION:</b> Use this option with care. This is used to discard data
      from the cache and WILL result in data loss. This option is designed to be
      used by authorized IBM hardware customer engineers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-consistency-check [array]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force a full RAID consistency check on the specified array. This command
      will return before the RAID consistency check has completed. Use the
      <b>status</b> command to check the status of the command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raid-rebuild [disk]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Following a disk replacement for a failed disk in a RAID array, use this
      command to rebuild the failed disk's data onto the new disk and return the
      disk array to the <b>Active</b> state.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>update-ucode [device] [microcode file]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Update the microcode on the specified device (IOA or disk) with the
      specified microcode file. <b>ATTENTION:</b> Limited checking of the
      microcode image is done. Make sure the specified microcode file is the
      correct file for the specified device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>update-all-ucodes</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Update the microcode of every device with the latest version found in the
      system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-format-timeout [disk] [timeout in hours]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the format timeout to be used when formatting the specified disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-qdepth [device] [queue depth]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the queue depth for the specified device or disk array.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-tcq-enable [device] [0 = disable, 1 =
    enable]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Enable/disable tagged command queueing for the specified device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-log-level [IOA] [log level]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the error logging verbosity to use for the specified IOA. Default is
    2.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-write-cache-policy [device]
    [writeback|writethrough]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the write cache policy for [device]. Available policies are writeback
      and writethrough. This command supports JBOD disk (write cache) and Volume
      Sets (vset write cache). Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-write-cache-policy sdp writeback</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>identify-disk [disk] [0 = turn off identify LED, 1 =
    turn on identify LED]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on/off the disk identify LED for the specified disk. This function may
      or may not be available depending on the hardware packaging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>identify-slot [location] [0 = turn off identify LED, 1 =
    turn on identify LED]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on/off the disk identify LED for the specified location. This function
      may or may not be available depending on the hardware packaging. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c identify-slot 0000:d8:01.0/0:1:1: 1</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>remove-disk [disk] [0 = turn off identify LED, 1 = turn
    on identify LED]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on/off the disk remove identify LED for the specified device. When 1 is
      specified as the second argument, the specified disk is set to the remove
      state. When in this state, the disk may be removed. Once the disk has been
      physically removed, iprconfig must be invoked again with the second
      argument set to 0. This turns off the slot identifier light and logically
      removes the disk from the host operating system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>remove-slot [location] [0 = turn off identify LED, 1 =
    turn on identify LED]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on/off the disk remove identify LED for the specified location. When 1
      is specified as the second argument, the specified location is set to the
      remove state. When in this state, the disk may be removed. Once the disk
      has been physically removed, iprconfig must be invoked again with the
      second argument set to 0. This turns off the slot identifier light and
      logically removes the disk from the host operating system. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c remove-slot 0000:d8:01.0/0:1:1: 1</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-slot [location] [0 = turn off identify LED, 1 = turn
    on identify LED]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on/off the disk insert identify LED for the specified location. When 1
      is specified as the second argument, the specified location is set to the
      insert state. When in this state, the disk may be inserted. Once the disk
      has been physically inserted, iprconfig must be invoked again with the
      second argument set to 0. This turns off the slot identifier light and
      logically adds the disk to the host operating system. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c add-slot 0000:d8:01.0/0:1:1: 1</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-initiator-id [IOA] [busno] [initiator id]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the IOA's SCSI initiator ID for the specified bus. Must be a value
      between 0 and 7 and must not conflict with any other device on the SCSI
      bus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-bus-speed [IOA] [busno] [speed in MB/sec]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the maximum SCSI bus speed allowed on the specified SCSI bus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-bus-width [IOA] [busno] [bus width in #
    bits]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the SCSI bus width to use for the specified SCSI bus. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-bus-width sg5 0 16</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>primary [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the adapter as the <b>preferred primary</b> adapter. This is used in
      dual initiator RAID configurations to indicate which adapter should be the
      <b>primary</b> adapter. The <b>primary</b> adapter should be the adapter
      receiving the majority of the I/O. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c primary sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>secondary [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set the adapter to indicate it is not the <b>preferred primary</b> adapter.
      See the notes for the <b>preferred primary</b> for additional information.
      Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c secondary sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-all-primary</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set all attached ipr adapters as the <b>preferred primary</b> adapter. This
      can be used when running a dual initiator RAID HA configuration. This
      command can be run on the <b>primary</b> system to quickly enable the
      <b>preferred primary</b> mode for all attached adapters. Refer to
      /etc/ha.d/resource.d/iprha for an example of how this might be used.
      Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-all-primary</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-all-secondary</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Set all attached ipr adapters to indicate they are not the <b>preferred
      primary</b> adapter. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-all-secondary</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query-ha-mode [IOA]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    When an adapter is configured in a highly available dual adapter
      configuration, it may be able to be configured in one of two ways. The
      default mode is <b>Normal.</b> This mode is used for all SCSI adapters and
      many SAS adapters. Some SAS adapters also support a <b>JBOD</b> dual
      adapter configuration. This mode is to be used when the dual adapter
      configuration is to consist of JBOD disks rather than RAID arrays. If the
      adapter is <b>NOT</b> going to be used in a dual adapter configuration,
      this mode <b>MUST</b> be set to <b>Normal.</b> Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c query-ha-mode sg5</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-ha-mode [IOA] [Normal | RAID]</b></dt>
  <dd class="It-tag">Used to set the high-availability mode of the adapter.
      Refer to the <b>query-ha-mode</b> command for more information regarding
      these settings. Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-ha-mode sg5 Normal</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-array-asymmetric-access-mode [array] [Optimized |
    Non-Optimized]</b></dt>
  <dd class="It-tag">Used to set the asymmetric access mode of the disk array.
      Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-array-asymmetric-access-mode sda Optimized</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-ioa-asymmetric-access-mode [IOA] [Enabled |
    Disabled]</b></dt>
  <dd class="It-tag">Used to set the asymmetric access mode of the IOA.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-ioa-asymmetric-access-mode sg5 Enabled</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-ioa-caching [IOA] [Default | Disabled]</b></dt>
  <dd class="It-tag">Used to set the requested caching mode of the IOA.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-ioa-caching sg5 Disabled</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-array-rebuild-verify [IOA] [enable | disable |
    default]</b></dt>
  <dd class="It-tag">Used to define whether to perform verification during an
      array rebuild. Enabling this can affect performance. The default value is
      disabled.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-array-rebuild-rate sg5 disable</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-array-rebuild-rate [IOA] [Rebuild Rate |
    default]</b></dt>
  <dd class="It-tag">Used to set the rebuilt rate ratio of the IOA. [Rebuild
      Rate] must be in range 10..100. If 'default' is used, the IOA will reset
      to the implementation default rate. The value actually configured may not
      be the exact rate configured by the user, but an approximation to the
      closest rate supported by the IOA.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c set-array-rebuild-rate sg5 10</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-live-dump [IOA]</b></dt>
  <dd class="It-tag">Dump the IOA's implementation unique critical information.
      The dump data will be saved in the /var/log/ directory with the pattern
      ipr-CCIN-PCI_ADDRESS-dump-TIMESTAMP.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c get-live-dump sg5</b>
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dump</b></dt>
  <dd class="It-tag">Display detailed hardware and system information on
      standard output. In case a report file is needed, the iprsos command will
      create one at /var/log/iprsos.log.
    <div>&#x00A0;</div>
    Example:
    <div>&#x00A0;</div>
    <b>iprconfig -c dump</b>
    <div>&#x00A0;</div>
  </dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print version number of <b>iprconfig</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug</b></dt>
  <dd class="It-tag">Enable additional error logging. Enabling this will result
      in additional errors logging to /var/log/messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--force</b></dt>
  <dd class="It-tag">Disable safety checks. Use this to disable safety checks in
      iprconfig. This will allow you to format devices that are not at the
      appropriate code levels. Only use this option if you really know what you
      are doing.</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Brian King &lt;brking@us.ibm.com&gt;
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Notes on using under iSeries 5250 telnet</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Only use this utility across 5250 telnet when there are no other options
  available to you. Since there may be occasions when 5250 telnet is your only
  option to access your iSeries Linux console, every attempt has been made to
  make this utility usable under 5250 telnet. By following a few guidelines, you
  can make your 5250 telnet experience more productive and much less
  frustrating.
<div class="Pp"></div>
1. First of all, it will be helpful to know how the keys are mapped under 5250
  telnet. From the 5250 telnet window, hit ESC. This will get you to the <b>Send
  TELNET Control Functions</b> menu. Take option 6 to display the keyboard map.
  Take note of how TAB, ESC, CTLC, and SENDWOCR are bound. They will be useful
  in the future.
<div class="Pp"></div>
2. When selecting menu options, enter the menu number, followed by the enter
  key, same as usual.
<div class="Pp"></div>
3. When typing single character commands (eg. r=Refresh), type the single
  character followed by the SENDWOCR key (F11 by default).
<div class="Pp"></div>
4. When on a device/array/IOA selection screen (eg. Display Disk Unit Details),
  do NOT use the arrow keys to navigate. Instead use the TAB key (F7 by default)
  to navigate these screens.
<div class="Pp"></div>
5. Beware of the backspace and delete keys. As a rule do NOT use them.
<div class="Pp"></div>
6. When editing the root kernel message log directory or the default editor, you
  may use the arrow keys, but not the backspace and delete keys. Use the space
  bar to remove already typed characters.</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 2009</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
