<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:13:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MARADNS(8) MaraDNS reference MARADNS(8)</p>

<p style="margin-top: 1em">Erre con erre cigarro Erre con
erre barril R&Atilde;&iexcl;pido ruedan los carros En el
ferrocarril</p>

<p style="margin-top: 1em">NAME <br>
maradns - DNS server</p>

<p style="margin-top: 1em">SYNOPSIS <br>
maradns [ -v | -f mararc_file_location ]</p>

<p style="margin-top: 1em">TABLE OF CONTENTS <br>
This man page has the following sections:</p>

<p style="margin-top: 1em">Name <br>
Synopsis <br>
Table of Contents <br>
Description <br>
Usage <br>
Firewall Configuration <br>
Frequently Asked Questions <br>
Bugs <br>
Unimplemented Features <br>
Legal Disclaimer <br>
Authors</p>

<p style="margin-top: 1em">DESCRIPTION <br>
maradns is a DNS server written with security, simplicity,
and performance in mind.</p>

<p style="margin-top: 1em">maradns has two forms of
arguments, both of which are optional.</p>

<p style="margin-top: 1em">The first is the location of a
mararc file which MaraDNS obtains all configuration
information from. The default location of this file is
/etc/mararc. This is specified in the <br>
form maradns -f mararc_file_location; mararc_file_location
is the location of the mararc file.</p>

<p style="margin-top: 1em">It is also possible to have
MaraDNS display the version number and exit. This is
specified by invoking maradns in the form maradns -v or
maradns --version</p>

<p style="margin-top: 1em">USAGE <br>
MaraDNS consists of two programs: maradns, an
authoritative-only nameserver, and Deadwood, a recursive
name server. Deadwood has its own man page.</p>

<p style="margin-top: 1em">In order for MaraDNS to function
as an authoritative nameserver, two or more files need to be
set up: the mararc file and one or more &quot;csv2&quot; (or
&quot;csv1&quot;) zone files.</p>

<p style="margin-top: 1em">The format of a csv2 zone file
can be obtained from the csv2(5) manual page. The
configuration format of the mararc file can be obtained from
the mararc(5) manual page.</p>

<p style="margin-top: 1em">In order to have MaraDNS run as
a daemon, the duende program is used to daemonize MaraDNS.
See the duende(8) manual page for details.</p>

<p style="margin-top: 1em">FIREWALL CONFIGURATION <br>
When using the maradns authoritative nameserver, allow UDP
connections from all hosts on the internet to UDP port 53
for the IP that the authoritative nameserver uses.</p>

<p style="margin-top: 1em">When using the Deadwood
recursive nameserver:</p>

<p style="margin-top: 1em">* Allow UDP connections from the
Deadwood server to any machine on the internet where the UDP
destination port is 53</p>

<p style="margin-top: 1em">* Allow UDP connections from any
machine on the internet to the IP of the recursive server,
where the source port from the remote server is 53, and the
destination port is <br>
between 15000 and 19095 (inclusive)</p>

<p style="margin-top: 1em">* Allow UDP connections from IPs
that use Deadwood as a recursive DNS server to port 53</p>

<p style="margin-top: 1em">Deadwood uses a strong secure
RNG (RadioGatun[32]) for both the query (16 bits of entropy)
and the source port of the query (12 bits of entropy). This
makes spoofing replies to <br>
a Deadwood recursive server more difficult, since the
attacker has only a one in 250 million chance that a given
spoofed reply will be considered valid.</p>

<p style="margin-top: 1em">FREQUENTLY ASKED QUESTIONS <br>
INDEX</p>

<p style="margin-top: 1em">1. I&rsquo;m using an older
version of MaraDNS</p>

<p style="margin-top: 1em">2. How do I try out MaraDNS?</p>

<p style="margin-top: 1em">3. What license is MaraDNS
released under?</p>

<p style="margin-top: 1em">4. How do I report bugs in
MaraDNS?</p>

<p style="margin-top: 1em">5. Some of the postings to the
mailing list do not talk about MaraDNS!</p>

<p style="margin-top: 1em">6. How do I get off the mailing
list?</p>

<p style="margin-top: 1em">7. How do I set up reverse DNS
on MaraDNS?</p>

<p style="margin-top: 1em">8. I am on a slow network, and
MaraDNS can not process recursive queries</p>

<p style="margin-top: 1em">9. When I try to run MaraDNS, I
get a cryptic error message.</p>

<p style="margin-top: 1em">10. After I start MaraDNS, I can
not see the process when I run netstat -na</p>

<p style="margin-top: 1em">11. What string library does
MaraDNS use?</p>

<p style="margin-top: 1em">12. Why does MaraDNS use a
multi-threaded model?</p>

<p style="margin-top: 1em">13. I feel that XXX feature
should be added to MaraDNS</p>

<p style="margin-top: 1em">14. I feel that MaraDNS should
use another documentation format</p>

<p style="margin-top: 1em">15. Is there any process I need
to follow to add a patch to MaraDNS?</p>

<p style="margin-top: 1em">16. Can MaraDNS act as a primary
nameserver?</p>

<p style="margin-top: 1em">17. Can MaraDNS act as a
secondary nameserver?</p>

<p style="margin-top: 1em">18. What is the difference
between an authoritative and a recursive DNS server?</p>

<p style="margin-top: 1em">19. The getzone client
isn&rsquo;t allowing me to add certain hostnames to my
zone</p>

<p style="margin-top: 1em">20. Is MaraDNS portable?</p>

<p style="margin-top: 1em">21. Can I use MaraDNS in
Windows?</p>

<p style="margin-top: 1em">22. MaraDNS freezes up after
being used for a while</p>

<p style="margin-top: 1em">23. What kind of Python
integration does MaraDNS have</p>

<p style="margin-top: 1em">24. Doesn&rsquo;t
&quot;kvar&quot; mean &quot;four&quot; in Esperanto?</p>

<p style="margin-top: 1em">25. How scalable is MaraDNS?</p>

<p style="margin-top: 1em">26. I am having problems setting
upstream_servers</p>

<p style="margin-top: 1em">27. Why doesn&rsquo;t the
MaraDNS.org web page validate?</p>

<p style="margin-top: 1em">28. How do MX records work?</p>

<p style="margin-top: 1em">29. Does MaraDNS have support
for SPF?</p>

<p style="margin-top: 1em">30. I&rsquo;m having problems
resolving CNAMES I have set up.</p>

<p style="margin-top: 1em">31. I have a NS delegation, and
MaraDNS is doing strange things.</p>

<p style="margin-top: 1em">32. I am transferring a zone
from another server, but the NS records are these strange
&quot;synth-ip&quot; records.</p>

<p style="margin-top: 1em">33. Where is the root.hints
file?</p>

<p style="margin-top: 1em">34. Are there any plans to use
autoconf to build MaraDNS?</p>

<p style="margin-top: 1em">35. How do I change the compiler
or compile-time flags with MaraDNS&rsquo; build process?</p>

<p style="margin-top: 1em">36. Will you make a package for
the particular Linux distribution I am using?</p>

<p style="margin-top: 1em">37. I am using the native
Windows port of MaraDNS, and some features are not
working.</p>

<p style="margin-top: 1em">38. MaraDNS isn&rsquo;t starting
up</p>

<p style="margin-top: 1em">39. You make a lot of releases
of MaraDNS; at our ISP/IT department, updating software is
non-trivial.</p>

<p style="margin-top: 1em">40. I have star records in my
zones, and am having problems with NXDOMAINs/IPV6
resolution</p>

<p style="margin-top: 1em">41. I have a zone with only
SOA/NS records, and the zone is not working.</p>

<p style="margin-top: 1em">42. I am having problems
registering my domain with AFNIC (the registrar for .fr
domains)</p>

<p style="margin-top: 1em">43. I can&rsquo;t see the full
answers for subdomains I have delegated</p>

<p style="margin-top: 1em">44. MaraDNS 1 has a problem
resolving a domain</p>

<p style="margin-top: 1em">45. MaraDNS 1.2 has issues with
NXDOMAINS and case sensitivity.</p>

<p style="margin-top: 1em">46. Can MaraDNS offer protection
from phishing and malicious sites?</p>

<p style="margin-top: 1em">47. Does maradns support star
(wildcard) records?</p>

<p style="margin-top: 1em">48. I&rsquo;m having problems
using MaraDNS with some *NIX command line applications like
telnet</p>

<p style="margin-top: 1em">49. My virus scanner reports
that MaraDNS or Deadwood has a virus</p>

<p style="margin-top: 1em">50. I can not subscribe to the
MaraDNS mailing list</p>

<p style="margin-top: 1em">51. How does MaraDNS respond to
EDNS (RFC2671) packets?</p>

<p style="margin-top: 1em">52. How to I get MaraDNS to
always give the same IP to all DNS queries?</p>

<p style="margin-top: 1em">53. Why did you change
MaraDNS&rsquo; tagline?</p>

<p style="margin-top: 1em">54. How do you stop MaraDNS from
taking part in a distributed denial-of-service attack?</p>

<p style="margin-top: 1em">55. What about DNS-over-TCP?</p>

<p style="margin-top: 1em">56. How do I use MaraDNS with
systemd?</p>

<p style="margin-top: 1em">57. Why doesn&rsquo;t MaraDNS
use IP_FREEBIND?</p>

<p style="margin-top: 1em">58. Is there a web interface for
MaraDNS?</p>

<p style="margin-top: 1em">59. What does the message
&acirc;don&acirc;t forget the trailing dot&acirc; mean?</p>

<p style="margin-top: 1em">60. Does MaraDNS support newer
top level domains?</p>

<p style="margin-top: 1em">ANSWERS</p>

<p style="margin-top: 1em">1. I&rsquo;m using an older
version of MaraDNS</p>

<p style="margin-top: 1em">Upgrade to MaraDNS 2.0. Here is
an upgrade guide.</p>

<p style="margin-top: 1em">MaraDNS 1.4 is only supported
for critical security updates; this support is being phased
out and MaraDNS 1 will no longer be supported on June 21,
2015.</p>

<p style="margin-top: 1em">2. How do I try out MaraDNS?</p>

<p style="margin-top: 1em">Read the quick start guide,
which is the file named 0QuickStart in the MaraDNS
distribution.</p>

<p style="margin-top: 1em">3. What license is MaraDNS
released under?</p>

<p style="margin-top: 1em">MaraDNS is released with the
following two-clause BSD-type license:</p>

<p style="margin-top: 1em">Copyright (c) 2002-2015 Sam
Trenholme and others</p>

<p style="margin-top: 1em">TERMS</p>

<p style="margin-top: 1em">Redistribution and use in source
and binary forms, with or without modification, are
permitted provided that the following conditions are
met:</p>

<p style="margin-top: 1em">1. Redistributions of source
code must retain the above copyright notice, this list of
conditions and the following disclaimer.</p>

<p style="margin-top: 1em">2. Redistributions in binary
form must reproduce the above copyright notice, this list of
conditions and the following disclaimer in the documentation
and/or other materials <br>
provided with the distribution.</p>

<p style="margin-top: 1em">This software is provided
&rsquo;as is&rsquo; with no guarantees of correctness or
fitness for purpose.</p>

<p style="margin-top: 1em">4. How do I report bugs in
MaraDNS?</p>

<p style="margin-top: 1em">Post your bug report as a Github
issue.</p>

<p style="margin-top: 1em">5. Some of the postings to the
mailing list do not talk about MaraDNS!</p>

<p style="margin-top: 1em">As of September 2013, the
mailing list has become moderated and only postings on the
mailing list are relevant MaraDNS announcements.</p>

<p style="margin-top: 1em">6. How do I get off the mailing
list?</p>

<p style="margin-top: 1em">Send an email to
list-unsubscribe@maradns.org, or an email to
list-request@maradns.org with &quot;unsubscribe&quot; as the
subject line.</p>

<p style="margin-top: 1em">The mailing list will send you
an email confirming the unsubscribe request; this email
needs to be replied to in order to get off the list.</p>

<p style="margin-top: 1em">7. How do I set up reverse DNS
on MaraDNS?</p>

<p style="margin-top: 1em">Reverse DNS (sometimes called
&quot;reverse mapping&quot;) is set up by using PTR
(pointer) records. For example, the PTR record which
performs the reverse DNS lookup for the ip 10.2.3.4 <br>
looks like this in a CSV2 zone file:</p>

<p style="margin-top: 1em">4.3.2.10.in-addr.arpa. PTR
www.example.com.</p>

<p style="margin-top: 1em">It is also possible to use a
special &quot;FQDN4&quot; which automatically sets up the
reverse mapping of a given record:</p>

<p style="margin-top: 1em">www.example.com. FQDN4
10.2.3.4</p>

<p style="margin-top: 1em">If you wish to have a PTR
(reverse DNS lookup; getting a DNS name from a numeric IP)
record work on the internet at large, it is not a simple
matter of just adding a record like <br>
this to a MaraDNS zonefile. One also needs control of the
appropriate in-addr.arpa. domain.</p>

<p style="margin-top: 1em">While it could make logical
sense to contact the IP 10.11.12.13 when trying to get the
reverse DNS lookup (fully qualified domain name) for a given
IP, DNS servers don&rsquo;t do this. <br>
DNS server, instead, contact the root DNS servers for a
given in-addr.arpa name to get the reverse DNS lookup, just
like they do with any other record type.</p>

<p style="margin-top: 1em">When an internet service
provider is given a block of IPs, they are also given
control of the DNS zones which allow them to control reverse
DNS lookups for those IPs. While it is <br>
possible to obtain a domain and run a DNS server without the
knowledge or intervention of an ISP, being able to control
reverse DNS lookups for those IPs requires ISP <br>
intervention.</p>

<p style="margin-top: 1em">8. I am on a slow network, and
Deadwood can not process recursive queries</p>

<p style="margin-top: 1em">Deadwood, by default, only waits
two seconds for a reply from a remote DNS server. This
default can be increased by adding a line like this in the
mararc file:</p>

<p style="margin-top: 1em">timeout_seconds = 5</p>

<p style="margin-top: 1em">Note that making this too high
will slow MaraDNS down when DNS servers are down, which is,
alas, all too common on today&rsquo;s internet.</p>

<p style="margin-top: 1em">9. When I try to run MaraDNS, I
get a cryptic error message.</p>

<p style="margin-top: 1em">There is usually some context of
where there is a syntax error in a data file before the
cryptic error message. For example, when there is a syntax
error in a csv2 zone file, <br>
MaraDNS will tell you exactly at what point it had to
terminate parsing of the zone file.</p>

<p style="margin-top: 1em">If MaraDNS does return a cryptic
error message without letting you know what is wrong, let us
know in a Github issue so that we can fix the bug. MaraDNS
is designed to be easy to <br>
use; cryptic error messages go against this spirit.</p>

<p style="margin-top: 1em">10. After I start MaraDNS, I can
not see the process when I run netstat -na</p>

<p style="margin-top: 1em">Udp services do not have a
prominent &quot;LISTEN&quot; when netstat is run.</p>

<p style="margin-top: 1em">When MaraDNS is up, the relevant
line in the netstat output looks like this: udp 0 0
127.0.0.1:53 0.0.0.0:*</p>

<p style="margin-top: 1em">While on the topic of netstat,
if you run netstat -nap as root on Linux and some other *nix
operating systems, you can see the names of the processes
which are providing internet <br>
services.</p>

<p style="margin-top: 1em">11. What string library does
MaraDNS use?</p>

<p style="margin-top: 1em">MaraDNS uses its own string
library, which is called the &quot;js_string&quot; library.
Man pages for most of the functions in the js_string library
are in the folder doc/man of the <br>
MaraDNS distribution</p>

<p style="margin-top: 1em">12. Why does MaraDNS use a
multi-threaded model?</p>

<p style="margin-top: 1em">MaraDNS 2.0 no longer uses
threads.</p>

<p style="margin-top: 1em">It took me three years to
rewrite MaraDNS&rsquo; recursive resolver as a separate
non-threaded daemon. This has been done, and now all
recursion is done with Deadwood which does not <br>
need threads.</p>

<p style="margin-top: 1em">13. I feel that XXX feature
should be added to MaraDNS</p>

<p style="margin-top: 1em">There are no plans to add new
features to MaraDNS or Deadwood at this time.</p>

<p style="margin-top: 1em">14. I feel that MaraDNS should
use another documentation format</p>

<p style="margin-top: 1em">The reason that MaraDNS uses its
own documentation format is to satisfy both the needs of
translators to have a unified document format and my own
need to use a documentation <br>
format that is simple enough to be readily understood and
which I can add features on an as needed basis.</p>

<p style="margin-top: 1em">The documentation format is
essentially simplified HTML with some special tags added to
meet MaraDNS&rsquo; special needs.</p>

<p style="margin-top: 1em">This gives me more flexibility
to adapt the documentation format to changing needs. For
example, when someone pointed out that it&rsquo;s not a good
idea to have man pages with hi-bit <br>
characters, it was a simple matter to add a new HIBIT tag
which allows man pages to be without hi-bit characters, and
other document formats to retain hi-bit characters.</p>

<p style="margin-top: 1em">Having a given program have its
own documentation format is not without precedent; Perl uses
its own &quot;pod&quot; documentation format.</p>

<p style="margin-top: 1em">15. Is there any process I need
to follow to add a patch to MaraDNS?</p>

<p style="margin-top: 1em">I no longer accept third party
patches</p>

<p style="margin-top: 1em">16. Can MaraDNS act as a primary
nameserver?</p>

<p style="margin-top: 1em">Yes.</p>

<p style="margin-top: 1em">The zoneserver program serves
zones so that other DNS servers can be secondaries for zones
which MaraDNS serves. This is a separate program from the
maradns server, which <br>
processes authoritative UDP DNS queries, and Deadwood which
processes recursive DNS queries.</p>

<p style="margin-top: 1em">See the DNS master document in
the MaraDNS tutorial for details.</p>

<p style="margin-top: 1em">17. Can MaraDNS act as a
secondary nameserver?</p>

<p style="margin-top: 1em">Yes.</p>

<p style="margin-top: 1em">Please read the DNS slave
document, which is part of the MaraDNS tutorial.</p>

<p style="margin-top: 1em">18. What is the difference
between an authoritative and a recursive DNS server?</p>

<p style="margin-top: 1em">A recursive DNS server is a DNS
server that is able to contact other DNS servers in order to
resolve a given domain name label. This is the kind of DNS
server one points to in <br>
/etc/resolv.conf. MaraDNS uses the Deadwood daemon to
process recursive DNS queries.</p>

<p style="margin-top: 1em">An authoritative DNS server is a
DNS server that a recursive server contacts in order to find
out the answer to a given DNS query. The maradns daemon
processes authoritative DNS <br>
queries.</p>

<p style="margin-top: 1em">19. The fetchzone client
isn&rsquo;t allowing me to add certain hostnames to my
zone</p>

<p style="margin-top: 1em">For security reasons,
MaraDNS&rsquo; fetchzone client does not add records which
are not part of the zone in question. For example, if
someone has a zone for example.com, and this <br>
record in the zone:</p>

<p style="margin-top: 1em">1.1.1.10.in-addr.arpa. PTR
dns.example.com.</p>

<p style="margin-top: 1em">MaraDNS will not add the record,
since the record is out-of-bailiwick. In other words, it is
a host name that does not end in .example.com.</p>

<p style="margin-top: 1em">There are two workarounds for
this issue:</p>

<p style="margin-top: 1em">* Create a zone file for
1.1.10.in-addr.arpa., and put the PTR records there.</p>

<p style="margin-top: 1em">* Use rcp, rsync, or another
method to copy over the zone files in question.</p>

<p style="margin-top: 1em">20. Is MaraDNS portable?</p>

<p style="margin-top: 1em">MaraDNS is developed in CentOS 6
and Windows 7. MaraDNS may or may not compile and run on
other systems.</p>

<p style="margin-top: 1em">21. Can I use MaraDNS in
Windows?</p>

<p style="margin-top: 1em">Yes. There is both a partial
mingw32 (native win32 binary) port and a full Cygwin port of
MaraDNS; both of these ports are part of the native build of
MaraDNS. Deadwood has full <br>
Windows support, including the ability to run as a
service.</p>

<p style="margin-top: 1em">22. MaraDNS freezes up after
being used for a while</p>

<p style="margin-top: 1em">If using your ISP&rsquo;s name
servers or some other name servers which are not, in fact,
root name servers, please make sure that you are using the
upstream_servers dictionary <br>
variable instead of the root_servers dictionary
variable.</p>

<p style="margin-top: 1em">If you still see MaraDNS freeze
up after making this correction, please send a bug report as
a Github issue.</p>

<p style="margin-top: 1em">23. What kind of Python
integration does MaraDNS have</p>

<p style="margin-top: 1em">The mararc file uses the same
syntax that Python uses; in fact, Python can parse a
properly formatted mararc file.</p>

<p style="margin-top: 1em">There is no other integration
with Python.</p>

<p style="margin-top: 1em">24. Doesn&rsquo;t
&quot;kvar&quot; mean &quot;four&quot; in Esperanto?</p>

<p style="margin-top: 1em">Indeed, it does. However the use
of &quot;kvar&quot; in the MaraDNS source code only
coincidentally is an Esperanto word. &quot;kvar&quot; is
short for &quot;Kiwi variable&quot;; a lot of the parsing
code <br>
comes from the code used in the Kiwi spam filter
project.</p>

<p style="margin-top: 1em">25. How scalable is MaraDNS?</p>

<p style="margin-top: 1em">MaraDNS is optimized for serving
a small number of domains as quickly as possible. That said,
MaraDNS is remarkably efficnent for serving a large number
of domains, as long as <br>
the server MaraDNS is on has the memory to fit all of the
domains, and as long as the startup time for loading a large
number of domains can be worked around.</p>

<p style="margin-top: 1em">The &quot;big-O&quot; or
&quot;theta&quot; growth rates for various MaraDNS functions
are as follows, where N is the number of authoritative host
names being served:</p>

<p style="margin-top: 1em">Startup time N <br>
Memory usage N <br>
Processing incoming DNS requests 1</p>

<p style="margin-top: 1em">As can be seen, MaraDNS will
process 1 or 100000 domains in the same amount of time, once
the domain names are loaded in to memory.</p>

<p style="margin-top: 1em">26. I am having problems setting
upstream_servers</p>

<p style="margin-top: 1em">upstream_servers is only
supported by Deadwood, and is no longer supported in MaraDNS
2.0. The upstream_servers dwood3rc variable is set
thusly:</p>

<p style="margin-top: 1em">upstream_servers[&quot;.&quot;]
= &quot;10.3.28.79, 10.2.19.83&quot;</p>

<p style="margin-top: 1em">Note the [&quot;.&quot;].</p>

<p style="margin-top: 1em">Note that the upstream_servers
variable needs to be initialized before being used via
upstream_servers = {} (the reason for this is so that a
dwood3rc file has 100% Python- <br>
compatible syntax). A complete dwood3rc file that uses
upstream_servers may look like this:</p>

<p style="margin-top: 1em">ipv4_bind_addresses =
&quot;127.0.0.1&quot; <br>
chroot_dir = &quot;/etc/maradns&quot; <br>
recursive_acl = &quot;127.0.0.1/8&quot; <br>
upstream_servers = {} <br>
upstream_servers[&quot;.&quot;] = &quot;10.1.2.3,
10.2.4.6&quot;</p>

<p style="margin-top: 1em">27. Why doesn&rsquo;t the
MaraDNS.org web page validate?</p>

<p style="margin-top: 1em">HTML pages on the MaraDNS.org
web site should validate as HTML 4.0 Transitional. However,
the CSS will not validate.</p>

<p style="margin-top: 1em">I have designed MaraDNS&rsquo;
web page to be usable and as attractive as possible in any
major browser released in the last ten years. Cross-browser
support is more important than <br>
strict W3 validation. The reason why the CSS does not
validate is because I need a way to make sure there is
always a scrollbar on the web page, even if the content is
not big <br>
enough to merit one; this is to avoid the content jumping
from page to page. There is no standard CSS tag that lets me
do this. I&rsquo;m using a non-standard tag to enable this
in <br>
Gecko (Firefox&rsquo;s rendering engine); this is enabled by
default in Trident (Internet Explorer&rsquo;s rendering
engine). The standards are deficient and blind adherence to
them would <br>
result in an inferior web site.</p>

<p style="margin-top: 1em">There are also two validation
warnings generated by redefinitions which are needed as part
of the CSS filters used to make the site attractive on older
browsers with limited CSS <br>
support.</p>

<p style="margin-top: 1em">On a related note, the reason
why I use tables instead of CSS for some of the layout is
because Microsoft Internet Explorer 6 and other browsers do
not have support for the max- <br>
width CSS property. Without this property, the web page will
not scale down correctly without using tables. Additionally,
tables allow a reasonably attractive header in browsers <br>
without CSS support.</p>

<p style="margin-top: 1em">28. How do MX records work?</p>

<p style="margin-top: 1em">How MX records work:</p>

<p style="margin-top: 1em">* The mail transport agent
(Sendmail, Postfix, Qmail, MS Exchange, etc.) looks up the
MX record for the domain</p>

<p style="margin-top: 1em">* For each of the records
returned, the MTA (mail transport agent) looks up the IP for
the names.</p>

<p style="margin-top: 1em">* It will choose, at random, any
of the MXes with the lowest priority number.</p>

<p style="margin-top: 1em">* Should that server fail, it
will try another server with the same priority number.</p>

<p style="margin-top: 1em">* Should all MX records with a
given priority number fail, the MTA will try sending email
to any of the MX records with the second-lowest priority
value.</p>

<p style="margin-top: 1em">As an aside, do not have MX
records point to CNAMEs.</p>

<p style="margin-top: 1em">29. Does MaraDNS have support
for SPF?</p>

<p style="margin-top: 1em">SPF, or sender policy framework,
is method of using DNS that makes it more difficult to forge
email. MaraDNS has full support for SPF, both via TXT
records and RFC4408 SPF <br>
records.</p>

<p style="margin-top: 1em">SPF configuration is beyond the
scope of MaraDNS&rsquo; documentation. However, at the time
this FAQ entry was last updated (July, 2013), information
and documentation concerning SPF <br>
is available at http://openspf.org. The BIND examples will
work in MaraDNS csv2 zone files as long as the double quotes
(&quot;) are replaced by single quotes (&rsquo;). For
example, a SPF <br>
TXT record that looks like example.net. IN TXT &quot;v=spf1
+mx a:colo.example.com/28 -all&quot; in a BIND zone file
will look like example.net. TXT &rsquo;v=spf1 +mx
a:colo.example.com/28 -all&rsquo; <br>
in a MaraDNS zone file. MaraDNS can also make the
corresponding SPF record, which will have the syntax
example.net. SPF &rsquo;v=spf1 +mx a:colo.example.com/28
-all&rsquo;.</p>

<p style="margin-top: 1em">Use &rsquo;e&rsquo; to put a
tilde (&quot;~&quot; character) in a SPF record:</p>

<p style="margin-top: 1em">example.com. SPF &rsquo;v=spf1
+mx a:colo.example.com/28 &rsquo;e&rsquo;all&rsquo;</p>

<p style="margin-top: 1em">30. I&rsquo;m having problems
resolving CNAMES I have set up.</p>

<p style="margin-top: 1em">This is probably because you
have set up what MaraDNS calls a dangling CNAME record.</p>

<p style="margin-top: 1em">Let us suppose we have a CNAME
record without an A record in the local DNS server&rsquo;s
database, such as:</p>

<p style="margin-top: 1em">google.example.com. CNAME
www.google.com.</p>

<p style="margin-top: 1em">This record, which is a CNAME
record for &quot;google.example.com&quot;, points to
&quot;www.google.com&quot;. Some DNS servers will
recursively look up www.google.com, and render the above
record <br>
like this:</p>

<p style="margin-top: 1em">google.example.com. CNAME
www.google.com. <br>
www.google.com. A 66.102.7.104</p>

<p style="margin-top: 1em">For security reasons, MaraDNS
doesn&rsquo;t do this. Instead, MaraDNS will simply
output:</p>

<p style="margin-top: 1em">google.example.com. CNAME
www.google.com.</p>

<p style="margin-top: 1em">Some stub resolvers will be
unable to resolve google.example.com as a consequence.</p>

<p style="margin-top: 1em">If you set up MaraDNS to resolve
CNAMEs thusly, you will get a warning in your logs about
having a dangling CNAME record.</p>

<p style="margin-top: 1em">If you want to remove these
warnings, add the following to your mararc file:</p>

<p style="margin-top: 1em">no_cname_warnings = 1</p>

<p style="margin-top: 1em">Information about how to get
MaraDNS to resolve dangling CNAME records is in the tutorial
file dangling.html</p>

<p style="margin-top: 1em">31. I have a NS delegation, and
MaraDNS is doing strange things.</p>

<p style="margin-top: 1em">This is only an issue in MaraDNS
1.4. MaraDNS 2.0 does not allow the same IP to both
authoritatively and recursively resolve records.</p>

<p style="margin-top: 1em">32. I am transferring a zone
from another server, but the NS records are these strange
&quot;synth-ip&quot; records.</p>

<p style="margin-top: 1em">MaraDNS expects, in csv2 zone
files, for all delegation NS records to be between the SOA
record and the first non-NS record.</p>

<p style="margin-top: 1em">If a zone looks like this:</p>

<p style="margin-top: 1em">example.net. +600 soa
ns1.example.net. <br>
hostmaster@example.net 10 10800 3600 604800 1080 <br>
example.net. +600 mx 10 mail.example.net. <br>
example.net. +600 a 10.2.3.5 <br>
example.net. +600 ns ns1.example.net. <br>
example.net. +600 ns ns3.example.net. <br>
mail.example.net. +600 a 10.2.3.7 <br>
www.example.net. +600 a 10.2.3.11</p>

<p style="margin-top: 1em">Then the NS records will be
&quot;synth-ip&quot; records.</p>

<p style="margin-top: 1em">The zone should look like
this:</p>

<p style="margin-top: 1em">example.net. +600 soa
ns1.example.net. <br>
hostmaster@example.net 10 10800 3600 604800 1080 <br>
example.net. +600 ns ns1.example.net. <br>
example.net. +600 ns ns3.example.net. <br>
example.net. +600 mx 10 mail.example.net. <br>
example.net. +600 a 10.2.3.5 <br>
mail.example.net. +600 a 10.2.3.7 <br>
www.example.net. +600 a 10.2.3.11</p>

<p style="margin-top: 1em">This will remove the
&quot;synth-ip&quot; records.</p>

<p style="margin-top: 1em">To automate this process, this
awk script is useful:</p>

<p style="margin-top: 1em">fetchzone whatever.zone.foo
10.1.2.3 | awk &rsquo; <br>
{if($3 ~ /ns/ || $3 ~ /soa/){print} <br>
else{a = a &quot;0 $0}} <br>
END{print a}&rsquo; &gt; zonefile.csv2</p>

<p style="margin-top: 1em">Replace
&quot;whatever.zone.foo&quot; with the name of the zone you
are fetchin 10.1.2.3 with the IP address of the DNS master,
and zonefile.csv2 with the name of the zone file MaraDNS
<br>
loads.</p>

<p style="margin-top: 1em">33. Where is the root.hints
file?</p>

<p style="margin-top: 1em">MaraDNS (actually, Deadwood),
unlike BIND, does not need a complicated root.hints file in
order to have custom root servers. In order to change the
root.hints file, add something <br>
like this to your dwood3rc file:</p>

<p style="margin-top: 1em">root_servers[&quot;.&quot;] =
&quot;131.161.247.232,&quot; <br>
root_servers[&quot;.&quot;] += &quot;208.185.249.250,&quot;
<br>
root_servers[&quot;.&quot;] += &quot;66.227.42.140,&quot;
<br>
root_servers[&quot;.&quot;] += &quot;66.227.42.149,&quot;
<br>
root_servers[&quot;.&quot;] += &quot;65.243.92.254&quot;</p>

<p style="margin-top: 1em">Note that there is no
&quot;+=&quot; in the first line, and the last line does not
have a comma at the end. Read the recursive tutorial
document for more information.</p>

<p style="margin-top: 1em">34. Are there any plans to use
autoconf to build MaraDNS?</p>

<p style="margin-top: 1em">No.</p>

<p style="margin-top: 1em">In more detail, MaraDNS does not
use autoconf for the following reasons:</p>

<p style="margin-top: 1em">* Autoconf is designed to solve
a problem that existed in the mid 1990s but does not exist
today: A large number of different incompatible C compilers
and libc implementations. <br>
These days, most systems are using gcc as the compiler and
some version of glibc as the libc. There is no longer a
need, for example, to figure out whether a given <br>
implementation of getopt() allows &rsquo;--&rsquo; options.
MaraDNS&rsquo;s ./configure script can be run in only a
second or two; compare this to the 3-5 minute process
autoconf&rsquo;s ./configure <br>
needs.</p>

<p style="margin-top: 1em">* Autoconf leaves GPL-tained
files in a program&rsquo;s build tree. MaraDNS is licensed
under a BSD license that is not GPL-compatible, so MaraDNS
can not be distributed with these <br>
GPL-licensed files.</p>

<p style="margin-top: 1em">This leads us to the next
question:</p>

<p style="margin-top: 1em">35. How do I change the compiler
or compile-time flags with MaraDNS&rsquo; build process?</p>

<p style="margin-top: 1em">To change the compiler used by
MaraDNS:</p>

<p style="margin-top: 1em">* Run the ./configure script</p>

<p style="margin-top: 1em">* Open up the file Makefile with
an editor</p>

<p style="margin-top: 1em">* Look for a line that starts
with CC</p>

<p style="margin-top: 1em">* If there is no line that
starts with CC, create one just before the line that starts
with FLAGS</p>

<p style="margin-top: 1em">* Change (or create) that line
to look something like CC=gcc296 In this example, the 2.96
version of gcc is used to compile MaraDNS.</p>

<p style="margin-top: 1em">* Note that it is important to
not remove anything from this line you do not understand;
doing so will make MaraDNS unable to compile or run. So, if
the CC line looks like <br>
CC=gcc&amp;nbsp;$(LDFLAGS)&amp;nbsp;-DNO_FLOCK and you want
to compile with gcc 2.96, change the line to look like
CC=gcc296&amp;nbsp;$(LDFLAGS)&amp;nbsp;-DNO_FLOCK retaining
the flags added <br>
by the configuration script.</p>

<p style="margin-top: 1em">Changing compile-time flags is a
similar process:</p>

<p style="margin-top: 1em">* Run the ./configure script</p>

<p style="margin-top: 1em">* Open up the file Makefile with
an editor</p>

<p style="margin-top: 1em">* Look for a line that starts
with FLAGS</p>

<p style="margin-top: 1em">* Change (or create) that line
to look something like FLAGS=-O3 In this example, MaraDNS is
compiled with the -O3 option.</p>

<p style="margin-top: 1em">* Note that it is important to
not remove anything from this line you do not understand;
doing so will make MaraDNS unable to compile or run. So, if
the FLAGS line looks like <br>
FLAGS=-O2&amp;nbsp;-Wall&amp;nbsp;-DSELECT_PROBLEM and you
want to compile at optimization level three, change this
line to look like
FLAGS=-O2&amp;nbsp;-Wall&amp;nbsp;-DSELECT_PROBLEM <br>
retaining the flags added by the configuration script.
-DSELECT_PROBLEM for example, is needed in the Linux compile
or MaraDNS will have problems with freezing up.</p>

<p style="margin-top: 1em">36. Will you make a package for
the particular Linux distribution I am using?</p>

<p style="margin-top: 1em">No.</p>

<p style="margin-top: 1em">There is, however, a CentOS
5-compatible RPM spec file in the build directory.</p>

<p style="margin-top: 1em">37. I am using the native
Windows port of MaraDNS, and some features are not
working.</p>

<p style="margin-top: 1em">Since Windows 32 does not have
some features that *NIX OSes have, the native Windows port
does not have all of the features of the *NIX version of
MaraDNS. In particular, the <br>
following features are disabled:</p>

<p style="margin-top: 1em">* ipv6 (this is actually a
mingw32, not a Windows deficiency)</p>

<p style="margin-top: 1em">* The chroot_dir mararc
variable</p>

<p style="margin-top: 1em">* The maradns_gid and
maradns_uid mararc variables</p>

<p style="margin-top: 1em">* The maxprocs mararc
variable</p>

<p style="margin-top: 1em">* The synth_soa_serial variable
can not have a value of 2</p>

<p style="margin-top: 1em">* There is no DNS-over-TCP
support</p>

<p style="margin-top: 1em">If any of the above features are
desired, try compiling MaraDNS using Cygwin. Note that the
Cygwin port of MaraDNS does not have ipv6 support, and that
while chroot_dir works in <br>
Cygwin, it does not have the security that the *NIX chroot()
call has.</p>

<p style="margin-top: 1em">38. MaraDNS isn&rsquo;t starting
up</p>

<p style="margin-top: 1em">This is usually caused by a
syntax error in one&rsquo;s mararc file, or by another
MaraDNS process already running. To see what is happening,
look at your system log (/var/log/messages <br>
in Centos 3) to see what errors MaraDNS reports. If you do
not know how to look at a system log, you can also invoke
MaraDNS from the command line as root; any errors will be
<br>
visible when starting MaraDNS.</p>

<p style="margin-top: 1em">39. You make a lot of releases
of MaraDNS; at our ISP/IT department, updating software is
non-trivial.</p>

<p style="margin-top: 1em">Regularly updating software is
required to keep something as complicated as a DNS server
secure; there is not a DNS server out there so secure that
it never needs to be updated.</p>

<p style="margin-top: 1em">Since MaraDNS is finished,
updates usually only happen about once a year.</p>

<p style="margin-top: 1em">The last security bug which
required a MaraDNS update was made before January 30,
2015.</p>

<p style="margin-top: 1em">40. I have star records in my
zones, and am having problems with NXDOMAINs/IPV6
resolution</p>

<p style="margin-top: 1em">This was a bug in MaraDNS 1.2
which has long since been fixed.</p>

<p style="margin-top: 1em">41. I have a zone with only
SOA/NS records, and the zone is not working.</p>

<p style="margin-top: 1em">MaraDNS 1.2 had a bug where it
did not correctly process zones without any
&quot;normal&quot; records. Upgrade to MaraDNS 2.0.</p>

<p style="margin-top: 1em">42. I am having problems
registering my domain with AFNIC (the registrar for .fr
domains)</p>

<p style="margin-top: 1em">Because of an issue with AFNIC
(who, annoyingly enough, check the RA bit when registering a
domain), in order to register a domain with AFNIC using
MaraDNS as your DNS server, <br>
the following steps need to be followed:</p>

<p style="margin-top: 1em">* MaraDNS version 1.4 or 2.0
needs to be used; if you&rsquo;re using an older version of
MaraDNS, upgrade.</p>

<p style="margin-top: 1em">* It is necessary to have
recursion disabled, if using MaraDNS 1.4, either by
compiling MaraDNS without recursive support (./configure
--authonly ; make), or by making sure <br>
MaraDNS does not have recursion enabled (by not having
recursive_acl set in one&rsquo;s MaraDNS 1.4 mararc
file)</p>

<p style="margin-top: 1em">If one wishes to both register
domains with AFNIC and use MaraDNS 1.4 as a recursive DNS
server, it is required to have the recursive server be a
separate instance of MaraDNS on <br>
a separate IP. It is not possible to have the same DNS
server both send DNS packets in a way that both makes AFNIC
happy and allows recursive queries.</p>

<p style="margin-top: 1em">Note also: AFNIC gives warnings
about reverse DNS lookups; more information about this issue
can be found in the FAQ entry about reverse DNS mappings
(question 7). In addition, <br>
AFNIC requires DNS-over-TCP to work; information on
configuring MaraDNS to have this can be found in the
DNS-over-TCP tutorial.</p>

<p style="margin-top: 1em">43. I can&rsquo;t see the full
answers for subdomains I have delegated</p>

<p style="margin-top: 1em">To have the subdomains be
visible to MaraDNS 1.4 recursive nameservers, add the
following to your mararc file:</p>

<p style="margin-top: 1em">recurse_delegation = 1</p>

<p style="margin-top: 1em">44. MaraDNS 1 has a problem
resolving a domain</p>

<p style="margin-top: 1em">This issue should be fixed in
MaraDNS 2.0.</p>

<p style="margin-top: 1em">Here&rsquo;s what happening: I
have rewritten the recursive resolver for MaraDNS. The old
code was always designed to be a placeholder until I wrote a
new recursive resolver.</p>

<p style="margin-top: 1em">The new recursive resolver is
called &quot;Deadwood&quot;; right now it&rsquo;s fully
functional and part of MaraDNS 2.0. More information is
here:</p>


<p style="margin-top: 1em">http://maradns.blogspot.com/search/label/Deadwood</p>


<p style="margin-top: 1em">http://maradns.samiam.org/deadwood/</p>

<p style="margin-top: 1em">Since the old recursive code is
a bit difficult to maintain, and since I in the process of
rewriting the recursive code, my rule is that I will only
resolve security issues with <br>
MaraDNS 1.0&rsquo;s recursive resolver.</p>

<p style="margin-top: 1em">45. MaraDNS 1.2 had issues with
NXDOMAINS and case sensitivity.</p>

<p style="margin-top: 1em">There was a known bug in MaraDNS
1.2.12 where, should a client ask for a non-existent record
in all caps, MaraDNS 1.2.12 will return a NXDOMAIN instead
of a &quot;not there&quot; reply. <br>
Upgrade to 2.0.</p>

<p style="margin-top: 1em">46. Can MaraDNS offer protection
from phishing and malicious sites?</p>

<p style="margin-top: 1em">Deadwood can block up to about
20,000 domains. More details are in the Deadwood FAQ.</p>

<p style="margin-top: 1em">47. Does maradns support star
(wildcard) records?</p>

<p style="margin-top: 1em">Yes.</p>

<p style="margin-top: 1em">MaraDNS supports both having
stars at the beginning of records and the end of records.
For example, to have anything.example.com. have the IP
10.1.2.3, add this line to the zone <br>
file for example.com:</p>

<p style="margin-top: 1em">*.example.com. A 10.1.2.3</p>

<p style="margin-top: 1em">To have stars at the end of
records, csv2_default_zonefile has to be set. The mararc
parameter bind_star_handling affects how star records are
handled. More information is in the <br>
mararc man page.</p>

<p style="margin-top: 1em">48. I&rsquo;m having problems
using MaraDNS with some *NIX command line applications like
telnet.</p>

<p style="margin-top: 1em">Some *NIX command line
networking applications, such as telnet and ssh, try to do
either a reverse DNS lookup (IP-to-host name conversion) or
an IPv6 lookup. This slows things <br>
down and sometimes causes the applications to not work at
all.</p>

<p style="margin-top: 1em">For people who do not need IPv6
lookups, add the following line to one&rsquo;s mararc file
to have MaraDNS respond to all IPv6 lookups with a bogus
&quot;not found&quot; reply:</p>

<p style="margin-top: 1em">reject_aaaa = 1</p>

<p style="margin-top: 1em">If knowing the hostname a given
IP has isn&rsquo;t important, these kinds of lookups can
also be disabled:</p>

<p style="margin-top: 1em">reject_ptr = 1</p>

<p style="margin-top: 1em">49. My virus scanner reports
that MaraDNS or Deadwood has a virus</p>

<p style="margin-top: 1em">This can be caused either by a
poorly written anti-virus program reporting a false
positive, or because a virus on your system has infected
your copy of MaraDNS/Deadwood.</p>

<p style="margin-top: 1em">Please use GPG to verify that
the file which your scanner reports having a virus in has
not been altered. In addition, please scan the file with AVG
(free for non-commercial <br>
use) to verify your virus scanner has not reported a false
positive.</p>

<p style="margin-top: 1em">If you have verified the GPG
signature of the program and AVG reports a virus, please let
us know with a Github issue. Otherwise, please use a better
virus scanner and make sure <br>
there are no viruses on your computer.</p>

<p style="margin-top: 1em">50. I can not subscribe to the
MaraDNS mailing list</p>

<p style="margin-top: 1em">Please note that the mailing
list is no longer used to handle MaraDNS support requests.
Please file a Github issue at
https://github.com/samboy/MaraDNS/issues to file a MaraDNS
<br>
bug report.</p>

<p style="margin-top: 1em">The procedure for subscribing to
the mailing list is as follows:</p>

<p style="margin-top: 1em">* Send an email to
list-request@maradns.org with &quot;Subscribe&quot; as the
subject, or an email to list-subscribe@maradns.org</p>

<p style="margin-top: 1em">* You will get an email from
list-request@maradns.org asking you to confirm your
subscription. This can be done by replying to the message,
or, more simply, by clicking on the <br>
link in the message.</p>

<p style="margin-top: 1em">* Once you click on that link,
click on the button marked &quot;subscribe to list
list&quot;</p>

<p style="margin-top: 1em">* You will now get a message
stating &rsquo;Welcome to the &quot;list&quot; mailing
list&rsquo;.</p>

<p style="margin-top: 1em">* Note that the mailing list is
moderated and only relevant MaraDNS announcements are
approved. People who need help should read the manuals or
search the MaraDNS webpage for <br>
support.</p>

<p style="margin-top: 1em">If you get an email from
list-request@maradns.org with the subject &quot;The results
of your email commands&quot;, you did not correctly send an
email to list-request@maradns.org with the <br>
subject &quot;Subscribe&quot;.</p>

<p style="margin-top: 1em">If you do not get the email from
list-request@maradns.org asking you for a confirmation,
ensure that this email is not in your &quot;spam&quot; or
&quot;junk mail&quot; folder. If you are unable to <br>
get these emails at your email address, please get a gmail
email account, which can successfully subscribe to the
MaraDNS mailing list. Note that subscription confirmation
emails <br>
may be in Gmail&rsquo;s &quot;promotions&quot; tab.</p>

<p style="margin-top: 1em">51. How does MaraDNS respond to
EDNS (RFC2671) packets?</p>

<p style="margin-top: 1em">MaraDNS 2 (both the
authoritative maradns server and the recursive Deadwood
server) responds to EDNS packets by ignoring the OPT record
and acting as if it the packet did not <br>
have an OPT record.</p>

<p style="margin-top: 1em">MicroDNS (available in the
tools/misc directory of any MaraDNS 2 release) responds to
EDNS queries the same way Deadwood 2.9.03 did: By giving
back &quot;NOTIMPL&quot; instead of answering <br>
the query with the default IP. NanoDNS, in the interest of
minimizing code side, responds to EDNS requests by returning
NOTIMPL in the header, giving the OPT query in the AN <br>
section of the response, and giving the default IP in the AR
section of the DNS reply packet.</p>

<p style="margin-top: 1em">52. How to I get MaraDNS to
always give the same IP to all DNS queries?</p>

<p style="margin-top: 1em">There are three ways to have
MaraDNS always give the same IP in reply to any DNS query
given to it:</p>

<p style="margin-top: 1em">* The best way to do this is to
set up a default zonefile that causes any and all A queries
to always give the IP (and also allows all AAAA queries to
always give out the same <br>
IP6, all SPF or TXT queries to give out the same SPF record,
etc.).</p>

<p style="margin-top: 1em">* Another possibility, if
someone just wants a simple DNS server that always gives out
the same IP address to any and all DNS queries, is to use
the MicroDNS program, available <br>
in tools/misc, as well as having its own web page.</p>

<p style="margin-top: 1em">* If MicroDNS is too bloated,
there is also NanoDNS, which I will include the source code
of below:</p>

<p style="margin-top: 1em">/*Placed in the public domain by
Sam Trenholme*/ <br>
#include &lt;arpa/inet.h&gt; <br>
#include &lt;string.h&gt; <br>
#include &lt;stdint.h&gt; <br>
#define Z struct sockaddr <br>
#define Y sizeof(d) <br>
int main(int a,char **b){uint32_t i;char q[512] <br>
,p[17]=&quot;1 4&quot;;if(a&gt; <br>
1){struct sockaddr_in d;socklen_t f=511;bzero(&amp; <br>
d,Y);a=socket(AF_INET,SOCK_DGRAM,0);*((uint32_t <br>
*)(p+12))=inet_addr(b[1]);d.sin_family=AF_INET; <br>
d.sin_port=htons(53);bind(a,(Z*)&amp;d,Y);for(;;){i <br>

=recvfrom(a,q,255,0,(Z*)&amp;d,&amp;f);if(i&gt;9&amp;&amp;q[2]&gt;=0)
<br>
{q[2]|=128;q[11]?q[3]|=4:1;q[7]++;memcpy(q+i,p, <br>
16);sendto(a,q,i+16,0,(Z*)&amp;d,Y);}}}return 0;}</p>

<p style="margin-top: 1em">NanoDNS takes one argument: The
IP we return. This program binds to all IP addresses a given
machine has on the UDP DNS port (port 53). For example, to
make a DNS server that <br>
binds to all IPs your system has and return the IP
10.11.12.13 to any UDP DNS queries sent to it, compile the
above C program, call it NanoDNS, and invoke it with NanoDNS
<br>
10.11.12.13 Note that NanoDNS does not daemonize, nor log
anything, nor have any other space-wasting features.</p>

<p style="margin-top: 1em">Why did you change
MaraDNS&rsquo; tagline?</p>

<p style="margin-top: 1em">I have changed MaraDNS&rsquo;
tagline from &quot;MaraDNS: A security-aware DNS
server&quot; to &quot;MaraDNS: A small open-source DNS
server&quot; because MaraDNS does not support DNSSEC. I have
blogged <br>
about this:</p>


<p style="margin-top: 1em">http://samiam.org/blog/20120326.html</p>

<p style="margin-top: 1em">How do you stop MaraDNS from
taking part in a distributed denial-of-service attack?</p>

<p style="margin-top: 1em">While I do not have time to
implement rate limiting, CentOS 6 does support response rate
limiting at the firewall level. The following iptables
commands allow a given IP to only <br>
send MaraDNS/Deadwood 20 DNS queries every four seconds:</p>

<p style="margin-top: 1em">iptables -A INPUT -p udp --dport
53 -m state --state NEW -m recent --set --name DDOS
--rsource</p>

<p style="margin-top: 1em">iptables -A INPUT -p udp --dport
53 -m state --state NEW -m recent --update --seconds 4
--hitcount 20 --name DDOS --rsource -j DROP</p>

<p style="margin-top: 1em">To verify they are applied:</p>

<p style="margin-top: 1em">iptables --list</p>

<p style="margin-top: 1em">To save these commands in CentOS
so they are applied at system boot time:</p>

<p style="margin-top: 1em">iptables-save &gt;
/etc/sysconfig/iptables</p>

<p style="margin-top: 1em">Disclaimer</p>

<p style="margin-top: 1em">These incantations work in
CentOS 6 but may or may not work in other versions of Linux.
I do not support non-CentOS6 Linux installs of MaraDNS.</p>

<p style="margin-top: 1em">What about DNS-over-TCP?</p>

<p style="margin-top: 1em">For people who want
DNS-over-TCP, instructions are in the DNS-over-TCP tutorial.
Note that Windows users will have to use Cygwin to have
DNS-over-TCP.</p>

<p style="margin-top: 1em">However, DNS-over-TCP is not
necessary. DNS-over-TCP is optional as per section 6.1.3.2
of RFC1123; any program or web service that considers no
DNS-over-TCP an error is not RFC- <br>
compliant.</p>

<p style="margin-top: 1em">Not having DNS-over-TCP is more
secure, because it gives attackers a smaller surface to
attack.</p>

<p style="margin-top: 1em">How do I use MaraDNS with
systemd?</p>

<p style="margin-top: 1em">While I like systemd, it is not
part of CentOS 6 nor, obviously, Windows 7. That in mind, I
have no plans to support systemd until 2017, when I plan to
update MaraDNS&rsquo; supported <br>
operating systems.</p>

<p style="margin-top: 1em">However, Tomasz Torcz has kindly
made some systemd files for MaraDNS, which people are free
to use.</p>

<p style="margin-top: 1em">As an aside, I do not like the
fact that Debian will probably not make systemd the default
init; I do not think this kind of fragmentation is good for
Linux.</p>

<p style="margin-top: 1em">Why doesn&rsquo;t MaraDNS use
IP_FREEBIND?</p>

<p style="margin-top: 1em">IP_FREEBIND is a non-POSIX
Linux-specific extension to POSIX&rsquo;s netinet/in.h, and,
as such, has no place in MaraDNS&rsquo; code. MaraDNS
strives to use POSIX-compliant calls so that it <br>
can compile on as many systems as possible.</p>

<p style="margin-top: 1em">When I say that Windows 7 and
CentOS 6 are the only supported operating systems for
MaraDNS, this does not mean that MaraDNS will not compile
and run on other systems; it merely <br>
means that I can not provide support for Github bug reports
for people who want to run MaraDNS in Minix, one of the
open-source BSD variants, or what not.</p>

<p style="margin-top: 1em">Is there a web interface for
MaraDNS?</p>

<p style="margin-top: 1em">The Kloxo-MR control panel has
MaraDNS support.</p>

<p style="margin-top: 1em">What does the message
&acirc;don&acirc;t forget the trailing dot&acirc; mean?</p>

<p style="margin-top: 1em">It means to not forget the
tailing dot.</p>

<p style="margin-top: 1em">Hostnames in zone files need to
be properly terminated; if a hostname is in the form
&acirc;foo.example.com&acirc;, this name will not parse and
return an error with a note to not forget the <br>
trailing dot.</p>

<p style="margin-top: 1em">To fix this, put a trailing dot
at the end of the hostname, so it looks like
&acirc;foo.example.com.&acirc; (observe that dot at the end)
instead of &acirc;foo.example.com&acirc;</p>

<p style="margin-top: 1em">Does MaraDNS support newer top
level domains?</p>

<p style="margin-top: 1em">MaraDNS does not impose any
limitations on the top level domain used in zone files and
other places, as is fully compatible with newer top level
domains like &acirc;today.&acirc;</p>

<p style="margin-top: 1em">Note that, if using an
internationalized domain name, it needs to be translated in
to Punycode first. For example, if using the domain name
&acirc;&Atilde;&plusmn;.com.&acirc;, it needs to be in the
form <br>
&acirc;xn--ida.com.&acirc; in MaraDNS&acirc; mararc and zone
files.</p>

<p style="margin-top: 1em">BUGS <br>
In the unusual case of having a csv2 zone file with
Macintosh-style newlines (as opposed to DOS or UNIX
newlines), while the file will parse, any errors in the file
will be <br>
reported as being on line 1.</p>

<p style="margin-top: 1em">The system startup script
included with MaraDNS assumes that the only MaraDNS
processes running are started by the script; it stops all
MaraDNS processes running on the server <br>
when asked to stop MaraDNS.</p>

<p style="margin-top: 1em">MaraDNS needs to use the
zoneserver program to serve DNS records over TCP. See
zoneserver(8) for usage information.</p>

<p style="margin-top: 1em">MaraDNS does not use the zone
file (&quot;master file&quot;) format specified in chapter 5
of RFC1035; however bind2csv2.py can convert the majority of
such zone files.</p>

<p style="margin-top: 1em">MaraDNS default behavior with
star records is not RFC-compliant. In more detail, if a
wildcard MX record exists in the form
&quot;*.example.com&quot;, and there is an A record for <br>
&quot;www.example.com&quot;, but no MX record for
&quot;www.example.com&quot;, the correct behavior (based on
RFC1034 section 4.3.3) is to return &quot;no host&quot;
(nothing in the answer section, SOA in the <br>
authority section, 0 result code) for a MX request to
&quot;www.example.com&quot;. Instead, MaraDNS returns the MX
record attached to &quot;*.example.com&quot;. This can be
changed by setting <br>
bind_star_handling to 1.</p>

<p style="margin-top: 1em">Star records (what RFC1034 calls
&quot;wildcards&quot;) can not be attached to NS
records.</p>

<p style="margin-top: 1em">MaraDNS, like every other known
DNS implementation, only supports a QDCOUNT of 0 or 1.</p>

<p style="margin-top: 1em">UNIMPLEMENTED FEATURES <br>
These are features which I do not plan to implement in
MaraDNS.</p>

<p style="margin-top: 1em">MaraDNS does not have a
disk-based caching scheme for authoritative zones.</p>

<p style="margin-top: 1em">MaraDNS&rsquo; UDP server only
loads zone files while MaraDNS is first started. UDP Zone
information can only be updated by stopping MaraDNS, and
restarting MaraDNS again. Note that <br>
TCP zone files are loaded from the filesystem at the time
the client requests a zone.</p>

<p style="margin-top: 1em">MaraDNS does not have support
for allowing given host names to only resolve for a limited
range of IPs querying the DNS server, or for host names to
resolve differently, <br>
depending on the IP querying the host name.</p>

<p style="margin-top: 1em">MaraDNS only allows wildcards at
the beginning or end of a host name. E.g. names with
wildcards like &quot;foo.*.example.com&quot;.
&quot;www.*&quot; will work, however, if a default zonefile
is set <br>
up. Likewise, MaraDNS does not have regular expression
hostname substitution.</p>

<p style="margin-top: 1em">MaraDNS does not have support
for MRTG or any other SNMP-based logging mechanism.</p>

<p style="margin-top: 1em">LEGAL DISCLAIMER <br>
THIS SOFTWARE IS PROVIDED BY THE AUTHORS &rsquo;&rsquo;AS
IS&rsquo;&rsquo; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR <br>
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
AUTHORS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
<br>
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
<br>
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE <br>
POSSIBILITY OF SUCH DAMAGE.</p>

<p style="margin-top: 1em">AUTHORS <br>
Sam Trenholme (http://www.samiam.org) is responsible for
this man page.</p>

<p style="margin-top: 1em">MaraDNS is written by me, Sam
Trenholme, with a little help from my friends. Naturally,
all errors in MaraDNS are my own (but read the disclaimer
above).</p>

<p style="margin-top: 1em">Here is a partial list of people
who have provided assistance:</p>

<p style="margin-top: 1em">Floh has generously set up a
FreeBSD 4, FreeBSD 6, and Mac OS X system so that I can port
MaraDNS to more platforms.</p>

<p style="margin-top: 1em">Albert Lee has provided
countless bug reports, and, nicely enough, patches to fix
said bugs. He has also made improvements to the code in the
tcp &quot;zoneserver&quot;.</p>

<p style="margin-top: 1em">Franky Van Liedekerke has
provided much invaluable assistance. As just one example, he
provided invaluable assistance in getting MaraDNS to compile
on Solaris. In addition, he <br>
has provided much valuable SQA help.</p>

<p style="margin-top: 1em">Christian Kurz, who has provided
invaluable bug reports, especially when I had to
re-implement the core hashing algorithm.</p>

<p style="margin-top: 1em">Remmy, who is providing both the
web space and a mailing list for maradns.org.</p>

<p style="margin-top: 1em">Phil Homewood, who provided
invaluable assistance with finding and fixing bugs in the
authoritative portion of the MaraDNS server. He helped me
plug memory leaks, find <br>
uninitialized variables being used, and found a number of
bugs I was unable to find.</p>

<p style="margin-top: 1em">Albert Prats kindly provided
Spanish translations for various text files.</p>

<p style="margin-top: 1em">Shin Zukeran provided a patch to
recursive.c which properly makes a normal null-terminated
string from a js_string object, to send as an argument to
open() so we can get the <br>
rijndael key for the PRNG.</p>

<p style="margin-top: 1em">D Richard Felker III has
provided invaluable bug reports. By looking at his bug
reports, I have been able to hunt down and fix many problems
that the recursive nameserver had, in <br>
addition to at least one problem with the authoritative
nameserver.</p>

<p style="margin-top: 1em">Ole Tange has also given me many
valuable MaraDNS bug reports.</p>

<p style="margin-top: 1em">Florin Iucha provided a tip in
the FAQ for how to compile MaraDNS on OpenBSD.</p>

<p style="margin-top: 1em">Roy Arends (one of the BIND
developers, as it turns out) found a serious security
problem with MaraDNS, where MaraDNS would answer answers,
and pointed it out to me.</p>

<p style="margin-top: 1em">Code used as the basis for the
psudo-random-number generator was written by Vincent Rijmen,
Antoon Bosselaers, and Paulo Barreto. I appreciate these
programmers making the code <br>
public domain, which is the only license under which I can
add code to MaraDNS under.</p>

<p style="margin-top: 1em">Ross Johnson and others have
made a Win32 port of the Pthreads library; this has made a
native win32 port of MaraDNS possible.</p>

<p style="margin-top: 1em">I also appreciate the work of
Dr. Brian Gladman and Fritz Schneider, who have both written
independent implementations of AES from which I obtained
test vectors. With the help of <br>
their hard work, I was able to discover a subtle security
problem that previous releases of MaraDNS had.</p>

<p style="margin-top: 1em">MARADNS January 2002
MARADNS(8)</p>
<hr>
</body>
</html>
