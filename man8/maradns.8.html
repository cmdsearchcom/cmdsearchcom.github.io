<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MARADNS(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MARADNS(8)</td>
    <td class="head-vol">MaraDNS reference</td>
    <td class="head-rtitle">MARADNS(8)</td>
  </tr>
</table>
<div class="manual-text">
<pre>
Erre con erre cigarro
Erre con erre barril
R&#x00E1;pido ruedan los carros
En el ferrocarril
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
maradns - DNS server
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>maradns [ -v | -f mararc_file_location ]</b>
<h1 class="Sh" title="Sh" id="TABLE_OF_CONTENTS"><a class="selflink" href="#TABLE_OF_CONTENTS">TABLE
  OF CONTENTS</a></h1>
This man page has the following sections:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
Name 
Synopsis
Table of Contents
Description
Usage
Firewall Configuration
Frequently Asked Questions
Bugs
Unimplemented Features
Legal Disclaimer
Authors
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>maradns</b> is a DNS server written with security, simplicity, and
  performance in mind.
<div class="Pp"></div>
<b>maradns</b> has two forms of arguments, both of which are optional.
<div class="Pp"></div>
The first is the location of a <b>mararc</b> file which MaraDNS obtains all
  configuration information from. The default location of this file is
  <b>/etc/mararc</b>. This is specified in the form <b>maradns -f
  mararc_file_location</b>; <i>mararc_file_location</i> is the location of the
  mararc file.
<div class="Pp"></div>
It is also possible to have MaraDNS display the version number and exit. This is
  specified by invoking maradns in the form <b>maradns -v</b> or <b>maradns
  --version</b>
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
MaraDNS consists of two programs: maradns, an authoritative-only nameserver, and
  Deadwood, a recursive name server. Deadwood has its own man page.
<div class="Pp"></div>
In order for MaraDNS to function as an authoritative nameserver, two or more
  files need to be set up: the mararc file and one or more &quot;csv2&quot; (or
  &quot;csv1&quot;) zone files.
<div class="Pp"></div>
The format of a csv2 zone file can be obtained from the <b>csv2(5)</b> manual
  page. The configuration format of the mararc file can be obtained from the
  <b>mararc(5)</b> manual page.
<div class="Pp"></div>
In order to have MaraDNS run as a daemon, the duende program is used to
  daemonize MaraDNS. See the <b>duende(8)</b> manual page for details.
<h1 class="Sh" title="Sh" id="FIREWALL_CONFIGURATION"><a class="selflink" href="#FIREWALL_CONFIGURATION">FIREWALL
  CONFIGURATION</a></h1>
When using the maradns authoritative nameserver, allow UDP connections from all
  hosts on the internet to UDP port 53 for the IP that the authoritative
  nameserver uses.
<div class="Pp"></div>
When using the Deadwood recursive nameserver:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Allow UDP connections from the Deadwood server to any
      machine on the internet where the UDP destination port is 53</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Allow UDP connections from any machine on the internet to
      the IP of the recursive server, where the source port from the remote
      server is 53, and the destination port is between 15000 and 19095
      (inclusive)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Allow UDP connections from IPs that use Deadwood as a
      recursive DNS server to port 53</dd>
</dl>
<div class="Pp"></div>
Deadwood uses a strong secure RNG (RadioGatun[32]) for both the query (16 bits
  of entropy) and the source port of the query (12 bits of entropy). This makes
  spoofing replies to a Deadwood recursive server more difficult, since the
  attacker has only a one in 250 million chance that a given spoofed reply will
  be considered valid.
<h1 class="Sh" title="Sh" id="FREQUENTLY_ASKED_QUESTIONS"><a class="selflink" href="#FREQUENTLY_ASKED_QUESTIONS">FREQUENTLY
  ASKED QUESTIONS</a></h1>
<br/>
<b>INDEX</b>
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">1. I'm using an older version of MaraDNS
<div class="Pp"></div>
2. How do I try out MaraDNS?
<div class="Pp"></div>
3. What license is MaraDNS released under?
<div class="Pp"></div>
4. How do I report bugs in MaraDNS?
<div class="Pp"></div>
5. Some of the postings to the mailing list do not talk about MaraDNS!
<div class="Pp"></div>
6. How do I get off the mailing list?
<div class="Pp"></div>
7. How do I set up reverse DNS on MaraDNS?
<div class="Pp"></div>
8. I am on a slow network, and MaraDNS can not process recursive queries
<div class="Pp"></div>
9. When I try to run MaraDNS, I get a cryptic error message.
<div class="Pp"></div>
10. After I start MaraDNS, I can not see the process when I run netstat -na
<div class="Pp"></div>
11. What string library does MaraDNS use?
<div class="Pp"></div>
12. Why does MaraDNS use a multi-threaded model?
<div class="Pp"></div>
13. I feel that XXX feature should be added to MaraDNS
<div class="Pp"></div>
14. I feel that MaraDNS should use another documentation format
<div class="Pp"></div>
15. Is there any process I need to follow to add a patch to MaraDNS?
<div class="Pp"></div>
16. Can MaraDNS act as a primary nameserver?
<div class="Pp"></div>
17. Can MaraDNS act as a secondary nameserver?
<div class="Pp"></div>
18. What is the difference between an authoritative and a recursive DNS server?
<div class="Pp"></div>
19. The getzone client isn't allowing me to add certain hostnames to my zone
<div class="Pp"></div>
20. Is MaraDNS portable?
<div class="Pp"></div>
21. Can I use MaraDNS in Windows?
<div class="Pp"></div>
22. MaraDNS freezes up after being used for a while
<div class="Pp"></div>
23. What kind of Python integration does MaraDNS have
<div class="Pp"></div>
24. Doesn't &quot;kvar&quot; mean &quot;four&quot; in Esperanto?
<div class="Pp"></div>
25. How scalable is MaraDNS?
<div class="Pp"></div>
26. I am having problems setting upstream_servers
<div class="Pp"></div>
27. Why doesn't the MaraDNS.org web page validate?
<div class="Pp"></div>
28. How do MX records work?
<div class="Pp"></div>
29. Does MaraDNS have support for SPF?
<div class="Pp"></div>
30. I'm having problems resolving CNAMES I have set up.
<div class="Pp"></div>
31. I have a NS delegation, and MaraDNS is doing strange things.
<div class="Pp"></div>
32. I am transferring a zone from another server, but the NS records are these
  strange &quot;synth-ip&quot; records.
<div class="Pp"></div>
33. Where is the root.hints file?
<div class="Pp"></div>
34. Are there any plans to use autoconf to build MaraDNS?
<div class="Pp"></div>
35. How do I change the compiler or compile-time flags with MaraDNS' build
  process?
<div class="Pp"></div>
36. Will you make a package for the particular Linux distribution I am using?
<div class="Pp"></div>
37. I am using the native Windows port of MaraDNS, and some features are not
  working.
<div class="Pp"></div>
38. MaraDNS isn't starting up
<div class="Pp"></div>
39. You make a lot of releases of MaraDNS; at our ISP/IT department, updating
  software is non-trivial.
<div class="Pp"></div>
40. I have star records in my zones, and am having problems with NXDOMAINs/IPV6
  resolution
<div class="Pp"></div>
41. I have a zone with only SOA/NS records, and the zone is not working.
<div class="Pp"></div>
42. I am having problems registering my domain with AFNIC (the registrar for .fr
  domains)
<div class="Pp"></div>
43. I can't see the full answers for subdomains I have delegated
<div class="Pp"></div>
44. MaraDNS 1 has a problem resolving a domain
<div class="Pp"></div>
45. MaraDNS 1.2 has issues with NXDOMAINS and case sensitivity.
<div class="Pp"></div>
46. Can MaraDNS offer protection from phishing and malicious sites?
<div class="Pp"></div>
47. Does maradns support star (wildcard) records?
<div class="Pp"></div>
48. I'm having problems using MaraDNS with some *NIX command line applications
  like telnet
<div class="Pp"></div>
49. My virus scanner reports that MaraDNS or Deadwood has a virus
<div class="Pp"></div>
50. I can not subscribe to the MaraDNS mailing list
<div class="Pp"></div>
51. How does MaraDNS respond to EDNS (RFC2671) packets?
<div class="Pp"></div>
52. How to I get MaraDNS to always give the same IP to all DNS queries?
<div class="Pp"></div>
53. Why did you change MaraDNS' tagline?
<div class="Pp"></div>
54. How do you stop MaraDNS from taking part in a distributed denial-of-service
  attack?
<div class="Pp"></div>
55. What about DNS-over-TCP?
<div class="Pp"></div>
56. How do I use MaraDNS with systemd?
<div class="Pp"></div>
57. Why doesn't MaraDNS use IP_FREEBIND?
<div class="Pp"></div>
58. Is there a web interface for MaraDNS?
<div class="Pp"></div>
59. What does the message &#x201C;don&#x2019;t forget the trailing dot&#x201D;
  mean?
<div class="Pp"></div>
60. Does MaraDNS support newer top level domains?</div>
<div class="Pp"></div>
<br/>
<b>ANSWERS</b>
<div class="Pp"></div>
<br/>
<b>1. I'm using an older version of MaraDNS</b>
<div class="Pp"></div>
Upgrade to MaraDNS 2.0. Here is an upgrade guide.
<div class="Pp"></div>
MaraDNS 1.4 is only supported for critical security updates; this support is
  being phased out and MaraDNS 1 will no longer be supported on June 21, 2015.
<div class="Pp"></div>
<br/>
<b>2. How do I try out MaraDNS?</b>
<div class="Pp"></div>
Read the quick start guide, which is the file named 0QuickStart in the MaraDNS
  distribution.
<div class="Pp"></div>
<br/>
<b>3. What license is MaraDNS released under?</b>
<div class="Pp"></div>
MaraDNS is released with the following two-clause BSD-type license:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">Copyright (c) 2002-2015 Sam Trenholme and
  others
<div class="Pp"></div>
TERMS
<div class="Pp"></div>
Redistribution and use in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
<div class="Pp"></div>
1. Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.
<div class="Pp"></div>
2. Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.
<div class="Pp"></div>
This software is provided 'as is' with no guarantees of correctness or fitness
  for purpose.</div>
<div class="Pp"></div>
<br/>
<b>4. How do I report bugs in MaraDNS?</b>
<div class="Pp"></div>
Post your bug report as a Github issue.
<div class="Pp"></div>
<br/>
<b>5. Some of the postings to the mailing list do not talk about</b>
  <b>MaraDNS!</b>
<div class="Pp"></div>
As of September 2013, the mailing list has become moderated and only postings on
  the mailing list are relevant MaraDNS announcements.
<div class="Pp"></div>
<br/>
<b>6. How do I get off the mailing list?</b>
<div class="Pp"></div>
Send an email to list-unsubscribe@maradns.org, or an email to
  list-request@maradns.org with &quot;unsubscribe&quot; as the subject line.
<div class="Pp"></div>
The mailing list will send you an email confirming the unsubscribe request; this
  email needs to be replied to in order to get off the list.
<div class="Pp"></div>
<br/>
<b>7. How do I set up reverse DNS on MaraDNS?</b>
<div class="Pp"></div>
Reverse DNS (sometimes called &quot;reverse mapping&quot;) is set up by using
  PTR (pointer) records. For example, the PTR record which performs the reverse
  DNS lookup for the ip 10.2.3.4 looks like this in a CSV2 zone file:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">4.3.2.10.in-addr.arpa. PTR
  www.example.com.</div>
<div class="Pp"></div>
It is also possible to use a special &quot;FQDN4&quot; which automatically sets
  up the reverse mapping of a given record:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">www.example.com. FQDN4 10.2.3.4</div>
<div class="Pp"></div>
If you wish to have a PTR (reverse DNS lookup; getting a DNS name from a numeric
  IP) record work on the internet at large, it is not a simple matter of just
  adding a record like this to a MaraDNS zonefile. One also needs control of the
  appropriate in-addr.arpa. domain.
<div class="Pp"></div>
While it could make logical sense to contact the IP 10.11.12.13 when trying to
  get the reverse DNS lookup (fully qualified domain name) for a given IP, DNS
  servers don't do this. DNS server, instead, contact the root DNS servers for a
  given in-addr.arpa name to get the reverse DNS lookup, just like they do with
  any other record type.
<div class="Pp"></div>
When an internet service provider is given a block of IPs, they are also given
  control of the DNS zones which allow them to control reverse DNS lookups for
  those IPs. While it is possible to obtain a domain and run a DNS server
  without the knowledge or intervention of an ISP, being able to control reverse
  DNS lookups for those IPs requires ISP intervention.
<div class="Pp"></div>
<br/>
<b>8. I am on a slow network, and Deadwood can not process recursive</b>
  <b>queries</b>
<div class="Pp"></div>
Deadwood, by default, only waits two seconds for a reply from a remote DNS
  server. This default can be increased by adding a line like this in the mararc
  file:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
timeout_seconds = 5
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
Note that making this too high will slow MaraDNS down when DNS servers are down,
  which is, alas, all too common on today's internet.
<div class="Pp"></div>
<br/>
<b>9. When I try to run MaraDNS, I get a cryptic error message.</b>
<div class="Pp"></div>
There is usually some context of where there is a syntax error in a data file
  before the cryptic error message. For example, when there is a syntax error in
  a csv2 zone file, MaraDNS will tell you exactly at what point it had to
  terminate parsing of the zone file.
<div class="Pp"></div>
If MaraDNS does return a cryptic error message without letting you know what is
  wrong, let us know in a Github issue so that we can fix the bug. MaraDNS is
  designed to be easy to use; cryptic error messages go against this spirit.
<div class="Pp"></div>
<br/>
<b>10. After I start MaraDNS, I can not see the process when I run</b>
  <b>netstat -na </b>
<div class="Pp"></div>
Udp services do not have a prominent &quot;LISTEN&quot; when netstat is run.
<div class="Pp"></div>
When MaraDNS is up, the relevant line in the netstat output looks like this: udp
  0 0 127.0.0.1:53 0.0.0.0:*
<div class="Pp"></div>
While on the topic of netstat, if you run netstat -nap as root on Linux and some
  other *nix operating systems, you can see the names of the processes which are
  providing internet services.
<div class="Pp"></div>
<br/>
<b>11. What string library does MaraDNS use?</b>
<div class="Pp"></div>
MaraDNS uses its own string library, which is called the &quot;js_string&quot;
  library. Man pages for most of the functions in the js_string library are in
  the folder doc/man of the MaraDNS distribution
<div class="Pp"></div>
<br/>
<b>12. Why does MaraDNS use a multi-threaded model?</b>
<div class="Pp"></div>
MaraDNS 2.0 no longer uses threads.
<div class="Pp"></div>
It took me three years to rewrite MaraDNS' recursive resolver as a separate
  non-threaded daemon. This has been done, and now all recursion is done with
  Deadwood which does not need threads.
<div class="Pp"></div>
<br/>
<b>13. I feel that XXX feature should be added to MaraDNS</b>
<div class="Pp"></div>
There are no plans to add new features to MaraDNS or Deadwood at this time.
<div class="Pp"></div>
<br/>
<b>14. I feel that MaraDNS should use another documentation format</b>
<div class="Pp"></div>
The reason that MaraDNS uses its own documentation format is to satisfy both the
  needs of translators to have a unified document format and my own need to use
  a documentation format that is simple enough to be readily understood and
  which I can add features on an as needed basis.
<div class="Pp"></div>
The documentation format is essentially simplified HTML with some special tags
  added to meet MaraDNS' special needs.
<div class="Pp"></div>
This gives me more flexibility to adapt the documentation format to changing
  needs. For example, when someone pointed out that it's not a good idea to have
  man pages with hi-bit characters, it was a simple matter to add a new HIBIT
  tag which allows man pages to be without hi-bit characters, and other document
  formats to retain hi-bit characters.
<div class="Pp"></div>
Having a given program have its own documentation format is not without
  precedent; Perl uses its own &quot;pod&quot; documentation format.
<div class="Pp"></div>
<br/>
<b>15. Is there any process I need to follow to add a patch to</b>
  <b>MaraDNS?</b>
<div class="Pp"></div>
I no longer accept third party patches
<div class="Pp"></div>
<br/>
<b>16. Can MaraDNS act as a primary nameserver?</b>
<div class="Pp"></div>
Yes.
<div class="Pp"></div>
The zoneserver program serves zones so that other DNS servers can be secondaries
  for zones which MaraDNS serves. This is a separate program from the maradns
  server, which processes authoritative UDP DNS queries, and Deadwood which
  processes recursive DNS queries.
<div class="Pp"></div>
See the DNS master document in the MaraDNS tutorial for details.
<div class="Pp"></div>
<br/>
<b>17. Can MaraDNS act as a secondary nameserver?</b>
<div class="Pp"></div>
Yes.
<div class="Pp"></div>
Please read the DNS slave document, which is part of the MaraDNS tutorial.
<div class="Pp"></div>
<br/>
<b>18. What is the difference between an authoritative and a recursive</b>
  <b>DNS server?</b>
<div class="Pp"></div>
A recursive DNS server is a DNS server that is able to contact other DNS servers
  in order to resolve a given domain name label. This is the kind of DNS server
  one points to in /etc/resolv.conf. MaraDNS uses the Deadwood daemon to process
  recursive DNS queries.
<div class="Pp"></div>
An authoritative DNS server is a DNS server that a recursive server contacts in
  order to find out the answer to a given DNS query. The maradns daemon
  processes authoritative DNS queries.
<div class="Pp"></div>
<br/>
<b>19. The fetchzone client isn't allowing me to add certain</b> <b>hostnames to
  my zone</b>
<div class="Pp"></div>
For security reasons, MaraDNS' fetchzone client does not add records which are
  not part of the zone in question. For example, if someone has a zone for
  example.com, and this record in the zone:
<div class="Pp"></div>
1.1.1.10.in-addr.arpa. PTR dns.example.com.
<div class="Pp"></div>
MaraDNS will not add the record, since the record is out-of-bailiwick. In other
  words, it is a host name that does not end in .example.com.
<div class="Pp"></div>
There are two workarounds for this issue:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Create a zone file for 1.1.10.in-addr.arpa., and put the
      PTR records there.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Use rcp, rsync, or another method to copy over the zone
      files in question.</dd>
</dl>
<div class="Pp"></div>
<br/>
<b>20. Is MaraDNS portable?</b>
<div class="Pp"></div>
MaraDNS is developed in CentOS 6 and Windows 7. MaraDNS may or may not compile
  and run on other systems.
<div class="Pp"></div>
<br/>
<b>21. Can I use MaraDNS in Windows?</b>
<div class="Pp"></div>
Yes. There is both a partial mingw32 (native win32 binary) port and a full
  Cygwin port of MaraDNS; both of these ports are part of the native build of
  MaraDNS. Deadwood has full Windows support, including the ability to run as a
  service.
<div class="Pp"></div>
<br/>
<b>22. MaraDNS freezes up after being used for a while</b>
<div class="Pp"></div>
If using your ISP's name servers or some other name servers which are not, in
  fact, root name servers, please make sure that you are using the
  upstream_servers dictionary variable instead of the root_servers dictionary
  variable.
<div class="Pp"></div>
If you still see MaraDNS freeze up after making this correction, please send a
  bug report as a Github issue.
<div class="Pp"></div>
<br/>
<b>23. What kind of Python integration does MaraDNS have</b>
<div class="Pp"></div>
The mararc file uses the same syntax that Python uses; in fact, Python can parse
  a properly formatted mararc file.
<div class="Pp"></div>
There is no other integration with Python.
<div class="Pp"></div>
<br/>
<b>24. Doesn't &quot;kvar&quot; mean &quot;four&quot; in Esperanto?</b>
<div class="Pp"></div>
Indeed, it does. However the use of &quot;kvar&quot; in the MaraDNS source code
  only coincidentally is an Esperanto word. &quot;kvar&quot; is short for
  &quot;Kiwi variable&quot;; a lot of the parsing code comes from the code used
  in the Kiwi spam filter project.
<div class="Pp"></div>
<br/>
<b>25. How scalable is MaraDNS?</b>
<div class="Pp"></div>
MaraDNS is optimized for serving a small number of domains as quickly as
  possible. That said, MaraDNS is remarkably efficnent for serving a large
  number of domains, as long as the server MaraDNS is on has the memory to fit
  all of the domains, and as long as the startup time for loading a large number
  of domains can be worked around.
<div class="Pp"></div>
The &quot;big-O&quot; or &quot;theta&quot; growth rates for various MaraDNS
  functions are as follows, where N is the number of authoritative host names
  being served:
<div class="Pp"></div>
<pre>
Startup time                            N
Memory usage                            N
Processing incoming DNS requests        1
</pre>
<div class="Pp"></div>
As can be seen, MaraDNS will process 1 or 100000 domains in the same amount of
  time, once the domain names are loaded in to memory.
<div class="Pp"></div>
<br/>
<b>26. I am having problems setting upstream_servers</b>
<div class="Pp"></div>
upstream_servers is only supported by Deadwood, and is no longer supported in
  MaraDNS 2.0. The upstream_servers dwood3rc variable is set thusly:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">upstream_servers[&quot;.&quot;] =
  &quot;10.3.28.79, 10.2.19.83&quot;</div>
<div class="Pp"></div>
Note the [&quot;.&quot;].
<div class="Pp"></div>
Note that the upstream_servers variable needs to be initialized before being
  used via upstream_servers = {} (the reason for this is so that a dwood3rc file
  has 100% Python-compatible syntax). A complete dwood3rc file that uses
  upstream_servers may look like this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
ipv4_bind_addresses = &quot;127.0.0.1&quot;
chroot_dir = &quot;/etc/maradns&quot;
recursive_acl = &quot;127.0.0.1/8&quot;
upstream_servers = {}
upstream_servers[&quot;.&quot;] = &quot;10.1.2.3, 10.2.4.6&quot;
</pre>
<div class="Pp"></div>
<br/>
<b>27. Why doesn't the MaraDNS.org web page validate?</b>
<div class="Pp"></div>
HTML pages on the MaraDNS.org web site should validate as HTML 4.0 Transitional.
  However, the CSS will not validate.
<div class="Pp"></div>
I have designed MaraDNS' web page to be usable and as attractive as possible in
  any major browser released in the last ten years. Cross-browser support is
  more important than strict W3 validation. The reason why the CSS does not
  validate is because I need a way to make sure there is always a scrollbar on
  the web page, even if the content is not big enough to merit one; this is to
  avoid the content jumping from page to page. There is no standard CSS tag that
  lets me do this. I'm using a non-standard tag to enable this in Gecko
  (Firefox's rendering engine); this is enabled by default in Trident (Internet
  Explorer's rendering engine). The standards are deficient and blind adherence
  to them would result in an inferior web site.
<div class="Pp"></div>
There are also two validation warnings generated by redefinitions which are
  needed as part of the CSS filters used to make the site attractive on older
  browsers with limited CSS support.
<div class="Pp"></div>
On a related note, the reason why I use tables instead of CSS for some of the
  layout is because Microsoft Internet Explorer 6 and other browsers do not have
  support for the max-width CSS property. Without this property, the web page
  will not scale down correctly without using tables. Additionally, tables allow
  a reasonably attractive header in browsers without CSS support.
<div class="Pp"></div>
<br/>
<b>28. How do MX records work?</b>
<div class="Pp"></div>
How MX records work:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The mail transport agent (Sendmail, Postfix, Qmail, MS
      Exchange, etc.) looks up the MX record for the domain</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">For each of the records returned, the MTA (mail transport
      agent) looks up the IP for the names.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">It will choose, at random, any of the MXes with the lowest
      priority number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Should that server fail, it will try another server with
      the same priority number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Should all MX records with a given priority number fail,
      the MTA will try sending email to any of the MX records with the
      second-lowest priority value.</dd>
</dl>
<div class="Pp"></div>
As an aside, do not have MX records point to CNAMEs.
<div class="Pp"></div>
<br/>
<b>29. Does MaraDNS have support for SPF?</b>
<div class="Pp"></div>
SPF, or sender policy framework, is method of using DNS that makes it more
  difficult to forge email. MaraDNS has full support for SPF, both via TXT
  records and RFC4408 SPF records.
<div class="Pp"></div>
SPF configuration is beyond the scope of MaraDNS' documentation. However, at the
  time this FAQ entry was last updated (July, 2013), information and
  documentation concerning SPF is available at http://openspf.org. The BIND
  examples will work in MaraDNS csv2 zone files as long as the double quotes
  (&quot;) are replaced by single quotes ('). For example, a SPF TXT record that
  looks like example.net. IN TXT &quot;v=spf1 +mx a:colo.example.com/28
  -all&quot; in a BIND zone file will look like example.net. TXT 'v=spf1 +mx
  a:colo.example.com/28 -all' in a MaraDNS zone file. MaraDNS can also make the
  corresponding SPF record, which will have the syntax example.net. SPF 'v=spf1
  +mx a:colo.example.com/28 -all'.
<div class="Pp"></div>
Use '\x7e' to put a tilde (&quot;~&quot; character) in a SPF record:
<div class="Pp"></div>
example.com. SPF 'v=spf1 +mx a:colo.example.com/28 '\x7e'all'
<div class="Pp"></div>
<br/>
<b>30. I'm having problems resolving CNAMES I have set up.</b>
<div class="Pp"></div>
This is probably because you have set up what MaraDNS calls a dangling CNAME
  record.
<div class="Pp"></div>
Let us suppose we have a CNAME record without an A record in the local DNS
  server's database, such as:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
	google.example.com. CNAME www.google.com.
</pre>
<div class="Pp"></div>
This record, which is a CNAME record for &quot;google.example.com&quot;, points
  to &quot;www.google.com&quot;. Some DNS servers will recursively look up
  www.google.com, and render the above record like this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
	google.example.com. CNAME www.google.com.
	www.google.com. A 66.102.7.104
</pre>
<div class="Pp"></div>
For security reasons, MaraDNS doesn't do this. Instead, MaraDNS will simply
  output:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
	google.example.com. CNAME www.google.com.
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Some stub resolvers will be unable to resolve google.example.com as a
  consequence.
<div class="Pp"></div>
If you set up MaraDNS to resolve CNAMEs thusly, you will get a warning in your
  logs about having a dangling CNAME record.
<div class="Pp"></div>
If you want to remove these warnings, add the following to your mararc file:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
	no_cname_warnings = 1
</pre>
<div class="Pp"></div>
Information about how to get MaraDNS to resolve dangling CNAME records is in the
  tutorial file dangling.html
<div class="Pp"></div>
<br/>
<b>31. I have a NS delegation, and MaraDNS is doing strange things.</b>
<div class="Pp"></div>
This is only an issue in MaraDNS 1.4. MaraDNS 2.0 does not allow the same IP to
  both authoritatively and recursively resolve records.
<div class="Pp"></div>
<br/>
<b>32. I am transferring a zone from another server, but the NS records</b>
  <b>are these strange &quot;synth-ip&quot; records. </b>
<div class="Pp"></div>
MaraDNS expects, in csv2 zone files, for all delegation NS records to be between
  the SOA record and the first non-NS record.
<div class="Pp"></div>
If a zone looks like this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
example.net. +600 soa ns1.example.net. 
hostmaster@example.net 10 10800 3600 604800 1080
example.net. +600 mx 10 mail.example.net.
example.net. +600 a 10.2.3.5
example.net. +600 ns ns1.example.net.
example.net. +600 ns ns3.example.net.
mail.example.net. +600 a 10.2.3.7
www.example.net. +600 a 10.2.3.11
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Then the NS records will be &quot;synth-ip&quot; records.
<div class="Pp"></div>
The zone should look like this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
example.net. +600 soa ns1.example.net. 
hostmaster@example.net 10 10800 3600 604800 1080
example.net. +600 ns ns1.example.net.
example.net. +600 ns ns3.example.net.
example.net. +600 mx 10 mail.example.net.
example.net. +600 a 10.2.3.5
mail.example.net. +600 a 10.2.3.7
www.example.net. +600 a 10.2.3.11
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
This will remove the &quot;synth-ip&quot; records.
<div class="Pp"></div>
To automate this process, this awk script is useful:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
fetchzone whatever.zone.foo 10.1.2.3 | awk '
{if($3 ~ /ns/ || $3 ~ /soa/){print}
else{a = a &quot;\n&quot; $0}}
END{print a}' &gt; zonefile.csv2
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Replace &quot;whatever.zone.foo&quot; with the name of the zone you are fetchin
  10.1.2.3 with the IP address of the DNS master, and zonefile.csv2 with the
  name of the zone file MaraDNS loads.
<div class="Pp"></div>
<br/>
<b>33. Where is the root.hints file?</b>
<div class="Pp"></div>
MaraDNS (actually, Deadwood), unlike BIND, does not need a complicated
  root.hints file in order to have custom root servers. In order to change the
  root.hints file, add something like this to your dwood3rc file:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
root_servers[&quot;.&quot;] =  &quot;131.161.247.232,&quot;
root_servers[&quot;.&quot;] += &quot;208.185.249.250,&quot;
root_servers[&quot;.&quot;] += &quot;66.227.42.140,&quot;
root_servers[&quot;.&quot;] += &quot;66.227.42.149,&quot;
root_servers[&quot;.&quot;] += &quot;65.243.92.254&quot;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Note that there is no &quot;+=&quot; in the first line, and the last line does
  not have a comma at the end. Read the recursive tutorial document for more
  information.
<div class="Pp"></div>
<br/>
<b>34. Are there any plans to use autoconf to build MaraDNS?</b>
<div class="Pp"></div>
No.
<div class="Pp"></div>
In more detail, MaraDNS does not use autoconf for the following reasons:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Autoconf is designed to solve a problem that existed in the
      mid 1990s but does not exist today: A large number of different
      incompatible C compilers and libc implementations. These days, most
      systems are using gcc as the compiler and some version of glibc as the
      libc. There is no longer a need, for example, to figure out whether a
      given implementation of getopt() allows '--' options. MaraDNS's
      ./configure script can be run in only a second or two; compare this to the
      3-5 minute process autoconf's ./configure needs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Autoconf leaves GPL-tained files in a program's build tree.
      MaraDNS is licensed under a BSD license that is <i>not</i> GPL-compatible,
      so MaraDNS can not be distributed with these GPL-licensed files.</dd>
</dl>
<div class="Pp"></div>
This leads us to the next question:
<div class="Pp"></div>
<br/>
<b>35. How do I change the compiler or compile-time flags with</b> <b>MaraDNS'
  build process?</b>
<div class="Pp"></div>
To change the compiler used by MaraDNS:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Run the ./configure script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Open up the file Makefile with an editor</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Look for a line that starts with CC</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">If there is no line that starts with CC, create one just
      before the line that starts with FLAGS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Change (or create) that line to look something like
      CC=gcc296 In this example, the 2.96 version of gcc is used to compile
      MaraDNS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Note that it is important to <b>not</b> remove anything
      from this line you do not understand; doing so will make MaraDNS unable to
      compile or run. So, if the CC line looks like
      CC=gcc&amp;nbsp;$(LDFLAGS)&amp;nbsp;-DNO_FLOCK and you want to compile
      with gcc 2.96, change the line to look like
      CC=gcc296&amp;nbsp;$(LDFLAGS)&amp;nbsp;-DNO_FLOCK retaining the flags
      added by the configuration script.</dd>
</dl>
<div class="Pp"></div>
Changing compile-time flags is a similar process:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Run the ./configure script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Open up the file Makefile with an editor</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Look for a line that starts with FLAGS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Change (or create) that line to look something like
      FLAGS=-O3 In this example, MaraDNS is compiled with the -O3 option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Note that it is important to <b>not</b> remove anything
      from this line you do not understand; doing so will make MaraDNS unable to
      compile or run. So, if the FLAGS line looks like
      FLAGS=-O2&amp;nbsp;-Wall&amp;nbsp;-DSELECT_PROBLEM and you want to compile
      at optimization level three, change this line to look like
      FLAGS=-O2&amp;nbsp;-Wall&amp;nbsp;-DSELECT_PROBLEM retaining the flags
      added by the configuration script. -DSELECT_PROBLEM for example, is needed
      in the Linux compile or MaraDNS will have problems with freezing up.</dd>
</dl>
<div class="Pp"></div>
<br/>
<b>36. Will you make a package for the particular Linux distribution I</b> <b>am
  using?</b>
<div class="Pp"></div>
No.
<div class="Pp"></div>
There is, however, a CentOS 5-compatible RPM spec file in the build directory.
<div class="Pp"></div>
<br/>
<b>37. I am using the native Windows port of MaraDNS, and some features</b>
  <b>are not working.</b>
<div class="Pp"></div>
Since Windows 32 does not have some features that *NIX OSes have, the native
  Windows port does not have all of the features of the *NIX version of MaraDNS.
  In particular, the following features are disabled:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">ipv6 (this is actually a mingw32, not a Windows
    deficiency)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The chroot_dir mararc variable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The maradns_gid and maradns_uid mararc variables</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The maxprocs mararc variable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The synth_soa_serial variable can not have a value of
    2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">There is no DNS-over-TCP support</dd>
</dl>
<div class="Pp"></div>
If any of the above features are desired, try compiling MaraDNS using Cygwin.
  Note that the Cygwin port of MaraDNS does not have ipv6 support, and that
  while chroot_dir works in Cygwin, it does not have the security that the *NIX
  chroot() call has.
<div class="Pp"></div>
<br/>
<b>38. MaraDNS isn't starting up</b>
<div class="Pp"></div>
This is usually caused by a syntax error in one's mararc file, or by another
  MaraDNS process already running. To see what is happening, look at your system
  log (/var/log/messages in Centos 3) to see what errors MaraDNS reports. If you
  do not know how to look at a system log, you can also invoke MaraDNS from the
  command line as root; any errors will be visible when starting MaraDNS.
<div class="Pp"></div>
<br/>
<b>39. You make a lot of releases of MaraDNS; at our ISP/IT department,</b>
  <b>updating software is non-trivial.</b>
<div class="Pp"></div>
Regularly updating software is required to keep something as complicated as a
  DNS server secure; there is not a DNS server out there so secure that it never
  needs to be updated.
<div class="Pp"></div>
Since MaraDNS is finished, updates usually only happen about once a year.
<div class="Pp"></div>
The last security bug which required a MaraDNS update was made before January
  30, 2015.
<div class="Pp"></div>
<br/>
<b>40. I have star records in my zones, and am having problems with</b>
  <b>NXDOMAINs/IPV6 resolution</b>
<div class="Pp"></div>
This was a bug in MaraDNS 1.2 which has long since been fixed.
<div class="Pp"></div>
<br/>
<b>41. I have a zone with only SOA/NS records, and the zone is not</b>
  <b>working.</b>
<div class="Pp"></div>
MaraDNS 1.2 had a bug where it did not correctly process zones without any
  &quot;normal&quot; records. Upgrade to MaraDNS 2.0.
<div class="Pp"></div>
<br/>
<b>42. I am having problems registering my domain with AFNIC (the</b>
  <b>registrar for .fr domains)</b>
<div class="Pp"></div>
Because of an issue with AFNIC (who, annoyingly enough, check the RA bit when
  registering a domain), in order to register a domain with AFNIC using MaraDNS
  as your DNS server, the following steps need to be followed:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">MaraDNS version 1.4 or 2.0 needs to be used; if you're
      using an older version of MaraDNS, upgrade.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">It is necessary to have recursion disabled, if using
      MaraDNS 1.4, either by compiling MaraDNS without recursive support
      (./configure --authonly ; make), or by making sure MaraDNS does not have
      recursion enabled (by not having recursive_acl set in one's MaraDNS 1.4
      mararc file)</dd>
</dl>
<div class="Pp"></div>
If one wishes to both register domains with AFNIC and use MaraDNS 1.4 as a
  recursive DNS server, it is required to have the recursive server be a
  separate instance of MaraDNS on a separate IP. It is not possible to have the
  same DNS server both send DNS packets in a way that both makes AFNIC happy and
  allows recursive queries.
<div class="Pp"></div>
Note also: AFNIC gives warnings about reverse DNS lookups; more information
  about this issue can be found in the FAQ entry about reverse DNS mappings
  (question 7). In addition, AFNIC requires DNS-over-TCP to work; information on
  configuring MaraDNS to have this can be found in the DNS-over-TCP tutorial.
<div class="Pp"></div>
<br/>
<b>43. I can't see the full answers for subdomains I have</b> <b>delegated</b>
<div class="Pp"></div>
To have the subdomains be visible to MaraDNS 1.4 recursive nameservers, add the
  following to your mararc file:
<div class="Pp"></div>
recurse_delegation = 1
<div class="Pp"></div>
<br/>
<b>44. MaraDNS 1 has a problem resolving a domain</b>
<div class="Pp"></div>
This issue should be fixed in MaraDNS 2.0.
<div class="Pp"></div>
Here's what happening: I have rewritten the recursive resolver for MaraDNS. The
  old code was always designed to be a placeholder until I wrote a new recursive
  resolver.
<div class="Pp"></div>
The new recursive resolver is called &quot;Deadwood&quot;; right now it's fully
  functional and part of MaraDNS 2.0. More information is here:
<div class="Pp"></div>
http://maradns.blogspot.com/search/label/Deadwood
<div class="Pp"></div>
http://maradns.samiam.org/deadwood/
<div class="Pp"></div>
Since the old recursive code is a bit difficult to maintain, and since I in the
  process of rewriting the recursive code, my rule is that I will only resolve
  security issues with MaraDNS 1.0's recursive resolver.
<div class="Pp"></div>
<br/>
<b>45. MaraDNS 1.2 had issues with NXDOMAINS and case sensitivity.</b>
<div class="Pp"></div>
There was a known bug in MaraDNS 1.2.12 where, should a client ask for a
  non-existent record in all caps, MaraDNS 1.2.12 will return a NXDOMAIN instead
  of a &quot;not there&quot; reply. Upgrade to 2.0.
<div class="Pp"></div>
<br/>
<b>46. Can MaraDNS offer protection from phishing and malicious</b>
  <b>sites?</b>
<div class="Pp"></div>
Deadwood can block up to about 20,000 domains. More details are in the Deadwood
  FAQ.
<div class="Pp"></div>
<br/>
<b>47. Does maradns support star (wildcard) records?</b>
<div class="Pp"></div>
Yes.
<div class="Pp"></div>
MaraDNS supports both having stars at the beginning of records and the end of
  records. For example, to have <i>anything</i>.example.com. have the IP
  10.1.2.3, add this line to the zone file for example.com:
<div class="Pp"></div>
*.example.com. A 10.1.2.3
<div class="Pp"></div>
To have stars at the end of records, csv2_default_zonefile has to be set. The
  mararc parameter bind_star_handling affects how star records are handled. More
  information is in the mararc man page.
<div class="Pp"></div>
<br/>
<b>48. I'm having problems using MaraDNS with some *NIX command line</b>
  <b>applications like telnet.</b>
<div class="Pp"></div>
Some *NIX command line networking applications, such as telnet and ssh, try to
  do either a reverse DNS lookup (IP-to-host name conversion) or an IPv6 lookup.
  This slows things down and sometimes causes the applications to not work at
  all.
<div class="Pp"></div>
For people who do not need IPv6 lookups, add the following line to one's mararc
  file to have MaraDNS respond to all IPv6 lookups with a bogus &quot;not
  found&quot; reply:
<div class="Pp"></div>
reject_aaaa = 1
<div class="Pp"></div>
If knowing the hostname a given IP has isn't important, these kinds of lookups
  can also be disabled:
<div class="Pp"></div>
reject_ptr = 1
<div class="Pp"></div>
<br/>
<b>49. My virus scanner reports that MaraDNS or Deadwood has a virus</b>
<div class="Pp"></div>
This can be caused either by a poorly written anti-virus program reporting a
  false positive, or because a virus on your system has infected your copy of
  MaraDNS/Deadwood.
<div class="Pp"></div>
Please use GPG to verify that the file which your scanner reports having a virus
  in has not been altered. In addition, please scan the file with AVG (free for
  non-commercial use) to verify your virus scanner has not reported a false
  positive.
<div class="Pp"></div>
If you have verified the GPG signature of the program and AVG reports a virus,
  please let us know with a Github issue. Otherwise, please use a better virus
  scanner and make sure there are no viruses on your computer.
<div class="Pp"></div>
<br/>
<b>50. I can not subscribe to the MaraDNS mailing list</b>
<div class="Pp"></div>
<i>Please note that the mailing list is no longer used to handle MaraDNS support
  requests. Please file a Github issue at
  https://github.com/samboy/MaraDNS/issues to file a MaraDNS bug report.</i>
<div class="Pp"></div>
The procedure for subscribing to the mailing list is as follows:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Send an email to list-request@maradns.org with
      &quot;Subscribe&quot; as the subject, or an email to
      list-subscribe@maradns.org</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">You will get an email from list-request@maradns.org asking
      you to confirm your subscription. This can be done by replying to the
      message, or, more simply, by clicking on the link in the message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Once you click on that link, click on the button marked
      &quot;subscribe to list list&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">You will now get a message stating 'Welcome to the
      &quot;list&quot; mailing list'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Note that the mailing list is moderated and only relevant
      MaraDNS announcements are approved. People who need help should read the
      manuals or search the MaraDNS webpage for support.</dd>
</dl>
<div class="Pp"></div>
If you get an email from list-request@maradns.org with the subject &quot;The
  results of your email commands&quot;, you did not correctly send an email to
  list-request@maradns.org with the subject &quot;Subscribe&quot;.
<div class="Pp"></div>
If you do not get the email from list-request@maradns.org asking you for a
  confirmation, ensure that this email is not in your &quot;spam&quot; or
  &quot;junk mail&quot; folder. If you are unable to get these emails at your
  email address, please get a gmail email account, which can successfully
  subscribe to the MaraDNS mailing list. Note that subscription confirmation
  emails may be in Gmail's &quot;promotions&quot; tab.
<div class="Pp"></div>
<br/>
<b>51. How does MaraDNS respond to EDNS (RFC2671) packets?</b>
<div class="Pp"></div>
MaraDNS 2 (both the authoritative maradns server and the recursive Deadwood
  server) responds to EDNS packets by ignoring the OPT record and acting as if
  it the packet did not have an OPT record.
<div class="Pp"></div>
MicroDNS (available in the tools/misc directory of any MaraDNS 2 release)
  responds to EDNS queries the same way Deadwood 2.9.03 did: By giving back
  &quot;NOTIMPL&quot; instead of answering the query with the default IP.
  NanoDNS, in the interest of minimizing code side, responds to EDNS requests by
  returning NOTIMPL in the header, giving the OPT query in the AN section of the
  response, and giving the default IP in the AR section of the DNS reply packet.
<div class="Pp"></div>
<br/>
<b>52. How to I get MaraDNS to always give the same IP to all DNS</b>
  <b>queries?</b>
<div class="Pp"></div>
There are three ways to have MaraDNS always give the same IP in reply to any DNS
  query given to it:
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">The best way to do this is to set up a default zonefile
      that causes any and all A queries to always give the IP (and also allows
      all AAAA queries to always give out the same IP6, all SPF or TXT queries
      to give out the same SPF record, etc.).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Another possibility, if someone just wants a simple DNS
      server that always gives out the same IP address to any and all DNS
      queries, is to use the MicroDNS program, available in tools/misc, as well
      as having its own web page.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">If MicroDNS is too bloated, there is also NanoDNS, which I
      will include the source code of below:</dd>
</dl>
<div class="Pp"></div>
<pre>
/*Placed in the public domain by Sam Trenholme*/
#include &lt;arpa/inet.h&gt;
#include &lt;string.h&gt;
#include &lt;stdint.h&gt;
#define Z struct sockaddr
#define Y sizeof(d)
int main(int a,char **b){uint32_t i;char q[512]
,p[17]=&quot;\xc0\f\0\x01\0\x01\0\0\0\0\0\x04&quot;;if(a&gt;
1){struct sockaddr_in d;socklen_t f=511;bzero(&amp;
d,Y);a=socket(AF_INET,SOCK_DGRAM,0);*((uint32_t
*)(p+12))=inet_addr(b[1]);d.sin_family=AF_INET;
d.sin_port=htons(53);bind(a,(Z*)&amp;d,Y);for(;;){i
=recvfrom(a,q,255,0,(Z*)&amp;d,&amp;f);if(i&gt;9&amp;&amp;q[2]&gt;=0)
{q[2]|=128;q[11]?q[3]|=4:1;q[7]++;memcpy(q+i,p,
16);sendto(a,q,i+16,0,(Z*)&amp;d,Y);}}}return 0;}
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
NanoDNS takes one argument: The IP we return. This program binds to all IP
  addresses a given machine has on the UDP DNS port (port 53). For example, to
  make a DNS server that binds to all IPs your system has and return the IP
  10.11.12.13 to any UDP DNS queries sent to it, compile the above C program,
  call it NanoDNS, and invoke it with NanoDNS 10.11.12.13 Note that NanoDNS does
  not daemonize, nor log anything, nor have any other space-wasting features.
<div class="Pp"></div>
<br/>
<b>Why did you change MaraDNS' tagline?</b>
<div class="Pp"></div>
I have changed MaraDNS' tagline from &quot;MaraDNS: A security-aware DNS
  server&quot; to &quot;MaraDNS: A small open-source DNS server&quot; because
  MaraDNS does not support DNSSEC. I have blogged about this:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">http://samiam.org/blog/20120326.html</div>
<div class="Pp"></div>
<br/>
<b>How do you stop MaraDNS from taking part in a distributed</b>
  <b>denial-of-service attack?</b>
<div class="Pp"></div>
While I do not have time to implement rate limiting, CentOS 6 does support
  response rate limiting at the firewall level. The following iptables commands
  allow a given IP to only send MaraDNS/Deadwood 20 DNS queries every four
  seconds:
<div class="Pp"></div>
iptables -A INPUT -p udp --dport 53 -m state --state NEW -m recent --set --name
  DDOS --rsource
<div>&#x00A0;</div>
<div class="Pp"></div>
iptables -A INPUT -p udp --dport 53 -m state --state NEW -m recent --update
  --seconds 4 --hitcount 20 --name DDOS --rsource -j DROP
<div>&#x00A0;</div>
<div class="Pp"></div>
To verify they are applied:
<div class="Pp"></div>
iptables --list
<div>&#x00A0;</div>
<div class="Pp"></div>
To save these commands in CentOS so they are applied at system boot time:
<div class="Pp"></div>
iptables-save &gt; /etc/sysconfig/iptables
<div>&#x00A0;</div>
<div class="Pp"></div>
<i>Disclaimer</i>
<div class="Pp"></div>
These incantations work in CentOS 6 but may or may not work in other versions of
  Linux. I do not support non-CentOS6 Linux installs of MaraDNS.
<div class="Pp"></div>
<br/>
<b>What about DNS-over-TCP?</b>
<div class="Pp"></div>
For people who want DNS-over-TCP, instructions are in the DNS-over-TCP tutorial.
  Note that Windows users will have to use Cygwin to have DNS-over-TCP.
<div class="Pp"></div>
However, DNS-over-TCP is not necessary. DNS-over-TCP is optional as per section
  6.1.3.2 of RFC1123; any program or web service that considers no DNS-over-TCP
  an error is not RFC-compliant.
<div class="Pp"></div>
Not having DNS-over-TCP is more secure, because it gives attackers a smaller
  surface to attack.
<div class="Pp"></div>
<br/>
<b>How do I use MaraDNS with systemd?</b>
<div class="Pp"></div>
While I like systemd, it is not part of CentOS 6 nor, obviously, Windows 7. That
  in mind, I have no plans to support systemd until 2017, when I plan to update
  MaraDNS' supported operating systems.
<div class="Pp"></div>
However, Tomasz Torcz has kindly made some systemd files for MaraDNS, which
  people are free to use.
<div class="Pp"></div>
As an aside, I do not like the fact that Debian will probably not make systemd
  the default init; I do not think this kind of fragmentation is good for Linux.
<div class="Pp"></div>
<br/>
<b>Why doesn't MaraDNS use IP_FREEBIND?</b>
<div class="Pp"></div>
IP_FREEBIND is a non-POSIX Linux-specific extension to POSIX's netinet/in.h,
  and, as such, has no place in MaraDNS' code. MaraDNS strives to use
  POSIX-compliant calls so that it can compile on as many systems as possible.
<div class="Pp"></div>
When I say that Windows 7 and CentOS 6 are the only supported operating systems
  for MaraDNS, this does not mean that MaraDNS will not compile and run on other
  systems; it merely means that I can not provide support for Github bug reports
  for people who want to run MaraDNS in Minix, one of the open-source BSD
  variants, or what not.
<div class="Pp"></div>
<br/>
<b>Is there a web interface for MaraDNS?</b>
<div class="Pp"></div>
The Kloxo-MR control panel has MaraDNS support.
<div class="Pp"></div>
<br/>
<b>What does the message &#x201C;don&#x2019;t forget the trailing dot&#x201D;
  mean?</b>
<div class="Pp"></div>
It means to not forget the tailing dot.
<div class="Pp"></div>
Hostnames in zone files need to be properly terminated; if a hostname is in the
  form &#x201C;foo.example.com&#x201D;, this name will not parse and return an
  error with a note to not forget the trailing dot.
<div class="Pp"></div>
To fix this, put a trailing dot at the end of the hostname, so it looks like
  &#x201C;foo.example.com.&#x201D; (observe that dot at the end) instead of
  &#x201C;foo.example.com&#x201D;
<div class="Pp"></div>
<br/>
<b>Does MaraDNS support newer top level domains?</b>
<div class="Pp"></div>
MaraDNS does not impose any limitations on the top level domain used in zone
  files and other places, as is fully compatible with newer top level domains
  like &#x201C;today.&#x201D;
<div class="Pp"></div>
Note that, if using an internationalized domain name, it needs to be translated
  in to Punycode first. For example, if using the domain name
  &#x201C;&#x00F1;.com.&#x201D;, it needs to be in the form
  &#x201C;xn--ida.com.&#x201D; in MaraDNS&#x2019; mararc and zone files.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
In the unusual case of having a csv2 zone file with Macintosh-style newlines (as
  opposed to DOS or UNIX newlines), while the file will parse, any errors in the
  file will be reported as being on line 1.
<div class="Pp"></div>
The system startup script included with MaraDNS assumes that the only MaraDNS
  processes running are started by the script; it stops <i>all</i> MaraDNS
  processes running on the server when asked to stop MaraDNS.
<div class="Pp"></div>
MaraDNS needs to use the <b>zoneserver</b> program to serve DNS records over
  TCP. See <b>zoneserver(8)</b> for usage information.
<div class="Pp"></div>
MaraDNS does not use the zone file (&quot;master file&quot;) format specified in
  chapter 5 of RFC1035; however bind2csv2.py can convert the majority of such
  zone files.
<div class="Pp"></div>
MaraDNS default behavior with star records is not RFC-compliant. In more detail,
  if a wildcard MX record exists in the form &quot;*.example.com&quot;, and
  there is an A record for &quot;www.example.com&quot;, but no MX record for
  &quot;www.example.com&quot;, the correct behavior (based on RFC1034 section
  4.3.3) is to return &quot;no host&quot; (nothing in the answer section, SOA in
  the authority section, 0 result code) for a MX request to
  &quot;www.example.com&quot;. Instead, MaraDNS returns the MX record attached
  to &quot;*.example.com&quot;. This can be changed by setting
  bind_star_handling to 1.
<div class="Pp"></div>
Star records (what RFC1034 calls &quot;wildcards&quot;) can not be attached to
  NS records.
<div class="Pp"></div>
MaraDNS, like every other known DNS implementation, only supports a QDCOUNT of 0
  or 1.
<h1 class="Sh" title="Sh" id="UNIMPLEMENTED_FEATURES"><a class="selflink" href="#UNIMPLEMENTED_FEATURES">UNIMPLEMENTED
  FEATURES</a></h1>
<i>These are features which I do not plan to implement in MaraDNS.</i>
<div class="Pp"></div>
MaraDNS does not have a disk-based caching scheme for authoritative zones.
<div class="Pp"></div>
MaraDNS' UDP server only loads zone files while MaraDNS is first started. UDP
  Zone information can only be updated by stopping MaraDNS, and restarting
  MaraDNS again. Note that TCP zone files are loaded from the filesystem at the
  time the client requests a zone.
<div class="Pp"></div>
MaraDNS does not have support for allowing given host names to only resolve for
  a limited range of IPs querying the DNS server, or for host names to resolve
  differently, depending on the IP querying the host name.
<div class="Pp"></div>
MaraDNS only allows wildcards at the beginning or end of a host name. E.g. names
  with wildcards like &quot;foo.*.example.com&quot;. &quot;www.*&quot; will
  work, however, if a default zonefile is set up. Likewise, MaraDNS does not
  have regular expression hostname substitution.
<div class="Pp"></div>
MaraDNS does not have support for MRTG or any other SNMP-based logging
  mechanism.
<h1 class="Sh" title="Sh" id="LEGAL_DISCLAIMER"><a class="selflink" href="#LEGAL_DISCLAIMER">LEGAL
  DISCLAIMER</a></h1>
THIS SOFTWARE IS PROVIDED BY THE AUTHORS ''AS IS'' AND ANY EXPRESS OR IMPLIED
  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
  EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Sam Trenholme (http://www.samiam.org) is responsible for this man page.
<div class="Pp"></div>
MaraDNS is written by me, Sam Trenholme, with a little help from my friends.
  Naturally, all errors in MaraDNS are my own (but read the disclaimer above).
<div class="Pp"></div>
Here is a partial list of people who have provided assistance:
<div class="Pp"></div>
Floh has generously set up a FreeBSD 4, FreeBSD 6, and Mac OS X system so that I
  can port MaraDNS to more platforms.
<div class="Pp"></div>
Albert Lee has provided countless bug reports, and, nicely enough, patches to
  fix said bugs. He has also made improvements to the code in the tcp
  &quot;zoneserver&quot;.
<div class="Pp"></div>
Franky Van Liedekerke has provided much invaluable assistance. As just one
  example, he provided invaluable assistance in getting MaraDNS to compile on
  Solaris. In addition, he has provided much valuable SQA help.
<div class="Pp"></div>
Christian Kurz, who has provided invaluable bug reports, especially when I had
  to re-implement the core hashing algorithm.
<div class="Pp"></div>
Remmy, who is providing both the web space and a mailing list for maradns.org.
<div class="Pp"></div>
Phil Homewood, who provided invaluable assistance with finding and fixing bugs
  in the authoritative portion of the MaraDNS server. He helped me plug memory
  leaks, find uninitialized variables being used, and found a number of bugs I
  was unable to find.
<div class="Pp"></div>
Albert Prats kindly provided Spanish translations for various text files.
<div class="Pp"></div>
Shin Zukeran provided a patch to recursive.c which properly makes a normal
  null-terminated string from a js_string object, to send as an argument to
  open() so we can get the rijndael key for the PRNG.
<div class="Pp"></div>
D Richard Felker III has provided invaluable bug reports. By looking at his bug
  reports, I have been able to hunt down and fix many problems that the
  recursive nameserver had, in addition to at least one problem with the
  authoritative nameserver.
<div class="Pp"></div>
Ole Tange has also given me many valuable MaraDNS bug reports.
<div class="Pp"></div>
Florin Iucha provided a tip in the FAQ for how to compile MaraDNS on OpenBSD.
<div class="Pp"></div>
Roy Arends (one of the BIND developers, as it turns out) found a serious
  security problem with MaraDNS, where MaraDNS would answer answers, and pointed
  it out to me.
<div class="Pp"></div>
Code used as the basis for the psudo-random-number generator was written by
  Vincent Rijmen, Antoon Bosselaers, and Paulo Barreto. I appreciate these
  programmers making the code public domain, which is the only license under
  which I can add code to MaraDNS under.
<div class="Pp"></div>
Ross Johnson and others have made a Win32 port of the Pthreads library; this has
  made a native win32 port of MaraDNS possible.
<div class="Pp"></div>
I also appreciate the work of Dr. Brian Gladman and Fritz Schneider, who have
  both written independent implementations of AES from which I obtained test
  vectors. With the help of their hard work, I was able to discover a subtle
  security problem that previous releases of MaraDNS had.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 2002</td>
    <td class="foot-os">MARADNS</td>
  </tr>
</table>
</body>
</html>
