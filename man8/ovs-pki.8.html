<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ovs-pki(8) Open vSwitch Manual ovs-pki(8)</p>

<p style="margin-top: 1em">NAME <br>
ovs-pki - OpenFlow public key infrastructure management
utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
Each command takes the form:</p>

<p style="margin-top: 1em">ovs-pki [options] command
[args]</p>

<p style="margin-top: 1em">The implemented commands and
their arguments are: <br>
ovs-pki init <br>
ovs-pki req name <br>
ovs-pki sign name [type] <br>
ovs-pki req+sign name [type] <br>
ovs-pki verify name [type] <br>
ovs-pki fingerprint file <br>
ovs-pki self-sign name</p>

<p style="margin-top: 1em">Each type above is a certificate
type, either switch (default) or controller.</p>

<p style="margin-top: 1em">The available options are: <br>
[-k type | --key=type] <br>
[-B nbits | --bits=nbits] <br>
[-D file | --dsaparam=file] <br>
[-b | --batch] <br>
[-f | --force] <br>
[-d dir | --dir=dir] <br>
[-l file | --log=file] <br>
[-h | --help]</p>

<p style="margin-top: 1em">Some options do not apply to
every command.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The ovs-pki program sets up and manages a public key
infrastructure for use with OpenFlow. It is intended to be a
simple interface for organizations that do not have an
estab&acirc; <br>
lished public key infrastructure. Other PKI tools can
substitute for or supplement the use of ovs-pki.</p>

<p style="margin-top: 1em">ovs-pki uses openssl(1) for
certificate management and key generation.</p>

<p style="margin-top: 1em">OFFLINE COMMANDS <br>
The following ovs-pki commands support manual PKI
administration:</p>

<p style="margin-top: 1em">init Initializes a new PKI (by
default in directory /var/lib/openvswitch/pki) and populates
it with a pair of certificate authorities for controllers
and switches.</p>

<p style="margin-top: 1em">This command should ideally be
run on a high-security machine separate from any OpenFlow
controller or switch, called the CA machine. The files
pki/controllerca/cac&acirc; <br>
ert.pem and pki/switchca/cacert.pem that it produces will
need to be copied over to the OpenFlow switches and
controllers, respectively. Their contents may safely be made
<br>
public.</p>

<p style="margin-top: 1em">By default, ovs-pki generates
2048-bit RSA keys. The -B or --bits option (see below) may
be used to override the key length. The -k dsa or --key=dsa
option may be used <br>
to use DSA in place of RSA. If DSA is selected, the
dsaparam.pem file generated in the new PKI hierarchy must be
copied to any machine on which the req command (see <br>
below) will be executed. Its contents may safely be made
public.</p>

<p style="margin-top: 1em">Other files generated by init
may remain on the CA machine. The files
pki/controllerca/private/cakey.pem and
pki/switchca/private/cakey.pem have particularly sensitive
<br>
contents that should not be exposed.</p>

<p style="margin-top: 1em">req name <br>
Generates a new private key named name-privkey.pem and
corresponding certificate request named name-req.pem. The
private key can be intended for use by a switch or a
con&acirc; <br>
troller.</p>

<p style="margin-top: 1em">This command should ideally be
run on the switch or controller that will use the private
key to identify itself. The file name-req.pem must be copied
to the CA machine <br>
for signing with the sign command (below).</p>

<p style="margin-top: 1em">This command will output a
fingerprint to stdout as its final step. Write down the
fingerprint and take it to the CA machine before continuing
with the sign step.</p>

<p style="margin-top: 1em">When RSA keys are in use (as is
the default), req, unlike the rest of ovs-pki&rsquo;s
commands, does not need access to a PKI hierarchy created by
ovs-pki init. The -B or <br>
--bits option (see below) may be used to specify the number
of bits in the generated RSA key.</p>

<p style="margin-top: 1em">When DSA keys are used (as
specified with --key=dsa), req needs access to the
dsaparam.pem file created as part of the PKI hierarchy (but
not to other files in that tree). <br>
By default, ovs-pki looks for this file in
/var/lib/openvswitch/pki/dsaparam.pem, but the -D or
--dsaparam option (see below) may be used to specify an
alternate location.</p>

<p style="margin-top: 1em">name-privkey.pem has sensitive
contents that should not be exposed. name-req.pem may be
safely made public.</p>

<p style="margin-top: 1em">sign name [type] <br>
Signs the certificate request named name-req.pem that was
produced in the previous step, producing a certificate named
name-cert.pem. type, either switch (default) or <br>
controller, indicates the use for which the key is being
certified.</p>

<p style="margin-top: 1em">This command must be run on the
CA machine.</p>

<p style="margin-top: 1em">The command will output a
fingerprint to stdout and request that you verify that it is
the same fingerprint output by the req command. This ensures
that the request being <br>
signed is the same one produced by req. (The -b or --batch
option suppresses the verification step.)</p>

<p style="margin-top: 1em">The file name-cert.pem will need
to be copied back to the switch or controller for which it
is intended. Its contents may safely be made public.</p>

<p style="margin-top: 1em">req+sign name [type] <br>
Combines the req and sign commands into a single step,
outputting all the files produced by each. The
name-privkey.pem and name-cert.pem files must be copied
securely to <br>
the switch or controller. name-privkey.pem has sensitive
contents and must not be exposed in transit. Afterward, it
should be deleted from the CA machine.</p>

<p style="margin-top: 1em">This combined method is,
theoretically, less secure than the individual steps
performed separately on two different machines, because
there is additional potential for <br>
exposure of the private key. However, it is also more
convenient.</p>

<p style="margin-top: 1em">verify name [type] <br>
Verifies that name-cert.pem is a valid certificate for the
given type of use, either switch (default) or controller. If
the certificate is valid for this use, it prints <br>
the message &lsquo;&lsquo;name-cert.pem: OK&rsquo;&rsquo;;
otherwise, it prints an error message.</p>

<p style="margin-top: 1em">fingerprint file <br>
Prints the fingerprint for file. If file is a certificate,
then this is the SHA-1 digest of the DER encoded version of
the certificate; otherwise, it is the SHA-1 digest <br>
of the entire file.</p>

<p style="margin-top: 1em">self-sign name <br>
Signs the certificate request named name-req.pem using the
private key name-privkey.pem, producing a self-signed
certificate named name-cert.pem. The input files should <br>
have been produced with ovs-pki req.</p>

<p style="margin-top: 1em">Some controllers accept such
self-signed certificates.</p>

<p style="margin-top: 1em">OPTIONS <br>
-k type <br>
--key=type <br>
For the init command, sets the public key algorithm to use
for the new PKI hierarchy. For the req and req+sign
commands, sets the public key algorithm to use for the key
<br>
to be generated, which must match the value specified on
init. With other commands, the value has no effect.</p>

<p style="margin-top: 1em">The type may be rsa (the
default) or dsa.</p>

<p style="margin-top: 1em">-B nbits <br>
--bits=nbits <br>
Sets the number of bits in the key to be generated. When RSA
keys are in use, this option affects only the init, req, and
req+sign commands, and the same value should be <br>
given each time. With DSA keys are in use, this option
affects only the init command.</p>

<p style="margin-top: 1em">The value must be at least 1024.
The default is 2048.</p>

<p style="margin-top: 1em">-D file <br>
--dsaparam=file <br>
Specifies an alternate location for the dsaparam.pem file
required by the req and req+sign commands. This option
affects only these commands, and only when DSA keys are <br>
used.</p>

<p style="margin-top: 1em">The default is dsaparam.pem
under the PKI hierarchy.</p>

<p style="margin-top: 1em">-b <br>
--batch <br>
Suppresses the interactive verification of fingerprints that
the sign command by default requires.</p>

<p style="margin-top: 1em">-d dir <br>
--dir=dir <br>
Specifies the location of the PKI hierarchy to be used or
created by the command (default: /var/lib/openvswitch/pki).
All commands, except req, need access to a PKI hier&acirc;
<br>
archy.</p>

<p style="margin-top: 1em">-f <br>
--force <br>
By default, ovs-pki will not overwrite existing files or
directories. This option overrides this behavior.</p>

<p style="margin-top: 1em">-l file <br>
--log=file <br>
Sets the log file to file. Default:
/var/log/openvswitch/ovs-pki.log.</p>

<p style="margin-top: 1em">-h <br>
--help Prints a help usage message and exits.</p>

<p style="margin-top: 1em">Open vSwitch 2.7.0
ovs-pki(8)</p>
<hr>
</body>
</html>
