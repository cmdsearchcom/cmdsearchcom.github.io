<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:27 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VFS_GLUSTERFS(8) System Administration tools
VFS_GLUSTERFS(8)</p>

<p style="margin-top: 1em">NAME <br>
vfs_glusterfs - Utilize features provided by GlusterFS</p>

<p style="margin-top: 1em">SYNOPSIS <br>
vfs objects = glusterfs</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This VFS module is part of the samba(8) suite.</p>

<p style="margin-top: 1em">GlusterFS
(http://www.gluster.org) is an Open Source clustered file
system capable of scaling to several peta-bytes. With its
FUSE based native client, GlusterFS is available as <br>
a POSIX compliant file system and can hence be shared by
Samba without additional steps.</p>

<p style="margin-top: 1em">The vfs_glusterfs VFS module
provides an alternative, and superior way to access a
Gluster filesystem from Samba for sharing. It does not
require a Gluster FUSE mount but <br>
directly accesses the GlusterFS daemon through its library
libgfapi, thereby omitting the expensive kernel-userspace
context switches and taking advantage of some of the more
<br>
advanced features of GlusterFS.</p>

<p style="margin-top: 1em">This module can be combined with
other modules, but it should be the last module in the vfs
objects list. Modules added to this list to the right of the
glusterfs entry may not <br>
have any effect at all.</p>

<p style="margin-top: 1em">CONFIGURATION <br>
A basic configuration looks like this.</p>

<p style="margin-top: 1em">[share] <br>
vfs objects = glusterfs <br>
path = /relative/base/path <br>
glusterfs:volume = gv0 <br>
kernel share modes = no</p>

<p style="margin-top: 1em">Note that since vfs_glusterfs
does not require a Gluster mount, the share path is treated
differently than for other shares: It is interpreted as the
base path of the share <br>
relative to the gluster volume used. Because this is usually
not at the same time a system path, in a ctdb cluster setup
where ctdb manages Samba, you need to set <br>
CTDB_SAMBA_SKIP_SHARE_CHECK=yes in ctdb&rsquo;s
configuration file. Otherwise ctdb will not get healthy.</p>

<p style="margin-top: 1em">Note that currently kernel share
modes have to be disabled in a share running with the
glusterfs vfs module for file serving to work properly.</p>

<p style="margin-top: 1em">OPTIONS <br>
glusterfs:logfile = path <br>
Defines whether and where to store a vfs_glusterfs specific
logfile. Client variable substitution is supported (i.e. %M,
%m, %I), hence per client log file can be specified.</p>

<p style="margin-top: 1em">Example: glusterfs:logfile =
/var/log/samba/glusterfs-vol2.%M.log</p>

<p style="margin-top: 1em">glusterfs:loglevel = 0-9 <br>
Defines the level of logging, with higher numbers
corresponding to more verbosity. 0 - No logs; 9 - Trace log
level; 7 being the info log level is preferred.</p>

<p style="margin-top: 1em">If this option is not defined
with an explicit loglevel, the glusterfs default is used
(currently loglevel 7).</p>

<p style="margin-top: 1em">glusterfs:volfile_server =
servername <br>
Defines which volfile server to use, defaults to
localhost.</p>

<p style="margin-top: 1em">glusterfs:volume = volumename
<br>
Defines the glusterfs volumename to use for this share.</p>

<p style="margin-top: 1em">VERSION <br>
This man page is correct for version 4.2.0 of the Samba
suite.</p>

<p style="margin-top: 1em">AUTHOR <br>
The original Samba software and related utilities were
created by Andrew Tridgell. Samba is now developed by the
Samba Team as an Open Source project similar to the way the
Linux <br>
kernel is developed.</p>

<p style="margin-top: 1em">Samba 4.4 05/25/2017
VFS_GLUSTERFS(8)</p>
<hr>
</body>
</html>
