<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:10:52 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fai-diskimage(8) System Manager&rsquo;s Manual
fai-diskimage(8)</p>

<p style="margin-top: 1em">NAME <br>
fai-diskimage - create a disk image for booting a VM</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fai-diskimage imagename</p>

<p style="margin-top: 1em">DESCRIPTION <br>
fai-diskimage creates a disk image that can be used with
Qemu/KVM, VirtualBox, VMware, Xen or by your cloud
infrastructure. It runs the Fully Automatic Installation
using a list <br>
of FAI classes. In the end you have a bootable disk
image.</p>

<p style="margin-top: 1em">OPTIONS <br>
-c, --class CLASS[,CLASS] <br>
Define list of FAI classes</p>

<p style="margin-top: 1em">-D, --debug <br>
Enter debugging after the FAI process has finished.
Therefore the fai-diskimage script is stopped and you may
enter the chroot for debugging purpose. When finished, leave
<br>
the chroot and send a CONT signal for resuming the
fai-diskimage script.</p>

<p style="margin-top: 1em">-h, --help <br>
Print help</p>

<p style="margin-top: 1em">-N, --new <br>
This option will be passed to the fai call. It then executes
the scripts in class/[0-9]* for defining classes.</p>

<p style="margin-top: 1em">-S, --size SIZE <br>
Set size of raw image (suffixes k M G T are supported)</p>

<p style="margin-top: 1em">-s, --cspace URI <br>
Location of the config space. If location starts with /, the
prefix file:// will be added. See fai.conf(5) for all
supported protocols. Default is /srv/fai/config.</p>

<p style="margin-top: 1em">-u, --hostname name <br>
Set hostname to name</p>

<p style="margin-top: 1em">-v, --verbose <br>
Be verbose</p>

<p style="margin-top: 1em">EXAMPLES <br>
# export
FAI_BASEFILEURL=http://fai-project.org/download/basefiles/
<br>
# fai-diskimage -vNu cloud3 -S2G -cJESSIE64,GCE disk.raw</p>

<p style="margin-top: 1em">Creates a Debian system with a
small set of software packages without graphical desktop.
The disk image disk.raw will be of size 2 GB and the host
ist called cloud3.</p>

<p style="margin-top: 1em"># export
FAI_BASEFILEURL=http://fai-project.org/download/basefiles/
<br>
# cl=DHCPC,UBUNTU,XENIAL,XENIAL64,XORG <br>
# fai-diskimage -vNu cloudhost -S5G -c$cl ubuntu.qcow2</p>

<p style="margin-top: 1em">Creates a disk image of size 5GB
called ubuntu.qcow2 for a Ubuntu 16.04 desktop.</p>

<p style="margin-top: 1em">NOTES <br>
Before creating an image, make sure you have the
configuration space available. Create the config space for
FAI by using the examples from the fai-doc package.</p>

<p style="margin-top: 1em"># mkdir -p /srv/fai/config <br>
# cp -a /usr/share/doc/fai-doc/examples/simple
/srv/fai/config</p>

<p style="margin-top: 1em">fai-diskimage is not limited to
creating images for virtual machines. The raw images can
also be copies (via dd) onto a real disk for booting bare
metal hosts.</p>

<p style="margin-top: 1em">You can start fai-diskimage in a
clean shell environment by calling:</p>

<p style="margin-top: 1em"># env -i /usr/sbin/fai-diskimage
-vNu cloudhost -S5G -cJESSIE64,GCE disk.raw</p>

<p style="margin-top: 1em">SEE ALSO <br>
This program is part of FAI (Fully Automatic Installation).
See the FAI manual for more information on how to use
fai-monitor. The FAI homepage is http://fai-project.org.</p>

<p style="margin-top: 1em">AUTHOR <br>
Thomas Lange &lt;lange@informatik.uni-koeln.de&gt;</p>

<p style="margin-top: 1em">FAI 5.3 November 2016
fai-diskimage(8)</p>
<hr>
</body>
</html>
