<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opacmdall(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opacmdall(8)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opacmdall(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opacmdall
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(Linux and Switch)</b> Executes a command on all hosts or Intel(R) Omni-Path
  Chassis. This powerful command can be used for configuring servers or chassis,
  verifying that they are running, starting and stopping host processes, and
  other tasks.
<div class="Pp"></div>
<b>NOTE:</b> opacmdall depends on the Linux* convention that utilities return 0
  for success and #8217gt;0 for failure. If opacmdall is used to execute a
  non-standard utility like diff or a program that uses custom exit codes, then
  opacmdall may erroneously report &quot;Command execution FAILED&quot; when it
  encounters a non-zero exit code. However, command output is still returned
  normally and the error may be safely ignored.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opacmdall [-Cpq] [-f <i>hostfile</i>] [-F <i>chassisfile</i>] [-h <i>hosts</i>]
  [-H <i>chassis</i>] [-u <i>user</i>] [-S] [-m <i>marker</i>] [-T
  <i>timelimit</i>] [-P] <i>cmd</i>
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-C</dt>
  <dd class="It-tag">Performs command against chassis. Default is hosts.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p</dt>
  <dd class="It-tag">Runs command in parallel on all hosts/chassis.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-q</dt>
  <dd class="It-tag">Quiet mode, do not show command to execute.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-f <i>hostfile</i></dt>
  <dd class="It-tag">File with hosts in cluster. Default is
      /etc/sysconfig/opa/hosts file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-F <i>chassisfile</i></dt>
  <dd class="It-tag">File with chassis in cluster. Default is
      /etc/sysconfig/opa/chassis file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>host</i></dt>
  <dd class="It-tag">List of hosts to execute command on.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-H <i>chassis</i></dt>
  <dd class="It-tag">List of chassis to execute command on.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-u <i>user</i></dt>
  <dd class="It-tag">The user to perform the command as:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For hosts, the default is current user code.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For chassis, the default is admin.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-S</dt>
  <dd class="It-tag">Securely prompts for password for user on chassis.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-m <i>marker</i></dt>
  <dd class="It-tag">Marker for end of chassis command output. If omitted,
      defaults to chassis command prompt. This may be a regular expression.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-T <i>timelimit</i></dt>
  <dd class="It-tag">Time limit in seconds when running host commands. Default
      is -1 (infinite).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-P</dt>
  <dd class="It-tag">Outputs the hostname/chassis name as prefix to each output
      line. This can make script processing of output easier.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
<h1 class="Sh" title="Sh" id="Operations_on_Host"><a class="selflink" href="#Operations_on_Host">Operations
  on Host</a></h1>
opacmdall date
<div>&#x00A0;</div>
opacmdall 'uname -a'
<div>&#x00A0;</div>
opacmdall -h 'elrond arwen' date
<div>&#x00A0;</div>
HOSTS='elrond arwen' opacmdall date
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Operations_on_Chassis"><a class="selflink" href="#Operations_on_Chassis">Operations
  on Chassis</a></h1>
opacmdall -C 'ismPortStats -noprompt'
<div>&#x00A0;</div>
opacmdall -C -H 'chassis1 chassis2' ismPortStats -noprompt#8217#8217;
<div>&#x00A0;</div>
CHASSIS='chassis1 chassis2' opacmdall ismPortStats -noprompt#8217#8217;
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
The following environment variables are also used by this command:
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOSTS</b></dt>
  <dd class="It-tag">List of hosts, used if -h option not supplied.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CHASSIS</b></dt>
  <dd class="It-tag">List of chassis, used if -C is used and -H and -F options
      not supplied.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOSTS_FILE</b></dt>
  <dd class="It-tag">File containing list of hosts, used in absence of -f and
      -h.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CHASSIS_FILE</b></dt>
  <dd class="It-tag">File containing list of chassis, used in absence of -F and
      -H.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_MAX_PARALLEL</b></dt>
  <dd class="It-tag">When -p option is used, maximum concurrent operations are
      performed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_SERIALIZE_OUTPUT</b></dt>
  <dd class="It-tag">Serialize output of parallel operations (yes or no).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_CHASSIS_LOGIN_METHOD</b></dt>
  <dd class="It-tag">How to log into chassis. Can be Telnet or SSH.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FF_CHASSIS_ADMIN_PASSWORD</b></dt>
  <dd class="It-tag">Password for admin on all chassis. Used in absence of -S
      option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Notes"><a class="selflink" href="#Notes">Notes</a></h1>
All commands performed with opacmdall must be non-interactive in nature.
  opacmdall waits for the command to complete before proceeding. For example,
  when running host commands such as rm, the -i option (interactively prompt
  before removal) should not be used. (Note that this option is sometimes part
  of a standard bash alias list.) Similarly, when running chassis commands such
  as fwUpdateChassis, the -reboot option should not be used beccause this option
  causes an immediate reboot and therefore the command never returns. Also, the
  chassis command reboot should not be executed using opacmdall. Instead, use
  the opachassisadmin reboot command to reboot one or more chassis. For further
  information about individual chassis CLI commands, consult the <i>Intel(R)
  Omni-Path Fabric Switches Command Line Interface Reference Guide</i>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
When performing opacmdall against hosts, internally SSH is used. The command
  opacmdall requires that password-less SSH be set up between the host running
  the Intel(R) Omni-Path Fabric Suite FastFabric Toolset and the hosts opacmdall
  is operating against. The opasetupssh FastFabric tool can aid in setting up
  password-less SSH.
<div class="Pp"></div>
When performing opacmdall against a set of chassis, all chassis must be
  configured with the same admin password. Alternatively, the opasetupssh
  FastFabric tool can be used to set up password-less SSH to the chassis.
<div class="Pp"></div>
When performing operations against chassis, Intel recommends that you set up SSH
  keys (see <i>opasetupssh</i> ). If SSH keys are not set up, Intel recommends
  that you use the -S option, to avoid keeping the password in configuration
  files.</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
