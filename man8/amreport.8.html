<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:08:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>AMREPORT(8) System Administration Commands
AMREPORT(8)</p>

<p style="margin-top: 1em">NAME <br>
amreport - generate a formatted output of statistics for an
Amanda run</p>

<p style="margin-top: 1em">SYNOPSIS <br>
amreport [-o configoption...] [(1) command-line options |
(2) script options] [config]</p>

<p style="margin-top: 1em">(1) [--log=logfile]
[--ps=filename] [--text=filename] [--xml=filename]
[--print=printer] [--mail-text=recipient] <br>
(2) [-i] [-M address] [-l logfile] [-f outputfile] [-p
postscriptfile] [--from-amdump]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Amreport generates a summary report of an Amanda backup
run.</p>

<p style="margin-top: 1em">See the amanda(8) man page for
more details about Amanda.</p>

<p style="margin-top: 1em">OPTIONS <br>
config <br>
Name of the configuration to process. If no configuration
name is specified, amanda.conf is read from the current
directory.</p>

<p style="margin-top: 1em">-o configoption <br>
See the &quot;CONFIGURATION OVERRIDE&quot; section in
amanda(8).</p>

<p style="margin-top: 1em">Amreport operates in two
distinct modes. Command-line mode is intended for use by an
administrator from the command line, and uses long
command-line options for clarity. Script <br>
mode is intended for use from scripts such as amdump, and
has a lot of non-obvious default behaviors to suit that
need.</p>

<p style="margin-top: 1em">Unless a script-mode option is
given, amreport defaults to command-line mode. If no options
are given, amreport writes a report for the most recent
logfile to stdout.</p>

<p style="margin-top: 1em">Command-Line Mode Options <br>
--log=logfile <br>
Use this logfile as the basis for the report. If this option
is given, then the report is a &quot;historical&quot; report
and will not include current state from e.g., holding disk
and <br>
curinfo. If this option is not specified, then the most
recent logfile will be used.</p>

<p style="margin-top: 1em">--ps=filename <br>
Write a postscript label to filename. See &quot;LABEL
PRINTING&quot; below. If filename is not specified, then the
label is written to stdout.</p>

<p style="margin-top: 1em">--text=filename <br>
Write a human-readable text report to filename. If filename
is not specified, then the report is written to stdout.</p>

<p style="margin-top: 1em">--xml=filename <br>
Write an XML-formatted report to filename. If filename is
not specified, then the report is written to stdout.</p>

<p style="margin-top: 1em">--print=printer <br>
Pipe a postscript label to lp or lpr, specifying the given
printer. If the printer is not specified, uses the default
from the Amanda configuration, or the system default <br>
printer.</p>

<p style="margin-top: 1em">--mail-text=recipient <br>
Send a human-readable text report to the given recipient via
the mailer specified in the Amanda configuration. If the
recipient is not specified, this uses the mailto from <br>
the Amanda configuration.</p>

<p style="margin-top: 1em">Script Mode Options <br>
-i <br>
Don&rsquo;t email the report.</p>

<p style="margin-top: 1em">-M address <br>
Mail the report to address instead of the mailto value from
amanda.conf.</p>

<p style="margin-top: 1em">-l logfile <br>
Name of the log file to parse to generate the report. If a
log file is not specified, it defaults to the file
$logdir/log, where $logdir is the log directory defined in
<br>
amanda.conf.</p>

<p style="margin-top: 1em">-f outputfile <br>
Normally, amreport sends the report via e-mail to the mailto
user as defined in the amanda.conf file. If outputfile is
specified, then the report is put in outputfile.</p>

<p style="margin-top: 1em">-p postscriptfile <br>
Send the postscript output to the file postscriptfile
instead of to the lpr(1) command. This option has an effect
only if the lbl-templ directive is specified in
amanda.conf.</p>

<p style="margin-top: 1em">--from-amdump <br>
Force script mode. Has no other effect.</p>

<p style="margin-top: 1em">TEXT REPORT FORMAT <br>
Amanda&rsquo;s text report format is divided into several
sections. Some of these sections only appear if they are not
empty.</p>

<p style="margin-top: 1em">Although newer versions of
Amanda try to use the term &quot;volume&quot; to refer to a
unit of storage, amreport still uses the term
&quot;tape&quot;, even if backups are done to non-tape
devices, <br>
to allow scripts which parse amreport&rsquo;s output to
continue to function.</p>

<p style="margin-top: 1em">Summary <br>
Hostname: bkserver <br>
Org : DailySet1 <br>
Config : Daily <br>
Date : February 25, 2009</p>

<p style="margin-top: 1em">These dumps were to tape
Daily-103. <br>
The next tape Amanda expects to use is: Daily-142</p>

<p style="margin-top: 1em">FAILURE DUMP SUMMARY: <br>
jamon.slikon.local /var lev 0 FAILED [/bin/tar exited with
status 2]</p>

<p style="margin-top: 1em">The summary section describes
the run in broad terms, giving the server hostname,
organization (from the org configuration parameter),
configuration name, and dump date. This is <br>
followed by a description of the volumes and holding disk
used, and an rough estimate of the volume(s) Amanda will use
on the next run.</p>

<p style="margin-top: 1em">Brief notices of any unusual
circumstances will also be included here.</p>

<p style="margin-top: 1em">Statistics <br>
STATISTICS: <br>
Total Full Incr. <br>
-------- -------- -------- <br>
Estimate Time (hrs:min) 0:00 <br>
Run Time (hrs:min) 0:01 <br>
Dump Time (hrs:min) 0:00 0:00 0:00 <br>
Output Size (meg) 1.6 0.0 1.6 <br>
Original Size (meg) 1.6 0.0 1.6 <br>
Avg Compressed Size (%) 100.0 100.0 100.0 (level:#disks ...)
<br>
Filesystems Dumped 4 1 3 (1:3) <br>
Avg Dump Rate (k/s) 1555.1 134.2 1787.3</p>

<p style="margin-top: 1em">Tape Time (hrs:min) 0:00 0:00
0:00 <br>
Tape Size (meg) 1.6 0.0 1.6 <br>
Tape Used (%) 5.5 0.1 5.4 (level:#disks ...) <br>
Filesystems Taped 4 1 3 (1:3) <br>
(level:#parts ...) <br>
Parts Taped 4 1 3 (1:3) <br>
Avg Tp Write Rate (k/s) 143966 27624.3 151811</p>

<p style="margin-top: 1em">USAGE BY TAPE: <br>
Label Time Size % DLEs Parts <br>
metals-013 0:00 1650k 5.4 4 4</p>

<p style="margin-top: 1em">This section contains aggregate
statistics for the entire run. The three columns break down
the results into a total for all data handled, only full
dumps, and only incremental <br>
dumps. In the right margin, amreport indicates the breakdown
of dump levels at the dumper and the taper.</p>

<p style="margin-top: 1em">The rows have the following
meanings:</p>

<p style="margin-top: 1em">Estimate Time <br>
The time used by the planner to estimate dump sizes.</p>

<p style="margin-top: 1em">Run Time <br>
Total runtime, from the invocation of amdump to its
completion.</p>

<p style="margin-top: 1em">Dump Time <br>
Total time spent dumping clients.</p>

<p style="margin-top: 1em">Output Size <br>
Total quantity of data dumped, after compression.</p>

<p style="margin-top: 1em">Original Size <br>
Total quantity of data dumped, before compression.</p>

<p style="margin-top: 1em">Avg Compressed Size <br>
Compression ratio, calculated from the previous two
rows.</p>

<p style="margin-top: 1em">Filesystems Dumped <br>
Number of DLEs dumped.</p>

<p style="margin-top: 1em">Avg Dump Rate <br>
Average speed at which clients produced data. Note that, for
dumps done directly to a slow device, rather than to holding
disk, this rate may reflect a write speed <br>
constrained by the device speed.</p>

<p style="margin-top: 1em">Tape Time <br>
Total time spent writing to storage volumes. This includes
time spent changing tapes, including time spent waiting for
flush thresholds to be met.</p>

<p style="margin-top: 1em">Tape Size <br>
Total quantity of data written to storage volumes.</p>

<p style="margin-top: 1em">Tape Used <br>
Fraction of the total allocated storage (tapetype length
times runtapes) actually used.</p>

<p style="margin-top: 1em">Filesystems Taped <br>
Number of filesystems written to storage. This may be larger
or smaller than the number of filesystems dumped, due to
flushes or dumps left on holding disk.</p>

<p style="margin-top: 1em">Parts Taped <br>
Number of split parts writtten to storage. If this number is
very large, then the split size may be too small.</p>

<p style="margin-top: 1em">Avg Tp Write Rate <br>
Taper speed, based on the tape time and tape size, above.
Note that, because the tape time includes time spent on
tasks other than writing to tape, this does not necessary
<br>
reflect the device&rsquo;s real write speed. However, the
value is useful for capacity planning, as it reflects a
realistic estimate of how quickly Amanda can write data to
<br>
storage.</p>

<p style="margin-top: 1em">Usage by Tape <br>
USAGE BY TAPE: <br>
Label Time Size % DLEs Parts <br>
Conf-001 0:00 20320k 66.2 1 4 <br>
Conf-002 0:00 6470k 21.1 0 2</p>

<p style="margin-top: 1em">This short section gives
per-volume statistics: time spent writing to the volume;
bytes written to the volume; portion of the expected tape
length used; number of DLEs started, <br>
and total number of split parts written.</p>

<p style="margin-top: 1em">Notes <br>
NOTES: <br>
taper: tape DAILY-37 kb 30720 fm 3 [OK]</p>

<p style="margin-top: 1em">This section contains any
informational log messages from the run. Most messages are
self-explanatory. The taper message shown in the example is
always present, and is redundant <br>
to the previous section. It indicates that 30720 kb were
written to &quot;DAILY-37&quot; in 3 files.</p>

<p style="margin-top: 1em">Failure and Strange Details <br>
FAILED DUMP DETAILS:</p>

<p style="margin-top: 1em">/-- jamon.slikon.local /var lev
0 FAILED [/bin/tar exited with status 2] <br>
sendbackup: info BACKUP=APPLICATION <br>
sendbackup: info APPLICATION=amgtar <br>
sendbackup: info RECOVER_CMD=/usr/bin/gzip -dc |amgtar -f...
- <br>
sendbackup: info COMPRESS_SUFFIX=.gz <br>
sendbackup: info end <br>
? /bin/tar: ./gdm: Cannot savedir: Permission denied <br>
| Total bytes written: 943831040 (901MiB, 4.9MiB/s) <br>
| /bin/tar: Error exit delayed from previous errors <br>
sendbackup: error [/bin/tar exited with status 2] <br>
sendbackup: size 921710 <br>
sendbackup: end <br>
\--------</p>

<p style="margin-top: 1em">STRANGE DUMP DETAILS:</p>

<p style="margin-top: 1em">/-- bsdfw.slikon.local / lev 0
STRANGE <br>
sendbackup: info BACKUP=APPLICATION <br>
sendbackup: info APPLICATION=amgtar <br>
sendbackup: info RECOVER_CMD=/usr/bin/gzip -dc |amgtar -f...
- <br>
sendbackup: info COMPRESS_SUFFIX=.gz <br>
sendbackup: info end <br>
| /bin/tar: ./tmp/.X11-unix/X0: socket ignored <br>
| Total bytes written: 5530869760 (5.2GiB, 3.0MiB/s) <br>
sendbackup: size 5401240 <br>
sendbackup: end <br>
\--------</p>

<p style="margin-top: 1em">This section expands on failures
and strange results indicated in earlier sections. In both
cases, the details contain a messages produced by the
underlying backup tool - GNU <br>
tar, in this example. Failed dumps have actually failed, and
the reasons are usually clear. Strange dumps, however, are
regarded as successful by Amanda, but contain messages <br>
that Amanda did not recognize and which may be of interest
to the operator.</p>

<p style="margin-top: 1em">Dump Summary <br>
DUMP SUMMARY: <br>
DUMPER STATS TAPER STATS <br>
HOSTNAME DISK L ORIG-kB OUT-kB COMP% MMM:SS KB/s MMM:SS KB/s
<br>
--------------------------
------------------------------------- --------------- <br>
strontium /etc 1 270 270 -- 0:00 1146.3 0:00 140918.6 <br>
strontium -me/elantra 1 10 10 -- 0:00 65.6 0:00 9033.4 <br>
strontium /local 0 20 20 -- 0:00 133.9 0:00 27624.3 <br>
strontium -ository_13 1 1350 1350 -- 0:01 2568.5 0:00
175006.5</p>

<p style="margin-top: 1em">The dump summary table has one
row for each DLE processed during the run. The &quot;L&quot;
column gives the level of the dump. The remaining colums are
divided into dumper stats and taper <br>
stats.</p>

<p style="margin-top: 1em">The dumper stats give the
original (before compression) and output (after compression)
size of each dump, as well as a compression ratio, if
applicable. The column labeled <br>
&quot;MMM:SS&quot; gives the time spent on that dump, and
the next column is the calculated dump rate.</p>

<p style="margin-top: 1em">The taper stats give the time
and speed with which the dump was written to storage. This
value is the sum of the times for each part, and as such
does not include time spent <br>
switching volumes.</p>

<p style="margin-top: 1em">LABEL PRINTING <br>
Amanda can print postscript labels describing the contents
of tape(s) written in a run. The labels are designed to be
folded and inserted into the tape case along with the tape
<br>
or hole punched and put in a 3-ring binder. Various label
templates are provided to format data for different tape
sizes.</p>

<p style="margin-top: 1em">The information printed varies
slightly between label templates due to size constraints.
Labels contain one line for each host/file-system pair and
may also contain the file <br>
number on the tape, the level of the dump, the original size
of the dump and the size of the (possibly compressed) tape
file.</p>

<p style="margin-top: 1em">Add the lbl-templ parameter to
the tapetype definition in amanda.conf to enable labels. If
you don&rsquo;t add this line to your tapetype definition,
amreport will not print tape <br>
labels.</p>

<p style="margin-top: 1em">You may use the printer keyword
in amanda.conf to print to other than the system default
printer.</p>

<p style="margin-top: 1em">TEMPLATES <br>
Amanda provides label templates for the following tape
types. These are pretty generic labels and should be easy to
customize for other tape types or particular site needs.</p>

<p style="margin-top: 1em">* ExaByte 8mm tapes <br>
* DAT 4mm tapes <br>
* DLT tapes <br>
* 3-ring binder</p>

<p style="margin-top: 1em">The 3-ring binder type is the
most generic. It may be used to make a hardcopy log of the
tapes.</p>

<p style="margin-top: 1em">EXIT CODE <br>
The exit code of amreport is the ORed value of: <br>
0 = success <br>
1 = error <br>
2 = a dle give strange message <br>
4 = a dle failed <br>
8 = Don&rsquo;t know the status of a dle (RESULT_MISSING in
the report) <br>
16 = tape error or no more tape</p>

<p style="margin-top: 1em">SEE ALSO <br>
amanda(8), amflush(8)</p>

<p style="margin-top: 1em">The Amanda Wiki: :
http://wiki.zmanda.com/</p>

<p style="margin-top: 1em">AUTHOR <br>
Stefan G. Weichinger &lt;sgw@amanda.org&gt;</p>

<p style="margin-top: 1em">Amanda 3.3.3 01/10/2013
AMREPORT(8)</p>
<hr>
</body>
</html>
