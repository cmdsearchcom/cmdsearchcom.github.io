<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:17:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>WATCH-MIMEDEFANG(8) System Manager&rsquo;s Manual
WATCH-MIMEDEFANG(8)</p>

<p style="margin-top: 1em">NAME <br>
watch-mimedefang - Keep an eye on mimedefang-multiplexor</p>

<p style="margin-top: 1em">SYNOPSIS <br>
watch-mimedefang [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
watch-mimedefang is a Tk script which graphically displays
the status of mimedefang-multiplexor(8). Note that Tcl/Tk
8.0 or higher is required to run watch-mimedefang.</p>

<p style="margin-top: 1em">DISPLAY <br>
watch-mimedefang&rsquo;s display is divided into three main
areas, from top to bottom:</p>

<p style="margin-top: 1em">o The graph display shows six
graphs representing various statistics about the
multiplexor.</p>

<p style="margin-top: 1em">o The control area shows the
maximum number of slaves, number of busy slaves, and number
of idle slaves. The &quot;Control Command&quot; text entry
lets you monitor remote MIMEDefang <br>
servers; see &quot;REMOTE MONITORING&quot; for details.</p>

<p style="margin-top: 1em">The &quot;10s&quot;,
&quot;1m&quot;, &quot;5m&quot; and &quot;10m&quot;
checkboxes allow you to enable or disable the graphing of
statistics averaged over the last 10 seconds, 1 minute, 5
minutes and 10 minutes.</p>

<p style="margin-top: 1em">The &quot;Reread Filters&quot;
button forces the multiplexor to reread filter rules. The
&quot;Quit&quot; button terminates watch-mimedefang.</p>

<p style="margin-top: 1em">o The scale at the bottom lets
you change the update interval (default 500ms). Be aware
that frequent updating may make watch-mimedefang consume a
significant fraction of <br>
CPU time.</p>

<p style="margin-top: 1em">THE GRAPH AREA <br>
The graph area contains six graphs:</p>

<p style="margin-top: 1em">o Busy Slaves <br>
This graph shows the number of busy slaves each time the
statistics are sampled.</p>

<p style="margin-top: 1em">o Slaves/scan <br>
This graph shows the average number of busy slaves each time
a message was scanned. The red plot shows the average over
the last ten seconds, the blue plot shows the <br>
average over the last minute, and the green and yellow plots
show the average over the last five and ten minutes,
respectively.</p>

<p style="margin-top: 1em">o Latency (ms) <br>
This graph shows the average time taken by each SCAN command
over the last ten seconds, one minute, five minutes and ten
minutes.</p>

<p style="margin-top: 1em">o Messages/s <br>
This graph shows the average number of messages per second
that were scanned.</p>

<p style="margin-top: 1em">o Activations/s <br>
This graph shows the average number of new slaves activated
per second.</p>

<p style="margin-top: 1em">o Reaps/s <br>
This graph shows the average number of slaves that have
terminated per second.</p>

<p style="margin-top: 1em">If the Activations and Reaps
increase significantly, it could indicate heavy load, or an
error causing filters to terminate abnormally.</p>

<p style="margin-top: 1em">If only Activations increase,
then it probably indicates a sudden increase in e-mail
volume.</p>

<p style="margin-top: 1em">If only Reaps increase, then it
probably indicates a quiet time just after a period of heavy
mail volume.</p>

<p style="margin-top: 1em">You can enable or disable the
ten second, one minute, five minute or ten minute plots by
clicking on the &quot;10s&quot;, &quot;1m&quot;,
&quot;5m&quot; or &quot;10m&quot; checkbox.</p>

<p style="margin-top: 1em">REMOTE MONITORING <br>
Running watch-mimedefang on your actual mail server poses
two problems: You need Tcl/Tk and the X client libraries
installed, and the CPU consumption of watch-mimedefang can
be <br>
considerable.</p>

<p style="margin-top: 1em">A better method is to run
watch-mimedefang on a desktop machine, but have it monitor
the mail server with a remote session.</p>

<p style="margin-top: 1em">The best way to establish a
remote session is via SSH. For example, if you are running
MIMEDefang on &quot;mail.mydomain.net&quot;, you can type
the following into the Control Command <br>
entry box and press enter:</p>

<p style="margin-top: 1em">ssh root@mail.mydomain.net
md-mx-ctrl</p>

<p style="margin-top: 1em">You must have a public/private
key for the target machine and you must be running ssh-agent
or equivalent; you cannot use an ssh command that requires
entry of a password or <br>
passphrase.</p>

<p style="margin-top: 1em">Assuming your SSH setup is
correct, watch-mimedefang will open an SSH connection to
mail.mydomain.net and exchange low-bandwith information over
that session for monitoring pur&acirc; <br>
poses.</p>

<p style="margin-top: 1em">COMMAND-LINE OPTIONS <br>
watch-mimedefang accepts the following command-line
options:</p>

<p style="margin-top: 1em">-command cmd <br>
Use cmd as the control command. You may need to quote
cmd</p>

<p style="margin-top: 1em">-interval msec <br>
Set the update interval to msec milliseconds.</p>

<p style="margin-top: 1em">-10s flag <br>
Enable the &quot;10s&quot; graph plot if flag is 1, or
disable it if flag is 0.</p>

<p style="margin-top: 1em">-1m flag <br>
Enable the &quot;1m&quot; graph plot if flag is 1, or
disable it if flag is 0.</p>

<p style="margin-top: 1em">-5m flag <br>
Enable the &quot;5m&quot; graph plot if flag is 1, or
disable it if flag is 0.</p>

<p style="margin-top: 1em">-10m flag <br>
Enable the &quot;10m&quot; graph plot if flag is 1, or
disable it if flag is 0.</p>

<p style="margin-top: 1em">-title string <br>
Add string to the title of the main window.</p>

<p style="margin-top: 1em">-help Print usage
information.</p>

<p style="margin-top: 1em">EXAMPLE <br>
As an example, to monitor MIMEDefang on the machine
&quot;mail.mydomain.net&quot; updating once a second, with
the 5m and 10m plots turned off, use:</p>

<p style="margin-top: 1em">watch-mimedefang -command
&rsquo;ssh root@mail.mydomain.net md-mx-ctrl&rsquo;
-interval 1000 -5m 0 -10m 0 -title &quot;mail&quot;</p>

<p style="margin-top: 1em">AUTHOR <br>
watch-mimedefang was written by Dianne Skoll
&lt;dfs@roaringpenguin.com&gt;. The mimedefang home page is
http://www.mimedefang.org/.</p>

<p style="margin-top: 1em">PERMISSIONS <br>
watch-mimedefang uses md-mx-ctrl; therefore, it probably
needs to be run as root or the same user as
mimedefang-multiplexor, or (if you are monitoring a remote
machine), the SSH <br>
connection must be done as root or the MIMEDefang user.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mimedefang.pl(8), mimedefang-filter(5), mimedefang(8),
mimedefang-protocol(7), md-mx-ctrl(8),
watch-multiple-mimedefangs(8)</p>

<p style="margin-top: 1em">4th Berkeley Distribution 24
October 2002 WATCH-MIMEDEFANG(8)</p>
<hr>
</body>
</html>
