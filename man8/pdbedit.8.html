<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:14:32 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PDBEDIT(8) System Administration tools PDBEDIT(8)</p>

<p style="margin-top: 1em">NAME <br>
pdbedit - manage the SAM database (Database of Samba
Users)</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pdbedit [-a] [-b passdb-backend] [-c account-control] [-C
value] [-d debuglevel] [-D drive] [-e passdb-backend] [-f
fullname] [--force-initialized-passwords] [-g] [-h homedir]
<br>
[-i passdb-backend] [-I domain] [-K] [-L] [-m] [-M SID|RID]
[-N description] [-P account-policy] [-p profile]
[--policies-reset] [-r] [-s configfile] [-S script]
[--set-nt-hash] <br>
[-t] [--time-format] [-u username] [-U SID|RID] [-v] [-V]
[-w] [-x] [-y] [-z] [-Z]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This tool is part of the samba(7) suite.</p>

<p style="margin-top: 1em">The pdbedit program is used to
manage the users accounts stored in the sam database and can
only be run by root.</p>

<p style="margin-top: 1em">The pdbedit tool uses the passdb
modular interface and is independent from the kind of users
database used (currently there are smbpasswd, ldap, nis+ and
tdb based and more can <br>
be added without changing the tool).</p>

<p style="margin-top: 1em">There are five main ways to use
pdbedit: adding a user account, removing a user account,
modifying a user account, listing user accounts, importing
users accounts.</p>

<p style="margin-top: 1em">OPTIONS <br>
-L|--list <br>
This option lists all the user accounts present in the users
database. This option prints a list of user/uid pairs
separated by the &rsquo;:&rsquo; character.</p>

<p style="margin-top: 1em">Example: pdbedit -L</p>

<p style="margin-top: 1em">sorce:500:Simo Sorce <br>
samba:45:Test User</p>

<p style="margin-top: 1em">-v|--verbose <br>
This option enables the verbose listing format. It causes
pdbedit to list the users in the database, printing out the
account fields in a descriptive format. Used together <br>
with -w also shows passwords hashes.</p>

<p style="margin-top: 1em">Example: pdbedit -L -v</p>

<p style="margin-top: 1em">--------------- <br>
username: sorce <br>
user ID/Group: 500/500 <br>
user RID/GRID: 2000/2001 <br>
Full Name: Simo Sorce <br>
Home Directory: \BERSERKERce <br>
HomeDir Drive: H: <br>
Logon Script: \BERSERKER0tlogonce.bat <br>
Profile Path: \BERSERKERrofile <br>
--------------- <br>
username: samba <br>
user ID/Group: 45/45 <br>
user RID/GRID: 1090/1091 <br>
Full Name: Test User <br>
Home Directory: \BERSERKERba <br>
HomeDir Drive: <br>
Logon Script: <br>
Profile Path: \BERSERKERrofile</p>

<p style="margin-top: 1em">-w|--smbpasswd-style <br>
This option sets the &quot;smbpasswd&quot; listing format.
It will make pdbedit list the users in the database,
printing out the account fields in a format compatible with
the <br>
smbpasswd file format. (see the smbpasswd(5) for details).
Instead used together with (-v) displays the passwords
hashes in verbose output.</p>

<p style="margin-top: 1em">Example: pdbedit -L -w</p>


<p style="margin-top: 1em">sorce:500:508818B733CE64BEAAD3B435B51404EE:
<br>
D2A2418EFC466A8A0F6B1DBB5C3DB80C: <br>
[UX ]:LCT-00000000: <br>
samba:45:0F2B255F7B67A7A9AAD3B435B51404EE: <br>
BC281CE3F53B6A5146629CD4751D3490: <br>
[UX ]:LCT-3BFA1E8D:</p>

<p style="margin-top: 1em">-u|--user username <br>
This option specifies the username to be used for the
operation requested (listing, adding, removing). It is
required in add, remove and modify operations and optional
in <br>
list operations.</p>

<p style="margin-top: 1em">-f|--fullname fullname <br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s full name.</p>

<p style="margin-top: 1em">Example: -f &quot;Simo
Sorce&quot;</p>

<p style="margin-top: 1em">-h|--homedir homedir <br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s home directory
network path.</p>

<p style="margin-top: 1em">Example: -h
&quot;\\BERSERKER\sorce&quot;</p>

<p style="margin-top: 1em">-D|--drive drive <br>
This option can be used while adding or modifying a user
account. It will specify the windows drive letter to be used
to map the home directory.</p>

<p style="margin-top: 1em">Example: -D &quot;H:&quot;</p>

<p style="margin-top: 1em">-S|--script script <br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s logon script
path.</p>

<p style="margin-top: 1em">Example: -S
&quot;\\BERSERKER\netlogon\sorce.bat&quot;</p>

<p style="margin-top: 1em">--set-nt-hash <br>
This option can be used while modifying a user account. It
will set the user&rsquo;s password using the nt-hash value
given as hexadecimal string. Useful to synchronize
passwords.</p>

<p style="margin-top: 1em">Example: --set-nt-hash
8846F7EAEE8FB117AD06BDD830B7586C</p>

<p style="margin-top: 1em">-p|--profile profile <br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s profile
directory.</p>

<p style="margin-top: 1em">Example: -p
&quot;\\BERSERKER\netlogon&quot;</p>

<p style="margin-top: 1em">-M|&rsquo;--machine SID&rsquo;
SID|rid <br>
This option can be used while adding or modifying a machine
account. It will specify the machines&rsquo; new primary
group SID (Security Identifier) or rid.</p>

<p style="margin-top: 1em">Example: -M
S-1-5-21-2447931902-1787058256-3961074038-1201</p>

<p style="margin-top: 1em">-U|&rsquo;--user SID&rsquo;
SID|rid <br>
This option can be used while adding or modifying a user
account. It will specify the users&rsquo; new SID (Security
Identifier) or rid.</p>

<p style="margin-top: 1em">Example: -U
S-1-5-21-2447931902-1787058256-3961074038-5004</p>

<p style="margin-top: 1em">Example: &rsquo;--user
SID&rsquo;
S-1-5-21-2447931902-1787058256-3961074038-5004</p>

<p style="margin-top: 1em">Example: -U 5004</p>

<p style="margin-top: 1em">Example: &rsquo;--user
SID&rsquo; 5004</p>

<p style="margin-top: 1em">-c|--account-control
account-control <br>
This option can be used while adding or modifying a user
account. It will specify the users&rsquo; account control
property. Possible flags are listed below.</p>

<p style="margin-top: 1em">&Acirc;&middot; N: No password
required</p>

<p style="margin-top: 1em">&Acirc;&middot; D: Account
disabled</p>

<p style="margin-top: 1em">&Acirc;&middot; H: Home
directory required</p>

<p style="margin-top: 1em">&Acirc;&middot; T: Temporary
duplicate of other account</p>

<p style="margin-top: 1em">&Acirc;&middot; U: Regular user
account</p>

<p style="margin-top: 1em">&Acirc;&middot; M: MNS logon
user account</p>

<p style="margin-top: 1em">&Acirc;&middot; W: Workstation
Trust Account</p>

<p style="margin-top: 1em">&Acirc;&middot; S: Server Trust
Account</p>

<p style="margin-top: 1em">&Acirc;&middot; L: Automatic
Locking</p>

<p style="margin-top: 1em">&Acirc;&middot; X: Password does
not expire</p>

<p style="margin-top: 1em">&Acirc;&middot; I: Domain Trust
Account</p>

<p style="margin-top: 1em">Example: -c &quot;[X ]&quot;</p>

<p style="margin-top: 1em">-K|--kickoff-time <br>
This option is used to modify the kickoff time for a certain
user. Use &quot;never&quot; as argument to set the kickoff
time to unlimited.</p>

<p style="margin-top: 1em">Example: pdbedit -K never
user</p>

<p style="margin-top: 1em">-a|--create <br>
This option is used to add a user into the database. This
command needs a user name specified with the -u switch. When
adding a new user, pdbedit will also ask for the <br>
password to be used.</p>

<p style="margin-top: 1em">Example: pdbedit -a -u sorce</p>

<p style="margin-top: 1em">new password: <br>
retype new password</p>

<p style="margin-top: 1em">Note <br>
pdbedit does not call the unix password synchronization
script if unix password sync has been set. It only updates
the data in the Samba user database.</p>

<p style="margin-top: 1em">If you wish to add a user and
synchronise the password that immediately, use
smbpasswd&rsquo;s -a option.</p>

<p style="margin-top: 1em">-t|--password-from-stdin <br>
This option causes pdbedit to read the password from
standard input, rather than from /dev/tty (like the
passwd(1) program does). The password has to be submitted
twice and <br>
terminated by a newline each.</p>

<p style="margin-top: 1em">-r|--modify <br>
This option is used to modify an existing user in the
database. This command needs a user name specified with the
-u switch. Other options can be specified to modify the <br>
properties of the specified user. This flag is kept for
backwards compatibility, but it is no longer necessary to
specify it.</p>

<p style="margin-top: 1em">-m|--machine <br>
This option may only be used in conjunction with the -a
option. It will make pdbedit to add a machine trust account
instead of a user account (-u username will provide the <br>
machine name).</p>

<p style="margin-top: 1em">Example: pdbedit -a -m -u
w2k-wks</p>

<p style="margin-top: 1em">-x|--delete <br>
This option causes pdbedit to delete an account from the
database. It needs a username specified with the -u
switch.</p>

<p style="margin-top: 1em">Example: pdbedit -x -u bob</p>

<p style="margin-top: 1em">-i|--import passdb-backend <br>
Use a different passdb backend to retrieve users than the
one specified in smb.conf. Can be used to import data into
your local user database.</p>

<p style="margin-top: 1em">This option will ease migration
from one passdb backend to another.</p>

<p style="margin-top: 1em">Example: pdbedit -i
smbpasswd:/etc/smbpasswd.old</p>

<p style="margin-top: 1em">-e|--export passdb-backend <br>
Exports all currently available users to the specified
password database backend.</p>

<p style="margin-top: 1em">This option will ease migration
from one passdb backend to another and will ease backing
up.</p>

<p style="margin-top: 1em">Example: pdbedit -e
smbpasswd:/root/samba-users.backup</p>

<p style="margin-top: 1em">-g|--group <br>
If you specify -g, then -i in-backend -e out-backend applies
to the group mapping instead of the user database.</p>

<p style="margin-top: 1em">This option will ease migration
from one passdb backend to another and will ease backing
up.</p>

<p style="margin-top: 1em">-b|--backend passdb-backend <br>
Use a different default passdb backend.</p>

<p style="margin-top: 1em">Example: pdbedit -b
xml:/root/pdb-backup.xml -l</p>

<p style="margin-top: 1em">-P|--account-policy
account-policy <br>
Display an account policy</p>

<p style="margin-top: 1em">Valid policies are: minimum
password age, reset count minutes, disconnect time, user
must logon to change password, password history, lockout
duration, min password length, <br>
maximum password age and bad lockout attempt.</p>

<p style="margin-top: 1em">Example: pdbedit -P &quot;bad
lockout attempt&quot;</p>

<p style="margin-top: 1em">account policy value for bad
lockout attempt is 0</p>

<p style="margin-top: 1em">-C|--value account-policy-value
<br>
Sets an account policy to a specified value. This option may
only be used in conjunction with the -P option.</p>

<p style="margin-top: 1em">Example: pdbedit -P &quot;bad
lockout attempt&quot; -C 3</p>

<p style="margin-top: 1em">account policy value for bad
lockout attempt was 0 <br>
account policy value for bad lockout attempt is now 3</p>

<p style="margin-top: 1em">-y|--policies <br>
If you specify -y, then -i in-backend -e out-backend applies
to the account policies instead of the user database.</p>

<p style="margin-top: 1em">This option will allow one to
migrate account policies from their default tdb-store into a
passdb backend, e.g. an LDAP directory server.</p>

<p style="margin-top: 1em">Example: pdbedit -y -i tdbsam:
-e ldapsam:ldap://my.ldap.host</p>

<p style="margin-top: 1em">--force-initialized-passwords
<br>
This option forces all users to change their password upon
next login.</p>

<p style="margin-top: 1em">-N|--account-desc description
<br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s description
field.</p>

<p style="margin-top: 1em">Example: -N &quot;test
description&quot;</p>

<p style="margin-top: 1em">-Z|--logon-hours-reset <br>
This option can be used while adding or modifying a user
account. It will reset the user&rsquo;s allowed logon hours.
A user may login at any time afterwards.</p>

<p style="margin-top: 1em">Example: -Z</p>

<p style="margin-top: 1em">-z|--bad-password-count-reset
<br>
This option can be used while adding or modifying a user
account. It will reset the stored bad login counter from a
specified user.</p>

<p style="margin-top: 1em">Example: -z</p>

<p style="margin-top: 1em">--policies-reset <br>
This option can be used to reset the general password
policies stored for a domain to their default values.</p>

<p style="margin-top: 1em">Example: --policies-reset</p>

<p style="margin-top: 1em">-I|--domain <br>
This option can be used while adding or modifying a user
account. It will specify the user&rsquo;s domain field.</p>

<p style="margin-top: 1em">Example: -I
&quot;MYDOMAIN&quot;</p>

<p style="margin-top: 1em">--time-format <br>
This option is currently not being used.</p>

<p style="margin-top: 1em">-?|--help <br>
Print a summary of command line options.</p>

<p style="margin-top: 1em">--usage <br>
Display brief usage message.</p>

<p style="margin-top: 1em">-d|--debuglevel=level <br>
level is an integer from 0 to 10. The default value if this
parameter is not specified is 0.</p>

<p style="margin-top: 1em">The higher this value, the more
detail will be logged to the log files about the activities
of the server. At level 0, only critical errors and serious
warnings will be <br>
logged. Level 1 is a reasonable level for day-to-day running
- it generates a small amount of information about
operations carried out.</p>

<p style="margin-top: 1em">Levels above 1 will generate
considerable amounts of log data, and should only be used
when investigating a problem. Levels above 3 are designed
for use only by developers <br>
and generate HUGE amounts of log data, most of which is
extremely cryptic.</p>

<p style="margin-top: 1em">Note that specifying this
parameter here will override the log level parameter in the
smb.conf file.</p>

<p style="margin-top: 1em">-V|--version <br>
Prints the program version number.</p>


<p style="margin-top: 1em">-s|--configfile=&lt;configuration
file&gt; <br>
The file specified contains the configuration details
required by the server. The information in this file
includes server-specific information such as what printcap
file to <br>
use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at <br>
compile time.</p>

<p style="margin-top: 1em">-l|--log-basename=logdirectory
<br>
Base directory name for log/debug files. The extension
&quot;.progname&quot; will be appended (e.g. log.smbclient,
log.smbd, etc...). The log file is never removed by the
client.</p>


<p style="margin-top: 1em">--option=&lt;name&gt;=&lt;value&gt;
<br>
Set the smb.conf(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled-in defaults and options read from the
configuration file.</p>

<p style="margin-top: 1em">NOTES <br>
This command may be used only by root.</p>

<p style="margin-top: 1em">VERSION <br>
This man page is correct for version 3 of the Samba
suite.</p>

<p style="margin-top: 1em">SEE ALSO <br>
smbpasswd(5), samba(7)</p>

<p style="margin-top: 1em">AUTHOR <br>
The original Samba software and related utilities were
created by Andrew Tridgell. Samba is now developed by the
Samba Team as an Open Source project similar to the way the
Linux <br>
kernel is developed.</p>

<p style="margin-top: 1em">The pdbedit manpage was written
by Simo Sorce and Jelmer Vernooij.</p>

<p style="margin-top: 1em">Samba 4.4 05/25/2017
PDBEDIT(8)</p>
<hr>
</body>
</html>
