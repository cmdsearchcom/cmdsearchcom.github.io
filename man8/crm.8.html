<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>CRM(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CRM(8)</td>
    <td class="head-vol">crmsh documentation</td>
    <td class="head-rtitle">CRM(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
crm - Pacemaker command line interface for configuration and management
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>crm</b> [OPTIONS] [SUBCOMMAND ARGS...]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The crm shell is a command-line based cluster configuration and management tool.
  Its goal is to assist as much as possible with the configuration and
  maintenance of Pacemaker-based High Availability clusters.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on Pacemaker itself, see http://clusterlabs.org/.
<div style="height: 1.00em;">&#x00A0;</div>
crm works both as a command-line tool to be called directly from the system
  shell, and as an interactive shell with extensive tab completion and help.
<div style="height: 1.00em;">&#x00A0;</div>
The primary focus of the crm shell is to provide a simplified and consistent
  interface to Pacemaker, but it also provides tools for managing the creation
  and configuration of High Availability clusters from scratch. To learn more
  about this aspect of crm, see the cluster section below.
<div style="height: 1.00em;">&#x00A0;</div>
The crm shell can be used to manage every aspect of configuring and maintaining
  a cluster. It provides a simplified line-based syntax on top of the XML
  configuration format used by Pacemaker, commands for starting and stopping
  resources, tools for exploring the history of a cluster including log scraping
  and a set of cluster scripts useful for automating the setup and installation
  of services on the cluster nodes.
<div style="height: 1.00em;">&#x00A0;</div>
The crm shell is line oriented: every command must start and finish on the same
  line. It is possible to use a continuation character (\) to write one command
  in two or more lines. The continuation character is commonly used when
  displaying configurations.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-f, --file</b>=<i>FILE</i>
<div style="margin-left: 4.00ex;">Load commands from the given file. If a dash -
  is used in place of a file name, crm will read commands from the shell
  standard input (stdin).</div>
<div class="Pp"></div>
<b>-c, --cib</b>=<i>CIB</i>
<div style="margin-left: 4.00ex;">Start the session using the given shadow CIB
  file. Equivalent to cib use &lt;CIB&gt;.</div>
<div class="Pp"></div>
<b>-D, --display=</b><i>OUTPUT_TYPE</i>
<div style="margin-left: 4.00ex;">Choose one of the output options: plain,
  color-always, color, or uppercase. The default is color if the terminal
  emulation supports colors. Otherwise, plain is used.</div>
<div class="Pp"></div>
<b>-F, --force</b>
<div style="margin-left: 4.00ex;">Make crm proceed with applying changes where
  it would normally ask the user to confirm before proceeding. This option is
  mainly useful in scripts, and should be used with care.</div>
<div class="Pp"></div>
<b>-w, --wait</b>
<div style="margin-left: 4.00ex;">Make crm wait for the cluster transition to
  finish (for the changes to take effect) after each processed line.</div>
<div class="Pp"></div>
<b>-H, --history</b>=<i>DIR|FILE|SESSION</i>
<div style="margin-left: 4.00ex;">A directory or file containing a cluster
  report to load into the history commands, or the name of a previously saved
  history session.</div>
<div class="Pp"></div>
<b>-h, --help</b>
<div style="margin-left: 4.00ex;">Print help page.</div>
<div class="Pp"></div>
<b>--version</b>
<div style="margin-left: 4.00ex;">Print crmsh version and build information
  (Mercurial Hg changeset hash).</div>
<div class="Pp"></div>
<b>-d, --debug</b>
<div style="margin-left: 4.00ex;">Print verbose debugging information.</div>
<div class="Pp"></div>
<b>-R, --regression-tests</b>
<div style="margin-left: 4.00ex;">Enables extra verbose trace logging used by
  the regression tests. Logs all external calls made by crmsh.</div>
<div class="Pp"></div>
<b>--scriptdir</b>=<i>DIR</i>
<div style="margin-left: 4.00ex;">Extra directory where crm looks for cluster
  scripts, or a list of directories separated by semi-colons (e.g.
  /dir1;/dir2;etc.).</div>
<div class="Pp"></div>
<b>-o, --opt</b>=<i>OPTION=VALUE</i>
<div style="margin-left: 4.00ex;">Set crmsh option temporarily. If the options
  are saved using options save then the value passed here will also be saved.
  Multiple options can be set by using -o multiple times.</div>
<h1 class="Sh" title="Sh" id="INTRODUCTION"><a class="selflink" href="#INTRODUCTION">INTRODUCTION</a></h1>
This section of the user guide covers general topics about the user interface
  and describes some of the features of crmsh in detail.
<h2 class="Ss" title="Ss" id="User_interface"><a class="selflink" href="#User_interface">User
  interface</a></h2>
The main purpose of crmsh is to provide a simple yet powerful interface to the
  cluster stack. There are two main modes of operation with the user interface
  of crmsh:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Command line (single-shot) use - Use
  crm as a regular UNIX command from your usual shell. crm has full bash
  completion built in, so using it in this manner should be as comfortable and
  familiar as using any other command-line tool.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Interactive mode - By calling crm
  without arguments, or by calling it with only a sublevel as argument, crm
  enters the interactive mode. In this mode, it acts as its own command shell,
  which remembers which sublevel you are currently in and allows for rapid and
  convenient execution of multiple commands within the same sublevel. This mode
  also has full tab completion, as well as built-in interactive help and syntax
  highlighting.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Here are a few examples of using crm both as a command-line tool and as an
  interactive shell:
<div class="Pp"></div>
<b>Command line (one-shot) use:</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm resource stop www_app
</pre>
</div>
<div class="Pp"></div>
<b>Interactive use:</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm
crm(live)# resource
crm(live)resource# unmanage tetris_1
crm(live)resource# up
crm(live)# node standby node4
</pre>
</div>
<div class="Pp"></div>
<b>Cluster configuration:</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm configure&lt;&lt;EOF
  #
  # resources
  #
  primitive disk0 iscsi \
    params portal=192.168.2.108:3260 target=iqn.2008-07.com.suse:disk0
  primitive fs0 Filesystem \
    params device=/dev/disk/by-label/disk0 directory=/disk0 fstype=ext3
  primitive internal_ip IPaddr params ip=192.168.1.101
  primitive apache apache \
    params configfile=/disk0/etc/apache2/site0.conf
  primitive apcfence stonith:apcsmart \
    params ttydev=/dev/ttyS0 hostlist=&quot;node1 node2&quot; \
    op start timeout=60s
  primitive pingd pingd \
    params name=pingd dampen=5s multiplier=100 host_list=&quot;r1 r2&quot;
  #
  # monitor apache and the UPS
  #
  monitor apache 60s:30s
  monitor apcfence 120m:60s
  #
  # cluster layout
  #
  group internal_www \
    disk0 fs0 internal_ip apache
  clone fence apcfence \
    meta globally-unique=false clone-max=2 clone-node-max=1
  clone conn pingd \
    meta globally-unique=false clone-max=2 clone-node-max=1
  location node_pref internal_www \
    rule 50: #uname eq node1 \
    rule pingd: defined pingd
  #
  # cluster properties
  #
  property stonith-enabled=true
  commit
EOF
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The crm interface is hierarchical, with commands organized into separate levels
  by functionality. To list the available levels and commands, either execute
  help &lt;level&gt;, or, if at the top level of the shell, simply typing help
  will provide an overview of all available levels and commands.
<div style="height: 1.00em;">&#x00A0;</div>
The (live) string in the crm prompt signifies that the current CIB in use is the
  cluster live configuration. It is also possible to work with so-called shadow
  CIBs. These are separate, inactive configurations stored in files, that can be
  applied and thereby replace the live configuration at any time.
<h2 class="Ss" title="Ss" id="Tab_completion"><a class="selflink" href="#Tab_completion">Tab
  completion</a></h2>
The crm makes extensive use of tab completion. The completion is both static
  (i.e. for crm commands) and dynamic. The latter takes into account the current
  status of the cluster or information from installed resource agents.
  Sometimes, completion may also be used to get short help on resource
  parameters. Here are a few examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)resource# &lt;TAB&gt;&lt;TAB&gt;
bye           failcount     move          restart       unmigrate
cd            help          param         show          unmove
cleanup       list          promote       start         up
demote        manage        quit          status        utilization
end           meta          refresh       stop
exit          migrate       reprobe       unmanage
<div class="Pp"></div>
crm(live)configure# primitive fence-1 &lt;TAB&gt;&lt;TAB&gt;
heartbeat:  lsb:    ocf:    stonith:
<div class="Pp"></div>
crm(live)configure# primitive fence-1 stonith:&lt;TAB&gt;&lt;TAB&gt;
apcmaster                external/ippower9258     fence_legacy
apcmastersnmp            external/kdumpcheck      ibmhmc
apcsmart                 external/libvirt         ipmilan
<div class="Pp"></div>
crm(live)configure# primitive fence-1 stonith:ipmilan params &lt;TAB&gt;&lt;TAB&gt;
auth=      hostname=  ipaddr=    login=     password=  port=      priv=
<div class="Pp"></div>
crm(live)configure# primitive fence-1 stonith:ipmilan params auth=&lt;TAB&gt;&lt;TAB&gt;
auth* (string)
    The authorization type of the IPMI session (&quot;none&quot;, &quot;straight&quot;, &quot;md2&quot;, or &quot;md5&quot;)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
crmsh also comes with bash completion usable directly from the system shell.
  This should be installed automatically with the command itself.
<h2 class="Ss" title="Ss" id="Shorthand_syntax"><a class="selflink" href="#Shorthand_syntax">Shorthand
  syntax</a></h2>
When using the crm shell to manage clusters, you will end up typing a lot of
  commands many times over. Clear command names like configure help in
  understanding and learning to use the cluster shell, but is easy to misspell
  and is tedious to type repeatedly. The interactive mode and tab completion
  both help with this, but the crm shell also has the ability to understand a
  variety of shorthand aliases for all of the commands.
<div style="height: 1.00em;">&#x00A0;</div>
For example, instead of typing crm status, you can type crm st or crm stat.
  Instead of crm configure you can type crm cfg or even crm cf. crm resource can
  be shorted as crm rsc, and so on.
<div style="height: 1.00em;">&#x00A0;</div>
The exact list of accepted aliases is too long to print in full, but
  experimentation and typoes should help in discovering more of them.
<h1 class="Sh" title="Sh" id="FEATURES"><a class="selflink" href="#FEATURES">FEATURES</a></h1>
The feature set of crmsh covers a wide range of functionality, and understanding
  how and when to use the various features of the shell can be difficult. This
  section of the guide describes some of the features and use cases of crmsh in
  more depth. The intention is to provide a deeper understanding of these
  features, but also to serve as a guide to using them.
<h2 class="Ss" title="Ss" id="Shadow_CIB_usage"><a class="selflink" href="#Shadow_CIB_usage">Shadow
  CIB usage</a></h2>
A Shadow CIB is a normal cluster configuration stored in a file. They may be
  manipulated in much the same way as the <i>live</i> CIB, with the key
  difference that changes to a shadow CIB have no effect on the actual cluster
  resources. An administrator may choose to apply any of them to the cluster,
  thus replacing the running configuration with the one found in the shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
The crm prompt always contains the name of the configuration which is currently
  in use, or the string <i>live</i> if using the live cluster configuration.
<div style="height: 1.00em;">&#x00A0;</div>
When editing the configuration in the configure level, no changes are actually
  applied until the commit command is executed. It is possible to start editing
  a configuration as usual, but instead of committing the changes to the active
  CIB, save them to a shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
The following example configure session demonstrates how this can be done:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# cib new test-2
INFO: test-2 shadow CIB created
crm(test-2)configure# commit
</pre>
</div>
<h2 class="Ss" title="Ss" id="Configuration_semantic_checks"><a class="selflink" href="#Configuration_semantic_checks">Configuration
  semantic checks</a></h2>
Resource definitions may be checked against the meta-data provided with the
  resource agents. These checks are currently carried out:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;are required parameters set</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;existence of defined parameters</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;timeout values for operations</div>
<div style="height: 1.00em;">&#x00A0;</div>
The parameter checks are obvious and need no further explanation. Failures in
  these checks are treated as configuration errors.
<div style="height: 1.00em;">&#x00A0;</div>
The timeouts for operations should be at least as long as those recommended in
  the meta-data. Too short timeout values are a common mistake in cluster
  configurations and, even worse, they often slip through if cluster testing was
  not thorough. Though operation timeouts issues are treated as warnings, make
  sure that the timeouts are usable in your environment. Note also that the
  values given are just <i>advisory minimum</i>---your resources may require
  longer timeouts.
<div style="height: 1.00em;">&#x00A0;</div>
User may tune the frequency of checks and the treatment of errors by the
  check-frequency and check-mode preferences.
<div style="height: 1.00em;">&#x00A0;</div>
Note that if the check-frequency is set to always and the check-mode to strict,
  errors are not tolerated and such configuration cannot be saved.
<h2 class="Ss" title="Ss" id="Configuration_templates"><a class="selflink" href="#Configuration_templates">Configuration
  templates</a></h2>
<b>Deprecation note</b>
<div style="height: 1.00em;">&#x00A0;</div>
Configuration templates have been deprecated in favor of the more capable
  cluster scripts. To learn how to use cluster scripts, see the dedicated
  documentation on the crmsh website at http://crmsh.github.io/, or in the
  Script section.
<div style="height: 1.00em;">&#x00A0;</div>
Configuration templates are ready made configurations created by cluster
  experts. They are designed in such a way so that users may generate valid
  cluster configurations with minimum effort. If you are new to Pacemaker,
  templates may be the best way to start.
<div style="height: 1.00em;">&#x00A0;</div>
We will show here how to create a simple yet functional Apache configuration:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm configure
crm(live)configure# template
crm(live)configure template# list templates
apache       filesystem   virtual-ip
crm(live)configure template# new web &lt;TAB&gt;&lt;TAB&gt;
apache       filesystem   virtual-ip
crm(live)configure template# new web apache
INFO: pulling in template apache
INFO: pulling in template virtual-ip
crm(live)configure template# list
web2-d       web2     vip2     web3     vip      web
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
We enter the template level from configure. Use the list command to show
  templates available on the system. The new command creates a configuration
  from the apache template. You can use tab completion to pick templates. Note
  that the apache template depends on a virtual IP address which is
  automatically pulled along. The list command shows the just created web
  configuration, among other configurations (I hope that you, unlike me, will
  use more sensible and descriptive names).
<div style="height: 1.00em;">&#x00A0;</div>
The show command, which displays the resulting configuration, may be used to get
  an idea about the minimum required changes which have to be done. All ERROR
  messages show the line numbers in which the respective parameters are to be
  defined:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure template# show
ERROR: 23: required parameter ip not set
ERROR: 61: required parameter id not set
ERROR: 65: required parameter configfile not set
crm(live)configure template# edit
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The edit command invokes the preferred text editor with the web configuration.
  At the top of the file, the user is advised how to make changes. A good
  template should require from the user to specify only parameters. For example,
  the web configuration we created above has the following required and optional
  parameters (all parameter lines start with %%):
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
$ grep -n ^%% ~/.crmconf/web
23:%% ip
31:%% netmask
35:%% lvs_support
61:%% id
65:%% configfile
71:%% options
76:%% envfiles
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
These lines are the only ones that should be modified. Simply append the
  parameter value at the end of the line. For instance, after editing this
  template, the result could look like this (we used tabs instead of spaces to
  make the values stand out):
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
$ grep -n ^%% ~/.crmconf/web
23:%% ip        192.168.1.101
31:%% netmask
35:%% lvs_support
61:%% id        websvc
65:%% configfile    /etc/apache2/httpd.conf
71:%% options
76:%% envfiles
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
As you can see, the parameter line format is very simple:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
%% &lt;name&gt; &lt;value&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
After editing the file, use show again to display the configuration:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure template# show
primitive virtual-ip IPaddr \
    params ip=192.168.1.101
primitive apache apache \
    params configfile=&quot;/etc/apache2/httpd.conf&quot;
monitor apache 120s:60s
group websvc \
    apache virtual-ip
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The target resource of the apache template is a group which we named websvc in
  this sample session.
<div style="height: 1.00em;">&#x00A0;</div>
This configuration looks exactly as you could type it at the configure level.
  The point of templates is to save you some typing. It is important, however,
  to understand the configuration produced.
<div style="height: 1.00em;">&#x00A0;</div>
Finally, the configuration may be applied to the current crm configuration (note
  how the configuration changed slightly, though it is still equivalent, after
  being digested at the configure level):
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure template# apply
crm(live)configure template# cd ..
crm(live)configure# show
node xen-b
node xen-c
primitive apache apache \
    params configfile=&quot;/etc/apache2/httpd.conf&quot; \
    op monitor interval=120s timeout=60s
primitive virtual-ip IPaddr \
    params ip=192.168.1.101
group websvc apache virtual-ip
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Note that this still does not commit the configuration to the CIB which is used
  in the shell, either the running one (live) or some shadow CIB. For that you
  still need to execute the commit command.
<div style="height: 1.00em;">&#x00A0;</div>
To complete our example, we should also define the preferred node to run the
  service:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# location websvc-pref websvc 100: xen-b
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
If you are not happy with some resource names which are provided by default, you
  can rename them now:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# rename virtual-ip intranet-ip
crm(live)configure# show
node xen-b
node xen-c
primitive apache apache \
    params configfile=&quot;/etc/apache2/httpd.conf&quot; \
    op monitor interval=120s timeout=60s
primitive intranet-ip IPaddr \
    params ip=192.168.1.101
group websvc apache intranet-ip
location websvc-pref websvc 100: xen-b
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
To summarize, working with templates typically consists of the following steps:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;new: create a new configuration from
  templates</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;edit: define parameters, at least the
  required ones</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;show: see if the configuration is
  valid</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;apply: apply the configuration to the
  configure level</div>
<h2 class="Ss" title="Ss" id="Resource_testing"><a class="selflink" href="#Resource_testing">Resource
  testing</a></h2>
The amount of detail in a cluster makes all configurations prone to errors. By
  far the largest number of issues in a cluster is due to bad resource
  configuration. The shell can help quickly diagnose such problems. And
  considerably reduce your keyboard wear.
<div style="height: 1.00em;">&#x00A0;</div>
Let&#x2019;s say that we entered the following configuration:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node xen-b
node xen-c
node xen-d
primitive fencer stonith:external/libvirt \
    params hypervisor_uri=&quot;qemu+tcp://10.2.13.1/system&quot; \
        hostlist=&quot;xen-b xen-c xen-d&quot; \
    op monitor interval=2h
primitive svc Xinetd \
    params service=systat \
    op monitor interval=30s
primitive intranet-ip IPaddr2 \
    params ip=10.2.13.100 \
    op monitor interval=30s
primitive apache apache \
    params configfile=&quot;/etc/apache2/httpd.conf&quot; \
    op monitor interval=120s timeout=60s
group websvc apache intranet-ip
location websvc-pref websvc 100: xen-b
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Before typing commit to submit the configuration to the cib we can make sure
  that all resources are usable on all nodes:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# rsctest websvc svc fencer
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is important that resources being tested are not running on any nodes.
  Otherwise, the rsctest command will refuse to do anything. Of course, if the
  current configuration resides in a CIB shadow, then a commit is irrelevant.
  The point being that resources are not running on any node. <b>Note on
  stopping all resources</b>
<div style="height: 1.00em;">&#x00A0;</div>
Alternatively to not committing a configuration, it is also possible to tell
  Pacemaker not to start any resources:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# property stop-all-resources=yes
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Almost none---resources of class stonith are still started. But shell is not as
  strict when it comes to stonith resources.
<div style="height: 1.00em;">&#x00A0;</div>
Order of resources is significant insofar that a resource depends on all
  resources to its left. In most configurations, it&#x2019;s probably practical
  to test resources in several runs, based on their dependencies.
<div style="height: 1.00em;">&#x00A0;</div>
Apart from groups, crm does not interpret constraints and therefore knows
  nothing about resource dependencies. It also doesn&#x2019;t know if a resource
  can run on a node at all in case of an asymmetric cluster. It is up to the
  user to specify a list of eligible nodes if a resource is not meant to run on
  every node.
<h2 class="Ss" title="Ss" id="Access_Control_Lists_(ACL)"><a class="selflink" href="#Access_Control_Lists_(ACL)">Access
  Control Lists (ACL)</a></h2>
<b>Note on ACLs in Pacemaker 1.1.12</b>
<div style="height: 1.00em;">&#x00A0;</div>
The support for ACLs has been revised in Pacemaker version 1.1.12 and up.
  Depending on which version you are using, the information in this section may
  no longer be accurate. Look for the acl_target configuration element for more
  details on the new syntax.
<div style="height: 1.00em;">&#x00A0;</div>
By default, the users from the haclient group have full access to the cluster
  (or, more precisely, to the CIB). Access control lists allow for finer access
  control to the cluster.
<div style="height: 1.00em;">&#x00A0;</div>
Access control lists consist of an ordered set of access rules. Each rule allows
  read or write access or denies access completely. Rules are typically combined
  to produce a specific role. Then, users may be assigned a role.
<div style="height: 1.00em;">&#x00A0;</div>
For instance, this is a role which defines a set of rules allowing management of
  a single resource:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
role bigdb_admin \
    write meta:bigdb:target-role \
    write meta:bigdb:is-managed \
    write location:bigdb \
    read ref:bigdb
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The first two rules allow modifying the target-role and is-managed meta
  attributes which effectively enables users in this role to stop/start and
  manage/unmanage the resource. The constraints write access rule allows moving
  the resource around. Finally, the user is granted read access to the resource
  definition.
<div style="height: 1.00em;">&#x00A0;</div>
For proper operation of all Pacemaker programs, it is advisable to add the
  following role to all users:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
role read_all \
    read cib
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
For finer grained read access try with the rules listed in the following role:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
role basic_read \
    read node attribute:uname \
    read node attribute:type \
    read property \
    read status
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is however possible that some Pacemaker programs (e.g. ptest) may not
  function correctly if the whole CIB is not readable.
<div style="height: 1.00em;">&#x00A0;</div>
Some of the ACL rules in the examples above are expanded by the shell to XPath
  specifications. For instance, meta:bigdb:target-role expands to:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
//primitive[@id='bigdb']/meta_attributes/nvpair[@name='target-role']
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
You can see the expansion by showing XML:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live) configure# show xml bigdb_admin
...
&lt;acls&gt;
  &lt;acl_role id=&quot;bigdb_admin&quot;&gt;
      &lt;write id=&quot;bigdb_admin-write&quot;
      xpath=&quot;//primitive[@id='bigdb']/meta_attributes/nvpair[@name='target-role']&quot;/&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Many different XPath expressions can have equal meaning. For instance, the
  following two are equal, but only the first one is going to be recognized as
  shortcut:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
//primitive[@id='bigdb']/meta_attributes/nvpair[@name='target-role']
//resources/primitive[@id='bigdb']/meta_attributes/nvpair[@name='target-role']
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
XPath is a powerful language, but you should try to keep your ACL xpaths simple
  and the builtin shortcuts should be used whenever possible.
<h2 class="Ss" title="Ss" id="Syntax:_Resource_sets"><a class="selflink" href="#Syntax:_Resource_sets">Syntax:
  Resource sets</a></h2>
Using resource sets can be a bit confusing unless one knows the details of the
  implementation in Pacemaker as well as how to interpret the syntax provided by
  crmsh.
<div style="height: 1.00em;">&#x00A0;</div>
Three different types of resource sets are provided by crmsh, and each one
  implies different values for the two resource set attributes, sequential and
  require-all.
<div class="Pp"></div>
sequential
<div style="margin-left: 4.00ex;">If false, the resources in the set do not
  depend on each other internally. Setting sequential to true implies a strict
  order of dependency within the set.</div>
<div class="Pp"></div>
require-all
<div style="margin-left: 4.00ex;">If false, only one resource in the set is
  required to fulfil the requirements of the set. The set of A, B and C with
  require-all set to false is be read as &quot;A OR B OR C&quot; when its
  dependencies are resolved.</div>
<div style="height: 1.00em;">&#x00A0;</div>
The three types of resource sets modify the attributes in the following way:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.Implicit sets (no brackets).
  sequential=true, require-all=true</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.Parenthesis set (( ... )).
  sequential=false, require-all=true</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.Bracket set ([ ... ]). sequential=false,
  require-all=false</div>
<div style="height: 1.00em;">&#x00A0;</div>
To create a set with the properties sequential=true and require-all=false,
  explicitly set sequential in a bracketed set, [ A B C sequential=true ].
<div style="height: 1.00em;">&#x00A0;</div>
To create multiple sets with both sequential and require-all set to true,
  explicitly set sequential in a parenthesis set: A B ( C D sequential=true ).
<h2 class="Ss" title="Ss" id="Syntax:_Attribute_list_references"><a class="selflink" href="#Syntax:_Attribute_list_references">Syntax:
  Attribute list references</a></h2>
Attribute lists are used to set attributes and parameters for resources,
  constraints and property definitions. For example, to set the virtual IP used
  by an IPAddr2 resource the attribute ip can be set in an attribute list for
  that resource.
<div style="height: 1.00em;">&#x00A0;</div>
Attribute lists can have identifiers that name them, and other resources can
  reuse the same attribute list by referring to that name using an $id-ref. For
  example, the following statement defines a simple dummy resource with an
  attribute list which sets the parameter state to the value 1 and sets the
  identifier for the attribute list to on-state:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive dummy-1 Dummy params $id=on-state state=1
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
To refer to this attribute list from a different resource, refer to the on-state
  name using an id-ref:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive dummy-2 Dummy params $id-ref=on-state
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The resource dummy-2 will now also have the parameter state set to the value 1.
<h2 class="Ss" title="Ss" id="Syntax:_Attribute_references"><a class="selflink" href="#Syntax:_Attribute_references">Syntax:
  Attribute references</a></h2>
In some cases, referencing complete attribute lists is too coarse-grained, for
  example if two different parameters with different names should have the same
  value set. Instead of having to copy the value in multiple places, it is
  possible to create references to individual attributes in attribute lists.
<div style="height: 1.00em;">&#x00A0;</div>
To name an attribute in order to be able to refer to it later, prefix the
  attribute name with a $ character (as seen above with the special names $id
  and $id-ref:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive dummy-1 Dummy params $state=1
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The identifier state can now be used to refer to this attribute from other
  primitives, using the @&lt;id&gt; syntax:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive dummy-2 Dummy params @state
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
In some cases, using the attribute name as the identifier doesn&#x2019;t work
  due to name clashes. In this case, the syntax
  $&lt;id&gt;:&lt;name&gt;=&lt;value&gt; can be used to give the attribute a
  different identifier:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive dummy-1 params $dummy-state-on:state=1
primitive dummy-2 params @dummy-state-on
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
There is also the possibility that two resources both use the same attribute
  value but with different names. For example, a web server may have a parameter
  server_ip for setting the IP address where it listens for incoming requests,
  and a virtual IP resource may have a parameter called ip which sets the IP
  address it creates. To configure these two resources with an IP without
  repeating the value, the reference can be given a name using the syntax
  @&lt;id&gt;:&lt;name&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive virtual-ip IPaddr2 params $vip:ip=192.168.1.100
primitive webserver apache params @vip:server_ip
</pre>
</div>
<h2 class="Ss" title="Ss" id="Syntax:_Rule_expressions"><a class="selflink" href="#Syntax:_Rule_expressions">Syntax:
  Rule expressions</a></h2>
Many of the configuration commands in crmsh now support the use of <i>rule
  expressions</i>, which can influence what attributes apply to a resource or
  under which conditions a constraint is applied, depending on changing
  conditions like date, time, the value of attributes and more.
<div style="height: 1.00em;">&#x00A0;</div>
Here is an example of a simple rule expression used to apply a a different
  resource parameter on the node named node1:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive my_resource Special \
  params 2: rule #uname eq node1 interface=eth1 \
  params 1: interface=eth0
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
This primitive resource has two lists of parameters with descending priority.
  The parameter list with the highest priority is applied first, but only if the
  rule expressions for that parameter list all apply. In this case, the rule
  #uname eq node1 limits the parameter list so that it is only applied on node1.
<div style="height: 1.00em;">&#x00A0;</div>
Note that rule expressions are not terminated and are immediately followed by
  the data to which the rule is applied. In this case, the name-value pair
  interface=eth1.
<div style="height: 1.00em;">&#x00A0;</div>
Rule expressions can contain multiple expressions connected using the boolean
  operator or and and. The full syntax for rule expressions is listed below.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rules ::
  rule [id_spec] [$role=&lt;role&gt;] &lt;score&gt;: &lt;expression&gt;
  [rule [id_spec] [$role=&lt;role&gt;] &lt;score&gt;: &lt;expression&gt; ...]
<div class="Pp"></div>
id_spec :: $id=&lt;id&gt; | $id-ref=&lt;id&gt;
score :: &lt;number&gt; | &lt;attribute&gt; | [-]inf
expression :: &lt;simple_exp&gt; [&lt;bool_op&gt; &lt;simple_exp&gt; ...]
bool_op :: or | and
simple_exp :: &lt;attribute&gt; [type:]&lt;binary_op&gt; &lt;value&gt;
          | &lt;unary_op&gt; &lt;attribute&gt;
          | date &lt;date_expr&gt;
type :: &lt;string&gt; | &lt;version&gt; | &lt;number&gt;
binary_op :: lt | gt | lte | gte | eq | ne
unary_op :: defined | not_defined
<div class="Pp"></div>
date_expr :: lt &lt;end&gt;
         | gt &lt;start&gt;
         | in start=&lt;start&gt; end=&lt;end&gt;
         | in start=&lt;start&gt; &lt;duration&gt;
         | spec &lt;date_spec&gt;
duration|date_spec ::
         hours=&lt;value&gt;
         | monthdays=&lt;value&gt;
         | weekdays=&lt;value&gt;
         | yearsdays=&lt;value&gt;
         | months=&lt;value&gt;
         | weeks=&lt;value&gt;
         | years=&lt;value&gt;
         | weekyears=&lt;value&gt;
         | moon=&lt;value&gt;
</pre>
</div>
<h1 class="Sh" title="Sh" id="COMMAND_REFERENCE"><a class="selflink" href="#COMMAND_REFERENCE">COMMAND
  REFERENCE</a></h1>
The commands are structured to be compatible with the shell command line.
  Sometimes, the underlying Pacemaker grammar uses characters that have special
  meaning in bash, that will need to be quoted. This includes the hash or pound
  sign (#), single and double quotes, and any significant whitespace.
<div style="height: 1.00em;">&#x00A0;</div>
Whitespace is also significant when assigning values, meaning that key=value is
  different from key = value.
<div style="height: 1.00em;">&#x00A0;</div>
Commands can be referenced using short-hand as long as the short-hand is unique.
  This can be either a prefix of the command name or a prefix string of
  characters found in the name.
<div style="height: 1.00em;">&#x00A0;</div>
For example, status can be abbreviated as st or su, and configure as conf or
  cfg.
<div style="height: 1.00em;">&#x00A0;</div>
The syntax for the commands is given below in an informal, BNF-like grammar.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&lt;value&gt; denotes a string.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;[value] means that the construct is
  optional.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The ellipsis (...) signifies that the
  previous construct may be repeated.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;first|second means either first or
  second.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The rest are literals (strings, :,
  =).</div>
<h2 class="Ss" title="Ss" id="status"><a class="selflink" href="#status">status</a></h2>
Show cluster status. The status is displayed by crm_mon. Supply additional
  arguments for more information or different format. See crm_mon(8) for more
  details.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status
status simple
status full
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status [&lt;option&gt; ...]
<div class="Pp"></div>
option :: full
        | bynode
        | inactive
        | ops
        | timing
        | failcounts
        | verbose
        | quiet
        | html
        | xml
        | simple
        | tickets
        | noheaders
        | detail
        | brief
</pre>
</div>
<h2 class="Ss" title="Ss" id="verify"><a class="selflink" href="#verify">verify</a></h2>
Performs basic checks for the cluster configuration and current status,
  reporting potential issues.
<div style="height: 1.00em;">&#x00A0;</div>
See crm_verify(8) and crm_simulate(8) for more details.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
verify
verify scores
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
verify [scores]
</pre>
</div>
<h2 class="Ss" title="Ss" id="cluster_-_Cluster_setup_and_management"><a class="selflink" href="#cluster_-_Cluster_setup_and_management">cluster
  - Cluster setup and management</a></h2>
Whole-cluster configuration management with High Availability awareness.
<div style="height: 1.00em;">&#x00A0;</div>
The commands on the cluster level allows configuration and modification of the
  underlying cluster infrastructure, and also supplies tools to do whole-cluster
  systems management.
<div style="height: 1.00em;">&#x00A0;</div>
These commands enable easy installation and maintenance of a HA cluster, by
  providing support for package installation, configuration of the cluster
  messaging layer, file system setup and more.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>add</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command simplifies the process of adding a new node to a running cluster.
  The new node will be installed and configured with the packages and
  configuration files needed to run the cluster resources. If a cluster file
  system is used, the new node will be set up to host the file system.
<div style="height: 1.00em;">&#x00A0;</div>
This command should be executed from a node already in the cluster.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
add &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>copy</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Copy file to other cluster nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Copies the given file to all other nodes unless given a list of nodes to copy to
  as argument.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
copy &lt;filename&gt; [nodes ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
copy /etc/motd
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>diff</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Displays the difference, if any, between a given file on different nodes. If the
  second argument is --checksum, a checksum of the file will be calculated and
  displayed for each node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff &lt;file&gt; [--checksum] [nodes...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff /etc/crm/crm.conf node2
diff /etc/resolv.conf --checksum
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>health</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Runs a larger set of tests and queries on all nodes in the cluster to verify the
  general system health and detect potential problems.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
health
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>init</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Installs and configures a basic HA cluster on a set of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
init node1 node2 node3
init --dry-run node1 node2 node3
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>remove</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command simplifies the process of removing a node from the cluster, moving
  any resources hosted by that node to other nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
remove &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>run</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command takes a shell statement as argument, executes that statement on all
  nodes in the cluster, and reports the result.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run &lt;command&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run &quot;cat /proc/uptime&quot;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>start</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Starts the cluster-related system services on this node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
start
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>status</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Reports the status for the cluster messaging layer on the local node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>stop</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Stops the cluster-related system services on this node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
stop
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>wait_for_startup</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Mostly useful in scripts or automated workflows, this command will attempt to
  connect to the local cluster node repeatedly. The command will keep trying
  until the cluster node responds, or the timeout elapses. The timeout can be
  changed by supplying a value in seconds as an argument.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
wait_for_startup
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="script_-_Cluster_script_management"><a class="selflink" href="#script_-_Cluster_script_management">script
  - Cluster script management</a></h2>
A big part of the configuration and management of a cluster is collecting
  information about all cluster nodes and deploying changes to those nodes.
  Often, just performing the same procedure on all nodes will encounter
  problems, due to subtle differences in the configuration.
<div style="height: 1.00em;">&#x00A0;</div>
For example, when configuring a cluster for the first time, the software needs
  to be installed and configured on all nodes before the cluster software can be
  launched and configured using crmsh. This process is cumbersome and
  error-prone, and the goal is for scripts to make this process easier.
<div style="height: 1.00em;">&#x00A0;</div>
Scripts are implemented using the python parallax package which provides a thin
  wrapper on top of SSH. This allows the scripts to function through the usual
  SSH channels used for system maintenance, requiring no additional software to
  be installed or maintained.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>json</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command provides a JSON API for the cluster scripts, intended for use in
  user interface tools that want to interact with the cluster via scripts.
<div style="height: 1.00em;">&#x00A0;</div>
The command takes a single argument, which should be a JSON array with the first
  member identifying the command to perform.
<div style="height: 1.00em;">&#x00A0;</div>
The output is line-based: Commands that return multiple results will return them
  line-by-line, ending with a terminator value: &quot;end&quot;.
<div style="height: 1.00em;">&#x00A0;</div>
When providing parameter values to this command, they should be provided as
  nested objects, so virtual-ip:ip=192.168.0.5 on the command line becomes the
  JSON object {&quot;virtual-ip&quot;:{&quot;ip&quot;:&quot;192.168.0.5&quot;}}.
<div style="height: 1.00em;">&#x00A0;</div>
API:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
[&quot;list&quot;]
=&gt; [{name, shortdesc, category}]
<div class="Pp"></div>
[&quot;show&quot;, &lt;name&gt;]
=&gt; [{name, shortdesc, longdesc, category, &lt;&lt;steps&gt;&gt;}]
<div class="Pp"></div>
&lt;&lt;steps&gt;&gt; := [{name, shortdesc], longdesc, required, parameters, steps}]
<div class="Pp"></div>
&lt;&lt;params&gt;&gt; := [{name, shortdesc, longdesc, required, unique, advanced,
                type, value, example}]
<div class="Pp"></div>
[&quot;verify&quot;, &lt;name&gt;, &lt;&lt;values&gt;&gt;]
=&gt; [{shortdesc, longdesc, text, nodes}]
<div class="Pp"></div>
[&quot;run&quot;, &lt;name&gt;, &lt;&lt;values&gt;&gt;]
=&gt; [{shortdesc, rc, output|error}]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>list</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Lists the available scripts, sorted by category. Scripts that have the special
  Script category are hidden by default, since they are mainly used by other
  scripts or commands. To also show these, pass all as argument.
<div style="height: 1.00em;">&#x00A0;</div>
To get a flat list of script names, not sorted by category, pass names as an
  extra argument.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list [all] [names]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list
list all names
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>run</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Given a list of parameter values, this command will execute the actions
  specified by the cluster script. The format for the parameter values is the
  same as for the verify command.
<div style="height: 1.00em;">&#x00A0;</div>
Can optionally take at least two parameters: * nodes=&lt;nodes&gt;: List of
  nodes that the script runs over * dry_run=yes|no: If set, the script will not
  perform any modifications.
<div style="height: 1.00em;">&#x00A0;</div>
Additional parameters may be available depending on the script.
<div style="height: 1.00em;">&#x00A0;</div>
Use the show command to see what parameters are available.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run &lt;script&gt; [args...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run apache install=true
run sbd id=sbd-1 node=node1 sbd_device=/dev/disk/by-uuid/F00D-CAFE
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Prints a description and short summary of the script, with descriptions of the
  accepted parameters.
<div style="height: 1.00em;">&#x00A0;</div>
Advanced parameters are hidden by default. To show the complete list of
  parameters accepted by the script, pass all as argument.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show &lt;script&gt; [all]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show virtual-ip
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>verify</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Checks the given parameter values, and returns a list of actions that will be
  executed when running the script if provided the same list of parameter
  values.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
verify &lt;script&gt; [args...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
verify sbd id=sbd-1 node=node1 sbd_device=/dev/disk/by-uuid/F00D-CAFE
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="corosync_-_Corosync_management"><a class="selflink" href="#corosync_-_Corosync_management">corosync
  - Corosync management</a></h2>
Corosync is the underlying messaging layer for most HA clusters. This level
  provides commands for editing and managing the corosync configuration.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>add-node</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Adds a node to the corosync configuration. This is used with the udpu type
  configuration in corosync.
<div style="height: 1.00em;">&#x00A0;</div>
A nodeid for the added node is generated automatically.
<div style="height: 1.00em;">&#x00A0;</div>
Note that this command assumes that only a single ring is used, and sets only
  the address for ring0.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
add-node &lt;addr&gt; [name]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>del-node</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Removes a node from the corosync configuration. The argument given is the
  ring0_addr address set in the configuration file.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
del-node &lt;addr&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>diff</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Diffs the corosync configurations on different nodes. If no nodes are given as
  arguments, the corosync configurations on all nodes in the cluster are
  compared.
<div style="height: 1.00em;">&#x00A0;</div>
diff takes an option argument --checksum, to display a checksum for each file
  instead of calculating a diff.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff [--checksum] [node...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>edit</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Opens the Corosync configuration file in an editor.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
edit
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>get</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Returns the value configured in corosync.conf, which is not necessarily the
  value used in the running configuration. See reload for telling corosync about
  configuration changes.
<div style="height: 1.00em;">&#x00A0;</div>
The argument is the complete dot-separated path to the value.
<div style="height: 1.00em;">&#x00A0;</div>
If there are multiple values configured with the same path, the command returns
  all values for that path. For example, to get all configured ring0_addr
  values, use this command:
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
get nodelist.node.ring0_addr
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>log</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Opens the log file specified in the corosync configuration file. If no log file
  is configured, this command returns an error.
<div style="height: 1.00em;">&#x00A0;</div>
The pager used can be configured either using the PAGER environment variable or
  in crm.conf.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
log
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>pull</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Gets the corosync configuration from another node and copies it to this node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
pull &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>push</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Pushes the corosync configuration file on this node to the list of nodes
  provided. If no target nodes are given, the configuration is pushed to all
  other nodes in the cluster.
<div style="height: 1.00em;">&#x00A0;</div>
It is recommended to use csync2 to distribute the cluster configuration files
  rather than relying on this command.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
push [node] ...
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
push node-2 node-3
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>reload</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Tells all instances of corosync in this cluster to reload corosync.conf.
<div style="height: 1.00em;">&#x00A0;</div>
After pushing a new configuration to all cluster nodes, call this command to
  make corosync use the new configuration.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
reload
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>set</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Sets the value identified by the given path. If the value does not exist in the
  configuration file, it will be added. However, if the section containing the
  value does not exist, the command will fail.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
set quorum.expected_votes 2
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Displays the corosync configuration on the current node.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>status</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Displays the status of Corosync, including the votequorum state.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="cib_-_CIB_shadow_management"><a class="selflink" href="#cib_-_CIB_shadow_management">cib
  - CIB shadow management</a></h2>
This level is for management of shadow CIBs. It is available both at the top
  level and the configure level.
<div style="height: 1.00em;">&#x00A0;</div>
All the commands are implemented using cib_shadow(8) and the CIB_shadow
  environment variable. The user prompt always includes the name of the
  currently active shadow or the live CIB.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>cibstatus</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Enter edit and manage the CIB status section level. See the CIB status
  management section.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>commit</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Apply a shadow CIB to the cluster. If the shadow name is omitted then the
  current shadow CIB is applied.
<div style="height: 1.00em;">&#x00A0;</div>
Temporary shadow CIBs are removed automatically on commit.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
commit [&lt;cib&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>delete</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Delete an existing shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
delete &lt;cib&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>diff</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Print differences between the current cluster configuration and the active
  shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>import</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
At times it may be useful to create a shadow file from the existing CIB. The CIB
  may be specified as file or as a PE input file number. The shell will look up
  files in the local directory first and then in the PE directory (typically
  /var/lib/pengine). Once the CIB file is found, it is copied to a shadow and
  this shadow is immediately available for use at both configure and cibstatus
  levels.
<div style="height: 1.00em;">&#x00A0;</div>
If the shadow name is omitted then the target shadow is named after the input
  CIB file.
<div style="height: 1.00em;">&#x00A0;</div>
Note that there are often more than one PE input file, so you may need to
  specify the full name.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
import {&lt;file&gt;|&lt;number&gt;} [&lt;shadow&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
import pe-warn-2222
import 2289 issue2
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>list</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
List existing shadow CIBs.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>new</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Create a new shadow CIB. The live cluster configuration and status is copied to
  the shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
If the name of the shadow is omitted, we create a temporary CIB shadow. It is
  useful if multiple level sessions are desired without affecting the cluster. A
  temporary CIB shadow is short lived and will be removed either on commit or on
  program exit. Note that if the temporary shadow is not committed all changes
  in the temporary shadow are lost.
<div style="height: 1.00em;">&#x00A0;</div>
Specify withstatus if you want to edit the status section of the shadow CIB (see
  the cibstatus section). Add force to force overwriting the existing shadow
  CIB.
<div style="height: 1.00em;">&#x00A0;</div>
To start with an empty configuration that is not copied from the live CIB,
  specify the empty keyword. (This also allows a shadow CIB to be created in
  case no cluster is running.)
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
new [&lt;cib&gt;] [withstatus] [force] [empty]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>reset</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Copy the current cluster configuration into the shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
reset &lt;cib&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>use</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Choose a CIB source. If you want to edit the status from the shadow CIB specify
  withstatus (see cibstatus). Leave out the CIB name to switch to the running
  CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
use [&lt;cib&gt;] [withstatus]
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="ra_-_Resource_Agents_(RA)_lists_and_documentation"><a class="selflink" href="#ra_-_Resource_Agents_(RA)_lists_and_documentation">ra
  - Resource Agents (RA) lists and documentation</a></h2>
This level contains commands which show various information about the installed
  resource agents. It is available both at the top level and at the configure
  level.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>classes</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Print all resource agents' classes and, where appropriate, a list of available
  providers.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
classes
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>info (meta)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show the meta-data of a resource agent type. This is where users can find
  information on how to use a resource agent. It is also possible to get
  information from some programs: pengine, crmd, cib, and stonithd. Just specify
  the program name instead of an RA.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
info [&lt;class&gt;:[&lt;provider&gt;:]]&lt;type&gt;
info &lt;type&gt; &lt;class&gt; [&lt;provider&gt;] (obsolete)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
info apache
info ocf:pacemaker:Dummy
info stonith:ipmilan
info pengine
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>list</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
List available resource agents for the given class. If the class is ocf, supply
  a provider to get agents which are available only from that provider.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list &lt;class&gt; [&lt;provider&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list ocf pacemaker
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>providers</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
List providers for a resource agent type. The class parameter defaults to ocf.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
providers &lt;type&gt; [&lt;class&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
providers apache
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>validate</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
If the resource agent supports the validate-all action, this calls the action
  with the given parameters, printing any warnings or errors reported by the
  agent.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
validate &lt;agent&gt; [&lt;key&gt;=&lt;value&gt; ...]
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="resource_-_Resource_management"><a class="selflink" href="#resource_-_Resource_management">resource
  - Resource management</a></h2>
At this level resources may be managed.
<div style="height: 1.00em;">&#x00A0;</div>
All (or almost all) commands are implemented with the CRM tools such as
  crm_resource(8).
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ban</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Ban a resource from running on a certain node. If no node is given as argument,
  the resource is banned from the current location.
<div style="height: 1.00em;">&#x00A0;</div>
See move for details on other arguments.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ban &lt;rsc&gt; [&lt;node&gt;] [&lt;lifetime&gt;] [force]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>cleanup</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Cleanup resource status. Typically done after the resource has temporarily
  failed. If a node is omitted, cleanup on all nodes. If there are many nodes,
  the command may take a while.
<div style="height: 1.00em;">&#x00A0;</div>
(Pacemaker 1.1.14) Pass force to cleanup the resource itself, otherwise the
  cleanup command will apply to the parent resource (if any).
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
cleanup &lt;rsc&gt; [&lt;node&gt;] [force]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>clear (unmove, unmigrate, unban)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Remove any relocation constraint created by the move, migrate or ban command.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
clear &lt;rsc&gt;
unmigrate &lt;rsc&gt;
unban &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>constraints</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Display the location and colocation constraints affecting the resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
constraints &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>demote</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Demote a master-slave resource using the target-role attribute.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
demote &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>failcount</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show/edit/delete the failcount of a resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
failcount &lt;rsc&gt; set &lt;node&gt; &lt;value&gt;
failcount &lt;rsc&gt; delete &lt;node&gt;
failcount &lt;rsc&gt; show &lt;node&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
failcount fs_0 delete node2
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>locate</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show the current location of one or more resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
locate [&lt;rsc&gt; ...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>maintenance</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Enables or disables the per-resource maintenance mode. When this mode is
  enabled, no monitor operations will be triggered for the resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
maintenance &lt;resource&gt; [on|off|true|false]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
maintenance rsc1
maintenance rsc2 off
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>manage</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Manage a resource using the is-managed attribute. If there are multiple meta
  attributes sets, the attribute is set in all of them. If the resource is a
  clone, all is-managed attributes are removed from the children resources.
<div style="height: 1.00em;">&#x00A0;</div>
For details on group management see options manage-children.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
manage &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>meta</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show/edit/delete a meta attribute of a resource. Currently, all meta attributes
  of a resource may be managed with other commands such as resource stop.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
meta &lt;rsc&gt; set &lt;attr&gt; &lt;value&gt;
meta &lt;rsc&gt; delete &lt;attr&gt;
meta &lt;rsc&gt; show &lt;attr&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
meta ip_0 set target-role stopped
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>move (migrate)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Move a resource away from its current location.
<div style="height: 1.00em;">&#x00A0;</div>
If the destination node is left out, the resource is migrated by creating a
  constraint which prevents it from running on the current node. For this type
  of constraint to be created, the force argument is required.
<div style="height: 1.00em;">&#x00A0;</div>
A lifetime may be given for the constraint. Once it expires, the location
  constraint will no longer be active.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
move &lt;rsc&gt; [&lt;node&gt;] [&lt;lifetime&gt;] [force]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>operations</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show active operations, optionally filtered by resource and node.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
operations [&lt;rsc&gt;] [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>param</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show/edit/delete a parameter of a resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
param &lt;rsc&gt; set &lt;param&gt; &lt;value&gt;
param &lt;rsc&gt; delete &lt;param&gt;
param &lt;rsc&gt; show &lt;param&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
param ip_0 show ip
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>promote</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Promote a master-slave resource using the target-role attribute.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
promote &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>refresh</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Refresh CIB from the LRM status. <b>Note</b>
<div style="height: 1.00em;">&#x00A0;</div>
refresh has been deprecated and is now an alias for cleanup.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
refresh [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>reprobe</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Probe for resources not started by the CRM. <b>Note</b>
<div style="height: 1.00em;">&#x00A0;</div>
reprobe has been deprecated and is now an alias for cleanup.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
reprobe [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>restart</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Restart one or more resources. This is essentially a shortcut for resource stop
  followed by a start. The shell is first going to wait for the stop to finish,
  that is for all resources to really stop, and only then to order the start
  action. Due to this command entailing a whole set of operations, informational
  messages are printed to let the user see some progress.
<div style="height: 1.00em;">&#x00A0;</div>
For details on group management see options manage-children.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
restart &lt;rsc&gt; [&lt;rsc&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm resource restart g_webserver
INFO: ordering g_webserver to stop
waiting for stop to finish .... done
INFO: ordering g_webserver to start
#
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>scores</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Display the allocation scores for all resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
scores
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>secret</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Sensitive parameters can be kept in local files rather than CIB in order to
  prevent accidental data exposure. Use the secret command to manage such
  parameters. stash and unstash move the value from the CIB and back to the CIB
  respectively. The set subcommand sets the parameter to the provided value.
  delete removes the parameter completely. show displays the value of the
  parameter from the local file. Use check to verify if the local file content
  is valid.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
secret &lt;rsc&gt; set &lt;param&gt; &lt;value&gt;
secret &lt;rsc&gt; stash &lt;param&gt;
secret &lt;rsc&gt; unstash &lt;param&gt;
secret &lt;rsc&gt; delete &lt;param&gt;
secret &lt;rsc&gt; show &lt;param&gt;
secret &lt;rsc&gt; check &lt;param&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
secret fence_1 show password
secret fence_1 stash password
secret fence_1 set password secret_value
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>start</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Start one or more resources by setting the target-role attribute. If there are
  multiple meta attributes sets, the attribute is set in all of them. If the
  resource is a clone, all target-role attributes are removed from the children
  resources.
<div style="height: 1.00em;">&#x00A0;</div>
For details on group management see options manage-children.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
start &lt;rsc&gt; [&lt;rsc&gt; ...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>status (show, list)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Print resource status. More than one resource can be shown at once. If the
  resource parameter is left out, the status of all resources is printed.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status [&lt;rsc&gt; ...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>stop</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Stop one or more resources using the target-role attribute. If there are
  multiple meta attributes sets, the attribute is set in all of them. If the
  resource is a clone, all target-role attributes are removed from the children
  resources.
<div style="height: 1.00em;">&#x00A0;</div>
For details on group management see options manage-children.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
stop &lt;rsc&gt; [&lt;rsc&gt; ...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>trace</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Start tracing RA for the given operation. The trace files are stored in
  $HA_VARLIB/trace_ra. If the operation to be traced is monitor, note that the
  number of trace files can grow very quickly.
<div style="height: 1.00em;">&#x00A0;</div>
If no operation name is given, crmsh will attempt to trace all operations for
  the RA. This includes any configured operations, start and stop as well as
  promote/demote for multistate resources.
<div style="height: 1.00em;">&#x00A0;</div>
To trace the probe operation which exists for all resources, either set a trace
  for monitor with interval 0, or use probe as the operation name.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
trace &lt;rsc&gt; [&lt;op&gt; [&lt;interval&gt;] ]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
trace fs start
trace webserver
trace webserver probe
trace fs monitor 0
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>unmanage</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Unmanage a resource using the is-managed attribute. If there are multiple meta
  attributes sets, the attribute is set in all of them. If the resource is a
  clone, all is-managed attributes are removed from the children resources.
<div style="height: 1.00em;">&#x00A0;</div>
For details on group management see options manage-children.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
unmanage &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>untrace</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Stop tracing RA for the given operation. If no operation name is given, crmsh
  will attempt to stop tracing all operations in resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
untrace &lt;rsc&gt; [&lt;op&gt; [&lt;interval&gt;] ]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
untrace fs start
untrace webserver
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>utilization</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show/edit/delete a utilization attribute of a resource. These attributes
  describe hardware requirements. By setting the placement-strategy cluster
  property appropriately, it is possible then to distribute resources based on
  resource requirements and node size. See also node utilization attributes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
utilization &lt;rsc&gt; set &lt;attr&gt; &lt;value&gt;
utilization &lt;rsc&gt; delete &lt;attr&gt;
utilization &lt;rsc&gt; show &lt;attr&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
utilization xen1 set memory 4096
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="node_-_Node_management"><a class="selflink" href="#node_-_Node_management">node
  - Node management</a></h2>
Node management and status commands.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>attribute</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Edit node attributes. This kind of attribute should refer to relatively static
  properties, such as memory size.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
attribute &lt;node&gt; set &lt;attr&gt; &lt;value&gt;
attribute &lt;node&gt; delete &lt;attr&gt;
attribute &lt;node&gt; show &lt;attr&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
attribute node_1 set memory_size 4096
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>clearstate</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Resets and clears the state of the specified node. This node is afterwards
  assumed clean and offline. This command can be used to manually confirm that a
  node has been fenced (e.g., powered off).
<div style="height: 1.00em;">&#x00A0;</div>
Be careful! This can cause data corruption if you confirm that a node is down
  that is, in fact, not cleanly down - the cluster will proceed as if the fence
  had succeeded, possibly starting resources multiple times.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
clearstate &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>delete</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Delete a node. This command will remove the node from the CIB and, in case the
  cluster stack is running, use the appropriate program (crm_node or hb_delnode)
  to remove the node from the membership.
<div style="height: 1.00em;">&#x00A0;</div>
If the node is still listed as active and a member of our partition we refuse to
  remove it. With the global force option (-F) we will try to delete the node
  anyway.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
delete &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>fence</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Make CRM fence a node. This functionality depends on stonith resources capable
  of fencing the specified node. No such stonith resources, no fencing will
  happen.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
fence &lt;node&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>maintenance</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set the node status to maintenance. This is equivalent to the cluster-wide
  maintenance-mode property but puts just one node into the maintenance mode.
<div style="height: 1.00em;">&#x00A0;</div>
The node parameter defaults to the node where the command is run.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
maintenance [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>online</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set a node to online status.
<div style="height: 1.00em;">&#x00A0;</div>
The node parameter defaults to the node where the command is run.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
online [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ready</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set the node&#x2019;s maintenance status to off. The node should be now again
  fully operational and capable of running resource operations.
<div style="height: 1.00em;">&#x00A0;</div>
The node parameter defaults to the node where the command is run.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ready [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>server</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Remote nodes may have a configured server address which should be used when
  contacting the node. This command prints the server address if configured,
  else the node name.
<div style="height: 1.00em;">&#x00A0;</div>
If no parameter is given, the adresses or names for all nodes are printed.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
server [&lt;node&gt; ...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show a node definition. If the node parameter is omitted then all nodes are
  shown.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>standby</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set a node to standby status. The node parameter defaults to the node where the
  command is run.
<div style="height: 1.00em;">&#x00A0;</div>
Additionally, you may specify a lifetime for the standby---if set to reboot, the
  node will be back online once it reboots. forever will keep the node in
  standby after reboot. The life time defaults to forever.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
standby [&lt;node&gt;] [&lt;lifetime&gt;]
<div class="Pp"></div>
lifetime :: reboot | forever
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
standby bob reboot
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>status</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show nodes' status as XML. If the node parameter is omitted then all nodes are
  shown.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status [&lt;node&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>status-attr</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Edit node attributes which are in the CIB status section, i.e. attributes which
  hold properties of a more volatile nature. One typical example is attribute
  generated by the pingd utility.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status-attr &lt;node&gt; set &lt;attr&gt; &lt;value&gt;
status-attr &lt;node&gt; delete &lt;attr&gt;
status-attr &lt;node&gt; show &lt;attr&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
status-attr node_1 show pingd
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>utilization</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Edit node utilization attributes. These attributes describe hardware
  characteristics as integer numbers such as memory size or the number of CPUs.
  By setting the placement-strategy cluster property appropriately, it is
  possible then to distribute resources based on resource requirements and node
  size. See also resource utilization attributes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
utilization &lt;node&gt; set &lt;attr&gt; &lt;value&gt;
utilization &lt;node&gt; delete &lt;attr&gt;
utilization &lt;node&gt; show &lt;attr&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
utilization node_1 set memory 16384
utilization node_1 show cpu
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="site_-_GEO_clustering_site_support"><a class="selflink" href="#site_-_GEO_clustering_site_support">site
  - GEO clustering site support</a></h2>
A cluster may consist of two or more subclusters in different and distant
  locations. This set of commands supports such setups.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ticket</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Tickets are cluster-wide attributes. They can be managed at the site where this
  command is executed.
<div style="height: 1.00em;">&#x00A0;</div>
It is then possible to constrain resources depending on the ticket availability
  (see the rsc_ticket command for more details).
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ticket {grant|revoke|standby|activate|show|time|delete} &lt;ticket&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ticket grant ticket1
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="options_-_User_preferences"><a class="selflink" href="#options_-_User_preferences">options
  - User preferences</a></h2>
The user may set various options for the crm shell itself.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>add-quotes</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The shell (as in /bin/sh) parser strips quotes from the command line. This may
  sometimes make it really difficult to type values which contain white space.
  One typical example is the configure filter command. The crm shell will supply
  extra quotes around arguments which contain white space. The default is yes.
  <b>Note on quotes use</b>
<div style="height: 1.00em;">&#x00A0;</div>
Adding quotes around arguments automatically has been introduced with version
  1.2.2 and it is technically a regression. Being a regression is the only
  reason the add-quotes option exists. If you have custom shell scripts which
  would break, just set the add-quotes option to no.
<div style="height: 1.00em;">&#x00A0;</div>
For instance, with adding quotes enabled, it is possible to do the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# crm configure primitive d1 Dummy \
    meta description=&quot;some description here&quot;
# crm configure filter 'sed &quot;s/hostlist=./&amp;node-c /&quot;' fencing
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>check-frequency</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Semantic check of the CIB or elements modified or created may be done on every
  configuration change (always), when verifying (on-verify) or never. It is by
  default set to always. Experts may want to change the setting to on-verify.
<div style="height: 1.00em;">&#x00A0;</div>
The checks require that resource agents are present. If they are not installed
  at the configuration time set this preference to never.
<div style="height: 1.00em;">&#x00A0;</div>
See Configuration semantic checks for more details.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>check-mode</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Semantic check of the CIB or elements modified or created may be done in the
  strict mode or in the relaxed mode. In the former certain problems are treated
  as configuration errors. In the relaxed mode all are treated as warnings. The
  default is strict.
<div style="height: 1.00em;">&#x00A0;</div>
See Configuration semantic checks for more details.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>colorscheme</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
With output set to color, a comma separated list of colors from this option are
  used to emphasize:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;keywords</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;object ids</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;attribute names</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;attribute values</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;scores</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;resource references</div>
<div style="height: 1.00em;">&#x00A0;</div>
crm can show colors only if there is curses support for python installed
  (usually provided by the python-curses package). The colors are whatever is
  available in your terminal. Use normal if you want to keep the default
  foreground color.
<div style="height: 1.00em;">&#x00A0;</div>
This user preference defaults to yellow,normal,cyan,red,green,magenta which is
  good for terminals with dark background. You may want to change the color
  scheme and save it in the preferences file for other color setups.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
colorscheme yellow,normal,blue,red,green,magenta
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>editor</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The edit command invokes an editor. Use this to specify your preferred editor
  program. If not set, it will default to either the value of the EDITOR
  environment variable or to one of the standard UNIX editors (vi,emacs,nano).
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
editor program
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
editor vim
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>manage-children</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Some resource management commands, such as resource stop, when the target
  resource is a group, may not always produce desired result. Each element,
  group and the primitive members, can have a meta attribute and those
  attributes may end up with conflicting values. Consider the following
  construct:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)# configure show svc fs virtual-ip
primitive fs Filesystem \
    params device=&quot;/dev/drbd0&quot; directory=&quot;/srv/nfs&quot; fstype=ext3 \
    op monitor interval=10s \
    meta target-role=Started
primitive virtual-ip IPaddr2 \
    params ip=10.2.13.110 iflabel=1 \
    op monitor interval=10s \
    op start interval=0 \
    meta target-role=Started
group svc fs virtual-ip \
    meta target-role=Stopped
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Even though the element svc should be stopped, the group is actually running
  because all its members have the target-role set to Started:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)# resource show svc
resource svc is running on: xen-f
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Hence, if the user invokes resource stop svc the intention is not clear. This
  preference gives the user an opportunity to better control what happens if
  attributes of group members have values which are in conflict with the same
  attribute of the group itself.
<div style="height: 1.00em;">&#x00A0;</div>
Possible values are ask (the default), always, and never. If set to always, the
  crm shell removes all children attributes which have values different from the
  parent. If set to never, all children attributes are left intact. Finally, if
  set to ask, the user will be asked for each member what is to be done.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>output</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
crm can adorn configurations in two ways: in color (similar to for instance the
  ls --color command) and by showing keywords in upper case. Possible values are
  plain, color-always, color, and <i>uppercase</i>. It is possible to combine
  uppercase with one of the color values in order to get an upper case xmass
  tree. Just set this option to color,uppercase or color-always,uppercase. In
  case you need color codes in pipes, color-always forces color codes even in
  case the terminal is not a tty (just like ls --color=always).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>pager</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The view command displays text through a pager. Use this to specify your
  preferred pager program. If not set, it will default to either the value of
  the PAGER environment variable or to one of the standard UNIX system pagers
  (less,more,pg).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>reset</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command resets all user options to the defaults. If used as a single-shot
  command, the rc file ($HOME/.config/crm/rc) is reset to the defaults
  too.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>save</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Save current settings to the rc file ($HOME/.config/crm/rc). On further crm
  runs, the rc file is automatically read and parsed.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>set</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Sets the value of an option. Takes the fully qualified name of the option as
  argument, as displayed by show all.
<div style="height: 1.00em;">&#x00A0;</div>
The modified option value is stored in the user-local configuration file,
  usually found in ~/.config/crm/crm.conf.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
set &lt;option&gt; &lt;value&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
set color.warn &quot;magenta bold&quot;
set editor nano
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Display all current settings.
<div style="height: 1.00em;">&#x00A0;</div>
Given an option name as argument, show will display only the value of that
  argument.
<div style="height: 1.00em;">&#x00A0;</div>
Given all as argument, show displays all available user options.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show [all|&lt;option&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show
show skill-level
show all
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>skill-level</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Based on the skill-level setting, the user is allowed to use only a subset of
  commands. There are three levels: operator, administrator, and expert. The
  operator level allows only commands at the resource and node levels, but not
  editing or deleting resources. The administrator may do that and may also
  configure the cluster at the configure level and manage the shadow CIBs. The
  expert may do all.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
skill-level &lt;level&gt;
<div class="Pp"></div>
level :: operator | administrator | expert
</pre>
</div>
<b>Note on security</b>
<div style="height: 1.00em;">&#x00A0;</div>
The skill-level option is advisory only. There is nothing stopping any users
  change their skill level (see Access Control Lists (ACL) on how to enforce
  access control).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>sort-elements</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
crm by default sorts CIB elements. If you want them appear in the order they
  were created, set this option to no.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
sort-elements {yes|no}
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
sort-elements no
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>user</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Sufficient privileges are necessary in order to manage a cluster: programs such
  as crm_verify or crm_resource and, ultimately, cibadmin have to be run either
  as root or as the CRM owner user (typically hacluster). You don&#x2019;t have
  to worry about that if you run crm as root. A more secure way is to run the
  program with your usual privileges, set this option to the appropriate user
  (such as hacluster), and setup the sudoers file.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
user system-user
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
user hacluster
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>wait</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
In normal operation, crm runs a command and gets back immediately to process
  other commands or get input from the user. With this option set to yes it will
  wait for the started transition to finish. In interactive mode dots are
  printed to indicate progress.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
wait {yes|no}
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
wait yes
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="configure_-_CIB_configuration"><a class="selflink" href="#configure_-_CIB_configuration">configure
  - CIB configuration</a></h2>
This level enables all CIB object definition commands.
<div style="height: 1.00em;">&#x00A0;</div>
The configuration may be logically divided into four parts: nodes, resources,
  constraints, and (cluster) properties and attributes. Each of these commands
  support one or more basic CIB objects.
<div style="height: 1.00em;">&#x00A0;</div>
Nodes and attributes describing nodes are managed using the node command.
<div style="height: 1.00em;">&#x00A0;</div>
Commands for resources are:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;primitive</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;monitor</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;group</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;clone</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;ms/master (master-slave)</div>
<div style="height: 1.00em;">&#x00A0;</div>
In order to streamline large configurations, it is possible to define a template
  which can later be referenced in primitives:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;rsc_template</div>
<div style="height: 1.00em;">&#x00A0;</div>
In that case the primitive inherits all attributes defined in the template.
<div style="height: 1.00em;">&#x00A0;</div>
There are three types of constraints:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;location</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;colocation</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;order</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is possible to define fencing order (stonith resource priorities):
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;fencing_topology</div>
<div style="height: 1.00em;">&#x00A0;</div>
Finally, there are the cluster properties, resource meta attributes defaults,
  and operations defaults. All are just a set of attributes. These attributes
  are managed by the following commands:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;property</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;rsc_defaults</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;op_defaults</div>
<div style="height: 1.00em;">&#x00A0;</div>
In addition to the cluster configuration, the Access Control Lists (ACL) can be
  setup to allow access to parts of the CIB for users other than root and
  hacluster. The following commands manage ACL:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;user</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;role</div>
<div style="height: 1.00em;">&#x00A0;</div>
In Pacemaker 1.1.12 and up, this command replaces the user command for handling
  ACLs:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;acl_target</div>
<div style="height: 1.00em;">&#x00A0;</div>
The changes are applied to the current CIB only on ending the configuration
  session or using the commit command.
<div style="height: 1.00em;">&#x00A0;</div>
Comments start with # in the first line. The comments are tied to the element
  which follows. If the element moves, its comments will follow.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>acl_target</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Defines an ACL target.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
acl_target &lt;tid&gt; [&lt;role&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
acl_target joe resource_admin constraint_editor
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>alert</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;"><b>Version note</b>
<div style="height: 1.00em;">&#x00A0;</div>
This feature is only available in Pacemaker 1.1.15+.
<div style="height: 1.00em;">&#x00A0;</div>
Event-driven alerts enables calling scripts whenever interesting events occur in
  the cluster (nodes joining or leaving, resources starting or stopping, etc.).
<div style="height: 1.00em;">&#x00A0;</div>
The path is an arbitrary file path to an alert script. Existing external scripts
  used with ClusterMon resources can be used as alert scripts, since the
  interface is compatible.
<div style="height: 1.00em;">&#x00A0;</div>
Each alert may have a number of receipients configured. These will be passed to
  the script as arguments. The first recipient will also be passed as the
  CRM_alert_recipient environment variable, for compatibility with existing
  scripts that only support one recipient.
<div style="height: 1.00em;">&#x00A0;</div>
The available meta attributes are timeout (default 30s) and timestamp-format
  (default &quot;%H:%M:%S.%06N&quot;).
<div style="height: 1.00em;">&#x00A0;</div>
Some configurations may require each recipient to be delimited by brackets, to
  avoid ambiguity. In the example alert-2 below, the meta attribute for timeout
  is defined after the recipient, so the brackets are used to ensure that the
  meta attribute is set for the alert and not just the recipient. This can be
  avoided by setting any alert attributes before defining the recipients.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
alert &lt;id&gt; &lt;path&gt; \
  [attributes &lt;nvpair&gt; ...] \
  [meta &lt;nvpair&gt; ...] \
  [to [{] &lt;recipient&gt;
    [attributes &lt;nvpair&gt; ...] \
    [meta &lt;nvpair&gt; ...] [}] \
    ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
alert alert-1 /srv/pacemaker/pcmk_alert_sample.sh \
    to /var/log/cluster-alerts.log
<div class="Pp"></div>
alert alert-2 /srv/pacemaker/example_alert.sh \
    meta timeout=60s \
    to { /var/log/cluster-alerts.log }
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>cib</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This level is for management of shadow CIBs. It is available at the configure
  level to enable saving intermediate changes to a shadow CIB instead of to the
  live cluster. This short excerpt shows how:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# cib new test-2
INFO: test-2 shadow CIB created
crm(test-2)configure# commit
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Note how the current CIB in the prompt changed from live to test-2 after issuing
  the cib new command. See also the CIB shadow management for more
  information.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>cibstatus</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Enter edit and manage the CIB status section level. See the CIB status
  management section.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>clone</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The clone command creates a resource clone. It may contain a single primitive
  resource or one group of resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
clone &lt;name&gt; &lt;rsc&gt;
  [description=&lt;description&gt;]
  [meta &lt;attr_list&gt;]
  [params &lt;attr_list&gt;]
<div class="Pp"></div>
attr_list :: [$id=&lt;id&gt;] &lt;attr&gt;=&lt;val&gt; [&lt;attr&gt;=&lt;val&gt;...] | $id-ref=&lt;id&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
clone cl_fence apc_1 \
  meta clone-node-max=1 globally-unique=false
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>colocation (collocation)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This constraint expresses the placement relation between two or more resources.
  If there are more than two resources, then the constraint is called a resource
  set.
<div style="height: 1.00em;">&#x00A0;</div>
The score is used to indicate the priority of the constraint. A positive score
  indicates that the resources should run on the same node. A negative score
  that they should not run on the same node. Values of positive or negative
  infinity indicate a mandatory constraint.
<div style="height: 1.00em;">&#x00A0;</div>
In the two resource form, the cluster will place &lt;with-rsc&gt; first, and
  then decide where to put the &lt;rsc&gt; resource.
<div style="height: 1.00em;">&#x00A0;</div>
Collocation resource sets have an extra attribute (sequential) to allow for sets
  of resources which don&#x2019;t depend on each other in terms of state. The
  shell syntax for such sets is to put resources in parentheses.
<div style="height: 1.00em;">&#x00A0;</div>
Sets cannot be nested.
<div style="height: 1.00em;">&#x00A0;</div>
The optional node-attribute can be used to colocate resources on a set of nodes
  and not necessarily on the same node. For example, by setting a node attribute
  color on all nodes and setting the node-attribute value to color as well, the
  colocated resources will be placed on any node that has the same color.
<div style="height: 1.00em;">&#x00A0;</div>
For more details on how to configure resource sets, see Syntax: Resource sets.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
colocation &lt;id&gt; &lt;score&gt;: &lt;rsc&gt;[:&lt;role&gt;] &lt;with-rsc&gt;[:&lt;role&gt;]
  [node-attribute=&lt;node_attr&gt;]
<div class="Pp"></div>
colocation &lt;id&gt; &lt;score&gt;: &lt;resource_sets&gt;
  [node-attribute=&lt;node_attr&gt;]
<div class="Pp"></div>
resource_sets :: &lt;resource_set&gt; [&lt;resource_set&gt; ...]
<div class="Pp"></div>
resource_set :: [&quot;(&quot;|&quot;[&quot;] &lt;rsc&gt;[:&lt;role&gt;] [&lt;rsc&gt;[:&lt;role&gt;] ...] \
                [&lt;attributes&gt;]  [&quot;)&quot;|&quot;]&quot;]
<div class="Pp"></div>
attributes :: [require-all=(true|false)] [sequential=(true|false)]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
colocation never_put_apache_with_dummy -inf: apache dummy
colocation c1 inf: A ( B C )
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>commit</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Commit the current configuration to the CIB in use. As noted elsewhere, commands
  in a configure session don&#x2019;t have immediate effect on the CIB. All
  changes are applied at one point in time, either using commit or when the user
  leaves the configure level. In case the CIB in use changed in the meantime,
  presumably by somebody else, the crm shell will refuse to apply the changes.
<div style="height: 1.00em;">&#x00A0;</div>
If you know that it&#x2019;s fine to still apply them, add force to the command
  line.
<div style="height: 1.00em;">&#x00A0;</div>
To disable CIB patching and apply the changes by replacing the CIB completely,
  add replace to the command line. Note that this can lead to previous changes
  being overwritten if some other process concurrently modifies the CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
commit [force] [replace]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>default-timeouts</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command takes the timeouts from the actions section of the resource agent
  meta-data and sets them for the operations of the primitive.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
default-timeouts &lt;id&gt; [&lt;id&gt;...]
</pre>
</div>
<b>Note on default-timeouts</b>
<div style="height: 1.00em;">&#x00A0;</div>
The use of this command is discouraged in favor of manually determining the best
  timeouts required for the particular configuration. Relying on the resource
  agent to supply appropriate timeouts can cause the resource to fail at the
  worst possible moment.
<div style="height: 1.00em;">&#x00A0;</div>
Appropriate timeouts for resource actions are context-sensitive, and should be
  carefully considered with the whole configuration in mind.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>delete</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Delete one or more objects. If an object to be deleted belongs to a container
  object, such as a group, and it is the only resource in that container, then
  the container is deleted as well. Any related constraints are removed as well.
<div style="height: 1.00em;">&#x00A0;</div>
If the object is a started resource, it will not be deleted unless the --force
  flag is passed to the command, or the force option is set.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
delete [--force] &lt;id&gt; [&lt;id&gt;...]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>edit</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command invokes the editor with the object description. As with the show
  command, the user may choose to edit all objects or a set of objects.
<div style="height: 1.00em;">&#x00A0;</div>
If the user insists, he or she may edit the XML edition of the object. If you do
  that, don&#x2019;t modify any id attributes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
edit [xml] [&lt;id&gt; ...]
edit [xml] changed
</pre>
</div>
<b>Note on renaming element ids</b>
<div style="height: 1.00em;">&#x00A0;</div>
The edit command sometimes cannot properly handle modifying element ids. In
  particular for elements which belong to group or ms resources. Group and ms
  resources themselves also cannot be renamed. Please use the rename command
  instead.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>erase</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The erase clears all configuration. Apart from nodes. To remove nodes, you have
  to specify an additional keyword nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Note that removing nodes from the live cluster may have some
  strange/interesting/unwelcome effects.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
erase [nodes]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>fencing_topology</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
If multiple fencing (stonith) devices are available capable of fencing a node,
  their order may be specified by fencing_topology. The order is specified per
  node.
<div style="height: 1.00em;">&#x00A0;</div>
Stonith resources can be separated by , in which case all of them need to
  succeed. If they fail, the next stonith resource (or set of resources) is
  used. In other words, use comma to separate resources which all need to
  succeed and whitespace for serial order. It is not allowed to use whitespace
  around comma.
<div style="height: 1.00em;">&#x00A0;</div>
If the node is left out, the order is used for all nodes. That should reduce the
  configuration size in some stonith setups.
<div style="height: 1.00em;">&#x00A0;</div>
From Pacemaker version 1.1.14, it is possible to use a node attribute as the
  target in a fencing topology. The syntax for this usage is described below.
<div style="height: 1.00em;">&#x00A0;</div>
From Pacemaker version 1.1.14, it is also possible to use regular expression
  patterns as the target in a fencing topology. The configured fencing sequence
  then applies to all devices matching the pattern.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
fencing_topology &lt;stonith_resources&gt; [&lt;stonith_resources&gt; ...]
fencing_topology &lt;fencing_order&gt; [&lt;fencing_order&gt; ...]
<div class="Pp"></div>
fencing_order :: &lt;target&gt; &lt;stonith_resources&gt; [&lt;stonith_resources&gt; ...]
<div class="Pp"></div>
stonith_resources :: &lt;rsc&gt;[,&lt;rsc&gt;...]
target :: &lt;node&gt;: | attr:&lt;node-attribute&gt;=&lt;value&gt; | pattern:&lt;pattern&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# Only kill the power if poison-pill fails
fencing_topology poison-pill power
<div class="Pp"></div>
# As above for node-a, but a different strategy for node-b
fencing_topology \
    node-a: poison-pill power \
    node-b: ipmi serial
<div class="Pp"></div>
# Fencing anything on rack 1 requires fencing via both APC 1 and 2,
# to defeat the redundancy provided by two separate UPS units.
fencing_topology attr:rack=1 apc01,apc02
<div class="Pp"></div>
# Fencing for all machines named green.* is done using the pear
# fencing device first, while all machines named red.* are fenced
# using the apple fencing device first.
fencing_topology \
    pattern:green.* pear apple \
    pattern:red.* apple pear
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>filter</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command filters the given CIB elements through an external program. The
  program should accept input on stdin and send output to stdout (the standard
  UNIX filter conventions). As with the show command, the user may choose to
  filter all or just a subset of elements.
<div style="height: 1.00em;">&#x00A0;</div>
It is possible to filter the XML representation of objects, but probably not as
  useful as the configuration language. The presentation is somewhat different
  from what would be displayed by the show command---each element is shown on a
  single line, i.e. there are no backslashes and no other embelishments.
<div style="height: 1.00em;">&#x00A0;</div>
Don&#x2019;t forget to put quotes around the filter if it contains spaces.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
filter &lt;prog&gt; [xml] [&lt;id&gt; ...]
filter &lt;prog&gt; [xml] changed
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
filter &quot;sed '/^primitive/s/target-role=[^ ]*//'&quot;
# crm configure filter &quot;sed '/^primitive/s/target-role=[^ ]*//'&quot;
crm configure &lt;&lt;END
  filter &quot;sed '/threshold=\&quot;1\&quot;/s/=\&quot;1\&quot;/=\&quot;0\&quot;/g'&quot;
END
</pre>
</div>
<b>Note on quotation marks</b>
<div style="height: 1.00em;">&#x00A0;</div>
Filter commands which feature a blend of quotation marks can be difficult to get
  right, especially when used directly from bash, since bash does its own
  quotation parsing. In these cases, it can be easier to supply the filter
  command as standard input. See the last example above.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>get-property</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show the value of the given property. If the value is not set, the command will
  print the default value for the property, if known.
<div style="height: 1.00em;">&#x00A0;</div>
If no property name is passed to the command, the list of known cluster
  properties is printed.
<div style="height: 1.00em;">&#x00A0;</div>
If the property is set multiple times, for example using multiple property sets
  with different rule expressions, the output of this command is undefined.
<div style="height: 1.00em;">&#x00A0;</div>
Pass the argument -t or --true to get-property to translate the argument value
  into true or false. If the value is not set, the command will print false.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
get-property [-t|--true] [&lt;name&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
get-property stonith-enabled
get-property -t maintenance-mode
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>graph</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Create a graphviz graphical layout from the current cluster configuration.
<div style="height: 1.00em;">&#x00A0;</div>
Currently, only dot (directed graph) is supported. It is essentially a
  visualization of resource ordering.
<div style="height: 1.00em;">&#x00A0;</div>
The graph may be saved to a file which can be used as source for various
  graphviz tools (by default it is displayed in the user&#x2019;s X11 session).
  Optionally, by specifying the format, one can also produce an image instead.
<div style="height: 1.00em;">&#x00A0;</div>
For more or different graphviz attributes, it is possible to save the default
  set of attributes to an ini file. If this file exists it will always override
  the builtin settings. The exportsettings subcommand also prints the location
  of the ini file.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
graph [&lt;gtype&gt; [&lt;file&gt; [&lt;img_format&gt;]]]
graph exportsettings
<div class="Pp"></div>
gtype :: dot
img_format :: `dot` output format (see the +-T+ option)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
graph dot
graph dot clu1.conf.dot
graph dot clu1.conf.svg svg
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>group</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The group command creates a group of resources. This can be useful when
  resources depend on other resources and require that those resources start in
  order on the same node. A commmon use of resource groups is to ensure that a
  server and a virtual IP are located together, and that the virtual IP is
  started before the server.
<div style="height: 1.00em;">&#x00A0;</div>
Grouped resources are started in the order they appear in the group, and stopped
  in the reverse order. If a resource in the group cannot run anywhere,
  resources following it in the group will not start.
<div style="height: 1.00em;">&#x00A0;</div>
group can be passed the &quot;container&quot; meta attribute, to indicate that
  it is to be used to group VM resources monitored using Nagios. The resource
  referred to by the container attribute must be of type ocf:heartbeat:Xen,
  oxf:heartbeat:VirtualDomain or ocf:heartbeat:lxc.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
group &lt;name&gt; &lt;rsc&gt; [&lt;rsc&gt;...]
  [description=&lt;description&gt;]
  [meta attr_list]
  [params attr_list]
<div class="Pp"></div>
attr_list :: [$id=&lt;id&gt;] &lt;attr&gt;=&lt;val&gt; [&lt;attr&gt;=&lt;val&gt;...] | $id-ref=&lt;id&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
group internal_www disk0 fs0 internal_ip apache \
  meta target_role=stopped
<div class="Pp"></div>
group vm-and-services vm vm-sshd meta container=&quot;vm&quot;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>load</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Load a part of configuration (or all of it) from a local file or a network URL.
  The replace method replaces the current configuration with the one from the
  source. The update method tries to import the contents into the current
  configuration. The push method imports the contents into the current
  configuration and removes any lines that are not present in the given
  configuration. The file may be a CLI file or an XML file.
<div style="height: 1.00em;">&#x00A0;</div>
If the URL is -, the configuration is read from standard input.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
load [xml] &lt;method&gt; URL
<div class="Pp"></div>
method :: replace | update | push
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
load xml update myfirstcib.xml
load xml replace http://storage.big.com/cibs/bigcib.xml
load xml push smallcib.xml
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>location</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
location defines the preference of nodes for the given resource. The location
  constraints consist of one or more rules which specify a score to be awarded
  if the rule matches.
<div style="height: 1.00em;">&#x00A0;</div>
The resource referenced by the location constraint can be one of the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Plain resource reference: location
  loc1 webserver 100: node1</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Resource set in curly brackets:
  location loc1 { virtual-ip webserver } 100: node1</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Tag containing resource ids: location
  loc1 tag1 100: node1</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Resource pattern: location loc1
  /web.*/ 100: node1</div>
<div style="height: 1.00em;">&#x00A0;</div>
The resource-discovery attribute allows probes to be selectively enabled or
  disabled per resource and node.
<div style="height: 1.00em;">&#x00A0;</div>
The syntax for resource sets is described in detail for colocation.
<div style="height: 1.00em;">&#x00A0;</div>
For more details on how to configure resource sets, see Syntax: Resource sets.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
location &lt;id&gt; &lt;rsc&gt; [&lt;attributes&gt;] {&lt;node_pref&gt;|&lt;rules&gt;}
<div class="Pp"></div>
rsc :: /&lt;rsc-pattern&gt;/
        | { resource_sets }
        | &lt;rsc&gt;
<div class="Pp"></div>
attributes :: role=&lt;role&gt; | resource-discovery=always|never|exclusive
<div class="Pp"></div>
node_pref :: &lt;score&gt;: &lt;node&gt;
<div class="Pp"></div>
rules ::
  rule [id_spec] [$role=&lt;role&gt;] &lt;score&gt;: &lt;expression&gt;
  [rule [id_spec] [$role=&lt;role&gt;] &lt;score&gt;: &lt;expression&gt; ...]
<div class="Pp"></div>
id_spec :: $id=&lt;id&gt; | $id-ref=&lt;id&gt;
score :: &lt;number&gt; | &lt;attribute&gt; | [-]inf
expression :: &lt;simple_exp&gt; [&lt;bool_op&gt; &lt;simple_exp&gt; ...]
bool_op :: or | and
simple_exp :: &lt;attribute&gt; [type:]&lt;binary_op&gt; &lt;value&gt;
          | &lt;unary_op&gt; &lt;attribute&gt;
          | date &lt;date_expr&gt;
type :: string | version | number
binary_op :: lt | gt | lte | gte | eq | ne
unary_op :: defined | not_defined
<div class="Pp"></div>
date_expr :: lt &lt;end&gt;
         | gt &lt;start&gt;
         | in start=&lt;start&gt; end=&lt;end&gt;
         | in start=&lt;start&gt; &lt;duration&gt;
         | spec &lt;date_spec&gt;
duration|date_spec ::
         hours=&lt;value&gt;
         | monthdays=&lt;value&gt;
         | weekdays=&lt;value&gt;
         | yearsdays=&lt;value&gt;
         | months=&lt;value&gt;
         | weeks=&lt;value&gt;
         | years=&lt;value&gt;
         | weekyears=&lt;value&gt;
         | moon=&lt;value&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
location conn_1 internal_www 100: node1
<div class="Pp"></div>
location conn_1 internal_www \
  rule 50: #uname eq node1 \
  rule pingd: defined pingd
<div class="Pp"></div>
location conn_2 dummy_float \
  rule -inf: not_defined pingd or pingd number:lte 0
<div class="Pp"></div>
# never probe for rsc1 on node1
location no-probe rsc1 resource-discovery=never -inf: node1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>modgroup</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Add or remove primitives in a group. The add subcommand appends the new group
  member by default. Should it go elsewhere, there are after and before clauses.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
modgroup &lt;id&gt; add &lt;id&gt; [after &lt;id&gt;|before &lt;id&gt;]
modgroup &lt;id&gt; remove &lt;id&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
modgroup share1 add storage2 before share1-fs
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>monitor</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Monitor is by far the most common operation. It is possible to add it without
  editing the whole resource. Also, long primitive definitions may be a bit
  uncluttered. In order to make this command as concise as possible, less common
  operation attributes are not available. If you need them, then use the op part
  of the primitive command.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
monitor &lt;rsc&gt;[:&lt;role&gt;] &lt;interval&gt;[:&lt;timeout&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
monitor apcfence 60m:60s
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Note that after executing the command, the monitor operation may be shown as
  part of the primitive definition.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ms (master)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The ms command creates a master/slave resource type. It may contain a single
  primitive resource or one group of resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ms &lt;name&gt; &lt;rsc&gt;
  [description=&lt;description&gt;]
  [meta attr_list]
  [params attr_list]
<div class="Pp"></div>
attr_list :: [$id=&lt;id&gt;] &lt;attr&gt;=&lt;val&gt; [&lt;attr&gt;=&lt;val&gt;...] | $id-ref=&lt;id&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ms disk1 drbd1 \
  meta notify=true globally-unique=false
</pre>
</div>
<b>Note on id-ref usage</b>
<div style="height: 1.00em;">&#x00A0;</div>
Instance or meta attributes (&#x2018;params` and meta) may contain a reference
  to another set of attributes. In that case, no other attributes are allowed.
  Since attribute sets&#x2019; ids, though they do exist, are not shown in the
  crm, it is also possible to reference an object instead of an attribute set.
  crm will automatically replace such a reference with the right id:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)configure# primitive a2 www-2 meta $id-ref=a1
crm(live)configure# show a2
primitive a2 apache \
    meta $id-ref=a1-meta_attributes
    [...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is advisable to give meaningful names to attribute sets which are going to be
  referenced.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>node</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The node command describes a cluster node. Nodes in the CIB are commonly created
  automatically by the CRM. Hence, you should not need to deal with nodes unless
  you also want to define node attributes. Note that it is also possible to
  manage node attributes at the node level.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node [$id=&lt;id&gt;] &lt;uname&gt;[:&lt;type&gt;]
  [description=&lt;description&gt;]
  [attributes [$id=&lt;id&gt;] [&lt;score&gt;:] [rule...]
    &lt;param&gt;=&lt;value&gt; [&lt;param&gt;=&lt;value&gt;...]] | $id-ref=&lt;ref&gt;
  [utilization [$id=&lt;id&gt;] [&lt;score&gt;:] [rule...]
    &lt;param&gt;=&lt;value&gt; [&lt;param&gt;=&lt;value&gt;...]] | $id-ref=&lt;ref&gt;
<div class="Pp"></div>
type :: normal | member | ping | remote
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node node1
node big_node attributes memory=64
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>op_defaults</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set defaults for the operations meta attributes.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
op_defaults [$id=&lt;set_id&gt;] [rule ...] &lt;option&gt;=&lt;value&gt; [&lt;option&gt;=&lt;value&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
op_defaults record-pending=true
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>order</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This constraint expresses the order of actions on two resources or more
  resources. If there are more than two resources, then the constraint is called
  a resource set.
<div style="height: 1.00em;">&#x00A0;</div>
Ordered resource sets have an extra attribute to allow for sets of resources
  whose actions may run in parallel. The shell syntax for such sets is to put
  resources in parentheses.
<div style="height: 1.00em;">&#x00A0;</div>
If the subsequent resource can start or promote after any one of the resources
  in a set has done, enclose the set in brackets ([ and ]).
<div style="height: 1.00em;">&#x00A0;</div>
Sets cannot be nested.
<div style="height: 1.00em;">&#x00A0;</div>
Three strings are reserved to specify a kind of order constraint: Mandatory,
  Optional, and Serialize. It is preferred to use one of these settings instead
  of score. Previous versions mapped scores 0 and inf to keywords advisory and
  mandatory. That is still valid but deprecated.
<div style="height: 1.00em;">&#x00A0;</div>
For more details on how to configure resource sets, see Syntax: Resource sets.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
order &lt;id&gt; [{kind|&lt;score&gt;}:] first then [symmetrical=&lt;bool&gt;]
<div class="Pp"></div>
order &lt;id&gt; [{kind|&lt;score&gt;}:] resource_sets [symmetrical=&lt;bool&gt;]
<div class="Pp"></div>
kind :: Mandatory | Optional | Serialize
<div class="Pp"></div>
first :: &lt;rsc&gt;[:&lt;action&gt;]
<div class="Pp"></div>
then ::  &lt;rsc&gt;[:&lt;action&gt;]
<div class="Pp"></div>
resource_sets :: resource_set [resource_set ...]
<div class="Pp"></div>
resource_set :: [&quot;[&quot;|&quot;(&quot;] &lt;rsc&gt;[:&lt;action&gt;] [&lt;rsc&gt;[:&lt;action&gt;] ...] \
                [attributes] [&quot;]&quot;|&quot;)&quot;]
<div class="Pp"></div>
attributes :: [require-all=(true|false)] [sequential=(true|false)]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
order o-1 Mandatory: apache:start ip_1
order o-2 Serialize: A ( B C )
order o-3 inf: [ A B ] C
order o-4 first-resource then-resource
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>primitive</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The primitive command describes a resource. It may be referenced only once in
  group, clone, or master-slave objects. If it&#x2019;s not referenced, then it
  is placed as a single resource in the CIB.
<div style="height: 1.00em;">&#x00A0;</div>
Operations may be specified anonymously, as a group or by reference:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&quot;Anonymous&quot;, as a list of op
  specifications. Use this method if you don&#x2019;t need to reference the set
  of operations elsewhere. This is the most common way to define
  operations.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;If reusing operation sets is desired,
  use the operations keyword along with an id to give the operations set a name.
  Use the operations keyword and an id-ref value set to the id of another
  operations set, to apply the same set of operations to this primitive.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Operation attributes which are not recognized are saved as instance attributes
  of that operation. A typical example is OCF_CHECK_LEVEL.
<div style="height: 1.00em;">&#x00A0;</div>
For multistate resources, roles are specified as role=&lt;role&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
A template may be defined for resources which are of the same type and which
  share most of the configuration. See rsc_template for more information.
<div style="height: 1.00em;">&#x00A0;</div>
Attributes containing time values, such as the interval attribute on operations,
  are configured either as a plain number, which is interpreted as a time in
  seconds, or using one of the following suffixes:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;s, sec - time in seconds (same as no
  suffix)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;ms, msec - time in milliseconds</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;us, usec - time in microseconds</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;m, min - time in minutes</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;h, hr - time in hours</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive &lt;rsc&gt; {[&lt;class&gt;:[&lt;provider&gt;:]]&lt;type&gt;|@&lt;template&gt;}
  [description=&lt;description&gt;]
  [[params] attr_list]
  [meta attr_list]
  [utilization attr_list]
  [operations id_spec]
    [op op_type [&lt;attribute&gt;=&lt;value&gt;...] ...]
<div class="Pp"></div>
attr_list :: [$id=&lt;id&gt;] [&lt;score&gt;:] [rule...]
             &lt;attr&gt;=&lt;val&gt; [&lt;attr&gt;=&lt;val&gt;...]] | $id-ref=&lt;id&gt;
id_spec :: $id=&lt;id&gt; | $id-ref=&lt;id&gt;
op_type :: start | stop | monitor
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
primitive apcfence stonith:apcsmart \
  params ttydev=/dev/ttyS0 hostlist=&quot;node1 node2&quot; \
  op start timeout=60s \
  op monitor interval=30m timeout=60s
<div class="Pp"></div>
primitive www8 apache \
  configfile=/etc/apache/www8.conf \
  operations $id-ref=apache_ops
<div class="Pp"></div>
primitive db0 mysql \
  params config=/etc/mysql/db0.conf \
  op monitor interval=60s \
  op monitor interval=300s OCF_CHECK_LEVEL=10
<div class="Pp"></div>
primitive r0 ocf:linbit:drbd \
  params drbd_resource=r0 \
  op monitor role=Master interval=60s \
  op monitor role=Slave interval=300s
<div class="Pp"></div>
primitive xen0 @vm_scheme1 xmfile=/etc/xen/vm/xen0
<div class="Pp"></div>
primitive mySpecialRsc Special \
  params 3: rule #uname eq node1 interface=eth1 \
  params 2: rule #uname eq node2 interface=eth2 port=8888 \
  params 1: interface=eth0 port=9999
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>property</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set cluster configuration properties. To list the available cluster
  configuration properties, use the ra info command with pengine, crmd, cib and
  stonithd as arguments.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
property [&lt;set_id&gt;:] [rule ...] &lt;option&gt;=&lt;value&gt; [&lt;option&gt;=&lt;value&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
property stonith-enabled=true
property rule date spec years=2014 stonith-enabled=false
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ptest (simulate)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show PE (Policy Engine) motions using ptest(8) or crm_simulate(8).
<div style="height: 1.00em;">&#x00A0;</div>
A CIB is constructed using the current user edited configuration and the status
  from the running CIB. The resulting CIB is run through ptest (or crm_simulate)
  to show changes which would happen if the configuration is committed.
<div style="height: 1.00em;">&#x00A0;</div>
The status section may be loaded from another source and modified using the
  cibstatus level commands. In that case, the ptest command will issue a message
  informing the user that the Policy Engine graph is not calculated based on the
  current status section and therefore won&#x2019;t show what would happen to
  the running but some imaginary cluster.
<div style="height: 1.00em;">&#x00A0;</div>
If you have graphviz installed and X11 session, dotty(1) is run to display the
  changes graphically.
<div style="height: 1.00em;">&#x00A0;</div>
Add a string of v characters to increase verbosity. ptest can also show
  allocation scores. utilization turns on information about the remaining
  capacity of nodes. With the actions option, ptest will print all resource
  actions.
<div style="height: 1.00em;">&#x00A0;</div>
The ptest program has been replaced by crm_simulate in newer Pacemaker versions.
  In some installations both could be installed. Use simulate to enfore using
  crm_simulate.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ptest [nograph] [v...] [scores] [actions] [utilization]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ptest scores
ptest vvvvv
simulate actions
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>refresh</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Refresh the internal structures from the CIB. All changes made during this
  session are lost.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
refresh
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>rename</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Rename an object. It is recommended to use this command to rename a resource,
  because it will take care of updating all related constraints and a parent
  resource. Changing ids with the edit command won&#x2019;t have the same
  effect.
<div style="height: 1.00em;">&#x00A0;</div>
If you want to rename a resource, it must be in the stopped state.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rename &lt;old_id&gt; &lt;new_id&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>role</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
An ACL role is a set of rules which describe access rights to CIB. Rules consist
  of an access right read, write, or deny and a specification denoting part of
  the configuration to which the access right applies. The specification can be
  an XPath or a combination of tag and id references. If an attribute is
  appended, then the specification applies only to that attribute of the
  matching element.
<div style="height: 1.00em;">&#x00A0;</div>
There is a number of shortcuts for XPath specifications. The meta, params, and
  utilization shortcuts reference resource meta attributes, parameters, and
  utilization respectively. The location may be used to specify location
  constraints most of the time to allow resource move and unmove commands. The
  property references cluster properties. The node allows reading node
  attributes. nodeattr and nodeutil reference node attributes and node capacity
  (utilization). The status shortcut references the whole status section of the
  CIB. Read access to status is necessary for various monitoring tools such as
  crm_mon(8) (aka crm status).
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
role &lt;role-id&gt; rule [rule ...]
<div class="Pp"></div>
rule :: acl-right cib-spec [attribute:&lt;attribute&gt;]
<div class="Pp"></div>
acl-right :: read | write | deny
<div class="Pp"></div>
cib-spec :: xpath-spec | tag-ref-spec
xpath-spec :: xpath:&lt;xpath&gt; | shortcut
tag-ref-spec :: tag:&lt;tag&gt; | ref:&lt;id&gt; | tag:&lt;tag&gt; ref:&lt;id&gt;
<div class="Pp"></div>
shortcut :: meta:&lt;rsc&gt;[:&lt;attr&gt;]
        params:&lt;rsc&gt;[:&lt;attr&gt;]
        utilization:&lt;rsc&gt;
        location:&lt;rsc&gt;
        property[:&lt;attr&gt;]
        node[:&lt;node&gt;]
        nodeattr[:&lt;attr&gt;]
        nodeutil[:&lt;node&gt;]
        status
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
role app1_admin \
    write meta:app1:target-role \
    write meta:app1:is-managed \
    write location:app1 \
    read ref:app1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>rsc_defaults</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set defaults for the resource meta attributes.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_defaults [&lt;set_id&gt;:] [rule ...] &lt;option&gt;=&lt;value&gt; [&lt;option&gt;=&lt;value&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_defaults failure-timeout=3m
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>rsc_template</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The rsc_template command creates a resource template. It may be referenced in
  primitives. It is used to reduce large configurations with many similar
  resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_template &lt;name&gt; [&lt;class&gt;:[&lt;provider&gt;:]]&lt;type&gt;
  [description=&lt;description&gt;]
  [params attr_list]
  [meta attr_list]
  [utilization attr_list]
  [operations id_spec]
    [op op_type [&lt;attribute&gt;=&lt;value&gt;...] ...]
<div class="Pp"></div>
attr_list :: [$id=&lt;id&gt;] &lt;attr&gt;=&lt;val&gt; [&lt;attr&gt;=&lt;val&gt;...] | $id-ref=&lt;id&gt;
id_spec :: $id=&lt;id&gt; | $id-ref=&lt;id&gt;
op_type :: start | stop | monitor
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_template public_vm Xen \
  op start timeout=300s \
  op stop timeout=300s \
  op monitor interval=30s timeout=60s \
  op migrate_from timeout=600s \
  op migrate_to timeout=600s
primitive xen0 @public_vm \
  params xmfile=/etc/xen/xen0
primitive xen1 @public_vm \
  params xmfile=/etc/xen/xen1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>rsc_ticket</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This constraint expresses dependency of resources on cluster-wide attributes,
  also known as tickets. Tickets are mainly used in geo-clusters, which consist
  of multiple sites. A ticket may be granted to a site, thus allowing resources
  to run there.
<div style="height: 1.00em;">&#x00A0;</div>
The loss-policy attribute specifies what happens to the resource (or resources)
  if the ticket is revoked. The default is either stop or demote depending on
  whether a resource is multi-state.
<div style="height: 1.00em;">&#x00A0;</div>
See also the site set of commands.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_ticket &lt;id&gt; &lt;ticket_id&gt;: &lt;rsc&gt;[:&lt;role&gt;] [&lt;rsc&gt;[:&lt;role&gt;] ...]
  [loss-policy=&lt;loss_policy_action&gt;]
<div class="Pp"></div>
loss_policy_action :: stop | demote | fence | freeze
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsc_ticket ticket-A_public-ip ticket-A: public-ip
rsc_ticket ticket-A_bigdb ticket-A: bigdb loss-policy=fence
rsc_ticket ticket-B_storage ticket-B: drbd-a:Master drbd-b:Master
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>rsctest</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Test resources with current resource configuration. If no nodes are specified,
  tests are run on all known nodes.
<div style="height: 1.00em;">&#x00A0;</div>
The order of resources is significant: it is assumed that later resources depend
  on earlier ones.
<div style="height: 1.00em;">&#x00A0;</div>
If a resource is multi-state, it is assumed that the role on which later
  resources depend is master.
<div style="height: 1.00em;">&#x00A0;</div>
Tests are run sequentially to prevent running the same resource on two or more
  nodes. Tests are carried out only if none of the specified nodes currently run
  any of the specified resources. However, it won&#x2019;t verify whether
  resources run on the other nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Superuser privileges are obviously required: either run this as root or setup
  the sudoers file appropriately.
<div style="height: 1.00em;">&#x00A0;</div>
Note that resource testing may take some time.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsctest &lt;rsc_id&gt; [&lt;rsc_id&gt; ...] [&lt;node_id&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
rsctest my_ip websvc
rsctest websvc nodeB
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>save</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Save the current configuration to a file. Optionally, as XML. Use - instead of
  file name to write the output to stdout.
<div style="height: 1.00em;">&#x00A0;</div>
The save command accepts the same selection arguments as the show command. See
  the help section for show for more details.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
save [xml] [&lt;id&gt; | type:&lt;type | tag:&lt;tag&gt; |
            related:&lt;obj&gt; | changed ...] &lt;file&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
save myfirstcib.txt
save web-server server-config.txt
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>schema</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
CIB&#x2019;s content is validated by a RNG schema. Pacemaker supports several,
  depending on version. At least the following schemas are accepted by crmsh:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;pacemaker-1.0</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;pacemaker-1.1</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;pacemaker-1.2</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;pacemaker-1.3</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;pacemaker-2.0</div>
<div style="height: 1.00em;">&#x00A0;</div>
Use this command to display or switch to another RNG schema.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
schema [&lt;schema&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
schema pacemaker-1.1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>set</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set the value of a configured attribute. The attribute must have a value
  configured previously, and can be an agent parameter, meta attribute or
  utilization value.
<div style="height: 1.00em;">&#x00A0;</div>
The first argument to the command is a path to an attribute. This is a
  dot-separated sequence beginning with the name of the resource, and ending
  with the name of the attribute to set.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
set &lt;path&gt; &lt;value&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
set vip1.ip 192.168.20.5
set vm-a.force_stop 1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The show command displays CIB objects. Without any argument, it displays all
  objects in the CIB, but the set of objects displayed by show can be limited to
  only objects with the given IDs or by using one or more of the special
  prefixes described below.
<div style="height: 1.00em;">&#x00A0;</div>
The XML representation for the objects can be displayed by passing xml as the
  first argument.
<div style="height: 1.00em;">&#x00A0;</div>
To show one or more specific objects, pass the object IDs as arguments.
<div style="height: 1.00em;">&#x00A0;</div>
To show all objects of a certain type, use the type: prefix.
<div style="height: 1.00em;">&#x00A0;</div>
To show all objects in a tag, use the tag: prefix.
<div style="height: 1.00em;">&#x00A0;</div>
To show all constraints related to a primitive, use the related: prefix.
<div style="height: 1.00em;">&#x00A0;</div>
To show all modified objects, pass the argument changed.
<div style="height: 1.00em;">&#x00A0;</div>
The prefixes can be used together on a single command line. For example, to show
  both the tag itself and the objects tagged by it the following combination can
  be used: show tag:my-tag my-tag.
<div style="height: 1.00em;">&#x00A0;</div>
To refine a selection of objects using multiple modifiers, the keywords and and
  or can be used. For example, to select all primitives tagged foo, the
  following combination can be used: show type:primitive and tag:foo.
<div style="height: 1.00em;">&#x00A0;</div>
To hide values when displaying the configuration, use the obscure:&lt;glob&gt;
  argument. This can be useful when sending the configuration over a public
  channel, to avoid exposing potentially sensitive information. The &lt;glob&gt;
  argument is a bash-style pattern matching attribute keys.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show [xml] [&lt;id&gt;
           | changed
           | type:&lt;type&gt;
           | tag:&lt;id&gt;
           | related:&lt;obj&gt;
           | obscure:&lt;glob&gt;
           ...]
<div class="Pp"></div>
type :: node | primitive | group | clone | ms | rsc_template
      | location | colocation | order
      | rsc_ticket
      | property | rsc_defaults | op_defaults
      | fencing_topology
      | role | user | acl_target
      | tag
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show webapp
show type:primitive
show xml tag:db tag:fs
show related:webapp
show type:primitive obscure:passwd
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>tag</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Define a resource tag. A tag is an id referring to one or more resources,
  without implying any constraints between the tagged resources. This can be
  useful for grouping conceptually related resources.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
tag &lt;tag-name&gt;: &lt;rsc&gt; [&lt;rsc&gt; ...]
tag &lt;tag-name&gt; &lt;rsc&gt; [&lt;rsc&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
tag web: p-webserver p-vip
tag ips server-vip admin-vip
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>template</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The specified template is loaded into the editor. It&#x2019;s up to the user to
  make a good CRM configuration out of it. See also the template section.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
template [xml] url
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
template two-apaches.txt
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>upgrade</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Attempts to upgrade the CIB to validate with the current version. Commonly, this
  is required if the error CIB not supported occurs. It typically means that the
  active CIB version is coming from an older release.
<div style="height: 1.00em;">&#x00A0;</div>
As a safety precaution, the force argument is required if the validation-with
  attribute is set to anything other than 0.6. Thus in most cases, it is
  required.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
upgrade [force]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
upgrade force
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>user</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Users which normally cannot view or manage cluster configuration can be allowed
  access to parts of the CIB. The access is defined by a set of read, write, and
  deny rules as in role definitions or by referencing roles. The latter is
  considered best practice.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on rule expressions, see Syntax: Rule expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
user &lt;uid&gt; {roles|rules}
<div class="Pp"></div>
roles :: role:&lt;role-ref&gt; [role:&lt;role-ref&gt; ...]
rules :: rule [rule ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
user joe \
    role:app1_admin \
    role:read_all
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>validate-all</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Call the validate-all action for the resource, if possible.
<div style="height: 1.00em;">&#x00A0;</div>
Limitations:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The resource agent must implement the
  validate-all action.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The current user must be root.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The primitive resource must not use
  nvpair references.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
validate-all &lt;rsc&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>verify</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Verify the contents of the CIB which would be committed.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
verify
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>xml</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Even though we promissed no xml, it may happen, but hopefully very very seldom,
  that an element from the CIB cannot be rendered in the configuration language.
  In that case, the element will be shown as raw xml, prefixed by this command.
  That element can then be edited like any other. If the shell finds out that
  after the change it can digest it, then it is going to be converted into the
  normal configuration language. Otherwise, there is no need to use xml for
  configuration.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
xml &lt;xml&gt;
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="template_-_Import_configuration_from_templates"><a class="selflink" href="#template_-_Import_configuration_from_templates">template
  - Import configuration from templates</a></h2>
User may be assisted in the cluster configuration by templates prepared in
  advance. Templates consist of a typical ready configuration which may be
  edited to suit particular user needs.
<div style="height: 1.00em;">&#x00A0;</div>
This command enters a template level where additional commands for
  configuration/template management are available.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>apply</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Copy the current or given configuration to the current CIB. By default, the CIB
  is replaced, unless the method is set to &quot;update&quot;.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
apply [&lt;method&gt;] [&lt;config&gt;]
<div class="Pp"></div>
method :: replace | update
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>delete</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Remove a configuration. The loaded (active) configuration may be removed by
  force.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
delete &lt;config&gt; [force]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>edit</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Edit current or given configuration using your favourite editor.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
edit [&lt;config&gt;]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>list</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
When called with no argument, lists existing templates and configurations.
<div style="height: 1.00em;">&#x00A0;</div>
Given the argument templates, lists the available templates.
<div style="height: 1.00em;">&#x00A0;</div>
Given the argument configs, lists the available configurations.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
list [templates|configs]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>load</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Load an existing configuration. Further edit, show, and apply commands will
  refer to this configuration.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
load &lt;config&gt;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>new</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Create a new configuration from one or more templates. Note that configurations
  and templates are kept in different places, so it is possible to have a
  configuration name equal a template name.
<div style="height: 1.00em;">&#x00A0;</div>
If you already know which parameters are required, you can set them directly on
  the command line.
<div style="height: 1.00em;">&#x00A0;</div>
The parameter name id is set by default to the name of the configuration.
<div style="height: 1.00em;">&#x00A0;</div>
If no parameters are being set and you don&#x2019;t want a particular name for
  your configuration, you can call this command with a template name as the only
  parameter. A unique configuration name based on the template name will be
  generated.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
new [&lt;config&gt;] &lt;template&gt; [&lt;template&gt; ...] [params name=value ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
new vip virtual-ip
new bigfs ocfs2 params device=/dev/sdx8 directory=/bigfs
new apache
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Process the current or given configuration and display the result.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show [&lt;config&gt;]
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="cibstatus_-_CIB_status_management_and_editing"><a class="selflink" href="#cibstatus_-_CIB_status_management_and_editing">cibstatus
  - CIB status management and editing</a></h2>
The status section of the CIB keeps the current status of nodes and resources.
  It is modified <i>only</i> on events, i.e. when some resource operation is run
  or node status changes. For obvious reasons, the CRM has no user interface
  with which it is possible to affect the status section. From the user&#x2019;s
  point of view, the status section is essentially a read-only part of the CIB.
  The current status is never even written to disk, though it is available in
  the PE (Policy Engine) input files which represent the history of cluster
  motions. The current status may be read using the cibadmin -Q command.
<div style="height: 1.00em;">&#x00A0;</div>
It may sometimes be of interest to see how status changes would affect the
  Policy Engine. The set of &#x2018;cibstatus` level commands allow the user to
  load status sections from various sources and then insert or modify resource
  operations or change nodes&#x2019; state.
<div style="height: 1.00em;">&#x00A0;</div>
The effect of those changes may then be observed by running the ptest command at
  the configure level or simulate and run commands at this level. The ptest runs
  with the user edited CIB whereas the latter two commands run with the CIB
  which was loaded along with the status section.
<div style="height: 1.00em;">&#x00A0;</div>
The simulate and run commands as well as all status modification commands are
  implemented using crm_simulate(8).
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>load</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Load a status section from a file, a shadow CIB, or the running cluster. By
  default, the current (live) status section is modified. Note that if the live
  status section is modified it is not going to be updated if the cluster status
  changes, because that would overwrite the user changes. To make crm drop
  changes and resume use of the running cluster status, run load live.
<div style="height: 1.00em;">&#x00A0;</div>
All CIB shadow configurations contain the status section which is a snapshot of
  the status section taken at the time the shadow was created. Obviously, this
  status section doesn&#x2019;t have much to do with the running cluster status,
  unless the shadow CIB has just been created. Therefore, the ptest command by
  default uses the running cluster status section.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
load {&lt;file&gt;|shadow:&lt;cib&gt;|live}
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
load bug-12299.xml
load shadow:test1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>node</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Change the node status. It is possible to throw a node out of the cluster, make
  it a member, or set its state to unclean.
<div class="Pp"></div>
online
<div style="margin-left: 4.00ex;">Set the node_state crmd attribute to online
  and the expected and join attributes to member. The effect is that the node
  becomes a cluster member.</div>
<div class="Pp"></div>
offline
<div style="margin-left: 4.00ex;">Set the node_state crmd attribute to offline
  and the expected attribute to empty. This makes the node cleanly removed from
  the cluster.</div>
<div class="Pp"></div>
unclean
<div style="margin-left: 4.00ex;">Set the node_state crmd attribute to offline
  and the expected attribute to member. In this case the node has unexpectedly
  disappeared.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node &lt;node&gt; {online|offline|unclean}
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node xen-b unclean
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>op</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Edit the outcome of a resource operation. This way you can tell CRM that it ran
  an operation and that the resource agent returned certain exit code. It is
  also possible to change the operation&#x2019;s status. In case the operation
  status is set to something other than done, the exit code is effectively
  ignored.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
op &lt;operation&gt; &lt;resource&gt; &lt;exit_code&gt; [&lt;op_status&gt;] [&lt;node&gt;]
<div class="Pp"></div>
operation :: probe | monitor[:&lt;n&gt;] | start | stop |
   promote | demote | notify | migrate_to | migrate_from
exit_code :: &lt;rc&gt; | success | generic | args |
   unimplemented | perm | installed | configured | not_running |
   master | failed_master
op_status :: pending | done | cancelled | timeout | notsupported | error
<div class="Pp"></div>
n :: the monitor interval in seconds; if omitted, the first
   recurring operation is referenced
rc :: numeric exit code in range 0..9
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
op start d1 xen-b generic
op start d1 xen-b 1
op monitor d1 xen-b not_running
op stop d1 xen-b 0 timeout
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>origin</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show the origin of the status section currently in use. This essentially shows
  the latest load argument.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
origin
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>quorum</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Set the quorum value.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
quorum &lt;bool&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
quorum false
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>run</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Run the policy engine with the edited status section.
<div style="height: 1.00em;">&#x00A0;</div>
Add a string of v characters to increase verbosity. Specify scores to see
  allocation scores also. utilization turns on information about the remaining
  capacity of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
If you have graphviz installed and X11 session, dotty(1) is run to display the
  changes graphically.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run [nograph] [v...] [scores] [utilization]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
run
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>save</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The current internal status section with whatever modifications were performed
  can be saved to a file or shadow CIB.
<div style="height: 1.00em;">&#x00A0;</div>
If the file exists and contains a complete CIB, only the status section is going
  to be replaced and the rest of the CIB will remain intact. Otherwise, the
  current user edited configuration is saved along with the status section.
<div style="height: 1.00em;">&#x00A0;</div>
Note that all modifications are saved in the source file as soon as they are
  run.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
save [&lt;file&gt;|shadow:&lt;cib&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
save bug-12299.xml
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show the current status section in the XML format. Brace yourself for some
  unreadable output. Add changed option to get a human readable output of all
  changes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show [changed]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>simulate</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Run the policy engine with the edited status section and simulate the
  transition.
<div style="height: 1.00em;">&#x00A0;</div>
Add a string of v characters to increase verbosity. Specify scores to see
  allocation scores also. utilization turns on information about the remaining
  capacity of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
If you have graphviz installed and X11 session, dotty(1) is run to display the
  changes graphically.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
simulate [nograph] [v...] [scores] [utilization]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
simulate
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>ticket</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Modify the ticket status. Tickets can be granted and revoked. Granted tickets
  could be activated or put in standby.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ticket &lt;ticket&gt; {grant|revoke|activate|standby}
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ticket ticketA grant
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="assist_-_Configuration_assistant"><a class="selflink" href="#assist_-_Configuration_assistant">assist
  - Configuration assistant</a></h2>
The assist sublevel is a collection of helper commands that create or modify
  resources and constraints, to simplify the creation of certain configurations.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on individual commands, see the help text for those
  commands.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>template</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command takes a list of primitives as argument, and creates a new
  rsc_template for these primitives. It can only do this if the primitives do
  not already share a template and are of the same type.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
template primitive-1 primitive-2 primitive-3
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>weak-bond</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
A colocation between a group of resources says that the resources should be
  located together, but it also means that those resources are dependent on each
  other. If one of the resources fails, the others will be restarted.
<div style="height: 1.00em;">&#x00A0;</div>
If this is not desired, it is possible to circumvent: By placing the resources
  in a non-sequential set and colocating the set with a dummy resource which is
  not monitored, the resources will be placed together but will have no further
  dependency on each other.
<div style="height: 1.00em;">&#x00A0;</div>
This command creates both the constraint and the dummy resource needed for such
  a colocation.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
weak-bond resource-1 resource-2
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="maintenance_-_Maintenance_mode_commands"><a class="selflink" href="#maintenance_-_Maintenance_mode_commands">maintenance
  - Maintenance mode commands</a></h2>
Maintenance mode commands are commands that manipulate resources directly
  without going through the cluster infrastructure. Therefore, it is essential
  to ensure that the cluster does not attempt to monitor or manipulate the
  resources while these commands are being executed.
<div style="height: 1.00em;">&#x00A0;</div>
To ensure this, these commands require that maintenance mode is set either for
  the particular resource, or for the whole cluster.
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>action</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Invokes the given action for the resource. This is done directly via the
  resource agent, so the command must be issued while the cluster or the
  resource is in maintenance mode.
<div style="height: 1.00em;">&#x00A0;</div>
Unless the action is start or monitor, the action must be invoked on the same
  node as where the resource is running. If the resource is running on multiple
  nodes, the command will fail.
<div style="height: 1.00em;">&#x00A0;</div>
To use SSH for executing resource actions on multiple nodes, append ssh after
  the action name. This requires SSH access to be configured between the nodes
  and the parallax python package to be installed.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
action &lt;rsc&gt; &lt;action&gt;
action &lt;rsc&gt; &lt;action&gt; ssh
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
action webserver reload
action webserver monitor ssh
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>off</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Disables maintenances mode, either for the whole cluster or for the given
  resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
off
off &lt;rsc&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
off rsc1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>on</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Enables maintenances mode, either for the whole cluster or for the given
  resource.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
on
on &lt;rsc&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
on rsc1
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="history_-_Cluster_history"><a class="selflink" href="#history_-_Cluster_history">history
  - Cluster history</a></h2>
Examining Pacemaker&#x2019;s history is a particularly involved task. The number
  of subsystems to be considered, the complexity of the configuration, and the
  set of various information sources, most of which are not exactly human
  readable, keep analyzing resource or node problems accessible to only the most
  knowledgeable. Or, depending on the point of view, to the most persistent. The
  following set of commands has been devised in hope to make cluster history
  more accessible.
<div style="height: 1.00em;">&#x00A0;</div>
Of course, looking at <i>all</i> history could be time consuming regardless of
  how good the tools at hand are. Therefore, one should first say which period
  he or she wants to analyze. If not otherwise specified, the last hour is
  considered. Logs and other relevant information is collected using crm report.
  Since this process takes some time and we always need fresh logs, information
  is refreshed in a much faster way using the python parallax module. If
  python-parallax is not found on the system, examining a live cluster is still
  possible &#x2014; though not as comfortable.
<div style="height: 1.00em;">&#x00A0;</div>
Apart from examining a live cluster, events may be retrieved from a report
  generated by crm report (see also the -H option). In that case we assume that
  the period stretching the whole report needs to be investigated. Of course, it
  is still possible to further reduce the time range.
<div style="height: 1.00em;">&#x00A0;</div>
If you have discovered an issue that you want to show someone else, you can use
  the session pack command to save the current session as a tarball, similar to
  those generated by crm report.
<div style="height: 1.00em;">&#x00A0;</div>
In order to minimize the size of the tarball, and to make it easier for others
  to find the interesting events, it is recommended to limit the time frame
  which the saved session covers. This can be done using the timeframe command
  (example below).
<div style="height: 1.00em;">&#x00A0;</div>
It is also possible to name the saved session using the session save command.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crm(live)history# limit &quot;Jul 18 12:00&quot; &quot;Jul 18 12:30&quot;
crm(live)history# session save strange_restart
crm(live)history# session pack
Report saved in .../strange_restart.tar.bz2
crm(live)history#
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>detail</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
How much detail to show from the logs. Valid detail levels are either 0 or 1,
  where 1 is the highest detail level. The default detail level is 0.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
detail &lt;detail_level&gt;
<div class="Pp"></div>
detail_level :: small integer (defaults to 0)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
detail 1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>diff</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
A transition represents a change in cluster configuration or state. Use diff to
  see what has changed between two transitions.
<div style="height: 1.00em;">&#x00A0;</div>
If you want to specify the current cluster configuration and status, use the
  string live.
<div style="height: 1.00em;">&#x00A0;</div>
Normally, the first transition specified should be the one which is older, but
  we are not going to enforce that.
<div style="height: 1.00em;">&#x00A0;</div>
Note that a single configuration update may result in more than one transition.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff &lt;pe&gt; &lt;pe&gt; [status] [html]
<div class="Pp"></div>
pe :: &lt;number&gt;|&lt;index&gt;|&lt;file&gt;|live
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
diff 2066 2067
diff pe-input-2080.bz2 live status
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>events</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
By analysing the log output and looking for particular patterns, the events
  command helps sifting through the logs to find when particular events like
  resources changing state or node failure may have occurred.
<div style="height: 1.00em;">&#x00A0;</div>
This can be used to generate a combined list of events from all nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
events
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
events
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>exclude</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
If a log is infested with irrelevant messages, those messages may be excluded by
  specifying a regular expression. The regular expressions used are Python
  extended. This command is additive. To drop all regular expressions, use
  exclude clear. Run exclude only to see the current list of regular
  expressions. Excludes are saved along with the history sessions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
exclude [&lt;regex&gt;|clear]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
exclude kernel.*ocfs2
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>graph</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Create a graphviz graphical layout from the PE file (the transition). Every
  transition contains the cluster configuration which was active at the time.
  See also generate a directed graph from configuration.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
graph &lt;pe&gt; [&lt;gtype&gt; [&lt;file&gt; [&lt;img_format&gt;]]]
<div class="Pp"></div>
gtype :: dot
img_format :: `dot` output format (see the +-T+ option)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
graph -1
graph 322 dot clu1.conf.dot
graph 322 dot clu1.conf.svg svg
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>info</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The info command provides a summary of the information source, which can be
  either a live cluster snapshot or a previously generated report.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
info
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
info
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>latest</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
The latest command shows a bit of recent history, more precisely whatever
  happened since the last cluster change (the latest transition). If the
  transition is running, the shell will first wait until it finishes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
latest
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
latest
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>limit (timeframe)</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command can be used to modify the time span to examine. All history
  commands look at events within a certain time span.
<div style="height: 1.00em;">&#x00A0;</div>
For the live source, the default time span is the <i>last hour</i>.
<div style="height: 1.00em;">&#x00A0;</div>
There is no time span limit for the hb_report source.
<div style="height: 1.00em;">&#x00A0;</div>
The time period is parsed by the dateutil python module. It covers a wide range
  of date formats. For instance:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;3:00 (today at 3am)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;15:00 (today at 3pm)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;2010/9/1 2pm (September 1st 2010 at
  2pm)</div>
<div style="height: 1.00em;">&#x00A0;</div>
For more examples of valid time/date statements, please refer to the
  python-dateutil documentation:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;dateutil.readthedocs.org</div>
<div style="height: 1.00em;">&#x00A0;</div>
If the dateutil module is not available, then the time is parsed using strptime
  and only the kind as printed by date(1) is allowed:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Tue Sep 15 20:46:27 CEST 2010</div>
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
limit [&lt;from_time&gt;] [&lt;to_time&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
limit 10:15
limit 15h22m 16h
limit &quot;Sun 5 20:46&quot; &quot;Sun 5 22:00&quot;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>log</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show messages logged on one or more nodes. Leaving out a node name produces
  combined logs of all nodes. Messages are sorted by time and, if the terminal
  emulations supports it, displayed in different colours depending on the node
  to allow for easier reading.
<div style="height: 1.00em;">&#x00A0;</div>
The sorting key is the timestamp as written by syslog which normally has the
  maximum resolution of one second. Obviously, messages generated by events
  which share the same timestamp may not be sorted in the same way as they
  happened. Such close events may actually happen fairly often.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
log [&lt;node&gt; [&lt;node&gt; ...] ]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
log node-a
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>node</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show important events that happened on a node. Important events are node lost
  and join, standby and online, and fence. Use either node names or extended
  regular expressions.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node &lt;node&gt; [&lt;node&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
node node1
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>peinputs</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Every event in the cluster results in generating one or more Policy Engine (PE)
  files. These files describe future motions of resources. The files are listed
  as full paths in the current report directory. Add v to also see the creation
  time stamps.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
peinputs [{&lt;range&gt;|&lt;number&gt;} ...] [v]
<div class="Pp"></div>
range :: &lt;n1&gt;:&lt;n2&gt;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
peinputs
peinputs 440:444 446
peinputs v
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>refresh</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command makes sense only for the live source and makes crm collect the
  latest logs and other relevant information from the logs. If you want to make
  a completely new report, specify force.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
refresh [force]
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>resource</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Show actions and any failures that happened on all specified resources on all
  nodes. Normally, one gives resource names as arguments, but it is also
  possible to use extended regular expressions. Note that neither groups nor
  clones or master/slave names are ever logged. The resource command is going to
  expand all of these appropriately, so that clone instances or resources which
  are part of a group are shown.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
resource &lt;rsc&gt; [&lt;rsc&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
resource bigdb public_ip
resource my_.*_db2
resource ping_clone
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>session</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Sometimes you may want to get back to examining a particular history period or
  bug report. In order to make that easier, the current settings can be saved
  and later retrieved.
<div style="height: 1.00em;">&#x00A0;</div>
If the current history being examined is coming from a live cluster the logs, PE
  inputs, and other files are saved too, because they may disappear from nodes.
  For the existing reports coming from hb_report, only the directory location is
  saved (not to waste space).
<div style="height: 1.00em;">&#x00A0;</div>
A history session may also be packed into a tarball which can then be sent to
  support.
<div style="height: 1.00em;">&#x00A0;</div>
Leave out subcommand to see the current session.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
session [{save|load|delete} &lt;name&gt; | pack [&lt;name&gt;] | update | list]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
session save bnc966622
session load rsclost-2
session list
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>setnodes</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
In case the host this program runs on is not part of the cluster, it is
  necessary to set the list of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
setnodes node &lt;node&gt; [&lt;node&gt; ...]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
setnodes node_a node_b
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>show</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Every transition is saved as a PE file. Use this command to render that PE file
  either as configuration or status. The configuration output is the same as crm
  configure show.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show &lt;pe&gt; [status]
<div class="Pp"></div>
pe :: &lt;number&gt;|&lt;index&gt;|&lt;file&gt;|live
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
show 2066
show pe-input-2080.bz2 status
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>source</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Events to be examined can come from the current cluster or from a hb_report
  report. This command sets the source. source live sets source to the running
  cluster and system logs. If no source is specified, the current source
  information is printed.
<div style="height: 1.00em;">&#x00A0;</div>
In case a report source is specified as a file reference, the file is going to
  be unpacked in place where it resides. This directory is not removed on exit.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
source [&lt;dir&gt;|&lt;file&gt;|live]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
source live
source /tmp/customer_case_22.tar.bz2
source /tmp/customer_case_22
source
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>transition</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This command will print actions planned by the PE and run graphviz (dotty) to
  display a graphical representation of the transition. Of course, for the
  latter an X11 session is required. This command invokes ptest(8) in
  background.
<div style="height: 1.00em;">&#x00A0;</div>
The showdot subcommand runs graphviz (dotty) to display a graphical
  representation of the .dot file which has been included in the report.
  Essentially, it shows the calculation produced by pengine which is installed
  on the node where the report was produced. In optimal case this output should
  not differ from the one produced by the locally installed pengine.
<div style="height: 1.00em;">&#x00A0;</div>
The log subcommand shows the full log for the duration of the transition.
<div style="height: 1.00em;">&#x00A0;</div>
A transition can also be saved to a CIB shadow for further analysis or use with
  cib or configure commands (use the save subcommand). The shadow file name
  defaults to the name of the PE input file.
<div style="height: 1.00em;">&#x00A0;</div>
If the PE input file number is not provided, it defaults to the last one, i.e.
  the last transition. The last transition can also be referenced with number 0.
  If the number is negative, then the corresponding transition relative to the
  last one is chosen.
<div style="height: 1.00em;">&#x00A0;</div>
If there are warning and error PE input files or different nodes were the DC in
  the observed timeframe, it may happen that PE input file numbers collide. In
  that case provide some unique part of the path to the file.
<div style="height: 1.00em;">&#x00A0;</div>
After the ptest output, logs about events that happened during the transition
  are printed.
<div style="height: 1.00em;">&#x00A0;</div>
The tags subcommand scans the logs for the transition and return a list of key
  events during that transition. For example, the tag error will be returned if
  there are any errors logged during the transition.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
transition [&lt;number&gt;|&lt;index&gt;|&lt;file&gt;] [nograph] [v...] [scores] [actions] [utilization]
transition showdot [&lt;number&gt;|&lt;index&gt;|&lt;file&gt;]
transition log [&lt;number&gt;|&lt;index&gt;|&lt;file&gt;]
transition save [&lt;number&gt;|&lt;index&gt;|&lt;file&gt; [name]]
transition tags [&lt;number&gt;|&lt;index&gt;|&lt;file&gt;]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
transition
transition 444
transition -1
transition pe-error-3.bz2
transition node-a/pengine/pe-input-2.bz2
transition showdot 444
transition log
transition save 0 enigma-22
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>transitions</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
A transition represents a change in cluster configuration or state. This command
  lists the transitions in the current timeframe.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
transitions
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
transitions
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>wdiff</b>
<div>&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
A transition represents a change in cluster configuration or state. Use wdiff to
  see what has changed between two transitions as word differences on a
  line-by-line basis.
<div style="height: 1.00em;">&#x00A0;</div>
If you want to specify the current cluster configuration and status, use the
  string live.
<div style="height: 1.00em;">&#x00A0;</div>
Normally, the first transition specified should be the one which is older, but
  we are not going to enforce that.
<div style="height: 1.00em;">&#x00A0;</div>
Note that a single configuration update may result in more than one transition.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
wdiff &lt;pe&gt; &lt;pe&gt; [status]
<div class="Pp"></div>
pe :: &lt;number&gt;|&lt;index&gt;|&lt;file&gt;|live
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
wdiff 2066 2067
wdiff pe-input-2080.bz2 live status
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="report"><a class="selflink" href="#report">report</a></h2>
Interface to a tool for creating a cluster report. A report is an archive
  containing log files, configuration files, system information and other
  relevant data for a given time period. This is a useful tool for collecting
  data to attach to bug reports, or for detecting the root cause of errors
  resulting in resource failover, for example.
<div style="height: 1.00em;">&#x00A0;</div>
See crmsh_hb_report(8) for more details on arguments, or call crm report -h
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
report -f {time|&quot;cts:&quot;testnum} [-t time] [-u user] [-l file]
       [-n nodes] [-E files] [-p patt] [-L patt] [-e prog]
       [-MSDZAVsvhd] [dest]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
report -f 2pm report_1
report -f &quot;2007/9/5 12:30&quot; -t &quot;2007/9/5 14:00&quot; report_2
report -f 1:00 -t 3:00 -l /var/log/cluster/ha-debug report_3
report -f &quot;09sep07 2:00&quot; -u hbadmin report_4
report -f 18:00 -p &quot;usern.*&quot; -p &quot;admin.*&quot; report_5
report -f cts:133 ctstest_133
</pre>
</div>
<h2 class="Ss" title="Ss" id="end_(cd,_up)"><a class="selflink" href="#end_(cd,_up)">end
  (cd, up)</a></h2>
The end command ends the current level and the user moves to the parent level.
  This command is available everywhere.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
end
</pre>
</div>
<h2 class="Ss" title="Ss" id="help"><a class="selflink" href="#help">help</a></h2>
The help command prints help for the current level or for the specified topic
  (command). This command is available everywhere.
<div style="height: 1.00em;">&#x00A0;</div>
Usage:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
help [&lt;topic&gt;]
</pre>
</div>
<h2 class="Ss" title="Ss" id="quit_(exit,_bye)"><a class="selflink" href="#quit_(exit,_bye)">quit
  (exit, bye)</a></h2>
Leave the program.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Even though all sensible configurations (and most of those that are not) are
  going to be supported by the crm shell, I suspect that it may still happen
  that certain XML constructs may confuse the tool. When that happens, please
  file a bug report.
<div style="height: 1.00em;">&#x00A0;</div>
The crm shell will not try to update the objects it does not understand. Of
  course, it is always possible to edit such objects in the XML format.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Dejan Muhamedagic, &lt;dejan@suse.de&gt; Kristoffer Gronlund
  &lt;kgronlund@suse.com&gt; and many OTHERS
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
crm_resource(8), crm_attribute(8), crm_mon(8), cib_shadow(8), ptest(8),
  dotty(1), crm_simulate(8), cibadmin(8)
<h1 class="Sh" title="Sh" id="COPYING"><a class="selflink" href="#COPYING">COPYING</a></h1>
Copyright (C) 2008-2013 Dejan Muhamedagic. Copyright (C) 2013 Kristoffer
  Gronlund.
<div style="height: 1.00em;">&#x00A0;</div>
Free use of this software is granted under the terms of the GNU General Public
  License (GPL).</div>
<table class="foot">
  <tr>
    <td class="foot-date">11/03/2016</td>
    <td class="foot-os">crm 2.3.2</td>
  </tr>
</table>
</body>
</html>
