<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VFS_FILEID(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VFS_FILEID(8)</td>
    <td class="head-vol">System Administration tools</td>
    <td class="head-rtitle">VFS_FILEID(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
vfs_fileid - Generates file_id structs with unique device id values for cluster
  setups
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 1.00ex; text-indent: -1.00ex;">vfs objects =
  fileid</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This VFS module is part of the <b>samba</b>(7) suite.
<div class="Pp"></div>
Samba uses file_id structs to uniquely identify files for locking purpose. By
  default the file_id contains the device and inode number returned by the
  stat() system call. As the file_id is a unique identifier of a file, it must
  be the same on all nodes in a cluster setup. This module overloads the
  SMB_VFS_FILE_ID_CREATE() operation and generates the device number based on
  the configured algorithm (see the &quot;fileid:algorithm&quot; option).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
fileid:algorithm = ALGORITHM
<div style="margin-left: 4.00ex;">Available algorithms are fsname and fsid. The
  default value is fsname.
<div style="height: 1.00em;">&#x00A0;</div>
The fsname algorithm generates device id by hashing the kernel device name.
<div style="height: 1.00em;">&#x00A0;</div>
The fsid algorithm generates the device id from the f_fsid returned from the
  statfs() syscall.</div>
<div class="Pp"></div>
fileid:mapping = ALGORITHM
<div style="margin-left: 4.00ex;">This option is the legacy version of the
  fileid:algorithm option, which was used in earlier versions of fileid mapping
  feature in custom Samba 3.0 versions.</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Usage of the fileid module with the fsid algorithm:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
         <i>[global]</i>
	 <b>vfs objects = fileid</b>
	 <b>fileid:algorithm = fsid</b>
</pre>
</div>
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
This man page is correct for version 3.2 of the Samba suite.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original Samba software and related utilities were created by Andrew
  Tridgell. Samba is now developed by the Samba Team as an Open Source project
  similar to the way the Linux kernel is developed.</div>
<table class="foot">
  <tr>
    <td class="foot-date">05/25/2017</td>
    <td class="foot-os">Samba 4.4</td>
  </tr>
</table>
</body>
</html>
