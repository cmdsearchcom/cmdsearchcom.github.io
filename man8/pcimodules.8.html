<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>pcimodules(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">pcimodules(8)</td>
    <td class="head-vol">Linux PCI Utilities</td>
    <td class="head-rtitle">pcimodules(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pcimodules - List kernel driver modules available for all currently plugged in
  PCI devices
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>pcimodules</b> [<b>--class</b>class_id<b>]</b>
  [<b>--classmask</b>mask<b>]</b> [<b>--help</b>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>pcimodules</b> lists all driver modules for all currently plugged in PCI
  devices. <b>pcimodules</b> should be run at boot time, and whenever a PCI
  device is &quot;hot plugged&quot; into the system. This can be done by the
  following Bourne shell syntax:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">	for module in $(pcimodules) ; do</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">		modprobe -s &quot;$module&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">	done</dd>
</dl>
<div class="Pp"></div>
When a PCI device is removed from the system, the Linux kernel will decrement a
  usage count on PCI driver module. If this count drops to zero (i.e., there are
  no PCI drivers), then the <b>modprobe -r</b> process that is normally
  configured to run from cron every few minutes will eventually remove the
  unneeded module.
<div class="Pp"></div>
The --class and --classmask arguments can be used to limit the search to certain
  classes of PCI devices. This is useful, for example, to generate a list of
  ethernet card drivers to be loaded when the kernel has indicated that it is
  trying to resolve an unknown network interface.
<div class="Pp"></div>
Modules are listed in the order in which the PCI devices are physically arranged
  so that the computer owner can arrange things like having scsi device 0 be on
  a controller that is not alphabetically the first scsi controller.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--class class --classmask mask</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
--class and --classmask limit the search to PCI cards in particular classes.
  These arguments are always used together. The arguments to --class and
  --classmask can be given as hexadecimal numbers by prefixing a leading
  &quot;0x&quot;. Note that the classes used by pcimodules are in
  &quot;Linux&quot; format, meaning the class value that you see with lspci
  would be shifted left eight bits, with the new low eight bits programming
  interface ID. An examples of how to use class and classmask is provided below.
  <b>--help, -h</b> Print a help message and exit.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">pcimodules</dt>
  <dd class="It-tag">lists all modules corresponding to currently plugged in PCI
      devices.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">pcimodules --class 0x20000 --classmask 0xffff00</dt>
  <dd class="It-tag">lists all modules corresponding to currently plugged in
      ethernet PCI devices.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/lib/modules/&lt;kernel-version&gt;/modules.pcimap</b></dt>
  <dd class="It-tag">This file is automatically generated by <b>depmod,</b> and
      used by <b>pcimodules</b> to determine which modules correspond to which
      PCI ID's.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/proc/bus/pci</b></dt>
  <dd class="It-tag">An interface to PCI bus configuration space provided by the
      post-2.1.82 Linux kernels. Contains per-bus subdirectories with per-card
      config space files and a <i>devices</i> file containing a list of all PCI
      devices.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>lspci</b>(8)
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="MAINTAINER"><a class="selflink" href="#MAINTAINER">MAINTAINER</a></h1>
The Linux PCI Utilities are maintained by Martin Mares &lt;mj@suse.cz&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>pcimodules</b> was written by Adam J. Richter &lt;adam@yggdrasil.com&gt;,
  based on public domain example code by Martin Mares &lt;mj@suse.cz&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<b>pcimodules</b> is copyright 2000, Yggdrasil Computing, Incorporated, and may
  be copied under the terms and conditions of version 2 of the GNU General
  Public License as published by the Free Software Foundation (Cambridge,
  Massachusetts, United States of America).</div>
<table class="foot">
  <tr>
    <td class="foot-date">09 April 2015</td>
    <td class="foot-os">pciutils-3.3.1</td>
  </tr>
</table>
</body>
</html>
