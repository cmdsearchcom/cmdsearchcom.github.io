<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EXIMSTATS(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EXIMSTATS(8)</td>
    <td class="head-vol">EXIM4</td>
    <td class="head-rtitle">EXIMSTATS(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
eximstats - generates statistics from Exim mainlog or syslog files.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
 eximstats [Output] [Options] mainlog1 mainlog2 ...
 eximstats -merge [Options] report.1.txt report.2.txt ... &gt; weekly_report.txt
</pre>
<h2 class="Ss" title="Ss" id="Output:"><a class="selflink" href="#Output:">Output:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-txt</b></dt>
  <dd class="It-tag">Output the results in plain text to STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-txt</b>=<i>filename</i></dt>
  <dd class="It-tag">Output the results in plain text. Filename '-' for STDOUT
      is accepted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-html</b></dt>
  <dd class="It-tag">Output the results in HTML to STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-html</b>=<i>filename</i></dt>
  <dd class="It-tag">Output the results in HTML. Filename '-' for STDOUT is
      accepted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-xls</b></dt>
  <dd class="It-tag">Output the results in Excel compatible Format to STDOUT.
      Requires the Spreadsheet::WriteExcel CPAN module.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-xls</b>=<i>filename</i></dt>
  <dd class="It-tag">Output the results in Excel compatible format. Filename '-'
      for STDOUT is accepted.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Options:"><a class="selflink" href="#Options:">Options:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b><i>number</i></dt>
  <dd class="It-tag">histogram divisions per hour. The default is 1, and 0
      suppresses histograms. Valid values are:
    <div style="height: 1.00em;">&#x00A0;</div>
    0, 1, 2, 3, 5, 10, 15, 20, 30 or 60.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ne</b></dt>
  <dd class="It-tag">Don't display error information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nr</b></dt>
  <dd class="It-tag">Don't display relaying information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nr</b><i>/pattern/</i></dt>
  <dd class="It-tag">Don't display relaying information that matches.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nt</b></dt>
  <dd class="It-tag">Don't display transport information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nt</b><i>/pattern/</i></dt>
  <dd class="It-tag">Don't display transport information that matches</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b><i>list</i></dt>
  <dd class="It-tag">List of times for queuing information single 0 item
      suppresses.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b><i>number</i></dt>
  <dd class="It-tag">Display top &lt;number&gt; sources/destinations default is
      50, 0 suppresses top listing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-tnl</b></dt>
  <dd class="It-tag">Omit local sources/destinations in top listing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t_remote_users</b></dt>
  <dd class="It-tag">Include remote users in the top source/destination
      listings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-include_original_destination</b></dt>
  <dd class="It-tag">Include the original destination email addresses rather
      than just using the final ones. Useful for finding out which of your
      mailing lists are receiving mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-show_dt</b><i>list</i></dt>
  <dd class="It-tag">Show the delivery times (<b>DT</b>)for all the messages.
    <div style="height: 1.00em;">&#x00A0;</div>
    Exim must have been configured to use the +deliver_time logging option for
      this option to work.
    <div style="height: 1.00em;">&#x00A0;</div>
     <i>list</i> is an optional list of times. Eg -show_dt1,2,4,8 will show the
      number of messages with delivery times under 1 second, 2 seconds, 4
      seconds, 8 seconds, and over 8 seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-show_rt</b><i>list</i></dt>
  <dd class="It-tag">Show the receipt times for all the messages. The receipt
      time is defined as the Completed hh:mm:ss - queue_time_overall - the
      Receipt hh:mm:ss. These figures will be skewed by pipelined messages so
      might not be that useful.
    <div style="height: 1.00em;">&#x00A0;</div>
    Exim must have been configured to use the +queue_time_overall logging option
      for this option to work.
    <div style="height: 1.00em;">&#x00A0;</div>
     <i>list</i> is an optional list of times. Eg -show_rt1,2,4,8 will show the
      number of messages with receipt times under 1 second, 2 seconds, 4
      seconds, 8 seconds, and over 8 seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-byhost</b></dt>
  <dd class="It-tag">Show results by sending host. This may be combined with
      <b>-bydomain</b> and/or <b>-byemail</b> and/or <b>-byedomain</b>. If none
      of these options are specified, then <b>-byhost</b> is assumed as a
      default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bydomain</b></dt>
  <dd class="It-tag">Show results by sending domain. May be combined with
      <b>-byhost</b> and/or <b>-byemail</b> and/or <b>-byedomain</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-byemail</b></dt>
  <dd class="It-tag">Show results by sender's email address. May be combined
      with <b>-byhost</b> and/or <b>-bydomain</b> and/or <b>-byedomain</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-byemaildomain</b> or <b>-byedomain</b></dt>
  <dd class="It-tag">Show results by sender's email domain. May be combined with
      <b>-byhost</b> and/or <b>-bydomain</b> and/or <b>-byemail</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pattern</b> <i>Description</i> <i>/Pattern/</i></dt>
  <dd class="It-tag">Look for the specified pattern and count the number of
      lines in which it appears. This option can be specified multiple times.
      Eg:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 -pattern 'Refused connections' '/refused connection/'
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-merge</b></dt>
  <dd class="It-tag">This option allows eximstats to merge old eximstat reports
      together. Eg:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 eximstats mainlog.sun &gt; report.sun.txt
 eximstats mainlog.mon &gt; report.mon.txt
 eximstats mainlog.tue &gt; report.tue.txt
 eximstats mainlog.wed &gt; report.web.txt
 eximstats mainlog.thu &gt; report.thu.txt
 eximstats mainlog.fri &gt; report.fri.txt
 eximstats mainlog.sat &gt; report.sat.txt
 eximstats -merge       report.*.txt &gt; weekly_report.txt
 eximstats -merge -html report.*.txt &gt; weekly_report.html
    </pre>
  </dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">You can merge text or html reports and output the results
      as text or html.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">You can use all the normal eximstat output options, but
      only data included in the original reports can be shown!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">When merging reports, some loss of accuracy may occur in
      the top <i>n</i> lists. This will be towards the ends of the lists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The order of items in the top <i>n</i> lists may vary when
      the data volumes round to the same value.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-charts</b></dt>
  <dd class="It-tag">Create graphical charts to be displayed in HTML output.
      Only valid in combination with <i>-html</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    This requires the following modules which can be obtained from
      http://www.cpan.org/modules/01modules.index.html</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">GD</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GDTextUtil</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GDGraph</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
To install these, download and unpack them, then use the normal perl
  installation procedure:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
 perl Makefile.PL
 make
 make test
 make install
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
On <b>Debian GNU/Linux</b> you can use &quot;apt-get install libgd-perl
  libgd-text-perl libgd-graph-perl&quot; instead.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-chartdir</b>I &lt;dir&gt;</dt>
  <dd class="It-tag">Create the charts in the directory &lt;dir&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-chartrel</b>I &lt;dir&gt;</dt>
  <dd class="It-tag">Specify the relative directory for the &quot;img src=&quot;
      tags from where to include the charts</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-emptyok</b></dt>
  <dd class="It-tag">Specify that it's OK to not find any valid log lines.
      Without this we will output an error message if we don't find any.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Debug flag. This outputs the <i>eval()</i>'d parser onto
      STDOUT which makes it easier to trap errors in the eval section. Remember
      to add 1 to the line numbers to allow for the title!</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Eximstats parses exim mainlog and syslog files to output a statistical analysis
  of the messages processed. By default, a text analysis is generated, but you
  can request other output formats using flags. See the help ( <b>-help</b>) to
  learn about how to create charts from the tables.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
There is a web site at http://www.exim.org
<h1 class="Sh" title="Sh" id="TO_DO"><a class="selflink" href="#TO_DO">TO
  DO</a></h1>
This program does not perfectly handle messages whose received and delivered log
  lines are in different files, which can happen when you have multiple mail
  servers and a message cannot be immediately delivered. Fixing this could be
  tricky...
<div class="Pp"></div>
Merging of xls files is not (yet) possible. Be free to implement :)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-06-03</td>
    <td class="foot-os">perl v5.24.1</td>
  </tr>
</table>
</body>
</html>
