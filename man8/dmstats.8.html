<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 19:10:22 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DMSTATS(8) MAINTENANCE COMMANDS DMSTATS(8)</p>

<p style="margin-top: 1em">NAME <br>
dmstats &acirc; device-mapper statistics management</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dmsetup stats command [options]</p>

<p style="margin-top: 1em">dmstats command [device_name
|--uuid uuid|--major major --minor minor] <br>
dmstats clear device_name [--allprograms|--programid id]
[--allregions|--regionid id] <br>
dmstats create [device_name... |file_path...] [--alldevices]
[--areas nr_areas|--areasize area_size] [--bounds
histogram_boundaries] [--filemap] [--nogroup] [--precise]
<br>
[--start start_sector --length length|--segments]
[--userdata user_data] [--programid id] <br>
dmstats delete [device_name] [--alldevices]
[--allprograms|--programid id] [--allregions|--regionid id]
<br>
dmstats group [device_name] [--alias name] [--alldevices]
[--regions regions] <br>
dmstats help [-c|-C|--columns] <br>
dmstats list [device_name] [--histogram]
[--allprograms|--programid id] [--units units] [--area]
[--region] [--group] [--nosuffix] [--notimesuffix]
[-v|--verbose[-v|--verbose]] <br>
dmstats print [device_name] [--clear]
[--allprograms|--programid id] [--allregions|--regionid id]
<br>
dmstats report [device_name] [--interval seconds] [--count
count] [--units units] [--histogram]
[--allprograms|--programid id] [--allregions|--regionid id]
[--area] [--region] <br>
[--group] [-O|--sort sort_fields] [-S|--select selection]
[--units units] [--nosuffix] [--notimesuffix] <br>
dmstats ungroup [device_name] [--alldevices] [--groupid
id]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The dmstats program manages IO statistics regions for
devices that use the device-mapper driver. Statistics
regions may be created, deleted, listed and reported on
using the <br>
tool.</p>

<p style="margin-top: 1em">The first argument to dmstats is
a command.</p>

<p style="margin-top: 1em">The second argument is the
device name, uuid or major and minor numbers.</p>

<p style="margin-top: 1em">Further options permit the
selection of regions, output format control, and reporting
behaviour.</p>

<p style="margin-top: 1em">When no device argument is given
dmstats will by default operate on all device-mapper devices
present. The create and delete commands require the use of
--alldevices when used in <br>
this way.</p>

<p style="margin-top: 1em">OPTIONS <br>
--alias name <br>
Specify an alias name for a group.</p>

<p style="margin-top: 1em">--alldevices <br>
If no device arguments are given allow operation on all
devices when creating or deleting regions.</p>

<p style="margin-top: 1em">--allprograms <br>
Include regions from all program IDs for list and report
operations.</p>

<p style="margin-top: 1em">--allregions <br>
Include all present regions for commands that normally
accept a single region identifier.</p>

<p style="margin-top: 1em">--area <br>
When peforming a list or report, include objects of type
area in the results.</p>

<p style="margin-top: 1em">--areas nr_areas <br>
Specify the number of statistics areas to create within a
new region.</p>

<p style="margin-top: 1em">--areasize
area_size[b|B|s|S|k|K|m|M|g|G|t|T|p|P|e|E] <br>
Specify the size of areas into which a new region should be
divided. An optional suffix selects units of: (b)ytes,
(s)ectors, (k)ilobytes, (m)egabytes, (g)igabytes, <br>
(t)erabytes, (p)etabytes, (e)xabytes. Capitalise to use
multiples of 1000 (S.I.) instead of 1024.</p>

<p style="margin-top: 1em">--clear <br>
When printing statistics counters, also atomically reset
them to zero.</p>

<p style="margin-top: 1em">--count count <br>
Specify the iteration count for repeating reports. If the
count argument is zero reports will continue to repeat until
interrupted.</p>

<p style="margin-top: 1em">--group <br>
When peforming a list or report, include objects of type
group in the results.</p>

<p style="margin-top: 1em">--filemap <br>
Instead of creating regions on a device as specified by
command line options, open the file found at each file_path
argument, and create regions corresponding to the
loca&acirc; <br>
tions of the on-disk extents allocated to the file(s).</p>

<p style="margin-top: 1em">--groupid id <br>
Specify the group to operate on.</p>

<p style="margin-top: 1em">--bounds
histogram_boundaries[ns|us|ms|s] <br>
Specify the boundaries of a latency histogram to be tracked
for the region as a comma separated list of latency values.
Latency values are given in nanoseconds. An <br>
optional unit suffix of ns, us, ms, or s may be given after
each value to specify units of nanoseconds, microseconds,
miliseconds or seconds respectively.</p>

<p style="margin-top: 1em">--histogram <br>
When used with the report and list commands select default
fields that emphasize latency histogram data.</p>

<p style="margin-top: 1em">--interval seconds <br>
Specify the interval in seconds between successive
iterations for repeating reports. If --interval is specified
but --count is not, reports will continue to repeat until
<br>
interrupted.</p>

<p style="margin-top: 1em">--length
length[b|B|s|S|k|K|m|M|g|G|t|T|p|P|e|E] <br>
Specify the length of a new statistics region in sectors. An
optional suffix selects units of: (b)ytes, (s)ectors,
(k)ilobytes, (m)egabytes, (g)igabytes, (t)erabytes, <br>
(p)etabytes, (e)xabytes. Capitalise to use multiples of 1000
(S.I.) instead of 1024.</p>

<p style="margin-top: 1em">-j|--major major <br>
Specify the major number.</p>

<p style="margin-top: 1em">-m|--minor minor <br>
Specify the minor number.</p>

<p style="margin-top: 1em">--nogroup <br>
When creating regions mapping the extents of a file in the
file system, do not create a group or set an alias.</p>

<p style="margin-top: 1em">--nosuffix <br>
Suppress the suffix on output sizes. Use with --units
(except h and H) if processing the output.</p>

<p style="margin-top: 1em">--notimesuffix <br>
Suppress the suffix on output time values. Histogram
boundary values will be reported in units of
nanoseconds.</p>

<p style="margin-top: 1em">-o|--options <br>
Specify which report fields to display.</p>

<p style="margin-top: 1em">-O|--sort sort_fields <br>
Sort output according to the list of fields given. Precede
any sort field with &rsquo;-&rsquo; for a reverse sort on
that column.</p>

<p style="margin-top: 1em">--precise <br>
Attempt to use nanosecond precision counters when creating
new statistics regions.</p>

<p style="margin-top: 1em">--programid id <br>
Specify a program ID string. When creating new statistics
regions this string is stored with the region. Subsequent
operations may supply a program ID in order to select <br>
only regions with a matching value. The default program ID
for dmstats-managed regions is &quot;dmstats&quot;.</p>

<p style="margin-top: 1em">--region <br>
When peforming a list or report, include objects of type
region in the results.</p>

<p style="margin-top: 1em">--regionid id <br>
Specify the region to operate on.</p>

<p style="margin-top: 1em">--regions region_list <br>
Specify a list of regions to group. The group list is a
comma-separated list of region identifiers. Continuous
sequences of identifiers may be expressed as a hyphen
sepa&acirc; <br>
rated range, for example: &rsquo;1-10&rsquo;.</p>

<p style="margin-top: 1em">--relative <br>
If displaying the histogram report show relative
(percentage) values instead of absolute counts.</p>

<p style="margin-top: 1em">-S|--select selection <br>
Display only rows that match selection criteria. All rows
with the additional &quot;selected&quot; column (-o
selected) showing 1 if the row matches the selection and 0
otherwise. <br>
The selection criteria are defined by specifying column
names and their valid values while making use of supported
comparison operators.</p>

<p style="margin-top: 1em">--start
start[b|B|s|S|k|K|m|M|g|G|t|T|p|P|e|E] <br>
Specify the start offset of a new statistics region in
sectors. An optional suffix selects units of: (b)ytes,
(s)ectors, (k)ilobytes, (m)egabytes, (g)igabytes, <br>
(t)erabytes, (p)etabytes, (e)xabytes. Capitalise to use
multiples of 1000 (S.I.) instead of 1024.</p>

<p style="margin-top: 1em">--segments <br>
When used with create, create a new statistics region for
each target contained in the given device(s). This causes a
separate region to be allocated for each segment of <br>
the device.</p>

<p style="margin-top: 1em">The newly created regions are
automatically placed into a group unless the --nogroup
option is given. When grouping is enabled a group alias may
be specified using the <br>
--alias option.</p>

<p style="margin-top: 1em">--units
[units][h|H|b|B|s|S|k|K|m|M|g|G|t|T|p|P|e|E] <br>
Set the display units for report output. All sizes are
output in these units: (h)uman-readable, (b)ytes, (s)ectors,
(k)ilobytes, (m)egabytes, (g)igabytes, (t)erabytes, <br>
(p)etabytes, (e)xabytes. Capitalise to use multiples of 1000
(S.I.) instead of 1024. Can also specify custom units e.g.
--units 3M.</p>

<p style="margin-top: 1em">--userdata user_data <br>
Specify user data (a word) to be stored with a new region.
The value is added to any internal auxilliary data (for
example, group information), and stored with the region <br>
in the aux_data field provided by the kernel. Whitespace is
not permitted.</p>

<p style="margin-top: 1em">-u|--uuid <br>
Specify the uuid.</p>

<p style="margin-top: 1em">-v|--verbose [-v|--verbose] <br>
Produce additional output.</p>

<p style="margin-top: 1em">COMMANDS <br>
clear device_name [--allprograms|--programid id]
[--allregions|--regionid id] <br>
Instructs the kernel to clear statistics counters for the
speficied regions (with the exception of in-flight IO
counters).</p>

<p style="margin-top: 1em">create [device_name...
|file_path...] [--alldevices] [--areas nr_areas|--areasize
area_size] [--bounds histogram_boundaries] [--filemap]
[--nogroup] [--precise] [--start <br>
start_sector --length length|--segments] [--userdata
user_data] [--programid id] <br>
Creates one or more new statistics regions on the specified
device(s).</p>

<p style="margin-top: 1em">The region will span the entire
device unless --start and --length or --segments are given.
The --start an --length options allow a region of arbitrary
length to be placed <br>
at an arbitrary offset into the device. The --segments
option causes a new region to be created for each target in
the corresponding device-mapper device&rsquo;s table.</p>

<p style="margin-top: 1em">If the --precise option is used
the command will attempt to create a region using nanosecond
precision counters.</p>

<p style="margin-top: 1em">If --bounds is given a latency
histogram will be tracked for the new region. The boundaries
of the histogram bins are given as a comma separated list of
latency values. <br>
There is an implicit lower bound of zero on the first bin
and an implicit upper bound of infinity (or the configured
interval duration) on the final bin.</p>

<p style="margin-top: 1em">Latencies are given in
nanoseconds. An optional unit suffix of ns, us, ms, or s may
be given after each value to specify units of nanoseconds,
microseconds, miliseconds or <br>
seconds respectively, so for example, 10ms is equivalent to
10000000. Latency values with a precision of less than one
milisecond can only be used when precise timestamps <br>
are enabled: if --precise is not given and values less than
one milisecond are used it will be enabled
automatically.</p>

<p style="margin-top: 1em">An optional program_id or
user_data string may be associated with the region. A
program_id may then be used to select regions for subsequent
list, print, and report opera&acirc; <br>
tions. The user_data stores an arbitrary string and is not
used by dmstats or the device-mapper kernel statistics
subsystem.</p>

<p style="margin-top: 1em">By default dmstats creates
regions with a program_id of &quot;dmstats&quot;.</p>

<p style="margin-top: 1em">On success the region_id of the
newly created region is printed to stdout.</p>

<p style="margin-top: 1em">If the --filemap option is given
with a regular file, or list of files, as the file_path
argument, instead of creating regions with parameters
specified on the command <br>
line, dmstats will open the files located at file_path and
create regions corresponding to the physical extents
allocated to the file. This can be used to monitor
statis&acirc; <br>
tics for individual files in the file system, for example,
virtual machine images, swap areas, or large database
files.</p>

<p style="margin-top: 1em">To work with the --filemap
option, files must be located on a local file system, backed
by a device-mapper device, that supports physical extent
data using the FIEMAP <br>
ioctl (Ext4 and XFS for e.g.).</p>

<p style="margin-top: 1em">By default regions that map a
file are placed into a group and the group alias is set to
the basename of the file. This behaviour can be overridden
with the --alias and <br>
--nogroup options.</p>

<p style="margin-top: 1em">Use the --group option to only
display information for groups when listing and
reporting.</p>

<p style="margin-top: 1em">delete [device_name]
[--alldevices] [--allprograms|--programid id]
[--allregions|--regionid id] <br>
Delete the specified statistics region. All counters and
resources used by the region are released and the region
will not appear in the output of subsequent list, print,
<br>
or report operations.</p>

<p style="margin-top: 1em">All regions registered on a
device may be removed using --allregions.</p>

<p style="margin-top: 1em">To remove all regions on all
devices both --allregions and --alldevices must be used.</p>

<p style="margin-top: 1em">If a --groupid is given instead
of a --regionid the command will attempt to delete the group
and all regions that it contains.</p>

<p style="margin-top: 1em">If a deleted region is the first
member of a group of regions the group will also be
removed.</p>

<p style="margin-top: 1em">group [device_name] [--alias
name] [--alldevices] [--regions regions] <br>
Combine one or more statistics regions on the specified
device into a group.</p>

<p style="margin-top: 1em">The list of regions to be
grouped is specified with --regions and an optional alias
may be assigned with --alias. The set of regions is given as
a comma-separated list of <br>
region identifiers. A continuous range of identifers
spanning from R1 to R2 may be expressed as
&rsquo;R1-R2&rsquo;.</p>

<p style="margin-top: 1em">Regions that have a histogram
configured can be grouped: in this case the number of
histogram bins and their bounds must match exactly.</p>

<p style="margin-top: 1em">On success the group list and
newly created group_id are printed to stdout.</p>

<p style="margin-top: 1em">The group metadata is stored
with the first (lowest numbered) region_id in the group:
deleting this region will also delete the group and other
group members will be <br>
returned to their prior state.</p>

<p style="margin-top: 1em">help [-c|-C|--columns] <br>
Outputs a summary of the commands available, optionally
including the list of report fields.</p>

<p style="margin-top: 1em">list [device_name] [--histogram]
[--allprograms|--programid id] [--units units] [--area]
[--region] [--group] [--nosuffix] [--notimesuffix]
[-v|--verbose[-v|--verbose]] <br>
List the statistics regions, areas, or groups registered on
the device. If the --allprograms switch is given all regions
will be listed regardless of region program ID <br>
values.</p>

<p style="margin-top: 1em">By default only regions and
groups are included in list output. If -v or --verbose is
given the report will also include a row of information for
each configured group and <br>
for each area contained in each region displayed.</p>

<p style="margin-top: 1em">Regions that contain a single
area are by default omitted from the verbose list since
their properties are identical to the area that they contain
- to view all regions <br>
regardless of the number of areas present use --region). To
also view the areas contained within regions use --area.</p>

<p style="margin-top: 1em">If --histogram is given the
report will include the bin count and latency boundary
values for any configured histograms.</p>

<p style="margin-top: 1em">print [device_name] [--clear]
[--allprograms|--programid id] [--allregions|--regionid id]
<br>
Print raw statistics counters for the specified region or
for all present regions.</p>

<p style="margin-top: 1em">report [device_name] [--interval
seconds] [--count count] [--units units] [--histogram]
[--allprograms|--programid id] [--allregions|--regionid id]
[--area] [--region] [--group] <br>
[-O|--sort sort_fields] [-S|--select selection] [--units
units] [--nosuffix] [--notimesuffix] <br>
Start a report for the specified object or for all present
objects. If the count argument is specified, the report will
repeat at a fixed interval set by the --interval <br>
option. The default interval is one second.</p>

<p style="margin-top: 1em">If the --allprograms switch is
given, all regions will be listed, regardless of region
program ID values.</p>

<p style="margin-top: 1em">If the --histogram is given the
report will include the histogram values and latency
boundaries.</p>

<p style="margin-top: 1em">If the --relative is used the
default histogram field displays bin values as a percentage
of the total number of I/Os.</p>

<p style="margin-top: 1em">Object types (areas, regions and
groups) to include in the report are selected using the
--area, --region, and --group options.</p>

<p style="margin-top: 1em">ungroup [device_name]
[--alldevices] [--groupid id] <br>
Remove an existing group and return all the group&rsquo;s
regions to their original state.</p>

<p style="margin-top: 1em">The group to be removed is
specified using --groupid.</p>

<p style="margin-top: 1em">REGIONS, AREAS, AND GROUPS <br>
The device-mapper statistics facility allows separate
performance counters to be maintained for arbitrary regions
of devices. A region may span any range: from a single
sector to <br>
the whole device. A region may be further sub-divided into a
number of distinct areas (one or more), each with its own
counter set. In this case a summary value for the entire
<br>
region is also available for use in reports.</p>

<p style="margin-top: 1em">In addition, one or more regions
on one device can be combined into a statistics group.
Groups allow several regions to be aggregated and reported
as a single entity; counters <br>
for all regions and areas are summed and used to report
totals for all group members. Groups also permit the
assignment of an optional alias, allowing meaningful names
to be <br>
associated with sets of regions.</p>

<p style="margin-top: 1em">The group metadata is stored
with the first (lowest numbered) region_id in the group:
deleting this region will also delete the group and other
group members will be returned to <br>
their prior state.</p>

<p style="margin-top: 1em">By default new regions span the
entire device. The --start and --length options allows a
region of any size to be placed at any location on the
device.</p>

<p style="margin-top: 1em">Using offsets it is possible to
create regions that map individual objects within a block
device (for example: partitions, files in a file system, or
stripes or other structures <br>
in a RAID volume). Groups allow several non-contiguous
regions to be assembled together for reporting and data
aggregation.</p>

<p style="margin-top: 1em">A region may be either divided
into the specified number of equal-sized areas, or into
areas of the given size by specifying one of --areas or
--areasize when creating a region <br>
with the create command. Depending on the size of the areas
and the device region the final area within the region may
be smaller than requested.</p>

<p style="margin-top: 1em">Region identifiers</p>

<p style="margin-top: 1em">Each region is assigned an
identifier when it is created that is used to reference the
region in subsequent operations. Region identifiers are
unique within a given device <br>
(including across different program_id values).</p>

<p style="margin-top: 1em">Depending on the sequence of
create and delete operations, gaps may exist in the sequence
of region_id values for a particular device.</p>

<p style="margin-top: 1em">The region_id should be treated
as an opaque identifier used to reference the region.</p>

<p style="margin-top: 1em">Group identifiers</p>

<p style="margin-top: 1em">Groups are also assigned an
integer identifier at creation time; like region
identifiers, group identifiers are unique within the
containing device.</p>

<p style="margin-top: 1em">The group_id should be treated
as an opaque identifier used to reference the group.</p>

<p style="margin-top: 1em">REPORT FIELDS <br>
The dmstats report provides several types of field that may
be added to the default field set, or used to create custom
reports.</p>

<p style="margin-top: 1em">All performance counters and
metrics are calculated per-area.</p>

<p style="margin-top: 1em">Derived metrics <br>
A number of metrics fields are included that provide high
level performance indicators. These are based on the fields
provided by the conventional Linux iostat program and are
<br>
derived from the basic counter values provided by the kernel
for each area.</p>

<p style="margin-top: 1em">reads_merged_per_sec <br>
Reads merged per second.</p>

<p style="margin-top: 1em">writes_merged_per_sec <br>
Writes merged per second.</p>

<p style="margin-top: 1em">reads_per_sec <br>
Reads completed per second.</p>

<p style="margin-top: 1em">writes_per_sec <br>
Writes completed per second.</p>

<p style="margin-top: 1em">read_size_per_sec <br>
Size of data read per second.</p>

<p style="margin-top: 1em">write_size_per_sec <br>
Size of data written per second.</p>

<p style="margin-top: 1em">avg_request_size <br>
Average request size.</p>

<p style="margin-top: 1em">queue_size <br>
Average queue size.</p>

<p style="margin-top: 1em">await The average wait time for
read and write operations.</p>

<p style="margin-top: 1em">r_await <br>
The average wait time for read operations.</p>

<p style="margin-top: 1em">w_await <br>
The average wait time for write operations.</p>

<p style="margin-top: 1em">throughput <br>
The device throughput in operations per second.</p>

<p style="margin-top: 1em">service_time <br>
The average service time (in milliseconds) for operations
issued to the device.</p>

<p style="margin-top: 1em">util Percentage of CPU time
during which I/O requests were issued to the device
(bandwidth utilization for the device). Device saturation
occurs when this value is close to <br>
100%.</p>

<p style="margin-top: 1em">Group, region and area meta
fields <br>
Meta fields provide information about the groups, regions,
or areas that the statistics values relate to. This includes
the region and area identifier, start, length, and counts,
<br>
as well as the program ID and user data values.</p>

<p style="margin-top: 1em">region_id <br>
Region identifier. This is a non-negative integer returned
by the kernel when a statistics region is created.</p>

<p style="margin-top: 1em">region_start <br>
The region start location. Display units are selected by the
--units option.</p>

<p style="margin-top: 1em">region_len <br>
The length of the region. Display units are selected by the
--units option.</p>

<p style="margin-top: 1em">area_id <br>
Area identifier. Area identifiers are assigned by the
device-mapper statistics library and uniquely identify each
area within a region. Each ID corresponds to a distinct <br>
set of performance counters for that area of the statistics
region. Area identifiers are always monotonically increasing
within a region so that higher ID values corre&acirc; <br>
spond to greater sector addresses within the area and no
gaps in the sequence of identifiers exist.</p>

<p style="margin-top: 1em">area_start <br>
The area start location. Display units are selected by the
--units option.</p>

<p style="margin-top: 1em">area_len <br>
The length of the area. Display units are selected by the
--units option.</p>

<p style="margin-top: 1em">area_count <br>
The number of areas in this region.</p>

<p style="margin-top: 1em">program_id <br>
The program ID value associated with this region.</p>

<p style="margin-top: 1em">user_data <br>
The user data value associated with this region.</p>

<p style="margin-top: 1em">group_id <br>
Group identifier. This is a non-negative integer returned by
the dmstats group command when a statistics group is
created.</p>

<p style="margin-top: 1em">interval_ns <br>
The estimated interval over which the current counter values
have accumulated. The value is reported as an interger
expressed in units of nanoseconds.</p>

<p style="margin-top: 1em">interval <br>
The estimated interval over which the current counter values
have accumulated. The value is reported as a real number in
units of seconds.</p>

<p style="margin-top: 1em">Basic counters <br>
Basic counters provide access to the raw counter data from
the kernel, allowing further processing to be carried out by
another program.</p>

<p style="margin-top: 1em">The kernel provides thirteen
separate counters for each statistics area. The first eleven
of these match the counters provided in /proc/diskstats or
/sys/block/*/*/stat. The <br>
final pair provide separate counters for read and write
time.</p>

<p style="margin-top: 1em">read_count <br>
Count of reads completed this interval.</p>

<p style="margin-top: 1em">reads_merged_count <br>
Count of reads merged this interval.</p>

<p style="margin-top: 1em">read_sector_count <br>
Count of 512 byte sectors read this interval.</p>

<p style="margin-top: 1em">read_time <br>
Accumulated duration of all read requests (ns).</p>

<p style="margin-top: 1em">write_count <br>
Count of writes completed this interval.</p>

<p style="margin-top: 1em">writes_merged_count <br>
Count of writes merged this interval.</p>

<p style="margin-top: 1em">write_sector_count <br>
Count of 512 byte sectors written this interval.</p>

<p style="margin-top: 1em">write_nsecs <br>
Accumulated duration of all write requests (ns).</p>

<p style="margin-top: 1em">in_progress_count <br>
Count of requests currently in progress.</p>

<p style="margin-top: 1em">io_ticks <br>
Nanoseconds spent servicing requests.</p>

<p style="margin-top: 1em">queue_ticks <br>
This field is incremented at each I/O start, I/O completion,
I/O merge, or read of these stats by the number of I/Os in
progress multiplied by the number of milliseconds <br>
spent doing I/O since the last update of this field. This
can provide an easy measure of both I/O completion time and
the backlog that may be accumulating.</p>

<p style="margin-top: 1em">read_ticks <br>
Nanoseconds spent servicing reads.</p>

<p style="margin-top: 1em">write_ticks <br>
Nanoseconds spent servicing writes.</p>

<p style="margin-top: 1em">Histogram fields <br>
Histograms measure the frequency distribution of user
specified I/O latency intervals. Histogram bin boundaries
are specified when a region is created.</p>

<p style="margin-top: 1em">A brief representation of the
histogram values and latency intervals can be included in
the report using these fields.</p>

<p style="margin-top: 1em">hist_count <br>
A list of the histogram counts for the current statistics
area in order of ascending latency value. Each value
represents the number of I/Os with latency times falling
<br>
into that bin&rsquo;s time range during the sample
period.</p>

<p style="margin-top: 1em">hist_count_bounds <br>
A list of the histogram counts for the current statistics
area in order of ascending latency value including bin
boundaries: each count is prefixed by the lower bound of
<br>
the corresponding histogram bin.</p>

<p style="margin-top: 1em">hist_count_ranges <br>
A list of the histogram counts for the current statistics
area in order of ascending latency value including bin
boundaries: each count is prefixed by both the lower and
<br>
upper bounds of the corresponding histogram bin.</p>

<p style="margin-top: 1em">hist_percent <br>
A list of the relative histogram values for the current
statistics area in order of ascending latency value,
expressed as a percentage. Each value represents the
propor&acirc; <br>
tion of I/Os with latency times falling into that
bin&rsquo;s time range during the sample period.</p>

<p style="margin-top: 1em">hist_percent_bounds <br>
A list of the relative histogram values for the current
statistics area in order of ascending latency value,
expressed as a percentage and including bin boundaries. Each
<br>
value represents the proportion of I/Os with latency times
falling into that bin&rsquo;s time range during the sample
period and is prefixed with the corresponding bin&rsquo;s
lower <br>
bound.</p>

<p style="margin-top: 1em">hist_percent_ranges <br>
A list of the relative histogram values for the current
statistics area in order of ascending latency value,
expressed as a percentage and including bin boundaries. Each
<br>
value represents the proportion of I/Os with latency times
falling into that bin&rsquo;s time range during the sample
period and is prefixed with the corresponding bin&rsquo;s
lower <br>
and upper bounds.</p>

<p style="margin-top: 1em">hist_bounds <br>
A list of the histogram boundary values for the current
statistics area in order of ascending latency value. The
values are expressed in whole units of seconds,
milisec&acirc; <br>
onds, microseconds or nanoseconds with a suffix indicating
the unit.</p>

<p style="margin-top: 1em">hist_ranges <br>
A list of the histogram bin ranges for the current
statistics area in order of ascending latency value. The
values are expressed as &quot;LOWER-UPPER&quot; in whole
units of sec&acirc; <br>
onds, miliseconds, microseconds or nanoseconds with a suffix
indicating the unit.</p>

<p style="margin-top: 1em">hist_bins <br>
The number of latency histogram bins configured for the
area.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Create a whole-device region with one area on vg00/lvol1
<br>
# dmstats create vg00/lvol1 <br>
vg00/lvol1: Created new region with 1 area(s) as region ID
0</p>

<p style="margin-top: 1em">Create a 32M region 1G into
device d0 <br>
# dmstats create --start 1G --length 32M d0 <br>
d0: Created new region with 1 area(s) as region ID 0</p>

<p style="margin-top: 1em">Create a whole-device region
with 8 areas on every device <br>
# dmstats create --areas 8 <br>
vg00-lvol1: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol2: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol3: Created new region with 8 area(s) as region ID 0
<br>
vg01-lvol0: Created new region with 8 area(s) as region ID 2
<br>
vg01-lvol1: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol2: Created new region with 8 area(s) as region ID
1</p>

<p style="margin-top: 1em">Delete all regions on all
devices <br>
# dmstats delete --alldevices --allregions</p>

<p style="margin-top: 1em">Create a whole-device region
with areas 10GiB in size on vg00/lvol1 using dmsetup <br>
# dmsetup stats create --areasize 10G vg00/lvol1 <br>
vg00-lvol1: Created new region with 5 area(s) as region ID
1</p>

<p style="margin-top: 1em">Create a 1GiB region with 16
areas at the start of vg00/lvol1 <br>
# dmstats create --start 0 --len 1G --areas=16 vg00/lvol1
<br>
vg00-lvol1: Created new region with 16 area(s) as region ID
0</p>

<p style="margin-top: 1em">List the statistics regions
registered on vg00/lvol1 <br>
# dmstats list vg00/lvol1 <br>
Name RgID RStart RSize #Areas ASize ProgID <br>
vg00-lvol1 0 0 61.00g 1 61.00g dmstats <br>
vg00-lvol1 1 61.00g 19.20g 1 19.20g dmstats <br>
vg00-lvol1 2 80.20g 2.14g 1 2.14g dmstats</p>

<p style="margin-top: 1em">Display five statistics reports
for vg00/lvol1 at an interval of one second <br>
# dmstats report --interval 1 --count 5 vg00/lvol1 <br>
# dmstats report <br>
Name RgID ArID AStart ASize RRqM/s WRqM/s R/s W/s RSz/s
WSz/s AvRqSz QSize Util% AWait RdAWa WrAWa <br>
vg_hex-lv_home 0 0 0 61.00g 0.00 0.00 0.00 218.00 0 1.04m
4.50k 2.97 81.70 13.62 0.00 13.62 <br>
vg_hex-lv_home 1 0 61.00g 19.20g 0.00 0.00 0.00 5.00 0
548.00k 109.50k 0.14 11.00 27.40 0.00 27.40 <br>
vg_hex-lv_home 2 0 80.20g 2.14g 0.00 0.00 0.00 14.00 0 1.15m
84.00k 0.39 18.70 27.71 0.00 27.71</p>

<p style="margin-top: 1em">Create one region for reach
target contained in device vg00/lvol1 <br>
# dmstats create --segments vg00/lvol1 <br>
vg00-lvol1: Created new region with 1 area(s) as region ID 0
<br>
vg00-lvol1: Created new region with 1 area(s) as region ID 1
<br>
vg00-lvol1: Created new region with 1 area(s) as region ID
2</p>

<p style="margin-top: 1em">Create regions mapping each file
in the directory images/ and place them into separate
groups, each named after the corresponding file <br>
# dmstats create --filemap images/* <br>
images/vm1.qcow2: Created new group with 87 region(s) as
group ID 0. <br>
images/vm1-1.qcow2: Created new group with 8 region(s) as
group ID 87. <br>
images/vm2.qcow2: Created new group with 11 region(s) as
group ID 95. <br>
images/vm2-1.qcow2: Created new group with 1454 region(s) as
group ID 106. <br>
images/vm3.img: Created new group with 2 region(s) as group
ID 1560.</p>

<p style="margin-top: 1em">Print raw counters for region 4
on device d0 <br>
# dmstats print --regionid 4 d0 <br>
2097152+65536 0 0 0 0 29 0 264 701 0 41 701 0 41</p>

<p style="margin-top: 1em">AUTHORS <br>
Bryn M. Reeves &lt;bmr@redhat.com&gt;</p>

<p style="margin-top: 1em">SEE ALSO <br>
dmsetup(8)</p>

<p style="margin-top: 1em">LVM2 resource page:
https://www.sourceware.org/lvm2/ <br>
Device-mapper resource page:
http://sources.redhat.com/dm/</p>

<p style="margin-top: 1em">Device-mapper statistics kernel
documentation <br>
Documentation/device-mapper/statistics.txt</p>

<p style="margin-top: 1em">Linux Jun 23 2016 DMSTATS(8)</p>
<hr>
</body>
</html>
