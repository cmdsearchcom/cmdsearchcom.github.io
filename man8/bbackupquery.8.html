<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BBACKUPQUERY(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BBACKUPQUERY(8)</td>
    <td class="head-vol">Box Backup</td>
    <td class="head-rtitle">BBACKUPQUERY(8)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
bbackupquery - Box Backup store query and file retrieval
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 13.00ex; text-indent: -13.00ex;"><b>bbackupquery</b>
  [-q] [-c&#x00A0;configfile] [command&#x00A0;...]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>bbackupquery</b> is the main way of interacting with the backup store from a
  Box Backup client machine. It supports both interactive and batch modes of
  operation.
<div class="Pp"></div>
It can be used to reviewing the status of a client machine&#x00B4;s backup
  store, getting status from the store server. The main use is to retrieve files
  and directories when needed.
<div class="Pp"></div>
<b>bbackupquery</b> supports interactive and batch modes of operation.
  Interactive mode allows for interaction with the server much like an
  interactive FTP client.
<div class="Pp"></div>
Batch mode is invoked by putting commands into the invocation of
  <b>bbackupquery</b>. Example:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
bbackupquery &quot;list home-dirs&quot; quit
</pre>
</div>
<div class="Pp"></div>
Note that commands that contain spaces are enclosed in double quotes. If the
  <b>quit</b> command is omitted, after the preceding commands are completed,
  <b>bbackupquery</b> will enter interactive mode.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-q</b>
<div style="margin-left: 4.00ex;">Quiet. Suppresses status output while
  running.</div>
<div class="Pp"></div>
<b>-c</b> <b>configfile</b>
<div style="margin-left: 4.00ex;">Use configfile instead of the default
  bbackupd.conf file. Can be a relative or full path.</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
The commands that can be used in bbackupquery are listed below.
<div class="Pp"></div>
<b>help</b>
<div style="margin-left: 4.00ex;">Displays the basic help message, which gives
  information about the commands available in <b>bbackupquery</b>. Use the form
  <b>help command</b> to get help on a specific command.</div>
<div class="Pp"></div>
<b>quit</b>
<div style="margin-left: 4.00ex;">End the session with the store server, and
  quit bbackupquery.</div>
<div class="Pp"></div>
<b>cd</b> [options] <i>directory-name</i>
<div style="margin-left: 4.00ex;">Change directory. Options:
<div class="Pp"></div>
<b>-d</b>
<div style="margin-left: 4.00ex;">consider deleted directories for
  traversal</div>
<div class="Pp"></div>
<b>-o</b>
<div style="margin-left: 4.00ex;">consider old versions of directories for
  traversal. This option should never be useful in a correctly formed
  store.</div>
</div>
<div class="Pp"></div>
<b>lcd</b> <i>local-directory-name</i>
<div style="margin-left: 4.00ex;">Change directory on the client machine. To
  list the contents of the local directory, type <b>sh ls</b> (on Unix-like
  machines).</div>
<div class="Pp"></div>
<b>list</b> [options] [directory-name]
<div style="margin-left: 4.00ex;">The list (or its synonym <b>ls</b>) command
  lists the content of the current, or specified, directory. The options are as
  follows:
<div class="Pp"></div>
<b>-r</b>
<div style="margin-left: 4.00ex;">recursively list all files</div>
<div class="Pp"></div>
<b>-d</b>
<div style="margin-left: 4.00ex;">list deleted files and directories</div>
<div class="Pp"></div>
<b>-o</b>
<div style="margin-left: 4.00ex;">list old versions of files and
  directories</div>
<div class="Pp"></div>
<b>-I</b>
<div style="margin-left: 4.00ex;">don&#x00B4;t display object IDs</div>
<div class="Pp"></div>
<b>-F</b>
<div style="margin-left: 4.00ex;">don&#x00B4;t display flags</div>
<div class="Pp"></div>
<b>-t</b>
<div style="margin-left: 4.00ex;">show file modification time (and attr mod
  time, if the object has attributes).</div>
<div class="Pp"></div>
<b>-s</b>
<div style="margin-left: 4.00ex;">show file size in blocks used on server. Note
  that this is only a very approximate indication of local file size.</div>
</div>
<div class="Pp"></div>
<b>ls</b> [options] [directory-name]
<div style="margin-left: 4.00ex;">Synonym for <b>list</b>.</div>
<div class="Pp"></div>
<b>pwd</b>
<div style="margin-left: 4.00ex;">Print current directory, always relative to
  the backup store root.</div>
<div class="Pp"></div>
<b>sh</b> <i>shell-command</i>
<div style="margin-left: 4.00ex;">Everything after the sh is passed to a shell
  and run. All output from the command is displayed in the client.
<div style="height: 1.00em;">&#x00A0;</div>
Example: to list the contents of the current directory on the client machine
  type <b>sh ls</b>.</div>
<div class="Pp"></div>
<b>compare -a</b>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
<b>compare -l</b> <i>location-name</i>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
<b>compare</b> <i>store-dir-name</i> <i>local-dir-name</i>
<div style="margin-left: 4.00ex;">Compare the current data in the store with the
  data on the disc. Please note that all the data will be downloaded from the
  store, so this can be a very lengthy process depending on the size of the
  store, and the size of the part you are comparing.
<div style="height: 1.00em;">&#x00A0;</div>
Options:
<div class="Pp"></div>
<b>-a</b>
<div style="margin-left: 4.00ex;">compare all locations.</div>
<div class="Pp"></div>
<b>-l</b>
<div style="margin-left: 4.00ex;">compare one backup location as specified in
  the configuration file. This compares one of the top level store
  directories.</div>
<div class="Pp"></div>
<b>-c</b>
<div style="margin-left: 4.00ex;">set return code. The return code is set to the
  following values, if quit is the next command. So, if another command is run
  after the compare, the return code will not refer to the compare. This option
  is very useful for automating compares. Return code values:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>1</b> -- no differences were
  found</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>2</b> -- differences were
  found</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>3</b> -- an error occured</div>
</div>
</div>
<div class="Pp"></div>
<b>get</b> <i>object-filename</i> [local-filename]
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
<b>get -i</b> <i>object-id</i> <i>local-filename</i>
<div style="margin-left: 4.00ex;">Gets a file from the store. Object is
  specified as the filename within the current directory. Local filename is
  optional. Ignores old and deleted files when searching the directory for the
  file to retrieve.
<div style="height: 1.00em;">&#x00A0;</div>
To get an old or deleted file, use the <b>-i</b> option and select the object as
  a hex object ID (first column in listing). The local filename must be
  specified.</div>
<div class="Pp"></div>
<b>getobject</b> <i>object-id</i> <i>local-filename</i>
<div style="margin-left: 4.00ex;">Gets the object specified by the object id (in
  hex) and stores the raw contents in the local file specified. Note: This is
  only useful for debugging as it does not decode files from the stored format,
  which is encrypted and compressed.</div>
<div class="Pp"></div>
<b>restore</b> [-d] <i>directory-name</i> <i>local-directory-name</i>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
<b>restore -r</b>
<div style="margin-left: 4.00ex;">Restores a directory to the local disc. The
  local directory specified must not exist (unless a previous restore is being
  restarted). The root cannot be restored -- restore locations individually.
<div style="height: 1.00em;">&#x00A0;</div>
Options:
<div class="Pp"></div>
<b>-d</b>
<div style="margin-left: 4.00ex;">restore a deleted directory</div>
<div class="Pp"></div>
<b>-r</b>
<div style="margin-left: 4.00ex;">resume an interrupted restore</div>
<div style="height: 1.00em;">&#x00A0;</div>
If a restore operation is interrupted for any reason, it can be restarted using
  the <b>-r</b> switch. Restore progress information is saved in a file at
  regular intervals during the restore operation to allow restarts.</div>
<div class="Pp"></div>
<b>usage</b> [-m]
<div style="margin-left: 4.00ex;">Show space used on the server for this
  account. Display fields:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Used: Total amount of space used on
  the server</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Old files: Space used by old
  files</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Deleted files: Space used by deleted
  files</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Directories: Space used by the
  directory structure</div>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    When Used exceeds the soft limit, the server will start to remove old and
      deleted files until the usage drops below the soft limit. After a while,
      you should expect to see the usage stay at just below the soft limit. You
      only need more space if the space used by old and deleted files is near
      zero.
    <div style="height: 1.00em;">&#x00A0;</div>
    The <b>-m</b> option displays output in machine-readable form.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
If you find a bug in Box Backup and you want to let us know about it, join the
  <i>mailing list</i>[1] and send us a description of the problem there.
<div class="Pp"></div>
To report a bug, give us at least the following information:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The version of Box Backup you are
  running</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The platform you are running on
  (hardware and OS), for both client and server.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;If possible attach your config files
  (bbstored.conf, bbackupd.conf) to the bug report.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Also attach any log file output that
  helps shed light on the problem you are seeing.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;And last but certainly not least, a
  description of what you are seeing, in as much detail as possible.</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Ben Summers
<div class="Pp"></div>
Per Thomsen
<div class="Pp"></div>
James O&#x00B4;Gorman
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">mailing list</dd>
</dl>
<div style="margin-left: 4.00ex;">http://lists.warhead.org.uk/mailman/listinfo/boxbackup</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">01/22/2017</td>
    <td class="foot-os">Box Backup 0.11</td>
  </tr>
</table>
</body>
</html>
