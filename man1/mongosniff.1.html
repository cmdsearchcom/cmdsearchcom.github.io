<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:25:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MONGOSNIFF(1) mongodb-manual MONGOSNIFF(1)</p>

<p style="margin-top: 1em">NAME <br>
mongosniff - MongoDB Protocol Introspection Utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mongosniff provides a low-level operation tracing/sniffing
view into database activity in real time. Think of
mongosniff as a MongoDB-specific analogue of tcpdump for
TCP/IP net&acirc; <br>
work traffic. Typically, mongosniff is most frequently used
in driver development.</p>

<p style="margin-top: 1em">NOTE: <br>
mongosniff requires libpcap and is only available for
Unix-like systems.</p>

<p style="margin-top: 1em">As an alternative to mongosniff,
Wireshark, a popular network sniffing tool is capable of
inspecting and parsing the MongoDB wire protocol.</p>

<p style="margin-top: 1em">OPTIONS <br>
mongosniff</p>

<p style="margin-top: 1em">mongosniff</p>

<p style="margin-top: 1em">--help Returns information on
the options and use of mongosniff.</p>

<p style="margin-top: 1em">--forward
&lt;host&gt;&lt;:port&gt; <br>
Declares a host to forward all parsed requests that the
mongosniff intercepts to another mongod instance and issue
those operations on that database instance.</p>

<p style="margin-top: 1em">Specify the target host name and
port in the &lt;host&gt;&lt;:port&gt; format.</p>

<p style="margin-top: 1em">To connect to a replica set,
specify the replica set name and a seed list of set members.
Use the following form:</p>


<p style="margin-top: 1em">&lt;replSetName&gt;/&lt;hostname1&gt;&lt;:port&gt;,&lt;hostname2&gt;&lt;:port&gt;,&lt;...&gt;</p>

<p style="margin-top: 1em">--source &lt;NET [interface]&gt;
<br>
Specifies source material to inspect. Use --source NET
[interface] to inspect traffic from a network interface
(e.g. eth0 or lo.) Use --source FILE [filename] to read <br>
captured packets in pcap format.</p>

<p style="margin-top: 1em">You may use the --source DIAGLOG
[filename] option to read the output files produced by the
--diaglog option.</p>

<p style="margin-top: 1em">--objcheck <br>
Displays invalid BSON objects only and nothing else. Use
this option for troubleshooting driver development. This
option has some performance impact on the performance of
<br>
mongosniff.</p>

<p style="margin-top: 1em">&lt;port&gt; Specifies alternate
ports to sniff for traffic. By default, mongosniff watches
for MongoDB traffic on port 27017. Append multiple port
numbers to the end of mongosniff to <br>
monitor traffic on multiple ports.</p>

<p style="margin-top: 1em">USE <br>
Use the following command to connect to a mongod or mongos
running on port 27017 and 27018 on the localhost
interface:</p>

<p style="margin-top: 1em">mongosniff --source NET lo 27017
27018</p>

<p style="margin-top: 1em">Use the following command to
only log invalid BSON objects for the mongod or mongos
running on the localhost interface and port 27018, for
driver development and troubleshooting:</p>

<p style="margin-top: 1em">mongosniff --objcheck --source
NET lo 27018</p>

<p style="margin-top: 1em">BUILD MONGOSNIFF <br>
To build mongosniff yourself, Linux users can use the
following procedure:</p>

<p style="margin-top: 1em">1. Obtain prerequisites using
your operating systems package management software.
Dependencies include:</p>

<p style="margin-top: 1em">&Acirc;&middot; libpcap - to
capture network packets.</p>

<p style="margin-top: 1em">&Acirc;&middot; git - to
download the MongoDB source code.</p>

<p style="margin-top: 1em">&Acirc;&middot; scons and a C++
compiler - to build mongosniff.</p>

<p style="margin-top: 1em">2. Download a copy of the
MongoDB source code using git:</p>

<p style="margin-top: 1em">git clone
git://github.com/mongodb/mongo.git</p>

<p style="margin-top: 1em">3. Issue the following sequence
of commands to change to the mongo/ directory and build
mongosniff:</p>

<p style="margin-top: 1em">cd mongo <br>
scons mongosniff</p>

<p style="margin-top: 1em">NOTE: <br>
If you run scons mongosniff before installing libpcap you
must run scons clean before you can build mongosniff.</p>

<p style="margin-top: 1em">AUTHOR <br>
MongoDB Documentation Project</p>

<p style="margin-top: 1em">COPYRIGHT <br>
2011-2015</p>

<p style="margin-top: 1em">3.0 January 30, 2015
MONGOSNIFF(1)</p>
<hr>
</body>
</html>
