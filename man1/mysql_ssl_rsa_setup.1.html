<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MYSQL_SSL_RSA_SET(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MYSQL_SSL_RSA_SET(1)</td>
    <td class="head-vol">MySQL Database System</td>
    <td class="head-rtitle">MYSQL_SSL_RSA_SET(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mysql_ssl_rsa_setup - create SSL/RSA files
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 30.00ex; text-indent: -30.00ex;"><b>mysql_ssl_rsa_setup
  [</b> <b></b><i>options</i><b>]</b></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program creates the SSL certificate and key files and RSA key-pair files
  required to support secure connections using SSL and secure password exchange
  using RSA over unencrypted connections, if those files are missing.
  <b>mysql_ssl_rsa_setup</b> can also be used to create new SSL files if the
  existing ones have expired.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
<b>mysql_ssl_rsa_setup</b> uses the <b>openssl</b> command, so its use is
  contingent on having OpenSSL installed on your machine.
<div class="Pp"></div>
Another way to generate SSL and RSA files, for MySQL distributions compiled
  using OpenSSL, is to have the server generated them automatically. See
  Section&#x00A0;6.4.6.1, &#x201C;Creating SSL and RSA Certificates and Keys
  using MySQL&#x201D;.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Important</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
<b>mysql_ssl_rsa_setup</b> helps lower the barrier to using SSL by making it
  easier to generate the required files. However, certificates generated by
  <b>mysql_ssl_rsa_setup</b> are self-signed, which is not very secure. After
  you gain experience using the files created by <b>mysql_ssl_rsa_setup</b>,
  consider obtaining a CA certificate from a registered certificate authority.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
Invoke <b>mysql_ssl_rsa_setup</b> like this:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
shell&gt;  <b>mysql_ssl_rsa_setup [</b><b></b><i>options</i><b>]</b>
</pre>
</div>
<div class="Pp"></div>
Typical options are <b>--datadir</b> to specify where to create the files, and
  <b>--verbose</b> to see the <b>openssl</b> commands that
  <b>mysql_ssl_rsa_setup</b> executes.
<div class="Pp"></div>
<b>mysql_ssl_rsa_setup</b> attempts to create SSL and RSA files using a default
  set of file names. It works as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.<b>mysql_ssl_rsa_setup</b> checks for the
  <b>openssl</b> binary at the locations specified by the PATH environment
  variable. If <b>openssl</b> is not found, <b>mysql_ssl_rsa_setup</b> does
  nothing. If <b>openssl</b> is present, <b>mysql_ssl_rsa_setup</b> looks for
  default SSL and RSA files in the MySQL data directory specified by the
  <b>--datadir</b> option, or the compiled-in data directory if that option is
  not given.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.<b>mysql_ssl_rsa_setup</b> checks the data
  directory for SSL files with the following names:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ca.pem
server-cert.pem
server-key.pem
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.If any of those files are present,
  <b>mysql_ssl_rsa_setup</b> creates no SSL files. Otherwise, it invokes
  <b>openssl</b> to create them, plus some additional files:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
ca.pem               Self-signed CA certificate
ca-key.pem           CA private key
server-cert.pem      Server certificate
server-key.pem       Server private key
client-cert.pem      Client certificate
client-key.pem       Client private key
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
These files enable secure client connections using SSL; see
  Section&#x00A0;6.4.4, &#x201C;Configuring MySQL to Use Secure
  Connections&#x201D;.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 4.<b>mysql_ssl_rsa_setup</b> checks the data
  directory for RSA files with the following names:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
private_key.pem      Private member of private/public key pair
public_key.pem       Public member of private/public key pair
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 5.If any of these files are present,
  <b>mysql_ssl_rsa_setup</b> creates no RSA files. Otherwise, it invokes
  <b>openssl</b> to create them. These files enable secure password exchange
  using RSA over unencrypted connections for accounts authenticated by the
  sha256_password plugin; see Section&#x00A0;6.5.1.4, &#x201C;SHA-256 Pluggable
  Authentication&#x201D;.</div>
<div class="Pp"></div>
For information about the characteristics of files created by
  <b>mysql_ssl_rsa_setup</b>, see Section&#x00A0;6.4.6.1, &#x201C;Creating SSL
  and RSA Certificates and Keys using MySQL&#x201D;.
<div class="Pp"></div>
At startup, the MySQL server automatically uses the SSL files created by
  <b>mysql_ssl_rsa_setup</b> to enable SSL if no explicit SSL options are given
  other than <b>--ssl</b>. If you prefer to designate the files explicitly, use
  the <b>--ssl-ca</b>, <b>--ssl-cert</b>, and <b>--ssl-key</b> options at
  startup to name the ca.pem, server-cert.pem, and server-key.pem files,
  respectively.
<div class="Pp"></div>
The server also automatically uses the RSA files created by
  <b>mysql_ssl_rsa_setup</b> to enable RSA if no explicit RSA options are given.
<div class="Pp"></div>
If the server is SSL-enabled, clients need only use <b>--ssl</b> on the command
  line to use SSL for the connection. To specify certificate and key files
  explicitly, use the <b>--ssl-ca</b>, <b>--ssl-cert</b>, and <b>--ssl-key</b>
  options to name the ca.pem, client-cert.pem, and client-key.pem files,
  respectively. However, some additional client setup may be required first
  because <b>mysql_ssl_rsa_setup</b> by default creates those files in the data
  directory. The permissions for the data directory normally enable access only
  to the system account that runs the MySQL server, so client programs cannot
  use files located there. To make the files available, copy them to a directory
  that is readable (but <i>not</i> writable) by clients:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;For local clients, the MySQL
  installation directory can be used. For example, if the data directory is a
  subdirectory of the installation directory and your current location is the
  data directory, you can copy the files like this:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
shell&gt;  <b>cp ca.pem client-cert.pem client-key.pem ..</b>
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;For remote clients, distribute the
  files using a secure channel to ensure they are not tampered with during
  transit.</div>
<div class="Pp"></div>
If the SSL files used for a MySQL installation have expired, you can use
  <b>mysql_ssl_rsa_setup</b> to create new ones:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.Stop the server.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.Rename or remove the existing SSL files.
  You may wish to make a backup of them first. (The RSA files do not expire, so
  you need not remove them. <b>mysql_ssl_rsa_setup</b> will see that they exist
  and not overwrite them.)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.Run <b>mysql_ssl_rsa_setup</b> with the
  <b>--datadir</b> option to specify where to create the new files.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 4.Restart the server.</div>
<div class="Pp"></div>
<b>mysql_ssl_rsa_setup</b> supports the following command-line options, which
  can be specified on the command line or in the [mysql_ssl_rsa_setup],
  [mysql_install_db], and [mysqld] groups of an option file. For information
  about option files used by MySQL programs, see Section&#x00A0;4.2.6,
  &#x201C;Using Option Files&#x201D;.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--help</b>, <b>?</b>
<div style="height: 1.00em;">&#x00A0;</div>
Display a help message and exit.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--datadir=</b><b></b><i>dir_name</i>
<div style="height: 1.00em;">&#x00A0;</div>
The path to the directory that <b>mysql_ssl_rsa_setup</b> should check for
  default SSL and RSA files and in which it should create files if they are
  missing. The default is the compiled-in data directory.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--suffix=</b><b></b><i>str</i>
<div style="height: 1.00em;">&#x00A0;</div>
The suffix for the Common Name attribute in X509 certificates. The suffix value
  is limited to 17 characters. The default is based on the MySQL version
  number.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--uid=name</b>, <b>-v</b>
<div style="height: 1.00em;">&#x00A0;</div>
The name of the user who should be the owner of any created files. The value is
  a user name, not a numeric user ID. In the absence of this option, files
  created by <b>mysql_ssl_rsa_setup</b> are owned by the user who executes it.
  This option is valid only if you execute the program as root on a system that
  supports the chown() system call. This option was added in MySQL 5.7.8.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--verbose</b>, <b>-v</b>
<div style="height: 1.00em;">&#x00A0;</div>
Verbose mode. Produce more output about what the program does. For example, the
  program shows the <b>openssl</b> commands it runs, and produces output to
  indicate whether it skips SSL or RSA file creation because some default file
  already exists.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>--version</b>, <b>-V</b>
<div style="height: 1.00em;">&#x00A0;</div>
Display version information and exit.</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 1997, 2017, Oracle and/or its affiliates. All rights
  reserved.
<div class="Pp"></div>
This documentation is free software; you can redistribute it and/or modify it
  only under the terms of the GNU General Public License as published by the
  Free Software Foundation; version 2 of the License.
<div class="Pp"></div>
This documentation is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
  details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with the
  program; if not, write to the Free Software Foundation, Inc., 51 Franklin
  Street, Fifth Floor, Boston, MA 02110-1301 USA or see
  http://www.gnu.org/licenses/.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
For more information, please refer to the MySQL Reference Manual, which may
  already be installed locally and which is also available online at
  http://dev.mysql.com/doc/.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Oracle Corporation (http://dev.mysql.com/).</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/22/2017</td>
    <td class="foot-os">MySQL 5.7</td>
  </tr>
</table>
</body>
</html>
