<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DHCPD-POOLS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DHCPD-POOLS(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">DHCPD-POOLS(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dhcpd-pools - ISC dhcpd pools usage analysis
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dhcpd-pools</b> [options]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The program analyses ISC dhcpd shared network and pool usage and outputs the
  results in a format selected by user.
<h1 class="Sh" title="Sh" id="OUTPUT_FIELDS"><a class="selflink" href="#OUTPUT_FIELDS">OUTPUT
  FIELDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>shared net name</i></dt>
  <dd class="It-tag">Name of the shared-network for the range.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>first ip</i></dt>
  <dd class="It-tag">First IP in lease pool range.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>last ip</i></dt>
  <dd class="It-tag">Last IP in lease pool range.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>max</i></dt>
  <dd class="It-tag">Number of IPs which exist in a pool, shared network or all
      together.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>cur</i></dt>
  <dd class="It-tag">Number of leases currently in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>percent</i></dt>
  <dd class="It-tag">Percent of IPs currently in use compared to max.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>touch</i></dt>
  <dd class="It-tag">Number of IP's which appear in the lease file, but who's
      leases have expired. A touched IP is either expired or abandoned. The
      touched IP count is somewhat misleading when you try to determine if an IP
      pool is big enough; it is a better indicator of whether a pool is too
      large.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>t+c</i></dt>
  <dd class="It-tag">The sum of Touched and Currently in-use leases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>t+c perc</i></dt>
  <dd class="It-tag">Percent of IPs either touched or currently in use, compared
      to max.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>bu</i></dt>
  <dd class="It-tag">Failover pair can allocate these addresses. The count
      appears only if there is failover configuration.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>bu perc</i></dt>
  <dd class="It-tag">Percent of addresses that failover pair can allocate. The
      percent appears only if there is failover configuration.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--config</b>=<i>FILE</i></dt>
  <dd class="It-tag">Path to the dhcpd.conf file. If the dhcpd.conf has include
      files they can be analysed separately, that can be useful when trying to
      understand or monitor subset of data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--leases</b>=<i>FILE</i></dt>
  <dd class="It-tag">Path to the dhcpd.leases file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--sort</b>=<i>[nimcptTe]</i></dt>
  <dd class="It-tag">Sort ranges by chosen fields as a sorting keys. Keys weight
      from left to right, i.e., if more weighting keys are equal next one is
      used. The IP field is default sort key.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--reverse</b></dt>
  <dd class="It-tag">Sort results in reverse order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--format</b>=<i>[thHcxXjJ]</i></dt>
  <dd class="It-tag">Output format. Text (<i>t</i>). Full-html (<i>H</i>) page
      output. The (<i>c</i>) stands for comma-separated values. Output format
      xml (<i>x</i>) is similar to the dhcpstatus Perl module output. The
      extended xml (<i>X</i>) format will print ethernet address details. The
      (<i>j</i>) will output in json format, which can be extended with
      (<i>J</i>) to include ethernet address.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The default format is <i>text</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--output</b>=<i>FILE</i></dt>
  <dd class="It-tag"><i>File</i> where output is written. Default is
    stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b>, <b>--limit</b>=<i>NR</i></dt>
  <dd class="It-tag">The <i>NR</i> will limit what will be printed. Syntax is
      similar to <i>chmod</i>(1) permission string. The <i>NR</i> limit string
      uses two digits which vary between <i>0</i>&#x00A0;to<i>&#x00A0;7</i>. The
      first digit determines which headers to display, and the second digit
      determines which numeric analysis tables to include in the output. The
      following values are &quot;OR'd&quot; together to create the desired
      output. The default is <i>77</i>.</dd>
</dl>
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>01</b></dt>
  <dd class="It-tag">Print ranges</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>02</b></dt>
  <dd class="It-tag">Print shared networks</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>04</b></dt>
  <dd class="It-tag">Print total summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>10</b></dt>
  <dd class="It-tag">Print range header</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>20</b></dt>
  <dd class="It-tag">Print shared network header</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>40</b></dt>
  <dd class="It-tag">Print total summary header</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The output limit for total summary has special meaning in
      <b>--warning</b> and <b>--critical</b> alarming context. When the alarming
      is in use, and total is not wanted to be seen then in the case of alarming
      returning success nothing is printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--warning</b>=<i>percent</i></dt>
  <dd class="It-tag">Turn on alarm output format, and specify percentage number
      which will cause an alarm. If either a range or shared network will exceed
      warning level return value of the command is <b>1</b>. If only range
      monitoring is needed one can use limit option for scoping, for example
      <i>-L10</i>. To monitor shared network only the limit would be
      <i>-L20</i>. If warning percentage is not specified it defaults to
      <b>80</b>. The <i>percent</i> argument allows fractions, e.g., 88.8, to be
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--critical</b>=<i>percent</i></dt>
  <dd class="It-tag">The option is similar to warning, with exception of return
      value which is <b>2</b>. If critical percentage is not specified it
      defaults to <b>90</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--warn-count</b>=<i>number</i></dt>
  <dd class="It-tag">A <i>number</i> of free leases before alarm is raised. When
      specified both --warning <i>percent</i> and count <i>number</i> are
      required to be exceeded in order to alarm criteria being fulfilled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option is intented to be used in setup where very
      large and small shared-networks and ranges co-exists. In such environments
      percent based alarming can lead to either flood of alarms about small
      ranges, or way too great overhead of free addresses in large
      shared-networks. Suggested usage is to set percentage to a level that
      makes small ranges to ring, and set the count to match level when an
      enormous shared-network is too few free leases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to 2^32, that is size of entire IPv4 address
      space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--crit-count</b>=<i>number</i></dt>
  <dd class="It-tag">Same as --warn-count, but for critical alarms.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--snet-alarms</b></dt>
  <dd class="It-tag">Suppress range alarms that are part of shared networks. Use
      of this option will keep alarm criteria applied to ranges that are not
      part of shared-net along with shared-net alarms. This option may help
      reducing alarm noise for configurations that has lots of small ranges in
      big shared-networks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--minsize</b>=<i>size</i></dt>
  <dd class="It-tag">Ignore ranges and shared networks that are smaller or equal
      to the defined size. This option is meaningful only in context of
      alarming, and will intented to supress for example single host ranges. By
      default this option is not in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--version</b></dt>
  <dd class="It-tag">Print version information to standard output and exit
      successfully.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Print help to standard output and exit successfully.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Print ranges header, and analysis.</dt>
  <dd class="It-tag">$ dhcpd-pools -L 11 -c dhcpd.conf -l dhcpd.leases
    <div>&#x00A0;</div>
    Ranges:
    <div>&#x00A0;</div>
    shared net name [...]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Print shared networks and totals, both headers and
    results</dt>
  <dd class="It-tag">$ dhcpd-pools -L 66 -c dhcpd.conf -l dhcpd.leases shared
      net name
    <div>&#x00A0;</div>
    [...]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Alarming</dt>
  <dd class="It-tag">$ dhcpd-pools -c dhcpd.conf -l dhcpd.leases --critical 80.1
      --warning 75
    <div>&#x00A0;</div>
    CRITICAL: dhcpd-pools: Ranges; crit: 14 warn: 22 ok: 220 Shared nets; crit:
      1 warn: 0 ok: 4</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">$ dhcpd-pools -c dhcpd.conf -l dhcpd.leases -L 22
      --critical 70 --warning 50
    <div>&#x00A0;</div>
    [no-output]
    <div>&#x00A0;</div>
    Supress printing OK, and make alarm only to go off if shared networks exceed
      critial or warning levels.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/dhcp/dhcpd.conf</dt>
  <dd class="It-tag">ISC dhcpd configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/var/lib/dhcp/dhcpd.leases</dt>
  <dd class="It-tag">ISC dhcpd lease file.</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Original design by Sami Kerola.
<div>&#x00A0;</div>
XML support by Dominic Germain, Sogetel inc.
<div>&#x00A0;</div>
IPv6 support by Cheer Xiao.
<div class="Pp"></div>
The software has FreeBSD License.
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to <a class="Mt" title="Mt" href="mailto:kerolasa@iki.fi">Sami
  Kerola</a>
<div>&#x00A0;</div>
<a class="Lk" title="Lk" href="http://dhcpd-pools.sourceforge.net/">Home
  page</a>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>dhcpd.leases</b>(5), <b>dhcpd.conf</b>(5), <b>chmod</b>(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-09-04</td>
    <td class="foot-os">2.28</td>
  </tr>
</table>
</body>
</html>
