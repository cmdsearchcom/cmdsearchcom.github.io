<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ZSHCONTRIB(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ZSHCONTRIB(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">ZSHCONTRIB(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
zshcontrib - user contributions to zsh
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The Zsh source distribution includes a number of items contributed by the user
  community. These are not inherently a part of the shell, and some may not be
  available in every zsh installation. The most significant of these are
  documented here. For documentation on other contributed items such as shell
  functions, look for comments in the function source files.
<h1 class="Sh" title="Sh" id="UTILITIES"><a class="selflink" href="#UTILITIES">UTILITIES</a></h1>
<h2 class="Ss" title="Ss" id="Accessing_On-Line_Help"><a class="selflink" href="#Accessing_On-Line_Help">Accessing
  On-Line Help</a></h2>
The key sequence <b>ESC h</b> is normally bound by ZLE to execute the
  <b>run-help</b> widget (see <i>zshzle</i>(1)). This invokes the
  <b>run-help</b> command with the command word from the current input line as
  its argument. By default, <b>run-help</b> is an alias for the <b>man</b>
  command, so this often fails when the command word is a shell builtin or a
  user-defined function. By redefining the <b>run-help</b> alias, one can
  improve the on-line help provided by the shell.
<div class="Pp"></div>
The <b>helpfiles</b> utility, found in the <b>Util</b> directory of the
  distribution, is a Perl program that can be used to process the zsh manual to
  produce a separate help file for each shell builtin and for many other shell
  features as well. The autoloadable <b>run-help</b> function, found in
  <b>Functions/Misc</b>, searches for these helpfiles and performs several other
  tests to produce the most complete help possible for the command.
<div class="Pp"></div>
There may already be a directory of help files on your system; look in
  <b>/usr/share/zsh</b> or <b>/usr/local/share/zsh</b> and subdirectories below
  those, or ask your system administrator.
<div class="Pp"></div>
To create your own help files with <b>helpfiles</b>, choose or create a
  directory where the individual command help files will reside. For example,
  you might choose <b>~/zsh_help</b>. If you unpacked the zsh distribution in
  your home directory, you would use the commands:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>mkdir ~/zsh_help</b>
<b>cd ~/zsh_help</b>
<b>man zshall | colcrt - | \ </b>
<b>perl ~/zsh-5.0.2/Util/helpfiles</b>
</pre>
</div>
<div class="Pp"></div>
Next, to use the <b>run-help</b> function, you need to add lines something like
  the following to your <b>.zshrc</b> or equivalent startup file:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>unalias run-help</b>
<b>autoload run-help</b>
<b>HELPDIR=~/zsh_help</b>
</pre>
</div>
<div class="Pp"></div>
The <b>HELPDIR</b> parameter tells <b>run-help</b> where to look for the help
  files. If your system already has a help file directory installed, set
  <b>HELPDIR</b> to the path of that directory instead.
<div class="Pp"></div>
Note that in order for ` <b>autoload run-help</b>' to work, the <b>run-help</b>
  file must be in one of the directories named in your <b>fpath</b> array (see
  <i>zshparam</i>(1)). This should already be the case if you have a standard
  zsh installation; if it is not, copy <b>Functions/Misc/run-help</b> to an
  appropriate directory.
<h2 class="Ss" title="Ss" id="Recompiling_Functions"><a class="selflink" href="#Recompiling_Functions">Recompiling
  Functions</a></h2>
If you frequently edit your zsh functions, or periodically update your zsh
  installation to track the latest developments, you may find that function
  digests compiled with the <b>zcompile</b> builtin are frequently out of date
  with respect to the function source files. This is not usually a problem,
  because zsh always looks for the newest file when loading a function, but it
  may cause slower shell startup and function loading. Also, if a digest file is
  explicitly used as an element of <b>fpath</b>, zsh won't check whether any of
  its source files has changed.
<div class="Pp"></div>
The <b>zrecompile</b> autoloadable function, found in <b>Functions/Misc</b>, can
  be used to keep function digests up to date.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zrecompile</b> [ <b>-qt</b> ] [ <i>name</i> ... ]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zrecompile</b> [ <b>-qt</b> ] <b>-p</b> <i>args</i> [
    <b>-</b><b>-</b> <i>args</i> ... ]</dt>
  <dd class="It-tag">This tries to find <b>*.zwc</b> files and automatically
      re-compile them if at least one of the original files is newer than the
      compiled file. This works only if the names stored in the compiled files
      are full paths or are relative to the directory that contains the
      <b>.zwc</b> file.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
In the first form, each <i>name</i> is the name of a compiled file or a
  directory containing <b>*.zwc</b> files that should be checked. If no
  arguments are given, the directories and <b>*.zwc</b> files in <b>fpath</b>
  are used.
<div class="Pp"></div>
When <b>-t</b> is given, no compilation is performed, but a return status of
  zero (true) is set if there are files that need to be re-compiled and non-zero
  (false) otherwise. The <b>-q</b> option quiets the chatty output that
  describes what <b>zrecompile</b> is doing.
<div class="Pp"></div>
Without the <b>-t</b> option, the return status is zero if all files that needed
  re-compilation could be compiled and non-zero if compilation for at least one
  of the files failed.
<div class="Pp"></div>
If the <b>-p</b> option is given, the <i>args</i> are interpreted as one or more
  sets of arguments for <b>zcompile</b>, separated by `<b>-</b><b>-</b>'. For
  example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zrecompile -p \ </b>
<b>           -R ~/.zshrc -- \ </b>
<b>           -M ~/.zcompdump -- \ </b>
<b>           ~/zsh/comp.zwc ~/zsh/Completion/*/_*</b>
</pre>
</div>
<div class="Pp"></div>
This compiles <b>~/.zshrc</b> into <b>~/.zshrc.zwc</b> if that doesn't exist or
  if it is older than <b>~/.zshrc</b>. The compiled file will be marked for
  reading instead of mapping. The same is done for <b>~/.zcompdump</b> and
  <b>~/.zcompdump.zwc</b>, but this compiled file is marked for mapping. The
  last line re-creates the file <b>~/zsh/comp.zwc</b> if any of the files
  matching the given pattern is newer than it.
<div class="Pp"></div>
Without the <b>-p</b> option, <b>zrecompile</b> does not create function digests
  that do not already exist, nor does it add new functions to the digest.</div>
<div class="Pp"></div>
The following shell loop is an example of a method for creating function digests
  for all functions in your <b>fpath</b>, assuming that you have write
  permission to the directories:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>for ((i=1; i &lt;= $#fpath; ++i)); do</b>
<b>  dir=$fpath[i]</b>
<b>  zwc=${dir:t}.zwc</b>
<b>  if [[ $dir == (.|..) || $dir == (.|..)/* ]]; then</b>
<b>    continue</b>
<b>  fi</b>
<b>  files=($dir/*(N-.))</b>
<b>  if [[ -w $dir:h &amp;&amp; -n $files ]]; then</b>
<b>    files=(${${(M)files%/*/*}#/})</b>
<b>    if ( cd $dir:h &amp;&amp;</b>
<b>         zrecompile -p -U -z $zwc $files ); then</b>
<b>      fpath[i]=$fpath[i].zwc</b>
<b>    fi</b>
<b>  fi</b>
<b>done</b>
</pre>
</div>
<div class="Pp"></div>
The <b>-U</b> and <b>-z</b> options are appropriate for functions in the default
  zsh installation <b>fpath</b>; you may need to use different options for your
  personal function directories.
<div class="Pp"></div>
Once the digests have been created and your <b>fpath</b> modified to refer to
  them, you can keep them up to date by running <b>zrecompile</b> with no
  arguments.
<h2 class="Ss" title="Ss" id="Keyboard_Definition"><a class="selflink" href="#Keyboard_Definition">Keyboard
  Definition</a></h2>
The large number of possible combinations of keyboards, workstations, terminals,
  emulators, and window systems makes it impossible for zsh to have built-in key
  bindings for every situation. The <b>zkbd</b> utility, found in
  Functions/Misc, can help you quickly create key bindings for your
  configuration.
<div class="Pp"></div>
Run <b>zkbd</b> either as an autoloaded function, or as a shell script:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zsh -f ~/zsh-5.0.2/Functions/Misc/zkbd</b>
</pre>
</div>
<div class="Pp"></div>
When you run <b>zkbd</b>, it first asks you to enter your terminal type; if the
  default it offers is correct, just press return. It then asks you to press a
  number of different keys to determine characteristics of your keyboard and
  terminal; <b>zkbd</b> warns you if it finds anything out of the ordinary, such
  as a Delete key that sends neither <b>^H</b> nor <b>^?</b>.
<div class="Pp"></div>
The keystrokes read by <b>zkbd</b> are recorded as a definition for an
  associative array named <b>key</b>, written to a file in the subdirectory
  <b>.zkbd</b> within either your <b>HOME</b> or <b>ZDOTDIR</b> directory. The
  name of the file is composed from the <b>TERM</b>, <b>VENDOR</b> and
  <b>OSTYPE</b> parameters, joined by hyphens.
<div class="Pp"></div>
You may read this file into your <b>.zshrc</b> or another startup file with the
  ` <b>source</b>' or `<b>.</b>' commands, then reference the <b>key</b>
  parameter in bindkey commands, like this:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>source ${ZDOTDIR:-$HOME}/.zkbd/$TERM-$VENDOR-$OSTYPE</b>
<b>[[ -n ${key[Left]} ]] &amp;&amp; bindkey &quot;${key[Left]}&quot; backward-char</b>
<b>[[ -n ${key[Right]} ]] &amp;&amp; bindkey &quot;${key[Right]}&quot; forward-char</b>
<b># etc.</b>
</pre>
</div>
<div class="Pp"></div>
Note that in order for ` <b>autoload zkbd</b>' to work, the <b>zkdb</b> file
  must be in one of the directories named in your <b>fpath</b> array (see
  <i>zshparam</i>(1)). This should already be the case if you have a standard
  zsh installation; if it is not, copy <b>Functions/Misc/zkbd</b> to an
  appropriate directory.
<h2 class="Ss" title="Ss" id="Dumping_Shell_State"><a class="selflink" href="#Dumping_Shell_State">Dumping
  Shell State</a></h2>
Occasionally you may encounter what appears to be a bug in the shell,
  particularly if you are using a beta version of zsh or a development release.
  Usually it is sufficient to send a description of the problem to one of the
  zsh mailing lists (see <i>zsh</i>(1)), but sometimes one of the zsh developers
  will need to recreate your environment in order to track the problem down.
<div class="Pp"></div>
The script named <b>reporter</b>, found in the <b>Util</b> directory of the
  distribution, is provided for this purpose. (It is also possible to
  <b>autoload reporter</b>, but <b>reporter</b> is not installed in <b>fpath</b>
  by default.) This script outputs a detailed dump of the shell state, in the
  form of another script that can be read with ` <b>zsh -f</b>' to recreate that
  state.
<div class="Pp"></div>
To use <b>reporter</b>, read the script into your shell with the `<b>.</b>'
  command and redirect the output into a file:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>. ~/zsh-5.0.2/Util/reporter &gt; zsh.report</b>
</pre>
</div>
<div class="Pp"></div>
You should check the <b>zsh.report</b> file for any sensitive information such
  as passwords and delete them by hand before sending the script to the
  developers. Also, as the output can be voluminous, it's best to wait for the
  developers to ask for this information before sending it.
<div class="Pp"></div>
You can also use <b>reporter</b> to dump only a subset of the shell state. This
  is sometimes useful for creating startup files for the first time. Most of the
  output from reporter is far more detailed than usually is necessary for a
  startup file, but the <b>aliases</b>, <b>options</b>, and <b>zstyles</b>
  states may be useful because they include only changes from the defaults. The
  <b>bindings</b> state may be useful if you have created any of your own
  keymaps, because <b>reporter</b> arranges to dump the keymap creation commands
  as well as the bindings for every keymap.
<div class="Pp"></div>
As is usual with automated tools, if you create a startup file with
  <b>reporter</b>, you should edit the results to remove unnecessary commands.
  Note that if you're using the new completion system, you should <i>not</i>
  dump the <b>functions</b> state to your startup files with <b>reporter</b>;
  use the <b>compdump</b> function instead (see <i>zshcompsys</i>(1)).
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reporter</b> [ <i>state</i> ... ]</dt>
  <dd class="It-tag">Print to standard output the indicated subset of the
      current shell state. The <i>state</i> arguments may be one or more
    of:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>all</b></dt>
  <dd class="It-tag">Output everything listed below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>aliases</b></dt>
  <dd class="It-tag">Output alias definitions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bindings</b></dt>
  <dd class="It-tag">Output ZLE key maps and bindings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>completion</b></dt>
  <dd class="It-tag">Output old-style <b>compctl</b> commands. New completion is
      covered by <b>functions</b> and <b>zstyles</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>functions</b></dt>
  <dd class="It-tag">Output autoloads and function definitions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>limits</b></dt>
  <dd class="It-tag">Output <b>limit</b> commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>options</b></dt>
  <dd class="It-tag">Output <b>setopt</b> commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>styles</b></dt>
  <dd class="It-tag">Same as <b>zstyles</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>variables</b></dt>
  <dd class="It-tag">Output shell parameter assignments, plus <b>export</b>
      commands for any environment variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zstyles</b></dt>
  <dd class="It-tag">Output <b>zstyle</b> commands.</dd>
</dl>
<div class="Pp"></div>
If the <i>state</i> is omitted, <b>all</b> is assumed.</div>
<div class="Pp"></div>
With the exception of ` <b>all</b>', every <i>state</i> can be abbreviated by
  any prefix, even a single letter; thus <b>a</b> is the same as <b>aliases</b>,
  <b>z</b> is the same as <b>zstyles</b>, etc.
<h2 class="Ss" title="Ss" id="Manipulating_Hook_Functions"><a class="selflink" href="#Manipulating_Hook_Functions">Manipulating
  Hook Functions</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-zsh-hook</b> [-dD] <i>hook</i> <i>function</i></dt>
  <dd class="It-tag">Several functions are special to the shell, as described in
      the section SPECIAL FUNCTIONS, see <i>zshmisc</i>(1), in that they are
      automatic called at a specific point during shell execution. Each has an
      associated array consisting of names of functions to be called at the same
      point; these are so-called `hook functions'. The shell function
      <b>add-zsh-hook</b> provides a simple way of adding or removing functions
      from the array.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<i>hook</i> is one of <b>chpwd</b>, <b>periodic</b>, <b>precmd</b>,
  <b>preexec</b>, <b>zshaddhistory</b>, <b>zshexit</b>, or
  <b>zsh_directory_name</b>, the special functions in question. Note that
  <b>zsh_directory_name</b> is called in a different way from the other
  functions, but may still be manipulated as a hook.
<div class="Pp"></div>
<i>function</i> is name of an ordinary shell function. If no options are given
  this will be added to the array of functions to be executed in the given
  context.
<div class="Pp"></div>
If the option <b>-d</b> is given, the <i>function</i> is removed from the array
  of functions to be executed.
<div class="Pp"></div>
If the option <b>-D</b> is given, the <i>function</i> is treated as a pattern
  and any matching names of functions are removed from the array of functions to
  be executed.
<div class="Pp"></div>
The options <b>-U</b>, <b>-z</b> and <b>-k</b> are passed as arguments to
  <b>autoload</b> for <i>function</i>. For functions contributed with zsh, the
  options <b>-Uz</b> are appropriate.</div>
<h1 class="Sh" title="Sh" id="REMEMBERING_RECENT_DIRECTORIES"><a class="selflink" href="#REMEMBERING_RECENT_DIRECTORIES">REMEMBERING
  RECENT DIRECTORIES</a></h1>
The function <b>cdr</b> allows you to change the working directory to a previous
  working directory from a list maintained automatically. It is similar in
  concept to the directory stack controlled by the <b>pushd</b>, <b>popd</b> and
  <b>dirs</b> builtins, but is more configurable, and as it stores all entries
  in files it is maintained across sessions and (by default) between terminal
  emulators in the current session. (The <b>pushd</b> directory stack is not
  actually modified or used by <b>cdr</b> unless you configure it to do so as
  described in the configuration section below.)
<h2 class="Ss" title="Ss" id="Installation"><a class="selflink" href="#Installation">Installation</a></h2>
The system works by means of a hook function that is called every time the
  directory changes. To install the system, autoload the required functions and
  use the <b>add-zsh-hook</b> function described above:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -Uz chpwd_recent_dirs cdr add-zsh-hook</b>
<b>add-zsh-hook chpwd chpwd_recent_dirs</b>
</pre>
</div>
<div class="Pp"></div>
Now every time you change directly interactively, no matter which command you
  use, the directory to which you change will be remembered in most-recent-first
  order.
<h2 class="Ss" title="Ss" id="Use"><a class="selflink" href="#Use">Use</a></h2>
All direct user interaction is via the <b>cdr</b> function.
<div class="Pp"></div>
The argument to cdr is a number <i>N</i> corresponding to the <i>N</i>th most
  recently changed-to directory. 1 is the immediately preceding directory; the
  current directory is remembered but is not offered as a destination. Note that
  if you have multiple windows open 1 may refer to a directory changed to in
  another window; you can avoid this by having per-terminal files for storing
  directory as described for the <b>recent-dirs-file</b> style below.
<div class="Pp"></div>
If you set the <b>recent-dirs-default</b> style described below <b>cdr</b> will
  behave the same as <b>cd</b> if given a non-numeric argument, or more than one
  argument. The recent directory list is updated just the same however you
  change directory.
<div class="Pp"></div>
If the argument is omitted, 1 is assumed. This is similar to <b>pushd</b>'s
  behaviour of swapping the two most recent directories on the stack.
<div class="Pp"></div>
Completion for the argument to <b>cdr</b> is available if compinit has been run;
  menu selection is recommended, using:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':completion:*:*:cdr:*:*' menu selection</b>
</pre>
</div>
<div class="Pp"></div>
to allow you to cycle through recent directories; the order is preserved, so the
  first choice is the most recent directory before the current one. The verbose
  style is also recommended to ensure the directory is shown; this style is on
  by default so no action is required unless you have changed it.
<h2 class="Ss" title="Ss" id="Options"><a class="selflink" href="#Options">Options</a></h2>
The behaviour of <b>cdr</b> may be modified by the following options.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">lists the numbers and the corresponding directories in
      abbreviated form (i.e. with <b>~</b> substitution reapplied), one per
      line. The directories here are not quoted (this would only be an issue if
      a directory name contained a newline). This is used by the completion
      system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">sets the variable <b>reply</b> to the current set of
      directories. Nothing is printed and the directory is not changed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag">allows you to edit the list of directories, one per line.
      The list can be edited to any extent you like; no sanity checking is
      performed. Completion is available. No quoting is necessary (except for
      newlines, where I have in any case no sympathy); directories are in
      unabbreviated from and contain an absolute path, i.e. they start with
      <b>/</b>. Usually the first entry should be left as the current
    directory.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Configuration"><a class="selflink" href="#Configuration">Configuration</a></h2>
Configuration is by means of the styles mechanism that should be familiar from
  completion; if not, see the description of the <b>zstyle</b> command in see
  <i>zshmodules</i>(1). The context for setting styles should be
  <b>':chpwd:*'</b> in case the meaning of the context is extended in future,
  for example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':chpwd:*' recent-dirs-max 0</b>
</pre>
</div>
<div class="Pp"></div>
sets the value of the <b>recent-dirs-max</b> style to 0. In practice the style
  name is specific enough that a context of '*' should be fine.
<div class="Pp"></div>
An exception is <b>recent-dirs-insert</b>, which is used exclusively by the
  completion system and so has the usual completion system context (
  <b>':completion:*'</b> if nothing more specific is needed), though again
  <b>'*'</b> should be fine in practice.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-default</b></dt>
  <dd class="It-tag">If true, and the command is expecting a recent directory
      index, and either there is more than one argument or the argument is not
      an integer, then fall through to &quot;cd&quot;. This allows the lazy to
      use only one command for directory changing. Completion recognises this,
      too; see recent-dirs-insert for how to control completion when this option
      is in use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-file</b></dt>
  <dd class="It-tag">The file where the list of directories is saved. The
      default is <b>${ZDOTDIR:-$HOME}/.chpwd-recent-dirs</b>, i.e. this is in
      your home directory unless you have set the variable <b>ZDOTDIR</b> to
      point somewhere else. Directory names are saved in
      <b>$'</b><i>...</i><b>'</b> quoted form, so each line in the file can be
      supplied directly to the shell as an argument.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The value of this style may be an array. In this case, the first file in the
  list will always be used for saving directories while any other files are left
  untouched. When reading the recent directory list, if there are fewer than the
  maximum number of entries in the first file, the contents of later files in
  the array will be appended with duplicates removed from the list shown. The
  contents of the two files are not sorted together, i.e. all the entries in the
  first file are shown first. The special value <b>+</b> can appear in the list
  to indicate the default file should be read at that point. This allows effects
  like the following:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':chpwd:*' recent-dirs-file \ </b>
<b>~/.chpwd-recent-dirs-${TTY##*/} +</b>
</pre>
</div>
<div class="Pp"></div>
Recent directories are read from a file numbered according to the terminal. If
  there are insufficient entries the list is supplemented from the default file.
<div class="Pp"></div>
It is possible to use <b>zstyle -e</b> to make the directory configurable at run
  time:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle -e ':chpwd:*' recent-dirs-file pick-recent-dirs-file</b>
<b>pick-recent-dirs-file() {</b>
<b>  if [[ $PWD = ~/text/writing(|/*) ]]; then</b>
<b>    reply=(~/.chpwd-recent-dirs-writing)</b>
<b>  else</b>
<b>    reply=(+)</b>
<b>  fi</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
In this example, if the current directory is <b>~/text/writing</b> or a
  directory under it, then use a special file for saving recent directories,
  else use the default.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-insert</b></dt>
  <dd class="It-tag">Used by completion. If <b>recent-dirs-default</b> is true,
      then setting this to <b>true</b> causes the actual directory, rather than
      its index, to be inserted on the command line; this has the same effect as
      using the corresponding index, but makes the history clearer and the line
      easier to edit. With this setting, if part of an argument was already
      typed, normal directory completion rather than recent directory completion
      is done; this is because recent directory completion is expected to be
      done by cycling through entries menu fashion.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If the value of the style is <b>always</b>, then only recent directories will be
  completed; in that case, use the <b>cd</b> command when you want to complete
  other directories.
<div class="Pp"></div>
If the value is <b>fallback</b>, recent directories will be tried first, then
  normal directory completion is performed if recent directory completion failed
  to find a match.
<div class="Pp"></div>
Finally, if the value is <b>both</b> then both sets of completions are
  presented; the usual tag mechanism can be used to distinguish results, with
  recent directories tagged as <b>recent-dirs</b>. Note that the recent
  directories inserted are abbreviated with directory names where
  appropriate.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-max</b></dt>
  <dd class="It-tag">The maximum number of directories to save to the file. If
      this is zero or negative there is no maximum. The default is 20. Note this
      includes the current directory, which isn't offered, so the highest number
      of directories you will be offered is one less than the maximum.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-prune</b></dt>
  <dd class="It-tag">This style is an array determining what directories should
      (or should not) be added to the recent list. Elements of the array can
      include:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>parent</b></dt>
  <dd class="It-tag">Prune parents (more accurately, ancestors) from the recent
      list. If present, changing directly down by any number of directories
      causes the current directory to be overwritten. For example, changing from
      ~pws to ~pws/some/other/dir causes ~pws not to be left on the recent
      directory stack. This only applies to direct changes to descendant
      directories; earlier directories on the list are not pruned. For example,
      changing from ~pws/yet/another to ~pws/some/other/dir does not cause ~pws
      to be pruned.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pattern:</b><i>pattern</i><b></b><i></i></dt>
  <dd class="It-tag">Gives a zsh pattern for directories that should not be
      added to the recent list (if not already there). This element can be
      repeated to add different patterns. For example,
      <b>'pattern:/tmp(|/*)'</b> stops <b>/tmp</b> or its descendants from being
      added. The <b>EXTENDED_GLOB</b> option is always turned on for these
      patterns.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>recent-dirs-pushd</b></dt>
  <dd class="It-tag">If set to true, <b>cdr</b> will use <b>pushd</b> instead of
      <b>cd</b> to change the directory, so the directory is saved on the
      directory stack. As the directory stack is completely separate from the
      list of files saved by the mechanism used in this file there is no obvious
      reason to do this.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Use_with_dynamic_directory_naming"><a class="selflink" href="#Use_with_dynamic_directory_naming">Use
  with dynamic directory naming</a></h2>
It is possible to refer to recent directories using the dynamic directory name
  syntax by using the supplied function <b>zsh_directory_name_cdr</b> a hook:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -Uz add-zsh-hook</b>
<b>add-zsh-hook -Uz zsh_directory_name zsh_directory_name_cdr</b>
</pre>
</div>
<div class="Pp"></div>
When this is done, <b>~[1]</b> will refer to the most recent directory other
  than $PWD, and so on. Completion after <b>~[</b><i>...</i> also works.
<h2 class="Ss" title="Ss" id="Details_of_directory_handling"><a class="selflink" href="#Details_of_directory_handling">Details
  of directory handling</a></h2>
This section is for the curious or confused; most users will not need to know
  this information.
<div class="Pp"></div>
Recent directories are saved to a file immediately and hence are preserved
  across sessions. Note currently no file locking is applied: the list is
  updated immediately on interactive commands and nowhere else (unlike history),
  and it is assumed you are only going to change directory in one window at
  once. This is not safe on shared accounts, but in any case the system has
  limited utility when someone else is changing to a different set of
  directories behind your back.
<div class="Pp"></div>
To make this a little safer, only directory changes instituted from the command
  line, either directly or indirectly through shell function calls (but not
  through subshells, evals, traps, completion functions and the like) are saved.
  Shell functions should use <b>cd -q</b> or <b>pushd -q</b> to avoid side
  effects if the change to the directory is to be invisible at the command line.
  See the contents of the function <b>chpwd_recent_dirs</b> for more details.
<h1 class="Sh" title="Sh" id="GATHERING_INFORMATION_FROM_VERSION_CONTROL_SYSTEMS"><a class="selflink" href="#GATHERING_INFORMATION_FROM_VERSION_CONTROL_SYSTEMS">GATHERING
  INFORMATION FROM VERSION CONTROL SYSTEMS</a></h1>
In a lot of cases, it is nice to automatically retrieve information from version
  control systems (VCSs), such as subversion, CVS or git, to be able to provide
  it to the user; possibly in the user's prompt. So that you can instantly tell
  which branch you are currently on, for example.
<div class="Pp"></div>
In order to do that, you may use the <b>vcs_info</b> function.
<div class="Pp"></div>
The following VCSs are supported, showing the abbreviated name by which they are
  referred to within the system:
<dl class="Bl-tag">
  <dt class="It-tag">Bazaar (<b>bzr</b>)</dt>
  <dd class="It-tag">http://bazaar-vcs.org/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Codeville (<b>cdv</b>)</dt>
  <dd class="It-tag">http://codeville.org/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Concurrent Versioning System (<b>cvs</b>)</dt>
  <dd class="It-tag">http://www.nongnu.org/cvs/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Darcs (<b>darcs</b>)</dt>
  <dd class="It-tag">http://darcs.net/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Fossil (<b>fossil</b>)</dt>
  <dd class="It-tag">http://fossil-scm.org/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Git (<b>git</b>)</dt>
  <dd class="It-tag">http://git-scm.com/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GNU arch (<b>tla</b>)</dt>
  <dd class="It-tag">http://www.gnu.org/software/gnu-arch/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Mercurial (<b>hg</b>)</dt>
  <dd class="It-tag">http://mercurial.selenic.com/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Monotone (<b>mtn</b>)</dt>
  <dd class="It-tag">http://monotone.ca/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Perforce (<b>p4</b>)</dt>
  <dd class="It-tag">http://www.perforce.com/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Subversion (<b>svn</b>)</dt>
  <dd class="It-tag">http://subversion.tigris.org/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SVK (<b>svk</b>)</dt>
  <dd class="It-tag">http://svk.bestpractical.com/</dd>
</dl>
<div class="Pp"></div>
There is also support for the patch management system <b>quilt</b>
  (http://savannah.nongnu.org/projects/quilt). See <b>Quilt Support</b> below
  for details.
<div class="Pp"></div>
To load <b>vcs_info</b>:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -Uz vcs_info</b>
</pre>
</div>
<div class="Pp"></div>
It can be used in any existing prompt, because it does not require any
  <b>$psvar</b> entries to be left available.
<h2 class="Ss" title="Ss" id="Quickstart"><a class="selflink" href="#Quickstart">Quickstart</a></h2>
To get this feature working quickly (including colors), you can do the following
  (assuming, you loaded <b>vcs_info</b> properly - see above):
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' actionformats \ </b>
<b>    '%F{5}(%f%s%F{5})%F{3}-%F{5}[%F{2}%b%F{3}|%F{1}%a%F{5}]%f '</b>
<b>zstyle ':vcs_info:*' formats       \ </b>
<b>    '%F{5}(%f%s%F{5})%F{3}-%F{5}[%F{2}%b%F{5}]%f '</b>
<b>zstyle ':vcs_info:(sv[nk]|bzr):*' branchformat '%b%F{1}:%F{3}%r'</b>
<b>precmd () { vcs_info }</b>
<b>PS1='%F{5}[%F{2}%n%F{5}] %F{3}%3~ ${vcs_info_msg_0_}%f%# '</b>
</pre>
</div>
<div class="Pp"></div>
Obviously, the last two lines are there for demonstration. You need to call
  <b>vcs_info</b> from your <b>precmd</b> function. Once that is done you need a
  <b>single quoted</b> <b>'${vcs_info_msg_0_}'</b> in your prompt.
<div class="Pp"></div>
To be able to use <b>'${vcs_info_msg_0_}'</b> directly in your prompt like this,
  you will need to have the <b>PROMPT_SUBST</b> option enabled.
<div class="Pp"></div>
Now call the <b>vcs_info_printsys</b> utility from the command line:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>% vcs_info_printsys</b>
<b>## list of supported version control backends:</b>
<b>## disabled systems are prefixed by a hash sign (#)</b>
<b>bzr</b>
<b>cdv</b>
<b>cvs</b>
<b>darcs</b>
<b>fossil</b>
<b>git</b>
<b>hg</b>
<b>mtn</b>
<b>p4</b>
<b>svk</b>
<b>svn</b>
<b>tla</b>
<b>## flavours (cannot be used in the enable or disable styles; they</b>
<b>## are enabled and disabled with their master [git-svn -&gt; git])</b>
<b>## they *can* be used in contexts: ':vcs_info:git-svn:*'.</b>
<b>git-p4</b>
<b>git-svn</b>
<b>hg-git</b>
<b>hg-hgsubversion</b>
<b>hg-hgsvn</b>
</pre>
</div>
<div class="Pp"></div>
You may not want all of these because there is no point in running the code to
  detect systems you do not use. So there is a way to disable some backends
  altogether:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' disable bzr cdv darcs mtn svk tla</b>
</pre>
</div>
<div class="Pp"></div>
You may also pick a few from that list and enable only those:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' enable git cvs svn</b>
</pre>
</div>
<div class="Pp"></div>
If you rerun <b>vcs_info_printsys</b> after one of these commands, you will see
  the backends listed in the <b>disable</b> style (or backends not in the
  <b>enable</b> style - if you used that) marked as disabled by a hash sign.
  That means the detection of these systems is skipped <i>completely</i>. No
  wasted time there.
<h2 class="Ss" title="Ss" id="Configuration"><a class="selflink" href="#Configuration">Configuration</a></h2>
The <b>vcs_info</b> feature can be configured via <b>zstyle</b>.
<div class="Pp"></div>
First, the context in which we are working:
<div style="margin-left: 5.00ex;">
<pre>
<b>:vcs_info:</b><i>vcs-string</i><b>:</b><i>user-context</i><b>:</b><i>repo-root-name</i><b></b><i></i>
</pre>
</div>
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>vcs-string</i></dt>
  <dd class="It-tag">is one of: <b>git</b>, <b>git-svn</b>, <b>git-p4</b>,
      <b>hg</b>, <b>hg-git</b>, <b>hg-hgsubversion</b>, <b>hg-hgsvn</b>,
      <b>darcs</b>, <b>bzr</b>, <b>cdv</b>, <b>mtn</b>, <b>svn</b>, <b>cvs</b>,
      <b>svk</b>, <b>tla</b>, <b>p4</b> or <b>fossil</b>. When hooks are active
      the hooks name is added after a `+'. (See <b>Hooks in vcs_info</b>
    below.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>user-context</i></dt>
  <dd class="It-tag">is a freely configurable string, assignable by the user as
      the first argument to <b>vcs_info</b> (see its description below).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>repo-root-name</i></dt>
  <dd class="It-tag">is the name of a repository in which you want a style to
      match. So, if you want a setting specific to <b>/usr/src/zsh</b>, with
      that being a CVS checkout, you can set <i>repo-root-name</i> to <b>zsh</b>
      to make it so.</dd>
</dl>
<div class="Pp"></div>
There are three special values for <i>vcs-string</i>: The first is named
  <b>-init-</b>, that is in effect as long as there was no decision what VCS
  backend to use. The second is <b>-preinit-</b>; it is used <i>before</i>
  <b>vcs_info</b> is run, when initializing the data exporting variables. The
  third special value is <b>formats</b> and is used by the
  <b>vcs_info_lastmsg</b> for looking up its styles.
<div class="Pp"></div>
The initial value of <i>repo-root-name</i> is <b>-all-</b> and it is replaced
  with the actual name, as soon as it is known. Only use this part of the
  context for defining the <b>formats</b>, <b>actionformats</b> or
  <b>branchformat</b> styles, as it is guaranteed that <i>repo-root-name</i> is
  set up correctly for these only. For all other styles, just use <b>'*'</b>
  instead.
<div class="Pp"></div>
There are two pre-defined values for <i>user-context</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><b>default</b></dt>
  <dd class="It-tag">the one used if none is specified</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>command</b></dt>
  <dd class="It-tag">used by vcs_info_lastmsg to lookup its styles</dd>
</dl>
<div class="Pp"></div>
You can of course use <b>':vcs_info:*'</b> to match all VCSs in all
  user-contexts at once.
<div class="Pp"></div>
This is a description of all styles that are looked up.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>formats</b></dt>
  <dd class="It-tag">A list of formats, used when actionformats is not used
      (which is most of the time).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>actionformats</b></dt>
  <dd class="It-tag">A list of formats, used if there is a special action going
      on in your current repository; like an interactive rebase or a merge
      conflict.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>branchformat</b></dt>
  <dd class="It-tag">Some backends replace <b>%b</b> in the formats and
      actionformats styles above, not only by a branch name but also by a
      revision number. This style lets you modify how that string should
    look.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nvcsformats</b></dt>
  <dd class="It-tag">These &quot;formats&quot; are exported when we didn't
      detect a version control system for the current directory or
      <b>vcs_info</b> was disabled. This is useful if you want <b>vcs_info</b>
      to completely take over the generation of your prompt. You would do
      something like <b>PS1='${vcs_info_msg_0_}'</b> to accomplish that.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hgrevformat</b></dt>
  <dd class="It-tag"><b>hg</b> uses both a hash and a revision number to
      reference a specific changeset in a repository. With this style you can
      format the revision string (see <b>branchformat</b>) to include either or
      both. It's only useful when <b>get-revision</b> is true. Note, the full
      40-character revision id is not available (except when using the
      <b>use-simple</b> option) because executing hg more than once per prompt
      is too slow; you may customize this behavior using hooks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>max-exports</b></dt>
  <dd class="It-tag">Defines the maximum number of <b>vcs_info_msg_*_</b>
      variables <b>vcs_info</b> will export.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>enable</b></dt>
  <dd class="It-tag">A list of backends you want to use. Checked in the
      <b>-init-</b> context. If this list contains an item called <b>NONE</b> no
      backend is used at all and <b>vcs_info</b> will do nothing. If this list
      contains <b>ALL</b>, <b>vcs_info</b> will use all known backends. Only
      with <b>ALL</b> in <b>enable</b> will the <b>disable</b> style have any
      effect. <b>ALL</b> and <b>NONE</b> are case insensitive.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disable</b></dt>
  <dd class="It-tag">A list of VCSs you don't want <b>vcs_info</b> to test for
      repositories (checked in the <b>-init-</b> context, too). Only used if
      <b>enable</b> contains <b>ALL</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disable-patterns</b></dt>
  <dd class="It-tag">A list of patterns that are checked against <b>$PWD</b>. If
      a pattern matches, <b>vcs_info</b> will be disabled. This style is checked
      in the <b>:vcs_info:-init-:*:-all-</b> context.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Say, <b>~/.zsh</b> is a directory under version control, in which you do not
  want <b>vcs_info</b> to be active, do:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' disable-patterns &quot;$HOME/.zsh(|/*)&quot;</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-quilt</b></dt>
  <dd class="It-tag">If enabled, the <b>quilt</b> support code is active in
      `addon' mode. See <b>Quilt Support</b> for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quilt-standalone</b></dt>
  <dd class="It-tag">If enabled, `standalone' mode detection is attempted if no
      VCS is active in a given directory. See <b>Quilt Support</b> for
    details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quilt-patch-dir</b></dt>
  <dd class="It-tag">Overwrite the value of the <b>$QUILT_PATCHES</b>
      environment variable. See <b>Quilt Support</b> for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quiltcommand</b></dt>
  <dd class="It-tag">When <b>quilt</b> itself is called in quilt support the
      value of this style is used as the command name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>check-for-changes</b></dt>
  <dd class="It-tag">If enabled, this style causes the <b>%c</b> and <b>%u</b>
      format escapes to show when the working directory has uncommitted changes.
      The strings displayed by these escapes can be controlled via the
      <b>stagedstr</b> and <b>unstagedstr</b> styles. The only backends that
      currently support this option are <b>git</b> and <b>hg</b> (<b>hg</b> only
      supports unstaged).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
For this style to be evaluated with the <b>hg</b> backend, the
  <b>get-revision</b> style needs to be set and the <b>use-simple</b> style
  needs to be unset. The latter is the default; the former is not.
<div class="Pp"></div>
Note, the actions taken if this style is enabled are potentially expensive
  (read: they may be slow, depending on how big the current repository is).
  Therefore, it is disabled by default.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stagedstr</b></dt>
  <dd class="It-tag">This string will be used in the <b>%c</b> escape if there
      are staged changes in the repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unstagedstr</b></dt>
  <dd class="It-tag">This string will be used in the <b>%u</b> escape if there
      are unstaged changes in the repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>command</b></dt>
  <dd class="It-tag">This style causes <b>vcs_info</b> to use the supplied
      string as the command to use as the VCS's binary. Note, that setting this
      in ':vcs_info:*' is not a good idea.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If the value of this style is empty (which is the default), the used binary name
  is the name of the backend in use (e.g. <b>svn</b> is used in an <b>svn</b>
  repository).
<div class="Pp"></div>
The <b>repo-root-name</b> part in the context is always the default <b>-all-</b>
  when this style is looked up.
<div class="Pp"></div>
For example, this style can be used to use binaries from non-default
  installation directories. Assume, <b>git</b> is installed in /usr/bin but your
  sysadmin installed a newer version in /usr/bin/local. Instead of changing the
  order of your <b>$PATH</b> parameter, you can do this:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:git:*:-all-' command /usr/local/bin/git</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-server</b></dt>
  <dd class="It-tag">This is used by the Perforce backend (<b>p4</b>) to decide
      if it should contact the Perforce server to find out if a directory is
      managed by Perforce. This is the only reliable way of doing this, but runs
      the risk of a delay if the server name cannot be found. If the server
      (more specifically, the <b>host</b><b>:</b><b>port</b> pair describing the
      server) cannot be contacted, its name is put into the associative array
      <b>vcs_info_p4_dead_servers</b> and is not contacted again during the
      session until it is removed by hand. If you do not set this style, the
      <b>p4</b> backend is only usable if you have set the environment variable
      <b>P4CONFIG</b> to a file name and have corresponding files in the root
      directories of each Perforce client. See comments in the function
      <b>VCS_INFO_detect_p4</b> for more detail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-simple</b></dt>
  <dd class="It-tag">If there are two different ways of gathering information,
      you can select the simpler one by setting this style to true; the default
      is to use the not-that-simple code, which is potentially a lot slower but
      might be more accurate in all possible cases. This style is used by the
      <b>bzr</b> and <b>hg</b> backends. In the case of <b>hg</b> it will invoke
      the external hexdump program to parse the binary dirstate cache file; this
      method will not return the local revision number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-revision</b></dt>
  <dd class="It-tag">If set to true, vcs_info goes the extra mile to figure out
      the revision of a repository's work tree (currently for the <b>git</b> and
      <b>hg</b> backends, where this kind of information is not always vital).
      For <b>git</b>, the hash value of the currently checked out commit is
      available via the <b>%i</b> expansion. With <b>hg</b>, the local revision
      number and the corresponding global hash are available via <b>%i</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-mq</b></dt>
  <dd class="It-tag">If set to true, the <b>hg</b> backend will look for a
      Mercurial Queue ( <b>mq</b>) patch directory. Information will be
      available via the ` <b>%m</b>' replacement.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-bookmarks</b></dt>
  <dd class="It-tag">If set to true, the <b>hg</b> backend will try to get a
      list of current bookmarks. They will be available via the ` <b>%m</b>'
      replacement.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-prompt-escapes</b></dt>
  <dd class="It-tag">Determines if we assume that the assembled string from
      <b>vcs_info</b> includes prompt escapes. (Used by
      <b>vcs_info_lastmsg</b>.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>debug</b></dt>
  <dd class="It-tag">Enable debugging output to track possible problems.
      Currently this style is only used by <b>vcs_info</b>'s hooks system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hooks</b></dt>
  <dd class="It-tag">A list style that defines hook-function names. See <b>Hooks
      in vcs_info</b> below for details.</dd>
</dl>
<div class="Pp"></div>
The default values for these styles in all contexts are:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>formats</b></dt>
  <dd class="It-tag">&quot; (%s)-[%b]%u%c-&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>actionformats</b></dt>
  <dd class="It-tag">&quot; (%s)-[%b|%a]%u%c-&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>branchformat</b></dt>
  <dd class="It-tag">&quot;%b:%r&quot; (for bzr, svn, svk and hg)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nvcsformats</b></dt>
  <dd class="It-tag">&quot;&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hgrevformat</b></dt>
  <dd class="It-tag">&quot;%r:%h&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>max-exports</b></dt>
  <dd class="It-tag">2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>enable</b></dt>
  <dd class="It-tag">ALL</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disable</b></dt>
  <dd class="It-tag">(empty list)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disable-patterns</b></dt>
  <dd class="It-tag">(empty list)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>check-for-changes</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stagedstr</b></dt>
  <dd class="It-tag">(string: &quot;S&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unstagedstr</b></dt>
  <dd class="It-tag">(string: &quot;U&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>command</b></dt>
  <dd class="It-tag">(empty string)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-server</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-simple</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-revision</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-mq</b></dt>
  <dd class="It-tag">true</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-bookmarks</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-prompt-escapes</b></dt>
  <dd class="It-tag">true</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>debug</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hooks</b></dt>
  <dd class="It-tag">(empty list)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use-quilt</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quilt-standalone</b></dt>
  <dd class="It-tag">false</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quilt-patch-dir</b></dt>
  <dd class="It-tag">empty - use <b>$QUILT_PATCHES</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quiltcommand</b></dt>
  <dd class="It-tag">quilt</dd>
</dl>
<div class="Pp"></div>
In normal <b>formats</b> and <b>actionformats</b> the following replacements are
  done:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%s</b></dt>
  <dd class="It-tag">The VCS in use (git, hg, svn, etc.).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%b</b></dt>
  <dd class="It-tag">Information about the current branch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%a</b></dt>
  <dd class="It-tag">An identifier that describes the action. Only makes sense
      in <b>actionformats</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%i</b></dt>
  <dd class="It-tag">The current revision number or identifier. For <b>hg</b>
      the <b>hgrevformat</b> style may be used to customize the output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%c</b></dt>
  <dd class="It-tag">The string from the <b>stagedstr</b> style if there are
      staged changes in the repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%u</b></dt>
  <dd class="It-tag">The string from the <b>unstagedstr</b> style if there are
      unstaged changes in the repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%R</b></dt>
  <dd class="It-tag">The base directory of the repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%r</b></dt>
  <dd class="It-tag">The repository name. If <b>%R</b> is
      <b>/foo/bar/repoXY</b>, <b>%r</b> is <b>repoXY</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%S</b></dt>
  <dd class="It-tag">A subdirectory within a repository. If <b>$PWD</b> is
      <b>/foo/bar/repoXY/beer/tasty</b>, <b>%S</b> is <b>beer/tasty</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%m</b></dt>
  <dd class="It-tag">A &quot;misc&quot; replacement. It is at the discretion of
      the backend to decide what this replacement expands to. It is currently
      used by the <b>hg</b> and <b>git</b> backends to display patch information
      from the <b>mq</b> and <b>stgit</b> extensions.</dd>
</dl>
<div class="Pp"></div>
In <b>branchformat</b> these replacements are done:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%b</b></dt>
  <dd class="It-tag">The branch name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%r</b></dt>
  <dd class="It-tag">The current revision number or the <b>hgrevformat</b> style
      for <b>hg</b>.</dd>
</dl>
<div class="Pp"></div>
In <b>hgrevformat</b> these replacements are done:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%r</b></dt>
  <dd class="It-tag">The current local revision number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%h</b></dt>
  <dd class="It-tag">The current global revision identifier.</dd>
</dl>
<div class="Pp"></div>
In <b>patch-format</b> and <b>nopatch-format</b> these replacements are done:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%p</b></dt>
  <dd class="It-tag">The name of the top-most applied patch
      (<b>applied-string</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%u</b></dt>
  <dd class="It-tag">The number of unapplied patches
    (<b>unapplied-string</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%n</b></dt>
  <dd class="It-tag">The number of applied patches.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%c</b></dt>
  <dd class="It-tag">The number of unapplied patches.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%a</b></dt>
  <dd class="It-tag">The number of all patches.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%g</b></dt>
  <dd class="It-tag">The names of active <b>mq</b> guards (<b>hg</b>
    backend).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%G</b></dt>
  <dd class="It-tag">The number of active <b>mq</b> guards (<b>hg</b>
    backend).</dd>
</dl>
<div class="Pp"></div>
Not all VCS backends have to support all replacements. For <b>nvcsformats</b> no
  replacements are performed at all, it is just a string.
<h2 class="Ss" title="Ss" id="Oddities"><a class="selflink" href="#Oddities">Oddities</a></h2>
If you want to use the <b>%b</b> (bold off) prompt expansion in <b>formats</b>,
  which expands <b>%b</b> itself, use <b>%%b</b>. That will cause the
  <b>vcs_info</b> expansion to replace <b>%%b</b> with <b>%b</b>, so that zsh's
  prompt expansion mechanism can handle it. Similarly, to hand down <b>%b</b>
  from <b>branchformat</b>, use <b>%%%%b</b>. Sorry for this inconvenience, but
  it cannot be easily avoided. Luckily we do not clash with a lot of prompt
  expansions and this only needs to be done for those.
<h2 class="Ss" title="Ss" id="Quilt_Support"><a class="selflink" href="#Quilt_Support">Quilt
  Support</a></h2>
<b>Quilt</b> is not a version control system, therefore this is not implemented
  as a backend. It can help keeping track of a series of patches. People use it
  to keep a set of changes they want to use on top of software packages (which
  is tightly integrated into the package build process - the Debian project does
  this for a large number of packages). Quilt can also help individual
  developers keep track of their own patches on top of real version control
  systems.
<div class="Pp"></div>
The <b>vcs_info</b> integration tries to support both ways of using quilt by
  having two slightly different modes of operation: `addon' mode and
  `standalone' mode).
<div class="Pp"></div>
For `addon' mode to become active <b>vcs_info</b> must have already detected a
  real version control system controlling the directory. If that is the case, a
  directory that holds quilt's patches needs to be found. That directory is
  configurable via the ` <b>QUILT_PATCHES</b>' environment variable. If that
  variable exists its value is used, otherwise the value ` <b>patches</b>' is
  assumed. The value from <b>$QUILT_PATCHES</b> can be overwritten using the
  <b>`quilt-patches'</b> style. (Note: you can use <b>vcs_info</b> to keep the
  value of <b>$QUILT_PATCHES</b> correct all the time via the <b>post-quilt</b>
  hook).
<div class="Pp"></div>
When the directory in question is found, quilt is assumed to be active. To
  gather more information, <b>vcs_info</b> looks for a directory called `.pc';
  Quilt uses that directory to track its current state. If this directory does
  not exist we know that quilt has not done anything to the working directory
  (read: no patches have been applied yet).
<div class="Pp"></div>
If patches are applied, <b>vcs_info</b> will try to find out which. If you want
  to know which patches of a series are not yet applied, you need to activate
  the <b>get-unapplied</b> style in the appropriate context.
<div class="Pp"></div>
<b>vcs_info</b> allows for very detailed control over how the gathered
  information is presented (see the below sections, <b>Styles</b> and <b>Hooks
  in</b> <b>vcs_info</b>), all of which are documented below. Note there are a
  number of other patch tracking systems that work on top of a certain version
  control system (like <b>stgit</b> for <b>git</b>, or <b>mq</b> for <b>hg</b>);
  the configuration for systems like that are generally configured the same way
  as the <b>quilt</b> support.
<div class="Pp"></div>
If the <b>quilt</b> support is working in `addon' mode, the produced string is
  available as a simple format replacement ( <b>%Q</b> to be precise), which can
  be used in <b>formats</b> and <b>actionformats</b>; see below for details).
<div class="Pp"></div>
If, on the other hand, the support code is working in `standalone' mode,
  <b>vcs_info</b> will pretend as if <b>quilt</b> were an actual version control
  system. That means that the version control system identifier (which otherwise
  would be something like `svn' or `cvs') will be set to ` <b>-quilt-</b>'. This
  has implications on the used style context where this identifier is the second
  element. <b>vcs_info</b> will have filled in a proper value for the
  &quot;repository's&quot; root directory and the string containing the
  information about quilt's state will be available as the `misc' replacement
  (and <b>%Q</b> for compatibility with `addon' mode.
<div class="Pp"></div>
What is left to discuss is how `standalone' mode is detected. The detection
  itself is a series of searches for directories. You can have this detection
  enabled all the time in every directory that is not otherwise under version
  control. If you know there is only a limited set of trees where you would like
  <b>vcs_info</b> to try and look for Quilt in `standalone' mode to minimise the
  amount of searching on every call to <b>vcs_info</b>, there are a number of
  ways to do that:
<div class="Pp"></div>
Essentially, `standalone' mode detection is controlled by a style called `
  <b>quilt-standalone</b>'. It is a string style and its value can have
  different effects. The simplest values are: ` <b>always</b>' to run detection
  every time <b>vcs_info</b> is run, and `<b>never</b>' to turn the detection
  off entirely.
<div class="Pp"></div>
If the value of <b>quilt-standalone</b> is something else, it is interpreted
  differently. If the value is the name of a scalar variable the value of that
  variable is checked and that value is used in the same `always'/`never' way as
  described above.
<div class="Pp"></div>
If the value of <b>quilt-standalone</b> is an array, the elements of that array
  are used as directory names under which you want the detection to be active.
<div class="Pp"></div>
If <b>quilt-standalone</b> is an associative array, the keys are taken as
  directory names under which you want the detection to be active, but only if
  the corresponding value is the string ` <b>true</b>'.
<div class="Pp"></div>
Last, but not least, if the value of <b>quilt-standalone</b> is the name of a
  function, the function is called without arguments and the return value
  decides whether detection should be active. A `0' return value is true; a
  non-zero return value is interpreted as false.
<div class="Pp"></div>
Note, if there is both a function and a variable by the name of
  <b>quilt-standalone</b>, the function will take precedence.
<h2 class="Ss" title="Ss" id="Function_Descriptions_(Public_API)"><a class="selflink" href="#Function_Descriptions_(Public_API)">Function
  Descriptions (Public API)</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info</b> [<i>user-context</i>]</dt>
  <dd class="It-tag">The main function, that runs all backends and assembles all
      data into <b>${vcs_info_msg_*_}</b>. This is the function you want to call
      from <b>precmd</b> if you want to include up-to-date information in your
      prompt (see <b>Variable description</b> below). If an argument is given,
      that string will be used instead of <b>default</b> in the
      <i>user-context</i> field of the style context.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info_hookadd</b></dt>
  <dd class="It-tag">Statically registers a number of functions to a given hook.
      The hook needs to be given as the first argument; what follows is a list
      of hook-function names to register to the hook. The ` <b>+vi-</b>' prefix
      needs to be left out here. See <b>Hooks in vcs_info</b> below for
    details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info_hookdel</b></dt>
  <dd class="It-tag">Remove hook-functions from a given hook. The hook needs to
      be given as the first non-option argument; what follows is a list of
      hook-function names to un-register from the hook. If ` <b>-a</b>' is used
      as the first argument, <b>all</b> occurances of the functions are
      unregistered. Otherwise only the last occurance is removed (if a function
      was registered to a hook more than once) . The ` <b>+vi-</b>' prefix needs
      to be left out here. See <b>Hooks in vcs_info</b> below for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info_lastmsg</b></dt>
  <dd class="It-tag">Outputs the last <b>${vcs_info_msg_*_}</b> value. Takes
      into account the value of the <b>use-prompt-escapes</b> style in
      <b>':vcs_info:formats:command:-all-'</b>. It also only prints
      <b>max-exports</b> values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info_printsys</b> [<i>user-context</i>]</dt>
  <dd class="It-tag">Prints a list of all supported version control systems.
      Useful to find out possible contexts (and which of them are enabled) or
      values for the <b>disable</b> style.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs_info_setsys</b></dt>
  <dd class="It-tag">Initializes <b>vcs_info</b>'s internal list of available
      backends. With this function, you can add support for new VCSs without
      restarting the shell.</dd>
</dl>
<div class="Pp"></div>
All functions named VCS_INFO_* are for internal use only.
<h2 class="Ss" title="Ss" id="Variable_Description"><a class="selflink" href="#Variable_Description">Variable
  Description</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>${vcs_info_msg_</b><i>N</i><b>_}</b> (Note the trailing
    underscore)</dt>
  <dd class="It-tag">Where <i>N</i> is an integer, e.g., <b>vcs_info_msg_0_</b>.
      These variables are the storage for the informational message the last
      <b>vcs_info</b> call has assembled. These are strongly connected to the
      <b>formats</b>, <b>actionformats</b> and <b>nvcsformats</b> styles
      described above. Those styles are lists. The first member of that list
      gets expanded into <b>${vcs_info_msg_0_}</b>, the second into
      <b>${vcs_info_msg_1_}</b> and the Nth into <b>${vcs_info_msg_N-1_}</b>.
      These parameters are exported into the environment. (See the
      <b>max-exports</b> style above.)</dd>
</dl>
<div class="Pp"></div>
All variables named VCS_INFO_* are for internal use only.
<h2 class="Ss" title="Ss" id="Hooks_in_vcs_info"><a class="selflink" href="#Hooks_in_vcs_info">Hooks
  in vcs_info</a></h2>
Hooks are places in <b>vcs_info</b> where you can run your own code. That code
  can communicate with the code that called it and through that, change the
  system's behaviour.
<div class="Pp"></div>
For configuration, hooks change the style context:
<div style="margin-left: 5.00ex;">
<pre>
<b>:vcs_info:</b><i>vcs-string</i><b>+</b><i>hook-name</i><b>:</b><i>user-context</i><b>:</b><i>repo-root-name</i><b></b><i></i>
</pre>
</div>
<div class="Pp"></div>
To register functions to a hook, you need to list them in the <b>hooks</b> style
  in the appropriate context.
<div class="Pp"></div>
Example:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*+foo:*' hooks bar baz</b>
</pre>
</div>
<div class="Pp"></div>
This registers functions to the hook `foo' for all backends. In order to avoid
  namespace problems, all registered function names are prepended by a `+vi-',
  so the actual functions called for the `foo' hook are ` <b>+vi-bar</b>' and
  `<b>+vi-baz</b>'.
<div class="Pp"></div>
If you would like to register a function to a hook regardless of the current
  context, you may use the <b>vcs_info_hookadd</b> function. To remove a
  function that was added like that, the <b>vcs_info_hookdel</b> function can be
  used.
<div class="Pp"></div>
If something seems weird, you can enable the `debug' boolean style in the proper
  context and the hook-calling code will print what it tried to execute and
  whether the function in question existed.
<div class="Pp"></div>
When you register more than one function to a hook, all functions are executed
  one after another until one function returns non-zero or until all functions
  have been called. Context-sensitive hook functions are executed <b>before</b>
  statically registered ones (the ones added by <b>vcs_info_hookadd</b>).
<div class="Pp"></div>
You may pass data between functions via an associative array, <b>user_data</b>.
  For example:
<div style="margin-left: 5.00ex;">
<pre>
<b></b>
<b>+vi-git-myfirsthook(){</b>
<b>    user_data[myval]=$myval</b>
<b>}</b>
<b>+vi-git-mysecondhook(){</b>
<b>    # do something with ${user_data[myval]}</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
There are a number of variables that are special in hook contexts:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ret</b></dt>
  <dd class="It-tag">The return value that the hooks system will return to the
      caller. The default is an integer `zero'. If and how a changed <b>ret</b>
      value changes the execution of the caller depends on the specific hook.
      See the hook documentation below for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hook_com</b></dt>
  <dd class="It-tag">An associated array which is used for bidirectional
      communication from the caller to hook functions. The used keys depend on
      the specific hook.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>context</b></dt>
  <dd class="It-tag">The active context of the hook. Functions that wish to
      change this variable should make it local scope first.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vcs</b></dt>
  <dd class="It-tag">The current VCS after it was detected. The same values as
      in the enable/disable style are used. Available in all hooks except
      <b>start-up</b>.</dd>
</dl>
<div class="Pp"></div>
Finally, the full list of currently available hooks:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>start-up</b></dt>
  <dd class="It-tag">Called after starting <b>vcs_info</b> but before the VCS in
      this directory is determined. It can be used to deactivate <b>vcs_info</b>
      temporarily if necessary. When <b>ret</b> is set to <b>1</b>,
      <b>vcs_info</b> aborts and does nothing; when set to <b>2</b>,
      <b>vcs_info</b> sets up everything as if no version control were active
      and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pre-get-data</b></dt>
  <dd class="It-tag">Same as <b>start-up</b> but after the VCS was
    detected.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gen-hg-bookmark-string</b></dt>
  <dd class="It-tag">Called in the Mercurial backend when a bookmark string is
      generated; the <b>get-revision</b> and <b>get-bookmarks</b> styles must be
      true.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This hook gets the names of the Mercurial bookmarks that <b>vcs_info</b>
  collected from `hg'.
<div class="Pp"></div>
When setting <b>ret</b> to non-zero, the string in
  <b>${hook_com[hg-bookmark-string]}</b> will be used in the <b>%m</b> escape in
  <b>formats</b> and <b>actionformats</b> and will be availabe in the global
  <b>backend_misc</b> array as <b>${backend_misc[bookmarks]}</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gen-applied-string</b></dt>
  <dd class="It-tag">Called in the <b>git</b> (with <b>stgit</b>), and <b>hg</b>
      (with <b>mq</b>) backends and in <b>quilt</b> support when the
      <b>applied-string</b> is generated; the <b>use-quilt</b> zstyle must be
      true for <b>quilt</b> (the <b>mq</b> and <b>stgit</b> backends are active
      by default).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This hook gets the names of all applied patches which <b>vcs_info</b> collected
  so far in the opposite order, which means that the first argument is the
  top-most patch and so forth.
<div class="Pp"></div>
When setting <b>ret</b> to non-zero, the string in
  <b>${hook_com[applied-string]}</b> will be used in the <b>%m</b> escape in
  <b>formats</b> and <b>actionformats</b>; it will be available in the global
  <b>backend_misc</b> array as <b>$backend_misc[patches]}</b>; and it will be
  available as <b>%p</b> in the <b>patch-format</b> and <b>nopatch-format</b>
  styles.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gen-unapplied-string</b></dt>
  <dd class="It-tag">Called in the <b>git</b> (with <b>stgit</b>), and <b>hg</b>
      (with <b>mq</b>) backend and in <b>quilt</b> support when the
      <b>unapplied-string</b> is generated; the <b>get-unapplied</b> style must
      be true.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This hook gets the names of all unapplied patches which <b>vcs_info</b>
  collected so far in the opposite order, which mean that the first argument is
  the patch next-in-line to be applied and so forth.
<div class="Pp"></div>
When setting <b>ret</b> to non-zero, the string in
  <b>${hook_com[unapplied-string]}</b> will be available as <b>%u</b> in the
  <b>patch-format</b> and <b>nopatch-format</b> styles.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gen-mqguards-string</b></dt>
  <dd class="It-tag">Called in the <b>hg</b> backend when <b>guards-string</b>
      is generated; the <b>get-mq</b> style must be true (default).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This hook gets the names of any active <b>mq</b> guards.
<div class="Pp"></div>
When setting <b>ret</b> to non-zero, the string in
  <b>${hook_com[guards-string]}</b> will be used in the <b>%g</b> escape in the
  <b>patch-format</b> and <b>nopatch-format</b> styles.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>no-vcs</b></dt>
  <dd class="It-tag">This hooks is called when no version control system was
      detected.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The `hook_com' parameter is not used.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>post-quilt</b></dt>
  <dd class="It-tag">Called after the <b>quilt</b> support is done. The
      following information is passed as arguments to the hook: 1. the
      quilt-support mode (`addon' or `standalone'); 2. the directory that
      contains the patch series; 3. the directory that holds quilt's status
      information (the `.pc' directory) or the string <b>&quot;-nopc-&quot;</b>
      if that directory wasn't found.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The `hook_com' parameter is not used.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-branch-format</b></dt>
  <dd class="It-tag">Called before `<b>branchformat</b>' is set. The only
      argument to the hook is the format that is configured at this point.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The ` <b>hook_com</b>' keys considered are `<b>branch</b>' and
  `<b>revision</b>'. They are set to the values figured out so far by
  <b>vcs_info</b> and any change will be used directly when the actual
  replacement is done.
<div class="Pp"></div>
If <b>ret</b> is set to non-zero, the string in
  <b>${hook_com[branch-replace]}</b> will be used unchanged as the ` <b>%b</b>'
  replacement in the variables set by <b>vcs_info</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-hgrev-format</b></dt>
  <dd class="It-tag">Called before a `<b>hgrevformat</b>' is set. The only
      argument to the hook is the format that is configured at this point.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The ` <b>hook_com</b>' keys considered are `<b>hash</b>' and `<b>localrev</b>'.
  They are set to the values figured out so far by <b>vcs_info</b> and any
  change will be used directly when the actual replacement is done.
<div class="Pp"></div>
If <b>ret</b> is set to non-zero, the string in <b>${hook_com[rev-replace]}</b>
  will be used unchanged as the ` <b>%i</b>' replacement in the variables set by
  <b>vcs_info</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-message</b></dt>
  <dd class="It-tag">Called each time before a `<b>vcs_info_msg_N_</b>' message
      is set. It takes two arguments; the first being the `N' in the message
      variable name, the second is the currently configured <b>formats</b> or
      <b>actionformats</b>.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
There are a number of ` <b>hook_com</b>' keys, that are used here: `
  <b>action</b>', ` <b>branch</b>', `<b>base</b>', `<b>base-name</b>',
  `<b>subdir</b>', ` <b>staged</b>', `<b>unstaged</b>', `<b>revision</b>',
  `<b>misc</b>', ` <b>vcs</b>' and one ` <b>miscN</b>' entry for each
  backend-specific data field ( <b>N</b> starting at zero). They are set to the
  values figured out so far by <b>vcs_info</b> and any change will be used
  directly when the actual replacement is done.
<div class="Pp"></div>
Since this hook is triggered multiple times (once for each configured
  <b>formats</b> or <b>actionformats</b>), each of the `<b>hook_com</b>' keys
  mentioned above (except for the <b>miscN</b> entries) has an `<b>_orig</b>'
  counterpart, so even if you changed a value to your liking you can still get
  the original value in the next run. Changing the ` <b>_orig</b>' values is
  probably not a good idea.
<div class="Pp"></div>
If <b>ret</b> is set to non-zero, the string in <b>${hook_com[message]}</b> will
  be used unchanged as the message by <b>vcs_info</b>.</div>
<div class="Pp"></div>
If all of this sounds rather confusing, take a look at the <b>Examples</b>
  section below and also in the Misc/vcs_info-examples file in the Zsh source.
  They contain some explanatory code.
<h2 class="Ss" title="Ss" id="Examples"><a class="selflink" href="#Examples">Examples</a></h2>
Don't use <b>vcs_info</b> at all (even though it's in your prompt):
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' enable NONE</b>
</pre>
</div>
<div class="Pp"></div>
Disable the backends for <b>bzr</b> and <b>svk</b>:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' disable bzr svk</b>
</pre>
</div>
<div class="Pp"></div>
Disable everything <i>but</i> <b>bzr</b> and <b>svk</b>:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*' enable bzr svk</b>
</pre>
</div>
<div class="Pp"></div>
Provide a special formats for <b>git</b>:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:git:*' formats       ' GIT, BABY! [%b]'</b>
<b>zstyle ':vcs_info:git:*' actionformats ' GIT ACTION! [%b|%a]'</b>
</pre>
</div>
<div class="Pp"></div>
All <b>%x</b> expansion in all sorts of formats (&quot;formats&quot;,
  &quot;actionformats&quot;, branchformat, you name it) are done using the `
  <b>zformat</b>' builtin from the ` <b>zsh/zutil</b>' module. That means you
  can do everything with these <b>%x</b> items what zformat supports. In
  particular, if you want something that is really long to have a fixed width,
  like a hash in a mercurial branchformat, you can do this: <b>%12.12i</b>.
  That'll shrink the 40 character hash to its 12 leading characters. The form is
  actually ` <b>%</b><i>min</i><b>.</b><i>max</i><b>x</b>'. More is possible.
  See the section `The zsh/zutil Module' in <i>zshmodules</i>(1) for details.
<div class="Pp"></div>
Use the quicker <b>bzr</b> backend
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:bzr:*' use-simple true</b>
</pre>
</div>
<div class="Pp"></div>
If you do use <b>use-simple</b>, please report if it does `the-right-thing[tm]'.
<div class="Pp"></div>
Display the revision number in yellow for <b>bzr</b> and <b>svn</b>:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:(svn|bzr):*' branchformat '%b%{'${fg[yellow]}'%}:%r'</b>
</pre>
</div>
<div class="Pp"></div>
If you want colors, make sure you enclose the color codes in <b>%{...%}</b> if
  you want to use the string provided by <b>vcs_info</b> in prompts.
<div class="Pp"></div>
Here is how to print the VCS information as a command (not in a prompt):
<div style="margin-left: 5.00ex;">
<pre>
<b>alias vcsi='vcs_info command; vcs_info_lastmsg'</b>
</pre>
</div>
<div class="Pp"></div>
This way, you can even define different formats for output via
  <b>vcs_info_lastmsg</b> in the ':vcs_info:*:command:*' namespace.
<div class="Pp"></div>
Now as promised, some code that uses hooks: say, you'd like to replace the
  string `svn' by `subversion' in <b>vcs_info</b>'s <b>%s</b> <b>formats</b>
  replacement.
<div class="Pp"></div>
First, we will tell <b>vcs_info</b> to call a function when populating the
  message variables with the gathered information:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*+set-message:*' hooks svn2subversion</b>
</pre>
</div>
<div class="Pp"></div>
Nothing happens. Which is reasonable, since we didn't define the actual function
  yet. To see what the hooks subsystem is trying to do, enable the `
  <b>debug</b>' style:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*+*:*' debug true</b>
</pre>
</div>
<div class="Pp"></div>
That should give you an idea what is going on. Specifically, the function that
  we are looking for is ` <b>+vi-svn2subversion</b>'. Note, the `<b>+vi-</b>'
  prefix. So, everything is in order, just as documented. When you are done
  checking out the debugging output, disable it again:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:*+*:*' debug false</b>
</pre>
</div>
<div class="Pp"></div>
Now, let's define the function:
<div style="margin-left: 5.00ex;">
<pre>
<b></b>
<b>function +vi-svn2subversion() {</b>
<b>    [[ ${hook_com[vcs_orig]} == svn ]] &amp;&amp; hook_com[vcs]=subversion</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
Simple enough. And it could have even been simpler, if only we had registered
  our function in a less generic context. If we do it only in the ` <b>svn</b>'
  backend's context, we don't need to test which the active backend is:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:svn+set-message:*' hooks svn2subversion</b>
</pre>
</div>
<div style="margin-left: 5.00ex;">
<pre>
<b></b>
<b>function +vi-svn2subversion() {</b>
<b>    hook_com[vcs]=subversion</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
And finally a little more elaborate example, that uses a hook to create a
  customised bookmark string for the <b>hg</b> backend.
<div class="Pp"></div>
Again, we start off by registering a function:
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':vcs_info:hg+gen-hg-bookmark-string:*' hooks hgbookmarks</b>
</pre>
</div>
<div class="Pp"></div>
And then we define the ` <b>+vi-hgbookmarks</b> function:
<div style="margin-left: 5.00ex;">
<pre>
<b></b>
<b>function +vi-hgbookmarks() {</b>
<b>    # The default is to connect all bookmark names by</b>
<b>    # commas. This mixes things up a little.</b>
<b>    # Imagine, there's one type of bookmarks that is</b>
<b>    # special to you. Say, because it's *your* work.</b>
<b>    # Those bookmarks look always like this: &quot;sh/*&quot;</b>
<b>    # (because your initials are sh, for example).</b>
<b>    # This makes the bookmarks string use only those</b>
<b>    # bookmarks. If there's more than one, it</b>
<b>    # concatenates them using commas.</b>
<b>    local s i</b>
<b>    # The bookmarks returned by `hg' are available in</b>
<b>    # the functions positional parameters.</b>
<b>    (( $# == 0 )) &amp;&amp; return 0</b>
<b>    for i in &quot;$@&quot;; do</b>
<b>        if [[ $i == sh/* ]]; then</b>
<b>            [[ -n $s ]] &amp;&amp; s=$s,</b>
<b>            s=${s}$i</b>
<b>        fi</b>
<b>    done</b>
<b>    # Now, the communication with the code that calls</b>
<b>    # the hook functions is done via the hook_com[]</b>
<b>    # hash. The key, at which the `gen-hg-bookmark-string'</b>
<b>    # hook looks at is `hg-bookmark-string'. So:</b>
<b>    hook_com[hg-bookmark-string]=$s</b>
<b>    # And to signal, that we want to use the sting we</b>
<b>    # just generated, set the special variable `ret' to</b>
<b>    # something other than the default zero:</b>
<b>    ret=1</b>
<b>    return 0</b>
<b>}</b>
<b></b>
</pre>
</div>
<div class="Pp"></div>
Some longer examples and code snippets which might be useful are available in
  the examples file located at Misc/vcs_info-examples in the Zsh source
  directory.
<div class="Pp"></div>
This concludes our guided tour through zsh's <b>vcs_info</b>.
<h1 class="Sh" title="Sh" id="PROMPT_THEMES"><a class="selflink" href="#PROMPT_THEMES">PROMPT
  THEMES</a></h1>
<h2 class="Ss" title="Ss" id="Installation"><a class="selflink" href="#Installation">Installation</a></h2>
You should make sure all the functions from the <b>Functions/Prompts</b>
  directory of the source distribution are available; they all begin with the
  string ` <b>prompt_</b>' except for the special function`<b>promptinit</b>'.
  You also need the ` <b>colors</b>' function from <b>Functions/Misc</b>. All of
  these functions may already have been installed on your system; if not, you
  will need to find them and copy them. The directory should appear as one of
  the elements of the <b>fpath</b> array (this should already be the case if
  they were installed), and at least the function <b>promptinit</b> should be
  autoloaded; it will autoload the rest. Finally, to initialize the use of the
  system you need to call the <b>promptinit</b> function. The following code in
  your <b>.zshrc</b> will arrange for this; assume the functions are stored in
  the directory <b>~/myfns</b>:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>fpath=(~/myfns $fpath)</b>
<b>autoload -U promptinit</b>
<b>promptinit</b>
</pre>
</div>
<h2 class="Ss" title="Ss" id="Theme_Selection"><a class="selflink" href="#Theme_Selection">Theme
  Selection</a></h2>
Use the <b>prompt</b> command to select your preferred theme. This command may
  be added to your <b>.zshrc</b> following the call to <b>promptinit</b> in
  order to start zsh with a theme already selected.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b> [ <b>-c</b> | <b>-l</b> ]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b> [ <b>-p</b> | <b>-h</b> ] [ <i>theme</i> ...
    ]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b> [ <b>-s</b> ] <i>theme</i> [ <i>arg</i> ...
    ]</dt>
  <dd class="It-tag">Set or examine the prompt theme. With no options and a
      <i>theme</i> argument, the theme with that name is set as the current
      theme. The available themes are determined at run time; use the <b>-l</b>
      option to see a list. The special <i>theme</i> `<b>random</b>' selects at
      random one of the available themes and sets your prompt to that.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
In some cases the <i>theme</i> may be modified by one or more arguments, which
  should be given after the theme name. See the help for each theme for
  descriptions of these arguments.
<div class="Pp"></div>
Options are:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Show the currently selected theme and its parameters, if
      any.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">List all available prompt themes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">Preview the theme named by <i>theme</i>, or all themes if
      no <i>theme</i> is given.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Show help for the theme named by <i>theme</i>, or for the
      <b>prompt</b> function if no <i>theme</i> is given.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">Set <i>theme</i> as the current theme and save state.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt_</b><i>theme</i><b>_setup</b></dt>
  <dd class="It-tag">Each available <i>theme</i> has a setup function which is
      called by the <b>prompt</b> function to install that theme. This function
      may define other functions as necessary to maintain the prompt, including
      functions used to preview the prompt or provide help for its use. You
      should not normally call a theme's setup function directly.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ZLE_FUNCTIONS"><a class="selflink" href="#ZLE_FUNCTIONS">ZLE
  FUNCTIONS</a></h1>
<h2 class="Ss" title="Ss" id="Widgets"><a class="selflink" href="#Widgets">Widgets</a></h2>
These functions all implement user-defined ZLE widgets (see <i>zshzle</i>(1))
  which can be bound to keystrokes in interactive shells. To use them, your
  <b>.zshrc</b> should contain lines of the form
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload </b><i>function</i><b></b>
<b>zle -N </b><i>function</i><b></b><i></i>
</pre>
</div>
<div class="Pp"></div>
followed by an appropriate <b>bindkey</b> command to associate the function with
  a key sequence. Suggested bindings are described below.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag">bash-style word functions</dt>
  <dd class="It-tag">If you are looking for functions to implement moving over
      and editing words in the manner of bash, where only alphanumeric
      characters are considered word characters, you can use the functions
      described in the next section. The following is sufficient:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -U select-word-style</b>
<b>select-word-style bash</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>forward-word-match</b>, <b>backward-word-match</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>kill-word-match</b>,
    <b>backward-kill-word-match</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>transpose-words-match</b>,
    <b>capitalize-word-match</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>up-case-word-match</b>, <b>down-case-word-match</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>select-word-style</b>, <b>match-word-context</b>,
    <b>match-words-by-style</b></dt>
  <dd class="It-tag">The eight `<b>-match</b>' functions are drop-in
      replacements for the builtin widgets without the suffix. By default they
      behave in a similar way. However, by the use of styles and the function
      <b>select-word-style</b>, the way words are matched can be altered.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The simplest way of configuring the functions is to use
  <b>select-word-style</b>, which can either be called as a normal function with
  the appropriate argument, or invoked as a user-defined widget that will prompt
  for the first character of the word style to be used. The first time it is
  invoked, the eight <b>-match</b> functions will automatically replace the
  builtin versions, so they do not need to be loaded explicitly.
<div class="Pp"></div>
The word styles available are as follows. Only the first character is examined.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bash</b></dt>
  <dd class="It-tag">Word characters are alphanumeric characters only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>normal</b></dt>
  <dd class="It-tag">As in normal shell operation: word characters are
      alphanumeric characters plus any characters present in the string given by
      the parameter <b>$WORDCHARS</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>shell</b></dt>
  <dd class="It-tag">Words are complete shell command arguments, possibly
      including complete quoted strings, or any tokens special to the
    shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>whitespace</b></dt>
  <dd class="It-tag">Words are any set of characters delimited by
    whitespace.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>default</b></dt>
  <dd class="It-tag">Restore the default settings; this is usually the same as
      `<b>normal</b>'.</dd>
</dl>
<div class="Pp"></div>
All but ` <b>default</b>' can be input as an upper case character, which has the
  same effect but with subword matching turned on. In this case, words with
  upper case characters are treated specially: each separate run of upper case
  characters, or an upper case character followed by any number of other
  characters, is considered a word. The style <b>subword-range</b> can supply an
  alternative character range to the default ` <b>[:upper:]</b>'; the value of
  the style is treated as the contents of a ` <b>[</b><i>...</i><b>]</b>'
  pattern (note that the outer brackets should not be supplied, only those
  surrounding named ranges).
<div class="Pp"></div>
More control can be obtained using the <b>zstyle</b> command, as described in
  <i>zshmodules</i>(1). Each style is looked up in the context
  <b>:zle:</b><i>widget</i> where <i>widget</i> is the name of the user-defined
  widget, not the name of the function implementing it, so in the case of the
  definitions supplied by <b>select-word-style</b> the appropriate contexts are
  <b>:zle:forward-word</b>, and so on. The function <b>select-word-style</b>
  itself always defines styles for the context ` <b>:zle:*</b>' which can be
  overridden by more specific (longer) patterns as well as explicit contexts.
<div class="Pp"></div>
The style <b>word-style</b> specifies the rules to use. This may have the
  following values.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>normal</b></dt>
  <dd class="It-tag">Use the standard shell rules, i.e. alphanumerics and
      <b>$WORDCHARS</b>, unless overridden by the styles <b>word-chars</b> or
      <b>word-class</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>specified</b></dt>
  <dd class="It-tag">Similar to <b>normal</b>, but <i>only</i> the specified
      characters, and not also alphanumerics, are considered word
    characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unspecified</b></dt>
  <dd class="It-tag">The negation of specified. The given characters are those
      which will <i>not</i> be considered part of a word.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>shell</b></dt>
  <dd class="It-tag">Words are obtained by using the syntactic rules for
      generating shell command arguments. In addition, special tokens which are
      never command arguments such as ` <b>()</b>' are also treated as
    words.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>whitespace</b></dt>
  <dd class="It-tag">Words are whitespace-delimited strings of characters.</dd>
</dl>
<div class="Pp"></div>
The first three of those rules usually use <b>$WORDCHARS</b>, but the value in
  the parameter can be overridden by the style <b>word-chars</b>, which works in
  exactly the same way as <b>$WORDCHARS</b>. In addition, the style
  <b>word-class</b> uses character class syntax to group characters and takes
  precedence over <b>word-chars</b> if both are set. The <b>word-class</b> style
  does not include the surrounding brackets of the character class; for example,
  ` <b>-:[:alnum:]</b>' is a valid <b>word-class</b> to include all
  alphanumerics plus the characters ` <b>-</b>' and `<b>:</b>'. Be careful
  including ` <b>]</b>', `<b>^</b>' and `<b>-</b>' as these are special inside
  character classes.
<div class="Pp"></div>
<b>word-style</b> may also have `<b>-subword</b>' appended to its value to turn
  on subword matching, as described above.
<div class="Pp"></div>
The style <b>skip-chars</b> is mostly useful for <b>transpose-words</b> and
  similar functions. If set, it gives a count of characters starting at the
  cursor position which will not be considered part of the word and are treated
  as space, regardless of what they actually are. For example, if
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':zle:transpose-words' skip-chars 1</b>
</pre>
</div>
<div class="Pp"></div>
has been set, and <b>transpose-words-match</b> is called with the cursor on the
  <i>X</i> of <b>foo</b><i>X</i><b>bar</b>, where <i>X</i> can be any character,
  then the resulting expression is <b>bar</b><i>X</i><b>foo</b>.
<div class="Pp"></div>
Finer grained control can be obtained by setting the style <b>word-context</b>
  to an array of pairs of entries. Each pair of entries consists of a
  <i>pattern</i> and a <i>subcontext</i>. The shell argument the cursor is on is
  matched against each <i>pattern</i> in turn until one matches; if it does, the
  context is extended by a colon and the corresponding <i>subcontext</i>. Note
  that the test is made against the original word on the line, with no stripping
  of quotes. Special handling is done between words: the current context is
  examined and if it contains the string <b>back</b>, the word before the cursor
  is considered, else the word after cursor is considered. Some examples are
  given below.
<div class="Pp"></div>
The style <b>skip-whitespace-first</b> is only used with the <b>forward-word</b>
  widget. If it is set to true, then <b>forward-word</b> skips any
  non-word-characters, followed by any non-word-characters: this is similar to
  the behaviour of other word-orientated widgets, and also that used by other
  editors, however it differs from the standard zsh behaviour. When using
  <b>select-word-style</b> the widget is set in the context <b>:zle:*</b> to
  <b>true</b> if the word style is <b>bash</b> and <b>false</b> otherwise. It
  may be overridden by setting it in the more specific context
  <b>:zle:forward-word*</b>.
<div class="Pp"></div>
Here are some examples of use of the styles, actually taken from the simplified
  interface in <b>select-word-style</b>:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':zle:*' word-style standard</b>
<b>zstyle ':zle:*' word-chars ''</b>
</pre>
</div>
<div class="Pp"></div>
Implements bash-style word handling for all widgets, i.e. only alphanumerics are
  word characters; equivalent to setting the parameter <b>WORDCHARS</b> empty
  for the given context.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>style ':zle:*kill*' word-style space</b>
</pre>
</div>
<div class="Pp"></div>
Uses space-delimited words for widgets with the word `kill' in the name. Neither
  of the styles <b>word-chars</b> nor <b>word-class</b> is used in this case.
<div class="Pp"></div>
Here are some examples of use of the <b>word-context</b> style to extend the
  context.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':zle:*' word-context &quot;*/*&quot; file &quot;[[:space:]]&quot; whitespace</b>
<b>zstyle ':zle:transpose-words:whitespace' word-style shell</b>
<b>zstyle ':zle:transpose-words:filename' word-style normal</b>
<b>zstyle ':zle:transpose-words:filename' word-chars ''</b>
</pre>
</div>
<div class="Pp"></div>
This provides two different ways of using <b>transpose-words</b> depending on
  whether the cursor is on whitespace between words or on a filename, here any
  word containing a <b>/</b>. On whitespace, complete arguments as defined by
  standard shell rules will be transposed. In a filename, only alphanumerics
  will be transposed. Elsewhere, words will be transposed using the default
  style for <b>:zle:transpose-words</b>.
<div class="Pp"></div>
The word matching and all the handling of <b>zstyle</b> settings is actually
  implemented by the function <b>match-words-by-style</b>. This can be used to
  create new user-defined widgets. The calling function should set the local
  parameter <b>curcontext</b> to <b>:zle:</b><i>widget</i>, create the local
  parameter <b>matched_words</b> and call <b>match-words-by-style</b> with no
  arguments. On return, <b>matched_words</b> will be set to an array with the
  elements: (1) the start of the line (2) the word before the cursor (3) any
  non-word characters between that word and the cursor (4) any non-word
  character at the cursor position plus any remaining non-word characters before
  the next word, including all characters specified by the <b>skip-chars</b>
  style, (5) the word at or following the cursor (6) any non-word characters
  following that word (7) the remainder of the line. Any of the elements may be
  an empty string; the calling function should test for this to decide whether
  it can perform its function.
<div class="Pp"></div>
It is possible to pass options with arguments to <b>match-words-by-style</b> to
  override the use of styles. The options are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b></dt>
  <dd class="It-tag"><i>word-style</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag"><i>skip-chars</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag"><i>word-class</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b></dt>
  <dd class="It-tag"><i>word-chars</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag"><i>subword-range</i></dd>
</dl>
<div class="Pp"></div>
For example, <b>match-words-by-style -w shell -c 0</b> may be used to extract
  the command argument around the cursor.
<div class="Pp"></div>
The <b>word-context</b> style is implemented by the function
  <b>match-word-context</b>. This should not usually need to be called
  directly.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>copy-earlier-word</b></dt>
  <dd class="It-tag">This widget works like a combination of
      <b>insert-last-word</b> and <b>copy-prev-shell-word</b>. Repeated
      invocations of the widget retrieve earlier words on the relevant history
      line. With a numeric argument <i>N</i>, insert the <i>N</i>th word from
      the history line; <i>N</i> may be negative to count from the end of the
      line.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If <b>insert-last-word</b> has been used to retrieve the last word on a previous
  history line, repeated invocations will replace that word with earlier words
  from the same line.
<div class="Pp"></div>
Otherwise, the widget applies to words on the line currently being edited. The
  <b>widget</b> style can be set to the name of another widget that should be
  called to retrieve words. This widget must accept the same three arguments as
  <b>insert-last-word</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cycle-completion-positions</b></dt>
  <dd class="It-tag">After inserting an unambiguous string into the command
      line, the new function based completion system may know about multiple
      places in this string where characters are missing or differ from at least
      one of the possible matches. It will then place the cursor on the position
      it considers to be the most interesting one, i.e. the one where one can
      disambiguate between as many matches as possible with as little typing as
      possible.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This widget allows the cursor to be easily moved to the other interesting spots.
  It can be invoked repeatedly to cycle between all positions reported by the
  completion system.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>delete-whole-word-match</b></dt>
  <dd class="It-tag">This is another function which works like the <b>-match</b>
      functions described immediately above, i.e. using styles to decide the
      word boundaries. However, it is not a replacement for any existing
      function.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The basic behaviour is to delete the word around the cursor. There is no numeric
  prefix handling; only the single word around the cursor is considered. If the
  widget contains the string <b>kill</b>, the removed text will be placed in the
  cutbuffer for future yanking. This can be obtained by defining
  <b>kill-whole-word-match</b> as follows:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N kill-whole-word-match delete-whole-word-match</b>
</pre>
</div>
<div class="Pp"></div>
and then binding the widget <b>kill-whole-word-match</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>up-line-or-beginning-search</b>,
    <b>down-line-or-beginning-search</b></dt>
  <dd class="It-tag">These widgets are similar to the builtin functions
      <b>up-line-or-search</b> and <b>down-line-or-search</b>: if in a multiline
      buffer they move up or down within the buffer, otherwise they search for a
      history line matching the start of the current line. In this case,
      however, they search for a line which matches the current line up to the
      current cursor position, in the manner of
      <b>history-beginning-search-backward</b> and <b>-forward</b>, rather than
      the first word on the line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>edit-command-line</b></dt>
  <dd class="It-tag">Edit the command line using your visual editor, as in
      <b>ksh</b>.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>bindkey -M vicmd v edit-command-line</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>history-search-end</b></dt>
  <dd class="It-tag">This function implements the widgets
      <b>history-beginning-search-backward-end</b> and
      <b>history-beginning-search-forward-end</b>. These commands work by first
      calling the corresponding builtin widget (see `History Control' in
      <i>zshzle</i>(1)) and then moving the cursor to the end of the line. The
      original cursor position is remembered and restored before calling the
      builtin widget a second time, so that the same search is repeated to look
      farther through the history.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Although you <b>autoload</b> only one function, the commands to use it are
  slightly different because it implements two widgets.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N history-beginning-search-backward-end \ </b>
<b>       history-search-end</b>
<b>zle -N history-beginning-search-forward-end \ </b>
<b>       history-search-end</b>
<b>bindkey '\e^P' history-beginning-search-backward-end</b>
<b>bindkey '\e^N' history-beginning-search-forward-end</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>history-beginning-search-menu</b></dt>
  <dd class="It-tag">This function implements yet another form of history
      searching. The text before the cursor is used to select lines from the
      history, as for <b>history-beginning-search-backward</b> except that all
      matches are shown in a numbered menu. Typing the appropriate digits
      inserts the full history line. Note that leading zeroes must be typed
      (they are only shown when necessary for removing ambiguity). The entire
      history is searched; there is no distinction between forwards and
      backwards.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
With a prefix argument, the search is not anchored to the start of the line; the
  string typed by the use may appear anywhere in the line in the history.
<div class="Pp"></div>
If the widget name contains ` <b>-end</b>' the cursor is moved to the end of the
  line inserted. If the widget name contains ` <b>-space</b>' any space in the
  text typed is treated as a wildcard and can match anything (hence a leading
  space is equivalent to giving a prefix argument). Both forms can be combined,
  for example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N history-beginning-search-menu-space-end \ </b>
<b>       history-beginning-search-menu</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>history-pattern-search</b></dt>
  <dd class="It-tag">The function <b>history-pattern-search</b> implements
      widgets which prompt for a pattern with which to search the history
      backwards or forwards. The pattern is in the usual zsh format, however the
      first character may be <b>^</b> to anchor the search to the start of the
      line, and the last character may be <b>$</b> to anchor the search to the
      end of the line. If the search was not anchored to the end of the line the
      cursor is positioned just after the pattern found.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The commands to create bindable widgets are similar to those in the example
  immediately above:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -U history-pattern-search</b>
<b>zle -N history-pattern-search-backward history-pattern-search</b>
<b>zle -N history-pattern-search-forward history-pattern-search</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>incarg</b></dt>
  <dd class="It-tag">Typing the keystrokes for this widget with the cursor
      placed on or to the left of an integer causes that integer to be
      incremented by one. With a numeric prefix argument, the number is
      incremented by the amount of the argument (decremented if the prefix
      argument is negative). The shell parameter <b>incarg</b> may be set to
      change the default increment to something other than one.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>bindkey '^X+' incarg</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>incremental-complete-word</b></dt>
  <dd class="It-tag">This allows incremental completion of a word. After
      starting this command, a list of completion choices can be shown after
      every character you type, which you can delete with <b>^H</b> or
      <b>DEL</b>. Pressing return accepts the completion so far and returns you
      to normal editing (that is, the command line is <i>not</i> immediately
      executed). You can hit <b>TAB</b> to do normal completion, <b>^G</b> to
      abort back to the state when you started, and <b>^D</b> to list the
      matches.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This works only with the new function based completion system.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>bindkey '^Xi' incremental-complete-word</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>insert-composed-char</b></dt>
  <dd class="It-tag">This function allows you to compose characters that don't
      appear on the keyboard to be inserted into the command line. The command
      is followed by two keys corresponding to ASCII characters (there is no
      prompt). For accented characters, the two keys are a base character
      followed by a code for the accent, while for other special characters the
      two characters together form a mnemonic for the character to be inserted.
      The two-character codes are a subset of those given by RFC 1345 (see for
      example <b>http://www.faqs.org/rfcs/rfc1345.html</b>).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The function may optionally be followed by up to two characters which replace
  one or both of the characters read from the keyboard; if both characters are
  supplied, no input is read. For example, <b>insert-composed-char a:</b> can be
  used within a widget to insert an a with umlaut into the command line. This
  has the advantages over use of a literal character that it is more portable.
<div class="Pp"></div>
For best results zsh should have been built with support for multibyte
  characters (configured with <b>--enable-multibyte</b>); however, the function
  works for the limited range of characters available in single-byte character
  sets such as ISO-8859-1.
<div class="Pp"></div>
The character is converted into the local representation and inserted into the
  command line at the cursor position. (The conversion is done within the shell,
  using whatever facilities the C library provides.) With a numeric argument,
  the character and its code are previewed in the status line
<div class="Pp"></div>
The function may be run outside zle in which case it prints the character
  (together with a newline) to standard output. Input is still read from
  keystrokes.
<div class="Pp"></div>
See <b>insert-unicode-char</b> for an alternative way of inserting Unicode
  characters using their hexadecimal character number.
<div class="Pp"></div>
The set of accented characters is reasonably complete up to Unicode character
  U+0180, the set of special characters less so. However, it is very sporadic
  from that point. Adding new characters is easy, however; see the function
  <b>define-composed-chars</b>. Please send any additions to
  <b>zsh-workers@zsh.org</b>.
<div class="Pp"></div>
The codes for the second character when used to accent the first are as follows.
  Note that not every character can take every accent.
<dl class="Bl-tag">
  <dt class="It-tag"><b>!</b></dt>
  <dd class="It-tag">Grave.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'</b></dt>
  <dd class="It-tag">Acute.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&gt;</b></dt>
  <dd class="It-tag">Circumflex.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>?</b></dt>
  <dd class="It-tag">Tilde. (This is not <b>~</b> as RFC 1345 does not assume
      that character is present on the keyboard.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-</b></dt>
  <dd class="It-tag">Macron. (A horizontal bar over the base character.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>(</b></dt>
  <dd class="It-tag">Breve. (A shallow dish shape over the base character.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>.</b></dt>
  <dd class="It-tag">Dot above the base character, or in the case of <b>i</b> no
      dot, or in the case of <b>L</b> and <b>l</b> a centered dot.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:</b></dt>
  <dd class="It-tag">Diaeresis (Umlaut).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>c</b></dt>
  <dd class="It-tag">Cedilla.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>_</b></dt>
  <dd class="It-tag">Underline, however there are currently no underlined
      characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/</b></dt>
  <dd class="It-tag">Stroke through the base character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&quot;</b></dt>
  <dd class="It-tag">Double acute (only supported on a few letters).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>;</b></dt>
  <dd class="It-tag">Ogonek. (A little forward facing hook at the bottom right
      of the character.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;</b></dt>
  <dd class="It-tag">Caron. (A little v over the letter.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">Circle over the base character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">Hook over the base character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>9</b></dt>
  <dd class="It-tag">Horn over the base character.</dd>
</dl>
<div class="Pp"></div>
The most common characters from the Arabic, Cyrillic, Greek and Hebrew alphabets
  are available; consult RFC 1345 for the appropriate sequences. In addition, a
  set of two letter codes not in RFC 1345 are available for the double-width
  characters corresponding to ASCII characters from <b>!</b> to <b>~</b> (0x21
  to 0x7e) by preceding the character with <b>^</b>, for example <b>^A</b> for a
  double-width <b>A</b>.
<div class="Pp"></div>
The following other two-character sequences are understood.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag">ASCII characters</dt>
  <dd class="It-tag">These are already present on most keyboards:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;(</b></dt>
  <dd class="It-tag">Left square bracket</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>//</b></dt>
  <dd class="It-tag">Backslash (solidus)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>)&gt;</b></dt>
  <dd class="It-tag">Right square bracket</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>(!</b></dt>
  <dd class="It-tag">Left brace (curly bracket)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!!</b></dt>
  <dd class="It-tag">Vertical bar (pipe symbol)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!)</b></dt>
  <dd class="It-tag">Right brace (curly bracket)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'?</b></dt>
  <dd class="It-tag">Tilde</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Special letters</dt>
  <dd class="It-tag">Characters found in various variants of the Latin
    alphabet:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ss</b></dt>
  <dd class="It-tag">Eszett (scharfes S)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>D-</b>, <b>d-</b></dt>
  <dd class="It-tag">Eth</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>TH</b>, <b>th</b></dt>
  <dd class="It-tag">Thorn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>kk</b></dt>
  <dd class="It-tag">Kra</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'n</b></dt>
  <dd class="It-tag">'n</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>NG</b>, <b>ng</b></dt>
  <dd class="It-tag">Ng</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>OI</b>, <b>oi</b></dt>
  <dd class="It-tag">Oi</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>yr</b></dt>
  <dd class="It-tag">yr</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ED</b></dt>
  <dd class="It-tag">ezh</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Currency symbols</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Ct</b></dt>
  <dd class="It-tag">Cent</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Pd</b></dt>
  <dd class="It-tag">Pound sterling (also lira and others)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Cu</b></dt>
  <dd class="It-tag">Currency</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Ye</b></dt>
  <dd class="It-tag">Yen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Eu</b></dt>
  <dd class="It-tag">Euro (N.B. not in RFC 1345)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Punctuation characters</dt>
  <dd class="It-tag">References to &quot;right&quot; quotes indicate the shape
      (like a 9 rather than 6) rather than their grammatical use. (For example,
      a &quot;right&quot; low double quote is used to open quotations in
      German.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!I</b></dt>
  <dd class="It-tag">Inverted exclamation mark</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BB</b></dt>
  <dd class="It-tag">Broken vertical bar</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SE</b></dt>
  <dd class="It-tag">Section</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Co</b></dt>
  <dd class="It-tag">Copyright</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">Spanish feminine ordinal indicator</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;&lt;</b></dt>
  <dd class="It-tag">Left guillemet</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-</b><b>-</b></dt>
  <dd class="It-tag">Soft hyphen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Rg</b></dt>
  <dd class="It-tag">Registered trade mark</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PI</b></dt>
  <dd class="It-tag">Pilcrow (paragraph)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag">Spanish masculine ordinal indicator</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&gt;&gt;</b></dt>
  <dd class="It-tag">Right guillemet</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>?I</b></dt>
  <dd class="It-tag">Inverted question mark</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-1</b></dt>
  <dd class="It-tag">Hyphen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b></dt>
  <dd class="It-tag">En dash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b></dt>
  <dd class="It-tag">Em dash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-3</b></dt>
  <dd class="It-tag">Horizontal bar</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:3</b></dt>
  <dd class="It-tag">Vertical ellipsis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>.3</b></dt>
  <dd class="It-tag">Horizontal midline ellipsis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!2</b></dt>
  <dd class="It-tag">Double vertical line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>=2</b></dt>
  <dd class="It-tag">Double low line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'6</b></dt>
  <dd class="It-tag">Left single quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'9</b></dt>
  <dd class="It-tag">Right single quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>.9</b></dt>
  <dd class="It-tag">&quot;Right&quot; low quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>9'</b></dt>
  <dd class="It-tag">Reversed &quot;right&quot; quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&quot;6</b></dt>
  <dd class="It-tag">Left double quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&quot;9</b></dt>
  <dd class="It-tag">Right double quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:9</b></dt>
  <dd class="It-tag">&quot;Right&quot; low double quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>9&quot;</b></dt>
  <dd class="It-tag">Reversed &quot;right&quot; double quote</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/-</b></dt>
  <dd class="It-tag">Dagger</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/=</b></dt>
  <dd class="It-tag">Double dagger</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Mathematical symbols</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DG</b></dt>
  <dd class="It-tag">Degree</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-2</b>, <b>+-</b>, <b>-+</b></dt>
  <dd class="It-tag">- sign, +/- sign, -/+ sign</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2S</b></dt>
  <dd class="It-tag">Superscript 2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>3S</b></dt>
  <dd class="It-tag">Superscript 3</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1S</b></dt>
  <dd class="It-tag">Superscript 1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>My</b></dt>
  <dd class="It-tag">Micro</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>.M</b></dt>
  <dd class="It-tag">Middle dot</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>14</b></dt>
  <dd class="It-tag">Quarter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>12</b></dt>
  <dd class="It-tag">Half</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>34</b></dt>
  <dd class="It-tag">Three quarters</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>*X</b></dt>
  <dd class="It-tag">Multiplication</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-:</b></dt>
  <dd class="It-tag">Division</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%0</b></dt>
  <dd class="It-tag">Per mille</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FA</b>, <b>TE</b>, <b>/0</b></dt>
  <dd class="It-tag">For all, there exists, empty set</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dP</b>, <b>DE</b>, <b>NB</b></dt>
  <dd class="It-tag">Partial derivative, delta (increment), del (nabla)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>(-</b>, <b>-)</b></dt>
  <dd class="It-tag">Element of, contains</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>*P</b>, <b>+Z</b></dt>
  <dd class="It-tag">Product, sum</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>*-</b>, <b>Ob</b>, <b>Sb</b></dt>
  <dd class="It-tag">Asterisk, ring, bullet</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RT</b>, <b>0(</b>, <b>00</b></dt>
  <dd class="It-tag">Root sign, proportional to, infinity</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Other symbols</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cS</b>, <b>cH</b>, <b>cD</b>, <b>cC</b></dt>
  <dd class="It-tag">Card suits: spades, hearts, diamonds, clubs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Md</b>, <b>M8</b>, <b>M2</b>, <b>Mb</b>, <b>Mx</b>,
    <b>MX</b></dt>
  <dd class="It-tag">Musical notation: crotchet (quarter note), quaver (eighth
      note), semiquavers (sixteenth notes), flag sign, natural sign, sharp
    sign</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Fm</b>, <b>Ml</b></dt>
  <dd class="It-tag">Female, male</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Accents on their own</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'&gt;</b></dt>
  <dd class="It-tag">Circumflex (same as caret, <b>^</b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'!</b></dt>
  <dd class="It-tag">Grave (same as backtick, <b>`</b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>',</b></dt>
  <dd class="It-tag">Cedilla</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>':</b></dt>
  <dd class="It-tag">Diaeresis (Umlaut)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>'m</b></dt>
  <dd class="It-tag">Macron</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>''</b></dt>
  <dd class="It-tag">Acute</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>insert-files</b></dt>
  <dd class="It-tag">This function allows you type a file pattern, and see the
      results of the expansion at each step. When you hit return, all expansions
      are inserted into the command line.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>bindkey '^Xf' insert-files</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>insert-unicode-char</b></dt>
  <dd class="It-tag">When first executed, the user inputs a set of hexadecimal
      digits. This is terminated with another call to
      <b>insert-unicode-char</b>. The digits are then turned into the
      corresponding Unicode character. For example, if the widget is bound to
      <b>^XU</b>, the character sequence ` <b>^XU 4 c ^XU</b>' inserts <b>L</b>
      (Unicode U+004c).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
See <b>insert-composed-char</b> for a way of inserting characters using a
  two-character mnemonic.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>narrow-to-region [ -p</b> <i>pre</i> <b>] [ -P</b>
    <i>post</i> <b>]</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   <b>[ -S</b> <i>statepm</i> <b>| -R</b> <i>statepm</i> <b>] [ -n ] [</b>
    <i>start</i> <i>end</i> <b>]</b>)</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>narrow-to-region-invisible</b></dt>
  <dd class="It-tag">Narrow the editable portion of the buffer to the region
      between the cursor and the mark, which may be in either order. The region
      may not be empty.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<b>narrow-to-region</b> may be used as a widget or called as a function from a
  user-defined widget; by default, the text outside the editable area remains
  visible. A <b>recursive-edit</b> is performed and the original widening status
  is then restored. Various options and arguments are available when it is
  called as a function.
<div class="Pp"></div>
The options <b>-p</b> <i>pretext</i> and <b>-P</b> <i>posttext</i> may be used
  to replace the text before and after the display for the duration of the
  function; either or both may be an empty string.
<div class="Pp"></div>
If the option <b>-n</b> is also given, <i>pretext</i> or <i>posttext</i> will
  only be inserted if there is text before or after the region respectively
  which will be made invisible.
<div class="Pp"></div>
Two numeric arguments may be given which will be used instead of the cursor and
  mark positions.
<div class="Pp"></div>
The option <b>-S</b> <i>statepm</i> is used to narrow according to the other
  options while saving the original state in the parameter with name
  <i>statepm</i>, while the option <b>-R</b> <i>statepm</i> is used to restore
  the state from the parameter; note in both cases the <i>name</i> of the
  parameter is required. In the second case, other options and arguments are
  irrelevant. When this method is used, no <b>recursive-edit</b> is performed;
  the calling widget should call this function with the option <b>-S</b>,
  perform its own editing on the command line or pass control to the user via `
  <b>zle recursive-edit</b>', then call this function with the option <b>-R</b>.
  The argument <i>statepm</i> must be a suitable name for an ordinary parameter,
  except that parameters beginning with the prefix <b>_ntr_</b> are reserved for
  use within <b>narrow-to-region</b>. Typically the parameter will be local to
  the calling function.
<div class="Pp"></div>
<b>narrow-to-region-invisible</b> is a simple widget which calls
  <b>narrow-to-region</b> with arguments which replace any text outside the
  region with ` <b>...</b>'.
<div class="Pp"></div>
The display is restored (and the widget returns) upon any zle command which
  would usually cause the line to be accepted or aborted. Hence an additional
  such command is required to accept or abort the current line.
<div class="Pp"></div>
The return status of both widgets is zero if the line was accepted, else
  non-zero.
<div class="Pp"></div>
Here is a trivial example of a widget using this feature.
<div style="margin-left: 5.00ex;">
<pre>
<b>local state</b>
<b>narrow-to-region -p $'Editing restricted region\n' \ </b>
<b>  -P '' -S state</b>
<b>zle recursive-edit</b>
<b>narrow-to-region -R state</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>predict-on</b></dt>
  <dd class="It-tag">This set of functions implements predictive typing using
      history search. After <b>predict-on</b>, typing characters causes the
      editor to look backward in the history for the first line beginning with
      what you have typed so far. After <b>predict-off</b>, editing returns to
      normal for the line found. In fact, you often don't even need to use
      <b>predict-off</b>, because if the line doesn't match something in the
      history, adding a key performs standard completion, and then inserts
      itself if no completions were found. However, editing in the middle of a
      line is liable to confuse prediction; see the <b>toggle</b> style
    below.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
With the function based completion system (which is needed for this), you should
  be able to type <b>TAB</b> at almost any point to advance the cursor to the
  next ``interesting'' character position (usually the end of the current word,
  but sometimes somewhere in the middle of the word). And of course as soon as
  the entire line is what you want, you can accept with return, without needing
  to move the cursor to the end first.
<div class="Pp"></div>
The first time <b>predict-on</b> is used, it creates several additional widget
  functions:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>delete-backward-and-predict</b></dt>
  <dd class="It-tag">Replaces the <b>backward-delete-char</b> widget. You do not
      need to bind this yourself.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>insert-and-predict</b></dt>
  <dd class="It-tag">Implements predictive typing by replacing the
      <b>self-insert</b> widget. You do not need to bind this yourself.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>predict-off</b></dt>
  <dd class="It-tag">Turns off predictive typing.</dd>
</dl>
<div class="Pp"></div>
Although you <b>autoload</b> only the <b>predict-on</b> function, it is
  necessary to create a keybinding for <b>predict-off</b> as well.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N predict-on</b>
<b>zle -N predict-off</b>
<b>bindkey '^X^Z' predict-on</b>
<b>bindkey '^Z' predict-off</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>read-from-minibuffer</b></dt>
  <dd class="It-tag">This is most useful when called as a function from inside a
      widget, but will work correctly as a widget in its own right. It prompts
      for a value below the current command line; a value may be input using all
      of the standard zle operations (and not merely the restricted set
      available when executing, for example, <b>execute-named-cmd</b>). The
      value is then returned to the calling function in the parameter
      <b>$REPLY</b> and the editing buffer restored to its previous state. If
      the read was aborted by a keyboard break (typically <b>^G</b>), the
      function returns status 1 and <b>$REPLY</b> is not set.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If one argument is supplied to the function it is taken as a prompt, otherwise `
  <b>? </b>' is used. If two arguments are supplied, they are the prompt and the
  initial value of <b>$LBUFFER</b>, and if a third argument is given it is the
  initial value of <b>$RBUFFER</b>. This provides a default value and starting
  cursor placement. Upon return the entire buffer is the value of <b>$REPLY</b>.
<div class="Pp"></div>
One option is available: ` <b>-k</b> <i>num</i>' specifies that <i>num</i>
  characters are to be read instead of a whole line. The line editor is not
  invoked recursively in this case, so depending on the terminal settings the
  input may not be visible, and only the input keys are placed in <b>$REPLY</b>,
  not the entire buffer. Note that unlike the <b>read</b> builtin <i>num</i>
  must be given; there is no default.
<div class="Pp"></div>
The name is a slight misnomer, as in fact the shell's own minibuffer is not
  used. Hence it is still possible to call <b>executed-named-cmd</b> and similar
  functions while reading a value.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>replace-string</b>, <b>replace-pattern</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>replace-string-again</b>,
    <b>replace-pattern-again</b></dt>
  <dd class="It-tag">The function <b>replace-string</b> implements three
      widgets. If defined under the same name as the function, it prompts for
      two strings; the first (source) string will be replaced by the second
      everywhere it occurs in the line editing buffer.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If the widget name contains the word ` <b>pattern</b>', for example by defining
  the widget using the command ` <b>zle -N replace-pattern</b>
  <b>replace-string</b>', then the matching is performed using zsh patterns. All
  zsh extended globbing patterns can be used in the source string; note that
  unlike filename generation the pattern does not need to match an entire word,
  nor do glob qualifiers have any effect. In addition, the replacement string
  can contain parameter or command substitutions. Furthermore, a ` <b>&amp;</b>'
  in the replacement string will be replaced with the matched source string, and
  a backquoted digit ` <b>\</b><i>N</i>' will be replaced by the <i>N</i>th
  parenthesised expression matched. The form ` <b>\{</b><i>N</i><b>}</b>' may be
  used to protect the digit from following digits.
<div class="Pp"></div>
If the widget instead contains the word ` <b>regex</b>' (or `<b>regexp</b>'),
  then the matching is performed using regular expressions, respecting the
  setting of the option <b>RE_MATCH_PCRE</b> (see the description of the
  function <b>regexp-replace</b> below). The special replacement facilities
  described above for pattern matching are available.
<div class="Pp"></div>
By default the previous source or replacement string will not be offered for
  editing. However, this feature can be activated by setting the style
  <b>edit-previous</b> in the context <b>:zle:</b><i>widget</i> (for example,
  <b>:zle:replace-string</b>) to <b>true</b>. In addition, a positive numeric
  argument forces the previous values to be offered, a negative or zero argument
  forces them not to be.
<div class="Pp"></div>
The function <b>replace-string-again</b> can be used to repeat the previous
  replacement; no prompting is done. As with <b>replace-string</b>, if the name
  of the widget contains the word ` <b>pattern</b>' or `<b>regex</b>', pattern
  or regular expression matching is performed, else a literal string
  replacement. Note that the previous source and replacement text are the same
  whether pattern, regular expression or string matching is used.
<div class="Pp"></div>
In addition, <b>replace-string</b> shows the previous replacement above the
  prompt, so long as there was one during the current session; if the source
  string is empty, that replacement will be repeated without the widget
  prompting for a replacement string.
<div class="Pp"></div>
For example, starting from the line:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>print This line contains fan and fond</b>
</pre>
</div>
<div class="Pp"></div>
and invoking <b>replace-pattern</b> with the source string ` <b>f(?)n</b>' and
  the replacement string ` <b>c\1r</b>' produces the not very useful line:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>print This line contains car and cord</b>
</pre>
</div>
<div class="Pp"></div>
The range of the replacement string can be limited by using the
  <b>narrow-to-region-invisible</b> widget. One limitation of the current
  version is that <b>undo</b> will cycle through changes to the replacement and
  source strings before undoing the replacement itself.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>send-invisible</b></dt>
  <dd class="It-tag">This is similar to read-from-minibuffer in that it may be
      called as a function from a widget or as a widget of its own, and
      interactively reads input from the keyboard. However, the input being
      typed is concealed and a string of asterisks (` <b>*</b>') is shown
      instead. The value is saved in the parameter <b>$INVISIBLE</b> to which a
      reference is inserted into the editing buffer at the restored cursor
      position. If the read was aborted by a keyboard break (typically
      <b>^G</b>) or another escape from editing such as <b>push-line</b>,
      <b>$INVISIBLE</b> is set to empty and the original buffer is restored
      unchanged.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
If one argument is supplied to the function it is taken as a prompt, otherwise `
  <b>Non-echoed text: </b>' is used (as in emacs). If a second and third
  argument are supplied they are used to begin and end the reference to
  <b>$INVISIBLE</b> that is inserted into the buffer. The default is to open
  with <b>${</b>, then <b>INVISIBLE</b>, and close with <b>}</b>, but many other
  effects are possible.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>smart-insert-last-word</b></dt>
  <dd class="It-tag">This function may replace the <b>insert-last-word</b>
      widget, like so:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N insert-last-word smart-insert-last-word</b>
</pre>
</div>
<div class="Pp"></div>
With a numeric prefix, or when passed command line arguments in a call from
  another widget, it behaves like <b>insert-last-word</b>, except that words in
  comments are ignored when <b>INTERACTIVE_COMMENTS</b> is set.
<div class="Pp"></div>
Otherwise, the rightmost ``interesting'' word from the previous command is found
  and inserted. The default definition of ``interesting'' is that the word
  contains at least one alphabetic character, slash, or backslash. This
  definition may be overridden by use of the <b>match</b> style. The context
  used to look up the style is the widget name, so usually the context is
  <b>:insert-last-word</b>. However, you can bind this function to different
  widgets to use different patterns:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zle -N insert-last-assignment smart-insert-last-word</b>
<b>zstyle :insert-last-assignment match '[[:alpha:]][][[:alnum:]]#=*'</b>
<b>bindkey '\e=' insert-last-assignment</b>
</pre>
</div>
<div class="Pp"></div>
If no interesting word is found and the <b>auto-previous</b> style is set to a
  true value, the search continues upward through the history. When
  <b>auto-previous</b> is unset or false (the default), the widget must be
  invoked repeatedly in order to search earlier history lines.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>transpose-lines</b></dt>
  <dd class="It-tag">Only useful with a multi-line editing buffer; the lines
      here are lines within the current on-screen buffer, not history lines. The
      effect is similar to the function of the same name in Emacs.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Transpose the current line with the previous line and move the cursor to the
  start of the next line. Repeating this (which can be done by providing a
  positive numeric prefix argument) has the effect of moving the line above the
  cursor down by a number of lines.
<div class="Pp"></div>
With a negative numeric prefix argument, requires two lines above the cursor.
  These two lines are transposed and the cursor moved to the start of the
  previous line. Using a numeric prefix less than -1 has the effect of moving
  the line above the cursor up by minus that number of lines.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>which-command</b></dt>
  <dd class="It-tag">This function is a drop-in replacement for the builtin
      widget <b>which-command</b>. It has enhanced behaviour, in that it
      correctly detects whether or not the command word needs to be expanded as
      an alias; if so, it continues tracing the command word from the expanded
      alias until it reaches the command that will be executed.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The style <b>whence</b> is available in the context <b>:zle:$WIDGET</b>; this
  may be set to an array to give the command and options that will be used to
  investigate the command word found. The default is <b>whence -c</b>.</div>
<h2 class="Ss" title="Ss" id="Utility_Functions"><a class="selflink" href="#Utility_Functions">Utility
  Functions</a></h2>
These functions are useful in constructing widgets. They should be loaded with `
  <b>autoload -U</b> <i>function</i>' and called as indicated from user-defined
  widgets.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>split-shell-arguments</b></dt>
  <dd class="It-tag">This function splits the line currently being edited into
      shell arguments and whitespace. The result is stored in the array
      <b>reply</b>. The array contains all the parts of the line in order,
      starting with any whitespace before the first argument, and finishing with
      any whitespace after the last argument. Hence (so long as the option
      <b>KSH_ARRAYS</b> is not set) whitespace is given by odd indices in the
      array and arguments by even indices. Note that no stripping of quotes is
      done; joining together all the elements of <b>reply</b> in order is
      guaranteed to produce the original line.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The parameter <b>REPLY</b> is set to the index of the word in <b>reply</b> which
  contains the character after the cursor, where the first element has index 1.
  The parameter <b>REPLY2</b> is set to the index of the character under the
  cursor in that word, where the first character has index 1.
<div class="Pp"></div>
Hence <b>reply</b>, <b>REPLY</b> and <b>REPLY2</b> should all be made local to
  the enclosing function.
<div class="Pp"></div>
See the function <b>modify-current-argument</b>, described below, for an example
  of how to call this function.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>modify-current-argument</b>
    <i>expr-using-</i><b>$ARG</b></dt>
  <dd class="It-tag">This function provides a simple method of allowing
      user-defined widgets to modify the command line argument under the cursor
      (or immediately to the left of the cursor if the cursor is between
      arguments). The argument should be an expression which when evaluated
      operates on the shell parameter <b>ARG</b>, which will have been set to
      the command line argument under the cursor. The expression should be
      suitably quoted to prevent it being evaluated too early.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
For example, a user-defined widget containing the following code converts the
  characters in the argument under the cursor into all upper case:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>modify-current-argument '${(U)ARG}'</b>
</pre>
</div>
<div class="Pp"></div>
The following strips any quoting from the current word (whether backslashes or
  one of the styles of quotes), and replaces it with single quoting throughout:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>modify-current-argument '${(qq)${(Q)ARG}}'</b>
</pre>
</div>
</div>
<h2 class="Ss" title="Ss" id="Styles"><a class="selflink" href="#Styles">Styles</a></h2>
The behavior of several of the above widgets can be controlled by the use of the
  <b>zstyle</b> mechanism. In particular, widgets that interact with the
  completion system pass along their context to any completions that they
  invoke.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>break-keys</b></dt>
  <dd class="It-tag">This style is used by the <b>incremental-complete-word</b>
      widget. Its value should be a pattern, and all keys matching this pattern
      will cause the widget to stop incremental completion without the key
      having any further effect. Like all styles used directly by
      <b>incremental-complete-word</b>, this style is looked up using the
      context ` <b>:incremental</b>'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>completer</b></dt>
  <dd class="It-tag">The <b>incremental-complete-word</b> and
      <b>insert-and-predict</b> widgets set up their top-level context name
      before calling completion. This allows one to define different sets of
      completer functions for normal completion and for these widgets. For
      example, to use completion, approximation and correction for normal
      completion, completion and correction for incremental completion and only
      completion for prediction one could use:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':completion:*' completer \ </b>
<b>        _complete _correct _approximate</b>
<b>zstyle ':completion:incremental:*' completer \ </b>
<b>        _complete _correct</b>
<b>zstyle ':completion:predict:*' completer \ </b>
<b>        _complete</b>
</pre>
</div>
<div class="Pp"></div>
It is a good idea to restrict the completers used in prediction, because they
  may be automatically invoked as you type. The <b>_list</b> and <b>_menu</b>
  completers should never be used with prediction. The <b>_approximate</b>,
  <b>_correct</b>, <b>_expand</b>, and <b>_match</b> completers may be used, but
  be aware that they may change characters anywhere in the word behind the
  cursor, so you need to watch carefully that the result is what you
  intended.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cursor</b></dt>
  <dd class="It-tag">The <b>insert-and-predict</b> widget uses this style, in
      the context ` <b>:predict</b>', to decide where to place the cursor after
      completion has been tried. Values are:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>complete</b></dt>
  <dd class="It-tag">The cursor is left where it was when completion finished,
      but only if it is after a character equal to the one just inserted by the
      user. If it is after another character, this value is the same as `
      <b>key</b>'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>key</b></dt>
  <dd class="It-tag">The cursor is left after the <i>n</i>th occurrence of the
      character just inserted, where <i>n</i> is the number of times that
      character appeared in the word before completion was attempted. In short,
      this has the effect of leaving the cursor after the character just typed
      even if the completion code found out that no other characters need to be
      inserted at that position.</dd>
</dl>
<div class="Pp"></div>
Any other value for this style unconditionally leaves the cursor at the position
  where the completion code left it.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>list</b></dt>
  <dd class="It-tag">When using the <b>incremental-complete-word</b> widget,
      this style says if the matches should be listed on every key press (if
      they fit on the screen). Use the context prefix `
      <b>:completion:incremental</b>'.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The <b>insert-and-predict</b> widget uses this style to decide if the completion
  should be shown even if there is only one possible completion. This is done if
  the value of this style is the string <b>always</b>. In this case the context
  is ` <b>:predict</b>' (<i>not</i> `<b>:completion:predict</b>').</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>match</b></dt>
  <dd class="It-tag">This style is used by <b>smart-insert-last-word</b> to
      provide a pattern (using full <b>EXTENDED_GLOB</b> syntax) that matches an
      interesting word. The context is the name of the widget to which
      <b>smart-insert-last-word</b> is bound (see above). The default behavior
      of <b>smart-insert-last-word</b> is equivalent to:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle :insert-last-word match '*[[:alpha:]/\\]*'</b>
</pre>
</div>
<div class="Pp"></div>
However, you might want to include words that contain spaces:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle :insert-last-word match '*[[:alpha:][:space:]/\\]*'</b>
</pre>
</div>
<div class="Pp"></div>
Or include numbers as long as the word is at least two characters long:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle :insert-last-word match '*([[:digit:]]?|[[:alpha:]/\\])*'</b>
</pre>
</div>
<div class="Pp"></div>
The above example causes redirections like &quot;2&gt;&quot; to be
  included.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b></dt>
  <dd class="It-tag">The <b>incremental-complete-word</b> widget shows the value
      of this style in the status line during incremental completion. The string
      value may contain any of the following substrings in the manner of the
      <b>PS1</b> and other prompt parameters:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%c</b></dt>
  <dd class="It-tag">Replaced by the name of the completer function that
      generated the matches (without the leading underscore).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%l</b></dt>
  <dd class="It-tag">When the <b>list</b> style is set, replaced by `
      <b>...</b>' if the list of matches is too long to fit on the screen and
      with an empty string otherwise. If the <b>list</b> style is `false' or not
      set, ` <b>%l</b>' is always removed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%n</b></dt>
  <dd class="It-tag">Replaced by the number of matches generated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%s</b></dt>
  <dd class="It-tag">Replaced by `<b>-no match-</b>', `<b>-no prefix-</b>', or
      an empty string if there is no completion matching the word on the line,
      if the matches have no common prefix different from the word on the line,
      or if there is such a common prefix, respectively.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%u</b></dt>
  <dd class="It-tag">Replaced by the unambiguous part of all matches, if there
      is any, and if it is different from the word on the line.</dd>
</dl>
<div class="Pp"></div>
Like ` <b>break-keys</b>', this uses the `<b>:incremental</b>' context.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stop-keys</b></dt>
  <dd class="It-tag">This style is used by the <b>incremental-complete-word</b>
      widget. Its value is treated similarly to the one for the
      <b>break-keys</b> style (and uses the same context: `
      <b>:incremental</b>'). However, in this case all keys matching the pattern
      given as its value will stop incremental completion and will then execute
      their usual function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>toggle</b></dt>
  <dd class="It-tag">This boolean style is used by <b>predict-on</b> and its
      related widgets in the context ` <b>:predict</b>'. If set to one of the
      standard `true' values, predictive typing is automatically toggled off in
      situations where it is unlikely to be useful, such as when editing a
      multi-line buffer or after moving into the middle of a line and then
      deleting a character. The default is to leave prediction turned on until
      an explicit call to <b>predict-off</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>verbose</b></dt>
  <dd class="It-tag">This boolean style is used by <b>predict-on</b> and its
      related widgets in the context ` <b>:predict</b>'. If set to one of the
      standard `true' values, these widgets display a message below the prompt
      when the predictive state is toggled. This is most useful in combination
      with the <b>toggle</b> style. The default does not display these
    messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>widget</b></dt>
  <dd class="It-tag">This style is similar to the <b>command</b> style: For
      widget functions that use <b>zle</b> to call other widgets, this style can
      sometimes be used to override the widget which is called. The context for
      this style is the name of the calling widget ( <i>not</i> the name of the
      calling function, because one function may be bound to multiple widget
      names).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle :copy-earlier-word widget smart-insert-last-word</b>
</pre>
</div>
<div class="Pp"></div>
Check the documentation for the calling widget or function to determine whether
  the <b>widget</b> style is used.</div>
<h1 class="Sh" title="Sh" id="EXCEPTION_HANDLING"><a class="selflink" href="#EXCEPTION_HANDLING">EXCEPTION
  HANDLING</a></h1>
Two functions are provided to enable zsh to provide exception handling in a form
  that should be familiar from other languages.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>throw</b> <i>exception</i></dt>
  <dd class="It-tag">The function <b>throw</b> throws the named
      <i>exception</i>. The name is an arbitrary string and is only used by the
      <b>throw</b> and <b>catch</b> functions. An exception is for the most part
      treated the same as a shell error, i.e. an unhandled exception will cause
      the shell to abort all processing in a function or script and to return to
      the top level in an interactive shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>catch</b> <i>exception-pattern</i></dt>
  <dd class="It-tag">The function <b>catch</b> returns status zero if an
      exception was thrown and the pattern <i>exception-pattern</i> matches its
      name. Otherwise it returns status 1. <i>exception-pattern</i> is a
      standard shell pattern, respecting the current setting of the
      <b>EXTENDED_GLOB</b> option. An alias <b>catch</b> is also defined to
      prevent the argument to the function from matching filenames, so patterns
      may be used unquoted. Note that as exceptions are not fundamentally
      different from other shell errors it is possible to catch shell errors by
      using an empty string as the exception name. The shell variable
      <b>CAUGHT</b> is set by <b>catch</b> to the name of the exception caught.
      It is possible to rethrow an exception by calling the <b>throw</b>
      function again once an exception has been caught.</dd>
</dl>
<div class="Pp"></div>
The functions are designed to be used together with the <b>always</b> construct
  described in <i>zshmisc</i>(1). This is important as only this construct
  provides the required support for exceptions. A typical example is as follows.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>{</b>
<b>  # &quot;try&quot; block</b>
<b>  # ... nested code here calls &quot;throw MyExcept&quot;</b>
<b>} always {</b>
<b>  # &quot;always&quot; block</b>
<b>  if catch MyExcept; then</b>
<b>    print &quot;Caught exception MyExcept&quot;</b>
<b>  elif catch ''; then</b>
<b>    print &quot;Caught a shell error.  Propagating...&quot;</b>
<b>    throw ''</b>
<b>  fi</b>
<b>  # Other exceptions are not handled but may be caught further</b>
<b>  # up the call stack.</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
If all exceptions should be caught, the following idiom might be preferable.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>{</b>
<b>  # ... nested code here throws an exception</b>
<b>} always {</b>
<b>  if catch *; then</b>
<b>    case $CAUGHT in</b>
<b>      (MyExcept)</b>
<b>      print &quot;Caught my own exception&quot;</b>
<b>      ;;</b>
<b>      (*)</b>
<b>      print &quot;Caught some other exception&quot;</b>
<b>      ;;</b>
<b>    esac</b>
<b>  fi</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
In common with exception handling in other languages, the exception may be
  thrown by code deeply nested inside the `try' block. However, note that it
  must be thrown inside the current shell, not in a subshell forked for a
  pipeline, parenthesised current-shell construct, or some form of command or
  process substitution.
<div class="Pp"></div>
The system internally uses the shell variable <b>EXCEPTION</b> to record the
  name of the exception between throwing and catching. One drawback of this
  scheme is that if the exception is not handled the variable <b>EXCEPTION</b>
  remains set and may be incorrectly recognised as the name of an exception if a
  shell error subsequently occurs. Adding <b>unset EXCEPTION</b> at the start of
  the outermost layer of any code that uses exception handling will eliminate
  this problem.
<h1 class="Sh" title="Sh" id="MIME_FUNCTIONS"><a class="selflink" href="#MIME_FUNCTIONS">MIME
  FUNCTIONS</a></h1>
Three functions are available to provide handling of files recognised by
  extension, for example to dispatch a file <b>text.ps</b> when executed as a
  command to an appropriate viewer.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zsh-mime-setup</b> [ <b>-fv</b> ] [ <b>-l</b> [
    <i>suffix ...</i> ] ]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zsh-mime-handler [-l] </b><i>command arguments
    ...</i><b></b><i></i></dt>
  <dd class="It-tag">These two functions use the files <b>~/.mime.types</b> and
      <b>/etc/mime.types</b>, which associate types and extensions, as well as
      <b>~/.mailcap</b> and <b>/etc/mailcap</b> files, which associate types and
      the programs that handle them. These are provided on many systems with the
      Multimedia Internet Mail Extensions.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
To enable the system, the function <b>zsh-mime-setup</b> should be autoloaded
  and run. This allows files with extensions to be treated as executable; such
  files be completed by the function completion system. The function
  <b>zsh-mime-handler</b> should not need to be called by the user.
<div class="Pp"></div>
The system works by setting up suffix aliases with ` <b>alias -s</b>'. Suffix
  aliases already installed by the user will not be overwritten.
<div class="Pp"></div>
For suffixes defined in lower case, upper case variants will also automatically
  be handled (e.g. <b>PDF</b> is automatically handled if handling for the
  suffix <b>pdf</b> is defined), but not vice versa.
<div class="Pp"></div>
Repeated calls to <b>zsh-mime-setup</b> do not override the existing mapping
  between suffixes and executable files unless the option <b>-f</b> is given.
  Note, however, that this does not override existing suffix aliases assigned to
  handlers other than <b>zsh-mime-handler</b>.
<div class="Pp"></div>
Calling <b>zsh-mime-setup</b> with the option <b>-l</b> lists the existing
  mappings without altering them. Suffixes to list (which may contain pattern
  characters that should be quoted from immediate interpretation on the command
  line) may be given as additional arguments, otherwise all suffixes are listed.
<div class="Pp"></div>
Calling <b>zsh-mime-setup</b> with the option <b>-v</b> causes verbose output to
  be shown during the setup operation.
<div class="Pp"></div>
The system respects the <b>mailcap</b> flags <b>needsterminal</b> and
  <b>copiousoutput</b>, see <i>mailcap</i>(4).
<div class="Pp"></div>
The functions use the following styles, which are defined with the <b>zstyle</b>
  builtin command (see <i>zshmodules</i>(1)). They should be defined before
  <b>zsh-mime-setup</b> is run. The contexts used all start with <b>:mime:</b>,
  with additional components in some cases. It is recommended that a trailing
  <b>*</b> (suitably quoted) be appended to style patterns in case the system is
  extended in future. Some examples are given below.
<div class="Pp"></div>
For files that have multiple suffixes, e.g. <b>.pdf.gz</b>, where the context
  includes the suffix it will be looked up starting with the longest possible
  suffix until a match for the style is found. For example, if <b>.pdf.gz</b>
  produces a match for the handler, that will be used; otherwise the handler for
  <b>.gz</b> will be used. Note that, owing to the way suffix aliases work, it
  is always required that there be a handler for the shortest possible suffix,
  so in this example <b>.pdf.gz</b> can only be handled if <b>.gz</b> is also
  handled (though not necessarily in the same way). Alternatively, if no
  handling for <b>.gz</b> on its own is needed, simply adding the command
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>alias -s gz=zsh-mime-handler</b>
</pre>
</div>
<div class="Pp"></div>
to the initialisation code is sufficient; <b>.gz</b> will not be handled on its
  own, but may be in combination with other suffixes.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>current-shell</b></dt>
  <dd class="It-tag">If this boolean style is true, the mailcap handler for the
      context in question is run using the <b>eval</b> builtin instead of by
      starting a new <b>sh</b> process. This is more efficient, but may not work
      in the occasional cases where the mailcap handler uses strict POSIX
      syntax.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>execute-as-is</b></dt>
  <dd class="It-tag">This style gives a list of patterns to be matched against
      files passed for execution with a handler program. If the file matches the
      pattern, the entire command line is executed in its current form, with no
      handler. This is useful for files which might have suffixes but
      nonetheless be executable in their own right. If the style is not set, the
      pattern <b>*(*) *(/)</b> is used; hence executable files are executed
      directly and not passed to a handler, and the option <b>AUTO_CD</b> may be
      used to change to directories that happen to have MIME suffixes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>file-path</b></dt>
  <dd class="It-tag">Used if the style <b>find-file-in-path</b> is true for the
      same context. Set to an array of directories that are used for searching
      for the file to be handled; the default is the command path given by the
      special parameter <b>path</b>. The shell option <b>PATH_DIRS</b> is
      respected; if that is set, the appropriate path will be searched even if
      the name of the file to be handled as it appears on the command line
      contains a ` <b>/</b>'. The full context is
      <b>:mime:.</b><i>suffix</i><b>:</b>, as described for the style
      <b>handler</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>find-file-in-path</b></dt>
  <dd class="It-tag">If set, allows files whose names do not contain absolute
      paths to be searched for in the command path or the path specified by the
      <b>file-path</b> style. If the file is not found in the path, it is looked
      for locally (whether or not the current directory is in the path); if it
      is not found locally, the handler will abort unless the
      <b>handle-nonexistent</b> style is set. Files found in the path are tested
      as described for the style <b>execute-as-is</b>. The full context is
      <b>:mime:.</b> <i>suffix</i><b>:</b>, as described for the style
      <b>handler</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flags</b></dt>
  <dd class="It-tag">Defines flags to go with a handler; the context is as for
      the <b>handler</b> style, and the format is as for the flags in
      <b>mailcap</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>handle-nonexistent</b></dt>
  <dd class="It-tag">By default, arguments that don't correspond to files are
      not passed to the MIME handler in order to prevent it from intercepting
      commands found in the path that happen to have suffixes. This style may be
      set to an array of extended glob patterns for arguments that will be
      passed to the handler even if they don't exist. If it is not explicitly
      set it defaults to <b>[[:alpha:]]#:/*</b> which allows URLs to be passed
      to the MIME handler even though they don't exist in that format in the
      file system. The full context is <b>:mime:.</b><i>suffix</i><b>:</b>, as
      described for the style <b>handler</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>handler</b></dt>
  <dd class="It-tag">Specifies a handler for a suffix; the suffix is given by
      the context as <b>:mime:.</b><i>suffix</i><b>:</b>, and the format of the
      handler is exactly that in <b>mailcap</b>. Note in particular the
      `<b>.</b>' and trailing colon to distinguish this use of the context. This
      overrides any handler specified by the <b>mailcap</b> files. If the
      handler requires a terminal, the <b>flags</b> style should be set to
      include the word <b>needsterminal</b>, or if the output is to be displayed
      through a pager (but not if the handler is itself a pager), it should
      include <b>copiousoutput</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mailcap</b></dt>
  <dd class="It-tag">A list of files in the format of <b>~/.mailcap</b> and
      <b>/etc/mailcap</b> to be read during setup, replacing the default list
      which consists of those two files. The context is <b>:mime:</b>. A
      <b>+</b> in the list will be replaced by the default files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mailcap-priorities</b></dt>
  <dd class="It-tag">This style is used to resolve multiple mailcap entries for
      the same MIME type. It consists of an array of the following elements, in
      descending order of priority; later entries will be used if earlier
      entries are unable to resolve the entries being compared. If none of the
      tests resolve the entries, the first entry encountered is retained.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>files</b></dt>
  <dd class="It-tag">The order of files (entries in the <b>mailcap</b> style)
      read. Earlier files are preferred. (Note this does not resolve entries in
      the same file.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>priority</b></dt>
  <dd class="It-tag">The priority flag from the mailcap entry. The priority is
      an integer from 0 to 9 with the default value being 5.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>flags</b></dt>
  <dd class="It-tag">The test given by the <b>mailcap-prio-flags</b> option is
      used to resolve entries.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>place</b></dt>
  <dd class="It-tag">Later entries are preferred; as the entries are strictly
      ordered, this test always succeeds.</dd>
</dl>
<div class="Pp"></div>
Note that as this style is handled during initialisation, the context is always
  <b>:mime:</b>, with no discrimination by suffix.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mailcap-prio-flags</b></dt>
  <dd class="It-tag">This style is used when the keyword <b>flags</b> is
      encountered in the list of tests specified by the
      <b>mailcap-priorities</b> style. It should be set to a list of patterns,
      each of which is tested against the flags specified in the mailcap entry
      (in other words, the sets of assignments found with some entries in the
      mailcap file). Earlier patterns in the list are preferred to later ones,
      and matched patterns are preferred to unmatched ones.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mime-types</b></dt>
  <dd class="It-tag">A list of files in the format of <b>~/.mime.types</b> and
      <b>/etc/mime.types</b> to be read during setup, replacing the default list
      which consists of those two files. The context is <b>:mime:</b>. A
      <b>+</b> in the list will be replaced by the default files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>never-background</b></dt>
  <dd class="It-tag">If this boolean style is set, the handler for the given
      context is always run in the foreground, even if the flags provided in the
      mailcap entry suggest it need not be (for example, it doesn't require a
      terminal).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pager</b></dt>
  <dd class="It-tag">If set, will be used instead of <b>$PAGER</b> or
      <b>more</b> to handle suffixes where the <b>copiousoutput</b> flag is set.
      The context is as for <b>handler</b>, i.e.
      <b>:mime:.</b><i>suffix</i><b>:</b> for handling a file with the given
      <i>suffix</i>.</dd>
</dl>
<div class="Pp"></div>
Examples:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':mime:*' mailcap ~/.mailcap /usr/local/etc/mailcap</b>
<b>zstyle ':mime:.txt:' handler less %s</b>
<b>zstyle ':mime:.txt:' flags needsterminal</b>
</pre>
</div>
<div class="Pp"></div>
When <b>zsh-mime-setup</b> is subsequently run, it will look for <b>mailcap</b>
  entries in the two files given. Files of suffix <b>.txt</b> will be handled by
  running ` <b>less</b> <i>file.txt</i>'. The flag <b>needsterminal</b> is set
  to show that this program must run attached to a terminal.
<div class="Pp"></div>
As there are several steps to dispatching a command, the following should be
  checked if attempting to execute a file by extension <b>.</b><i>ext</i> does
  not have the expected effect.
<div class="Pp"></div>
The command ` <b>alias -s</b> <i>ext</i>' should show `
  <b>ps=zsh-mime-handler</b>'. If it shows something else, another suffix alias
  was already installed and was not overwritten. If it shows nothing, no handler
  was installed: this is most likely because no handler was found in the
  <b>.mime.types</b> and <b>mailcap</b> combination for <b>.ext</b> files. In
  that case, appropriate handling should be added to <b>~/.mime.types</b> and
  <b>mailcap</b>.
<div class="Pp"></div>
If the extension is handled by <b>zsh-mime-handler</b> but the file is not
  opened correctly, either the handler defined for the type is incorrect, or the
  flags associated with it are in appropriate. Running <b>zsh-mime-setup -l</b>
  will show the handler and, if there are any, the flags. A <b>%s</b> in the
  handler is replaced by the file (suitably quoted if necessary). Check that the
  handler program listed lists and can be run in the way shown. Also check that
  the flags <b>needsterminal</b> or <b>copiousoutput</b> are set if the handler
  needs to be run under a terminal; the second flag is used if the output should
  be sent to a pager. An example of a suitable <b>mailcap</b> entry for such a
  program is:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>text/html; /usr/bin/lynx '%s'; needsterminal</b>
</pre>
</div>
<div class="Pp"></div>
Running ` <b>zsh-mime-handler -l</b> <i>command line</i>' prints the command
  line that would be executed, simplified to remove the effect of any flags, and
  quoted so that the output can be run as a complete zsh command line. This is
  used by the completion system to decide how to complete after a file handled
  by <b>zsh-mime-setup</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pick-web-browser</b></dt>
  <dd class="It-tag">This function is separate from the two MIME functions
      described above and can be assigned directly to a suffix:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -U pick-web-browser</b>
<b>alias -s html=pick-web-browser</b>
</pre>
</div>
<div class="Pp"></div>
It is provided as an intelligent front end to dispatch a web browser. It may be
  run as either a function or a shell script. The status 255 is returned if no
  browser could be started.
<div class="Pp"></div>
Various styles are available to customize the choice of browsers:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>browser-style</b></dt>
  <dd class="It-tag">The value of the style is an array giving preferences in
      decreasing order for the type of browser to use. The values of elements
      may be</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>running</b></dt>
  <dd class="It-tag">Use a GUI browser that is already running when an X Window
      display is available. The browsers listed in the <b>x-browsers</b> style
      are tried in order until one is found; if it is, the file will be
      displayed in that browser, so the user may need to check whether it has
      appeared. If no running browser is found, one is not started. Browsers
      other than Firefox, Opera and Konqueror are assumed to understand the
      Mozilla syntax for opening a URL remotely.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>x</b></dt>
  <dd class="It-tag">Start a new GUI browser when an X Window display is
      available. Search for the availability of one of the browsers listed in
      the <b>x-browsers</b> style and start the first one that is found. No
      check is made for an already running browser.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tty</b></dt>
  <dd class="It-tag">Start a terminal-based browser. Search for the availability
      of one of the browsers listed in the <b>tty-browsers</b> style and start
      the first one that is found.</dd>
</dl>
<div class="Pp"></div>
If the style is not set the default <b>running x tty</b> is used.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>x-browsers</b></dt>
  <dd class="It-tag">An array in decreasing order of preference of browsers to
      use when running under the X Window System. The array consists of the
      command name under which to start the browser. They are looked up in the
      context <b>:mime:</b> (which may be extended in future, so appending `
      <b>*</b>' is recommended). For example,</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle ':mime:*' x-browsers opera konqueror firefox</b>
</pre>
</div>
<div class="Pp"></div>
specifies that <b>pick-web-browser</b> should first look for a running instance
  of Opera, Konqueror or Firefox, in that order, and if it fails to find any
  should attempt to start Opera. The default is <b>firefox mozilla netscape
  opera konqueror</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tty-browsers</b></dt>
  <dd class="It-tag">An array similar to <b>x-browsers</b>, except that it gives
      browsers to use when no X Window display is available. The default is
      <b>elinks links lynx</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>command</b></dt>
  <dd class="It-tag">If it is set this style is used to pick the command used to
      open a page for a browser. The context is
      <b>:mime:browser:new:$browser:</b> to start a new browser or
      <b>:mime:browser:running:$browser:</b> to open a URL in a browser already
      running on the current X display, where <b>$browser</b> is the value
      matched in the <b>x-browsers</b> or <b>tty-browsers</b> style. The escape
      sequence <b>%b</b> in the style's value will be replaced by the browser,
      while <b>%u</b> will be replaced by the URL. If the style is not set, the
      default for all new instances is equivalent to <b>%b %u</b> and the
      defaults for using running browsers are equivalent to the values
      <b>kfmclient openURL %u</b> for Konqueror, <b>firefox -new-tab %u</b> for
      Firefox, <b>opera -newpage %u</b> for Opera, and <b>%b -remote
      &quot;openUrl(%u)&quot;</b> for all others.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="MATHEMATICAL_FUNCTIONS"><a class="selflink" href="#MATHEMATICAL_FUNCTIONS">MATHEMATICAL
  FUNCTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zcalc</b> [ <i>expression</i> ... ]</dt>
  <dd class="It-tag">A reasonably powerful calculator based on zsh's arithmetic
      evaluation facility. The syntax is similar to that of formulae in most
      programming languages; see the section `Arithmetic Evaluation' in
      <i>zshmisc</i>(1) for details. The mathematical library
      <b>zsh/mathfunc</b> will be loaded if it is available; see the section
      `The zsh/mathfunc Module' in <i>zshmodules</i>(1). The mathematical
      functions correspond to the raw system libraries, so trigonometric
      functions are evaluated using radians, and so on.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Each line typed is evaluated as an expression. The prompt shows a number, which
  corresponds to a positional parameter where the result of that calculation is
  stored. For example, the result of the calculation on the line preceded by `
  <b>4&gt; </b>' is available as <b>$4</b>. The last value calculated is
  available as <b>ans</b>. Full command line editing, including the history of
  previous calculations, is available; the history is saved in the file
  <b>~/.zcalc_history</b>. To exit, enter a blank line or type ` <b>:q</b>' on
  its own (` <b>q</b>' is allowed for historical compatibility).
<div class="Pp"></div>
If arguments are given to <b>zcalc</b> on start up, they are used to prime the
  first few positional parameters. A visual indication of this is given when the
  calculator starts.
<div class="Pp"></div>
The constants <b>PI</b> (3.14159...) and <b>E</b> (2.71828...) are provided.
  Parameter assignment is possible, but note that all parameters will be put
  into the global namespace.
<div class="Pp"></div>
The output base can be initialised by passing the option `
  <b>-#</b><i>base</i>', for example ` <b>zcalc -#16</b>' (the `<b>#</b>' may
  have to be quoted, depending on the globbing options set).
<div class="Pp"></div>
The prompt is configurable via the parameter <b>ZCALCPROMPT</b>, which undergoes
  standard prompt expansion. The index of the current entry is stored locally in
  the first element of the array <b>psvar</b>, which can be referred to in
  <b>ZCALCPROMPT</b> as ` <b>%1v</b>'. The default prompt is ` <b>%1v&gt; </b>'.
<div class="Pp"></div>
A few special commands are available; these are introduced by a colon. For
  backward compatibility, the colon may be omitted for certain commands.
  Completion is available if <b>compinit</b> has been run.
<div class="Pp"></div>
The output precision may be specified within zcalc by special commands familiar
  from many calculators.
<dl class="Bl-tag">
  <dt class="It-tag"><b>:norm</b></dt>
  <dd class="It-tag">The default output format. It corresponds to the printf
      <b>%g</b> specification. Typically this shows six decimal digits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:sci</b> <i>digits</i></dt>
  <dd class="It-tag">Scientific notation, corresponding to the printf <b>%g</b>
      output format with the precision given by <i>digits</i>. This produces
      either fixed point or exponential notation depending on the value
    output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:fix</b> <i>digits</i></dt>
  <dd class="It-tag">Fixed point notation, corresponding to the printf <b>%f</b>
      output format with the precision given by <i>digits</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:eng</b> <i>digits</i></dt>
  <dd class="It-tag">Exponential notation, corresponding to the printf <b>%E</b>
      output format with the precision given by <i>digits</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:raw</b></dt>
  <dd class="It-tag">Raw output: this is the default form of the output from a
      math evaluation. This may show more precision than the number actually
      possesses.</dd>
</dl>
<div class="Pp"></div>
Other special commands:
<dl class="Bl-tag">
  <dt class="It-tag"><b>:!</b><i>line...</i></dt>
  <dd class="It-tag">Execute <i>line...</i> as a normal shell command line. Note
      that it is executed in the context of the function, i.e. with local
      variables. Space is optional after <b>:!</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:local</b> <i>arg</i> ...</dt>
  <dd class="It-tag">Declare variables local to the function. Note that certain
      variables are used by the function for its own purposes. Other variables
      may be used, too, but they will be taken from or put into the global
      scope.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:function</b> <i>name</i> [ <i>body</i> ]</dt>
  <dd class="It-tag">Define a mathematical function or (with no <i>body</i>)
      delete it. The function is defined using <b>zmathfuncdef</b>, see
    below.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Note that <b>zcalc</b> takes care of all quoting. Hence for example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>function cube $1 * $1 * $1</b>
</pre>
</div>
<div class="Pp"></div>
defines a function to cube the sole argument.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[#</b><i>base</i><b>]</b></dt>
  <dd class="It-tag">This is not a special command, rather part of normal
      arithmetic syntax; however, when this form appears on a line by itself the
      default output radix is set to <i>base</i>. Use, for example,
      `<b>[#16]</b>' to display hexadecimal output preceded by an indication of
      the base, or ` <b>[##16]</b>' just to display the raw number in the given
      base. Bases themselves are always specified in decimal. ` <b>[#]</b>'
      restores the normal output format. Note that setting an output base
      suppresses floating point output; use ` <b>[#]</b>' to return to normal
      operation.</dd>
</dl>
<div class="Pp"></div>
See the comments in the function for a few extra tips.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zmathfuncdef</b> [ <i>mathfunc</i> [ <i>body</i> ]
    ]</dt>
  <dd class="It-tag">A convenient front end to <b>functions -M</b>.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
With two arguments, define a mathematical function named <i>mathfunc</i> which
  can be used in any form of arithmetic evaluation. <i>body</i> is a
  mathematical expression to implement the function. It may contain references
  to position parameters <b>$1</b>, <b>$2</b>, ... to refer to mandatory
  parameters and <b>${1:-</b><i>defvalue</i><b>}</b> ... to refer to optional
  parameters. Note that the forms must be strictly adhered to for the function
  to calculate the correct number of arguments. The implementation is held in a
  shell function named <b>zsh_math_func_</b><i>mathfunc</i>; usually the user
  will not need to refer to the shell function directly. Any existing function
  of the same name is silently replaced.
<div class="Pp"></div>
With one argument, remove the mathematical function <i>mathfunc</i> as well as
  the shell function implementation.
<div class="Pp"></div>
With no arguments, list all <i>mathfunc</i> functions in a form suitable for
  restoring the definition. The functions have not necessarily been defined by
  <b>zmathfuncdef</b>.</div>
<h1 class="Sh" title="Sh" id="USER_CONFIGURATION_FUNCTIONS"><a class="selflink" href="#USER_CONFIGURATION_FUNCTIONS">USER
  CONFIGURATION FUNCTIONS</a></h1>
The <b>zsh/newuser</b> module comes with a function to aid in configuring shell
  options for new users. If the module is installed, this function can also be
  run by hand. It is available even if the module's default behaviour, namely
  running the function for a new user logging in without startup files, is
  inhibited.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zsh-newuser-install</b> [ <b>-f</b> ]</dt>
  <dd class="It-tag">The function presents the user with various options for
      customizing their initialization scripts. Currently only <b>~/.zshrc</b>
      is handled. <b>$ZDOTDIR/.zshrc</b> is used instead if the parameter
      <b>ZDOTDIR</b> is set; this provides a way for the user to configure a
      file without altering an existing <b>.zshrc</b>.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
By default the function exits immediately if it finds any of the files
  <b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b>, or <b>.zlogin</b> in the
  appropriate directory. The option <b>-f</b> is required in order to force the
  function to continue. Note this may happen even if <b>.zshrc</b> itself does
  not exist.
<div class="Pp"></div>
As currently configured, the function will exit immediately if the user has root
  privileges; this behaviour cannot be overridden.
<div class="Pp"></div>
Once activated, the function's behaviour is supposed to be self-explanatory.
  Menus are present allowing the user to alter the value of options and
  parameters. Suggestions for improvements are always welcome.
<div class="Pp"></div>
When the script exits, the user is given the opportunity to save the new file or
  not; changes are not irreversible until this point. However, the script is
  careful to restrict changes to the file only to a group marked by the lines `
  <b># Lines configured by zsh-newuser-install</b>' and ` <b># End of lines
  configured by zsh-newuser-install</b>'. In addition, the old version of
  <b>.zshrc</b> is saved to a file with the suffix <b>.zni</b> appended.
<div class="Pp"></div>
If the function edits an existing <b>.zshrc</b>, it is up to the user to ensure
  that the changes made will take effect. For example, if control usually
  returns early from the existing <b>.zshrc</b> the lines will not be executed;
  or a later initialization file may override options or parameters, and so on.
  The function itself does not attempt to detect any such conflicts.</div>
<h1 class="Sh" title="Sh" id="OTHER_FUNCTIONS"><a class="selflink" href="#OTHER_FUNCTIONS">OTHER
  FUNCTIONS</a></h1>
There are a large number of helpful functions in the <b>Functions/Misc</b>
  directory of the zsh distribution. Most are very simple and do not require
  documentation here, but a few are worthy of special mention.
<h2 class="Ss" title="Ss" id="Descriptions"><a class="selflink" href="#Descriptions">Descriptions</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>colors</b></dt>
  <dd class="It-tag">This function initializes several associative arrays to map
      color names to (and from) the ANSI standard eight-color terminal codes.
      These are used by the prompt theme system (see above). You seldom should
      need to run <b>colors</b> more than once.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The eight base colors are: black, red, green, yellow, blue, magenta, cyan, and
  white. Each of these has codes for foreground and background. In addition
  there are eight intensity attributes: bold, faint, standout, underline, blink,
  reverse, and conceal. Finally, there are six codes used to negate attributes:
  none (reset all attributes to the defaults), normal (neither bold nor faint),
  no-standout, no-underline, no-blink, and no-reverse.
<div class="Pp"></div>
Some terminals do not support all combinations of colors and intensities.
<div class="Pp"></div>
The associative arrays are:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag">color</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">colour</dt>
  <dd class="It-tag">Map all the color names to their integer codes, and integer
      codes to the color names. The eight base names map to the foreground color
      codes, as do names prefixed with ` <b>fg-</b>', such as `<b>fg-red</b>'.
      Names prefixed with ` <b>bg-</b>', such as `<b>bg-blue</b>', refer to the
      background codes. The reverse mapping from code to color yields base name
      for foreground codes and the <b>bg-</b> form for backgrounds.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Although it is a misnomer to call them `colors', these arrays also map the other
  fourteen attributes from names to codes and codes to names.</div>
<dl class="Bl-tag">
  <dt class="It-tag">fg</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fg_bold</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fg_no_bold</dt>
  <dd class="It-tag">Map the eight basic color names to ANSI terminal escape
      sequences that set the corresponding foreground text properties. The
      <b>fg</b> sequences change the color without changing the eight intensity
      attributes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">bg</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">bg_bold</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">bg_no_bold</dt>
  <dd class="It-tag">Map the eight basic color names to ANSI terminal escape
      sequences that set the corresponding background properties. The <b>bg</b>
      sequences change the color without changing the eight intensity
      attributes.</dd>
</dl>
<div class="Pp"></div>
In addition, the scalar parameters <b>reset_color</b> and <b>bold_color</b> are
  set to the ANSI terminal escapes that turn off all attributes and turn on bold
  intensity, respectively.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fned</b> <i>name</i></dt>
  <dd class="It-tag">Same as <b>zed -f</b>. This function does not appear in the
      zsh distribution, but can be created by linking <b>zed</b> to the name
      <b>fned</b> in some directory in your <b>fpath</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>is-at-least</b> <i>needed</i> [ <i>present</i> ]</dt>
  <dd class="It-tag">Perform a greater-than-or-equal-to comparison of two
      strings having the format of a zsh version number; that is, a string of
      numbers and text with segments separated by dots or dashes. If the
      <i>present</i> string is not provided, <b>$ZSH_VERSION</b> is used.
      Segments are paired left-to-right in the two strings with leading
      non-number parts ignored. If one string has fewer segments than the other,
      the missing segments are considered zero.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This is useful in startup files to set options and other state that are not
  available in all versions of zsh.
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>is-at-least 3.1.6-15 &amp;&amp; setopt NO_GLOBAL_RCS</b>
<b>is-at-least 3.1.0 &amp;&amp; setopt HIST_REDUCE_BLANKS</b>
<b>is-at-least 2.6-17 || print &quot;You can't use is-at-least here.&quot;</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nslookup</b> [ <i>arg</i> ... ]</dt>
  <dd class="It-tag">This wrapper function for the <b>nslookup</b> command
      requires the <b>zsh/zpty</b> module (see <i>zshmodules</i>(1)). It behaves
      exactly like the standard <b>nslookup</b> except that it provides
      customizable prompts (including a right-side prompt) and completion of
      nslookup commands, host names, etc. (if you use the function-based
      completion system). Completion styles may be set with the context prefix `
      <b>:completion:nslookup</b>'.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
See also the <b>pager</b>, <b>prompt</b> and <b>rprompt</b> styles below.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>regexp-replace</b> <i>var</i> <i>regexp</i>
    <i>replace</i></dt>
  <dd class="It-tag">Use regular expressions to perform a global search and
      replace operation on a variable. If the option <b>RE_MATCH_PCRE</b> is not
      set, POSIX extended regular expressions are used, else Perl-compatible
      regular expressions (this requires the shell to be linked against the
      <b>pcre</b> library).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<i>var</i> is the name of the variable containing the string to be matched. The
  variable will be modified directly by the function. The variables
  <b>MATCH</b>, <b>MBEGIN</b>, <b>MEND</b>, <b>match</b>, <b>mbegin</b>,
  <b>mend</b> should be avoided as these are used by the regular expression
  code.
<div class="Pp"></div>
<i>regexp</i> is the regular expression to match against the string.
<div class="Pp"></div>
<i>replace</i> is the replacement text. This can contain parameter, command and
  arithmetic expressions which will be replaced: in particular, a reference to
  <b>$MATCH</b> will be replaced by the text matched by the pattern.
<div class="Pp"></div>
The return status is 0 if at least one match was performed, else 1.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>run-help</b> <i>cmd</i></dt>
  <dd class="It-tag">This function is designed to be invoked by the
      <b>run-help</b> ZLE widget, in place of the default alias. See `Accessing
      On-Line Help' above for setup instructions.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
In the discussion which follows, if <i>cmd</i> is a file system path, it is
  first reduced to its rightmost component (the file name).
<div class="Pp"></div>
Help is first sought by looking for a file named <i>cmd</i> in the directory
  named by the <b>HELPDIR</b> parameter. If no file is found, an assistant
  function, alias, or command named <b>run-help-</b><i>cmd</i><b></b><i> is
  sought. If</i> <i>found, the assistant is executed with the rest of the
  current command line</i> <i>(everything after the command name
  </i><i>cmd</i><i>) as its arguments. When</i> <i>neither file nor assistant is
  found, the external command</i> <i>`</i><b>man</b><i> </i><i>cmd</i><i>' is
  run.</i>
<div class="Pp"></div>
An example assistant for the &quot;ssh&quot; command:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>run-help-ssh() {</b>
<b>    emulate -LR zsh</b>
<b>    local -a args</b>
<b>    # Delete the &quot;-l username&quot; option</b>
<b>    zparseopts -D -E -a args l:</b>
<b>    # Delete other options, leaving: host command</b>
<b>    args=(${@:#-*})</b>
<b>    if [[ ${#args} -lt 2 ]]; then</b>
<b>        man ssh</b>
<b>    else</b>
<b>        run-help $args[2]</b>
<b>    fi</b>
<b>}</b>
</pre>
</div>
<div class="Pp"></div>
Several of these assistants are provided in the <b>Functions/Misc</b> directory.
  These must be autoloaded, or placed as executable scripts in your search path,
  in order to be found and used by <b>run-help</b>.
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>run-help-git</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>run-help-svk</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>run-help-svn</b></dt>
  <dd class="It-tag">Assistant functions for the <b>git</b>, <b>svk</b>, and
      <b>svn</b> commands.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tetris</b></dt>
  <dd class="It-tag">Zsh was once accused of not being as complete as Emacs,
      because it lacked a Tetris game. This function was written to refute this
      vicious slander.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
This function must be used as a ZLE widget:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -U tetris</b>
<b>zle -N tetris</b>
<b>bindkey </b><i>keys</i><b> tetris</b><i></i>
</pre>
</div>
<div class="Pp"></div>
To start a game, execute the widget by typing the <i>keys</i>. Whatever command
  line you were editing disappears temporarily, and your keymap is also
  temporarily replaced by the Tetris control keys. The previous editor state is
  restored when you quit the game (by pressing ` <b>q</b>') or when you lose.
<div class="Pp"></div>
If you quit in the middle of a game, the next invocation of the <b>tetris</b>
  widget will continue where you left off. If you lost, it will start a new
  game.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zargs</b> [ <i>option</i> ... <b>-</b><b>-</b> ] [
    <i>input</i> ... ] [ <b>-</b><b>-</b> <i>command</i> [ <i>arg</i> ... ]
    ]</dt>
  <dd class="It-tag">This function has a similar purpose to GNU xargs. Instead
      of reading lines of arguments from the standard input, it takes them from
      the command line. This is useful because zsh, especially with recursive
      glob operators, often can construct a command line for a shell function
      that is longer than can be accepted by an external command.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
The <i>option</i> list represents options of the <b>zargs</b> command itself,
  which are the same as those of <b>xargs</b>. The <i>input</i> list is the
  collection of strings (often file names) that become the arguments of the
  <b>command</b>, analogous to the standard input of <b>xargs</b>. Finally, the
  <i>arg</i> list consists of those arguments (usually options) that are passed
  to the <i>command</i> each time it runs. The <i>arg</i> list precedes the
  elements from the <b>input</b> list in each run. If no <i>command</i> is
  provided, then no <i>arg</i> list may be provided, and in that event the
  default command is ` <b>print</b>' with arguments `<b>-r -</b><b>-</b>'.
<div class="Pp"></div>
For example, to get a long <b>ls</b> listing of all plain files in the current
  directory or its subdirectories:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>autoload -U zargs</b>
<b>zargs -- **/*(.) -- ls -l</b>
</pre>
</div>
<div class="Pp"></div>
Note that ` <b>-</b><b>-</b>' is used both to mark the end of the <i>option</i>
  list and to mark the end of the <i>input</i> list, so it must appear twice
  whenever the <i>input</i> list may be empty. If there is guaranteed to be at
  least one <i>input</i> and the first <i>input</i> does not begin with a `
  <b>-</b>', then the first ` <b>-</b><b>-</b>' may be omitted.
<div class="Pp"></div>
In the event that the string ` <b>-</b><b>-</b>' is or may be an <i>input</i>,
  the <b>-e</b> option may be used to change the end-of-inputs marker. Note that
  this does <i>not</i> change the end-of-options marker. For example, to use `
  <b>..</b>' as the marker:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zargs -e.. -- **/*(.) .. ls -l</b>
</pre>
</div>
<div class="Pp"></div>
This is a good choice in that example because no plain file can be named `
  <b>..</b>', but the best end-marker depends on the circumstances.
<div class="Pp"></div>
The options <b>-i</b>, <b>-I</b>, <b>-l</b>, <b>-L</b>, and <b>-n</b> differ
  slightly from their usage in <b>xargs</b>. There are no input lines for
  <b>zargs</b> to count, so <b>-l</b> and <b>-L</b> count through the
  <i>input</i> list, and <b>-n</b> counts the number of arguments passed to each
  execution of <i>command</i>, <i>including</i> any <i>arg</i> list. Also, any
  time <b>-i</b> or <b>-I</b> is used, each <i>input</i> is processed separately
  as if by ` <b>-L</b> <b>1</b>'.
<div class="Pp"></div>
For details of the other <b>zargs</b> options, see <i>xargs</i>(1) (but note the
  difference in function between <b>zargs</b> and <b>xargs</b>) or run
  <b>zargs</b> with the <b>-</b><b>-help</b> option.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zed</b> [ <b>-f</b> ] <i>name</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zed -b</b></dt>
  <dd class="It-tag">This function uses the ZLE editor to edit a file or
      function.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Only one <i>name</i> argument is allowed. If the <b>-f</b> option is given, the
  name is taken to be that of a function; if the function is marked for
  autoloading, <b>zed</b> searches for it in the <b>fpath</b> and loads it. Note
  that functions edited this way are installed into the current shell, but
  <i>not</i> written back to the autoload file.
<div class="Pp"></div>
Without <b>-f</b>, <i>name</i> is the path name of the file to edit, which need
  not exist; it is created on write, if necessary.
<div class="Pp"></div>
While editing, the function sets the main keymap to <b>zed</b> and the vi
  command keymap to <b>zed-vicmd</b>. These will be copied from the existing
  <b>main</b> and <b>vicmd</b> keymaps if they do not exist the first time
  <b>zed</b> is run. They can be used to provide special key bindings used only
  in zed.
<div class="Pp"></div>
If it creates the keymap, <b>zed</b> rebinds the return key to insert a line
  break and ` <b>^X^W</b>' to accept the edit in the <b>zed</b> keymap, and
  binds ` <b>ZZ</b>' to accept the edit in the <b>zed-vicmd</b> keymap.
<div class="Pp"></div>
The bindings alone can be installed by running ` <b>zed -b</b>'. This is
  suitable for putting into a startup file. Note that, if rerun, this will
  overwrite the existing <b>zed</b> and <b>zed-vicmd</b> keymaps.
<div class="Pp"></div>
Completion is available, and styles may be set with the context prefix `
  <b>:completion:zed</b>'.
<div class="Pp"></div>
A zle widget <b>zed-set-file-name</b> is available. This can be called by name
  from within zed using ` <b>\ex zed-set-file-name</b>' (note, however, that
  because of zed's rebindings you will have to type <b>^j</b> at the end instead
  of the return key), or can be bound to a key in either of the <b>zed</b> or
  <b>zed-vicmd</b> keymaps after `<b>zed -b</b>' has been run. When the widget
  is called, it prompts for a new name for the file being edited. When zed exits
  the file will be written under that name and the original file will be left
  alone. The widget has no effect with ` <b>zed -f</b>'.
<div class="Pp"></div>
While <b>zed-set-file-name</b> is running, zed uses the keymap
  <b>zed-normal-keymap</b>, which is linked from the main keymap in effect at
  the time zed initialised its bindings. (This is to make the return key operate
  normally.) The result is that if the main keymap has been changed, the widget
  won't notice. This is not a concern for most users.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zcp</b> [ <b>-finqQvwW</b> ] <i>srcpat</i>
    <i>dest</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zln</b> [ <b>-finqQsvwW</b> ] <i>srcpat</i>
    <i>dest</i></dt>
  <dd class="It-tag">Same as <b>zmv -C</b> and <b>zmv -L</b>, respectively.
      These functions do not appear in the zsh distribution, but can be created
      by linking <b>zmv</b> to the names <b>zcp</b> and <b>zln</b> in some
      directory in your <b>fpath</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zkbd</b></dt>
  <dd class="It-tag">See `Keyboard Definition' above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zmv</b> [ <b>-finqQsvwW</b> ] [ -C | -L | -M | -p
    <i>program</i> ] [ -o <i>optstring</i> ] <i>srcpat</i> <i>dest</i></dt>
  <dd class="It-tag">Move (usually, rename) files matching the pattern
      <i>srcpat</i> to corresponding files having names of the form given by
      <i>dest</i>, where <i>srcpat</i> contains parentheses surrounding patterns
      which will be replaced in turn by $1, $2, ... in <i>dest</i>. For
    example,</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zmv '(*).lis' '$1.txt'</b>
</pre>
</div>
<div class="Pp"></div>
renames ` <b>foo.lis</b>' to `<b>foo.txt</b>', `<b>my.old.stuff.lis</b>' to `
  <b>my.old.stuff.txt</b>', and so on.
<div class="Pp"></div>
The pattern is always treated as an <b>EXTENDED_GLOB</b> pattern. Any file whose
  name is not changed by the substitution is simply ignored. Any error (a
  substitution resulted in an empty string, two substitutions gave the same
  result, the destination was an existing regular file and <b>-f</b> was not
  given) causes the entire function to abort without doing anything.
<div class="Pp"></div>
Options:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">Force overwriting of destination files. Not currently
      passed down to the <b>mv</b>/<b>cp</b>/<b>ln</b> command due to vagaries
      of implementations (but you can use <b>-o-f</b> to do that).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">Interactive: show each line to be executed and ask the user
      whether to execute it. `Y' or `y' will execute it, anything else will skip
      it. Note that you just need to type one character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">No execution: print what would happen, but don't do
    it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">Turn bare glob qualifiers off: now assumed by default, so
      this has no effect.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Q</b></dt>
  <dd class="It-tag">Force bare glob qualifiers on. Don't turn this on unless
      you are actually using glob qualifiers in a pattern.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">Symbolic, passed down to <b>ln</b>; only works with
      <b>-L</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Verbose: print each command as it's being executed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b></dt>
  <dd class="It-tag">Pick out wildcard parts of the pattern, as described above,
      and implicitly add parentheses for referring to them.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-W</b></dt>
  <dd class="It-tag">Just like <b>-w</b>, with the addition of turning wildcards
      in the replacement pattern into sequential ${1} .. ${N} references.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b></dt>
  <dd class="It-tag">Force <b>cp</b>, <b>ln</b> or <b>mv</b>, respectively,
      regardless of the name of the function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b> <i>program</i></dt>
  <dd class="It-tag">Call <i>program</i> instead of <b>cp</b>, <b>ln</b> or
      <b>mv</b>. Whatever it does, it should at least understand the form `
      <i>program</i> <b>-</b><b>-</b> <i>oldname</i> <i>newname</i>' where
      <i>oldname</i> and <i>newname</i> are filenames generated by
    <b>zmv</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b> <i>optstring</i></dt>
  <dd class="It-tag">The <i>optstring</i> is split into words and passed down
      verbatim to the <b>cp</b>, <b>ln</b> or <b>mv</b> command called to
      perform the work. It should probably begin with a ` <b>-</b>'.</dd>
</dl>
<div class="Pp"></div>
Further examples:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zmv -v '(* *)' '${1// /_}'</b>
</pre>
</div>
<div class="Pp"></div>
For any file in the current directory with at least one space in the name,
  replace every space by an underscore and display the commands executed.
<div class="Pp"></div>
For more complete examples and other implementation details, see the <b>zmv</b>
  source file, usually located in one of the directories named in your
  <b>fpath</b>, or in <b>Functions/Misc/zmv</b> in the zsh distribution.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zrecompile</b></dt>
  <dd class="It-tag">See `Recompiling Functions' above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zstyle+</b> <i>context</i> <i>style</i> <i>value</i> [ +
    <i>subcontext</i> <i>style</i> <i>value</i> ... ]</dt>
  <dd class="It-tag">This makes defining styles a bit simpler by using a single
      ` <b>+</b>' as a special token that allows you to append a context name to
      the previously used context name. Like this:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>zstyle+ ':foo:bar' style1 value1 \ </b>
<b>      + ':baz'     style2 value2 \ </b>
<b>      + ':frob'    style3 value3</b>
</pre>
</div>
<div class="Pp"></div>
This defines `style1' with `value1' for the context <b>:foo:bar</b> as usual,
  but it also defines `style2' with `value2' for the context <b>:foo:bar:baz</b>
  and `style3' with `value3' for <b>:foo:bar:frob</b>. Any <i>subcontext</i> may
  be the empty string to re-use the first context unchanged.</div>
<h2 class="Ss" title="Ss" id="Styles"><a class="selflink" href="#Styles">Styles</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>insert-tab</b></dt>
  <dd class="It-tag">The <b>zed</b> function <i>sets</i> this style in context
      `<b>:completion:zed:*</b>' to turn off completion when <b>TAB</b> is typed
      at the beginning of a line. You may override this by setting your own
      value for this context and style.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pager</b></dt>
  <dd class="It-tag">The <b>nslookup</b> function looks up this style in the
      context ` <b>:nslookup</b>' to determine the program used to display
      output that does not fit on a single screen.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rprompt</b></dt>
  <dd class="It-tag">The <b>nslookup</b> function looks up this style in the
      context ` <b>:nslookup</b>' to set the prompt and the right-side prompt,
      respectively. The usual expansions for the <b>PS1</b> and <b>RPS1</b>
      parameters may be used (see EXPANSION OF PROMPT SEQUENCES in
      <i>zshmisc</i>(1)).</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">December 21, 2012</td>
    <td class="foot-os">zsh 5.0.2</td>
  </tr>
</table>
</body>
</html>
