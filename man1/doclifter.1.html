<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:04:55 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DOCLIFTER(1) Documentation Tools DOCLIFTER(1)</p>

<p style="margin-top: 1em">NAME <br>
doclifter - translate troff requests into DocBook</p>

<p style="margin-top: 1em">SYNOPSIS <br>
doclifter [-e encoding] [-h hintfile] [-q] [-x] [-v] [-w]
[-V] [-D token=type] [-I path] [-I path] file...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
doclifter translates documents written in troff macros to
DocBook. Structural subsets of the requests in man(7),
mdoc(7), ms(7), me(7), mm(7), and troff(1) are
supported.</p>

<p style="margin-top: 1em">The translation brings over all
the structure of the original document at section,
subsection, and paragraph level. Command and C function
synopses are translated into DocBook <br>
markup, not just a verbatim display. Tables (TBL markup) are
translated into DocBook table markup. PIC diagrams are
translated into SVG. Troff-level information that might have
<br>
structural implications is preserved in XML comments.</p>

<p style="margin-top: 1em">Where possible, font-change
macros are translated into structural markup. doclifter
recognizes stereotyped patterns of markup and content (such
as the use of italics in a FILES <br>
section to mark filenames) and lifts them. A means to edit,
add, and save semantic hints about highlighting is
supported.</p>

<p style="margin-top: 1em">Some cliches are recognized and
lifted to structural markup even without highlighting.
Patterns recognized include such things as URLs, email
addresses, man page references, and <br>
C program listings.</p>

<p style="margin-top: 1em">The tag .in and .ti requests are
passed through with complaints. They indicate
presentation-level markup that doclifter cannot translate
into structure; the output will require <br>
hand-fixing.</p>

<p style="margin-top: 1em">The tag .ta is passed through
with a complaint unless the immediarely following by text
lines contains a tab, in which case the following span of
lines containing tabs is lifted <br>
to a table.</p>

<p style="margin-top: 1em">Under some circumstances,
doclifter can even lift formatted manual pages and the text
output produced by lynx(1) from HTML. If it finds no macros
in the input, but does find a <br>
NAME section header, it tries to interpret the plain text as
a manual page (skipping boilerplate headers and footers
generated by lynx(1)). Translations produced in this way
will <br>
be prone to miss structural features, but this fallback is
good enough for simple man pages.</p>

<p style="margin-top: 1em">doclifter does not do a perfect
job, merely a surprisingly good one. Final polish should be
applied by a human being capable of recognizing patterns too
subtle for a computer. <br>
But doclifter will almost always produce translations that
are good enough to be usable before hand-hacking.</p>

<p style="margin-top: 1em">See the Troubleshooting section
for discussion of how to solve document conversion
problems.</p>

<p style="margin-top: 1em">OPTIONS <br>
If called without arguments doclifter acts as a filter,
translating troff source input on standard input to DocBook
markup on standard output. If called with arguments, each
<br>
argument file is translated separately (but hints are
retained, see below); the suffix .xml is given to the
translated output.</p>

<p style="margin-top: 1em">-h <br>
Name a file to which information on semantic hints gathered
during analysis should be written.</p>

<p style="margin-top: 1em">-D <br>
The -D allows you to post a hint. This may be useful, for
example, if doclifter is mis-parsing a synopsis because it
doesn&rsquo;t recognize a token as a command. This hint is
<br>
merged after hints in the input source have been read.</p>

<p style="margin-top: 1em">-I <br>
The -I option adds its argument to the include path used
when docfilter searches for inclusions. The include path is
initially just the current directory.</p>

<p style="margin-top: 1em">-e <br>
The -e allows you to set the encoding field to be emitted in
the output XML. It defaults to ISO-8859-1 (Latin-1).</p>

<p style="margin-top: 1em">-q <br>
Normally, requests that doclifter could not interpret
(usually because they&rsquo;re presentation-level) are
passed through to XML comments in the output. The -q option
suppresses <br>
this. It also suppresses listing of macros. Messages about
requests that are unrecognized or cannot be translated go to
standard error whatever the state of this option. This <br>
option is intended to reduce clutter when you believe you
have a clean lift of a document and want to lose the troff
legacy.</p>

<p style="margin-top: 1em">-x <br>
The -x option requests that doclifter generated DocBook
version 5 compatible xml content, rather than its default
DocBook version 4.4 output. Inclusions and entities may not
<br>
be handled correctly with this switch enabled.</p>

<p style="margin-top: 1em">-v <br>
The -v option makes doclifter noisier about what it&rsquo;s
doing. This is mainly useful for debugging.</p>

<p style="margin-top: 1em">-w <br>
Enable strict portability checking. Multiple instances of -w
increase the strictness. See the section called
&acirc;PORTABILITY CHECKING&acirc;.</p>

<p style="margin-top: 1em">-V <br>
With this option, the program emits a version message and
exits.</p>

<p style="margin-top: 1em">TRANSLATION RULES <br>
Overall, you can expect that font changes will be turned
into Emphasis macros with a Remap attribute taken from the
troff font name. The basic font names are R, I, B, U, CW,
and <br>
SM.</p>

<p style="margin-top: 1em">Troff and macro-package special
character escapes are mapped into ISO character
entities.</p>

<p style="margin-top: 1em">When doclifter encounters a .so
directive, it searches for the file. If it can get read
access to the file, and open it, and the file consists
entirely of command lines and <br>
comments, then it is included. If any of these conditions
fails, an entity reference for it is generated.</p>

<p style="margin-top: 1em">doclifter performs special
parsing when it recognizes a display such as is generated by
.DS/.DE. It repeatedly tries to parse first a function
synopsis, and then plain text off <br>
what remains in the display. Thus, most inline C function
prototypes will be lifted to structured markup.</p>

<p style="margin-top: 1em">Some notes on specific
translations:</p>

<p style="margin-top: 1em">Man Translation <br>
doclifter does a good job on most man pages, It knows about
the extended UR/UE/UN and URL requests supported under
Linux. If any .UR request is present, it will translate
these <br>
but not wrap URLs outide them with Ulink tags. It also knows
about the extended .L (literal) font markup from Bell Labs
Version 8, and its friends.</p>

<p style="margin-top: 1em">The .TH macro is used to
generate a RefMeta section. If present, the
date/source/manual arguments (see man(7)) are wrapped in
RefMiscInfo tag pairs with those class attributes. <br>
Note that doclifter does not change the date.</p>

<p style="margin-top: 1em">doclifter performs special
parsing when it recognizes a synopsis section. It repeatedly
tries to parse first a function synopsis, then a command
synopsis, and then plain text off <br>
what remains in the section.</p>

<p style="margin-top: 1em">The following man macros are
translated into emphasis tags with a remap attribute: .B,
.I, .L, .BI, .BR, .BL, .IB, .IR, .IL, .RB, .RI, .RL, .LB,
.LI, .LR, .SB, .SM. Some <br>
stereotyped patterns involving these macros are recognized
and turned into semantic markup.</p>

<p style="margin-top: 1em">The following macros are
translated into paragraph breaks: .LP, .PP, .P, .HP, and the
single-argument form of .IP.</p>

<p style="margin-top: 1em">The two-argument form of .IP is
translated either as a VariableList (usually) or
ItemizedList (if the tag is the troff bullet or square
character).</p>

<p style="margin-top: 1em">The following macros are
translated semantically: .SH,.SS, .TP, .UR, .UE, .UN, .IX. A
.UN call just before .SH or .SS sets the ID for the new
section.</p>

<p style="margin-top: 1em">The , , , and symbols are
translated.</p>

<p style="margin-top: 1em">The following (purely
presentation-level) macros are ignored: .PD,.DT.</p>

<p style="margin-top: 1em">The .RS/.RE macros are
translated differently depending on whether or not they
precede list markup. When .RS occurs just before .TP or .IP
the result is nested lists. Otherwise, <br>
the .RS/.RE pair is translated into a Blockquote
tag-pair.</p>

<p style="margin-top: 1em">.DS/.DE is not part of the
documented man macro set, but is recognized because it shows
up with some frequency on legacy man pages from older
Unixes.</p>

<p style="margin-top: 1em">Certain extension macros
originally defined under Ultrix are translated structurally,
including those that occasionally show up on the manual
pages of Linux and other open-source <br>
Unixes. .EX/.EE (and the synonyms .Ex/.Ee), .Ds/.De,</p>

<p style="margin-top: 1em">.NT/.NE, .PN, and .MS are
translated structurally.</p>

<p style="margin-top: 1em">The following extension macros
used by the X distribution are also recognized and
translated structurally: .FD, .FN, .IN, .ZN, .hN, and
.C{/.C} The .TA and .IN requests are <br>
ignored.</p>

<p style="margin-top: 1em">When the man macros are active,
any .Pp macro definition containing the request .PP will be
ignored. and all instances of .Pp replaced with .PP.
Similarly, .Tp will be replaced <br>
with .TP. This is the least painful way to deal with some
frequently-encountered stereotyped wrapper definitions that
would otherwise cause serious interpretation problems</p>

<p style="margin-top: 1em">Known problem areas with man
translation:</p>

<p style="margin-top: 1em">&Acirc;&middot; Weird uses of
.TP. These will sometime generate invalid XML and sometimes
result in a FIXME comment in the generated XML (a warning
message will also go to standard error).</p>

<p style="margin-top: 1em">&Acirc;&middot; It is debatable
how the man macros .HP and .IP without tag should be
translated. We treat them as an ordinary paragraph break. We
could visually simulate a hanging paragraph <br>
with list markup, but this would not be a structural
translation.</p>

<p style="margin-top: 1em">Pod2man Translation <br>
doclifter recognizes the extension macros produced by
pod2man (.Sh, .Sp, .Ip, .Vb, .Ve) and translates them
structurally.</p>

<p style="margin-top: 1em">The results of lifting pages
produced by pod2man should be checked carefully by eyeball,
especially the rendering of command and function synopses.
Pod2man generates rather <br>
perverse markup; doclifter&rsquo;s struggle to untangle it
is sometimes in vain.</p>

<p style="margin-top: 1em">If possible, generate your
DocBook from the POD sources. There is a pod2docbook module
on CPAN that does this.</p>

<p style="margin-top: 1em">Tkman Translation <br>
doclifter recognizes the extension macros used by the Tcl/Tk
documentation system: .AP, .AS, .BS, .BE, .CS, .CE, .DS,
.DE, .SO, .SE, .UL, .VS, .VE. The .AP, .CS, .CE, .SO, .SE,
<br>
.UL, .QW and .PQ macros are translated structurally.</p>

<p style="margin-top: 1em">Mandoc Translation <br>
doclifter should be able to do an excellent job on most
mdoc(7) pages, because this macro package expresses a lot of
semantic structure.</p>

<p style="margin-top: 1em">Known problems with mandoc
translation: All .Bd/.Ed display blocks are translated as
LiteralLayout tag pairs .</p>

<p style="margin-top: 1em">Ms Translation <br>
doclifter does a good job on most ms pages. One weak spot to
watch out for is the generation of Author and Affiliation
tags. The heuristics used to mine this information out of
<br>
the .AU section work for authors who format their names in
the way usual for English (e.g. &quot;M. E. Lesk&quot;,
&quot;Eric S. Raymond&quot;) but are quite brittle.</p>

<p style="margin-top: 1em">For a document to be recognized
as containing ms markup, it must have the extension .ms.
This avoids problems with false positives.</p>

<p style="margin-top: 1em">The .TL, .AU, .AI, and .AE
macros turn into article metainformation in the expected
way. The .PP, .LP, .SH, and .NH macros turn into paragraph
and section structure. The tagged <br>
form of .IP is translated either as a VariableList (usually)
or ItemizedList (if the tag is the troff bullet or square
character); the untagged version is treated as an ordinary
<br>
paragraph break.</p>

<p style="margin-top: 1em">The .DS/.DE pair is translated
to a LiteralLayout tag pair . The .FS/.FE pair is translated
to a Footnote tag pair. The .QP/.QS/.QE requests define
BlockQuotes.</p>

<p style="margin-top: 1em">The .UL font change is mapped to
U. .SM and .LG become numeric plus or minus size steps
suffixed to the Remap attribute.</p>

<p style="margin-top: 1em">The .B1 and .B2 box macros are
translated to a Sidebar tag pair.</p>

<p style="margin-top: 1em">All macros relating to page
footers, multicolumn mode, and keeps are ignored (.ND, .DA,
.1C, .2C, .MC, .BX, .KS, .KE, .KF). The .R, .RS, and .RE
macros are ignored as well.</p>

<p style="margin-top: 1em">Me Translation <br>
Translation of me documents tends to produce crude results
that need a lot of hand-hacking. The format has little
usable structure, and documents written in it tend to use a
lot <br>
of low-level troff macros; both these properties tend to
confuse doclifter.</p>

<p style="margin-top: 1em">For a document to be recognized
as containing me markup, it must have the extension .me.
This avoids problems with false positives.</p>

<p style="margin-top: 1em">The following macros are
translated into paragraph breaks: .lp, .pp. The .ip macro is
translated into a VariableList. The .bp macro is translated
into an ItemizedList. The .np <br>
macro is translated into an OrderedList.</p>

<p style="margin-top: 1em">The b, i, and r fonts are mapped
to emphasis tags with B, I, and R Remap attributes. The .rb
(&quot;real bold&quot;) font is treated the same as .b.</p>

<p style="margin-top: 1em">.q(/.q) is translated
structurally .</p>

<p style="margin-top: 1em">Most other requests are
ignored.</p>

<p style="margin-top: 1em">Mm Translation <br>
Memorandum Macros documents translate well, as these macros
carry a lot of structural information. The translation rules
are tuned for Memorandum or Released Paper styles; <br>
information associated with external-letter style will be
preserved in comments.</p>

<p style="margin-top: 1em">For a document to be recognized
as containing mm markup, it must have the extension .mm.
This avoids problems with false positives.</p>

<p style="margin-top: 1em">The following highlight macros
are translated int Emphasis tags: .B, .I, .R, .BI, .BR, .IB,
.IR, .RB, .RI.</p>

<p style="margin-top: 1em">The following macros are
structurally translated: .AE, .AF, .AL, .RL, .APP, .APPSK,
.AS, .AT, .AU, .B1, .B2, .BE, .BL, .ML, .BS, .BVL, .VL, .DE,
.DL .DS, .FE, .FS, .H, .HU, .IA, <br>
.IE, .IND, .LB, .LC, .LE, .LI, .P, .RF, .SM, .TL, .VERBOFF,
.VERBON, .WA, .WE.</p>

<p style="margin-top: 1em">The following macros are
ignored:</p>

<p style="margin-top: 1em">.)E, .1C, .2C, .AST, .AV, .AVL,
.COVER, .COVEND, .EF, .EH, .EDP, .EPIC, .FC, .FD, .HC, .HM,
.GETR, .GETST, .HM, .INITI, .INITR, .INDP, .ISODATE, .MT,
.NS, .ND, .OF, .OH, .OP, <br>
.PGFORM, .PGNH, .PE, .PF, .PH, .RP, .S, .SA, .SP, .SG, .SK,
.TAB, .TB, .TC, .VM, .WC.</p>

<p style="margin-top: 1em">The following macros generate
warnings: .EC, .EX, .FG, .GETHN, .GETPN, .GETR, .GETST, .LT,
.LD, .LO, .MOVE, .MULB, .MULN, .MULE, .NCOL, .nP, .PIC, .RD,
.RS, .RE, .SETR</p>

<p style="margin-top: 1em">.BS/.BE and .IA/.IE pairs are
passed through. The text inside them may need to be deleted
or moved.</p>

<p style="margin-top: 1em">The mark argument of .ML is
ignored; the following list id formatted as a normal
ItemizedList.</p>

<p style="margin-top: 1em">The contents of .DS/.DE or
.DF/.DE gets turned into a Screen display. Arguments
controlling presentation-level formatting are ignored.</p>

<p style="margin-top: 1em">Mwww Translation <br>
The mwww macros are an extension to the man macros supported
by groff(1) for producing web pages.</p>

<p style="margin-top: 1em">The URL, FTP, MAILTO, FTP,
IMAGE, TAG tags are translated structurally. The HTMLINDEX,
BODYCOLOR, BACKGROUND, HTML, and LINE tags are ignored.</p>

<p style="margin-top: 1em">TBL Translation <br>
All structural features of TBL tables are translated,
including both horizontal and vertical spanning with
&acirc;s&acirc; and &acirc;^&acirc;. The &acirc;l&acirc;,
&acirc;r&acirc;, and &acirc;c&acirc; formats are supported;
the &acirc;n&acirc; <br>
column format is rendered as &acirc;r&acirc;. Line
continuations with T{ and T} are handled correctly. So is
.TH.</p>

<p style="margin-top: 1em">The expand, box, doublebox,
allbox, center, left, and right options are supported. The
GNU synonyms frame and doubleframe are also recognized. But
the distinction between single <br>
and double rules and boxes is lost.</p>

<p style="margin-top: 1em">Table continuations (.T&amp;)
are not supported.</p>

<p style="margin-top: 1em">If the first nonempty line of
text immediately before a table is boldfaced, it is
interpreted as a title for the table and the table is
generated using a table and title. <br>
Otherwise the table is translated with informaltable.</p>

<p style="margin-top: 1em">Most other presentation-level
TBL commands are ignored. The &acirc;b&acirc; format
qualifier is processed, but point size and width qualifiers
are not.</p>

<p style="margin-top: 1em">Pic Translation <br>
PIC sections are translated to SVG. doclifter calls out to
pic2plot(1) to accomplish this; you must have that utility
installed for PIC translation to work.</p>

<p style="margin-top: 1em">Eqn Translation <br>
EQN sections are filtered into embedded MathML with eqn
-TMathML if possible, otherwise passed through enclosed in
LiteralLayout tags. After a delim statement has been seen,
<br>
inline eqn delimiters are translated into an XML processing
instruction. Exception: inline eqn equations consisting of a
single character are translated to an Emphasis with a <br>
Role attribute of eqn.</p>

<p style="margin-top: 1em">Troff Translation <br>
The troff translation is meant only to support
interpretation of the macro sets. It is not useful
standalone.</p>

<p style="margin-top: 1em">The .nf and .fi macros are
interpreted as literal-layout boundaries. Calls to the .so
macro either cause inclusion or are translated into XML
entity inclusions (see above). Calls <br>
to the .ul and .cu macros cause following lines to be
wrapped in an Emphasis tag with a Remap attribute of
&quot;U&quot;. Calls to .ft generate corresponding start or
end emphasis tags. <br>
Calls to .tr cause character translation on output. Calls to
.bp generate a BeginPage tag (in paragraphed text only).
Calls to .sp generate a paragraph break (in paragraphed text
<br>
only). Calls to .ti wrap the following line in a BlockQuote
These are the only troff requests we translate to DocBook.
The rest of the troff emulation exists because macro <br>
packages use it internally to expand macros into elements
that might be structural.</p>

<p style="margin-top: 1em">Requests relating to macro
definitions and strings (.ds, .as, .de, .am, .rm, .rn, .em)
are processed and expanded. The .ig macro is also
processed.</p>

<p style="margin-top: 1em">Conditional macros (.if, .ie,
.el) are handled. The built-in conditions o, n, t, e, and c
are evaluated as if for nroff on page one of a document. The
m, d, and r troff <br>
conditionals are also interpreted. String comparisons are
evaluated by straight textual comparison. All numeric
expressions evaluate to true.</p>

<p style="margin-top: 1em">The extended groff requests cc,
c2, ab, als, do, nop, and return and shift are interpreted.
Its .PSPIC extension is translated into a MediaObject.</p>

<p style="margin-top: 1em">The .tm macro writes its
arguments to standard error (with -t). The .pm macro reports
on defined macros and strings. These facilities may aid in
debugging your translation.</p>

<p style="margin-top: 1em">Some troff escape sequences are
lifted:</p>

<p style="margin-top: 1em">1. The \ and \ escapes become a
bare backslash, . a period, and &minus; a bare dash.</p>

<p style="margin-top: 1em">2. The troff escapes , `,
&acute; , , and are lifted to equivalent ISO special spacing
characters.</p>

<p style="margin-top: 1em">3. A &nbsp;followed by space is
translated to an ISO non-breaking space entity.</p>

<p style="margin-top: 1em">4. A &nbsp; is also translated
to an ISO non-breaking space entity; properly this should be
a space that can&rsquo;t be used for a linebreak but
stretches like ordinary whitepace during <br>
line adjustment, but there is no ISO or Unicode entity for
that.</p>

<p style="margin-top: 1em">5. The and half-line motion
vertical motion escapes, when paired, become Superscript or
Subscript tags.</p>

<p style="margin-top: 1em">6. The <br>
7. The escape for font changes is translated in various
context-dependent ways. First, doclifter looks for cliches
involving font changes that have semantic meaning, and <br>
lifts to a structural tag. If it can&rsquo;t do that, it
generates an Emphasis tag.</p>

<p style="margin-top: 1em">8. The extension is translated
into a phrase span with a remap attribute carrying the
color. Note: Stylesheets typically won&rsquo;t render
this!</p>

<p style="margin-top: 1em">9. Some uses of the tare
translated: pairs with a letter followed by one of the
characters &lsquo; &rsquo; : ^ o ~ are translated to
combining forms with diacriticals acute, <br>
grave, umlaut, circumflex, ring, and tilde respectively if
the corresponding Latin-1 or Latin-2 character exists as an
ISO literal.</p>

<p style="margin-top: 1em">Other escapes than these will
yield warnings or errors.</p>

<p style="margin-top: 1em">All other troff requests are
ignored but passed through into XML comments. A few (such as
.ce) also trigger a warning message.</p>

<p style="margin-top: 1em">PORTABILITY CHECKING <br>
When portability checking is enabled, doclifter emits
portability warnings about markup which it can handle but
which will break various other viewers and interpreters.</p>

<p style="margin-top: 1em">1. At level 1, it will warn
about constructions that would break man2html(1), (the C
program distributed with Linux man(1), not the older and
much less capable Perl script). A <br>
close derivative of this code is used in GNOME yelp. This
should be the minimum level of portability you aim for, and
corresponds to what is recommended on the groff_man(7) <br>
manual page.</p>

<p style="margin-top: 1em">2. At level 2, it will warn
about constructions that will break portability back to the
Unix classic tools (including long macro names and glyph
references with ).</p>

<p style="margin-top: 1em">SEMANTIC ANALYSIS <br>
doclifter keeps two lists of semantic hints that it picks up
from analyzing source documents (especially from parsing
command and function synopses). The local list includes:</p>

<p style="margin-top: 1em">&Acirc;&middot; Names of
function formal arguments</p>

<p style="margin-top: 1em">&Acirc;&middot; Names of command
options</p>

<p style="margin-top: 1em">Local hints are used to mark up
the individual page from which they are gathered. The global
list includes:</p>

<p style="margin-top: 1em">&Acirc;&middot; Names of
functions</p>

<p style="margin-top: 1em">&Acirc;&middot; Names of
commands</p>

<p style="margin-top: 1em">&Acirc;&middot; Names of
function return types</p>

<p style="margin-top: 1em">If doclifter is applied to
multiple files, the global list is retained in memory. You
can dump a report of global hints at the end of the run with
the -h option. The format of <br>
the hints is as follows:</p>

<p style="margin-top: 1em">.</p>

<p style="margin-top: 1em">where &lt;phrase&gt; is an item
of text and &lt;markup&gt; is the DocBook markup text it
should be wrapped with whenever it appeared either
highlighted or as a word surrounded by whitespace <br>
in the source text.</p>

<p style="margin-top: 1em">Hints derived from earlier files
are also applied to later ones. This behavior may be useful
when lifting collections of documents that apply to a
function or command library. <br>
What should be more useful is the fact that a hints file
dumped with -h can be one of the file arguments to
doclifter; the code detects this special case and does not
write XML <br>
output for such a file. Thus, a good procedure for lifting a
large library is to generate a hints file with a first run,
inspect it to delete false positives, and use it as the <br>
first input to a second run.</p>

<p style="margin-top: 1em">It is also possible to include a
hints file directly in a troff sourcefile. This may be
useful if you want to enrich the file by stages before
converting to XML.</p>

<p style="margin-top: 1em">TROUBLESHOOTING <br>
doclifter tries to warn about problems that it can can
diagnose but not fix by itself. When it says &quot;look for
FIXME&quot;, do that in the generated XML; the markup around
that token <br>
may be wrong.</p>

<p style="margin-top: 1em">Occasionally (less than 2% of
the time) doclifter will produce invalid DocBook markup even
from correct troff markup. Usually this results from strange
constructions in the <br>
source page, or macro calls that are beyond the ability of
doclifter&rsquo;s macro processor to get right. Here are
some things to watch for, and how to fix them:</p>

<p style="margin-top: 1em">Malformed command synopses. <br>
If you get a message that says &quot;command synopsis parse
failed&quot;, try rewriting the synopsis in your manual page
source. The most common cause of failure is unbalanced []
<br>
groupings, a bug that can be very difficult to notice by
eyeball. To assist with this, the error message includes a
token number in parentheses indicating on which token the
<br>
parse failed.</p>

<p style="margin-top: 1em">For more information, use the -v
option. This will trigger a dump telling you what the
command synopsis looked like after preprocessing, and
indicate on which token the parse <br>
failed (both with a token number and a caret sign inserted
in the dump of the synopsis tokens). Try rewriting the
synopsis in your manual page source. The most common cause
of <br>
failure is unbalanced [] groupings, a bug that can be very
difficult to notice by eyeball. To assist with this, the
error token dump tries to insert &acirc;$&acirc; at the
point of the last <br>
nesting-depth increase, but the code that does this is
failure-prone.</p>

<p style="margin-top: 1em">Confusing macro calls. <br>
Some manual page authors replace standard requests (like
.PP, .SH and .TP) with versions that do different things in
nroff and troff environments. While doclifter tries to cope
<br>
and usually does a good job, the quirks of [nt]roff are
legion and confusing macro calls sometimes lead to bad XML
being generated. A common symptom of such problems is
unclosed <br>
Emphasis tags.</p>

<p style="margin-top: 1em">Malformed list syntax. <br>
The manual-page parser can be confused by .TP constructs
that have header tags but no following body. If the XML
produced doesn&rsquo;t validate, and the problem seems to be
a <br>
misplaced listitem tag, try using the verbose (-v) option.
This will enable line-numbered warnings that may help you
zero in on the problem.</p>

<p style="margin-top: 1em">Section nesting problems with
SS. <br>
The message &quot;possible section nesting error&quot; means
that the program has seen two adjacent subsection headers.
In man pages, subsections don&rsquo;t have a depth argument,
so doclifter <br>
cannot be certain how subsections should be nested. Any
subsection heading between the indicated line and the
beginning of the next top-level section might be wrong and
require <br>
correcting by hand.</p>

<p style="margin-top: 1em">Bad output with no doclifter
error message <br>
If you&rsquo;re translating a page that uses user-defined
macros, and doclifter fails to complain about it but you get
bad output, the first thing to do is simplify or eliminate
the <br>
user-defined macros. Replace them with stock requests where
possible.</p>

<p style="margin-top: 1em">IMPROVING TRANSLATION QUALITY
<br>
There are a few constructions that are a good idea to check
by hand after lifting a page.</p>

<p style="margin-top: 1em">Look near the BlockQuote tags.
The troff temporary indent request (.ti) is translated into
a BlockQuote wrapper around the following line. Sometimes
LiteralLayout or <br>
ProgramListing would be a better translation, but doclifter
has no way to know this.</p>

<p style="margin-top: 1em">It is not possible to
unambiguously detect candidates for wrapping in a DocBook
option tag in running text. If you care, you&rsquo;ll have
to check for these and fix them by hand.</p>

<p style="margin-top: 1em">BUGS AND LIMITATIONS <br>
About 3% of man pages will either make this program throw
error status 1 or generate invalid XML. In almost all such
cases the misbehavior is triggered by markup bugs in the
<br>
source that are too severe to be coped with.</p>

<p style="margin-top: 1em">Equation number arguments of EQN
calls are ignored.</p>

<p style="margin-top: 1em">The function-synopsis parser is
crude (it&rsquo;s not a compiler) and prone to errors.
Function-synopsis markup should be checked carefully by a
human.</p>

<p style="margin-top: 1em">If a man page has both
paragraphed text in a Synopsis section and also a body
section before the Synopis section, bad things will
happen.</p>

<p style="margin-top: 1em">Running text (e.g., explanatory
notes) at the end of a Synopsis section cannot reliably be
distinguished from synopsis-syntax markup. (This problem is
AI-complete.)</p>

<p style="margin-top: 1em">Some firewalls put in to cope
with common malformations in troff code mean that the tail
end of a span between two B,I,U,(CW} or .ft highlight
changes may not be completely <br>
covered by corresponding Emphasis macros if (for example)
the span crosses a boundary between filled and unfilled
(.nf/.fi) text.</p>

<p style="margin-top: 1em">The treatment of conditionals
relies on the assumption that conditional macros never
generate structural or font-highlight markup that differs
between the if and else branches. <br>
This appears to be true of all the standard macro packages,
but if you roll any of your own macros you&rsquo;re on your
own.</p>

<p style="margin-top: 1em">Macro definitions in a manual
page NAME section are not interpreted.</p>

<p style="margin-top: 1em">Uses of <br>
It is not possible to unambiguously detect candidates for
wrapping in a DocBook option tag in running text. If you
care, you&rsquo;ll have to check for these and fix them by
hand.</p>

<p style="margin-top: 1em">The line numbers in doclifter
error messages are unreliable in the presence of .EQ/.EN,
.PS/.PE, and quantum fluctuations.</p>

<p style="margin-top: 1em">OLD MACRO SETS <br>
There is a conflict between Berkeley ms&rsquo;s documented
.P1 print-header-on-page request and an undocumented Bell
Labs use for displayed program and equation listings. The ms
<br>
translator uses the Bell Labs interpretation when .P2 is
present in the document, and otherwise ignores the
request.</p>

<p style="margin-top: 1em">RETURN VALUES <br>
On successful completion, the program returns status 0. It
returns 1 if some file or standard input could not be
translated. It returns 2 if one of the input sources was a
.so <br>
inclusion. It returns 3 if there is an error in reading or
writing files. It returns 4 to indicate an internal error.
It returns 5 when aborted by a keyboard interrupt.</p>

<p style="margin-top: 1em">Note that a zero return does not
guarantee that the output is valid DocBook. It will almost
always (as in, more than 98% of cases) be syntactically
valid XML, but in some rare <br>
cases fixups by hand may be necessary to meet the semantics
of the DocBook DTD. Validation problems are most likely to
occur with complicated list markup.</p>

<p style="margin-top: 1em">REQUIREMENTS <br>
The pic2plot(1) utility must be installed in order to
translate PIC diagrams to SVG.</p>

<p style="margin-top: 1em">SEE ALSO <br>
man(7), mdoc(7), ms(7), me(7), mm(7), mwww(7), troff(1).</p>

<p style="margin-top: 1em">AUTHOR <br>
Eric S. Raymond esr@thyrsus.com</p>

<p style="margin-top: 1em">There is a project web page at
http://www.catb.org/~esr/doclifter/.</p>

<p style="margin-top: 1em">doclifter 06/01/2013
DOCLIFTER(1)</p>
<hr>
</body>
</html>
