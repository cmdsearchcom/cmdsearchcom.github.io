<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DOCLIFTER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DOCLIFTER(1)</td>
    <td class="head-vol">Documentation Tools</td>
    <td class="head-rtitle">DOCLIFTER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
doclifter - translate troff requests into DocBook
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 10.00ex; text-indent: -10.00ex;"><b>doclifter</b>
  [-e&#x00A0; <i>encoding</i>] [-h&#x00A0;<i>hintfile</i>] [-q] [-x] [-v] [-w]
  [-V] [-D&#x00A0; <i>token=type</i>] [-I&#x00A0;<i>path</i>]
  [-I&#x00A0;<i>path</i>] <i>file</i>...</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>doclifter</b> translates documents written in troff macros to DocBook.
  Structural subsets of the requests in <b>man</b>(7), <b>mdoc</b>(7),
  <b>ms</b>(7), <b>me</b>(7), <b>mm</b>(7), and <b>troff</b>(1) are supported.
<div class="Pp"></div>
The translation brings over all the structure of the original document at
  section, subsection, and paragraph level. Command and C function synopses are
  translated into DocBook markup, not just a verbatim display. Tables (TBL
  markup) are translated into DocBook table markup. PIC diagrams are translated
  into SVG. Troff-level information that might have structural implications is
  preserved in XML comments.
<div class="Pp"></div>
Where possible, font-change macros are translated into structural markup.
  <b>doclifter</b> recognizes stereotyped patterns of markup and content (such
  as the use of italics in a FILES section to mark filenames) and lifts them. A
  means to edit, add, and save semantic hints about highlighting is supported.
<div class="Pp"></div>
Some cliches are recognized and lifted to structural markup even without
  highlighting. Patterns recognized include such things as URLs, email
  addresses, man page references, and C program listings.
<div class="Pp"></div>
The tag <b>.in</b> and <b>.ti</b> requests are passed through with complaints.
  They indicate presentation-level markup that <b>doclifter</b> cannot translate
  into structure; the output will require hand-fixing.
<div class="Pp"></div>
The tag <b>.ta</b> is passed through with a complaint unless the immediarely
  following by text lines contains a tab, in which case the following span of
  lines containing tabs is lifted to a table.
<div class="Pp"></div>
Under some circumstances, <b>doclifter</b> can even lift formatted manual pages
  and the text output produced by <b>lynx</b>(1) from HTML. If it finds no
  macros in the input, but does find a NAME section header, it tries to
  interpret the plain text as a manual page (skipping boilerplate headers and
  footers generated by <b>lynx</b>(1)). Translations produced in this way will
  be prone to miss structural features, but this fallback is good enough for
  simple man pages.
<div class="Pp"></div>
<b>doclifter</b> does not do a perfect job, merely a surprisingly good one.
  Final polish should be applied by a human being capable of recognizing
  patterns too subtle for a computer. But <b>doclifter</b> will almost always
  produce translations that are good enough to be usable before hand-hacking.
<div class="Pp"></div>
See the Troubleshooting section for discussion of how to solve document
  conversion problems.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
If called without arguments <b>doclifter</b> acts as a filter, translating troff
  source input on standard input to DocBook markup on standard output. If called
  with arguments, each argument file is translated separately (but hints are
  retained, see below); the suffix .xml is given to the translated output.
<div class="Pp"></div>
-h
<div style="margin-left: 4.00ex;">Name a file to which information on semantic
  hints gathered during analysis should be written.</div>
<div class="Pp"></div>
-D
<div style="margin-left: 4.00ex;">The <b>-D</b> allows you to post a hint. This
  may be useful, for example, if <b>doclifter</b> is mis-parsing a synopsis
  because it doesn't recognize a token as a command. This hint is merged after
  hints in the input source have been read.</div>
<div class="Pp"></div>
-I
<div style="margin-left: 4.00ex;">The <b>-I</b> option adds its argument to the
  include path used when docfilter searches for inclusions. The include path is
  initially just the current directory.</div>
<div class="Pp"></div>
-e
<div style="margin-left: 4.00ex;">The <b>-e</b> allows you to set the encoding
  field to be emitted in the output XML. It defaults to ISO-8859-1
  (Latin-1).</div>
<div class="Pp"></div>
-q
<div style="margin-left: 4.00ex;">Normally, requests that <b>doclifter</b> could
  not interpret (usually because they're presentation-level) are passed through
  to XML comments in the output. The -q option suppresses this. It also
  suppresses listing of macros. Messages about requests that are unrecognized or
  cannot be translated go to standard error whatever the state of this option.
  This option is intended to reduce clutter when you believe you have a clean
  lift of a document and want to lose the troff legacy.</div>
<div class="Pp"></div>
-x
<div style="margin-left: 4.00ex;">The -x option requests that <b>doclifter</b>
  generated DocBook version 5 compatible xml content, rather than its default
  DocBook version 4.4 output. Inclusions and entities may not be handled
  correctly with this switch enabled.</div>
<div class="Pp"></div>
-v
<div style="margin-left: 4.00ex;">The -v option makes <b>doclifter</b> noisier
  about what it's doing. This is mainly useful for debugging.</div>
<div class="Pp"></div>
-w
<div style="margin-left: 4.00ex;">Enable strict portability checking. Multiple
  instances of -w increase the strictness. See the section called
  &#x201C;PORTABILITY CHECKING&#x201D;.</div>
<div class="Pp"></div>
-V
<div style="margin-left: 4.00ex;">With this option, the program emits a version
  message and exits.</div>
<h1 class="Sh" title="Sh" id="TRANSLATION_RULES"><a class="selflink" href="#TRANSLATION_RULES">TRANSLATION
  RULES</a></h1>
Overall, you can expect that font changes will be turned into Emphasis macros
  with a Remap attribute taken from the troff font name. The basic font names
  are R, I, B, U, CW, and SM.
<div class="Pp"></div>
Troff and macro-package special character escapes are mapped into ISO character
  entities.
<div class="Pp"></div>
When <b>doclifter</b> encounters a <b>.so</b> directive, it searches for the
  file. If it can get read access to the file, and open it, and the file
  consists entirely of command lines and comments, then it is included. If any
  of these conditions fails, an entity reference for it is generated.
<div class="Pp"></div>
<b>doclifter</b> performs special parsing when it recognizes a display such as
  is generated by <b>.DS/.DE</b>. It repeatedly tries to parse first a function
  synopsis, and then plain text off what remains in the display. Thus, most
  inline C function prototypes will be lifted to structured markup.
<div class="Pp"></div>
Some notes on specific translations:
<h2 class="Ss" title="Ss" id="Man_Translation"><a class="selflink" href="#Man_Translation">Man
  Translation</a></h2>
<b>doclifter</b> does a good job on most man pages, It knows about the extended
  <b>UR</b>/<b>UE</b>/<b>UN</b> and <b>URL</b> requests supported under Linux.
  If any <b>.UR</b> request is present, it will translate these but not wrap
  URLs outide them with Ulink tags. It also knows about the extended <b>.L</b>
  (literal) font markup from Bell Labs Version 8, and its friends.
<div class="Pp"></div>
The <b>.TH</b> macro is used to generate a RefMeta section. If present, the
  date/source/manual arguments (see <b>man</b>(7)) are wrapped in RefMiscInfo
  tag pairs with those class attributes. Note that <b>doclifter</b> does not
  change the date.
<div class="Pp"></div>
<b>doclifter</b> performs special parsing when it recognizes a synopsis section.
  It repeatedly tries to parse first a function synopsis, then a command
  synopsis, and then plain text off what remains in the section.
<div class="Pp"></div>
The following man macros are translated into emphasis tags with a remap
  attribute: <b>.B</b>, <b>.I</b>, <b>.L</b>, <b>.BI</b>, <b>.BR</b>,
  <b>.BL</b>, <b>.IB</b>, <b>.IR</b>, <b>.IL</b>, <b>.RB</b>, <b>.RI</b>,
  <b>.RL</b>, <b>.LB</b>, <b>.LI</b>, <b>.LR</b>, <b>.SB</b>, <b>.SM</b>. Some
  stereotyped patterns involving these macros are recognized and turned into
  semantic markup.
<div class="Pp"></div>
The following macros are translated into paragraph breaks: <b>.LP</b>,
  <b>.PP</b>, <b>.P</b>, <b>.HP</b>, and the single-argument form of <b>.IP</b>.
<div class="Pp"></div>
The two-argument form of <b>.IP</b> is translated either as a VariableList
  (usually) or ItemizedList (if the tag is the troff bullet or square
  character).
<div class="Pp"></div>
The following macros are translated semantically: <b>.SH</b>,<b>.SS</b>,
  <b>.TP</b>, <b>.UR</b>, <b>.UE</b>, <b>.UN</b>, <b>.IX</b>. A <b>.UN</b> call
  just before <b>.SH</b> or <b>.SS</b> sets the ID for the new section.
<div class="Pp"></div>
The <b>\*R</b>, <b>\*(Tm</b>, <b>\*(lq</b>, and <b>\*(rq</b> symbols are
  translated.
<div class="Pp"></div>
The following (purely presentation-level) macros are ignored:
  <b>.PD</b>,<b>.DT</b>.
<div class="Pp"></div>
The <b>.RS</b>/<b>.RE</b> macros are translated differently depending on whether
  or not they precede list markup. When <b>.RS</b> occurs just before <b>.TP</b>
  or <b>.IP</b> the result is nested lists. Otherwise, the <b>.RS</b>/<b>.RE</b>
  pair is translated into a Blockquote tag-pair.
<div class="Pp"></div>
<b>.DS</b>/<b>.DE</b> is not part of the documented man macro set, but is
  recognized because it shows up with some frequency on legacy man pages from
  older Unixes.
<div class="Pp"></div>
Certain extension macros originally defined under Ultrix are translated
  structurally, including those that occasionally show up on the manual pages of
  Linux and other open-source Unixes. <b>.EX</b>/<b>.EE</b> (and the synonyms
  <b>.Ex</b>/<b>.Ee</b>), <b>.Ds</b>/<b>.De</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<b>.NT</b>/<b>.NE</b>, <b>.PN</b>, and <b>.MS</b> are translated structurally.
<div class="Pp"></div>
The following extension macros used by the X distribution are also recognized
  and translated structurally: <b>.FD</b>, <b>.FN</b>, <b>.IN</b>, <b>.ZN</b>,
  <b>.hN</b>, and <b>.C{</b>/<b>.C}</b> The <b>.TA</b> and <b>.IN</b> requests
  are ignored.
<div class="Pp"></div>
When the man macros are active, any <b>.Pp</b> macro definition containing the
  request <b>.PP</b> will be ignored. and all instances of <b>.Pp</b> replaced
  with <b>.PP</b>. Similarly, <b>.Tp</b> will be replaced with <b>.TP</b>. This
  is the least painful way to deal with some frequently-encountered stereotyped
  wrapper definitions that would otherwise cause serious interpretation problems
<div class="Pp"></div>
Known problem areas with man translation:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Weird uses of <b>.TP</b>. These will
  sometime generate invalid XML and sometimes result in a FIXME comment in the
  generated XML (a warning message will also go to standard error).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;It is debatable how the man macros
  <b>.HP</b> and <b>.IP</b> without tag should be translated. We treat them as
  an ordinary paragraph break. We could visually simulate a hanging paragraph
  with list markup, but this would not be a structural translation.</div>
<h2 class="Ss" title="Ss" id="Pod2man_Translation"><a class="selflink" href="#Pod2man_Translation">Pod2man
  Translation</a></h2>
<b>doclifter</b> recognizes the extension macros produced by <b>pod2man</b> (
  <b>.Sh</b>, <b>.Sp</b>, <b>.Ip</b>, <b>.Vb</b>, <b>.Ve</b>) and translates
  them structurally.
<div class="Pp"></div>
The results of lifting pages produced by <b>pod2man</b> should be checked
  carefully by eyeball, especially the rendering of command and function
  synopses. <b>Pod2man</b> generates rather perverse markup; <b>doclifter</b>'s
  struggle to untangle it is sometimes in vain.
<div class="Pp"></div>
If possible, generate your DocBook from the POD sources. There is a pod2docbook
  module on CPAN that does this.
<h2 class="Ss" title="Ss" id="Tkman_Translation"><a class="selflink" href="#Tkman_Translation">Tkman
  Translation</a></h2>
<b>doclifter</b> recognizes the extension macros used by the Tcl/Tk
  documentation system: <b>.AP</b>, <b>.AS</b>, <b>.BS</b>, <b>.BE</b>,
  <b>.CS</b>, <b>.CE</b>, <b>.DS</b>, <b>.DE</b>, <b>.SO</b>, <b>.SE</b>,
  <b>.UL</b>, <b>.VS</b>, <b>.VE</b>. The <b>.AP</b>, <b>.CS</b>, <b>.CE</b>,
  <b>.SO</b>, <b>.SE</b>, <b>.UL</b>, <b>.QW</b> and <b>.PQ</b> macros are
  translated structurally.
<h2 class="Ss" title="Ss" id="Mandoc_Translation"><a class="selflink" href="#Mandoc_Translation">Mandoc
  Translation</a></h2>
<b>doclifter</b> should be able to do an excellent job on most <b>mdoc</b>(7)
  pages, because this macro package expresses a lot of semantic structure.
<div class="Pp"></div>
Known problems with mandoc translation: All <b>.Bd</b>/<b>.Ed</b> display blocks
  are translated as LiteralLayout tag pairs .
<h2 class="Ss" title="Ss" id="Ms_Translation"><a class="selflink" href="#Ms_Translation">Ms
  Translation</a></h2>
<b>doclifter</b> does a good job on most ms pages. One weak spot to watch out
  for is the generation of Author and Affiliation tags. The heuristics used to
  mine this information out of the <b>.AU</b> section work for authors who
  format their names in the way usual for English (e.g. &quot;M. E. Lesk&quot;,
  &quot;Eric S. Raymond&quot;) but are quite brittle.
<div class="Pp"></div>
For a document to be recognized as containing ms markup, it must have the
  extension .ms. This avoids problems with false positives.
<div class="Pp"></div>
The <b>.TL</b>, <b>.AU</b>, <b>.AI</b>, and <b>.AE</b> macros turn into article
  metainformation in the expected way. The <b>.PP</b>, <b>.LP</b>, <b>.SH</b>,
  and <b>.NH</b> macros turn into paragraph and section structure. The tagged
  form of <b>.IP</b> is translated either as a VariableList (usually) or
  ItemizedList (if the tag is the troff bullet or square character); the
  untagged version is treated as an ordinary paragraph break.
<div class="Pp"></div>
The <b>.DS</b>/<b>.DE</b> pair is translated to a LiteralLayout tag pair . The
  <b>.FS</b>/<b>.FE</b> pair is translated to a Footnote tag pair. The
  <b>.QP</b>/ <b>.QS</b>/<b>.QE</b> requests define BlockQuotes.
<div class="Pp"></div>
The <b>.UL</b> font change is mapped to U. <b>.SM</b> and <b>.LG</b> become
  numeric plus or minus size steps suffixed to the Remap attribute.
<div class="Pp"></div>
The <b>.B1</b> and <b>.B2</b> box macros are translated to a Sidebar tag pair.
<div class="Pp"></div>
All macros relating to page footers, multicolumn mode, and keeps are ignored (
  <b>.ND</b>, <b>.DA</b>, <b>.1C</b>, <b>.2C</b>, <b>.MC</b>, <b>.BX</b>,
  <b>.KS</b>, <b>.KE</b>, <b>.KF</b>). The <b>.R</b>, <b>.RS</b>, and <b>.RE</b>
  macros are ignored as well.
<h2 class="Ss" title="Ss" id="Me_Translation"><a class="selflink" href="#Me_Translation">Me
  Translation</a></h2>
Translation of me documents tends to produce crude results that need a lot of
  hand-hacking. The format has little usable structure, and documents written in
  it tend to use a lot of low-level troff macros; both these properties tend to
  confuse <b>doclifter</b>.
<div class="Pp"></div>
For a document to be recognized as containing me markup, it must have the
  extension .me. This avoids problems with false positives.
<div class="Pp"></div>
The following macros are translated into paragraph breaks: <b>.lp</b>,
  <b>.pp</b>. The <b>.ip</b> macro is translated into a VariableList. The
  <b>.bp</b> macro is translated into an ItemizedList. The <b>.np</b> macro is
  translated into an OrderedList.
<div class="Pp"></div>
The b, i, and r fonts are mapped to emphasis tags with B, I, and R Remap
  attributes. The <b>.rb</b> (&quot;real bold&quot;) font is treated the same as
  <b>.b</b>.
<div class="Pp"></div>
<b>.q(</b>/<b>.q)</b> is translated structurally .
<div class="Pp"></div>
Most other requests are ignored.
<h2 class="Ss" title="Ss" id="Mm_Translation"><a class="selflink" href="#Mm_Translation">Mm
  Translation</a></h2>
Memorandum Macros documents translate well, as these macros carry a lot of
  structural information. The translation rules are tuned for Memorandum or
  Released Paper styles; information associated with external-letter style will
  be preserved in comments.
<div class="Pp"></div>
For a document to be recognized as containing mm markup, it must have the
  extension .mm. This avoids problems with false positives.
<div class="Pp"></div>
The following highlight macros are translated int Emphasis tags: <b>.B</b>,
  <b>.I</b>, <b>.R</b>, <b>.BI</b>, <b>.BR</b>, <b>.IB</b>, <b>.IR</b>,
  <b>.RB</b>, <b>.RI</b>.
<div class="Pp"></div>
The following macros are structurally translated: <b>.AE</b>, <b>.AF</b>,
  <b>.AL</b>, <b>.RL</b>, <b>.APP</b>, <b>.APPSK</b>, <b>.AS</b>, <b>.AT</b>,
  <b>.AU</b>, <b>.B1</b>, <b>.B2</b>, <b>.BE</b>, <b>.BL</b>, <b>.ML</b>,
  <b>.BS</b>, <b>.BVL</b>, <b>.VL</b>, <b>.DE</b>, <b>.DL</b> <b>.DS</b>,
  <b>.FE</b>, <b>.FS</b>, <b>.H</b>, <b>.HU</b>, <b>.IA</b>, <b>.IE</b>,
  <b>.IND</b>, <b>.LB</b>, <b>.LC</b>, <b>.LE</b>, <b>.LI</b>, <b>.P</b>,
  <b>.RF</b>, <b>.SM</b>, <b>.TL</b>, <b>.VERBOFF</b>, <b>.VERBON</b>,
  <b>.WA</b>, <b>.WE</b>.
<div class="Pp"></div>
The following macros are ignored:
<div class="Pp"></div>
&#x00A0; <b>.)E</b>, <b>.1C</b>, <b>.2C</b>, <b>.AST</b>, <b>.AV</b>,
  <b>.AVL</b>, <b>.COVER</b>, <b>.COVEND</b>, <b>.EF</b>, <b>.EH</b>,
  <b>.EDP</b>, <b>.EPIC</b>, <b>.FC</b>, <b>.FD</b>, <b>.HC</b>, <b>.HM</b>,
  <b>.GETR</b>, <b>.GETST</b>, <b>.HM</b>, <b>.INITI</b>, <b>.INITR</b>,
  <b>.INDP</b>, <b>.ISODATE</b>, <b>.MT</b>, <b>.NS</b>, <b>.ND</b>, <b>.OF</b>,
  <b>.OH</b>, <b>.OP</b>, <b>.PGFORM</b>, <b>.PGNH</b>, <b>.PE</b>, <b>.PF</b>,
  <b>.PH</b>, <b>.RP</b>, <b>.S</b>, <b>.SA</b>, <b>.SP</b>, <b>.SG</b>,
  <b>.SK</b>, <b>.TAB</b>, <b>.TB</b>, <b>.TC</b>, <b>.VM</b>, <b>.WC</b>.
<div class="Pp"></div>
The following macros generate warnings: <b>.EC</b>, <b>.EX</b>, <b>.FG</b>,
  <b>.GETHN</b>, <b>.GETPN</b>, <b>.GETR</b>, <b>.GETST</b>, <b>.LT</b>,
  <b>.LD</b>, <b>.LO</b>, <b>.MOVE</b>, <b>.MULB</b>, <b>.MULN</b>,
  <b>.MULE</b>, <b>.NCOL</b>, <b>.nP</b>, <b>.PIC</b>, <b>.RD</b>, <b>.RS</b>,
  <b>.RE</b>, <b>.SETR</b>
<div class="Pp"></div>
&#x00A0; <b>.BS</b>/<b>.BE</b> and <b>.IA</b>/<b>.IE</b> pairs are passed
  through. The text inside them may need to be deleted or moved.
<div class="Pp"></div>
The mark argument of <b>.ML</b> is ignored; the following list id formatted as a
  normal ItemizedList.
<div class="Pp"></div>
The contents of <b>.DS</b>/<b>.DE</b> or <b>.DF</b>/<b>.DE</b> gets turned into
  a Screen display. Arguments controlling presentation-level formatting are
  ignored.
<h2 class="Ss" title="Ss" id="Mwww_Translation"><a class="selflink" href="#Mwww_Translation">Mwww
  Translation</a></h2>
The mwww macros are an extension to the man macros supported by <b>groff</b>(1)
  for producing web pages.
<div class="Pp"></div>
The <b>URL</b>, <b>FTP</b>, <b>MAILTO</b>, <b>FTP</b>, <b>IMAGE</b>, <b>TAG</b>
  tags are translated structurally. The <b>HTMLINDEX</b>, <b>BODYCOLOR</b>,
  <b>BACKGROUND</b>, <b>HTML</b>, and <b>LINE</b> tags are ignored.
<h2 class="Ss" title="Ss" id="TBL_Translation"><a class="selflink" href="#TBL_Translation">TBL
  Translation</a></h2>
All structural features of TBL tables are translated, including both horizontal
  and vertical spanning with &#x2018;s&#x2019; and &#x2018;^&#x2019;. The
  &#x2018;l&#x2019;, &#x2018;r&#x2019;, and &#x2018;c&#x2019; formats are
  supported; the &#x2018;n&#x2019; column format is rendered as
  &#x2018;r&#x2019;. Line continuations with T{ and T} are handled correctly. So
  is <b>.TH</b>.
<div class="Pp"></div>
The <b>expand</b>, <b>box</b>, <b>doublebox</b>, <b>allbox</b>, <b>center</b>,
  <b>left</b>, and <b>right</b> options are supported. The GNU synonyms
  <b>frame</b> and <b>doubleframe</b> are also recognized. But the distinction
  between single and double rules and boxes is lost.
<div class="Pp"></div>
Table continuations (.T&amp;) are not supported.
<div class="Pp"></div>
If the first nonempty line of text immediately before a table is boldfaced, it
  is interpreted as a title for the table and the table is generated using a
  table and title. Otherwise the table is translated with informaltable.
<div class="Pp"></div>
Most other presentation-level TBL commands are ignored. The &#x2018;b&#x2019;
  format qualifier is processed, but point size and width qualifiers are not.
<h2 class="Ss" title="Ss" id="Pic_Translation"><a class="selflink" href="#Pic_Translation">Pic
  Translation</a></h2>
PIC sections are translated to SVG. doclifter calls out to <b>pic2plot</b>(1) to
  accomplish this; you must have that utility installed for PIC translation to
  work.
<h2 class="Ss" title="Ss" id="Eqn_Translation"><a class="selflink" href="#Eqn_Translation">Eqn
  Translation</a></h2>
EQN sections are filtered into embedded MathML with <b>eqn -TMathML</b> if
  possible, otherwise passed through enclosed in LiteralLayout tags. After a
  delim statement has been seen, inline eqn delimiters are translated into an
  XML processing instruction. Exception: inline eqn equations consisting of a
  single character are translated to an Emphasis with a Role attribute of eqn.
<h2 class="Ss" title="Ss" id="Troff_Translation"><a class="selflink" href="#Troff_Translation">Troff
  Translation</a></h2>
The troff translation is meant only to support interpretation of the macro sets.
  It is not useful standalone.
<div class="Pp"></div>
The <b>.nf</b> and <b>.fi</b> macros are interpreted as literal-layout
  boundaries. Calls to the <b>.so</b> macro either cause inclusion or are
  translated into XML entity inclusions (see above). Calls to the <b>.ul</b> and
  <b>.cu</b> macros cause following lines to be wrapped in an Emphasis tag with
  a Remap attribute of &quot;U&quot;. Calls to <b>.ft</b> generate corresponding
  start or end emphasis tags. Calls to <b>.tr</b> cause character translation on
  output. Calls to <b>.bp</b> generate a BeginPage tag (in paragraphed text
  only). Calls to <b>.sp</b> generate a paragraph break (in paragraphed text
  only). Calls to <b>.ti</b> wrap the following line in a BlockQuote These are
  the only troff requests we translate to DocBook. The rest of the troff
  emulation exists because macro packages use it internally to expand macros
  into elements that might be structural.
<div class="Pp"></div>
Requests relating to macro definitions and strings ( <b>.ds</b>, <b>.as</b>,
  <b>.de</b>, <b>.am</b>, <b>.rm</b>, <b>.rn</b>, <b>.em</b>) are processed and
  expanded. The <b>.ig</b> macro is also processed.
<div class="Pp"></div>
Conditional macros ( <b>.if</b>, <b>.ie</b>, <b>.el</b>) are handled. The
  built-in conditions o, n, t, e, and c are evaluated as if for nroff on page
  one of a document. The m, d, and r troff conditionals are also interpreted.
  String comparisons are evaluated by straight textual comparison. All numeric
  expressions evaluate to true.
<div class="Pp"></div>
The extended groff requests <b>cc</b>, <b>c2</b>, <b>ab</b>, <b>als</b>,
  <b>do</b>, <b>nop</b>, and <b>return</b> and <b>shift</b> are interpreted. Its
  <b>.PSPIC</b> extension is translated into a MediaObject.
<div class="Pp"></div>
The <b>.tm</b> macro writes its arguments to standard error (with <b>-t</b>).
  The <b>.pm</b> macro reports on defined macros and strings. These facilities
  may aid in debugging your translation.
<div class="Pp"></div>
Some troff escape sequences are lifted:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.The \e and \\ escapes become a bare
  backslash, \. a period, and \- a bare dash.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.The troff escapes \^, \`, \' \&amp;, \0,
  and \| are lifted to equivalent ISO special spacing characters.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.A \ followed by space is translated to an
  ISO non-breaking space entity.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 4.A \~ is also translated to an ISO
  non-breaking space entity; properly this should be a space that can't be used
  for a linebreak but stretches like ordinary whitepace during line adjustment,
  but there is no ISO or Unicode entity for that.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 5.The \u and \d half-line motion vertical
  motion escapes, when paired, become <b>Superscript</b> or <b>Subscript</b>
  tags.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 6.The \c escape is handled as a line
  continuation. in circumstances where that matters (e.g. for
  token-pasting).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 7.The \f escape for font changes is
  translated in various context-dependent ways. First, <b>doclifter</b> looks
  for cliches involving font changes that have semantic meaning, and lifts to a
  structural tag. If it can't do that, it generates an Emphasis tag.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 8.The \m[] extension is translated into a
  phrase span with a remap attribute carrying the color. Note: Stylesheets
  typically won't render this!</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 9.Some uses of the \o request are translated:
  pairs with a letter followed by one of the characters ` ' : ^ o ~ are
  translated to combining forms with diacriticals acute, grave, umlaut,
  circumflex, ring, and tilde respectively if the corresponding Latin-1 or
  Latin-2 character exists as an ISO literal.</div>
<div class="Pp"></div>
Other escapes than these will yield warnings or errors.
<div class="Pp"></div>
All other troff requests are ignored but passed through into XML comments. A few
  (such as <b>.ce</b>) also trigger a warning message.
<h1 class="Sh" title="Sh" id="PORTABILITY_CHECKING"><a class="selflink" href="#PORTABILITY_CHECKING">PORTABILITY
  CHECKING</a></h1>
When portability checking is enabled, <b>doclifter</b> emits portability
  warnings about markup which it can handle but which will break various other
  viewers and interpreters.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.At level 1, it will warn about
  constructions that would break <b>man2html</b>(1), (the C program distributed
  with Linux <b>man</b>(1), not the older and much less capable Perl script). A
  close derivative of this code is used in GNOME yelp. This should be the
  minimum level of portability you aim for, and corresponds to what is
  recommended on the <b>groff_man</b>(7) manual page.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.At level 2, it will warn about
  constructions that will break portability back to the Unix classic tools
  (including long macro names and glyph references with \[]).</div>
<h1 class="Sh" title="Sh" id="SEMANTIC_ANALYSIS"><a class="selflink" href="#SEMANTIC_ANALYSIS">SEMANTIC
  ANALYSIS</a></h1>
<b>doclifter</b> keeps two lists of semantic hints that it picks up from
  analyzing source documents (especially from parsing command and function
  synopses). The local list includes:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Names of function formal
  arguments</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Names of command options</div>
<div class="Pp"></div>
Local hints are used to mark up the individual page from which they are
  gathered. The global list includes:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Names of functions</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Names of commands</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Names of function return types</div>
<div class="Pp"></div>
If <b>doclifter</b> is applied to multiple files, the global list is retained in
  memory. You can dump a report of global hints at the end of the run with the
  <b>-h</b> option. The format of the hints is as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
&#x00A0;.\&quot; | mark &lt;phrase&gt; as &lt;markup&gt;
</pre>
</div>
<div class="Pp"></div>
where <b>&lt;phrase&gt;</b> is an item of text and <b>&lt;markup&gt;</b> is the
  DocBook markup text it should be wrapped with whenever it appeared either
  highlighted or as a word surrounded by whitespace in the source text.
<div class="Pp"></div>
Hints derived from earlier files are also applied to later ones. This behavior
  may be useful when lifting collections of documents that apply to a function
  or command library. What should be more useful is the fact that a hints file
  dumped with <b>-h</b> can be one of the file arguments to <b>doclifter</b>;
  the code detects this special case and does not write XML output for such a
  file. Thus, a good procedure for lifting a large library is to generate a
  hints file with a first run, inspect it to delete false positives, and use it
  as the first input to a second run.
<div class="Pp"></div>
It is also possible to include a hints file directly in a troff sourcefile. This
  may be useful if you want to enrich the file by stages before converting to
  XML.
<h1 class="Sh" title="Sh" id="TROUBLESHOOTING"><a class="selflink" href="#TROUBLESHOOTING">TROUBLESHOOTING</a></h1>
<b>doclifter</b> tries to warn about problems that it can can diagnose but not
  fix by itself. When it says &quot;look for FIXME&quot;, do that in the
  generated XML; the markup around that token may be wrong.
<div class="Pp"></div>
Occasionally (less than 2% of the time) <b>doclifter</b> will produce invalid
  DocBook markup even from correct troff markup. Usually this results from
  strange constructions in the source page, or macro calls that are beyond the
  ability of <b>doclifter</b>'s macro processor to get right. Here are some
  things to watch for, and how to fix them:
<h2 class="Ss" title="Ss" id="Malformed_command_synopses."><a class="selflink" href="#Malformed_command_synopses.">Malformed
  command synopses.</a></h2>
If you get a message that says &quot;command synopsis parse failed&quot;, try
  rewriting the synopsis in your manual page source. The most common cause of
  failure is unbalanced [] groupings, a bug that can be very difficult to notice
  by eyeball. To assist with this, the error message includes a token number in
  parentheses indicating on which token the parse failed.
<div class="Pp"></div>
For more information, use the -v option. This will trigger a dump telling you
  what the command synopsis looked like after preprocessing, and indicate on
  which token the parse failed (both with a token number and a caret sign
  inserted in the dump of the synopsis tokens). Try rewriting the synopsis in
  your manual page source. The most common cause of failure is unbalanced []
  groupings, a bug that can be very difficult to notice by eyeball. To assist
  with this, the error token dump tries to insert &#x2018;$&#x2019; at the point
  of the last nesting-depth increase, but the code that does this is
  failure-prone.
<h2 class="Ss" title="Ss" id="Confusing_macro_calls."><a class="selflink" href="#Confusing_macro_calls.">Confusing
  macro calls.</a></h2>
Some manual page authors replace standard requests (like <b>.PP</b>, <b>.SH</b>
  and <b>.TP</b>) with versions that do different things in <b>nroff</b> and
  <b>troff</b> environments. While <b>doclifter</b> tries to cope and usually
  does a good job, the quirks of [nt]roff are legion and confusing macro calls
  sometimes lead to bad XML being generated. A common symptom of such problems
  is unclosed Emphasis tags.
<h2 class="Ss" title="Ss" id="Malformed_list_syntax."><a class="selflink" href="#Malformed_list_syntax.">Malformed
  list syntax.</a></h2>
The manual-page parser can be confused by <b>.TP</b> constructs that have header
  tags but no following body. If the XML produced doesn't validate, and the
  problem seems to be a misplaced listitem tag, try using the verbose (-v)
  option. This will enable line-numbered warnings that may help you zero in on
  the problem.
<h2 class="Ss" title="Ss" id="Section_nesting_problems_with_SS."><a class="selflink" href="#Section_nesting_problems_with_SS.">Section
  nesting problems with SS.</a></h2>
The message &quot;possible section nesting error&quot; means that the program
  has seen two adjacent subsection headers. In man pages, subsections don't have
  a depth argument, so <b>doclifter</b> cannot be certain how subsections should
  be nested. Any subsection heading between the indicated line and the beginning
  of the next top-level section might be wrong and require correcting by hand.
<h2 class="Ss" title="Ss" id="Bad_output_with_no_doclifter_error_message"><a class="selflink" href="#Bad_output_with_no_doclifter_error_message">Bad
  output with no doclifter error message</a></h2>
If you're translating a page that uses user-defined macros, and doclifter fails
  to complain about it but you get bad output, the first thing to do is simplify
  or eliminate the user-defined macros. Replace them with stock requests where
  possible.
<h1 class="Sh" title="Sh" id="IMPROVING_TRANSLATION_QUALITY"><a class="selflink" href="#IMPROVING_TRANSLATION_QUALITY">IMPROVING
  TRANSLATION QUALITY</a></h1>
There are a few constructions that are a good idea to check by hand after
  lifting a page.
<div class="Pp"></div>
Look near the BlockQuote tags. The troff temporary indent request ( <b>.ti</b>)
  is translated into a BlockQuote wrapper around the following line. Sometimes
  LiteralLayout or ProgramListing would be a better translation, but
  <b>doclifter</b> has no way to know this.
<div class="Pp"></div>
It is not possible to unambiguously detect candidates for wrapping in a DocBook
  option tag in running text. If you care, you'll have to check for these and
  fix them by hand.
<h1 class="Sh" title="Sh" id="BUGS_AND_LIMITATIONS"><a class="selflink" href="#BUGS_AND_LIMITATIONS">BUGS
  AND LIMITATIONS</a></h1>
About 3% of man pages will either make this program throw error status 1 or
  generate invalid XML. In almost all such cases the misbehavior is triggered by
  markup bugs in the source that are too severe to be coped with.
<div class="Pp"></div>
Equation number arguments of EQN calls are ignored.
<div class="Pp"></div>
The function-synopsis parser is crude (it's not a compiler) and prone to errors.
  Function-synopsis markup should be checked carefully by a human.
<div class="Pp"></div>
If a man page has both paragraphed text in a Synopsis section and also a body
  section before the Synopis section, bad things will happen.
<div class="Pp"></div>
Running text (e.g., explanatory notes) at the end of a Synopsis section cannot
  reliably be distinguished from synopsis-syntax markup. (This problem is
  AI-complete.)
<div class="Pp"></div>
Some firewalls put in to cope with common malformations in troff code mean that
  the tail end of a span between two <b>\f{B,I,U,(CW}</b> or <b>.ft</b>
  highlight changes may not be completely covered by corresponding Emphasis
  macros if (for example) the span crosses a boundary between filled and
  unfilled ( <b>.nf</b>/<b>.fi</b>) text.
<div class="Pp"></div>
The treatment of conditionals relies on the assumption that conditional macros
  never generate structural or font-highlight markup that differs between the if
  and else branches. This appears to be true of all the standard macro packages,
  but if you roll any of your own macros you're on your own.
<div class="Pp"></div>
Macro definitions in a manual page NAME section are not interpreted.
<div class="Pp"></div>
Uses of \c for line continuation sometimes are not translated, leaving the \c in
  the output XML. The program will print a warning when this occurs.
<div class="Pp"></div>
It is not possible to unambiguously detect candidates for wrapping in a DocBook
  option tag in running text. If you care, you'll have to check for these and
  fix them by hand.
<div class="Pp"></div>
The line numbers in <b>doclifter</b> error messages are unreliable in the
  presence of <b>.EQ/.EN</b>, <b>.PS/.PE</b>, and quantum fluctuations.
<h1 class="Sh" title="Sh" id="OLD_MACRO_SETS"><a class="selflink" href="#OLD_MACRO_SETS">OLD
  MACRO SETS</a></h1>
There is a conflict between Berkeley ms's documented <b>.P1</b>
  print-header-on-page request and an undocumented Bell Labs use for displayed
  program and equation listings. The <b>ms</b> translator uses the Bell Labs
  interpretation when <b>.P2</b> is present in the document, and otherwise
  ignores the request.
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
On successful completion, the program returns status 0. It returns 1 if some
  file or standard input could not be translated. It returns 2 if one of the
  input sources was a <b>.so</b> inclusion. It returns 3 if there is an error in
  reading or writing files. It returns 4 to indicate an internal error. It
  returns 5 when aborted by a keyboard interrupt.
<div class="Pp"></div>
Note that a zero return does not guarantee that the output is valid DocBook. It
  will almost always (as in, more than 98% of cases) be syntactically valid XML,
  but in some rare cases fixups by hand may be necessary to meet the semantics
  of the DocBook DTD. Validation problems are most likely to occur with
  complicated list markup.
<h1 class="Sh" title="Sh" id="REQUIREMENTS"><a class="selflink" href="#REQUIREMENTS">REQUIREMENTS</a></h1>
The <b>pic2plot</b>(1) utility must be installed in order to translate PIC
  diagrams to SVG.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>man</b>(7), <b>mdoc</b>(7), <b>ms</b>(7), <b>me</b>(7), <b>mm</b>(7),
  <b>mwww</b>(7), <b>troff</b>(1).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Eric S. Raymond esr@thyrsus.com
<div class="Pp"></div>
There is a project web page at <b>http://www.catb.org/~esr/doclifter/</b>.</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/01/2013</td>
    <td class="foot-os">doclifter</td>
  </tr>
</table>
</body>
</html>
