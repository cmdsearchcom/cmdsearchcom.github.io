<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>isdnrep(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">isdnrep(1)</td>
    <td class="head-vol">Linux System Commands</td>
    <td class="head-rtitle">isdnrep(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
isdnrep - report ISDN activity
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Isdnrep reads the isdnlog log files, generates reports, does statistics, and
  other things. It can also generate HTML output for use with a web server.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">show version information and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a	all</b></dt>
  <dd class="It-tag">Show all connections registered. If this option is not
      given, show only the connections made today.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S	Summary</b></dt>
  <dd class="It-tag">Show a summary (no individual calls) for selected date
      range. If this option is given twice, the summaries per day are hidden
      too. Don't use with <b>-h</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h	no header</b></dt>
  <dd class="It-tag">There will be no header for each day, nor will the summary
      at the end of each day and at the end of the report be generated. This is
      useful if the output is to be processed by another program.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option doesn't work if the <b>-wX</b> is also given.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n	numbers</b></dt>
  <dd class="It-tag">Display numbers instead of the aliases for those numbers.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fFILE</b></dt>
  <dd class="It-tag">The file from which to generate the report. This is usually
      /var/log/isdn.log, or whatever is configured in /etc/isdn/isdn.conf as
      <b>LOGFILE = .</b> The -f option will override the setting in
      /etc/isdn/isdn.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t time span	time=&quot;time span&quot;</b></dt>
  <dd class="It-tag">With this option a specific time span covered by the log
      file can be displayed, e.g. all calls in November 1995, or on January 3rd
      1996 between 03:00 and 09:45.
    <div style="height: 1.00em;">&#x00A0;</div>
    The format in which times are given is described below. The time span has
      the following syntax:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">time-time</dt>
  <dd class="It-tag">display from begin time up to end time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">time-</dt>
  <dd class="It-tag">display from given time up to &quot;now&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-time</dt>
  <dd class="It-tag">display from beginning of log file up to given time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">time</dt>
  <dd class="It-tag">display the given month, day, hour, ...</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d -time	delete=&quot;time&quot;</b></dt>
  <dd class="It-tag">Delete entries from the log file up to (but not including)
      the specified time. The format is the same as for the -t option. The minus
      before the time <b>must</b> be given! It is not possible to define begin
      and end times; entries are always deleted from the beginning up to the
      time given.
    <div style="height: 1.00em;">&#x00A0;</div>
    <b>Warning!</b> Entries are <b>really</b> deleted from the file. Careless
      use can result in all entries being deleted, e.g. with &quot;isdnrep -d
      -&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E	print Errors</b></dt>
  <dd class="It-tag">Display all connections and connection attempts. Without
      this option, only successful connections are displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v	verbose</b></dt>
  <dd class="It-tag">Display warnings on start-up.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c	ignore default options</b></dt>
  <dd class="It-tag">Do not append the &quot;REPOPTIONS&quot; setting from
      /etc/isdn/isdn.conf to the command line.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p [n][m]'number'[,[m]'number'...]	phonenumber</b></dt>
  <dd class="It-tag">Display only selected phone numbers.
    <div style="height: 1.00em;">&#x00A0;</div>
    &quot;number&quot; is specified in the same format as in configuration files
      (see isdn.conf(5)). E.g. wildcards can be used.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the flag 'm' is given, the corresponding MSN is meant. E.g.:
      &quot;m2&quot; means MSN#2. If &quot;m0&quot; is given, all numbers are to
      be displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the flag 'n' is given, the given number is <b>not</b> to be displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U [_][.]'number' default source number</b></dt>
  <dd class="It-tag">Use 'number' as source number for outgoing calls with an
      unknown source number (&quot;?&quot;). '.' is replaced by country and area
      code from isdn.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
    With '_' the default source number is used internally (e.g. for fetching the
      right zone names from the ratefile) but it is not displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i	incoming</b></dt>
  <dd class="It-tag">Only incoming connections are displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o	outgoing</b></dt>
  <dd class="It-tag">Only outgoing connections are displayed.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-xX	include/exclude calls</b></dt>
  <dd class="It-tag">Select calls by day and/or hour. The following selections
      are possible and can specified in any combination and quantity using
      <b>:</b> as separator:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">d<i>daylist</i></dt>
  <dd class="It-tag">only days matching <i>daylist</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">D<i>daylist</i></dt>
  <dd class="It-tag">all days not matching <i>daylist</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">h<i>timelist</i></dt>
  <dd class="It-tag">only hours matching <i>timelist</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">H<i>timelist</i></dt>
  <dd class="It-tag">all hours not matching <i>timelist</i></dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<i>daylist</i> and <i>timelist</i> have the same syntax as described in
  <i>rate-files(5)</i>. If a day or an hour is included and excluded it will be
  excluded.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">-xd2-4:DH:h9-17:H12-15</div>
<div style="height: 1.00em;">&#x00A0;</div>
This will display all calls on Tuesdays, Wednesdays, or Thursdays that are not
  holidays with a start time between 09:00 and 12:00 or 15:00 and 17:00.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u	unknown caller</b></dt>
  <dd class="It-tag">At the end of the report, all numbers not aliased in
      callerid.conf or ~/.isdn are displayed. This option is unavailable when
      HTML output is requested.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-LX	summary lists</b></dt>
  <dd class="It-tag">Select the summaries in the footer by any combination of
      the following letters:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">i,I</dt>
  <dd class="It-tag">foreign numbers of incoming calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">o,O</dt>
  <dd class="It-tag">foreign numbers of outgoing calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">c,C</dt>
  <dd class="It-tag">foreign numbers of all calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">z,Z</dt>
  <dd class="It-tag">zones of outgoing calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">p,P</dt>
  <dd class="It-tag">providers of outgoing calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">m,M</dt>
  <dd class="It-tag">MSNs (own subscriber numbers) of outgoing calls</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Upper case letters deselect, lower case letters select a summary. With at least
  one lower case letter, only the selected summaries are shown, as long as they
  are not also deselected. -LiI for example will show no summary at all. Per
  default all summaries are displayed.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-rPROV recompute</b></dt>
  <dd class="It-tag">Recompute the connection fees with the current ratefile
      instead of showing the amounts stored in the logfile as usual. The
      provider <b>PROV</b> for recomputation is selected in one of the following
      ways:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">Use the logged provider.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">pNUM</dt>
  <dd class="It-tag">Use provider with Pnum NUM (according to P: tag in
      ratefile). The provider variant is taken from rate.conf where the provider
      must be enabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">pNUM_VAR</dt>
  <dd class="It-tag">Use provider with Pnum NUM and variant VAR (according to
      P:NUM,VAR in ratefile). No requirements for rate.conf.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">vVBN</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">vVBN_VAR</dt>
  <dd class="It-tag">Similar to pNUM[_VAR] but the provider is selected via VBN
      (B: tag in ratefile) instead of Pnum.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">b</dt>
  <dd class="It-tag">Use the cheapest of all booked providers. The provider
      selection is done per call. Booked providers are those, which are enabled
      in rate.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">B</dt>
  <dd class="It-tag">Like b but allow all providers, not only the booked.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b>[<b>*</b>|<b>/</b>]<i>number</i><b> modify call
    costs</b></dt>
  <dd class="It-tag">Multiply (*) or divide (/) the stored or recalculated call
      costs by number before displaying them. If neither * nor / is given,
      multiply.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-wX	WWW</b></dt>
  <dd class="It-tag">isdnrep can give its output in HTML format; this is
      switched on with this option. Two modes are possible:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">The HTML header is suppressed. Useful if the output is to
      be included into an existing page.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">A complete HTML page is generated.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sX	format string</b></dt>
  <dd class="It-tag">The output generated by isdnrep can be modified by
      specifying the format of the line generated for each connection. The
      syntax is similar to that used by printf. The following parameters are
      possible (the <b>x</b> where given means that a width for the field, also
      known as the precision, must be given):
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">%X</dt>
  <dd class="It-tag">time without date, e.g. 23:54:06</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%x</dt>
  <dd class="It-tag">the date, e.g. 25/07/97</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%y</dt>
  <dd class="It-tag">date without year, e.g. Sun May 04</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%Y</dt>
  <dd class="It-tag">year, in four digits, e.g. 1997</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%D</dt>
  <dd class="It-tag">duration of connection, e.g. 00:03:34</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>H</dt>
  <dd class="It-tag">the local MSN; if an alias can be found, that will be
      displayed instead</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>h</dt>
  <dd class="It-tag">the local MSN, only as a number; no aliases will be
      substituted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>F</dt>
  <dd class="It-tag">the remote number; if an alias can be found, that will be
      displayed instead</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>f</dt>
  <dd class="It-tag">the remote number, only as a number; no aliases will be
      substituted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>L</dt>
  <dd class="It-tag">the town corresponding to the local MSN if known; an empty
      string otherwise</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>l</dt>
  <dd class="It-tag">the town corresponding to the remote number if known; an
      empty string otherwise</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%T</dt>
  <dd class="It-tag">an arrow indicating the direction of the connection
      (&quot;-&gt;&quot; outgoing or &quot;&lt;-&quot; incoming); the local MSN
      should be displayed on the left side of this.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%t</dt>
  <dd class="It-tag">an arrow indicating the direction of the connection,
      reversed (&quot;&lt;-&quot; outgoing or &quot;-&gt;&quot; incoming); the
      local MSN should be displayed on the right side of this.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>u</dt>
  <dd class="It-tag">the charge units, if known, e.g. 6 EH</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%U</dt>
  <dd class="It-tag">the cost, if known, e.g. 2,28 DM</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%<b>x</b>j</dt>
  <dd class="It-tag">the name of the used provider</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%v</dt>
  <dd class="It-tag">the VBN (carrier selection prefix) of the provider, e.g.
      01012</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%V</dt>
  <dd class="It-tag">the VBN and variant of the provider, e.g. 01012_3</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%I</dt>
  <dd class="It-tag">amount of INPUT data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%O</dt>
  <dd class="It-tag">amount of OUTPUT data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%P</dt>
  <dd class="It-tag">INPUT throughput (bps)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%p</dt>
  <dd class="It-tag">OUTPUT throughput (bps)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%S</dt>
  <dd class="It-tag">Service Indicator</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%G</dt>
  <dd class="It-tag">displays a HTTP link to the corresponding fax, when a fax
      was received by mgetty. This fax can be displayed by using the link in a
      HTTP browser.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only valid when used with -wx, see below for more
      information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">%C</dt>
  <dd class="It-tag">displays a HTTP link to the corresponding voice file, when
      a call was recorded by vbox. This option is only valid when used with -wx,
      see below for more information.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The default format string for (non-HTML output) is
<div style="margin-left: 5.00ex;">&quot; %X %D %15.15H %T %-15.15F %7u %U %I
  %O&quot;</div>
<div style="height: 1.00em;">&#x00A0;</div>
With the following string all the important data is displayed while keeping the
  total length to 80:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">&quot;%X%D %10.10H%T%-14.14F%U%I
  %O&quot;</div>
<div style="height: 1.00em;">&#x00A0;</div>
The above string is put into isdn.conf at installation as <b>REPFMTSHORT</b> and
  can be used with <b>-Fshort.</b>
<div style="height: 1.00em;">&#x00A0;</div>
Without showing the transferred bytes, this string also fits into 80 chars:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">&quot; %X %D %16.16H %T %-25.25F
  %U&quot;</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is included as <b>REPFMTNIO.</b>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-FX	format</b></dt>
  <dd class="It-tag">format strings can be specified in isdn.conf; this option
      is used to select one of these. Entries can be defined in the section
      [ISDNLOG] with names beginning with &quot;REPFMT&quot;. The string after
      the -F option is added to REPFMT to find the correct entry. Case is not
      sensitive. E.g.:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
REPFMT1        = ... # -&gt; isdnrep -F1
REPFMTMYSTRING = ... # -&gt; isdnrep -Fmystring or
                          isdnrep -F MYSTRING
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="HTML_USE"><a class="selflink" href="#HTML_USE">HTML
  USE</a></h1>
isdnrep can generate a HTML page containing links to files generated by vbox and
  mgetty (faxes), so that the messages and faxes can be heard or seen from
  within a browser. However, a couple of things need to be configured first.
<div style="height: 1.00em;">&#x00A0;</div>
answering machine messages
<div style="height: 1.00em;">&#x00A0;</div>
The %C can be used in the isdnrep output format to make a link to a voice
  recording file. For this to work, the following entry is needed in the
  [ISDNLOG] section in isdn.conf:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    VBOXPATH= /var/spool/vbox/fred/incoming # incoming directory pathname
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Now isdnrep can find the file correctly. Clicking on this link will cause the
  file to be sent. These files are in ZyXEL format; the browser cannot use these
  directly. The type is given by isdnrep as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    Content-Type: application/x-zyxel4
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
The correct application (helper) for this has to be configured in the browser.
  Alternatively, a conversion program can be specified to isdnrep which will
  convert the ZyXEL format. The pathname of the file to convert is given as a
  parameter to the program.
<div style="height: 1.00em;">&#x00A0;</div>
In the [ISDNLOG] section of isdn.conf an entry as follows specifies which
  conversion program to use:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    VBOXCMD1 = /usr/bin/program1
<div class="Pp"></div>
for versions 0.x and 1.x of vbox, and
<div class="Pp"></div>
    VBOXCMD2 = /usr/bin/program2
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
for versions 2.x of vbox. Both entries can be given, isdnrep recognizes which
  version created the recording.
<div style="height: 1.00em;">&#x00A0;</div>
The program must first output a line with the content-type, followed by the data
  itself. To convert the ZyXEL format into a WAV file, the following script may
  be used:
<div style="margin-left: 5.00ex;">
<pre>
#! /bin/sh
##
## script to play voice messages from vbox-2.0
##
## WARNING! If the paths are not set correctly,
## netscape may simply crash!
<div class="Pp"></div>
PATH=$PATH:&quot;path to sox&quot;:&quot;path to pvftools&quot;:&quot;path to vbox&quot;
FILENAME1=/tmp/voxplay.$$.voc
FILENAME2=/tmp/voxplay.$$.wav
VOLUME=8
<div class="Pp"></div>
vboxtoau &lt;$1             | \
          autopvf        | \
          pvfamp $VOLUME | \
          pvfcut 0.20    | \
                pvftovoc &gt; $FILENAME1
<div class="Pp"></div>
sox $FILENAME1 $FILENAME2
<div class="Pp"></div>
echo Content-Type: audio/x-wav
echo
cat $FILENAME2
<div class="Pp"></div>
rm -f $FILENAME1 $FILENAME2
<div class="Pp"></div>
</pre>
</div>
The script above needs the packages sox and pvftools. Additionally, the browser
  needs to be told how to handle &quot;audio/x-wav&quot;. This is done by adding
  the following lines to the files listed:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.mime.types</b></dt>
  <dd class="It-tag">
    <pre>
type=audio/x-wav    \
desc=&quot;auWAV Audio&quot;  \
exts=&quot;wav&quot;
<div class="Pp"></div>
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.mailcap</b></dt>
  <dd class="It-tag">
    <pre>
audio/x-wav;/usr/bin/auplay %s
    </pre>
  </dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The NAS (Network Audio System) package may be needed.
<div style="height: 1.00em;">&#x00A0;</div>
Now, when the browser is started, it will recognize WAV files and start the
  corresponding program to handle them. The WAV format has been chosen as it can
  also be played from a Windows PC.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
faxes received by mgetty
<div style="height: 1.00em;">&#x00A0;</div>
When %G is used in the isdnrep output format, any faxes received by mgetty will
  be accessible via a HTML link, in the same manner as the answering machine
  messages.
<div style="height: 1.00em;">&#x00A0;</div>
For the faxes the following entry in the [ISDNLOG] section in isdn.conf is
  needed:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    MGETTYPATH = /var/spool/fax/incoming
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
WARNING: if isdnrep doesn't have permission to read the files, they will not be
  displayed; there will be no error message.
<div style="height: 1.00em;">&#x00A0;</div>
When isdnrep passes these files back to the browser, they have the G3 format.
  The following header is used to notify the browser of this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    Content-Type: application/x-faxg3
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
As the browser probably doesn't understand this format, the following changes to
  the files listed are needed:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.mime.types</b></dt>
  <dd class="It-tag">
    <pre>
type=application/x-faxg3  \
desc=&quot;G3-Fax Format&quot;      \
exts=&quot;fax,g3&quot;
<div class="Pp"></div>
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.mailcap</b></dt>
  <dd class="It-tag">
    <pre>
pplication/x-faxg3;/usr/X11/bin/g3view %s
    </pre>
  </dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The program g3view has to be installed for this to work.
<div style="height: 1.00em;">&#x00A0;</div>
If now the link is clicked on, the browser will automatically start the external
  g3view to handle this data.
<div style="height: 1.00em;">&#x00A0;</div>
If you prefer another format (instead of G3) such as JPEG, the format has to be
  converted. The following entry in the [ISDNLOG] section of isdn.conf takes
  care of this:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
VBOXCMD = /usr/bin/g3tojpeg # example
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
The script g3tojpeg can be something like this:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
#! /bin/sh
##
## command to display faxes in a browser
##
## WARNING! If the paths are not set correctly,
## netscape may simply crash!
<div class="Pp"></div>
export PATH=$PATH:&quot;path to g3topbm&quot;:&quot;path to convert&quot;
<div class="Pp"></div>
echo Content-Type: image/jpeg
echo
<div class="Pp"></div>
g3topbm &lt; $1 | convert pbm:- jpeg:-
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
The packages ImageMagick and mgetty are needed. Mgetty is probably already
  installed if you want to use this feature :-)
<div style="height: 1.00em;">&#x00A0;</div>
The advantage of the JPEG format is that it can also be displayed by a browser
  running on a Windows PC.
<div style="height: 1.00em;">&#x00A0;</div>
summary
<div style="height: 1.00em;">&#x00A0;</div>
A suitable value for REPFMTWWW is
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    REPFMTWWW = &quot;%X %D %17.17H %T %-17.17F %-20.20l SI: %S %9u %U %I %O %G %C&quot;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Netscape 3.0 Gold and Arena have been tested, and both work fine with isdnrep's
  HTML output, although Arena's display is not as colourful as Netscape's.
<div style="height: 1.00em;">&#x00A0;</div>
A known problem (which is impossible to solve completely) is determining the
  relationship between an isdn connection and a fax or vbox recording.
  Unfortunately the times for isdnrep, mgetty and vbox differ. Isdnrep tries to
  make the best guess, but it's always possible that e.g. a fax is connected to
  the wrong isdn connection.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE_OUTPUT"><a class="selflink" href="#EXAMPLE_OUTPUT">EXAMPLE
  OUTPUT</a></h1>
With the default configuration the following output can be generated on stdout
  (whitespace slightly edited for clarity):
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
$ isdnrep -v -t 6/1/96
I S D N  Connection Report  -  Tue Aug 26 22:21:19 1997
<div class="Pp"></div>
<div class="Pp"></div>
Sat Jan  6 1996
  00:54:19                 UNKNOWN -&gt; UNKNOWN     No user responding       <b>(4)</b>
[...]
  16:33:24  0:03:23        UNKNOWN -&gt; UNKNOWN        7 EH      0,84 DM
  17:33:47                 UNKNOWN -&gt; UNKNOWN     Unallocated (unassigned) <b>(5)</b>
                                                  number
  20:02:28  0:02:37     Phone/HDLC &lt;- UNKNOWN                              <b>(1)</b>
  20:09:53  0:07:01     Modem/X.75 -&gt; T-Online       3 EH      0,36 DM     <b>(2)</b>
  21:27:56                 UNKNOWN -&gt; UNKNOWN     User busy                <b>(3)</b>
  22:09:41  0:29:36        UNKNOWN -&gt; UNKNOWN       43 EH      9,89 DM*
======================================================================
  1 IN= 0:02:37,  13 OUT= 3:40:14,   3 failed      210 EH     25,20 DM
<b>(6)</b>^^^^^^^^^^^^  <b>(7)</b>^^^^^^^^^^^^^  <b>(8)</b>^^^^^^^   <b>(9)</b>^^^^^^ <b>(10)</b>^^^^^^^^
<div class="Pp"></div>
<div class="Pp"></div>
DIALOUT Summary for Sat Jan  6 1996                                       <b>(11)</b>
-----------------------------------------------------------
T-Online         1 call(s)  0:07:01     3 EH    0,36 DM
UNKNOWN         11 call(s)  0:17:00    20 EH    2,40 DM
<div class="Pp"></div>
<div class="Pp"></div>
DIALIN Summary for Sat Jan  6 1996                                        <b>(12)</b>
-----------------------------------------------------------
UNKNOWN          1 call(s)  0:02:37
<div class="Pp"></div>
<div class="Pp"></div>
Zone 1 : City              2 call(s)  2:23:13     50 EH    6,00 DM        <b>(13)</b>
Zone x : UNKNOWN          11 call(s)  0:17:00     20 EH    2,40 DM
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Notes</b>
<div style="margin-left: 1.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (1)</dt>
  <dd class="It-tag">&quot;xxx &lt;- xxx&quot; was an incoming call, so doesn't
      cost anything</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (2)</dt>
  <dd class="It-tag">&quot;xxx -&gt; xxx&quot; was an outgoing call lasting 203
      seconds, so for City zone, off-peak time (Saturday), 3 charge units = DM
      0,36</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (3)</dt>
  <dd class="It-tag">there was no connection, as the called party was busy</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (4)</dt>
  <dd class="It-tag">there was no connection, as the called party didn't pick up
      the phone</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (5)</dt>
  <dd class="It-tag">&quot;the number you have dialed is not connected. Hang up
      and dial again. ...&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (6)</dt>
  <dd class="It-tag">total time for incoming calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (7)</dt>
  <dd class="It-tag">total time for outgoing calls</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (8)</dt>
  <dd class="It-tag">3 calls failed; busy (3), no answer (4) and error in
      dialing (5)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   (9)</dt>
  <dd class="It-tag">total charge units incurred for one day</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(10)</dt>
  <dd class="It-tag">total costs incurred for one day</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(11)</dt>
  <dd class="It-tag">outgoing calls grouped per number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(12)</dt>
  <dd class="It-tag">incoming calls grouped per number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(13)</dt>
  <dd class="It-tag">outgoing and incoming calls grouped per tariff zone</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
If the charge units are marked with &quot;*&quot;, the PTT switch did not give
  charge info; these are the number of units guestimated by isdnrep.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="TIME_FORMAT"><a class="selflink" href="#TIME_FORMAT">TIME
  FORMAT</a></h1>
For the -d and -t options, the time is specified in the following formats:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">[DD/][M]M/[[YY]YY]</dt>
  <dd class="It-tag">specifies the month or day.
    <div style="height: 1.00em;">&#x00A0;</div>
    Examples:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">7/</dt>
  <dd class="It-tag">July of the current year</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">8/1996</dt>
  <dd class="It-tag">August 1996</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">29/6/05</dt>
  <dd class="It-tag">June 29th 2005</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">6/6/</dt>
  <dd class="It-tag">error, is not June 6th of the current year; it's June
    1906</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">[D]D</dt>
  <dd class="It-tag">day of current month
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">[D]D.[M]M.[[[CC]Y]Y]</dt>
  <dd class="It-tag">specifies a day. If century or year and century are
      missing, they will be taken from the current date.
    <div style="height: 1.00em;">&#x00A0;</div>
    Examples:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">23.5.</dt>
  <dd class="It-tag">May 23rd in the current year</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">19.01.38</dt>
  <dd class="It-tag">January 19th 2038</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">16.10.1998</dt>
  <dd class="It-tag">October 16th 1998</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">[MM]DD[hhmm[[CC]YY][.ss]]</dt>
  <dd class="It-tag">specifies an exact time. Unspecified parts are defined as 0
      when interpreted as a begin time, and 23 or 59 when interpreted as an end
      time.
    <div style="height: 1.00em;">&#x00A0;</div>
    If a year is to be specified, the hours and minutes <b>must</b> also be
      specified.
    <div style="height: 1.00em;">&#x00A0;</div>
    The format is copied from the date command.
    <div style="height: 1.00em;">&#x00A0;</div>
    Examples:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">0107</dt>
  <dd class="It-tag">January 1st in the current year</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">0107173196.25</dt>
  <dd class="It-tag">January 7th 1996 17:31:25</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">010717311996</dt>
  <dd class="It-tag">January 7th 1996 17:31:00 (or 17:31:59)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">12141995</dt>
  <dd class="It-tag">error: <b>not</b> December 12th 1995, but December 12th of
      the current year at 19:95, so it's garbage.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">Examples of time spans and their meaning:
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">6/95-081214381996.25</dt>
  <dd class="It-tag">all entries between June 1st 1995 00:00:00 and August 12th
      14:38:25</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">0912030495.20-12/95</dt>
  <dd class="It-tag">all entries between September 12th 1995 03:04:20 and
      December 31st 1995 23:59:59</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">09.06.2006-9/7/6</dt>
  <dd class="It-tag">all entries between June 6th 2006 00:00:00 and July 7th
      2006 00:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">7/95</dt>
  <dd class="It-tag">all entries between July 1st 1995 00:00:00 and July 31st
      1995 23:59:59</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">0908</dt>
  <dd class="It-tag">all entries between September 8th in the current year
      00:00:00 and September 8th in the current year 23:59:59</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3</dt>
  <dd class="It-tag">third day of the current month</dd>
</dl>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">[CC]YY-MM-DDThh:mm:ss</dt>
  <dd class="It-tag">specifies a year, a moment, or something between. Each
      separator &#x00B4;-', 'T', and ':' can be omitted or not. If the first '-'
      is missing, the century must be given.
    <div style="height: 1.00em;">&#x00A0;</div>
    This notation cannot be combined with the above notations. Time spans are
      noted with '--' instead of '-'. If no '--' is given, &#x00B4;i' must be
      noted after the -t option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Examples:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">i2002</dt>
  <dd class="It-tag">the entire year 2002 from January 1st 00:00:00 to December
      31st 23:59:59</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">i200306</dt>
  <dd class="It-tag">the entire month June 2003</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">200308--200309</dt>
  <dd class="It-tag">August and September 2003</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2003-10-03T17--</dt>
  <dd class="It-tag">all entries after October 3rd 2003 16:59:59</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2003-08-27T11:51:25--20030827115128</dt>
  <dd class="It-tag">4 seconds at August 27th 2003</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">200306</dt>
  <dd class="It-tag">error: neither 'i' nor '--' given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2003-1-4</dt>
  <dd class="It-tag">error: leading zeros (at month and day) must not
    omitted</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;y&quot;</dt>
  <dd class="It-tag">yesterday,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;yy&quot;</dt>
  <dd class="It-tag">the day before yesterday,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;yyy&quot;</dt>
  <dd class="It-tag">three days ago and so on. For time spans these can also be
      used in conjunction with the notations explained above.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/var/log/isdn.log</b> or <b>/var/lib/isdn/calls</b></dt>
  <dd class="It-tag">isdnlog log file with information about all calls.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/etc/isdn/isdn.conf</b></dt>
  <dd class="It-tag">general configuration
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/etc/isdn/callerid.conf</b></dt>
  <dd class="It-tag">aliases for telephone numbers
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>isdnlog(5) isdnlog(8) isdn.conf(5)</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manual page was adapted from isdnlog/README by Paul Slootman
  &lt;paul@isdn4linux.de&gt;, for Debian GNU/Linux and isdn4linux.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2007/01/05</td>
    <td class="foot-os">ISDN 4 Linux 3.13</td>
  </tr>
</table>
</body>
</html>
