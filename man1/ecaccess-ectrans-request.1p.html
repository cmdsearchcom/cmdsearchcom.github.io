<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ECACCESS-ECTRANS-REQUEST(1p)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ECACCESS-ECTRANS-REQUEST(1p)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">ECACCESS-ECTRANS-REQUEST(1p)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ecaccess-ectrans-request - Request a new ECtrans transfer
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>ecaccess-ectrans-request -version|-help|-manual</b>
<div class="Pp"></div>
<b>ecaccess-ectrans-request [-debug] [-gateway</b> <i>name</i><b>] [-target</b>
  <i>file-name</i><b>] [-retryCount</b> <i>number</i><b>] [-retryFrequency</b>
  <i>frequency</i><b>]</b> <b>[-priority</b> <i>priority</i><b>] [-lifeTime</b>
  <i>duration</i><b>] [-mailTo</b> <i>email</i><b>] [-onSuccess] [-onFailure]
  [-onRetry] [-deleteSource] [-keep]</b>
  <b>[-reject</b>|<b>-append</b>|<b>-resume</b>| <b>-overwrite]
  [-maximumDuration</b> <i>duration</i><b>] [-minimumDuration</b>
  <i>duration</i> <b>] [-minimumRate</b> <i>rate</i><b>]</b>
  <i>association-name</i> <b>[</b><i></i><i>@protocol</i><i></i><b>]</b>
  <i>source</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Allow Member State users to initiate file transfers between ECMWF and Member
  State servers. The ECaccess Server will spool the ECMWF file specified by the
  <i>source</i> parameter in the user's ECtrans transfer queue: if the
  connection between the ECMWF and Member State gateways is down or if any error
  occurs, the file will be kept in the spool area at ECMWF and you can resume
  the transfer through the web interface or with the
  <b>ecaccess-ectrans-restart</b> command. If required the transfer can be
  retried automatically (see the <b>-retryCount</b> and <b>-retryFrequency</b>
  options to tailor the retry mechanism).
<div class="Pp"></div>
The <b>-reject</b>, <b>-append</b>, <b>-resume</b> and <b>-overwrite</b> options
  are mutually exclusive and determine what to do if there is an existing target
  file. The <b>-mailTo</b> option specifies an <i>email</i> address to be
  notified in case of a successful (option <b>-onSuccess</b>) and/or a failed
  transfer (option <b>-onFailure</b>).
<div class="Pp"></div>
When a request has been spooled successfully, an <i>ectrans-id</i> is returned
  immediately. The <i>ectrans-id</i> can be used to reference the transfer,
  using the web interface or with the <b>ecaccess-ectrans-delete</b>,
  <b>ecaccess-ectrans-list</b> or <b>ecaccess-ectrans-restart</b> commands.
<h1 class="Sh" title="Sh" id="ARGUMENTS"><a class="selflink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>association-name</i><b>[</b><i></i><i>@protocol</i><i></i><b>]</b></dt>
  <dd class="It-tag">The ECtrans Association with optionaly the name of the
      protocol to use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>source</i></dt>
  <dd class="It-tag">Name of the file at ECMWF to spool in ECtrans.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-gateway</b> <i>name</i></dt>
  <dd class="It-tag">This is the <i>name</i> of the ECaccess Gateway where the
      ECtrans Association <i>association-name</i> is defined. It is by default
      the Gateway you are connected to. In order to get the name of your current
      Gateway you can use the <b>ecaccess-gateway-name</b> command. When using
      the commands at ECMWF the default Gateway is always
      &quot;ecaccess.ecmwf.int&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-target</b> <i>file-name</i></dt>
  <dd class="It-tag">Defines the target <i>file-name</i> (default: same as
      <i>source</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-retryCount</b> <i>number</i></dt>
  <dd class="It-tag">Defines the <i>number</i> of retries (default: 144).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-retryFrequency</b> <i>frequency</i></dt>
  <dd class="It-tag">Defines the <i>frequency</i> of retries in seconds
      (default: 600 seconds).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-priority</b> <i>priority</i></dt>
  <dd class="It-tag">Defines the transmission <i>priority</i> 0-99 (default:
      99).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-lifeTime</b> <i>duration</i></dt>
  <dd class="It-tag">Defines the lifetime of the request (default: 7 days). The
      <i>duration</i> is specified in [w]eeks, [d]ays, [h]ours, [m]inutes or
      [s]econds (e.g. <i>1w</i> or <i>2d</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mailTo</b> <i>email</i></dt>
  <dd class="It-tag">Defines the target <i>email</i> address (default:
      &lt;user-id&gt;@ecmwf.int).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-onSuccess</b></dt>
  <dd class="It-tag">Allow sending a mail when the transfer is successful.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-onFailure</b></dt>
  <dd class="It-tag">Allow sending a mail when the transfer has failed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-onRetry</b></dt>
  <dd class="It-tag">Allow sending a mail when the transfer is retried.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-deleteSource</b></dt>
  <dd class="It-tag">Allow deleting the original <i>source</i> file once it is
      safe in the spool.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keep</b></dt>
  <dd class="It-tag">Allow keeping the request in the spool until the duration
      specified in the <b>-lifeTime</b> option has passed. By default a
      successful transfer is removed from the spool.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-reject</b></dt>
  <dd class="It-tag">Allow failing if there is an existing target file
      (default).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-append</b></dt>
  <dd class="It-tag">Allow appending if there is an existing target file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-resume</b></dt>
  <dd class="It-tag">Allow resuming if there is an existing target file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-overwrite</b></dt>
  <dd class="It-tag">Allow overwriting if there is an existing target file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-maximumDuration</b> <i>duration</i></dt>
  <dd class="It-tag">Define the maximum transfer <i>duration</i>. The
      <i>duration</i> is specified in [w]eeks, [d]ays, [h]ours, [m]inutes or
      [s]econds (e.g. <i>10m</i> or <i>1h</i>). A value &lt;=0 will deactivate
      the feature (default: 12h).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-minimumDuration</b> <i>duration</i></dt>
  <dd class="It-tag">Allow setting the <i>duration</i> before to control a
      transmission (e.g. for the first 10 minutes ECtrans don't try to check the
      transfer rate, which allow not to enforce some minimum transfer rates for
      very small files). The <i>duration</i> is specified in [w]eeks, [d]ays,
      [h]ours, [m]inutes or [s]econds (e.g. <i>30s</i> or <i>10m</i>). A value
      &lt;=0 will deactivate the feature (default: 10m).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-minimumRate</b> <i>rate</i></dt>
  <dd class="It-tag">Allow setting a minimum transfer <i>rate</i> for a
      transmission (expressed in bytes/s). This is an average value, not the
      transmission <i>rate</i> at one particular moment in time (e.g. if a big
      file is stuck for 5 minutes but then transmit much faster later on then it
      will not be interrupted as long as the overall transfer rate is above the
      minimum). A value &lt;=0 will deactivate the feature (default:
    10240).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-version</b></dt>
  <dd class="It-tag">Display version number and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-help</b></dt>
  <dd class="It-tag">Print a brief help message and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-manual</b></dt>
  <dd class="It-tag">Prints the manual page and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-retry</b> <i>count</i></dt>
  <dd class="It-tag">Number of SSL connection retries per 5s to ECMWF. This
      parameter only apply to the initial SSL connection initiated by the
      command to the ECMWF server. It does not apply to all the subsequent
      requests made afteward as it is mainly targeting errors that can happen
      from time to time during the SSL handshake. Default is no retry.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-debug</b></dt>
  <dd class="It-tag">Display the SOAP and SSL messages exchanged.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>ecaccess-ectrans-request -lifeTime</b> <i>2d</i> <b>-overwrite -onFailure
  -onRetry</b> <i>test@genericFtp</i> <i>ec:test.txt</i>
<div class="Pp"></div>
Request a file transfer of the <i>ec:test.txt</i> file to the default gateway
  with the association <i>test</i> and the protocol <i>genericFtp</i>. If the
  target file already exists then the original file is deleted. If the transfer
  is retried or fail then an email is sent to the default email address
  (&lt;user-id&gt;@ecmwf.int). After 2 days the file is removed from the spool
  (whatever the status of the transmission is).
<div class="Pp"></div>
<b>ecaccess-ectrans-request -minimumDuration</b> <i>10m</i>
  <b>-maximumDuration</b> <i>35m</i> <b>-minimumRate</b> <i>8192</i>
  <i>test@genericFtp</i> <i>ec:test.txt</i>
<div class="Pp"></div>
After 10 minutes ECtrans will start to control the transfer rate. If after 35
  minutes the file is still not transmitted or if at a certain point in time the
  average transmission rate is less than 8Kbytes/s then the transmission will be
  canceled. If canceled, the transmission will be retried 144 times (with a 10
  minutes interval).
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>ecaccess-ectrans-delete</b>, <b>ecaccess-ectrans-list</b>,
  <b>ecaccess-ectrans-restart</b> and <b>ecaccess</b>.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-12-11</td>
    <td class="foot-os">perl v5.18.1</td>
  </tr>
</table>
</body>
</html>
