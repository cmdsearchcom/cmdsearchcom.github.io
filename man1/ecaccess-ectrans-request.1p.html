<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:06:41 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ECACCESS-ECTRANS-REQUEST(1p) User Contributed Perl
Documentation ECACCESS-ECTRANS-REQUEST(1p)</p>

<p style="margin-top: 1em">NAME <br>
ecaccess-ectrans-request - Request a new ECtrans
transfer</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ecaccess-ectrans-request -version|-help|-manual</p>

<p style="margin-top: 1em">ecaccess-ectrans-request
[-debug] [-gateway name] [-target file-name] [-retryCount
number] [-retryFrequency frequency] [-priority priority]
[-lifeTime duration] [-mailTo email] <br>
[-onSuccess] [-onFailure] [-onRetry] [-deleteSource] [-keep]
[-reject|-append|-resume|-overwrite] [-maximumDuration
duration] [-minimumDuration duration] [-minimumRate rate]
<br>
association-name[@protocol] source</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Allow Member State users to initiate file transfers between
ECMWF and Member State servers. The ECaccess Server will
spool the ECMWF file specified by the source parameter in
the <br>
user&rsquo;s ECtrans transfer queue: if the connection
between the ECMWF and Member State gateways is down or if
any error occurs, the file will be kept in the spool area at
ECMWF and <br>
you can resume the transfer through the web interface or
with the ecaccess-ectrans-restart command. If required the
transfer can be retried automatically (see the -retryCount
and <br>
-retryFrequency options to tailor the retry mechanism).</p>

<p style="margin-top: 1em">The -reject, -append, -resume
and -overwrite options are mutually exclusive and determine
what to do if there is an existing target file. The -mailTo
option specifies an email <br>
address to be notified in case of a successful (option
-onSuccess) and/or a failed transfer (option
-onFailure).</p>

<p style="margin-top: 1em">When a request has been spooled
successfully, an ectrans-id is returned immediately. The
ectrans-id can be used to reference the transfer, using the
web interface or with the <br>
ecaccess-ectrans-delete, ecaccess-ectrans-list or
ecaccess-ectrans-restart commands.</p>

<p style="margin-top: 1em">ARGUMENTS <br>
association-name[@protocol] <br>
The ECtrans Association with optionaly the name of the
protocol to use.</p>

<p style="margin-top: 1em">source Name of the file at ECMWF
to spool in ECtrans.</p>

<p style="margin-top: 1em">OPTIONS <br>
-gateway name <br>
This is the name of the ECaccess Gateway where the ECtrans
Association association-name is defined. It is by default
the Gateway you are connected to. In order to get the <br>
name of your current Gateway you can use the
ecaccess-gateway-name command. When using the commands at
ECMWF the default Gateway is always
&quot;ecaccess.ecmwf.int&quot;.</p>

<p style="margin-top: 1em">-target file-name <br>
Defines the target file-name (default: same as source).</p>

<p style="margin-top: 1em">-retryCount number <br>
Defines the number of retries (default: 144).</p>

<p style="margin-top: 1em">-retryFrequency frequency <br>
Defines the frequency of retries in seconds (default: 600
seconds).</p>

<p style="margin-top: 1em">-priority priority <br>
Defines the transmission priority 0-99 (default: 99).</p>

<p style="margin-top: 1em">-lifeTime duration <br>
Defines the lifetime of the request (default: 7 days). The
duration is specified in [w]eeks, [d]ays, [h]ours, [m]inutes
or [s]econds (e.g. 1w or 2d).</p>

<p style="margin-top: 1em">-mailTo email <br>
Defines the target email address (default:
&lt;user-id&gt;@ecmwf.int).</p>

<p style="margin-top: 1em">-onSuccess <br>
Allow sending a mail when the transfer is successful.</p>

<p style="margin-top: 1em">-onFailure <br>
Allow sending a mail when the transfer has failed.</p>

<p style="margin-top: 1em">-onRetry <br>
Allow sending a mail when the transfer is retried.</p>

<p style="margin-top: 1em">-deleteSource <br>
Allow deleting the original source file once it is safe in
the spool.</p>

<p style="margin-top: 1em">-keep Allow keeping the request
in the spool until the duration specified in the -lifeTime
option has passed. By default a successful transfer is
removed from the spool.</p>

<p style="margin-top: 1em">-reject Allow failing if there
is an existing target file (default).</p>

<p style="margin-top: 1em">-append Allow appending if there
is an existing target file.</p>

<p style="margin-top: 1em">-resume Allow resuming if there
is an existing target file.</p>

<p style="margin-top: 1em">-overwrite <br>
Allow overwriting if there is an existing target file.</p>

<p style="margin-top: 1em">-maximumDuration duration <br>
Define the maximum transfer duration. The duration is
specified in [w]eeks, [d]ays, [h]ours, [m]inutes or
[s]econds (e.g. 10m or 1h). A value &lt;=0 will deactivate
the <br>
feature (default: 12h).</p>

<p style="margin-top: 1em">-minimumDuration duration <br>
Allow setting the duration before to control a transmission
(e.g. for the first 10 minutes ECtrans don&rsquo;t try to
check the transfer rate, which allow not to enforce some
<br>
minimum transfer rates for very small files). The duration
is specified in [w]eeks, [d]ays, [h]ours, [m]inutes or
[s]econds (e.g. 30s or 10m). A value &lt;=0 will deactivate
<br>
the feature (default: 10m).</p>

<p style="margin-top: 1em">-minimumRate rate <br>
Allow setting a minimum transfer rate for a transmission
(expressed in bytes/s). This is an average value, not the
transmission rate at one particular moment in time <br>
(e.g. if a big file is stuck for 5 minutes but then transmit
much faster later on then it will not be interrupted as long
as the overall transfer rate is above the <br>
minimum). A value &lt;=0 will deactivate the feature
(default: 10240).</p>

<p style="margin-top: 1em">-version <br>
Display version number and exits.</p>

<p style="margin-top: 1em">-help Print a brief help message
and exits.</p>

<p style="margin-top: 1em">-manual Prints the manual page
and exits.</p>

<p style="margin-top: 1em">-retry count <br>
Number of SSL connection retries per 5s to ECMWF. This
parameter only apply to the initial SSL connection initiated
by the command to the ECMWF server. It does not apply <br>
to all the subsequent requests made afteward as it is mainly
targeting errors that can happen from time to time during
the SSL handshake. Default is no retry.</p>

<p style="margin-top: 1em">-debug Display the SOAP and SSL
messages exchanged.</p>

<p style="margin-top: 1em">EXAMPLES <br>
ecaccess-ectrans-request -lifeTime 2d -overwrite -onFailure
-onRetry test@genericFtp ec:test.txt</p>

<p style="margin-top: 1em">Request a file transfer of the
ec:test.txt file to the default gateway with the association
test and the protocol genericFtp. If the target file already
exists then the original <br>
file is deleted. If the transfer is retried or fail then an
email is sent to the default email address
(&lt;user-id&gt;@ecmwf.int). After 2 days the file is
removed from the spool <br>
(whatever the status of the transmission is).</p>

<p style="margin-top: 1em">ecaccess-ectrans-request
-minimumDuration 10m -maximumDuration 35m -minimumRate 8192
test@genericFtp ec:test.txt</p>

<p style="margin-top: 1em">After 10 minutes ECtrans will
start to control the transfer rate. If after 35 minutes the
file is still not transmitted or if at a certain point in
time the average transmission <br>
rate is less than 8Kbytes/s then the transmission will be
canceled. If canceled, the transmission will be retried 144
times (with a 10 minutes interval).</p>

<p style="margin-top: 1em">SEE ALSO <br>
ecaccess-ectrans-delete, ecaccess-ectrans-list,
ecaccess-ectrans-restart and ecaccess.</p>

<p style="margin-top: 1em">perl v5.18.1 2013-12-11
ECACCESS-ECTRANS-REQUEST(1p)</p>
<hr>
</body>
</html>
