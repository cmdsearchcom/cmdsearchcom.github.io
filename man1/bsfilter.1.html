<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BSFILTER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BSFILTER(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">BSFILTER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
bsfilter &#x2014; bayesian spam filter
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>bsfilter</b> [<b>options</b>] [<b>commands</b>] &lt; MAIL
<div class="Pp"></div>
<b>bsfilter</b> [<b>options</b>] [<b>commands</b>] MAIL ...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>bsfilter</b> filters out spam mails.
<div class="Pp"></div>
If commands are specified, bsfilter is in maintenance mode, otherwise it is in
  filtering mode.
<div class="Pp"></div>
If bsfilter does not find spam in filtering mode, exit status is 1.
<div class="Pp"></div>
If bsfilter runs with --pipe option or finds spam, exit status is 0.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--add-clean</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">add mails into the clean token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--add-spam</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">add mails into the spam token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--sub-clean</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b></dt>
  <dd class="It-tag">subtract mails from the clean token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--sub-spam</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag">subtract mails from the spam token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--update</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">update the probability table from clean and spam token
      databases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export-clean</b></dt>
  <dd class="It-tag">export the clean token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export-spam</b></dt>
  <dd class="It-tag">export the spam token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--import-clean</b></dt>
  <dd class="It-tag">import the clean token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--import-spam</b></dt>
  <dd class="It-tag">import the spam token database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export-probability</b></dt>
  <dd class="It-tag">export the probability database (for debugging
    purpose).</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--homedir </b><i>directory</i><i></i></dt>
  <dd class="It-tag">specify the name of the bsfilter's home directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">If this option is not used, a directory specified with the
      environment variable &quot;BSFILTERHOME&quot; is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">If the variable &quot;BSFILTERHOME&quot; is not defined,
      &quot;.bsfilter&quot; directory under your home is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">If the variable &quot;HOME&quot; is not defined, a
      directory which bsfilter is located at is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--config-file </b><i>file</i><i></i></dt>
  <dd class="It-tag">specify the name of the bsfilter's configuration file
      &quot;bsfilter.conf&quot; in bsfilter's home directory is used by
    default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--max-line </b><i>number</i><i></i></dt>
  <dd class="It-tag">check and/or study the first number of lines default is
      500. 0 means all.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--db </b><i>sdbm|gdbm|bdb1|bdb|qdbm</i><i></i></dt>
  <dd class="It-tag">specify the name of database type &quot;sdbm&quot; by
      default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--jtokenizer
    </b><i>bigram|block|mecab|chasen|kakasi</i><i></i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j
    </b><i>bigram|block|mecab|chasen|kakasi</i><i></i></dt>
  <dd class="It-tag">specify algorithm of a tokenizer for Japanese language
      &quot;bigram&quot; by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-clean</b></dt>
  <dd class="It-tag">print filename of clean mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-spam</b></dt>
  <dd class="It-tag">print filename of spam.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap</b></dt>
  <dd class="It-tag">access IMAP server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-server </b><i>hostname</i><i></i></dt>
  <dd class="It-tag">specify hostname of IMAP server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-port </b><i>number</i><i></i></dt>
  <dd class="It-tag">specify port number of IMAP server. default is 143.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-auth </b><i>method</i><i></i></dt>
  <dd class="It-tag">specify authorization method. default is &quot;auto&quot;.
      &quot;cram-md5&quot; use &quot;AUTHENTICATE CRAM-MD5&quot; command.
      &quot;login&quot; use &quot;AUTHENTICATE LOGIN&quot; command.
      &quot;loginc&quot; use &quot;LOGIN&quot; command. &quot;auto&quot; try
      &quot;cram-md5&quot;, &quot;login&quot; and &quot;loginc&quot; in this
      order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-user </b><i>name</i><i></i></dt>
  <dd class="It-tag">specify user name of IMAP server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-password </b><i>password</i><i></i></dt>
  <dd class="It-tag">specify password of imap-user.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-folder-clean </b><i>folder</i><i></i></dt>
  <dd class="It-tag">specify destination folder for clean mails.
      &quot;inbox.clean&quot; for example.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-folder-spam </b><i>folder</i><i></i></dt>
  <dd class="It-tag">specify destination folder for spams.
      &quot;inbox.spam&quot; for example.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-fetch-unseen</b></dt>
  <dd class="It-tag">filter or study mails without SEEN flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-fetch-unflagged</b></dt>
  <dd class="It-tag">filter or study mails without &quot;X-Spam-Flag&quot;
      header.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--imap-reset-seen-flag</b></dt>
  <dd class="It-tag">reset SEEN flag when bsfilter moves or modifies mails.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop</b></dt>
  <dd class="It-tag">work as POP proxy.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pid-file </b><i>file</i><i></i></dt>
  <dd class="It-tag">specify filename for logging process ID of bsfilter
      &quot;bsfilter.pid&quot; in bsfilter's home directory is used by default
      this function is valid when &quot;--pop&quot; is specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--tasktray</b></dt>
  <dd class="It-tag">sit in tasktray this is valid with &quot;--pop&quot; on
      VisualuRuby.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-server </b><i>hostname</i><i></i></dt>
  <dd class="It-tag">specify hostname of POP server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-port </b><i>number</i><i></i></dt>
  <dd class="It-tag">specify port number of POP server. default is 110.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-proxy-if </b><i>address</i><i></i></dt>
  <dd class="It-tag">specify address of interface which bsfilter listens at
      default is 0.0.0.0 and all interfaces are active.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-proxy-port </b><i>number</i><i></i></dt>
  <dd class="It-tag">specify port number which bsfilter listens at. default is
      10110.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-user </b><i>name</i><i></i></dt>
  <dd class="It-tag">optional. specify username of POP server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">bsfilter checks match between value of this options and a
      name which MUA sends.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">in case of mismatch, bsfilter closes sockets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-proxy-set </b><i>set[,set...]</i><i></i></dt>
  <dd class="It-tag">specify rules of pop proxy.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">alternative way of pop-server, pop-port, pop-proxy-port and
      pop-user option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">format of &quot;set&quot; is
      &quot;pop-server:pop-port:[proxy-interface]:proxy-port[:pop-user]&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">If proxy-interface is specified and isn't 0.0.0.0 , other
      interfaces are not used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">&quot;--pop-proxy-set 192.168.1.1:110::10110&quot; is
      equivalent with &quot;--pop-server 192.168.1.1 --pop-port 110
      --pop-proxy-port 10110&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pop-max-size </b><i>number</i><i></i></dt>
  <dd class="It-tag">When mail is longer than the specified number, the mail is
      not filtered. When 0 is specified, all mails are tested and filtered. unit
      is byte. default is 50000.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ssl</b></dt>
  <dd class="It-tag">use POP over SSL with --pop option and use IMAP over SSL
      with --imap option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ssl-cert </b><i>filename|dirname</i><i></i></dt>
  <dd class="It-tag">specify a filename of a certificate of a trusted CA or a
      name of a directory of certificates.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--method </b><i>g|r|rf</i><i></i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m </b><i>g|r|rf</i><i></i></dt>
  <dd class="It-tag">specify filtering method. &quot;rf&quot; by default.
      &quot;g&quot; means Paul Graham method, &quot;r&quot; means Gary Robinson
      method, and &quot;rf&quot; means Robinson-Fisher method.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--spam-cutoff </b><i>number</i><i></i></dt>
  <dd class="It-tag">specify spam-cutoff value. 0.9 by default for Paul Graham
      method. 0.582 by default for Gary Robinson method. 0.95 by default for
      Robinson-Fisher method.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto-update</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">recognize mails, add them into clean or spam token database
      and update the probability table.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--disable-degeneration</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b></dt>
  <dd class="It-tag">disable degeneration during probability table lookup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--disable-utf-8</b></dt>
  <dd class="It-tag">disable utf-8 support.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--refer-header </b><i>header[,header...]</i><i></i></dt>
  <dd class="It-tag">refer specified headers of mails.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">bsfilter refers Ufrom, From, To, Cc, Subject, Reply-to,
      Return-path, Received, Content-Transfer-Encoding, Content-Type, charset,
      and Content-Disposition by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--refer-all-header</b></dt>
  <dd class="It-tag">refer all headers of mails.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-header</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b></dt>
  <dd class="It-tag">ignore headers of mails. (it is same as --refer-header
      &quot;&quot;.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-body</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b></dt>
  <dd class="It-tag">ignore body of mails, except URL or mail address.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-plain-text-part</b></dt>
  <dd class="It-tag">ignore plain text part if html part is included in the
      mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-after-last-atag</b></dt>
  <dd class="It-tag">ignore text after last &quot;A&quot; tag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-in-token </b><i>characters</i><i></i></dt>
  <dd class="It-tag">specify characters which are allowable in a token
      &quot;*'!&quot; by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-process</b></dt>
  <dd class="It-tag">show summary of execution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-new-token</b></dt>
  <dd class="It-tag">show tokens which are newly added into the token
    database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mbox</b></dt>
  <dd class="It-tag">use &quot;unix from&quot; to divide mbox format file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--max-mail </b><i>number</i><i></i></dt>
  <dd class="It-tag">reduce token database when the number of stored mails is
      larger than this one 10000 by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--min-mail </b><i>number</i><i></i></dt>
  <dd class="It-tag">reduce token database as if this number of mails are stored
      8000 by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pipe</b></dt>
  <dd class="It-tag">write a mail to stdout. this options is invalid when
      &quot;--imap&quot; or &quot;--pop&quot; is specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--insert-revision</b></dt>
  <dd class="It-tag">insert &quot;X-Spam-Revision: bsfilter release...&quot;
      into a mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--insert-flag</b></dt>
  <dd class="It-tag">insert &quot;X-Spam-Flag: Yes&quot; or &quot;X-Spam-Flag:
      No&quot; into a mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--insert-probability</b></dt>
  <dd class="It-tag">insert &quot;X-Spam-Probability: number&quot; into a
    mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--header-prefix </b><i>string</i><i></i></dt>
  <dd class="It-tag">insert &quot;X-specified_string-...&quot; headers, instead
      of &quot;Spam&quot;. (it is valid with --insert-flag and/or
      --insert-probability option.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-spam-subject</b></dt>
  <dd class="It-tag">insert &quot;[SPAM] &quot; at the beginning of Subject
      header.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-subject-prefix </b><i>string</i><i></i></dt>
  <dd class="It-tag">insert specified string, instead of &quot;[SPAM] &quot;.
      (it is valid with --mark-spam-subject option.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-db-status</b></dt>
  <dd class="It-tag">show numbers of tokens and mails in databases and
    quit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">show help message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">quiet mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">verbose mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">debug mode.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
% bsfilter -s ~/Mail/spam/*			## add spam 
% bsfilter -u -c ~/Mail/job/* ~/Mail/private/*	## add clean mails and update probability table 
% bsfilter ~/Mail/inbox/1			## show spam probability 
</pre>
<div class="Pp"></div>
<pre>
## recipe of procmail 
:0 HB 
* ? bsfilter -a 
spam/. 
</pre>
<div class="Pp"></div>
<pre>
## recipe of procmail 
:0 fw 
| bsfilter -a --pipe --insert-flag --insert-probability 
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
http://sourceforge.jp/projects/bsfilter/
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original manual is in the bsfilter command it self which is written by
  NABEYA Kenichi (upstream author). This manual page was transrated from the
  manual by akira yamada &lt;akira@debian.org&gt; for the <b>Debian</b> system
  (but may be used by others). Permission is granted to copy, distribute and/or
  modify this document under the terms of the GNU General Public License,
  Version 2 any later version published by the Free Software Foundation.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
On Debian systems, the complete text of the GNU General Public License can be
  found in /usr/share/common-licenses/GPL.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
