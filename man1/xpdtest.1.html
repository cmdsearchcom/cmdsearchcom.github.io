<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:44:22 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>XPDTEST(1) General Commands Manual XPDTEST(1)</p>

<p style="margin-top: 1em">NAME <br>
xpdtest - xproofd test utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
xpdtest [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This manual page documents the xpdtest program, an utility
whose purpose is to test the status of an xproofd daemon
running on the local machine. The target is to run xpdtest
<br>
inside a monitor infrastructure, for example monit (see
http://mmonit.com/monit/ ), capable to take some decisions
and to do some actions following the result of xpdtest.</p>

<p style="margin-top: 1em">OPTIONS <br>
--help, -h <br>
Gives a short list of options avaliable, and exit</p>

<p style="margin-top: 1em">-t &lt;test&gt; <br>
type of test to be run: <br>
0 ping the daemon (includes process existence check if pid
specified; see below) <br>
1 ping the daemon and check connection for default user <br>
2 ping the daemon and check connection for the default user
and all recent users</p>

<p style="margin-top: 1em">The default user is the one
specified in the URL (e.g. &rsquo;user&rsquo; for
user@localhost); if no explicit specification is found in
the URL, the user under which xpdtest is run is <br>
used; it can be also passed via the environment variable
XPDTEST_TEST.</p>

<p style="margin-top: 1em">-u &lt;url&gt; <br>
URL where the xproofd under test responds; it can be also
passed via the environment variable XPDTEST_URL (default is
&rsquo;localhost:1093&rsquo;).</p>

<p style="margin-top: 1em">-d &lt;sbdir&gt; <br>
sandbox directory used to find out the users of the facility
when test is 2; it can be also passed via the environment
variable XPDTEST_SBOXDIR (default is
&rsquo;/tmp/proof&acirc; <br>
box&rsquo;).</p>

<p style="margin-top: 1em">-s &lt;span&gt; <br>
define the time interval, in minutes, to define
&rsquo;recent&rsquo; users when test is 2: only users who
connected within this interval are checked; use -1 for
infinite; it can be <br>
also passed via the environment variable XPDTEST_TIMESPAN
(default is -1).</p>

<p style="margin-top: 1em">-T &lt;timeout&gt; <br>
define the time, in seconds, waited for the session to start
successfully; it can be also passed via the environment
variable XPDTEST_TIMESOUT (default is 10 seconds).</p>

<p style="margin-top: 1em">-l &lt;logfile&gt; <br>
log file if not screen; deleted if the required test fails
unless &rsquo;-k&rsquo; is specified (see below);it can be
also passed via the environment variable
XPDTEST_LOGFILE.</p>

<p style="margin-top: 1em">-p &lt;pidfile&gt; <br>
file with the process ID as a integer number in the first
line; if this file is given a quick test on the process
existence is done using kill(pid,0); it can be also <br>
passed via the environment variable XPDTEST_PIDFILE.</p>

<p style="margin-top: 1em">-k keep log file at path given
via &rsquo;-l&rsquo; in all cases; it can be also passed via
the environment variable XPDTEST_KEEP (default is &rsquo;no
keep&rsquo;).</p>

<p style="margin-top: 1em">-v set gDebug=1 for the
underline ROOT calls; it can be also passed via the
environment variable XPDTEST_VERBOSE (default is &rsquo;no
verbose&rsquo;).</p>

<p style="margin-top: 1em">RETURN <br>
xpdtest returns 0 on success and 1 in case of test failure.
Errors are printed on the screen or saved into the specified
log file.</p>

<p style="margin-top: 1em">FILES <br>
The file xpdtest_popen_file in the temporary directory
(typically /tmp) is used to parse the output of
TProof::Open(). The file is overwritten by each new attempt;
after a run <br>
of xpdtest it contains the result of the last session open
attempt.</p>

<p style="margin-top: 1em">NOTES <br>
The connection attempt is done in &rsquo;masteronly&rsquo;
mode. For daemons running in &rsquo;worker&rsquo; mode the
attempt will fail with a well defined error message
(&rsquo;Server not allowed to be top <br>
master&rsquo;); since this indicates that the daemon is
anyhow responsive, a positive detection of such a pattern in
the error message is interpreted as the attempt having being
suc&acirc; <br>
cessful.</p>

<p style="margin-top: 1em">ORIGINAL AUTHORS <br>
The ROOT team: <br>
Rene Brun and Fons Rademakers <br>
More information can be found at the ROOT website:
http://root.cern.ch</p>

<p style="margin-top: 1em">COPYRIGHT <br>
This library is free software; you can redistribute it
and/or modify it under the terms of the GNU Lesser General
Public License as published by the Free Software Foundation;
<br>
either version 2.1 of the License, or (at your option) any
later version.</p>

<p style="margin-top: 1em">This library is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PUR&acirc; <br>
POSE. See the GNU Lesser General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU Lesser General Public License along with this
library; if not, write to the Free Software Foundation,
Inc., 51 Franklin St, Fifth <br>
Floor, Boston, MA 02110-1301 USA</p>

<p style="margin-top: 1em">AUTHOR <br>
This manual page was written by Gerardo Ganis
&lt;gerardo.ganis@cern.ch&gt;, for the GNU/Linux system (but
may be used by others).</p>

<p style="margin-top: 1em">ROOT Version 5 XPDTEST(1)</p>
<hr>
</body>
</html>
