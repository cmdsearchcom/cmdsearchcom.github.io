<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>LCKDO(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LCKDO(1)</td>
    <td class="head-vol">moreutils</td>
    <td class="head-rtitle">LCKDO(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
lckdo - run a program with a lock held
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 6.00ex; text-indent: -6.00ex;"><b>lckdo</b>
  [options] {lockfile} {program} [arguments]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>lckdo</b> runs a program with a lock held, in order to prevent multiple
  processes from running in parallel. Use just like <b>nice</b> or <b>nohup</b>.
<div class="Pp"></div>
Now that util-linux contains a similar command named <b>flock</b>, lckdo is
  deprecated, and will be removed from some future version of moreutils.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-w</b>
<div style="margin-left: 4.00ex;">If the lock is already held by another
  process, wait for it to complete instead of failing immediately.</div>
<div class="Pp"></div>
<b>-W {sec}</b>
<div style="margin-left: 4.00ex;">The same as -w but wait not more than sec
  seconds.</div>
<div class="Pp"></div>
<b>-e</b>
<div style="margin-left: 4.00ex;">Execute the program directly without forking
  and waiting (keeps an extra file descriptor open).</div>
<div class="Pp"></div>
<b>-E {nnn}</b>
<div style="margin-left: 4.00ex;">Set the file descriptor number to keep open
  when exec()ing (implies -e).</div>
<div class="Pp"></div>
<b>-n</b>
<div style="margin-left: 4.00ex;">Do not create the lock file if it does not
  exist.</div>
<div class="Pp"></div>
<b>-q</b>
<div style="margin-left: 4.00ex;">Produce no output if lock is already
  held.</div>
<div class="Pp"></div>
<b>-s</b>
<div style="margin-left: 4.00ex;">Lock in shared (read) mode.</div>
<div class="Pp"></div>
<b>-x</b>
<div style="margin-left: 4.00ex;">Lock in exclusive (write) mode
  (default).</div>
<div class="Pp"></div>
<b>-t</b>
<div style="margin-left: 4.00ex;">Test for lock existence.</div>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
If the lock was successfully acquired, the return value is that of the program
  invoked by <b>lckdo</b>. If the lock couldn't be acquired, EX_TEMPFAIL is
  returned. If there was a problem opening/creating or locking the lock file,
  EX_CANTCREAT or EX_OSERR will be returned.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Michael Tokarev</div>
<table class="foot">
  <tr>
    <td class="foot-date">2007-08-15</td>
    <td class="foot-os">moreutils</td>
  </tr>
</table>
</body>
</html>
