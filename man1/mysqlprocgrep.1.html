<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:41 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MYSQLPROCGREP(1) MySQL Utilities MYSQLPROCGREP(1)</p>

<p style="margin-top: 1em">NAME <br>
mysqlprocgrep - Search Server Process Lists</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mysqlprocgrep [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility scans the process lists for the servers
specified using instances of the --server option and selects
those that match the conditions specified using the --age
and <br>
--match-xxx options. For a process to match, all conditions
given must match. The utility then either prints the
selected processes (the default) or executes certain actions
on <br>
them.</p>

<p style="margin-top: 1em">If no --age or --match-xxx
options are given, the utility selects all processes.</p>

<p style="margin-top: 1em">The --match-xxx options
correspond to the columns in the
INFORMATION_SCHEMA.PROCESSLIST table. For example,
--match-command specifies a matching condition for
PROCESSLIST.COMMAND <br>
column values. There is no --match-time option. To specify a
condition based on process time, use --age.</p>

<p style="margin-top: 1em">Processes that can be seen and
killed are subject to whether the account used to connect to
the server has the PROCESS and SUPER privileges. Without
PROCESS, the account cannot <br>
see processes belonging to other accounts Without SUPER, the
account cannot kill processes belonging to other
accounts</p>

<p style="margin-top: 1em">To specify how to display
output, use one of the following values with the --format
option:</p>

<p style="margin-top: 1em">&Acirc;&middot; grid
(default)</p>

<p style="margin-top: 1em">Display output in grid or table
format like that of the mysql client command-line tool.</p>

<p style="margin-top: 1em">&Acirc;&middot; csv</p>

<p style="margin-top: 1em">Display output in
comma-separated values format.</p>

<p style="margin-top: 1em">&Acirc;&middot; tab</p>

<p style="margin-top: 1em">Display output in tab-separated
format.</p>

<p style="margin-top: 1em">&Acirc;&middot; vertical</p>

<p style="margin-top: 1em">Display output in single-column
format like that of the G command for the mysql client
command-line tool. <br>
Options.PP mysqlprocgrep accepts the following command-line
options:</p>

<p style="margin-top: 1em">&Acirc;&middot; --help</p>

<p style="margin-top: 1em">Display a help message and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot; --license</p>

<p style="margin-top: 1em">Display license information and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--age=&lt;time&gt;</p>

<p style="margin-top: 1em">Select only processes that have
been in the current state more than a given time. The time
value can be specified in two formats: either using the
hh:mm:ss format, with hours <br>
and minutes optional, or as a sequence of numbers with a
suffix giving the period size.</p>

<p style="margin-top: 1em">The permitted suffixes are s
(second), m (minute), h (hour), d (day), and w (week). For
example, 4h15m represents 4 hours and 15 minutes.</p>

<p style="margin-top: 1em">For both formats, the
specification can optionally be preceded by + or -, where +
means older than the given time, and - means younger than
the given time.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--character-set=&lt;charset&gt;</p>

<p style="margin-top: 1em">Sets the client character set.
The default is retrieved from the server variable
character_set_client.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--format=&lt;format&gt;, -f&lt;format&gt;</p>

<p style="margin-top: 1em">Specify the output display
format. Permitted format values are grid (default), csv,
tab, and vertical.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--kill-connection</p>

<p style="margin-top: 1em">Kill the connection for all
matching processes (like the KILL CONNECTION statement).</p>

<p style="margin-top: 1em">&Acirc;&middot; --kill-query</p>

<p style="margin-top: 1em">Kill the query for all matching
processes (like the KILL QUERY statement).</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-command=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the
Command field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-db=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the Db
field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-host=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the
Host field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-id=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the ID
field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-info=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the
Info field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-state=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the
State field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--match-user=&lt;pattern&gt;</p>

<p style="margin-top: 1em">Match all processes where the
User field matches the pattern.</p>

<p style="margin-top: 1em">&Acirc;&middot; --print</p>

<p style="margin-top: 1em">Print information about the
matching processes. This is the default if no
--kill-connection or --kill-query option is given. If a kill
option is given, --print prints <br>
information about the processes before killing them.</p>

<p style="margin-top: 1em">&Acirc;&middot; --regexp,
--basic-regexp, -G</p>

<p style="margin-top: 1em">Perform pattern matches using
the REGEXP operator. The default is to use LIKE for
matching. This affects the --match-xxx options.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--server=&lt;source&gt;</p>

<p style="margin-top: 1em">Connection information for a
server. Use this option multiple times to search multiple
servers.</p>

<p style="margin-top: 1em">To connect to a server, it is
necessary to specify connection parameters such as user
name, host name, password, and either a port or socket.
MySQL Utilities provides a <br>
number of ways to provide this information. All of the
methods require specifying your choice via a command-line
option such as --server, --master, --slave, etc. The methods
<br>
include the following in order of most secure to least
secure.</p>

<p style="margin-top: 1em">&Acirc;&middot; Use login-paths
from your .mylogin.cnf file (encrypted, not visible).
Example :
&lt;login-path&gt;[:&lt;port&gt;][:&lt;socket&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot; Use a
configuration file (unencrypted, not visible) Note:
available in release-1.5.0. Example :
&lt;configuration-file-path&gt;[:&lt;section&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot; Specify the data
on the command-line (unencrypted, visible). Example :
&lt;user&gt;[:&lt;passwd&gt;]@&lt;host&gt;[:&lt;port&gt;][:&lt;socket&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot; --sql,
--print-sql, -Q</p>

<p style="margin-top: 1em">Instead of displaying the
selected processes, emit the SELECT statement that retrieves
information about them. If the --kill-connection or
--kill-query option is given, the <br>
utility generates a stored procedure named kill_processes()
for killing the queries rather than a SELECT statement.</p>

<p style="margin-top: 1em">&Acirc;&middot; --sql-body</p>

<p style="margin-top: 1em">Like --sql, but produces the
output as the body of a stored procedure without the CREATE
PROCEDURE part of the definition. This could be used, for
example, to generate an <br>
event for the server Event Manager.</p>

<p style="margin-top: 1em">When used with a kill option,
code for killing the matching queries is generated. Note
that it is not possible to execute the emitted code unless
it is put in a stored <br>
routine, event, or trigger. For example, the following code
could be generated to kill all idle connections for user
www-data:</p>

<p style="margin-top: 1em">shell&gt; mysqlprocgrep
--kill-connection --sql-body --match-user=www-data
--match-state=sleep <br>
DECLARE kill_done INT; <br>
DECLARE kill_cursor CURSOR FOR <br>
SELECT <br>
Id, User, Host, Db, Command, Time, State, Info <br>
FROM <br>
INFORMATION_SCHEMA.PROCESSLIST <br>
WHERE <br>
user LIKE &rsquo;www-data&rsquo; <br>
AND <br>
State LIKE &rsquo;sleep&rsquo; <br>
OPEN kill_cursor; <br>
BEGIN <br>
DECLARE id BIGINT; <br>
DECLARE EXIT HANDLER FOR NOT FOUND SET kill_done = 1; <br>
kill_loop: LOOP <br>
FETCH kill_cursor INTO id; <br>
KILL CONNECTION id; <br>
END LOOP kill_loop; <br>
END; <br>
CLOSE kill_cursor;</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-ca</p>

<p style="margin-top: 1em">The path to a file that contains
a list of trusted SSL CAs.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-cert</p>

<p style="margin-top: 1em">The name of the SSL certificate
file to use for establishing a secure connection.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-cert</p>

<p style="margin-top: 1em">The name of the SSL key file to
use for establishing a secure connection.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl</p>

<p style="margin-top: 1em">Specifies if the server
connection requires use of SSL. If an encrypted connection
cannot be established, the connection attempt fails. Default
setting is 0 (SSL not <br>
required).</p>

<p style="margin-top: 1em">&Acirc;&middot; --verbose,
-v</p>

<p style="margin-top: 1em">Specify how much information to
display. Use this option multiple times to increase the
amount of information. For example, -v = verbose, -vv = more
verbose, -vvv = debug.</p>

<p style="margin-top: 1em">&Acirc;&middot; --version</p>

<p style="margin-top: 1em">Display version information and
exit. <br>
NOTES.PP For the --format option, the permitted values are
not case sensitive. In addition, values may be specified as
any unambiguous prefix of a valid value. For example, <br>
--format=g specifies the grid format. An error occurs if a
prefix matches more than one valid value.</p>

<p style="margin-top: 1em">The path to the MySQL client
tools should be included in the PATH environment variable in
order to use the authentication mechanism with login-paths.
This will allow the utility <br>
to use the my_print_defaults tools which is required to read
the login-path values from the login configuration file
(.mylogin.cnf). EXAMPLES.PP For each example, assume that
<br>
the root user on localhost has sufficient privileges to kill
queries and connections.</p>

<p style="margin-top: 1em">Kill all queries created by user
john that are less than 1 minute:</p>

<p style="margin-top: 1em">shell&gt; mysqlprocgrep
--server=root@localhost --match-user=john --age=-1m
--kill-query</p>

<p style="margin-top: 1em">Kill all connections that have
been idle for more than 1 hour:</p>

<p style="margin-top: 1em">shell&gt; mysqlprocgrep
--server=root@localhost --match-command=sleep --age=1h
--kill-connection</p>

<p style="margin-top: 1em">PERMISSIONS REQUIRED.PP The user
must have the SELECT privilege on the mysql database.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2006, 2015, Oracle and/or its
affiliates. All rights reserved.</p>

<p style="margin-top: 1em">This documentation is free
software; you can redistribute it and/or modify it only
under the terms of the GNU General Public License as
published by the Free Software Foundation; <br>
version 2 of the License.</p>

<p style="margin-top: 1em">This documentation is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with the program; if
not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, <br>
Boston, MA 02110-1301 USA or see
http://www.gnu.org/licenses/.</p>

<p style="margin-top: 1em">SEE ALSO <br>
For more information, please refer to the MySQL Utilities
and Fabric documentation, which is available online at
http://dev.mysql.com/doc/index-utils-fabric.html</p>

<p style="margin-top: 1em">AUTHOR <br>
Oracle Corporation (http://dev.mysql.com/).</p>

<p style="margin-top: 1em">MySQL 1.5.6 09/15/2015
MYSQLPROCGREP(1)</p>
<hr>
</body>
</html>
