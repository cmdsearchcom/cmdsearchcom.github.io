<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:49:21 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ANTSREGISTRATION(1) User Commands
ANTSREGISTRATION(1)</p>

<p style="margin-top: 1em">NAME <br>
antsRegistration - part of ANTS registration suite</p>

<p style="margin-top: 1em">DESCRIPTION <br>
All_Command_lines_OK</p>

<p style="margin-top: 1em">COMMAND: <br>
antsRegistration</p>

<p style="margin-top: 1em">This program is a user-level
registration application meant to utilize ITKv4-only
classes. The user can specify any number of
&quot;stages&quot; where a stage consists of a trans&acirc;
<br>
form; an image metric; and iterations, shrink factors, and
smoothing sigmas for each level.Note that dimensionality,
metric, transform, output, convergence, shrink-factors <br>
and smoothing-sigmas parameters are mandatory.</p>

<p style="margin-top: 1em">OPTIONS: <br>
-v, --version</p>

<p style="margin-top: 1em">Get Version Information.</p>

<p style="margin-top: 1em">-d, --dimensionality 2/3</p>

<p style="margin-top: 1em">This option forces the image to
be treated as a specified-dimensional image. If not
specified, we try to infer the dimensionality from the input
image.</p>

<p style="margin-top: 1em">-o, --output
outputTransformPrefix</p>


<p style="margin-top: 1em">[outputTransformPrefix,&lt;outputWarpedImage&gt;,&lt;outputInverseWarpedImage&gt;]</p>

<p style="margin-top: 1em">Specify the output transform
prefix (output format is .nii.gz ). Optionally, one can
choose to warp the moving image to the fixed space and, if
the inverse transform <br>
exists, one can also output the warped fixed image. Note
that only the images specified in the first metric call are
warped. Use antsApplyTransforms to warp other images <br>
using the resultant transform(s).</p>

<p style="margin-top: 1em">-j, --save-state
saveSateAsTransform</p>

<p style="margin-top: 1em">A boolean specifying whether or
not the composite transform resulted from the current state
of the registration should be written to an hdf5 composite
file. It is spe&acirc; <br>
cially usefull if we want to save the current state of a SyN
registration to the disk, so we can load and restore that
later to continue the next registration directly <br>
started from the same state that it was stored. The output
of this flag will be the same as the
write-composite-transform, unless the last transform is a
SyN transform. In <br>
that case, the inverse displacement field of the SyN
transform is also added to the output composite transform.
To load the written file this flag, we must use <br>
restore-state.</p>

<p style="margin-top: 1em">-k, --restore-state
restoreStateAsATransform</p>

<p style="margin-top: 1em">Specify the initial state of the
registration which get immediately used to directly
initialize the registration process. The flag is mutually
exclusive with other intial&acirc; <br>
ization flags.If this flag is used, none of the
initial-moving-transform and initial-fixed-transform cannot
be used.</p>

<p style="margin-top: 1em">-a, --write-composite-transform
1/(0)</p>

<p style="margin-top: 1em">Boolean specifying whether or
not the composite transform (and its inverse, if it exists)
should be written to an hdf5 composite file. This is false
by default so that <br>
only the transform for each stage is written to file.
&lt;VALUES&gt;: 0</p>

<p style="margin-top: 1em">-p,
--print-similarity-measure-interval
&lt;unsignedIntegerValue&gt;</p>

<p style="margin-top: 1em">Prints out the CC similarity
metric measure between the full-size input fixed and the
transformed moving images at each iteration a value of 0
(the default) indicates that <br>
the full scale computation should not take placeany value
greater than 0 represents the interval of full scale metric
computation. &lt;VALUES&gt;: 0</p>

<p style="margin-top: 1em">-v, --write-interval-volumes
&lt;unsignedIntegerValue&gt;</p>

<p style="margin-top: 1em">Writes out the output volume at
each iteration. It helps to present the registration process
as a short movie a value of 0 (the default) indicates that
this option should <br>
not take placeany value greater than 0 represents the
interval between the iterations which outputs are written to
the disk. &lt;VALUES&gt;: 0</p>

<p style="margin-top: 1em">-z, --collapse-output-transforms
(1)/0</p>

<p style="margin-top: 1em">Collapse output transforms.
Specifically, enabling this option combines all adjacent
transforms wherepossible. All adjacent linear transforms are
written to disk in the <br>
forman itk affine transform (called xxxGenericAffine.mat).
Similarly, all adjacent displacement field transforms are
combined when written to disk (e.g. xxxWarp.nii.gz <br>
and xxxInverseWarp.nii.gz (if available)).Also, an output
composite transform including the collapsed transforms is
written to the disk (called outputCol&acirc; <br>
lapsed(Inverse)Composite). &lt;VALUES&gt;: 1</p>

<p style="margin-top: 1em">-i,
--initialize-transforms-per-stage (1)/0</p>

<p style="margin-top: 1em">Initialize linear transforms
from the previous stage. By enabling this option, the
current linear stage transform is directly intialized from
the previous stage&rsquo;s linear <br>
transform; this allows multiple linear stages to be run
where each stage directly updates the estimated linear
transform from the previous stage. (e.g. Translation -&gt;
<br>
Rigid -&gt; Affine). &lt;VALUES&gt;: 0</p>

<p style="margin-top: 1em">-n, --interpolation Linear <br>
NearestNeighbor
MultiLabel[&lt;sigma=imageSpacing&gt;,&lt;alpha=4.0&gt;]
Gaussian[&lt;sigma=imageSpacing&gt;,&lt;alpha=1.0&gt;]
BSpline[&lt;order=3&gt;] CosineWindowedSinc
WelchWindowedSinc HammingWin&acirc; <br>
dowedSinc LanczosWindowedSinc</p>

<p style="margin-top: 1em">Several interpolation options
are available in ITK. These have all been made available.
Currently the interpolator choice is only used to warp (and
possibly inverse warp) <br>
the final output image(s).</p>

<p style="margin-top: 1em">-g, --restrict-deformation
PxQxR</p>

<p style="margin-top: 1em">This option allows the user to
restrict the optimization of the displacement field,
translation, rigid or affine transform on a per-component
basis. For example, if one <br>
wants to limit the deformation or rotation of 3-D volume to
the first two dimensions, this is possible by specifying a
weight vector of &rsquo;1x1x0&rsquo; for a deformation field
or <br>
&rsquo;1x1x0x1x1x0&rsquo; for a rigid
transformation.Low-dimensional restriction only works if
there are no preceding transformations.</p>

<p style="margin-top: 1em">-q, --initial-fixed-transform
initialTransform <br>
[initialTransform,&lt;useInverse&gt;]
[fixedImage,movingImage,initializationFeature]</p>

<p style="margin-top: 1em">Specify the initial fixed
transform(s) which get immediately incorporated into the
composite transform. The order of the transforms is
stack-esque in that the last trans&acirc; <br>
form specified on the command line is the first to be
applied. In addition to initialization with ITK transforms,
the user can perform an initial translation alignment by
<br>
specifying the fixed and moving images and selecting an
initialization feature. These features include using the
geometric center of the images (=0), the image intensities
<br>
(=1), or the origin of the images (=2).</p>

<p style="margin-top: 1em">-r, --initial-moving-transform
initialTransform <br>
[initialTransform,&lt;useInverse&gt;]
[fixedImage,movingImage,initializationFeature]</p>

<p style="margin-top: 1em">Specify the initial moving
transform(s) which get immediately incorporated into the
composite transform. The order of the transforms is
stack-esque in that the last trans&acirc; <br>
form specified on the command line is the first to be
applied. In addition to initialization with ITK transforms,
the user can perform an initial translation alignment by
<br>
specifying the fixed and moving images and selecting an
initialization feature. These features include using the
geometric center of the images (=0), the image intensities
<br>
(=1), or the origin of the images (=2).</p>

<p style="margin-top: 1em">-m, --metric
CC[fixedImage,movingImage,metricWeight,radius,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]</p>


<p style="margin-top: 1em">MI[fixedImage,movingImage,metricWeight,numberOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
Mattes[fixedImage,movingImage,metricWeight,num&acirc; <br>

berOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
MeanSquares[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regu&acirc;
<br>
lar,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
Demons[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
<br>

GC[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
ICP[fixedPointSet,movingPointSet,metricWeight,&lt;sam&acirc;
<br>
plingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;]
PSE[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=1&gt;,&lt;kNeigh&acirc;
<br>
borhood=50&gt;]
JHCT[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=1&gt;,&lt;kNeighborhood=50&gt;,&lt;alpha=1.1&gt;,&lt;use&acirc;
<br>
AnisotropicCovariances=1&gt;]</p>

<p style="margin-top: 1em">These image metrics are
available--- CC: ANTS neighborhood cross correlation, MI:
Mutual information, Demons: (Thirion), MeanSquares, and GC:
Global Correlation. The &quot;met&acirc; <br>
ricWeight&quot; variable is used to modulate the per stage
weighting of the metrics. The metrics can also employ a
sampling strategy defined by a sampling percentage. The
sam&acirc; <br>
pling strategy defaults to &rsquo;None&rsquo; (aka a dense
sampling of one sample per voxel), otherwise it defines a
point set over which to optimize the metric. The point set
can be <br>
on a regular lattice or a random lattice of points slightly
perturbed to minimize aliasing artifacts. samplingPercentage
defines the fraction of points to select from the <br>
domain. In addition, three point set metrics are available:
Euclidean (ICP), Point-set expectation (PSE), and
Jensen-Havrda-Charvet-Tsallis (JHCT).</p>

<p style="margin-top: 1em">-t, --transform
Rigid[gradientStep] <br>
Affine[gradientStep] CompositeAffine[gradientStep]
Similarity[gradientStep] Translation[gradientStep]
BSpline[gradientStep,meshSizeAtBaseLevel]
GaussianDisplacement&acirc; <br>

Field[gradientStep,updateFieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace]
BSplineDisplacementField[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMesh&acirc;
<br>
SizeAtBaseLevel,&lt;splineOrder=3&gt;]
TimeVaryingVelocityField[gradientStep,numberOfTimeIndices,updateFieldVarianceInVoxelSpace,updateFieldTimeVariance,totalFieldVarianceInVox&acirc;
<br>
elSpace,totalFieldTimeVariance]
TimeVaryingBSplineVelocityField[gradientStep,velocityFieldMeshSize,&lt;numberOfTimePointSamples=4&gt;,&lt;splineOrder=3&gt;]
SyN[gradientStep,update&acirc; <br>
FieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace]
BSplineSyN[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMeshSizeAtBaseLevel,&lt;splineOrder=3&gt;]
Exponen&acirc; <br>

tial[gradientStep,updateFieldVarianceInVoxelSpace,velocityFieldVarianceInVoxelSpace,&lt;numberOfIntegrationSteps&gt;]
BSplineExponential[gradientStep,updateFieldMeshSizeAtBase&acirc;
<br>

Level,velocityFieldMeshSizeAtBaseLevel,&lt;numberOfIntegrationSteps&gt;,&lt;splineOrder=3&gt;]</p>

<p style="margin-top: 1em">Several transform options are
available. The gradientStep or learningRate characterizes
the gradient descent optimization and is scaled
appropriately for each transform <br>
using the shift scales estimator. Subsequent parameters are
transform-specific and can be determined from the usage. For
the B-spline transforms one can also specify the <br>
smoothing in terms of spline distance (i.e. knot
spacing).</p>

<p style="margin-top: 1em">-c, --convergence MxNxO <br>

[MxNxO,&lt;convergenceThreshold=1e-6&gt;,&lt;convergenceWindowSize=10&gt;]</p>

<p style="margin-top: 1em">Convergence is determined from
the number of iterations per level and is determined by
fitting a line to the normalized energy profile of the last
N iterations (where N is <br>
specified by the window size) and determining the slope
which is then compared with the convergence threshold.</p>

<p style="margin-top: 1em">-s, --smoothing-sigmas
MxNxO...</p>

<p style="margin-top: 1em">Specify the sigma of gaussian
smoothing at each level. Units are given in terms of voxels
(&rsquo;vox&rsquo;) or physical spacing (&rsquo;mm&rsquo;).
Example usage is &rsquo;4x2x1mm&rsquo; and
&rsquo;4x2x1vox&rsquo; <br>
where no units implies voxel spacing.</p>

<p style="margin-top: 1em">-f, --shrink-factors
MxNxO...</p>

<p style="margin-top: 1em">Specify the shrink factor for
the virtual domain (typically the fixed image) at each
level.</p>

<p style="margin-top: 1em">-u, --use-histogram-matching</p>

<p style="margin-top: 1em">Histogram match the images
before registration.</p>

<p style="margin-top: 1em">-l,
--use-estimate-learning-rate-once</p>

<p style="margin-top: 1em">turn on the option that lets you
estimate the learning rate step size only at the beginning
of each level. * useful as a second stage of fine-scale
registration.</p>

<p style="margin-top: 1em">-w,
--winsorize-image-intensities
[lowerQuantile,upperQuantile]</p>

<p style="margin-top: 1em">Winsorize data based on
specified quantiles.</p>

<p style="margin-top: 1em">-x, --masks
[fixedImageMask,movingImageMask]</p>

<p style="margin-top: 1em">Image masks to limit voxels
considered by the metric.</p>

<p style="margin-top: 1em">--float</p>

<p style="margin-top: 1em">Use &rsquo;float&rsquo; instead
of &rsquo;double&rsquo; for computations. &lt;VALUES&gt;:
0</p>

<p style="margin-top: 1em">-h</p>

<p style="margin-top: 1em">Print the help menu (short
version).</p>

<p style="margin-top: 1em">--help</p>

<p style="margin-top: 1em">Print the help menu. Will also
print values used on the current command line call.
&lt;VALUES&gt;: 1</p>

<p style="margin-top: 1em">antsRegistration 2.1.0 March
2017 ANTSREGISTRATION(1)</p>
<hr>
</body>
</html>
