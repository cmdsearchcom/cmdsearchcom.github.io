<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ANTSREGISTRATION(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ANTSREGISTRATION(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">ANTSREGISTRATION(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
antsRegistration - part of ANTS registration suite
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
All_Command_lines_OK
<h2 class="Ss" title="Ss" id="COMMAND:"><a class="selflink" href="#COMMAND:">COMMAND:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">antsRegistration</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This program is a user-level registration application meant
      to utilize ITKv4-only classes. The user can specify any number of
      &quot;stages&quot; where a stage consists of a transform; an image metric;
      and iterations, shrink factors, and smoothing sigmas for each level.Note
      that dimensionality, metric, transform, output, convergence,
      shrink-factors and smoothing-sigmas parameters are mandatory.</dd>
</dl>
<h2 class="Ss" title="Ss" id="OPTIONS:"><a class="selflink" href="#OPTIONS:">OPTIONS:</a></h2>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-v</b>,
  <b>--version</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Get Version Information.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-d</b>,
  <b>--dimensionality</b> 2/3</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option forces the image to be treated as a
      specified-dimensional image. If not specified, we try to infer the
      dimensionality from the input image.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-o</b>,
  <b>--output</b> outputTransformPrefix</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[outputTransformPrefix,&lt;outputWarpedImage&gt;,&lt;outputInverseWarpedImage&gt;]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the output transform prefix (output format is
      .nii.gz ). Optionally, one can choose to warp the moving image to the
      fixed space and, if the inverse transform exists, one can also output the
      warped fixed image. Note that only the images specified in the first
      metric call are warped. Use antsApplyTransforms to warp other images using
      the resultant transform(s).</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-j</b>,
  <b>--save-state</b> saveSateAsTransform</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">A boolean specifying whether or not the composite transform
      resulted from the current state of the registration should be written to
      an hdf5 composite file. It is specially usefull if we want to save the
      current state of a SyN registration to the disk, so we can load and
      restore that later to continue the next registration directly started from
      the same state that it was stored. The output of this flag will be the
      same as the write-composite-transform, unless the last transform is a SyN
      transform. In that case, the inverse displacement field of the SyN
      transform is also added to the output composite transform. To load the
      written file this flag, we must use restore-state.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-k</b>,
  <b>--restore-state</b> restoreStateAsATransform</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the initial state of the registration which get
      immediately used to directly initialize the registration process. The flag
      is mutually exclusive with other intialization flags.If this flag is used,
      none of the initial-moving-transform and initial-fixed-transform cannot be
      used.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-a</b>,
  <b>--write-composite-transform</b> 1/(0)</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Boolean specifying whether or not the composite transform
      (and its inverse, if it exists) should be written to an hdf5 composite
      file. This is false by default so that only the transform for each stage
      is written to file. &lt;VALUES&gt;: 0</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-p</b>,
  <b>--print-similarity-measure-interval</b> &lt;unsignedIntegerValue&gt;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Prints out the CC similarity metric measure between the
      full-size input fixed and the transformed moving images at each iteration
      a value of 0 (the default) indicates that the full scale computation
      should not take placeany value greater than 0 represents the interval of
      full scale metric computation. &lt;VALUES&gt;: 0</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-v</b>,
  <b>--write-interval-volumes</b> &lt;unsignedIntegerValue&gt;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Writes out the output volume at each iteration. It helps to
      present the registration process as a short movie a value of 0 (the
      default) indicates that this option should not take placeany value greater
      than 0 represents the interval between the iterations which outputs are
      written to the disk. &lt;VALUES&gt;: 0</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-z</b>,
  <b>--collapse-output-transforms</b> (1)/0</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Collapse output transforms. Specifically, enabling this
      option combines all adjacent transforms wherepossible. All adjacent linear
      transforms are written to disk in the forman itk affine transform (called
      xxxGenericAffine.mat). Similarly, all adjacent displacement field
      transforms are combined when written to disk (e.g. xxxWarp.nii.gz and
      xxxInverseWarp.nii.gz (if available)).Also, an output composite transform
      including the collapsed transforms is written to the disk (called
      outputCollapsed(Inverse)Composite). &lt;VALUES&gt;: 1</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-i</b>,
  <b>--initialize-transforms-per-stage</b> (1)/0</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Initialize linear transforms from the previous stage. By
      enabling this option, the current linear stage transform is directly
      intialized from the previous stage's linear transform; this allows
      multiple linear stages to be run where each stage directly updates the
      estimated linear transform from the previous stage. (e.g. Translation
      -&gt; Rigid -&gt; Affine). &lt;VALUES&gt;: 0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b>, <b>--interpolation</b> Linear</dt>
  <dd class="It-tag">NearestNeighbor
      MultiLabel[&lt;sigma=imageSpacing&gt;,&lt;alpha=4.0&gt;]
      Gaussian[&lt;sigma=imageSpacing&gt;,&lt;alpha=1.0&gt;]
      BSpline[&lt;order=3&gt;] CosineWindowedSinc WelchWindowedSinc
      HammingWindowedSinc LanczosWindowedSinc</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Several interpolation options are available in ITK. These
      have all been made available. Currently the interpolator choice is only
      used to warp (and possibly inverse warp) the final output image(s).</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-g</b>,
  <b>--restrict-deformation</b> PxQxR</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This option allows the user to restrict the optimization of
      the displacement field, translation, rigid or affine transform on a
      per-component basis. For example, if one wants to limit the deformation or
      rotation of 3-D volume to the first two dimensions, this is possible by
      specifying a weight vector of '1x1x0' for a deformation field or
      '1x1x0x1x1x0' for a rigid transformation.Low-dimensional restriction only
      works if there are no preceding transformations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--initial-fixed-transform</b>
    initialTransform</dt>
  <dd class="It-tag">[initialTransform,&lt;useInverse&gt;]
      [fixedImage,movingImage,initializationFeature]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the initial fixed transform(s) which get
      immediately incorporated into the composite transform. The order of the
      transforms is stack-esque in that the last transform specified on the
      command line is the first to be applied. In addition to initialization
      with ITK transforms, the user can perform an initial translation alignment
      by specifying the fixed and moving images and selecting an initialization
      feature. These features include using the geometric center of the images
      (=0), the image intensities (=1), or the origin of the images (=2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--initial-moving-transform</b>
    initialTransform</dt>
  <dd class="It-tag">[initialTransform,&lt;useInverse&gt;]
      [fixedImage,movingImage,initializationFeature]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the initial moving transform(s) which get
      immediately incorporated into the composite transform. The order of the
      transforms is stack-esque in that the last transform specified on the
      command line is the first to be applied. In addition to initialization
      with ITK transforms, the user can perform an initial translation alignment
      by specifying the fixed and moving images and selecting an initialization
      feature. These features include using the geometric center of the images
      (=0), the image intensities (=1), or the origin of the images (=2).</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-m</b>,
  <b>--metric</b>
  CC[fixedImage,movingImage,metricWeight,radius,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">MI[fixedImage,movingImage,metricWeight,numberOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
      Mattes[fixedImage,movingImage,metricWeight,numberOfBins,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
      MeanSquares[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
      Demons[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
      GC[fixedImage,movingImage,metricWeight,radius=NA,&lt;samplingStrategy={None,Regular,Random}&gt;,&lt;samplingPercentage=[0,1]&gt;]
      ICP[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;]
      PSE[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=1&gt;,&lt;kNeighborhood=50&gt;]
      JHCT[fixedPointSet,movingPointSet,metricWeight,&lt;samplingPercentage=[0,1]&gt;,&lt;boundaryPointsOnly=0&gt;,&lt;pointSetSigma=1&gt;,&lt;kNeighborhood=50&gt;,&lt;alpha=1.1&gt;,&lt;useAnisotropicCovariances=1&gt;]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">These image metrics are available--- CC: ANTS neighborhood
      cross correlation, MI: Mutual information, Demons: (Thirion), MeanSquares,
      and GC: Global Correlation. The &quot;metricWeight&quot; variable is used
      to modulate the per stage weighting of the metrics. The metrics can also
      employ a sampling strategy defined by a sampling percentage. The sampling
      strategy defaults to 'None' (aka a dense sampling of one sample per
      voxel), otherwise it defines a point set over which to optimize the
      metric. The point set can be on a regular lattice or a random lattice of
      points slightly perturbed to minimize aliasing artifacts.
      samplingPercentage defines the fraction of points to select from the
      domain. In addition, three point set metrics are available: Euclidean
      (ICP), Point-set expectation (PSE), and Jensen-Havrda-Charvet-Tsallis
      (JHCT).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--transform</b> Rigid[gradientStep]</dt>
  <dd class="It-tag">Affine[gradientStep] CompositeAffine[gradientStep]
      Similarity[gradientStep] Translation[gradientStep]
      BSpline[gradientStep,meshSizeAtBaseLevel]
      GaussianDisplacementField[gradientStep,updateFieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace]
      BSplineDisplacementField[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMeshSizeAtBaseLevel,&lt;splineOrder=3&gt;]
      TimeVaryingVelocityField[gradientStep,numberOfTimeIndices,updateFieldVarianceInVoxelSpace,updateFieldTimeVariance,totalFieldVarianceInVoxelSpace,totalFieldTimeVariance]
      TimeVaryingBSplineVelocityField[gradientStep,velocityFieldMeshSize,&lt;numberOfTimePointSamples=4&gt;,&lt;splineOrder=3&gt;]
      SyN[gradientStep,updateFieldVarianceInVoxelSpace,totalFieldVarianceInVoxelSpace]
      BSplineSyN[gradientStep,updateFieldMeshSizeAtBaseLevel,totalFieldMeshSizeAtBaseLevel,&lt;splineOrder=3&gt;]
      Exponential[gradientStep,updateFieldVarianceInVoxelSpace,velocityFieldVarianceInVoxelSpace,&lt;numberOfIntegrationSteps&gt;]
      BSplineExponential[gradientStep,updateFieldMeshSizeAtBaseLevel,velocityFieldMeshSizeAtBaseLevel,&lt;numberOfIntegrationSteps&gt;,&lt;splineOrder=3&gt;]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Several transform options are available. The gradientStep
      or learningRate characterizes the gradient descent optimization and is
      scaled appropriately for each transform using the shift scales estimator.
      Subsequent parameters are transform-specific and can be determined from
      the usage. For the B-spline transforms one can also specify the smoothing
      in terms of spline distance (i.e. knot spacing).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--convergence</b> MxNxO</dt>
  <dd class="It-tag">[MxNxO,&lt;convergenceThreshold=1e-6&gt;,&lt;convergenceWindowSize=10&gt;]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Convergence is determined from the number of iterations per
      level and is determined by fitting a line to the normalized energy profile
      of the last N iterations (where N is specified by the window size) and
      determining the slope which is then compared with the convergence
      threshold.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-s</b>,
  <b>--smoothing-sigmas</b> MxNxO...</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the sigma of gaussian smoothing at each level.
      Units are given in terms of voxels ('vox') or physical spacing ('mm').
      Example usage is '4x2x1mm' and '4x2x1vox' where no units implies voxel
      spacing.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-f</b>,
  <b>--shrink-factors</b> MxNxO...</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Specify the shrink factor for the virtual domain (typically
      the fixed image) at each level.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-u</b>,
  <b>--use-histogram-matching</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Histogram match the images before registration.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-l</b>,
  <b>--use-estimate-learning-rate-once</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">turn on the option that lets you estimate the learning rate
      step size only at the beginning of each level. * useful as a second stage
      of fine-scale registration.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-w</b>,
  <b>--winsorize-image-intensities</b> [lowerQuantile,upperQuantile]</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Winsorize data based on specified quantiles.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-x</b>,
  <b>--masks</b> [fixedImageMask,movingImageMask]</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Image masks to limit voxels considered by the metric.</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--float</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Use 'float' instead of 'double' for computations.
      &lt;VALUES&gt;: 0</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>-h</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Print the help menu (short version).</dd>
</dl>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;"><b>--help</b></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Print the help menu. Will also print values used on the
      current command line call. &lt;VALUES&gt;: 1</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 2017</td>
    <td class="foot-os">antsRegistration 2.1.0</td>
  </tr>
</table>
</body>
</html>
