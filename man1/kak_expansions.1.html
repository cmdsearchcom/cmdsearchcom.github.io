<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>KAK_EXPANSIONS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">KAK_EXPANSIONS(1)</td>
    <td class="head-vol">expansions</td>
    <td class="head-rtitle">KAK_EXPANSIONS(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
expansions - a
<h1 class="Sh" title="Sh" id="STRINGS"><a class="selflink" href="#STRINGS">STRINGS</a></h1>
'strings'
<div style="margin-left: 4.00ex;">uninterpreted strings, use a backslash (\') to
  escape the separator</div>
<div class="Pp"></div>
&quot;strings&quot;
<div style="margin-left: 4.00ex;">expanded strings, % strings (c.f. next
  section) contained are expended, use a backslash (\\%) to escape the
  separator</div>
<div class="Pp"></div>
%{strings}
<div style="margin-left: 4.00ex;">these strings are very useful when entering
  commands
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;the <i>{</i> and <i>}</i> delimiters
  are configurable, you can use any non alphanumeric character
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
e.g. %[string], %&lt;string&gt;, %(string), %~string~, %!string!
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;if the character following <i>%</i> is
  one of <i>{[(&lt;</i>, then the closing one is the matching <i>}])&gt;</i> and
  the delimiters are not escapable but are nestable
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
e.g. %{ roger {}; } is a valid string, %{ marcel \} as well
</pre>
</div>
</div>
</div>
<h1 class="Sh" title="Sh" id="TYPED_EXPANSIONS"><a class="selflink" href="#TYPED_EXPANSIONS">TYPED
  EXPANSIONS</a></h1>
<b>sh</b>
<div style="margin-left: 4.00ex;">shell expansion, similar to posix shell
  <i>$(...)</i> construct (c.f. next section)</div>
<div class="Pp"></div>
<b>reg</b>
<div style="margin-left: 4.00ex;">register expansion, will be replaced by the
  content of the given register</div>
<div class="Pp"></div>
<b>opt</b>
<div style="margin-left: 4.00ex;">option expansion, will be replaced with the
  value of the given option</div>
<div class="Pp"></div>
<b>val</b>
<div style="margin-left: 4.00ex;">value expansion, gives access to the
  environment variable available to the Shell expansion. The <i>kak_</i> prefix
  is not used there</div>
<div class="Pp"></div>
<b>arg</b>
<div style="margin-left: 4.00ex;">argument expansion, gives access to the
  arguments of the current command, the content can be a number, or @ for all
  arguments</div>
<h1 class="Sh" title="Sh" id="SHELL_EXPANSIONS"><a class="selflink" href="#SHELL_EXPANSIONS">SHELL
  EXPANSIONS</a></h1>
The <i>%sh{...}</i> expansion replaces its content with the output of the shell
  commands in it. The following environment variables are used to pass
  information about Kakoune&#x2019;s state:
<div class="Pp"></div>
<b>kak_selection</b>
<div style="margin-left: 4.00ex;">content of the main selection</div>
<div class="Pp"></div>
<b>kak_selections</b>
<div style="margin-left: 4.00ex;">content of the selection separated by colons,
  colons in the selection contents are escaped with a backslash</div>
<div class="Pp"></div>
<b>kak_selection_desc</b>
<div style="margin-left: 4.00ex;">range of the main selection, represented as
  anchor,cursor; anchor and cursor are in this format: line.column</div>
<div class="Pp"></div>
<b>kak_selections_desc</b>
<div style="margin-left: 4.00ex;">range of the selections separated by
  colons</div>
<div class="Pp"></div>
<b>kak_bufname</b>
<div style="margin-left: 4.00ex;">name of the current buffer</div>
<div class="Pp"></div>
<b>kak_buffile</b>
<div style="margin-left: 4.00ex;">full path of the file or same as kak_bufname
  when there&#x2019;s no associated file</div>
<div class="Pp"></div>
<b>kak_buflist</b>
<div style="margin-left: 4.00ex;">the current buffer list, each buffer separated
  by a colon</div>
<div class="Pp"></div>
<b>kak_timestamp</b>
<div style="margin-left: 4.00ex;">timestamp of the current buffer, the timestamp
  is an integer value which is incremented each time the buffer is
  modified</div>
<div class="Pp"></div>
<b>kak_runtime</b>
<div style="margin-left: 4.00ex;">directory containing the kak binary</div>
<div class="Pp"></div>
<b>kak_count</b>
<div style="margin-left: 4.00ex;">count parameter passed to the command</div>
<div class="Pp"></div>
<b>kak_opt_&lt;name&gt;</b>
<div style="margin-left: 4.00ex;">value of option <b>name</b></div>
<div class="Pp"></div>
<b>kak_reg_&lt;r&gt;</b>
<div style="margin-left: 4.00ex;">value of register <b>r</b></div>
<div class="Pp"></div>
<b>kak_socket</b>
<div style="margin-left: 4.00ex;">filename of session socket
  (<i>/tmp/kak-&lt;session&gt;</i>)</div>
<div class="Pp"></div>
<b>kak_session</b>
<div style="margin-left: 4.00ex;">name of the current session</div>
<div class="Pp"></div>
<b>kak_client</b>
<div style="margin-left: 4.00ex;">name of current client</div>
<div class="Pp"></div>
<b>kak_cursor_line</b>
<div style="margin-left: 4.00ex;">line of the end of the main selection</div>
<div class="Pp"></div>
<b>kak_cursor_column</b>
<div style="margin-left: 4.00ex;">column of the end of the main selection (in
  byte)</div>
<div class="Pp"></div>
<b>kak_cursor_char_column</b>
<div style="margin-left: 4.00ex;">column of the end of the main selection (in
  character)</div>
<div class="Pp"></div>
<b>kak_window_width</b>
<div style="margin-left: 4.00ex;">width of the current kakoune window</div>
<div class="Pp"></div>
<b>kak_window_height</b>
<div style="margin-left: 4.00ex;">height of the current kakoune window</div>
<div class="Pp"></div>
<b>kak_hook_param</b>
<div style="margin-left: 4.00ex;">filtering text passed to the currently
  executing hook</div>
<div class="Pp"></div>
<b>kak_client_env_&lt;name&gt;</b>
<div style="margin-left: 4.00ex;">value of the <b>name</b> variable in the
  client environment (e.g. <b>$kak_client_env_SHELL</b> is the SHELL
  variable)</div>
<div style="height: 1.00em;">&#x00A0;</div>
Note that in order for Kakoune to pass a value in the environment, the variable
  has to be spelled out within the body of the expansion
<h1 class="Sh" title="Sh" id="MARKUP_STRINGS"><a class="selflink" href="#MARKUP_STRINGS">MARKUP
  STRINGS</a></h1>
In certain contexts, Kakoune can take a markup string, which is a string syntax
  will enable the face facename until another face gets activated, or the end of
  the string is reached.
<div style="height: 1.00em;">&#x00A0;</div>
Literal <i>{</i> characters shall be written <i>{</i>, and a literal backslash
  (<i>\</i>) that precedes a <i>{</i> character shall be escaped as well
  (<i>\\</i>).</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
