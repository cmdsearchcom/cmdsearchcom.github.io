<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:02 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SSLH(1p) User Contributed Perl Documentation
SSLH(1p)</p>

<p style="margin-top: 1em">NAME <br>
sslh - Switch incoming connection between SSH and SSL/HTTPS
servers</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sslh [ -v ] [ -p [host:]port ] [ -t timeout ] <br>
[ --ssh [host:]port ] [ --ssl [host:]port ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
sslh is a simple script that lets you switch an incoming
connection on a single port between distinct SSH and
SSL/HTTPS servers.</p>

<p style="margin-top: 1em">sslh listens for connections on
a port and is able to redirect them either to an HTTPS web
server or a SSH server.</p>

<p style="margin-top: 1em">This lets one setup both a HTTPS
web server and a SSH server and access them through the same
host+port.</p>

<p style="margin-top: 1em">OPTIONS <br>
The program follows the usual GNU command line syntax, with
long options starting with two dashes.</p>

<p style="margin-top: 1em">-p, --port [host:]port <br>
The port the proxy will listen to. If no port is given, 443
is used by default. If no host is given,
&quot;localhost&quot; is used by default.</p>

<p style="margin-top: 1em">-s, --ssh [host:]port <br>
The SSH server which the SSH connections must be forwarded
to. If omitted, the default is localhost:22.</p>

<p style="margin-top: 1em">-l, --ssl, --https [host:]port
<br>
The HTTPS server which the HTTPS connections must be
forwarded to. If omitted, the default is localhost:443.</p>

<p style="margin-top: 1em">-t, --timeout delay <br>
Timeout in seconds before a silent incoming connection is
considered as a SSH connection. The number can be
fractional.</p>

<p style="margin-top: 1em">The default is 2seconds.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Verbose output. This option can be used several times for
more verbose output.</p>

<p style="margin-top: 1em">EXAMPLE OF USE <br>
Is this tool actually useful? Yes.</p>

<p style="margin-top: 1em">For example one can use it to
access both a SSH server and a secure web server via a
corporate proxy that only accepts to relay connections to
port 443. Creating a tunnel that <br>
passes SSH connection through a CONNECT-enabled web proxy is
easy with connect-tunnel (also included in the
&quot;Net::Proxy&quot; distribution).</p>

<p style="margin-top: 1em">The proxy will let both SSH and
HTTPS connections out (since they all point to port 443),
and the home server will connect those incoming connections
to the appropriate server. <br>
This only requires to run the HTTPS server on a non standard
port (not 443).</p>

<p style="margin-top: 1em">TECHNICAL NOTE <br>
How can this proxy find out what kind of protocol is using a
TCP connection to port 443, without being connected (yet) to
the server? We actually rely on a slight difference <br>
between the SSL and SSH protocols (found thanks to
ethereal):</p>

<p style="margin-top: 1em">SSH Once the TCP connection is
established, the server speaks first, presenting itself by
saying something like:</p>

<p style="margin-top: 1em">SSH-2.0-OpenSSH_3.6.1p2 Debian
1:3.6.1p2-1</p>

<p style="margin-top: 1em">SSL With SSL, it&rsquo;s always
the client that speaks first.</p>

<p style="margin-top: 1em">This means that sslh can be used
with any pair of protocols/services that share this property
(the client speaks first for one and the server speaks first
for the other).</p>

<p style="margin-top: 1em">AUTHORS <br>
Original idea and C version <br>
Frederic Ple &quot;&lt;sslh@wattoo.org&gt;&quot;.</p>

<p style="margin-top: 1em">Perl versions <br>
Philippe &rsquo;BooK&rsquo; Bruhat
&quot;&lt;book@cpan.org&gt;&quot;.</p>

<p style="margin-top: 1em">SCRIPT HISTORY <br>
Version 0.01 of the script was a quick hack designed in 2003
as a proof of concept.</p>

<p style="margin-top: 1em">Version 0.02 (and higher) are
based on &quot;Net::Proxy&quot;, and included with the
&quot;Net::Proxy&quot; distribution. Version 0.02
didn&rsquo;t work, though.</p>

<p style="margin-top: 1em">Version 0.03 correctly
initialised the &quot;in&quot; connector.</p>

<p style="margin-top: 1em">Version 0.04 lets the proxy
listen on any address (instead of &quot;localhost&quot;,
which is still the default). Thanks to Dieter Voegtli for
spotting this.</p>

<p style="margin-top: 1em">SEE ALSO <br>
Net::Proxy, Net::Proxy::Connector::dual.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright 2003-2006, Philippe Bruhat. All rights
reserved.</p>

<p style="margin-top: 1em">LICENSE <br>
This module is free software; you can redistribute it or
modify it under the same terms as Perl itself.</p>

<p style="margin-top: 1em">POD ERRORS <br>
Hey! The above document had some coding errors, which are
explained below:</p>

<p style="margin-top: 1em">Around line 200: <br>
Non-ASCII character seen before =encoding in
&rsquo;Frederic&rsquo;. Assuming ISO8859-1</p>

<p style="margin-top: 1em">perl v5.18.1 2013-10-22
SSLH(1p)</p>
<hr>
</body>
</html>
