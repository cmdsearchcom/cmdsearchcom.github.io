<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.net(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.net(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.net(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.net</b> - Performs network maintenance.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, network, network maintenance
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.net</b>
<div>&#x00A0;</div>
<b>v.net --help</b>
<div>&#x00A0;</div>
<b>v.net</b> [-<b>cs</b>] [<b>input</b>=<i>name</i>] [<b>points</b>=<i>name</i>]
  [ <b>output</b>=<i>name</i>] <b>operation</b>=<i>string</i>
  [<b>arc_layer</b>=<i>string</i>]
  [<b>arc_type</b>=<i>string</i>[,<i>string</i>,...]] [
  <b>node_layer</b>=<i>string</i>] [ <b>threshold</b>=<i>float</i>]
  [<b>file</b>= <i>name</i>] [<b>turn_layer</b>=<i>string</i>]
  [<b>turn_cat_layer</b>= <i>string</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [-- <b>verbose</b>] [--<b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Assign unique categories to new points
    <div>&#x00A0;</div>
    For operation &#x2019;nodes&#x2019;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Snap points to network
    <div>&#x00A0;</div>
    For operation &#x2019;connect&#x2019;. By default, a new line from the point
      to the network is created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector line map (arcs)
    <div>&#x00A0;</div>
    Required for operation &#x2019;nodes&#x2019;, &#x2019;connect&#x2019;,
      &#x2019;report&#x2019; and &#x2019;nreport&#x2019;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>points</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector point map (nodes)
    <div>&#x00A0;</div>
    Required for operation &#x2019;connect&#x2019; and &#x2019;arcs&#x2019;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>operation</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Operation to be performed
    <div>&#x00A0;</div>
    Options: <i>nodes, connect, arcs, report, nreport, turntable</i>
    <div>&#x00A0;</div>
     <b>nodes</b>: new point is placed on each node (line end) if doesn&#x2019;t
      exist
    <div>&#x00A0;</div>
     <b>connect</b>: connect still unconnected points to vector network by
      inserting new line(s)
    <div>&#x00A0;</div>
     <b>arcs</b>: new line is created from start point to end point
    <div>&#x00A0;</div>
     <b>report</b>: print to standard output {line_category start_point_category
      end_point_category}
    <div>&#x00A0;</div>
     <b>nreport</b>: print to standard output {point_category
      line_category[,line_category...]}
    <div>&#x00A0;</div>
     <b>turntable</b>: create turntable on vector network</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_type</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc type
    <div>&#x00A0;</div>
    Input feature type
    <div>&#x00A0;</div>
    Options: <i>line, boundary</i>
    <div>&#x00A0;</div>
    Default: <i>line,boundary</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>threshold</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Threshold
    <div>&#x00A0;</div>
    Required for operation &#x2019;connect&#x2019;. Connect points in given
      threshold.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>file</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input file
    <div>&#x00A0;</div>
    Required for operation &#x2019;arcs&#x2019; (&#x2019;-&#x2019; for standard
      input)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>turn_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turntable layer
    <div>&#x00A0;</div>
    Layer where turntable will be attached. Format: layer number[/layer
      name].Required for operation &#x2019;turntable&#x2019;.
    <div>&#x00A0;</div>
    Default: <i>3</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>turn_cat_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer with unique categories used in turntable
    <div>&#x00A0;</div>
    Layer with unique categories for every line in arc_layer and point on every
      node. The categories are used in turntable. Format: layer number[/layer
      name]. Required for operation &#x2019;turntable&#x2019;.
    <div>&#x00A0;</div>
    Default: <i>4</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.net</i> is used for network preparation and maintenance. Its main use is to
  create a vector network from vector lines ( <i>arcs</i> <i></i>) and points
  (<i>nodes</i>) by creating nodes from intersections in a map of vector lines (
  <i>node</i> operator), by connecting a vector lines map with a points map (
  <i>connect</i> operator), and by creating new lines between pairs of vector
  points ( <i>arcs</i> operator).
<div class="Pp"></div>
A GIS network consists of topologically correct lines (arcs). That is, the lines
  must be connected by shared vertices where real connections exist. In GRASS
  GIS you also can add nodes to the network. These are specially designated
  vertices used for analyzing network properties or computing cost/distance
  measures. That is, <b>not all vertices are treated as nodes by</b>
  <b>default</b>. Only <i>v.net.path</i> can use a network without nodes, they
  are required for all the other network modules. In GRASS, network arcs are
  stored in one data layer (normally layer 1) and nodes are stored in a
  different data layer (normally layer 2).
<div class="Pp"></div>
<i>v.net</i> offers two ways to add nodes to a network of arcs and one method to
  add arcs to a set of nodes:
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">Use the <i>connect</i> operation to create nodes from a
      vector points file and add these nodes to an existing vector network of
      arcs (i.e., lines/boundaries). This is useful when the goal is to analyze
      a set of places (points) in relation to a network--for example travel
      costs between places. Only points within the <i>thresh</i> (threshold)
      distance to a line/boundary will be connected as network nodes. There are
      two ways to connect nodes. By default, <i>v.net</i> will create new lines
      connecting each point to the closest line of the network. If you use the
      <i>-s</i> flag, however, the new nodes will be added on the closest line
      of the network at the point closest to the point you wish to add. When
      using the <i>connect</i> operation, some lines will share the same
      category. In order to assign unique costs to each line, a new layer needs
      to be created with
    <div>&#x00A0;</div>
    v.category map=yourmap option=add cat=1 step=1 layer=3 output=newmap
    <div>&#x00A0;</div>
    followed by
    <div>&#x00A0;</div>
    v.db.addtable map=newmap layer=3 table=tablename.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">Create nodes and arcs from a vector line/boundary file
      using the <i>node</i> operation. This is useful if you are mostly
      interested in the network itself and thus you can use intersections of the
      network as start and end points. Nodes will be created at all
      intersections of two or more lines. For an <i>arc</i> that consists of
      several segments connected by vertices (the typical case), only the
      starting and ending vertices are treated as network nodes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>3</b></dt>
  <dd class="It-tag">Create straight-line arcs between pairs of nodes with the
      <i>arcs</i> option. This produces networks like those of airline flights
      between airports. It is also similar to the kind of network created with
      social networking software, making it possible to create georeferenced
      social networks.</dd>
</dl>
<div class="Pp"></div>
While the arcs created with v.net will retain any attribute information
  associated with the input vector line/boundary file in data layer 1, nodes
  created and stored in data layer 2 will not have any associated attribute
  information.
<div class="Pp"></div>
For nodes created using the <i>connect</i> and <i>arcs</i> operations (methods 1
  and 3 above), the nodes can be reconnected to the attribute table of the input
  vector points file using the attribute table manager (&quot;manage
  layers&quot; tab) or by running <i>v.db.connect</i>.
<div class="Pp"></div>
For nodes created using the <i>nodes</i> operation (method 2 above), it is
  possible to create an attribute table for the new nodes in layer 2 using the
  attribute table manager and connect it to layer 2 (&quot;manage layers&quot;
  tab) or to create a table with <i>v.db.addtable</i>, connect it to layer 2
  with <i>v.db.connect</i>, and update the new table with cat values with
  <i>v.to.db</i>.
<div class="Pp"></div>
The <i>turntable</i> operation creates a turntable with the costs for every
  possible turn on every possible node (intersection, crossroad) in given layer
  (arc_layer). U-turns are taken in account too. Turntable is created in
  <b>turn_layer</b> and <b>turn_cat_layer</b>. Building the turntable allows you
  to model e.g. traffic code, where some turns may be prohibited. If features in
  analyzed network are changed, the turntable must be created again (e.g. it
  includes v.net connect operation). Turntable name consists of output vector
  map name + &quot;_turntable_&quot; + &quot;t&quot; + &quot;_&quot; +
  turn_layer + &quot;_&quot; + &quot;tuc&quot; + &quot;_&quot; + turn_cat_layer
  + &quot;_&quot; + &quot;a&quot; + &quot;_&quot; + arc_layer e. g.
  roads_turntable_t_3_tuc_4_a_1
<div class="Pp"></div>
These modules are able to work with the turntable: <i>v.net.alloc</i>,
  <i>v.net.iso</i>, <i>v.net.path</i>, <i>v.net.salesman</i> For more
  information about turns in the vector network analyses see wiki page.
<div class="Pp"></div>
Once a vector network has been created, it can be analyzed in a number of
  powerful ways using the suite of <i>v.net</i>.* modules. The shortest route
  between two nodes, following arcs, can be computed ( <i>v.net.path</i>), as
  can the shortest route that will pass through a set of nodes and return to the
  starting node ( <i>v.net.salesman</i>). Least cost routes through the network
  can be calculated on the basis of distance only or on the basis of distance
  weighted by an attribute associated with each arc (for example, travel speed
  along a network segment). A network can be divided into concentric zones of
  equal travel cost around one or more nodes ( <i>v.net.iso</i>) or subdivided
  so that each node is surrounded by a zone in which all arcs can be reached
  with the same travel costs as all arcs surrounding each other node (
  <i>v.net.alloc</i>). In addition to the modules listed above, the GRASS vector
  networking suite includes numerous other modules for analysis of network costs
  and connectivity. These include: <i>v.net.allpairs</i>, <i>v.net.bridge</i>,
  <i>v.net.centrality</i>, <i>v.net.components</i>, <i>v.net.distance</i>,
  <i>v.net.flow</i>, <i>v.net.spanningtree</i>, <i>v.net.steiner</i>,
  <i>v.net.timetable</i>, and <i>v.net.visibility</i>.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
For a vector map prepared for network analysis in GRASS, nodes are represented
  by the grass-internal geometry type <i>node</i> and arcs by the geometry type
  <i>line</i>. If vector editing is required to modify the graph,
  <i>g.gui.vdigit</i> or <i>v.edit</i> can be used. See also the Linear
  Referencing System available in GRASS GIS.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The examples are North Carolina dataset based.
<h2 class="Ss" title="Ss" id="Create_nodes_globally_for_all_line_ends_and_intersections"><a class="selflink" href="#Create_nodes_globally_for_all_line_ends_and_intersections">Create
  nodes globally for all line ends and intersections</a></h2>
<pre>
v.net input=streets_wake output=streets_node operation=nodes
# verify result
v.category streets_node option=report
</pre>
<h2 class="Ss" title="Ss" id="Merge_in_nodes_from_a_separate_map_within_given_threshold"><a class="selflink" href="#Merge_in_nodes_from_a_separate_map_within_given_threshold">Merge
  in nodes from a separate map within given threshold</a></h2>
<pre>
v.net input=streets_wake points=firestations out=streets_net \
      operation=connect threshold=500
# verify result
v.category streets_net option=report
</pre>
The nodes are stored in layer 2 unless node_layer=1 is used.
<h2 class="Ss" title="Ss" id="Generating_network_for_vector_point_map"><a class="selflink" href="#Generating_network_for_vector_point_map">Generating
  network for vector point map</a></h2>
For generating network for given vector point map an input file in the following
  format is required:
<div>&#x00A0;</div>
<pre>
[category of edge] [category of start node] [category of end node]
</pre>
<div class="Pp"></div>
Option 1: Save the file (e.g. &quot;points.txt&quot;) and generate the map:
<div>&#x00A0;</div>
<pre>
v.net points=geodetic_swwake_pts output=geodetic_swwake_pts_net \
      operation=arcs file=points.txt
# verify result
v.category geodetic_swwake_pts_net option=report
</pre>
<div class="Pp"></div>
Option 2: Read in from command line:
<div>&#x00A0;</div>
<pre>
v.net points=geodetic_swwake_pts output=geodetic_swwake_pts_net \
      operation=arcs file=- &lt;&lt; EOF
1 28000 28005
2 27945 27958
3 27886 27897
EOF
# verify result
v.category geodetic_swwake_pts_net option=report
</pre>
<h2 class="Ss" title="Ss" id="Generating_network_with_turntable_for_vector_point_map"><a class="selflink" href="#Generating_network_with_turntable_for_vector_point_map">Generating
  network with turntable for vector point map</a></h2>
Following example generates a vector map with turntable:
<div>&#x00A0;</div>
<pre>
v.net operation=turntable in=railroads out=railroads_ttb
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>g.gui.vdigit,</i> <i>v.edit</i> <i></i>
<div class="Pp"></div>
<i></i> <i>v.net.alloc,</i> <i>v.net.allpairs,</i> <i>v.net.bridge,</i>
  <i>v.net.centrality,</i> <i>v.net.components,</i> <i>v.net.connectivity,</i>
  <i>v.net.distance,</i> <i>v.net.flow,</i> <i>v.net.iso,</i> <i>v.net.path,</i>
  <i>v.net.salesman</i> <i>v.net.spanningtree,</i> <i>v.net.steiner,</i>
  <i>v.net.timetable,</i> <i>v.net.visibility</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Radim Blazek, ITC-irst, Trento, Italy
<div>&#x00A0;</div>
Martin Landa, FBK-irst (formerly ITC-irst), Trento, Italy and CTU in Prague,
  Czech Republic (operation &#x2019;connect&#x2019; and &#x2019;arcs&#x2019;)
<div>&#x00A0;</div>
Markus Metz: important fixes and improvements
<h2 class="Ss" title="Ss" id="TURNS_SUPPORT"><a class="selflink" href="#TURNS_SUPPORT">TURNS
  SUPPORT</a></h2>
The turns support was implemnented as part of GRASS GIS turns cost project at
  Czech Technical University in Prague, Czech Republic. Eliska Kyzlikova, Stepan
  Turek, Lukas Bocan and Viera Bejdova participated at the project.
  Implementation: Stepan Turek Documentation: Lukas Bocan Mentor: Martin Landa
<div class="Pp"></div>
<i>Last changed: $Date: 2016-11-14 00:09:36 +0100 (Mon, 14 Nov 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.net source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
