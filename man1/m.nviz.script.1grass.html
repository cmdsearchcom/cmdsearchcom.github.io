<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>m.nviz.script(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">m.nviz.script(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">m.nviz.script(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>m.nviz.script</b> - Creates fly-through script to run in NVIZ.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
miscellaneous, graphics, raster, raster3d, vector, visualization
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>m.nviz.script</b>
<div>&#x00A0;</div>
<b>m.nviz.script --help</b>
<div>&#x00A0;</div>
<b>m.nviz.script</b> [-<b>fckoe</b>] <b>input</b>=<i>name</i>
  <b>output</b>=<i>name</i> [ <b>name</b>=<i>string</i>]
  [<b>route</b>=<i>east,north</i>[, <i>east,north</i>,...]]
  <b>dist</b>=<i>float</i> <b>ht</b>=<i>float</i> <b>frames</b>=<i>integer</i>
  [<b>start</b>=<i>integer</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Full render -- Save images</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Fly at constant elevation (ht)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Include command in the script to output a KeyFrame file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Render images off-screen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Enable vector and sites drawing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of output script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>name</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Prefix of output images (default = NVIZ)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>route</b>=<i>east,north[,</i><i>east,north</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Route coordinates (east,north)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dist</b>=<i>float</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Camera layback distance (in map units)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ht</b>=<i>float</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Camera height above terrain</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>frames</b>=<i>integer</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of frames</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>start</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Start frame number (default=0)</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>m.nviz.script</i> program allows the user to easily create a script that
  can be run in NVIZ to fly through a terrain. The NVIZ flight path can be
  supplied on the command line as comma separated coordinates. The program
  optionally allows a KeyFrame file to created (after running the script). This
  KeyFrame file can be loaded into the <i>Keyframe Animation</i> panel for fine
  tuning or editing.
<div class="Pp"></div>
The script generated by <i>m.nviz.script</i> can be run from the NVIZ command
  line (nviz script=script_name) or after NVIZ is started by selecting
  <i>Scripting-&gt;Play Script</i>.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Full render
    <div>&#x00A0;</div>
    The script will draw all loaded NVIZ data and save scene to PPM image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Flay at constant elevation
    <div>&#x00A0;</div>
    With this flag the camera will be set to an elevation given by the
      <i>ht=</i> parameter. The default is to fly at <i>ht=</i> above the
      topography (i.e. camera height = elevation + ht)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output KeyFrame file
    <div>&#x00A0;</div>
    Generate a KeyFrame file that can be loaded from the NVIZ <i>Keyframe
      Animation</i> panel. The KeyFrame file is automatically assigned the
      script name with a <i>.kanimator</i> extension.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Render the animation in an off-screen context</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Enable vector and sites drawing</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name of the GRASS raster map with elevation data.
    <div>&#x00A0;</div>
    This should be the same file that will be loaded in NVIZ.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name of the NVIZ script to create.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>name</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The prefix for output images if running in full render mode ( <i>-f</i>).
    <div>&#x00A0;</div>
    The defulat preifix is NVIZ (eg. NVIZ0000.ppm).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dist</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The distance of the camera behind the center of view.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ht</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The height of the camera above the center of view.
    <div>&#x00A0;</div>
    If the the <i>-c</i> flag is set, the height represents the actual camera
      height.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>frames</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The number of frames in the animation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>start</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The starting frame number (default = 0).
    <div>&#x00A0;</div>
    This option may be useful in full render mode when creating an animation in
      sections. For example the user may wish to start at frame number
    2000.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>route</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The comma separated geographic coordinates for keyframe locations.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
To interactively create an NVIZ animation from raster elev.rast with 500 frames
  and the camera set to 50 meters above and 250 meters behind the scene, run the
  following:
<div>&#x00A0;</div>
<pre>
g.region raster=elevation.dem
d.rast elevation.dem
m.nviz.script -k input=elevation.dem output=nviz.script dist=2400 ht=1220 frames=1000
</pre>
In the above the example the user is prompted to select the route from the GRASS
  monitor. The output script, &#x2019;nviz.script.nvscr&#x2019;, can then be run
  in NVIZ:
<div>&#x00A0;</div>
<pre>
nviz elevation=elevation.dem script=nviz.script.nvscr
</pre>
<h1 class="Sh" title="Sh" id="NOTES_/_HINTS"><a class="selflink" href="#NOTES_/_HINTS">NOTES
  / HINTS</a></h1>
The user must select at least four key-frame locations (points) otherwise an
  error is generated.
<div class="Pp"></div>
If the GRASS region is changed the <i>m.nviz.script</i> command must be re-run.
<div class="Pp"></div>
The current GRASS region and the user supplied parameters are included as a
  comment at the top of the output script. This information can be used to
  easily re-create the animation.
<div class="Pp"></div>
The camera position is calculated backwards from the supplied position(s). It is
  possible that the camera position will lie outside the current window, in
  which case a non-fatal error is generated (Error: selected point is outside
  region). This error can result in jerky movements during the animation. To
  correct this problem reduce the <i>dist=</i> parameter or increase the current
  region.
<h2 class="Ss" title="Ss" id="Loading_the_script_into_NVIZ"><a class="selflink" href="#Loading_the_script_into_NVIZ">Loading
  the script into NVIZ</a></h2>
The user can run the script at arbitrary resolution. To re-run it at higher
  spatial resolution or different settings, the user first loads the surface and
  sets the resolution, lighting, etc. Then internally the script generated by
  <i>m.nviz.script</i> is run. Alternatively, the user can run nviz with a
  previuosly saved state and the <i>m.nviz.script</i> generated script:
<div>&#x00A0;</div>
<pre>
nviz state=saved.state script=nviz.script.nvscr
</pre>
<h2 class="Ss" title="Ss" id="Keyframe_animator_script"><a class="selflink" href="#Keyframe_animator_script">Keyframe
  animator script</a></h2>
Running the script generated by <i>m.nviz.script</i> within NVIZ, a new script
  for kanimator (keyframe animator) is created. The kanimator panel offers fine
  tuning of the speed (frame rate) as well as editing individual frames or
  inserting new frames. This new kanimator script has to be loaded from the
  Kanimator panel in NVIZ. In the Kanimator panel there are Save and Load button
  which allow the user to save and re-load a kanimator script. Once loaded, the
  key frames will appear in the GUI and can then be edited there.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>wxGUI 3D viewer (NVIZ)</i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Bob Covill
<div class="Pp"></div>
<i>Last changed: $Date: 2016-08-23 14:47:27 +0200 (Tue, 23 Aug 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: m.nviz.script source code (history)
<div class="Pp"></div>
Main index | Misc index | Topics index | Keywords index | Graphical index | Full
  index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
