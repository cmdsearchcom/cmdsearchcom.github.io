<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>KWALLETCLI_GETPIN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">KWALLETCLI_GETPIN(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">KWALLETCLI_GETPIN(1)</td>
  </tr>
</table>
<div class="manual-text">
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">kwalletcli_getpin</b> &#x2014;
  <span class="Nd" title="Nd">command line interface to pinentry</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><b class="Nm" title="Nm">kwalletcli_getpin</b></td>
    <td>[<span class="Op"><b class="Fl" title="Fl">-q</b></span>]
      [<span class="Op"><b class="Fl" title="Fl">-b</b> |
      <b class="Fl" title="Fl">-m</b> | <b class="Fl" title="Fl">-p</b>
      <var class="Ar" title="Ar">prompt</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-E</b> |
      <b class="Fl" title="Fl">-e</b>
      <var class="Ar" title="Ar">errortext</var></span>]
    <div>&#x00A0;</div>
    [<span class="Op"><b class="Fl" title="Fl">-N</b>
      <var class="Ar" title="Ar">NoText</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-t</b>
      <var class="Ar" title="Ar">desctext</var></span>]
      [<span class="Op"><b class="Fl" title="Fl">-Y</b>
      <var class="Ar" title="Ar">YesText</var></span>]</td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">kwalletcli_getpin</b> utility is a shell wrapper
  speaking to <b class="Nm" title="Nm">pinentry</b> using the Assuan protocol.
  It will ask the user for a passphrase and print it, without any trailing
  newline, to standard output. There are options for asking a boolean question
  or displaying a message.
<div class="Pp"></div>
If <code class="Ev" title="Ev">PINENTRY</code> is not empty but points to a
  non-existing or failing programme, <b class="Nm" title="Nm">pinentry</b> is
  not called. Instead, <a class="Xr" title="Xr">xmessage(1)</a> is used for
  boolean queries and messages if <code class="Ev" title="Ev">DISPLAY</code> is
  set; otherwise, <b class="Nm" title="Nm">kwalletcli_getpin</b> uses simple
  terminal I/O on <code class="Ev" title="Ev">GPG_TTY</code> using
  <a class="Xr" title="Xr">stty(1)</a> to disable echo of terminal input for
  passphrase queries.
<div class="Pp"></div>
The options are as follows:
<dl class="Bl-tag" style="margin-left: 15.00ex;">
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#b"><b class="Fl" title="Fl" id="b">-b</b></a></dt>
  <dd class="It-tag">Ask for a confirmation (boolean) instead of a
    passphrase.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#E"><b class="Fl" title="Fl" id="E">-E</b></a></dt>
  <dd class="It-tag">Unset a previously set error text.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#E"><b class="Fl" title="Fl" id="E">-E</b></a>
    <var class="Ar" title="Ar">errtxt</var></dt>
  <dd class="It-tag">Set the error text to
      <var class="Ar" title="Ar">errtxt</var>, displaying a dialogue box with a
      red X icon indicating that this is a retry question.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#m"><b class="Fl" title="Fl" id="m">-m</b></a></dt>
  <dd class="It-tag">Display a message (one-button query) instead of
    asking.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#N"><b class="Fl" title="Fl" id="N">-N</b></a>
    <var class="Ar" title="Ar">NoText</var></dt>
  <dd class="It-tag">Use <var class="Ar" title="Ar">NoText</var> instead of
      <b class="Ic" title="Ic">Cancel</b> for the text of the abort button, if
      any.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#p"><b class="Fl" title="Fl" id="p">-p</b></a>
    <var class="Ar" title="Ar">prompt</var></dt>
  <dd class="It-tag">Set the small descriptive text shown in front of the input
      field (&#x201C;the Prompt&#x201D;) to
      <var class="Ar" title="Ar">prompt</var>.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#q"><b class="Fl" title="Fl" id="q">-q</b></a></dt>
  <dd class="It-tag">Be more quiet.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#t"><b class="Fl" title="Fl" id="t">-t</b></a>
    <var class="Ar" title="Ar">desctxt</var></dt>
  <dd class="It-tag">Set the descriptive text (the input challenge) to
      <var class="Ar" title="Ar">desctxt</var>.</dd>
  <dt class="It-tag" style="margin-left: -15.00ex;"><a class="selflink" href="#Y"><b class="Fl" title="Fl" id="Y">-Y</b></a>
    <var class="Ar" title="Ar">YesText</var></dt>
  <dd class="It-tag">Use <var class="Ar" title="Ar">YesText</var> instead of
      <b class="Ic" title="Ic">OK</b> for the text of the confirm button.</dd>
</dl>
<div class="Pp"></div>
All input and output is assumed to be in UTF-8.
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
The <b class="Nm" title="Nm">kwalletcli_getpin</b> utility exits 0 on success, 1
  if the passphrase input was cancelled by the user, or &gt;1 if an error
  occurred. Confirmation (boolean) error codes are 0 for Yes, 1 for No, or &gt;1
  if an error occurred. Messages return &gt;0 if an error occurred, 0 otherwise.
<div class="Pp"></div>
A summary of the error codes follows:
<dl class="Bl-tag Bl-compact" style="margin-left: 4.20ex;">
  <dt class="It-tag" style="margin-left: -4.20ex;">0</dt>
  <dd class="It-tag">Read password successfully. Boolean question returned
      Yes/OK.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">1</dt>
  <dd class="It-tag">Boolean question returned No/Cancel.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">2</dt>
  <dd class="It-tag">Wrong command line syntax.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">3</dt>
  <dd class="It-tag">The process reading user input unexpectedly terminated or
      errored out.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">4</dt>
  <dd class="It-tag">Unexpected result reading from pinentry.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">5</dt>
  <dd class="It-tag">Unable to determine controlling tty, caller must set
      <code class="Ev" title="Ev">GPG_TTY</code>.</dd>
  <dt class="It-tag" style="margin-left: -4.20ex;">6</dt>
  <dd class="It-tag">Caught SIGHUP, SIGINT, SIGQUIT, SIGTRAP, SIGPIPE, or
      SIGTERM.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag" style="margin-left: 16.20ex;">
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#DISPLAY"><code class="Ev" title="Ev" id="DISPLAY">DISPLAY</code></a></dt>
  <dd class="It-tag">If not set, pass current terminal information to
      <b class="Nm" title="Nm">pinentry</b>.</dd>
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#GPG_TERM"><code class="Ev" title="Ev" id="GPG_TERM">GPG_TERM</code></a></dt>
  <dd class="It-tag">Terminal type of the current tty. Defaults to the value of
      the environment variable <code class="Ev" title="Ev">TERM</code>, or
      &#x201C;vt100&#x201D; if unset.</dd>
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#GPG_TTY"><code class="Ev" title="Ev" id="GPG_TTY">GPG_TTY</code></a></dt>
  <dd class="It-tag">The current terminal, determined by
      <a class="Xr" title="Xr">tty(1)</a> if unset.</dd>
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#LC_CTYPE"><code class="Ev" title="Ev" id="LC_CTYPE">LC_CTYPE</code></a></dt>
  <dd class="It-tag">Passed to <b class="Nm" title="Nm">pinentry</b>. Default:
      &#x201C;en_US.UTF-8&#x201D;</dd>
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#LC_MESSAGES"><code class="Ev" title="Ev" id="LC_MESSAGES">LC_MESSAGES</code></a></dt>
  <dd class="It-tag">Passed to <b class="Nm" title="Nm">pinentry</b>. Unset by
      default.</dd>
  <dt class="It-tag" style="margin-left: -16.20ex;"><a class="selflink" href="#PINENTRY"><code class="Ev" title="Ev" id="PINENTRY">PINENTRY</code></a></dt>
  <dd class="It-tag">The <b class="Nm" title="Nm">pinentry</b> programme to use.
      Default: &#x201C;pinentry&#x201D;</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" title="Xr">gpg-agent(1)</a>,
  <a class="Xr" title="Xr">kwalletcli(1)</a>,
  <a class="Xr" title="Xr">pinentry(1)</a>,
  <a class="Xr" title="Xr">stty(1)</a>, <a class="Xr" title="Xr">tset(1)</a>,
  <a class="Xr" title="Xr">tty(1)</a>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<b class="Nm" title="Nm">kwalletcli_getpin</b> was written by
  <span class="An" title="An">mirabilos</span> &#x27E8;m@mirbsd.org&#x27E9;
  mostly for tarent solutions GmbH.
<h1 class="Sh" title="Sh" id="CAVEATS"><a class="selflink" href="#CAVEATS">CAVEATS</a></h1>
Some newer pinentry features, such as three-button operation or setting the
  window title, are not supported yet.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Some <b class="Nm" title="Nm">pinentry</b> programmes may not support messages
  correctly and display them as boolean queries instead.
<div class="Pp"></div>
Some implementations display labels with the wrong charset.
<div class="Pp"></div>
Neither of these two problems is an issue in
  <b class="Nm" title="Nm">kwalletcli_getpin</b> but a bug of the backend
  implementation.</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 30, 2017</td>
    <td class="foot-os">Linux 4.12.14-300.fc26.x86_64</td>
  </tr>
</table>
</body>
</html>
