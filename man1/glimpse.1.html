<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:13:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GLIMPSE(1) General Commands Manual GLIMPSE(1)</p>

<p style="margin-top: 1em">NAME <br>
glimpse - search quickly through entire file systems</p>

<p style="margin-top: 1em">OVERVIEW <br>
Glimpse (which stands for GLobal IMPlicit SEarch) is a very
popular UNIX indexing and query system that allows you to
search through a large set of files very quickly. Glimpse
<br>
supports most of agrep&rsquo;s options (agrep is our
powerful version of grep) including approximate matching
(e.g., finding misspelled words), Boolean queries, and even
some limited <br>
forms of regular expressions. It is used in the same way,
except that you don&rsquo;t have to specify file names. So,
if you are looking for a needle anywhere in your file
system, <br>
all you have to do is say glimpse needle and all lines
containing needle will appear preceded by the file name.</p>

<p style="margin-top: 1em">To use glimpse you first need to
index your files with glimpseindex. For example,
glimpseindex -o ~ will index everything at or below your
home directory. See man glimpseindex <br>
for more details.</p>

<p style="margin-top: 1em">Glimpse is also available for
web sites, as a set of tools called WebGlimpse. (The old
glimpseHTTP is no longer supported and is not recommended.)
See http://webglimpse.net/ <br>
for more information.</p>

<p style="margin-top: 1em">Glimpse includes all of agrep
and can be used instead of agrep by giving a file name(s) at
the end of the command. This will cause glimpse to ignore
the index and run agrep as <br>
usual. For example, glimpse -1 pattern file is the same as
agrep -1 pattern file. Agrep is distributed as a
self-contained package within glimpse, and can be used
separately. <br>
We added a new option to agrep: -r searches recursively the
directory and everything below it (see agrep options below);
it is used only when glimpse reverts to agrep.</p>

<p style="margin-top: 1em">Mail majordomo@webglimpse.net
with SUBSCRIBE wgusers in the body to be added to the
Webglimpse users mailing list. This is now the location
where glimpse questions are also dis&acirc; <br>
cussed. Bugs can be reported at
http://webglimpse.net/bugzilla/ HTML version of these manual
pages can be found in
http://webglimpse.net/docs/glimpsehelp.html Also, see the
<br>
glimpse home pages in http://webglimpse.net/glimpse</p>

<p style="margin-top: 1em">SYNOPSIS <br>
glimpse - [almost all letters] pattern</p>

<p style="margin-top: 1em">INTRODUCTION <br>
We start with simple ways to use glimpse and describe all
the options in detail later on. Once an index is built,
using glimpseindex, searching for pattern is as easy as
saying</p>

<p style="margin-top: 1em">glimpse pattern</p>

<p style="margin-top: 1em">The output of glimpse is similar
to that of agrep (or any other grep). The pattern can be any
agrep legal pattern including a regular expression or a
Boolean query (e.g., <br>
searching for Tucson AND Arizona is done by glimpse
&rsquo;Tucson;Arizona&rsquo;).</p>

<p style="margin-top: 1em">The speed of glimpse depends
mainly on the number and sizes of the files that contain a
match and only to a second degree on the total size of all
indexed files. If the pattern <br>
is reasonably uncommon, then all matches will be reported in
a few seconds even if the indexed files total 500MB or more.
Some information on how glimpse works and a reference <br>
to a detailed article are given below.</p>

<p style="margin-top: 1em">Most of agrep (and other
grep&rsquo;s) options are supported, including approximate
matching. For example,</p>

<p style="margin-top: 1em">glimpse -1
&rsquo;Tuson;Arezona&rsquo;</p>

<p style="margin-top: 1em">will output all lines containing
both patterns allowing one spelling error in any of the
patterns (either insertion, deletion, or substitution),
which in this case is definitely <br>
needed.</p>

<p style="margin-top: 1em">glimpse -w -i
&rsquo;parent&rsquo;</p>

<p style="margin-top: 1em">specifies case insensitive (-i)
and match on complete words (-w). So &rsquo;Parent&rsquo;
and &rsquo;PARENT&rsquo; will match,
&rsquo;parent/child&rsquo; will match, but
&rsquo;parenthesis&rsquo; or &rsquo;parents&rsquo; will not
match. <br>
(Starting at version 3.0, glimpse can be much faster when
these two options are specified, especially for very large
indexes. You may want to set an alias especially for <br>
&quot;glimpse -w -i&quot;.)</p>

<p style="margin-top: 1em">The -F option provides a pattern
that must match the file name. For example,</p>

<p style="margin-top: 1em">glimpse -F &rsquo;.c$&rsquo;
needle</p>

<p style="margin-top: 1em">will find the pattern needle in
all files whose name ends with .c. (Glimpse will first check
its index to determine which files may contain the pattern
and then run agrep on the <br>
file names to further limit the search.) The -F option
should not be put at the end after the main pattern (e.g.,
&quot;glimpse needle -F hay&quot; is incorrect).</p>

<p style="margin-top: 1em">A Detailed Description of All
the Options of Glimpse <br>
-# # is an integer between 1 and 8 specifying the maximum
number of errors permitted in finding the approximate
matches (the default is zero). Generally, each insertion,
<br>
deletion, or substitution counts as one error. It is
possible to adjust the relative cost of insertions,
deletions and substitutions (see -I -D and -S options).
Since <br>
the index stores only lower case characters, errors of
substituting upper case with lower case may be missed (see
LIMITATIONS). Allowing errors in the match requires more
<br>
time and can slow down the match by a factor of 2-4. Be very
careful when specifying more than one error, as the number
of matches tend to grow very quickly.</p>

<p style="margin-top: 1em">-a prints attribute names. This
option applies only to Harvest SOIF structured data (used
with glimpseindex -s). (See http://harvest.sourceforge.net/
for more information <br>
about the Harvest project.)</p>

<p style="margin-top: 1em">-A used for glimpse
internals.</p>

<p style="margin-top: 1em">-b prints the byte offset (from
the beginning of the file) of the end of each match. The
first character in a file has offset 0.</p>

<p style="margin-top: 1em">-B Best match mode. (Warning: -B
sometimes misses matches. It is safer to specify the number
of errors explicitly.) When -B is specified and no exact
matches are found, <br>
glimpse will continue to search until the closest matches
(i.e., the ones with minimum number of errors) are found, at
which point the following message will be shown: <br>
&quot;the best match contains x errors, there are y matches,
output them? (y/n)&quot; This message refers to the number
of matches found in the index. There may be many more <br>
matches in the actual text (or there may be none if -F is
used to filter files). When the -#, -c, or -l options are
specified, the -B option is ignored. In general, -B <br>
may be slower than -#, but not by very much. Since the index
stores only lower case characters, errors of substituting
upper case with lower case may be missed (see LIMI&acirc;
<br>
TATIONS).</p>

<p style="margin-top: 1em">-c Display only the count of
matching records. Only files with count &gt; 0 are
displayed.</p>

<p style="margin-top: 1em">-C tells glimpse to send its
queries to glimpseserver.</p>

<p style="margin-top: 1em">-d &rsquo;delim&rsquo; <br>
Define delim to be the separator between two records. The
default value is &rsquo;$&rsquo;, namely a record is by
default a line. delim can be a string of size at most 8
(with pos&acirc; <br>
sible use of ^ and $), but not a regular expression. Text
between two delim&rsquo;s, before the first delim, and after
the last delim is considered as one record. For example,
<br>
-d &rsquo;$$&rsquo; defines paragraphs as records and -d
&rsquo;^From &rsquo; defines mail messages as records.
glimpse matches each record separately. This option does not
currently work with <br>
regular expressions. The -d option is especially useful for
Boolean AND queries, because the patterns need not appear in
the same line but in the same record. For exam&acirc; <br>
ple, glimpse -F mail -d &rsquo;^From &rsquo;
&rsquo;glimpse;arizona;announcement&rsquo; will output all
mail messages (in their entirety) that have the 3 patterns
anywhere in the message (or the <br>
header), assuming that files with &rsquo;mail&rsquo; in
their name contain mail messages. If you want the scope of
the record to be the whole file, use the -W option. Glimpse
warn&acirc; <br>
ing: Use this option with care. If the delimiter is set to
match mail messages, for example, and glimpse finds the
pattern in a regular file, it may not find the delim&acirc;
<br>
iter and will therefore output the whole file. (The -t
option - see below - can be used to put the delim at the end
of the record.) Performance Note: Agrep (and glimpse) <br>
resorts to more complex search when the -d option is used.
The search is slower and unfortunately no more than 32
characters can be used in the pattern.</p>

<p style="margin-top: 1em">-Dk Set the cost of a deletion
to k (k is a positive integer). This option does not
currently work with regular expressions.</p>

<p style="margin-top: 1em">-e pattern <br>
Same as a simple pattern argument, but useful when the
pattern begins with a &lsquo;-&rsquo;.</p>

<p style="margin-top: 1em">-E prints the lines in the index
(as they appear in the index) which match the pattern. Used
mostly for debugging and maintenance of the index. This is
not an option that a <br>
user needs to know about.</p>

<p style="margin-top: 1em">-f file_name <br>
this option has a different meaning for agrep than for
glimpse: In glimpse, only the files whose names are listed
in file_name are matched. (The file names have to appear
<br>
as in .glimpse_filenames.) In agrep, the file_name contains
the list of the patterns that are searched. (Starting at
version 3.6, this option for glimpse is much faster <br>
for large files.)</p>

<p style="margin-top: 1em">-F file_pattern <br>
limits the search to those files whose name (including the
whole path) matches file_pattern. This option can be used in
a variety of applications to provide limited <br>
search even for one large index. If file_pattern matches a
directory, then all files with this directory on their path
will be considered. To limit the search to actual <br>
file names, use $ at the end of the pattern. file_pattern
can be a regular expression and even a Boolean pattern. This
option is implemented by running agrep file_pat&acirc; <br>
tern on the list of file names obtained from the index.
Therefore, searching the index itself takes the same amount
of time, but limiting the second phase of the search <br>
to only a few files can speed up the search significantly.
For example,</p>

<p style="margin-top: 1em">glimpse -F &rsquo;src#.c$&rsquo;
needle</p>

<p style="margin-top: 1em">will search for needle in all .c
files with src somewhere along the path. The -F file_pattern
must appear before the search pattern (e.g., glimpse needle
-F &rsquo;.c$&rsquo; will <br>
not work). It is possible to use some of agrep&rsquo;s
options when matching file names. In this case all options
as well as the file_pattern should be in quotes. (-B and -v
<br>
do not work very well as part of a file_pattern.) For
example,</p>

<p style="margin-top: 1em">glimpse -F &rsquo;-1
.html&rsquo; pattern</p>

<p style="margin-top: 1em">will allow one spelling error
when matching .html to the file names (so &quot;.htm&quot;
and &quot;.shtml&quot; will match as well).</p>

<p style="margin-top: 1em">glimpse -F &rsquo;-v .c$&rsquo;
counter</p>

<p style="margin-top: 1em">will search for
&rsquo;counter&rsquo; in all files except for .c files.</p>

<p style="margin-top: 1em">-g prints the file number (its
position in the .glimpse_filenames file) rather than its
name.</p>

<p style="margin-top: 1em">-G Output the (whole) files that
contain a match.</p>

<p style="margin-top: 1em">-h Do not display filenames.</p>

<p style="margin-top: 1em">-H directory_name <br>
searches for the index and the other .glimpse files in
directory_name. The default is the home directory. This
option is useful, for example, if several different <br>
indexes are maintained for different archives (e.g., one for
mail messages, one for source code, one for articles).</p>

<p style="margin-top: 1em">-i Case-insensitive search
&acirc; e.g., &quot;A&quot; and &quot;a&quot; are considered
equivalent. Glimpse&rsquo;s index stores all patterns in
lower case (see LIMITATIONS below). Performance Note: When
<br>
-i is used together with the -w option, the search may
become much faster. It is recommended to have -i and -w as
defaults, for example, through an alias. We use the <br>
following alias in our .cshrc file <br>
alias glwi &rsquo;glimpse -w -i&rsquo;</p>

<p style="margin-top: 1em">-Ik Set the cost of an insertion
to k (k is a positive integer). This option does not
currently work with regular expressions.</p>

<p style="margin-top: 1em">-j If the index was constructed
with the -t option, then -j will output the files last
modification dates in addition to everything else. There are
no major performance <br>
penalties for this option.</p>

<p style="margin-top: 1em">-J host_name <br>
used in conjunction with glimpseserver (-C) to connect to
one particular server.</p>

<p style="margin-top: 1em">-k No symbol in the pattern is
treated as a meta character. For example, glimpse -k
&rsquo;a(b|c)*d&rsquo; will find the occurrences of a(b|c)*d
whereas glimpse &rsquo;a(b|c)*d&rsquo; will find <br>
substrings that match the regular expression
&rsquo;a(b|c)*d&rsquo;. (The only exception is ^ at the
beginning of the pattern and $ at the end of the pattern,
which are still inter&acirc; <br>
preted in the usual way. Use or if you need them
verbatim.)</p>

<p style="margin-top: 1em">-K port_number <br>
used in conjunction with glimpseserver (-C) to connect to
one particular server at the specified TCP port number.</p>

<p style="margin-top: 1em">-l Output only the files names
that contain a match. This option differs from the -N option
in that the files themselves are searched, but the matching
lines are not shown.</p>

<p style="margin-top: 1em">-L x | x:y | x:y:z <br>
if one number is given, it is a limit on the total number of
matches. Glimpse outputs only the first x matches. If -l is
used (i.e., only file names are sought), then <br>
the limit is on the number of files; otherwise, the limit is
on the number of records. If two numbers are given (x:y),
then y is an added limit on the total number of <br>
files. If three numbers are given (x:y:z), then z is an
added limit on the number of matches per file. If any of the
x, y, or z is set to 0, it means to ignore it (in <br>
other words 0 = infinity in this case); for example, -L 0:10
will output all matches to the first 10 files that contain a
match. This option is particularly useful for <br>
servers that needs to limit the amount of output provided to
clients.</p>

<p style="margin-top: 1em">-m used for glimpse
internals.</p>

<p style="margin-top: 1em">-M used for glimpse
internals.</p>

<p style="margin-top: 1em">-n Each matching record (line)
is prefixed by its record (line) number in the file.
Performance Note: To compute the record/line number, agrep
needs to search for all record <br>
delimiters (or line breaks), which can slow down the
search.</p>

<p style="margin-top: 1em">-N searches only the index (so
the search is faster). If -o or -b are used then the result
is the number of files that have a potential match plus a
prompt to ask if you <br>
want to see the file names. (If -y is used, then there is no
prompt and the names of the files will be shown.) This could
be a way to get the matching file names without <br>
even having access to the files themselves. However, because
only the index is searched, some potential matches may not
be real matches. In other words, with -N you will <br>
not miss any file but you may get extra files. For example,
since the index stores everything in lower case, a
case-sensitive query may match a file that has only a case-
<br>
insensitive match. Boolean queries may match a file that has
all the keywords but not in the same line (indexing with -b
allows glimpse to figure out whether the keywords <br>
are close, but it cannot figure out from the index whether
they are exactly on the same line or in the same record
without looking at the file). If the index was not <br>
build with -o or -b, then this option outputs the number of
blocks matching the pattern. This is useful as an indication
of how long the search will take. All files are <br>
partitioned into usually 200-250 blocks. The file
.glimpse_statistics contains the total number of blocks (or
glimpse -N a will give a pretty good estimate; only blocks
<br>
with no occurrences of &rsquo;a&rsquo; will be missed).</p>

<p style="margin-top: 1em">-o the opposite of -t: the
delimiter is not output at the tail, but at the beginning of
the matched record.</p>

<p style="margin-top: 1em">-O the file names are not
printed before every matched record; instead, each filename
is printed just once, and all the matched records within it
are printed after it.</p>

<p style="margin-top: 1em">-p (from version 4.0B1 only)
Supports reading compressed set of filenames. The -p option
allows you to utilize compressed &lsquo;neighborhoods&rsquo;
(sets of filenames) to limit your <br>
search, without uncompressing them. Added mostly for
WebGlimpse. The usage is: <br>
&quot;-p filename:X:Y:Z&quot; where &quot;filename&quot; is
the file with compressed neighborhoods, X is an offset into
that file (usually 0, must be a multiple of sizeof(int)), Y
is the <br>
length glimpse must access from that file (if 0, then whole
file; must be a multiple of sizeof(int)), and Z must be 2
(it indicates that &quot;filename&quot; has the sparse-set
rep&acirc; <br>
resentation of compressed neighborhoods: the other values
are for internal use only). Note that any colon
&quot;:&quot; in filename must be escaped using a backslash
.</p>

<p style="margin-top: 1em">-P used for glimpse
internals.</p>

<p style="margin-top: 1em">-q prints the offsets of the
beginning and end of each matched record. The difference
between -q and -b is that -b prints the offsets of the
actual matched string, while -q <br>
prints the offsets of the whole record where the match
occurred. The output format is @x{y}, where x is the
beginning offset and y is the end offset.</p>

<p style="margin-top: 1em">-Q when used together with -N
glimpse not only displays the filename where the match
occurs, but the exact occurrences (offsets) as seen in the
index. This option is rele&acirc; <br>
vant only if the index was built with -b; otherwise, the
offsets are not available in the index. This option is
ignored when used not with -N.</p>

<p style="margin-top: 1em">-r This option is an agrep
option and it will be ignored in glimpse, unless glimpse is
used with a file name at the end which makes it run as
agrep. If the file name is a <br>
directory name, the -r option will search (recursively) the
whole directory and everything below it. (The glimpse index
will not be used.)</p>

<p style="margin-top: 1em">-R k defines the maximum size
(in bytes) of a record. The maximum value (which is the
default) is 48K. Defining the maximum to be lower than the
deafult may speed up some <br>
searches.</p>

<p style="margin-top: 1em">-s Work silently, that is,
display nothing except error messages. This is useful for
checking the error status.</p>

<p style="margin-top: 1em">-Sk Set the cost of a
substitution to k (k is a positive integer). This option
does not currently work with regular expressions.</p>

<p style="margin-top: 1em">-t Similar to the -d option,
except that the delimiter is assumed to appear at the end of
the record. Glimpse will output the record starting from the
end of delim to (and <br>
including) the next delim. (See warning for the -d
option.)</p>

<p style="margin-top: 1em">-T directory <br>
Use directory as a place where temporary files are built.
(Glimpse produces some small temporary files usually in
/tmp.) This option is useful mainly in the context of <br>
structured queries for the Harvest project, where the
temporary files may be non-trivial, and the /tmp directory
may not have enough space for them.</p>

<p style="margin-top: 1em">-U (starting at version 4.0B1)
Interprets an index created with the -X or the -U option in
glimpseindex. Useful mostly for WebGlimpse or similar web
applications. When <br>
glimpse outputs matches, it will display the filename, the
URL, and the title automatically.</p>

<p style="margin-top: 1em">-v (This option is an agrep
option and it will be ignored in glimpse, unless glimpse is
used with a file name at the end which makes it run as
agrep.) Output all <br>
records/lines that do not contain a match. (Glimpse does not
support the NOT operator yet.)</p>

<p style="margin-top: 1em">-V prints the current version of
glimpse.</p>

<p style="margin-top: 1em">-w Search for the pattern as a
word &acirc; i.e., surrounded by non-alphanumeric
characters. For example, glimpse -w car will match car, but
not characters and not car10. The <br>
non-alphanumeric must surround the match; they cannot be
counted as errors. This option does not work with regular
expressions. Performance Note: When -w is used <br>
together with the -i option, the search may become much
faster. The -w will not work with $, ^, and _ (see BUGS
below). It is recommended to have -i and -w as defaults,
<br>
for example, through an alias. We use the following alias in
our .cshrc file <br>
alias glwi &rsquo;glimpse -w -i&rsquo;</p>

<p style="margin-top: 1em">-W The default for Boolean AND
queries is that they cover one record (the default for a
record is one line) at a time. For example, glimpse
&rsquo;good;bad&rsquo; will output all lines <br>
containing both &rsquo;good&rsquo; and &rsquo;bad&rsquo;.
The -W option changes the scope of Booleans to be the whole
file. Within a file glimpse will output all matches to any
of the patterns. <br>
So, glimpse -W &rsquo;good;bad&rsquo; will output all lines
containing &rsquo;good&rsquo; or &rsquo;bad&rsquo;, but only
in files that contain both patterns. The NOT operator
&rsquo;~&rsquo; can be used only with -W. <br>
It is described later on. The OR operator is essentially
unaffected (unless it is in combination with the other
Boolean operations). For structured queries, the scope is
<br>
always the whole attribute or file.</p>

<p style="margin-top: 1em">-x The pattern must match the
whole line. (This option is translated to -w when the index
is searched and it is used only when the actual text is
searched. It is of limited <br>
use in glimpse.)</p>

<p style="margin-top: 1em">-X (from version 4.0B1 only)
Output the names of files that contain a match even if these
files have been deleted since the index was built. Without
this option glimpse will <br>
simply ignore these files.</p>

<p style="margin-top: 1em">-y Do not prompt. Proceed with
the match as if the answer to any prompt is y. Servers (or
any other scripts) using glimpse will probably want to use
this option.</p>

<p style="margin-top: 1em">-Y k If the index was
constructed with the -t option, then -Y x will output only
matches to files that were created or modified within the
last x days. There are no major per&acirc; <br>
formance penalties for this option.</p>

<p style="margin-top: 1em">-z Allow customizable filtering,
using the file .glimpse_filters to perform the programs
listed there for each match. The best example is
compress/decompress. If <br>
.glimpse_filters include the line <br>
*.Z uncompress &lt; <br>
(separated by tabs) then before indexing any file that
matches the pattern &quot;*.Z&quot; (same syntax as the one
for .glimpse_exclude) the command listed is executed first
(assum&acirc; <br>
ing input is from stdin, which is why uncompress needs &lt;)
and its output (assuming it goes to stdout) is indexed. The
file itself is not changed (i.e., it stays com&acirc; <br>
pressed). Then if glimpse -z is used, the same program is
used on these files on the fly. Any program can be used (we
run &rsquo;exec&rsquo;). For example, one can filter out
parts <br>
of files that should not be indexed. Glimpseindex tries to
apply all filters in .glimpse_filters in the order they are
given. For example, if you want to uncompress a <br>
file and then extract some part of it, put the compression
command (the example above) first and then another line that
specifies the extraction. Note that this can slow <br>
down the search because the filters need to be run before
files are searched. (See also glimpseindex.)</p>

<p style="margin-top: 1em">-Z No op. (It&rsquo;s useful for
glimpse&rsquo;s internals. Trust us.)</p>

<p style="margin-top: 1em">The characters &lsquo;$&rsquo;,
&lsquo;^&rsquo;, &lsquo;&acirc;&rsquo;, &lsquo;[&rsquo;,
&lsquo;]&rsquo;, &lsquo;^&rsquo;, &lsquo;|&rsquo;,
&lsquo;(&rsquo;, &lsquo;)&rsquo;, &lsquo;!&rsquo;, and
&lsquo;&acute; can cause unexpected results when included in
the pattern, as these characters are also meaningful to the
<br>
shell. To avoid these problems, enclose the entire pattern
in single quotes, i.e., &rsquo;pattern&rsquo;. Do not use
double quotes (&quot;).</p>

<p style="margin-top: 1em">PATTERNS <br>
glimpse supports a large variety of patterns, including
simple strings, strings with classes of characters, sets of
strings, wild cards, and regular expressions (see
LIMITA&acirc; <br>
TIONS).</p>

<p style="margin-top: 1em">Strings <br>
Strings are any sequence of characters, including the
special symbols &lsquo;^&rsquo; for beginning of line and
&lsquo;$&rsquo; for end of line. The following special
characters ( &lsquo;$&rsquo;, &lsquo;^&rsquo;,
&lsquo;&acirc;&rsquo;, <br>
&lsquo;[&rsquo;, &lsquo;^&rsquo;, &lsquo;|&rsquo;,
&lsquo;(&rsquo;, &lsquo;)&rsquo;, &lsquo;!&rsquo;, and
&lsquo;&acute; ) as well as the following meta characters
special to glimpse (and agrep): &lsquo;;&rsquo;,
&lsquo;,&rsquo;, &lsquo;#&rsquo;, &lsquo;&lt;&rsquo;,
&lsquo;&gt;&rsquo;, &lsquo;-&rsquo;, and &lsquo;.&rsquo;,
should be preceded <br>
by &lsquo;&acute; if they are to be matched as regular
characters. For example, abc\ corresponds to the string ^abc
whereas ^abc corresponds to the string abc at the beginning
<br>
of a line.</p>

<p style="margin-top: 1em">Classes of characters <br>
a list of characters inside [] (in order) corresponds to any
character from the list. For example, [a-ho-z] is any
character between a and h or between o and z. The sym&acirc;
<br>
bol &lsquo;^&rsquo; inside [] complements the list. For
example, [^i-n] denote any character in the character set
except character &rsquo;i&rsquo; to &rsquo;n&rsquo;. The
symbol &lsquo;^&rsquo; thus has two meanings, <br>
but this is consistent with egrep. The symbol
&lsquo;.&rsquo; (don&rsquo;t care) stands for any symbol
(except for the newline symbol).</p>

<p style="margin-top: 1em">Boolean operations <br>
Glimpse supports an &lsquo;AND&rsquo; operation denoted by
the symbol &lsquo;;&rsquo; an &lsquo;OR&rsquo; operation
denoted by the symbol &lsquo;,&rsquo;, a limited version of
a &rsquo;NOT&rsquo; operation (starting at version <br>
4.0B1) denoted by the symbol &lsquo;~&rsquo;, or any
combination. For example, glimpse
&rsquo;pizza;cheeseburger&rsquo; will output all lines
containing both patterns. glimpse -F &rsquo;gnu;.c$&rsquo;
<br>
&rsquo;define;DEFAULT&rsquo; will output all lines
containing both &rsquo;define&rsquo; and
&rsquo;DEFAULT&rsquo; (anywhere in the line, not necessarily
in order) in files whose name contains &rsquo;gnu&rsquo; and
ends <br>
with .c. glimpse &rsquo;{political,computer};science&rsquo;
will match &rsquo;political science&rsquo; or &rsquo;science
of computers&rsquo;. The NOT operation works only together
with the -W option and it <br>
is generally applies only to the whole file rather to
individual records. Its output may sometimes seem
counterintuitive. Use with care. glimpse -W
&rsquo;fame;~glory&rsquo; will <br>
output all lines containing &rsquo;fame&rsquo; in all files
that contain &rsquo;fame&rsquo; but do not contain
&rsquo;glory&rsquo;; This is the most common use of NOT, and
in this case it works as expected. <br>
glimpse -W &rsquo;~{fame;glory}&rsquo; will be limited to
files that do not contain both words, and will output all
lines containing one of them.</p>

<p style="margin-top: 1em">Wild cards <br>
The symbol &rsquo;#&rsquo; is used to denote a sequence of
any number (including 0) of arbitrary characters (see
LIMITATIONS). The symbol # is equivalent to .* in egrep. In
fact, .* <br>
will work too, because it is a valid regular expression (see
below), but unless this is part of an actual regular
expression, # will work faster. (Currently glimpse is <br>
experiencing some problems with #.)</p>

<p style="margin-top: 1em">Combination of exact and
approximate matching <br>
Any pattern inside angle brackets &lt;&gt; must match the
text exactly even if the match is with errors. For example,
&lt;mathemat&gt;ics matches mathematical with one error
(replac&acirc; <br>
ing the last s with an a), but mathe&lt;matics&gt; does not
match mathematical no matter how many errors are allowed.
(This option is buggy at the moment.)</p>

<p style="margin-top: 1em">Regular expressions <br>
Since the index is word based, a regular expression must
match words that appear in the index for glimpse to find it.
Glimpse first strips the regular expression from all <br>
non-alphabetic characters, and searches the index for all
remaining words. It then applies the regular expression
matching algorithm to the files found in the index. For <br>
example, glimpse &rsquo;abc.*xyz&rsquo; will search the
index for all files that contain both &rsquo;abc&rsquo; and
&rsquo;xyz&rsquo;, and then search directly for
&rsquo;abc.*xyz&rsquo; in those files. (If you use <br>
glimpse -w &rsquo;abc.*xyz&rsquo;, then &rsquo;abcxyz&rsquo;
will not be found, because glimpse will think that abc and
xyz need to be matches to whole words.) The syntax of
regular expressions <br>
in glimpse is in general the same as that for agrep. The
union operation &lsquo;|&rsquo;, Kleene closure
&lsquo;*&rsquo;, and parentheses () are all supported.
Currently &rsquo;+&rsquo; is not supported. <br>
Regular expressions are currently limited to approximately
30 characters (generally excluding meta characters). Some
options (-d, -w, -t, -x, -D, -I, -S) do not currently <br>
work with regular expressions. The maximal number of errors
for regular expressions that use &rsquo;*&rsquo; or
&rsquo;|&rsquo; is 4. (See LIMITATIONS.)</p>

<p style="margin-top: 1em">structured queries <br>
Glimpse supports some form of structured queries using
Harvest&rsquo;s SOIF format. See STRUCTURED QUERIES below
for details.</p>

<p style="margin-top: 1em">EXAMPLES <br>
(Run &quot;glimpse &rsquo;^glimpse&rsquo; this-file&quot; to
get a list of all examples, some of which were given
earlier.)</p>

<p style="margin-top: 1em">glimpse -F
&rsquo;haystack.h$&rsquo; needle <br>
finds all needles in all haystack.h&rsquo;s files.</p>

<p style="margin-top: 1em">glimpse -2 -F html Anestesiology
<br>
outputs all occurrences of Anestesiology with two errors in
files with html somewhere in their full name.</p>

<p style="margin-top: 1em">glimpse -l -F &rsquo;.c$&rsquo;
variablename <br>
lists the names of all .c files that contain variablename
(the -l option lists file names rather than output the
matched lines).</p>

<p style="margin-top: 1em">glimpse -F
&rsquo;mail;1993&rsquo; &rsquo;windsurfing;Arizona&rsquo;
<br>
finds all lines containing windsurfing and Arizona in all
files having &lsquo;mail&rsquo; and &rsquo;1993&rsquo;
somewhere in their full name.</p>

<p style="margin-top: 1em">glimpse -F mail
&rsquo;t.j@#uk&rsquo; <br>
finds all mail addresses (search only files with mail
somewhere in their name) from the uk, where the login name
ends with t.j, where the . stands for any one character.
<br>
(This is very useful to find a login name of someone whose
middle name you don&rsquo;t know.)</p>

<p style="margin-top: 1em">glimpse -F mbox -h -G . &gt;
MBOX <br>
concatenates all files whose name matches &lsquo;mbox&rsquo;
into one big one.</p>

<p style="margin-top: 1em">SEARCHING IN COMPRESSED FILES
<br>
Glimpse includes an optional new compression program, called
cast, which allows glimpse (and agrep) to search the
compressed files without having to decompress them. The
search <br>
is actually significantly faster when the files are
compressed. However, we have not tested cast as thoroughly
as we would have liked, and a mishap in a compression
algorithm <br>
can cause loss of data, so we recommend at this point to use
cast very carefully. We do not support or maintain cast.
(Unless you specifically use cast, the default is to <br>
ignore it.)</p>

<p style="margin-top: 1em">GLIMPSEINDEX FILES <br>
All files used by glimpse are located at the directory(ies)
where the index(es) is (are) stored and have .glimpse_ as a
prefix. The first two files (.glimpse_exclude and <br>
.glimpse_include) are optionally supplied by the user. The
other files are built and read by glimpse.</p>

<p style="margin-top: 1em">.glimpse_exclude <br>
contains a list of files that glimpseindex is explicitly
told to ignore. In general, the syntax of
.glimpse_exclude/include is the same as that of agrep (or
any other <br>
grep). The lines in the .glimpse_exclude file are matched to
the file names, and if they match, the files are excluded.
Notice that agrep matches to parts of the string! <br>
e.g., agrep /ftp/pub will match /home/ftp/pub and
/ftp/pub/whatever. So, if you want to exclude /ftp/pub/core,
you just list it, as is, in the .glimpse_exclude file. If
<br>
you put &quot;/home/ftp/pub/cdrom&quot; in .glimpse_exclude,
every file name that matches that string will be excluded,
meaning all files below it. You can use ^ to indicate the
<br>
beginning of a file name, and $ to indicate the end of one,
and you can use * and ? in the usual way. For example
/ftp/*html will exclude /ftp/pub/foo.html, but will also
<br>
exclude /home/ftp/pub/html/whatever; if you want to exclude
files that start with /ftp and end with html use ^/ftp*html$
Notice that putting a * at the beginning or at <br>
the end is redundant (in fact, in this case glimpseindex
will remove the * when it does the indexing). No other meta
characters are allowed in .glimpse_exclude (e.g., <br>
don&rsquo;t use .* or # or |). Lines with * or ? must have
no more than 30 characters. Notice that, although the index
itself will not be indexed, the list of file names <br>
(.glimpse_filenames) will be indexed unless it is explicitly
listed in .glimpse_exclude.</p>

<p style="margin-top: 1em">.glimpse_filters <br>
See the description above for the -z option.</p>

<p style="margin-top: 1em">.glimpse_include <br>
contains a list of files that glimpseindex is explicitly
told to include in the index even though they may look like
non-text files. Symbolic links are followed by glimp&acirc;
<br>
seindex only if they are specifically included here. If a
file is in both .glimpse_exclude and .glimpse_include it
will be excluded.</p>

<p style="margin-top: 1em">.glimpse_filenames <br>
contains the list of all indexed file names, one per line.
This is an ASCII file that can also be used with agrep to
search for a file name leading to a fast find com&acirc;
<br>
mand. For example, <br>
glimpse &rsquo;count#.c$&rsquo; ~/.glimpse_filenames <br>
will output the names of all (indexed) .c files that have
&rsquo;count&rsquo; in their name (including anywhere on the
path from the index). Setting the following alias in the
.login <br>
file may be useful: <br>
alias findfile &rsquo;glimpse -h :1
~/.glimpse_filenames&rsquo;</p>

<p style="margin-top: 1em">.glimpse_index <br>
contains the index. The index consists of lines, each
starting with a word followed by a list of block numbers
(unless the -o or -b options are used, in which case each
<br>
word is followed by an offset into the file
.glimpse_partitions where all pointers are kept). The
block/file numbers are stored in binary form, so this is not
an ASCII <br>
file.</p>

<p style="margin-top: 1em">.glimpse_messages <br>
contains the output of the -w option (see above).</p>

<p style="margin-top: 1em">.glimpse_partitions <br>
contains the partition of the indexed space into blocks and,
when the index is built with the -o or -b options, some part
of the index. This file is used internally by <br>
glimpse and it is a non-ASCII file.</p>

<p style="margin-top: 1em">.glimpse_statistics <br>
contains some statistics about the makeup of the index.
Useful for some advanced applications and customization of
glimpse.</p>

<p style="margin-top: 1em">.glimpse_turbo <br>
An added data structure (used under glimpseindex -o or -b
only) that helps to speed up queries significantly for large
indexes. Its size is 0.25MB. Glimpse will work <br>
without it if needed.</p>

<p style="margin-top: 1em">STRUCTURED QUERIES <br>
Glimpse can search for Boolean combinations of
&quot;attribute=value&quot; terms by using the Harvest SOIF
parser library (in glimpse/libtemplate). To search this way,
the index must be <br>
made by using the -s option of glimpseindex (this can be
used in conjunction with other glimpseindex options). For
glimpse and glimpseindex to recognize &quot;structured&quot;
files, they <br>
must be in SOIF format. In this format, each value is
prefixed by an attribute-name with the size of the value (in
bytes) present in &quot;{}&quot; after the name of the
attribute. For <br>
example, The following lines are part of an SOIF file: <br>
type{17}: Directory-Listing <br>
md5{32}: 3858c73d68616df0ed58a44d306b12ba <br>
Any string can serve as an attribute name. Glimpse
&quot;pattern;type=Directory-Listing&quot; will search for
&quot;pattern&quot; only in files whose type is
&quot;Directory-Listing&quot;. The file itself <br>
is considered to be one &quot;object&quot; and its name/url
appears as the first attribute with an &quot;@&quot; prefix;
e.g., @FILE { http://xxx... } The scope of Boolean
operations changes from <br>
records (lines) to whole files when structured queries are
used in glimpse (since individual query terms can look at
different attributes and they may not be &quot;covered&quot;
by the <br>
record/line). Note that glimpse can only search for patterns
in the value parts of the SOIF file: there are some
attributes (like the TTL, MD5, etc.) that are interpreted by
<br>
Harvest&rsquo;s internal routines. See RFC 2655 for more
detailed information of the SOIF format.</p>

<p style="margin-top: 1em">REFERENCES <br>
1. U. Manber and S. Wu, &quot;GLIMPSE: A Tool to Search
Through Entire File Systems,&quot; Usenix Winter 1994
Technical Conference (best paper award), San Francisco
(January 1994), pp. <br>
23-32. Also, Technical Report #TR 93-34, Dept. of Computer
Science, University of Arizona, October 1993 (a postscript
file is available by anonymous ftp at <br>
ftp://webglimpse.net/pub/glimpse/TR93-34.ps).</p>

<p style="margin-top: 1em">2. S. Wu and U. Manber,
&quot;Fast Text Searching Allowing Errors,&quot;
Communications of the ACM 35 (October 1992), pp. 83-91.</p>

<p style="margin-top: 1em">SEE ALSO <br>
agrep(1), ed(1), ex(1), glimpseindex(1), glimpseserver(1),
grep(1), sh(1), csh(1).</p>

<p style="margin-top: 1em">LIMITATIONS <br>
The index of glimpse is word based. A pattern that contains
more than one word cannot be found in the index. The way
glimpse overcomes this weakness is by splitting any multi-
<br>
word pattern into its set of words and looking for all of
them in the index. For example, glimpse &rsquo;linear
programming&rsquo; will first consult the index to find all
files containing <br>
both linear and programming, and then apply agrep to find
the combined pattern. This is usually an effective solution,
but it can be slow for cases where both words are very <br>
common, but their combination is not.</p>

<p style="margin-top: 1em">As was mentioned in the section
on PATTERNS above, some characters serve as meta characters
for glimpse and need to be preceded by &rsquo;&acute; to
search for them. The most common exam&acirc; <br>
ples are the characters &rsquo;.&rsquo; (which stands for a
wild card), and &rsquo;*&rsquo; (the Kleene closure). So,
&quot;glimpse ab.de&quot; will match abcde, but
&quot;glimpse ab.de&quot; will not, and &quot;glimpse <br>
ab*de&quot; will not match ab*de, but &quot;glimpse
abe&quot; will. The meta character - is translated
automatically to a hypen unless it appears between [] (in
which case it denotes a <br>
range of characters).</p>

<p style="margin-top: 1em">The index of glimpse stores all
patterns in lower case. When glimpse searches the index it
first converts all patterns to lower case, finds the
appropriate files, and then <br>
searches the actual files using the original patterns. So,
for example, glimpse ABCXYZ will first find all files
containing abcxyz in any combination of lower and upper
cases, <br>
and then searches these files directly, so only the right
cases will be found. One problem with this approach is
discovering misspellings that are caused by wrong cases. For
<br>
example, glimpse -B abcXYZ will first search the index for
the best match to abcxyz (because the pattern is converted
to lower case); it will find that there are matches with no
<br>
errors, and will go to those files to search them directly,
this time with the original upper cases. If the closest
match is, say AbcXYZ, glimpse may miss it, because it
doesn&rsquo;t <br>
expect an error. Another problem is speed. If you search for
&quot;ATT&quot;, it will look at the index for
&quot;att&quot;. Unless you use -w to match the whole word,
glimpse may have to search <br>
all files containing, for example, &quot;Seattle&quot; which
has &quot;att&quot; in it.</p>

<p style="margin-top: 1em">There is no size limit for
simple patterns and simple patterns within Boolean
expressions. More complicated patterns, such as regular
expressions, are currently limited to <br>
approximately 30 characters. Lines are limited to 1024
characters. Records are limited to 48K, and may be truncated
if they are larger than that. The limit of record length
<br>
can be changed by modifying the parameter Max_record in
agrep.h.</p>

<p style="margin-top: 1em">Glimpseindex does not index
words of size &gt; 64.</p>

<p style="margin-top: 1em">BUGS <br>
In some rare cases, regular expressions using * or # may not
match correctly.</p>

<p style="margin-top: 1em">A query that contains no
alphanumeric characters is not recommended (unless glimpse
is used as agrep and the file names are provided). This is
an understatement.</p>

<p style="margin-top: 1em">The notion of &quot;match to the
whole word&quot; (the -w option) can be tricky sometimes.
For example, glimpse -w &rsquo;word$&rsquo; will not match
&rsquo;word&rsquo; appearing at the end of a line, because
<br>
the extra &rsquo;$&rsquo; makes the pattern more than just
one simple word. The same thing can happen with ^ and with
_. To be on the safe side, use the -w option only when the
patterns <br>
are actual words.</p>

<p style="margin-top: 1em">Please send bug reports or
comments to gvelez@webglimpse.net.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
Exit status is 0 if any matches are found, 1 if none, 2 for
syntax errors or inaccessible files.</p>

<p style="margin-top: 1em">AUTHORS <br>
Udi Manber and Burra Gopal, Department of Computer Science,
University of Arizona, and Sun Wu, the National Chung-Cheng
University, Taiwan. Now maintained by Golda Velez at <br>
Internet WorkShop (Email: gvelez@webglimpse.net)</p>

<p style="margin-top: 1em">November 10, 1997 GLIMPSE(1)</p>
<hr>
</body>
</html>
