<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>APTLY(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">APTLY(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">APTLY(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>aptly</b> - Debian repository management tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
Common command format:
<div class="Pp"></div>
<b>aptly</b> [<i>global options</i>...] <i>command</i> <i>subcommand</i>
  [<i>options</i>...] <i>arguments</i>
<div class="Pp"></div>
aptly has integrated help that matches contents of this manual page, to get
  help, prepend <b>help</b> to command name:
<div class="Pp"></div>
<b>aptly</b> <b>help</b> <b>mirror</b> <b>create</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
aptly is a tool to create partial and full mirrors of remote repositories,
  manage local repositories, filter them, merge, upgrade individual packages,
  take snapshots and publish them back as Debian repositories.
<div class="Pp"></div>
aptly&#x2019;s goal is to establish repeatability and controlled changes in a
  package-centric environment. aptly allows one to fix a set of packages in a
  repository, so that package installation and upgrade becomes deterministic. At
  the same time aptly allows one to perform controlled, fine-grained changes in
  repository contents to transition your package environment to new version.
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
aptly looks for configuration file first in <b>~/.aptly.conf</b> then in
  <b>/etc/aptly.conf</b> and, if no config file found, new one is created in
  home directory. If <b>-config=</b> flag is specified, aptly would use config
  file at specified location. Also aptly needs root directory for database,
  package and published repository storage. If not specified, directory defaults
  to <b>~/.aptly</b>, it will be created if missing.
<div class="Pp"></div>
Configuration file is stored in JSON format (default values shown below):
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
{
  &quot;rootDir&quot;: &quot;$HOME/.aptly&quot;,
  &quot;downloadConcurrency&quot;: 4,
  &quot;downloadSpeedLimit&quot;: 0,
  &quot;architectures&quot;: [],
  &quot;dependencyFollowSuggests&quot;: false,
  &quot;dependencyFollowRecommends&quot;: false
  &quot;dependencyFollowAllVariants&quot;: false,
  &quot;dependencyFollowSource&quot;: false,
  &quot;gpgDisableSign&quot;: false,
  &quot;gpgDisableVerify&quot;: false,
  &quot;downloadSourcePackages&quot;: false,
  &quot;ppaDistributorID&quot;: &quot;ubuntu&quot;,
  &quot;ppaCodename&quot;: &quot;&quot;,
  &quot;skipContentsPublishing&quot;: false,
  &quot;S3PublishEndpoints&quot;: {
    &quot;test&quot;: {
      &quot;region&quot;: &quot;us-east-1&quot;,
      &quot;bucket&quot;: &quot;repo&quot;,
      &quot;endpoint&quot;: &quot;&quot;,
      &quot;awsAccessKeyID&quot;: &quot;&quot;,
      &quot;awsSecretAccessKey&quot;: &quot;&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;acl&quot;: &quot;public-read&quot;,
      &quot;storageClass&quot;: &quot;&quot;,
      &quot;encryptionMethod&quot;: &quot;&quot;,
      &quot;plusWorkaround&quot;: false,
      &quot;disableMultiDel&quot;: false,
      &quot;forceSigV2&quot;: false,
      &quot;debug&quot;: false
    }
  },
  &quot;SwiftPublishEndpoints&quot;: {
    &quot;test&quot;: {
      &quot;container&quot;: &quot;repo&quot;,
      &quot;osname&quot;: &quot;&quot;,
      &quot;password&quot;: &quot;&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;authurl&quot;: &quot;&quot;,
      &quot;tenant&quot;: &quot;&quot;,
      &quot;tenantid&quot;: &quot;&quot;
    }
  }
}
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag"><b>rootDir</b></dt>
  <dd class="It-tag">is root of directory storage to store database
      (<b>rootDir</b>/db), downloaded packages ( <b>rootDir</b>/pool) and
      published repositories ( <b>rootDir</b>/public)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>downloadConcurrency</b></dt>
  <dd class="It-tag">is a number of parallel download threads to use when
      downloading packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>downloadSpeedLimit</b></dt>
  <dd class="It-tag">limit in kbytes/sec on download speed while mirroring
      remote repositieis</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>architectures</b></dt>
  <dd class="It-tag">is a list of architectures to process; if left empty
      defaults to all available architectures; could be overridden with option
      <b>-architectures</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dependencyFollowSuggests</b></dt>
  <dd class="It-tag">follow contents of <b>Suggests:</b> field when processing
      dependencies for the package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dependencyFollowRecommends</b></dt>
  <dd class="It-tag">follow contents of <b>Recommends:</b> field when processing
      dependencies for the package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dependencyFollowAllVariants</b></dt>
  <dd class="It-tag">when dependency looks like <b>package-a | package-b</b>,
      follow both variants always</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dependencyFollowSource</b></dt>
  <dd class="It-tag">follow dependency from binary package to source
    package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gpgDisableSign</b></dt>
  <dd class="It-tag">don&#x2019;t sign published repositories with gpg(1), also
      can be disabled on per-repo basis using <b>-skip-signing</b> flag when
      publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gpgDisableVerify</b></dt>
  <dd class="It-tag">don&#x2019;t verify remote mirrors with gpg(1), also can be
      disabled on per-mirror basis using <b>-ignore-signatures</b> flag when
      creating and updating mirrors</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>downloadSourcePackages</b></dt>
  <dd class="It-tag">if enabled, all mirrors created would have flag set to
      download source packages; this setting could be controlled on per-mirror
      basis with <b>-with-sources</b> flag</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ppaDistributorID</b>, <b>ppaCodename</b></dt>
  <dd class="It-tag">specifies paramaters for short PPA url expansion, if left
      blank they default to output of <b>lsb_release</b> command</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>S3PublishEndpoints</b></dt>
  <dd class="It-tag">configuration of Amazon S3 publishing endpoints (see
    below)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SwiftPublishEndpoints</b></dt>
  <dd class="It-tag">configuration of OpenStack Swift publishing endpoints (see
      below)</dd>
</dl>
<h1 class="Sh" title="Sh" id="S3_PUBLISHING_ENDPOINTS"><a class="selflink" href="#S3_PUBLISHING_ENDPOINTS">S3
  PUBLISHING ENDPOINTS</a></h1>
aptly could be configured to publish repository directly to Amazon S3 (or
  S3-compatible cloud storage). First, publishing endpoints should be described
  in aptly configuration file. Each endpoint has name and associated settings:
<dl class="Bl-tag">
  <dt class="It-tag"><b>region</b></dt>
  <dd class="It-tag">Amazon region for S3 bucket (e.g. <b>us-east-1</b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bucket</b></dt>
  <dd class="It-tag">bucket name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>endpoint</b></dt>
  <dd class="It-tag">(optional) when using S3-compatible cloud storage, specify
      hostname of service endpoint here, region is ignored if endpoint is set
      (set region to some human-readable name) (should be left blank for real
      Amazon S3)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prefix</b></dt>
  <dd class="It-tag">(optional) do publishing under specified prefix in the
      bucket, defaults to no prefix (bucket root)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>acl</b></dt>
  <dd class="It-tag">(optional) assign ACL to published files (one of the canned
      ACLs in Amazon terminology). Useful values: <b>private</b> (default) or
      <b>public-read</b> (public repository). Public repositories could be
      consumed by <b>apt</b> using HTTP endpoint (Amazon bucket should be
      configured for &quot;website hosting&quot;), for private repositories
      special apt S3 transport is required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>awsAccessKeyID</b>, <b>awsSecretAccessKey</b></dt>
  <dd class="It-tag">(optional) Amazon credentials to access S3 bucket. If not
      supplied, environment variables <b>AWS_ACCESS_KEY_ID</b> and
      <b>AWS_SECRET_ACCESS_KEY</b> are used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>storageClass</b></dt>
  <dd class="It-tag">(optional) Amazon S3 storage class, defaults to
      <b>STANDARD</b>. Other values available: <b>REDUCED_REDUNDANCY</b> (lower
      price, lower redundancy)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>encryptionMethod</b></dt>
  <dd class="It-tag">(optional) server-side encryption method, defaults to none.
      Currently the only available encryption method is <b>AES256</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>plusWorkaround</b></dt>
  <dd class="It-tag">(optional) workaround misbehavior in apt and Amazon S3 for
      files with <b>+</b> in filename by creating two copies of package files
      with <b>+</b> in filename: one original and another one with spaces
      instead of plus signs With <b>plusWorkaround</b> enabled, package files
      with plus sign would be stored twice. aptly might not cleanup files with
      spaces when published repository is dropped or updated (switched) to new
      version of repository (snapshot)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disableMultiDel</b></dt>
  <dd class="It-tag">(optional) for S3-compatible cloud storages which do not
      support <b>MultiDel</b> S3 API, enable this setting (file deletion would
      be slower with this setting enabled)</dd>
</dl>
<div class="Pp"></div>
In order to publish to S3, specify endpoint as <b>s3:endpoint-name:</b> before
  publishing prefix on the command line, e.g.:
<div class="Pp"></div>
<b>aptly publish snapshot wheezy-main s3:test:</b>
<h1 class="Sh" title="Sh" id="OPENSTACK_SWIFT_PUBLISHING_ENDPOINTS"><a class="selflink" href="#OPENSTACK_SWIFT_PUBLISHING_ENDPOINTS">OPENSTACK
  SWIFT PUBLISHING ENDPOINTS</a></h1>
aptly could be configured to publish repository directly to OpenStack Swift.
  First, publishing endpoints should be described in aptly configuration file.
  Each endpoint has name and associated settings:
<dl class="Bl-tag">
  <dt class="It-tag"><b>container</b></dt>
  <dd class="It-tag">container name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prefix</b></dt>
  <dd class="It-tag">(optional) do publishing under specified prefix in the
      container, defaults to no prefix (container root)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>osname</b>, <b>password</b></dt>
  <dd class="It-tag">(optional) OpenStack credentials to access Keystone. If not
      supplied, environment variables <b>OS_USERNAME</b> and <b>OS_PASSWORD</b>
      are used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tenant</b>, <b>tenantid</b></dt>
  <dd class="It-tag">(optional) OpenStack tenant name and id (in order to use v2
      authentication).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>authurl</b></dt>
  <dd class="It-tag">(optional) the full url of Keystone server (including port,
      and version). example <b>http://identity.example.com:5000/v2.0</b></dd>
</dl>
<div class="Pp"></div>
In order to publish to Swift, specify endpoint as <b>swift:endpoint-name:</b>
  before publishing prefix on the command line, e.g.:
<div class="Pp"></div>
<b>aptly publish snapshot jessie-main swift:test:</b>
<h1 class="Sh" title="Sh" id="PACKAGE_QUERY"><a class="selflink" href="#PACKAGE_QUERY">PACKAGE
  QUERY</a></h1>
Some commands accept package queries to identify list of packages to process.
  Package query syntax almost matches <b>reprepro</b> query language. Query
  consists of the following simple terms:
<dl class="Bl-tag">
  <dt class="It-tag">direct package reference</dt>
  <dd class="It-tag">reference to exaclty one package. Format is identical to
      the way aptly lists packages in show commands with <b>-with-packages</b>
      flag: <b>name_version_arch</b>, e.g.:
      <b>libmysqlclient18_5.5.35-rel33.0-611.squeeze_amd64</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">dependency condition</dt>
  <dd class="It-tag">syntax follows Debian dependency specification:
      package_name followed by optional version specification and architecture
      limit, e.g: <b>mysql-client (&gt;= 3.6)</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">query against package fields</dt>
  <dd class="It-tag">syntax is the same as for dependency conditions, but
      instead of package name field name is used, e.g: <b>Priority
      (optional)</b>.</dd>
</dl>
<div class="Pp"></div>
Supported fields:
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">all field names from Debian package control files are
      supported except for <b>Filename</b>, <b>MD5sum</b>, <b>SHA1</b>,
      <b>SHA256</b>, <b>Size</b>, <b>Files</b>, <b>Checksums-SHA1</b>,
      <b>Checksums-SHA256</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag"><b>$Source</b> is a name of source package (for binary
      packages)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag"><b>$SourceVersion</b> is a version of source package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag"><b>$Architecture</b> is <b>Architecture</b> for binary
      packages and <b>source</b> for source packages, when matching with equal
      (<b>=</b>) operator, package with <b>any</b> architecture matches all
      architectures but <b>source</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag"><b>$Version</b> has the same value as <b>Version</b>, but
      comparison operators use Debian version precedence rules</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag"><b>$PackageType</b> is <b>deb</b> for binary packages and
      <b>source</b> for source packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Operators:
<dl class="Bl-tag">
  <dt class="It-tag"><b>=</b></dt>
  <dd class="It-tag">strict match, default operator is no operator is given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&gt;=</b>, <b>&lt;=</b>, <b>=</b>, <b>&gt;&gt;</b>
    (strictly greater), <b>&lt;&lt;</b> (strictly less)</dt>
  <dd class="It-tag">lexicographical comparison for all fields and special rules
      when comparing package versions</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%</b></dt>
  <dd class="It-tag">pattern matching, like shell patterns, supported special
      symbols are: <b>[^]?*</b>, e.g.: <b>$Version (% 3.5-*)</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~</b></dt>
  <dd class="It-tag">regular expression matching, e.g.: <b>Name (~
    .*-dev)</b></dd>
</dl>
<div class="Pp"></div>
Simple terms could be combined into more complex queries using operators
  <b>,</b> (and), <b>|</b> (or) and <b>!</b> (not), parentheses <b>()</b> are
  used to change operator precedence. Match value could be enclosed in single (
  <b>&#x2019;</b>) or double (<b>&quot;</b>) quotes if required to resolve
  ambiguity, quotes inside quoted string should escaped with slash ( <b>\</b>).
<div class="Pp"></div>
Examples:
<dl class="Bl-tag">
  <dt class="It-tag"><b>mysql-client</b></dt>
  <dd class="It-tag">matches package mysql-client of any version and
      architecture (including source), also matches packages that
      <b>Provide:</b> <b>mysql-client</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mysql-client (&gt;= 3.6)</b></dt>
  <dd class="It-tag">matches package mysql-client with version greater or equal
      to 3.6. Valid operators for version are: <b>&gt;=</b>, <b>&lt;=</b>,
      <b>=</b>, <b>&gt;&gt;</b> (strictly greater), <b>&lt;&lt;</b> (strictly
      less).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mysql-client {i386}</b></dt>
  <dd class="It-tag">matches package <b>mysql-client</b> on architecture
      <b>i386</b>, architecture <b>all</b> matches all architectures but
    source.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mysql-client (&gt;= 3.6) {i386}</b></dt>
  <dd class="It-tag">version and architecture conditions combined.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>libmysqlclient18_5.5.35-rel33.0-611.squeeze_amd64</b></dt>
  <dd class="It-tag">direct package reference.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$Source (nginx)</b></dt>
  <dd class="It-tag">all binary packages with <b>nginx</b> as source
    package.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!Name (~ .*-dev), mail-transport, $Version (&gt;=
    3.5)</b></dt>
  <dd class="It-tag">matches all packages that provide <b>mail-transport</b>
      with name that has no suffix <b>-dev</b> and with version greater or equal
      to <b>3.5</b>.</dd>
</dl>
<div class="Pp"></div>
When specified on command line, query may have to be quoted according to shell
  rules, so that it stays single argument:
<div class="Pp"></div>
<b>aptly repo import percona stable &#x2019;mysql-client (&gt;= 3.6)&#x2019;</b>
<h1 class="Sh" title="Sh" id="PACKAGE_DISPLAY_FORMAT"><a class="selflink" href="#PACKAGE_DISPLAY_FORMAT">PACKAGE
  DISPLAY FORMAT</a></h1>
Some aptly commands ( <b>aptly mirror search</b>, <b>aptly package search</b>,
  ...) support <b>-format</b> flag which allows to customize how search results
  are printed. Golang templates are used to specify display format, with all
  package stanza fields available to template. In addition to package stanza
  fields aptly provides:
<dl class="Bl-tag">
  <dt class="It-tag"><b>Key</b></dt>
  <dd class="It-tag">internal aptly package ID, unique for all packages in aptly
      (combination of <b>ShortKey</b> and <b>FilesHash</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FilesHash</b></dt>
  <dd class="It-tag">hash that includes MD5 of all packages files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ShortKey</b></dt>
  <dd class="It-tag">package ID, which is unique in single list (mirror, repo,
      snapshot, ...), but not unique in whole aptly package collection.</dd>
</dl>
<div class="Pp"></div>
For example, default aptly display format could be presented with the following
  template: <b>{{.Package}}_{{.Version}}_{{.Architecture}}</b>. To display
  package name with dependencies: <b>{{.Package}} | {{.Depends}}</b>. More
  information on Golang template syntax: http://godoc.org/text/template
<h1 class="Sh" title="Sh" id="GLOBAL_OPTIONS"><a class="selflink" href="#GLOBAL_OPTIONS">GLOBAL
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>architectures</b>=</dt>
  <dd class="It-tag">list of architectures to consider during (comma-separated),
      default to all available</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>config</b>=</dt>
  <dd class="It-tag">location of configuration file (default locations are
      /etc/aptly.conf, ~/.aptly.conf)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dep-follow-all-variants</b>=false</dt>
  <dd class="It-tag">when processing dependencies, follow a &amp; b if
      dependency is &#x2019;a|b&#x2019;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dep-follow-recommends</b>=false</dt>
  <dd class="It-tag">when processing dependencies, follow Recommends</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dep-follow-source</b>=false</dt>
  <dd class="It-tag">when processing dependencies, follow from binary to Source
      packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dep-follow-suggests</b>=false</dt>
  <dd class="It-tag">when processing dependencies, follow Suggests</dd>
</dl>
<h1 class="Sh" title="Sh" id="CREATE_NEW_MIRROR"><a class="selflink" href="#CREATE_NEW_MIRROR">CREATE
  NEW MIRROR</a></h1>
<b>aptly</b> <b>mirror</b> <b>create</b> <i>name</i> <i>archive url</i>
  <i>distribution</i> [ <i>component1</i> ...]
<div class="Pp"></div>
Creates mirror <i>name</i> of remote repository, aptly supports both regular and
  flat Debian repositories exported via HTTP and FTP. aptly would try download
  Release file from remote repository and verify its&#x2019; signature. Command
  line format resembles apt utlitily sources.list(5).
<div class="Pp"></div>
PPA urls could specified in short format:
<div class="Pp"></div>
$ aptly mirror create <i>name</i> ppa:<i>user</i>/<i>project</i>
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror create wheezy-main http://mirror.yandex.ru/debian/ wheezy main
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>filter</b>=</dt>
  <dd class="It-tag">filter packages in mirror</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>filter-with-deps</b>=false</dt>
  <dd class="It-tag">when filtering, include dependencies of matching packages
      as well</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-components</b>=false</dt>
  <dd class="It-tag">(only with component list) skip check that requested
      components are listed in Release file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>ignore-signatures</b>=false</dt>
  <dd class="It-tag">disable verification of Release file signatures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">gpg keyring to use when verifying Release file (could be
      specified multiple times)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-sources</b>=false</dt>
  <dd class="It-tag">download source packages in addition to binary
    packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-udebs</b>=false</dt>
  <dd class="It-tag">download .udeb packages (Debian installer support)</dd>
</dl>
<h1 class="Sh" title="Sh" id="LIST_MIRRORS"><a class="selflink" href="#LIST_MIRRORS">LIST
  MIRRORS</a></h1>
<b>aptly</b> <b>mirror</b> <b>list</b>
<div class="Pp"></div>
List shows full list of remote repository mirrors.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror list
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>raw</b>=false</dt>
  <dd class="It-tag">display list in machine-readable format</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOW_DETAILS_ABOUT_MIRROR"><a class="selflink" href="#SHOW_DETAILS_ABOUT_MIRROR">SHOW
  DETAILS ABOUT MIRROR</a></h1>
<b>aptly</b> <b>mirror</b> <b>show</b> <i>name</i>
<div class="Pp"></div>
Shows detailed information about the mirror.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror show wheezy-main
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-packages</b>=false</dt>
  <dd class="It-tag">show detailed list of packages and versions stored in the
      mirror</dd>
</dl>
<h1 class="Sh" title="Sh" id="DELETE_MIRROR"><a class="selflink" href="#DELETE_MIRROR">DELETE
  MIRROR</a></h1>
<b>aptly</b> <b>mirror</b> <b>drop</b> <i>name</i>
<div class="Pp"></div>
Drop deletes information about remote repository mirror <i>name</i>. Package
  data is not deleted (since it could still be used by other mirrors or
  snapshots). If mirror is used as source to create a snapshot, aptly would
  refuse to delete such mirror, use flag -force to override.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror drop wheezy-main
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force</b>=false</dt>
  <dd class="It-tag">force mirror deletion even if used by snapshots</dd>
</dl>
<h1 class="Sh" title="Sh" id="UPDATE_MIRROR"><a class="selflink" href="#UPDATE_MIRROR">UPDATE
  MIRROR</a></h1>
<b>aptly</b> <b>mirror</b> <b>update</b> <i>name</i>
<div class="Pp"></div>
Updates remote mirror (downloads package files and meta information). When
  mirror is created, this command should be run for the first time to fetch
  mirror contents. This command can be run multiple times to get updated
  repository contents. If interrupted, command can be safely restarted.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror update wheezy-main
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>download-limit</b>=0</dt>
  <dd class="It-tag">limit download speed (kbytes/sec)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force</b>=false</dt>
  <dd class="It-tag">force update mirror even if it is locked by another
    process</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>ignore-checksums</b>=false</dt>
  <dd class="It-tag">ignore checksum mismatches while downloading package files
      and metadata</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>ignore-signatures</b>=false</dt>
  <dd class="It-tag">disable verification of Release file signatures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">gpg keyring to use when verifying Release file (could be
      specified multiple times)</dd>
</dl>
<h1 class="Sh" title="Sh" id="RENAMES_MIRROR"><a class="selflink" href="#RENAMES_MIRROR">RENAMES
  MIRROR</a></h1>
<b>aptly</b> <b>mirror</b> <b>rename</b> <i>old-name</i> <i>new-name</i>
<div class="Pp"></div>
Command changes name of the mirror.Mirror name should be unique.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror rename wheezy-min wheezy-main
<h1 class="Sh" title="Sh" id="EDIT_MIRROR_SETTINGS"><a class="selflink" href="#EDIT_MIRROR_SETTINGS">EDIT
  MIRROR SETTINGS</a></h1>
<b>aptly</b> <b>mirror</b> <b>edit</b> <i>name</i>
<div class="Pp"></div>
Command edit allows one to change settings of mirror: filters, list of
  architectures.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly mirror edit -filter=nginx -filter-with-deps some-mirror
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>filter</b>=</dt>
  <dd class="It-tag">filter packages in mirror</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>filter-with-deps</b>=false</dt>
  <dd class="It-tag">when filtering, include dependencies of matching packages
      as well</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-sources</b>=false</dt>
  <dd class="It-tag">download source packages in addition to binary
    packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-udebs</b>=false</dt>
  <dd class="It-tag">download .udeb packages (Debian installer support)</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEARCH_MIRROR_FOR_PACKAGES_MATCHING_QUERY"><a class="selflink" href="#SEARCH_MIRROR_FOR_PACKAGES_MATCHING_QUERY">SEARCH
  MIRROR FOR PACKAGES MATCHING QUERY</a></h1>
<b>aptly</b> <b>mirror</b> <b>search</b> <i>name</i> <i>package-query</i>
<div class="Pp"></div>
Command search displays list of packages in mirror that match package query
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly mirror search wheezy-main &#x2019;$Architecture (i386), Name (% *-dev)&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>format</b>=</dt>
  <dd class="It-tag">custom format for result printing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">include dependencies into search results</dd>
</dl>
<h1 class="Sh" title="Sh" id="ADD_PACKAGES_TO_LOCAL_REPOSITORY"><a class="selflink" href="#ADD_PACKAGES_TO_LOCAL_REPOSITORY">ADD
  PACKAGES TO LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>add</b> <i>name</i>
<div class="Pp"></div>
Command adds packages to local repository from .deb, .udeb (binary packages) and
  .dsc (source packages) files. When importing from directory aptly would do
  recursive scan looking for all files matching <i>.[u]deb or</i>.dsc patterns.
  Every file discovered would be analyzed to extract metadata, package would
  then be created and added to the database. Files would be imported to internal
  package pool. For source packages, all required files are added automatically
  as well. Extra files for source package should be in the same directory as
  *.dsc file.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo add testing myapp-0.1.2.deb incoming/
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-replace</b>=false</dt>
  <dd class="It-tag">when adding package that conflicts with existing package,
      remove existing package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>remove-files</b>=false</dt>
  <dd class="It-tag">remove files that have been imported successfully into
      repository</dd>
</dl>
<h1 class="Sh" title="Sh" id="COPY_PACKAGES_BETWEEN_LOCAL_REPOSITORIES"><a class="selflink" href="#COPY_PACKAGES_BETWEEN_LOCAL_REPOSITORIES">COPY
  PACKAGES BETWEEN LOCAL REPOSITORIES</a></h1>
<b>aptly</b> <b>repo</b> <b>copy</b> <i>src-name</i> <i>dst-name</i>
  <i>package-query</i> <b>...</b>
<div class="Pp"></div>
Command copy copies packages matching <i>package-query</i> from local repo
  <i>src-name</i> to local repo <i>dst-name</i>.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo copy testing stable &#x2019;myapp (=0.1.12)&#x2019;
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t copy, just show what would be copied</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">follow dependencies when processing package-spec</dd>
</dl>
<h1 class="Sh" title="Sh" id="CREATE_LOCAL_REPOSITORY"><a class="selflink" href="#CREATE_LOCAL_REPOSITORY">CREATE
  LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>create</b> <i>name</i>
<div class="Pp"></div>
Create local package repository. Repository would be empty when created,
  packages could be added from files, copied or moved from another local
  repository or imported from the mirror.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo create testing
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>comment</b>=</dt>
  <dd class="It-tag">any text that would be used to described local
    repository</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>component</b>=main</dt>
  <dd class="It-tag">default component when publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>distribution</b>=</dt>
  <dd class="It-tag">default distribution when publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>uploaders-file</b>=</dt>
  <dd class="It-tag">uploaders.json to be used when including .changes into this
      repository</dd>
</dl>
<h1 class="Sh" title="Sh" id="DELETE_LOCAL_REPOSITORY"><a class="selflink" href="#DELETE_LOCAL_REPOSITORY">DELETE
  LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>drop</b> <i>name</i>
<div class="Pp"></div>
Drop information about deletions from local repo. Package data is not deleted
  (since it could be still used by other mirrors or snapshots).
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo drop local-repo
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force</b>=false</dt>
  <dd class="It-tag">force local repo deletion even if used by snapshots</dd>
</dl>
<h1 class="Sh" title="Sh" id="EDIT_PROPERTIES_OF_LOCAL_REPOSITORY"><a class="selflink" href="#EDIT_PROPERTIES_OF_LOCAL_REPOSITORY">EDIT
  PROPERTIES OF LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>edit</b> <i>name</i>
<div class="Pp"></div>
Command edit allows one to change metadata of local repository: comment, default
  distribution and component.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo edit -distribution=wheezy testing
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>comment</b>=</dt>
  <dd class="It-tag">any text that would be used to described local
    repository</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>component</b>=</dt>
  <dd class="It-tag">default component when publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>distribution</b>=</dt>
  <dd class="It-tag">default distribution when publishing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>uploaders-file</b>=</dt>
  <dd class="It-tag">uploaders.json to be used when including .changes into this
      repository</dd>
</dl>
<h1 class="Sh" title="Sh" id="IMPORT_PACKAGES_FROM_MIRROR_TO_LOCAL_REPOSITORY"><a class="selflink" href="#IMPORT_PACKAGES_FROM_MIRROR_TO_LOCAL_REPOSITORY">IMPORT
  PACKAGES FROM MIRROR TO LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>import</b> <i>src-mirror</i> <i>dst-repo</i>
  <i>package-query</i> <b>...</b>
<div class="Pp"></div>
Command import looks up packages matching <i>package-query</i> in mirror
  <i>src-mirror</i> and copies them to local repo <i>dst-repo</i>.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo import wheezy-main testing nginx
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t import, just show what would be imported</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">follow dependencies when processing package-spec</dd>
</dl>
<h1 class="Sh" title="Sh" id="LIST_LOCAL_REPOSITORIES"><a class="selflink" href="#LIST_LOCAL_REPOSITORIES">LIST
  LOCAL REPOSITORIES</a></h1>
<b>aptly</b> <b>repo</b> <b>list</b>
<div class="Pp"></div>
List command shows full list of local package repositories.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo list
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>raw</b>=false</dt>
  <dd class="It-tag">display list in machine-readable format</dd>
</dl>
<h1 class="Sh" title="Sh" id="MOVE_PACKAGES_BETWEEN_LOCAL_REPOSITORIES"><a class="selflink" href="#MOVE_PACKAGES_BETWEEN_LOCAL_REPOSITORIES">MOVE
  PACKAGES BETWEEN LOCAL REPOSITORIES</a></h1>
<b>aptly</b> <b>repo</b> <b>move</b> <i>src-name</i> <i>dst-name</i>
  <i>package-query</i> <b>...</b>
<div class="Pp"></div>
Command move moves packages matching <i>package-query</i> from local repo
  <i>src-name</i> to local repo <i>dst-name</i>.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo move testing stable &#x2019;myapp (=0.1.12)&#x2019;
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t move, just show what would be moved</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">follow dependencies when processing package-spec</dd>
</dl>
<h1 class="Sh" title="Sh" id="REMOVE_PACKAGES_FROM_LOCAL_REPOSITORY"><a class="selflink" href="#REMOVE_PACKAGES_FROM_LOCAL_REPOSITORY">REMOVE
  PACKAGES FROM LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>remove</b> <i>name</i> <i>package-query</i>
  <b>...</b>
<div class="Pp"></div>
Commands removes packages matching <i>package-query</i> from local repository
  <i>name</i>. If removed packages are not referenced by other repos or
  snapshots, they can be removed completely (including files) by running
  &#x2019;aptly db cleanup&#x2019;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo remove testing &#x2019;myapp (=0.1.12)&#x2019;
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t remove, just show what would be removed</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOW_DETAILS_ABOUT_LOCAL_REPOSITORY"><a class="selflink" href="#SHOW_DETAILS_ABOUT_LOCAL_REPOSITORY">SHOW
  DETAILS ABOUT LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>show</b> <i>name</i>
<div class="Pp"></div>
Show command shows full information about local package repository.
<div class="Pp"></div>
ex: $ aptly repo show testing
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-packages</b>=false</dt>
  <dd class="It-tag">show list of packages</dd>
</dl>
<h1 class="Sh" title="Sh" id="RENAMES_LOCAL_REPOSITORY"><a class="selflink" href="#RENAMES_LOCAL_REPOSITORY">RENAMES
  LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>repo</b> <b>rename</b> <i>old-name</i> <i>new-name</i>
<div class="Pp"></div>
Command changes name of the local repo. Local repo name should be unique.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo rename wheezy-min wheezy-main
<h1 class="Sh" title="Sh" id="SEARCH_REPO_FOR_PACKAGES_MATCHING_QUERY"><a class="selflink" href="#SEARCH_REPO_FOR_PACKAGES_MATCHING_QUERY">SEARCH
  REPO FOR PACKAGES MATCHING QUERY</a></h1>
<b>aptly</b> <b>repo</b> <b>search</b> <i>name</i> <i>package-query</i>
<div class="Pp"></div>
Command search displays list of packages in local repository that match package
  query
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly repo search my-software &#x2019;$Architecture (i386), Name (% *-dev)&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>format</b>=</dt>
  <dd class="It-tag">custom format for result printing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">include dependencies into search results</dd>
</dl>
<h1 class="Sh" title="Sh" id="ADD_PACKAGES_TO_LOCAL_REPOSITORIES_BASED_ON_.CHANGES_FILES"><a class="selflink" href="#ADD_PACKAGES_TO_LOCAL_REPOSITORIES_BASED_ON_.CHANGES_FILES">ADD
  PACKAGES TO LOCAL REPOSITORIES BASED ON .CHANGES FILES</a></h1>
<b>aptly</b> <b>repo</b> <b>include</b> &lt;file.changes&gt;|<i>directory</i>
  <b>...</b>
<div class="Pp"></div>
Command include looks for .changes files in list of arguments or specified
  directories. Each .changes file is verified, parsed, referenced files are put
  into separate temporary directory and added into local repository.
  Successfully imported files are removed by default.
<div class="Pp"></div>
Additionally uploads could be restricted with &lt;uploaders.json&gt; file. Rules
  in this file control uploads based on GPG key ID of .changes file signature
  and queries on .changes file fields.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly repo include -repo=foo-release incoming/
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>accept-unsigned</b>=false</dt>
  <dd class="It-tag">accept unsigned .changes files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-replace</b>=false</dt>
  <dd class="It-tag">when adding package that conflicts with existing package,
      remove existing package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>ignore-signatures</b>=false</dt>
  <dd class="It-tag">disable verification of .changes file signature</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">gpg keyring to use when verifying Release file (could be
      specified multiple times)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>no-remove-files</b>=false</dt>
  <dd class="It-tag">don&#x2019;t remove files that have been imported
      successfully into repository</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>repo</b>={{.Distribution}}</dt>
  <dd class="It-tag">which repo should files go to, defaults to Distribution
      field of .changes file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>uploaders-file</b>=</dt>
  <dd class="It-tag">path to uploaders.json file</dd>
</dl>
<h1 class="Sh" title="Sh" id="CREATES_SNAPSHOT_OF_MIRROR_(LOCAL_REPOSITORY)_CONTENTS"><a class="selflink" href="#CREATES_SNAPSHOT_OF_MIRROR_(LOCAL_REPOSITORY)_CONTENTS">CREATES
  SNAPSHOT OF MIRROR (LOCAL REPOSITORY) CONTENTS</a></h1>
<b>aptly</b> <b>snapshot</b> <b>create</b> <i>name</i> <b>from</b> <b>mirror</b>
  <i>mirror-name</i> <b>|</b> <b>from</b> <b>repo</b> <i>repo-name</i> <b>|</b>
  <b>empty</b>
<div class="Pp"></div>
Command create <i>name</i> from mirror makes persistent immutable snapshot of
  remote repository mirror. Snapshot could be published or further modified
  using merge, pull and other aptly features.
<div class="Pp"></div>
Command create <i>name</i> from repo makes persistent immutable snapshot of
  local repository. Snapshot could be processed as mirror snapshots, and mixed
  with snapshots of remote mirrors.
<div class="Pp"></div>
Command create <i>name</i> empty creates empty snapshot that could be used as a
  basis for snapshot pull operations, for example. As snapshots are immutable,
  creating one empty snapshot should be enough.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly snapshot create wheezy-main-today from mirror wheezy-main
<h1 class="Sh" title="Sh" id="LIST_SNAPSHOTS"><a class="selflink" href="#LIST_SNAPSHOTS">LIST
  SNAPSHOTS</a></h1>
<b>aptly</b> <b>snapshot</b> <b>list</b>
<div class="Pp"></div>
Command list shows full list of snapshots created.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly snapshot list
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>raw</b>=false</dt>
  <dd class="It-tag">display list in machine-readable format</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>sort</b>=name</dt>
  <dd class="It-tag">display list in &#x2019;name&#x2019; or creation
      &#x2019;time&#x2019; order</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOWS_DETAILS_ABOUT_SNAPSHOT"><a class="selflink" href="#SHOWS_DETAILS_ABOUT_SNAPSHOT">SHOWS
  DETAILS ABOUT SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>show</b> <i>name</i>
<div class="Pp"></div>
Command show displays full information about a snapshot.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot show wheezy-main
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-packages</b>=false</dt>
  <dd class="It-tag">show list of packages</dd>
</dl>
<h1 class="Sh" title="Sh" id="VERIFY_DEPENDENCIES_IN_SNAPSHOT"><a class="selflink" href="#VERIFY_DEPENDENCIES_IN_SNAPSHOT">VERIFY
  DEPENDENCIES IN SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>verify</b> <i>name</i> [<i>source</i> ...]
<div class="Pp"></div>
Verify does dependency resolution in snapshot <i>name</i>, possibly using
  additional snapshots <i>source</i> as dependency sources. All unsatisfied
  dependencies are printed.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot verify wheezy-main wheezy-contrib wheezy-non-free
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="PULL_PACKAGES_FROM_ANOTHER_SNAPSHOT"><a class="selflink" href="#PULL_PACKAGES_FROM_ANOTHER_SNAPSHOT">PULL
  PACKAGES FROM ANOTHER SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>pull</b> <i>name</i> <i>source</i>
  <i>destination</i> <i>package-query</i> <b>...</b>
<div class="Pp"></div>
Command pull pulls new packages along with its&#x2019; dependencies to snapshot
  <i>name</i> from snapshot <i>source</i>. Pull can upgrade package version in
  <i>name</i> with versions from <i>source</i> following dependencies. New
  snapshot <i>destination</i> is created as a result of this process. Packages
  could be specified simply as &#x2019;package-name&#x2019; or as package
  queries.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot pull wheezy-main wheezy-backports wheezy-new-xorg xorg-server-server
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>all-matches</b>=false</dt>
  <dd class="It-tag">pull all the packages that satisfy the dependency version
      requirements</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t create destination snapshot, just show what
      would be pulled</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>no-deps</b>=false</dt>
  <dd class="It-tag">don&#x2019;t process dependencies, just pull listed
      packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>no-remove</b>=false</dt>
  <dd class="It-tag">don&#x2019;t remove other package versions when pulling
      package</dd>
</dl>
<h1 class="Sh" title="Sh" id="DIFFERENCE_BETWEEN_TWO_SNAPSHOTS"><a class="selflink" href="#DIFFERENCE_BETWEEN_TWO_SNAPSHOTS">DIFFERENCE
  BETWEEN TWO SNAPSHOTS</a></h1>
<b>aptly</b> <b>snapshot</b> <b>diff</b> <i>name-a</i> <i>name-b</i>
<div class="Pp"></div>
Displays difference in packages between two snapshots. Snapshot is a list of
  packages, so difference between snapshots is a difference between package
  lists. Package could be either completely missing in one snapshot, or package
  is present in both snapshots with different versions.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot diff -only-matching wheezy-main wheezy-backports
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>only-matching</b>=false</dt>
  <dd class="It-tag">display diff only for matching packages (don&#x2019;t
      display missing packages)</dd>
</dl>
<h1 class="Sh" title="Sh" id="MERGES_SNAPSHOTS"><a class="selflink" href="#MERGES_SNAPSHOTS">MERGES
  SNAPSHOTS</a></h1>
<b>aptly</b> <b>snapshot</b> <b>merge</b> <i>destination</i> <i>source</i>
  [<i>source</i>...]
<div class="Pp"></div>
Merge command merges several <i>source</i> snapshots into one <i>destination</i>
  snapshot. Merge happens from left to right. By default, packages with the same
  name-architecture pair are replaced during merge (package from latest snapshot
  on the list wins). If run with only one source snapshot, merge copies
  <i>source</i> into <i>destination</i>.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot merge wheezy-w-backports wheezy-main wheezy-backports
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>latest</b>=false</dt>
  <dd class="It-tag">use only the latest version of each package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>no-remove</b>=false</dt>
  <dd class="It-tag">don&#x2019;t remove duplicate arch/name packages</dd>
</dl>
<h1 class="Sh" title="Sh" id="DELETE_SNAPSHOT"><a class="selflink" href="#DELETE_SNAPSHOT">DELETE
  SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>drop</b> <i>name</i>
<div class="Pp"></div>
Drop removes information about a snapshot. If snapshot is published, it
  can&#x2019;t be dropped.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot drop wheezy-main
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force</b>=false</dt>
  <dd class="It-tag">remove snapshot even if it was used as source for other
      snapshots</dd>
</dl>
<h1 class="Sh" title="Sh" id="RENAMES_SNAPSHOT"><a class="selflink" href="#RENAMES_SNAPSHOT">RENAMES
  SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>rename</b> <i>old-name</i> <i>new-name</i>
<div class="Pp"></div>
Command changes name of the snapshot. Snapshot name should be unique.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly snapshot rename wheezy-min wheezy-main
<h1 class="Sh" title="Sh" id="SEARCH_SNAPSHOT_FOR_PACKAGES_MATCHING_QUERY"><a class="selflink" href="#SEARCH_SNAPSHOT_FOR_PACKAGES_MATCHING_QUERY">SEARCH
  SNAPSHOT FOR PACKAGES MATCHING QUERY</a></h1>
<b>aptly</b> <b>snapshot</b> <b>search</b> <i>name</i> <i>package-query</i>
<div class="Pp"></div>
Command search displays list of packages in snapshot that match package query
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot search wheezy-main &#x2019;$Architecture (i386), Name (% *-dev)&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>format</b>=</dt>
  <dd class="It-tag">custom format for result printing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">include dependencies into search results</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILTER_PACKAGES_IN_SNAPSHOT_PRODUCING_ANOTHER_SNAPSHOT"><a class="selflink" href="#FILTER_PACKAGES_IN_SNAPSHOT_PRODUCING_ANOTHER_SNAPSHOT">FILTER
  PACKAGES IN SNAPSHOT PRODUCING ANOTHER SNAPSHOT</a></h1>
<b>aptly</b> <b>snapshot</b> <b>filter</b> <i>source</i> <i>destination</i>
  <i>package-query</i> <b>...</b>
<div class="Pp"></div>
Command filter does filtering in snapshot <i>source</i>, producing another
  snapshot <i>destination</i>. Packages could be specified simply as
  &#x2019;package-name&#x2019; or as package queries.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly snapshot filter wheezy-main wheezy-required &#x2019;Priorioty (required)&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-deps</b>=false</dt>
  <dd class="It-tag">include dependent packages as well</dd>
</dl>
<h1 class="Sh" title="Sh" id="REMOVE_PUBLISHED_REPOSITORY"><a class="selflink" href="#REMOVE_PUBLISHED_REPOSITORY">REMOVE
  PUBLISHED REPOSITORY</a></h1>
<b>aptly</b> <b>publish</b> <b>drop</b> <i>distribution</i>
  [[<i>endpoint</i>:]<i>prefix</i>]
<div class="Pp"></div>
Command removes whatever has been published under specified <i>prefix</i>,
  publishing <i>endpoint</i> and <i>distribution</i> name.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish drop wheezy
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-drop</b>=false</dt>
  <dd class="It-tag">remove published repository even if some files could not be
      cleaned up</dd>
</dl>
<h1 class="Sh" title="Sh" id="LIST_OF_PUBLISHED_REPOSITORIES"><a class="selflink" href="#LIST_OF_PUBLISHED_REPOSITORIES">LIST
  OF PUBLISHED REPOSITORIES</a></h1>
<b>aptly</b> <b>publish</b> <b>list</b>
<div class="Pp"></div>
Display list of currently published snapshots.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish list
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>raw</b>=false</dt>
  <dd class="It-tag">display list in machine-readable format</dd>
</dl>
<h1 class="Sh" title="Sh" id="PUBLISH_LOCAL_REPOSITORY"><a class="selflink" href="#PUBLISH_LOCAL_REPOSITORY">PUBLISH
  LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>publish</b> <b>repo</b> <i>name</i>
  [[<i>endpoint</i>:]<i>prefix</i>]
<div class="Pp"></div>
Command publishes current state of local repository ready to be consumed by apt
  tools. Published repostiories appear under rootDir/public directory. Valid GPG
  key is required for publishing.
<div class="Pp"></div>
Multiple component repository could be published by specifying several
  components split by commas via -component flag and multiple local repositories
  as the arguments:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
aptly publish repo -component=main,contrib repo-main repo-contrib
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
It is not recommended to publish local repositories directly unless the
  repository is for testing purposes and changes happen frequently. For
  production usage please take snapshot of repository and publish it using
  publish snapshot command.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish repo testing
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>batch</b>=false</dt>
  <dd class="It-tag">run GPG with detached tty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>component</b>=</dt>
  <dd class="It-tag">component name to publish (for multi-component publishing,
      separate components with commas)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>distribution</b>=</dt>
  <dd class="It-tag">distribution name to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-overwrite</b>=false</dt>
  <dd class="It-tag">overwrite files in package pool in case of mismatch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>gpg-key</b>=</dt>
  <dd class="It-tag">GPG key ID to use when signing the release</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">GPG keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>label</b>=</dt>
  <dd class="It-tag">label to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>origin</b>=</dt>
  <dd class="It-tag">origin name to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase</b>=</dt>
  <dd class="It-tag">GPG passhprase for the key (warning: could be
    insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase-file</b>=</dt>
  <dd class="It-tag">GPG passhprase-file for the key (warning: could be
      insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>secret-keyring</b>=</dt>
  <dd class="It-tag">GPG secret keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-contents</b>=false</dt>
  <dd class="It-tag">don&#x2019;t generate Contents indexes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-signing</b>=false</dt>
  <dd class="It-tag">don&#x2019;t sign Release files with GPG</dd>
</dl>
<h1 class="Sh" title="Sh" id="PUBLISH_SNAPSHOT"><a class="selflink" href="#PUBLISH_SNAPSHOT">PUBLISH
  SNAPSHOT</a></h1>
<b>aptly</b> <b>publish</b> <b>snapshot</b> <i>name</i>
  [[<i>endpoint</i>:]<i>prefix</i>]
<div class="Pp"></div>
Command publishes snapshot as Debian repository ready to be consumed by apt
  tools. Published repostiories appear under rootDir/public directory. Valid GPG
  key is required for publishing.
<div class="Pp"></div>
Multiple component repository could be published by specifying several
  components split by commas via -component flag and multiple snapshots as the
  arguments:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
aptly publish snapshot -component=main,contrib snap-main snap-contrib
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish snapshot wheezy-main
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>batch</b>=false</dt>
  <dd class="It-tag">run GPG with detached tty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>component</b>=</dt>
  <dd class="It-tag">component name to publish (for multi-component publishing,
      separate components with commas)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>distribution</b>=</dt>
  <dd class="It-tag">distribution name to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-overwrite</b>=false</dt>
  <dd class="It-tag">overwrite files in package pool in case of mismatch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>gpg-key</b>=</dt>
  <dd class="It-tag">GPG key ID to use when signing the release</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">GPG keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>label</b>=</dt>
  <dd class="It-tag">label to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>origin</b>=</dt>
  <dd class="It-tag">origin name to publish</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase</b>=</dt>
  <dd class="It-tag">GPG passhprase for the key (warning: could be
    insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase-file</b>=</dt>
  <dd class="It-tag">GPG passhprase-file for the key (warning: could be
      insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>secret-keyring</b>=</dt>
  <dd class="It-tag">GPG secret keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-contents</b>=false</dt>
  <dd class="It-tag">don&#x2019;t generate Contents indexes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-signing</b>=false</dt>
  <dd class="It-tag">don&#x2019;t sign Release files with GPG</dd>
</dl>
<h1 class="Sh" title="Sh" id="UPDATE_PUBLISHED_REPOSITORY_BY_SWITCHING_TO_NEW_SNAPSHOT"><a class="selflink" href="#UPDATE_PUBLISHED_REPOSITORY_BY_SWITCHING_TO_NEW_SNAPSHOT">UPDATE
  PUBLISHED REPOSITORY BY SWITCHING TO NEW SNAPSHOT</a></h1>
<b>aptly</b> <b>publish</b> <b>switch</b> <i>distribution</i>
  [[<i>endpoint</i>:] <i>prefix</i>] <i>new-snapshot</i>
<div class="Pp"></div>
Command switches in-place published snapshots with new snapshot contents. All
  publishing parameters are preserved (architecture list, distribution,
  component).
<div class="Pp"></div>
For multiple component repositories, flag -component should be given with list
  of components to update. Corresponding snapshots should be given in the same
  order, e.g.:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
aptly publish switch -component=main,contrib wheezy wh-main wh-contrib
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish switch wheezy ppa wheezy-7.5
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
This command would switch published repository (with one component) named
  ppa/wheezy (prefix ppa, dsitribution wheezy to new snapshot wheezy-7.5).
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>batch</b>=false</dt>
  <dd class="It-tag">run GPG with detached tty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>component</b>=</dt>
  <dd class="It-tag">component names to update (for multi-component publishing,
      separate components with commas)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-overwrite</b>=false</dt>
  <dd class="It-tag">overwrite files in package pool in case of mismatch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>gpg-key</b>=</dt>
  <dd class="It-tag">GPG key ID to use when signing the release</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">GPG keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase</b>=</dt>
  <dd class="It-tag">GPG passhprase for the key (warning: could be
    insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase-file</b>=</dt>
  <dd class="It-tag">GPG passhprase-file for the key (warning: could be
      insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>secret-keyring</b>=</dt>
  <dd class="It-tag">GPG secret keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-contents</b>=false</dt>
  <dd class="It-tag">don&#x2019;t generate Contents indexes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-signing</b>=false</dt>
  <dd class="It-tag">don&#x2019;t sign Release files with GPG</dd>
</dl>
<h1 class="Sh" title="Sh" id="UPDATE_PUBLISHED_LOCAL_REPOSITORY"><a class="selflink" href="#UPDATE_PUBLISHED_LOCAL_REPOSITORY">UPDATE
  PUBLISHED LOCAL REPOSITORY</a></h1>
<b>aptly</b> <b>publish</b> <b>update</b> <i>distribution</i>
  [[<i>endpoint</i>:] <i>prefix</i>]
<div class="Pp"></div>
Command re-publishes (updates) published local repository. <i>distribution</i>
  and <i>prefix</i> should be occupied with local repository published using
  command aptly publish repo. Update happens in-place with minimum possible
  downtime for published repository.
<div class="Pp"></div>
For multiple component published repositories, all local repositories are
  updated.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly publish update wheezy ppa
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>batch</b>=false</dt>
  <dd class="It-tag">run GPG with detached tty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>force-overwrite</b>=false</dt>
  <dd class="It-tag">overwrite files in package pool in case of mismatch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>gpg-key</b>=</dt>
  <dd class="It-tag">GPG key ID to use when signing the release</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>keyring</b>=</dt>
  <dd class="It-tag">GPG keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase</b>=</dt>
  <dd class="It-tag">GPG passhprase for the key (warning: could be
    insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>passphrase-file</b>=</dt>
  <dd class="It-tag">GPG passhprase-file for the key (warning: could be
      insecure)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>secret-keyring</b>=</dt>
  <dd class="It-tag">GPG secret keyring to use (instead of default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-contents</b>=false</dt>
  <dd class="It-tag">don&#x2019;t generate Contents indexes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>skip-signing</b>=false</dt>
  <dd class="It-tag">don&#x2019;t sign Release files with GPG</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEARCH_FOR_PACKAGES_MATCHING_QUERY"><a class="selflink" href="#SEARCH_FOR_PACKAGES_MATCHING_QUERY">SEARCH
  FOR PACKAGES MATCHING QUERY</a></h1>
<b>aptly</b> <b>package</b> <b>search</b> <i>package-query</i>
<div class="Pp"></div>
Command search displays list of packages in whole DB that match package query
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly package search &#x2019;$Architecture (i386), Name (% *-dev)&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>format</b>=</dt>
  <dd class="It-tag">custom format for result printing</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOW_DETAILS_ABOUT_PACKAGES_MATCHING_QUERY"><a class="selflink" href="#SHOW_DETAILS_ABOUT_PACKAGES_MATCHING_QUERY">SHOW
  DETAILS ABOUT PACKAGES MATCHING QUERY</a></h1>
<b>aptly</b> <b>package</b> <b>show</b> <i>package-query</i>
<div class="Pp"></div>
Command shows displays detailed meta-information about packages matching query.
  Information from Debian control file is displayed. Optionally information
  about package files and inclusion into mirrors/snapshots/local repos is shown.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
$ aptly package show nginx-light_1.2.1-2.2+wheezy2_i386&#x2019;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-files</b>=false</dt>
  <dd class="It-tag">display information about files from package pool</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>with-references</b>=false</dt>
  <dd class="It-tag">display information about mirrors, snapshots and local
      repos referencing this package</dd>
</dl>
<h1 class="Sh" title="Sh" id="CLEANUP_DB_AND_PACKAGE_POOL"><a class="selflink" href="#CLEANUP_DB_AND_PACKAGE_POOL">CLEANUP
  DB AND PACKAGE POOL</a></h1>
<b>aptly</b> <b>db</b> <b>cleanup</b>
<div class="Pp"></div>
Database cleanup removes information about unreferenced packages and removes
  files in the package pool that aren&#x2019;t used by packages anymore
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly db cleanup
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>dry-run</b>=false</dt>
  <dd class="It-tag">don&#x2019;t delete anything</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>verbose</b>=false</dt>
  <dd class="It-tag">be verbose when loading objects/removing them</dd>
</dl>
<h1 class="Sh" title="Sh" id="RECOVER_DB_AFTER_CRASH"><a class="selflink" href="#RECOVER_DB_AFTER_CRASH">RECOVER
  DB AFTER CRASH</a></h1>
<b>aptly</b> <b>db</b> <b>recover</b>
<div class="Pp"></div>
Database recover does its&#x2019; best to recover the database after a crash. It
  is recommended to backup the DB before running recover.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly db recover
<h1 class="Sh" title="Sh" id="HTTP_SERVE_PUBLISHED_REPOSITORIES"><a class="selflink" href="#HTTP_SERVE_PUBLISHED_REPOSITORIES">HTTP
  SERVE PUBLISHED REPOSITORIES</a></h1>
<b>aptly</b> <b>serve</b>
<div class="Pp"></div>
Command serve starts embedded HTTP server (not suitable for real production
  usage) to serve contents of public/ subdirectory of aptly&#x2019;s root that
  contains published repositories.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly serve -listen=:8080
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>listen</b>=:8080</dt>
  <dd class="It-tag">host:port for HTTP listening</dd>
</dl>
<h1 class="Sh" title="Sh" id="START_API_HTTP_SERVICE"><a class="selflink" href="#START_API_HTTP_SERVICE">START
  API HTTP SERVICE</a></h1>
<b>aptly</b> <b>api</b> <b>serve</b>
<div class="Pp"></div>
Stat HTTP server with aptly REST API.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly api serve -listen=:8080
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>listen</b>=:8080</dt>
  <dd class="It-tag">host:port for HTTP listening</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>no-lock</b>=false</dt>
  <dd class="It-tag">don&#x2019;t lock the database</dd>
</dl>
<h1 class="Sh" title="Sh" id="RENDER_GRAPH_OF_RELATIONSHIPS"><a class="selflink" href="#RENDER_GRAPH_OF_RELATIONSHIPS">RENDER
  GRAPH OF RELATIONSHIPS</a></h1>
<b>aptly</b> <b>graph</b>
<div class="Pp"></div>
Command graph displays relationship between mirrors, local repositories,
  snapshots and published repositories using graphviz package to render graph as
  an image.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly graph
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>format</b>=png</dt>
  <dd class="It-tag">render graph to specified format (png, svg, pdf, etc.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-<b>output</b>=</dt>
  <dd class="It-tag">specify output filename, default is to open result in
      viewer</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOW_CURRENT_APTLY&#x2019;S_CONFIG"><a class="selflink" href="#SHOW_CURRENT_APTLY&#x2019;S_CONFIG">SHOW
  CURRENT APTLY&#x2019;S CONFIG</a></h1>
<b>aptly</b> <b>config</b> <b>show</b>
<div class="Pp"></div>
Command show displays the current aptly configuration.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly config show
<h1 class="Sh" title="Sh" id="RUN_APTLY_TASKS"><a class="selflink" href="#RUN_APTLY_TASKS">RUN
  APTLY TASKS</a></h1>
<b>aptly</b> <b>task</b> <b>run</b> -filename=<i>filename</i> <b>|</b>
  <i>command1</i>, <i>command2</i>, <b>...</b>
<div class="Pp"></div>
Command helps organise multiple aptly commands in one single aptly task, running
  as single thread.
<div class="Pp"></div>
Example:
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
  $ aptly task run
  &gt; repo create local
  &gt; repo add local pkg1
  &gt; publish repo local
  &gt; serve
  &gt;
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Options:
<dl class="Bl-tag">
  <dt class="It-tag">-<b>filename</b>=</dt>
  <dd class="It-tag">specifies the filename that contains the commands to
    run</dd>
</dl>
<h1 class="Sh" title="Sh" id="SHOW_CURRENT_APTLY&#x2019;S_CONFIG"><a class="selflink" href="#SHOW_CURRENT_APTLY&#x2019;S_CONFIG">SHOW
  CURRENT APTLY&#x2019;S CONFIG</a></h1>
<b>aptly</b> <b>config</b> <b>show</b>
<div class="Pp"></div>
Command show displays the current aptly configuration.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
$ aptly config show
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
If environment variable <b>HTTP_PROXY</b> is set <b>aptly</b> would use its
  value to proxy all HTTP requests.
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<b>aptly</b> exists with:
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">success</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">general failure</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">command parse failure</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
List of contributors, in chronological order:
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Andrey Smirnov (https://github.com/smira)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Sebastien Binet (https://github.com/sbinet)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Ryan Uber (https://github.com/ryanuber)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Simon Aquino (https://github.com/queeno)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Vincent Batoufflet (https://github.com/vbatoufflet)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Ivan Kurnosov (https://github.com/zerkms)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Dmitrii Kashin (https://github.com/freehck)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Chris Read (https://github.com/cread)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Rohan Garg (https://github.com/shadeslayer)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Russ Allbery (https://github.com/rra)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Sylvain Baubeau (https://github.com/lebauce)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Andrea Bernardo Ciddio (https://github.com/bcandrea)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Michael Koval (https://github.com/mkoval)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Alexander Guy (https://github.com/alexanderguy)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Sebastien Badia (https://github.com/sbadia)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Szymon Sobik (https://github.com/sobczyk)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Paul Krohn (https://github.com/paul-krohn)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Vincent Bernat (https://github.com/vincentbernat)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">x539 (https://github.com/x539)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x25CB;</dt>
  <dd class="It-tag">Phil Frost (https://github.com/bitglue)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 2016</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
