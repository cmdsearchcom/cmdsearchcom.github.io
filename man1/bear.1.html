<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BEAR(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BEAR(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">BEAR(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
bear - build ear
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
bear [ <i>options</i>] [<i>build commands</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Bear is a tool to generate compilation database for clang tooling.
<div class="Pp"></div>
The JSON compilation database
  (http://clang.llvm.org/docs/JSONCompilationDatabase.html) is used in clang
  project to provide information how a single compilation unit was processed.
  When that is available then it is easy to re-run the compilation with
  different programs.
<div class="Pp"></div>
Bear execs the original build command and intercepts the exec calls. To achieve
  that Bear uses the LD_PRELOAD or DYLD_INSERT_LIBRARIES mechanisms provided by
  the dynamic linker. There is a library which defines the exec methods and used
  in every child processes of the build command. The executable itself sets the
  environment up to child processes and writes the output file.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o <i>output</i>, --cdb <i>output</i></b></dt>
  <dd class="It-tag">Specify output file. Default value provided.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --append</b></dt>
  <dd class="It-tag">Use previously generated output file and append the new
      entries to it. This way you can run bear continuously during work, and it
      keeps the compilation database up to date. File deletion and addition are
      both considered. But build process change (modifying compiler flags) will
      cause duplicate entries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Make bear more verbose.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l <i>library</i></b></dt>
  <dd class="It-tag">Specify the preloaded library location. Default value
      provided. (This option mainly for development purposes.)</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">Disable filter. The output is also a <i>JSON</i> formatted
      file. But the result is not a compilation database. It contains all
      available information of the exec calls. (This option mainly for
      development purposes.)</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="OUTPUT"><a class="selflink" href="#OUTPUT">OUTPUT</a></h1>
There are two version of output formats. One is defined by the clang tooling.
  This goes like this:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
[
&#x00A0;&#x00A0;{&#x00A0;&quot;directory&quot;:&#x00A0;&quot;/home/user/llvm/build&quot;,
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&quot;command&quot;:&#x00A0;&quot;clang++&#x00A0;-Irelative&#x00A0;-c&#x00A0;-o&#x00A0;file.o&#x00A0;file.cc&quot;,
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&quot;file&quot;:&#x00A0;&quot;file.cc&quot;&#x00A0;},
&#x00A0;&#x00A0;...
]
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
To achieve this bear has to run some filtering and formatting. Build tools exec
  many commands during the build process. Bear has to find was that a compiler
  call, and what was the source file? The other output format is generated by
  the -n flag. (This output is not formalized, it's used to debug bear itself.)
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
Bear exit status is the exit status of the build command. Except when bear
  crashes, then it sets to non zero.
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>BEAR_OUTPUT</b></dt>
  <dd class="It-tag">The place of the temporary files where client shall report
      exec calls. Value set by bear, overrides previous value for child
      processes.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>LD_PRELOAD</b></dt>
  <dd class="It-tag">Used by the dynamic loader on Linux, FreeBSD and other UNIX
      OS. Value set by bear, overrides previous value for child processes.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DYLD_INSERT_LIBRARIES</b></dt>
  <dd class="It-tag">Used by the dynamic loader on OS X. Value set by bear,
      overrides previous value for child processes.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DYLD_FORCE_FLAT_NAMESPACE</b></dt>
  <dd class="It-tag">Used by the dynamic loader on OS X. Value set by bear,
      overrides previous value for child processes.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/usr/lib/x86_64-linux-gnu/bear/libear.so</b></dt>
  <dd class="It-tag">bear library to implement exec calls.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
ld.so(8), exec(3)
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Because Bear uses LD_PRELOAD or DYLD_INSERT_LIBRARIES environment variables, it
  does not append to it, but overrides it. So builds which are using these
  variables might not work. (I don't know any build tool which does that, but
  please let me know if you do.)
<div class="Pp"></div>
Security extension/modes on different operating systems might disable library
  preloads. This case Bear behaves normally, but the result compilation database
  will be empty. (Please make sure it's not the case when reporting bugs.)
  Notable examples for enabled security modes are: SIP on OS X Captain and
  SELinux on Fedora, CentOS, RHEL.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2012-2016 by L&#x00E1;szl&#x00F3; Nagy
  &lt;https://github.com/rizsotto/Bear&gt;
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
L&#x00E1;szl&#x00F3; Nagy.</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 16, 2016</td>
    <td class="foot-os">Bear User Manuals</td>
  </tr>
</table>
</body>
</html>
