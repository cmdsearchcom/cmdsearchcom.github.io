<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:43:59 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>XDM(1) General Commands Manual XDM(1)</p>

<p style="margin-top: 1em">NAME <br>
xdm - X Display Manager with support for XDMCP, host
chooser</p>

<p style="margin-top: 1em">SYNOPSIS <br>
xdm [ -config configuration_file ] [ -nodaemon ] [ -debug
debug_level ] [ -error error_log_file ] [ -resources
resource_file ] [ -server server_entry ] [ -session
session_program <br>
]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Xdm manages a collection of X displays, which may be on the
local host or remote servers. The design of xdm was guided
by the needs of X terminals as well as The Open Group <br>
standard XDMCP, the X Display Manager Control Protocol. Xdm
provides services similar to those provided by init, getty
and login on character terminals: prompting for login name
<br>
and password, authenticating the user, and running a
&lsquo;&lsquo;session.&rsquo;&rsquo;</p>

<p style="margin-top: 1em">A
&lsquo;&lsquo;session&rsquo;&rsquo; is defined by the
lifetime of a particular process; in the traditional
character-based terminal world, it is the user&rsquo;s login
shell. In the xdm context, it is an <br>
arbitrary session manager. This is because in a windowing
environment, a user&rsquo;s login shell process does not
necessarily have any terminal-like interface with which to
connect. <br>
When a real session manager is not available, a window
manager or terminal emulator is typically used as the
&lsquo;&lsquo;session manager,&rsquo;&rsquo; meaning that
termination of this process termi&acirc; <br>
nates the user&rsquo;s session.</p>

<p style="margin-top: 1em">When the session is terminated,
xdm resets the X server and (optionally) restarts the whole
process.</p>

<p style="margin-top: 1em">When xdm receives an Indirect
query via XDMCP, it can run a chooser process to perform an
XDMCP BroadcastQuery (or an XDMCP Query to specified hosts)
on behalf of the display and <br>
offer a menu of possible hosts that offer XDMCP display
management. This feature is useful with X terminals that do
not offer a host menu themselves.</p>

<p style="margin-top: 1em">Xdm can be configured to ignore
BroadcastQuery messages from selected hosts. This is useful
when you don&rsquo;t want the host to appear in menus
produced by chooser or X terminals <br>
themselves.</p>

<p style="margin-top: 1em">Because xdm provides the first
interface that users will see, it is designed to be simple
to use and easy to customize to the needs of a particular
site. Xdm has many options, <br>
most of which have reasonable defaults. Browse through the
various sections of this manual, picking and choosing the
things you want to change. Pay particular attention to the
<br>
Session Program section, which will describe how to set up
the style of session desired.</p>

<p style="margin-top: 1em">OVERVIEW <br>
xdm is highly configurable, and most of its behavior can be
controlled by resource files and shell scripts. The names of
these files themselves are resources read from the file <br>
xdm-config or the file named by the -config option.</p>

<p style="margin-top: 1em">xdm offers display management
two different ways. It can manage X servers running on the
local machine and specified in Xservers, and it can manage
remote X servers (typically X <br>
terminals) using XDMCP (the XDM Control Protocol) as
specified in the Xaccess file.</p>

<p style="margin-top: 1em">The resources of the X clients
run by xdm outside the user&rsquo;s session, including
xdm&rsquo;s own login window, can be affected by setting
resources in the Xresources file.</p>

<p style="margin-top: 1em">For X terminals that do not
offer a menu of hosts to get display management from, xdm
can collect willing hosts and run the chooser program to
offer the user a menu. For X dis&acirc; <br>
plays attached to a host, this step is typically not used,
as the local host does the display management.</p>

<p style="margin-top: 1em">After resetting the X server,
xdm runs the Xsetup script to assist in setting up the
screen the user sees along with the xlogin widget.</p>

<p style="margin-top: 1em">The xlogin widget, which xdm
presents, offers the familiar login and password
prompts.</p>

<p style="margin-top: 1em">After the user logs in, xdm runs
the Xstartup script as root.</p>

<p style="margin-top: 1em">Then xdm runs the Xsession
script as the user. This system session file may do some
additional startup and typically runs the .xsession script
in the user&rsquo;s home directory. <br>
When the Xsession script exits, the session is over.</p>

<p style="margin-top: 1em">At the end of the session, the
Xreset script is run to clean up, the X server is reset, and
the cycle starts over.</p>

<p style="margin-top: 1em">The file /var/log/xdm.log will
contain error messages from xdm and anything output to
stderr by Xsetup, Xstartup, Xsession or Xreset. When you
have trouble getting xdm working, <br>
check this file to see if xdm has any clues to the
trouble.</p>

<p style="margin-top: 1em">OPTIONS <br>
All of these options, except -config itself, specify values
that can also be specified in the configuration file as
resources.</p>

<p style="margin-top: 1em">-config configuration_file <br>
Names the configuration file, which specifies resources to
control the behavior of xdm. /etc/X11/xdm/xdm-config is the
default. See the section Configuration File.</p>

<p style="margin-top: 1em">-nodaemon <br>
Specifies &lsquo;&lsquo;false&rsquo;&rsquo; as the value for
the DisplayManager.daemonMode resource. This suppresses the
normal daemon behavior, which is for xdm to close all file
descriptors, <br>
disassociate itself from the controlling terminal, and put
itself in the background when it first starts up.</p>

<p style="margin-top: 1em">-debug debug_level <br>
Specifies the numeric value for the
DisplayManager.debugLevel resource. A non-zero value causes
xdm to print lots of debugging statements to the terminal;
it also dis&acirc; <br>
ables the DisplayManager.daemonMode resource, forcing xdm to
run synchronously. To interpret these debugging messages, a
copy of the source code for xdm is almost a <br>
necessity. No attempt has been made to rationalize or
standardize the output.</p>

<p style="margin-top: 1em">-error error_log_file <br>
Specifies the value for the DisplayManager.errorLogFile
resource. This file contains errors from xdm as well as
anything written to stderr by the various scripts and
pro&acirc; <br>
grams run during the progress of the session.</p>

<p style="margin-top: 1em">-resources resource_file <br>
Specifies the value for the DisplayManager*resources
resource. This file is loaded using xrdb(1) to specify
configuration parameters for the authentication widget.</p>

<p style="margin-top: 1em">-server server_entry <br>
Specifies the value for the DisplayManager.servers resource.
See the section Local Server Specification for a description
of this resource.</p>

<p style="margin-top: 1em">-udpPort port_number <br>
Specifies the value for the DisplayManager.requestPort
resource. This sets the port-number which xdm will monitor
for XDMCP requests. If set to 0, xdm will not listen <br>
for XDMCP or Chooser requests. As XDMCP uses the registered
well-known UDP port 177, this resource should not be changed
to a value other than 0, except for debugging.</p>

<p style="margin-top: 1em">-session session_program <br>
Specifies the value for the DisplayManager*session resource.
This indicates the program to run as the session after the
user has logged in.</p>

<p style="margin-top: 1em">-xrm resource_specification <br>
Allows an arbitrary resource to be specified, as in most X
Toolkit applications.</p>

<p style="margin-top: 1em">RESOURCES <br>
At many stages the actions of xdm can be controlled through
the use of its configuration file, which is in the X
resource format. Some resources modify the behavior of xdm
on <br>
all displays, while others modify its behavior on a single
display. Where actions relate to a specific display, the
display name is inserted into the resource name between <br>
&lsquo;&lsquo;DisplayManager&rsquo;&rsquo; and the final
resource name segment.</p>

<p style="margin-top: 1em">For local displays, the resource
name and class are as read from the Xservers file.</p>

<p style="margin-top: 1em">For remote displays, the
resource name is what the network address of the display
resolves to. See the removeDomain resource. The name must
match exactly; xdm is not aware of <br>
all the network aliases that might reach a given display. If
the name resolve fails, the address is used. The resource
class is as sent by the display in the XDMCP Manage <br>
request.</p>

<p style="margin-top: 1em">Because the resource manager
uses colons to separate the name of the resource from its
value and dots to separate resource name parts, xdm
substitutes underscores for both dots <br>
and colons when generating the resource name. For example,
DisplayManager.expo_x_org_0.startup is the name of the
resource which defines the startup shell file for the <br>
&lsquo;&lsquo;expo.x.org:0&rsquo;&rsquo; display.</p>

<p style="margin-top: 1em">DisplayManager.servers <br>
This resource either specifies a file name full of server
entries, one per line (if the value starts with a slash), or
a single server entry. See the section Local Server <br>
Specification for the details.</p>

<p style="margin-top: 1em">DisplayManager.requestPort <br>
This indicates the UDP port number which xdm uses to listen
for incoming XDMCP requests. Unless you need to debug the
system, leave this with its default value of 177.</p>

<p style="margin-top: 1em">DisplayManager.errorLogFile <br>
Error output is normally directed at the system console. To
redirect it, set this resource to a file name. A method to
send these messages to syslog should be developed <br>
for systems which support it; however, the wide variety of
interfaces precludes any system-independent implementation.
This file also contains any output directed to <br>
stderr by the Xsetup, Xstartup, Xsession and Xreset files,
so it will contain descriptions of problems in those scripts
as well.</p>

<p style="margin-top: 1em">DisplayManager.debugLevel <br>
If the integer value of this resource is greater than zero,
reams of debugging information will be printed. It also
disables daemon mode, which would redirect the infor&acirc;
<br>
mation into the bit-bucket, and allows non-root users to run
xdm, which would normally not be useful.</p>

<p style="margin-top: 1em">DisplayManager.daemonMode <br>
Normally, xdm attempts to make itself into a daemon process
unassociated with any terminal. This is accomplished by
forking and leaving the parent process to exit, then <br>
closing file descriptors and releasing the controlling
terminal. In some environments this is not desired (in
particular, when debugging). Setting this resource to <br>
&lsquo;&lsquo;false&rsquo;&rsquo; will disable this
feature.</p>

<p style="margin-top: 1em">DisplayManager.pidFile <br>
The filename specified will be created to contain an ASCII
representation of the process-id of the main xdm process.
Xdm also uses file locking on this file to attempt to <br>
eliminate multiple daemons running on the same machine,
which would cause quite a bit of havoc.</p>

<p style="margin-top: 1em">DisplayManager.lockPidFile <br>
This is the resource which controls whether xdm uses file
locking to keep multiple display managers from running amok.
On System V, this uses the lockf library call, <br>
while on BSD it uses flock.</p>

<p style="margin-top: 1em">DisplayManager.authDir <br>
This names a directory under which xdm stores authorization
files while initializing the session. The default value is
/var/lib/xdm. Can be overridden for specific dis&acirc; <br>
plays by DisplayManager.DISPLAY.authFile.</p>

<p style="margin-top: 1em">DisplayManager.autoRescan <br>
This boolean controls whether xdm rescans the configuration,
servers, access control and authentication keys files after
a session terminates and the files have changed. <br>
By default it is &lsquo;&lsquo;true.&rsquo;&rsquo; You can
force xdm to reread these files by sending a SIGHUP to the
main process.</p>

<p style="margin-top: 1em">DisplayManager.removeDomainname
<br>
When computing the display name for XDMCP clients, the name
resolver will typically create a fully qualified host name
for the terminal. As this is sometimes confusing, <br>
xdm will remove the domain name portion of the host name if
it is the same as the domain name of the local host when
this variable is set. By default the value is <br>
&lsquo;&lsquo;true.&rsquo;&rsquo;</p>

<p style="margin-top: 1em">DisplayManager.keyFile <br>
XDM-AUTHENTICATION-1 style XDMCP authentication requires
that a private key be shared between xdm and the terminal.
This resource specifies the file containing those val&acirc;
<br>
ues. Each entry in the file consists of a display name and
the shared key. By default, xdm does not include support for
XDM-AUTHENTICATION-1, as it requires DES which is <br>
not generally distributable because of United States export
restrictions.</p>

<p style="margin-top: 1em">DisplayManager.accessFile <br>
To prevent unauthorized XDMCP service and to allow
forwarding of XDMCP IndirectQuery requests, this file
contains a database of hostnames which are either allowed
direct <br>
access to this machine, or have a list of hosts to which
queries should be forwarded to. The format of this file is
described in the section XDMCP Access Control.</p>

<p style="margin-top: 1em">DisplayManager.exportList <br>
A list of additional environment variables, separated by
white space, to pass on to the Xsetup, Xstartup, Xsession,
and Xreset programs.</p>

<p style="margin-top: 1em">DisplayManager.randomFile <br>
A file to checksum to generate the seed of authorization
keys. This should be a file that changes frequently. The
default is /dev/mem.</p>

<p style="margin-top: 1em">DisplayManager.randomDevice <br>
A file to read 8 bytes from to generate the seed of
authorization keys. The default is /dev/urandom . If this
file cannot be read, or if a read blocks for more than 5
<br>
seconds, xdm falls back to using a checksum of
DisplayManager.randomFile to generate the seed.</p>

<p style="margin-top: 1em">DisplayManager.prngdSocket</p>

<p style="margin-top: 1em">DisplayManager.prngPort <br>
A UNIX domain socket name or a TCP socket port number on
local host on which a Pseudo-Random Number Generator Daemon,
like EGD (http://egd.sourceforge.net) is listening, <br>
in order to generate the autorization keys. Either a non
null port or a valid socket name must be specified. The
default is to use the Unix-domain socket /tmp/entropy.</p>

<p style="margin-top: 1em">On systems that don&rsquo;t have
such a daemon, a fall-back entropy gathering system, based
on various log file contents hashed by the MD5 algorithm is
used instead.</p>

<p style="margin-top: 1em">DisplayManager.greeterLib <br>
On systems that support a dynamically-loadable greeter
library, the name of the library. The default is <br>
/usr/libexec/libXdmGreet.so.</p>

<p style="margin-top: 1em">DisplayManager.choiceTimeout
<br>
Number of seconds to wait for display to respond after user
has selected a host from the chooser. If the display sends
an XDMCP IndirectQuery within this time, the <br>
request is forwarded to the chosen host. Otherwise, it is
assumed to be from a new session and the chooser is offered
again. Default is 15.</p>

<p style="margin-top: 1em">DisplayManager.sourceAddress
<br>
Use the numeric IP address of the incoming connection on
multihomed hosts instead of the host name. This is to avoid
trying to connect on the wrong interface which might <br>
be down at this time.</p>

<p style="margin-top: 1em">DisplayManager.willing <br>
This specifies a program which is run (as) root when an an
XDMCP BroadcastQuery is received and this host is configured
to offer XDMCP display management. The output of <br>
this program may be displayed on a chooser window. If no
program is specified, the string Willing to manage is
sent.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.resources
<br>
This resource specifies the name of the file to be loaded by
xrdb as the resource database onto the root window of screen
0 of the display. The Xsetup program, the Login <br>
widget, and chooser will use the resources set in this file.
This resource data base is loaded just before the
authentication procedure is started, so it can control the
<br>
appearance of the login window. See the section
Authentication Widget, which describes the various resources
that are appropriate to place in this file. There is no <br>
default value for this resource, but <br>
/etc/X11/xdm/Xresources is the conventional name.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.chooser
<br>
Specifies the program run to offer a host menu for Indirect
queries redirected to the special host name CHOOSER. <br>
/usr/libexec/chooser is the default. See the sections XDMCP
Access Control and Chooser.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.xrdb <br>
Specifies the program used to load the resources. By
default, xdm uses /usr/bin/xrdb.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.cpp <br>
This specifies the name of the C preprocessor which is used
by xrdb.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.setup
<br>
This specifies a program which is run (as root) before
offering the Login window. This may be used to change the
appearance of the screen around the Login window or to <br>
put up other windows (e.g., you may want to run xconsole
here). By default, no program is run. The conventional name
for a file used here is Xsetup. See the section <br>
Setup Program.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.startup
<br>
This specifies a program which is run (as root) after the
authentication process succeeds. By default, no program is
run. The conventional name for a file used here is <br>
Xstartup. See the section Startup Program.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.session
<br>
This specifies the session to be executed (not running as
root). By default, /usr/bin/xterm is run. The conventional
name is Xsession. See the section Session Program.</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.reset
<br>
This specifies a program which is run (as root) after the
session terminates. By default, no program is run. The
conventional name is Xreset. See the section Reset
Pro&acirc; <br>
gram.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.openDelay</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.openRepeat</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.openTimeout</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.startAttempts</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.reservAttempts
<br>
These numeric resources control the behavior of xdm when
attempting to open intransigent servers. openDelay is the
length of the pause in seconds between successive <br>
attempts, openRepeat is the number of attempts to make,
openTimeout is the amount of time to wait while actually
attempting the open (i.e., the maximum time spent in the
<br>
connect(2) system call) and startAttempts is the number of
times this entire process is done before giving up on the
server. After openRepeat attempts have been made, or <br>
if openTimeout seconds elapse in any particular attempt, xdm
terminates and restarts the server, attempting to connect
again. This process is repeated startAttempts <br>
times, at which point the display is declared dead and
disabled. Although this behavior may seem arbitrary, it has
been empirically developed and works quite well on most <br>
systems. The bound reservAttempts is the number of times a
successful connect is allowed to be followed by a fatal
error. When reached, the display is disabled. The <br>
default values are openDelay: 15, openRepeat: 5,
openTimeout: 120, startAttempts: 4 and reservAttempts:
2.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.pingInterval</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.pingTimeout
<br>
To discover when remote displays disappear, xdm occasionally
pings them, using an X connection and XSync calls.
pingInterval specifies the time (in minutes) between each
<br>
ping attempt, pingTimeout specifies the maximum amount of
time (in minutes) to wait for the terminal to respond to the
request. If the terminal does not respond, the ses&acirc;
<br>
sion is declared dead and terminated. By default, both are
set to 5 minutes. If you frequently use X terminals which
can become isolated from the managing host, you may <br>
wish to increase this value. The only worry is that sessions
will continue to exist after the terminal has been
accidentally disabled. xdm will not ping local displays.
<br>
Although it would seem harmless, it is unpleasant when the
workstation session is terminated as a result of the server
hanging for NFS service and not responding to the <br>
ping.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.terminateServer
<br>
This boolean resource specifies whether the X server should
be terminated when a session terminates (instead of
resetting it). This option can be used when the server <br>
tends to grow without bound over time, in order to limit the
amount of time the server is run. The default value is
&lsquo;&lsquo;false.&rsquo;&rsquo;</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.userPath
<br>
Xdm sets the PATH environment variable for the session to
this value. It should be a colon separated list of
directories; see sh(1) for a full description. The default
<br>
value is
&lsquo;&lsquo;/bin:/usr/bin:/usr/bin:/usr/ucb&rsquo;&rsquo;.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.systemPath
<br>
Xdm sets the PATH environment variable for the startup and
reset scripts to the value of this resource. The default for
this resource is <br>

&lsquo;&lsquo;/etc:/bin:/usr/bin:/usr/bin:/usr/ucb&rsquo;&rsquo;.
Note the absence of &lsquo;&lsquo;.&rsquo;&rsquo; from this
entry. This is a good practice to follow for root; it avoids
many common Trojan Horse sys&acirc; <br>
tem penetration schemes.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.systemShell
<br>
Xdm sets the SHELL environment variable for the startup and
reset scripts to the value of this resource. It is /bin/sh
by default.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.failsafeClient
<br>
If the default session fails to execute, xdm will fall back
to this program. This program is executed with no arguments,
but executes using the same environment variables <br>
as the session would have had (see the section Session
Program). By default, /usr/bin/xterm is used.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.grabServer</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.grabTimeout
<br>
To improve security, xdm grabs the server and keyboard while
reading the login name and password. The grabServer resource
specifies if the server should be held for the <br>
duration of the name/password reading. When
&lsquo;&lsquo;false,&rsquo;&rsquo; the server is ungrabbed
after the keyboard grab succeeds, otherwise the server is
grabbed until just before the <br>
session begins. The default is
&lsquo;&lsquo;false.&rsquo;&rsquo; The grabTimeout resource
specifies the maximum time xdm will wait for the grab to
succeed. The grab may fail if some other <br>
client has the server grabbed, or possibly if the network
latencies are very high. This resource has a default value
of 3 seconds; you should be cautious when raising it, <br>
as a user can be spoofed by a look-alike window on the
display. If the grab fails, xdm kills and restarts the
server (if possible) and the session.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.authorize</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.authName
<br>
authorize is a boolean resource which controls whether xdm
generates and uses authorization for the local server
connections. If authorization is used, authName is a list
<br>
of authorization mechanisms to use, separated by white
space. XDMCP connections dynamically specify which
authorization mechanisms are supported, so authName is
ignored <br>
in this case. When authorize is set for a display and
authorization is not available, the user is informed by
having a different message displayed in the login widget.
<br>
By default, authorize is &lsquo;&lsquo;true,&rsquo;&rsquo;
authName is &lsquo;&lsquo;MIT-MAGIC-COOKIE-1,&rsquo;&rsquo;
or, if XDM-AUTHORIZATION-1 is available,
&lsquo;&lsquo;XDM-AUTHORIZATION-1
MIT-MAGIC-COOKIE-1.&rsquo;&rsquo;</p>

<p style="margin-top: 1em">DisplayManager.DISPLAY.authFile
<br>
This file is used to communicate the authorization data from
xdm to the server, using the -auth server command line
option. It should be kept in a directory which is not <br>
world-writable as it could easily be removed, disabling the
authorization mechanism in the server. If not specified, a
name is generated from DisplayManager.authDir and <br>
the name of the display.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.authComplain
<br>
If set to &lsquo;&lsquo;false,&rsquo;&rsquo; disables the
use of the unsecureGreeting in the login window. See the
section Authentication Widget. The default is
&lsquo;&lsquo;true.&rsquo;&rsquo;</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.resetSignal
<br>
The number of the signal xdm sends to reset the server. See
the section Controlling the Server. The default is 1
(SIGHUP).</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.termSignal
<br>
The number of the signal xdm sends to terminate the server.
See the section Controlling the Server. The default is 15
(SIGTERM).</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.resetForAuth
<br>
The original implementation of authorization in the sample
server reread the authorization file at server reset time,
instead of when checking the initial connection. As <br>
xdm generates the authorization information just before
connecting to the display, an old server would not get
up-to-date authorization information. This resource causes
<br>
xdm to send SIGHUP to the server after setting up the file,
causing an additional server reset to occur, during which
time the new authorization information will be read. <br>
The default is &lsquo;&lsquo;false,&rsquo;&rsquo; which will
work for all MIT servers.</p>


<p style="margin-top: 1em">DisplayManager.DISPLAY.userAuthDir
<br>
When xdm is unable to write to the usual user authorization
file ($HOME/.Xauthority), it creates a unique file name in
this directory and points the environment variable <br>
XAUTHORITY at the created file. It uses /tmp by default.</p>

<p style="margin-top: 1em">CONFIGURATION FILE <br>
First, the xdm configuration file should be set up. Make a
directory (usually /etc/X11/xdm) to contain all of the
relevant files.</p>

<p style="margin-top: 1em">Here is a reasonable
configuration file, which could be named xdm-config:</p>

<p style="margin-top: 1em">DisplayManager.servers:
/etc/X11/xdm/Xservers <br>
DisplayManager.errorLogFile: /var/log/xdm.log <br>
DisplayManager*resources: /etc/X11/xdm/Xresources <br>
DisplayManager*startup: /etc/X11/xdm/Xstartup <br>
DisplayManager*session: /etc/X11/xdm/Xsession <br>
DisplayManager.pidFile: /var/run/xdm-pid <br>
DisplayManager._0.authorize: true <br>
DisplayManager*authorize: false</p>

<p style="margin-top: 1em">Note that this file mostly
contains references to other files. Note also that some of
the resources are specified with
&lsquo;&lsquo;*&rsquo;&rsquo; separating the components.
These resources can be <br>
made unique for each different display, by replacing the
&lsquo;&lsquo;*&rsquo;&rsquo; with the display-name, but
normally this is not very useful. See the Resources section
for a complete discussion.</p>

<p style="margin-top: 1em">XDMCP ACCESS CONTROL <br>
The database file specified by the DisplayManager.accessFile
provides information which xdm uses to control access from
displays requesting XDMCP service. This file contains <br>
three types of entries: entries which control the response
to Direct and Broadcast queries, entries which control the
response to Indirect queries, and macro definitions.</p>

<p style="margin-top: 1em">The format of the Direct entries
is simple, either a host name or a pattern, which is
distinguished from a host name by the inclusion of one or
more meta characters (&lsquo;*&rsquo; matches <br>
any sequence of 0 or more characters, and &lsquo;?&rsquo;
matches any single character) which are compared against the
host name of the display device. If the entry is a host
name, all com&acirc; <br>
parisons are done using network addresses, so any name which
converts to the correct network address may be used. For
patterns, only canonical host names are used in the
compar&acirc; <br>
ison, so ensure that you do not attempt to match aliases.
Preceding either a host name or a pattern with a
&lsquo;!&rsquo; character causes hosts which match that
entry to be excluded.</p>

<p style="margin-top: 1em">To only respond to Direct
queries for a host or pattern, it can be followed by the
optional &lsquo;&lsquo;NOBROADCAST&rsquo;&rsquo; keyword.
This can be used to prevent an xdm server from appearing on
<br>
menus based on Broadcast queries.</p>

<p style="margin-top: 1em">An Indirect entry also contains
a host name or pattern, but follows it with a list of host
names or macros to which indirect queries should be
sent.</p>

<p style="margin-top: 1em">A macro definition contains a
macro name and a list of host names and other macros that
the macro expands to. To distinguish macros from hostnames,
macro names start with a &lsquo;%&rsquo; <br>
character. Macros may be nested.</p>

<p style="margin-top: 1em">Indirect entries may also
specify to have xdm run chooser to offer a menu of hosts to
connect to. See the section Chooser.</p>

<p style="margin-top: 1em">When checking access for a
particular display host, each entry is scanned in turn and
the first matching entry determines the response. Direct and
Broadcast entries are ignored <br>
when scanning for an Indirect entry and vice-versa.</p>

<p style="margin-top: 1em">Blank lines are ignored,
&lsquo;#&rsquo; is treated as a comment delimiter causing
the rest of that line to be ignored, and
&lsquo;0wline&rsquo; causes the newline to be ignored,
allowing indirect <br>
host lists to span multiple lines.</p>

<p style="margin-top: 1em">Here is an example Xaccess
file:</p>

<p style="margin-top: 1em"># <br>
# Xaccess - XDMCP access control file <br>
#</p>

<p style="margin-top: 1em"># <br>
# Direct/Broadcast query entries <br>
#</p>

<p style="margin-top: 1em">!xtra.lcs.mit.edu # disallow
direct/broadcast service for xtra <br>
bambi.ogi.edu # allow access from this particular display
<br>
*.lcs.mit.edu # allow access from any display in LCS</p>

<p style="margin-top: 1em">*.deshaw.com NOBROADCAST # allow
only direct access <br>
*.gw.com # allow direct and broadcast</p>

<p style="margin-top: 1em"># <br>
# Indirect query entries <br>
#</p>

<p style="margin-top: 1em">%HOSTS expo.lcs.mit.edu
xenon.lcs.mit.edu excess.lcs.mit.edu kanga.lcs.mit.edu</p>

<p style="margin-top: 1em">extract.lcs.mit.edu
xenon.lcs.mit.edu #force extract to contact xenon <br>
!xtra.lcs.mit.edu dummy #disallow indirect access <br>
*.lcs.mit.edu %HOSTS #all others get to choose</p>

<p style="margin-top: 1em">If compiled with IPv6 support,
multicast address groups may also be included in the list of
addresses indirect queries are set to. Multicast addresses
may be followed by an <br>
optional / character and hop count. If no hop count is
specified, the multicast hop count defaults to 1, keeping
the packet on the local network. For IPv4 multicasting, the
hop <br>
count is used as the TTL.</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">rincewind.sample.net ff02::1
#IPv6 Multicast to ff02::1 <br>
#with a hop count of 1 <br>
ponder.sample.net CHOOSER 239.192.1.1/16 #Offer a menu of
hosts <br>
#who respond to IPv4 Multicast <br>
# to 239.192.1.1 with a TTL of 16</p>

<p style="margin-top: 1em">CHOOSER <br>
For X terminals that do not offer a host menu for use with
Broadcast or Indirect queries, the chooser program can do
this for them. In the Xaccess file, specify
&lsquo;&lsquo;CHOOSER&rsquo;&rsquo; as <br>
the first entry in the Indirect host list. Chooser will send
a Query request to each of the remaining host names in the
list and offer a menu of all the hosts that respond.</p>

<p style="margin-top: 1em">The list may consist of the word
&lsquo;&lsquo;BROADCAST,&rsquo;&rsquo; in which case chooser
will send a Broadcast instead, again offering a menu of all
hosts that respond. Note that on some operating <br>
systems, UDP packets cannot be broadcast, so this feature
will not work.</p>

<p style="margin-top: 1em">Example Xaccess file using
chooser:</p>

<p style="margin-top: 1em">extract.lcs.mit.edu CHOOSER
%HOSTS #offer a menu of these hosts <br>
xtra.lcs.mit.edu CHOOSER BROADCAST #offer a menu of all
hosts</p>

<p style="margin-top: 1em">The program to use for chooser
is specified by the DisplayManager.DISPLAY.chooser resource.
For more flexibility at this step, the chooser could be a
shell script. Chooser is <br>
the session manager here; it is run instead of a child xdm
to manage the display.</p>

<p style="margin-top: 1em">Resources for this program can
be put into the file named by
DisplayManager.DISPLAY.resources.</p>

<p style="margin-top: 1em">When the user selects a host,
chooser prints the host chosen, which is read by the parent
xdm, and exits. xdm closes its connection to the X server,
and the server resets and <br>
sends another Indirect XDMCP request. xdm remembers the
user&rsquo;s choice (for DisplayManager.choiceTimeout
seconds) and forwards the request to the chosen host, which
starts a ses&acirc; <br>
sion on that display.</p>

<p style="margin-top: 1em">LISTEN <br>
The following configuration directive is also defined for
the Xaccess configuration file:</p>

<p style="margin-top: 1em">LISTEN interface [list of
multicast group addresses] <br>
interface may be a hostname or IP address representing a
network interface on this machine, or the wildcard * to
represent all available network interfaces.</p>

<p style="margin-top: 1em">If one or more LISTEN lines are
specified, xdm only listens for XDMCP connections on the
specified interfaces. If multicast group addresses are
listed on a listen line, xdm joins <br>
the multicast groups on the given interface.</p>

<p style="margin-top: 1em">If no LISTEN lines are given,
the original behavior of listening on all interfaces is
preserved for backwards compatibility. Additionally, if no
LISTEN is specified, xdm joins <br>
the default XDMCP IPv6 multicast group, when compiled with
IPv6 support.</p>

<p style="margin-top: 1em">To disable listening for XDMCP
connections altogther, a line of LISTEN with no addresses
may be specified, or the previously supported method of
setting DisplayManager.request&acirc; <br>
Port to 0 may be used.</p>

<p style="margin-top: 1em">Examples: <br>
LISTEN * ff02::1 # Listen on all interfaces and to the <br>
# ff02::1 IPv6 multicast group. <br>
LISTEN 10.11.12.13 # Listen only on this interface, as long
<br>
# as no other listen directives appear in <br>
# file.</p>

<p style="margin-top: 1em">IPv6 MULTICAST ADDRESS
SPECIFICATION <br>
The Internet Assigned Numbers Authority has has assigned
ff0X:0:0:0:0:0:0:12b as the permanently assigned range of
multicast addresses for XDMCP. The X in the prefix may be
<br>
replaced by any valid scope identifier, such as 1 for
Interface-Local, 2 for Link-Local, 5 for Site-Local, and so
on. (See IETF RFC 4291 or its replacement for further
details <br>
and scope definitions.) xdm defaults to listening on the
Link-Local scope address ff02:0:0:0:0:0:0:12b to most
closely match the old IPv4 subnet broadcast behavior.</p>

<p style="margin-top: 1em">LOCAL SERVER SPECIFICATION <br>
The resource DisplayManager.servers gives a server
specification or, if the values starts with a slash (/), the
name of a file containing server specifications, one per
line.</p>

<p style="margin-top: 1em">Each specification indicates a
display which should constantly be managed and which is not
using XDMCP. This method is used typically for local servers
only. If the resource or <br>
the file named by the resource is empty, xdm will offer
XDMCP service only.</p>

<p style="margin-top: 1em">Each specification consists of
at least three parts: a display name, a display class, a
display type, and (for local servers) a command line to
start the server. A typical <br>
entry for local display number 0 would be:</p>

<p style="margin-top: 1em">:0 Digital-QV local /usr/bin/X
:0</p>

<p style="margin-top: 1em">The display types are:</p>

<p style="margin-top: 1em">local local display: xdm must
run the server <br>
foreign remote display: xdm opens an X connection to a
running server</p>

<p style="margin-top: 1em">The display name must be
something that can be passed in the -display option to an X
program. This string is used to generate the
display-specific resource names, so be careful <br>
to match the names (e.g., use &lsquo;&lsquo;:0 Sun-CG3 local
/usr/bin/X :0&rsquo;&rsquo; instead of
&lsquo;&lsquo;localhost:0 Sun-CG3 local /usr/bin/X
:0&rsquo;&rsquo; if your other resources are specified as
&lsquo;&lsquo;DisplayMan&acirc; <br>
ager._0.session&rsquo;&rsquo;). The display class portion is
also used in the display-specific resources, as the class of
the resource. This is useful if you have a large collection
of <br>
similar displays (such as a corral of X terminals) and would
like to set resources for groups of them. When using XDMCP,
the display is required to specify the display class, so
<br>
the manual for your particular X terminal should document
the display class string for your device. If it
doesn&rsquo;t, you can run xdm in debug mode and look at the
resource strings <br>
which it generates for that device, which will include the
class string.</p>

<p style="margin-top: 1em">When xdm starts a session, it
sets up authorization data for the server. For local
servers, xdm passes &lsquo;&lsquo;-auth
filename&rsquo;&rsquo; on the server&rsquo;s command line to
point it at its autho&acirc; <br>
rization data. For XDMCP servers, xdm passes the
authorization data to the server via the Accept XDMCP
request.</p>

<p style="margin-top: 1em">RESOURCES FILE <br>
The Xresources file is loaded onto the display as a resource
database using xrdb. As the authentication widget reads this
database before starting up, it usually contains
param&acirc; <br>
eters for that widget:</p>

<p style="margin-top: 1em">xlogin*login.translations:
#override Ctrl&lt;Key&gt;R: abort-display() &lt;Key&gt;F1:
set-session-argument(failsafe) finish-field()
&lt;Key&gt;Return: set-session-argument() finish-field()
<br>
xlogin*borderWidth: 3 <br>
xlogin*greeting: CLIENTHOST <br>
#ifdef COLOR <br>
xlogin*greetColor: CadetBlue <br>
xlogin*failColor: red <br>
#endif</p>

<p style="margin-top: 1em">Please note the translations
entry; it specifies a few new translations for the widget
which allow users to escape from the default session (and
avoid troubles that may occur in <br>
it). Note that if #override is not specified, the default
translations are removed and replaced by the new value, not
a very useful result as some of the default translations
<br>
are quite useful (such as &lsquo;&lsquo;&lt;Key&gt;:
insert-char ()&rsquo;&rsquo; which responds to normal
typing).</p>

<p style="margin-top: 1em">This file may also contain
resources for the setup program and chooser.</p>

<p style="margin-top: 1em">SETUP PROGRAM <br>
The Xsetup file is run after the server is reset, but before
the Login window is offered. The file is typically a shell
script. It is run as root, so should be careful about <br>
security. This is the place to change the root background or
bring up other windows that should appear on the screen
along with the Login widget.</p>

<p style="margin-top: 1em">In addition to any specified by
DisplayManager.exportList, the following environment
variables are passed:</p>

<p style="margin-top: 1em">DISPLAY the associated display
name <br>
PATH the value of DisplayManager.DISPLAY.systemPath <br>
SHELL the value of DisplayManager.DISPLAY.systemShell <br>
XAUTHORITY may be set to an authority file</p>

<p style="margin-top: 1em">Note that since xdm grabs the
keyboard, any other windows will not be able to receive
keyboard input. They will be able to interact with the
mouse, however; beware of potential <br>
security holes here. If DisplayManager.DISPLAY.grabServer is
set, Xsetup will not be able to connect to the display at
all. Resources for this program can be put into the file
<br>
named by DisplayManager.DISPLAY.resources.</p>

<p style="margin-top: 1em">Here is a sample Xsetup
script:</p>

<p style="margin-top: 1em">#!/bin/sh <br>
# Xsetup_0 - setup script for one workstation <br>
xcmsdb &lt; /etc/X11/xdm/monitors/alex.0 <br>
xconsole -geometry 480x130-0-0 -notify -verbose -exitOnFail
&amp;</p>

<p style="margin-top: 1em">AUTHENTICATION WIDGET <br>
The authentication widget prompts the user for the username,
password, and/or other required authentication data from the
keyboard. Nearly every imaginable parameter can be
con&acirc; <br>
trolled with a resource. Resources for this widget should be
put into the file named by DisplayManager.DISPLAY.resources.
All of these have reasonable default values, so it is <br>
not necessary to specify any of them.</p>

<p style="margin-top: 1em">The resource file is loaded with
xrdb(1) so it may use the substitutions defined by that
program such as CLIENTHOST for the client hostname in the
login message, or C pre-proces&acirc; <br>
sor #ifdef statements to produce different displays
depending on color depth or other variables.</p>

<p style="margin-top: 1em">Xdm can be compiled with support
for the Xft(3) library for font rendering. If this support
is present, font faces are specified using the resources
with names ending in <br>
&lsquo;&lsquo;face&rsquo;&rsquo; in the fontconfig face
format described in the Font Names section of fonts.conf(5).
If not, then fonts are specified using the resources with
names ending in &lsquo;&lsquo;font&rsquo;&rsquo; <br>
in the traditional X Logical Font Description format
described in the Font Names section of X(7).</p>

<p style="margin-top: 1em">xlogin.Login.width,
xlogin.Login.height, xlogin.Login.x, xlogin.Login.y <br>
The geometry of the Login widget is normally computed
automatically. If you wish to position it elsewhere, specify
each of these resources.</p>

<p style="margin-top: 1em">xlogin.Login.foreground <br>
The color used to display the input typed by the user.</p>

<p style="margin-top: 1em">xlogin.Login.face <br>
The face used to display the input typed by the user when
built with Xft support. The default is
&lsquo;&lsquo;Serif-18&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.font <br>
The font used to display the input typed by the user when
not built with Xft support.</p>

<p style="margin-top: 1em">xlogin.Login.greeting <br>
A string which identifies this window. The default is
&lsquo;&lsquo;X Window System.&rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.unsecureGreeting
<br>
When X authorization is requested in the configuration file
for this display and none is in use, this greeting replaces
the standard greeting. The default is &lsquo;&lsquo;This is
an <br>
unsecure session&rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.greetFace <br>
The face used to display the greeting when built with Xft
support. The default is
&lsquo;&lsquo;Serif-24:italic&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.greetFont <br>
The font used to display the greeting when not built with
Xft support.</p>

<p style="margin-top: 1em">xlogin.Login.greetColor <br>
The color used to display the greeting.</p>

<p style="margin-top: 1em">xlogin.Login.namePrompt <br>
The string displayed to prompt for a user name. Xrdb strips
trailing white space from resource values, so to add spaces
at the end of the prompt (usually a nice thing), <br>
add spaces escaped with backslashes. The default is
&lsquo;&lsquo;Login: &rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.passwdPrompt <br>
The string displayed to prompt for a password, when not
using an authentication system such as PAM that provides its
own prompts. The default is &lsquo;&lsquo;Password:
&rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.promptFace <br>
The face used to display prompts when built with Xft
support. The default is
&lsquo;&lsquo;Serif-18:bold&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.promptFont <br>
The font used to display prompts when not built with Xft
support.</p>

<p style="margin-top: 1em">xlogin.Login.promptColor <br>
The color used to display prompts.</p>


<p style="margin-top: 1em">xlogin.Login.changePasswdMessage
<br>
A message which is displayed when the users password has
expired. The default is &lsquo;&lsquo;Password Change
Required&rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.fail <br>
A message which is displayed when the authentication fails,
when not using an authentication system such as PAM that
provides its own prompts. The default is &lsquo;&lsquo;Login
<br>
incorrect&rsquo;&rsquo;</p>

<p style="margin-top: 1em">xlogin.Login.failFace <br>
The face used to display the failure message when built with
Xft support. The default is
&lsquo;&lsquo;Serif-18:bold&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.failFont <br>
The font used to display the failure message when not built
with Xft support.</p>

<p style="margin-top: 1em">xlogin.Login.failColor <br>
The color used to display the failure message.</p>

<p style="margin-top: 1em">xlogin.Login.failTimeout <br>
The number of seconds that the failure message is displayed.
The default is 10.</p>

<p style="margin-top: 1em">xlogin.Login.logoFileName <br>
Name of an XPM format pixmap to display in the greeter
window, if built with XPM support. The default is no
pixmap.</p>

<p style="margin-top: 1em">xlogin.Login.logoPadding <br>
Number of pixels of space between the logo pixmap and other
elements of the greeter window, if the pixmap is displayed.
The default is 5.</p>

<p style="margin-top: 1em">xlogin.Login.useShape <br>
If set to &lsquo;&lsquo;true&rsquo;&rsquo;, when built with
XPM support, attempt to use the X Non-Rectangular Window
Shape Extension to set the window shape. The default is
&lsquo;&lsquo;true&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.hiColor,
xlogin.Login.shdColor <br>
Raised appearance bezels may be drawn around the greeter
frame and text input boxes by setting these resources.
hiColor is the highlight color, used on the top and left
<br>
sides of the frame, and the bottom and right sides of text
input areas. shdColor is the shadow color, used on the
bottom and right sides of the frame, and the top and <br>
left sides of text input areas. The default for both is the
foreground color, providing a flat appearance.</p>

<p style="margin-top: 1em">xlogin.Login.frameWidth <br>
frameWidth is the width in pixels of the area around the
greeter frame drawn in hiColor and shdColor.</p>

<p style="margin-top: 1em">xlogin.Login.innerFramesWidth
<br>
innerFramesWidth is the width in pixels of the area around
text input areas drawn in hiColor and shdColor.</p>

<p style="margin-top: 1em">xlogin.Login.sepWidth <br>
sepWidth is the width in pixels of the bezeled line between
the greeting and input areas drawn in hiColor and
shdColor.</p>

<p style="margin-top: 1em">xlogin.Login.allowRootLogin <br>
If set to &lsquo;&lsquo;false&rsquo;&rsquo;, don&rsquo;t
allow root (and any other user with uid = 0) to log in
directly. The default is &lsquo;&lsquo;true&rsquo;&rsquo;.
This setting is only checked by some of the authen&acirc;
<br>
tication backends at this time.</p>

<p style="margin-top: 1em">xlogin.Login.allowNullPasswd
<br>
If set to &lsquo;&lsquo;true&rsquo;&rsquo;, allow an
otherwise failing password match to succeed if the account
does not require a password at all. The default is
&lsquo;&lsquo;false&rsquo;&rsquo;, so only users that <br>
have passwords assigned can log in.</p>

<p style="margin-top: 1em">xlogin.Login.echoPasswd <br>
If set to &lsquo;&lsquo;true&rsquo;&rsquo;, a placeholder
character (echoPasswdChar) will be shown for fields normally
set to not echo, such as password input. The default is
&lsquo;&lsquo;false&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">xlogin.Login.echoPasswdChar <br>
Character to display if echoPasswd is true. The default is
&lsquo;&lsquo;*&rsquo;&rsquo;. If set to an empty value, the
cursor will advance for each character input, but no text
will be drawn.</p>

<p style="margin-top: 1em">xlogin.Login.translations <br>
This specifies the translations used for the login widget.
Refer to the X Toolkit documentation for a complete
discussion on translations. The default translation table
<br>
is:</p>

<p style="margin-top: 1em">Ctrl&lt;Key&gt;H:
delete-previous-character() Ctrl&lt;Key&gt;D:
delete-character() Ctrl&lt;Key&gt;B:
move-backward-character() Ctrl&lt;Key&gt;F:
move-forward-character() Ctrl&lt;Key&gt;A:
move-to-begining() Ctrl&lt;Key&gt;E: move-to-end()
Ctrl&lt;Key&gt;K: erase-to-end-of-line() Ctrl&lt;Key&gt;U:
erase-line() Ctrl&lt;Key&gt;X: erase-line()
Ctrl&lt;Key&gt;C: restart-session() Ctrl&lt;Key&gt;\:
abort-session()
&lt;Key&gt;BackSpace:delete-previous-character()
&lt;Key&gt;Delete: delete-previous-character()
&lt;Key&gt;Return: finish-field() &lt;Key&gt;: insert-char()
<br>
The actions which are supported by the widget are:</p>

<p style="margin-top: 1em">delete-previous-character <br>
Erases the character before the cursor.</p>

<p style="margin-top: 1em">delete-character <br>
Erases the character after the cursor.</p>

<p style="margin-top: 1em">move-backward-character <br>
Moves the cursor backward.</p>

<p style="margin-top: 1em">move-forward-character <br>
Moves the cursor forward.</p>

<p style="margin-top: 1em">move-to-begining <br>
(Apologies about the spelling error.) Moves the cursor to
the beginning of the editable text.</p>

<p style="margin-top: 1em">move-to-end <br>
Moves the cursor to the end of the editable text.</p>

<p style="margin-top: 1em">erase-to-end-of-line <br>
Erases all text after the cursor.</p>

<p style="margin-top: 1em">erase-line <br>
Erases the entire text.</p>

<p style="margin-top: 1em">finish-field <br>
If the cursor is in the name field, proceeds to the password
field; if the cursor is in the password field, checks the
current name/password pair. If the name/password <br>
pair is valid, xdm starts the session. Otherwise the failure
message is displayed and the user is prompted again.</p>

<p style="margin-top: 1em">abort-session <br>
Terminates and restarts the server.</p>

<p style="margin-top: 1em">abort-display <br>
Terminates the server, disabling it. This action is not
accessible in the default configuration. There are various
reasons to stop xdm on a system console, such as when <br>
shutting the system down, when using xdmshell, to start
another type of server, or to generally access the console.
Sending xdm a SIGHUP will restart the display. See <br>
the section Controlling XDM.</p>

<p style="margin-top: 1em">restart-session <br>
Resets the X server and starts a new session. This can be
used when the resources have been changed and you want to
test them or when the screen has been overwritten with <br>
system messages.</p>

<p style="margin-top: 1em">insert-char <br>
Inserts the character typed.</p>

<p style="margin-top: 1em">set-session-argument <br>
Specifies a single word argument which is passed to the
session at startup. See the section Session Program.</p>

<p style="margin-top: 1em">allow-all-access <br>
Disables access control in the server. This can be used when
the .Xauthority file cannot be created by xdm. Be very
careful using this; it might be better to disconnect <br>
the machine from the network before doing this.</p>

<p style="margin-top: 1em">On some systems (OpenBSD) the
user&rsquo;s shell must be listed in /etc/shells to allow
login through xdm. The normal password and account
expiration dates are enforced too.</p>

<p style="margin-top: 1em">STARTUP PROGRAM <br>
The Xstartup program is run as root when the user logs in.
It is typically a shell script. Since it is run as root,
Xstartup should be very careful about security. This is the
<br>
place to put commands which add entries to utmp or wtmp
files, (the sessreg program may be useful here), mount
users&rsquo; home directories from file servers, or abort
the session if <br>
logins are not allowed.</p>

<p style="margin-top: 1em">In addition to any specified by
DisplayManager.exportList, the following environment
variables are passed:</p>

<p style="margin-top: 1em">DISPLAY the associated display
name <br>
HOME the initial working directory of the user <br>
LOGNAME the user name <br>
USER the user name <br>
PATH the value of DisplayManager.DISPLAY.systemPath <br>
SHELL the value of DisplayManager.DISPLAY.systemShell <br>
XAUTHORITY may be set to an authority file <br>
WINDOWPATH may be set to the &quot;window path&quot; leading
to the X server</p>

<p style="margin-top: 1em">No arguments are passed to the
script. Xdm waits until this script exits before starting
the user session. If the exit value of this script is
non-zero, xdm discontinues the <br>
session and starts another authentication cycle.</p>

<p style="margin-top: 1em">The sample Xstartup file shown
here prevents login while the file /etc/nologin exists. Thus
this is not a complete example, but simply a demonstration
of the available function&acirc; <br>
ality.</p>

<p style="margin-top: 1em">Here is a sample Xstartup
script:</p>

<p style="margin-top: 1em">#!/bin/sh <br>
# <br>
# Xstartup <br>
# <br>
# This program is run as root after the user is verified
<br>
# <br>
if [ -f /etc/nologin ]; then <br>
xmessage -file /etc/nologin -timeout 30 -center <br>
exit 1 <br>
fi <br>
sessreg -a -l $DISPLAY -x /etc/X11/xdm/Xservers $LOGNAME
<br>
/etc/X11/xdm/GiveConsole <br>
exit 0</p>

<p style="margin-top: 1em">SESSION PROGRAM <br>
The Xsession program is the command which is run as the
user&rsquo;s session. It is run with the permissions of the
authorized user.</p>

<p style="margin-top: 1em">In addition to any specified by
DisplayManager.exportList, the following environment
variables are passed:</p>

<p style="margin-top: 1em">DISPLAY the associated display
name <br>
HOME the initial working directory of the user <br>
LOGNAME the user name <br>
USER the user name <br>
PATH the value of DisplayManager.DISPLAY.userPath <br>
SHELL the user&rsquo;s default shell (from getpwnam) <br>
XAUTHORITY may be set to a non-standard authority file <br>
KRB5CCNAME may be set to a Kerberos credentials cache name
<br>
WINDOWPATH may be set to the &quot;window path&quot; leading
to the X server</p>

<p style="margin-top: 1em">At most installations, Xsession
should look in $HOME for a file .xsession, which contains
commands that each user would like to use as a session.
Xsession should also implement <br>
a system default session if no user-specified session
exists.</p>

<p style="margin-top: 1em">An argument may be passed to
this program from the authentication widget using the
&lsquo;set-session-argument&rsquo; action. This can be used
to select different styles of session. One <br>
good use of this feature is to allow the user to escape from
the ordinary session when it fails. This allows users to
repair their own .xsession if it fails, without requiring
<br>
administrative intervention. The example following
demonstrates this feature.</p>

<p style="margin-top: 1em">This example recognizes the
special &lsquo;&lsquo;failsafe&rsquo;&rsquo; mode, specified
in the translations in the Xresources file, to provide an
escape from the ordinary session. It also requires <br>
that the .xsession file be executable so we don&rsquo;t have
to guess what shell it wants to use.</p>

<p style="margin-top: 1em">#!/bin/sh <br>
# <br>
# Xsession <br>
# <br>
# This is the program that is run as the client <br>
# for the display manager.</p>

<p style="margin-top: 1em">case $# in <br>
1) <br>
case $1 in <br>
failsafe) <br>
exec xterm -geometry 80x24-0-0 <br>
;; <br>
esac <br>
esac</p>

<p style="margin-top: 1em">startup=$HOME/.xsession <br>
resources=$HOME/.Xresources</p>

<p style="margin-top: 1em">if [ -f &quot;$startup&quot; ];
then <br>
exec &quot;$startup&quot; <br>
else <br>
if [ -f &quot;$resources&quot; ]; then <br>
xrdb -load &quot;$resources&quot; <br>
fi <br>
twm &amp; <br>
xman -geometry +10-10 &amp; <br>
exec xterm -geometry 80x24+10+10 -ls <br>
fi</p>

<p style="margin-top: 1em">The user&rsquo;s .xsession file
might look something like this example. Don&rsquo;t forget
that the file must have execute permission. <br>
#! /bin/csh <br>
# no -f in the previous line so .cshrc gets run to set $PATH
<br>
twm &amp; <br>
xrdb -merge &quot;$HOME/.Xresources&quot; <br>
emacs -geometry +0+50 &amp; <br>
xbiff -geometry -430+5 &amp; <br>
xterm -geometry -0+50 -ls</p>

<p style="margin-top: 1em">RESET PROGRAM <br>
Symmetrical with Xstartup, the Xreset script is run after
the user session has terminated. Run as root, it should
contain commands that undo the effects of commands in
Xstartup, <br>
updating entries in utmp or wtmp files, or unmounting
directories from file servers. The environment variables
that were passed to Xstartup are also passed to Xreset.</p>

<p style="margin-top: 1em">A sample Xreset script: <br>
#!/bin/sh <br>
# <br>
# Xreset <br>
# <br>
# This program is run as root after the session ends <br>
# <br>
sessreg -d -l $DISPLAY -x /etc/X11/xdm/Xservers $LOGNAME
<br>
/etc/X11/xdm/TakeConsole <br>
exit 0</p>

<p style="margin-top: 1em">CONTROLLING THE SERVER <br>
Xdm controls local servers using POSIX signals. SIGHUP is
expected to reset the server, closing all client connections
and performing other cleanup duties. SIGTERM is expected
<br>
to terminate the server. If these signals do not perform the
expected actions, the resources
DisplayManager.DISPLAY.resetSignal and
DisplayManager.DISPLAY.termSignal can specify <br>
alternate signals.</p>

<p style="margin-top: 1em">To control remote terminals not
using XDMCP, xdm searches the window hierarchy on the
display and uses the protocol request KillClient in an
attempt to clean up the terminal for <br>
the next session. This may not actually kill all of the
clients, as only those which have created windows will be
noticed. XDMCP provides a more sure mechanism; when xdm
closes <br>
its initial connection, the session is over and the terminal
is required to close all other connections.</p>

<p style="margin-top: 1em">CONTROLLING XDM <br>
Xdm responds to two signals: SIGHUP and SIGTERM. When sent a
SIGHUP, xdm rereads the configuration file, the access
control file, and the servers file. For the servers file, it
<br>
notices if entries have been added or removed. If a new
entry has been added, xdm starts a session on the associated
display. Entries which have been removed are disabled
imme&acirc; <br>
diately, meaning that any session in progress will be
terminated without notice and no new session will be
started.</p>

<p style="margin-top: 1em">When sent a SIGTERM, xdm
terminates all sessions in progress and exits. This can be
used when shutting down the system.</p>

<p style="margin-top: 1em">Xdm attempts to mark its various
sub-processes for ps(1) by editing the command line argument
list in place. Because xdm can&rsquo;t allocate additional
space for this task, it is <br>
useful to start xdm with a reasonably long command line
(using the full path name should be enough). Each process
which is servicing a display is marked -display.</p>

<p style="margin-top: 1em">ADDITIONAL LOCAL DISPLAYS <br>
To add an additional local display, add a line for it to the
Xservers file. (See the section Local Server
Specification.)</p>

<p style="margin-top: 1em">Examine the display-specific
resources in xdm-config (e.g., DisplayManager._0.authorize)
and consider which of them should be copied for the new
display. The default xdm-config <br>
has all the appropriate lines for displays :0 and :1.</p>

<p style="margin-top: 1em">OTHER POSSIBILITIES <br>
You can use xdm to run a single session at a time, using the
4.3 init options or other suitable daemon by specifying the
server on the command line:</p>

<p style="margin-top: 1em">xdm -server &acirc;:0
SUN-3/60CG4 local /usr/bin/X :0&acirc;</p>

<p style="margin-top: 1em">Or, you might have a file server
and a collection of X terminals. The configuration for this
is identical to the sample above, except the Xservers file
would look like</p>

<p style="margin-top: 1em">extol:0 VISUAL-19 foreign <br>
exalt:0 NCD-19 foreign <br>
explode:0 NCR-TOWERVIEW3000 foreign</p>

<p style="margin-top: 1em">This directs xdm to manage
sessions on all three of these terminals. See the section
Controlling Xdm for a description of using signals to enable
and disable these terminals in <br>
a manner reminiscent of init(8).</p>

<p style="margin-top: 1em">LIMITATIONS <br>
One thing that xdm isn&rsquo;t very good at doing is
coexisting with other window systems. To use multiple window
systems on the same hardware, you&rsquo;ll probably be more
interested in <br>
xinit.</p>

<p style="margin-top: 1em">FILES <br>
/etc/X11/xdm/xdm-config <br>
the default configuration file</p>

<p style="margin-top: 1em">$HOME/.Xauthority user
authorization file where xdm stores keys for clients to
read</p>

<p style="margin-top: 1em">/usr/libexec/chooser <br>
the default chooser</p>

<p style="margin-top: 1em">/usr/bin/xrdb the default
resource database loader</p>

<p style="margin-top: 1em">/usr/bin/X the default
server</p>

<p style="margin-top: 1em">/usr/bin/xterm the default
session program and failsafe client</p>


<p style="margin-top: 1em">/var/lib/xdm/A&lt;display&gt;-&lt;suffix&gt;
<br>
the default place for authorization files</p>

<p style="margin-top: 1em">/tmp/K5C&lt;display&gt; Kerberos
credentials cache</p>

<p style="margin-top: 1em">SEE ALSO <br>
X(7), xinit(1), xauth(1), xrdb(1), Xsecurity(7), sessreg(1),
Xserver(1), xdmshell(1), fonts.conf(5). <br>
X Display Manager Control Protocol <br>
IETF RFC 4291: IP Version 6 Addressing Architecture.</p>

<p style="margin-top: 1em">AUTHOR <br>
Keith Packard, MIT X Consortium</p>

<p style="margin-top: 1em">X Version 11 xdm 1.1.11
XDM(1)</p>
<hr>
</body>
</html>
