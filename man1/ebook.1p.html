<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EBOOK(1p)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EBOOK(1p)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">EBOOK(1p)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ebook - create and manipulate e-books from the command line
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
 ebook COMMAND arg1 arg2 --opt1 --opt2
</pre>
<div class="Pp"></div>
See also &quot;EXAMPLES&quot;.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<h2 class="Ss" title="Ss" id="&quot;adddoc&quot;"><a class="selflink" href="#&quot;adddoc&quot;">&quot;adddoc&quot;</a></h2>
Adds a documents to both the book manifest and spine.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf&quot;</dt>
  <dd class="It-tag">The OPF file to modify. If not specified one will be
      searched for in the current directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--identifier&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--id&quot;</dt>
  <dd class="It-tag">The ID attribute to use for the added manifest item. This
      is required, and ebook will abort if it is not specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--mimetype&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--mtype&quot;</dt>
  <dd class="It-tag">The mime type string to use for the added manifest item. If
      not specified, it will be autodetected via File::Mimeinfo::Magic. This may
      not result in an optimal string.</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook adddoc --opf mybook.opf --id 'text-ch1' chapter1.html
</pre>
<h2 class="Ss" title="Ss" id="&quot;additem&quot;"><a class="selflink" href="#&quot;additem&quot;">&quot;additem&quot;</a></h2>
Add an item to the book manifest, but not the spine.
<div class="Pp"></div>
Note that the &quot;fix&quot; command will automatically insert manifest items
  for any local files referenced by existing manifest items.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf&quot;</dt>
  <dd class="It-tag">The OPF file to modify. If not specified one will be
      searched for in the current directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--identifier&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--id&quot;</dt>
  <dd class="It-tag">The ID attribute to use for the added manifest item. This
      is required, and ebook will abort if it is not specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--mimetype&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--mtype&quot;</dt>
  <dd class="It-tag">The mime type string to use for the added manifest item. If
      not specified, it will be autodetected via File::Mimeinfo::Magic. This may
      not result in an optimal string.</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook additem --opf mybook.opf --id 'illus-ch1' chapter1-illus.jpg
</pre>
<h2 class="Ss" title="Ss" id="&quot;bisac&quot;"><a class="selflink" href="#&quot;bisac&quot;">&quot;bisac&quot;</a></h2>
Search for a BISAC code matching a case-insensitive regular expression.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;regexp&quot;</dt>
  <dd class="It-tag">The first argument is taken as a regular expression to use
      for the search. If this is either '.' or not specified, the entire list of
      valid codes is printed.
    <div style="height: 1.00em;">&#x00A0;</div>
    This requires that the BISAC codes be downloaded ahead of time. (See
      &quot;dlbisac&quot;.)</dd>
</dl>
<h2 class="Ss" title="Ss" id="&quot;blank&quot;"><a class="selflink" href="#&quot;blank&quot;">&quot;blank&quot;</a></h2>
Create a blank e-book structure.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf filename.opf&quot;</dt>
  <dd class="It-tag">Use the specified OPF file. This can also be specified as
      the first non-option argument, which will override this option if it
      exists. If no file is specified, the program will abort with an error.
      =item &quot;--author&quot; &quot;Author Name&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    The author of the book. If not specified, defaults to &quot;Unknown
      Author&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--title&quot; &quot;Title Name&quot;</dt>
  <dd class="It-tag">The title of the book. If not specified, defaults to
      &quot;Unknown Title&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dir directory&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-d directory&quot;</dt>
  <dd class="It-tag">Output the OPF file in this directory, creating it if
      necessary.</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook blank newfile.opf --author &quot;Me Myself&quot; --title &quot;New File&quot;
 ebook blank --opffile newfile.opf --author &quot;Me Myself&quot; --title &quot;New File&quot;
</pre>
<div class="Pp"></div>
Both of those commands have the same effect.
<h2 class="Ss" title="Ss" id="&quot;config&quot;"><a class="selflink" href="#&quot;config&quot;">&quot;config&quot;</a></h2>
Make changes to the EBook::Tools configuration file.
<div class="Pp"></div>
The configuration file itself is located as either
  &quot;$ENV{HOME}/.ebooktools/config.ini&quot; or as
  &quot;$ENV{USERPROFILE}\Application Data\EBook-Tools&quot;, depending on
  platform and which directory is found first. See &quot;
  <i>userconfigdir()</i>&quot; in EBook::Tools for details.
<div class="Pp"></div>
<i>Arguments / Subcommands</i>
<div class="Pp"></div>
Configuration is always handled in the format of:
<div class="Pp"></div>
<pre>
 ebook config subcommand value
</pre>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;default&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Replace any existing configuration file with a default template. This
      creates the file if it does not exist. This should be done once before any
      other configuration manipulation is done, unless a configuration file has
      been manually created ahead of time.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;debug&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Sets the default debugging level when no verbosity is specified. Note that
      verbosity can only be increased, not decreased, with the &quot;-v&quot;
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;tidysafety&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Sets the default safety level when tidy is used. Valid values are from 0-4.
      See &quot;unpack&quot; for details on what each value means.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;mobipids&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    A comma-separated list of Mobipocket PIDs to try to use to decrypt e-books.
      This value is only used if the appropriate plug-in modules or helper
      applications are available, as DRM is not supported natively by
      EBook::Tools. Note that if the PID includes a $ character, the entire PID
      string has to be enclosed in single quotes.</dd>
</dl>
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
<pre>
 ebook config default
 ebook config debug 2
 ebook config mobipids '1234567890,2345678$90'
</pre>
<h2 class="Ss" title="Ss" id="&quot;convert&quot;"><a class="selflink" href="#&quot;convert&quot;">&quot;convert&quot;</a></h2>
Unpacks the ebook specified as the first argument, runs standard fixes on the
  contents, and repacks it into a new format in the output file specified as the
  second argument. Currently the only supported output format is epub, which is
  the format you will get irrespective of the extension you actually give the
  output file.
<div class="Pp"></div>
<i>Options</i>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">All options from &quot;unpack&quot; and
  &quot;fix&quot; are technically valid here as well, though of course some
  options are nonsensical in this context and will likely break the conversion
  (e.g. --nosave).</div>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook convert MyBook.prc MyBook.epub
 ebook convert --name MyBook.lit /home/myname/MyBook.epub
</pre>
<h2 class="Ss" title="Ss" id="&quot;dlbisac&quot;"><a class="selflink" href="#&quot;dlbisac&quot;">&quot;dlbisac&quot;</a></h2>
Downloads and caches the Book Industry Study Group BISAC codes into a local
  database. This will destroy the existing contents of that table if this has
  been done previously.
<h2 class="Ss" title="Ss" id="&quot;downconvert&quot;"><a class="selflink" href="#&quot;downconvert&quot;">&quot;downconvert&quot;</a></h2>
<h2 class="Ss" title="Ss" id="&quot;dc&quot;"><a class="selflink" href="#&quot;dc&quot;">&quot;dc&quot;</a></h2>
If the appropriate helpers or plugins are available, write a copy of the input
  file with the DRM restrictions removed.
<div class="Pp"></div>
NOTE: no actual DRM-removal code is present in this package. This is just
  presents a unified interface to other programs that have that capability.
<div class="Pp"></div>
<i>Arguments</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;infile&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    The first non-option argument is taken to be the input file. If not
      specified, the program exits with an error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;outfile&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    The second non-option argument is taken to be the output file. If not
      specified, the program will use a name based on the input file, appending
      '-nodrm' to the basename and keeping the extension. In the special case of
      Mobipocket files ending in '-sm', the '-sm' portion of the basename is
      simply removed, and nothing else is appended.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;key&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    The third non-option argument is taken to be either the decryption key/PID,
      or in the case of Microsoft Reader (.lit) files, the &quot;keys.txt&quot;
      file containing the decryption keys.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not specified, this will be looked up from the configuration file.
      Convertlit keyfiles will be looked for in standard locations. If no key is
      found, the command aborts and exits with an error.</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook downconvert NewBook.lit NewBook-readable.lit mykeys.txt
 ebook dc MyBook-sm.prc
</pre>
<h2 class="Ss" title="Ss" id="&quot;fix&quot;"><a class="selflink" href="#&quot;fix&quot;">&quot;fix&quot;</a></h2>
Find and fix problems with an e-book, including enforcing a standard
  specification and ensuring that all linked objects are present in the
  manifest.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf filename.opf&quot;</dt>
  <dd class="It-tag">Use the specified OPF file. This can also be specified as
      the first non-option argument, which will override this option if it
      exists. If no file is specified, one will be searched for.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--oeb12&quot;</dt>
  <dd class="It-tag">Force the OPF to conform to the OEB 1.2 standard. This is
      the default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf20&quot;</dt>
  <dd class="It-tag">Force the OPF to conform to the OPF 2.0 standard. If both
      this and &quot;--oeb12&quot; are specified, the program will abort with an
      error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--mobi&quot;</dt>
  <dd class="It-tag">Correct Mobipocket-specific elements, creating an output
      element to force UTF-8 output if one does not yet exist.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--erotic&quot; or &quot;--sex&quot;</dt>
  <dd class="It-tag">Enable special handling for erotic fiction (most notably
      special subject normalization rules).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--names&quot;</dt>
  <dd class="It-tag">Normalize names to standard capitalization and format
      (primary name display is &quot;First Middle Last&quot;, but file-as is
      &quot;Last, First Middle&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is not done by default as it can damage unusual but correct names.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&quot;genepub&quot;"><a class="selflink" href="#&quot;genepub&quot;">&quot;genepub&quot;</a></h2>
Generate a .epub book from existing OPF data.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--input filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--i filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf filename.opf&quot;</dt>
  <dd class="It-tag">Use the specified OPF file. If no file is specified, one
      will be searched for.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--output bookname.epub&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-o bookname.epub&quot;</dt>
  <dd class="It-tag">Use the specified name for the final output file. This can
      also be specified as the first non-option argument, which will override
      this option if it exists. If not specified, the book will have the same
      filename as the OPF file, with the extension changed to
    &quot;.epub&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dir directory&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-d directory&quot;</dt>
  <dd class="It-tag">Output the final .epub book into the specified directory.
      The default is to use the current working directory.</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook genepub mybook.opf -o my_special_book.epub -d ../epubbooks
</pre>
<div class="Pp"></div>
or in the simplest case:
<div class="Pp"></div>
<pre>
 ebook genepub
</pre>
<h2 class="Ss" title="Ss" id="&quot;genimp&quot;"><a class="selflink" href="#&quot;genimp&quot;">&quot;genimp&quot;</a></h2>
Generate a eBookwise .imp book from a .RES directory
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--input DIRNAME.RES&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-i DIRNAME.RES&quot;</dt>
  <dd class="It-tag">Specifies the resource directory to use for input. A valid
      resource directory will contain at least a &quot;RSRC.INF&quot; file, a
      &quot;DATA.FRK&quot; file, and several other files with
      four-capital-letter filenames.
    <div style="height: 1.00em;">&#x00A0;</div>
    This can also be specified as the first non-option argument, which will
      override this option if it exists. If not specified, the current directory
      will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--output bookname.epub&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-o bookname.epub&quot;</dt>
  <dd class="It-tag">Use the specified name for the final output file. If not
      specified, the book will have the same filename as the input, with the
      extension changed to &quot;.imp&quot;.</dd>
</dl>
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
<pre>
 ebook genimp MyUnpackedBook.RES MyBook.imp
 ebook genimp --resdir ../MyUnpackedBook.RES -f imp/MyBook.imp
</pre>
<h2 class="Ss" title="Ss" id="&quot;genmobi&quot;"><a class="selflink" href="#&quot;genmobi&quot;">&quot;genmobi&quot;</a></h2>
Generate a Mobipocket .mobi/.prc book from OPF, HTML, or ePub input.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--input filename&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--i filename&quot;</dt>
  <dd class="It-tag">Use the specified file for input. Valid formats are OPF,
      HTML, and ePub. This can also be specified as the first non-option
      argument, which will override this option if it exists. If no file is
      specified, an OPF file in the current directory will be searched for.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--output bookname.prc&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-o bookname.prc&quot;</dt>
  <dd class="It-tag">Use the specified name for the final output file. If not
      specified, the book will have the same filename as the input file, with
      the extension changed to &quot;.mobi&quot; (this file is always created by
      &quot;mobigen&quot;, specifying a different filename only causes it to be
      renamed afterwards).
    <div style="height: 1.00em;">&#x00A0;</div>
    This can also be specified as the second non-option argument, which will
      override this option if it exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dir directory&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-d directory&quot;</dt>
  <dd class="It-tag">Output the final book into the specified directory. The
      default is to use the current working directory, which is where
      &quot;mobigen&quot; will always place it initially; if specified this only
      forces the file to be moved after generation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--compression x&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-c x&quot;</dt>
  <dd class="It-tag">Use the specified compression level &quot;x&quot;, where 0
      is no compression, 1 is PalmDoc compression, and 2 is HUFF/CDIC
      compression. If not specified, defaults to 1 (PalmDoc compression).</dd>
</dl>
<div class="Pp"></div>
<i>Example</i>
<div class="Pp"></div>
<pre>
 ebook genmobi mybook.opf -o my_special_book.prc -d ../mobibooks
 ebook genmobi mybook.html mybook.prc -c2
</pre>
<div class="Pp"></div>
or in the simplest case:
<div class="Pp"></div>
<pre>
 ebook genmobi
</pre>
<h2 class="Ss" title="Ss" id="&quot;genncx&quot;"><a class="selflink" href="#&quot;genncx&quot;">&quot;genncx&quot;</a></h2>
Given an OPF file, creates a NCX-format table of contents from the package
  unique-identifier, the dc:title, dc:creator, and spine elements, and then add
  the NCX entry to the manifest if it is not already referenced.
<div class="Pp"></div>
The OPF file will be cleaned to OPF20 format before this happens.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile filename.opf&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf filename.opf&quot;</dt>
  <dd class="It-tag">Use the specified OPF file. This can also be specified as
      the first non-option argument, which will override this option if it
      exists. If no file is specified, one will be searched for.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&quot;impmeta&quot;"><a class="selflink" href="#&quot;impmeta&quot;">&quot;impmeta&quot;</a></h2>
Set specific metadata values in an ETI .imp file.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--input filename.imp&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;-i filename.imp&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the input filename. This can also be specified as the first
      argument, in which case the -i option will be ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--output modified.imp&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;-o modified.imp&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the output filename. If not specified, the input file will be
      overwritten.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--identifier&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the identifier metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--category&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--cat&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the category metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--subcategory&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--subcat&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the subcategory metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--title&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the title metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--lastname&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the author last name metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--middlename&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the author middle name metadata.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--firstname&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specify the author first name metadata. Note that IMP files commonly place
      the full name in this component, and leave the middlename and lastname
      entries blank.</dd>
</dl>
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
<pre>
 ebook impmeta mybook.imp --title 'Fixed Title' --lastname 'John Q. Brandy'
 ebook impmeta -i mybook.imp -o fixed.imp --title 'Fixed Title'
</pre>
<h2 class="Ss" title="Ss" id="&quot;setcover&quot;"><a class="selflink" href="#&quot;setcover&quot;">&quot;setcover&quot;</a></h2>
Sets the cover image
<div class="Pp"></div>
Takes as a single argument the href of the file to use.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--opffile&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--opf&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the OPF file to modify. If not specified, the script will attempt
      to find one</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--identifier&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--id&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the ID to assign to the associated manifest item.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&quot;setmeta&quot;"><a class="selflink" href="#&quot;setmeta&quot;">&quot;setmeta&quot;</a></h2>
Set specific metadata values on an OPF file, creating a new entry if none
  exists.
<div class="Pp"></div>
Both the element to set and the value are specified as additional arguments, not
  as options.
<div class="Pp"></div>
The elements that can be set are currently:
<dl class="Bl-tag">
  <dt class="It-tag">author</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">date</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">description</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">publisher</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">rights</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">series</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">subject</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">title</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">type</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
The 'series' values can take an extra argument containing the series index
  position.
<div class="Pp"></div>
The 'subject' elements can be added multiple times (including in a single
  command-line, though --id will only set the ID on the first one specified).
  Other entries will be overwritten.
<div class="Pp"></div>
The element argument can be shortened to the minimum number of letters necessary
  to uniquely identify it.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--opffile&quot; =item * &quot;--opf&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the OPF file to modify. If not specified, the script will attempt
      to find one in the current directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--delete&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Allows the deletion of subject and series metadata. Has no effect on other
      elements.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--fileas&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the 'file-as' attribute when setting an author. Has no effect on
      other elements.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--identifier&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--id&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the ID to assign to the element.</dd>
</dl>
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
<pre>
 ebook setmeta series 'Some Other Series' 03
 ebook setmeta title 'My Great Title'
 ebook setmeta t 'My Great Title'
 ebook --opf newfile.opf setmeta author 'John Smith' --fileas 'Smith, John' --id mainauthor
</pre>
<h2 class="Ss" title="Ss" id="&quot;splitmeta&quot;"><a class="selflink" href="#&quot;splitmeta&quot;">&quot;splitmeta&quot;</a></h2>
Split the &lt;metadata&gt;...&lt;/metadata&gt; block out of a pseudo-HTML file
  that contains one.
<h2 class="Ss" title="Ss" id="&quot;splitpre&quot;"><a class="selflink" href="#&quot;splitpre&quot;">&quot;splitpre&quot;</a></h2>
Split &lt;pre&gt;...&lt;/pre&gt; blocks out of an existing HTML file, wrapping
  each one found into a separate HTML file.
<div class="Pp"></div>
The first non-option argument is taken to be the input file. The second
  non-option argument is taken to be the basename of the output files.
<h2 class="Ss" title="Ss" id="&quot;stripscript&quot;"><a class="selflink" href="#&quot;stripscript&quot;">&quot;stripscript&quot;</a></h2>
Strips &lt;script&gt;...&lt;/script&gt; blocks out of a HTML file.
<div class="Pp"></div>
The first non-option argument is taken to be the input file. The second
  non-option argument is taken to be the output file. If the latter is not
  specified, the input file will be overwritten.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;--noscript&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
    Strips &lt;noscript&gt;...&lt;/noscript&gt; blocks as well.</dd>
</dl>
<h2 class="Ss" title="Ss" id="&quot;tidyxhtml&quot;"><a class="selflink" href="#&quot;tidyxhtml&quot;">&quot;tidyxhtml&quot;</a></h2>
Run tidy on a HTML file to enforce valid XHTML output (required by the OPF 2.0
  specification).
<h2 class="Ss" title="Ss" id="&quot;tidyxml&quot;"><a class="selflink" href="#&quot;tidyxml&quot;">&quot;tidyxml&quot;</a></h2>
Run tidy an a XML file (for neatness).
<h2 class="Ss" title="Ss" id="&quot;unpack_ebook&quot;"><a class="selflink" href="#&quot;unpack_ebook&quot;">&quot;unpack_ebook&quot;</a></h2>
Unpacks an ebook into its component parts, creating an OPF for them if
  necessary.
<div class="Pp"></div>
<i>Options</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--input&quot; =item &quot;-i&quot;</dt>
  <dd class="It-tag">The filename of the ebook to unpack. This can also be
      specified as the first non-option argument, in which case it will override
      the option if it exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dir&quot; =item &quot;-d&quot;</dt>
  <dd class="It-tag">The directory to unpack into, which will be created if it
      does not exist, defaulting to the filename with the extension removed.
      This can also be specified as the second non-option argument, in which
      case it will override the option if it exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--format&quot;</dt>
  <dd class="It-tag">The unpacking routines should autodetect the type of book
      under normal conditions. If autodetection fails, a format can be forced
      here. See EBook::Tools::Unpack for a list of available formats.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--htmlconvert&quot;</dt>
  <dd class="It-tag">Attempt to convert the extracted text to HTML. This is
      obviously only of value if the format doesn't use HTML normally.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--raw&quot;</dt>
  <dd class="It-tag">This causes a lot of raw, unparsed, unmodified data to be
      dumped into the directory along with everything else. It's useful for
      debugging exactly what was in the file being unpacked, but not for much
      else.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--author&quot;</dt>
  <dd class="It-tag">Set the primary author of the unpacked e-book, overriding
      what is detected. Not all e-book formats contain author metadata, and if
      none is found and this is not specified the primary author will be set to
      'Unknown Author'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--title&quot;</dt>
  <dd class="It-tag">Set the title of the unpacked e-book, overriding what is
      detected. A title will always be detected in some form from the e-book,
      but the exact text can be overridden here.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opffile&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--opf&quot;</dt>
  <dd class="It-tag">The filename of the OPF metadata file that will be
      generated. If not specified, defaults to &quot;content.opf&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--tidy&quot;</dt>
  <dd class="It-tag">Run tidy on any HTML output files to convert them to valid
      XHTML. Be warned that this can occasionally change the formatting, as Tidy
      isn't very forgiving on certain common tricks (such as empty &lt;pre&gt;
      elements with style elements) that abuse the standard.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--tidycmd&quot;</dt>
  <dd class="It-tag">The tidy executable name. This has to be a fully qualified
      pathname if tidy isn't on the path. Defaults to 'tidy'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--tidysafety&quot;</dt>
  <dd class="It-tag">The safety level to use when running tidy (default is 1).
      Potential values are:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;$tidysafety &lt; 1&quot;:</dt>
  <dd class="It-tag">No checks performed, no error files kept, works like a
      clean tidy -m
    <div style="height: 1.00em;">&#x00A0;</div>
    This setting is DANGEROUS!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;$tidysafety == 1&quot;:</dt>
  <dd class="It-tag">Overwrites original file if there were no errors, but even
      if there were warnings. Keeps a log of errors, but not warnings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;$tidysafety == 2&quot;:</dt>
  <dd class="It-tag">Overwrites original file if there were no errors, but even
      if there were warnings. Keeps a log of both errors and warnings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;$tidysafety == 3&quot;:</dt>
  <dd class="It-tag">Overwrites original file only if there were no errors or
      warnings. Keeps a log of both errors and warnings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$tidysafety = 4&gt;:</dt>
  <dd class="It-tag">Never overwrites original file. Keeps a log of both errors
      and warnings.</dd>
</dl>
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
<pre>
 ebook unpack mybook.pdb My_Book --author &quot;By Me&quot;
 ebook unpack -i mybook.pdb -d My_Book --author &quot;By Me&quot;
</pre>
<div class="Pp"></div>
Both of the above commands do the same thing
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
 ebook splitmeta book.html mybook.opf
 ebook tidyxhtml book.html
 ebook tidyxml mybook.opf
 ebook fix mybook.opf --oeb12 --mobi
 ebook genepub
 ebook blank newbook.opf --title &quot;My Title&quot; --author &quot;My Name&quot;
 ebook adddoc myfile.html
 ebook fix newbook.opf --opf20 -v
 ebook genepub
 ebook unpack mybook.pdb my_book
 cd my_book
 ebook addoc new_document.html
 ebook fix
 ebook genepub
</pre>
<h1 class="Sh" title="Sh" id="BUGS/TODO"><a class="selflink" href="#BUGS/TODO">BUGS/TODO</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Need to implement a one-pass conversion from one format to
      another. This will wait until more formats are supported by the underlying
      modules, however.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Documentation is incomplete</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Not all configuration file options are actually used</dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2008 Zed Pobre
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
Licensed to the public under the terms of the GNU GPL, version 2.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-05-28</td>
    <td class="foot-os">perl v5.22.2</td>
  </tr>
</table>
</body>
</html>
