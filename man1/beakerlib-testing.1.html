<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:54:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>TESTING.SH(1) User Contributed Perl Documentation
TESTING.SH(1)</p>

<p style="margin-top: 1em">NAME <br>
BeakerLib - testing - asserting functions, watchdog and
report</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This file contains functions related directly to testing.
These functions are various asserts affecting final result
of the phase. Watchdog and the report result function is
<br>
included as well.</p>

<p style="margin-top: 1em">FUNCTIONS <br>
Manual Asserts <br>
rlPass</p>

<p style="margin-top: 1em">Manual assertion, asserts and
logs PASS.</p>

<p style="margin-top: 1em">rlPass comment</p>

<p style="margin-top: 1em">comment <br>
Short test summary.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS.</p>

<p style="margin-top: 1em">rlFail</p>

<p style="margin-top: 1em">Manual assertion, asserts and
logs FAIL.</p>

<p style="margin-top: 1em">rlFail comment</p>

<p style="margin-top: 1em">comment <br>
Short test summary.</p>

<p style="margin-top: 1em">Returns 1 and asserts FAIL.</p>

<p style="margin-top: 1em">Arithmetic Asserts <br>
rlAssert0</p>

<p style="margin-top: 1em">Assertion checking for the
equality of parameter to zero.</p>

<p style="margin-top: 1em">rlAssert0 comment value</p>

<p style="margin-top: 1em">comment <br>
Short test summary, e.g. &quot;Test if compilation ended
successfully&quot;.</p>

<p style="margin-top: 1em">value <br>
Integer value (usually return code of a command).</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value == 0&quot;.</p>

<p style="margin-top: 1em">rlAssertEquals</p>

<p style="margin-top: 1em">Assertion checking for the
equality of two parameters.</p>

<p style="margin-top: 1em">rlAssertEquals comment value1
value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary, e.g. &quot;Test if all 3 packages have
been downloaded&quot;.</p>

<p style="margin-top: 1em">value1 <br>
First parameter to compare, can be a number or a string</p>

<p style="margin-top: 1em">value2 <br>
Second parameter to compare, can be a number or a string</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 == value2&quot;.</p>

<p style="margin-top: 1em">rlAssertNotEquals</p>

<p style="margin-top: 1em">Assertion checking for the
non-equality of two parameters.</p>

<p style="margin-top: 1em">rlAssertNotEquals comment value1
value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary, e.g. &quot;Test if return code is not
139&quot;.</p>

<p style="margin-top: 1em">value1 <br>
First parameter to compare, can be a number or a string</p>

<p style="margin-top: 1em">value2 <br>
Second parameter to compare, can be a number or a string</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 != value2&quot;.</p>

<p style="margin-top: 1em">rlAssertGreater</p>

<p style="margin-top: 1em">Assertion checking whether first
parameter is greater than the second one.</p>

<p style="margin-top: 1em">rlAssertGreater comment value1
value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary, e.g. &quot;Test whether there are
running more instances of program.&quot;</p>

<p style="margin-top: 1em">value1 <br>
Integer value.</p>

<p style="margin-top: 1em">value2 <br>
Integer value.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 &gt; value2&quot;.</p>

<p style="margin-top: 1em">rlAssertGreaterOrEqual</p>

<p style="margin-top: 1em">Assertion checking whether first
parameter is greater or equal to the second one.</p>

<p style="margin-top: 1em">rlAssertGreaterOrEqual comment
value1 value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary (e.g. &quot;There should present at least
one...&quot;)</p>

<p style="margin-top: 1em">value1 <br>
Integer value.</p>

<p style="margin-top: 1em">value2 <br>
Integer value.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 X= value2&quot;.</p>

<p style="margin-top: 1em">rlAssertLesser</p>

<p style="margin-top: 1em">Assertion checking whether first
parameter is lesser than the second one.</p>

<p style="margin-top: 1em">rlAssertLesser comment value1
value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary, e.g. &quot;Test whether there are
running more instances of program.&quot;</p>

<p style="margin-top: 1em">value1 <br>
Integer value.</p>

<p style="margin-top: 1em">value2 <br>
Integer value.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 X value2&quot;.</p>

<p style="margin-top: 1em">rlAssertLesserOrEqual</p>

<p style="margin-top: 1em">Assertion checking whether first
parameter is lesser or equal to the second one.</p>

<p style="margin-top: 1em">rlAssertLesserOrEqual comment
value1 value2</p>

<p style="margin-top: 1em">comment <br>
Short test summary (e.g. &quot;There should present at least
one...&quot;)</p>

<p style="margin-top: 1em">value1 <br>
Integer value.</p>

<p style="margin-top: 1em">value2 <br>
Integer value.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;value1 X= value2&quot;.</p>

<p style="margin-top: 1em">File Asserts <br>
rlAssertExists</p>

<p style="margin-top: 1em">Assertion checking for the
existence of a file or a directory.</p>

<p style="margin-top: 1em">rlAssertExists
file|directory</p>

<p style="margin-top: 1em">file|directory <br>
Path to the file or directory.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file&quot; exists.</p>

<p style="margin-top: 1em">rlAssertNotExists</p>

<p style="margin-top: 1em">Assertion checking for the
non-existence of a file or a directory.</p>

<p style="margin-top: 1em">rlAssertNotExists
file|directory</p>

<p style="margin-top: 1em">file|directory <br>
Path to the file or directory.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file&quot; does not exist.</p>

<p style="margin-top: 1em">rlAssertGrep</p>

<p style="margin-top: 1em">Assertion checking if the file
contains a pattern.</p>

<p style="margin-top: 1em">rlAssertGrep pattern file
[options]</p>

<p style="margin-top: 1em">pattern <br>
Regular expression to be searched for.</p>

<p style="margin-top: 1em">file <br>
Path to the file.</p>

<p style="margin-top: 1em">options <br>
Optional parameters to be passed to grep, default is
&quot;-q&quot;. Can be used to perform case insensitive
matches (-i), or using extended (-E) or perl (-P) regular
expressions.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file&quot; exists and contains given
&quot;pattern&quot;.</p>

<p style="margin-top: 1em">rlAssertNotGrep</p>

<p style="margin-top: 1em">Assertion checking that the file
does not contain a pattern.</p>

<p style="margin-top: 1em">rlAssertNotGrep pattern file
[options]</p>

<p style="margin-top: 1em">pattern <br>
Regular expression to be searched for.</p>

<p style="margin-top: 1em">file <br>
Path to the file.</p>

<p style="margin-top: 1em">options <br>
Optional parameters to be passed to grep, default is
&quot;-q&quot;. Can be used to perform case insensitive
matches (-i), or using extended (-E) or perl (-P) regular
expressions.</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file&quot; exists and does not contain given
&quot;pattern&quot;.</p>

<p style="margin-top: 1em">rlAssertDiffer</p>

<p style="margin-top: 1em">Assertion checking that two
files differ (are not identical).</p>

<p style="margin-top: 1em">rlAssertDiffer file1 file2</p>

<p style="margin-top: 1em">file1 <br>
Path to first file1</p>

<p style="margin-top: 1em">file2 <br>
Path to second file</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file1&quot; and &quot;file2&quot; differs.</p>

<p style="margin-top: 1em">rlAssertNotDiffer</p>

<p style="margin-top: 1em">Assertion checking that two
files do not differ (are identical).</p>

<p style="margin-top: 1em">rlAssertNotDiffer file1
file2</p>

<p style="margin-top: 1em">file1 <br>
Path to first file1</p>

<p style="margin-top: 1em">file2 <br>
Path to second file</p>

<p style="margin-top: 1em">Returns 0 and asserts PASS when
&quot;file1&quot; and &quot;file2&quot; do not differ.</p>

<p style="margin-top: 1em">Run, Watch, Report <br>
rlRun</p>

<p style="margin-top: 1em">Run command with optional
comment and make sure its exit code matches
expectations.</p>

<p style="margin-top: 1em">rlRun [-t] [-l] [-c] [-s]
command [status[,status...]] [comment]</p>

<p style="margin-top: 1em">-t If specified, stdout and
stderr of the command output will be tagged with strigs
&rsquo;STDOUT: &rsquo; and &rsquo;STDERR: &rsquo;.</p>

<p style="margin-top: 1em">-l If specified, output of the
command (tagged, if -t was specified) is logged using rlLog
function. This is intended for short outputs, and therefore
only last 50 lines are <br>
logged this way. Longer outputs should be analysed
separately, or uploaded via rlFileSubmit or
rlBundleLogs.</p>

<p style="margin-top: 1em">-c Same as &quot;-l&quot;, but
only log the commands output if it failed.</p>

<p style="margin-top: 1em">-s Store stdout and stderr to a
file (mixed together, as the user would see it on a
terminal) and set $rlRun_LOG variable to name of the file.
Caller is responsible for removing <br>
the file. When -t option is used, the content of the file
becomes tagged too.</p>

<p style="margin-top: 1em">If the -s option is not used,
$rlRun_LOG is not modified and keeps its content from the
last &quot;rlRun -s&quot;.</p>

<p style="margin-top: 1em">command <br>
Command to run.</p>

<p style="margin-top: 1em">status <br>
Expected exit code(s). Optional, default 0. If you expect
more exit codes, separate them with comma (e.g.
&quot;0,1&quot; when both 0 and 1 are OK and expected), or
use from-to <br>
notation (i.e. &quot;2-5&quot; for &quot;2,3,4,5&quot;), or
combine them (e.g. &quot;2-4,26&quot; for
&quot;2,3,4,26&quot;).</p>

<p style="margin-top: 1em">comment <br>
Short summary describing the action (optional, but
recommended - explain what are you doing here).</p>

<p style="margin-top: 1em">Returns the exit code of the
command run. Asserts PASS when command&acute;s exit status
is in the list of expected exit codes.</p>

<p style="margin-top: 1em">Note:</p>

<p style="margin-top: 1em">&Acirc;&middot; The output of
rlRun is buffered when using &quot;-t&quot;, &quot;-l&quot;
or &quot;-s&quot; option (they use unix pipes, which are
buffered by nature). If you need an unbuffered output just
make sure that <br>
&quot;expect&quot; package is installed on your system (its
&quot;unbuffer&quot; tool will automatically be used to
produce unbuffered output).</p>

<p style="margin-top: 1em">&Acirc;&middot; Be aware that
there are some variables which can collide with your code
executed within rlRun. You should avoid using
__INTERNAL_rlRun_* variables.</p>

<p style="margin-top: 1em">Warning: using
&quot;unbuffer&quot; tool is now disabled because of bug
547686.</p>

<p style="margin-top: 1em">rlWatchdog</p>

<p style="margin-top: 1em">Run &quot;command&quot;. If it
does not finish in specified time, then kill it using
&quot;signal&quot;.</p>

<p style="margin-top: 1em">rlWatchdog command timeout
[signal] [callback]</p>

<p style="margin-top: 1em">command <br>
Command to run.</p>

<p style="margin-top: 1em">timeout <br>
Timeout to wait, in seconds.</p>

<p style="margin-top: 1em">signal <br>
Signal to use (optional, default KILL).</p>

<p style="margin-top: 1em">callback <br>
Callback function to be called before the signal is send
(optional, none by default). The callback function will have
one argument available -- PGID of the process group.</p>

<p style="margin-top: 1em">Returns 0 if the command ends
normally, without need to be killed.</p>

<p style="margin-top: 1em">rlReport</p>

<p style="margin-top: 1em">Report test result to the test
harness. The command to be used for reporting is set by the
respective plugin. You can also use the
$BEAKERLIB_COMMAND_REPORT_RESULT variable to <br>
use your custom command.</p>

<p style="margin-top: 1em">rlReport name result [score]
[log]</p>

<p style="margin-top: 1em">name <br>
Name of the test result.</p>

<p style="margin-top: 1em">result <br>
Result (one of PASS, WARN, FAIL). If called with something
else, will use WARN.</p>

<p style="margin-top: 1em">score <br>
Test score (optional).</p>

<p style="margin-top: 1em">log Optional log file to be
submitted instead of default &quot;OUTPUTFILE&quot;.</p>

<p style="margin-top: 1em">rlCmpVersion</p>

<p style="margin-top: 1em">Compare two given versions
composed by numbers and letters divided by dot (.),
underscore (_), or dash (-).</p>

<p style="margin-top: 1em">rlCmpVersion ver1 ver2</p>

<p style="margin-top: 1em">If ver1 = ver2, sign
&rsquo;=&rsquo; is printed to stdout and 0 is returned. If
ver1 &gt; ver2, sign &rsquo;&gt;&rsquo; is printed to stdout
and 1 is returned. If ver1 &lt; ver2, sign
&rsquo;&lt;&rsquo; is printed to stdout <br>
and 2 is returned.</p>

<p style="margin-top: 1em">rlTestVersion</p>

<p style="margin-top: 1em">Test releation between two given
versions based on given operator.</p>

<p style="margin-top: 1em">rlTestVersion ver1 op ver2</p>

<p style="margin-top: 1em">op Operator definitng the
logical expression. It can be &rsquo;=&rsquo;,
&rsquo;==&rsquo;, &rsquo;!=&rsquo;, &rsquo;&lt;&rsquo;,
&rsquo;&lt;=&rsquo;, &rsquo;=&lt;&rsquo;,
&rsquo;&gt;&rsquo;, &rsquo;&gt;=&rsquo;, or
&rsquo;=&gt;&rsquo;.</p>

<p style="margin-top: 1em">Returns 0 if the expresison ver1
op ver2 is true; 1 if the expression is false and 2 if
something went wrong.</p>

<p style="margin-top: 1em">Release Info <br>
rlIsRHEL</p>

<p style="margin-top: 1em">Check whether we&rsquo;re
running on RHEL. With given number of version as parameter
returns 0 if the particular RHEL version is running.
Multiple arguments can be passed separated <br>
with space as well as any particular release (5.1 5.2 5.3).
Each version can have a prefix consisting of
&rsquo;&lt;&rsquo;, &rsquo;&lt;=&rsquo;, &rsquo;=&rsquo;,
&rsquo;&gt;=&rsquo;, &rsquo;&gt;&rsquo;, matching whenever
the currently installed <br>
version is lesser, lesser or equal, equal, equal or greater,
greater than the version specified as argument. Note that
ie. &rsquo;=5&rsquo; (unlike just &rsquo;5&rsquo;) matches
exactly 5 (5.0), not <br>
5.N, where N &gt; 0.</p>

<p style="margin-top: 1em">rlIsRHEL</p>

<p style="margin-top: 1em">Returns 0 if we are running on
RHEL.</p>

<p style="margin-top: 1em">rlIsRHEL 4.8 5</p>

<p style="margin-top: 1em">Returns 0 if we are running RHEL
4.8 or any RHEL 5.</p>

<p style="margin-top: 1em">rlIsFedora</p>

<p style="margin-top: 1em">Check whether we&rsquo;re
running on Fedora. With given number of version as parameter
returns 0 if the particular Fedora version is running. Range
matching can be used in the form <br>
used by rlIsRHEL.</p>

<p style="margin-top: 1em">rlIsFedora</p>

<p style="margin-top: 1em">Returns 0 if we are running on
Fedora.</p>

<p style="margin-top: 1em">rlIsFedora 9 10</p>

<p style="margin-top: 1em">Returns 0 if we are running
Fedora 9 or 10.</p>

<p style="margin-top: 1em">Release Info <br>
rlIsCentOS</p>

<p style="margin-top: 1em">Check whether we&rsquo;re
running on CentOS. With given number of version as parameter
returns 0 if the particular CentOS version is running.
Multiple arguments can be passed <br>
separated with space as well as any particular release (5.1
5.2 5.3). Each version can have a prefix consisting of
&rsquo;&lt;&rsquo;, &rsquo;&lt;=&rsquo;, &rsquo;=&rsquo;,
&rsquo;&gt;=&rsquo;, &rsquo;&gt;&rsquo;, matching whenever
the currently <br>
installed version is lesser, lesser or equal, equal, equal
or greater, greater than the version specified as argument.
Note that ie. &rsquo;=5&rsquo; (unlike just &rsquo;5&rsquo;)
matches exactly 5 <br>
(5.0), not 5.N, where N &gt; 0.</p>

<p style="margin-top: 1em">rlIsCentOS</p>

<p style="margin-top: 1em">Returns 0 if we are running on
CentOS.</p>

<p style="margin-top: 1em">rlIsCentOS 7.1 6</p>

<p style="margin-top: 1em">Returns 0 if we are running
CentOS 7.1 or any CentOS 6.</p>

<p style="margin-top: 1em">AUTHORS <br>
&Acirc;&middot; Ondrej Hudlicky
&lt;ohudlick@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Petr Muller
&lt;pmuller@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Jan Hutar
&lt;jhutar@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Petr Splichal
&lt;psplicha@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Ales Zelinka
&lt;azelinka@redhat.com&gt;</p>

<p style="margin-top: 1em">perl v5.24.1 2017-04-21
TESTING.SH(1)</p>
<hr>
</body>
</html>
