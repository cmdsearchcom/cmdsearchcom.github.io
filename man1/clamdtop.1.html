<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>Clamdtop(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Clamdtop(1)</td>
    <td class="head-vol">Clam AntiVirus</td>
    <td class="head-rtitle">Clamdtop(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
clamdtop - monitor the Clam AntiVirus Daemon
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
clamdtop [options] [clamdspec ...]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
clamdtop is a tool to monitor one or multiple clamd(s). It has a (color) ncurses
  interface, that shows the jobs in clamd's queue, memory usage, and information
  about the loaded signature database. You can specify on the command-line to
  which clamd(s) it should connect to. By default it will attempt to connect to
  the local clamd as defined in clamd.conf.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Display help information and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">Print version number and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--config-file=FILE</b></dt>
  <dd class="It-tag">Read clamd settings from FILE, to determine how to connect
      to it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>clamdspec</b></dt>
  <dd class="It-tag">Specifies the clamd to connect to: either a path to the
      local (unix domain) socket of clamd, or an IP address and an port number
      (that defaults to 3310) to connect to a local or remote clamd using
      TCP/IP.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OVERVIEW"><a class="selflink" href="#OVERVIEW">OVERVIEW</a></h1>
<h2 class="Ss" title="Ss" id="KEYS:"><a class="selflink" href="#KEYS:">KEYS:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>H</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Displays a short helpscreen, describing the meaning of various elements on
      the display.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Q</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Quits clamdtop</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>R</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Resets the maximum values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>up arrow, down arrow</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    If you are monitoring multiple clamds then clamdtop will show an overview
      screen by default. You can use the <b>up arrow</b> and <b> down arrow</b>
      keys to cycle through each clamd individually, and the overview screen. A
      blue bar will highlight the clamd that is currently shown in detail. On
      the overview screen none of the clamds is selected (hence no blue bar),
      and you can see the items from the queue of all clamds.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="The_top_bar"><a class="selflink" href="#The_top_bar">The
  top bar</a></h2>
Shows the version of clamdtop and the current time. Clamdtop updates the display
  once every 2 seconds.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="The_list_of_clamds"><a class="selflink" href="#The_list_of_clamds">The
  list of clamds</a></h2>
Shows the clamds that clamdtop is connected to, and statistics about them.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>NO</b></dt>
  <dd class="It-tag">Unique clamd number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>CONNTIME</b></dt>
  <dd class="It-tag">How long clamdtop has been connected (reset upon a
      reconnect)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>LIV</b></dt>
  <dd class="It-tag">Total number of live threads</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>IDL</b></dt>
  <dd class="It-tag">Total number of idle threads</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>QUEUE</b></dt>
  <dd class="It-tag">Number of items in queue</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>MAXQ</b></dt>
  <dd class="It-tag">Maximum number of items observed in the queue</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>MEM</b></dt>
  <dd class="It-tag">Total memory usage (if available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOST</b></dt>
  <dd class="It-tag">Which clamd, local means unix socket</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ENGINE</b></dt>
  <dd class="It-tag">Engine version</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DBVER</b></dt>
  <dd class="It-tag">Database version</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DBTIME</b></dt>
  <dd class="It-tag">Database publish time</dd>
</dl>
<h2 class="Ss" title="Ss" id="Clamd_detailed_view"><a class="selflink" href="#Clamd_detailed_view">Clamd
  detailed view</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">Primary threads <b>live</b></dt>
  <dd class="It-tag">The number of threads that are executing commands or
      scanning.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Primary threads <b>idle</b></dt>
  <dd class="It-tag">The number of threads that are idle, waiting for commands.
      They will exit after IdleTimeout (30 seconds).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Primary threads <b>max</b></dt>
  <dd class="It-tag">The maximum number of threads configured.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Queue items</dt>
  <dd class="It-tag">The number of items (scanjobs) in clamd's queue that are
      waiting for a free thread to be processed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Queue max</dt>
  <dd class="It-tag">The maximum number of items observed in clamd's queue.</dd>
</dl>
<h2 class="Ss" title="Ss" id="The_memory_usage_view"><a class="selflink" href="#The_memory_usage_view">The
  memory usage view</a></h2>
If available, it will show details on clamd's memory usage:
<dl class="Bl-tag">
  <dt class="It-tag"><b>Mem heap</b></dt>
  <dd class="It-tag">The amount of memory used by libc from the heap in
      MegaBytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Mem mmap</b></dt>
  <dd class="It-tag">The amount of memory used by libc from mmap-allocated
      memory in MegaBytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Mem unused</b></dt>
  <dd class="It-tag">The amount of memory that can be reclaimed by libc.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Libc used</b></dt>
  <dd class="It-tag">The amount of useful memory allocated by libc.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Libc free</b></dt>
  <dd class="It-tag">The amount of memory allocated by libc, that can't be freed
      due to fragmentation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Libc total</b></dt>
  <dd class="It-tag">The amount of memory allocated by libc from the system in
      total.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Pool count</b></dt>
  <dd class="It-tag">The number of mmap regions allocated by clamd' memory pool
      allocator (for the signature database).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Pool used</b></dt>
  <dd class="It-tag">The amount of memory used by clamd's memory pool allocator
      (for the signature database).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Total</b></dt>
  <dd class="It-tag">The total amount of memory allocated by clamd's memory pool
      allocator.</dd>
</dl>
<h2 class="Ss" title="Ss" id="The_clamd_job_queue"><a class="selflink" href="#The_clamd_job_queue">The
  clamd job queue</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>COMMAND</b></dt>
  <dd class="It-tag">Kind of command being executed, STATS is clamdtop,
      SCAN/CONTSCAN/FILDES/MULTISCAN is scan of a file/directory, MULTISCANFILE
      is scan of one item by a MULTISCAN job.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>QUEUEDSINCE</b></dt>
  <dd class="It-tag">The time since the command got queued, until now.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FILE</b></dt>
  <dd class="It-tag">The name of the file being processed (if applicable).</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">(1) To connect to the clamd configured in the default
    clamd.conf:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>clamdtop</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(2) To connect to the clamd configured in another
    clamd.conf:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>clamdtop --config-file=/path/to/clamd.conf</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(3) To connect to a clamd running on another machine
    (192.168.0.3) on the LAN:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>clamdtop 192.168.0.3</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(4) To connect to a clamd running on another machine
    (192.168.0.3) on a non-default port (3410):</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>clamdtop 192.168.0.3:3410</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">(5) To monitor the local clamd and 2 other remote clamds
    over TCP/IP:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>clamdtop localhost 192.168.0.3 192.168.0.4</b></dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
clamdtop uses colors if the terminal is capable of colors. If you know your
  terminal is capable of colors, yet you aren't seeing any, then check that your
  <b>TERM</b> environment variable is set correctly. For example try setting it
  to TERM=xterm-color if you are in an xterm-like environment. IPv6 support has
  been added. If specifying an IPv6 address, please use the normal IPv6
  addressing rules. If specifying both an IPv6 address and a port combination,
  encapsulate the IPv6 address in square brakets (e.g. [::1]:3410).
<h1 class="Sh" title="Sh" id="RETURN_CODES"><a class="selflink" href="#RETURN_CODES">RETURN
  CODES</a></h1>
0 : Normal terminator
<dl class="Bl-tag">
  <dt class="It-tag">&gt;0: Error occured.</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="CREDITS"><a class="selflink" href="#CREDITS">CREDITS</a></h1>
Please check the full documentation for credits.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
T&#x00F6;r&#x00F6;k Edvin &lt;edwin@clamav.net&gt;
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
clamd(8), clamd.conf(5)</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 22, 2009</td>
    <td class="foot-os">ClamAV 0.99.2</td>
  </tr>
</table>
</body>
</html>
