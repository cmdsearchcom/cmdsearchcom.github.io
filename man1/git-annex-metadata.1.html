<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>git-annex-metadata(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">git-annex-metadata(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">git-annex-metadata(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
git-annex-metadata - sets or gets metadata of a file
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
git annex metadata <b>[path ...]</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The content of an annexed file can have any number of metadata fields attached
  to it to describe it. Each metadata field can in turn have any number of
  values.
<div class="Pp"></div>
This command can be used to set metadata, or show the currently set metadata.
<div class="Pp"></div>
When run without any -s or -t parameters, displays the current metadata.
<div class="Pp"></div>
Each metadata field has its own &quot;field-lastchanged&quot; metadata, which
  contains the date the field was last changed. Unlike other metadata, this
  cannot be directly modified by this command. It is updated automatically.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g field</b> / <b>--get field</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Get the value(s) of a single field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The values will be output one per line, with no other
      output, so this is suitable for use in a script.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s field=value</b> / <b>--set field=value</b></dt>
  <dd class="It-tag">Set a field's value, removing any old values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s field+=value</b> / <b>--set field+=value</b></dt>
  <dd class="It-tag">Add an additional value, preserving any old values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s field?=value</b> / <b>--set field?=value</b></dt>
  <dd class="It-tag">Set a value, but only if the field does not already have a
      value set.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s field-=value</b> / <b>--set field-=value</b></dt>
  <dd class="It-tag">Remove a value from a field, leaving any other values that
      the field has set.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r field</b> / <b>--remove field</b></dt>
  <dd class="It-tag">Remove all current values of the field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t tag</b> / <b>--tag tag</b></dt>
  <dd class="It-tag">Set a tag. Note that a tag is just a value of the
      &quot;tag&quot; field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u tag</b> / <b>--unset tag</b></dt>
  <dd class="It-tag">Unset a tag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--force</b></dt>
  <dd class="It-tag">By default, <b>git annex metadata</b> refuses to
      recursively set metadata throughout the files in a directory. This option
      enables such recursive setting.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">file matching options</dt>
  <dd class="It-tag">The git-annex-matching-options(1) can be used to specify
      files to act on.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--all</b></dt>
  <dd class="It-tag">Specify instead of a file to get/set metadata on all known
      keys.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--branch=ref</b></dt>
  <dd class="It-tag">Specify instead of a file to get/set metadata on all files
      in the specified branch or treeish.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--unused</b></dt>
  <dd class="It-tag">Specify instead of a file to get/set metadata on files
      found by last run of git-annex unused.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--key=keyname</b></dt>
  <dd class="It-tag">Specify instead of a file to get/set metadata of the
      specified key.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--json</b></dt>
  <dd class="It-tag">Enable JSON output (and input). Each line is a JSON
    object.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The format of the JSON objects changed in git-annex version
      6.20160726.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Example of the new format:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <br/>
    
      {&quot;command&quot;:&quot;metadata&quot;,&quot;file&quot;:&quot;foo&quot;,&quot;key&quot;:&quot;...&quot;,&quot;fields&quot;:{&quot;author&quot;:[&quot;bar&quot;],...},&quot;note&quot;:&quot;...&quot;,&quot;success&quot;:true}</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Example of the old format, which lacks the inner fields
      object:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <br/>
    
      {&quot;command&quot;:&quot;metadata&quot;,&quot;file&quot;:&quot;foo&quot;,&quot;key&quot;:&quot;...&quot;,&quot;author&quot;:[&quot;bar&quot;],...,&quot;note&quot;:&quot;...&quot;,&quot;success&quot;:true}</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch</b></dt>
  <dd class="It-tag">Enables batch mode, which can be used to both get, store,
      and unset metadata for multiple files or keys.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Batch currently only supports JSON input. So, you must
      enable <b>--json</b> along with <b>--batch</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">In batch mode, git-annex reads lines from stdin, which
      contain JSON objects. It replies to each input with an output JSON
    object.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The format of the JSON sent to git-annex can be the same as
      the JSON that it outputs. Or, a simplified version. Only the
      &quot;file&quot; (or &quot;key&quot;) field is actually necessary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">For example, to get the current metadata of file foo:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <br/>
     {&quot;file&quot;:&quot;foo&quot;}</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">To get the current metadata of the key k:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     {&quot;key&quot;:&quot;k&quot;}</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Any metadata fields included in the JSON object will be
      stored, replacing whatever values the fields had before. To unset a field,
      include it with an empty list of values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">To change the author of file foo to bar:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <br/>
    
      {&quot;file&quot;:&quot;foo&quot;,&quot;fields&quot;:{&quot;author&quot;:[&quot;bar&quot;]}}</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">To remove the author of file foo:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <br/>
    
      {&quot;file&quot;:&quot;foo&quot;,&quot;fields&quot;:{&quot;author&quot;:[]}}</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To set some tags on a file and also its author:
<div class="Pp"></div>
<br/>
 git annex metadata annexscreencast.ogv -t video -t screencast -s author+=Alice
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
git-annex(1)
<div class="Pp"></div>
git-annex-view(1)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Joey Hess &lt;id@joeyh.name&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
