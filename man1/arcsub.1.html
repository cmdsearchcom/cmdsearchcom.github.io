<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ARCSUB(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ARCSUB(1)</td>
    <td class="head-vol">NorduGrid Users Manual</td>
    <td class="head-rtitle">ARCSUB(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
arcsub - ARC Submission
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>arcsub</b> command is used for submitting jobs to Grid enabled computing
  resources.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>arcsub [options] [filename ...]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--cluster</b>=<i>name</i></dt>
  <dd class="It-tag">select one or more computing elements: <i>name</i> can be
      an alias for a single CE, a group of CEs or a URL</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b>, <b>--index</b>=<i>name</i></dt>
  <dd class="It-tag">select one or more registries: <i>name</i> can be an alias
      for a single registry, a group of registries or a URL</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b>, <b>--rejectdiscovery</b>=<i>URL</i></dt>
  <dd class="It-tag">skip the service with the given URL during service
      discovery</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>,
    <b>--submissioninterface</b>=<i>InterfaceName</i></dt>
  <dd class="It-tag">only use this interface for submitting (e.g.
      org.nordugrid.gridftpjob, org.ogf.glue.emies.activitycreation,
      org.ogf.bes)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b>, <b>--infointerface</b>=<i>InterfaceName</i></dt>
  <dd class="It-tag">the computing element specified by URL at the command line
      should be queried using this information interface (possible options:
      org.nordugrid.ldapng, org.nordugrid.ldapglue2, org.nordugrid.wsrfglue2,
      org.ogf.glue.emies.resourceinfo)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>, <b>--jobdescrstring=</b><i>String</i></dt>
  <dd class="It-tag">jobdescription string describing the job to be
    submitted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--jobdescrfile=</b><i>filename</i></dt>
  <dd class="It-tag">jobdescription file describing the job to be submitted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b>, <b>--joblist</b>=<i>filename</i></dt>
  <dd class="It-tag">the file storing information about active jobs (default
      ~/.arc/jobs.xml)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--jobids-to-file</b>=<i>filename</i></dt>
  <dd class="It-tag">the IDs of the submitted jobs will be appended to this
    file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--dryrun</b></dt>
  <dd class="It-tag">submit jobs as dry run (no submission to batch system)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b> --direct</b></dt>
  <dd class="It-tag">submit directly - no resource discovery or matchmaking</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b>, <b>--dumpdescription</b></dt>
  <dd class="It-tag">do not submit - dump job description in the language
      accepted by the target</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>, <b>--listplugins</b></dt>
  <dd class="It-tag">list the available plugins</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--timeout</b>=<i>seconds</i></dt>
  <dd class="It-tag">timeout in seconds (default 20)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b>, <b>--conffile</b>=<i>filename</i></dt>
  <dd class="It-tag">configuration file (default ~/.arc/client.conf)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--debug</b>=<i>debuglevel</i></dt>
  <dd class="It-tag">FATAL, ERROR, WARNING, INFO, VERBOSE or DEBUG</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>, <b>--broker</b>=<i>broker</i></dt>
  <dd class="It-tag">selected broker: Random (default), FastestQueue or custom.
      Use -P to find possible options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--version</b></dt>
  <dd class="It-tag">print version information</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b>, <b>--help</b></dt>
  <dd class="It-tag">print help</dd>
</dl>
<h1 class="Sh" title="Sh" id="ARGUMENTS"><a class="selflink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>filename</b> ...</dt>
  <dd class="It-tag">job description files describing the jobs to be
    submitted</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
<b>arcsub</b> is the key command when submitting jobs to Grid enabled computing
  resources with the ARC client. As default <b>arcsub</b> is able to submit jobs
  to A-REX, CREAM and EMI ES enabled computing elements (CEs), and as always for
  successful submission you need to be authenticated at the targeted computing
  services. Since <b>arcsub</b> is build on a modular library, modules can be
  installed which enables submission to other targets, e.g. the classic ARC CE
  Grid-Manager.
<div style="height: 1.00em;">&#x00A0;</div>
Job submission can be accomplished by specifying a job description file to
  submit as an argument. <b>arcsub</b> will then by default perform resource
  discovery on the Grid and then the discovered resources will be matched to the
  job description and ranked according to the chosen broker ( <b>--broker</b>
  option). If no Grid environment has been configured, please contact your
  system administrator, or setup one yourself in the client configuration file
  (see files section). Another option is to explicitly specify a registry
  service (or multiple) to <b>arcsub</b> using the <b>--index</b> option, which
  accepts an URL, alias or group. Alternatively a specific CE (or multiple) can
  be targeted by using the <b>--cluster</b> option. If such a scenario is the
  most common, it is worthwhile to specify those CEs in the client configuration
  as default services, which makes it superfluous to specify them as argument.
  In the same manner aliases and groups, defined in the configuration file, can
  be utilized, and can be used as argument to the <b>--cluster</b> or
  <b>--index</b> options. In all of the above scenarios <b>arcsub</b> obtains
  resource information from the services which is then used for matchmaking
  against the job description, however that step can be avoided by specifying
  the <b>--direct</b> option, in which case the job description is submitted
  directly to first specified endpoint.
<div style="height: 1.00em;">&#x00A0;</div>
The format of a classic GRIDFTP-based cluster URLs:
<div>&#x00A0;</div>
<b>[ldap://]&lt;hostname&gt;[:2135/nordugrid-cluster-name=&lt;hostname&gt;,Mds-Vo-name=local,o=grid]</b>
<div>&#x00A0;</div>
Only the <b>hostname</b> part has to be specified, the rest of the URL is
  automatically generated.
<div style="height: 1.00em;">&#x00A0;</div>
The format of an A-REX URL is:
<div>&#x00A0;</div>
<b>[https://]&lt;hostname&gt;[:&lt;port&gt;][/&lt;path&gt;]</b>
<div>&#x00A0;</div>
Here the port is 443 by default, but the path cannot be guessed, so if it is not
  specified, then the service is assumed to live on the root path.
<div style="height: 1.00em;">&#x00A0;</div>
Job descriptions can also be specified using the <b>--jobdescrfile</b> option
  which expect the file name of the description as argument, or the
  <b>--jobdescrstring</b> option which expect as argument the job description as
  a string, and both options can be specified multiple times and one does not
  exclude the other. The default supported job description languages are xRSL,
  JSDL and JDL.
<div style="height: 1.00em;">&#x00A0;</div>
If the job description is successfully submitted a job-ID is returned and
  printed. This job-ID uniquely identifies the job while it is being executed.
  On the other hand it is also possible that no CEs matches the constraints
  defined in the description in which case no submission will be done. Upon
  successful submission, the job-ID along with more technical job information is
  stored in the job-list file (described below). The stored information enables
  the job management commands of the ARC client to manage jobs easily, and thus
  the job-ID need not to be saved manually. By default the job-list file is
  stored in the .arc directory in the home directory of the user, however
  another location can be specified using the <b>--joblist</b> option taking the
  location of this file as argument. If the <b>--joblist</b> option was used
  during submission, it should also be specified in the consecutive commands
  when managing the job. If a Computing Element has multiple job submission
  interfaces (e.g. gridftp, EMI-ES, BES), then the brokering algorithm will
  choose one of them. With the <b>--submissioninterface</b> option the requested
  interface can be specified, and in that case only those Computing Elements
  will be considered which has that specific interface, and only that interface
  will be used to submit the jobs.
<div style="height: 1.00em;">&#x00A0;</div>
As mentioned above registry or index services can be specified with the
  <b>--index</b> option. Specifying one or multiple index servers instructs the
  <b>arcsub</b> command to query the servers for registered CEs, the returned
  CEs will then be matched against the job description and those matching will
  be ranked by the chosen broker (see below) and submission will be tried in
  order until successful or reaching the end. From the returned list of CEs it
  might happen that a troublesome or undesirable CE is selected for submission,
  in that case it possible to reject that cluster using the
  <b>--rejectdiscovery</b> option and providing the URL (or just the hostname)
  of the CE, which will disregard that CE as a target for submission.
<div style="height: 1.00em;">&#x00A0;</div>
When multiple CEs are targeted for submission, the resource broker will be used
  to filter out CEs which do not match the job description requirements and then
  rank the remaining CEs. The broker used by default will rank the CEs randomly,
  however a different broker can be chosen by using the <b>--broker</b> option,
  which takes the name of the broker as argument. The broker type can also be
  specified in client.conf. The brokers available can be seen using <b>arcsub
  -P.</b> By default the following brokers are available:
<dl class="Bl-tag">
  <dt class="It-tag">Random (default)</dt>
  <dd class="It-tag">Chooses a random CE matching the job requirements.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">FastestQueue</dt>
  <dd class="It-tag">Ranks matching CEs according to the length of the job queue
      at the CEs, ranking those with shortest queue first/highest.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Benchmark</dt>
  <dd class="It-tag">Ranks matching CEs according to a specified benchmark,
      which should be specified by appending the broker name with ':' and then
      the name of the benchmark. If no option is given to the Benchmark broker
      then CEs will be ranked according to the 'specint2000' benchmark.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Data</dt>
  <dd class="It-tag">Ranks matching CEs according to the amount of input data
      cached by each CE, by querying the CE. Only CEs with the A-REX BES
      interface support this operation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Null</dt>
  <dd class="It-tag">Choose a random CE with no filtering at all of CEs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PythonBroker</dt>
  <dd class="It-tag">User-defined custom brokers can be created in Python. See
      the example broker SampleBroker.py or ACIXBroker.py (like Data broker but
      uses the ARC Cache Index) that come installed with ARC for more details of
      how to write your own broker. A PythonBroker is specified by <b>--broker
      PythonBroker:Filename.Class:args</b>, where Filename is the file
      containing the class Class which implements the broker interface. The
      directory containing this file must be in the PYTHONPATH. args is optional
      and allows specifying arguments to the broker.</dd>
</dl>
<div class="Pp"></div>
Before submission, <b>arcsub</b> performs an intelligent modification of the job
  description (adding or modifying attributes, even converting the description
  language to fit the needs of the CE) ensuring that it is valid. The modified
  job description can be printed by specifying the <b>--dumpdescription</b>
  option. The format, i.e. job description language, of the printed job
  description cannot be specified, and will be that which will be sent to and
  accepted by the chosen target. Further information from <b>arcsub</b> can be
  obtained by increasing the verbosity, which is done with the <b>--debug</b>
  option where the default verbosity level is WARNING. Setting the level to
  DEBUG will show all messages, while setting it to FATAL will only show fatal
  log messages.
<div style="height: 1.00em;">&#x00A0;</div>
To <b>validate</b> your job description without actually submitting a job, use
  the <b>--dryrun</b> option: it will capture possible syntax or other errors,
  but will instruct the site not to submit the job for execution. Only the
  grid-manager (ARC0) and A-REX (ARC1) CEs support this feature.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Submission of a job description file &quot;helloworld.jsdl&quot; to the Grid
<div>&#x00A0;</div>
<b>arcsub helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
A information index server (registry) can also be queried for CEs to submit to:
<div>&#x00A0;</div>
<b>arcsub -g registry.example.com helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
Submission of a job description file &quot;helloworld.jsdl&quot; to
  ce.example.com:
<div>&#x00A0;</div>
<b>arcsub -c ce.example.com helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
Direct submission to a CE is done as:
<div>&#x00A0;</div>
<b>arcsub --direct -c cd.example.com helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
The job description can also be specified directly on the command line as shown
  in the example, using the XRSL job description language:
<div>&#x00A0;</div>
<b>arcsub -c example.com/arex -e \</b>
<div>&#x00A0;</div>
&#x00B4;&amp;(executable=&quot;/bin/echo&quot;)(arguments=&quot;Hello
  World!&quot;)&#x00B4;
<div style="height: 1.00em;">&#x00A0;</div>
When submitting against CEs retrieved from information index servers it might be
  useful to do resource brokering:
<div>&#x00A0;</div>
<b>arcsub -g registry.example.com -b FastestQueue helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
If the job has a large input data set, it can be useful to send it to a CE where
  those files are already cached. The ACIX broker can be used for this:
<div>&#x00A0;</div>
<b>arcsub -g registry.example.com -b
  PythonBroker:ACIXBroker.ACIXBroker:https://cacheindex.ndgf.org:6443/data/index
  helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
Disregarding a specific CE for submission submitting against an information
  index server:
<div>&#x00A0;</div>
<b>arcsub -g registry.example.com -R badcomputingelement.com/arex
  helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
Dumping the job description is done as follows:
<div>&#x00A0;</div>
<b>arcsub -c example.com/arex -x helloworld.jsdl</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.arc/client.conf</b></dt>
  <dd class="It-tag">Some options can be given default values by specifying them
      in the ARC client configuration file. Registry and computing element
      services can be specified in separate sections of the config. The default
      services can be specified by adding 'default=yes' attribute to the section
      of the service, thus when no <b>--cluster</b> or <b>--index</b> options
      are given these will be used for submission. Each service has an alias,
      and can be member of any number of groups. Then specifying the alias or
      the name of the group with the <b>--cluster</b> or <b>--index</b> options
      will select the given services. By using the <b>--conffile</b> option a
      different configuration file can be used than the default. Note that some
      installations also have a system client configuration file, however
      attributes in the client one takes precedence, and then command line
      options takes precedence over configuration file attributes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.arc/jobs.xml</b></dt>
  <dd class="It-tag">This a local list of the user's active jobs. When a job is
      successfully submitted it is added to this list and when it is removed
      from the remote cluster it is removed from this list. This list is used as
      the list of all active jobs when the user specifies the <b>--all</b>
      option to the various NorduGrid ARC user interface commands. By using the
      <b>--joblist</b> option a different file can be used than the default.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>X509_USER_PROXY</b></dt>
  <dd class="It-tag">The location of the user's Grid proxy file. Shouldn't be
      set unless the proxy is in a non-standard location.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ARC_LOCATION</b></dt>
  <dd class="It-tag">The location where ARC is installed can be specified by
      this variable. If not specified the install location will be determined
      from the path to the command being executed, and if this fails a WARNING
      will be given stating the location which will be used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ARC_PLUGIN_PATH</b></dt>
  <dd class="It-tag">The location of ARC plugins can be specified by this
      variable. Multiple locations can be specified by separating them by : (;
      in Windows). The default location is <b>$ARC_LOCATION</b>/lib/arc (\ in
      Windows).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
APACHE LICENSE Version 2.0
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
ARC software is developed by the NorduGrid Collaboration
  (http://www.nordugrid.org), please consult the AUTHORS file distributed with
  ARC. Please report bugs and feature requests to http://bugzilla.nordugrid.org
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>arccat</b>(1), <b>arcclean</b>(1), <b>arccp</b>(1), <b>arcget</b>(1),
  <b>arcinfo</b>(1), <b>arckill</b>(1), <b>arcls</b>(1), <b>arcmkdir</b>(1),
  <b>arcproxy</b>(1), <b>arcrenew</b>(1), <b>arcresub</b>(1),
  <b>arcresume</b>(1), <b>arcrm</b>(1), <b>arcstat</b>(1), <b>arcsync</b>(1),
  <b>arctest</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-07-11</td>
    <td class="foot-os">NorduGrid ARC 5.3.2</td>
  </tr>
</table>
</body>
</html>
