<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PG_TAPGEN(1p)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PG_TAPGEN(1p)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">PG_TAPGEN(1p)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="Name"><a class="selflink" href="#Name">Name</a></h1>
pg_tapgen - Generate schema TAP tests from an existing database
<h1 class="Sh" title="Sh" id="Usage"><a class="selflink" href="#Usage">Usage</a></h1>
<pre>
  pg_tapgen -d template1 &gt; schema_test.sql
</pre>
<h1 class="Sh" title="Sh" id="Description"><a class="selflink" href="#Description">Description</a></h1>
&quot;pg_tapgen&quot; is a command-line utility to generate pgTAP tests to
  validate a database schema by reading an existing database and generating the
  tests to match. Its use requires the installation of the DBI and DBD::Pg from
  CPAN or via a package distribution.
<div class="Pp"></div>
<b>Warning:</b> These prerequisites are not validated by the pgTAP
  &quot;Makefile&quot;, so you'll need to install them yourself. As a result,
  inclusion of this script in the pgTAP distribution is experimental. It may be
  moved to its own distribution in the future.
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<pre>
  -d --dbname DBNAME        Database to which to connect.
  -U --username USERNAME    Username with which to connect.
  -h --host HOST            Host to which to connect.
  -p --port PORT            Port to which to connect.
  -v --verbose              Display output of test scripts while running them.
  -N --exclude-schema       Exclude a schema from the generated tests.
  -c --create-extension     Include CREATE EXTENSION pgtap statement.
     --no-create-extension  Excluce CREATE EXTENSION pgtap statement.
     --directory DIRECTORY  Directory to which to write the test files.
  -H --help                 Print a usage statement and exit.
  -m --man                  Print the complete documentation and exit.
  -V --version              Print the version number and exit.
</pre>
<h1 class="Sh" title="Sh" id="Options_Details"><a class="selflink" href="#Options_Details">Options
  Details</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-d&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dbname&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --dbname try
  pg_tapgen -d postgres
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    The name of database to which to connect. Defaults to the value of the
      $PGDATABASE environment variable or to the system username.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-U&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--username&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --username foo
  pg_tapgen -U postgres
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    PostgreSQL user name to connect as. Defaults to the value of the $PGUSER
      environment variable or to the operating system name of the user running
      the application. Password can be specified with $PGPASSWORD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-h&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--host&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --host pg.example.com
  pg_tapgen -h dev.local
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the host name of the machine on which the server is running. If
      the value begins with a slash, it is used as the directory for the
      Unix-domain socket. Defaults to the value of the $PGHOST environment
      variable or localhost.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-p&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--port&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --port 1234
  pg_tapgen -p 666
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the TCP port or the local Unix-domain socket file extension on
      which the server is listening for connections. Defaults to the value of
      the $PGPORT environment variable or, if not set, to the port specified at
      compile time, usually 5432.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--dir&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--directory&quot;</dt>
  <dd class="It-tag">Directory to which to write test files. Defaults to the
      current directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-c&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--create-extension&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--no-create-extension&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --create-exension
  pg_tapgen -c
  pg_tapgen --no-create-exension
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Enable or disable the inclusion of &quot;CREATE EXTENSION pgtap;&quot;
      statements in the generated test files. Enabled by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-v&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--verbose&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --verbose
  pg_tapgen -v
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Display standard output of test scripts while running them. This behavior
      can also be triggered by setting the $TEST_VERBOSE environment variable to
      a true value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-N&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--exclude-schema&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --exclude-schema contrib
  pg_tapgen -N testing -N temporary
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Exclude a schema from the test generation. &quot;pg_tapgen&quot; always
      ignores &quot;information_schema&quot;, as it is also ignored by pgTAP.
      But if there are other schemas in the database that you don't need or want
      to test for in the database (because you run the tests on another database
      without those schemas, for example), use &quot;--exclude-schema&quot; to
      omit them. May be used more than once to exclude more than one
    schema.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-H&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--help&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --help
  pg_tapgen -H
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Outputs a brief description of the options supported by
      &quot;pg_tapgen&quot; and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-m&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--man&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --man
  pg_tapgen -m
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Outputs this documentation and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;-V&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;--version&quot;</dt>
  <dd class="It-tag">
    <pre>
  pg_tapgen --version
  pg_tapgen -V
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Outputs the program name and version and exits.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Author"><a class="selflink" href="#Author">Author</a></h1>
David E. Wheeler &lt;dwheeler@cpan.org&gt;
<h1 class="Sh" title="Sh" id="Copyright"><a class="selflink" href="#Copyright">Copyright</a></h1>
Copyright (c) 2009-2016 David E. Wheeler. Some Rights Reserved.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-10-31</td>
    <td class="foot-os">perl v5.24.1</td>
  </tr>
</table>
</body>
</html>
