<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:38:54 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SQL(1) parallel SQL(1)</p>

<p style="margin-top: 1em">NAME <br>
sql - execute a command on a database determined by a
dburl</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sql [options] dburl [commands]</p>

<p style="margin-top: 1em">sql [options] dburl &lt;
commandfile</p>

<p style="margin-top: 1em">#!/usr/bin/sql --shebang
[options] dburl</p>

<p style="margin-top: 1em">DESCRIPTION <br>
GNU sql aims to give a simple, unified interface for
accessing databases through all the different
databases&rsquo; command line clients. So far the focus has
been on giving a common <br>
way to specify login information (protocol, username,
password, hostname, and port number), size (database and
table size), and running queries.</p>

<p style="margin-top: 1em">The database is addressed using
a DBURL. If commands are left out you will get that
database&rsquo;s interactive shell.</p>

<p style="margin-top: 1em">GNU sql is often used in
combination with GNU parallel.</p>

<p style="margin-top: 1em">dburl A DBURL has the following
syntax: [sql:]vendor://
[[user][:password]@][host][:port]/[database][?sqlquery]</p>

<p style="margin-top: 1em">See the section DBURL below.</p>

<p style="margin-top: 1em">commands The SQL commands to
run. Each argument will have a newline appended.</p>

<p style="margin-top: 1em">Example: &quot;SELECT * FROM
foo;&quot; &quot;SELECT * FROM bar;&quot;</p>

<p style="margin-top: 1em">If the arguments contain
&rsquo;0 or &rsquo;a&rsquo; this will be replaced with a
newline:</p>

<p style="margin-top: 1em">Example: &quot;SELECT * FROM
foo;SELECT * FROM bar;&quot;</p>

<p style="margin-top: 1em">If no commands are given SQL is
read from the keyboard or STDIN.</p>

<p style="margin-top: 1em">Example: echo &rsquo;SELECT *
FROM foo;&rsquo; | sql mysql:///</p>

<p style="margin-top: 1em">--db-size <br>
--dbsize Size of database. Show the size of the database on
disk. For Oracle this requires access to read the table
dba_data_files - the user system has that.</p>

<p style="margin-top: 1em">--help <br>
-h Print a summary of the options to GNU sql and exit.</p>

<p style="margin-top: 1em">--html HTML output. Turn on HTML
tabular output.</p>

<p style="margin-top: 1em">--show-processlist <br>
--proclist <br>
--listproc <br>
Show the list of running queries.</p>

<p style="margin-top: 1em">--show-databases <br>
--showdbs <br>
--list-databases <br>
--listdbs <br>
List the databases (table spaces) in the database.</p>

<p style="margin-top: 1em">--show-tables <br>
--list-tables <br>
--table-list <br>
List the tables in the database.</p>

<p style="margin-top: 1em">--noheaders <br>
--no-headers <br>
-n Remove headers and footers and print only tuples. Bug in
Oracle: it still prints number of rows found.</p>

<p style="margin-top: 1em">-p pass-through <br>
The string following -p will be given to the database
connection program as arguments. Multiple -p&rsquo;s will be
joined with space. Example: pass &rsquo;-U&rsquo; and the
user name to <br>
the program:</p>

<p style="margin-top: 1em">-p &quot;-U scott&quot; can also
be written -p -U -p scott.</p>

<p style="margin-top: 1em">-r Try 3 times. Short version of
--retries 3.</p>

<p style="margin-top: 1em">--retries ntimes <br>
Try ntimes times. If the client program returns with an
error, retry the command. Default is --retries 1.</p>

<p style="margin-top: 1em">--sep string <br>
-s string <br>
Field separator. Use string as separator between
columns.</p>

<p style="margin-top: 1em">--skip-first-line <br>
Do not use the first line of input (used by GNU sql itself
when called with --shebang).</p>

<p style="margin-top: 1em">--table-size <br>
--tablesize <br>
Size of tables. Show the size of the tables in the
database.</p>

<p style="margin-top: 1em">--verbose <br>
-v Print which command is sent.</p>

<p style="margin-top: 1em">--version <br>
-V Print the version GNU sql and exit.</p>

<p style="margin-top: 1em">--shebang <br>
-Y GNU sql can be called as a shebang (#!) command as the
first line of a script. Like this:</p>

<p style="margin-top: 1em">#!/usr/bin/sql -Y mysql:///</p>

<p style="margin-top: 1em">SELECT * FROM foo;</p>

<p style="margin-top: 1em">For this to work --shebang or -Y
must be set as the first option.</p>

<p style="margin-top: 1em">DBURL <br>
A DBURL has the following syntax: [sql:]vendor://
[[user][:password]@][host][:port]/[database][?sqlquery]</p>

<p style="margin-top: 1em">To quote special characters use
%-encoding specified in
http://tools.ietf.org/html/rfc3986#section-2.1 (E.g. a
password containing &rsquo;/&rsquo; would contain
&rsquo;%2F&rsquo;).</p>

<p style="margin-top: 1em">Examples: <br>
mysql://scott:tiger@my.example.com/mydb <br>
sql:oracle://scott:tiger@ora.example.com/xe <br>
postgresql://scott:tiger@pg.example.com/pgdb <br>
pg:/// <br>
postgresqlssl://scott@pg.example.com:3333/pgdb <br>
sql:sqlite2:////tmp/db.sqlite?SELECT * FROM foo; <br>
sqlite3:///../db.sqlite3?SELECT%20*%20FROM%20foo;</p>

<p style="margin-top: 1em">Currently supported vendors:
MySQL (mysql), MySQL with SSL (mysqls, mysqlssl), Oracle
(oracle, ora), PostgreSQL (postgresql, pg, pgsql, postgres),
PostgreSQL with SSL <br>
(postgresqlssl, pgs, pgsqlssl, postgresssl, pgssl,
postgresqls, pgsqls, postgress), SQLite2 (sqlite, sqlite2),
SQLite3 (sqlite3).</p>

<p style="margin-top: 1em">Aliases must start with
&rsquo;:&rsquo; and are read from /etc/sql/aliases and
~/.sql/aliases. The user&rsquo;s own ~/.sql/aliases should
only be readable by the user.</p>

<p style="margin-top: 1em">Example of aliases:</p>

<p style="margin-top: 1em">:myalias1
pg://scott:tiger@pg.example.com/pgdb <br>
:myalias2 ora://scott:tiger@ora.example.com/xe <br>
# Short form of
mysql://&lsquo;whoami&lsquo;:nopassword@localhost:3306/&lsquo;whoami&lsquo;
<br>
:myalias3 mysql:/// <br>
# Short form of
mysql://&lsquo;whoami&lsquo;:nopassword@localhost:33333/mydb
<br>
:myalias4 mysql://:33333/mydb <br>
# Alias for an alias <br>
:m :myalias4 <br>
# the sortest alias possible <br>
: sqlite2:////tmp/db.sqlite <br>
# Including an SQL query <br>
:query sqlite:////tmp/db.sqlite?SELECT * FROM foo;</p>

<p style="margin-top: 1em">EXAMPLES <br>
Get an interactive prompt <br>
The most basic use of GNU sql is to get an interactive
prompt:</p>

<p style="margin-top: 1em">sql
sql:oracle://scott:tiger@ora.example.com/xe</p>

<p style="margin-top: 1em">If you have setup an alias you
can do:</p>

<p style="margin-top: 1em">sql :myora</p>

<p style="margin-top: 1em">Run a query <br>
To run a query directly from the command line:</p>

<p style="margin-top: 1em">sql :myalias &quot;SELECT * FROM
foo;&quot;</p>

<p style="margin-top: 1em">Oracle requires newlines after
each statement. This can be done like this:</p>

<p style="margin-top: 1em">sql :myora &quot;SELECT * FROM
foo;&quot; &quot;SELECT * FROM bar;&quot;</p>

<p style="margin-top: 1em">Or this:</p>

<p style="margin-top: 1em">sql :myora &quot;SELECT * FROM
foo;0ELECT * FROM bar;&quot;</p>

<p style="margin-top: 1em">Copy a PostgreSQL database <br>
To copy a PostgreSQL database use pg_dump to generate the
dump and GNU sql to import it:</p>

<p style="margin-top: 1em">pg_dump pg_database | sql
pg://scott:tiger@pg.example.com/pgdb</p>

<p style="margin-top: 1em">Empty all tables in a MySQL
database <br>
Using GNU parallel it is easy to empty all tables without
dropping them:</p>

<p style="margin-top: 1em">sql -n mysql:/// &rsquo;show
tables&rsquo; | parallel sql mysql:/// DELETE FROM {};</p>

<p style="margin-top: 1em">Drop all tables in a PostgreSQL
database <br>
To drop all tables in a PostgreSQL database do:</p>

<p style="margin-top: 1em">sql -n pg:/// &rsquo;t&rsquo; |
parallel --colsep &rsquo;&rsquo; -r sql pg:/// DROP TABLE
{2};</p>

<p style="margin-top: 1em">Run as a script <br>
Instead of doing:</p>

<p style="margin-top: 1em">sql mysql:/// &lt; sqlfile</p>

<p style="margin-top: 1em">you can combine the sqlfile with
the DBURL to make a UNIX-script. Create a script called
demosql:</p>

<p style="margin-top: 1em">#!/usr/bin/sql -Y mysql:///</p>

<p style="margin-top: 1em">SELECT * FROM foo;</p>

<p style="margin-top: 1em">Then do:</p>

<p style="margin-top: 1em">chmod +x demosql; ./demosql</p>

<p style="margin-top: 1em">Use --colsep to process multiple
columns <br>
Use GNU parallel&rsquo;s --colsep to separate columns:</p>

<p style="margin-top: 1em">sql -s &rsquo;&rsquo; :myalias
&rsquo;SELECT * FROM foo;&rsquo; | parallel --colsep
&rsquo;&rsquo; do_stuff {4} {1}</p>

<p style="margin-top: 1em">Retry if the connection fails
<br>
If the access to the database fails occasionally --retries
can help make sure the query succeeds:</p>

<p style="margin-top: 1em">sql --retries 5 :myalias
&rsquo;SELECT * FROM really_big_foo;&rsquo;</p>

<p style="margin-top: 1em">Get info about the running
database system <br>
Show how big the database is:</p>

<p style="margin-top: 1em">sql --db-size :myalias</p>

<p style="margin-top: 1em">List the tables:</p>

<p style="margin-top: 1em">sql --list-tables :myalias</p>

<p style="margin-top: 1em">List the size of the tables:</p>

<p style="margin-top: 1em">sql --table-size :myalias</p>

<p style="margin-top: 1em">List the running processes:</p>

<p style="margin-top: 1em">sql --show-processlist
:myalias</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
GNU sql is part of GNU parallel. Report bugs to
&lt;bug-parallel@gnu.org&gt;.</p>

<p style="margin-top: 1em">AUTHOR <br>
When using GNU sql for a publication please cite:</p>

<p style="margin-top: 1em">O. Tange (2011): GNU SQL - A
Command Line Tool for Accessing Different Databases Using
DBURLs, ;login: The USENIX Magazine, April 2011:29-32.</p>

<p style="margin-top: 1em">Copyright (C) 2008,2009,2010 Ole
Tange http://ole.tange.dk</p>

<p style="margin-top: 1em">Copyright (C) 2010,2011 Ole
Tange, http://ole.tange.dk and Free Software Foundation,
Inc.</p>

<p style="margin-top: 1em">LICENSE <br>
Copyright (C) 2007,2008,2009,2010,2011 Free Software
Foundation, Inc.</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
the GNU General Public License as published by the Free
Software Foundation; either <br>
version 3 of the License, or at your option any later
version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program.
If not, see &lt;http://www.gnu.org/licenses/&gt;.</p>

<p style="margin-top: 1em">Documentation license I <br>
Permission is granted to copy, distribute and/or modify this
documentation under the terms of the GNU Free Documentation
License, Version 1.3 or any later version published by <br>
the Free Software Foundation; with no Invariant Sections,
with no Front-Cover Texts, and with no Back-Cover Texts. A
copy of the license is included in the file fdl.txt.</p>

<p style="margin-top: 1em">Documentation license II <br>
You are free:</p>

<p style="margin-top: 1em">to Share to copy, distribute and
transmit the work</p>

<p style="margin-top: 1em">to Remix to adapt the work</p>

<p style="margin-top: 1em">Under the following
conditions:</p>

<p style="margin-top: 1em">Attribution <br>
You must attribute the work in the manner specified by the
author or licensor (but not in any way that suggests that
they endorse you or your use of the work).</p>

<p style="margin-top: 1em">Share Alike <br>
If you alter, transform, or build upon this work, you may
distribute the resulting work only under the same, similar
or a compatible license.</p>

<p style="margin-top: 1em">With the understanding that:</p>

<p style="margin-top: 1em">Waiver Any of the above
conditions can be waived if you get permission from the
copyright holder.</p>

<p style="margin-top: 1em">Public Domain <br>
Where the work or any of its elements is in the public
domain under applicable law, that status is in no way
affected by the license.</p>

<p style="margin-top: 1em">Other Rights <br>
In no way are any of the following rights affected by the
license:</p>

<p style="margin-top: 1em">&Acirc;&middot; Your fair
dealing or fair use rights, or other applicable copyright
exceptions and limitations;</p>

<p style="margin-top: 1em">&Acirc;&middot; The
author&rsquo;s moral rights;</p>

<p style="margin-top: 1em">&Acirc;&middot; Rights other
persons may have either in the work itself or in how the
work is used, such as publicity or privacy rights.</p>

<p style="margin-top: 1em">Notice For any reuse or
distribution, you must make clear to others the license
terms of this work.</p>

<p style="margin-top: 1em">A copy of the full license is
included in the file as cc-by-sa.txt.</p>

<p style="margin-top: 1em">DEPENDENCIES <br>
GNU sql uses Perl. If mysql is installed, MySQL dburls will
work. If psql is installed, PostgreSQL dburls will work. If
sqlite is installed, SQLite2 dburls will work. If <br>
sqlite3 is installed, SQLite3 dburls will work. If sqlplus
is installed, Oracle dburls will work. If rlwrap is
installed, GNU sql will have a command history for
Oracle.</p>

<p style="margin-top: 1em">FILES <br>
~/.sql/aliases - user&rsquo;s own aliases with DBURLs</p>

<p style="margin-top: 1em">/etc/sql/aliases - common
aliases with DBURLs</p>

<p style="margin-top: 1em">SEE ALSO <br>
mysql(1), psql(1), rlwrap(1), sqlite(1), sqlite3(1),
sqlplus(1)</p>

<p style="margin-top: 1em">20160722 2016-07-22 SQL(1)</p>
<hr>
</body>
</html>
