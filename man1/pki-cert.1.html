<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:31:44 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>pki-cert(1) PKI Certificate Management Commands
pki-cert(1)</p>

<p style="margin-top: 1em">NAME <br>
pki-cert - Command-Line Interface for managing certificates
on the Certificate System server.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pki [CLI options] &lt;subsystem&gt;-cert <br>
pki [CLI options] &lt;subsystem&gt;-cert-find [command
options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-show
&lt;certificate ID&gt; [command options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-revoke
&lt;certificate ID&gt; [command options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-hold
&lt;certificate ID&gt; [command options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-release-hold
&lt;certificate ID&gt; [command options] <br>
pki [CLI options]
&lt;subsystem&gt;-cert-request-profile-find [command
options] <br>
pki [CLI options]
&lt;subsystem&gt;-cert-request-profile-show &lt;profile
ID&gt; [command options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-request-submit
[command options] <br>
pki [CLI options] &lt;subsystem&gt;-cert-request-review
&lt;request ID&gt; [command options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The pki-cert commands provide command-line interfaces to
manage certificates on the specified subsystem.</p>

<p style="margin-top: 1em">Valid subsystems are ca and tps.
If the &lt;subsystem&gt;- prefix is omitted, it will default
to ca.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert <br>
This command is to list available certificate commands for
the subsystem. Different subsystems may have different
certificate commands.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-find [command options] <br>
This command is to list certificates in the subsystem.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-show &lt;certificate ID&gt; [command
options] <br>
This command is to view a certificate details in the
subsystem.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-revoke &lt;certificate ID&gt; <br>
This command is to revoke a certificate.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-hold &lt;certificate ID&gt; <br>
This command is to place a certificate on hold
temporarily.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-release-hold &lt;certificate ID&gt;
<br>
This command is to release a certificate that has been
placed on hold.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-request-profile-find [command
options] <br>
This command is to list available certificate request
templates.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-request-profile-show &lt;profile
ID&gt; [command options] <br>
This command is to view a certificate request template.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-request-submit [command options] <br>
This command is to submit a certificate request.</p>

<p style="margin-top: 1em">pki [CLI options]
&lt;subsystem&gt;-cert-request-review &lt;request ID&gt;
[command options] <br>
This command is to review a certificate request.</p>

<p style="margin-top: 1em">OPTIONS <br>
The CLI options are described in pki(1).</p>

<p style="margin-top: 1em">OPERATIONS <br>
To view available certificate commands, type pki
&lt;subsystem&gt;-cert. To view each command&rsquo;s usage,
type pki &lt;subsystem&gt;-cert-&lt;command&gt; --help.</p>

<p style="margin-top: 1em">Viewing Certificates <br>
Certificates can be viewed anonymously.</p>

<p style="margin-top: 1em">To list all certificates in the
CA:</p>

<p style="margin-top: 1em">pki ca-cert-find</p>

<p style="margin-top: 1em">It is also possible to search
for and list specific certificates by adding a search
filter. Use pki ca-cert-find --help to see options. For
example, to search based on issuance <br>
date:</p>

<p style="margin-top: 1em">pki ca-cert-find --issuedOnFrom
2012-06-15</p>

<p style="margin-top: 1em">To list certificates with search
constraints defined in a file:</p>

<p style="margin-top: 1em">pki ca-cert-find --input
&lt;filename&gt;</p>

<p style="margin-top: 1em">where the file is in the
following format:</p>

<p style="margin-top: 1em">&lt;?xml version=&quot;1.0&quot;
encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
<br>
&lt;CertSearchRequest&gt;</p>


<p style="margin-top: 1em">&lt;serialNumberRangeInUse&gt;true&lt;/serialNumberRangeInUse&gt;
<br>
&lt;serialFrom&gt;&lt;/serialFrom&gt; <br>
&lt;serialTo&gt;&lt;/serialTo&gt;</p>


<p style="margin-top: 1em">&lt;subjectInUse&gt;false&lt;/subjectInUse&gt;
<br>
&lt;eMail&gt;&lt;/eMail&gt; <br>
&lt;commonName&gt;&lt;/commonName&gt; <br>
&lt;userID&gt;&lt;/userID&gt; <br>
&lt;orgUnit&gt;&lt;/orgUnit&gt; <br>
&lt;org&gt;&lt;/org&gt; <br>
&lt;locality&gt;&lt;/locality&gt; <br>
&lt;state&gt;&lt;/state&gt; <br>
&lt;country&gt;&lt;/country&gt;</p>


<p style="margin-top: 1em">&lt;matchExactly&gt;false&lt;/matchExactly&gt;</p>


<p style="margin-top: 1em">&lt;status&gt;&lt;/status&gt;</p>


<p style="margin-top: 1em">&lt;revokedByInUse&gt;false&lt;/revokedByInUse&gt;
<br>
&lt;revokedBy&gt;&lt;/revokedBy&gt;</p>


<p style="margin-top: 1em">&lt;revokedOnFrom&gt;false&lt;/revokedOnFrom&gt;
<br>
&lt;revokedOnTo&gt;&lt;/revokedOnTo&gt;</p>


<p style="margin-top: 1em">&lt;revocationReasonInUse&gt;false&lt;/revocationReasonInUse&gt;
<br>
&lt;revocationReason&gt;&lt;/revocationReason&gt;</p>


<p style="margin-top: 1em">&lt;issuedByInUse&gt;false&lt;/issuedByInUse&gt;
<br>
&lt;issuedBy&gt;&lt;/issuedBy&gt;</p>


<p style="margin-top: 1em">&lt;issuedOnInUse&gt;false&lt;/issuedOnInUse&gt;
<br>
&lt;issuedOnFrom&gt;&lt;/issuedOnFrom&gt; <br>
&lt;issuedOnTo&gt;&lt;/issuedOnTo&gt;</p>


<p style="margin-top: 1em">&lt;validNotBeforeInUse&gt;false&lt;/validNotBeforeInUse&gt;
<br>
&lt;validNotBeforeFrom&gt;&lt;/validNotBeforeFrom&gt; <br>
&lt;validNotBeforeTo&gt;&lt;/validNotBeforeTo&gt;</p>


<p style="margin-top: 1em">&lt;validNotAfterInUse&gt;false&lt;/validNotAfterInUse&gt;
<br>
&lt;validNotAfterFrom&gt;&lt;/validNotAfterFrom&gt; <br>
&lt;validNotAfterTo&gt;&lt;/validNotAfterTo&gt;</p>


<p style="margin-top: 1em">&lt;validityLengthInUse&gt;false&lt;/validityLengthInUse&gt;
<br>
&lt;validityOperation&gt;&lt;/validityOperation&gt; <br>
&lt;validityCount&gt;&lt;/validityCount&gt; <br>
&lt;validityUnit&gt;&lt;/validityUnit&gt;</p>


<p style="margin-top: 1em">&lt;certTypeInUse&gt;false&lt;/certTypeInUse&gt;
<br>
&lt;certTypeSubEmailCA&gt;&lt;/certTypeSubEmailCA&gt; <br>
&lt;certTypeSubSSLCA&gt;&lt;/certTypeSubSSLCA&gt; <br>
&lt;certTypeSecureEmail&gt;&lt;/certTypeSecureEmail&gt;</p>

<p style="margin-top: 1em">&lt;/CertSearchRequest&gt;</p>

<p style="margin-top: 1em">To view a particular
certificate:</p>

<p style="margin-top: 1em">pki ca-cert-show &lt;certificate
ID&gt;</p>

<p style="margin-top: 1em">Revoking Certificates <br>
Revoking, holding, or releasing a certificate must be
executed as an agent user. To revoke a certificate:</p>

<p style="margin-top: 1em">pki &lt;agent authentication&gt;
ca-cert-revoke &lt;certificate ID&gt;</p>

<p style="margin-top: 1em">To place a certificate on hold
temporarily:</p>

<p style="margin-top: 1em">pki &lt;agent authentication&gt;
ca-cert-hold &lt;certificate ID&gt;</p>

<p style="margin-top: 1em">To release a certificate that
has been placed on hold:</p>

<p style="margin-top: 1em">pki &lt;agent authentication&gt;
ca-cert-release-hold &lt;certificate ID&gt;</p>

<p style="margin-top: 1em">Certificate Requests <br>
To request a certificate, first generate a certificate
signing request (CSR), then submit it with a certificate
profile. The list of available profiles can be viewed using
the <br>
following command:</p>

<p style="margin-top: 1em">pki
ca-cert-request-profile-find</p>

<p style="margin-top: 1em">To generate a CSR, use the
certutil, PKCS10Client, or CRMFPopClient, and store it into
a file.</p>

<p style="margin-top: 1em">Basic requests can be submitted
using the following command:</p>

<p style="margin-top: 1em">pki ca-cert-request-submit
--profile &lt;profile ID&gt; --request-type &lt;type&gt;
--csr-file &lt;CSR file&gt; --subject &lt;subject DN&gt;</p>

<p style="margin-top: 1em">To submit more advanced
requests, download a template of the request file for a
particular profile using the following command:</p>

<p style="margin-top: 1em">pki ca-cert-request-profile-show
&lt;profile ID&gt; --output &lt;request file&gt;</p>

<p style="margin-top: 1em">Then, edit the request file,
fill in the input attributes required by the profile, and
submit the request using the following command:</p>

<p style="margin-top: 1em">pki ca-cert-request-submit
&lt;request file&gt;</p>

<p style="margin-top: 1em">Depending on the profile, the
command may require authentication (see the profile
configuration file). The CLI currently supports client
certificate authentication and direc&acirc; <br>
tory-based authentication.</p>

<p style="margin-top: 1em">Also depending on the profile,
an agent may need to review and approve the request by
running the following command:</p>

<p style="margin-top: 1em">pki &lt;agent authentication&gt;
ca-cert-request-review &lt;request ID&gt; --file &lt;file to
store the certificate request&gt;</p>

<p style="margin-top: 1em">The --file &lt;filename&gt; and
--action &lt;action&gt; options are mutually exclusive (i.
e. - only one or the other may be specified during command
invocation).</p>

<p style="margin-top: 1em">If the --file &lt;filename&gt;
option is specified, the certificate request, as well as the
defaults and constraints of the enrollment profile, will be
retrieved and stored in the out&acirc; <br>
put file provided by the --file option. The agent can
examine the file and override any values if necessary. To
process the request, enter the appropriate action when
prompted:</p>

<p style="margin-top: 1em">Action
(approve/reject/cancel/update/validate/assign/unassign):</p>

<p style="margin-top: 1em">The request in the file will be
read in, and the specified action will be applied against
it.</p>

<p style="margin-top: 1em">Alternatively, when no changes
to the request are necessary, the agent can process the
request in a single step using the --action &lt;action&gt;
option with the following command:</p>

<p style="margin-top: 1em">pki &lt;agent authentication&gt;
ca-cert-request-review &lt;request ID&gt; --action
&lt;action&gt;</p>

<p style="margin-top: 1em">AUTHORS <br>
Ade Lee &lt;alee@redhat.com&gt;, Endi Dewata
&lt;edewata@redhat.com&gt;, and Matthew Harmsen
&lt;mharmsen@redhat.com&gt;.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright (c) 2014 Red Hat, Inc. This is licensed under the
GNU General Public License, version 2 (GPLv2). A copy of
this license is available at
http://www.gnu.org/licenses/old- <br>
licenses/gpl-2.0.txt.</p>

<p style="margin-top: 1em">version 10.2 May 5, 2014
pki-cert(1)</p>
<hr>
</body>
</html>
