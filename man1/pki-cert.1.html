<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>pki-cert(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">pki-cert(1)</td>
    <td class="head-vol">PKI Certificate Management Commands</td>
    <td class="head-rtitle">pki-cert(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pki-cert - Command-Line Interface for managing certificates on the Certificate
  System server.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert</b>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-find</b> [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-show</b> &lt;certificate ID&gt; [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-revoke</b> &lt;certificate ID&gt; [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-hold</b> &lt;certificate ID&gt; [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-release-hold</b> &lt;certificate ID&gt; [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-profile-find</b> [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-profile-show</b> &lt;profile ID&gt; [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-submit</b> [command options]
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-review</b> &lt;request ID&gt; [command options]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>pki-cert</b> commands provide command-line interfaces to manage
  certificates on the specified subsystem.
<div class="Pp"></div>
Valid subsystems are <b>ca</b> and <b>tps</b>. If the &lt;subsystem&gt;- prefix
  is omitted, it will default to <b>ca</b>.
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert</b>
<div style="margin-left: 4.00ex;">This command is to list available certificate
  commands for the subsystem. Different subsystems may have different
  certificate commands.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-find</b> [command options]
<div style="margin-left: 4.00ex;">This command is to list certificates in the
  subsystem.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-show</b> &lt;certificate
  ID&gt; [command options]
<div style="margin-left: 4.00ex;">This command is to view a certificate details
  in the subsystem.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-revoke</b> &lt;certificate
  ID&gt;
<div style="margin-left: 4.00ex;">This command is to revoke a certificate.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-hold</b> &lt;certificate
  ID&gt;
<div style="margin-left: 4.00ex;">This command is to place a certificate on hold
  temporarily.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-release-hold</b>
  &lt;certificate ID&gt;
<div style="margin-left: 4.00ex;">This command is to release a certificate that
  has been placed on hold.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-profile-find</b>
  [command options]
<div style="margin-left: 4.00ex;">This command is to list available certificate
  request templates.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-profile-show</b>
  &lt;profile ID&gt; [command options]
<div style="margin-left: 4.00ex;">This command is to view a certificate request
  template.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-submit</b> [command
  options]
<div style="margin-left: 4.00ex;">This command is to submit a certificate
  request.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>&lt;subsystem&gt;-cert-request-review</b>
  &lt;request ID&gt; [command options]
<div style="margin-left: 4.00ex;">This command is to review a certificate
  request.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The CLI options are described in <b>pki</b>(1).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPERATIONS"><a class="selflink" href="#OPERATIONS">OPERATIONS</a></h1>
To view available certificate commands, type <b>pki &lt;subsystem&gt;-cert</b>.
  To view each command's usage, type <b> pki
  &lt;subsystem&gt;-cert-&lt;command&gt; --help</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Viewing_Certificates"><a class="selflink" href="#Viewing_Certificates">Viewing
  Certificates</a></h2>
Certificates can be viewed anonymously.
<div style="height: 1.00em;">&#x00A0;</div>
To list all certificates in the CA:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-find</b>
<div style="height: 1.00em;">&#x00A0;</div>
It is also possible to search for and list specific certificates by adding a
  search filter. Use <b>pki ca-cert-find --help</b> to see options. For example,
  to search based on issuance date:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-find --issuedOnFrom 2012-06-15</b>
<div style="height: 1.00em;">&#x00A0;</div>
To list certificates with search constraints defined in a file:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-find --input &lt;filename&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
where the file is in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;CertSearchRequest&gt;
<div class="Pp"></div>
    &lt;serialNumberRangeInUse&gt;true&lt;/serialNumberRangeInUse&gt;
    &lt;serialFrom&gt;&lt;/serialFrom&gt;
    &lt;serialTo&gt;&lt;/serialTo&gt;
<div class="Pp"></div>
    &lt;subjectInUse&gt;false&lt;/subjectInUse&gt;
    &lt;eMail&gt;&lt;/eMail&gt;
    &lt;commonName&gt;&lt;/commonName&gt;
    &lt;userID&gt;&lt;/userID&gt;
    &lt;orgUnit&gt;&lt;/orgUnit&gt;
    &lt;org&gt;&lt;/org&gt;
    &lt;locality&gt;&lt;/locality&gt;
    &lt;state&gt;&lt;/state&gt;
    &lt;country&gt;&lt;/country&gt;
<div class="Pp"></div>
    &lt;matchExactly&gt;false&lt;/matchExactly&gt;
<div class="Pp"></div>
    &lt;status&gt;&lt;/status&gt;
<div class="Pp"></div>
    &lt;revokedByInUse&gt;false&lt;/revokedByInUse&gt;
    &lt;revokedBy&gt;&lt;/revokedBy&gt;
<div class="Pp"></div>
    &lt;revokedOnFrom&gt;false&lt;/revokedOnFrom&gt;
    &lt;revokedOnTo&gt;&lt;/revokedOnTo&gt;
<div class="Pp"></div>
    &lt;revocationReasonInUse&gt;false&lt;/revocationReasonInUse&gt;
    &lt;revocationReason&gt;&lt;/revocationReason&gt;
<div class="Pp"></div>
    &lt;issuedByInUse&gt;false&lt;/issuedByInUse&gt;
    &lt;issuedBy&gt;&lt;/issuedBy&gt;
<div class="Pp"></div>
    &lt;issuedOnInUse&gt;false&lt;/issuedOnInUse&gt;
    &lt;issuedOnFrom&gt;&lt;/issuedOnFrom&gt;
    &lt;issuedOnTo&gt;&lt;/issuedOnTo&gt;
<div class="Pp"></div>
    &lt;validNotBeforeInUse&gt;false&lt;/validNotBeforeInUse&gt;
    &lt;validNotBeforeFrom&gt;&lt;/validNotBeforeFrom&gt;
    &lt;validNotBeforeTo&gt;&lt;/validNotBeforeTo&gt;
<div class="Pp"></div>
    &lt;validNotAfterInUse&gt;false&lt;/validNotAfterInUse&gt;
    &lt;validNotAfterFrom&gt;&lt;/validNotAfterFrom&gt;
    &lt;validNotAfterTo&gt;&lt;/validNotAfterTo&gt;
<div class="Pp"></div>
    &lt;validityLengthInUse&gt;false&lt;/validityLengthInUse&gt;
    &lt;validityOperation&gt;&lt;/validityOperation&gt;
    &lt;validityCount&gt;&lt;/validityCount&gt;
    &lt;validityUnit&gt;&lt;/validityUnit&gt;
<div class="Pp"></div>
    &lt;certTypeInUse&gt;false&lt;/certTypeInUse&gt;
    &lt;certTypeSubEmailCA&gt;&lt;/certTypeSubEmailCA&gt;
    &lt;certTypeSubSSLCA&gt;&lt;/certTypeSubSSLCA&gt;
    &lt;certTypeSecureEmail&gt;&lt;/certTypeSecureEmail&gt;
<div class="Pp"></div>
&lt;/CertSearchRequest&gt;
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
To view a particular certificate:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-show &lt;certificate ID&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Revoking_Certificates"><a class="selflink" href="#Revoking_Certificates">Revoking
  Certificates</a></h2>
Revoking, holding, or releasing a certificate must be executed as an agent user.
  To revoke a certificate:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;agent authentication&gt; ca-cert-revoke &lt;certificate ID&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
To place a certificate on hold temporarily:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;agent authentication&gt; ca-cert-hold &lt;certificate ID&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
To release a certificate that has been placed on hold:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;agent authentication&gt; ca-cert-release-hold &lt;certificate
  ID&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Certificate_Requests"><a class="selflink" href="#Certificate_Requests">Certificate
  Requests</a></h2>
To request a certificate, first generate a certificate signing request (CSR),
  then submit it with a certificate profile. The list of available profiles can
  be viewed using the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-request-profile-find</b>
<div style="height: 1.00em;">&#x00A0;</div>
To generate a CSR, use the certutil, PKCS10Client, or CRMFPopClient, and store
  it into a file.
<div style="height: 1.00em;">&#x00A0;</div>
Basic requests can be submitted using the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-request-submit --profile &lt;profile ID&gt; --request-type
  &lt;type&gt; --csr-file &lt;CSR file&gt; --subject &lt;subject DN&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
To submit more advanced requests, download a template of the request file for a
  particular profile using the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-request-profile-show &lt;profile ID&gt; --output &lt;request
  file&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
Then, edit the request file, fill in the input attributes required by the
  profile, and submit the request using the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki ca-cert-request-submit &lt;request file&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
Depending on the profile, the command may require authentication (see the
  profile configuration file). The CLI currently supports client certificate
  authentication and directory-based authentication.
<div style="height: 1.00em;">&#x00A0;</div>
Also depending on the profile, an agent may need to review and approve the
  request by running the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;agent authentication&gt; ca-cert-request-review &lt;request ID&gt;
  --file &lt;file to store the certificate request&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
The --file &lt;filename&gt; and --action &lt;action&gt; options are mutually
  exclusive (i. e. - only one or the other may be specified during command
  invocation).
<div style="height: 1.00em;">&#x00A0;</div>
If the --file &lt;filename&gt; option is specified, the certificate request, as
  well as the defaults and constraints of the enrollment profile, will be
  retrieved and stored in the output file provided by the --file option. The
  agent can examine the file and override any values if necessary. To process
  the request, enter the appropriate action when prompted:
<div style="height: 1.00em;">&#x00A0;</div>
<b>Action (approve/reject/cancel/update/validate/assign/unassign):</b>
<div style="height: 1.00em;">&#x00A0;</div>
The request in the file will be read in, and the specified action will be
  applied against it.
<div style="height: 1.00em;">&#x00A0;</div>
Alternatively, when no changes to the request are necessary, the agent can
  process the request in a single step using the --action &lt;action&gt; option
  with the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;agent authentication&gt; ca-cert-request-review &lt;request ID&gt;
  --action &lt;action&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Ade Lee &lt;alee@redhat.com&gt;, Endi Dewata &lt;edewata@redhat.com&gt;, and
  Matthew Harmsen &lt;mharmsen@redhat.com&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2014 Red Hat, Inc. This is licensed under the GNU General Public
  License, version 2 (GPLv2). A copy of this license is available at
  http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 5, 2014</td>
    <td class="foot-os">version 10.2</td>
  </tr>
</table>
</body>
</html>
