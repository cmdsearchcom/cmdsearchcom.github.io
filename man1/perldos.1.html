<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:30:48 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PERLDOS(1) Perl Programmers Reference Guide
PERLDOS(1)</p>

<p style="margin-top: 1em">NAME <br>
perldos - Perl under DOS, W31, W95.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
These are instructions for building Perl under DOS (or w??),
using DJGPP v2.03 or later. Under w95 long filenames are
supported.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Before you start, you should glance through the README file
found in the top-level directory where the Perl distribution
was extracted. Make sure you read and understand the <br>
terms under which this software is being distributed.</p>

<p style="margin-top: 1em">This port currently supports
MakeMaker (the set of modules that is used to build
extensions to perl). Therefore, you should be able to build
and install most extensions found in <br>
the CPAN sites.</p>

<p style="margin-top: 1em">Detailed instructions on how to
build and install perl extension modules, including XS-type
modules, is included. See &rsquo;BUILDING AND INSTALLING
MODULES&rsquo;.</p>

<p style="margin-top: 1em">Prerequisites for Compiling Perl
on DOS <br>
DJGPP <br>
DJGPP is a port of GNU C/C++ compiler and development tools
to 32-bit, protected-mode environment on Intel 32-bit CPUs
running MS-DOS and compatible operating systems, by DJ <br>
Delorie &lt;dj@delorie.com&gt; and friends.</p>

<p style="margin-top: 1em">For more details (FAQ), check
out the home of DJGPP at:</p>


<p style="margin-top: 1em">http://www.delorie.com/djgpp/</p>

<p style="margin-top: 1em">If you have questions about
DJGPP, try posting to the DJGPP newsgroup:
comp.os.msdos.djgpp, or use the email gateway
djgpp@delorie.com.</p>

<p style="margin-top: 1em">You can find the full DJGPP
distribution on any of the mirrors listed here:</p>


<p style="margin-top: 1em">http://www.delorie.com/djgpp/getting.html</p>

<p style="margin-top: 1em">You need the following files to
build perl (or add new modules):</p>

<p style="margin-top: 1em">v2/djdev203.zip <br>
v2gnu/bnu2112b.zip <br>
v2gnu/gcc2953b.zip <br>
v2gnu/bsh204b.zip <br>
v2gnu/mak3791b.zip <br>
v2gnu/fil40b.zip <br>
v2gnu/sed3028b.zip <br>
v2gnu/txt20b.zip <br>
v2gnu/dif272b.zip <br>
v2gnu/grep24b.zip <br>
v2gnu/shl20jb.zip <br>
v2gnu/gwk306b.zip <br>
v2misc/csdpmi5b.zip</p>

<p style="margin-top: 1em">or possibly any newer
version.</p>

<p style="margin-top: 1em">Pthreads <br>
Thread support is not tested in this version of the djgpp
perl.</p>

<p style="margin-top: 1em">Shortcomings of Perl under DOS
<br>
Perl under DOS lacks some features of perl under UNIX
because of deficiencies in the UNIX-emulation, most
notably:</p>

<p style="margin-top: 1em">&Acirc;&middot; fork() and
pipe()</p>

<p style="margin-top: 1em">&Acirc;&middot; some features of
the UNIX filesystem regarding link count and file dates</p>

<p style="margin-top: 1em">&Acirc;&middot; in-place
operation is a little bit broken with short filenames</p>

<p style="margin-top: 1em">&Acirc;&middot; sockets</p>

<p style="margin-top: 1em">Building Perl on DOS <br>
&Acirc;&middot; Unpack the source package perl5.8*.tar.gz
with djtarx. If you want to use long file names under w95
and also to get Perl to pass all its tests, don&rsquo;t
forget to use</p>

<p style="margin-top: 1em">set LFN=y <br>
set FNCASE=y</p>

<p style="margin-top: 1em">before unpacking the
archive.</p>

<p style="margin-top: 1em">&Acirc;&middot; Create a
&quot;symlink&quot; or copy your bash.exe to sh.exe in your
&quot;($DJDIR)/bin&quot; directory.</p>

<p style="margin-top: 1em">ln -s bash.exe sh.exe</p>

<p style="margin-top: 1em">[If you have the recommended
version of bash for DJGPP, this is already done for
you.]</p>

<p style="margin-top: 1em">And make the &quot;SHELL&quot;
environment variable point to this sh.exe:</p>

<p style="margin-top: 1em">set SHELL=c:/djgpp/bin/sh.exe
(use full path name!)</p>

<p style="margin-top: 1em">You can do this in djgpp.env
too. Add this line BEFORE any section definition:</p>

<p style="margin-top: 1em">+SHELL=%DJDIR%/bin/sh.exe</p>

<p style="margin-top: 1em">&Acirc;&middot; If you have
split.exe and gsplit.exe in your path, then rename split.exe
to djsplit.exe, and gsplit.exe to split.exe. Copy or link
gecho.exe to echo.exe if you don&rsquo;t have <br>
echo.exe. Copy or link gawk.exe to awk.exe if you
don&rsquo;t have awk.exe.</p>

<p style="margin-top: 1em">[If you have the recommended
versions of djdev, shell utilities and gawk, all these are
already done for you, and you will not need to do
anything.]</p>

<p style="margin-top: 1em">&Acirc;&middot; Chdir to the
djgpp subdirectory of perl toplevel and type the following
commands:</p>

<p style="margin-top: 1em">set FNCASE=y <br>
configure.bat</p>

<p style="margin-top: 1em">This will do some preprocessing
then run the Configure script for you. The Configure script
is interactive, but in most cases you just need to press
ENTER. The &quot;set&quot; <br>
command ensures that DJGPP preserves the letter case of file
names when reading directories. If you already issued this
set command when unpacking the archive, and you are <br>
in the same DOS session as when you unpacked the archive,
you don&rsquo;t have to issue the set command again. This
command is necessary *before* you start to (re)configure or
<br>
(re)build perl in order to ensure both that perl builds
correctly and that building XS-type modules can succeed. See
the DJGPP info entry for &quot;_preserve_fncase&quot; for
more <br>
information:</p>

<p style="margin-top: 1em">info libc alphabetical
_preserve_fncase</p>

<p style="margin-top: 1em">If the script says that your
package is incomplete, and asks whether to continue, just
answer with Y (this can only happen if you don&rsquo;t use
long filenames or forget to issue <br>
&quot;set FNCASE=y&quot; first).</p>

<p style="margin-top: 1em">When Configure asks about the
extensions, I suggest IO and Fcntl, and if you want database
handling then SDBM_File or GDBM_File (you need to install
gdbm for this one). If <br>
you want to use the POSIX extension (this is the default),
make sure that the stack size of your cc1.exe is at least
512kbyte (you can check this with: &quot;stubedit
cc1.exe&quot;).</p>

<p style="margin-top: 1em">You can use the Configure script
in non-interactive mode too. When I built my perl.exe, I
used something like this:</p>

<p style="margin-top: 1em">configure.bat -des</p>

<p style="margin-top: 1em">You can find more info about
Configure&rsquo;s command line switches in the INSTALL
file.</p>

<p style="margin-top: 1em">When the script ends, and you
want to change some values in the generated config.sh file,
then run</p>

<p style="margin-top: 1em">sh Configure -S</p>

<p style="margin-top: 1em">after you made your
modifications.</p>

<p style="margin-top: 1em">IMPORTANT: if you use this
&quot;-S&quot; switch, be sure to delete the CONFIG
environment variable before running the script:</p>

<p style="margin-top: 1em">set CONFIG=</p>

<p style="margin-top: 1em">&Acirc;&middot; Now you can
compile Perl. Type:</p>

<p style="margin-top: 1em">make</p>

<p style="margin-top: 1em">Testing Perl on DOS <br>
Type:</p>

<p style="margin-top: 1em">make test</p>

<p style="margin-top: 1em">If you&rsquo;re lucky you should
see &quot;All tests successful&quot;. But there can be a few
failed subtests (less than 5 hopefully) depending on some
external conditions (e.g. some subtests <br>
fail under linux/dosemu or plain dos with short filenames
only).</p>

<p style="margin-top: 1em">Installation of Perl on DOS <br>
Type:</p>

<p style="margin-top: 1em">make install</p>

<p style="margin-top: 1em">This will copy the newly
compiled perl and libraries into your DJGPP directory
structure. Perl.exe and the utilities go into
&quot;($DJDIR)/bin&quot;, and the library goes under <br>
&quot;($DJDIR)/lib/perl5&quot;. The pod documentation goes
under &quot;($DJDIR)/lib/perl5/pod&quot;.</p>

<p style="margin-top: 1em">BUILDING AND INSTALLING MODULES
ON DOS <br>
Building Prerequisites for Perl on DOS <br>
For building and installing non-XS modules, all you need is
a working perl under DJGPP. Non-XS modules do not require
re-linking the perl binary, and so are simpler to build and
<br>
install.</p>

<p style="margin-top: 1em">XS-type modules do require
re-linking the perl binary, because part of an XS module is
written in &quot;C&quot;, and has to be linked together with
the perl binary to be executed. This is <br>
required because perl under DJGPP is built with the
&quot;static link&quot; option, due to the lack of
&quot;dynamic linking&quot; in the DJGPP environment.</p>

<p style="margin-top: 1em">Because XS modules require
re-linking of the perl binary, you need both the perl binary
distribution and the perl source distribution to build an XS
extension module. In <br>
addition, you will have to have built your perl binary from
the source distribution so that all of the components of the
perl binary are available for the required link step.</p>

<p style="margin-top: 1em">Unpacking CPAN Modules on DOS
<br>
First, download the module package from CPAN (e.g., the
&quot;Comma Separated Value&quot; text package,
Text-CSV-0.01.tar.gz). Then expand the contents of the
package into some location <br>
on your disk. Most CPAN modules are built with an internal
directory structure, so it is usually safe to expand it in
the root of your DJGPP installation. Some people prefer to
<br>
locate source trees under /usr/src (i.e.,
&quot;($DJDIR)/usr/src&quot;), but you may put it wherever
seems most logical to you, *EXCEPT* under the same directory
as your perl source code. <br>
There are special rules that apply to modules which live in
the perl source tree that do not apply to most of the
modules in CPAN.</p>

<p style="margin-top: 1em">Unlike other DJGPP packages,
which are normal &quot;zip&quot; files, most CPAN module
packages are &quot;gzipped tarballs&quot;. Recent versions
of WinZip will safely unpack and expand them, <br>
*UNLESS* they have zero-length files. It is a known WinZip
bug (as of v7.0) that it will not extract zero-length
files.</p>

<p style="margin-top: 1em">From the command line, you can
use the djtar utility provided with DJGPP to unpack and
expand these files. For example:</p>

<p style="margin-top: 1em">C:jgpp&gt;djtarx -v
Text-CSV-0.01.tar.gz</p>

<p style="margin-top: 1em">This will create the new
directory &quot;($DJDIR)/Text-CSV-0.01&quot;, filling it
with the source for this module.</p>

<p style="margin-top: 1em">Building Non-XS Modules on DOS
<br>
To build a non-XS module, you can use the standard
module-building instructions distributed with perl
modules.</p>

<p style="margin-top: 1em">perl Makefile.PL <br>
make <br>
make test <br>
make install</p>

<p style="margin-top: 1em">This is sufficient because
non-XS modules install only &quot;.pm&quot; files and
(sometimes) pod and/or man documentation. No re-linking of
the perl binary is needed to build, install or <br>
use non-XS modules.</p>

<p style="margin-top: 1em">Building XS Modules on DOS <br>
To build an XS module, you must use the standard
module-building instructions distributed with perl modules
*PLUS* three extra instructions specific to the DJGPP
&quot;static link&quot; <br>
build environment.</p>

<p style="margin-top: 1em">set FNCASE=y <br>
perl Makefile.PL <br>
make <br>
make perl <br>
make test <br>
make -f Makefile.aperl inst_perl MAP_TARGET=perl.exe <br>
make install</p>

<p style="margin-top: 1em">The first extra instruction sets
DJGPP&rsquo;s FNCASE environment variable so that the new
perl binary which you must build for an XS-type module will
build correctly. The second <br>
extra instruction re-builds the perl binary in your module
directory before you run &quot;make test&quot;, so that you
are testing with the new module code you built with
&quot;make&quot;. The <br>
third extra instruction installs the perl binary from your
module directory into the standard DJGPP binary directory,
&quot;($DJDIR)/bin&quot;, replacing your previous perl
binary.</p>

<p style="margin-top: 1em">Note that the MAP_TARGET value
*must* have the &quot;.exe&quot; extension or you will not
create a &quot;perl.exe&quot; to replace the one in
&quot;($DJDIR)/bin&quot;.</p>

<p style="margin-top: 1em">When you are done, the XS-module
install process will have added information to your
&quot;perllocal&quot; information telling that the perl
binary has been replaced, and what module was <br>
installed. You can view this information at any time by
using the command:</p>

<p style="margin-top: 1em">perl -S perldoc perllocal</p>

<p style="margin-top: 1em">AUTHOR <br>
Laszlo Molnar, laszlo.molnar@eth.ericsson.se
[Installing/building perl]</p>

<p style="margin-top: 1em">Peter J. Farley III
pjfarley@banet.net [Building/installing modules]</p>

<p style="margin-top: 1em">SEE ALSO <br>
perl(1).</p>

<p style="margin-top: 1em">perl v5.16.3 2013-02-26
PERLDOS(1)</p>
<hr>
</body>
</html>
