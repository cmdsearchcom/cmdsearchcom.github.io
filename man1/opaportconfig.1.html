<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:28:33 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opaportconfig(1) Master map:
IFSFFCLIRG (Man Page) opaportconfig(1)</p>

<p style="margin-top: 1em">NAME <br>
opaportconfig</p>

<p style="margin-top: 1em">(Host or Switch) Controls the
configuration and state of a specified Intel(R) Omni-Path
Host Fabric Interface (HFI) port on the local host or a
remote switch.</p>

<p style="margin-top: 1em">Syntax <br>
opaportconfig [-l lid[-m dest_port]] [-h hfi] [-p port] [-r
secs] [-z] <br>
[-S state] [-P physstate] [-s speed] [-w width] [-c LTPCRC]
[-K mkey] <br>
[-v] [-x] [-L lid] [#8217lt; sub command&gt;]</p>

<p style="margin-top: 1em">Options <br>
-l lid Destination LID. Default is local port.</p>

<p style="margin-top: 1em">-m dest_port <br>
Destination port. Default is port with given LID. Used to
access switch ports.</p>

<p style="margin-top: 1em">-h hfi HFI to send through/to.
Default is first HFI.</p>

<p style="margin-top: 1em">-p port Port to send through/to.
Default is first port.</p>

<p style="margin-top: 1em">-K mkey SM management key to
access remote ports.</p>

<p style="margin-top: 1em">sub command <br>
One of the following choices:</p>

<p style="margin-top: 1em">enable Enables port.</p>

<p style="margin-top: 1em">disable Disables port.</p>

<p style="margin-top: 1em">bounce Bounces port.</p>

<p style="margin-top: 1em">NOTE: Bouncing remote ports may
cause timeouts.</p>

<p style="margin-top: 1em">ledon Turns port LED on.</p>

<p style="margin-top: 1em">ledoff Turns port LED off.</p>

<p style="margin-top: 1em">Configuration Options <br>
-r secs Repeats to keep the port down for the specified
amount of seconds.</p>

<p style="margin-top: 1em">-S state New state. Default is
0.</p>

<p style="margin-top: 1em">0 No-op.</p>

<p style="margin-top: 1em">1 Down.</p>

<p style="margin-top: 1em">2 Initiate.</p>

<p style="margin-top: 1em">3 Armed.</p>

<p style="margin-top: 1em">4 Active.</p>

<p style="margin-top: 1em">-P physstate <br>
New physical state. Default is 0.</p>

<p style="margin-top: 1em">NOTE: All transitions are
valid.</p>

<p style="margin-top: 1em">0 No-op.</p>

<p style="margin-top: 1em">2 Polling.</p>

<p style="margin-top: 1em">3 Disabled.</p>

<p style="margin-top: 1em">11 Phy-Test. Current physstate
must be disabled.</p>

<p style="margin-top: 1em">-s speed New link speeds
enabled. Default is 0. To enable multiple speeds, use the
sum of the desired speeds.</p>

<p style="margin-top: 1em">0 No-op.</p>

<p style="margin-top: 1em">2 0x0002 - 25 Gb/s.</p>

<p style="margin-top: 1em">-w width New link widths
enabled. Default is 0. To enable multiple widths, use sum of
desired widths.</p>

<p style="margin-top: 1em">0 No-op.</p>

<p style="margin-top: 1em">1 0x01 - 1x.</p>

<p style="margin-top: 1em">2 0x02 - 2x.</p>

<p style="margin-top: 1em">4 0x04 - 3x.</p>

<p style="margin-top: 1em">8 0x08 - 4x.</p>

<p style="margin-top: 1em">-c LTPCRC New LTP CRCs enabled.
Default is 0. To enable multiple LTP CRCs, use sum of
desired LTP CRCs.</p>

<p style="margin-top: 1em">0 No-op.</p>

<p style="margin-top: 1em">1 0x1 - 14-bit LTP CRC mode.</p>

<p style="margin-top: 1em">2 0x2 - 16-bit LTP CRC mode.</p>

<p style="margin-top: 1em">4 0x4 - 48-bit LTP CRC mode.</p>

<p style="margin-top: 1em">8 0x8 - 12/16 bits per lane LTP
CRC mode.</p>

<p style="margin-top: 1em">-h and -p options permit a
variety of selections: <br>
-h 0 First port in system (default).</p>

<p style="margin-top: 1em">-h x First port on HFI x.</p>

<p style="margin-top: 1em">-h 0 -p y <br>
Port y within system.</p>

<p style="margin-top: 1em">-h x#8217#160;-p y <br>
HFI x, port y.</p>

<p style="margin-top: 1em">Debug Options <br>
-v Verbose output. Additional invocations turn on debugging,
openib debugging, and libibumad debugging.</p>

<p style="margin-top: 1em">-z Does not get port info first,
clears most port attributes.</p>

<p style="margin-top: 1em">-L lid Sets PortInfo.LID =
lid.</p>

<p style="margin-top: 1em">Examples <br>
opaportconfig -w 1 <br>
opaportconfig -p 1 -h 2 -w 3</p>

<p style="margin-top: 1em">Description <br>
Port configuration is transient in nature. If the given host
is rebooted or its Intel(R) Omni-Path Fabric Stack is
restarted, the port reverts to its default configuration and
<br>
state. Typically, the default state is to have the port
enabled with all speeds and widths supported by the given
HFI port.</p>

<p style="margin-top: 1em">To access switch ports using
this command, the -l and -m options must be given. The -l
option specifies the lid of switch port 0 (the logical
management port for the switch) and <br>
-m specifies the actual switch port to access. If SMA mkeys
are used, the -K option is also needed. However, the
Intel(R) Omni-Path Fabric Suite Fabric Manager does not use
SMA <br>
mkeys by default, therefore this option may not be
required.</p>

<p style="margin-top: 1em">NOTE: The
/etc/init.d/opaportconfig script is provided as an example
of changing port speed every time the server boots. This
script can be edited, then scheduled, using chkcon&acirc;
<br>
fig to control link settings on any set of HFI ports.</p>

<p style="margin-top: 1em">CAUTION: When using this command
to disable or reconfigure switch ports, if the final port in
the path between the Fabric Management Node and the switch
is disabled or fails to <br>
come online, then opaenableports is not able to reenable it.
In this case, the switch CLI and/or a switch reboot may be
needed to correct the situation.</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opaportconfig(1)</p>
<hr>
</body>
</html>
