<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opaportconfig(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opaportconfig(1)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opaportconfig(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opaportconfig
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(Host or Switch)</b> Controls the configuration and state of a specified
  Intel(R) Omni-Path Host Fabric Interface (HFI) port on the local host or a
  remote switch.
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opaportconfig [-l <i>lid</i>[-m <i>dest_port</i>]] [-h <i>hfi</i>] [-p
  <i>port</i>] [-r <i>secs</i>] [-z]
<div>&#x00A0;</div>
[-S <i>state</i>] [-P <i>physstate</i>] [-s <i>speed</i>] [-w <i>width</i>] [-c
  <i>LTPCRC</i>] [-K <i>mkey</i>]
<div>&#x00A0;</div>
[-v] [-x] [-L <i>lid</i>] [#8217lt; <i>sub command</i>&gt;]
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-l <i>lid</i></dt>
  <dd class="It-tag">Destination LID. Default is local port.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-m <i>dest_port</i></dt>
  <dd class="It-tag">Destination port. Default is port with given LID. Used to
      access switch ports.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>hfi</i></dt>
  <dd class="It-tag">HFI to send through/to. Default is first HFI.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>port</i></dt>
  <dd class="It-tag">Port to send through/to. Default is first port.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-K <i>mkey</i></dt>
  <dd class="It-tag">SM management key to access remote ports.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
   <i>sub command</i></dt>
  <dd class="It-tag">One of the following choices:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
enable Enables port.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
disable Disables port.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
bounce Bounces port.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
<b>NOTE:</b> Bouncing remote ports may cause timeouts.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
ledon Turns port LED on.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
ledoff Turns port LED off.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Configuration_Options"><a class="selflink" href="#Configuration_Options">Configuration
  Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-r <i>secs</i></dt>
  <dd class="It-tag">Repeats to keep the port down for the specified amount of
      seconds.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-S <i>state</i></dt>
  <dd class="It-tag">New state. Default is 0.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No-op.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
1 Down.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 Initiate.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
3 Armed.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
4 Active.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-P <i>physstate</i></dt>
  <dd class="It-tag">New physical state. Default is 0.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
<b>NOTE:</b> All transitions are valid.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No-op.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 Polling.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
3 Disabled.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
11 Phy-Test. Current physstate must be disabled.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-s <i>speed</i></dt>
  <dd class="It-tag">New link speeds enabled. Default is 0. To enable multiple
      speeds, use the sum of the desired speeds.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No-op.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 0x0002 - 25 Gb/s.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-w <i>width</i></dt>
  <dd class="It-tag">New link widths enabled. Default is 0. To enable multiple
      widths, use sum of desired widths.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No-op.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
1 0x01 - 1x.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 0x02 - 2x.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
4 0x04 - 3x.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
8 0x08 - 4x.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-c <i>LTPCRC</i></dt>
  <dd class="It-tag">New LTP CRCs enabled. Default is 0. To enable multiple LTP
      CRCs, use sum of desired LTP CRCs.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0 No-op.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
1 0x1 - 14-bit LTP CRC mode.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
2 0x2 - 16-bit LTP CRC mode.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
4 0x4 - 48-bit LTP CRC mode.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
8 0x8 - 12/16 bits per lane LTP CRC mode.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="-h_and_-p_options_permit_a_variety_of_selections:"><a class="selflink" href="#-h_and_-p_options_permit_a_variety_of_selections:">-h
  and -p options permit a variety of selections:</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-h 0</dt>
  <dd class="It-tag">First port in system (default).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>x</i></dt>
  <dd class="It-tag">First port on HFI <i>x</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h 0 -p <i>y</i></dt>
  <dd class="It-tag">Port <i>y</i> within system.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>x</i>#8217#160;-p <i>y</i></dt>
  <dd class="It-tag">HFI <i>x</i>, port <i>y</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Debug_Options"><a class="selflink" href="#Debug_Options">Debug
  Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-v</dt>
  <dd class="It-tag">Verbose output. Additional invocations turn on debugging,
      openib debugging, and libibumad debugging.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-z</dt>
  <dd class="It-tag">Does not get port info first, clears most port attributes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-L <i>lid</i></dt>
  <dd class="It-tag">Sets PortInfo.LID = lid.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
opaportconfig -w 1
<div>&#x00A0;</div>
opaportconfig -p 1 -h 2 -w 3
<h1 class="Sh" title="Sh" id="Description"><a class="selflink" href="#Description">Description</a></h1>
Port configuration is transient in nature. If the given host is rebooted or its
  Intel(R) Omni-Path Fabric Stack is restarted, the port reverts to its default
  configuration and state. Typically, the default state is to have the port
  enabled with all speeds and widths supported by the given HFI port.
<div class="Pp"></div>
To access switch ports using this command, the -l and -m options must be given.
  The -l option specifies the lid of switch port 0 (the logical management port
  for the switch) and -m specifies the actual switch port to access. If SMA
  mkeys are used, the -K option is also needed. However, the Intel(R) Omni-Path
  Fabric Suite Fabric Manager does not use SMA mkeys by default, therefore this
  option may not be required.
<div class="Pp"></div>
<b>NOTE:</b> The /etc/init.d/opaportconfig script is provided as an example of
  changing port speed every time the server boots. This script can be edited,
  then scheduled, using chkconfig to control link settings on any set of HFI
  ports.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>CAUTION:</b> When using this command to disable or reconfigure switch ports,
  if the final port in the path between the Fabric Management Node and the
  switch is disabled or fails to come online, then opaenableports is not able to
  reenable it. In this case, the switch CLI and/or a switch reboot may be needed
  to correct the situation.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
