<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GPG-AGENT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GPG-AGENT(1)</td>
    <td class="head-vol">GNU Privacy Guard</td>
    <td class="head-rtitle">GPG-AGENT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>gpg-agent</b> - Secret key management for GnuPG
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>gpg-agent</b> [<b>--homedir</b> <i>dir</i>] [<b>--options</b> <i>file</i>]
  [<i>options</i>]
<div>&#x00A0;</div>
<b>gpg-agent</b> [<b>--homedir</b> <i>dir</i>] [<b>--options</b> <i>file</i>]
  [<i>options</i>] <b>--server</b>
<div>&#x00A0;</div>
<b>gpg-agent</b> [<b>--homedir</b> <i>dir</i>] [<b>--options</b> <i>file</i>]
  [<i>options</i>] <b>--daemon</b> [<i>command_line</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>gpg-agent</b> is a daemon to manage secret (private) keys independently from
  any protocol. It is used as a backend for <b>gpg</b> and <b>gpgsm</b> as well
  as for a couple of other utilities.
<div style="height: 1.00em;">&#x00A0;</div>
The agent is usualy started on demand by <b>gpg</b>, <b>gpgsm</b>,
  <b>gpgconf</b> or <b>gpg-connect-agent</b>. Thus there is no reason to start
  it manually. In case you want to use the included Secure Shell Agent you may
  start the agent using:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
gpg-connect-agent /bye
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
The usual way to run the agent is from the <b>~/.xsession</b> file:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
eval $(gpg-agent --daemon)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
If you don't use an X server, you can also put this into your regular startup
  file <b>~/.profile</b> or <b>.bash_profile</b>. It is best not to run multiple
  instance of the <b>gpg-agent</b>, so you should make sure that only one is
  running: <b>gpg-agent</b> uses an environment variable to inform clients about
  the communication parameters. You can write the content of this environment
  variable to a file so that you can test for a running agent. Here is an
  example using Bourne shell syntax:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
gpg-agent --daemon --enable-ssh-support \
          --write-env-file &quot;${HOME}/.gpg-agent-info&quot;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
This code should only be run once per user session to initially fire up the
  agent. In the example the optional support for the included Secure Shell agent
  is enabled and the information about the agent is written to a file in the
  HOME directory. Note that by running gpg-agent without arguments you may test
  whether an agent is already running; however such a test may lead to a race
  condition, thus it is not suggested.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
The second script needs to be run for each interactive session:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
if [ -f &quot;${HOME}/.gpg-agent-info&quot; ]; then
  . &quot;${HOME}/.gpg-agent-info&quot;
  export GPG_AGENT_INFO
  export SSH_AUTH_SOCK
fi
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
It reads the data out of the file and exports the variables. If you don't use
  Secure Shell, you don't need the last two export statements.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
You should always add the following lines to your <b>.bashrc</b> or whatever
  initialization file is used for all shell invocations:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
GPG_TTY=$(tty)
export GPG_TTY
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
It is important that this environment variable always reflects the output of the
  <b>tty</b> command. For W32 systems this option is not required.
<div style="height: 1.00em;">&#x00A0;</div>
Please make sure that a proper pinentry program has been installed under the
  default filename (which is system dependant) or use the option
  <b>pinentry-program</b> to specify the full name of that program. It is often
  useful to install a symbolic link from the actual used pinentry (e.g. &#x2018;
  <i>/usr/bin/pinentry-gtk</i>&#x2019;) to the expected one (e.g. &#x2018;
  <i>/usr/bin/pinentry</i>&#x2019;).
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
Commands are not distinguished from options except for the fact that only one
  command is allowed.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the program version and licensing information. Note
      that you cannot abbreviate this command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Print a usage message summarizing the most useful
      command-line options. Note that you cannot abbreviate this command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dump-options</b></dt>
  <dd class="It-tag">Print a list of all available options and commands. Note
      that you cannot abbreviate this command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--server</b></dt>
  <dd class="It-tag">Run in server mode and wait for commands on the
      <b>stdin</b>. The default mode is to create a socket and listen for
      commands there.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--daemon [<i>command line</i>]</b></dt>
  <dd class="It-tag">Start the gpg-agent as a daemon; that is, detach it from
      the console and run it in the background. Because <b>gpg-agent</b> prints
      out important information required for further use, a common way of
      invoking gpg-agent is: <b>eval $(gpg-agent --daemon)</b> to setup the
      environment variables. The option <b>--write-env-file</b> is another way
      commonly used to do this. Yet another way is creating a new process as a
      child of gpg-agent: <b>gpg-agent --daemon</b> <b>/bin/sh</b>. This way you
      get a new shell with the environment setup properly; if you exit from this
      shell, gpg-agent terminates as well.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--options <i>file</i></b></dt>
  <dd class="It-tag">Reads configuration from <i>file</i> instead of from the
      default per-user configuration file. The default configuration file is
      named &#x2018; <i>gpg-agent.conf</i>&#x2019; and expected in the
      &#x2018;<i>.gnupg</i>&#x2019; directory directly below the home directory
      of the user.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--homedir <i>dir</i></b></dt>
  <dd class="It-tag">Set the name of the home directory to <i>dir</i>. If this
      option is not used, the home directory defaults to &#x2018;
      <i>~/.gnupg</i>&#x2019;. It is only recognized when given on the command
      line. It also overrides any home directory stated through the environment
      variable &#x2018; <i>GNUPGHOME</i>&#x2019; or (on W32 systems) by means of
      the Registry entry <i>HKCU\Software\GNU\GnuPG:HomeDir</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Outputs additional information while running. You can
      increase the verbosity by giving several verbose commands to <b>gpgsm</b>,
      such as '-vv'.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">Try to be as quiet as possible.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch</b></dt>
  <dd class="It-tag">Don't invoke a pinentry or do any other thing requiring
      human interaction.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--faked-system-time <i>epoch</i></b></dt>
  <dd class="It-tag">This option is only useful for testing; it sets the system
      time back or forth to <i>epoch</i> which is the number of seconds elapsed
      since the year 1970.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug-level <i>level</i></b></dt>
  <dd class="It-tag">Select the debug level for investigating problems.
      <i>level</i> may be a numeric value or a keyword:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>none</b></dt>
  <dd class="It-tag">No debugging at all. A value of less than 1 may be used
      instead of the keyword.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>basic</b></dt>
  <dd class="It-tag">Some basic debug messages. A value between 1 and 2 may be
      used instead of the keyword.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>advanced</b></dt>
  <dd class="It-tag">More verbose debug messages. A value between 3 and 5 may be
      used instead of the keyword.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>expert</b></dt>
  <dd class="It-tag">Even more detailed messages. A value between 6 and 8 may be
      used instead of the keyword.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>guru</b></dt>
  <dd class="It-tag">All of the debug messages you can get. A value greater than
      8 may be used instead of the keyword. The creation of hash tracing files
      is only enabled if the keyword is used.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
How these messages are mapped to the actual debugging flags is not specified and
  may change with newer releases of this program. They are however carefully
  selected to best aid in debugging.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug <i>flags</i></b></dt>
  <dd class="It-tag">This option is only useful for debugging and the behaviour
      may change at any time without notice. FLAGS are bit encoded and may be
      given in usual C-Syntax. The currently defined bits are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>0 (1)</b></dt>
  <dd class="It-tag">X.509 or OpenPGP protocol related data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1 (2)</b></dt>
  <dd class="It-tag">values of big number integers</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2 (4)</b></dt>
  <dd class="It-tag">low level crypto operations</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>5 (32)</b></dt>
  <dd class="It-tag">memory allocation</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>6 (64)</b></dt>
  <dd class="It-tag">caching</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>7 (128)</b></dt>
  <dd class="It-tag">show memory statistics.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>9 (512)</b></dt>
  <dd class="It-tag">write hashed data to files named <b>dbgmd-000*</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>10 (1024)</b></dt>
  <dd class="It-tag">trace Assuan protocol</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>12 (4096)</b></dt>
  <dd class="It-tag">bypass all certificate validation</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug-all</b></dt>
  <dd class="It-tag">Same as <b>--debug=0xffffffff</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug-wait <i>n</i></b></dt>
  <dd class="It-tag">When running in server mode, wait <i>n</i> seconds before
      entering the actual processing loop and print the pid. This gives time to
      attach a debugger.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-detach</b></dt>
  <dd class="It-tag">Don't detach the process from the console. This is mainly
      useful for debugging.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--sh</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--csh</b></dt>
  <dd class="It-tag">Format the info output in daemon mode for use with the
      standard Bourne shell or the C-shell respectively. The default is to guess
      it based on the environment variable <b>SHELL</b> which is correct in
      almost all cases.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--write-env-file <i>file</i></b></dt>
  <dd class="It-tag">Often it is required to connect to the agent from a process
      not being an inferior of <b>gpg-agent</b> and thus the environment
      variable with the socket name is not available. To help setting up those
      variables in other sessions, this option may be used to write the
      information into <i>file</i>. If <i>file</i> is not specified the default
      name &#x2018; <i>${HOME}/.gpg-agent-info</i>&#x2019; will be used. The
      format is suitable to be evaluated by a Bourne shell like in this simple
      example:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 2.00ex;">
<pre>
eval $(cat  <i>file</i>)
eval $(cut -d= -f 1 &lt;  <i>file</i> | xargs echo export)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-grab</b></dt>
  <dd class="It-tag">Tell the pinentry not to grab the keyboard and mouse. This
      option should in general not be used to avoid X-sniffing attacks.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--log-file <i>file</i></b></dt>
  <dd class="It-tag">Append all logging output to <i>file</i>. This is very
      helpful in seeing what the agent actually does. If neither a log file nor
      a log file descriptor has been set on a Windows platform, the Registry
      entry <b>HKCU\Software\GNU\GnuPG:DefaultLogFile</b>, if set, is used to
      specify the logging output.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--allow-mark-trusted</b></dt>
  <dd class="It-tag">Allow clients to mark keys as trusted, i.e. put them into
      the &#x2018; <i>trustlist.txt</i>&#x2019; file. This is by default not
      allowed to make it harder for users to inadvertently accept Root-CA keys.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--allow-loopback-pinentry</b></dt>
  <dd class="It-tag">Allow clients to use the loopback pinentry features; see
      the option <b>pinentry-mode</b> for details.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-cache-for-signing</b></dt>
  <dd class="It-tag">This option will let <b>gpg-agent</b> bypass the passphrase
      cache for all signing operation. Note that there is also a per-session
      option to control this behaviour but this command line option takes
      precedence.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--default-cache-ttl <i>n</i></b></dt>
  <dd class="It-tag">Set the time a cache entry is valid to <i>n</i> seconds.
      The default is 600 seconds.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--default-cache-ttl-ssh <i>n</i></b></dt>
  <dd class="It-tag">Set the time a cache entry used for SSH keys is valid to
      <i>n</i> seconds. The default is 1800 seconds.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--max-cache-ttl <i>n</i></b></dt>
  <dd class="It-tag">Set the maximum time a cache entry is valid to <i>n</i>
      seconds. After this time a cache entry will be expired even if it has been
      accessed recently. The default is 2 hours (7200 seconds).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--max-cache-ttl-ssh <i>n</i></b></dt>
  <dd class="It-tag">Set the maximum time a cache entry used for SSH keys is
      valid to <i>n</i> seconds. After this time a cache entry will be expired
      even if it has been accessed recently. The default is 2 hours (7200
      seconds).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--enforce-passphrase-constraints</b></dt>
  <dd class="It-tag">Enforce the passphrase constraints by not allowing the user
      to bypass them using the ``Take it anyway'' button.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--min-passphrase-len <i>n</i></b></dt>
  <dd class="It-tag">Set the minimal length of a passphrase. When entering a new
      passphrase shorter than this value a warning will be displayed. Defaults
      to 8.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--min-passphrase-nonalpha <i>n</i></b></dt>
  <dd class="It-tag">Set the minimal number of digits or special characters
      required in a passphrase. When entering a new passphrase with less than
      this number of digits or special characters a warning will be displayed.
      Defaults to 1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-passphrase-pattern <i>file</i></b></dt>
  <dd class="It-tag">Check the passphrase against the pattern given in
      <i>file</i>. When entering a new passphrase matching one of these pattern
      a warning will be displayed. <i>file</i> should be an absolute filename.
      The default is not to use any pattern file.
    <div style="height: 1.00em;">&#x00A0;</div>
    Security note: It is known that checking a passphrase against a list of
      pattern or even against a complete dictionary is not very effective to
      enforce good passphrases. Users will soon figure up ways to bypass such a
      policy. A better policy is to educate users on good security behavior and
      optionally to run a passphrase cracker regularly on all users passphrases
      to catch the very simple ones.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--max-passphrase-days <i>n</i></b></dt>
  <dd class="It-tag">Ask the user to change the passphrase if <i>n</i> days have
      passed since the last change. With <b>--enforce-passphrase-constraints</b>
      set the user may not bypass this check.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--enable-passphrase-history</b></dt>
  <dd class="It-tag">This option does nothing yet.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pinentry-program <i>filename</i></b></dt>
  <dd class="It-tag">Use program <i>filename</i> as the PIN entry. The default
      is installation dependent.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pinentry-touch-file <i>filename</i></b></dt>
  <dd class="It-tag">By default the filename of the socket gpg-agent is
      listening for requests is passed to Pinentry, so that it can touch that
      file before exiting (it does this only in curses mode). This option
      changes the file passed to Pinentry to <i>filename</i>. The special name
      <b>/dev/null</b> may be used to completely disable this feature. Note that
      Pinentry will not create that file, it will only change the modification
      and access time.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--scdaemon-program <i>filename</i></b></dt>
  <dd class="It-tag">Use program <i>filename</i> as the Smartcard daemon. The
      default is installation dependent and can be shown with the <b>gpgconf</b>
      command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--disable-scdaemon</b></dt>
  <dd class="It-tag">Do not make use of the scdaemon tool. This option has the
      effect of disabling the ability to do smartcard operations. Note, that
      enabling this option at runtime does not kill an already forked scdaemon.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--disable-check-own-socket</b></dt>
  <dd class="It-tag"><b>gpg-agent</b> employs a periodic self-test to detect a
      stolen socket. This usually means a second instance of <b>gpg-agent</b>
      has taken over the socket and <b>gpg-agent</b> will then terminate itself.
      This option may be used to disable this self-test for debugging purposes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-standard-socket</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-use-standard-socket</b></dt>
  <dd class="It-tag">By enabling this option <b>gpg-agent</b> will listen on the
      socket named &#x2018; <i>S.gpg-agent</i>&#x2019;, located in the home
      directory, and not create a random socket below a temporary directory.
      Tools connecting to <b>gpg-agent</b> should first try to connect to the
      socket given in environment variable <i>GPG_AGENT_INFO</i> and then fall
      back to this socket. This option may not be used if the home directory is
      mounted on a remote file system which does not support special files like
      fifos or sockets. Note, that <b>--use-standard-socket</b> is the default
      on all systems since GnuPG 2.1. Note, that <b>--use-standard-socket</b> is
      the default on Windows systems. The default may be changed at build time.
      It is possible to test at runtime whether the agent has been configured
      for use with the standard socket by issuing the command <b>gpg-agent</b>
      <b>--use-standard-socket-p</b> which returns success if the standard
      socket option has been enabled.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--display <i>string</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ttyname <i>string</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ttytype <i>string</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--lc-ctype <i>string</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--lc-messages <i>string</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--xauthority <i>string</i></b></dt>
  <dd class="It-tag">These options are used with the server mode to pass
      localization information.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--keep-tty</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--keep-display</b></dt>
  <dd class="It-tag">Ignore requests to change the current <b>tty</b> or X
      window system's <b>DISPLAY</b> variable respectively. This is useful to
      lock the pinentry to pop up at the <b>tty</b> or display you started the
      agent.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--enable-ssh-support</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Enable the OpenSSH Agent protocol.
    <div style="height: 1.00em;">&#x00A0;</div>
    In this mode of operation, the agent does not only implement the gpg-agent
      protocol, but also the agent protocol used by OpenSSH (through a separate
      socket). Consequently, it should be possible to use the gpg-agent as a
      drop-in replacement for the well known ssh-agent.
    <div style="height: 1.00em;">&#x00A0;</div>
    SSH Keys, which are to be used through the agent, need to be added to the
      gpg-agent initially through the ssh-add utility. When a key is added,
      ssh-add will ask for the password of the provided key file and send the
      unprotected key material to the agent; this causes the gpg-agent to ask
      for a passphrase, which is to be used for encrypting the newly received
      key and storing it in a gpg-agent specific directory.
    <div style="height: 1.00em;">&#x00A0;</div>
    Once a key has been added to the gpg-agent this way, the gpg-agent will be
      ready to use the key.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note: in case the gpg-agent receives a signature request, the user might
      need to be prompted for a passphrase, which is necessary for decrypting
      the stored key. Since the ssh-agent protocol does not contain a mechanism
      for telling the agent on which display/terminal it is running, gpg-agent's
      ssh-support will use the TTY or X display where gpg-agent has been
      started. To switch this display to the current one, the following command
      may be used:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 2.00ex;">
<pre>
gpg-connect-agent updatestartuptty /bye
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Although all GnuPG components try to start the gpg-agent as needed, this is not
  possible for the ssh support because ssh does not know about it. Thus if no
  GnuPG tool which accesses the agent has been run, there is no guarantee that
  ssh is abale to use gpg-agent for authentication. To fix this you may start
  gpg-agent if needed using this simple command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
gpg-connect-agent /bye
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Adding the <b>--verbose</b> shows the progress of starting the agent.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
All the long options may also be given in the configuration file after stripping
  off the two leading dashes.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The usual way to invoke <b>gpg-agent</b> is
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
$ eval $(gpg-agent --daemon)
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
An alternative way is by replacing <b>ssh-agent</b> with <b>gpg-agent</b>. If
  for example <b>ssh-agent</b> is started as part of the Xsession
  initialization, you may simply replace <b>ssh-agent</b> by a script like:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
#!/bin/sh
<div class="Pp"></div>
exec /usr/local/bin/gpg-agent --enable-ssh-support --daemon \
      --write-env-file ${HOME}/.gpg-agent-info &quot;$@&quot;
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
and add something like (for Bourne shells)
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
  if [ -f &quot;${HOME}/.gpg-agent-info&quot; ]; then
    . &quot;${HOME}/.gpg-agent-info&quot;
    export GPG_AGENT_INFO
    export SSH_AUTH_SOCK
  fi
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
to your shell initialization file (e.g. &#x2018; <i>~/.bashrc</i>&#x2019;).
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
There are a few configuration files needed for the operation of the agent. By
  default they may all be found in the current home directory (see: [option
  --homedir]).
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gpg-agent.conf</b></dt>
  <dd class="It-tag">
    <br/>
     This is the standard configuration file read by <b>gpg-agent</b> on
    <br/>
     startup. It may contain any valid long option; the leading
    <br/>
     two dashes may not be entered and the option may not be abbreviated.
    <br/>
     This file is also read after a <b>SIGHUP</b> however only a few
    <br/>
     options will actually have an effect. This default name may be
    <br/>
     changed on the command line (see: [option --options]).
    <br/>
     You should backup this file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>trustlist.txt</b></dt>
  <dd class="It-tag">
    <br/>
     This is the list of trusted keys. You should backup this file.
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     Comment lines, indicated by a leading hash mark, as well as empty
    <br/>
     lines are ignored. To mark a key as trusted you need to enter its
    <br/>
     fingerprint followed by a space and a capital letter <b>S</b>. Colons
    <br/>
     may optionally be used to separate the bytes of a fingerprint; this
    <br/>
     allows to cut and paste the fingerprint from a key listing output. If
    <br/>
     the line is prefixed with a <b>!</b> the key is explicitly marked as
    <br/>
     not trusted.
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     Here is an example where two keys are marked as ultimately trusted
    <br/>
     and one as not trusted:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     .RS 2
    <pre>
  # CN=Wurzel ZS 3,O=Intevation GmbH,C=DE
  A6935DD34EF3087973C706FC311AA2CCF733765B S
<div class="Pp"></div>
  # CN=PCA-1-Verwaltung-02/O=PKI-1-Verwaltung/C=DE
  DC:BD:69:25:48:BD:BB:7E:31:6E:BB:80:D3:00:80:35:D4:F8:A6:CD S
<div class="Pp"></div>
  # CN=Root-CA/O=Schlapphuete/L=Pullach/C=DE
  !14:56:98:D3:FE:9C:CA:5A:31:6E:BC:81:D3:11:4E:00:90:A3:44:C2 S
  .fi
    </pre>
  </dd>
</dl>
<pre>
<div class="Pp"></div>
Before entering a key into this file, you need to ensure its
authenticity.  How to do this depends on your organisation; your
administrator might have already entered those keys which are deemed
trustworthy enough into this file.  Places where to look for the
fingerprint of a root certificate are letters received from the CA or
the website of the CA (after making 100% sure that this is indeed the
website of that CA).  You may want to consider allowing interactive
updates of this file by using the see: [option --allow-mark-trusted].
This is however not as secure as maintaining this file manually.  It is
even advisable to change the permissions to read-only so that this file
can't be changed inadvertently.
<div class="Pp"></div>
As a special feature a line  <b>include-default</b> will include a global
list of trusted certificates (e.g. &#x2018; <i>/etc/gnupg/trustlist.txt</i>&#x2019;).
This global list is also used if the local list is not available.
<div class="Pp"></div>
It is possible to add further flags after the  <b>S</b> for use by the
caller:
<div class="Pp"></div>
</pre>
<div style="margin-left: 5.00ex;">
<pre>
<div class="Pp"></div>
</pre>
<dl class="Bl-tag">
  <dt class="It-tag"><b>relax</b></dt>
  <dd class="It-tag">
    <pre>
Relax checking of some root certificate requirements.  As of now this
flag allows the use of root certificates with a missing basicConstraints
attribute (despite that it is a MUST for CA certificates) and disables
CRL checking for the root certificate.
<div class="Pp"></div>
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cm</b></dt>
  <dd class="It-tag">
    <pre>
If validation of a certificate finally issued by a CA with this flag set
fails, try again using the chain validation model.
<div class="Pp"></div>
    </pre>
  </dd>
</dl>
</div>
<pre>
<div class="Pp"></div>
<div class="Pp"></div>
</pre>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sshcontrol</b></dt>
  <dd class="It-tag">
    <pre>
This file is used when support for the secure shell agent protocol has
been enabled (see: [option --enable-ssh-support]). Only keys present in
this file are used in the SSH protocol.  You should backup this file.
<div class="Pp"></div>
The  <b>ssh-add</b> tool may be used to add new entries to this file;
you may also add them manually.  Comment lines, indicated by a leading
hash mark, as well as empty lines are ignored.  An entry starts with
optional whitespace, followed by the keygrip of the key given as 40 hex
digits, optionally followed by the caching TTL in seconds and another
optional field for arbitrary flags.  A non-zero TTL overrides the global
default as set by  <b>--default-cache-ttl-ssh</b>.
<div class="Pp"></div>
The only flag support is  <b>confirm</b>.  If this flag is found for a
key, each use of the key will pop up a pinentry to confirm the use of
that key.  The flag is automatically set if a new key was loaded into
<b>gpg-agent</b> using the option <b>-c</b> of the <b>ssh-add</b>
command.
<div class="Pp"></div>
The keygrip may be prefixed with a  <b>!</b> to disable an entry entry.
<div class="Pp"></div>
The following example lists exactly one key.  Note that keys available
through a OpenPGP smartcard in the active smartcard reader are
implicitly added to this list; i.e. there is no need to list them.
<div class="Pp"></div>
  .RS 2
  # Key added on: 2011-07-20 20:38:46
  # Fingerprint:  5e:8d:c4:ad:e7:af:6e:27:8a:d6:13:e4:79:ad:0b:81
  34B62F25E277CF13D3C6BCEBFD3F85D08F0A864B 0 confirm
  .fi
    </pre>
  </dd>
</dl>
<pre>
<div class="Pp"></div>
</pre>
<dl class="Bl-tag">
  <dt class="It-tag"><b>private-keys-v1.d/</b></dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
  This is the directory where gpg-agent stores the private keys.  Each
  key is stored in a file with the name made up of the keygrip and the
  suffix &#x2018; <i>key</i>&#x2019;.  You should backup all files in this directory
  and take great care to keep this backup closed away.
<div class="Pp"></div>
<div class="Pp"></div>
<div class="Pp"></div>
Note that on larger installations, it is useful to put predefined
files into the directory &#x2018; <i>/etc/skel/.gnupg/</i>&#x2019; so that newly created
users start up with a working configuration.  For existing users the
a small helper script is provided to create these files (see: [addgnupghome]).
<div class="Pp"></div>
<div class="Pp"></div>
<div class="Pp"></div>
<div class="Pp"></div>
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SIGNALS"><a class="selflink" href="#SIGNALS">SIGNALS</a></h1>
A running <b>gpg-agent</b> may be controlled by signals, i.e. using the
  <b>kill</b> command to send a signal to the process.
<div style="height: 1.00em;">&#x00A0;</div>
Here is a list of supported signals:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SIGHUP</b></dt>
  <dd class="It-tag">This signal flushes all cached passphrases and if the
      program has been started with a configuration file, the configuration file
      is read again. Only certain options are honored: <b>quiet</b>,
      <b>verbose</b>, <b>debug</b>, <b>debug-all</b>, <b>debug-level</b>,
      <b>no-grab</b>, <b>pinentry-program</b>, <b>default-cache-ttl</b>,
      <b>max-cache-ttl</b>, <b>ignore-cache-for-signing</b>,
      <b>allow-mark-trusted</b>, <b>disable-scdaemon</b>, and
      <b>disable-check-own-socket</b>. <b>scdaemon-program</b> is also supported
      but due to the current implementation, which calls the scdaemon only once,
      it is not of much use unless you manually kill the scdaemon.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SIGTERM</b></dt>
  <dd class="It-tag">Shuts down the process but waits until all current requests
      are fulfilled. If the process has received 3 of these signals and requests
      are still pending, a shutdown is forced.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SIGINT</b></dt>
  <dd class="It-tag">Shuts down the process immediately.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SIGUSR1</b></dt>
  <dd class="It-tag">Dump internal information to the log file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SIGUSR2</b></dt>
  <dd class="It-tag">This signal is used for internal purposes.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>gpg2</b>(1), <b>gpgsm</b>(1), <b>gpg-connect-agent</b>(1), <b>scdaemon</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
The full documentation for this tool is maintained as a Texinfo manual. If GnuPG
  and the info program are properly installed at your site, the command
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
info gnupg
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
should give you access to the complete manual including a menu structure and an
  index.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-11-05</td>
    <td class="foot-os">GnuPG 2.0.22</td>
  </tr>
</table>
</body>
</html>
