<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:41:34 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>UNZIPSFX(1L) UNZIPSFX(1L)</p>

<p style="margin-top: 1em">NAME <br>
unzipsfx - self-extracting stub for prepending to ZIP
archives</p>

<p style="margin-top: 1em">SYNOPSIS <br>
&lt;name of unzipsfx+archive combo&gt; [-cfptuz[ajnoqsCLV$]]
[file(s) ... [-x xfile(s) ...]]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
unzipsfx is a modified version of unzip(1L) designed to be
prepended to existing ZIP archives in order to form
self-extracting archives. Instead of taking its first
non-flag <br>
argument to be the zipfile(s) to be extracted, unzipsfx
seeks itself under the name by which it was invoked and
tests or extracts the contents of the appended archive.
Because <br>
the executable stub adds bulk to the archive (the whole
purpose of which is to be as small as possible), a number of
the less-vital capabilities in regular unzip have been <br>
removed. Among these are the usage (or help) screen, the
listing and diagnostic functions (-l and -v), the ability to
decompress older compression formats (the
&lsquo;&lsquo;reduce,&rsquo;&rsquo; <br>
&lsquo;&lsquo;shrink&rsquo;&rsquo; and
&lsquo;&lsquo;implode&rsquo;&rsquo; methods). The ability to
extract to a directory other than the current one can be
selected as a compile-time option, which is now enabled by
default <br>
since UnZipSFX version 5.5. Similarly, decryption is
supported as a compile-time option but should be avoided
unless the attached archive contains encrypted files.
Starting with <br>
release 5.5, another compile-time option adds a simple
&lsquo;&lsquo;run command after extraction&rsquo;&rsquo;
feature. This feature is currently incompatible with the
&lsquo;&lsquo;extract to different direc&acirc; <br>
tory&rsquo;&rsquo; feature and remains disabled by
default.</p>

<p style="margin-top: 1em">Note that self-extracting
archives made with unzipsfx are no more (or less) portable
across different operating systems than is the unzip
executable itself. In general a self- <br>
extracting archive made on a particular Unix system, for
example, will only self-extract under the same flavor of
Unix. Regular unzip may still be used to extract the
embedded <br>
archive as with any normal zipfile, although it will
generate a harmless warning about extra bytes at the
beginning of the zipfile. Despite this, however, the
self-extracting <br>
archive is technically not a valid ZIP archive, and PKUNZIP
may be unable to test or extract it. This limitation is due
to the simplistic manner in which the archive is created;
<br>
the internal directory structure is not updated to reflect
the extra bytes prepended to the original zipfile.</p>

<p style="margin-top: 1em">ARGUMENTS <br>
[file(s)] <br>
An optional list of archive members to be processed. Regular
expressions (wildcards) similar to those in Unix egrep(1)
may be used to match multiple members. These wild&acirc;
<br>
cards may contain:</p>

<p style="margin-top: 1em">* matches a sequence of 0 or
more characters</p>

<p style="margin-top: 1em">? matches exactly 1
character</p>

<p style="margin-top: 1em">[...] matches any single
character found inside the brackets; ranges are specified by
a beginning character, a hyphen, and an ending character. If
an exclamation point <br>
or a caret (&lsquo;!&rsquo; or &lsquo;^&rsquo;) follows the
left bracket, then the range of characters within the
brackets is complemented (that is, anything except the
characters inside <br>
the brackets is considered a match).</p>

<p style="margin-top: 1em">(Be sure to quote any character
that might otherwise be interpreted or modified by the
operating system, particularly under Unix and VMS.)</p>

<p style="margin-top: 1em">[-x xfile(s)] <br>
An optional list of archive members to be excluded from
processing. Since wildcard characters match directory
separators (&lsquo;/&rsquo;), this option may be used to
exclude any <br>
files that are in subdirectories. For example,
&lsquo;&lsquo;foosfx *.[ch] -x */*&rsquo;&rsquo; would
extract all C source files in the main directory, but none
in any subdirectories. Without <br>
the -x option, all C source files in all directories within
the zipfile would be extracted.</p>

<p style="margin-top: 1em">If unzipsfx is compiled with
SFX_EXDIR defined, the following option is also enabled:</p>

<p style="margin-top: 1em">[-d exdir] <br>
An optional directory to which to extract files. By default,
all files and subdirectories are recreated in the current
directory; the -d option allows extraction in an <br>
arbitrary directory (always assuming one has permission to
write to the directory). The option and directory may be
concatenated without any white space between them, but <br>
note that this may cause normal shell behavior to be
suppressed. In particular, &lsquo;&lsquo;-d ~&rsquo;&rsquo;
(tilde) is expanded by Unix C shells into the name of the
user&rsquo;s home directory, <br>
but &lsquo;&lsquo;-d~&rsquo;&rsquo; is treated as a literal
subdirectory &lsquo;&lsquo;~&rsquo;&rsquo; of the current
directory.</p>

<p style="margin-top: 1em">OPTIONS <br>
unzipsfx supports the following unzip(1L) options: -c and -p
(extract to standard output/screen), -f and -u (freshen and
update existing files upon extraction), -t (test ar&acirc;
<br>
chive) and -z (print archive comment). All normal listing
options (-l, -v and -Z) have been removed, but the testing
option (-t) may be used as a &lsquo;&lsquo;poor
man&rsquo;s&rsquo;&rsquo; listing. Alter&acirc; <br>
natively, those creating self-extracting archives may wish
to include a short listing in the zipfile comment.</p>

<p style="margin-top: 1em">See unzip(1L) for a more
complete description of these options.</p>

<p style="margin-top: 1em">MODIFIERS <br>
unzipsfx currently supports all unzip(1L) modifiers: -a
(convert text files), -n (never overwrite), -o (overwrite
without prompting), -q (operate quietly), -C (match names
case- <br>
insensitively), -L (convert uppercase-OS names to
lowercase), -j (junk paths) and -V (retain version numbers);
plus the following operating-system specific options: -X
(restore <br>
VMS owner/protection info), -s (convert spaces in filenames
to underscores [DOS, OS/2, NT]) and -$ (restore volume label
[DOS, OS/2, NT, Amiga]).</p>

<p style="margin-top: 1em">(Support for regular ASCII
text-conversion may be removed in future versions, since it
is simple enough for the archive&rsquo;s creator to ensure
that text files have the appropriate <br>
format for the local OS. EBCDIC conversion will of course
continue to be supported since the zipfile format implies
ASCII storage of text files.)</p>

<p style="margin-top: 1em">See unzip(1L) for a more
complete description of these modifiers.</p>

<p style="margin-top: 1em">ENVIRONMENT OPTIONS <br>
unzipsfx uses the same environment variables as unzip(1L)
does, although this is likely to be an issue only for the
person creating and testing the self-extracting archive. See
<br>
unzip(1L) for details.</p>

<p style="margin-top: 1em">DECRYPTION <br>
Decryption is supported exactly as in unzip(1L); that is,
interactively with a non-echoing prompt for the password(s).
See unzip(1L) for details. Once again, note that if the <br>
archive has no encrypted files there is no reason to use a
version of unzipsfx with decryption support; that only adds
to the size of the archive.</p>

<p style="margin-top: 1em">AUTORUN COMMAND <br>
When unzipsfx was compiled with CHEAP_SFX_AUTORUN defined, a
simple &lsquo;&lsquo;command autorun&rsquo;&rsquo; feature
is supported. You may enter a command into the Zip archive
comment, using the fol&acirc; <br>
lowing format:</p>

<p style="margin-top: 1em">$AUTORUN$&gt;[command line
string]</p>

<p style="margin-top: 1em">When unzipsfx recognizes the
&lsquo;&lsquo;$AUTORUN$&gt;&rsquo;&rsquo; token at the
beginning of the Zip archive comment, the remainder of the
first line of the comment (until the first newline
character) <br>
is passed as a shell command to the operating system using
the C rtl &lsquo;&lsquo;system&rsquo;&rsquo; function.
Before executing the command, unzipsfx displays the command
on the console and prompts <br>
the user for confirmation. When the user has switched off
prompting by specifying the -q option, autorun commands are
never executed.</p>

<p style="margin-top: 1em">In case the archive comment
contains additional lines of text, the remainder of the
archive comment following the first line is displayed
normally, unless quiet operation was <br>
requested by supplying a -q option.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To create a self-extracting archive letters from a regular
zipfile letters.zip and change the new archive&rsquo;s
permissions to be world-executable under Unix:</p>

<p style="margin-top: 1em">cat unzipsfx letters.zip &gt;
letters <br>
chmod 755 letters <br>
zip -A letters</p>

<p style="margin-top: 1em">To create the same archive under
MS-DOS, OS/2 or NT (note the use of the /b [binary] option
to the copy command):</p>

<p style="margin-top: 1em">copy /b unzipsfx.exe+letters.zip
letters.exe <br>
zip -A letters.exe</p>

<p style="margin-top: 1em">Under VMS:</p>

<p style="margin-top: 1em">copy unzipsfx.exe,letters.zip
letters.exe <br>
letters == &quot;$currentdisk:[currentdir]letters.exe&quot;
<br>
zip -A letters.exe</p>

<p style="margin-top: 1em">(The VMS append command may also
be used. The second command installs the new program as a
&lsquo;&lsquo;foreign command&rsquo;&rsquo; capable of
taking arguments. The third line assumes that Zip is <br>
already installed as a foreign command.) Under AmigaDOS:</p>

<p style="margin-top: 1em">MakeSFX letters letters.zip
UnZipSFX</p>

<p style="margin-top: 1em">(MakeSFX is included with the
UnZip source distribution and with Amiga binary
distributions. &lsquo;&lsquo;zip -A&rsquo;&rsquo;
doesn&rsquo;t work on Amiga self-extracting archives.) To
test (or list) the <br>
newly created self-extracting archive:</p>

<p style="margin-top: 1em">letters -t</p>

<p style="margin-top: 1em">To test letters quietly,
printing only a summary message indicating whether the
archive is OK or not:</p>

<p style="margin-top: 1em">letters -tqq</p>

<p style="margin-top: 1em">To extract the complete contents
into the current directory, recreating all files and
subdirectories as necessary:</p>

<p style="margin-top: 1em">letters</p>

<p style="margin-top: 1em">To extract all *.txt files (in
Unix quote the &lsquo;*&rsquo;):</p>

<p style="margin-top: 1em">letters *.txt</p>

<p style="margin-top: 1em">To extract everything except the
*.txt files:</p>

<p style="margin-top: 1em">letters -x *.txt</p>

<p style="margin-top: 1em">To extract only the README file
to standard output (the screen):</p>

<p style="margin-top: 1em">letters -c README</p>

<p style="margin-top: 1em">To print only the zipfile
comment:</p>

<p style="margin-top: 1em">letters -z</p>

<p style="margin-top: 1em">LIMITATIONS <br>
The principle and fundamental limitation of unzipsfx is that
it is not portable across architectures or operating
systems, and therefore neither are the resulting archives.
For <br>
some architectures there is limited portability, however
(e.g., between some flavors of Intel-based Unix).</p>

<p style="margin-top: 1em">Another problem with the current
implementation is that any archive with
&lsquo;&lsquo;junk&rsquo;&rsquo; prepended to the beginning
technically is no longer a zipfile (unless zip(1) is used to
adjust <br>
the zipfile offsets appropriately, as noted above). unzip(1)
takes note of the prepended bytes and ignores them since
some file-transfer protocols, notably MacBinary, are also
<br>
known to prepend junk. But PKWARE&rsquo;s archiver suite may
not be able to deal with the modified archive unless its
offsets have been adjusted.</p>

<p style="margin-top: 1em">unzipsfx has no knowledge of the
user&rsquo;s PATH, so in general an archive must either be
in the current directory when it is invoked, or else a full
or relative path must be given. <br>
If a user attempts to extract the archive from a directory
in the PATH other than the current one, unzipsfx will print
a warning to the effect, &lsquo;&lsquo;can&rsquo;t find
myself.&rsquo;&rsquo; This is <br>
always true under Unix and may be true in some cases under
MS-DOS, depending on the compiler used (Microsoft C fully
qualifies the program name, but other compilers may not).
<br>
Under OS/2 and NT there are operating-system calls available
that provide the full path name, so the archive may be
invoked from anywhere in the user&rsquo;s path. The
situation is <br>
not known for AmigaDOS, Atari TOS, MacOS, etc.</p>

<p style="margin-top: 1em">As noted above, a number of the
normal unzip(1L) functions have been removed in order to
make unzipsfx smaller: usage and diagnostic info, listing
functions and extraction to <br>
other directories. Also, only stored and deflated files are
supported. The latter limitation is mainly relevant to those
who create SFX archives, however.</p>

<p style="margin-top: 1em">VMS users must know how to set
up self-extracting archives as foreign commands in order to
use any of unzipsfx&rsquo;s options. This is not necessary
for simple extraction, but the <br>
command to do so then becomes, e.g., &lsquo;&lsquo;run
letters&rsquo;&rsquo; (to continue the examples given
above).</p>

<p style="margin-top: 1em">unzipsfx on the Amiga requires
the use of a special program, MakeSFX, in order to create
working self-extracting archives; simple concatenation does
not work. (For technically <br>
oriented users, the attached archive is defined as a
&lsquo;&lsquo;debug hunk.&rsquo;&rsquo;) There may be
compatibility problems between the ROM levels of older
Amigas and newer ones.</p>

<p style="margin-top: 1em">All current bugs in unzip(1L)
exist in unzipsfx as well.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
unzipsfx&rsquo;s exit status (error level) is identical to
that of unzip(1L); see the corresponding man page.</p>

<p style="margin-top: 1em">SEE ALSO <br>
funzip(1L), unzip(1L), zip(1L), zipcloak(1L), zipgrep(1L),
zipinfo(1L), zipnote(1L), zipsplit(1L)</p>

<p style="margin-top: 1em">URL <br>
The Info-ZIP home page is currently at <br>
http://www.info-zip.org/pub/infozip/ <br>
or <br>
ftp://ftp.info-zip.org/pub/infozip/ .</p>

<p style="margin-top: 1em">AUTHORS <br>
Greg Roelofs was responsible for the basic modifications to
UnZip necessary to create UnZipSFX. See unzip(1L) for the
current list of Zip-Bugs authors, or the file CONTRIBS in
<br>
the UnZip source distribution for the full list of Info-ZIP
contributors.</p>

<p style="margin-top: 1em">Info-ZIP 20 April 2009 (v6.0)
UNZIPSFX(1L)</p>
<hr>
</body>
</html>
