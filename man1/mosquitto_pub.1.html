<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:02 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MOSQUITTO_PUB(1) Commands MOSQUITTO_PUB(1)</p>

<p style="margin-top: 1em">NAME <br>
mosquitto_pub - an MQTT version 3.1/3.1.1 client for
publishing simple messages</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mosquitto_pub [-A bind_address] [-d] [-h hostname] [-i
client_id] [-I client id prefix] [-k keepalive time] [-p
port number] [-q message QoS] [--quiet] [-r] [-S] {-f file |
-l | <br>
-m message | -n | -s} [[-u username] [-P password]]
[--will-topic topic [--will-payload payload] [--will-qos
qos] [--will-retain]] <br>
[[{--cafile file | --capath dir} [--cert file] [--key file]
[--ciphers ciphers] [--tls-version version] [--insecure]] |
<br>
[--psk hex-key --psk-identity identity [--ciphers ciphers]
[--tls-version version]]] [--proxy socks-url] [-V
protocol-version] -t message-topic</p>

<p style="margin-top: 1em">mosquitto_pub [--help]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mosquitto_pub is a simple MQTT version 3.1 client that will
publish a single message on a topic and exit.</p>

<p style="margin-top: 1em">OPTIONS <br>
The options below may be given on the command line, but may
also be placed in a config file located at
$XDG_CONFIG_HOME/mosquitto_pub or
$HOME/.config/mosquitto_sub with one pair <br>
of -option value per line. The values in the config file
will be used as defaults and can be overridden by using the
command line. The exceptions to this are the message type
<br>
options, of which only one can be specified. Note also that
currently some options cannot be negated, e.g. -S. Config
file lines that have a # as the first character are treated
<br>
as comments and not processed any further.</p>

<p style="margin-top: 1em">-A <br>
Bind the outgoing connection to a local ip address/hostname.
Use this argument if you need to restrict network
communication to a particular interface.</p>

<p style="margin-top: 1em">--cafile <br>
Define the path to a file containing PEM encoded CA
certificates that are trusted. Used to enable SSL
communication.</p>

<p style="margin-top: 1em">See also --capath</p>

<p style="margin-top: 1em">--capath <br>
Define the path to a directory containing PEM encoded CA
certificates that are trusted. Used to enable SSL
communication.</p>

<p style="margin-top: 1em">For --capath to work correctly,
the certificate files must have &quot;.crt&quot; as the file
ending and you must run &quot;c_rehash &lt;path to
capath&gt;&quot; each time you add/remove a certificate.</p>

<p style="margin-top: 1em">See also --cafile</p>

<p style="margin-top: 1em">--cert <br>
Define the path to a file containing a PEM encoded
certificate for this client, if required by the server.</p>

<p style="margin-top: 1em">See also --key.</p>

<p style="margin-top: 1em">--ciphers <br>
An openssl compatible list of TLS ciphers to support in the
client. See ciphers(1) for more information.</p>

<p style="margin-top: 1em">-d, --debug <br>
Enable debug messages.</p>

<p style="margin-top: 1em">-f, --file <br>
Send the contents of a file as the message.</p>

<p style="margin-top: 1em">--help <br>
Display usage information.</p>

<p style="margin-top: 1em">-h, --host <br>
Specify the host to connect to. Defaults to localhost.</p>

<p style="margin-top: 1em">-i, --id <br>
The id to use for this client. If not given, defaults to
mosquitto_pub_ appended with the process id of the client.
Cannot be used at the same time as the --id-prefix <br>
argument.</p>

<p style="margin-top: 1em">-I, --id-prefix <br>
Provide a prefix that the client id will be built from by
appending the process id of the client. This is useful where
the broker is using the clientid_prefixes option. <br>
Cannot be used at the same time as the --id argument.</p>

<p style="margin-top: 1em">--insecure <br>
When using certificate based encryption, this option
disables verification of the server hostname in the server
certificate. This can be useful when testing initial server
<br>
configurations but makes it possible for a malicious third
party to impersonate your server through DNS spoofing, for
example. Use this option in testing only. If you need to
<br>
resort to using this option in a production environment,
your setup is at fault and there is no point using
encryption.</p>

<p style="margin-top: 1em">-k, --keepalive <br>
The number of seconds between sending PING commands to the
broker for the purposes of informing it we are still
connected and functioning. Defaults to 60 seconds.</p>

<p style="margin-top: 1em">--key <br>
Define the path to a file containing a PEM encoded private
key for this client, if required by the server.</p>

<p style="margin-top: 1em">See also --cert.</p>

<p style="margin-top: 1em">-l, --stdin-line <br>
Send messages read from stdin, splitting separate lines into
separate messages. Note that blank lines won&rsquo;t be
sent.</p>

<p style="margin-top: 1em">-m, --message <br>
Send a single message from the command line.</p>

<p style="margin-top: 1em">-n, --null-message <br>
Send a null (zero length) message.</p>

<p style="margin-top: 1em">-p, --port <br>
Connect to the port specified instead of the default
1883.</p>

<p style="margin-top: 1em">-P, --pw <br>
Provide a password to be used for authenticating with the
broker. Using this argument without also specifying a
username is invalid. This requires a broker that supports
MQTT <br>
v3.1. See also the --username option.</p>

<p style="margin-top: 1em">--proxy <br>
Specify a SOCKS5 proxy to connect through. &quot;None&quot;
and &quot;username&quot; authentication types are supported.
The socks-url must be of the form <br>
socks5h://[username[:password]@]host[:port]. The protocol
prefix socks5h means that hostnames are resolved by the
proxy. The symbols %25, %3A and %40 are URL decoded into %,
<br>
: and @ respectively, if present in the username or
password.</p>

<p style="margin-top: 1em">If username is not given, then
no authentication is attempted. If the port is not given,
then the default of 1080 is used.</p>

<p style="margin-top: 1em">More SOCKS versions may be
available in the future, depending on demand, and will use
different protocol prefixes as described in curl(1).</p>

<p style="margin-top: 1em">--psk <br>
Provide the hexadecimal (no leading 0x) pre-shared-key
matching the one used on the broker to use TLS-PSK
encryption support. --psk-identity must also be provided to
enable <br>
TLS-PSK.</p>

<p style="margin-top: 1em">--psk-identity <br>
The client identity to use with TLS-PSK support. This may be
used instead of a username if the broker is configured to do
so.</p>

<p style="margin-top: 1em">-q, --qos <br>
Specify the quality of service to use for the message, from
0, 1 and 2. Defaults to 0.</p>

<p style="margin-top: 1em">--quiet <br>
If this argument is given, no runtime errors will be
printed. This excludes any error messages given in case of
invalid user input (e.g. using --port without a port).</p>

<p style="margin-top: 1em">-r, --retain <br>
If retain is given, the message will be retained as a
&quot;last known good&quot; value on the broker. See mqtt(7)
for more information.</p>

<p style="margin-top: 1em">-s, --stdin-file <br>
Send a message read from stdin, sending the entire content
as a single message.</p>

<p style="margin-top: 1em">-S <br>
Use SRV lookups to determine which host to connect to.
Performs lookups to _mqtt._tcp.&lt;host&gt; when used in
conjunction with -h, otherwise uses _mqtt._tcp.&lt;local dns
domain&gt;.</p>

<p style="margin-top: 1em">-t, --topic <br>
The MQTT topic on which to publish the message. See mqtt(7)
for more information on MQTT topics.</p>

<p style="margin-top: 1em">--tls-version <br>
Choose which TLS protocol version to use when communicating
with the broker. Valid options are tlsv1.2, tlsv1.1 and
tlsv1. The default value is tlsv1.2. If the installed <br>
version of openssl is too old, only tlsv1 will be available.
Must match the protocol version used by the broker.</p>

<p style="margin-top: 1em">-u, --username <br>
Provide a username to be used for authenticating with the
broker. This requires a broker that supports MQTT v3.1. See
also the --pw argument.</p>

<p style="margin-top: 1em">-V, --protocol-version <br>
Specify which version of the MQTT protocol should be used
when connecting to the rmeote broker. Can be mqttv31 or
mqttv311. Defaults to mqttv31.</p>

<p style="margin-top: 1em">--will-payload <br>
Specify a message that will be stored by the broker and sent
out if this client disconnects unexpectedly. This must be
used in conjunction with --will-topic.</p>

<p style="margin-top: 1em">--will-qos <br>
The QoS to use for the Will. Defaults to 0. This must be
used in conjunction with --will-topic.</p>

<p style="margin-top: 1em">--will-retain <br>
If given, if the client disconnects unexpectedly the message
sent out will be treated as a retained message. This must be
used in conjunction with --will-topic.</p>

<p style="margin-top: 1em">--will-topic <br>
The topic on which to send a Will, in the event that the
client disconnects unexpectedly.</p>

<p style="margin-top: 1em">WILLS <br>
mosquitto_sub can register a message with the broker that
will be sent out if it disconnects unexpectedly. See mqtt(7)
for more information.</p>

<p style="margin-top: 1em">The minimum requirement for this
is to use --will-topic to specify which topic the will
should be sent out on. This will result in a non-retained,
zero length message with QoS 0.</p>

<p style="margin-top: 1em">Use the --will-retain,
--will-payload and --will-qos arguments to modify the other
will parameters.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Publish temperature information to localhost with QoS 1:</p>

<p style="margin-top: 1em">&Acirc;&middot; mosquitto_pub -t
sensors/temperature -m 32 -q 1</p>

<p style="margin-top: 1em">Publish timestamp and
temperature information to a remote host on a non-standard
port and QoS 0:</p>

<p style="margin-top: 1em">&Acirc;&middot; mosquitto_pub -h
192.168.1.1 -p 1885 -t sensors/temperature -m
&quot;1266193804 32&quot;</p>

<p style="margin-top: 1em">Publish light switch status.
Message is set to retained because there may be a long
period of time between light switch events:</p>

<p style="margin-top: 1em">&Acirc;&middot; mosquitto_pub -r
-t switches/kitchen_lights/status -m &quot;on&quot;</p>

<p style="margin-top: 1em">Send the contents of a file in
two ways:</p>

<p style="margin-top: 1em">&Acirc;&middot; mosquitto_pub -t
my/topic -f ./data</p>

<p style="margin-top: 1em">&Acirc;&middot; mosquitto_pub -t
my/topic -s &lt; ./data</p>

<p style="margin-top: 1em">Send parsed electricity usage
data from a Current Cost meter, reading from stdin with one
line/reading as one message:</p>

<p style="margin-top: 1em">&Acirc;&middot; read_cc128.pl |
mosquitto_pub -t sensors/cc128 -l</p>

<p style="margin-top: 1em">FILES <br>
$XDG_CONFIG_HOME/mosquitto_pub, $HOME/.config/mosquitto_pub
<br>
Configuration file for default options.</p>

<p style="margin-top: 1em">BUGS <br>
mosquitto bug information can be found at
https://github.com/eclipse/mosquitto/issues</p>

<p style="margin-top: 1em">SEE ALSO <br>
mqtt(7), mosquitto_sub(1), mosquitto(8), libmosquitto(3),
mosquitto-tls(7)</p>

<p style="margin-top: 1em">AUTHOR <br>
Roger Light &lt;roger@atchoo.org&gt;</p>

<p style="margin-top: 1em">Mosquitto Project 07/10/2017
MOSQUITTO_PUB(1)</p>
<hr>
</body>
</html>
