<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MOSQUITTO_PUB(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MOSQUITTO_PUB(1)</td>
    <td class="head-vol">Commands</td>
    <td class="head-rtitle">MOSQUITTO_PUB(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mosquitto_pub - an MQTT version 3.1/3.1.1 client for publishing simple messages
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 14.00ex; text-indent: -14.00ex;"><b>mosquitto_pub</b>
  [ <b>-A</b>&#x00A0;<i>bind_address</i>] [<b>-d</b>]
  [<b>-h</b>&#x00A0;<i>hostname</i>] [ <b>-i</b>&#x00A0;<i>client_id</i>]
  [<b>-I</b>&#x00A0; <i>client&#x00A0;id&#x00A0;prefix</i>]
  [<b>-k</b>&#x00A0;<i>keepalive&#x00A0;time</i>]
  [<b>-p</b>&#x00A0;<i>port&#x00A0;number</i>] [
  <b>-q</b>&#x00A0;<i>message&#x00A0;QoS</i>] [ <b>--quiet</b>] [<b>-r</b>]
  [<b>-S</b>] { <b>-f</b>&#x00A0;<i>file</i> | <b>-l</b> |
  <b>-m</b>&#x00A0;<i>message</i> | <b>-n</b> | <b>-s</b>}
  [[<b>-u</b>&#x00A0;<i>username</i>]&#x00A0;[<b>-P</b>&#x00A0;<i>password</i>]]
  [
  <b>--will-topic</b>&#x00A0;<i>topic</i>&#x00A0;[<b>--will-payload</b>&#x00A0;
  <i>payload</i>]&#x00A0;[<b>--will-qos</b>&#x00A0;<i>qos</i>]&#x00A0;[<b>--will-retain</b>]]
  [[{
  <b>--cafile</b>&#x00A0;<i>file</i>&#x00A0;|&#x00A0;<b>--capath</b>&#x00A0;<i>dir</i>}&#x00A0;[<b>--cert</b>&#x00A0;<i>file</i>]&#x00A0;[<b>--key</b>&#x00A0;<i>file</i>]&#x00A0;[<b>--ciphers</b>&#x00A0;<i>ciphers</i>]&#x00A0;[<b>--tls-version</b>&#x00A0;<i>version</i>]&#x00A0;[<b>--insecure</b>]]
  | [
  <b>--psk</b>&#x00A0;<i>hex-key</i>&#x00A0;<b>--psk-identity</b>&#x00A0;<i>identity</i>&#x00A0;[
  <b>--ciphers</b>&#x00A0;<i>ciphers</i>]&#x00A0;[<b>--tls-version</b>&#x00A0;<i>version</i>]]]
  [ <b>--proxy</b>&#x00A0;<i>socks-url</i>]
  [<b>-V</b>&#x00A0;<i>protocol-version</i>]
  <b>-t</b>&#x00A0;<i>message-topic</i></div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 14.00ex; text-indent: -14.00ex;"><b>mosquitto_pub</b>
  [ <b>--help</b>]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>mosquitto_pub</b> is a simple MQTT version 3.1 client that will publish a
  single message on a topic and exit.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The options below may be given on the command line, but may also be placed in a
  config file located at <b>$XDG_CONFIG_HOME/mosquitto_pub</b> or
  <b>$HOME/.config/mosquitto_sub</b> with one pair of <b>-option
  </b><b></b><i>value</i> per line. The values in the config file will be used
  as defaults and can be overridden by using the command line. The exceptions to
  this are the message type options, of which only one can be specified. Note
  also that currently some options cannot be negated, e.g. <b>-S</b>. Config
  file lines that have a <b>#</b> as the first character are treated as comments
  and not processed any further.
<div class="Pp"></div>
<b>-A</b>
<div style="margin-left: 4.00ex;">Bind the outgoing connection to a local ip
  address/hostname. Use this argument if you need to restrict network
  communication to a particular interface.</div>
<div class="Pp"></div>
<b>--cafile</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing PEM
  encoded CA certificates that are trusted. Used to enable SSL communication.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--capath</b></div>
<div class="Pp"></div>
<b>--capath</b>
<div style="margin-left: 4.00ex;">Define the path to a directory containing PEM
  encoded CA certificates that are trusted. Used to enable SSL communication.
<div style="height: 1.00em;">&#x00A0;</div>
For <b>--capath</b> to work correctly, the certificate files must have
  &quot;.crt&quot; as the file ending and you must run &quot;c_rehash &lt;path
  to capath&gt;&quot; each time you add/remove a certificate.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--cafile</b></div>
<div class="Pp"></div>
<b>--cert</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing a PEM
  encoded certificate for this client, if required by the server.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--key</b>.</div>
<div class="Pp"></div>
<b>--ciphers</b>
<div style="margin-left: 4.00ex;">An openssl compatible list of TLS ciphers to
  support in the client. See <b>ciphers</b>(1) for more information.</div>
<div class="Pp"></div>
<b>-d</b>, <b>--debug</b>
<div style="margin-left: 4.00ex;">Enable debug messages.</div>
<div class="Pp"></div>
<b>-f</b>, <b>--file</b>
<div style="margin-left: 4.00ex;">Send the contents of a file as the
  message.</div>
<div class="Pp"></div>
<b>--help</b>
<div style="margin-left: 4.00ex;">Display usage information.</div>
<div class="Pp"></div>
<b>-h</b>, <b>--host</b>
<div style="margin-left: 4.00ex;">Specify the host to connect to. Defaults to
  localhost.</div>
<div class="Pp"></div>
<b>-i</b>, <b>--id</b>
<div style="margin-left: 4.00ex;">The id to use for this client. If not given,
  defaults to mosquitto_pub_ appended with the process id of the client. Cannot
  be used at the same time as the <b>--id-prefix</b> argument.</div>
<div class="Pp"></div>
<b>-I</b>, <b>--id-prefix</b>
<div style="margin-left: 4.00ex;">Provide a prefix that the client id will be
  built from by appending the process id of the client. This is useful where the
  broker is using the clientid_prefixes option. Cannot be used at the same time
  as the <b>--id</b> argument.</div>
<div class="Pp"></div>
<b>--insecure</b>
<div style="margin-left: 4.00ex;">When using certificate based encryption, this
  option disables verification of the server hostname in the server certificate.
  This can be useful when testing initial server configurations but makes it
  possible for a malicious third party to impersonate your server through DNS
  spoofing, for example. Use this option in testing <i>only</i>. If you need to
  resort to using this option in a production environment, your setup is at
  fault and there is no point using encryption.</div>
<div class="Pp"></div>
<b>-k</b>, <b>--keepalive</b>
<div style="margin-left: 4.00ex;">The number of seconds between sending PING
  commands to the broker for the purposes of informing it we are still connected
  and functioning. Defaults to 60 seconds.</div>
<div class="Pp"></div>
<b>--key</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing a PEM
  encoded private key for this client, if required by the server.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--cert</b>.</div>
<div class="Pp"></div>
<b>-l</b>, <b>--stdin-line</b>
<div style="margin-left: 4.00ex;">Send messages read from stdin, splitting
  separate lines into separate messages. Note that blank lines won't be
  sent.</div>
<div class="Pp"></div>
<b>-m</b>, <b>--message</b>
<div style="margin-left: 4.00ex;">Send a single message from the command
  line.</div>
<div class="Pp"></div>
<b>-n</b>, <b>--null-message</b>
<div style="margin-left: 4.00ex;">Send a null (zero length) message.</div>
<div class="Pp"></div>
<b>-p</b>, <b>--port</b>
<div style="margin-left: 4.00ex;">Connect to the port specified instead of the
  default 1883.</div>
<div class="Pp"></div>
<b>-P</b>, <b>--pw</b>
<div style="margin-left: 4.00ex;">Provide a password to be used for
  authenticating with the broker. Using this argument without also specifying a
  username is invalid. This requires a broker that supports MQTT v3.1. See also
  the <b>--username</b> option.</div>
<div class="Pp"></div>
<b>--proxy</b>
<div style="margin-left: 4.00ex;">Specify a SOCKS5 proxy to connect through.
  &quot;None&quot; and &quot;username&quot; authentication types are supported.
  The <b>socks-url</b> must be of the form
  <b>socks5h://[username[:password]@]host[:port]</b>. The protocol prefix
  <b>socks5h</b> means that hostnames are resolved by the proxy. The symbols
  %25, %3A and %40 are URL decoded into %, : and @ respectively, if present in
  the username or password.
<div style="height: 1.00em;">&#x00A0;</div>
If username is not given, then no authentication is attempted. If the port is
  not given, then the default of 1080 is used.
<div style="height: 1.00em;">&#x00A0;</div>
More SOCKS versions may be available in the future, depending on demand, and
  will use different protocol prefixes as described in <b>curl</b>(1).</div>
<div class="Pp"></div>
<b>--psk</b>
<div style="margin-left: 4.00ex;">Provide the hexadecimal (no leading 0x)
  pre-shared-key matching the one used on the broker to use TLS-PSK encryption
  support. <b>--psk-identity</b> must also be provided to enable TLS-PSK.</div>
<div class="Pp"></div>
<b>--psk-identity</b>
<div style="margin-left: 4.00ex;">The client identity to use with TLS-PSK
  support. This may be used instead of a username if the broker is configured to
  do so.</div>
<div class="Pp"></div>
<b>-q</b>, <b>--qos</b>
<div style="margin-left: 4.00ex;">Specify the quality of service to use for the
  message, from 0, 1 and 2. Defaults to 0.</div>
<div class="Pp"></div>
<b>--quiet</b>
<div style="margin-left: 4.00ex;">If this argument is given, no runtime errors
  will be printed. This excludes any error messages given in case of invalid
  user input (e.g. using <b>--port</b> without a port).</div>
<div class="Pp"></div>
<b>-r</b>, <b>--retain</b>
<div style="margin-left: 4.00ex;">If retain is given, the message will be
  retained as a &quot;last known good&quot; value on the broker. See
  <b>mqtt</b>(7) for more information.</div>
<div class="Pp"></div>
<b>-s</b>, <b>--stdin-file</b>
<div style="margin-left: 4.00ex;">Send a message read from stdin, sending the
  entire content as a single message.</div>
<div class="Pp"></div>
<b>-S</b>
<div style="margin-left: 4.00ex;">Use SRV lookups to determine which host to
  connect to. Performs lookups to <b>_mqtt._tcp.&lt;host&gt;</b> when used in
  conjunction with <b>-h</b>, otherwise uses <b>_mqtt._tcp.&lt;local dns
  domain&gt;</b>.</div>
<div class="Pp"></div>
<b>-t</b>, <b>--topic</b>
<div style="margin-left: 4.00ex;">The MQTT topic on which to publish the
  message. See <b>mqtt</b>(7) for more information on MQTT topics.</div>
<div class="Pp"></div>
<b>--tls-version</b>
<div style="margin-left: 4.00ex;">Choose which TLS protocol version to use when
  communicating with the broker. Valid options are <b>tlsv1.2</b>,
  <b>tlsv1.1</b> and <b>tlsv1</b>. The default value is <b>tlsv1.2</b>. If the
  installed version of openssl is too old, only <b>tlsv1</b> will be available.
  Must match the protocol version used by the broker.</div>
<div class="Pp"></div>
<b>-u</b>, <b>--username</b>
<div style="margin-left: 4.00ex;">Provide a username to be used for
  authenticating with the broker. This requires a broker that supports MQTT
  v3.1. See also the <b>--pw</b> argument.</div>
<div class="Pp"></div>
<b>-V</b>, <b>--protocol-version</b>
<div style="margin-left: 4.00ex;">Specify which version of the MQTT protocol
  should be used when connecting to the rmeote broker. Can be <b>mqttv31</b> or
  <b>mqttv311</b>. Defaults to <b>mqttv31</b>.</div>
<div class="Pp"></div>
<b>--will-payload</b>
<div style="margin-left: 4.00ex;">Specify a message that will be stored by the
  broker and sent out if this client disconnects unexpectedly. This must be used
  in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-qos</b>
<div style="margin-left: 4.00ex;">The QoS to use for the Will. Defaults to 0.
  This must be used in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-retain</b>
<div style="margin-left: 4.00ex;">If given, if the client disconnects
  unexpectedly the message sent out will be treated as a retained message. This
  must be used in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-topic</b>
<div style="margin-left: 4.00ex;">The topic on which to send a Will, in the
  event that the client disconnects unexpectedly.</div>
<h1 class="Sh" title="Sh" id="WILLS"><a class="selflink" href="#WILLS">WILLS</a></h1>
mosquitto_sub can register a message with the broker that will be sent out if it
  disconnects unexpectedly. See <b>mqtt</b>(7) for more information.
<div class="Pp"></div>
The minimum requirement for this is to use <b>--will-topic</b> to specify which
  topic the will should be sent out on. This will result in a non-retained, zero
  length message with QoS 0.
<div class="Pp"></div>
Use the <b>--will-retain</b>, <b>--will-payload</b> and <b>--will-qos</b>
  arguments to modify the other will parameters.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Publish temperature information to localhost with QoS 1:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_pub -t sensors/temperature
  -m 32 -q 1</div>
<div class="Pp"></div>
Publish timestamp and temperature information to a remote host on a non-standard
  port and QoS 0:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_pub -h 192.168.1.1 -p 1885
  -t sensors/temperature -m &quot;1266193804 32&quot;</div>
<div class="Pp"></div>
Publish light switch status. Message is set to retained because there may be a
  long period of time between light switch events:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_pub -r -t
  switches/kitchen_lights/status -m &quot;on&quot;</div>
<div class="Pp"></div>
Send the contents of a file in two ways:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_pub -t my/topic -f
  ./data</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_pub -t my/topic -s &lt;
  ./data</div>
<div class="Pp"></div>
Send parsed electricity usage data from a Current Cost meter, reading from stdin
  with one line/reading as one message:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;read_cc128.pl | mosquitto_pub -t
  sensors/cc128 -l</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
$XDG_CONFIG_HOME/mosquitto_pub, $HOME/.config/mosquitto_pub
<div style="margin-left: 4.00ex;">Configuration file for default options.</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<b>mosquitto</b> bug information can be found at
  <b>https://github.com/eclipse/mosquitto/issues</b>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>mqtt</b>(7), <b>mosquitto_sub</b>(1), <b>mosquitto</b>(8),
  <b>libmosquitto</b>(3), <b>mosquitto-tls</b>(7)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Roger Light &lt;roger@atchoo.org&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">07/10/2017</td>
    <td class="foot-os">Mosquitto Project</td>
  </tr>
</table>
</body>
</html>
