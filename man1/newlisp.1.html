<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>newlisp(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">newlisp(1)</td>
    <td class="head-vol">Commandline Parameters</td>
    <td class="head-rtitle">newlisp(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
newlisp - lisp like programming language
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>newlisp</b> [-n] [-x source target] [-h | -v] [-c | -C | -http] [-t
  microseconds] [-s stack] [-m max-mem-megabyte] [[-l path-file | -L path-file]
  [-p port-number | -d port-number]] [-w directory] [lisp-files ...] [-e
  programtext]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Invokes newLISP which first loads init.lsp if present. Then one or more options
  and one or more newLISP source files can be specified. The options and source
  files are executed in the sequence they appear. For some options is makes
  sense to have source files loaded first like for the -p and -d options. For
  other options like -s and -m it is logical to specify these before the source
  files to be loaded. If a -e switch is used the programtext is evaluated and
  then newlisp exits otherwise evaluation continues interactively (unless an
  exit occurs during lisp-file interpretation).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-n</dt>
  <dd class="It-tag">Suppress loading of any init.lsp or .init.lsp
      initialization file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-x source target</dt>
  <dd class="It-tag">Link the newLISP executable with a source file to built a
      new target executable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h</dt>
  <dd class="It-tag">Display a short help text.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-v</dt>
  <dd class="It-tag">Display a version string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-c</dt>
  <dd class="It-tag">Suppress the commandline prompt.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-C</dt>
  <dd class="It-tag">Force prompt when running newLISP in pipe I/O mode for
      Emacs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-http</dt>
  <dd class="It-tag">only accept HTTP commands</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s stacksize</dt>
  <dd class="It-tag">Stack size to use when starting newLISP. When no stack size
      is specified the stack defaults to 1024.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-m max-mem-megabyte</dt>
  <dd class="It-tag">Limits memory to max-cell-mem-megabyte megabytes for Lisp
      cell memory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">lisp-files</dt>
  <dd class="It-tag">Load and evaluate the specified lisp source files in
      sequence. Source files can be specified using URLs. If an (exit) is
      executed by one of the source files then newlisp exits and all processing
      ceases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e programtext</dt>
  <dd class="It-tag">Programtext is an expression enclosed in quotation marks
      which is evaluated and the result printed to standard out device (STDOUT).
      In most UNIX system shells apostrophes can also be used to delimit the
      expression. newLISP exits after evaluation of programtext is
    complete.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-w directory</dt>
  <dd class="It-tag">Directory is the start up directory for newLISP. Any file
      reference in a program will refer to this directory by default as the
      current directory. This can be used to define a web root directory when in
      server mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-l -L path-file</dt>
  <dd class="It-tag">Log network connections and newLISP I/O to the file in
      path-file. -l will only log network connections or commandline input or
      net-eval requests. -L will additionally log HTTP requests and newLISP
      output from commandline and net-eval input.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p port-number</dt>
  <dd class="It-tag">Listen for commands on a TCP/IP socket connection. In this
      case standard I/O is redirected to the port specified in the -p option.
      Any specified lisp-files will be loaded the first time a connection is
      made, that is, before text is accepted from the port connection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d port-number</dt>
  <dd class="It-tag">Run in demon mode. As for the -p option, but newLISP does
      not exit after a closed connection and stays in memory listening for a new
      connection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-t microseconds-connection-timeout</dt>
  <dd class="It-tag">Specifies a connection timeout when running in -p or -d
      demon mode. Server will disconnect when no further input is read after
      accepting a client connection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-6</dt>
  <dd class="It-tag">Starts newLISP in IPv6 'Internet Protocol version 6' mode.
      Without this switch newLISP willl start in IPv4 mode. The protocol mode
      can also be switched with the built-in 'net-ipv' function during
    runtime.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Start interactive session</dt>
  <dd class="It-tag"><b>newlisp</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Excute a program</dt>
  <dd class="It-tag"><b>newlisp myprog.lsp</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Excute a remote program</dt>
  <dd class="It-tag"><b>newlisp http://newlisp.org/example.lsp</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Add 3 and 4, 7 prints on standard output</dt>
  <dd class="It-tag"><b>newlisp</b> -e &quot;(+ 3 4)&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">newLISP is started as a server (the &amp; indicates to
    LINUX to run the process in the background) and can be connected to with
    telnet by issuing telnet localhost 1234</dt>
  <dd class="It-tag"><b>newlisp</b> -p 1234 &amp;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">newLISP is started as a server for another newlisp process
    connecting with the net-eval function or HTTP requests. Connection timeout
    is 3 seconds.</dt>
  <dd class="It-tag"><b>newlisp</b> -c -t 3000000 -d 4711 &amp;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">newLISP is started as a server handling HTTP requests only.
    Connections are logged to the file /usr/home/www/log.txt</dt>
  <dd class="It-tag"><b>newlisp</b> -l /usr/home/www/log.txt -http -d 8080
    &amp;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">newLISP is started as a server handling HTTP requests and
    defining the startup/web root directory</dt>
  <dd class="It-tag"><b>newlisp</b> -http -d 8080 -w /usr/home/www/httpdocs
      &amp;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">When accepting HTTP commands a file httpd.conf can be
    loaded, which will preprocess the path-name in the HTTP request</dt>
  <dd class="It-tag"><b>newlisp</b> httpd.conf -http -d 8080 -w
      /usr/home/www/httpdocs &amp;</dd>
</dl>
<div class="Pp"></div>
If the file httpd.conf contains:
<div style="height: 1.00em;">&#x00A0;</div>
(command-event (fn (s)
<br/>
 (local (request)
<br/>
 (if (find &quot;?&quot; s) ; is this a query
<br/>
 (begin
<br/>
 (set 'request (first (parse s &quot;?&quot;)))
<br/>
 ; discover illegal extension in queries
<br/>
 (if (ends-with request &quot;.exe&quot;)
<br/>
 (set 'request &quot;GET /errorpage.html&quot;)
<br/>
 (set 'request s)))
<br/>
 (set 'request s))
<br/>
 request) ))
<div style="height: 1.00em;">&#x00A0;</div>
then all files ending in .exe will translate the request in to a request for an
  error page, else the original request string is returned.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
newLISP returns a zero exit status for normal termination unless an exit command
  specifies a code to be returned. Non zero is returned in case of abnormal
  exit.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Lutz Mueller &lt;lutz@nuevatec.com&gt;
<div style="height: 1.00em;">&#x00A0;</div>
http://www.newlisp.org/ - the newLISP home page</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 2014</td>
    <td class="foot-os">version 10.6.0</td>
  </tr>
</table>
</body>
</html>
