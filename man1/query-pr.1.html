<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:34:48 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>query-pr(1) GNATS User Utilities query-pr(1)</p>

<p style="margin-top: 1em">NAME <br>
query-pr - query problem reports in the GNATS database</p>

<p style="margin-top: 1em">SYNOPSIS <br>
query-pr <br>
[--output file | -o file] <br>
[--list-databases] [--list-fields] [--list-input-fields]
<br>
[--responsible-address address] <br>
[--field-type type] <br>
[--field-description description] <br>
[--valid-values values] <br>
[--format format | -f format] <br>
[--full | -F] [--summary | -q] <br>
[--database database | -d database] <br>
[--and | -&amp;] [--or | -|] <br>
[--expr expr] <br>
[--debug | -D] <br>
[--help | -h] [--version | -V] <br>
[PR ...]</p>

<p style="margin-top: 1em">Non-network-mode options: <br>
[--print-sh-vars] [--print-directory-for-database]</p>

<p style="margin-top: 1em">Network-mode-only options: <br>
[--host host | -H host] [--port port] [--user user | -v
user] [--passwd passwd | -w passwd]</p>

<p style="margin-top: 1em">Deprecated Options <br>
[--list-categories | -j] [--list-classes | -J]
[--list-responsible | -k] [--list-submitters | -l]
[--list-states | -T] [--category category | -c category]
<br>
[--synopsis synopsis | -y synopsis] [--confidential
confidential | -C confidential] [--multitext multitext | -m
multitext] [--originator originator | -O originator] <br>
[--release release | -A release] [--class class | -L class]
[--cases cases | -E cases] [--quarter quarter | -Q quarter]
[--keywords keywords | -K keywords] <br>
[--priority priority | -p priority] [--responsible
responsible | -r responsible] [--restricted | -R]
[--severity severity | -e severity] [--skip-closed | -x]
[--sql | -i] <br>
[--sql2 | -I] [--state state | -s state] [--submitter
submitter | -S submitter] [--text text | -t text]
[--required-before date | -u date] <br>
[--required-after date | -U date] [--arrived-before date |
-b date] [--arrived-after date | -a date] [--modified-before
date | -B date] [--modified-after date | -M date] <br>
[--closed-before date | -z date] [--closed-after date | -Z
date]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Queries the GNATS database according to options and returns
either selected Problem Reports (PRs) or other requested
information. query-pr can query PRs located in either a
lo&acirc; <br>
cal database or via gnatsd.</p>

<p style="margin-top: 1em">PRs may be selected via the use
of the --expr option, directly by number, or by the use of
the (now deprecated) field-specific query operators.</p>

<p style="margin-top: 1em">By default, query options are
connected with a logical AND. For example, <br>
query-pr --category=foo --responsible=bar <br>
only prints PRs which have a Category field of foo and a
Responsible field of bar.</p>

<p style="margin-top: 1em">The --or option may be used to
connect query options with a logical OR. For example, <br>
query-pr --category=baz --or --responsible=blee <br>
prints PRs which have either a Category field of baz or a
Responsible field of blee.</p>

<p style="margin-top: 1em">The use of these options is
strongly discouraged, as they will be deleted in the next
release. The expressions specified by the --expr option are
much more flexible.</p>

<p style="margin-top: 1em">OPTIONS <br>
--help, -h <br>
Prints a (rather longish) help message.</p>

<p style="margin-top: 1em">--version, -V <br>
Displays the program version to stdout.</p>

<p style="margin-top: 1em">--output file, -o file <br>
The results of the query will be placed in this file.</p>

<p style="margin-top: 1em">--database database, -d database
<br>
Specifies the database to be used for the query. If no
database is specified, the database named default is
assumed. (This option overrides the database specified in
the <br>
GNATSDB environment variable; see the ENVIRONMENT VARIABLES
section for more information.)</p>

<p style="margin-top: 1em">--list-categories, -j <br>
Lists the available PR categories for the selected
database.</p>

<p style="margin-top: 1em">--list-classes, -J <br>
Lists the available PR classes for the selected
database.</p>

<p style="margin-top: 1em">--list-responsible, -k <br>
Lists the users that appear in the database&rsquo;s
responsible list.</p>

<p style="margin-top: 1em">--list-submitters, -l <br>
Lists the valid submitters for this database.</p>

<p style="margin-top: 1em">--list-states, -T <br>
Lists the valid PR states for PRs in this database.</p>

<p style="margin-top: 1em">The previous --list-* options
are deprecated and will be removed in the next release;
their functionality can be replaced with</p>

<p style="margin-top: 1em">query-pr --valid-values
field</p>

<p style="margin-top: 1em">where field is one of Category,
Class, Responsible, Submitter-Id, or State.</p>

<p style="margin-top: 1em">--list-databases <br>
Lists the known databases.</p>

<p style="margin-top: 1em">--list-fields <br>
Lists the entire set of field names for PRs in the selected
database.</p>

<p style="margin-top: 1em">--list-input-fields <br>
Lists the fields that should be provided when creating a new
PR for the currently-specified database. The fields are
listed in an order that would make sense when used in <br>
a template or form.</p>

<p style="margin-top: 1em">--field-type field <br>
Returns the data type contained in PR field field. The
current set of data types includes text, multitext, enum,
multienum, integer, date, and text-with-regex-qualifier.</p>

<p style="margin-top: 1em">--field-description field <br>
Returns a human-readable description of the intended purpose
of field.</p>

<p style="margin-top: 1em">--valid-values field <br>
For fields of type enum, a list of valid values (one per
line) is returned. Otherwise, a regular expression is
returned that describes the legal values in field.</p>

<p style="margin-top: 1em">--responsible-address name <br>
The mail address of name is returned; name is assumed to be
a name either appearing in the database&rsquo;s responsible
list, or is otherwise a user on the system.</p>

<p style="margin-top: 1em">--print-sh-vars <br>
A set of /bin/sh variables is returned that describe the
selected database. They include:</p>

<p style="margin-top: 1em">GNATSDB <br>
The name of the currently-selected database.</p>

<p style="margin-top: 1em">GNATSDB_VALID <br>
Set to 1 if the selected database is valid.</p>

<p style="margin-top: 1em">GNATSDBDIR <br>
The directory where the database contents are stored.</p>

<p style="margin-top: 1em">DEBUG_MODE <br>
Set to 1 if debug mode has been enabled for the
database.</p>

<p style="margin-top: 1em">DEFAULTCATEGORY <br>
The default category for PRs in the database.</p>

<p style="margin-top: 1em">DEFAULTSTATE <br>
The default state for PRs in the database.</p>

<p style="margin-top: 1em">--print-directory-for-database
<br>
Returns the directory where the selected database is
located.</p>

<p style="margin-top: 1em">--format format, -f format <br>
Used to specify the format of the output PRs, See FORMATS
below for a complete description.</p>

<p style="margin-top: 1em">--full, -F <br>
When printing PRs, the entre PR is displayed. This is
exactly equivalent to</p>

<p style="margin-top: 1em">query-pr --format full</p>

<p style="margin-top: 1em">--summary, -q <br>
When printing PRs, a summary format is used. This is exactly
equivalent to</p>

<p style="margin-top: 1em">query-pr --format summary</p>

<p style="margin-top: 1em">--debug, -D <br>
Enables debugging output for network queries.</p>

<p style="margin-top: 1em">--host host, -H host <br>
Specifies the hostname of the gnatsd server to communicate
with. This overrides the value in the GNATSDB environment
variable.</p>

<p style="margin-top: 1em">--port port <br>
Specifies the port number of the gnatsd server to
communicate with. This overrides the value in the GNATSDB
environment variable.</p>

<p style="margin-top: 1em">--user user, -v user <br>
Specifies the username to login with when connecting to the
gnatsd server. This overrides the value in the GNATSDB
environment variable.</p>

<p style="margin-top: 1em">--passwd passwd, -w passwd <br>
Specifies the password to login with when connecting to the
gnatsd server. This overrides the value in the GNATSDB
environment variable.</p>

<p style="margin-top: 1em">--and, -&amp;, --or, -|, <br>
These options are used when connecting multiple query
operators together. They specify whether the previous and
subsequent options are to be logically ANDed or logically
<br>
ORed.</p>

<p style="margin-top: 1em">--expr expr <br>
Specifies a query expression to use when searching for PRs.
See the QUERY EXPRESSIONS section.</p>

<p style="margin-top: 1em">The remaining deprecated options
are not described here, since their use is fairly obvious
and their functionality is completely replaced by the use of
the --expr option. (Some <br>
sort of shorthand option for querying fields may appear in
the next release.)</p>

<p style="margin-top: 1em">FORMATS <br>
Printing formats for PRs are in one of three forms:</p>

<p style="margin-top: 1em">formatname <br>
This is a named format which is described by the database
(specifically, these formats are described in the dbconfig
file associated with the database). The default con&acirc;
<br>
figuration contains five such formats: standard, full,
summary, sql, and sql2.</p>

<p style="margin-top: 1em">The first three are the ones
most commonly used when performing queries. standard is the
format used by default if no other format is specified.</p>

<p style="margin-top: 1em">Use of the latter two are
discouraged; they are merely kept for historical
purposes.</p>

<p style="margin-top: 1em">Other named formats may have
been added by the database administrator.</p>

<p style="margin-top: 1em">fieldname <br>
A single field name may appear here. Only the contents of
this field will be displayed.</p>

<p style="margin-top: 1em">&Acirc;&acute;&quot;printf
string&quot; fieldname fieldname . . .&Acirc;&acute;</p>

<p style="margin-top: 1em">This provides a rather flexible
mechanism for formatting PR output. (The formatting is
identical to that provided by the named formats described by
the database configu&acirc; <br>
ration.) The printf string can contain the following %
sequences:</p>

<p style="margin-top: 1em">%[positionalspecifiers]s: Prints
the field as a string. The positional specifiers are similar
to those of printf, as +, - and digit qualifiers can be used
to force a <br>
particular alignment of the field contents.</p>

<p style="margin-top: 1em">%[positionalspecifiers]S:
Similar to %s, except that the field contents are terminated
at the first space character.</p>

<p style="margin-top: 1em">%[positionalspecifiers]d:
Similar to %s, except that the field contents are written as
a numeric value. For integer fields, the value is written as
a number. For enumer&acirc; <br>
ated fields, the field is converted into a numeric
equivalent (i.e. if the field can have two possible values,
the result will be either 1 or 2). For date fields, the <br>
value is written as seconds since Jan 1, 1970.</p>

<p style="margin-top: 1em">%F: The field is written as it
would appear within a PR, complete with field header.</p>

<p style="margin-top: 1em">%D: For date fields, the date is
written in a standard GNATS format.</p>

<p style="margin-top: 1em">%Q: For date fields, the date is
written in an arbitrary &quot;SQL&quot; format.</p>

<p style="margin-top: 1em">An example printf formatted
query (note the quoting of the whole format
specification):</p>

<p style="margin-top: 1em">query-pr --format
&rsquo;&quot;%s, %s&quot; Synopsis State&rsquo;</p>

<p style="margin-top: 1em">QUERY EXPRESSIONS <br>
Query expressions are used to select specific PRs based on
their field contents. The general form is</p>

<p style="margin-top: 1em">fieldname|&quot;value&quot;
operator fieldname|&quot;value&quot; [booleanop ...]</p>

<p style="margin-top: 1em">value is a literal string or
regular expression; it must be surrounded by double quotes,
otherwise it is interpreted as a fieldname.</p>

<p style="margin-top: 1em">fieldname is the name of a field
in the PR.</p>

<p style="margin-top: 1em">operator is one of:</p>

<p style="margin-top: 1em">= The value of the left-hand
side of the expression must exactly match the regular
expression on the right-hand side of the expression.</p>

<p style="margin-top: 1em">~ Some portion of the left-hand
side of the expression must match the regular expression on
the right-hand side.</p>

<p style="margin-top: 1em">== The value of the left-hand
side must be equal to the value on the right-hand side of
the expression.</p>

<p style="margin-top: 1em">The equality of two values
depends on what type of data is stored in the field(s) being
queried. For example, when querying a field containing
integer values, literal <br>
strings are interpreted as integers. The query
expression</p>

<p style="margin-top: 1em">Number == &quot;0123&quot;</p>

<p style="margin-top: 1em">is identical to</p>

<p style="margin-top: 1em">Number == &quot;123&quot;</p>

<p style="margin-top: 1em">as the leading zero is ignored.
If the values were treated as strings instead of integers,
then the two comparisons would return different results.</p>

<p style="margin-top: 1em">!= The not-equal operator.
Produces the opposite result of the == operator.</p>

<p style="margin-top: 1em">&lt;,&gt; The left-hand side
must have a value less than or greater than the right-hand
side. Comparisons are done depending on the type of data
being queried; in particular, inte&acirc; <br>
ger fields and dates use a numeric comparison, and
enumerated fields are ordered depending on the numeric
equivalent of their enumerated values.</p>

<p style="margin-top: 1em">booleanop is either | [or], or
&amp; [and]. The query expression <br>
Category=&quot;baz&quot; | Responsible=&quot;blee&quot; <br>
is identical to the second query example with --or given
earlier; it selects all PRs with a Category field of baz or
a Responsible field of blee.</p>

<p style="margin-top: 1em">The not operator ! may be used
to negate a test: <br>
! Category=&quot;foo&quot; <br>
searches for PRs where the category is not equal to the
regular expression foo.</p>

<p style="margin-top: 1em">Parenthesis may be used to force
a particular interpretation of the expression: <br>
!(Category=&quot;foo&quot; &amp;
Submitter-Id=&quot;blaz&quot;) <br>
skips PRs where the Category field is equal to foo and the
Submitter-Id field is equal to blaz. Parenthesis may be
nested to any arbitrary depth.</p>

<p style="margin-top: 1em">Fieldnames can be specified in
several ways. The simplest and most obvious is just a name:
<br>
Category=&quot;foo&quot; <br>
checks the value of the category field for the value
&quot;foo&quot;.</p>

<p style="margin-top: 1em">A fieldname qualifier may be
prepended to the name of the field; a colon is used to
separate the qualifier from the name. To refer directly to a
builtin field name:</p>


<p style="margin-top: 1em">builtin:Number=&quot;123&quot;</p>

<p style="margin-top: 1em">In this case, Number is
interpreted as the builtin name of the field to check. (This
is useful if the fields have been renamed. For more
discussion of builtin field names, see <br>
dbconfig(5).)</p>

<p style="margin-top: 1em">To scan all fields of a
particular type, the fieldtype qualifier may be used:</p>


<p style="margin-top: 1em">fieldtype:Text=&quot;bar&quot;</p>

<p style="margin-top: 1em">searches all text fields for the
regular expression bar.</p>

<p style="margin-top: 1em">Note that it is not necessary
that the right-hand side of the expression be a literal
string. To query all PRs where the PR has been modified
since it was closed, the expression</p>

<p style="margin-top: 1em">Last-Modified != Closed-Date</p>

<p style="margin-top: 1em">will work; for each PR, it
compares the value of its Last-Modified field against its
Closed-Date field, and returns those PRs where the values
differ. However, this query will <br>
also return all PRs with empty Last-Modified or Closed-Date
fields. To further narrow the search:</p>

<p style="margin-top: 1em">Last-Modified != Closed-Date
&amp; Last-Modified != &quot;&quot; &amp; Closed-Date !=
&quot;&quot;</p>

<p style="margin-top: 1em">In general, comparing fields of
two different types (an integer field against a date field,
for example) will probably not do what you want.</p>

<p style="margin-top: 1em">Also, a field specifier may be
followed by the name of a subfield in braces:</p>

<p style="margin-top: 1em">State[type] !=
&quot;closed&quot;</p>

<p style="margin-top: 1em">or even</p>

<p style="margin-top: 1em">builtin:State[type] !=
&quot;closed&quot;</p>

<p style="margin-top: 1em">Subfields are further discussed
in dbconfig(5).</p>

<p style="margin-top: 1em">QUERY BY MAIL <br>
query-pr can also be accessed by electronic mail, if your
version of GNATS is configured for this. To use this
feature, simply send mail to the address query-pr@your-site
with <br>
command line arguments or options in the Subject: line of
the mail header. GNATS replies to your mail with the results
of your query. The default settings for the query-pr mail
<br>
server are shown below; to override the --state parameter,
specify --state=state in the Subject: line of the mail
header. You can not query on confidential Problem Reports by
<br>
mail.</p>

<p style="margin-top: 1em">--restricted
--state=&quot;open|analyzed|feedback|suspended&quot;</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
The GNATSDB environment variable is used to determine which
database to use. For a local database, it contains the name
of the database to access.</p>

<p style="margin-top: 1em">For network access via gnatsd,
it contains a colon-separated list of strings that describe
the remote database in the form</p>


<p style="margin-top: 1em">server:port:databasename:username:password</p>

<p style="margin-top: 1em">Any of the fields may be omitted
except for server, but at least one colon must appear;
otherwise, the value is assumed to be the name of a local
database.</p>

<p style="margin-top: 1em">If GNATSDB is not set, it is
assumed that the database is local and that its name is
default.</p>

<p style="margin-top: 1em">SEE ALSO <br>
Keeping Track: Managing Messages With GNATS (also installed
as the GNU Info file gnats.info)</p>

<p style="margin-top: 1em">databases(5), dbconfig(5),
delete-pr(8), edit-pr(1) file-pr(8), gen-index(8), gnats(7),
gnatsd(8), mkcat(8), mkdb(8), pr-edit(8), query-pr(1),
queue-pr(8), send-pr(1).</p>

<p style="margin-top: 1em">COPYING <br>
Copyright (c) 1993, 94, 95, 96, 1997, 1999, 2003, Free
Software Foundation, Inc.</p>

<p style="margin-top: 1em">Permission is granted to make
and distribute verbatim copies of this manual provided the
copyright notice and this permission notice are preserved on
all copies.</p>

<p style="margin-top: 1em">Permission is granted to copy
and distribute modified versions of this manual under the
conditions for verbatim copying, provided that the entire
resulting derived work is dis&acirc; <br>
tributed under the terms of a permission notice identical to
this one.</p>

<p style="margin-top: 1em">Permission is granted to copy
and distribute translations of this manual into another
language, under the above conditions for modified versions,
except that this permission no&acirc; <br>
tice may be included in translations approved by the Free
Software Foundation instead of in the original English.</p>

<p style="margin-top: 1em">GNATS August 2003
query-pr(1)</p>
<hr>
</body>
</html>
