<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:14:56 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GPGSM(1) GNU Privacy Guard GPGSM(1)</p>

<p style="margin-top: 1em">NAME <br>
gpgsm - CMS encryption and signing tool</p>

<p style="margin-top: 1em">SYNOPSIS <br>
gpgsm [--homedir dir] [--options file] [options] command
[args]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
gpgsm is a tool similar to gpg to provide digital encryption
and signing services on X.509 certificates and the CMS
protocol. It is mainly used as a backend for S/MIME mail
pro&acirc; <br>
cessing. gpgsm includes a full featured certificate
management and complies with all rules defined for the
German Sphinx project.</p>

<p style="margin-top: 1em">COMMANDS <br>
Commands are not distinguished from options except for the
fact that only one command is allowed.</p>

<p style="margin-top: 1em">Commands not specific to the
function</p>

<p style="margin-top: 1em">--version <br>
Print the program version and licensing information. Note
that you cannot abbreviate this command.</p>

<p style="margin-top: 1em">--help, -h <br>
Print a usage message summarizing the most useful
command-line options. Note that you cannot abbreviate this
command.</p>

<p style="margin-top: 1em">--warranty <br>
Print warranty information. Note that you cannot abbreviate
this command.</p>

<p style="margin-top: 1em">--dump-options <br>
Print a list of all available options and commands. Note
that you cannot abbreviate this command.</p>

<p style="margin-top: 1em">Commands to select the type of
operation</p>

<p style="margin-top: 1em">--encrypt <br>
Perform an encryption. The keys the data is encrypted too
must be set using the option --recipient.</p>

<p style="margin-top: 1em">--decrypt <br>
Perform a decryption; the type of input is automatically
determined. It may either be in binary form or PEM encoded;
automatic determination of base-64 encoding is not <br>
done.</p>

<p style="margin-top: 1em">--sign Create a digital
signature. The key used is either the fist one found in the
keybox or those set with the --local-user option.</p>

<p style="margin-top: 1em">--verify <br>
Check a signature file for validity. Depending on the
arguments a detached signature may also be checked.</p>

<p style="margin-top: 1em">--server <br>
Run in server mode and wait for commands on the stdin.</p>

<p style="margin-top: 1em">--call-dirmngr command [args]
<br>
Behave as a Dirmngr client issuing the request command with
the optional list of args. The output of the Dirmngr is
printed stdout. Please note that file names given as <br>
arguments should have an absolute file name (i.e. commencing
with / because they are passed verbatim to the Dirmngr and
the working directory of the Dirmngr might not be <br>
the same as the one of this client. Currently it is not
possible to pass data via stdin to the Dirmngr. command
should not contain spaces.</p>

<p style="margin-top: 1em">This is command is required for
certain maintaining tasks of the dirmngr where a dirmngr
must be able to call back to gpgsm. See the Dirmngr manual
for details.</p>

<p style="margin-top: 1em">--call-protect-tool arguments
<br>
Certain maintenance operations are done by an external
program call gpg-protect-tool; this is usually not installed
in a directory listed in the PATH variable. This com&acirc;
<br>
mand provides a simple wrapper to access this tool.
arguments are passed verbatim to this command; use
&rsquo;--help&rsquo; to get a list of supported
operations.</p>

<p style="margin-top: 1em">How to manage the certificates
and keys</p>

<p style="margin-top: 1em">--gen-key <br>
-This command allows the creation of a certificate signing
request. It -is commonly used along with the --output option
to save the -created CSR into a file. If used <br>
with the --batch a parameter -file is used to create the
CSR. This command allows the creation of a certificate
signing request or a self-signed certificate. It is
com&acirc; <br>
monly used along with the --output option to save the
created CSR or certificate into a file. If used with the
--batch a parameter file is used to create the CSR or
cer&acirc; <br>
tificate and it is further possible to create
non-self-signed certificates.</p>

<p style="margin-top: 1em">--list-keys</p>

<p style="margin-top: 1em">-k List all available
certificates stored in the local key database. Note that the
displayed data might be reformatted for better human
readability and illegal characters <br>
are replaced by safe substitutes.</p>

<p style="margin-top: 1em">--list-secret-keys</p>

<p style="margin-top: 1em">-K List all available
certificates for which a corresponding a secret key is
available.</p>

<p style="margin-top: 1em">--list-external-keys pattern
<br>
List certificates matching pattern using an external server.
This utilizes the dirmngr service.</p>

<p style="margin-top: 1em">--list-chain <br>
Same as --list-keys but also prints all keys making up the
chain.</p>

<p style="margin-top: 1em">--dump-cert</p>

<p style="margin-top: 1em">--dump-keys <br>
List all available certificates stored in the local key
database using a format useful mainly for debugging.</p>

<p style="margin-top: 1em">--dump-chain <br>
Same as --dump-keys but also prints all keys making up the
chain.</p>

<p style="margin-top: 1em">--dump-secret-keys <br>
List all available certificates for which a corresponding a
secret key is available using a format useful mainly for
debugging.</p>

<p style="margin-top: 1em">--dump-external-keys pattern
<br>
List certificates matching pattern using an external server.
This utilizes the dirmngr service. It uses a format useful
mainly for debugging.</p>

<p style="margin-top: 1em">--keydb-clear-some-cert-flags
<br>
This is a debugging aid to reset certain flags in the key
database which are used to cache certain certificate stati.
It is especially useful if a bad CRL or a weird run&acirc;
<br>
ning OCSP responder did accidentally revoke certificate.
There is no security issue with this command because gpgsm
always make sure that the validity of a certificate is <br>
checked right before it is used.</p>

<p style="margin-top: 1em">--delete-keys pattern <br>
Delete the keys matching pattern. Note that there is no
command to delete the secret part of the key directly. In
case you need to do this, you should run the command <br>
gpgsm --dump-secret-keys KEYID before you delete the key,
copy the string of hex-digits in the
&lsquo;&lsquo;keygrip&rsquo;&rsquo; line and delete the file
consisting of these hex-digits and the <br>
suffix .key from the &acirc;private-keys-v1.d&acirc;
directory below our GnuPG home directory (usually
&acirc;~/.gnupg&acirc;).</p>

<p style="margin-top: 1em">--export [pattern] <br>
Export all certificates stored in the Keybox or those
specified by the optional pattern. Those pattern consist of
a list of user ids (see: [how-to-specify-a-user-id]). <br>
When used along with the --armor option a few informational
lines are prepended before each block. There is one
limitation: As there is no commonly agreed upon way to <br>
pack more than one certificate into an ASN.1 structure, the
binary export (i.e. without using armor) works only for the
export of one certificate. Thus it is required to <br>
specify a pattern which yields exactly one certificate.
Ephemeral certificate are only exported if all pattern are
given as fingerprints or keygrips.</p>

<p style="margin-top: 1em">--export-secret-key-p12 key-id
<br>
Export the private key and the certificate identified by
key-id in a PKCS#12 format. When using along with the
--armor option a few informational lines are prepended to
<br>
the output. Note, that the PKCS#12 format is not very secure
and this command is only provided if there is no other way
to exchange the private key. (see: [option <br>
--p12-charset])</p>

<p style="margin-top: 1em">--import [files] <br>
Import the certificates from the PEM or binary encoded files
as well as from signed-only messages. This command may also
be used to import a secret key from a PKCS#12 <br>
file.</p>

<p style="margin-top: 1em">--learn-card <br>
Read information about the private keys from the smartcard
and import the certificates from there. This command
utilizes the gpg-agent and in turn the scdaemon.</p>

<p style="margin-top: 1em">--passwd user_id <br>
Change the passphrase of the private key belonging to the
certificate specified as user_id. Note, that changing the
passphrase/PIN of a smartcard is not yet supported.</p>

<p style="margin-top: 1em">OPTIONS <br>
GPGSM features a bunch of options to control the exact
behaviour and to change the default configuration.</p>

<p style="margin-top: 1em">How to change the
configuration</p>

<p style="margin-top: 1em">These options are used to change
the configuration and are usually found in the option
file.</p>

<p style="margin-top: 1em">--options file <br>
Reads configuration from file instead of from the default
per-user configuration file. The default configuration file
is named &acirc;gpgsm.conf&acirc; and expected in the
&acirc;.gnupg&acirc; <br>
directory directly below the home directory of the user.</p>

<p style="margin-top: 1em">--homedir dir <br>
Set the name of the home directory to dir. If this option is
not used, the home directory defaults to
&acirc;~/.gnupg&acirc;. It is only recognized when given on
the command line. <br>
It also overrides any home directory stated through the
environment variable &acirc;GNUPGHOME&acirc; or (on W32
systems) by means of the Registry entry
HKCUtwareGNUGnuPG:Home&acirc; <br>
Dir.</p>

<p style="margin-top: 1em">-v</p>

<p style="margin-top: 1em">--verbose <br>
Outputs additional information while running. You can
increase the verbosity by giving several verbose commands to
gpgsm, such as &rsquo;-vv&rsquo;.</p>

<p style="margin-top: 1em">--policy-file filename <br>
Change the default name of the policy file to filename.</p>

<p style="margin-top: 1em">--agent-program file <br>
Specify an agent program to be used for secret key
operations. The default value is the
&acirc;/usr/local/bin/gpg-agent&acirc;. This is only used as
a fallback when the environment <br>
variable GPG_AGENT_INFO is not set or a running agent cannot
be connected.</p>

<p style="margin-top: 1em">--dirmngr-program file <br>
Specify a dirmngr program to be used for CRL checks. The
default value is &acirc;/usr/sbin/dirmngr&acirc;. This is
only used as a fallback when the environment variable
DIRMNGR_INFO <br>
is not set or a running dirmngr cannot be connected.</p>

<p style="margin-top: 1em">--prefer-system-dirmngr <br>
If a system wide dirmngr is running in daemon mode, first
try to connect to this one. Fallback to a pipe based server
if this does not work. Under Windows this option is <br>
ignored because the system dirmngr is always used.</p>

<p style="margin-top: 1em">--disable-dirmngr <br>
Entirely disable the use of the Dirmngr.</p>

<p style="margin-top: 1em">--no-secmem-warning <br>
Do not print a warning when the so called &quot;secure
memory&quot; cannot be used.</p>

<p style="margin-top: 1em">--log-file file <br>
When running in server mode, append all logging output to
file.</p>

<p style="margin-top: 1em">Certificate related options</p>

<p style="margin-top: 1em">--enable-policy-checks</p>

<p style="margin-top: 1em">--disable-policy-checks <br>
By default policy checks are enabled. These options may be
used to change it.</p>

<p style="margin-top: 1em">--enable-crl-checks</p>

<p style="margin-top: 1em">--disable-crl-checks <br>
By default the CRL checks are enabled and the DirMngr is
used to check for revoked certificates. The disable option
is most useful with an off-line network connection to <br>
suppress this check.</p>


<p style="margin-top: 1em">--enable-trusted-cert-crl-check</p>


<p style="margin-top: 1em">--disable-trusted-cert-crl-check
<br>
By default the CRL for trusted root certificates are checked
like for any other certificates. This allows a CA to revoke
its own certificates voluntary without the need <br>
of putting all ever issued certificates into a CRL. The
disable option may be used to switch this extra check off.
Due to the caching done by the Dirmngr, there will not <br>
be any noticeable performance gain. Note, that this also
disables possible OCSP checks for trusted root certificates.
A more specific way of disabling this check is by <br>
adding the &lsquo;&lsquo;relax&rsquo;&rsquo; keyword to the
root CA line of the &acirc;trustlist.txt&acirc;</p>

<p style="margin-top: 1em">--force-crl-refresh <br>
Tell the dirmngr to reload the CRL for each request. For
better performance, the dirmngr will actually optimize this
by suppressing the loading for short time intervals <br>
(e.g. 30 minutes). This option is useful to make sure that a
fresh CRL is available for certificates hold in the keybox.
The suggested way of doing this is by using it <br>
along with the option --with-validation for a key listing
command. This option should not be used in a configuration
file.</p>

<p style="margin-top: 1em">--enable-ocsp</p>

<p style="margin-top: 1em">--disable-ocsp <br>
By default OCSP checks are disabled. The enable option may
be used to enable OCSP checks via Dirmngr. If CRL checks are
also enabled, CRLs will be used as a fallback if <br>
for some reason an OCSP request will not succeed. Note, that
you have to allow OCSP requests in Dirmngr&rsquo;s
configuration too (option --allow-ocsp) and configure
Dirmngr <br>
properly. If you do not do so you will get the error code
&rsquo;Not supported&rsquo;.</p>

<p style="margin-top: 1em">--auto-issuer-key-retrieve <br>
If a required certificate is missing while validating the
chain of certificates, try to load that certificate from an
external location. This usually means that Dirmngr <br>
is employed to search for the certificate. Note that this
option makes a &quot;web bug&quot; like behavior possible.
LDAP server operators can see which keys you request, so by
<br>
sending you a message signed by a brand new key (which you
naturally will not have on your local keybox), the operator
can tell both your IP address and the time when you <br>
verified the signature.</p>

<p style="margin-top: 1em">--validation-model name <br>
This option changes the default validation model. The only
possible values are &quot;shell&quot; (which is the
default), &quot;chain&quot; which forces the use of the
chain model and &quot;steed&quot; <br>
for a new simplified model. The chain model is also used if
an option in the &acirc;trustlist.txt&acirc; or an attribute
of the certificate requests it. However the standard model
<br>
(shell) is in that case always tried first.</p>

<p style="margin-top: 1em">--ignore-cert-extension oid <br>
Add oid to the list of ignored certificate extensions. The
oid is expected to be in dotted decimal form, like 2.5.29.3.
This option may be used more than once. Critical <br>
flagged certificate extensions matching one of the OIDs in
the list are treated as if they are actually handled and
thus the certificate will not be rejected due to an <br>
unknown critical extension. Use this option with care
because extensions are usually flagged as critical for a
reason.</p>

<p style="margin-top: 1em">Input and Output</p>

<p style="margin-top: 1em">--armor</p>

<p style="margin-top: 1em">-a Create PEM encoded output.
Default is binary output.</p>

<p style="margin-top: 1em">--base64 <br>
Create Base-64 encoded output; i.e. PEM without the header
lines.</p>

<p style="margin-top: 1em">--assume-armor <br>
Assume the input data is PEM encoded. Default is to
autodetect the encoding but this is may fail.</p>

<p style="margin-top: 1em">--assume-base64 <br>
Assume the input data is plain base-64 encoded.</p>

<p style="margin-top: 1em">--assume-binary <br>
Assume the input data is binary encoded.</p>

<p style="margin-top: 1em">--p12-charset name <br>
gpgsm uses the UTF-8 encoding when encoding passphrases for
PKCS#12 files. This option may be used to force the
passphrase to be encoded in the specified encoding name.
<br>
This is useful if the application used to import the key
uses a different encoding and thus will not be able to
import a file generated by gpgsm. Commonly used values for
<br>
name are Latin1 and CP850. Note that gpgsm itself
automagically imports any file with a passphrase encoded to
the most commonly used encodings.</p>

<p style="margin-top: 1em">--default-key user_id <br>
Use user_id as the standard key for signing. This key is
used if no other key has been defined as a signing key.
Note, that the first --local-users option also sets this
<br>
key if it has not yet been set; however --default-key always
overrides this.</p>

<p style="margin-top: 1em">--local-user user_id</p>

<p style="margin-top: 1em">-u user_id <br>
Set the user(s) to be used for signing. The default is the
first secret key found in the database.</p>

<p style="margin-top: 1em">--recipient name</p>

<p style="margin-top: 1em">-r Encrypt to the user id name.
There are several ways a user id may be given (see:
[how-to-specify-a-user-id]).</p>

<p style="margin-top: 1em">--output file</p>

<p style="margin-top: 1em">-o file <br>
Write output to file. The default is to write it to
stdout.</p>

<p style="margin-top: 1em">--with-key-data <br>
Displays extra information with the --list-keys commands.
Especially a line tagged grp is printed which tells you the
keygrip of a key. This string is for example used <br>
as the file name of the secret key.</p>

<p style="margin-top: 1em">--with-validation <br>
When doing a key listing, do a full validation check for
each key and print the result. This is usually a slow
operation because it requires a CRL lookup and other
opera&acirc; <br>
tions.</p>

<p style="margin-top: 1em">When used along with --import, a
validation of the certificate to import is done and only
imported if it succeeds the test. Note that this does not
affect an already <br>
available certificate in the DB. This option is therefore
useful to simply verify a certificate.</p>

<p style="margin-top: 1em">--with-md5-fingerprint <br>
For standard key listings, also print the MD5 fingerprint of
the certificate.</p>

<p style="margin-top: 1em">--with-keygrip <br>
Include the keygrip in standard key listings. Note that the
keygrip is always listed in --with-colons mode.</p>

<p style="margin-top: 1em">How to change how the CMS is
created.</p>

<p style="margin-top: 1em">--include-certs n <br>
Using n of -2 includes all certificate except for the root
cert, -1 includes all certs, 0 does not include any certs, 1
includes only the signers cert and all other posi&acirc;
<br>
tive values include up to n certificates starting with the
signer cert. The default is -2.</p>

<p style="margin-top: 1em">--cipher-algo oid <br>
Use the cipher algorithm with the ASN.1 object identifier
oid for encryption. For convenience the strings 3DES, AES
and AES256 may be used instead of their OIDs. The <br>
default is 3DES (1.2.840.113549.3.7).</p>

<p style="margin-top: 1em">--digest-algo name <br>
Use name as the message digest algorithm. Usually this
algorithm is deduced from the respective signing
certificate. This option forces the use of the given
algorithm <br>
and may lead to severe interoperability problems.</p>

<p style="margin-top: 1em">Doing things one usually do not
want to do.</p>

<p style="margin-top: 1em">--extra-digest-algo name <br>
Sometimes signatures are broken in that they announce a
different digest algorithm than actually used. gpgsm uses a
one-pass data processing model and thus needs to rely <br>
on the announced digest algorithms to properly hash the
data. As a workaround this option may be used to tell gpg to
also hash the data using the algorithm name; this <br>
slows processing down a little bit but allows to verify such
broken signatures. If gpgsm prints an error like
&lsquo;&lsquo;digest algo 8 has not been
enabled&rsquo;&rsquo; you may want to try <br>
this option, with &rsquo;SHA256&rsquo; for name.</p>

<p style="margin-top: 1em">--faked-system-time epoch <br>
This option is only useful for testing; it sets the system
time back or forth to epoch which is the number of seconds
elapsed since the year 1970. Alternatively epoch may <br>
be given as a full ISO time string (e.g.
&quot;20070924T154812&quot;).</p>

<p style="margin-top: 1em">--with-ephemeral-keys <br>
Include ephemeral flagged keys in the output of key
listings. Note that they are included anyway if the key
specification for a listing is given as fingerprint or
key&acirc; <br>
grip.</p>

<p style="margin-top: 1em">--debug-level level <br>
Select the debug level for investigating problems. level may
be a numeric value or by a keyword:</p>

<p style="margin-top: 1em">none No debugging at all. A
value of less than 1 may be used instead of the keyword.</p>

<p style="margin-top: 1em">basic Some basic debug messages.
A value between 1 and 2 may be used instead of the
keyword.</p>

<p style="margin-top: 1em">advanced <br>
More verbose debug messages. A value between 3 and 5 may be
used instead of the keyword.</p>

<p style="margin-top: 1em">expert Even more detailed
messages. A value between 6 and 8 may be used instead of the
keyword.</p>

<p style="margin-top: 1em">guru All of the debug messages
you can get. A value greater than 8 may be used instead of
the keyword. The creation of hash tracing files is only
enabled if the keyword <br>
is used.</p>

<p style="margin-top: 1em">How these messages are mapped to
the actual debugging flags is not specified and may change
with newer releases of this program. They are however
carefully selected to best aid <br>
in debugging.</p>

<p style="margin-top: 1em">--debug flags <br>
This option is only useful for debugging and the behaviour
may change at any time without notice; using --debug-levels
is the preferred method to select the debug ver&acirc; <br>
bosity. FLAGS are bit encoded and may be given in usual
C-Syntax. The currently defined bits are:</p>

<p style="margin-top: 1em">0 (1) X.509 or OpenPGP protocol
related data</p>

<p style="margin-top: 1em">1 (2) values of big number
integers</p>

<p style="margin-top: 1em">2 (4) low level crypto
operations</p>

<p style="margin-top: 1em">5 (32) memory allocation</p>

<p style="margin-top: 1em">6 (64) caching</p>

<p style="margin-top: 1em">7 (128) <br>
show memory statistics.</p>

<p style="margin-top: 1em">9 (512) <br>
write hashed data to files named dbgmd-000*</p>

<p style="margin-top: 1em">10 (1024) <br>
trace Assuan protocol</p>

<p style="margin-top: 1em">Note, that all flags set using
this option may get overridden by --debug-level.</p>

<p style="margin-top: 1em">--debug-all <br>
Same as --debug=0xffffffff</p>

<p style="margin-top: 1em">--debug-allow-core-dump <br>
Usually gpgsm tries to avoid dumping core by well written
code and by disabling core dumps for security reasons.
However, bugs are pretty durable beasts and to squash <br>
them it is sometimes useful to have a core dump. This option
enables core dumps unless the Bad Thing happened before the
option parsing.</p>

<p style="margin-top: 1em">--debug-no-chain-validation <br>
This is actually not a debugging option but only useful as
such. It lets gpgsm bypass all certificate chain validation
checks.</p>

<p style="margin-top: 1em">--debug-ignore-expiration <br>
This is actually not a debugging option but only useful as
such. It lets gpgsm ignore all notAfter dates, this is used
by the regression tests.</p>

<p style="margin-top: 1em">--fixed-passphrase string <br>
Supply the passphrase string to the gpg-protect-tool. This
option is only useful for the regression tests included with
this package and may be revised or removed at any <br>
time without notice.</p>

<p style="margin-top: 1em">--no-common-certs-import <br>
Suppress the import of common certificates on keybox
creation.</p>

<p style="margin-top: 1em">All the long options may also be
given in the configuration file after stripping off the two
leading dashes.</p>

<p style="margin-top: 1em">HOW TO SPECIFY A USER ID <br>
There are different ways to specify a user ID to GnuPG. Some
of them are only valid for gpg others are only good for
gpgsm. Here is the entire list of ways to specify a key:</p>

<p style="margin-top: 1em">By key Id. <br>
This format is deduced from the length of the string and its
content or 0x prefix. The key Id of an X.509 certificate are
the low 64 bits of its SHA-1 fingerprint. The <br>
use of key Ids is just a shortcut, for all automated
processing the fingerprint should be used.</p>

<p style="margin-top: 1em">When using gpg an exclamation
mark (!) may be appended to force using the specified
primary or secondary key and not to try and calculate which
primary or secondary key to <br>
use.</p>

<p style="margin-top: 1em">The last four lines of the
example give the key ID in their long form as internally
used by the OpenPGP protocol. You can see the long key ID
using the option --with- <br>
colons.</p>

<p style="margin-top: 1em">234567C4 <br>
0F34E556E <br>
01347A56A <br>
0xAB123456</p>

<p style="margin-top: 1em">234AABBCC34567C4 <br>
0F323456784E56EAB <br>
01AB3FED1347A5612 <br>
0x234AABBCC34567C4</p>

<p style="margin-top: 1em">By fingerprint. <br>
This format is deduced from the length of the string and its
content or the 0x prefix. Note, that only the 20 byte
version fingerprint is available with gpgsm (i.e. the <br>
SHA-1 hash of the certificate).</p>

<p style="margin-top: 1em">When using gpg an exclamation
mark (!) may be appended to force using the specified
primary or secondary key and not to try and calculate which
primary or secondary key to <br>
use.</p>

<p style="margin-top: 1em">The best way to specify a key Id
is by using the fingerprint. This avoids any ambiguities in
case that there are duplicated key IDs.</p>


<p style="margin-top: 1em">1234343434343434C434343434343434
<br>
123434343434343C3434343434343734349A3434 <br>
0E12343434343434343434EAB3484343434343434 <br>
0xE12343434343434343434EAB3484343434343434</p>

<p style="margin-top: 1em">(gpgsm also accepts colons
between each pair of hexadecimal digits because this is the
de-facto standard on how to present X.509 fingerprints.)</p>

<p style="margin-top: 1em">By exact match on OpenPGP user
ID. <br>
This is denoted by a leading equal sign. It does not make
sense for X.509 certificates.</p>

<p style="margin-top: 1em">=Heinrich Heine
&lt;heinrichh@uni-duesseldorf.de&gt;</p>

<p style="margin-top: 1em">By exact match on an email
address. <br>
This is indicated by enclosing the email address in the
usual way with left and right angles.</p>


<p style="margin-top: 1em">&lt;heinrichh@uni-duesseldorf.de&gt;</p>

<p style="margin-top: 1em">By word match. <br>
All words must match exactly (not case sensitive) but can
appear in any order in the user ID or a subjects name. Words
are any sequences of letters, digits, the under&acirc; <br>
score and all characters with bit 7 set.</p>

<p style="margin-top: 1em">+Heinrich Heine duesseldorf</p>

<p style="margin-top: 1em">By exact match on the
subject&rsquo;s DN. <br>
This is indicated by a leading slash, directly followed by
the RFC-2253 encoded DN of the subject. Note that you
can&rsquo;t use the string printed by &quot;gpgsm
--list-keys&quot; <br>
because that one as been reordered and modified for better
readability; use --with-colons to print the raw (but
standard escaped) RFC-2253 string</p>

<p style="margin-top: 1em">/CN=Heinrich
Heine,O=Poets,L=Paris,C=FR</p>

<p style="margin-top: 1em">By exact match on the
issuer&rsquo;s DN. <br>
This is indicated by a leading hash mark, directly followed
by a slash and then directly followed by the rfc2253 encoded
DN of the issuer. This should return the Root <br>
cert of the issuer. See note above.</p>

<p style="margin-top: 1em">#/CN=Root
Cert,O=Poets,L=Paris,C=FR</p>

<p style="margin-top: 1em">By exact match on serial number
and issuer&rsquo;s DN. <br>
This is indicated by a hash mark, followed by the
hexadecimal representation of the serial number, then
followed by a slash and the RFC-2253 encoded DN of the
issuer. See <br>
note above.</p>

<p style="margin-top: 1em">#4F03/CN=Root
Cert,O=Poets,L=Paris,C=FR</p>

<p style="margin-top: 1em">By keygrip <br>
This is indicated by an ampersand followed by the 40 hex
digits of a keygrip. gpgsm prints the keygrip when using the
command --dump-cert. It does not yet work for <br>
OpenPGP keys.</p>


<p style="margin-top: 1em">&amp;D75F22C3F86E355877348498CDC92BD21010A480</p>

<p style="margin-top: 1em">By substring match. <br>
This is the default mode but applications may want to
explicitly indicate this by putting the asterisk in front.
Match is not case sensitive.</p>

<p style="margin-top: 1em">Heine <br>
*Heine</p>

<p style="margin-top: 1em">Please note that we have reused
the hash mark identifier which was used in old GnuPG
versions to indicate the so called local-id. It is not
anymore used and there should be no <br>
conflict when used with X.509 stuff.</p>

<p style="margin-top: 1em">Using the RFC-2253 format of DNs
has the drawback that it is not possible to map them back to
the original encoding, however we don&rsquo;t have to do
this because our key database <br>
stores this encoding as meta data.</p>

<p style="margin-top: 1em">EXAMPLES <br>
$ gpgsm -er goo@bar.net &lt;plaintext &gt;ciphertext</p>

<p style="margin-top: 1em">FILES <br>
There are a few configuration files to control certain
aspects of gpgsm&rsquo;s operation. Unless noted, they are
expected in the current home directory (see: [option
--homedir]).</p>

<p style="margin-top: 1em">gpgsm.conf <br>
This is the standard configuration file read by gpgsm on
startup. It may contain any valid long option; the leading
two dashes may not be entered and the option may not <br>
be abbreviated. This default name may be changed on the
command line (see: [gpgsm-option --options]). You should
backup this file.</p>

<p style="margin-top: 1em">policies.txt <br>
This is a list of allowed CA policies. This file should list
the object identifiers of the policies line by line. Empty
lines and lines starting with a hash mark are <br>
ignored. Policies missing in this file and not marked as
critical in the certificate will print only a warning;
certificates with policies marked as critical and not <br>
listed in this file will fail the signature verification.
You should backup this file.</p>

<p style="margin-top: 1em">For example, to allow only the
policy 2.289.9.9, the file should look like this:</p>

<p style="margin-top: 1em"># Allowed policies <br>
2.289.9.9</p>

<p style="margin-top: 1em">qualified.txt <br>
This is the list of root certificates used for qualified
certificates. They are defined as certificates capable of
creating legally binding signatures in the same way as <br>
handwritten signatures are. Comments start with a hash mark
and empty lines are ignored. Lines do have a length limit
but this is not a serious limitation as the format <br>
of the entries is fixed and checked by gpgsm: A non-comment
line starts with optional whitespace, followed by exactly 40
hex character, white space and a lowercased 2 let&acirc;
<br>
ter country code. Additional data delimited with by a white
space is current ignored but might late be used for other
purposes.</p>

<p style="margin-top: 1em">Note that even if a certificate
is listed in this file, this does not mean that the
certificate is trusted; in general the certificates listed
in this file need to be <br>
listed also in &acirc;trustlist.txt&acirc;.</p>

<p style="margin-top: 1em">This is a global file an
installed in the data directory (e.g.
&acirc;/usr/share/gnupg/qualified.txt&acirc;). GnuPG
installs a suitable file with root certificates as used in
Ger&acirc; <br>
many. As new Root-CA certificates may be issued over time,
these entries may need to be updated; new distributions of
this software should come with an updated list but <br>
it is still the responsibility of the Administrator to check
that this list is correct.</p>

<p style="margin-top: 1em">Everytime gpgsm uses a
certificate for signing or verification this file will be
consulted to check whether the certificate under question
has ultimately been issued by <br>
one of these CAs. If this is the case the user will be
informed that the verified signature represents a legally
binding (&lsquo;&lsquo;qualified&rsquo;&rsquo;) signature.
When creating a sig&acirc; <br>
nature using such a certificate an extra prompt will be
issued to let the user confirm that such a legally binding
signature shall really be created.</p>

<p style="margin-top: 1em">Because this software has not
yet been approved for use with such certificates,
appropriate notices will be shown to indicate this fact.</p>

<p style="margin-top: 1em">help.txt <br>
This is plain text file with a few help entries used with
pinentry as well as a large list of help items for gpg and
gpgsm. The standard file has English help texts; to <br>
install localized versions use filenames like
&acirc;help.LL.txt&acirc; with LL denoting the locale. GnuPG
comes with a set of predefined help files in the data
directory (e.g. <br>
&acirc;/usr/share/gnupg/help.de.txt&acirc;) and allows
overriding of any help item by help files stored in the
system configuration directory (e.g.
&acirc;/etc/gnupg/help.de.txt&acirc;). For a <br>
reference of the help file&rsquo;s syntax, please see the
installed &acirc;help.txt&acirc; file.</p>

<p style="margin-top: 1em">com-certs.pem <br>
This file is a collection of common certificates used to
populated a newly created &acirc;pubring.kbx&acirc;. An
administrator may replace this file with a custom one. The
format is <br>
a concatenation of PEM encoded X.509 certificates. This
global file is installed in the data directory (e.g.
&acirc;/usr/share/gnupg/com-certs.pem&acirc;).</p>

<p style="margin-top: 1em">Note that on larger
installations, it is useful to put predefined files into the
directory &acirc;/etc/skel/.gnupg/&acirc; so that newly
created users start up with a working configuration. <br>
For existing users a small helper script is provided to
create these files (see: [addgnupghome]).</p>

<p style="margin-top: 1em">For internal purposes gpgsm
creates and maintains a few other files; they all live in in
the current home directory (see: [option --homedir]). Only
gpgsm may modify these files.</p>

<p style="margin-top: 1em">pubring.kbx <br>
This a database file storing the certificates as well as
meta information. For debugging purposes the tool kbxutil
may be used to show the internal structure of this <br>
file. You should backup this file.</p>

<p style="margin-top: 1em">random_seed <br>
This content of this file is used to maintain the internal
state of the random number generator across invocations. The
same file is used by other programs of this soft&acirc; <br>
ware too.</p>

<p style="margin-top: 1em">S.gpg-agent <br>
If this file exists and the environment variable
&acirc;GPG_AGENT_INFO&acirc; is not set, gpgsm will first
try to connect to this socket for accessing gpg-agent before
starting a new <br>
gpg-agent instance. Under Windows this socket (which in
reality be a plain file describing a regular TCP listening
port) is the standard way of connecting the gpg-agent.</p>

<p style="margin-top: 1em">SEE ALSO <br>
gpg2(1), gpg-agent(1)</p>

<p style="margin-top: 1em">The full documentation for this
tool is maintained as a Texinfo manual. If GnuPG and the
info program are properly installed at your site, the
command</p>

<p style="margin-top: 1em">info gnupg</p>

<p style="margin-top: 1em">should give you access to the
complete manual including a menu structure and an index.</p>

<p style="margin-top: 1em">GnuPG 2.0.22 2016-11-05
GPGSM(1)</p>
<hr>
</body>
</html>
