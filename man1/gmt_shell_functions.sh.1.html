<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GMT_SHELL_FUNCTIONS.SH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GMT_SHELL_FUNCTIONS.SH(1)</td>
    <td class="head-vol">GMT</td>
    <td class="head-rtitle">GMT_SHELL_FUNCTIONS.SH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
gmt_shell_functions.sh - Practical functions to be used in GMT bourne shell
  scripts
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>gmt_init_tmpdir</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_remove_tmpdir</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_clean_up</b> [<i>prefix</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_message</b> <i>message</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_abort</b> <i>message</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_build_movie</b> [<b>-d</b> <i>directory</i>] [<b>-n</b>] [<b>-r</b>
  <i>framerate</i>] [ <b>-v</b>] <i>namestem</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_build_gif</b> [<b>-d</b> <i>directory</i>] [<b>-l</b> <i>loop</i>]
  [<b>-r</b> <i>delay</i>] <i>namestem</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_build_kmz</b> <b>-p</b> <i>prefix</i> [ <b>-r</b> ] <i>files</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_nrecords</b> <i>file(s)</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_ndatarecords</b> <i>file(s)</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_nfields</b> <i>string</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_field</b> <i>string</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_region</b> <i>file(s)</i> [<i>options</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_gridregion</b> <i>file</i> [<i>options</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_map_width</b> <b>-R</b> <b>-J</b>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_get_map_height</b> <b>-R</b> <b>-J</b>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_movie_script</b> [<b>-c</b> <i>canvas</i> OR
    <b>-e</b> <i>dpi</i> <b>-h</b> <i>height</i> <b>-w</b> <i>width</i>]
    [<b>-f</b> <i>format</i>]</dt>
  <dd class="It-tag">[<b>-g</b> <i>fill</i>] [<b>-n</b> <i>frames</i>]
      [<b>-m</b> <i>margin</i>] [<b>-r</b> <i>rate</i>] <i>namestem</i></dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_launch_jobs</b> [<b>-c</b> <i>n_cores</i>] [<b>-l</b>
  <i>nlines_per_cluster</i>] [ <b>-n</b>] [<b>-v</b>] [<b>-w</b>]
  <i>commandfile</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_set_psfile</b> <i>scriptfile</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_set_pdffile</b> <i>scriptfile</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_set_framename</b> <i>prefix framenumber</i>
<div style="height: 1.00em;">&#x00A0;</div>
<b>gmt_set_framenext</b> <i>framenumber</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>gmt_shell_functions.sh</b> provides a set of functions to Bourne (again)
  shell scripts in support of GMT. The calling shell script should include the
  following line, before the functions can be used:
<div style="height: 1.00em;">&#x00A0;</div>
<b>. gmt_shell_functions.sh</b>
<div style="height: 1.00em;">&#x00A0;</div>
Once included in a shell script, <b>gmt_shell_functions.sh</b> allows GMT users
  to do some scripting more easily than otherwise. The functions made available
  are:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_init_tmpdir</b></dt>
  <dd class="It-tag">Creates a temporary directory in <b>/tmp</b> or (when
      defined) in the directory specified by the environment variable
      <b>TMPDIR</b>. The name of the temporary directory is returned as
      environment variable <b>GMT_TMPDIR</b>. This function also causes GMT to
      run in &#x2018;isolation mode&#x2019;, i.e., all temporary files will be
      created in <b>GMT_TMPDIR</b> and the gmt.conf file will not be
    adjusted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_remove_tmpdir</b></dt>
  <dd class="It-tag">Removes the temporary directory and unsets the
      <b>GMT_TMPDIR</b> environment variable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_cleanup</b></dt>
  <dd class="It-tag">Remove all files and directories in which the current
      process number is part of the file name. If the optional <i>prefix</i> is
      given then we also delete all files and directories that begins with the
      given prefix.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_message</b></dt>
  <dd class="It-tag">Send a message to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_abort</b></dt>
  <dd class="It-tag">Send a message to standard error and exit the shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_nrecords</b></dt>
  <dd class="It-tag">Returns the total number of lines in <i>file(s)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_ndatarecords</b></dt>
  <dd class="It-tag">Returns the total number of data records in <i>file(s)</i>,
      i.e., not counting headers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_nfields</b></dt>
  <dd class="It-tag">Returns the number of fields or words in <i>string</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_field</b></dt>
  <dd class="It-tag">Returns the given <i>field</i> in a <i>string</i>. Must
      pass <i>string</i> between double quotes to preserve it as one item.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_region</b></dt>
  <dd class="It-tag">Returns the region in the form w/e/s/n based on the data in
      table <i>file(s)</i>. Optionally add <b>-I</b><i>dx</i>/<i>dy</i> to round
      off the answer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_gridregion</b></dt>
  <dd class="It-tag">Returns the region in the form w/e/s/n based on the header
      of a grid <i>file</i>. Optionally add <b>-I</b><i>dx</i>/<i>dy</i> to
      round off the answer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_map_width</b></dt>
  <dd class="It-tag">Expects the user to give the desired <b>-R</b> <b>-J</b>
      settings and returns the map width in the current measurement unit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_get_map_height</b></dt>
  <dd class="It-tag">Expects the user to give the desired <b>-R</b> <b>-J</b>
      settings and returns the map height in the current measurement unit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_movie_script</b></dt>
  <dd class="It-tag">Creates an animation bash script template based on the
      arguments that set size, number of frames, video format etc. Without
      arguments the function will display its usage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_launch_jobs</b></dt>
  <dd class="It-tag">Takes a file with a long list of commands and splits them
      into many chunks that can be executed concurrently. Without arguments the
      function will display its usage. Note: It is your responsibility to make
      sure no race conditions occur (i.e., multiple commands writing to the same
      file).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_set_psfile</b></dt>
  <dd class="It-tag">Create the output PostScript file name based on the base
      name of a given file (usually the script name <b>$0</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_set_framename</b></dt>
  <dd class="It-tag">Returns a lexically ordered filename stem (i.e., no
      extension) given the file prefix and the current frame number, using a
      width of 6 for the integer including leading zeros. Useful when creating
      animations and lexically sorted filenames are required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_set_framenext</b></dt>
  <dd class="It-tag">Accepts the current frame integer counter and returns the
      next integer counter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_build_movie</b></dt>
  <dd class="It-tag">Accepts a <i>namestem</i> which gives the prefix of a
      series of image files with names <i>dir</i>/<i>namestem</i>_*.*. Optional
      argument sets the directory [same as <i>namestem</i>], and frame rate
      [24]. Without arguments the function will display its usage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_build_gif</b></dt>
  <dd class="It-tag">Accepts a <i>namestem</i> which gives the prefix of a
      series of image files with names <i>dir</i>/<i>namestem</i>_*.*. Optional
      argument sets the directory [same as <i>namestem</i>], loop count and
      frame rate [24]. Without arguments the function will display its
    usage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gmt_build_kmz</b></dt>
  <dd class="It-tag">Accepts <b>-p</b> <i>prefix</i> [ <b>-r</b> ] and any
      number of KML files and and the images they may refer to, and builds a
      single KMZ file with the name <i>prefix</i>.kmz. Without arguments the
      function will display its usage.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
1. These functions only work in the Bourne shell ( <b>sh</b>) and their
  derivatives (like <b>ash</b>, <b>bash</b>, <b>ksh</b> and <b>zsh</b>). These
  functions do not work in the C shell ( <b>csh</b>) or their derivatives (like
  <b>tcsh</b>), and cannot be used in DOS batch scripts either.
<div style="height: 1.00em;">&#x00A0;</div>
2. <b>gmt_shell_functions.sh</b> were first introduced in GMT version 4.2.2 and
  have since been regularly expanded with other practical scripting short-cuts.
  If you want to suggest other functions, please do so by adding a New Issue
  request on gmt.soest.hawaii.edu.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
gmt , gmt.conf , gmtinfo , grdinfo
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2017, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 24, 2017</td>
    <td class="foot-os">5.4.2</td>
  </tr>
</table>
</body>
</html>
