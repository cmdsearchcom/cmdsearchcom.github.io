<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:54:36 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SYNCHRONISATION.SH(1) User Contributed Perl
Documentation SYNCHRONISATION.SH(1)</p>

<p style="margin-top: 1em">NAME <br>
BeakerLib - synchronisation - Process synchronisation
routines</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This is a library of helpers for process synchronisation of
applications.</p>

<p style="margin-top: 1em">NOTE: none of this commands will
cause the test proper to fail, even in case of critical
errors during their invocation. If you want your test to
fail if those test fail, use <br>
their return codes and rlFail().</p>

<p style="margin-top: 1em">FUNCTIONS <br>
Process Synchronisation <br>
rlWaitForCmd</p>

<p style="margin-top: 1em">Pauses script execution until
command exit status is the expeced value. Logs a WARNING and
returns 1 if the command didn&rsquo;t exit successfully
before timeout elapsed or a maximum <br>
number of invocations has been reached.</p>

<p style="margin-top: 1em">rlWaitForCmd command [-p PID]
[-t time] [-m count] [-d delay] [-r retval]</p>

<p style="margin-top: 1em">command <br>
Command that will be executed until its return code is equal
0 or value speciefied as option to &lsquo;-r&rsquo;.</p>

<p style="margin-top: 1em">-t time <br>
Timeout in seconds, default=120. If the command
doesn&rsquo;t return 0 before time elapses, the command will
be killed.</p>

<p style="margin-top: 1em">-p PID <br>
PID of the process to check before running command. If the
process exits before the socket is opened, the command will
log a WARNING.</p>

<p style="margin-top: 1em">-m count <br>
Maximum number of &lsquo;command&rsquo; executions before
continuing anyway. Default is infite. Returns 1 if the
maximum was reached.</p>

<p style="margin-top: 1em">-d delay <br>
Delay between &lsquo;command&rsquo; invocations. Default
1.</p>

<p style="margin-top: 1em">-r retval <br>
Expected return value of command. Default 0.</p>

<p style="margin-top: 1em">rlWaitForFile</p>

<p style="margin-top: 1em">Pauses script execution until
specified file or directory starts existing. Returns 0 if
file started existing, 1 if timeout was reached or PID
exited. Return code is greater <br>
than 1 in case of error.</p>

<p style="margin-top: 1em">rlWaitForFile path [-p PID] [-t
time] [-d delay]</p>

<p style="margin-top: 1em">path <br>
Path to file that should start existing.</p>

<p style="margin-top: 1em">-t time <br>
Timeout in seconds (optional, default=120). If the file
isn&rsquo;t opened before the time elapses the command
returns 1.</p>

<p style="margin-top: 1em">-p PID <br>
PID of the process that should also be running. If the
process exits before the file is created, the command
returns with status code of 1.</p>

<p style="margin-top: 1em">-d delay <br>
Delay between subsequent checks for existence of file.
Default 1.</p>

<p style="margin-top: 1em">rlWaitForSocket</p>

<p style="margin-top: 1em">Pauses script execution until
socket starts listening. Returns 0 if socket started
listening, 1 if timeout was reached or PID exited. Return
code is greater than 1 in case of <br>
error.</p>

<p style="margin-top: 1em">rlWaitForSocket {port|path} [-p
PID] [-t time] [-d delay] [--close]</p>

<p style="margin-top: 1em">port|path <br>
Network port to wait for opening or a path to UNIX socket.
Regular expressions are also supported.</p>

<p style="margin-top: 1em">-t time <br>
Timeout in seconds (optional, default=120). If the socket
isn&rsquo;t opened before the time elapses the command
returns 1.</p>

<p style="margin-top: 1em">-p PID <br>
PID of the process that should also be running. If the
process exits before the socket is opened, the command
returns with status code of 1.</p>

<p style="margin-top: 1em">-d delay <br>
Delay between subsequent checks for availability of socket.
Default 1.</p>

<p style="margin-top: 1em">--close <br>
Wait for the socket to stop listening.</p>

<p style="margin-top: 1em">rlWait</p>

<p style="margin-top: 1em">Wrapper around bash builtin
&lsquo;wait&rsquo; command. See bash_builtins(1) man page.
Kills the process and all its children if the timeout
elapses.</p>

<p style="margin-top: 1em">rlWaitFor [n ...] [-s SIGNAL]
[-t time]</p>

<p style="margin-top: 1em">n List of PIDs to wait for. They
need to be background tasks of current shell. See
bash_builtins(1) section for &lsquo;wait&rsquo; command/</p>

<p style="margin-top: 1em">-t time <br>
Timeout in seconds (optional, default=30). If the wait
isn&rsquo;t successful before the time elapses then all
specified tasks are killed.</p>

<p style="margin-top: 1em">-s SIGNAL <br>
Signal used to kill the process, optional SIGTERM by
default.</p>

<p style="margin-top: 1em">AUTHORS <br>
&Acirc;&middot; Hubert Kario &lt;hkario@redhat.com&gt;</p>

<p style="margin-top: 1em">perl v5.24.1 2017-04-21
SYNCHRONISATION.SH(1)</p>
<hr>
</body>
</html>
