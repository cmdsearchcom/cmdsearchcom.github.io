<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>t.rast.what(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">t.rast.what(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">t.rast.what(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>t.rast.what</b> - Sample a space time raster dataset at specific
  vector point coordinates and write the output to stdout using different
  layouts
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
temporal, sampling, raster, time
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>t.rast.what</b>
<div>&#x00A0;</div>
<b>t.rast.what --help</b>
<div>&#x00A0;</div>
<b>t.rast.what</b> [-<b>ni</b>] [<b>points</b>=<i>name</i>]
  [<b>coordinates</b>=<i>east,north</i>] <b>strds</b>=<i>name</i>
  [<b>output</b>= <i>name</i>] [<b>where</b>=<i>sql_query</i>]
  [<b>null_value</b>= <i>string</i>] [<b>separator</b>=<i>character</i>]
  [<b>order</b>= <i>string</i>[,<i>string</i>,...]]
  [<b>layout</b>=<i>string</i>] [ <b>nprocs</b>=<i>integer</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output header row</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use stdin as input and ignore coordinates and point option</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>points</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>coordinates</b>=<i>east,north</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Comma separated list of coordinates</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>strds</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of the input space time raster dataset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for the output file or &quot;-&quot; in case stdout should be used
    <div>&#x00A0;</div>
    Default: <i>-</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>where</b>=<i>sql_query</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    WHERE conditions of SQL statement without &#x2019;where&#x2019; keyword used
      in the temporal GIS framework
    <div>&#x00A0;</div>
    Example: start_time &gt; &#x2019;2001-01-01 12:30:00&#x2019;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>null_value</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    String representing NULL value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separator</b>=<i>character</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Field separator
    <div>&#x00A0;</div>
    Special characters: pipe, comma, space, tab, newline
    <div>&#x00A0;</div>
    Default: <i>pipe</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>order</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Sort the maps by category
    <div>&#x00A0;</div>
    Options: <i>id, name, creator, mapset, creation_time, modification_time,
      start_time, end_time, north, south, west, east, min, max</i>
    <div>&#x00A0;</div>
    Default: <i>start_time</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>layout</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The layout of the output. One point per row (row), one point per column
      (col), all timsteps in one row (timerow)
    <div>&#x00A0;</div>
    Options: <i>row, col, timerow</i>
    <div>&#x00A0;</div>
    Default: <i>row</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nprocs</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of r.what processes to run in parallel
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>t.rast.what</i> is designed to sample space time raster datasets at specific
  point coordinates using r.what internally. The output of r.what is transformed
  to different output layouts. The output layouts can be specified using the
  <i>layout</i> option.
<div class="Pp"></div>
Three layouts can be specified:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>row</i> - Row order, one vector sample point value per
      row</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>col</i> - Column order, create a column for each vector
      sample point of a single time step/raster layer</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>timerow</i> - Time order, create a column for each time
      step, this order is the original <i>r.what</i> output, except that the
      column names are the timestamps</dd>
</dl>
</div>
Please have a look at the example to see the supported layouts.
<div class="Pp"></div>
This module is designed to run several instances of <i>r.what</i> to sample
  subsets of a space time raster dataset in parallel. Several intermediate text
  files will be created that are merged into a single file at the end of the
  processing.
<div class="Pp"></div>
Coordinates can be provided as vector map using the <i>points</i> option or as
  comma separated coordinate list with the <i>coordinates </i>option.
<div class="Pp"></div>
An output file can be specified using the <i>output</i> option. Stdout will be
  used if no output is specified or if the <i>output</i> option is set to
  &quot;-&quot;.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Data_preparation"><a class="selflink" href="#Data_preparation">Data
  preparation</a></h2>
In the following examples we sample a space time raster dataset that contains 4
  raster map layers. First we create the STRDS that will be sampled with
  <i>t.rast.what</i>.
<div>&#x00A0;</div>
<pre>
g.region s=0 n=80 w=0 e=120 b=0 t=50 res=10
# Generate data
r.mapcalc expression=&quot;a_1 = 1&quot; -s
r.mapcalc expression=&quot;a_2 = 2&quot; -s
r.mapcalc expression=&quot;a_3 = 3&quot; -s
r.mapcalc expression=&quot;a_4 = 4&quot; -s
t.create type=strds output=A title=&quot;A test&quot; descr=&quot;A test&quot;
t.register -i type=raster input=A maps=a_1,a_2,a_3,a_4 \
    start=&#x2019;1990-01-01&#x2019; increment=&quot;1 month&quot;
</pre>
<h2 class="Ss" title="Ss" id="Example_1"><a class="selflink" href="#Example_1">Example
  1</a></h2>
The first approach uses text coordinates as input and stdout as output, the
  layout is one coordinate(point per column:
<div>&#x00A0;</div>
<pre>
t.rast.what strds=A coordinates=&quot;115,36,79,45&quot; layout=col -n
start|end|115.0000000000;36.0000000000|79.0000000000;45.0000000000
1990-01-01 00:00:00|1990-02-01 00:00:00|1|1
1990-02-01 00:00:00|1990-03-01 00:00:00|2|2
1990-03-01 00:00:00|1990-04-01 00:00:00|3|3
1990-04-01 00:00:00|1990-05-01 00:00:00|4|4
</pre>
<h2 class="Ss" title="Ss" id="Example_2"><a class="selflink" href="#Example_2">Example
  2</a></h2>
A vector map layer can be used as input to sample the STRDS. All three available
  layouts are demonstrated using the vector map for sampling.
<div>&#x00A0;</div>
<pre>
# First create the vector map layer based on random points
v.random output=points n=3 seed=1
# Row layout using a text file as output
t.rast.what strds=A points=points output=result.txt layout=row -n
cat result.txt
115.0043586274|36.3593955783|1990-01-01 00:00:00|1990-02-01 00:00:00|1
115.0043586274|36.3593955783|1990-02-01 00:00:00|1990-03-01 00:00:00|2
115.0043586274|36.3593955783|1990-03-01 00:00:00|1990-04-01 00:00:00|3
115.0043586274|36.3593955783|1990-04-01 00:00:00|1990-05-01 00:00:00|4
79.6816763826|45.2391522853|1990-01-01 00:00:00|1990-02-01 00:00:00|1
79.6816763826|45.2391522853|1990-02-01 00:00:00|1990-03-01 00:00:00|2
79.6816763826|45.2391522853|1990-03-01 00:00:00|1990-04-01 00:00:00|3
79.6816763826|45.2391522853|1990-04-01 00:00:00|1990-05-01 00:00:00|4
97.4892579600|79.2347263950|1990-01-01 00:00:00|1990-02-01 00:00:00|1
97.4892579600|79.2347263950|1990-02-01 00:00:00|1990-03-01 00:00:00|2
97.4892579600|79.2347263950|1990-03-01 00:00:00|1990-04-01 00:00:00|3
97.4892579600|79.2347263950|1990-04-01 00:00:00|1990-05-01 00:00:00|4
# Column layout order using stdout as output
t.rast.what strds=A points=points layout=col -n
start|end|115.0043586274;36.3593955783|79.6816763826;45.2391522853|97.4892579600;79.2347263950
1990-01-01 00:00:00|1990-02-01 00:00:00|1|1|1
1990-02-01 00:00:00|1990-03-01 00:00:00|2|2|2
1990-03-01 00:00:00|1990-04-01 00:00:00|3|3|3
1990-04-01 00:00:00|1990-05-01 00:00:00|4|4|4
# Timerow layout, one time series per row
# using the where statement to select a subset of the STRDS
# and stdout as output
t.rast.what strds=A points=points \
    where=&quot;start_time &gt;= &#x2019;1990-03-01&#x2019;&quot; layout=timerow -n
x|y|1990-03-01 00:00:00;1990-04-01 00:00:00|1990-04-01 00:00:00;1990-05-01 00:00:00
115.004358627375|36.3593955782903|3|4
79.681676382576|45.2391522852909|3|4
97.4892579600048|79.2347263950131|3|4
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>g.region,</i> <i>r.mask</i> <i>r.neighbors,</i> <i>r.what,</i>
  <i>t.info,</i> <i>t.rast.aggregate.ds,</i> <i>t.rast.extract,</i>
  <i>v.what.strds</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
S&#x00F6;ren Gebbert, Th&#x00FC;nen Institute of Climate-Smart Agriculture
<div class="Pp"></div>
<i>Last changed: $Date: 2015-09-25 13:07:25 +0200 (Fri, 25 Sep 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: t.rast.what source code (history)
<div class="Pp"></div>
Main index | Temporal index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
