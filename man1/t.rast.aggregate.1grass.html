<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>t.rast.aggregate(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">t.rast.aggregate(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">t.rast.aggregate(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>t.rast.aggregate</b> - Aggregates temporally the maps of a space time
  raster dataset by a user defined granularity.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
temporal, aggregation, raster, time
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>t.rast.aggregate</b>
<div>&#x00A0;</div>
<b>t.rast.aggregate --help</b>
<div>&#x00A0;</div>
<b>t.rast.aggregate</b> [-<b>n</b>] <b>input</b>=<i>name</i>
  <b>output</b>=<i>name</i> <b>basename</b>=<i>string</i>
  [<b>suffix</b>=<i>string</i>] <b>granularity</b>=<i>string</i>
  <b>method</b>=<i>string</i> [<b>offset</b>=<i>integer</i>]
  [<b>nprocs</b>=<i>integer</i>] [ <b>file_limit</b>=<i>integer</i>]
  [<b>sampling</b>= <i>name</i>[,<i>name</i>,...]]
  [<b>where</b>=<i>sql_query</i>] [-- <b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Register Null maps</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of the input space time raster dataset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of the output space time raster dataset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>basename</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Basename of the new generated output maps
    <div>&#x00A0;</div>
    Either a numerical suffix or the start time (s-flag) separated by an
      underscore will be attached to create a unique identifier</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>suffix</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Suffix to add at basename: set &#x2019;gran&#x2019; for granularity,
      &#x2019;time&#x2019; for the full time format, &#x2019;num&#x2019; for
      numerical suffix with a specific number of digits (default %05)
    <div>&#x00A0;</div>
    Default: <i>gran</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>granularity</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Aggregation granularity, format absolute time &quot;x years, x months, x
      weeks, x days, x hours, x minutes, x seconds&quot; or an integer value for
      relative time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>method</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Aggregate operation to be performed on the raster maps
    <div>&#x00A0;</div>
    Options: <i>average, count, median, mode, minimum, min_raster, maximum,
      max_raster, stddev, range, sum, variance, diversity, slope, offset,
      detcoeff, quart1, quart3, perc90, quantile, skewness, kurtosis</i>
    <div>&#x00A0;</div>
    Default: <i>average</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>offset</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Offset that is used to create the output map ids, output map id is generated
      as: basename_ (count + offset)
    <div>&#x00A0;</div>
    Default: <i>0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nprocs</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of r.series processes to run in parallel
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>file_limit</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The maximum number of open files allowed for each r.series process
    <div>&#x00A0;</div>
    Default: <i>1000</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sampling</b>=<i>name[,</i><i>name</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The method to be used for sampling the input dataset
    <div>&#x00A0;</div>
    Options: <i>equal, overlaps, overlapped, starts, started, finishes,
      finished, during, contains</i>
    <div>&#x00A0;</div>
    Default: <i>contains</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>where</b>=<i>sql_query</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    WHERE conditions of SQL statement without &#x2019;where&#x2019; keyword used
      in the temporal GIS framework
    <div>&#x00A0;</div>
    Example: start_time &gt; &#x2019;2001-01-01 12:30:00&#x2019;</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>t.rast.aggregate</i> temporally aggregates space time raster datasets by a
  specific temporal granularity. This module support <i>absolute</i> and
  <i>relative time</i>. The temporal granularity of absolute time can be
  <i>seconds, minutes, hours, days, weeks,</i> <i>months</i> or <i>years</i>.
  Mixing of granularities eg. &quot;1 year, 3 months 5 days&quot; is not
  supported. In case of relative time the temporal unit of the input space time
  raster dataset is used. The granularity must be specified with an integer
  value.
<div class="Pp"></div>
This module is sensitive to the current region and mask settings, hence spatial
  extent and spatial resolution. In case the registered raster maps of the input
  space time raster dataset have different spatial resolutions, the default
  nearest neighbor resampling method is used for runtime spatial aggregation.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
The raster module <i>r.series</i> is used internally. Hence all aggregate
  methods of <i>r.series</i> are supported. See the r.series manual page for
  details.
<div class="Pp"></div>
This module will shift the start date for each aggregation process depending on
  the provided temporal granularity. The following shifts will performed:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity years</i>: will start at the first of
      January, hence 14-08-2012 00:01:30 will be shifted to 01-01-2012
    00:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity months</i>: will start at the first day of a
      month, hence 14-08-2012 will be shifted to 01-08-2012 00:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity weeks</i>: will start at the first day of a
      week (Monday), hence 14-08-2012 01:30:30 will be shifted to 13-08-2012
      01:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity days</i>: will start at the first hour of a
      day, hence 14-08-2012 00:01:30 will be shifted to 14-08-2012 00:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity hours</i>: will start at the first minute of
      a hour, hence 14-08-2012 01:30:30 will be shifted to 14-08-2012
    01:00:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>granularity minutes</i>: will start at the first second
      of a minute, hence 14-08-2012 01:30:30 will be shifted to 14-08-2012
      01:30:00</dd>
</dl>
</div>
<div class="Pp"></div>
The specification of the temporal relation between the aggregation intervals and
  the raster map layers is always formulated from the aggregation interval
  viewpoint. Hence, the relation <i>contains</i> has to be specified to
  aggregate map layer that are temporally located in an aggregation interval.
<div class="Pp"></div>
Parallel processing is supported in case that more than one interval is
  available for aggregation computation. Internally several <i>r.series</i>
  modules will be started, depending on the number of specified parallel
  processes ( <i>nprocs</i>) and the number of intervals to aggregate.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Aggregation_of_monthly_data_into_yearly_data"><a class="selflink" href="#Aggregation_of_monthly_data_into_yearly_data">Aggregation
  of monthly data into yearly data</a></h2>
In this example the user is going to aggregate monthly data into yearly data,
  running:
<div>&#x00A0;</div>
<pre>
t.rast.aggregate input=tempmean_monthly output=tempmean_yearly \
                 basename=tempmean_year \
                 granularity=&quot;1 years&quot; method=average
t.support input=tempmean_yearly \
          title=&quot;Yearly precipitation&quot; \
          description=&quot;Aggregated precipitation dataset with yearly resolution&quot;
t.info tempmean_yearly
 +-------------------- Space Time Raster Dataset -----------------------------+
 |                                                                            |
 +-------------------- Basic information -------------------------------------+
 | Id: ........................ tempmean_yearly@climate_2000_2012
 | Name: ...................... tempmean_yearly
 | Mapset: .................... climate_2000_2012
 | Creator: ................... lucadelu
 | Temporal type: ............. absolute
 | Creation time: ............. 2014-11-27 10:25:21.243319
 | Modification time:.......... 2014-11-27 10:25:21.862136
 | Semantic type:.............. mean
 +-------------------- Absolute time -----------------------------------------+
 | Start time:................. 2009-01-01 00:00:00
 | End time:................... 2013-01-01 00:00:00
 | Granularity:................ 1 year
 | Temporal type of maps:...... interval
 +-------------------- Spatial extent ----------------------------------------+
 | North:...................... 320000.0
 | South:...................... 10000.0
 | East:.. .................... 935000.0
 | West:....................... 120000.0
 | Top:........................ 0.0
 | Bottom:..................... 0.0
 +-------------------- Metadata information ----------------------------------+
 | Raster register table:...... raster_map_register_514082e62e864522a13c8123d1949dea
 | North-South resolution min:. 500.0
 | North-South resolution max:. 500.0
 | East-west resolution min:... 500.0
 | East-west resolution max:... 500.0
 | Minimum value min:.......... 7.370747
 | Minimum value max:.......... 8.81603
 | Maximum value min:.......... 17.111387
 | Maximum value max:.......... 17.915511
 | Aggregation type:........... average
 | Number of registered maps:.. 4
 |
 | Title: Yearly precipitation
 | Monthly precipitation
 | Description: Aggregated precipitation dataset with yearly resolution
 | Dataset with monthly precipitation
 | Command history:
 | # 2014-11-27 10:25:21
 | t.rast.aggregate input=&quot;tempmean_monthly&quot;
 |     output=&quot;tempmean_yearly&quot; basename=&quot;tempmean_year&quot; granularity=&quot;1 years&quot;
 |     method=&quot;average&quot;
 |
 | # 2014-11-27 10:26:21
 | t.support input=tempmean_yearly \
 |        title=&quot;Yearly precipitation&quot; \
 |        description=&quot;Aggregated precipitation dataset with yearly resolution&quot;
 +----------------------------------------------------------------------------+
</pre>
<h2 class="Ss" title="Ss" id="Different_aggregations_and_map_name_suffix_variants"><a class="selflink" href="#Different_aggregations_and_map_name_suffix_variants">Different
  aggregations and map name suffix variants</a></h2>
Examples of resulting naming schemes for different aggregations when using the
  <b>suffix</b> option:
<h2 class="Ss" title="Ss" id="Weekly_aggregation"><a class="selflink" href="#Weekly_aggregation">Weekly
  aggregation</a></h2>
<pre>
t.rast.aggregate input=daily_temp output=weekly_avg_temp \
  basename=weekly_avg_temp method=average granularity=&quot;1 weeks&quot;
t.rast.list weekly_avg_temp
name|mapset|start_time|end_time
weekly_avg_temp_2003_01|climate|2003-01-03 00:00:00|2003-01-10 00:00:00
weekly_avg_temp_2003_02|climate|2003-01-10 00:00:00|2003-01-17 00:00:00
weekly_avg_temp_2003_03|climate|2003-01-17 00:00:00|2003-01-24 00:00:00
weekly_avg_temp_2003_04|climate|2003-01-24 00:00:00|2003-01-31 00:00:00
weekly_avg_temp_2003_05|climate|2003-01-31 00:00:00|2003-02-07 00:00:00
weekly_avg_temp_2003_06|climate|2003-02-07 00:00:00|2003-02-14 00:00:00
weekly_avg_temp_2003_07|climate|2003-02-14 00:00:00|2003-02-21 00:00:00
</pre>
Variant with <b>suffix</b> set to granularity:
<div>&#x00A0;</div>
<pre>
t.rast.aggregate input=daily_temp output=weekly_avg_temp \
  basename=weekly_avg_temp suffix=gran method=average \
  granularity=&quot;1 weeks&quot;
t.rast.list weekly_avg_temp
name|mapset|start_time|end_time
weekly_avg_temp_2003_01_03|climate|2003-01-03 00:00:00|2003-01-10 00:00:00
weekly_avg_temp_2003_01_10|climate|2003-01-10 00:00:00|2003-01-17 00:00:00
weekly_avg_temp_2003_01_17|climate|2003-01-17 00:00:00|2003-01-24 00:00:00
weekly_avg_temp_2003_01_24|climate|2003-01-24 00:00:00|2003-01-31 00:00:00
weekly_avg_temp_2003_01_31|climate|2003-01-31 00:00:00|2003-02-07 00:00:00
weekly_avg_temp_2003_02_07|climate|2003-02-07 00:00:00|2003-02-14 00:00:00
weekly_avg_temp_2003_02_14|climate|2003-02-14 00:00:00|2003-02-21 00:00:00
</pre>
<h2 class="Ss" title="Ss" id="Monthly_aggregation"><a class="selflink" href="#Monthly_aggregation">Monthly
  aggregation</a></h2>
<pre>
t.rast.aggregate input=daily_temp output=monthly_avg_temp \
  basename=monthly_avg_temp suffix=gran method=average \
  granularity=&quot;1 months&quot;
t.rast.list monthly_avg_temp
name|mapset|start_time|end_time
monthly_avg_temp_2003_01|climate|2003-01-01 00:00:00|2003-02-01 00:00:00
monthly_avg_temp_2003_02|climate|2003-02-01 00:00:00|2003-03-01 00:00:00
monthly_avg_temp_2003_03|climate|2003-03-01 00:00:00|2003-04-01 00:00:00
monthly_avg_temp_2003_04|climate|2003-04-01 00:00:00|2003-05-01 00:00:00
monthly_avg_temp_2003_05|climate|2003-05-01 00:00:00|2003-06-01 00:00:00
monthly_avg_temp_2003_06|climate|2003-06-01 00:00:00|2003-07-01 00:00:00
</pre>
<h2 class="Ss" title="Ss" id="Yearly_aggregation"><a class="selflink" href="#Yearly_aggregation">Yearly
  aggregation</a></h2>
<pre>
t.rast.aggregate input=daily_temp output=yearly_avg_temp \
  basename=yearly_avg_temp suffix=gran method=average \
  granularity=&quot;1 years&quot;
t.rast.list yearly_avg_temp
name|mapset|start_time|end_time
yearly_avg_temp_2003|climate|2003-01-01 00:00:00|2004-01-01 00:00:00
yearly_avg_temp_2004|climate|2004-01-01 00:00:00|2005-01-01 00:00:00
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>t.rast.aggregate.ds,</i> <i>t.rast.extract,</i> <i>t.info,</i>
  <i>r.series,</i> <i>g.region,</i> <i>r.mask</i> <i></i>
<div class="Pp"></div>
Temporal data processing Wiki
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
S&#x00F6;ren Gebbert, Th&#x00FC;nen Institute of Climate-Smart Agriculture
<div class="Pp"></div>
<i>Last changed: $Date: 2016-09-19 12:30:10 +0200 (Mon, 19 Sep 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: t.rast.aggregate source code (history)
<div class="Pp"></div>
Main index | Temporal index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
