<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BACKUPNINJA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BACKUPNINJA(1)</td>
    <td class="head-vol">backupninja package</td>
    <td class="head-rtitle">BACKUPNINJA(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
BACKUPNINJA - A lightweight, extensible meta-backup system
<div>&#x00A0;</div>
<i>&quot;a silent flower blossom death strike to lost data.&quot;</i>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>backupninja [ -h ] [ -d ] [ -n ] [ -t ] [ -f filename ] [ --run filename
  ]</b>
<div>&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Backupninja</b> allows you to coordinate system backups by dropping a few
  simple configuration files into /etc/backup.d/. Most programs you might use
  for making backups don't have their own configuration file format. Backupninja
  provides a centralized way to configure and coordinate many different backup
  utilities.
<h1 class="Sh" title="Sh" id="FEATURES"><a class="selflink" href="#FEATURES">FEATURES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">easy to read ini style configuration files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">you can drop in scripts to handle new types of
    backups.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">backup actions can be scheduled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">you can choose when status report emails are mailed to you
      (always, on warning, on error, never).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">console-based wizard (ninjahelper) makes it easy to create
      backup action configuration files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">passwords are never sent via the command line to helper
      programs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">in order to backup a db or sql database, you cannot simply
      copy database files. backupninja helps you safely export the data to a
      format which you can backup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">works with Linux-Vservers.
    <div style="height: 1.00em;">&#x00A0;</div>
    <b>Backup types include:</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">secure, remote, incremental filesytem backup (via
      rdiff-backup). incremental data is compressed. permissions are retained
      even with an unpriviledged backup user.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">basic system and hardware information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">encrypted remote backups (via duplicity).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">safe backup of MySQL, PostgreSQL, OpenLDAP, and subversion
      databases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">burn CD/DVDs or create ISOs. 	
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show summary of options</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d, --debug</b></dt>
  <dd class="It-tag">Run in debug mode, where all log messages are output to the
      current shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --conffile CONF_FILE</b></dt>
  <dd class="It-tag">Use CONF_FILE for the main configuration instead of
      /etc/backupninja.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t, --test</b></dt>
  <dd class="It-tag">Run in test mode, no actions are actually taken.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n, --now</b></dt>
  <dd class="It-tag">Perform actions now, instead of when they might be
      scheduled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--run ACTION_FILE</b></dt>
  <dd class="It-tag">Runs the action configuration ACTION_FILE and exits.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
General settings are configured in /etc/backupninja.conf. In this file you can
  set the log level and change the default directory locations. See
  <b>backupninja.conf(5)</b>.
<div style="height: 1.00em;">&#x00A0;</div>
To preform the actual backup actions, backupninja processes each action
  configuration file in /etc/backup.d according to the file's suffix. See
  <b>backup.d(5)</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE_USAGE"><a class="selflink" href="#EXAMPLE_USAGE">EXAMPLE
  USAGE</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Backupninja can be used to implement whatever backup
    strategy you choose. It is intended, however, to be used like so:</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">First, databases are safely copied or exported to
    /var/backups. Often, you cannot make a file backup of a database while it is
    in use, hence the need to use special tools to make a safe copy or export
    into /var/backups.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Then, vital parts of the file system, including
    /var/backups, are nightly pushed to a remote, off-site, hard disk (using
    rdiff-backup). The local user is root, but the remote user is not
    privileged. Hopefully, the remote filesystem is encrypted.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">In order for this to work (ie for diff-backup to run
    unattended), you must create ssh keys on the source server and copy the
    public key to the remote user's authorized keys file. For example:</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    root@srchost# ssh-keygen -t rsa -b 4096
    <div>&#x00A0;</div>
    root@srchost# ssh-copy-id -i /root/.ssh/id_dsa.pub backup@desthost</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Now, you should be able to ssh from user 'root' on srchost
    to user 'backup' on desthost without specifying a password. When prompted
    for a password by ssh-keygen, just leave it blank by hitting return. The
    &quot;wizard&quot; <b>ninjahelper(1)</b> will walk you through these
    steps.</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>/usr/sbin/backupninja</b> main script
<div>&#x00A0;</div>
<b>/etc/backupninja.conf</b> main configuration file; general options
<div>&#x00A0;</div>
<b>/etc/cron.d/backupninja</b> runs main script hourly
<div>&#x00A0;</div>
<b>/etc/logrotate.d/backupninja</b> rotates backupninja.log
<div>&#x00A0;</div>
<b>/etc/backup.d</b> directory for configuration files
<div>&#x00A0;</div>
<b>/usr/share/backupninja</b> directory for handler scripts
<div>&#x00A0;</div>
<b>/usr/share/doc/backupninja/examples</b> example action configuration files.
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>ninjahelper</b>(1), <b>backupninja.conf</b>(5), <b>backup.d</b>(5),
<div>&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
BACKUPNINJA was written by the riseup.net collective.</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 10, 2005</td>
    <td class="foot-os">riseup</td>
  </tr>
</table>
</body>
</html>
