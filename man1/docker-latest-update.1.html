<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:04:50 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DOCKER(1) JUNE 2014 DOCKER(1)</p>

<p style="margin-top: 1em">NAME <br>
docker-update - Update configuration of one or more
containers</p>

<p style="margin-top: 1em">SYNOPSIS <br>
docker update [--blkio-weight[=[BLKIO-WEIGHT]]]
[--cpu-shares[=0]] [--cpu-period[=0]] [--cpu-quota[=0]]
[--cpu-rt-period[=0]] [--cpu-rt-runtime[=0]]
[--cpuset-cpus[=CPUSET-CPUS]] <br>
[--cpuset-mems[=CPUSET-MEMS]] [--help]
[--kernel-memory[=KERNEL-MEMORY]] [-m|--memory[=MEMORY]]
[--memory-reservation[=MEMORY-RESERVATION]]
[--memory-swap[=MEMORY-SWAP]] <br>
[--restart[=&quot;&quot;]] CONTAINER [CONTAINER...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The docker update command dynamically updates container
configuration. You can use this command to prevent
containers from consuming too many resources from their
Docker host. <br>
With a single command, you can place limits on a single
container or on many. To specify more than one container,
provide space-separated list of container names or IDs.</p>

<p style="margin-top: 1em">With the exception of the
--kernel-memory option, you can specify these options on a
running or a stopped container. On kernel version older than
4.6, You can only update --ker&acirc; <br>
nel-memory on a stopped container or on a running container
with kernel memory initialized.</p>

<p style="margin-top: 1em">OPTIONS <br>
--blkio-weight=0 <br>
Block IO weight (relative weight) accepts a weight value
between 10 and 1000.</p>

<p style="margin-top: 1em">--cpu-shares=0 <br>
CPU shares (relative weight)</p>

<p style="margin-top: 1em">--cpu-period=0 <br>
Limit the CPU CFS (Completely Fair Scheduler) period</p>

<p style="margin-top: 1em">Limit the container&rsquo;s CPU
usage. This flag tell the kernel to restrict the
container&rsquo;s CPU usage to the period you specify.</p>

<p style="margin-top: 1em">--cpu-quota=0 <br>
Limit the CPU CFS (Completely Fair Scheduler) quota</p>

<p style="margin-top: 1em">--cpu-rt-period=0 <br>
Limit the CPU real-time period in microseconds</p>

<p style="margin-top: 1em">Limit the container&rsquo;s Real
Time CPU usage. This flag tell the kernel to restrict the
container&rsquo;s Real Time CPU usage to the period you
specify.</p>

<p style="margin-top: 1em">--cpu-rt-runtime=0 <br>
Limit the CPU real-time runtime in microseconds</p>

<p style="margin-top: 1em">Limit the containers Real Time
CPU usage. This flag tells the kernel to limit the amount of
time in a given CPU period Real Time tasks may consume. Ex:
<br>
Period of 1,000,000us and Runtime of 950,000us means that
this container could consume 95% of available CPU and leave
the remaining 5% to normal priority tasks.</p>

<p style="margin-top: 1em">The sum of all runtimes across
containers cannot exceed the amount allotted to the parent
cgroup.</p>

<p style="margin-top: 1em">--cpuset-cpus=&quot;&quot; <br>
CPUs in which to allow execution (0-3, 0,1)</p>

<p style="margin-top: 1em">--cpuset-mems=&quot;&quot; <br>
Memory nodes(MEMs) in which to allow execution (0-3, 0,1).
Only effective on NUMA systems.</p>

<p style="margin-top: 1em">--help <br>
Print usage statement</p>

<p style="margin-top: 1em">--kernel-memory=&quot;&quot;
<br>
Kernel memory limit (format: &lt;number&gt;[&lt;unit&gt;],
where unit = b, k, m or g)</p>

<p style="margin-top: 1em">Note that on kernel version
older than 4.6, you can not update kernel memory on <br>
a running container if the container is started without
kernel memory initialized, <br>
in this case, it can only be updated after it&rsquo;s
stopped. The new setting takes <br>
effect when the container is started.</p>

<p style="margin-top: 1em">-m, --memory=&quot;&quot; <br>
Memory limit (format: &lt;number&gt;&lt;optional unit&gt;,
where unit = b, k, m or g)</p>

<p style="margin-top: 1em">Note that the memory should be
smaller than the already set swap memory limit. <br>
If you want update a memory limit bigger than the already
set swap memory limit, <br>
you should update swap memory limit at the same time. If you
don&rsquo;t set swap memory <br>
limit on docker create/run but only memory limit, the swap
memory is double <br>
the memory limit.</p>


<p style="margin-top: 1em">--memory-reservation=&quot;&quot;
<br>
Memory soft limit (format: &lt;number&gt;[&lt;unit&gt;],
where unit = b, k, m or g)</p>

<p style="margin-top: 1em">--memory-swap=&quot;&quot; <br>
Total memory limit (memory + swap)</p>

<p style="margin-top: 1em">--restart=&quot;&quot; <br>
Restart policy to apply when a container exits (no,
on-failure[:max-retry], always, unless-stopped).</p>

<p style="margin-top: 1em">EXAMPLES <br>
The following sections illustrate ways to use this
command.</p>

<p style="margin-top: 1em">Update a container&rsquo;s
cpu-shares <br>
To limit a container&rsquo;s cpu-shares to 512, first
identify the container name or ID. You can use docker ps to
find these values. You can also use the ID returned from the
docker <br>
run command. Then, do the following:</p>

<p style="margin-top: 1em">$ docker update --cpu-shares 512
abebf7571666</p>

<p style="margin-top: 1em">Update a container with
cpu-shares and memory <br>
To update multiple resource configurations for multiple
containers:</p>

<p style="margin-top: 1em">$ docker update --cpu-shares 512
-m 300M abebf7571666 hopeful_morse</p>

<p style="margin-top: 1em">Update a container&rsquo;s
kernel memory constraints <br>
You can update a container&rsquo;s kernel memory limit using
the --kernel-memory option. On kernel version older than
4.6, this option can be updated on a running container only
if the <br>
container was started with --kernel-memory. If the container
was started without --kernel-memory you need to stop the
container before updating kernel memory.</p>

<p style="margin-top: 1em">For example, if you started a
container with this command:</p>

<p style="margin-top: 1em">$ docker run -dit --name test
--kernel-memory 50M ubuntu bash</p>

<p style="margin-top: 1em">You can update kernel memory
while the container is running:</p>

<p style="margin-top: 1em">$ docker update --kernel-memory
80M test</p>

<p style="margin-top: 1em">If you started a container
without kernel memory initialized:</p>

<p style="margin-top: 1em">$ docker run -dit --name test2
--memory 300M ubuntu bash</p>

<p style="margin-top: 1em">Update kernel memory of running
container test2 will fail. You need to stop the container
before updating the --kernel-memory setting. The next time
you start it, the container <br>
uses the new value.</p>

<p style="margin-top: 1em">Kernel version newer than
(include) 4.6 does not have this limitation, you can use
--kernel-memory the same way as other options.</p>

<p style="margin-top: 1em">Update a container&rsquo;s
restart policy <br>
You can change a container&rsquo;s restart policy on a
running container. The new restart policy takes effect
instantly after you run docker update on a container.</p>

<p style="margin-top: 1em">To update restart policy for one
or more containers:</p>

<p style="margin-top: 1em">$ docker update
--restart=on-failure:3 abebf7571666 hopeful_morse</p>

<p style="margin-top: 1em">Note that if the container is
started with &quot;--rm&quot; flag, you cannot update the
restart policy for it. The AutoRemove and RestartPolicy are
mutually exclusive for the container.</p>

<p style="margin-top: 1em">Docker Community Docker User
Manuals DOCKER(1)</p>
<hr>
</body>
</html>
