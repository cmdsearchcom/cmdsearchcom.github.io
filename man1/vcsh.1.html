<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:42:03 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VCSH(1) VCSH(1)</p>

<p style="margin-top: 1em">NAME <br>
vcsh - Version Control System for $HOME - multiple Git
repositories in $HOME</p>

<p style="margin-top: 1em">SYNOPSIS <br>
vcsh [options] command</p>

<p style="margin-top: 1em">vcsh clone [-b branch] url
[repo]</p>

<p style="margin-top: 1em">vcsh delete repo</p>

<p style="margin-top: 1em">vcsh enter repo</p>

<p style="margin-top: 1em">vcsh foreach [-g] git
command</p>

<p style="margin-top: 1em">vcsh help</p>

<p style="margin-top: 1em">vcsh init repo</p>

<p style="margin-top: 1em">vcsh list</p>

<p style="margin-top: 1em">vcsh list-tracked [repo]</p>

<p style="margin-top: 1em">vcsh list-untracked [-a] [-r]
[repo]</p>

<p style="margin-top: 1em">vcsh pull</p>

<p style="margin-top: 1em">vcsh push</p>

<p style="margin-top: 1em">vcsh rename repo newname</p>

<p style="margin-top: 1em">vcsh run repo shell command</p>

<p style="margin-top: 1em">vcsh status [repo]</p>

<p style="margin-top: 1em">vcsh upgrade repo</p>

<p style="margin-top: 1em">vcsh version</p>

<p style="margin-top: 1em">vcsh which substring</p>

<p style="margin-top: 1em">vcsh write-gitignore repo</p>

<p style="margin-top: 1em">vcsh repo git command</p>

<p style="margin-top: 1em">vcsh repo</p>

<p style="margin-top: 1em">DESCRIPTION <br>
vcsh allows you to have several git(1) repositories, all
maintaining their working trees in $HOME without clobbering
each other. That, in turn, means you can have one repository
<br>
per config set (zsh, vim, ssh, etc), picking and choosing
which configs you want to use on which machine.</p>

<p style="margin-top: 1em">vcsh is using a technique called
fake bare Git repositories, keeping $GIT_DIR in a different
directory from $GIT_WORK_TREE which is pointed to $HOME.</p>

<p style="margin-top: 1em">The use of symlinks is not
needed in this setup, making for a cleaner setup.</p>

<p style="margin-top: 1em">vcsh was designed with mr(1) in
mind so you might want to install it alongside vcsh. That
being said, you can easily use vcsh without mr if you
prefer.</p>

<p style="margin-top: 1em">A sample configuration for vcsh
and mr can be found at
https://github.com/RichiH/vcsh_mr_template and used with
vcsh clone https://github.com/RichiH/vcsh_mr_template
mr.</p>

<p style="margin-top: 1em">Please note that you can always
use a path instead of a name for repo. This is needed to
support mr and other scripts properly and of no concern to
an interactive user.</p>

<p style="margin-top: 1em">OPTIONS <br>
-c Source file prior to other configuration files</p>

<p style="margin-top: 1em">-d Enable debug mode</p>

<p style="margin-top: 1em">-v Enable verbose mode</p>

<p style="margin-top: 1em">COMMANDS <br>
clone Clone an existing repository.</p>

<p style="margin-top: 1em">If you need to clone a bundle of
repositories, look into the post-clone-retired hook.</p>

<p style="margin-top: 1em">You can also use a single git
repository with several branches. Use the -b option to
specify a branch at clone time, the default is master.</p>

<p style="margin-top: 1em">commit Commit in all
repositories</p>

<p style="margin-top: 1em">delete Delete an existing
repository.</p>

<p style="margin-top: 1em">enter Enter repository; spawn
new $SHELL.</p>

<p style="margin-top: 1em">foreach <br>
Execute git command for every vcsh repository.</p>

<p style="margin-top: 1em">-g: Execute in general
context.</p>

<p style="margin-top: 1em">help Display help.</p>

<p style="margin-top: 1em">init Initialize an empty
repository.</p>

<p style="margin-top: 1em">list List all local vcsh
repositories.</p>

<p style="margin-top: 1em">list-tracked <br>
List all files tracked by vcsh.</p>

<p style="margin-top: 1em">If you want to list files
tracked by a specific repository, simply append the
repository&Acirc;&acute;s name last.</p>

<p style="margin-top: 1em">list-tracked-by <br>
List files tracked by a repository.</p>

<p style="margin-top: 1em">This is a legacy command; you
should use list-tracked &lt;repo&gt; instead.</p>

<p style="margin-top: 1em">list-untracked <br>
List all files NOT tracked by vcsh.</p>

<p style="margin-top: 1em">-a: Show all files. By default,
the git ls-files --exclude-standard is called.</p>

<p style="margin-top: 1em">-r: Recursive mode. By default,
the file list is shallow and stops at directory levels where
possible.</p>

<p style="margin-top: 1em">$repo: List files not tracked by
this specific repository.</p>

<p style="margin-top: 1em">pull Pull from all vcsh
remotes.</p>

<p style="margin-top: 1em">push Push to all vcsh
remotes.</p>

<p style="margin-top: 1em">rename Rename a repository.</p>

<p style="margin-top: 1em">run Run command with $GIT_DIR
and $GIT_WORK_TREE set. Allows you to run any and all
commands without any restrictions. Use with care.</p>

<p style="margin-top: 1em">Please note that there is a
somewhat magic feature for run. Instead of repo it accepts
path, as well. Anything that has a slash in it will be
assumed to be a path. vcsh <br>
run will then operate on this directory instead of the one
normally generated from the repository&Acirc;&acute;s name.
This is needed to support mr and other scripts properly and
of no <br>
concern to an interactive user.</p>

<p style="margin-top: 1em">status Show statuses of all/one
vcsh repositories.</p>

<p style="margin-top: 1em">upgrade <br>
Upgrade repository to currently recommended settings.</p>

<p style="margin-top: 1em">version <br>
Print version information.</p>

<p style="margin-top: 1em">which substring <br>
Find substring in name of any tracked file.</p>

<p style="margin-top: 1em">write-gitignore <br>
Write .gitignore.d/repo via git ls-files.</p>

<p style="margin-top: 1em">repo gitcommand <br>
Shortcut to run vcsh on a repo. Will prepend git to
command.</p>

<p style="margin-top: 1em">repo Shortcut to run vcsh enter
&lt;repo&gt;.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
As noted earlier, vcsh will set $GIT_DIR and $GIT_WORK_TREE
to the appropriate values for fake bare Git
repositories.</p>

<p style="margin-top: 1em">CONFIG <br>
There are several ways to turn the various knobs on vcsh. In
order of ascending precedence, they are:</p>

<p style="margin-top: 1em">&Acirc;&middot; VARIABLE=foo
vcsh</p>

<p style="margin-top: 1em">&Acirc;&middot;
&lt;/etc/vcsh/config&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot;
&lt;$XDG_CONFIG_HOME/vcsh/config&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; vcsh -c
&lt;file&gt;</p>

<p style="margin-top: 1em">Please note that those files are
sourced. Any and all commands will be executed in the
context of your shell.</p>

<p style="margin-top: 1em">Interesting knobs you can
turn:</p>

<p style="margin-top: 1em">$VCSH_GITATTRIBUTES <br>
Can be none, or any other value.</p>

<p style="margin-top: 1em">none will not maintain Git
attributes in a special location.</p>

<p style="margin-top: 1em">If set to any other value,
repo-specific gitattributes files will be maintained.</p>

<p style="margin-top: 1em">Defaults to none.</p>

<p style="margin-top: 1em">$VCSH_GITIGNORE <br>
Can be exact, none, or recursive.</p>

<p style="margin-top: 1em">exact will seed the
repo-specific ignore file with all file and directory names
which git ls-files returns.</p>

<p style="margin-top: 1em">none will not write any ignore
file.</p>

<p style="margin-top: 1em">recursive will descend through
all directories recursively additionally to the above.</p>

<p style="margin-top: 1em">Defaults to exact.</p>

<p style="margin-top: 1em">$VCSH_VCSH_WORKTREE <br>
Can be absolute, or relative.</p>

<p style="margin-top: 1em">absolute will set an absolute
path; defaulting to $HOME.</p>

<p style="margin-top: 1em">relative will set a path
relative to $GIT_DIR.</p>

<p style="margin-top: 1em">Defaults to absolute.</p>

<p style="margin-top: 1em">Less interesting knobs you could
turn:</p>

<p style="margin-top: 1em">$VCSH_DEBUG <br>
Enter debug mode.</p>

<p style="margin-top: 1em">$XDG_CONFIG_HOME <br>
As specified in the &Acirc;&acute;XDG Base Directory
Specification&Acirc;&acute;, see
http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</p>

<p style="margin-top: 1em">Defaults to
&lt;$HOME/.config&gt;.</p>

<p style="margin-top: 1em">$VCSH_REPO_D <br>
The directory where repositories are read from and
stored.</p>

<p style="margin-top: 1em">Defaults to
&lt;$XDG_CONFIG_HOME/vcsh/repo.d&gt;.</p>

<p style="margin-top: 1em">$VCSH_HOOK_D <br>
The directory where hooks are read from.</p>

<p style="margin-top: 1em">Defaults to
&lt;$XDG_CONFIG_HOME/vcsh/hooks-enabled&gt;.</p>

<p style="margin-top: 1em">$VCSH_BASE <br>
The directory where repositories are checked out to.</p>

<p style="margin-top: 1em">Defaults to $HOME.</p>

<p style="margin-top: 1em">HOOK SYSTEM <br>
vcsh provides a hook system. Hook scripts must be executable
and should be placed in
&lt;$XDG_CONFIG_HOME/vcsh/hooks-available&gt;. From there,
they can be soft-linked into &lt;$XDG_CON&acirc; <br>
FIG_HOME/vcsh/hooks-enabled&gt;; vcsh will only execute
hooks that are in this directory.</p>

<p style="margin-top: 1em">Hooks follow a simple format.
pre-run will be run before anything is run. If you want to
have more than one script for a certain hook, just append
any kind of string to order <br>
them. A system of pre-run, &lt;pre-run.10&gt;,
&lt;pre-run.20&gt; etc is suggested; other options would be
pre-run-10 or &lt;pre-run.sh&gt;. A dot after the hook name
is optional.</p>

<p style="margin-top: 1em">If you want to create hooks for
a specific vcsh repository, simply prepend the
repository&Acirc;&acute;s name, followed by a dot, i.e.
&lt;zsh.pre-run&gt;. Otherwise, the same rules as above
apply. <br>
The dot between the repository&Acirc;&acute;s name and the
hook is mandatory, though.</p>

<p style="margin-top: 1em">Available hooks are pre-clone,
post-clone, post-clone-retired, pre-command, post-command,
pre-enter, post-enter, pre-init, post-init, pre-pull,
post-pull, pre-push, post-push, <br>
pre-run, post-run, pre-upgrade, and post-upgrade. If you
need more, vcsh is trivial to patch, but please let upstream
know so we can ship them by default.</p>

<p style="margin-top: 1em">OVERLAY SYSTEM <br>
vcsh also provides an overlay system. Similar to hooks, the
recommended locations are
&lt;$XDG_CONFIG_HOME/vcsh/overlays-available&gt; and
&lt;$XDG_CONFIG_HOME/vcsh/overlays-enabled&gt;.</p>

<p style="margin-top: 1em">Overlays follow the same rules
as hooks and you are free to overwrite any and all
functions. Same as hooks, you can use global or
repository-specific overlays by using either <br>
&lt;$VCSH_OVERLAY_D/$VCSH_COMMAND&gt; or
&lt;$VCSH_OVERLAY_D/$VCSH_REPO_NAME.$VCSH_COMMAND&gt;.</p>

<p style="margin-top: 1em">Please note that nothing stops
you from, e.g. overwriting status() in
&lt;$VCSH_OVERLAY_D/commit&gt;. As the overlays will be
sourced and you are replacing arbitrary functions, any and
<br>
all features may stop working, or you may even lose
data.</p>

<p style="margin-top: 1em">You have been warned.</p>

<p style="margin-top: 1em">DETAILED HOWTO AND FURTHER
READING <br>
Manpages are often short and sometimes useless to glean best
practices from. While the author tried to avoid this in this
case, manpages can not cover detailed howtos.</p>

<p style="margin-top: 1em">This software also comes with a
file called &lt;README.md&gt;. It contains various
approaches to setting up and using vcsh. You can view the
file it as plain text or render it into <br>
various other formats via Markdown.</p>

<p style="margin-top: 1em">On Debian-based systems, this
file can be found in &lt;/usr/share/doc/vcsh&gt;.</p>

<p style="margin-top: 1em">SECURITY CONSIDERATIONS <br>
vcsh allows you to execute arbitrary commands via vcsh run.
For example, adding a sudo(8) rule for vcsh would be pretty
stupid.</p>

<p style="margin-top: 1em">Additionally, vcsh will source,
i.e. execute, all files listed in CONFIG. You can put any
and all commands into these config files and they will be
executed.</p>

<p style="margin-top: 1em">BUGS <br>
None are known at this time, but reports and/or patches are
more than welcome.</p>

<p style="margin-top: 1em">INTEROPERABILITY <br>
If you rely on git submodule use git 1.7.12 or later.
Earlier versions do not clean internal variables properly
before descending into submodules, resulting in unhappy end
users.</p>

<p style="margin-top: 1em">HISTORY <br>
Like most people, the author initially made do with a single
repository for all config files, all of which were
soft-linked into $HOME.</p>

<p style="margin-top: 1em">Martin F. Krafft aka madduck
came up with the concept of fake bare Git repositories.</p>

<p style="margin-top: 1em">vcsh was initally written by
madduck. This version is a re-implementation from scratch
with a lot more features. madduck graciously agreed to let
the author take over the name.</p>

<p style="margin-top: 1em">AUTHOR <br>
This manpage and vcsh itself were written by Richard
&quot;RichiH&quot; Hartmann.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright 2011-2015 Richard Hartmann richih@debian.org</p>

<p style="margin-top: 1em">Licensed under the GNU GPL
version 2 or higher.</p>


<p style="margin-top: 1em">https://github.com/RichiH/vcsh</p>

<p style="margin-top: 1em">SEE ALSO <br>
git(1), mr(1)</p>

<p style="margin-top: 1em">December 2015 VCSH(1)</p>
<hr>
</body>
</html>
