<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VCSH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VCSH(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">VCSH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>vcsh</b> - Version Control System for $HOME - multiple Git repositories in
  $HOME
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>vcsh</b> [<i>options</i>] <i>command</i>
<div class="Pp"></div>
<b>vcsh</b> clone [-b <i>branch</i>] <i>url</i> [<i>repo</i>]
<div class="Pp"></div>
<b>vcsh</b> delete <i>repo</i>
<div class="Pp"></div>
<b>vcsh</b> enter <i>repo</i>
<div class="Pp"></div>
<b>vcsh</b> foreach [-g] <i>git command</i>
<div class="Pp"></div>
<b>vcsh</b> help
<div class="Pp"></div>
<b>vcsh</b> init <i>repo</i>
<div class="Pp"></div>
<b>vcsh</b> list
<div class="Pp"></div>
<b>vcsh</b> list-tracked [<i>repo</i>]
<div class="Pp"></div>
<b>vcsh</b> list-untracked [<i>-a</i>] [<i>-r</i>] [<i>repo</i>]
<div class="Pp"></div>
<b>vcsh</b> pull
<div class="Pp"></div>
<b>vcsh</b> push
<div class="Pp"></div>
<b>vcsh</b> rename <i>repo</i> <i>newname</i>
<div class="Pp"></div>
<b>vcsh</b> run <i>repo</i> <i>shell command</i>
<div class="Pp"></div>
<b>vcsh</b> status [<i>repo</i>]
<div class="Pp"></div>
<b>vcsh</b> upgrade <i>repo</i>
<div class="Pp"></div>
<b>vcsh</b> version
<div class="Pp"></div>
<b>vcsh</b> which <i>substring</i>
<div class="Pp"></div>
<b>vcsh</b> write-gitignore <i>repo</i>
<div class="Pp"></div>
<b>vcsh</b> <i>repo</i> <i>git command</i>
<div class="Pp"></div>
<b>vcsh</b> <i>repo</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>vcsh</b> allows you to have several <b>git</b>(1) repositories, all
  maintaining their working trees in $HOME without clobbering each other. That,
  in turn, means you can have one repository per config set (zsh, vim, ssh,
  etc), picking and choosing which configs you want to use on which machine.
<div class="Pp"></div>
<b>vcsh</b> is using a technique called fake bare Git repositories, keeping
  <i>$GIT_DIR</i> in a different directory from <i>$GIT_WORK_TREE</i> which is
  pointed to <i>$HOME</i>.
<div class="Pp"></div>
The use of symlinks is not needed in this setup, making for a cleaner setup.
<div class="Pp"></div>
<b>vcsh</b> was designed with <b>mr</b>(1) in mind so you might want to install
  it alongside vcsh. That being said, you can easily use <b>vcsh</b> without
  <b>mr</b> if you prefer.
<div class="Pp"></div>
A sample configuration for <b>vcsh</b> and <b>mr</b> can be found at
  <i>https://github.com/RichiH/vcsh_mr_template</i> and used with <b>vcsh clone
  https://github.com/RichiH/vcsh_mr_template mr</b>.
<div class="Pp"></div>
Please note that you can always use a path instead of a name for <i>repo</i>.
  This is needed to support mr and other scripts properly and of no concern to
  an interactive user.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-c</dt>
  <dd class="It-tag">Source <i>file</i> prior to other configuration files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d</dt>
  <dd class="It-tag">Enable debug mode</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-v</dt>
  <dd class="It-tag">Enable verbose mode</dd>
</dl>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">clone</dt>
  <dd class="It-tag">Clone an existing repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If you need to clone a bundle of repositories, look into
      the <b>post-clone-retired</b> hook.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">You can also use a single git repository with several
      branches. Use the <b>-b</b> option to specify a branch at clone time, the
      default is <b>master</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">commit</dt>
  <dd class="It-tag">Commit in all repositories</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">delete</dt>
  <dd class="It-tag">Delete an existing repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">enter</dt>
  <dd class="It-tag">Enter repository; spawn new <i>$SHELL</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">foreach</dt>
  <dd class="It-tag">Execute git command for every vcsh repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>-g</b>: Execute in general context.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">help</dt>
  <dd class="It-tag">Display help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">init</dt>
  <dd class="It-tag">Initialize an empty repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">list</dt>
  <dd class="It-tag">List all local vcsh repositories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">list-tracked</dt>
  <dd class="It-tag">List all files tracked by vcsh.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If you want to list files tracked by a specific repository,
      simply append the repository&#x00B4;s name last.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">list-tracked-by</dt>
  <dd class="It-tag">List files tracked by a repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This is a legacy command; you should use <b>list-tracked
      &lt;repo&gt;</b> instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">list-untracked</dt>
  <dd class="It-tag">List all files NOT tracked by vcsh.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>-a</b>: Show all files. By default, the <b>git ls-files
      --exclude-standard</b> is called.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>-r</b>: Recursive mode. By default, the file list is
      shallow and stops at directory levels where possible.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>$repo</b>: List files not tracked by this specific
      repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">pull</dt>
  <dd class="It-tag">Pull from all vcsh remotes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">push</dt>
  <dd class="It-tag">Push to all vcsh remotes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">rename</dt>
  <dd class="It-tag">Rename a repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">run</dt>
  <dd class="It-tag">Run command with <i>$GIT_DIR</i> and <i>$GIT_WORK_TREE</i>
      set. Allows you to run any and all commands without any restrictions. Use
      with care.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Please note that there is a somewhat magic feature for run.
      Instead of <i>repo</i> it accepts <i>path</i>, as well. Anything that has
      a slash in it will be assumed to be a path. <b>vcsh run</b> will then
      operate on this directory instead of the one normally generated from the
      repository&#x00B4;s name. This is needed to support mr and other scripts
      properly and of no concern to an interactive user.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">status</dt>
  <dd class="It-tag">Show statuses of all/one vcsh repositories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">upgrade</dt>
  <dd class="It-tag">Upgrade repository to currently recommended settings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">version</dt>
  <dd class="It-tag">Print version information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">which <i>substring</i></dt>
  <dd class="It-tag">Find <i>substring</i> in name of any tracked file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">write-gitignore</dt>
  <dd class="It-tag">Write .gitignore.d/<i>repo</i> via <b>git
    ls-files</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>repo</i> <i>gitcommand</i></dt>
  <dd class="It-tag">Shortcut to run <b>vcsh</b> on a repo. Will prepend
      <b>git</b> to <i>command</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>repo</i></dt>
  <dd class="It-tag">Shortcut to run <b>vcsh enter &lt;repo&gt;</b>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
As noted earlier, <b>vcsh</b> will set <i>$GIT_DIR</i> and <i>$GIT_WORK_TREE</i>
  to the appropriate values for fake bare Git repositories.
<h1 class="Sh" title="Sh" id="CONFIG"><a class="selflink" href="#CONFIG">CONFIG</a></h1>
There are several ways to turn the various knobs on <b>vcsh</b>. In order of
  ascending precedence, they are:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>VARIABLE=foo vcsh</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&lt;/etc/vcsh/config&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&lt;$XDG_CONFIG_HOME/vcsh/config&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>vcsh -c &lt;file&gt;</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Please note that those files are sourced. Any and all commands will be executed
  in the context of your shell.
<div class="Pp"></div>
Interesting knobs you can turn:
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_GITATTRIBUTES</i></dt>
  <dd class="It-tag">Can be <i>none</i>, or any other value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>none</i> will not maintain Git attributes in a special
      location.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If set to any other value, repo-specific gitattributes
      files will be maintained.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to <i>none</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_GITIGNORE</i></dt>
  <dd class="It-tag">Can be <i>exact</i>, <i>none</i>, or <i>recursive</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>exact</i> will seed the repo-specific ignore file with
      all file and directory names which <b>git ls-files</b> returns.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>none</i> will not write any ignore file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>recursive</i> will descend through all directories
      recursively additionally to the above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to <i>exact</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_VCSH_WORKTREE</i></dt>
  <dd class="It-tag">Can be <i>absolute</i>, or <i>relative</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>absolute</i> will set an absolute path; defaulting to
      <i>$HOME</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>relative</i> will set a path relative to
      <i>$GIT_DIR</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to <i>absolute</i>.</dd>
</dl>
<div class="Pp"></div>
Less interesting knobs you could turn:
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_DEBUG</i></dt>
  <dd class="It-tag">Enter debug mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$XDG_CONFIG_HOME</i></dt>
  <dd class="It-tag">As specified in the &#x00B4;XDG Base Directory
      Specification&#x00B4;, see
      <i>http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to &lt;$HOME/.config&gt;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_REPO_D</i></dt>
  <dd class="It-tag">The directory where repositories are read from and
    stored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to &lt;$XDG_CONFIG_HOME/vcsh/repo.d&gt;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_HOOK_D</i></dt>
  <dd class="It-tag">The directory where hooks are read from.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to
    &lt;$XDG_CONFIG_HOME/vcsh/hooks-enabled&gt;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>$VCSH_BASE</i></dt>
  <dd class="It-tag">The directory where repositories are checked out to.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Defaults to <i>$HOME</i>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="HOOK_SYSTEM"><a class="selflink" href="#HOOK_SYSTEM">HOOK
  SYSTEM</a></h1>
<b>vcsh</b> provides a hook system. Hook scripts must be executable and should
  be placed in &lt;$XDG_CONFIG_HOME/vcsh/hooks-available&gt;. From there, they
  can be soft-linked into &lt;$XDG_CONFIG_HOME/vcsh/hooks-enabled&gt;;
  <b>vcsh</b> will only execute hooks that are in this directory.
<div class="Pp"></div>
Hooks follow a simple format. <i>pre-run</i> will be run before anything is run.
  If you want to have more than one script for a certain hook, just append any
  kind of string to order them. A system of <i>pre-run</i>, &lt;pre-run.10&gt;,
  &lt;pre-run.20&gt; etc is suggested; other options would be <i>pre-run-10</i>
  or &lt;pre-run.sh&gt;. A dot after the hook name is optional.
<div class="Pp"></div>
If you want to create hooks for a specific <i>vcsh</i> repository, simply
  prepend the repository&#x00B4;s name, followed by a dot, i.e.
  &lt;zsh.pre-run&gt;. Otherwise, the same rules as above apply. The dot between
  the repository&#x00B4;s name and the hook is mandatory, though.
<div class="Pp"></div>
Available hooks are <i>pre-clone</i>, <i>post-clone</i>,
  <i>post-clone-retired</i>, <i>pre-command</i>, <i>post-command</i>,
  <i>pre-enter</i>, <i>post-enter</i>, <i>pre-init</i>, <i>post-init</i>,
  <i>pre-pull</i>, <i>post-pull</i>, <i>pre-push</i>, <i>post-push</i>,
  <i>pre-run</i>, <i>post-run</i>, <i>pre-upgrade</i>, and <i>post-upgrade</i>.
  If you need more, vcsh is trivial to patch, but please let upstream know so we
  can ship them by default.
<h1 class="Sh" title="Sh" id="OVERLAY_SYSTEM"><a class="selflink" href="#OVERLAY_SYSTEM">OVERLAY
  SYSTEM</a></h1>
<b>vcsh</b> also provides an overlay system. Similar to hooks, the recommended
  locations are &lt;$XDG_CONFIG_HOME/vcsh/overlays-available&gt; and
  &lt;$XDG_CONFIG_HOME/vcsh/overlays-enabled&gt;.
<div class="Pp"></div>
Overlays follow the same rules as hooks and you are free to overwrite any and
  all functions. Same as hooks, you can use global or repository-specific
  overlays by using either &lt;$VCSH_OVERLAY_D/$VCSH_COMMAND&gt; or
  &lt;$VCSH_OVERLAY_D/$VCSH_REPO_NAME.$VCSH_COMMAND&gt;.
<div class="Pp"></div>
Please note that nothing stops you from, e.g. overwriting <b>status()</b> in
  &lt;$VCSH_OVERLAY_D/commit&gt;. As the overlays will be sourced and you are
  replacing arbitrary functions, any and all features may stop working, or you
  may even lose data.
<div class="Pp"></div>
You have been warned.
<h1 class="Sh" title="Sh" id="DETAILED_HOWTO_AND_FURTHER_READING"><a class="selflink" href="#DETAILED_HOWTO_AND_FURTHER_READING">DETAILED
  HOWTO AND FURTHER READING</a></h1>
Manpages are often short and sometimes useless to glean best practices from.
  While the author tried to avoid this in this case, manpages can not cover
  detailed howtos.
<div class="Pp"></div>
This software also comes with a file called &lt;README.md&gt;. It contains
  various approaches to setting up and using vcsh. You can view the file it as
  plain text or render it into various other formats via Markdown.
<div class="Pp"></div>
On Debian-based systems, this file can be found in &lt;/usr/share/doc/vcsh&gt;.
<h1 class="Sh" title="Sh" id="SECURITY_CONSIDERATIONS"><a class="selflink" href="#SECURITY_CONSIDERATIONS">SECURITY
  CONSIDERATIONS</a></h1>
<b>vcsh</b> allows you to execute arbitrary commands via <b>vcsh run</b>. For
  example, adding a <b>sudo</b>(8) rule for <b>vcsh</b> would be pretty stupid.
<div class="Pp"></div>
Additionally, vcsh will source, i.e. execute, all files listed in <i>CONFIG</i>.
  You can put any and all commands into these config files and they will be
  executed.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
None are known at this time, but reports and/or patches are more than welcome.
<h1 class="Sh" title="Sh" id="INTEROPERABILITY"><a class="selflink" href="#INTEROPERABILITY">INTEROPERABILITY</a></h1>
If you rely on <b>git submodule</b> use <b>git</b> 1.7.12 or later. Earlier
  versions do not clean internal variables properly before descending into
  submodules, resulting in unhappy end users.
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
Like most people, the author initially made do with a single repository for all
  config files, all of which were soft-linked into <i>$HOME</i>.
<div class="Pp"></div>
Martin F. Krafft aka madduck came up with the concept of fake bare Git
  repositories.
<div class="Pp"></div>
vcsh was initally written by madduck. This version is a re-implementation from
  scratch with a lot more features. madduck graciously agreed to let the author
  take over the name.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manpage and <b>vcsh</b> itself were written by Richard &quot;RichiH&quot;
  Hartmann.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2011-2015 Richard Hartmann <i>richih@debian.org</i>
<div class="Pp"></div>
Licensed under the GNU GPL version 2 or higher.
<div class="Pp"></div>
https://github.com/RichiH/vcsh
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>git</b>(1), <b>mr</b>(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date">December 2015</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
