<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EXPECT-LITE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EXPECT-LITE(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">EXPECT-LITE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
expect-lite - a quick and easy command line automation tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>expect-lite</b> [ <i>-vv</i>] <i>-c &lt;script&gt;</i> [<i>-r
  &lt;host&gt;</i>] [ <i>CONSTANT=value</i>] [<i>*DIRECTIVE</i>] [-h|--help]
<div>&#x00A0;</div>
or
<div>&#x00A0;</div>
<b>script.elt</b> [ <i>-vv</i>] [<i>r=&lt;host&gt;</i>] [<i>CONSTANT=value</i>]
  [ <i>*DIRECTIVE</i>] [-h|--help]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Written in Expect, it is designed to directly map an interactive terminal
  session into an automation script. expect-lite scripts use punctuation
  character(s) at the beginning of each line to indicate the action. Basic
  expect-lite scripts can be created by simply cutting and pasting text from a
  terminal window into a script, and adding <b>&gt;</b> <b>&lt;</b> characters.
  Knowledge of Expect is not required.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
usage: expect-lite remote_host=&lt;remote_host_IP&gt;
  cmd_file=&lt;command_file&gt; [user_dir=&lt;user_dir&gt;] [const1=value1]
  [*DIRECTIVE]
<div class="Pp"></div>
or short form: expect-lite r=&lt;remote_host_IP&gt; c=&lt;command_file&gt;
  [d=&lt;user_dir&gt;] [const1=value1] [*DIRECTIVE]
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">eg. ./expect-lite r=host-008 c=pm_alt.elt d=/local/sw
      myvar=myvalue *NOCOLOR</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">additional login options: user_name=&lt;username&gt;
    user_password=&lt;password&gt;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">eg. ./expect-lite r=host-008 c=pm_alt.elt u=superuser
      p=mysecret</dd>
</dl>
<div class="Pp"></div>
additional debug options: <b>-v</b>|<b>-vv</b>|<b>--verbose</b>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">prints warnings, and infos (i.e. conditionals, dynamic var
      assignments)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-vv</b>|<b>--verbose</b></dt>
  <dd class="It-tag">prints warnings and debug (i.e. expect match info)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">eg. ./expect-lite -v r=host-008 c=pm_alt.elt</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
user defined help options: <b>-h</b>|<b>--help</b>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">displays user defined help text (demarcated by ;;;) and
      variables defined in script which can be overridden by constants on the
      command line</dd>
</dl>
<h1 class="Sh" title="Sh" id="COMMAND_SYNOPSIS"><a class="selflink" href="#COMMAND_SYNOPSIS">COMMAND
  SYNOPSIS</a></h1>
This is just a brief synopsis of <i>expect-lite</i> commands to serve as a
  reminder to those who already know <i>expect-lite</i>; other documentation
  (such as the html document) must be consulted for more complete descriptions.
<h2 class="Ss" title="Ss" id="Special_Characters"><a class="selflink" href="#Special_Characters">Special
  Characters</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;</dt>
  <dd class="It-tag">wait for a prompt, then send string to the remote host</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;&gt;</dt>
  <dd class="It-tag">send string to remote host, without waiting for prompt
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;</dt>
  <dd class="It-tag">string/regex MUST be received from the remote host in the
      allotted timeout or the script will FAIL!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;&lt; 	</dt>
  <dd class="It-tag">literal string MUST be received (similar to '&lt;' without
      regex evaluation)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-&lt;</dt>
  <dd class="It-tag">NOT expect, if string/regex IS received from the remote
      host the script will FAIL!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">~&lt;</dt>
  <dd class="It-tag">fuzzy expect, expect an approximate number (decimal or
    hex)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">#</dt>
  <dd class="It-tag">used to indicate comment lines, and have no effect</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">;</dt>
  <dd class="It-tag">are also used to indicate comment lines, but are printed to
      stdout (for logging)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">;&lt;colour&gt; comment</dt>
  <dd class="It-tag">add custom colour comment lines, colour may be blue,
      ltblue, gray, ltgray, cyan, black, pink, purple, red, green, yellow</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">;;</dt>
  <dd class="It-tag">similar to above, but no extra newlines are printed (useful
      for printing script help)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">;;;</dt>
  <dd class="It-tag">marks beginning and ending of a block of help text. Help
      Text is user defined help for a script and is printed when -h or --help is
      on the command line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">@num</dt>
  <dd class="It-tag">changes the expect timeout to num of seconds</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">:num</dt>
  <dd class="It-tag">sleeps for num seconds. Mili-seconds also supported e.g.
      :1.005 is 1005 mili-seconds</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$var=</dt>
  <dd class="It-tag">static variable assignment at script invocation. Variable
      names limited to letters, numbers, and underscore</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">+$var=</dt>
  <dd class="It-tag">dynamic variable assignment</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">+$var</dt>
  <dd class="It-tag">increment value of $var by 1 decimal</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-$var</dt>
  <dd class="It-tag">decrement value of $var by 1 decimal</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">=$var</dt>
  <dd class="It-tag">math functions, perform bitwise and arithmetic operations:
      &lt;&lt; &gt;&gt; &amp; | ^ * / % + - (see math functions)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">=$str</dt>
  <dd class="It-tag">string math functions, if $str is a string, perform string
      operations: //search/replace/ + - (see string math functions in
      documentation)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">!</dt>
  <dd class="It-tag">indicates an embedded expect line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">?</dt>
  <dd class="It-tag">c-style if/then/else in the format
      ?cond?action::else_action. code block are also supported in the action and
      else_action statements. e.g.
    <div>&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 10.00ex;">?if $i &lt; $n ? [
<div>&#x00A0;</div>
<br/>
 &gt;send string
<div>&#x00A0;</div>
<br/>
 &lt;expect string
<div>&#x00A0;</div>
]::[
<br/>
 &gt;send else string
<div>&#x00A0;</div>
<br/>
 &lt;expect else string
<div>&#x00A0;</div>
]</div>
<dl class="Bl-tag">
  <dt class="It-tag">[</dt>
  <dd class="It-tag">While Loop, using code blocks e.g.
    <div>&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 10.00ex;">[ $i &lt; $n
<div>&#x00A0;</div>
<br/>
 +$i
<div>&#x00A0;</div>
]</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Foreach Loop, using code blocks, each iteration $item is
      assigned the next item in the list. List <b>must</b> be space delimited
      e.g.
    <div>&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 10.00ex;">$thelist=ab cd ef
<div>&#x00A0;</div>
[ $item=$thelist
<div>&#x00A0;</div>
<br/>
 &gt;echo $item
<div>&#x00A0;</div>
]</div>
<dl class="Bl-tag">
  <dt class="It-tag">%</dt>
  <dd class="It-tag">label - used for jumping to labels</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">~<i>filename</i> [constant=value] [constant=value with
    spaces]</dt>
  <dd class="It-tag">includes a expect-lite script file, useful for creation of
      common variable files, or 'subprograms/subroutines'. Can pass optional
      parameters which will override (as constants) the variables in the include
      file. Constant values passed may have spaces, no quotes are required</dd>
</dl>
<h2 class="Ss" title="Ss" id="Directives"><a class="selflink" href="#Directives">Directives</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">*~<i>filename</i></dt>
  <dd class="It-tag">Include a fail script, which expect-lite runs only if the
      main script fails</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*/prompt/</dt>
  <dd class="It-tag">Set a user defined prompt (defined in regex)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*TERM &lt;N&gt;</dt>
  <dd class="It-tag">Immediately terminates script, and returns the value of N,
      if N is not specified returns 0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*PASS</dt>
  <dd class="It-tag">Immediately terminates script, and returns 0 (pass)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*FAIL</dt>
  <dd class="It-tag">Immediately fails script, and returns 1 (fail), unless
      *NOFAIL is set, then script will run to completion, and return 1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*NOFAIL</dt>
  <dd class="It-tag">Script will run to completion, and returns 1, if failure
      occurred during execution, or 0, if pass (it is a sticky flag, and can not
      be unset)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">**SHELL=&lt;shell&gt;</dt>
  <dd class="It-tag">Configuration directive which sets the shell immediately
      after automatic login to remote host (see setting the shell)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*INTERACT</dt>
  <dd class="It-tag">A breakpoint which places user in interact mode, and pauses
      the script and turns control of the keyboard over to the user</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*NOINTERACT</dt>
  <dd class="It-tag">Once set, will ignore all succeeding breakpoints
      (*INTERACT). This permits running a script or scripts in an unattended
      regression. This can not be unset (it is a sticky flag)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*FORK &lt;session&gt;</dt>
  <dd class="It-tag">Multiple session support. Directs expect-lite to open a new
      session and spawns a new shell</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*SHOW VARS</dt>
  <dd class="It-tag">Debug information, displays all expect-lite variables. Can
      be used in interact mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*SHOW ENV</dt>
  <dd class="It-tag">Debug information, displays expect-lite environment,
      including state of directives, infinite loop counter, log file name (if
      used), and environment variables. Can be used in interact mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*INFINITE_LOOP N</dt>
  <dd class="It-tag">Infinite loop protection value, sets N as new value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*EOLS LF|*EOLS CRLF</dt>
  <dd class="It-tag">Controls end of line sequence sent to remote host, either
      line feed, or carriage return + line feed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*DVPROMPT|*NODVPROMPT</dt>
  <dd class="It-tag">Enable/disable the Dynamic Variable capture method to
      require a trailing prompt (default=*DVPROMPT).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*NOINCLUDE</dt>
  <dd class="It-tag">Once set, will ignore all succeeding include files (lines
      starting with ~). This was the default behaviour in Library mode
      (introduced in v4.1). This behaviour is no longer default, and this
      directive provides a method to previous behavior.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Logging"><a class="selflink" href="#Logging">Logging</a></h2>
Logging encompasses two operations: 1) writing script output to a file, 2)
  controlling additional messages, such as info, exp_info and warnings. All
  logging commands when used on the CLI will override those inside the script
<dl class="Bl-tag">
  <dt class="It-tag">*LOG|*NOLOG</dt>
  <dd class="It-tag">Enable/disable logging of standard out and messages to a
      file. The log file name will be &lt;script_name&gt;.log saved in the
      script directory.(see Environment Variable EL_LOG_EXT below)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*LOG &lt;file_name&gt;|*LOGAPPEND &lt;file_name&gt;</dt>
  <dd class="It-tag">Enable logging to a user specified path/file_name. When
      invoked on the CLI, the specified file_name must end in &quot;.log&quot;
      (or as defined by EL_LOG_EXT) to avoid ambiguity</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*INFO|*NOINFO</dt>
  <dd class="It-tag">Enable/disable informational messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*EXP_INFO|*NOEXP_INFO</dt>
  <dd class="It-tag">Enable/disable &quot;expected&quot; messages (additionally
      use -V flag to enable)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*WARN|*NOWARN</dt>
  <dd class="It-tag">Enable/disable warning messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*DEBUG|*NODEBUG</dt>
  <dd class="It-tag">Enable/disable debug messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*NOCOLOR</dt>
  <dd class="It-tag">Disables color on stdout</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*TIMESTAMP &lt;ISO|YMD|DMY|MDY&gt;</dt>
  <dd class="It-tag">Prints Date and Timestamp with milisecond accuracy, for
      each command sent, ISO is default. Timestamps will be written to log file
      when *LOG is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*NOTIMESTAMP</dt>
  <dd class="It-tag">Disables timestamp printing
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h2>
It is no longer necessary to hand edit the expect-lite script itself. All
  parameters such as connect_method, login name and password are controlled via
  shell environment variables. This permits individual customization in a multi
  user environment. It is recommended to save these values in
  <i>.expect-literc</i> and source it from .bashrc or .cshrc. If set, the
  following environment variables will be used:
<dl class="Bl-tag">
  <dt class="It-tag">EL_CONNECT_METHOD</dt>
  <dd class="It-tag">The method expect-lite uses to connect to remote host.
      Valid options are: none|telnet|ssh|ssh_key Default is none</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_CONNECT_USER</dt>
  <dd class="It-tag">User name to use for login on remote host (telnet|ssh)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_CONNECT_PASS</dt>
  <dd class="It-tag">Password to use for login on remote host (telnet|ssh)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_INFINITE_LOOP=N</dt>
  <dd class="It-tag">Infinite loop protection value, sets N to user's default
      value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_DELAY_WAIT_FOR_HOST</dt>
  <dd class="It-tag">Delay (in ms) to wait for host in Not Expect, and Dynamic
      Var Capture. 100 ms is a good value for a local LAN, 200 ms if running
      across high speed internet</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_REMOTE_HOST</dt>
  <dd class="It-tag">Name or IP of remote host</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_CMD_FILE</dt>
  <dd class="It-tag">Name of expect-lite script to run</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_USER_DIR</dt>
  <dd class="It-tag">Change to this directory upon login before executing
    script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_SHELL</dt>
  <dd class="It-tag">Start this shell (default bash) when using
      EL_CONNECT_METHOD=none</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_DYN_VAR_PROMPT</dt>
  <dd class="It-tag">Set the Dynamic Variable capture method to require a prompt
      (default=1). Disable by setting to 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_LOG_EXT</dt>
  <dd class="It-tag">Set the log file name extension string
      (default=&quot;.log&quot;) which is appended to the script name when using
      *LOG without file name argument or used to detect a log file name on the
      command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">EL_*</dt>
  <dd class="It-tag">Any other shell environment variables starting with EL_
      will become constants</dd>
</dl>
<h2 class="Ss" title="Ss" id="Debugger_(IDE)"><a class="selflink" href="#Debugger_(IDE)">Debugger
  (IDE)</a></h2>
The debugger performs three primary functions: 1) connecting the user to the
  remote host or device under test, 2) monitoring special commands prefaced with
  the escape key for stepping, and other functions, and 3) the debugger will
  allow expect-lite script lines to be executed by either typing directly or
  pasting them into the IDE.
<div class="Pp"></div>
The debugger is invoked at a breakpoint by placing the *INTERACT command in the
  script, or using by instant-interact at anytime during the script execution by
  pressing ctrl+backslash ^\
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;s</dt>
  <dd class="It-tag">Step, execute next step in script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;k</dt>
  <dd class="It-tag">sKip next step in script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;c</dt>
  <dd class="It-tag">Continue execution of the script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;v</dt>
  <dd class="It-tag">show Vars, display expect-lite variables and values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;e</dt>
  <dd class="It-tag">show Environment, display expect-lite environment</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;0to9</dt>
  <dd class="It-tag">display next N lines of script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;-1to-9</dt>
  <dd class="It-tag">display last N lines of script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ctrl+d</dt>
  <dd class="It-tag">Quit &amp; Exit expect-lite</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;esc&gt;h</dt>
  <dd class="It-tag">display Help</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">[pasted line(s)]</dt>
  <dd class="It-tag">execute any pasted line(s) from a script into the IDE</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">[type any expect-lite line]</dt>
  <dd class="It-tag">execute any typed expect-lite script line
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Craig Miller
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to &lt;cvmiller at gmail dot com&gt;.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2008-2015 Craig Miller
<div>&#x00A0;</div>
Copyright &#x00A9; 2005-2007 FreeScale Semiconductor and Craig Miller
<div>&#x00A0;</div>
License BSD-Style: This is free software: you are free to change and
  redistribute it. There is NO WARRANTY, to the extent permitted by law.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The full documentation for <b>expect-lite</b> is maintained as an HTML manual.
  Please see http://expect-lite.sf.net/ for complete documentation.</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 2015</td>
    <td class="foot-os">expect-lite version 4.9.0</td>
  </tr>
</table>
</body>
</html>
