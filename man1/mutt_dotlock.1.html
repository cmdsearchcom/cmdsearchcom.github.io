<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:32 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>dotlock(1) User Manuals dotlock(1)</p>

<p style="margin-top: 1em">NAME <br>
mutt_dotlock - Lock mail spool files.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mutt_dotlock [-t|-f|-u|-d] [-p] [-r retries] file</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mutt_dotlock implements the traditional mail spool file
locking method: To lock file, a file named file.lock is
created. The program operates with group mail privileges if
neces&acirc; <br>
sary.</p>

<p style="margin-top: 1em">OPTIONS <br>
-t Just try. mutt_dotlock won&rsquo;t actually lock a file,
but inform the invoking process if it&rsquo;s at all
possible to lock file.</p>

<p style="margin-top: 1em">-f Force the lock. If another
process holds a lock on file longer than a certain amount of
time, mutt_dotlock will break that lock by removing the
lockfile.</p>

<p style="margin-top: 1em">-u Unlock. mutt_dotlock will
remove file.lock.</p>

<p style="margin-top: 1em">-d Delete. mutt_dotlock will
lock file, remove it if it has length 0, and afterwards
remove file.lock.</p>

<p style="margin-top: 1em">-p Use privileges. If given this
option, mutt_dotlock will operate with group mail privileges
when creating and deleting lock files.</p>

<p style="margin-top: 1em">-r retries <br>
This command line option tells mutt_dotlock to try locking
retries times before giving up or (if invoked with the -f
command line option) break a lock. The default value <br>
is 5. mutt_dotlock waits one second between successive
locking attempts.</p>

<p style="margin-top: 1em">FILES <br>
file.lock <br>
The lock file mutt_dotlock generates.</p>

<p style="margin-top: 1em">SEE ALSO <br>
fcntl(2), flock(2), lockfile(1), mutt(1)</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
mutt_dotlock gives all diagnostics in its return values:</p>

<p style="margin-top: 1em">0 - DL_EX_OK <br>
The program was successful.</p>

<p style="margin-top: 1em">1 - DL_EX_ERROR <br>
An unspecified error such as bad command line parameters,
lack of system memory and the like has occurred.</p>

<p style="margin-top: 1em">3 - DL_EX_EXIST <br>
The user wants to lock a file which has been locked by
another process already. If mutt_dotlock is invoked with the
-f command line option, mutt_dotlock won&rsquo;t generate
<br>
this error, but break other processes&rsquo; locks.</p>

<p style="margin-top: 1em">4 - DL_EX_NEED_RPIVS <br>
This return value only occurs if mutt_dotlock has been
invoked with the -t command line option. It means that
mutt_dotlock will have to use its group mail privileges to
<br>
lock file.</p>

<p style="margin-top: 1em">5 - DL_EX_IMPOSSIBLE <br>
This return value only occurs if mutt_dotlock has been
invoked with the -t command line option. It means that
mutt_dotlock is unable to lock file even with group mail
<br>
privileges.</p>

<p style="margin-top: 1em">NOTES <br>
mutt_dotlock tries to implement an NFS-safe dotlocking
method which was borrowed from lockfile (1).</p>

<p style="margin-top: 1em">If the user can&rsquo;t open
file for reading with his normal privileges, mutt_dotlock
will return the DL_EX_ERROR exit value to avoid certain
attacks against other users&rsquo; spool files. <br>
The code carefully avoids race conditions when checking
permissions; for details of all this see the comments in
dotlock.c.</p>

<p style="margin-top: 1em">HISTORY <br>
mutt_dotlock is part of the Mutt mail user agent package. It
has been created to avoid running mutt with group mail
privileges.</p>

<p style="margin-top: 1em">AUTHOR <br>
Thomas Roessler &lt;roessler@does-not-exist.org&gt;</p>

<p style="margin-top: 1em">Unix AUGUST 1999 dotlock(1)</p>
<hr>
</body>
</html>
