<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>exonerate-server(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">exonerate-server(1)</td>
    <td class="head-vol">sequence comparison server</td>
    <td class="head-rtitle">exonerate-server(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
exonerate-server - a sequence comparison server for exonerate
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>exonerate-server [ options ] &lt;index path&gt;</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>exonerate-server</b> is a multi-threaded server for the exonerate sequence
  alignment program.
<div style="height: 1.00em;">&#x00A0;</div>
It uses a set of sequences and a corresponding index file to allow fast of large
  datasets.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OVERVIEW"><a class="selflink" href="#OVERVIEW">OVERVIEW</a></h1>
Firstly, an <b>.esd</b> file must be made from the sequence files. The
  <b>.esd</b> file is an Exonerate Sequence Dataset file, and can be used to
  group together any set of sequences where each sequences containing unique
  identifiers. This is done by using the <b>fasta2esd</b> utility.
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>fasta2esd genome.fasta genome.esd</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div class="Pp"></div>
Next, an <b>.esi</b> file my be made from the <b>.esd</b> file. The <b>.esi</b>
  file is an Exonerate Sequence Index file, and contains an index or set of
  indices corresponding to a particular dataset. This is done by using the
  <b>esd2esi</b> utility.
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>esd2esi genome.esd genome.esi</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div class="Pp"></div>
Once the <b>.esi</b> file has been generated, the exonerate-server may be
  started.
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>exonerate-server genome.esi</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div class="Pp"></div>
While the server is running, exonerate may be used to query the server by
  replacing the target sequences in the command line with the name of the server
  and port number. The default port number for the exonerate-server is 12886.
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>exonerate query.fasta localhost:12886</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Some of the command line options for the exonerate-server
    are the same as for the</dt>
  <dd class="It-tag">exonerate client, and these are documented in the man page
      for <b>exonerate.</b> The other options which are specific to
      <b>exonerate-server</b> are documented here.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--port &lt;port&gt;</b></dt>
  <dd class="It-tag">Specify the port on which the server should listen. By
      default, <b>exonerate-server</b> will listen on port 12886, but
      alternative ports may be specified with this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--input &lt;index file&gt;</b></dt>
  <dd class="It-tag">Specify the index file to be used when the server is
      started. This option is mandatory. The index file is a <b>.esi</b> file
      generated by the <b>esd2esi</b> utility.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--preload &lt;boolean&gt;</b></dt>
  <dd class="It-tag">By default the indices contained in the <b>.esi</b> file,
      and the sequences referenced in the corresponding <b>.esd</b> file are
      loaded into memory when the server is started. This is necessary to
      achieve fast performance that would otherwise be hampered by frequent disk
      accesses. This option allows the index and sequence preloading to be
      turned off, which allows the server to run much more slowly, but with
      faster startup and a smaller memory footprint. It is not advised to turn
      preloading off unless testing or debugging the server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--maxconnections &lt;count&gt;</b></dt>
  <dd class="It-tag">The server is multithreaded. This option sets the number
      client processes which are allowed to connect to the server
      simultaneously. For good performance, it should not be set to more than
      the number of CPUs on the machine on which the server is running.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbosity &lt;level&gt;</b></dt>
  <dd class="It-tag">Set the verbosity level for the server. If it is zero, the
      server will be silent, and the higher the number, the more messages are
      reported by the server about what is happening.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="INTERFACE"><a class="selflink" href="#INTERFACE">INTERFACE</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">This section documents the communication interface
    between</dt>
  <dd class="It-tag">the client and server. The interface is documented for
      people wishing to write their own custom server to sit behind exonerate -
      for normal use of exonerate, it is not necessary to know this.</dd>
</dl>
<div class="Pp"></div>
The interface works by the client sending simple command lines and the server
  sending simple reply lines over a socket. All the commands and replies are
  simple lines of ASCII text, so it is possible to use telnet as a client for
  testing a server.
<div class="Pp"></div>
Any command is a single line of text, but a reply may contain many lines of
  text. The replies are in the form of <b>&lt;tag&gt;: &lt;message&gt;</b>
<div class="Pp"></div>
Any reply can include lines with the tag <b>warning:</b> or <b>error:</b> These
  <b>warning:</b> and <b>error:</b> tags are echoed by the client, and the
  client will exit after receiving any <b>error:</b> reply.
<div class="Pp"></div>
When the server is returning a multiline reply, the first line must show the
  number of lines in the whole reply as: <b>linecount: &lt;count&gt;</b> For
  examples, see the replies from the <b>get hsps</b> commands in the example
  session below.
<div class="Pp"></div>
The client will only open a single connection to any server, although a
  multithreaded server is obviously required to allow multiple clients to
  connect simultaneously.
<h2 class="Ss" title="Ss" id="Commands_and_replies_used_in_for_the_interface."><a class="selflink" href="#Commands_and_replies_used_in_for_the_interface.">Commands
  and replies used in for the interface.</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>version</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">version &lt;server name&gt; &lt;server version&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>exit</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">( no reply - server closes connection )
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>dbinfo</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">dbinfo: &lt;type&gt; &lt;masked&gt; &lt;num_seqs&gt;
      &lt;max_seq_len&gt; &lt;total_seq_len&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The <b>dbinfo</b> command returns information about the database loaded on
      the server. The returned fields are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;type&gt;</b></dt>
  <dd class="It-tag">either dna or protein</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;masked&gt;</b></dt>
  <dd class="It-tag">either softmasked or unmasked</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;num_seqs&gt;</b></dt>
  <dd class="It-tag">the number of sequences in the database</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;max_seq_len&gt;</b></dt>
  <dd class="It-tag">the length of the longest sequence in the database</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;total_seq_len&gt;</b></dt>
  <dd class="It-tag">the total length of all the sequences in the database</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>lookup</b> &lt;eid&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">lookup: &lt;iid&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The lookup command is used to map an external identifier to an internal
      identifier.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>get info</b> &lt;iid&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">seqinfo: &lt;len&gt; &lt;checksum&gt; &lt;eid&gt; [
      &lt;def&gt; ]
    <div style="height: 1.00em;">&#x00A0;</div>
    The get info command returns information about a sequence in the database.
      The returned fields are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;len&gt;</b></dt>
  <dd class="It-tag">the sequence length</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;checksum&gt;</b></dt>
  <dd class="It-tag">a gcg format checksum (see below)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;eid&gt;</b></dt>
  <dd class="It-tag">the external id (eg. from fasta header)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;def&gt;</b></dt>
  <dd class="It-tag">a description line for the sequence (also from the fasta
      header), this field is optional an may be omitted.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>get seq</b> &lt;iid&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">seq: &lt;seq&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The get seq command returns a whole sequence on one line.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>get subseq</b> &lt;iid&gt; &lt;start&gt;
    &lt;len&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">subseq: &lt;sequence&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The get subseq command returns part of a sequence. The start of the sequence
      is position zero. eg. get subseq 0 0 10 will return the first 10 bases of
      the first sequence in the database.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>set query</b> &lt;seq&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">ok: &lt;len&gt; &lt;checksum&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The seq query command is used to send a query sequence to the server. It
      returns the length of the sequence and a gcg checksum
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>revcomp</b> &lt;query | target&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">ok: &lt;query | target&gt; strand &lt;forward | revcomp&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The revcomp query command makes the server reverse complement the query.
      This is to save the bandwidth of sending the query twice.
    <div style="height: 1.00em;">&#x00A0;</div>
    The revcomp target command is to tell the server to treat the database as
      its reverse complement. The client only sends this command when searching
      a translated database, so need not be implemented for most types of
      search.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>set param</b> &lt;name&gt; &lt;value&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">ok: &lt;set | ignored&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
    The set parameter command sends parameters from the exonerate command line
      to the server. This commands can all be ignored by the client for a basic
      implementation, but cannot be ignored for optimal performance.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Command:</dt>
  <dd class="It-tag"><b>get hsps</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Reply:</dt>
  <dd class="It-tag">hspset: &lt;iid&gt; { &lt;query_pos&gt; &lt;target_pos&gt;
      &lt;length&gt; }</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Or:</dt>
  <dd class="It-tag">hspset: empty
    <div style="height: 1.00em;">&#x00A0;</div>
    The get hsps command is the main command for getting sets of hsps. The
      server may return multiple hspsets. The returned fields are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;iid&gt;</b></dt>
  <dd class="It-tag">The internal id of the target sequence for these
    HSPsets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;query_pos&gt;</b></dt>
  <dd class="It-tag">The hsp query start position</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;target_pos&gt;</b></dt>
  <dd class="It-tag">The hsp target start position</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;length&gt;</b></dt>
  <dd class="It-tag">The hsp length</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">The last three fields represent an HSP, and
  may be repeated many times on one <b>hspset:</b> reply line.</div>
<h2 class="Ss" title="Ss" id="A_simple_example_client_server_dialog."><a class="selflink" href="#A_simple_example_client_server_dialog.">A
  simple example client server dialog.</a></h2>
<pre>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
% telnet localhost 12886
Trying 127.0.0.1...
Connected to localhost.localdomain.
Escape character is '^]'.
% version
version: exonerate-server 2.0.0
% dbinfo
dbinfo: dna softmasked 100000 1701 38113579
% lookup AA159529.1
lookup: 88065
% get info 88065
seqinfo: 62 2028 AA159529.1 zo72g05.s1 Stratagene pancreas (#937208) Homo sapiens cDNA
% get seq 88065
seq: NAACTCATCNTTTTCTGCTGNATCCTCTTCACCAGTTTGGGGGANGGCCTGCACTTCCANAG
% get subseq 88065 10 20
subseq: TTTTCTGCTGNATCCTCTTC
% set query NAACTCATCNTTTTCTGCTGNATCCTCTTCACCAGTTTGGGGGANGGCCTGCACTTCCANAG
ok: 62 2028
% get hsps
linecount: 15
hspset: 12423 1 349 41
hspset: 44900 1 356 47
hspset: 61781 1 358 41 36 392 26
hspset: 70065 1 349 41 36 383 26
hspset: 88065 1 1 61
hspset: 91032 1 357 41 36 391 26
hspset: 91442 1 350 41 36 384 26
hspset: 92971 1 348 41 36 382 26
hspset: 94311 1 375 41
hspset: 95381 1 346 41 36 380 26
hspset: 96808 10 385 32 36 410 26
hspset: 88449 18 11 22
hspset: 91036 6 6 56
hspset: 93736 36 400 26
% revcomp query
ok: query strand revcomp
% get hsps
linecount: 6
hspset: 12564 0 64 26 20 83 41
hspset: 61780 0 266 61
hspset: 29148 0 116 61
hspset: 25849 15 445 22
hspset: 93938 26 265 34
% exit
Connection closed by foreign host.
<div style="height: 1.00em;">&#x00A0;</div>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
Not documented yet.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>1.</b> Example of creating a translated index and running a fast
  protein2genome search using exonerate-server
<div style="height: 1.00em;">&#x00A0;</div>
<b>fasta2esd</b> human.genomic.fasta human.genomic.esd <b>esd2esi</b>
  --translate yes human.genomic.esd human.genomic.trans.esi
  <b>exonerate-server</b> --port 1234 human.genomic.trans.esi <b>exonerate</b>
  pep.fasta localhost:1234 --model p2g --seedrepeat 3 --geneseed 250
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
This documentation accompanies version 2.2.0 of the exonerate package.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Guy St.C. Slater. &lt;guy@ebi.ac.uk&gt;.
<div class="Pp"></div>
See the AUTHORS file accompanying the source code for a list of contributors.
<h1 class="Sh" title="Sh" id="AVAILABILITY"><a class="selflink" href="#AVAILABILITY">AVAILABILITY</a></h1>
This source code for the exonerate package is available under the terms of the
  GNU <i>general</i> public licence.
<div style="height: 1.00em;">&#x00A0;</div>
Please see the file COPYING which was distrubuted with this package, or
  http://www.gnu.org/licenses/gpl.txt for details.
<div style="height: 1.00em;">&#x00A0;</div>
This package has been developed as part of the ensembl project. Please see
  http://www.ensembl.org/ for more information.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>exonerate</b>(1),</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 2008</td>
    <td class="foot-os">exonerate-server</td>
  </tr>
</table>
</body>
</html>
