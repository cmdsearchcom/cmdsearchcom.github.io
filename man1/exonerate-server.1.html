<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:08:37 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>exonerate-server(1) sequence comparison server
exonerate-server(1)</p>

<p style="margin-top: 1em">NAME <br>
exonerate-server - a sequence comparison server for
exonerate</p>

<p style="margin-top: 1em">SYNOPSIS <br>
exonerate-server [ options ] &lt;index path&gt;</p>

<p style="margin-top: 1em">DESCRIPTION <br>
exonerate-server is a multi-threaded server for the
exonerate sequence alignment program.</p>

<p style="margin-top: 1em">It uses a set of sequences and a
corresponding index file to allow fast of large
datasets.</p>

<p style="margin-top: 1em">OVERVIEW <br>
Firstly, an .esd file must be made from the sequence files.
The .esd file is an Exonerate Sequence Dataset file, and can
be used to group together any set of sequences where <br>
each sequences containing unique identifiers. This is done
by using the fasta2esd utility.</p>

<p style="margin-top: 1em">fasta2esd genome.fasta
genome.esd</p>

<p style="margin-top: 1em">Next, an .esi file my be made
from the .esd file. The .esi file is an Exonerate Sequence
Index file, and contains an index or set of indices
corresponding to a particular <br>
dataset. This is done by using the esd2esi utility.</p>

<p style="margin-top: 1em">esd2esi genome.esd
genome.esi</p>

<p style="margin-top: 1em">Once the .esi file has been
generated, the exonerate-server may be started.</p>

<p style="margin-top: 1em">exonerate-server genome.esi</p>

<p style="margin-top: 1em">While the server is running,
exonerate may be used to query the server by replacing the
target sequences in the command line with the name of the
server and port number. The <br>
default port number for the exonerate-server is 12886.</p>

<p style="margin-top: 1em">exonerate query.fasta
localhost:12886</p>

<p style="margin-top: 1em">OPTIONS <br>
Some of the command line options for the exonerate-server
are the same as for the <br>
exonerate client, and these are documented in the man page
for exonerate. The other options which are specific to
exonerate-server are documented here.</p>

<p style="margin-top: 1em">--port &lt;port&gt; <br>
Specify the port on which the server should listen. By
default, exonerate-server will listen on port 12886, but
alternative ports may be specified with this option.</p>

<p style="margin-top: 1em">--input &lt;index file&gt; <br>
Specify the index file to be used when the server is
started. This option is mandatory. The index file is a .esi
file generated by the esd2esi utility.</p>

<p style="margin-top: 1em">--preload &lt;boolean&gt; <br>
By default the indices contained in the .esi file, and the
sequences referenced in the corresponding .esd file are
loaded into memory when the server is started. This is <br>
necessary to achieve fast performance that would otherwise
be hampered by frequent disk accesses. This option allows
the index and sequence preloading to be turned off, <br>
which allows the server to run much more slowly, but with
faster startup and a smaller memory footprint. It is not
advised to turn preloading off unless testing or
debug&acirc; <br>
ging the server.</p>

<p style="margin-top: 1em">--maxconnections &lt;count&gt;
<br>
The server is multithreaded. This option sets the number
client processes which are allowed to connect to the server
simultaneously. For good performance, it should not <br>
be set to more than the number of CPUs on the machine on
which the server is running.</p>

<p style="margin-top: 1em">--verbosity &lt;level&gt; <br>
Set the verbosity level for the server. If it is zero, the
server will be silent, and the higher the number, the more
messages are reported by the server about what is <br>
happening.</p>

<p style="margin-top: 1em">INTERFACE <br>
This section documents the communication interface between
<br>
the client and server. The interface is documented for
people wishing to write their own custom server to sit
behind exonerate - for normal use of exonerate, it is not
<br>
necessary to know this.</p>

<p style="margin-top: 1em">The interface works by the
client sending simple command lines and the server sending
simple reply lines over a socket. All the commands and
replies are simple lines of ASCII <br>
text, so it is possible to use telnet as a client for
testing a server.</p>

<p style="margin-top: 1em">Any command is a single line of
text, but a reply may contain many lines of text. The
replies are in the form of &lt;tag&gt;: &lt;message&gt;</p>

<p style="margin-top: 1em">Any reply can include lines with
the tag warning: or error: These warning: and error: tags
are echoed by the client, and the client will exit after
receiving any error: reply.</p>

<p style="margin-top: 1em">When the server is returning a
multiline reply, the first line must show the number of
lines in the whole reply as: linecount: &lt;count&gt; For
examples, see the replies from the get <br>
hsps commands in the example session below.</p>

<p style="margin-top: 1em">The client will only open a
single connection to any server, although a multithreaded
server is obviously required to allow multiple clients to
connect simultaneously.</p>

<p style="margin-top: 1em">Commands and replies used in for
the interface. <br>
Command: version <br>
Reply: version &lt;server name&gt; &lt;server
version&gt;</p>

<p style="margin-top: 1em">Command: exit <br>
Reply: ( no reply - server closes connection )</p>

<p style="margin-top: 1em">Command: dbinfo <br>
Reply: dbinfo: &lt;type&gt; &lt;masked&gt; &lt;num_seqs&gt;
&lt;max_seq_len&gt; &lt;total_seq_len&gt;</p>

<p style="margin-top: 1em">The dbinfo command returns
information about the database loaded on the server. The
returned fields are:</p>

<p style="margin-top: 1em">&lt;type&gt; either dna or
protein <br>
&lt;masked&gt; either softmasked or unmasked <br>
&lt;num_seqs&gt; the number of sequences in the database
<br>
&lt;max_seq_len&gt; the length of the longest sequence in
the database <br>
&lt;total_seq_len&gt; the total length of all the sequences
in the database</p>

<p style="margin-top: 1em">Command: lookup &lt;eid&gt; <br>
Reply: lookup: &lt;iid&gt;</p>

<p style="margin-top: 1em">The lookup command is used to
map an external identifier to an internal identifier.</p>

<p style="margin-top: 1em">Command: get info &lt;iid&gt;
<br>
Reply: seqinfo: &lt;len&gt; &lt;checksum&gt; &lt;eid&gt; [
&lt;def&gt; ]</p>

<p style="margin-top: 1em">The get info command returns
information about a sequence in the database. The returned
fields are:</p>

<p style="margin-top: 1em">&lt;len&gt; the sequence length
<br>
&lt;checksum&gt; a gcg format checksum (see below) <br>
&lt;eid&gt; the external id (eg. from fasta header) <br>
&lt;def&gt; a description line for the sequence (also from
the fasta header), this field is optional an may be
omitted.</p>

<p style="margin-top: 1em">Command: get seq &lt;iid&gt;
<br>
Reply: seq: &lt;seq&gt;</p>

<p style="margin-top: 1em">The get seq command returns a
whole sequence on one line.</p>

<p style="margin-top: 1em">Command: get subseq &lt;iid&gt;
&lt;start&gt; &lt;len&gt; <br>
Reply: subseq: &lt;sequence&gt;</p>

<p style="margin-top: 1em">The get subseq command returns
part of a sequence. The start of the sequence is position
zero. eg. get subseq 0 0 10 will return the first 10 bases
of the first <br>
sequence in the database.</p>

<p style="margin-top: 1em">Command: set query &lt;seq&gt;
<br>
Reply: ok: &lt;len&gt; &lt;checksum&gt;</p>

<p style="margin-top: 1em">The seq query command is used to
send a query sequence to the server. It returns the length
of the sequence and a gcg checksum</p>

<p style="margin-top: 1em">Command: revcomp &lt;query |
target&gt; <br>
Reply: ok: &lt;query | target&gt; strand &lt;forward |
revcomp&gt;</p>

<p style="margin-top: 1em">The revcomp query command makes
the server reverse complement the query. This is to save the
bandwidth of sending the query twice.</p>

<p style="margin-top: 1em">The revcomp target command is to
tell the server to treat the database as its reverse
complement. The client only sends this command when
searching a translated data&acirc; <br>
base, so need not be implemented for most types of
search.</p>

<p style="margin-top: 1em">Command: set param &lt;name&gt;
&lt;value&gt; <br>
Reply: ok: &lt;set | ignored&gt;</p>

<p style="margin-top: 1em">The set parameter command sends
parameters from the exonerate command line to the server.
This commands can all be ignored by the client for a basic
implementation, <br>
but cannot be ignored for optimal performance.</p>

<p style="margin-top: 1em">Command: get hsps <br>
Reply: hspset: &lt;iid&gt; { &lt;query_pos&gt;
&lt;target_pos&gt; &lt;length&gt; } <br>
Or: hspset: empty</p>

<p style="margin-top: 1em">The get hsps command is the main
command for getting sets of hsps. The server may return
multiple hspsets. The returned fields are:</p>

<p style="margin-top: 1em">&lt;iid&gt; The internal id of
the target sequence for these HSPsets. <br>
&lt;query_pos&gt; The hsp query start position <br>
&lt;target_pos&gt; The hsp target start position <br>
&lt;length&gt; The hsp length</p>

<p style="margin-top: 1em">The last three fields represent
an HSP, and may be repeated many times on one hspset: reply
line.</p>

<p style="margin-top: 1em">A simple example client server
dialog. <br>
% telnet localhost 12886 <br>
Trying 127.0.0.1... <br>
Connected to localhost.localdomain. <br>
Escape character is &rsquo;^]&rsquo;. <br>
% version <br>
version: exonerate-server 2.0.0 <br>
% dbinfo <br>
dbinfo: dna softmasked 100000 1701 38113579 <br>
% lookup AA159529.1 <br>
lookup: 88065 <br>
% get info 88065 <br>
seqinfo: 62 2028 AA159529.1 zo72g05.s1 Stratagene pancreas
(#937208) Homo sapiens cDNA <br>
% get seq 88065 <br>
seq:
NAACTCATCNTTTTCTGCTGNATCCTCTTCACCAGTTTGGGGGANGGCCTGCACTTCCANAG
<br>
% get subseq 88065 10 20 <br>
subseq: TTTTCTGCTGNATCCTCTTC <br>
% set query
NAACTCATCNTTTTCTGCTGNATCCTCTTCACCAGTTTGGGGGANGGCCTGCACTTCCANAG
<br>
ok: 62 2028 <br>
% get hsps <br>
linecount: 15 <br>
hspset: 12423 1 349 41 <br>
hspset: 44900 1 356 47 <br>
hspset: 61781 1 358 41 36 392 26 <br>
hspset: 70065 1 349 41 36 383 26 <br>
hspset: 88065 1 1 61 <br>
hspset: 91032 1 357 41 36 391 26 <br>
hspset: 91442 1 350 41 36 384 26 <br>
hspset: 92971 1 348 41 36 382 26 <br>
hspset: 94311 1 375 41 <br>
hspset: 95381 1 346 41 36 380 26 <br>
hspset: 96808 10 385 32 36 410 26 <br>
hspset: 88449 18 11 22 <br>
hspset: 91036 6 6 56 <br>
hspset: 93736 36 400 26 <br>
% revcomp query <br>
ok: query strand revcomp <br>
% get hsps <br>
linecount: 6 <br>
hspset: 12564 0 64 26 20 83 41 <br>
hspset: 61780 0 266 61 <br>
hspset: 29148 0 116 61 <br>
hspset: 25849 15 445 22 <br>
hspset: 93938 26 265 34 <br>
% exit <br>
Connection closed by foreign host.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
Not documented yet.</p>

<p style="margin-top: 1em">EXAMPLES <br>
1. Example of creating a translated index and running a fast
protein2genome search using exonerate-server</p>

<p style="margin-top: 1em">fasta2esd human.genomic.fasta
human.genomic.esd esd2esi --translate yes human.genomic.esd
human.genomic.trans.esi exonerate-server --port 1234
human.genomic.trans.esi exonerate <br>
pep.fasta localhost:1234 --model p2g --seedrepeat 3
--geneseed 250</p>

<p style="margin-top: 1em">VERSION <br>
This documentation accompanies version 2.2.0 of the
exonerate package.</p>

<p style="margin-top: 1em">AUTHOR <br>
Guy St.C. Slater. &lt;guy@ebi.ac.uk&gt;.</p>

<p style="margin-top: 1em">See the AUTHORS file
accompanying the source code for a list of contributors.</p>

<p style="margin-top: 1em">AVAILABILITY <br>
This source code for the exonerate package is available
under the terms of the GNU general public licence.</p>

<p style="margin-top: 1em">Please see the file COPYING
which was distrubuted with this package, or
http://www.gnu.org/licenses/gpl.txt for details.</p>

<p style="margin-top: 1em">This package has been developed
as part of the ensembl project. Please see
http://www.ensembl.org/ for more information.</p>

<p style="margin-top: 1em">SEE ALSO <br>
exonerate(1),</p>

<p style="margin-top: 1em">exonerate-server January 2008
exonerate-server(1)</p>
<hr>
</body>
</html>
