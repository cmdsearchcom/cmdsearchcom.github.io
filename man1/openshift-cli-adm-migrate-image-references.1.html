<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OPENSHIFT CLI ADM MIGRATE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OPENSHIFT CLI ADM MIGRATE(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OPENSHIFT CLI ADM MIGRATE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
openshift cli adm migrate image-references - Update embedded Docker image
  references
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>openshift cli adm migrate image-references</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Migrate references to Docker images
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command updates embedded Docker image references on the server in place. By
  default it will update image streams and images, and may be used to update
  resources with a pod template (deployments, replication controllers, daemon
  sets).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
References are changed by providing a mapping between a source registry and name
  and the desired registry and name. Either name or registry can be set to ' *'
  to change all values. The registry value &quot;docker.io&quot; is special and
  will handle any image reference that refers to the DockerHub. You may pass
  multiple mappings - the first matching mapping will be applied per resource.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following resource types may be migrated by this command:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; buildconfigs
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; daemonsets
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; deploymentconfigs
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; images
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; imagestreams
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; jobs
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; pods
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; replicationcontrollers
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">&#x2022; secrets (docker)
    <div>&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
Only images, imagestreams, and secrets are updated by default. Updating images
  and image streams requires administrative privileges.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--all-namespaces</b>=true
<br/>
 Migrate objects in all namespaces. Defaults to true.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--confirm</b>=false
<br/>
 If true, all requested objects will be migrated. Defaults to false.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-f</b>, <b>--filename</b>=[]
<br/>
 Filename, directory, or URL to docker-compose.yml file to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--from-key</b>=&quot;&quot;
<br/>
 If specified, only migrate items with a key (namespace/name or name) greater
  than or equal to this value
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--include</b>=[imagestream,image,secrets]
<br/>
 Resource types to migrate. Passing --filename will override this flag.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-o</b>, <b>--output</b>=&quot;&quot;
<br/>
 Output the modified objects instead of saving them, valid values are 'yaml' or
  'json'
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--to-key</b>=&quot;&quot;
<br/>
 If specified, only migrate items with a key (namespace/name or name) less than
  this value
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 Path to a cert. file for the certificate authority
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # Perform a dry-run of migrating all &quot;docker.io&quot; references to &quot;myregistry.com&quot;
  openshift cli adm migrate image-references docker.io/*=myregistry.com/*
  
  # To actually perform the migration, the confirm flag must be appended
  openshift cli adm migrate image-references docker.io/*=myregistry.com/* --confirm
  
  # To see more details of what will be migrated, use the loglevel and output flags
  openshift cli adm migrate image-references docker.io/*=myregistry.com/* --loglevel=2 -o yaml
  
  # Migrate from a service IP to an internal service DNS name
  openshift cli adm migrate image-references 172.30.1.54/*=registry.openshift.svc.cluster.local/*
  
  # Migrate from a service IP to an internal service DNS name for all deployment configs and builds
  openshift cli adm migrate image-references 172.30.1.54/*=registry.openshift.svc.cluster.local/* --include=buildconfigs,deploymentconfigs
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>openshift-cli-adm-migrate(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
