<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OADM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OADM(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OADM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
oadm registry - Install the integrated Docker registry
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>oadm registry</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Install or configure an integrated Docker registry
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command sets up a Docker registry integrated with your cluster to provide
  notifications when images are pushed. With no arguments, the command will
  check for the existing registry service called 'docker-registry' and try to
  create it. If you want to test whether the registry has been created add the
  --dry-run flag and the command will exit with 1 if the registry does not
  exist.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
To run a highly available registry, you should be using a remote storage
  mechanism like an object store (several are supported by the Docker registry).
  The default Docker registry image is configured to accept configuration as
  environment variables - refer to the configuration file in that image for more
  on setting up alternative storage. Once you've made those changes, you can
  pass --replicas=2 or higher to ensure you have failover protection. The
  default registry setup uses a local volume and the data will be lost if you
  delete the running pod.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
If multiple ports are specified using the option --ports, the first specified
  port will be chosen for use as the REGISTRY HTTP ADDR and will be passed to
  Docker registry.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
NOTE: This command is intended to simplify the tasks of setting up a Docker
  registry in a new installation. Some configuration beyond this command is
  still required to make your registry persist data.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--create</b>=false
<br/>
 deprecated; this is now the default behavior
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--daemonset</b>=false
<br/>
 If true, use a daemonset instead of a deployment config.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--dry-run</b>=false
<br/>
 If true, show the result of the operation without performing it.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--enforce-quota</b>=false
<br/>
 If true, the registry will refuse to write blobs if they exceed quota limits
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--images</b>=&quot;openshift/origin-${component}:${version}&quot;
<br/>
 The image to base this registry on - ${component} will be replaced with --type
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--labels</b>=&quot;docker-registry=default&quot;
<br/>
 A set of labels to uniquely identify the registry and its components.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--latest-images</b>=false
<br/>
 If true, attempt to use the latest image for the registry instead of the latest
  release.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--mount-host</b>=&quot;&quot;
<br/>
 If set, the registry volume will be created as a host-mount at this path.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-o</b>, <b>--output</b>=&quot;&quot;
<br/>
 Output results as yaml or json instead of executing, or use name for succint
  output (resource/name).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--output-version</b>=&quot;&quot;
<br/>
 The preferred API versions of the output objects
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--ports</b>=&quot;5000&quot;
<br/>
 A comma delimited list of ports or port pairs to expose on the registry pod.
  The default is set for 5000.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--replicas</b>=1
<br/>
 The replication factor of the registry; commonly 2 when high availability is
  desired.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--selector</b>=&quot;&quot;
<br/>
 Selector used to filter nodes on deployment. Used to run registries on a
  specific set of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--service-account</b>=&quot;registry&quot;
<br/>
 Name of the service account to use to run the registry pod.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--tls-certificate</b>=&quot;&quot;
<br/>
 An optional path to a PEM encoded certificate (which may contain the private
  key) for serving over TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--tls-key</b>=&quot;&quot;
<br/>
 An optional path to a PEM encoded private key for serving over TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--type</b>=&quot;docker-registry&quot;
<br/>
 The registry image to use - if you specify --images this flag may be ignored.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--volume</b>=&quot;/registry&quot;
<br/>
 The volume path to use for registry storage; defaults to /registry which is the
  default for origin-docker-registry.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 Path to a cert. file for the certificate authority
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # Check if default Docker registry (&quot;docker-registry&quot;) has been created
  oadm registry --dry-run
  
  # See what the registry will look like if created
  oadm registry -o yaml
  
  # Create a registry with two replicas if it does not exist
  oadm registry --replicas=2
  
  # Use a different registry image
  oadm registry --images=myrepo/docker-registry:mytag
  
  # Enforce quota and limits on images
  oadm registry --enforce-quota
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>oadm(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
