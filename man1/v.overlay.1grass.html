<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.overlay(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.overlay(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.overlay(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.overlay</b> - Overlays two vector maps offering clip, intersection,
  difference, symmetrical difference, union operators.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, geometry, spatial query, clip, difference, intersection, union
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.overlay</b>
<div>&#x00A0;</div>
<b>v.overlay --help</b>
<div>&#x00A0;</div>
<b>v.overlay</b> [-<b>t</b>] <b>ainput</b>=<i>name</i>
  [<b>alayer</b>=<i>string</i>] [
  <b>atype</b>=<i>string</i>[,<i>string</i>,...]] <b>binput</b>=<i>name</i>
  [<b>blayer</b>= <i>string</i>]
  [<b>btype</b>=<i>string</i>[,<i>string</i>,...]] <b>operator</b>=<i>string</i>
  <b>output</b>=<i>name</i> [<b>olayer</b>=<i>string</i>[,<i>string</i>,...]]
  [<b>snap</b>=<i>float</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Do not create attribute table</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ainput</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map (A)
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>alayer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer number or name (vector map A)
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>atype</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Feature type (vector map A)
    <div>&#x00A0;</div>
    Input feature type
    <div>&#x00A0;</div>
    Options: <i>line, area, auto</i>
    <div>&#x00A0;</div>
    Default: <i>auto</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>binput</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map (B)
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blayer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer number or name (vector map B)
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>btype</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Feature type (vector map B)
    <div>&#x00A0;</div>
    Input feature type
    <div>&#x00A0;</div>
    Options: <i>area</i>
    <div>&#x00A0;</div>
    Default: <i>area</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>operator</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Operator defines features written to output vector map
    <div>&#x00A0;</div>
    Feature is written to output if the result of operation &#x2019;ainput
      operator binput&#x2019; is true. Input feature is considered to be true,
      if category of given layer is defined.
    <div>&#x00A0;</div>
    Options: <i>and, or, not, xor</i>
    <div>&#x00A0;</div>
     <b>and</b>: also known as &#x2019;intersection&#x2019; in GIS
    <div>&#x00A0;</div>
     <b>or</b>: also known as &#x2019;union&#x2019; in GIS (only for atype=area)
    <div>&#x00A0;</div>
     <b>not</b>: also known as &#x2019;difference&#x2019; (features from ainput
      not overlayed by features from binput)
    <div>&#x00A0;</div>
     <b>xor</b>: also known as &#x2019;symmetrical difference&#x2019; (features
      from either ainput or binput but not those from ainput overlayed by binput
      (only for atype=area)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>olayer</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output layer for new category, ainput and binput
    <div>&#x00A0;</div>
    If 0 or not given, the category is not written
    <div>&#x00A0;</div>
    Default: <i>1,0,0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>snap</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Snapping threshold for boundaries
    <div>&#x00A0;</div>
    Disable snapping with snap &lt;= 0
    <div>&#x00A0;</div>
    Default: <i>1e-8</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.overlay</i> allows the user to overlay two vector maps. Features in
  <b>ainput</b> can be lines or areas and are cut with areas in <b>binput</b>.
  Simple <i>clipping</i> can be performed with the <b>and</b> operator.
<div class="Pp"></div>
If areas in <b>ainput</b> are overlaid with areas in <b>binput</b>, it is
  sometimes necessary to snap areas of <b>binput</b> to those of <b>ainput</b>,
  otherwise areas can go missing or many sliver areas can be created. Snapping
  is enabled by default and can be disabled by setting the <b>snap</b> option to
  a negative value. Recommended values are between 0.00000001 and 0.0001. Using
  larger values for snapping can have undesired side-effects, but may sometimes
  be necessary to get a clean output (see example below). In general, it is
  recommended to start with a small snapping threshold, gradually increasing the
  threshold until the result is reasonably clean. Snapping modifies only
  boundaries in binput, which are snapped to boundaries in ainput. Boundaries in
  <b>ainput</b> are not modified.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Currently only areas in <b>ainput</b> are supported for the operators <i>or</i>
  and <i>xor</i>! See also <i>v.select</i>. The operator defines what kind of
  operation will be done. Features are written to output, if the result of an
  operation <b>ainput</b> operator <b>binput</b> is true.
<div class="Pp"></div>
If the <i>first</i> number of the <b>olayer</b> option is greater than 0, then
  the resulting output map has a merged attribute table in the given layer
  number. The original column names have a prefix ( <i>a_</i> and <i>b_</i>)
  corresponding to <b>ainput</b> and <b>binput</b> map.
<div class="Pp"></div>
If the <i>second</i> number of the <b>olayer</b> option is greater than 0, then
  the categories of <b>ainput</b> in layer <b>alayer</b> are transferred to the
  output layer with the second number.
<div class="Pp"></div>
If the <i>third</i> number of the <b>olayer</b> option is greater than 0, then
  the categories of <b>binput</b> in layer <i>blayer</i> are transferred to the
  output layer with the third number.
<div class="Pp"></div>
If <b>atype</b>=auto is given than <i>v.overlay</i> determines feature type for
  <b>ainput</b> from the first found feature.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Preparation of example data (North Carolina sample dataset):
<div>&#x00A0;</div>
<pre>
# Create an empty box for overlaying to ZIP code vector map
v.mkgrid map=box grid=1,1 position=coor coordinates=584037,201970 box=50000,50000
# set region to ZIP codes and box vector maps
g.region vector=zipcodes_wake,box -p res=100 -a
# enlarge region a bit for &quot;white border&quot; around map in monitor
g.region n=n+1000 s=s-1000 w=w-1000 e=e+1000 -p
d.mon wx0
</pre>
<h2 class="Ss" title="Ss" id="AND_operator"><a class="selflink" href="#AND_operator">AND
  operator</a></h2>
Clipping example (no attribute table is generated here):
<div>&#x00A0;</div>
<pre>
d.vect map=zipcodes_wake fill_color=0:128:0
d.vect map=box fill_color=85:130:176
v.overlay -t ainput=box binput=zipcodes_wake operator=and output=v_overlay_AND
d.vect map=v_overlay_AND
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay with AND operator (selected polygons in grey color)</i>
<h2 class="Ss" title="Ss" id="OR_operator"><a class="selflink" href="#OR_operator">OR
  operator</a></h2>
Union example of areas:
<div>&#x00A0;</div>
<pre>
d.vect map=zipcodes_wake fill_color=0:128:0
d.vect map=box fill_color=85:130:176
v.overlay -t ainput=box binput=zipcodes_wake operator=or output=v_overlay_OR
d.vect map=v_overlay_OR
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay with OR operator (selected polygons in grey color)</i>
<h2 class="Ss" title="Ss" id="XOR_operator"><a class="selflink" href="#XOR_operator">XOR
  operator</a></h2>
Symmetrical difference example:
<div>&#x00A0;</div>
<pre>
d.vect map=zipcodes_wake fill_color=0:128:0
d.vect map=box fill_color=85:130:176
v.overlay -t ainput=box binput=zipcodes_wake operator=xor output=v_overlay_XOR
d.vect map=v_overlay_XOR
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay with XOR operator (selected polygons in grey color)</i>
<h2 class="Ss" title="Ss" id="NOT_operator"><a class="selflink" href="#NOT_operator">NOT
  operator</a></h2>
Difference example:
<div>&#x00A0;</div>
<pre>
d.vect map=zipcodes_wake fill_color=0:128:0
d.vect map=box fill_color=85:130:176
v.overlay -t ainput=box binput=zipcodes_wake operator=not output=v_overlay_NOT
d.vect map=v_overlay_NOT
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay with NOT operator (selected polygon in grey color)</i>
<h2 class="Ss" title="Ss" id="Overlay_operations:_AND,_OR,_NOT,_XOR"><a class="selflink" href="#Overlay_operations:_AND,_OR,_NOT,_XOR">Overlay
  operations: AND, OR, NOT, XOR</a></h2>
ZIP code examples, based on North Carolina sample dataset:
<div>&#x00A0;</div>
<pre>
# creation of simple dataset
v.extract input=zipcodes_wake output=poly1 where=&quot;cat = 42&quot;
v.extract input=urbanarea output=poly2 where=&quot;cat = 55&quot;
v.overlay ainput=poly1 binput=poly2 operator=and output=poly_1_2_and
v.overlay ainput=poly1 binput=poly2 operator=or  output=poly_1_2_or
v.overlay ainput=poly1 binput=poly2 operator=not output=poly_1_2_not
v.overlay ainput=poly1 binput=poly2 operator=xor output=poly_1_2_xor
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay operations: original input polygons</i>
<div class="Pp"></div>
<i>Figure: v.overlay results of AND, OR, NOT, XOR operations</i>
<h2 class="Ss" title="Ss" id="Polygons_overlaid_with_polygons"><a class="selflink" href="#Polygons_overlaid_with_polygons">Polygons
  overlaid with polygons</a></h2>
<pre>
v.overlay ainput=lake binput=province output=lakeXprovince operator=or
</pre>
Polygon union of urban area and Census 2000 areas (North Carolina dataset):
<div>&#x00A0;</div>
<pre>
# input maps
d.vect urbanarea
d.vect census_wake2000
# union
v.overlay ain=census_wake2000 bin=urbanarea out=urban_census2000 operator=or
# show result, graphically zooming a subset
g.region n=230400 s=223800 w=655800 e=662400
d.erase
d.vect urban_census2000
# show merged attribute table
v.db.select urban_census2000 where=&quot;cat=108&quot; -v
cat|108
a_cat|98
a_AREA|231001264
a_PERIMETE|67804.305
a_TRACT_|98
a_TRACT_ID|98
a_RINGS_OK|1
a_RINGS_NO|0
a_ID|98
a_FIPSSTCO|37183
a_TRT2000|054108
a_STFID|37183054108
a_TRACTID|541.08
a_TRACT|541.08
b_cat|55
b_OBJECTID|55
b_UA|73261
b_NAME|Raleigh
b_UA_TYPE|UA
</pre>
<div>&#x00A0;</div>
<i>Figure: v.overlay: Polygon union (right) of urban area (left) and Census 2000
  (middle) areas (North Carolina dataset)</i>
<div class="Pp"></div>
As can be seen by the resulting large number of centroids on boundaries, the
  urban areas do not match exactly the Census 2000 areas. In this case a clean
  result can be obtained by snapping with a threshold of 0.1 m.
<h2 class="Ss" title="Ss" id="Lines_overlaid_with_polygons"><a class="selflink" href="#Lines_overlaid_with_polygons">Lines
  overlaid with polygons</a></h2>
Using the North Carolina sample dataset, we clip the roads map to the area of
  city of Raleigh, preserving road attributes in layer 1:
<div>&#x00A0;</div>
<pre>
g.region vector=zipcodes_wake
# extract Raleigh city:
v.extract in=zipcodes_wake out=raleigh where=&quot;ZIPNAME = &#x2019;RALEIGH&#x2019;&quot;
# clip road network to city polygon:
v.overlay ainput=roadsmajor atype=line binput=raleigh out=roadsmajor_raleigh operator=and olayer=0,1,0
</pre>
<div>&#x00A0;</div>
<table class="tbl">
  <colgroup>
    <col style="width: 60.00ex;"/>
  </colgroup>
  <tr>
    <td><i>Figure: v.overlay: Line to polygon clipping</i></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>v.db.connect,</i> <i>v.select,</i> <i>g.copy</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Radim Blazek, ITC-Irst, Trento, Italy
<div>&#x00A0;</div>
Markus Metz
<div class="Pp"></div>
<i>Last changed: $Date: 2016-08-26 11:27:29 +0200 (Fri, 26 Aug 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.overlay source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
