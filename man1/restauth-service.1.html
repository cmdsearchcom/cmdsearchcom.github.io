<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>RESTAUTH-SERVICE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RESTAUTH-SERVICE(1)</td>
    <td class="head-vol">RestAuth</td>
    <td class="head-rtitle">RESTAUTH-SERVICE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
restauth-service - manage services that use RestAuth
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>restauth-service.py</b> [<b>-h</b>] <i>command</i> [<i>option</i>] ...
  [<i>args</i>] ...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>restauth-service.py</b> may be used to manage services that connect to
  RestAuth. A service is a system that wants to use RestAuth to store users,
  preferences and groups.
<div style="height: 1.00em;">&#x00A0;</div>
RestAuth stores a name (which may not include a ':') and a password that
  identify the service. A service has zero or more IPv4 or IPv6 addresses
  associated with it, a service can only authenticate from the given adresses,
  use the <b>*-hosts</b> subcommands to manage hosts of a given service. A
  service must have permissions to perform the respective actions, use the
  <b>*-permissions</b> subcommands to manage permissions for services.
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
Use one of the commands (i.e. add, view, ls, ...) to perform the respective
  operation. Each command usually requires more arguments to it, see the
  respective section for arguments (and possible options) for each command.
<div style="height: 1.00em;">&#x00A0;</div>
Use &quot; <b>restauth-service.py</b> <b>--help</b>&quot; to get an
  authoritative list of available commands. If you want help on a specific
  command, use &quot; <b>restauth-service.py</b> <i>command</i>
  <b>--help</b>&quot; or see the <i>AVAILABLE COMMANDS</i> section below.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>restauth-service.py</b> <b>add</b> <i>example.com</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Add the service <i>example.com</i> and prompt
  for a password.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>add --gen-password</b> <i>example.com</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Add the service <i>example.com</i> and print a
  generated password to stdout.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>ls</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">List all available services.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>view</b> <i>example.com</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">View all details of the service
  <i>example.com</i>.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>set-password --password=</b><i>foobar</i>
  <i>example.com</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Set the password of the service
  <i>example.com</i> (which must already exist) to <i>foobar</i>.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>set-hosts</b> <i>example.com</i>
  <i>192.168.0.1</i> <i>192.168.0.2</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Enable the service <i>example.com</i> for the
  hosts <i>192.168.0.1</i> <i>192.168.0.2</i>. Note that this removes any
  previously configured hosts.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>set-permissions</b> <i>example.com</i>
  <i>user*</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Specify that the service <i>example.com</i> is
  allowed to perform all user operations.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>rm-permissions</b> <i>example.com</i>
  <i>user_delete</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Specify that the service <i>example.com</i> is
  <b>not</b> allowed to delete users.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>restauth-service.py</b> <b>remove</b> <i>example.com</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Remove the service <i>example.com</i> from
  RestAuth. This will also remove any groups defined for the service, see
  <b>restauth-groups</b>(1).</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
A typical workflow for adding a service is:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
restauth-service.py add example.net
restauth-service.py set-hosts 127.0.0.1 ::1
restauth-service.py set-permissions user_verify_password user_change_password
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Please see the <i>available permissions</i> below for a full reference on what
  permissions can be configured.
<h1 class="Sh" title="Sh" id="AVAILABLE_COMMANDS"><a class="selflink" href="#AVAILABLE_COMMANDS">AVAILABLE
  COMMANDS</a></h1>
The following subsections never document the '-h' parameter for clarity.
<div style="height: 1.00em;">&#x00A0;</div>
<b>add</b> [<b>-h</b>] [<b>--password</b> <i>PWD</i> | <b>--gen-password</b>]
  <i>SERVICE</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Add a new service.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--password PWD</b></dt>
  <dd class="It-tag">The password to use.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gen-password</b></dt>
  <dd class="It-tag">Generate a password and print it to stdout.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>add-hosts</b> [<b>-h</b>] <i>SERVICE</i> <i>HOST</i> [<i>HOST</i> ...]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Add hosts that a service can connect from.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOST [HOST ...]</b></dt>
  <dd class="It-tag">Add hosts that this service is able to connect from. Note:
      This must be an IPv4 or IPv6 address, NOT a hostname.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>add-permissions</b> [<b>-h</b>] <i>SERVICE</i> <i>PERM</i> [<i>PERM</i> ...]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Add permissions to a service. This command
  supports shell wildcard style expansions, so 'user*' will add all user
  permissions.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>PERM [PERM ...]</b></dt>
  <dd class="It-tag">Permissions to add to the specified service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>ls</b> [<b>-h</b>]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">List all available services.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>rename</b> [<b>-h</b>] <i>SERVICE</i> <i>NAME</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Rename a service.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>NAME</b></dt>
  <dd class="It-tag">The new name for the service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>rm</b> [<b>-h</b>] <i>SERVICE</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Completely remove a service. This will also
  remove any groups associated with that service.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>rm-hosts</b> [<b>-h</b>] <i>SERVICE</i> <i>HOST</i> [<i>HOST</i> ...]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Remove hosts that a service can connect from.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOST [HOST ...]</b></dt>
  <dd class="It-tag">Remove hosts that this service is able to connect from.
      Note: This must be an IPv4 or IPv6 address, NOT a hostname.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>rm-permissions</b> [<b>-h</b>] <i>SERVICE</i> <i>PERM</i> [<i>PERM</i> ...]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Remove permissions from a service. This
  command supports shellwildcard style expansions, so &quot;user*&quot; will
  remove all user permissions.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>PERM [PERM ...]</b></dt>
  <dd class="It-tag">Permissions to remove from the specified service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>set-hosts</b> [<b>-h</b>] <i>SERVICE</i> [<i>HOST</i> [<i>HOST</i> ...]]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Set hosts that a service can connect from.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>[HOST [HOST ...]]</b></dt>
  <dd class="It-tag">Hosts that this service is able to connect from. Note: This
      must be an IPv4 or IPv6 address, NOT a hostname.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>set-password</b> [<b>-h</b>] [<b>--password</b> <i>PWD</i> |
  <b>--gen-password</b>] <i>SERVICE</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Set the password for a service.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--password PWD</b></dt>
  <dd class="It-tag">The password to use.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gen-password</b></dt>
  <dd class="It-tag">Generate a password and print it to stdout.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>set-permissions</b> [<b>-h</b>] <i>SERVICE</i> [<i>PERM</i> [<i>PERM</i>
  ...]]
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">Set permissions of a service, removes any
  previous permissions. This command supports shell wildcard style expansions,
  so &quot;user*&quot; will set all user permissions.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>[PERM [PERM ...]]</b></dt>
  <dd class="It-tag">Set the permissions of the specified service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>view</b> [<b>-h</b>] <i>SERVICE</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 7.00ex;">View details of a service.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SERVICE</b></dt>
  <dd class="It-tag">The name of the service.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AVAILABLE_PERMISSIONS"><a class="selflink" href="#AVAILABLE_PERMISSIONS">AVAILABLE
  PERMISSIONS</a></h1>
A service can have zero or more permissions. There is a permission available for
  each operation available via the RestAuth protocol. If a service has no
  permissions, you will not be able to perform any operations.
<h2 class="Ss" title="Ss" id="Handling_users"><a class="selflink" href="#Handling_users">Handling
  users</a></h2>
<table class="tbl">
  <colgroup>
    <col style="width: 20.00ex;"/>
    <col style="width: 23.00ex;"/>
  </colgroup>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>permission</td>
    <td>description</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>users_list</td>
    <td>List all users</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_create</td>
    <td>Create a new user</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_exists</td>
    <td>Check if a user exists</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_delete</td>
    <td>Delete a user</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_verify_password</td>
    <td>Verify a users password</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_change_password</td>
    <td>Change a users password</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>user_delete_password</td>
    <td>Delete a user</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
</table>
<h2 class="Ss" title="Ss" id="Handling_properties"><a class="selflink" href="#Handling_properties">Handling
  properties</a></h2>
<table class="tbl">
  <colgroup>
    <col style="width: 11.00ex;"/>
    <col style="width: 29.00ex;"/>
  </colgroup>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>permission</td>
    <td>description</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>props_list</td>
    <td>List all properties of a user</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>prop_create</td>
    <td>Create a new property</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>prop_get</td>
    <td>Get value of a property</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>prop_set</td>
    <td>Set or create a property</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>prop_delete</td>
    <td>Delete a property</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
</table>
<h2 class="Ss" title="Ss" id="Handling_groups"><a class="selflink" href="#Handling_groups">Handling
  groups</a></h2>
<table class="tbl">
  <colgroup>
    <col style="width: 19.00ex;"/>
    <col style="width: 32.00ex;"/>
  </colgroup>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>permission</td>
    <td>description</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>groups_for_user</td>
    <td>List groups for a user</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>groups_list</td>
    <td>List all groups</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_create</td>
    <td>Create a new group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_exists</td>
    <td>Verify that a group exists</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_delete</td>
    <td>Delete a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_users</td>
    <td>List users in a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_add_user</td>
    <td>Add a user to a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_user_in_group</td>
    <td>Verify that a user is in a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_remove_user</td>
    <td>Remove a user from a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_groups_list</td>
    <td>List subgroups of a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_add_group</td>
    <td>Add a subgroup to a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>group_remove_group</td>
    <td>Remove a subgroup from a group</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="INFLUENTIAL_ENVIRONMENT_VARIABLES"><a class="selflink" href="#INFLUENTIAL_ENVIRONMENT_VARIABLES">INFLUENTIAL
  ENVIRONMENT VARIABLES</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>DJANGO_SETTINGS_MODULE</b></dt>
  <dd class="It-tag">The path to the Django settings module. If not set,
      <b>RestAuth.settings</b> is used, which should be fine in most cases. For
      more information, please read the <i>Django documentation</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>PYTHONPATH</b></dt>
  <dd class="It-tag">A semi-colon (';') seperated list of additional directories
      to search for python modules. The RestAuth installation must be in the
      module search path for any commands to work. For more information, please
      read the <i>official python documentation</i>.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="See_Also"><a class="selflink" href="#See_Also">See
  Also</a></h2>
<i>restauth-user(1)</i>, <i>restauth-group(1)</i>, <i>restauth-import(1)</i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Mathias Ertl
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2010-2012, Mathias Ertl</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 5, 2016</td>
    <td class="foot-os">0.6.3</td>
  </tr>
</table>
</body>
</html>
