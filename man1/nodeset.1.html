<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:27:25 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>NODESET(1) ClusterShell User Manual NODESET(1)</p>

<p style="margin-top: 1em">NAME <br>
nodeset - compute advanced nodeset operations</p>

<p style="margin-top: 1em">SYNOPSIS <br>
nodeset [OPTIONS] [COMMAND] [nodeset1 [OPERATION]
nodeset2|...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Note: nodeset and cluset are the same command.</p>

<p style="margin-top: 1em">nodeset is an utility command
provided with the ClusterShell library which implements some
features of ClusterShell&rsquo;s NodeSet and RangeSet Python
classes. It provides easy <br>
manipulation of 1D or nD-indexed cluster nodes and node
groups and supports RFC 1123 (except that a node name
can&rsquo;t be entirely numeric).</p>

<p style="margin-top: 1em">Also, nodeset is automatically
bound to the library node group resolution mechanism. Thus,
it is especially useful to enhance cluster aware
administration shell scripts.</p>

<p style="margin-top: 1em">OPTIONS <br>
--version <br>
show program&rsquo;s version number and exit</p>

<p style="margin-top: 1em">-h, --help <br>
show this help message and exit</p>

<p style="margin-top: 1em">-s GROUPSOURCE,
--groupsource=GROUPSOURCE <br>
optional groups.conf(5) group source to use</p>

<p style="margin-top: 1em">Commands:</p>

<p style="margin-top: 1em">-c, --count <br>
show number of nodes in nodeset(s)</p>

<p style="margin-top: 1em">-e, --expand <br>
expand nodeset(s) to separate nodes (see also -S
SEPARATOR)</p>

<p style="margin-top: 1em">-f, --fold <br>
fold nodeset(s) (or separate nodes) into one nodeset</p>

<p style="margin-top: 1em">-l, --list <br>
list node groups, list node groups and nodes (-ll) or list
node groups, nodes and node count (-lll). When no argument
is specified at all, this command will list <br>
all node group names found in selected group source (see
also -s GROUPSOURCE). If any nodesets are specified as
argument, this command will find node groups <br>
these nodes belongs to (individually). Optionally for each
group, the fraction of these nodes being member of the group
may be displayed (with -ll), and also <br>
member count/total group node count (with -lll). If a single
hyphen-minus (-) is given as a nodeset, it will be read from
standard input.</p>

<p style="margin-top: 1em">-r, --regroup <br>
fold nodes using node groups (see -s GROUPSOURCE)</p>

<p style="margin-top: 1em">--groupsources <br>
list all active group sources (see groups.conf(5))</p>

<p style="margin-top: 1em">Operations:</p>

<p style="margin-top: 1em">-x SUB_NODES,
--exclude=SUB_NODES <br>
exclude specified nodeset</p>

<p style="margin-top: 1em">-i AND_NODES,
--intersection=AND_NODES <br>
calculate nodesets intersection</p>

<p style="margin-top: 1em">-X XOR_NODES, --xor=XOR_NODES
<br>
calculate symmetric difference between nodesets</p>

<p style="margin-top: 1em">Options:</p>

<p style="margin-top: 1em">-a, --all <br>
call external node groups support to display all nodes</p>

<p style="margin-top: 1em">--autostep=AUTOSTEP <br>
enable a-b/step style syntax when folding nodesets, value is
min node count threshold (integer &rsquo;4&rsquo;,
percentage &rsquo;50%&rsquo; or &rsquo;auto&rsquo;). If not
specified, auto step is <br>
disabled (best for compatibility with other cluster tools.
Example: autostep=4, &quot;node2 node4 node6&quot; folds in
node[2,4,6] but autostep=3, &quot;node2 node4 node6&quot;
<br>
folds in node[2-6/2].</p>

<p style="margin-top: 1em">-d, --debug <br>
output more messages for debugging purpose</p>

<p style="margin-top: 1em">-q, --quiet <br>
be quiet, print essential output only</p>

<p style="margin-top: 1em">-R, --rangeset <br>
switch to RangeSet instead of NodeSet. Useful when working
on numerical cluster ranges, eg. 1,5,18-31</p>

<p style="margin-top: 1em">-G, --groupbase <br>
hide group source prefix (always @groupname)</p>

<p style="margin-top: 1em">-S SEPARATOR,
--separator=SEPARATOR <br>
separator string to use when expanding nodesets (default:
&rsquo; &rsquo;)</p>

<p style="margin-top: 1em">-O FORMAT,
--output-format=FORMAT <br>
output format (default: &rsquo;%s&rsquo;)</p>

<p style="margin-top: 1em">-I SLICE_RANGESET,
--slice=SLICE_RANGESET <br>
return sliced off result; examples of SLICE_RANGESET are
&quot;0&quot; for simple index selection, or
&quot;1-9/2,16&quot; for complex rangeset selection</p>

<p style="margin-top: 1em">--split=MAXSPLIT <br>
split result into a number of subsets</p>

<p style="margin-top: 1em">--contiguous <br>
split result into contiguous subsets (ie. for nodeset,
subsets will contain nodes with same pattern name and a
contiguous range of indexes, like foobar[1-100]; <br>
for rangeset, subsets with consists in contiguous index
ranges)&quot;&quot;&quot;</p>

<p style="margin-top: 1em">--axis=RANGESET <br>
for nD nodesets, fold along provided axis only. Axis are
indexed from 1 to n and can be specified here either using
the rangeset syntax, eg. &rsquo;1&rsquo;, &rsquo;1-2&rsquo;,
&rsquo;1,3&rsquo;, <br>
or by a single negative number meaning that the indice is
counted from the end. Because some nodesets may have several
different dimensions, axis indices are <br>
silently truncated to fall in the allowed range.</p>

<p style="margin-top: 1em">--pick=N <br>
pick N node(s) at random in nodeset</p>

<p style="margin-top: 1em">For a short explanation of these
options, see -h, --help.</p>

<p style="margin-top: 1em">If a single hyphen-minus (-) is
given as a nodeset, it will be read from standard input.</p>

<p style="margin-top: 1em">EXTENDED PATTERNS <br>
The nodeset command benefits from ClusterShell NodeSet basic
arithmetic addition. This feature extends recognized string
patterns by supporting operators matching all Operations
<br>
seen previously. String patterns are read from left to
right, by proceeding any character operators
accordingly.</p>

<p style="margin-top: 1em">Supported character
operators</p>

<p style="margin-top: 1em">, indicates that the union of
both left and right nodeset should be computed before
continuing</p>

<p style="margin-top: 1em">! indicates the difference
operation</p>

<p style="margin-top: 1em">&amp; indicates the intersection
operation</p>

<p style="margin-top: 1em">^ indicates the symmetric
difference (XOR) operation</p>

<p style="margin-top: 1em">Care should be taken to escape
these characters as needed when the shell does not interpret
them literally.</p>

<p style="margin-top: 1em">Examples of use of extended
patterns</p>

<p style="margin-top: 1em">$ nodeset -f
node[0-7],node[8-10] <br>
node[0-10]</p>

<p style="margin-top: 1em">$ nodeset -f
node[0-10]!node[8-10] <br>
node[0-7]</p>

<p style="margin-top: 1em">$ nodeset -f
node[0-10]&amp;node[5-13] <br>
node[5-10]</p>

<p style="margin-top: 1em">$ nodeset -f
node[0-10]^node[5-13] <br>
node[0-4,11-13]</p>

<p style="margin-top: 1em">Example of advanced usage</p>

<p style="margin-top: 1em">$ nodeset -f
@gpu^@slurm:bigmem!@chassis[1-9/2]</p>

<p style="margin-top: 1em">This computes a folded nodeset
containing nodes found in group @gpu and @slurm:bigmem, but
not in both, minus the nodes found in odd chassis groups
from 1 to 9.</p>

<p style="margin-top: 1em">All nodes extension (v1.7+) <br>
The @* and @SOURCE:* special notations may be used in
extended patterns to represent all nodes (in SOURCE)
according to the all external shell command (see
groups.conf(5)) <br>
and are equivalent to:</p>

<p style="margin-top: 1em">$ nodeset [-s SOURCE] -a -f</p>

<p style="margin-top: 1em">EXIT STATUS <br>
An exit status of zero indicates success of the nodeset
command. A non-zero exit status indicates failure.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Getting the node count</p>

<p style="margin-top: 1em">$ nodeset -c node[0-7,32-159]
<br>
136</p>

<p style="margin-top: 1em">$ nodeset -c node[0-7,32-159]
node[160-163] <br>
140</p>

<p style="margin-top: 1em">$ nodeset -c dc[1-2]n[100-199]
<br>
200</p>

<p style="margin-top: 1em">$ nodeset -c @login <br>
4</p>

<p style="margin-top: 1em">Folding nodesets</p>

<p style="margin-top: 1em">$ nodeset -f node[0-7,32-159]
node[160-163] <br>
node[0-7,32-163]</p>

<p style="margin-top: 1em">$ echo node3 node6 node1 node2
node7 node5 | nodeset -f <br>
node[1-3,5-7]</p>

<p style="margin-top: 1em">$ nodeset -f dc1n2 dc2n2 dc1n1
dc2n1 <br>
dc[1-2]n[1-2]</p>

<p style="margin-top: 1em">$ nodeset --axis=1 -f dc1n2
dc2n2 dc1n1 dc2n1 <br>
dc[1-2]n1,dc[1-2]n2</p>

<p style="margin-top: 1em">Expanding nodesets</p>

<p style="margin-top: 1em">$ nodeset -e node[160-163] <br>
node160 node161 node162 node163</p>

<p style="margin-top: 1em">$ echo
&rsquo;dc[1-2]n[2-6/2]&rsquo; | nodeset -e <br>
dc1n2 dc1n4 dc1n6 dc2n2 dc2n4 dc2n6</p>

<p style="margin-top: 1em">Excluding nodes from nodeset</p>

<p style="margin-top: 1em">$ nodeset -f node[32-159] -x
node33 <br>
node[32,34-159]</p>

<p style="margin-top: 1em">Computing nodesets
intersection</p>

<p style="margin-top: 1em">$ nodeset -f node[32-159] -i
node[0-7,20-21,32,156-159] <br>
node[32,156-159]</p>

<p style="margin-top: 1em">Computing nodesets symmetric
difference (xor)</p>

<p style="margin-top: 1em">$ nodeset -f node[33-159] --xor
node[32-33,156-159] <br>
node[32,34-155]</p>

<p style="margin-top: 1em">Splitting nodes into several
nodesets (expanding results)</p>

<p style="margin-top: 1em">$ nodeset --split=3 -e node[1-9]
<br>
node1 node2 node3 <br>
node4 node5 node6 <br>
node7 node8 node9</p>

<p style="margin-top: 1em">Splitting non-contiguous
nodesets (folding results)</p>

<p style="margin-top: 1em">$ nodeset --contiguous -f node2
node3 node4 node8 node9 <br>
node[2-4] <br>
node[8-9]</p>

<p style="margin-top: 1em">$ nodeset --contiguous -f
dc[1,3]n[1-2,4-5] <br>
dc1n[1-2] <br>
dc1n[4-5] <br>
dc3n[1-2] <br>
dc3n[4-5]</p>

<p style="margin-top: 1em">HISTORY <br>
Command syntax has been changed since nodeset command
available with ClusterShell v1.1. Operations, like
--intersection or -x, are now specified between nodesets in
the command <br>
line.</p>

<p style="margin-top: 1em">ClusterShell v1.1:</p>

<p style="margin-top: 1em">$ nodeset -f -x node[3,5-6,9]
node[1-9] <br>
node[1-2,4,7-8]</p>

<p style="margin-top: 1em">ClusterShell v1.2+:</p>

<p style="margin-top: 1em">$ nodeset -f node[1-9] -x
node[3,5-6,9] <br>
node[1-2,4,7-8]</p>

<p style="margin-top: 1em">cluset was added in 1.7.3 to
avoid a conflict with xCAT&rsquo;s nodeset command and also
to conform with ClusterShell&rsquo;s &quot;clu*&quot;
command nomenclature.</p>

<p style="margin-top: 1em">SEE ALSO <br>
cluset(1), clush(1), clubak(1), groups.conf(5).</p>

<p style="margin-top: 1em">BUG REPORTS <br>
Use the following URL to submit a bug report or feedback:
<br>
https://github.com/cea-hpc/clustershell/issues</p>

<p style="margin-top: 1em">AUTHOR <br>
Stephane Thiell &lt;sthiell@stanford.edu&gt;</p>

<p style="margin-top: 1em">COPYRIGHT <br>
GNU Lesser General Public License version 2.1 or later
(LGPLv2.1+)</p>

<p style="margin-top: 1em">1.7.3 2016-12-20 NODESET(1)</p>
<hr>
</body>
</html>
