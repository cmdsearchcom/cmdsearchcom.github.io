<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opafabricinfo(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opafabricinfo(1)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opafabricinfo(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opafabricinfo
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Provides a brief summary of the components in the fabric, using the first active
  port on the given local host to perform its analysis. opafabricinfo is
  supplied in both:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Intel(R) Omni-Path Fabric Suite FastFabric Toolset In this
      situation, the command can manage more than one fabric (subnet).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">FastFabric Tools In this situation, the command performs
      analysis against the first active port on the system only. It takes no
      options and uses no environment variables.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
opafabricinfo can be very useful as a quick assessment of the fabric state. It
  can be run against a known good fabric to identify its components and then
  later run to see if anything has changed about the fabric configuration or
  state.
<div class="Pp"></div>
For more extensive fabric analysis, use <i>opareport</i> and <i>opareports</i>
  <i>Intel(R) Omni-Path Fabric Suite FastFabric User Guide</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opafabricinfo [-t <i>portsfile</i>] [-p <i>ports</i>]
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Produces full help text.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-t <i>portsfile</i></dt>
  <dd class="It-tag">File with list of local HFI ports used to access fabric(s)
      for analysis. Default is /etc/sysconfig/opa/ports file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>ports</i></dt>
  <dd class="It-tag">List of local HFI ports used to access fabric(s) for
      analysis. Default is first active port. The first HFI in the system is 1.
      The first port on an HFI is 1.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Uses the format hfi:port, for example:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:0 First active port in system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
0:y Port <i>y</i> within system.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:0 First active port on HFI <i>x</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
x:y HFI <i>x</i>, port <i>y</i>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Environment_Variables"><a class="selflink" href="#Environment_Variables">Environment
  Variables</a></h1>
The following environment variables are also used by this command:
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS</b></dt>
  <dd class="It-tag">List of ports, used in absence of -t and -p.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORTS_FILE</b></dt>
  <dd class="It-tag">File containing list of ports, used in absence of -t and
      -p.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">For simple fabrics, the Intel(R) Omni-Path Fabric Suite
      FastFabric Toolset host is connected to a single fabric. By default, the
      first active port on the FastFabric Toolset host is used to analyze the
      fabric. However, in more complex fabrics, the FastFabric Toolset host may
      be connected to more than one fabric or subnet. In this case, you can
      specify the ports or HFIs to use with one of the following methods:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">On the command line using the -p option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">In a file specified using the -t option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Through the environment variables <b>PORTS</b> or
      <b>PORTS_FILE</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Using the ports_file configuration option in
      opafastfabric.conf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">If the specified port does not exist or is empty, the first
      active port on the local system is used. In more complex configurations,
      you must specify the exact ports to use for all fabrics to be
    analyzed.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Example"><a class="selflink" href="#Example">Example</a></h1>
opafabricinfo
<div>&#x00A0;</div>
opafabricinfo -p '1:1 1:2 2:1 2:2'
<div class="Pp"></div>
<b>Output example</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# opafabricinfo
<div>&#x00A0;</div>
Fabric 0:0 Information:
<div>&#x00A0;</div>
SM: hds1fnb6241 hfi1_0 Guid: 0x0011750101575ffe State: Master
<div>&#x00A0;</div>
Number of HFIs: 8
<div>&#x00A0;</div>
Number of Switches: 1
<div>&#x00A0;</div>
Number of Links: 8
<div>&#x00A0;</div>
Number of HFI Links: 8 (Internal: 0 External: 8)
<div>&#x00A0;</div>
Number of ISLs: 0 (Internal: 0 External: 0)
<div>&#x00A0;</div>
Number of Degraded Links: 0 (HFI Links: 0 ISLs: 0)
<div>&#x00A0;</div>
Number of Omitted Links: 0 (HFI Links: 0 ISLs: 0)</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
