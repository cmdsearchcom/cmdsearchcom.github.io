<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OSMIUM-TAGS-FILTER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OSMIUM-TAGS-FILTER(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">OSMIUM-TAGS-FILTER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
osmium-tags-filter - filter objects matching specified keys/tags
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>osmium tags-filter</b> [<i>OPTIONS</i>] <i>OSM-FILE</i>
  <i>FILTER-EXPRESSION</i>...
<div class="Pp"></div>
<b>osmium tags-filter</b> [<i>OPTIONS</i>] --expressions= <i>FILE</i>
  <i>OSM-FILE</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Get objects matching the specified expressions from the input and write them to
  the output. Expressions can either be specified on the command line or in an
  expressions file. See the <b>FILTER EXPRESSIONS</b> section for a description
  of the filter expression format.
<div class="Pp"></div>
All objects matching the expressions will be read from <i>OSM-FILE</i> and
  written to the output. All objects referenced from those objects will also be
  added to the output unless the option <b>-R</b>, <b>--omit-referenced</b> is
  used. This applies to nodes referenced in ways and members referenced in
  relations.
<div class="Pp"></div>
If the option <b>-R</b>, <b>--omit-referenced</b> is used, the input file is
  read only once, otherwise the input file will possibly be read up to three
  times.
<div class="Pp"></div>
Objects will be written out in the order they are found in the <i>OSM-FILE</i>.
<div class="Pp"></div>
The command will only work correctly on history files if the
  <b>-R</b>/<b>--omit-referenced</b> option is used.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e FILE, --expressions=FILE</b></dt>
  <dd class="It-tag">Read expressions from the specified file, one per line.
      Empty lines are ignored. Everything after the comment character (#) is
      also ignored. The the <b>FILTER EXPRESSIONS</b> section for further
      details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i, --invert-match</b></dt>
  <dd class="It-tag">Invert the sense of matching. Exclude all objects with
      matching tags.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R, --omit-referenced</b></dt>
  <dd class="It-tag">Omit the nodes referenced from matching ways and members
      referenced from matching relations.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="COMMON_OPTIONS"><a class="selflink" href="#COMMON_OPTIONS">COMMON
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show usage help.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Set verbose mode. The program will output information about
      what it is doing to <i>stderr</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--progress</b></dt>
  <dd class="It-tag">Show progress bar. Usually a progress bar is only displayed
      if STDERR is detected to be a TTY. With this option a progress bar is
      always shown. Note that a progress bar will never be shown when reading
      from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress</b></dt>
  <dd class="It-tag">Do not show progress bar. Usually a progress bar is
      displayed if STDERR is detected to be a TTY. With this option the progress
      bar is suppressed. Note that a progress bar will never be shown when
      reading from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="INPUT_OPTIONS"><a class="selflink" href="#INPUT_OPTIONS">INPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F, --input-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the input file(s). Can be used to set the
      input format if it can't be autodetected from the file name(s). This will
      set the format for all input files, there is no way to set the format for
      some input files only. See <b>osmium-file-formats</b>(5) or the libosmium
      manual for details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="OUTPUT_OPTIONS"><a class="selflink" href="#OUTPUT_OPTIONS">OUTPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --output-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the output file. Can be used to set the
      output file format if it can't be autodetected from the output file name.
      See <b>osmium-file-formats</b>(5) or the libosmium manual for
    details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--fsync</b></dt>
  <dd class="It-tag">Call fsync after writing the output file to force flushing
      buffers to disk.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generator=NAME</b></dt>
  <dd class="It-tag">The name and version of the program generating the output
      file. It will be added to the header of the output file. Default is &quot;
      <i>osmium/</i>&quot; and the version of osmium.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o, --output=FILE</b></dt>
  <dd class="It-tag">Name of the output file. Default is '-' (STDOUT).</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O, --overwrite</b></dt>
  <dd class="It-tag">Allow an existing output file to be overwritten. Normally
      <b>osmium</b> will refuse to write over an existing file.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output-header=OPTION</b></dt>
  <dd class="It-tag">Add output header option. This option can be given several
      times. See the <i>libosmium manual</i> for a list of allowed header
      options.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="FILTER_EXPRESSIONS"><a class="selflink" href="#FILTER_EXPRESSIONS">FILTER
  EXPRESSIONS</a></h1>
A filter expression specifies a tag or tags that should be found in the data and
  the type of object (node, way, or relation) that should be matched.
<div class="Pp"></div>
The object type(s) comes first, then a slash (/) and then the rest of the
  expression. Object types are specified as 'n' (for nodes), 'w' (for ways), and
  'r' (for relations). Any combination of them can be used. If the object type
  is not specified, the expression matches all object types.
<div class="Pp"></div>
Some examples:
<dl class="Bl-tag">
  <dt class="It-tag"><b>n/amenity</b></dt>
  <dd class="It-tag">Matches all nodes with the key &quot;amenity&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>nw/highway</b></dt>
  <dd class="It-tag">Matches all nodes or ways with the key
    &quot;highway&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/note</b></dt>
  <dd class="It-tag">Matches objects of any type with the key
    &quot;note&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>note</b></dt>
  <dd class="It-tag">Matches objects of any type with the key
    &quot;note&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>w/highway=primary</b></dt>
  <dd class="It-tag">Matches all ways with the key &quot;highway&quot; and value
      &quot;primary&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>w/highway!=primary</b></dt>
  <dd class="It-tag">Matches all ways with the key &quot;highway&quot; and a
      value other than &quot;primary&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>r/type=multipolygon,boundary</b></dt>
  <dd class="It-tag">Matches all relations with key &quot;type&quot; and value
      &quot;multipolygon&quot; or &quot;boundary&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>w/name,name:de=Kastanienallee,Kastanienstrasse</b></dt>
  <dd class="It-tag">Matches any way with a &quot;name&quot; or
      &quot;name:de&quot; tag with the value &quot;Kastanienallee&quot; or
      &quot;Kastanienstrasse&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>n/addr:*</b></dt>
  <dd class="It-tag">Matches all nodes with any key starting with
      &quot;addr:&quot;</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>n/name=*Paris*</b></dt>
  <dd class="It-tag">Matches all nodes with a name that contains the word
      &quot;Paris&quot;.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<div class="Pp"></div>
If there is no equal sign (&quot;=&quot;) in the expression only keys are
  matched and values can by anything. If there is an equal sign (&quot;=&quot;)
  in the expression, the key is to the left and the value to the right. An
  exclamation sign (&quot;!&quot;) before the equal sign means: A tag with that
  key, but not the value(s) to the right of the equal sign. A leading or
  trailing asterisk (&quot;*&quot;) can be used for substring or prefix
  matching, respectively. Commas (&quot;,&quot;) can be used to separate several
  keys or values.
<div class="Pp"></div>
All filter expressions are case-sensitive. There is no way to escape the special
  characters such as &quot;=&quot;, &quot;*&quot; and &quot;,&quot;. You can not
  mix comma-expressions and &quot;*&quot;-expressions.
<div class="Pp"></div>
The filter expressions specified in a file and/or on the command line are
  matched in the order they are given. To achieve best performance, put
  expressions expected to match more often first.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<b>osmium tags-filter</b> exits with exit code
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">if everything went alright,</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">if there was an error processing the data, or</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">if there was a problem with the command line
    arguments.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="MEMORY_USAGE"><a class="selflink" href="#MEMORY_USAGE">MEMORY
  USAGE</a></h1>
<b>osmium tags-filter</b> does all its work on the fly and only keeps tables of
  object IDs it needs in main memory. If the <b>-R</b>/<b>--omit-referenced</b>
  option is used, no IDs are kept in memory.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Get all amenity nodes from the Berlin PBF file:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;tags-filter&#x00A0;-o&#x00A0;amenties.osm.pbf&#x00A0;berlin.osm.pbf&#x00A0;n/amenity
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Get all objects (nodes, ways, or relations) with a note tag:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;tags-filter&#x00A0;-R&#x00A0;-o&#x00A0;notes.osm.pbf&#x00A0;berlin.osm.pbf&#x00A0;note
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Get all nodes and ways with a highway tag and all relations tagged with
  type=restriction plus all referenced objects:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;tags-filter&#x00A0;-o&#x00A0;filtered.osm.pbf&#x00A0;planet.osm.pbf&#x00A0;\
&#x00A0;&#x00A0;&#x00A0;&#x00A0;nw/highway&#x00A0;r/type=restriction
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>osmium</b>(1), <b>osmium-file-formats</b>(5)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Osmium website (http://osmcode.org/osmium-tool/)</dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2013-2017 Jochen Topf &lt;jochen@topf.org&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
License GPLv3+: GNU GPL version 3 or later
  &lt;https://gnu.org/licenses/gpl.html&gt;. This is free software: you are free
  to change and redistribute it. There is NO WARRANTY, to the extent permitted
  by law.
<h1 class="Sh" title="Sh" id="CONTACT"><a class="selflink" href="#CONTACT">CONTACT</a></h1>
If you have any questions or want to report a bug, please go to
  http://osmcode.org/contact.html
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Jochen Topf &lt;jochen@topf.org&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.6.1</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
