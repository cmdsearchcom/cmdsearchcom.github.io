<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:53:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>autopkgtest-buildvm-ubuntu-cloud(1) General Commands
Manual autopkgtest-buildvm-ubuntu-cloud(1)</p>

<p style="margin-top: 1em">NAME <br>
autopkgtest-buildvm-ubuntu-cloud - Create Ubuntu cloud image
based VM for autopkgtest-virt-qemu</p>

<p style="margin-top: 1em">SYNOPSIS <br>
autopkgtest-buildvm-ubuntu-cloud [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
autopkgtest-buildvm-ubuntu-cloud downloads an Ubuntu cloud
image and configures it for autopkgtest&rsquo;s QEMU runner
(autopkgtest-virt-qemu):</p>

<p style="margin-top: 1em">* Resize the image to 6 GB (by
default, you can change this with an option), which ought to
be sufficient for most tests.</p>

<p style="margin-top: 1em">* Create an user
&quot;ubuntu&quot; with password &quot;ubuntu&quot;.</p>

<p style="margin-top: 1em">* Add apt sources for
&quot;restricted&quot; and &quot;multiverse&quot;
components.</p>

<p style="margin-top: 1em">* Create an init.d script to
start a root shell on ttyS1 at boot, so that
autopkgtest-virt-qemu can be used without additional
arguments or logging in through ttyS0.</p>

<p style="margin-top: 1em">You can select release,
architecture, apt proxy, etc. with options. The defaults are
aimed at testing the development series of the architecture
of your host system.</p>

<p style="margin-top: 1em">OPTIONS <br>
-a arch | --arch=arch <br>
Ubuntu architecture name, e. g. &quot;i386&quot; or
&quot;amd64&quot;. Default is the host system
architecture.</p>

<p style="margin-top: 1em">-r codename | --release=codename
<br>
Ubuntu release code name, e. g. &quot;trusty&quot;. Default
is the current development series (this needs
python-distro-info installed).</p>

<p style="margin-top: 1em">-m URL | --mirror=URL <br>
Mirror for apt (default:
http://archive.ubuntu.com/ubuntu).</p>

<p style="margin-top: 1em">-p URL | --proxy=URL <br>
Proxy for apt. If you have an apt proxy configured on the
local host, the VM will automatically use this; otherwise
there is no default.</p>

<p style="margin-top: 1em">--cloud-image-url=URL <br>
URL from where to download the cloud images (default:
http://cloud-images.ubuntu.com).</p>

<p style="margin-top: 1em">-s DISK_SIZE |
--disk-size=DISK_SIZE <br>
Grow downloaded image (which have a default size of 2GB) by
this size (default: 4G, i. e. the image will be 6GB big in
total).</p>

<p style="margin-top: 1em">-o DIR | --output-dir=DIR <br>
Output directory for generated image (default: current
directory).</p>

<p style="margin-top: 1em">-q command |
--qemu-command=command <br>
QEMU command to run. This defaults to the qemu-system-* that
matches your system architecture.</p>

<p style="margin-top: 1em">-v | --verbose <br>
Show VM guest and cloud-init output.</p>

<p style="margin-top: 1em">--no-apt-upgrade <br>
Do not run apt-get dist-upgrade during initialization.</p>

<p style="margin-top: 1em">--post-command=COMMAND <br>
Run shell command in the VM after the setup.</p>

<p style="margin-top: 1em">--metadata=METADATA_FILE <br>
Use a custom cloud-init metadata file to initialize the
cloud image VM.</p>

<p style="margin-top: 1em">--userdata=USERDATA_FILE <br>
Use a custom cloud-init userdata file to initialize the
cloud image VM.</p>

<p style="margin-top: 1em">--timeout=SECONDS <br>
Timeout for cloud-init. Default is 3600 s.</p>

<p style="margin-top: 1em">CONFIGURATION FILES <br>
If you use lots of options, you can put parts of, or the
whole command line into a text file, with one line per
option. E. g. you can create a file trusty-i386.cfg with
contents <br>
like</p>

<p style="margin-top: 1em">-rtrusty <br>
-ai386 <br>
--proxy=http://mysquid.mynetwork <br>
-v</p>

<p style="margin-top: 1em">and then run</p>


<p style="margin-top: 1em">autopkgtest-buildvm-ubuntu-cloud
@trusty-i386.cfg</p>

<p style="margin-top: 1em">The contents of the
configuration file will be expanded in-place as if you would
have given its contents on the command line. Please ensure
that you don&rsquo;t place spaces between <br>
short options and their values, they would become a part of
the argument value.</p>

<p style="margin-top: 1em">SEE ALSO <br>
autopkgtest-virt-qemu(1), autopkgtest(1),
http://cloud-images.ubuntu.com,
/usr/share/doc/autopkgtest/.</p>

<p style="margin-top: 1em">AUTHORS AND COPYRIGHT <br>
autopkgtest-buildvm-ubuntu-cloud was written by Martin Pitt
&lt;martin.pitt@ubuntu.com&gt;</p>

<p style="margin-top: 1em">This manpage is part of
autopkgtest, a tool for testing Debian binary packages.
autopkgtest is Copyright (C) 2006-2014 Canonical Ltd and
others.</p>

<p style="margin-top: 1em">See
/usr/share/doc/autopkgtest/CREDITS for the list of
contributors and full copying conditions.</p>

<p style="margin-top: 1em">Linux Programmer&rsquo;s Manual
2014 autopkgtest-buildvm-ubuntu-cloud(1)</p>
<hr>
</body>
</html>
