<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BEAKER-WIZARD(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BEAKER-WIZARD(1)</td>
    <td class="head-vol">Beaker</td>
    <td class="head-rtitle">BEAKER-WIZARD(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
beaker-wizard - Tool to ease the creation of a new Beaker task
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<b>beaker-wizard</b> [<i>options</i>] &lt;testname&gt; &lt;bug&gt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
The <i>testname</i> argument should be specified as:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
[[[NAMESPACE/]PACKAGE/]TYPE/][PATH/]NAME
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
which can be shortened as you need:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
TESTNAME
TYPE/TESTNAME
TYPE/PATH/TESTNAME
PACKAGE/TYPE/NAME
PACKAGE/TYPE/PATH/NAME
NAMESPACE/PACKAGE/TYPE/NAME
NAMESPACE/PACKAGE/TYPE/PATH/NAME
</pre>
</div>
<br/>
</div>
<br/>
<pre>
<b>beaker-wizard</b> Makefile
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
This form will run the Wizard in the Makefile edit mode which allows you to
  quickly and simply update metadata of an already existing test while trying to
  keep the rest of the Makefile untouched.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Beaker Wizard is a tool which can transform that &quot;create all the necessary
  files with correct names, values, and paths&quot; boring phase of every test
  creation into one-line joy. For power users there is a lot of inspiration in
  the man page. For quick start just <b>cd</b> to your test package directory
  and simply run <b>beaker-wizard</b>.
<div style="height: 1.00em;">&#x00A0;</div>
The beaker-wizard was designed to be flexible: it is intended not only for
  beginning Beaker users who will welcome questions with hints but also for
  experienced test writers who can make use of the extensive command-line
  options to push their new-test-creating productivity to the limits.
<div style="height: 1.00em;">&#x00A0;</div>
For basic usage help, see <i>Options</i> below or run <b>beaker-wizard -h</b>.
  For advanced features and expert usage examples, read on.
<h2 class="Ss" title="Ss" id="Highlights"><a class="selflink" href="#Highlights">Highlights</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">provide reasonable defaults wherever possible</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">flexible confirmation (<b>--every</b>, <b>--common</b>,
      <b>--yes</b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">predefined skeletons (beaker, beakerlib, simple, multihost,
      library, parametrized, empty)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">saved user preferences (defaults, user skeletons,
    licenses)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Bugzilla integration (fetch bug info, reproducers, suggest
      name, description)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Makefile edit mode (quick adding of bugs, limiting archs or
      releases...)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">automated adding created files to the git repository</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Skeletons"><a class="selflink" href="#Skeletons">Skeletons</a></h2>
Another interesting feature is that you can save your own skeletons into the
  preferences file, so that you can automatically populate the new test scripts
  with your favourite structure.
<div style="height: 1.00em;">&#x00A0;</div>
All of the test related metadata gathered by the Wizard can be expanded inside
  the skeletons using XML tags. For example: use <b>&lt;package/&gt;</b> for
  expanding into the test package name or <b>&lt;test/&gt;</b> for the full test
  name.
<div style="height: 1.00em;">&#x00A0;</div>
The following metadata variables are available:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">test namespace package type path testname description</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">bugs reproducers requires architectures releases version
      time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">priority license confidential destructive</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">skeleton author email</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h<b>,</b><b> --help</b></b></dt>
  <dd class="It-tag">show this help message and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V<b>,</b><b> --version</b></b></dt>
  <dd class="It-tag">display version info and quit</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Basic metadata:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b><i>&#x00A0;DESCRIPTION</i></dt>
  <dd class="It-tag">short description</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b><i>&#x00A0;ARCHS</i></dt>
  <dd class="It-tag">architectures [All]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b><i>&#x00A0;RELEASES</i></dt>
  <dd class="It-tag">releases [All]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b><i>&#x00A0;PACKAGES</i></dt>
  <dd class="It-tag">run for packages [wizard]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b><i>&#x00A0;PACKAGES</i></dt>
  <dd class="It-tag">required packages [wizard]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b><i>&#x00A0;TIME</i></dt>
  <dd class="It-tag">test time [5m]</dd>
</dl>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Extra metadata:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b><i>&#x00A0;VERSION</i></dt>
  <dd class="It-tag">test version [1.0]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b><i>&#x00A0;PRIORITY</i></dt>
  <dd class="It-tag">priority [Normal]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b><i>&#x00A0;LICENSE</i></dt>
  <dd class="It-tag">license [GPLv2+]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b><i>&#x00A0;INTERNAL</i></dt>
  <dd class="It-tag">confidential [No]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b><i>&#x00A0;UGLY</i></dt>
  <dd class="It-tag">destructive [No]</dd>
</dl>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Author info:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b><i>&#x00A0;NAME</i></dt>
  <dd class="It-tag">your name [Petr Splichal]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b><i>&#x00A0;MAIL</i></dt>
  <dd class="It-tag">your email address [<i>psplicha@redhat.com</i>
      &lt;<b>psplicha@redhat.com</b>&gt;]</dd>
</dl>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Test creation specifics:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b><i>&#x00A0;SKELETON</i></dt>
  <dd class="It-tag">skeleton to use [beakerlib]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b><i>&#x00A0;PREFIX</i></dt>
  <dd class="It-tag">join the bug prefix to the testname [Yes]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f<b>,</b><b> --force</b></b></dt>
  <dd class="It-tag">force without review and overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w<b>,</b><b> --write</b></b></dt>
  <dd class="It-tag">write preferences to ~/.beaker_client/wizard</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b<b>,</b><b> --bugzilla</b></b></dt>
  <dd class="It-tag">contact bugzilla to get bug details</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g<b>,</b><b> --git</b></b></dt>
  <dd class="It-tag">add created files to the git repository</dd>
</dl>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Confirmation and verbosity:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v<b>,</b><b> --verbose</b></b></dt>
  <dd class="It-tag">display detailed info about every action</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e<b>,</b><b> --every</b></b></dt>
  <dd class="It-tag">prompt for each and every available option</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c<b>,</b><b> --common</b></b></dt>
  <dd class="It-tag">confirm only commonly used options [Default]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y<b>,</b><b> --yes</b></b></dt>
  <dd class="It-tag">yes, I'm sure, no questions, just do it!</dd>
</dl>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Some brief examples:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
beaker-wizard overload-performance 379791
    regression test with specified bug and name
    -&gt; /CoreOS/perl/Regression/bz379791-overload-performance
<div class="Pp"></div>
beaker-wizard buffer-overflow 2008-1071 -a i386
    security test with specified CVE and name, i386 arch only
    -&gt; /CoreOS/perl/Security/CVE-2008-1071-buffer-overflow
<div class="Pp"></div>
beaker-wizard Sanity/options -y -a?
    sanity test with given name, ask just for architecture
    -&gt; /CoreOS/perl/Sanity/options
<div class="Pp"></div>
beaker-wizard Sanity/server/smoke
    add an optional path under test type directory
    -&gt; /CoreOS/perl/Sanity/server/smoke
<div class="Pp"></div>
beaker-wizard -by 1234
    contact bugzilla for details, no questions, just review
    -&gt; /CoreOS/installer/Regression/bz1234-Swap-partition-Installer
<div class="Pp"></div>
beaker-wizard -byf 2007-0455
    security test, no questions, no review, overwrite existing files
    -&gt; /CoreOS/gd/Security/CVE-2007-0455-gd-buffer-overrun
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
All of the previous examples assume you're in the package tests directory (e.g.
  <b>cd git/tests/perl</b>). All the necessary directories and files are created
  under this location.
<h2 class="Ss" title="Ss" id="Bugzilla_integration"><a class="selflink" href="#Bugzilla_integration">Bugzilla
  integration</a></h2>
The following example creates a regression test for bug #227655. Option
  <b>-b</b> is used to contact Bugzilla to automatically fetch bug details and
  <b>-y</b> to skip unnecessary questions.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
# beaker-wizard -by 227655
Contacting bugzilla...
Fetching details for bz227655
Examining attachments for possible reproducers
Adding test.pl (simple test using Net::Config)
Adding libnet.cfg (libnet.cfg test config file)
<div class="Pp"></div>
Ready to create the test, please review
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<div class="Pp"></div>
/CoreOS/perl/Regression/bz227655-libnet-cfg-in-wrong-directory
<div class="Pp"></div>
             Namespace : CoreOS
               Package : perl
             Test type : Regression
         Relative path : None
             Test name : bz227655-libnet-cfg-in-wrong-directory
           Description : Test for bz227655 (libnet.cfg in wrong directory)
<div class="Pp"></div>
    Bug or CVE numbers : bz227655
  Reproducers to fetch : test.pl, libnet.cfg
     Required packages : None
         Architectures : All
              Releases : All
               Version : 1.0
                  Time : 5m
<div class="Pp"></div>
              Priority : Normal
               License : GPLv2+
          Confidential : No
           Destructive : No
<div class="Pp"></div>
              Skeleton : beakerlib
                Author : Petr Splichal
                 Email : psplicha@redhat.com
<div class="Pp"></div>
[Everything OK?]
Directory Regression/bz227655-libnet-cfg-in-wrong-directory created
File Regression/bz227655-libnet-cfg-in-wrong-directory/PURPOSE written
File Regression/bz227655-libnet-cfg-in-wrong-directory/runtest.sh written
File Regression/bz227655-libnet-cfg-in-wrong-directory/Makefile written
Attachment test.pl downloaded
Attachment libnet.cfg downloaded
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Command_line"><a class="selflink" href="#Command_line">Command
  line</a></h2>
The extensive command line syntax can come in handy for example when creating a
  bunch of sanity tests for a component. Let's create a test skeleton for each
  of wget's feature areas:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
# cd git/tests/wget
# for test in download recursion rules authentication; do
&gt;   beaker-wizard -yf $test -t 10m -q httpd,vsftpd \
&gt;       -d &quot;Sanity test for $test options&quot;
&gt; done
<div class="Pp"></div>
...
<div class="Pp"></div>
/CoreOS/wget/Sanity/authentication
<div class="Pp"></div>
             Namespace : CoreOS
               Package : wget
             Test type : Sanity
         Relative path : None
             Test name : authentication
           Description : Sanity test for authentication options
<div class="Pp"></div>
    Bug or CVE numbers : None
  Reproducers to fetch : None
     Required packages : httpd, vsftpd
         Architectures : All
              Releases : All
               Version : 1.0
                  Time : 10m
<div class="Pp"></div>
              Priority : Normal
               License : GPLv2+
          Confidential : No
           Destructive : No
<div class="Pp"></div>
              Skeleton : beakerlib
                Author : Petr Splichal
                 Email : psplicha@redhat.com
<div class="Pp"></div>
Directory Sanity/authentication created
File Sanity/authentication/PURPOSE written
File Sanity/authentication/runtest.sh written
File Sanity/authentication/Makefile written
<div class="Pp"></div>
# tree
.
`-- Sanity
    |-- authentication
    |   |-- Makefile
    |   |-- PURPOSE
    |   `-- runtest.sh
    |-- download
    |   |-- Makefile
    |   |-- PURPOSE
    |   `-- runtest.sh
    |-- recursion
    |   |-- Makefile
    |   |-- PURPOSE
    |   `-- runtest.sh
    `-- rules
        |-- Makefile
        |-- PURPOSE
        `-- runtest.sh
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
If you provide an option with a &quot;?&quot; you will be given a list of
  available options and a prompt to type your choice in.
<div style="height: 1.00em;">&#x00A0;</div>
For working Bugzilla integration you need <b>python-bugzilla</b> package
  installed on your system. If you are trying to access a bug with restricted
  access, log in to Bugzilla first with the following command:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
bugzilla login
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
You will be asked for email and password and after successfully logging in a
  <b>~/.bugzillacookies</b> file will be created which then will be used in all
  subsequent Bugzilla queries. Logout can be performed with <b>rm
  ~/.bugzillacookies</b> ;-)
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
All commonly used preferences can be saved into <b>~/.beaker_client/wizard</b>.
  Use &quot;write&quot; command to save current settings when reviewing gathered
  test data or edit the file with you favourite editor.
<div style="height: 1.00em;">&#x00A0;</div>
All options in the config file are self-explanatory. For confirm level choose
  one of: nothing, common or everything.
<h1 class="Sh" title="Sh" id="LIBRARY_TASKS"><a class="selflink" href="#LIBRARY_TASKS">LIBRARY
  TASKS</a></h1>
The &quot;library&quot; skeleton can be used to create a &quot;library
  task&quot;. It allows you to bundle together common functionality which may be
  required across multiple tasks. To learn more, see <i>the BeakerLib
  documentation for library</i> <i>tasks</i>
  &lt;<b>https://fedorahosted.org/beakerlib/wiki/libraries</b>&gt;.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
If you encounter an issue or have an idea for enhancement, please <i>file a new
  bug</i> &lt;
  <b>https://bugzilla.redhat.com/enter_bug.cgi?product=Beaker&amp;component=command+line&amp;short_desc=beaker-wizard:+&amp;status_whiteboard=BeakerWizard&amp;assigned_to=psplicha@redhat.com</b>&gt;.
  See also <i>open bugs</i>
  &lt;<b>https://bugzilla.redhat.com/buglist.cgi?product=Beaker&amp;bug_status=__open__&amp;short_desc=beaker-wizard&amp;short_desc_type=allwordssubstr</b>&gt;.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Beaker documentation</i>
      &lt;<b>http://beaker-project.org/help.html</b>&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>BeakerLib</i>
      &lt;<b>https://fedorahosted.org/beakerlib</b>&gt;</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Petr Splichal &lt;psplicha@redhat.com&gt;
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2013, Red Hat, Inc</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 30, 2017</td>
    <td class="foot-os">24.3</td>
  </tr>
</table>
</body>
</html>
