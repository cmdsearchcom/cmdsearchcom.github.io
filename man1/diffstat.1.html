<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DIFFSTAT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DIFFSTAT(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">DIFFSTAT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>diffstat</b> - make histogram from diff-output
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>diffstat</b><i> [options] [file-specifications]</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program reads the output of <b>diff</b> and displays a histogram of the
  insertions, deletions, and modifications per-file. Diffstat is a program that
  is useful for reviewing large, complex patch files. It reads from one or more
  input files which contain output from <b>diff</b>, producing a histogram of
  the total lines changed for each file referenced.
<div class="Pp"></div>
If the input filename ends with .bz2, .gz, .lzma, .z or .Z, diffstat will read
  the uncompressed data via a pipe from the corresponding program. It also can
  infer the compression type from files piped via the standard input.
<div class="Pp"></div>
Diffstat recognizes the most popular types of output from diff:
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">unified</dt>
  <dd class="It-tag">preferred by the <b>patch</b> utility.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">context</dt>
  <dd class="It-tag">best for readability, but not very compact.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">default</dt>
  <dd class="It-tag">not good for much, but simple to generate.</dd>
</dl>
</div>
<div class="Pp"></div>
<b>Diffstat</b> detects the lines that are output by <b>diff</b> to tell which
  files are compared, and then counts the markers in the first column that
  denote the type of change (insertion, deletion or modification). These are
  shown in the histogram as &quot;+&quot;, &quot;-&quot; and &quot;!&quot;
  characters.
<div class="Pp"></div>
If no filename is given on the command line, <b>diffstat</b> reads the
  differences from the standard input.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">ignore lines matching &quot;Binary files XXX and YYY
      differ&quot; in the diff</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">prefix each line of output with &quot;#&quot;, making it a
      comment-line for shell scripts.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b></dt>
  <dd class="It-tag">add SGR color escape sequences to highlight the
    histogram.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b><i> destination</i></dt>
  <dd class="It-tag">specify a directory containing files which can be referred
      to as the result of applying the differences. <b>diffstat</b> will count
      the lines in the corresponding files (after adjusting the names by the
      <b>-p</b> option) to obtain the total number of lines in each file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The remainder, after subtracting modified and deleted
      lines, is shown as &quot;unchanged lines&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">The debug prints a lot of information. It is normally
      compiled-in, but can be suppressed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b><i> file</i></dt>
  <dd class="It-tag">redirect standard error to <i>file</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b><i> format</i></dt>
  <dd class="It-tag">specify the format of the histogram.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">for concise, which shows only the value and a single
      histogram code for each of insert (+), delete (-) or modify (!)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">for normal output,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">to fill in the histogram with dots,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4</dt>
  <dd class="It-tag">to print each value with the histogram.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Any nonzero value gives a histogram. The dots and
      individual values can be combined, e.g., <b>-f6</b> gives both.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">prints the usage message and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag">suppress the merging of filenames in the report.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-K</b></dt>
  <dd class="It-tag">attempt to improve the annotation of &quot;only&quot; files
      by looking for a match in the resulting set of files and inferring whether
      the file was added or removed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">This does not currently work in combination with <b>-R</b>
      because <b>diffstat</b> maintains only the resulting set of files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">lists only the filenames. No histogram is generated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag">merge insert/delete counts from each &quot;chunk&quot; of
      the patch file to approximate a count of the modified lines.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b><i> number</i></dt>
  <dd class="It-tag">specify the minimum width used for filenames. If you do not
      specify this, <b>diffstat</b> uses the length of the longest filename,
      after stripping common prefixes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b><i> number</i></dt>
  <dd class="It-tag">specify the maximum width used for filenames. Names longer
      than this limit are truncated on the left. If you do not specify this,
      <b>diffstat</b> next checks the <b>-n</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b><i> file</i></dt>
  <dd class="It-tag">redirect standard output to <i>file</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b><i> number</i></dt>
  <dd class="It-tag">override the logic that strips common pathnames, simulating
      the <b>patch</b> &quot;-p&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">suppress the &quot;0 files changed&quot; message for empty
      diffs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r code</b></dt>
  <dd class="It-tag">provides optional rounding of the data shown in histogram,
      rather than truncating with error adjustments.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">is the default. No rounding is performed, but accumulated
      errors are added to following columns.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">rounds the data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">rounds the data and adjusts the histogram to ensure that it
      displays something if there are any differences even if those would
      normally be rounded to zero.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b></dt>
  <dd class="It-tag">Assume patch was created with old and new files
    swapped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">show only the summary line, e.g., number of insertions and
      deletions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b><i> source</i></dt>
  <dd class="It-tag">this is like the <b>-D</b> option, but specifies a location
      where the original files (before applying differences) can be found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">overrides the histogram, generates output of comma
      separated values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">suppress the sorting of filenames in the report.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">show progress, e.g., if the output is redirected to a file,
      write progress messages to the standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">prints the current version number and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b><i> number</i></dt>
  <dd class="It-tag">specify the maximum width of the histogram. The histogram
      will never be shorter than 10 columns, just in case the filenames get too
      large.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<b>Diffstat</b> runs in a portable UNIX&#x00AE; environment.
<div class="Pp"></div>
You can override the compiled-in paths of programs used for decompressing input
  files by setting environment variables corresponding to their name:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
DIFFSTAT_BZCAT_PATH
DIFFSTAT_BZIP2_PATH
DIFFSTAT_COMPRESS_PATH
DIFFSTAT_GZIP_PATH
DIFFSTAT_LZCAT_PATH
DIFFSTAT_PCAT_PATH
DIFFSTAT_UNCOMPRESS_PATH
DIFFSTAT_XZ_PATH
DIFFSTAT_ZCAT_PATH
</pre>
</div>
<div class="Pp"></div>
However, <b>diffstat</b> assumes that the resulting program uses the same
  command-line options, e.g., &quot;-c&quot; to decompress to the standard
  output.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>Diffstat</b> is a single binary module, which uses no auxiliary files.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<b>Diffstat</b> makes a lot of assumptions about the format of a <b>diff</b>
  file.
<div class="Pp"></div>
There is no way to obtain a filename from the standard diff between two files
  with no options. Context diffs work, as well as unified diffs.
<div class="Pp"></div>
There's no easy way to determine the degree of overlap between the
  &quot;before&quot; and &quot;after&quot; displays of modified lines.
  <b>diffstat</b> simply counts the number of inserted and deleted lines to
  approximate modified lines for the <b>-m</b> option.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>diff</b>(1).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Thomas Dickey &lt;dickey@invisible-island.net&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
