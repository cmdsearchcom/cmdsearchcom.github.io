<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>i.landsat.toar(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">i.landsat.toar(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">i.landsat.toar(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>i.landsat.toar</b> - Calculates top-of-atmosphere radiance or
  reflectance and temperature for Landsat MSS/TM/ETM+/OLI
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
imagery, radiometric conversion, radiance, reflectance, brightness temperature,
  atmospheric correction, satellite, Landsat
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>i.landsat.toar</b>
<div>&#x00A0;</div>
<b>i.landsat.toar --help</b>
<div>&#x00A0;</div>
<b>i.landsat.toar</b> [-<b>rnp</b>] <b>input</b>=<i>basename</i>
  <b>output</b>=<i>basename</i> [<b>metfile</b>=<i>name</i>]
  [<b>sensor</b>=<i>string</i>] [ <b>method</b>=<i>string</i>]
  [<b>date</b>=<i>yyyy-mm-dd</i>] [ <b>sun_elevation</b>=<i>float</i>]
  [<b>product_date</b>= <i>yyyy-mm-dd</i>] [<b>gain</b>=<i>string</i>]
  [<b>percent</b>= <i>float</i>] [<b>pixel</b>=<i>integer</i>]
  [<b>rayleigh</b>=<i>float</i>]
  [<b>lsatmet</b>=<i>string</i>[,<i>string</i>,...]] [
  <b>scale</b>=<i>float</i>] [-- <b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output at-sensor radiance instead of reflectance for all bands</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Input raster maps use as extension the number of the band instead the
    code</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print output metadata info</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>basename</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Base name of input raster bands
    <div>&#x00A0;</div>
    Example: &#x2019;B.&#x2019; for B.1, B.2, ...</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>basename</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Prefix for output raster maps
    <div>&#x00A0;</div>
    Example: &#x2019;B.toar.&#x2019; generates B.toar.1, B.toar.2, ...</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>metfile</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of Landsat metadata file (.met or MTL.txt)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sensor</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Spacecraft sensor
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; not given (recommended for sanity)
    <div>&#x00A0;</div>
    Options: <i>mss1, mss2, mss3, mss4, mss5, tm4, tm5, tm7, oli8</i>
    <div>&#x00A0;</div>
     <b>mss1</b>: Landsat-1 MSS
    <div>&#x00A0;</div>
     <b>mss2</b>: Landsat-2 MSS
    <div>&#x00A0;</div>
     <b>mss3</b>: Landsat-3 MSS
    <div>&#x00A0;</div>
     <b>mss4</b>: Landsat-4 MSS
    <div>&#x00A0;</div>
     <b>mss5</b>: Landsat-5 MSS
    <div>&#x00A0;</div>
     <b>tm4</b>: Landsat-4 TM
    <div>&#x00A0;</div>
     <b>tm5</b>: Landsat-5 TM
    <div>&#x00A0;</div>
     <b>tm7</b>: Landsat-7 ETM+
    <div>&#x00A0;</div>
     <b>oli8</b>: Landsat_8 OLI/TIRS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>method</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Atmospheric correction method
    <div>&#x00A0;</div>
    Atmospheric correction method
    <div>&#x00A0;</div>
    Options: <i>uncorrected, dos1, dos2, dos2b, dos3, dos4</i>
    <div>&#x00A0;</div>
    Default: <i>uncorrected</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>date</b>=<i>yyyy-mm-dd</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Image acquisition date (yyyy-mm-dd)
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; not given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sun_elevation</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Sun elevation in degrees
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; not given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>product_date</b>=<i>yyyy-mm-dd</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Image creation date (yyyy-mm-dd)
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; not given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gain</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Gain (H/L) of all Landsat ETM+ bands (1-5,61,62,7,8)
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; not given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>percent</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Percent of solar radiance in path radiance
    <div>&#x00A0;</div>
    Required only if &#x2019;method&#x2019; is any DOS
    <div>&#x00A0;</div>
    Default: <i>0.01</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pixel</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Minimum pixels to consider digital number as dark object
    <div>&#x00A0;</div>
    Required only if &#x2019;method&#x2019; is any DOS
    <div>&#x00A0;</div>
    Default: <i>1000</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rayleigh</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Rayleigh atmosphere (diffuse sky irradiance)
    <div>&#x00A0;</div>
    Required only if &#x2019;method&#x2019; is DOS3
    <div>&#x00A0;</div>
    Default: <i>0.0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lsatmet</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    return value stored for a given metadata
    <div>&#x00A0;</div>
    Required only if &#x2019;metfile&#x2019; and -p given
    <div>&#x00A0;</div>
    Options: <i>number, creation, date, sun_elev, sensor, bands, sunaz, time</i>
    <div>&#x00A0;</div>
     <b>number</b>: Landsat Number
    <div>&#x00A0;</div>
     <b>creation</b>: Creation timestamp
    <div>&#x00A0;</div>
     <b>date</b>: Date
    <div>&#x00A0;</div>
     <b>sun_elev</b>: Sun Elevation
    <div>&#x00A0;</div>
     <b>sensor</b>: Sensor
    <div>&#x00A0;</div>
     <b>bands</b>: Bands count
    <div>&#x00A0;</div>
     <b>sunaz</b>: Sun Azimuth Angle
    <div>&#x00A0;</div>
     <b>time</b>: Time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>scale</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Scale factor for output
    <div>&#x00A0;</div>
    Default: <i>1.0</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>i.landsat.toar</i> is used to transform the calibrated digital number of
  Landsat imagery products to top-of-atmosphere radiance or top-of-atmosphere
  reflectance and temperature (band 6 of the sensors TM and ETM+). Optionally,
  it can be used to calculate the at-surface radiance or reflectance with
  atmospheric correction (DOS method).
<div class="Pp"></div>
Usually, to do so the production date, the acquisition date, and the solar
  elevation are needed. Moreover, for Landsat-7 ETM+ it is also needed the gain
  (high or low) of the nine respective bands.
<div class="Pp"></div>
Optionally (recommended), the data can be read from metadata file (.met or
  MTL.txt) for all Landsat MSS, TM, ETM+ and OLI/TIRS. However, if the solar
  elevation is given the value of the metadata file is overwritten. This is
  necessary when the data in the .met file is incorrect or not accurate. Also,
  if acquisition or production dates are not found in the metadata file then the
  command line values are used.
<div class="Pp"></div>
<b>Attention</b>: Any null value or smaller than QCALmin in the input raster is
  set to null in the output raster and it is not included in the equations.
<h1 class="Sh" title="Sh" id="Uncorrected_at-sensor_values_(method=uncorrected,_default)"><a class="selflink" href="#Uncorrected_at-sensor_values_(method=uncorrected,_default)">Uncorrected
  at-sensor values (method=uncorrected, default)</a></h1>
The standard geometric and radiometric corrections result in a calibrated
  digital number (QCAL = DN) images. To further standardize the impact of
  illumination geometry, the QCAL images are first converted first to at-sensor
  radiance and then to at-sensor reflectance. The thermal band is first
  converted from QCAL to at-sensor radiance, and then to effective at-sensor
  temperature in Kelvin degrees.
<div class="Pp"></div>
Radiometric calibration converts QCAL to <b>at-sensor radiance</b>, a
  radiometric quantity measured in W/(m&#x00B2; * sr * &#x00B5;m) using the
  equations:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">gain = (Lmax - Lmin) / (QCALmax - QCALmin)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">bias = Lmin - gain * QCALmin</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">radiance = gain * QCAL + bias</dd>
</dl>
</div>
where, <i>Lmax</i> and <i>Lmin</i> are the calibration constants, and
  <i>QCALmax</i> and <i>QCALmin</i> are the highest and the lowest points of the
  range of rescaled radiance in QCAL.
<div class="Pp"></div>
Then, to calculate <b>at-sensor reflectance</b> the equations are:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">sun_radiance = [Esun * sin(e)] / (PI * d^2)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">reflectance = radiance / sun_radiance</dd>
</dl>
</div>
where, <i>d</i> is the earth-sun distance in astronomical units, <i>e</i> is the
  solar elevation angle, and <i>Esun</i> is the mean solar exoatmospheric
  irradiance in W/(m&#x00B2; * &#x00B5;m).
<h1 class="Sh" title="Sh" id="Simplified_at-surface_values_(method=dos[1-4])"><a class="selflink" href="#Simplified_at-surface_values_(method=dos[1-4])">Simplified
  at-surface values (method=dos[1-4])</a></h1>
Atmospheric correction and reflectance calibration remove the path radiance,
  i.e. the stray light from the atmosphere, and the spectral effect of solar
  illumination. To output these simple <b>at-surface</b> <b>radiance</b> and
  <b>at-surface reflectance</b>, the equations are (not for thermal bands):
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">sun_radiance = TAUv * [Esun * sin(e) * TAUz + Esky] / (PI *
      d^2)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">radiance_path = radiance_dark - percent * sun_radiance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">radiance = (at-sensor_radiance - radiance_path)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">reflectance = radiance / sun_radiance</dd>
</dl>
</div>
where, <i>percent</i> is a value between 0.0 and 1.0 (usually 0.01), <i>Esky</i>
  is the diffuse sky irradiance, <i>TAUz</i> is the atmospheric transmittance
  along the path from the sun to the ground surface, and <i>TAUv</i> is the
  atmospheric transmittance along the path from the ground surface to the
  sensor. <i>radiance_dark</i> is the at-sensor radiance calculated from the
  darkest object, i.e. DN with a least &#x2019;dark_parameter&#x2019; (usually
  1000) pixels for the entire image. The values are,
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">DOS1: TAUv = 1.0, TAUz = 1.0 and Esky = 0.0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">DOS2: TAUv = 1.0, Esky = 0.0, and TAUz = sin(e) for all
      bands with maximum wave length less than 1. (i.e. bands 4-6 MSS, 1-4 TM,
      and 1-4 ETM+) other bands TAUz = 1.0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">DOS3: TAUv = exp[-t/cos(sat_zenith)], TAUz =
      exp[-t/sin(e)], Esky = rayleigh</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">DOS4: TAUv = exp[-t/cos(sat_zenith)], TAUz =
      exp[-t/sin(e)], Esky = PI * radiance_dark</dd>
</dl>
</div>
<b>Attention</b>: Output radiance remain untouched (i.e. no set to 0.0 when it
  is negative) then they are possible negative values. However, output
  reflectance is set to 0.0 when is obtained a negative value.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
The output raster cell values can be rescaled with the <b>scale</b> parameter
  (e.g., with 100 in case of using reflectance output in <i>i.gensigset</i>).
<h2 class="Ss" title="Ss" id="On_Landsat-8_metadata_file"><a class="selflink" href="#On_Landsat-8_metadata_file">On
  Landsat-8 metadata file</a></h2>
NASA reports a structure of the L1G Metadata file (LDCM-DFCB-004.pdf) for
  Landsat Data Continuity Mission (i.e. Landsat-8).
<div class="Pp"></div>
NASA retains in MIN_MAX_RADIANCE group the necessary information to transform
  Digital Numbers (DN) in radiance values. Then, <i>i.landsat.toar</i> replaces
  the possible standard values with the metadata values. The results match with
  the values reported by the metada file in RADIOMETRIC_RESCALING group.
<div class="Pp"></div>
Also, NASA reports the same values of reflectance for all bands in max-min
  values and in gain-bias values. This is strange that all bands have the same
  range of reflectance. Also, they wrote in the web page as to calculate
  reflectance directly from DN, first with RADIOMETRIC_RESCALING values and
  second divided by sin(sun_elevation).
<div class="Pp"></div>
This is a simple rescaling
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">reflectance = radiance / sun_radiance = (DN * RADIANCE_MULT
      + RADIANCE_ADD) / sun_radiance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">now reflectance = DN * REFLECTANCE_MULT +
    REFLECTANCE_ADD</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">then REFLECTANCE_MULT = RADIANCE_MULT / sun_radiance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">and REFLECTANCE_ADD = RADIANCE_ADD / sun_radiance</dd>
</dl>
</div>
<div class="Pp"></div>
The problem arises when we need ESUN values (not provided) to compute
  sun_radiance and DOS. We assume that REFLECTANCE_MAXIMUM corresponds to the
  RADIANCE_MAXIMUM, then
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">REFLECTANCE_MAXIMUM / sin(e) = RADIANCE_MAXIMUM /
      sun_radiance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Esun = (PI * d^2) * RADIANCE_MAXIMUM /
    REFLECTANCE_MAXIMUM</dd>
</dl>
</div>
where <i>d</i> is the earth-sun distance provided by metadata file or computed
  inside the program.
<div class="Pp"></div>
The <i>i.landsat.toar</i> reverts back the NASA rescaling to continue using
  Lmax, Lmin, and Esun values to compute the constant to convert DN to radiance
  and radiance to reflectance with the &quot;traditional&quot; equations and
  simple atmospheric corrections. <b>Attention</b>: When MAXIMUM values are not
  provided, <i>i.landsat.toar</i> tries to calculate Lmax, Lmin, and Esun from
  RADIOMETRIC_RESCALING (in tests the results were the same).
<h2 class="Ss" title="Ss" id="Calibration_constants"><a class="selflink" href="#Calibration_constants">Calibration
  constants</a></h2>
In verbose mode (flag <b>--verbose</b>), the program write basic satellite data
  and the parameters used in the transformations.
<div class="Pp"></div>
Production date is not an exact value but it is necessary to apply correct
  calibration constants, which were changed in the dates:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-1 MSS: never</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-2 MSS: July 16, 1975</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-3 MSS: June 1, 1978</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-4 MSS: August 26, 1982 and April 1, 1983</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-4 TM: August 1, 1983 and January 15, 1984</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-5 MSS: April 6, 1984 and November 9, 1984</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-5 TM: May 4, 2003 and April, 2 2007</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-7 ETM+: July 1, 2000</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Landsat-8 OLI/TIRS: launched in 2013</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Metadata_file_examples"><a class="selflink" href="#Metadata_file_examples">Metadata
  file examples</a></h2>
Transform digital numbers of Landsat-7 ETM+ in band rasters 203_30.1, 203_30.2
  [...] to uncorrected at-sensor reflectance in output files 203_30.1_toar,
  203_30.2_toar [...] and at-sensor temperature in output files 293_39.61_toar
  and 293_39.62_toar:
<div>&#x00A0;</div>
<pre>
i.landsat.toar input=203_30. output=_toar \
  metfile=p203r030_7x20010620.met
</pre>
or
<div>&#x00A0;</div>
<pre>
i.landsat.toar input=L5121060_06020060714. \
  output=L5121060_06020060714_toar \
  metfile=L5121060_06020060714_MTL.txt
</pre>
or
<div>&#x00A0;</div>
<pre>
i.landsat.toar input=LC80160352013134LGN03_B output=toar \
  metfile=LC80160352013134LGN03_MTL.txt sensor=oli8 date=2013-05-14
</pre>
<h2 class="Ss" title="Ss" id="DOS1_example"><a class="selflink" href="#DOS1_example">DOS1
  example</a></h2>
DN to reflectance using DOS1:
<div>&#x00A0;</div>
<pre>
# rename channels or make a copy to match i.landsat.toar&#x2019;s input scheme:
g.copy raster=lsat7_2002_10,lsat7_2002.1
g.copy raster=lsat7_2002_20,lsat7_2002.2
g.copy raster=lsat7_2002_30,lsat7_2002.3
g.copy raster=lsat7_2002_40,lsat7_2002.4
g.copy raster=lsat7_2002_50,lsat7_2002.5
g.copy raster=lsat7_2002_61,lsat7_2002.61
g.copy raster=lsat7_2002_62,lsat7_2002.62
g.copy raster=lsat7_2002_70,lsat7_2002.7
g.copy raster=lsat7_2002_80,lsat7_2002.8
</pre>
Calculation of reflectance values from DN using DOS1 (metadata obtained from
  p016r035_7x20020524.met.gz):
<div>&#x00A0;</div>
<pre>
i.landsat.toar input=lsat7_2002. output=lsat7_2002_toar. sensor=tm7 \
  method=dos1 date=2002-05-24 sun_elevation=64.7730999 \
  product_date=2004-02-12 gain=HHHLHLHHL
</pre>
The resulting Landsat channels are names lsat7_2002_toar.1 .. lsat7_2002_toar.8.
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Chander G., B.L. Markham and D.L. Helder, 2009: Remote
      Sensing of Environment, vol. 113</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Chander G.H. and B. Markham, 2003.: IEEE Transactions On
      Geoscience And Remote Sensing, vol. 41, no. 11.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Chavez P.S., jr. 1996. Image-based atmospheric corrections
      - Revisited and Improved. Photogrammetric Engineering and Remote Sensing
      62(9): 1025-1036.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Huang et al: At-Satellite Reflectance, 2002: A First Order
      Normalization Of Landsat 7 ETM+ Images.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">R. Irish: Landsat 7. Science Data Users Handbook. February
      17, 2007; 15 May 2011.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Markham B.L. and J.L. Barker, 1986: Landsat MSS and TM
      Post-Calibration Dynamic Ranges, Exoatmospheric Reflectances and
      At-Satellite Temperatures. EOSAT Landsat Technical Notes, No. 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Moran M.S., R.D. Jackson, P.N. Slater and P.M. Teillet,
      1992: Remote Sensing of Environment, vol. 41.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Song et al, 2001: Classification and Change Detection Using
      Landsat TM Data, When and How to Correct Atmospheric Effects? Remote
      Sensing of Environment, vol. 75.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>i.atcorr,</i> <i>r.mapcalc,</i> <i>r.in.gdal</i> <i></i>
<div class="Pp"></div>
Landsat Data Dictionary by USGS
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
E. Jorge Tizado (ej.tizado unileon es), Dept. Biodiversity and Environmental
  Management, University of Le&#x00F3;n, Spain
<div class="Pp"></div>
<i>Last changed: $Date: 2015-12-30 14:00:44 +0100 (Wed, 30 Dec 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: i.landsat.toar source code (history)
<div class="Pp"></div>
Main index | Imagery index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
