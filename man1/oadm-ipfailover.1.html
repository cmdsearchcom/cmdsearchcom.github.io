<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OADM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OADM(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OADM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
oadm ipfailover - Install an IP failover group to a set of nodes
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>oadm ipfailover</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Configure or view IP Failover configuration
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command helps to setup an IP failover configuration for the cluster. An
  administrator can configure IP failover on an entire cluster or on a subset of
  nodes (as defined via a labeled selector).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
If an IP failover configuration does not exist with the given name, the --create
  flag can be passed to create a deployment configuration that will provide IP
  failover capability. If you are running in production, it is recommended that
  the labeled selector for the nodes matches at least 2 nodes to ensure you have
  failover protection, and that you provide a --replicas= &lt;n&gt; value that
  matches the number of nodes for the given labeled selector.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--check-interval</b>=2
<br/>
 Run the check-script at this interval (seconds)
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--check-script</b>=&quot;&quot;
<br/>
 Run this script at the check-interval to verify service is OK
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--create</b>=false
<br/>
 If true, create the configuration if it does not exist.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--dry-run</b>=false
<br/>
 If true, show the result of the operation without performing it.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--images</b>=&quot;openshift/origin-${component}:${version}&quot;
<br/>
 The image to base this IP failover configurator on - ${component} will be
  replaced based on --type.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-i</b>, <b>--interface</b>=&quot;&quot;
<br/>
 Network interface bound by VRRP to use for the set of virtual IP
  ranges/addresses specified.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--iptables-chain</b>=&quot;INPUT&quot;
<br/>
 Add a rule to this iptables chain to accept 224.0.0.28 multicast packets if no
  rule exists. When iptables-chain is empty do not change iptables.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--latest-images</b>=false
<br/>
 If true, attempt to use the latest images instead of the current release
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--notify-script</b>=&quot;&quot;
<br/>
 Run this script when state changes.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-o</b>, <b>--output</b>=&quot;&quot;
<br/>
 Output results as yaml or json instead of executing, or use name for succint
  output (resource/name).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--output-version</b>=&quot;&quot;
<br/>
 The preferred API versions of the output objects
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-r</b>, <b>--replicas</b>=1
<br/>
 The replication factor of this IP failover configuration; commonly 2 when high
  availability is desired. Please ensure this matches the number of nodes that
  satisfy the selector (or default selector) specified.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-l</b>, <b>--selector</b>=&quot;ipfailover=&lt;name&gt;&quot;
<br/>
 Selector (label query) to filter nodes on.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--service-account</b>=&quot;ipfailover&quot;
<br/>
 Name of the service account to use to run the ipfailover pod.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--type</b>=&quot;keepalived&quot;
<br/>
 The type of IP failover configurator to use.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--virtual-ips</b>=&quot;&quot;
<br/>
 A set of virtual IP ranges and/or addresses that the routers bind and serve on
  and provide IP failover capability for.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--vrrp-id-offset</b>=0
<br/>
 Offset to use for setting ids of VRRP instances (default offset is 0). This
  allows multiple ipfailover instances to run within the same cluster.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-w</b>, <b>--watch-port</b>=80
<br/>
 Port to monitor or watch for resource availability.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 Path to a cert. file for the certificate authority
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # Check the default IP failover configuration (&quot;ipfailover&quot;):
  oadm ipfailover
  
  # See what the IP failover configuration would look like if it is created:
  oadm ipfailover -o json
  
  # Create an IP failover configuration if it does not already exist:
  oadm ipfailover ipf --virtual-ips=&quot;10.1.1.1-4&quot; --create
  
  # Create an IP failover configuration on a selection of nodes labeled
  # &quot;router=us-west-ha&quot; (on 4 nodes with 7 virtual IPs monitoring a service
  # listening on port 80, such as the router process).
  oadm ipfailover ipfailover --selector=&quot;router=us-west-ha&quot; --virtual-ips=&quot;1.2.3.4,10.1.1.100-104,5.6.7.8&quot; --watch-port=80 --replicas=4 --create
  
  # Use a different IP failover config image and see the configuration:
  oadm ipfailover ipf-alt --selector=&quot;hagroup=us-west-ha&quot; --virtual-ips=&quot;1.2.3.4&quot; -o yaml --images=myrepo/myipfailover:mytag
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>oadm(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
