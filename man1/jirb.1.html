<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>JIRB1.3(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">JIRB1.3(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">JIRB1.3(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
jirb1.3 - interactive JRuby
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>jirb</b> [ <i>options</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
irb stands for `interactive JRuby'. irb is a tool to execute interactively JRuby
  expressions read from stdin. Use of jirb is easy if you know JRuby. Executing
  jirb, prompts are displayed as follows. Then, enter expression of ruby. A
  input is executed when it is syntacticaly completed.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    $ jirb1.3
    irb(main):001:0&gt; 1+2
    3
    irb(main):002:0&gt; class Foo
    irb(main):003:1&gt;  def foo
    irb(main):004:2&gt;    print 1
    irb(main):005:2&gt;  end
    irb(main):006:1&gt; end
    nil
    irb(main):007:0&gt; 
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
And, Readline extesion module can be used with irb. Using Readline is the
  standard default action if Readline is installed.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>-f</b></dt>
  <dd class="It-tag">suppress read ~/.irbrc</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>-m</b></dt>
  <dd class="It-tag">bc mode (fraction or matrix are available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>-d</b></dt>
  <dd class="It-tag">set $DEBUG to true (same as `ruby -d')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>-r load-module</b></dt>
  <dd class="It-tag">same as `ruby -r'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--inspect</b></dt>
  <dd class="It-tag">uses `inspect' for output (the default except bc mode)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--noinspect</b></dt>
  <dd class="It-tag">doesn't uses inspect for output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--readline</b></dt>
  <dd class="It-tag">uses Readline extension module</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--noreadline</b></dt>
  <dd class="It-tag">doesn't use Readline extension module</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--prompt prompt-mode</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--prompt-mode prompt-mode</b></dt>
  <dd class="It-tag">switches prompt mode. Pre-defined prompt modes are
      `default', `simple', `xmp' and `inf-ruby'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--inf-ruby-mode</b></dt>
  <dd class="It-tag">uses prompt appreciate for inf-ruby-mode on emacs.
      Suppresses --readline.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--simple-prompt</b></dt>
  <dd class="It-tag">simple prompt mode</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--noprompt</b></dt>
  <dd class="It-tag">no prompt</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--tracer</b></dt>
  <dd class="It-tag">display trace for each execution of commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--back-trace-limit n</b></dt>
  <dd class="It-tag">displayes backtrace top n and tail n. The default value is
      16.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>--irb_debug n</b></dt>
  <dd class="It-tag">sets internal debug level to n (It shouldn't be used)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>-v, --version</b></dt>
  <dd class="It-tag">prints the version of irb</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIGURATIONS"><a class="selflink" href="#CONFIGURATIONS">CONFIGURATIONS</a></h1>
jirb reads `~/.irbrc' when it is invoked. If `~/.irbrb' doesn't exist jirb try
  to read in the order `.irbrc', `irb.rc', `_irbrc' then `$irbrc'. The following
  is altanative to the command line option. To use them type as follows in a
  jirb session.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    IRB.conf[:IRB_NAME]=&quot;irb&quot;
    IRB.conf[:MATH_MODE]=false
    IRB.conf[:USE_TRACER]=false
    IRB.conf[:USE_LOADER]=false
    IRB.conf[:IGNORE_SIGINT]=true
    IRB.conf[:IGNORE_EOF]=false
    IRB.conf[:INSPECT_MODE]=nil
    IRB.conf[:IRB_RC] = nil
    IRB.conf[:BACK_TRACE_LIMIT]=16
    IRB.conf[:USE_LOADER] = false
    IRB.conf[:USE_READLINE] = nil
    IRB.conf[:USE_TRACER] = false
    IRB.conf[:IGNORE_SIGINT] = true
    IRB.conf[:IGNORE_EOF] = false
    IRB.conf[:PROMPT_MODE] = :DEFALUT
    IRB.conf[:PROMPT] = {...}
    IRB.conf[:DEBUG_LEVEL]=0
    IRB.conf[:VERBOSE]=true
</pre>
<h1 class="Sh" title="Sh" id="Customizing_prompt"><a class="selflink" href="#Customizing_prompt">Customizing
  prompt</a></h1>
To costomize the prompt you set a variable
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    IRB.conf[:PROMPT]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
For example, describe as follows in `.irbrc'.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    IRB.conf[:PROMPT][:MY_PROMPT] = { # name of prompt mode
      :PROMPT_I =&gt; nil,		  # normal prompt
      :PROMPT_S =&gt; nil,		  # prompt for continuated strings
      :PROMPT_C =&gt; nil,		  # prompt for continuated statement
      :RETURN =&gt; &quot;    ==&gt;%s\n&quot;	  # format to return value
    }
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Then, invoke irb with the above prompt mode by
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    $ jirb1.3 --prompt my-prompt
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Or add the following in `.irbrc'.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    IRB.conf[:PROMPT_MODE] = :MY_PROMPT
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Constants PROMPT_I, PROMPT_S and PROMPT_C specifies the format. In the prompt
  specification, some special strings are available.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    %N	command name which is running
    %m	to_s of main object (self)
    %M	inspect of main object (self)
    %l	type of string(&quot;, ', /, ]), `]' is inner %w[...]
    %NNi	indent level. NN is degits and means as same as printf(&quot;%NNd&quot;). 
          It can be ommited
    %NNn	line number. 
    %%    %
</pre>
For instance, the default prompt mode is defined as follows:
  IRB.conf[:PROMPT_MODE][:DEFAULT] = {
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>PROMPT_I =&gt; &quot;%N(%m):%03n:%i&gt; &quot;,</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>PROMPT_S =&gt; &quot;%N(%m):%03n:%i%l &quot;,</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>PROMPT_C =&gt; &quot;%N(%m):%03n:%i* &quot;,</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>RETURN =&gt; &quot;%s\n&quot;}</b></dt>
  <dd class="It-tag">RETURN is used to printf.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Configurating_subirb"><a class="selflink" href="#Configurating_subirb">Configurating
  subirb</a></h1>
The command line option or IRB.conf specify the default behavior of (sub)irb. On
  the other hand, each conf of in the next sction `6. Command' is used to
  individually configurate (sub)irb. If proc is set to IRB.conf[:IRB_RC], its
  subirb will be invoked after execution of that proc under giving the context
  of irb as its aregument. By this mechanism each subirb can be configurated.
<h1 class="Sh" title="Sh" id="Command"><a class="selflink" href="#Command">Command</a></h1>
For irb commands, both simple name and `irb_'-prefixed name are prepared.
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>exit, quit, irb_exit</b></dt>
  <dd class="It-tag">Quits (sub)irb. if you've done cb (see below), exit from
      the binding mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf, irb_context</b></dt>
  <dd class="It-tag">Displays current configuration. Modifing the configuration
      is achieved by sending message to `conf'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.back_trace_limit</b></dt>
  <dd class="It-tag">Sets display lines of backtrace as top n and tail n. The
      default value is 16.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.debug_level = N</b></dt>
  <dd class="It-tag">Sets debug level of irb.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.ignore_eof = true/false</b></dt>
  <dd class="It-tag">Whether ^D (control-d) will be ignored or not. If false is
      set, ^D means quit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.ignore_sigint= true/false</b></dt>
  <dd class="It-tag">Whether ^C (control-c) will be ignored or not. If false is
      set, ^D means quit. If true,
    <pre>
    during input:   cancel inputing then return to top level. 
    during execute: abondon current execution. 
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.inf_ruby_mode = true/false</b></dt>
  <dd class="It-tag">Whether inf-ruby-mode or not. The default value is
    false.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.inspect_mode = true/false/nil</b></dt>
  <dd class="It-tag">Specifies inspect mode. true: display inspect false:
      display to_s nil: inspect mode in non math mode,
    <pre>
    non inspect mode in math mode. 
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.irb_level</b></dt>
  <dd class="It-tag">The level of cb.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.math_mode</b></dt>
  <dd class="It-tag">Whether bc mode or not.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.use_loader = true/false</b></dt>
  <dd class="It-tag">Whether irb's own file reader method is used when
      load/require or not. This mode is globaly affected (irb wide).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.prompt_c</b></dt>
  <dd class="It-tag">prompt for a continuating statement (e.g, immediately after
      of `if')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.prompt_i</b></dt>
  <dd class="It-tag">standard prompt</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.prompt_s</b></dt>
  <dd class="It-tag">prompt for a continuating string</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.rc</b></dt>
  <dd class="It-tag">Whether ~/.irbrc is read or not.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.use_prompt = true/false</b></dt>
  <dd class="It-tag">Prompting or not.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.use_readline = true/false/nil</b></dt>
  <dd class="It-tag">Whether readline is used or not. true: uses false: doen't
      use nil: intends to use readline except for inf-reuby-mode (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>conf.verbose=T/F</b></dt>
  <dd class="It-tag">Whether verbose messages are display or not.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>cb, irb_change_binding [obj]</b></dt>
  <dd class="It-tag">Enter new binding which has a distinct scope of local
      variables. If obj is given, obj will be self.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>irb [obj]</b></dt>
  <dd class="It-tag">Invoke subirb. If obj is given, obj will be self.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>jobs, irb_jobs</b></dt>
  <dd class="It-tag">List of subirb</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>fg n, irb_fg n</b></dt>
  <dd class="It-tag">Switch into specified subirb. The following is candidates
      of n:
    <pre>
    irb number
    thhread
    irb object
    self(obj which is specified of irb obj)
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>kill n, irb_kill n</b></dt>
  <dd class="It-tag">Kill subirb. The means of n is as same as the case of
      irb_fg.</dd>
</dl>
<h1 class="Sh" title="Sh" id="System_variable"><a class="selflink" href="#System_variable">System
  variable</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">
  <br/>
  <b>_</b></dt>
  <dd class="It-tag">The latest value of evaluation (it is local)</dd>
</dl>
<h1 class="Sh" title="Sh" id="Session_Example"><a class="selflink" href="#Session_Example">Session
  Example</a></h1>
<pre>
    $ jirb1.3
    irb(main):001:0&gt; irb                        # invoke subirb
    irb#1(main):001:0&gt; jobs                     # list of subirbs
    #0-&gt;irb on main (#&lt;Thread:0x400fb7e4&gt; : stop)
    #1-&gt;irb#1 on main (#&lt;Thread:0x40125d64&gt; : running)
    nil
    irb#1(main):002:0&gt; fg 0                     # switch job
    nil
    irb(main):002:0&gt; class Foo;end
    nil
    irb(main):003:0&gt; irb Foo                    # invoke subirb which has the 
    #              context of Foo
    irb#2(Foo):001:0&gt; def foo                   # define Foo#foo
    irb#2(Foo):002:1&gt;   print 1
    irb#2(Foo):003:1&gt; end
    nil
    irb#2(Foo):004:0&gt; fg 0                      # switch job
    nil
    irb(main):004:0&gt; jobs                       # list of job
    #0-&gt;irb on main (#&lt;Thread:0x400fb7e4&gt; : running)
    #1-&gt;irb#1 on main (#&lt;Thread:0x40125d64&gt; : stop)
    #2-&gt;irb#2 on Foo (#&lt;Thread:0x4011d54c&gt; : stop)
    nil
    irb(main):005:0&gt; Foo.instance_methods       # Foo#foo is defined asurely
    [&quot;foo&quot;]
    irb(main):006:0&gt; fg 2                       # switch job
    nil
    irb#2(Foo):005:0&gt; def bar                   # define Foo#bar
    irb#2(Foo):006:1&gt;  print &quot;bar&quot;
    irb#2(Foo):007:1&gt; end
    nil
    irb#2(Foo):010:0&gt;  Foo.instance_methods
    [&quot;bar&quot;, &quot;foo&quot;]
    irb#2(Foo):011:0&gt; fg 0                      
    nil
    irb(main):007:0&gt; f = Foo.new
    #&lt;Foo:0x4010af3c&gt;
    irb(main):008:0&gt; irb f                      # invoke subirb which has the
    #  context of f (instance of Foo)
    irb#3(#&lt;Foo:0x4010af3c&gt;):001:0&gt; jobs
    #0-&gt;irb on main (#&lt;Thread:0x400fb7e4&gt; : stop)
    #1-&gt;irb#1 on main (#&lt;Thread:0x40125d64&gt; : stop)
    #2-&gt;irb#2 on Foo (#&lt;Thread:0x4011d54c&gt; : stop)
    #3-&gt;irb#3 on #&lt;Foo:0x4010af3c&gt; (#&lt;Thread:0x4010a1e0&gt; : running)
    nil
    irb#3(#&lt;Foo:0x4010af3c&gt;):002:0&gt; foo         # evaluate f.foo
    1nil
    irb#3(#&lt;Foo:0x4010af3c&gt;):003:0&gt; bar         # evaluate f.bar
    barnil
    irb#3(#&lt;Foo:0x4010af3c&gt;):004:0&gt; kill 1, 2, 3# kill job
    nil
    irb(main):009:0&gt; jobs
    #0-&gt;irb on main (#&lt;Thread:0x400fb7e4&gt; : running)
    nil
    irb(main):010:0&gt; exit                       # exit
</pre>
<h1 class="Sh" title="Sh" id="Restrictions"><a class="selflink" href="#Restrictions">Restrictions</a></h1>
Because irb evaluates the inputs immediately after the imput is syntactically
  completed, irb gives slight different result than directly use ruby. Known
  difference is pointed out here.
<h1 class="Sh" title="Sh" id="Declaration_of_the_local_variable"><a class="selflink" href="#Declaration_of_the_local_variable">Declaration
  of the local variable</a></h1>
The following causes an error in ruby:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    eval &quot;foo = 0&quot;
    foo
    --
    -:2: undefined local variable or method `foo' for #&lt;Object:0x40283118&gt; (NameError)
    ---
    NameError
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Though, the above will successfully done by irb.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    &gt;&gt; eval &quot;foo = 0&quot;
    =&gt; 0
    &gt;&gt; foo
    =&gt; 0
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
Ruby evaluates a code after reading entire of code and determination of the
  scope of local variables. On the other hand, irb do immediately. More
  precisely, irb evaluate at first
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    evel &quot;foo = 0&quot; 
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
then foo is defined on this timing. It is because of this incompatibility. If
  you'd like to detect those differences, begin...end can be used:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
    &gt;&gt; begin
    ?&gt;   eval &quot;foo = 0&quot;
    &gt;&gt;   foo
    &gt;&gt; end
    NameError: undefined local variable or method `foo' for #&lt;Object:0x4013d0f0&gt;
    (irb):3
    (irb_local_binding):1:in `eval'
</pre>
<h1 class="Sh" title="Sh" id="Here-document"><a class="selflink" href="#Here-document">Here-document</a></h1>
Implementation of Here-document is incomplete.
<h1 class="Sh" title="Sh" id="Symbol"><a class="selflink" href="#Symbol">Symbol</a></h1>
Irb can not always recognize a symbol as to be Symbol. Concretely, an expression
  have completed, however Irb regard it as continuation line.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 2007</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
