<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:31:54 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PMCHART(1) General Commands Manual PMCHART(1)</p>

<p style="margin-top: 1em">NAME <br>
pmchart - strip chart tool for Performance Co-Pilot</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pmchart [-CVWz] [-A align] [-a archive] [-c configfile] [-f
fontfamily] [-F fontsize] [-g geometry] [-h host] [-o
outfile] [-O offset] [-p port] [-s samples] [-S starttime]
[-T <br>
endtime] [-t interval] [-v visible] [-Z timezone] [-geometry
geometry] [sources...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
pmchart is a graphical utility that plots performance
metrics values available through the facilities of the
Performance Co-Pilot (PCP). Multiple charts can be displayed
simul&acirc; <br>
taneously, either aligned on the unified time axis (X-axis),
and through the use of multiple interface Tabs.</p>

<p style="margin-top: 1em">Metric values can be sourced
from one or more live hosts (simultaneously). Alternatively,
one or more sets of PCP archives can be used as a source of
historical data. See <br>
PCPIntro(1) for an in-depth discussion of the capabilities
of the PCP framework, many of which are used by pmchart.</p>

<p style="margin-top: 1em">Many aspects of the behaviour of
pmchart can be customised through the interface. In
particular, the use of &quot;views&quot; (refer to the
section describing VIEWS later in this docu&acirc; <br>
ment) allows predefined sets of metrics and charting
parameters like colors, scaling, titles, legends, and so on
to be stored for later use, or use with different hosts and
sets <br>
of archives. In addition, the Preferences dialog allows
customisations to the rest of the pmchart user interface to
be saved and restored between different invocations of the
<br>
tool. This allows the default background color, highlight
color, contents and location of the toolbar, and many other
aspects to be configured.</p>

<p style="margin-top: 1em">pmchart makes extensive use of
the pmtime(1) utility for time control, refer to the pmtime
manual page for further details of its operation.</p>

<p style="margin-top: 1em">Options which control the
default source, timing and layout of the pmchart window are
as follows:</p>

<p style="margin-top: 1em">-a Performance metric values are
retrieved from the set of Performance Co-Pilot (PCP) archive
logs identified by this option, by default. The argument is
a comma-separated list <br>
of names, each of which may be the base name of an archive
or the name of a directory containing one or more archives.
The resulting set of archives will be the source of <br>
the performance metrics. The initial Tab created will be an
archive mode Tab. Multiple -a options can be presented, and
the resulting list of sets of archives is used for <br>
sourcing metric values. Any sources listed on the command
line are assumed to be sets of archives if this option is
used.</p>

<p style="margin-top: 1em">-c configfile specifies an
initial view to load, using the default source of metrics.
Multiple -c views can be specified, and they will all be
opened in the default Tab with <br>
the default source of metrics.</p>

<p style="margin-top: 1em">-C Used with -c, the view(s) are
parsed, any errors are reported, and the tool exits. This is
primarily intended for testing purposes. If a second -C
option is presented, <br>
pmchart also connects to pmcd(1) to check the semantics of
metrics.</p>

<p style="margin-top: 1em">-f Specify the default font
family to be used in several chart components, such as the
chart title, legend, and Y-axis label. The default value is
&quot;Sans Serif&quot;. This setting <br>
does not affect the rest of the user interface, where the
value is inherited from the environment in which pmchart
operates, and differs according to the look-and-feel of <br>
each platform.</p>

<p style="margin-top: 1em">-F Specify the default font
point size to be used in several chart components, such as
the chart title, legend, and Y-axis label. The default is
platform dependent, but is <br>
either 7, 8 or 9. This setting does not affect the rest of
the user interface.</p>

<p style="margin-top: 1em">-g Generate image with the
specified geometry (width and height). This option is only
useful when used in conjunction with the -o option for
generating an output image. The <br>
geometry argument takes the form &quot;WxH&quot; (e.g.
240x120). When NOT using the -o flag, to specify the display
window geometry, use -geometry geometry where geometry
specifies <br>
the desired window width, height and optional placement.</p>

<p style="margin-top: 1em">-h Current performance metric
values are retrieved from the nominated host machine by
default. Multiple -h options can be presented, and the list
of hosts is used for sourcing <br>
metric values. Any sources listed on the command line are
assumed to be hosts if this option is used.</p>

<p style="margin-top: 1em">-o Generate an image file named
outfile, and then exit. This is most useful when run with a
set of archives and one or more views. The generated image
will be in the format <br>
specified as the file extension (automatically determined
from outfile). If no extension can be determined, then the
GIF format is used and the generated file is named with <br>
this extension. The supported image file formats include:
bmp, jpeg, jpg, png, ppm, tif, tiff, xbm, and xpm.</p>

<p style="margin-top: 1em">-p port number for connection to
an existing pmtime time control process.</p>

<p style="margin-top: 1em">-s Specifies the number of
samples that will be retained before discarding old data
(replaced by new values at the current time position). This
value can subsequently be modi&acirc; <br>
fied through the Edit Tab dialog.</p>

<p style="margin-top: 1em">-t Sets the inital update
interval to something other than the default 1 second. The
interval argument follows the syntax described in
PCPIntro(1), and in the simplest form <br>
may be an unsigned integer (the implied units in this case
are seconds).</p>

<p style="margin-top: 1em">-v Sets the inital visible
samples that will be displayed in all charts in the default
Tab. This value must be less than or equal to the total
number of samples retained (the <br>
-s value).</p>

<p style="margin-top: 1em">-V Display pmchart version
number and exit</p>

<p style="margin-top: 1em">-W Export images using an
opaque(white) background</p>

<p style="margin-top: 1em">-Z By default, pmtime reports
the time of day according to the local timezone on the
system where pmchart is run. The -Z option changes the
timezone to timezone in the format <br>
of the environment variable TZ as described in
environ(7).</p>

<p style="margin-top: 1em">-z Change the reporting timezone
to the local timezone at the host that is the source of the
performance metrics, as identified via either the -h or -a
options.</p>

<p style="margin-top: 1em">The -S, -T, -O and -A options
may be used to define a time window to restrict the samples
retrieved, set an initial origin within the time window, or
specify a &quot;natural&quot; align&acirc; <br>
ment of the sample times; refer to PCPIntro(1) for a
complete description of these options.</p>

<p style="margin-top: 1em">VIEWS <br>
The primary pmchart configuration file is the
&quot;view&quot;, which allows the metadata associated with
one or more charts to be saved in the filesystem. This
metadata describes all <br>
aspects of the charts, including which PCP metrics and
instances are to be used, which hosts, which colors, the
chart titles, use of chart legends, and much more.</p>

<p style="margin-top: 1em">From a conceptual point of view,
there are two classes of view. These views share the same
configuration file format - refer to a later section for a
complete description of <br>
this format. The differences lie in where they are installed
and how they are manipulated.</p>

<p style="margin-top: 1em">The first class, the
&quot;system&quot; view, is simply any view that is
installed as part of the pmchart package. These are stored
in $PCP_VAR_DIR/config/pmchart. When the File&acirc;Open
<br>
View dialog is displayed, it is these views that are
initially listed. The system views cannot be modified by a
normal user, and should not be modified even by a user with
suit&acirc; <br>
able privileges, as they will be overwritten during an
upgrade.</p>

<p style="margin-top: 1em">The second class of view is the
&quot;user&quot; view. These views are created on-the-fly
using the File&acirc;Save View dialog. This is a mechanism
for individual users to save their commonly <br>
used views. Access to these views is achieved through the
File&acirc;Open View dialog, as with the system views. Once
the dialog is opened, the list of views can be toggled
between <br>
user and system views by clicking on the two toggle buttons
in the top right corner. User views are stored in
$HOME/.pcp/pmchart.</p>

<p style="margin-top: 1em">TABS <br>
pmchart provides the common user interface concept of the
Tab, which is most prevalent in modern web browsers. Tabs
allow pmchart to update many more charts than the available
<br>
screen real estate allows, by providing a user interface
mechanism to stack (and switch between) different vertical
sets of charts. Switching between Tabs is achieved by
click&acirc; <br>
ing on the Tab labels, which are located along the top of
the display beneath the Menu and Tool bars).</p>

<p style="margin-top: 1em">Each Tab has a mode of operation
(either live or archive - pmchart can support both modes
simultaneously), the total number of samples and currently
visible points, and a label <br>
describing the Tab which is displayed at the top of the
pmchart window. New Tabs can be created using the
File&acirc;Add Tab dialog.</p>

<p style="margin-top: 1em">In order to save on vertical
screen real estate, note that the user interface element for
changing between different Tabs (and its label) are only
displayed when more than one <br>
Tab exists. A Tab can be dismissed using the
File&acirc;Close Tab menu, which removes the current Tab and
any charts it contained.</p>

<p style="margin-top: 1em">IMAGES and PRINTING <br>
A static copy of the currently displayed vertical series of
charts can be captured in two ways.</p>

<p style="margin-top: 1em">When the intended display device
is the screen, the File&acirc;Export menu option should be
used. This allows exporting the charts in a variety of image
formats, including PNG, JPEG, <br>
GIF, and BMP. The image size can be scaled up or down in any
dimension.</p>

<p style="margin-top: 1em">Alternatively, when the intended
display device is paper, the File&acirc;Print menu option
can be used. This supports the usual set of printing options
(choice of printer, <br>
grayscale/color, landscape/portrait, scaling to different
paper sizes, etc), and in addition allows printing to the
intermediate printer formats of PostScript and Portable
Docu&acirc; <br>
ment Format (PDF).</p>

<p style="margin-top: 1em">RECORDING <br>
It is possible to make a recording of a set of displayed
charts, for later playback through pmchart or any of the
other Performance Co-Pilot tools. The Record&acirc;Start
functional&acirc; <br>
ity is simple to configure through the user interface, and
allows fine-tuning of the recording process (including
record frequencies that differ to the pmchart update
interval, <br>
alternate file locations, etc).</p>

<p style="margin-top: 1em">pmchart produces recordings that
are compatible with the PCP pmafm(1) replay mechanism, for
later playback via a new instance of pmchart. In addition,
when recording through <br>
pmchart one can also replay the recording immediately, as on
termination of the recording (through the Record&acirc;Stop
menu item), an archive mode Tab will be created with the
cap&acirc; <br>
tured view.</p>

<p style="margin-top: 1em">Once recording is active in a
Live Tab, the Time Control status button in the bottom left
corner of the pmchart window is displayed with a distinctive
red dot. At any time dur&acirc; <br>
ing a pmchart recording session, the amount of space used in
the filesystem by that recording can be displayed using the
Record&acirc;Query menu item.</p>

<p style="margin-top: 1em">Finally, the Record&acirc;Detach
menu option provides a mechanism whereby the recording
process can be completely divorced from the running pmchart
process, and allowed to continue on <br>
when pmchart exits. A dialog displaying the current size and
estimated rate of growth for the recording is presented. On
the other hand, if pmchart is terminated while record&acirc;
<br>
ing is in process, then the recording process will prompt
the user to choose immediate cessation of recording or for
it to continue on independently.</p>

<p style="margin-top: 1em">All of the record mode services
available from pmchart are implemented with the assistance
of the base Performance Co-Pilot logging services - refer to
pmlogger(1) and pmafm(1) <br>
for an extensive description of the capabilities of these
tools.</p>

<p style="margin-top: 1em">CONFIGURATION FILE SYNTAX <br>
pmchart loads predefined chart configurations (or
&quot;views&quot;) from external files that conform to the
following rules. In the descriptions below keywords (shown
in bold) may appear <br>
in upper, lower or mixed case, elements shown in [stuff] are
optional, and user-supplied elements are shown as &lt;other
stuff&gt;. A vertical bar (|) is used where syntactic
elements <br>
are alternatives. Quotes (&quot;) may be used to enclose
lexical elements that may contain white space, such as
titles, labels and instance names.</p>

<p style="margin-top: 1em">1. The first line defines the
configuration file type and should be <br>
#kmchart <br>
although pmchart provides backwards compatibility for the
older pmchart view formats with an initial line of <br>
#pmchart</p>

<p style="margin-top: 1em">2. After the first line, lines
beginning with &quot;#&quot; as the first non-white space
character are treated as comments and skipped. Similarly
blank lines are skipped.</p>

<p style="margin-top: 1em">3. The next line should be <br>
version &lt;n&gt; &lt;host-clause&gt; <br>
where &lt;n&gt; depends on the configuration file type, and
is 1 for pmchart else 1.1, 1.2 or 2.0 for pmchart. <br>
The &lt;host-clause&gt; part is optional (and ignored) for
pmchart configuration files, but required for the pmchart
configuration files, and is of the form <br>
host literal <br>
or <br>
host dynamic</p>

<p style="margin-top: 1em">4. A configuration contains one
or more charts defined as follows: <br>
chart [title &lt;title&gt;] style &lt;style&gt;
&lt;options&gt; <br>
If specified, the title will appear centred and above the
graph area of the chart. The &lt;title&gt; is usually
enclosed in quotes (&quot;) and if it contains the sequence
&quot;%h&quot; this <br>
will be replaced by the short form of the hostname for the
default source of metrics at the time this chart was loaded.
Alternatively, &quot;%H&quot; can be used to insert the full
<br>
host name. If the hostname appears to be an inet or IPv6
address, no shortening will be attempted; it will be used
as-is in both replacement cases. After the view is loaded,
<br>
the title visibility and setting can be manipulated using
the Chart Title text box in the Edit&acirc;Chart dialog.</p>

<p style="margin-top: 1em">The &lt;style&gt; controls the
initial plotting style of the chart, and should be one of
the keywords plot (line graph), bar, stacking (stacked bar),
area or utilization. After the <br>
view is loaded, the plotting style can be changed using the
Edit&acirc;Chart Style dropdown list.</p>

<p style="margin-top: 1em">The &lt;options&gt; are zero or
more of the optional elements: <br>
[scale [from] &lt;ymin&gt; [to] &lt;ymax&gt;] [legend
&lt;onoff&gt;] <br>
If scale is specified, the vertical scaling is set for all
plots in the chart to a y-range defined by &lt;ymin&gt; and
&lt;ymax&gt;. Otherwise the vertical axis will be autoscaled
based <br>
on the values currently being plotted.</p>

<p style="margin-top: 1em">&lt;onoff&gt; is one of the
keywords on or off and the legend clause controls the
presence or absence of the plot legend below the graph area.
The default is for the legend to be <br>
shown. After the view is loaded, the legend visibility can
be toggled using the Show Legend button in the
Edit&acirc;Chart dialog.</p>

<p style="margin-top: 1em">5. pmchart supports a global
clause to specify the dimensions of the top-level window
(using the width and height keywords), the number of visible
points (points keyword) and the <br>
starting X and Y axis positions on the screen (xpos and ypos
keywords). Each of these global attributes takes an integer
value as the sole qualifier.</p>

<p style="margin-top: 1em">6. Each chart has one or more
plots associated with it, as defined by one of the following
specifications: <br>
plot <br>
[legend &lt;title&gt;] [color &lt;colorspec&gt;] [host
&lt;hostspec&gt;] <br>
metric &lt;metricname&gt; <br>
[ instance &lt;inst&gt; | matching &lt;pat&gt; |
not-matching &lt;pat&gt; ]</p>

<p style="margin-top: 1em">The keyword plot may be replaced
with the keyword optional-plot, in which case if the source
of performance data does not include the specified
performance metric and/or <br>
instance, then this plot is silently dropped from the
chart.</p>

<p style="margin-top: 1em">If specified, the title will
appear in the chart legend. The &lt;title&gt; is usually
enclosed in quotes (&quot;) and it may contain one or more
wildcard characters which will be <br>
expanded using metric name, instance name, and host name for
the plot. The wildcards are &quot;%i&quot; (short unique
instance name, up to the first whitespace), &quot;%I&quot;
(full instance <br>
name), &quot;%h&quot; (short host name, up to the first
dot), %H (full host name), &quot;%m&quot; (metric name
shortened to the final two PMNS components), and
&quot;%M&quot; (full metric name).</p>

<p style="margin-top: 1em">For older pmchart configuration
files, the keyword title must be used instead of legend.
Nowadays pmchart supports either keyword.</p>

<p style="margin-top: 1em">The color clause is optional for
newer pmchart configuration files, but it was mandatory in
the original pmchart configuration file format.
&lt;colorspec&gt; may be one of the fol&acirc; <br>
lowing: <br>
#-cycle <br>
rgbi:rr:gg:bb <br>
#rgb <br>
#rrggbb <br>
#rrrgggbbb <br>
#rrrrggggbbbb <br>
&lt;Xcolor&gt; <br>
where each of r, g and b are hexadecimal digits (0-9 and
A-F) representing respectively the red, green and blue color
components. &lt;Xcolor&gt; is one of the color names from
the <br>
X color database, e.g. red or steelblue, see also the output
from showrgb(1).</p>

<p style="margin-top: 1em">The &quot;color&quot; #-cycle
specifies that pmchart should use the next in a pallet of
colors that it uses cyclically for each chart. This is the
default if the color clause is omit&acirc; <br>
ted.</p>

<p style="margin-top: 1em">The &lt;hostspec&gt; in the host
clause may be a hostname, an IP address or an asterisk (*);
the latter is used to mean the default source of performance
metrics. For older pmchart <br>
configuration files, the host clause must be present, for
new pmchart configuration files it is optional, and if
missing the default source of performance metrics will be
<br>
used.</p>

<p style="margin-top: 1em">The optional instance
specification,</p>

<p style="margin-top: 1em">(a) <br>
is omitted in which case one plot will be created for every
instance of the &lt;metricname&gt; metric</p>

<p style="margin-top: 1em">(b) <br>
starts with instance, in which case only the instance named
&lt;inst&gt; will be plotted</p>

<p style="margin-top: 1em">(c) <br>
starts with matching, in which case all instances whose
names match the pattern &lt;pat&gt; will be plotted; the
pattern uses extended regular expression notation in the
style of <br>
egrep(1) (refer to the PMCD view for an example)</p>

<p style="margin-top: 1em">(d) <br>
starts with not-matching, in which case all instances whose
names do not match the pattern &lt;pat&gt; will be plotted;
the pattern uses extended regular expression notation in
<br>
the style of egrep(1) (refer to the Netbytes view for an
example)</p>

<p style="margin-top: 1em">pmchart uses a bizarre syntactic
notation where &lt;inst&gt; and &lt;pat&gt; extend from the
first non-white space character to the end of the input
line. For pmchart configuration files <br>
these elements are either delimited by white space, or
enclosed in quotes (&quot;).</p>

<p style="margin-top: 1em">7. The optional tab directive
can be used to create views with multiple charts which span
multiple Tabs. The syntax is as follows: <br>
tab &lt;label&gt; [host &lt;host&gt;] [points &lt;points&gt;
[samples &lt;samples&gt;]]</p>

<p style="margin-top: 1em">All chart specifications
following this keyword will be created <br>
on the new Tab, until the end of the configuration file or
until <br>
another tab keyword is encountered.</p>

<p style="margin-top: 1em">PCP ENVIRONMENT <br>
Environment variables with the prefix PCP_ are used to
parameterize the file and directory names used by PCP. On
each installation, the file /etc/pcp.conf contains the local
<br>
values for these variables. The $PCP_CONF variable may be
used to specify an alternative configuration file, as
described in pcp.conf(5).</p>

<p style="margin-top: 1em">Of particular note, the
$PCP_XCONFIRM_PROG setting is explicitly and unconditionally
overridden by pmchart. This is set to the pmconfirm(1),
utility, in order that some popup <br>
dialogs (particularly in the area of Recording) maintain a
consistent look-and-feel with the rest of the pmchart
application.</p>

<p style="margin-top: 1em">SEE ALSO <br>
pmtime(1), pmconfirm(1), pmdumptext(1), PCPIntro(1),
pmafm(1), pmrep(1), pmval(1), pmcd(1), pminfo(1),
pcp.conf(5), pcp.env(5) and pmns(5).</p>

<p style="margin-top: 1em">Performance Co-Pilot
PMCHART(1)</p>
<hr>
</body>
</html>
