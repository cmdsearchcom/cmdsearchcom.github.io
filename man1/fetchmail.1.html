<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:09:25 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fetchmail(1) fetchmail reference manual fetchmail(1)</p>

<p style="margin-top: 1em">NAME <br>
fetchmail - fetch mail from a POP, IMAP, ETRN, or
ODMR-capable server</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fetchmail [option...] [mailserver...] <br>
fetchmailconf</p>

<p style="margin-top: 1em">DESCRIPTION <br>
fetchmail is a mail-retrieval and forwarding utility; it
fetches mail from remote mailservers and forwards it to your
local (client) machine&rsquo;s delivery system. You can then
han&acirc; <br>
dle the retrieved mail using normal mail user agents such as
mutt(1), elm(1) or Mail(1). The fetchmail utility can be run
in a daemon mode to repeatedly poll one or more systems <br>
at a specified interval.</p>

<p style="margin-top: 1em">The fetchmail program can gather
mail from servers supporting any of the common
mail-retrieval protocols: POP2 (legacy, to be removed from
future release), POP3, IMAP2bis, IMAP4, <br>
and IMAP4rev1. It can also use the ESMTP ETRN extension and
ODMR. (The RFCs describing all these protocols are listed at
the end of this manual page.)</p>

<p style="margin-top: 1em">While fetchmail is primarily
intended to be used over on-demand TCP/IP links (such as
SLIP or PPP connections), it may also be useful as a message
transfer agent for sites which <br>
refuse for security reasons to permit (sender-initiated)
SMTP transactions with sendmail.</p>

<p style="margin-top: 1em">SUPPORT, TROUBLESHOOTING <br>
For troubleshooting, tracing and debugging, you need to
increase fetchmail&rsquo;s verbosity to actually see what
happens. To do that, please run both of the two following
commands, <br>
adding all of the options you&rsquo;d normally use.</p>

<p style="margin-top: 1em">env LC_ALL=C fetchmail -V -v
--nodetach --nosyslog</p>

<p style="margin-top: 1em">(This command line prints in
English how fetchmail understands your configuration.)</p>

<p style="margin-top: 1em">env LC_ALL=C fetchmail -vvv
--nodetach --nosyslog</p>

<p style="margin-top: 1em">(This command line actually runs
fetchmail with verbose English output.)</p>

<p style="margin-top: 1em">Also see item #G3 in
fetchmail&rsquo;s FAQ
&acirc;&uml;http://fetchmail.berlios.de/fetchmail-FAQ.html#G3&acirc;&copy;</p>

<p style="margin-top: 1em">You can omit the LC_ALL=C part
above if you want output in the local language (if
supported). However if you are posting to mailing lists,
please leave it in. The maintainers do <br>
not necessarily understand your language, please use
English.</p>

<p style="margin-top: 1em">CONCEPTS <br>
If fetchmail is used with a POP or an IMAP server (but not
with ETRN or ODMR), it has two fundamental modes of
operation for each user account from which it retrieves
mail: sin&acirc; <br>
gledrop- and multidrop-mode.</p>

<p style="margin-top: 1em">In singledrop-mode, <br>
fetchmail assumes that all messages in the user&rsquo;s
account (mailbox) are intended for a single recipient. The
identity of the recipient will either default to the local
<br>
user currently executing fetchmail, or will need to be
explicitly specified in the configuration file.</p>

<p style="margin-top: 1em">fetchmail uses singledrop-mode
when the fetchmailrc configuration contains at most a single
local user specification for a given server account.</p>

<p style="margin-top: 1em">In multidrop-mode, <br>
fetchmail assumes that the mail server account actually
contains mail intended for any number of different
recipients. Therefore, fetchmail must attempt to deduce the
<br>
proper &quot;envelope recipient&quot; from the mail headers
of each message. In this mode of operation, fetchmail almost
resembles a mail transfer agent (MTA).</p>

<p style="margin-top: 1em">Note that neither the POP nor
IMAP protocols were intended for use in this fashion, and
hence envelope information is often not directly available.
The ISP must stores <br>
the envelope information in some message header and. The ISP
must also store one copy of the message per recipient. If
either of the conditions is not fulfilled, this <br>
process is unreliable, because fetchmail must then resort to
guessing the true envelope recipient(s) of a message. This
usually fails for mailing list messages and Bcc:d <br>
mail, or mail for multiple recipients in your domain.</p>

<p style="margin-top: 1em">fetchmail uses multidrop-mode
when more than one local user and/or a wildcard is specified
for a particular server account in the configuration
file.</p>

<p style="margin-top: 1em">In ETRN and ODMR modes, <br>
these considerations do not apply, as these protocols are
based on SMTP, which provides explicit envelope recipient
information. These protocols always support multiple <br>
recipients.</p>

<p style="margin-top: 1em">As each message is retrieved,
fetchmail normally delivers it via SMTP to port 25 on the
machine it is running on (localhost), just as though it were
being passed in over a normal <br>
TCP/IP link. fetchmail provides the SMTP server with an
envelope recipient derived in the manner described
previously. The mail will then be delivered according to
your MTA&rsquo;s <br>
rules (the Mail Transfer Agent is usually sendmail(8),
exim(8), or postfix(8)). Invoking your system&rsquo;s MDA
(Mail Delivery Agent) is the duty of your MTA. All the
delivery-con&acirc; <br>
trol mechanisms (such as .forward files) normally available
through your system MTA and local delivery agents will
therefore be applied as usual.</p>

<p style="margin-top: 1em">If your fetchmail configuration
sets a local MDA (see the --mda option), it will be used
directly instead of talking SMTP to port 25.</p>

<p style="margin-top: 1em">If the program fetchmailconf is
available, it will assist you in setting up and editing a
fetchmailrc configuration. It runs under the X window system
and requires that the lan&acirc; <br>
guage Python and the Tk toolkit (with Python bindings) be
present on your system. If you are first setting up
fetchmail for single-user mode, it is recommended that you
use <br>
Novice mode. Expert mode provides complete control of
fetchmail configuration, including the multidrop features.
In either case, the &rsquo;Autoprobe&rsquo; button will tell
you the most <br>
capable protocol a given mailserver supports, and warn you
of potential problems with that server.</p>

<p style="margin-top: 1em">GENERAL OPERATION <br>
The behavior of fetchmail is controlled by command-line
options and a run control file, ~/.fetchmailrc, the syntax
of which we describe in a later section (this file is what
the <br>
fetchmailconf program edits). Command-line options override
~/.fetchmailrc declarations.</p>

<p style="margin-top: 1em">Each server name that you
specify following the options on the command line will be
queried. If you don&rsquo;t specify any servers on the
command line, each &rsquo;poll&rsquo; entry in your <br>
~/.fetchmailrc file will be queried.</p>

<p style="margin-top: 1em">To facilitate the use of
fetchmail in scripts and pipelines, it returns an
appropriate exit code upon termination -- see EXIT CODES
below.</p>

<p style="margin-top: 1em">The following options modify the
behavior of fetchmail. It is seldom necessary to specify any
of these once you have a working .fetchmailrc file set
up.</p>

<p style="margin-top: 1em">Almost all options have a
corresponding keyword which can be used to declare them in a
.fetchmailrc file.</p>

<p style="margin-top: 1em">Some special options are not
covered here, but are documented instead in sections on
AUTHENTICATION and DAEMON MODE which follow.</p>

<p style="margin-top: 1em">General Options <br>
-V | --version <br>
Displays the version information for your copy of fetchmail.
No mail fetch is performed. Instead, for each server
specified, all the option information that would be <br>
computed if fetchmail were connecting to that server is
displayed. Any non-printables in passwords or other string
names are shown as backslashed C-like escape sequences. <br>
This option is useful for verifying that your options are
set the way you want them.</p>

<p style="margin-top: 1em">-c | --check <br>
Return a status code to indicate whether there is mail
waiting, without actually fetching or deleting mail (see
EXIT CODES below). This option turns off daemon mode (in
<br>
which it would be useless). It doesn&rsquo;t play well with
queries to multiple sites, and doesn&rsquo;t work with ETRN
or ODMR. It will return a false positive if you leave read
<br>
but undeleted mail in your server mailbox and your fetch
protocol can&rsquo;t tell kept messages from new ones. This
means it will work with IMAP, not work with POP2, and may
<br>
occasionally flake out under POP3.</p>

<p style="margin-top: 1em">-s | --silent <br>
Silent mode. Suppresses all progress/status messages that
are normally echoed to standard output during a fetch (but
does not suppress actual error messages). The --ver&acirc;
<br>
bose option overrides this.</p>

<p style="margin-top: 1em">-v | --verbose <br>
Verbose mode. All control messages passed between fetchmail
and the mailserver are echoed to stdout. Overrides --silent.
Doubling this option (-v -v) causes extra diag&acirc; <br>
nostic information to be printed.</p>

<p style="margin-top: 1em">--nosoftbounce <br>
(since v6.3.10, Keyword: set no softbounce, since v6.3.10)
<br>
Hard bounce mode. All permanent delivery errors cause
messages to be deleted from the upstream server, see
&quot;no softbounce&quot; below.</p>

<p style="margin-top: 1em">--softbounce <br>
(since v6.3.10, Keyword: set softbounce, since v6.3.10) <br>
Soft bounce mode. All permanent delivery errors cause
messages to be left on the upstream server if the protocol
supports that. Default to match historic fetchmail
docu&acirc; <br>
mentation, to be changed to hard bounce mode in the next
fetchmail release.</p>

<p style="margin-top: 1em">Disposal Options <br>
-a | --all | (since v6.3.3) --fetchall <br>
(Keyword: fetchall, since v3.0) <br>
Retrieve both old (seen) and new messages from the
mailserver. The default is to fetch only messages the server
has not marked seen. Under POP3, this option also forces
<br>
the use of RETR rather than TOP. Note that POP2 retrieval
behaves as though --all is always on (see RETRIEVAL FAILURE
MODES below) and this option does not work with ETRN <br>
or ODMR. While the -a and --all command-line and fetchall
rcfile options have been supported for a long time, the
--fetchall command-line option was added in v6.3.3.</p>

<p style="margin-top: 1em">-k | --keep <br>
(Keyword: keep) <br>
Keep retrieved messages on the remote mailserver. Normally,
messages are deleted from the folder on the mailserver after
they have been retrieved. Specifying the keep <br>
option causes retrieved messages to remain in your folder on
the mailserver. This option does not work with ETRN or ODMR.
If used with POP3, it is recommended to also <br>
specify the --uidl option or uidl keyword.</p>

<p style="margin-top: 1em">-K | --nokeep <br>
(Keyword: nokeep) <br>
Delete retrieved messages from the remote mailserver. This
option forces retrieved mail to be deleted. It may be useful
if you have specified a default of keep in your <br>
.fetchmailrc. This option is forced on with ETRN and
ODMR.</p>

<p style="margin-top: 1em">-F | --flush <br>
(Keyword: flush) <br>
POP3/IMAP only. This is a dangerous option and can cause
mail loss when used improperly. It deletes old (seen)
messages from the mailserver before retrieving new
mes&acirc; <br>
sages. Warning: This can cause mail loss if you check your
mail with other clients than fetchmail, and cause fetchmail
to delete a message it had never fetched before. <br>
It can also cause mail loss if the mail server marks the
message seen after retrieval (IMAP2 servers). You should
probably not use this option in your configuration file.
<br>
If you use it with POP3, you must use the &rsquo;uidl&rsquo;
option. What you probably want is the default setting: if
you don&rsquo;t specify &rsquo;-k&rsquo;, then fetchmail
will automatically delete <br>
messages after successful delivery.</p>

<p style="margin-top: 1em">--limitflush <br>
POP3/IMAP only, since version 6.3.0. Delete oversized
messages from the mailserver before retrieving new messages.
The size limit should be separately specified with the <br>
--limit option. This option does not work with ETRN or
ODMR.</p>

<p style="margin-top: 1em">Protocol and Query Options <br>
-p &lt;proto&gt; | --proto &lt;proto&gt; | --protocol
&lt;proto&gt; <br>
(Keyword: proto[col]) <br>
Specify the protocol to use when communicating with the
remote mailserver. If no protocol is specified, the default
is AUTO. proto may be one of the following:</p>

<p style="margin-top: 1em">AUTO Tries IMAP, POP3, and POP2
(skipping any of these for which support has not been
compiled in).</p>

<p style="margin-top: 1em">POP2 Post Office Protocol 2
(legacy, to be removed from future release)</p>

<p style="margin-top: 1em">POP3 Post Office Protocol 3</p>

<p style="margin-top: 1em">APOP Use POP3 with old-fashioned
MD5-challenge authentication. Considered not resistant to
man-in-the-middle attacks.</p>

<p style="margin-top: 1em">RPOP Use POP3 with RPOP
authentication.</p>

<p style="margin-top: 1em">KPOP Use POP3 with Kerberos V4
authentication on port 1109.</p>

<p style="margin-top: 1em">SDPS Use POP3 with Demon
Internet&rsquo;s SDPS extensions.</p>

<p style="margin-top: 1em">IMAP IMAP2bis, IMAP4, or
IMAP4rev1 (fetchmail automatically detects their
capabilities).</p>

<p style="margin-top: 1em">ETRN Use the ESMTP ETRN
option.</p>

<p style="margin-top: 1em">ODMR Use the the On-Demand Mail
Relay ESMTP profile.</p>

<p style="margin-top: 1em">All these alternatives work in
basically the same way (communicating with standard server
daemons to fetch mail already delivered to a mailbox on the
server) except ETRN and <br>
ODMR. The ETRN mode allows you to ask a compliant ESMTP
server (such as BSD sendmail at release 8.8.0 or higher) to
immediately open a sender-SMTP connection to your client
<br>
machine and begin forwarding any items addressed to your
client machine in the server&rsquo;s queue of undelivered
mail. The ODMR mode requires an ODMR-capable server and
works simi&acirc; <br>
larly to ETRN, except that it does not require the client
machine to have a static DNS.</p>

<p style="margin-top: 1em">-U | --uidl <br>
(Keyword: uidl) <br>
Force UIDL use (effective only with POP3). Force client-side
tracking of &rsquo;newness&rsquo; of messages (UIDL stands
for &quot;unique ID listing&quot; and is described in
RFC1939). Use <br>
with &rsquo;keep&rsquo; to use a mailbox as a baby news drop
for a group of users. The fact that seen messages are
skipped is logged, unless error logging is done through
syslog while <br>
running in daemon mode. Note that fetchmail may
automatically enable this option depending on upstream
server capabilities. Note also that this option may be
removed and <br>
forced enabled in a future fetchmail version. See also:
--idfile.</p>

<p style="margin-top: 1em">--idle (since 6.3.3) <br>
(Keyword: idle, since before 6.0.0) <br>
Enable IDLE use (effective only with IMAP). Note that this
works with only one folder at a given time. While the idle
rcfile keyword had been supported for a long time, <br>
the --idle command-line option was added in version 6.3.3.
IDLE use means that fetchmail tells the IMAP server to send
notice of new messages, so they can be retrieved <br>
sooner than would be possible with regular polls.</p>

<p style="margin-top: 1em">-P &lt;portnumber&gt; |
--service &lt;servicename&gt; <br>
(Keyword: service) Since version 6.3.0. <br>
The service option permits you to specify a service name to
connect to. You can specify a decimal port number here, if
your services database lacks the required service- <br>
port assignments. See the FAQ item R12 and the --ssl
documentation for details. This replaces the older --port
option.</p>

<p style="margin-top: 1em">--port &lt;portnumber&gt; <br>
(Keyword: port) <br>
Obsolete version of --service that does not take service
names. Note: this option may be removed from a future
version.</p>

<p style="margin-top: 1em">--principal &lt;principal&gt;
<br>
(Keyword: principal) <br>
The principal option permits you to specify a service
principal for mutual authentication. This is applicable to
POP3 or IMAP with Kerberos 4 authentication only. It <br>
does not apply to Kerberos 5 or GSSAPI. This option may be
removed in a future fetchmail version.</p>

<p style="margin-top: 1em">-t &lt;seconds&gt; | --timeout
&lt;seconds&gt; <br>
(Keyword: timeout) <br>
The timeout option allows you to set a server-nonresponse
timeout in seconds. If a mailserver does not send a greeting
message or respond to commands for the given number <br>
of seconds, fetchmail will drop the connection to it.
Without such a timeout fetchmail might hang until the TCP
connection times out, trying to fetch mail from a down <br>
host, which may be very long. This would be particularly
annoying for a fetchmail running in the background. There is
a default timeout which fetchmail -V will report. <br>
If a given connection receives too many timeouts in
succession, fetchmail will consider it wedged and stop
retrying. The calling user will be notified by email if this
<br>
happens.</p>

<p style="margin-top: 1em">Beginning with fetchmail 6.3.10,
the SMTP client uses the recommended minimum timeouts from
RFC-5321 while waiting for the SMTP/LMTP server it is
talking to. You can <br>
raise the timeouts even more, but you cannot shorten them.
This is to avoid a painful situation where fetchmail has
been configured with a short timeout (a minute or <br>
less), ships a long message (many MBytes) to the local MTA,
which then takes longer than timeout to respond
&quot;OK&quot;, which it eventually will; that would mean
the mail gets <br>
delivered properly, but fetchmail cannot notice it and will
thus refetch this big message over and over again.</p>

<p style="margin-top: 1em">--plugin &lt;command&gt; <br>
(Keyword: plugin) <br>
The plugin option allows you to use an external program to
establish the TCP connection. This is useful if you want to
use ssh, or need some special firewalling setup. <br>
The program will be looked up in $PATH and can optionally be
passed the hostname and port as arguments using
&quot;%h&quot; and &quot;%p&quot; respectively (note that
the interpolation logic <br>
is rather primitive, and these tokens must be bounded by
whitespace or beginning of string or end of string).
Fetchmail will write to the plugin&rsquo;s stdin and read
from the <br>
plugin&rsquo;s stdout.</p>

<p style="margin-top: 1em">--plugout &lt;command&gt; <br>
(Keyword: plugout) <br>
Identical to the plugin option above, but this one is used
for the SMTP connections.</p>

<p style="margin-top: 1em">-r &lt;name&gt; | --folder
&lt;name&gt; <br>
(Keyword: folder[s]) <br>
Causes a specified non-default mail folder on the mailserver
(or comma-separated list of folders) to be retrieved. The
syntax of the folder name is server-dependent. <br>
This option is not available under POP3, ETRN, or ODMR.</p>

<p style="margin-top: 1em">--tracepolls <br>
(Keyword: tracepolls) <br>
Tell fetchmail to poll trace information in the form
&rsquo;polling account %s&rsquo; and &rsquo;folder %s&rsquo;
to the Received line it generates, where the %s parts are
replaced by the user&rsquo;s <br>
remote name, the poll label, and the folder (mailbox) where
available (the Received header also normally includes the
server&rsquo;s true name). This can be used to facilitate
<br>
mail filtering based on the account it is being received
from. The folder information is written only since version
6.3.4.</p>

<p style="margin-top: 1em">--ssl (Keyword: ssl) <br>
Causes the connection to the mail server to be encrypted via
SSL. Connect to the server using the specified base protocol
over a connection secured by SSL. This option <br>
defeats opportunistic starttls negotiation. It is highly
recommended to use --sslproto &rsquo;SSL3&rsquo; --sslcertck
to validate the certificates presented by the server and
defeat <br>
the obsolete SSLv2 negotiation. More information is
available in the README.SSL file that ships with
fetchmail.</p>

<p style="margin-top: 1em">Note that fetchmail may still
try to negotiate SSL through starttls even if this option is
omitted. You can use the --sslproto option to defeat this
behavior or tell <br>
fetchmail to negotiate a particular SSL protocol.</p>

<p style="margin-top: 1em">If no port is specified, the
connection is attempted to the well known port of the SSL
version of the base protocol. This is generally a different
port than the port used <br>
by the base protocol. For IMAP, this is port 143 for the
clear protocol and port 993 for the SSL secured protocol,
for POP3, it is port 110 for the clear text and port <br>
995 for the encrypted variant.</p>

<p style="margin-top: 1em">If your system lacks the
corresponding entries from /etc/services, see the --service
option and specify the numeric port number as given in the
previous paragraph (unless <br>
your ISP had directed you to different ports, which is
uncommon however).</p>

<p style="margin-top: 1em">--sslcert &lt;name&gt; <br>
(Keyword: sslcert) <br>
For certificate-based client authentication. Some SSL
encrypted servers require client side keys and certificates
for authentication. In most cases, this is optional. <br>
This specifies the location of the public key certificate to
be presented to the server at the time the SSL session is
established. It is not required (but may be pro&acirc; <br>
vided) if the server does not require it. It may be the same
file as the private key (combined key and certificate file)
but this is not recommended. Also see --sslkey <br>
below.</p>

<p style="margin-top: 1em">NOTE: If you use client
authentication, the user name is fetched from the
certificate&rsquo;s CommonName and overrides the name set
with --user.</p>

<p style="margin-top: 1em">--sslkey &lt;name&gt; <br>
(Keyword: sslkey) <br>
Specifies the file name of the client side private SSL key.
Some SSL encrypted servers require client side keys and
certificates for authentication. In most cases, this <br>
is optional. This specifies the location of the private key
used to sign transactions with the server at the time the
SSL session is established. It is not required (but <br>
may be provided) if the server does not require it. It may
be the same file as the public key (combined key and
certificate file) but this is not recommended.</p>

<p style="margin-top: 1em">If a password is required to
unlock the key, it will be prompted for at the time just
prior to establishing the session to the server. This can
cause some complications <br>
in daemon mode.</p>

<p style="margin-top: 1em">Also see --sslcert above.</p>

<p style="margin-top: 1em">--sslproto &lt;name&gt; <br>
(Keyword: sslproto) <br>
Forces an SSL/TLS protocol. Possible values are
&rsquo;&rsquo;, &rsquo;SSL2&rsquo; (not supported on all
systems), &rsquo;SSL23&rsquo;, (use of these two values is
discouraged and should only be used as a <br>
last resort) &rsquo;SSL3&rsquo;, and &rsquo;TLS1&rsquo;. The
default behaviour if this option is unset is: for
connections without --ssl, use &rsquo;TLS1&rsquo; so that
fetchmail will opportunistically try <br>
STARTTLS negotiation with TLS1. You can configure this
option explicitly if the default handshake (TLS1 if --ssl is
not used) does not work for your server.</p>

<p style="margin-top: 1em">Use this option with
&rsquo;TLS1&rsquo; value to enforce a STARTTLS connection.
In this mode, it is highly recommended to also use
--sslcertck (see below). Note that this will then <br>
cause fetchmail v6.3.19 to force STARTTLS negotiation even
if it is not advertised by the server.</p>

<p style="margin-top: 1em">To defeat opportunistic TLSv1
negotiation when the server advertises STARTTLS or STLS, and
use a cleartext connection use &rsquo;&rsquo;. This option,
even if the argument is the <br>
empty string, will also suppress the diagnostic
&rsquo;SERVER: opportunistic upgrade to TLS.&rsquo; message
in verbose mode. The default is to try appropriate protocols
depending on <br>
context.</p>

<p style="margin-top: 1em">--sslcertck <br>
(Keyword: sslcertck) <br>
Causes fetchmail to strictly check the server certificate
against a set of local trusted certificates (see the
sslcertfile and sslcertpath options). If the server
certifi&acirc; <br>
cate cannot be obtained or is not signed by one of the
trusted ones (directly or indirectly), the SSL connection
will fail, regardless of the sslfingerprint option.</p>

<p style="margin-top: 1em">Note that CRL (certificate
revocation lists) are only supported in OpenSSL 0.9.7 and
newer! Your system clock should also be reasonably accurate
when using this option.</p>

<p style="margin-top: 1em">Note that this optional behavior
may become default behavior in future fetchmail
versions.</p>

<p style="margin-top: 1em">--sslcertfile &lt;file&gt; <br>
(Keyword: sslcertfile, since v6.3.17) <br>
Sets the file fetchmail uses to look up local certificates.
The default is empty. This can be given in addition to
--sslcertpath below, and certificates specified in <br>
--sslcertfile will be processed before those in
--sslcertpath. The option can be used in addition to
--sslcertpath.</p>

<p style="margin-top: 1em">The file is a text file. It
contains the concatenation of trusted CA certificates in PEM
format.</p>

<p style="margin-top: 1em">Note that using this option will
suppress loading the default SSL trusted CA certificates
file unless you set the environment variable FETCH&acirc;
<br>
MAIL_INCLUDE_DEFAULT_X509_CA_CERTS to a non-empty value.</p>

<p style="margin-top: 1em">--sslcertpath &lt;directory&gt;
<br>
(Keyword: sslcertpath) <br>
Sets the directory fetchmail uses to look up local
certificates. The default is your OpenSSL default directory.
The directory must be hashed the way OpenSSL expects it -
<br>
every time you add or modify a certificate in the directory,
you need to use the c_rehash tool (which comes with OpenSSL
in the tools/ subdirectory). Also, after OpenSSL <br>
upgrades, you may need to run c_rehash; particularly when
upgrading from 0.9.X to 1.0.0.</p>

<p style="margin-top: 1em">This can be given in addition to
--sslcertfile above, which see for precedence rules.</p>

<p style="margin-top: 1em">Note that using this option will
suppress adding the default SSL trusted CA certificates
directory unless you set the environment variable
FETCH&acirc; <br>
MAIL_INCLUDE_DEFAULT_X509_CA_CERTS to a non-empty value.</p>

<p style="margin-top: 1em">--sslcommonname &lt;common
name&gt; <br>
(Keyword: sslcommonname; since v6.3.9) <br>
Use of this option is discouraged. Before using it, contact
the administrator of your upstream server and ask for a
proper SSL certificate to be used. If that cannot be <br>
attained, this option can be used to specify the name
(CommonName) that fetchmail expects on the server
certificate. A correctly configured server will have this
set to <br>
the hostname by which it is reached, and by default
fetchmail will expect as much. Use this option when the
CommonName is set to some other value, to avoid the
&quot;Server <br>
CommonName mismatch&quot; warning, and only if the upstream
server can&rsquo;t be made to use proper certificates.</p>

<p style="margin-top: 1em">--sslfingerprint
&lt;fingerprint&gt; <br>
(Keyword: sslfingerprint) <br>
Specify the fingerprint of the server key (an MD5 hash of
the key) in hexadecimal notation with colons separating
groups of two digits. The letter hex digits must be in <br>
upper case. This is the default format OpenSSL uses, and the
one fetchmail uses to report the fingerprint when an SSL
connection is established. When this is specified, <br>
fetchmail will compare the server key fingerprint with the
given one, and the connection will fail if they do not match
regardless of the sslcertck setting. The connection <br>
will also fail if fetchmail cannot obtain an SSL certificate
from the server. This can be used to prevent
man-in-the-middle attacks, but the finger print from the
server <br>
needs to be obtained or verified over a secure channel, and
certainly not over the same Internet connection that
fetchmail would use.</p>

<p style="margin-top: 1em">Using this option will prevent
printing certificate verification errors as long as
--sslcertck is unset.</p>

<p style="margin-top: 1em">To obtain the fingerprint of a
certificate stored in the file cert.pem, try:</p>

<p style="margin-top: 1em">openssl x509 -in cert.pem -noout
-md5 -fingerprint</p>

<p style="margin-top: 1em">For details, see x509(1ssl).</p>

<p style="margin-top: 1em">Delivery Control Options <br>
-S &lt;hosts&gt; | --smtphost &lt;hosts&gt; <br>
(Keyword: smtp[host]) <br>
Specify a hunt list of hosts to forward mail to (one or more
hostnames, comma-separated). Hosts are tried in list order;
the first one that is up becomes the forwarding <br>
target for the current run. If this option is not specified,
&rsquo;localhost&rsquo; is used as the default. Each
hostname may have a port number following the host name. The
port <br>
number is separated from the host name by a slash; the
default port is &quot;smtp&quot;. If you specify an absolute
path name (beginning with a /), it will be interpreted as
the <br>
name of a UNIX socket accepting LMTP connections (such as is
supported by the Cyrus IMAP daemon) Example:</p>

<p style="margin-top: 1em">--smtphost
server1,server2/2525,server3,/var/imap/socket/lmtp</p>

<p style="margin-top: 1em">This option can be used with
ODMR, and will make fetchmail a relay between the ODMR
server and SMTP or LMTP receiver.</p>

<p style="margin-top: 1em">--fetchdomains &lt;hosts&gt;
<br>
(Keyword: fetchdomains) <br>
In ETRN or ODMR mode, this option specifies the list of
domains the server should ship mail for once the connection
is turned around. The default is the FQDN of the <br>
machine running fetchmail.</p>

<p style="margin-top: 1em">-D &lt;domain&gt; |
--smtpaddress &lt;domain&gt; <br>
(Keyword: smtpaddress) <br>
Specify the domain to be appended to addresses in RCPT TO
lines shipped to SMTP. When this is not specified, the name
of the SMTP server (as specified by --smtphost) is <br>
used for SMTP/LMTP and &rsquo;localhost&rsquo; is used for
UNIX socket/BSMTP.</p>

<p style="margin-top: 1em">--smtpname &lt;user@domain&gt;
<br>
(Keyword: smtpname) <br>
Specify the domain and user to be put in RCPT TO lines
shipped to SMTP. The default user is the current local
user.</p>

<p style="margin-top: 1em">-Z &lt;nnn&gt; | --antispam
&lt;nnn[, nnn]...&gt; <br>
(Keyword: antispam) <br>
Specifies the list of numeric SMTP errors that are to be
interpreted as a spam-block response from the listener. A
value of -1 disables this option. For the command-line <br>
option, the list values should be comma-separated.</p>

<p style="margin-top: 1em">-m &lt;command&gt; | --mda
&lt;command&gt; <br>
(Keyword: mda) <br>
This option lets fetchmail use a Message or Local Delivery
Agent (MDA or LDA) directly, rather than forward via SMTP or
LMTP.</p>

<p style="margin-top: 1em">To avoid losing mail, use this
option only with MDAs like maildrop or MTAs like sendmail
that exit with a nonzero status on disk-full and other
delivery errors; the <br>
nonzero status tells fetchmail that delivery failed and
prevents the message from being deleted on the server.</p>

<p style="margin-top: 1em">If fetchmail is running as root,
it sets its user id while delivering mail through an MDA as
follows: First, the FETCHMAILUSER, LOGNAME, and USER
environment variables <br>
are checked in this order. The value of the first variable
from his list that is defined (even if it is empty!) is
looked up in the system user database. If none of the <br>
variables is defined, fetchmail will use the real user id it
was started with. If one of the variables was defined, but
the user stated there isn&rsquo;t found, fetchmail
con&acirc; <br>
tinues running as root, without checking remaining variables
on the list. Practically, this means that if you run
fetchmail as root (not recommended), it is most useful <br>
to define the FETCHMAILUSER environment variable to set the
user that the MDA should run as. Some MDAs (such as
maildrop) are designed to be setuid root and setuid to the
<br>
recipient&rsquo;s user id, so you don&rsquo;t lose
functionality this way even when running fetchmail as
unprivileged user. Check the MDA&rsquo;s manual for
details.</p>

<p style="margin-top: 1em">Some possible MDAs are
&quot;/usr/sbin/sendmail -i -f %F -- %T&quot; (Note: some
several older or vendor sendmail versions mistake -- for an
address, rather than an indicator to <br>
mark the end of the option arguments),
&quot;/usr/bin/deliver&quot; and &quot;/usr/bin/maildrop -d
%T&quot;. Local delivery addresses will be inserted into the
MDA command wherever you place <br>
a %T; the mail message&rsquo;s From address will be inserted
where you place an %F.</p>

<p style="margin-top: 1em">Do NOT enclose the %F or %T
string in single quotes! For both %T and %F, fetchmail
encloses the addresses in single quotes (&rsquo;), after
removing any single quotes they may <br>
contain, before the MDA command is passed to the shell.</p>

<p style="margin-top: 1em">Do NOT use an MDA invocation
that dispatches on the contents of To/Cc/Bcc, like
&quot;sendmail -i -t&quot; or &quot;qmail-inject&quot;, it
will create mail loops and bring the just wrath of <br>
many postmasters down upon your head. This is one of the
most frequent configuration errors!</p>

<p style="margin-top: 1em">Also, do not try to combine
multidrop mode with an MDA such as maildrop that can only
accept one address, unless your upstream stores one copy of
the message per recipient <br>
and transports the envelope recipient in a header; you will
lose mail.</p>

<p style="margin-top: 1em">The well-known procmail(1)
package is very hard to configure properly, it has a very
nasty &quot;fall through to the next rule&quot; behavior on
delivery errors (even temporary <br>
ones, such as out of disk space if another user&rsquo;s mail
daemon copies the mailbox around to purge old messages), so
your mail will end up in the wrong mailbox sooner or <br>
later. The proper procmail configuration is outside the
scope of this document. Using maildrop(1) is usually much
easier, and many users find the filter syntax used by <br>
maildrop easier to understand.</p>

<p style="margin-top: 1em">Finally, we strongly advise that
you do not use qmail-inject. The command line interface is
non-standard without providing benefits for typical use, and
fetchmail makes <br>
no attempts to accommodate qmail-inject&rsquo;s deviations
from the standard. Some of qmail-inject&rsquo;s command-line
and environment options are actually dangerous and can cause
<br>
broken threads, non-detected duplicate messages and
forwarding loops.</p>

<p style="margin-top: 1em">--lmtp (Keyword: lmtp) <br>
Cause delivery via LMTP (Local Mail Transfer Protocol). A
service host and port must be explicitly specified on each
host in the smtphost hunt list (see above) if this <br>
option is selected; the default port 25 will (in accordance
with RFC 2033) not be accepted.</p>

<p style="margin-top: 1em">--bsmtp &lt;filename&gt; <br>
(Keyword: bsmtp) <br>
Append fetched mail to a BSMTP file. This simply contains
the SMTP commands that would normally be generated by
fetchmail when passing mail to an SMTP listener daemon.</p>

<p style="margin-top: 1em">An argument of &rsquo;-&rsquo;
causes the SMTP batch to be written to standard output,
which is of limited use: this only makes sense for
debugging, because fetchmail&rsquo;s regular output <br>
is interspersed on the same channel, so this isn&rsquo;t
suitable for mail delivery. This special mode may be removed
in a later release.</p>

<p style="margin-top: 1em">Note that fetchmail&rsquo;s
reconstruction of MAIL FROM and RCPT TO lines is not
guaranteed correct; the caveats discussed under THE USE AND
ABUSE OF MULTIDROP MAILBOXES below <br>
apply. This mode has precedence before --mda and
SMTP/LMTP.</p>

<p style="margin-top: 1em">--bad-header {reject|accept}
<br>
(Keyword: bad-header; since v6.3.15) <br>
Specify how fetchmail is supposed to treat messages with bad
headers, i. e. headers with bad syntax. Traditionally,
fetchmail has rejected such messages, but some
distrib&acirc; <br>
utors modified fetchmail to accept them. You can now
configure fetchmail&rsquo;s behaviour per server.</p>

<p style="margin-top: 1em">Resource Limit Control Options
<br>
-l &lt;maxbytes&gt; | --limit &lt;maxbytes&gt; <br>
(Keyword: limit) <br>
Takes a maximum octet size argument, where 0 is the default
and also the special value designating &quot;no limit&quot;.
If nonzero, messages larger than this size will not be <br>
fetched and will be left on the server (in foreground
sessions, the progress messages will note that they are
&quot;oversized&quot;). If the fetch protocol permits (in
particular, <br>
under IMAP or POP3 without the fetchall option) the message
will not be marked seen.</p>

<p style="margin-top: 1em">An explicit --limit of 0
overrides any limits set in your run control file. This
option is intended for those needing to strictly control
fetch time due to expensive and <br>
variable phone rates.</p>

<p style="margin-top: 1em">Combined with --limitflush, it
can be used to delete oversized messages waiting on a
server. In daemon mode, oversize notifications are mailed to
the calling user (see <br>
the --warnings option). This option does not work with ETRN
or ODMR.</p>

<p style="margin-top: 1em">-w &lt;interval&gt; | --warnings
&lt;interval&gt; <br>
(Keyword: warnings) <br>
Takes an interval in seconds. When you call fetchmail with a
&rsquo;limit&rsquo; option in daemon mode, this controls the
interval at which warnings about oversized messages are <br>
mailed to the calling user (or the user specified by the
&rsquo;postmaster&rsquo; option). One such notification is
always mailed at the end of the the first poll that the
oversized <br>
message is detected. Thereafter, re-notification is
suppressed until after the warning interval elapses (it will
take place at the end of the first following poll).</p>

<p style="margin-top: 1em">-b &lt;count&gt; | --batchlimit
&lt;count&gt; <br>
(Keyword: batchlimit) <br>
Specify the maximum number of messages that will be shipped
to an SMTP listener before the connection is deliberately
torn down and rebuilt (defaults to 0, meaning no <br>
limit). An explicit --batchlimit of 0 overrides any limits
set in your run control file. While sendmail(8) normally
initiates delivery of a message immediately after <br>
receiving the message terminator, some SMTP listeners are
not so prompt. MTAs like smail(8) may wait till the delivery
socket is shut down to deliver. This may produce <br>
annoying delays when fetchmail is processing very large
batches. Setting the batch limit to some nonzero size will
prevent these delays. This option does not work with <br>
ETRN or ODMR.</p>

<p style="margin-top: 1em">-B &lt;number&gt; | --fetchlimit
&lt;number&gt; <br>
(Keyword: fetchlimit) <br>
Limit the number of messages accepted from a given server in
a single poll. By default there is no limit. An explicit
--fetchlimit of 0 overrides any limits set in your <br>
run control file. This option does not work with ETRN or
ODMR.</p>

<p style="margin-top: 1em">--fetchsizelimit &lt;number&gt;
<br>
(Keyword: fetchsizelimit) <br>
Limit the number of sizes of messages accepted from a given
server in a single transaction. This option is useful in
reducing the delay in downloading the first mail when <br>
there are too many mails in the mailbox. By default, the
limit is 100. If set to 0, sizes of all messages are
downloaded at the start. This option does not work with <br>
ETRN or ODMR. For POP3, the only valid non-zero value is
1.</p>

<p style="margin-top: 1em">--fastuidl &lt;number&gt; <br>
(Keyword: fastuidl) <br>
Do a binary instead of linear search for the first unseen
UID. Binary search avoids downloading the UIDs of all mails.
This saves time (especially in daemon mode) where <br>
downloading the same set of UIDs in each poll is a waste of
bandwidth. The number &rsquo;n&rsquo; indicates how rarely a
linear search should be done. In daemon mode, linear search
is <br>
used once followed by binary searches in &rsquo;n-1&rsquo;
polls if &rsquo;n&rsquo; is greater than 1; binary search is
always used if &rsquo;n&rsquo; is 1; linear search is always
used if &rsquo;n&rsquo; is 0. In non- <br>
daemon mode, binary search is used if &rsquo;n&rsquo; is 1;
otherwise linear search is used. The default value of
&rsquo;n&rsquo; is 4. This option works with POP3 only.</p>

<p style="margin-top: 1em">-e &lt;count&gt; | --expunge
&lt;count&gt; <br>
(Keyword: expunge) <br>
Arrange for deletions to be made final after a given number
of messages. Under POP2 or POP3, fetchmail cannot make
deletions final without sending QUIT and ending the <br>
session -- with this option on, fetchmail will break a long
mail retrieval session into multiple sub-sessions, sending
QUIT after each sub-session. This is a good defense <br>
against line drops on POP3 servers. Under IMAP, fetchmail
normally issues an EXPUNGE command after each deletion in
order to force the deletion to be done immediately. <br>
This is safest when your connection to the server is flaky
and expensive, as it avoids resending duplicate mail after a
line hit. However, on large mailboxes the overhead <br>
of re-indexing after every message can slam the server
pretty hard, so if your connection is reliable it is good to
do expunges less frequently. Also note that some <br>
servers enforce a delay of a few seconds after each quit, so
fetchmail may not be able to get back in immediately after
an expunge -- you may see &quot;lock busy&quot; errors if
<br>
this happens. If you specify this option to an integer N, it
tells fetchmail to only issue expunges on every Nth delete.
An argument of zero suppresses expunges entirely <br>
(so no expunges at all will be done until the end of run).
This option does not work with ETRN or ODMR.</p>

<p style="margin-top: 1em">Authentication Options <br>
-u &lt;name&gt; | --user &lt;name&gt; | --username
&lt;name&gt; <br>
(Keyword: user[name]) <br>
Specifies the user identification to be used when logging in
to the mailserver. The appropriate user identification is
both server and user-dependent. The default is <br>
your login name on the client machine that is running
fetchmail. See USER AUTHENTICATION below for a complete
description.</p>

<p style="margin-top: 1em">-I &lt;specification&gt; |
--interface &lt;specification&gt; <br>
(Keyword: interface) <br>
Require that a specific interface device be up and have a
specific local or remote IPv4 (IPv6 is not supported by this
option yet) address (or range) before polling. Fre&acirc;
<br>
quently fetchmail is used over a transient point-to-point
TCP/IP link established directly to a mailserver via SLIP or
PPP. That is a relatively secure channel. But when <br>
other TCP/IP routes to the mailserver exist (e.g. when the
link is connected to an alternate ISP), your username and
password may be vulnerable to snooping (especially <br>
when daemon mode automatically polls for mail, shipping a
clear password over the net at predictable intervals). The
--interface option may be used to prevent this. When <br>
the specified link is not up or is not connected to a
matching IP address, polling will be skipped. The format
is:</p>


<p style="margin-top: 1em">interface/iii.iii.iii.iii[/mmm.mmm.mmm.mmm]</p>

<p style="margin-top: 1em">The field before the first slash
is the interface name (i.e. sl0, ppp0 etc.). The field
before the second slash is the acceptable IP address. The
field after the second <br>
slash is a mask which specifies a range of IP addresses to
accept. If no mask is present 255.255.255.255 is assumed
(i.e. an exact match). This option is currently only <br>
supported under Linux and FreeBSD. Please see the monitor
section for below for FreeBSD specific information.</p>

<p style="margin-top: 1em">Note that this option may be
removed from a future fetchmail version.</p>

<p style="margin-top: 1em">-M &lt;interface&gt; | --monitor
&lt;interface&gt; <br>
(Keyword: monitor) <br>
Daemon mode can cause transient links which are
automatically taken down after a period of inactivity (e.g.
PPP links) to remain up indefinitely. This option identifies
a <br>
system TCP/IP interface to be monitored for activity. After
each poll interval, if the link is up but no other activity
has occurred on the link, then the poll will be <br>
skipped. However, when fetchmail is woken up by a signal,
the monitor check is skipped and the poll goes through
unconditionally. This option is currently only supported
<br>
under Linux and FreeBSD. For the monitor and interface
options to work for non root users under FreeBSD, the
fetchmail binary must be installed SGID kmem. This would be
<br>
a security hole, but fetchmail runs with the effective GID
set to that of the kmem group only when interface data is
being collected.</p>

<p style="margin-top: 1em">Note that this option may be
removed from a future fetchmail version.</p>

<p style="margin-top: 1em">--auth &lt;type&gt; <br>
(Keyword: auth[enticate]) <br>
This option permits you to specify an authentication type
(see USER AUTHENTICATION below for details). The possible
values are any, password, kerberos_v5, kerberos (or, <br>
for excruciating exactness, kerberos_v4), gssapi, cram-md5,
otp, ntlm, msn (only for POP3), external (only IMAP) and
ssh. When any (the default) is specified, fetchmail <br>
tries first methods that don&rsquo;t require a password
(EXTERNAL, GSSAPI, KERBEROS IV, KERBEROS 5); then it looks
for methods that mask your password (CRAM-MD5, NTLM, X-OTP -
<br>
note that MSN is only supported for POP3, but not
autoprobed); and only if the server doesn&rsquo;t support
any of those will it ship your password en clair. Other
values may <br>
be used to force various authentication methods (ssh
suppresses authentication and is thus useful for IMAP
PREAUTH). (external suppresses authentication and is thus
use&acirc; <br>
ful for IMAP EXTERNAL). Any value other than password,
cram-md5, ntlm, msn or otp suppresses fetchmail&rsquo;s
normal inquiry for a password. Specify ssh when you are
using an <br>
end-to-end secure connection such as an ssh tunnel; specify
external when you use TLS with client authentication and
specify gssapi or kerberos_v4 if you are using a pro&acirc;
<br>
tocol variant that employs GSSAPI or K4. Choosing KPOP
protocol automatically selects Kerberos authentication. This
option does not work with ETRN. GSSAPI service names <br>
are in line with RFC-2743 and IANA registrations, see
Generic Security Service Application Program Interface
(GSSAPI)/Kerberos/Simple Authentication and Security Layer
<br>
(SASL) Service Names
&acirc;&uml;http://www.iana.org/assignments/gssapi-service-names/&acirc;&copy;.</p>

<p style="margin-top: 1em">Miscellaneous Options <br>
-f &lt;pathname&gt; | --fetchmailrc &lt;pathname&gt; <br>
Specify a non-default name for the ~/.fetchmailrc run
control file. The pathname argument must be either
&quot;-&quot; (a single dash, meaning to read the
configuration from stan&acirc; <br>
dard input) or a filename. Unless the --version option is
also on, a named file argument must have permissions no more
open than 0700 (u=rwx,g=,o=) or else be /dev/null.</p>

<p style="margin-top: 1em">-i &lt;pathname&gt; | --idfile
&lt;pathname&gt; <br>
(Keyword: idfile) <br>
Specify an alternate name for the .fetchids file used to
save message UIDs. NOTE: since fetchmail 6.3.0, write access
to the directory containing the idfile is required, <br>
as fetchmail writes a temporary file and renames it into the
place of the real idfile only if the temporary file has been
written successfully. This avoids the truncation <br>
of idfiles when running out of disk space.</p>

<p style="margin-top: 1em">--pidfile &lt;pathname&gt; <br>
(Keyword: pidfile; since fetchmail v6.3.4) <br>
Override the default location of the PID file. Default: see
&quot;ENVIRONMENT&quot; below.</p>

<p style="margin-top: 1em">-n | --norewrite <br>
(Keyword: no rewrite) <br>
Normally, fetchmail edits RFC-822 address headers (To, From,
Cc, Bcc, and Reply-To) in fetched mail so that any mail IDs
local to the server are expanded to full addresses <br>
(@ and the mailserver hostname are appended). This enables
replies on the client to get addressed correctly (otherwise
your mailer might think they should be addressed to <br>
local users on the client machine!). This option disables
the rewrite. (This option is provided to pacify people who
are paranoid about having an MTA edit mail headers <br>
and want to know they can prevent it, but it is generally
not a good idea to actually turn off rewrite.) When using
ETRN or ODMR, the rewrite option is ineffective.</p>

<p style="margin-top: 1em">-E &lt;line&gt; | --envelope
&lt;line&gt; <br>
(Keyword: envelope; Multidrop only) <br>
In the configuration file, an enhanced syntax is used: <br>
envelope [&lt;count&gt;] &lt;line&gt;</p>

<p style="margin-top: 1em">This option changes the header
fetchmail assumes will carry a copy of the mail&rsquo;s
envelope address. Normally this is
&rsquo;X-Envelope-To&rsquo;. Other typically found headers
to <br>
carry envelope information are &rsquo;X-Original-To&rsquo;
and &rsquo;Delivered-To&rsquo;. Now, since these headers are
not standardized, practice varies. See the discussion of
multidrop address <br>
handling below. As a special case, &rsquo;envelope
&quot;Received&quot;&rsquo; enables parsing of
sendmail-style Received lines. This is the default, but
discouraged because it is not fully <br>
reliable.</p>

<p style="margin-top: 1em">Note that fetchmail expects the
Received-line to be in a specific format: It must contain
&quot;by host for address&quot;, where host must match one
of the mailserver names that <br>
fetchmail recognizes for the account in question.</p>

<p style="margin-top: 1em">The optional count argument
(only available in the configuration file) determines how
many header lines of this kind are skipped. A count of 1
means: skip the first, take <br>
the second. A count of 2 means: skip the first and second,
take the third, and so on.</p>

<p style="margin-top: 1em">-Q &lt;prefix&gt; | --qvirtual
&lt;prefix&gt; <br>
(Keyword: qvirtual; Multidrop only) <br>
The string prefix assigned to this option will be removed
from the user name found in the header specified with the
envelope option (before doing multidrop name mapping or <br>
localdomain checking, if either is applicable). This option
is useful if you are using fetchmail to collect the mail for
an entire domain and your ISP (or your mail redi&acirc; <br>
rection provider) is using qmail. One of the basic features
of qmail is the Delivered-To: message header. Whenever qmail
delivers a message to a local mailbox it puts <br>
the username and hostname of the envelope recipient on this
line. The major reason for this is to prevent mail loops. To
set up qmail to batch mail for a disconnected <br>
site the ISP-mailhost will have normally put that site in
its &rsquo;Virtualhosts&rsquo; control file so it will add a
prefix to all mail addresses for this site. This results in
mail <br>
sent to &rsquo;username@userhost.userdom.dom.com&rsquo;
having a Delivered-To: line of the form:</p>

<p style="margin-top: 1em">Delivered-To:
mbox-userstr-username@userhost.example.com</p>

<p style="margin-top: 1em">The ISP can make the
&rsquo;mbox-userstr-&rsquo; prefix anything they choose but
a string matching the user host name is likely. By using the
option &rsquo;envelope Delivered-To:&rsquo; you can make
<br>
fetchmail reliably identify the original envelope recipient,
but you have to strip the &rsquo;mbox-userstr-&rsquo; prefix
to deliver to the correct user. This is what this option is
for.</p>

<p style="margin-top: 1em">--configdump <br>
Parse the ~/.fetchmailrc file, interpret any command-line
options specified, and dump a configuration report to
standard output. The configuration report is a data
struc&acirc; <br>
ture assignment in the language Python. This option is meant
to be used with an interactive ~/.fetchmailrc editor like
fetchmailconf, written in Python.</p>

<p style="margin-top: 1em">Removed Options <br>
-T | --netsec <br>
Removed before version 6.3.0, the required underlying
inet6_apps library had been discontinued and is no longer
available.</p>

<p style="margin-top: 1em">USER AUTHENTICATION AND
ENCRYPTION <br>
All modes except ETRN require authentication of the client
to the server. Normal user authentication in fetchmail is
very much like the authentication mechanism of ftp(1). The
<br>
correct user-id and password depend upon the underlying
security system at the mailserver.</p>

<p style="margin-top: 1em">If the mailserver is a Unix
machine on which you have an ordinary user account, your
regular login name and password are used with fetchmail. If
you use the same login name on <br>
both the server and the client machines, you needn&rsquo;t
worry about specifying a user-id with the -u option -- the
default behavior is to use your login name on the client
machine <br>
as the user-id on the server machine. If you use a different
login name on the server machine, specify that login name
with the -u option. e.g. if your login name is
&rsquo;jsmith&rsquo; <br>
on a machine named &rsquo;mailgrunt&rsquo;, you would start
fetchmail as follows:</p>

<p style="margin-top: 1em">fetchmail -u jsmith
mailgrunt</p>

<p style="margin-top: 1em">The default behavior of
fetchmail is to prompt you for your mailserver password
before the connection is established. This is the safest way
to use fetchmail and ensures that <br>
your password will not be compromised. You may also specify
your password in your ~/.fetchmailrc file. This is
convenient when using fetchmail in daemon mode or with
scripts.</p>

<p style="margin-top: 1em">Using netrc files <br>
If you do not specify a password, and fetchmail cannot
extract one from your ~/.fetchmailrc file, it will look for
a ~/.netrc file in your home directory before requesting one
<br>
interactively; if an entry matching the mailserver is found
in that file, the password will be used. Fetchmail first
looks for a match on poll name; if it finds none, it checks
<br>
for a match on via name. See the ftp(1) man page for details
of the syntax of the ~/.netrc file. To show a practical
example, a .netrc might look like this:</p>

<p style="margin-top: 1em">machine hermes.example.org <br>
login joe <br>
password topsecret</p>

<p style="margin-top: 1em">You can repeat this block with
different user information if you need to provide more than
one password.</p>

<p style="margin-top: 1em">This feature may allow you to
avoid duplicating password information in more than one
file.</p>

<p style="margin-top: 1em">On mailservers that do not
provide ordinary user accounts, your user-id and password
are usually assigned by the server administrator when you
apply for a mailbox on the server. <br>
Contact your server administrator if you don&rsquo;t know
the correct user-id and password for your mailbox
account.</p>

<p style="margin-top: 1em">POP3 VARIANTS <br>
Early versions of POP3 (RFC1081, RFC1225) supported a crude
form of independent authentication using the .rhosts file on
the mailserver side. Under this RPOP variant, a fixed <br>
per-user ID equivalent to a password was sent in clear over
a link to a reserved port, with the command RPOP rather than
PASS to alert the server that it should do special
check&acirc; <br>
ing. RPOP is supported by fetchmail (you can specify
&rsquo;protocol RPOP&rsquo; to have the program send
&rsquo;RPOP&rsquo; rather than &rsquo;PASS&rsquo;) but its
use is strongly discouraged, and support will be <br>
removed from a future fetchmail version. This facility was
vulnerable to spoofing and was withdrawn in RFC1460.</p>

<p style="margin-top: 1em">RFC1460 introduced APOP
authentication. In this variant of POP3, you register an
APOP password on your server host (on some servers, the
program to do this is called <br>
popauth(8)). You put the same password in your
~/.fetchmailrc file. Each time fetchmail logs in, it sends
an MD5 hash of your password and the server greeting time to
the <br>
server, which can verify it by checking its authorization
database.</p>

<p style="margin-top: 1em">Note that APOP is no longer
considered resistant against man-in-the-middle attacks.</p>

<p style="margin-top: 1em">RETR or TOP <br>
fetchmail makes some efforts to make the server believe
messages had not been retrieved, by using the TOP command
with a large number of lines when possible. TOP is a command
<br>
that retrieves the full header and a fetchmail-specified
amount of body lines. It is optional and therefore not
implemented by all servers, and some are known to implement
it <br>
improperly. On many servers however, the RETR command which
retrieves the full message with header and body, sets the
&quot;seen&quot; flag (for instance, in a web interface),
whereas the <br>
TOP command does not do that.</p>

<p style="margin-top: 1em">fetchmail will always use the
RETR command if &quot;fetchall&quot; is set. fetchmail will
also use the RETR command if &quot;keep&quot; is set and
&quot;uidl&quot; is unset. Finally, fetchmail will use the
<br>
RETR command on Maillennium POP3/PROXY servers (used by
Comcast) to avoid a deliberate TOP misinterpretation in this
server that causes message corruption.</p>

<p style="margin-top: 1em">In all other cases, fetchmail
will use the TOP command. This implies that in
&quot;keep&quot; setups, &quot;uidl&quot; must be set if
&quot;TOP&quot; is desired.</p>

<p style="margin-top: 1em">Note that this description is
true for the current version of fetchmail, but the behavior
may change in future versions. In particular, fetchmail may
prefer the RETR command <br>
because the TOP command causes much grief on some servers
and is only optional.</p>

<p style="margin-top: 1em">ALTERNATE AUTHENTICATION FORMS
<br>
If your fetchmail was built with Kerberos support and you
specify Kerberos authentication (either with --auth or the
.fetchmailrc option authenticate kerberos_v4) it will try to
<br>
get a Kerberos ticket from the mailserver at the start of
each query. Note: if either the pollname or via name is
&rsquo;hesiod&rsquo;, fetchmail will try to use Hesiod to
look up the <br>
mailserver.</p>

<p style="margin-top: 1em">If you use POP3 or IMAP with
GSSAPI authentication, fetchmail will expect the server to
have RFC1731- or RFC1734-conforming GSSAPI capability, and
will use it. Currently this <br>
has only been tested over Kerberos V, so you&rsquo;re
expected to already have a ticket-granting ticket. You may
pass a username different from your principal name using the
standard <br>
--user command or by the .fetchmailrc option user.</p>

<p style="margin-top: 1em">If your IMAP daemon returns the
PREAUTH response in its greeting line, fetchmail will notice
this and skip the normal authentication step. This can be
useful, e.g. if you start <br>
imapd explicitly using ssh. In this case you can declare the
authentication value &rsquo;ssh&rsquo; on that site entry to
stop .fetchmail from asking you for a password when it
starts up.</p>

<p style="margin-top: 1em">If you use client authentication
with TLS1 and your IMAP daemon returns the AUTH=EXTERNAL
response, fetchmail will notice this and will use the
authentication shortcut and will <br>
not send the passphrase. In this case you can declare the
authentication value &rsquo;external&rsquo; <br>
on that site to stop fetchmail from asking you for a
password when it starts up.</p>

<p style="margin-top: 1em">If you are using POP3, and the
server issues a one-time-password challenge conforming to
RFC1938, fetchmail will use your password as a pass phrase
to generate the required <br>
response. This avoids sending secrets over the net
unencrypted.</p>

<p style="margin-top: 1em">Compuserve&rsquo;s RPA
authentication is supported. If you compile in the support,
fetchmail will try to perform an RPA pass-phrase
authentication instead of sending over the password <br>
en clair if it detects &quot;@compuserve.com&quot; in the
hostname.</p>

<p style="margin-top: 1em">If you are using IMAP,
Microsoft&rsquo;s NTLM authentication (used by Microsoft
Exchange) is supported. If you compile in the support,
fetchmail will try to perform an NTLM authentica&acirc; <br>
tion (instead of sending over the password en clair)
whenever the server returns AUTH=NTLM in its capability
response. Specify a user option value that looks like
&rsquo;user@domain&rsquo;: <br>
the part to the left of the @ will be passed as the username
and the part to the right as the NTLM domain.</p>

<p style="margin-top: 1em">Secure Socket Layers (SSL) and
Transport Layer Security (TLS) <br>
Note that fetchmail currently uses the OpenSSL library,
which is severely underdocumented, so failures may occur
just because the programmers are not aware of
OpenSSL&rsquo;s require&acirc; <br>
ment of the day. For instance, since v6.3.16, fetchmail
calls OpenSSL_add_all_algorithms(), which is necessary to
support certificates with SHA256 on OpenSSL 0.9.8 -- this
<br>
information is deeply hidden in the documentation and not at
all obvious. Please do not hesitate to report subtle SSL
failures.</p>

<p style="margin-top: 1em">You can access SSL encrypted
services by specifying the --ssl option. You can also do
this using the &quot;ssl&quot; user option in the
.fetchmailrc file. With SSL encryption enabled, <br>
queries are initiated over a connection after negotiating an
SSL session, and the connection fails if SSL cannot be
negotiated. Some services, such as POP3 and IMAP, have
dif&acirc; <br>
ferent well known ports defined for the SSL encrypted
services. The encrypted ports will be selected automatically
when SSL is enabled and no explicit port is specified. The
<br>
--sslproto &rsquo;SSL3&rsquo; option should be used to
select the SSLv3 protocol (default if unset: v2 or v3).
Also, the --sslcertck command line or sslcertck run control
file option should <br>
be used to force strict certificate checking - see
below.</p>

<p style="margin-top: 1em">If SSL is not configured,
fetchmail will usually opportunistically try to use
STARTTLS. STARTTLS can be enforced by using --sslproto
&quot;TLS1&quot;. TLS connections use the same port as <br>
the unencrypted version of the protocol and negotiate TLS
via special command. The --sslcertck command line or
sslcertck run control file option should be used to force
strict <br>
certificate checking - see below.</p>

<p style="margin-top: 1em">--sslcertck is recommended: When
connecting to an SSL or TLS encrypted server, the server
presents a certificate to the client for validation. The
certificate is checked to ver&acirc; <br>
ify that the common name in the certificate matches the name
of the server being contacted and that the effective and
expiration dates in the certificate indicate that it is
cur&acirc; <br>
rently valid. If any of these checks fail, a warning message
is printed, but the connection continues. The server
certificate does not need to be signed by any specific
Certi&acirc; <br>
fying Authority and may be a &quot;self-signed&quot;
certificate. If the --sslcertck command line option or
sslcertck run control file option is used, fetchmail will
instead abort if any <br>
of these checks fail, because it must assume that there is a
man-in-the-middle attack in this scenario, hence fetchmail
must not expose cleartext passwords. Use of the sslcertck
<br>
or --sslcertck option is therefore advised.</p>

<p style="margin-top: 1em">Some SSL encrypted servers may
request a client side certificate. A client side public SSL
certificate and private SSL key may be specified. If
requested by the server, the <br>
client certificate is sent to the server for validation.
Some servers may require a valid client certificate and may
refuse connections if a certificate is not provided or if
<br>
the certificate is not valid. Some servers may require
client side certificates be signed by a recognized
Certifying Authority. The format for the key files and the
certificate <br>
files is that required by the underlying SSL libraries
(OpenSSL in the general case).</p>

<p style="margin-top: 1em">A word of care about the use of
SSL: While above mentioned setup with self-signed server
certificates retrieved over the wires can protect you from a
passive eavesdropper, it <br>
doesn&rsquo;t help against an active attacker. It&rsquo;s
clearly an improvement over sending the passwords in clear,
but you should be aware that a man-in-the-middle attack is
trivially <br>
possible (in particular with tools such as dsniff
&acirc;&uml;http://monkey.org/~dugsong/dsniff/&acirc;&copy;,
). Use of strict certificate checking with a certification
authority recognized by server <br>
and client, or perhaps of an SSH tunnel (see below for some
examples) is preferable if you care seriously about the
security of your mailbox and passwords.</p>

<p style="margin-top: 1em">ESMTP AUTH <br>
fetchmail also supports authentication to the ESMTP server
on the client side according to RFC 2554. You can specify a
name/password pair to be used with the keywords
&rsquo;esmtp&acirc; <br>
name&rsquo; and &rsquo;esmtppassword&rsquo;; the former
defaults to the username of the calling user.</p>

<p style="margin-top: 1em">DAEMON MODE <br>
Introducing the daemon mode <br>
In daemon mode, fetchmail puts itself into the background
and runs forever, querying each specified host and then
sleeping for a given polling interval.</p>

<p style="margin-top: 1em">Starting the daemon mode <br>
There are several ways to make fetchmail work in daemon
mode. On the command line, --daemon &lt;interval&gt; or -d
&lt;interval&gt; option runs fetchmail in daemon mode. You
must specify a <br>
numeric argument which is a polling interval (time to wait
after completing a whole poll cycle with the last server and
before starting the next poll cycle with the first server)
<br>
in seconds.</p>

<p style="margin-top: 1em">Example: simply invoking</p>

<p style="margin-top: 1em">fetchmail -d 900</p>

<p style="margin-top: 1em">will, therefore, poll all the
hosts described in your ~/.fetchmailrc file (except those
explicitly excluded with the &rsquo;skip&rsquo; verb) a bit
less often than once every 15 minutes <br>
(exactly: 15 minutes + time that the poll takes).</p>

<p style="margin-top: 1em">It is also possible to set a
polling interval in your ~/.fetchmailrc file by saying
&rsquo;set daemon &lt;interval&gt;&rsquo;, where
&lt;interval&gt; is an integer number of seconds. If you do
this, <br>
fetchmail will always start in daemon mode unless you
override it with the command-line option --daemon 0 or
-d0.</p>

<p style="margin-top: 1em">Only one daemon process is
permitted per user; in daemon mode, fetchmail sets up a
per-user lockfile to guarantee this. (You can however cheat
and set the FETCHMAILHOME environ&acirc; <br>
ment variable to overcome this setting, but in that case, it
is your responsibility to make sure you aren&rsquo;t polling
the same server with two processes at the same time.)</p>

<p style="margin-top: 1em">Awakening the background daemon
<br>
Normally, calling fetchmail with a daemon in the background
sends a wake-up signal to the daemon and quits without
output. The background daemon then starts its next poll
cycle <br>
immediately. The wake-up signal, SIGUSR1, can also be sent
manually. The wake-up action also clears any
&rsquo;wedged&rsquo; flags indicating that connections have
wedged due to failed <br>
authentication or multiple timeouts.</p>

<p style="margin-top: 1em">Terminating the background
daemon <br>
The option --quit will kill a running daemon process instead
of waking it up (if there is no such process, fetchmail will
notify you). If the --quit option appears last on the <br>
command line, fetchmail will kill the running daemon process
and then quit. Otherwise, fetchmail will first kill a
running daemon process and then continue running with the
other <br>
options.</p>

<p style="margin-top: 1em">Useful options for daemon mode
<br>
The -L &lt;filename&gt; or --logfile &lt;filename&gt; option
(keyword: set logfile) is only effective when fetchmail is
detached and in daemon mode. Note that the logfile must
exist before <br>
fetchmail is run, you can use the touch(1) command with the
filename as its sole argument to create it. <br>
This option allows you to redirect status messages into a
specified logfile (follow the option with the logfile name).
The logfile is opened for append, so previous messages <br>
aren&rsquo;t deleted. This is primarily useful for debugging
configurations. Note that fetchmail does not detect if the
logfile is rotated, the logfile is only opened once when
fetch&acirc; <br>
mail starts. You need to restart fetchmail after rotating
the logfile and before compressing it (if applicable).</p>

<p style="margin-top: 1em">The --syslog option (keyword:
set syslog) allows you to redirect status and error messages
emitted to the syslog(3) system daemon if available.
Messages are logged with an id of <br>
fetchmail, the facility LOG_MAIL, and priorities LOG_ERR,
LOG_ALERT or LOG_INFO. This option is intended for logging
status and error messages which indicate the status of the
<br>
daemon and the results while fetching mail from the
server(s). Error messages for command line options and
parsing the .fetchmailrc file are still written to stderr,
or to the <br>
specified log file. The --nosyslog option turns off use of
syslog(3), assuming it&rsquo;s turned on in the
~/.fetchmailrc file. This option is overridden, in certain
situations, by <br>
--logfile (which see).</p>

<p style="margin-top: 1em">The -N or --nodetach option
suppresses backgrounding and detachment of the daemon
process from its control terminal. This is useful for
debugging or when fetchmail runs as the <br>
child of a supervisor process such as init(8) or Gerrit
Pape&rsquo;s runit(8). Note that this also causes the
logfile option to be ignored.</p>

<p style="margin-top: 1em">Note that while running in
daemon mode polling a POP2 or IMAP2bis server, transient
errors (such as DNS failures or sendmail delivery refusals)
may force the fetchall option on <br>
for the duration of the next polling cycle. This is a
robustness feature. It means that if a message is fetched
(and thus marked seen by the mailserver) but not delivered
<br>
locally due to some transient error, it will be re-fetched
during the next poll cycle. (The IMAP logic doesn&rsquo;t
delete messages until they&rsquo;re delivered, so this
problem does not <br>
arise.)</p>

<p style="margin-top: 1em">If you touch or change the
~/.fetchmailrc file while fetchmail is running in daemon
mode, this will be detected at the beginning of the next
poll cycle. When a changed ~/.fetch&acirc; <br>
mailrc is detected, fetchmail rereads it and restarts from
scratch (using exec(2); no state information is retained in
the new instance). Note that if fetchmail needs to query
<br>
for passwords, of that if you break the ~/.fetchmailrc
file&rsquo;s syntax, the new instance will softly and
silently vanish away on startup.</p>

<p style="margin-top: 1em">ADMINISTRATIVE OPTIONS <br>
The --postmaster &lt;name&gt; option (keyword: set
postmaster) specifies the last-resort username to which
multidrop mail is to be forwarded if no matching local
recipient can be <br>
found. It is also used as destination of undeliverable mail
if the &rsquo;bouncemail&rsquo; global option is off and
additionally for spam-blocked mail if the
&rsquo;bouncemail&rsquo; global option is <br>
off and the &rsquo;spambounce&rsquo; global option is on.
This option defaults to the user who invoked fetchmail. If
the invoking user is root, then the default of this option
is the user <br>
&rsquo;postmaster&rsquo;. Setting postmaster to the empty
string causes such mail as described above to be discarded -
this however is usually a bad idea. See also the description
of the <br>
&rsquo;FETCHMAILUSER&rsquo; environment variable in the
ENVIRONMENT section below.</p>

<p style="margin-top: 1em">The --nobounce behaves like the
&quot;set no bouncemail&quot; global option, which see.</p>

<p style="margin-top: 1em">The --invisible option (keyword:
set invisible) tries to make fetchmail invisible. Normally,
fetchmail behaves like any other MTA would -- it generates a
Received header into <br>
each message describing its place in the chain of
transmission, and tells the MTA it forwards to that the mail
came from the machine fetchmail itself is running on. If the
<br>
invisible option is on, the Received header is suppressed
and fetchmail tries to spoof the MTA it forwards to into
thinking it came directly from the mailserver host.</p>

<p style="margin-top: 1em">The --showdots option (keyword:
set showdots) forces fetchmail to show progress dots even if
the output goes to a file or fetchmail is not in verbose
mode. Fetchmail shows the <br>
dots by default when run in --verbose mode and output goes
to console. This option is ignored in --silent mode.</p>

<p style="margin-top: 1em">By specifying the --tracepolls
option, you can ask fetchmail to add information to the
Received header on the form &quot;polling {label} account
{user}&quot;, where {label} is the account <br>
label (from the specified rcfile, normally ~/.fetchmailrc)
and {user} is the username which is used to log on to the
mail server. This header can be used to make filtering email
<br>
where no useful header information is available and you want
mail from different accounts sorted into different mailboxes
(this could, for example, occur if you have an account <br>
on the same server running a mailing list, and are
subscribed to the list using that account). The default is
not adding any such header. In .fetchmailrc, this is called
&rsquo;trace&acirc; <br>
polls&rsquo;.</p>

<p style="margin-top: 1em">RETRIEVAL FAILURE MODES <br>
The protocols fetchmail uses to talk to mailservers are next
to bulletproof. In normal operation forwarding to port 25,
no message is ever deleted (or even marked for deletion)
<br>
on the host until the SMTP listener on the client side has
acknowledged to fetchmail that the message has been either
accepted for delivery or rejected due to a spam block.</p>

<p style="margin-top: 1em">When forwarding to an MDA,
however, there is more possibility of error. Some MDAs are
&rsquo;safe&rsquo; and reliably return a nonzero status on
any delivery error, even one due to tempo&acirc; <br>
rary resource limits. The maildrop(1) program is like this;
so are most programs designed as mail transport agents, such
as sendmail(1), including the sendmail wrapper of
Post&acirc; <br>
fix and exim(1). These programs give back a reliable
positive acknowledgement and can be used with the mda option
with no risk of mail loss. Unsafe MDAs, though, may return 0
<br>
even on delivery failure. If this happens, you will lose
mail.</p>

<p style="margin-top: 1em">The normal mode of fetchmail is
to try to download only &rsquo;new&rsquo; messages, leaving
untouched (and undeleted) messages you have already read
directly on the server (or fetched with a <br>
previous fetchmail --keep). But you may find that messages
you&rsquo;ve already read on the server are being fetched
(and deleted) even when you don&rsquo;t specify --all. There
are sev&acirc; <br>
eral reasons this can happen.</p>

<p style="margin-top: 1em">One could be that you&rsquo;re
using POP2. The POP2 protocol includes no representation of
&rsquo;new&rsquo; or &rsquo;old&rsquo; state in messages, so
fetchmail must treat all messages as new all the time. <br>
But POP2 is obsolete, so this is unlikely.</p>

<p style="margin-top: 1em">A potential POP3 problem might
be servers that insert messages in the middle of mailboxes
(some VMS implementations of mail are rumored to do this).
The fetchmail code assumes <br>
that new messages are appended to the end of the mailbox;
when this is not true it may treat some old messages as new
and vice versa. Using UIDL whilst setting fastuidl 0 might
<br>
fix this, otherwise, consider switching to IMAP.</p>

<p style="margin-top: 1em">Yet another POP3 problem is that
if they can&rsquo;t make tempfiles in the user&rsquo;s home
directory, some POP3 servers will hand back an undocumented
response that causes fetchmail to <br>
spuriously report &quot;No mail&quot;.</p>

<p style="margin-top: 1em">The IMAP code uses the presence
or absence of the server flag n to decide whether or not a
message is new. This isn&rsquo;t the right thing to do,
fetchmail should check the UID&acirc; <br>
VALIDITY and use UID, but it doesn&rsquo;t do that yet.
Under Unix, it counts on your IMAP server to notice the
BSD-style Status flags set by mail user agents and set the n
flag <br>
from them when appropriate. All Unix IMAP servers we know of
do this, though it&rsquo;s not specified by the IMAP RFCs.
If you ever trip over a server that doesn&rsquo;t, the
symptom will <br>
be that messages you have already read on your host will
look new to the server. In this (unlikely) case, only
messages you fetched with fetchmail --keep will be both
undeleted <br>
and marked old.</p>

<p style="margin-top: 1em">In ETRN and ODMR modes,
fetchmail does not actually retrieve messages; instead, it
asks the server&rsquo;s SMTP listener to start a queue flush
to the client via SMTP. Therefore it <br>
sends only undelivered messages.</p>

<p style="margin-top: 1em">SPAM FILTERING <br>
Many SMTP listeners allow administrators to set up
&rsquo;spam filters&rsquo; that block unsolicited email from
specified domains. A MAIL FROM or DATA line that triggers
this feature will <br>
elicit an SMTP response which (unfortunately) varies
according to the listener.</p>

<p style="margin-top: 1em">Newer versions of sendmail
return an error code of 571.</p>

<p style="margin-top: 1em">According to RFC2821, the
correct thing to return in this situation is 550
&quot;Requested action not taken: mailbox unavailable&quot;
(the draft adds &quot;[E.g., mailbox not found, no access,
<br>
or command rejected for policy reasons].&quot;).</p>

<p style="margin-top: 1em">Older versions of the exim MTA
return 501 &quot;Syntax error in parameters or
arguments&quot;.</p>

<p style="margin-top: 1em">The postfix MTA runs 554 as an
antispam response.</p>

<p style="margin-top: 1em">Zmailer may reject code with a
500 response (followed by an enhanced status code that
contains more information).</p>

<p style="margin-top: 1em">Return codes which fetchmail
treats as antispam responses and discards the message can be
set with the &rsquo;antispam&rsquo; option. This is one of
the only three circumstance under which <br>
fetchmail ever discards mail (the others are the 552 and 553
errors described below, and the suppression of multidropped
messages with a message-ID already seen).</p>

<p style="margin-top: 1em">If fetchmail is fetching from an
IMAP server, the antispam response will be detected and the
message rejected immediately after the headers have been
fetched, without reading the <br>
message body. Thus, you won&rsquo;t pay for downloading spam
message bodies.</p>

<p style="margin-top: 1em">By default, the list of antispam
responses is empty.</p>

<p style="margin-top: 1em">If the spambounce global option
is on, mail that is spam-blocked triggers an RFC1892/RFC1894
bounce message informing the originator that we do not
accept mail from it. See also <br>
BUGS.</p>

<p style="margin-top: 1em">SMTP/ESMTP ERROR HANDLING <br>
Besides the spam-blocking described above, fetchmail takes
special actions on the following SMTP/ESMTP error
responses</p>

<p style="margin-top: 1em">452 (insufficient system
storage) <br>
Leave the message in the server mailbox for later
retrieval.</p>

<p style="margin-top: 1em">552 (message exceeds fixed
maximum message size) <br>
Delete the message from the server. Send bounce-mail to the
originator.</p>

<p style="margin-top: 1em">553 (invalid sending domain)
<br>
Delete the message from the server. Don&rsquo;t even try to
send bounce-mail to the originator.</p>

<p style="margin-top: 1em">Other errors trigger bounce mail
back to the originator. See also BUGS.</p>

<p style="margin-top: 1em">THE RUN CONTROL FILE <br>
The preferred way to set up fetchmail is to write a
.fetchmailrc file in your home directory (you may do this
directly, with a text editor, or indirectly via
fetchmailconf). <br>
When there is a conflict between the command-line arguments
and the arguments in this file, the command-line arguments
take precedence.</p>

<p style="margin-top: 1em">To protect the security of your
passwords, your ~/.fetchmailrc may not normally have more
than 0700 (u=rwx,g=,o=) permissions; fetchmail will complain
and exit otherwise (this <br>
check is suppressed when --version is on).</p>

<p style="margin-top: 1em">You may read the .fetchmailrc
file as a list of commands to be executed when fetchmail is
called with no arguments.</p>

<p style="margin-top: 1em">Run Control Syntax <br>
Comments begin with a &rsquo;#&rsquo; and extend through the
end of the line. Otherwise the file consists of a series of
server entries or global option statements in a free-format,
token- <br>
oriented syntax.</p>

<p style="margin-top: 1em">There are four kinds of tokens:
grammar keywords, numbers (i.e. decimal digit sequences),
unquoted strings, and quoted strings. A quoted string is
bounded by double quotes and <br>
may contain whitespace (and quoted digits are treated as a
string). Note that quoted strings will also contain line
feed characters if they run across two or more lines, unless
<br>
you use a backslash to join lines (see below). An unquoted
string is any whitespace-delimited token that is neither
numeric, string quoted nor contains the special characters
<br>
&rsquo;,&rsquo;, &rsquo;;&rsquo;, &rsquo;:&rsquo;, or
&rsquo;=&rsquo;.</p>

<p style="margin-top: 1em">Any amount of whitespace
separates tokens in server entries, but is otherwise
ignored. You may use backslash escapef for CR, 0n sequences
(for LF, for HT, oBS, r <br>
for decimal (where nnn cannot start with a 0), ooo for
octal, and for hex) to embed non-printable characters or
string delimiters in strings. In quoted strings, a
back&acirc; <br>
slash at the very end of a line will cause the backslash
itself and the line feed (LF or NL, new line) character to
be ignored, so that you can wrap long strings. Without the
<br>
backslash at the line end, the line feed character would
become part of the string.</p>

<p style="margin-top: 1em">Warning: while these resemble
C-style escape sequences, they are not the same. fetchmail
only supports these eight styles. C supports more escape
sequences that consist of back&acirc; <br>
slash ( and a single character, but does not support decimal
codes and does not require the leading 0 in octal notation.
Example: fetchmail interprets 233 the same as (Latin small
letter e with acute), where C would interpret 233 as octal
0233 = B (CSI, control sequence introducer).</p>

<p style="margin-top: 1em">Each server entry consists of
one of the keywords &rsquo;poll&rsquo; or
&rsquo;skip&rsquo;, followed by a server name, followed by
server options, followed by any number of user (or username)
descrip&acirc; <br>
tions, followed by user options. Note: the most common cause
of syntax errors is mixing up user and server options or
putting user options before the user descriptions.</p>

<p style="margin-top: 1em">For backward compatibility, the
word &rsquo;server&rsquo; is a synonym for
&rsquo;poll&rsquo;.</p>

<p style="margin-top: 1em">You can use the noise keywords
&rsquo;and&rsquo;, &rsquo;with&rsquo;, &rsquo;has&rsquo;,
&rsquo;wants&rsquo;, and &rsquo;options&rsquo; anywhere in
an entry to make it resemble English. They&rsquo;re ignored,
but but can make entries much eas&acirc; <br>
ier to read at a glance. The punctuation characters
&rsquo;:&rsquo;, &rsquo;;&rsquo; and &rsquo;,&rsquo; are
also ignored.</p>

<p style="margin-top: 1em">Poll vs. Skip <br>
The &rsquo;poll&rsquo; verb tells fetchmail to query this
host when it is run with no arguments. The
&rsquo;skip&rsquo; verb tells fetchmail not to poll this
host unless it is explicitly named on the <br>
command line. (The &rsquo;skip&rsquo; verb allows you to
experiment with test entries safely, or easily disable
entries for hosts that are temporarily down.)</p>

<p style="margin-top: 1em">Keyword/Option Summary <br>
Here are the legal options. Keyword suffixes enclosed in
square brackets are optional. Those corresponding to short
command-line options are followed by &rsquo;-&rsquo; and the
appropriate <br>
option letter. If option is only relevant to a single mode
of operation, it is noted as &rsquo;s&rsquo; or
&rsquo;m&rsquo; for singledrop- or multidrop-mode,
respectively.</p>

<p style="margin-top: 1em">Here are the legal global
options:</p>

<p style="margin-top: 1em">Keyword Opt Mode Function <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
set daemon -d Set a background poll interval in <br>
seconds. <br>
set postmaster Give the name of the last-resort <br>
mail recipient (default: user run&acirc; <br>
ning fetchmail, &quot;postmaster&quot; if <br>
run by the root user) <br>
set bouncemail Direct error mail to the sender <br>
(default) <br>
set no bouncemail Direct error mail to the local <br>
postmaster (as per the &rsquo;postmas&acirc; <br>
ter&rsquo; global option above). <br>
set no spambounce Do not bounce spam-blocked mail <br>
(default). <br>
set spambounce Bounce blocked spam-blocked mail <br>
(as per the &rsquo;antispam&rsquo; user <br>
option) back to the destination as <br>
indicated by the &rsquo;bouncemail&rsquo; <br>
global option. Warning: Do not <br>
use this to bounce spam back to <br>
the sender - most spam is sent <br>
with false sender address and thus <br>
this option hurts innocent <br>
bystanders. <br>
set no softbounce Delete permanently undeliverable <br>
mail. It is recommended to use <br>
this option if the configuration <br>
has been thoroughly tested. <br>
set softbounce Keep permanently undeliverable <br>
mail as though a temporary error <br>
had occurred (default). <br>
set logfile -L Name of a file to append error and <br>
status messages to. Only effec&acirc; <br>
tive in daemon mode and if fetch&acirc; <br>
mail detaches. If effective, <br>
overrides set syslog. <br>
set idfile -i Name of the file to store UID <br>
lists in. <br>
set syslog Do error logging through sys&acirc; <br>
log(3). May be overriden by set <br>
logfile. <br>
set no syslog Turn off error logging through <br>
syslog(3). (default) <br>
set properties String value that is ignored by <br>
fetchmail (may be used by exten&acirc; <br>
sion scripts).</p>

<p style="margin-top: 1em">Here are the legal server
options:</p>

<p style="margin-top: 1em">Keyword Opt Mode Function <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
via Specify DNS name of mailserver, <br>
overriding poll name <br>
proto[col] -p Specify protocol (case insensi&acirc; <br>
tive): POP2, POP3, IMAP, APOP, <br>
KPOP <br>
local[domains] m Specify domain(s) to be regarded <br>
as local <br>
port Specify TCP/IP service port (obso&acirc; <br>
lete, use &rsquo;service&rsquo; instead). <br>
service -P Specify service name (a numeric <br>
value is also allowed and consid&acirc; <br>
ered a TCP/IP port number).</p>

<p style="margin-top: 1em">auth[enticate] Set
authentication type (default <br>
&rsquo;any&rsquo;) <br>
timeout -t Server inactivity timeout in sec&acirc; <br>
onds (default 300) <br>
envelope -E m Specify envelope-address header <br>
name <br>
no envelope m Disable looking for envelope <br>
address <br>
qvirtual -Q m Qmail virtual domain prefix to <br>
remove from user name <br>
aka m Specify alternate DNS names of <br>
mailserver <br>
interface -I specify IP interface(s) that must <br>
be up for server poll to take <br>
place <br>
monitor -M Specify IP address to monitor for <br>
activity <br>
plugin Specify command through which to <br>
make server connections. <br>
plugout Specify command through which to <br>
make listener connections. <br>
dns m Enable DNS lookup for multidrop <br>
(default) <br>
no dns m Disable DNS lookup for multidrop <br>
checkalias m Do comparison by IP address for <br>
multidrop <br>
no checkalias m Do comparison by name for mul&acirc; <br>
tidrop (default) <br>
uidl -U Force POP3 to use client-side <br>
UIDLs (recommended) <br>
no uidl Turn off POP3 use of client-side <br>
UIDLs (default) <br>
interval Only check this site every N poll <br>
cycles; N is a numeric argument. <br>
tracepolls Add poll tracing information to <br>
the Received header <br>
principal Set Kerberos principal (only use&acirc; <br>
ful with IMAP and kerberos) <br>
esmtpname Set name for RFC2554 authentica&acirc; <br>
tion to the ESMTP server. <br>
esmtppassword Set password for RFC2554 authenti&acirc; <br>
cation to the ESMTP server. <br>
bad-header How to treat messages with a bad <br>
header. Can be reject (default) or <br>
accept.</p>

<p style="margin-top: 1em">Here are the legal user
descriptions and options:</p>

<p style="margin-top: 1em">Keyword Opt Mode Function <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
user[name] -u This is the user description and <br>
must come first after server <br>
description and after possible <br>
server options, and before user <br>
options. <br>
It sets the remote user name if by <br>
itself or followed by &rsquo;there&rsquo;, or <br>
the local user name if followed by <br>
&rsquo;here&rsquo;. <br>
is Connect local and remote user <br>
names <br>
to Connect local and remote user <br>
names <br>
pass[word] Specify remote account password <br>
ssl Connect to server over the speci&acirc; <br>
fied base protocol using SSL <br>
encryption <br>
sslcert Specify file for client side pub&acirc; <br>
lic SSL certificate <br>
sslcertfile Specify file with trusted CA cer&acirc; <br>
tificates <br>
sslcertpath Specify c_rehash-ed directory with <br>
trusted CA certificates.</p>

<p style="margin-top: 1em">sslkey Specify file for client
side pri&acirc; <br>
vate SSL key <br>
sslproto Force ssl protocol for connection <br>
folder -r Specify remote folder to query <br>
smtphost -S Specify smtp host(s) to forward to <br>
fetchdomains m Specify domains for which mail <br>
should be fetched <br>
smtpaddress -D Specify the domain to be put in <br>
RCPT TO lines <br>
smtpname Specify the user and domain to be <br>
put in RCPT TO lines <br>
antispam -Z Specify what SMTP returns are <br>
interpreted as spam-policy blocks <br>
mda -m Specify MDA for local delivery <br>
bsmtp -o Specify BSMTP batch file to append <br>
to <br>
preconnect Command to be executed before each <br>
connection <br>
postconnect Command to be executed after each <br>
connection <br>
keep -k Don&rsquo;t delete seen messages from <br>
server (for POP3, uidl is recom&acirc; <br>
mended) <br>
flush -F Flush all seen messages before <br>
querying (DANGEROUS) <br>
limitflush Flush all oversized messages <br>
before querying <br>
fetchall -a Fetch all messages whether seen or <br>
not <br>
rewrite Rewrite destination addresses for <br>
reply (default) <br>
stripcr Strip carriage returns from ends <br>
of lines <br>
forcecr Force carriage returns at ends of <br>
lines <br>
pass8bits Force BODY=8BITMIME to ESMTP lis&acirc; <br>
tener <br>
dropstatus Strip Status and X-Mozilla-Status <br>
lines out of incoming mail <br>
dropdelivered Strip Delivered-To lines out of <br>
incoming mail <br>
mimedecode Convert quoted-printable to 8-bit <br>
in MIME messages <br>
idle Idle waiting for new messages <br>
after each poll (IMAP only) <br>
no keep -K Delete seen messages from server <br>
(default) <br>
no flush Don&rsquo;t flush all seen messages <br>
before querying (default) <br>
no fetchall Retrieve only new messages <br>
(default) <br>
no rewrite Don&rsquo;t rewrite headers <br>
no stripcr Don&rsquo;t strip carriage returns <br>
(default) <br>
no forcecr Don&rsquo;t force carriage returns at <br>
EOL (default) <br>
no pass8bits Don&rsquo;t force BODY=8BITMIME to ESMTP <br>
listener (default) <br>
no dropstatus Don&rsquo;t drop Status headers <br>
(default) <br>
no dropdelivered Don&rsquo;t drop Delivered-To headers <br>
(default) <br>
no mimedecode Don&rsquo;t convert quoted-printable to <br>
8-bit in MIME messages (default) <br>
no idle Don&rsquo;t idle waiting for new mes&acirc; <br>
sages after each poll (IMAP only) <br>
limit -l Set message size limit <br>
warnings -w Set message size warning interval <br>
batchlimit -b Max # messages to forward in sin&acirc; <br>
gle connect <br>
fetchlimit -B Max # messages to fetch in single <br>
connect <br>
fetchsizelimit Max # message sizes to fetch in <br>
single transaction</p>

<p style="margin-top: 1em">fastuidl Use binary search for
first unseen <br>
message (POP3 only) <br>
expunge -e Perform an expunge on every #th <br>
message (IMAP and POP3 only) <br>
properties String value is ignored by fetch&acirc; <br>
mail (may be used by extension <br>
scripts)</p>

<p style="margin-top: 1em">All user options must begin with
a user description (user or username option) and follow all
server descriptions and options.</p>

<p style="margin-top: 1em">In the .fetchmailrc file, the
&rsquo;envelope&rsquo; string argument may be preceded by a
whitespace-separated number. This number, if specified, is
the number of such headers to skip over <br>
(that is, an argument of 1 selects the second header of the
given type). This is sometime useful for ignoring bogus
envelope headers created by an ISP&rsquo;s local delivery
agent or <br>
internal forwards (through mail inspection systems, for
instance).</p>

<p style="margin-top: 1em">Keywords Not Corresponding To
Option Switches <br>
The &rsquo;folder&rsquo; and &rsquo;smtphost&rsquo; options
(unlike their command-line equivalents) can take a space- or
comma-separated list of names following them.</p>

<p style="margin-top: 1em">All options correspond to the
obvious command-line arguments, except the following:
&rsquo;via&rsquo;, &rsquo;interval&rsquo;,
&rsquo;aka&rsquo;, &rsquo;is&rsquo;, &rsquo;to&rsquo;,
&rsquo;dns&rsquo;/&rsquo;no dns&rsquo;,
&rsquo;checkalias&rsquo;/&rsquo;no checkalias&rsquo;,
&rsquo;pass&acirc; <br>
word&rsquo;, &rsquo;preconnect&rsquo;,
&rsquo;postconnect&rsquo;, &rsquo;localdomains&rsquo;,
&rsquo;stripcr&rsquo;/&rsquo;no stripcr&rsquo;,
&rsquo;forcecr&rsquo;/&rsquo;no forcecr&rsquo;,
&rsquo;pass8bits&rsquo;/&rsquo;no pass8bits&rsquo;
&rsquo;dropstatus/no dropstatus&rsquo;,
&rsquo;dropdelivered/no <br>
dropdelivered&rsquo;, &rsquo;mimedecode/no
mimedecode&rsquo;, &rsquo;no idle&rsquo;, and &rsquo;no
envelope&rsquo;.</p>

<p style="margin-top: 1em">The &rsquo;via&rsquo; option is
for if you want to have more than one configuration pointing
at the same site. If it is present, the string argument will
be taken as the actual DNS name of <br>
the mailserver host to query. This will override the
argument of poll, which can then simply be a distinct label
for the configuration (e.g. what you would give on the
command <br>
line to explicitly query this host).</p>

<p style="margin-top: 1em">The &rsquo;interval&rsquo;
option (which takes a numeric argument) allows you to poll a
server less frequently than the basic poll interval. If you
say &rsquo;interval N&rsquo; the server this option <br>
is attached to will only be queried every N poll
intervals.</p>

<p style="margin-top: 1em">Singledrop vs. Multidrop options
<br>
Please ensure you read the section titled THE USE AND ABUSE
OF MULTIDROP MAILBOXES if you intend to use multidrop
mode.</p>

<p style="margin-top: 1em">The &rsquo;is&rsquo; or
&rsquo;to&rsquo; keywords associate the following local
(client) name(s) (or server-name to client-name mappings
separated by =) with the mailserver user name in the entry.
If <br>
an is/to list has &rsquo;*&rsquo; as its last name,
unrecognized names are simply passed through. Note that
until fetchmail version 6.3.4 inclusively, these lists could
only contain local <br>
parts of user names (fetchmail would only look at the part
before the @ sign). fetchmail versions 6.3.5 and newer
support full addresses on the left hand side of these
mappings, <br>
and they take precedence over any
&rsquo;localdomains&rsquo;, &rsquo;aka&rsquo;,
&rsquo;via&rsquo; or similar mappings.</p>

<p style="margin-top: 1em">A single local name can be used
to support redirecting your mail when your username on the
client machine is different from your name on the
mailserver. When there is only a <br>
single local name, mail is forwarded to that local username
regardless of the message&rsquo;s Received, To, Cc, and Bcc
headers. In this case, fetchmail never does DNS lookups.</p>

<p style="margin-top: 1em">When there is more than one
local name (or name mapping), fetchmail looks at the
envelope header, if configured, and otherwise at the
Received, To, Cc, and Bcc headers of <br>
retrieved mail (this is &rsquo;multidrop mode&rsquo;). It
looks for addresses with hostname parts that match your poll
name or your &rsquo;via&rsquo;, &rsquo;aka&rsquo; or
&rsquo;localdomains&rsquo; options, and usually also <br>
for hostname parts which DNS tells it are aliases of the
mailserver. See the discussion of &rsquo;dns&rsquo;,
&rsquo;checkalias&rsquo;, &rsquo;localdomains&rsquo;, and
&rsquo;aka&rsquo; for details on how matching addresses <br>
are handled.</p>

<p style="margin-top: 1em">If fetchmail cannot match any
mailserver usernames or localdomain addresses, the mail will
be bounced. Normally it will be bounced to the sender, but
if the &rsquo;bouncemail&rsquo; global <br>
option is off, the mail will go to the local postmaster
instead. (see the &rsquo;postmaster&rsquo; global option).
See also BUGS.</p>

<p style="margin-top: 1em">The &rsquo;dns&rsquo; option
(normally on) controls the way addresses from multidrop
mailboxes are checked. On, it enables logic to check each
host address that does not match an &rsquo;aka&rsquo; or
<br>
&rsquo;localdomains&rsquo; declaration by looking it up with
DNS. When a mailserver username is recognized attached to a
matching hostname part, its local mapping is added to the
list of <br>
local recipients.</p>

<p style="margin-top: 1em">The &rsquo;checkalias&rsquo;
option (normally off) extends the lookups performed by the
&rsquo;dns&rsquo; keyword in multidrop mode, providing a way
to cope with remote MTAs that identify themselves <br>
using their canonical name, while they&rsquo;re polled using
an alias. When such a server is polled, checks to extract
the envelope address fail, and fetchmail reverts to delivery
<br>
using the To/Cc/Bcc headers (See below &rsquo;Header vs.
Envelope addresses&rsquo;). Specifying this option instructs
fetchmail to retrieve all the IP addresses associated with
both the <br>
poll name and the name used by the remote MTA and to do a
comparison of the IP addresses. This comes in handy in
situations where the remote server undergoes frequent
canonical <br>
name changes, that would otherwise require modifications to
the rcfile. &rsquo;checkalias&rsquo; has no effect if
&rsquo;no dns&rsquo; is specified in the rcfile.</p>

<p style="margin-top: 1em">The &rsquo;aka&rsquo; option is
for use with multidrop mailboxes. It allows you to
pre-declare a list of DNS aliases for a server. This is an
optimization hack that allows you to trade <br>
space for speed. When fetchmail, while processing a
multidrop mailbox, grovels through message headers looking
for names of the mailserver, pre-declaring common ones can
save it <br>
from having to do DNS lookups. Note: the names you give as
arguments to &rsquo;aka&rsquo; are matched as suffixes -- if
you specify (say) &rsquo;aka netaxs.com&rsquo;, this will
match not just a host&acirc; <br>
name netaxs.com, but any hostname that ends with
&rsquo;.netaxs.com&rsquo;; such as (say) pop3.netaxs.com and
mail.netaxs.com.</p>

<p style="margin-top: 1em">The &rsquo;localdomains&rsquo;
option allows you to declare a list of domains which
fetchmail should consider local. When fetchmail is parsing
address lines in multidrop modes, and a trail&acirc; <br>
ing segment of a host name matches a declared local domain,
that address is passed through to the listener or MDA
unaltered (local-name mappings are not applied).</p>

<p style="margin-top: 1em">If you are using
&rsquo;localdomains&rsquo;, you may also need to specify
&rsquo;no envelope&rsquo;, which disables fetchmail&rsquo;s
normal attempt to deduce an envelope address from the
Received line or X- <br>
Envelope-To header or whatever header has been previously
set by &rsquo;envelope&rsquo;. If you set &rsquo;no
envelope&rsquo; in the defaults entry it is possible to undo
that in individual entries by <br>
using &rsquo;envelope &lt;string&gt;&rsquo;. As a special
case, &rsquo;envelope &quot;Received&quot;&rsquo; restores
the default parsing of Received lines.</p>

<p style="margin-top: 1em">The password option requires a
string argument, which is the password to be used with the
entry&rsquo;s server.</p>

<p style="margin-top: 1em">The &rsquo;preconnect&rsquo;
keyword allows you to specify a shell command to be executed
just before each time fetchmail establishes a mailserver
connection. This may be useful if you are <br>
attempting to set up secure POP connections with the aid of
ssh(1). If the command returns a nonzero status, the poll of
that mailserver will be aborted.</p>

<p style="margin-top: 1em">Similarly, the
&rsquo;postconnect&rsquo; keyword similarly allows you to
specify a shell command to be executed just after each time
a mailserver connection is taken down.</p>

<p style="margin-top: 1em">The &rsquo;forcecr&rsquo; option
controls whether lines terminated by LF only are given CRLF
termination before forwarding. Strictly speaking RFC821
requires this, but few MTAs enforce the <br>
requirement it so this option is normally off (only one such
MTA, qmail, is in significant use at time of writing).</p>

<p style="margin-top: 1em">The &rsquo;stripcr&rsquo; option
controls whether carriage returns are stripped out of
retrieved mail before it is forwarded. It is normally not
necessary to set this, because it defaults <br>
to &rsquo;on&rsquo; (CR stripping enabled) when there is an
MDA declared but &rsquo;off&rsquo; (CR stripping disabled)
when forwarding is via SMTP. If &rsquo;stripcr&rsquo; and
&rsquo;forcecr&rsquo; are both on, &rsquo;stripcr&rsquo;
<br>
will override.</p>

<p style="margin-top: 1em">The &rsquo;pass8bits&rsquo;
option exists to cope with Microsoft mail programs that
stupidly slap a &quot;Content-Transfer-Encoding: 7bit&quot;
on everything. With this option off (the default) and <br>
such a header present, fetchmail declares BODY=7BIT to an
ESMTP-capable listener; this causes problems for messages
actually using 8-bit ISO or KOI-8 character sets, which will
<br>
be garbled by having the high bits of all characters
stripped. If &rsquo;pass8bits&rsquo; is on, fetchmail is
forced to declare BODY=8BITMIME to any ESMTP-capable
listener. If the listener <br>
is 8-bit-clean (as all the major ones now are) the right
thing will probably result.</p>

<p style="margin-top: 1em">The &rsquo;dropstatus&rsquo;
option controls whether nonempty Status and X-Mozilla-Status
lines are retained in fetched mail (the default) or
discarded. Retaining them allows your MUA to <br>
see what messages (if any) were marked seen on the server.
On the other hand, it can confuse some new-mail notifiers,
which assume that anything with a Status line in it has <br>
been seen. (Note: the empty Status lines inserted by some
buggy POP servers are unconditionally discarded.)</p>

<p style="margin-top: 1em">The &rsquo;dropdelivered&rsquo;
option controls whether Delivered-To headers will be kept in
fetched mail (the default) or discarded. These headers are
added by Qmail and Postfix mailservers <br>
in order to avoid mail loops but may get in your way if you
try to &quot;mirror&quot; a mailserver within the same
domain. Use with caution.</p>

<p style="margin-top: 1em">The &rsquo;mimedecode&rsquo;
option controls whether MIME messages using the
quoted-printable encoding are automatically converted into
pure 8-bit data. If you are delivering mail to an <br>
ESMTP-capable, 8-bit-clean listener (that includes all of
the major MTAs like sendmail), then this will automatically
convert quoted-printable message headers and data into 8-bit
<br>
data, making it easier to understand when reading mail. If
your e-mail programs know how to deal with MIME messages,
then this option is not needed. The mimedecode option is off
<br>
by default, because doing RFC2047 conversion on headers
throws away character-set information and can lead to bad
results if the encoding of the headers differs from the body
<br>
encoding.</p>

<p style="margin-top: 1em">The &rsquo;idle&rsquo; option is
intended to be used with IMAP servers supporting the RFC2177
IDLE command extension, but does not strictly require it. If
it is enabled, and fetchmail <br>
detects that IDLE is supported, an IDLE will be issued at
the end of each poll. This will tell the IMAP server to hold
the connection open and notify the client when new mail is
<br>
available. If IDLE is not supported, fetchmail will simulate
it by periodically issuing NOOP. If you need to poll a link
frequently, IDLE can save bandwidth by eliminating <br>
TCP/IP connects and LOGIN/LOGOUT sequences. On the other
hand, an IDLE connection will eat almost all of your
fetchmail&rsquo;s time, because it will never drop the
connection and <br>
allow other polls to occur unless the server times out the
IDLE. It also doesn&rsquo;t work with multiple folders; only
the first folder will ever be polled.</p>

<p style="margin-top: 1em">The &rsquo;properties&rsquo;
option is an extension mechanism. It takes a string
argument, which is ignored by fetchmail itself. The string
argument may be used to store configuration <br>
information for scripts which require it. In particular, the
output of &rsquo;--configdump&rsquo; option will make
properties associated with a user entry readily available to
a Python <br>
script.</p>

<p style="margin-top: 1em">Miscellaneous Run Control
Options <br>
The words &rsquo;here&rsquo; and &rsquo;there&rsquo; have
useful English-like significance. Normally &rsquo;user eric
is esr&rsquo; would mean that mail for the remote user
&rsquo;eric&rsquo; is to be delivered to &rsquo;esr&rsquo;,
but <br>
you can make this clearer by saying &rsquo;user eric there
is esr here&rsquo;, or reverse it by saying &rsquo;user esr
here is eric there&rsquo;</p>

<p style="margin-top: 1em">Legal protocol identifiers for
use with the &rsquo;protocol&rsquo; keyword are:</p>

<p style="margin-top: 1em">auto (or AUTO) (legacy, to be
removed from future release) <br>
pop2 (or POP2) (legacy, to be removed from future release)
<br>
pop3 (or POP3) <br>
sdps (or SDPS) <br>
imap (or IMAP) <br>
apop (or APOP) <br>
kpop (or KPOP)</p>

<p style="margin-top: 1em">Legal authentication types are
&rsquo;any&rsquo;, &rsquo;password&rsquo;,
&rsquo;kerberos&rsquo;, &rsquo;kerberos_v4&rsquo;,
&rsquo;kerberos_v5&rsquo; and &rsquo;gssapi&rsquo;,
&rsquo;cram-md5&rsquo;, &rsquo;otp&rsquo;, &rsquo;msn&rsquo;
(only for POP3), &rsquo;ntlm&rsquo;, &rsquo;ssh&rsquo;,
&rsquo;external&rsquo; (only <br>
IMAP). The &rsquo;password&rsquo; type specifies
authentication by normal transmission of a password (the
password may be plain text or subject to protocol-specific
encryption as in CRAM- <br>
MD5); &rsquo;kerberos&rsquo; tells fetchmail to try to get a
Kerberos ticket at the start of each query instead, and send
an arbitrary string as the password; and
&rsquo;gssapi&rsquo; tells fetchmail to <br>
use GSSAPI authentication. See the description of the
&rsquo;auth&rsquo; keyword for more.</p>

<p style="margin-top: 1em">Specifying &rsquo;kpop&rsquo;
sets POP3 protocol over port 1109 with Kerberos V4
authentication. These defaults may be overridden by later
options.</p>

<p style="margin-top: 1em">There are some global option
statements: &rsquo;set logfile&rsquo; followed by a string
sets the same global specified by --logfile. A command-line
--logfile option will override this. Note <br>
that --logfile is only effective if fetchmail detaches
itself from the terminal and the logfile already exists
before fetchmail is run, and it overrides --syslog in this
case. <br>
Also, &rsquo;set daemon&rsquo; sets the poll interval as
--daemon does. This can be overridden by a command-line
--daemon option; in particular --daemon 0 can be used to
force foreground <br>
operation. The &rsquo;set postmaster&rsquo; statement sets
the address to which multidrop mail defaults if there are no
local matches. Finally, &rsquo;set syslog&rsquo; sends log
messages to sys&acirc; <br>
logd(8).</p>

<p style="margin-top: 1em">DEBUGGING FETCHMAIL <br>
Fetchmail crashing <br>
There are various ways in that fetchmail may
&quot;crash&quot;, i. e. stop operation suddenly and
unexpectedly. A &quot;crash&quot; usually refers to an error
condition that the software did not <br>
handle by itself. A well-known failure mode is the
&quot;segmentation fault&quot; or &quot;signal 11&quot; or
&quot;SIGSEGV&quot; or just &quot;segfault&quot; for short.
These can be caused by hardware or by software <br>
problems. Software-induced segfaults can usually be
reproduced easily and in the same place, whereas
hardware-induced segfaults can go away if the computer is
rebooted, or pow&acirc; <br>
ered off for a few hours, and can happen in random locations
even if you use the software the same way.</p>

<p style="margin-top: 1em">For solving hardware-induced
segfaults, find the faulty component and repair or replace
it. The Sig11 FAQ
&acirc;&uml;http://www.bitwizard.nl/sig11/&acirc;&copy; may
help you with details.</p>

<p style="margin-top: 1em">For solving software-induced
segfaults, the developers may need a &quot;stack
backtrace&quot;.</p>

<p style="margin-top: 1em">Enabling fetchmail core dumps
<br>
By default, fetchmail suppresses core dumps as these might
contain passwords and other sensitive information. For
debugging fetchmail crashes, obtaining a &quot;stack
backtrace&quot; from <br>
a core dump is often the quickest way to solve the problem,
and when posting your problem on a mailing list, the
developers may ask you for a &quot;backtrace&quot;.</p>

<p style="margin-top: 1em">1. To get useful backtraces,
fetchmail needs to be installed without getting stripped of
its compilation symbols. Unfortunately, most binary packages
that are installed are <br>
stripped, and core files from symbol-stripped programs are
worthless. So you may need to recompile fetchmail. On many
systems, you can type</p>

<p style="margin-top: 1em">file &lsquo;which
fetchmail&lsquo;</p>

<p style="margin-top: 1em">to find out if fetchmail was
symbol-stripped or not. If yours was unstripped, fine,
proceed, if it was stripped, you need to recompile the
source code first. You do not usually <br>
need to install fetchmail in order to debug it.</p>

<p style="margin-top: 1em">2. The shell environment that
starts fetchmail needs to enable core dumps. The key is the
&quot;maximum core (file) size&quot; that can usually be
configured with a tool named &quot;limit&quot; or <br>
&quot;ulimit&quot;. See the documentation for your shell for
details. In the popular bash shell, &quot;ulimit -Sc
unlimited&quot; will allow the core dump.</p>

<p style="margin-top: 1em">3. You need to tell fetchmail,
too, to allow core dumps. To do this, run fetchmail with the
-d0 -v options. It is often easier to also add --nosyslog -N
as well.</p>

<p style="margin-top: 1em">Finally, you need to reproduce
the crash. You can just start fetchmail from the directory
where you compiled it by typing ./fetchmail, so the complete
command line will start <br>
with ./fetchmail -Nvd0 --nosyslog and perhaps list your
other options.</p>

<p style="margin-top: 1em">After the crash, run your
debugger to obtain the core dump. The debugger will often be
GNU GDB, you can then type (adjust paths as necessary) gdb
./fetchmail fetchmail.core and <br>
then, after GDB has started up and read all its files, type
backtrace full, save the output (copy &amp; paste will do,
the backtrace will be read by a human) and then type quit to
<br>
leave gdb. Note: on some systems, the core files have
different names, they might contain a number instead of the
program name, or number and name, but it will usually have
<br>
&quot;core&quot; as part of their name.</p>

<p style="margin-top: 1em">INTERACTION WITH RFC 822 <br>
When trying to determine the originating address of a
message, fetchmail looks through headers in the following
order:</p>

<p style="margin-top: 1em">Return-Path: <br>
Resent-Sender: (ignored if it doesn&rsquo;t contain an @ or
!) <br>
Sender: (ignored if it doesn&rsquo;t contain an @ or !) <br>
Resent-From: <br>
From: <br>
Reply-To: <br>
Apparently-From:</p>

<p style="margin-top: 1em">The originating address is used
for logging, and to set the MAIL FROM address when
forwarding to SMTP. This order is intended to cope
gracefully with receiving mailing list mes&acirc; <br>
sages in multidrop mode. The intent is that if a local
address doesn&rsquo;t exist, the bounce message won&rsquo;t
be returned blindly to the author or to the list itself, but
rather to the <br>
list manager (which is less annoying).</p>

<p style="margin-top: 1em">In multidrop mode, destination
headers are processed as follows: First, fetchmail looks for
the header specified by the &rsquo;envelope&rsquo; option in
order to determine the local recipi&acirc; <br>
ent address. If the mail is addressed to more than one
recipient, the Received line won&rsquo;t contain any
information regarding recipient addresses.</p>

<p style="margin-top: 1em">Then fetchmail looks for the
Resent-To:, Resent-Cc:, and Resent-Bcc: lines. If they
exist, they should contain the final recipients and have
precedence over their To:/Cc:/Bcc: <br>
counterparts. If the Resent-* lines don&rsquo;t exist, the
To:, Cc:, Bcc: and Apparently-To: lines are looked for. (The
presence of a Resent-To: is taken to imply that the person
<br>
referred by the To: address has already received the
original copy of the mail.)</p>

<p style="margin-top: 1em">CONFIGURATION EXAMPLES <br>
Note that although there are password declarations in a good
many of the examples below, this is mainly for illustrative
purposes. We recommend stashing account/password pairs <br>
in your $HOME/.netrc file, where they can be used not just
by fetchmail but by ftp(1) and other programs.</p>

<p style="margin-top: 1em">The basic format is:</p>

<p style="margin-top: 1em">poll SERVERNAME protocol
PROTOCOL username NAME password PASSWORD</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">poll pop.provider.net protocol
pop3 username &quot;jsmith&quot; password
&quot;secret1&quot;</p>

<p style="margin-top: 1em">Or, using some
abbreviations:</p>

<p style="margin-top: 1em">poll pop.provider.net proto pop3
user &quot;jsmith&quot; password &quot;secret1&quot;</p>

<p style="margin-top: 1em">Multiple servers may be
listed:</p>

<p style="margin-top: 1em">poll pop.provider.net proto pop3
user &quot;jsmith&quot; pass &quot;secret1&quot; <br>
poll other.provider.net proto pop2 user
&quot;John.Smith&quot; pass &quot;My^Hat&quot;</p>

<p style="margin-top: 1em">Here&rsquo;s the same version
with more whitespace and some noise words:</p>

<p style="margin-top: 1em">poll pop.provider.net proto pop3
<br>
user &quot;jsmith&quot;, with password secret1, is
&quot;jsmith&quot; here; <br>
poll other.provider.net proto pop2: <br>
user &quot;John.Smith&quot;, with password
&quot;My^Hat&quot;, is &quot;John.Smith&quot; here;</p>

<p style="margin-top: 1em">If you need to include
whitespace in a parameter string or start the latter with a
number, enclose the string in double quotes. Thus:</p>

<p style="margin-top: 1em">poll mail.provider.net with
proto pop3: <br>
user &quot;jsmith&quot; there has password &quot;4u but u
can&rsquo;t krak this&quot; <br>
is jws here and wants mda &quot;/bin/mail&quot;</p>

<p style="margin-top: 1em">You may have an initial server
description headed by the keyword &rsquo;defaults&rsquo;
instead of &rsquo;poll&rsquo; followed by a name. Such a
record is interpreted as defaults for all queries to <br>
use. It may be overwritten by individual server
descriptions. So, you could write:</p>

<p style="margin-top: 1em">defaults proto pop3 <br>
user &quot;jsmith&quot; <br>
poll pop.provider.net <br>
pass &quot;secret1&quot; <br>
poll mail.provider.net <br>
user &quot;jjsmith&quot; there has password
&quot;secret2&quot;</p>

<p style="margin-top: 1em">It&rsquo;s possible to specify
more than one user per server. The &rsquo;user&rsquo;
keyword leads off a user description, and every user
specification in a multi-user entry must include it. <br>
Here&rsquo;s an example:</p>

<p style="margin-top: 1em">poll pop.provider.net proto pop3
port 3111 <br>
user &quot;jsmith&quot; with pass &quot;secret1&quot; is
&quot;smith&quot; here <br>
user jones with pass &quot;secret2&quot; is
&quot;jjones&quot; here keep</p>

<p style="margin-top: 1em">This associates the local
username &rsquo;smith&rsquo; with the pop.provider.net
username &rsquo;jsmith&rsquo; and the local username
&rsquo;jjones&rsquo; with the pop.provider.net username
&rsquo;jones&rsquo;. Mail for <br>
&rsquo;jones&rsquo; is kept on the server after
download.</p>

<p style="margin-top: 1em">Here&rsquo;s what a simple
retrieval configuration for a multidrop mailbox looks
like:</p>

<p style="margin-top: 1em">poll pop.provider.net: <br>
user maildrop with pass secret1 to golux
&rsquo;hurkle&rsquo;=&rsquo;happy&rsquo; snark here</p>

<p style="margin-top: 1em">This says that the mailbox of
account &rsquo;maildrop&rsquo; on the server is a multidrop
box, and that messages in it should be parsed for the server
user names &rsquo;golux&rsquo;, &rsquo;hurkle&rsquo;, and
<br>
&rsquo;snark&rsquo;. It further specifies that
&rsquo;golux&rsquo; and &rsquo;snark&rsquo; have the same
name on the client as on the server, but mail for server
user &rsquo;hurkle&rsquo; should be delivered to client user
<br>
&rsquo;happy&rsquo;.</p>

<p style="margin-top: 1em">Note that fetchmail, until
version 6.3.4, did NOT allow full user@domain specifications
here, these would never match. Fetchmail 6.3.5 and newer
support user@domain specifica&acirc; <br>
tions on the left-hand side of a user mapping.</p>

<p style="margin-top: 1em">Here&rsquo;s an example of
another kind of multidrop connection:</p>

<p style="margin-top: 1em">poll pop.provider.net
localdomains loonytoons.org toons.org <br>
envelope X-Envelope-To <br>
user maildrop with pass secret1 to * here</p>

<p style="margin-top: 1em">This also says that the mailbox
of account &rsquo;maildrop&rsquo; on the server is a
multidrop box. It tells fetchmail that any address in the
loonytoons.org or toons.org domains (including <br>
sub-domain addresses like
&rsquo;joe@daffy.loonytoons.org&rsquo;) should be passed
through to the local SMTP listener without modification. Be
careful of mail loops if you do this!</p>

<p style="margin-top: 1em">Here&rsquo;s an example
configuration using ssh and the plugin option. The queries
are made directly on the stdin and stdout of imapd via ssh.
Note that in this setup, IMAP authenti&acirc; <br>
cation can be skipped.</p>

<p style="margin-top: 1em">poll mailhost.net with proto
imap: <br>
plugin &quot;ssh %h /usr/sbin/imapd&quot; auth ssh; <br>
user esr is esr here</p>

<p style="margin-top: 1em">THE USE AND ABUSE OF MULTIDROP
MAILBOXES <br>
Use the multiple-local-recipients feature with caution -- it
can bite. All multidrop features are ineffective in ETRN and
ODMR modes.</p>

<p style="margin-top: 1em">Also, note that in multidrop
mode duplicate mails are suppressed. A piece of mail is
considered duplicate if it has the same message-ID as the
message immediately preceding and <br>
more than one addressee. Such runs of messages may be
generated when copies of a message addressed to multiple
users are delivered to a multidrop box.</p>

<p style="margin-top: 1em">Header vs. Envelope addresses
<br>
The fundamental problem is that by having your mailserver
toss several peoples&rsquo; mail in a single maildrop box,
you may have thrown away potentially vital information about
who <br>
each piece of mail was actually addressed to (the
&rsquo;envelope address&rsquo;, as opposed to the header
addresses in the RFC822 To/Cc headers - the Bcc is not
available at the receiving <br>
end). This &rsquo;envelope address&rsquo; is the address you
need in order to reroute mail properly.</p>

<p style="margin-top: 1em">Sometimes fetchmail can deduce
the envelope address. If the mailserver MTA is sendmail and
the item of mail had just one recipient, the MTA will have
written a &rsquo;by/for&rsquo; clause <br>
that gives the envelope addressee into its Received header.
But this doesn&rsquo;t work reliably for other MTAs, nor if
there is more than one recipient. By default, fetchmail
looks <br>
for envelope addresses in these lines; you can restore this
default with -E &quot;Received&quot; or &rsquo;envelope
Received&rsquo;.</p>

<p style="margin-top: 1em">As a better alternative, some
SMTP listeners and/or mail servers insert a header in each
message containing a copy of the envelope addresses. This
header (when it exists) is <br>
often &rsquo;X-Original-To&rsquo;,
&rsquo;Delivered-To&rsquo; or &rsquo;X-Envelope-To&rsquo;.
Fetchmail&rsquo;s assumption about this can be changed with
the -E or &rsquo;envelope&rsquo; option. Note that writing
an envelope <br>
header of this kind exposes the names of recipients
(including blind-copy recipients) to all receivers of the
messages, so the upstream must store one copy of the message
per <br>
recipient to avoid becoming a privacy problem.</p>

<p style="margin-top: 1em">Postfix, since version 2.0,
writes an X-Original-To: header which contains a copy of the
envelope as it was received.</p>

<p style="margin-top: 1em">Qmail and Postfix generally
write a &rsquo;Delivered-To&rsquo; header upon delivering
the message to the mail spool and use it to avoid mail
loops. Qmail virtual domains however will prefix <br>
the user name with a string that normally matches the
user&rsquo;s domain. To remove this prefix you can use the
-Q or &rsquo;qvirtual&rsquo; option.</p>

<p style="margin-top: 1em">Sometimes, unfortunately,
neither of these methods works. That is the point when you
should contact your ISP and ask them to provide such an
envelope header, and you should not <br>
use multidrop in this situation. When they all fail,
fetchmail must fall back on the contents of To/Cc headers
(Bcc headers are not available - see below) to try to
determine <br>
recipient addressees -- and these are unreliable. In
particular, mailing-list software often ships mail with only
the list broadcast address in the To header.</p>

<p style="margin-top: 1em">Note that a future version of
fetchmail may remove To/Cc parsing!</p>

<p style="margin-top: 1em">When fetchmail cannot deduce a
recipient address that is local, and the intended recipient
address was anyone other than fetchmail&rsquo;s invoking
user, mail will get lost. This is <br>
what makes the multidrop feature risky without proper
envelope information.</p>

<p style="margin-top: 1em">A related problem is that when
you blind-copy a mail message, the Bcc information is
carried only as envelope address (it&rsquo;s removed from
the headers by the sending mail server, <br>
so fetchmail can see it only if there is an X-Envelope-To
header). Thus, blind-copying to someone who gets mail over a
fetchmail multidrop link will fail unless the the <br>
mailserver host routinely writes X-Envelope-To or an
equivalent header into messages in your maildrop.</p>

<p style="margin-top: 1em">In conclusion, mailing lists and
Bcc&rsquo;d mail can only work if the server you&rsquo;re
fetching from</p>

<p style="margin-top: 1em">(1) stores one copy of the
message per recipient in your domain and</p>

<p style="margin-top: 1em">(2) records the envelope
information in a special header (X-Original-To,
Delivered-To, X-Envelope-To).</p>

<p style="margin-top: 1em">Good Ways To Use Multidrop
Mailboxes <br>
Multiple local names can be used to administer a mailing
list from the client side of a fetchmail collection. Suppose
your name is &rsquo;esr&rsquo;, and you want to both pick up
your own <br>
mail and maintain a mailing list called (say)
&quot;fetchmail-friends&quot;, and you want to keep the
alias list on your client machine.</p>

<p style="margin-top: 1em">On your server, you can alias
&rsquo;fetchmail-friends&rsquo; to &rsquo;esr&rsquo;; then,
in your .fetchmailrc, declare &rsquo;to esr
fetchmail-friends here&rsquo;. Then, when mail including
&rsquo;fetchmail-friends&rsquo; as <br>
a local address gets fetched, the list name will be appended
to the list of recipients your SMTP listener sees. Therefore
it will undergo alias expansion locally. Be sure to <br>
include &rsquo;esr&rsquo; in the local alias expansion of
fetchmail-friends, or you&rsquo;ll never see mail sent only
to the list. Also be sure that your listener has the
&quot;me-too&quot; option set <br>
(sendmail&rsquo;s -oXm command-line option or OXm
declaration) so your name isn&rsquo;t removed from alias
expansions in messages you send.</p>

<p style="margin-top: 1em">This trick is not without its
problems, however. You&rsquo;ll begin to see this when a
message comes in that is addressed only to a mailing list
you do not have declared as a local <br>
name. Each such message will feature an
&rsquo;X-Fetchmail-Warning&rsquo; header which is generated
because fetchmail cannot find a valid local name in the
recipient addresses. Such mes&acirc; <br>
sages default (as was described above) to being sent to the
local user running fetchmail, but the program has no way to
know that that&rsquo;s actually the right thing.</p>

<p style="margin-top: 1em">Bad Ways To Abuse Multidrop
Mailboxes <br>
Multidrop mailboxes and fetchmail serving multiple users in
daemon mode do not mix. The problem, again, is mail from
mailing lists, which typically does not have an individual
<br>
recipient address on it. Unless fetchmail can deduce an
envelope address, such mail will only go to the account
running fetchmail (probably root). Also, blind-copied users
are <br>
very likely never to see their mail at all.</p>

<p style="margin-top: 1em">If you&rsquo;re tempted to use
fetchmail to retrieve mail for multiple users from a single
mail drop via POP or IMAP, think again (and reread the
section on header and envelope <br>
addresses above). It would be smarter to just let the mail
sit in the mailserver&rsquo;s queue and use
fetchmail&rsquo;s ETRN or ODMR modes to trigger SMTP sends
periodically (of course, <br>
this means you have to poll more frequently than the
mailserver&rsquo;s expiry period). If you can&rsquo;t
arrange this, try setting up a UUCP feed.</p>

<p style="margin-top: 1em">If you absolutely must use
multidrop for this purpose, make sure your mailserver writes
an envelope-address header that fetchmail can see. Otherwise
you will lose mail and it <br>
will come back to haunt you.</p>

<p style="margin-top: 1em">Speeding Up Multidrop Checking
<br>
Normally, when multiple users are declared fetchmail
extracts recipient addresses as described above and checks
each host part with DNS to see if it&rsquo;s an alias of the
mailserver. <br>
If so, the name mappings described in the &quot;to ...
here&quot; declaration are done and the mail locally
delivered.</p>

<p style="margin-top: 1em">This is a convenient but also
slow method. To speed it up, pre-declare mailserver aliases
with &rsquo;aka&rsquo;; these are checked before DNS lookups
are done. If you&rsquo;re certain your aka <br>
list contains all DNS aliases of the mailserver (and all MX
names pointing at it - note this may change in a future
version) you can declare &rsquo;no dns&rsquo; to suppress
DNS lookups <br>
entirely and only match against the aka list.</p>

<p style="margin-top: 1em">SOCKS <br>
Support for socks4/5 is a compile time configuration option.
Once compiled in, fetchmail will always use the socks
libraries and configuration on your system, there are no
run- <br>
time switches in fetchmail - but you can still configure
SOCKS: you can specify which SOCKS configuration file is
used in the SOCKS_CONF environment variable.</p>

<p style="margin-top: 1em">For instance, if you wanted to
bypass the SOCKS proxy altogether and have fetchmail connect
directly, you could just pass SOCKS_CONF=/dev/null in the
environment, for example <br>
(add your usual command line options - if any - to the end
of this line):</p>

<p style="margin-top: 1em">env SOCKS_CONF=/dev/null
fetchmail</p>

<p style="margin-top: 1em">EXIT CODES <br>
To facilitate the use of fetchmail in shell scripts, an exit
status code is returned to give an indication of what
occurred during a given connection.</p>

<p style="margin-top: 1em">The exit codes returned by
fetchmail are as follows:</p>

<p style="margin-top: 1em">0 One or more messages were
successfully retrieved (or, if the -c option was selected,
were found waiting but not retrieved).</p>

<p style="margin-top: 1em">1 There was no mail awaiting
retrieval. (There may have been old mail still on the server
but not selected for retrieval.) If you do not want &quot;no
mail&quot; to be an error con&acirc; <br>
dition (for instance, for cron jobs), use a POSIX-compliant
shell and add</p>

<p style="margin-top: 1em">|| [ $? -eq 1 ]</p>

<p style="margin-top: 1em">to the end of the fetchmail
command line, note that this leaves 0 untouched, maps 1 to
0, and maps all other codes to 1. See also item #C8 in the
FAQ.</p>

<p style="margin-top: 1em">2 An error was encountered when
attempting to open a socket to retrieve mail. If you
don&rsquo;t know what a socket is, don&rsquo;t worry about
it -- just treat this as an &rsquo;unrecover&acirc; <br>
able error&rsquo;. This error can also be because a protocol
fetchmail wants to use is not listed in /etc/services.</p>

<p style="margin-top: 1em">3 The user authentication step
failed. This usually means that a bad user-id, password, or
APOP id was specified. Or it may mean that you tried to run
fetchmail under cir&acirc; <br>
cumstances where it did not have standard input attached to
a terminal and could not prompt for a missing password.</p>

<p style="margin-top: 1em">4 Some sort of fatal protocol
error was detected.</p>

<p style="margin-top: 1em">5 There was a syntax error in
the arguments to fetchmail, or a pre- or post-connect
command failed.</p>

<p style="margin-top: 1em">6 The run control file had bad
permissions.</p>

<p style="margin-top: 1em">7 There was an error condition
reported by the server. Can also fire if fetchmail timed out
while waiting for the server.</p>

<p style="margin-top: 1em">8 Client-side exclusion error.
This means fetchmail either found another copy of itself
already running, or failed in such a way that it isn&rsquo;t
sure whether another copy is <br>
running.</p>

<p style="margin-top: 1em">9 The user authentication step
failed because the server responded &quot;lock busy&quot;.
Try again after a brief pause! This error is not implemented
for all protocols, nor for all <br>
servers. If not implemented for your server, &quot;3&quot;
will be returned instead, see above. May be returned when
talking to qpopper or other servers that can respond with
<br>
&quot;lock busy&quot; or some similar text containing the
word &quot;lock&quot;.</p>

<p style="margin-top: 1em">10 The fetchmail run failed
while trying to do an SMTP port open or transaction.</p>

<p style="margin-top: 1em">11 Fatal DNS error. Fetchmail
encountered an error while performing a DNS lookup at
startup and could not proceed.</p>

<p style="margin-top: 1em">12 BSMTP batch file could not be
opened.</p>

<p style="margin-top: 1em">13 Poll terminated by a fetch
limit (see the --fetchlimit option).</p>

<p style="margin-top: 1em">14 Server busy indication.</p>

<p style="margin-top: 1em">23 Internal error. You should
see a message on standard error with details.</p>

<p style="margin-top: 1em">24 - 26, 28, 29 <br>
These are internal codes and should not appear
externally.</p>

<p style="margin-top: 1em">When fetchmail queries more than
one host, return status is 0 if any query successfully
retrieved mail. Otherwise the returned error status is that
of the last host queried.</p>

<p style="margin-top: 1em">FILES <br>
~/.fetchmailrc <br>
default run control file</p>

<p style="margin-top: 1em">~/.fetchids <br>
default location of file recording last message UIDs seen
per host.</p>

<p style="margin-top: 1em">~/.fetchmail.pid <br>
lock file to help prevent concurrent runs (non-root
mode).</p>

<p style="margin-top: 1em">~/.netrc <br>
your FTP run control file, which (if present) will be
searched for passwords as a last resort before prompting for
one interactively.</p>

<p style="margin-top: 1em">/var/run/fetchmail.pid <br>
lock file to help prevent concurrent runs (root mode, Linux
systems).</p>

<p style="margin-top: 1em">/etc/fetchmail.pid <br>
lock file to help prevent concurrent runs (root mode,
systems without /var/run).</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
FETCHMAILHOME <br>
If this environment variable is set to a valid and existing
directory name, fetchmail will read
$FETCHMAILHOME/fetchmailrc (the dot is missing in this
case), $FETCHMAIL&acirc; <br>
HOME/.fetchids and $FETCHMAILHOME/.fetchmail.pid rather than
from the user&rsquo;s home directory. The .netrc file is
always looked for in the the invoking user&rsquo;s home
direc&acirc; <br>
tory regardless of FETCHMAILHOME&rsquo;s setting.</p>

<p style="margin-top: 1em">FETCHMAILUSER <br>
If this environment variable is set, it is used as the name
of the calling user (default local name) for purposes such
as mailing error notifications. Otherwise, if <br>
either the LOGNAME or USER variable is correctly set (e.g.
the corresponding UID matches the session user ID) then that
name is used as the default local name. Otherwise <br>
getpwuid(3) must be able to retrieve a password entry for
the session ID (this elaborate logic is designed to handle
the case of multiple names per userid gracefully).</p>


<p style="margin-top: 1em">FETCHMAIL_DISABLE_CBC_IV_COUNTERMEASURE
<br>
(since v6.3.22): If this environment variable is set and not
empty, fetchmail will disable a countermeasure against an
SSL CBC IV attack (by setting <br>
SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS). This is a security
risk, but may be necessary for connecting to certain
non-standards-conforming servers. See fetchmail&rsquo;s NEWS
file <br>
and fetchmail-SA-2012-01.txt for details. Earlier fetchmail
versions (v6.3.21 and older) used to disable this
countermeasure, but v6.3.22 no longer does that as a safety
<br>
precaution.</p>


<p style="margin-top: 1em">FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS
<br>
(since v6.3.17): If this environment variable is set and not
empty, fetchmail will always load the default X.509 trusted
certificate locations for SSL/TLS CA certificates, <br>
even if --sslcertfile and --sslcertpath are given. The
latter locations take precedence over the system default
locations. This is useful in case there are broken
cer&acirc; <br>
tificates in the system directories and the user has no
administrator privileges to remedy the problem.</p>

<p style="margin-top: 1em">HOME_ETC <br>
If the HOME_ETC variable is set, fetchmail will read
$HOME_ETC/.fetchmailrc instead of ~/.fetchmailrc.</p>

<p style="margin-top: 1em">If HOME_ETC and FETCHMAILHOME
are both set, HOME_ETC will be ignored.</p>

<p style="margin-top: 1em">SOCKS_CONF <br>
(only if SOCKS support is compiled in) this variable is used
by the socks library to find out which configuration file it
should read. Set this to /dev/null to bypass the <br>
SOCKS proxy.</p>

<p style="margin-top: 1em">SIGNALS <br>
If a fetchmail daemon is running as root, SIGUSR1 wakes it
up from its sleep phase and forces a poll of all non-skipped
servers. For compatibility reasons, SIGHUP can also be <br>
used in 6.3.X but may not be available in future fetchmail
versions.</p>

<p style="margin-top: 1em">If fetchmail is running in
daemon mode as non-root, use SIGUSR1 to wake it (this is so
SIGHUP due to logout can retain the default action of
killing it).</p>

<p style="margin-top: 1em">Running fetchmail in foreground
while a background fetchmail is running will do whichever of
these is appropriate to wake it up.</p>

<p style="margin-top: 1em">BUGS, LIMITATIONS, AND KNOWN
PROBLEMS <br>
Please check the NEWS file that shipped with fetchmail for
more known bugs than those listed here.</p>

<p style="margin-top: 1em">Fetchmail cannot handle user
names that contain blanks after a &quot;@&quot; character,
for instance &quot;demonstr@ti on&quot;. These are rather
uncommon and only hurt when using UID-based --keep <br>
setups, so the 6.3.X versions of fetchmail won&rsquo;t be
fixed.</p>

<p style="margin-top: 1em">Fetchmail cannot handle
configurations where you have multiple accounts that use the
same server name and the same login. Any user@server
combination must be unique.</p>

<p style="margin-top: 1em">The assumptions that the DNS and
in particular the checkalias options make are not often
sustainable. For instance, it has become uncommon for an MX
server to be a POP3 or IMAP <br>
server at the same time. Therefore the MX lookups may go
away in a future release.</p>

<p style="margin-top: 1em">The mda and plugin options
interact badly. In order to collect error status from the
MDA, fetchmail has to change its normal signal handling so
that dead plugin processes don&rsquo;t <br>
get reaped until the end of the poll cycle. This can cause
resource starvation if too many zombies accumulate. So
either don&rsquo;t deliver to a MDA using plugins or risk
being <br>
overrun by an army of undead.</p>

<p style="margin-top: 1em">The --interface option does not
support IPv6 and it is doubtful if it ever will, since there
is no portable way to query interface IPv6 addresses.</p>

<p style="margin-top: 1em">The RFC822 address parser used
in multidrop mode chokes on some @-addresses that are
technically legal but bizarre. Strange uses of quoting and
embedded comments are likely to <br>
confuse it.</p>

<p style="margin-top: 1em">In a message with multiple
envelope headers, only the last one processed will be
visible to fetchmail.</p>

<p style="margin-top: 1em">Use of some of these protocols
requires that the program send unencrypted passwords over
the TCP/IP connection to the mailserver. This creates a risk
that name/password pairs <br>
might be snaffled with a packet sniffer or more
sophisticated monitoring software. Under Linux and FreeBSD,
the --interface option can be used to restrict polling to
availabil&acirc; <br>
ity of a specific interface device with a specific local or
remote IP address, but snooping is still possible if (a)
either host has a network device that can be opened in
pro&acirc; <br>
miscuous mode, or (b) the intervening network link can be
tapped. We recommend the use of ssh(1) tunnelling to not
only shroud your passwords but encrypt the entire
conversa&acirc; <br>
tion.</p>

<p style="margin-top: 1em">Use of the %F or %T escapes in
an mda option could open a security hole, because they pass
text manipulable by an attacker to a shell command.
Potential shell characters are <br>
replaced by &rsquo;_&rsquo; before execution. The hole is
further reduced by the fact that fetchmail temporarily
discards any suid privileges it may have while running the
MDA. For maximum <br>
safety, however, don&rsquo;t use an mda command containing
%F or %T when fetchmail is run from the root account
itself.</p>

<p style="margin-top: 1em">Fetchmail&rsquo;s method of
sending bounces due to errors or spam-blocking and spam
bounces requires that port 25 of localhost be available for
sending mail via SMTP.</p>

<p style="margin-top: 1em">If you modify ~/.fetchmailrc
while a background instance is running and break the syntax,
the background instance will die silently. Unfortunately, it
can&rsquo;t die noisily because <br>
we don&rsquo;t yet know whether syslog should be enabled. On
some systems, fetchmail dies quietly even if there is no
syntax error; this seems to have something to do with buggy
ter&acirc; <br>
minal ioctl code in the kernel.</p>

<p style="margin-top: 1em">The -f - option (reading a
configuration from stdin) is incompatible with the plugin
option.</p>

<p style="margin-top: 1em">The &rsquo;principal&rsquo;
option only handles Kerberos IV, not V.</p>

<p style="margin-top: 1em">Interactively entered passwords
are truncated after 63 characters. If you really need to use
a longer password, you will have to use a configuration
file.</p>

<p style="margin-top: 1em">A backslash as the last
character of a configuration file will be flagged as a
syntax error rather than ignored.</p>

<p style="margin-top: 1em">The BSMTP error handling is
virtually nonexistent and may leave broken messages
behind.</p>

<p style="margin-top: 1em">Send comments, bug reports,
gripes, and the like to the fetchmail-devel list
&acirc;&uml;fetchmail-devel@lists.berlios.de&acirc;&copy;</p>

<p style="margin-top: 1em">An HTML FAQ
&acirc;&uml;http://fetchmail.berlios.de/fetchmail-FAQ.html&acirc;&copy;
is available at the fetchmail home page, it should also
accompany your installation.</p>

<p style="margin-top: 1em">AUTHOR <br>
Fetchmail is currently maintained by Matthias Andree and Rob
Funk with major assistance from Sunil Shetye (for code) and
Rob MacGregor (for the mailing lists).</p>

<p style="margin-top: 1em">Most of the code is from Eric S.
Raymond &acirc;&uml;esr@snark.thyrsus.com&acirc;&copy; . Too
many other people to name here have contributed code and
patches.</p>

<p style="margin-top: 1em">This program is descended from
and replaces popclient, by Carl Harris
&acirc;&uml;ceharris@mal.com&acirc;&copy; ; the internals
have become quite different, but some of its interface
design is directly <br>
traceable to that ancestral program.</p>

<p style="margin-top: 1em">This manual page has been
improved by Matthias Andree, R. Hannes Beinert, and
H&Atilde;&copy;ctor Garc&Atilde;a.</p>

<p style="margin-top: 1em">SEE ALSO <br>
README, README.SSL, README.SSL-SERVER, The Fetchmail FAQ
&acirc;&uml;http://www.fetchmail.info/fetchmail-FAQ.html&acirc;&copy;,
mutt(1), elm(1), mail(1), sendmail(8), popd(8), imapd(8),
netrc(5).</p>

<p style="margin-top: 1em">The fetchmail home page.
&acirc;&uml;http://fetchmail.berlios.de/&acirc;&copy;</p>

<p style="margin-top: 1em">The maildrop home page.
&acirc;&uml;http://www.courier-mta.org/maildrop/&acirc;&copy;</p>

<p style="margin-top: 1em">APPLICABLE STANDARDS <br>
Note that this list is just a collection of references and
not a statement as to the actual protocol conformance or
requirements in fetchmail.</p>

<p style="margin-top: 1em">SMTP/ESMTP: <br>
RFC 821, RFC 2821, RFC 1869, RFC 1652, RFC 1870, RFC 1983,
RFC 1985, RFC 2554.</p>

<p style="margin-top: 1em">mail: <br>
RFC 822, RFC 2822, RFC 1123, RFC 1892, RFC 1894.</p>

<p style="margin-top: 1em">POP2: <br>
RFC 937</p>

<p style="margin-top: 1em">POP3: <br>
RFC 1081, RFC 1225, RFC 1460, RFC 1725, RFC 1734, RFC 1939,
RFC 1957, RFC 2195, RFC 2449.</p>

<p style="margin-top: 1em">APOP: <br>
RFC 1939.</p>

<p style="margin-top: 1em">RPOP: <br>
RFC 1081, RFC 1225.</p>

<p style="margin-top: 1em">IMAP2/IMAP2BIS: <br>
RFC 1176, RFC 1732.</p>

<p style="margin-top: 1em">IMAP4/IMAP4rev1: <br>
RFC 1730, RFC 1731, RFC 1732, RFC 2060, RFC 2061, RFC 2195,
RFC 2177, RFC 2683.</p>

<p style="margin-top: 1em">ETRN: <br>
RFC 1985.</p>

<p style="margin-top: 1em">ODMR/ATRN: <br>
RFC 2645.</p>

<p style="margin-top: 1em">OTP: RFC 1938.</p>

<p style="margin-top: 1em">LMTP: <br>
RFC 2033.</p>

<p style="margin-top: 1em">GSSAPI: <br>
RFC 1508, RFC 1734, Generic Security Service Application
Program Interface (GSSAPI)/Kerberos/Simple Authentication
and Security Layer (SASL) Service Names &acirc;&uml;http://
<br>

www.iana.org/assignments/gssapi-service-names/&acirc;&copy;.</p>

<p style="margin-top: 1em">TLS: RFC 2595.</p>

<p style="margin-top: 1em">fetchmail fetchmail 6.3.24
fetchmail(1)</p>
<hr>
</body>
</html>
