<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PMDALIBVIRT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PMDALIBVIRT(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">PMDALIBVIRT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>pmdalibvirt</b> - libvirt PMDA
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>pmdalibvirt</b> is a Performance Metrics Domain Agent (PMDA) which extracts
  live performance data from libvirt hypervisor and domains (VMs).
<div class="Pp"></div>
See the libvirt documentation for detailed description of each metric.
<h1 class="Sh" title="Sh" id="INSTALLATION"><a class="selflink" href="#INSTALLATION">INSTALLATION</a></h1>
<b>pmdalibvirt</b> reads an optional ini-style configuration file
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>$PCP_PMDAS_DIR/libvirt/libvirt.conf</i></dd>
</dl>
<div class="Pp"></div>
This file can contain in its <b>[pmda]</b> section overriding values for the
  following PMDA options:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">user</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">uri</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">backing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">oldapi</dd>
</dl>
<div class="Pp"></div>
By default, <b>root</b>, <b>qemu:///system</b>, <b>False</b> and <b>False</b>
  are used as values, respectively.
<div class="Pp"></div>
The backing setting can be used to expand block device information to cover
  backing chains with recent libvirt versions.
<div class="Pp"></div>
The old API setting can be used in environments where recent libvirt API
  additions are not available (e.g., RHEL 6 / libvirt-0.10.2) to provide some of
  the metrics available with the newer API. Regardless of the API version, no
  guest agent is needed for the metrics.
<div class="Pp"></div>
Note that using non-root user typically requires also libvirt side
  configuration; please refer to libvirt documentation for further details on
  this.
<div class="Pp"></div>
Once the needed setup is ready, you can test the connection and install the PMDA
  to enable access to the names and values for the libvirt performance metrics.
  To install, do the following as root:
<div class="Pp"></div>
<br/>
 # cd $PCP_PMDAS_DIR/libvirt
<div>&#x00A0;</div>
<br/>
 # ./connect
<div>&#x00A0;</div>
<br/>
 # ./Install
<div class="Pp"></div>
To uninstall, do the following as root:
<div class="Pp"></div>
<br/>
 # cd $PCP_PMDAS_DIR/libvirt
<div>&#x00A0;</div>
<br/>
 # ./Remove
<div class="Pp"></div>
<b>pmdalibvirt</b> is launched by <i>pmcd</i>(1) and should never be executed
  directly. The Install and Remove scripts notify <i>pmcd</i>(1) when the agent
  is installed or removed.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$PCP_PMDAS_DIR/libvirt/libvirt.conf</b></dt>
  <dd class="It-tag">configuration file for the <b>pmdalibvirt</b> agent</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$PCP_PMDAS_DIR/libvirt/connect</b></dt>
  <dd class="It-tag">connection test helper using the <b>pmdalibvirt</b> agent
      configuration</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$PCP_PMDAS_DIR/libvirt/Install</b></dt>
  <dd class="It-tag">installation script for the <b>pmdalibvirt</b> agent</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$PCP_PMDAS_DIR/libvirt/Remove</b></dt>
  <dd class="It-tag">undo installation script for the <b>pmdalibvirt</b>
    agent</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$PCP_LOG_DIR/pmcd/libvirt.log</b></dt>
  <dd class="It-tag">default log file for messages from the <b>pmdalibvirt</b>
      agent</dd>
</dl>
<h1 class="Sh" title="Sh" id="PCP_ENVIRONMENT"><a class="selflink" href="#PCP_ENVIRONMENT">PCP
  ENVIRONMENT</a></h1>
Environment variables with the prefix <b>PCP_</b> are used to parameterize the
  file and directory names used by <b>PCP</b>. On each installation, the file
  <b>/etc/pcp.conf</b> contains the local values for these variables. The
  <b>$PCP_CONF</b> variable may be used to specify an alternative configuration
  file, as described in <i>pcp.conf</i>(5).
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>PCPIntro</b>(1), <b>pmcd</b>(1), <b>virsh</b>(1) and
  <b>libvirtd</b>(8).</div>
<table class="foot">
  <tr>
    <td class="foot-date">PCP</td>
    <td class="foot-os">Performance Co-Pilot</td>
  </tr>
</table>
</body>
</html>
