<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>r.slope.aspect(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">r.slope.aspect(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">r.slope.aspect(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>r.slope.aspect</b> - Generates raster maps of slope, aspect,
  curvatures and partial derivatives from an elevation raster map.
<div>&#x00A0;</div>
Aspect is calculated counterclockwise from east.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
raster, terrain, aspect, slope, curvature
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>r.slope.aspect</b>
<div>&#x00A0;</div>
<b>r.slope.aspect --help</b>
<div>&#x00A0;</div>
<b>r.slope.aspect</b> [-<b>a</b>] <b>elevation</b>=<i>name</i>
  [<b>slope</b>=<i>name</i>] [ <b>aspect</b>=<i>name</i>]
  [<b>format</b>=<i>string</i>] [ <b>precision</b>=<i>string</i>]
  [<b>pcurvature</b>= <i>name</i>] [<b>tcurvature</b>=<i>name</i>]
  [<b>dx</b>=<i>name</i>] [<b>dy</b>=<i>name</i>] [<b>dxx</b>=<i>name</i>]
  [<b>dyy</b>= <i>name</i>] [<b>dxy</b>=<i>name</i>]
  [<b>zscale</b>=<i>float</i>] [ <b>min_slope</b>=<i>float</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Do not align the current region to the raster elevation map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>elevation</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input elevation raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>slope</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output slope raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>aspect</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output aspect raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>format</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Format for reporting the slope
    <div>&#x00A0;</div>
    Options: <i>degrees, percent</i>
    <div>&#x00A0;</div>
    Default: <i>degrees</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>precision</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Type of output aspect and slope maps
    <div>&#x00A0;</div>
    Options: <i>CELL, FCELL, DCELL</i>
    <div>&#x00A0;</div>
    Default: <i>FCELL</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pcurvature</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output profile curvature raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tcurvature</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output tangential curvature raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dx</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output first order partial derivative dx (E-W slope) raster
    map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dy</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output first order partial derivative dy (N-S slope) raster
    map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dxx</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output second order partial derivative dxx raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dyy</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output second order partial derivative dyy raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dxy</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output second order partial derivative dxy raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zscale</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Multiplicative factor to convert elevation units to horizontal units
    <div>&#x00A0;</div>
    Default: <i>1.0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>min_slope</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Minimum slope value (in percent) for which aspect is computed
    <div>&#x00A0;</div>
    Default: <i>0.0</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>r.slope.aspect</i> generates raster maps of slope, aspect, curvatures and
  first and second order partial derivatives from a raster map of true elevation
  values. The user must specify the input <b>elevation</b> raster map and at
  least one output raster maps. The user can also specify the <b>format</b> for
  slope (degrees, percent; default=degrees), and the <b>zscale</b>:
  multiplicative factor to convert elevation units to horizontal units; (default
  1.0).
<div class="Pp"></div>
The <b>elevation</b> input raster map specified by the user must contain true
  elevation values, <i>not</i> rescaled or categorized data. If the elevation
  values are in other units than in the horizontal units, they must be converted
  to horizontal units using the parameter <b>zscale</b>. <i>In GRASS GIS 7,
  vertical units are not assumed to be meters any more.</i> <i>For example, if
  both your vertical and horizontal units are feet,</i> <i>parameter
  </i><b>zscale</b> must not be used.
<div class="Pp"></div>
The <b>aspect</b> output raster map indicates the direction that slopes are
  facing. The aspect categories represent the number degrees of east. Category
  and color table files are also generated for the aspect raster map. The aspect
  categories represent the number degrees of east and they increase
  counterclockwise: 90 degrees is North, 180 is West, 270 is South 360 is East.
<div>&#x00A0;</div>
Note: These values can be transformed to azimuth (0 is North, 90 is East, etc)
  values using r.mapcalc:
<div>&#x00A0;</div>
<pre>
# convert angles from CCW to north up
r.mapcalc &quot;azimuth_aspect = (450 - ccw_aspect) % 360&quot;
</pre>
<div class="Pp"></div>
The aspect is not defined for slope equal to zero. Thus, most cells with a very
  small slope end up having category 0, 45, ..., 360 in <b>aspect</b> output. It
  is possible to reduce the bias in these directions by filtering out the aspect
  in areas where the terrain is almost flat. A option <b>min_slope</b> can be
  used to specify the minimum slope for which aspect is computed. The aspect for
  all cells with slope &lt; <b>min_slope</b> is set to <i>null</i> (no-data).
<div class="Pp"></div>
The <b>slope</b> output raster map contains slope values, stated in degrees of
  inclination from the horizontal if <b>format</b>=degrees option (the default)
  is chosen, and in percent rise if <b>format</b>=percent option is chosen.
  Category and color table files are generated.
<div class="Pp"></div>
Profile and tangential curvatures are the curvatures in the direction of
  steepest slope and in the direction of the contour tangent respectively. The
  curvatures are expressed as 1/metres, e.g. a curvature of 0.05 corresponds to
  a radius of curvature of 20m. Convex form values are positive and concave form
  values are negative.
<table class="tbl">
  <colgroup>
    <col style="width: 60.00ex;"/>
    <col style="width: 1.00ex;"/>
    <col style="width: 60.00ex;"/>
    <col style="width: 1.00ex;"/>
    <col style="width: 60.00ex;"/>
  </colgroup>
  <tr>
    <td>Example DEM</td>
    <td> </td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Slope (degree) from example DEM</td>
    <td> </td>
    <td>Aspect (degree) from example DEM</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Tangential curvature (m-1) from example DEM</td>
    <td> </td>
    <td>Profile curvature (m-1) from example DEM</td>
    <td> </td>
    <td></td>
  </tr>
</table>
<div class="Pp"></div>
For some applications, the user will wish to use a reclassified raster map of
  slope that groups slope values into ranges of slope. This can be done using
  <i>r.reclass</i>. An example of a useful reclassification is given below:
<div>&#x00A0;</div>
<pre>
          category      range   category labels
                     (in degrees)    (in percent)
             1         0-  1             0-  2%
             2         2-  3             3-  5%
             3         4-  5             6- 10%
             4         6-  8            11- 15%
             5         9- 11            16- 20%
             6        12- 14            21- 25%
             7        15- 90            26% and higher
     The following color table works well with the above
     reclassification.
          category   red   green   blue
             0       179    179     179
             1         0    102       0
             2         0    153       0
             3       128    153       0
             4       204    179       0
             5       128     51      51
             6       255      0       0
             7         0      0       0
</pre>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
To ensure that the raster elevation map is not inappropriately resampled, the
  settings for the current region are modified slightly (for the execution of
  the program only): the resolution is set to match the resolution of the
  elevation raster map and the edges of the region (i.e. the north, south, east
  and west) are shifted, if necessary, to line up along edges of the nearest
  cells in the elevation map. If the user really wants the raster elevation map
  resampled to the current region resolution, the <b>-a</b> flag should be
  specified.
<div class="Pp"></div>
The current mask is ignored.
<div class="Pp"></div>
The algorithm used to determine slope and aspect uses a 3x3 neighborhood around
  each cell in the raster elevation map. Thus, it is not possible to determine
  slope and aspect for the cells adjacent to the edges in the elevation map
  layer. These cells are assigned a &quot;zero slope&quot; value (category 0) in
  both the slope and aspect raster maps.
<div class="Pp"></div>
Horn&#x2019;s formula is used to find the first order derivatives in x and y
  directions.
<div class="Pp"></div>
Only when using integer elevation models, the aspect is biased in 0, 45, 90,
  180, 225, 270, 315, and 360 directions; i.e., the distribution of aspect
  categories is very uneven, with peaks at 0, 45,..., 360 categories. When
  working with floating point elevation models, no such aspect bias occurs.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Calculation_of_slope,_aspect,_profile_and_tangential_curvature"><a class="selflink" href="#Calculation_of_slope,_aspect,_profile_and_tangential_curvature">Calculation
  of slope, aspect, profile and tangential curvature</a></h2>
In this example a slope, aspect, profile and tangential curvature map are
  computed from an elevation raster map (North Carolina sample dataset):
<div>&#x00A0;</div>
<pre>
g.region raster=elevation
r.slope.aspect elevation=elevation slope=slope aspect=aspect pcurvature=pcurv tcurvature=tcurv
# set nice color tables for output raster maps
r.colors -n map=slope color=sepia
r.colors map=aspect color=aspectcolr
r.colors map=pcurv color=curvature
r.colors map=tcurv color=curvature
</pre>
<div class="Pp"></div>
Figure: Slope, aspect, profile and tangential curvature raster map (North
  Carolina dataset)
<h2 class="Ss" title="Ss" id="Classification_of_major_aspect_directions_in_compass_orientation"><a class="selflink" href="#Classification_of_major_aspect_directions_in_compass_orientation">Classification
  of major aspect directions in compass orientation</a></h2>
In the following example (based on the North Carolina sample dataset) we first
  generate the standard aspect map (oriented CCW from East), then convert it to
  compass orientation, and finally classify four major aspect directions (N, E,
  S, W):
<div>&#x00A0;</div>
<pre>
g.region raster=elevation -p
# generate aspect map with CCW orientation
r.slope.aspect elevation=elevation aspect=myaspect
# generate compass orientation and classify four major directions (N, E, S, W)
r.mapcalc &quot;aspect_4_directions = eval( \\
   compass=(450 - myaspect ) % 360, \\
     if(compass &gt;=0. &amp;&amp; compass &lt; 45., 1)  \\
   + if(compass &gt;=45. &amp;&amp; compass &lt; 135., 2) \\
   + if(compass &gt;=135. &amp;&amp; compass &lt; 225., 3) \\
   + if(compass &gt;=225. &amp;&amp; compass &lt; 315., 4) \\
   + if(compass &gt;=315., 1) \\
)&quot;
# assign text labels
r.category aspect_4_directions separator=comma rules=- &lt;&lt; EOF
1,north
2,east
3,south
4,west
EOF
# assign color table
r.colors aspect_4_directions rules=- &lt;&lt; EOF
1 253,184,99
2 178,171,210
3 230,97,1
4 94,60,153
EOF
</pre>
<div>&#x00A0;</div>
Aspect map classified to four major compass directions (zoomed subset shown)
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Horn, B. K. P. (1981). <i>Hill Shading and the Reflectance
      Map</i>, Proceedings of the IEEE, 69(1):14-47.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Mitasova, H. (1985). <i>Cartographic aspects of computer
      surface modeling. PhD thesis.</i> Slovak Technical University ,
    Bratislava</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Hofierka, J., Mitasova, H., Neteler, M., 2009.
      <i>Geomorphometry in GRASS GIS.</i> In: Hengl, T. and Reuter, H.I. (Eds),
      <i>Geomorphometry: Concepts, Software, Applications. </i> Developments in
      Soil Science, vol. 33, Elsevier, 387-410 pp,
    http://www.geomorphometry.org</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>r.mapcalc,</i> <i>r.neighbors,</i> <i>r.reclass,</i> <i>r.rescale</i>
  <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Michael Shapiro, U.S.Army Construction Engineering Research Laboratory
<div>&#x00A0;</div>
Olga Waupotitsch, U.S.Army Construction Engineering Research Laboratory
<div class="Pp"></div>
<i>Last changed: $Date: 2015-08-12 11:45:29 +0200 (Wed, 12 Aug 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: r.slope.aspect source code (history)
<div class="Pp"></div>
Main index | Raster index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
