<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OPCONTROL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OPCONTROL(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">OPCONTROL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opcontrol - control OProfile profiling
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>opcontrol</b> [ <i>options</i> ]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>opcontrol</b> can be used to start profiling, end a profiling session, dump
  profile data, and set up the profiling parameters.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help / -?</b></dt>
  <dd class="It-tag">Show help message.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version / -v</b></dt>
  <dd class="It-tag">Show version.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-events / -l</b></dt>
  <dd class="It-tag">Shows the monitorable events.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--init</b></dt>
  <dd class="It-tag">Load the OProfile module if required and make the OProfile
      driver interface available.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--setup</b></dt>
  <dd class="It-tag">Followed by list options for profiling setup. Store setup
      in ~root/.oprofile/daemonrc. Optional.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--status</b></dt>
  <dd class="It-tag">Show configuration information.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--start-daemon</b></dt>
  <dd class="It-tag">Start the oprofile daemon without starting profiling.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--start / -s</b></dt>
  <dd class="It-tag">Start data collection with either arguments provided by
      --setup or with information saved in ~root/.oprofile/daemonrc.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dump / -d</b></dt>
  <dd class="It-tag">Force a flush of the collected profiling data to the
      daemon.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--stop / -t</b></dt>
  <dd class="It-tag">Stop data collection.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--shutdown / -h</b></dt>
  <dd class="It-tag">Stop data collection and kill the daemon.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--reset</b></dt>
  <dd class="It-tag">Clear out data from current session, but leaves saved
      sessions.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--save=</b><i>sessionname</i></dt>
  <dd class="It-tag">Save data from current session to sessionname.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--deinit</b></dt>
  <dd class="It-tag">Shut down daemon. Unload the oprofile module and
      oprofilefs.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--session-dir=</b><i>dir_path</i></dt>
  <dd class="It-tag">Use sample database out of directory dir_path instead of
      the default location (/var/lib/oprofile).
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--buffer-size=</b><i>num</i></dt>
  <dd class="It-tag">Set kernel buffer to num samples. The buffer watershed
      needs to be tweaked when changing this value. Rules: A non-zero value goes
      into effect after a '--shutdown/start' sequence. A value of zero sets this
      parameter back to default value, but does not go into effect until after
      '--deinit/init' sequence.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--buffer-watershed=</b><i>num</i></dt>
  <dd class="It-tag">Set kernel buffer watershed to num samples. When
      buffer-size - buffer-watershed free entries remain in the kernel buffer,
      data will be flushed to the daemon. Most useful values are in the range
      [0.25 - 0.5] * buffer-size. Same rules as defined for buffer-size.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cpu-buffer-size=</b><i>num</i></dt>
  <dd class="It-tag">Set kernel per-cpu buffer to num samples. If you profile at
      high rate it can help to increase this if the log file show excessive
      count of sample lost cpu buffer overflow. Same rules as defined for
      buffer-size.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--event / -e </b><i>[event|&quot;default&quot;]</i></dt>
  <dd class="It-tag">Specify an event to measure for the hardware performance
      counters, or &quot;default&quot; for the default event. The event is of
      the form &quot;CPU_CLK_UNHALTED:30000:0:1:1&quot; where the numeric values
      are count, unit mask, kernel-space counting, user-space counting,
      respectively. Note that this over-rides all previous events selected; if
      you want to profile with two or more events simultaneously, you must
      specify them on the same opcontrol invocation. You can specify unit mask
      values using either a numerical value (hex values <i>must</i> begin with
      &quot;0x&quot;) or a symbolic name (if the <i>name=&lt;um_name&gt;</i>
      field is shown in the <b>ophelp</b> output). For some named unit masks,
      the hex value is not unique; thus, OProfile tools enforce specifying such
      unit masks value by name.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--separate / -p
    </b><i>[none,lib,kernel,thread,cpu,all]</i></dt>
  <dd class="It-tag">Separate samples based on the given separator. 'lib'
      separates dynamically linked library samples per application. 'kernel'
      separates kernel and kernel module samples per application; 'kernel'
      implies 'library'. 'thread' gives separation for each thread and task.
      'cpu' separates for each CPU. 'all' implies all of the above options and
      'none' turns off separation.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--callgraph / -c </b><i>[#depth]</i></dt>
  <dd class="It-tag">Enable callgraph sample collection with a maximum depth.
      Use 0 to disable callgraph profiling. This option is available on x86
      using a 2.6+ kernel with callgraph support enabled. It is also available
      on PowerPC using a 2.6.17+ kernel.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--image / -i
    </b><i>[name,name...|&quot;all&quot;]</i></dt>
  <dd class="It-tag">Only profile the given absolute paths to binaries, or
      &quot;all&quot; to profile everything (the default).
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--vmlinux=</b><i>file</i></dt>
  <dd class="It-tag">vmlinux kernel image.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-vmlinux</b></dt>
  <dd class="It-tag">Use this when you don't have a kernel vmlinux file, and you
      don't want to profile the kernel.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose / -V </b><i>[options]</i></dt>
  <dd class="It-tag">Be verbose in the daemon log. This has a high overhead.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--kernel-range=</b><i>start,end</i></dt>
  <dd class="It-tag">Set kernel range vma address in hexadecimal.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS_(specific_to_Xen)"><a class="selflink" href="#OPTIONS_(specific_to_Xen)">OPTIONS
  (specific to Xen)</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--xen=</b><i>file</i></dt>
  <dd class="It-tag">Xen image
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--active-domains=</b><i>&lt;list&gt;</i></dt>
  <dd class="It-tag">List of domain ids participating in a multi-domain
      profiling session. Each of the specified domains must run an instance of
      oprofile. The sequence of opcontrol commands in each domain must follow a
      given order which is specified in the oprofile user manual. If more than
      one domain is specified in &lt;list&gt; they should be separated using
      commas. This option can only be used in domain 0 which is the only domain
      that can coordinate a multi-domain profiling session. Including domain 0
      in the list of active domains is optional. (e.g. --active-domains=2,5,6
      and --active-domains=0,2,5,6 are equivalent). This option can only be
      specified if --start-daemon is also specified and it is only valid for the
      current run of the oprofile daemon; e.g. the list of active domains is not
      persistent.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--passive-domains=</b><i>&lt;list&gt;</i><b>or</b><i>--domains=</i><b>&lt;list&gt;</b></dt>
  <dd class="It-tag">List of domain ids to be profiled, separated by commas. As
      opposed to the --active-domains option, the domains specified with this
      option do not need to run oprofile. This makes profiling multiple domains
      easier. However, with the passive-domains option, samples in user level
      processes and kernel modules cannot be mapped to specific symbols and are
      aggregated under a generic class. Both --active-domains and
      --passive-domains options can be specified in the same command, but the
      same domain cannot be specified in both options. This option can only be
      specified if either --start or --start-daemon is specified on the same
      command and it is only valid for the current run of the oprofile daemon;
      e.g. the list of passive domains is not persistent.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--passive-images=</b><i>&lt;list&gt;</i><b>or</b><i>--domains-images=</i><b>&lt;list&gt;</b></dt>
  <dd class="It-tag">List of kernel images associated with the domains specified
      in the --passive-domains option, also separated by commas. The association
      between the images and domains is based on the order they are specified in
      both options.
    <div>&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS_(specific_to_System_z)"><a class="selflink" href="#OPTIONS_(specific_to_System_z)">OPTIONS
  (specific to System z)</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--s390hwsampbufsize=</b><i>num</i></dt>
  <dd class="It-tag">Number of 2MB areas used per CPU for storing sample data.
      The best size for the sample memory depends on the particular system and
      the workload to be measured. Providing the sampler with too little memory
      results in lost samples. Reserving too much system memory for the sampler
      impacts the overall performance and, hence, also the workload to be
      measured.
    <div>&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
No special environment variables are recognised by opcontrol.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/root/.oprofile/daemonrc</i></dt>
  <dd class="It-tag">Configuration file for opcontrol</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/var/lib/oprofile/samples/</i></dt>
  <dd class="It-tag">The location of the generated sample files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">This man page is current for oprofile-0.9.9.</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>/usr/share/doc/oprofile/,</b> <b>oprofile(1)</b></div>
<table class="foot">
  <tr>
    <td class="foot-date">Tue 06 December 2016</td>
    <td class="foot-os">4th Berkeley Distribution</td>
  </tr>
</table>
</body>
</html>
