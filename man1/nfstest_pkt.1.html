<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:27:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>NFSTEST_PKT(1) nfstest_pkt 1.0 NFSTEST_PKT(1)</p>

<p style="margin-top: 1em">NAME <br>
nfstest_pkt - Packet trace decoder</p>

<p style="margin-top: 1em">SYNOPSIS <br>
nfstest_pkt [options] &lt;trace1.cap&gt; [&lt;trace2.cap&gt;
...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Decode and display all packets in the packet trace file(s)
given. The match option gives the ability to search for
specific packets within the packet trace file. Other options
<br>
allow displaying of their corresponding call or reply when
only one or the other is matched. Only a range of packets
can be displayed if the start and/or end options are
used.</p>

<p style="margin-top: 1em">There are three levels of
verbosity in which they are specified using a bitmap, where
the most significant bit gives a more verbose output.
Verbose level 1 is used as a default <br>
where each packet is displayed condensed to one line using
the last layer of the packet as the main output. By default
only the NFS packets (NFS, MOUNT, NLM, etc.) are dis&acirc;
<br>
played.</p>

<p style="margin-top: 1em">The packet trace files are
processed either serially or in parallel. The packets are
displayed using their timestamps so they are always
displayed in the correct order even if <br>
the files given are out of order. If the packet traces were
captured one after the other the packets are displayed
serially, first the packets of the first file according to
<br>
their timestamps, then the second and so forth. If the
packet traces were captured at the same time on multiple
clients the packets are displayed in parallel, packets are
inter&acirc; <br>
leaved from all the files when displayed again according to
their timestamps.</p>

<p style="margin-top: 1em">Note: When using the --call
option, a packet call can be displayed out of order if the
call is not matched explicitly but its reply is matched so
its corresponding call is dis&acirc; <br>
played right before the reply.</p>

<p style="margin-top: 1em">OPTIONS <br>
--version <br>
show program&rsquo;s version number and exit</p>

<p style="margin-top: 1em">-h, --help <br>
show this help message and exit</p>

<p style="margin-top: 1em">-v VERBOSE, --verbose=VERBOSE
<br>
Verbose level bitmask [default: 1]. bitmap 0x01: one line
per packet. bitmap 0x02: one line per layer. bitmap 0x04:
real verbose.</p>

<p style="margin-top: 1em">-l LAYERS, --layers=LAYERS <br>
Layers to display [default:
&rsquo;nfs,nlm,mount,portmap&rsquo;]. Valid layers:
ethernet, ip, tcp, udp, rpc, nfs, nlm, mount, portmap</p>

<p style="margin-top: 1em">-s START, --start=START <br>
Start index [default: 0]</p>

<p style="margin-top: 1em">-e END, --end=END <br>
End index [default: 0]</p>

<p style="margin-top: 1em">-m MATCH, --match=MATCH <br>
Match string [default: True]</p>

<p style="margin-top: 1em">-c, --call <br>
If matching a reply packet, include its coresponding call in
the output</p>

<p style="margin-top: 1em">-r, --reply <br>
If matching a call packet, include its coresponding reply in
the output</p>

<p style="margin-top: 1em">-d DISPLAY, --display=DISPLAY
<br>
Print specific packet or part of a packet [default: pkt]</p>

<p style="margin-top: 1em">-z TZ, --tz=TZ <br>
Time zone to use to display timestamps</p>

<p style="margin-top: 1em">RPC display: <br>
--rpc-type=RPC_TYPE <br>
Display RPC type [default: True]</p>

<p style="margin-top: 1em">--rpc-load=RPC_LOAD <br>
Display RPC load type (NFS, NLM, etc.) [default: True]</p>

<p style="margin-top: 1em">--rpc-ver=RPC_VER <br>
Display RPC load version [default: True]</p>

<p style="margin-top: 1em">--rpc-xid=RPC_XID <br>
Display RPC xid [default: True]</p>

<p style="margin-top: 1em">Packet display: <br>
--nfs-mainop=NFS_MAINOP <br>
Display NFSv4 main operation only [default: False]</p>

<p style="margin-top: 1em">--load-body=LOAD_BODY <br>
Display RPC payload body [default: True]</p>

<p style="margin-top: 1em">--crc16=CRC16 <br>
Display CRC16 encoded strings [default: True]</p>

<p style="margin-top: 1em">--crc32=CRC32 <br>
Display CRC32 encoded strings [default: True]</p>

<p style="margin-top: 1em">--strsize=STRSIZE <br>
Truncate all strings to this size [default: 0]</p>

<p style="margin-top: 1em">Debug: <br>
--enum-check=ENUM_CHECK <br>
If set to True, enums are strictly enforced [default:
True]</p>

<p style="margin-top: 1em">--debug-level=DEBUG_LEVEL <br>
Set debug level messages</p>

<p style="margin-top: 1em">EXAMPLES <br>
# Display all NFS packets (one line per packet) <br>
# Display only the NFS packets by default. <br>
# Default for --verbose option is 1 -- one line per packet
<br>
$ nfstest_pkt /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets (one
line per layer) <br>
$ nfstest_pkt -v 2 /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets (real
verbose, all items in each layer are displayed) <br>
$ nfstest_pkt -v 4 /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets
(display both verbose level 1 and 2) <br>
$ nfstest_pkt -v 3 /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all TCP packets (this
will display all RPC and NFS packets as well) <br>
$ nfstest_pkt -l tcp /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all packets <br>
$ nfstest_pkt -l all /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS, NLM, MOUNT
and PORTMAP packets <br>
$ nfstest_pkt -l nfs,nlm,mount,portmap /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display packets 100 through
199 <br>
$ nfstest_pkt -s 100 -e 200 -l all /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets with
non-zero status <br>
$ nfstest_pkt -m &quot;nfs.status != 0&quot;
/tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFSv4 WRITE
packets <br>
$ nfstest_pkt -m &quot;rpc.version == 4 and nfs.op ==
38&quot; /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFSv4 WRITE calls
<br>
$ nfstest_pkt -m &quot;rpc.version == 4 and nfs.argop ==
38&quot; /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets having
a file name as f00000001 (OPEN, LOOKUP, etc.) <br>
# including their replies <br>
$ nfstest_pkt -r -m &quot;nfs.name ==
&rsquo;f00000001&rsquo;&quot; /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS packets with
non-zero status including their respective calls <br>
$ nfstest_pkt -c -m &quot;nfs.status != 0&quot;
/tmp/trace.cap <br>
$ nfstest_pkt -d &quot;pkt_call,pkt&quot; -m
&quot;nfs.status != 0&quot; /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all TCP packets (just
the TCP layer) <br>
$ nfstest_pkt -d &quot;pkt.tcp&quot; -l tcp
/tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFS file handles
<br>
$ nfstest_pkt -d &quot;pkt.NFSop.fh&quot; -m
&quot;len(nfs.fh) &gt; 0&quot; /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all RPC packets
including the record infomation (packet number, timestamp,
etc.) <br>
# For verbose level 1 (default) the &quot;,&quot; separator
will be converted to a <br>
# space if all items are only pkt(.*)? or pkt_call(.*)? <br>
$ nfstest_pkt -d &quot;pkt.record,pkt.rpc&quot; -l rpc
/tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all RPC packets
including the record infomation (packet number, timestamp,
etc.) <br>
# For verbose level 2 the &quot;,&quot; separator will be
converted to a new line if <br>
# all items are only pkt(.*)? or pkt_call(.*)? <br>
$ nfstest_pkt -v 2 -d &quot;pkt.record,pkt.rpc&quot; -l rpc
/tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all RPC packets
including the record infomation (packet number, timestamp,
etc.) <br>
# using the given display format <br>
$ nfstest_pkt -d &quot;&gt;&gt;&gt; record: pkt.record
&gt;&gt;&gt; rpc: pkt.rpc&quot; -l rpc /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all packets truncating
all strings to 100 bytes <br>
# This is useful when some packets are very large and there
<br>
# is no need to display all the data <br>
$ nfstest_pkt --strsize 100 -v 2 -l all /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all NFSv4 packets
displaying the main operation of the compound <br>
# e.g., display &quot;WRITE&quot; instead of
&quot;SEQUENCE;PUTFH;WRITE&quot; <br>
$ nfstest_pkt --nfs-mainop 1 -l nfs /tmp/trace.cap</p>

<p style="margin-top: 1em"># Have all CRC16 strings
displayed as plain strings <br>
# e.g., display unformatted state ids <br>
$ nfstest_pkt --crc16 0 /tmp/trace.cap</p>

<p style="margin-top: 1em"># Have all CRC32 strings
displayed as plain strings <br>
# e.g., display unformatted file handles <br>
$ nfstest_pkt --crc32 0 /tmp/trace.cap</p>

<p style="margin-top: 1em"># Display packets using India
time zone <br>
$ nfstest_pkt --tz &quot;UTC-5:30&quot; /tmp/trace.cap <br>
$ nfstest_pkt --tz &quot;Asia/Kolkata&quot;
/tmp/trace.cap</p>

<p style="margin-top: 1em"># Display all packets for all
trace files given <br>
# The packets are displayed in order using their timestamps
<br>
$ nfstest_pkt trace1.cap trace2.cap trace3.cap</p>

<p style="margin-top: 1em">SEE ALSO <br>
formatstr(3), nfstest_alloc(1), nfstest_cache(1),
nfstest_delegation(1), nfstest_dio(1), nfstest_file(1),
nfstest_interop(1), nfstest_io(1), nfstest_lock(1),
nfstest_pnfs(1), <br>
nfstest_posix(1), nfstest_sparse(1), nfstest_xid(1),
packet.pktt(3), packet.utils(3)</p>

<p style="margin-top: 1em">BUGS <br>
No known bugs.</p>

<p style="margin-top: 1em">AUTHOR <br>
Jorge Mora (mora@netapp.com)</p>

<p style="margin-top: 1em">NFStest 2.1.1 23 November 2015
NFSTEST_PKT(1)</p>
<hr>
</body>
</html>
