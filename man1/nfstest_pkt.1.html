<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>NFSTEST_PKT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NFSTEST_PKT(1)</td>
    <td class="head-vol">nfstest_pkt 1.0</td>
    <td class="head-rtitle">NFSTEST_PKT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
nfstest_pkt - Packet trace decoder
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
nfstest_pkt [options] &lt;trace1.cap&gt; [&lt;trace2.cap&gt; ...]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Decode and display all packets in the packet trace file(s) given. The match
  option gives the ability to search for specific packets within the packet
  trace file. Other options allow displaying of their corresponding call or
  reply when only one or the other is matched. Only a range of packets can be
  displayed if the start and/or end options are used.
<div style="height: 1.00em;">&#x00A0;</div>
There are three levels of verbosity in which they are specified using a bitmap,
  where the most significant bit gives a more verbose output. Verbose level 1 is
  used as a default where each packet is displayed condensed to one line using
  the last layer of the packet as the main output. By default only the NFS
  packets (NFS, MOUNT, NLM, etc.) are displayed.
<div style="height: 1.00em;">&#x00A0;</div>
The packet trace files are processed either serially or in parallel. The packets
  are displayed using their timestamps so they are always displayed in the
  correct order even if the files given are out of order. If the packet traces
  were captured one after the other the packets are displayed serially, first
  the packets of the first file according to their timestamps, then the second
  and so forth. If the packet traces were captured at the same time on multiple
  clients the packets are displayed in parallel, packets are interleaved from
  all the files when displayed again according to their timestamps.
<div style="height: 1.00em;">&#x00A0;</div>
Note: When using the --call option, a packet call can be displayed out of order
  if the call is not matched explicitly but its reply is matched so its
  corresponding call is displayed right before the reply.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--version</dt>
  <dd class="It-tag">show program's version number and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h, --help</dt>
  <dd class="It-tag">show this help message and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-v VERBOSE, --verbose=VERBOSE</dt>
  <dd class="It-tag">Verbose level bitmask [default: 1]. bitmap 0x01: one line
      per packet. bitmap 0x02: one line per layer. bitmap 0x04: real
    verbose.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-l LAYERS, --layers=LAYERS</dt>
  <dd class="It-tag">Layers to display [default: 'nfs,nlm,mount,portmap']. Valid
      layers: ethernet, ip, tcp, udp, rpc, nfs, nlm, mount, portmap</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s START, --start=START</dt>
  <dd class="It-tag">Start index [default: 0]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e END, --end=END</dt>
  <dd class="It-tag">End index [default: 0]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-m MATCH, --match=MATCH</dt>
  <dd class="It-tag">Match string [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-c, --call</dt>
  <dd class="It-tag">If matching a reply packet, include its coresponding call
      in the output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-r, --reply</dt>
  <dd class="It-tag">If matching a call packet, include its coresponding reply
      in the output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d DISPLAY, --display=DISPLAY</dt>
  <dd class="It-tag">Print specific packet or part of a packet [default:
    pkt]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-z TZ, --tz=TZ</dt>
  <dd class="It-tag">Time zone to use to display timestamps
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="RPC_display:"><a class="selflink" href="#RPC_display:">RPC
  display:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">--rpc-type=RPC_TYPE</dt>
  <dd class="It-tag">Display RPC type [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--rpc-load=RPC_LOAD</dt>
  <dd class="It-tag">Display RPC load type (NFS, NLM, etc.) [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--rpc-ver=RPC_VER</dt>
  <dd class="It-tag">Display RPC load version [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--rpc-xid=RPC_XID</dt>
  <dd class="It-tag">Display RPC xid [default: True]
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Packet_display:"><a class="selflink" href="#Packet_display:">Packet
  display:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">--nfs-mainop=NFS_MAINOP</dt>
  <dd class="It-tag">Display NFSv4 main operation only [default: False]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--load-body=LOAD_BODY</dt>
  <dd class="It-tag">Display RPC payload body [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--crc16=CRC16</dt>
  <dd class="It-tag">Display CRC16 encoded strings [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--crc32=CRC32</dt>
  <dd class="It-tag">Display CRC32 encoded strings [default: True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--strsize=STRSIZE</dt>
  <dd class="It-tag">Truncate all strings to this size [default: 0]
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Debug:"><a class="selflink" href="#Debug:">Debug:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">--enum-check=ENUM_CHECK</dt>
  <dd class="It-tag">If set to True, enums are strictly enforced [default:
    True]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--debug-level=DEBUG_LEVEL</dt>
  <dd class="It-tag">Set debug level messages</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
# Display all NFS packets (one line per packet)
<div>&#x00A0;</div>
# Display only the NFS packets by default.
<div>&#x00A0;</div>
# Default for --verbose option is 1 -- one line per packet
<div>&#x00A0;</div>
$ nfstest_pkt /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets (one line per layer)
<div>&#x00A0;</div>
$ nfstest_pkt -v 2 /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets (real verbose, all items in each layer are displayed)
<div>&#x00A0;</div>
$ nfstest_pkt -v 4 /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets (display both verbose level 1 and 2)
<div>&#x00A0;</div>
$ nfstest_pkt -v 3 /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all TCP packets (this will display all RPC and NFS packets as well)
<div>&#x00A0;</div>
$ nfstest_pkt -l tcp /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all packets
<div>&#x00A0;</div>
$ nfstest_pkt -l all /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS, NLM, MOUNT and PORTMAP packets
<div>&#x00A0;</div>
$ nfstest_pkt -l nfs,nlm,mount,portmap /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display packets 100 through 199
<div>&#x00A0;</div>
$ nfstest_pkt -s 100 -e 200 -l all /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets with non-zero status
<div>&#x00A0;</div>
$ nfstest_pkt -m &quot;nfs.status != 0&quot; /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFSv4 WRITE packets
<div>&#x00A0;</div>
$ nfstest_pkt -m &quot;rpc.version == 4 and nfs.op == 38&quot; /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFSv4 WRITE calls
<div>&#x00A0;</div>
$ nfstest_pkt -m &quot;rpc.version == 4 and nfs.argop == 38&quot; /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets having a file name as f00000001 (OPEN, LOOKUP, etc.)
<div>&#x00A0;</div>
# including their replies
<div>&#x00A0;</div>
$ nfstest_pkt -r -m &quot;nfs.name == 'f00000001'&quot; /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS packets with non-zero status including their respective calls
<div>&#x00A0;</div>
$ nfstest_pkt -c -m &quot;nfs.status != 0&quot; /tmp/trace.cap
<div>&#x00A0;</div>
$ nfstest_pkt -d &quot;pkt_call,pkt&quot; -m &quot;nfs.status != 0&quot;
  /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all TCP packets (just the TCP layer)
<div>&#x00A0;</div>
$ nfstest_pkt -d &quot;pkt.tcp&quot; -l tcp /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFS file handles
<div>&#x00A0;</div>
$ nfstest_pkt -d &quot;pkt.NFSop.fh&quot; -m &quot;len(nfs.fh) &gt; 0&quot;
  /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all RPC packets including the record infomation (packet number,
  timestamp, etc.)
<div>&#x00A0;</div>
# For verbose level 1 (default) the &quot;,&quot; separator will be converted to
  a
<div>&#x00A0;</div>
# space if all items are only pkt(.*)? or pkt_call(.*)?
<div>&#x00A0;</div>
$ nfstest_pkt -d &quot;pkt.record,pkt.rpc&quot; -l rpc /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all RPC packets including the record infomation (packet number,
  timestamp, etc.)
<div>&#x00A0;</div>
# For verbose level 2 the &quot;,&quot; separator will be converted to a new
  line if
<div>&#x00A0;</div>
# all items are only pkt(.*)? or pkt_call(.*)?
<div>&#x00A0;</div>
$ nfstest_pkt -v 2 -d &quot;pkt.record,pkt.rpc&quot; -l rpc /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all RPC packets including the record infomation (packet number,
  timestamp, etc.)
<div>&#x00A0;</div>
# using the given display format
<div>&#x00A0;</div>
$ nfstest_pkt -d &quot;&gt;&gt;&gt; record: pkt.record &gt;&gt;&gt; rpc:
  pkt.rpc&quot; -l rpc /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all packets truncating all strings to 100 bytes
<div>&#x00A0;</div>
# This is useful when some packets are very large and there
<div>&#x00A0;</div>
# is no need to display all the data
<div>&#x00A0;</div>
$ nfstest_pkt --strsize 100 -v 2 -l all /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all NFSv4 packets displaying the main operation of the compound
<div>&#x00A0;</div>
# e.g., display &quot;WRITE&quot; instead of &quot;SEQUENCE;PUTFH;WRITE&quot;
<div>&#x00A0;</div>
$ nfstest_pkt --nfs-mainop 1 -l nfs /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Have all CRC16 strings displayed as plain strings
<div>&#x00A0;</div>
# e.g., display unformatted state ids
<div>&#x00A0;</div>
$ nfstest_pkt --crc16 0 /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Have all CRC32 strings displayed as plain strings
<div>&#x00A0;</div>
# e.g., display unformatted file handles
<div>&#x00A0;</div>
$ nfstest_pkt --crc32 0 /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display packets using India time zone
<div>&#x00A0;</div>
$ nfstest_pkt --tz &quot;UTC-5:30&quot; /tmp/trace.cap
<div>&#x00A0;</div>
$ nfstest_pkt --tz &quot;Asia/Kolkata&quot; /tmp/trace.cap
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Display all packets for all trace files given
<div>&#x00A0;</div>
# The packets are displayed in order using their timestamps
<div>&#x00A0;</div>
$ nfstest_pkt trace1.cap trace2.cap trace3.cap
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>formatstr(3),</b> <b>nfstest_alloc(1),</b> <b>nfstest_cache(1),</b>
  <b>nfstest_delegation(1),</b> <b>nfstest_dio(1),</b> <b>nfstest_file(1),</b>
  <b>nfstest_interop(1),</b> <b>nfstest_io(1),</b> <b>nfstest_lock(1),</b>
  <b>nfstest_pnfs(1),</b> <b>nfstest_posix(1),</b> <b>nfstest_sparse(1),</b>
  <b>nfstest_xid(1),</b> <b>packet.pktt(3),</b> <b>packet.utils(3)</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
No known bugs.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Jorge Mora (mora@netapp.com)</div>
<table class="foot">
  <tr>
    <td class="foot-date">23 November 2015</td>
    <td class="foot-os">NFStest 2.1.1</td>
  </tr>
</table>
</body>
</html>
