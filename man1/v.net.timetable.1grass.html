<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.net.timetable(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.net.timetable(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.net.timetable(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.net.timetable</b> - Finds shortest path using timetables.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, network, shortest path
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.net.timetable</b>
<div>&#x00A0;</div>
<b>v.net.timetable --help</b>
<div>&#x00A0;</div>
<b>v.net.timetable</b> <b>input</b>=<i>name</i> [<b>layer</b>=<i>string</i>]
  <b>output</b>= <i>name</i> [<b>arc_layer</b>=<i>string</i>]
  [<b>node_layer</b>= <i>string</i>] [<b>arc_column</b>=<i>string</i>]
  [<b>arc_backward_column</b>= <i>string</i>] [<b>node_column</b>=<i>string</i>]
  [ <b>walk_layer</b>=<i>string</i>] <b>route_id</b>=<i>name</i>
  <b>stop_time</b>= <i>name</i> <b>to_stop</b>=<i>name</i>
  <b>walk_length</b>=<i>name</i> [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer number or name
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc forward/both direction(s) cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_backward_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc backward direction cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>walk_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer number or name with walking connections or -1
    <div>&#x00A0;</div>
    A single vector map can be connected to multiple database tables. This
      number determines which table to use. When used with direct OGR access
      this is the layer name.
    <div>&#x00A0;</div>
    Default: <i>-1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>route_id</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of column with route ids
    <div>&#x00A0;</div>
    Default: <i>route_id</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stop_time</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of column with stop timestamps
    <div>&#x00A0;</div>
    Default: <i>stop_time</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>to_stop</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of column with stop ids
    <div>&#x00A0;</div>
    Default: <i>to_stop</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>walk_length</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of column with walk lengths
    <div>&#x00A0;</div>
    Default: <i>length</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.net.timetable</i> finds the shortest path between two points using
  timetables. <i>v.net.timetable</i> reads input, one query per line, from the
  standard input and writes output to the standard output as well as to the
  <b>output</b> map and to tables linked to layers 1 and 2. Each line of input
  must follow one of the following formats:
<div>&#x00A0;</div>
<pre>
PATH_ID FROM_X FROM_Y TO_X TO_Y START_TIME MIN_CHANGE MAX_CHANGES WALK_CHANGE
PATH_ID FROM_STOP TO_STOP START_TIME MIN_CHANGE MAX_CHANGES WALK_CHANGE
</pre>
where PATH_ID is the identificator of a query that is used in the output map to
  differentiate between queries. Search begins at START_TIME. MIN_CHANGE gives
  the minimum number of time (inclusively) for a change from one route to
  another. MAX_CHANGES denotes the maximum number of changes allowed or -1 if
  infinity. WALK_CHANGE is 1 or 0 depending whether walking from a stop to
  another stop is considered a change or not. Finally, the path is found from
  FROM_STOP to TO_STOP in latter case and from the stop closest to (FROM_X,
  FROM_Y) coordinates to the stop closest to (TO_X, TO_Y) coordinates in former
  case.
<div>&#x00A0;</div>
For each input query, module outputs a description of the shortest path to the
  standard output. For example, using the tables given below, for the following
  input:
<div>&#x00A0;</div>
<pre>
47 130 300 0 1 5 0
</pre>
the following output is produced:
<div>&#x00A0;</div>
<pre>
Route 15, from 130 leaving at 15 arriving to 250 at 22
Walk from 250 leaving at 22 arriving to 300 at 24
</pre>
Moreover, the module writes the path to the <b>output</b> map and stores all the
  information necessary to reconstruct the path to the tables. Table
  corresponding to stops/points is linked to layer 1 and looks, after the query,
  as follows:
<div>&#x00A0;</div>
<pre>
cat|path_id|stop_id|index|arr_time|dep_time
1|47|130|1|0|15
2|47|250|2|22|22
3|47|300|3|24|24
</pre>
where CAT is the category of a point in the map, PATH_ID is the path
  identificator, STOP_ID is the identificator of the stop as used in the input
  map, INDEX is the index of the stop on the path (i.e, index=1 is the first
  stop visited, ...) and ARR_TIME and DEP_TIME denote the arrival time and
  departure time respectively. Arrival time for the first stop on the path is
  always equal to START_TIME and departure time for the last stop is always
  equal to the arrival time.
<div>&#x00A0;</div>
The table linked to the second layer corresponds to subroutes taken between
  stops. The following table is obtainedd for the above query:
<div>&#x00A0;</div>
<pre>
cat|path_id|from_id|to_id|route_id|index|from_time|to_time
1|47|130|250|15|1|15|22
2|47|250|300|-1|2|22|24
</pre>
where CAT is the category of lines of subroute between stops FROM_ID to TO_ID,
  ROUTE_ID is the identificator of the route taken or -1 if walking, INDEX and
  PATH_ID are as above and FROM_TIME and TO_TIME denote the times between which
  the route is taken.
<div>&#x00A0;</div>
The <b>output</b> map contains the points on the positions of used stops. If a
  subroute is taken between two stops then a line segment is added between two
  corresponding points. Finally, instead of straight line segment, the actual
  paths of routes can be given in <b></b> <b>paths</b> layer. If this parameter
  is used then each line in the input map must contain identificators as
  category numbers of all routes passing through the line. The module then finds
  the path between two stops and writes this path instead. In case of walking
  from one stop to another, straight line between the stops is used.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Timetables are stored in a table linked to the given <b>layer</b> of the
  <b>input</b> map. Timetable consists of routes and each route is just a
  sequence of stops with specified arrival times. If two sequences of stops
  differ only in times then they still correspond to two routes. For example, if
  there is a bus line that leaves every 20 minutes and follow exactly the same
  path every time then there still needs to be a separate route for every time.
  For each stop (given by the category number of the point) the table storing
  information about the routes must contain the list of all routes stopping at
  the stop(given by route identificators) together with arrival times. That is,
  the table must contain three columns: stop - which is the key of the table,
  <b>route_id</b> and <b>stop_time</b> where each triple corresponds to a route
  arriving to a stop and a certain time. For example, a valid table might look
  as follows:
<div>&#x00A0;</div>
<pre>
cat|route_id|stop_time
100|5|0
130|5|10
150|5|20
250|5|30
300|5|40
260|15|5
130|15|15
250|15|22
150|35|17
250|35|27
300|35|37
100|35|50
</pre>
Note that <b>stop_time</b> is an integer and so you can use any units and offest
  to specify arrival times.
<div>&#x00A0;</div>
Also, walking connections between stops can be given by a table linked to
  <b></b> <b>walking</b> layer of the <b>input</b> map. If this parameter is -1
  then walking between stops is not allowed. The table must contain three
  columns: stop - which is the key of the table, <b>to_stop</b> and
  <b>length</b>. A record in the table says that it takes <b>length</b> <b></b>
  units of time to walk from stop to <b>to_stop</b>. The following is a valid
  table:
<div>&#x00A0;</div>
<pre>
cat|length|to_stop
250|2|300
</pre>
Beware that this only means that it is possible to walk from stop 250 to stop
  300 but not the other way round.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To find a path from stop with identificator 130 to stop with category 300,
  starting at time 0, with one time unit for change, maximum of 5 changes and
  with walking not considered a change of route, we use the following command:
<div>&#x00A0;</div>
<pre>
echo &quot;47 130 300 0 1 5 0&quot; | v.net.timetable \
     input=buses output=path layer=5 walking=6 path=7
</pre>
If, on the other hand, we know the coordinates of the places then the following
  command might be used:
<div>&#x00A0;</div>
<pre>
echo &quot;47 10.31 54.31 90.21 28.21 0 1 5 0&quot; | v.net.timetable \
     input=buses output=path layer=5 walking=6 path=7
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>v.net,</i> <i>v.net.path,</i> <i>v.net.distance</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Daniel Bundala, Google Summer of Code 2009, Student
<div>&#x00A0;</div>
Wolf Bergenheim, Mentor
<div class="Pp"></div>
<i>Last changed: $Date: 2013-05-23 21:59:24 +0200 (Thu, 23 May 2013) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.net.timetable source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
