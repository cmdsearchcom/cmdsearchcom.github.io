<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MAKEMIME(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MAKEMIME(1)</td>
    <td class="head-vol">Double Precision, Inc.</td>
    <td class="head-rtitle">MAKEMIME(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
makemime - Create MIME-formatted messages
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>makemime</b>
  [ <i>options</i>...]</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>makemime</b>
  [@ <i>filename</i>]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>makemime</b> creates MIME-formatted messages of arbitrary complexity.
  <b>makemime</b> reads one or more individual files, MIME-encodes them, adds
  basic MIME headers, and adds any additional headers specified bye command line
  options. The result is saved to another file or standard output. Complex
  MIME-formatted messages are created by piping together multiple instances of
  <b>makemime</b>. Advanced options direct <b>makemime</b> to <b>fork</b>()
  itself, and handle the details of setting up all the pipelines.
<div class="Pp"></div>
In most cases, options for <b>makemime</b> come directly from the command line.
  @filename reads the options from a file. &quot;@&amp; <i>n</i>&quot; reads
  options from a pipe on file descriptor # <i>n</i>. &quot;@-&quot; is a
  shortcut for &quot;@&amp;0&quot;, which reads options from standard input.
<div class="Pp"></div>
When options are read from a file or a pipe, each option must be on a line by
  itself. If an option requires an argument, the argument must follow on the
  next line.
<div class="Pp"></div>
For readability, leading whitespace is deleted when options are read from a file
  or a pipe. Empty lines are also ignored, as well as lines that begin with the
  '#' character.
<div class="Pp"></div>
Options and their arguments may contain characters that are special characters
  to the shell, such as '(' and ')'. These characters must be backslashed when
  specified on the command line, to avoid their special meaning to the shell.
  These characters MUST NOT be backslashed when options are read from a file or
  a pipe. Similarly, the contents of most headers nearly always include spaces.
  Therefore they must be quoted when specified on the command line. Header
  contents MUST NOT be quoted when options come from a file or a pipe.
<div class="Pp"></div>
<b>makemime</b> reads the content to be formatted as a MIME message from some
  other file. The files can also be a pipe. It is possible to supply both the
  options and a file from the same pipe, by terminating the options list with a
  line containing the single character &quot;-&quot;. The remainder of the pipe
  will be available to be used as an input file (which must be explicitly
  specified by one of the options). Of course, only one input file can come from
  a single pipe.
<h2 class="Ss" title="Ss" id="MIME_overview"><a class="selflink" href="#MIME_overview">MIME
  overview</a></h2>
A MIME-formatted message contains one or several MIME sections. MIME headers
  specify how multiple MIME sections are to be interpreted as a whole (whether
  they are attached together; whether they are alternative representations of
  the same content; or something even more esoteric). This manual page gives a
  very brief, terse, overview of basic MIME concepts. The description is biased
  towards describing the functionality of the <b>makemime</b> utility. See
  <b>RFC 2045</b>[1], <b>RFC 2046</b>[2], <b>RFC 2047</b>[3], <b>RFC
  2048</b>[4], and <b>RFC 2049</b>[4] for a formal definition of MIME-formatted
  messages.
<div class="Pp"></div>
Each file in a MIME message is encoded as a single MIME section. A MIME section
  consists of at least one header line, &quot;Content-Type:&quot;. The
  &quot;Content-Type:&quot; header gives the type of the data ontained in the
  file. Other header lines may also be present. Their relative order does not
  matter. MIME headers are followed by a blank line, then the contents of the
  file, encoded appropriately. All MIME sections generated by <b>makemime</b>
  will always contain another header, &quot;Content-Transfer-Encoding:&quot;.
  This header gives the encoding method used for the file; it is an optional
  header, but <b>makemime</b> always creates it.
<div class="Pp"></div>
The MIME encoding method defaults to &quot;7bit&quot; if this header is absent.
  7bit encoding is only suitable for plain text messages in the US-ASCII
  character set. The &quot;8bit&quot; encoding method is used by plain text
  messages in other character sets that use octets with the high bit set. An
  alternative to 8bit encoding is &quot;quoted-printable&quot;. The
  &quot;base64&quot; encoding method is used for files containing binary data
  (anything other than plain text).
<div class="Pp"></div>
MIME sections that contain text messages have their &quot;Content-Type:&quot;
  header set to &quot;text/plain&quot;; or &quot;text/html&quot; for HTML
  messages. There are also several other, rare, content types that can be used.
  MIME sections that contain other kinds of data will use some other,
  appropriate &quot;Content-Type:&quot; header, such as &quot;image/gif&quot;,
  or &quot;audio/x-wav&quot;.
<div class="Pp"></div>
MIME sections that contain textual content may also use the base64 encoding
  method, they are not required to use 7bit, 8bit, or quoted-printable.
  &quot;text/pdf&quot; sections, that contain PDF files, typically contain
  binary data and must use the base64 encoding. Consequently, MIME sections that
  typically contain binary data, such as image/gif and audio/x-wav, are free to
  use encodings other than base64, as long as all the data can be represented by
  printable characters (but, in practice, that never happens).
<div class="Pp"></div>
MIME sections may also contain other, optional, headers such as
  &quot;Content-Disposition:&quot;, &quot;Content-ID:&quot;, and
  &quot;Content-Name:&quot;. Consult the appropriate RFCs for the specific usage
  of these headers. These headers can be added by <b>makemime</b> by using the
  <b>-a</b> option, as described below. These headers play no part in creating
  the overall structure of a MIME-encoded message, and <b>makemime</b> does not
  care much about these headers. It simply includes them, and their content,
  upon request.
<div class="Pp"></div>
Multiple files are formatted as a single message MIME message in two steps:
  first, by creating a MIME section for each file; and then creating a single
  MIME section that contains other MIME sections. A &quot;multipart/mixed&quot;
  MIME section contains a collection of MIME sections that represent different
  objects, attached together. A &quot;multipart/alternative&quot; MIME section
  contains a collection of MIME sections which are alternative representations
  of the same object, such as an HTML and a plain text version of the same
  message. Other &quot;multipart&quot; MIME sections also exist, and their usage
  is defined by their respective RFCs.
<h2 class="Ss" title="Ss" id="Creating_a_single_MIME_section"><a class="selflink" href="#Creating_a_single_MIME_section">Creating
  a single MIME section</a></h2>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>makemime</b>
  {-c&#x00A0;&quot; <i>type</i>&quot;} [-e&#x00A0;&quot;<i>encoding</i>&quot;]
  [-o&#x00A0; <i>outputfile</i>] [-C&#x00A0;&quot;<i>charset</i>&quot;]
  [-N&#x00A0;&quot; <i>name&quot;</i>]
  [-a&#x00A0;&quot;<i>header:&#x00A0;value&quot;</i>...] {
  <i>filename</i>}</div>
<div class="Pp"></div>
The <b>-c</b> option reads filename, encodes it appropriately, adds the
  &quot;Content-Type: <i>type</i>&quot; and
  &quot;Content-Transfer-Encoding:&quot; MIME headers, then writes the result to
  standard output. type can be any valid MIME type, except for multipart.
  Setting filename to &quot;-&quot; reads from standard input. Setting filename
  to &quot;&amp; <i>n</i>&quot; reads from file descriptor #<i>n</i>.
<div class="Pp"></div>
The <b>-C</b> option sets the MIME charset attribute for text/plain content. The
  <b>-N</b> option sets the name attribute for Content-Type:.
<div class="Pp"></div>
<i>encoding</i> argument should be specified. It's more efficient to do so.
  <i>encoding</i> must be one of the following: 7bit, 8bit, quoted-printable, or
  base64.
<div class="Pp"></div>
If <i>encoding</i> is not specified, <b>makemime</b> reads the filename twice -
  once to figure out the best encoding method, and the second time to encode
  filename. If filename is a pipe <b>makemime</b> creates a temporary file,
  which is not very efficient if filename is large. However letting
  <b>makemime</b> pick the encoding method is more convenient if filename is
  relatively small.
<div class="Pp"></div>
Another possibility is to omit <i>encoding</i> and set <i>type</i> to auto. This
  combination sets &quot;Content-Type:&quot; to either text/plain, or
  application/octet-stream, based on the selected <i>encoding</i>.
<div class="Pp"></div>
By default the encoded MIME section is written to standard output. The <b>-o</b>
  option writes the MIME section to <i>outputfile</i>. <i>outputfile</i> may be
  &quot;&amp; <i>n</i>&quot;, which writes the MIME section to a pipe on file
  descriptor # <i>n</i>.
<div class="Pp"></div>
<b>makemime</b> does not generate any other headers. Particularly, the
  &quot;Mime-Version:&quot; header is required for MIME-formatted E-mail
  messages. Additional headers are specified by the <b>-a</b> option, which may
  be used multiple times to insert multiple headers. <b>makemime</b> doesn't do
  anything with them except to insert the headers into the generated MIME
  section.
<div class="Pp"></div>
Note that &quot;Mime-Version:&quot; is only required for the top level MIME
  section. This header is not required for individual MIME sections that are
  later combined into a multipart MIME collection.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
The <b>-c</b> option must occur listed first, the remaining options must follow
  the <b>-c</b> option.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<h2 class="Ss" title="Ss" id="Creating_a_multipart_MIME_collection"><a class="selflink" href="#Creating_a_multipart_MIME_collection">Creating
  a multipart MIME collection</a></h2>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>makemime</b>
  {-m&#x00A0;&quot;multipart/ <i>type</i>&quot;}
  [-e&#x00A0;&quot;<i>encoding</i>&quot;] [-o&#x00A0; <i>outputfile</i>]
  [-a&#x00A0;&quot; <i>header:&#x00A0;value&quot;</i>...]
  {<i>filename</i>}</div>
<div class="Pp"></div>
The <b>-m</b> option is identical to the <b>-c</b> option, except for three
  differences.
<div class="Pp"></div>
<i>type</i> must be either &quot;multipart/mixed&quot;,
  &quot;multipart/alternative&quot;, or some other MIME multipart content type.
  Additionally, &quot; <i>encoding</i>&quot; can only be &quot;7bit&quot; or
  &quot;8bit&quot;, and will default to &quot;8bit&quot; if not specified.
  Finally, filename must be a MIME-formatted section, NOT a regular file.
  Usually filename is created by a previous invocation of <b>makemime</b> (it
  can also be a pipe, like the <b>-c</b> option), but it can be created via any
  other means.
<div class="Pp"></div>
The <b>-m</b> option creates an initial multipart MIME collection, that contains
  only one MIME section, taken from filename. The collection is written to
  standard output, or the pipe or to <i>outputfile</i>.
<h2 class="Ss" title="Ss" id="Creating_a_multipart_MIME_section"><a class="selflink" href="#Creating_a_multipart_MIME_section">Creating
  a multipart MIME section</a></h2>
<div class="Pp" style="margin-left: 9.00ex; text-indent: -9.00ex;"><b>makemime</b>
  {-j&#x00A0; <i>file1</i>&quot;} [-o&#x00A0;<i>outputfile</i>]
  {<i>file2</i>}</div>
<div class="Pp"></div>
This option adds a MIME section to an existing MIME collection. <i>file1</i>
  must be a MIME collection that was previously created by the <b>-m</b> option.
  <i>file2</i> must be a MIME section that was previously created by the
  <b>-c</b> option. The <b>-j</b> options adds the MIME section in <i>file2</i>
  to the MIME collection in <i>file1</i>. The result is written to standard
  output or to <i>outputfile</i>.
<div class="Pp"></div>
<i>file1</i> and/or <i>file2</i> may be &quot;@&amp; <i>n</i>&quot; which reads
  from file descriptor # <i>n</i>. The <i>outputfile</i> may also specify a file
  descriptor.
<div class="Pp"></div>
<i>file1</i> and <i>file2</i> should ideally be created by <b>makemime</b> as
  well. It's also possible to use MIME-formatted files created by other
  software, but with some degree of care. <b>makemime</b> is not intended to be
  a MIME parser, but a MIME generator. However some amount of MIME parsing is
  necessary to append a MIME section to an existing MIME collection.
  <b>makemime</b>'s parsing is sufficient for appending a new section to a MIME
  collection, as long as the MIME headers in the MIME collections are
  straightforward. Very convoluted MIME headers may confuse <b>makemime</b>, and
  it may not be able to handle them.
<h2 class="Ss" title="Ss" id="Recursive_MIME_collections"><a class="selflink" href="#Recursive_MIME_collections">Recursive
  MIME collections</a></h2>
MIME collection may contain other MIME collections as well as MIME sections. The
  <b>-m</b> and the <b>-j</b> options may use a multipart MIME collection in
  place of a MIME section automatically because a multipart MIME collection is
  just a special type of a MIME section. The following example encodes a text
  message that can be alternatively represented as HTML or plain text, with some
  additional attachments:
<div class="Pp"></div>
1. Create a MIME collection that has a text/plain and a text/html MIME section.
<div class="Pp"></div>
2. Create a MIME collection consisting of the MIME section generated in step
  one, plus additional MIME sections containing other attachments.
<div class="Pp"></div>
For example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
# Take two files containing the text and the html version of a message, and
# add MIME headers to them.
<div class="Pp"></div>
makemime -c &quot;text/plain; charset=iso-8859-1&quot; -o tmp1.txt msg.txt
makemime -c &quot;text/html; charset=iso-8859-1&quot; -o tmp1.html msg.html
<div class="Pp"></div>
# Combine the result into a multipart/alternative collection
<div class="Pp"></div>
makemime -m &quot;multipart/alternative&quot; -a &quot;Content-Disposition: inline&quot; \
                                    -o tmp.ma1 tmp1.txt
makemime -j tmp.ma1 -o tmp.ma2 tmp1.html
<div class="Pp"></div>
# Add MIME headers to an image attachment.
<div class="Pp"></div>
makemime -c &quot;image/gif&quot; -a &quot;Content-Disposition: attachment&quot; \
                        -o tmp2.gif attachment.gif
<div class="Pp"></div>
# Create the final multipart/mixed collection
<div class="Pp"></div>
makemime -m &quot;multipart/mixed&quot; -a &quot;Mime-Version: 1.0&quot; \
                              -o tmp.mm1 tmp.ma2
makemime -j tmp.mm1 -o output.msg tmp2.gif
</pre>
</div>
<div class="Pp"></div>
output.msg now contains the complete MIME collection. Just add the Subject:,
  From:, and To: headers (can also be done by additional <b>-a</b> options, of
  course), and send it on its way.
<h2 class="Ss" title="Ss" id="Building_complex_MIME_encodings"><a class="selflink" href="#Building_complex_MIME_encodings">Building
  complex MIME encodings</a></h2>
There are several different ways to build complete MIME encodings from multiple
  MIME sections. One way is to use temporary files to create MIME sections, then
  combine them together into a single MIME collection. A slightly more
  complicated approach involves setting up pipes between multiple makemime
  processes, in order to avoid using temporary files.
<div class="Pp"></div>
This can be done manually, by hand. It is also possible to have <b>makemime</b>
  do this automatically. <b>makemime</b> will set up these pipes and run
  multiple instances of itself to create a single MIME collection, with multiple
  attachments of complexity limited only by your system's limit on the maximum
  number of open files and pipes.
<div class="Pp"></div>
Any file that's read by the <b>-c</b>, <b>-m</b>, and <b>-j</b> options (
  <b>-o</b> specifies a file to create, and doesn't count) may be replaced by a
  single argument containing a left parenthesis, additional options, then a
  single argument containing a right parenthesis. A single invocation of
  <b>makemime</b> can only use one <b>-c</b>, <b>-m</b>, or <b>-j</b> option.
  However, another <b>-c</b>, <b>-m</b>, or <b>-j</b> option may be specified
  inside the left and the right parenthesis, and its output is used in place of
  the file it replaced. In the previous example the third and the fourth
  invocation of <b>makemime</b> can be replaced with the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
makemime -j \(                                           \
               -m &quot;multipart/alternative&quot;                \
               -a &quot;Content-Disposition: inline&quot; tmp1.txt \
             \) -o tmp.ma2                               \
             tmp1.html
</pre>
</div>
<div class="Pp"></div>
Note that the parenthesis must be backslashed, to avoid their special meaning to
  the shell. An equivalent argument file would have the following contents:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
-j
   (
      -m
          multipart/alternative
      -a
          Content-Disposition: inline
      tmp1.txt
   )
   -o
      tmp.ma2
 tmp1.html
</pre>
</div>
<div class="Pp"></div>
These constructs can be arbitrarily nested, and are limited by the amount of
  available memory and resources. The entire sequence in the previous section is
  equivalent to the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
makemime -j                                                 \
         \(                                                 \
            -m &quot;multipart/mixed&quot;                            \
            -a &quot;Mime-Version: 1.0&quot;                          \
            \(                                              \
                -j                                          \
                \(                                          \
                   -m &quot;multipart/alternative&quot;               \
                   -a &quot;Content-Disposition: inline&quot;         \
                   \(                                       \
                      -c &quot;text/plain; charset=iso-8859-1&quot;   \
                      msg.txt                               \
                   \)                                       \
                \)                                          \
                \(                                          \
                    -c &quot;text/html; charset=iso-8859-1&quot;      \
                    msg.html                                \
                \)                                          \
            \)                                              \
         \)                                                 \
         -o output.msg                                      \
         \(                                                 \
            -c &quot;image/gif&quot;                                  \
            -a &quot;Content-Disposition: attachment&quot;            \
            attachment.gif                                  \
         \)
</pre>
</div>
<div class="Pp"></div>
An equivalent argument file would be:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
-j
(
   -m
       multipart/mixed
   -a
       Mime-Version: 1.0
   (
       -j
       (
           -m
               multipart/alternative
           -a
               Content-Disposition: inline
           (
               -c
                   text/plain; charset=iso-8859-1
               msg.txt
           )
       )
       (
           -c
               text/html; charset=iso-8859-1
           msg.html
       )
   )
)
-o
   output.msg
(
   -c
       image/gif
   -a
       Content-Disposition: attachment
   attachment.gif
)
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b></b><b>maildrop</b>(1)[5], <b></b><b>maildropfilter</b>(5)[6],
  <b></b><b>reformail</b>(1)[7], <b></b><b>reformime</b>(1)[8], <b>egrep</b>(1),
  <b>grep</b>(1), <b></b><b>courier</b>(8)[9], <b>sendmail</b>(8), <b>RFC
  2045</b>[1], <b>RFC 2046</b>[2], <b>RFC 2047</b>[3], <b>RFC 2048</b>[4],
  <b>RFC 2049</b>[4].
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Sam Varshavchik</b>
<div style="margin-left: 4.00ex;">Author</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">RFC 2045</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.rfc-editor.org/rfc/rfc2045.txt</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">RFC 2046</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.rfc-editor.org/rfc/rfc2046.txt</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag">RFC 2047</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.rfc-editor.org/rfc/rfc2047.txt</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 4.</dt>
  <dd class="It-tag">RFC 2048</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.rfc-editor.org/rfc/rfc2048.txt</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 5.</dt>
  <dd class="It-tag"><b>maildrop</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/maildrop.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 6.</dt>
  <dd class="It-tag"><b>maildropfilter</b>(5)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/maildropfilter.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 7.</dt>
  <dd class="It-tag"><b>reformail</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/reformail.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 8.</dt>
  <dd class="It-tag"><b>reformime</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/reformime.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 9.</dt>
  <dd class="It-tag"><b>courier</b>(8)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/courier.html</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/20/2015</td>
    <td class="foot-os">Courier Mail Server</td>
  </tr>
</table>
</body>
</html>
