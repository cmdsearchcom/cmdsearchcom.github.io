<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:47 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>TAPESTAT(1) Linux User&rsquo;s Manual TAPESTAT(1)</p>

<p style="margin-top: 1em">NAME <br>
tapestat - Report tape statistics.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
tapestat [ -k | -m ] [ -t ] [ -V ] [ -y ] [ -z ] [ interval
[ count ] ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The tapestat command is used for monitoring the activity of
tape drives connected to a system.</p>

<p style="margin-top: 1em">The first report generated by
the tapestat command provides statistics concerning the time
since the system was booted, unless the -y option is used,
when this first report is <br>
omitted. Each subsequent report covers the time since the
previous report.</p>

<p style="margin-top: 1em">The interval parameter specifies
the amount of time in seconds between each report. The count
parameter can be specified in conjunction with the interval
parameter. If the count <br>
parameter is specified, the value of count determines the
number of reports generated at interval seconds apart. If
the interval parameter is specified without the count
parame&acirc; <br>
ter, the tapestat command generates reports
continuously.</p>

<p style="margin-top: 1em">REPORT <br>
The tapestat report provides statistics for each tape drive
connected to the system. The following data are
displayed:</p>

<p style="margin-top: 1em">r/s <br>
The number of reads issued expressed as the number per
second averaged over the interval.</p>

<p style="margin-top: 1em">w/s <br>
The number of writes issued expressed as the number per
second averaged over the interval.</p>

<p style="margin-top: 1em">kB_read/s | MB_read/s <br>
The amount of data read expressed in kilobytes (by default
or if option -k used) or megabytes (if option -m used) per
second averaged over the interval.</p>

<p style="margin-top: 1em">kB_wrtn/s | MB_wrtn/s <br>
The amount of data written expressed in kilobytes (by
default or if option -k used) or megabytes (if option -m
used) per second averaged over the interval.</p>

<p style="margin-top: 1em">%Rd <br>
Read percentage wait - The percentage of time over the
interval spent waiting for read requests to complete. The
time is measured from when the request is dispatched to <br>
the SCSI mid-layer until it signals that it completed.</p>

<p style="margin-top: 1em">%Wr <br>
Write percentage wait - The percentage of time over the
interval spent waiting for write requests to complete. The
time is measured from when the request is dispatched to <br>
the SCSI mid-layer until it signals that it completed.</p>

<p style="margin-top: 1em">%Oa <br>
Overall percentage wait - The percentage of time over the
interval spent waiting for any I/O request to complete
(read, write, and other).</p>

<p style="margin-top: 1em">Rs/s <br>
The number of I/Os, expressed as the number per second
averaged over the interval, where a non-zero residual value
was encountered.</p>

<p style="margin-top: 1em">Ot/s <br>
The number of I/Os, expressed as the number per second
averaged over the interval, that were included as
&quot;other&quot;. Other I/O includes ioctl calls made to
the tape driver <br>
and implicit operations performed by the tape driver such as
rewind on close (for tape devices that implement rewind on
close). It does not include any I/O performed using <br>
methods outside of the tape driver (e.g. via sg ioctls).</p>

<p style="margin-top: 1em">OPTIONS <br>
-k Show the amount of data written or read in kilobytes per
second instead of megabytes. This option is mutually
exclusive with -m.</p>

<p style="margin-top: 1em">-m Show the amount of data
written or read in megabytes per second instead of
kilobytes. This option is mutually exclusive with -k.</p>

<p style="margin-top: 1em">-t Display time stamps. The time
stamp format may depend on the value of the S_TIME_FORMAT
environment variable (see below).</p>

<p style="margin-top: 1em">-V Print version and exit.</p>

<p style="margin-top: 1em">-y Omit the initial statistic
showing values since boot.</p>

<p style="margin-top: 1em">-z Tell tapestat to omit output
for any tapes for which there was no activity during the
sample period.</p>

<p style="margin-top: 1em">CONSIDERATIONS <br>
It is possible for a percentage value (read, write, or
other) to be greater than 100 percent (the tapestat command
will never show a percentage value more than 999). If
rewind&acirc; <br>
ing a tape takes 40 seconds where the interval time is 5
seconds the %Oa value would show as 0 in the intervals
before the rewind completed and then show as approximately
800 <br>
percent when the rewind completes.</p>

<p style="margin-top: 1em">Similar values will be observed
for %Rd and %Wr if a tape drive stops reading or writing and
then restarts (that is it stopped streaming). In such a case
you may see the r/s or <br>
w/s drop to zero and the %Rd/%Wr value could be higher than
100 when reading or writing continues (depending on how long
it takes to restart writing or reading). This is only an
<br>
issue if it happens a lot as it may cause tape wear and will
impact on the backup times.</p>

<p style="margin-top: 1em">For fast tape drives you may see
low percentage wait times. This does not indicate an issue
with the tape drive. For a slower tape drive (e.g. an older
generation DDS drive) the <br>
speed of the tape (and tape drive) is much slower than
filesystem I/O, percent wait times are likely to be higher.
For faster tape drives (e.g. LTO) the percentage wait times
are <br>
likely to be lower as program writing to or reading from
tape is going to be doing a lot more filesystem I/O because
of the higher throughput.</p>

<p style="margin-top: 1em">Although tape statistics are
implemented in the kernel using atomic variables they cannot
be read atomically as a group. All of the statistics values
are read from different <br>
files under /sys, because of this there may be I/O
completions while reading the different files for the one
tape drive. This may result in a set of statistics for a
device that <br>
contain some values before an I/O completed and some
after.</p>

<p style="margin-top: 1em">This command uses rounding down
as the rounding method when calculating per second
statistics. If, for example, you are using dd to copy one
tape to another and running tapestat <br>
with an interval of 5 seconds and over the interval there
were 3210 writes and 3209 reads then w/s would show 642 and
r/s 641 (641.8 rounded down to 641). In such a case if it
<br>
was a tar archive being copied (with a 10k block size) you
would also see a difference between the kB_read/s and
kB_wrtn/s of 2 (one I/O 10k in size divided by the interval
<br>
period of 5 seconds). If instead there were 3210 writes and
3211 reads both w/s and r/s would both show 642 but you
would still see a difference between the kB_read/s and <br>
kB_wrtn/s values of 2 kB/s.</p>

<p style="margin-top: 1em">This command is provided with an
interval in seconds. However internally the interval is
tracked per device and can potentially have an effect on the
per second statistics <br>
reported. The time each set of statistics is captured is
kept with those statistics. The difference between the
current and previous time is converted to milliseconds for
use in <br>
calculations. We can look at how this can impact the
statistics reported if we use an example of a tar archive
being copied between two tape drives using dd. If both
devices <br>
reported 28900 kilobytes transferred and the reading tape
drive had an interval of 5001 milliseconds and the writing
tape drive 5000 milliseconds that would calculate out as
5778 <br>
kB_read/s and 5780 kB_wrtn/s.</p>

<p style="margin-top: 1em">The impact of some retrieving
statistics during an I/O completion, rounding down, and
small differences in the interval period on the statistics
calculated should be minimal but <br>
may be non-zero.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
The tapestat command takes into account the following
environment variable:</p>

<p style="margin-top: 1em">S_TIME_FORMAT <br>
If this variable exists and its value is ISO then the
current locale will be ignored when printing the date in the
report header. The tapestat command will use the ISO <br>
8601 format (YYYY-MM-DD) instead. The timestamp displayed
with option -t will also be compliant with ISO 8601
format.</p>

<p style="margin-top: 1em">BUGS <br>
/sys filesystem must be mounted for tapestat to work. It
will not work on kernels that do not have sysfs support</p>

<p style="margin-top: 1em">This command requires kernel
version 4.2 or later (or tape statistics support backported
for an earlier kernel version).</p>

<p style="margin-top: 1em">FILES <br>
/sys/class/scsi_tape/st&lt;num&gt;/stats/* Statistics files
for tape devices.</p>

<p style="margin-top: 1em">/proc/uptime contains system
uptime.</p>

<p style="margin-top: 1em">AUTHOR <br>
Initial revision by Shane M. SEYMOUR (shane.seymour
&lt;at&gt; hpe.com) <br>
Modified for sysstat by Sebastien Godard (sysstat &lt;at&gt;
orange.fr)</p>

<p style="margin-top: 1em">SEE ALSO <br>
iostat(1), mpstat(1)</p>


<p style="margin-top: 1em">http://pagesperso-orange.fr/sebastien.godard/</p>

<p style="margin-top: 1em">Linux MARCH 2016 TAPESTAT(1)</p>
<hr>
</body>
</html>
