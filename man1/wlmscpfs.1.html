<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:43:03 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>wlmscpfs(1) OFFIS DCMTK wlmscpfs(1)</p>

<p style="margin-top: 1em">NAME <br>
wlmscpfs - DICOM Basic Worklist Management SCP (based on
data files)</p>

<p style="margin-top: 1em">SYNOPSIS <br>
wlmscpfs [options] port</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The wlmscpfs application implements a Service Class Provider
(SCP) for the Basic Worklist Management Service. The
application will listen on a specified TCP/IP port for
incoming <br>
association requests from a Worklist Management SCU. In case
an association was acknowledged and a worklist query was
received, the wlmscpfs application will query particular
<br>
files in a certain directory (which can be specified through
corresponding program options) on the file system for
corresponding worklist information, and it will send this
<br>
information back to the calling Worklist Management SCU.
Aside from dealing with Worklist Management queries, the
wlmscpfs application also supports the Verification Service
<br>
Class as an SCP.</p>

<p style="margin-top: 1em">PARAMETERS <br>
port tcp/ip port number to listen on</p>

<p style="margin-top: 1em">OPTIONS <br>
general options <br>
-h --help <br>
print this help text and exit</p>

<p style="margin-top: 1em">--version <br>
print version information and exit</p>

<p style="margin-top: 1em">--arguments <br>
print expanded command line arguments</p>

<p style="margin-top: 1em">-q --quiet <br>
quiet mode, print no warnings and errors</p>

<p style="margin-top: 1em">-v --verbose <br>
verbose mode, print processing details</p>

<p style="margin-top: 1em">-d --debug <br>
debug mode, print debug information</p>

<p style="margin-top: 1em">-ll --log-level [l]evel: string
constant <br>
(fatal, error, warn, info, debug, trace) <br>
use level l for the logger</p>

<p style="margin-top: 1em">-lc --log-config [f]ilename:
string <br>
use config file f for the logger</p>

<p style="margin-top: 1em">multi-process options <br>
-s --single-process <br>
single process mode</p>

<p style="margin-top: 1em">--fork <br>
fork child process for each association (default)</p>

<p style="margin-top: 1em">input options <br>
general:</p>

<p style="margin-top: 1em">-dfp --data-files-path [p]ath:
string (default: /home/www/wlist) <br>
path to worklist data files</p>

<p style="margin-top: 1em">handling of worklist files:</p>

<p style="margin-top: 1em">-efr --enable-file-reject <br>
enable rejection of incomplete worklist files (default)</p>

<p style="margin-top: 1em">-dfr --disable-file-reject <br>
disable rejection of incomplete worklist files</p>

<p style="margin-top: 1em">processing options <br>
returned character set:</p>

<p style="margin-top: 1em">-cs0 --return-no-char-set <br>
return no specific character set (default)</p>

<p style="margin-top: 1em">-cs1 --return-iso-ir-100 <br>
return specific character set ISO IR 100</p>

<p style="margin-top: 1em">-csk --keep-char-set <br>
return character set provided in file</p>

<p style="margin-top: 1em">other processing options:</p>

<p style="margin-top: 1em">-nse --no-sq-expansion <br>
disable expansion of empty sequences in C-FIND <br>
request messages</p>

<p style="margin-top: 1em">network options <br>
preferred network transfer syntaxes:</p>

<p style="margin-top: 1em">+x= --prefer-uncompr <br>
prefer explicit VR local byte order (default)</p>

<p style="margin-top: 1em">+xe --prefer-little <br>
prefer explicit VR little endian TS</p>

<p style="margin-top: 1em">+xb --prefer-big <br>
prefer explicit VR big endian TS</p>

<p style="margin-top: 1em">+xd --prefer-deflated <br>
prefer deflated explicit VR little endian TS</p>

<p style="margin-top: 1em">+xi --implicit <br>
accept implicit VR little endian TS only</p>

<p style="margin-top: 1em">network host access control (tcp
wrapper):</p>

<p style="margin-top: 1em">-ac --access-full <br>
accept connections from any host (default)</p>

<p style="margin-top: 1em">+ac --access-control <br>
enforce host access control rules</p>

<p style="margin-top: 1em">post-1993 value
representations:</p>

<p style="margin-top: 1em">+u --enable-new-vr <br>
enable support for new VRs (UN/UT) (default)</p>

<p style="margin-top: 1em">-u --disable-new-vr <br>
disable support for new VRs, convert to OB</p>

<p style="margin-top: 1em">deflate compression level (only
with --prefer-deflated):</p>

<p style="margin-top: 1em">+cl --compression-level [l]evel:
integer (default: 6) <br>
0=uncompressed, 1=fastest, 9=best compression</p>

<p style="margin-top: 1em">other network options:</p>

<p style="margin-top: 1em">-ta --acse-timeout [s]econds:
integer (default: 30) <br>
timeout for ACSE messages</p>

<p style="margin-top: 1em">-td --dimse-timeout [s]econds:
integer (default: unlimited) <br>
timeout for DIMSE messages</p>

<p style="margin-top: 1em">--max-associations [a]ssocs:
integer (default: 50) <br>
limit maximum number of parallel associations</p>

<p style="margin-top: 1em">--refuse <br>
refuse association</p>

<p style="margin-top: 1em">--reject <br>
reject association if no implementation class UID</p>

<p style="margin-top: 1em">--no-fail <br>
don&rsquo;t fail on an invalid query</p>

<p style="margin-top: 1em">--sleep-after [s]econds: integer
<br>
sleep s seconds after find (default: 0)</p>

<p style="margin-top: 1em">--sleep-during [s]econds:
integer <br>
sleep s seconds during find (default: 0)</p>

<p style="margin-top: 1em">-pdu --max-pdu [n]umber of
bytes: integer (4096..131072) <br>
set max receive pdu to n bytes (default: 16384)</p>

<p style="margin-top: 1em">-dhl --disable-host-lookup <br>
disable hostname lookup</p>

<p style="margin-top: 1em">NOTES <br>
The semantic impacts of the above mentioned options is clear
for the majority of options. Some particular options,
however, are so specific that they need detailed
descriptions <br>
which will be given in this passage.</p>

<p style="margin-top: 1em">The returned character set
options are intended for situations in which the wlmscpfs
application will return attribute values which are not
composed of characters from the DICOM <br>
default character repertoire. In such cases, for example
option --return-iso-ir-100 can be used to specify that a
response to a modality&rsquo;s worklist management C-FIND
request <br>
shall contain DICOM&rsquo;s Specific Character Set attribute
(0008,0005) with a corresponding value, indicating the
character repertoire from which the characters of returned
attribute <br>
values were taken (in this example the repertoire ISO IR
100). Please note that the wlmscpfs application will not
make sure that all returned values are actually made up of
this <br>
character repertoire; the application expects this to be the
case.</p>

<p style="margin-top: 1em">In general, the Specific
Character Set attribute (0008,0005) will only be included in
the C-FIND response if it contains any attributes that are
affected by the character set, <br>
i.e. for value representations PN, LO, LT, SH, ST and
UT.</p>

<p style="margin-top: 1em">Please note that a C-FIND
request which is handled by this application may contain
DICOM&rsquo;s Specific Character Set attribute (0008,0005),
but this application will never use this <br>
attribute&rsquo;s value for matching. Besides, the question
if DICOM&rsquo;s Specific Character Set attribute
(0008,0005) will be contained in a C-FIND response which is
returned by this <br>
application is always determined by the returned character
set option which was specified when this application was
started.</p>

<p style="margin-top: 1em">The options --enable-file-reject
and --disable-file-reject can be used to enable or disable a
file rejection mechanism which makes sure only complete
worklist files will be used <br>
during the matching process. A worklist file is considered
to be complete if it contains all necessary type 1
information which the SCP might have to return to an SCU in
a C-FIND <br>
response message. Table K.6-1 in part 4 annex K of the DICOM
standard lists all corresponding type 1 attributes (see
column &rsquo;Return Key Type&rsquo;).</p>

<p style="margin-top: 1em">DICOM Conformance <br>
The wlmscpfs application supports the following SOP Classes
as an SCP:</p>

<p style="margin-top: 1em">VerificationSOPClass
1.2.840.10008.1.1 <br>
FINDModalityWorklistInformationModel
1.2.840.10008.5.1.4.31</p>

<p style="margin-top: 1em">The wlmscpfs application will
accept presentation contexts for all of the abovementioned
supported SOP Classes using any of the transfer
syntaxes:</p>


<p style="margin-top: 1em">LittleEndianImplicitTransferSyntax
1.2.840.10008.1.2 <br>
LittleEndianExplicitTransferSyntax 1.2.840.10008.1.2.1 <br>
BigEndianExplicitTransferSyntax 1.2.840.10008.1.2.2</p>

<p style="margin-top: 1em">The default behavior of the
wlmscpfs application is to prefer transfer syntaxes having
an explicit encoding over the default implicit transfer
syntax. If wlmscpfs is running on <br>
big-endian hardware it will prefer BigEndianExplicit to
LittleEndianExplicit transfer syntax (and vice versa). This
behavior can be changed with the --prefer options (see
above).</p>

<p style="margin-top: 1em">If compiled with zlib support
enabled (see --version output) and if option
--prefer-deflated is used, also the following transfer
syntax is accepted.</p>


<p style="margin-top: 1em">DeflatedExplicitVRLittleEndianTransferSyntax
1.2.840.10008.1.2.1.99</p>

<p style="margin-top: 1em">The wlmscpfs application does
not support extended negotiation.</p>

<p style="margin-top: 1em">Currently, the wlmscpfs
application supports the following attributes as matching
keys:</p>

<p style="margin-top: 1em">(0008,0050) AccessionNumber <br>
(0008,0090) ReferringPhysicianName <br>
(0010,0010) PatientName <br>
(0010,0020) PatientID <br>
(0010,0030) PatientBirthDate <br>
(0010,0040) PatientSex <br>
(0010,2297) Responsible Person <br>
(0010,2298) Responsible Person Role <br>
(0032,1032) RequestingPhysician <br>
(0038,0010) AdmissionID <br>
(0040,0100) ScheduledProcedureStepSequence <br>
(0008,0060) &gt; Modality <br>
(0040,0001) &gt; ScheduledStationAETitle <br>
(0040,0002) &gt; ScheduledProcedureStepStartDate <br>
(0040,0003) &gt; ScheduledProcedureStepStartTime <br>
(0040,0006) &gt; ScheduledPerformingPhysicianName <br>
(0040,1001) RequestedProcedureID <br>
(0040,1003) RequestedProcedurePriority</p>

<p style="margin-top: 1em">As return keys the following
attributes are currently supported by wlmscpfs:</p>

<p style="margin-top: 1em">(0008,0020) StudyDate <br>
(0008,0030) StudyTime <br>
(0008,0050) AccessionNumber <br>
(0008,0080) InstitutionName <br>
(0008,0081) InstitutionAddress <br>
(0008,0090) ReferringPhysicianName <br>
(0008,1080) AdmittingDiagnosesDescription <br>
(0008,1110) ReferencedStudySequence <br>
(0008,1150) &gt; ReferencedSOPClassUID <br>
(0008,1155) &gt; ReferencedSOPInstanceUID <br>
(0008,1120) ReferencedPatientSequence <br>
(0008,1150) &gt; ReferencedSOPClassUID <br>
(0008,1155) &gt; ReferencedSOPInstanceUID <br>
(0010,0010) PatientName <br>
(0010,0020) PatientID <br>
(0010,0021) IssuerOfPatientID <br>
(0010,0030) PatientBirthDate <br>
(0010,0040) PatientSex <br>
(0010,1000) OtherPatientIDs <br>
(0010,1001) OtherPatientNames <br>
(0010,1020) PatientSize <br>
(0010,1030) PatientWeight <br>
(0010,1040) PatientAddress <br>
(0010,1080) MilitaryRank <br>
(0010,2000) MedicalAlerts <br>
(0010,2110) ContrastAllergies <br>
(0010,2160) EthnicGroup <br>
(0010,21a0) SmokingStatus <br>
(0010,21b0) AdditionalPatientHistory <br>
(0010,21c0) PregnancyStatus <br>
(0010,21d0) LastMenstrualDate <br>
(0010,2297) Responsible Person <br>
(0010,2298) Responsible Person Role <br>
(0010,4000) PatientComments <br>
(0020,000d) StudyInstanceUID <br>
(0032,1032) RequestingPhysician <br>
(0032,1033) RequestingService <br>
(0032,1060) RequestedProcedureDescription <br>
(0032,1064) RequestedProcedureCodeSequence <br>
(0008,0100) &gt; CodeValue <br>
(0008,0102) &gt; CodingSchemeDesignator <br>
(0008,0103) &gt; CodingSchemeVersion <br>
(0008,0104) &gt; CodeMeaning <br>
(0038,0010) AdmissionID <br>
(0038,0011) IssuerOfAdmissionID <br>
(0038,0050) SpecialNeeds <br>
(0038,0300) CurrentPatientLocation <br>
(0038,0500) PatientState <br>
(0040,0100) ScheduledProcedureStepSequence <br>
(0008,0060) &gt; Modality <br>
(0032,1070) &gt; RequestedContrastAgent <br>
(0040,0001) &gt; ScheduledStationAETitle <br>
(0040,0002) &gt; ScheduledProcedureStepStartDate <br>
(0040,0003) &gt; ScheduledProcedureStepStartTime <br>
(0040,0004) &gt; ScheduledProcedureStepEndDate <br>
(0040,0005) &gt; ScheduledProcedureStepEndTime <br>
(0040,0006) &gt; ScheduledPerformingPhysicianName <br>
(0040,0007) &gt; ScheduledProcedureStepDescription <br>
(0040,0008) &gt; ScheduledProtocolCodeSequence <br>
(0008,0100) &gt; &gt; CodeValue <br>
(0008,0102) &gt; &gt; CodingSchemeDesignator <br>
(0008,0103) &gt; &gt; CodingSchemeVersion <br>
(0008,0104) &gt; &gt; CodeMeaning <br>
(0040,0009) &gt; ScheduledProcedureStepID <br>
(0040,0010) &gt; ScheduledStationName <br>
(0040,0011) &gt; ScheduledProcedureStepLocation <br>
(0040,0012) &gt; PreMedication <br>
(0040,0020) &gt; ScheduledProcedureStepStatus <br>
(0040,0400) &gt; CommentsOnTheScheduledProcedureStep <br>
(0040,1001) RequestedProcedureID <br>
(0040,1002) ReasonForTheRequestedProcedure <br>
(0040,1003) RequestedProcedurePriority <br>
(0040,1004) PatientTransportArrangements <br>
(0040,1005) RequestedProcedureLocation <br>
(0040,1008) ConfidentialityCode <br>
(0040,1009) ReportingPriority <br>
(0040,1010) NamesOfIntendedRecipientsOfResults <br>
(0040,1400) RequestedProcedureComments <br>
(0040,2001) ReasonForTheImagingServiceRequest <br>
(0040,2004) IssueDateOfImagingServiceRequest <br>
(0040,2005) IssueTimeOfImagingServiceRequest <br>
(0040,2008) OrderEnteredBy <br>
(0040,2009) OrderEnterersLocation <br>
(0040,2010) OrderCallbackPhoneNumber <br>
(0040,2016) PlacerOrderNumberImagingServiceRequest <br>
(0040,2017) FillerOrderNumberImagingServiceRequest <br>
(0040,2400) ImagingServiceRequestComments <br>
(0040,3001)
ConfidentialityConstraintOnPatientDataDescription</p>

<p style="margin-top: 1em">The attribute (0008,0005)
SpecificCharacterSet is a special case and its support by
wlmscpfs is discussed in the NOTES section above.</p>

<p style="margin-top: 1em">Access Control <br>
When compiled on Unix platforms with TCP wrapper support,
host-based access control can be enabled with the
--access-control command line option. In this case the
access control <br>
rules defined in the system&rsquo;s host access control
tables for wlmscpfs are enforced. The default locations of
the host access control tables are /etc/hosts.allow and <br>
/etc/hosts.deny. Further details are described in
hosts_access(5).</p>

<p style="margin-top: 1em">LOGGING <br>
The level of logging output of the various command line
tools and underlying libraries can be specified by the user.
By default, only errors and warnings are written to the <br>
standard error stream. Using option --verbose also
informational messages like processing details are reported.
Option --debug can be used to get more details on the
internal <br>
activity, e.g. for debugging purposes. Other logging levels
can be selected using option --log-level. In --quiet mode
only fatal errors are reported. In such very severe error
<br>
events, the application will usually terminate. For more
details on the different logging levels, see documentation
of module &rsquo;oflog&rsquo;.</p>

<p style="margin-top: 1em">In case the logging output
should be written to file (optionally with logfile
rotation), to syslog (Unix) or the event log (Windows)
option --log-config can be used. This <br>
configuration file also allows for directing only certain
messages to a particular output stream and for filtering
certain messages based on the module or application where
they <br>
are generated. An example configuration file is provided in
&lt;etcdir&gt;/logger.cfg.</p>

<p style="margin-top: 1em">COMMAND LINE <br>
All command line tools use the following notation for
parameters: square brackets enclose optional values (0-1),
three trailing dots indicate that multiple values are
allowed <br>
(1-n), a combination of both means 0 to n values.</p>

<p style="margin-top: 1em">Command line options are
distinguished from parameters by a leading &rsquo;+&rsquo;
or &rsquo;-&rsquo; sign, respectively. Usually, order and
position of command line options are arbitrary (i.e. they
<br>
can appear anywhere). However, if options are mutually
exclusive the rightmost appearance is used. This behavior
conforms to the standard evaluation rules of common Unix
shells.</p>

<p style="margin-top: 1em">In addition, one or more command
files can be specified using an &rsquo;@&rsquo; sign as a
prefix to the filename (e.g. @command.txt). Such a command
argument is replaced by the content of <br>
the corresponding text file (multiple whitespaces are
treated as a single separator unless they appear between two
quotation marks) prior to any further evaluation. Please
note <br>
that a command file cannot contain another command file.
This simple but effective approach allows one to summarize
common combinations of options/parameters and avoids longish
<br>
and confusing command lines (an example is provided in file
&lt;datadir&gt;/dumppat.txt).</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
The wlmscpfs utility will attempt to load DICOM data
dictionaries specified in the DCMDICTPATH environment
variable. By default, i.e. if the DCMDICTPATH environment
variable is <br>
not set, the file &lt;datadir&gt;/dicom.dic will be loaded
unless the dictionary is built into the application (default
for Windows).</p>

<p style="margin-top: 1em">The default behavior should be
preferred and the DCMDICTPATH environment variable only used
when alternative data dictionaries are required. The
DCMDICTPATH environment variable <br>
has the same format as the Unix shell PATH variable in that
a colon (&rsquo;:&rsquo;) separates entries. On Windows
systems, a semicolon (&rsquo;;&rsquo;) is used as a
separator. The data dictionary <br>
code will attempt to load each file specified in the
DCMDICTPATH environment variable. It is an error if no data
dictionary can be loaded.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright (C) 1996-2014 by OFFIS e.V., Escherweg 2, 26121
Oldenburg, Germany.</p>

<p style="margin-top: 1em">Version 3.6.1 Tue Feb 16 2016
wlmscpfs(1)</p>
<hr>
</body>
</html>
