<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:11:23 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FvwmScript(1) Fvwm Modules FvwmScript(1)</p>

<p style="margin-top: 1em">NAME <br>
FvwmScript - module to build graphic user interface</p>

<p style="margin-top: 1em">SYNOPSIS <br>
FvwmScript must be spawned by Fvwm. It will not work from
the command line.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
FvwmScript is a module which allows you to build many
graphical applications such as desktop accessories, button
panel with pop up menus, modal dialogs... At the startup,
Fvwm&acirc; <br>
Script reads the file which is specified on the command
line. This file contains the script. This script is not
included in the configuration file of Fvwm.</p>

<p style="margin-top: 1em">An FvwmScript script is fully
controllable by using the keyboard. (Shift)-Tab circulates
around the widgets, Return simulates a mouse click, the
arrows move the cursor or change <br>
the values of the widget and Escape &quot;cancels&quot; for
Menu and PopupMenu.</p>

<p style="margin-top: 1em">INVOCATION <br>
FvwmScript can be invoked by inserting the line
&lsquo;Module FvwmScript name_of_script&rsquo; in the
.fvwm2rc file. The file &quot;name_of_script&quot; can start
with a slash, in which case, it&rsquo;s a <br>
fully qualified path, and the file is read. If
&quot;name_of_script&quot; does not start with a slash,
FvwmScript will look in a few different places. If the
.fvwm2rc contained the <br>
command line &lsquo;*FvwmScript: Path
path_of_the_script_directory&rsquo;, FvwmScript will try
that directory. If that doesn&rsquo;t work, FvwmScript tries
the system configuration directory <br>
and the user configuration directory as described under the
&quot;Read&quot; command in the fvwm man page.</p>

<p style="margin-top: 1em">The command to start FvwmScript
can be placed on a line by itself, if FvwmScript is to be
spawned during fvwm&rsquo;s initialization, or can be bound
to a menu or mouse button or key&acirc; <br>
stroke to invoke it later.</p>

<p style="margin-top: 1em">CONFIGURATION OPTIONS <br>
The following commands can be used in the config file (see
fvwm(1), section MODULE COMMANDS for details). They are used
only if the corresponding script commands are not used in
<br>
the script.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultFont font
<br>
Specifies the default font to be used. If not specified with
this command or in the script with the Font command, fixed
font is assumed.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultFore color
<br>
Specifies the default foreground color to be used. If not
specified with this command or in the script with the
ForeColor command, black is used.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultBack color
<br>
Specifies the default background color to be used. If not
specified with this command or in the script with the
BackColor command, grey85 is used.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultHilight
color <br>
Specifies the default hilight color to be used. If not
specified with this command or in the script with the
HilightColor command, grey100 is used.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultShadow color
<br>
Specifies the default shadow color to be used. If not
specified with this command or in the script with the
ShadowColor command, grey55 is used.</p>

<p style="margin-top: 1em">*FvwmScript: DefaultColorset
colorset <br>
Tells the module to use colorset colorset as the default
colorset.</p>

<p style="margin-top: 1em">ANATOMY OF A SCRIPT <br>
FvwmScript uses a particular programming language. A script
is composed of five parts. Heading contains general
characteristics of the window and default properties for all
wid&acirc; <br>
gets. The second part contains instructions whom are
executed at the startup of the script. The third part
contains periodic tasks which are executed every second. The
fourth <br>
part contains instructions which are executed at exit. And
the last part contains the description of widgets. A widget
consists of eleven types of items: text labels, single- <br>
line text inputs, radio buttons, checkbox, push buttons,
horizontal and vertical scrollbars, rectangles, pop up
menus, swallowexecs and mini scrollbars.</p>

<p style="margin-top: 1em">HEADING OF A SCRIPT <br>
The syntax is as follows:</p>

<p style="margin-top: 1em">WindowTitle string <br>
This option sets the window title.</p>

<p style="margin-top: 1em">WindowSize width height <br>
This option sets window size. width and height are numerical
value.</p>

<p style="margin-top: 1em">WindowPosition x y <br>
This option sets window position. x and y are numerical
value.</p>

<p style="margin-top: 1em">ForeColor {color} <br>
This option sets the default foreground color for all
widgets.</p>

<p style="margin-top: 1em">BackColor {color} <br>
This option sets the default background color for all
widgets.</p>

<p style="margin-top: 1em">HilightColor {color} <br>
This option sets the default hilight color for all
widgets.</p>

<p style="margin-top: 1em">ShadowColor {color} <br>
This option sets the default shadow color for all
widgets.</p>

<p style="margin-top: 1em">Colorset {n} <br>
This option sets the default colorset for all widgets.</p>

<p style="margin-top: 1em">Font {font} <br>
This option sets the default font for all widgets.</p>

<p style="margin-top: 1em">UseGettext [locale_path] <br>
Enable the use of the gettext mechanism which is used by the
WindowLocaleTitle, LocaleTitle, ChangeLocaleTitle
instructions and the Gettext function. If no argument is
<br>
given, the default FvwmScript locale catalog is used. This
catalog is under the locale fvwm installation directory and
the text domain is FvwmScript (install_pre&acirc; <br>
fix/share/locale/*/LC_MESSAGES/FvwmScript.mo). You can reset
this catalog or add some catalogs exactly in the same way
than with the LocalePath fvwm command (see the fvwm <br>
manual page). This instruction should be placed before the
WindowLocaleTitle instruction.</p>

<p style="margin-top: 1em">WindowLocaleTitle string <br>
This option sets the window title, but use the locale
catalog(s) defined with UseGettext.</p>

<p style="margin-top: 1em">INITIALISATION <br>
This part contains instructions which will be executed at
the startup. For example: <br>
Init <br>
Begin <br>
Do &quot;Exec cat tada.voc &gt; /dev/dsp&quot; <br>
WarpPointer 1 <br>
Set $ToDo=Restart <br>
End <br>
These instructions are used to play a sound, move the
pointer to widget 1 and to initialize $ToDo to
&quot;Restart&quot; at every startup.</p>

<p style="margin-top: 1em">PERIODIC TASKS <br>
This part of the script contains instructions that are
executed every second. For example: <br>
PeriodicTasks <br>
Begin <br>
If (RemainderOfDiv (GetTime) 10)==0 Then <br>
Do {Exec xcalc} <br>
End <br>
This example shows how to launch xcalc every 10 seconds.</p>

<p style="margin-top: 1em">THE QUIT FUNCTION <br>
This part of the script contains instructions that are
executed when the script exits (after the Quit instruction
or if you close the window with the Close, Delete or Destroy
<br>
fvwm command). For Example <br>
QuitFunc <br>
Begin <br>
Do {Echo bye, bye} <br>
End <br>
Be aware that if you used the KillModule fvwm command to
close the script, some instructions or functions which rely
on the existence of a communication link between the script
<br>
and fvwm will not be executed (for example the Do command).
To smoothly kill a script with an fvwm command see the
COMMANDS section.</p>

<p style="margin-top: 1em">MAIN OF A SCRIPT <br>
The second part of the script contains the description for
every widget in the script. Each widget description has two
parts. The first part describes initial properties, the <br>
second part contains instructions that are executed when the
widget receives messages. All widgets can send and receive
messages. All messages are identified by a number. The <br>
message &quot;UserAction&quot; is sent to a widget when the
user operates the widget. The syntax for the first part is:
<br>
Widget id # A number between 1 and 999 inclusive <br>
Property <br>
Type string <br>
Size width height <br>
Position x y <br>
Title { string } <br>
Value int <br>
MaxValue int <br>
MinValue int <br>
Font string <br>
ForeColor { color } <br>
BackColor { color } <br>
HilightColor { color } <br>
ShadowColor { color } <br>
Colorset int <br>
Flags flagsOpt <br>
The flagsOpt option to Flags is a space separated list
containing one or more of the keywords Hidden,
NoReliefString, NoFocus, Left / Center / Right. Hidden is
used to spec&acirc; <br>
ify if the widget is hidden at startup. NoReliefString
specifies if strings are drawn with relief or not. NoFocus
specifies if the widget can get the keyboard focus or not.
By <br>
default all widgets take focus, except Rectangle, HDipstick
and VDipstick which cannot. Moreover, the NoFocus widgets
are skipped when you circulate around the widgets with the
<br>
(Shift-)Tab short cut. Left / Center / Right specifies the
text position. These apply only to ItemDraw, List, Menu,
PopupMenu and PushButton. The default is Center for ItemDraw
<br>
and PushButton and Left for the other widgets.</p>

<p style="margin-top: 1em">LocaleTitle can be used in place
of Title, for using the locale catalog(s) defined with
UseGettext.</p>

<p style="margin-top: 1em">The position of every widget
must be specified.</p>

<p style="margin-top: 1em">The syntax for the second part
is: <br>
Main <br>
Case message of <br>
SingleClic: <br>
Begin <br>
# list of instructions which will be <br>
# executed when widget receives <br>
# message &quot;SingleClic&quot;. This message is <br>
# generated by the user. <br>
End <br>
1 : <br>
Begin <br>
# list of instructions which will be <br>
# executed when widget receives <br>
# message 1 <br>
End <br>
End</p>

<p style="margin-top: 1em">LIST OF WIDGETS <br>
There is fifteen types of widgets.</p>

<p style="margin-top: 1em">CheckBox: Display check box with
a string.</p>

<p style="margin-top: 1em">Title: title of the check
box.</p>

<p style="margin-top: 1em">Value: if Value is equal to 1,
the box is checked else it is not.</p>

<p style="margin-top: 1em">The Size property is
ignored.</p>

<p style="margin-top: 1em">HDipstick: Display a horizontal
dipstick. <br>
This widget can be used to display disk usage.</p>

<p style="margin-top: 1em">Value: specify the current value
of the dipstick.</p>

<p style="margin-top: 1em">MinValue: specify the minimum
value of the dipstick.</p>

<p style="margin-top: 1em">MaxValue: specify the maximum
value of the dipstick.</p>

<p style="margin-top: 1em">A minimum size of 30x11 is
imposed.</p>

<p style="margin-top: 1em">HScrollBar: Display an
horizontal scrollbar.</p>

<p style="margin-top: 1em">Value: position of the
thumb.</p>

<p style="margin-top: 1em">MaxValue: upper limit of
Value.</p>

<p style="margin-top: 1em">MinValue: lower limit of
Value.</p>

<p style="margin-top: 1em">The height property is ignored
and a minimum width is imposed. The width should be at least
the range plus 37 if all values are to be selectable e.g. a
min of 0 and max <br>
of 10 has a range of 11 and therefore should have a minimum
width of 48.</p>

<p style="margin-top: 1em">ItemDraw: Display an icon and/or
a string.</p>

<p style="margin-top: 1em">Title: string to display.</p>

<p style="margin-top: 1em">Icon: icon to display.</p>

<p style="margin-top: 1em">MaxValue: x coordinate of the
cursor.</p>

<p style="margin-top: 1em">MinValue: y coordinate of the
cursor.</p>

<p style="margin-top: 1em">The size is made large enough to
contain the title and/or the icon.</p>

<p style="margin-top: 1em">List: Display a list. <br>
List lets user to choose between various options.</p>

<p style="margin-top: 1em">Value: specify which option is
selected.</p>

<p style="margin-top: 1em">MinValue: First visible
option.</p>

<p style="margin-top: 1em">Title: title contains options
displayed in the list. The syntax is the following: {Option
1|Option 2|...|Option N}. All menus are displayed at the top
of window.</p>

<p style="margin-top: 1em">A minimum height of three items
is imposed and the width is made to be at least 108.</p>

<p style="margin-top: 1em">Menu: Display a menu whom lets
user to choose a option. <br>
Items of type Menu are layed out from left to right along
the top of the window. The size and position properties are
ignored.</p>

<p style="margin-top: 1em">Value: specify which option is
selected.</p>

<p style="margin-top: 1em">Title: title contains options
displayed in the menu. The syntax is the following: {Option
1|Option 2|...|Option N}.</p>

<p style="margin-top: 1em">MiniScroll: Display a very small
vertical scrollbar.</p>

<p style="margin-top: 1em">Value: position of the
thumb.</p>

<p style="margin-top: 1em">MaxValue: upper limit of
Value.</p>

<p style="margin-top: 1em">MinValue: lower limit of
Value.</p>

<p style="margin-top: 1em">The size is set to 19x34.</p>

<p style="margin-top: 1em">PopupMenu: Display a pop up
menu.</p>

<p style="margin-top: 1em">Value: specify what option is
selected.</p>

<p style="margin-top: 1em">Title: the title has the
following syntax: {Option 1|Option 2|...|Option
N}.&quot;Option 1|Option 2|...|Option N&quot; is the pop up
menu which is displayed when pressing mouse but&acirc; <br>
ton.</p>

<p style="margin-top: 1em">The size property is
ignored.</p>

<p style="margin-top: 1em">PushButton: Display push button
with an icon and/or a string.</p>

<p style="margin-top: 1em">Title: this string has the
following syntax {Title of the button|Option 1|Option
2|Option3|...|Option N}. &quot;Option 1|Option 2|...|Option
N&quot; is the pop up menu which is dis&acirc; <br>
played when pressing the right button.</p>

<p style="margin-top: 1em">Icon: icon to display.</p>

<p style="margin-top: 1em">The button is made large enough
to fit the icon and or label.</p>

<p style="margin-top: 1em">RadioButton: Display radio
button with a string.</p>

<p style="margin-top: 1em">Title: title of the radio
button.</p>

<p style="margin-top: 1em">Value: if Value is equal to 1,
the box is checked else it is not.</p>

<p style="margin-top: 1em">The size property is ignored</p>

<p style="margin-top: 1em">Rectangle: Display a rectangle.
<br>
This type of widget can be used to decorate window.</p>

<p style="margin-top: 1em">SwallowExec <br>
This type of widget causes FvwmScript to spawn an process,
and capture the first window whose name or resource is equal
to Title, and display it in the script window.</p>

<p style="margin-top: 1em">Title: specify the window name
which be captured and displayed in the script window.</p>

<p style="margin-top: 1em">SwallowExec: specify the command
line to execute to spawn the process. Modules can also be
swallowed.</p>

<p style="margin-top: 1em">Value: specify the looking of
the border. Possible value: -1, 0, 1.</p>

<p style="margin-top: 1em">The size is made to be at least
30x30</p>

<p style="margin-top: 1em">TextField: Display a text input
field. <br>
The text input field can be used to edit a single-line
string.</p>

<p style="margin-top: 1em">Title: content of text
field.</p>

<p style="margin-top: 1em">Value: position of the insert
point.</p>

<p style="margin-top: 1em">MinValue: position of the end of
the selection.</p>

<p style="margin-top: 1em">MaxValue: first visible
character of the title</p>

<p style="margin-top: 1em">The height property is ignored,
the width is made to be at least 40 pixels wider than the
initial contents.</p>

<p style="margin-top: 1em">VDipstick: Display a vertical
dipstick.</p>

<p style="margin-top: 1em">Value: specify the current value
of the dipstick.</p>

<p style="margin-top: 1em">MinValue: specify the minimum
value of the dipstick.</p>

<p style="margin-top: 1em">MaxValue: specify the maximum
value of the dipstick.</p>

<p style="margin-top: 1em">The size is made to be at least
11x30.</p>

<p style="margin-top: 1em">VScrollBar: Display a vertical
scrollbar.</p>

<p style="margin-top: 1em">Value: position of the
thumb.</p>

<p style="margin-top: 1em">MaxValue: upper limit of
Value.</p>

<p style="margin-top: 1em">MinValue: lower limit of
Value.</p>

<p style="margin-top: 1em">The width property is ignored
and a minimum height is imposed. The height should be at
least the range plus 37 if all values are to be selectable
e.g. a min of 0 and max <br>
of 10 has a range of 11 and therefore should have a minimum
height of 48.</p>

<p style="margin-top: 1em">INSTRUCTIONS <br>
Here is the description of all instructions.</p>

<p style="margin-top: 1em">HideWidget id : hide the widget
numbered id.</p>

<p style="margin-top: 1em">ShowWidget id: show the widget
numbered id.</p>

<p style="margin-top: 1em">ChangeValue id1 id2 <br>
Set the value of the widget numbered id1 to id2.</p>

<p style="margin-top: 1em">ChangeMaxValue id1 id2 <br>
Set the maximum value of the widget numbered id1 to id2.</p>

<p style="margin-top: 1em">ChangeMinValue id1 id2 <br>
Set the minimum value of the widget numbered id1 to id2.</p>

<p style="margin-top: 1em">ChangeTitle id1 id2 <br>
Set the title of the widget numbered id1 to id2.</p>

<p style="margin-top: 1em">ChangeWindowTitle string <br>
Set the title of the window to string.</p>

<p style="margin-top: 1em">ChangeWindowTitleFromArg numarg
<br>
Set the title of the window to the value of the numarg-th
script argument.</p>

<p style="margin-top: 1em">ChangeLocaleTitle id1 id2 <br>
As ChangeTitle but use the locale catalog(s) defined with
UseGettext.</p>

<p style="margin-top: 1em">ChangeIcon id1 id2 <br>
Set the icon of the widget numbered id1 to id2.</p>

<p style="margin-top: 1em">ChangeForeColor id1 {color} <br>
Set the foreground color of the widget numbered id1 to
{color}.</p>

<p style="margin-top: 1em">ChangeBackColor id1 {color} <br>
Set the background color of the widget numbered id1 to
{color}.</p>

<p style="margin-top: 1em">ChangeColorSet id1 id2 <br>
Set the colorset of the widget numbered id1 to id2.
Specifying widget 0 sets the main window colorset.</p>

<p style="margin-top: 1em">ChangePosition id1 x y <br>
Move the widget numbered id1 to position (x,y).</p>

<p style="margin-top: 1em">ChangeSize id1 width height <br>
Set the size of the widget numbered id1 to
(width,height).</p>

<p style="margin-top: 1em">ChangeFont id1 newfont <br>
Set the font of the widget numbered id1 to newfont.</p>

<p style="margin-top: 1em">WarpPointer id <br>
Warp the mouse pointer into the widget numbered id.</p>

<p style="margin-top: 1em">WriteToFile filename {str1}
{str2} etc <br>
Write to the file filename the string which is the
concatenation of all arguments str1, str2, etc.</p>

<p style="margin-top: 1em">Do {command args} <br>
Execute the fvwm command inside the Do block. Any fvwm
command as described in the fvwm2 man page can be used.
Commands are sent from this module to the fvwm main
pro&acirc; <br>
gram for processing. The length of the command and arguments
can not exceed 988 characters.</p>

<p style="margin-top: 1em">Set $var={str1} {str2} etc <br>
Concatenate all arguments to a string and set the variable
$var to this string.</p>

<p style="margin-top: 1em">Quit: quit the program.</p>

<p style="margin-top: 1em">SendSignal id1 id2 <br>
Send a message numbered id2 to widget id1.</p>

<p style="margin-top: 1em">SendToScript id_script {str11}
{str2} etc <br>
Send a message to the script identified by id_script. The
message is the concatenation of str1, str2...</p>

<p style="margin-top: 1em">Key Keyname Modifier id sig str1
str2 etc <br>
Binds a keyboard key to the instruction</p>

<p style="margin-top: 1em">SendSignal id sig</p>

<p style="margin-top: 1em">and sets the &quot;last
string&quot; to the concatenation of str1, str2... (see the
LastString function). The Keyname and Modifiers fields are
defined as in the fvwm Key command.</p>

<p style="margin-top: 1em">ARGUMENTS <br>
Most of commands use arguments. There are two kinds of
arguments: numbers and strings. A numerical argument is a
value which is between -32000 and +32000. A string is always
<br>
surrounded with braces. Variables always begin with the
character &quot;$&quot; and can contain both numbers and
strings.</p>

<p style="margin-top: 1em">FUNCTIONS <br>
All functions use arguments. Functions can return both a
string and a number. The syntax is: <br>
(function argument1 argument2 etc) <br>
Here is the complete list of arguments:</p>

<p style="margin-top: 1em">(GetTitle id) <br>
Return the title of the widget numbered id.</p>

<p style="margin-top: 1em">(GetValue id) <br>
Return the current value of the widget numbered id.</p>

<p style="margin-top: 1em">(GetMinValue id) <br>
Return the current Min value of the widget numbered id.</p>

<p style="margin-top: 1em">(GetMaxValue id) <br>
Return the current Max value of the widget numbered id.</p>

<p style="margin-top: 1em">(GetFore id) <br>
Return the current RGB foreground value of the widget
numbered id in the hex format RRGGBB.</p>

<p style="margin-top: 1em">(GetBack id) <br>
Return the current RGB background value of the widget
numbered id in the hex format RRGGBB.</p>

<p style="margin-top: 1em">(GetHilight id) <br>
Return the current RGB hilight value of the widget numbered
id in the hex format RRGGBB.</p>

<p style="margin-top: 1em">(GetShadow id) <br>
Return the current RGB shadow value of the widget numbered
id in the hex format RRGGBB.</p>

<p style="margin-top: 1em">(GetOutput {str} int1 int2) <br>
Executes the command str, gets the standard output and
returns the word which is in the line int1 and in the
position int2. If int2 is equal to -1, GetOutput returns the
<br>
complete line.</p>

<p style="margin-top: 1em">(NumToHex int) <br>
Return the hexadecimal value of int.</p>

<p style="margin-top: 1em">(HexToNum {str}) <br>
Return the decimal value of str, str must be an hexadecimal
value.</p>

<p style="margin-top: 1em">(Add int1 int2) <br>
Return the result of (int1+int2).</p>

<p style="margin-top: 1em">(Mult int1 int2) <br>
Return the result of (int1*int2).</p>

<p style="margin-top: 1em">(Div int1 int2) <br>
Return the result of (int1/int2).</p>

<p style="margin-top: 1em">(StrCopy {str} int1 int2) <br>
Return the string whom is between position int1 and int2.
For example, (StrCopy {Hello} 1 2) returns {He}</p>

<p style="margin-top: 1em">(LaunchScript {str}) <br>
This function launches the script named str and returns an
identification number. This number is necessary to use the
functions SendToScript and ReceiveFromScript. The <br>
string str contains the script name and some arguments.</p>

<p style="margin-top: 1em">(GetScriptArgument {int}) <br>
This function returns the argument script used in the
function LaunchScript. If int is equal to zero,
GetScriptArgument returns the name of the script.</p>

<p style="margin-top: 1em">(GetScriptFather) <br>
This function returns the identification number of the
script father.</p>

<p style="margin-top: 1em">(ReceivFromScript {int}) <br>
This function returns the message sent by the script
numbered int.</p>

<p style="margin-top: 1em">(RemainderOfDiv {int1 int2}): t
<br>
This function returns the remainder of the division
(int1/int2).</p>

<p style="margin-top: 1em">(GetTime) <br>
This function returns the time in seconds.</p>

<p style="margin-top: 1em">(GetPid) <br>
This function returns the process id of the script.</p>

<p style="margin-top: 1em">(Gettext {str}) <br>
This function return the translation of str by using the
locale catalog(s) defined with UseGettext.</p>

<p style="margin-top: 1em">(SendMsgAndGet {comId} {cmd}
bool) <br>
Sends the command cmd with identifier comId to an external
program ready to communicate with the script using a
protocol specific to FvwmScript. If bool is 0 FvwmScript
<br>
does not wait for an answer from the external program. In
this case the returned value is 1 if the message can be sent
to the external program and 0 if this is not the <br>
case. If bool is 1, then FvwmScript waits for an answer from
the external program and the return value is this answer (a
line of no more than 32000 characters). If the <br>
communication fails, the returned value is 0. See the
section A COMMUNICATION PROTOCOL for a description of the
communication protocol used.</p>

<p style="margin-top: 1em">(Parse {str} int) <br>
where str must be a string of the form: <br>
X1S1X2S2X3S3...SnXn <br>
where the Xn are numbers containing four decimal digits and
where Sn are strings of length exactly Xn. The returned
value is the string Sint. If int is out of range <br>
(e.g., &gt;n) the returned value is the empty string. If str
is not of the specified form, the return value is
unpredictable (but empty in the average). This function is
use&acirc; <br>
ful to handle strings returned by the SendMsgAndGet
function.</p>

<p style="margin-top: 1em">(LastString) <br>
This function returns the &quot;current working string&quot;
for the Key instruction and the SendString command (see the
COMMANDS section). At startup this string is empty, but when
<br>
a Key binding is detected (respectively, a SendString
command is received), then this string is set to the string
associated to the instruction (respectively, to the
com&acirc; <br>
mand).</p>

<p style="margin-top: 1em">CONDITIONAL LOOPS <br>
There are three kinds of conditional loops. The instruction
&quot;If-Then-Else&quot; has the following syntax: <br>
If $ToDo=={Open xcalc} Then <br>
Do {Exec xcalc &amp;} # List of instructions <br>
Else <br>
Begin <br>
Do {Exec killall xcalc &amp;} # List of instructions <br>
Do {Exec echo xcalc killed &gt; /dev/console} <br>
End <br>
The second part &quot;Else-Begin-End&quot; is optional. If
the loop contains only one instruction, Begin and End can be
omitted. The instruction &quot;While-Do&quot; has the
following syntax: <br>
While $i&lt;5 Do <br>
Begin <br>
Set $i=(Add i 1) # List of instructions <br>
End <br>
Two strings can be compared with &quot;==&quot; and two
numbers can be compared with &quot;&lt;&quot;,
&quot;&lt;=&quot;, &quot;==&quot;, &quot;&gt;=&quot;,
&quot;&gt;&quot;. The loop &quot;For-Do-Begin-End&quot; has
the following syntax: <br>
For $i=1 To 20 Do <br>
Begin <br>
Do {Exec xcalc &amp;} # List of instructions <br>
End</p>

<p style="margin-top: 1em">COMMANDS <br>
The following fvwm command may be executed at any time</p>

<p style="margin-top: 1em">SendToModule ScriptName
SendString id sig str</p>

<p style="margin-top: 1em">it sends to any module with
alias or name which matches ScriptName the string</p>

<p style="margin-top: 1em">SendString id sig str</p>

<p style="margin-top: 1em">When an FvwmScript receives such
a message it sends to the Widget id the signal numbered sig
and the string str can be obtained with the LastString
function. Let us give an exam&acirc; <br>
ple. Say that you have a script MyScript with the widget:
<br>
Widget 50 <br>
Property <br>
Type PushButton <br>
Title {Quit} <br>
... <br>
Main <br>
Case message of</p>

<p style="margin-top: 1em">SingleClic: <br>
Begin <br>
Quit <br>
End</p>

<p style="margin-top: 1em">1 : <br>
Begin <br>
Set $str = (LastString) <br>
If $str == {Quit} Then <br>
Quit <br>
Else <br>
ChangeTitle 33 $str <br>
End</p>

<p style="margin-top: 1em">End <br>
Then the command <br>
SendToModule MyScript SendString 50 1 str <br>
forces MyScript to exit if str is equal to &quot;Quit&quot;
and if not it changes the title of Widget 33 to str.</p>

<p style="margin-top: 1em">This command can be used to
change the window title</p>

<p style="margin-top: 1em">SendToModule ScriptName
ChangeWindowTitle newTitle [oldTitle]</p>

<p style="margin-top: 1em">it causes that any module with
alias or name which matches ScriptName changes its
associated window title to newTitle. The optional argument
oldTitle makes sense when there are <br>
several instances of the same script. It permits one to
avoid changing the name of all these instances by specifying
the name of the window associated to the target script (see
<br>
the example below).</p>

<p style="margin-top: 1em">+ I Module FvwmScript
FvwmStorageSend &quot;/dev/hda6&quot; <br>
+ I Wait FvwmStorageSend <br>
+ I SendToModule FvwmStorageSend ChangeWindowTitle HDA6 <br>
+ I Module FvwmScript FvwmStorageSend &quot;/dev/hda1&quot;
<br>
+ I Wait FvwmStorageSend <br>
+ I SendToModule FvwmStorageSend ChangeWindowTitle HDA1
FvwmStorageSend</p>

<p style="margin-top: 1em">Without the FvwmStorageSend
argument in the last case, the SendToModule command would
have changed to HDA1 the name of both instances of
FvwmStorageSend.</p>

<p style="margin-top: 1em">EXAMPLES <br>
You will find examples of scripts in the fvwm configuration
directory.</p>

<p style="margin-top: 1em">FvwmScript-BellSetup,
FvwmScript-KeyboardSetup, FvwmScript-PointerSetup and
FvwmScript-ScreenSetup are a set of scripts that modify X
settings. These scripts save preferences <br>
into a file named ~/.xinit-fvwmrc (If you want to use
another file name, give it as the first argument of the
script). If you want to load these preferences at every
startup, <br>
you have to include the line &quot;.xinit-fvwmrc&quot; in
your .xinitrc (or .xsession) file before starting fvwm.</p>

<p style="margin-top: 1em">FvwmScript-BaseConfig modifies
fvwm focus and paging mouse policy, window placement,
opacity and other features of the move and resize commands,
snap attraction and shading ani&acirc; <br>
mation. This script saves preferences into a file named
.FvwmBaseConfig in the user&rsquo;s data directory (i.e.,
$HOME/.fvwm or $FVWM_USERDIR if set). If you want to load
these <br>
preferences at every startup you must add the line
&quot;Read .FvwmBaseConfig&quot; in your fvwm configuration
file. If you want to use another file name, give it as the
first argument of <br>
the script. When you click on Ok or Apply an fvwm function
that you may define named BaseConfigOkFunc or
BaseConfigApplyFunc is called. This allows for reloading
specific <br>
application styles that the script has destroyed (e.g.,
AddToFunc BaseConfigOkFunc I Read MyAppStyle).</p>

<p style="margin-top: 1em">FvwmScript-Buttons is a buttons
panel which can replace FvwmButtons (this script supports
popup menus and requires xload, xclock, FvwmPager, TkDesk).
FvwmScript-Colorset allows <br>
you to edit your colorset. FvwmScript-Date allows you to set
date and time. FvwmScript-FileBrowser is a file browser used
by the other scripts. FvwmScript-Find is an elemen&acirc;
<br>
tary front-end to find. FvwmScript-Quit allows one to quit
fvwm, restart fvwm or some other window manager, or shut
down and reboot the computer. FvwmScript-ScreenDump is a
<br>
screen dumper. FvwmScript-WidgetDemo is a pure example
script. See the next section for FvwmScript-ComExample.</p>

<p style="margin-top: 1em">A COMMUNICATION PROTOCOL <br>
FvwmScript is a weak (but simple) programming language. If
you need to deal with a lot of data and/or you need to use
complex algorithms you should use an external program (in
<br>
perl for example) and &quot;send&quot; the desired
information to your FvwmScript script. The first approach is
to use the GetOutput function. This is simple but you should
rerun your <br>
external program each time you need information from it (and
this may cause performances problems). The second approach
is to use the SendMsgAndGet function which extends
Fvwm&acirc; <br>
Script by using any programming language which can deal with
named pipes (fifos). We describe this solution in this
section. (A third approach is to use fvwm-themes-com from
the <br>
fvwm-themes package, but in fact the SendMsgAndGet method is
an implementation of fvwm-themes-com inside FvwmScript and
this gives better performance).</p>

<p style="margin-top: 1em">Basically, you start an
&quot;external&quot; program (the program for short) from
your FvwmScript script (the script for short). This program
runs in the background and you use the SendMs&acirc; <br>
gAndGet function in your script to ask questions or to give
instructions to the program. The program must strictly
respect a certain communication protocol. First of all there
<br>
is an identifier comId for the communication, it should
contain the process id of the script for a good
implementation of the protocol (use the GetPid function and
pass the comId <br>
via an option to the program). The protocol uses two fifos,
in the fvwm user directory, named: .tmp-com-in-comId and
.tmp-com-out-comId. The program should create and listen on
<br>
the .tmp-com-in-comId fifo. Then, when FvwmScript executes a
function of the form:</p>

<p style="margin-top: 1em">Set $answer = (SendMsgAndGet
{comId} {cmd} bool)</p>

<p style="margin-top: 1em">FvwmScript writes the cmd on
this fifo. This way the program can read the cmd and can
execute the appropriate action (it should remove the in fifo
to support multi-communica&acirc; <br>
tions). If bool is 0, FvwmScript does not wait for an answer
from the program and return 1 if the previous actions
succeed and 0 if they failed (then the program should
&quot;go back&quot; <br>
to the in fifo). If bool is 1, then FvwmScript waits (20
sec) for an answer from the program and in turn returns the
answer to the script (note that bool is not passed to the
<br>
program as it must know which commands need an answer). To
answer, the program creates the .tmp-com-out-comId fifo and
writes the answer on it. The program should wait until <br>
FvwmScript reads the answer and then it should remove the
out fifo and go back to the in fifo. The answer should
consist of one line of no more than 32000 characters (take a
look <br>
at the Parse function to handle multiple lines as one
line).</p>

<p style="margin-top: 1em">A simple way to understand this
protocol and to write scripts and programs that use it is to
take a look at the (not useful) example
FvwmScript-ComExample and fvwm-script-ComEx&acirc; <br>
ample.pl (that can found in the fvwm data directory).
Moreover, this implementation of the protocol solves
questions as: What to do if the script exits for a bad
reason? What to <br>
do if the program exits for a bad reason? ...etc.</p>

<p style="margin-top: 1em">BUGS <br>
FvwmScript crashes if widgets are accessed that have not
been defined.</p>

<p style="margin-top: 1em">AUTHOR <br>
Frederic Cordier (cordie97@cui.unige.ch or
f-cord96@univ-lyon1.fr).</p>

<p style="margin-top: 1em">CONTRIBUTOR <br>
Eddy J. Gurney (eddy@gizmo.aa.ans.net).</p>

<p style="margin-top: 1em">3rd Berkeley Distribution 06
November 2016 (2.6.7) FvwmScript(1)</p>
<hr>
</body>
</html>
