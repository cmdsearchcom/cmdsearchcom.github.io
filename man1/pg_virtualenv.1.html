<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:31:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PG_VIRTUALENV(1) Debian PostgreSQL infrastructure
PG_VIRTUALENV(1)</p>

<p style="margin-top: 1em">NAME <br>
pg_virtualenv - Create a throw-away PostgreSQL environment
for running regression tests</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pg_virtualenv [OPTIONS] [-v &rsquo;version ...&rsquo;]
[command]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
pg_virtualenv creates a virtual PostgreSQL server
environment, and sets environment variables such that
command can access the PostgreSQL database server(s). The
servers are <br>
destroyed when command exits.</p>

<p style="margin-top: 1em">The environment variables
PGHOST, PGDATABASE, PGUSER, and PGPASSWORD will be set. Per
default, a single new cluster is created, using the newest
PostgreSQL server version <br>
installed. The cluster will use the first available port
number starting from 5432, and PGPORT will be set.</p>

<p style="margin-top: 1em">When clusters for more than one
versions are created, they will differ in the port number
used, and PGPORT is not set. The clusters are named
version/regress. To access a <br>
cluster, set PGCLUSTER=version/regress. For ease of access,
the clusters are also registered in
/etc/postgresql-common/pg_service.conf, with the version
number as cluster name. <br>
Clusters can be accessed by passing the connection string
&quot;service=version&quot;, e.g. psql service=9.2.</p>

<p style="margin-top: 1em">When invoked as root, the
clusters are created in /etc/postgresql/ as usual; for other
users, PG_CLUSTER_CONF_ROOT and PGSYSCONFDIR are set to a
temporary directory where all <br>
files belonging to the clusters are created.</p>

<p style="margin-top: 1em">OPTIONS <br>
-a Use all PostgreSQL server versions installed.</p>

<p style="margin-top: 1em">-v version ... <br>
Use these versions (space-separated list).</p>

<p style="margin-top: 1em">-c pg_createcluster options <br>
Extra options to pass to pg_createcluster.</p>

<p style="margin-top: 1em">-i initdb options <br>
Extra initdb options to pass to pg_createcluster.</p>

<p style="margin-top: 1em">-o guc=value <br>
Configuration option to set in the postgresql.conf file,
passed to pg_createcluster.</p>

<p style="margin-top: 1em">-s Launch a shell inside the
virtual environment when command fails.</p>

<p style="margin-top: 1em">-t Install clusters in a
temporary directory, even when running as root.</p>

<p style="margin-top: 1em">-h Show program help.</p>

<p style="margin-top: 1em">EXAMPLE <br>
# pg_virtualenv make check</p>

<p style="margin-top: 1em">NOTES <br>
When run with fakeroot(1), pg_virtualenv will fall back to
the non-root mode of operation. Running &quot;fakeroot
pg_virtualenv&quot; as root will fail, though.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
PG_VIRTUALENV_NEWPID=yes <br>
When non-empty, pg_virtualenv will re-exec itself using
newpid(1).</p>

<p style="margin-top: 1em">PG_VIRTUALENV_UNSHARE=flags <br>
When non-empty, pg_virtualenv will re-exec itself using
unshare(1) using these flags.</p>

<p style="margin-top: 1em">PGPORT=n <br>
When set, the value is used for the (single) cluster
created.</p>

<p style="margin-top: 1em">SEE ALSO <br>
initdb(1), pg_createcluster(1).</p>

<p style="margin-top: 1em">AUTHOR <br>
Christoph Berg &lt;myon@debian.org&gt;</p>

<p style="margin-top: 1em">Debian 2017-01-24
PG_VIRTUALENV(1)</p>
<hr>
</body>
</html>
