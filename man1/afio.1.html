<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>AFIO(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AFIO(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">AFIO(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
afio - manipulate archives and files
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>...</b> | <b>afio -o</b> [ <i>options</i> ] archive : write (create) archive
<div>&#x00A0;</div>
<b>afio -i</b> [ <i>options</i> ] archive : install (unpack) archive
<div>&#x00A0;</div>
<b>afio -t</b> [ <i>options</i> ] archive : list table-of-contents of archive
<div>&#x00A0;</div>
<b>afio -r</b> [ <i>options</i> ] archive : verify archive against filesystem
<div>&#x00A0;</div>
<b>afio -p</b> [ <i>options</i> ] directory [ ... ] : copy files
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>Afio</i> manipulates groups of files, copying them within the (collective)
  filesystem or between the filesystem and an <i>afio</i> archive.
<div class="Pp"></div>
With <b>-o</b>, reads pathnames from the standard input and writes an
  <i>archive</i>.
<div class="Pp"></div>
With <b>-t</b>, reads an <i>archive</i> and writes a table-of-contents to the
  standard output.
<div class="Pp"></div>
With <b>-i</b>, installs the contents of an <i>archive</i> relative to the
  working directory.
<div class="Pp"></div>
With <b>-p</b>, reads pathnames from the standard input and copies the files to
  each <i>directory</i>. Cannot be combined with the <b>-Z</b> option.
<div class="Pp"></div>
With <b>-r</b>, reads <i>archive</i> and verifies it against the filesystem.
  This is useful for verifying tape archives, to ensure they have no bit errors.
  The verification compares file contents, but not permission bits and non-file
  filesystem entities, so it cannot be used as a reliable tool to detect every
  possible change made to a filesystem.
<div class="Pp"></div>
Creates missing directories as necessary, with permissions to match their
  parents.
<div class="Pp"></div>
Removes leading slashes from pathnames, making all paths relative to the current
  directory. This is a safety feature to prevent inadvertent overwriting of
  system files when doing restores. To suppress this safety feature, the
  <b>-A</b> option must be used while writing an archive, but also when reading
  (installing), verifying, and cataloging an existing archive.
<div class="Pp"></div>
Supports compression while archiving, with the <b>-Z</b> option. Will compress
  individual files in the archive, not the entire archive datastream, which
  makes <i>afio</i> compressed archives much more robust than
  <i>`tar&#x00A0;zc'</i> type archives.
<div class="Pp"></div>
Supports multi-volume archives during interactive operation (i.e., when
  <i>/dev/tty</i> is accessible and <i>SIGINT</i> is not being ignored).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-@ </b><i>address</i></dt>
  <dd class="It-tag">Send email to <i>address</i> when a volume change (tape
      change, floppy change) is needed, and also when the entire operation is
      complete. Uses <i>sendmail</i>(1) to send the mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">Preserve the last access times (atimes) of the files read
      when making or verifying an archive. <b>Warning:</b> if this option is
      used, <i>afio</i> will change the last inode changed times (ctimes) of
      these files. Thus, this option cannot be used together with an incremental
      backup scheme that relies on the ctimes being preserved.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b><i>&#x00A0;size</i></dt>
  <dd class="It-tag">Read or write <i>size</i>-character archive blocks.
      Suffices of <b>b</b>, <b>k</b>, <b>m</b> and <b>g</b> denote multiples of
      <i>512</i>, <i>kilobytes</i>, <i>megabytes</i> and <i>gigabytes</i>,
      respectively. Defaults to <i>5120</i> for compatibility with
      <i>cpio</i>(1). In some cases, notably when using <i>ftape</i> with some
      tape drives, <b>-b 10k</b> is needed for compatibility. Note that <b>-b
      10k</b> is the default block size used by <i>tar</i>(1), so it is usually
      a good choice if the tape setup is known to work with <i>tar</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b><i>&#x00A0;count</i></dt>
  <dd class="It-tag">Buffer <i>count</i> archive blocks between I/O operations.
      A large <i>count</i> is recommended for efficient use with streaming
      magnetic tape drives, in order to reduce the number of tape stops and
      restarts.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Don't create missing directories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b><i>&#x00A0;bound</i></dt>
  <dd class="It-tag">Pad the archive to a multiple of <i>bound</i> characters.
      Recognizes the same suffices as <b>-s</b>. Defaults to <i>1x</i> (the
      <b>-b</b> block size) for compatibility with <i>cpio</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">Spawn a child process to actually write to the archive;
      provides a clumsy form of double-buffering. Requires <b>-s</b> for
      multi-volume archive support.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">Change to input file directories. Avoids quadratic
      filesystem behavior with long similar pathnames. Requires all absolute
      pathnames, including those for the <b>-o</b> <i>archive</i> and the
      <b>-p</b> <i>directories</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Follow symbolic links, treating them as ordinary files and
      directories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b></dt>
  <dd class="It-tag">Don't generate sparse filesystem blocks on restoring files.
      By default, <i>afio</i> creates sparse filesystem blocks (with
      <i>lseek</i>(2)) when possible when restoring files from an archive, but
      not if these files were stored in a compressed form. Unless stored in a
      compressed form, sparse files are not archived efficiently: they will take
      space equal to the full file length. (The sparse file handling in
      <i>afio</i> does not make much sense except in a historical way.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag">Rather than complaining about unrecognizable input, skip
      unreadable data (or partial file contents) at the <i>beginning</i> of the
      archive file being read, and search for the next valid archive header.
      This option is needed to deal with certain types of backup media damage.
      It is also useful to support quick selective restores from multi-volume
      archives, or from searchable block devices, if the volume or location of
      the file to be restored is known in advance (see the <b>-B</b> option).
      If, for example, a selective restore is done with the fourth volume of a
      multi-volume afio archive, then the <b>-k</b> option needs to be used,
      else <i>afio</i> will complain about the input not being a well-formed
      archive.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">With <b>-o</b>, write file contents with each hard link.
    <div style="height: 1.00em;">&#x00A0;</div>
    With <b>-t</b>, report hard links.
    <div style="height: 1.00em;">&#x00A0;</div>
    With <b>-p</b>, attempt to link files rather than copying them.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag">Mark output files with a common current timestamp (rather
      than with input file modification times).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">Protect newer existing files (comparing file modification
      times).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b><i>&#x00A0;size</i></dt>
  <dd class="It-tag">Restrict each portion of a multi-volume archive to
      <i>size</i> characters. This option recognizes the same size suffices as
      <b>-b</b>. Also, the suffix <b>x</b> denotes a multiple of the <b>-b</b>
      block size (and must follow any <b>-b</b> specification). <i>size</i> can
      be a single size or a comma-seperated list of sizes, for example
      '2m,5m,8m', to specify different sizes for the subsequent volumes. If
      there are more volumes than sizes, the last specified size is used for all
      remaining volumes. If this option is used, the special character sequences
      <b>%V</b> and <b>%S</b> in the input/output filename or command string are
      replaced by the current volume number and volume size. Use <b>%%</b> to
      produce a single % character. The <b>-s</b> option is useful with
      finite-length devices which do not return short counts at end of media
      (sigh); output to magnetic tape typically falls into this category. When
      an archive is being read or written, using <b>-s</b> causes <i>afio</i> to
      prompt for the next volume if the specified volume length is reached. The
      <b>-s</b> option will also cause <i>afio</i> to prompt if there is a
      premature EOF while reading the input. The special case <b>-s 0</b> will
      activate this prompting for the next volume on premature EOF without
      setting a volume length. When writing an archive, <i>afio</i> will prompt
      for the next volume on end-of-media, even without <b>-s 0</b> being
      supplied, if the device is capable of reporting end-of-media. If the
      volume <i>size</i> specified is not a multiple of the block size set with
      the <b>-b</b> option, then <i>afio(1)</i> will silently round down the
      volume size to the nearest multiple of the block size. This rounding down
      can be suppressed using the <b>-9</b> option: if <b>-9</b> is used,
      <i>afio(1)</i> will write a small block of data, smaller than the
      <b>-b</b> size, at the end of the volume to completely fill it to the
      specified size. Some devices are not able to handle such small block
      writes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">Report files with unseen links.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Verbose. Report pathnames (to stderr) as they are
      processed. When used with <b>-t</b>, gives an <i>ls -l</i> style report
      (including link information) to stdout instead. When used twice
      (<b>-vv</b>) with <b>-o</b>, gives an <i>ls -l</i> style report to stdout
      while writing the archive. (But this use of <b>-vv</b> will not work if
      the archive is also being written to stdout.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b><i>&#x00A0;filename</i></dt>
  <dd class="It-tag">Treats each line in <i>filename</i> as an <b>-y</b>
      pattern, see <b>-y</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Retain file ownership and setuid/setgid permissions. This
      is the default for the super-user; he may use <b>-X</b> to override
    it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y</b><i>&#x00A0;pattern</i></dt>
  <dd class="It-tag">Restrict processing of files to names matching shell
      wildcard pattern <i>pattern</i>. Use this flag once for each pattern to be
      recognized. With the possible exception of the presence of a leading
      slash, the complete file name as appearing in the archive
      table-of-contents must match the pattern, for example the file name
      'etc/passwd' is matched by the pattern '*passwd' but NOT by the pattern
      'passwd'. See <b>`man 7 glob'</b> for more information on shell wildcard
      pattern matching. The only difference with shell wildcard pattern matching
      is that in <i>afio</i> the wildcards will also match '/' characters in
      file names. For example the pattern '/usr/src/*' will match the file name
      '/usr/src/linux/Makefile', and any other file name starting with
      '/usr/src'. Unless the <b>-S</b> option is given, any leading slash in the
      pattern or the filename is ignored when matching, e.g. <i>/etc/passwd</i>
      will match <i>etc/passwd</i>. Use <b>-Y</b> to supply patterns which are
      <i>not</i> to be processed. <b>-Y</b> overrides <b>-y</b> if a filename
      matches both. See also <b>-w&#x00A0;</b>and&#x00A0;<b>-W</b>. See also the
      <b>-7</b> option, which can be used to modify the meaning of <b>-y</b>,
      <b>-Y</b>, <b>-w</b>, and <b>-W</b> when literal matching without wildcard
      processing is needed. <b>Note:</b> if <i>afio</i> was compiled without
      using the GNU fnmatch library, then the full shell wildcard pattern syntax
      cannot be used, and matching support is limited to patterns which are a
      full literal file name and patterns which end in '*'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b></dt>
  <dd class="It-tag">Print execution statistics. This is meant for human
      consumption; use by other programs is officially discouraged.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b></dt>
  <dd class="It-tag">Do not turn absolute paths into relative paths. That is
      don't remove the leading slash. Applies to the path names written in an
      archive, but also to the path names read out of an archive during read
      (install), verify, and cataloging operations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b></dt>
  <dd class="It-tag">If the <b>-v</b> option is used, prints the byte offset of
      the start of each file in the archive. If your tape drive can start
      reading at any position in an archive, the output of <b>-B</b> can be
      useful for doing quick selective restores.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b><i>&#x00A0;controlscript</i></dt>
  <dd class="It-tag">Set the control script name to <i>controlscript</i>, see
      the section on <b>control files</b> below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b><i>&#x00A0;[+]filename</i><b> | -E CS | -E
    CI</b></dt>
  <dd class="It-tag">While creating an archive with compressed files using the
      <b>-Z</b> option, disable (attempts at) compression for files with
      particular extensions. This option can be used to speed up the creation of
      the archive, by making <i>afio</i> avoid trying to use <i>gzip</i> on
      files that contain compressed data already. By default, if no specific
      <b>-E</b> option is given, all files with the extensions
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <div>&#x00A0;</div>
    <i>.Z .z .gz .bz2 .tgz</i> <i>.arc .zip .rar .lzh .lha</i> <i>.uc2 .tpz .taz
      .tgz .rpm .zoo .deb</i> <i>.gif .jpeg .jpg .tif .tiff .png .pdf</i>
      <i>.arj .avi .bgb .cab .cpn .hqx .jar</i> <i>.mp3 .mpg .mpq .pic .pkz .psn
      .sit .ogg</i> and <i>.smk</i>
    <div>&#x00A0;</div>
    will not be compressed. Also by default, the file extension matching is
      case-insensitive (to do the right thing with respect to MS-DOS based
      filesystems). The <b>-E</b><i>&#x00A0;filename</i> form of this option
      will replace the default list of file extensions by reading a new list of
      file extensions, separated by whitespace, from <i>filename</i>.
      <i>filename</i> may contain comments preceded by a #. The extensions in
      <i>filename</i> should usually all start with a dot, but they do not need
      to start with a dot, for example the extension 'tz' will match the file
      name 'hertz'. The <b>-E</b><i>&#x00A0;+filename</i> form (with a + sign in
      front of <i>filename</i>) can be used to specify extensions in addition to
      the built-in default list, instead of replacing the whole default list. To
      make extension matching case-sensitive, add the special option form <b>-E
      CS</b> to the command line. The form <b>-E CI</b> invokes the (default)
      case-insensitive comparison. See also the <b>-6</b> option, which offers
      an additional way to suppress compression.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b></dt>
  <dd class="It-tag">This is a floppy disk, <b>-s</b> is required. Causes floppy
      writing in <b>O_SYNC</b> mode under Linux. With kernel version 1.1.54 and
      above, this allows <i>afio</i> to detect some floppy errors while writing.
      Uses shared memory if compiled in otherwise mallocs as needed (a 3b1 will
      not be able to malloc the needed memory w/o shared memory), <i>afio</i>
      assumes either way you can malloc/shmalloc a chunck of memory the size of
      one disk. Examples: 795k: 3.5&quot; (720k drive), 316k (360k drive)
    <pre>
At the end of each disk this message occurs:
 Ready for disk [#] on [output]
 (remove the disk when the light goes out)
 Type &quot;go&quot; (or &quot;GO&quot;) when ready to proceed
 (or &quot;quit&quot; to abort):
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b><i>&#x00A0;factor</i></dt>
  <dd class="It-tag">Specifies the <i>gzip</i>(1) compression speed factor, used
      when compressing files with the <b>-Z</b> option. Factor 1 is the fastest
      with least compression, 9 is slowest with best compression. The default
      value is 6. See also the <i>gzip</i>(1) manual page. If you have a slow
      machine or a fast backup medium, you may want to specify a low value for
      <i>factor</i> to speed up the backup. On large (&gt;200k) files, <b>-G
      1</b> typically zips twice as fast as <b>-G 6</b>, while still achieving a
      better result than <i>compress</i>(1). The zip speed for small files is
      mainly determined by the invocation time of <i>gzip</i> (1), see the
      <b>-T</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H </b><i>promptscript</i></dt>
  <dd class="It-tag">Specify a script to run, in stead of using the normal
      prompt, before advancing to the next archive volume. The script will be
      run with the volume number, archive specification, and the reason for
      changing to the next volume as arguments. The script should exit with 0
      for OK and 1 for abort, other exit codes will be treated as fatal errors.
      <i>afio</i> executes the script by taking the <i>promptscript</i> string,
      appending the arguments, and then calling the shell to execute the
      resulting command line. This means that a general-purpose prompt script
      can be supplied with additional arguments, via the <i>afio</i> command
      line, by using a <b>-H</b> option value like -H &quot;generic_promptscript
      additional_arg_1 additional_arg_2&quot;.\</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-J</b></dt>
  <dd class="It-tag">Try to continue after a media write error when doing a
      backup (normal behavior is to abort with a fatal error).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-K</b></dt>
  <dd class="It-tag">Verify the output against what is in the memory copy of the
      disk (-F required). If the writing or verifying fails the following menu
      pops up
    <pre>
    [Writing/Verify] of disk [disk #] has FAILED!
	Enter 1 to RETRY this disk
	Enter 2 to REFORMAT this disk before a RETRY
<div class="Pp"></div>
	Enter quit to ABORT this backup
    </pre>
    Currently, <i>afio</i> will not process the answers 1 and 2 in the right
      way. The menu above is only useful in that it signifies that something is
      wrong.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L </b><i>Log_file_path</i></dt>
  <dd class="It-tag">Specify the name of the file to log errors and the final
      totals to.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b><i>&#x00A0;size</i></dt>
  <dd class="It-tag">Specifies the maximum amount of memory to use for the
      temporary storage of compression results when using the <b>-Z</b> option.
      The default is <b>-M 250m</b> (250 megabytes). If the compressed version
      of a file is larger than this (or if <i>afio</i> runs out of virtual
      memory), <i>gzip</i>(1) is run twice of the file, the first time to
      determine the length of the result, the second time to get the compressed
      data itself.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b><i>&#x00A0;progname</i></dt>
  <dd class="It-tag">Use the program <i>progname</i> instead of the standard
      <i>gzip</i>(1) for compression and decompression with the <b>-Z</b>
      option. For example, use the options <b>-Z -P bzip2</b> to write and
      install archives using <i>bzip2</i>(1) compression. If <i>progname</i>
      does not have command line options (-c, -d, and -&lt;number&gt;) in the
      style of <i>gzip</i>(1) then the <b>-Q</b> option can be used to supply
      the right options. The compression program used must have the property
      that, if the output file size exceeds the value of the <b>-M</b> option,
      then when the compression program is run for a second time on the same
      input, it must produce an output with exactly the same size. (See also the
      <b>-M</b> option description.) The GnuPG (<b>gpg</b>) encryption program
      does not satisfy this lenght-preserving criterion unless its built-in
      compression is disabled (see examples in the afio source script3/
      directory). See also the <b>-Q</b>, <b>-U</b> and <b>-3</b> options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Q</b><i>&#x00A0;opt</i></dt>
  <dd class="It-tag">Pass the option <i>opt</i> to the compression or
      decompression program used with the <b>-Z</b> option. For passing multiple
      options, use <b>-Q</b> multiple times. If no <b>-Q</b> flag is present,
      the standard options are passed. The standard options are <b>-c -6</b>
      when the program is called for compression and <b>-c -d</b> when the
      program is called for decompression. Use the special case <b>-Q</b>
      &quot;&quot; if no options at all are to be passed to the program.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b><i>&#x00A0;Disk format command string</i></dt>
  <dd class="It-tag">This is the command that is run when you enter 2 to
      reformat the disk after a failed verify. The default (fdformat
      /dev/fd0H1440) can be changed to a given system's default by editing the
      Makefile. You are also prompted for formatting whenever a disk change is
      requested.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag">Do not ignore a leading slash in the pattern or the file
      name when matching <b>-y</b> and <b>-Y</b> patterns. See also
    <b>-A</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b><i>&#x00A0;threshold</i></dt>
  <dd class="It-tag">Only compress a file when using the <b>-Z</b> option if its
      length is at least <i>threshold</i>. The default is <b>-T 0k</b>. This is
      useful if you have a slow machine or a fast backup medium. Specifying
      <b>-T 3k</b> typically halves the number of invocations of <i>gzip</i>(1),
      saving some 30% computation time, while creating an archive that is only
      5% longer. The combination <b>-T 8k -G 1</b> typically saves 70%
      computation time and gives a 20% size increase. The latter combination may
      be a good alternative to not using <b>-Z</b> at all. These figures of
      course depend heavily on the kind of files in the archive and the
      processor - i/o speed ratio on your machine. See also the <b>-2</b>
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b></dt>
  <dd class="It-tag">If used with the <b>-Z</b> option, forces compressed
      versions to be stored of all files, even if the compressed versions are
      bigger than the original versions, and disregarding any (default) values
      of the <b>-T</b> and <b>-2</b> options. This is useful when the <b>-P</b>
      and <b>-Q</b> options are used to replace the compression program
      <i>gzip</i> with an encryption program in order to make an archive with
      encrypted files. Due to internal limitations of <i>afio</i>, use of this
      flag forces the writing of file content with each hard linked file, rather
      than only once for every set of hard linked files. <b>WARNING:</b> use of
      the -U option will also cause compression (or whatever operation the
      <b>-P</b> option indicates) on files larger than 2 GB, if these are
      present in the input. Not all compression programs might handle such huge
      files correctly (recent Linux versions of gzip, bzip2, and gpg have all
      been tested and seem to work OK). If your setup is obscure, some testing
      might be warranted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-W</b><i>&#x00A0;filename</i></dt>
  <dd class="It-tag">Treats each line in <i>filename</i> as an <b>-Y</b>
      pattern, see <b>-Y</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Y</b><i>&#x00A0;pattern</i></dt>
  <dd class="It-tag">Do <i>not</i> process files whose names match shell
      wildcard pattern <i>pattern</i>. See also <b>-y </b>and<b> -W</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z</b></dt>
  <dd class="It-tag">Compress the files that go into the archive when creating
      an archive, or uncompress them again when installing an archive. <i>afio
      -Z</i> will compress each file in the archive individually, while keeping
      the archive headers uncompressed. Compared to <i>tar zc</i> style
      archives, <i>afio -Z</i> archives are therefore much more fault-tolerant
      against read errors on the backup medium. When creating an archive with
      the <i>-Z</i> option, <i>afio</i> will run <i>gzip</i> on each file
      encountered, and, if the result is smaller than the original, store the
      compressed version of the file. Requires <i>gzip</i>(1) to be in your
      path. Mainly to speed up <i>afio</i> operation, compression is not
      attempted on a file if: 1) the file is very small (see the <b>-T</b>
      option), 2) the file is very large (see the <b>-2</b> option), 3) the file
      has a certain extension, so it probably contains compressed data already
      (see the <b>-E</b> option), 4) the file pathname matches a certain
      pattern, as set by the <b>-6</b> option, 5) the file has hard links (this
      due to an internal limitation of afio, but this limitation does not apply
      if the <b>-l</b> option is also used). Regardless of the above, if the
      <b>-U</b> option is used then the compression program is always run, and
      the compressed result is always stored. When installing an archive with
      compressed files, the <b>-Z</b> option needs to be used in order to make
      afio automatically uncompress the files that it compressed earlier. The
      <b>-P</b> option can be used to do the (un)compression with programs other
      than <i>gzip</i>, see the <b>-P</b> (and <b>-Q</b> and <b>-3</b>) options
      in this manpage for details. See also the <b>-G</b> option which provides
      yet another way to tune the compression process.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-0</b></dt>
  <dd class="It-tag">Use filenames terminated with '\0' instead of '\n'. When
      used as follows: <i>find ... -print0 | afio -o -0 ...</i>, it ensures that
      any input filename can be handled, even a file name containing newlines.
      When used as <i>afio -t -0 ... | ...</i>, this allows the table of
      contents output to be parsed unambiguosly even if the filenames contain
      newlines. The <b>-0</b> option also affects the parsing of the files
      supplied by <b>-w file</b> and <b>-W file</b> options: if the option
      <b>-0</b> precedes them in the command line then the pattern lines
      contained in the <b>file</b>s should be terminated with '\0' in stead of
      '\n'. A second use of <b>-0</b> toggles the option. This can be useful
      when using multiple pattern files or when combining with the <b>-t</b>
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-1</b><i>&#x00A0;warnings-to-ignore</i></dt>
  <dd class="It-tag">Control if <i>afio</i>(1) should exit with a nonzero code
      after printing certain warning messages, and if certain warning messages
      should be printed at all. This option is sometimes useful when calling
      <i>afio</i>(1) from inside a backup script or program. <i>afio</i>(1) will
      exit with a nonzero code on encountering various 'hard' errors, and also
      (with the default value of the <b>-1</b> option) when it has printed
      certain warning messages during execution. <i>warnings-to-ignore</i> is a
      list of letters which determines the behavior related to warning messages.
      The default value for this option is <b>-1 mc</b>. For <i>afio</i>
      versions 2.4.3 and earlier, the default was <b>-1 a</b>. For <i>afio</i>
      versions 2.4.4 and 2.4.5, the default was <b>-1 ''</b>. The defined
      <i>warnings-to-ignore</i> letters are as follows. <b>a</b> is for for
      ignoring <i>a</i>ll possible warnings on exit: if this letter is used, the
      printing of a warning message will never cause a nonzero exit code.
      <b>m</b> is for ignoring in the exit code any warning about <i>m</i>issing
      files, which will be printed when, on creating an archive, a file whose
      name was read from the standard input is not found. <b>c</b> is for
      ignoring in the exit code the warning that the archive being created will
      not be not fully compatible with <i>c</i>pio or afio versions 2.4.7 or
      lower. <b>C</b> is the same as <i>c</i>, but in addition the warning
      message will not even be printed. <b>M</b> will suppress the printing of
      all warning messages asssociated with <i>M</i>ultivolume archive handling,
      messages like &quot;Output limit reached&quot; and &quot;Continuing&quot;.
      <b>d</b> is for ignoring in the exit code any warnings about changed
      files, which will be printed when, on creating an archive, a file that is
      being archived changes while it is being written into the archive, where
      the changing is detected by examining the file modification time stamp.
      <b>r</b> is for ignoring certain warnings during the verify (-r)
      operation. If this letter is used, some verification errors that are very
      probably due to changes in the filesystem, during or after the backup was
      made, are ignored in determining the exit code. The two verification
      errors that are ignored are: 1) a file in the archive is no longer present
      on the filesystem, and 2) the file contents in the archive and on the
      filesystem are different, but the file lengths or the file modification
      times are also different, so the difference in contents is probably due to
      the file on the file system having been changed. <b>n</b> is for ignoring
      in the exit code a particular class of <i>n</i>o-such-file warnings: it
      ignores these warnings when they happen after the file has already been
      successfully opened. This unusual warning situation can occur when
      archiving files on Windows smbfs filesystems -- due to a Windows problem,
      smbfs files with non-ASCII characters in their names can sometimes be
      opened but not read. When the <b>-Z</b> option is used, the <i>n</i>
      letter function is (currently) only implemented for files with sizes
      smaller than indicated by the <b>-T</b> option, so in that case the
      <b>-T</b> option is also needed for this letter to have any effect.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-2 </b><i>maximum-file-size-to-compress</i></dt>
  <dd class="It-tag">Do not compress any files which are larger than this size
      when making a compressed archive with the <b>-Z</b> option. The default
      value is <b>-2 200m</b> (200 Megabytes). This maximum size cutoff lowers
      the risk that a major portion of a large file will be irrecoverable due to
      small media errors. If a media error occurs while reading a file that
      <i>afio</i> has stored in a compressed form, then <i>afio</i> and
      <i>gzip</i> will not be able to restore the entire remainder of that file.
      This is usually an acceptable risk for small files. However for very large
      files the risk of loosing a large amount of data because of this effect
      will usually be too big. The special case <b>-2 0</b> eliminates any
      maximum size cutoff.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-3 </b><i>filedescriptor-nr</i></dt>
  <dd class="It-tag">Rewind the filedescriptor before invoking the
      (un)compression program if using the <b>-Z</b> option. This is useful when
      the <b>-P</b> and <b>-Q</b> options are used to replace the compression
      program <i>gzip</i> with some types of encryption programs in order to
      make or read an archive with encrypted files. The rewinding is needed to
      interface correctly with some encryption programs that read their key from
      an open filedescriptor. If the <b>-P</b> program name matches 'pgp' or
      'gpg', then the <b>-3</b> option <i>must</i> be used to avoid
      <i>afio</i>(1) reporting an error. Use the special case <b>-3 0</b> to
      suppress the error message without rewinding any file descriptor. The
      <b>-3 0</b> option may also be needed to successfully read back encrypted
      archives made with <i>afio</i> version 2.4.5 and older.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-4</b></dt>
  <dd class="It-tag">(Deprecated, the intended effect of this option is now
      archived by default as long as the <b>-5</b> option is not used. This
      option could still be useful for compatibility with machines running an
      older version of <i>afio</i>.) Write archive with the `extended ASCII'
      format headers which use 4-byte inode numbers. Archives using the extended
      ASCII format headers are <b>not</b> compatible with any other archiver.
      This option was useful for reliably creating and restoring sets of files
      with many internal hard links, for example a news spool.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-5</b></dt>
  <dd class="It-tag">Refuse to create an archive that is incompatible with
      <i>cpio</i>(1). If this option is used, <i>afio</i> will never write any
      `large ASCII' file headers that are incompatible with <i>cpio</i>(1), but
      fail with an error code instead. See the ARCHIVE PORTABILITY section above
      for more information on the use of `large ASCII' file headers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-6 &#x00A0;filename</b></dt>
  <dd class="It-tag">While creating an archive with compressed files using the
      <b>-Z</b> option, disable (attempts at) compression for files that match
      particular shell patterns. This option can be used to speed up the
      creation of the archive, by making <i>afio</i> avoid trying to use
      <i>gzip</i> on files that contain compressed data already. Reads shell
      wildcard patterns from <i>filename</i>, treating each line in the file as
      a pattern. Files whose names match these patterns are not to be compressed
      when using the <b>-Z</b> option. Pattern matching is done in exactly the
      same way as described for the <b>-y</b> option. See also the <b>-E</b>
      option: the (default) settings of the <b>-E</b> option will further
      restrict compression attempts. The <b>-E</b> option controls compression
      attempts based on file extensions; the <b>-6</b> option is mainly intended
      as a method for excluding all files in certain subdirectory trees from
      compression..</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-7</b></dt>
  <dd class="It-tag">Switch between shell wildcard pattern matching and exact
      name matching (without interpreting any wildcard characters) for the
      patterns supplied in the <b>-y</b>, <b>-Y</b>, <b>-w</b>, and <b>-W</b>
      options. If the <b>-7</b> option is used in front of any option <b>-y</b>,
      <b>-Y</b>, <b>-w</b>, or <b>-W</b>, then the patterns supplied in these
      options are not intrerpreted as wildcard patterns, but as character
      strings that must match exactly to the file name, except possibly in
      leading slashes. This option can be useful for handling the exceptional
      cases where file names in the archive, or the names of files to be
      archived, contain wildcard characters themselves. For example, <i>find
      /tmp -print0 | afio -ov -Y '*.jpg' -7 -Y '/tmp/a[12]*4' -0 archive</i> can
      be used to archive files all files under /tmp, even files with a '\n'
      character in the name, except for .jpg files and the file with the exact
      name <i>/tmp/a[12]*4</i>. A second use of <b>-7</b> toggles the matching
      for subsequently occurring <b>-y</b>, <b>-Y</b>, <b>-w</b>, and <b>-W</b>
      back to shell wildcard pattern matching.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-9</b></dt>
  <dd class="It-tag">Do not round down any <b>-s</b> volume sizes to the nearest
      <b>-b</b> block size. See the <b>-s</b> option.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ARCHIVE_PORTABILITY"><a class="selflink" href="#ARCHIVE_PORTABILITY">ARCHIVE
  PORTABILITY</a></h1>
<i>afio</i> archives are portable between different types of UNIX systems, as
  they contain only ASCII-formatted header information.
<div class="Pp"></div>
Except in special cases discussed below, <i>afio</i> will create archives with
  the same format as ASCII <i>cpio</i>(1) archives. Therefore <i>cpio</i>(1) can
  usually be used to restore an <i>afio</i> archive in the case that <i>afio</i>
  is not available on a system. (With most <i>cpio</i> versions, to unpack an
  ASCII format archive, use <i>cpio -c</i>, and for GNU <i>cpio</i>(1) use
  <i>cpio -H odc</i>.) When unpacking with <i>cpio</i>, any compressed files
  inside an <i>afio -Z</i> archive are not uncompressed by <i>cpio</i>, but will
  be created on the file system as compressed files with a .z extension.
<div class="Pp"></div>
Unfortunately, the ASCII cpio archive format cannot represent some files and
  file properties that can be present in a modern UNIX filesystem. If afio
  creates an archive with such things, then it uses an afio-specific 'large
  ASCII' header for the files concerned. Archives with large ASCII headers
  cannot be unpacked completely by <i>cpio</i> or <i>afio</i> versions before
  2.4.8.
<div class="Pp"></div>
When creating an archive, the `large ASCII' header is used by <i>afio</i> to
  cover the following situations:
<div style="margin-left: 3.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">A file has a size larger than 2 GB</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">The archive contains more than 64K files which have hard
      links</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">A file, directory, or special file has a UID or GID value
      larger than 65535.</dd>
</dl>
</div>
<div class="Pp"></div>
The <b>-5</b> option can be used to always preserve <i>cpio</i> compatibility,
  it will cause <i>afio</i> to fail rather than produce an incompatible archive
  in the cases above.
<div class="Pp"></div>
Archives made using the (deprecated) <b>-4</b> option are also <b>not</b>
  compatible with <i>cpio</i>, but they are compatible with <i>afio</i> versions
  2.4.4 and later.
<h1 class="Sh" title="Sh" id="ARCHIVE_FILE_FORMAT"><a class="selflink" href="#ARCHIVE_FILE_FORMAT">ARCHIVE
  FILE FORMAT</a></h1>
An <i>afio</i> archive file has a simple format. The archive starts with a file
  header for the first file, followed by the contents of the first file (which
  will either be the exact contents byte-for-byte, or the exact contents in some
  compressed format). The data of the first file is immediately followed by the
  file header of the second file, and so on. At the end, there is a special `end
  of archive' header, usually followed by some padding bytes.
<div class="Pp"></div>
A multi-volume <i>afio</i> archive is simply a normal archive split up into
  multiple parts. There are no special volume-level data headers. This means
  that that volumes can be split and merged by external programs, as long as the
  data stays in the correct order. It also implies that the contents of a single
  file can cross volume boundaries. Selective restores of files at known volume
  locations can be done by feeding only the needed volumes to <i>afio</i>,
  provided that the <b>-k</b> option is used.
<div class="Pp"></div>
The contents of hard linked files are (unless the <b>-l</b> option is used) only
  stored once in the archive. The file headers for the second, third, and later
  occurrence of a hard linked file have no data after them. This makes selective
  restores of hard-liked files difficult: if later occurrences are to be
  restored correctly, the first occurrence always needs to be selected too.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Special-case archive names:
<div style="margin-left: 3.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">Specify <i>-</i> to read or write the standard input or
      output, respectively. This disables multi-volume archive handling.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">Prefix a command string to be executed with an exclamation
      mark (<i>!</i>). The command is executed once for each archive volume,
      with its standard input or output piped to <i>afio</i>. It is expected to
      produce a zero exit code when all is well.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">Use <i>system:file</i> to access an archive in <i>file</i>
      on <i>system</i>. This is really just a special case of pipelining. It
      requires a 4.2BSD-style remote shell (<i>rsh</i>(1C)) and a remote copy of
      <i>afio</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">A more elaborate case of the above is
      <i>[user@]host[%rsh][=afio]:file</i> where the optional <i>user@</i>
      component specifies the user name on the remote host, the optional
      <i>%rsh</i> specifies the (local) name of the remote shell command to use,
      and the optional <i>=afio</i> specifies the name of the remote copy of the
      afio command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">Anything else specifies a local file or device. An output
      file will be created if it does not already exist.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>o</b></dt>
  <dd class="It-tag">When the <b>-s</b> option is used to invoke multi-volume
      archive processing, any <b>%V</b> in the file/device name or command
      string is subsisuted by the current volume number, and any <b>%S</b> by
      the current volume size. Use <b>%%</b> to produce a single %
    character.</dd>
</dl>
</div>
<div class="Pp"></div>
Recognizes obsolete binary <i>cpio</i>(1) archives (including those from
  machines with reversed byte order), but cannot write them.
<div class="Pp"></div>
Recovers from archive corruption by searching for a valid magic number. This is
  rather simplistic, but, much like a disassembler, almost always works.
<div class="Pp"></div>
Optimizes pathnames with respect to the current and parent directories. For
  example, <i>./src/sh/../misc/afio.c</i> becomes <i>src/misc/afio.c</i>.
<h1 class="Sh" title="Sh" id="CONTROL_FILES"><a class="selflink" href="#CONTROL_FILES">CONTROL
  FILES</a></h1>
<i>Afio</i> archives can contain so-called control files. Unlike normal archive
  entries, a control file in not unpacked to the filesystem. A control file has
  a <i>label</i> and some <i>data</i>. When <i>afio</i> encounters a control
  file in the archive it is reading, it will feed the <i>label</i> and
  <i>data</i> to a so-called control script. The control script is supplied by
  the user. It can perform special actions based on the <i>label</i> and
  <i>data</i> it receives from <i>afio</i>.
<div class="Pp"></div>
<b>Control file labels.</b> The control file mechanism can be used for many
  things. Examples are putting archive descriptions at the beginning of the
  archive and embedding lists of files to move before unpacking the rest or the
  archive.
<div class="Pp"></div>
To distinguish between different uses, the <i>label</i> of a control file should
  indicate the program that made the control file and the purpose of the control
  file data. It should have the form
<div class="Pp"></div>
<pre>
   programname.kindofdata
</pre>
<div class="Pp"></div>
where <i>programname</i> is the name of the backup program that generated the
  control file, and <i>kindofdata</i> is the meaning of the control file data.
  Some examples are
<div class="Pp"></div>
<pre>
   tbackup.movelist  tbackup.updatescript
   blebberfiler.archivecontents
   backup_script_of_Joe_User.archivedescription
</pre>
<div class="Pp"></div>
The user-supplied control script should look at the label to decide what to do
  with the control data. This way, control files with unknown labels can be
  ignored, and afio archives maintain some degree of portability between
  different programs that restore or index them.
<div class="Pp"></div>
Control file labels that are intended to be portable between different backup
  programs could be defined in the future.
<div class="Pp"></div>
<b>Making control files.</b> When making an archive, afio reads a stream
  containing the names of the files (directories, ...) to put in the archive.
  This stream may also contain `control file generators', which are lines with
  the following format:
<div class="Pp"></div>
<pre>
    //--sourcename label
</pre>
<div class="Pp"></div>
Here, the //-- sequence signals that a control file is to be made,
  <i>sourcename</i> is the path to a file containing the control file data, and
  <i>label</i> is the control file label. The <i>sourcename</i> must be a
  regular file or a symlink to a regular file.
<div class="Pp"></div>
A control file will show up as
<div class="Pp"></div>
<pre>
   //--CONTROL_FILE/label
</pre>
<div class="Pp"></div>
in an archive listing, where <i>label</i> is the control file label.
<div class="Pp"></div>
<b>Control scripts.</b> A control script is supplied to afio with the
<div class="Pp"></div>
<b> -D </b><i>controlscript</i>
<div class="Pp"></div>
command line option. The <i>controlscript</i> must be an executable program. The
  script is run whenever <i>afio</i> encounters a control file while doing a
  <b>-i -t</b> or <b>-r</b> operation. Afio will supply the control file
  <i>label</i> as an argument to the script. The script should read the control
  file <i>data</i> from its standard input. If the script exits with a non-zero
  exit status, <i>afio</i> will issue a warning message.
<div class="Pp"></div>
If a control file is encountered and no <b>-D</b> option is given, <i>afio</i>
  will issue a warning message. To suppress the warning message and ignore all
  control scripts, <b>-D</b> &quot;&quot; can be used.
<div class="Pp"></div>
An example of a control script is
<div class="Pp"></div>
<pre>
  #!/bin/sh
  if [ $1 = &quot;afio_example.headertext&quot; ]; then
    #the headertext control file is supposed to be packed as the first
    #entry of the archive
    echo Archive header:
    cat -
    echo Unpack this archive? y/n
    #stdout is still connected to the tty, read the reply from stdout
    read yn &lt;&amp;1
    if [ &quot;$yn&quot; = n ]; then
      #abort
      kill $PPID
    fi
  else
    echo Ignoring unknown control file.
    cat - &gt;/dev/null
  fi
</pre>
<div class="Pp"></div>
<i>Afio</i> never compresses the control file data when storing it in an
  archive, even when the <b>-Z</b> option is used. When a control file is
  encountered by <i>cpio(1)</i> or an <i>afio</i> with a version number below
  2.4.1, the data will be unpacked to the filesystem, and named
  <i>CONTROL_FILE/label</i> where <i>label</i> is the control file label.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
There are too many options.
<div class="Pp"></div>
Restricts pathnames to 1023 characters, and 255 meaningful elements (where each
  element is a pathname component separated by a /).
<div class="Pp"></div>
Does not use the same default block size as <i>tar</i>(1). <i>tar</i>(1) uses 10
  KB, <i>afio</i> uses 5 KB by default. Some tape drives only work with a 10 KB
  block size, in that case the <i>afio</i> option <b>-b 10k</b> is needed to
  make the tape work.
<div class="Pp"></div>
There is no sequence information within multi-volume archives. Input sequence
  errors generally masquerade as data corruption. A solution would probably be
  mutually exclusive with <i>cpio</i>(1) compatibility.
<div class="Pp"></div>
Degenerate uses of symbolic links are mangled by pathname optimization. For
  example, assuming that &quot;usr.src&quot; is a symbolic link to
  &quot;/usr/src&quot;, the pathname &quot;usr.src/../bin/cu&quot; is
  mis-optimized into &quot;bin/cu&quot; (rather than &quot;/usr/bin/cu&quot;).
<div class="Pp"></div>
The <i>afio</i> code for handling floppies (<b>-F</b> and <b>-f</b> and
  <b>-K</b> options) has buggy error handling. <i>afio</i> does not allow one to
  retry a failed floppy write on a different floppy, and it cannot recover from
  a verify error. If the floppy handling code is used and write or verify errors
  do occur, it is best to restart <i>afio</i> completely. Making backups to
  floppies should really be done with a more specialised backup program that
  wraps <i>afio</i>.
<div class="Pp"></div>
The Linux floppy drivers below kernel version 1.1.54 do not allow <i>afio</i> to
  find out about floppy write errors while writing. If you are running a kernel
  below 1.1.54, <i>afio</i> will happily fail to write to (say) a write
  protected disk and not report anything wrong! The only way to find out about
  write errors in this case is by watching the kernel messages, or by switching
  on the verify (<b>-K</b>) option.
<div class="Pp"></div>
The remote archive facilites (host:/file archive names) have not been
  exhaustively tested. These facilities have seen a lot of real-life use though.
  However, there may be bugs in the code for error handling and error reporting
  with remote archives.
<div class="Pp"></div>
An archive created with a command like <i>'find /usr/src/linux -print | afio -o
  ...'</i> will not contain the ownership and permissions of the <i>/usr</i> and
  <i>/usr/src</i> directories. If these directories are missing when restoring
  the archive, <i>afio</i> will recreate them with some default ownership and
  permissions.
<div class="Pp"></div>
Afio can not restore time stamps on symlinks. Also, on operating systems without
  an <i>lchown</i>(2) system call, afio can not restore owner/group information
  on symlinks. (Linux has lchown since kernel version 2.1.86.)
<div class="Pp"></div>
Afio tries to restore modification time stamps of directories in the archive
  correctly. However, if it exits prematurely, then the modification times will
  not be restored correctly.
<div class="Pp"></div>
A restore using decompression will fail if the <i>gzip</i> binary used by
  <i>afio</i> is overwritten, by <i>afio</i> or by another program, during the
  restore. The restore will also fail if any shared libraries needed to start
  <i>gzip</i> are overwritten during the restore. <i>afio</i> should not
  normally be used to overwrite the system files on a running system. If it is
  used in this way, a flag like <i>-Y /bin/gzip</i> can often be added to
  prevent failure.
<div class="Pp"></div>
The <b>-r</b> option verifies the file contents of the files in the archive
  against the files on the filesystem, but does not cross-check details like
  permission bits on files, nor does it cross-check that archived directories or
  other non-file entities still exist on the filesystem.
<div class="Pp"></div>
There are several problems with archiving hard links. 1) Due to internal
  limitations, files with hard links cannot be stored in compressed form, unless
  the <b>-l</b> or <b>-U</b> options are used which force each hard linked file
  to be stored separately. 2) Archives which contain hard links and which were
  made with older (pre-2.4.8) versions of <i>afio</i> or with <i>cpio</i> can
  not always be correctly unpacked. This is really a problem in the archives and
  not in the current version of <i>afio</i>. The risk of incorrect unpacking
  will be greater if the number of files or hard links in the archives is
  larger. 3) In a selective restore, if the selection predicates do not select
  the first copy of a file with archive-internal hard links, then all subsequent
  copies, if selected, will not be correctly restored. 4) Unless the <b>-4</b>
  option is used, the inode number fields in the archive headers for files with
  hard links of the archive will sometimes not contain the actual (least
  significant 16 bits of) the inode number of the original file.
<div class="Pp"></div>
Some Linux kernels no not allow one to create a hard link to a symbolic link.
  <i>afio</i> will try to re-create such hard links when unpacking an archive,
  but might fail due to kernel restrictions.
<div class="Pp"></div>
Due to internal limitations of <i>afio</i>, the use of the <b>-U</b> option
  forces the writing of file content with each hard linked file, rather than
  only once for every set of hard linked files.
<div class="Pp"></div>
When it is run without super-user privileges, <i>afio</i> is not able to unpack
  a file into a directory for which it has no write permissions, even if it just
  created that directory itself. This can be a problem when trying to restore
  directory structures created by some source code control tools like RCS.
<div class="Pp"></div>
When block or character device files are packed into an archive on one operating
  system (e.g. Linux) and unpacked on another operating system, which uses
  different sizes for the major and minor device number data types (e.g.
  Solaris), the major and minor numbers of the device files will not be restored
  correctly. This can be a problem if the operating systems share a
  cross-mounted filesystem. A workaround is to use <i>tar</i>(1) for the device
  files.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Create an archive with compressed files:
<div>&#x00A0;</div>
<i>find .... | afio -o -v -Z /dev/fd0H1440</i>
<div class="Pp"></div>
Install (unpack) an archive with compressed files:
<div>&#x00A0;</div>
<i>afio -i -v -Z archive</i>
<div class="Pp"></div>
Install (unpack) an archive with compressed files, protecting newer existing
  files:
<div>&#x00A0;</div>
<i>afio -i -v -Z -n archive</i>
<div class="Pp"></div>
Create an archive with compressed files on floppy disks:
<div>&#x00A0;</div>
<i>find .... | afio -o -v -s 1440k -F -Z /dev/fd0H1440</i>
<div class="Pp"></div>
Create an archive with all file contents encrypted by pgp:
<div>&#x00A0;</div>
<i>export PGPPASSFD=3</i>
<div>&#x00A0;</div>
<i>find .... | afio -ovz -Z -U -P pgp -Q -fc -Q +verbose=0 -3 3 archive
  3&lt;passphrasefile</i>
<div class="Pp"></div>
Create an archive on recordable CDs using the <i>cdrecord</i> utility to write
  each CD:
<div>&#x00A0;</div>
<i>find .... | afio -o -b 2048 -s325000x -v '!cdrecord .... -'</i>
<div class="Pp"></div>
Extract a single named file from an archive on /dev/tape:
<div>&#x00A0;</div>
<i>afio -i -v -Z -y /home/me/thedir/thefile /dev/tape</i>
<div>&#x00A0;</div>
(If these do not exist yet, <i>afio</i> will also create the enclosing
  directories <i>home/me/myfiledir</i> under current working directory.)
<div class="Pp"></div>
Extract files matching a pattern from an archive on /dev/tape:
<div>&#x00A0;</div>
<i>afio -i -v -Z -y '/home/me/*' /dev/tape</i>
<div>&#x00A0;</div>
(If these do not exist yet, <i>afio</i> will also create the enclosing
  directories <i>home/me</i> under current working directory.)
<div class="Pp"></div>
If your filesystem cannot handle files larger than 2GB, but you want to make an
  archive on that filesystem that is larger than 2GB, you use the following
  trick to split the archive into multiple files of each 1 GB:
<div>&#x00A0;</div>
<i>find /home | afio -o ... - | split -b1024m - archive.</i>
<div>&#x00A0;</div>
the files will be called archive.aa, archive.ab, etc. You can restore the whole
  archive using:
<div>&#x00A0;</div>
<i>cat archive.* | afio -i ... -</i>
<div>&#x00A0;</div>
The wildcard expansion by the shell will ensure that <i>cat</i> will read the
  parts in the right (alphabetic) order.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
cpio(1), find(1), tar(1), compress(1), gzip(1).
<h1 class="Sh" title="Sh" id="WEB_SITE_AND_INTERNET_RESOURCES"><a class="selflink" href="#WEB_SITE_AND_INTERNET_RESOURCES">WEB
  SITE AND INTERNET RESOURCES</a></h1>
The afio home page is at http://members.chello.nl/~k.holtman/afio.html
<div>&#x00A0;</div>
See the home page for information on submitting questions, bug reports, patches,
  etc.
<div>&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Mark Brukhartz
<div>&#x00A0;</div>
Jeff Buhrt
<div>&#x00A0;</div>
Dave Gymer
<div>&#x00A0;</div>
Andrew Stevens
<div>&#x00A0;</div>
Koen Holtman <b>(current maintainer)</b> <i>koen.holtman@ieee.org</i>
<div>&#x00A0;</div>
Anders Baekgaard
<div>&#x00A0;</div>
Too many other people to list here have contributed code, patches, ideas, and
  bug reports. Many of these are mentioned in the HISTORY file that is included
  with the sources.</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
