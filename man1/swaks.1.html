<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SWAKS(1) User Contributed Perl Documentation
SWAKS(1)</p>

<p style="margin-top: 1em">NAME <br>
swaks - Swiss Army Knife SMTP, the all-purpose smtp
transaction tester</p>

<p style="margin-top: 1em">DESCRIPTION <br>
swaks&rsquo; primary design goal is to be a flexible,
scriptable, transaction-oriented SMTP test tool. It handles
SMTP features and extensions such as TLS, authentication,
and <br>
pipelining; multiple version of the SMTP protocol including
SMTP, ESMTP, and LMTP; and multiple transport methods
including unix-domain sockets, internet-domain sockets, and
<br>
pipes to spawned processes. Options can be specified in
environment variables, configuration files, and the command
line allowing maximum configurability and ease of use for
<br>
operators and scripters.</p>

<p style="margin-top: 1em">QUICK START <br>
Deliver a standard test email to user@example.com on port 25
of test-server.example.net:</p>

<p style="margin-top: 1em">swaks --to user@example.com
--server test-server.example.net</p>

<p style="margin-top: 1em">Deliver a standard test email,
requiring CRAM-MD5 authentication as user me@example.com. An
&quot;X-Test&quot; header will be added to the email body.
The authentication password will be <br>
prompted for.</p>

<p style="margin-top: 1em">swaks --to user@example.com
--from me@example.com --auth CRAM-MD5 --auth-user
me@example.com --header-X-Test &quot;test email&quot;</p>

<p style="margin-top: 1em">Test a virus scanner using EICAR
in an attachment. Don&rsquo;t show the message DATA
part.:</p>

<p style="margin-top: 1em">swaks -t user@example.com
--attach - --server test-server.example.com --suppress-data
&lt;/path/to/eicar.txt</p>

<p style="margin-top: 1em">Test a spam scanner using GTUBE
in the body of an email, routed via the MX records for
example.com:</p>

<p style="margin-top: 1em">swaks --to user@example.com
--body /path/to/gtube/file</p>

<p style="margin-top: 1em">Deliver a standard test email to
user@example.com using the LMTP protocol via a UNIX domain
socket file</p>

<p style="margin-top: 1em">swaks --to user@example.com
--socket /var/lda.sock --protocol LMTP</p>

<p style="margin-top: 1em">Report all the recipients in a
text file that are non-verifyiable on a test server:</p>

<p style="margin-top: 1em">for E in &lsquo;cat
/path/to/email/file&lsquo; <br>
do <br>
swaks --to $E --server test-server.example.com --quit-after
RCPT --hide-all <br>
[ $? -ne 0 ] &amp;&amp; echo $E <br>
done</p>

<p style="margin-top: 1em">TERMS AND CONVENTIONS <br>
This document tries to be consistent and specific in its use
of the following terms to reduce confusion.</p>

<p style="margin-top: 1em">Transaction <br>
A transaction is the opening of a connection over a
transport to a target and using a messaging protocol to
attempt to deliver a message.</p>

<p style="margin-top: 1em">Target <br>
The target of a transaction is the thing that swaks connects
to. This generic term is used throughout the documentation
because most other terms improperly imply something <br>
about the transport being used.</p>

<p style="margin-top: 1em">Transport <br>
The transport is the underlying method used to connect to
the target.</p>

<p style="margin-top: 1em">Protocol <br>
The protocol is the application language used to communicate
with the target. This document uses SMTP to speak
generically of all three supported protocols unless it
states <br>
that it is speaking of the specific &rsquo;SMTP&rsquo;
protocol and excluding the others.</p>

<p style="margin-top: 1em">Message <br>
SMTP protocols exist to transfer messages, a set of bytes in
an agreed-upon format that has a sender and a recipient.</p>

<p style="margin-top: 1em">Envelope <br>
A message&rsquo;s envelope contains the &quot;true&quot;
sender and receiver of a message. It can also be referred to
as its components, envelope-sender and envelope-recipients.
It is <br>
important to note that a messages envelope does not have to
match its To: and From: headers.</p>

<p style="margin-top: 1em">DATA <br>
The DATA portion of an SMTP transaction is the actual
message that is being transported. It consists of both the
message&rsquo;s headers and its body. DATA and body are
sometimes <br>
use synonymously, but they are always two distinct things in
this document.</p>

<p style="margin-top: 1em">Headers <br>
A message&rsquo;s headers are defined as all the lines in
the message&rsquo;s DATA section before the first blank
line. They contain information about the email that will be
displayed <br>
to the recipient such as To:, From:, Subject:, etc. In this
document headers will always be written with a capitalized
first letter and a trailing colon.</p>

<p style="margin-top: 1em">Body <br>
A message&rsquo;s body is the portion of its DATA section
following the first blank line.</p>

<p style="margin-top: 1em">OPTION PROCESSING <br>
To prevent potential confusion in this document a flag to
swaks is always referred to as an &quot;option&quot;. If the
option takes additional data, that additional data is
referred to as <br>
an argument to the option. For example, &quot;--from
fred@example.com&quot; might be provided to swaks on the
command line, with &quot;--from&quot; being the option and
&quot;fred@example.com&quot; being <br>
--from&rsquo;s argument.</p>

<p style="margin-top: 1em">Options can be given to swaks in
three ways. They can be specified in a configuration file,
in environment variables, and on the command line. Depending
on the specific option <br>
and whether or not an argument is given to it, swaks may
prompt the user for the argument.</p>

<p style="margin-top: 1em">When swaks evaluates its
options, it first looks for a configuration file (either in
a default location or specified with --config). Then it
evaluates any options in environment <br>
variables. Finally, it evaluates command line options. At
each round of processing, any options set earlier will be
overridden. Additionally, any option can be prefixed with
<br>
&quot;no-&quot; to cause swaks to forget that the variable
had previously been set. This capability is necessary
because many options treat defined-but-no-argument
differently than not- <br>
defined.</p>

<p style="margin-top: 1em">The exact mechanism and format
for using each of the types is listed below.</p>

<p style="margin-top: 1em">CONFIGURATION FILE <br>
A configuration file can be used to set commonly-used or
abnormally verbose options. By default swaks looks in order
for $SWAKS_HOME/.swaksrc, $HOME/.swaksrc, and <br>
$LOGDIR/.swaksrc. If one of those is found to exist (and
--config has not been used) that file is used as the
configuration file.</p>

<p style="margin-top: 1em">Additionally a configuration
file in a non-default location can be specified using
--config. If this is set and not given an argument swaks
will not use any configuration <br>
file, including any default file. If --config points to a
readable file, it is used as the configuration file,
overriding any default that may exist. If it points to a
non- <br>
readable file and error will be shown and swaks will
exit.</p>

<p style="margin-top: 1em">A set of &quot;portable&quot;
defaults can also be created by adding options to the end of
the swaks program file. As distributed, the last line of
swaks should be &quot;__END__&quot;. Any <br>
lines added after __END__ will be treated as the contents of
a configuration file. This allows a set of user preferences
to be automatically copied from server to server in <br>
a single file.</p>

<p style="margin-top: 1em">If present and configuration
files have not been explicitly turned off, the __END__
config is always read. Only one other configuration file
will ever be used per single <br>
invocation of swaks, even if multiple configuration files
are specified. Specifying the --config option with no
argument turns off the processing of both the __END__ config
<br>
and any actual config files.</p>

<p style="margin-top: 1em">In a configuration file lines
beginning with a hash (#) are ignored. All other lines are
assumed to be an option to swaks, with the leading dash or
dashes optional. <br>
Everything after a option line&rsquo;s first space is
assumed to be the option&rsquo;s argument and is not shell
processed. Therefore quoting is usually unneeded and will be
included <br>
literally in the argument. Here is an example of the
contents of a configuration file:</p>

<p style="margin-top: 1em"># always use this sender, no
matter server or logged in user <br>
--from fred@example.com <br>
# I prefer my test emails have a pretty from header. Note
<br>
# the lack of dashes on option and lack of quotes around
<br>
# entire argument. <br>
h-From: &quot;Fred Example&quot;
&lt;fred@example.com&gt;</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
Options can be supplied via environment variables. The
variables are in the form $SWAKS_OPT_name, where name is the
name of the option that would be specified on the command
<br>
line. Because dashes aren&rsquo;t allowed in environment
variable names in most unix-ish shells, no leading dashes
should be used and any dashes inside the option&rsquo;s name
should be <br>
replaced with underscores. The following would create the
same options shown in the configuration file example:</p>

<p style="margin-top: 1em">$
SWAKS_OPT_from=&rsquo;fred@example.com&rsquo; <br>
$ SWAKS_OPT_h_From=&rsquo;&quot;Fred Example&quot;
&lt;fred@example.com&gt;&rsquo;</p>

<p style="margin-top: 1em">Setting a variable to an empty
value is the same as specifying it on the command line with
no argument. For instance, setting
SWAKS_OPT_server=&quot;&quot; would cause swaks to prompt
<br>
the use for the server to which to connect at each
invocation.</p>

<p style="margin-top: 1em">In addition to setting the
equivalent of command line options, SWAKS_HOME can be set to
a directory containing the default .swaksrc to be used.</p>

<p style="margin-top: 1em">COMMAND LINE OPTIONS <br>
The final method of supplying options to swaks is via the
command line. The options behave in a manner consistent with
most unix-ish command line programs. Many options <br>
have both a short and long form (for instance -s and
--server). By convention short options are specified with a
single dash and long options are specified with a double-
<br>
dash. This is only a convention and either prefix will work
with either type.</p>

<p style="margin-top: 1em">The following demonstrates the
example shown in the configuration file and environment
variable sections:</p>

<p style="margin-top: 1em">$ swaks --from fred@example.com
--h-From: &rsquo;&quot;Fred Example&quot;
&lt;fred@example.com&gt;&rsquo;</p>

<p style="margin-top: 1em">TRANSPORTS <br>
swaks can connect to a target via unix pipes
(&quot;pipes&quot;), unix domain sockets (&quot;unix
sockets&quot;), or internet domain sockets (&quot;network
sockets&quot;). Connecting via network sockets is <br>
the default behavior. Because of the singular nature of the
transport used, each set of options in the following section
is mutually exclusive. Specifying more than one of <br>
--server, --pipe, or --socket will result in an error.
Mixing other options between transport types will only
result in the irrelevant options being ignored. Below is a
brief <br>
description of each type of transport and the options that
are specific to that transport type.</p>

<p style="margin-top: 1em">NETWORK SOCKETS <br>
This transport attempts to deliver a message via TCP/IP, the
standard method for delivering SMTP. This is the default
transport for swaks. If none of --server, --pipe, or <br>
--socket are given then this transport is used and the
target server is determined from the recipient&rsquo;s
domain (see --server below for more details).</p>

<p style="margin-top: 1em">This transport requires the
IO::Socket module which is part of the standard perl
distribution. If this module is not loadable, attempting to
use a this transport will result <br>
in an error and program termination.</p>

<p style="margin-top: 1em">IPv6 is supported when the
IO::Socket::INET6 module is present.</p>

<p style="margin-top: 1em">-s, --server [target mail
server[:port]] <br>
Explicitly tell swaks to use network sockets and specify the
hostname or IP address to which to connect, or prompt if no
argument is given. If this option is not given <br>
and no other transport option is given, the target mail
server is determined from the appropriate DNS records for
the domain of the recipient email address using the <br>
Net::DNS module. If Net::DNS is not available swaks will
attempt to connect to localhost to deliver. The target port
can optionally be set here. Supported formats for <br>
this include SERVER:PORT (supporting names and IPv4
addresses); [SERVER]:PORT and SERVER/PORT (supporting names,
IPv4 and IPv6 addresses). See also --copy-routing.</p>

<p style="margin-top: 1em">-p, --port [port] <br>
Specify which TCP port on the target is to be used, or
prompt if no argument is listed. The argument can be a
service name (as retrieved by getservbyname(3)) or a port
<br>
number. The default port is determined by the --protocol
option. See --protocol for more details.</p>

<p style="margin-top: 1em">-li, --local-interface [IP or
hostname[:port]] <br>
Use argument as the local interface for the outgoing SMTP
connection, or prompt user if no argument given. Argument
can be an IP address or a hostname. Default action <br>
is to let the operating system choose local interface. See
--server for additional comments on :port format.</p>

<p style="margin-top: 1em">-lp, --local-port [port] <br>
Specify the outgoing port to originate the transaction from.
If this option is not specified the system will pick an
ephemeral port. Note that regular users cannot <br>
specify some ports.</p>

<p style="margin-top: 1em">--copy-routing [domain] <br>
The argument is interpreted as the domain part of an email
address and it is used to find the target server using the
same logic that would be used to look up the target <br>
server for a recipient email address. See --to option for
more details on how the target is determined from the email
domain.</p>

<p style="margin-top: 1em">-4, -6 <br>
Force IPv4 or IPv6.</p>

<p style="margin-top: 1em">UNIX SOCKETS <br>
This transport method attempts to deliver messages via a
unix-domain socket file. This is useful for testing MTA/MDAs
that listen on socket files (for instance, testing LMTP <br>
delivery to Cyrus). This transport requires the IO::Socket
module which is part of the standard perl distribution. If
this module is not loadable, attempting to use this <br>
transport will result in an error and program
termination.</p>

<p style="margin-top: 1em">--socket [/path/to/socket/file]
<br>
This option takes as its argument a unix-domain socket file.
If swaks is unable to open this socket it will display an
error and exit.</p>

<p style="margin-top: 1em">PIPES <br>
This transport attempts to spawn a process and communicate
with it via pipes. The spawned program must be prepared to
behave as a mail server over STDIN/STDOUT. Any MTA <br>
designed to operate from inet/xinet should support this. In
addition some MTAs provide testing modes that can be
communicated with via STDIN/STDOUT. This transport can be
<br>
used to automate that testing. For example, if you
implemented DNSBL checking with Exim and you wanted to make
sure it was working, you could run &rsquo;swaks --pipe
&quot;exim -bh <br>
127.0.0.2&quot;&rsquo;. In an ideal world the process you
are talking to should behave exactly like an SMTP server on
stdin and stdout. Any debugging should be sent to stderr,
which <br>
will be directed to your terminal. In the real world swaks
can generally handle some debug on the child&rsquo;s stdout,
but there are no guarantees on how much it can handle.</p>

<p style="margin-top: 1em">This transport requires the
IPC::Open2 module which is part of the standard perl
distribution. If this module is not loadable, attempting to
use this transport will result <br>
in an error and program termination.</p>

<p style="margin-top: 1em">--pipe [/path/to/command and
arguments] <br>
Provide a process name and arguments to the process. swaks
will attempt to spawn the process and communicate with it
via pipes. If the argument is not an executable <br>
swaks will display an error and exit.</p>

<p style="margin-top: 1em">PROTOCOL OPTIONS <br>
These options are related to the protocol layer.</p>

<p style="margin-top: 1em">-t, --to
[email-address[,email-address,...]] <br>
Tells swaks to use argument(s) as the envelope-recipient for
the email, or prompt for recipient if no argument provided.
If multiple recipients are provided and the <br>
recipient domain is needed to determine routing the domain
of the last recipient provided is used.</p>

<p style="margin-top: 1em">There is no default value for
this option. If no recipients are provided via any means,
user will be prompted to provide one interactively. The only
exception to this is if <br>
a --quit-after value is provided which will cause the smtp
transaction to be terminated before the recipient is
needed.</p>

<p style="margin-top: 1em">-f, --from [email-address] <br>
Use argument as envelope-sender for email, or prompt user if
no argument specified. The string &lt;&gt; can be supplied
to mean the null sender. If user does not specify a sender
<br>
address a default value is used. The domain-part of the
default sender is a best guess at the fully-qualified domain
name of the local host. The method of determining the <br>
local-part varies. On Windows, Win32::LoginName() is used.
On unix-ish platforms, the $LOGNAME environment variable is
used if it is set. Otherwise getpwuid(3) is used. <br>
See also --force-getpwuid.</p>

<p style="margin-top: 1em">--ehlo, --lhlo, -h, --helo
[helo-string] <br>
String to use as argument to HELO/EHLO/LHLO command, or
prompt use if no argument is specified. If this option is
not used a best guess at the fully-qualified domain name of
<br>
the local host is used. If the Sys::Hostname module, which
is part of the base distribution, is not available the user
will be prompted for a HELO value. Note that <br>
Sys::Hostname has been observed to not be able to find the
local hostname in certain circumstances. This has the same
effect as if Sys::Hostname were unavailable.</p>

<p style="margin-top: 1em">-q, --quit, --quit-after
[stop-point] <br>
Point at which the transaction should be stopped. When the
requested stopping point is reached in the transaction, and
provided that swaks has not errored out prior to <br>
reaching it, swaks will send &quot;QUIT&quot; and attempt to
close the connection cleanly. These are the valid arguments
and notes about their meaning.</p>

<p style="margin-top: 1em">CONNECT, BANNER <br>
Terminate the session after receiving the greeting banner
from the target.</p>

<p style="margin-top: 1em">FIRST-HELO, FIRST-EHLO,
FIRST-LHLO <br>
In a STARTTLS (but not tls-on-connect) session, terminate
the transaction after the first of two HELOs. In a
non-STARTTLS transaction, behaves the same as HELO (see <br>
below).</p>

<p style="margin-top: 1em">XCLIENT <br>
Quit after XCLIENT is sent</p>

<p style="margin-top: 1em">TLS Quit the transaction
immediately following TLS negotiation. Note that this
happens in different places depending on whether STARTTLS or
tls-on-connect are used. This <br>
always quits after the point where TLS would have been
negotiated, regardless of whether it was attempted.</p>

<p style="margin-top: 1em">HELO, EHLO, LHLO <br>
In a STARTTLS or XCLIENT session, quit after the second
HELO. Otherwise quit after the first and only HELO.</p>

<p style="margin-top: 1em">AUTH <br>
Quit after authentication. This always quits after the point
where authentication would have been negotiated, regardless
of whether it was attempted.</p>

<p style="margin-top: 1em">MAIL, FROM <br>
Quit after MAIL FROM: is sent.</p>

<p style="margin-top: 1em">RCPT, TO <br>
Quit after RCPT TO: is sent.</p>

<p style="margin-top: 1em">--da, --drop-after [stop-point]
<br>
The option is similar to --quit-after, but instead of trying
to cleanly shut down the session it simply terminates the
session. This option accepts the same stop-points as <br>
--quit-after.</p>

<p style="margin-top: 1em">--das, --drop-after-send <br>
This option is similar to --drop-after, but instead of
dropping the connection after reading a response to the
stop-point, it drops the connection immediately after
sending <br>
stop-point.</p>

<p style="margin-top: 1em">--timeout [time] <br>
Use argument as the SMTP transaction timeout, or prompt user
if no argument given. Argument can either be a pure digit,
which will be interpretted as seconds, or can have a <br>
specifier s or m (5s = 5 seconds, 3m = 180 seconds). As a
special case, 0 means don&rsquo;t timeout the transactions.
Default value is 30s.</p>

<p style="margin-top: 1em">--protocol [protocol] <br>
Specify which protocol to use in the transaction. Valid
options are shown in the table below. Currently the
&rsquo;core&rsquo; protocols are SMTP, ESMTP, and LMTP. By
using variations <br>
of these protocol types one can tersely specify default
ports, whether authentication should be attempted, and the
type of TLS connection that should be attempted. The <br>
default protocol is ESMTP. This table demonstrates the
available arguments to --protocol and the options each sets
as a side effect:</p>

<p style="margin-top: 1em">SMTP <br>
HELO, &quot;-p 25&quot;</p>

<p style="margin-top: 1em">SSMTP <br>
EHLO-&gt;HELO, &quot;-tlsc -p 465&quot;</p>

<p style="margin-top: 1em">SSMTPA <br>
EHLO-&gt;HELO, &quot;-a -tlsc -p 465&quot;</p>

<p style="margin-top: 1em">SMTPS <br>
HELO, &quot;-tlsc -p 465&quot;</p>

<p style="margin-top: 1em">ESMTP <br>
EHLO-&gt;HELO, &quot;-p 25&quot;</p>

<p style="margin-top: 1em">ESMTPA <br>
EHLO-&gt;HELO, &quot;-a -p 25&quot;</p>

<p style="margin-top: 1em">ESMTPS <br>
EHLO-&gt;HELO, &quot;-tls -p 25&quot;</p>

<p style="margin-top: 1em">ESMTPSA <br>
EHLO-&gt;HELO, &quot;-a -tls -p 25&quot;</p>

<p style="margin-top: 1em">LMTP <br>
LHLO, &quot;-p 24&quot;</p>

<p style="margin-top: 1em">LMTPA <br>
LHLO, &quot;-a -p 24&quot;</p>

<p style="margin-top: 1em">LMTPS <br>
LHLO, &quot;-tls -p 24&quot;</p>

<p style="margin-top: 1em">LMTPSA <br>
LHLO, &quot;-a -tls -p 24&quot;</p>

<p style="margin-top: 1em">--pipeline <br>
If the remote server supports it, attempt SMTP PIPELINING
(RFC 2920).</p>

<p style="margin-top: 1em">--prdr <br>
If the server supports it, attempt Per-Recipient Data
Response (PRDR)
(https://tools.ietf.org/html/draft-hall-prdr-00.txt). PRDR
is not yet standardized, but MTAs have begun <br>
implementing the proposal.</p>

<p style="margin-top: 1em">--force-getpwuid <br>
Tell swaks to use the getpwuid method of finding the default
sender local-part instead of trying $LOGNAME first.</p>

<p style="margin-top: 1em">TLS / ENCRYPTION <br>
These are options related to encrypting the transaction.
These have been tested and confirmed to work with all three
transport methods. The Net::SSLeay module is used to <br>
perform encryption when it is requested. If this module is
not loadable swaks will either ignore the TLS request or
error out, depending on whether the request was optional.
<br>
STARTTLS is defined as an extension in the ESMTP protocol
and will be unavailable if --protocol is set to a variation
of smtp. Because it is not defined in the protocol itself,
<br>
--tls-on-connect is available for any protocol type if the
target supports it.</p>

<p style="margin-top: 1em">A local certificate is not
required for a TLS connection to be negotiated. However,
some servers use client certificate checking to verify that
the client is allowed to connect. <br>
swaks can be told to use a specific local certificate
through the use of the --tls-cert and --tls-key options.</p>

<p style="margin-top: 1em">-tls <br>
Require connection to use STARTTLS. Exit if TLS not
available for any reason (not advertised, negotiations
failed, etc).</p>

<p style="margin-top: 1em">-tlso, --tls-optional <br>
Attempt to use STARTTLS if available, continue with normal
transaction if TLS was unable to be negotiated for any
reason. Note that this is a semi-useless option as <br>
currently implemented because after a negotiation failure
the state of the connection is unknown. In some cases, like
a version mismatch, the connection should be left as <br>
plaintext. In others, like a verification failure, the
server-side may think that it should continue speaking TLS
while the client thinks it is plaintext. There may be an
<br>
attempt to add more granular state detection in the future,
but for now just be aware that odd things may happen with
this option if the TLS negotiation is attempted and <br>
fails.</p>

<p style="margin-top: 1em">-tlsos, --tls-optional-strict
<br>
Attempt to use STARTTLS if available. Proceed with
transaction if TLS is negotiated successfully or STARTTLS
not advertised. If STARTTLS is advertised but TLS
negotiations <br>
fail, treat as an error and abort transaction. Due to the
caveat noted above, this is a much more sane option than
--tls-optional.</p>

<p style="margin-top: 1em">--tlsc, --tls-on-connect <br>
Initiate a TLS connection immediately on connection.
Following common convention, if this option is specified the
default port changes from 25 to 465, though this can still
<br>
be overridden with the --port option.</p>

<p style="margin-top: 1em">-tlsp, --tls-protocol
SPECIFICATION <br>
Specify which protocols to use (or not use) when negotiating
TLS. At the time of this writing, the available protocols
are sslv2, sslv3, tlsv1, tlsv1_1, and tlsv1_2. The <br>
availability of these protocols is dependent on your
underlying OpenSSL library, so not all of these may be
available. The list of available protocols is shown in the
output <br>
of --dump (assuming TLS is available at all).</p>

<p style="margin-top: 1em">The specification string is a
comma-delimited list of protocols that can be used or not
used. For instance &rsquo;tlsv1,tlsv1_1&rsquo; will only
succeed if one of those two protocols is <br>
available on both the client and the server. Conversely,
&rsquo;no_sslv2,no_sslv3&rsquo; will attempt to negotiate
any protocol except sslv2 and sslv3. The two forms of
specification <br>
cannot be mixed.</p>

<p style="margin-top: 1em">-tls-cipher CIPHER_STRING <br>
Th argument to this option is passed to the underlying
OpenSSL library to set the list of acceptable ciphers to the
be used for the connection. The format of this string is
<br>
opaque to swaks and is defined in
http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT.
A brief example would be --tls-cipher
&rsquo;3DES:+RSA&rsquo;.</p>

<p style="margin-top: 1em">--tls-verify <br>
By default swaks does not do any certificate verification.
Setting --tls-verify will cause swaks to attempt to verify
the server&rsquo;s certificate. If this option is set and
<br>
the server&rsquo;s certificate is not verifiable (either
using the system-default CA information, or custom CA
information (see --tls-ca-path)) TLS negotiation will not
succeed.</p>

<p style="margin-top: 1em">--tls-ca-path [ /path/to/CAfile
| /path/to/CAdir/ ] <br>
By default swaks will use the underlying OpenSSL
library&rsquo;s default CA information for verifying server
certificates. --tls-ca-path allows you to specify an
alternate <br>
location. See
http://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html
for details of the file/directory contents.</p>

<p style="margin-top: 1em">--tls-cert /path/to/file <br>
Provide a path to a file containing the local certificate
swaks should use if TLS is negotiated. The file path
argument is required. As currently implemented the <br>
certificate in the file must be in PEM format. Contact the
author if there&rsquo;s a compelling need for ASN1. If this
option is set, --tls-key is also required.</p>

<p style="margin-top: 1em">--tls-key /path/to/file <br>
Provide a path to a file containing the local private key
swaks should use if TLS is negotiated. The file path
argument is required. As currently implemented the <br>
certificate in the file must be in PEM format. Contact the
author if there&rsquo;s a compelling need for ASN1. If this
option is set, --tls-cert is also required.</p>

<p style="margin-top: 1em">--tls-get-peer-cert
[/path/to/file] <br>
Get a copy of the TLS peer&rsquo;s certificate. If no
argument is given, it will be displayed to STDOUT. If an
argument is given it is assumed to be a filesystem path
specifying <br>
where the certificate should be written. The saved
certificate can then be examined using standard tools such
as the openssl command. If a file is specified its contents
<br>
will be overwritten.</p>

<p style="margin-top: 1em">AUTHENTICATION <br>
swaks will attempt to authenticate to the target mail server
if instructed to do so. This section details available
authentication types, requirements, options and their <br>
interactions, and other fine points in authentication usage.
Because authentication is defined as an extension in the
ESMTP protocol it will be unavailable if --protocol is set
<br>
to a variation of smtp.</p>

<p style="margin-top: 1em">All authentication methods
require base64 encoding. If the MIME::Base64 perl module is
loadable swaks attempts to use it to perform these
encodings. If MIME::Base64 is not <br>
available swaks will use its own onboard base64 routines.
These are slower than the MIME::Base64 routines and less
reviewed, though they have been tested thoroughly. Using the
<br>
MIME::Base64 module is encouraged.</p>

<p style="margin-top: 1em">If authentication is required
(see options below for when it is and isn&rsquo;t required)
and the requirements aren&rsquo;t met for the authentication
type available, swaks displays an error <br>
and exits. Two ways this can happen include forcing swaks to
use a specific authentication type that swaks can&rsquo;t
use due to missing requirements, or allowing swaks to use
any <br>
authentication type, but the server only advertises types
swaks can&rsquo;t support. In the former case swaks errors
out at option processing time since it knows up front it
won&rsquo;t be <br>
able to authenticate. In the latter case swaks will error
out at the authentication stage of the smtp transaction
since swaks will not be aware that it will not be able to
<br>
authenticate until that point.</p>

<p style="margin-top: 1em">Following are the supported
authentication types including any individual notes and
requirements.</p>

<p style="margin-top: 1em">The following options affect
swaks&rsquo; use of authentication. These options are all
inter-related. For instance, specifying --auth-user implies
--auth and --auth-password. <br>
Specifying --auth-optional implies --auth-user and
--auth-password, etc.</p>

<p style="margin-top: 1em">-a, --auth
[auth-type[,auth-type,...]] <br>
Require swaks to authenticate. If no argument is given, any
supported auth-types advertised by the server are tried
until one succeeds or all fail. If one or more auth- <br>
types are specified as an argument, each that the server
also supports is tried in order until one succeeds or all
fail. This option requires swaks to authenticate, so if no
<br>
common auth-types are found or no credentials succeed, swaks
displays an error and exits.</p>

<p style="margin-top: 1em">The following tables lists the
valid auth-types</p>

<p style="margin-top: 1em">LOGIN, PLAIN <br>
These basic authentication types are fully supported and
tested and have no additional requirements</p>

<p style="margin-top: 1em">CRAM-MD5 <br>
The CRAM-MD5 authenticator requires the Digest::MD5 module.
It is fully tested and believed to work against any server
that implements it.</p>

<p style="margin-top: 1em">DIGEST-MD5 <br>
The DIGEST-MD5 authenticator (RFC2831) requires the
Authen::SASL module. Version 20100211.0 and earlier used
Authen::DigestMD5 which had some protocol level errors which
<br>
prevented it from working with some servers.
Authen::SASL&rsquo;s DIGEST-MD5 handling is much more
robust.</p>

<p style="margin-top: 1em">The DIGEST-MD5 implementation in
swaks is fairly immature. It currently supports only the
&quot;auth&quot; qop type, for instance. If you have
DIGEST-MD5 experience and would <br>
like to help swaks support DIGEST-MD5 better, please get in
touch with me.</p>

<p style="margin-top: 1em">The DIGEST-MD5 protocol&rsquo;s
&quot;realm&quot; value can be set using the --auth-extra
&quot;realm&quot; keyword. If no realm is given, a
reasonable default will be used.</p>

<p style="margin-top: 1em">The DIGEST-MD5 protocol&rsquo;s
&quot;digest-uri&quot; values can be set using the
--auth-extra option. For instance, you could create the
digest-uri-value of <br>
&quot;lmtp/mail.example.com/example.com&quot; with the
option &quot;--auth-extra
dmd5-serv-type=lmtp,dmd5-host=mail.example.com,dmd5-serv-name=example.com&quot;.
The &quot;digest-uri-value&quot; <br>
string and its components is defined in RFC2831. If none of
these values are given, reasonable defaults will be
used.</p>

<p style="margin-top: 1em">CRAM-SHA1 <br>
The CRAM-SHA1 authenticator requires the Digest::SHA module.
This type has only been tested against a non-standard
implementation on an Exim server and may therefore <br>
have some implementation deficiencies.</p>

<p style="margin-top: 1em">NTLM/SPA/MSN <br>
These authenticators require the Authen::NTLM module. Note
that there are two modules using the Authen::NTLM namespace
on CPAN. The Mark Bush implementation <br>
(Authen/NTLM-1.03.tar.gz) is the version required by swaks.
This type has been tested against Exim, Communigate, and
Exchange 2007.</p>

<p style="margin-top: 1em">In addition to the standard
username and password, this authentication type can also
recognize a &quot;domain&quot;. The domain can be set using
the --auth-extra &quot;domain&quot; keyword. <br>
Note that this has never been tested with a mail server that
doesn&rsquo;t ignore DOMAIN so this may be implemented
incorrectly.</p>

<p style="margin-top: 1em">-ao, --auth-optional
[auth-type[,auth-type,...]] <br>
This option behaves identically to --auth except that it
requests authentication rather than requiring it. If no
common auth-types are found or no credentials succeed, swaks
<br>
proceeds as if authentication had not been requested.</p>

<p style="margin-top: 1em">-aos, --auth-optional-strict
[auth-type[,auth-type,...]] <br>
This option is a compromise between --auth and
--auth-optional. If no common auth-types are found, swaks
behaves as if --auth-optional were specified and proceeds
with the <br>
transaction. If swaks can&rsquo;t support requested
auth-type, the server doesn&rsquo;t advertise any common
auth-types, or if no credentials succeed, swaks behaves as
if --auth were <br>
used and exits with an error.</p>

<p style="margin-top: 1em">-au, --auth-user [username] <br>
Provide the username to be used for authentication, or
prompt the user for it if no argument is provided. The
string &lt;&gt; can be supplied to mean an empty
username.</p>

<p style="margin-top: 1em">-ap, --auth-password [password]
<br>
Provide the password to be used for authentication, or
prompt the user for it if no argument is provided. The
string &lt;&gt; can be supplied to mean an empty
password.</p>

<p style="margin-top: 1em">-ae, --auth-extra
[KEYWORD=value[,...]] <br>
Some of the authentication types allow extra information to
be included in the authentication process. Rather than add a
new option for every nook and cranny of each <br>
authenticator, the --auth-extra option allows this
information to be supplied.</p>

<p style="margin-top: 1em">The following table lists the
currently recognized keywords and the authenticators that
use them</p>

<p style="margin-top: 1em">realm, domain <br>
The realm and domain keywords are synonymous. Using either
will set the &quot;domain&quot; option in NTLM/MSN/SPA and
the &quot;realm&quot; option in DIGEST-MD5</p>

<p style="margin-top: 1em">dmd5-serv-type <br>
The dmd5-serv-type keyword is used by the DIGEST-MD5
authenticator and is used, in part, to build the
digest-uri-value string (see RFC2831)</p>

<p style="margin-top: 1em">dmd5-host <br>
The dmd5-host keyword is used by the DIGEST-MD5
authenticator and is used, in part, to build the
digest-uri-value string (see RFC2831)</p>

<p style="margin-top: 1em">dmd5-serv-name <br>
The dmd5-serv-name keyword is used by the DIGEST-MD5
authenticator and is used, in part, to build the
digest-uri-value string (see RFC2831)</p>

<p style="margin-top: 1em">-am, --auth-map
[auth-alias=auth-type[,...]] <br>
Provides a way to map alternate names onto base
authentication types. Useful for any sites that use
alternate names for common types. This functionality is
actually used <br>
internally to map types SPA and MSN onto the base type NTLM.
The command line argument to simulate this would be
&quot;--auth-map SPA=NTLM,MSN=NTLM&quot;. All of the
auth-types <br>
listed above are valid targets for mapping except SPA and
MSN.</p>

<p style="margin-top: 1em">-apt, --auth-plaintext <br>
Instead of showing AUTH strings base64 encoded as they are
transmitted, translate them to plaintext before printing on
screen.</p>

<p style="margin-top: 1em">-ahp, --auth-hide-password
[replacement string] <br>
If this option is specified, any time a readable password
would be printed to the terminal (specifically AUTH PLAIN
and AUTH LOGIN) the password is replaced with a dummy <br>
string (or the contents of &quot;replacement string&quot; if
provided). The dummy string will be base64 encoded or not
contingent on the --auth-plaintext option.</p>

<p style="margin-top: 1em">Note that --auth-hide-password
is similar, but not identical, to the --protect-prompt
option. The former protects passwords from being displayed
in the SMTP transaction <br>
regardless of how they are entered. The latter protects
sensitive strings when the user types them at the terminal,
regardless of how the string would be used.</p>

<p style="margin-top: 1em">XCLIENT OPTIONS <br>
XCLIENT is an SMTP extension introduced by the Postfix
project. XCLIENT allows a (properly-authorized) client to
tell a server to use alternate information, such as IP
address <br>
or hostname, for the client. This allows much easier paths
for testing mail server configurations. Full details on the
protocol are available at <br>
http://www.postfix.org/XCLIENT_README.html.</p>

<p style="margin-top: 1em">--xclient-addr [VALUE] <br>
--xclient-name [VALUE] <br>
--xclient-port [VALUE] <br>
--xclient-proto [VALUE] <br>
--xclient-helo [VALUE] <br>
--xclient-login [VALUE] <br>
--xclient-reverse-name [VALUE] <br>
These options specify XCLIENT attrubutes that should be sent
to the target server. If [VALUE] is not provided, swaks will
prompt and read the value on STDIN. See <br>
http://www.postfix.org/XCLIENT_README.html for official
documentation for what the attributes mean and their
possible values, including the special
&quot;[UNAVAILABLE]&quot; and <br>
&quot;[TEMPUNAVAIL]&quot; values.</p>

<p style="margin-top: 1em">By way of simple example,
setting &quot;--xclient-name foo.example.com --xclient-addr
192.168.1.1&quot; will cause swaks to send the SMTP command
&quot;XCLIENT NAME=foo.example.com <br>
ADDR=192.168.1.1&quot;.</p>

<p style="margin-top: 1em">Note that the
&quot;REVERSE_NAME&quot; attribute doesn&rsquo;t seem to
appear in the official documentation. There is a mailing
list thread that documents it, viewable at <br>

http://comments.gmane.org/gmane.mail.postfix.user/192623.</p>

<p style="margin-top: 1em">These options can all be mixed
with each other, and can be mixed with the --xclient option
(see below).</p>

<p style="margin-top: 1em">--xclient [XCLIENT_STRING] <br>
This is the &quot;free form&quot; XCLIENT option. Whatever
value is provided for XCLIENT_STRING will be sent verbatim
as the argument to the XCLIENT smtp command. For example, if
<br>
&quot;--xclient &rsquo;NAME= ADDR=192.168.1.1
FOO=bar&rsquo;&quot; is used, swaks will send the SMTP
command &quot;XCLIENT NAME= ADDR=192.168.1.1 FOO=bar&quot;.
If no XCLIENT_STRING is passed on command <br>
line, swaks will prompt and read the value on STDIN.</p>

<p style="margin-top: 1em">The primary advantage to this
over the more specific options above is that there is no
XCLIENT syntax validation here. This allows you to send
invalid XCLIENT to the target <br>
server for testing. Additionally, at least one MTA (Message
Systems&rsquo; Momentum, formerly ecelerity) implements
XCLIENT without advertising supported attributes. The <br>
--xclient option allows you to skip the &quot;supported
attributes&quot; check when communicating with this type of
MTA.</p>

<p style="margin-top: 1em">The --xclient option can be
mixed freely with the --xclient-* options above. If
&quot;--xclient-addr 192.168.0.1 --xclient &rsquo;FOO=bar
NAME=wind&rsquo;&quot; is given to swaks, &quot;XCLIENT <br>
ADDR=192.168.0.1 FOO=bar NAME=wind&quot; will be sent to the
target server.</p>

<p style="margin-top: 1em">--xclient-optional <br>
--xclient-optional-strict <br>
In normal operation, setting one of the --xclient* options
will cause a successful XCLIENT transaction to take place in
order to proceed (that is, XCLIENT needs to be <br>
advertised, all the user-requested attributes need to have
been advertised, and the server needs to have accepted
swaks&rsquo; XCLIENT request). These options change that
<br>
behavior. --xclient-optional tells swaks to proceed
unconditionally past the XCLIENT stage of the SMTP
transaction, regardless of whether it was successful. <br>
--xclient-optional-strict is similar but more granular. The
strict version will continue to XCLIENT was not advertised,
but will fail if XCLIENT was attempted but did not <br>
succeed.</p>

<p style="margin-top: 1em">PROXY OPTIONS <br>
Swaks implements the Proxy protocol as defined in
http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt.
Proxy allows an application load balancer, such as HAProxy,
to be <br>
used in front of an MTA while still allowing the MTA access
to the originating host information. Proxy support in swaks
allows direct testing of an MTA configured to expect <br>
requests from a proxy, bypassing the proxy itself during
testing.</p>

<p style="margin-top: 1em">Swaks makes no effort to ensure
that the Proxy options used are internally consistant. For
instance, --proxy-family (in version 1) is expected to be
one of &quot;TCP4&quot; or &quot;TCP6&quot;. <br>
While it will likely not make sense to the target server,
swaks makes no attempt to ensure that --proxy-source and
--proxy-dest are in the same protocol family as
--proxy-family <br>
or each other.</p>

<p style="margin-top: 1em">The --proxy option is mutually
exclusive with all other --proxy-* options except
--proxy-version.</p>

<p style="margin-top: 1em">When --proxy is not used, all of
--proxy-family, --proxy-source, --proxy-source-port,
--proxy-dest, and --proxy-dest-port are required.
Additionally, when --proxy-version is 2, <br>
--proxy-protocol and --proxy-command are optional.</p>

<p style="margin-top: 1em">--proxy-version [ 1 | 2 ] <br>
Whether to use version 1 (human readable) or version 2
(binary) of the Proxy protocol. Version 1 is the default.
Version 2 is only implemented through the &quot;address
block&quot;, <br>
and is roughly on par with the information provided in
version 1.</p>

<p style="margin-top: 1em">Note that at the time of
release, version 2 has been implemented but not fully
tested. Postfix does not implement version 2 and Exim
appears to have a bug in version 2 at <br>
the time of writing. It does mirror HAProxy&rsquo;s output
though.</p>

<p style="margin-top: 1em">--proxy [VALUE] <br>
If this option is used, its argument is passed unchanged
after the &quot;PROXY &quot; portion (or the 12 byte
protocol header for version 2) of the Proxy exchange. This
option allows <br>
sending incomplete or malformed Proxy strings to a target
server for testing. No attempt to translate or modify this
string is made, so if used with &quot;--proxy-version
2&quot; the <br>
argument should be in the appropriate binary format. This
option is mutually exclusive with all other --proxy-*
options which provide granular proxy information.</p>

<p style="margin-top: 1em">--proxy-family [VALUE] <br>
For version 1, specifies both the address family and
transport protocol. The protocol defines TCP4 and TCP6.</p>

<p style="margin-top: 1em">For version 2, specifies only
the address family. The protocol defines AF_UNSPEC, AF_INET,
AF_INET6, and AF_UNIX.</p>

<p style="margin-top: 1em">--proxy-protocol [VALUE] <br>
For version 2, specifies the transport protocol. The
protocol defines UNSPEC, STREAM, and DGRAM. The default is
STREAM. This option is unused in version 1</p>

<p style="margin-top: 1em">--proxy-command [VALUE] <br>
For version 2, specifies the transport protocol. The
protocol defines LOCAL and PROXY. The default is PROXY. This
option is unused in version 1</p>

<p style="margin-top: 1em">--proxy-source [VALUE] <br>
Specify the source address of the proxied connection.</p>

<p style="margin-top: 1em">--proxy-source-port [VALUE] <br>
Specify the source port of the proxied connection.</p>

<p style="margin-top: 1em">--proxy-dest [VALUE] <br>
Specify the destination address of the proxied
connection.</p>

<p style="margin-top: 1em">--proxy-dest-port [VALUE] <br>
Specify the destination port of the proxied connection.</p>

<p style="margin-top: 1em">DATA OPTIONS <br>
These options pertain to the contents for the DATA portion
of the SMTP transaction.</p>

<p style="margin-top: 1em">-d, --data [data-portion] <br>
Use argument as the entire contents of DATA, or prompt user
if no argument specified. If the argument &rsquo;-&rsquo; is
provided the data will be read from STDIN. If any other <br>
argument is provided and it represents the name of an
open-able file, the contents of the file will be used. Any
other argument will be itself for the DATA contents.</p>

<p style="margin-top: 1em">The value can be on one single
line, with (ascii 0x5c, 0x6e) representing where line breaks
should be placed. Leading dots will be quoted. Closing dot
is not required <br>
but is allowed. The default value for this option is
&quot;Date: %DATE%0o: %TO_ADDRESS%0rom:
%FROM_ADDRESS%0ubject: test %DATE%0essage-Id:
&lt;%MESSAGEID%&gt;0-Mailer: swaks <br>
v%SWAKS_VERSION
jetmore.org/john/code/swaks/1NEW_HEADERS%1BODY%0.</p>

<p style="margin-top: 1em">Very basic token parsing is
performed on the DATA portion. See --use-old-data-tokens for
details about the single-character tokens marked as
deprecated. The following table <br>
shows the recognized tokens and their replacement
values:</p>

<p style="margin-top: 1em">%FROM_ADDRESS% <br>
Replaced with the envelope-sender. Replaces the deprecated
%F token.</p>

<p style="margin-top: 1em">%TO_ADDRESS% <br>
Replaced with the envelope-recipient(s). Replaces the
deprecated %T token.</p>

<p style="margin-top: 1em">%DATE% <br>
Replaced with the current time in a format suitable for
inclusion in the Date: header. Note this attempts to use the
standard module Time::Local for timezone <br>
calculations. If this module is unavailable the date string
will be in GMT. Replaces the deprecated %D token.</p>

<p style="margin-top: 1em">%MESSAGEID% <br>
Replaced with the a message ID string suitable for use in a
Message-Id header. The value for this token will remain
consistent for the life of the process.</p>

<p style="margin-top: 1em">%SWAKS_VERSION% <br>
Replaced with the version of the currently-running Swaks
process.</p>

<p style="margin-top: 1em">%NEW_HEADERS% <br>
Replaced with the contents of the --add-header option. If
--add-header is not specified this token is simply removed.
Replaces the deprecated %H token.</p>

<p style="margin-top: 1em">%BODY% <br>
Replaced with the value specified by the --body option. See
--body for default. Replaces the deprecated %H token.</p>

<p style="margin-top: 1em">--use-old-data-tokens <br>
In previous versions of swaks the DATA tokens as described
in the --data option above used single-character tokens
(e.g., %F). These were not a great choice for default <br>
tokens, and proved especially troublesome with encoded,
non-english languages where these character combinations
might be common. The single-character tokens were replaced
<br>
with the slightly-less-error-prone versions listed above.
The retention of the old tokens and the inclusion of this
option to activate them are intended as a temporary aid <br>
to users who have an existing message corpus using the old
tokens. The single-character tokens and the
--use-old-data-tokens option should be considered deprecated
and <br>
likely to be removed in the next release.</p>

<p style="margin-top: 1em">-dab, --dump-as-body <br>
If --dump-as-body is used and no other option is used to
changed the default body of the message, the body is
replaced with output similar to the output of what is
provided <br>
by --dump. --dump&rsquo;s initial program capability stanza
is not displayed, and the &quot;data&quot; section is not
included. Additionally, --dump always includes passwords. By
default <br>
--dump-as-body does not include passwords, though this can
be changed with --dump-as-body-shows-password.</p>

<p style="margin-top: 1em">-dabsp,
--dump-as-body-shows-password <br>
Cause --dump-as-body to include plaintext passwords. This
option is not recommended. This option implies
--dump-as-body.</p>

<p style="margin-top: 1em">--body [body-specification] <br>
Specify the body of the email. The default is &quot;This is
a test mailing&quot;. If no argument to --body is given,
prompt to supply one interactively. If &rsquo;-&rsquo; is
supplied, the body <br>
will be read from standard input. If any other text is
provided and the text represents an open-able file, the
content of that file is used as the body. If it does not
<br>
represent an open-able file, the text itself is used as the
body.</p>

<p style="margin-top: 1em">If the message is forced to MIME
format (see --attach) the argument to this option will be
included unencoded as the first MIME part. Its content-type
will always be <br>
text/plain.</p>

<p style="margin-top: 1em">--attach
[attachment-specification] <br>
When one or more --attach option is supplied, the message is
changed into a multipart/mixed MIME message. The arguments
to --attach are processed the same as --body with <br>
regard to stdin, file contents, etc. --attach can be
supplied multiple times to create multiple attachments. By
default each attachment is attached as a <br>
application/octet-stream file. See --attach-type for
changing this behavior.</p>

<p style="margin-top: 1em">If a filename is specified, the
MIME encoding will include that file name. See --attach-name
for more detail on file naming.</p>

<p style="margin-top: 1em">It is legal for &rsquo;-&rsquo;
(STDIN) to be specified as an argument multiple times (once
for --body and multiple times for --attach). In this case,
the same content will be attached <br>
each time it is specified. This is useful for attaching the
same content with multiple MIME types.</p>

<p style="margin-top: 1em">--attach-type [mime-type] <br>
By default, content that gets MIME attached to a message
with the --attach option is encoded as
application/octet-stream. --attach-type changes the mime
type for every <br>
--attach option which follows it. It can be specified
multiple times.</p>

<p style="margin-top: 1em">--attach-name [name] <br>
This option sets the filename that will be included in the
MIME part created for the next --attach option. If no
argument is set for this option, it causes no filename <br>
information to be included for the next MIME part, even if
swaks could generate it from the local file name.</p>

<p style="margin-top: 1em">-ah, --add-header [header] <br>
This option allows headers to be added to the DATA. If %H is
present in the DATA it is replaced with the argument to this
option. If %H is not present, the argument is <br>
inserted between the first two consecutive newlines in the
DATA (that is, it is inserted at the end of the existing
headers).</p>

<p style="margin-top: 1em">The option can either be
specified multiple times or a single time with multiple
headers separated by a literal &rsquo;0 string. So,
&quot;--add-header &rsquo;Foo: bar&rsquo; --add-header
&rsquo;Baz: <br>
foo&rsquo;&quot; and &quot;--add-header &rsquo;Foo: bar0az:
foo&rsquo;&quot; end up adding the same two headers.</p>

<p style="margin-top: 1em">--header [header-and-data],
--h-Header [data] <br>
These options allow a way to change headers that already
exist in the DATA. &rsquo;--header &quot;Subject:
foo&quot;&rsquo; and &rsquo;--h-Subject foo&rsquo; are
equivalent. If the header does not already <br>
exist in the data then this argument behaves identically to
--add-header. However, if the header already exists it is
replaced with the one specified.</p>

<p style="margin-top: 1em">-g If specified, swaks will read
the DATA value for the mail from STDIN. This is equivalent
to &quot;--data -&quot;. If there is a From_ line in the
email, it will be removed (but see <br>
-nsf option). Useful for delivering real message (stored in
files) instead of using example messages.</p>

<p style="margin-top: 1em">--no-data-fixup, -ndf <br>
This option forces swaks to do no massaging of the DATA
portion of the email. This includes token replacement, From_
stripping, trailing-dot addition, --body/attachment <br>
inclusion, and any header additions. This option is really
only useful when used with --data, since the internal
default DATA portion uses tokens.</p>

<p style="margin-top: 1em">--no-strip-from, -nsf <br>
Don&rsquo;t strip the From_ line from the DATA portion, if
present.</p>

<p style="margin-top: 1em">OUTPUT OPTIONS <br>
By default swaks provides a transcript of its transactions
to its caller (STDOUT/STDERR). This transcript aims to be as
faithful a representation as possible of the transaction
<br>
though it does modify this output by adding informational
prefixes to lines and by providing plaintext versions of TLS
transactions</p>

<p style="margin-top: 1em">The &quot;informational
prefixes&quot; are referred to as transaction hints. These
hints are initially composed of those marking lines that are
output of swaks itself, either <br>
informational or error messages, and those that indicate a
line of data actually sent or received in a transaction.
This table indicates the hints and their meanings:</p>

<p style="margin-top: 1em">&quot;===&quot; <br>
Indicates an informational line generated by swaks</p>

<p style="margin-top: 1em">&quot;***&quot; <br>
Indicates an error generated within swaks</p>

<p style="margin-top: 1em">&quot; -&gt;&quot; <br>
Indicates an expected line sent by swaks to target
server</p>

<p style="margin-top: 1em">&quot; ~&gt;&quot; <br>
Indicates a TLS-encrypted, expected line sent by swaks to
target server</p>

<p style="margin-top: 1em">&quot;**&gt;&quot; <br>
Indicates an unexpected line sent by swaks to the target
server</p>

<p style="margin-top: 1em">&quot;*~&gt;&quot; <br>
Indicates a TLS-encrypted, unexpected line sent by swaks to
target server</p>

<p style="margin-top: 1em">&quot; &gt;&quot; <br>
Indicates a raw chunk of text sent by swaks to a target
server (see --show-raw-text). There is no concept of
&quot;expected&quot; or &quot;unexpected&quot; at this
level.</p>

<p style="margin-top: 1em">&quot;&lt;- &quot; <br>
Indicates an expected line sent by target server to
swaks</p>

<p style="margin-top: 1em">&quot;&lt;~ &quot; <br>
Indicates a TLS-encrypted, expected line sent by target
server to swaks</p>

<p style="margin-top: 1em">&quot;&lt;**&quot; <br>
Indicates an unexpected line sent by target server to
swaks</p>

<p style="margin-top: 1em">&quot;&lt;~*&quot; <br>
Indicates a TLS-encrypted, unexpected line sent by target
server to swaks</p>

<p style="margin-top: 1em">&quot;&lt; &quot; <br>
Indicates a raw chunk of text received by swaks from a
target server (see --show-raw-text). There is no concept of
&quot;expected&quot; or &quot;unexpected&quot; at this
level.</p>

<p style="margin-top: 1em">The following options control
what and how output is displayed to the caller.</p>

<p style="margin-top: 1em">-n, --suppress-data <br>
Summarizes the DATA portion of the SMTP transaction instead
of printing every line. This option is very helpful,
bordering on required, when using swaks to send certain test
<br>
emails. Emails with attachments, for instance, will quickly
overwhelm a terminal if the DATA is not supressed.</p>

<p style="margin-top: 1em">-stl, --show-time-lapse [i] <br>
Display time lapse between send/receive pairs. This option
is most useful when Time::HiRes is available, in which case
the time lapse will be displayed in thousandths of a <br>
second. If Time::HiRes is unavailable or &quot;i&quot; is
given as an argument the lapse will be displayed in integer
seconds only.</p>

<p style="margin-top: 1em">-nih, --no-info-hints <br>
Don&rsquo;t display the transaction hint for informational
transactions. This is most useful when needing to copy some
portiong of the informational lines, for instance the <br>
certificate output from --tls-get-peer-cert.</p>

<p style="margin-top: 1em">-nsh, --no-send-hints <br>
-nrh, --no-receive-hints <br>
-nth, --no-hints <br>
--no-send-hints and --no-receive-hints supress the
transaction prefix from send and receive lines,
respectively. This is often useful when copying some portion
of the <br>
transaction for use elsewhere (for instance,
&quot;--no-send-hints --hide-receive
--hide-informational&quot; is a useful way to get only the
client-side commands for a given <br>
transaction). --no-hints is identical to specifying both
--no-send-hints and --no-receive-hints.</p>

<p style="margin-top: 1em">Don&rsquo;t show transaction
hints (useful in conjunction with -hr to create
copy/paste-able transactions).</p>

<p style="margin-top: 1em">-raw, --show-raw-text <br>
This option will print a hex dump of raw data sent and
received by swaks. Each hex dump is the contents of a single
read or write on the network. This should be identical <br>
to what is already being displayed (with the
exceptioncharacters being removed). This option is useful in
of the seeing details when servers are sending lots of data
in <br>
single packets, or breaking up individual lines into
multiple packets. If you really need to go in depth in that
area you&rsquo;re probably better with a packet sniffer, but
this <br>
option is a good first step to seeing odd connection
issues.</p>

<p style="margin-top: 1em">--output-file
&lt;/path/to/file&gt; <br>
--output-file-stdout &lt;/path/to/file&gt; <br>
--output-file-stderr &lt;/path/to/file&gt; <br>
These options allow the user to send output to files instead
of stdout/stderr. The first option sends both to the same
file. The arguments of &amp;STDOUT and &amp;STDERR are <br>
treated specially, refering to the &quot;normal&quot; file
handles, so &quot;--output-file-stderr
&rsquo;&amp;STDOUT&rsquo;&quot; would redirect STDERR to
STDOUT.</p>

<p style="margin-top: 1em">-pp, --protect-prompt <br>
Don&rsquo;t echo user input on prompts that are potentially
sensitive (right now only authentication password). See also
--auth-hide-password</p>

<p style="margin-top: 1em">-hr, --hide-receive <br>
Don&rsquo;t display lines sent from the remote server being
received by swaks</p>

<p style="margin-top: 1em">-hs, --hide-send <br>
Don&rsquo;t display lines being sent by swaks to the remote
server</p>

<p style="margin-top: 1em">-hi, --hide-informational <br>
Don&rsquo;t display non-error informational lines from swaks
itself.</p>

<p style="margin-top: 1em">-ha, --hide-all <br>
Do not display any content to the terminal.</p>

<p style="margin-top: 1em">-S, --silent [level] <br>
Cause swaks to be silent. If no argument is given or if an
argument of &quot;1&quot; is given, print no output
unless/until an error occurs, after which all output is
shown. If an <br>
argument of &quot;2&quot; is given, only print errors. If
&quot;3&quot; is given, show no output ever.</p>

<p style="margin-top: 1em">--support <br>
Print capabilities and exit. Certain features require
non-standard perl modules. This options evaluates whether
these modules are present and displays which functionality
<br>
is available and which isn&rsquo;t, and which modules would
need to be added to gain the missing functionality.</p>

<p style="margin-top: 1em">--dump <br>
This option causes swaks to print the results of option
processing, immediately before mail would have been sent. No
mail will be sent when --dump is used. Note that --dump <br>
is considered to be a pure self-diagnosis tool and no effort
is made or will ever be made to mask passwords in the --dump
output.</p>

<p style="margin-top: 1em">--help <br>
Display this help information.</p>

<p style="margin-top: 1em">--version <br>
Display version information.</p>

<p style="margin-top: 1em">PORTABILITY <br>
OPERATING SYSTEMS <br>
This program was primarily intended for use on unix-like
operating systems, and it should work on any reasonable
version thereof. It has been developed and tested on <br>
Solaris, Linux, and Mac OS X and is feature complete on all
of these.</p>

<p style="margin-top: 1em">This program is known to
demonstrate basic functionality on Windows using
ActiveState&rsquo;s Perl. It has not been fully tested.
Known to work are basic SMTP functionality and <br>
the LOGIN, PLAIN, and CRAM-MD5 auth types. Unknown is any
TLS functionality and the NTLM/SPA and DIGEST-MD5 auth
types.</p>

<p style="margin-top: 1em">Because this program should work
anywhere Perl works, I would appreciate knowing about any
new operating systems you&rsquo;ve thoroughly used swaks on
as well as any problems <br>
encountered on a new OS.</p>

<p style="margin-top: 1em">MAIL SERVERS <br>
This program was almost exclusively developed against Exim
mail servers. It was been used casually by the author,
though not thoroughly tested, with Sendmail, Smail, <br>
Exchange, Oracle Collaboration Suite, qpsmtpd, and
Communigate. Because all functionality in swaks is based off
of known standards it should work with any fairly modern
mail <br>
server. If a problem is found, please alert the author at
the address below.</p>

<p style="margin-top: 1em">EXIT CODES <br>
0 no errors occurred</p>

<p style="margin-top: 1em">1 error parsing command line
options</p>

<p style="margin-top: 1em">2 error connecting to remote
server</p>

<p style="margin-top: 1em">3 unknown connection type</p>

<p style="margin-top: 1em">4 while running with connection
type of &quot;pipe&quot;, fatal problem writing to or
reading from the child process</p>

<p style="margin-top: 1em">5 while running with connection
type of &quot;pipe&quot;, child process died unexpectedly.
This can mean that the program specified with --pipe
doesn&rsquo;t exist.</p>

<p style="margin-top: 1em">6 Connection closed
unexpectedly. If the close is detected in response to the
&rsquo;QUIT&rsquo; swaks sends following an unexpected
response, the error code for that unexpected response <br>
is used instead. For instance, if a mail server returns a
550 response to a MAIL FROM: and then immediately closes the
connection, swaks detects that the connection is <br>
closed, but uses the more specific exit code 23 to detail
the nature of the failure. If instead the server return a
250 code and then immediately closes the connection, <br>
swaks will use the exit code 6 because there is not a more
specific exit code.</p>

<p style="margin-top: 1em">10 error in prerequisites
(needed module not available)</p>

<p style="margin-top: 1em">21 error reading initial banner
from server</p>

<p style="margin-top: 1em">22 error in HELO transaction</p>

<p style="margin-top: 1em">23 error in MAIL transaction</p>

<p style="margin-top: 1em">24 no RCPTs accepted</p>

<p style="margin-top: 1em">25 server returned error to DATA
request</p>

<p style="margin-top: 1em">26 server did not accept mail
following data</p>

<p style="margin-top: 1em">27 server returned error after
normal-session quit request</p>

<p style="margin-top: 1em">28 error in AUTH transaction</p>

<p style="margin-top: 1em">29 error in TLS transaction</p>

<p style="margin-top: 1em">30 PRDR requested/required but
not advertised</p>

<p style="margin-top: 1em">32 error in EHLO following TLS
negotiation</p>

<p style="margin-top: 1em">33 error in XCLIENT
transaction</p>

<p style="margin-top: 1em">34 error in EHLO following
XCLIENT</p>

<p style="margin-top: 1em">35 error in PROXY option
processing</p>

<p style="margin-top: 1em">36 error sending PROXY
banner</p>

<p style="margin-top: 1em">ABOUT THE NAME <br>
The name &quot;swaks&quot; is a (sort-of) acronym for
&quot;SWiss Army Knife Smtp&quot;. It was chosen to be
fairly distinct and pronounceable. While &quot;swaks&quot;
is unique as the name of a software <br>
package, it has some other, non-software meanings. Please
send in other uses of &quot;swak&quot; or &quot;swaks&quot;
for inclusion.</p>

<p style="margin-top: 1em">&quot;Sealed With A Kiss&quot;
<br>
SWAK/SWAKs turns up occasionally on the internet with the
meaning &quot;with love&quot;.</p>

<p style="margin-top: 1em">bad / poor / ill (Afrikaans)
<br>
Seen in the headline &quot;SA se bes en swaks gekledes in
2011&quot;, which was translated as &quot;best and worst
dressed&quot; by native speakers. Google Translate
doesn&rsquo;t like &quot;swaks <br>
gekledes&quot;, but it will translate &quot;swak&quot; as
&quot;poor&quot; and &quot;swak geklede&quot; as
&quot;ill-dressed&quot;.</p>

<p style="margin-top: 1em">CONTACT <br>
proj-swaks@jetmore.net <br>
Please use this address for general contact, questions,
patches, requests, etc.</p>

<p style="margin-top: 1em">updates-swaks@jetmore.net <br>
If you would like to be put on a list to receive
notifications when a new version of swaks is released,
please send an email to this address.</p>


<p style="margin-top: 1em">http://www.jetmore.org/john/code/swaks/
<br>
Change logs, this help, and the latest version is found at
this link.</p>

<p style="margin-top: 1em">perl v5.24.1 2017-01-02
SWAKS(1)</p>
<hr>
</body>
</html>
