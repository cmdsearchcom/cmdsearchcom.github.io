<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OTR_PARSE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OTR_PARSE(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">OTR_PARSE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
otr_parse, otr_sesskeys, otr_mackey, otr_readforge, otr_modify, otr_remac -
  Process Off-the-Record Messaging transcripts
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>otr_parse</b>
<div>&#x00A0;</div>
<b>otr_sesskeys</b> <i>our_privkey their_pubkey</i>
<div>&#x00A0;</div>
<b>otr_mackey</b> <i>aes_enc_key</i>
<div>&#x00A0;</div>
<b>otr_readforge</b> <i>aes_enc_key [newmsg]</i>
<div>&#x00A0;</div>
<b>otr_modify</b> <i>mackey old_text new_text offset</i>
<div>&#x00A0;</div>
<b>otr_remac</b> <i>mackey sender_instance receiver_instance flags snd_keyid
  rcv_keyid pubkey counter encdata revealed_mackeys</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Off-the-Record (OTR) Messaging allows you to have private conversations over IM
  by providing:
<br/>
 - Encryption
<br/>
 - No one else can read your instant messages.
<br/>
 - Authentication
<br/>
 - You are assured the correspondent is who you think it is.
<br/>
 - Deniability
<br/>
 - The messages you send do <i>not</i> have digital signatures that are
<br/>
 checkable by a third party. Anyone can forge messages after a
<br/>
 conversation to make them look like they came from you. However,
<br/>
 <i>during</i> a conversation, your correspondent is assured the messages
<br/>
 he sees are authentic and unmodified.
<br/>
 - Perfect forward secrecy
<br/>
 - If you lose control of your private keys, no previous conversation
<br/>
 is compromised.
<div class="Pp"></div>
The OTR Toolkit is useful for analyzing and/or forging OTR messages. Why do we
  offer this? Primarily, to make absolutely sure that transcripts of OTR
  conversations are really easy to forge after the fact. [Note that
  <i>during</i> an OTR conversation, messages can't be forged without real-time
  access to the secret keys on the participants' computers, and in that case,
  all security has already been lost.] Easily-forgeable transcripts help us
  provide the &quot;Deniability&quot; property: if someone claims you said
  something over OTR, they'll have no proof, as anyone at all can modify a
  transcript to make it say whatever they like, and still have all the
  verification come out correctly.
<div style="height: 1.00em;">&#x00A0;</div>
Here are the six programs in the toolkit:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_parse
<br/>
 - Parse OTR messages given on stdin, showing the values of all the
<br/>
 fields in OTR protocol messages.
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_sesskeys our_privkey their_pubkey
<br/>
 - Shows our public key, the session id, two AES and two MAC keys
<br/>
 derived from the given Diffie-Hellman keys (one private, one public).
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_mackey aes_enc_key
<br/>
 - Shows the MAC key derived from the given AES key.
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_readforge aes_enc_key [newmsg]
<br/>
 - Decrypts an OTR Data message using the given AES key, and displays
<br/>
 the message.
<br/>
 - If newmsg is given, replace the message with that one, encrypt
<br/>
 and MAC it properly, and output the resulting OTR Data Message.
<br/>
 This works even if the given key was not correct for the original
<br/>
 message, so as to enable complete forgeries.
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_modify mackey old_text new_text offset
<br/>
 - Even if you can't read the data because you don't know either
<br/>
 the AES key or the Diffie-Hellman private key, but you can make a
<br/>
 good guess that the substring &quot;old_text&quot; appears at the given
<br/>
 offset in the message, replace the old_text with the new_text
<br/>
 (which must be of the same length), recalculate the MAC with the
<br/>
 given mackey, and output the resulting Data message.
<br/>
 - Note that, even if you don't know any text in an existing message,
<br/>
 you can still forge messages of your choice using the
<br/>
 otr_readforge command, above.
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 - otr_remac mackey sender_instance receiver_instance flags snd_keyid rcv_keyid
  pubkey counter encdata revealed_mackeys
<br/>
 - Make a new OTR protocol version 3 Data Message, with the given
<br/>
 pieces (note that the data part is already encrypted). MAC it
<br/>
 with the given mackey.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>Off-the-Record Messaging</b>, at
  <a class="Lk" title="Lk" href="https://www.cypherpunks.ca/otr/">https://www.cypherpunks.ca/otr/</a>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
otr_toolkit was written by the OTR Dev Team &lt;otr@cypherpunks.ca&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 14, 2012</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
