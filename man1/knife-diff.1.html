<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>KNIFE-DIFF(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">KNIFE-DIFF(1)</td>
    <td class="head-vol">knife diff</td>
    <td class="head-rtitle">KNIFE-DIFF(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
knife-diff - The man page for the knife diff subcommand.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>knife diff</b> subcommand is used to compare the differences between
  files and directories on the Chef server and in the chef-repo. For example, to
  compare files on the Chef server prior to an uploading or downloading files
  using the <b>knife download</b> and <b>knife upload</b> subcommands, or to
  ensure that certain files in multiple production environments are the same.
  This subcommand is similar to the <b>git diff</b> command that can be used to
  diff what is in the chef-repo with what is synced to a git repository.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Syntax</b>
<div style="height: 1.00em;">&#x00A0;</div>
This subcommand has the following syntax:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ knife diff [PATTERN...] (options)
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Options</b>
<div style="height: 1.00em;">&#x00A0;</div>
This subcommand has the following options:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-c CONFIG_FILE</b>, <b>--config
    CONFIG_FILE</b></b></dt>
  <dd class="It-tag">The configuration file to use.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--chef-repo-path PATH</b></b></dt>
  <dd class="It-tag">The path to the chef-repo. This setting will override the
      default path to the chef-repo. Default: same as specified by
      <b>chef_repo_path</b> in config.rb.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--chef-zero-port PORT</b></b></dt>
  <dd class="It-tag">The port on which chef-zero will listen.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--[no-]color</b></b></dt>
  <dd class="It-tag">Use to view colored output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--cookbook-version VERSION</b></b></dt>
  <dd class="It-tag">The version of a cookbook to be downloaded.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--concurrency</b></b></dt>
  <dd class="It-tag">The number of allowed concurrent connections. Default:
      <b>10</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-d</b>, <b>--disable-editing</b></b></dt>
  <dd class="It-tag">Use to prevent the $EDITOR from being opened and to accept
      data as-is.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--defaults</b></b></dt>
  <dd class="It-tag">Use to have knife use the default value instead of asking a
      user to provide one.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--diff-filter=[(A|D|M|T)...[*]]</b></b></dt>
  <dd class="It-tag">Use to select only files that have been added (<b>A</b>),
      deleted ( <b>D</b>), modified (<b>M</b>), and/or have had their type
      changed ( <b>T</b>). Any combination of filter characters may be used,
      including no filter characters. Use <b>*</b> to select all paths if a file
      matches other criteria in the comparison. Default value: <b>nil</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-e EDITOR</b>, <b>--editor EDITOR</b></b></dt>
  <dd class="It-tag">The $EDITOR that is used for all interactive commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-E ENVIRONMENT</b>, <b>--environment
    ENVIRONMENT</b></b></dt>
  <dd class="It-tag">The name of the environment. When this option is added to a
      command, the command will run only against the named environment.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-F FORMAT</b>, <b>--format FORMAT</b></b></dt>
  <dd class="It-tag">The output format: <b>summary</b> (default), <b>text</b>,
      <b>json</b>, <b>yaml</b>, and <b>pp</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-h</b>, <b>--help</b></b></dt>
  <dd class="It-tag">Shows help for the command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-k KEY</b>, <b>--key KEY</b></b></dt>
  <dd class="It-tag">The private key that knife will use to sign requests made
      by the API client to the Chef server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--name-only</b></b></dt>
  <dd class="It-tag">Use to show only the names of modified files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--name-status</b></b></dt>
  <dd class="It-tag">Use to show only the names of files with a status of
      <b>Added</b>, <b>Deleted</b>, <b>Modified</b>, or <b>Type
    Changed</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--no-recurse</b></b></dt>
  <dd class="It-tag">Use <b>--no-recurse</b> to disable listing a directory
      recursively. Default: <b>--recurse</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--print-after</b></b></dt>
  <dd class="It-tag">Use to show data after a destructive operation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--repo-mode MODE</b></b></dt>
  <dd class="It-tag">The layout of the local chef-repo. Possible values:
      <b>static</b>, <b>everything</b>, or <b>hosted_everything</b>. Use
      <b>static</b> for just roles, environments, cookbooks, and data bags. By
      default, <b>everything</b> and <b>hosted_everything</b> are dynamically
      selected depending on the server type. Default: <b>everything</b> /
      <b>hosted_everything</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-s URL</b>, <b>--server-url URL</b></b></dt>
  <dd class="It-tag">The URL for the Chef server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-u USER</b>, <b>--user USER</b></b></dt>
  <dd class="It-tag">The user name used by knife to sign requests made by the
      API client to the Chef server. Authentication will fail if the user name
      does not match the private key.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-v</b>, <b>--version</b></b></dt>
  <dd class="It-tag">The version of the chef-client.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-V</b>, <b>--verbose</b></b></dt>
  <dd class="It-tag">Set for more verbose outputs. Use <b>-VV</b> for maximum
      verbosity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-y</b>, <b>--yes</b></b></dt>
  <dd class="It-tag">Use to respond to all confirmation prompts with
      &quot;Yes&quot;. knife will not ask for confirmation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-z</b>, <b>--local-mode</b></b></dt>
  <dd class="It-tag">Use to run the chef-client in local mode. This allows all
      commands that work against the Chef server to also work against the local
      chef-repo.</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>knife.rb File Settings</b>
<div style="height: 1.00em;">&#x00A0;</div>
In addition to the default settings in a knife.rb file, there are other
  subcommand-specific settings that can be added. When a subcommand is run,
  knife will use:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">1.</dt>
  <dd class="It-tag">A value passed via the command-line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2.</dt>
  <dd class="It-tag">A value contained in the knife.rb file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3.</dt>
  <dd class="It-tag">The default value</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
A value passed via the command line will override a value in the knife.rb file;
  a value in a knife.rb file will override a default value.
<div style="height: 1.00em;">&#x00A0;</div>
The following <b>knife diff</b> settings can be added to the knife.rb file:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:chef_repo_path]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--chef-repo-path</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:concurrency]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--concurrency</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:name_only]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--name-only</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:name_status]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--name-status</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:recurse]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--recurse</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>knife[:repo_mode]</b></b></dt>
  <dd class="It-tag">Use to add the <b>--repo-mode</b> option.</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Examples</b>
<div style="height: 1.00em;">&#x00A0;</div>
To compare the <b>base.json</b> role to a <b>webserver.json</b> role, enter:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ knife diff roles/base.json roles/webserver.json
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To compare the differences between the local chef-repo and the files that are on
  the Chef server, enter:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ knife diff
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To diff a node named <b>node-lb</b> and then only return files that have been
  added, deleted, modified, or changed, enter:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ knife diff --name-status node-lb
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
to return something like:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
node-lb/recipes/eip.rb
node-lb/recipes/heartbeat-int.rb
node-lb/templates/default/corpsite.conf.erb
node-lb/files/default/wildcard.node.com.crt
node-lb/files/default/wildcard.node.com.crt-2009
node-lb/files/default/wildcard.node.com.key
node-lb/.gitignore
node-lb/Rakefile
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Chef</div>
<table class="foot">
  <tr>
    <td class="foot-date">Chef 12.0</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
