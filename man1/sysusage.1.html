<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SYSUSAGE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SYSUSAGE(1)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">SYSUSAGE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
SysUsage v5.5 - System Monitoring Tool
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
SysUsage is a tool used to continuously monitor a system and generate
  daily/weekly/monthly/yearly graphical report using rrdtool and sar.
<h1 class="Sh" title="Sh" id="FEATURES"><a class="selflink" href="#FEATURES">FEATURES</a></h1>
SysUsage generate graphical reports on all system activity information. His
  periodical reports allow you to keep track of the machine activity during his
  life and will be a great help for performance analysis and resources
  management.
<div class="Pp"></div>
SysUsage can be run periodically from 10 seconds cycle in daemon mode to 1
  minute or more using crond.
<div class="Pp"></div>
SysUsage can be run from a central server to call a ssh remote execution of the
  sysusage perl script so that collected data will be stored in this central
  place. You also will have just one place where rrdtool and related Perl
  modules need to be installed as well as just one place where sysusagegraph or
  sysusagejqgraph need to be executed.
<h2 class="Ss" title="Ss" id="CPUs"><a class="selflink" href="#CPUs">CPUs</a></h2>
<pre>
        - CPUs distribution usage (user, nice, system).
        - CPUs global usage (total cpu used, iowait).
        - CPUs virtualized usage (steal, guest).
</pre>
<h2 class="Ss" title="Ss" id="Memory"><a class="selflink" href="#Memory">Memory</a></h2>
<pre>
        - Memory usage (with and without cache).
        - Swap usage (with and without cache).
        - Amount of memory need for current workload.
        - Posix share memory.
        - Hugepages utilisation
        - Active versus inactive memory
        - Dirty memeory that need to be written to disk
</pre>
<h2 class="Ss" title="Ss" id="I/O"><a class="selflink" href="#I/O">I/O</a></h2>
<pre>
        - Context switches per second.
        - Interrupts per second.
        - Page swapping.
        - Page I/O stats.
        - I/O request stats.
        - I/O block stats.
</pre>
<h2 class="Ss" title="Ss" id="Network"><a class="selflink" href="#Network">Network</a></h2>
<pre>
        - TCP connections per second.
        - TCP segments per second.
        - Number of socket in use (Total, TCP and UDP).
        - Number of socket in TIME_WAIT state.
        - Active network interface usage.
        - Active network interface bad packet, dropping, collision.
</pre>
<h2 class="Ss" title="Ss" id="Devices"><a class="selflink" href="#Devices">Devices</a></h2>
<pre>
        - CPU time for I/O on device.
        - Read/Write sectors on device.
        - Disk throughput on device.
        - I/O workload on device.       
        - Times for I/O requests issued to device.
        - Hard drive temperature if your hardward support it (with hddtemp).
        - MotherBoard/CPU/Remote temperature reported by sensors or sar.
        - Fan RPM reported by sensors.
</pre>
<h2 class="Ss" title="Ss" id="Files"><a class="selflink" href="#Files">Files</a></h2>
<pre>
        - Number of open file.
        - Number of file in a queue directory.
        - Disk space used on mounted partition.
</pre>
<h2 class="Ss" title="Ss" id="Process"><a class="selflink" href="#Process">Process</a></h2>
<pre>
        - Load average.
        - Process created per second.
        - Number of running process (ex: sendmail, httpd, oracle, etc.).
        - Number of running thread (ex: mysqld, amarok, etc.).
        - Number of task blocked waiting for I/O
</pre>
<h2 class="Ss" title="Ss" id="Notification"><a class="selflink" href="#Notification">Notification</a></h2>
You can have mail or Nagios notification when some monitored values are outside
  max/min threshold values for all type of monitoring.
<h2 class="Ss" title="Ss" id="Plugins"><a class="selflink" href="#Plugins">Plugins</a></h2>
With SysUsage you can create your own monitoring plugins. Any script or program
  can be embeded in SysUsage provided that it return up to 3 numeric values. The
  graphic title and labels are defined in the configuration file.
<h2 class="Ss" title="Ss" id="Remote_call"><a class="selflink" href="#Remote_call">Remote
  call</a></h2>
SysUsage can be installed and run onto a central server that will be used to
  store statistics data by periodically calling sysusage on remote host using
  SSH. This central place will also be in charge to renderer HTML plages and
  graphics for all hosts. This will allow to simplify the SysUsage installation
  on remote host that will only require sysstat and rsysusage.
<h1 class="Sh" title="Sh" id="REQUIREMENT"><a class="selflink" href="#REQUIREMENT">REQUIREMENT</a></h1>
<h2 class="Ss" title="Ss" id="rrdtool"><a class="selflink" href="#rrdtool">rrdtool</a></h2>
You need to install rrdtool. You can find it at:
<div class="Pp"></div>
<pre>
        http://people.ee.ethz.ch/~oetiker/
</pre>
<div class="Pp"></div>
To use the RRDs perl module you must use the following command to compile the
  distrib:
<div class="Pp"></div>
<pre>
        make site-perl-install
</pre>
<div class="Pp"></div>
This installation is optional if sysusage is installed on a remote host.
<h2 class="Ss" title="Ss" id="sysstat"><a class="selflink" href="#sysstat">sysstat</a></h2>
You also need sar to collect statistics. Sar is part of the sysstat package. You
  can find it here :
<div class="Pp"></div>
<pre>
        http://freshmeat.net/projects/sysstat/
</pre>
<div class="Pp"></div>
If you plan to use threshold notification you must have Net::SMTP installed. It
  can be found on CPAN (http://search.cpan.org)
<h2 class="Ss" title="Ss" id="Perl_modules"><a class="selflink" href="#Perl_modules">Perl
  modules</a></h2>
Sysusage can be run in a central place to collect remote sysusage statistics
  using ssh. The remote calls are proceed simultaneously using fork with the
  Proc::Queue Perl module.
<div class="Pp"></div>
If you're plan tu use sysusagegraph instead of sysusagejqgrpah you will also
  need the GD and GD::Graph3D Perl modules.
<div class="Pp"></div>
All these modules are always available from CPAN (http://search.cpan.org/) and
  may at least be installed on the central server. On remote host this is
  optional and depend if you want to run it on each server or by ssh from a
  central place.
<h2 class="Ss" title="Ss" id="Nagios_nsca_client_(optional)"><a class="selflink" href="#Nagios_nsca_client_(optional)">Nagios
  nsca client (optional)</a></h2>
If you want to send message to Nagios you need to install nsca-2.7.2.tar.gz or a
  more recent version. You can get it here:
<div class="Pp"></div>
<pre>
        http://sourceforge.net/projects/nagios/files/
</pre>
<h2 class="Ss" title="Ss" id="hddtemp_and_sensors_(optional)"><a class="selflink" href="#hddtemp_and_sensors_(optional)">hddtemp
  and sensors (optional)</a></h2>
If you want to monitor your hard drive temperature you must install a small
  utility called hddtemp. You can download it from
  http://download.savannah.gnu.org/releases/hddtemp/. Run it to see if your hard
  drive have a temperature sensor.
<div class="Pp"></div>
You can also use sensors to monitor your cpu temperature and fan speed. If you
  harware support it run sensors-detect and load the required kernel modules at
  boot time.
<h1 class="Sh" title="Sh" id="INSTALLATION"><a class="selflink" href="#INSTALLATION">INSTALLATION</a></h1>
<h2 class="Ss" title="Ss" id="Quick_install"><a class="selflink" href="#Quick_install">Quick
  install</a></h2>
Simply run the following commands:
<div class="Pp"></div>
<pre>
        perl Makefile.PL
        make &amp;&amp; make install
</pre>
<div class="Pp"></div>
By default it will copy the perl programs into /usr/local/sysusage/bin and the
  HTML output will be done to /var/www/htdocs/sysusage/. The configuration file
  is /usr/local/sysusage/etc/sysusage.cfg and all RRD Bekerley DB databases from
  rrdtool will be saved under /usr/local/sysusage/rrdfiles.
<div class="Pp"></div>
If you plan to run sysusage on different servers from a central place you may
  just want to install the rsysusage Perl script on remote hosts. So proceed as
  follow:
<div class="Pp"></div>
<pre>
        perl Makefile.PL REMOTE=1
        make &amp;&amp; make install
</pre>
<div class="Pp"></div>
It will copy the only the rsysusage into /usr/local/sysusage/bin and the
  configuration file under /usr/local/sysusage/etc/sysusage.cfg. The RRD data
  directory will be created under /usr/local/sysusage/rrdfiles but just to hold
  the *.cnt files relatives to the count of alert attempt on threshold exceed.
<h2 class="Ss" title="Ss" id="Custom_install"><a class="selflink" href="#Custom_install">Custom
  install</a></h2>
You can overwrite all install path with the following Makefile.PL arguments.
  Here are the default values:
<div class="Pp"></div>
<pre>
        BINDIR=/usr/local/sysusage/bin
        CONFDIR=/usr/local/sysusage/etc
        PIDDIR=/usr/local/sysusage/etc
        BASEDIR=/usr/local/sysusage/rrdfiles
        PLUGINDIR=/usr/local/sysusage/plugins
        HTMLDIR=/var/www/htdocs/sysusage
        MANDIR=/usr/local/sysusage/doc
        DOCDIR=/usr/local/sysusage/doc
        REMOTE=
</pre>
<div class="Pp"></div>
For example on a RedHat System you may prefer install SysUsage as this:
<div class="Pp"></div>
<pre>
        perl Makefile.PL BINDIR=/usr/bin CONFDIR=/etc PIDDIR=/var/run \
                BASEDIR=/var/lib/sysusage HTMLDIR=/var/www/html/sysusage \
                MANDIR=/usr/man/man1 DOCDIR=/usr/share/doc/sysusage
</pre>
<div class="Pp"></div>
If you are installing sysusage on a host that will be call by ssh from a central
  place, you may want to install just what is necessary and not more:
<div class="Pp"></div>
<pre>
        perl Makefile.PL BINDIR=/usr/bin CONFDIR=/etc PIDDIR=/var/run \
                MANDIR=/usr/man/man1 DOCDIR=/usr/share/doc/sysusage \
                REMOTE=1
</pre>
<div class="Pp"></div>
This will just install the rsysusage Perl script, the configuration file and
  documentation. So that you don't need to install extra Perl modules and other
  graphics related things.
<h2 class="Ss" title="Ss" id="Package/binary_install"><a class="selflink" href="#Package/binary_install">Package/binary
  install</a></h2>
In directory packaging/ you will find all scripts to build RPM, slackBuild and
  debian package. See README in this directory to know how to build these
  packages.
<h2 class="Ss" title="Ss" id="Previous_version"><a class="selflink" href="#Previous_version">Previous
  version</a></h2>
Previous version used to ask a lot of questions during install, this was removed
  since version 3.0 to the benefice of simplicity and a default configuration
  file.
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
SysUsage consist in two main Perl scripts, sysusage and sysusagegraph. Once you
  have correctly installed and configured SysUsage the best way to execute them
  is by setting a cron job. If you prefer javascript graphics instead of
  GD::Graph images use sysusagejqgraph that is based on jqplot javascript
  library.
<h2 class="Ss" title="Ss" id="sysusage"><a class="selflink" href="#sysusage">sysusage</a></h2>
The script sysusage is responsible of collecting system informations at a given
  interval and store them into rrdtool database files.
<div class="Pp"></div>
As it is very fast you can set running interval time to 1 minute. This is the
  default pooling interval used in configuration and graph reports. If you
  change this interval you must also change it in the configuration file
  otherwise your graph will be false. See the INTERVAL configuration directive.
<div class="Pp"></div>
Here is how I use it with a default installation:
<div class="Pp"></div>
<pre>
        */1 * * * * /usr/local/sysusage/bin/sysusage &gt; /dev/null 2&gt;&amp;1
</pre>
<h2 class="Ss" title="Ss" id="rsysusage"><a class="selflink" href="#rsysusage">rsysusage</a></h2>
This script do the same things as the sysusage Perl script but instead of
  storing collected datas on file it will dump them to the standard output. This
  script is used instead of the sysusage Perl script by a ssh call from a
  central server where the local sysusage will store the statistics retrieved
  from multiple servers.
<div class="Pp"></div>
<pre>
        /usr/local/sysusage/bin/rsysusage -r remote_hostname
</pre>
<div class="Pp"></div>
Where 'remote_hostname' is the hostname given in the [REMOTE ...] configuration
  section.
<h2 class="Ss" title="Ss" id="sysusagegraph_/_sysusagejqgraph"><a class="selflink" href="#sysusagegraph_/_sysusagejqgraph">sysusagegraph
  / sysusagejqgraph</a></h2>
The perl script sysusagegraph is used to draw PNG graphs and write HTML file. As
  he knows the pooling interval given in the configuration file it can be run at
  any time. I used to run it each five minutes but you can run it each hours or
  more this is the same.
<div class="Pp"></div>
<pre>
        */5 * * * * /usr/local/sysusage/bin/sysusagegraph &gt; /dev/null 2&gt;&amp;1
</pre>
<div class="Pp"></div>
Since release v4.0 of SysUsage there's a JQuery plotting replacement of rrdGraph
  that only write HTML files with all javascript code to allow the client
  browser to draw the graphs. To enable this feature you just have to use
  sysusagejqgrpah instead.
<div class="Pp"></div>
<pre>
        */5 * * * * /usr/local/sysusage/bin/sysusagejqgraph &gt; /dev/null 2&gt;&amp;1
</pre>
<div class="Pp"></div>
There's some more resources javascript libraries and CSS files to install. The
  SysUsage installer will do the job for you. This remove the requirement of the
  GD, GD::Graph and GD::Graph3D Perl modules.
<h2 class="Ss" title="Ss" id="sysusage.cfg"><a class="selflink" href="#sysusage.cfg">sysusage.cfg</a></h2>
If you have change the default installation path (/usr/local/sysusage) you may
  need to give these scripts the path to the configuration file as command line
  argument using -c option. To know what arguments can be passed use option -h
  or --help.
<div class="Pp"></div>
Note that since version 3.0 the default configuration path in these scripts is
  set during installation. So you may not need anymore to edit these scripts or
  give the path of the configuration file as command line argument.
<div class="Pp"></div>
See CONFIGURATION chapter for more information on howto configure your system
  monitoring.
<h2 class="Ss" title="Ss" id="Daemon_mode"><a class="selflink" href="#Daemon_mode">Daemon
  mode</a></h2>
Crond is good for scheduling but not under the minute. If you want to monitor
  your system within an interval under the minute you may want to run sysusage
  in daemon mode. To do that, just change the INTERVAL to the desired timer in
  the configuration file and the DAEMON directive to 1.
<h2 class="Ss" title="Ss" id="Debug_mode"><a class="selflink" href="#Debug_mode">Debug
  mode</a></h2>
Some time things don't appear as you wanted. The best way to see what's going
  wrong is to run sysusage in debug mode. This mode allow you to see all values
  extracted from sar and other tools. Use the --debug option for that, this mode
  prevent sysusage to store data in the rrdfiles. Command:
<div class="Pp"></div>
<pre>
        /usr/local/sysusage/bin/sysusage --debug
</pre>
<div class="Pp"></div>
Please, run this command and check the result before sending bug report.
<h2 class="Ss" title="Ss" id="Output"><a class="selflink" href="#Output">Output</a></h2>
Once sysusage and sysusagegraph are running since some cycles, run your favorite
  browser and take a look at the output directory. By default:
<div class="Pp"></div>
<pre>
        http://my.server.dom/sysusage/
</pre>
<div class="Pp"></div>
If you have special URI and/or port remember to modify the URL configuration
  directive without that the web interface will not works.
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
During installation a default configuration file sysusage.cfg is generated. The
  default settings are good enougth to report essential information of your
  system, but if you want to monitor some processes, queue directories or some
  devices you must edit this file by hand.
<div class="Pp"></div>
Here is the format of the configuration file and all directives. There is three
  section, the first one set the general parameters of the application, the
  second set the parameters related to SMTP or Nagios notification at threshold
  exceed and the last configure all type of system information you may want to
  monitor.
<div class="Pp"></div>
Full sample of configuration file:
<div class="Pp"></div>
<pre>
        [GENERAL]
        DEBUG       = 0
        DATA_DIR    = /usr/local/sysusage/rrdfiles
        PID_DIR     = /usr/local/sysusage/etc
        DEST_DIR    = /var/www/htdocs/sysusage
        SAR_BIN     = /usr/bin/sar
        UPTIME      = /usr/bin/uptime
        HOSTNAME    = /bin/hostname
        INTERVAL    = 60
        SKIP        = 12:00/14:00 20:00/06:00
        HDDTEMP_BIN = /usr/local/sbin/hddtemp
        SENSORS_BIN = /usr/bin/sensors
        DAEMON      = 0
        GRAPH_WIDTH = 550
        GRAPH_HEIGHT= 200
        FLAMING     = 0
        HIRES       = 0
        LINE_SIZE   = 2
        PROC_QSIZE  = 4
        RESRC_URL   =
        SSH_BIN     = /usr/bin/ssh
        SSH_OPTION  = -o ConnectTimeout=5 -o PreferredAuthentications=hostbased,publickey
        SSH_USER    =
        SSH_IDENTITY=
        [ALARM]
        WARN_MODE   = 0
        ALARM_PROG  = /usr/local/sysusage/bin/sysusagewarn
        SMTP        = localhost
        FROM        = root@localhost
        TO          = root@localhost
        NAGIOS      = /usr/local/nagios/bin/submit_check_result
        UPPER_LEVEL = 1
        LOWER_LEVEL = 2
        URL         =
        [MONITOR]
        load:threshold_max_value
        blocked:threshold_max_value
        cpu:threshold_max_value
        cswch:threshold_max_value
        intr:threshold_max_value
        mem:threshold_max_value
        dirty:threshold_max_value
        swap:threshold_max_value
        work:threshold_max_value
        share:threshold_max_value
        sock:threshold_max_value
        socktw:threshold_max_value
        io:threshold_max_value
        file:threshold_max_value
        page:threshold_max_value
        pcrea:threshold_max_value
        pswap:threshold_max_value
        net:threshold_max_value
        tcp:threshold_max_value
        err:threshold_max_value
        disk:threshold_max_value
        proc:proc_name:threshold_max_value:threshold_min_value
        tproc:proc_name:threshold_max_value:threshold_min_value
        queue:path_queue_dir:threshold_max_value
        hddtemp:device:threshold_max_value
        dev:device(alias):threshold_max_value
        dev:device(alias):rpm_speed:raid_type:nb_disk
        work:threshold_max_value
        sensors:pattern:threshold_max_value
        temp:device:threshold_max_value
        fan:device:threshold_max_value
        huge:threshold_max_value
        [PLUGIN testplug]
        title:Sysage Test plugin
        menu:Database
        enable:no
        program:/usr/local/sysusage/plugins/plugin-sample.pl
        minThreshold:0
        maxThreshold:10
        verticalLabel:Number of seconds
        label1:Total seconds
        label2:
        label3:
        legend1:seconds
        legend2:
        legend3:
        remote:yes
        [REMOTE hostname1]
        enable:no
        ssh_user:monitor
        ssh_identity:/home/monitor/.ssh/id_rsa
        #ssh_options: -o ConnectTimeout=5 -o PreferredAuthentications=hostbased,publickey
        #ssh_command:
        remote_sysusage:/usr/local/sysusage/bin/rsysusage
        #[GROUP Web Servers]
        #hostname1
        #hostname2
</pre>
<h2 class="Ss" title="Ss" id="Section_GENERAL"><a class="selflink" href="#Section_GENERAL">Section
  GENERAL</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">DEBUG = 0|1</dt>
  <dd class="It-tag">This option is used to set debug mode. If set to 1 then
      sysusage and sysusagegraph just show what they do but don't create or send
      anything.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">DATA_DIR = /path/to/rrdfiles</dt>
  <dd class="It-tag">This option is used to set te ouput directory for all
      RRDTOOL database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PID_DIR = /path/to/piddir</dt>
  <dd class="It-tag">sysusage and sysusagegraph use a file to store the pid of
      the running process to prevent simultaneous run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">DEST_DIR = /path/to/html_output</dt>
  <dd class="It-tag">Set the path to the directory where all HTML and graph
      files should be created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SAR_BIN = /path/to/sar_binary</dt>
  <dd class="It-tag">sysusage use sar, part of the sysstat distribution to grab
      system information so we need to know where it is.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">UPTIME = /path/to/uptime_binary</dt>
  <dd class="It-tag">sysusagegraph report the current uptime of the system using
      the uptime command. Used to set path to uptime binary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">HOSTNAME = /path/to/hostname_binary</dt>
  <dd class="It-tag">All scripts of Sysusage distribution need to know the name
      of the host. They use hostname command for that.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">INTERVAL = pull_interval_in_second</dt>
  <dd class="It-tag">All RRDTOOL input use the given interval in second to store
      monitored values. Graph construction also use this interval to render
      things properly. By default Sysusage use an interval of 60 seconds to have
      a better statistic report. You can change this but it's not recommanded.
      If you change this adjust your crontab to the same value. This value must
      between 10 and 300 seconds. If you want to be under the minute you must
      use the daemon mode to run sysusage. See DAEMON bellow.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SKIP = HH:MM/HH:MM HH:MM/HH:MM ...</dt>
  <dd class="It-tag">You can define here some time range where monitoring will
      not be done. Value is a list of begin_time/end_time separated by space or
      tabulation. Let's say you don't want to monitor the host during the night
      for some good reason, you can write it like that: 20:00/06:00</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">HDDTEMP_BIN = /path/to/hddtemp_binary</dt>
  <dd class="It-tag">You can monitor your hard drive temperature if you have
      installed hddtemp utility. We need to know the path to hddtemp
    binary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SENSORS_BIN = /path/to/sensors_binary</dt>
  <dd class="It-tag">You can monitor your device temperature if you have
      installed lm_sensor utility. We need to know the path to sensors
    binary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">DAEMON = 0 | 1</dt>
  <dd class="It-tag">You can monitor your system under the crond limitation of 1
      minute by running sysusage in daemon mode with an INTERVAL between 10 end
      60 seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GRAPH_WIDTH and GRAPH_HEIGHT</dt>
  <dd class="It-tag">These are usefull if you want to resize graph dimension.
      Default is a width of 550 pixels and a height of 200.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">FLAMING</dt>
  <dd class="It-tag">This is for fun, if you want to have random flaming effect
      on graphs with only dataset set this directive to 1. Disable by default.
      Not used with JQuery graph renderer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">HIRES</dt>
  <dd class="It-tag">Allow addition of hourly graph to have fine granularity of
      the data. This is disable by default. Set it to any integer between 1 to
      23 hours included to show data from past N hours to now. Not used with
      JQuery graph renderer as the Javascript library allow you to zoom into the
      resolution you want.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LINE_SIZE</dt>
  <dd class="It-tag">By default the graph line size is 1 if you want graph with
      a more thick line set it to 2. This is rrd graph limitation (1 or 2). Not
      used with JQuery graph renderer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PROC_QSIZE</dt>
  <dd class="It-tag">Number of simultaneous remote sysusage call process that
      should be run. Default is 4 but it can be up to 15 or more depending of
      the hardware configuration. One per core is the lower value you may think
      about.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">RESRC_URL</dt>
  <dd class="It-tag">Images, javascripts and css ressources by default are
      search into the DEST_DIR directory so that in the HTML view they all
      stayed on the current main directory. You may want to place thoses
      resources on an other directory or an another place. Using this directive
      you can set any FQDN, absolute or relative URL for these resources.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SSH_IDENTITY</dt>
  <dd class="It-tag">Used to set the default identity file to connect to all
      remote hosts without password. If undefined, sysusage will use the ssh
      system default value. You may want to use the default value unless you
      know exactly what's you are doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SSH_OPTION</dt>
  <dd class="It-tag">Use set the default ssh options, that correspond to a
      passwordless authent:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        -o ConnectTimeout=5 -o PreferredAuthentications=hostbased,publickey
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    with a five seconds connection timeout. You may want to increase this
      timeout on very slow network links.
    <div style="height: 1.00em;">&#x00A0;</div>
    Do not change this value unless you know exactly what's you are doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SSH_BIN</dt>
  <dd class="It-tag">Path to the ssh command is set here at install time.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SSH_USER</dt>
  <dd class="It-tag">Used to defined the default ssh user that will be used to
      connect to all remote hosts.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Section_ALARM"><a class="selflink" href="#Section_ALARM">Section
  ALARM</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">WARN_MODE = 0|1</dt>
  <dd class="It-tag">Used to disable/enable alert message during threshold
      exceed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ALARM_PROG = /path/to/sysusagewarn</dt>
  <dd class="It-tag">Used to set path to the external program responsible of
      sending alarm message. You can change it to your own, just take a look at
      the sysusagewarn usage to see what command line options are used by
      sysusage</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SMTP = smtp.server.net</dt>
  <dd class="It-tag">Name or Ip address of the SMTP server to contact. Default
      is none =&gt; No smtp message is sent.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">FROM = sender@localhost</dt>
  <dd class="It-tag">Sender email addresse to use in the SMTP message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">TO = destination@localhost</dt>
  <dd class="It-tag">Destination email address where the alarm message will be
      sent.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">NAGIOS = /usr/local/nagios/bin/submit_check_result</dt>
  <dd class="It-tag">Path to the external nsca program used to send check
      message to Nagios. Setting this will activate nagios check report. See at
      end of this file to see how to configure Nagios</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">UPPER_LEVEL = 1</dt>
  <dd class="It-tag">Nagios check level to send when a high threshold limit is
      reached. Default is 1 =&gt; WARNING.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LOWER_LEVEL = 2</dt>
  <dd class="It-tag">Nagios check level to send when a low threshold limit is
      reached. Default is 2 =&gt; CRITICAL.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">URL = Url of Sysusage report</dt>
  <dd class="It-tag">Used to overwrite the default URL of SysUsage report
      http://host.dom/sysusage/ especially if you have a special port or a
      different path. Example:
    http://hostname.domain:9080/Reports/Sysusage/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SKIP = HH:MM/HH:MM HH:MM/HH:MM ...</dt>
  <dd class="It-tag">You can define here some time range where alarm notice will
      not be sent. Value is a list of begin_time/end_time separated by space or
      tabulation. Let's say you don't want to received notice during the night
      for some good reason, you can write it like that: 20:00/06:00</dd>
</dl>
<h2 class="Ss" title="Ss" id="Section_MONITOR"><a class="selflink" href="#Section_MONITOR">Section
  MONITOR</a></h2>
This section has two different format the first one is used to specify most of
  the monitoring target:
<div class="Pp"></div>
<pre>
        type:threshold_max
</pre>
<div class="Pp"></div>
or
<div class="Pp"></div>
<pre>
        type:threshold_max(attempt)
</pre>
<dl class="Bl-tag">
  <dt class="It-tag">type</dt>
  <dd class="It-tag">Type of system information you may want to monitor. It can
      takes around 30 differents values:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        load   =&gt; monitor load average
        blocked=&gt; monitor task blocked waiting for I/O
        cpu    =&gt; monitor each cpu(s) user/nice/system usage
               =&gt; monitor each cpu(s) total/iowait usage
               =&gt; monitor each cpu(s) steal/guest usage
        cpuall =&gt; monitor global cpu(s) statistics
        cswch  =&gt; monitor context switches usage
        intr   =&gt; monitor number of interrupt per second
        mem    =&gt; monitor memory usage
        dirty  =&gt; monitor memory active/inactive/dirty memory
        share  =&gt; monitore Posix share memory usage (/dev/shm)
        swap   =&gt; monitor swap usage
        work   =&gt; monitor amount of memory needed for current workload
        sock   =&gt; monitor number of open socket
        socktw =&gt; monitor number of socket in TIME_WAIT state
        io     =&gt; monitor I/O request and block usage
        page   =&gt; monitor I/O page usage
        pswap  =&gt; monitor I/O page swap usage
        pcrea  =&gt; monitor number of process created per second
        proc   =&gt; monitor number of running process
        tproc  =&gt; monitor number of running thread
        file   =&gt; monitor number of open file
        queue  =&gt; monitor number of files in queue
        net    =&gt; monitor I/O network bytes on all network interfaces
        err    =&gt; monitor bad packet, drop and collision on interfaces
        tcp    =&gt; monitor number of tcp connection and segment
        disk   =&gt; monitor disk space usage
        dev    =&gt; monitor percentage of CPU time per device
               =&gt; monitor average request queue length
               =&gt; monitor I/O sectors read and write to device
               =&gt; monitor time spent in queue (await)
               =&gt; monitor time spent in servicing (svctm)
        sensors=&gt; monitor fan and device temperature using sensors command
        hddtemp=&gt; monitor disk drive temperature
        temp   =&gt; monitor device temperature using sar
        fan    =&gt; monitor fan rotation using sar
        huge   =&gt; monitor size of hugepages utilisation
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Note: the 'cpu' target monitoring type will report all statictics per cpu.
      This can represent a lot of informations if you several cpu. To limit
      statistics to total cpu only, you must replace default the 'cpu' target to
      'cpuall' in your configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">threshold_max</dt>
  <dd class="It-tag">
    <pre>
        This is the maximum threshold value. Any value equal or upper
        than this one will generate SMTP and/or Nagios alert if you
        have enable it.
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">attempt</dt>
  <dd class="It-tag">You can delay the call to the alarm program at threshold
      exceed by specifying the number of consecutive exceed attempt before the
      command will be called. Just specify the number of attempt between bracket
      just after the min and/or max threshold value. This setting is optional
      for both threshold value and the default is to send alarm immediatly.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Specials cases</dt>
  <dd class="It-tag">There's a special case for 'disk' usage monitoring that
      allow exclusion of some mount point. This is usefull if you have hard link
      or some special device you don't need to monitor. Where exclusion is a
      semi- colon (;) separated list of mount point to exclude from monitoring.
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        disk:ThresholdMax:exclusion
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Ex: disk:90:/home/mondo_image;/home/smb_mountpoint
    <div style="height: 1.00em;">&#x00A0;</div>
    You can use regexp in your excluded path.
    <div style="height: 1.00em;">&#x00A0;</div>
    The other directive with special syntax is 'dev'. It is construct as follow:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        dev:device(alias):rpm_speed:raid_type:nb_disk
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    where device is sda, sdb or any device name (without the /dev/), the alias
      between parenthesis is the name that must be displayed in the user
      interface instead of the device name. For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        dev:sdc(ASM disk1):
        dev:sdb(/data):
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    I you plan to use I/O workload report, SysUsage need to know the speed of
      the disk (RPM), the raid type (0,1,5,10) and the number of disk in the
      raid array to calculate the IOPS. For example if we have a 7200 RPM disk
      with 2 disk in raid 1, we will write thing like that:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        dev:sdc(ASM disk1):7200:1:2
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    I/O workload is the relation between TPS (transfers per second) and IOPS
      (I/O operations measured in seconds) of a device. If the tps returned by
      sysstat reach the maximum theoretical IOPS, your storage subsystem is
      saturated. Here is the equation to calculate the maximum theoretical IOPS:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        d = number of disks
        dIOPS = IOPS per disk
        %r = % of read workload
        %w = % of write workload
        F = raid factor
        IOPS = (d *dIOPS) / (%r + (F * %w))
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    the theoretical maximum IOPS for a RAID set (excluding caching of course).
      To do this you take the product of the number of disks and IOPS per disk
      divided by the sum of the %read workload and the product of the raid
      factor and %write workload. Where %read and %write are calculated from the
      following equation:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        %r = rd_sec / (rd_sec + wr_sec);
        %w = wr_sec / (rd_sec + wr_sec);
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    This IOPS monitoring is build following the excellent article of Nick
      Anderson readable from Analyzing I/O performance in Linux.</dd>
</dl>
<div class="Pp"></div>
The second format is used to monitor running process, hard drive temperature or
  queue directory. It has the following format:
<div class="Pp"></div>
<pre>
        type:target:threshold_max_value:threshold_min_value
</pre>
<div class="Pp"></div>
or
<div class="Pp"></div>
<pre>
        type:target:threshold_max_value(attempt):threshold_min_value(attempt)
</pre>
<dl class="Bl-tag">
  <dt class="It-tag">type</dt>
  <dd class="It-tag">Type of system information you may want to monitor. It can
      takes these differents values:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        load, cpu, cswch, intr, mem, swap, work, share, sock, socktw, io, file,
        page, pcrea, pswap, net, tcp, err, disk, proc, tproc, queue, hddtemp,
        dev, work, sensors, temp, fan, huge, blocked, dirty
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">target</dt>
  <dd class="It-tag">If type is 'proc' or 'tproc' target represent the name of
      the process to monitor. You can put a regexp as target to match exactly
      the required process. The number of running process are obtain by the
      system command line:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        ps -e -o command | grep -E &quot;target&quot; | grep -v grep | wc -l
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    so you can replace the word target by the regexp to match and see if it
      returns the right number of process.
    <div style="height: 1.00em;">&#x00A0;</div>
    The number of running thread are obtain by the system command line:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        ps -eL -o command | grep -E &quot;target&quot; | grep -v grep | wc -l
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    If type is 'queue' this represent the full path of the directory to monitor.
      Sysusage will try to find and count any regular file in the target
      directory and will not follow sub directories.
    <div style="height: 1.00em;">&#x00A0;</div>
    If type is 'hddtemp' the target represent the hard drive device to monitor,
      ex: /dev/sda. You can try it with the following command line:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        hddtemp -n /dev/sda
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    This may return the actual temperature detected on the hard drive.
    <div style="height: 1.00em;">&#x00A0;</div>
    If this is 'dev' this represent the device name to monitor. Ex: sda. Do not
      add the /dev/ before this will not work. You may want to change the device
      name in the graphic menu, this is possible by adding the device alias
      enclosed with parenthesis.
    <div style="height: 1.00em;">&#x00A0;</div>
    For example lets say you're monitoring some EMCpower SAN device. Using sar
      the reported devices are dev120-48 and dev120-64. Once you have find what
      partition are mapped to these devices (reading /proc/partitions). In this
      example these devices are mounted as /cache1 and /cache2 so we want to see
      these mount points instead of device number in the graphical menu:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        dev:dev120-48(/cache1):90
        dev:dev120-64(/cache2):97
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    in you sysusage.conf file will do the job. The threshold_max value is the
      max percentage of CPU used for this device before sending an alarm.
    <div style="height: 1.00em;">&#x00A0;</div>
    If type is 'sensors' this represent the pattern to match to obtain
      temperature or fan speed information in the sensors program output. See
      chapter SENSORS to have more information.
    <div style="height: 1.00em;">&#x00A0;</div>
    If type is 'temp' or 'fan' this represent the device number reported by sar
      to obtain temperature or fan speed information. To know what device number
      must be used, see result of command: sar -m ALL 1 1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">threshold_max</dt>
  <dd class="It-tag">This is the maximum threshold value. Any value equal or
      upper will generate an SMTP and/or Nagios alert if you have enable
    it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">threshold_min</dt>
  <dd class="It-tag">This is the minimum threshold value. Any value equal or
      lower of this one will generate SMTP and/or Nagios alert if you have
      enable it. Min threshold should certainly only be used with 'proc' and
      'tproc' monitoring type. If you set it to 0 then you will be warn if any
      of the monitored process are down.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">attempt</dt>
  <dd class="It-tag">You can delay the call to the alarm program at threshold
      exceed by specifying the number of consecutive exceed attempt before the
      command will be called. Just specify the number of attempt between bracket
      just after the min and/or max threshold value. This setting is optional
      for both threshold value and the default is to send alarm immediatly.
    <div style="height: 1.00em;">&#x00A0;</div>
    For example a load average monitoring defined like this
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        load:12(3)
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    will send an alarm when the system load average will exceed 12 after three
      consecutives attempts at the define interval. If the interval is 60
      seconds, the alarm will be sent up to 180 second after the first
    exceed.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Section_PLUGIN"><a class="selflink" href="#Section_PLUGIN">Section
  PLUGIN</a></h2>
This part enable the use of custom plugins. You can call any program or script
  provide that it return up to 3 numbers separated by a space character. See
  plugins/ directory for sample scripts.
<div class="Pp"></div>
This section must include a name composed of any alphanumeric character that
  will be used to create the target file, for example:
<div class="Pp"></div>
<pre>
        [PLUGIN testplug1] or [PLUGIN testplug2]
</pre>
<div class="Pp"></div>
The section allow the following configuration directives. They are composed of
  named directives followed by ':' or '=' and a value.
<dl class="Bl-tag">
  <dt class="It-tag">enable</dt>
  <dd class="It-tag">Is used to disable temporary the plugin monitoring. Default
      is 'yes' enable. To disable write it enable:no</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">program</dt>
  <dd class="It-tag">Is used to set the path to the program or script to execute
      as plugin. This program must print to STDOUT 1 to 3 numbers separated by a
      space character as result following the number of reports you want. So
      each plugin can have 1, 2 or 3 graphed data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">title</dt>
  <dd class="It-tag">Is used to set the title of the report page and the index
      link. Default is set to &quot;Sysusage plugin&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">menu</dt>
  <dd class="It-tag">Is used to store the plugin under a submenu of the plugins
      menu. Default is to store plugin under the &quot;Others&quot;
    submenu.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">maxthreshold</dt>
  <dd class="It-tag">This is the maximum threshold value. Any value equal or
      upper than this one will generate SMTP and/or Nagios alert if you have
      enable it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">minthreshold</dt>
  <dd class="It-tag">This is the minimum threshold value. Any value equal or
      lower of this one will generate SMTP and/or Nagios alert if you have
      enable it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">verticallabel</dt>
  <dd class="It-tag">This is used to set the vertical label of the graph.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">label1, label2, label3</dt>
  <dd class="It-tag">Are used to show a legend for each graphed data, label1 is
      for the first returned value, label2 for the second and label3 for the
      last. If you just have one value returned just omit the other labels.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">legend1, legend2, legend3</dt>
  <dd class="It-tag">These are use to set the units for Current, Avg and Max
      values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">remote</dt>
  <dd class="It-tag">This directive must be set to 'no' to prevent execution of
      the plugin program by a issh call to sysusage in a remote context. This
      directive is activated by default ('yes').</dd>
</dl>
<h2 class="Ss" title="Ss" id="Section_REMOTE"><a class="selflink" href="#Section_REMOTE">Section
  REMOTE</a></h2>
This part allow to run sysusage on remote hosts from a central server. It use
  ssh to execute sysusage on the destination host with the -r option that force
  sysusage to not write anything to local data files but to print all result to
  stdout. As sysusage is run by cron job or daemon mode it can not authenticate
  interactively to remote host so you must give a ssh user and an identity file
  with the corresponding configuration option.
<div class="Pp"></div>
This section must include the name or the ip address of the remote host that
  will be used to create the target data directory, for example:
<div class="Pp"></div>
<pre>
        [REMOTE hostname] or [REMOTE host.domain.dom] or [REMOTE 192.168.1.14]
</pre>
<div class="Pp"></div>
The section allow the following configuration directives. They are composed of
  named directives followed by ':' or '=' and a value.
<div class="Pp"></div>
Once you have installed sysusage on all remote host and exchange the SSH key
  certificat between the central host and all remote hosts, most of the time you
  just have to set the ssh_user directive to have it working. Use
  remote_sysusage directive if sysusage perl script is not installed on the same
  place than the central server.
<h2 class="Ss" title="Ss" id="Section_GROUP"><a class="selflink" href="#Section_GROUP">Section
  GROUP</a></h2>
This section allow you to groups remote host report under a common groupname in
  the index page. Remote hosts will be ordered following their parent groups.
  The name of the group can be any string and the values in the section must be
  a list of remote servers defined in the REMOTE sections.
<div class="Pp"></div>
For example if you are monitoring a cluster of web and database servers you can
  use the following declaration:
<div class="Pp"></div>
<pre>
        [GROUP Web Servers]
        webhost1
        webhost2
        webhost3
        [GROUP Database Servers]
        dbhost1
        dbhost2
</pre>
<div class="Pp"></div>
Of course webhostN and dbhostN hosts must be declared in the remote section.
<dl class="Bl-tag">
  <dt class="It-tag">enable</dt>
  <dd class="It-tag">Is used to enable/disable the remote host monitoring.
      Default is 'yes' enable. Set it as 'enable=no' to disable it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ssh_user</dt>
  <dd class="It-tag">Used to defined the ssh user allowed to connect to remote
      host. By default the value set to SSH_USER configuration option in the
      GENERAL section will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ssh_identity</dt>
  <dd class="It-tag">Used to set the identity file to connect to remote host
      without password. By default the value set to SSH_IDENTITY configuration
      option in the GENERAL section will be used. Usually this is the private
      key that you've generated using ssh-keygen and most of the time file
      $HOME/.ssh/id_rsa. You may want to use the default value unless you know
      exactly what's you are doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ssh_options</dt>
  <dd class="It-tag">Use to overwrite the default ssh options, that are:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
        -o ConnectTimeout=5 -o PreferredAuthentications=hostbased,publickey
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    The default options are set into the SSH_OPTIONS configuration option in the
      GENERAL section. You may want to use the default value unless you know
      exactly what's you are doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ssh_command</dt>
  <dd class="It-tag">You can overwrite the complete ssh command using this
      directive, this will replace the ssh command, the ssh option, the ssh user
      and the host part. The sysusage remote command will not be replaced. You
      may want to use the default value unless you know exactly what's you are
      doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">remote_sysusage</dt>
  <dd class="It-tag">Use it to set the path to the rsysusage command that must
      be used on the remote host, SysUsage will automatically add the -r option
      to cause the remote execution mode.</dd>
</dl>
<h1 class="Sh" title="Sh" id="THRESHOLD_NOTIFICATION"><a class="selflink" href="#THRESHOLD_NOTIFICATION">THRESHOLD
  NOTIFICATION</a></h1>
<h2 class="Ss" title="Ss" id="SMTP_alert"><a class="selflink" href="#SMTP_alert">SMTP
  alert</a></h2>
Sysusage use an external perl script to send SMTP alert and/or Nagios checks
  when a max or min threshold is reached. This program is named sysusagewarn.
  All options of the configuration file in section [ALARM] are use by sysusage
  to call this program. If they are correctly set you don't have to take care of
  the parameters given to this program. If you want to use this program outside
  sysusage, here are the command line options it understand:
<div class="Pp"></div>
<pre>
        Usage: sysusagewarn -t subject -c current_value -v threshold_value
                        [-s smtp_srv] [-f from] [-d to] [-b hostname_prog]
        -t subject : Subject of the alarm
        -c value   : Current value monitored by sysusage
        -v value   : Threshold value used.
        -s host    : SMTP server name or ip where to send email.
        -f from    : Sender email address of the alarm message.
        -d to      : Destination address of the alarm message.
        -b path    : Path to program hostname. Default is /bin/hostname
        -n path    : Path to Nagios program submit_check_result. Default none. 
        -l value   : Alarm level (0=OK,1=WARNING,2=CRITICAL). Default: 1. 
        -r service : Nagios service name to used. Must be any sysusage type of
                     monitoring defined in the configuration file.
        -u url     : Url to HTML sysusage output to include in email.
                     Default: http://hostname.domain/sysusage/
        -h         : Output this message and exit
</pre>
<h2 class="Ss" title="Ss" id="NAGIOS_alert"><a class="selflink" href="#NAGIOS_alert">NAGIOS
  alert</a></h2>
SysUsage send check message to Nagios through an external command
  (submit_check_result). So you need to create the host and associate all
  sysusage service that you want to monitor with Nagios. The services name
  correspond to the type of monitoring. For example, if you have enable alarm on
  memory usage the service sent is 'mem'. There's also specials case with type
  of monitoring with multiple instance like network monitoring. You need to
  create a service per instance. For example type 'net' will have 'net_eth0' and
  'net_lo' and more if you have more network interface. To see if your sysusage
  alarm messages are well understood by Nagios take a look at the nagios.log
  file (default to /usr/local/nagios/var/nagios.log).
<div class="Pp"></div>
To desactivate automatically an alarm reported to Nagios, SysUsage will send
  each time it run an OK request if every thing is correct for the monitored
  type.
<h1 class="Sh" title="Sh" id="SENSORS"><a class="selflink" href="#SENSORS">SENSORS</a></h1>
Monitoring of sensors output is based on regexp. To be clear enought here an
  example:
<div class="Pp"></div>
Sensors output on my server:
<div class="Pp"></div>
<pre>
        adt7463-i2c-0-2d
        Adapter: SMBus I801 adapter at 1480
        V1.5:        +3.23 V  (min =  +0.00 V, max =  +3.32 V)
        VCore:       +1.24 V  (min =  +1.10 V, max =  +1.49 V)
        V3.3:        +3.33 V  (min =  +2.80 V, max =  +3.78 V)
        V5:          +4.99 V  (min =  +4.25 V, max =  +5.75 V)
        V12:         +0.11 V  (min =  +0.00 V, max = +15.94 V)
        CPU_Fan:       0 RPM  (min =    0 RPM)
        fan2:       10671 RPM  (min = 8095 RPM)
        fan3:          0 RPM  (min =    0 RPM)
        fan4:          0 RPM  (min =    0 RPM)
        CPU Temp:    +69.5 C  (low  =  +2.0 C, high = +91.0 C)
        Board Temp:  +32.5 C  (low  =  +2.0 C, high = +83.0 C)
        Remote Temp: +31.2 C  (low  =  +2.0 C, high = +58.0 C)
        cpu0_vid:   +1.338 V
        adt7463-i2c-0-2e
        Adapter: SMBus I801 adapter at 1480
        V1.5:        +3.21 V  (min =  +0.00 V, max =  +3.32 V)
        VCore:       +1.28 V  (min =  +1.10 V, max =  +1.49 V)
        V3.3:        +3.32 V  (min =  +2.80 V, max =  +3.78 V)
        V5:          +4.95 V  (min =  +0.00 V, max =  +6.64 V)
        V12:         +0.11 V  (min =  +0.00 V, max = +15.94 V)
        CPU_Fan:    10843 RPM  (min = 8095 RPM)
        fan2:          0 RPM  (min =    0 RPM)
        fan3:       9642 RPM  (min = 8095 RPM)
        fan4:          0 RPM  (min =    0 RPM)
        CPU Temp:    +57.2 C  (low  =  +2.0 C, high = +91.0 C)
        Board Temp:  +35.2 C  (low  =  +2.0 C, high = +91.0 C)
        Remote Temp: +35.8 C  (low  =  +2.0 C, high = +58.0 C)
        cpu0_vid:   +1.338 V
</pre>
<div class="Pp"></div>
Following the sensors kernel module load you could have more or less output than
  that. To monitor all sensors CPUs temperature on my server I need to add the
  following lines into sysusage.cfg:
<div class="Pp"></div>
<pre>
        sensors:CPU Temp:75
        sensors:Board Temp:45
        sensors:Remote Temp:45
</pre>
<div class="Pp"></div>
This will create 3 graphs based on lines matching 'CPU Temp', an other with
  lines matching 'Board Temp' and the last with lines matching 'Remote Temp'. As
  I have 2 CPUs for each graph there will be 2 values. You can not report more
  than 3 values per graph, this is hard coded into sysusage. So if you have more
  CPUs you will not see more than 3 values. Here it will sent alarm when
  temperature exceed the given values (75,45,45).
<div class="Pp"></div>
To monitor fan speed, I just add lines like this in the configuration file:
<div class="Pp"></div>
<pre>
        sensors:fan2:11000:8095
        sensors:fan3:11000:8095
</pre>
<div class="Pp"></div>
This whil create 2 graphs for fan 2 and fan 3. With an alarm sent when speed
  exceed 11000 RPM or is lower than 8095 RPM.
<div class="Pp"></div>
On my personal computer (/etc/sysconfig/lm_sensors =&gt; modprobe coretemp)
  sensors output is:
<div class="Pp"></div>
<pre>
        coretemp-isa-0000
        Adapter: ISA adapter
        Core 0:      +53.0 C  (high = +78.0 C, crit = +100.0 C)
        coretemp-isa-0001
        Adapter: ISA adapter
        Core 1:      +50.0 C  (high = +78.0 C, crit = +100.0 C)
</pre>
<div class="Pp"></div>
To monitor CPU temprature, I just add this line in my sysusage.cfg:
<div class="Pp"></div>
<pre>
        sensors:Core:70
</pre>
<div class="Pp"></div>
This will generate a graph with 2 graphed data for Core 0 and Core 1.
<div class="Pp"></div>
Now that sysstat sar natively reports deviceis temperature and fan speed you
  don't need sensors anymore. Type 'temp' can be used instead and type 'fan' for
  the fan speed. The target of these types is the device number, See sar -m TEMP
  or sar -m FAN to see which device number to monitor.
<h1 class="Sh" title="Sh" id="BUGS_/_FEATURE_REQUEST"><a class="selflink" href="#BUGS_/_FEATURE_REQUEST">BUGS
  / FEATURE REQUEST</a></h1>
Please report any bugs, remarqs and feature request using the Github interface
  at https://github.com/darold/sysusage/ or send a mail to the author.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
Copyright (C) 2003-2015 Gilles Darold
<div class="Pp"></div>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; either version 3 of the License, or any later version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 51 Franklin
  Street, Fifth Floor, Boston, MA 02110-1301 USA
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Gilles Darold &lt;gilles _|_At_|_ darold _|_DoT_|_ net&gt;
<h1 class="Sh" title="Sh" id="ACKNOWLEGMENT"><a class="selflink" href="#ACKNOWLEGMENT">ACKNOWLEGMENT</a></h1>
I want ot thanks all the people who help to build this tool with a very special
  thank to Marat Dyatko for the web design contribution.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-06-28</td>
    <td class="foot-os">perl v5.18.2</td>
  </tr>
</table>
</body>
</html>
