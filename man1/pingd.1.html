<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PINGD(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PINGD(1)</td>
    <td class="head-vol">Echolot</td>
    <td class="head-rtitle">PINGD(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pingd - echolot ping daemon
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>start</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>stop</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>process</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>add</b> <i>address</i> [<i>address</i>
    ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>delete</b> <i>address</i> [<i>address</i>
    ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>disable</b> <i>address</i> [<i>address</i>
    ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>enable</b> <i>address</i> [<i>address</i>
    ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>set</b> option=value [option=value..]
    <i>address</i> [ <i>address</i> ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>setremailercaps</b> <i>capsstring</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>deleteremailercaps</b> <i>address</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>getkeyconf</b> [<i>address</i>
    [<i>address</i> ...]]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>sendpings</b> [<i>address</i>
    [<i>address</i> ...]]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>sendchainpings</b>
    <i>address</i><b>:</b><i>address</i> [<i>address</i><b>:</b><i>address</i>
    ...]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>buildstats</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>buildkeys</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>buildthesaurus</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>buildfromlines</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>summary</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingd</b> <b>dumpconf</b></dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
pingd is the heart of echolot. Echolot is a pinger for anonymous remailers.
<div class="Pp"></div>
A Pinger in the context of anonymous remailers is a program that regularily
  sends messages through remailers to check their reliability. It then
  calculates reliability statistics which are used by remailer clients to choose
  the chain of remailers to use.
<div class="Pp"></div>
Additionally it collects configuration parameters and keys of all remailers and
  offers them in a format readable by remailer clients.
<div class="Pp"></div>
When called without parameters pingd schedules tasks like sending pings,
  processing incoming mail and requesting remailer-xxx data and runs them at
  configurable intervalls.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>start</b></dt>
  <dd class="It-tag">Start the ping daemon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>stop</b></dt>
  <dd class="It-tag">Send the running pingd process a SIGTERM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>process</b></dt>
  <dd class="It-tag">Sends a HUP signal to the daemon which instructs it to
      process the commands.
    <div style="height: 1.00em;">&#x00A0;</div>
    For other effects of sending the HUP Signal see the SIGNALS section
    below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add</b> <i>address</i> [<i>address</i> ...]</dt>
  <dd class="It-tag">Add <i>address</i> to the list of remailers to query for
      keys and confs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>delete</b> <i>address</i> [<i>address</i> ...]</dt>
  <dd class="It-tag">Delete <i>address</i> from the list of remailers to query
      for keys and confs. Delete all statistics and keys for that remailer.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that echolot will add back this remailer if it learns of it from other
      remailers again. If you do not want that, use the disable command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>disable</b> <i>address</i> [<i>address</i> ...]</dt>
  <dd class="It-tag">Shorthand for <b>set showit=off</b> <b>pingit=off</b>
      <b>fetch=off</b>. This makes echolot completely ignore that remailer,
      until you enable it again.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>enable</b> <i>address</i> [<i>address</i> ...]</dt>
  <dd class="It-tag">Shorthand for <b>set showit=on</b> <b>pingit=on</b>
      <b>fetch=on</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set</b> option=value [option=value..] <i>address</i>
    [<i>address</i> ...]</dt>
  <dd class="It-tag">Possible options and values:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>showit=</b>{<b>on</b>,<b>off</b>}</dt>
  <dd class="It-tag">Set <b>showit</b> (show remailer in mlist, rlist etc.) for
      remailer <i>address</i> to either <b>on</b> or <b>off</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pingit=</b>{<b>on</b>,<b>off</b>}</dt>
  <dd class="It-tag">Set <b>pingit</b> (send out pings to that remailer) for
      remailer <i>address</i> to either <b>on</b> or <b>off</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fetch=</b>{<b>on</b>,<b>off</b>}</dt>
  <dd class="It-tag">Set <b>fetch</b> (fetch remailer-key and remailer-conf) for
      remailer <i>address</i> to either <b>on</b> or <b>off</b>.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>setremailercaps</b> <i>capsstring</i></dt>
  <dd class="It-tag">Some remailers (Mixmaster V2 - currently lcs and passthru2)
      don't return a useable remailer-conf message. For such remailers you need
      to set it manually.
    <div style="height: 1.00em;">&#x00A0;</div>
    For instance:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
    ./pingd setremailercaps '$remailer{&quot;passthru2&quot;} = &quot;&lt;mixer@immd1.informatik.uni-erlangen.de&gt; mix middle&quot;;'
    ./pingd setremailercaps '$remailer{&quot;lcs&quot;} = &quot;&lt;mix@anon.lcs.mit.edu&gt; mix klen1000&quot;;'
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>deleteremailercaps</b> <i>address</i></dt>
  <dd class="It-tag">Delete remailer-conf data for <i>address</i>. The config
      data will be reset from the next valid remailer-conf reply by the
      remailer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>getkeyconf</b> [<i>address</i> [<i>address</i>
    ...]]</dt>
  <dd class="It-tag">Send a command to immediatly request keys and configuration
      from remailers. If no addresses are given requests will be sent to all
      remailers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sendpings</b> [<i>address</i> [<i>address</i> ...]]</dt>
  <dd class="It-tag">Send a command to immediatly send pings to the given
      remailers. If no addresses are given requests will be sent to all
      remailers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sendchainpings</b> <i>address</i><b>:</b><i>address</i>
    [ <i>address</i><b>:</b><i>address</i> ...]</dt>
  <dd class="It-tag">Send a command to immediatly send chain pings to the given
      chains. A chain is two remailer addresses seperated by a colon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>buildstats</b></dt>
  <dd class="It-tag">Send a command to immediatly rebuild stats.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>buildkeys</b></dt>
  <dd class="It-tag">Send a command to immediatly rebuild the keyrings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>buildthesaurus</b></dt>
  <dd class="It-tag">Send a command to immediatly rebuild the Thesaurus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>buildfromlines</b></dt>
  <dd class="It-tag">Send a command to immediatly rebuild the From Header lines
      page.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>summary</b></dt>
  <dd class="It-tag">Print a status summary of all known addresses to the log
      (level notice).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dumpconf</b></dt>
  <dd class="It-tag">Dumps the current configuration to standard output.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--basedir</b></dt>
  <dd class="It-tag">The home directory to which everything else is relative.
      See the BASE DIRECTORY section below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Verbose mode. Causes <b>pingd</b> to print debugging
      messages about its progress.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">Quiet mode. Be even quieter than normal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print a short help message and exit sucessfully.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print version number and exit sucessfully.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nohup</b></dt>
  <dd class="It-tag">Usefull only with the <b>add</b>, <b>set</b>,
      <b>setremailercaps</b>, <b>deleteremailercaps</b>, <b>getkeyconf</b>,
      <b>sendpings</b>, <b>sendchainpings</b>, <b>buildstats</b>,
      <b>buildkeys</b>, <b>buildthesaurus</b>, <b>buildfromlines</b>, or
      <b>summary</b> command.
    <div style="height: 1.00em;">&#x00A0;</div>
    Don't send a HUP signal to the daemon which instructs it to process the
      commands after adding the command to the task list.
    <div style="height: 1.00em;">&#x00A0;</div>
    By default such a signal is sent.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--process</b></dt>
  <dd class="It-tag">Usefull only with the <b>start</b> command.
    <div style="height: 1.00em;">&#x00A0;</div>
    Read and process the commands file on startup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--detach</b></dt>
  <dd class="It-tag">Usefull only with the <b>start</b> command.
    <div style="height: 1.00em;">&#x00A0;</div>
    Tell <b>pingd</b> to detach.</dd>
</dl>
<h1 class="Sh" title="Sh" id="BASE_DIRECTORY"><a class="selflink" href="#BASE_DIRECTORY">BASE
  DIRECTORY</a></h1>
The home directory to which everything else is relative.
<div class="Pp"></div>
Basedir defaults to whatever directory the <b>pingd</b> binary is located. It
  can be overridden by the <b>ECHOLOT_HOME</b> environment variable which in
  turn is weaker than the <b>--basedir</b> setting.
<div class="Pp"></div>
This directory is then used to locate the configuration file <b>pingd.conf</b>
  (see FILES below).
<div class="Pp"></div>
The <b>homedir</b> setting in <b>pingd.conf</b> finally sets the base directory.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
The configuration file is searched in these places in this order:
<dl class="Bl-tag">
  <dt class="It-tag">the file pointed to by the <b>ECHOLOT_CONF</b> environment
    variable</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&lt;basedir&gt;/pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/echolot/pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/.pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/echolot/pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/pingd.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">ECHOLOT_CONF echolot config file (see section FILES)</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ECHOLOT_HOME echolot base directory (see section BASE
    DIRECTORY)</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="SIGNALS"><a class="selflink" href="#SIGNALS">SIGNALS</a></h1>
On <b>SIGINT</b>, <b>SIGQUIT</b>, and <b>SIGTERM</b> <b>pingd</b> will schedule
  a shutdown for as soon as the current actions are finished or immediatly if no
  actions are currently being processed. It will then write all metadata and
  pingdata to disk and close all files cleanly before exiting.
<div class="Pp"></div>
On <b>SIGHUP</b> &lt;pingd&gt; will execute any pending commands from the
  commands file ( <b>commands.txt</b> by default). It also closes and reopens
  the file 'output' which is used for stdout and stderr when the daemon is
  running detached. This can be used if you want to rotate that file.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Peter Palfrader &lt;peter@palfrader.org&gt;
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please report them at
  &lt;URL:http://alioth.debian.org/projects/echolot/&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-10-23</td>
    <td class="foot-os">2.1.9</td>
  </tr>
</table>
</body>
</html>
