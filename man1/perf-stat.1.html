<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:30:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PERF-STAT(1) perf Manual PERF-STAT(1)</p>

<p style="margin-top: 1em">NAME <br>
perf-stat - Run a command and gather performance counter
statistics</p>

<p style="margin-top: 1em">SYNOPSIS <br>
perf stat [-e &lt;EVENT&gt; | --event=EVENT] [-a]
&lt;command&gt; <br>
perf stat [-e &lt;EVENT&gt; | --event=EVENT] [-a] &acirc;
&lt;command&gt; [&lt;options&gt;] <br>
perf stat [-e &lt;EVENT&gt; | --event=EVENT] [-a] record [-o
file] &acirc; &lt;command&gt; [&lt;options&gt;] <br>
perf stat report [-i file]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This command runs a command and gathers performance counter
statistics from it.</p>

<p style="margin-top: 1em">OPTIONS <br>
&lt;command&gt;... <br>
Any command you can specify in a shell.</p>

<p style="margin-top: 1em">record <br>
See STAT RECORD.</p>

<p style="margin-top: 1em">report <br>
See STAT REPORT.</p>

<p style="margin-top: 1em">-e, --event= <br>
Select the PMU event. Selection can be:</p>

<p style="margin-top: 1em">&Acirc;&middot; a symbolic event
name (use perf list to list all events)</p>

<p style="margin-top: 1em">&Acirc;&middot; a raw PMU event
(eventsel+umask) in the form of rNNN where NNN is a
hexadecimal event descriptor.</p>

<p style="margin-top: 1em">&Acirc;&middot; a symbolically
formed event like pmu/param1=0x3,param2/ where param1 and
param2 are defined as formats for the PMU in
/sys/bus/event_sources/devices/&lt;pmu&gt;/format/*</p>

<p style="margin-top: 1em">&Acirc;&middot; a symbolically
formed event like pmu/config=M,config1=N,config2=K/ where M,
N, K are numbers (in decimal, hex, octal format). Acceptable
values for each of config, <br>
config1 and config2 parameters are defined by corresponding
entries in
/sys/bus/event_sources/devices/&lt;pmu&gt;/format/*</p>

<p style="margin-top: 1em">-i, --no-inherit <br>
child tasks do not inherit counters</p>

<p style="margin-top: 1em">-p, --pid=&lt;pid&gt; <br>
stat events on existing process id (comma separated
list)</p>

<p style="margin-top: 1em">-t, --tid=&lt;tid&gt; <br>
stat events on existing thread id (comma separated list)</p>

<p style="margin-top: 1em">-a, --all-cpus <br>
system-wide collection from all CPUs</p>

<p style="margin-top: 1em">-c, --scale <br>
scale/normalize counter values</p>

<p style="margin-top: 1em">-d, --detailed <br>
print more detailed statistics, can be specified up to 3
times</p>

<p style="margin-top: 1em">-d: detailed events, L1 and LLC
data cache <br>
-d -d: more detailed events, dTLB and iTLB events <br>
-d -d -d: very detailed events, adding prefetch events</p>

<p style="margin-top: 1em">-r, --repeat=&lt;n&gt; <br>
repeat command and print average + stddev (max: 100). 0
means forever.</p>

<p style="margin-top: 1em">-B, --big-num <br>
print large numbers with thousands&rsquo; separators
according to locale</p>

<p style="margin-top: 1em">-C, --cpu= <br>
Count only on the list of CPUs provided. Multiple CPUs can
be provided as a comma-separated list with no space: 0,1.
Ranges of CPUs are specified with -: 0-2. In per-thread <br>
mode, this option is ignored. The -a option is still
necessary to activate system-wide monitoring. Default is to
count on all CPUs.</p>

<p style="margin-top: 1em">-A, --no-aggr <br>
Do not aggregate counts across all monitored CPUs in
system-wide mode (-a). This option is only valid in
system-wide mode.</p>

<p style="margin-top: 1em">-n, --null <br>
null run - don&acirc;t start any counters</p>

<p style="margin-top: 1em">-v, --verbose <br>
be more verbose (show counter open errors, etc)</p>

<p style="margin-top: 1em">-x SEP, --field-separator SEP
<br>
print counts using a CSV-style output to make it easy to
import directly into spreadsheets. Columns are separated by
the string specified in SEP.</p>

<p style="margin-top: 1em">-G name, --cgroup name <br>
monitor only in the container (cgroup) called
&quot;name&quot;. This option is available only in per-cpu
mode. The cgroup filesystem must be mounted. All threads
belonging to container <br>
&quot;name&quot; are monitored when they run on the
monitored CPUs. Multiple cgroups can be provided. Each
cgroup is applied to the corresponding event, i.e., first
cgroup to first <br>
event, second cgroup to second event and so on. It is
possible to provide an empty cgroup (monitor all the time)
using, e.g., -G foo,,bar. Cgroups must have corresponding
<br>
events, i.e., they always refer to events defined earlier on
the command line.</p>

<p style="margin-top: 1em">-o file, --output file <br>
Print the output into the designated file.</p>

<p style="margin-top: 1em">--append <br>
Append to the output file designated with the -o option.
Ignored if -o is not specified.</p>

<p style="margin-top: 1em">--log-fd <br>
Log output to fd, instead of stderr. Complementary to
--output, and mutually exclusive with it. --append may be
used here. Examples: 3&gt;results perf stat --log-fd 3
&acirc; $cmd <br>
3&gt;&gt;results perf stat --log-fd 3 --append &acirc;
$cmd</p>

<p style="margin-top: 1em">--pre, --post <br>
Pre and post measurement hooks, e.g.:</p>

<p style="margin-top: 1em">perf stat --repeat 10 --null
--sync --pre make -s O=defconfig-build/clean &acirc; make -s
-j64 O=defconfig-build/ bzImage</p>

<p style="margin-top: 1em">-I msecs, --interval-print msecs
<br>
Print count deltas every N milliseconds (minimum: 10ms) The
overhead percentage could be high in some cases, for
instance with small, sub 100ms intervals. Use with caution.
<br>
example: perf stat -I 1000 -e cycles -a sleep 5</p>

<p style="margin-top: 1em">--metric-only <br>
Only print computed metrics. Print them in a single line.
Don&acirc;t show any raw values. Not supported with
--per-thread.</p>

<p style="margin-top: 1em">--per-socket <br>
Aggregate counts per processor socket for system-wide mode
measurements. This is a useful mode to detect imbalance
between sockets. To enable this mode, use --per-socket in
<br>
addition to -a. (system-wide). The output includes the
socket number and the number of online processors on that
socket. This is useful to gauge the amount of
aggregation.</p>

<p style="margin-top: 1em">--per-core <br>
Aggregate counts per physical processor for system-wide mode
measurements. This is a useful mode to detect imbalance
between physical cores. To enable this mode, use <br>
--per-core in addition to -a. (system-wide). The output
includes the core number and the number of online logical
processors on that physical processor.</p>

<p style="margin-top: 1em">--per-thread <br>
Aggregate counts per monitored threads, when monitoring
threads (-t option) or processes (-p option).</p>

<p style="margin-top: 1em">-D msecs, --delay msecs <br>
After starting the program, wait msecs before measuring.
This is useful to filter out the startup phase of the
program, which is often very different.</p>

<p style="margin-top: 1em">-T, --transaction <br>
Print statistics of transactional execution if
supported.</p>

<p style="margin-top: 1em">STAT RECORD <br>
Stores stat data into perf data file.</p>

<p style="margin-top: 1em">-o file, --output file <br>
Output file name.</p>

<p style="margin-top: 1em">STAT REPORT <br>
Reads and reports stat data from perf data file.</p>

<p style="margin-top: 1em">-i file, --input file <br>
Input file name.</p>

<p style="margin-top: 1em">--per-socket <br>
Aggregate counts per processor socket for system-wide mode
measurements.</p>

<p style="margin-top: 1em">--per-core <br>
Aggregate counts per physical processor for system-wide mode
measurements.</p>

<p style="margin-top: 1em">-A, --no-aggr <br>
Do not aggregate counts across all monitored CPUs.</p>

<p style="margin-top: 1em">EXAMPLES <br>
$ perf stat &acirc; make -j</p>

<p style="margin-top: 1em">Performance counter stats for
&rsquo;make -j&rsquo;:</p>

<p style="margin-top: 1em">8117.370256 task clock ticks #
11.281 CPU utilization factor <br>
678 context switches # 0.000 M/sec <br>
133 CPU migrations # 0.000 M/sec <br>
235724 pagefaults # 0.029 M/sec <br>
24821162526 CPU cycles # 3057.784 M/sec <br>
18687303457 instructions # 2302.138 M/sec <br>
172158895 cache references # 21.209 M/sec <br>
27075259 cache misses # 3.335 M/sec</p>

<p style="margin-top: 1em">Wall-clock time elapsed:
719.554352 msecs</p>

<p style="margin-top: 1em">CSV FORMAT <br>
With -x, perf stat is able to output a not-quite-CSV format
output Commas in the output are not put into &quot;&quot;.
To make it easy to parse it is recommended to use a
different <br>
character like -x ;</p>

<p style="margin-top: 1em">The fields are in this
order:</p>

<p style="margin-top: 1em">&Acirc;&middot; optional usec
time stamp in fractions of second (with -I xxx)</p>

<p style="margin-top: 1em">&Acirc;&middot; optional CPU,
core, or socket identifier</p>

<p style="margin-top: 1em">&Acirc;&middot; optional number
of logical CPUs aggregated</p>

<p style="margin-top: 1em">&Acirc;&middot; counter
value</p>

<p style="margin-top: 1em">&Acirc;&middot; unit of the
counter value or empty</p>

<p style="margin-top: 1em">&Acirc;&middot; event name</p>

<p style="margin-top: 1em">&Acirc;&middot; run time of
counter</p>

<p style="margin-top: 1em">&Acirc;&middot; percentage of
measurement time the counter was running</p>

<p style="margin-top: 1em">&Acirc;&middot; optional
variance if multiple values are collected with -r</p>

<p style="margin-top: 1em">&Acirc;&middot; optional metric
value</p>

<p style="margin-top: 1em">&Acirc;&middot; optional unit of
metric</p>

<p style="margin-top: 1em">Additional metrics may be
printed with all earlier fields being empty.</p>

<p style="margin-top: 1em">SEE ALSO <br>
perf-top(1), perf-list(1)</p>

<p style="margin-top: 1em">perf 07/04/2017 PERF-STAT(1)</p>
<hr>
</body>
</html>
