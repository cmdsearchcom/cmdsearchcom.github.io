<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.db.connect(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.db.connect(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.db.connect(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.db.connect</b> - Prints/sets DB connection for a vector map to
  attribute table.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, attribute table, database, layer
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.db.connect</b>
<div>&#x00A0;</div>
<b>v.db.connect --help</b>
<div>&#x00A0;</div>
<b>v.db.connect</b> [-<b>pgcod</b>] <b>map</b>=<i>name</i>
  [<b>driver</b>=<i>name</i>] [ <b>database</b>=<i>name</i>]
  [<b>table</b>=<i>name</i>] [ <b>key</b>=<i>name</i>]
  [<b>layer</b>=<i>string</i>] [ <b>separator</b>=<i>character</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print all map connection parameters and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print all map connection parameters in shell script style and exit
    <div>&#x00A0;</div>
    Format: layer[/layer name] table key database driver</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print types/names of table columns for specified layer and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Overwrite connection parameter for certain layer</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Delete connection for certain layer (not the table)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>map</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>driver</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of database driver
    <div>&#x00A0;</div>
    Options: <i>dbf, mysql, odbc, ogr, pg, sqlite</i>
    <div>&#x00A0;</div>
    Default: <i>sqlite</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>database</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of database
    <div>&#x00A0;</div>
    Default: <i>$GISDBASE/$LOCATION_NAME/$MAPSET/sqlite/sqlite.db</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>table</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of attribute table</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>key</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of key column
    <div>&#x00A0;</div>
    Must refer to an integer column
    <div>&#x00A0;</div>
    Default: <i>cat</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer number or name
    <div>&#x00A0;</div>
    Format: layer number[/layer name]
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separator</b>=<i>character</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Field separator for shell script style output
    <div>&#x00A0;</div>
    Special characters: pipe, comma, space, tab, newline
    <div>&#x00A0;</div>
    Default: <i>pipe</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.db.connect</i> prints or sets database connection for a vector map. The
  user can add or remove link to attribute table on the certain layer.
<h1 class="Sh" title="Sh" id="NOTE"><a class="selflink" href="#NOTE">NOTE</a></h1>
Connection information (driver, database, table, key) is stored for each map, in
  the file
<div>&#x00A0;</div>
<pre>
&lt;database&gt;/&lt;location&gt;/&lt;mapset&gt;/vector/&lt;map&gt;/dbln
</pre>
<div class="Pp"></div>
If parameters for database connection are already set with db.connect, they are
  taken as default values and do not need to be specified each time.
<div class="Pp"></div>
When printing database connection ( <i>p</i> or <i>g</i> flag) the parameter
  <i>layer</i> is ignored, i.e. <b>all</b> connections are printed to the
  output.
<div class="Pp"></div>
<b>Attention:</b> Removing a vector map will also delete all tables linked to
  it! If you use v.db.connect to link further tables to your map, it is
  advisable to make a copy from those tables first and connect the copied tables
  to the vector map (see also v.overlay).
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Note: The default database backend setting is SQLite.
<h2 class="Ss" title="Ss" id="Print_database_connection"><a class="selflink" href="#Print_database_connection">Print
  database connection</a></h2>
Print all database connection parameters for vector map.
<div>&#x00A0;</div>
<pre>
v.db.connect -p map=roads
</pre>
<div class="Pp"></div>
Print column types and names of table linked to vector map.
<div>&#x00A0;</div>
<pre>
v.db.connect -c map=roads
</pre>
<h2 class="Ss" title="Ss" id="Connect_vector_map_to_database_(DBF_driver)"><a class="selflink" href="#Connect_vector_map_to_database_(DBF_driver)">Connect
  vector map to database (DBF driver)</a></h2>
Connect vector map to DBF table without or with variables.
<div>&#x00A0;</div>
<div class="Pp"></div>
Using default DB connection:
<div>&#x00A0;</div>
<pre>
v.db.connect map=vectormap table=table
</pre>
<div class="Pp"></div>
Using hardcoded path to DBF directory (not recommended):
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<pre>
v.db.connect map=vectormap table=table \
             database=/home/user/grassdata/spearfish60/PERMANENT/dbf
</pre>
<div class="Pp"></div>
Using variable as DBF directory definition, single quotes must be used:
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<pre>
v.db.connect map=vectormap table=table \
             database=&#x2019;$GISDBASE/$LOCATION_NAME/$MAPSET/dbf/&#x2019;
</pre>
<div class="Pp"></div>
Connect vector map layer 2 and key ID to database with variables (note: if
  needed, single quotes must be used for the <i>database</i> parameter):
<div>&#x00A0;</div>
<pre>
v.db.connect map=vectormap table=table layer=2 key=ID
</pre>
<h2 class="Ss" title="Ss" id="Connect_vector_map_to_database_(SQLite_driver)"><a class="selflink" href="#Connect_vector_map_to_database_(SQLite_driver)">Connect
  vector map to database (SQLite driver)</a></h2>
Very similar to DBF driver example above.
<div>&#x00A0;</div>
<pre>
db.connect driver=sqlite database=&#x2019;$GISDBASE/$LOCATION_NAME/$MAPSET/sqlite/sqlite.db&#x2019;
db.tables -p
v.db.connect map=vectormap table=table driver=sqlite \
             database=&#x2019;$GISDBASE/$LOCATION_NAME/$MAPSET/sqlite/sqlite.db&#x2019;
v.db.connect -p map=vectormap
</pre>
<h2 class="Ss" title="Ss" id="Connect_vector_map_to_database_(MySQL_driver)"><a class="selflink" href="#Connect_vector_map_to_database_(MySQL_driver)">Connect
  vector map to database (MySQL driver)</a></h2>
<pre>
# note: connection which requires password
db.connect driver=mysql database=&quot;host=dbserver.foo.org,dbname=my_database&quot;
db.login user=joshua [password=xxx]
# ... or enter password interactively.
db.tables -p
# connect external table to layer 2:
v.db.connect map=my_map table=my_mysql_table key=baz layer=2
v.db.connect -p my_map
</pre>
<h2 class="Ss" title="Ss" id="Connect_vector_map_to_database_(PostgreSQL_driver)"><a class="selflink" href="#Connect_vector_map_to_database_(PostgreSQL_driver)">Connect
  vector map to database (PostgreSQL driver)</a></h2>
<pre>
# note: connection without password being asked
v.db.connect map=vectormap table=table layer=1 key=oid driver=pg \
             database=&quot;host=myserver.itc.it,dbname=mydb,user=name&quot; \
             table=mytable key=id
</pre>
<h2 class="Ss" title="Ss" id="Store_geometry_in_GRASS_but_attributes_in_PostgreSQL"><a class="selflink" href="#Store_geometry_in_GRASS_but_attributes_in_PostgreSQL">Store
  geometry in GRASS but attributes in PostgreSQL</a></h2>
This example illustrated a mixed data storage with possibility top update
  attributes in external PostgreSQL database:
<div>&#x00A0;</div>
<pre>
# Check current settings for attribute storage:
db.connect -p
# Import table from PostgreSQL to new map
# (NOTE: output map name needs to be different from table name in
#        case that GRASS is connected to PostgreSQL):
v.in.db driver=pg database=&quot;host=localhost,dbname=meteo&quot; \
        table=mytable x=lon y=lat key=cat out=mytable
v.db.connect map=mytable -p
# Cancel table connection between map and attribute table:
v.db.connect map=mytable -d
v.db.connect map=mytable -p
# Drop table which was replicated due to import:
db.tables -p
echo &quot;DROP TABLE mytable&quot; | db.execute
db.tables -p
# reconnect map to table in PostgreSQL:
v.db.connect map=mytable driver=pg database=&quot;host=localhost,dbname=meteo&quot; \
        table=mytable key=cat
# Now the geometry is stored in GRASS while the attributes are stored
# in PostgreSQL.
</pre>
An alternative is to create a &quot;view&quot; of only ID, x, y [,z] columns and
  to use v.in.db on this view, then connect the original table to the geometry.
  This will be faster if the original table is very large.
<h2 class="Ss" title="Ss" id="Store_geometry_in_GRASS_but_attributes_in_PostGIS"><a class="selflink" href="#Store_geometry_in_GRASS_but_attributes_in_PostGIS">Store
  geometry in GRASS but attributes in PostGIS</a></h2>
This example illustrated a mixed data storage with possibility top update
  attributes in external PostGIS database:
<div>&#x00A0;</div>
<pre>
# Check current settings for attribute storage:
db.connect -p
# Import table from PostGIS to new map
# (NOTE: output map name needs to be different from table name in
#        case that GRASS is connected to PostGIS):
v.in.db driver=pg database=&quot;host=localhost,dbname=meteo&quot; \
        table=mytable x=&quot;x(geom)&quot; y=&quot;y(geom)&quot; key=cat out=mytable
v.db.connect map=mytable -p
# Cancel table connection between map and attribute table:
v.db.connect map=mytable -d
v.db.connect map=mytable -p
# Drop table which was replicated due to import:
db.tables -p
echo &quot;DROP TABLE mytable&quot; | db.execute
db.tables -p
# reconnect map to table in PostGIS:
v.db.connect map=mytable driver=pg database=&quot;host=localhost,dbname=meteo&quot; \
        table=mytable key=cat
# Now the geometry is stored in GRASS while the attributes are stored
# in PostGIS.
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>db.connect,</i> <i>db.copy,</i> <i>db.tables,</i>
  <i>v.db.addtable,</i> <i>v.db.droptable,</i> <i>v.db.addcolumn,</i>
  <i>v.db.dropcolumn,</i> <i>v.external,</i> <i>v.in.db,</i> <i>v.overlay</i>
  <i></i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Radim Blazek, ITC-Irst, Trento, Italy
<div class="Pp"></div>
<i>Last changed: $Date: 2015-10-01 23:06:38 +0200 (Thu, 01 Oct 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.db.connect source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
