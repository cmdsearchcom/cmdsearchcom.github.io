<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>BRD(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">BRD(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">BRD(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
brd - scans directories and files for damage due to decay of storage medium.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<h2 class="Ss" title="Ss" id="SCANNING_DIRECTORIES:"><a class="selflink" href="#SCANNING_DIRECTORIES:">SCANNING
  DIRECTORIES:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>scan</b> [<b>scan-options</b>]
  <b>target</b> [ <b>target ...</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="LISTING_DATABASE_CONTENTS:"><a class="selflink" href="#LISTING_DATABASE_CONTENTS:">LISTING
  DATABASE CONTENTS:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>list</b> [<b>list-options</b>] [<b>target
  ...</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="SEARCHING_FOR_DUPLICATE_FILES:"><a class="selflink" href="#SEARCHING_FOR_DUPLICATE_FILES:">SEARCHING
  FOR DUPLICATE FILES:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>dupe_files</b>
  [<b>dupe_files-options</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="SEARCHING_FOR_DUPLICATE_SUBTREES:"><a class="selflink" href="#SEARCHING_FOR_DUPLICATE_SUBTREES:">SEARCHING
  FOR DUPLICATE SUBTREES:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>dupe_trees</b>
  [<b>dupe_trees-options</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="DIFFING_TREES:"><a class="selflink" href="#DIFFING_TREES:">DIFFING
  TREES:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>diff</b> [<b>diff-options</b>]
  <b>left-target</b> <b>right-target</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="REMOVING_ITEMS_FROM_THE_DATABASE:"><a class="selflink" href="#REMOVING_ITEMS_FROM_THE_DATABASE:">REMOVING
  ITEMS FROM THE DATABASE:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>rm</b> [<b>rm-options</b>] <b>target</b>
  [ <b>target ...</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="CHECKING_THE_DATABASE:"><a class="selflink" href="#CHECKING_THE_DATABASE:">CHECKING
  THE DATABASE:</a></h2>
<b>brd</b> [<b>general-options</b>] <b>checkdb</b> [<b>checkdb-options</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="general-options"><a class="selflink" href="#general-options">general-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>--version</b>] [<b>-l,--log [</b><i>FILENAME</i>]]
<br/>
 [ <b>-v,--verbose</b>] [<b>-d,--debug</b>] [<b>--db [</b><i>FILENAME</i>]]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="scan-options"><a class="selflink" href="#scan-options">scan-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>--use-root [</b><i>ROOT_NAME</i>]]
<br/>
 [ <b>--root-prefix [</b><i>PREFIX</i>]]] [<b>-p,--prune</b>]
<br/>
 [ <b>-P,--progress</b>] [<b>--check-only</b>] [<b>--dry-run</b>]
<br/>
 [ <b>-s,--skip-recent</b>] [<b>--expr [</b><i>DAYS</i>]]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="list-options"><a class="selflink" href="#list-options">list-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>--use-root [</b><i>ROOT_NAME</i>]] [<b>-m,--minimal</b>]
<br/>
 [ <b>--root-prefix [</b><i>PREFIX</i>]]] [<b>-e,--expanded</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="dupe_files-options"><a class="selflink" href="#dupe_files-options">dupe_files-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>-o,--output [</b><i>FILENAME</i><b>]</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="dupe_trees-options"><a class="selflink" href="#dupe_trees-options">dupe_trees-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>-o,--output [</b><i>FILENAME</i><b>]</b>] [<b>--nofilefp</b>]
<br/>
 [ <b>--nofilename</b>] [<b>--nosubdirfp</b>] [<b>--nosubdirname</b>]
<br/>
 [ <b>--nodirname</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="diff-options"><a class="selflink" href="#diff-options">diff-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>-o,--output [</b><i>FILENAME</i><b>]</b>]
<br/>
 [ <b>--use-root [</b><i>ROOT_NAME</i>]]] [<b>--root-prefix [</b><i>PREFIX</i>]]
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="rm-options"><a class="selflink" href="#rm-options">rm-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>--use-root [</b><i>ROOT_NAME</i>]]
<br/>
 [ <b>--root-prefix [</b><i>PREFIX</i>]]] [<b>--dry-run</b>] 	
<h2 class="Ss" title="Ss" id="checkdb-options"><a class="selflink" href="#checkdb-options">checkdb-options</a></h2>
<br/>
 [ <b>-h</b>] [<b>-P,--progress</b>] [<b>--check-only</b>] [<b>--dry-run</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Bit Rot Detector, or <b>brd</b>, is a tool to scan a directory tree and check
  each file for corruption caused by damage to the physical storage medium or by
  damage from malicious programs. Files are fingerprinted using the SHA-1
  algorithm. File fingerprints, sizes, and modification times are stored in a
  SQLite database.
<div style="height: 1.00em;">&#x00A0;</div>
Multiple unrelated directory trees can be stored in the same database. All trees
  are identified by the base directory, or root, as specified on the
  command-line. Note that the following are considered different trees:
<br/>
 some_dir/
<br/>
 ./some_dir/
<div style="height: 1.00em;">&#x00A0;</div>
Subtrees can be specified anywhere roots can as long as the full root to subtree
  path is specified. However, the subtree must already exist in the database. If
  the subtree is not currently in the database, it will be considered to be a
  new root. For example, the following will scan some_dir as a new root and add
  all of its children to the database, then scan the subtree some_subtree for
  problems and/or changes:
<br/>
 # Add new root
<br/>
 brd scan some_dir
<br/>
 # Scan only part of a root for problems and changes.
<br/>
 brd scan some_dir/some_subtree
<div style="height: 1.00em;">&#x00A0;</div>
Note: the default behavior for scan is to update the database for any files that
  are newer than the database record. Files that have been tampered with will
  likely be flagged as updated and not as damaged. To properly check for files
  that have been tampered with, run scan with the <b>--check-only</b> option.
<div style="height: 1.00em;">&#x00A0;</div>
Since scanning large trees or trees with large files can take quite a while, it
  is possible to exclude files in directories that have recently been checked
  via the <b>-s</b> option. How recent is &quot;recent&quot; is controlled by
  the <b>--expr</b> option and defaults to 30 days.
<div style="height: 1.00em;">&#x00A0;</div>
The integrity of the database can be checked via the <b>checkdb</b> subcommand.
<div style="height: 1.00em;">&#x00A0;</div>
In addition to checking files for corruption, brd provides the ability to search
  the database for duplicate files and subtrees, as well as diff subtrees. See
  the <b>dupe_files</b>, <b>dupe_trees</b>, and <b>diff</b> subcommands for
  details.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="GENERAL_OPTIONS"><a class="selflink" href="#GENERAL_OPTIONS">GENERAL
  OPTIONS</a></h2>
These options can be used in all the different modes.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Display the command-line help. When specified after a
      subcommand name, subcommand-specific help will be displayed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Displays script version number and quits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l,--log </b><i>FILENAME</i><b></b></dt>
  <dd class="It-tag">Logs output to the specified file instead of the
    console.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v,--verbose</b></dt>
  <dd class="It-tag">Enables additional messages to screen and/or log file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d,--debug</b></dt>
  <dd class="It-tag">Enables debug messages to screen and/or log file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--db </b><i>FILENAME</i><b></b></dt>
  <dd class="It-tag">Specifies the name of the database to use. Defaults to
      &quot;./brd.db&quot;
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="SCANNING_OPTIONS"><a class="selflink" href="#SCANNING_OPTIONS">SCANNING
  OPTIONS</a></h2>
The following options are available with the <b>scan</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-root </b><i>ROOT_NAME</i><b></b></dt>
  <dd class="It-tag">Strips the path information from all targets and uses the
      specified <i>ROOT_NAME</i> instead, when interacting with the
    database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--root-prefix </b><i>PREFIX</i><b></b></dt>
  <dd class="It-tag">Appends the specified <i>PREFIX</i> to each target when
      interacting with the database useful for only scanning a subtree as
      opposed to the entire tree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p,--prune</b></dt>
  <dd class="It-tag">Removes all records for files and directories that no
      longer exist. If this option is not specified, missing files and
      directories will generate a warning. With this option, missing items will
      be noted only if <b>--verbose</b> is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P,--progress</b></dt>
  <dd class="It-tag">Displays a progress indicator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-only</b></dt>
  <dd class="It-tag">Behaves like normal, except that no changes are committed
      to the database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dry-run</b></dt>
  <dd class="It-tag">This command is a synonym for <b>--check-only</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s,--skip-recent</b></dt>
  <dd class="It-tag">Skips recently scanned directories and their contents.
      Default cut-off is 30 days. See <b>--expr</b> for how to specify the
      cut-off.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--expr </b><i>DAYS</i><b></b></dt>
  <dd class="It-tag">Scans are considered recent for up to, and including,
      <i>DAYS</i> days. The default value is 30 days. See <b>--skip-recent</b>
      for info on skipping recently scanned directories and their contents.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="LISTING_OPTIONS"><a class="selflink" href="#LISTING_OPTIONS">LISTING
  OPTIONS</a></h2>
The following options are available with the <b>list</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-root </b><i>ROOT_NAME</i><b></b></dt>
  <dd class="It-tag">Strips the path information from all targets and uses the
      specified <i>ROOT_NAME</i> instead, when interacting with the
    database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--root-prefix </b><i>PREFIX</i><b></b></dt>
  <dd class="It-tag">Appends the specified <i>PREFIX</i> to each target when
      interacting with the database useful for only scanning a subtree as
      opposed to the entire tree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m,--minimal</b></dt>
  <dd class="It-tag">When displaying information on directory targets, only
      directory contents are displayed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e,--expanded</b></dt>
  <dd class="It-tag">Displays additional information for directory targets.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="DUPLICATE_FILES_OPTIONS"><a class="selflink" href="#DUPLICATE_FILES_OPTIONS">DUPLICATE
  FILES OPTIONS</a></h2>
The following options are available with the <b>dupe_files</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o,--output </b><i>FILENAME</i><b></b></dt>
  <dd class="It-tag">Writes the list of duplicate files to the specified file
      name. Useful when <b>--verbose</b> or <b>--debug</b> are used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="DUPLICATE_SUBTREES_OPTIONS"><a class="selflink" href="#DUPLICATE_SUBTREES_OPTIONS">DUPLICATE
  SUBTREES OPTIONS</a></h2>
The following options are available with the <b>dupe_trees</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o,--output </b><i>FILENAME</i><b></b></dt>
  <dd class="It-tag">Writes the list of duplicate subtrees to the specified file
      name. Useful when <b>--verbose</b> or <b>--debug</b> are used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nofilefp</b></dt>
  <dd class="It-tag">When generating the fingerprint for a directory, do not
      include the fingerprints of files associated with it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nofilename</b></dt>
  <dd class="It-tag">When generating the fingerprint for a directory, do not
      include the file names of files associated with it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nosubdirfp</b></dt>
  <dd class="It-tag">When generating the fingerprint for a directory, do not
      include the fingerprints of subdirectories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nosubdirname</b></dt>
  <dd class="It-tag">When generating the fingerprint for a directory, do not
      include the names of subdirectories.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nodirname</b></dt>
  <dd class="It-tag">When generating the fingerprint for a directory, do not
      include the directory's name.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="DIFF_OPTIONS"><a class="selflink" href="#DIFF_OPTIONS">DIFF
  OPTIONS</a></h2>
The following options are available with the <b>diff</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o,--output </b><i>FILENAME</i><b></b></dt>
  <dd class="It-tag">Writes the results to the specified file name. Useful when
      <b>--verbose</b> or <b>--debug</b> are used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-root </b><i>ROOT_NAME</i><b></b></dt>
  <dd class="It-tag">Strips the path information from all targets and uses the
      specified <i>ROOT_NAME</i> instead, when interacting with the
    database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--root-prefix </b><i>PREFIX</i><b></b></dt>
  <dd class="It-tag">Appends the specified <i>PREFIX</i> to each target when
      interacting with the database useful for only scanning a subtree as
      opposed to the entire tree.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="REMOVAL_OPTIONS"><a class="selflink" href="#REMOVAL_OPTIONS">REMOVAL
  OPTIONS</a></h2>
The following options are available with the <b>rm</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-root </b><i>ROOT_NAME</i><b></b></dt>
  <dd class="It-tag">Strips the path information from all targets and uses the
      specified <i>ROOT_NAME</i> instead, when interacting with the
    database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--root-prefix </b><i>PREFIX</i><b></b></dt>
  <dd class="It-tag">Appends the specified <i>PREFIX</i> to each target when
      interacting with the database useful for only scanning a subtree as
      opposed to the entire tree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dry-run</b></dt>
  <dd class="It-tag">Behaves like normal, except that no changes are committed
      to the database.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="DATABASE_CHECK_OPTIONS"><a class="selflink" href="#DATABASE_CHECK_OPTIONS">DATABASE
  CHECK OPTIONS</a></h2>
The following options are available with the <b>checkdb</b> subcommand:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P,--progress</b></dt>
  <dd class="It-tag">Displays a progress indicator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-only</b></dt>
  <dd class="It-tag">Behaves like normal, except that no changes are committed
      to the database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dry-run</b></dt>
  <dd class="It-tag">This command is a synonym for <b>--check-only</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<pre>
<b>README</b>
<b>http://github.com/jsbackus/brd/wiki</b>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2013 Jeff Backus &lt;jeff.backus@gmail.com&gt; License
  GPLv2+: GNU GPL version 2 or later &lt;http://gnu.org/licenses/gpl.html&gt;.
<div>&#x00A0;</div>
This is free software: you are free to change and redistribute it. There is NO
  WARRANTY, to the extent permitted by law.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<pre>
Jeff Backus &lt;jeff.backus@gmail.com&gt;
</pre>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">28 May 2014</td>
    <td class="foot-os">Jeff Backus</td>
  </tr>
</table>
</body>
</html>
