<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>JOIN(1POSIX)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">JOIN(1POSIX)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">JOIN(1POSIX)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
join &#x2014; relational database operator
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
join  <b>[</b>&#x2212;a <i>file_number</i>|&#x2212;v <i>file_number</i><b>] [</b>&#x2212;e <i>string</i><b>] [</b>&#x2212;o <i>list</i><b>] [</b>&#x2212;t <i>char</i><b>]</b>
<b>    [</b>&#x2212;1 <i>field</i><b>] [</b>&#x2212;2 <i>field</i><b>]</b><i> file1 file2</i>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>join</i> utility shall perform an equality join on the files <i>file1</i>
  and <i>file2</i>. The joined files shall be written to the standard output.
<div class="Pp"></div>
The join field is a field in each file on which the files are compared. The
  <i>join</i> utility shall write one line in the output for each pair of lines
  in <i>file1</i> and <i>file2</i> that have identical join fields. The output
  line by default shall consist of the join field, then the remaining fields
  from <i>file1</i>, then the remaining fields from <i>file2</i>. This format
  can be changed by using the <b>&#x2212;o</b> option (see below). The
  <b>&#x2212;a</b> option can be used to add unmatched lines to the output. The
  <b>&#x2212;v</b> option can be used to output only unmatched lines.
<div class="Pp"></div>
The files <i>file1</i> and <i>file2</i> shall be ordered in the collating
  sequence of <i>sort</i> <b>&#x2212;b</b> on the fields on which they shall be
  joined, by default the first in each line. All selected output shall be
  written in the same collating sequence.
<div class="Pp"></div>
The default input field separators shall be &lt;blank&gt; characters. In this
  case, multiple separators shall count as one field separator, and leading
  separators shall be ignored. The default output field separator shall be a
  &lt;space&gt;.
<div class="Pp"></div>
The field separator and collating sequence can be changed by using the
  <b>&#x2212;t</b> option (see below).
<div class="Pp"></div>
If the same key appears more than once in either file, all combinations of the
  set of remaining fields in <i>file1</i> and the set of remaining fields in
  <i>file2</i> are output in the order of the lines encountered.
<div class="Pp"></div>
If the input files are not in the appropriate collating sequence, the results
  are unspecified.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <i>join</i> utility shall conform to the Base Definitions volume of
  POSIX.1&#x2010;2008, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>.
<div class="Pp"></div>
The following options shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;a&#x00A0;</b><i>file_number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Produce a line for each unpairable line in file <i>file_number</i>, where
      <i>file_number</i> is 1 or 2, in addition to the default output. If both
      <b>&#x2212;a</b>1 and <b>&#x2212;a</b>2 are specified, all unpairable
      lines shall be output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;e&#x00A0;</b><i>string</i></dt>
  <dd class="It-tag">Replace empty output fields in the list selected by
      <b>&#x2212;o</b> with the string <i>string</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;o&#x00A0;</b><i>list</i></dt>
  <dd class="It-tag">Construct the output line to comprise the fields specified
      in <i>list</i>, each element of which shall have one of the following two
      forms:</dd>
</dl>
<div style="margin-left: 10.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag"><i>file_number.field</i>, where <i>file_number</i> is a
      file number and <i>field</i> is a decimal integer field number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">0 (zero), representing the join field</dd>
</dl>
<div class="Pp"></div>
The elements of <i>list</i> shall be either &lt;comma&gt;-separated or
  &lt;blank&gt;-separated, as specified in Guideline 8 of the Base Definitions
  volume of POSIX.1&#x2010;2008, <i>Section 12.2</i>, <i>Utility Syntax
  Guidelines</i>. The fields specified by <i>list</i> shall be written for all
  selected output lines. Fields selected by <i>list</i> that do not appear in
  the input shall be treated as empty output fields. (See the <b>&#x2212;e</b>
  option.) Only specifically requested fields shall be written. The application
  shall ensure that <i>list</i> is a single command line argument.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;t&#x00A0;</b><i>char</i></dt>
  <dd class="It-tag">Use character <i>char</i> as a separator, for both input
      and output. Every appearance of <i>char</i> in a line shall be
      significant. When this option is specified, the collating sequence shall
      be the same as <i>sort</i> without the <b>&#x2212;b</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;v&#x00A0;</b><i>file_number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Instead of the default output, produce a line only for each unpairable line
      in <i>file_number</i>, where <i>file_number</i> is 1 or 2. If both
      <b>&#x2212;v</b>1 and <b>&#x2212;v</b>2 are specified, all unpairable
      lines shall be output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;1&#x00A0;</b><i>field</i></dt>
  <dd class="It-tag">Join on the <i>field</i>th field of file 1. Fields are
      decimal integers starting with 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;2&#x00A0;</b><i>field</i></dt>
  <dd class="It-tag">Join on the <i>field</i>th field of file 2. Fields are
      decimal integers starting with 1.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The following operands shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><i>file1</i>,&#x00A0;<i>file2</i></dt>
  <dd class="It-tag">A pathname of a file to be joined. If either of the
      <i>file1</i> or <i>file2</i> operands is <b>'&#x2212;'</b>, the standard
      input shall be used in its place.</dd>
</dl>
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
The standard input shall be used only if the <i>file1</i> or <i>file2</i>
  operand is <b>'&#x2212;'</b>. See the INPUT FILES section.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
The input files shall be text files.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>join</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      POSIX.1&#x2010;2008, <i>Section 8.2</i>, <i>Internationalization
      Variables</i> for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_COLLATE</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale of the collating sequence <i>join</i> expects to have
      been used when the input files were sorted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments and input files).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
The <i>join</i> utility output shall be a concatenation of selected character
  fields. When the <b>&#x2212;o</b> option is not specified, the output shall
  be:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%s%s%s\n&quot;, &lt;</b><i>join field</i>&gt;, &lt;<i>other file1 fields</i>&gt;,
    &lt; <i>other file2 fields</i>&gt;
</pre>
</div>
<div class="Pp"></div>
If the join field is not the first field in a file, the &lt;
  <i>other&#x00A0;file&#x00A0;fields</i>&gt; for that file shall be:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&lt;</b><i>fields preceding join field</i>&gt;, &lt;<i>fields following join field</i>&gt;
</pre>
</div>
<div class="Pp"></div>
When the <b>&#x2212;o</b> option is specified, the output format shall be:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%s\n&quot;, &lt;</b><i>concatenation of fields</i>&gt;
</pre>
</div>
<div class="Pp"></div>
where the concatenation of fields is described by the <b>&#x2212;o</b> option,
  above.
<div class="Pp"></div>
For either format, each field (except the last) shall be written with its
  trailing separator character. If the separator is the default (&lt;blank&gt;
  characters), a single &lt;space&gt; shall be written after each field (except
  the last).
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
The standard error shall be used only for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2002;0</dt>
  <dd class="It-tag">All input files were output successfully.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;0</dt>
  <dd class="It-tag">An error occurred.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
Default.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
Pathnames consisting of numeric digits or of the form <i>string.string</i>
  should not be specified directly following the <b>&#x2212;o</b> list.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The <b>&#x2212;o</b> 0 field essentially selects the union of the join fields.
  For example, given file <b>phone</b>:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>!Name           Phone Number</b>
<b>Don             +1 123-456-7890</b>
<b>Hal             +1 234-567-8901</b>
<b>Yasushi         +2 345-678-9012</b>
</pre>
</div>
<div class="Pp"></div>
and file <b>fax</b>:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>!Name           Fax Number</b>
<b>Don             +1 123-456-7899</b>
<b>Keith           +1 456-789-0122</b>
<b>Yasushi         +2 345-678-9011</b>
</pre>
</div>
<div class="Pp"></div>
(where the large expanses of white space are meant to each represent a single
  &lt;tab&gt;), the command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>join &#x2212;t &quot;&lt;tab&gt;&quot; &#x2212;a 1 &#x2212;a 2 &#x2212;e '(unknown)' &#x2212;o 0,1.2,2.2 phone fax</b>
</pre>
</div>
<div class="Pp"></div>
would produce:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>!Name           Phone Number            Fax Number</b>
<b>Don             +1 123-456-7890         +1 123-456-7899</b>
<b>Hal             +1 234-567-8901         (unknown)</b>
<b>Keith           (unknown)               +1 456-789-0122</b>
<b>Yasushi         +2 345-678-9012         +2 345-678-9011</b>
</pre>
</div>
<div class="Pp"></div>
Multiple instances of the same key will produce combinatorial results. The
  following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>fa:</b>
<b>    a x</b>
<b>    a y</b>
<b>    a z</b>
<b>fb:</b>
<b>    a p</b>
</pre>
</div>
<div class="Pp"></div>
will produce:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>a x p</b>
<b>a y p</b>
<b>a z p</b>
</pre>
</div>
<div class="Pp"></div>
And the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>fa:</b>
<b>    a b c</b>
<b>    a d e</b>
<b>fb:</b>
<b>    a w x</b>
<b>    a y z</b>
<b>    a o p</b>
</pre>
</div>
<div class="Pp"></div>
will produce:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>a b c w x</b>
<b>a b c y z</b>
<b>a b c o p</b>
<b>a d e w x</b>
<b>a d e y z</b>
<b>a d e o p</b>
</pre>
</div>
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
The <b>&#x2212;e</b> option is only effective when used with <b>&#x2212;o</b>
  because, unless specific fields are identified using <b>&#x2212;o</b>,
  <i>join</i> is not aware of what fields might be empty. The exception to this
  is the join field, but identifying an empty join field with the
  <b>&#x2212;e</b> string is not historical practice and some scripts might
  break if this were changed.
<div class="Pp"></div>
The 0 field in the <b>&#x2212;o</b> list was adopted from the Tenth Edition
  version of <i>join</i> to satisfy international objections that the
  <i>join</i> in the base documents does not support the ``full join'' or
  ``outer join'' described in relational database literature. Although it has
  been possible to include a join field in the output (by default, or by field
  number using <b>&#x2212;o</b>), the join field could not be included for an
  unpaired line selected by <b>&#x2212;a</b>. The <b>&#x2212;o</b> 0 field
  essentially selects the union of the join fields.
<div class="Pp"></div>
This sort of outer join was not possible with the <i>join</i> commands in the
  base documents. The <b>&#x2212;o</b> 0 field was chosen because it is an
  upwards-compatible change for applications. An alternative was considered:
  have the join field represent the union of the fields in the files (where they
  are identical for matched lines, and one or both are null for unmatched
  lines). This was not adopted because it would break some historical
  applications.
<div class="Pp"></div>
The ability to specify <i>file2</i> as <b>&#x2212;</b> is not historical
  practice; it was added for completeness.
<div class="Pp"></div>
The <b>&#x2212;v</b> option is not historical practice, but was considered
  necessary because it permitted the writing of <i>only</i> those lines that do
  not match on the join field, as opposed to the <b>&#x2212;a</b> option, which
  prints both lines that do and do not match. This additional facility is
  parallel with the <b>&#x2212;v</b> option of <i>grep</i>.
<div class="Pp"></div>
Some historical implementations have been encountered where a blank line in one
  of the input files was considered to be the end of the file; the description
  in this volume of POSIX.1&#x2010;2008 does not cite this as an allowable case.
<div class="Pp"></div>
Earlier versions of this standard allowed <b>&#x2212;j</b>, <b>&#x2212;j1</b>,
  <b>&#x2212;j2</b> options, and a form of the <b>&#x2212;o</b> option that
  allowed the <i>list</i> option-argument to be multiple arguments. These forms
  are no longer specified by POSIX.1&#x2010;2008 but may be present in some
  implementations.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i><i>awk</i></i>, <i><i>comm</i></i>, <i><i>sort</i></i>, <i><i>uniq</i></i>
<div class="Pp"></div>
The Base Definitions volume of POSIX.1&#x2010;2008, <i>Chapter 8</i>,
  <i>Environment Variables</i>, <i>Section 12.2</i>, <i>Utility Syntax
  Guidelines</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2013 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  7, Copyright (C) 2013 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. (This is POSIX.1-2008 with the 2013
  Technical Corrigendum 1 applied.) In the event of any discrepancy between this
  version and the original IEEE and The Open Group Standard, the original IEEE
  and The Open Group Standard is the referee document. The original Standard can
  be obtained online at http://www.unix.org/online.html .
<div style="height: 1.00em;">&#x00A0;</div>
Any typographical or formatting errors that appear in this page are most likely
  to have been introduced during the conversion of the source files to man page
  format. To report such errors, see
  https://www.kernel.org/doc/man-pages/reporting_bugs.html .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
