<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:35:56 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>RPCCLIENT(1) User Commands RPCCLIENT(1)</p>

<p style="margin-top: 1em">NAME <br>
rpcclient - tool for executing client side MS-RPC
functions</p>

<p style="margin-top: 1em">SYNOPSIS <br>
rpcclient [-A authfile] [-c &lt;command string&gt;] [-d
debuglevel] [-l logdir] [-N] [-s &lt;smb config file&gt;]
[-U username[%password]] [-W workgroup] [-I destinationIP]
{server}</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This tool is part of the samba(7) suite.</p>

<p style="margin-top: 1em">rpcclient is a utility initially
developed to test MS-RPC functionality in Samba itself. It
has undergone several stages of development and stability.
Many system administrators <br>
have now written scripts around it to manage Windows NT
clients from their UNIX workstation.</p>

<p style="margin-top: 1em">OPTIONS <br>
server <br>
NetBIOS name of Server to which to connect. The server can
be any SMB/CIFS server. The name is resolved using the name
resolve order line from smb.conf(5).</p>

<p style="margin-top: 1em">-c|--command=&lt;command
string&gt; <br>
Execute semicolon separated commands (listed below)</p>

<p style="margin-top: 1em">-I|--dest-ip IP-address <br>
IP address is the address of the server to connect to. It
should be specified in standard &quot;a.b.c.d&quot;
notation.</p>

<p style="margin-top: 1em">Normally the client would
attempt to locate a named SMB/CIFS server by looking it up
via the NetBIOS name resolution mechanism described above in
the name resolve order <br>
parameter above. Using this parameter will force the client
to assume that the server is on the machine with the
specified IP address and the NetBIOS name component of the
<br>
resource being connected to will be ignored.</p>

<p style="margin-top: 1em">There is no default for this
parameter. If not supplied, it will be determined
automatically by the client as described above.</p>

<p style="margin-top: 1em">-p|--port port <br>
This number is the TCP port number that will be used when
making connections to the server. The standard (well-known)
TCP port number for an SMB/CIFS server is 139, which is <br>
the default.</p>

<p style="margin-top: 1em">-d|--debuglevel=level <br>
level is an integer from 0 to 10. The default value if this
parameter is not specified is 0.</p>

<p style="margin-top: 1em">The higher this value, the more
detail will be logged to the log files about the activities
of the server. At level 0, only critical errors and serious
warnings will be <br>
logged. Level 1 is a reasonable level for day-to-day running
- it generates a small amount of information about
operations carried out.</p>

<p style="margin-top: 1em">Levels above 1 will generate
considerable amounts of log data, and should only be used
when investigating a problem. Levels above 3 are designed
for use only by developers <br>
and generate HUGE amounts of log data, most of which is
extremely cryptic.</p>

<p style="margin-top: 1em">Note that specifying this
parameter here will override the log level parameter in the
smb.conf file.</p>

<p style="margin-top: 1em">-V|--version <br>
Prints the program version number.</p>


<p style="margin-top: 1em">-s|--configfile=&lt;configuration
file&gt; <br>
The file specified contains the configuration details
required by the server. The information in this file
includes server-specific information such as what printcap
file to <br>
use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at <br>
compile time.</p>

<p style="margin-top: 1em">-l|--log-basename=logdirectory
<br>
Base directory name for log/debug files. The extension
&quot;.progname&quot; will be appended (e.g. log.smbclient,
log.smbd, etc...). The log file is never removed by the
client.</p>


<p style="margin-top: 1em">--option=&lt;name&gt;=&lt;value&gt;
<br>
Set the smb.conf(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled-in defaults and options read from the
configuration file.</p>

<p style="margin-top: 1em">-N|--no-pass <br>
If specified, this parameter suppresses the normal password
prompt from the client to the user. This is useful when
accessing a service that does not require a password.</p>

<p style="margin-top: 1em">Unless a password is specified
on the command line or this parameter is specified, the
client will request a password.</p>

<p style="margin-top: 1em">If a password is specified on
the command line and this option is also defined the
password on the command line will be silently ingnored and
no password will be used.</p>

<p style="margin-top: 1em">-k|--kerberos <br>
Try to authenticate with kerberos. Only useful in an Active
Directory environment.</p>

<p style="margin-top: 1em">-C|--use-ccache <br>
Try to use the credentials cached by winbind.</p>


<p style="margin-top: 1em">-A|--authentication-file=filename
<br>
This option allows you to specify a file from which to read
the username and password used in the connection. The format
of the file is</p>

<p style="margin-top: 1em">username = &lt;value&gt; <br>
password = &lt;value&gt; <br>
domain = &lt;value&gt;</p>

<p style="margin-top: 1em">Make certain that the
permissions on the file restrict access from unwanted
users.</p>

<p style="margin-top: 1em">-U|--user=username[%password]
<br>
Sets the SMB username or username and password.</p>

<p style="margin-top: 1em">If %password is not specified,
the user will be prompted. The client will first check the
USER environment variable, then the LOGNAME variable and if
either exists, the <br>
string is uppercased. If these environmental variables are
not found, the username GUEST is used.</p>

<p style="margin-top: 1em">A third option is to use a
credentials file which contains the plaintext of the
username and password. This option is mainly provided for
scripts where the admin does not <br>
wish to pass the credentials on the command line or via
environment variables. If this method is used, make certain
that the permissions on the file restrict access from <br>
unwanted users. See the -A for more details.</p>

<p style="margin-top: 1em">Be cautious about including
passwords in scripts. Also, on many systems the command line
of a running process may be seen via the ps command. To be
safe always allow <br>
rpcclient to prompt for a password and type it in
directly.</p>

<p style="margin-top: 1em">-S|--signing on|off|required
<br>
Set the client signing state.</p>

<p style="margin-top: 1em">-P|--machine-pass <br>
Use stored machine account password.</p>

<p style="margin-top: 1em">-e|--encrypt <br>
This command line parameter requires the remote server
support the UNIX extensions or that the SMB3 protocol has
been selected. Requests that the connection be encrypted.
<br>
Negotiates SMB encryption using either SMB3 or POSIX
extensions via GSSAPI. Uses the given credentials for the
encryption negotiation (either kerberos or NTLMv1/v2 if
given <br>
domain/username/password triple. Fails the connection if
encryption cannot be negotiated.</p>

<p style="margin-top: 1em">--pw-nt-hash <br>
The supplied password is the NT hash.</p>

<p style="margin-top: 1em">-n|--netbiosname &lt;primary
NetBIOS name&gt; <br>
This option allows you to override the NetBIOS name that
Samba uses for itself. This is identical to setting the
netbios name parameter in the smb.conf file. However, a <br>
command line setting will take precedence over settings in
smb.conf.</p>

<p style="margin-top: 1em">-i|--scope &lt;scope&gt; <br>
This specifies a NetBIOS scope that nmblookup will use to
communicate with when generating NetBIOS names. For details
on the use of NetBIOS scopes, see rfc1001.txt and <br>
rfc1002.txt. NetBIOS scopes are very rarely used, only set
this parameter if you are the system administrator in charge
of all the NetBIOS systems you communicate with.</p>

<p style="margin-top: 1em">-W|--workgroup=domain <br>
Set the SMB domain of the username. This overrides the
default domain which is the domain defined in smb.conf. If
the domain specified is the same as the servers NetBIOS <br>
name, it causes the client to log on using the servers local
SAM (as opposed to the Domain SAM).</p>

<p style="margin-top: 1em">-O|--socket-options socket
options <br>
TCP socket options to set on the client socket. See the
socket options parameter in the smb.conf manual page for the
list of valid options.</p>

<p style="margin-top: 1em">-?|--help <br>
Print a summary of command line options.</p>

<p style="margin-top: 1em">--usage <br>
Display brief usage message.</p>

<p style="margin-top: 1em">COMMANDS <br>
LSARPC <br>
lsaquery <br>
Query info policy</p>

<p style="margin-top: 1em">lookupsids <br>
Resolve a list of SIDs to usernames.</p>

<p style="margin-top: 1em">lookupnames <br>
Resolve a list of usernames to SIDs.</p>

<p style="margin-top: 1em">enumtrust <br>
Enumerate trusted domains</p>

<p style="margin-top: 1em">enumprivs <br>
Enumerate privileges</p>

<p style="margin-top: 1em">getdispname <br>
Get the privilege name</p>

<p style="margin-top: 1em">lsaenumsid <br>
Enumerate the LSA SIDS</p>

<p style="margin-top: 1em">lsaenumprivsaccount <br>
Enumerate the privileges of an SID</p>

<p style="margin-top: 1em">lsaenumacctrights <br>
Enumerate the rights of an SID</p>

<p style="margin-top: 1em">lsaenumacctwithright <br>
Enumerate accounts with a right</p>

<p style="margin-top: 1em">lsaaddacctrights <br>
Add rights to an account</p>

<p style="margin-top: 1em">lsaremoveacctrights <br>
Remove rights from an account</p>

<p style="margin-top: 1em">lsalookupprivvalue <br>
Get a privilege value given its name</p>

<p style="margin-top: 1em">lsaquerysecobj <br>
Query LSA security object</p>

<p style="margin-top: 1em">LSARPC-DS <br>
dsroledominfo <br>
Get Primary Domain Information</p>

<p style="margin-top: 1em">DFS</p>

<p style="margin-top: 1em">dfsexist <br>
Query DFS support</p>

<p style="margin-top: 1em">dfsadd <br>
Add a DFS share</p>

<p style="margin-top: 1em">dfsremove <br>
Remove a DFS share</p>

<p style="margin-top: 1em">dfsgetinfo <br>
Query DFS share info</p>

<p style="margin-top: 1em">dfsenum <br>
Enumerate dfs shares</p>

<p style="margin-top: 1em">REG <br>
shutdown <br>
Remote Shutdown</p>

<p style="margin-top: 1em">abortshutdown <br>
Abort Shutdown</p>

<p style="margin-top: 1em">SRVSVC <br>
srvinfo <br>
Server query info</p>

<p style="margin-top: 1em">netshareenum <br>
Enumerate shares</p>

<p style="margin-top: 1em">netshareenumall <br>
Enumerate all shares</p>

<p style="margin-top: 1em">netsharegetinfo <br>
Get Share Info</p>

<p style="margin-top: 1em">netsharesetinfo <br>
Set Share Info</p>

<p style="margin-top: 1em">netsharesetdfsflags <br>
Set DFS flags</p>

<p style="margin-top: 1em">netfileenum <br>
Enumerate open files</p>

<p style="margin-top: 1em">netremotetod <br>
Fetch remote time of day</p>

<p style="margin-top: 1em">netnamevalidate <br>
Validate sharename</p>

<p style="margin-top: 1em">netfilegetsec <br>
Get File security</p>

<p style="margin-top: 1em">netsessdel <br>
Delete Session</p>

<p style="margin-top: 1em">netsessenum <br>
Enumerate Sessions</p>

<p style="margin-top: 1em">netdiskenum <br>
Enumerate Disks</p>

<p style="margin-top: 1em">netconnenum <br>
Enumerate Connections</p>

<p style="margin-top: 1em">netshareadd <br>
Add share</p>

<p style="margin-top: 1em">netsharedel <br>
Delete share</p>

<p style="margin-top: 1em">SAMR <br>
queryuser <br>
Query user info</p>

<p style="margin-top: 1em">querygroup <br>
Query group info</p>

<p style="margin-top: 1em">queryusergroups <br>
Query user groups</p>

<p style="margin-top: 1em">querygroupmem <br>
Query group membership</p>

<p style="margin-top: 1em">queryaliasmem <br>
Query alias membership</p>

<p style="margin-top: 1em">querydispinfo <br>
Query display info</p>

<p style="margin-top: 1em">querydominfo <br>
Query domain info</p>

<p style="margin-top: 1em">enumdomusers <br>
Enumerate domain users</p>

<p style="margin-top: 1em">enumdomgroups <br>
Enumerate domain groups</p>

<p style="margin-top: 1em">enumalsgroups <br>
Enumerate alias groups</p>

<p style="margin-top: 1em">createdomuser <br>
Create domain user</p>

<p style="margin-top: 1em">samlookupnames <br>
Look up names</p>

<p style="margin-top: 1em">samlookuprids <br>
Look up names</p>

<p style="margin-top: 1em">deletedomuser <br>
Delete domain user</p>

<p style="margin-top: 1em">samquerysecobj <br>
Query SAMR security object</p>

<p style="margin-top: 1em">getdompwinfo <br>
Retrieve domain password info</p>

<p style="margin-top: 1em">lookupdomain <br>
Look up domain</p>

<p style="margin-top: 1em">SPOOLSS <br>
adddriver &lt;arch&gt; &lt;config&gt; [&lt;version&gt;] <br>
Execute an AddPrinterDriver() RPC to install the printer
driver information on the server. Note that the driver files
should already exist in the directory returned by <br>
getdriverdir. Possible values for arch are the same as those
for the getdriverdir command. The config parameter is
defined as follows:</p>

<p style="margin-top: 1em">Long Driver Name: Driver File
Name: Data File Name: Config File Name: Help File Name:
Language Monitor Name: Default Data Type: Comma Separated
list of Files</p>

<p style="margin-top: 1em">Any empty fields should be enter
as the string &quot;NULL&quot;.</p>

<p style="margin-top: 1em">Samba does not need to support
the concept of Print Monitors since these only apply to
local printers whose driver can make use of a bi-directional
link for communication. <br>
This field should be &quot;NULL&quot;. On a remote NT print
server, the Print Monitor for a driver must already be
installed prior to adding the driver or else the RPC will
fail.</p>

<p style="margin-top: 1em">The version parameter lets you
specify the printer driver version number. If omitted, the
default driver version for the specified architecture will
be used. This option can <br>
be used to upload Windows 2000 (version 3) printer
drivers.</p>

<p style="margin-top: 1em">addprinter &lt;printername&gt;
&lt;sharename&gt; &lt;drivername&gt; &lt;port&gt; <br>
Add a printer on the remote server. This printer will be
automatically shared. Be aware that the printer driver must
already be installed on the server (see adddriver) and <br>
the portmust be a valid port name (see enumports.</p>

<p style="margin-top: 1em">deldriver &lt;driver&gt; <br>
Delete the specified printer driver for all architectures.
This does not delete the actual driver files from the
server, only the entry from the server&rsquo;s list of
drivers.</p>

<p style="margin-top: 1em">deldriverex &lt;driver&gt;
[architecture] [version] [flags] <br>
Delete the specified printer driver and optionally files
associated with the driver. You can limit this action to a
specific architecture and a specific version. If no <br>
architecture is given, all driver files of that driver will
be deleted. flags correspond to numeric DPD_* values, i.e. a
value of 3 requests (DPD_DELETE_UNUSED_FILES | <br>
DPD_DELETE_SPECIFIC_VERSION).</p>

<p style="margin-top: 1em">enumdata <br>
Enumerate all printer setting data stored on the server. On
Windows NT clients, these values are stored in the registry,
while Samba servers store them in the printers TDB. <br>
This command corresponds to the MS Platform SDK
GetPrinterData() function (* This command is currently
unimplemented).</p>

<p style="margin-top: 1em">enumdataex <br>
Enumerate printer data for a key</p>

<p style="margin-top: 1em">enumjobs &lt;printer&gt; <br>
List the jobs and status of a given printer. This command
corresponds to the MS Platform SDK EnumJobs() function</p>

<p style="margin-top: 1em">enumkey <br>
Enumerate printer keys</p>

<p style="margin-top: 1em">enumports [level] <br>
Executes an EnumPorts() call using the specified info level.
Currently only info levels 1 and 2 are supported.</p>

<p style="margin-top: 1em">enumdrivers [level] <br>
Execute an EnumPrinterDrivers() call. This lists the various
installed printer drivers for all architectures. Refer to
the MS Platform SDK documentation for more details of <br>
the various flags and calling options. Currently supported
info levels are 1, 2, and 3.</p>

<p style="margin-top: 1em">enumprinters [level] <br>
Execute an EnumPrinters() call. This lists the various
installed and share printers. Refer to the MS Platform SDK
documentation for more details of the various flags and <br>
calling options. Currently supported info levels are 1, 2
and 5.</p>

<p style="margin-top: 1em">getdata &lt;printername&gt;
&lt;valuename;&gt; <br>
Retrieve the data for a given printer setting. See the
enumdata command for more information. This command
corresponds to the GetPrinterData() MS Platform SDK
function.</p>

<p style="margin-top: 1em">getdataex <br>
Get printer driver data with keyname</p>

<p style="margin-top: 1em">getdriver &lt;printername&gt;
<br>
Retrieve the printer driver information (such as driver
file, config file, dependent files, etc...) for the given
printer. This command corresponds to the GetPrinterDriver()
<br>
MS Platform SDK function. Currently info level 1, 2, and 3
are supported.</p>

<p style="margin-top: 1em">getdriverdir &lt;arch&gt; <br>
Execute a GetPrinterDriverDirectory() RPC to retrieve the
SMB share name and subdirectory for storing printer driver
files for a given architecture. Possible values for arch
<br>
are &quot;Windows 4.0&quot; (for Windows 95/98),
&quot;Windows NT x86&quot;, &quot;Windows NT PowerPC&quot;,
&quot;Windows Alpha_AXP&quot;, and &quot;Windows NT
R4000&quot;.</p>

<p style="margin-top: 1em">getprinter &lt;printername&gt;
<br>
Retrieve the current printer information. This command
corresponds to the GetPrinter() MS Platform SDK
function.</p>

<p style="margin-top: 1em">getprintprocdir <br>
Get print processor directory</p>

<p style="margin-top: 1em">openprinter &lt;printername&gt;
<br>
Execute an OpenPrinterEx() and ClosePrinter() RPC against a
given printer.</p>

<p style="margin-top: 1em">setdriver &lt;printername&gt;
&lt;drivername&gt; <br>
Execute a SetPrinter() command to update the printer driver
associated with an installed printer. The printer driver
must already be correctly installed on the print server.</p>

<p style="margin-top: 1em">See also the enumprinters and
enumdrivers commands for obtaining a list of of installed
printers and drivers.</p>

<p style="margin-top: 1em">addform <br>
Add form</p>

<p style="margin-top: 1em">setform <br>
Set form</p>

<p style="margin-top: 1em">getform <br>
Get form</p>

<p style="margin-top: 1em">deleteform <br>
Delete form</p>

<p style="margin-top: 1em">enumforms <br>
Enumerate form</p>

<p style="margin-top: 1em">setprinter <br>
Set printer comment</p>

<p style="margin-top: 1em">setprinterdata <br>
Set REG_SZ printer data</p>

<p style="margin-top: 1em">setprintername
&lt;printername&gt; &lt;newprintername&gt; <br>
Set printer name</p>

<p style="margin-top: 1em">rffpcnex <br>
Rffpcnex test</p>

<p style="margin-top: 1em">NETLOGON <br>
logonctrl2 <br>
Logon Control 2</p>

<p style="margin-top: 1em">logonctrl <br>
Logon Control</p>

<p style="margin-top: 1em">samsync <br>
Sam Synchronisation</p>

<p style="margin-top: 1em">samdeltas <br>
Query Sam Deltas</p>

<p style="margin-top: 1em">samlogon <br>
Sam Logon</p>

<p style="margin-top: 1em">FSRVP <br>
fss_is_path_sup &lt;share&gt; <br>
Check whether a share supports shadow-copy requests</p>

<p style="margin-top: 1em">fss_get_sup_version <br>
Get supported FSRVP version from server</p>

<p style="margin-top: 1em">fss_create_expose
&lt;context&gt; &lt;[ro|rw]&gt; &lt;share1&gt; [share2] ...
[shareN] <br>
Request shadow-copy creation and exposure as a new share</p>

<p style="margin-top: 1em">fss_delete &lt;base_share&gt;
&lt;shadow_copy_set_id&gt; &lt;shadow_copy_id&gt; <br>
Request shadow-copy share deletion</p>

<p style="margin-top: 1em">fss_has_shadow_copy
&lt;base_share&gt; <br>
Check for an associated share shadow-copy</p>

<p style="margin-top: 1em">fss_get_mapping
&lt;base_share&gt; &lt;shadow_copy_set_id&gt;
&lt;shadow_copy_id&gt; <br>
Get shadow-copy share mapping information</p>

<p style="margin-top: 1em">fss_recovery_complete
&lt;shadow_copy_set_id&gt; <br>
Flag read-write shadow-copy as recovery complete, allowing
further shadow-copy requests</p>

<p style="margin-top: 1em">GENERAL COMMANDS <br>
debuglevel <br>
Set the current debug level used to log information.</p>

<p style="margin-top: 1em">help (?) <br>
Print a listing of all known commands or extended help on a
particular command.</p>

<p style="margin-top: 1em">quit (exit) <br>
Exit rpcclient.</p>

<p style="margin-top: 1em">BUGS <br>
rpcclient is designed as a developer testing tool and may
not be robust in certain areas (such as command line
parsing). It has been known to generate a core dump upon
failures <br>
when invalid parameters where passed to the interpreter.</p>

<p style="margin-top: 1em">From Luke Leighton&rsquo;s
original rpcclient man page:</p>

<p style="margin-top: 1em">WARNING! The MSRPC over SMB code
has been developed from examining Network traces. No
documentation is available from the original creators
(Microsoft) on how MSRPC over SMB <br>
works, or how the individual MSRPC services work.
Microsoft&rsquo;s implementation of these services has been
demonstrated (and reported) to be... a bit flaky in
places.</p>

<p style="margin-top: 1em">The development of Samba&rsquo;s
implementation is also a bit rough, and as more of the
services are understood, it can even result in versions of
smbd(8) and rpcclient(1) that are <br>
incompatible for some commands or services. Additionally,
the developers are sending reports to Microsoft, and
problems found or reported to Microsoft are fixed in Service
Packs, <br>
which may result in incompatibilities.</p>

<p style="margin-top: 1em">VERSION <br>
This man page is correct for version 3 of the Samba
suite.</p>

<p style="margin-top: 1em">AUTHOR <br>
The original Samba software and related utilities were
created by Andrew Tridgell. Samba is now developed by the
Samba Team as an Open Source project similar to the way the
Linux <br>
kernel is developed.</p>

<p style="margin-top: 1em">The original rpcclient man page
was written by Matthew Geddes, Luke Kenneth Casson Leighton,
and rewritten by Gerald Carter. The conversion to DocBook
for Samba 2.2 was done by <br>
Gerald Carter. The conversion to DocBook XML 4.2 for Samba
3.0 was done by Alexander Bokovoy.</p>

<p style="margin-top: 1em">Samba 4.4 05/25/2017
RPCCLIENT(1)</p>
<hr>
</body>
</html>
