<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:57:50 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CDIST(1) cdist CDIST(1)</p>

<p style="margin-top: 1em">NAME <br>
cdist - Usable Configuration Management</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cdist [-h] [-d] [-v] [-V] {banner,config,shell,install}
...</p>

<p style="margin-top: 1em">cdist banner [-h] [-d] [-v]</p>

<p style="margin-top: 1em">cdist config [-h] [-d] [-v] [-b]
[-c CONF_DIR] [-f HOSTFILE] <br>
[-i MANIFEST] [-j [JOBS]] [-n] [-o OUT_PATH] [-p] [-s] <br>
[--remote-copy REMOTE_COPY] [--remote-exec REMOTE_EXEC] <br>
[host [host ...]]</p>

<p style="margin-top: 1em">cdist install [-h] [-d] [-v]
[-b] [-c CONF_DIR] [-f HOSTFILE] <br>
[-i MANIFEST] [-j [JOBS]] [-n] [-o OUT_PATH] [-p] [-s] <br>
[--remote-copy REMOTE_COPY] [--remote-exec REMOTE_EXEC] <br>
[host [host ...]]</p>

<p style="margin-top: 1em">cdist shell [-h] [-d] [-v] [-s
SHELL]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
cdist is the frontend executable to the cdist configuration
management. It supports different subcommands as explained
below.</p>

<p style="margin-top: 1em">It is written in Python so it
requires python(1) to be installed. It requires a minimal
Python version 3.2.</p>

<p style="margin-top: 1em">GENERAL <br>
All commands accept the following options:</p>

<p style="margin-top: 1em">-h, --help <br>
Show the help screen</p>

<p style="margin-top: 1em">-d, --debug <br>
Set log level to debug (deprecated, use -vvv instead)</p>

<p style="margin-top: 1em">-v, --verbose <br>
Increase log level, be more verbose. Use it more than once
to increase log level. The order of levels from the lowest
to the highest are: ERROR, WARNING, INFO, DEBUG.</p>

<p style="margin-top: 1em">-V, --version <br>
Show version and exit</p>

<p style="margin-top: 1em">BANNER <br>
Displays the cdist banner. Useful for printing cdist posters
- a must have for every office.</p>

<p style="margin-top: 1em">CONFIG/INSTALL <br>
Configure/install one or more hosts.</p>

<p style="margin-top: 1em">-b, --beta <br>
Enable beta functionalities.</p>

<p style="margin-top: 1em">Can also be enabled using
CDIST_BETA env var.</p>

<p style="margin-top: 1em">-c CONF_DIR, --conf-dir CONF_DIR
<br>
Add a configuration directory. Can be specified multiple
times. If configuration directories contain conflicting
types, explorers or manifests, then the last one found is
<br>
used. Additionally this can also be configured by setting
the CDIST_PATH environment variable to a colon delimited
list of config directories. Directories given with the <br>
--conf-dir argument have higher precedence over those set
through the environment variable.</p>

<p style="margin-top: 1em">-f HOSTFILE, --file HOSTFILE
<br>
Read additional hosts to operate on from specified file or
from stdin if &rsquo;-&rsquo; (each host on separate line).
If no host or host file is specified then, by default, read
<br>
hosts from stdin. For the file format see below.</p>

<p style="margin-top: 1em">-i MANIFEST, --initial-manifest
MANIFEST <br>
Path to a cdist manifest or - to read from stdin</p>

<p style="margin-top: 1em">-j [JOBS], --jobs [JOBS] <br>
Specify the maximum number of parallel jobs; currently only
global explorers are supported (currently in beta)</p>

<p style="margin-top: 1em">-n, --dry-run <br>
Do not execute code</p>

<p style="margin-top: 1em">-o OUT_PATH, --out-dir OUT_PATH
<br>
Directory to save cdist output in</p>

<p style="margin-top: 1em">-p, --parallel <br>
Operate on multiple hosts in parallel</p>

<p style="margin-top: 1em">-s, --sequential <br>
Operate on multiple hosts sequentially (default)</p>

<p style="margin-top: 1em">--remote-copy REMOTE_COPY <br>
Command to use for remote copy (should behave like scp)</p>

<p style="margin-top: 1em">--remote-exec REMOTE_EXEC <br>
Command to use for remote execution (should behave like
ssh)</p>

<p style="margin-top: 1em">HOSTFILE FORMAT <br>
HOSTFILE contains hosts per line. All characters after and
including &rsquo;#&rsquo; until the end of line is a
comment. In a line, all leading and trailing whitespace
characters are <br>
ignored. Empty lines are ignored/skipped.</p>

<p style="margin-top: 1em">Hostfile line is processed like
the following. First, all comments are removed. Then all
leading and trailing whitespace characters are stripped. If
such a line results in empty <br>
line it is ignored/skipped. Otherwise, host string is
used.</p>

<p style="margin-top: 1em">SHELL <br>
This command allows you to spawn a shell that enables access
to the types as commands. It can be thought as an
&quot;interactive manifest&quot; environment. See below for
example usage. <br>
Its primary use is for debugging type parameters.</p>

<p style="margin-top: 1em">-s SHELL, --shell SHELL <br>
Select shell to use, defaults to current shell. Used shell
should be POSIX compatible shell.</p>

<p style="margin-top: 1em">FILES <br>
~/.cdist <br>
Your personal cdist config directory. If exists it will be
automatically used.</p>

<p style="margin-top: 1em">cdist/conf <br>
The distribution configuration directory. It contains
official types and explorers. This path is relative to cdist
installation directory.</p>

<p style="margin-top: 1em">NOTES <br>
cdist detects if host is specified by IPv6 address. If so
then remote_copy command is executed with host address
enclosed in square brackets (see scp(1)).</p>

<p style="margin-top: 1em">EXAMPLES <br>
# Configure ikq05.ethz.ch with debug enabled <br>
% cdist config -d ikq05.ethz.ch</p>

<p style="margin-top: 1em"># Configure hosts in parallel
and use a different configuration directory <br>
% cdist config -c ~/p/cdist-nutzung -p ikq02.ethz.ch
ikq03.ethz.ch ikq04.ethz.ch</p>

<p style="margin-top: 1em"># Use custom remote exec / copy
commands <br>
% cdist config --remote-exec /path/to/my/remote/exec
--remote-copy /path/to/my/remote/copy -p ikq02.ethz.ch
ikq03.ethz.ch ikq04.ethz.ch</p>

<p style="margin-top: 1em"># Configure hosts read from file
loadbalancers <br>
% cdist config -f loadbalancers</p>

<p style="margin-top: 1em"># Configure hosts read from file
web.hosts using 16 parallel jobs <br>
# (beta functionality) <br>
% cdist config -b -j 16 -f web.hosts</p>

<p style="margin-top: 1em"># Display banner <br>
cdist banner</p>

<p style="margin-top: 1em"># Show help <br>
% cdist --help</p>

<p style="margin-top: 1em"># Show Version <br>
% cdist --version</p>

<p style="margin-top: 1em"># Enter a shell that has access
to emulated types <br>
% cdist shell <br>
% __git <br>
usage: __git --source SOURCE [--state STATE] [--branch
BRANCH] <br>
[--group GROUP] [--owner OWNER] [--mode MODE] object_id</p>

<p style="margin-top: 1em"># Install ikq05.ethz.ch with
debug enabled <br>
% cdist install -d ikq05.ethz.ch</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
TMPDIR, TEMP, TMP <br>
Setup the base directory for the temporary directory. See
http://docs.python.org/py3k/library/tempfile.html for more
information. This is rather useful, if the standard <br>
directory used does not allow executables.</p>

<p style="margin-top: 1em">CDIST_PATH <br>
Colon delimited list of config directories.</p>

<p style="margin-top: 1em">CDIST_LOCAL_SHELL <br>
Selects shell for local script execution, defaults to
/bin/sh.</p>

<p style="margin-top: 1em">CDIST_REMOTE_SHELL <br>
Selects shell for remote script execution, defaults to
/bin/sh.</p>

<p style="margin-top: 1em">CDIST_OVERRIDE <br>
Allow overwriting type parameters.</p>

<p style="margin-top: 1em">CDIST_ORDER_DEPENDENCY <br>
Create dependencies based on the execution order.</p>

<p style="margin-top: 1em">CDIST_REMOTE_EXEC <br>
Use this command for remote execution (should behave like
ssh).</p>

<p style="margin-top: 1em">CDIST_REMOTE_COPY <br>
Use this command for remote copy (should behave like
scp).</p>

<p style="margin-top: 1em">CDIST_BETA <br>
Enable beta functionalities.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The following exit values shall be returned:</p>

<p style="margin-top: 1em">0 Successful completion.</p>

<p style="margin-top: 1em">1 One or more host
configurations failed.</p>

<p style="margin-top: 1em">AUTHORS <br>
Originally written by Nico Schottelius
&lt;nico-cdist--@--schottelius.org&gt; and Steven Armstrong
&lt;steven-cdist--@--armstrong.cc&gt;.</p>

<p style="margin-top: 1em">CAVEATS <br>
When operating in parallel, either by operating in parallel
for each host (-p/--parallel) or by parallel jobs within a
host (-j/--jobs), and depending on target SSH server and
<br>
its configuration you may encounter connection drops. This
is controlled with sshd MaxStartups configuration options.
You may also encounter session open refusal. This happens
<br>
with ssh multiplexing when you reach maximum number of open
sessions permitted per network connection. In this case ssh
will disable multiplexing. This limit is controlled with
<br>
sshd MaxSessions configuration options. For more details
refer to sshd_config(5).</p>

<p style="margin-top: 1em">When requirements for the same
object are defined in different manifests (see example
below) in init manifest and in some other type manifest and
they differs then dependency <br>
resolver cannot detect dependencies right. This happens
because cdist cannot prepare all objects first and then run
objects because some object can depend on the result of type
<br>
explorer(s) and explorers are executed during object run.
cdist will detect such case and write warning message.
Example for such a case:</p>

<p style="margin-top: 1em">init manifest: <br>
__a a <br>
require=&quot;__e/e&quot; __b b <br>
require=&quot;__f/f&quot; __c c <br>
__e e <br>
__f f <br>
require=&quot;__c/c&quot; __d d <br>
__g g <br>
__h h</p>

<p style="margin-top: 1em">type __g manifest: <br>
require=&quot;__c/c __d/d&quot; __a a</p>

<p style="margin-top: 1em">Warning message: <br>
WARNING: cdisttesthost: Object __a/a already exists with
requirements: <br>

/usr/home/darko/ungleich/cdist/cdist/test/config/fixtures/manifest/init-deps-resolver
/tmp/tmp.cdist.test.ozagkg54/local/759547ff4356de6e3d9e08522b0d0807/data/conf/type/__g/manifest:
set() <br>

/tmp/tmp.cdist.test.ozagkg54/local/759547ff4356de6e3d9e08522b0d0807/data/conf/type/__g/manifest:
{&rsquo;__c/c&rsquo;, &rsquo;__d/d&rsquo;} <br>
Dependency resolver could not handle dependencies as
expected.</p>

<p style="margin-top: 1em">COPYING <br>
Copyright (C) 2011-2013 Nico Schottelius. Free use of this
software is granted under the terms of the GNU General
Public License v3 or later (GPLv3+).</p>

<p style="margin-top: 1em">4.4.1 Dec 18, 2016 CDIST(1)</p>
<hr>
</body>
</html>
