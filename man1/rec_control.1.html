<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>REC_CONTROL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">REC_CONTROL(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">REC_CONTROL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
rec_control - control pdns_recursor
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>rec_control</b> [<i>OPTION</i>]... <i>COMMAND</i> [<i>COMMAND-OPTION</i>]...
<h2 class="Ss" title="Ss" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h2>
<b>rec_control</b> allows the operator to control a running instance of the
  pdns_recursor.
<div class="Pp"></div>
The commands that can be passed to the recursor are described on
  http://doc.powerdns.com/md/recursor/running/#rec_control-commands
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To stop the recursor by hand, run:
<div class="Pp"></div>
#&#x00A0;rec_control&#x00A0;quit
<div class="Pp"></div>
To dump the cache to disk, execute:
<div class="Pp"></div>
#&#x00A0;rec_control&#x00A0;dump-cache&#x00A0;/tmp/the-cache
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">provide this helpful message.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--config-dir=<i>PATH</i></b></dt>
  <dd class="It-tag">Directory where the recursor.conf lives.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--socket-dir=<i>PATH</i></b></dt>
  <dd class="It-tag">Where the controlsocket will live, please use
      <b>--config-dir</b> instead.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--socket-pid=<i>PID</i></b></dt>
  <dd class="It-tag">When running in SMP mode, pid of <b>pdns_recursor</b> to
      control.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--timeout=<i>NUM</i></b></dt>
  <dd class="It-tag">Number of seconds to wait for the remote PowerDNS Recursor
      to respond. Set to 0 for infinite.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-nta <i>DOMAIN</i> [<i>REASON</i>]</b></dt>
  <dd class="It-tag">Add a Negative Trust Anchor for <i>DOMAIN</i>, suffixed
      optionally with <i>REASON</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>add-ta <i>DOMAIN</i> <i>DSRECORD</i></b></dt>
  <dd class="It-tag">Add a Trust Anchor for <i>DOMAIN</i> with DS record data
      <i>DSRECORD</i>. This adds the new Trust Anchor to the existing set of
      Trust Anchors for <i>DOMAIN</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>current-queries</b></dt>
  <dd class="It-tag">Shows the currently active queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>clear-nta <i>DOMAIN</i>...</b></dt>
  <dd class="It-tag">Remove Negative Trust Anchor for one or more
      <i>DOMAIN</i>s. Set domain to '*' to remove all NTA's.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>clear-ta [<i>DOMAIN</i>]...</b></dt>
  <dd class="It-tag">Remove Trust Anchor for one or more <i>DOMAIN</i>s. Note
      that removing the root trust anchor is not possible.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dump-cache <i>FILENAME</i></b></dt>
  <dd class="It-tag">Dumps the entire cache to <i>FILENAME</i>. This file should
      not exist already, PowerDNS will refuse to overwrite it. While dumping,
      the recursor will not answer questions.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dump-edns <i>FILENAME</i></b></dt>
  <dd class="It-tag">Dumps the EDNS status to the filename mentioned. This file
      should not exist already, PowerDNS will refuse to overwrite it. While
      dumping, the recursor will not answer questions.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dump-nsspeeds <i>FILENAME</i></b></dt>
  <dd class="It-tag">Dumps the nameserver speed statistics to the
      <i>FILENAME</i> mentioned. This file should not exist already, PowerDNS
      will refuse to overwrite it. While dumping, the recursor will not answer
      questions.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get <i>STATISTIC</i> [<i>STATISTIC</i>]...</b></dt>
  <dd class="It-tag">Retrieve a statistic. For items that can be queried, see
      http://doc.powerdns.com/md/recursor/stats/</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-all</b></dt>
  <dd class="It-tag">Retrieve all known statistics.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-ntas</b></dt>
  <dd class="It-tag">Get a list of the currently configured Negative Trust
      Anchors.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-tas</b></dt>
  <dd class="It-tag">Get a list of the currently configured Trust Anchors.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-parameter <i>KEY</i> [<i>KEY</i>]...</b></dt>
  <dd class="It-tag">Retrieves the specified configuration parameter(s).</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>get-qtypelist</b></dt>
  <dd class="It-tag">Retrieves QType statistics. Queries from cache aren't being
      counted yet.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>help</b></dt>
  <dd class="It-tag">Shows a list of supported commands.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ping</b></dt>
  <dd class="It-tag">Check if server is alive.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quit</b></dt>
  <dd class="It-tag">Request shutdown of the recursor.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>quit-nicely</b></dt>
  <dd class="It-tag">Request nice shutdown of the recursor.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reload-acls</b></dt>
  <dd class="It-tag">Reloads ACLs.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reload-lua-script [<i>FILENAME</i>]</b></dt>
  <dd class="It-tag">(Re)loads Lua script <i>FILENAME</i>. If <i>FILENAME</i> is
      empty, attempt to reload the currently loaded script. This replaces the
      script currently loaded.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reload-lua-config [<i>FILENAME</i>]</b></dt>
  <dd class="It-tag">(Re)loads Lua configuration <i>FILENAME</i>. If
      <i>FILENAME</i> is empty, attempt to reload the currently loaded file.
      Note that <i>FILENAME</i> will be fully executed, any settings changed at
      runtime that are not modified in this file, will still be active.
      Reloading RPZ, especially by AXFR, can take some time; during which the
      recursor will not answer questions.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reload-zones</b></dt>
  <dd class="It-tag">Reload authoritative and forward zones. Retains current
      configuration in case of errors.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-carbon-server <i>CARBON SERVER</i> [<i>CARBON
    OURNAME</i>]</b></dt>
  <dd class="It-tag">Set the carbon-server setting to <i>CARBON SERVER</i>. If
      <i>CARBON OURNAME</i> is not empty, also set the carbon-ourname setting to
      <i>CARBON OURNAME</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-dnssec-log-bogus <i>SETTING</i></b></dt>
  <dd class="It-tag">Set dnssec-log-bogus setting to <i>SETTING</i>. Set to 'on'
      or 'yes' to log DNSSEC validation failures and to 'no' or 'off' to disable
      logging these failures.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set-minimum-ttl <i>NUM</i></b></dt>
  <dd class="It-tag">Set minimum-ttl-override to <i>NUM</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-queries</b></dt>
  <dd class="It-tag">Shows the top-20 queries. Statistics are over the last
      'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-pub-queries</b></dt>
  <dd class="It-tag">Shows the top-20 queries grouped by public suffix list.
      Statistics are over the last 'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-largeanswer-remotes</b></dt>
  <dd class="It-tag">Shows the top-20 remote hosts causing large answers.
      Statistics are over the last 'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-remotes</b></dt>
  <dd class="It-tag">Shows the top-20 most active remote hosts. Statistics are
      over the last 'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-servfail-queries</b></dt>
  <dd class="It-tag">Shows the top-20 queries causing servfail responses.
      Statistics are over the last 'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-pub-servfail-queries</b></dt>
  <dd class="It-tag">Shows the top-20 queries causing servfail responses grouped
      by public suffix list. Statistics are over the last
      'stats-ringbuffer-entries' queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>top-servfail-remotes</b></dt>
  <dd class="It-tag">Shows the top-20 most active remote hosts causing servfail
      responses. Statistics are over the last 'stats-ringbuffer-entries'
      queries.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>trace-regex <i>REGEX</i></b></dt>
  <dd class="It-tag">Emit resolution trace for matching queries. Empty regex to
      disable trace.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unload-lua-script</b></dt>
  <dd class="It-tag">Unloads Lua script.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>version</b></dt>
  <dd class="It-tag">Report running version.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>wipe-cache <i>DOMAIN</i> [<i>DOMAIN</i>] [...]</b></dt>
  <dd class="It-tag">Wipe entries for <i>DOMAIN</i> (exact name match) from the
      cache. This is useful if, for example, an important server has a new IP
      address, but the TTL has not yet expired. Multiple domain names can be
      passed. <i>DOMAIN</i> can be suffixed with a '&#x02B9;
      <i>t</i><i>o</i><i>d</i>
      <i>e</i><i>l</i><i>e</i><i>t</i><i>e</i><i>t</i><i>h</i><i>e</i><i>w</i><i>h</i><i>o</i><i>l</i><i>e</i><i>t</i><i>r</i><i>e</i><i>e</i><i>f</i><i>r</i><i>o</i><i>m</i><i>t</i><i>h</i><i>e</i><i>c</i><i>a</i><i>c</i><i>h</i><i>e</i>.<i>i</i>.<i>e</i>.&#x02B9;<i>p</i><i>o</i><i>w</i><i>e</i><i>r</i><i>d</i><i>n</i><i>s</i>.<i>c</i><i>o</i><i>m</i>'
      will remove all cached entries under and including the powerdns.com
    name.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
None known. File new ones at https://github.com/PowerDNS/pdns/issues.
<h1 class="Sh" title="Sh" id="RESOURCES"><a class="selflink" href="#RESOURCES">RESOURCES</a></h1>
Website: https://docs.powerdns.com, https://www.powerdns.com
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
pdns_recursor(1)
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
PowerDNS.COM BV.</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 2006</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
