<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:21 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>mstflint(1) mstflint(1)</p>

<p style="margin-top: 1em">NAME <br>
mstflint - Flash Interface</p>

<p style="margin-top: 1em">SYNOPSIS <br>
MstFlint [OPTIONS] &lt;command&gt; [Parameters] <br>
[-d|--device &lt;device&gt;] [-i|--image &lt;image&gt;] <br>
[-h|--help] [--hh] [-y|--yes] [--no] <br>
[--guid &lt;GUID&gt;] [--guids &lt;GUIDS...&gt;] <br>
[--mac &lt;MAC&gt;] [--macs &lt;MACs...&gt;] <br>
[--uid &lt;UID&gt;] [--blank_guids] [--clear_semaphore] <br>
[--qq] [--nofs] [--allow_psid_change] <br>
[--allow_rom_change] [--override_cache_replacement] <br>
[--no_flash_verify] [--use_fw] [-s|--silent] <br>
[--vsd &lt;string&gt;] [--use_image_ps] <br>
[--use_image_guids] [--use_image_rom] <br>
[--use_dev_rom] [--ignore_dev_data] <br>
[--dual_image] [--striped_image] <br>
[--banks &lt;bank&gt;] [--log &lt;log_file&gt;] <br>
[--flash_params &lt;type, log2size, num_of_flashes&gt;] <br>
[-v|--version]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
MstFlint [OPTIONS] &lt;command&gt; [Parameters] flint is a
FW (firmware) burning and flash memory operations tool for
Mellanox Infiniband HCAs, Ethernet NIC cards, and switch
devices.</p>

<p style="margin-top: 1em">OPTIONS <br>
MstFlint [OPTIONS] &lt;command&gt; [Parameters]</p>

<p style="margin-top: 1em">-d|--device &lt;device&gt; <br>
: Device flash is connected to. Commands affected: all</p>

<p style="margin-top: 1em">-i|--image &lt;image&gt; <br>
: Binary image file. Commands affected: burn, verify</p>

<p style="margin-top: 1em">-h|--help <br>
: Prints this message and exits</p>

<p style="margin-top: 1em">--hh : Prints extended command
help</p>

<p style="margin-top: 1em">-y|--yes <br>
: Non interactive mode - assume answer &quot;yes&quot; to
all questions. Commands affected: all</p>

<p style="margin-top: 1em">--no : Non interactive mode -
assume answer &quot;no&quot; to all questions. Commands
affected: all</p>

<p style="margin-top: 1em">--guid &lt;GUID&gt; <br>
: GUID base value. 4 GUIDs are automatically assigned to the
following values:</p>

<p style="margin-top: 1em">guid -&gt; node GUID guid+1
-&gt; port1 guid+2 -&gt; port2 guid+3 -&gt; system image
GUID.</p>

<p style="margin-top: 1em">Note: port2 guid will be
assigned even for a single port HCA - The HCA ignores this
value.</p>

<p style="margin-top: 1em">Commands affected: burn, sg</p>

<p style="margin-top: 1em">--guids &lt;GUIDS...&gt; <br>
: 4 GUIDs must be specified here. The specified GUIDs are
assigned to the following fields, respectively: node, port1,
port2 and system image GUID.</p>

<p style="margin-top: 1em">Note: port2 guid must be
specified even for a single port HCA - The HCA ignores this
value. It can be set to 0x0.</p>

<p style="margin-top: 1em">Commands affected: burn, sg</p>

<p style="margin-top: 1em">--mac &lt;MAC&gt; <br>
: MAC address base value. 2 MACs are automatically assigned
to the following values:</p>

<p style="margin-top: 1em">mac -&gt; port1</p>

<p style="margin-top: 1em">mac+1 -&gt; port2</p>

<p style="margin-top: 1em">Commands affected: burn, sg</p>

<p style="margin-top: 1em">--macs &lt;MACs...&gt; <br>
: 2 MACs must be specified here. The specified MACs are
assigned to port1, port2, respectively. Commands affected:
burn, sg</p>

<p style="margin-top: 1em">Note: -mac/-macs flags are
applicable only for Mellanox Technologies ethernet
products.</p>

<p style="margin-top: 1em">--uid &lt;UID&gt; <br>
: ConnectIB/SwitchIB only. Derive and set the device UIDs
(GUIDs, MACs, WWNs). UIDs are derived from the given base
UID according to Mellanox Methodology Commands <br>
affected: burn, sg</p>

<p style="margin-top: 1em">--blank_guids <br>
: Burn the image with blank GUIDs and MACs (where
applicable). These values can be set later using the
&quot;sg&quot; command (see details below).</p>

<p style="margin-top: 1em">Commands affected: burn</p>

<p style="margin-top: 1em">--clear_semaphore <br>
: Force clear the flash semaphore on the device. No command
is allowed when this flag is used. NOTE: May result in
system instability or flash corruption if the <br>
device or another application is currently using the flash.
Exercise caution.</p>

<p style="margin-top: 1em">--qq : Run a quick query. When
specified, flint will not perform full image integrity
checks during the query operation. This may shorten
execution time when running <br>
over slow interfaces (e.g., I2C, MTUSB-1). Commands
affected: burn, query</p>

<p style="margin-top: 1em">--nofs : Burn image in a non
failsafe manner.</p>

<p style="margin-top: 1em">--allow_psid_change <br>
: Allow burning a FW image with a different PSID (Parameter
Set ID)than the one currently on flash. Note that changing a
PSID may cause the device to malfunction. <br>
Use only if you know what you are doing</p>

<p style="margin-top: 1em">--allow_rom_change <br>
: Allow burning/removing a ROM to/from FW image when product
version is present. Use only if you know what you are
doing</p>

<p style="margin-top: 1em">--override_cache_replacement
<br>
: On SwitchX/ConnectIB devices: Allow accessing the flash
even if the cache replacement mode is enabled. NOTE: This
flag is intended for advanced users only. Run&acirc; <br>
ning in this mode may cause the firmware to hang.</p>

<p style="margin-top: 1em">--no_flash_verify <br>
: Do not verify each write on the flash.</p>

<p style="margin-top: 1em">--use_fw <br>
: Flash access will be done using FW
(ConnectX-3/ConnectX-3Pro only).</p>

<p style="margin-top: 1em">-s|--silent <br>
: Do not print burn progress flyer. Commands affected:
burn</p>

<p style="margin-top: 1em">--vsd &lt;string&gt; <br>
: Write this string, of up to 208 characters, to VSD when
burn.</p>

<p style="margin-top: 1em">--use_image_ps <br>
: Burn vsd as appears in the given image - do not keep
existing VSD on flash. Commands affected: burn</p>

<p style="margin-top: 1em">--use_image_guids <br>
: Burn (guids/macs) as appears in the given image. Commands
affected: burn</p>

<p style="margin-top: 1em">--use_image_rom <br>
: Do not save the ROM which exists in the device. Commands
affected: burn</p>

<p style="margin-top: 1em">--use_dev_rom <br>
: Save the ROM which exists in the device. Commands
affected: burn</p>

<p style="margin-top: 1em">--ignore_dev_data <br>
: Do not attempt to take device data sections from
device(sections will be taken from the image. FS3 Only).
Commands affected: burn</p>

<p style="margin-top: 1em">--dual_image <br>
: Make the burn process burn two images on flash (previously
default algorithm). Currentdefault failsafe burn process
burns a single image (in alternating loca&acirc; <br>
tions). Commands affected: burn</p>

<p style="margin-top: 1em">--striped_image <br>
: Use this flag to indicate that the given image file is in
a &quot;striped image&quot; format. Commands affected: query
verify</p>

<p style="margin-top: 1em">--banks &lt;bank&gt; <br>
: Set the number of attached flash devices (banks)</p>

<p style="margin-top: 1em">--log &lt;log_file&gt; <br>
: Print the burning status to the specified log file
--flash_params &lt;type, log2size, num_of_flashes&gt;: Use
the given parameters to access the flash instead of
read&acirc; <br>
ing them from the flash. Supported parameters: Type: The
type of the flash, such as:M25PXxx, M25Pxx, N25Q0XX,
SST25VFxx, W25QxxBV, W25Xxx, AT25DFxxx, S25FLXXXP, <br>
S25FL11xx, MX25L16xxx. log2size: The log2 of the flash
size.num_of_flashes: the number of the flashes connected to
the device.</p>

<p style="margin-top: 1em">-v|--version <br>
: Version info.</p>

<p style="margin-top: 1em">COMMANDS SUMMARY:</p>

<p style="margin-top: 1em">burn|b : Burn flash</p>

<p style="margin-top: 1em">query|q [full] <br>
: Query misc. flash/firmware characteristics, use
&quot;full&quot; to get more information.</p>

<p style="margin-top: 1em">verify|v [showitoc] <br>
: Verify entire flash, use &quot;showitoc&quot; to see ITOC
headers in FS3/FS4 image only.</p>

<p style="margin-top: 1em">swreset <br>
: SW reset the target un-managed switch device. This command
is supported only in the In-Band access method.</p>

<p style="margin-top: 1em">brom &lt;ROM-file&gt; : Burn the
specified ROM file on the flash.</p>

<p style="margin-top: 1em">drom : Remove the ROM section
from the flash.</p>

<p style="margin-top: 1em">rrom &lt;out-file&gt; : Read the
ROM section from the flash.</p>

<p style="margin-top: 1em">bb : Burn Block - Burns the
given image as is. No checks are done.</p>

<p style="margin-top: 1em">sg
[guids_num=&lt;num|num_port1,num_port2&gt;
step_size=&lt;size|size_port1,size_port2&gt;] | [nocrc] :
Set GUIDs.</p>

<p style="margin-top: 1em">sv : Set the VSD.</p>

<p style="margin-top: 1em">ri &lt;out-file&gt; : Read the
fw image on the flash.</p>

<p style="margin-top: 1em">dc [out-file] : Dump
Configuration: print fw configuration file for the given
image.</p>

<p style="margin-top: 1em">dh [out-file] : Dump Hash: dump
the hash if it is integrated in the FW image</p>

<p style="margin-top: 1em">set_key <br>
[key] : Set/Update the HW access key which is used to
enable/disable access to HW. The key can be provided in the
command line or inter&acirc; <br>
actively typed after the command is given NOTE: The new key
is activated only after the device is reset.</p>

<p style="margin-top: 1em">hw_access <br>
&lt;enable|disable&gt; [key] : Enable/disable the access to
the HW. The key can be provided in the command line or
interactively typed after the command is given</p>

<p style="margin-top: 1em">hw query : Query HW info and
flash attributes.</p>

<p style="margin-top: 1em">erase|e &lt;addr&gt; <br>
: Erases sector.</p>

<p style="margin-top: 1em">rw &lt;addr&gt; : Read one dword
from flash</p>

<p style="margin-top: 1em">ww &lt;addr&gt; &lt;data&gt; :
Write one dword to flash</p>

<p style="margin-top: 1em">wwne &lt;addr&gt; &lt;data&gt; :
Write one dword to flash without sector erase</p>

<p style="margin-top: 1em">wbne &lt;addr&gt; &lt;size&gt;
&lt;data ...&gt; : Write a data block to flash without
sector erase.</p>

<p style="margin-top: 1em">wb &lt;data-file&gt;
&lt;addr&gt; : Write a data block to flash.</p>

<p style="margin-top: 1em">rb &lt;addr&gt; &lt;size&gt;
[out-file] : Read a data block from flash</p>

<p style="margin-top: 1em">clear_semaphore <br>
: Clear flash semaphore.</p>

<p style="margin-top: 1em">qrom : query ROM image.</p>

<p style="margin-top: 1em">checksum|cs <br>
: perform MD5 checksum on FW. timestamp|ts
&lt;set|query|reset&gt; [timestamp] [FW version] : FW time
stamping.</p>

<p style="margin-top: 1em">cache_image|ci <br>
: cache FW image(Windows only).</p>

<p style="margin-top: 1em">Return values: 0 - Successful
completion 1 - An error has occurred 7 - For burn command -
FW already updated - burn was aborted.</p>

<p style="margin-top: 1em">10 January 2017 4.6.0
mstflint(1)</p>
<hr>
</body>
</html>
