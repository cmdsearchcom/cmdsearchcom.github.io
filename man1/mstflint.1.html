<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>mstflint(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">mstflint(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">mstflint(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>mstflint </b>- Flash Interface
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
   <b>MstFlint</b> [<i>OPTIONS</i>] &lt;command&gt; [<i>Parameters</i>]
      [ <b>-d</b>|<b>--device</b> &lt;device&gt;] [<b>-i</b>|<b>--image</b> &lt;image&gt;]
      [ <b>-h</b>|<b>--help</b>] [<b>--hh</b>] [<b>-y</b>|<b>--yes</b>] [<b>--no</b>]
      [ <b>--guid</b> &lt;GUID&gt;] [<b>--guids</b> &lt;GUIDS...&gt;]
      [ <b>--mac</b> &lt;MAC&gt;] [<b>--macs</b> &lt;MACs...&gt;]
      [ <b>--uid</b> &lt;UID&gt;] [<b>--blank_guids</b>] [<b>--clear_semaphore</b>]
      [ <b>--qq</b>] [<b>--nofs</b>] [<b>--allow_psid_change</b>]
      [ <b>--allow_rom_change</b>] [<b>--override_cache_replacement</b>]
      [ <b>--no_flash_verify</b>] [<b>--use_fw</b>] [<b>-s</b>|<b>--silent</b>]
      [ <b>--vsd</b> &lt;string&gt;] [<b>--use_image_ps</b>]
      [ <b>--use_image_guids</b>] [<b>--use_image_rom</b>]
      [ <b>--use_dev_rom</b>] [<b>--ignore_dev_data</b>]
      [ <b>--dual_image</b>] [<b>--striped_image</b>]
      [ <b>--banks</b> &lt;bank&gt;] [<b>--log</b> &lt;log_file&gt;]
      [ <b>--flash_params</b> &lt;type, log2size, num_of_flashes&gt;]
      [ <b>-v</b>|<b>--version</b>] 
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>MstFlint</b> [<i>OPTIONS</i>] &lt;command&gt; [<i>Parameters</i>] flint is a
  FW (firmware) burning and flash memory operations tool for Mellanox Infiniband
  HCAs, Ethernet NIC cards, and switch devices.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>MstFlint</b> [<i>OPTIONS</i>] &lt;command&gt; [<i>Parameters</i>]
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-d</b>|<b>--device</b> &lt;device&gt;</b></dt>
  <dd class="It-tag">: Device flash is connected to. Commands affected: all</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-i</b>|<b>--image</b> &lt;image&gt;</b></dt>
  <dd class="It-tag">: Binary image file. Commands affected: burn, verify</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-h</b>|<b>--help</b></b></dt>
  <dd class="It-tag">: Prints this message and exits</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--hh</b></b></dt>
  <dd class="It-tag">: Prints extended command help</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-y</b>|<b>--yes</b></b></dt>
  <dd class="It-tag">: Non interactive mode - assume answer &quot;yes&quot; to
      all questions. Commands affected: all</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--no</b></b></dt>
  <dd class="It-tag">: Non interactive mode - assume answer &quot;no&quot; to
      all questions. Commands affected: all</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--guid</b> &lt;GUID&gt;</b></dt>
  <dd class="It-tag">: GUID base value. 4 GUIDs are automatically assigned to
      the following values:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>guid</b></dt>
  <dd class="It-tag">-&gt; node GUID guid+1 -&gt; port1 guid+2 -&gt; port2
      guid+3 -&gt; system image GUID.</dd>
</dl>
<div class="Pp"></div>
Note: port2 guid will be assigned even for a single port HCA - The HCA ignores
  this value.
<div class="Pp"></div>
Commands affected: burn, sg</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--guids</b> &lt;GUIDS...&gt;</b></dt>
  <dd class="It-tag">: 4 GUIDs must be specified here. The specified GUIDs are
      assigned to the following fields, respectively: node, port1, port2 and
      system image GUID.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Note: port2 guid must be specified even for a single port HCA - The HCA ignores
  this value. It can be set to 0x0.
<div class="Pp"></div>
Commands affected: burn, sg</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--mac</b> &lt;MAC&gt;</b></dt>
  <dd class="It-tag">: MAC address base value. 2 MACs are automatically assigned
      to the following values:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>mac</b></dt>
  <dd class="It-tag">-&gt; port1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mac+1</b></dt>
  <dd class="It-tag">-&gt; port2</dd>
</dl>
<div class="Pp"></div>
Commands affected: burn, sg</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--macs</b> &lt;MACs...&gt;</b></dt>
  <dd class="It-tag">: 2 MACs must be specified here. The specified MACs are
      assigned to port1, port2, respectively. Commands affected: burn, sg</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Note: <b>-mac</b>/<b>-macs</b> flags are applicable only for Mellanox
  Technologies ethernet products.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--uid</b> &lt;UID&gt;</b></dt>
  <dd class="It-tag">: ConnectIB/SwitchIB only. Derive and set the device UIDs
      (GUIDs, MACs, WWNs). UIDs are derived from the given base UID according to
      Mellanox Methodology Commands affected: burn, sg</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--blank_guids</b></b></dt>
  <dd class="It-tag">: Burn the image with blank GUIDs and MACs (where
      applicable). These values can be set later using the &quot;sg&quot;
      command (see details below).</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
Commands affected: burn</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--clear_semaphore</b></b></dt>
  <dd class="It-tag">: Force clear the flash semaphore on the device. No command
      is allowed when this flag is used. NOTE: May result in system instability
      or flash corruption if the device or another application is currently
      using the flash. Exercise caution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--qq</b></b></dt>
  <dd class="It-tag">: Run a quick query. When specified, flint will not perform
      full image integrity checks during the query operation. This may shorten
      execution time when running over slow interfaces (e.g., I2C, MTUSB-1).
      Commands affected: burn, query</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--nofs</b></b></dt>
  <dd class="It-tag">: Burn image in a non failsafe manner.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--allow_psid_change</b></b></dt>
  <dd class="It-tag">: Allow burning a FW image with a different PSID (Parameter
      Set ID)than the one currently on flash. Note that changing a PSID may
      cause the device to malfunction. Use only if you know what you are
    doing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--allow_rom_change</b></b></dt>
  <dd class="It-tag">: Allow burning/removing a ROM to/from FW image when
      product version is present. Use only if you know what you are doing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--override_cache_replacement</b></b></dt>
  <dd class="It-tag">: On SwitchX/ConnectIB devices: Allow accessing the flash
      even if the cache replacement mode is enabled. NOTE: This flag is intended
      for advanced users only. Running in this mode may cause the firmware to
      hang.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--no_flash_verify</b></b></dt>
  <dd class="It-tag">: Do not verify each write on the flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--use_fw</b></b></dt>
  <dd class="It-tag">: Flash access will be done using FW
      (ConnectX-3/ConnectX-3Pro only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-s</b>|<b>--silent</b></b></dt>
  <dd class="It-tag">: Do not print burn progress flyer. Commands affected:
    burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--vsd</b> &lt;string&gt;</b></dt>
  <dd class="It-tag">: Write this string, of up to 208 characters, to VSD when
      burn.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--use_image_ps</b></b></dt>
  <dd class="It-tag">: Burn vsd as appears in the given image - do not keep
      existing VSD on flash. Commands affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--use_image_guids</b></b></dt>
  <dd class="It-tag">: Burn (guids/macs) as appears in the given image. Commands
      affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--use_image_rom</b></b></dt>
  <dd class="It-tag">: Do not save the ROM which exists in the device. Commands
      affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--use_dev_rom</b></b></dt>
  <dd class="It-tag">: Save the ROM which exists in the device. Commands
      affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--ignore_dev_data</b></b></dt>
  <dd class="It-tag">: Do not attempt to take device data sections from
      <b>device</b>(sections will be taken from the image. FS3 Only). Commands
      affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--dual_image</b></b></dt>
  <dd class="It-tag">: Make the burn process burn two images on flash
      (previously default algorithm). Currentdefault failsafe burn process burns
      a single image (in alternating locations). Commands affected: burn</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--striped_image</b></b></dt>
  <dd class="It-tag">: Use this flag to indicate that the given image file is in
      a &quot;striped image&quot; format. Commands affected: query verify</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--banks</b> &lt;bank&gt;</b></dt>
  <dd class="It-tag">: Set the number of attached flash devices (banks)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>--log</b> &lt;log_file&gt;</b></dt>
  <dd class="It-tag">: Print the burning status to the specified log file
      <b>--flash_params</b> &lt;type, log2size, num_of_flashes&gt;: Use the
      given parameters to access the flash instead of reading them from the
      flash. Supported parameters: Type: The type of the flash, such as:M25PXxx,
      M25Pxx, N25Q0XX, SST25VFxx, W25QxxBV, W25Xxx, AT25DFxxx, S25FLXXXP,
      S25FL11xx, MX25L16xxx. log2size: The log2 of the flash
      size.num_of_flashes: the number of the flashes connected to the
    device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b><b>-v</b>|<b>--version</b></b></dt>
  <dd class="It-tag">: Version info.</dd>
</dl>
</div>
<div class="Pp"></div>
COMMANDS SUMMARY:
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>burn|b</b></dt>
  <dd class="It-tag">: Burn flash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>query|q [full]</b></dt>
  <dd class="It-tag">: Query misc. flash/firmware characteristics, use
      &quot;full&quot; to get more information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>verify|v [showitoc]</b></dt>
  <dd class="It-tag">: Verify entire flash, use &quot;showitoc&quot; to see ITOC
      headers in FS3/FS4 image only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>swreset</b></dt>
  <dd class="It-tag">: SW reset the target un-managed switch device. This
      command is supported only in the In-Band access method.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>brom</b></dt>
  <dd class="It-tag">&lt;ROM-file&gt; : Burn the specified ROM file on the
      flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>drom</b></dt>
  <dd class="It-tag">: Remove the ROM section from the flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rrom</b></dt>
  <dd class="It-tag">&lt;out-file&gt; : Read the ROM section from the
    flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bb</b></dt>
  <dd class="It-tag">: Burn Block - Burns the given image as is. No checks are
      done.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sg</b></dt>
  <dd class="It-tag">[guids_num=&lt;num|num_port1,num_port2&gt;
      step_size=&lt;size|size_port1,size_port2&gt;] | [nocrc] : Set GUIDs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sv</b></dt>
  <dd class="It-tag">: Set the VSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ri</b></dt>
  <dd class="It-tag">&lt;out-file&gt; : Read the fw image on the flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dc</b></dt>
  <dd class="It-tag">[out-file] : Dump Configuration: print fw configuration
      file for the given image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dh</b></dt>
  <dd class="It-tag">[out-file] : Dump Hash: dump the hash if it is integrated
      in the FW image</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>set_key</b></dt>
  <dd class="It-tag">[key] : Set/Update the HW access key which is used to
      enable/disable access to HW. The key can be provided in the command line
      or interactively typed after the command is given NOTE: The new key is
      activated only after the device is reset.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hw_access</b></dt>
  <dd class="It-tag">&lt;enable|disable&gt; [key] : Enable/disable the access to
      the HW. The key can be provided in the command line or interactively typed
      after the command is given</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hw</b></dt>
  <dd class="It-tag">query : Query HW info and flash attributes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>erase|e &lt;addr&gt;</b></dt>
  <dd class="It-tag">: Erases sector.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rw</b></dt>
  <dd class="It-tag">&lt;addr&gt; : Read one dword from flash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ww</b></dt>
  <dd class="It-tag">&lt;addr&gt; &lt;data&gt; : Write one dword to flash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>wwne</b></dt>
  <dd class="It-tag">&lt;addr&gt; &lt;data&gt; : Write one dword to flash
      without sector erase</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>wbne</b></dt>
  <dd class="It-tag">&lt;addr&gt; &lt;size&gt; &lt;data ...&gt; : Write a data
      block to flash without sector erase.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>wb</b></dt>
  <dd class="It-tag">&lt;data-file&gt; &lt;addr&gt; : Write a data block to
      flash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rb</b></dt>
  <dd class="It-tag">&lt;addr&gt; &lt;size&gt; [out-file] : Read a data block
      from flash</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>clear_semaphore</b></dt>
  <dd class="It-tag">: Clear flash semaphore.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>qrom</b></dt>
  <dd class="It-tag">: query ROM image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>checksum|cs</b></dt>
  <dd class="It-tag">: perform MD5 checksum on FW. timestamp|ts
      &lt;set|query|reset&gt; [timestamp] [FW version] : FW time stamping.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cache_image|ci</b></dt>
  <dd class="It-tag">: cache FW <b>image</b>(Windows only).</dd>
</dl>
<div class="Pp"></div>
Return values: 0 - Successful completion 1 - An error has occurred 7 - For burn
  command - FW already updated - burn was aborted.</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">4.6.0</td>
    <td class="foot-os">10 January 2017</td>
  </tr>
</table>
</body>
</html>
