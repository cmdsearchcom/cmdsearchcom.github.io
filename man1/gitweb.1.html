<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:13:43 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GITWEB(1) Git Manual GITWEB(1)</p>

<p style="margin-top: 1em">NAME <br>
gitweb - Git web interface (web frontend to Git
repositories)</p>

<p style="margin-top: 1em">SYNOPSIS <br>
To get started with gitweb, run git-instaweb(1) from a Git
repository. This would configure and start your web server,
and run web browser pointing to gitweb.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Gitweb provides a web interface to Git repositories. Its
features include:</p>

<p style="margin-top: 1em">&Acirc;&middot; Viewing multiple
Git repositories with common root.</p>

<p style="margin-top: 1em">&Acirc;&middot; Browsing every
revision of the repository.</p>

<p style="margin-top: 1em">&Acirc;&middot; Viewing the
contents of files in the repository at any revision.</p>

<p style="margin-top: 1em">&Acirc;&middot; Viewing the
revision log of branches, history of files and directories,
see what was changed when, by who.</p>

<p style="margin-top: 1em">&Acirc;&middot; Viewing the
blame/annotation details of any file (if enabled).</p>

<p style="margin-top: 1em">&Acirc;&middot; Generating RSS
and Atom feeds of commits, for any branch. The feeds are
auto-discoverable in modern web browsers.</p>

<p style="margin-top: 1em">&Acirc;&middot; Viewing
everything that was changed in a revision, and step through
revisions one at a time, viewing the history of the
repository.</p>

<p style="margin-top: 1em">&Acirc;&middot; Finding commits
which commit messages matches given search term.</p>

<p style="margin-top: 1em">See
http://git.kernel.org/?p=git/git.git;a=tree;f=gitweb or
http://repo.or.cz/w/git.git/tree/HEAD:/gitweb/ for gitweb
source code, browsed using gitweb itself.</p>

<p style="margin-top: 1em">CONFIGURATION <br>
Various aspects of gitweb&acirc;s behavior can be controlled
through the configuration file gitweb_config.perl or
/etc/gitweb.conf. See the gitweb.conf(5) for details.</p>

<p style="margin-top: 1em">Repositories <br>
Gitweb can show information from one or more Git
repositories. These repositories have to be all on local
filesystem, and have to share common repository root, i.e.
be all under <br>
a single parent repository (but see also &quot;Advanced web
server setup&quot; section, &quot;Webserver configuration
with multiple projects&rsquo; root&quot; subsection).</p>

<p style="margin-top: 1em">our $projectroot =
&rsquo;/path/to/parent/directory&rsquo;;</p>

<p style="margin-top: 1em">The default value for
$projectroot is /pub/git. You can change it during building
gitweb via GITWEB_PROJECTROOT build configuration
variable.</p>

<p style="margin-top: 1em">By default all Git repositories
under $projectroot are visible and available to gitweb. The
list of projects is generated by default by scanning the
$projectroot directory for <br>
Git repositories (for object databases to be more exact;
gitweb is not interested in a working area, and is best
suited to showing &quot;bare&quot; repositories).</p>

<p style="margin-top: 1em">The name of the repository in
gitweb is the path to its $GIT_DIR (its object database)
relative to $projectroot. Therefore the repository $repo can
be found at <br>
&quot;$projectroot/$repo&quot;.</p>

<p style="margin-top: 1em">Projects list file format <br>
Instead of having gitweb find repositories by scanning
filesystem starting from $projectroot, you can provide a
pre-generated list of visible projects by setting
$projects_list <br>
to point to a plain text file with a list of projects (with
some additional info).</p>

<p style="margin-top: 1em">This file uses the following
format:</p>

<p style="margin-top: 1em">&Acirc;&middot; One record (for
project / repository) per line; does not support line
continuation (newline escaping).</p>

<p style="margin-top: 1em">&Acirc;&middot; Leading and
trailing whitespace are ignored.</p>

<p style="margin-top: 1em">&Acirc;&middot; Whitespace
separated fields; any run of whitespace can be used as field
separator (rules for Perl&acirc;s &quot;split(&quot; &quot;,
$line)&quot;).</p>

<p style="margin-top: 1em">&Acirc;&middot; Fields use
modified URI encoding, defined in RFC 3986, section 2.1
(Percent-Encoding), or rather &quot;Query string
encoding&quot; (see <br>
http://en.wikipedia.org/wiki/Query_string#URL_encoding), the
difference being that SP (&quot; &quot;) can be encoded as
&quot;+&quot; (and therefore &quot;+&quot; has to be also
percent-encoded).</p>

<p style="margin-top: 1em">Reserved characters are:
&quot;%&quot; (used for encoding), &quot;+&quot; (can be
used to encode SPACE), all whitespace characters as defined
in Perl, including SP, TAB and LF, (used to separate <br>
fields in a record).</p>

<p style="margin-top: 1em">&Acirc;&middot; Currently
recognized fields are:</p>

<p style="margin-top: 1em">&lt;repository path&gt; <br>
path to repository GIT_DIR, relative to $projectroot</p>

<p style="margin-top: 1em">&lt;repository owner&gt; <br>
displayed as repository owner, preferably full name, or
email, or both</p>

<p style="margin-top: 1em">You can generate the projects
list index file using the project_index action (the TXT link
on projects list page) directly from gitweb; see also
&quot;Generating projects list using <br>
gitweb&quot; section below.</p>

<p style="margin-top: 1em">Example contents:</p>

<p style="margin-top: 1em">foo.git
Joe+R+Hacker+&lt;joe@example.com&gt; <br>
foo/bar.git O+W+Ner+&lt;owner@example.org&gt;</p>

<p style="margin-top: 1em">By default this file controls
only which projects are visible on projects list page (note
that entries that do not point to correctly recognized Git
repositories won&acirc;t be <br>
displayed by gitweb). Even if a project is not visible on
projects list page, you can view it nevertheless by
hand-crafting a gitweb URL. By setting $strict_export
configuration <br>
variable (see gitweb.conf(5)) to true value you can allow
viewing only of repositories also shown on the overview page
(i.e. only projects explicitly listed in projects list file
<br>
will be accessible).</p>

<p style="margin-top: 1em">Generating projects list using
gitweb <br>
We assume that GITWEB_CONFIG has its default Makefile value,
namely gitweb_config.perl. Put the following in
gitweb_make_index.perl file:</p>


<p style="margin-top: 1em">read_config_file(&quot;gitweb_config.perl&quot;);
<br>
$projects_list = $projectroot;</p>

<p style="margin-top: 1em">Then create the following script
to get list of project in the format suitable for
GITWEB_LIST build configuration variable (or $projects_list
variable in gitweb config):</p>

<p style="margin-top: 1em">#!/bin/sh</p>

<p style="margin-top: 1em">export
GITWEB_CONFIG=&quot;gitweb_make_index.perl&quot; <br>
export GATEWAY_INTERFACE=&quot;CGI/1.1&quot; <br>
export HTTP_ACCEPT=&quot;*/*&quot; <br>
export REQUEST_METHOD=&quot;GET&quot; <br>
export QUERY_STRING=&quot;a=project_index&quot;</p>

<p style="margin-top: 1em">perl --
/var/www/cgi-bin/gitweb.cgi</p>

<p style="margin-top: 1em">Run this script and save its
output to a file. This file could then be used as projects
list file, which means that you can set $projects_list to
its filename.</p>

<p style="margin-top: 1em">Controlling access to Git
repositories <br>
By default all Git repositories under $projectroot are
visible and available to gitweb. You can however configure
how gitweb controls access to repositories.</p>

<p style="margin-top: 1em">&Acirc;&middot; As described in
&quot;Projects list file format&quot; section, you can
control which projects are visible by selectively including
repositories in projects list file, and setting <br>
$projects_list gitweb configuration variable to point to it.
With $strict_export set, projects list file can be used to
control which repositories are available as well.</p>

<p style="margin-top: 1em">&Acirc;&middot; You can
configure gitweb to only list and allow viewing of the
explicitly exported repositories, via $export_ok variable in
gitweb config file; see gitweb.conf(5) manpage. If <br>
it evaluates to true, gitweb shows repositories only if this
file named by $export_ok exists in its object database (if
directory has the magic file named $export_ok).</p>

<p style="margin-top: 1em">For example git-daemon(1) by
default (unless --export-all option is used) allows pulling
only for those repositories that have git-daemon-export-ok
file. Adding</p>

<p style="margin-top: 1em">our $export_ok =
&quot;git-daemon-export-ok&quot;;</p>

<p style="margin-top: 1em">makes gitweb show and allow
access only to those repositories that can be fetched from
via git:// protocol.</p>

<p style="margin-top: 1em">&Acirc;&middot; Finally, it is
possible to specify an arbitrary perl subroutine that will
be called for each repository to determine if it can be
exported. The subroutine receives an <br>
absolute path to the project (repository) as its only
parameter (i.e. &quot;$projectroot/$project&quot;).</p>

<p style="margin-top: 1em">For example, if you use mod_perl
to run the script, and have dumb HTTP protocol
authentication configured for your repositories, you can use
the following hook to allow <br>
access only if the user is authorized to read the files:</p>

<p style="margin-top: 1em">$export_auth_hook = sub { <br>
use Apache2::SubRequest (); <br>
use Apache2::Const -compile =&gt; qw(HTTP_OK); <br>
my $path = &quot;$_[0]/HEAD&quot;; <br>
my $r = Apache2::RequestUtil-&gt;request; <br>
my $sub = $r-&gt;lookup_file($path); <br>
return $sub-&gt;filename eq $path <br>
&amp;&amp; $sub-&gt;status == Apache2::Const::HTTP_OK; <br>
};</p>

<p style="margin-top: 1em">Per-repository gitweb
configuration <br>
You can configure individual repositories shown in gitweb by
creating file in the GIT_DIR of Git repository, or by
setting some repo configuration variable (in GIT_DIR/config,
<br>
see git-config(1)).</p>

<p style="margin-top: 1em">You can use the following files
in repository:</p>

<p style="margin-top: 1em">README.html <br>
A html file (HTML fragment) which is included on the gitweb
project &quot;summary&quot; page inside &lt;div&gt; block
element. You can use it for longer description of a project,
to provide <br>
links (for example to project&acirc;s homepage), etc. This
is recognized only if XSS prevention is off ($prevent_xss is
false, see gitweb.conf(5)); a way to include a README safely
<br>
when XSS prevention is on may be worked out in the
future.</p>

<p style="margin-top: 1em">description (or
gitweb.description) <br>
Short (shortened to $projects_list_description_width in the
projects list page, which is 25 characters by default; see
gitweb.conf(5)) single line description of a project <br>
(of a repository). Plain text file; HTML will be escaped. By
default set to</p>

<p style="margin-top: 1em">Unnamed repository; edit this
file to name it for gitweb.</p>

<p style="margin-top: 1em">from the template during
repository creation, usually installed in
/usr/share/git-core/templates/. You can use the
gitweb.description repo configuration variable, but the <br>
file takes precedence.</p>

<p style="margin-top: 1em">category (or gitweb.category)
<br>
Singe line category of a project, used to group projects if
$projects_list_group_categories is enabled. By default (file
and configuration variable absent), uncategorized <br>
projects are put in the $project_list_default_category
category. You can use the gitweb.category repo configuration
variable, but the file takes precedence.</p>

<p style="margin-top: 1em">The configuration variables
$projects_list_group_categories and
$project_list_default_category are described in
gitweb.conf(5)</p>

<p style="margin-top: 1em">cloneurl (or multiple-valued
gitweb.url) <br>
File with repository URL (used for clone and fetch), one per
line. Displayed in the project summary page. You can use
multiple-valued gitweb.url repository configuration <br>
variable for that, but the file takes precedence.</p>

<p style="margin-top: 1em">This is per-repository
enhancement / version of global prefix-based
@git_base_url_list gitweb configuration variable (see
gitweb.conf(5)).</p>

<p style="margin-top: 1em">gitweb.owner <br>
You can use the gitweb.owner repository configuration
variable to set repository&acirc;s owner. It is displayed in
the project list and summary page.</p>

<p style="margin-top: 1em">If it&acirc;s not set,
filesystem directory&acirc;s owner is used (via GECOS field,
i.e. real name field from getpwuid(3)) if $projects_list is
unset (gitweb scans $projectroot for <br>
repositories); if $projects_list points to file with list of
repositories, then project owner defaults to value from this
file for given repository.</p>

<p style="margin-top: 1em">various gitweb.* config
variables (in config) <br>
Read description of %feature hash for detailed list, and
descriptions. See also &quot;Configuring gitweb
features&quot; section in gitweb.conf(5)</p>

<p style="margin-top: 1em">ACTIONS, AND URLS <br>
Gitweb can use path_info (component) based URLs, or it can
pass all necessary information via query parameters. The
typical gitweb URLs are broken down in to five
components:</p>


<p style="margin-top: 1em">.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision&gt;:/&lt;path&gt;?&lt;arguments&gt;</p>

<p style="margin-top: 1em">repo <br>
The repository the action will be performed on.</p>

<p style="margin-top: 1em">All actions except for those
that list all available projects, in whatever form, require
this parameter.</p>

<p style="margin-top: 1em">action <br>
The action that will be run. Defaults to projects_list if
repo is not set, and to summary otherwise.</p>

<p style="margin-top: 1em">revision <br>
Revision shown. Defaults to HEAD.</p>

<p style="margin-top: 1em">path <br>
The path within the &lt;repository&gt; that the action is
performed on, for those actions that require it.</p>

<p style="margin-top: 1em">arguments <br>
Any arguments that control the behaviour of the action.</p>

<p style="margin-top: 1em">Some actions require or allow to
specify two revisions, and sometimes even two pathnames. In
most general form such path_info (component) based gitweb
URL looks like this:</p>


<p style="margin-top: 1em">.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision_from&gt;:/&lt;path_from&gt;..&lt;revision_to&gt;:/&lt;path_to&gt;?&lt;arguments&gt;</p>

<p style="margin-top: 1em">Each action is implemented as a
subroutine, and must be present in %actions hash. Some
actions are disabled by default, and must be turned on via
feature mechanism. For example <br>
to enable blame view add the following to gitweb
configuration file:</p>


<p style="margin-top: 1em">$feature{&rsquo;blame&rsquo;}{&rsquo;default&rsquo;}
= [1];</p>

<p style="margin-top: 1em">Actions: <br>
The standard actions are:</p>

<p style="margin-top: 1em">project_list <br>
Lists the available Git repositories. This is the default
command if no repository is specified in the URL.</p>

<p style="margin-top: 1em">summary <br>
Displays summary about given repository. This is the default
command if no action is specified in URL, and only
repository is specified.</p>

<p style="margin-top: 1em">heads, remotes <br>
Lists all local or all remote-tracking branches in given
repository.</p>

<p style="margin-top: 1em">The latter is not available by
default, unless configured.</p>

<p style="margin-top: 1em">tags <br>
List all tags (lightweight and annotated) in given
repository.</p>

<p style="margin-top: 1em">blob, tree <br>
Shows the files and directories in a given repository path,
at given revision. This is default command if no action is
specified in the URL, and path is given.</p>

<p style="margin-top: 1em">blob_plain <br>
Returns the raw data for the file in given repository, at
given path and revision. Links to this action are marked
raw.</p>

<p style="margin-top: 1em">blobdiff <br>
Shows the difference between two revisions of the same
file.</p>

<p style="margin-top: 1em">blame, blame_incremental <br>
Shows the blame (also called annotation) information for a
file. On a per line basis it shows the revision in which
that line was last changed and the user that committed the
<br>
change. The incremental version (which if configured is used
automatically when JavaScript is enabled) uses Ajax to
incrementally add blame info to the contents of given <br>
file.</p>

<p style="margin-top: 1em">This action is disabled by
default for performance reasons.</p>

<p style="margin-top: 1em">commit, commitdiff <br>
Shows information about a specific commit in a repository.
The commit view shows information about commit in more
detail, the commitdiff action shows changeset for given <br>
commit.</p>

<p style="margin-top: 1em">patch <br>
Returns the commit in plain text mail format, suitable for
applying with git-am(1).</p>

<p style="margin-top: 1em">tag <br>
Display specific annotated tag (tag object).</p>

<p style="margin-top: 1em">log, shortlog <br>
Shows log information (commit message or just commit
subject) for a given branch (starting from given
revision).</p>

<p style="margin-top: 1em">The shortlog view is more
compact; it shows one commit per line.</p>

<p style="margin-top: 1em">history <br>
Shows history of the file or directory in a given repository
path, starting from given revision (defaults to HEAD, i.e.
default branch).</p>

<p style="margin-top: 1em">This view is similar to shortlog
view.</p>

<p style="margin-top: 1em">rss, atom <br>
Generates an RSS (or Atom) feed of changes to
repository.</p>

<p style="margin-top: 1em">WEBSERVER CONFIGURATION <br>
This section explains how to configure some common
webservers to run gitweb. In all cases, /path/to/gitweb in
the examples is the directory you ran installed gitweb in,
and <br>
contains gitweb_config.perl.</p>

<p style="margin-top: 1em">If you&acirc;ve configured a web
server that isn&acirc;t listed here for gitweb, please send
in the instructions so they can be included in a future
release.</p>

<p style="margin-top: 1em">Apache as CGI <br>
Apache must be configured to support CGI scripts in the
directory in which gitweb is installed. Let&acirc;s assume
that it is /var/www/cgi-bin directory.</p>

<p style="margin-top: 1em">ScriptAlias /cgi-bin/
&quot;/var/www/cgi-bin/&quot;</p>

<p style="margin-top: 1em">&lt;Directory
&quot;/var/www/cgi-bin&quot;&gt; <br>
Options Indexes FollowSymlinks ExecCGI <br>
AllowOverride None <br>
Order allow,deny <br>
Allow from all <br>
&lt;/Directory&gt;</p>

<p style="margin-top: 1em">With that configuration the full
path to browse repositories would be:</p>


<p style="margin-top: 1em">http://server/cgi-bin/gitweb.cgi</p>

<p style="margin-top: 1em">Apache with mod_perl, via
ModPerl::Registry <br>
You can use mod_perl with gitweb. You must install
Apache::Registry (for mod_perl 1.x) or ModPerl::Registry
(for mod_perl 2.x) to enable this support.</p>

<p style="margin-top: 1em">Assuming that gitweb is
installed to /var/www/perl, the following Apache
configuration (for mod_perl 2.x) is suitable.</p>

<p style="margin-top: 1em">Alias /perl
&quot;/var/www/perl&quot;</p>

<p style="margin-top: 1em">&lt;Directory
&quot;/var/www/perl&quot;&gt; <br>
SetHandler perl-script <br>
PerlResponseHandler ModPerl::Registry <br>
PerlOptions +ParseHeaders <br>
Options Indexes FollowSymlinks +ExecCGI <br>
AllowOverride None <br>
Order allow,deny <br>
Allow from all <br>
&lt;/Directory&gt;</p>

<p style="margin-top: 1em">With that configuration the full
path to browse repositories would be:</p>


<p style="margin-top: 1em">http://server/perl/gitweb.cgi</p>

<p style="margin-top: 1em">Apache with FastCGI <br>
Gitweb works with Apache and FastCGI. First you need to
rename, copy or symlink gitweb.cgi to gitweb.fcgi.
Let&acirc;s assume that gitweb is installed in
/usr/share/gitweb directory. <br>
The following Apache configuration is suitable
(UNTESTED!)</p>

<p style="margin-top: 1em">FastCgiServer
/usr/share/gitweb/gitweb.cgi <br>
ScriptAlias /gitweb /usr/share/gitweb/gitweb.cgi</p>

<p style="margin-top: 1em">Alias /gitweb/static
/usr/share/gitweb/static <br>
&lt;Directory /usr/share/gitweb/static&gt; <br>
SetHandler default-handler <br>
&lt;/Directory&gt;</p>

<p style="margin-top: 1em">With that configuration the full
path to browse repositories would be:</p>

<p style="margin-top: 1em">http://server/gitweb</p>

<p style="margin-top: 1em">ADVANCED WEB SERVER SETUP <br>
All of those examples use request rewriting, and need
mod_rewrite (or equivalent; examples below are written for
Apache).</p>

<p style="margin-top: 1em">Single URL for gitweb and for
fetching <br>
If you want to have one URL for both gitweb and your http://
repositories, you can configure Apache like this:</p>

<p style="margin-top: 1em">&lt;VirtualHost *:80&gt; <br>
ServerName git.example.org <br>
DocumentRoot /pub/git <br>
SetEnv GITWEB_CONFIG /etc/gitweb.conf</p>

<p style="margin-top: 1em"># turning on mod rewrite <br>
RewriteEngine on</p>

<p style="margin-top: 1em"># make the front page an
internal rewrite to the gitweb script <br>
RewriteRule ^/$ /cgi-bin/gitweb.cgi</p>

<p style="margin-top: 1em"># make access for &quot;dumb
clients&quot; work <br>
RewriteRule ^/(.*.git/(?!/?(HEAD|info|objects|refs)).*)?$
/cgi-bin/gitweb.cgi%{REQUEST_URI} [L,PT] <br>
&lt;/VirtualHost&gt;</p>

<p style="margin-top: 1em">The above configuration expects
your public repositories to live under /pub/git and will
serve them as http://git.domain.org/dir-under-pub-git, both
as cloneable Git URL and as <br>
browseable gitweb interface. If you then start your
git-daemon(1) with --base-path=/pub/git --export-all then
you can even use the git:// URL with exactly the same
path.</p>

<p style="margin-top: 1em">Setting the environment variable
GITWEB_CONFIG will tell gitweb to use the named file (i.e.
in this example /etc/gitweb.conf) as a configuration for
gitweb. You don&acirc;t really need <br>
it in above example; it is required only if your
configuration file is in different place than built-in
(during compiling gitweb) gitweb_config.perl or
/etc/gitweb.conf. See <br>
gitweb.conf(5) for details, especially information about
precedence rules.</p>

<p style="margin-top: 1em">If you use the rewrite rules
from the example you might also need something like the
following in your gitweb configuration file
(/etc/gitweb.conf following example):</p>

<p style="margin-top: 1em">@stylesheets =
(&quot;/some/absolute/path/gitweb.css&quot;); <br>
$my_uri = &quot;/&quot;; <br>
$home_link = &quot;/&quot;; <br>
$per_request_config = 1;</p>

<p style="margin-top: 1em">Nowadays though gitweb should
create HTML base tag when needed (to set base URI for
relative links), so it should work automatically.</p>

<p style="margin-top: 1em">Webserver configuration with
multiple projects&rsquo; root <br>
If you want to use gitweb with several project roots you can
edit your Apache virtual host and gitweb configuration files
in the following way.</p>

<p style="margin-top: 1em">The virtual host configuration
(in Apache configuration file) should look like this:</p>

<p style="margin-top: 1em">&lt;VirtualHost *:80&gt; <br>
ServerName git.example.org <br>
DocumentRoot /pub/git <br>
SetEnv GITWEB_CONFIG /etc/gitweb.conf</p>

<p style="margin-top: 1em"># turning on mod rewrite <br>
RewriteEngine on</p>

<p style="margin-top: 1em"># make the front page an
internal rewrite to the gitweb script <br>
RewriteRule ^/$ /cgi-bin/gitweb.cgi [QSA,L,PT]</p>

<p style="margin-top: 1em"># look for a public_git folder
in unix users&rsquo; home <br>
# http://git.example.org/~&lt;user&gt;/ <br>
RewriteRule ^/&nbsp;([^]+)(/|/gitweb.cgi)?$
/cgi-bin/gitweb.cgi
[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</p>

<p style="margin-top: 1em">#
http://git.example.org/+&lt;user&gt;/ <br>
#RewriteRule ^/+([^]+)(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi
[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</p>

<p style="margin-top: 1em">#
http://git.example.org/user/&lt;user&gt;/ <br>
#RewriteRule ^/user/([^]+)/(gitweb.cgi)?$
/cgi-bin/gitweb.cgi
[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</p>

<p style="margin-top: 1em"># defined list of project roots
<br>
RewriteRule ^/scm(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi
[QSA,E=GITWEB_PROJECTROOT:/pub/scm/,L,PT] <br>
RewriteRule ^/var(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi
[QSA,E=GITWEB_PROJECTROOT:/var/git/,L,PT]</p>

<p style="margin-top: 1em"># make access for &quot;dumb
clients&quot; work <br>
RewriteRule ^/(.*.git/(?!/?(HEAD|info|objects|refs)).*)?$
/cgi-bin/gitweb.cgi%{REQUEST_URI} [L,PT] <br>
&lt;/VirtualHost&gt;</p>

<p style="margin-top: 1em">Here actual project root is
passed to gitweb via GITWEB_PROJECT_ROOT environment
variable from a web server, so you need to put the following
line in gitweb configuration file <br>
(/etc/gitweb.conf in above example):</p>

<p style="margin-top: 1em">$projectroot =
$ENV{&rsquo;GITWEB_PROJECTROOT&rsquo;} ||
&quot;/pub/git&quot;;</p>

<p style="margin-top: 1em">Note that this requires to be
set for each request, so either $per_request_config must be
false, or the above must be put in code referenced by
$per_request_config;</p>

<p style="margin-top: 1em">These configurations enable two
things. First, each unix user (&lt;user&gt;) of the server
will be able to browse through gitweb Git repositories found
in ~/public_git/ with the <br>
following url:</p>


<p style="margin-top: 1em">http://git.example.org/~&lt;user&gt;/</p>

<p style="margin-top: 1em">If you do not want this feature
on your server just remove the second rewrite rule.</p>

<p style="margin-top: 1em">If you already use
&acirc;mod_userdir&lsquo; in your virtual host or you
don&acirc;t want to use the &rsquo;~&acirc; as first
character, just comment or remove the second rewrite rule,
and uncomment one of <br>
the following according to what you want.</p>

<p style="margin-top: 1em">Second, repositories found in
/pub/scm/ and /var/git/ will be accessible through
http://git.example.org/scm/ and http://git.example.org/var/.
You can add as many project roots as <br>
you want by adding rewrite rules like the third and the
fourth.</p>

<p style="margin-top: 1em">PATH_INFO usage <br>
If you enable PATH_INFO usage in gitweb by putting</p>


<p style="margin-top: 1em">$feature{&rsquo;pathinfo&rsquo;}{&rsquo;default&rsquo;}
= [1];</p>

<p style="margin-top: 1em">in your gitweb configuration
file, it is possible to set up your server so that it
consumes and produces URLs in the form</p>


<p style="margin-top: 1em">http://git.example.com/project.git/shortlog/sometag</p>

<p style="margin-top: 1em">i.e. without gitweb.cgi part, by
using a configuration such as the following. This
configuration assumes that /var/www/gitweb is the
DocumentRoot of your webserver, contains the <br>
gitweb.cgi script and complementary static files
(stylesheet, favicon, JavaScript):</p>

<p style="margin-top: 1em">&lt;VirtualHost *:80&gt; <br>
ServerAlias git.example.com</p>

<p style="margin-top: 1em">DocumentRoot /var/www/gitweb</p>

<p style="margin-top: 1em">&lt;Directory
/var/www/gitweb&gt; <br>
Options ExecCGI <br>
AddHandler cgi-script cgi</p>

<p style="margin-top: 1em">DirectoryIndex gitweb.cgi</p>

<p style="margin-top: 1em">RewriteEngine On <br>
RewriteCond %{REQUEST_FILENAME} !-f <br>
RewriteCond %{REQUEST_FILENAME} !-d <br>
RewriteRule ^.* /gitweb.cgi/$0 [L,PT] <br>
&lt;/Directory&gt; <br>
&lt;/VirtualHost&gt;</p>

<p style="margin-top: 1em">The rewrite rule guarantees that
existing static files will be properly served, whereas any
other URL will be passed to gitweb as PATH_INFO
parameter.</p>

<p style="margin-top: 1em">Notice that in this case you
don&acirc;t need special settings for @stylesheets, $my_uri
and $home_link, but you lose &quot;dumb client&quot; access
to your project .git dirs (described in <br>
&quot;Single URL for gitweb and for fetching&quot; section).
A possible workaround for the latter is the following: in
your project root dir (e.g. /pub/git) have the projects
named without <br>
a .git extension (e.g. /pub/git/project instead of
/pub/git/project.git) and configure Apache as follows:</p>

<p style="margin-top: 1em">&lt;VirtualHost *:80&gt; <br>
ServerAlias git.example.com</p>

<p style="margin-top: 1em">DocumentRoot /var/www/gitweb</p>

<p style="margin-top: 1em">AliasMatch ^(/.*?)(.git)(/.*)?$
/pub/git$1$3 <br>
&lt;Directory /var/www/gitweb&gt; <br>
Options ExecCGI <br>
AddHandler cgi-script cgi</p>

<p style="margin-top: 1em">DirectoryIndex gitweb.cgi</p>

<p style="margin-top: 1em">RewriteEngine On <br>
RewriteCond %{REQUEST_FILENAME} !-f <br>
RewriteCond %{REQUEST_FILENAME} !-d <br>
RewriteRule ^.* /gitweb.cgi/$0 [L,PT] <br>
&lt;/Directory&gt; <br>
&lt;/VirtualHost&gt;</p>

<p style="margin-top: 1em">The additional AliasMatch makes
it so that</p>


<p style="margin-top: 1em">http://git.example.com/project.git</p>

<p style="margin-top: 1em">will give raw access to the
project&acirc;s Git dir (so that the project can be cloned),
while</p>


<p style="margin-top: 1em">http://git.example.com/project</p>

<p style="margin-top: 1em">will provide human-friendly
gitweb access.</p>

<p style="margin-top: 1em">This solution is not 100%
bulletproof, in the sense that if some project has a named
ref (branch, tag) starting with git/, then paths such as</p>


<p style="margin-top: 1em">http://git.example.com/project/command/abranch..git/abranch</p>

<p style="margin-top: 1em">will fail with a 404 error.</p>

<p style="margin-top: 1em">BUGS <br>
Please report any bugs or feature requests to
git@vger.kernel.org[1], putting &quot;gitweb&quot; in the
subject of email.</p>

<p style="margin-top: 1em">SEE ALSO <br>
gitweb.conf(5), git-instaweb(1)</p>

<p style="margin-top: 1em">gitweb/README,
gitweb/INSTALL</p>

<p style="margin-top: 1em">GIT <br>
Part of the git(1) suite</p>

<p style="margin-top: 1em">NOTES <br>
1. git@vger.kernel.org <br>
mailto:git@vger.kernel.org</p>

<p style="margin-top: 1em">Git 1.8.3.1 03/23/2016
GITWEB(1)</p>
<hr>
</body>
</html>
