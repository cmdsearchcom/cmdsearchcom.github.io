<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SALT-KEY(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SALT-KEY(1)</td>
    <td class="head-vol">Salt</td>
    <td class="head-rtitle">SALT-KEY(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
salt-key - salt-key Documentation
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
salt-key [ options ]
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Salt-key executes simple management of Salt server public keys used for
  authentication.
<div style="height: 1.00em;">&#x00A0;</div>
On initial connection, a Salt minion sends its public key to the Salt master.
  This key must be accepted using the <b>salt-key</b> command on the Salt
  master.
<div style="height: 1.00em;">&#x00A0;</div>
Salt minion keys can be in one of the following states:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>unaccepted</b>: key is waiting to be accepted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>accepted</b>: key was accepted and the minion can
      communicate with the Salt master.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>rejected</b>: key was rejected using the <b>salt-key</b>
      command. In this state the minion does not receive any communication from
      the Salt master.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>denied</b>: key was rejected automatically by the Salt
      master. This occurs when a minion has a duplicate ID, or when a minion was
      rebuilt or had new keys generated and the previous key was not deleted
      from the Salt master. In this state the minion does not receive any
      communication from the Salt master.</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To change the state of a minion key, use <b>-d</b> to delete the key and then
  accept or reject the key.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the version of Salt that is running.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--versions-report</b></dt>
  <dd class="It-tag">Show program's dependencies and version number, and then
      exit</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show the help message and exit</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c CONFIG_DIR, --config-dir=CONFIG_dir</b></dt>
  <dd class="It-tag">The location of the Salt configuration directory. This
      directory contains the configuration files for Salt master and minions.
      The default location on most systems is <b>/etc/salt</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u USER, --user=USER</b></dt>
  <dd class="It-tag">Specify user to run salt-key</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--hard-crash</b></dt>
  <dd class="It-tag">Raise any original exception rather than exiting
      gracefully. Default is False.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q, --quiet</b></dt>
  <dd class="It-tag">Suppress output</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y, --yes</b></dt>
  <dd class="It-tag">Answer 'Yes' to all questions presented, defaults to
    False</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--rotate-aes-key=ROTATE_AES_KEY</b></dt>
  <dd class="It-tag">Setting this to False prevents the master from refreshing
      the key session when keys are deleted or rejected, this lowers the
      security of the key deletion/rejection operation. Default is True.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Logging_Options"><a class="selflink" href="#Logging_Options">Logging
  Options</a></h2>
Logging options which override any settings defined on the configuration files.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--log-file=LOG_FILE</b></dt>
  <dd class="It-tag">Log file path. Default: /var/log/salt/minion.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--log-file-level=LOG_LEVEL_LOGFILE</b></dt>
  <dd class="It-tag">Logfile logging log level. One of <b>all</b>,
      <b>garbage</b>, <b>trace</b>, <b>debug</b>, <b>info</b>, <b>warning</b>,
      <b>error</b>, <b>quiet</b>. Default: <b>warning</b>.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Output_Options"><a class="selflink" href="#Output_Options">Output
  Options</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--out</b></dt>
  <dd class="It-tag">Pass in an alternative outputter to display the return of
      data. This outputter can be any of the available outputters:</dd>
</dl>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;"><b>grains</b>, <b>highstate</b>, <b>json</b>,
  <b>key</b>, <b>overstatestage</b>, <b>pprint</b>, <b>raw</b>, <b>txt</b>,
  <b>yaml</b></div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Some outputters are formatted only for data returned from specific functions;
  for instance, the <b>grains</b> outputter will not work for non-grains data.
<div style="height: 1.00em;">&#x00A0;</div>
If an outputter is used that does not support the data passed into it, then Salt
  will fall back on the <b>pprint</b> outputter and display the return data
  using the Python <b>pprint</b> standard library module.
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">If using <b>--out=json</b>, you will probably
  want <b>--static</b> as well. Without the static option, you will get a
  separate JSON string per minion which makes JSON output invalid as a whole.
  This is due to using an iterative outputter. So if you want to feed it to a
  JSON parser, use <b>--static</b> as well.</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--out-indent OUTPUT_INDENT, --output-indent
    OUTPUT_INDENT</b></dt>
  <dd class="It-tag">Print the output indented by the provided value in spaces.
      Negative values disable indentation. Only applicable in outputters that
      support indentation.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--out-file=OUTPUT_FILE,
    --output-file=OUTPUT_FILE</b></dt>
  <dd class="It-tag">Write the output to the specified file.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-color</b></dt>
  <dd class="It-tag">Disable all colored output</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--force-color</b></dt>
  <dd class="It-tag">Force colored output
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>NOTE:</b></dd>
</dl>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">When using colored output the color codes are
  as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<b>green</b> denotes success, <b>red</b> denotes failure, <b>blue</b> denotes
  changes and success and <b>yellow</b> denotes a expected future change in
  configuration.</div>
<br/>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Actions"><a class="selflink" href="#Actions">Actions</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l ARG, --list=ARG</b></dt>
  <dd class="It-tag">List the public keys. The args <b>pre</b>, <b>un</b>, and
      <b>unaccepted</b> will list unaccepted/unsigned keys. <b>acc</b> or
      <b>accepted</b> will list accepted/signed keys. <b>rej</b> or
      <b>rejected</b> will list rejected keys. Finally, <b>all</b> will list all
      keys.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L, --list-all</b></dt>
  <dd class="It-tag">List all public keys. (Deprecated: use <b>--list
    all</b>)</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a ACCEPT, --accept=ACCEPT</b></dt>
  <dd class="It-tag">Accept the specified public key (use --include-all to match
      rejected keys in addition to pending keys). Globs are supported.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A, --accept-all</b></dt>
  <dd class="It-tag">Accepts all pending keys.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r REJECT, --reject=REJECT</b></dt>
  <dd class="It-tag">Reject the specified public key (use --include-all to match
      accepted keys in addition to pending keys). Globs are supported.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R, --reject-all</b></dt>
  <dd class="It-tag">Rejects all pending keys.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--include-all</b></dt>
  <dd class="It-tag">Include non-pending keys when accepting/rejecting.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p PRINT, --print=PRINT</b></dt>
  <dd class="It-tag">Print the specified public key.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P, --print-all</b></dt>
  <dd class="It-tag">Print all public keys</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d DELETE, --delete=DELETE</b></dt>
  <dd class="It-tag">Delete the specified key. Globs are supported.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D, --delete-all</b></dt>
  <dd class="It-tag">Delete all keys.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f FINGER, --finger=FINGER</b></dt>
  <dd class="It-tag">Print the specified key's fingerprint.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F, --finger-all</b></dt>
  <dd class="It-tag">Print all keys' fingerprints.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Key_Generation_Options"><a class="selflink" href="#Key_Generation_Options">Key
  Generation Options</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gen-keys=GEN_KEYS</b></dt>
  <dd class="It-tag">Set a name to generate a keypair for use with salt</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gen-keys-dir=GEN_KEYS_DIR</b></dt>
  <dd class="It-tag">Set the directory to save the generated keypair. Only works
      with 'gen_keys_dir' option; default is the current directory.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--keysize=KEYSIZE</b></dt>
  <dd class="It-tag">Set the keysize for the generated key, only works with the
      '--gen-keys' option, the key size must be 2048 or higher, otherwise it
      will be rounded up to 2048. The default is 2048.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gen-signature</b></dt>
  <dd class="It-tag">Create a signature file of the master's public-key named
      master_pubkey_signature. The signature can be sent to a minion in the
      master's auth-reply and enables the minion to verify the master's
      public-key cryptographically. This requires a new signing-key-pair which
      can be auto-created with the --auto-create parameter.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--priv=PRIV</b></dt>
  <dd class="It-tag">The private-key file to create a signature with</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--signature-path=SIGNATURE_PATH</b></dt>
  <dd class="It-tag">The path where the signature file should be written</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pub=PUB</b></dt>
  <dd class="It-tag">The public-key file to create a signature for</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto-create</b></dt>
  <dd class="It-tag">Auto-create a signing key-pair if it does not yet
    exist</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>salt(7)</i> <i>salt-master(1)</i> <i>salt-minion(1)</i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Thomas S. Hatch &lt;thatch45@gmail.com&gt; and many others, please see the
  Authors file
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2016 SaltStack, Inc.</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 31, 2016</td>
    <td class="foot-os">2016.11.0</td>
  </tr>
</table>
</body>
</html>
