<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:54:35 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>LOGGING.SH(1) User Contributed Perl Documentation
LOGGING.SH(1)</p>

<p style="margin-top: 1em">NAME <br>
BeakerLib - logging - phase support, logging functions and
metrics</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Routines for creating various types of logs inside BeakerLib
tests. Implements also phase support with automatic assert
evaluation.</p>

<p style="margin-top: 1em">FUNCTIONS <br>
Logging <br>
rlLog</p>

<p style="margin-top: 1em">rlLogDebug</p>

<p style="margin-top: 1em">rlLogInfo</p>

<p style="margin-top: 1em">rlLogWarning</p>

<p style="margin-top: 1em">rlLogError</p>

<p style="margin-top: 1em">rlLogFatal</p>

<p style="margin-top: 1em">Create a time/priority-labelled
message in the log. There is a bunch of aliases which can
create messages formated as DEBUG/INFO/WARNING/ERROR or
FATAL (but you would probably <br>
want to use rlDie instead of the last one).</p>

<p style="margin-top: 1em">rlLog message [logfile]
[priority] [label]</p>

<p style="margin-top: 1em">message <br>
Message you want to show (use quotes when invoking).</p>

<p style="margin-top: 1em">logfile <br>
Log file. If not supplied, OUTPUTFILE is assumed.</p>

<p style="margin-top: 1em">priority <br>
Priority of the log.</p>

<p style="margin-top: 1em">label <br>
Print this text instead of time in log label.</p>

<p style="margin-top: 1em">rlDie</p>

<p style="margin-top: 1em">Create a time-labelled message
in the log, report test result, upload logs, close
unfinished phase and terminate the test.</p>

<p style="margin-top: 1em">rlDie message [file...]</p>

<p style="margin-top: 1em">message <br>
Message you want to show (use quotes when invoking) - this
option is mandatory.</p>

<p style="margin-top: 1em">file <br>
Files (logs) you want to upload as well.
&quot;rlBundleLogs&quot; will be used for it. Files which
are not readable will be excluded before calling
&quot;rlBundleLogs&quot;, so it is safe to <br>
call even with possibly not existent logs and it will
succeed.</p>

<p style="margin-top: 1em">rlBundleLogs</p>

<p style="margin-top: 1em">Create a tarball of files (e.g.
logs) and attach them to the test result.</p>

<p style="margin-top: 1em">rlBundleLogs package file
[file...]</p>

<p style="margin-top: 1em">package <br>
Name of the package. Will be used as a part of the tar-ball
name.</p>

<p style="margin-top: 1em">file <br>
File(s) to be packed and submitted.</p>

<p style="margin-top: 1em">Returns result of submiting the
tarball.</p>

<p style="margin-top: 1em">rlFileSubmit</p>

<p style="margin-top: 1em">Resolves absolute path to the
file, replaces / for - and uploads this renamed file using
rhts-submit-log. It also allows you to specify your custom
name for the uploaded file.</p>

<p style="margin-top: 1em">rlFileSubmit [-s sep]
path_to_file [required_name]</p>

<p style="margin-top: 1em">-s sep <br>
Sets separator (i.e. the replacement of the /) to sep.</p>

<p style="margin-top: 1em">path_to_file <br>
Either absolute or relative path to file. Relative path is
converted to absolute.</p>

<p style="margin-top: 1em">required_name <br>
Default behavior renames file to full_path_to_file with /
replaced for -, if this does not suit your needs, you can
specify the name using this option.</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">rlFileSubmit logfile.txt -&gt;
logfile.txt cd /etc; rlFileSubmit ./passwd -&gt; etc-passwd
rlFileSubmit /etc/passwd -&gt; etc-passwd rlFileSubmit
/etc/passwd my-top-secret_file -&gt; my- <br>
top-secret-file rlFileSubmit -s &rsquo;_&rsquo; /etc/passwd
-&gt; etc_passwd</p>

<p style="margin-top: 1em">Info <br>
rlShowPackageVersion</p>

<p style="margin-top: 1em">Shows a message about version of
packages.</p>

<p style="margin-top: 1em">rlShowPackageVersion package
[package...]</p>

<p style="margin-top: 1em">package <br>
Name of a package(s) you want to log.</p>

<p style="margin-top: 1em">rlGetArch</p>

<p style="margin-top: 1em">This function is deprecated. Use
rlGetPrimaryArch or rlGetSecondaryArch instead, or use
uname. This function will be only kept for
compatibility.</p>

<p style="margin-top: 1em">Return base arch for the current
system (good when you need base arch on a multilib
system).</p>

<p style="margin-top: 1em">rlGetArch</p>

<p style="margin-top: 1em">On an i686 system you will get
i386, on a ppc64 you will get ppc.</p>

<p style="margin-top: 1em">rlGetPrimaryArch</p>

<p style="margin-top: 1em">Return primary arch for the
current system (good when you need base arch on a multilib
system).</p>

<p style="margin-top: 1em">rlGetPrimaryArch</p>

<p style="margin-top: 1em">rlGetSecondaryArch</p>

<p style="margin-top: 1em">Return base arch for the current
system (good when you need base arch on a multilib
system).</p>

<p style="margin-top: 1em">rlGetSecondaryArch</p>

<p style="margin-top: 1em">rlGetDistroRelease</p>

<p style="margin-top: 1em">rlGetDistroVariant</p>

<p style="margin-top: 1em">Return release or variant of the
distribution on the system.</p>

<p style="margin-top: 1em">rlGetDistroRelease <br>
rlGetDistroVariant</p>

<p style="margin-top: 1em">For example on the RHEL-4-AS you
will get release 4 and variant AS, on the RHEL-5-Client you
will get release 5 and variant Client.</p>

<p style="margin-top: 1em">rlShowRunningKernel</p>

<p style="margin-top: 1em">Log a message with version of
the currently running kernel.</p>

<p style="margin-top: 1em">rlShowRunningKernel</p>

<p style="margin-top: 1em">Phases <br>
rlPhaseStart</p>

<p style="margin-top: 1em">Starts a phase of a specific
type. The final phase result is based on all asserts
included in the phase. Do not forget to end phase with
&quot;rlPhaseEnd&quot; when you are done.</p>

<p style="margin-top: 1em">rlPhaseStart type [name]</p>

<p style="margin-top: 1em">type <br>
Type of the phase, one of the following:</p>

<p style="margin-top: 1em">FAIL <br>
When assert fails here, phase will report a FAIL.</p>

<p style="margin-top: 1em">WARN <br>
When assert fails here, phase will report a WARN.</p>

<p style="margin-top: 1em">name <br>
Optional name of the phase (if not provided, one will be
generated).</p>

<p style="margin-top: 1em">If all asserts included in the
phase pass, phase reports PASS.</p>

<p style="margin-top: 1em">rlPhaseEnd</p>

<p style="margin-top: 1em">End current phase, summarize
asserts included and report phase result.</p>

<p style="margin-top: 1em">rlPhaseEnd</p>

<p style="margin-top: 1em">Final phase result is based on
included asserts and phase type.</p>

<p style="margin-top: 1em">rlPhaseStartSetup</p>

<p style="margin-top: 1em">rlPhaseStartTest</p>

<p style="margin-top: 1em">rlPhaseStartCleanup</p>

<p style="margin-top: 1em">Start a phase of the specified
type: Setup -&gt; WARN, Test -&gt; FAIL, Cleanup -&gt;
WARN.</p>

<p style="margin-top: 1em">rlPhaseStartSetup [name] <br>
rlPhaseStartTest [name] <br>
rlPhaseStartCleanup [name]</p>

<p style="margin-top: 1em">name <br>
Optional name of the phase. If not specified, default
Setup/Test/Cleanup are used.</p>

<p style="margin-top: 1em">If you do not want these
shortcuts, use plain &quot;rlPhaseStart&quot; function.</p>

<p style="margin-top: 1em">Metric <br>
rlLogMetricLow</p>

<p style="margin-top: 1em">Log a metric, which should be as
low as possible to the journal. (Example: memory
consumption, run time)</p>

<p style="margin-top: 1em">rlLogMetricLow name value
[tolerance]</p>

<p style="margin-top: 1em">name <br>
Name of the metric. It has to be unique in a phase.</p>

<p style="margin-top: 1em">value <br>
Value of the metric.</p>

<p style="margin-top: 1em">tolerance <br>
It is used when comparing via rcw. It means how larger can
the second value be to not trigger a FAIL. Default is
0.2</p>

<p style="margin-top: 1em">When comparing FIRST, SECOND,
then:</p>

<p style="margin-top: 1em">FIRST &gt;= SECOND means PASS
<br>
FIRST+FIRST*tolerance &gt;= SECOND means WARN <br>
FIRST+FIRST*tolerance &lt; SECOND means FAIL</p>

<p style="margin-top: 1em">Example: Simple benchmark is
compared via this metric type in rcw. It has a tolerance of
0.2. First run had 1 second. So:</p>

<p style="margin-top: 1em">For PASS, second run has to be
better or equal to first. <br>
So any value of second or less is a PASS. <br>
For WARN, second run can be a little worse than first. <br>
Tolerance is 0.2, so anything lower than 1.2 means WARN.
<br>
For FAIL, anything worse than 1.2 means FAIL.</p>

<p style="margin-top: 1em">rlLogMetricHigh</p>

<p style="margin-top: 1em">Log a metric, which should be as
high as possible to the journal. (Example: number of
executions per second)</p>

<p style="margin-top: 1em">rlLogMetricHigh name value
[tolerance]</p>

<p style="margin-top: 1em">name <br>
Name of the metric. It has to be unique in a phase.</p>

<p style="margin-top: 1em">value <br>
Value of the metric.</p>

<p style="margin-top: 1em">tolerance <br>
It is used when comparing via rcw. It means how lower can
the second value be to not trigger a FAIL. Default is
0.2</p>

<p style="margin-top: 1em">When comparing FIRST, SECOND,
then:</p>

<p style="margin-top: 1em">FIRST &lt;= SECOND means PASS
<br>
FIRST+FIRST*tolerance &lt;= SECOND means WARN <br>
FIRST+FIRST*tolerance &gt; SECOND means FAIL</p>

<p style="margin-top: 1em">AUTHORS <br>
&Acirc;&middot; Petr Muller &lt;pmuller@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Jan Hutar
&lt;jhutar@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Ales Zelinka
&lt;azelinka@redhat.com&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Petr Splichal
&lt;psplicha@redhat.com&gt;</p>

<p style="margin-top: 1em">perl v5.24.1 2017-04-21
LOGGING.SH(1)</p>
<hr>
</body>
</html>
