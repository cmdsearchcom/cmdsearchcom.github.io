<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:34:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PULP-ADMIN(1) Pulp Project PULP-ADMIN(1)</p>

<p style="margin-top: 1em">NAME <br>
pulp-admin - Pulp Documentation</p>

<p style="margin-top: 1em">Contents:</p>

<p style="margin-top: 1em">INTRODUCTION <br>
The admin client is used to remotely manage a Pulp server.
This client is used to manage the operation of the server
itself as well as trigger remote operations on registered
<br>
consumers.</p>

<p style="margin-top: 1em">For more information on the
client that runs on Pulp consumers, see the Consumer section
of this guide.</p>

<p style="margin-top: 1em">The following sections describe
some unique concepts that apply to the admin client.</p>

<p style="margin-top: 1em">Synchronous v. Asynchronous
Commands <br>
Commands run by the client execute in two different
ways.</p>

<p style="margin-top: 1em">Many commands run synchronously.
In these cases, the command is executed immediately on the
server and the results are displayed before the client
process exits. Examples of this <br>
behavior include logging in or displaying the list of
repositories.</p>

<p style="margin-top: 1em">In certain cases, a request is
sent to the server but the client does not wait for a
response. There are several variations of this behavior:</p>

<p style="margin-top: 1em">&Acirc;&middot; For long running
operations, the request is sent to the server and the client
immediately exits. The progress of the operation can be
tracked using the commands in the tasks <br>
section of the client.</p>

<p style="margin-top: 1em">&Acirc;&middot; Some operations
cannot execute while a resource on the server is being used.
If the resource is available, the operation will execute
immediately and the result displayed <br>
in the client. If the operation is postponed because the
resource is unavailable, the status of it can be tracked
using the commands in the tasks section of the client.</p>

<p style="margin-top: 1em">&Acirc;&middot; In certain
circumstances, an operation may be outright rejected based
on the state of a resource. For example, if a repository has
a delete operation queued, any subsequent <br>
operation on the repository will be rejected.</p>

<p style="margin-top: 1em">For more information on the task
commands, see the tasks section of this guide.</p>

<p style="margin-top: 1em">Content Type Bundles <br>
A portion of the admin client centers around standard Pulp
functionality, such as user management or tasking related
operations. However, Pulp&rsquo;s pluggable nature presents
a chal&acirc; <br>
lenge when it comes to type-specific operations. For
example, the steps for synchronizing a repository will
differ based on the type of content being synchronized.</p>

<p style="margin-top: 1em">To facilitate this, the client
provides an extension mechanism. Extensions added by a
content type bundle will customize the client with commands
related to the types being sup&acirc; <br>
ported. Typically, these commands will focus around managing
repositories of a particular type, however there is no
restriction to what commands an extension may add.</p>

<p style="margin-top: 1em">Type-specific sections will
branch at the root of the client. For example, the following
is a trimmed output of the client structure. Type-agnostic
repository commands, such as <br>
the list of all repositories and group commands, are found
under the repo section. Commands for managing RPM
repositories and consumers are found under the rpm section
and pro&acirc; <br>
vided by the RPM extensions. Similarly, the commands for
managing Puppet repositories are found under the puppet
command:</p>

<p style="margin-top: 1em">$ pulp-admin --map <br>
rpm: manage RPM-related content and features <br>
consumer: register, bind, and interact with rpm consumers
<br>
bind: binds a consumer to a repository <br>
history: displays the history of operations on a consumer
<br>
list: lists summary of consumers registered to the Pulp <br>
... <br>
repo: repository lifecycle commands <br>
create: creates a new repository <br>
delete: deletes a repository <br>
list: lists repositories on the Pulp server <br>
... <br>
puppet: manage Puppet-related content and features <br>
repo: repository lifecycle commands <br>
create: creates a new repository <br>
delete: deletes a repository <br>
list: lists repositories on the Pulp server <br>
... <br>
repo: list repositories and manage repo groups <br>
list: lists repositories on the Pulp server <br>
group: repository group commands <br>
...</p>

<p style="margin-top: 1em">As new types are supported,
additional root-level sections will be provided in their
content type bundles.</p>

<p style="margin-top: 1em">Troubleshooting with verbose
flag <br>
You can run Pulp commands in verbose mode to get additional
information in case of a failure. Pulp CLI provide -v and
-vv options for INFO and DEBUG level information
respec&acirc; <br>
tively:</p>

<p style="margin-top: 1em">$ pulp-admin --help <br>
Usage: pulp-admin [options]</p>

<p style="margin-top: 1em">Options: <br>
-h, --help show this help message and exit <br>
-u USERNAME, --username=USERNAME <br>
username for the Pulp server; if used will bypass the <br>
stored certificate and override a username specified <br>
in ~/.pulp/admin.conf <br>
-p PASSWORD, --password=PASSWORD <br>
password for the Pulp server; must be used with <br>
--username. if used will bypass the stored certificate <br>
and override a password specified in <br>
~/.pulp/admin.conf <br>
--config=CONFIG absolute path to the configuration file <br>
--map prints a map of the CLI sections and commands <br>
-v enables verbose output; use twice for increased <br>
verbosity with debug information</p>

<p style="margin-top: 1em">Here is an example of how
verbose flag can be used one or more times:</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo create
--repo-id test <br>
A resource with the ID &quot;test&quot; already exists.</p>

<p style="margin-top: 1em">$ pulp-admin -v rpm repo create
--repo-id test <br>
2015-03-05 14:10:28,931 - ERROR - Exception occurred: <br>
href: /pulp/api/v2/repositories/ <br>
method: POST <br>
status: 409 <br>
error: Duplicate resource: test <br>
traceback: None <br>
data: {u&rsquo;resource_id&rsquo;: u&rsquo;test&rsquo;,
u&rsquo;error&rsquo;: {u&rsquo;code&rsquo;:
u&rsquo;PLP0018&rsquo;, u&rsquo;data&rsquo;:
{u&rsquo;resource_id&rsquo;: u&rsquo;test&rsquo;},
u&rsquo;description&rsquo;: u&rsquo;Duplicate resource:
test&rsquo;, u&rsquo;sub_errors&rsquo;: []}}</p>

<p style="margin-top: 1em">A resource with the ID
&quot;test&quot; already exists.</p>

<p style="margin-top: 1em">$ pulp-admin -vv rpm repo create
--repo-id test <br>
2015-03-05 14:12:22,014 - DEBUG - sending POST request to
/pulp/api/v2/repositories/ <br>
2015-03-05 14:12:22,361 - INFO - POST request to
/pulp/api/v2/repositories/ with parameters
{&quot;display_name&quot;: null, &quot;description&quot;:
null, &quot;distributors&quot;:
[{&quot;distributor_id&quot;: &quot;yum_distributor&quot;,
&quot;auto_publish&quot;: true,
&quot;distributor_config&quot;: {&quot;http&quot;: false,
&quot;relative_url&quot;: &quot;test&quot;,
&quot;https&quot;: true}, &quot;distributor_type_id&quot;:
&quot;yum_distributor&quot;}, {&quot;distributor_id&quot;:
&quot;export_distributor&quot;, &quot;auto_publish&quot;:
false, &quot;distributor_config&quot;: {&quot;http&quot;:
false, &quot;https&quot;: true},
&quot;distributor_type_id&quot;:
&quot;export_distributor&quot;}], &quot;notes&quot;:
{&quot;_repo-type&quot;: &quot;rpm-repo&quot;},
&quot;importer_type_id&quot;: &quot;yum_importer&quot;,
&quot;importer_config&quot;: {}, &quot;id&quot;:
&quot;test&quot;} <br>
2015-03-05 14:12:22,362 - INFO - Response status : 409</p>

<p style="margin-top: 1em">2015-03-05 14:12:22,362 - INFO -
Response body : <br>
{ <br>
&quot;exception&quot;: null, <br>
&quot;traceback&quot;: null, <br>
&quot;_href&quot;: &quot;/pulp/api/v2/repositories/&quot;,
<br>
&quot;resource_id&quot;: &quot;test&quot;, <br>
&quot;error_message&quot;: &quot;Duplicate resource:
test&quot;, <br>
&quot;http_request_method&quot;: &quot;POST&quot;, <br>
&quot;http_status&quot;: 409, <br>
&quot;error&quot;: { <br>
&quot;code&quot;: &quot;PLP0018&quot;, <br>
&quot;data&quot;: { <br>
&quot;resource_id&quot;: &quot;test&quot; <br>
}, <br>
&quot;description&quot;: &quot;Duplicate resource:
test&quot;, <br>
&quot;sub_errors&quot;: [] <br>
} <br>
}</p>

<p style="margin-top: 1em">2015-03-05 14:12:22,362 - ERROR
- Exception occurred: <br>
href: /pulp/api/v2/repositories/ <br>
method: POST <br>
status: 409 <br>
error: Duplicate resource: test <br>
traceback: None <br>
data: {u&rsquo;resource_id&rsquo;: u&rsquo;test&rsquo;,
u&rsquo;error&rsquo;: {u&rsquo;code&rsquo;:
u&rsquo;PLP0018&rsquo;, u&rsquo;data&rsquo;:
{u&rsquo;resource_id&rsquo;: u&rsquo;test&rsquo;},
u&rsquo;description&rsquo;: u&rsquo;Duplicate resource:
test&rsquo;, u&rsquo;sub_errors&rsquo;: []}}</p>

<p style="margin-top: 1em">A resource with the ID
&quot;test&quot; already exists.</p>

<p style="margin-top: 1em">AUTHENTICATION <br>
This guide covers basic authentication and authorization in
the Pulp Platform.</p>

<p style="margin-top: 1em">Basic Authentication of Users
<br>
All pulp-admin commands accept username and password to
capture authentication credentials.</p>

<p style="margin-top: 1em">$ pulp-admin --help <br>
Usage: pulp-admin [options]</p>

<p style="margin-top: 1em">Options: <br>
-h, --help show this help message and exit <br>
-u USERNAME, --username=USERNAME <br>
username for the Pulp server; if used will bypass the <br>
stored certificate and override a username specified <br>
in ~/.pulp/admin.conf <br>
-p PASSWORD, --password=PASSWORD <br>
password for the Pulp server; must be used with <br>
--username. if used will bypass the stored certificate <br>
and override a password specified in ~/.pulp/admin.conf <br>
--config=CONFIG absolute path to the configuration file <br>
--map prints a map of the CLI sections and commands <br>
-v enables verbose output; use twice for increased <br>
verbosity with debug information</p>

<p style="margin-top: 1em">Pulp Admin client allows the
user to specify username and password credentials in the
user&rsquo;s local admin.conf ~/.pulp/admin.conf. Using the
conf file avoids having to pass user <br>
credentials repeatedly using the command line. Also reading
the password from a file that can only be read by certain
users is more secure because it cannot be shown by listing
<br>
the system processes.</p>

<p style="margin-top: 1em"># Add the following snippet to
&lsquo;&lsquo;~/.pulp/admin.conf&lsquo;&lsquo;</p>

<p style="margin-top: 1em">[auth] <br>
username: admin <br>
password: admin</p>

<p style="margin-top: 1em"># This enables the user to run
pulp-admin commands without providing a username <br>
# and password using the command line</p>

<p style="margin-top: 1em">$ pulp-admin repo list <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">pulp-admin searches for a
username and password to use in the following order:</p>

<p style="margin-top: 1em">&Acirc;&middot; credentials
specified from the command line.</p>

<p style="margin-top: 1em">&Acirc;&middot; credentials set
in the user&rsquo;s ~/.pulp/admin.conf.</p>

<p style="margin-top: 1em">Pulp Server installation comes
with one default user created with admin level privileges.
Username and password for this user can be configured in
/etc/pulp/server.conf at the <br>
time of installation.</p>

<p style="margin-top: 1em">Below is an example of basic
authentication of users based on their username and password
when running a pulp-admin command.</p>

<p style="margin-top: 1em">$ pulp-admin repo list <br>
Enter password: <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Note that username and password
are parameters to the pulp-admin command, not the
sub-command, like repo list in this case. You can also pass
the password parameter on the com&acirc; <br>
mand line with --password argument, but this is not a
recommended method. Users should use interactive password as
a preferred method.</p>

<p style="margin-top: 1em">Rather than specifying the
credentials on each call to pulp-admin, a user can log in to
the Pulp server. Logging in stores a user credentials
certificate at <br>
~/.pulp/user-cert.pem.</p>

<p style="margin-top: 1em">$ pulp-admin login -u admin <br>
Enter password: <br>
Successfully logged in. Session certificate will expire at
Dec 6 21:47:33 2012 <br>
GMT.</p>

<p style="margin-top: 1em">Subsequent commands to
pulp-admin will no longer require the username-password
arguments and will instead use the user certificate. The
user can be logged out by using the <br>
pulp-admin logout command.</p>

<p style="margin-top: 1em">$ pulp-admin logout <br>
Session certificate successfully removed.</p>

<p style="margin-top: 1em">Layout of Auth Section <br>
The root level auth section contains sub-sections to create
and manage Pulp users, roles and their permissions for
various resources.</p>

<p style="margin-top: 1em">$ pulp-admin auth <br>
Usage: pulp-admin auth [SUB_SECTION, ..] COMMAND <br>
Description: user, role and permission commands</p>

<p style="margin-top: 1em">Available Sections: <br>
permission - manage granting, revoking and listing
permissions for resources <br>
role - manage user roles <br>
user - manage users</p>

<p style="margin-top: 1em">Users <br>
Users can be created to perform various administrative tasks
on the Pulp Server. You can configure them with either admin
level access or limited access to a few resources on the
<br>
server.</p>

<p style="margin-top: 1em">$ pulp-admin auth user --help
<br>
Usage: pulp-admin user [SUB_SECTION, ..] COMMAND <br>
Description: manage users</p>

<p style="margin-top: 1em">Available Commands: <br>
create - creates a user <br>
delete - deletes a user <br>
list - lists summary of users registered to the Pulp server
<br>
search - search items while optionally specifying sort,
limit, skip, and requested fields <br>
update - changes metadata of an existing user</p>

<p style="margin-top: 1em">Here is an example of creating
and updating a user:</p>

<p style="margin-top: 1em">$ pulp-admin auth user create
--login test-user <br>
Enter password for user [test-user] : <br>
Re-enter password for user [test-user]: <br>
User [test-user] successfully created</p>

<p style="margin-top: 1em">If you intend to update the
password for a user, you can use -p flag as shown in the
example below to be prompted for a new password.</p>

<p style="margin-top: 1em">$ pulp-admin auth user update
--login test-user --name &quot;Test User&quot; -p <br>
Enter new password for user [test-user] : <br>
Re-enter new password for user [test-user]: <br>
User [test-user] successfully updated</p>

<p style="margin-top: 1em">You can also pass it on the
command line with --password argument, but this method is
just to provide a simpler way for scripting and is not
recommended. Users should use inter&acirc; <br>
active password update as a preferred method.</p>

<p style="margin-top: 1em">The user list command lists a
summary of all users. It also accepts arguments to list all
the details or specific fields for users.</p>

<p style="margin-top: 1em">$ pulp-admin auth user list
--details <br>

+----------------------------------------------------------------------+
<br>
Users <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Login: admin <br>
Name: admin <br>
Roles: super-users</p>

<p style="margin-top: 1em">Login: test-user <br>
Name: test-user <br>
Roles:</p>

<p style="margin-top: 1em">$ pulp-admin auth user list
--fields roles <br>

+----------------------------------------------------------------------+
<br>
Users <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Login: admin <br>
Roles: super-users</p>

<p style="margin-top: 1em">Login: test-user <br>
Roles:</p>

<p style="margin-top: 1em">Users can be removed from the
Pulp server using the user delete command.</p>

<p style="margin-top: 1em">$ pulp-admin auth user delete
--login test-user <br>
User [test-user] successfully deleted</p>

<p style="margin-top: 1em">Users belonging to the
super-users role can be deleted as well, as long as there is
at least one such user remaining in the system.</p>

<p style="margin-top: 1em">$ pulp-admin auth user delete
--login admin <br>
The server indicated one or more values were incorrect. The
server provided the <br>
following error message:</p>

<p style="margin-top: 1em">The last superuser [admin]
cannot be deleted</p>

<p style="margin-top: 1em">Permissions <br>
Permissions to various resources can be accessed or
manipulated using pulp-admin auth permission commands. There
are 5 types of permissions - CREATE, READ, UPDATE, DELETE
and <br>
EXECUTE. Permissions are granted and revoked from a resource
which is essentially a REST API path with the /pulp/api
prefix removed.</p>

<p style="margin-top: 1em">Here are a few examples of
accessing and manipulation permissions:</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
list --resource / <br>

+----------------------------------------------------------------------+
<br>
Permissions for / <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Admin: CREATE, READ, UPDATE,
DELETE, EXECUTE</p>

<p style="margin-top: 1em">The following command will give
permissions to create, read and update repositories to
test-user.</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
grant --resource /v2/repositories/ --login test-user -o
create -o update -o read <br>
Permissions [/v2/repositories/ : [&rsquo;CREATE&rsquo;,
&rsquo;UPDATE&rsquo;, &rsquo;READ&rsquo;]] successfully
granted <br>
to user [test-user]</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
list --resource /v2/repositories/ <br>

+----------------------------------------------------------------------+
<br>
Permissions for /repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Test-user: CREATE, UPDATE,
READ</p>

<p style="margin-top: 1em">The following command will
revoke permissions to create and update repositories from
test-user.</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
revoke --resource /v2/repositories/ --login test-user -o
create -o update <br>
Permissions [/v2/repositories/ : [&rsquo;CREATE&rsquo;,
&rsquo;UPDATE&rsquo;]] successfully revoked from <br>
user [test-user]</p>

<p style="margin-top: 1em">NOTE: <br>
The /v2 prefix and the trailing / are always present in a
resource name for permission commands.</p>

<p style="margin-top: 1em">Roles <br>
In order to efficiently administer permissions, Pulp uses
the notion of roles to enable an administrator to grant and
revoke permission on a resource to a group of users instead
<br>
of individually. The pulp-admin auth role command provides
the ability to list the currently defined roles,
create/delete roles, and manage user membership in a role.
Pulp <br>
installation comes with a default super-users role with
admin level privileges, and the default admin user belongs
to this role.</p>

<p style="margin-top: 1em">The role list command is used to
list the current roles.</p>

<p style="margin-top: 1em">$ pulp-admin auth role list <br>

+----------------------------------------------------------------------+
<br>
Roles <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: super-users <br>
Users: admin</p>

<p style="margin-top: 1em">A role can be created and
deleted by specifying a role id.</p>

<p style="margin-top: 1em">$ pulp-admin auth role create
--role-id consumer-admin <br>
Role [consumer-admin] successfully created</p>

<p style="margin-top: 1em">$ pulp-admin auth role delete
--role-id consumer-admin <br>
Role [consumer-admin] successfully deleted</p>

<p style="margin-top: 1em">A user can be added and removed
from a role using role user add and role user remove
commands respectively. Note that both the user and the role
should exist on the pulp server.</p>

<p style="margin-top: 1em">$ pulp-admin auth role user add
--role-id super-users --login test-user <br>
User [test-user] successfully added to role
[super-users]</p>

<p style="margin-top: 1em">$ pulp-admin auth role user
remove --role-id super-users --login test-user <br>
User [test-user] successfully removed from role
[super-users]</p>

<p style="margin-top: 1em">Permissions can be granted and
revoked from roles just like users. In this case all the
users belonging to the given role will inherit these
permissions.</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
grant --resource /v2/repositories/ --role-id test-role -o
read <br>
Permissions [/v2/repositories/ : [&rsquo;READ&rsquo;]]
successfully granted to role [test-role]</p>

<p style="margin-top: 1em">$ pulp-admin auth permission
revoke --resource /v2/repositories/ --role-id test-role -o
read <br>
Permissions [/v2/repositories/ : [&rsquo;READ&rsquo;]]
successfully revoked from role [test-role]</p>

<p style="margin-top: 1em">CONSUMER <br>
There are several commands for managing consumers. Other
type-specific commands, such as bind, are provided by
type-specific extensions.</p>

<p style="margin-top: 1em">History <br>
Pulp keeps a history of the operations that pertain to each
consumer. The history command has several options for
filtering and limiting its output.</p>

<p style="margin-top: 1em">$ pulp-admin consumer history
--help <br>
Command: history <br>
Description: displays the history of operations on a
consumer</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--consumer-id - (required)
unique identifier; only alphanumeric, -, and _ <br>
allowed <br>
--event-type - limits displayed history entries to the given
type; supported <br>
types: (&quot;consumer_registered&quot;,
&quot;consumer_unregistered&quot;, <br>
&quot;repo_bound&quot;,
&quot;repo_unbound&quot;,&quot;content_unit_installed&quot;,
<br>
&quot;content_unit_uninstalled&quot;,
&quot;unit_profile_changed&quot;, <br>
&quot;added_to_group&quot;,&quot;removed_from_group&quot;)
<br>
--limit - limits displayed history entries to the given
amount (must be <br>
greater than zero) <br>
--sort - indicates the sort direction (&quot;ascending&quot;
or &quot;descending&quot;) <br>
based on the entry&rsquo;s timestamp <br>
--start-date - only return entries that occur on or after
the given date in <br>
iso8601 format (yyyy-mm-ddThh:mm:ssZ) <br>
--end-date - only return entries that occur on or before the
given date in <br>
iso8601 format (yyyy-mm-ddThh:mm:ssZ)</p>

<p style="margin-top: 1em">The history command shows the
most recent operations first.</p>

<p style="margin-top: 1em">$ pulp-admin consumer history
--consumer-id=consumer1 <br>

+----------------------------------------------------------------------+
<br>
Consumer History [ consumer1 ] <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Consumer Id: consumer1 <br>
Type: repo_bound <br>
Details: <br>
Distributor Id: puppet_distributor <br>
Repo Id: repo1 <br>
Originator: admin <br>
Timestamp: 2013-01-22T16:07:52Z</p>

<p style="margin-top: 1em">Consumer Id: consumer1 <br>
Type: consumer_registered <br>
Details: None <br>
Originator: admin <br>
Timestamp: 2013-01-22T15:09:58Z</p>

<p style="margin-top: 1em">List <br>
This command retrieves a list of consumers.
&quot;Confirmed&quot; bindings are those for which the agent
on the remote consumer has performed a bind action.
&quot;Unconfirmed&quot; bindings are <br>
waiting for that remote action to take place.</p>

<p style="margin-top: 1em">$ pulp-admin consumer list
--help <br>
Command: list <br>
Description: lists a summary of consumers registered to the
Pulp server</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--fields - comma-separated list
of consumer fields; Example: <br>
&quot;id,display_name&quot;. If specified, only the given
fields will be <br>
displayed. <br>
--bindings - if specified, the bindings information is
displayed <br>
--details - if specified, all of the consumer information is
displayed</p>

<p style="margin-top: 1em">$ pulp-admin consumer list <br>

+----------------------------------------------------------------------+
<br>
Consumers <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: consumer1 <br>
Display Name: Consumer 1 <br>
Description: The first consumer. <br>
Bindings: <br>
Confirmed: repo1 <br>
Unconfirmed: <br>
Notes:</p>

<p style="margin-top: 1em">Search <br>
For a more powerful way to find and list consumers, user the
criteria based search command.</p>

<p style="margin-top: 1em">$ pulp-admin consumer search
--str-eq &rsquo;id=consumer1&rsquo; <br>
Capabilities: <br>
Certificate: -----BEGIN CERTIFICATE----- <br>

MIICETCB+gIBEDANBgkqhkiG9w0BAQUFADAUMRIwEAYDVQQDEwlsb2NhbGhvc3Qw
<br>

HhcNMTMwMjA5MTQ1NzQ2WhcNMjMwMjA3MTQ1NzQ2WjAOMQwwCgYDVQQDEwNmb28w
<br>

gZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKvJ+5XzfArVxxrm4a16UoOA7F0x
<br>

N++uip+GTqj/v9wG3ktHom+hlP0mlrzYOq731RS3zSBN8lkmCifRU+GKcyfG41/s
<br>

k1LCGLR8N2AQin8XEeKjaloG4h9Q11ZLYWWklWSAbgL1HmzFg1FNiuEH7IPUR8MW
<br>

PDExyOVOOHNjvhbTAgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAIlpxab9wWOXczAZ
<br>

bL+qdIf74bQ0yPug6wn1uWR6PamSYF6BuHzZIMHyq6n1ikx+RhBE2GGt0O01yR7Q
<br>

Iq2zzOW80eJop5ct8pgoykVvMEG7xvF9qA2diJAi9npsA/dzvhaeyAFAcsCG60pU
<br>

FKSOCjG8fXhyaU6o9oqX13dRo4ahW33ofYBnC/1Ck0L19ZDm5aA7zlu12j/ssMmI
<br>

sDUZNzGg50lPvV58/1nalmxLWuNNScaWhOErPKowkfh8K7lcBfMVZs5H3VJQ6hW7
<br>

iqjFyGBtASOdgw+Nc7yCkJSvUbkV+3uhKHNF+TG0uGGGPBcyOq+qkXEBeNwLKPbL
<br>
taWnfe8= -----END CERTIFICATE----- <br>
Description: None <br>
Display Name: Consumer 1 <br>
Id: consumer1 <br>
Notes:</p>

<p style="margin-top: 1em">Unregister <br>
Registration must be initiated from pulp-consumer, but
unregistering can be done from either end.</p>

<p style="margin-top: 1em">$ pulp-admin consumer unregister
--help <br>
Command: unregister <br>
Description: unregisters a consumer</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--consumer-id - (required)
unique identifier; only alphanumeric, -, and _ <br>
allowed</p>

<p style="margin-top: 1em">$ pulp-admin consumer unregister
--consumer-id=consumer1 <br>
Consumer [ consumer1 ] successfully unregistered</p>

<p style="margin-top: 1em">Update <br>
Basic attributes of consumers can be modified using the
update command.</p>

<p style="margin-top: 1em">$ pulp-admin consumer update
--help <br>
Command: update <br>
Description: changes metadata on an existing consumer</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--display-name - user-readable
display name (may contain i18n characters) <br>
--description - user-readable description (may contain i18n
characters) <br>
--note - adds/updates/deletes notes to programmatically
identify the <br>
resource; key-value pairs must be separated by an equal sign
<br>
(e.g. key=value); multiple notes can be changed by
specifying <br>
this option multiple times; notes are deleted by specifying
<br>
&quot;&quot; as the value <br>
--consumer-id - (required) unique identifier; only
alphanumeric, -, and _ <br>
allowed</p>

<p style="margin-top: 1em">$ pulp-admin consumer update
--consumer-id=consumer1 --description=&rsquo;First
consumer.&rsquo; <br>
Consumer [ consumer1 ] successfully updated</p>

<p style="margin-top: 1em">CONSUMER GROUPS <br>
Consumer Groups allow you to associate any number of
consumers with a named group and perform different actions
on it.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
--help</p>

<p style="margin-top: 1em">Usage: pulp-admin [SUB_SECTION,
..] COMMAND <br>
Description: consumer group commands</p>

<p style="margin-top: 1em">Available Sections: <br>
members - manage members of repository groups <br>
package - consumer group package installation management</p>

<p style="margin-top: 1em">Available Commands: <br>
bind - binds each consumer in a consumer group to a
repository <br>
create - creates a new consumer group <br>
delete - deletes a consumer group <br>
list - lists consumer groups on the Pulp server <br>
search - searches for consumer groups on the Pulp server
<br>
unbind - unbinds each consumer in a consumer group from a
repository <br>
update - updates the metadata about the group itself (not
its members)</p>

<p style="margin-top: 1em">Create, Update, Delete <br>
To create a consumer group, the only required argument is a
unique ID.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
create --group-id test-group</p>

<p style="margin-top: 1em">Consumer Group [test-group]
successfully created</p>

<p style="margin-top: 1em">The update command takes similar
arguments to the create command. This call updates metadata
about the consumer group itself (not the members).</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
update --group-id test-group --display-name new-name</p>

<p style="margin-top: 1em">Consumer Group [test-group]
successfully updated</p>

<p style="margin-top: 1em">The new consumer group can be
seen with its unique ID and display name.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
list <br>

+----------------------------------------------------------------------+
<br>
Consumer Groups <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: test-group <br>
Display Name: new-name <br>
Description: None <br>
Consumer Ids: <br>
Notes:</p>

<p style="margin-top: 1em">Consumer groups can be removed
from the Pulp server using the delete command. Deleting a
consumer group has no effect on the consumers that are
members of the group.</p>

<p style="margin-top: 1em">pulp-admin rpm consumer group
delete --group-id test-group</p>

<p style="margin-top: 1em">Consumer Group [test-group]
successfully deleted</p>

<p style="margin-top: 1em">Group membership <br>
Consumers can be associated and unassociated with any
existing consumer group.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
members</p>

<p style="margin-top: 1em">Usage: pulp-admin [SUB_SECTION,
..] COMMAND <br>
Description: manage members of repository groups</p>

<p style="margin-top: 1em">Available Commands: <br>
add - add consumers to an existing group <br>
list - list the consumers in a particular group <br>
remove - remove consumers from a group</p>

<p style="margin-top: 1em">The call is idempotent if the
consumer is already memeber of the group.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
members add --group-id test-group
--str-eq=&rsquo;id=consumer1&rsquo;</p>

<p style="margin-top: 1em">Consumer Group [test-group]
membership updated</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
list <br>

+----------------------------------------------------------------------+
<br>
Consumer Groups <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: test-group <br>
Display Name: None <br>
Description: None <br>
Consumer Ids: consumer1 <br>
Notes:</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
members list --group-id test-group <br>

+----------------------------------------------------------------------+
<br>
Consumer Group Members <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: consumer1 <br>
Display Name: consumer1 <br>
Description: None <br>
Notes:</p>

<p style="margin-top: 1em">Now you can see that consumer1
is part of the group. Similarly, you can remove consumers
from consumer groups.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
members remove --group-id test-group
--str-eq=&rsquo;id=consumer1&rsquo;</p>

<p style="margin-top: 1em">Consumer Group [test-group]
membership updated</p>

<p style="margin-top: 1em">Repository Binding <br>
The bind command allows to bind each consumer in a consumer
group to a repository.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
bind --consumer-group-id test-group --repo-id zoo</p>

<p style="margin-top: 1em">Consumer Group [test-group]
successfully bound to repository [zoo]</p>

<p style="margin-top: 1em">You can also use the unbind
command to unbind each consumer in a consumer group from a
repo.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
unbind --consumer-group-id test-group --repo-id zoo</p>

<p style="margin-top: 1em">Consumer Group [test-group]
successfully unbound from repository [zoo]</p>

<p style="margin-top: 1em">Content Management <br>
This section manages content on each consumer belonging to
the group.</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
package</p>

<p style="margin-top: 1em">Usage: pulp-admin [SUB_SECTION,
..] COMMAND <br>
Description: consumer group package installation
management</p>

<p style="margin-top: 1em">Available Commands: <br>
install - install packages <br>
uninstall - uninstall packages <br>
update - update (installed) packages</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
package install --name zsh --consumer-group-id test</p>

<p style="margin-top: 1em">This command may be exited via
ctrl+c without affecting the request.</p>

<p style="margin-top: 1em">[-] <br>
Running...</p>

<p style="margin-top: 1em">Install on consumer [c1]
succeeded <br>

+----------------------------------------------------------------------+
<br>
Installed <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Name: zsh <br>
Version: 5.0.7 <br>
Arch: x86_64 <br>
Repoid: updates-testing</p>

<p style="margin-top: 1em">Search <br>
For more targeted results than the list command provides,
you can use Pulp&rsquo;s criteria search feature to search
consumer groups. For example, to find a specific consumer
group <br>
that has id &rsquo;test&rsquo;:</p>

<p style="margin-top: 1em">$ pulp-admin rpm consumer group
search --str-eq=&rsquo;id=test&rsquo; <br>

+----------------------------------------------------------------------+
<br>
Consumer Groups <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: test <br>
Display Name: None <br>
Description: None <br>
Consumer Ids: <br>
Notes: <br>
Scratchpad: None</p>

<p style="margin-top: 1em">EVENTS <br>
Pulp has an event system that makes it easy for third party
application to integrate and for users to stay informed via
email about the Pulp server&rsquo;s activity. A specific set
of <br>
operations inside the Pulp server produce reports about what
they accomplished, and those reports are fed into an event
framework. Users can then setup event listeners that
lis&acirc; <br>
ten for specific events, which then sends notifications to
the user or an automated service. Notifier types include
email, AMQP, and HTTP.</p>

<p style="margin-top: 1em">Listeners <br>
Event listeners connect one or more event types with a
notifier.</p>

<p style="margin-top: 1em">$ pulp-admin event listener <br>
Usage: pulp-admin listener [SUB_SECTION, ..] COMMAND <br>
Description: manage server-side event listeners</p>

<p style="margin-top: 1em">Available Sections: <br>
amqp - manage amqp listeners <br>
email - manage email listeners <br>
http - manage http listeners</p>

<p style="margin-top: 1em">Available Commands: <br>
delete - delete an event listener <br>
list - list all of the event listeners in the system</p>

<p style="margin-top: 1em">From this section of the CLI,
you can list and delete listeners, or drill down into
type-specific sections to create and update. Examples for
each type of notifier appear below.</p>

<p style="margin-top: 1em">Email <br>
Event reports can be sent directly to an email address. The
messages currently consists of a JSON-serialized
representation of the actual event body. This meets a basic
use case <br>
for having email notification with all of the available
event data, but we intend to make the output more
human-friendly in the future.</p>

<p style="margin-top: 1em">NOTE: <br>
Before attempting to setup email notifications, be sure to
configure the &quot;[email]&quot; section of Pulp&rsquo;s
settings file, /etc/pulp/server.conf</p>

<p style="margin-top: 1em">$ pulp-admin event listener
email create --help <br>
Command: create <br>
Description: create a listener</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--event-type - (required) one of
&quot;repo.sync.start&quot;, &quot;repo.sync.finish&quot;,
<br>
&quot;repo.publish.start&quot;,
&quot;repo.publish.finish&quot;. May be specified <br>
multiple times. To match all types, use value &quot;*&quot;
<br>
--subject - (required) text of the email&rsquo;s subject
<br>
--addresses - (required) this is a comma separated list of
email addresses <br>
that should receive these notifications. Do not include
spaces.</p>

<p style="margin-top: 1em">To add an email notifier, you
must specify what types of events to listen to, what the
email subject should be, and who should receive the
emails.</p>

<p style="margin-top: 1em">$ pulp-admin event listener
email create --event-type=&quot;repo.sync.start&quot;
--subject=&quot;pulp notification&quot;
--addresses=someone@redhat.com,another@redhat.com <br>
Event listener successfully created</p>

<p style="margin-top: 1em">$ pulp-admin event listener list
<br>
Event Types: repo.sync.start <br>
Id: 5081a42ce19a00ea4300000e <br>
Notifier Config: <br>
Addresses: someone@redhat.com, another@redhat.com <br>
Subject: pulp notification <br>
Notifier Type Id: email</p>

<p style="margin-top: 1em">Using python&rsquo;s builtin
testing MTA, the following message was captured after being
sent by the above-configured listener.</p>

<p style="margin-top: 1em">$ python -m smtpd -n -c
DebuggingServer localhost:1025 <br>
---------- MESSAGE FOLLOWS ---------- <br>
Content-Type: text/plain; charset=&quot;us-ascii&quot; <br>
MIME-Version: 1.0 <br>
Content-Transfer-Encoding: 7bit <br>
Subject: pulp notification <br>
From: no-repy@your.domain <br>
To: someone@redhat.com <br>
X-Peer: 127.0.0.1</p>

<p style="margin-top: 1em">{ <br>
&quot;call_report&quot;: { <br>
&quot;task_group_id&quot;:
&quot;aaa8f2ec-964c-4d62-bba9-3191aad9c3ea&quot;, <br>
&quot;exception&quot;: null, <br>
&quot;task_id&quot;:
&quot;79be77a8-1a20-11e2-aeb9-1803731e94c4&quot;, <br>
&quot;tags&quot;: [ <br>
&quot;pulp:repository:pulp2&quot;, <br>
&quot;pulp:action:sync&quot; <br>
], <br>
&quot;reasons&quot;: [], <br>
&quot;start_time&quot;: &quot;2012-10-19T19:09:16Z&quot;,
<br>
&quot;traceback&quot;: null, <br>
&quot;schedule_id&quot;: null, <br>
&quot;finish_time&quot;: null, <br>
&quot;state&quot;: &quot;running&quot;, <br>
&quot;result&quot;: null, <br>
&quot;progress&quot;: {}, <br>
&quot;principal_login&quot;: &quot;admin&quot;, <br>
&quot;response&quot;: &quot;accepted&quot; <br>
}, <br>
&quot;event_type&quot;: &quot;repo.sync.start&quot;, <br>
&quot;payload&quot;: { <br>
&quot;repo_id&quot;: &quot;pulp2&quot; <br>
} <br>
} <br>
------------ END MESSAGE ------------</p>

<p style="margin-top: 1em">HTTP <br>
Event reports can be sent via a POST call to any URL, and
basic auth credentials may be supplied. The body of the HTTP
request is a JSON-serialized version of the event report.
<br>
Here is an example of creating an HTTP listener.</p>

<p style="margin-top: 1em">$ pulp-admin event listener http
create --event-type=repo.sync.start
--url=http://myserver.redhat.com <br>
Event listener successfully created</p>

<p style="margin-top: 1em">[mhrivnak@redhrivnak pulp]$
pulp-admin event listener list <br>
Event Types: repo.sync.start <br>
Id: 50bf51ffdd01fb5b9d000003 <br>
Notifier Config: <br>
URL: http://myserver.redhat.com <br>
Notifier Type Id: http</p>

<p style="margin-top: 1em">AMQP <br>
AMQP is an industry standard for integrating separate
systems, applications, or even components within an
application through asynchronous messages. Pulp&rsquo;s
event reports can be <br>
sent as the body of an AMQP message to a message broker,
where it will be forwarded to any number of clients who
subscribe to Pulp&rsquo;s topic exchange.</p>

<p style="margin-top: 1em">Pulp uses Apache Qpid as an AMQP
broker and publishes its messages to a topic exchange. Even
though AMQP is a widely-adopted standard protocol, there are
several incompatible <br>
versions of it. For this reason, there is not another broker
that can be used in place of Qpid.</p>

<p style="margin-top: 1em">NOTE: <br>
Before using an AMQP notifier, be sure to look in
Pulp&rsquo;s server config file (/etc/pulp/server.conf) in
the &quot;[messaging]&quot; section to configure your
settings.</p>

<p style="margin-top: 1em">$ pulp-admin event listener amqp
create --help <br>
Command: create <br>
Description: create a listener</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--event-type - (required) one of
&quot;repo.sync.start&quot;, &quot;repo.sync.finish&quot;,
<br>
&quot;repo.publish.start&quot;,
&quot;repo.publish.finish&quot;. May be specified <br>
multiple times. To match all types, use value &quot;*&quot;
<br>
--exchange - optional name of an exchange that overrides the
setting from <br>
server.conf</p>

<p style="margin-top: 1em">Here you can also specify an
exchange name. If you don&acirc;t specify one, it will
default to the value pulled from /etc/pulp/server.conf in
the &quot;[messaging]&quot; section. If you don&acirc;t <br>
set one there either, Pulp will default to
&quot;amq.topic&quot;, which is an exchange guaranteed to be
available on any broker. Regardless of what name you choose
(we suggest &quot;pulp&quot; as a <br>
reasonable choice), you do not need to create the exchange
or take any action on the AMQP broker. Pulp will
automatically create the exchange if it does not yet
exist.</p>

<p style="margin-top: 1em">As for selecting event types, if
you are unsure, we suggest going with &quot;*&quot; to
select all of them. The client can choose which types of
messages they want to subscribe to based on <br>
hierarchically matching against the event type (called a
&quot;subject&quot; in AMQP). It is cheap and fast to send a
message to a broker, making it convenient to fire and
forget. Let the <br>
clients decide which subjects they care about. More about
subject matching here.</p>

<p style="margin-top: 1em">This is an example of creating
an AMQP event listener.</p>

<p style="margin-top: 1em">$ pulp-admin event listener amqp
create --event-type=&rsquo;*&rsquo; --exchange=pulp <br>
Event listener successfully created</p>

<p style="margin-top: 1em">[mhrivnak@dhcp-230-147 pulp]$
pulp-admin event listener list <br>
Event Types: * <br>
Id: 5092d9b3e19a00c58600000c <br>
Notifier Config: <br>
Exchange: pulp <br>
Notifier Type Id: amqp</p>

<p style="margin-top: 1em">Event Types <br>
These are the types of events that can be associated with
listeners, and each description includes a partial list of
the types of data that gets reported.</p>

<p style="margin-top: 1em">repo.publish.start</p>

<p style="margin-top: 1em">Fires when any repository starts
a publish operation.</p>

<p style="margin-top: 1em">&Acirc;&middot; start time</p>

<p style="margin-top: 1em">&Acirc;&middot; repo_id</p>

<p style="margin-top: 1em">&Acirc;&middot; user who
initiated the sync</p>

<p style="margin-top: 1em">&Acirc;&middot; task ID</p>

<p style="margin-top: 1em">repo.publish.finish</p>

<p style="margin-top: 1em">Fires when any repository
finishes a publish operation.</p>

<p style="margin-top: 1em">&Acirc;&middot; start time</p>

<p style="margin-top: 1em">&Acirc;&middot; end time</p>

<p style="margin-top: 1em">&Acirc;&middot; repo_id</p>

<p style="margin-top: 1em">&Acirc;&middot; task ID</p>

<p style="margin-top: 1em">&Acirc;&middot;
success/failure</p>

<p style="margin-top: 1em">&Acirc;&middot; number of items
published</p>

<p style="margin-top: 1em">&Acirc;&middot; errors</p>

<p style="margin-top: 1em">repo.sync.start</p>

<p style="margin-top: 1em">Fires when any repository starts
a sync operation.</p>

<p style="margin-top: 1em">&Acirc;&middot; start time</p>

<p style="margin-top: 1em">&Acirc;&middot; repo_id</p>

<p style="margin-top: 1em">&Acirc;&middot; user who
initiated the sync</p>

<p style="margin-top: 1em">&Acirc;&middot; task ID</p>

<p style="margin-top: 1em">repo.sync.finish</p>

<p style="margin-top: 1em">Fires when any repository
finishes a sync operation.</p>

<p style="margin-top: 1em">&Acirc;&middot; start time</p>

<p style="margin-top: 1em">&Acirc;&middot; end time</p>

<p style="margin-top: 1em">&Acirc;&middot; repo_id</p>

<p style="margin-top: 1em">&Acirc;&middot; task ID</p>

<p style="margin-top: 1em">&Acirc;&middot;
success/failure</p>

<p style="margin-top: 1em">&Acirc;&middot; number of items
imported</p>

<p style="margin-top: 1em">&Acirc;&middot; errors</p>

<p style="margin-top: 1em">NODES <br>
This guide covers admin client commands for managing Pulp
Nodes in the Pulp Platform. For an overview, tips, and,
troubleshooting, please visit the Pulp Nodes Concepts
Guide.</p>

<p style="margin-top: 1em">Layout <br>
The root level node section contains the following
features.</p>

<p style="margin-top: 1em">$ pulp-admin node --help <br>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND <br>
Description: pulp nodes related commands</p>

<p style="margin-top: 1em">Available Sections: <br>
repo - repository related commands <br>
sync - child node synchronization commands</p>

<p style="margin-top: 1em">Available Commands: <br>
activate - activate a consumer as a child node <br>
bind - bind a child node to a repository <br>
deactivate - deactivate a child node <br>
list - list child nodes <br>
unbind - removes the binding between a child node and a
repository</p>

<p style="margin-top: 1em">Listing <br>
The node list command may be used to list child nodes.</p>

<p style="margin-top: 1em">pulp-admin node list --help <br>
Command: list <br>
Description: list child nodes</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--fields - comma-separated list
of consumer fields; Example: <br>
&quot;id,display_name&quot;. If specified, only the given
fields will be <br>
displayed. <br>
--bindings - if specified, the bindings information is
displayed <br>
--details - if specified, all of the consumer information is
displayed</p>

<p style="margin-top: 1em">Activation <br>
A Pulp server that is registered as a consumer to another
Pulp server can be designated as a child node. Once
activated on the parent server, the consumer is recognized
as a <br>
child node of the parent and can be managed using node
commands.</p>

<p style="margin-top: 1em">To activate a consumer as a
child node, use the node activate command. More information
on node-level synchronization strategies can be found
here.</p>

<p style="margin-top: 1em">$ pulp-admin node activate
--help <br>
Command: activate <br>
Description: activate a consumer as a child node</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--consumer-id - (required)
unique identifier; only alphanumeric, -, and _ <br>
allowed <br>
--strategy - synchronization strategy (mirror|additive)
default is additive</p>

<p style="margin-top: 1em">A child node may be deactivated
using node deactivate command. Once deactivated, the node
may no longer be managed using node commands.</p>

<p style="margin-top: 1em">$ pulp-admin node deactivate
--help <br>
Command: deactivate <br>
Description: deactivate a child node</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--node-id - (required) unique
identifier; only alphanumeric, -, and _ allowed</p>

<p style="margin-top: 1em">NOTE: <br>
Consumer (child node) un-registration will automatically
deactivate the node. When a node is activated again, it will
have the same repositories bound to it as it had before <br>
deactivation.</p>

<p style="margin-top: 1em">Repositories <br>
The commands provided in the node repo section are used to
perform Nodes specific management of existing
repositories.</p>

<p style="margin-top: 1em">$ pulp-admin node repo --help
<br>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND <br>
Description: repository related commands</p>

<p style="margin-top: 1em">Available Commands: <br>
disable - disables binding to a repository by a child node
<br>
enable - enables binding to a repository by a child node
<br>
list - list node enabled repositories <br>
publish - publishing commands</p>

<p style="margin-top: 1em">Listing <br>
A listing of enabled repositories may be obtained by using
the node repo list command.</p>

<p style="margin-top: 1em">$ pulp-admin node repo list
--help <br>
Command: list <br>
Description: list node enabled repositories</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--details - if specified,
detailed configuration information is displayed for <br>
each repository <br>
--fields - comma-separated list of repository fields;
Example: <br>

&quot;id,description,display_name,content_unit_counts&quot;.
If <br>
specified, only the given fields will be displayed. <br>
--all, -a - if specified, information on all Pulp
repositories, regardless of <br>
type, will be displayed</p>

<p style="margin-top: 1em">Enabling <br>
A repository may be enabled using the node repo enable
command. More information on repository-level
synchronization strategies can be found here.</p>

<p style="margin-top: 1em">$ pulp-admin node repo enable
--help <br>
Command: enable <br>
Description: enables binding to a repository by a child
node</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--repo-id - (required) unique
identifier; only alphanumeric, -, and _ <br>
allowed <br>
--auto-publish - if &quot;true&quot;, the nodes information
will be automatically <br>
published each time the repository is synchronized; defaults
<br>
to &quot;true&quot;</p>

<p style="margin-top: 1em">WARNING: <br>
Using auto-publish causes the Nodes information to be
published each time the repository is synchronized. This may
increase the time it takes to perform the synchronization
<br>
depending on the size of the repository.</p>

<p style="margin-top: 1em">Publishing <br>
Manually publishing the Nodes data necessary for child node
synchronization, can be triggered using the node repo
publish command.</p>

<p style="margin-top: 1em">$ pulp-admin node repo publish
--help <br>
Command: publish <br>
Description: publishing commands</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--repo-id - (required) unique
identifier; only alphanumeric, -, and _ allowed</p>

<p style="margin-top: 1em">NOTE: <br>
Repositories MUST be published for child node
synchronization to be successful.</p>

<p style="margin-top: 1em">Binding <br>
The node bind command is used to associate a repository with
a child node. This association determines which repositories
may be synchronized to child nodes. The strategy
speci&acirc; <br>
fied here overrides the default strategy specified when the
repository was enabled. More information on repository-level
synchronization strategies can be found here.</p>

<p style="margin-top: 1em">$ pulp-admin node bind --help
<br>
Command: bind <br>
Description: bind a child node to a repository</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--repo-id - (required) unique
identifier; only alphanumeric, -, and _ allowed <br>
--node-id - (required) unique identifier; only alphanumeric,
-, and _ allowed <br>
--strategy - synchronization strategy (mirror|additive)
default is additive</p>

<p style="margin-top: 1em">The node unbind command may be
used to remove the association between a child node and a
repository. Once the association is removed, the specified
repository can no longer be be <br>
synchronized to the child node.</p>

<p style="margin-top: 1em">$ pulp-admin node unbind --help
<br>
Command: unbind <br>
Description: removes the binding between a child node and a
repository</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--repo-id - (required) unique
identifier; only alphanumeric, -, and _ allowed <br>
--node-id - (required) unique identifier; only alphanumeric,
-, and _ allowed</p>

<p style="margin-top: 1em">NOTE: <br>
Only activated nodes and enabled repositories may be
specified.</p>

<p style="margin-top: 1em">Synchronizing <br>
The synchronization of child nodes may be triggered using
the node sync commands. More information on node
synchronization can be found here.</p>

<p style="margin-top: 1em">$ pulp-admin node sync --help
<br>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND <br>
Description: child node synchronization commands</p>

<p style="margin-top: 1em">Available Commands: <br>
run - triggers an immediate synchronization of a child
node</p>

<p style="margin-top: 1em">An immediate synchronization can
be triggered using the node sync run command.</p>

<p style="margin-top: 1em">$ pulp-admin node sync run
--help <br>
Command: run <br>
Description: triggers an immediate synchronization of a
child node</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--node-id - (required) unique
identifier; only alphanumeric, -, and _ allowed <br>
--max-downloads - maximum number of downloads permitted to
run concurrently <br>
--max-speed - maximum bandwidth used per download in
bytes/sec</p>

<p style="margin-top: 1em">WARNING: <br>
Make sure repositories have been published.</p>

<p style="margin-top: 1em">REPOSITORIES <br>
This guide covers core features for managing repositories in
the Pulp Platform. For more detail about how to work with
repositories of a specific content type, please visit the
<br>
user guide for that type. Examples will use &quot;rpm&quot;
as the demo type when necessary, but they will be limited to
generic features.</p>

<p style="margin-top: 1em">Layout <br>
The root level repo section contains the following features.
These features apply across all repositories, regardless of
the specific types of content they will support.</p>

<p style="margin-top: 1em">$ pulp-admin repo --help <br>
Usage: pulp-admin repo [SUB_SECTION, ..] COMMAND <br>
Description: list repositories and manage repo groups</p>

<p style="margin-top: 1em">Available Sections: <br>
group - repository group commands <br>
history - show sync and publish history <br>
tasks - list and cancel tasks related to a specific
repository</p>

<p style="margin-top: 1em">Available Commands: <br>
download - queues a full download of all missing units in a
repository that is using a <br>
&quot;background&quot; or &quot;on_demand&quot; download
policy. <br>
list - lists repositories on the Pulp server</p>

<p style="margin-top: 1em">By comparison, many other
features are implemented under a root-level section named
for a content type. For example, the RPM repo section looks
like this:</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo --help
<br>
Usage: pulp-admin repo [SUB_SECTION, ..] COMMAND <br>
Description: repository lifecycle commands</p>

<p style="margin-top: 1em">Available Sections: <br>
content - search the contents of a repository <br>
copy - copies one or more content units between repositories
<br>
export - run or view the status of a repository export <br>
group - repository group commands <br>
publish - run or view the status of publish tasks <br>
remove - remove modules from a repository <br>
sync - run, schedule, or view the status of sync tasks <br>
uploads - upload modules into a repository</p>

<p style="margin-top: 1em">Available Commands: <br>
create - creates a new repository <br>
delete - deletes a repository <br>
list - lists repositories on the Pulp server <br>
search - searches for repositories on the server <br>
update - changes metadata on an existing repository</p>

<p style="margin-top: 1em">The reason for putting
repository commands in different places is that some
features will be customized and augmented by plugins, such
that their versions of common commands will <br>
only be applicable to their own content. Commands that can
operate on all repositories go in the generic
&quot;repo&quot; section.</p>

<p style="margin-top: 1em">Create, Update, Delete <br>
To create a repository, the only required argument is a
unique ID. Consult the help text for the create command of
each particular repository type to see what other options
are <br>
available.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo create
--repo-id=foo <br>
Successfully created repository [foo]</p>

<p style="margin-top: 1em">The update command takes similar
arguments to the create command.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo update
--repo-id=foo --display-name=&rsquo;Foo Repo&rsquo; <br>
Repository [foo] successfully updated</p>

<p style="margin-top: 1em">The new repository can be seen
with its unique ID and display name.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo list <br>

+----------------------------------------------------------------------+
<br>
RPM Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: foo <br>
Display Name: Foo Repo <br>
Description: None <br>
Content Unit Count: 0</p>

<p style="margin-top: 1em">Deleting a repository is an
asynchronous operation. In case other tasks are already in
progress on this repository, the server will allow those
tasks to complete before executing <br>
the deletion. The example below shows how to request
deletion and then check the status of that task.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo delete
--repo-id=foo <br>
The request to delete repository [foo] has been received by
the server. The <br>
progress of the task can be viewed using the commands under
&quot;repo tasks&quot;</p>

<p style="margin-top: 1em">$ pulp-admin repo tasks list
--repo-id=foo <br>

+----------------------------------------------------------------------+
<br>
Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Operations: delete <br>
Resources: foo (repository) <br>
State: Successful <br>
Start Time: 2012-12-17T23:17:46Z <br>
Finish Time: 2012-12-17T23:17:46Z <br>
Result: N/A <br>
Task Id: 2d4fc3da-7ad7-448c-a9dd-78e79f71ef2f</p>

<p style="margin-top: 1em">List <br>
This command lists all repositories in Pulp, regardless of
their content type. To list and search repositories only of
a particular type, go to that type&rsquo;s area of the CLI,
such <br>
as pulp-admin rpm repo list. (For more detailed output use
&rsquo;--details&rsquo; option).</p>

<p style="margin-top: 1em">$ pulp-admin repo list <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: pulp <br>
Display Name: Pulp <br>
Description: Pulp&rsquo;s stable repository <br>
Content Unit Count: 39</p>

<p style="margin-top: 1em">Id: repo1 <br>
Display Name: repo1 <br>
Description: None <br>
Content Unit Count: 0</p>

<p style="margin-top: 1em">Id: repo2 <br>
Display Name: repo2 <br>
Description: None <br>
Content Unit Count: 0</p>

<p style="margin-top: 1em">Also there is possibility to
list information with and without details about one specific
repo.</p>

<p style="margin-top: 1em">pulp-admin repo list --repo-id
iso-test <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: iso-test <br>
Display Name: iso-test <br>
Description: None <br>
Content Unit Counts:</p>

<p style="margin-top: 1em">pulp-admin repo list --repo-id
iso-test --details <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: iso-test <br>
Display Name: iso-test <br>
Description: None <br>
Content Unit Counts: <br>
Notes: <br>
Importers: <br>
Config: <br>
Id: iso_importer <br>
Importer Type Id: iso_importer <br>
Last Sync: None <br>
Repo Id: iso-test <br>
Scheduled Syncs: <br>
Distributors: <br>
Auto Publish: True <br>
Config: <br>
Distributor Type Id: iso_distributor <br>
Id: iso_distributor <br>
Last Publish: None <br>
Repo Id: iso-test <br>
Scheduled Publishes:</p>

<p style="margin-top: 1em">Search <br>
For more targeted results than the list command provides,
you can use Pulp&rsquo;s criteria search feature to search
repositories. For example, to find a specific RPM repository
that <br>
has id &rsquo;zoo&rsquo;:</p>

<p style="margin-top: 1em">pulp-admin rpm repo search
--str-eq=&quot;id=zoo&quot; <br>

+----------------------------------------------------------------------+
<br>
Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: zoo <br>
Display Name: zoo-repo <br>
Description: None <br>
Content Unit Counts: <br>
Erratum: 4 <br>
Package Category: 1 <br>
Package Group: 2 <br>
Rpm: 32 <br>
Last Unit Added: 2014-11-14T13:02:47Z <br>
Last Unit Removed: None <br>
Notes:</p>

<p style="margin-top: 1em">Content Search <br>
Content units can be searched within a repository using
Pulp&rsquo;s criteria search feature. The layout of this
command may vary based on the content type; for example, RPM
support <br>
includes a separate command for each package type (rpm,
srpm, etc.). Here is an example of searching for an rpm
package by name. The --repo-id argument is required, and the
<br>
--match argument applies a regular expression.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo content
rpm --repo-id=pulp --match &rsquo;name=^python-w.+&rsquo;
<br>
Arch: noarch <br>
Buildhost: localhost <br>
Checksum:
edfbe47f61a64c2196720e8ab1eb66c696303f89080fbe950444b9384bcfd2ee
<br>
Checksumtype: sha256 <br>
Description: web.py is a web framework for python that is as
simple as it is <br>
powerful. web.py is in the public domain; you can use it for
<br>
whatever purpose with absolutely no restrictions. <br>
Epoch: 0 <br>
Filename: python-webpy-0.32-9.fc17.noarch.rpm <br>
License: Public Domain and BSD <br>
Name: python-webpy <br>
Provides: [[u&rsquo;python-webpy&rsquo;, u&rsquo;EQ&rsquo;,
[u&rsquo;0&rsquo;, u&rsquo;0.32&rsquo;,
u&rsquo;9.fc17&rsquo;]]] <br>
Release: 9.fc17 <br>
Requires: [[u&rsquo;python(abi)&rsquo;, u&rsquo;EQ&rsquo;,
[u&rsquo;0&rsquo;, u&rsquo;2.7&rsquo;, None]]] <br>
Vendor: <br>
Version: 0.32</p>

<p style="margin-top: 1em">Copy Between Repositories <br>
Content units can be copied from one repository to another
using Pulp&rsquo;s criteria search. For content units that
involve an on-disk file (such as RPMs having a package
stored on <br>
disk), the file is only stored once even if it is included
in multiple Pulp repositories.</p>

<p style="margin-top: 1em">The following example assumes
that the repository &quot;foo&quot; has some content units
and that we want to copy all of them to the repository
&quot;bar&quot;.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo copy rpm
--from-repo-id=foo --to-repo-id=bar <br>
Progress on this task can be viewed using the commands under
&quot;repo tasks&quot;.</p>

<p style="margin-top: 1em">$ pulp-admin repo tasks list
--repo-id=foo <br>

+----------------------------------------------------------------------+
<br>
Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Operations: associate <br>
Resources: bar (repository), foo (repository) <br>
State: Successful <br>
Start Time: 2012-12-17T23:27:12Z <br>
Finish Time: 2012-12-17T23:27:13Z <br>
Result: N/A <br>
Task Id: 8c3a6964-245f-4fe5-9d7c-8c6bac55cffb</p>

<p style="margin-top: 1em">The copy was successful. Here
you can see that the repository &quot;bar&quot; now has the
same number of content units as &quot;foo&quot;.</p>

<p style="margin-top: 1em">$ pulp-admin rpm repo list <br>

+----------------------------------------------------------------------+
<br>
RPM Repositories <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: foo <br>
Display Name: foo <br>
Description: None <br>
Content Unit Count: 36</p>

<p style="margin-top: 1em">Id: bar <br>
Display Name: bar <br>
Description: None <br>
Content Unit Count: 36</p>

<p style="margin-top: 1em">Groups <br>
Repository Groups allow you to associate any number of
repositories, even of varying content types, with a named
group. Features that make use of repository groups are
forthcom&acirc; <br>
ing in future releases of Pulp.</p>

<p style="margin-top: 1em">Here is an example of creating a
repo group and adding members to it:</p>

<p style="margin-top: 1em">$ pulp-admin repo group create
--group-id=&rsquo;group1&rsquo; --description=&rsquo;misc.
repos&rsquo; --display-name=&rsquo;Group 1&rsquo; <br>
Repository Group [group1] successfully created</p>

<p style="margin-top: 1em">$ pulp-admin repo group members
add --group-id=group1 --str-eq=&rsquo;id=repo1&rsquo; <br>
Successfully added members to repository group [group1]</p>

<p style="margin-top: 1em">The members add command takes
advantage of Pulp&rsquo;s criteria search feature, so you
can add many repositories at once. In this case, we provided
a specific repository name. Let&rsquo;s <br>
look at the result of these two commands by listing the
repository groups.</p>

<p style="margin-top: 1em">$ pulp-admin repo group list
<br>

+----------------------------------------------------------------------+
<br>
Repository Groups <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: group1 <br>
Display Name: Group 1 <br>
Description: misc. repos <br>
Repo Ids: repo1 <br>
Notes:</p>

<p style="margin-top: 1em">Notice that &quot;repo1&quot;
shows up in the &quot;Repo Ids&quot; field.</p>

<p style="margin-top: 1em">Tasks <br>
Some operations on repositories, such as sync, publish, and
delete, may operate asynchronously. When you execute these
operations, Pulp will give you a &quot;task ID&quot;. You
can use <br>
that task ID to check the status of the operation. From this
section of the CLI, you can cancel, list, and get details
about repository tasks.</p>

<p style="margin-top: 1em">$ pulp-admin repo tasks --help
<br>
Usage: pulp-admin tasks [SUB_SECTION, ..] COMMAND <br>
Description: list and cancel tasks related to a specific
repository</p>

<p style="margin-top: 1em">Available Commands: <br>
cancel - cancel one or more tasks <br>
details - displays more detailed information about a
specific task <br>
list - lists tasks queued (waiting) or running on the
server</p>

<p style="margin-top: 1em">ORPHANED CONTENT UNITS <br>
Introduction <br>
Repositories are the container into which content is drawn
into Pulp and by which Pulp serves content. However, under
the hood, Pulp actually manages content separately from <br>
repositories. This allows Pulp to minimize disk space by
never duplicating content that is shared between
repositories (i.e. content units that appear in more than
one reposi&acirc; <br>
tory).</p>

<p style="margin-top: 1em">The consequence of this approach
is that when a repository is deleted from the Pulp server,
the content associated with that repository is not. Content
units that are no longer <br>
associated with any repositories are referred to as orphaned
content units or simply orphans.</p>

<p style="margin-top: 1em">This page describes the
management of orphaned content units.</p>

<p style="margin-top: 1em">Listing Orphaned Content Units
<br>
The pulp-admin command line client provides the orphan
section and the list command to inspect the orphaned content
units on your server:</p>

<p style="margin-top: 1em">$ pulp-admin orphan list
--type=rpm --details <br>
Arch: noarch <br>
Checksum:
7e9cad8b2cd436079fd524803ec7fa209a666ecdda05c6f9c8c5ee70cdea9ce6
<br>
Checksumtype: sha256 <br>
Epoch: 0 <br>
Id: a0079ca2-1d4f-4d01-8307-3f183f1843a6 <br>
Name: tito <br>
Release: 1.fc16 <br>
Version: 0.4.9</p>


<p style="margin-top: 1em">+----------------------------------------------------------------------+
<br>
Summary <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">RPM: 1 <br>
Total: 1</p>

<p style="margin-top: 1em">You can filter the list by
content type by using the --type=&lt;type&gt; flag.</p>

<p style="margin-top: 1em">You can use the --details flag
to list the individual orphaned content units. Otherwise
only the Summary section is displayed. This flag is not
available when the content type is <br>
omitted, and will be ignored if specified.</p>

<p style="margin-top: 1em">Removing Orphaned Content Units
<br>
The pulp-admin command line client provides the orphan
section and remove command to remove orphaned content units
from your server.</p>

<p style="margin-top: 1em">It has three flags:</p>

<p style="margin-top: 1em">&Acirc;&middot;
--type=&lt;type&gt; to remove all the orphaned content units
of a particular type</p>

<p style="margin-top: 1em">&Acirc;&middot; --id=&lt;id&gt;
to remove a particular orphaned content unit</p>

<p style="margin-top: 1em">&Acirc;&middot; --all to remove
all the orphaned content units on the server</p>

<p style="margin-top: 1em">$ pulp-admin orphan remove --all
<br>
Request accepted</p>

<p style="margin-top: 1em">check status of task
e239ae4f-7fad-4004-bfb6-8e06f17d22ef with &quot;pulp-admin
tasks details&quot;</p>

<p style="margin-top: 1em">$ pulp-admin tasks details
--task-id e239ae4f-7fad-4004-bfb6-8e06f17d22ef <br>

+----------------------------------------------------------------------+
<br>
Task Details <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Operations: <br>
Resources: orphans (content_unit) <br>
State: Successful <br>
Start Time: 2012-12-09T03:26:51Z <br>
Finish Time: 2012-12-09T03:26:51Z <br>
Result: <br>
Erratum: 4 <br>
Package Category: 1 <br>
Package Group: 2 <br>
Rpm: 32 <br>
Task Id: e239ae4f-7fad-4004-bfb6-8e06f17d22ef <br>
Progress:</p>

<p style="margin-top: 1em">$ pulp-admin orphan list <br>
$</p>

<p style="margin-top: 1em">INSPECTING THE SERVER <br>
Pulp as a Platform <br>
The Pulp server has very little built in functionality. To
provide the functionality that administrators rely on, Pulp
loads a number of plugins that define types and importers
<br>
and distributors. The former are definitions of categories
of content units and the metadata that needs to be
associated with them. The latter two are classes of plugins
that <br>
allow Pulp to manage content units, of particular types, by
bring them into the server and making them available from
the server respectively.</p>

<p style="margin-top: 1em">This page shows how to query the
server for each of these classes of plugins.</p>

<p style="margin-top: 1em">Content Unit Types <br>
The pulp-admin command line client provides the server
section and the types command to query the server about the
content unit type definitions that have been loaded.</p>

<p style="margin-top: 1em">$ pulp-admin server types <br>

+----------------------------------------------------------------------+
<br>
Supported Content Types <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: distribution <br>
Display Name: Distribution <br>
Description: Kickstart trees and all accompanying files <br>
Referenced Types: <br>
Search Indexes: id, family, variant, version, arch <br>
Unit Key: id, family, variant, version, arch</p>

<p style="margin-top: 1em">[snip]</p>

<p style="margin-top: 1em">Id: rpm <br>
Display Name: RPM <br>
Description: RPM <br>
Referenced Types: erratum <br>
Search Indexes: name, epoch, version, release, arch,
filename, checksum, <br>
checksumtype <br>
Unit Key: name, epoch, version, release, arch, checksumtype,
checksum</p>

<p style="margin-top: 1em">[snip]</p>

<p style="margin-top: 1em">Id: puppet_module <br>
Display Name: Puppet Module <br>
Description: Puppet Module <br>
Referenced Types: <br>
Search Indexes: author, tag_list <br>
Unit Key: name, version, author</p>

<p style="margin-top: 1em">The output above shows a snippet
of the types that are defined by the default plugins that
have been developed with the Pulp server. Each type has the
following fields:</p>

<p style="margin-top: 1em">&Acirc;&middot; Id: this is a
programmatic id that the server uses to identify the
type</p>

<p style="margin-top: 1em">&Acirc;&middot; Display Name: an
optional, human-friendly, display name</p>

<p style="margin-top: 1em">&Acirc;&middot; Description: an
optional description of the type</p>

<p style="margin-top: 1em">&Acirc;&middot; Referenced
Types: a list of other types that may be referenced by a
content unit of this type in some way</p>

<p style="margin-top: 1em">&Acirc;&middot; Search Indexes:
metadata fields that can potentially be used as search
criteria</p>

<p style="margin-top: 1em">&Acirc;&middot; Unit Key: a
metadata field, or set of fields, that will uniquely
identify a content unit of this type</p>

<p style="margin-top: 1em">Content Unit Importers <br>
The pulp-admin command line client provides the server
section and the importers command to query the server about
the importer plugins that have been loaded.</p>

<p style="margin-top: 1em">$ pulp-admin server importers
<br>

+----------------------------------------------------------------------+
<br>
Supported Importers <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: puppet_importer <br>
Display Name: Puppet Importer <br>
Types: puppet_module</p>

<p style="margin-top: 1em">Id: yum_importer <br>
Display Name: Yum Importer <br>
Types: distribution, drpm, erratum, package_group,
package_category, rpm, <br>
srpm</p>

<p style="margin-top: 1em">The output above shows the
importers that have been developed along side the Pulp
platform. Each importer has the following fields:</p>

<p style="margin-top: 1em">&Acirc;&middot; Id: a
programmatic id that the server uses to identify the
importer</p>

<p style="margin-top: 1em">&Acirc;&middot; Display Name: an
optional, human-friendly, display name</p>

<p style="margin-top: 1em">&Acirc;&middot; Types: a list of
type ids that the importer can handle</p>

<p style="margin-top: 1em">Content Unit Distributors <br>
The pulp-admin command line client provides the server
section and the distributors command to query the server
about the distributor plugins that have been loaded.</p>

<p style="margin-top: 1em">$ pulp-admin server distributors
<br>

+----------------------------------------------------------------------+
<br>
Supported Distributors <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Id: yum_distributor <br>
Display Name: Yum Distributor <br>
Types: rpm, srpm, drpm, erratum, distribution,
package_category, <br>
package_group</p>

<p style="margin-top: 1em">Id: export_distributor <br>
Display Name: Export Distributor <br>
Types: rpm, srpm, drpm, erratum, distribution,
package_category, <br>
package_group</p>

<p style="margin-top: 1em">Id: puppet_distributor <br>
Display Name: Puppet Distributor <br>
Types: puppet_module</p>

<p style="margin-top: 1em">The output above shows the
distributors that have been developed along side the Pulp
platform. Each distributor has the following fields:</p>

<p style="margin-top: 1em">&Acirc;&middot; Id: a
programmatic id that the server uses to identify the
distributor</p>

<p style="margin-top: 1em">&Acirc;&middot; Display Name: an
optional, human-friendly, display name</p>

<p style="margin-top: 1em">&Acirc;&middot; Types: a list of
type ids that the distributor can handle</p>

<p style="margin-top: 1em">TASKS <br>
Introduction <br>
The Pulp server uses Celery to handle requests that may take
longer than a HTTP request timeout to execute. Many of the
commands from the pulp-admin command line client will <br>
return messages along the lines of</p>

<p style="margin-top: 1em">Request accepted</p>

<p style="margin-top: 1em">check status of task
e239ae4f-7fad-4004-bfb6-8e06f17d22ef with &quot;pulp-admin
tasks details&quot;</p>

<p style="margin-top: 1em">This means the server&rsquo;s
REST API returned a 202 ACCEPTED response with the task
information for the task that is handling the request.</p>

<p style="margin-top: 1em">This page details querying and
managing these tasks.</p>

<p style="margin-top: 1em">Details <br>
The pulp-admin command line client provides the tasks
section and the details command to inspect the runtime
details of a task, identified with the required
--task-id=&lt;id&gt; flag.</p>

<p style="margin-top: 1em">$ pulp-admin tasks details
--task-id e239ae4f-7fad-4004-bfb6-8e06f17d22ef <br>

+----------------------------------------------------------------------+
<br>
Task Details <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Operations: <br>
Resources: orphans (content_unit) <br>
State: Successful <br>
Start Time: 2012-12-09T03:26:51Z <br>
Finish Time: 2012-12-09T03:26:51Z <br>
Result: N/A <br>
Task Id: e239ae4f-7fad-4004-bfb6-8e06f17d22ef <br>
Progress:</p>

<p style="margin-top: 1em">In the output above there are
several sections:</p>

<p style="margin-top: 1em">&Acirc;&middot; Operations: a
list of operations that are being performed by this task</p>

<p style="margin-top: 1em">&Acirc;&middot; Resources: a
list of resources that are being operated on</p>

<p style="margin-top: 1em">&Acirc;&middot; State: the state
of the task, such as: Waiting, Running, Successful or
Error</p>

<p style="margin-top: 1em">&Acirc;&middot; Start Time: the
UTC time the task started</p>

<p style="margin-top: 1em">&Acirc;&middot; Finish Time: the
UTC time the task finished</p>

<p style="margin-top: 1em">&Acirc;&middot; Result: the
reported result of the task, if any</p>

<p style="margin-top: 1em">&Acirc;&middot; Task Id: a
unique identifier for the task (as a UUID)</p>

<p style="margin-top: 1em">&Acirc;&middot; Progress:
arbitrary progress information provided by the task, if
any</p>

<p style="margin-top: 1em">Listing <br>
To see all the tasks on the server at any given time, the
pulp-admin command line client provides the tasks section
and the list command.</p>

<p style="margin-top: 1em">It provides all the same
information as the details command, but for every task that
has been executed on the pulp server. The length of history
depends on the settings described <br>
below.</p>

<p style="margin-top: 1em">In addition to tasks launched
using pulp-admin or the API , reaper and monthly tasks
appear in the list.</p>

<p style="margin-top: 1em">The reaper task is responsible
for cleaning up the database on a regularly scheduled
interval. The interval is configured with reaper_interval in
[data_reaping] section of <br>
/etc/pulp/server.conf. The value can be whole or fraction of
days. The length of time to keep documents for each
collection is also configured in the same section.
task_sta&acirc; <br>
tus_history, consumer_history, repo_sync_history,
repo_publish_history, repo_group_publish_history, and
task_result_history take values of whole or fraction of days
to keep that <br>
type of history. This database cleanup is needed because
these transactions can occur very frequently and as result
the database can grow to an unreasonable size.</p>

<p style="margin-top: 1em">The monthly task is run every 30
days to clean up data referencing any repositories that no
longer exist.</p>

<p style="margin-top: 1em">Purging <br>
To purge the completed tasks on the server at any given
time, the pulp-admin command line client provides the tasks
section and the purge command.</p>

<p style="margin-top: 1em">By giving a --all flag, the
tasks in successful, failed and skipped state will be
purged.</p>

<p style="margin-top: 1em">By giving a --state flag,
specific states can be passed as an argument and all the
tasks belonging to these states will be purged. These states
must be from the completed state <br>
list(except canceled) or the command will result in error
message.</p>

<p style="margin-top: 1em">$ pulp-admin tasks purge <br>

+----------------------------------------------------------------------+
<br>
Purge Completed Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Command: purge <br>
Description: purge tasks in one or more completed states</p>

<p style="margin-top: 1em">Available Arguments:</p>

<p style="margin-top: 1em">--all, -a - if specified, all
tasks in &quot;successful, skipped and failed states <br>
will be purged <br>
--state, -s - comma-separated list of tasks states desired
to be purged. <br>
Example: &quot;successful,failed&quot;. Do not include
spaces.</p>

<p style="margin-top: 1em">$ pulp-admin tasks purge --all
<br>

+----------------------------------------------------------------------+
<br>
Purge Completed Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Task purging is successfully
initiated.</p>

<p style="margin-top: 1em">$ pulp-admin tasks purge -s
successful,failed <br>

+----------------------------------------------------------------------+
<br>
Purge Completed Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Task purging is successfully
initiated.</p>

<p style="margin-top: 1em">$ pulp-admin tasks purge -s
canceled <br>

+----------------------------------------------------------------------+
<br>
Purge Completed Tasks <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Invalid task state passed to
parameters list: canceled.</p>

<p style="margin-top: 1em">Canceling a Task <br>
Tasks may be canceled before they are run (i.e. in the
waiting state) or while they are running.</p>

<p style="margin-top: 1em">The pulp-admin command line
client provides the tasks section and the cancel command to
cancel a task identified by the required --task-id flag.</p>

<p style="margin-top: 1em">$ pulp-admin tasks cancel
--task-id e0e0a250-eded-468f-9d97-0419a00b130f</p>

<p style="margin-top: 1em">$ pulp-admin tasks details
--task-id e0e0a250-eded-468f-9d97-0419a00b130f <br>

+----------------------------------------------------------------------+
<br>
Task Details <br>

+----------------------------------------------------------------------+</p>

<p style="margin-top: 1em">Operations: sync <br>
Resources: ff7-e6 (repository) <br>
State: Canceled <br>
Start Time: 2012-12-09T04:28:10Z <br>
Finish Time: 2012-12-09T04:29:09Z <br>
Result: N/A <br>
Task Id: e0e0a250-eded-468f-9d97-0419a00b130f <br>
Progress: <br>
Yum Importer: <br>
Comps: <br>
State: NOT_STARTED <br>
Content: <br>
Details: <br>
Delta Rpm: <br>
Items Left: 0 <br>
Items Total: 0 <br>
Num Error: 0 <br>
Num Success: 0 <br>
Size Left: 0 <br>
Size Total: 0 <br>
File: <br>
Items Left: 0 <br>
Items Total: 0 <br>
Num Error: 0 <br>
Num Success: 0 <br>
Size Left: 0 <br>
Size Total: 0 <br>
Rpm: <br>
Items Left: 6 <br>
Items Total: 37 <br>
Num Error: 0 <br>
Num Success: 31 <br>
Size Left: 112429996 <br>
Size Total: 149958122 <br>
Tree File: <br>
Items Left: 0 <br>
Items Total: 0 <br>
Num Error: 0 <br>
Num Success: 0 <br>
Size Left: 0 <br>
Size Total: 0 <br>
Error Details: <br>
Items Left: 0 <br>
Items Total: 37 <br>
Num Error: 0 <br>
Num Success: 31 <br>
Size Left: 112429996 <br>
Size Total: 149958122 <br>
State: CANCELED <br>
Errata: <br>
State: NOT_STARTED <br>
Metadata: <br>
State: FINISHED</p>

<p style="margin-top: 1em">NOTE: <br>
It is possible for tasks to complete or experience an error
before the task cancellation request is processed. In these
instances, the task&rsquo;s final state might not be
&quot;can&acirc; <br>
celed&quot; even though a cancel was requested.</p>

<p style="margin-top: 1em">AUTHOR <br>
Pulp Team</p>

<p style="margin-top: 1em">COPYRIGHT <br>
2012-2017, Pulp Team</p>

<p style="margin-top: 1em">2.12.2 Jul 13, 2017
PULP-ADMIN(1)</p>
<hr>
</body>
</html>
