<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PULP-ADMIN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PULP-ADMIN(1)</td>
    <td class="head-vol">Pulp Project</td>
    <td class="head-rtitle">PULP-ADMIN(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pulp-admin - Pulp Documentation
<div style="height: 1.00em;">&#x00A0;</div>
Contents:
<h1 class="Sh" title="Sh" id="INTRODUCTION"><a class="selflink" href="#INTRODUCTION">INTRODUCTION</a></h1>
The admin client is used to remotely manage a Pulp server. This client is used
  to manage the operation of the server itself as well as trigger remote
  operations on registered consumers.
<div style="height: 1.00em;">&#x00A0;</div>
For more information on the client that runs on Pulp consumers, see the Consumer
  section of this guide.
<div style="height: 1.00em;">&#x00A0;</div>
The following sections describe some unique concepts that apply to the admin
  client.
<h2 class="Ss" title="Ss" id="Synchronous_v._Asynchronous_Commands"><a class="selflink" href="#Synchronous_v._Asynchronous_Commands">Synchronous
  v. Asynchronous Commands</a></h2>
Commands run by the client execute in two different ways.
<div style="height: 1.00em;">&#x00A0;</div>
Many commands run synchronously. In these cases, the command is executed
  immediately on the server and the results are displayed before the client
  process exits. Examples of this behavior include logging in or displaying the
  list of repositories.
<div style="height: 1.00em;">&#x00A0;</div>
In certain cases, a request is sent to the server but the client does not wait
  for a response. There are several variations of this behavior:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For long running operations, the request is sent to the
      server and the client immediately exits. The progress of the operation can
      be tracked using the commands in the <b>tasks</b> section of the
    client.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Some operations cannot execute while a resource on the
      server is being used. If the resource is available, the operation will
      execute immediately and the result displayed in the client. If the
      operation is postponed because the resource is unavailable, the status of
      it can be tracked using the commands in the <b>tasks</b> section of the
      client.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">In certain circumstances, an operation may be outright
      rejected based on the state of a resource. For example, if a repository
      has a delete operation queued, any subsequent operation on the repository
      will be rejected.</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
For more information on the task commands, see the tasks section of this guide.
<h2 class="Ss" title="Ss" id="Content_Type_Bundles"><a class="selflink" href="#Content_Type_Bundles">Content
  Type Bundles</a></h2>
A portion of the admin client centers around standard Pulp functionality, such
  as user management or tasking related operations. However, Pulp's pluggable
  nature presents a challenge when it comes to type-specific operations. For
  example, the steps for synchronizing a repository will differ based on the
  type of content being synchronized.
<div style="height: 1.00em;">&#x00A0;</div>
To facilitate this, the client provides an extension mechanism. Extensions added
  by a content type bundle will customize the client with commands related to
  the types being supported. Typically, these commands will focus around
  managing repositories of a particular type, however there is no restriction to
  what commands an extension may add.
<div style="height: 1.00em;">&#x00A0;</div>
Type-specific sections will branch at the root of the client. For example, the
  following is a trimmed output of the client structure. Type-agnostic
  repository commands, such as the list of all repositories and group commands,
  are found under the <b>repo</b> section. Commands for managing RPM
  repositories and consumers are found under the <b>rpm</b> section and provided
  by the RPM extensions. Similarly, the commands for managing Puppet
  repositories are found under the <b>puppet</b> command:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin --map
rpm: manage RPM-related content and features
  consumer: register, bind, and interact with rpm consumers
    bind:       binds a consumer to a repository
    history:    displays the history of operations on a consumer
    list:       lists summary of consumers registered to the Pulp
    ...
 repo: repository lifecycle commands
   create: creates a new repository
   delete: deletes a repository
   list:   lists repositories on the Pulp server
   ...
puppet: manage Puppet-related content and features
  repo: repository lifecycle commands
    create:  creates a new repository
    delete:  deletes a repository
    list:    lists repositories on the Pulp server
    ...
repo: list repositories and manage repo groups
  list: lists repositories on the Pulp server
  group: repository group commands
  ...
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
As new types are supported, additional root-level sections will be provided in
  their content type bundles.
<h2 class="Ss" title="Ss" id="Troubleshooting_with_verbose_flag"><a class="selflink" href="#Troubleshooting_with_verbose_flag">Troubleshooting
  with verbose flag</a></h2>
You can run Pulp commands in verbose mode to get additional information in case
  of a failure. Pulp CLI provide -v and -vv options for INFO and DEBUG level
  information respectively:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin --help
Usage: pulp-admin [options]
<div class="Pp"></div>
Options:
  -h, --help            show this help message and exit
  -u USERNAME, --username=USERNAME
                        username for the Pulp server; if used will bypass the
                        stored certificate and override a username specified
                        in ~/.pulp/admin.conf
  -p PASSWORD, --password=PASSWORD
                        password for the Pulp server; must be used with
                        --username. if used will bypass the stored certificate
                        and override a password specified in
                        ~/.pulp/admin.conf
  --config=CONFIG       absolute path to the configuration file
  --map                 prints a map of the CLI sections and commands
  -v                    enables verbose output; use twice for increased
                        verbosity with debug information
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Here is an example of how verbose flag can be used one or more times:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo create --repo-id test
A resource with the ID &quot;test&quot; already exists.
<div class="Pp"></div>
<div class="Pp"></div>
$ pulp-admin -v rpm repo create --repo-id test
2015-03-05 14:10:28,931 - ERROR - Exception occurred:
       href:      /pulp/api/v2/repositories/
       method:    POST
       status:    409
       error:     Duplicate resource: test
       traceback: None
       data:      {u'resource_id': u'test', u'error': {u'code': u'PLP0018', u'data': {u'resource_id': u'test'}, u'description': u'Duplicate resource: test', u'sub_errors': []}}
<div class="Pp"></div>
A resource with the ID &quot;test&quot; already exists.
<div class="Pp"></div>
<div class="Pp"></div>
$ pulp-admin -vv rpm repo create --repo-id test
2015-03-05 14:12:22,014 - DEBUG - sending POST request to /pulp/api/v2/repositories/
2015-03-05 14:12:22,361 - INFO - POST request to /pulp/api/v2/repositories/ with parameters {&quot;display_name&quot;: null, &quot;description&quot;: null, &quot;distributors&quot;: [{&quot;distributor_id&quot;: &quot;yum_distributor&quot;, &quot;auto_publish&quot;: true, &quot;distributor_config&quot;: {&quot;http&quot;: false, &quot;relative_url&quot;: &quot;test&quot;, &quot;https&quot;: true}, &quot;distributor_type_id&quot;: &quot;yum_distributor&quot;}, {&quot;distributor_id&quot;: &quot;export_distributor&quot;, &quot;auto_publish&quot;: false, &quot;distributor_config&quot;: {&quot;http&quot;: false, &quot;https&quot;: true}, &quot;distributor_type_id&quot;: &quot;export_distributor&quot;}], &quot;notes&quot;: {&quot;_repo-type&quot;: &quot;rpm-repo&quot;}, &quot;importer_type_id&quot;: &quot;yum_importer&quot;, &quot;importer_config&quot;: {}, &quot;id&quot;: &quot;test&quot;}
2015-03-05 14:12:22,362 - INFO - Response status : 409
<div class="Pp"></div>
2015-03-05 14:12:22,362 - INFO - Response body :
 {
  &quot;exception&quot;: null,
  &quot;traceback&quot;: null,
  &quot;_href&quot;: &quot;/pulp/api/v2/repositories/&quot;,
  &quot;resource_id&quot;: &quot;test&quot;,
  &quot;error_message&quot;: &quot;Duplicate resource: test&quot;,
  &quot;http_request_method&quot;: &quot;POST&quot;,
  &quot;http_status&quot;: 409,
  &quot;error&quot;: {
    &quot;code&quot;: &quot;PLP0018&quot;,
    &quot;data&quot;: {
      &quot;resource_id&quot;: &quot;test&quot;
    },
    &quot;description&quot;: &quot;Duplicate resource: test&quot;,
    &quot;sub_errors&quot;: []
  }
}
<div class="Pp"></div>
2015-03-05 14:12:22,362 - ERROR - Exception occurred:
        href:      /pulp/api/v2/repositories/
        method:    POST
        status:    409
        error:     Duplicate resource: test
        traceback: None
        data:      {u'resource_id': u'test', u'error': {u'code': u'PLP0018', u'data': {u'resource_id': u'test'}, u'description': u'Duplicate resource: test', u'sub_errors': []}}
<div class="Pp"></div>
A resource with the ID &quot;test&quot; already exists.
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHENTICATION"><a class="selflink" href="#AUTHENTICATION">AUTHENTICATION</a></h1>
This guide covers basic authentication and authorization in the Pulp Platform.
<h2 class="Ss" title="Ss" id="Basic_Authentication_of_Users"><a class="selflink" href="#Basic_Authentication_of_Users">Basic
  Authentication of Users</a></h2>
All pulp-admin commands accept username and password to capture authentication
  credentials.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin --help
Usage: pulp-admin [options]
<div class="Pp"></div>
Options:
  -h, --help            show this help message and exit
  -u USERNAME, --username=USERNAME
                        username for the Pulp server; if used will bypass the
                        stored certificate and override a username specified
                        in ~/.pulp/admin.conf
  -p PASSWORD, --password=PASSWORD
                        password for the Pulp server; must be used with
                        --username. if used will bypass the stored certificate
                        and override a password specified in ~/.pulp/admin.conf
  --config=CONFIG       absolute path to the configuration file
  --map                 prints a map of the CLI sections and commands
  -v                    enables verbose output; use twice for increased
                        verbosity with debug information
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Pulp Admin client allows the user to specify username and password credentials
  in the user's local admin.conf <b>~/.pulp/admin.conf</b>. Using the conf file
  avoids having to pass user credentials repeatedly using the command line. Also
  reading the password from a file that can only be read by certain users is
  more secure because it cannot be shown by listing the system processes.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
# Add the following snippet to ``~/.pulp/admin.conf``
<div class="Pp"></div>
[auth]
username: admin
password: admin
<div class="Pp"></div>
# This enables the user to run pulp-admin commands without providing a username
# and password using the command line
<div class="Pp"></div>
$ pulp-admin repo list
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
</pre>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>pulp-admin searches for a username and password to use
    in the following order:</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">credentials specified from the command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">credentials set in the user's
    <b>~/.pulp/admin.conf</b>.</dd>
</dl>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Pulp Server installation comes with one default user created with admin level
  privileges. Username and password for this user can be configured in
  <b>/etc/pulp/server.conf</b> at the time of installation.
<div style="height: 1.00em;">&#x00A0;</div>
Below is an example of basic authentication of users based on their username and
  password when running a pulp-admin command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo list
Enter password:
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Note that username and password are parameters to the <b>pulp-admin</b> command,
  not the sub-command, like <b>repo list</b> in this case. You can also pass the
  password parameter on the command line with <b>--password</b> argument, but
  this is not a recommended method. Users should use interactive password as a
  preferred method.
<div style="height: 1.00em;">&#x00A0;</div>
Rather than specifying the credentials on each call to pulp-admin, a user can
  log in to the Pulp server. Logging in stores a user credentials certificate at
  <b>~/.pulp/user-cert.pem</b>.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin login -u admin
Enter password:
Successfully logged in. Session certificate will expire at Dec  6 21:47:33 2012
GMT.
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Subsequent commands to pulp-admin will no longer require the username-password
  arguments and will instead use the user certificate. The user can be logged
  out by using the <b>pulp-admin logout</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin logout
Session certificate successfully removed.
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Layout_of_Auth_Section"><a class="selflink" href="#Layout_of_Auth_Section">Layout
  of Auth Section</a></h2>
The root level <b>auth</b> section contains sub-sections to create and manage
  Pulp users, roles and their permissions for various resources.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth
Usage: pulp-admin auth [SUB_SECTION, ..] COMMAND
Description: user, role and permission commands
<div class="Pp"></div>
Available Sections:
permission - manage granting, revoking and listing permissions for resources
role       - manage user roles
user       - manage users
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Users"><a class="selflink" href="#Users">Users</a></h2>
Users can be created to perform various administrative tasks on the Pulp Server.
  You can configure them with either admin level access or limited access to a
  few resources on the server.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user --help
Usage: pulp-admin user [SUB_SECTION, ..] COMMAND
Description: manage users
<div class="Pp"></div>
Available Commands:
create - creates a user
delete - deletes a user
list   - lists summary of users registered to the Pulp server
search - search items while optionally specifying sort, limit, skip, and requested fields
update - changes metadata of an existing user
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Here is an example of creating and updating a user:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user create --login test-user
Enter password for user [test-user] :
Re-enter password for user [test-user]:
User [test-user] successfully created
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
If you intend to update the password for a user, you can use <b>-p</b> flag as
  shown in the example below to be prompted for a new password.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user update --login test-user --name &quot;Test User&quot; -p
Enter new password for user [test-user] :
Re-enter new password for user [test-user]:
User [test-user] successfully updated
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
You can also pass it on the command line with <b>--password</b> argument, but
  this method is just to provide a simpler way for scripting and is not
  recommended. Users should use interactive password update as a preferred
  method.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>user list</b> command lists a summary of all users. It also accepts
  arguments to list all the details or specific fields for users.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user list --details
+----------------------------------------------------------------------+
                                 Users
+----------------------------------------------------------------------+
<div class="Pp"></div>
Login:  admin
Name:   admin
Roles:  super-users
<div class="Pp"></div>
<div class="Pp"></div>
Login:  test-user
Name:   test-user
Roles:
</pre>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user list --fields roles
+----------------------------------------------------------------------+
                                 Users
+----------------------------------------------------------------------+
<div class="Pp"></div>
Login:  admin
Roles:  super-users
<div class="Pp"></div>
<div class="Pp"></div>
Login:  test-user
Roles:
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Users can be removed from the Pulp server using the <b>user delete</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user delete --login test-user
User [test-user] successfully deleted
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Users belonging to the <b>super-users</b> role can be deleted as well, as long
  as there is at least one such user remaining in the system.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth user delete --login admin
The server indicated one or more values were incorrect. The server provided the
following error message:
<div class="Pp"></div>
The last superuser [admin] cannot be deleted
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Permissions"><a class="selflink" href="#Permissions">Permissions</a></h2>
Permissions to various resources can be accessed or manipulated using
  <b>pulp-admin auth permission</b> commands. There are 5 types of permissions -
  CREATE, READ, UPDATE, DELETE and EXECUTE. Permissions are granted and revoked
  from a resource which is essentially a REST API path with the <b>/pulp/api</b>
  prefix removed.
<div style="height: 1.00em;">&#x00A0;</div>
Here are a few examples of accessing and manipulation permissions:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth permission list --resource /
+----------------------------------------------------------------------+
                               Permissions for /
+----------------------------------------------------------------------+
<div class="Pp"></div>
Admin:  CREATE, READ, UPDATE, DELETE, EXECUTE
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The following command will give permissions to create, read and update
  repositories to <b>test-user</b>.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth permission grant --resource /v2/repositories/ --login test-user -o create -o update -o read
Permissions [/v2/repositories/ : ['CREATE', 'UPDATE', 'READ']] successfully granted
to user [test-user]
</pre>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth permission list --resource /v2/repositories/
+----------------------------------------------------------------------+
                 Permissions for /repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Test-user:  CREATE, UPDATE, READ
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The following command will revoke permissions to create and update repositories
  from <b>test-user</b>.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth permission revoke --resource /v2/repositories/ --login test-user -o create -o update
Permissions [/v2/repositories/ : ['CREATE', 'UPDATE']] successfully revoked from
user [test-user]
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">The <b>/v2</b> prefix and the trailing
  <b>/</b> are always present in a resource name for permission commands.</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Roles"><a class="selflink" href="#Roles">Roles</a></h2>
In order to efficiently administer permissions, Pulp uses the notion of roles to
  enable an administrator to grant and revoke permission on a resource to a
  group of users instead of individually. The <b>pulp-admin auth role</b>
  command provides the ability to list the currently defined roles,
  create/delete roles, and manage user membership in a role. Pulp installation
  comes with a default <b>super-users</b> role with admin level privileges, and
  the default admin user belongs to this role.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>role list</b> command is used to list the current roles.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth role list
+----------------------------------------------------------------------+
                                Roles
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:     super-users
Users:  admin
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
A role can be created and deleted by specifying a role id.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth role create --role-id consumer-admin
Role [consumer-admin] successfully created
<div class="Pp"></div>
$ pulp-admin auth role delete --role-id consumer-admin
Role [consumer-admin] successfully deleted
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
A user can be added and removed from a role using <b>role user add</b> and
  <b>role user remove</b> commands respectively. Note that both the user and the
  role should exist on the pulp server.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth role user add --role-id super-users --login test-user
User [test-user] successfully added to role [super-users]
<div class="Pp"></div>
$ pulp-admin auth role user remove --role-id super-users --login test-user
User [test-user] successfully removed from role [super-users]
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Permissions can be granted and revoked from roles just like users. In this case
  all the users belonging to the given role will inherit these permissions.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin auth permission grant --resource /v2/repositories/ --role-id test-role -o read
Permissions [/v2/repositories/ : ['READ']] successfully granted to role [test-role]
<div class="Pp"></div>
$ pulp-admin auth permission revoke --resource /v2/repositories/ --role-id test-role -o read
Permissions [/v2/repositories/ : ['READ']] successfully revoked from role [test-role]
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="CONSUMER"><a class="selflink" href="#CONSUMER">CONSUMER</a></h1>
There are several commands for managing consumers. Other type-specific commands,
  such as <b>bind</b>, are provided by type-specific extensions.
<h2 class="Ss" title="Ss" id="History"><a class="selflink" href="#History">History</a></h2>
Pulp keeps a history of the operations that pertain to each consumer. The
  <b>history</b> command has several options for filtering and limiting its
  output.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer history --help
Command: history
Description: displays the history of operations on a consumer
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --consumer-id - (required) unique identifier; only alphanumeric, -, and _
                  allowed
  --event-type  - limits displayed history entries to the given type; supported
                  types: (&quot;consumer_registered&quot;, &quot;consumer_unregistered&quot;,
                  &quot;repo_bound&quot;, &quot;repo_unbound&quot;,&quot;content_unit_installed&quot;,
                  &quot;content_unit_uninstalled&quot;, &quot;unit_profile_changed&quot;,
                  &quot;added_to_group&quot;,&quot;removed_from_group&quot;)
  --limit       - limits displayed history entries to the given amount (must be
                  greater than zero)
  --sort        - indicates the sort direction (&quot;ascending&quot; or &quot;descending&quot;)
                  based on the entry's timestamp
  --start-date  - only return entries that occur on or after the given date in
                  iso8601 format (yyyy-mm-ddThh:mm:ssZ)
  --end-date    - only return entries that occur on or before the given date in
                  iso8601 format (yyyy-mm-ddThh:mm:ssZ)
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>history</b> command shows the most recent operations first.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer history --consumer-id=consumer1
+----------------------------------------------------------------------+
                        Consumer History [ consumer1 ]
+----------------------------------------------------------------------+
<div class="Pp"></div>
Consumer Id:  consumer1
Type:         repo_bound
Details:
  Distributor Id: puppet_distributor
  Repo Id:        repo1
Originator:   admin
Timestamp:    2013-01-22T16:07:52Z
<div class="Pp"></div>
<div class="Pp"></div>
Consumer Id:  consumer1
Type:         consumer_registered
Details:      None
Originator:   admin
Timestamp:    2013-01-22T15:09:58Z
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="List"><a class="selflink" href="#List">List</a></h2>
This command retrieves a list of consumers. &quot;Confirmed&quot; bindings are
  those for which the agent on the remote consumer has performed a bind action.
  &quot;Unconfirmed&quot; bindings are waiting for that remote action to take
  place.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer list --help
Command: list
Description: lists a summary of consumers registered to the Pulp server
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --fields   - comma-separated list of consumer fields; Example:
               &quot;id,display_name&quot;. If specified, only the given fields will be
               displayed.
  --bindings - if specified, the bindings information is displayed
  --details  - if specified, all of the consumer information is displayed
<div class="Pp"></div>
$ pulp-admin consumer list
+----------------------------------------------------------------------+
                               Consumers
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:            consumer1
Display Name:  Consumer 1
Description:   The first consumer.
Bindings:
  Confirmed:   repo1
  Unconfirmed:
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Search"><a class="selflink" href="#Search">Search</a></h2>
For a more powerful way to find and list consumers, user the criteria based
  <b>search</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer search --str-eq 'id=consumer1'
Capabilities:
Certificate:   -----BEGIN CERTIFICATE-----
               MIICETCB+gIBEDANBgkqhkiG9w0BAQUFADAUMRIwEAYDVQQDEwlsb2NhbGhvc3Qw
               HhcNMTMwMjA5MTQ1NzQ2WhcNMjMwMjA3MTQ1NzQ2WjAOMQwwCgYDVQQDEwNmb28w
               gZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKvJ+5XzfArVxxrm4a16UoOA7F0x
               N++uip+GTqj/v9wG3ktHom+hlP0mlrzYOq731RS3zSBN8lkmCifRU+GKcyfG41/s
               k1LCGLR8N2AQin8XEeKjaloG4h9Q11ZLYWWklWSAbgL1HmzFg1FNiuEH7IPUR8MW
               PDExyOVOOHNjvhbTAgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAIlpxab9wWOXczAZ
               bL+qdIf74bQ0yPug6wn1uWR6PamSYF6BuHzZIMHyq6n1ikx+RhBE2GGt0O01yR7Q
               Iq2zzOW80eJop5ct8pgoykVvMEG7xvF9qA2diJAi9npsA/dzvhaeyAFAcsCG60pU
               FKSOCjG8fXhyaU6o9oqX13dRo4ahW33ofYBnC/1Ck0L19ZDm5aA7zlu12j/ssMmI
               sDUZNzGg50lPvV58/1nalmxLWuNNScaWhOErPKowkfh8K7lcBfMVZs5H3VJQ6hW7
               iqjFyGBtASOdgw+Nc7yCkJSvUbkV+3uhKHNF+TG0uGGGPBcyOq+qkXEBeNwLKPbL
               taWnfe8= -----END CERTIFICATE-----
Description:   None
Display Name:  Consumer 1
Id:            consumer1
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Unregister"><a class="selflink" href="#Unregister">Unregister</a></h2>
Registration must be initiated from <b>pulp-consumer</b>, but unregistering can
  be done from either end.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer unregister --help
Command: unregister
Description: unregisters a consumer
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --consumer-id - (required) unique identifier; only alphanumeric, -, and _
                  allowed
<div class="Pp"></div>
$ pulp-admin consumer unregister --consumer-id=consumer1
Consumer [ consumer1 ] successfully unregistered
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Update"><a class="selflink" href="#Update">Update</a></h2>
Basic attributes of consumers can be modified using the <b>update</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin consumer update --help
Command: update
Description: changes metadata on an existing consumer
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --display-name - user-readable display name (may contain i18n characters)
  --description  - user-readable description (may contain i18n characters)
  --note         - adds/updates/deletes notes to programmatically identify the
                   resource; key-value pairs must be separated by an equal sign
                   (e.g. key=value); multiple notes can be changed by specifying
                   this option multiple times; notes are deleted by specifying
                   &quot;&quot; as the value
  --consumer-id  - (required) unique identifier; only alphanumeric, -, and _
                   allowed
<div class="Pp"></div>
<div class="Pp"></div>
$ pulp-admin consumer update --consumer-id=consumer1 --description='First consumer.'
Consumer [ consumer1 ] successfully updated
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="CONSUMER_GROUPS"><a class="selflink" href="#CONSUMER_GROUPS">CONSUMER
  GROUPS</a></h1>
Consumer Groups allow you to associate any number of consumers with a named
  group and perform different actions on it.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group --help
<div class="Pp"></div>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: consumer group commands
<div class="Pp"></div>
Available Sections:
  members - manage members of repository groups
  package - consumer group package installation management
<div class="Pp"></div>
Available Commands:
  bind   - binds each consumer in a consumer group to a repository
  create - creates a new consumer group
  delete - deletes a consumer group
  list   - lists consumer groups on the Pulp server
  search - searches for consumer groups on the Pulp server
  unbind - unbinds each consumer in a consumer group from a repository
  update - updates the metadata about the group itself (not its members)
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Create,_Update,_Delete"><a class="selflink" href="#Create,_Update,_Delete">Create,
  Update, Delete</a></h2>
To create a consumer group, the only required argument is a unique ID.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group create --group-id test-group
<div class="Pp"></div>
Consumer Group [test-group] successfully created
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>update</b> command takes similar arguments to the <b>create</b> command.
  This call updates metadata about the consumer group itself (not the members).
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group update --group-id test-group --display-name new-name
<div class="Pp"></div>
Consumer Group [test-group] successfully updated
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The new consumer group can be seen with its unique ID and display name.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group list
+----------------------------------------------------------------------+
                          Consumer Groups
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           test-group
Display Name: new-name
Description:  None
Consumer Ids:
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Consumer groups can be removed from the Pulp server using the delete command.
  Deleting a consumer group has no effect on the consumers that are members of
  the group.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
pulp-admin rpm consumer group delete --group-id test-group
<div class="Pp"></div>
Consumer Group [test-group] successfully deleted
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Group_membership"><a class="selflink" href="#Group_membership">Group
  membership</a></h2>
Consumers can be associated and unassociated with any existing consumer group.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group members
<div class="Pp"></div>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: manage members of repository groups
<div class="Pp"></div>
Available Commands:
add    - add consumers to an existing group
list   - list the consumers in a particular group
remove - remove consumers from a group
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The call is idempotent if the consumer is already memeber of the group.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group members add --group-id test-group --str-eq='id=consumer1'
<div class="Pp"></div>
Consumer Group [test-group] membership updated
<div class="Pp"></div>
$ pulp-admin rpm consumer group list
+----------------------------------------------------------------------+
                          Consumer Groups
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           test-group
Display Name: None
Description:  None
Consumer Ids: consumer1
Notes:
<div class="Pp"></div>
$ pulp-admin rpm consumer group members list --group-id test-group
+----------------------------------------------------------------------+
                       Consumer Group Members
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           consumer1
Display Name: consumer1
Description:  None
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Now you can see that consumer1 is part of the group. Similarly, you can remove
  consumers from consumer groups.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group members remove --group-id test-group --str-eq='id=consumer1'
<div class="Pp"></div>
Consumer Group [test-group] membership updated
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Repository_Binding"><a class="selflink" href="#Repository_Binding">Repository
  Binding</a></h2>
The <b>bind</b> command allows to bind each consumer in a consumer group to a
  repository.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group bind --consumer-group-id test-group --repo-id zoo
<div class="Pp"></div>
Consumer Group [test-group] successfully bound to repository [zoo]
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
You can also use the <b>unbind</b> command to unbind each consumer in a consumer
  group from a repo.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group unbind --consumer-group-id test-group --repo-id zoo
<div class="Pp"></div>
Consumer Group [test-group] successfully unbound from repository [zoo]
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Content_Management"><a class="selflink" href="#Content_Management">Content
  Management</a></h2>
This section manages content on each consumer belonging to the group.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group package
<div class="Pp"></div>
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: consumer group package installation management
<div class="Pp"></div>
Available Commands:
install   - install packages
uninstall - uninstall packages
update    - update (installed) packages
<div class="Pp"></div>
<div class="Pp"></div>
$ pulp-admin rpm consumer group package install --name zsh --consumer-group-id test
<div class="Pp"></div>
This command may be exited via ctrl+c without affecting the request.
<div class="Pp"></div>
<div class="Pp"></div>
[-]
Running...
<div class="Pp"></div>
Install on consumer [c1] succeeded
+----------------------------------------------------------------------+
                             Installed
+----------------------------------------------------------------------+
<div class="Pp"></div>
Name:    zsh
Version: 5.0.7
Arch:    x86_64
Repoid:  updates-testing
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Search"><a class="selflink" href="#Search">Search</a></h2>
For more targeted results than the <b>list</b> command provides, you can use
  Pulp's criteria search feature to search consumer groups. For example, to find
  a specific consumer group that has id 'test':
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm consumer group search --str-eq='id=test'
+----------------------------------------------------------------------+
                          Consumer Groups
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           test
Display Name: None
Description:  None
Consumer Ids:
Notes:
Scratchpad:   None
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="EVENTS"><a class="selflink" href="#EVENTS">EVENTS</a></h1>
Pulp has an event system that makes it easy for third party application to
  integrate and for users to stay informed via email about the Pulp server's
  activity. A specific set of operations inside the Pulp server produce reports
  about what they accomplished, and those reports are fed into an event
  framework. Users can then setup event listeners that listen for specific
  events, which then sends notifications to the user or an automated service.
  Notifier types include email, AMQP, and HTTP.
<h2 class="Ss" title="Ss" id="Listeners"><a class="selflink" href="#Listeners">Listeners</a></h2>
Event listeners connect one or more event types with a notifier.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener
Usage: pulp-admin listener [SUB_SECTION, ..] COMMAND
Description: manage server-side event listeners
<div class="Pp"></div>
Available Sections:
  amqp  - manage amqp listeners
  email - manage email listeners
  http  - manage http listeners
<div class="Pp"></div>
Available Commands:
  delete - delete an event listener
  list   - list all of the event listeners in the system
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
From this section of the CLI, you can <b>list</b> and <b>delete</b> listeners,
  or drill down into type-specific sections to <b>create</b> and <b>update</b>.
  Examples for each type of notifier appear below.
<h2 class="Ss" title="Ss" id="Email"><a class="selflink" href="#Email">Email</a></h2>
Event reports can be sent directly to an email address. The messages currently
  consists of a JSON-serialized representation of the actual event body. This
  meets a basic use case for having email notification with all of the available
  event data, but we intend to make the output more human-friendly in the
  future.
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Before attempting to setup email
  notifications, be sure to configure the &quot;[email]&quot; section of Pulp's
  settings file, <b>/etc/pulp/server.conf</b></div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener email create --help
Command: create
Description: create a listener
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --event-type - (required) one of &quot;repo.sync.start&quot;, &quot;repo.sync.finish&quot;,
                 &quot;repo.publish.start&quot;, &quot;repo.publish.finish&quot;. May be specified
                 multiple times. To match all types, use value &quot;*&quot;
  --subject    - (required) text of the email's subject
  --addresses  - (required) this is a comma separated list of email addresses
                 that should receive these notifications. Do not include spaces.
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To add an email notifier, you must specify what types of events to listen to,
  what the email subject should be, and who should receive the emails.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener email create --event-type=&quot;repo.sync.start&quot; --subject=&quot;pulp notification&quot; --addresses=someone@redhat.com,another@redhat.com
Event listener successfully created
<div class="Pp"></div>
$ pulp-admin event listener list
Event Types:       repo.sync.start
Id:                5081a42ce19a00ea4300000e
Notifier Config:
  Addresses: someone@redhat.com, another@redhat.com
  Subject:   pulp notification
Notifier Type Id:  email
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Using python's builtin testing MTA, the following message was captured after
  being sent by the above-configured listener.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ python -m smtpd -n -c DebuggingServer localhost:1025
---------- MESSAGE FOLLOWS ----------
Content-Type: text/plain; charset=&quot;us-ascii&quot;
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: pulp notification
From: no-repy@your.domain
To: someone@redhat.com
X-Peer: 127.0.0.1
<div class="Pp"></div>
{
  &quot;call_report&quot;: {
    &quot;task_group_id&quot;: &quot;aaa8f2ec-964c-4d62-bba9-3191aad9c3ea&quot;,
    &quot;exception&quot;: null,
    &quot;task_id&quot;: &quot;79be77a8-1a20-11e2-aeb9-1803731e94c4&quot;,
    &quot;tags&quot;: [
      &quot;pulp:repository:pulp2&quot;,
      &quot;pulp:action:sync&quot;
    ],
    &quot;reasons&quot;: [],
    &quot;start_time&quot;: &quot;2012-10-19T19:09:16Z&quot;,
    &quot;traceback&quot;: null,
    &quot;schedule_id&quot;: null,
    &quot;finish_time&quot;: null,
    &quot;state&quot;: &quot;running&quot;,
    &quot;result&quot;: null,
    &quot;progress&quot;: {},
    &quot;principal_login&quot;: &quot;admin&quot;,
    &quot;response&quot;: &quot;accepted&quot;
  },
  &quot;event_type&quot;: &quot;repo.sync.start&quot;,
  &quot;payload&quot;: {
    &quot;repo_id&quot;: &quot;pulp2&quot;
  }
}
------------ END MESSAGE ------------
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="HTTP"><a class="selflink" href="#HTTP">HTTP</a></h2>
Event reports can be sent via a POST call to any URL, and basic auth credentials
  may be supplied. The body of the HTTP request is a JSON-serialized version of
  the event report. Here is an example of creating an HTTP listener.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener http create --event-type=repo.sync.start --url=http://myserver.redhat.com
Event listener successfully created
<div class="Pp"></div>
[mhrivnak@redhrivnak pulp]$ pulp-admin event listener list
Event Types:       repo.sync.start
Id:                50bf51ffdd01fb5b9d000003
Notifier Config:
  URL: http://myserver.redhat.com
Notifier Type Id:  http
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="AMQP"><a class="selflink" href="#AMQP">AMQP</a></h2>
AMQP is an industry standard for integrating separate systems, applications, or
  even components within an application through asynchronous messages. Pulp's
  event reports can be sent as the body of an AMQP message to a message broker,
  where it will be forwarded to any number of clients who subscribe to Pulp's
  topic exchange.
<div style="height: 1.00em;">&#x00A0;</div>
Pulp uses <i>Apache Qpid</i> as an AMQP broker and publishes its messages to a
  <i>topic exchange</i>. Even though AMQP is a widely-adopted standard protocol,
  there are several incompatible versions of it. For this reason, there is not
  another broker that can be used in place of Qpid.
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Before using an AMQP notifier, be sure to look
  in Pulp's server config file ( <b>/etc/pulp/server.conf</b>) in the
  &quot;[messaging]&quot; section to configure your settings.</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener amqp create --help
Command: create
Description: create a listener
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --event-type - (required) one of &quot;repo.sync.start&quot;, &quot;repo.sync.finish&quot;,
                 &quot;repo.publish.start&quot;, &quot;repo.publish.finish&quot;. May be specified
                 multiple times. To match all types, use value &quot;*&quot;
  --exchange   - optional name of an exchange that overrides the setting from
                 server.conf
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Here you can also specify an exchange name. If you don&#x2019;t specify one, it
  will default to the value pulled from <b>/etc/pulp/server.conf</b> in the
  &quot;[messaging]&quot; section. If you don&#x2019;t set one there either,
  Pulp will default to &quot;amq.topic&quot;, which is an exchange guaranteed to
  be available on any broker. Regardless of what name you choose (we suggest
  &quot;pulp&quot; as a reasonable choice), you do not need to create the
  exchange or take any action on the AMQP broker. Pulp will automatically create
  the exchange if it does not yet exist.
<div style="height: 1.00em;">&#x00A0;</div>
As for selecting event types, if you are unsure, we suggest going with
  &quot;*&quot; to select all of them. The client can choose which types of
  messages they want to subscribe to based on hierarchically matching against
  the event type (called a &quot;subject&quot; in AMQP). It is cheap and fast to
  send a message to a broker, making it convenient to fire and forget. Let the
  clients decide which subjects they care about. More about subject matching
  <i>here</i>.
<div style="height: 1.00em;">&#x00A0;</div>
This is an example of creating an AMQP event listener.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin event listener amqp create --event-type='*' --exchange=pulp
Event listener successfully created
<div class="Pp"></div>
[mhrivnak@dhcp-230-147 pulp]$ pulp-admin event listener list
Event Types:       *
Id:                5092d9b3e19a00c58600000c
Notifier Config:
  Exchange: pulp
Notifier Type Id:  amqp
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Event_Types"><a class="selflink" href="#Event_Types">Event
  Types</a></h2>
These are the types of events that can be associated with listeners, and each
  description includes a partial list of the types of data that gets reported.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>repo.publish.start</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Fires when any repository starts a publish
    operation.</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">start time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">repo_id</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">user who initiated the sync</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">task ID</dd>
</dl>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>repo.publish.finish</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Fires when any repository finishes a publish
    operation.</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">start time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">end time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">repo_id</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">task ID</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">success/failure</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">number of items published</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">errors</dd>
</dl>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>repo.sync.start</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Fires when any repository starts a sync
    operation.</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">start time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">repo_id</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">user who initiated the sync</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">task ID</dd>
</dl>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag"><b>repo.sync.finish</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Fires when any repository finishes a sync
    operation.</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">start time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">end time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">repo_id</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">task ID</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">success/failure</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">number of items imported</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">errors</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="NODES"><a class="selflink" href="#NODES">NODES</a></h1>
This guide covers admin client commands for managing <i>Pulp Nodes</i> in the
  Pulp Platform. For an overview, tips, and, troubleshooting, please visit the
  Pulp Nodes Concepts Guide.
<h2 class="Ss" title="Ss" id="Layout"><a class="selflink" href="#Layout">Layout</a></h2>
The root level <b>node</b> section contains the following features.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node --help
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: pulp nodes related commands
<div class="Pp"></div>
Available Sections:
 repo - repository related commands
 sync - child node synchronization commands
<div class="Pp"></div>
Available Commands:
 activate   - activate a consumer as a child node
 bind       - bind a child node to a repository
 deactivate - deactivate a child node
 list       - list child nodes
 unbind     - removes the binding between a child node and a repository
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Listing"><a class="selflink" href="#Listing">Listing</a></h2>
The <b>node list</b> command may be used to list child nodes.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
pulp-admin node list --help
Command: list
Description: list child nodes
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --fields   - comma-separated list of consumer fields; Example:
              &quot;id,display_name&quot;. If specified, only the given fields will be
              displayed.
 --bindings - if specified, the bindings information is displayed
 --details  - if specified, all of the consumer information is displayed
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Activation"><a class="selflink" href="#Activation">Activation</a></h2>
A Pulp server that is registered as a consumer to another Pulp server can be
  designated as a child node. Once activated on the parent server, the consumer
  is recognized as a child node of the parent and can be managed using
  <b>node</b> commands.
<div style="height: 1.00em;">&#x00A0;</div>
To activate a consumer as a child node, use the <b>node activate</b> command.
  More information on <i>node-level</i> synchronization strategies can be found
  here.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node activate --help
Command: activate
Description: activate a consumer as a child node
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --consumer-id - (required) unique identifier; only alphanumeric, -, and _
                 allowed
 --strategy    - synchronization strategy (mirror|additive) default is additive
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
A child node may be deactivated using <b>node deactivate</b> command. Once
  deactivated, the node may no longer be managed using <b>node</b> commands.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node deactivate --help
Command: deactivate
Description: deactivate a child node
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --node-id - (required) unique identifier; only alphanumeric, -, and _ allowed
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Consumer (child node) un-registration will
  automatically deactivate the node. When a node is activated again, it will
  have the same repositories bound to it as it had before deactivation.</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Repositories"><a class="selflink" href="#Repositories">Repositories</a></h2>
The commands provided in the <b>node repo</b> section are used to perform
  <i>Nodes</i> specific management of existing repositories.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node repo --help
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: repository related commands
<div class="Pp"></div>
Available Commands:
 disable - disables binding to a repository by a child node
 enable  - enables binding to a repository by a child node
 list    - list node enabled repositories
 publish - publishing commands
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Listing"><a class="selflink" href="#Listing">Listing</a></h2>
A listing of enabled repositories may be obtained by using the <b>node repo
  list</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node repo list --help
Command: list
Description: list node enabled repositories
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --details - if specified, detailed configuration information is displayed for
             each repository
 --fields  - comma-separated list of repository fields; Example:
             &quot;id,description,display_name,content_unit_counts&quot;. If
             specified, only the given fields will be displayed.
 --all, -a - if specified, information on all Pulp repositories, regardless of
             type, will be displayed
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Enabling"><a class="selflink" href="#Enabling">Enabling</a></h2>
A repository may be enabled using the <b>node repo enable</b> command. More
  information on <i>repository-level</i> synchronization strategies can be found
  here.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node repo enable --help
Command: enable
Description: enables binding to a repository by a child node
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --repo-id      - (required) unique identifier; only alphanumeric, -, and _
                  allowed
 --auto-publish - if &quot;true&quot;, the nodes information will be automatically
                  published each time the repository is synchronized; defaults
                  to &quot;true&quot;
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>WARNING:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Using auto-publish causes the <i>Nodes</i>
  information to be published each time the repository is synchronized. This may
  increase the time it takes to perform the synchronization depending on the
  size of the repository.</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Publishing"><a class="selflink" href="#Publishing">Publishing</a></h2>
Manually publishing the <i>Nodes</i> data necessary for child node
  synchronization, can be triggered using the <b>node repo publish</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node repo publish --help
Command: publish
Description: publishing commands
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --repo-id - (required) unique identifier; only alphanumeric, -, and _ allowed
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Repositories MUST be published for child node
  synchronization to be successful.</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Binding"><a class="selflink" href="#Binding">Binding</a></h2>
The <b>node bind</b> command is used to associate a repository with a child
  node. This association determines which repositories may be synchronized to
  child nodes. The strategy specified here overrides the default strategy
  specified when the repository was enabled. More information on
  <i>repository-level</i> synchronization strategies can be found here.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node bind --help
Command: bind
Description: bind a child node to a repository
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --repo-id  - (required) unique identifier; only alphanumeric, -, and _ allowed
 --node-id  - (required) unique identifier; only alphanumeric, -, and _ allowed
 --strategy - synchronization strategy (mirror|additive) default is additive
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>node unbind</b> command may be used to remove the association between a
  child node and a repository. Once the association is removed, the specified
  repository can no longer be be synchronized to the child node.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node unbind --help
Command: unbind
Description: removes the binding between a child node and a repository
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --repo-id - (required) unique identifier; only alphanumeric, -, and _ allowed
 --node-id - (required) unique identifier; only alphanumeric, -, and _ allowed
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Only activated nodes and enabled repositories
  may be specified.</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Synchronizing"><a class="selflink" href="#Synchronizing">Synchronizing</a></h2>
The synchronization of child nodes may be triggered using the <b>node sync</b>
  commands. More information on node synchronization can be found here.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node sync --help
Usage: pulp-admin [SUB_SECTION, ..] COMMAND
Description: child node synchronization commands
<div class="Pp"></div>
Available Commands:
 run - triggers an immediate synchronization of a child node
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
An immediate synchronization can be triggered using the <b>node sync run</b>
  command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin node sync run --help
Command: run
Description: triggers an immediate synchronization of a child node
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
 --node-id       - (required) unique identifier; only alphanumeric, -, and _ allowed
 --max-downloads - maximum number of downloads permitted to run concurrently
 --max-speed     - maximum bandwidth used per download in bytes/sec
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>WARNING:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Make sure repositories have been
  published.</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="REPOSITORIES"><a class="selflink" href="#REPOSITORIES">REPOSITORIES</a></h1>
This guide covers core features for managing repositories in the Pulp Platform.
  For more detail about how to work with repositories of a specific content
  type, please visit the user guide for that type. Examples will use
  &quot;rpm&quot; as the demo type when necessary, but they will be limited to
  generic features.
<h2 class="Ss" title="Ss" id="Layout"><a class="selflink" href="#Layout">Layout</a></h2>
The root level <b>repo</b> section contains the following features. These
  features apply across all repositories, regardless of the specific types of
  content they will support.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo --help
Usage: pulp-admin repo [SUB_SECTION, ..] COMMAND
Description: list repositories and manage repo groups
<div class="Pp"></div>
Available Sections:
  group   - repository group commands
  history - show sync and publish history
  tasks   - list and cancel tasks related to a specific repository
<div class="Pp"></div>
Available Commands:
  download - queues a full download of all missing units in a repository that is using a
             &quot;background&quot; or &quot;on_demand&quot; download policy.
  list     - lists repositories on the Pulp server
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
By comparison, many other features are implemented under a root-level section
  named for a content type. For example, the RPM repo section looks like this:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo --help
Usage: pulp-admin repo [SUB_SECTION, ..] COMMAND
Description: repository lifecycle commands
<div class="Pp"></div>
Available Sections:
  content - search the contents of a repository
  copy    - copies one or more content units between repositories
  export  - run or view the status of a repository export
  group   - repository group commands
  publish - run or view the status of publish tasks
  remove  - remove modules from a repository
  sync    - run, schedule, or view the status of sync tasks
  uploads - upload modules into a repository
<div class="Pp"></div>
Available Commands:
  create - creates a new repository
  delete - deletes a repository
  list   - lists repositories on the Pulp server
  search - searches for repositories on the server
  update - changes metadata on an existing repository
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The reason for putting repository commands in different places is that some
  features will be customized and augmented by plugins, such that their versions
  of common commands will only be applicable to their own content. Commands that
  can operate on all repositories go in the generic &quot;repo&quot; section.
<h2 class="Ss" title="Ss" id="Create,_Update,_Delete"><a class="selflink" href="#Create,_Update,_Delete">Create,
  Update, Delete</a></h2>
To create a repository, the only required argument is a unique ID. Consult the
  help text for the create command of each particular repository type to see
  what other options are available.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo create --repo-id=foo
Successfully created repository [foo]
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>update</b> command takes similar arguments to the <b>create</b> command.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo update --repo-id=foo --display-name='Foo Repo'
Repository [foo] successfully updated
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The new repository can be seen with its unique ID and display name.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo list
+----------------------------------------------------------------------+
                            RPM Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                 foo
Display Name:       Foo Repo
Description:        None
Content Unit Count: 0
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Deleting a repository is an asynchronous operation. In case other tasks are
  already in progress on this repository, the server will allow those tasks to
  complete before executing the deletion. The example below shows how to request
  deletion and then check the status of that task.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo delete --repo-id=foo
The request to delete repository [foo] has been received by the server. The
progress of the task can be viewed using the commands under &quot;repo tasks&quot;
<div class="Pp"></div>
$ pulp-admin repo tasks list --repo-id=foo
+----------------------------------------------------------------------+
                                 Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Operations:  delete
Resources:   foo (repository)
State:       Successful
Start Time:  2012-12-17T23:17:46Z
Finish Time: 2012-12-17T23:17:46Z
Result:      N/A
Task Id:     2d4fc3da-7ad7-448c-a9dd-78e79f71ef2f
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="List"><a class="selflink" href="#List">List</a></h2>
This command lists all repositories in Pulp, regardless of their content type.
  To list and search repositories only of a particular type, go to that type's
  area of the CLI, such as <b>pulp-admin rpm repo list</b>. (For more detailed
  output use '--details' option).
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo list
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                 pulp
Display Name:       Pulp
Description:        Pulp's stable repository
Content Unit Count: 39
<div class="Pp"></div>
Id:                 repo1
Display Name:       repo1
Description:        None
Content Unit Count: 0
<div class="Pp"></div>
Id:                 repo2
Display Name:       repo2
Description:        None
Content Unit Count: 0
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Also there is possibility to list information with and without details about one
  specific repo.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
pulp-admin repo list --repo-id iso-test
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                   iso-test
Display Name:         iso-test
Description:          None
Content Unit Counts:
<div class="Pp"></div>
<div class="Pp"></div>
pulp-admin repo list --repo-id iso-test --details
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                   iso-test
Display Name:         iso-test
Description:          None
Content Unit Counts:
Notes:
Importers:
  Config:
  Id:           iso_importer
  Importer Type Id: iso_importer
  Last Sync:        None
  Repo Id:          iso-test
  Scheduled Syncs:
Distributors:
  Auto Publish:        True
  Config:
  Distributor Type Id: iso_distributor
  Id:                  iso_distributor
  Last Publish:        None
  Repo Id:             iso-test
  Scheduled Publishes:
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Search"><a class="selflink" href="#Search">Search</a></h2>
For more targeted results than the <b>list</b> command provides, you can use
  Pulp's criteria search feature to search repositories. For example, to find a
  specific RPM repository that has id 'zoo':
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
pulp-admin rpm repo search --str-eq=&quot;id=zoo&quot;
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                  zoo
Display Name:        zoo-repo
Description:         None
Content Unit Counts:
  Erratum:          4
  Package Category: 1
  Package Group:    2
  Rpm:              32
Last Unit Added:     2014-11-14T13:02:47Z
Last Unit Removed:   None
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Content_Search"><a class="selflink" href="#Content_Search">Content
  Search</a></h2>
Content units can be searched within a repository using Pulp's criteria search
  feature. The layout of this command may vary based on the content type; for
  example, RPM support includes a separate command for each package type (rpm,
  srpm, etc.). Here is an example of searching for an rpm package by name. The
  <b>--repo-id</b> argument is required, and the <b>--match</b> argument applies
  a regular expression.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo content rpm --repo-id=pulp --match 'name=^python-w.+'
Arch:         noarch
Buildhost:    localhost
Checksum:     edfbe47f61a64c2196720e8ab1eb66c696303f89080fbe950444b9384bcfd2ee
Checksumtype: sha256
Description:  web.py is a web framework for python that is as simple as it is
              powerful. web.py is in the public domain; you can use it for
              whatever purpose with absolutely no restrictions.
Epoch:        0
Filename:     python-webpy-0.32-9.fc17.noarch.rpm
License:      Public Domain and BSD
Name:         python-webpy
Provides:     [[u'python-webpy', u'EQ', [u'0', u'0.32', u'9.fc17']]]
Release:      9.fc17
Requires:     [[u'python(abi)', u'EQ', [u'0', u'2.7', None]]]
Vendor:
Version:      0.32
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Copy_Between_Repositories"><a class="selflink" href="#Copy_Between_Repositories">Copy
  Between Repositories</a></h2>
Content units can be copied from one repository to another using Pulp's criteria
  search. For content units that involve an on-disk file (such as RPMs having a
  package stored on disk), the file is only stored once even if it is included
  in multiple Pulp repositories.
<div style="height: 1.00em;">&#x00A0;</div>
The following example assumes that the repository &quot;foo&quot; has some
  content units and that we want to copy all of them to the repository
  &quot;bar&quot;.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo copy rpm --from-repo-id=foo --to-repo-id=bar
Progress on this task can be viewed using the commands under &quot;repo tasks&quot;.
<div class="Pp"></div>
$ pulp-admin repo tasks list --repo-id=foo
+----------------------------------------------------------------------+
                                 Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Operations:  associate
Resources:   bar (repository), foo (repository)
State:       Successful
Start Time:  2012-12-17T23:27:12Z
Finish Time: 2012-12-17T23:27:13Z
Result:      N/A
Task Id:     8c3a6964-245f-4fe5-9d7c-8c6bac55cffb
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The copy was successful. Here you can see that the repository &quot;bar&quot;
  now has the same number of content units as &quot;foo&quot;.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin rpm repo list
+----------------------------------------------------------------------+
                            RPM Repositories
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:                 foo
Display Name:       foo
Description:        None
Content Unit Count: 36
<div class="Pp"></div>
Id:                 bar
Display Name:       bar
Description:        None
Content Unit Count: 36
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Groups"><a class="selflink" href="#Groups">Groups</a></h2>
Repository Groups allow you to associate any number of repositories, even of
  varying content types, with a named group. Features that make use of
  repository groups are forthcoming in future releases of Pulp.
<div style="height: 1.00em;">&#x00A0;</div>
Here is an example of creating a repo group and adding members to it:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo group create --group-id='group1' --description='misc. repos' --display-name='Group 1'
Repository Group [group1] successfully created
<div class="Pp"></div>
$ pulp-admin repo group members add --group-id=group1 --str-eq='id=repo1'
Successfully added members to repository group [group1]
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>members add</b> command takes advantage of Pulp's criteria search
  feature, so you can add many repositories at once. In this case, we provided a
  specific repository name. Let's look at the result of these two commands by
  listing the repository groups.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo group list
+----------------------------------------------------------------------+
                           Repository Groups
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           group1
Display Name: Group 1
Description:  misc. repos
Repo Ids:     repo1
Notes:
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Notice that &quot;repo1&quot; shows up in the &quot;Repo Ids&quot; field.
<h2 class="Ss" title="Ss" id="Tasks"><a class="selflink" href="#Tasks">Tasks</a></h2>
Some operations on repositories, such as <b>sync</b>, <b>publish</b>, and
  <b>delete</b>, may operate asynchronously. When you execute these operations,
  Pulp will give you a &quot;task ID&quot;. You can use that task ID to check
  the status of the operation. From this section of the CLI, you can
  <b>cancel</b>, <b>list</b>, and get <b>details</b> about repository tasks.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin repo tasks --help
Usage: pulp-admin tasks [SUB_SECTION, ..] COMMAND
Description: list and cancel tasks related to a specific repository
<div class="Pp"></div>
Available Commands:
  cancel  - cancel one or more tasks
  details - displays more detailed information about a specific task
  list    - lists tasks queued (waiting) or running on the server
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="ORPHANED_CONTENT_UNITS"><a class="selflink" href="#ORPHANED_CONTENT_UNITS">ORPHANED
  CONTENT UNITS</a></h1>
<h2 class="Ss" title="Ss" id="Introduction"><a class="selflink" href="#Introduction">Introduction</a></h2>
Repositories are the container into which content is drawn into Pulp and by
  which Pulp serves content. However, under the hood, Pulp actually manages
  content separately from repositories. This allows Pulp to minimize disk space
  by never duplicating content that is shared between repositories (i.e. content
  units that appear in more than one repository).
<div style="height: 1.00em;">&#x00A0;</div>
The consequence of this approach is that when a repository is deleted from the
  Pulp server, the content associated with that repository is not. Content units
  that are no longer associated with any repositories are referred to as
  <b>orphaned content units</b> or simply <b>orphans</b>.
<div style="height: 1.00em;">&#x00A0;</div>
This page describes the management of orphaned content units.
<h2 class="Ss" title="Ss" id="Listing_Orphaned_Content_Units"><a class="selflink" href="#Listing_Orphaned_Content_Units">Listing
  Orphaned Content Units</a></h2>
The <b>pulp-admin</b> command line client provides the <b>orphan</b> section and
  the <b>list</b> command to inspect the orphaned content units on your server:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin orphan list --type=rpm --details
Arch:          noarch
Checksum:      7e9cad8b2cd436079fd524803ec7fa209a666ecdda05c6f9c8c5ee70cdea9ce6
Checksumtype:  sha256
Epoch:         0
Id:            a0079ca2-1d4f-4d01-8307-3f183f1843a6
Name:          tito
Release:       1.fc16
Version:       0.4.9
<div class="Pp"></div>
+----------------------------------------------------------------------+
                                Summary
+----------------------------------------------------------------------+
<div class="Pp"></div>
RPM:    1
Total:  1
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
You can filter the list by content type by using the <b>--type=&lt;type&gt;</b>
  flag.
<div style="height: 1.00em;">&#x00A0;</div>
You can use the <b>--details</b> flag to list the individual orphaned content
  units. Otherwise only the <b>Summary</b> section is displayed. This flag is
  not available when the content type is omitted, and will be ignored if
  specified.
<h2 class="Ss" title="Ss" id="Removing_Orphaned_Content_Units"><a class="selflink" href="#Removing_Orphaned_Content_Units">Removing
  Orphaned Content Units</a></h2>
The <b>pulp-admin</b> command line client provides the <b>orphan</b> section and
  <b>remove</b> command to remove orphaned content units from your server.
<div style="height: 1.00em;">&#x00A0;</div>
It has three flags:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>--type=&lt;type&gt;</b> to remove all the orphaned
      content units of a particular type</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>--id=&lt;id&gt;</b> to remove a particular orphaned
      content unit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>--all</b> to remove all the orphaned content units on
      the server</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin orphan remove --all
Request accepted
<div class="Pp"></div>
check status of task e239ae4f-7fad-4004-bfb6-8e06f17d22ef with &quot;pulp-admin tasks details&quot;
<div class="Pp"></div>
$ pulp-admin tasks details --task-id e239ae4f-7fad-4004-bfb6-8e06f17d22ef
+----------------------------------------------------------------------+
                              Task Details
+----------------------------------------------------------------------+
<div class="Pp"></div>
Operations:
Resources:    orphans (content_unit)
State:        Successful
Start Time:   2012-12-09T03:26:51Z
Finish Time:  2012-12-09T03:26:51Z
Result:
  Erratum:          4
  Package Category: 1
  Package Group:    2
  Rpm:              32
Task Id:      e239ae4f-7fad-4004-bfb6-8e06f17d22ef
Progress:
<div class="Pp"></div>
$ pulp-admin orphan list
$
</pre>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="INSPECTING_THE_SERVER"><a class="selflink" href="#INSPECTING_THE_SERVER">INSPECTING
  THE SERVER</a></h1>
<h2 class="Ss" title="Ss" id="Pulp_as_a_Platform"><a class="selflink" href="#Pulp_as_a_Platform">Pulp
  as a Platform</a></h2>
The Pulp server has very little built in functionality. To provide the
  functionality that administrators rely on, Pulp loads a number of plugins that
  define <b>types</b> and <b>importers</b> and <b>distributors</b>. The former
  are definitions of categories of content units and the metadata that needs to
  be associated with them. The latter two are classes of plugins that allow Pulp
  to manage content units, of particular types, by bring them into the server
  and making them available from the server respectively.
<div style="height: 1.00em;">&#x00A0;</div>
This page shows how to query the server for each of these classes of plugins.
<h2 class="Ss" title="Ss" id="Content_Unit_Types"><a class="selflink" href="#Content_Unit_Types">Content
  Unit Types</a></h2>
The <b>pulp-admin</b> command line client provides the <b>server</b> section and
  the <b>types</b> command to query the server about the content unit type
  definitions that have been loaded.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin server types
+----------------------------------------------------------------------+
                        Supported Content Types
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:               distribution
Display Name:     Distribution
Description:      Kickstart trees and all accompanying files
Referenced Types:
Search Indexes:   id, family, variant, version, arch
Unit Key:         id, family, variant, version, arch
<div class="Pp"></div>
[snip]
<div class="Pp"></div>
Id:               rpm
Display Name:     RPM
Description:      RPM
Referenced Types: erratum
Search Indexes:   name, epoch, version, release, arch, filename, checksum,
                  checksumtype
Unit Key:         name, epoch, version, release, arch, checksumtype, checksum
<div class="Pp"></div>
[snip]
<div class="Pp"></div>
Id:               puppet_module
Display Name:     Puppet Module
Description:      Puppet Module
Referenced Types:
Search Indexes:   author, tag_list
Unit Key:         name, version, author
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The output above shows a snippet of the types that are defined by the default
  plugins that have been developed with the Pulp server. Each type has the
  following fields:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Id</b>: this is a programmatic id that the server uses
      to identify the type</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Display Name</b>: an optional, human-friendly, display
      name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Description</b>: an optional description of the
    type</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Referenced Types</b>: a list of other types that may be
      referenced by a content unit of this type in some way</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Search Indexes</b>: metadata fields that can potentially
      be used as search criteria</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Unit Key</b>: a metadata field, or set of fields, that
      will uniquely identify a content unit of this type</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Content_Unit_Importers"><a class="selflink" href="#Content_Unit_Importers">Content
  Unit Importers</a></h2>
The <b>pulp-admin</b> command line client provides the <b>server</b> section and
  the <b>importers</b> command to query the server about the importer plugins
  that have been loaded.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin server importers
+----------------------------------------------------------------------+
                          Supported Importers
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           puppet_importer
Display Name: Puppet Importer
Types:        puppet_module
<div class="Pp"></div>
Id:           yum_importer
Display Name: Yum Importer
Types:        distribution, drpm, erratum, package_group, package_category, rpm,
              srpm
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The output above shows the importers that have been developed along side the
  Pulp platform. Each importer has the following fields:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Id</b>: a programmatic id that the server uses to
      identify the importer</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Display Name</b>: an optional, human-friendly, display
      name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Types</b>: a list of type ids that the importer can
      handle</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Content_Unit_Distributors"><a class="selflink" href="#Content_Unit_Distributors">Content
  Unit Distributors</a></h2>
The <b>pulp-admin</b> command line client provides the <b>server</b> section and
  the <b>distributors</b> command to query the server about the distributor
  plugins that have been loaded.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin server distributors
+----------------------------------------------------------------------+
                         Supported Distributors
+----------------------------------------------------------------------+
<div class="Pp"></div>
Id:           yum_distributor
Display Name: Yum Distributor
Types:        rpm, srpm, drpm, erratum, distribution, package_category,
              package_group
<div class="Pp"></div>
Id:           export_distributor
Display Name: Export Distributor
Types:        rpm, srpm, drpm, erratum, distribution, package_category,
              package_group
<div class="Pp"></div>
Id:           puppet_distributor
Display Name: Puppet Distributor
Types:        puppet_module
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The output above shows the distributors that have been developed along side the
  Pulp platform. Each distributor has the following fields:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Id</b>: a programmatic id that the server uses to
      identify the distributor</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Display Name</b>: an optional, human-friendly, display
      name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Types</b>: a list of type ids that the distributor can
      handle</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="TASKS"><a class="selflink" href="#TASKS">TASKS</a></h1>
<h2 class="Ss" title="Ss" id="Introduction"><a class="selflink" href="#Introduction">Introduction</a></h2>
The Pulp server uses <i>Celery</i> to handle requests that may take longer than
  a HTTP request timeout to execute. Many of the commands from the
  <b>pulp-admin</b> command line client will return messages along the lines of
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
Request accepted
<div class="Pp"></div>
check status of task e239ae4f-7fad-4004-bfb6-8e06f17d22ef with &quot;pulp-admin tasks details&quot;
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
This means the server's REST API returned a 202 ACCEPTED response with the task
  information for the task that is handling the request.
<div style="height: 1.00em;">&#x00A0;</div>
This page details querying and managing these tasks.
<h2 class="Ss" title="Ss" id="Details"><a class="selflink" href="#Details">Details</a></h2>
The <b>pulp-admin</b> command line client provides the <b>tasks</b> section and
  the <b>details</b> command to inspect the runtime details of a task,
  identified with the required <b>--task-id=&lt;id&gt;</b> flag.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin tasks details --task-id e239ae4f-7fad-4004-bfb6-8e06f17d22ef
+----------------------------------------------------------------------+
                              Task Details
+----------------------------------------------------------------------+
<div class="Pp"></div>
Operations:
Resources:    orphans (content_unit)
State:        Successful
Start Time:   2012-12-09T03:26:51Z
Finish Time:  2012-12-09T03:26:51Z
Result:       N/A
Task Id:      e239ae4f-7fad-4004-bfb6-8e06f17d22ef
Progress:
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
In the output above there are several sections:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Operations</i>: a list of operations that are being
      performed by this task</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Resources</i>: a list of resources that are being
      operated on</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>State</i>: the state of the task, such as: Waiting,
      Running, Successful or Error</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Start Time</i>: the UTC time the task started</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Finish Time</i>: the UTC time the task finished</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Result</i>: the reported result of the task, if any</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Task Id</i>: a unique identifier for the task (as a
      UUID)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>Progress</i>: arbitrary progress information provided by
      the task, if any</dd>
</dl>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Listing"><a class="selflink" href="#Listing">Listing</a></h2>
To see all the tasks on the server at any given time, the <b>pulp-admin</b>
  command line client provides the <b>tasks</b> section and the <b>list</b>
  command.
<div style="height: 1.00em;">&#x00A0;</div>
It provides all the same information as the <b>details</b> command, but for
  every task that has been executed on the pulp server. The length of history
  depends on the settings described below.
<div style="height: 1.00em;">&#x00A0;</div>
In addition to tasks launched using pulp-admin or the API , <b>reaper</b> and
  <b>monthly</b> tasks appear in the list.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>reaper</b> task is responsible for cleaning up the database on a
  regularly scheduled interval. The interval is configured with
  <b>reaper_interval</b> in <b>[data_reaping]</b> section of
  <b>/etc/pulp/server.conf</b>. The value can be whole or fraction of days. The
  length of time to keep documents for each collection is also configured in the
  same section. <b>task_status_history</b>, <b>consumer_history</b>,
  <b>repo_sync_history</b>, <b>repo_publish_history</b>,
  <b>repo_group_publish_history</b>, and <b>task_result_history</b> take values
  of whole or fraction of days to keep that type of history. This database
  cleanup is needed because these transactions can occur very frequently and as
  result the database can grow to an unreasonable size.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>monthly</b> task is run every 30 days to clean up data referencing any
  repositories that no longer exist.
<h2 class="Ss" title="Ss" id="Purging"><a class="selflink" href="#Purging">Purging</a></h2>
To purge the completed tasks on the server at any given time, the
  <b>pulp-admin</b> command line client provides the <b>tasks</b> section and
  the <b>purge</b> command.
<div style="height: 1.00em;">&#x00A0;</div>
By giving a <b>--all</b> flag, the tasks in <b>successful</b>, <b>failed</b> and
  <b>skipped</b> state will be purged.
<div style="height: 1.00em;">&#x00A0;</div>
By giving a <b>--state</b> flag, specific states can be passed as an argument
  and all the tasks belonging to these states will be purged. These states must
  be from the completed state list(except <b>canceled</b>) or the command will
  result in error message.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin tasks purge
+----------------------------------------------------------------------+
                         Purge Completed Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Command: purge
Description: purge tasks in one or more completed states
<div class="Pp"></div>
Available Arguments:
<div class="Pp"></div>
  --all, -a   - if specified, all tasks in &quot;successful, skipped and failed states
                will be purged
  --state, -s - comma-separated list of tasks states desired to be purged.
                Example: &quot;successful,failed&quot;. Do not include spaces.
<div class="Pp"></div>
$ pulp-admin tasks purge --all
+----------------------------------------------------------------------+
                         Purge Completed Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Task purging is successfully initiated.
<div class="Pp"></div>
$ pulp-admin tasks purge -s successful,failed
+----------------------------------------------------------------------+
                         Purge Completed Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Task purging is successfully initiated.
<div class="Pp"></div>
$ pulp-admin tasks purge -s canceled
+----------------------------------------------------------------------+
                         Purge Completed Tasks
+----------------------------------------------------------------------+
<div class="Pp"></div>
Invalid task state passed to parameters list: canceled.
</pre>
</div>
<br/>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Canceling_a_Task"><a class="selflink" href="#Canceling_a_Task">Canceling
  a Task</a></h2>
Tasks may be canceled before they are run (i.e. in the waiting state) or while
  they are running.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>pulp-admin</b> command line client provides the <b>tasks</b> section and
  the <b>cancel</b> command to cancel a task identified by the required
  <b>--task-id</b> flag.
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ pulp-admin tasks cancel --task-id e0e0a250-eded-468f-9d97-0419a00b130f
<div class="Pp"></div>
$ pulp-admin tasks details --task-id e0e0a250-eded-468f-9d97-0419a00b130f
+----------------------------------------------------------------------+
                              Task Details
+----------------------------------------------------------------------+
<div class="Pp"></div>
Operations:   sync
Resources:    ff7-e6 (repository)
State:        Canceled
Start Time:   2012-12-09T04:28:10Z
Finish Time:  2012-12-09T04:29:09Z
Result:       N/A
Task Id:      e0e0a250-eded-468f-9d97-0419a00b130f
Progress:
  Yum Importer:
    Comps:
      State: NOT_STARTED
    Content:
      Details:
        Delta Rpm:
          Items Left:  0
          Items Total: 0
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
        File:
          Items Left:  0
          Items Total: 0
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
        Rpm:
          Items Left:  6
          Items Total: 37
          Num Error:   0
          Num Success: 31
          Size Left:   112429996
          Size Total:  149958122
        Tree File:
          Items Left:  0
          Items Total: 0
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
      Error Details:
      Items Left:    0
      Items Total:   37
      Num Error:     0
      Num Success:   31
      Size Left:     112429996
      Size Total:    149958122
      State:         CANCELED
    Errata:
      State: NOT_STARTED
    Metadata:
      State: FINISHED
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>NOTE:</b>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">It is possible for tasks to complete or
  experience an error before the task cancellation request is processed. In
  these instances, the task's final state might not be &quot;canceled&quot; even
  though a cancel was requested.</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Pulp Team
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2012-2017, Pulp Team</div>
<table class="foot">
  <tr>
    <td class="foot-date">July 13, 2017</td>
    <td class="foot-os">2.12.2</td>
  </tr>
</table>
</body>
</html>
