<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>YACC(1POSIX)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">YACC(1POSIX)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">YACC(1POSIX)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
yacc &#x2014; yet another compiler compiler ( <b>DEVELOPMENT</b>)
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
yacc  <b>[</b>&#x2212;dltv<b>] [</b>&#x2212;b <i>file_prefix</i><b>] [</b>&#x2212;p <i>sym_prefix</i><b>]</b><i> grammar</i>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>yacc</i> utility shall read a description of a context-free grammar in
  <i>grammar</i> and write C source code, conforming to the ISO&#x00A0;C
  standard, to a code file, and optionally header information into a header
  file, in the current directory. The generated source code shall not depend on
  any undefined, unspecified, or implementation-defined behavior, except in
  cases where it is copied directly from the supplied grammar, or in cases that
  are documented by the implementation. The C code shall define a function and
  related routines and macros for an automaton that executes a parsing algorithm
  meeting the requirements in <i>Algorithms</i>.
<div class="Pp"></div>
The form and meaning of the grammar are described in the EXTENDED DESCRIPTION
  section.
<div class="Pp"></div>
The C source code and header file shall be produced in a form suitable as input
  for the C compiler (see <i><i>c99</i></i>).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <i>yacc</i> utility shall conform to the Base Definitions volume of
  POSIX.1&#x2010;2008, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>,
  except for Guideline 9.
<div class="Pp"></div>
The following options shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;b&#x00A0;</b><i>file_prefix</i></dt>
  <dd class="It-tag">Use <i>file_prefix</i> instead of <b>y</b> as the prefix
      for all output filenames. The code file <b>y.tab.c</b>, the header file
      <b>y.tab.h</b> (created when <b>&#x2212;d</b> is specified), and the
      description file <b>y.output</b> (created when <b>&#x2212;v</b> is
      specified), shall be changed to <i>file_prefix</i><b>.tab.c</b>,
      <i>file_prefix</i><b>.tab.h</b>, and <i>file_prefix</i><b>.output</b>,
      respectively.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;d</b></dt>
  <dd class="It-tag">Write the header file; by default only the code file is
      written. The <b>#define</b> statements associate the token codes assigned
      by <i>yacc</i> with the user-declared token names. This allows source
      files other than <b>y.tab.c</b> to access the token codes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;l</b></dt>
  <dd class="It-tag">Produce a code file that does not contain any <b>#line</b>
      constructs. If this option is not present, it is unspecified whether the
      code file or header file contains <b>#line</b> directives. This should
      only be used after the grammar and the associated actions are fully
      debugged.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;p&#x00A0;</b><i>sym_prefix</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use <i>sym_prefix</i> instead of <b>yy</b> as the prefix for all external
      names produced by <i>yacc</i>. The names affected shall include the
      functions <i>yyparse</i>(), <i>yylex</i>(), and <i>yyerror</i>(), and the
      variables <i>yylval</i>, <i>yychar</i>, and <i>yydebug</i>. (In the
      remainder of this section, the six symbols cited are referenced using
      their default names only as a notational convenience.) Local names may
      also be affected by the <b>&#x2212;p</b> option; however, the
      <b>&#x2212;p</b> option shall not affect <b>#define</b> symbols generated
      by <i>yacc</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;t</b></dt>
  <dd class="It-tag">Modify conditional compilation directives to permit
      compilation of debugging code in the code file. Runtime debugging
      statements shall always be contained in the code file, but by default
      conditional compilation directives prevent their compilation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;v</b></dt>
  <dd class="It-tag">Write a file containing a description of the parser and a
      report of conflicts generated by ambiguities in the grammar.
    <div>&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The following operand is required:
<dl class="Bl-tag">
  <dt class="It-tag"><i>grammar</i></dt>
  <dd class="It-tag">A pathname of a file containing instructions, hereafter
      called <i>grammar</i>, for which a parser is to be created. The format for
      the grammar is described in the EXTENDED DESCRIPTION section.</dd>
</dl>
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
Not used.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
The file <i>grammar</i> shall be a text file formatted as specified in the
  EXTENDED DESCRIPTION section.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>yacc</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      POSIX.1&#x2010;2008, <i>Section 8.2</i>, <i>Internationalization
      Variables</i> for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments and input files).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i>.</dd>
</dl>
<div class="Pp"></div>
The <i>LANG</i> and <i>LC_*</i> variables affect the execution of the
  <i>yacc</i> utility as stated. The <i>main</i>() function defined in <i>Yacc
  Library</i> shall call:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>setlocale(LC_ALL, &quot;&quot;)</b>
</pre>
</div>
<div class="Pp"></div>
and thus the program generated by <i>yacc</i> shall also be affected by the
  contents of these variables at runtime.
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
Not used.
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
If shift/reduce or reduce/reduce conflicts are detected in <i>grammar</i>,
  <i>yacc</i> shall write a report of those conflicts to the standard error in
  an unspecified format.
<div class="Pp"></div>
Standard error shall also be used for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
The code file, the header file, and the description file shall be text files.
  All are described in the following sections.
<h2 class="Ss" title="Ss" id="Code_File"><a class="selflink" href="#Code_File">Code
  File</a></h2>
This file shall contain the C source code for the <i>yyparse</i>() function. It
  shall contain code for the various semantic actions with macro substitution
  performed on them as described in the EXTENDED DESCRIPTION section. It also
  shall contain a copy of the <b>#define</b> statements in the header file. If a
  <b>%union</b> declaration is used, the declaration for YYSTYPE shall also be
  included in this file.
<h2 class="Ss" title="Ss" id="Header_File"><a class="selflink" href="#Header_File">Header
  File</a></h2>
The header file shall contain <b>#define</b> statements that associate the token
  numbers with the token names. This allows source files other than the code
  file to access the token codes. If a <b>%union</b> declaration is used, the
  declaration for YYSTYPE and an <i>extern YYSTYPE yylval</i> declaration shall
  also be included in this file.
<h2 class="Ss" title="Ss" id="Description_File"><a class="selflink" href="#Description_File">Description
  File</a></h2>
The description file shall be a text file containing a description of the state
  machine corresponding to the parser, using an unspecified format. Limits for
  internal tables (see <i>Limits</i>) shall also be reported, in an
  implementation-defined manner. (Some implementations may use dynamic
  allocation techniques and have no specific limit values to report.)
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
The <i>yacc</i> command accepts a language that is used to define a grammar for
  a target language to be parsed by the tables and code generated by
  <i>yacc</i>. The language accepted by <i>yacc</i> as a grammar for the target
  language is described below using the <i>yacc</i> input language itself.
<div class="Pp"></div>
The input <i>grammar</i> includes rules describing the input structure of the
  target language and code to be invoked when these rules are recognized to
  provide the associated semantic action. The code to be executed shall appear
  as bodies of text that are intended to be C-language code. These bodies of
  text shall not contain C-language trigraphs. The C-language inclusions are
  presumed to form a correct function when processed by <i>yacc</i> into its
  output files. The code included in this way shall be executed during the
  recognition of the target language.
<div class="Pp"></div>
Given a grammar, the <i>yacc</i> utility generates the files described in the
  OUTPUT FILES section. The code file can be compiled and linked using
  <i>c99</i>. If the declaration and programs sections of the grammar file did
  not include definitions of <i>main</i>(), <i>yylex</i>(), and
  <i>yyerror</i>(), the compiled output requires linking with externally
  supplied versions of those functions. Default versions of <i>main</i>() and
  <i>yyerror</i>() are supplied in the <i>yacc</i> library and can be linked in
  by using the <b>&#x2212;l&#x00A0;y</b> operand to <i>c99</i>. The <i>yacc</i>
  library interfaces need not support interfaces with other than the default
  <b>yy</b> symbol prefix. The application provides the lexical analyzer
  function, <i>yylex</i>(); the <i>lex</i> utility is specifically designed to
  generate such a routine.
<h2 class="Ss" title="Ss" id="Input_Language"><a class="selflink" href="#Input_Language">Input
  Language</a></h2>
The application shall ensure that every specification file consists of three
  sections in order: <i>declarations</i>, <i>grammar rules</i>, and
  <i>programs</i>, separated by double &lt;percent-sign&gt; characters
  (<b>&quot;%%&quot;</b>). The declarations and programs sections can be empty.
  If the latter is empty, the preceding <b>&quot;%%&quot;</b> mark separating it
  from the rules section can be omitted.
<div class="Pp"></div>
The input is free form text following the structure of the grammar defined
  below.
<h2 class="Ss" title="Ss" id="Lexical_Structure_of_the_Grammar"><a class="selflink" href="#Lexical_Structure_of_the_Grammar">Lexical
  Structure of the Grammar</a></h2>
The &lt;blank&gt;, &lt;newline&gt;, and &lt;form-feed&gt; character shall be
  ignored, except that the application shall ensure that they do not appear in
  names or multi-character reserved symbols. Comments shall be enclosed in
  <b>&quot;/*&#x00A0;...&#x00A0;*/&quot;</b>, and can appear wherever a name is
  valid.
<div class="Pp"></div>
Names are of arbitrary length, made up of letters, periods (<b>'.'</b>),
  underscores (<b>'_'</b>), and non-initial digits. Uppercase and lowercase
  letters are distinct. Conforming applications shall not use names beginning in
  <b>yy</b> or <b>YY</b> since the <i>yacc</i> parser uses such names. Many of
  the names appear in the final output of <i>yacc</i>, and thus they should be
  chosen to conform with any additional rules created by the C compiler to be
  used. In particular they appear in <b>#define</b> statements.
<div class="Pp"></div>
A literal shall consist of a single character enclosed in single-quote
  characters. All of the escape sequences supported for character constants by
  the ISO&#x00A0;C standard shall be supported by <i>yacc</i>.
<div class="Pp"></div>
The relationship with the lexical analyzer is discussed in detail below.
<div class="Pp"></div>
The application shall ensure that the NUL character is not used in grammar rules
  or literals.
<h2 class="Ss" title="Ss" id="Declarations_Section"><a class="selflink" href="#Declarations_Section">Declarations
  Section</a></h2>
The declarations section is used to define the symbols used to define the target
  language and their relationship with each other. In particular, much of the
  additional information required to resolve ambiguities in the context-free
  grammar for the target language is provided here.
<div class="Pp"></div>
Usually <i>yacc</i> assigns the relationship between the symbolic names it
  generates and their underlying numeric value. The declarations section makes
  it possible to control the assignment of these values.
<div class="Pp"></div>
It is also possible to keep semantic information associated with the tokens
  currently on the parse stack in a user-defined C-language <b>union</b>, if the
  members of the union are associated with the various names in the grammar. The
  declarations section provides for this as well.
<div class="Pp"></div>
The first group of declarators below all take a list of names as arguments. That
  list can optionally be preceded by the name of a C union member (called a
  <i>tag</i> below) appearing within <b>'&lt;'</b> and <b>'&gt;'</b>. (As an
  exception to the typographical conventions of the rest of this volume of
  POSIX.1&#x2010;2008, in this case &lt; <i>tag</i>&gt; does not represent a
  metavariable, but the literal angle bracket characters surrounding a symbol.)
  The use of <i>tag</i> specifies that the tokens named on this line shall be of
  the same C type as the union member referenced by <i>tag</i>. This is
  discussed in more detail below.
<div class="Pp"></div>
For lists used to define tokens, the first appearance of a given token can be
  followed by a positive integer (as a string of decimal digits). If this is
  done, the underlying value assigned to it for lexical purposes shall be taken
  to be that number.
<div class="Pp"></div>
The following declares <i>name</i> to be a token:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%token </b><b>[</b>&lt;<i>tag</i>&gt;<b>] </b><i>name </i><b>[</b><i>number</i><b>] [</b><i>name </i><b>[</b><i>number</i><b>]]</b>...
</pre>
</div>
<div class="Pp"></div>
If <i>tag</i> is present, the C type for all tokens on this line shall be
  declared to be the type referenced by <i>tag</i>. If a positive integer,
  <i>number</i>, follows a <i>name</i>, that value shall be assigned to the
  token.
<div class="Pp"></div>
The following declares <i>name</i> to be a token, and assigns precedence to it:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%left </b><b>[</b>&lt;<i>tag</i>&gt;<b>] </b><i>name </i><b>[</b><i>number</i><b>] [</b><i>name </i><b>[</b><i>number</i><b>]]</b>...
%right  <b>[</b>&lt;<i>tag</i>&gt;<b>] </b><i>name </i><b>[</b><i>number</i><b>] [</b><i>name </i><b>[</b><i>number</i><b>]]</b>...
</pre>
</div>
<div class="Pp"></div>
One or more lines, each beginning with one of these symbols, can appear in this
  section. All tokens on the same line have the same precedence level and
  associativity; the lines are in order of increasing precedence or binding
  strength. <b>%left</b> denotes that the operators on that line are left
  associative, and <b>%right</b> similarly denotes right associative operators.
  If <i>tag</i> is present, it shall declare a C type for <i>name</i>s as
  described for <b>%token</b>.
<div class="Pp"></div>
The following declares <i>name</i> to be a token, and indicates that this cannot
  be used associatively:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%nonassoc </b><b>[</b>&lt;<i>tag</i>&gt;<b>] </b><i>name </i><b>[</b><i>number</i><b>] [</b><i>name </i><b>[</b><i>number</i><b>]]</b>...
</pre>
</div>
<div class="Pp"></div>
If the parser encounters associative use of this token it reports an error. If
  <i>tag</i> is present, it shall declare a C type for <i>name</i>s as described
  for <b>%token</b>.
<div class="Pp"></div>
The following declares that union member <i>name</i>s are non-terminals, and
  thus it is required to have a <i>tag</i> field at its beginning:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%type &lt;</b><i>tag</i>&gt; <i>name</i>...
</pre>
</div>
<div class="Pp"></div>
Because it deals with non-terminals only, assigning a token number or using a
  literal is also prohibited. If this construct is present, <i>yacc</i> shall
  perform type checking; if this construct is not present, the parse stack shall
  hold only the <b>int</b> type.
<div class="Pp"></div>
Every name used in <i>grammar</i> not defined by a <b>%token</b>, <b>%left</b>,
  <b>%right</b>, or <b>%nonassoc</b> declaration is assumed to represent a
  non-terminal symbol. The <i>yacc</i> utility shall report an error for any
  non-terminal symbol that does not appear on the left side of at least one
  grammar rule.
<div class="Pp"></div>
Once the type, precedence, or token number of a name is specified, it shall not
  be changed. If the first declaration of a token does not assign a token
  number, <i>yacc</i> shall assign a token number. Once this assignment is made,
  the token number shall not be changed by explicit assignment.
<div class="Pp"></div>
The following declarators do not follow the previous pattern.
<div class="Pp"></div>
The following declares the non-terminal <i>name</i> to be the <i>start
  symbol</i>, which represents the largest, most general structure described by
  the grammar rules:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%start </b><i>name</i>
</pre>
</div>
<div class="Pp"></div>
By default, it is the left-hand side of the first grammar rule; this default can
  be overridden with this declaration.
<div class="Pp"></div>
The following declares the <i>yacc</i> value stack to be a union of the various
  types of values desired.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%union { </b><i>body of union</i> (<i>in C</i>) }
</pre>
</div>
<div class="Pp"></div>
The body of the union shall not contain unbalanced curly brace preprocessing
  tokens.
<div class="Pp"></div>
By default, the values returned by actions (see below) and the lexical analyzer
  shall be of type <b>int</b>. The <i>yacc</i> utility keeps track of types, and
  it shall insert corresponding union member names in order to perform strict
  type checking of the resulting parser.
<div class="Pp"></div>
Alternatively, given that at least one &lt; <i>tag</i>&gt; construct is used,
  the union can be declared in a header file (which shall be included in the
  declarations section by using a <b>#include</b> construct within <b>%{</b> and
  <b>%}</b>), and a <b>typedef</b> used to define the symbol YYSTYPE to
  represent this union. The effect of <b>%union</b> is to provide the
  declaration of YYSTYPE directly from the <i>yacc</i> input.
<div class="Pp"></div>
C-language declarations and definitions can appear in the declarations section,
  enclosed by the following marks:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>%{ ... %}</b>
</pre>
</div>
<div class="Pp"></div>
These statements shall be copied into the code file, and have global scope
  within it so that they can be used in the rules and program sections. The
  statements shall not contain <b>&quot;%}&quot;</b> outside a comment, string
  literal, or multi-character constant.
<div class="Pp"></div>
The application shall ensure that the declarations section is terminated by the
  token <b>%%</b>.
<h2 class="Ss" title="Ss" id="Grammar_Rules_in_yacc"><a class="selflink" href="#Grammar_Rules_in_yacc">Grammar
  Rules in yacc</a></h2>
The rules section defines the context-free grammar to be accepted by the
  function <i>yacc</i> generates, and associates with those rules C-language
  actions and additional precedence information. The grammar is described below,
  and a formal definition follows.
<div class="Pp"></div>
The rules section is comprised of one or more grammar rules. A grammar rule has
  the form:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>A : BODY ;</b>
</pre>
</div>
<div class="Pp"></div>
The symbol <b>A</b> represents a non-terminal name, and <b>BODY</b> represents a
  sequence of zero or more <i>name</i>s, <i>literal</i>s, and <i>semantic
  action</i>s that can then be followed by optional <i>precedence rule</i>s.
  Only the names and literals participate in the formation of the grammar; the
  semantic actions and precedence rules are used in other ways. The
  &lt;colon&gt; and the &lt;semicolon&gt; are <i>yacc</i> punctuation. If there
  are several successive grammar rules with the same left-hand side, the
  &lt;vertical-line&gt; (<b>'|'</b>) can be used to avoid rewriting the
  left-hand side; in this case the &lt;semicolon&gt; appears only after the last
  rule. The BODY part can be empty (or empty of names and literals) to indicate
  that the non-terminal symbol matches the empty string.
<div class="Pp"></div>
The <i>yacc</i> utility assigns a unique number to each rule. Rules using the
  vertical bar notation are distinct rules. The number assigned to the rule
  appears in the description file.
<div class="Pp"></div>
The elements comprising a BODY are:
<dl class="Bl-tag">
  <dt class="It-tag"><i>name</i>,&#x00A0;<i>literal</i></dt>
  <dd class="It-tag">These form the rules of the grammar: <i>name</i> is either
      a <i>token</i> or a <i>non-terminal</i>; <i>literal</i> stands for itself
      (less the lexically required quotation marks).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>semantic action</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    With each grammar rule, the user can associate actions to be performed each
      time the rule is recognized in the input process. (Note that the word
      ``action'' can also refer to the actions of the parser&#x2014;shift,
      reduce, and so on.)</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
These actions can return values and can obtain the values returned by previous
  actions. These values are kept in objects of type YYSTYPE (see <b>%union</b>).
  The result value of the action shall be kept on the parse stack with the
  left-hand side of the rule, to be accessed by other reductions as part of
  their right-hand side. By using the &lt; <i>tag</i>&gt; information provided
  in the declarations section, the code generated by <i>yacc</i> can be strictly
  type checked and contain arbitrary information. In addition, the lexical
  analyzer can provide the same kinds of values for tokens, if desired.
<div class="Pp"></div>
An action is an arbitrary C statement and as such can do input or output, call
  subprograms, and alter external variables. An action is one or more C
  statements enclosed in curly braces <b>'{'</b> and <b>'}'</b>. The statements
  shall not contain unbalanced curly brace preprocessing tokens.
<div class="Pp"></div>
Certain pseudo-variables can be used in the action. These are macros for access
  to data structures known internally to <i>yacc</i>.
<dl class="Bl-tag">
  <dt class="It-tag">$$</dt>
  <dd class="It-tag">The value of the action can be set by assigning it to $$.
      If type checking is enabled and the type of the value to be assigned
      cannot be determined, a diagnostic message may be generated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$<i>number</i></dt>
  <dd class="It-tag">This refers to the value returned by the component
      specified by the token <i>number</i> in the right side of a rule, reading
      from left to right; <i>number</i> can be zero or negative. If
      <i>number</i> is zero or negative, it refers to the data associated with
      the name on the parser's stack preceding the leftmost symbol of the
      current rule. (That is, <b>&quot;$0&quot;</b> refers to the name
      immediately preceding the leftmost name in the current rule to be found on
      the parser's stack and <b>&quot;$&#x2212;1&quot;</b> refers to the symbol
      to <i>its</i> left.) If <i>number</i> refers to an element past the
      current point in the rule, or beyond the bottom of the stack, the result
      is undefined. If type checking is enabled and the type of the value to be
      assigned cannot be determined, a diagnostic message may be generated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$&lt;<i>tag</i>&gt;<i>number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    These correspond exactly to the corresponding symbols without the <i>tag</i>
      inclusion, but allow for strict type checking (and preclude unwanted type
      conversions). The effect is that the macro is expanded to use <i>tag</i>
      to select an element from the YYSTYPE union (using <i>dataname.tag</i>).
      This is particularly useful if <i>number</i> is not positive.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$&lt;<i>tag</i>&gt;$</dt>
  <dd class="It-tag">This imposes on the reference the type of the union member
      referenced by <i>tag</i>. This construction is applicable when a reference
      to a left context value occurs in the grammar, and provides <i>yacc</i>
      with a means for selecting a type.</dd>
</dl>
<div class="Pp"></div>
Actions can occur anywhere in a rule (not just at the end); an action can access
  values returned by actions to its left, and in turn the value it returns can
  be accessed by actions to its right. An action appearing in the middle of a
  rule shall be equivalent to replacing the action with a new non-terminal
  symbol and adding an empty rule with that non-terminal symbol on the left-hand
  side. The semantic action associated with the new rule shall be equivalent to
  the original action. The use of actions within rules might introduce conflicts
  that would not otherwise exist.
<div class="Pp"></div>
By default, the value of a rule shall be the value of the first element in it.
  If the first element does not have a type (particularly in the case of a
  literal) and type checking is turned on by <b>%type</b>, an error message
  shall result.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>precedence</i></dt>
  <dd class="It-tag">The keyword <b>%prec</b> can be used to change the
      precedence level associated with a particular grammar rule. Examples of
      this are in cases where a unary and binary operator have the same symbolic
      representation, but need to be given different precedences, or where the
      handling of an ambiguous if-else construction is necessary. The reserved
      symbol <b>%prec</b> can appear immediately after the body of the grammar
      rule and can be followed by a token name or a literal. It shall cause the
      precedence of the grammar rule to become that of the following token name
      or literal. The action for the rule as a whole can follow
    <b>%prec</b>.</dd>
</dl>
<div class="Pp"></div>
If a program section follows, the application shall ensure that the grammar
  rules are terminated by <b>%%</b>.
<h2 class="Ss" title="Ss" id="Programs_Section"><a class="selflink" href="#Programs_Section">Programs
  Section</a></h2>
The <i>programs</i> section can include the definition of the lexical analyzer
  <i>yylex</i>(), and any other functions; for example, those used in the
  actions specified in the grammar rules. It is unspecified whether the programs
  section precedes or follows the semantic actions in the output file;
  therefore, if the application contains any macro definitions and declarations
  intended to apply to the code in the semantic actions, it shall place them
  within <b>&quot;%{&#x00A0;...&#x00A0;%}&quot;</b> in the declarations section.
<h2 class="Ss" title="Ss" id="Input_Grammar"><a class="selflink" href="#Input_Grammar">Input
  Grammar</a></h2>
The following input to <i>yacc</i> yields a parser for the input to <i>yacc</i>.
  This formal syntax takes precedence over the preceding text syntax
  description.
<div class="Pp"></div>
The lexical structure is defined less precisely; <i>Lexical Structure of the
  Grammar</i> defines most terms. The correspondence between the previous terms
  and the tokens below is as follows.
<dl class="Bl-tag">
  <dt class="It-tag"><b>IDENTIFIER</b></dt>
  <dd class="It-tag">This corresponds to the concept of <i>name</i>, given
      previously. It also includes literals as defined previously.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>C_IDENTIFIER</b></dt>
  <dd class="It-tag">This is a name, and additionally it is known to be followed
      by a &lt;colon&gt;. A literal cannot yield this token.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>NUMBER</b></dt>
  <dd class="It-tag">A string of digits (a non-negative decimal integer).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>TYPE</b>,&#x00A0;<b>LEFT</b>,&#x00A0;<b>MARK</b>,&#x00A0;<b>LCURL</b>,&#x00A0;<b>RCURL</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    These correspond directly to <b>%type</b>, <b>%left</b>, <b>%%</b>,
      <b>%{</b>, and <b>%}</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>{&#x00A0;...&#x00A0;}</b></dt>
  <dd class="It-tag">This indicates C-language source code, with the possible
      inclusion of <b>'$'</b> macros as discussed previously.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>/* Grammar for the input to yacc. */</b>
<b>/* Basic entries. */</b>
<b>/* The following are recognized by the lexical analyzer. */</b>
</pre>
<div class="Pp"></div>
<pre>
%token    IDENTIFIER      /* Includes identifiers and literals */
%token    C_IDENTIFIER    /* identifier (but not literal)
                             followed by a :. */
%token    NUMBER          /* [0-9][0-9]* */
</pre>
<div class="Pp"></div>
<pre>
/* Reserved words : %type=&gt;TYPE %left=&gt;LEFT, and so on */
</pre>
<div class="Pp"></div>
<pre>
%token    LEFT RIGHT NONASSOC TOKEN PREC TYPE START UNION
</pre>
<div class="Pp"></div>
<pre>
%token    MARK            /* The %% mark. */
%token    LCURL           /* The %{ mark. */
%token    RCURL           /* The %} mark. */
</pre>
<div class="Pp"></div>
<pre>
/* 8-bit character literals stand for themselves; */
/* tokens have to be defined for multi-byte characters. */
</pre>
<div class="Pp"></div>
<pre>
%start    spec
</pre>
<div class="Pp"></div>
<pre>
%%
</pre>
<div class="Pp"></div>
<pre>
spec  : defs MARK rules tail
      ;
tail  : MARK
      {
        /* In this action, set up the rest of the file. */
      }
      | /* Empty; the second MARK is optional. */
      ;
defs  : /* Empty. */
      |    defs def
      ;
def   : START IDENTIFIER
      |    UNION
      {
        /* Copy union definition to output. */
      }
      |    LCURL
      {
        /* Copy C code to output file. */
      }
        RCURL
      |    rword tag nlist
      ;
rword : TOKEN
      | LEFT
      | RIGHT
      | NONASSOC
      | TYPE
      ;
tag   : /* Empty: union tag ID optional. */
      | '&lt;' IDENTIFIER '&gt;'
      ;
nlist : nmno
      | nlist nmno
      ;
nmno  : IDENTIFIER         /* Note: literal invalid with % type. */
      | IDENTIFIER NUMBER  /* Note: invalid with % type. */
      ;
</pre>
<div class="Pp"></div>
<pre>
/* Rule section */
</pre>
<div class="Pp"></div>
<pre>
rules : C_IDENTIFIER rbody prec
      | rules  rule
      ;
rule  : C_IDENTIFIER rbody prec
      | '|' rbody prec
      ;
rbody : /* empty */
      | rbody IDENTIFIER
      | rbody act
      ;
act   : '{'
        {
          /* Copy action, translate $$, and so on. */
        }
        '}'
      ;
prec  : /* Empty */
      | PREC IDENTIFIER
      | PREC IDENTIFIER act
      | prec ';'
      ;
</pre>
</div>
<h2 class="Ss" title="Ss" id="Conflicts"><a class="selflink" href="#Conflicts">Conflicts</a></h2>
The parser produced for an input grammar may contain states in which conflicts
  occur. The conflicts occur because the grammar is not LALR(1). An ambiguous
  grammar always contains at least one LALR(1) conflict. The <i>yacc</i> utility
  shall resolve all conflicts, using either default rules or user-specified
  precedence rules.
<div class="Pp"></div>
Conflicts are either shift/reduce conflicts or reduce/reduce conflicts. A
  shift/reduce conflict is where, for a given state and lookahead symbol, both a
  shift action and a reduce action are possible. A reduce/reduce conflict is
  where, for a given state and lookahead symbol, reductions by two different
  rules are possible.
<div class="Pp"></div>
The rules below describe how to specify what actions to take when a conflict
  occurs. Not all shift/reduce conflicts can be successfully resolved this way
  because the conflict may be due to something other than ambiguity, so
  incautious use of these facilities can cause the language accepted by the
  parser to be much different from that which was intended. The description file
  shall contain sufficient information to understand the cause of the conflict.
  Where ambiguity is the reason either the default or explicit rules should be
  adequate to produce a working parser.
<div class="Pp"></div>
The declared precedences and associativities (see <i>Declarations Section</i>)
  are used to resolve parsing conflicts as follows:
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">A precedence and associativity is associated with each
      grammar rule; it is the precedence and associativity of the last token or
      literal in the body of the rule. If the <b>%prec</b> keyword is used, it
      overrides this default. Some grammar rules might not have both precedence
      and associativity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">If there is a shift/reduce conflict, and both the grammar
      rule and the input symbol have precedence and associativity associated
      with them, then the conflict is resolved in favor of the action (shift or
      reduce) associated with the higher precedence. If the precedences are the
      same, then the associativity is used; left associative implies reduce,
      right associative implies shift, and non-associative implies an error in
      the string being parsed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag">When there is a shift/reduce conflict that cannot be
      resolved by rule 2, the shift is done. Conflicts resolved this way are
      counted in the diagnostic output described in <i>Error Handling</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 4.</dt>
  <dd class="It-tag">When there is a reduce/reduce conflict, a reduction is done
      by the grammar rule that occurs earlier in the input sequence. Conflicts
      resolved this way are counted in the diagnostic output described in
      <i>Error Handling</i>.</dd>
</dl>
<div class="Pp"></div>
Conflicts resolved by precedence or associativity shall not be counted in the
  shift/reduce and reduce/reduce conflicts reported by <i>yacc</i> on either
  standard error or in the description file.
<h2 class="Ss" title="Ss" id="Error_Handling"><a class="selflink" href="#Error_Handling">Error
  Handling</a></h2>
The token <b>error</b> shall be reserved for error handling. The name
  <b>error</b> can be used in grammar rules. It indicates places where the
  parser can recover from a syntax error. The default value of <b>error</b>
  shall be 256. Its value can be changed using a <b>%token</b> declaration. The
  lexical analyzer should not return the value of <b>error</b>.
<div class="Pp"></div>
The parser shall detect a syntax error when it is in a state where the action
  associated with the lookahead symbol is <b>error</b>. A semantic action can
  cause the parser to initiate error handling by executing the macro YYERROR.
  When YYERROR is executed, the semantic action passes control back to the
  parser. YYERROR cannot be used outside of semantic actions.
<div class="Pp"></div>
When the parser detects a syntax error, it normally calls <i>yyerror</i>() with
  the character string <b>&quot;syntax&#x00A0;error&quot;</b> as its argument.
  The call shall not be made if the parser is still recovering from a previous
  error when the error is detected. The parser is considered to be recovering
  from a previous error until the parser has shifted over at least three normal
  input symbols since the last error was detected or a semantic action has
  executed the macro <i>yyerrok</i>. The parser shall not call <i>yyerror</i>()
  when YYERROR is executed.
<div class="Pp"></div>
The macro function YYRECOVERING shall return 1 if a syntax error has been
  detected and the parser has not yet fully recovered from it. Otherwise, zero
  shall be returned.
<div class="Pp"></div>
When a syntax error is detected by the parser, the parser shall check if a
  previous syntax error has been detected. If a previous error was detected, and
  if no normal input symbols have been shifted since the preceding error was
  detected, the parser checks if the lookahead symbol is an endmarker (see
  <i>Interface to the Lexical Analyzer</i>). If it is, the parser shall return
  with a non-zero value. Otherwise, the lookahead symbol shall be discarded and
  normal parsing shall resume.
<div class="Pp"></div>
When YYERROR is executed or when the parser detects a syntax error and no
  previous error has been detected, or at least one normal input symbol has been
  shifted since the previous error was detected, the parser shall pop back one
  state at a time until the parse stack is empty or the current state allows a
  shift over <b>error</b>. If the parser empties the parse stack, it shall
  return with a non-zero value. Otherwise, it shall shift over <b>error</b> and
  then resume normal parsing. If the parser reads a lookahead symbol before the
  error was detected, that symbol shall still be the lookahead symbol when
  parsing is resumed.
<div class="Pp"></div>
The macro <i>yyerrok</i> in a semantic action shall cause the parser to act as
  if it has fully recovered from any previous errors. The macro <i>yyclearin</i>
  shall cause the parser to discard the current lookahead token. If the current
  lookahead token has not yet been read, <i>yyclearin</i> shall have no effect.
<div class="Pp"></div>
The macro YYACCEPT shall cause the parser to return with the value zero. The
  macro YYABORT shall cause the parser to return with a non-zero value.
<h2 class="Ss" title="Ss" id="Interface_to_the_Lexical_Analyzer"><a class="selflink" href="#Interface_to_the_Lexical_Analyzer">Interface
  to the Lexical Analyzer</a></h2>
The <i>yylex</i>() function is an integer-valued function that returns a
  <i>token number</i> representing the kind of token read. If there is a value
  associated with the token returned by <i>yylex</i>() (see the discussion of
  <i>tag</i> above), it shall be assigned to the external variable
  <i>yylval</i>.
<div class="Pp"></div>
If the parser and <i>yylex</i>() do not agree on these token numbers, reliable
  communication between them cannot occur. For (single-byte character) literals,
  the token is simply the numeric value of the character in the current
  character set. The numbers for other tokens can either be chosen by
  <i>yacc</i>, or chosen by the user. In either case, the <b>#define</b>
  construct of C is used to allow <i>yylex</i>() to return these numbers
  symbolically. The <b>#define</b> statements are put into the code file, and
  the header file if that file is requested. The set of characters permitted by
  <i>yacc</i> in an identifier is larger than that permitted by C. Token names
  found to contain such characters shall not be included in the <b>#define</b>
  declarations.
<div class="Pp"></div>
If the token numbers are chosen by <i>yacc</i>, the tokens other than literals
  shall be assigned numbers greater than 256, although no order is implied. A
  token can be explicitly assigned a number by following its first appearance in
  the declarations section with a number. Names and literals not defined this
  way retain their default definition. All token numbers assigned by <i>yacc</i>
  shall be unique and distinct from the token numbers used for literals and
  user-assigned tokens. If duplicate token numbers cause conflicts in parser
  generation, <i>yacc</i> shall report an error; otherwise, it is unspecified
  whether the token assignment is accepted or an error is reported.
<div class="Pp"></div>
The end of the input is marked by a special token called the <i>endmarker</i>,
  which has a token number that is zero or negative. (These values are invalid
  for any other token.) All lexical analyzers shall return zero or negative as a
  token number upon reaching the end of their input. If the tokens up to, but
  excluding, the endmarker form a structure that matches the start symbol, the
  parser shall accept the input. If the endmarker is seen in any other context,
  it shall be considered an error.
<h2 class="Ss" title="Ss" id="Completing_the_Program"><a class="selflink" href="#Completing_the_Program">Completing
  the Program</a></h2>
In addition to <i>yyparse</i>() and <i>yylex</i>(), the functions
  <i>yyerror</i>() and <i>main</i>() are required to make a complete program.
  The application can supply <i>main</i>() and <i>yyerror</i>(), or those
  routines can be obtained from the <i>yacc</i> library.
<h2 class="Ss" title="Ss" id="Yacc_Library"><a class="selflink" href="#Yacc_Library">Yacc
  Library</a></h2>
The following functions shall appear only in the <i>yacc</i> library accessible
  through the <b>&#x2212;l&#x00A0;y</b> operand to <i>c99</i>; they can
  therefore be redefined by a conforming application:
<dl class="Bl-tag">
  <dt class="It-tag"><b>int&#x00A0;</b><i>main</i>(<b>void</b>)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This function shall call <i>yyparse</i>() and exit with an unspecified
      value. Other actions within this function are unspecified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>int&#x00A0;</b><i>yyerror</i>(<b>const&#x00A0;char</b>&#x00A0;*<i>s</i>)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This function shall write the NUL-terminated argument to standard error,
      followed by a &lt;newline&gt;.</dd>
</dl>
<div class="Pp"></div>
The order of the <b>&#x2212;l&#x00A0;y</b> and <b>&#x2212;l&#x00A0;l</b>
  operands given to <i>c99</i> is significant; the application shall either
  provide its own <i>main</i>() function or ensure that
  <b>&#x2212;l&#x00A0;y</b> precedes <b>&#x2212;l&#x00A0;l</b>.
<h2 class="Ss" title="Ss" id="Debugging_the_Parser"><a class="selflink" href="#Debugging_the_Parser">Debugging
  the Parser</a></h2>
The parser generated by <i>yacc</i> shall have diagnostic facilities in it that
  can be optionally enabled at either compile time or at runtime (if enabled at
  compile time). The compilation of the runtime debugging code is under the
  control of YYDEBUG, a preprocessor symbol. If YYDEBUG has a non-zero value,
  the debugging code shall be included. If its value is zero, the code shall not
  be included.
<div class="Pp"></div>
In parsers where the debugging code has been included, the external <b>int</b>
  <i>yydebug</i> can be used to turn debugging on (with a non-zero value) and
  off (zero value) at runtime. The initial value of <i>yydebug</i> shall be
  zero.
<div class="Pp"></div>
When <b>&#x2212;t</b> is specified, the code file shall be built such that, if
  YYDEBUG is not already defined at compilation time (using the <i>c99</i>
  <b>&#x2212;D</b> YYDEBUG option, for example), YYDEBUG shall be set explicitly
  to 1. When <b>&#x2212;t</b> is not specified, the code file shall be built
  such that, if YYDEBUG is not already defined, it shall be set explicitly to
  zero.
<div class="Pp"></div>
The format of the debugging output is unspecified but includes at least enough
  information to determine the shift and reduce actions, and the input symbols.
  It also provides information about error recovery.
<h2 class="Ss" title="Ss" id="Algorithms"><a class="selflink" href="#Algorithms">Algorithms</a></h2>
The parser constructed by <i>yacc</i> implements an LALR(1) parsing algorithm as
  documented in the literature. It is unspecified whether the parser is
  table-driven or direct-coded.
<div class="Pp"></div>
A parser generated by <i>yacc</i> shall never request an input symbol from
  <i>yylex</i>() while in a state where the only actions other than the error
  action are reductions by a single rule.
<div class="Pp"></div>
The literature of parsing theory defines these concepts.
<h2 class="Ss" title="Ss" id="Limits"><a class="selflink" href="#Limits">Limits</a></h2>
The <i>yacc</i> utility may have several internal tables. The minimum maximums
  for these tables are shown in the following table. The exact meaning of these
  values is implementation-defined. The implementation shall define the
  relationship between these values and between them and any error messages that
  the implementation may generate should it run out of space for any internal
  structure. An implementation may combine groups of these resources into a
  single pool as long as the total available to the user does not fall below the
  sum of the sizes specified by this section.
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<b>Table: Internal Limits in </b><i>yacc</i><b></b>
<div>&#x00A0;</div>
<table class="tbl">
  <colgroup>
    <col style="width: 10.00ex;"/>
    <col style="width: 14.00ex;"/>
    <col style="width: 30.00ex;"/>
  </colgroup>
  <tr>
    <td></td>
    <td>Minimum</td>
    <td></td>
  </tr>
  <tr>
    <td>Limit</td>
    <td>Maximum</td>
    <td>Description</td>
  </tr>
  <tr>
    <td colspan="0"></td>
  </tr>
  <tr>
    <td>{NTERMS}</td>
    <td>126</td>
    <td>Number of tokens.</td>
  </tr>
  <tr>
    <td>{NNONTERM}</td>
    <td>200</td>
    <td>Number of non-terminals.</td>
  </tr>
  <tr>
    <td>{NPROD}</td>
    <td>300</td>
    <td>Number of rules.</td>
  </tr>
  <tr>
    <td>{NSTATES}</td>
    <td>600</td>
    <td>Number of states.</td>
  </tr>
  <tr>
    <td>{MEMSIZE}</td>
    <td>5200</td>
    <td>Length of rules. The total length, in names (tokens and non-terminals),
      of all the rules of the grammar. The left-hand side is counted for each
      rule, even if it is not explicitly repeated, as specified in &quot;Grammar
      Rules in yacc&quot;.</td>
  </tr>
  <tr>
    <td>{ACTSIZE}</td>
    <td>4000</td>
    <td>Number of actions. ``Actions'' here (and in the description file) refer
      to parser actions (shift, reduce, and so on) not to semantic actions
      defined in &quot;Grammar Rules in yacc&quot;.</td>
  </tr>
</table>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2002;0</dt>
  <dd class="It-tag">Successful completion.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;0</dt>
  <dd class="It-tag">An error occurred.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
If any errors are encountered, the run is aborted and <i>yacc</i> exits with a
  non-zero status. Partial code files and header files may be produced. The
  summary information in the description file shall always be produced if the
  <b>&#x2212;v</b> flag is present.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
Historical implementations experience name conflicts on the names
  <b>yacc.tmp</b>, <b>yacc.acts</b>, <b>yacc.debug</b>, <b>y.tab.c</b>,
  <b>y.tab.h</b>, and <b>y.output</b> if more than one copy of <i>yacc</i> is
  running in a single directory at one time. The <b>&#x2212;b</b> option was
  added to overcome this problem. The related problem of allowing multiple
  <i>yacc</i> parsers to be placed in the same file was addressed by adding a
  <b>&#x2212;p</b> option to override the previously hard-coded <b>yy</b>
  variable prefix.
<div class="Pp"></div>
The description of the <b>&#x2212;p</b> option specifies the minimal set of
  function and variable names that cause conflict when multiple parsers are
  linked together. YYSTYPE does not need to be changed. Instead, the programmer
  can use <b>&#x2212;b</b> to give the header files for different parsers
  different names, and then the file with the <i>yylex</i>() for a given parser
  can include the header for that parser. Names such as <i>yyclearerr</i> do not
  need to be changed because they are used only in the actions; they do not have
  linkage. It is possible that an implementation has other names, either
  internal ones for implementing things such as <i>yyclearerr</i>, or providing
  non-standard features that it wants to change with <b>&#x2212;p</b>.
<div class="Pp"></div>
Unary operators that are the same token as a binary operator in general need
  their precedence adjusted. This is handled by the <b>%prec</b> advisory symbol
  associated with the particular grammar rule defining that unary operator. (See
  <i>Grammar Rules in yacc</i>.) Applications are not required to use this
  operator for unary operators, but the grammars that do not require it are
  rare.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Access to the <i>yacc</i> library is obtained with library search operands to
  <i>c99</i>. To use the <i>yacc</i> library <i>main</i>():
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>c99 y.tab.c &#x2212;l y</b>
</pre>
</div>
<div class="Pp"></div>
Both the <i>lex</i> library and the <i>yacc</i> library contain <i>main</i>().
  To access the <i>yacc</i> <i>main</i>():
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>c99 y.tab.c lex.yy.c &#x2212;l y &#x2212;l l</b>
</pre>
</div>
<div class="Pp"></div>
This ensures that the <i>yacc</i> library is searched first, so that its
  <i>main</i>() is used.
<div class="Pp"></div>
The historical <i>yacc</i> libraries have contained two simple functions that
  are normally coded by the application programmer. These functions are similar
  to the following code:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>#include &lt;locale.h&gt;</b>
<b>int main(void)</b>
<b>{</b>
<b>    extern int yyparse();</b>
</pre>
<div class="Pp"></div>
<pre>
    setlocale(LC_ALL, &quot;&quot;);
</pre>
<div class="Pp"></div>
<pre>
    /* If the following parser is one created by lex, the
       application must be careful to ensure that LC_CTYPE
       and LC_COLLATE are set to the POSIX locale. */
    (void) yyparse();
    return (0);
}
</pre>
<div class="Pp"></div>
<pre>
#include &lt;stdio.h&gt;
</pre>
<div class="Pp"></div>
<pre>
int yyerror(const char *msg)
{
    (void) fprintf(stderr, &quot;%s\n&quot;, msg);
    return (0);
}
</pre>
</div>
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
The references in <b>Referenced Documents</b> may be helpful in constructing the
  parser generator. The referenced DeRemer and Pennello article (along with the
  works it references) describes a technique to generate parsers that conform to
  this volume of POSIX.1&#x2010;2008. Work in this area continues to be done, so
  implementors should consult current literature before doing any new
  implementations. The original Knuth article is the theoretical basis for this
  kind of parser, but the tables it generates are impractically large for
  reasonable grammars and should not be used. The ``equivalent to'' wording is
  intentional to assure that the best tables that are LALR(1) can be generated.
<div class="Pp"></div>
There has been confusion between the class of grammars, the algorithms needed to
  generate parsers, and the algorithms needed to parse the languages. They are
  all reasonably orthogonal. In particular, a parser generator that accepts the
  full range of LR(1) grammars need not generate a table any more complex than
  one that accepts SLR(1) (a relatively weak class of LR grammars) for a grammar
  that happens to be SLR(1). Such an implementation need not recognize the case,
  either; table compression can yield the SLR(1) table (or one even smaller than
  that) without recognizing that the grammar is SLR(1). The speed of an LR(1)
  parser for any class is dependent more upon the table representation and
  compression (or the code generation if a direct parser is generated) than upon
  the class of grammar that the table generator handles.
<div class="Pp"></div>
The speed of the parser generator is somewhat dependent upon the class of
  grammar it handles. However, the original Knuth article algorithms for
  constructing LR parsers were judged by its author to be impractically slow at
  that time. Although full LR is more complex than LALR(1), as computer speeds
  and algorithms improve, the difference (in terms of acceptable wall-clock
  execution time) is becoming less significant.
<div class="Pp"></div>
Potential authors are cautioned that the referenced DeRemer and Pennello article
  previously cited identifies a bug (an over-simplification of the computation
  of LALR(1) lookahead sets) in some of the LALR(1) algorithm statements that
  preceded it to publication. They should take the time to seek out that paper,
  as well as current relevant work, particularly Aho's.
<div class="Pp"></div>
The <b>&#x2212;b</b> option was added to provide a portable method for
  permitting <i>yacc</i> to work on multiple separate parsers in the same
  directory. If a directory contains more than one <i>yacc</i> grammar, and both
  grammars are constructed at the same time (by, for example, a parallel
  <i>make</i> program), conflict results. While the solution is not historical
  practice, it corrects a known deficiency in historical implementations.
  Corresponding changes were made to all sections that referenced the filenames
  <b>y.tab.c</b> (now ``the code file''), <b>y.tab.h</b> (now ``the header
  file''), and <b>y.output</b> (now ``the description file'').
<div class="Pp"></div>
The grammar for <i>yacc</i> input is based on System V documentation. The
  textual description shows there that the <b>';'</b> is required at the end of
  the rule. The grammar and the implementation do not require this. (The use of
  <b>C_IDENTIFIER</b> causes a reduce to occur in the right place.)
<div class="Pp"></div>
Also, in that implementation, the constructs such as <b>%token</b> can be
  terminated by a &lt;semicolon&gt;, but this is not permitted by the grammar.
  The keywords such as <b>%token</b> can also appear in uppercase, which is
  again not discussed. In most places where <b>'%'</b> is used,
  &lt;backslash&gt; can be substituted, and there are alternate spellings for
  some of the symbols (for example, <b>%LEFT</b> can be <b>&quot;%&lt;&quot;</b>
  or even <b>&quot;\&lt;&quot;</b>).
<div class="Pp"></div>
Historically, &lt; <i>tag</i>&gt; can contain any characters except
  <b>'&gt;'</b>, including white space, in the implementation. However, since
  the <i>tag</i> must reference an ISO&#x00A0;C standard union member, in
  practice conforming implementations need to support only the set of characters
  for ISO&#x00A0;C standard identifiers in this context.
<div class="Pp"></div>
Some historical implementations are known to accept actions that are terminated
  by a period. Historical implementations often allow <b>'$'</b> in names. A
  conforming implementation does not need to support either of these behaviors.
<div class="Pp"></div>
Deciding when to use <b>%prec</b> illustrates the difficulty in specifying the
  behavior of <i>yacc</i>. There may be situations in which the <i>grammar</i>
  is not, strictly speaking, in error, and yet <i>yacc</i> cannot interpret it
  unambiguously. The resolution of ambiguities in the grammar can in many
  instances be resolved by providing additional information, such as using
  <b>%type</b> or <b>%union</b> declarations. It is often easier and it usually
  yields a smaller parser to take this alternative when it is appropriate.
<div class="Pp"></div>
The size and execution time of a program produced without the runtime debugging
  code is usually smaller and slightly faster in historical implementations.
<div class="Pp"></div>
Statistics messages from several historical implementations include the
  following types of information:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b></b><i>n</i>/512 terminals, <i>n</i>/300 non-terminals
<i>n</i>/600 grammar rules, <i>n</i>/1500 states
<i>n</i> shift/reduce, <i>n</i> reduce/reduce conflicts reported
<i>n</i>/350 working sets used
Memory: states, etc.  <i>n</i>/15000, parser <i>n</i>/15000
<i>n</i>/600 distinct lookahead sets
<i>n</i> extra closures
<i>n</i> shift entries, <i>n</i> exceptions
<i>n</i> goto entries
<i>n</i> entries saved by goto default
Optimizer space used: input  <i>n</i>/15000, output <i>n</i>/15000
<i>n</i> table entries, <i>n</i> zero
Maximum spread:  <i>n</i>, Maximum offset: <i>n</i>
</pre>
</div>
<div class="Pp"></div>
The report of internal tables in the description file is left
  implementation-defined because all aspects of these limits are also
  implementation-defined. Some implementations may use dynamic allocation
  techniques and have no specific limit values to report.
<div class="Pp"></div>
The format of the <b>y.output</b> file is not given because specification of the
  format was not seen to enhance applications portability. The listing is
  primarily intended to help human users understand and debug the parser; use of
  <b>y.output</b> by a conforming application script would be unusual.
  Furthermore, implementations have not produced consistent output and no
  popular format was apparent. The format selected by the implementation should
  be human-readable, in addition to the requirement that it be a text file.
<div class="Pp"></div>
Standard error reports are not specifically described because they are seldom of
  use to conforming applications and there was no reason to restrict
  implementations.
<div class="Pp"></div>
Some implementations recognize <b>&quot;={&quot;</b> as equivalent to <b>'{'</b>
  because it appears in historical documentation. This construction was
  recognized and documented as obsolete as long ago as 1978, in the referenced
  <i>Yacc: Yet Another Compiler-Compiler</i>. This volume of POSIX.1&#x2010;2008
  chose to leave it as obsolete and omit it.
<div class="Pp"></div>
Multi-byte characters should be recognized by the lexical analyzer and returned
  as tokens. They should not be returned as multi-byte character literals. The
  token <b>error</b> that is used for error recovery is normally assigned the
  value 256 in the historical implementation. Thus, the token value 256, which
  is used in many multi-byte character sets, is not available for use as the
  value of a user-defined token.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i><i>c99</i></i>, <i><i>lex</i></i>
<div class="Pp"></div>
The Base Definitions volume of POSIX.1&#x2010;2008, <i>Chapter 8</i>,
  <i>Environment Variables</i>, <i>Section 12.2</i>, <i>Utility Syntax
  Guidelines</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2013 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  7, Copyright (C) 2013 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. (This is POSIX.1-2008 with the 2013
  Technical Corrigendum 1 applied.) In the event of any discrepancy between this
  version and the original IEEE and The Open Group Standard, the original IEEE
  and The Open Group Standard is the referee document. The original Standard can
  be obtained online at http://www.unix.org/online.html .
<div style="height: 1.00em;">&#x00A0;</div>
Any typographical or formatting errors that appear in this page are most likely
  to have been introduced during the conversion of the source files to man page
  format. To report such errors, see
  https://www.kernel.org/doc/man-pages/reporting_bugs.html .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
