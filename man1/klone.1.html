<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:20:40 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>KLONE(1) KoanLogic Srl KLONE(1)</p>

<p style="margin-top: 1em">NAME <br>
klone - KLone swiss army knife</p>

<p style="margin-top: 1em">SYNOPSIS <br>
klone [klone_opts] [-c cmd] [cmd_opts] [cmd_args]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
klone performs two different tasks depending on the argument
supplied to the -c switch: import a site directory tree into
the KLone building environment (i.e. the embedded file <br>
system), or translate static and dynamic pages into C
files.</p>

<p style="margin-top: 1em">The translation phase is rarely
seen by the user since it is hidden in the Makefile of the
site building directory, i.e. ${KLONE_SRC_DIR}/site.
Generally, the developer gets an <br>
embedded version of his/her site by providing the following
command sequence:</p>

<p style="margin-top: 1em">$ cd ${KLONE_SRC_DIR}/site <br>
$ ../src/tools/klone/klone -c import ${SITE_BASE_DIR} <br>
$ make</p>

<p style="margin-top: 1em">The latter make invocation calls
&rsquo;klone -c translate&rsquo; over the imported files to
perform the needed translation and registering
(pre-linking).</p>

<p style="margin-top: 1em">Note that whenever a source file
is added, removed or renamed, or in case the embedded file
system encrypting key changes, the import operation must be
done again.</p>

<p style="margin-top: 1em">The subsequent phase, by which
the embedded site is linked to the kloned server skeleton,
does not involve klone anymore. Nevertheless, the steps are
illustrated here for <br>
reference:</p>

<p style="margin-top: 1em">$ cd ${KLONE_SRC_DIR} <br>
$ make</p>

<p style="margin-top: 1em">That&rsquo;s all.</p>

<p style="margin-top: 1em">OPTIONS <br>
-h Display a brief help and exit.</p>

<p style="margin-top: 1em">-v Enable verbose mode.</p>

<p style="margin-top: 1em">-V Print klone version and
exit.</p>

<p style="margin-top: 1em">COMMANDS <br>
Translate:</p>

<p style="margin-top: 1em">klone -c translate -i infile -o
outfile -u uri [-E] [-k keyfile] [-z]</p>

<p style="margin-top: 1em">Translate the active (i.e. a
.klone file) or static page infile into C file outfile.</p>

<p style="margin-top: 1em">The -u option specifies the uri
associated with the translated file.</p>

<p style="margin-top: 1em">The -E option tells klone to
encrypt the file content with the key enclosed in the
supplied keyfile or in the environment variable
KLONE_CIPHER_KEY using AES-256 CBC.</p>

<p style="margin-top: 1em">The contents of the translated
files are compressed based on their MIME type if the -z flag
is given.</p>

<p style="margin-top: 1em">Import:</p>

<p style="margin-top: 1em">klone -c import [-b uri] [-e
pattern] [-x pattern] [-k keyfile] [-Z pattern] [-z] dir</p>

<p style="margin-top: 1em">Import the site tree starting at
dir into the KLone building environment. The command output
comprises two makefiles (autogen.mk and autogen.dps) and the
register.c file which <br>
will gather the imported and translated site files. The
latter file is the glue by which the embedded site can
afterwards be linked to the HTTP/S server.</p>

<p style="margin-top: 1em">When the -e flag is given, the
files matching the specified pattern will be encrypted using
the key enclosed in the supplied keyfile or in the
environment variable <br>
KLONE_CIPHER_KEY.</p>

<p style="margin-top: 1em">The user can choose whether to
compress all the imported files based on their MIME type,
using the -z flag, or to select a subset matching the
supplied shell pattern.</p>

<p style="margin-top: 1em">If, while importing, you
don&rsquo;t want to include a set of files you can use the
-x argument to provide the pattern of files you want to
exclude.</p>

<p style="margin-top: 1em">Arguments -x, -Z and -e may be
used more then once.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
The following environment variable affects the execution of
klone:</p>

<p style="margin-top: 1em">KLONE_CIPHER_KEY <br>
If set, klone tries to read the embedded file system
encryption key from it. It is be overridden by the -k
option.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
The klone utility exits with EXIT_SUCCESS on success, and
with EXIT_FAILURE if an error occurs.</p>

<p style="margin-top: 1em">SEE ALSO <br>
kloned(8), kloned.conf(5).</p>

<p style="margin-top: 1em">BUGS <br>
If you find one, please email it to
&lt;klone-bug@koanlogic.com&gt;</p>

<p style="margin-top: 1em">KoanLogic Srl 11/03/2005
KLONE(1)</p>
<hr>
</body>
</html>
