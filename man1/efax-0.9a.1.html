<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EFAX(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EFAX(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">EFAX(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
efax - send/receive faxes with Class 1, 2 or 2.0 fax modem
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
(Please read the <b>fax</b> man page first.)
<div>&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>efax</b> [ <i>options</i> ] [ <b>-t</b> <i>num</i> [ <i>file</i>... ] ]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Where <i>options</i> are:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a <i>cmd</i></b></dt>
  <dd class="It-tag">use the command <b>ATcmd</b> when answering the phone. The
      default is &quot;A&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c <i>caps</i></b></dt>
  <dd class="It-tag">set the local modem capabilities. See the section on
      capabilities below for the format and meaning of <i>caps</i>. For Class 1
      the default is 1,n,0,2,0,0,0,0 where n is the highest speed supported by
      the modem. For Class 2 the default is determined by the modem.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d <i>dev</i></b></dt>
  <dd class="It-tag">use the fax modem connected to device <i>dev</i>. The
      default is <b>/dev/modem</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e <i>cmd</i></b></dt>
  <dd class="It-tag">if a <b>CONNECT</b> response indicates a voice call, the
      shell <b>/bin/sh</b> is exec(2)'ed with <i>cmd</i> as its command.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f <i>fnt</i></b></dt>
  <dd class="It-tag">use font file <i>fnt</i> for generating the header. The
      default is a built-in 8x16 font. See the efix(1) -f option for the font
      file format.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g <i>cmd</i></b></dt>
  <dd class="It-tag">if a <b>CONNECT</b> (or <b>DATA</b>) response indicates a
      data call, the shell <b>/bin/sh</b> is exec(2)'ed with <i>cmd</i> as its
      command. <i>cmd</i> is a printf(3) format that may contain up to 6 %d
      escapes which are replaced by the baud rate following the most recent
      <b>CONNECT</b> message. <i>cmd</i> typically exec's getty(8).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h <i>hdr</i></b></dt>
  <dd class="It-tag">put string `hdr' at the top of each page. The first %d in
      `hdr' is replaced by the page number and the second, if any, is replaced
      by the number of pages being sent.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i <i>str</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j <i>str</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k <i>str</i></b></dt>
  <dd class="It-tag">send the command <b>AT</b><i>str</i> to the modem to
      initialize it. -i commands are sent before the modem is put into fax mode,
      -j commands after the modem is in fax mode, and -k commands just before
      efax exits. The only default is a hang-up (ATH) command that is sent
      before exiting only if no other -k options are given. Multiple options may
      be used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l <i>id</i></b></dt>
  <dd class="It-tag">set the local identification string to <i>id</i>. <i>id</i>
      should be the local telephone number in international format (for example
      &quot;+1 800 555 1212&quot;). This is passed to the remote fax machine.
      Some fax machines may not accept characters other than numbers, space, and
      '+'.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">force line buffering of stdout instead of block buffering.
      This might be necessary if outputting UTF-8 to a terminal with translated
      text via NLS, since otherwise the terminal may be confronted (when the
      buffer is flushed when full) with only a partially formed UTF-8 character.
      Don't use this option unless you have to.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o <i>opt</i></b></dt>
  <dd class="It-tag">use option <i>opt</i> to accommodate a non-standard fax
      modem protocol. See the MODEM REQUIREMENTS section below for more details.
      The <i>opt</i>ions are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   0</b></dt>
  <dd class="It-tag">Force use of Class 2.0 fax modem commands. The modem must
      support Class 2.0.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   2</b></dt>
  <dd class="It-tag">Force use of Class 2 fax modem commands. The modem must
      support Class 2.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   1</b></dt>
  <dd class="It-tag">Force use of Class 1 fax modem commands. The modem must
      support Class 1. By default efax queries the modem and uses the first of
      the three above classes which is supported by the modem.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   a</b></dt>
  <dd class="It-tag">use software adaptive answer method. If the first attempt
      to answer the call does not result in a data connection within 8 seconds
      the phone is hung up temporarily and answered again in fax mode (see
      &quot;Accepting both fax and data calls&quot; below).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   e</b></dt>
  <dd class="It-tag">ignore errors in modem initialization commands.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   f</b></dt>
  <dd class="It-tag">use &quot;virtual flow control&quot;. efax tries to
      estimate the number of bytes in the modem's transmit buffer and pauses as
      necessary to avoid filling it. The modem's buffer is assumed to hold at
      least 96 bytes. This feature does not work properly with Class 2 modems
      that add redundant padding to scan lines. Use this option only if you have
      problems configuring flow control.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   h</b></dt>
  <dd class="It-tag">use hardware (RTS/CTS) in addition to software (XON/XOFF)
      flow control. Many modems will stop responding if this option is used. See
      the section `Resolving Problems' before using this option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   l</b></dt>
  <dd class="It-tag">halve the time between testing lock files when waiting for
      other programs to complete. By default this is 8 seconds. For example
      -olll sets the interval to 1 second.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   n</b></dt>
  <dd class="It-tag">ignore requests for pages to be retransmitted. Use this
      option if you don't care about the quality of the received fax or if the
      receiving machine is too fussy. Otherwise each page may be retransmitted
      up to 3 times.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   r</b></dt>
  <dd class="It-tag">do not reverse bit order during data reception for Class 2
      modems. Only Multitech modems require this option. Not normally required
      since efax detects these modems.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   x</b></dt>
  <dd class="It-tag">send XON (DC1) instead of DC2 to start data reception.
      Applies to a very few Class 2 modems only.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>
  <br/>
   z</b></dt>
  <dd class="It-tag">delay an additional 100 milliseconds before each modem
      initialization or reset command. The initial delay is 100 ms. For example,
      -ozzz produces a 400 ms delay. Use with modems that get confused when
      commands arrive too quickly.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q <i>n</i></b></dt>
  <dd class="It-tag">ask for retransmission of pages received with more than
      <i>n</i> errors. Default is 10.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r <i>pat</i></b></dt>
  <dd class="It-tag">each received fax page is stored in a separate file. The
      file name is created using <i>pat</i> as a strftime(3) format string. A
      page number of the form .001, .002, ... is appended to the file name. If
      <i>pat</i> is blank (&quot;&quot;) or no -r option is given a default
      string of &quot;%m%d%H%M%S&quot; is used.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">remove lock file(s) after initializing the modem. This
      allows outgoing calls to proceed when efax is waiting for an incoming
      call. If efax detects modem activity it will attempt to re-lock the
      device. If the modem has been locked by the other program efax will exit
      and return 1 (``busy''). Normally a new efax process is then started by
      init(8). The new efax process will then check periodically until the lock
      file disappears and then re-initialize the modem.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t <i>num [file</i>...]</b></dt>
  <dd class="It-tag">dial telephone number <i>num</i> and send the fax image
      files <i>file</i>.... If used, this must be the last argument on the
      command line. The telephone number <i>num</i> is a string that may contain
      any dial modifiers that the modem supports such as a T prefix for tone
      dialing or commas for delays. If no file names are given the remote fax
      machine will be polled. If no -t argument is given efax will answer the
      phone and attempt to receive a fax.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">use UTF-8 and not locale codeset (if different) for
      messages to stderr and stdout (see also the -n option) - this is useful if
      efax is used with a front-end which expects UTF-8 encoding of
      internationalized strings.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v <i>strng</i></b></dt>
  <dd class="It-tag">select types of messages to be printed. Each
      <i>lower-case</i> letter in <i>strng</i> enables one type of message:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 12.00ex;"><b>e -</b> errors
<div>&#x00A0;</div>
<b>w -</b> warnings
<div>&#x00A0;</div>
<b>i -</b> session progress information
<div>&#x00A0;</div>
<b>n -</b> capability negotiation information
<div>&#x00A0;</div>
<b>c -</b> modem (AT) commands and responses
<div>&#x00A0;</div>
<b>h -</b> HDLC frame data (Class 1 only)
<div>&#x00A0;</div>
<b>m -</b> modem output
<div>&#x00A0;</div>
<b>a -</b> program arguments
<div>&#x00A0;</div>
<b>r -</b> reception error details
<div>&#x00A0;</div>
<b>t -</b> transmission details
<div>&#x00A0;</div>
<b>f -</b> image file details
<div>&#x00A0;</div>
<b>x -</b> lock file processing
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="margin-left: 9.00ex;">Up to two -v options may be used. The first is
  for messages printed to the standard error and the second is for messages to
  the standard output. The default is &quot;ewin&quot; to the standard error
  only.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b></dt>
  <dd class="It-tag">wait for an OK or CONNECT prompt instead of issuing an
      answer ( <b>ATA</b>) command to receive a fax. Use this option when the
      modem is set to auto-answer (using S0= <i>n</i>) or if another program has
      already answered the call.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x <i>lkf</i></b></dt>
  <dd class="It-tag">use a UUCP-style lock file <i>lkf</i> to lock the modem
      device before opening it. If the device is locked, efax checks every 15
      seconds until it is free. Up to 16 -x options may be used if there are
      several names for the same device. A `#' prefix on the file name creates
      an binary rather than text (HDB-style) lock file. This is the reverse of
      what was used by previous efax versions.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FAX_FILE_FORMATS"><a class="selflink" href="#FAX_FILE_FORMATS">FAX
  FILE FORMATS</a></h1>
efax can read the same types of files as <b>efix(1)</b> including text, T.4
  (Group 3), PBM, single- and multi-page TIFF (G3 and uncompressed). efax
  automatically determines the type of file from its contents. TIFF files are
  recommended as they contain information about the image size and resolution.
<div style="height: 1.00em;">&#x00A0;</div>
Each page to be sent should be converted to a separate TIFF format file with
  Group 3 (G3) compression. Received files are also stored in this format. The
  EXAMPLES section below shows how efix and other programs can be used to
  create, view and print these files.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPERATING_SYSTEM_REQUIREMENTS"><a class="selflink" href="#OPERATING_SYSTEM_REQUIREMENTS">OPERATING
  SYSTEM REQUIREMENTS</a></h1>
The operating system must provide short response times to avoid protocol
  timeouts. For Class 2 and 2.0 modems the delay should not exceed 1 or 2
  seconds.
<div style="height: 1.00em;">&#x00A0;</div>
When using Class 1 modems the program must respond to certain events within 55
  milliseconds. Longer delays may cause the fax protocol to fail in certain
  places (between DCS and TCF or between RTC and MPS). Class 1 modems should
  therefore not be used on systems that cannot guarantee that the program will
  respond to incoming data in less than 55 milliseconds. In particular, some
  intelligent serial cards and terminal servers may introduce enough delay to
  cause problems with Class 1 operation.
<div style="height: 1.00em;">&#x00A0;</div>
The operating system must also provide sufficient low-level buffering to allow
  uninterrupted transfer of data between the modem and a disk file at the
  selected baud rate, typically 9600 bps. Since the fax protocol does not
  provide end-to-end flow control the effectiveness of flow control while
  receiving is limited by the size of the modem's buffer. This can be less than
  100 bytes. Efax does not use flow control during reception.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="MODEM_REQUIREMENTS"><a class="selflink" href="#MODEM_REQUIREMENTS">MODEM
  REQUIREMENTS</a></h1>
The &quot;Group&quot; is the protocol used to send faxes between fax machines.
  Efax supports the Group 3 protocol used over the public telephone network.
<div style="height: 1.00em;">&#x00A0;</div>
The &quot;Class&quot; is the protocol used by computers to control fax modems.
  Efax supports Class 1, 2 and 2.0 fax modems.
<div style="height: 1.00em;">&#x00A0;</div>
Most fax modems use XON/XOFF flow control when in fax mode. This type of flow
  control adds very little overhead for fax use. Many modems have unreliable
  hardware (RTS/CTS) flow control in fax mode. By default efax enables only
  XON/XOFF flow control and the -oh option must be used to add hardware flow
  control.
<div style="height: 1.00em;">&#x00A0;</div>
While some modems have serial buffers of about 1k bytes, many inexpensive modems
  have buffers of about one hundred bytes and are thus more likely to suffer
  overruns when sending faxes.
<div style="height: 1.00em;">&#x00A0;</div>
A few older modems may need a delay between commands of more than the default
  value used by efax (100 milliseconds). If the delay is too short, commands may
  not echo properly, may time out, or may give inconsistent responses. Use one
  or more <b>-oz</b> options to increase the delay between modem initialization
  commands and use the E0 modem initialization command to disable echoing of
  modem commands.
<div style="height: 1.00em;">&#x00A0;</div>
By default efax sends DC2 to start the data flow from the modem when receiving
  faxes from Class 2 modems. A few older modems require XON instead. Use of DC2
  would cause the modem to give an error message and/or the program to time out.
  The <b>-ox</b> option should be used in this case.
<div style="height: 1.00em;">&#x00A0;</div>
A few older Class 2 modems (e.g. some Intel models) don't send DC2 or XON to
  start the data flow to the modem when sending faxes. After waiting 2 seconds
  efax will print a warning and start sending anyways.
<div style="height: 1.00em;">&#x00A0;</div>
A very few Class 2 modems do not reverse the bit order (MSB to LSB) by default
  on receive. This might cause errors when trying to display or print the
  received files. The <b>-or</b> option can be used in this case.
<div style="height: 1.00em;">&#x00A0;</div>
Some inexpensive &quot;9600 bps&quot; fax modems only <i>transmit</i> at 9600
  bps and reception is limited to 4800 bps.
<div style="height: 1.00em;">&#x00A0;</div>
The following Class 1 modems have been reported to work with efax: AT&amp;T
  DataPort, Cardinal Digital Fax Modem (14400), Digicom Scout+, Motorola
  Lifestyle 28.8, Motorola Power 28.8, QuickComm Spirit II, Smartlink
  9614AV-Modem, Supra Faxmodem 144LC, USR Courier V.32bis Terbo, USR Sportster
  (V.32 and V.34), Zoom AFC 2.400, Zoom VFX14.4V.
<div style="height: 1.00em;">&#x00A0;</div>
The following Class 2 modems have been reported to work with efax: 14k4 Amigo
  Communion fax/modem, Adtech Micro Systems 14.4 Fax/modem, askey modem type
  1414VQE, AT&amp;T DataPort, ATT/Paradyne, AT&amp;T Paradyne PCMCIA, Boca
  modem, BOCA M1440E, Crosslink 9614FH faxmodem, FuryCard DNE 5005, GVC 14.4k
  internal, Intel 14.4 fax modem, Megahertz 14.4, , Microcom DeskPorte FAST ES
  28.8, Motorola UDS FasTalk II, MultiTech 1432MU, Practical Peripherals
  PM14400FXMT, Supra V32bis, Telebit Worldblazer, TKR DM-24VF+, Twincom 144/DFi,
  ViVa 14.4/Fax modem, Vobis Fax-Modem (BZT-approved), Zoom VFX14.4V, ZyXEL
  U-1496E[+], ZyXEL Elite 2864I.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="MODEM_INITIALIZATION_OPTIONS"><a class="selflink" href="#MODEM_INITIALIZATION_OPTIONS">MODEM
  INITIALIZATION OPTIONS</a></h1>
The required modem initialization commands are generated by efax. Additional
  commands may be supplied as command-line arguments. The modem must be set up
  to issue verbose(text) result codes. The following command does this and is
  sent by efax before trying to initialize the modem.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Q0V1</b></dt>
  <dd class="It-tag">respond to commands with verbose result codes
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
The following commands may be useful for special purposes:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>X3</b></dt>
  <dd class="It-tag">don't wait for dial tone before dialing. This may be used
      to send a fax when the call has already been dialed manually. In this case
      use an empty string (&quot;&quot;) as the first argument to the <b>-t</b>
      command. Use <b>X4</b> (usual default) to enable all result codes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>M2</b></dt>
  <dd class="It-tag">leave the monitor speaker turned on for the duration of the
      call (use <b>M0</b> to leave it off).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>L0</b></dt>
  <dd class="It-tag">turn monitor speaker volume to minimum (use <b>L3</b> for
      maximum).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>E0</b></dt>
  <dd class="It-tag">disable echoing of modem commands. See the Resolving
      Problems section below.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&amp;D2</b></dt>
  <dd class="It-tag">returns the modem to command mode when DTR is dropped. The
      program drops DTR at the start and end of the call if it can't get a
      response to a modem command. You can use <b>&amp;D3</b> to reset the modem
      when DTR is dropped.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>S7=120</b></dt>
  <dd class="It-tag">wait up to two minutes (120 seconds) for carrier. This may
      be useful if the answering fax machine takes a long time to start the
      handshaking operation (e.g. a combined fax/answering machine with a long
      announcement).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CAPABILITIES"><a class="selflink" href="#CAPABILITIES">CAPABILITIES</a></h1>
The capabilities of the local hardware and software can be set using a string of
  8 digits separated by commas:
<div style="height: 1.00em;">&#x00A0;</div>
<b><i>vr</i>,<i>br</i>,<i>wd</i>,<i>ln</i>,<i>df</i>,<i>ec</i>,<i>bf</i>,<i>st</i></b>
<div style="height: 1.00em;">&#x00A0;</div>
where:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><i>vr <i> (vertical resolution) =</i></i></dt>
  <dd class="It-tag">0 for 98 lines per inch
    <div>&#x00A0;</div>
    1 for 196 lpi
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>br <i> (bit rate) =</i></i></dt>
  <dd class="It-tag">0 for 2400 bps
    <div>&#x00A0;</div>
    1 for 4800
    <div>&#x00A0;</div>
    2 for 7200
    <div>&#x00A0;</div>
    3 for 9600
    <div>&#x00A0;</div>
    4 for 12000 (V.17)
    <div>&#x00A0;</div>
    5 for 14400 (V.17)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>wd <i> (width) =</i></i></dt>
  <dd class="It-tag">0 for 8.5&quot; (21.5 cm) page width
    <div>&#x00A0;</div>
    1 for 10&quot; (25.5 cm)
    <div>&#x00A0;</div>
    2 for 12&quot; (30.3 cm)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>ln <i> (length) =</i></i></dt>
  <dd class="It-tag">0 for 11&quot; (A4: 29.7 cm) page length
    <div>&#x00A0;</div>
    1 for 14&quot; (B4: 36.4 cm)
    <div>&#x00A0;</div>
    2 for unlimited page length
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>df <i> (data format) =</i></i></dt>
  <dd class="It-tag">0 for 1-D coding
    <div>&#x00A0;</div>
    1 for 2-D coding (not supported)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>ec <i> (error correction) =</i></i></dt>
  <dd class="It-tag">0 for no error correction
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>bf <i> (binary file) =</i></i></dt>
  <dd class="It-tag">0 for no binary file transfer
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>st <i> (minimum scan time) =</i></i></dt>
  <dd class="It-tag">0 for zero delay per line
    <div>&#x00A0;</div>
    1 for 5 ms per line
    <div>&#x00A0;</div>
    3 for 10 ms per line
    <div>&#x00A0;</div>
    5 for 20 ms per line
    <div>&#x00A0;</div>
    7 for 40 ms per line
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
When <i>receiving</i> a fax the <i>vr</i>, <i>wd</i>, and <i>ln</i> fields of
  the capability string should be set to the maximum values that your display
  software supports. The default is 196 lpi, standard (8.5&quot;/21.5cm) width
  and unlimited length.
<div style="height: 1.00em;">&#x00A0;</div>
When <i>sending</i> a fax efax will determine <i>vr</i> and <i>ln</i> from the
  image file and set <i>wd</i> to the default.
<div style="height: 1.00em;">&#x00A0;</div>
If the receiving fax machine does not support high resolution ( <i>vr</i>=1)
  mode, efax will reduce the resolution by combining pairs of scan lines. If the
  receiving fax machine does not support the image's width then efax will
  truncate or pad as required. Most fax machines can receive <i>ln</i> up to 2.
  Few machines support values of <i>wd</i> other than 0.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HEADERS"><a class="selflink" href="#HEADERS">HEADERS</a></h1>
efax adds blank scan lines at the top of each image when it is sent. This allows
  room for the page header but increases the length of the image (by default
  about 0.1&quot; or 2.5mm of blank space is added).
<div style="height: 1.00em;">&#x00A0;</div>
The header placed in this area typically includes the date and time, identifies
  the, and shows the page number and total pages. Headers cannot be disabled but
  the header string can be set to a blank line.
<div style="height: 1.00em;">&#x00A0;</div>
The default font for generating the headers is the built-in 8x16 pixel font
  scaled to 12x24 pixels (about 9 point size).
<div style="height: 1.00em;">&#x00A0;</div>
Note that both efax and efix have -f options to specify the font. efIx uses the
  font to generate text when doing text-to-fax conversions (during &quot;fax
  make&quot;) while efAx uses the font to generate the header (during &quot;fax
  send&quot;).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SESSION_LOG"><a class="selflink" href="#SESSION_LOG">SESSION
  LOG</a></h1>
A session log is written to the standard error stream. This log gives status and
  error messages from the program as selected by the <b>-v</b> option. A time
  stamp showing the full time or just minutes and seconds is printed before each
  message. Times printed along with modem responses also show milliseconds.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
The program returns an error code as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">The fax was successfully sent or received.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">The dialed number was busy or the modem device was in use.
      Try again later.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">Something failed (e.g. file not found or disk full). Don't
      retry. Check the session log for more details.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3</dt>
  <dd class="It-tag">Modem protocol error. The program did not receive the
      expected response from the modem. The modem may not have been properly
      initialized, the correct <b>-o</b> options were not used, or a bug report
      may be in order. Check the session log for more details.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4</dt>
  <dd class="It-tag">The modem is not responding. Operator attention is
      required. Check that the modem is turned on and connected to the correct
      port.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">5</dt>
  <dd class="It-tag">The program was terminated by a signal.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>Creating fax (G3) files</b>
<div style="height: 1.00em;">&#x00A0;</div>
The efix program can be used to convert text files to TIFF-G3 format. For
  example, the following command will convert the text file <b>letter</b> to the
  files <b>letter.001</b>, <b>letter.002</b>, etc,:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efix -nletter.%03d letter
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Ghostscript's <b>tiffg3</b> driver can generate fax files in TIFF-G3 format from
  postscript files. For example, the command:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
 gs -q -sDEVICE=tiffg3 -dNOPAUSE \
	-sOutputFile=letter.%03d letter.ps &lt;/dev/null
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
will convert the Postscript file <b>letter.ps</b> into high-resolution (
  <i>vr</i>=1) G3 fax image files <b>letter.001, letter.002,</b> ...
<div style="height: 1.00em;">&#x00A0;</div>
The images should have margins of at least 1/2 inch (1 cm) since the fax
  standard only requires that fax machines print a central portion of the image
  196.6mm (7.7 inches) wide by 281.5mm (11.1 inches) high.
<div style="height: 1.00em;">&#x00A0;</div>
The efix program can also insert bitmaps in images to create letterhead,
  signatures, etc.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Printing fax files</b>
<div style="height: 1.00em;">&#x00A0;</div>
You can use the efix program to print faxes on Postscript or HP-PCL (LaserJet)
  printers. For example, to print the received fax file <b>reply.001</b> on a
  Postscript printer use the command:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efix -ops reply.001 | lpr
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
<b>Sending fax files</b>
<div style="height: 1.00em;">&#x00A0;</div>
The following command will dial the number 222-2222 using tone dialing and send
  a two-page fax from the TIFF-G3 files letter.001 and letter.002 using the fax
  modem connected to device /dev/cua1.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efax -d /dev/cua1 \
     -t T222-2222 letter.001 letter.002
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
<b>Manual answer</b>
<div style="height: 1.00em;">&#x00A0;</div>
You can use efax to answer the phone immediately and start fax reception. Use
  this mode if you need to answer calls manually to see if they are fax or
  voice.
<div style="height: 1.00em;">&#x00A0;</div>
For example, the following command will make the fax modem on device
  <b>/dev/ttyS1</b> answer the phone and attempt to receive a fax. The received
  fax will be stored in the files <b>reply.001</b>, <b>reply.002</b>, and so on.
  The modem will identify itself as &quot;555 1212&quot; and receive faxes at
  high or low resolution ( <i>vr</i>=1), at up to 14.4 kbps (<i>br</i>=5).
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efax -d /dev/ttyS1 -l &quot;555 1212&quot; \
   -c 1,5 -r reply
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
<b>Automatic answer</b>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>-w</b> option makes efax wait for characters to become available from the
  modem (indicating an incoming call) before starting fax reception. Use the
  <b>-w</b> option and a <b>-i</b>S0=<i>n</i> option to answer the phone after
  <i>n</i> rings. The example below will make the modem answer incoming calls in
  fax mode on the fourth ring and save the received faxes using files names
  corresponding to the reception date and time.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efax -d /dev/ttyb -w -iS0=4 2&gt;&amp;1 &gt;&gt; fax.log
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
<b>Sharing the modem with outgoing calls</b>
<div style="height: 1.00em;">&#x00A0;</div>
The modem device can be shared by programs that use the UUCP device locking
  protocol. This includes pppd, chat, minicom, kermit, uucico, efax, cu, and
  many others others. However, locking will only work if all programs use the
  same lock file.
<div style="height: 1.00em;">&#x00A0;</div>
efax will lock the modem device before opening it if one or more UUCP lock file
  names are given with <b>-x</b> options. Most programs place their lock files
  in the /usr/spool/uucp or /var/lock directories and use the name LCK..
  <i>dev</i> where <i>dev</i> is the name of the device file in the /dev
  directory that is to be locked.
<div style="height: 1.00em;">&#x00A0;</div>
If the <b>-s</b> (share) option is used, the lock file is removed while waiting
  for incoming calls so other programs can use the same device.
<div style="height: 1.00em;">&#x00A0;</div>
If efax detects another program using the modem while it is waiting to receive a
  fax, efax exits with a termination code of 1. A subsequent efax process using
  this device will wait until the other program is finished before
  re-initializing the modem and starting to wait for incoming calls again.
<div style="height: 1.00em;">&#x00A0;</div>
Programs that try to lock the modem device by using device locking facilities
  other than UUCP lock files not be able to use this arbitration mechanism
  because the device will still be open to the efax process. In this case you
  will need to kill the efax process (e.g. &quot;fax stop&quot;) before starting
  the other program.
<div style="height: 1.00em;">&#x00A0;</div>
When efax is waiting for a fax it leaves the modem ready to receive in fax mode
  but removes the lock file. When a slip or PPP program takes over the modem
  port by setting up its own lock file efax cannot send any more commands to the
  modem -- not even to reset it. Therefore the other program has to set the
  modem back to data mode when it starts up. To do this add a modem reset
  command (send ATZ expect OK) to the beginning of your slip or PPP chat script.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Accepting both fax and data calls</b>
<div style="height: 1.00em;">&#x00A0;</div>
Many modems have an adaptive data/fax answer mode that can be enabled using the
  <b>-j+FAE=1</b> (for Class 1) or <b>-jFAA=1</b> (for Class 2[.0])
  initialization string. The type of call (data or fax) can then be deduced from
  the modem's responses.
<div style="height: 1.00em;">&#x00A0;</div>
Some modems have limited adaptive answer features (e.g. only working properly at
  certain baud rates or only in Class 2) or none at all. In this case use the
  initialization string <b>-i+FCLASS=0</b> to answer in data mode first and the
  <b>-oa</b> option to then hang up and try again in fax mode if the first
  answer attempt was not successful. This method only works if your telephone
  system waits a few seconds after you hang up before disconnecting incoming
  calls.
<div style="height: 1.00em;">&#x00A0;</div>
If the <b>-g</b> option is used then the option's argument will be run as a
  shell command when an incoming data call is detected. Typically this command
  will exec <b>getty</b>(8). This program should expect to find the modem
  already off-hook and a lock file present so it should not try to hang up the
  line or create a lock file. Note that the modem should be set up to report the
  DCE-DTE (modem-computer, e.g. CONNECT 38400) speed, not the DCE-DCE
  (modem-modem, e.g. CONNECT 14400) speed. For many modems the initialization
  option -iW0 will set this.
<div style="height: 1.00em;">&#x00A0;</div>
The following command will make efax answer incoming calls on <b>/dev/cua1</b>
  on the second ring. This device will be locked using two different lock files
  but these lock files will be removed while waiting for incoming calls (
  <b>-s</b>). If a data call is detected, the <b>getty</b> program will be run
  to initialize the terminal driver and start a <b>login</b>(1) process.
  Received fax files will be stored using names like <b>Dec02-12.32.33.001</b>,
  in the <b>/usr/spool/fax/incoming</b> directory and the log file will be
  appended to <b>/usr/spool/fax/faxlog.cua1</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
efax -d /dev/cua1  -j '+FAA=1' \
   -x /usr/spool/uucp/LCK..cua1 \
   -x /usr/spool/uucp/LCK..ttyS1 \
   -g &quot;exec /sbin/getty -h /dev/cua1 %d&quot; \
   -iS0=2 -w -s \
   -r &quot;/usr/spool/fax/incoming/%b%d-%H.%I.%S&quot; \
   &gt;&gt; /usr/spool/fax/faxlog.cua1 2&gt;&amp;1
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Note that adaptive answer of either type will not work for all callers. For some
  data calls the duration of the initial data-mode answer may be too short for
  data handshaking to complete. In other cases this duration may be so long that
  incoming fax calls will time out before efax switches to fax mode. In
  addition, some calling fax modems mistake data-mode answering tones for fax
  signaling tones and initiate fax negotiation too soon. If you use software
  adaptive answer you can reduce the value of the initial data-mode answer (set
  by TO_DATAF in efax.c) to get more reliable fax handshaking or increase it for
  more reliable data handshaking. However, if you need to provide reliable fax
  and data service to all callers you should use separate phone numbers for the
  two types of calls.
<div style="height: 1.00em;">&#x00A0;</div>
When a call is answered the modem goes on-line with the computer-to-modem baud
  rate fixed at the speed used for the most recent AT command. When efax is
  waiting for a fax or data call it sets the interface speed to 19200 bps since
  this is the speed required for fax operation. This prevents full use of
  28.8kbps modem capabilities.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="USING_INIT_TO_RUN_EFAX"><a class="selflink" href="#USING_INIT_TO_RUN_EFAX">USING
  INIT TO RUN EFAX</a></h1>
efax can answer all incoming calls if you place an entry for efax in
  <b>/etc/inittab</b> (for SysV-like systems) or <b>/etc/ttytab</b> (for
  BSD-like systems). The <b>init</b>(8) process will run a new copy of efax when
  the system boots up and whenever the previous efax process terminates. The
  inittab or ttytab entry should invoke efax by running the <b>fax</b> script
  with an <b>answer</b> argument.
<div style="height: 1.00em;">&#x00A0;</div>
For example, placing the following line in <b>/etc/inittab</b> (and running
  &quot;kill -1 1&quot;) will make init run the <b>fax</b> script with the
  argument <b>answer</b> every time previous process terminates and <b>init</b>
  is in runlevel 4 or 5.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
s1:45:respawn:/bin/sh /usr/bin/fax answer
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
For BSD-like systems (e.g. SunOS), a line such as the following in
  <b>/etc/ttytab</b> will have the same effect:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
ttya &quot;/usr/local/bin/fax answer&quot; unknown on
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
You should protect the fax script and configuration files against tampering
  since init will execute them as a privileged (root) process. If you will be
  allowing data calls via getty and login you should ensure that your system is
  reasonably secure (e.g. that all user id's have secure passwords).
<div style="height: 1.00em;">&#x00A0;</div>
If efax exec()'s getty properly but you get a garbled login prompt then there is
  probably a baud rate mismatch between the modem and the computer. First, check
  the efax log file to make sure the modem's CONNECT response reported the
  serial port speed (e.g. 19200), <b>not</b> the modem-modem speed (e.g. 14400).
  Next, check the getty options and/or configuration files (e.g. /etc/gettydefs)
  for that particular baud rate. Then run getty manually with the same arguments
  and verify the port settings using ``stty &lt;/dev/XXX''. Note that you'll
  probably want to enable hardware flow control for data connections (-h for
  agetty, CRTSCTS for getty_ps).
<div style="height: 1.00em;">&#x00A0;</div>
A few programs won't work properly when efax is set up to answer calls because
  they don't create lock files. You can put the shell script ``wrapper'' below
  around such programs to make them work properly. Change BIN and LOCKF to suit.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
#!/bin/sh
BIN=/bin/badprogram
LOCKF=/var/spool/uucp/LCK..cua1
if [ -f $LOCKF ]
then
        echo lock file $LOCKF exists
        exit 1
else
        printf &quot;%10d0 $$ &gt;$LOCKF
        $BIN $*
        rm $LOCKF
fi
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="DELIVERING_RECEIVED_FAXES_BY_E-MAIL"><a class="selflink" href="#DELIVERING_RECEIVED_FAXES_BY_E-MAIL">DELIVERING
  RECEIVED FAXES BY E-MAIL</a></h1>
The &quot;fax answer&quot; script described above can be configured to e-mail
  the fax files received by the previous fax answer process to a &quot;fax
  manager&quot; who can then forward the fax to the correct recipient. The
  received fax files are send as MIME attachments, one file per page, using the
  ``base64'' text encoding and the ``image/tiff'' file format.
<div style="height: 1.00em;">&#x00A0;</div>
To view the fax images directly from your e-mail reader you will have to
  configure it with an application that can display files of type image/tiff.
  Typically this is specified in a ``mailcap'' file. For example, placing the
  following line in /etc/mailcap will cause the fax file attachments to be
  displayed using the ``fax view'' command.
<div style="height: 1.00em;">&#x00A0;</div>
image/tiff; fax view %s
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SENDING_FAXES_USING_THE_PRINT_SPOOLER"><a class="selflink" href="#SENDING_FAXES_USING_THE_PRINT_SPOOLER">SENDING
  FAXES USING THE PRINT SPOOLER</a></h1>
You can configure a &quot;fax&quot; printer into the lpr print spooler that will
  fax a document out using efax instead of printing it. This allows a network
  server running efax to send faxes on behalf of other machines, including
  non-Unix clients. In the following steps use the directories specified in the
  fax script if they are different than /usr/bin and /var/spool/fax (FAXDIR). To
  set up a fax printer do the following as root:
<div style="height: 1.00em;">&#x00A0;</div>
(1) Create a link to the fax script called ``faxlpr'' so the fax script can
  determine when it is being invoked from the print spooler:
<div style="height: 1.00em;">&#x00A0;</div>
ln -s /usr/bin/fax /usr/bin/faxlpr
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
(2) Edit /etc/printcap and add an entry such as:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
fax:lp=/dev/null:sd=/var/spool/fax:if=/usr/bin/faxlpr:
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
to define a printer called &quot;fax&quot;. Print files will be spooled to the
  /var/spool/fax (sd=) directory and then piped to the /usr/bin/faxlpr filter
  (if=). Error messages will appear on /dev/console.
<div style="height: 1.00em;">&#x00A0;</div>
(3) Create and/or set the permissions to allow anyone to read and write in the
  fax spool directory. For example:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
mkdir /var/spool/fax
chmod 777 /var/spool/fax
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
(4) Create a printer daemon lock file that is readable by anyone:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
touch /var/spool/fax/lock
chmod 644 /var/spool/fax/lock
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
You should now be able to send a fax using the lpr interface by using a command
  such as:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
lpr -P fax -J &quot;555 1212&quot; file.ps
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
where the -J option is used to specify the phone number or alias to be dialed.
<div style="height: 1.00em;">&#x00A0;</div>
Note that if more than one file is given on the command line they will be
  concatenated before being passed to &quot;fax send&quot;. TIFF-G3, Postscript
  or PBM files must therefore be sent one file at a time although TIFF and
  Postscript files may contain multiple pages. Only multiple <i>text</i> files
  can be sent in one command. Page breaks in text files can be marked with
  form-feed characters. Files will be converted and sent at the default (high)
  resolution.
<div style="height: 1.00em;">&#x00A0;</div>
You can use lpq(1) to check the fax queue, lprm(1) to remove fax jobs and lpc(8)
  to control the spooler. In each case use the -Pfax option to specify the fax
  ``printer.'' A log file will be mailed to the user when the fax is sent.
<div style="height: 1.00em;">&#x00A0;</div>
You should also be able to send a fax from any networked computer that has
  lpr-compatible remote printing software and that allows you to set the job
  name (-J option) to an arbitrary string. Such software is available for most
  computers.
<div style="height: 1.00em;">&#x00A0;</div>
See the lpd(8) and printcap(5) man pages for information on the print spooler
  and for restricting access by host name (/etc/host.lpd) or by user group (the
  `rg' printcap entry).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="RESOLVING_PROBLEMS"><a class="selflink" href="#RESOLVING_PROBLEMS">RESOLVING
  PROBLEMS</a></h1>
Double check the configuration setup in the first part of the fax script,
  particularly the modem device name and the lock file names.
<div style="height: 1.00em;">&#x00A0;</div>
If efax hangs when trying to open the modem device (typically /dev/ttyX), the
  device is either already in use by another process (e.g. pppd) or it requires
  the carrier detect line to be true before it can be opened. Many systems
  define an alternate device name for the same physical device (typically cuaX)
  that can be opened even if carrier is not present or other programs are
  already using it.
<div style="height: 1.00em;">&#x00A0;</div>
If responses to modem initialization commands are being lost or generated at
  random, another processes (e.g. getty or an efax auto-answer process) may be
  trying to use the modem at the same time. Try running efax while this other
  program is running. If efax does not report &quot;/dev/ttyX locked or busy.
  waiting.&quot; then the lock files names are not specified correctly.
<div style="height: 1.00em;">&#x00A0;</div>
Attempt to send a fax. Check that the modem starts making the calling signal
  (CNG, a 0.5 second beep every 3 seconds) as soon as it's finished dialing.
  This shows the modem is in fax mode. You may need to set the SPKR variable to
  -iM2L3 to monitor the phone line to do this.
<div style="height: 1.00em;">&#x00A0;</div>
Listen for the answering fax machine and check that it sends the answer signal
  (CED, a 3 second beep) followed by &quot;warbling&quot; sounds (DIS frames)
  every 3 seconds. If you hear a continuous sound (tones or noise) instead, then
  you've connected to a data modem instead.
<div style="height: 1.00em;">&#x00A0;</div>
Your modem should send back its own warble (DCS frame) in response to DIS
  immediately followed by 1.5 seconds of noise (a channel check). If everything
  is OK, the receiving end will send another warble (CFR frame) and your modem
  will start to send data. If you have an external modem, check its LEDs. If
  flow control is working properly the modem's send data (SD) LED will turn off
  periodically while the fax data is sent.
<div style="height: 1.00em;">&#x00A0;</div>
Check the message showing the line count and the average bit rate when the page
  transmission is done. Low line counts (under 1000 for a letter size image) or
  the warning &quot;fax output buffer overflow&quot; while sending indicate that
  the image data format is incorrect. Check the file being sent using the
  &quot;fax view&quot; command.
<div style="height: 1.00em;">&#x00A0;</div>
If you get the error message ``flow control did not work'' then flow control was
  not active. This usually results in a garbled transmission and the receiving
  machine may reject the page, abort the call, print a distorted or blank image
  and/or hang up.
<div style="height: 1.00em;">&#x00A0;</div>
The warning &quot;characters received while sending&quot; or an &lt;XOFF&gt;
  character appearing after the transmission means that the operating system
  ignored the modem's XOFF flow control character. Ensure that you are not
  running other programs such as getty or pppd at the same time as efax since
  they will turn off xon/xoff flow control.
<div style="height: 1.00em;">&#x00A0;</div>
If you cannot get flow control to work properly then enable ``virtual flow
  control'' with the <b>-of</b> option or hardware flow control with the
  <b>-oh</b> option.
<div style="height: 1.00em;">&#x00A0;</div>
Check that the remote machine confirms reception with a +FPTS:1 response (Class
  2) or an MCF frame (Class 1).
<div style="height: 1.00em;">&#x00A0;</div>
For Class 2 modems, the error message &quot;abnormal call termination (code
  <i>nn</i>)&quot; indicates that the modem detected an error and hung up.
<div style="height: 1.00em;">&#x00A0;</div>
Many companies advertise services that will fax back information on their
  products. These can be useful for testing fax reception.
<div style="height: 1.00em;">&#x00A0;</div>
The message &quot;run length buffer overflow&quot; when receiving indicates an
  error with the image data format. You may need to use the <b>-or</b> option
  with certain Class 2 modems.
<div style="height: 1.00em;">&#x00A0;</div>
If efax displays the message &quot;can't happen (&lt;details&gt;)&quot; please
  send a bug report to the author.
<div style="height: 1.00em;">&#x00A0;</div>
Finally, don't play &quot;option bingo,&quot; if you can't resolve the problem
  send a verbose log of the failed session (the output from <b>fax -v ...</b>)
  to the address below.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="WEB_PAGE"><a class="selflink" href="#WEB_PAGE">WEB
  PAGE</a></h1>
A Web Page with pointers to the latest version, known bugs and patches is
  available at:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">http://casas.ee.ubc.ca/efax/</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELATED_SOFTWARE"><a class="selflink" href="#RELATED_SOFTWARE">RELATED
  SOFTWARE</a></h1>
For Linux Systems
<div style="height: 1.00em;">&#x00A0;</div>
Independent packages provide more user-friendly interfaces to efax (xfax, tefax)
  and provide an e-mail-to-fax (Qfax) gateway using efax. All are available by
  anonymous FTP from metalab.unc.edu in /pub/Linux/apps/serialcomm/fax/.
<div style="height: 1.00em;">&#x00A0;</div>
For Amiga Systems
<div style="height: 1.00em;">&#x00A0;</div>
A port of an early version of efax for the Amiga is available as a component of
  a shareware voice mail package, AVM, distributed by Al Villarica
  (rvillari@cat.syr.edu).
<div style="height: 1.00em;">&#x00A0;</div>
Other Ports
<div style="height: 1.00em;">&#x00A0;</div>
efax is relatively easy to port. All system-dependent code is in
  <b>efaxos.c</b>. An early version of efax was ported to VMS. Version 0.8a was
  ported to Win32 by Luigi Capriotti. Contact the author if you would like to
  integrate the Win32 code into the current version.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Efax was written by Ed Casas. Please send comments or bug reports to
  edc@cce.com.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUG_REPORTS"><a class="selflink" href="#BUG_REPORTS">BUG
  REPORTS</a></h1>
Bug reports should include the operating system, the type of the modem and a
  copy of a verbose session log that demonstrates the problem. It's usually
  impossible to help without a verbose log. Please do <b>not</b> send fax image
  files.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
efax is copyright 1993 -- 1999 Ed Casas. It may be used, copied and modified
  under the terms of the GNU Public License.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DISCLAIMER"><a class="selflink" href="#DISCLAIMER">DISCLAIMER</a></h1>
Although <b>efax</b> has been tested it may have errors that will prevent it
  from working correctly on your system. Some of these errors may cause serious
  problems including loss of data and interruptions to telephone service.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
CCITT Recommendation T.30, &quot;Procedures for Document Facsimile Transmission
  in the General Switched Telephone Network&quot;. 1988
<div style="height: 1.00em;">&#x00A0;</div>
CCITT Recommendation T.4, &quot;Standardization of Group 3 Facsimile Apparatus
  for Document Transmission&quot;. 1988.
<div style="height: 1.00em;">&#x00A0;</div>
For documentation on Class 1 and Class 2 fax commands as implemented by
  Connexant (formerly Rockwell) modems see http://www.conexant.com/techinfo.
<div style="height: 1.00em;">&#x00A0;</div>
For the TIFF specification see
  http://partners.adobe.com/supportservice/devrelations/PDFS/TN/TIFF6.pdf or RFC
  2301 (ftp://ftp.isi.edu/in-notes/rfc2301.txt).
<div style="height: 1.00em;">&#x00A0;</div>
For information on Ghostscript see http://www.cs.wisc.edu/~ghost/.
<div style="height: 1.00em;">&#x00A0;</div>
The pbm utilities can be obtained by ftp from wuarchive.wustl.edu in
  /graphics/graphics/packages/NetPBM/netpbm-1mar1994.tar.gz.
<div style="height: 1.00em;">&#x00A0;</div>
PCX and many other file formats are described in: Gunter Born, The File Formats
  Handbook, International Thomson Computer Press, 1995.
<div style="height: 1.00em;">&#x00A0;</div>
The &quot;Fax Modem Source Book&quot; by Andrew Margolis, published by John
  Wiley &amp; Sons in 1994 (ISBN 0471950726), is a book on writing fax
  applications which includes source code.
<div style="height: 1.00em;">&#x00A0;</div>
Dennis Bodson et. al., &quot;FAX: Digital Facsimile Technology and
  Applications&quot;, Second Edition. Artech House, Boston. 1992.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>fax(1),</b> <b>efix(1),</b> <b>gs(1),</b> <b>init(8),</b> <b>inittab(5),</b>
  <b>ttytab(5),</b> <b>printcap(5),</b> <b>lpd(8),</b> <b>printf(3),</b>
  <b>strftime(3).</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Can't read TIFF files with more than 1 strip
<div style="height: 1.00em;">&#x00A0;</div>
Class 1 operation may fail if the program can't respond to certain data received
  from the modem within 55 milliseconds.
<div style="height: 1.00em;">&#x00A0;</div>
May fail if multitasking delays cause the received data to overflow the
  computer's serial device buffer or if an under-run of transmit data exceeds 5
  seconds.
<div style="height: 1.00em;">&#x00A0;</div>
Polling does not work.
<div style="height: 1.00em;">&#x00A0;</div>
Does not support 2-D coding, ECM, or BFT.</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 2007</td>
    <td class="foot-os">3rd Berkeley Distribution</td>
  </tr>
</table>
</body>
</html>
