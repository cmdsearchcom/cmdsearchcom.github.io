<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:05:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DUPLICITY(1) User Manuals DUPLICITY(1)</p>

<p style="margin-top: 1em">NAME <br>
duplicity - Encrypted incremental backup to local or remote
storage.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
For detailed descriptions for each command see chapter
ACTIONS.</p>

<p style="margin-top: 1em">duplicity [full|incremental]
[options] source_directory target_url</p>

<p style="margin-top: 1em">duplicity verify [options]
[--compare-data] [--file-to-restore &lt;relpath&gt;] [--time
time] source_url target_directory</p>

<p style="margin-top: 1em">duplicity collection-status
[options] [--file-changed &lt;relpath&gt;] target_url</p>

<p style="margin-top: 1em">duplicity list-current-files
[options] [--time time] target_url</p>

<p style="margin-top: 1em">duplicity [restore] [options]
[--file-to-restore &lt;relpath&gt;] [--time time] source_url
target_directory</p>

<p style="margin-top: 1em">duplicity remove-older-than
&lt;time&gt; [options] [--force] target_url</p>

<p style="margin-top: 1em">duplicity remove-all-but-n-full
&lt;count&gt; [options] [--force] target_url</p>

<p style="margin-top: 1em">duplicity
remove-all-inc-of-but-n-full &lt;count&gt; [options]
[--force] target_url</p>

<p style="margin-top: 1em">duplicity cleanup [options]
[--force] [--extra-clean] target_url</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Duplicity incrementally backs up files and folders into
tar-format volumes encrypted with GnuPG and places them to a
remote (or local) storage backend. See chapter URL FORMAT
<br>
for a list of all supported backends and how to address
them. Because duplicity uses librsync, incremental backups
are space efficient and only record the parts of files that
<br>
have changed since the last backup. Currently duplicity
supports deleted files, full Unix permissions, uid/gid,
directories, symbolic links, fifos, etc., but not hard
links.</p>

<p style="margin-top: 1em">If you are backing up the root
directory /, remember to --exclude /proc, or else duplicity
will probably crash on the weird stuff in there.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Here is an example of a backup, using sftp to back up
/home/me to some_dir on the other.host machine:</p>

<p style="margin-top: 1em">duplicity /home/me
sftp://uid@other.host/some_dir</p>

<p style="margin-top: 1em">If the above is run repeatedly,
the first will be a full backup, and subsequent ones will be
incremental. To force a full backup, use the full
action:</p>

<p style="margin-top: 1em">duplicity full /home/me
sftp://uid@other.host/some_dir</p>

<p style="margin-top: 1em">or enforcing a full every other
time via --full-if-older-than &lt;time&gt; , e.g. a full
every month:</p>

<p style="margin-top: 1em">duplicity --full-if-older-than
1M /home/me sftp://uid@other.host/some_dir</p>

<p style="margin-top: 1em">Now suppose we accidentally
delete /home/me and want to restore it the way it was at the
time of last backup:</p>

<p style="margin-top: 1em">duplicity
sftp://uid@other.host/some_dir /home/me</p>

<p style="margin-top: 1em">Duplicity enters restore mode
because the URL comes before the local directory. If we
wanted to restore just the file &quot;Mail/article&quot; in
/home/me as it was three days ago into <br>
/home/me/restored_file:</p>

<p style="margin-top: 1em">duplicity -t 3D
--file-to-restore Mail/article
sftp://uid@other.host/some_dir /home/me/restored_file</p>

<p style="margin-top: 1em">The following command compares
the latest backup with the current files:</p>

<p style="margin-top: 1em">duplicity verify
sftp://uid@other.host/some_dir /home/me</p>

<p style="margin-top: 1em">Finally, duplicity recognizes
several include/exclude options. For instance, the following
will backup the root directory, but exclude /mnt, /tmp, and
/proc:</p>

<p style="margin-top: 1em">duplicity --exclude /mnt
--exclude /tmp --exclude /proc /
file:///usr/local/backup</p>

<p style="margin-top: 1em">Note that in this case the
destination is the local directory /usr/local/backup. The
following will backup only the /home and /etc directories
under root:</p>

<p style="margin-top: 1em">duplicity --include /home
--include /etc --exclude &rsquo;**&rsquo; /
file:///usr/local/backup</p>

<p style="margin-top: 1em">Duplicity can also access a
repository via ftp. If a user name is given, the environment
variable FTP_PASSWORD is read to determine the password:</p>

<p style="margin-top: 1em">FTP_PASSWORD=mypassword
duplicity /local/dir ftp://user@other.host/some_dir</p>

<p style="margin-top: 1em">ACTIONS <br>
Duplicity knows action commands, which can be finetuned with
options. <br>
The actions for backup (full,incr) and restoration (restore)
can as well be left out as duplicity detects in what mode it
should switch to by the order of target URL and local <br>
folder. If the target URL comes before the local folder a
restore is in order, is the local folder before target URL
then this folder is about to be backed up to the target URL.
<br>
If a backup is in order and old signatures can be found
duplicity automatically performs an incremental backup.</p>

<p style="margin-top: 1em">Note: The following explanations
explain some but not all options that can be used in
connection with that action command. Consult the OPTIONS
section for more detailed <br>
informations.</p>

<p style="margin-top: 1em">full &lt;folder&gt; &lt;url&gt;
<br>
Perform a full backup. A new backup chain is started even if
signatures are available for an incremental backup.</p>

<p style="margin-top: 1em">incr &lt;folder&gt; &lt;url&gt;
<br>
If this is requested an incremental backup will be
performed. Duplicity will abort if no old signatures can be
found.</p>

<p style="margin-top: 1em">verify [--compare-data] [--time
&lt;time&gt;] [--file-to-restore &lt;rel_path&gt;]
&lt;url&gt; &lt;local_path&gt; <br>
Restore backup contents temporarily file by file and compare
against the local path&rsquo;s contents. duplicity will exit
with a non-zero error level if any files are <br>
different. On verbosity level info (4) or higher, a message
for each file that has changed will be logged. <br>
The --file-to-restore option restricts verify to that file
or folder. The --time option allows to select a backup to
verify against. The --compare-data option enables <br>
data comparison (see below).</p>

<p style="margin-top: 1em">collection-status
[--file-changed &lt;relpath&gt;]&lt;url&gt; <br>
Summarize the status of the backup repository by printing
the chains and sets found, and the number of volumes in
each.</p>

<p style="margin-top: 1em">list-current-files [--time
&lt;time&gt;] &lt;url&gt; <br>
Lists the files contained in the most current backup or
backup at time. The information will be extracted from the
signature files, not the archive data itself. Thus the <br>
whole archive does not have to be downloaded, but on the
other hand if the archive has been deleted or corrupted,
this command will not detect it.</p>

<p style="margin-top: 1em">restore [--file-to-restore
&lt;relpath&gt;] [--time &lt;time&gt;] &lt;url&gt;
&lt;target_folder&gt; <br>
You can restore the full monty or selected folders/files
from a specific time. Use the relative path as it is printed
by list-current-files. Usually not needed as <br>
duplicity enters restore mode when it detects that the URL
comes before the local folder.</p>

<p style="margin-top: 1em">remove-older-than &lt;time&gt;
[--force] &lt;url&gt; <br>
Delete all backup sets older than the given time. Old backup
sets will not be deleted if backup sets newer than time
depend on them. See the TIME FORMATS section for <br>
more information. Note, this action cannot be combined with
backup or other actions, such as cleanup. Note also that
--force will be needed to delete the files instead <br>
of just listing them.</p>

<p style="margin-top: 1em">remove-all-but-n-full
&lt;count&gt; [--force] &lt;url&gt; <br>
Delete all backups sets that are older than the count:th
last full backup (in other words, keep the last count full
backups and associated incremental sets). count must <br>
be larger than zero. A value of 1 means that only the single
most recent backup chain will be kept. Note that --force
will be needed to delete the files instead of just <br>
listing them.</p>

<p style="margin-top: 1em">remove-all-inc-of-but-n-full
&lt;count&gt; [--force] &lt;url&gt; <br>
Delete incremental sets of all backups sets that are older
than the count:th last full backup (in other words, keep
only old full backups and not their increments). count <br>
must be larger than zero. A value of 1 means that only the
single most recent backup chain will be kept intact. Note
that --force will be needed to delete the files <br>
instead of just listing them.</p>

<p style="margin-top: 1em">cleanup [--force]
[--extra-clean] &lt;url&gt; <br>
Delete the extraneous duplicity files on the given backend.
Non-duplicity files, or files in complete data sets will not
be deleted. This should only be necessary after <br>
a duplicity session fails or is aborted prematurely. Note
that --force will be needed to delete the files instead of
just listing them.</p>

<p style="margin-top: 1em">OPTIONS <br>
--allow-source-mismatch <br>
Do not abort on attempts to use the same archive dir or
remote backend to back up different directories. duplicity
will tell you if you need this switch.</p>

<p style="margin-top: 1em">--archive-dir path <br>
The archive directory. NOTE: This option changed in 0.6.0.
The archive directory is now necessary in order to manage
persistence for current and future enhancements. As <br>
such, this option is now used only to change the location of
the archive directory. The archive directory should not be
deleted, or duplicity will have to recreate it <br>
from the remote repository (which may require decrypting the
backup contents).</p>

<p style="margin-top: 1em">When backing up or restoring,
this option specifies that the local archive directory is to
be created in path. If the archive directory is not
specified, the default will <br>
be to create the archive directory in
~/.cache/duplicity/.</p>

<p style="margin-top: 1em">The archive directory can be
shared between backups to multiple targets, because a
subdirectory of the archive dir is used for individual
backups (see --name ).</p>

<p style="margin-top: 1em">The combination of archive
directory and backup name must be unique in order to
separate the data of different backups.</p>

<p style="margin-top: 1em">The interaction between the
--archive-dir and the --name options allows for four
possible combinations for the location of the archive
dir:</p>

<p style="margin-top: 1em">1. neither specified (default)
<br>
~/.cache/duplicity/hash-of-url</p>

<p style="margin-top: 1em">2. --archive-dir=/arch, no
--name <br>
/arch/hash-of-url</p>

<p style="margin-top: 1em">3. no --archive-dir, --name=foo
<br>
~/.cache/duplicity/foo</p>

<p style="margin-top: 1em">4. --archive-dir=/arch,
--name=foo <br>
/arch/foo</p>

<p style="margin-top: 1em">--asynchronous-upload <br>
(EXPERIMENTAL) Perform file uploads asynchronously in the
background, with respect to volume creation. This means that
duplicity can upload a volume while, at the same <br>
time, preparing the next volume for upload. The intended
end-result is a faster backup, because the local CPU and
your bandwidth can be more consistently utilized. Use of
<br>
this option implies additional need for disk space in the
temporary storage location; rather than needing to store
only one volume at a time, enough storage space is <br>
required to store two volumes.</p>

<p style="margin-top: 1em">--cf-backend backend <br>
Allows the explicit selection of a cloudfiles backend.
Defaults to pyrax. Alternatively you might choose
cloudfiles.</p>

<p style="margin-top: 1em">--compare-data <br>
Enable data comparison of regular files on action verify.
This is disabled by default for performance reasons.</p>

<p style="margin-top: 1em">--dry-run <br>
Calculate what would be done, but do not perform any backend
actions</p>

<p style="margin-top: 1em">--encrypt-key key-id <br>
When backing up, encrypt to the given public key, instead of
using symmetric (traditional) encryption. Can be specified
multiple times. The key-id can be given in any of <br>
the formats supported by GnuPG; see gpg(1), section
&quot;HOW TO SPECIFY A USER ID&quot; for details.</p>

<p style="margin-top: 1em">--encrypt-secret-keyring
filename <br>
This option can only be used with --encrypt-key, and changes
the path to the secret keyring for the encrypt key to
filename This keyring is not used when creating a <br>
backup. If not specified, the default secret keyring is used
which is usually located at .gnupg/secring.gpg</p>

<p style="margin-top: 1em">--encrypt-sign-key key-id <br>
Convenience parameter. Same as --encrypt-key key-id
--sign-key key-id.</p>

<p style="margin-top: 1em">--exclude shell_pattern <br>
Exclude the file or files matched by shell_pattern. If a
directory is matched, then files under that directory will
also be matched. See the FILE SELECTION section for <br>
more information.</p>

<p style="margin-top: 1em">--exclude-device-files <br>
Exclude all device files. This can be useful for
security/permissions reasons or if rdiff-backup is not
handling device files correctly.</p>

<p style="margin-top: 1em">--exclude-filelist filename <br>
Excludes the files listed in filename, with each line of the
filelist interpreted according to the same rules as
--include and --exclude. See the FILE SELECTION section <br>
for more information.</p>

<p style="margin-top: 1em">--exclude-if-present filename
<br>
Exclude directories if filename is present. This option
needs to come before any other include or exclude
options.</p>

<p style="margin-top: 1em">--exclude-older-than time <br>
Exclude any files whose modification date is earlier than
the specified time. This can be used to produce a partial
backup that contains only recently changed files. See <br>
the TIME FORMATS section for more information.</p>

<p style="margin-top: 1em">--exclude-other-filesystems <br>
Exclude files on file systems (identified by device number)
other than the file system the root of the source directory
is on.</p>

<p style="margin-top: 1em">--exclude-regexp regexp <br>
Exclude files matching the given regexp. Unlike the
--exclude option, this option does not match files in a
directory it matches. See the FILE SELECTION section for
more <br>
information.</p>

<p style="margin-top: 1em">--extra-clean <br>
When cleaning up, be more aggressive about saving space. For
example, this may delete signature files for old backup
chains.</p>

<p style="margin-top: 1em">Caution: Without signature files
those old backup chains are unrestorable. Do not use
--extra-clean unless you know what you&rsquo;re doing.</p>

<p style="margin-top: 1em">See the cleanup argument for
more information.</p>

<p style="margin-top: 1em">--file-changed path <br>
This option may be given in collection-status mode, causing
only path status to be collect instead of the entire
contents of the backup archive. path should be given <br>
relative to the root of the directory backed up.</p>

<p style="margin-top: 1em">--file-prefix,
--file-prefix-manifest, --file-prefix-archive,
--file-prefix-signature <br>
Adds a prefix to all files, manifest files, archive files,
and/or signature files.</p>

<p style="margin-top: 1em">The same set of prefixes must be
passed in on backup and restore.</p>

<p style="margin-top: 1em">If both global and type-specific
prefixes are set, global prefix will go before type-specific
prefixes.</p>

<p style="margin-top: 1em">See also A NOTE ON FILENAME
PREFIXES</p>

<p style="margin-top: 1em">--file-to-restore path <br>
This option may be given in restore mode, causing only path
to be restored instead of the entire contents of the backup
archive. path should be given relative to the root <br>
of the directory backed up.</p>

<p style="margin-top: 1em">--full-if-older-than time <br>
Perform a full backup if an incremental backup is requested,
but the latest full backup in the collection is older than
the given time. See the TIME FORMATS section for <br>
more information.</p>

<p style="margin-top: 1em">--force <br>
Proceed even if data loss might result. Duplicity will let
the user know when this option is required.</p>

<p style="margin-top: 1em">--ftp-passive <br>
Use passive (PASV) data connections. The default is to use
passive, but to fallback to regular if the passive
connection fails or times out.</p>

<p style="margin-top: 1em">--ftp-regular <br>
Use regular (PORT) data connections.</p>

<p style="margin-top: 1em">--gio Use the GIO backend and
interpret any URLs as GIO would.</p>

<p style="margin-top: 1em">--hidden-encrypt-key key-id <br>
Same as --encrypt-key, but it hides user&rsquo;s key id from
encrypted file. It uses the gpg&rsquo;s --hidden-recipient
command to obfuscate the owner of the backup. On restore,
gpg <br>
will automatically try all available secret keys in order to
decrypt the backup. See gpg(1) for more details.</p>

<p style="margin-top: 1em">--ignore-errors <br>
Try to ignore certain errors if they happen. This option is
only intended to allow the restoration of a backup in the
face of certain problems that would otherwise cause <br>
the backup to fail. It is not ever recommended to use this
option unless you have a situation where you are trying to
restore from backup and it is failing because of an <br>
issue which you want duplicity to ignore. Even then,
depending on the issue, this option may not have an
effect.</p>

<p style="margin-top: 1em">Please note that while ignored
errors will be logged, there will be no summary at the end
of the operation to tell you what was ignored, if anything.
If this is used for <br>
emergency restoration of data, it is recommended that you
run the backup in such a way that you can revisit the backup
log (look for lines containing the string <br>
IGNORED_ERROR).</p>

<p style="margin-top: 1em">If you ever have to use this
option for reasons that are not understood or understood but
not your own responsibility, please contact duplicity
maintainers. The need to <br>
use this option under production circumstances would
normally be considered a bug.</p>

<p style="margin-top: 1em">--imap-full-address
email_address <br>
The full email address of the user name when logging into an
imap server. If not supplied just the user name part of the
email address is used.</p>

<p style="margin-top: 1em">--imap-mailbox option <br>
Allows you to specify a different mailbox. The default is
&quot;INBOX&quot;. Other languages may require a different
mailbox than the default.</p>

<p style="margin-top: 1em">--gpg-binary file_path <br>
Allows you to force duplicity to use file_path as gpg
command line binary. Can be an absolute or relative file
path or a file name. Default value is &rsquo;gpg&rsquo;. The
binary <br>
will be localized via the PATH environment variable.</p>

<p style="margin-top: 1em">--gpg-options options <br>
Allows you to pass options to gpg encryption. The options
list should be of the form &quot;--opt1 --opt2=parm&quot;
where the string is quoted and the only spaces allowed are
<br>
between options.</p>

<p style="margin-top: 1em">--include shell_pattern <br>
Similar to --exclude but include matched files instead.
Unlike --exclude, this option will also match parent
directories of matched files (although not necessarily their
<br>
contents). See the FILE SELECTION section for more
information.</p>

<p style="margin-top: 1em">--include-filelist filename <br>
Like --exclude-filelist, but include the listed files
instead. See the FILE SELECTION section for more
information.</p>

<p style="margin-top: 1em">--include-regexp regexp <br>
Include files matching the regular expression regexp. Only
files explicitly matched by regexp will be included by this
option. See the FILE SELECTION section for more <br>
information.</p>

<p style="margin-top: 1em">--log-fd number <br>
Write specially-formatted versions of output messages to the
specified file descriptor. The format used is designed to be
easily consumable by other programs.</p>

<p style="margin-top: 1em">--log-file filename <br>
Write specially-formatted versions of output messages to the
specified file. The format used is designed to be easily
consumable by other programs.</p>

<p style="margin-top: 1em">--max-blocksize number <br>
determines the number of the blocks examined for changes
during the diff process. For files &lt; 1MB the blocksize is
a constant of 512. For files over 1MB the size is <br>
given by:</p>

<p style="margin-top: 1em">file_blocksize = int((file_len /
(2000 * 512)) * 512) <br>
return min(file_blocksize, globals.max_blocksize)</p>

<p style="margin-top: 1em">where globals.max_blocksize
defaults to 2048. If you specify a larger max_blocksize,
your difftar files will be larger, but your sigtar files
will be smaller. If you <br>
specify a smaller max_blocksize, the reverse occurs. The
--max-blocksize option should be in multiples of 512.</p>

<p style="margin-top: 1em">--name symbolicname <br>
Set the symbolic name of the backup being operated on. The
intent is to use a separate name for each logically distinct
backup. For example, someone may use <br>
&quot;home_daily_s3&quot; for the daily backup of a home
directory to Amazon S3. The structure of the name is up to
the user, it is only important that the names be distinct.
The <br>
symbolic name is currently only used to affect the expansion
of --archive-dir , but may be used for additional features
in the future. Users running more than one distinct <br>
backup are encouraged to use this option.</p>

<p style="margin-top: 1em">If not specified, the default
value is a hash of the backend URL.</p>

<p style="margin-top: 1em">--no-compression <br>
Do not use GZip to compress files on remote system.</p>

<p style="margin-top: 1em">--no-encryption <br>
Do not use GnuPG to encrypt files on remote system.</p>

<p style="margin-top: 1em">--no-print-statistics <br>
By default duplicity will print statistics about the current
session after a successful backup. This switch disables that
behavior.</p>

<p style="margin-top: 1em">--null-separator <br>
Use nulls ( ) instead of newlines (0 as line separators,
which may help when dealing with filenames containing
newlines. This affects the expected format of the files <br>
specified by the --{include|exclude}-filelist switches as
well as the format of the directory statistics file.</p>

<p style="margin-top: 1em">--numeric-owner <br>
On restore always use the numeric uid/gid from the archive
and not the archived user/group names, which is the default
behaviour. Recommended for restoring from live cds <br>
which might have the users with identical names but
different uids/gids.</p>

<p style="margin-top: 1em">--num-retries number <br>
Number of retries to make on errors before giving up.</p>

<p style="margin-top: 1em">--old-filenames <br>
Use the old filename format (incompatible with
Windows/Samba) rather than the new filename format.</p>

<p style="margin-top: 1em">--par2-options options <br>
Verbatim options to pass to par2.</p>

<p style="margin-top: 1em">--par2-redundancy percent <br>
Adjust the level of redundancy in percent for Par2 recovery
files (default 10%).</p>

<p style="margin-top: 1em">--progress <br>
When selected, duplicity will output the current upload
progress and estimated upload time. To annotate changes, it
will perform a first dry-run before a full or <br>
incremental, and then runs the real operation estimating the
real upload progress.</p>

<p style="margin-top: 1em">--progress-rate number <br>
Sets the update rate at which duplicity will output the
upload progress messages (requires --progress option).
Default is to prompt the status each 3 seconds.</p>

<p style="margin-top: 1em">--rename &lt;original path&gt;
&lt;new path&gt; <br>
Treats the path orig in the backup as if it were the path
new. Can be passed multiple times. An example:</p>

<p style="margin-top: 1em">duplicity restore --rename
Documents/metal Music/metal sftp://uid@other.host/some_dir
/home/me</p>

<p style="margin-top: 1em">--rsync-options options <br>
Allows you to pass options to the rsync backend. The options
list should be of the form &quot;opt1=parm1 opt2=parm2&quot;
where the option string is quoted and the only spaces <br>
allowed are between options. The option string will be
passed verbatim to rsync, after any internally generated
option designating the remote port to use. Here is a <br>
possibly useful example:</p>

<p style="margin-top: 1em">duplicity
--rsync-options=&quot;--partial-dir=.rsync-partial&quot;
/home/me rsync://uid@other.host/some_dir</p>

<p style="margin-top: 1em">--s3-european-buckets <br>
When using the Amazon S3 backend, create buckets in Europe
instead of the default (requires --s3-use-new-style ). Also
see the EUROPEAN S3 BUCKETS section.</p>

<p style="margin-top: 1em">--s3-unencrypted-connection <br>
Don&rsquo;t use SSL for connections to S3.</p>

<p style="margin-top: 1em">This may be much faster, at some
cost to confidentiality.</p>

<p style="margin-top: 1em">With this option, anyone who can
observe traffic between your computer and S3 will be able to
tell: that you are using Duplicity, the name of the bucket,
your AWS Access <br>
Key ID, the increment dates and the amount of data in each
increment.</p>

<p style="margin-top: 1em">This option affects only the
connection, not the GPG encryption of the backup increment
files. Unless that is disabled, an observer will not be able
to see the file names <br>
or contents.</p>

<p style="margin-top: 1em">--s3-use-new-style <br>
When operating on Amazon S3 buckets, use new-style subdomain
bucket addressing. This is now the preferred method to
access Amazon S3, but is not backwards compatible if <br>
your bucket name contains upper-case characters or other
characters that are not valid in a hostname.</p>

<p style="margin-top: 1em">--s3-use-rrs <br>
Store volumes using Reduced Redundancy Storage when
uploading to Amazon S3. This will lower the cost of storage
but also lower the durability of stored volumes to 99.99%
<br>
instead the 99.999999999% durability offered by Standard
Storage on S3.</p>

<p style="margin-top: 1em">--s3-use-ia <br>
Store volumes using Standard - Infrequent Access when
uploading to Amazon S3. This storage class has a lower
storage cost but a higher per-request cost, and the storage
<br>
cost is calculated against a 30-day storage minimum.
According to Amazon, this storage is ideal for long-term
file storage, backups, and disaster recovery.</p>

<p style="margin-top: 1em">--s3-use-multiprocessing <br>
Allow multipart volumne uploads to S3 through
multiprocessing. This option requires Python 2.6 and can be
used to make uploads to S3 more efficient. If enabled, files
<br>
duplicity uploads to S3 will be split into chunks and
uploaded in parallel. Useful if you want to saturate your
bandwidth or if large files are failing during upload.</p>

<p style="margin-top: 1em">--s3-use-server-side-encryption
<br>
Allow use of server side encryption in S3</p>

<p style="margin-top: 1em">--s3-multipart-chunk-size <br>
Chunk size (in MB) used for S3 multipart uploads. Make this
smaller than --volsize to maximize the use of your
bandwidth. For example, a chunk size of 10MB with a volsize
<br>
of 30MB will result in 3 chunks per volume upload.</p>

<p style="margin-top: 1em">--s3-multipart-max-procs <br>
Specify the maximum number of processes to spawn when
performing a multipart upload to S3. By default, this will
choose the number of processors detected on your system <br>
(e.g. 4 for a 4-core system). You can adjust this number as
required to ensure you don&rsquo;t overload your system
while maximizing the use of your bandwidth.</p>

<p style="margin-top: 1em">--s3-multipart-max-timeout <br>
You can control the maximum time (in seconds) a multipart
upload can spend on uploading a single chunk to S3. This may
be useful if you find your system hanging on <br>
multipart uploads or if you&rsquo;d like to control the time
variance when uploading to S3 to ensure you kill connections
to slow S3 endpoints.</p>

<p style="margin-top: 1em">--scp-command command <br>
(only ssh pexpect backend with --use-scp enabled) The
command will be used instead of &quot;scp&quot; to send or
receive files. To list and delete existing files, the sftp
command <br>
is used. <br>
See also A NOTE ON SSH BACKENDS section SSH pexpect
backend.</p>

<p style="margin-top: 1em">--sftp-command command <br>
(only ssh pexpect backend) The command will be used instead
of &quot;sftp&quot;. <br>
See also A NOTE ON SSH BACKENDS section SSH pexpect
backend.</p>

<p style="margin-top: 1em">--short-filenames <br>
If this option is specified, the names of the files
duplicity writes will be shorter (about 30 chars) but less
understandable. This may be useful when backing up to MacOS
<br>
or another OS or FS that doesn&rsquo;t support long
filenames.</p>

<p style="margin-top: 1em">--sign-key key-id <br>
This option can be used when backing up, restoring or
verifying. When backing up, all backup files will be signed
with keyid key. When restoring, duplicity will signal <br>
an error if any remote file is not signed with the given
key-id. The key-id can be given in any of the formats
supported by GnuPG; see gpg(1), section &quot;HOW TO SPECIFY
A <br>
USER ID&quot; for details. Should be specified only once
because currently only one signing key is supported. Last
entry overrides all other entries. <br>
See also A NOTE ON SYMMETRIC ENCRYPTION AND SIGNING</p>

<p style="margin-top: 1em">--ssh-askpass <br>
Tells the ssh backend to prompt the user for the remote
system password, if it was not defined in target url and no
FTP_PASSWORD env var is set. This password is also <br>
used for passphrase-protected ssh keys.</p>

<p style="margin-top: 1em">--ssh-options options <br>
Allows you to pass options to the ssh backend. Can be
specified multiple times or as a space separated options
list. The options list should be of the form <br>
&quot;-oOpt1=&rsquo;parm1&rsquo;
-oOpt2=&rsquo;parm2&rsquo;&quot; where the option string is
quoted and the only spaces allowed are between options. The
option string will be passed verbatim to both scp <br>
and sftp, whose command line syntax differs slightly hence
the options should therefore be given in the long option
format described in ssh_config(5).</p>

<p style="margin-top: 1em">example of a list:</p>

<p style="margin-top: 1em">duplicity
--ssh-options=&quot;-oProtocol=2
-oIdentityFile=&rsquo;/my/backup/id&rsquo;&quot; /home/me
scp://user@host/some_dir</p>

<p style="margin-top: 1em">example with multiple
parameters:</p>

<p style="margin-top: 1em">duplicity
--ssh-options=&quot;-oProtocol=2&quot;
--ssh-options=&quot;-oIdentityFile=&rsquo;/my/backup/id&rsquo;&quot;
/home/me scp://user@host/some_dir</p>

<p style="margin-top: 1em">NOTE: The ssh paramiko backend
currently supports only the -i or -oIdentityFile setting. If
needed provide more host specific options via ssh_config
file.</p>

<p style="margin-top: 1em">--ssl-cacert-file file <br>
(only webdav backend) Provide a cacert file for ssl
certificate verification. <br>
See also A NOTE ON SSL CERTIFICATE VERIFICATION.</p>

<p style="margin-top: 1em">--ssl-no-check-certificate <br>
(only webdav backend) Disable ssl certificate verification.
<br>
See also A NOTE ON SSL CERTIFICATE VERIFICATION.</p>

<p style="margin-top: 1em">--tempdir directory <br>
Use this existing directory for duplicity temporary files
instead of the system default, which is usually the /tmp
directory. This option supersedes any environment <br>
variable. <br>
See also ENVIRONMENT VARIABLES.</p>

<p style="margin-top: 1em">-ttime, --time time,
--restore-time time <br>
Specify the time from which to restore or list files.</p>

<p style="margin-top: 1em">--time-separator char <br>
Use char as the time separator in filenames instead of colon
(&quot;:&quot;).</p>

<p style="margin-top: 1em">--timeout seconds <br>
Use seconds as the socket timeout value if duplicity begins
to timeout during network operations. The default is 30
seconds.</p>

<p style="margin-top: 1em">--use-agent <br>
If this option is specified, then --use-agent is passed to
the GnuPG encryption process and it will try to connect to
gpg-agent before it asks for a passphrase for <br>
--encrypt-key or --sign-key if needed. <br>
Note: Contrary to previous versions of duplicity, this
option will also be honored by GnuPG 2 and newer versions.
If GnuPG 2 is in use, duplicity passes the option <br>
--pinentry-mode=loopback to the the gpg process unless
--use-agent is specified on the duplicity command line. This
has the effect that GnuPG 2 uses the agent only if <br>
--use-agent is given, just like GnuPG 1.</p>

<p style="margin-top: 1em">--verbosity level, -vlevel <br>
Specify output verbosity level (log level). Named levels and
corresponding values are 0 Error, 2 Warning, 4 Notice
(default), 8 Info, 9 Debug (noisiest). <br>
level may also be <br>
a character: e, w, n, i, d <br>
a word: error, warning, notice, info, debug</p>

<p style="margin-top: 1em">The options -v4, -vn and
-vnotice are functionally equivalent, as are the
mixed/upper-case versions -vN, -vNotice and -vNOTICE.</p>

<p style="margin-top: 1em">--version <br>
Print duplicity&rsquo;s version and quit.</p>

<p style="margin-top: 1em">--volsize number <br>
Change the volume size to number Mb. Default is 25Mb.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
TMPDIR, TEMP, TMP <br>
In decreasing order of importance, specifies the directory
to use for temporary files (inherited from Python&rsquo;s
tempfile module). Eventually the option --tempdir <br>
supercedes any of these.</p>

<p style="margin-top: 1em">FTP_PASSWORD <br>
Supported by most backends which are password capable. More
secure than setting it in the backend url (which might be
readable in the operating systems process listing to <br>
other users on the same machine).</p>

<p style="margin-top: 1em">PASSPHRASE <br>
This passphrase is passed to GnuPG. If this is not set, the
user will be prompted for the passphrase.</p>

<p style="margin-top: 1em">SIGN_PASSPHRASE <br>
The passphrase to be used for --sign-key. If ommitted and
sign key is also one of the keys to encrypt against
PASSPHRASE will be reused instead. Otherwise, if passphrase
<br>
is needed but not set the user will be prompted for it.</p>

<p style="margin-top: 1em">URL FORMAT <br>
Duplicity uses the URL format (as standard as possible) to
define data locations. The generic format for a URL is:</p>


<p style="margin-top: 1em">scheme://[user[:password]@]host[:port]/[/]path</p>

<p style="margin-top: 1em">It is not recommended to expose
the password on the command line since it could be revealed
to anyone with permissions to do process listings, it is
permitted however. Consider <br>
setting the environment variable FTP_PASSWORD instead, which
is used by most, if not all backends, regardless of
it&rsquo;s name.</p>

<p style="margin-top: 1em">In protocols that support it,
the path may be preceded by a single slash,
&rsquo;/path&rsquo;, to represent a relative path to the
target home directory, or preceded by a double slash, <br>
&rsquo;//path&rsquo;, to represent an absolute filesystem
path.</p>

<p style="margin-top: 1em">Note: <br>
Scheme (protocol) access may be provided by more than one
backend. In case the default backend is buggy or simply not
working in a specific case it might be worth trying <br>
an alternative implementation. Alternative backends can be
selected by prefixing the scheme with the name of the
alternative backend e.g. ncftp+ftp:// and are mentioned <br>
below the scheme&rsquo;s syntax summary.</p>

<p style="margin-top: 1em">Formats of each of the URL
schemes follow:</p>

<p style="margin-top: 1em">Azure</p>

<p style="margin-top: 1em">azure://container-name</p>

<p style="margin-top: 1em">See also A NOTE ON AZURE
ACCESS</p>

<p style="margin-top: 1em">B2</p>


<p style="margin-top: 1em">b2://account_id[:application_key]@bucket_name/[folder/]</p>

<p style="margin-top: 1em">Cloud Files (Rackspace)</p>

<p style="margin-top: 1em">cf+http://container_name</p>

<p style="margin-top: 1em">See also A NOTE ON CLOUD FILES
ACCESS</p>

<p style="margin-top: 1em">Copy cloud storage</p>


<p style="margin-top: 1em">copy://user[:password]@copy.com/some_dir</p>

<p style="margin-top: 1em">Dropbox</p>

<p style="margin-top: 1em">dpbx:///some_dir</p>

<p style="margin-top: 1em">Make sure to read A NOTE ON
DROPBOX ACCESS first!</p>

<p style="margin-top: 1em">Local file path</p>


<p style="margin-top: 1em">file://[relative|/absolute]/local/path</p>

<p style="margin-top: 1em">FISH (Files transferred over
Shell protocol) over ssh</p>


<p style="margin-top: 1em">fish://user[:pwd]@other.host[:port]/[relative|/absolute]_path</p>

<p style="margin-top: 1em">FTP</p>


<p style="margin-top: 1em">ftp[s]://user[:password]@other.host[:port]/some_dir</p>

<p style="margin-top: 1em">NOTE: use lftp+, ncftp+ prefixes
to enforce a specific backend, default is lftp+ftp://...</p>

<p style="margin-top: 1em">Google Docs</p>


<p style="margin-top: 1em">gdocs://user[:password]@other.host/some_dir</p>

<p style="margin-top: 1em">NOTE: use pydrive+, gdata+
prefixes to enforce a specific backend, default is
pydrive+gdocs://...</p>

<p style="margin-top: 1em">Google Cloud Storage</p>

<p style="margin-top: 1em">gs://bucket[/prefix]</p>

<p style="margin-top: 1em">HSI</p>


<p style="margin-top: 1em">hsi://user[:password]@other.host/some_dir</p>

<p style="margin-top: 1em">hubiC</p>

<p style="margin-top: 1em">cf+hubic://container_name</p>

<p style="margin-top: 1em">See also A NOTE ON HUBIC</p>

<p style="margin-top: 1em">IMAP email storage</p>


<p style="margin-top: 1em">imap[s]://user[:password]@host.com[/from_address_prefix]</p>

<p style="margin-top: 1em">See also A NOTE ON IMAP</p>

<p style="margin-top: 1em">Mega cloud storage</p>


<p style="margin-top: 1em">mega://user[:password]@mega.co.nz/some_dir</p>

<p style="margin-top: 1em">OneDrive Backend</p>

<p style="margin-top: 1em">onedrive://some_dir</p>

<p style="margin-top: 1em">Par2 Wrapper Backend</p>


<p style="margin-top: 1em">par2+scheme://[user[:password]@]host[:port]/[/]path</p>

<p style="margin-top: 1em">See also A NOTE ON PAR2 WRAPPER
BACKEND</p>

<p style="margin-top: 1em">Rsync via daemon</p>


<p style="margin-top: 1em">rsync://user[:password]@host.com[:port]::[/]module/some_dir</p>

<p style="margin-top: 1em">Rsync over ssh (only key
auth)</p>


<p style="margin-top: 1em">rsync://user@host.com[:port]/[relative|/absolute]_path</p>

<p style="margin-top: 1em">S3 storage (Amazon)</p>

<p style="margin-top: 1em">s3://host/bucket_name[/prefix]
<br>
s3+http://bucket_name[/prefix]</p>

<p style="margin-top: 1em">See also A NOTE ON EUROPEAN S3
BUCKETS</p>

<p style="margin-top: 1em">SCP/SFTP access</p>

<p style="margin-top: 1em">scp://.. or <br>

sftp://user[:pwd]@other.host[:port]/[relative|/absolute]_path</p>

<p style="margin-top: 1em">defaults are paramiko+scp:// and
paramiko+sftp:// <br>
alternatively try pexpect+scp://, pexpect+sftp://,
lftp+sftp:// <br>
See also --ssh-askpass, --ssh-options and A NOTE ON SSH
BACKENDS.</p>

<p style="margin-top: 1em">Swift (Openstack)</p>

<p style="margin-top: 1em">swift://container_name</p>

<p style="margin-top: 1em">See also A NOTE ON SWIFT
(OPENSTACK OBJECT STORAGE) ACCESS</p>

<p style="margin-top: 1em">Tahoe-LAFS</p>

<p style="margin-top: 1em">tahoe://alias/directory</p>

<p style="margin-top: 1em">WebDAV</p>


<p style="margin-top: 1em">webdav[s]://user[:password]@other.host[:port]/some_dir</p>

<p style="margin-top: 1em">alternatively try
lftp+webdav[s]://</p>

<p style="margin-top: 1em">pydrive</p>

<p style="margin-top: 1em">pydrive://&lt;service
account&rsquo; email
address&gt;@developer.gserviceaccount.com/some_dir</p>

<p style="margin-top: 1em">See also A NOTE ON PYDRIVE
BACKEND below.</p>

<p style="margin-top: 1em">multi</p>


<p style="margin-top: 1em">multi:///path/to/config.json</p>

<p style="margin-top: 1em">See also A NOTE ON MULTI BACKEND
below.</p>

<p style="margin-top: 1em">TIME FORMATS <br>
duplicity uses time strings in two places. Firstly, many of
the files duplicity creates will have the time in their
filenames in the w3 datetime format as described in a w3
note <br>
at http://www.w3.org/TR/NOTE-datetime. Basically they look
like &quot;2001-07-15T04:09:38-07:00&quot;, which means what
it looks like. The &quot;-07:00&quot; section means the time
zone is 7 hours <br>
behind UTC.</p>

<p style="margin-top: 1em">Secondly, the -t, --time, and
--restore-time options take a time string, which can be
given in any of several formats:</p>

<p style="margin-top: 1em">1. the string &quot;now&quot;
(refers to the current time)</p>

<p style="margin-top: 1em">2. a sequences of digits, like
&quot;123456890&quot; (indicating the time in seconds after
the epoch)</p>

<p style="margin-top: 1em">3. A string like
&quot;2002-01-25T07:00:00+02:00&quot; in datetime format</p>

<p style="margin-top: 1em">4. An interval, which is a
number followed by one of the characters s, m, h, D, W, M,
or Y (indicating seconds, minutes, hours, days, weeks,
months, or years respectively), <br>
or a series of such pairs. In this case the string refers to
the time that preceded the current time by the length of the
interval. For instance, &quot;1h78m&quot; indicates the <br>
time that was one hour and 78 minutes ago. The calendar here
is unsophisticated: a month is always 30 days, a year is
always 365 days, and a day is always 86400 seconds.</p>

<p style="margin-top: 1em">5. A date format of the form
YYYY/MM/DD, YYYY-MM-DD, MM/DD/YYYY, or MM-DD-YYYY, which
indicates midnight on the day in question, relative to the
current time zone settings. <br>
For instance, &quot;2002/3/5&quot;, &quot;03-05-2002&quot;,
and &quot;2002-3-05&quot; all mean March 5th, 2002.</p>

<p style="margin-top: 1em">FILE SELECTION <br>
When duplicity is run, it searches through the given source
directory and backs up all the files specified by the file
selection system. The file selection system comprises a <br>
number of file selection conditions, which are set using one
of the following command line options: <br>
--exclude <br>
--exclude-device-files <br>
--exclude-filelist <br>
--exclude-regexp <br>
--include <br>
--include-filelist <br>
--include-regexp <br>
Each file selection condition either matches or
doesn&rsquo;t match a given file. A given file is excluded
by the file selection system exactly when the first matching
file selection <br>
condition specifies that the file be excluded; otherwise the
file is included.</p>

<p style="margin-top: 1em">For instance,</p>

<p style="margin-top: 1em">duplicity --include /usr
--exclude /usr /usr scp://user@host/backup</p>

<p style="margin-top: 1em">is exactly the same as</p>

<p style="margin-top: 1em">duplicity /usr
scp://user@host/backup</p>

<p style="margin-top: 1em">because the include and exclude
directives match exactly the same files, and the --include
comes first, giving it precedence. Similarly,</p>

<p style="margin-top: 1em">duplicity --include
/usr/local/bin --exclude /usr/local /usr
scp://user@host/backup</p>

<p style="margin-top: 1em">would backup the /usr/local/bin
directory (and its contents), but not /usr/local/doc.</p>

<p style="margin-top: 1em">The include, exclude,
include-filelist, and exclude-filelist options accept some
extended shell globbing patterns. These patterns can contain
*, **, ?, and [...] (character <br>
ranges). As in a normal shell, * can be expanded to any
string of characters not containing &quot;/&quot;, ? expands
to any character except &quot;/&quot;, and [...] expands to
a single character <br>
of those characters specified (ranges are acceptable). The
new special pattern, **, expands to any string of characters
whether or not it contains &quot;/&quot;. Furthermore, if
the <br>
pattern starts with &quot;ignorecase:&quot; (case
insensitive), then this prefix will be removed and any
character in the string can be replaced with an upper- or
lowercase version of <br>
itself.</p>

<p style="margin-top: 1em">Remember that you may need to
quote these characters when typing them into a shell, so the
shell does not interpret the globbing patterns before
duplicity sees them.</p>

<p style="margin-top: 1em">The --exclude pattern option
matches a file if:</p>

<p style="margin-top: 1em">1. pattern can be expanded into
the file&rsquo;s filename, or <br>
2. the file is inside a directory matched by the option.</p>

<p style="margin-top: 1em">Conversely, the --include
pattern matches a file if:</p>

<p style="margin-top: 1em">1. pattern can be expanded into
the file&rsquo;s filename, or <br>
2. the file is inside a directory matched by the option, or
<br>
3. the file is a directory which contains a file matched by
the option.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">--exclude /usr/local</p>

<p style="margin-top: 1em">matches e.g. /usr/local,
/usr/local/lib, and /usr/local/lib/netscape. It is the same
as --exclude /usr/local --exclude
&rsquo;/usr/local/**&rsquo;.</p>

<p style="margin-top: 1em">On the other hand</p>

<p style="margin-top: 1em">--include /usr/local</p>

<p style="margin-top: 1em">specifies that /usr, /usr/local,
/usr/local/lib, and /usr/local/lib/netscape (but not
/usr/doc) all be backed up. Thus you don&rsquo;t have to
worry about including parent directories <br>
to make sure that included subdirectories have somewhere to
go.</p>

<p style="margin-top: 1em">Finally,</p>

<p style="margin-top: 1em">--include
ignorecase:&rsquo;/usr/[a-z0-9]foo/*/**.py&rsquo;</p>

<p style="margin-top: 1em">would match a file like
/usR/5fOO/hello/there/world.py. If it did match anything, it
would also match /usr. If there is no existing file that the
given pattern can be expanded <br>
into, the option will not match /usr alone.</p>

<p style="margin-top: 1em">The --include-filelist, and
--exclude-filelist, options also introduce file selection
conditions. They direct duplicity to read in a file, each
line of which is a file <br>
specification, and to include or exclude the matching files.
Lines are separated by newlines or nulls, depending on
whether the --null-separator switch was given. Each line in
<br>
the filelist will be interpreted as a globbing pattern the
way --include and --exclude options are interpreted, except
that lines starting with &quot;+ &quot; are interpreted as
include <br>
directives, even if found in a filelist referenced by
--exclude-filelist. Similarly, lines starting with &quot;-
&quot; exclude files even if they are found within an
include filelist.</p>

<p style="margin-top: 1em">For example, if file
&quot;list.txt&quot; contains the lines:</p>

<p style="margin-top: 1em">/usr/local <br>
- /usr/local/doc <br>
/usr/local/bin <br>
+ /var <br>
- /var</p>

<p style="margin-top: 1em">then --include-filelist list.txt
would include /usr, /usr/local, and /usr/local/bin. It would
exclude /usr/local/doc, /usr/local/doc/python, etc. It would
also include <br>
/usr/local/man, as this is included within /user/local.
Finally, it is undefined what happens with /var. A single
file list should not contain conflicting file
specifications.</p>

<p style="margin-top: 1em">Each line in the filelist will
also be interpreted as a globbing pattern the way --include
and --exclude options are interpreted. For instance, if the
file &quot;list.txt&quot; contains <br>
the lines:</p>

<p style="margin-top: 1em">dir/foo <br>
+ dir/bar <br>
- **</p>

<p style="margin-top: 1em">Then --include-filelist list.txt
would be exactly the same as specifying --include dir/foo
--include dir/bar --exclude ** on the command line.</p>

<p style="margin-top: 1em">Finally, the --include-regexp
and --exclude-regexp options allow files to be included and
excluded if their filenames match a python regular
expression. Regular expression <br>
syntax is too complicated to explain here, but is covered in
Python&rsquo;s library reference. Unlike the --include and
--exclude options, the regular expression options
don&rsquo;t match <br>
files containing or contained in matched files. So for
instance</p>

<p style="margin-top: 1em">--include
&rsquo;[0-9]{7}(?!foo)&rsquo;</p>

<p style="margin-top: 1em">matches any files whose full
pathnames contain 7 consecutive digits which aren&rsquo;t
followed by &rsquo;foo&rsquo;. However, it wouldn&rsquo;t
match /home even if /home/ben/1234567 existed.</p>

<p style="margin-top: 1em">A NOTE ON AZURE ACCESS <br>
The Azure backend requires the Microsoft Azure Storage SDK
for Python to be installed on the system. See REQUIREMENTS
above.</p>

<p style="margin-top: 1em">It uses two environment
variables for authentification: AZURE_ACCOUNT_NAME
(required), AZURE_ACCOUNT_KEY (required)</p>

<p style="margin-top: 1em">A container name must be a valid
DNS name, conforming to the following naming rules:</p>

<p style="margin-top: 1em">1. Container names must start
with a letter or number, and can contain only letters,
numbers, and the dash (-) character.</p>

<p style="margin-top: 1em">2. Every dash (-) character must
be immediately preceded and followed by a letter or number;
consecutive dashes are not permitted in container names.</p>

<p style="margin-top: 1em">3. All letters in a container
name must be lowercase.</p>

<p style="margin-top: 1em">4. Container names must be from
3 through 63 characters long.</p>

<p style="margin-top: 1em">A NOTE ON CLOUD FILES ACCESS
<br>
Pyrax is Rackspace&rsquo;s next-generation Cloud management
API, including Cloud Files access. The cfpyrax backend
requires the pyrax library to be installed on the system.
See <br>
REQUIREMENTS above.</p>

<p style="margin-top: 1em">Cloudfiles is Rackspace&rsquo;s
now deprecated implementation of OpenStack Object Storage
protocol. Users wishing to use Duplicity with Rackspace
Cloud Files should migrate to the new <br>
Pyrax plugin to ensure support.</p>

<p style="margin-top: 1em">The backend requires
python-cloudfiles to be installed on the system. See
REQUIREMENTS above.</p>

<p style="margin-top: 1em">It uses three environment
variables for authentification: CLOUDFILES_USERNAME
(required), CLOUDFILES_APIKEY (required), CLOUDFILES_AUTHURL
(optional)</p>

<p style="margin-top: 1em">If CLOUDFILES_AUTHURL is
unspecified it will default to the value provided by
python-cloudfiles, which points to rackspace, hence this
value must be set in order to use other <br>
cloud files providers.</p>

<p style="margin-top: 1em">A NOTE ON DROPBOX ACCESS <br>
1. &quot;some_dir&quot; must already exist in the Dropbox
Application folder for this application, like
&quot;Apps/Duplicity/some_dir&quot;.</p>

<p style="margin-top: 1em">2. The first run of the backend
must be ineractive! It will print the URL that you need to
open in the browser to obtain OAuth token for the
application. The token will be <br>
saved in the file $HOME/.dropbox.token_store.txt and used in
the future runs.</p>

<p style="margin-top: 1em">3. When using Dropbox for
storage, be aware that all files, including the ones in the
Apps folder, will be synced to all connected computers. You
may prefer to use a <br>
separate Dropbox account specially for the backups, and not
connect any computers to that account.</p>

<p style="margin-top: 1em">A NOTE ON EUROPEAN S3 BUCKETS
<br>
Amazon S3 provides the ability to choose the location of a
bucket upon its creation. The purpose is to enable the user
to choose a location which is better located network <br>
topologically relative to the user, because it may allow for
faster data transfers.</p>

<p style="margin-top: 1em">duplicity will create a new
bucket the first time a bucket access is attempted. At this
point, the bucket will be created in Europe if
--s3-european-buckets was given. For <br>
reasons having to do with how the Amazon S3 service works,
this also requires the use of the --s3-use-new-style option.
This option turns on subdomain based bucket addressing in
<br>
S3. The details are beyond the scope of this man page, but
it is important to know that your bucket must not contain
upper case letters or any other characters that are not
valid <br>
parts of a hostname. Consequently, for reasons of backwards
compatibility, use of subdomain based bucket addressing is
not enabled by default.</p>

<p style="margin-top: 1em">Note that you will need to use
--s3-use-new-style for all operations on European buckets;
not just upon initial creation.</p>

<p style="margin-top: 1em">You only need to use
--s3-european-buckets upon initial creation, but you may may
use it at all times for consistency.</p>

<p style="margin-top: 1em">Further note that when creating
a new European bucket, it can take a while before the bucket
is fully accessible. At the time of this writing it is
unclear to what extent this is <br>
an expected feature of Amazon S3, but in practice you may
experience timeouts, socket errors or HTTP errors when
trying to upload files to your newly created bucket. Give it
a <br>
few minutes and the bucket should function normally.</p>

<p style="margin-top: 1em">A NOTE ON FILENAME PREFIXES <br>
Filename prefixes can be used in conjunction with S3
lifecycle rules to transition archive files to Glacier,
while keeping metadata (signature and manifest files) on
S3.</p>

<p style="margin-top: 1em">Duplicity does not require
access to archive files except when restoring from
backup.</p>

<p style="margin-top: 1em">A NOTE ON GOOGLE CLOUD STORAGE
<br>
Support for Google Cloud Storage relies on its Interoperable
Access, which must be enabled for your account. Once
enabled, you can generate Interoperable Storage Access Keys
and <br>
pass them to duplicity via the GS_ACCESS_KEY_ID and
GS_SECRET_ACCESS_KEY environment variables. Alternatively,
you can run gsutil config -a to have the Google Cloud
Storage <br>
utility populate the ~/.boto configuration file.</p>

<p style="margin-top: 1em">Enable Interoperable Access:
https://code.google.com/apis/console#:storage <br>
Create Access Keys:
https://code.google.com/apis/console#:storage:legacy</p>

<p style="margin-top: 1em">A NOTE ON HUBIC <br>
The hubic backend requires the pyrax library to be installed
on the system. See REQUIREMENTS above. You will need to set
your credentials for hubiC in a file called <br>
~/.hubic_credentials, following this pattern:</p>

<p style="margin-top: 1em">[hubic] <br>
email = your_email <br>
password = your_password <br>
client_id = api_client_id <br>
client_secret = api_secret_key <br>
redirect_uri = http://localhost/</p>

<p style="margin-top: 1em">A NOTE ON IMAP <br>
An IMAP account can be used as a target for the upload. The
userid may be specified and the password will be
requested.</p>

<p style="margin-top: 1em">The from_address_prefix may be
specified (and probably should be). The text will be used as
the &quot;From&quot; address in the IMAP server. Then on a
restore (or list) command the <br>
from_address_prefix will distinguish between different
backups.</p>

<p style="margin-top: 1em">A NOTE ON MULTI BACKEND <br>
The multi backend allows duplicity to combine the storage
available in more than one backend store (e.g., you can
store across a google drive account and a onedrive account
to <br>
get effectively the combined storage available in both). The
URL path specifies a JSON formated config file containing a
list of the backends it will use. Multibackend then <br>
round-robins across the given backends. Each element of the
list must have a &quot;url&quot; element, and may also
contain an optional &quot;description&quot; and an optional
&quot;env&quot; list of <br>
environment variables used to configure that backend.</p>

<p style="margin-top: 1em">For example: <br>
[ <br>
{ <br>
&quot;description&quot;: &quot;a comment about the
backend&quot; <br>
&quot;url&quot;:
&quot;abackend://myuser@domain.com/backup&quot;, <br>
&quot;env&quot;: [ <br>
{ <br>
&quot;name&quot; : &quot;MYENV&quot;, <br>
&quot;value&quot; : &quot;xyz&quot; <br>
}, <br>
{ <br>
&quot;name&quot; : &quot;FOO&quot;, <br>
&quot;value&quot; : &quot;bar&quot; <br>
} <br>
] <br>
}, <br>
{ <br>
&quot;url&quot;: &quot;file:///path/to/dir&quot; <br>
} <br>
]</p>

<p style="margin-top: 1em">A NOTE ON PAR2 WRAPPER BACKEND
<br>
Par2 Wrapper Backend can be used in combination with all
other backends to create recovery files. Just add par2+
before a regular scheme (e.g. par2+ftp://user@host/dir or
<br>
par2+s3+http://bucket_name ). This will create par2 recovery
files for each archive and upload them all to the wrapped
backend.</p>

<p style="margin-top: 1em">Before restoring, archives will
be verified. Corrupt archives will be repaired on the fly if
there are enough recovery blocks available.</p>

<p style="margin-top: 1em">Use --par2-redundancy percent to
adjust the size (and redundancy) of recovery files in
percent.</p>

<p style="margin-top: 1em">A NOTE ON PYDRIVE BACKEND <br>
The pydrive backend requires Python PyDrive package to be
installed on the system. See REQUIREMENTS above.</p>

<p style="margin-top: 1em">There are two ways to use
PyDrive: with a regular account or with a &quot;service
account&quot;. With a service account, a separate account is
created, that is only accessible with Google <br>
APIs and not a web login. With a regular account, you can
store backups in your normal Google Drive.</p>

<p style="margin-top: 1em">To use a service account, go to
the Google developers console at
https://console.developers.google.com. Create a project, and
make sure Drive API is enabled for the project. <br>
Under &quot;APIs and auth&quot;, click Create New Client ID,
then select Service Account with P12 key.</p>

<p style="margin-top: 1em">Download the .p12 key file of
the account and convert it to the .pem format: <br>
openssl pkcs12 -in XXX.p12 -nodes -nocerts &gt;
pydriveprivatekey.pem</p>

<p style="margin-top: 1em">The content of .pem file should
be passed to GOOGLE_DRIVE_ACCOUNT_KEY environment variable
for authentification.</p>

<p style="margin-top: 1em">The email address of the account
will be used as part of URL. See URL FORMAT above.</p>

<p style="margin-top: 1em">The alternative is to use a
regular account. To do this, start as above, but when
creating a new Client ID, select &quot;Installed
application&quot; of type &quot;Other&quot;. Create a file
with the <br>
following content, and pass its filename in the
GOOGLE_DRIVE_SETTINGS environment variable:</p>

<p style="margin-top: 1em">client_config_backend: settings
<br>
client_config: <br>
client_id: &lt;Client ID from developers&rsquo; console&gt;
<br>
client_secret: &lt;Client secret from developers&rsquo;
console&gt; <br>
save_credentials: True <br>
save_credentials_backend: file <br>
save_credentials_file: &lt;filename to cache credentials&gt;
<br>
get_refresh_token: True</p>

<p style="margin-top: 1em">In this scenario, the username
and host parts of the URL play no role; only the path
matters. During the first run, you will be prompted to visit
an URL in your browser to grant <br>
access to your drive. Once granted, you will receive a
verification code to paste back into Duplicity. The
credentials are then cached in the file references above for
future <br>
use.</p>

<p style="margin-top: 1em">A NOTE ON SSH BACKENDS <br>
The ssh backends support sftp and scp/ssh transport
protocols. This is a known user-confusing issue as these are
fundamentally different. If you plan to access your backend
via <br>
one of those please inform yourself about the requirements
for a server to support sftp or scp/ssh access. To make it
even more confusing the user can choose between several ssh
<br>
backends via a scheme prefix: paramiko+ (default), pexpect+,
lftp+... . <br>
paramiko &amp; pexpect support --use-scp, --ssh-askpass and
--ssh-options. Only the pexpect backend allows to define
--scp-command and --sftp-command.</p>

<p style="margin-top: 1em">SSH paramiko backend (default)
is a complete reimplementation of ssh protocols natively in
python. Advantages are speed and maintainability. Minor
disadvantage is that extra <br>
packages are needed as listed in REQUIREMENTS above. In sftp
(default) mode all operations are done via the according
sftp commands. In scp mode ( --use-scp ) though scp access
<br>
is used for put/get operations but listing is done via ssh
remote shell.</p>

<p style="margin-top: 1em">SSH pexpect backend is the
legacy ssh backend using the command line ssh binaries via
pexpect. Older versions used scp for get and put operations
and sftp for list and delete <br>
operations. The current version uses sftp for all four
supported operations, unless the --use-scp option is used to
revert to old behavior.</p>

<p style="margin-top: 1em">SSH lftp backend is simply there
because lftp can interact with the ssh cmd line binaries. It
is meant as a last resort in case the above options fail for
some reason.</p>

<p style="margin-top: 1em">Why use sftp instead of scp? The
change to sftp was made in order to allow the remote system
to chroot the backup, thus providing better security and
because it does not suffer <br>
from shell quoting issues like scp. Scp also does not
support any kind of file listing, so sftp or ssh access will
always be needed in addition for this backend mode to work
<br>
properly. Sftp does not have these limitations but needs an
sftp service running on the backend server, which is
sometimes not an option.</p>

<p style="margin-top: 1em">A NOTE ON SSL CERTIFICATE
VERIFICATION <br>
Certificate verification as implemented right now [01.2013]
only in the webdav backend needs a file based database of
certification authority certificates (cacert file). It has
<br>
to be a PEM formatted text file as currently provided by the
CURL project. See</p>


<p style="margin-top: 1em">http://curl.haxx.se/docs/caextract.html</p>

<p style="margin-top: 1em">After creating/retrieving a
valid cacert file you should copy it to either</p>

<p style="margin-top: 1em">~/.duplicity/cacert.pem <br>
~/duplicity_cacert.pem <br>
/etc/duplicity/cacert.pem</p>

<p style="margin-top: 1em">Duplicity searches it there in
the same order and will fail if it can&rsquo;t find it. You
can however specify the option --ssl-cacert-file
&lt;file&gt; to point duplicity to a copy in a <br>
different location.</p>

<p style="margin-top: 1em">Finally there is the
--ssl-no-check-certificate option to disable certificate
verification alltogether, in case some ssl library is
missing or verification is not wanted. Use it <br>
with care, as even with self signed servers manually
providing the private ca certificate is definitely the safer
option.</p>

<p style="margin-top: 1em">A NOTE ON SWIFT (OPENSTACK
OBJECT STORAGE) ACCESS <br>
Swift is the OpenStack Object Storage service. <br>
The backend requires python-switclient to be installed on
the system. python-keystoneclient is also needed to use
OpenStack&rsquo;s Keystone Identity service. See
REQUIREMENTS above.</p>

<p style="margin-top: 1em">It uses four environment
variables for authentification: SWIFT_USERNAME (required),
SWIFT_PASSWORD (required), SWIFT_AUTHURL (required),
SWIFT_TENANTNAME (optional, the tenant <br>
can be included in the username)</p>

<p style="margin-top: 1em">If the user was previously
authenticated, the following environment variables can be
used instead: SWIFT_PREAUTHURL (required),
SWIFT_PREAUTHTOKEN (required)</p>

<p style="margin-top: 1em">If SWIFT_AUTHVERSION is
unspecified, it will default to version 1.</p>

<p style="margin-top: 1em">A NOTE ON SYMMETRIC ENCRYPTION
AND SIGNING <br>
Signing and symmetrically encrypt at the same time with the
gpg binary on the command line, as used within duplicity, is
a specifically challenging issue. Tests showed that the <br>
following combinations proved working.</p>

<p style="margin-top: 1em">1. Setup gpg-agent properly. Use
the option --use-agent and enter both passphrases (symmetric
and sign key) in the gpg-agent&rsquo;s dialog.</p>

<p style="margin-top: 1em">2. Use a PASSPHRASE for
symmetric encryption of your choice but the signing key has
an empty passphrase.</p>

<p style="margin-top: 1em">3. The used PASSPHRASE for
symmetric encryption and the passphrase of the signing key
are identical.</p>

<p style="margin-top: 1em">KNOWN ISSUES / BUGS <br>
Hard links currently unsupported (they will be treated as
non-linked regular files).</p>

<p style="margin-top: 1em">Bad signatures will be treated
as empty instead of logging appropriate error message.</p>

<p style="margin-top: 1em">OPERATION AND DATA FORMATS <br>
This section describes duplicity&rsquo;s basic operation and
the format of its data files. It should not necessary to
read this section to use duplicity.</p>

<p style="margin-top: 1em">The files used by duplicity to
store backup data are tarfiles in GNU tar format. They can
be produced independently by rdiffdir(1). For incremental
backups, new files are saved <br>
normally in the tarfile. But when a file changes, instead of
storing a complete copy of the file, only a diff is stored,
as generated by rdiff(1). If a file is deleted, a 0 <br>
length file is stored in the tar. It is possible to restore
a duplicity archive &quot;manually&quot; by using tar and
then cp, rdiff, and rm as necessary. These duplicity
archives have <br>
the extension difftar.</p>

<p style="margin-top: 1em">Both full and incremental backup
sets have the same format. In effect, a full backup set is
an incremental one generated from an empty signature (see
below). The files in full <br>
backup sets will start with duplicity-full while the
incremental sets start with duplicity-inc. When restoring,
duplicity applies patches in order, so deleting, for
instance, a <br>
full backup set may make related incremental backup sets
unusable.</p>

<p style="margin-top: 1em">In order to determine which
files have been deleted, and to calculate diffs for changed
files, duplicity needs to process information about previous
sessions. It stores this <br>
information in the form of tarfiles where each entry&rsquo;s
data contains the signature (as produced by rdiff) of the
file instead of the file&rsquo;s contents. These signature
sets have <br>
the extension sigtar.</p>

<p style="margin-top: 1em">Signature files are not required
to restore a backup set, but without an up-to-date
signature, duplicity cannot append an incremental backup to
an existing archive.</p>

<p style="margin-top: 1em">To save bandwidth, duplicity
generates full signature sets and incremental signature
sets. A full signature set is generated for each full
backup, and an incremental one for <br>
each incremental backup. These start with
duplicity-full-signatures and duplicity-new-signatures
respectively. These signatures will be stored both locally
and remotely. The <br>
remote signatures will be encrypted if encryption is
enabled. The local signatures will not be encrypted and
stored in the archive dir (see --archive-dir ).</p>

<p style="margin-top: 1em">REQUIREMENTS <br>
Duplicity requires a POSIX-like operating system with a
python interpreter version 2.6+ installed. It is best used
under GNU/Linux.</p>

<p style="margin-top: 1em">Some backends also require
additional components (probably available as packages for
your specific platform):</p>

<p style="margin-top: 1em">azure backend (Azure Blob
Storage Service) <br>
Microsoft Azure Storage SDK for Python -
https://pypi.python.org/pypi/azure-storage/</p>

<p style="margin-top: 1em">boto backend (S3 Amazon Web
Services, Google Cloud Storage) <br>
boto version 2.0+ - http://github.com/boto/boto</p>

<p style="margin-top: 1em">cfpyrax backend (Rackspace
Cloud) and hubic backend (hubic.com) <br>
Rackspace CloudFiles Pyrax API -
http://docs.rackspace.com/sdks/guide/content/python.html</p>

<p style="margin-top: 1em">dpbx backend (Dropbox) <br>
Dropbox Python SDK -
https://www.dropbox.com/developers/reference/sdk</p>

<p style="margin-top: 1em">copy backend (Copy.com) <br>
python-urllib3 - https://github.com/shazow/urllib3</p>

<p style="margin-top: 1em">gdocs gdata backend (legacy
Google Docs backend) <br>
Google Data APIs Python Client Library -
http://code.google.com/p/gdata-python-client/</p>

<p style="margin-top: 1em">gdocs pydrive backend(default)
<br>
see pydrive backend</p>

<p style="margin-top: 1em">gio backend (Gnome VFS API) <br>
PyGObject - http://live.gnome.org/PyGObject <br>
D-Bus (dbus)-
http://www.freedesktop.org/wiki/Software/dbus</p>

<p style="margin-top: 1em">lftp backend (needed for ftp,
ftps, fish [over ssh] - also supports sftp, webdav[s]) <br>
LFTP Client - http://lftp.yar.ru/</p>

<p style="margin-top: 1em">mega backend (mega.co.nz) <br>
Python library for mega API -
https://github.com/ckornacker/mega.py, ubuntu ppa -
ppa:ckornacker/backup</p>

<p style="margin-top: 1em">multi backend <br>
Multi -- store to more than one backend <br>
(also see A NOTE ON MULTI BACKEND ) below.</p>

<p style="margin-top: 1em">ncftp backend (ftp, select via
ncftp+ftp://) <br>
NcFTP - http://www.ncftp.com/</p>

<p style="margin-top: 1em">OneDrive backend (Microsoft
OneDrive) <br>
python-requests - http://python-requests.org <br>
python-requests-oauthlib -
https://github.com/requests/requests-oauthlib</p>

<p style="margin-top: 1em">Par2 Wrapper Backend <br>
par2cmdline - http://parchive.sourceforge.net/</p>

<p style="margin-top: 1em">pydrive backend <br>
PyDrive -- a wrapper library of google-api-python-client -
https://pypi.python.org/pypi/PyDrive <br>
(also see A NOTE ON PYDRIVE BACKEND ) below.</p>

<p style="margin-top: 1em">rsync backend <br>
rsync client binary - http://rsync.samba.org/</p>

<p style="margin-top: 1em">ssh paramiko backend (default)
<br>
paramiko (SSH2 for python) -
http://pypi.python.org/pypi/paramiko (downloads);
http://github.com/paramiko/paramiko (project page) <br>
pycrypto (Python Cryptography Toolkit) -
http://www.dlitz.net/software/pycrypto/</p>

<p style="margin-top: 1em">ssh pexpect backend <br>
sftp/scp client binaries OpenSSH - http://www.openssh.com/
<br>
Python pexpect module -
http://pexpect.sourceforge.net/pexpect.html</p>

<p style="margin-top: 1em">swift backend (OpenStack Object
Storage) <br>
Python swiftclient module -
https://github.com/openstack/python-swiftclient/ <br>
Python keystoneclient module -
https://github.com/openstack/python-keystoneclient/</p>

<p style="margin-top: 1em">webdav backend <br>
certificate authority database file for ssl certificate
verification of HTTPS connections -
http://curl.haxx.se/docs/caextract.html <br>
(also see A NOTE ON SSL CERTIFICATE VERIFICATION).</p>

<p style="margin-top: 1em">AUTHOR <br>
Original Author - Ben Escoto
&lt;bescoto@stanford.edu&gt;</p>

<p style="margin-top: 1em">Current Maintainer - Kenneth
Loafman &lt;kenneth@loafman.com&gt;</p>

<p style="margin-top: 1em">Continuous Contributors <br>
Edgar Soldin, Mike Terry</p>

<p style="margin-top: 1em">Most backends were contributed
individually. Information about their authorship may be
found in the according file&rsquo;s header.</p>

<p style="margin-top: 1em">Also we&rsquo;d like to thank
everybody posting issues to the mailing list or on
launchpad, sending in patches or contributing otherwise.
Duplicity wouldn&rsquo;t be as stable and useful if <br>
it weren&rsquo;t for you.</p>

<p style="margin-top: 1em">A special thanks goes to
rsync.net, a Cloud Storage provider with explicit support
for duplicity, for several monetary donations and for
providing a special &quot;duplicity friends&quot; <br>
rate for their offsite backup service. Email info@rsync.net
for details.</p>

<p style="margin-top: 1em">SEE ALSO <br>
rdiffdir(1), python(1), rdiff(1), rdiff-backup(1).</p>

<p style="margin-top: 1em">Version 0.7.06 December 07, 2015
DUPLICITY(1)</p>
<hr>
</body>
</html>
