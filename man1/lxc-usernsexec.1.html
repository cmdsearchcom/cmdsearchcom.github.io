<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:23:02 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>lxc-usernsexec(1) lxc-usernsexec(1)</p>

<p style="margin-top: 1em">NAME <br>
lxc-usernsexec - Run a task as root in a new user
namespace.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
lxc-usernsexec [-m uid-map] {-- command}</p>

<p style="margin-top: 1em">DESCRIPTION <br>
lxc-usernsexec can be used to run a task as root in a new
user namespace.</p>

<p style="margin-top: 1em">OPTIONS <br>
-m uid-map <br>
The uid map to use in the user namespace. Each map consists
of four colon-separate values. First a character
&rsquo;u&rsquo;, &rsquo;g&rsquo; or &rsquo;b&rsquo; to
specify whether this map pertains to user <br>
ids, group ids, or both; next the first userid in the user
namespace; next the first userid as seen on the host; and
finally the number of ids to be mapped.</p>

<p style="margin-top: 1em">More than one map can be
specified. If no map is specified, then by default the full
uid and gid ranges granted by /etc/subuid and /etc/subgid
will be mapped to the uids <br>
and gids starting at 0 in the container.</p>

<p style="margin-top: 1em">Note that lxc-usernsexec always
tries to setuid and setgid to 0 in the namespace. Therefore
uid 0 in the namespace must be mapped.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To spawn a shell with the full allotted subuids mapped into
the container, use</p>

<p style="margin-top: 1em">lxc-usernsexec</p>

<p style="margin-top: 1em">To run a different shell than
/bin/sh, use</p>

<p style="margin-top: 1em">lxc-usernsexec -- /bin/bash</p>

<p style="margin-top: 1em">If your user id is 1000, root in
a container is mapped to 190000, and you wish to chown a
file you own to root in the container, you can use:</p>

<p style="margin-top: 1em">lxc-usernsexec -m b:0:1000:1 -m
b:1:190000:1 -- /bin/chown 1:1 $file</p>

<p style="margin-top: 1em">This maps your userid to root in
the user namespace, and 190000 to uid 1. Since root in the
user namespace is privileged over all userids mapped into
the namespace, you are al&acirc; <br>
lowed to change the file ownership, which you could not do
on the host using a simple chown.</p>

<p style="margin-top: 1em">SEE ALSO <br>
lxc(7), lxc-create(1), lxc-copy(1), lxc-destroy(1),
lxc-start(1), lxc-stop(1), lxc-execute(1), lxc-console(1),
lxc-monitor(1), lxc-wait(1), lxc-cgroup(1), lxc-ls(1),
lxc-info(1), <br>
lxc-freeze(1), lxc-unfreeze(1), lxc-attach(1),
lxc.conf(5)</p>

<p style="margin-top: 1em">AUTHOR <br>
Serge Hallyn &lt;serge.hallyn@ubuntu.com&gt;</p>

<p style="margin-top: 1em">2017-05-29 lxc-usernsexec(1)</p>
<hr>
</body>
</html>
