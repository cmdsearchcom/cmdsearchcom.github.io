<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:11 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MR(1) mr MR(1)</p>

<p style="margin-top: 1em">NAME <br>
mr - a tool to manage all your version control repos</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mr [options] checkout</p>

<p style="margin-top: 1em">mr [options] update</p>

<p style="margin-top: 1em">mr [options] status</p>

<p style="margin-top: 1em">mr [options] clean [-f]</p>

<p style="margin-top: 1em">mr [options] commit [-m
&quot;message&quot;]</p>

<p style="margin-top: 1em">mr [options] record [-m
&quot;message&quot;]</p>

<p style="margin-top: 1em">mr [options] fetch</p>

<p style="margin-top: 1em">mr [options] push</p>

<p style="margin-top: 1em">mr [options] diff</p>

<p style="margin-top: 1em">mr [options] log</p>

<p style="margin-top: 1em">mr [options] grep pattern</p>

<p style="margin-top: 1em">mr [options] run command [param
...]</p>

<p style="margin-top: 1em">mr [options] bootstrap src
[directory]</p>

<p style="margin-top: 1em">mr [options] register
[repository]</p>

<p style="margin-top: 1em">mr [options] config section
[&quot;setting=[value]&quot; ...]</p>

<p style="margin-top: 1em">mr [options] action [params
...]</p>

<p style="margin-top: 1em">mr [options]
[online|offline]</p>

<p style="margin-top: 1em">mr [options] remember action
[params ...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mr is a tool to manage all your version control repos. It
can checkout, update, or perform other actions on a set of
repositories as if they were one combined repository. It
<br>
supports any combination of subversion, git, cvs, mercurial,
bzr, darcs, fossil and veracity repositories, and support
for other version control systems can easily be added.</p>

<p style="margin-top: 1em">mr cds into and operates on all
registered repositories at or below your working directory.
Or, if you are in a subdirectory of a repository that
contains no other registered <br>
repositories, it will stay in that directory, and work on
only that repository,</p>

<p style="margin-top: 1em">mr is configured by .mrconfig
files, which list the repositories. It starts by reading the
.mrconfig file in your home directory, and this can in turn
chain load .mrconfig files <br>
from repositories. It also automatically looks for a
.mrconfig file in the current directory, or in one of its
parent directories.</p>

<p style="margin-top: 1em">These predefined commands should
be fairly familiar to users of any version control
system:</p>

<p style="margin-top: 1em">checkout (or co) <br>
Checks out any repositories that are not already checked
out.</p>

<p style="margin-top: 1em">update <br>
Updates each repository from its configured remote
repository.</p>

<p style="margin-top: 1em">If a repository isn&rsquo;t
checked out yet, it will first check it out.</p>

<p style="margin-top: 1em">status <br>
Displays a status report for each repository, showing what
uncommitted changes are present in the repository. For
distributed version control systems, also shows unpushed
<br>
local branches.</p>

<p style="margin-top: 1em">clean <br>
Print ignored files, untracked files and other cruft in the
working directory.</p>

<p style="margin-top: 1em">The optional -f parameter allows
removing the files as well as printing them.</p>

<p style="margin-top: 1em">commit (or ci) <br>
Commits changes to each repository. (By default, changes are
pushed to the remote repository too, when using distributed
systems like git. If you don&rsquo;t like this default, you
<br>
can change it in your .mrconfig, or use record instead.)</p>

<p style="margin-top: 1em">The optional -m parameter allows
specifying a commit message.</p>

<p style="margin-top: 1em">record <br>
Records changes to the local repository, but does not push
them to the remote repository. Only supported for
distributed version control systems.</p>

<p style="margin-top: 1em">The optional -m parameter allows
specifying a commit message.</p>

<p style="margin-top: 1em">fetch <br>
Fetches from each repository&rsquo;s remote repository, but
does not update the working copy. Only supported for some
distributed version control systems.</p>

<p style="margin-top: 1em">push <br>
Pushes committed local changes to the remote repository. A
no-op for centralized version control systems.</p>

<p style="margin-top: 1em">diff <br>
Show a diff of uncommitted changes.</p>

<p style="margin-top: 1em">log Show the commit log.</p>

<p style="margin-top: 1em">grep pattern <br>
Searches for a pattern in each repository using the grep
subcommand. Uses ack-grep on VCS that do not have their
own.</p>

<p style="margin-top: 1em">run command [param ...] <br>
Runs the specified command in each repository.</p>

<p style="margin-top: 1em">These commands are also
available:</p>

<p style="margin-top: 1em">bootstrap src [directory] <br>
Causes mr to retrieve the source &quot;src&quot; and use it
as a .mrconfig file to checkout the repositories listed in
it, into the specified directory.</p>

<p style="margin-top: 1em">mr understands several types of
sources:</p>

<p style="margin-top: 1em">URL for curl <br>
&quot;src&quot; may be an URL understood by curl.</p>

<p style="margin-top: 1em">copy via ssh <br>
To use scp to download, the &quot;src&quot; may have the
form &quot;ssh://[user@]host:file&quot;.</p>

<p style="margin-top: 1em">local file <br>
You can retrieve the config file by other means and pass its
path as &quot;src&quot;.</p>

<p style="margin-top: 1em">standard input <br>
If source &quot;src&quot; consists in a single dash
&quot;-&quot;, config file is read from standard input.</p>

<p style="margin-top: 1em">The directory will be created if
it does not exist. If no directory is specified, the current
directory will be used.</p>

<p style="margin-top: 1em">As a special case, if source
&quot;src&quot; includes a repository named &quot;.&quot;,
that is checked out into the top of the specified
directory.</p>

<p style="margin-top: 1em">list (or ls) <br>
List the repositories that mr will act on.</p>

<p style="margin-top: 1em">register <br>
Register an existing repository in a mrconfig file. By
default, the repository in the current directory is
registered, or you can specify a directory to register.</p>

<p style="margin-top: 1em">The mrconfig file that is
modified is chosen by either the -c option, or by looking
for the closest known one at or in a parent of the current
directory.</p>

<p style="margin-top: 1em">config <br>
Adds, modifies, removes, or prints a value from a mrconfig
file. The next parameter is the name of the section the
value is in. To add or modify values, use one or more <br>
instances of &quot;setting=value&quot;. Use
&quot;setting=&quot; to remove a setting. Use just
&quot;setting&quot; to get the value of a that setting.</p>

<p style="margin-top: 1em">For example, to add (or edit) a
repository in src/foo:</p>

<p style="margin-top: 1em">mr config src/foo
checkout=&quot;svn co svn://example.com/foo/trunk
foo&quot;</p>

<p style="margin-top: 1em">To show the command that mr uses
to update the repository in src/foo:</p>

<p style="margin-top: 1em">mr config src/foo update</p>

<p style="margin-top: 1em">To see the built-in library of
shell functions contained in mr:</p>

<p style="margin-top: 1em">mr config DEFAULT lib</p>

<p style="margin-top: 1em">The mrconfig file that is used
is chosen by either the -c option, or by looking for the
closest known one at or in a parent of the current
directory.</p>

<p style="margin-top: 1em">offline <br>
Advises mr that it is in offline mode. Any commands that
fail in offline mode will be remembered, and retried when mr
is told it&rsquo;s online.</p>

<p style="margin-top: 1em">online <br>
Advices mr that it is in online mode again. Commands that
failed while in offline mode will be re-run.</p>

<p style="margin-top: 1em">remember <br>
Remember a command, to be run later when mr re-enters online
mode. This implicitly puts mr into offline mode. The command
can be any regular mr command. This is useful when <br>
you know that a command will fail due to being offline, and
so don&rsquo;t want to run it right now at all, but just
remember to run it when you go back online.</p>

<p style="margin-top: 1em">help <br>
Displays this help.</p>

<p style="margin-top: 1em">Actions can be abbreviated to
any unambiguous substring, so &quot;mr st&quot; is
equivalent to &quot;mr status&quot;, and &quot;mr up&quot;
is equivalent to &quot;mr update&quot;</p>

<p style="margin-top: 1em">Additional parameters can be
passed to most commands, and are passed on unchanged to the
underlying version control system. This is mostly useful if
the repositories mr will act <br>
on all use the same version control system.</p>

<p style="margin-top: 1em">OPTIONS <br>
-d directory <br>
--directory directory <br>
Specifies the topmost directory that mr should work in. The
default is the current working directory.</p>

<p style="margin-top: 1em">-c mrconfig <br>
--config mrconfig <br>
Use the specified mrconfig file. The default is to use both
~/.mrconfig as well as look for a .mrconfig file in the
current directory, or in one of its parent directories.</p>

<p style="margin-top: 1em">-f <br>
--force <br>
Force mr to act on repositories that would normally be
skipped due to their configuration.</p>

<p style="margin-top: 1em">--force-env <br>
Force mr to execute even though potentially dangerous
environment variables are set.</p>

<p style="margin-top: 1em">-v <br>
--verbose <br>
Be verbose.</p>

<p style="margin-top: 1em">-m <br>
--minimal <br>
Minimise output. If a command fails or there is any output
then the usual output will be shown.</p>

<p style="margin-top: 1em">-q <br>
--quiet <br>
Be quiet. This suppresses mr&rsquo;s usual output, as well
as any output from commands that are run (including stderr
output). If a command fails, the output will be shown.</p>

<p style="margin-top: 1em">-k <br>
--insecure <br>
Accept untrusted SSL certificates when bootstrapping.</p>

<p style="margin-top: 1em">-s <br>
--stats <br>
Expand the statistics line displayed at the end to include
information about exactly which repositories failed and were
skipped, if any.</p>

<p style="margin-top: 1em">-i <br>
--interactive <br>
Interactive mode. If a repository fails to be processed, a
subshell will be started which you can use to resolve or
investigate the problem. Exit the subshell to continue the
<br>
mr run.</p>

<p style="margin-top: 1em">-n [number] <br>
--no-recurse [number] <br>
If no number if specified, just operate on the repository
for the current directory, do not recurse into deeper
repositories.</p>

<p style="margin-top: 1em">If a number is specified, will
recurse into repositories at most that many subdirectories
deep. For example, with -n 2 it would recurse into
./src/foo, but not <br>
./src/packages/bar.</p>

<p style="margin-top: 1em">-j [number] <br>
--jobs [number] <br>
Run the specified number of jobs in parallel, or an
unlimited number of jobs with no number specified. This can
greatly speed up operations such as updates. It is not <br>
recommended for interactive operations.</p>

<p style="margin-top: 1em">Note that running more than 10
jobs at a time is likely to run afoul of ssh connection
limits. Running between 3 and 5 jobs at a time will yield a
good speedup in updates <br>
without loading the machine too much.</p>

<p style="margin-top: 1em">-t <br>
--trust-all <br>
Trust all mrconfig files even if they are not listed in
~/.mrtrust. Use with caution.</p>

<p style="margin-top: 1em">-p <br>
--path <br>
This obsolete flag is ignored.</p>

<p style="margin-top: 1em">MRCONFIG FILES <br>
Here is an example .mrconfig file:</p>

<p style="margin-top: 1em">[src] <br>
checkout = svn checkout svn://svn.example.com/src/trunk src
<br>
chain = true</p>

<p style="margin-top: 1em">[src/linux-2.6] <br>
checkout = git clone
git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
&amp;&amp; <br>
cd linux-2.6 &amp;&amp; <br>
git checkout -b mybranch origin/master</p>

<p style="margin-top: 1em">The .mrconfig file uses a
variant of the INI file format. Lines starting with
&quot;#&quot; are comments. Values can be continued to the
following line by indenting the line with <br>
whitespace.</p>

<p style="margin-top: 1em">The &quot;DEFAULT&quot; section
allows setting default values for the sections that come
after it.</p>

<p style="margin-top: 1em">The &quot;ALIAS&quot; section
allows adding aliases for actions. Each setting is an alias,
and its value is the action to use.</p>

<p style="margin-top: 1em">All other sections add
repositories. The section header specifies the directory
where the repository is located. This is relative to the
directory that contains the mrconfig <br>
file, but you can also choose to use absolute paths. (Note
that you can use environment variables in section names;
they will be passed through the shell for expansion. For
<br>
example, &quot;[$HOSTNAME]&quot;, or
&quot;[${HOSTNAME}foo]&quot;).</p>

<p style="margin-top: 1em">Within a section, each setting
defines a shell command to run to handle a given action. mr
contains default handlers for &quot;update&quot;,
&quot;status&quot;, &quot;commit&quot;, and other standard
actions.</p>

<p style="margin-top: 1em">Normally you only need to
specify what to do for &quot;checkout&quot;. Here you
specify the command to run in order to create a checkout of
the repository. The command will be run in the <br>
parent directory, and must create the repository&rsquo;s
directory. So use &quot;git clone&quot;, &quot;svn
checkout&quot;, &quot;bzr branch&quot; or &quot;bzr
checkout&quot; (for a bound branch), etc.</p>

<p style="margin-top: 1em">Note that these shell commands
are run in a &quot;set -e&quot; shell environment, where any
additional parameters you pass are available in $@. All
commands other than &quot;checkout&quot; are run <br>
inside the repository, though not necessarily at the top of
it.</p>

<p style="margin-top: 1em">The &quot;MR_REPO&quot;
environment variable is set to the path to the top of the
repository. (For the &quot;register&quot; action,
&quot;MR_REPO&quot; is instead set to the basename of the
directory that <br>
should be created when checking the repository out.)</p>

<p style="margin-top: 1em">The &quot;MR_CONFIG&quot;
environment variable is set to the .mrconfig file that
defines the repo being acted on, or, if the repo is not yet
in a config file, the .mrconfig file that <br>
should be modified to register the repo.</p>

<p style="margin-top: 1em">The &quot;MR_ACTION&quot;
environment variable is set to the command being run
(update, checkout, etc).</p>

<p style="margin-top: 1em">A few settings have special
meanings:</p>

<p style="margin-top: 1em">skip <br>
If &quot;skip&quot; is set and its command returns true,
then mr will skip acting on that repository. The command is
passed the action name in $1.</p>

<p style="margin-top: 1em">Here are two examples. The first
skips the repo unless mr is run by joey. The second uses the
hours_since function (included in mr&rsquo;s built-in
library) to skip updating the <br>
repo unless it&rsquo;s been at least 12 hours since the last
update.</p>

<p style="margin-top: 1em">[mystuff] <br>
checkout = ... <br>
skip = test &lsquo;whoami&lsquo; != joey</p>

<p style="margin-top: 1em">[linux] <br>
checkout = ... <br>
skip = [ &quot;$1&quot; = update ] &amp;&amp; ! hours_since
&quot;$1&quot; 12</p>

<p style="margin-top: 1em">Another way to use skip is for a
lazy checkout. This makes mr skip operating on a repo unless
it already exists. To enable the repo, you have to
explicitly check it out <br>
(using &quot;mr --force -d foo checkout&quot;).</p>

<p style="margin-top: 1em">[foo] <br>
checkout = ... <br>
skip = lazy</p>

<p style="margin-top: 1em">order <br>
The &quot;order&quot; setting can be used to override the
default ordering of repositories. The default order value is
10. Use smaller values to make repositories be processed
earlier, <br>
and larger values to make repositories be processed
later.</p>

<p style="margin-top: 1em">Note that if a repository is
located in a subdirectory of another repository, ordering it
to be processed earlier is not recommended.</p>

<p style="margin-top: 1em">chain <br>
If &quot;chain&quot; is set and its command returns true,
then mr will try to load a .mrconfig file from the root of
the repository.</p>

<p style="margin-top: 1em">include <br>
If &quot;include&quot; is set, its command is ran, and
should output additional mrconfig file content. The content
is included as if it were part of the including file.</p>

<p style="margin-top: 1em">Unlike everything else,
&quot;include&quot; does not need to be placed within a
section.</p>

<p style="margin-top: 1em">mr ships several libraries that
can be included to add support for additional version
control type things (unison, git-svn, git-fake-bare,
git-subtree). To include them all, <br>
you could use:</p>

<p style="margin-top: 1em">include = cat
/usr/share/mr/*</p>

<p style="margin-top: 1em">See the individual files for
details.</p>

<p style="margin-top: 1em">deleted <br>
If &quot;deleted&quot; is set and its command returns true,
then mr will treat the repository as deleted. It won&rsquo;t
ever actually delete the repository, but it will warn if it
sees the <br>
repository&rsquo;s directory. This is useful when one
mrconfig file is shared among multiple machines, to keep
track of and remember to delete old repositories.</p>

<p style="margin-top: 1em">lib The &quot;lib&quot; setting
can contain some shell code that will be run before each
command, this can be a useful way to define shell functions
for other commands to use.</p>

<p style="margin-top: 1em">Unlike most other settings, this
can be specified multiple times, in which case the chunks of
shell code are accumulatively concatenated together.</p>

<p style="margin-top: 1em">fixups <br>
If &quot;fixups&quot; is set, its command is run whenever a
repository is checked out, or updated. This provides an easy
way to do things like permissions fixups, or other tweaks to
<br>
the repository content, whenever the repository is
changed.</p>

<p style="margin-top: 1em">jobs <br>
If &quot;jobs&quot; is set, run the specified number of jobs
in parallel. This can greatly speed up operations such as
updates.</p>

<p style="margin-top: 1em">Note that running more than 10
jobs at a time is likely to run afoul of ssh connection
limits. Running between 3 and 5 jobs at a time will yield a
good speedup in updates <br>
without loading the machine too much.</p>

<p style="margin-top: 1em">VCS_action <br>
When looking for a command to run for a given action, mr
first looks for a setting with the same name as the action.
If that is not found, it looks for a setting named <br>
&quot;VCS_action&quot; (substituting in the name of the
version control system and the action).</p>

<p style="margin-top: 1em">Internally, mr has settings for
&quot;git_update&quot;, &quot;svn_update&quot;, etc. To
change the action that is performed for a given version
control system, you can override these VCS <br>
specific actions. To add a new version control system, you
can just add VCS specific actions for it.</p>

<p style="margin-top: 1em">pre_ and post_ <br>
If &quot;pre_action&quot; is set, its command is run before
mr performs the specified action. Similarly,
&quot;post_action&quot; commands are run after mr
successfully performs the specified <br>
action. For example, &quot;pre_commit&quot; is run before
committing; &quot;post_update&quot; is run after
updating.</p>

<p style="margin-top: 1em">_append <br>
Any setting can be suffixed with &quot;_append&quot;, to add
an additional value to the existing value of the setting. In
this way, actions can be constructed accumulatively.</p>

<p style="margin-top: 1em">VCS_test <br>
The name of the version control system is itself determined
by running each defined &quot;VCS_test&quot; action, until
one succeeds.</p>

<p style="margin-top: 1em">UNTRUSTED MRCONFIG FILES <br>
Since mrconfig files can contain arbitrary shell commands,
they can do anything. This flexibility is good, but it also
allows a malicious mrconfig file to delete your whole home
<br>
directory. Such a file might be contained inside a
repository that your main ~/.mrconfig checks out. To avoid
worries about evil commands in a mrconfig file, mr defaults
to <br>
reading all mrconfig files other than the main ~/.mrconfig
in untrusted mode. In untrusted mode, mrconfig files are
limited to running only known safe commands (like &quot;git
clone&quot;) <br>
in a carefully checked manner.</p>

<p style="margin-top: 1em">To configure mr to trust other
mrconfig files, list them in ~/.mrtrust. One mrconfig file
should be listed per line. Either the full pathname should
be listed, or the pathname <br>
can start with ~/ to specify a file relative to your home
directory.</p>

<p style="margin-top: 1em">OFFLINE LOG FILE <br>
The ~/.mrlog file contains commands that mr has remembered
to run later, due to being offline. You can delete or edit
this file to remove commands, or even to add other commands
<br>
for &rsquo;mr online&rsquo; to run. If the file is present,
mr assumes it is in offline mode.</p>

<p style="margin-top: 1em">EXTENSIONS <br>
mr can be extended to support things such as unison and
git-svn. Some files providing such extensions are available
in /usr/share/mr/. See the documentation in the files for
<br>
details about using them.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
mr returns nonzero if a command failed in any of the
repositories.</p>

<p style="margin-top: 1em">AUTHOR <br>
Copyright 2007-2011 Joey Hess &lt;joey@kitenet.net&gt;</p>

<p style="margin-top: 1em">Licensed under the GNU GPL
version 2 or higher.</p>


<p style="margin-top: 1em">http://myrepos.branchable.com/</p>

<p style="margin-top: 1em">perl v5.24.1 2016-01-23
MR(1)</p>
<hr>
</body>
</html>
