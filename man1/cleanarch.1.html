<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:58:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CLEANARCH(1) User Contributed Perl Documentation
CLEANARCH(1)</p>

<p style="margin-top: 1em">NAME <br>
cleanarch - Clean a DNSSEC-Tools key archive of old keys</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cleanarch [options] &lt;keyrec-file | rollrec-file&gt;</p>

<p style="margin-top: 1em">DESCRIPTION <br>
cleanarch deletes old keys from a DNSSEC-Tools key archive.
Key &quot;age&quot; and archives are determined by options
and arguments.</p>

<p style="margin-top: 1em">Command line options and
arguments allow selection of archives, keys to delete,
amount of output to provide. The options are divided into
three groups: archive selection, key <br>
selection, and output format. Complete information on
options is provided in the OPTIONS section.</p>

<p style="margin-top: 1em">cleanarch takes a single
argument (as distinguished from an option.) This argument
may be either a keyrec file or a rollrec file. If the file
is a keyrec file, the archive <br>
directory for its zone keyrecs are added to the list of
archives to clean. If the file is a rollrec file, keyrec
files for its zones are searched for the zones&rsquo;
archive <br>
directory, and those directories are added to the list of
archives to clean. If a zone does not have an archive
directory explicitly defined, then the DNSSEC-Tools default
will <br>
be cleaned. The archives specified by this argument may be
modified by archive-selection options.</p>

<p style="margin-top: 1em">The archive-selection options
combine with the keyrec or rollrec file to select a set of
archive directories to clean. (Some options can take the
place of the file argument.)</p>

<p style="margin-top: 1em">The key-selection options allow
the set of keys to be deleted to contain an entire archive,
a particular zone&rsquo;s keys, or all the keys prior to a
certain date.</p>

<p style="margin-top: 1em">The output-format options sets
how much output will be given. Without any options selected,
the names of keys will be printed as they are deleted. If
the -verbose option is <br>
given, then the directories selected for searching and the
keys selected for deletion will be printed. If the -dirlist
option is given, then the directories selected for <br>
searching will be printed and no other action will be taken.
If the -list option is given, then the keys selected for
deletion will be printed and no other action will be
taken.</p>

<p style="margin-top: 1em">cleanarch only cleans the
archive directories; the keyrec files are left intact. The
cleankrf command should be used in conjunction with
cleanarch in order to have a consistent <br>
environment.</p>

<p style="margin-top: 1em">OPTIONS <br>
Archive-Selection Options <br>
The following options allow the user to select the archives
to be cleaned.</p>

<p style="margin-top: 1em">-archive directory <br>
This option specifies an archive directory to be
cleaned.</p>

<p style="margin-top: 1em">-defarch <br>
This option indicates that the default archive directory
(named in the DNSSEC-Tools configuration file) should be
cleaned.</p>

<p style="margin-top: 1em">-zone zone <br>
This option indicates that zone is the only zone whose
archive will be cleaned. If the archive directory is shared
by other zones then their keys may also be deleted.</p>

<p style="margin-top: 1em">Key-Selection Options <br>
The following options allow the user to select the keys to
be deleted.</p>

<p style="margin-top: 1em">-all <br>
Deletes all keys in the selected archives. This option may
not be used with any other key-selection options.</p>

<p style="margin-top: 1em">-days days <br>
Deletes all keys except those whose modification date is
within the days full days preceding the current day.</p>

<p style="margin-top: 1em">-onezone zone <br>
Only keys with zone in the key&rsquo;s filename are deleted.
This is intended for use in cleaning a multi-zone key
archive.</p>

<p style="margin-top: 1em">This does not validate that zone
is an actual zone. Any string can be used here. For example,
using &quot;private&quot; will select old private key files
for deletion and using &quot;com&quot; <br>
will select any filename that contains &quot;com&quot;.</p>

<p style="margin-top: 1em">Options for Output Control <br>
The following options allow the user to control
cleanarch&rsquo;s output.</p>

<p style="margin-top: 1em">-dirlist <br>
This option lists the selected archive directories. No other
action is taken.</p>

<p style="margin-top: 1em">-list <br>
This option lists the selected keys. No other action is
taken.</p>

<p style="margin-top: 1em">-quiet <br>
Display no output.</p>

<p style="margin-top: 1em">-verbose <br>
Display verbose output.</p>

<p style="margin-top: 1em">-Version <br>
Displays the version information for cleanarch and the
DNSSEC-Tools package.</p>

<p style="margin-top: 1em">-help <br>
Display a usage message and exit.</p>

<p style="margin-top: 1em">WARNINGS <br>
The user is advised to invest a bit of time testing this
tool prior to putting it into production use. Once a key is
deleted, it is gone. Some may find this to be detrimental
<br>
to the health of their DNSSEC-Tools installation.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright 2007-2014 SPARTA, Inc. All rights reserved. See
the COPYING file included with the DNSSEC-Tools package for
details.</p>

<p style="margin-top: 1em">AUTHOR <br>
Wayne Morrison, tewok@tislabs.com</p>

<p style="margin-top: 1em">SEE ALSO <br>
cleankrf(8), lskrf(8), zonesigner(8)</p>


<p style="margin-top: 1em">Net::DNS::SEC::Tools::keyrec.pm(3),
Net::DNS::SEC::Tools::rollrec.pm(3)</p>

<p style="margin-top: 1em">dnssec-tools.conf(5),
keyrec.pm(5), rollrec.pm(5)</p>

<p style="margin-top: 1em">perl v5.24.0 2015-06-30
CLEANARCH(1)</p>
<hr>
</body>
</html>
