<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OSMIUM-ADD-LOCATIONS-TO-WAYS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OSMIUM-ADD-LOCATIONS-TO-WAYS(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">OSMIUM-ADD-LOCATIONS-TO-WAYS(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
osmium-add-locations-to-ways - add node locations to ways in OSM file
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>osmium add-locations-to-ways</b> [<i>OPTIONS</i>] <i>OSM-FILE</i>...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Usually only nodes have locations and the ways refer to those locations via the
  IDs of the nodes. This program will copy the input file(s) to the output,
  taking the locations from the nodes and adding them to the ways. This makes it
  easier for other programs to assemble the way geometries.
<div class="Pp"></div>
The input file must contain all nodes needed for the ways, otherwise there will
  be an error. You can change this behaviour using the --ignore-missing-nodes
  option.
<div class="Pp"></div>
Nodes without any tags will not be copied (unless the
  <b>--keep-untagged-nodes</b>, <b>-n</b> option is used). The size of the
  output file will be similar or a bit smaller than the input file (unless the
  <b>--keep-untagged-nodes</b>, <b>-n</b> option is used in which case it will
  be a lot bigger).
<div class="Pp"></div>
Note that the OSM files generated by this command use a non-standard format
  extension.
<div class="Pp"></div>
The node locations have to be kept in memory while doings this. Use the
  <b>--index-type</b>, <b>-i</b> option to set the index type used. Default is
  sparse_mmap_array on Linux and sparse_mem_array on OSX/Windows. This is the
  right index type for small to medium sized extracts. For large
  (continent-sized) extracts or the full planet use dense_mmap_array on Linux or
  dense_mem_array on OSX/Windows.
<div class="Pp"></div>
If the <b>--keep-untagged-nodes</b>, <b>-n</b> option is used, files created by
  this command can be updated with the <b>apply-changes</b> command using the
  <b>--locations-on-ways</b> option.
<div class="Pp"></div>
This program will not work on full history files.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i, --index-type=TYPE</b></dt>
  <dd class="It-tag">Set the index type.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I, --show-index-types</b></dt>
  <dd class="It-tag">Shows a list of available index types. It depends on your
      operating system which index types are available.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n, --keep-untagged-nodes</b></dt>
  <dd class="It-tag">Keep the untagged nodes in the output file.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-missing-nodes</b></dt>
  <dd class="It-tag">If this is not set a missing node needed for a way results
      in an error. If this is set, errors are ignored and the way will have an
      invalid location set for the missing node.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="COMMON_OPTIONS"><a class="selflink" href="#COMMON_OPTIONS">COMMON
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show usage help.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Set verbose mode. The program will output information about
      what it is doing to <i>stderr</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--progress</b></dt>
  <dd class="It-tag">Show progress bar. Usually a progress bar is only displayed
      if STDERR is detected to be a TTY. With this option a progress bar is
      always shown. Note that a progress bar will never be shown when reading
      from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress</b></dt>
  <dd class="It-tag">Do not show progress bar. Usually a progress bar is
      displayed if STDERR is detected to be a TTY. With this option the progress
      bar is suppressed. Note that a progress bar will never be shown when
      reading from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="INPUT_OPTIONS"><a class="selflink" href="#INPUT_OPTIONS">INPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F, --input-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the input file(s). Can be used to set the
      input format if it can't be autodetected from the file name(s). This will
      set the format for all input files, there is no way to set the format for
      some input files only. See <b>osmium-file-formats</b>(5) or the libosmium
      manual for details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="OUTPUT_OPTIONS"><a class="selflink" href="#OUTPUT_OPTIONS">OUTPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --output-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the output file. Can be used to set the
      output file format if it can't be autodetected from the output file name.
      See <b>osmium-file-formats</b>(5) or the libosmium manual for
    details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--fsync</b></dt>
  <dd class="It-tag">Call fsync after writing the output file to force flushing
      buffers to disk.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generator=NAME</b></dt>
  <dd class="It-tag">The name and version of the program generating the output
      file. It will be added to the header of the output file. Default is &quot;
      <i>osmium/</i>&quot; and the version of osmium.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o, --output=FILE</b></dt>
  <dd class="It-tag">Name of the output file. Default is '-' (STDOUT).</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O, --overwrite</b></dt>
  <dd class="It-tag">Allow an existing output file to be overwritten. Normally
      <b>osmium</b> will refuse to write over an existing file.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output-header=OPTION</b></dt>
  <dd class="It-tag">Add output header option. This option can be given several
      times. See the <i>libosmium manual</i> for a list of allowed header
      options.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<b>osmium add-locations-to-ways</b> exits with exit code
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">if everything went alright,</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">if there was an error processing the data, or</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">if there was a problem with the command line
    arguments.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="MEMORY_USAGE"><a class="selflink" href="#MEMORY_USAGE">MEMORY
  USAGE</a></h1>
<b>osmium add-locations-to-ways</b> needs to keep all node locations in memory.
  It depends on the index type used how much memory is needed:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For sparse types 16 bytes per node in the input file are
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For dense types 8 bytes times the largest node ID in the
      input file are used.</dd>
</dl>
<div class="Pp"></div>
The *_mem_* types use potentially up to twice this amount.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Add node locations to an extract keeping all nodes:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;add-locations-to-ways&#x00A0;-n&#x00A0;-o&#x00A0;germany-low.osm.pbf&#x00A0;germany.osm.pbf
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Add node locations to a planet file (without untagged nodes):
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;add-locations-to-ways&#x00A0;-i&#x00A0;dense_mmap_array&#x00A0;-o&#x00A0;planet-low.osm.pbf&#x00A0;planet.osm.pbf
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>osmium</b>(1), <b>osmium-file-formats</b>(5)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Osmium website (http://osmcode.org/osmium-tool/)</dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2013-2017 Jochen Topf &lt;jochen@topf.org&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
License GPLv3+: GNU GPL version 3 or later
  &lt;https://gnu.org/licenses/gpl.html&gt;. This is free software: you are free
  to change and redistribute it. There is NO WARRANTY, to the extent permitted
  by law.
<h1 class="Sh" title="Sh" id="CONTACT"><a class="selflink" href="#CONTACT">CONTACT</a></h1>
If you have any questions or want to report a bug, please go to
  http://osmcode.org/contact.html
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Jochen Topf &lt;jochen@topf.org&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.6.1</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
