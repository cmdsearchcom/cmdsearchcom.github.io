<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DBENCH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBENCH(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">DBENCH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dbench - Measure disk throughput for simulated netbench run
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dbench</b> [<i>options</i>]<i>numclients</i>
<div>&#x00A0;</div>
<b>tbench</b> [<i>options</i>]<i>numclients</i>server <b>tbench_srv</b>
  [<i>options</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This manual page documents briefly the <b>dbench</b> and <b>tbench</b>
  benchmarks. This manual page was written for the Debian GNU/Linux distribution
  because the original program does not have a manual page. However, it has
  fairly easy to read source code.
<div class="Pp"></div>
Netbench is a terrible benchmark, but it's an &quot;industry standard&quot; and
  it's what is used in the press to rate windows fileservers like Samba and
  WindowsNT.
<div>&#x00A0;</div>
Given the requirements of running netbench (60 and 150 Windows PCs all on
  switched fast ethernet and a really grunty server, and some way to nurse all
  those machines along so they will run a very fussy benchmark suite without
  crashing), these programs were written to open up netbench to the masses.
<div>&#x00A0;</div>
Both <b>dbench</b> and <b>tbench</b> read a load description file called
  client.txt that was derived from a network sniffer dump of a real netbench
  run. client.txt is about 4MB and describes the 90 thousand operations that a
  netbench client does in a typical netbench run. They parse client.txt and use
  it to produce the same load without having to buy a huge lab.
<div>&#x00A0;</div>
dbench produces only the filesystem load. It does all the same IO calls that the
  smbd server in Samba would produce when confronted with a netbench run. It
  does no networking calls.
<div>&#x00A0;</div>
tbench produces only the TCP and process load. It does the same socket calls
  that smbd would do under a netbench load. It does no filesystem calls. The
  idea behind tbench is to eliminate smbd from the netbench test, as though the
  smbd code could be made infinately fast.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <b>dbench</b> program takes a number, which indicates the number of clients
  to run simultaneously. It can also take the following options:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c client.txt</b></dt>
  <dd class="It-tag">Use this as the full path name of the client.txt file (the
      default is /usr/share/dbench/client.txt).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">Use synchronous file IO on all file operations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t TIME</b></dt>
  <dd class="It-tag">set the runtime of the benchmark in seconds (default
    600)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D DIR</b></dt>
  <dd class="It-tag">set the base directory to run the filesystem operations
    in</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">enable xattr support, simulating the xattr operations
      Samba4 would need to perform to run the load</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag">Use synchronous IO for all directory operations (unlink,
      rmdir, mkdir and rename).
    <div>&#x00A0;</div>
    The <b>tbench</b> program takes a number, which indicates the number of
      clients to run simultaneously, and a server name: <b>tbench_srv</b> should
      be invoked on that server before invoking <b>tbench</b>. <b>tbench</b> can
      also take the following options:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T option[,...]</b></dt>
  <dd class="It-tag">This sets the socket options for the connection to the
      server. The options are a comma-separated list of one or more of the
      following: <b>SO_KEEPALIVE</b>, <b>SO_REUSEADDR</b>, <b>SO_BROADCAST</b>,
      <b>SO_NODELAY</b>, <b>SO_LOWDELAY</b>, <b>SO_THROUGHPUT</b>,
      <b>SO_SNDBUF</b>=number, <b>SO_RCVBUF</b>=number,
      <b>SO_SNDLOWAT</b>=number, <b>SO_RCVLOWAT</b>=number,
      <b>SO_SNDTIMEO</b>=number,<b>and</b> <b>SO_RCVTIMEO</b>=number. See
      <b>socket</b>(7) for details about these options.
    <div>&#x00A0;</div>
    The <b>tbench_srv</b> can only take one option: <b>-T option[,...]</b> as
      documented above.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>/usr/share/doc/dbench/README</i> contains the original README by Andrew
  Tridgell which accompanies the dbench source.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manual page was originally written by Paul Russell
  &lt;prussell@alderaan.franken.de&gt;, for the Debian GNU/Linux system (but may
  be used by others). Modified and updated by Mattias Nordstrom
  &lt;nordstrom@realnode.com&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 18, 2005</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
