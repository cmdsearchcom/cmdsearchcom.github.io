<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:22:43 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>LSOF(1) General Commands Manual LSOF(1)</p>

<p style="margin-top: 1em">NAME <br>
lsof - list open files</p>

<p style="margin-top: 1em">SYNOPSIS <br>
lsof [ -?abChKlnNOPRtUvVX ] [ -A A ] [ -c c ] [ +c c ] [
+|-d d ] [ +|-D D ] [ +|-e s ] [ +|-E ] [ +|-f [cfgGn] ] [
-F [f] ] [ -g [s] ] [ -i [i] ] [ -k k ] [ +|-L [l] ] [ +|-m
m <br>
] [ +|-M ] [ -o [o] ] [ -p s ] [ +|-r [t[m&lt;fmt&gt;]] ] [
-s [p:s] ] [ -S [t] ] [ -T [t] ] [ -u s ] [ +|-w ] [ -x [fl]
] [ -z [z] ] [ -Z [Z] ] [ -- ] [names]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Lsof revision 4.89 lists on its standard output file
information about files opened by processes for the
following UNIX dialects:</p>

<p style="margin-top: 1em">Apple Darwin 9 and Mac OS X
10.[567] <br>
FreeBSD 8.[234], 9.0, 10.0 and 11.0 for AMD64-based systems
<br>
Linux 2.1.72 and above for x86-based systems <br>
Solaris 9, 10 and 11</p>

<p style="margin-top: 1em">(See the DISTRIBUTION section of
this manual page for information on how to obtain the latest
lsof revision.)</p>

<p style="margin-top: 1em">An open file may be a regular
file, a directory, a block special file, a character special
file, an executing text reference, a library, a stream or a
network file (Internet <br>
socket, NFS file or UNIX domain socket.) A specific file or
all the files in a file system may be selected by path.</p>

<p style="margin-top: 1em">Instead of a formatted display,
lsof will produce output that can be parsed by other
programs. See the -F, option description, and the OUTPUT FOR
OTHER PROGRAMS section for more <br>
information.</p>

<p style="margin-top: 1em">In addition to producing a
single output list, lsof will run in repeat mode. In repeat
mode it will produce output, delay, then repeat the output
operation until stopped with an <br>
interrupt or quit signal. See the +|-r [t[m&lt;fmt&gt;]]
option description for more information.</p>

<p style="margin-top: 1em">OPTIONS <br>
In the absence of any options, lsof lists all open files
belonging to all active processes.</p>

<p style="margin-top: 1em">If any list request option is
specified, other list requests must be specifically
requested - e.g., if -U is specified for the listing of UNIX
socket files, NFS files won&rsquo;t be <br>
listed unless -N is also specified; or if a user list is
specified with the -u option, UNIX domain socket files,
belonging to users not in the list, won&rsquo;t be listed
unless the -U <br>
option is also specified.</p>

<p style="margin-top: 1em">Normally list options that are
specifically stated are ORed - i.e., specifying the -i
option without an address and the -ufoo option produces a
listing of all network files OR <br>
files belonging to processes owned by user
&lsquo;&lsquo;foo&rsquo;&rsquo;. The exceptions are:</p>

<p style="margin-top: 1em">1) the &lsquo;^&rsquo; (negated)
login name or user ID (UID), specified with the -u
option;</p>

<p style="margin-top: 1em">2) the &lsquo;^&rsquo; (negated)
process ID (PID), specified with the -p option;</p>

<p style="margin-top: 1em">3) the &lsquo;^&rsquo; (negated)
process group ID (PGID), specified with the -g option;</p>

<p style="margin-top: 1em">4) the &lsquo;^&rsquo; (negated)
command, specified with the -c option;</p>

<p style="margin-top: 1em">5) the (&lsquo;^&rsquo;) negated
TCP or UDP protocol state names, specified with the -s [p:s]
option.</p>

<p style="margin-top: 1em">Since they represent exclusions,
they are applied without ORing or ANDing and take effect
before any other selection criteria are applied.</p>

<p style="margin-top: 1em">The -a option may be used to AND
the selections. For example, specifying -a, -U, and -ufoo
produces a listing of only UNIX socket files that belong to
processes owned by user <br>
&lsquo;&lsquo;foo&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">Caution: the -a option causes
all list selection options to be ANDed; it can&rsquo;t be
used to cause ANDing of selected pairs of selection options
by placing it between them, even <br>
though its placement there is acceptable. Wherever -a is
placed, it causes the ANDing of all selection options.</p>

<p style="margin-top: 1em">Items of the same selection set
- command names, file descriptors, network addresses,
process identifiers, user identifiers, zone names, security
contexts - are joined in a sin&acirc; <br>
gle ORed set and applied before the result participates in
ANDing. Thus, for example, specifying -i@aaa.bbb,
-i@ccc.ddd, -a, and -ufff,ggg will select the listing of
files that <br>
belong to either login &lsquo;&lsquo;fff&rsquo;&rsquo; OR
&lsquo;&lsquo;ggg&rsquo;&rsquo; AND have network connections
to either host aaa.bbb OR ccc.ddd.</p>

<p style="margin-top: 1em">Options may be grouped together
following a single prefix -- e.g., the option set
&lsquo;&lsquo;-a -b -C&rsquo;&rsquo; may be stated as -abC.
However, since values are optional following +|-f, -F, -g,
<br>
-i, +|-L, -o, +|-r, -s, -S, -T, -x and -z. when you have no
values for them be careful that the following character
isn&rsquo;t ambiguous. For example, -Fn might represent the
-F and <br>
-n options, or it might represent the n field identifier
character following the -F option. When ambiguity is
possible, start a new option with a &lsquo;-&rsquo;
character - e.g., &lsquo;&lsquo;-F <br>
-n&rsquo;&rsquo;. If the next option is a file name, follow
the possibly ambiguous option with
&lsquo;&lsquo;--&rsquo;&rsquo; - e.g., &lsquo;&lsquo;-F --
name&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">Either the &lsquo;+&rsquo; or
the &lsquo;-&rsquo; prefix may be applied to a group of
options. Options that don&rsquo;t take on separate meanings
for each prefix - e.g., -i - may be grouped under either
pre&acirc; <br>
fix. Thus, for example, &lsquo;&lsquo;+M -i&rsquo;&rsquo;
may be stated as &lsquo;&lsquo;+Mi&rsquo;&rsquo; and the
group means the same as the separate options. Be careful of
prefix grouping when one or more options in the <br>
group does take on separate meanings under different
prefixes - e.g., +|-M; &lsquo;&lsquo;-iM&rsquo;&rsquo; is
not the same request as &lsquo;&lsquo;-i +M&rsquo;&rsquo;.
When in doubt, use separate options with appropriate <br>
prefixes.</p>

<p style="margin-top: 1em">-? -h These two equivalent
options select a usage (help) output list. Lsof displays a
shortened form of this output when it detects an error in
the options supplied to it, <br>
after it has displayed messages explaining each error.
(Escape the &lsquo;?&rsquo; character as your shell
requires.)</p>

<p style="margin-top: 1em">-a causes list selection options
to be ANDed, as described above.</p>

<p style="margin-top: 1em">-A A is available on systems
configured for AFS whose AFS kernel code is implemented via
dynamic modules. It allows the lsof user to specify A as an
alternate name list file <br>
where the kernel addresses of the dynamic modules might be
found. See the lsof FAQ (The FAQ section gives its
location.) for more information about dynamic modules, <br>
their symbols, and how they affect lsof.</p>

<p style="margin-top: 1em">-b causes lsof to avoid kernel
functions that might block - lstat(2), readlink(2), and
stat(2).</p>

<p style="margin-top: 1em">See the BLOCKS AND TIMEOUTS and
AVOIDING KERNEL BLOCKS sections for information on using
this option.</p>

<p style="margin-top: 1em">-c c selects the listing of
files for processes executing the command that begins with
the characters of c. Multiple commands may be specified,
using multiple -c options. <br>
They are joined in a single ORed set before participating in
AND option selection.</p>

<p style="margin-top: 1em">If c begins with a
&lsquo;^&rsquo;, then the following characters specify a
command name whose processes are to be ignored
(excluded.)</p>

<p style="margin-top: 1em">If c begins and ends with a
slash (&rsquo;/&rsquo;), the characters between the slashes
are interpreted as a regular expression. Shell
meta-characters in the regular expression <br>
must be quoted to prevent their interpretation by the shell.
The closing slash may be followed by these modifiers:</p>

<p style="margin-top: 1em">b the regular expression is a
basic one. <br>
i ignore the case of letters. <br>
x the regular expression is an extended one <br>
(default).</p>

<p style="margin-top: 1em">See the lsof FAQ (The FAQ
section gives its location.) for more information on basic
and extended regular expressions.</p>

<p style="margin-top: 1em">The simple command specification
is tested first. If that test fails, the command regular
expression is applied. If the simple command test succeeds,
the command regu&acirc; <br>
lar expression test isn&rsquo;t made. This may result in
&lsquo;&lsquo;no command found for regex:&rsquo;&rsquo;
messages when lsof&rsquo;s -V option is specified.</p>

<p style="margin-top: 1em">+c w defines the maximum number
of initial characters of the name, supplied by the UNIX
dialect, of the UNIX command associated with a process to be
printed in the COMMAND <br>
column. (The lsof default is nine.)</p>

<p style="margin-top: 1em">Note that many UNIX dialects do
not supply all command name characters to lsof in the files
and structures from which lsof obtains command name. Often
dialects limit <br>
the number of characters supplied in those sources. For
example, Linux 2.4.27 and Solaris 9 both limit command name
length to 16 characters.</p>

<p style="margin-top: 1em">If w is zero (&rsquo;0&rsquo;),
all command characters supplied to lsof by the UNIX dialect
will be printed.</p>

<p style="margin-top: 1em">If w is less than the length of
the column title, &lsquo;&lsquo;COMMAND&rsquo;&rsquo;, it
will be raised to that length.</p>

<p style="margin-top: 1em">-C disables the reporting of any
path name components from the kernel&rsquo;s name cache. See
the KERNEL NAME CACHE section for more information.</p>

<p style="margin-top: 1em">+d s causes lsof to search for
all open instances of directory s and the files and
directories it contains at its top level. +d does NOT
descend the directory tree, rooted <br>
at s. The +D D option may be used to request a full-descent
directory tree search, rooted at directory D.</p>

<p style="margin-top: 1em">Processing of the +d option does
not follow symbolic links within s unless the -x or -x l
option is also specified. Nor does it search for open files
on file system <br>
mount points on subdirectories of s unless the -x or -x f
option is also specified.</p>

<p style="margin-top: 1em">Note: the authority of the user
of this option limits it to searching for files that the
user has permission to examine with the system stat(2)
function.</p>

<p style="margin-top: 1em">-d s specifies a list of file
descriptors (FDs) to exclude from or include in the output
listing. The file descriptors are specified in the
comma-separated set s - e.g., <br>
&lsquo;&lsquo;cwd,1,3&rsquo;&rsquo;,
&lsquo;&lsquo;^6,^2&rsquo;&rsquo;. (There should be no
spaces in the set.)</p>

<p style="margin-top: 1em">The list is an exclusion list if
all entries of the set begin with &lsquo;^&rsquo;. It is an
inclusion list if no entry begins with &lsquo;^&rsquo;.
Mixed lists are not permitted.</p>

<p style="margin-top: 1em">A file descriptor number range
may be in the set as long as neither member is empty, both
members are numbers, and the ending member is larger than
the starting one - <br>
e.g., &lsquo;&lsquo;0-7&rsquo;&rsquo; or
&lsquo;&lsquo;3-10&rsquo;&rsquo;. Ranges may be specified
for exclusion if they have the &lsquo;^&rsquo; prefix -
e.g., &lsquo;&lsquo;^0-7&rsquo;&rsquo; excludes all file
descriptors 0 through 7.</p>

<p style="margin-top: 1em">Multiple file descriptor numbers
are joined in a single ORed set before participating in AND
option selection.</p>

<p style="margin-top: 1em">When there are exclusion and
inclusion members in the set, lsof reports them as errors
and exits with a non-zero return code.</p>

<p style="margin-top: 1em">See the description of File
Descriptor (FD) output values in the OUTPUT section for more
information on file descriptor names.</p>

<p style="margin-top: 1em">+D D causes lsof to search for
all open instances of directory D and all the files and
directories it contains to its complete depth.</p>

<p style="margin-top: 1em">Processing of the +D option does
not follow symbolic links within D unless the -x or -x l
option is also specified. Nor does it search for open files
on file system <br>
mount points on subdirectories of D unless the -x or -x f
option is also specified.</p>

<p style="margin-top: 1em">Note: the authority of the user
of this option limits it to searching for files that the
user has permission to examine with the system stat(2)
function.</p>

<p style="margin-top: 1em">Further note: lsof may process
this option slowly and require a large amount of dynamic
memory to do it. This is because it must descend the entire
directory tree, <br>
rooted at D, calling stat(2) for each file and directory,
building a list of all the files it finds, and searching
that list for a match with every open file. When <br>
directory D is large, these steps can take a long time, so
use this option prudently.</p>

<p style="margin-top: 1em">-D D directs lsof&rsquo;s use of
the device cache file. The use of this option is sometimes
restricted. See the DEVICE CACHE FILE section and the
sections that follow it for more <br>
information on this option.</p>

<p style="margin-top: 1em">-D must be followed by a
function letter; the function letter may optionally be
followed by a path name. Lsof recognizes these function
letters:</p>

<p style="margin-top: 1em">? - report device cache file
paths <br>
b - build the device cache file <br>
i - ignore the device cache file <br>
r - read the device cache file <br>
u - read and update the device cache file</p>

<p style="margin-top: 1em">The b, r, and u functions,
accompanied by a path name, are sometimes restricted. When
these functions are restricted, they will not appear in the
description of the -D <br>
option that accompanies -h or -? option output. See the
DEVICE CACHE FILE section and the sections that follow it
for more information on these functions and when <br>
they&rsquo;re restricted.</p>

<p style="margin-top: 1em">The ? function reports the
read-only and write paths that lsof can use for the device
cache file, the names of any environment variables whose
values lsof will examine <br>
when forming the device cache file path, and the format for
the personal device cache file path. (Escape the
&lsquo;?&rsquo; character as your shell requires.)</p>

<p style="margin-top: 1em">When available, the b, r, and u
functions may be followed by the device cache file&rsquo;s
path. The standard default is .lsof_hostname in the home
directory of the real user <br>
ID that executes lsof, but this could have been changed when
lsof was configured and compiled. (The output of the -h and
-? options show the current default prefix - <br>
e.g., &lsquo;&lsquo;.lsof&rsquo;&rsquo;.) The suffix,
hostname, is the first component of the host&rsquo;s name
returned by gethostname(2).</p>

<p style="margin-top: 1em">When available, the b function
directs lsof to build a new device cache file at the default
or specified path.</p>

<p style="margin-top: 1em">The i function directs lsof to
ignore the default device cache file and obtain its
information about devices via direct calls to the
kernel.</p>

<p style="margin-top: 1em">The r function directs lsof to
read the device cache at the default or specified path, but
prevents it from creating a new device cache file when none
exists or the <br>
existing one is improperly structured. The r function, when
specified without a path name, prevents lsof from updating
an incorrect or outdated device cache file, or <br>
creating a new one in its place. The r function is always
available when it is specified without a path name argument;
it may be restricted by the permissions of the <br>
lsof process.</p>

<p style="margin-top: 1em">When available, the u function
directs lsof to read the device cache file at the default or
specified path, if possible, and to rebuild it, if
necessary. This is the <br>
default device cache file function when no -D option has
been specified.</p>

<p style="margin-top: 1em">+|-e s exempts the file system
whose path name is s from being subjected to kernel function
calls that might block. The +e option exempts stat(2),
lstat(2) and most read&acirc; <br>
link(2) kernel function calls. The -e option exempts only
stat(2) and lstat(2) kernel function calls. Multiple file
systems may be specified with separate +|-e speci&acirc;
<br>
fications and each may have readlink(2) calls exempted or
not.</p>

<p style="margin-top: 1em">This option is currently
implemented only for Linux.</p>

<p style="margin-top: 1em">CAUTION: this option can easily
be mis-applied to other than the file system of interest,
because it uses path name rather than the more reliable
device and inode num&acirc; <br>
bers. (Device and inode numbers are acquired via the
potentially blocking stat(2) kernel call and are thus not
available, but see the +|-m m option as a possible
alter&acirc; <br>
native way to supply device numbers.) Use this option with
great care and fully specify the path name of the file
system to be exempted.</p>

<p style="margin-top: 1em">When open files on exempted file
systems are reported, it may not be possible to obtain all
their information. Therefore, some information columns will
be blank, the <br>
characters &lsquo;&lsquo;UNKN&rsquo;&rsquo; preface the
values in the TYPE column, and the applicable exemption
option is added in parentheses to the end of the NAME
column. (Some device num&acirc; <br>
ber information might be made available via the +|-m m
option.)</p>

<p style="margin-top: 1em">+|-E +E specifies that Linux
pipe and Linux UNIX socket files should be displayed with
endpoint information and the files of the endpoints should
also be displayed. Note: <br>
UNIX socket file endpoint information is available only when
the compile flags line of -v output contains
HASUXSOCKEPT.</p>

<p style="margin-top: 1em">Pipe endpoint information is
displayed in the NAME column in the form
&lsquo;&lsquo;PID,cmd,FDmode&rsquo;&rsquo;, where PID is the
endpoint process ID; cmd is the endpoint process command; FD
<br>
is the endpoint file&rsquo;s descriptor; and mode is the
endpoint file&rsquo;s access mode.</p>

<p style="margin-top: 1em">UNIX socket file endpoint
information is displayed in the NAME column in the form <br>
&lsquo;&lsquo;type=TYPE -&gt;INO=INODE
PID,cmd,FDmode&rsquo;&rsquo;, where TYPE is the socket type;
INODE is the i-node number of the connected socket; and PID,
cmd, FD, and mode are the same as <br>
with pipe endpoint information. Note: UNIX socket file
endpoint information is available only when the compile
flags line of -v output contains HASUXSOCKEPT.</p>

<p style="margin-top: 1em">Multiple occurrences of this
information can appear in a file&rsquo;s NAME column.</p>

<p style="margin-top: 1em">-E specfies that Linux pipe and
Linux UNIX socket files should be displayed with endpoint
information, but not the files of the endpoints.</p>

<p style="margin-top: 1em">+|-f [cfgGn] <br>
f by itself clarifies how path name arguments are to be
interpreted. When followed by c, f, g, G, or n in any
combination it specifies that the listing of kernel file
<br>
structure information is to be enabled (&lsquo;+&rsquo;) or
inhibited (&lsquo;-&rsquo;).</p>

<p style="margin-top: 1em">Normally a path name argument is
taken to be a file system name if it matches a mounted-on
directory name reported by mount(8), or if it represents a
block device, named <br>
in the mount output and associated with a mounted directory
name. When +f is specified, all path name arguments will be
taken to be file system names, and lsof will <br>
complain if any are not. This can be useful, for example,
when the file system name (mounted-on device) isn&rsquo;t a
block device. This happens for some CD-ROM file sys&acirc;
<br>
tems.</p>

<p style="margin-top: 1em">When -f is specified by itself,
all path name arguments will be taken to be simple files.
Thus, for example, the &lsquo;&lsquo;-f -- /&rsquo;&rsquo;
arguments direct lsof to search for open <br>
files with a &lsquo;/&rsquo; path name, not all open files
in the &lsquo;/&rsquo; (root) file system.</p>

<p style="margin-top: 1em">Be careful to make sure +f and
-f are properly terminated and aren&rsquo;t followed by a
character (e.g., of the file or file system name) that might
be taken as a parameter. <br>
For example, use &lsquo;&lsquo;--&rsquo;&rsquo; after +f and
-f as in these examples.</p>

<p style="margin-top: 1em">$ lsof +f -- /file/system/name
<br>
$ lsof -f -- /file/name</p>

<p style="margin-top: 1em">The listing of information from
kernel file structures, requested with the +f [cfgGn] option
form, is normally inhibited, and is not available in whole
or part for some <br>
dialects - e.g., /proc-based Linux kernels below 2.6.22.
When the prefix to f is a plus sign (&lsquo;+&rsquo;), these
characters request file structure information:</p>

<p style="margin-top: 1em">c file structure use count (not
Linux) <br>
f file structure address (not Linux) <br>
g file flag abbreviations (Linux 2.6.22 and up) <br>
G file flags in hexadecimal (Linux 2.6.22 and up) <br>
n file structure node address (not Linux)</p>

<p style="margin-top: 1em">When the prefix is minus
(&lsquo;-&rsquo;) the same characters disable the listing of
the indicated values.</p>

<p style="margin-top: 1em">File structure addresses, use
counts, flags, and node addresses may be used to detect more
readily identical files inherited by child processes and
identical files in <br>
use by different processes. Lsof column output can be sorted
by output columns holding the values and listed to identify
identical file use, or lsof field output can be <br>
parsed by an AWK or Perl post-filter script, or by a C
program.</p>

<p style="margin-top: 1em">-F f specifies a character list,
f, that selects the fields to be output for processing by
another program, and the character that terminates each
output field. Each field <br>
to be output is specified with a single character in f. The
field terminator defaults to NL, but may be changed to NUL
(000). See the OUTPUT FOR OTHER PROGRAMS section <br>
for a description of the field identification characters and
the field output process.</p>

<p style="margin-top: 1em">When the field selection
character list is empty, all standard fields are selected
(except the raw device field, security context and zone
field for compatibility rea&acirc; <br>
sons) and the NL field terminator is used.</p>

<p style="margin-top: 1em">When the field selection
character list contains only a zero (&lsquo;0&rsquo;), all
fields are selected (except the raw device field for
compatibility reasons) and the NUL termina&acirc; <br>
tor character is used.</p>

<p style="margin-top: 1em">Other combinations of fields and
their associated field terminator character must be set with
explicit entries in f, as described in the OUTPUT FOR OTHER
PROGRAMS sec&acirc; <br>
tion.</p>

<p style="margin-top: 1em">When a field selection character
identifies an item lsof does not normally list - e.g., PPID,
selected with -R - specification of the field character -
e.g., &lsquo;&lsquo;-FR&rsquo;&rsquo; - <br>
also selects the listing of the item.</p>

<p style="margin-top: 1em">When the field selection
character list contains the single character
&lsquo;?&rsquo;, lsof will display a help list of the field
identification characters. (Escape the &lsquo;?&rsquo;
charac&acirc; <br>
ter as your shell requires.)</p>

<p style="margin-top: 1em">-g [s] excludes or selects the
listing of files for the processes whose optional process
group IDentification (PGID) numbers are in the
comma-separated set s - e.g.,
&lsquo;&lsquo;123&rsquo;&rsquo; or <br>
&lsquo;&lsquo;123,^456&rsquo;&rsquo;. (There should be no
spaces in the set.)</p>

<p style="margin-top: 1em">PGID numbers that begin with
&lsquo;^&rsquo; (negation) represent exclusions.</p>

<p style="margin-top: 1em">Multiple PGID numbers are joined
in a single ORed set before participating in AND option
selection. However, PGID exclusions are applied without
ORing or ANDing and <br>
take effect before other selection criteria are applied.</p>

<p style="margin-top: 1em">The -g option also enables the
output display of PGID numbers. When specified without a
PGID set that&rsquo;s all it does.</p>

<p style="margin-top: 1em">-i [i] selects the listing of
files any of whose Internet address matches the address
specified in i. If no address is specified, this option
selects the listing of all Inter&acirc; <br>
net and x.25 (HP-UX) network files.</p>

<p style="margin-top: 1em">If -i4 or -i6 is specified with
no following address, only files of the indicated IP
version, IPv4 or IPv6, are displayed. (An IPv6 specification
may be used only if <br>
the dialects supports IPv6, as indicated by
&lsquo;&lsquo;[46]&rsquo;&rsquo; and
&lsquo;&lsquo;IPv[46]&rsquo;&rsquo; in lsof&rsquo;s -h or -?
output.) Sequentially specifying -i4, followed by -i6 is the
same as specifying <br>
-i, and vice-versa. Specifying -i4, or -i6 after -i is the
same as specifying -i4 or -i6 by itself.</p>

<p style="margin-top: 1em">Multiple addresses (up to a
limit of 100) may be specified with multiple -i options. (A
port number or service name range is counted as one
address.) They are joined <br>
in a single ORed set before participating in AND option
selection.</p>

<p style="margin-top: 1em">An Internet address is specified
in the form (Items in square brackets are optional.):</p>


<p style="margin-top: 1em">[46][protocol][@hostname|hostaddr][:service|port]</p>

<p style="margin-top: 1em">where: <br>
46 specifies the IP version, IPv4 or IPv6 <br>
that applies to the following address. <br>
&rsquo;6&rsquo; may be be specified only if the UNIX <br>
dialect supports IPv6. If neither &rsquo;4&rsquo; nor <br>
&rsquo;6&rsquo; is specified, the following address <br>
applies to all IP versions. <br>
protocol is a protocol name - TCP, UDP <br>
hostname is an Internet host name. Unless a <br>
specific IP version is specified, open <br>
network files associated with host names <br>
of all versions will be selected. <br>
hostaddr is a numeric Internet IPv4 address in <br>
dot form; or an IPv6 numeric address in <br>
colon form, enclosed in brackets, if the <br>
UNIX dialect supports IPv6. When an IP <br>
version is selected, only its numeric <br>
addresses may be specified. <br>
service is an /etc/services name - e.g., smtp - <br>
or a list of them. <br>
port is a port number, or a list of them.</p>

<p style="margin-top: 1em">IPv6 options may be used only if
the UNIX dialect supports IPv6. To see if the dialect
supports IPv6, run lsof and specify the -h or -? (help)
option. If the dis&acirc; <br>
played description of the -i option contains
&lsquo;&lsquo;[46]&rsquo;&rsquo; and
&lsquo;&lsquo;IPv[46]&rsquo;&rsquo;, IPv6 is supported.</p>

<p style="margin-top: 1em">IPv4 host names and addresses
may not be specified if network file selection is limited to
IPv6 with -i 6. IPv6 host names and addresses may not be
specified if network <br>
file selection is limited to IPv4 with -i 4. When an open
IPv4 network file&rsquo;s address is mapped in an IPv6
address, the open file&rsquo;s type will be IPv6, not IPv4,
and its <br>
display will be selected by &rsquo;6&rsquo;, not
&rsquo;4&rsquo;.</p>

<p style="margin-top: 1em">At least one address component -
4, 6, protocol, hostname, hostaddr, or service - must be
supplied. The &lsquo;@&rsquo; character, leading the host
specification, is always <br>
required; as is the &lsquo;:&rsquo;, leading the port
specification. Specify either hostname or hostaddr. Specify
either service name list or port number list. If a service
name <br>
list is specified, the protocol may also need to be
specified if the TCP, UDP and UDPLITE port numbers for the
service name are different. Use any case - lower or upper
<br>
- for protocol.</p>

<p style="margin-top: 1em">Service names and port numbers
may be combined in a list whose entries are separated by
commas and whose numeric range entries are separated by
minus signs. There may <br>
be no embedded spaces, and all service names must belong to
the specified protocol. Since service names may contain
embedded minus signs, the starting entry of a range <br>
can&rsquo;t be a service name; it can be a port number,
however.</p>

<p style="margin-top: 1em">Here are some sample
addresses:</p>

<p style="margin-top: 1em">-i6 - IPv6 only <br>
TCP:25 - TCP and port 25 <br>
@1.2.3.4 - Internet IPv4 host address 1.2.3.4 <br>
@[3ffe:1ebc::1]:1234 - Internet IPv6 host address <br>
3ffe:1ebc::1, port 1234 <br>
UDP:who - UDP who service port <br>
TCP@lsof.itap:513 - TCP, port 513 and host name lsof.itap
<br>
tcp@foo:1-10,smtp,99 - TCP, ports 1 through 10, <br>
service name smtp, port 99, host name foo <br>
tcp@bar:1-smtp - TCP, ports 1 through smtp, host bar <br>
:time - either TCP, UDP or UDPLITE time service port</p>

<p style="margin-top: 1em">-K selects the listing of tasks
(threads) of processes, on dialects where task (thread)
reporting is supported. (If help output - i.e., the output
of the -h or -? options <br>
- shows this option, then task (thread) reporting is
supported by the dialect.)</p>

<p style="margin-top: 1em">When -K and -a are both
specified on Linux, and the tasks of a main process are
selected by other options, the main process will also be
listed as though it were a task, <br>
but without a task ID. (See the description of the TID
column in the OUTPUT section.)</p>

<p style="margin-top: 1em">Where the FreeBSD version
supports threads, all threads will be listed with their
IDs.</p>

<p style="margin-top: 1em">In general threads and tasks
inherit the files of the caller, but may close some and open
others, so lsof always reports all the open files of threads
and tasks.</p>

<p style="margin-top: 1em">-k k specifies a kernel name
list file, k, in place of /vmunix, /mach, etc. -k is not
available under AIX on the IBM RISC/System 6000.</p>

<p style="margin-top: 1em">-l inhibits the conversion of
user ID numbers to login names. It is also useful when login
name lookup is working improperly or slowly.</p>

<p style="margin-top: 1em">+|-L [l] enables
(&lsquo;+&rsquo;) or disables (&lsquo;-&rsquo;) the listing
of file link counts, where they are available - e.g., they
aren&rsquo;t available for sockets, or most FIFOs and
pipes.</p>

<p style="margin-top: 1em">When +L is specified without a
following number, all link counts will be listed. When -L is
specified (the default), no link counts will be listed.</p>

<p style="margin-top: 1em">When +L is followed by a number,
only files having a link count less than that number will be
listed. (No number may follow -L.) A specification of the
form &lsquo;&lsquo;+L1&rsquo;&rsquo; <br>
will select open files that have been unlinked. A
specification of the form &lsquo;&lsquo;+aL1
&lt;file_system&gt;&rsquo;&rsquo; will select unlinked open
files on the specified file system.</p>

<p style="margin-top: 1em">For other link count
comparisons, use field output (-F) and a post-processing
script or program.</p>

<p style="margin-top: 1em">+|-m m specifies an alternate
kernel memory file or activates mount table supplement
processing.</p>

<p style="margin-top: 1em">The option form -m m specifies a
kernel memory file, m, in place of /dev/kmem or /dev/mem -
e.g., a crash dump file.</p>

<p style="margin-top: 1em">The option form +m requests that
a mount supplement file be written to the standard output
file. All other options are silently ignored.</p>

<p style="margin-top: 1em">There will be a line in the
mount supplement file for each mounted file system,
containing the mounted file system directory, followed by a
single space, followed by the <br>
device number in hexadecimal &quot;0x&quot; format -
e.g.,</p>

<p style="margin-top: 1em">/ 0x801</p>

<p style="margin-top: 1em">Lsof can use the mount
supplement file to get device numbers for file systems when
it can&rsquo;t get them via stat(2) or lstat(2).</p>

<p style="margin-top: 1em">The option form +m m identifies
m as a mount supplement file.</p>

<p style="margin-top: 1em">Note: the +m and +m m options
are not available for all supported dialects. Check the
output of lsof&rsquo;s -h or -? options to see if the +m and
+m m options are avail&acirc; <br>
able.</p>

<p style="margin-top: 1em">+|-M Enables (+) or disables (-)
the reporting of portmapper registrations for local TCP, UDP
and UDPLITE ports, where port mapping is supported. (See the
last paragraph of <br>
this option description for information about where
portmapper registration reporting is supported.)</p>

<p style="margin-top: 1em">The default reporting mode is
set by the lsof builder with the HASPMAPENABLED #define in
the dialect&rsquo;s machine.h header file; lsof is
distributed with the HASPMAPENABLED <br>
#define deactivated, so portmapper reporting is disabled by
default and must be requested with +M. Specifying
lsof&rsquo;s -h or -? option will report the default mode.
<br>
Disabling portmapper registration when it is already
disabled or enabling it when already enabled is acceptable.
When portmapper registration reporting is enabled, lsof <br>
displays the portmapper registration (if any) for local TCP,
UDP or UDPLITE ports in square brackets immediately
following the port numbers or service names - e.g., <br>
&lsquo;&lsquo;:1234[name]&rsquo;&rsquo; or
&lsquo;&lsquo;:name[100083]&rsquo;&rsquo;. The registration
information may be a name or number, depending on what the
registering program supplied to the portmapper when it <br>
registered the port.</p>

<p style="margin-top: 1em">When portmapper registration
reporting is enabled, lsof may run a little more slowly or
even become blocked when access to the portmapper becomes
congested or stopped. <br>
Reverse the reporting mode to determine if portmapper
registration reporting is slowing or blocking lsof.</p>

<p style="margin-top: 1em">For purposes of portmapper
registration reporting lsof considers a TCP, UDP or UDPLITE
port local if: it is found in the local part of its
containing kernel structure; <br>
or if it is located in the foreign part of its containing
kernel structure and the local and foreign Internet
addresses are the same; or if it is located in the foreign
<br>
part of its containing kernel structure and the foreign
Internet address is INADDR_LOOPBACK (127.0.0.1). This rule
may make lsof ignore some foreign ports on machines <br>
with multiple interfaces when the foreign Internet address
is on a different interface from the local one.</p>

<p style="margin-top: 1em">See the lsof FAQ (The FAQ
section gives its location.) for further discussion of
portmapper registration reporting issues.</p>

<p style="margin-top: 1em">Portmapper registration
reporting is supported only on dialects that have RPC header
files. (Some Linux distributions with GlibC 2.14 do not have
them.) When portmap&acirc; <br>
per registration reporting is supported, the -h or -? help
output will show the +|-M option.</p>

<p style="margin-top: 1em">-n inhibits the conversion of
network numbers to host names for network files. Inhibiting
conversion may make lsof run faster. It is also useful when
host name lookup is <br>
not working properly.</p>

<p style="margin-top: 1em">-N selects the listing of NFS
files.</p>

<p style="margin-top: 1em">-o directs lsof to display file
offset at all times. It causes the SIZE/OFF output column
title to be changed to OFFSET. Note: on some UNIX dialects
lsof can&rsquo;t obtain <br>
accurate or consistent file offset information from its
kernel data sources, sometimes just for particular kinds of
files (e.g., socket files.) Consult the lsof FAQ <br>
(The FAQ section gives its location.) for more
information.</p>

<p style="margin-top: 1em">The -o and -s options are
mutually exclusive; they can&rsquo;t both be specified. When
neither is specified, lsof displays whatever value - size or
offset - is appropriate <br>
and available for the type of the file.</p>

<p style="margin-top: 1em">-o o defines the number of
decimal digits (o) to be printed after the
&lsquo;&lsquo;0t&rsquo;&rsquo; for a file offset before the
form is switched to &lsquo;&lsquo;0x...&rsquo;&rsquo;. An o
value of zero (unlimited) <br>
directs lsof to use the &lsquo;&lsquo;0t&rsquo;&rsquo; form
for all offset output.</p>

<p style="margin-top: 1em">This option does NOT direct lsof
to display offset at all times; specify -o (without a
trailing number) to do that. -o o only specifies the number
of digits after <br>
&lsquo;&lsquo;0t&rsquo;&rsquo; in either mixed size and
offset or offset-only output. Thus, for example, to direct
lsof to display offset at all times with a decimal digit
count of 10, use:</p>

<p style="margin-top: 1em">-o -o 10 <br>
or <br>
-oo10</p>

<p style="margin-top: 1em">The default number of digits
allowed after &lsquo;&lsquo;0t&rsquo;&rsquo; is normally 8,
but may have been changed by the lsof builder. Consult the
description of the -o o option in the output <br>
of the -h or -? option to determine the default that is in
effect.</p>

<p style="margin-top: 1em">-O directs lsof to bypass the
strategy it uses to avoid being blocked by some kernel
operations - i.e., doing them in forked child processes. See
the BLOCKS AND TIMEOUTS <br>
and AVOIDING KERNEL BLOCKS sections for more information on
kernel operations that may block lsof.</p>

<p style="margin-top: 1em">While use of this option will
reduce lsof startup overhead, it may also cause lsof to hang
when the kernel doesn&rsquo;t respond to a function. Use
this option cautiously.</p>

<p style="margin-top: 1em">-p s excludes or selects the
listing of files for the processes whose optional process
IDentification (PID) numbers are in the comma-separated set
s - e.g., &lsquo;&lsquo;123&rsquo;&rsquo; or <br>
&lsquo;&lsquo;123,^456&rsquo;&rsquo;. (There should be no
spaces in the set.)</p>

<p style="margin-top: 1em">PID numbers that begin with
&lsquo;^&rsquo; (negation) represent exclusions.</p>

<p style="margin-top: 1em">Multiple process ID numbers are
joined in a single ORed set before participating in AND
option selection. However, PID exclusions are applied
without ORing or ANDing <br>
and take effect before other selection criteria are
applied.</p>

<p style="margin-top: 1em">-P inhibits the conversion of
port numbers to port names for network files. Inhibiting the
conversion may make lsof run a little faster. It is also
useful when port name <br>
lookup is not working properly.</p>

<p style="margin-top: 1em">+|-r [t[m&lt;fmt&gt;]] <br>
puts lsof in repeat mode. There lsof lists open files as
selected by other options, delays t seconds (default
fifteen), then repeats the listing, delaying and listing
<br>
repetitively until stopped by a condition defined by the
prefix to the option.</p>

<p style="margin-top: 1em">If the prefix is a
&lsquo;-&rsquo;, repeat mode is endless. Lsof must be
terminated with an interrupt or quit signal.</p>

<p style="margin-top: 1em">If the prefix is
&lsquo;+&rsquo;, repeat mode will end the first cycle no
open files are listed - and of course when lsof is stopped
with an interrupt or quit signal. When repeat <br>
mode ends because no files are listed, the process exit code
will be zero if any open files were ever listed; one, if
none were ever listed.</p>

<p style="margin-top: 1em">Lsof marks the end of each
listing: if field output is in progress (the -F, option has
been specified), the default marker is &lsquo;m&rsquo;;
otherwise the default marker is <br>
&lsquo;&lsquo;========&rsquo;&rsquo;. The marker is followed
by a NL character.</p>

<p style="margin-top: 1em">The optional
&quot;m&lt;fmt&gt;&quot; argument specifies a format for the
marker line. The &lt;fmt&gt; characters following
&lsquo;m&rsquo; are interpreted as a format specification to
the strftime(3) <br>
function, when both it and the localtime(3) function are
available in the dialect&rsquo;s C library. Consult the
strftime(3) documentation for what may appear in its format
<br>
specification. Note that when field output is requested with
the -F option, &lt;fmt&gt; cannot contain the NL format,
&lsquo;&lsquo;%n&rsquo;&rsquo;. Note also that when
&lt;fmt&gt; contains spaces or <br>
other characters that affect the shell&rsquo;s
interpretation of arguments, &lt;fmt&gt; must be quoted
appropriately.</p>

<p style="margin-top: 1em">Repeat mode reduces lsof startup
overhead, so it is more efficient to use this mode than to
call lsof repetitively from a shell script, for example.</p>

<p style="margin-top: 1em">To use repeat mode most
efficiently, accompany +|-r with specification of other lsof
selection options, so the amount of kernel memory access
lsof does will be kept to a <br>
minimum. Options that filter at the process level - e.g.,
-c, -g, -p, -u - are the most efficient selectors.</p>

<p style="margin-top: 1em">Repeat mode is useful when
coupled with field output (see the -F, option description)
and a supervising awk or Perl script, or a C program.</p>

<p style="margin-top: 1em">-R directs lsof to list the
Parent Process IDentification number in the PPID column.</p>

<p style="margin-top: 1em">-s [p:s] s alone directs lsof to
display file size at all times. It causes the SIZE/OFF
output column title to be changed to SIZE. If the file does
not have a size, nothing is <br>
displayed.</p>

<p style="margin-top: 1em">The optional -s p:s form is
available only for selected dialects, and only when the -h
or -? help output lists it.</p>

<p style="margin-top: 1em">When the optional form is
available, the s may be followed by a protocol name (p),
either TCP or UDP, a colon (&lsquo;:&rsquo;) and a
comma-separated protocol state name list, the <br>
option causes open TCP and UDP files to be excluded if their
state name(s) are in the list (s) preceded by a
&lsquo;^&rsquo;; or included if their name(s) are not
preceded by a &lsquo;^&rsquo;.</p>

<p style="margin-top: 1em">When an inclusion list is
defined, only network files with state names in the list
will be present in the lsof output. Thus, specifying one
state name means that only <br>
network files with that lone state name will be listed.</p>

<p style="margin-top: 1em">Case is unimportant in the
protocol or state names, but there may be no spaces and the
colon (&lsquo;:&rsquo;) separating the protocol name (p) and
the state name list (s) is <br>
required.</p>

<p style="margin-top: 1em">If only TCP and UDP files are to
be listed, as controlled by the specified exclusions and
inclusions, the -i option must be specified, too. If only a
single protocol&rsquo;s <br>
files are to be listed, add its name as an argument to the
-i option.</p>

<p style="margin-top: 1em">For example, to list only
network files with TCP state LISTEN, use:</p>

<p style="margin-top: 1em">-iTCP -sTCP:LISTEN</p>

<p style="margin-top: 1em">Or, for example, to list network
files with all UDP states except Idle, use:</p>

<p style="margin-top: 1em">-iUDP -sUDP:Idle</p>

<p style="margin-top: 1em">State names vary with UNIX
dialects, so it&rsquo;s not possible to provide a complete
list. Some common TCP state names are: CLOSED, IDLE, BOUND,
LISTEN, ESTABLISHED, <br>
SYN_SENT, SYN_RCDV, ESTABLISHED, CLOSE_WAIT, FIN_WAIT1,
CLOSING, LAST_ACK, FIN_WAIT_2, and TIME_WAIT. Two common UDP
state names are Unbound and Idle.</p>

<p style="margin-top: 1em">See the lsof FAQ (The FAQ
section gives its location.) for more information on how to
use protocol state exclusion and inclusion, including
examples.</p>

<p style="margin-top: 1em">The -o (without a following
decimal digit count) and -s option (without a following
protocol and state name list) are mutually exclusive; they
can&rsquo;t both be specified. <br>
When neither is specified, lsof displays whatever value -
size or offset - is appropriate and available for the type
of file.</p>

<p style="margin-top: 1em">Since some types of files
don&rsquo;t have true sizes - sockets, FIFOs, pipes, etc. -
lsof displays for their sizes the content amounts in their
associated kernel buffers, if <br>
possible.</p>

<p style="margin-top: 1em">-S [t] specifies an optional
time-out seconds value for kernel functions - lstat(2),
readlink(2), and stat(2) - that might otherwise deadlock.
The minimum for t is two; the <br>
default, fifteen; when no value is specified, the default is
used.</p>

<p style="margin-top: 1em">See the BLOCKS AND TIMEOUTS
section for more information.</p>

<p style="margin-top: 1em">-T [t] controls the reporting of
some TCP/TPI information, also reported by netstat(1),
following the network addresses. In normal output the
information appears in parenthe&acirc; <br>
ses, each item except TCP or TPI state name identified by a
keyword, followed by &lsquo;=&rsquo;, separated from others
by a single space:</p>

<p style="margin-top: 1em">&lt;TCP or TPI state name&gt;
<br>
QR=&lt;read queue length&gt; <br>
QS=&lt;send queue length&gt; <br>
SO=&lt;socket options and values&gt; <br>
SS=&lt;socket states&gt; <br>
TF=&lt;TCP flags and values&gt; <br>
WR=&lt;window read length&gt; <br>
WW=&lt;window write length&gt;</p>

<p style="margin-top: 1em">Not all values are reported for
all UNIX dialects. Items values (when available) are
reported after the item name and &rsquo;=&rsquo;.</p>

<p style="margin-top: 1em">When the field output mode is in
effect (See OUTPUT FOR OTHER PROGRAMS.) each item appears as
a field with a &lsquo;T&rsquo; leading character.</p>

<p style="margin-top: 1em">-T with no following key
characters disables TCP/TPI information reporting.</p>

<p style="margin-top: 1em">-T with following characters
selects the reporting of specific TCP/TPI information:</p>

<p style="margin-top: 1em">f selects reporting of socket
options, <br>
states and values, and TCP flags and <br>
values. <br>
q selects queue length reporting. <br>
s selects connection state reporting. <br>
w selects window size reporting.</p>

<p style="margin-top: 1em">Not all selections are enabled
for some UNIX dialects. State may be selected for all
dialects and is reported by default. The -h or -? help
output for the -T option <br>
will show what selections may be used with the UNIX
dialect.</p>

<p style="margin-top: 1em">When -T is used to select
information - i.e., it is followed by one or more selection
characters - the displaying of state is disabled by default,
and it must be explic&acirc; <br>
itly selected again in the characters following -T. (In
effect, then, the default is equivalent to -Ts.) For
example, if queue lengths and state are desired, use
-Tqs.</p>

<p style="margin-top: 1em">Socket options, socket states,
some socket values, TCP flags and one TCP value may be
reported (when available in the UNIX dialect) in the form of
the names that com&acirc; <br>
monly appear after SO_, so_, SS_, TCP_ and TF_ in the
dialect&rsquo;s header files - most often
&lt;sys/socket.h&gt;, &lt;sys/socketvar.h&gt; and
&lt;netinet/tcp_var.h&gt;. Consult those <br>
header files for the meaning of the flags, options, states
and values.</p>

<p style="margin-top: 1em">&lsquo;&lsquo;SO=&rsquo;&rsquo;
precedes socket options and values;
&lsquo;&lsquo;SS=&rsquo;&rsquo;, socket states; and
&lsquo;&lsquo;TF=&rsquo;&rsquo;, TCP flags and values.</p>

<p style="margin-top: 1em">If a flag or option has a value,
the value will follow an &rsquo;=&rsquo; and the name --
e.g., &lsquo;&lsquo;SO=LINGER=5&rsquo;&rsquo;,
&lsquo;&lsquo;SO=QLIM=5&rsquo;&rsquo;,
&lsquo;&lsquo;TF=MSS=512&rsquo;&rsquo;. The following seven
values may be <br>
reported:</p>

<p style="margin-top: 1em">Name <br>
Reported Description (Common Symbol)</p>

<p style="margin-top: 1em">KEEPALIVE keep alive time
(SO_KEEPALIVE) <br>
LINGER linger time (SO_LINGER) <br>
MSS maximum segment size (TCP_MAXSEG) <br>
PQLEN partial listen queue connections <br>
QLEN established listen queue connections <br>
QLIM established listen queue limit <br>
RCVBUF receive buffer length (SO_RCVBUF) <br>
SNDBUF send buffer length (SO_SNDBUF)</p>

<p style="margin-top: 1em">Details on what socket options
and values, socket states, and TCP flags and values may be
displayed for particular UNIX dialects may be found in the
answer to the &lsquo;&lsquo;Why <br>
doesn&rsquo;t lsof report socket options, socket states, and
TCP flags and values for my dialect?&rsquo;&rsquo; and
&lsquo;&lsquo;Why doesn&rsquo;t lsof report the partial
listen queue connection count for <br>
my dialect?&rsquo;&rsquo; questions in the lsof FAQ (The FAQ
section gives its location.)</p>

<p style="margin-top: 1em">-t specifies that lsof should
produce terse output with process identifiers only and no
header - e.g., so that the output may be piped to kill(1).
-t selects the -w <br>
option.</p>

<p style="margin-top: 1em">-u s selects the listing of
files for the user whose login names or user ID numbers are
in the comma-separated set s - e.g.,
&lsquo;&lsquo;abe&rsquo;&rsquo;, or
&lsquo;&lsquo;548,root&rsquo;&rsquo;. (There should be no
<br>
spaces in the set.)</p>

<p style="margin-top: 1em">Multiple login names or user ID
numbers are joined in a single ORed set before participating
in AND option selection.</p>

<p style="margin-top: 1em">If a login name or user ID is
preceded by a &lsquo;^&rsquo;, it becomes a negation - i.e.,
files of processes owned by the login name or user ID will
never be listed. A negated <br>
login name or user ID selection is neither ANDed nor ORed
with other selections; it is applied before all other
selections and absolutely excludes the listing of the <br>
files of the process. For example, to direct lsof to exclude
the listing of files belonging to root processes, specify
&lsquo;&lsquo;-u^root&rsquo;&rsquo; or
&lsquo;&lsquo;-u^0&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">-U selects the listing of UNIX
domain socket files.</p>

<p style="margin-top: 1em">-v selects the listing of lsof
version information, including: revision number; when the
lsof binary was constructed; who constructed the binary and
where; the name of the <br>
compiler used to construct the lsof binary; the version
number of the compiler when readily available; the compiler
and loader flags used to construct the lsof binary; <br>
and system information, typically the output of
uname&rsquo;s -a option.</p>

<p style="margin-top: 1em">-V directs lsof to indicate the
items it was asked to list and failed to find - command
names, file names, Internet addresses or files, login names,
NFS files, PIDs, PGIDs, <br>
and UIDs.</p>

<p style="margin-top: 1em">When other options are ANDed to
search options, or compile-time options restrict the listing
of some files, lsof may not report that it failed to find a
search item when <br>
an ANDed option or compile-time option prevents the listing
of the open file containing the located search item.</p>

<p style="margin-top: 1em">For example, &lsquo;&lsquo;lsof
-V -iTCP@foobar -a -d 999&rsquo;&rsquo; may not report a
failure to locate open files at
&lsquo;&lsquo;TCP@foobar&rsquo;&rsquo; and may not list any,
if none have a file descriptor num&acirc; <br>
ber of 999. A similar situation arises when HASSECURITY and
HASNOSOCKSECURITY are defined at compile time and they
prevent the listing of open files.</p>

<p style="margin-top: 1em">+|-w Enables (+) or disables (-)
the suppression of warning messages.</p>

<p style="margin-top: 1em">The lsof builder may choose to
have warning messages disabled or enabled by default. The
default warning message state is indicated in the output of
the -h or -? <br>
option. Disabling warning messages when they are already
disabled or enabling them when already enabled is
acceptable.</p>

<p style="margin-top: 1em">The -t option selects the -w
option.</p>

<p style="margin-top: 1em">-x [fl] may accompany the +d and
+D options to direct their processing to cross over symbolic
links and|or file system mount points encountered when
scanning the directory (+d) <br>
or directory tree (+D).</p>

<p style="margin-top: 1em">If -x is specified by itself
without a following parameter, cross-over processing of both
symbolic links and file system mount points is enabled. Note
that when -x is <br>
specified without a parameter, the next argument must begin
with &rsquo;-&rsquo; or &rsquo;+&rsquo;.</p>

<p style="margin-top: 1em">The optional &rsquo;f&rsquo;
parameter enables file system mount point cross-over
processing; &rsquo;l&rsquo;, symbolic link cross-over
processing.</p>

<p style="margin-top: 1em">The -x option may not be
supplied without also supplying a +d or +D option.</p>

<p style="margin-top: 1em">-X This is a dialect-specific
option.</p>

<p style="margin-top: 1em">AIX: <br>
This IBM AIX RISC/System 6000 option requests the reporting
of executed text file and shared library references.</p>

<p style="margin-top: 1em">WARNING: because this option
uses the kernel readx() function, its use on a busy AIX
system might cause an application process to hang so
completely that it can neither <br>
be killed nor stopped. I have never seen this happen or had
a report of its happening, but I think there is a remote
possibility it could happen.</p>

<p style="margin-top: 1em">By default use of readx() is
disabled. On AIX 5L and above lsof may need setuid-root
permission to perform the actions this option requests.</p>

<p style="margin-top: 1em">The lsof builder may specify
that the -X option be restricted to processes whose real UID
is root. If that has been done, the -X option will not
appear in the -h or -? <br>
help output unless the real UID of the lsof process is root.
The default lsof distribution allows any UID to specify -X,
so by default it will appear in the help out&acirc; <br>
put.</p>

<p style="margin-top: 1em">When AIX readx() use is
disabled, lsof may not be able to report information for all
text and loader file references, but it may also avoid
exacerbating an AIX kernel <br>
directory search kernel error, known as the Stale Segment ID
bug.</p>

<p style="margin-top: 1em">The readx() function, used by
lsof or any other program to access some sections of kernel
virtual memory, can trigger the Stale Segment ID bug. It can
cause the ker&acirc; <br>
nel&rsquo;s dir_search() function to believe erroneously
that part of an in-memory copy of a file system directory
has been zeroed. Another application process, distinct from
<br>
lsof, asking the kernel to search the directory - e.g., by
using open(2) - can cause dir_search() to loop forever, thus
hanging the application process.</p>

<p style="margin-top: 1em">Consult the lsof FAQ (The FAQ
section gives its location.) and the 00README file of the
lsof distribution for a more complete description of the
Stale Segment ID bug, <br>
its APAR, and methods for defining readx() use when
compiling lsof.</p>

<p style="margin-top: 1em">Linux: <br>
This Linux option requests that lsof skip the reporting of
information on all open TCP, UDP and UDPLITE IPv4 and IPv6
files.</p>

<p style="margin-top: 1em">This Linux option is most useful
when the system has an extremely large number of open TCP,
UDP and UDPLITE files, the processing of whose information
in the <br>
/proc/net/tcp* and /proc/net/udp* files would take lsof a
long time, and whose reporting is not of interest.</p>

<p style="margin-top: 1em">Use this option with care and
only when you are sure that the information you want lsof to
display isn&rsquo;t associated with open TCP, UDP or UDPLITE
socket files.</p>

<p style="margin-top: 1em">Solaris 10 and above: <br>
This Solaris 10 and above option requests the reporting of
cached paths for files that have been deleted - i.e.,
removed with rm(1) or unlink(2).</p>

<p style="margin-top: 1em">The cached path is followed by
the string &lsquo;&lsquo; (deleted)&rsquo;&rsquo; to
indicate that the path by which the file was opened has been
deleted.</p>

<p style="margin-top: 1em">Because intervening changes made
to the path - i.e., renames with mv(1) or rename(2) - are
not recorded in the cached path, what lsof reports is only
the path by which <br>
the file was opened, not its possibly different final
path.</p>

<p style="margin-top: 1em">-z [z] specifies how Solaris 10
and higher zone information is to be handled.</p>

<p style="margin-top: 1em">Without a following argument -
e.g., NO z - the option specifies that zone names are to be
listed in the ZONE output column.</p>

<p style="margin-top: 1em">The -z option may be followed by
a zone name, z. That causes lsof to list only open files for
processes in that zone. Multiple -z z option and argument
pairs may be <br>
specified to form a list of named zones. Any open file of
any process in any of the zones will be listed, subject to
other conditions specified by other options and <br>
arguments.</p>

<p style="margin-top: 1em">-Z [Z] specifies how SELinux
security contexts are to be handled. It and &rsquo;Z&rsquo;
field output character support are inhibited when SELinux is
disabled in the running Linux kernel. <br>
See OUTPUT FOR OTHER PROGRAMS for more information on the
&rsquo;Z&rsquo; field output character.</p>

<p style="margin-top: 1em">Without a following argument -
e.g., NO Z - the option specifies that security contexts are
to be listed in the SECURITY-CONTEXT output column.</p>

<p style="margin-top: 1em">The -Z option may be followed by
a wildcard security context name, Z. That causes lsof to
list only open files for processes in that security context.
Multiple -Z Z <br>
option and argument pairs may be specified to form a list of
security contexts. Any open file of any process in any of
the security contexts will be listed, subject to <br>
other conditions specified by other options and arguments.
Note that Z can be A:B:C or *:B:C or A:B:* or *:*:C to match
against the A:B:C context.</p>

<p style="margin-top: 1em">-- The double minus sign option
is a marker that signals the end of the keyed options. It
may be used, for example, when the first file name begins
with a minus sign. It <br>
may also be used when the absence of a value for the last
keyed option must be signified by the presence of a minus
sign in the following option and before the start of <br>
the file names.</p>

<p style="margin-top: 1em">names These are path names of
specific files to list. Symbolic links are resolved before
use. The first name may be separated from the preceding
options with the &lsquo;&lsquo;--&rsquo;&rsquo; <br>
option.</p>

<p style="margin-top: 1em">If a name is the mounted-on
directory of a file system or the device of the file system,
lsof will list all the files open on the file system. To be
considered a file <br>
system, the name must match a mounted-on directory name in
mount(8) output, or match the name of a block device
associated with a mounted-on directory name. The +|-f <br>
option may be used to force lsof to consider a name a file
system identifier (+f) or a simple file (-f).</p>

<p style="margin-top: 1em">If name is a path to a directory
that is not the mounted-on directory name of a file system,
it is treated just as a regular file is treated - i.e., its
listing is <br>
restricted to processes that have it open as a file or as a
process-specific directory, such as the root or current
working directory. To request that lsof look for <br>
open files inside a directory name, use the +d s and +D D
options.</p>

<p style="margin-top: 1em">If a name is the base name of a
family of multiplexed files - e.g, AIX&rsquo;s /dev/pt[cs] -
lsof will list all the associated multiplexed files on the
device that are open - <br>
e.g., /dev/pt[cs]/1, /dev/pt[cs]/2, etc.</p>

<p style="margin-top: 1em">If a name is a UNIX domain
socket name, lsof will usually search for it by the
characters of the name alone - exactly as it is specified
and is recorded in the kernel <br>
socket structure. (See the next paragraph for an exception
to that rule for Linux.) Specifying a relative path - e.g.,
./file - in place of the file&rsquo;s absolute path - <br>
e.g., /tmp/file - won&rsquo;t work because lsof must match
the characters you specify with what it finds in the kernel
UNIX domain socket structures.</p>

<p style="margin-top: 1em">If a name is a Linux UNIX domain
socket name, in one case lsof is able to search for it by
its device and inode number, allowing name to be a relative
path. The case <br>
requires that the absolute path -- i.e., one beginning with
a slash (&rsquo;/&rsquo;) be used by the process that
created the socket, and hence be stored in the
/proc/net/unix file; <br>
and it requires that lsof be able to obtain the device and
node numbers of both the absolute path in /proc/net/unix and
name via successful stat(2) system calls. When <br>
those conditions are met, lsof will be able to search for
the UNIX domain socket when some path to it is is specified
in name. Thus, for example, if the path is <br>
/dev/log, and an lsof search is initiated when the working
directory is /dev, then name could be ./log.</p>

<p style="margin-top: 1em">If a name is none of the above,
lsof will list any open files whose device and inode match
that of the specified path name.</p>

<p style="margin-top: 1em">If you have also specified the
-b option, the only names you may safely specify are file
systems for which your mount table supplies alternate device
numbers. See the <br>
AVOIDING KERNEL BLOCKS and ALTERNATE DEVICE NUMBERS sections
for more information.</p>

<p style="margin-top: 1em">Multiple file names are joined
in a single ORed set before participating in AND option
selection.</p>

<p style="margin-top: 1em">AFS <br>
Lsof supports the recognition of AFS files for these
dialects (and AFS versions):</p>

<p style="margin-top: 1em">AIX 4.1.4 (AFS 3.4a) <br>
HP-UX 9.0.5 (AFS 3.4a) <br>
Linux 1.2.13 (AFS 3.3) <br>
Solaris 2.[56] (AFS 3.4a)</p>

<p style="margin-top: 1em">It may recognize AFS files on
other versions of these dialects, but has not been tested
there. Depending on how AFS is implemented, lsof may
recognize AFS files in other <br>
dialects, or may have difficulties recognizing AFS files in
the supported dialects.</p>

<p style="margin-top: 1em">Lsof may have trouble
identifying all aspects of AFS files in supported dialects
when AFS kernel support is implemented via dynamic modules
whose addresses do not appear in the <br>
kernel&rsquo;s variable name list. In that case, lsof may
have to guess at the identity of AFS files, and might not be
able to obtain volume information from the kernel that is
needed <br>
for calculating AFS volume node numbers. When lsof
can&rsquo;t compute volume node numbers, it reports blank in
the NODE column.</p>

<p style="margin-top: 1em">The -A A option is available in
some dialect implementations of lsof for specifying the name
list file where dynamic module kernel addresses may be
found. When this option is <br>
available, it will be listed in the lsof help output,
presented in response to the -h or -?</p>

<p style="margin-top: 1em">See the lsof FAQ (The FAQ
section gives its location.) for more information about
dynamic modules, their symbols, and how they affect lsof
options.</p>

<p style="margin-top: 1em">Because AFS path lookups
don&rsquo;t seem to participate in the kernel&rsquo;s name
cache operations, lsof can&rsquo;t identify path name
components for AFS files.</p>

<p style="margin-top: 1em">SECURITY <br>
Lsof has three features that may cause security concerns.
First, its default compilation mode allows anyone to list
all open files with it. Second, by default it creates a <br>
user-readable and user-writable device cache file in the
home directory of the real user ID that executes lsof. (The
list-all-open-files and device cache features may be
dis&acirc; <br>
abled when lsof is compiled.) Third, its -k and -m options
name alternate kernel name list or memory files.</p>

<p style="margin-top: 1em">Restricting the listing of all
open files is controlled by the compile-time HASSECURITY and
HASNOSOCKSECURITY options. When HASSECURITY is defined, lsof
will allow only the root <br>
user to list all open files. The non-root user may list only
open files of processes with the same user IDentification
number as the real user ID number of the lsof process (the
<br>
one that its user logged on with).</p>

<p style="margin-top: 1em">However, if HASSECURITY and
HASNOSOCKSECURITY are both defined, anyone may list open
socket files, provided they are selected with the -i
option.</p>

<p style="margin-top: 1em">When HASSECURITY is not defined,
anyone may list all open files.</p>

<p style="margin-top: 1em">Help output, presented in
response to the -h or -? option, gives the status of the
HASSECURITY and HASNOSOCKSECURITY definitions.</p>

<p style="margin-top: 1em">See the Security section of the
00README file of the lsof distribution for information on
building lsof with the HASSECURITY and HASNOSOCKSECURITY
options enabled.</p>

<p style="margin-top: 1em">Creation and use of a
user-readable and user-writable device cache file is
controlled by the compile-time HASDCACHE option. See the
DEVICE CACHE FILE section and the sections <br>
that follow it for details on how its path is formed. For
security considerations it is important to note that in the
default lsof distribution, if the real user ID under which
<br>
lsof is executed is root, the device cache file will be
written in root&rsquo;s home directory - e.g., / or /root.
When HASDCACHE is not defined, lsof does not write or
attempt to <br>
read a device cache file.</p>

<p style="margin-top: 1em">When HASDCACHE is defined, the
lsof help output, presented in response to the -h, -D?, or
-? options, will provide device cache file handling
information. When HASDCACHE is not <br>
defined, the -h or -? output will have no -D option
description.</p>

<p style="margin-top: 1em">Before you decide to disable the
device cache file feature - enabling it improves the
performance of lsof by reducing the startup overhead of
examining all the nodes in /dev (or <br>
/devices) - read the discussion of it in the 00DCACHE file
of the lsof distribution and the lsof FAQ (The FAQ section
gives its location.)</p>

<p style="margin-top: 1em">WHEN IN DOUBT, YOU CAN
TEMPORARILY DISABLE THE USE OF THE DEVICE CACHE FILE WITH
THE -Di OPTION.</p>

<p style="margin-top: 1em">When lsof user declares
alternate kernel name list or memory files with the -k and
-m options, lsof checks the user&rsquo;s authority to read
them with access(2). This is intended to <br>
prevent whatever special power lsof&rsquo;s modes might
confer on it from letting it read files not normally
accessible via the authority of the real user ID.</p>

<p style="margin-top: 1em">OUTPUT <br>
This section describes the information lsof lists for each
open file. See the OUTPUT FOR OTHER PROGRAMS section for
additional information on output that can be processed by
<br>
another program.</p>

<p style="margin-top: 1em">Lsof only outputs printable
(declared so by isprint(3)) 8 bit characters. Non-printable
characters are printed in one of three forms: the C
&lsquo;&lsquo;&rsquo;&rsquo; form; the control char&acirc;
<br>
acter &lsquo;^&rsquo; form (e.g.,
&lsquo;&lsquo;^@&rsquo;&rsquo;); or hexadecimal leading
&lsquo;&lsquo; form (e.g., &lsquo;&lsquo;&rsquo;&rsquo;).
Space is non-printable in the COMMAND column
(&lsquo;&lsquo;0&rsquo;&rsquo;) and printable elsewhere.</p>

<p style="margin-top: 1em">For some dialects - if
HASSETLOCALE is defined in the dialect&rsquo;s machine.h
header file - lsof will print the extended 8 bit characters
of a language locale. The lsof process must <br>
be supplied a language locale environment variable (e.g.,
LANG) whose value represents a known language locale in
which the extended characters are considered printable by
<br>
isprint(3). Otherwise lsof considers the extended characters
non-printable and prints them according to its rules for
non-printable characters, stated above. Consult your <br>
dialect&rsquo;s setlocale(3) man page for the names of other
environment variables that may be used in place of LANG -
e.g., LC_ALL, LC_CTYPE, etc.</p>

<p style="margin-top: 1em">Lsof&rsquo;s language locale
support for a dialect also covers wide characters - e.g.,
UTF-8 - when HASSETLOCALE and HASWIDECHAR are defined in the
dialect&rsquo;s machine.h header file, and <br>
when a suitable language locale has been defined in the
appropriate environment variable for the lsof process. Wide
characters are printable under those conditions if
isw&acirc; <br>
print(3) reports them to be. If HASSETLOCALE, HASWIDECHAR
and a suitable language locale aren&rsquo;t defined, or if
iswprint(3) reports wide characters that aren&rsquo;t
printable, lsof <br>
considers the wide characters non-printable and prints each
of their 8 bits according to its rules for non-printable
characters, stated above.</p>

<p style="margin-top: 1em">Consult the answers to the
&quot;Language locale support&quot; questions in the lsof
FAQ (The FAQ section gives its location.) for more
information.</p>

<p style="margin-top: 1em">Lsof dynamically sizes the
output columns each time it runs, guaranteeing that each
column is a minimum size. It also guarantees that each
column is separated from its predeces&acirc; <br>
sor by at least one space.</p>

<p style="margin-top: 1em">COMMAND contains the first nine
characters of the name of the UNIX command associated with
the process. If a non-zero w value is specified to the +c w
option, the column con&acirc; <br>
tains the first w characters of the name of the UNIX command
associated with the process up to the limit of characters
supplied to lsof by the UNIX dialect. (See the <br>
description of the +c w command or the lsof FAQ for more
information. The FAQ section gives its location.)</p>

<p style="margin-top: 1em">If w is less than the length of
the column title, &lsquo;&lsquo;COMMAND&rsquo;&rsquo;, it
will be raised to that length.</p>

<p style="margin-top: 1em">If a zero w value is specified
to the +c w option, the column contains all the characters
of the name of the UNIX command associated with the
process.</p>

<p style="margin-top: 1em">All command name characters
maintained by the kernel in its structures are displayed in
field output when the command name descriptor
(&lsquo;c&rsquo;) is specified. See the OUT&acirc; <br>
PUT FOR OTHER COMMANDS section for information on selecting
field output and the associated command name descriptor.</p>

<p style="margin-top: 1em">PID is the Process
IDentification number of the process.</p>

<p style="margin-top: 1em">TID is the task (thread)
IDentification number, if task (thread) reporting is
supported by the dialect and a task (thread) is being
listed. (If help output - i.e., the <br>
output of the -h or -? options - shows this option, then
task (thread) reporting is supported by the dialect.)</p>

<p style="margin-top: 1em">A blank TID column in Linux
indicates a process - i.e., a non-task.</p>

<p style="margin-top: 1em">ZONE is the Solaris 10 and
higher zone name. This column must be selected with the -z
option.</p>

<p style="margin-top: 1em">SECURITY-CONTEXT <br>
is the SELinux security context. This column must be
selected with the -Z option. Note that the -Z option is
inhibited when SELinux is disabled in the running Linux <br>
kernel.</p>

<p style="margin-top: 1em">PPID is the Parent Process
IDentification number of the process. It is only displayed
when the -R option has been specified.</p>

<p style="margin-top: 1em">PGID is the process group
IDentification number associated with the process. It is
only displayed when the -g option has been specified.</p>

<p style="margin-top: 1em">USER is the user ID number or
login name of the user to whom the process belongs, usually
the same as reported by ps(1). However, on Linux USER is the
user ID number or <br>
login that owns the directory in /proc where lsof finds
information about the process. Usually that is the same
value reported by ps(1), but may differ when the <br>
process has changed its effective user ID. (See the -l
option description for information on when a user ID number
or login name is displayed.)</p>

<p style="margin-top: 1em">FD is the File Descriptor number
of the file or:</p>

<p style="margin-top: 1em">cwd current working directory;
<br>
Lnn library references (AIX); <br>
err FD information error (see NAME column); <br>
jld jail directory (FreeBSD); <br>
ltx shared library text (code and data); <br>
Mxx hex memory-mapped type number xx. <br>
m86 DOS Merge mapped file; <br>
mem memory-mapped file; <br>
mmap memory-mapped device; <br>
pd parent directory; <br>
rtd root directory; <br>
tr kernel trace file (OpenBSD); <br>
txt program text (code and data); <br>
v86 VP/ix mapped file;</p>

<p style="margin-top: 1em">FD is followed by one of these
characters, describing the mode under which the file is
open:</p>

<p style="margin-top: 1em">r for read access; <br>
w for write access; <br>
u for read and write access; <br>
space if mode unknown and no lock <br>
character follows; <br>
&lsquo;-&rsquo; if mode unknown and lock <br>
character follows.</p>

<p style="margin-top: 1em">The mode character is followed
by one of these lock characters, describing the type of lock
applied to the file:</p>

<p style="margin-top: 1em">N for a Solaris NFS lock of
unknown type; <br>
r for read lock on part of the file; <br>
R for a read lock on the entire file; <br>
w for a write lock on part of the file; <br>
W for a write lock on the entire file; <br>
u for a read and write lock of any length; <br>
U for a lock of unknown type; <br>
x for an SCO OpenServer Xenix lock on part of the file; <br>
X for an SCO OpenServer Xenix lock on the entire file; <br>
space if there is no lock.</p>

<p style="margin-top: 1em">See the LOCKS section for more
information on the lock information character.</p>

<p style="margin-top: 1em">The FD column contents
constitutes a single field for parsing in post-processing
scripts.</p>

<p style="margin-top: 1em">TYPE is the type of the node
associated with the file - e.g., GDIR, GREG, VDIR, VREG,
etc.</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;IPv4&rsquo;&rsquo; for an IPv4 socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;IPv6&rsquo;&rsquo; for an open IPv6 network
file - even if its address is IPv4, mapped in an IPv6
address;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;ax25&rsquo;&rsquo; for a Linux AX.25
socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;inet&rsquo;&rsquo; for an Internet domain
socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;lla&rsquo;&rsquo; for a HP-UX link level
access file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;rte&rsquo;&rsquo; for an AF_ROUTE socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;sock&rsquo;&rsquo; for a socket of unknown
domain;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;unix&rsquo;&rsquo; for a UNIX domain
socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;x.25&rsquo;&rsquo; for an HP-UX x.25
socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;BLK&rsquo;&rsquo; for a block special
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;CHR&rsquo;&rsquo; for a character special
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;DEL&rsquo;&rsquo; for a Linux map file that
has been deleted;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;DIR&rsquo;&rsquo; for a directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;DOOR&rsquo;&rsquo; for a VDOOR file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;FIFO&rsquo;&rsquo; for a FIFO special
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;KQUEUE&rsquo;&rsquo; for a BSD style kernel
event queue file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;LINK&rsquo;&rsquo; for a symbolic link
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;MPB&rsquo;&rsquo; for a multiplexed block
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;MPC&rsquo;&rsquo; for a multiplexed character
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;NOFD&rsquo;&rsquo; for a Linux
/proc/&lt;PID&gt;/fd directory that can&rsquo;t be opened --
the directory path appears in the NAME column, followed by
an error message;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PAS&rsquo;&rsquo; for a /proc/as file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PAXV&rsquo;&rsquo; for a /proc/auxv file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PCRE&rsquo;&rsquo; for a /proc/cred file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PCTL&rsquo;&rsquo; for a /proc control
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PCUR&rsquo;&rsquo; for the current /proc
process;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PCWD&rsquo;&rsquo; for a /proc current working
directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PDIR&rsquo;&rsquo; for a /proc directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PETY&rsquo;&rsquo; for a /proc executable type
(etype);</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PFD&rsquo;&rsquo; for a /proc file
descriptor;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PFDR&rsquo;&rsquo; for a /proc file descriptor
directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PFIL&rsquo;&rsquo; for an executable /proc
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PFPR&rsquo;&rsquo; for a /proc FP register
set;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PGD&rsquo;&rsquo; for a /proc/pagedata
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PGID&rsquo;&rsquo; for a /proc group notifier
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PIPE&rsquo;&rsquo; for pipes;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLC&rsquo;&rsquo; for a /proc/lwpctl file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLDR&rsquo;&rsquo; for a /proc/lpw
directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLDT&rsquo;&rsquo; for a /proc/ldt file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLPI&rsquo;&rsquo; for a /proc/lpsinfo
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLST&rsquo;&rsquo; for a /proc/lstatus
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLU&rsquo;&rsquo; for a /proc/lusage file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLWG&rsquo;&rsquo; for a /proc/gwindows
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLWI&rsquo;&rsquo; for a /proc/lwpsinfo
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLWS&rsquo;&rsquo; for a /proc/lwpstatus
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLWU&rsquo;&rsquo; for a /proc/lwpusage
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PLWX&rsquo;&rsquo; for a /proc/xregs file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PMAP&rsquo;&rsquo; for a /proc map file
(map);</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PMEM&rsquo;&rsquo; for a /proc memory image
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PNTF&rsquo;&rsquo; for a /proc process
notifier file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;POBJ&rsquo;&rsquo; for a /proc/object
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PODR&rsquo;&rsquo; for a /proc/object
directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;POLP&rsquo;&rsquo; for an old format /proc
light weight process file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;POPF&rsquo;&rsquo; for an old format /proc PID
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;POPG&rsquo;&rsquo; for an old format /proc
page data file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PORT&rsquo;&rsquo; for a SYSV named pipe;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PREG&rsquo;&rsquo; for a /proc register
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PRMP&rsquo;&rsquo; for a /proc/rmap file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PRTD&rsquo;&rsquo; for a /proc root
directory;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PSGA&rsquo;&rsquo; for a /proc/sigact
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PSIN&rsquo;&rsquo; for a /proc/psinfo
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PSTA&rsquo;&rsquo; for a /proc status
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PSXSEM&rsquo;&rsquo; for a POSIX semaphore
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PSXSHM&rsquo;&rsquo; for a POSIX shared memory
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PUSG&rsquo;&rsquo; for a /proc/usage file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PW&rsquo;&rsquo; for a /proc/watch file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PXMP&rsquo;&rsquo; for a /proc/xmap file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;REG&rsquo;&rsquo; for a regular file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;SMT&rsquo;&rsquo; for a shared memory
transport file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;STSO&rsquo;&rsquo; for a stream socket;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;UNNM&rsquo;&rsquo; for an unnamed type
file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;XNAM&rsquo;&rsquo; for an OpenServer Xenix
special file of unknown type;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;XSEM&rsquo;&rsquo; for an OpenServer Xenix
semaphore file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;XSD&rsquo;&rsquo; for an OpenServer Xenix
shared data file;</p>

<p style="margin-top: 1em">or the four type number octets
if the corresponding name isn&rsquo;t known.</p>

<p style="margin-top: 1em">FILE-ADDR contains the kernel
file structure address when f has been specified to +f;</p>

<p style="margin-top: 1em">FCT contains the file reference
count from the kernel file structure when c has been
specified to +f;</p>

<p style="margin-top: 1em">FILE-FLAG when g or G has been
specified to +f, this field contains the contents of the
f_flag[s] member of the kernel file structure and the
kernel&rsquo;s per-process open file <br>
flags (if available); &lsquo;G&rsquo; causes them to be
displayed in hexadecimal; &lsquo;g&rsquo;, as short-hand
names; two lists may be displayed with entries separated by
commas, the lists <br>
separated by a semicolon (&lsquo;;&rsquo;); the first list
may contain short-hand names for f_flag[s] values from the
following table:</p>

<p style="margin-top: 1em">AIO asynchronous I/O (e.g.,
FAIO) <br>
AP append <br>
ASYN asynchronous I/O (e.g., FASYNC) <br>
BAS block, test, and set in use <br>
BKIU block if in use <br>
BL use block offsets <br>
BSK block seek <br>
CA copy avoid <br>
CIO concurrent I/O <br>
CLON clone <br>
CLRD CL read <br>
CR create <br>
DF defer <br>
DFI defer IND <br>
DFLU data flush <br>
DIR direct <br>
DLY delay <br>
DOCL do clone <br>
DSYN data-only integrity <br>
DTY must be a directory <br>
EVO event only <br>
EX open for exec <br>
EXCL exclusive open <br>
FSYN synchronous writes <br>
GCDF defer during unp_gc() (AIX) <br>
GCMK mark during unp_gc() (AIX) <br>
GTTY accessed via /dev/tty <br>
HUP HUP in progress <br>
KERN kernel <br>
KIOC kernel-issued ioctl <br>
LCK has lock <br>
LG large file <br>
MBLK stream message block <br>
MK mark <br>
MNT mount <br>
MSYN multiplex synchronization <br>
NATM don&rsquo;t update atime <br>
NB non-blocking I/O <br>
NBDR no BDRM check <br>
NBIO SYSV non-blocking I/O <br>
NBF n-buffering in effect <br>
NC no cache <br>
ND no delay <br>
NDSY no data synchronization <br>
NET network <br>
NFLK don&rsquo;t follow links <br>
NMFS NM file system <br>
NOTO disable background stop <br>
NSH no share <br>
NTTY no controlling TTY <br>
OLRM OLR mirror <br>
PAIO POSIX asynchronous I/O <br>
PP POSIX pipe <br>
R read <br>
RC file and record locking cache <br>
REV revoked <br>
RSH shared read <br>
RSYN read synchronization <br>
RW read and write access <br>
SL shared lock <br>
SNAP cooked snapshot <br>
SOCK socket <br>
SQSH Sequent shared set on open <br>
SQSV Sequent SVM set on open <br>
SQR Sequent set repair on open <br>
SQS1 Sequent full shared open <br>
SQS2 Sequent partial shared open <br>
STPI stop I/O <br>
SWR synchronous read <br>
SYN file integrity while writing <br>
TCPM avoid TCP collision <br>
TR truncate <br>
W write <br>
WKUP parallel I/O synchronization <br>
WTG parallel I/O synchronization <br>
VH vhangup pending <br>
VTXT virtual text <br>
XL exclusive lock</p>

<p style="margin-top: 1em">this list of names was derived
from F* #define&rsquo;s in dialect header files
&lt;fcntl.h&gt;, &lt;linux&lt;/fs.h&gt;,
&lt;sys/fcntl.c&gt;, &lt;sys/fcntlcom.h&gt;, and
&lt;sys/file.h&gt;; see the lsof.h <br>
header file for a list showing the correspondence between
the above short-hand names and the header file
definitions;</p>

<p style="margin-top: 1em">the second list (after the
semicolon) may contain short-hand names for kernel
per-process open file flags from this table:</p>

<p style="margin-top: 1em">ALLC allocated <br>
BR the file has been read <br>
BHUP activity stopped by SIGHUP <br>
BW the file has been written <br>
CLSG closing <br>
CX close-on-exec (see fcntl(F_SETFD)) <br>
LCK lock was applied <br>
MP memory-mapped <br>
OPIP open pending - in progress <br>
RSVW reserved wait <br>
SHMT UF_FSHMAT set (AIX) <br>
USE in use (multi-threaded)</p>

<p style="margin-top: 1em">NODE-ID (or INODE-ADDR for some
dialects) contains a unique identifier for the file node
(usually the kernel vnode or inode address, but also
occasionally a concatenation of <br>
device and node number) when n has been specified to +f;</p>

<p style="margin-top: 1em">DEVICE contains the device
numbers, separated by commas, for a character special, block
special, regular, directory or NFS file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;memory&rsquo;&rsquo; for a memory file system
node under Tru64 UNIX;</p>

<p style="margin-top: 1em">or the address of the private
data area of a Solaris socket stream;</p>

<p style="margin-top: 1em">or a kernel reference address
that identifies the file (The kernel reference address may
be used for FIFO&rsquo;s, for example.);</p>

<p style="margin-top: 1em">or the base address or device
name of a Linux AX.25 socket device.</p>

<p style="margin-top: 1em">Usually only the lower thirty
two bits of Tru64 UNIX kernel addresses are displayed.</p>

<p style="margin-top: 1em">SIZE, SIZE/OFF, or OFFSET <br>
is the size of the file or the file offset in bytes. A value
is displayed in this column only if it is available. Lsof
displays whatever value - size or offset - is <br>
appropriate for the type of the file and the version of
lsof.</p>

<p style="margin-top: 1em">On some UNIX dialects lsof
can&rsquo;t obtain accurate or consistent file offset
information from its kernel data sources, sometimes just for
particular kinds of files <br>
(e.g., socket files.) In other cases, files don&rsquo;t have
true sizes - e.g., sockets, FIFOs, pipes - so lsof displays
for their sizes the content amounts it finds in <br>
their kernel buffer descriptors (e.g., socket buffer size
counts or TCP/IP window sizes.) Consult the lsof FAQ (The
FAQ section gives its location.) for more infor&acirc; <br>
mation.</p>

<p style="margin-top: 1em">The file size is displayed in
decimal; the offset is normally displayed in decimal with a
leading &lsquo;&lsquo;0t&rsquo;&rsquo; if it contains 8
digits or less; in hexadecimal with a leading <br>
&lsquo;&lsquo;0x&rsquo;&rsquo; if it is longer than 8
digits. (Consult the -o o option description for information
on when 8 might default to some other value.)</p>

<p style="margin-top: 1em">Thus the leading
&lsquo;&lsquo;0t&rsquo;&rsquo; and
&lsquo;&lsquo;0x&rsquo;&rsquo; identify an offset when the
column may contain both a size and an offset (i.e., its
title is SIZE/OFF).</p>

<p style="margin-top: 1em">If the -o option is specified,
lsof always displays the file offset (or nothing if no
offset is available) and labels the column OFFSET. The
offset always begins with <br>
&lsquo;&lsquo;0t&rsquo;&rsquo; or
&lsquo;&lsquo;0x&rsquo;&rsquo; as described above.</p>

<p style="margin-top: 1em">The lsof user can control the
switch from &lsquo;&lsquo;0t&rsquo;&rsquo; to
&lsquo;&lsquo;0x&rsquo;&rsquo; with the -o o option. Consult
its description for more information.</p>

<p style="margin-top: 1em">If the -s option is specified,
lsof always displays the file size (or nothing if no size is
available) and labels the column SIZE. The -o and -s options
are mutually <br>
exclusive; they can&rsquo;t both be specified.</p>

<p style="margin-top: 1em">For files that don&rsquo;t have
a fixed size - e.g., don&rsquo;t reside on a disk device -
lsof will display appropriate information about the current
size or position of the file <br>
if it is available in the kernel structures that define the
file.</p>

<p style="margin-top: 1em">NLINK contains the file link
count when +L has been specified;</p>

<p style="margin-top: 1em">NODE is the node number of a
local file;</p>

<p style="margin-top: 1em">or the inode number of an NFS
file in the server host;</p>

<p style="margin-top: 1em">or the Internet protocol type -
e.g, &lsquo;&lsquo;TCP&rsquo;&rsquo;;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;STR&rsquo;&rsquo; for a stream;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;CCITT&rsquo;&rsquo; for an HP-UX x.25
socket;</p>

<p style="margin-top: 1em">or the IRQ or inode number of a
Linux AX.25 socket device.</p>

<p style="margin-top: 1em">NAME is the name of the mount
point and file system on which the file resides;</p>

<p style="margin-top: 1em">or the name of a file specified
in the names option (after any symbolic links have been
resolved);</p>

<p style="margin-top: 1em">or the name of a character
special or block special device;</p>

<p style="margin-top: 1em">or the local and remote Internet
addresses of a network file; the local host name or IP
number is followed by a colon (&rsquo;:&rsquo;), the port,
&lsquo;&lsquo;-&gt;&rsquo;&rsquo;, and the two-part remote
<br>
address; IP addresses may be reported as numbers or names,
depending on the +|-M, -n, and -P options; colon-separated
IPv6 numbers are enclosed in square brackets; <br>
IPv4 INADDR_ANY and IPv6 IN6_IS_ADDR_UNSPECIFIED addresses,
and zero port numbers are represented by an asterisk
(&rsquo;*&rsquo;); a UDP destination address may be followed
by <br>
the amount of time elapsed since the last packet was sent to
the destination; TCP, UDP and UDPLITE remote addresses may
be followed by TCP/TPI information in parenthe&acirc; <br>
ses - state (e.g.,
&lsquo;&lsquo;(ESTABLISHED)&rsquo;&rsquo;,
&lsquo;&lsquo;(Unbound)&rsquo;&rsquo;), queue sizes, and
window sizes (not all dialects) - in a fashion similar to
what netstat(1) reports; see the -T <br>
option description or the description of the TCP/TPI field
in OUTPUT FOR OTHER PROGRAMS for more information on state,
queue size, and window size;</p>

<p style="margin-top: 1em">or the address or name of a UNIX
domain socket, possibly including a stream clone device
name, a file system object&rsquo;s path name, local and
foreign kernel addresses, <br>
socket pair information, and a bound vnode address;</p>

<p style="margin-top: 1em">or the local and remote mount
point names of an NFS file;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;STR&rsquo;&rsquo;, followed by the stream
name;</p>

<p style="margin-top: 1em">or a stream character device
name, followed by &lsquo;&lsquo;-&gt;&rsquo;&rsquo; and the
stream name or a list of stream module names, separated by
&lsquo;&lsquo;-&gt;&rsquo;&rsquo;;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;STR:&rsquo;&rsquo; followed by the SCO
OpenServer stream device and module names, separated by
&lsquo;&lsquo;-&gt;&rsquo;&rsquo;;</p>

<p style="margin-top: 1em">or system directory name,
&lsquo;&lsquo; -- &rsquo;&rsquo;, and as many components of
the path name as lsof can find in the kernel&rsquo;s name
cache for selected dialects (See the KERNEL NAME <br>
CACHE section for more information.);</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;PIPE-&gt;&rsquo;&rsquo;, followed by a Solaris
kernel pipe destination address;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;COMMON:&rsquo;&rsquo;, followed by the vnode
device information structure&rsquo;s device name, for a
Solaris common vnode;</p>

<p style="margin-top: 1em">or the address family, followed
by a slash (&lsquo;/&rsquo;), followed by fourteen
comma-separated bytes of a non-Internet raw socket
address;</p>

<p style="margin-top: 1em">or the HP-UX x.25 local address,
followed by the virtual connection number (if any), followed
by the remote address (if any);</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;(dead)&rsquo;&rsquo; for disassociated Tru64
UNIX files - typically terminal files that have been flagged
with the TIOCNOTTY ioctl and closed by daemons;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;rd=&lt;offset&gt;&rsquo;&rsquo; and
&lsquo;&lsquo;wr=&lt;offset&gt;&rsquo;&rsquo; for the values
of the read and write offsets of a FIFO;</p>

<p style="margin-top: 1em">or &lsquo;&lsquo;clone
n:/dev/event&rsquo;&rsquo; for SCO OpenServer file clones of
the /dev/event device, where n is the minor device number of
the file;</p>

<p style="margin-top: 1em">or &lsquo;&lsquo;(socketpair:
n)&rsquo;&rsquo; for a Solaris 2.6, 8, 9 or 10 UNIX domain
socket, created by the socketpair(3N) network function;</p>

<p style="margin-top: 1em">or &lsquo;&lsquo;no
PCB&rsquo;&rsquo; for socket files that do not have a
protocol block associated with them, optionally followed by
&lsquo;&lsquo;, CANTSENDMORE&rsquo;&rsquo; if sending on the
socket has been dis&acirc; <br>
abled, or &lsquo;&lsquo;, CANTRCVMORE&rsquo;&rsquo; if
receiving on the socket has been disabled (e.g., by the
shutdown(2) function);</p>

<p style="margin-top: 1em">or the local and remote
addresses of a Linux IPX socket file in the form
&lt;net&gt;:[&lt;node&gt;:]&lt;port&gt;, followed in
parentheses by the transmit and receive queue sizes, and
<br>
the connection state;</p>

<p style="margin-top: 1em">or
&lsquo;&lsquo;dgram&rsquo;&rsquo; or
&lsquo;&lsquo;stream&rsquo;&rsquo; for the type UnixWare
7.1.1 and above in-kernel UNIX domain sockets, followed by a
colon (&rsquo;:&rsquo;) and the local path name when
available, fol&acirc; <br>
lowed by &lsquo;&lsquo;-&gt;&rsquo;&rsquo; and the remote
path name or kernel socket address in hexadecimal when
available;</p>

<p style="margin-top: 1em">or the association value,
association index, endpoint value, local address, local
port, remote address and remote port for Linux SCTP
sockets;</p>

<p style="margin-top: 1em">or &lsquo;&lsquo;protocol:
&rsquo;&rsquo; followed by the Linux socket&rsquo;s protocol
attribute.</p>

<p style="margin-top: 1em">For dialects that support a
&lsquo;&lsquo;namefs&rsquo;&rsquo; file system, allowing one
file to be attached to another with fattach(3C), lsof will
add
&lsquo;&lsquo;(FA:&lt;address1&gt;&lt;direction&gt;&lt;address2&gt;)&rsquo;&rsquo;
to the <br>
NAME column. &lt;address1&gt; and &lt;address2&gt; are
hexadecimal vnode addresses. &lt;direction&gt; will be
&lsquo;&lsquo;&lt;-&rsquo;&rsquo; if &lt;address2&gt; has
been fattach&rsquo;ed to this vnode whose address is
&lt;address1&gt;; <br>
and &lsquo;&lsquo;-&gt;&rsquo;&rsquo; if &lt;address1&gt;,
the vnode address of this vnode, has been fattach&rsquo;ed
to &lt;address2&gt;. &lt;address1&gt; may be omitted if it
already appears in the DEVICE column.</p>

<p style="margin-top: 1em">Lsof may add two parenthetical
notes to the NAME column for open Solaris 10 files:
&lsquo;&lsquo;(?)&rsquo;&rsquo; if lsof considers the path
name of questionable accuracy; and
&lsquo;&lsquo;(deleted)&rsquo;&rsquo; if the -X <br>
option has been specified and lsof detects the open
file&rsquo;s path name has been deleted. Consult the lsof
FAQ (The FAQ section gives its location.) for more
information on these <br>
NAME column additions.</p>

<p style="margin-top: 1em">LOCKS <br>
Lsof can&rsquo;t adequately report the wide variety of UNIX
dialect file locks in a single character. What it reports in
a single character is a compromise between the information
it <br>
finds in the kernel and the limitations of the reporting
format.</p>

<p style="margin-top: 1em">Moreover, when a process holds
several byte level locks on a file, lsof only reports the
status of the first lock it encounters. If it is a byte
level lock, then the lock char&acirc; <br>
acter will be reported in lower case - i.e.,
&lsquo;r&rsquo;, &lsquo;w&rsquo;, or &lsquo;x&rsquo; -
rather than the upper case equivalent reported for a full
file lock.</p>

<p style="margin-top: 1em">Generally lsof can only report
on locks held by local processes on local files. When a
local process sets a lock on a remotely mounted (e.g., NFS)
file, the remote server host <br>
usually records the lock state. One exception is Solaris -
at some patch levels of 2.3, and in all versions above 2.4,
the Solaris kernel records information on remote locks in
<br>
local structures.</p>

<p style="margin-top: 1em">Lsof has trouble reporting locks
for some UNIX dialects. Consult the BUGS section of this
manual page or the lsof FAQ (The FAQ section gives its
location.) for more informa&acirc; <br>
tion.</p>

<p style="margin-top: 1em">OUTPUT FOR OTHER PROGRAMS <br>
When the -F option is specified, lsof produces output that
is suitable for processing by another program - e.g, an awk
or Perl script, or a C program.</p>

<p style="margin-top: 1em">Each unit of information is
output in a field that is identified with a leading
character and terminated by a NL (012) (or a NUL (000) if
the 0 (zero) field identifier character <br>
is specified.) The data of the field follows immediately
after the field identification character and extends to the
field terminator.</p>

<p style="margin-top: 1em">It is possible to think of field
output as process and file sets. A process set begins with a
field whose identifier is &lsquo;p&rsquo; (for process
IDentifier (PID)). It extends to the <br>
beginning of the next PID field or the beginning of the
first file set of the process, whichever comes first.
Included in the process set are fields that identify the
command, <br>
the process group IDentification (PGID) number, the task
(thread) ID (TID), and the user ID (UID) number or login
name.</p>

<p style="margin-top: 1em">A file set begins with a field
whose identifier is &lsquo;f&rsquo; (for file descriptor).
It is followed by lines that describe the file&rsquo;s
access mode, lock state, type, device, size, off&acirc; <br>
set, inode, protocol, name and stream module names. It
extends to the beginning of the next file or process set,
whichever comes first.</p>

<p style="margin-top: 1em">When the NUL (000) field
terminator has been selected with the 0 (zero) field
identifier character, lsof ends each process and file set
with a NL (012) character.</p>

<p style="margin-top: 1em">Lsof always produces one field,
the PID (&lsquo;p&rsquo;) field. All other fields may be
declared optionally in the field identifier character list
that follows the -F option. When a field <br>
selection character identifies an item lsof does not
normally list - e.g., PPID, selected with -R - specification
of the field character - e.g.,
&lsquo;&lsquo;-FR&rsquo;&rsquo; - also selects the
list&acirc; <br>
ing of the item.</p>

<p style="margin-top: 1em">It is entirely possible to
select a set of fields that cannot easily be parsed - e.g.,
if the field descriptor field is not selected, it may be
difficult to identify file sets. <br>
To help you avoid this difficulty, lsof supports the -F
option; it selects the output of all fields with NL
terminators (the -F0 option pair selects the output of all
fields with <br>
NUL terminators). For compatibility reasons neither -F nor
-F0 select the raw device field.</p>

<p style="margin-top: 1em">These are the fields that lsof
will produce. The single character listed first is the field
identifier.</p>

<p style="margin-top: 1em">a file access mode <br>
c process command name (all characters from proc or <br>
user structure) <br>
C file structure share count <br>
d file&rsquo;s device character code <br>
D file&rsquo;s major/minor device number
(0x&lt;hexadecimal&gt;) <br>
f file descriptor (always selected) <br>
F file structure address (0x&lt;hexadecimal&gt;) <br>
G file flaGs (0x&lt;hexadecimal&gt;; names if +fg follows)
<br>
g process group ID <br>
i file&rsquo;s inode number <br>
K tasK ID <br>
k link count <br>
l file&rsquo;s lock status <br>
L process login name <br>
m marker between repeated output <br>
n file name, comment, Internet address <br>
N node identifier (ox&lt;hexadecimal&gt; <br>
o file&rsquo;s offset (decimal) <br>
p process ID (always selected) <br>
P protocol name <br>
r raw device number (0x&lt;hexadecimal&gt;) <br>
R parent process ID <br>
s file&rsquo;s size (decimal) <br>
S file&rsquo;s stream identification <br>
t file&rsquo;s type <br>
T TCP/TPI information, identified by prefixes (the <br>
&lsquo;=&rsquo; is part of the prefix): <br>
QR=&lt;read queue size&gt; <br>
QS=&lt;send queue size&gt; <br>
SO=&lt;socket options and values&gt; (not all dialects) <br>
SS=&lt;socket states&gt; (not all dialects) <br>
ST=&lt;connection state&gt; <br>
TF=&lt;TCP flags and values&gt; (not all dialects) <br>
WR=&lt;window read size&gt; (not all dialects) <br>
WW=&lt;window write size&gt; (not all dialects) <br>
(TCP/TPI information isn&rsquo;t reported for all supported
<br>
UNIX dialects. The -h or -? help output for the <br>
-T option will show what TCP/TPI reporting can be <br>
requested.) <br>
u process user ID <br>
z Solaris 10 and higher zone name <br>
Z SELinux security context (inhibited when SELinux is
disabled) <br>
0 use NUL field terminator character in place of NL <br>
1-9 dialect-specific field identifiers (The output <br>
of -F? identifies the information to be found <br>
in dialect-specific fields.)</p>

<p style="margin-top: 1em">You can get on-line help
information on these characters and their descriptions by
specifying the -F? option pair. (Escape the &lsquo;?&rsquo;
character as your shell requires.) Addi&acirc; <br>
tional information on field content can be found in the
OUTPUT section.</p>

<p style="margin-top: 1em">As an example, &lsquo;&lsquo;-F
pcfn&rsquo;&rsquo; will select the process ID
(&lsquo;p&rsquo;), command name (&lsquo;c&rsquo;), file
descriptor (&lsquo;f&rsquo;) and file name (&lsquo;n&rsquo;)
fields with an NL field terminator character;
&lsquo;&lsquo;-F <br>
pcfn0&rsquo;&rsquo; selects the same output with a NUL (000)
field terminator character.</p>

<p style="margin-top: 1em">Lsof doesn&rsquo;t produce all
fields for every process or file set, only those that are
available. Some fields are mutually exclusive: file device
characters and file major/minor <br>
device numbers; file inode number and protocol name; file
name and stream identification; file size and offset. One or
the other member of these mutually exclusive sets will <br>
appear in field output, but not both.</p>

<p style="margin-top: 1em">Normally lsof ends each field
with a NL (012) character. The 0 (zero) field identifier
character may be specified to change the field terminator
character to a NUL (000). A NUL <br>
terminator may be easier to process with xargs (1), for
example, or with programs whose quoting mechanisms may not
easily cope with the range of characters in the field
output. <br>
When the NUL field terminator is in use, lsof ends each
process and file set with a NL (012).</p>

<p style="margin-top: 1em">Three aids to producing programs
that can process lsof field output are included in the lsof
distribution. The first is a C header file, lsof_fields.h,
that contains symbols for <br>
the field identification characters, indexes for storing
them in a table, and explanation strings that may be
compiled into programs. Lsof uses this header file.</p>

<p style="margin-top: 1em">The second aid is a set of
sample scripts that process field output, written in awk,
Perl 4, and Perl 5. They&rsquo;re located in the scripts
subdirectory of the lsof distribution.</p>

<p style="margin-top: 1em">The third aid is the C library
used for the lsof test suite. The test suite is written in C
and uses field output to validate the correct operation of
lsof. The library can be <br>
found in the tests/LTlib.c file of the lsof distribution.
The library uses the first aid, the lsof_fields.h header
file.</p>

<p style="margin-top: 1em">BLOCKS AND TIMEOUTS <br>
Lsof can be blocked by some kernel functions that it uses -
lstat(2), readlink(2), and stat(2). These functions are
stalled in the kernel, for example, when the hosts where
<br>
mounted NFS file systems reside become inaccessible.</p>

<p style="margin-top: 1em">Lsof attempts to break these
blocks with timers and child processes, but the techniques
are not wholly reliable. When lsof does manage to break a
block, it will report the break <br>
with an error message. The messages may be suppressed with
the -t and -w options.</p>

<p style="margin-top: 1em">The default timeout value may be
displayed with the -h or -? option, and it may be changed
with the -S [t] option. The minimum for t is two seconds,
but you should avoid small <br>
values, since slow system responsiveness can cause short
timeouts to expire unexpectedly and perhaps stop lsof before
it can produce any output.</p>

<p style="margin-top: 1em">When lsof has to break a block
during its access of mounted file system information, it
normally continues, although with less information available
to display about open files.</p>

<p style="margin-top: 1em">Lsof can also be directed to
avoid the protection of timers and child processes when
using the kernel functions that might block by specifying
the -O option. While this will <br>
allow lsof to start up with less overhead, it exposes lsof
completely to the kernel situations that might block it. Use
this option cautiously.</p>

<p style="margin-top: 1em">AVOIDING KERNEL BLOCKS <br>
You can use the -b option to tell lsof to avoid using kernel
functions that would block. Some cautions apply.</p>

<p style="margin-top: 1em">First, using this option usually
requires that your system supply alternate device numbers in
place of the device numbers that lsof would normally obtain
with the lstat(2) and <br>
stat(2) kernel functions. See the ALTERNATE DEVICE NUMBERS
section for more information on alternate device
numbers.</p>

<p style="margin-top: 1em">Second, you can&rsquo;t specify
names for lsof to locate unless they&rsquo;re file system
names. This is because lsof needs to know the device and
inode numbers of files listed with names <br>
in the lsof options, and the -b option prevents lsof from
obtaining them. Moreover, since lsof only has device numbers
for the file systems that have alternates, its ability to
<br>
locate files on file systems depends completely on the
availability and accuracy of the alternates. If no
alternates are available, or if they&rsquo;re incorrect,
lsof won&rsquo;t be able <br>
to locate files on the named file systems.</p>

<p style="margin-top: 1em">Third, if the names of your file
system directories that lsof obtains from your
system&rsquo;s mount table are symbolic links, lsof
won&rsquo;t be able to resolve the links. This is because
<br>
the -b option causes lsof to avoid the kernel readlink(2)
function it uses to resolve symbolic links.</p>

<p style="margin-top: 1em">Finally, using the -b option
causes lsof to issue warning messages when it needs to use
the kernel functions that the -b option directs it to avoid.
You can suppress these mes&acirc; <br>
sages by specifying the -w option, but if you do, you
won&rsquo;t see the alternate device numbers reported in the
warning messages.</p>

<p style="margin-top: 1em">ALTERNATE DEVICE NUMBERS <br>
On some dialects, when lsof has to break a block because it
can&rsquo;t get information about a mounted file system via
the lstat(2) and stat(2) kernel functions, or because you
speci&acirc; <br>
fied the -b option, lsof can obtain some of the information
it needs - the device number and possibly the file system
type - from the system mount table. When that is possible,
<br>
lsof will report the device number it obtained. (You can
suppress the report by specifying the -w option.)</p>

<p style="margin-top: 1em">You can assist this process if
your mount table is supported with an /etc/mtab or
/etc/mnttab file that contains an options field by adding a
&lsquo;&lsquo;dev=xxxx&rsquo;&rsquo; field for mount points
<br>
that do not have one in their options strings. Note: you
must be able to edit the file - i.e., some mount tables like
recent Solaris /etc/mnttab or Linux /proc/mounts are <br>
read-only and can&rsquo;t be modified.</p>

<p style="margin-top: 1em">You may also be able to supply
device numbers using the +m and +m m options, provided they
are supported by your dialect. Check the output of
lsof&rsquo;s -h or -? options to see if <br>
the +m and +m m options are available.</p>

<p style="margin-top: 1em">The
&lsquo;&lsquo;xxxx&rsquo;&rsquo; portion of the field is the
hexadecimal value of the file system&rsquo;s device number.
(Consult the st_dev field of the output of the lstat(2) and
stat(2) functions for <br>
the appropriate values for your file systems.) Here&rsquo;s
an example from a Sun Solaris 2.6 /etc/mnttab for a file
system remotely mounted via NFS:</p>

<p style="margin-top: 1em">nfs
ignore,noquota,dev=2a40001</p>

<p style="margin-top: 1em">There&rsquo;s an advantage to
having &lsquo;&lsquo;dev=xxxx&rsquo;&rsquo; entries in your
mount table file, especially for file systems that are
mounted from remote NFS servers. When a remote server
crashes <br>
and you want to identify its users by running lsof on one of
its clients, lsof probably won&rsquo;t be able to get output
from the lstat(2) and stat(2) functions for the file system.
<br>
If it can obtain the file system&rsquo;s device number from
the mount table, it will be able to display the files open
on the crashed NFS server.</p>

<p style="margin-top: 1em">Some dialects that do not use an
ASCII /etc/mtab or /etc/mnttab file for the mount table may
still provide an alternative device number in their internal
mount tables. This <br>
includes AIX, Apple Darwin, FreeBSD, NetBSD, OpenBSD, and
Tru64 UNIX. Lsof knows how to obtain the alternative device
number for these dialects and uses it when its attempt to
<br>
lstat(2) or stat(2) the file system is blocked.</p>

<p style="margin-top: 1em">If you&rsquo;re not sure your
dialect supplies alternate device numbers for file systems
from its mount table, use this lsof incantation to see if it
reports any alternate device num&acirc; <br>
bers:</p>

<p style="margin-top: 1em">lsof -b</p>

<p style="margin-top: 1em">Look for standard error file
warning messages that begin &lsquo;&lsquo;assuming
&quot;dev=xxxx&quot; from ...&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">KERNEL NAME CACHE <br>
Lsof is able to examine the kernel&rsquo;s name cache or use
other kernel facilities (e.g., the ADVFS 4.x tag_to_path()
function under Tru64 UNIX) on some dialects for most file
system <br>
types, excluding AFS, and extract recently used path name
components from it. (AFS file system path lookups
don&rsquo;t use the kernel&rsquo;s name cache; some Solaris
VxFS file system <br>
operations apparently don&rsquo;t use it, either.)</p>

<p style="margin-top: 1em">Lsof reports the complete paths
it finds in the NAME column. If lsof can&rsquo;t report all
components in a path, it reports in the NAME column the file
system name, followed by a <br>
space, two &lsquo;-&rsquo; characters, another space, and
the name components it has located, separated by the
&lsquo;/&rsquo; character.</p>

<p style="margin-top: 1em">When lsof is run in repeat mode
- i.e., with the -r option specified - the extent to which
it can report path name components for the same file may
vary from cycle to cycle. <br>
That&rsquo;s because other running processes can cause the
kernel to remove entries from its name cache and replace
them with others.</p>

<p style="margin-top: 1em">Lsof&rsquo;s use of the kernel
name cache to identify the paths of files can lead it to
report incorrect components under some circumstances. This
can happen when the kernel name <br>
cache uses device and node number as a key (e.g., SCO
OpenServer) and a key on a rapidly changing file system is
reused. If the UNIX dialect&rsquo;s kernel doesn&rsquo;t
purge the name <br>
cache entry for a file when it is unlinked, lsof may find a
reference to the wrong entry in the cache. The lsof FAQ (The
FAQ section gives its location.) has more information <br>
on this situation.</p>

<p style="margin-top: 1em">Lsof can report path name
components for these dialects:</p>

<p style="margin-top: 1em">FreeBSD <br>
HP-UX <br>
Linux <br>
NetBSD <br>
NEXTSTEP <br>
OpenBSD <br>
OPENSTEP <br>
SCO OpenServer <br>
SCO|Caldera UnixWare <br>
Solaris <br>
Tru64 UNIX</p>

<p style="margin-top: 1em">Lsof can&rsquo;t report path
name components for these dialects:</p>

<p style="margin-top: 1em">AIX</p>

<p style="margin-top: 1em">If you want to know why lsof
can&rsquo;t report path name components for some dialects,
see the lsof FAQ (The FAQ section gives its location.)</p>

<p style="margin-top: 1em">DEVICE CACHE FILE <br>
Examining all members of the /dev (or /devices) node tree
with stat(2) functions can be time consuming. What&rsquo;s
more, the information that lsof needs - device number, inode
num&acirc; <br>
ber, and path - rarely changes.</p>

<p style="margin-top: 1em">Consequently, lsof normally
maintains an ASCII text file of cached /dev (or /devices)
information (exception: the /proc-based Linux lsof where
it&rsquo;s not needed.) The local system <br>
administrator who builds lsof can control the way the device
cache file path is formed, selecting from these options:</p>

<p style="margin-top: 1em">Path from the -D option; <br>
Path from an environment variable; <br>
System-wide path; <br>
Personal path (the default); <br>
Personal path, modified by an environment variable.</p>

<p style="margin-top: 1em">Consult the output of the -h,
-D? , or -? help options for the current state of device
cache support. The help output lists the default read-mode
device cache file path that is <br>
in effect for the current invocation of lsof. The -D? option
output lists the read-only and write device cache file
paths, the names of any applicable environment variables,
<br>
and the personal device cache path format.</p>

<p style="margin-top: 1em">Lsof can detect that the current
device cache file has been accidentally or maliciously
modified by integrity checks, including the computation and
verification of a sixteen bit <br>
Cyclic Redundancy Check (CRC) sum on the file&rsquo;s
contents. When lsof senses something wrong with the file, it
issues a warning and attempts to remove the current cache
file and <br>
create a new copy, but only to a path that the process can
legitimately write.</p>

<p style="margin-top: 1em">The path from which a lsof
process may attempt to read a device cache file may not be
the same as the path to which it can legitimately write.
Thus when lsof senses that it <br>
needs to update the device cache file, it may choose a
different path for writing it from the path from which it
read an incorrect or outdated version.</p>

<p style="margin-top: 1em">If available, the -Dr option
will inhibit the writing of a new device cache file.
(It&rsquo;s always available when specified without a path
name argument.)</p>

<p style="margin-top: 1em">When a new device is added to
the system, the device cache file may need to be recreated.
Since lsof compares the mtime of the device cache file with
the mtime and ctime of the <br>
/dev (or /devices) directory, it usually detects that a new
device has been added; in that case lsof issues a warning
message and attempts to rebuild the device cache file.</p>

<p style="margin-top: 1em">Whenever lsof writes a device
cache file, it sets its ownership to the real UID of the
executing process, and its permission modes to 0600, this
restricting its reading and writ&acirc; <br>
ing to the file&rsquo;s owner.</p>

<p style="margin-top: 1em">LSOF PERMISSIONS THAT AFFECT
DEVICE CACHE FILE ACCESS <br>
Two permissions of the lsof executable affect its ability to
access device cache files. The permissions are set by the
local system administrator when lsof is installed.</p>

<p style="margin-top: 1em">The first and rarer permission
is setuid-root. It comes into effect when lsof is executed;
its effective UID is then root, while its real (i.e., that
of the logged-on user) UID <br>
is not. The lsof distribution recommends that versions for
these dialects run setuid-root.</p>

<p style="margin-top: 1em">HP-UX 11.11 and 11.23 <br>
Linux</p>

<p style="margin-top: 1em">The second and more common
permission is setgid. It comes into effect when the
effective group IDentification number (GID) of the lsof
process is set to one that can access ker&acirc; <br>
nel memory devices - e.g., &lsquo;&lsquo;kmem&rsquo;&rsquo;,
&lsquo;&lsquo;sys&rsquo;&rsquo;, or
&lsquo;&lsquo;system&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">An lsof process that has setgid
permission usually surrenders the permission after it has
accessed the kernel memory devices. When it does that, lsof
can allow more liberal <br>
device cache path formations. The lsof distribution
recommends that versions for these dialects run setgid and
be allowed to surrender setgid permission.</p>

<p style="margin-top: 1em">AIX 5.[12] and 5.3-ML1 <br>
Apple Darwin 7.x Power Macintosh systems <br>
FreeBSD 4.x, 4.1x, 5.x and [6789].x for x86-based systems
<br>
FreeBSD 5.x and [6789].x for Alpha, AMD64 and Sparc64-based
<br>
systems <br>
HP-UX 11.00 <br>
NetBSD 1.[456], 2.x and 3.x for Alpha, x86, and SPARC-based
<br>
systems <br>
NEXTSTEP 3.[13] for NEXTSTEP architectures <br>
OpenBSD 2.[89] and 3.[0-9] for x86-based systems <br>
OPENSTEP 4.x <br>
SCO OpenServer Release 5.0.6 for x86-based systems <br>
SCO|Caldera UnixWare 7.1.4 for x86-based systems <br>
Solaris 2.6, 8, 9 and 10 <br>
Tru64 UNIX 5.1</p>

<p style="margin-top: 1em">(Note: lsof for AIX 5L and above
needs setuid-root permission if its -X option is used.)</p>

<p style="margin-top: 1em">Lsof for these dialects does not
support a device cache, so the permissions given to the
executable don&rsquo;t apply to the device cache file.</p>

<p style="margin-top: 1em">Linux</p>

<p style="margin-top: 1em">DEVICE CACHE FILE PATH FROM THE
-D OPTION <br>
The -D option provides limited means for specifying the
device cache file path. Its ? function will report the
read-only and write device cache file paths that lsof will
use.</p>

<p style="margin-top: 1em">When the -D b, r, and u
functions are available, you can use them to request that
the cache file be built in a specific location (b[path]);
read but not rebuilt (r[path]); or <br>
read and rebuilt (u[path]). The b, r, and u functions are
restricted under some conditions. They are restricted when
the lsof process is setuid-root. The path specified with
<br>
the r function is always read-only, even when it is
available.</p>

<p style="margin-top: 1em">The b, r, and u functions are
also restricted when the lsof process runs setgid and lsof
doesn&rsquo;t surrender the setgid permission. (See the LSOF
PERMISSIONS THAT AFFECT DEVICE <br>
CACHE FILE ACCESS section for a list of implementations that
normally don&rsquo;t surrender their setgid permission.)</p>

<p style="margin-top: 1em">A further -D function, i (for
ignore), is always available.</p>

<p style="margin-top: 1em">When available, the b function
tells lsof to read device information from the kernel with
the stat(2) function and build a device cache file at the
indicated path.</p>

<p style="margin-top: 1em">When available, the r function
tells lsof to read the device cache file, but not update it.
When a path argument accompanies -Dr, it names the device
cache file path. The r <br>
function is always available when it is specified without a
path name argument. If lsof is not running setuid-root and
surrenders its setgid permission, a path name argument may
<br>
accompany the r function.</p>

<p style="margin-top: 1em">When available, the u function
tells lsof to attempt to read and use the device cache file.
If it can&rsquo;t read the file, or if it finds the contents
of the file incorrect or out&acirc; <br>
dated, it will read information from the kernel, and attempt
to write an updated version of the device cache file, but
only to a path it considers legitimate for the lsof process
<br>
effective and real UIDs.</p>

<p style="margin-top: 1em">DEVICE CACHE PATH FROM AN
ENVIRONMENT VARIABLE <br>
Lsof&rsquo;s second choice for the device cache file is the
contents of the LSOFDEVCACHE environment variable. It avoids
this choice if the lsof process is setuid-root, or the real
<br>
UID of the process is root.</p>

<p style="margin-top: 1em">A further restriction applies to
a device cache file path taken from the LSOFDEVCACHE
environment variable: lsof will not write a device cache
file to the path if the lsof <br>
process doesn&rsquo;t surrender its setgid permission. (See
the LSOF PERMISSIONS THAT AFFECT DEVICE CACHE FILE ACCESS
section for information on implementations that don&rsquo;t
surrender <br>
their setgid permission.)</p>

<p style="margin-top: 1em">The local system administrator
can disable the use of the LSOFDEVCACHE environment variable
or change its name when building lsof. Consult the output of
-D? for the environment <br>
variable&rsquo;s name.</p>

<p style="margin-top: 1em">SYSTEM-WIDE DEVICE CACHE PATH
<br>
The local system administrator may choose to have a
system-wide device cache file when building lsof. That file
will generally be constructed by a special system
administration <br>
procedure when the system is booted or when the contents of
/dev or /devices) changes. If defined, it is lsof&rsquo;s
third device cache file path choice.</p>

<p style="margin-top: 1em">You can tell that a system-wide
device cache file is in effect for your local installation
by examining the lsof help option output - i.e., the output
from the -h or -? option.</p>

<p style="margin-top: 1em">Lsof will never write to the
system-wide device cache file path by default. It must be
explicitly named with a -D function in a root-owned
procedure. Once the file has been <br>
written, the procedure must change its permission modes to
0644 (owner-read and owner-write, group-read, and
other-read).</p>

<p style="margin-top: 1em">PERSONAL DEVICE CACHE PATH
(DEFAULT) <br>
The default device cache file path of the lsof distribution
is one recorded in the home directory of the real UID that
executes lsof. Added to the home directory is a second <br>
path component of the form .lsof_hostname.</p>

<p style="margin-top: 1em">This is lsof&rsquo;s fourth
device cache file path choice, and is usually the default.
If a system-wide device cache file path was defined when
lsof was built, this fourth choice will <br>
be applied when lsof can&rsquo;t find the system-wide device
cache file. This is the only time lsof uses two paths when
reading the device cache file.</p>

<p style="margin-top: 1em">The hostname part of the second
component is the base name of the executing host, as
returned by gethostname(2). The base name is defined to be
the characters preceding the <br>
first &lsquo;.&rsquo; in the gethostname(2) output, or all
the gethostname(2) output if it contains no
&lsquo;.&rsquo;.</p>

<p style="margin-top: 1em">The device cache file belongs to
the user ID and is readable and writable by the user ID
alone - i.e., its modes are 0600. Each distinct real user ID
on a given host that exe&acirc; <br>
cutes lsof has a distinct device cache file. The hostname
part of the path distinguishes device cache files in an
NFS-mounted home directory into which device cache files are
<br>
written from several different hosts.</p>

<p style="margin-top: 1em">The personal device cache file
path formed by this method represents a device cache file
that lsof will attempt to read, and will attempt to write
should it not exist or should <br>
its contents be incorrect or outdated.</p>

<p style="margin-top: 1em">The -Dr option without a path
name argument will inhibit the writing of a new device cache
file.</p>

<p style="margin-top: 1em">The -D? option will list the
format specification for constructing the personal device
cache file. The conversions used in the format specification
are described in the <br>
00DCACHE file of the lsof distribution.</p>

<p style="margin-top: 1em">MODIFIED PERSONAL DEVICE CACHE
PATH <br>
If this option is defined by the local system administrator
when lsof is built, the LSOFPERSDCPATH environment variable
contents may be used to add a component of the personal <br>
device cache file path.</p>

<p style="margin-top: 1em">The LSOFPERSDCPATH variable
contents are inserted in the path at the place marked by the
local system administrator with the
&lsquo;&lsquo;%p&rsquo;&rsquo; conversion in the HASPERSDC
format specifica&acirc; <br>
tion of the dialect&rsquo;s machine.h header file.
(It&rsquo;s placed right after the home directory in the
default lsof distribution.)</p>

<p style="margin-top: 1em">Thus, for example, if
LSOFPERSDCPATH contains &lsquo;&lsquo;LSOF&rsquo;&rsquo;,
the home directory is
&lsquo;&lsquo;/Homes/abe&rsquo;&rsquo;, the host name is
&lsquo;&lsquo;lsof.itap.purdue.edu&rsquo;&rsquo;, and the
HASPERSDC format is the default <br>
(&lsquo;&lsquo;%h/%p.lsof_%L&rsquo;&rsquo;), the modified
personal device cache file path is:</p>

<p style="margin-top: 1em">/Homes/abe/LSOF/.lsof_vic</p>

<p style="margin-top: 1em">The LSOFPERSDCPATH environment
variable is ignored when the lsof process is setuid-root or
when the real UID of the process is root.</p>

<p style="margin-top: 1em">Lsof will not write to a
modified personal device cache file path if the lsof process
doesn&rsquo;t surrender setgid permission. (See the LSOF
PERMISSIONS THAT AFFECT DEVICE CACHE <br>
FILE ACCESS section for a list of implementations that
normally don&rsquo;t surrender their setgid permission.)</p>

<p style="margin-top: 1em">If, for example, you want to
create a sub-directory of personal device cache file paths
by using the LSOFPERSDCPATH environment variable to name it,
and lsof doesn&rsquo;t surrender <br>
its setgid permission, you will have to allow lsof to create
device cache files at the standard personal path and move
them to your subdirectory with shell commands.</p>

<p style="margin-top: 1em">The local system administrator
may: disable this option when lsof is built; change the name
of the environment variable from LSOFPERSDCPATH to something
else; change the <br>
HASPERSDC format to include the personal path component in
another place; or exclude the personal path component
entirely. Consult the output of the -D? option for the
environ&acirc; <br>
ment variable&rsquo;s name and the HASPERSDC format
specification.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
Errors are identified with messages on the standard error
file.</p>

<p style="margin-top: 1em">Lsof returns a one (1) if any
error was detected, including the failure to locate command
names, file names, Internet addresses or files, login names,
NFS files, PIDs, PGIDs, or <br>
UIDs it was asked to list. If the -V option is specified,
lsof will indicate the search items it failed to list.</p>

<p style="margin-top: 1em">It returns a zero (0) if no
errors were detected and if it was able to list some
information about all the specified search arguments.</p>

<p style="margin-top: 1em">When lsof cannot open access to
/dev (or /devices) or one of its subdirectories, or get
information on a file in them with stat(2), it issues a
warning message and continues. <br>
That lsof will issue warning messages about inaccessible
files in /dev (or /devices) is indicated in its help output
- requested with the -h or &gt;B -? options - with the
mes&acirc; <br>
sage:</p>

<p style="margin-top: 1em">Inaccessible /dev warnings are
enabled.</p>

<p style="margin-top: 1em">The warning message may be
suppressed with the -w option. It may also have been
suppressed by the system administrator when lsof was
compiled by the setting of the WARNDEVACCESS <br>
definition. In this case, the output from the help options
will include the message:</p>

<p style="margin-top: 1em">Inaccessible /dev warnings are
disabled.</p>

<p style="margin-top: 1em">Inaccessible device warning
messages usually disappear after lsof has created a working
device cache file.</p>

<p style="margin-top: 1em">EXAMPLES <br>
For a more extensive set of examples, documented more fully,
see the 00QUICKSTART file of the lsof distribution.</p>

<p style="margin-top: 1em">To list all open files, use:</p>

<p style="margin-top: 1em">lsof</p>

<p style="margin-top: 1em">To list all open Internet, x.25
(HP-UX), and UNIX domain files, use:</p>

<p style="margin-top: 1em">lsof -i -U</p>

<p style="margin-top: 1em">To list all open IPv4 network
files in use by the process whose PID is 1234, use:</p>

<p style="margin-top: 1em">lsof -i 4 -a -p 1234</p>

<p style="margin-top: 1em">Presuming the UNIX dialect
supports IPv6, to list only open IPv6 network files,
use:</p>

<p style="margin-top: 1em">lsof -i 6</p>

<p style="margin-top: 1em">To list all files using any
protocol on ports 513, 514, or 515 of host
wonderland.cc.purdue.edu, use:</p>

<p style="margin-top: 1em">lsof -i
@wonderland.cc.purdue.edu:513-515</p>

<p style="margin-top: 1em">To list all files using any
protocol on any port of mace.cc.purdue.edu (cc.purdue.edu is
the default domain), use:</p>

<p style="margin-top: 1em">lsof -i @mace</p>

<p style="margin-top: 1em">To list all open files for login
name &lsquo;&lsquo;abe&rsquo;&rsquo;, or user ID 1234, or
process 456, or process 123, or process 789, use:</p>

<p style="margin-top: 1em">lsof -p 456,123,789 -u
1234,abe</p>

<p style="margin-top: 1em">To list all open files on device
/dev/hd4, use:</p>

<p style="margin-top: 1em">lsof /dev/hd4</p>

<p style="margin-top: 1em">To find the process that has
/u/abe/foo open, use:</p>

<p style="margin-top: 1em">lsof /u/abe/foo</p>

<p style="margin-top: 1em">To send a SIGHUP to the
processes that have /u/abe/bar open, use:</p>

<p style="margin-top: 1em">kill -HUP &lsquo;lsof -t
/u/abe/bar&lsquo;</p>

<p style="margin-top: 1em">To find any open file, including
an open UNIX domain socket file, with the name /dev/log,
use:</p>

<p style="margin-top: 1em">lsof /dev/log</p>

<p style="margin-top: 1em">To find processes with open
files on the NFS file system named /nfs/mount/point whose
server is inaccessible, and presuming your mount table
supplies the device number for <br>
/nfs/mount/point, use:</p>

<p style="margin-top: 1em">lsof -b /nfs/mount/point</p>

<p style="margin-top: 1em">To do the preceding search with
warning messages suppressed, use:</p>

<p style="margin-top: 1em">lsof -bw /nfs/mount/point</p>

<p style="margin-top: 1em">To ignore the device cache file,
use:</p>

<p style="margin-top: 1em">lsof -Di</p>

<p style="margin-top: 1em">To obtain PID and command name
field output for each process, file descriptor, file device
number, and file inode number for each file of each process,
use:</p>

<p style="margin-top: 1em">lsof -FpcfDi</p>

<p style="margin-top: 1em">To list the files at descriptors
1 and 3 of every process running the lsof command for login
ID &lsquo;&lsquo;abe&rsquo;&rsquo; every 10 seconds,
use:</p>

<p style="margin-top: 1em">lsof -c lsof -a -d 1 -d 3 -u abe
-r10</p>

<p style="margin-top: 1em">To list the current working
directory of processes running a command that is exactly
four characters long and has an &rsquo;o&rsquo; or
&rsquo;O&rsquo; in character three, use this regular
expression <br>
form of the -c c option:</p>

<p style="margin-top: 1em">lsof -c /^..o.$/i -a -d cwd</p>

<p style="margin-top: 1em">To find an IP version 4 socket
file by its associated numeric dot-form address, use:</p>

<p style="margin-top: 1em">lsof -i@128.210.15.17</p>

<p style="margin-top: 1em">To find an IP version 6 socket
file (when the UNIX dialect supports IPv6) by its associated
numeric colon-form address, use:</p>

<p style="margin-top: 1em">lsof -i@[0:1:2:3:4:5:6:7]</p>

<p style="margin-top: 1em">To find an IP version 6 socket
file (when the UNIX dialect supports IPv6) by an associated
numeric colon-form address that has a run of zeroes in it -
e.g., the loop-back address <br>
- use:</p>

<p style="margin-top: 1em">lsof -i@[::1]</p>

<p style="margin-top: 1em">To obtain a repeat mode marker
line that contains the current time, use:</p>

<p style="margin-top: 1em">lsof -rm====%T====</p>

<p style="margin-top: 1em">To add spaces to the previous
marker line, use:</p>

<p style="margin-top: 1em">lsof -r &quot;m==== %T
====&quot;</p>

<p style="margin-top: 1em">BUGS <br>
Since lsof reads kernel memory in its search for open files,
rapid changes in kernel memory may produce unpredictable
results.</p>

<p style="margin-top: 1em">When a file has multiple record
locks, the lock status character (following the file
descriptor) is derived from a test of the first lock
structure, not from any combination of <br>
the individual record locks that might be described by
multiple lock structures.</p>

<p style="margin-top: 1em">Lsof can&rsquo;t search for
files with restrictive access permissions by name unless it
is installed with root set-UID permission. Otherwise it is
limited to searching for files to <br>
which its user or its set-GID group (if any) has access
permission.</p>

<p style="margin-top: 1em">The display of the destination
address of a raw socket (e.g., for ping) depends on the UNIX
operating system. Some dialects store the destination
address in the raw socket&rsquo;s <br>
protocol control block, some do not.</p>

<p style="margin-top: 1em">Lsof can&rsquo;t always
represent Solaris device numbers in the same way that ls(1)
does. For example, the major and minor device numbers that
the lstat(2) and stat(2) functions <br>
report for the directory on which CD-ROM files are mounted
(typically /cdrom) are not the same as the ones that it
reports for the device on which CD-ROM files are mounted
(typi&acirc; <br>
cally /dev/sr0). (Lsof reports the directory numbers.)</p>

<p style="margin-top: 1em">The support for /proc file
systems is available only for BSD and Tru64 UNIX dialects,
Linux, and dialects derived from SYSV R4 - e.g., FreeBSD,
NetBSD, OpenBSD, Solaris, <br>
UnixWare.</p>

<p style="margin-top: 1em">Some /proc file items - device
number, inode number, and file size - are unavailable in
some dialects. Searching for files in a /proc file system
may require that the full path <br>
name be specified.</p>

<p style="margin-top: 1em">No text (txt) file descriptors
are displayed for Linux processes. All entries for files
other than the current working directory, the root
directory, and numerical file descrip&acirc; <br>
tors are labeled mem descriptors.</p>

<p style="margin-top: 1em">Lsof can&rsquo;t search for
Tru64 UNIX named pipes by name, because their kernel
implementation of lstat(2) returns an improper device number
for a named pipe.</p>

<p style="margin-top: 1em">Lsof can&rsquo;t report fully or
correctly on HP-UX 9.01, 10.20, and 11.00 locks because of
insufficient access to kernel data or errors in the kernel
data. See the lsof FAQ (The FAQ <br>
section gives its location.) for details.</p>

<p style="margin-top: 1em">The AIX SMT file type is a
fabrication. It&rsquo;s made up for file structures whose
type (15) isn&rsquo;t defined in the AIX
/usr/include/sys/file.h header file. One way to create such
<br>
file structures is to run X clients with the DISPLAY
variable set to &lsquo;&lsquo;:0.0&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">The +|-f[cfgGn] option is not
supported under /proc-based Linux lsof, because it
doesn&rsquo;t read kernel structures from kernel memory.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
Lsof may access these environment variables.</p>

<p style="margin-top: 1em">LANG defines a language locale.
See setlocale(3) for the names of other variables that can
be used in place of LANG - e.g., LC_ALL, LC_TYPE, etc.</p>

<p style="margin-top: 1em">LSOFDEVCACHE defines the path to
a device cache file. See the DEVICE CACHE PATH FROM AN
ENVIRONMENT VARIABLE section for more information.</p>

<p style="margin-top: 1em">LSOFPERSDCPATH defines the
middle component of a modified personal device cache file
path. See the MODIFIED PERSONAL DEVICE CACHE PATH section
for more information.</p>

<p style="margin-top: 1em">FAQ <br>
Frequently-asked questions and their answers (an FAQ) are
available in the 00FAQ file of the lsof distribution.</p>

<p style="margin-top: 1em">That file is also available via
anonymous ftp from lsof.itap.purdue.edu at
pub/tools/unix/lsofFAQ. The URL is:</p>


<p style="margin-top: 1em">ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ</p>

<p style="margin-top: 1em">FILES <br>
/dev/kmem kernel virtual memory device</p>

<p style="margin-top: 1em">/dev/mem physical memory
device</p>

<p style="margin-top: 1em">/dev/swap system paging
device</p>

<p style="margin-top: 1em">.lsof_hostname lsof&rsquo;s
device cache file (The suffix, hostname, is the first
component of the host&rsquo;s name returned by
gethostname(2).)</p>

<p style="margin-top: 1em">AUTHORS <br>
Lsof was written by Victor A.Abell &lt;abe@purdue.edu&gt; of
Purdue University. Many others have contributed to lsof.
They&rsquo;re listed in the 00CREDITS file of the lsof
distribution.</p>

<p style="margin-top: 1em">DISTRIBUTION <br>
The latest distribution of lsof is available via anonymous
ftp from the host lsof.itap.purdue.edu. You&rsquo;ll find
the lsof distribution in the pub/tools/unix/lsof
directory.</p>

<p style="margin-top: 1em">You can also use this URL:</p>


<p style="margin-top: 1em">ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof</p>

<p style="margin-top: 1em">Lsof is also mirrored elsewhere.
When you access lsof.itap.purdue.edu and change to its
pub/tools/unix/lsof directory, you&rsquo;ll be given a list
of some mirror sites. The <br>
pub/tools/unix/lsof directory also contains a more complete
list in its mirrors file. Use mirrors with caution - not all
mirrors always have the latest lsof revision.</p>

<p style="margin-top: 1em">Some pre-compiled Lsof
executables are available on lsof.itap.purdue.edu, but their
use is discouraged - it&rsquo;s better that you build your
own from the sources. If you feel you <br>
must use a pre-compiled executable, please read the cautions
that appear in the README files of the
pub/tools/unix/lsof/binaries subdirectories and in the 00*
files of the dis&acirc; <br>
tribution.</p>

<p style="margin-top: 1em">More information on the lsof
distribution can be found in its README.lsof_&lt;version&gt;
file. If you intend to get the lsof distribution and build
it, please read README.lsof_&lt;ver&acirc; <br>
sion&gt; and the other 00* files of the distribution before
sending questions to the author.</p>

<p style="margin-top: 1em">SEE ALSO <br>
Not all the following manual pages may exist in every UNIX
dialect to which lsof has been ported.</p>

<p style="margin-top: 1em">access(2), awk(1), crash(1),
fattach(3C), ff(1), fstat(8), fuser(1), gethostname(2),
isprint(3), kill(1), localtime(3), lstat(2), modload(8),
mount(8), netstat(1), ofiles(8L), <br>
perl(1), ps(1), readlink(2), setlocale(3), stat(2),
strftime(3), time(2), uname(1).</p>

<p style="margin-top: 1em">Revision-4.89 LSOF(1)</p>
<hr>
</body>
</html>
