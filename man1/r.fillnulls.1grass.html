<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>r.fillnulls(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">r.fillnulls(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">r.fillnulls(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>r.fillnulls</b> - Fills no-data areas in raster maps using spline
  interpolation.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
raster, elevation, interpolation
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>r.fillnulls</b>
<div>&#x00A0;</div>
<b>r.fillnulls --help</b>
<div>&#x00A0;</div>
<b>r.fillnulls</b> <b>input</b>=<i>name</i> <b>output</b>=<i>name</i>
  <b>method</b>= <i>string</i> [<b>tension</b>=<i>float</i>]
  [<b>smooth</b>=<i>float</i>] [ <b>edge</b>=<i>integer</i>]
  [<b>npmin</b>=<i>integer</i>] [ <b>segmax</b>=<i>integer</i>]
  [<b>lambda</b>=<i>float</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>method</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Interpolation method to use
    <div>&#x00A0;</div>
    Options: <i>bilinear, bicubic, rst</i>
    <div>&#x00A0;</div>
    Default: <i>rst</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tension</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Spline tension parameter
    <div>&#x00A0;</div>
    Default: <i>40.</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>smooth</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Spline smoothing parameter
    <div>&#x00A0;</div>
    Default: <i>0.1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>edge</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Width of hole edge used for interpolation (in cells)
    <div>&#x00A0;</div>
    Options: <i>2-100</i>
    <div>&#x00A0;</div>
    Default: <i>3</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>npmin</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Minimum number of points for approximation in a segment (&gt;segmax)
    <div>&#x00A0;</div>
    Options: <i>2-10000</i>
    <div>&#x00A0;</div>
    Default: <i>600</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>segmax</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Maximum number of points in a segment
    <div>&#x00A0;</div>
    Options: <i>2-10000</i>
    <div>&#x00A0;</div>
    Default: <i>300</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lambda</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Tykhonov regularization parameter (affects smoothing)
    <div>&#x00A0;</div>
    Used in bilinear and bicubic spline interpolation
    <div>&#x00A0;</div>
    Default: <i>0.01</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>r.fillnulls</i> fills NULL pixels (no data areas) in input raster map and
  stores filled data to a new output raster map. The fill areas are interpolated
  from the no data area boundaries buffer using <i>v.surf.rst</i> regularized
  spline interpolation with tension ( <b>method=rst</b>) or
  <i>r.resamp.bspline</i> cubic or linear spline interpolation with Tykhonov
  regularization.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Each area boundary buffer is set to three times the map resolution to get
  nominally three points around the edge. This way the algorithm interpolates
  into the hole with a trained slope and curvature at the edges, in order to
  avoid that such a flat plane is generated in a hole. The width of edge area
  can be adjusted by changing the edge parameter.
<div class="Pp"></div>
During the interpolation following warning may occur when using the RST method:
<div class="Pp"></div>
Warning: strip exists with insufficient data
<div>&#x00A0;</div>
Warning: taking too long to find points for interpolation--please change the
  region to area where your points are
<div class="Pp"></div>
This warning is generated if large data holes exist within the surface. As the
  idea of <i>r.fillnulls</i> is to fill such holes, the user may ignore the
  warning. The interpolation will be continued. However, the user may pay
  attention to below notes.
<div class="Pp"></div>
If interpolation fails, temporary raster and vector maps are left in place to
  allow unfilled map hole (NULL area) identification and manual repair.
<div class="Pp"></div>
When using the default RST method, the algorithm is based on <i>v.surf.rst</i>
  regularized splines with tension interpolation module which interpolates the
  raster cell values for NULL data areas from the boundary values of the NULL
  data area. An eventual raster MASK is respected during the NULL data area(s)
  filling. The interpolated values are patched into the NULL data area(s) of the
  input map and saved into a new raster map. Otherwise, either the linear or
  cubic spline interpolation with Tykhonov regularization can be selected (based
  on <i>r.resamp.bspline</i>).
<h1 class="Sh" title="Sh" id="WARNING"><a class="selflink" href="#WARNING">WARNING</a></h1>
Depending on the shape of the NULL data area(s) problems may occur due to an
  insufficient number of input cell values for the interpolation process. Most
  problems will occur if a NULL data area reaches a large amount of the map
  boundary. The user will have to carefully check the result using
  <i>r.mapcalc</i> (generating a difference map to the input map and applying
  the &quot;differences&quot; color table with <i>r.colors</i>) and/or to query
  individual cell values.
<div class="Pp"></div>
RST method stores temporary maps on hard disk. It will require at least as much
  free space as one extra input raster map takes.
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
In this example, the SRTM elevation map in the North Carolina sample dataset
  location is filtered for outlier elevation values; missing pixels are then
  re-interpolated to obtain a complete elevation map:
<div>&#x00A0;</div>
<pre>
g.region raster=elev_srtm_30m -p
d.mon wx0
d.histogram elev_srtm_30m
# remove too low elevations (esp. lakes)
r.mapcalc &quot;elev_srtm_30m_filt = if(elev_srtm_30m &lt; 50.0, null(), elev_srtm_30m)&quot;
d.histogram elev_srtm_30m_filt
d.rast elev_srtm_30m_filt
r.fillnulls input=elev_srtm_30m_filt output=elev_srtm_30m_complete tension=20
d.histogram elev_srtm_30m_complete
d.rast elev_srtm_30m_complete
</pre>
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Mitas, L., Mitasova, H., 1999, Spatial Interpolation. In:
      P.Longley, M.F. Goodchild, D.J. Maguire, D.W.Rhind (Eds.), Geographical
      Information Systems: Principles, Techniques, Management and Applications,
      Wiley, pp.481-492</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Mitasova H., Mitas L., Brown W.M., D.P. Gerdes, I.
      Kosinovsky, Baker, T.1995, Modeling spatially and temporally distributed
      phenomena: New methods and tools for GRASS GIS. <i>International Journal
      of</i> <i>GIS</i>, 9 (4), special issue on Integrating GIS and
      Environmental modeling, 433-446.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Mitasova H. and Mitas L. 1993: Interpolation by Regularized
      Spline with Tension: I. Theory and Implementation, <i>Mathematical
      Geology</i> 25, 641-655.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Mitasova H. and Hofierka L. 1993: Interpolation by
      Regularized Spline with Tension: II. Application to Terrain Modeling and
      Surface Geometry Analysis, <i>Mathematical Geology</i> 25, 657-667.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>r.fill.dir,</i> <i>r.mapcalc,</i> <i>r.resamp.bspline,</i>
  <i>v.surf.rst</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Markus Neteler, University of Hannover and Fondazione Edmund Mach
<div>&#x00A0;</div>
Improvement by Hamish Bowman, NZ
<div class="Pp"></div>
<i>Last changed: $Date: 2015-12-31 09:19:29 +0100 (Thu, 31 Dec 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: r.fillnulls source code (history)
<div class="Pp"></div>
Main index | Raster index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
