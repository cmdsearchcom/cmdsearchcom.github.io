<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>RZ(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RZ(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">RZ(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
rx, rb, rz - XMODEM, YMODEM, ZMODEM (Batch) file receive
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>rz</b> [-<b>&#x00A0;+8abeOpqRtTuUvy</b>]
<div>&#x00A0;</div>
<b>rb</b> [-<b>&#x00A0;+abqRtuUvy</b>]
<div>&#x00A0;</div>
<b>rx</b> [-<b>&#x00A0;abceqRtuUv</b>] <i>file</i>
<div>&#x00A0;</div>
[<b>-</b>][<b>v</b>]<b>rzCOMMAND</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program uses error correcting protocols to receive files over a dial-in
  serial port from a variety of programs running under PC-DOS, CP/M,
  <small>Unix,</small> and other operating systems. It is invoked from a shell
  prompt manually, or automatically as a result of an &quot;sz file ...&quot;
  command given to the calling program.
<div style="height: 1.00em;">&#x00A0;</div>
While <i>rz</i> is smart enough to be called from <i>cu(1),</i> very few
  versions of <i>cu(1)</i> are smart enough to allow <i>rz</i> to work properly.
  Unix flavors of Professional-YAM are available for such dial-out application.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Rz</b> (Receive ZMODEM) receives files with the ZMODEM batch protocol.
  Pathnames are supplied by the sending program, and directories are made if
  necessary (and possible). Normally, the &quot;rz&quot; command is
  automatically issued by the calling ZMODEM program, but some defective ZMODEM
  implementations may require starting <i>rz</i> the old fashioned way.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Rb</b> receives file(s) with YMODEM, accepting either standard 128 byte
  sectors or 1024 byte sectors (YAM sb <b>-k</b> option). The user should
  determine when the 1024 byte block length actually improves throughput without
  causing lost data or even system crashes.
<div style="height: 1.00em;">&#x00A0;</div>
If True YMODEM (Omen Technology trademark) file information (file length, etc.)
  is received, the file length controls the number of bytes written to the
  output dataset, and the modify time and file mode (iff non zero) are set
  accordingly.
<div style="height: 1.00em;">&#x00A0;</div>
If no True YMODEM file information is received, slashes in the pathname are
  changed to underscore, and any trailing period in the pathname is eliminated.
  This conversion is useful for files received from CP/M systems. With YMODEM,
  each file name is converted to lower case unless it contains one or more lower
  case letters.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Rx</b> receives a single <i>file</i> with XMODEM or XMODEM-1k protocol. The
  user should determine when the 1024 byte block length actually improves
  throughput without causing problems. The user must supply the file name to
  both sending and receiving programs. Up to 1023 garbage characters may be
  added to the received file.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<b>Rz</b> may be invoked as <b>rzCOMMAND</b> (with an optional leading - as
  generated by login(1)). For each received file, <i>rz</i> will pipe the file
  to ``COMMAND filename'' where filename is the name of the transmitted file
  with the file contents as standard input.
<div style="height: 1.00em;">&#x00A0;</div>
Each file transfer is acknowledged when COMMAND exits with 0 status. A non zero
  exit status terminates transfers.
<div style="height: 1.00em;">&#x00A0;</div>
A typical use for this form is <i>rzrmail</i> which calls rmail(1) to post mail
  to the user specified by the transmitted file name. For example, sending the
  file &quot;caf&quot; from a PC-DOS system to <i>rzrmail</i> on a
  <small>Unix</small> system would result in the contents of the DOS file
  &quot;caf&quot; being mailed to user &quot;caf&quot;.
<div style="height: 1.00em;">&#x00A0;</div>
On some <small>Unix</small> systems, the login directory must contain a link to
  COMMAND as login sets SHELL=rsh which disallows absolute pathnames. If invoked
  with a leading ``v'', <i>rz</i> will be verbose (see <b>v</b> option). The
  following entry works for <small>Unix</small> SYS III/V:
<div>&#x00A0;</div>
rzrmail::5:1::/bin:/usr/local/rzrmail
<div>&#x00A0;</div>
If the SHELL environment variable includes <i>rsh</i> , <i>rbash</i> or
  <i>rksh</i> (restricted shell), <i>rz</i> will not accept absolute pathnames
  or references to a parent directory, will not modify an existing file, and
  removes any files received in error.
<div style="height: 1.00em;">&#x00A0;</div>
If <b>rz</b> is invoked with stdout and stderr to different datasets, Verbose is
  set to 2, causing frame by frame progress reports to stderr. This may be
  disabled with the <b>q</b> option.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The meanings of the available options are:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-+, --append</b></dt>
  <dd class="It-tag">append received data to an existing file (ZMODEM, ASCII
      only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --ascii</b></dt>
  <dd class="It-tag">Convert files to <small>Unix</small> conventions by
      stripping carriage returns and all characters beginning with the first
      Control Z (CP/M end of file).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b, --binary</b></dt>
  <dd class="It-tag">Binary (tell it like it is) file transfer override.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B NUMBER, --bufsize NUMBER</b></dt>
  <dd class="It-tag">Buffer <b>NUMBER</b> bytes before writing to disk. Default
      ist 32768, which should be enough for most situations. If you have a slow
      machine or a bad disk interface or suffer from other hardware problems you
      might want to increase the buffersize. <b>-1</b> or <b>auto</b> use a
      buffer large enough to buffer the whole file. Be careful with this options
      - things normally get worse, not better, if the machine starts to
    swap.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c, --with-crc</b></dt>
  <dd class="It-tag">XMODEM only. Use 16 bit CRC (normally a one byte checksum
      is used).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C, --allow-remote-commands</b></dt>
  <dd class="It-tag">allow remote command execution ( <b>insecure</b> ). This
      allows the sender to execute an arbitrary command through <b>system</b> ()
      or <b>execl</b> (). Default is to disable this feature (?). This option is
      ignored if running in restricted mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D, --null</b></dt>
  <dd class="It-tag">Output file data to /dev/null; for testing. (Unix
    only)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--delay-startup N</b></dt>
  <dd class="It-tag">Wait <b>N</b> seconds before doing anything.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e, --escape</b></dt>
  <dd class="It-tag">Force sender to escape all control characters; normally
      XON, XOFF, DLE, CR-@-CR, and Ctrl-X are escaped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E, --rename</b></dt>
  <dd class="It-tag">Rename incoming file if target filename already exists. The
      new file name will have a dot and a number (0..999) appended.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">give help screen.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m N, --min-bps N</b></dt>
  <dd class="It-tag">Stop transmission if BPS-Rate (Bytes Per Second) falls
      below N for a certain time (see --min-bps-time option).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M N, --min-bps-time</b></dt>
  <dd class="It-tag">Used together with --min-bps. Default is 120
    (seconds).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O, --disable-timeouts</b></dt>
  <dd class="It-tag">Disable read timeout handling code. This makes lrz hang if
      the sender does not send any more, but increases performance (a bit) and
      decreases system load (through reducing the number of system calls by
      about 50 percent).
    <div style="height: 1.00em;">&#x00A0;</div>
    Use this option with care.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--o-sync</b></dt>
  <dd class="It-tag">Open output files in synchronous write mode. This may be
      useful if you experience errors due to lost interrupts if update (or
      bdflush or whoever this daemon is called on your system) writes the
      buffers to the disk.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is ignored and a warning is printed if your systems doesn't
      support O_SYNC.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p, --protect</b></dt>
  <dd class="It-tag">(ZMODEM) Protect: skip file if destination file
    exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q, --quiet</b></dt>
  <dd class="It-tag">Quiet suppresses verbosity.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r, --resume</b></dt>
  <dd class="It-tag">Crash recovery mode. lrz tries to resume interrupted file
      transfers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R, --restricted</b></dt>
  <dd class="It-tag">Enter more restricted mode. lrz will not create directories
      or files with a leading dot if this option is given twice.
    <div style="height: 1.00em;">&#x00A0;</div>
    See <b>SECURITY</b> for mode information about restricted mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s HH:MM, --stop-at HH:MM</b></dt>
  <dd class="It-tag">Stop transmission at <b>HH</b> hours, <b>MM</b> minutes.
      Another variant, using <b>+N</b> instead of <b>HH:MM,</b> stops
      transmission in <b>N</b> seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S, --timesync</b></dt>
  <dd class="It-tag">Request timesync packet from the sender. The sender sends
      its system time, causing lrz to complain about more then 60 seconds
      difference.
    <div style="height: 1.00em;">&#x00A0;</div>
    Lrz tries to set the local system time to the remote time if this option is
      given twice (this fails if lrz is not run by root).
    <div style="height: 1.00em;">&#x00A0;</div>
    This option makes lrz incompatible with certain other ZModems. Don't use it
      unless you know what you are doing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--syslog[=off]</b></dt>
  <dd class="It-tag">turn syslogging on or off. the default is set at configure
      time. This option is ignored if no syslog support is compiled in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t TIM, --timeout TIM</b></dt>
  <dd class="It-tag">Change timeout to <i>TIM</i> tenths of seconds. This is
      ignored if timeout handling is turned of through the <b>O</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--tcp-client ADDRESS:PORT</b></dt>
  <dd class="It-tag">Act as a tcp/ip client: Connect to the given port.
    <div style="height: 1.00em;">&#x00A0;</div>
    See <b>--tcp-server</b> for more information.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--tcp-server</b></dt>
  <dd class="It-tag">Act as a server: Open a socket, print out what to do, wait
      for connection.
    <div style="height: 1.00em;">&#x00A0;</div>
    You will normally not want to use this option as lrzsz is the only zmodem
      which understands what to do (private extension). You might want to use
      this if you have to use zmodem (for which reason whatever), and cannot use
      the <b>--tcp</b> option of <i>lsz</i> (perhaps because your telnet doesn't
      allow to spawn a local program with stdin/stdout connected to the remote
      side).
    <div style="height: 1.00em;">&#x00A0;</div>
    If you use this option you have to start <i>lsz</i> with the <b>--tcp-client
      ADDRESS:PORT</b> option. <i>lrz will print the address and port on
      startup.</i>
    <div style="height: 1.00em;">&#x00A0;</div>
    Use of this option imposes a security risk, somebody else could connect to
      the port in between. See <b>SECURITY</b> for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U, --unrestrict</b></dt>
  <dd class="It-tag">turn off restricted mode (this is not possible if running
      under a restricted shell).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">prints out version number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Verbose causes a list of file names to be appended to
      stderr. More v's generate more output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-wN, --windowsize N</b></dt>
  <dd class="It-tag">Set window size to N.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-X, --xmodem</b></dt>
  <dd class="It-tag">use XMODEM protocol.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y, --overwrite</b></dt>
  <dd class="It-tag">Yes, clobber any existing files with the same name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ymodem</b></dt>
  <dd class="It-tag">use YMODEM protocol.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z, --zmodem</b></dt>
  <dd class="It-tag">use ZMODEM protocol.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SECURITY"><a class="selflink" href="#SECURITY">SECURITY</a></h1>
Contrary to the original ZMODEM lrz defaults to restricted mode. In restricted
  mode lrz will not accept absolute pathnames or references to a parent
  directory, will not modify an existing file, and removes any files received in
  error. Remote command execution is disabled.
<div style="height: 1.00em;">&#x00A0;</div>
To use a more restricted mode set the environment variable
  <b>ZMODEM_RESTRICTED</b> or give the <b>R</b> option. This disables creation
  of subdirectories and invisible files.
<div style="height: 1.00em;">&#x00A0;</div>
Restricted mode may be turned off with the <b>U</b> option, unless lrz runs
  under a restricted shell.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">Use of the</dt>
  <dd class="It-tag"><b>--tcp-client</b> or <b>--tcp-server</b> options imposes
      a security risk, as somebody else could connect to the port before you do
      it, and grab your data. If there's strong demand for a more secure mode i
      might introduce some sort of password challenge.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
lrz uses the following environment variables:
<dl class="Bl-tag">
  <dt class="It-tag"><b>SHELL</b></dt>
  <dd class="It-tag">lrz recognizes a restricted shell if this variable includes
      <i>rsh</i> or <i>rksh</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ZMODEM_RESTRICTED</b></dt>
  <dd class="It-tag">lrz enters the more restricted mode if the variable is
    set.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
(Pro-YAM command)
<div style="margin-left: 5.00ex;"><i>&lt;ALT-2&gt;</i>
<div>&#x00A0;</div>
Pro-YAM Command: <i>sz *.h *.c</i>
<div>&#x00A0;</div>
(This automatically invokes <i>rz</i> on the connected system.)</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
ZMODEM.DOC, YMODEM.DOC, Professional-YAM, crc(omen), sz(omen), usq(omen),
  undos(omen)
<div style="height: 1.00em;">&#x00A0;</div>
Compile time options required for various operating systems are described in the
  source file.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Sending serial data to timesharing minicomputers at sustained high speeds has
  been known to cause lockups, system halts, kernel panics, and occasional
  antisocial behaviour. When experimenting with high speed input to a system,
  consider rebooting the system if the file transfers are not successful,
  especially if the personality of the system appears altered.
<div style="height: 1.00em;">&#x00A0;</div>
The Unix &quot;ulimit&quot; parameter must be set high enough to permit large
  file transfers.
<div style="height: 1.00em;">&#x00A0;</div>
The TTY input buffering on some systems may not allow long blocks or streaming
  input at high speed. You should suspect this problem when you can't send data
  to the Unix system at high speeds using ZMODEM, YMODEM-1k or XMODEM-1k, when
  YMODEM with 128 byte blocks works properly. If the system's tty line handling
  is really broken, the serial port or the entire system may not survive the
  onslaught of long bursts of high speed data.
<div style="height: 1.00em;">&#x00A0;</div>
The DSZ or Pro-YAM <b>zmodem l</b> numeric parameter may be set to a value
  between 64 and 1024 to limit the burst length (&quot;zmodem pl128&quot;).
<div style="height: 1.00em;">&#x00A0;</div>
32 bit CRC code courtesy Gary S. Brown. Directory creation code from John
  Gilmore's PD TAR program.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Calling <i>rz</i> from most versions of cu(1) doesn't work because cu's receive
  process fights <i>rz</i> for characters from the modem.
<div style="height: 1.00em;">&#x00A0;</div>
Programs that do not properly implement the specified file transfer protocol may
  cause <i>sz</i> to &quot;hang&quot; the port for a minute or two. Every
  reported instance of this problem has been corrected by using ZCOMM, Pro-YAM,
  or other program with a correct implementation of the specified protocol.
<div style="height: 1.00em;">&#x00A0;</div>
Many programs claiming to support YMODEM only support XMODEM with 1k blocks, and
  they often don't get that quite right.
<div style="height: 1.00em;">&#x00A0;</div>
Pathnames are restricted to 127 characters. In XMODEM single file mode, the
  pathname given on the command line is still processed as described above. The
  ASCII option&#x00B4;s CR/LF to NL translation merely deletes CR&#x00B4;s;
  undos(omen) performs a more intelligent translation.
<h1 class="Sh" title="Sh" id="VMS_VERSION"><a class="selflink" href="#VMS_VERSION">VMS
  VERSION</a></h1>
The VMS version does not set the file time.
<div style="height: 1.00em;">&#x00A0;</div>
VMS C Standard I/O and RMS may interact to modify file contents unexpectedly.
<div style="height: 1.00em;">&#x00A0;</div>
The VMS version does not support invocation as <b>rzCOMMAND .</b> The current
  VMS version does not support XMODEM, XMODEM-1k, or YMODEM.
<div style="height: 1.00em;">&#x00A0;</div>
According to the VMS documentation, the buffered input routine used on the VMS
  version of <i>rz</i> introduces a delay of up to one second for each protocol
  transaction. This delay may be significant for very short files. Removing the
  &quot;#define BUFREAD&quot; line from rz.c will eliminate this delay at the
  expense of increased CPU utilization.
<div style="height: 1.00em;">&#x00A0;</div>
The VMS version causes DCL to generate a random off the wall error message under
  some error conditions; this is a result of the incompatibility of the VMS
  &quot;exit&quot; function with the Unix/MSDOS standard.
<h1 class="Sh" title="Sh" id="ZMODEM_CAPABILITIES"><a class="selflink" href="#ZMODEM_CAPABILITIES">ZMODEM
  CAPABILITIES</a></h1>
<i>Rz</i> supports incoming ZMODEM binary (-b), ASCII (-a), protect (-p),
  clobber (-y), and append (-+) requests. The default is protect (-p) and binary
  (-b).
<div style="height: 1.00em;">&#x00A0;</div>
The Unix versions support ZMODEM command execution.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
rz.c, crctab.c, rbsb.c, zm.c, zmodem.h Unix source files.
<div style="height: 1.00em;">&#x00A0;</div>
rz.c, crctab.c, vrzsz.c, zm.c, zmodem.h, vmodem.h, vvmodem.c, VMS source
  files.</div>
<table class="foot">
  <tr>
    <td class="foot-date">OMEN</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
