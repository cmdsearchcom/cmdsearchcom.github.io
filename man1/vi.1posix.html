<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:42:11 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VI(1POSIX) POSIX Programmer&rsquo;s Manual
VI(1POSIX)</p>

<p style="margin-top: 1em">PROLOG <br>
This manual page is part of the POSIX Programmer&rsquo;s
Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of <br>
Linux behavior), or the interface may not be implemented on
Linux.</p>

<p style="margin-top: 1em">NAME <br>
vi &acirc; screen-oriented (visual) display editor</p>

<p style="margin-top: 1em">SYNOPSIS <br>
vi [&acirc;rR] [&acirc;c command] [&acirc;t tagstring]
[&acirc;w size] [file...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility shall be provided on systems that both support
the User Portability Utilities option and define the
POSIX2_CHAR_TERM symbol. On other systems it is
optional.</p>

<p style="margin-top: 1em">The vi (visual) utility is a
screen-oriented text editor. Only the open and visual modes
of the editor are described in POSIX.1&acirc;2008; see the
line editor ex for additional edit&acirc; <br>
ing capabilities used in vi. The user can switch back and
forth between vi and ex and execute ex commands from within
vi.</p>

<p style="margin-top: 1em">This reference page uses the
term edit buffer to describe the current working text. No
specific implementation is implied by this term. All editing
changes are performed on the <br>
edit buffer, and no changes to it shall affect any file
until an editor command writes the file.</p>

<p style="margin-top: 1em">When using vi, the terminal
screen acts as a window into the editing buffer. Changes
made to the editing buffer shall be reflected in the screen
display; the position of the cur&acirc; <br>
sor on the screen shall indicate the position within the
editing buffer.</p>

<p style="margin-top: 1em">Certain terminals do not have
all the capabilities necessary to support the complete vi
definition. When these commands cannot be supported on such
terminals, this condition <br>
shall not produce an error message such as &lsquo;&lsquo;not
an editor command&rsquo;&rsquo; or report a syntax error.
The implementation may either accept the commands and
produce results on the screen <br>
that are the result of an unsuccessful attempt to meet the
requirements of this volume of POSIX.1&acirc;2008 or report
an error describing the terminal-related deficiency.</p>

<p style="margin-top: 1em">OPTIONS <br>
The vi utility shall conform to the Base Definitions volume
of POSIX.1&acirc;2008, Section 12.2, Utility Syntax
Guidelines, except that &rsquo;+&rsquo; may be recognized as
an option delimiter as <br>
well as &rsquo;&acirc;&rsquo;.</p>

<p style="margin-top: 1em">The following options shall be
supported:</p>

<p style="margin-top: 1em">&acirc;c command <br>
See the ex command description of the &acirc;c option.</p>

<p style="margin-top: 1em">&acirc;r See the ex command
description of the &acirc;r option.</p>

<p style="margin-top: 1em">&acirc;R See the ex command
description of the &acirc;R option.</p>

<p style="margin-top: 1em">&acirc;t tagstring <br>
See the ex command description of the &acirc;t option.</p>

<p style="margin-top: 1em">&acirc;w size See the ex command
description of the &acirc;w option.</p>

<p style="margin-top: 1em">OPERANDS <br>
See the OPERANDS section of the ex command for a description
of the operands supported by the vi command.</p>

<p style="margin-top: 1em">STDIN <br>
If standard input is not a terminal device, the results are
undefined. The standard input consists of a series of
commands and input text, as described in the EXTENDED
DESCRIP&acirc; <br>
TION section.</p>

<p style="margin-top: 1em">If a read from the standard
input returns an error, or if the editor detects an
end-of-file condition from the standard input, it shall be
equivalent to a SIGHUP asynchronous <br>
event.</p>

<p style="margin-top: 1em">INPUT FILES <br>
See the INPUT FILES section of the ex command for a
description of the input files supported by the vi
command.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
See the ENVIRONMENT VARIABLES section of the ex command for
the environment variables that affect the execution of the
vi command.</p>

<p style="margin-top: 1em">ASYNCHRONOUS EVENTS <br>
See the ASYNCHRONOUS EVENTS section of the ex for the
asynchronous events that affect the execution of the vi
command.</p>

<p style="margin-top: 1em">STDOUT <br>
If standard output is not a terminal device, undefined
results occur.</p>

<p style="margin-top: 1em">Standard output may be used for
writing prompts to the user, for informational messages, and
for writing lines from the file.</p>

<p style="margin-top: 1em">STDERR <br>
If standard output is not a terminal device, undefined
results occur.</p>

<p style="margin-top: 1em">The standard error shall be used
only for diagnostic messages.</p>

<p style="margin-top: 1em">OUTPUT FILES <br>
See the OUTPUT FILES section of the ex command for a
description of the output files supported by the vi
command.</p>

<p style="margin-top: 1em">EXTENDED DESCRIPTION <br>
If the terminal does not have the capabilities necessary to
support an unspecified portion of the vi definition,
implementations shall start initially in ex mode or open
mode. <br>
Otherwise, after initialization, vi shall be in command
mode; text input mode can be entered by one of several
commands used to insert or change text. In text input mode,
&lt;ESC&gt; <br>
can be used to return to command mode; other uses of
&lt;ESC&gt; are described later in this section; see
Terminate Command or Input Mode.</p>

<p style="margin-top: 1em">Initialization in ex and vi <br>
See Initialization in ex and vi for a description of ex and
vi initialization for the vi utility.</p>

<p style="margin-top: 1em">Command Descriptions in vi <br>
The following symbols are used in this reference page to
represent arguments to commands.</p>

<p style="margin-top: 1em">buffer See the description of
buffer in the EXTENDED DESCRIPTION section of the ex
utility; see Command Descriptions in ex.</p>

<p style="margin-top: 1em">In open and visual mode, when a
command synopsis shows both [buffer] and [count] preceding
the command name, they can be specified in either order.</p>

<p style="margin-top: 1em">count A positive integer used as
an optional argument to most commands, either to give a
repeat count or as a size. This argument is optional and
shall default to 1 unless oth&acirc; <br>
erwise specified.</p>

<p style="margin-top: 1em">The Synopsis lines for the vi
commands &lt;control&gt;&acirc;G, &lt;control&gt;&acirc;L,
&lt;control&gt;&acirc;R, &lt;control&gt;&acirc;], %, &amp;,
^, D, m, M, Q, u, U, and ZZ do not have count as an optional
argument. <br>
Regardless, it shall not be an error to specify a count to
these commands, and any specified count shall be
ignored.</p>

<p style="margin-top: 1em">motion An optional trailing
argument used by the !, &lt;, &gt;, c, d, and y commands,
which is used to indicate the region of text that shall be
affected by the command. The motion <br>
can be either one of the command characters repeated or one
of several other vi commands (listed in the following
table). Each of the applicable commands specifies the <br>
region of text matched by repeating the command; each
command that can be used as a motion command specifies the
region of text it affects.</p>

<p style="margin-top: 1em">Commands that take motion
arguments operate on either lines or characters, depending
on the circumstances. When operating on lines, all lines
that fall partially or <br>
wholly within the text region specified for the command
shall be affected. When operating on characters, only the
exact characters in the specified text region shall be <br>
affected. Each motion command specifies this
individually.</p>

<p style="margin-top: 1em">When commands that may be motion
commands are not used as motion commands, they shall set the
current position to the current line and column as
specified.</p>

<p style="margin-top: 1em">The following commands shall be
valid cursor motion commands:</p>

<p style="margin-top: 1em">&lt;apostrophe&gt; ( - j H <br>
&lt;carriage-return&gt; ) $ k L <br>
&lt;comma&gt; [[ % l M <br>
&lt;control&gt;-H ]] _ n N <br>
&lt;control&gt;-N { ; t T <br>
&lt;control&gt;-P } ? w W <br>
&lt;grave-accent&gt; ^ b B <br>
&lt;newline&gt; + e E <br>
&lt;space&gt; | f F <br>
&lt;zero&gt; / h G</p>

<p style="margin-top: 1em">Any count that is specified to a
command that has an associated motion command shall be
applied to the motion command. If a count is applied to both
the command and its <br>
associated motion command, the effect shall be
multiplicative.</p>

<p style="margin-top: 1em">The following symbols are used
in this section to specify locations in the edit buffer:</p>

<p style="margin-top: 1em">current character <br>
The character that is currently indicated by the cursor.</p>

<p style="margin-top: 1em">end of a line <br>
The point located between the last non-&lt;newline&gt; (if
any) and the terminating &lt;newline&gt; of a line. For an
empty line, this location coincides with the beginning of
the <br>
line.</p>

<p style="margin-top: 1em">end of the edit buffer <br>
The location corresponding to the end of the last line in
the edit buffer.</p>

<p style="margin-top: 1em">The following symbols are used
in this section to specify command actions:</p>

<p style="margin-top: 1em">bigword In the POSIX locale, vi
shall recognize four kinds of bigwords:</p>

<p style="margin-top: 1em">1. A maximal sequence of
non-&lt;blank&gt; characters preceded and followed by
&lt;blank&gt; characters or the beginning or end of a line
or the edit buffer</p>

<p style="margin-top: 1em">2. One or more sequential blank
lines</p>

<p style="margin-top: 1em">3. The first character in the
edit buffer</p>

<p style="margin-top: 1em">4. The last non-&lt;newline&gt;
in the edit buffer</p>

<p style="margin-top: 1em">word In the POSIX locale, vi
shall recognize five kinds of words:</p>

<p style="margin-top: 1em">1. A maximal sequence of
letters, digits, and underscores, delimited at both ends
by:</p>

<p style="margin-top: 1em">-- Characters other than
letters, digits, or underscores</p>

<p style="margin-top: 1em">-- The beginning or end of a
line</p>

<p style="margin-top: 1em">-- The beginning or end of the
edit buffer</p>

<p style="margin-top: 1em">2. A maximal sequence of
characters other than letters, digits, underscores, or
&lt;blank&gt; characters, delimited at both ends by:</p>

<p style="margin-top: 1em">-- A letter, digit,
underscore</p>

<p style="margin-top: 1em">-- &lt;blank&gt; characters</p>

<p style="margin-top: 1em">-- The beginning or end of a
line</p>

<p style="margin-top: 1em">-- The beginning or end of the
edit buffer</p>

<p style="margin-top: 1em">3. One or more sequential blank
lines</p>

<p style="margin-top: 1em">4. The first character in the
edit buffer</p>

<p style="margin-top: 1em">5. The last non-&lt;newline&gt;
in the edit buffer</p>

<p style="margin-top: 1em">section boundary <br>
A section boundary is one of the following:</p>

<p style="margin-top: 1em">1. A line whose first character
is a &lt;form-feed&gt;</p>

<p style="margin-top: 1em">2. A line whose first character
is an open curly brace (&rsquo;{&rsquo;)</p>

<p style="margin-top: 1em">3. A line whose first character
is a &lt;period&gt; and whose second and third characters
match a two-character pair in the sections edit option (see
ed)</p>

<p style="margin-top: 1em">4. A line whose first character
is a &lt;period&gt; and whose only other character matches
the first character of a two-character pair in the sections
edit option, where the <br>
second character of the two-character pair is a
&lt;space&gt;</p>

<p style="margin-top: 1em">5. The first line of the edit
buffer</p>

<p style="margin-top: 1em">6. The last line of the edit
buffer if the last line of the edit buffer is empty or if it
is a ]] or } command; otherwise, the last
non-&lt;newline&gt; of the last line of the <br>
edit buffer</p>

<p style="margin-top: 1em">paragraph boundary <br>
A paragraph boundary is one of the following:</p>

<p style="margin-top: 1em">1. A section boundary</p>

<p style="margin-top: 1em">2. A line whose first character
is a &lt;period&gt; and whose second and third characters
match a two-character pair in the paragraphs edit option
(see ed)</p>

<p style="margin-top: 1em">3. A line whose first character
is a &lt;period&gt; and whose only other character matches
the first character of a two-character pair in the
paragraphs edit option, where the <br>
second character of the two-character pair is a
&lt;space&gt;</p>

<p style="margin-top: 1em">4. One or more sequential blank
lines</p>

<p style="margin-top: 1em">remembered search direction <br>
See the description of remembered search direction in
ed.</p>

<p style="margin-top: 1em">sentence boundary <br>
A sentence boundary is one of the following:</p>

<p style="margin-top: 1em">1. A paragraph boundary</p>

<p style="margin-top: 1em">2. The first non-&lt;blank&gt;
that occurs after a paragraph boundary</p>

<p style="margin-top: 1em">3. The first non-&lt;blank&gt;
that occurs after a &lt;period&gt; (&rsquo;.&rsquo;),
&lt;exclamation-mark&gt; (&rsquo;!&rsquo;), or
&lt;question-mark&gt; (&rsquo;?&rsquo;), followed by two
&lt;space&gt; characters or the end of a line; <br>
any number of closing parenthesis (&rsquo;)&rsquo;), closing
brackets (&rsquo;]&rsquo;), double-quote
(&rsquo;&quot;&rsquo;), or single-quote (&lt;apostrophe&gt;)
characters can appear between the punctuation mark <br>
and the two &lt;space&gt; characters or end-of-line</p>

<p style="margin-top: 1em">In the remainder of the
description of the vi utility, the term &lsquo;&lsquo;buffer
line&rsquo;&rsquo; refers to a line in the edit buffer and
the term &lsquo;&lsquo;display line&rsquo;&rsquo; refers to
the line or lines on <br>
the display screen used to display one buffer line. The term
&lsquo;&lsquo;current line&rsquo;&rsquo; refers to a
specific &lsquo;&lsquo;buffer line&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">If there are display lines on
the screen for which there are no corresponding buffer lines
because they correspond to lines that would be after the end
of the file, they shall be <br>
displayed as a single &lt;tilde&gt; (&rsquo;~&rsquo;)
character, plus the terminating &lt;newline&gt;.</p>

<p style="margin-top: 1em">The last line of the screen
shall be used to report errors or display informational
messages. It shall also be used to display the input for
&lsquo;&lsquo;line-oriented commands&rsquo;&rsquo; (/, ?, :,
<br>
and !). When a line-oriented command is executed, the editor
shall enter text input mode on the last line on the screen,
using the respective command characters as prompt
char&acirc; <br>
acters. (In the case of the ! command, the associated motion
shall be entered by the user before the editor enters text
input mode.) The line entered by the user shall be
termi&acirc; <br>
nated by a &lt;newline&gt;, a
non-&lt;control&gt;&acirc;V-escaped &lt;carriage-return&gt;,
or unescaped &lt;ESC&gt;. It is unspecified if more
characters than require a display width minus one column
number <br>
of screen columns can be entered.</p>

<p style="margin-top: 1em">If any command is executed that
overwrites a portion of the screen other than the last line
of the screen (for example, the ex suspend or ! commands),
other than the ex shell <br>
command, the user shall be prompted for a character before
the screen is refreshed and the edit session continued.</p>

<p style="margin-top: 1em">&lt;tab&gt; characters shall
take up the number of columns on the screen set by the
tabstop edit option (see ed), unless there are less than
that number of columns before the display <br>
margin that will cause the displayed line to be folded; in
this case, they shall only take up the number of columns up
to that boundary.</p>

<p style="margin-top: 1em">The cursor shall be placed on
the current line and relative to the current column as
specified by each command described in the following
sections.</p>

<p style="margin-top: 1em">In open mode, if the current
line is not already displayed, then it shall be
displayed.</p>

<p style="margin-top: 1em">In visual mode, if the current
line is not displayed, then the lines that are displayed
shall be expanded, scrolled, or redrawn to cause an
unspecified portion of the current <br>
line to be displayed. If the screen is redrawn, no more than
the number of display lines specified by the value of the
window edit option shall be displayed (unless the current
<br>
line cannot be completely displayed in the number of display
lines specified by the window edit option) and the current
line shall be positioned as close to the center of the <br>
displayed lines as possible (within the constraints imposed
by the distance of the line from the beginning or end of the
edit buffer). If the current line is before the first <br>
line in the display and the screen is scrolled, an
unspecified portion of the current line shall be placed on
the first line of the display. If the current line is after
the last <br>
line in the display and the screen is scrolled, an
unspecified portion of the current line shall be placed on
the last line of the display.</p>

<p style="margin-top: 1em">In visual mode, if a line from
the edit buffer (other than the current line) does not
entirely fit into the lines at the bottom of the display
that are available for its presen&acirc; <br>
tation, the editor may choose not to display any portion of
the line. The lines of the display that do not contain text
from the edit buffer for this reason shall each consist of
<br>
a single &rsquo;@&rsquo; character.</p>

<p style="margin-top: 1em">In visual mode, the editor may
choose for unspecified reasons to not update lines in the
display to correspond to the underlying edit buffer text.
The lines of the display that <br>
do not correctly correspond to text from the edit buffer for
this reason shall consist of a single &rsquo;@&rsquo;
character (plus the terminating &lt;newline&gt;), and the
&lt;control&gt;&acirc;R command <br>
shall cause the editor to update the screen to correctly
represent the edit buffer.</p>

<p style="margin-top: 1em">Open and visual mode commands
that set the current column set it to a column position in
the display, and not a character position in the line. In
this case, however, the column <br>
position in the display shall be calculated for an infinite
width display; for example, the column related to a
character that is part of a line that has been folded onto
addi&acirc; <br>
tional screen lines will be offset from the display line
column where the buffer line begins, not from the beginning
of a particular display line.</p>

<p style="margin-top: 1em">The display cursor column in the
display is based on the value of the current column, as
follows, with each rule applied in turn:</p>

<p style="margin-top: 1em">1. If the current column is
after the last display line column used by the displayed
line, the display cursor column shall be set to the last
display line column occupied by the <br>
last non-&lt;newline&gt; in the current line; otherwise, the
display cursor column shall be set to the current
column.</p>

<p style="margin-top: 1em">2. If the character of which
some portion is displayed in the display line column
specified by the display cursor column requires more than a
single display line column:</p>

<p style="margin-top: 1em">a. If in text input mode, the
display cursor column shall be adjusted to the first display
line column in which any portion of that character is
displayed.</p>

<p style="margin-top: 1em">b. Otherwise, the display cursor
column shall be adjusted to the last display line column in
which any portion of that character is displayed.</p>

<p style="margin-top: 1em">The current column shall not be
changed by these adjustments to the display cursor
column.</p>

<p style="margin-top: 1em">If an error occurs during the
parsing or execution of a vi command:</p>

<p style="margin-top: 1em">* The terminal shall be alerted.
Execution of the vi command shall stop, and the cursor (for
example, the current line and column) shall not be further
modified.</p>

<p style="margin-top: 1em">* Unless otherwise specified by
the following command sections, it is unspecified whether an
informational message shall be displayed.</p>

<p style="margin-top: 1em">* Any partially entered vi
command shall be discarded.</p>

<p style="margin-top: 1em">* If the vi command resulted
from a map expansion, all characters from that map expansion
shall be discarded, except as otherwise specified by the map
command (see ed).</p>

<p style="margin-top: 1em">* If the vi command resulted
from the execution of a buffer, no further commands caused
by the execution of the buffer shall be executed.</p>

<p style="margin-top: 1em">Page Backwards <br>
Synopsis: <br>
[count] &lt;control&gt;-B</p>

<p style="margin-top: 1em">If in open mode, the
&lt;control&gt;&acirc;B command shall behave identically to
the z command. Otherwise, if the current line is the first
line of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">If the window edit option is
less than 3, display a screen where the last line of the
display shall be some portion of:</p>

<p style="margin-top: 1em">(current first line)
&acirc;1</p>

<p style="margin-top: 1em">otherwise, display a screen
where the first line of the display shall be some portion
of:</p>

<p style="margin-top: 1em">(current first line) &acirc;
count x ((window edit option) &acirc;2)</p>

<p style="margin-top: 1em">If this calculation would result
in a line that is before the first line of the edit buffer,
the first line of the display shall display some portion of
the first line of the <br>
edit buffer.</p>

<p style="margin-top: 1em">Current line: If no lines from
the previous display remain on the screen, set to the last
line of the display; otherwise, set to (line &acirc; the
number of new lines displayed on this <br>
screen).</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Scroll Forward <br>
Synopsis: <br>
[count] &lt;control&gt;-D</p>

<p style="margin-top: 1em">If the current line is the last
line of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">If no count is specified, count
shall default to the count associated with the previous
&lt;control&gt;&acirc;D or &lt;control&gt;&acirc;U command.
If there was no previous &lt;control&gt;&acirc;D or
&lt;control&gt;&acirc;U <br>
command, count shall default to the value of the scroll edit
option.</p>

<p style="margin-top: 1em">If in open mode, write lines
starting with the line after the current line, until count
lines or the last line of the file have been written.</p>

<p style="margin-top: 1em">Current line: If the current
line + count is past the last line of the edit buffer, set
to the last line of the edit buffer; otherwise, set to the
current line + count.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Scroll Forward by Line <br>
Synopsis: <br>
[count] &lt;control&gt;-E</p>

<p style="margin-top: 1em">Display the line count lines
after the last line currently displayed.</p>

<p style="margin-top: 1em">If the last line of the edit
buffer is displayed, it shall be an error. If there is no
line count lines after the last line currently displayed,
the last line of the display <br>
shall display some portion of the last line of the edit
buffer.</p>

<p style="margin-top: 1em">Current line: Unchanged if the
previous current character is displayed; otherwise, set to
the first line displayed.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Page Forward <br>
Synopsis: <br>
[count] &lt;control&gt;-F</p>

<p style="margin-top: 1em">If in open mode, the
&lt;control&gt;&acirc;F command shall behave identically to
the z command. Otherwise, if the current line is the last
line of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">If the window edit option is
less than 3, display a screen where the first line of the
display shall be some portion of:</p>

<p style="margin-top: 1em">(current last line) +1</p>

<p style="margin-top: 1em">otherwise, display a screen
where the first line of the display shall be some portion
of:</p>

<p style="margin-top: 1em">(current first line) + count x
((window edit option) &acirc;2)</p>

<p style="margin-top: 1em">If this calculation would result
in a line that is after the last line of the edit buffer,
the last line of the display shall display some portion of
the last line of the edit <br>
buffer.</p>

<p style="margin-top: 1em">Current line: If no lines from
the previous display remain on the screen, set to the first
line of the display; otherwise, set to (line + the number of
new lines displayed on <br>
this screen).</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Display Information <br>
Synopsis: <br>
&lt;control&gt;-G</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex file command.</p>

<p style="margin-top: 1em">Move Cursor Backwards <br>
Synopsis: <br>
[count] &lt;control&gt;-H <br>
[count] h <br>
the current erase character (see stty)</p>

<p style="margin-top: 1em">If there are no characters
before the current character on the current line, it shall
be an error. If there are less than count previous
characters on the current line, count <br>
shall be adjusted to the number of previous characters on
the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the character before the starting cursor up to and including
the countth character before the starting cursor.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to (column
&acirc; the number of columns occupied by count characters
ending with the previous current column).</p>

<p style="margin-top: 1em">Move Down <br>
Synopsis: <br>
[count] &lt;newline&gt; <br>
[count] &lt;control&gt;-J <br>
[count] &lt;control&gt;-M <br>
[count] &lt;control&gt;-N <br>
[count] j <br>
[count] &lt;carriage-return&gt; <br>
[count] +</p>

<p style="margin-top: 1em">If there are less than count
lines after the current line in the edit buffer, it shall be
an error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall include
the starting line and the next count &acirc; 1 lines.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to current
line+ count.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt; for the &lt;carriage-return&gt;,
&lt;control&gt;&acirc;M, and + commands; otherwise,
unchanged.</p>

<p style="margin-top: 1em">Clear and Redisplay <br>
Synopsis: <br>
&lt;control&gt;-L</p>

<p style="margin-top: 1em">If in open mode, clear the
screen and redisplay the current line. Otherwise, clear and
redisplay the screen.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Move Up <br>
Synopsis: <br>
[count] &lt;control&gt;-P <br>
[count] k <br>
[count] &acirc;</p>

<p style="margin-top: 1em">If there are less than count
lines before the current line in the edit buffer, it shall
be an error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall include
the starting line and the previous count lines.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to current
line &acirc; count.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt; for the &acirc; command; otherwise,
unchanged.</p>

<p style="margin-top: 1em">Redraw Screen <br>
Synopsis: <br>
&lt;control&gt;-R</p>

<p style="margin-top: 1em">If any lines have been deleted
from the display screen and flagged as deleted on the
terminal using the @ convention (see the beginning of the
EXTENDED DESCRIPTION section), they <br>
shall be redisplayed to match the contents of the edit
buffer.</p>

<p style="margin-top: 1em">It is unspecified whether lines
flagged with @ because they do not fit on the terminal
display shall be affected.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Scroll Backward <br>
Synopsis: <br>
[count] &lt;control&gt;-U</p>

<p style="margin-top: 1em">If the current line is the first
line of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">If no count is specified, count
shall default to the count associated with the previous
&lt;control&gt;&acirc;D or &lt;control&gt;&acirc;U command.
If there was no previous &lt;control&gt;&acirc;D or
&lt;control&gt;&acirc;U <br>
command, count shall default to the value of the scroll edit
option.</p>

<p style="margin-top: 1em">Current line: If count is
greater than the current line, set to 1; otherwise, set to
the current line &acirc; count.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Scroll Backward by Line <br>
Synopsis: <br>
[count] &lt;control&gt;-Y</p>

<p style="margin-top: 1em">Display the line count lines
before the first line currently displayed.</p>

<p style="margin-top: 1em">If the current line is the first
line of the edit buffer, it shall be an error. If this
calculation would result in a line that is before the first
line of the edit buffer, the <br>
first line of the display shall display some portion of the
first line of the edit buffer.</p>

<p style="margin-top: 1em">Current line: Unchanged if the
previous current character is displayed; otherwise, set to
the first line displayed.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Edit the Alternate File <br>
Synopsis: <br>
&lt;control&gt;-^</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex edit command, with the alternate pathname as its
argument.</p>

<p style="margin-top: 1em">Terminate Command or Input Mode
<br>
Synopsis: <br>
&lt;ESC&gt;</p>

<p style="margin-top: 1em">If a partial vi command (as
defined by at least one, non-count character) has been
entered, discard the count and the command character(s).</p>

<p style="margin-top: 1em">Otherwise, if no command
characters have been entered, and the &lt;ESC&gt; was the
result of a map expansion, the terminal shall be alerted and
the &lt;ESC&gt; character shall be discarded, <br>
but it shall not be an error.</p>

<p style="margin-top: 1em">Otherwise, it shall be an
error.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Search for tagstring <br>
Synopsis: <br>
&lt;control&gt;-]</p>

<p style="margin-top: 1em">If the current character is not
a word or &lt;blank&gt;, it shall be an error.</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex tag command, with the argument to that command
defined as follows.</p>

<p style="margin-top: 1em">If the current character is a
&lt;blank&gt;:</p>

<p style="margin-top: 1em">1. Skip all &lt;blank&gt;
characters after the cursor up to the end of the line.</p>

<p style="margin-top: 1em">2. If the end of the line is
reached, it shall be an error.</p>

<p style="margin-top: 1em">Then, the argument to the ex tag
command shall be the current character and all subsequent
characters, up to the first non-word character or the end of
the line.</p>

<p style="margin-top: 1em">Move Cursor Forward <br>
Synopsis: <br>
[count] &lt;space&gt; <br>
[count] l (ell)</p>

<p style="margin-top: 1em">If there are less than count
non-&lt;newline&gt; characters after the cursor on the
current line, count shall be adjusted to the number of
non-&lt;newline&gt; characters after the cursor on <br>
the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the current or countth
character after the cursor is the last non-&lt;newline&gt;
in the line, the text region shall be comprised of the
current character up to and including <br>
the last non-&lt;newline&gt; in the line. Otherwise, the
text region shall be from the current character up to, but
not including, the countth character after the cursor.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">If there are no
non-&lt;newline&gt; characters after the current character
on the current line, it shall be an error.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column that displays any portion of the countth character
after the current character.</p>

<p style="margin-top: 1em">Replace Text with Results from
Shell Command <br>
Synopsis: <br>
[count] ! motion shell-commands &lt;newline&gt;</p>

<p style="margin-top: 1em">If the motion command is the !
command repeated:</p>

<p style="margin-top: 1em">1. If the edit buffer is empty
and no count was supplied, the command shall be the
equivalent of the ex :read ! command, with the text input,
and no text shall be copied to any <br>
buffer.</p>

<p style="margin-top: 1em">2. Otherwise:</p>

<p style="margin-top: 1em">a. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">b. The text region shall be from
the current line up to and including the next count &acirc;1
lines.</p>

<p style="margin-top: 1em">Otherwise, the text region shall
be the lines in which any character of the text region
specified by the motion command appear.</p>

<p style="margin-top: 1em">Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex ! command for the specified lines.</p>

<p style="margin-top: 1em">Move Cursor to End-of-Line <br>
Synopsis: <br>
[count] $</p>

<p style="margin-top: 1em">It shall be an error if there
are less than (count &acirc;1) lines after the current line
in the edit buffer.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If count is 1:</p>

<p style="margin-top: 1em">a. It shall be an error if the
line is empty.</p>

<p style="margin-top: 1em">b. Otherwise, the text region
shall consist of all characters from the starting cursor to
the last non-&lt;newline&gt; in the line, inclusive, and any
text copied to a buffer <br>
shall be in character mode.</p>

<p style="margin-top: 1em">2. Otherwise, if the starting
cursor position is at or before the first non-&lt;blank&gt;
in the line, the text region shall consist of the current
and the next count &acirc;1 lines, and <br>
any text saved to a buffer shall be in line mode.</p>

<p style="margin-top: 1em">3. Otherwise, the text region
shall consist of all characters from the starting cursor to
the last non-&lt;newline&gt; in the line that is count
&acirc;1 lines forward from the current <br>
line, and any text copied to a buffer shall be in character
mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the current
line + count&acirc;1.</p>

<p style="margin-top: 1em">Current column: The current
column is set to the last display line column of the last
non-&lt;newline&gt; in the line, or column position 1 if the
line is empty.</p>

<p style="margin-top: 1em">The current column shall be
adjusted to be on the last display line column of the last
non-&lt;newline&gt; of the current line as subsequent
commands change the current line, until a <br>
command changes the current column.</p>

<p style="margin-top: 1em">Move to Matching Character <br>
Synopsis: <br>
%</p>

<p style="margin-top: 1em">If the character at the current
position is not a parenthesis, bracket, or curly brace,
search forward in the line to the first one of those
characters. If no such character is <br>
found, it shall be an error.</p>

<p style="margin-top: 1em">The matching character shall be
the parenthesis, bracket, or curly brace matching the
parenthesis, bracket, or curly brace, respectively, that was
at the current position or that <br>
was found on the current line.</p>

<p style="margin-top: 1em">Matching shall be determined as
follows, for an open parenthesis:</p>

<p style="margin-top: 1em">1. Set a counter to 1.</p>

<p style="margin-top: 1em">2. Search forwards until a
parenthesis is found or the end of the edit buffer is
reached.</p>

<p style="margin-top: 1em">3. If the end of the edit buffer
is reached, it shall be an error.</p>

<p style="margin-top: 1em">4. If an open parenthesis is
found, increment the counter by 1.</p>

<p style="margin-top: 1em">5. If a close parenthesis is
found, decrement the counter by 1.</p>

<p style="margin-top: 1em">6. If the counter is zero, the
current character is the matching character.</p>

<p style="margin-top: 1em">Matching for a close parenthesis
shall be equivalent, except that the search shall be
backwards, from the starting character to the beginning of
the buffer, a close parenthesis <br>
shall increment the counter by 1, and an open parenthesis
shall decrement the counter by 1.</p>

<p style="margin-top: 1em">Matching for brackets and curly
braces shall be equivalent, except that searching shall be
done for open and close brackets or open and close curly
braces. It is implementation- <br>
defined whether other characters are searched for and
matched as well.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the matching cursor was
after the starting cursor in the edit buffer, and the
starting cursor position was at or before the first
non-&lt;blank&gt; non-&lt;newline&gt; in the starting <br>
line, and the matching cursor position was at or after the
last non-&lt;blank&gt; non-&lt;newline&gt; in the matching
line, the text region shall consist of the current line to
the <br>
matching line, inclusive, and any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">2. If the matching cursor was
before the starting cursor in the edit buffer, and the
starting cursor position was at or after the last
non-&lt;blank&gt; non-&lt;newline&gt; in the starting <br>
line, and the matching cursor position was at or before the
first non-&lt;blank&gt; non-&lt;newline&gt; in the matching
line, the text region shall consist of the current line to
the <br>
matching line, inclusive, and any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">3. Otherwise, the text region
shall consist of the starting character to the matching
character, inclusive, and any text copied to a buffer shall
be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
where the matching character is located.</p>

<p style="margin-top: 1em">Current column: Set to the last
column where any portion of the matching character is
displayed.</p>

<p style="margin-top: 1em">Repeat Substitution <br>
Synopsis: <br>
&amp;</p>

<p style="margin-top: 1em">Repeat the previous substitution
command. This command shall be equivalent to the ex &amp;
command with the current line as its addresses, and without
options, count, or flags.</p>

<p style="margin-top: 1em">Return to Previous Context at
Beginning of Line <br>
Synopsis: <br>
&rsquo; character</p>

<p style="margin-top: 1em">It shall be an error if there is
no line in the edit buffer marked by character.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the starting cursor is
after the marked cursor, then the locations of the starting
cursor and the marked cursor in the edit buffer shall be
logically swapped.</p>

<p style="margin-top: 1em">2. The text region shall consist
of the starting line up to and including the marked line,
and any text copied to a buffer shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
referenced by the mark.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Return to Previous Context <br>
Synopsis: <br>
&lsquo; character</p>

<p style="margin-top: 1em">It shall be an error if the
marked line is no longer in the edit buffer. If the marked
line no longer contains a character in the saved numbered
character position, it shall be <br>
as if the marked position is the first
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. It shall be an error if the
marked cursor references the same character in the edit
buffer as the starting cursor.</p>

<p style="margin-top: 1em">2. If the starting cursor is
after the marked cursor, then the locations of the starting
cursor and the marked cursor in the edit buffer shall be
logically swapped.</p>

<p style="margin-top: 1em">3. If the starting line is empty
or the starting cursor is at or before the first
non-&lt;blank&gt; non-&lt;newline&gt; of the starting line,
and the marked cursor line is empty or the <br>
marked cursor references the first character of the marked
cursor line, the text region shall consist of all lines
containing characters from the starting cursor to the line
<br>
before the marked cursor line, inclusive, and any text
copied to a buffer shall be in line mode.</p>

<p style="margin-top: 1em">4. Otherwise, if the marked
cursor line is empty or the marked cursor references a
character at or before the first non-&lt;blank&gt;
non-&lt;newline&gt; of the marked cursor line, the <br>
region of text shall be from the starting cursor to the last
non-&lt;newline&gt; of the line before the marked cursor
line, inclusive, and any text copied to a buffer shall be in
<br>
character mode.</p>

<p style="margin-top: 1em">5. Otherwise, the region of text
shall be from the starting cursor (inclusive), to the marked
cursor (exclusive), and any text copied to a buffer shall be
in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
referenced by the mark.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the character referenced by
the mark is displayed.</p>

<p style="margin-top: 1em">Return to Previous Section <br>
Synopsis: <br>
[count] [[</p>

<p style="margin-top: 1em">Move the cursor backward through
the edit buffer to the first character of the previous
section boundary, count times.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the starting cursor was at
the first character of the starting line or the starting
line was empty, and the first character of the boundary was
the first character of the <br>
boundary line, the text region shall consist of the current
line up to and including the line where the countth next
boundary starts, and any text copied to a buffer shall be
<br>
in line mode.</p>

<p style="margin-top: 1em">2. If the boundary was the last
line of the edit buffer or the last non-&lt;newline&gt; of
the last line of the edit buffer, the text region shall
consist of the last character in the <br>
edit buffer up to and including the starting character, and
any text saved to a buffer shall be in character mode.</p>

<p style="margin-top: 1em">3. Otherwise, the text region
shall consist of the starting character up to but not
including the first character in the countth next boundary,
and any text copied to a buffer <br>
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
where the countth next boundary in the edit buffer
starts.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the first character of the
countth next boundary is displayed, or column position 1 if
the line is empty.</p>

<p style="margin-top: 1em">Move to Next Section <br>
Synopsis: <br>
[count] ]]</p>

<p style="margin-top: 1em">Move the cursor forward through
the edit buffer to the first character of the next section
boundary, count times.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the starting cursor was at
the first character of the starting line or the starting
line was empty, and the first character of the boundary was
the first character of the <br>
boundary line, the text region shall consist of the current
line up to and including the line where the countth previous
boundary starts, and any text copied to a buffer <br>
shall be in line mode.</p>

<p style="margin-top: 1em">2. If the boundary was the first
line of the edit buffer, the text region shall consist of
the first character in the edit buffer up to but not
including the starting character, <br>
and any text copied to a buffer shall be in character
mode.</p>

<p style="margin-top: 1em">3. Otherwise, the text region
shall consist of the first character in the countth previous
section boundary up to but not including the starting
character, and any text copied <br>
to a buffer shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
where the countth previous boundary in the edit buffer
starts.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the first character of the
countth previous boundary is displayed, or column position 1
if the line is empty.</p>

<p style="margin-top: 1em">Move to First Non-&lt;blank&gt;
Position on Current Line <br>
Synopsis: <br>
^</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the line has no
non-&lt;blank&gt; non-&lt;newline&gt; characters, or if the
cursor is at the first non-&lt;blank&gt; non-&lt;newline&gt;
of the line, it shall be an error.</p>

<p style="margin-top: 1em">2. If the cursor is before the
first non-&lt;blank&gt; non-&lt;newline&gt; of the line, the
text region shall be comprised of the current character, up
to, but not including, the first <br>
non-&lt;blank&gt; non-&lt;newline&gt; of the line.</p>

<p style="margin-top: 1em">3. If the cursor is after the
first non-&lt;blank&gt; non-&lt;newline&gt; of the line, the
text region shall be from the character before the starting
cursor up to and including the first <br>
non-&lt;blank&gt; non-&lt;newline&gt; of the line.</p>

<p style="margin-top: 1em">4. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Current and Line Above <br>
Synopsis: <br>
[count] _</p>

<p style="margin-top: 1em">If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If count is less than 2, the
text region shall be the current line.</p>

<p style="margin-top: 1em">2. Otherwise, the text region
shall include the starting line and the next count &acirc;1
lines.</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to current
line + count &acirc;1.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Move Back to Beginning of
Sentence <br>
Synopsis: <br>
[count] (</p>

<p style="margin-top: 1em">Move backward to the beginning
of a sentence. This command shall be equivalent to the [[
command, with the exception that sentence boundaries shall
be used instead of section <br>
boundaries.</p>

<p style="margin-top: 1em">Move Forward to Beginning of
Sentence <br>
Synopsis: <br>
[count] )</p>

<p style="margin-top: 1em">Move forward to the beginning of
a sentence. This command shall be equivalent to the ]]
command, with the exception that sentence boundaries shall
be used instead of section <br>
boundaries.</p>

<p style="margin-top: 1em">Move Back to Preceding Paragraph
<br>
Synopsis: <br>
[count] {</p>

<p style="margin-top: 1em">Move back to the beginning of
the preceding paragraph. This command shall be equivalent to
the [[ command, with the exception that paragraph boundaries
shall be used instead of <br>
section boundaries.</p>

<p style="margin-top: 1em">Move Forward to Next Paragraph
<br>
Synopsis: <br>
[count] }</p>

<p style="margin-top: 1em">Move forward to the beginning of
the next paragraph. This command shall be equivalent to the
]] command, with the exception that paragraph boundaries
shall be used instead of <br>
section boundaries.</p>

<p style="margin-top: 1em">Move to Specific Column Position
<br>
Synopsis: <br>
[count] |</p>

<p style="margin-top: 1em">For the purposes of this
command, lines that are too long for the current display and
that have been folded shall be treated as having a single,
1&acirc;based, number of columns.</p>

<p style="margin-top: 1em">If there are less than count
columns in which characters from the current line are
displayed on the screen, count shall be adjusted to be the
last column in which any portion of <br>
the line is displayed on the screen.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the line is empty, or the
cursor character is the same as the character on the countth
column of the line, it shall be an error.</p>

<p style="margin-top: 1em">2. If the cursor is before the
countth column of the line, the text region shall be
comprised of the current character, up to but not including
the character on the countth col&acirc; <br>
umn of the line.</p>

<p style="margin-top: 1em">3. If the cursor is after the
countth column of the line, the text region shall be from
the character before the starting cursor up to and including
the character on the countth <br>
column of the line.</p>

<p style="margin-top: 1em">4. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the character that is
displayed in the count column of the line is displayed.</p>

<p style="margin-top: 1em">Reverse Find Character <br>
Synopsis: <br>
[count] ,</p>

<p style="margin-top: 1em">If the last F, f, T, or t
command was F, f, T, or t, this command shall be equivalent
to an f, F, t, or T command, respectively, with the
specified count and the same search <br>
character.</p>

<p style="margin-top: 1em">If there was no previous F, f,
T, or t command, it shall be an error.</p>

<p style="margin-top: 1em">Repeat <br>
Synopsis: <br>
[count] .</p>

<p style="margin-top: 1em">Repeat the last !, &lt;, &gt;,
A, C, D, I, J, O, P, R, S, X, Y, a, c, d, i, o, p, r, s, x,
y, or ~ command. It shall be an error if none of these
commands have been executed. Commands <br>
(other than commands that enter text input mode) executed as
a result of map expansions, shall not change the value of
the last repeatable command.</p>

<p style="margin-top: 1em">Repeated commands with
associated motion commands shall repeat the motion command
as well; however, any specified count shall replace the
count(s) that were originally specified <br>
to the repeated command or its associated motion
command.</p>

<p style="margin-top: 1em">If the motion component of the
repeated command is f, F, t, or T, the repeated command
shall not set the remembered search character for the ; and
, commands.</p>

<p style="margin-top: 1em">If the repeated command is p or
P, and the buffer associated with that command was a numeric
buffer named with a number less than 9, the buffer
associated with the repeated com&acirc; <br>
mand shall be set to be the buffer named by the name of the
previous buffer logically incremented by 1.</p>

<p style="margin-top: 1em">If the repeated character is a
text input command, the input text associated with that
command is repeated literally:</p>

<p style="margin-top: 1em">* Input characters are neither
macro or abbreviation-expanded.</p>

<p style="margin-top: 1em">* Input characters are not
interpreted in any special way with the exception that
&lt;newline&gt;, &lt;carriage-return&gt;, and
&lt;control&gt;&acirc;T behave as described in Input Mode
Commands in <br>
vi.</p>

<p style="margin-top: 1em">Current line: Set as described
for the repeated command.</p>

<p style="margin-top: 1em">Current column: Set as described
for the repeated command.</p>

<p style="margin-top: 1em">Find Regular Expression <br>
Synopsis: <br>
/</p>

<p style="margin-top: 1em">If the input line contains no
non-&lt;newline&gt; characters, it shall be equivalent to a
line containing only the last regular expression
encountered. The enhanced regular expressions <br>
supported by vi are described in Regular Expressions in
ex.</p>

<p style="margin-top: 1em">Otherwise, the line shall be
interpreted as one or more regular expressions, optionally
followed by an address offset or a vi z command.</p>

<p style="margin-top: 1em">If the regular expression is not
the last regular expression on the line, or if a line offset
or z command is specified, the regular expression shall be
terminated by an <br>
unescaped &rsquo;/&rsquo; character, which shall not be used
as part of the regular expression. If the regular expression
is not the first regular expression on the line, it shall be
pre&acirc; <br>
ceded by zero or more &lt;blank&gt; characters, a
&lt;semicolon&gt;, zero or more &lt;blank&gt; characters,
and a leading &rsquo;/&rsquo; character, which shall not be
interpreted as part of the regular <br>
expression. It shall be an error to precede any regular
expression with any characters other than these.</p>

<p style="margin-top: 1em">Each search shall begin from the
character after the first character of the last match (or,
if it is the first search, after the cursor). If the
wrapscan edit option is set, the <br>
search shall continue to the character before the starting
cursor character; otherwise, to the end of the edit buffer.
It shall be an error if any search fails to find a match,
<br>
and an informational message to this effect shall be
displayed.</p>

<p style="margin-top: 1em">An optional address offset (see
Addressing in ex) can be specified after the last regular
expression by including a trailing &rsquo;/&rsquo; character
after the regular expression and speci&acirc; <br>
fying the address offset. This offset will be from the line
containing the match for the last regular expression
specified. It shall be an error if the line offset would
indicate <br>
a line address less than 1 or greater than the last line in
the edit buffer. An address offset of zero shall be
supported. It shall be an error to follow the address offset
with <br>
any other characters than &lt;blank&gt; characters.</p>

<p style="margin-top: 1em">If not used as a motion command,
an optional z command (see Redraw Window) can be specified
after the last regular expression by including a trailing
&rsquo;/&rsquo; character after the reg&acirc; <br>
ular expression, zero or more &lt;blank&gt; characters, a
&rsquo;z&rsquo;, zero or more &lt;blank&gt; characters, an
optional new window edit option value, zero or more
&lt;blank&gt; characters, and a loca&acirc; <br>
tion character. The effect shall be as if the z command was
executed after the / command. It shall be an error to follow
the z command with any other characters than &lt;blank&gt;
<br>
characters.</p>

<p style="margin-top: 1em">The remembered search direction
shall be set to forward.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. It shall be an error if the
last match references the same character in the edit buffer
as the starting cursor.</p>

<p style="margin-top: 1em">2. If any address offset is
specified, the last match shall be adjusted by the specified
offset as described previously.</p>

<p style="margin-top: 1em">3. If the starting cursor is
after the last match, then the locations of the starting
cursor and the last match in the edit buffer shall be
logically swapped.</p>

<p style="margin-top: 1em">4. If any address offset is
specified, the text region shall consist of all lines
containing characters from the starting cursor to the last
match line, inclusive, and any text <br>
copied to a buffer shall be in line mode.</p>

<p style="margin-top: 1em">5. Otherwise, if the starting
line is empty or the starting cursor is at or before the
first non-&lt;blank&gt; non-&lt;newline&gt; of the starting
line, and the last match line is empty or <br>
the last match starts at the first character of the last
match line, the text region shall consist of all lines
containing characters from the starting cursor to the line
<br>
before the last match line, inclusive, and any text copied
to a buffer shall be in line mode.</p>

<p style="margin-top: 1em">6. Otherwise, if the last match
line is empty or the last match begins at a character at or
before the first non-&lt;blank&gt; non-&lt;newline&gt; of
the last match line, the region of text <br>
shall be from the current cursor to the last
non-&lt;newline&gt; of the line before the last match line,
inclusive, and any text copied to a buffer shall be in
character mode.</p>

<p style="margin-top: 1em">7. Otherwise, the region of text
shall be from the current cursor (inclusive), to the first
character of the last match (exclusive), and any text copied
to a buffer shall be in <br>
character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: If a match is
found, set to the last matched line plus the address offset,
if any; otherwise, unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column on which any portion of the first character in the
last matched string is displayed, if a match is found;
otherwise, unchanged.</p>

<p style="margin-top: 1em">Move to First Character in Line
<br>
Synopsis: <br>
0 (zero)</p>

<p style="margin-top: 1em">Move to the first character on
the current line. The character &rsquo;0&rsquo; shall not be
interpreted as a command if it is immediately preceded by a
digit.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the cursor character is
the first character in the line, it shall be an error.</p>

<p style="margin-top: 1em">2. The text region shall be from
the character before the cursor character up to and
including the first character in the line.</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: The last column
in which any portion of the first character in the line is
displayed, or if the line is empty, unchanged.</p>

<p style="margin-top: 1em">Execute an ex Command <br>
Synopsis: <br>
:</p>

<p style="margin-top: 1em">Execute one or more ex
commands.</p>

<p style="margin-top: 1em">If any portion of the screen
other than the last line of the screen was overwritten by
any ex command (except shell), vi shall display a message
indicating that it is waiting for <br>
an input from the user, and shall then read a character.
This action may also be taken for other, unspecified
reasons.</p>

<p style="margin-top: 1em">If the next character entered is
a &rsquo;:&rsquo;, another ex command shall be accepted and
executed. Any other character shall cause the screen to be
refreshed and vi shall return to com&acirc; <br>
mand mode.</p>

<p style="margin-top: 1em">Current line: As specified for
the ex command.</p>

<p style="margin-top: 1em">Current column: As specified for
the ex command.</p>

<p style="margin-top: 1em">Repeat Find <br>
Synopsis: <br>
[count] ;</p>

<p style="margin-top: 1em">This command shall be equivalent
to the last F, f, T, or t command, with the specified count,
and with the same search character used for the last F, f,
T, or t command. If there <br>
was no previous F, f, T, or t command, it shall be an
error.</p>

<p style="margin-top: 1em">Shift Left <br>
Synopsis: <br>
[count] &lt; motion</p>

<p style="margin-top: 1em">If the motion command is the
&lt; command repeated:</p>

<p style="margin-top: 1em">1. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">2. The text region shall be from
the current line, up to and including the next count
&acirc;1 lines.</p>

<p style="margin-top: 1em">Shift any line in the text
region specified by the count and motion command one
shiftwidth (see the ex shiftwidth option) toward the start
of the line, as described by the ex &lt; <br>
command. The unshifted lines shall be copied to the unnamed
buffer in line mode.</p>

<p style="margin-top: 1em">Current line: If the motion was
from the current cursor position toward the end of the edit
buffer, unchanged. Otherwise, set to the first line in the
edit buffer that is part of <br>
the text region specified by the motion command.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Shift Right <br>
Synopsis: <br>
[count] &gt; motion</p>

<p style="margin-top: 1em">If the motion command is the
&gt; command repeated:</p>

<p style="margin-top: 1em">1. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">2. The text region shall be from
the current line, up to and including the next count
&acirc;1 lines.</p>

<p style="margin-top: 1em">Shift any line with characters
in the text region specified by the count and motion command
one shiftwidth (see the ex shiftwidth option) away from the
start of the line, as <br>
described by the ex &gt; command. The unshifted lines shall
be copied into the unnamed buffer in line mode.</p>

<p style="margin-top: 1em">Current line: If the motion was
from the current cursor position toward the end of the edit
buffer, unchanged. Otherwise, set to the first line in the
edit buffer that is part of <br>
the text region specified by the motion command.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Scan Backwards for Regular
Expression <br>
Synopsis: <br>
?</p>

<p style="margin-top: 1em">Scan backwards; the ? command
shall be equivalent to the / command (see Find Regular
Expression) with the following exceptions:</p>

<p style="margin-top: 1em">1. The input prompt shall be a
&rsquo;?&rsquo;.</p>

<p style="margin-top: 1em">2. Each search shall begin from
the character before the first character of the last match
(or, if it is the first search, the character before the
cursor character).</p>

<p style="margin-top: 1em">3. The search direction shall be
from the cursor toward the beginning of the edit buffer, and
the wrapscan edit option shall affect whether the search
wraps to the end of the <br>
edit buffer and continues.</p>

<p style="margin-top: 1em">4. The remembered search
direction shall be set to backward.</p>

<p style="margin-top: 1em">Execute <br>
Synopsis: <br>
@buffer</p>

<p style="margin-top: 1em">If the buffer is specified as @,
the last buffer executed shall be used. If no previous
buffer has been executed, it shall be an error.</p>

<p style="margin-top: 1em">Behave as if the contents of the
named buffer were entered as standard input. After each line
of a line-mode buffer, and all but the last line of a
character mode buffer, behave <br>
as if a &lt;newline&gt; were entered as standard input.</p>

<p style="margin-top: 1em">If an error occurs during this
process, an error message shall be written, and no more
characters resulting from the execution of this command
shall be processed.</p>

<p style="margin-top: 1em">If a count is specified, behave
as if that count were entered as user input before the
characters from the @ buffer were entered.</p>

<p style="margin-top: 1em">Current line: As specified for
the individual commands.</p>

<p style="margin-top: 1em">Current column: As specified for
the individual commands.</p>

<p style="margin-top: 1em">Reverse Case <br>
Synopsis: <br>
[count] ~</p>

<p style="margin-top: 1em">Reverse the case of the current
character and the next count &acirc;1 characters, such that
lowercase characters that have uppercase counterparts shall
be changed to uppercase charac&acirc; <br>
ters, and uppercase characters that have lowercase
counterparts shall be changed to lowercase characters, as
prescribed by the current locale. No other characters shall
be <br>
affected by this command.</p>

<p style="margin-top: 1em">If there are less than count
&acirc;1 characters after the cursor in the edit buffer,
count shall be adjusted to the number of characters after
the cursor in the edit buffer minus 1.</p>

<p style="margin-top: 1em">For the purposes of this
command, the next character after the last
non-&lt;newline&gt; on the line shall be the next character
in the edit buffer.</p>

<p style="margin-top: 1em">Current line: Set to the line
including the (count&acirc;1)th character after the
cursor.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the (count&acirc;1)th
character after the cursor is displayed.</p>

<p style="margin-top: 1em">Append <br>
Synopsis: <br>
[count] a</p>

<p style="margin-top: 1em">Enter text input mode after the
current cursor position. No characters already in the edit
buffer shall be affected by this command. A count shall
cause the input text to be <br>
appended count &acirc;1 more times to the end of the
input.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Append at End-of-Line <br>
Synopsis: <br>
[count] A</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command:</p>

<p style="margin-top: 1em">$ [ count ] a</p>

<p style="margin-top: 1em">(see Append).</p>

<p style="margin-top: 1em">Move Backward to Preceding Word
<br>
Synopsis: <br>
[count] b</p>

<p style="margin-top: 1em">With the exception that words
are used as the delimiter instead of bigwords, this command
shall be equivalent to the B command.</p>

<p style="margin-top: 1em">Move Backward to Preceding
Bigword <br>
Synopsis: <br>
[count] B</p>

<p style="margin-top: 1em">If the edit buffer is empty or
the cursor is on the first character of the edit buffer, it
shall be an error. If less than count bigwords begin between
the cursor and the start <br>
of the edit buffer, count shall be adjusted to the number of
bigword beginnings between the cursor and the start of the
edit buffer.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the first character of the countth previous bigword
beginning up to but not including the cursor character.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
containing the current column.</p>

<p style="margin-top: 1em">Current column: Set to the last
column upon which any part of the first character of the
countth previous bigword is displayed.</p>

<p style="margin-top: 1em">Change <br>
Synopsis: <br>
[buffer][count] c motion</p>

<p style="margin-top: 1em">If the motion command is the c
command repeated:</p>

<p style="margin-top: 1em">1. The buffer text shall be in
line mode.</p>

<p style="margin-top: 1em">2. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">3. The text region shall be from
the current line up to and including the next count &acirc;1
lines.</p>

<p style="margin-top: 1em">Otherwise, the buffer text mode
and text region shall be as specified by the motion
command.</p>

<p style="margin-top: 1em">The replaced text shall be
copied into buffer, if specified, and into the unnamed
buffer. If the text to be replaced contains characters from
more than a single line, or the buf&acirc; <br>
fer text is in line mode, the replaced text shall be copied
into the numeric buffers as well.</p>

<p style="margin-top: 1em">If the buffer text is in line
mode:</p>

<p style="margin-top: 1em">1. Any lines that contain
characters in the region shall be deleted, and the editor
shall enter text input mode at the beginning of a new line
which shall replace the first line <br>
deleted.</p>

<p style="margin-top: 1em">2. If the autoindent edit option
is set, autoindent characters equal to the autoindent
characters on the first line deleted shall be inserted as if
entered by the user.</p>

<p style="margin-top: 1em">Otherwise, if characters from
more than one line are in the region of text:</p>

<p style="margin-top: 1em">1. The text shall be
deleted.</p>

<p style="margin-top: 1em">2. Any text remaining in the
last line in the text region shall be appended to the first
line in the region, and the last line in the region shall be
deleted.</p>

<p style="margin-top: 1em">3. The editor shall enter text
input mode after the last character not deleted from the
first line in the text region, if any; otherwise, on the
first column of the first line <br>
in the region.</p>

<p style="margin-top: 1em">Otherwise:</p>

<p style="margin-top: 1em">1. If the glyph for
&rsquo;$&rsquo; is smaller than the region, the end of the
region shall be marked with a &rsquo;$&rsquo;.</p>

<p style="margin-top: 1em">2. The editor shall enter text
input mode, overwriting the region of text.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Change to End-of-Line <br>
Synopsis: <br>
[buffer][count] C</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command:</p>

<p style="margin-top: 1em">[buffer][count] c$</p>

<p style="margin-top: 1em">See the c command.</p>

<p style="margin-top: 1em">Delete <br>
Synopsis: <br>
[buffer][count] d motion</p>

<p style="margin-top: 1em">If the motion command is the d
command repeated:</p>

<p style="margin-top: 1em">1. The buffer text shall be in
line mode.</p>

<p style="margin-top: 1em">2. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">3. The text region shall be from
the current line up to and including the next count &acirc;1
lines.</p>

<p style="margin-top: 1em">Otherwise, the buffer text mode
and text region shall be as specified by the motion
command.</p>

<p style="margin-top: 1em">If in open mode, and the current
line is deleted, and the line remains on the display, an
&rsquo;@&rsquo; character shall be displayed as the first
glyph of that line.</p>

<p style="margin-top: 1em">Delete the region of text into
buffer, if specified, and into the unnamed buffer. If the
text to be deleted contains characters from more than a
single line, or the buffer text <br>
is in line mode, the deleted text shall be copied into the
numeric buffers, as well.</p>

<p style="margin-top: 1em">Current line: Set to the first
text region line that appears in the edit buffer, unless
that line has been deleted, in which case it shall be set to
the last line in the edit <br>
buffer, or line 1 if the edit buffer is empty.</p>

<p style="margin-top: 1em">Current column:</p>

<p style="margin-top: 1em">1. If the line is empty, set to
column position 1.</p>

<p style="margin-top: 1em">2. Otherwise, if the buffer text
is in line mode or the motion was from the cursor toward the
end of the edit buffer:</p>

<p style="margin-top: 1em">a. If a character from the
current line is displayed in the current column, set to the
last column that displays any portion of that character.</p>

<p style="margin-top: 1em">b. Otherwise, set to the last
column in which any portion of any character in the line is
displayed.</p>

<p style="margin-top: 1em">3. Otherwise, if a character is
displayed in the column that began the text region, set to
the last column that displays any portion of that
character.</p>

<p style="margin-top: 1em">4. Otherwise, set to the last
column in which any portion of any character in the line is
displayed.</p>

<p style="margin-top: 1em">Delete to End-of-Line <br>
Synopsis: <br>
[buffer] D</p>

<p style="margin-top: 1em">Delete the text from the current
position to the end of the current line; equivalent to the
vi command:</p>

<p style="margin-top: 1em">[buffer] d$</p>

<p style="margin-top: 1em">Move to End-of-Word <br>
Synopsis: <br>
[count] e</p>

<p style="margin-top: 1em">With the exception that words
are used instead of bigwords as the delimiter, this command
shall be equivalent to the E command.</p>

<p style="margin-top: 1em">Move to End-of-Bigword <br>
Synopsis: <br>
[count] E</p>

<p style="margin-top: 1em">If the edit buffer is empty it
shall be an error. If less than count bigwords end between
the cursor and the end of the edit buffer, count shall be
adjusted to the number of big&acirc; <br>
word endings between the cursor and the end of the edit
buffer.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the last character of the countth next bigword up to and
including the cursor character.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to the line
containing the current column.</p>

<p style="margin-top: 1em">Current column: Set to the last
column upon which any part of the last character of the
countth next bigword is displayed.</p>

<p style="margin-top: 1em">Find Character in Current Line
(Forward) <br>
Synopsis: <br>
[count] f character</p>

<p style="margin-top: 1em">It shall be an error if count
occurrences of the character do not occur after the cursor
in the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text range shall be from
the cursor character up to and including the countth
occurrence of the specified character after the cursor.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the countth occurrence of the
specified character after the cursor appears in the
line.</p>

<p style="margin-top: 1em">Find Character in Current Line
(Reverse) <br>
Synopsis: <br>
[count] F character</p>

<p style="margin-top: 1em">It shall be an error if count
occurrences of the character do not occur before the cursor
in the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the countth occurrence of the specified character before the
cursor, up to, but not including the cursor character.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the countth occurrence of the
specified character before the cursor appears in the
line.</p>

<p style="margin-top: 1em">Move to Line <br>
Synopsis: <br>
[count] G</p>

<p style="margin-top: 1em">If count is not specified, it
shall default to the last line of the edit buffer. If count
is greater than the last line of the edit buffer, it shall
be an error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the cursor line up to and including the specified line.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Set to count if
count is specified; otherwise, the last line.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Move to Top of Screen <br>
Synopsis: <br>
[count] H</p>

<p style="margin-top: 1em">If the beginning of the line
count greater than the first line of which any portion
appears on the display does not exist, it shall be an
error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If in open mode, the text
region shall be the current line.</p>

<p style="margin-top: 1em">2. Otherwise, the text region
shall be from the starting line up to and including (the
first line of the display + count &acirc;1).</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">If in open mode, this command
shall set the current column to non-&lt;blank&gt; and do
nothing else.</p>

<p style="margin-top: 1em">Otherwise, it shall set the
current line and current column as follows.</p>

<p style="margin-top: 1em">Current line: Set to (the first
line of the display + count &acirc;1).</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Insert Before Cursor <br>
Synopsis: <br>
[count] i</p>

<p style="margin-top: 1em">Enter text input mode before the
current cursor position. No characters already in the edit
buffer shall be affected by this command. A count shall
cause the input text to be <br>
appended count &acirc;1 more times to the end of the
input.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Insert at Beginning of Line <br>
Synopsis: <br>
[count] I</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command ^[count]i.</p>

<p style="margin-top: 1em">Join <br>
Synopsis: <br>
[count] J</p>

<p style="margin-top: 1em">If the current line is the last
line in the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex join command with no addresses, and an ex command
count value of 1 if count was not specified or if a count of
1 was specified, and an <br>
ex command count value of count &acirc;1 for any other value
of count, except that the current line and column shall be
set as follows.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: The last column
in which any portion of the character following the last
character in the initial line is displayed, or the last
non-&lt;newline&gt; in the line if no <br>
characters were appended.</p>

<p style="margin-top: 1em">Move to Bottom of Screen <br>
Synopsis: <br>
[count] L</p>

<p style="margin-top: 1em">If the beginning of the line
count less than the last line of which any portion appears
on the display does not exist, it shall be an error.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If in open mode, the text
region shall be the current line.</p>

<p style="margin-top: 1em">2. Otherwise, the text region
shall include all lines from the starting cursor line to
(the last line of the display &acirc;(count &acirc;1)).</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">1. If in open mode, this command
shall set the current column to non-&lt;blank&gt; and do
nothing else.</p>

<p style="margin-top: 1em">2. Otherwise, it shall set the
current line and current column as follows.</p>

<p style="margin-top: 1em">Current line: Set to (the last
line of the display &acirc;(count &acirc;1)).</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Mark Position <br>
Synopsis: <br>
m letter</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex mark command with the specified character as an
argument.</p>

<p style="margin-top: 1em">Move to Middle of Screen <br>
Synopsis: <br>
M</p>

<p style="margin-top: 1em">The middle line of the display
shall be calculated as follows:</p>

<p style="margin-top: 1em">(the top line of the display) +
(((number of lines displayed) +1) /2) &acirc;1</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If in open mode, the text
region shall be the current line.</p>

<p style="margin-top: 1em">2. Otherwise, the text region
shall include all lines from the starting cursor line up to
and including the middle line of the display.</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in line mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">If in open mode, this command
shall set the current column to non-&lt;blank&gt; and do
nothing else.</p>

<p style="margin-top: 1em">Otherwise, it shall set the
current line and current column as follows.</p>

<p style="margin-top: 1em">Current line: Set to the middle
line of the display.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Repeat Regular Expression Find
(Forward) <br>
Synopsis: <br>
n</p>

<p style="margin-top: 1em">If the remembered search
direction was forward, the n command shall be equivalent to
the vi / command with no characters entered by the user.
Otherwise, it shall be equivalent to <br>
the vi ? command with no characters entered by the user.</p>

<p style="margin-top: 1em">If the n command is used as a
motion command for the ! command, the editor shall not enter
text input mode on the last line on the screen, and shall
behave as if the user <br>
entered a single &rsquo;!&rsquo; character as the text
input.</p>

<p style="margin-top: 1em">Repeat Regular Expression Find
(Reverse) <br>
Synopsis: <br>
N</p>

<p style="margin-top: 1em">Scan for the next match of the
last pattern given to / or ?, but in the reverse direction;
this is the reverse of n.</p>

<p style="margin-top: 1em">If the remembered search
direction was forward, the N command shall be equivalent to
the vi ? command with no characters entered by the user.
Otherwise, it shall be equivalent <br>
to the vi / command with no characters entered by the user.
If the N command is used as a motion command for the !
command, the editor shall not enter text input mode on the
<br>
last line on the screen, and shall behave as if the user
entered a single ! character as the text input.</p>

<p style="margin-top: 1em">Insert Empty Line Below <br>
Synopsis: <br>
o</p>

<p style="margin-top: 1em">Enter text input mode in a new
line appended after the current line. A count shall cause
the input text to be appended count &acirc;1 more times to
the end of the already added text, <br>
each time starting on a new, appended line.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Insert Empty Line Above <br>
Synopsis: <br>
O</p>

<p style="margin-top: 1em">Enter text input mode in a new
line inserted before the current line. A count shall cause
the input text to be appended count &acirc;1 more times to
the end of the already added text, <br>
each time starting on a new, appended line.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Put from Buffer Following <br>
Synopsis: <br>
[buffer] p</p>

<p style="margin-top: 1em">If no buffer is specified, the
unnamed buffer shall be used.</p>

<p style="margin-top: 1em">If the buffer text is in line
mode, the text shall be appended below the current line, and
each line of the buffer shall become a new line in the edit
buffer. A count shall cause <br>
the buffer text to be appended count &acirc;1 more times to
the end of the already added text, each time starting on a
new, appended line.</p>

<p style="margin-top: 1em">If the buffer text is in
character mode, the text shall be appended into the current
line after the cursor, and each line of the buffer other
than the first and last shall become <br>
a new line in the edit buffer. A count shall cause the
buffer text to be appended count &acirc;1 more times to the
end of the already added text, each time starting after the
last <br>
added character.</p>

<p style="margin-top: 1em">Current line: If the buffer text
is in line mode, set the line to line +1; otherwise,
unchanged.</p>

<p style="margin-top: 1em">Current column: If the buffer
text is in line mode:</p>

<p style="margin-top: 1em">1. If there is a
non-&lt;blank&gt; in the first line of the buffer, set to
the last column on which any portion of the first
non-&lt;blank&gt; in the line is displayed.</p>

<p style="margin-top: 1em">2. If there is no
non-&lt;blank&gt; in the first line of the buffer, set to
the last column on which any portion of the last
non-&lt;newline&gt; in the first line of the buffer is
dis&acirc; <br>
played.</p>

<p style="margin-top: 1em">If the buffer text is in
character mode:</p>

<p style="margin-top: 1em">1. If the text in the buffer is
from more than a single line, then set to the last column on
which any portion of the first character from the buffer is
displayed.</p>

<p style="margin-top: 1em">2. Otherwise, if the buffer is
the unnamed buffer, set to the last column on which any
portion of the last character from the buffer is
displayed.</p>

<p style="margin-top: 1em">3. Otherwise, set to the first
column on which any portion of the first character from the
buffer is displayed.</p>

<p style="margin-top: 1em">Put from Buffer Before <br>
Synopsis: <br>
[buffer] P</p>

<p style="margin-top: 1em">If no buffer is specified, the
unnamed buffer shall be used.</p>

<p style="margin-top: 1em">If the buffer text is in line
mode, the text shall be inserted above the current line, and
each line of the buffer shall become a new line in the edit
buffer. A count shall cause <br>
the buffer text to be appended count &acirc;1 more times to
the end of the already added text, each time starting on a
new, appended line.</p>

<p style="margin-top: 1em">If the buffer text is in
character mode, the text shall be inserted into the current
line before the cursor, and each line of the buffer other
than the first and last shall <br>
become a new line in the edit buffer. A count shall cause
the buffer text to be appended count &acirc;1 more times to
the end of the already added text, each time starting after
the <br>
last added character.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: If the buffer
text is in line mode:</p>

<p style="margin-top: 1em">1. If there is a
non-&lt;blank&gt; in the first line of the buffer, set to
the last column on which any portion of that character is
displayed.</p>

<p style="margin-top: 1em">2. If there is no
non-&lt;blank&gt; in the first line of the buffer, set to
the last column on which any portion of the last
non-&lt;newline&gt; in the first line of the buffer is
dis&acirc; <br>
played.</p>

<p style="margin-top: 1em">If the buffer text is in
character mode:</p>

<p style="margin-top: 1em">1. If the text in the buffer is
from more than a single line, then set to the last column on
which any portion of the first character from the buffer is
displayed.</p>

<p style="margin-top: 1em">2. Otherwise, if the buffer is
the unnamed buffer, set to the last column on which any
portion of the last character from the buffer is
displayed.</p>

<p style="margin-top: 1em">3. Otherwise, set to the first
column on which any portion of the first character from the
buffer is displayed.</p>

<p style="margin-top: 1em">Enter ex Mode <br>
Synopsis: <br>
Q</p>

<p style="margin-top: 1em">Leave visual or open mode and
enter ex command mode.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">Replace Character <br>
Synopsis: <br>
[count] r character</p>

<p style="margin-top: 1em">Replace the count characters at
and after the cursor with the specified character. If there
are less than count non-&lt;newline&gt; characters at and
after the cursor on the line, it <br>
shall be an error.</p>

<p style="margin-top: 1em">If character is
&lt;control&gt;&acirc;V, any next character other than the
&lt;newline&gt; shall be stripped of any special meaning and
used as a literal character.</p>

<p style="margin-top: 1em">If character is &lt;ESC&gt;, no
replacement shall be made and the current line and current
column shall be unchanged.</p>

<p style="margin-top: 1em">If character is
&lt;carriage-return&gt; or &lt;newline&gt;, count new lines
shall be appended to the current line. All but the last of
these lines shall be empty. count characters at and <br>
after the cursor shall be discarded, and any remaining
characters after the cursor in the current line shall be
moved to the last of the new lines. If the autoindent edit
option <br>
is set, they shall be preceded by the same number of
autoindent characters found on the line from which the
command was executed.</p>

<p style="margin-top: 1em">Current line: Unchanged unless
the replacement character is a &lt;carriage-return&gt; or
&lt;newline&gt;, in which case it shall be set to line +
count.</p>

<p style="margin-top: 1em">Current column: Set to the last
column position on which a portion of the last replaced
character is displayed, or if the replacement character
caused new lines to be created, <br>
set to non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Replace Characters <br>
Synopsis: <br>
R</p>

<p style="margin-top: 1em">Enter text input mode at the
current cursor position possibly replacing text on the
current line. A count shall cause the input text to be
appended count &acirc;1 more times to the end <br>
of the input.</p>

<p style="margin-top: 1em">Current line/column: As
specified for the text input commands (see Input Mode
Commands in vi).</p>

<p style="margin-top: 1em">Substitute Character <br>
Synopsis: <br>
[buffer][count] s</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command:</p>

<p style="margin-top: 1em">[buffer][count]
c&lt;space&gt;</p>

<p style="margin-top: 1em">Substitute Lines <br>
Synopsis: <br>
[buffer][count] S</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command:</p>

<p style="margin-top: 1em">[buffer][count] c_</p>

<p style="margin-top: 1em">Move Cursor to Before Character
(Forward) <br>
Synopsis: <br>
[count] t character</p>

<p style="margin-top: 1em">It shall be an error if count
occurrences of the character do not occur after the cursor
in the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. The text region shall be from
the cursor up to but not including the countth occurrence of
the specified character after the cursor.</p>

<p style="margin-top: 1em">2. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the character before the
countth occurrence of the specified character after the
cursor appears in the line.</p>

<p style="margin-top: 1em">Move Cursor to After Character
(Reverse) <br>
Synopsis: <br>
[count] T character</p>

<p style="margin-top: 1em">It shall be an error if count
occurrences of the character do not occur before the cursor
in the line.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the character before the
cursor is the specified character, it shall be an error.</p>

<p style="margin-top: 1em">2. The text region shall be from
the character before the cursor up to but not including the
countth occurrence of the specified character before the
cursor.</p>

<p style="margin-top: 1em">3. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any portion of the character after the
countth occurrence of the specified character before the
cursor appears in the line.</p>

<p style="margin-top: 1em">Undo <br>
Synopsis: <br>
u</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex undo command except that the current line and
current column shall be set as follows:</p>

<p style="margin-top: 1em">Current line: Set to the first
line added or changed if any; otherwise, move to the line
preceding any deleted text if one exists; otherwise, move to
line 1.</p>

<p style="margin-top: 1em">Current column: If undoing an ex
command, set to the first non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Otherwise, if undoing a text
input command:</p>

<p style="margin-top: 1em">1. If the command was a C, c, O,
o, R, S, or s command, the current column shall be set to
the value it held when the text input command was
entered.</p>

<p style="margin-top: 1em">2. Otherwise, set to the last
column in which any portion of the first character after the
deleted text is displayed, or, if no non-&lt;newline&gt;
characters follow the text deleted <br>
from this line, set to the last column in which any portion
of the last non-&lt;newline&gt; in the line is displayed, or
1 if the line is empty.</p>

<p style="margin-top: 1em">Otherwise, if a single line was
modified (that is, not added or deleted) by the u
command:</p>

<p style="margin-top: 1em">1. If text was added or changed,
set to the last column in which any portion of the first
character added or changed is displayed.</p>

<p style="margin-top: 1em">2. If text was deleted, set to
the last column in which any portion of the first character
after the deleted text is displayed, or, if no
non-&lt;newline&gt; characters follow the <br>
deleted text, set to the last column in which any portion of
the last non-&lt;newline&gt; in the line is displayed, or 1
if the line is empty.</p>

<p style="margin-top: 1em">Otherwise, set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Undo Current Line <br>
Synopsis: <br>
U</p>

<p style="margin-top: 1em">Restore the current line to its
state immediately before the most recent time that it became
the current line.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to the first
column in the line in which any portion of the first
character in the line is displayed.</p>

<p style="margin-top: 1em">Move to Beginning of Word <br>
Synopsis: <br>
[count] w</p>

<p style="margin-top: 1em">With the exception that words
are used as the delimiter instead of bigwords, this command
shall be equivalent to the W command.</p>

<p style="margin-top: 1em">Move to Beginning of Bigword
<br>
Synopsis: <br>
[count] W</p>

<p style="margin-top: 1em">If the edit buffer is empty, it
shall be an error. If there are less than count bigwords
between the cursor and the end of the edit buffer, count
shall be adjusted to move the <br>
cursor to the last bigword in the edit buffer.</p>

<p style="margin-top: 1em">If used as a motion command:</p>

<p style="margin-top: 1em">1. If the associated command is
c, count is 1, and the cursor is on a &lt;blank&gt;, the
region of text shall be the current character and no further
action shall be taken.</p>

<p style="margin-top: 1em">2. If there are less than count
bigwords between the cursor and the end of the edit buffer,
then the command shall succeed, and the region of text shall
include the last charac&acirc; <br>
ter of the edit buffer.</p>

<p style="margin-top: 1em">3. If there are &lt;blank&gt;
characters or an end-of-line that precede the countth
bigword, and the associated command is c, the region of text
shall be up to and including the last <br>
character before the preceding &lt;blank&gt; characters or
end-of-line.</p>

<p style="margin-top: 1em">4. If there are &lt;blank&gt;
characters or an end-of-line that precede the bigword, and
the associated command is d or y, the region of text shall
be up to and including the last <br>
&lt;blank&gt; before the start of the bigword or
end-of-line.</p>

<p style="margin-top: 1em">5. Any text copied to a buffer
shall be in character mode.</p>

<p style="margin-top: 1em">If not used as a motion
command:</p>

<p style="margin-top: 1em">1. If the cursor is on the last
character of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">Current line: Set to the line
containing the current column.</p>

<p style="margin-top: 1em">Current column: Set to the last
column in which any part of the first character of the
countth next bigword is displayed.</p>

<p style="margin-top: 1em">Delete Character at Cursor <br>
Synopsis: <br>
[buffer][count] x</p>

<p style="margin-top: 1em">Delete the count characters at
and after the current character into buffer, if specified,
and into the unnamed buffer.</p>

<p style="margin-top: 1em">If the line is empty, it shall
be an error. If there are less than count
non-&lt;newline&gt; characters at and after the cursor on
the current line, count shall be adjusted to the num&acirc;
<br>
ber of non-&lt;newline&gt; characters at and after the
cursor.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: If the line is
empty, set to column position 1. Otherwise, if there were
count or less non-&lt;newline&gt; characters at and after
the cursor on the current line, set <br>
to the last column that displays any part of the last
non-&lt;newline&gt; of the line. Otherwise, unchanged.</p>

<p style="margin-top: 1em">Delete Character Before Cursor
<br>
Synopsis: <br>
[buffer][count] X</p>

<p style="margin-top: 1em">Delete the count characters
before the current character into buffer, if specified, and
into the unnamed buffer.</p>

<p style="margin-top: 1em">If there are no characters
before the current character on the current line, it shall
be an error. If there are less than count previous
characters on the current line, count <br>
shall be adjusted to the number of previous characters on
the line.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to (current
column &acirc; the width of the deleted characters).</p>

<p style="margin-top: 1em">Yank <br>
Synopsis: <br>
[buffer][count] y motion</p>

<p style="margin-top: 1em">Copy (yank) the region of text
into buffer, if specified, and into the unnamed buffer.</p>

<p style="margin-top: 1em">If the motion command is the y
command repeated:</p>

<p style="margin-top: 1em">1. The buffer shall be in line
mode.</p>

<p style="margin-top: 1em">2. If there are less than count
&acirc;1 lines after the current line in the edit buffer, it
shall be an error.</p>

<p style="margin-top: 1em">3. The text region shall be from
the current line up to and including the next count &acirc;1
lines.</p>

<p style="margin-top: 1em">Otherwise, the buffer text mode
and text region shall be as specified by the motion
command.</p>

<p style="margin-top: 1em">Current line: If the motion was
from the current cursor position toward the end of the edit
buffer, unchanged. Otherwise, set to the first line in the
edit buffer that is part of <br>
the text region specified by the motion command.</p>

<p style="margin-top: 1em">Current column:</p>

<p style="margin-top: 1em">1. If the motion was from the
current cursor position toward the end of the edit buffer,
unchanged.</p>

<p style="margin-top: 1em">2. Otherwise, if the current
line is empty, set to column position 1.</p>

<p style="margin-top: 1em">3. Otherwise, set to the last
column that displays any part of the first character in the
file that is part of the text region specified by the motion
command.</p>

<p style="margin-top: 1em">Yank Current Line <br>
Synopsis: <br>
[buffer][count] Y</p>

<p style="margin-top: 1em">This command shall be equivalent
to the vi command:</p>

<p style="margin-top: 1em">[buffer][count] y_</p>

<p style="margin-top: 1em">Redraw Window <br>
If in open mode, the z command shall have the Synopsis:</p>

<p style="margin-top: 1em">Synopsis: <br>
[count] z</p>

<p style="margin-top: 1em">If count is not specified, it
shall default to the window edit option &acirc;1. The z
command shall be equivalent to the ex z command, with a type
character of = and a count of count <br>
&acirc;2, except that the current line and current column
shall be set as follows, and the window edit option shall
not be affected. If the calculation for the count argument
would <br>
result in a negative number, the count argument to the ex z
command shall be zero. A blank line shall be written after
the last line is written.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">If not in open mode, the z
command shall have the following Synopsis:</p>

<p style="margin-top: 1em">Synopsis: <br>
[line] z [count] character</p>

<p style="margin-top: 1em">If line is not specified, it
shall default to the current line. If line is specified, but
is greater than the number of lines in the edit buffer, it
shall default to the number <br>
of lines in the edit buffer.</p>

<p style="margin-top: 1em">If count is specified, the value
of the window edit option shall be set to count (as
described in the ex window command), and the screen shall be
redrawn.</p>

<p style="margin-top: 1em">line shall be placed as
specified by the following characters:</p>

<p style="margin-top: 1em">&lt;newline&gt;,
&lt;carriage-return&gt; <br>
Place the beginning of the line on the first line of the
display.</p>

<p style="margin-top: 1em">. Place the beginning of the
line in the center of the display. The middle line of the
display shall be calculated as described for the M
command.</p>

<p style="margin-top: 1em">&acirc; Place an unspecified
portion of the line on the last line of the display.</p>

<p style="margin-top: 1em">+ If line was specified,
equivalent to the &lt;newline&gt; case. If line was not
specified, display a screen where the first line of the
display shall be (current last line) +1. If <br>
there are no lines after the last line in the display, it
shall be an error.</p>

<p style="margin-top: 1em">^ If line was specified, display
a screen where the last line of the display shall contain an
unspecified portion of the first line of a display that had
an unspecified por&acirc; <br>
tion of the specified line on the last line of the display.
If this calculation results in a line before the beginning
of the edit buffer, display the first screen of the <br>
edit buffer.</p>

<p style="margin-top: 1em">Otherwise, display a screen
where the last line of the display shall contain an
unspecified portion of (current first line &acirc;1). If
this calculation results in a line before <br>
the beginning of the edit buffer, it shall be an error.</p>

<p style="margin-top: 1em">Current line: If line and the
&rsquo;^&rsquo; character were specified:</p>

<p style="margin-top: 1em">1. If the first screen was
displayed as a result of the command attempting to display
lines before the beginning of the edit buffer: if the first
screen was already displayed, <br>
unchanged; otherwise, set to (current first line
&acirc;1).</p>

<p style="margin-top: 1em">2. Otherwise, set to the last
line of the display.</p>

<p style="margin-top: 1em">If line and the &rsquo;+&rsquo;
character were specified, set to the first line of the
display.</p>

<p style="margin-top: 1em">Otherwise, if line was
specified, set to line.</p>

<p style="margin-top: 1em">Otherwise, unchanged.</p>

<p style="margin-top: 1em">Current column: Set to
non-&lt;blank&gt;.</p>

<p style="margin-top: 1em">Exit <br>
Synopsis: <br>
ZZ</p>

<p style="margin-top: 1em">This command shall be equivalent
to the ex xit command with no addresses, trailing !, or
filename (see the ex xit command).</p>

<p style="margin-top: 1em">Input Mode Commands in vi <br>
In text input mode, the current line shall consist of zero
or more of the following categories, plus the terminating
&lt;newline&gt;:</p>

<p style="margin-top: 1em">1. Characters preceding the text
input entry point</p>

<p style="margin-top: 1em">Characters in this category
shall not be modified during text input mode.</p>

<p style="margin-top: 1em">2. autoindent characters</p>

<p style="margin-top: 1em">autoindent characters shall be
automatically inserted into each line that is created in
text input mode, either as a result of entering a
&lt;newline&gt; or &lt;carriage-return&gt; while <br>
in text input mode, or as an effect of the command itself;
for example, O or o (see the ex autoindent command), as if
entered by the user.</p>

<p style="margin-top: 1em">It shall be possible to erase
autoindent characters with the &lt;control&gt;&acirc;D
command; it is unspecified whether they can be erased by
&lt;control&gt;&acirc;H, &lt;control&gt;&acirc;U, and
&lt;control&gt;&acirc;W <br>
characters. Erasing any autoindent character turns the glyph
into erase-columns and deletes the character from the edit
buffer, but does not change its representation on the <br>
screen.</p>

<p style="margin-top: 1em">3. Text input characters</p>

<p style="margin-top: 1em">Text input characters are the
characters entered by the user. Erasing any text input
character turns the glyph into erase-columns and deletes the
character from the edit buf&acirc; <br>
fer, but does not change its representation on the
screen.</p>

<p style="margin-top: 1em">Each text input character
entered by the user (that does not have a special meaning)
shall be treated as follows:</p>

<p style="margin-top: 1em">a. The text input character
shall be appended to the last character in the edit buffer
from the first, second, or third categories.</p>

<p style="margin-top: 1em">b. If there are no erase-columns
on the screen, the text input command was the R command, and
characters in the fifth category from the original line
follow the cursor, the <br>
next such character shall be deleted from the edit buffer.
If the slowopen edit option is not set, the corresponding
glyph on the screen shall become erase-columns.</p>

<p style="margin-top: 1em">c. If there are erase-columns on
the screen, as many columns as they occupy, or as are
necessary, shall be overwritten to display the text input
character. (If only part of <br>
a multi-column glyph is overwritten, the remainder shall be
left on the screen, and continue to be treated as
erase-columns; it is unspecified whether the remainder of
<br>
the glyph is modified in any way.)</p>

<p style="margin-top: 1em">d. If additional display line
columns are needed to display the text input character:</p>

<p style="margin-top: 1em">i. If the slowopen edit option
is set, the text input characters shall be displayed on
subsequent display line columns, overwriting any characters
displayed in those <br>
columns.</p>

<p style="margin-top: 1em">ii. Otherwise, any characters
currently displayed on or after the column on the display
line where the text input character is to be displayed shall
be pushed ahead the <br>
number of display line columns necessary to display the rest
of the text input character.</p>

<p style="margin-top: 1em">4. Erase-columns</p>

<p style="margin-top: 1em">Erase-columns are not logically
part of the edit buffer, appearing only on the screen, and
may be overwritten on the screen by subsequent text input
characters. When text <br>
input mode ends, all erase-columns shall no longer appear on
the screen.</p>

<p style="margin-top: 1em">Erase-columns are initially the
region of text specified by the c command (see Change);
however, erasing autoindent or text input characters causes
the glyphs of the erased <br>
characters to be treated as erase-columns.</p>

<p style="margin-top: 1em">5. Characters following the text
region for the c command, or the text input entry point for
all other commands</p>

<p style="margin-top: 1em">Characters in this category
shall not be modified during text input mode, except as
specified in category 3.b. for the R text input command, or
as &lt;blank&gt; characters deleted <br>
when a &lt;newline&gt; or &lt;carriage-return&gt; is
entered.</p>

<p style="margin-top: 1em">It is unspecified whether it is
an error to attempt to erase past the beginning of a line
that was created by the entry of a &lt;newline&gt; or
&lt;carriage-return&gt; during text input <br>
mode. If it is not an error, the editor shall behave as if
the erasing character was entered immediately after the last
text input character entered on the previous line, and all
<br>
of the non-&lt;newline&gt; characters on the current line
shall be treated as erase-columns.</p>

<p style="margin-top: 1em">When text input mode is entered,
or after a text input mode character is entered (except as
specified for the special characters below), the cursor
shall be positioned as fol&acirc; <br>
lows:</p>

<p style="margin-top: 1em">1. On the first column that
displays any part of the first erase-column, if one
exists</p>

<p style="margin-top: 1em">2. Otherwise, if the slowopen
edit option is set, on the first display line column after
the last character in the first, second, or third
categories, if one exists</p>

<p style="margin-top: 1em">3. Otherwise, the first column
that displays any part of the first character in the fifth
category, if one exists</p>

<p style="margin-top: 1em">4. Otherwise, the display line
column after the last character in the first, second, or
third categories, if one exists</p>

<p style="margin-top: 1em">5. Otherwise, on column position
1</p>

<p style="margin-top: 1em">The characters that are updated
on the screen during text input mode are unspecified, other
than that the last text input character shall always be
updated, and, if the slowopen <br>
edit option is not set, the current cursor character shall
always be updated.</p>

<p style="margin-top: 1em">The following specifications are
for command characters entered during text input mode.</p>

<p style="margin-top: 1em">NUL <br>
Synopsis: <br>
NUL</p>

<p style="margin-top: 1em">If the first character of the
text input is a NUL, the most recently input text shall be
input as if entered by the user, and then text input mode
shall be exited. The text shall <br>
be input literally; that is, characters are neither macro or
abbreviation expanded, nor are any characters interpreted in
any special manner. It is unspecified whether
implemen&acirc; <br>
tations shall support more than 256 bytes of remembered
input text.</p>

<p style="margin-top: 1em">&lt;control&gt;-D <br>
Synopsis: <br>
&lt;control&gt;-D</p>

<p style="margin-top: 1em">The &lt;control&gt;&acirc;D
character shall have no special meaning when in text input
mode for a line-oriented command (see Command Descriptions
in vi).</p>

<p style="margin-top: 1em">This command need not be
supported on block-mode terminals.</p>

<p style="margin-top: 1em">If the cursor does not follow an
autoindent character, or an autoindent character and a
&rsquo;0&rsquo; or &rsquo;^&rsquo; character:</p>

<p style="margin-top: 1em">1. If the cursor is in column
position 1, the &lt;control&gt;&acirc;D character shall be
discarded and no further action taken.</p>

<p style="margin-top: 1em">2. Otherwise, the
&lt;control&gt;&acirc;D character shall have no special
meaning.</p>

<p style="margin-top: 1em">If the last input character was
a &rsquo;0&rsquo;, the cursor shall be moved to column
position 1.</p>

<p style="margin-top: 1em">Otherwise, if the last input
character was a &rsquo;^&rsquo;, the cursor shall be moved
to column position 1. In addition, the autoindent level for
the next input line shall be derived from <br>
the same line from which the autoindent level for the
current input line was derived.</p>

<p style="margin-top: 1em">Otherwise, the cursor shall be
moved back to the column after the previous shiftwidth (see
the ex shiftwidth command) boundary.</p>

<p style="margin-top: 1em">All of the glyphs on columns
between the starting cursor position and (inclusively) the
ending cursor position shall become erase-columns as
described in Input Mode Commands in <br>
vi.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to 1 if the
&lt;control&gt;&acirc;D was preceded by a &rsquo;^&rsquo; or
&rsquo;0&rsquo;; otherwise, set to (column &acirc;1)
&acirc;((column &acirc;2) % shiftwidth).</p>

<p style="margin-top: 1em">&lt;control&gt;-H <br>
Synopsis: <br>
&lt;control&gt;-H</p>

<p style="margin-top: 1em">If in text input mode for a
line-oriented command, and there are no characters to erase,
text input mode shall be terminated, no further action shall
be done for this command, <br>
and the current line and column shall be unchanged.</p>

<p style="margin-top: 1em">If there are characters other
than autoindent characters that have been input on the
current line before the cursor, the cursor shall move back
one character.</p>

<p style="margin-top: 1em">Otherwise, if there are
autoindent characters on the current line before the cursor,
it is implementation-defined whether the
&lt;control&gt;&acirc;H command is an error or if the cursor
<br>
moves back one autoindent character.</p>

<p style="margin-top: 1em">Otherwise, if the cursor is in
column position 1 and there are previous lines that have
been input, it is implementation-defined whether the
&lt;control&gt;&acirc;H command is an error or if <br>
it is equivalent to entering &lt;control&gt;&acirc;H after
the last input character on the previous input line.</p>

<p style="margin-top: 1em">Otherwise, it shall be an
error.</p>

<p style="margin-top: 1em">All of the glyphs on columns
between the starting cursor position and (inclusively) the
ending cursor position shall become erase-columns as
described in Input Mode Commands in <br>
vi.</p>

<p style="margin-top: 1em">The current erase character (see
stty) shall cause an equivalent action to the
&lt;control&gt;&acirc;H command, unless the previously
inserted character was a &lt;backslash&gt;, in which case it
<br>
shall be as if the literal current erase character had been
inserted instead of the &lt;backslash&gt;.</p>

<p style="margin-top: 1em">Current line: Unchanged, unless
previously input lines are erased, in which case it shall be
set to line &acirc;1.</p>

<p style="margin-top: 1em">Current column: Set to the first
column that displays any portion of the character backed up
over.</p>

<p style="margin-top: 1em">&lt;newline&gt; <br>
Synopsis: <br>
&lt;newline&gt; <br>
&lt;carriage-return&gt; <br>
&lt;control&gt;-J <br>
&lt;control&gt;-M</p>

<p style="margin-top: 1em">If input was part of a
line-oriented command, text input mode shall be terminated
and the command shall continue execution with the input
provided.</p>

<p style="margin-top: 1em">Otherwise, terminate the current
line. If there are no characters other than autoindent
characters on the line, all characters on the line shall be
discarded. Otherwise, it is <br>
unspecified whether the autoindent characters in the line
are modified by entering these characters.</p>

<p style="margin-top: 1em">Continue text input mode on a
new line appended after the current line. If the slowopen
edit option is set, the lines on the screen below the
current line shall not be pushed <br>
down, but the first of them shall be cleared and shall
appear to be overwritten. Otherwise, the lines of the screen
below the current line shall be pushed down.</p>

<p style="margin-top: 1em">If the autoindent edit option is
set, an appropriate number of autoindent characters shall be
added as a prefix to the line as described by the ex
autoindent edit option.</p>

<p style="margin-top: 1em">All columns after the cursor
that are erase-columns (as described in Input Mode Commands
in vi) shall be discarded.</p>

<p style="margin-top: 1em">If the autoindent edit option is
set, all &lt;blank&gt; characters immediately following the
cursor shall be discarded.</p>

<p style="margin-top: 1em">All remaining characters after
the cursor shall be transferred to the new line, positioned
after any autoindent characters.</p>

<p style="margin-top: 1em">Current line: Set to current
line +1.</p>

<p style="margin-top: 1em">Current column: Set to the first
column that displays any portion of the first character
after the autoindent characters on the new line, if any, or
the first column position <br>
after the last autoindent character, if any, or column
position 1.</p>

<p style="margin-top: 1em">&lt;control&gt;-T <br>
Synopsis: <br>
&lt;control&gt;-T</p>

<p style="margin-top: 1em">The &lt;control&gt;&acirc;T
character shall have no special meaning when in text input
mode for a line-oriented command (see Command Descriptions
in vi).</p>

<p style="margin-top: 1em">This command need not be
supported on block-mode terminals.</p>

<p style="margin-top: 1em">Behave as if the user entered
the minimum number of &lt;blank&gt; characters necessary to
move the cursor forward to the column position after the
next shiftwidth (see the ex <br>
shiftwidth command) boundary.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Set to column +
shiftwidth &acirc; ((column &acirc;1) % shiftwidth).</p>

<p style="margin-top: 1em">&lt;control&gt;-U <br>
Synopsis: <br>
&lt;control&gt;-U</p>

<p style="margin-top: 1em">If there are characters other
than autoindent characters that have been input on the
current line before the cursor, the cursor shall move to the
first character input after the <br>
autoindent characters.</p>

<p style="margin-top: 1em">Otherwise, if there are
autoindent characters on the current line before the cursor,
it is implementation-defined whether the
&lt;control&gt;&acirc;U command is an error or if the cursor
<br>
moves to the first column position on the line.</p>

<p style="margin-top: 1em">Otherwise, if the cursor is in
column position 1 and there are previous lines that have
been input, it is implementation-defined whether the
&lt;control&gt;&acirc;U command is an error or if <br>
it is equivalent to entering &lt;control&gt;&acirc;U after
the last input character on the previous input line.</p>

<p style="margin-top: 1em">Otherwise, it shall be an
error.</p>

<p style="margin-top: 1em">All of the glyphs on columns
between the starting cursor position and (inclusively) the
ending cursor position shall become erase-columns as
described in Input Mode Commands in <br>
vi.</p>

<p style="margin-top: 1em">The current kill character (see
stty) shall cause an equivalent action to the
&lt;control&gt;&acirc;U command, unless the previously
inserted character was a &lt;backslash&gt;, in which case it
<br>
shall be as if the literal current kill character had been
inserted instead of the &lt;backslash&gt;.</p>

<p style="margin-top: 1em">Current line: Unchanged, unless
previously input lines are erased, in which case it shall be
set to line &acirc;1.</p>

<p style="margin-top: 1em">Current column: Set to the first
column that displays any portion of the last character
backed up over.</p>

<p style="margin-top: 1em">&lt;control&gt;-V <br>
Synopsis: <br>
&lt;control&gt;-V <br>
&lt;control&gt;-Q</p>

<p style="margin-top: 1em">Allow the entry of any
subsequent character, other than &lt;control&gt;&acirc;J or
the &lt;newline&gt;, as a literal character, removing any
special meaning that it may have to the editor in text <br>
input mode. If a &lt;control&gt;&acirc;V or
&lt;control&gt;&acirc;Q is entered before a
&lt;control&gt;&acirc;J or &lt;newline&gt;, the
&lt;control&gt;&acirc;V or &lt;control&gt;&acirc;Q character
shall be discarded, and the &lt;control&gt;&acirc;J or <br>
&lt;newline&gt; shall behave as described in the
&lt;newline&gt; command character during input mode.</p>

<p style="margin-top: 1em">For purposes of the display
only, the editor shall behave as if a &rsquo;^&rsquo;
character was entered, and the cursor shall be positioned as
if overwriting the &rsquo;^&rsquo; character. When a
subse&acirc; <br>
quent character is entered, the editor shall behave as if
that character was entered instead of the original
&lt;control&gt;&acirc;V or &lt;control&gt;&acirc;Q
character.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column: Unchanged.</p>

<p style="margin-top: 1em">&lt;control&gt;-W <br>
Synopsis: <br>
&lt;control&gt;-W</p>

<p style="margin-top: 1em">If there are characters other
than autoindent characters that have been input on the
current line before the cursor, the cursor shall move back
over the last word preceding the <br>
cursor (including any &lt;blank&gt; characters between the
end of the last word and the current cursor); the cursor
shall not move to before the first character after the end
of any <br>
autoindent characters.</p>

<p style="margin-top: 1em">Otherwise, if there are
autoindent characters on the current line before the cursor,
it is implementation-defined whether the
&lt;control&gt;&acirc;W command is an error or if the cursor
<br>
moves to the first column position on the line.</p>

<p style="margin-top: 1em">Otherwise, if the cursor is in
column position 1 and there are previous lines that have
been input, it is implementation-defined whether the
&lt;control&gt;&acirc;W command is an error or if <br>
it is equivalent to entering &lt;control&gt;&acirc;W after
the last input character on the previous input line.</p>

<p style="margin-top: 1em">Otherwise, it shall be an
error.</p>

<p style="margin-top: 1em">All of the glyphs on columns
between the starting cursor position and (inclusively) the
ending cursor position shall become erase-columns as
described in Input Mode Commands in <br>
vi.</p>

<p style="margin-top: 1em">Current line: Unchanged, unless
previously input lines are erased, in which case it shall be
set to line &acirc;1.</p>

<p style="margin-top: 1em">Current column: Set to the first
column that displays any portion of the last character
backed up over.</p>

<p style="margin-top: 1em">&lt;ESC&gt; <br>
Synopsis: <br>
&lt;ESC&gt;</p>

<p style="margin-top: 1em">If input was part of a
line-oriented command:</p>

<p style="margin-top: 1em">1. If interrupt was entered,
text input mode shall be terminated and the editor shall
return to command mode. The terminal shall be alerted.</p>

<p style="margin-top: 1em">2. If &lt;ESC&gt; was entered,
text input mode shall be terminated and the command shall
continue execution with the input provided.</p>

<p style="margin-top: 1em">Otherwise, terminate text input
mode and return to command mode.</p>

<p style="margin-top: 1em">Any autoindent characters
entered on newly created lines that have no other
non-&lt;newline&gt; characters shall be deleted.</p>

<p style="margin-top: 1em">Any leading autoindent and
&lt;blank&gt; characters on newly created lines shall be
rewritten to be the minimum number of &lt;blank&gt;
characters possible.</p>

<p style="margin-top: 1em">The screen shall be redisplayed
as necessary to match the contents of the edit buffer.</p>

<p style="margin-top: 1em">Current line: Unchanged.</p>

<p style="margin-top: 1em">Current column:</p>

<p style="margin-top: 1em">1. If there are text input
characters on the current line, the column shall be set to
the last column where any portion of the last text input
character is displayed.</p>

<p style="margin-top: 1em">2. Otherwise, if a character is
displayed in the current column, unchanged.</p>

<p style="margin-top: 1em">3. Otherwise, set to column
position 1.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The following exit values shall be returned:</p>

<p style="margin-top: 1em">0 Successful completion.</p>

<p style="margin-top: 1em">&gt;0 An error occurred.</p>

<p style="margin-top: 1em">CONSEQUENCES OF ERRORS <br>
When any error is encountered and the standard input is not
a terminal device file, vi shall not write the file or
return to command or text input mode, and shall terminate
with <br>
a non-zero exit status.</p>

<p style="margin-top: 1em">Otherwise, when an unrecoverable
error is encountered it shall be equivalent to a SIGHUP
asynchronous event.</p>

<p style="margin-top: 1em">Otherwise, when an error is
encountered, the editor shall behave as specified in Command
Descriptions in vi.</p>

<p style="margin-top: 1em">The following sections are
informative.</p>

<p style="margin-top: 1em">APPLICATION USAGE <br>
None.</p>

<p style="margin-top: 1em">EXAMPLES <br>
None.</p>

<p style="margin-top: 1em">RATIONALE <br>
See the RATIONALE for ex for more information on vi. Major
portions of the vi utility specification point to ex to
avoid inadvertent divergence. While ex and vi have
histori&acirc; <br>
cally been implemented as a single utility, this is not
required by POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">It is recognized that portions
of vi would be difficult, if not impossible, to implement
satisfactorily on a block-mode terminal, or a terminal
without any form of cursor <br>
addressing, thus it is not a mandatory requirement that such
features should work on all terminals. It is the intention,
however, that a vi implementation should provide the full
<br>
set of capabilities on all terminals capable of supporting
them.</p>

<p style="margin-top: 1em">Historically, vi exited
immediately if the standard input was not a terminal.
POSIX.1&acirc;2008 permits, but does not require, this
behavior. An end-of-file condition is not equiva&acirc; <br>
lent to an end-of-file character. A common end-of-file
character, &lt;control&gt;&acirc;D, is historically a vi
command.</p>

<p style="margin-top: 1em">The text in the STDOUT section
reflects the usage of the verb display in this section; some
implementations of vi use standard output to write to the
terminal, but POSIX.1&acirc;2008 <br>
does not require that to be the case.</p>

<p style="margin-top: 1em">Historically, implementations
reverted to open mode if the terminal was incapable of
supporting full visual mode. POSIX.1&acirc;2008 requires
this behavior. Historically, the open mode <br>
of vi behaved roughly equivalently to the visual mode, with
the exception that only a single line from the edit buffer
(one &lsquo;&lsquo;buffer line&rsquo;&rsquo;) was kept
current at any time. This <br>
line was normally displayed on the next-to-last line of a
terminal with cursor addressing (and the last line performed
its normal visual functions for line-oriented commands and
<br>
messages). In addition, some few commands behaved
differently in open mode than in visual mode.
POSIX.1&acirc;2008 requires conformance to historical
practice.</p>

<p style="margin-top: 1em">Historically, ex and vi
implementations have expected text to proceed in the usual
European/Latin order of left to right, top to bottom. There
is no requirement in POSIX.1&acirc;2008 <br>
that this be the case. The specification was deliberately
written using words like &lsquo;&lsquo;before&rsquo;&rsquo;,
&lsquo;&lsquo;after&rsquo;&rsquo;,
&lsquo;&lsquo;first&rsquo;&rsquo;, and
&lsquo;&lsquo;last&rsquo;&rsquo; in order to permit
implementations to support <br>
the natural text order of the language.</p>

<p style="margin-top: 1em">Historically, lines past the end
of the edit buffer were marked with single &lt;tilde&gt;
(&rsquo;~&rsquo;) characters; that is, if the one-based
display was 20 lines in length, and the last line <br>
of the file was on line one, then lines 2-20 would contain
only a single &rsquo;~&rsquo; character.</p>

<p style="margin-top: 1em">Historically, the vi editor
attempted to display only complete lines at the bottom of
the screen (it did display partial lines at the top of the
screen). If a line was too long <br>
to fit in its entirety at the bottom of the screen, the
screen lines where the line would have been displayed were
displayed as single &rsquo;@&rsquo; characters, instead of
displaying part <br>
of the line. POSIX.1&acirc;2008 permits, but does not
require, this behavior. Implementations are encouraged to
attempt always to display a complete line at the bottom of
the screen <br>
when doing scrolling or screen positioning by buffer
lines.</p>

<p style="margin-top: 1em">Historically, lines marked with
&rsquo;@&rsquo; were also used to minimize output to dumb
terminals over slow lines; that is, changes local to the
cursor were updated, but changes to lines <br>
on the screen that were not close to the cursor were simply
marked with an &rsquo;@&rsquo; sign instead of being updated
to match the current text. POSIX.1&acirc;2008 permits, but
does not require <br>
this feature because it is used ever less frequently as
terminals become smarter and connections are faster.</p>

<p style="margin-top: 1em">Initialization in ex and vi <br>
Historically, vi always had a line in the edit buffer, even
if the edit buffer was &lsquo;&lsquo;empty&rsquo;&rsquo;.
For example:</p>

<p style="margin-top: 1em">1. The ex command = executed
from visual mode wrote &lsquo;&lsquo;1&rsquo;&rsquo; when
the buffer was empty.</p>

<p style="margin-top: 1em">2. Writes from visual mode of an
empty edit buffer wrote files of a single character (a
&lt;newline&gt;), while writes from ex mode of an empty edit
buffer wrote empty files.</p>

<p style="margin-top: 1em">3. Put and read commands into an
empty edit buffer left an empty line at the top of the edit
buffer.</p>

<p style="margin-top: 1em">For consistency,
POSIX.1&acirc;2008 does not permit any of these
behaviors.</p>

<p style="margin-top: 1em">Historically, vi did not always
return the terminal to its original modes; for example,
ICRNL was modified if it was not originally set.
POSIX.1&acirc;2008 does not permit this behav&acirc; <br>
ior.</p>

<p style="margin-top: 1em">Command Descriptions in vi <br>
Motion commands are among the most complicated aspects of vi
to describe. With some exceptions, the text region and
buffer type effect of a motion command on a vi command are
<br>
described on a case-by-case basis. The descriptions of text
regions in POSIX.1&acirc;2008 are not intended to imply
direction; that is, an inclusive region from line n to line
n+5 is <br>
identical to a region from line n+5 to line n. This is of
more than academic interest&acirc;movements to marks can be
in either direction, and, if the wrapscan option is set, so
can <br>
movements to search points. Historically, lines are always
stored into buffers in text order; that is, from the start
of the edit buffer to the end. POSIX.1&acirc;2008 requires
confor&acirc; <br>
mance to historical practice.</p>

<p style="margin-top: 1em">Historically, command counts
were applied to any associated motion, and were
multiplicative to any supplied motion count. For example,
2cw is the same as c2w, and 2c3w is the <br>
same as c6w. POSIX.1&acirc;2008 requires this behavior.
Historically, vi commands that used bigwords, words,
paragraphs, and sentences as objects treated groups of empty
lines, or <br>
lines that contained only &lt;blank&gt; characters,
inconsistently. Some commands treated them as a single
entity, while others treated each line separately. For
example, the w, W, and <br>
B commands treated groups of empty lines as individual
words; that is, the command would move the cursor to each
new empty line. The e and E commands treated groups of empty
<br>
lines as a single word; that is, the first use would move
past the group of lines. The b command would just beep at
the user, or if done from the start of the line as a motion
<br>
command, fail in unexpected ways. If the lines contained
only (or ended with) &lt;blank&gt; characters, the w and W
commands would just beep at the user, the E and e commands
would <br>
treat the group as a single word, and the B and b commands
would treat the lines as individual words. For consistency
and simplicity of specification, POSIX.1&acirc;2008 requires
that <br>
all vi commands treat groups of empty or blank lines as a
single entity, and that movement through lines ending with
&lt;blank&gt; characters be consistent with other
movements.</p>

<p style="margin-top: 1em">Historically, vi documentation
indicated that any number of double-quotes were skipped
after punctuation marks at sentence boundaries; however,
implementations only skipped sin&acirc; <br>
gle-quotes. POSIX.1&acirc;2008 requires both to be
skipped.</p>

<p style="margin-top: 1em">Historically, the first and last
characters in the edit buffer were word boundaries. This
historical practice is required by POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">Historically, vi attempted to
update the minimum number of columns on the screen possible,
which could lead to misleading information being displayed.
POSIX.1&acirc;2008 makes no <br>
requirements other than that the current character being
entered is displayed correctly, leaving all other decisions
in this area up to the implementation.</p>

<p style="margin-top: 1em">Historically, lines were
arbitrarily folded between columns of any characters that
required multiple column positions on the screen, with the
exception of tabs, which terminated <br>
at the right-hand margin. POSIX.1&acirc;2008 permits the
former and requires the latter. Implementations that do not
arbitrarily break lines between columns of characters that
occupy <br>
multiple column positions should not permit the cursor to
rest on a column that does not contain any part of a
character.</p>

<p style="margin-top: 1em">The historical vi had a problem
in that all movements were by buffer lines, not by display
or screen lines. This is often the right thing to do; for
example, single line move&acirc; <br>
ments, such as j or k, should work on buffer lines. Commands
like dj, or j., where . is a change command, only make sense
for buffer lines. It is not, however, the right thing <br>
to do for screen motion or scrolling commands like
&lt;control&gt;&acirc;D, &lt;control&gt;&acirc;F, and H. If
the window is fairly small, using buffer lines in these
cases can result in completely <br>
random motion; for example, 1&lt;control&gt;&acirc;D can
result in a completely changed screen, without any overlap.
This is clearly not what the user wanted. The problem is
even worse in <br>
the case of the H, L, and M commands&acirc;as they position
the cursor at the first non-&lt;blank&gt; of the line, they
may all refer to the same location in large lines, and will
result in <br>
no movement at all.</p>

<p style="margin-top: 1em">In addition, if the line is
larger than the screen, using buffer lines can make it
impossible to display parts of the line&acirc;there are not
any commands that do not display the <br>
beginning of the line in historical vi, and if both the
beginning and end of the line cannot be on the screen at the
same time, the user suffers. Finally, the page and half-page
<br>
scrolling commands historically moved to the first
non-&lt;blank&gt; in the new line. If the line is
approximately the same size as the screen, this is
inadequate because the cursor <br>
before and after a &lt;control&gt;&acirc;D command will
refer to the same location on the screen.</p>

<p style="margin-top: 1em">Implementations of ex and vi
exist that do not have these problems because the relevant
commands (&lt;control&gt;&acirc;B, &lt;control&gt;&acirc;D,
&lt;control&gt;&acirc;F, &lt;control&gt;&acirc;U,
&lt;control&gt;&acirc;Y, &lt;control&gt;&acirc;E, H, <br>
L, and M) operate on display (screen) lines, not (edit)
buffer lines.</p>

<p style="margin-top: 1em">POSIX.1&acirc;2008 does not
permit this behavior by default because the standard
developers believed that users would find it too confusing.
However, historical practice has been <br>
relaxed. For example, ex and vi historically attempted,
albeit sometimes unsuccessfully, to never put part of a line
on the last lines of a screen; for example, if a line would
<br>
not fit in its entirety, no part of the line was displayed,
and the screen lines corresponding to the line contained
single &rsquo;@&rsquo; characters. This behavior is
permitted, but not <br>
required by POSIX.1&acirc;2008, so that it is possible for
implementations to support long lines in small screens more
reasonably without changing the commands to be oriented to
the <br>
display (instead of oriented to the buffer).
POSIX.1&acirc;2008 also permits implementations to refuse to
edit any edit buffer containing a line that will not fit on
the screen in its <br>
entirety.</p>

<p style="margin-top: 1em">The display area (for example,
the value of the window edit option) has historically been
&lsquo;&lsquo;grown&rsquo;&rsquo;, or expanded, to display
new text when local movements are done in displays <br>
where the number of lines displayed is less than the maximum
possible. Expansion has historically been the first choice,
when the target line is less than the maximum possible <br>
expansion value away. Scrolling has historically been the
next choice, done when the target line is less than half a
display away, and otherwise, the screen was redrawn. There
<br>
were exceptions, however, in that ex commands generally
always caused the screen to be redrawn. POSIX.1&acirc;2008
does not specify a standard behavior because there may be
external <br>
issues, such as connection speed, the number of characters
necessary to redraw as opposed to scroll, or terminal
capabilities that implementations will have to
accommodate.</p>

<p style="margin-top: 1em">The current line in
POSIX.1&acirc;2008 maps one-to-one to a buffer line in the
file. The current column does not. There are two different
column values that are described by <br>
POSIX.1&acirc;2008. The first is the current column value as
set by many of the vi commands. This value is remembered for
the lifetime of the editor. The second column value is the
<br>
actual position on the screen where the cursor rests. The
two are not always the same. For example, when the cursor is
backed by a multi-column character, the actual cursor
posi&acirc; <br>
tion on the screen has historically been the last column of
the character in command mode, and the first column of the
character in input mode.</p>

<p style="margin-top: 1em">Commands that set the current
line, but that do not set the current cursor value (for
example, j and k) attempt to get as close as possible to the
remembered column position, so <br>
that the cursor tends to restrict itself to a vertical
column as the user moves around in the edit buffer.
POSIX.1&acirc;2008 requires conformance to historical
practice, requiring <br>
that the display location of the cursor on the display line
be adjusted from the current column value as necessary to
support this historical behavior.</p>

<p style="margin-top: 1em">Historically, only a single line
(and for some terminals, a single line minus 1 column) of
characters could be entered by the user for the
line-oriented commands; that is, :, !, <br>
/, or ?. POSIX.1&acirc;2008 permits, but does not require,
this limitation.</p>

<p style="margin-top: 1em">Historically,
&lsquo;&lsquo;soft&rsquo;&rsquo; errors in vi caused the
terminal to be alerted, but no error message was displayed.
As a general rule, no error message was displayed for errors
in com&acirc; <br>
mand execution in vi, when the error resulted from the user
attempting an invalid or impossible action, or when a
searched-for object was not found. Examples of soft errors
<br>
included h at the left margin, &lt;control&gt;&acirc;B or [[
at the beginning of the file, 2G at the end of the file, and
so on. In addition, errors such as %, ]], }, ), N, n, f, F,
t, and T <br>
failing to find the searched-for object were soft as well.
Less consistently, / and ? displayed an error message if the
pattern was not found, /, ?, N, and n displayed an error
<br>
message if no previous regular expression had been
specified, and ; did not display an error message if no
previous f, F, t, or T command had occurred. Also, behavior
in this <br>
area might reasonably be based on a runtime evaluation of
the speed of a network connection. Finally, some
implementations have provided error messages for soft errors
in order <br>
to assist naive users, based on the value of a verbose edit
option. POSIX.1&acirc;2008 does not list specific errors for
which an error message shall be displayed. Implementations
<br>
should conform to historical practice in the absence of any
strong reason to diverge.</p>

<p style="margin-top: 1em">Page Backwards <br>
The &lt;control&gt;&acirc;B and &lt;control&gt;&acirc;F
commands historically considered it an error to attempt to
page past the beginning or end of the file, whereas the
&lt;control&gt;&acirc;D and &lt;control&gt;&acirc;U <br>
commands simply moved to the beginning or end of the file.
For consistency, POSIX.1&acirc;2008 requires the latter
behavior for all four commands. All four commands still
consider it <br>
an error if the current line is at the beginning
(&lt;control&gt;&acirc;B, &lt;control&gt;&acirc;U) or end
(&lt;control&gt;&acirc;F, &lt;control&gt;&acirc;D) of the
file. Historically, the &lt;control&gt;&acirc;B and
&lt;control&gt;&acirc;F commands <br>
skip two lines in order to include overlapping lines when a
single command is entered. This makes less sense in the
presence of a count, as there will be, by definition, no
over&acirc; <br>
lapping lines. The actual calculation used by historical
implementations of the vi editor for &lt;control&gt;&acirc;B
was:</p>

<p style="margin-top: 1em">((current first line) &acirc;
count x (window edit option)) +2</p>

<p style="margin-top: 1em">and for &lt;control&gt;&acirc;F
was:</p>

<p style="margin-top: 1em">((current first line) + count x
(window edit option)) &acirc;2</p>

<p style="margin-top: 1em">This calculation does not work
well when intermixing commands with and without counts; for
example, 3&lt;control&gt;&acirc;F is not equivalent to
entering the &lt;control&gt;&acirc;F command three <br>
times, and is not reversible by entering the
&lt;control&gt;&acirc;B command three times. For consistency
with other vi commands that take counts, POSIX.1&acirc;2008
requires a different calcula&acirc; <br>
tion.</p>

<p style="margin-top: 1em">Scroll Forward <br>
The 4BSD and System V implementations of vi differed on the
initial value used by the scroll command. 4BSD used:</p>

<p style="margin-top: 1em">((window edit option) +1) /2</p>

<p style="margin-top: 1em">while System V used the value of
the scroll edit option. The System V version is specified by
POSIX.1&acirc;2008 because the standard developers believed
that it was more intuitive and <br>
permitted the user a method of setting the scroll value
initially without also setting the number of lines that are
displayed.</p>

<p style="margin-top: 1em">Scroll Forward by Line <br>
Historically, the &lt;control&gt;&acirc;E and
&lt;control&gt;&acirc;Y commands considered it an error if
the last and first lines, respectively, were already on the
screen. POSIX.1&acirc;2008 requires confor&acirc; <br>
mance to historical practice. Historically, the
&lt;control&gt;&acirc;E and &lt;control&gt;&acirc;Y commands
had no effect in open mode. For simplicity and consistency
of specification, POSIX.1&acirc;2008 <br>
requires that they behave as usual, albeit with a single
line screen.</p>

<p style="margin-top: 1em">Clear and Redisplay <br>
The historical &lt;control&gt;&acirc;L command refreshed the
screen exactly as it was supposed to be currently displayed,
replacing any &rsquo;@&rsquo; characters for lines that had
been deleted but not <br>
updated on the screen with refreshed &rsquo;@&rsquo;
characters. The intent of the &lt;control&gt;&acirc;L
command is to refresh when the screen has been accidentally
overwritten; for example, by a <br>
write command from another user, or modem noise.</p>

<p style="margin-top: 1em">Redraw Screen <br>
The historical &lt;control&gt;&acirc;R command redisplayed
only when necessary to update lines that had been deleted
but not updated on the screen and that were flagged with
&rsquo;@&rsquo; characters. <br>
There is no requirement that the screen be in any way
refreshed if no lines of this form are currently displayed.
POSIX.1&acirc;2008 permits implementations to extend this
command to <br>
refresh lines on the screen flagged with &rsquo;@&rsquo;
characters because they are too long to be displayed in the
current framework; however, the current line and column need
not be modi&acirc; <br>
fied.</p>

<p style="margin-top: 1em">Search for tagstring <br>
Historically, the first non-&lt;blank&gt; at or after the
cursor was the first character, and all subsequent
characters that were word characters, up to the end of the
line, were <br>
included. For example, with the cursor on the leading
&lt;space&gt; or on the &rsquo;#&rsquo; character in the
text &quot;#bar@&quot;, the tag was &quot;#bar&quot;. On the
character &rsquo;b&rsquo; it was &quot;bar&quot;, and on the
&rsquo;a&rsquo; <br>
it was &quot;ar&quot;. POSIX.1&acirc;2008 requires this
behavior.</p>

<p style="margin-top: 1em">Replace Text with Results from
Shell Command <br>
Historically, the &lt;, &gt;, and ! commands considered most
cursor motions other than line-oriented motions an error;
for example, the command &gt;/foo&lt;CR&gt; succeeded, while
the command <br>
&gt;l failed, even though the text region described by the
two commands might be identical. For consistency, all three
commands only consider entire lines and not partial lines,
and <br>
the region is defined as any line that contains a character
that was specified by the motion.</p>

<p style="margin-top: 1em">Move to Matching Character <br>
Other matching characters have been left
implementation-defined in order to allow extensions such as
matching &rsquo;&lt;&rsquo; and &rsquo;&gt;&rsquo; for
searching HTML, or #ifdef, #else, and #endif for <br>
searching C source.</p>

<p style="margin-top: 1em">Repeat Substitution <br>
POSIX.1&acirc;2008 requires that any c and g flags specified
to the previous substitute command be ignored; however, the
r flag may still apply, if supported by the
implementation.</p>

<p style="margin-top: 1em">Return to Previous (Context or
Section) <br>
The [[, ]], (, ), {, and } commands are all affected by
&lsquo;&lsquo;section boundaries&rsquo;&rsquo;, but in some
historical implementations not all of the commands recognize
the same section bound&acirc; <br>
aries. This is a bug, not a feature, and a unique
section-boundary algorithm was not described for each
command. One special case that is preserved is that the
sentence command <br>
moves to the end of the last line of the edit buffer while
the other commands go to the beginning, in order to preserve
the traditional character cut semantics of the sentence <br>
command. Historically, vi section boundaries at the
beginning and end of the edit buffer were the first
non-&lt;blank&gt; on the first and last lines of the edit
buffer if one exists; <br>
otherwise, the last character of the first and last lines of
the edit buffer if one exists. To increase consistency with
other section locations, this has been simplified by <br>
POSIX.1&acirc;2008 to the first character of the first and
last lines of the edit buffer, or the first and the last
lines of the edit buffer if they are empty.</p>

<p style="margin-top: 1em">Sentence boundaries were
problematic in the historical vi. They were not only the
boundaries as defined for the section and paragraph
commands, but they were the first <br>
non-&lt;blank&gt; that occurred after those boundaries, as
well. Historically, the vi section commands were documented
as taking an optional window size as a count preceding the
com&acirc; <br>
mand. This was not implemented in historical versions, so
POSIX.1&acirc;2008 requires that the count repeat the
command, for consistency with other vi commands.</p>

<p style="margin-top: 1em">Repeat <br>
Historically, mapped commands other than text input commands
could not be repeated using the period command.
POSIX.1&acirc;2008 requires conformance to historical
practice.</p>

<p style="margin-top: 1em">The restrictions on the
interpretation of special characters (for example,
&lt;control&gt;&acirc;H) in the repetition of text input
mode commands is intended to match historical practice. <br>
For example, given the input sequence:</p>


<p style="margin-top: 1em">iab&lt;control&gt;-H&lt;control&gt;-H&lt;control&gt;-Hdef&lt;escape&gt;</p>

<p style="margin-top: 1em">the user should be informed of
an error when the sequence is first entered, but not during
a command repetition. The character &lt;control&gt;&acirc;T
is specifically exempted from this <br>
restriction. Historical implementations of vi ignored
&lt;control&gt;&acirc;T characters that were input in the
original command during command repetition.
POSIX.1&acirc;2008 prohibits this behav&acirc; <br>
ior.</p>

<p style="margin-top: 1em">Find Regular Expression <br>
Historically, commands did not affect the line searched to
or from if the motion command was a search (/, ?, N, n) and
the final position was the start/end of the line. There <br>
were some special cases and vi was not consistent.
POSIX.1&acirc;2008 does not permit this behavior, for
consistency. Historical implementations permitted but were
unable to handle <br>
searches as motion commands that wrapped (that is, due to
the edit option wrapscan) to the original location.
POSIX.1&acirc;2008 requires that this behavior be treated as
an error.</p>

<p style="margin-top: 1em">Historically, the syntax
&quot;/RE/0&quot; was used to force the command to cut text
in line mode. POSIX.1&acirc;2008 requires conformance to
historical practice.</p>

<p style="margin-top: 1em">Historically, in open mode, a z
specified to a search command redisplayed the current line
instead of displaying the current screen with the current
line highlighted. For consis&acirc; <br>
tency and simplicity of specification, POSIX.1&acirc;2008
does not permit this behavior.</p>

<p style="margin-top: 1em">Historically, trailing z
commands were permitted and ignored if entered as part of a
search used as a motion command. For consistency and
simplicity of specification, <br>
POSIX.1&acirc;2008 does not permit this behavior.</p>

<p style="margin-top: 1em">Execute an ex Command <br>
Historically, vi implementations restricted the commands
that could be entered on the colon command line (for
example, append and change), and some other commands were
known to <br>
cause them to fail catastrophically. For consistency,
POSIX.1&acirc;2008 does not permit these restrictions. When
executing an ex command by entering :, it is not possible to
enter a <br>
&lt;newline&gt; as part of the command because it is
considered the end of the command. A different approach is
to enter ex command mode by using the vi Q command (and
later resuming <br>
visual mode with the ex vi command). In ex command mode, the
single-line limitation does not exist. So, for example, the
following is valid:</p>

<p style="margin-top: 1em">Q <br>
s/break here/break here/ <br>
vi</p>

<p style="margin-top: 1em">POSIX.1&acirc;2008 requires
that, if the ex command overwrites any part of the screen
that would be erased by a refresh, vi pauses for a character
from the user. Historically, this <br>
character could be any character; for example, a character
input by the user before the message appeared, or even a
mapped character. This is probably a bug, but
implementations <br>
that have tried to be more rigorous by requiring that the
user enter a specific character, or that the user enter a
character after the message was displayed, have been forced
by <br>
user indignation back into historical behavior.
POSIX.1&acirc;2008 requires conformance to historical
practice.</p>

<p style="margin-top: 1em">Shift Left (Right) <br>
Refer to the Rationale for the ! and / commands.
Historically, the &lt; and &gt; commands sometimes moved the
cursor to the first non-&lt;blank&gt; (for example if the
command was repeated <br>
or with _ as the motion command), and sometimes left it
unchanged. POSIX.1&acirc;2008 does not permit this
inconsistency, requiring instead that the cursor always move
to the first <br>
non-&lt;blank&gt;. Historically, the &lt; and &gt; commands
did not support buffer arguments, although some
implementations allow the specification of an optional
buffer. This behavior is <br>
neither required nor disallowed by POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">Execute <br>
Historically, buffers could execute other buffers, and
loops, infinite and otherwise, were possible.
POSIX.1&acirc;2008 requires conformance to historical
practice. The *buffer syntax <br>
of ex is not required in vi, because it is not historical
practice and has been used in some vi implementations to
support additional scripting languages.</p>

<p style="margin-top: 1em">Reverse Case <br>
Historically, the ~ command ignored any associated count,
and acted only on the characters in the current line. For
consistency with other vi commands, POSIX.1&acirc;2008
requires that <br>
an associated count act on the next count characters, and
that the command move to subsequent lines if warranted by
count, to make it possible to modify large pieces of text in
a <br>
reasonably efficient manner. There exist vi implementations
that optionally require an associated motion command for the
~ command. Implementations supporting this functionality
<br>
are encouraged to base it on the tildedop edit option and
handle the text regions and cursor positioning identically
to the yank command.</p>

<p style="margin-top: 1em">Append <br>
Historically, counts specified to the A, a, I, and i
commands repeated the input of the first line count times,
and did not repeat the subsequent lines of the input text.
<br>
POSIX.1&acirc;2008 requires that the entire text input be
repeated count times.</p>

<p style="margin-top: 1em">Move Backward to Preceding Word
<br>
Historically, vi became confused if word commands were used
as motion commands in empty files. POSIX.1&acirc;2008
requires that this be an error. Historical implementations
of vi had a <br>
large number of bugs in the word movement commands, and they
varied greatly in behavior in the presence of empty lines,
&lsquo;&lsquo;words&rsquo;&rsquo; made up of a single
character, and lines con&acirc; <br>
taining only &lt;blank&gt; characters. For consistency and
simplicity of specification, POSIX.1&acirc;2008 does not
permit this behavior.</p>

<p style="margin-top: 1em">Change to End-of-Line <br>
Some historical implementations of the C command did not
behave as described by POSIX.1&acirc;2008 when the $ key was
remapped because they were implemented by pushing the $ key
onto <br>
the input queue and reprocessing it. POSIX.1&acirc;2008 does
not permit this behavior. Historically, the C, S, and s
commands did not copy replaced text into the numeric
buffers. For <br>
consistency and simplicity of specification,
POSIX.1&acirc;2008 requires that they behave like their
respective c commands in all respects.</p>

<p style="margin-top: 1em">Delete <br>
Historically, lines in open mode that were deleted were
scrolled up, and an @ glyph written over the beginning of
the line. In the case of terminals that are incapable of the
<br>
necessary cursor motions, the editor erased the deleted line
from the screen. POSIX.1&acirc;2008 requires conformance to
historical practice; that is, if the terminal cannot display
<br>
the &rsquo;@&rsquo; character, the line cannot remain on the
screen.</p>

<p style="margin-top: 1em">Delete to End-of-Line <br>
Some historical implementations of the D command did not
behave as described by POSIX.1&acirc;2008 when the $ key was
remapped because they were implemented by pushing the $ key
onto <br>
the input queue and reprocessing it. POSIX.1&acirc;2008 does
not permit this behavior.</p>

<p style="margin-top: 1em">Join <br>
An historical oddity of vi is that the commands J, 1J, and
2J are all equivalent. POSIX.1&acirc;2008 requires
conformance to historical practice. The vi J command is
specified in <br>
terms of the ex join command with an ex command count value.
The address correction for a count that is past the end of
the edit buffer is necessary for historical compatibility
<br>
for both ex and vi.</p>

<p style="margin-top: 1em">Mark Position <br>
Historical practice is that only lowercase letters, plus
backquote and single-quote, could be used to mark a cursor
position. POSIX.1&acirc;2008 requires conformance to
historical <br>
practice, but encourages implementations to support other
characters as marks as well.</p>

<p style="margin-top: 1em">Repeat Regular Expression Find
(Forward and Reverse) <br>
Historically, the N and n commands could not be used as
motion components for the c command. With the exception of
the cN command, which worked if the search crossed a line
<br>
boundary, the text region would be discarded, and the user
would not be in text input mode. For consistency and
simplicity of specification, POSIX.1&acirc;2008 does not
permit this <br>
behavior.</p>

<p style="margin-top: 1em">Insert Empty Line (Below and
Above) <br>
Historically, counts to the O and o commands were used as
the number of physical lines to open, if the terminal was
dumb and the slowopen option was not set. This was intended
to <br>
minimize traffic over slow connections and repainting for
dumb terminals. POSIX.1&acirc;2008 does not permit this
behavior, requiring that a count to the open command behave
as for <br>
other text input commands. This change to historical
practice was made for consistency, and because a superset of
the functionality is provided by the slowopen edit
option.</p>

<p style="margin-top: 1em">Put from Buffer (Following and
Before) <br>
Historically, counts to the p and P commands were ignored if
the buffer was a line mode buffer, but were (mostly)
implemented as described in POSIX.1&acirc;2008 if the buffer
was a <br>
character mode buffer. Because implementations exist that do
not have this limitation, and because pasting lines multiple
times is generally useful, POSIX.1&acirc;2008 requires that
<br>
count be supported for all p and P commands.</p>

<p style="margin-top: 1em">Historical implementations of vi
were widely known to have major problems in the p and P
commands, particularly when unusual regions of text were
copied into the edit buffer. The <br>
standard developers viewed these as bugs, and they are not
permitted for consistency and simplicity of
specification.</p>

<p style="margin-top: 1em">Historically, a P or p command
(or an ex put command executed from open or visual mode)
executed in an empty file, left an empty line as the first
line of the file. For consis&acirc; <br>
tency and simplicity of specification, POSIX.1&acirc;2008
does not permit this behavior.</p>

<p style="margin-top: 1em">Replace Character <br>
Historically, the r command did not correctly handle the
erase and word erase characters as arguments, nor did it
handle an associated count greater than 1 with a
&lt;carriage- <br>
return&gt; argument, for which it replaced count characters
with a single &lt;newline&gt;. POSIX.1&acirc;2008 does not
permit these inconsistencies.</p>

<p style="margin-top: 1em">Historically, the r command
permitted the &lt;control&gt;&acirc;V escaping of entered
characters, such as &lt;ESC&gt; and the
&lt;carriage-return&gt;; however, it required two leading
&lt;control&gt;&acirc;V char&acirc; <br>
acters instead of one. POSIX.1&acirc;2008 requires that this
be changed for consistency with the other text input
commands of vi.</p>

<p style="margin-top: 1em">Historically, it is an error to
enter the r command if there are less than count characters
at or after the cursor in the line. While a reasonable and
unambiguous extension would <br>
be to permit the r command on empty lines, it would require
that too large a count be adjusted to match the number of
characters at or after the cursor for consistency, which is
<br>
sufficiently different from historical practice to be
avoided. POSIX.1&acirc;2008 requires conformance to
historical practice.</p>

<p style="margin-top: 1em">Replace Characters <br>
Historically, if there were autoindent characters in the
line on which the R command was run, and autoindent was set,
the first &lt;newline&gt; would be properly indented and no
char&acirc; <br>
acters would be replaced by the &lt;newline&gt;. Each
additional &lt;newline&gt; would replace n characters, where
n was the number of characters that were needed to indent
the rest of the <br>
line to the proper indentation level. This behavior is a bug
and is not permitted by POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">Undo <br>
Historical practice for cursor positioning after undoing
commands was mixed. In most cases, when undoing commands
that affected a single line, the cursor was moved to the
start <br>
of added or changed text, or immediately after deleted text.
However, if the user had moved from the line being changed,
the column was either set to the first non-&lt;blank&gt;,
<br>
returned to the origin of the command, or remained
unchanged. When undoing commands that affected multiple
lines or entire lines, the cursor was moved to the first
character in <br>
the first line restored. As an example of how inconsistent
this was, a search, followed by an o text input command,
followed by an undo would return the cursor to the location
<br>
where the o command was entered, but a cw command followed
by an o command followed by an undo would return the cursor
to the first non-&lt;blank&gt; of the line.
POSIX.1&acirc;2008 requires <br>
the most useful of these behaviors, and discards the least
useful, in the interest of consistency and simplicity of
specification.</p>

<p style="margin-top: 1em">Yank <br>
Historically, the yank command did not move to the end of
the motion if the motion was in the forward direction. It
moved to the end of the motion if the motion was in the
back&acirc; <br>
ward direction, except for the _ command, or for the G and
&rsquo; commands when the end of the motion was on the
current line. This was further complicated by the fact that
for a num&acirc; <br>
ber of motion commands, the yank command moved the cursor
but did not update the screen; for example, a subsequent
command would move the cursor from the end of the motion,
even <br>
though the cursor on the screen had not reflected the cursor
movement for the yank command. POSIX.1&acirc;2008 requires
that all yank commands associated with backward motions move
the <br>
cursor to the end of the motion for consistency, and
specifically, to make &rsquo; commands as motions consistent
with search patterns as motions.</p>

<p style="margin-top: 1em">Yank Current Line <br>
Some historical implementations of the Y command did not
behave as described by POSIX.1&acirc;2008 when the
&rsquo;_&rsquo; key was remapped because they were
implemented by pushing the &rsquo;_&rsquo; key <br>
onto the input queue and reprocessing it. POSIX.1&acirc;2008
does not permit this behavior.</p>

<p style="margin-top: 1em">Redraw Window <br>
Historically, the z command always redrew the screen. This
is permitted but not required by POSIX.1&acirc;2008, because
of the frequent use of the z command in macros such as map n
nz. <br>
for screen positioning, instead of its use to change the
screen size. The standard developers believed that expanding
or scrolling the screen offered a better interface for <br>
users. The ability to redraw the screen is preserved if the
optional new window size is specified, and in the
&lt;control&gt;&acirc;L and &lt;control&gt;&acirc;R
commands.</p>

<p style="margin-top: 1em">The semantics of z^ are
confusing at best. Historical practice is that the screen
before the screen that ended with the specified line is
displayed. POSIX.1&acirc;2008 requires confor&acirc; <br>
mance to historical practice.</p>

<p style="margin-top: 1em">Historically, the z command
would not display a partial line at the top or bottom of the
screen. If the partial line would normally have been
displayed at the bottom of the <br>
screen, the command worked, but the partial line was
replaced with &rsquo;@&rsquo; characters. If the partial
line would normally have been displayed at the top of the
screen, the command <br>
would fail. For consistency and simplicity of specification,
POSIX.1&acirc;2008 does not permit this behavior.</p>

<p style="margin-top: 1em">Historically, the z command with
a line specification of 1 ignored the command. For
consistency and simplicity of specification,
POSIX.1&acirc;2008 does not permit this behavior.</p>

<p style="margin-top: 1em">Historically, the z command did
not set the cursor column to the first non-&lt;blank&gt; for
the character if the first screen was to be displayed, and
was already displayed. For con&acirc; <br>
sistency and simplicity of specification, POSIX.1&acirc;2008
does not permit this behavior.</p>

<p style="margin-top: 1em">Input Mode Commands in vi <br>
Historical implementations of vi did not permit the user to
erase more than a single line of input, or to use normal
erase characters such as line erase, worderase, and erase to
<br>
erase autoindent characters. As there exist implementations
of vi that do not have these limitations, both behaviors are
permitted, but only historical practice is required. In <br>
the case of these extensions, vi is required to pause at the
autoindent and previous line boundaries.</p>

<p style="margin-top: 1em">Historical implementations of vi
updated only the portion of the screen where the current
cursor character was displayed. For example, consider the vi
input keystrokes:</p>


<p style="margin-top: 1em">iabcd&lt;escape&gt;0C&lt;tab&gt;</p>

<p style="margin-top: 1em">Historically, the &lt;tab&gt;
would overwrite the characters &quot;abcd&quot; when it was
displayed. Other implementations replace only the
&rsquo;a&rsquo; character with the &lt;tab&gt;, and then
push the rest <br>
of the characters ahead of the cursor. Both implementations
have problems. The historical implementation is probably
visually nicer for the above example; however, for the
key&acirc; <br>
strokes:</p>


<p style="margin-top: 1em">iabcd&lt;ESC&gt;0R&lt;tab&gt;&lt;ESC&gt;</p>

<p style="margin-top: 1em">the historical implementation
results in the string &quot;bcd&quot; disappearing and then
magically reappearing when the &lt;ESC&gt; character is
entered. POSIX.1&acirc;2008 requires the former behav&acirc;
<br>
ior when overwriting erase-columns&acirc;that is,
overwriting characters that are no longer logically part of
the edit buffer&acirc;and the latter behavior otherwise.</p>

<p style="margin-top: 1em">Historical implementations of vi
discarded the &lt;control&gt;&acirc;D and
&lt;control&gt;&acirc;T characters when they were entered at
places where their command functionality was not
appropriate. <br>
POSIX.1&acirc;2008 requires that the &lt;control&gt;&acirc;T
functionality always be available, and that
&lt;control&gt;&acirc;D be treated as any other key when not
operating on autoindent characters.</p>

<p style="margin-top: 1em">NUL <br>
Some historical implementations of vi limited the number of
characters entered using the NUL input character to 256
bytes. POSIX.1&acirc;2008 permits this limitation; however,
imple&acirc; <br>
mentations are encouraged to remove this limit.</p>

<p style="margin-top: 1em">&lt;control&gt;&acirc;D <br>
See also Rationale for the input mode command
&lt;newline&gt;. The hidden assumptions in the
&lt;control&gt;&acirc;D command (and in the vi autoindent
specification in general) is that &lt;space&gt; <br>
characters take up a single column on the screen and that
&lt;tab&gt; characters are comprised of an integral number
of &lt;space&gt; characters.</p>

<p style="margin-top: 1em">&lt;newline&gt; <br>
Implementations are permitted to rewrite autoindent
characters in the line when &lt;newline&gt;,
&lt;carriage-return&gt;, &lt;control&gt;&acirc;D, and
&lt;control&gt;&acirc;T are entered, or when the shift
commands <br>
are used, because historical implementations have both done
so and found it necessary to do so. For example, a
&lt;control&gt;&acirc;D when the cursor is preceded by a
single &lt;tab&gt;, with <br>
tabstop set to 8, and shiftwidth set to 3, will result in
the &lt;tab&gt; being replaced by several &lt;space&gt;
characters.</p>

<p style="margin-top: 1em">&lt;control&gt;&acirc;T <br>
See also the Rationale for the input mode command
&lt;newline&gt;. Historically, &lt;control&gt;&acirc;T only
worked if no non-&lt;blank&gt; characters had yet been input
in the current input line. In <br>
addition, the characters inserted by &lt;control&gt;&acirc;T
were treated as autoindent characters, and could not be
erased using normal user erase characters. Because
implementations exist <br>
that do not have these limitations, and as moving to a
column boundary is generally useful, POSIX.1&acirc;2008
requires that both limitations be removed.</p>

<p style="margin-top: 1em">&lt;control&gt;&acirc;V <br>
Historically, vi used ^V, regardless of the value of the
literal-next character of the terminal. POSIX.1&acirc;2008
requires conformance to historical practice.</p>

<p style="margin-top: 1em">The uses described for
&lt;control&gt;&acirc;V can also be accomplished with
&lt;control&gt;&acirc;Q, which is useful on terminals that
use &lt;control&gt;&acirc;V for the down-arrow function.
However, most histor&acirc; <br>
ical implementations use &lt;control&gt;&acirc;Q for the
termios START character, so the editor will generally not
receive the &lt;control&gt;&acirc;Q unless stty ixon mode is
set to off. (In addition, <br>
some historical implementations of vi explicitly set ixon
mode to on, so it was difficult for the user to set it to
off.) Any of the command characters described in
POSIX.1&acirc;2008 <br>
can be made ineffective by their selection as termios
control characters, using the stty utility or other methods
described in the System Interfaces volume of
POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">&lt;ESC&gt; <br>
Historically, SIGINT alerted the terminal when used to end
input mode. This behavior is permitted, but not required, by
POSIX.1&acirc;2008.</p>

<p style="margin-top: 1em">FUTURE DIRECTIONS <br>
None.</p>

<p style="margin-top: 1em">SEE ALSO <br>
ed, ex, stty</p>

<p style="margin-top: 1em">The Base Definitions volume of
POSIX.1&acirc;2008, Section 12.2, Utility Syntax
Guidelines</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Portions of this text are reprinted and reproduced in
electronic form from IEEE Std 1003.1, 2013 Edition, Standard
for Information Technology -- Portable Operating System
Inter&acirc; <br>
face (POSIX), The Open Group Base Specifications Issue 7,
Copyright (C) 2013 by the Institute of Electrical and
Electronics Engineers, Inc and The Open Group. (This is <br>
POSIX.1-2008 with the 2013 Technical Corrigendum 1 applied.)
In the event of any discrepancy between this version and the
original IEEE and The Open Group Standard, the original <br>
IEEE and The Open Group Standard is the referee document.
The original Standard can be obtained online at
http://www.unix.org/online.html .</p>

<p style="margin-top: 1em">Any typographical or formatting
errors that appear in this page are most likely to have been
introduced during the conversion of the source files to man
page format. To report <br>
such errors, see
https://www.kernel.org/doc/man-pages/reporting_bugs.html
.</p>

<p style="margin-top: 1em">IEEE/The Open Group 2013
VI(1POSIX)</p>
<hr>
</body>
</html>
