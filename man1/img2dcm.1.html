<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:18:28 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>img2dcm(1) OFFIS DCMTK img2dcm(1)</p>

<p style="margin-top: 1em">NAME <br>
img2dcm - Convert standard image formats into DICOM
format</p>

<p style="margin-top: 1em">SYNOPSIS <br>
img2dcm [options] imgfile-in dcmfile-out</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The img2dcm tool serves as a conversion tool from a standard
image format like JPEG or BMP to DICOM. Different output SOP
Classes can be selected. The additional information <br>
(regarding patients, series, etc.) stored in the DICOM
output file can be extracted from other DICOM files which
serve as a &rsquo;template&rsquo; for the resulting DICOM
object. img2dcm can <br>
also be configured to invent missing DICOM type 1 and type 2
attributes to work even without any template dataset.</p>

<p style="margin-top: 1em">PARAMETERS <br>
imgfile-in image file to be imported</p>

<p style="margin-top: 1em">dcmfile-out DICOM output
file</p>

<p style="margin-top: 1em">OPTIONS <br>
general options <br>
-h --help <br>
print this help text and exit</p>

<p style="margin-top: 1em">--version <br>
print version information and exit</p>

<p style="margin-top: 1em">--arguments <br>
print expanded command line arguments</p>

<p style="margin-top: 1em">-q --quiet <br>
quiet mode, print no warnings and errors</p>

<p style="margin-top: 1em">-v --verbose <br>
verbose mode, print processing details</p>

<p style="margin-top: 1em">-d --debug <br>
debug mode, print debug information</p>

<p style="margin-top: 1em">-ll --log-level [l]evel: string
constant <br>
(fatal, error, warn, info, debug, trace) <br>
use level l for the logger</p>

<p style="margin-top: 1em">-lc --log-config [f]ilename:
string <br>
use config file f for the logger</p>

<p style="margin-top: 1em">input options <br>
general:</p>

<p style="margin-top: 1em">-i --input-format [i]nput file
format: string <br>
supported formats: JPEG (default), BMP</p>

<p style="margin-top: 1em">-df --dataset-from [f]ilename:
string <br>
use dataset from DICOM file f</p>

<p style="margin-top: 1em">-stf --study-from [f]ilename:
string <br>
read patient/study from DICOM file f</p>

<p style="margin-top: 1em">-sef --series-from [f]ilename:
string <br>
read patient/study/series from DICOM file f</p>

<p style="margin-top: 1em">-ii --instance-inc <br>
increase instance number read from DICOM file</p>

<p style="margin-top: 1em">JPEG format:</p>

<p style="margin-top: 1em">-dp --disable-progr <br>
disable support for progressive JPEG</p>

<p style="margin-top: 1em">-de --disable-ext <br>
disable support for extended sequential JPEG</p>

<p style="margin-top: 1em">-jf --insist-on-jfif <br>
insist on JFIF header existence</p>

<p style="margin-top: 1em">-ka --keep-appn <br>
keep APPn sections (except JFIF)</p>

<p style="margin-top: 1em">processing options <br>
attribute checking:</p>

<p style="margin-top: 1em">--do-checks <br>
enable attribute validity checking (default)</p>

<p style="margin-top: 1em">--no-checks <br>
disable attribute validity checking</p>

<p style="margin-top: 1em">+i2 --insert-type2 <br>
insert missing type 2 attributes (default) <br>
(only with --do-checks)</p>

<p style="margin-top: 1em">-i2 --no-type2-insert <br>
do not insert missing type 2 attributes <br>
(only with --do-checks)</p>

<p style="margin-top: 1em">+i1 --invent-type1 <br>
invent missing type 1 attributes <br>
(only with --do-checks)</p>

<p style="margin-top: 1em">-i1 --no-type1-invent <br>
do not invent missing type 1 attributes <br>
(only with --do-checks)</p>

<p style="margin-top: 1em">character set:</p>

<p style="margin-top: 1em">+l1 --latin1 <br>
set latin-1 as standard character set (default)</p>

<p style="margin-top: 1em">-l1 --no-latin1 <br>
keep 7-bit ASCII as standard character set</p>

<p style="margin-top: 1em">other processing options:</p>

<p style="margin-top: 1em">-k --key [k]ey:
gggg,eeee=&quot;str&quot;, path or dictionary
name=&quot;str&quot; <br>
add further attribute</p>

<p style="margin-top: 1em">output options <br>
target SOP class:</p>

<p style="margin-top: 1em">-sc --sec-capture <br>
write Secondary Capture SOP class</p>

<p style="margin-top: 1em">-nsc --new-sc <br>
write new Secondary Capture SOP classes</p>

<p style="margin-top: 1em">-vlp --vl-photo <br>
write Visible Light Photographic SOP class (default)</p>

<p style="margin-top: 1em">output file format:</p>

<p style="margin-top: 1em">+F --write-file <br>
write file format (default)</p>

<p style="margin-top: 1em">-F --write-dataset <br>
write data set without file meta information</p>

<p style="margin-top: 1em">group length encoding:</p>

<p style="margin-top: 1em">+g= --group-length-recalc <br>
recalculate group lengths if present (default)</p>

<p style="margin-top: 1em">+g --group-length-create <br>
always write with group length elements</p>

<p style="margin-top: 1em">-g --group-length-remove <br>
always write without group length elements</p>

<p style="margin-top: 1em">length encoding in sequences and
items:</p>

<p style="margin-top: 1em">+e --length-explicit <br>
write with explicit lengths (default)</p>

<p style="margin-top: 1em">-e --length-undefined <br>
write with undefined lengths</p>

<p style="margin-top: 1em">data set trailing padding (not
with --write-dataset):</p>

<p style="margin-top: 1em">-p --padding-off <br>
no padding (implicit if --write-dataset)</p>

<p style="margin-top: 1em">+p --padding-create [f]ile-pad
[i]tem-pad: integer <br>
align file on multiple of f bytes <br>
and items on multiple of i bytes</p>

<p style="margin-top: 1em">NOTES <br>
Attribute Sources <br>
For converting a general image format into DICOM format, the
img2dcm application may be fed with some additional input
for filling mandatory (and optional) attributes in the new
<br>
DICOM file like patient, study and series information. This
information can be collected using different approaches,
which can be combined and are applied to the result file in
<br>
the following order:</p>

<p style="margin-top: 1em">&Acirc;&middot; Using the
--dataset-from option img2dcm is forced to import attributes
from an existing DICOM file. The given DICOM file is fully
imported and serves as the basis for all <br>
further export operations. As an exception, the SOP Instance
UID is not copied by this option. Also image related data
like Rows, Columns etc. is exchanged during conversion. <br>
Note that img2dcm does not check any other attribute values
for validity, e. g. it does not look into sequences to adapt
any attributes to the new object (referenced images <br>
etc.). Therefore, it is recommended to use the templates in
the data directory for (old) SC and VLP objects. See also
section &rsquo;Input Templates&rsquo;. <br>
&Acirc;&middot; The --study-from and --series-from options
(mutually exclusive) can be used to import patient, study
and series information from an existing DICOM file. If
--series-from is <br>
specified, then the given DICOM file is opened by img2dcm
and all mandatory information down to the series level is
imported. Note that this includes patient, study and series
<br>
information. In case of --study-from, the series information
is excluded. The following attributes are taken over: <br>
Patient Level: <br>
Patient&rsquo;s Name <br>
Patient ID <br>
Patient&rsquo;s Sex <br>
Patient&rsquo;s Birth Date <br>
Specific Character Set</p>

<p style="margin-top: 1em">Study Level: <br>
Study Instance UID <br>
Study Date <br>
Study Time <br>
Referring Physician&rsquo;s Name <br>
Study ID <br>
Accession Number</p>

<p style="margin-top: 1em">Series Level (only in case of
option --series-from): <br>
Series Instance UID <br>
Series Number <br>
Manufacturer <br>
&Acirc;&middot; With the --insert-type2 and --invent-type1
options (both enabled per default), missing attributes (type
2 attributes) and/or missing attribute values (for type 1
attributes) <br>
are automatically added and invented by img2dcm. Please note
that these options are only evaluated if option --do-checks
is enabled (default). If the --no-checks options is <br>
enabled, no automatic attribute insertion will take place.
<br>
&Acirc;&middot; The --key option can be used to add further
attributes to the DICOM output file. This option is applied
at the very end, just before saving the DICOM file. It is
also possible <br>
to specify sequences, items and nested attributes using the
--key option. In these cases, a special &rsquo;path&rsquo;
notation has to be used. Details on this path notation can
be found <br>
in the documentation of dcmodify. <br>
UIDs <br>
New Study and Series Instance UIDs are generated if
necessary after applying the --study-from and --series
options. If Study Instance UID or Series Instance UID are
not present <br>
after these steps, they are newly generated, independently
from each other. A contrary behavior is chosen for the SOP
Instance UID that one could expect to be taken over when
<br>
using the --dataset-from option. This is not the case, the
SOP Instance UID is not copied to the new object. This
should be the desirable behavior for most use cases.
However, if <br>
a certain SOP Instance UID should be inserted into the new
object, the --key option should be used. <br>
Input Templates <br>
For supporting the conversion into DICOM, img2dcm comes with
some pre-defined templates which can be used for the
--dataset-from option (see sample files SC.dump and
VLP.dump). <br>
These templates should be filled with the desired values and
then must be dumped (converted) to a DICOM file before
actually being used with img2dcm. Use dump2dcm to convert
the <br>
dump to DICOM. Example: <br>
dump2dcm SC.dump SC.dcm</p>

<p style="margin-top: 1em">It is possible to use any DICOM
file as a template. Please note that the complete DICOM
dataset is imported; hence, it should be assured that only
attributes are present which <br>
should be part of the constructed DICOM object. The SOP
Class UID and the Pixel Data attributes (including
attributes like Rows, Columns etc.) are not copied but
replaced by <br>
img2dcm during conversion. <br>
Input Plugins <br>
The img2dcm application currently supports the JPEG and the
BMP image format as input. <br>
JPEG Input Plugin <br>
For JPEG, the original JPEG from the source file is not
decoded but extracted and slightly transformed (e. g. JFIF
header is cut off) to allow fast conversion of even big JPEG
<br>
files without the need of decoding and re-encoding. The JPEG
plugin chooses the necessary output transfer syntax
automatically depending on the actual encoding of the data
inside <br>
the JPEG file. Therefore, the following Transfer Syntaxes
(and their corresponding JPEG encodings) are used by the
JPEG plugin: <br>
&Acirc;&middot; JPEG Coding Process 1 Baseline, Lossy,
Non-Hierarchical, Sequential, DCT, Huffman, 8 Bit SOP Class
= 1.2.840.10008.1.2.4.50 <br>
&Acirc;&middot; JPEG Coding Process 2 (8-bit) and 4 (12-bit)
Extended, Lossy, Non-Hierarchical, Sequential, DCT, Huffman,
8/12 Bit SOP Class = 1.2.840.10008.1.2.4.51 <br>
&Acirc;&middot; JPEG Coding Process 10 (8-bit) and 12
(12-bit) Full Progression, lossy, Non-Hierarch.,
Progressive, DCT, Huffman, 8/12 Bit SOP Class =
1.2.840.10008.1.2.4.55 <br>
Color and grayscale images are supported. <br>
The support for the Extended JPEG Transfer Syntax can be
disabled (--disable-ext option) as well as the support for
the (retired) Progressive JPEG Transfer Syntax (--disable-
<br>
progr option). <br>
JPEG lossless encoding as well as any arithmetic or
hierarchical JPEG encoding modes are not supported by the
plugin. <br>
JFIF (JPEG File Interchange Format) information facilitates
optional APPn markers in a JPEG file. Many digital cameras
do not integrate such JFIF information into the JPEG output
<br>
they create. For example, JFIF contains information about
the pixel aspect ratio of the compressed image. If you want
the img2dcm application to insist on a JFIF header in the
<br>
JPEG stream, you can use the option --insist-on-jfif which
will abort if no JFIF information can be found. By default,
missing JFIF information is ignored. <br>
For DICOM it is kind of a &rsquo;gray zone&rsquo;, whether
the integration of JFIF (or any other APPn) data into the
DICOM object&rsquo;s internal JPEG stream is allowed or not.
However, the most <br>
reliable approach is to cut those markers and their
information off the JPEG stream. This approach is also taken
by the img2dcm application. By default, all APPn markers are
cut <br>
off from the original JPEG stream. However, if you want to
keep other APPn markers than JFIF (e. g. EXIF information)
inside the DICOM stream, the option --keep-appn does the
<br>
trick. It should also be slightly faster than cutting off
APPn information, because it is not necessary to scan the
whole JPEG stream for such data. JFIF information is always
<br>
removed by img2dcm. <br>
BMP Input Plugin <br>
img2dcm supports BMP as input format. However, so far only
the most commmon BMP images are supported. In particular,
BMP images which use bitfields or run length encoding will
be <br>
rejected. Such images are uncommon. All input images will be
converted into a DICOM image with RGB color model and a bit
depth of 24. There are no specific options for fine- <br>
tuning BMP format conversion. <br>
Output Plugins <br>
The desired output SOP Class can be selected on the command
line. Currently, an export plugin for the Secondary Capture
Image SOP class (default, option -sc), the new Secondary
<br>
Capture Image SOP classes (option -nsc) and Visible Light
Photographic Image SOP class (option -vl) are available.
Please note that the first one is deprecated according to
the <br>
DICOM standard but is selected as a default because it is
widely supported. Future versions of img2dcm might provide
further output plugins for other SOP Classes. <br>
For the new Secondary Capture SOP classes, it is not
possible to specify which specific SOP class should be used
for output. That is because these new SOP classes are <br>
differentiated from each other by color depth (1/8/16) and
the fact whether the image is black/white or color. That is
why img2dcm decides during conversion, which output SOP <br>
class is suitable for a given source image. EXAMPLES <br>
Here are some examples that show how the img2dcm application
can be used. <br>
1. img2dcm image.jpg out.dcm <br>
Read JPEG file &rsquo;image.jpg&rsquo;, convert to the old
Secondary Capture SOP class and save the result to DICOM
file &rsquo;out.dcm&rsquo;. This is the easiest way of using
img2dcm. Any type 1 <br>
and type 2 attributes required for writing valid objects of
this SOP class are inserted automatically. <br>
2. img2dcm -i BMP image.bmp out.dcm <br>
Same as above but tells img2dcm to read a BMP file instead
of JPEG. <br>
3. img2dcm image.jpg out.dcm -vlp -k
&rsquo;PatientName=Bond^James&rsquo; <br>
Same as first example, but writes Visible Light Photographic
Image object to &rsquo;out.dcm&rsquo; and sets PatientName
to &rsquo;Bond^James&rsquo; which otherwise would be left
empty. <br>
4. img2dcm image.jpg out.dcm --series-from template.dcm -k
&rsquo;PatientName=Bond^James&rsquo; <br>
Same as 1), but imports patient/study/series infomation from
DICOM file &rsquo;template.dcm&rsquo;. Please note that
attribute PatientName will contain &rsquo;Bond^James&rsquo;
at the end, any value <br>
from &rsquo;template.dcm&rsquo; will be overwritten. That
is, because the -k option is applied at the very end of the
conversion pipeline (see above). <br>
5. img2dcm image.jpg out.dcm --no-checks <br>
Same as 1), but does not perform any attribute checking and
no type 1 and type 2 attribute insertion! So in this case,
an invalid DICOM object would be generated. This can be <br>
interesting if the output file is not meant to be completed
but will undergo further transformations, e. g. adding
attributes using dcmodify. Only use option --no-checks if
<br>
you know what you are doing! <br>
6. img2dcm image.jpg out.dcm --no-type1-invent <br>
Same as 1), but does not insert missing type 1 attributes
and/or their values. Type 2 attributes will be inserted.
Note that in this case it must be assured that all type 1
<br>
attributes are provided by other means, i. e. by adding them
with the --key option. Otherwise, img2dcm will report an
error and will stop converting. <br>
7. img2dcm image.jpg out.dcm --keep-appn --insist-on-jfif
<br>
Same as 1), but takes over APPn information like EXIF into
the DICOM object&rsquo;s resulting JPEG stream. Further,
--insist-on-jfif will force img2dcm to abort if no JFIF <br>
information is existent in the source file. LOGGING <br>
The level of logging output of the various command line
tools and underlying libraries can be specified by the user.
By default, only errors and warnings are written to the <br>
standard error stream. Using option --verbose also
informational messages like processing details are reported.
Option --debug can be used to get more details on the
internal <br>
activity, e.g. for debugging purposes. Other logging levels
can be selected using option --log-level. In --quiet mode
only fatal errors are reported. In such very severe error
<br>
events, the application will usually terminate. For more
details on the different logging levels, see documentation
of module &rsquo;oflog&rsquo;. <br>
In case the logging output should be written to file
(optionally with logfile rotation), to syslog (Unix) or the
event log (Windows) option --log-config can be used. This
<br>
configuration file also allows for directing only certain
messages to a particular output stream and for filtering
certain messages based on the module or application where
they <br>
are generated. An example configuration file is provided in
&lt;etcdir&gt;/logger.cfg. COMMAND LINE <br>
All command line tools use the following notation for
parameters: square brackets enclose optional values (0-1),
three trailing dots indicate that multiple values are
allowed <br>
(1-n), a combination of both means 0 to n values. <br>
Command line options are distinguished from parameters by a
leading &rsquo;+&rsquo; or &rsquo;-&rsquo; sign,
respectively. Usually, order and position of command line
options are arbitrary (i.e. they <br>
can appear anywhere). However, if options are mutually
exclusive the rightmost appearance is used. This behavior
conforms to the standard evaluation rules of common Unix
shells. <br>
In addition, one or more command files can be specified
using an &rsquo;@&rsquo; sign as a prefix to the filename
(e.g. @command.txt). Such a command argument is replaced by
the content of <br>
the corresponding text file (multiple whitespaces are
treated as a single separator unless they appear between two
quotation marks) prior to any further evaluation. Please
note <br>
that a command file cannot contain another command file.
This simple but effective approach allows one to summarize
common combinations of options/parameters and avoids longish
<br>
and confusing command lines (an example is provided in file
&lt;datadir&gt;/dumppat.txt). ENVIRONMENT <br>
The img2dcm utility will attempt to load DICOM data
dictionaries specified in the DCMDICTPATH environment
variable. By default, i.e. if the DCMDICTPATH environment
variable is <br>
not set, the file &lt;datadir&gt;/dicom.dic will be loaded
unless the dictionary is built into the application (default
for Windows). <br>
The default behavior should be preferred and the DCMDICTPATH
environment variable only used when alternative data
dictionaries are required. The DCMDICTPATH environment
variable <br>
has the same format as the Unix shell PATH variable in that
a colon (&rsquo;:&rsquo;) separates entries. On Windows
systems, a semicolon (&rsquo;;&rsquo;) is used as a
separator. The data dictionary <br>
code will attempt to load each file specified in the
DCMDICTPATH environment variable. It is an error if no data
dictionary can be loaded. FILES <br>
&lt;datadir&gt;/SC.dump - Sample dump file for Secondary
Capture images <br>
&lt;datadir&gt;/VLP.dump - Sample dump file for Visible
Light Photographic images SEE ALSO <br>
dcm2pnm(1), dcmj2pnm(1), dump2dcm(1), dcmconv(1),
dcmodify(1) COPYRIGHT <br>
Copyright (C) 2007-2014 by OFFIS e.V., Escherweg 2, 26121
Oldenburg, Germany.</p>

<p style="margin-top: 1em">Version 3.6.1 Tue Feb 16 2016
img2dcm(1)</p>
<hr>
</body>
</html>
