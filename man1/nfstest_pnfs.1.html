<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:27:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>NFSTEST_PNFS(1) nfstest_pnfs 1.0.3 NFSTEST_PNFS(1)</p>

<p style="margin-top: 1em">NAME <br>
nfstest_pnfs - Basic pNFS functional tests</p>

<p style="margin-top: 1em">SYNOPSIS <br>
nfstest_pnfs --server &lt;server&gt; [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Verify basic pNFS functionality for file (both READ and
WRITE), including opening a second file within the same
mount and having a lock on the file. Also, verify basic pNFS
<br>
functionality for a file opened for both READ and WRITE
while reading the file first and then writing to it or the
other way around by writing to the file fist and then
reading <br>
the file. These tests verify proper functionality of pNFS
and NFSv4.1 as well.</p>

<p style="margin-top: 1em">OPTIONS <br>
--version <br>
show program&rsquo;s version number and exit</p>

<p style="margin-top: 1em">-h, --help <br>
show this help message and exit</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
File where options are specified besides the system wide
file /etc/nfstest, user wide file $HOME/.nfstest or in the
current directory .nfstest file</p>

<p style="margin-top: 1em">NFS specific options: <br>
-s SERVER, --server=SERVER <br>
Server name or IP address</p>

<p style="margin-top: 1em">-e EXPORT, --export=EXPORT <br>
Exported file system to mount [default: &rsquo;/&rsquo;]</p>

<p style="margin-top: 1em">--nfsversion=NFSVERSION <br>
NFS version, e.g., 3, 4, 4.1, etc. [default: 4.1]</p>

<p style="margin-top: 1em">-m MTPOINT, --mtpoint=MTPOINT
<br>
Mount point [default: &rsquo;/mnt/t&rsquo;]</p>

<p style="margin-top: 1em">-p PORT, --port=PORT <br>
NFS server port [default: 2049]</p>

<p style="margin-top: 1em">--proto=PROTO <br>
NFS protocol name [default: &rsquo;tcp&rsquo;]</p>

<p style="margin-top: 1em">--sec=SEC <br>
Security flavor [default: &rsquo;sys&rsquo;]</p>

<p style="margin-top: 1em">-o MTOPTS, --mtopts=MTOPTS <br>
Mount options [default:
&rsquo;hard,rsize=4096,wsize=4096&rsquo;]</p>

<p style="margin-top: 1em">--datadir=DATADIR <br>
Data directory where files are created, directory is created
on the mount point [default: &rsquo;&rsquo;]</p>

<p style="margin-top: 1em">Logging options: <br>
-v VERBOSE, --verbose=VERBOSE <br>
Verbose level for debug messages [default:
&rsquo;none&rsquo;]</p>

<p style="margin-top: 1em">--tverbose=TVERBOSE <br>
Verbose level for test messages [default:
&rsquo;1&rsquo;]</p>

<p style="margin-top: 1em">--createlog <br>
Create log file</p>

<p style="margin-top: 1em">--warnings <br>
Display warnings</p>

<p style="margin-top: 1em">--tag=TAG <br>
Informational tag, it is displayed as an INFO message
[default: &rsquo;&rsquo;]</p>

<p style="margin-top: 1em">Packet trace options: <br>
--createtraces <br>
Create a packet trace for each test</p>

<p style="margin-top: 1em">--tbsize=TBSIZE <br>
Capture buffer size for tcpdump [default:
&rsquo;50000&rsquo;]</p>

<p style="margin-top: 1em">--trcdelay=TRCDELAY <br>
Seconds to delay before stopping packet trace [default:
0.0]</p>

<p style="margin-top: 1em">--keeptraces <br>
Do not remove any trace files [default: remove trace files
if no errors]</p>

<p style="margin-top: 1em">--rmtraces <br>
Remove trace files [default: remove trace files if no
errors]</p>

<p style="margin-top: 1em">-i INTERFACE,
--interface=INTERFACE <br>
Device interface [default: automatically selected]</p>

<p style="margin-top: 1em">File options: <br>
--nfiles=NFILES <br>
Number of files to create [default: 2]</p>

<p style="margin-top: 1em">--filesize=FILESIZE <br>
File size to use for test files [default: 65536]</p>

<p style="margin-top: 1em">--rsize=RSIZE <br>
Read size to use when reading files [default: 4096]</p>

<p style="margin-top: 1em">--wsize=WSIZE <br>
Write size to use when writing files [default: 4096]</p>

<p style="margin-top: 1em">--iodelay=IODELAY <br>
Seconds to delay I/O operations [default: 0.1]</p>

<p style="margin-top: 1em">--offset-delta=OFFSET_DELTA <br>
Read/Write offset delta [default: 4096]</p>

<p style="margin-top: 1em">Path options: <br>
--sudo=SUDO <br>
Full path of binary for sudo [default:
&rsquo;/usr/bin/sudo&rsquo;]</p>

<p style="margin-top: 1em">--tcpdump=TCPDUMP <br>
Full path of binary for tcpdump [default:
&rsquo;/usr/sbin/tcpdump&rsquo;]</p>

<p style="margin-top: 1em">--iptables=IPTABLES <br>
Full path of binary for iptables [default:
&rsquo;/sbin/iptables&rsquo;]</p>

<p style="margin-top: 1em">--messages=MESSAGES <br>
Full path of log messages file [default:
&rsquo;/var/log/messages&rsquo;]</p>

<p style="margin-top: 1em">--tmpdir=TMPDIR <br>
Temporary directory [default: &rsquo;/tmp&rsquo;]</p>

<p style="margin-top: 1em">Debug options: <br>
--nocleanup <br>
Do not cleanup created files</p>

<p style="margin-top: 1em">--bugmsgs=BUGMSGS <br>
File containing test messages to mark as bugs if they
failed</p>

<p style="margin-top: 1em">--ignore <br>
Ignore all bugs given by bugmsgs</p>

<p style="margin-top: 1em">--nomount <br>
Do not mount server and run the tests on local disk
space</p>

<p style="margin-top: 1em">--basename=BASENAME <br>
Base name for all files and logs [default: automatically
generated]</p>

<p style="margin-top: 1em">--nfsdebug=NFSDEBUG <br>
Set NFS kernel debug flags and save log messages [default:
&rsquo;&rsquo;]</p>

<p style="margin-top: 1em">--rpcdebug=RPCDEBUG <br>
Set RPC kernel debug flags and save log messages [default:
&rsquo;&rsquo;]</p>

<p style="margin-top: 1em">Test options: <br>
--runtest=RUNTEST <br>
Comma separated list of tests to run, if list starts with a
&rsquo;^&rsquo; then all tests are run except the ones
listed [default: &rsquo;all&rsquo;]</p>

<p style="margin-top: 1em">TESTS <br>
read <br>
Verify basic pNFS functionality on a couple of files opened
for <br>
reading within the same mount.</p>

<p style="margin-top: 1em">write <br>
Verify basic pNFS functionality on a couple of files opened
for <br>
writing and then re-opening the first file for writing
within <br>
the same mount.</p>

<p style="margin-top: 1em">write_read <br>
Verify basic pNFS functionality on a couple of files opened
for <br>
writing and then re-opening the first file for reading
within <br>
the same mount.</p>

<p style="margin-top: 1em">read_lock <br>
Verify traffic for locked file opened for reading using
pNFS.</p>

<p style="margin-top: 1em">write_lock <br>
Verify traffic for locked file opened for writing using
pNFS.</p>

<p style="margin-top: 1em">setattr <br>
Verify setattr traffic for file using pNFS.</p>

<p style="margin-top: 1em">setattr_lock <br>
Verify setattr traffic for locked file using pNFS.</p>

<p style="margin-top: 1em">rw_read <br>
Verify traffic for file opened for read and write: reading
file first.</p>

<p style="margin-top: 1em">rw_write <br>
Verify traffic for file opened for read and write: writing
file first.</p>

<p style="margin-top: 1em">one_ds <br>
Verify client only connects to the DS with I/O.</p>

<p style="margin-top: 1em">rsize <br>
Verify traffic for file using pNFS when mount option rsize
&lt; 4096.</p>

<p style="margin-top: 1em">wsize <br>
Verify traffic for file using pNFS when mount option wsize
&lt; 4096.</p>

<p style="margin-top: 1em">rwsize <br>
Verify traffic for file using pNFS when mount option rsize
&lt; 4096 and wsize &lt; 4096.</p>

<p style="margin-top: 1em">nfsvers <br>
Verify file created with pNFS is read correctly from
different versions <br>
of NFS. Also, verify files created with different versions
of NFS are <br>
read correctly from pNFS</p>

<p style="margin-top: 1em">EXAMPLES <br>
The only required option is --server <br>
$ nfstest_pnfs --server 192.168.0.11</p>

<p style="margin-top: 1em">NOTES <br>
The user id in the local host must have access to run
commands as root using the &rsquo;sudo&rsquo; command
without the need for a password.</p>

<p style="margin-top: 1em">SEE ALSO <br>
nfstest.test_util(3), nfstest_alloc(1), nfstest_cache(1),
nfstest_delegation(1), nfstest_dio(1), nfstest_file(1),
nfstest_interop(1), nfstest_io(1), nfstest_lock(1), <br>
nfstest_pkt(1), nfstest_posix(1), nfstest_sparse(1),
nfstest_xid(1), packet.nfs.nfs4_const(3)</p>

<p style="margin-top: 1em">BUGS <br>
No known bugs.</p>

<p style="margin-top: 1em">AUTHOR <br>
Jorge Mora (mora@netapp.com)</p>

<p style="margin-top: 1em">NFStest 2.1.1 23 November 2015
NFSTEST_PNFS(1)</p>
<hr>
</body>
</html>
