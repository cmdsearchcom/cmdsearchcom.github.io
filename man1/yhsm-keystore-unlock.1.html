<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>yhsm-keystore-unlock(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">yhsm-keystore-unlock(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">yhsm-keystore-unlock(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
yhsm-keystore-unlock &#x2010; Unlock the keystore in a YubiHSM
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>yhsm-keystore-unlock</b> [ <i>options</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
In versions of the YubiHSM before 1.0, the YubiHSM could be protected using a
  'HSM password'. The YubiHSM would unlock it's cryptographic functions if the
  correct password was given, but it was a simple comparision test.
<div style="height: 1.00em;">&#x00A0;</div>
In YubiHSM 1.0, the password was changed into an actual key that was used to
  decrypt the contents of the YubiHSM internal key store, which was then AES-256
  encrypted using the new 'Master key' when stored in the device.
<div style="height: 1.00em;">&#x00A0;</div>
In YubiHSM 1.0, the option to also require an YubiKey OTP to unlock the keystore
  was also added. One or more 'Admin YubiKeys' can be configured in the YubiHSM,
  and an OTP from one of these must also be provided before the YubiHSM will
  enable it's cryptographic functions.
<div style="height: 1.00em;">&#x00A0;</div>
The OTP is simply validated against the non-encrypted internal database (not key
  store) in the YubiHSM though, but together with a 'Master key' not stored on
  the server with the YubiHSM, it provides enhanced security by being a second
  factor that an attacker can't just intercept even if the server is
  compromised.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--device</b></dt>
  <dd class="It-tag">device file name (default: /dev/ttyACM0).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b></dt>
  <dd class="It-tag">enable verbose operation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug</b></dt>
  <dd class="It-tag">enable debug printout, including all data sent to/from
      YubiHSM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-otp</b></dt>
  <dd class="It-tag">skip the prompt for an OTP. For use by scripts where no OTP
      is required and the Master Key is stored on the server with the
    YubiHSM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--stdin</b></dt>
  <dd class="It-tag">read password and/or OTP from stdin rather than prompting
      for them. Python prompts does not accept piped input, so this option have
      to be used to unlock the YubiHSM from a script for example.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">YubiHSM keystore successfully unlocked.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">Failed to unlock keystore.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Report python-pyhsm/yhsm-keystore-unlock bugs in the issue tracker &#x27E8;URL:
  https://github.com/Yubico/python-pyhsm/issues/ &#x27E9;
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The home page &#x27E8;URL: https://developers.yubico.com/python-pyhsm/ &#x27E9;
<div class="Pp"></div>
YubiHSMs can be obtained from Yubico &#x27E8;URL: http://www.yubico.com/
  &#x27E9;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">December 2011</td>
    <td class="foot-os">python-pyhsm</td>
  </tr>
</table>
</body>
</html>
