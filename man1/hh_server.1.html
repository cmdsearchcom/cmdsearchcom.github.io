<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>HH_SERVER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">HH_SERVER(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">HH_SERVER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
hh_server - Hack language typechecker daemon
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>hh_server</b> [<i>--check&#x00A0;</i>[<i>--json</i>]] <i>DIRECTORY</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>hh_server</b>(1) is the actual typechecker that enforces the Hack type
  system. It is typically accessed via <b>hh_client</b>(1); see the
  documentation for that tool for more information on the Hack type system and
  how to interface with <b>hh_server</b>(1).
<div style="height: 1.00em;">&#x00A0;</div>
Directly invoking <b>hh_server</b>(1) is of minimal use, since
  <b>hh_client</b>(1) will start and stop it as needed. The only widely useful
  manual invocation is <i>--check</i> mode.
<div style="height: 1.00em;">&#x00A0;</div>
With no options, <b>hh_server</b>(1) will start up, do an initial typecheck of
  <i>DIRECTORY</i>, and continue running, waiting for connections from
  <b>hh_client</b>(1). Again, this is not the normal way the server should be
  invoked -- just running <b>hh_client</b>(1) and ignoring the existence of this
  server binary is sufficient for common use.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check</b></dt>
  <dd class="It-tag">Start up, check the <i>DIRECTORY</i>, print type errors in
      a human-readable format, and then exit. This &quot;batch mode&quot; might
      be useful in cases where a single check is needed and so starting a
      long-running daemon is not appropriate, such as in a pre-commit hook. The
      output is intended for human consumption, not tools; for tool consumption,
      see <b>--json</b> below.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--json</b></dt>
  <dd class="It-tag">If <b>--check</b> is specified, generate machine-readable
      JSON output instead of the human-readable output generated by default.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check</b><i> TARGET</i></dt>
  <dd class="It-tag">Start up and check <i>DIRECTORY</i> in the same manner as
      <b>--check</b> mode. Then, re-check <i>TARGET</i> and attempt to add type
      annotations to locations in those files that are missing. The analysis
      process is slow and imperfect, but often useful. This process can change
      the code in ways that fail at runtime; see
      <i>http://docs.hhvm.com/hack/tools/introduction</i> for detailed
      information on how to combine this mode with <b>hackificator</b>(1) and
      <b>hack_remove_soft_types</b>(1) to do a full and safe conversion from PHP
      to Hack.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
If <b>--check</b> is specified, exits with 0 if there are no type errors,
  nonzero otherwise. Other exit values are undefined.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="ENVIRONMENT_and_FILES"><a class="selflink" href="#ENVIRONMENT_and_FILES">ENVIRONMENT
  and FILES</a></h1>
Uses the same scheme for constructing a path to a socket for client/server
  communication that <b>hh_client</b>(1) uses. See its documentation for a
  description.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
It might be useful to have a pre-commit hook to make sure that type errors don't
  sneak into trunk. A hook might want to directly invoke <b>hh_server</b>(1) so
  that it doesn't need a running daemon. That can be done with something like
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
hh_server --check /var/www
</pre>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
and, if that fails, printing its output and rejecting the commit. For tool
  usage, something like
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<pre>
hh_server --check --json /var/www
</pre>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
might be more appropriate; the JSON output can be passed up to a code review
  tool and displayed there.
<div style="height: 1.00em;">&#x00A0;</div>
This is only for cases where having a long-running daemon is inappropriate. For
  normal development usage, invoking <b>hh_client</b>(1) and allowing it to use
  the server itself will be much faster to check code and return type errors.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The Hack language is part of the HHVM project. Known bugs can be found at that
  tracker, and new ones should be reported there as well:
  <i>https://github.com/facebook/hhvm/issues</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>hh_client</b>(1),<b>&#x00A0;hackificator</b>(1),<b>&#x00A0;hack_remove_soft_types</b>(1).
<div>&#x00A0;</div>
<i>http://docs.hhvm.com/hack/typechecker/setup</i>
<div>&#x00A0;</div>
<i>http://www.hacklang.org/</i></div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
