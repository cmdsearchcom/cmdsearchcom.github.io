<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:37:23 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SETFACL(1) Access Control Lists SETFACL(1)</p>

<p style="margin-top: 1em">NAME <br>
setfacl - set file access control lists</p>

<p style="margin-top: 1em">SYNOPSIS <br>
setfacl [-bkndRLPvh] [{-m|-x} acl_spec] [{-M|-X} acl_file]
file ...</p>

<p style="margin-top: 1em">setfacl --restore=file</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility sets Access Control Lists (ACLs) of files and
directories. On the command line, a sequence of commands is
followed by a sequence of files (which in turn can be
fol&acirc; <br>
lowed by another sequence of commands, ...).</p>

<p style="margin-top: 1em">The options -m, and -x expect an
ACL on the command line. Multiple ACL entries are separated
by comma characters (&lsquo;,&rsquo;). The options -M, and
-X read an ACL from a file or from <br>
standard input. The ACL entry format is described in Section
ACL ENTRIES.</p>

<p style="margin-top: 1em">The --set and --set-file options
set the ACL of a file or a directory. The previous ACL is
replaced. ACL entries for this operation must include
permissions.</p>

<p style="margin-top: 1em">The -m (--modify) and -M
(--modify-file) options modify the ACL of a file or
directory. ACL entries for this operation must include
permissions.</p>

<p style="margin-top: 1em">The -x (--remove) and -X
(--remove-file) options remove ACL entries. It is not an
error to remove an entry which does not exist. Only ACL
entries without the perms field are <br>
accepted as parameters, unless POSIXLY_CORRECT is
defined.</p>

<p style="margin-top: 1em">When reading from files using
the -M, and -X options, setfacl accepts the output getfacl
produces. There is at most one ACL entry per line. After a
Pound sign (&lsquo;#&rsquo;), everything <br>
up to the end of the line is treated as a comment.</p>

<p style="margin-top: 1em">If setfacl is used on a file
system which does not support ACLs, setfacl operates on the
file mode permission bits. If the ACL does not fit
completely in the permission bits, <br>
setfacl modifies the file mode permission bits to reflect
the ACL as closely as possible, writes an error message to
standard error, and returns with an exit status greater than
<br>
0.</p>

<p style="margin-top: 1em">PERMISSIONS <br>
The file owner and processes capable of CAP_FOWNER are
granted the right to modify ACLs of a file. This is
analogous to the permissions required for accessing the file
mode. (On <br>
current Linux systems, root is the only user with the
CAP_FOWNER capability.)</p>

<p style="margin-top: 1em">OPTIONS <br>
-b, --remove-all <br>
Remove all extended ACL entries. The base ACL entries of the
owner, group and others are retained.</p>

<p style="margin-top: 1em">-k, --remove-default <br>
Remove the Default ACL. If no Default ACL exists, no
warnings are issued.</p>

<p style="margin-top: 1em">-n, --no-mask <br>
Do not recalculate the effective rights mask. The default
behavior of setfacl is to recalculate the ACL mask entry,
unless a mask entry was explicitly given. The mask entry
<br>
is set to the union of all permissions of the owning group,
and all named user and group entries. (These are exactly the
entries affected by the mask entry).</p>

<p style="margin-top: 1em">--mask <br>
Do recalculate the effective rights mask, even if an ACL
mask entry was explicitly given. (See the -n option.)</p>

<p style="margin-top: 1em">-d, --default <br>
All operations apply to the Default ACL. Regular ACL entries
in the input set are promoted to Default ACL entries.
Default ACL entries in the input set are discarded. (A <br>
warning is issued if that happens).</p>

<p style="margin-top: 1em">--restore=file <br>
Restore a permission backup created by &lsquo;getfacl
-R&rsquo; or similar. All permissions of a complete
directory subtree are restored using this mechanism. If the
input contains owner <br>
comments or group comments, setfacl attempts to restore the
owner and owning group. If the input contains flags comments
(which define the setuid, setgid, and sticky bits), <br>
setfacl sets those three bits accordingly; otherwise, it
clears them. This option cannot be mixed with other options
except &lsquo;--test&rsquo;.</p>

<p style="margin-top: 1em">--test <br>
Test mode. Instead of changing the ACLs of any files, the
resulting ACLs are listed.</p>

<p style="margin-top: 1em">-R, --recursive <br>
Apply operations to all files and directories recursively.
This option cannot be mixed with
&lsquo;--restore&rsquo;.</p>

<p style="margin-top: 1em">-L, --logical <br>
Logical walk, follow symbolic links to directories. The
default behavior is to follow symbolic link arguments, and
skip symbolic links encountered in subdirectories. Only <br>
effective in combination with -R. This option cannot be
mixed with &lsquo;--restore&rsquo;.</p>

<p style="margin-top: 1em">-P, --physical <br>
Physical walk, do not follow symbolic links to directories.
This also skips symbolic link arguments. Only effective in
combination with -R. This option cannot be mixed <br>
with &lsquo;--restore&rsquo;.</p>

<p style="margin-top: 1em">-v, --version <br>
Print the version of setfacl and exit.</p>

<p style="margin-top: 1em">-h, --help <br>
Print help explaining the command line options.</p>

<p style="margin-top: 1em">-- End of command line options.
All remaining parameters are interpreted as file names, even
if they start with a dash.</p>

<p style="margin-top: 1em">- If the file name parameter is
a single dash, setfacl reads a list of files from standard
input.</p>

<p style="margin-top: 1em">ACL ENTRIES <br>
The setfacl utility recognizes the following ACL entry
formats (blanks inserted for clarity):</p>

<p style="margin-top: 1em">[d[efault]:] [u[ser]:]uid
[:perms] <br>
Permissions of a named user. Permissions of the file owner
if uid is empty.</p>

<p style="margin-top: 1em">[d[efault]:] g[roup]:gid
[:perms] <br>
Permissions of a named group. Permissions of the owning
group if gid is empty.</p>

<p style="margin-top: 1em">[d[efault]:] m[ask][:] [:perms]
<br>
Effective rights mask</p>

<p style="margin-top: 1em">[d[efault]:] o[ther][:] [:perms]
<br>
Permissions of others.</p>

<p style="margin-top: 1em">Whitespace between delimiter
characters and non-delimiter characters is ignored.</p>

<p style="margin-top: 1em">Proper ACL entries including
permissions are used in modify and set operations. (options
-m, -M, --set and --set-file). Entries without the perms
field are used for deletion of <br>
entries (options -x and -X).</p>

<p style="margin-top: 1em">For uid and gid you can specify
either a name or a number.</p>

<p style="margin-top: 1em">The perms field is a combination
of characters that indicate the permissions: read (r), write
(w), execute (x), execute only if the file is a directory or
already has execute <br>
permission for some user (X). Alternatively, the perms field
can be an octal digit (0-7).</p>

<p style="margin-top: 1em">AUTOMATICALLY CREATED ENTRIES
<br>
Initially, files and directories contain only the three base
ACL entries for the owner, the group, and others. There are
some rules that need to be satisfied in order for an ACL
<br>
to be valid:</p>

<p style="margin-top: 1em">* The three base entries cannot
be removed. There must be exactly one entry of each of these
base entry types.</p>

<p style="margin-top: 1em">* Whenever an ACL contains named
user entries or named group objects, it must also contain an
effective rights mask.</p>

<p style="margin-top: 1em">* Whenever an ACL contains any
Default ACL entries, the three Default ACL base entries
(default owner, default group, and default others) must also
exist.</p>

<p style="margin-top: 1em">* Whenever a Default ACL
contains named user entries or named group objects, it must
also contain a default effective rights mask.</p>

<p style="margin-top: 1em">To help the user ensure these
rules, setfacl creates entries from existing entries under
the following conditions:</p>

<p style="margin-top: 1em">* If an ACL contains named user
or named group entries, and no mask entry exists, a mask
entry containing the same permissions as the group entry is
created. Unless the -n <br>
option is given, the permissions of the mask entry are
further adjusted to include the union of all permissions
affected by the mask entry. (See the -n option
description).</p>

<p style="margin-top: 1em">* If a Default ACL entry is
created, and the Default ACL contains no owner, owning
group, or others entry, a copy of the ACL owner, owning
group, or others entry is added to <br>
the Default ACL.</p>

<p style="margin-top: 1em">* If a Default ACL contains
named user entries or named group entries, and no mask entry
exists, a mask entry containing the same permissions as the
default Default ACL&rsquo;s group <br>
entry is added. Unless the -n option is given, the
permissions of the mask entry are further adjusted to
include the union of all permissions affected by the mask
entry. (See <br>
the -n option description).</p>

<p style="margin-top: 1em">EXAMPLES <br>
Granting an additional user read access <br>
setfacl -m u:lisa:r file</p>

<p style="margin-top: 1em">Revoking write access from all
groups and all named users (using the effective rights mask)
<br>
setfacl -m m::rx file</p>

<p style="margin-top: 1em">Removing a named group entry
from a file&rsquo;s ACL <br>
setfacl -x g:staff file</p>

<p style="margin-top: 1em">Copying the ACL of one file to
another <br>
getfacl file1 | setfacl --set-file=- file2</p>

<p style="margin-top: 1em">Copying the access ACL into the
Default ACL <br>
getfacl --access dir | setfacl -d -M- dir</p>

<p style="margin-top: 1em">CONFORMANCE TO POSIX 1003.1e
DRAFT STANDARD 17 <br>
If the environment variable POSIXLY_CORRECT is defined, the
default behavior of setfacl changes as follows: All
non-standard options are disabled. The
&lsquo;&lsquo;default:&rsquo;&rsquo; prefix is <br>
disabled. The -x and -X options also accept permission
fields (and ignore them).</p>

<p style="margin-top: 1em">AUTHOR <br>
Andreas Gruenbacher, &lt;a.gruenbacher@bestbits.at&gt;.</p>

<p style="margin-top: 1em">Please send your bug reports,
suggested features and comments to the above address.</p>

<p style="margin-top: 1em">SEE ALSO <br>
getfacl(1), chmod(1), umask(1), acl(5)</p>

<p style="margin-top: 1em">May 2000 ACL File Utilities
SETFACL(1)</p>
<hr>
</body>
</html>
