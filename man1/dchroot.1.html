<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:02:56 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DCHROOT(1) Debian sbuild DCHROOT(1)</p>

<p style="margin-top: 1em">NAME <br>
dchroot - enter a chroot environment</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dchroot [-h|--help | -V|--version | -l|--list | -i|--info |
--config | --location] [--directory=directory]
[-d|--preserve-environment] [-q|--quiet | -v|--verbose] [-c
<br>
chroot|--chroot=chroot | --all] [COMMAND [ ARG1 [ ARG2 [
ARGn]]]]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
dchroot allows the user to run a command or a login shell in
a chroot environment. If no command is specified, a login
shell will be started in the user&rsquo;s home directory
inside <br>
the chroot.</p>

<p style="margin-top: 1em">The command is one or more
arguments which will be run in the user&rsquo;s default
shell using its -c option. As a result, shell code may be
embedded in this argument. If multiple <br>
command options are used, they are concatenated together,
separated by spaces. Users should be aware of the shell
quoting issues this presents, and should use schroot if
neces&acirc; <br>
sary, which does not have any quoting issues.</p>

<p style="margin-top: 1em">The directory the command or
login shell is run in depends upon the context. See
--directory option below for a complete description.</p>

<p style="margin-top: 1em">This version of dchroot is a
compatibility wrapper around the schroot(1) program. It is
provided for backward compatibility with the dchroot
command-line options, but schroot is <br>
recommended for future use. See the section
&acirc;Incompatibilities&acirc; below for known
incompatibilities with older versions of dchroot.</p>

<p style="margin-top: 1em">If no chroot is specified, the
chroot name or alias &acirc;default&acirc; will be used as a
fallback.</p>

<p style="margin-top: 1em">OPTIONS <br>
dchroot accepts the following options:</p>

<p style="margin-top: 1em">Basic options <br>
-h, --help <br>
Show help summary.</p>

<p style="margin-top: 1em">-a, --all <br>
Select all chroots.</p>

<p style="margin-top: 1em">-c, --chroot=chroot <br>
Specify a chroot to use. This option may be used multiple
times to specify more than one chroot, in which case its
effect is similar to --all.</p>

<p style="margin-top: 1em">-l, --list <br>
List all available chroots.</p>

<p style="margin-top: 1em">-i, --info <br>
Print detailed information about the specified chroots. Note
that earlier versions of dchroot did not include this
option.</p>

<p style="margin-top: 1em">-p, --path <br>
Print location (path) of the specified chroots.</p>

<p style="margin-top: 1em">--config <br>
Print configuration of the specified chroots. This is useful
for testing that the configuration in use is the same as the
configuration file. Any comments in the origi&acirc; <br>
nal file will be missing. Note that earlier versions of
dchroot did not include this option.</p>

<p style="margin-top: 1em">--directory=directory <br>
Change to directory inside the chroot before running the
command or login shell. If directory is not available,
dchroot will exit with an error status.</p>

<p style="margin-top: 1em">The default behaviour is as
follows (all directory paths are inside the chroot). Unless
the --preserve-environment option is used to preserve the
environment, the login <br>
shell or command will run in the user&rsquo;s home
directory, or / if the home directory is not available. When
the --preserve-environment option is used, it will attempt
to <br>
use the current working directory, again falling back to /
if it is not accessible. If none of the directories are
available, dchroot will exit with an error status.</p>

<p style="margin-top: 1em">-d, --preserve-environment <br>
Preserve the user&rsquo;s environment inside the chroot
environment. The default is to use a clean environment; this
option copies the entire user environment and sets it in
<br>
the session.</p>

<p style="margin-top: 1em">-q, --quiet <br>
Print only essential messages.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Print all messages. Note that earlier versions of dchroot
did not include this option.</p>

<p style="margin-top: 1em">-V, --version <br>
Print version information.</p>

<p style="margin-top: 1em">Note that earlier versions of
dchroot did not provide long options.</p>

<p style="margin-top: 1em">INCOMPATIBILITIES <br>
Debian dchroot prior to version 0.99.0 <br>
&Acirc;&middot; Log messages are worded and formatted
differently.</p>

<p style="margin-top: 1em">&Acirc;&middot; su(1) is no
longer used to run commands in the chroot; this is done by
dchroot internally. This change may cause subtle
differences. If you find an incompatibility, <br>
please report it so it may be corrected.</p>

<p style="margin-top: 1em">&Acirc;&middot; dchroot provides
a restricted subset of the functionality implemented by
schroot, but is still schroot underneath. Thus dchroot is
still subject to schroot security <br>
checking, including PAM authentication and authorisation,
and session management, for example, and hence may behave
slightly differently to older dchroot versions in some <br>
circumstances.</p>

<p style="margin-top: 1em">Debian dchroot prior to version
1.5.1 <br>
&Acirc;&middot; This version of dchroot uses schroot.conf to
store the configuration for available chroots, rather than
the dchroot.conf file used historically. dchroot supported
auto&acirc; <br>
matic migration of dchroot.conf to the schroot.conf keyfile
format with its --config option from versions 0.2.2 to
1.5.0; support for the old format is now no longer <br>
available.</p>

<p style="margin-top: 1em">DSA dchroot <br>
Machines run by the Debian System Administrators for the
Debian Project have a dchroot-dsa package which provides an
alternate dchroot implementation.</p>

<p style="margin-top: 1em">&Acirc;&middot; All the above
incompatibilities apply.</p>

<p style="margin-top: 1em">&Acirc;&middot; This version of
dchroot has incompatible command-line options, and while
some of those options are supported or have equivalent
options by a different name, the -c option <br>
is not required to specify a chroot, and this version of
dchroot cannot implement this behaviour in a
backward-compatible manner (because if -c is omitted, the
default <br>
chroot is used). DSA dchroot uses the first non-option as
the chroot to use, only allowing one chroot to be used at
once.</p>

<p style="margin-top: 1em">DIRECTORY FALLBACKS <br>
dchroot will select an appropriate directory to use within
the chroot based upon whether the --directory or
--preserve-environment options are used. When explicitly
specifying a <br>
directory, only one directory will be used for safety and
consistency, while for a login shell or command several
possibilities may be tried. Note that due to multiple
fallbacks <br>
being considered for commands, it is dangerous to run
commands using dchroot; use schroot instead. The following
subsections list the fallback sequence for each case. CWD is
<br>
the current working directory, DIR is the directory
specified with --directory.</p>

<p style="margin-top: 1em">Login shell or command <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc;Transition &acirc; &acirc; <br>
&acirc;(Host &acirc; Chroot) &acirc; Comment &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;CWD &acirc; passwd pw_dir &acirc; Normal behaviour
(if --directory and &acirc; <br>
&acirc; &acirc; --preserve-environment are not used) &acirc;
<br>
&acirc;CWD &acirc; / &acirc; If passwd pw_dir is nonexistent
&acirc; <br>
&acirc;FAIL &acirc; If / is nonexistent &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
--preserve-environment used <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc;Transition &acirc; &acirc; <br>
&acirc;(Host &acirc; Chroot) &acirc; Comment &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;CWD &acirc; CWD &acirc; Normal behaviour (if
--preserve-environ&acirc; &acirc; <br>
&acirc; &acirc; ment used) &acirc; <br>
&acirc;CWD &acirc; / &acirc; If CWD is nonexistent &acirc;
<br>
&acirc;FAIL &acirc; If / is nonexistent &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
--directory used <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc;Transition &acirc; &acirc; <br>
&acirc;(Host &acirc; Chroot) &acirc; Comment &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;CWD &acirc; DIR &acirc; Normal behaviour &acirc; <br>
&acirc;FAIL &acirc; If DIR is nonexistent &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
No fallbacks should exist under any circumstances.</p>

<p style="margin-top: 1em">Debugging <br>
Note that --debug=notice will show the internal fallback
list computed for the session.</p>

<p style="margin-top: 1em">EXAMPLES <br>
$ dchroot -l&acirc;&micro; <br>
Available chroots: sarge [default], sid</p>

<p style="margin-top: 1em">$ dchroot -p sid&acirc;&micro;
<br>
/srv/chroot/sid</p>

<p style="margin-top: 1em">$ dchroot -q -c sid -- uname
-smr&acirc;&micro; <br>
Linux 2.6.16.17 ppc <br>
$ dchroot -q -c sid -- &quot;uname -smr&quot;&acirc;&micro;
<br>
Linux 2.6.16.17 ppc</p>

<p style="margin-top: 1em">$ dchroot -q -c sid &quot;ls -1
/ | tac | head -n 4&quot;&acirc;&micro; <br>
var <br>
usr <br>
tmp <br>
sys</p>

<p style="margin-top: 1em">$ dchroot -c sid&acirc;&micro;
<br>
I: [sid chroot] Running login shell: &acirc;/bin/bash&acirc;
<br>
$</p>

<p style="margin-top: 1em">Use -- to allow options
beginning with &acirc;-&acirc; or &acirc;--&acirc; in the
command to run in the chroot. This prevents them being
interpreted as options for dchroot itself. Note that the top
<br>
line was echoed to standard error, and the remaining lines
to standard output. This is intentional, so that program
output from commands run in the chroot may be piped and
redi&acirc; <br>
rected as required; the data will be the same as if the
command was run directly on the host system.</p>

<p style="margin-top: 1em">TROUBLESHOOTING <br>
If something is not working, and it&rsquo;s not clear from
the error messages what is wrong, try using the
--debug=level option to turn on debugging messages. This
gives a great deal <br>
more information. Valid debug levels are &acirc;none&acirc;,
and &acirc;notice&acirc;, &acirc;info&acirc;,
&acirc;warning&acirc; and &acirc;critical&acirc; in order of
increasing severity. The lower the severity level, the more
output.</p>

<p style="margin-top: 1em">If you are still having trouble,
the developers may be contacted on the mailing list: <br>
Debian buildd-tools Developers <br>
&lt;buildd-tools-devel@lists.alioth.debian.org&gt;</p>

<p style="margin-top: 1em">BUGS <br>
On the mips and mipsel architectures, Linux kernels up to
and including at least version 2.6.17 have broken
personality(2) support, which results in a failure to set
the person&acirc; <br>
ality. This will be seen as an &acirc;Operation not
permitted&acirc; (EPERM) error. To work around this problem,
set personality to &acirc;undefined&acirc;, or upgrade to a
more recent kernel.</p>

<p style="margin-top: 1em">FILES <br>
/etc/schroot/schroot.conf <br>
The system-wide schroot definition file. This file must be
owned by the root user, and not be writable by other.</p>

<p style="margin-top: 1em">AUTHORS <br>
Roger Leigh.</p>

<p style="margin-top: 1em">This implementation of dchroot
uses the same command-line options as the original dchroot
by David Kimdon &lt;dwhedon@debian.org&gt;, but is an
independent implementation.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2005-2012 Roger Leigh
&lt;rleigh@debian.org&gt;</p>

<p style="margin-top: 1em">dchroot is free software: you
can redistribute it and/or modify it under the terms of the
GNU General Public License as published by the Free Software
Foundation, either version <br>
3 of the License, or (at your option) any later version.</p>

<p style="margin-top: 1em">SEE ALSO <br>
schroot(1), sbuild(1), chroot(2), schroot-setup(5),
schroot.conf(5).</p>

<p style="margin-top: 1em">Version 1.6.10 05 May 2014
DCHROOT(1)</p>
<hr>
</body>
</html>
