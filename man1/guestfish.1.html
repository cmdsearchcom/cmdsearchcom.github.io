<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>guestfish(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">guestfish(1)</td>
    <td class="head-vol">Virtualization Support</td>
    <td class="head-rtitle">guestfish(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
guestfish - the guest filesystem shell
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
 guestfish [--options] [commands]
 guestfish
 guestfish [--ro|--rw] -a disk.img
 guestfish [--ro|--rw] -a disk.img -m dev[:mountpoint]
 guestfish -d libvirt-domain
 guestfish [--ro|--rw] -a disk.img -i
 guestfish -d libvirt-domain -i
</pre>
<h1 class="Sh" title="Sh" id="WARNING"><a class="selflink" href="#WARNING">WARNING</a></h1>
Using &quot;guestfish&quot; in write mode on live virtual machines, or
  concurrently with other disk editing tools, can be dangerous, potentially
  causing disk corruption. The virtual machine must be shut down before you use
  this command, and disk images must not be edited concurrently.
<div class="Pp"></div>
Use the <i>--ro</i> (read-only) option to use &quot;guestfish&quot; safely if
  the disk image or virtual machine might be live. You may see strange or
  inconsistent results if running concurrently with other changes, but with this
  option you won't risk disk corruption.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Guestfish is a shell and command-line tool for examining and modifying virtual
  machine filesystems. It uses libguestfs and exposes all of the functionality
  of the guestfs API, see <i>guestfs</i>(3).
<div class="Pp"></div>
Guestfish gives you structured access to the libguestfs API, from shell scripts
  or the command line or interactively. If you want to rescue a broken virtual
  machine image, you should look at the <i>virt-rescue</i>(1) command.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="As_an_interactive_shell"><a class="selflink" href="#As_an_interactive_shell">As
  an interactive shell</a></h2>
<pre>
 $ guestfish
 
 Welcome to guestfish, the guest filesystem shell for
 editing virtual machine filesystems.
 
 Type: 'help' for a list of commands
       'man' to read the manual
       'quit' to quit the shell
 
 &gt;&lt;fs&gt; add-ro disk.img
 &gt;&lt;fs&gt; run
 &gt;&lt;fs&gt; list-filesystems
 /dev/sda1: ext4
 /dev/vg_guest/lv_root: ext4
 /dev/vg_guest/lv_swap: swap
 &gt;&lt;fs&gt; mount /dev/vg_guest/lv_root /
 &gt;&lt;fs&gt; cat /etc/fstab
 # /etc/fstab
 # Created by anaconda
 [...]
 &gt;&lt;fs&gt; exit
</pre>
<h2 class="Ss" title="Ss" id="From_shell_scripts"><a class="selflink" href="#From_shell_scripts">From
  shell scripts</a></h2>
Create a new <i>/etc/motd</i> file in a guest or disk image:
<div class="Pp"></div>
<pre>
 guestfish &lt;&lt;_EOF_
 add disk.img
 run
 mount /dev/vg_guest/lv_root /
 write /etc/motd &quot;Welcome, new users&quot;
 _EOF_
</pre>
<div class="Pp"></div>
List the LVM logical volumes in a disk image:
<div class="Pp"></div>
<pre>
 guestfish -a disk.img --ro &lt;&lt;_EOF_
 run
 lvs
 _EOF_
</pre>
<div class="Pp"></div>
List all the filesystems in a disk image:
<div class="Pp"></div>
<pre>
 guestfish -a disk.img --ro &lt;&lt;_EOF_
 run
 list-filesystems
 _EOF_
</pre>
<h2 class="Ss" title="Ss" id="On_one_command_line"><a class="selflink" href="#On_one_command_line">On
  one command line</a></h2>
Update <i>/etc/resolv.conf</i> in a guest:
<div class="Pp"></div>
<pre>
 guestfish \
   add disk.img : run : mount /dev/vg_guest/lv_root / : \
   write /etc/resolv.conf &quot;nameserver 1.2.3.4&quot;
</pre>
<div class="Pp"></div>
Edit <i>/boot/grub/grub.conf</i> interactively:
<div class="Pp"></div>
<pre>
 guestfish --rw --add disk.img \
   --mount /dev/vg_guest/lv_root \
   --mount /dev/sda1:/boot \
   edit /boot/grub/grub.conf
</pre>
<h2 class="Ss" title="Ss" id="Mount_disks_automatically"><a class="selflink" href="#Mount_disks_automatically">Mount
  disks automatically</a></h2>
Use the <i>-i</i> option to automatically mount the disks from a virtual
  machine:
<div class="Pp"></div>
<pre>
 guestfish --ro -a disk.img -i cat /etc/group
 guestfish --ro -d libvirt-domain -i cat /etc/group
</pre>
<div class="Pp"></div>
Another way to edit <i>/boot/grub/grub.conf</i> interactively is:
<div class="Pp"></div>
<pre>
 guestfish --rw -a disk.img -i edit /boot/grub/grub.conf
</pre>
<h2 class="Ss" title="Ss" id="As_a_script_interpreter"><a class="selflink" href="#As_a_script_interpreter">As
  a script interpreter</a></h2>
Create a 100MB disk containing an ext2-formatted partition:
<div class="Pp"></div>
<pre>
 #!/usr/bin/guestfish -f
 sparse test1.img 100M
 run
 part-disk /dev/sda mbr
 mkfs ext2 /dev/sda1
</pre>
<h2 class="Ss" title="Ss" id="Start_with_a_prepared_disk"><a class="selflink" href="#Start_with_a_prepared_disk">Start
  with a prepared disk</a></h2>
An alternate way to create a 100MB disk called <i>test1.img</i> containing a
  single ext2-formatted partition:
<div class="Pp"></div>
<pre>
 guestfish -N fs
</pre>
<div class="Pp"></div>
To list what is available do:
<div class="Pp"></div>
<pre>
 guestfish -N help | less
</pre>
<h2 class="Ss" title="Ss" id="Remote_drives"><a class="selflink" href="#Remote_drives">Remote
  drives</a></h2>
Access a remote disk using NBD:
<div class="Pp"></div>
<pre>
 guestfish -a nbd://example.com
</pre>
<h2 class="Ss" title="Ss" id="Remote_control"><a class="selflink" href="#Remote_control">Remote
  control</a></h2>
<pre>
 eval &quot;`guestfish --listen`&quot;
 guestfish --remote add-ro disk.img
 guestfish --remote run
 guestfish --remote lvs
</pre>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Displays general help on options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cmd-help</b></dt>
  <dd class="It-tag">Lists all available guestfish commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h cmd</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cmd-help cmd</b></dt>
  <dd class="It-tag">Displays detailed help on a single command
    &quot;cmd&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a image</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--add image</b></dt>
  <dd class="It-tag">Add a block device or virtual machine image to the shell.
    <div style="height: 1.00em;">&#x00A0;</div>
    The format of the disk image is auto-detected. To override this and force a
      particular format use the <i>--format=..</i> option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Using this flag is mostly equivalent to using the &quot;add&quot; command,
      with &quot;readonly:true&quot; if the <i>--ro</i> flag was given, and with
      &quot;format:...&quot; if the <i>--format=...</i> flag was given.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a URI</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--add URI</b></dt>
  <dd class="It-tag">Add a remote disk. See &quot;ADDING REMOTE
    STORAGE&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c URI</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--connect URI</b></dt>
  <dd class="It-tag">When used in conjunction with the <i>-d</i> option, this
      specifies the libvirt URI to use. The default is to use the default
      libvirt connection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--csh</b></dt>
  <dd class="It-tag">If using the <i>--listen</i> option and a csh-like shell,
      use this option. See section &quot;REMOTE CONTROL AND CSH&quot;
    below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d libvirt-domain</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--domain libvirt-domain</b></dt>
  <dd class="It-tag">Add disks from the named libvirt domain. If the <i>--ro</i>
      option is also used, then any libvirt domain can be used. However in write
      mode, only libvirt domains which are shut down can be named here.
    <div style="height: 1.00em;">&#x00A0;</div>
    Domain UUIDs can be used instead of names.
    <div style="height: 1.00em;">&#x00A0;</div>
    Using this flag is mostly equivalent to using the &quot;add-domain&quot;
      command, with &quot;readonly:true&quot; if the <i>--ro</i> flag was given,
      and with &quot;format:...&quot; if the <i>--format=...</i> flag was
    given.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--echo-keys</b></dt>
  <dd class="It-tag">When prompting for keys and passphrases, guestfish normally
      turns echoing off so you cannot see what you are typing. If you are not
      worried about Tempest attacks and there is no one else in the room you can
      specify this flag to see what you are typing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f file</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--file file</b></dt>
  <dd class="It-tag">Read commands from &quot;file&quot;. To write pure
      guestfish scripts, use:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 #!/usr/bin/guestfish -f
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--format=raw|qcow2|..</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--format</b></dt>
  <dd class="It-tag">The default for the <i>-a</i> option is to auto-detect the
      format of the disk image. Using this forces the disk format for <i>-a</i>
      options which follow on the command line. Using <i>--format</i> with no
      argument switches back to auto-detection for subsequent <i>-a</i> options.
    <div style="height: 1.00em;">&#x00A0;</div>
    For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish --format=raw -a disk.img
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    forces raw format (no auto-detection) for <i>disk.img</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish --format=raw -a disk.img --format -a another.img
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    forces raw format (no auto-detection) for <i>disk.img</i> and reverts to
      auto-detection for <i>another.img</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    If you have untrusted raw-format guest disk images, you should use this
      option to specify the disk format. This avoids a possible security problem
      with malicious guests (CVE-2010-3851). See also &quot;add&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--inspector</b></dt>
  <dd class="It-tag">Using <i>virt-inspector</i>(1) code, inspect the disks
      looking for an operating system and mount filesystems as they would be
      mounted on the real virtual machine.
    <div style="height: 1.00em;">&#x00A0;</div>
    Typical usage is either:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish -d myguest -i
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    (for an inactive libvirt domain called <i>myguest</i>), or:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish --ro -d myguest -i
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    (for active domains, readonly), or specify the block device directly:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish --rw -a /dev/Guests/MyGuest -i
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that the command line syntax changed slightly over older versions of
      guestfish. You can still use the old syntax:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 guestfish [--ro] -i disk.img
 guestfish [--ro] -i libvirt-domain
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Using this flag is mostly equivalent to using the &quot;inspect-os&quot;
      command and then using other commands to mount the filesystems that were
      found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--keys-from-stdin</b></dt>
  <dd class="It-tag">Read key or passphrase parameters from stdin. The default
      is to try to read passphrases from the user by opening
    <i>/dev/tty</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--listen</b></dt>
  <dd class="It-tag">Fork into the background and listen for remote commands.
      See section &quot;REMOTE CONTROL GUESTFISH OVER A SOCKET&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--live</b></dt>
  <dd class="It-tag">Connect to a live virtual machine. (Experimental, see
      &quot;ATTACHING TO RUNNING DAEMONS&quot; in <i>guestfs</i>(3)).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m dev[:mountpoint[:options[:fstype]]]</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mount dev[:mountpoint[:options[:fstype]]]</b></dt>
  <dd class="It-tag">Mount the named partition or logical volume on the given
      mountpoint.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the mountpoint is omitted, it defaults to <i>/</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    You have to mount something on <i>/</i> before most commands will work.
    <div style="height: 1.00em;">&#x00A0;</div>
    If any <i>-m</i> or <i>--mount</i> options are given, the guest is
      automatically launched.
    <div style="height: 1.00em;">&#x00A0;</div>
    If you don't know what filesystems a disk image contains, you can either run
      guestfish without this option, then list the partitions, filesystems and
      LVs available (see &quot;list-partitions&quot;,
      &quot;list-filesystems&quot; and &quot;lvs&quot; commands), or you can use
      the <i>virt-filesystems</i>(1) program.
    <div style="height: 1.00em;">&#x00A0;</div>
    The third (and rarely used) part of the mount parameter is the list of mount
      options used to mount the underlying filesystem. If this is not given,
      then the mount options are either the empty string or &quot;ro&quot; (the
      latter if the <i>--ro</i> flag is used). By specifying the mount options,
      you override this default choice. Probably the only time you would use
      this is to enable ACLs and/or extended attributes if the filesystem can
      support them:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 -m /dev/sda1:/:acl,user_xattr
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Using this flag is equivalent to using the &quot;mount-options&quot;
      command.
    <div style="height: 1.00em;">&#x00A0;</div>
    The fourth part of the parameter is the filesystem driver to use, such as
      &quot;ext3&quot; or &quot;ntfs&quot;. This is rarely needed, but can be
      useful if multiple drivers are valid for a filesystem (eg:
      &quot;ext2&quot; and &quot;ext3&quot;), or if libguestfs misidentifies a
      filesystem.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--network</b></dt>
  <dd class="It-tag">Enable QEMU user networking in the guest.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N [filename=]type</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--new [filename=]type</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N help</b></dt>
  <dd class="It-tag">Prepare a fresh disk image formatted as &quot;type&quot;.
      This is an alternative to the <i>-a</i> option: whereas <i>-a</i> adds an
      existing disk, <i>-N</i> creates a preformatted disk with a filesystem and
      adds it. See &quot;PREPARED DISK IMAGES&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-sync</b></dt>
  <dd class="It-tag">Disable autosync. This is enabled by default. See the
      discussion of autosync in the <i>guestfs</i>(3) manpage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-dest-paths</b></dt>
  <dd class="It-tag">Don't tab-complete paths on the guest filesystem. It is
      useful to be able to hit the tab key to complete paths on the guest
      filesystem, but this causes extra &quot;hidden&quot; guestfs calls to be
      made, so this option is here to allow this feature to be disabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pipe-error</b></dt>
  <dd class="It-tag">If writes fail to pipe commands (see &quot;PIPES&quot;
      below), then the command returns an error.
    <div style="height: 1.00em;">&#x00A0;</div>
    The default (also for historical reasons) is to ignore such errors so that:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 &gt;&lt;fs&gt; command_with_lots_of_output | head
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    doesn't give an error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--progress-bars</b></dt>
  <dd class="It-tag">Enable progress bars, even when guestfish is used
      non-interactively.
    <div style="height: 1.00em;">&#x00A0;</div>
    Progress bars are enabled by default when guestfish is used as an
      interactive shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress-bars</b></dt>
  <dd class="It-tag">Disable progress bars.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--remote[=pid]</b></dt>
  <dd class="It-tag">Send remote commands to $GUESTFISH_PID or &quot;pid&quot;.
      See section &quot;REMOTE CONTROL GUESTFISH OVER A SOCKET&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ro</b></dt>
  <dd class="It-tag">This changes the <i>-a</i>, <i>-d</i> and <i>-m</i> options
      so that disks are added and mounts are done read-only.
    <div style="height: 1.00em;">&#x00A0;</div>
    The option must always be used if the disk image or virtual machine might be
      running, and is generally recommended in cases where you don't need write
      access to the disk.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that prepared disk images created with <i>-N</i> are not affected by
      this option. Also commands like &quot;add&quot; are not affected - you
      have to specify the &quot;readonly:true&quot; option explicitly if you
      need it.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also &quot;OPENING DISKS FOR READ AND WRITE&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--selinux</b></dt>
  <dd class="It-tag">This option is provided for backwards compatibility and
      does nothing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Enable very verbose messages. This is particularly useful
      if you find a bug.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Display the guestfish / libguestfs version number and
    exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--rw</b></dt>
  <dd class="It-tag">This changes the <i>-a</i>, <i>-d</i> and <i>-m</i> options
      so that disks are added and mounts are done read-write.
    <div style="height: 1.00em;">&#x00A0;</div>
    See &quot;OPENING DISKS FOR READ AND WRITE&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Echo each command before executing it.</dd>
</dl>
<h1 class="Sh" title="Sh" id="COMMANDS_ON_COMMAND_LINE"><a class="selflink" href="#COMMANDS_ON_COMMAND_LINE">COMMANDS
  ON COMMAND LINE</a></h1>
Any additional (non-option) arguments are treated as commands to execute.
<div class="Pp"></div>
Commands to execute should be separated by a colon (&quot;:&quot;), where the
  colon is a separate parameter. Thus:
<div class="Pp"></div>
<pre>
 guestfish cmd [args...] : cmd [args...] : cmd [args...] ...
</pre>
<div class="Pp"></div>
If there are no additional arguments, then we enter a shell, either an
  interactive shell with a prompt (if the input is a terminal) or a
  non-interactive shell.
<div class="Pp"></div>
In either command line mode or non-interactive shell, the first command that
  gives an error causes the whole shell to exit. In interactive mode (with a
  prompt) if a command fails, you can continue to enter commands.
<h1 class="Sh" title="Sh" id="USING_launch_(OR_run)"><a class="selflink" href="#USING_launch_(OR_run)">USING
  launch (OR run)</a></h1>
As with <i>guestfs</i>(3), you must first configure your guest by adding disks,
  then launch it, then mount any disks you need, and finally issue
  actions/commands. So the general order of the day is:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">add or -a/--add</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">launch (aka run)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">mount or -m/--mount</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">any other commands</dd>
</dl>
<div class="Pp"></div>
&quot;run&quot; is a synonym for &quot;launch&quot;. You must &quot;launch&quot;
  (or &quot;run&quot;) your guest before mounting or performing any other
  commands.
<div class="Pp"></div>
The only exception is that if any of the <i>-i</i>, <i>-m</i>, <i>--mount</i>,
  <i>-N</i> or <i>--new</i> options were given then &quot;run&quot; is done
  automatically, simply because guestfish can't perform the action you asked for
  without doing this.
<h1 class="Sh" title="Sh" id="OPENING_DISKS_FOR_READ_AND_WRITE"><a class="selflink" href="#OPENING_DISKS_FOR_READ_AND_WRITE">OPENING
  DISKS FOR READ AND WRITE</a></h1>
The guestfish, <i>guestmount</i>(1) and <i>virt-rescue</i>(1) options
  <i>--ro</i> and <i>--rw</i> affect whether the other command line options
  <i>-a</i>, <i>-c</i>, <i>-d</i>, <i>-i</i> and <i>-m</i> open disk images
  read-only or for writing.
<div class="Pp"></div>
In libguestfs &#x2264; 1.10, guestfish, guestmount and virt-rescue defaulted to
  opening disk images supplied on the command line for write. To open a disk
  image read-only you have to do <i>-a image --ro</i>.
<div class="Pp"></div>
This matters: If you accidentally open a live VM disk image writable then you
  will cause irreversible disk corruption.
<div class="Pp"></div>
In a future libguestfs we intend to change the default the other way. Disk
  images will be opened read-only. You will have to either specify <i>guestfish
  --rw</i>, <i>guestmount --rw</i>, <i>virt-rescue --rw</i>, or change the
  configuration file in order to get write access for disk images specified by
  those other command line options.
<div class="Pp"></div>
This version of guestfish, guestmount and virt-rescue has a <i>--rw</i> option
  which does nothing (it is already the default). However it is highly
  recommended that you use this option to indicate that you need write access,
  and prepare your scripts for the day when this option will be required for
  write access.
<div class="Pp"></div>
<b>Note:</b> This does <i>not</i> affect commands like &quot;add&quot; and
  &quot;mount&quot;, or any other libguestfs program apart from guestfish and
  guestmount.
<h1 class="Sh" title="Sh" id="QUOTING"><a class="selflink" href="#QUOTING">QUOTING</a></h1>
You can quote ordinary parameters using either single or double quotes. For
  example:
<div class="Pp"></div>
<pre>
 add &quot;file with a space.img&quot;
 rm '/file name'
 rm '/&quot;'
</pre>
<div class="Pp"></div>
A few commands require a list of strings to be passed. For these, use a
  whitespace-separated list, enclosed in quotes. Strings containing whitespace
  to be passed through must be enclosed in single quotes. A literal single quote
  must be escaped with a backslash.
<div class="Pp"></div>
<pre>
 vgcreate VG &quot;/dev/sda1 /dev/sdb1&quot;
 command &quot;/bin/echo 'foo      bar'&quot;
 command &quot;/bin/echo \'foo\'&quot;
</pre>
<h2 class="Ss" title="Ss" id="ESCAPE_SEQUENCES_IN_DOUBLE_QUOTED_ARGUMENTS"><a class="selflink" href="#ESCAPE_SEQUENCES_IN_DOUBLE_QUOTED_ARGUMENTS">ESCAPE
  SEQUENCES IN DOUBLE QUOTED ARGUMENTS</a></h2>
In double-quoted arguments (only) use backslash to insert special characters:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\a&quot;</dt>
  <dd class="It-tag">Alert (bell) character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\b&quot;</dt>
  <dd class="It-tag">Backspace character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\f&quot;</dt>
  <dd class="It-tag">Form feed character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\n&quot;</dt>
  <dd class="It-tag">Newline character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\r&quot;</dt>
  <dd class="It-tag">Carriage return character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\t&quot;</dt>
  <dd class="It-tag">Horizontal tab character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\v&quot;</dt>
  <dd class="It-tag">Vertical tab character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\&quot;&quot;</dt>
  <dd class="It-tag">A literal double quote character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\ooo&quot;</dt>
  <dd class="It-tag">A character with octal value <i>ooo</i>. There must be
      precisely 3 octal digits (unlike C).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\xhh&quot;</dt>
  <dd class="It-tag">A character with hex value <i>hh</i>. There must be
      precisely 2 hex digits.
    <div style="height: 1.00em;">&#x00A0;</div>
    In the current implementation &quot;\000&quot; and &quot;\x00&quot; cannot
      be used in strings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;\\&quot;</dt>
  <dd class="It-tag">A literal backslash character.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONAL_ARGUMENTS"><a class="selflink" href="#OPTIONAL_ARGUMENTS">OPTIONAL
  ARGUMENTS</a></h1>
Some commands take optional arguments. These arguments appear in this
  documentation as &quot;[argname:..]&quot;. You can use them as in these
  examples:
<div class="Pp"></div>
<pre>
 add filename
 add filename readonly:true
 add filename format:qcow2 readonly:false
</pre>
<div class="Pp"></div>
Each optional argument can appear at most once. All optional arguments must
  appear after the required ones.
<h1 class="Sh" title="Sh" id="NUMBERS"><a class="selflink" href="#NUMBERS">NUMBERS</a></h1>
This section applies to all commands which can take integers as parameters.
<h2 class="Ss" title="Ss" id="SIZE_SUFFIX"><a class="selflink" href="#SIZE_SUFFIX">SIZE
  SUFFIX</a></h2>
When the command takes a parameter measured in bytes, you can use one of the
  following suffixes to specify kilobytes, megabytes and larger sizes:
<dl class="Bl-tag">
  <dt class="It-tag"><b>k</b> or <b>K</b> or <b>KiB</b></dt>
  <dd class="It-tag">The size in kilobytes (multiplied by 1024).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>KB</b></dt>
  <dd class="It-tag">The size in SI 1000 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>M</b> or <b>MiB</b></dt>
  <dd class="It-tag">The size in megabytes (multiplied by 1048576).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>MB</b></dt>
  <dd class="It-tag">The size in SI 1000000 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>G</b> or <b>GiB</b></dt>
  <dd class="It-tag">The size in gigabytes (multiplied by 2**30).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>GB</b></dt>
  <dd class="It-tag">The size in SI 10**9 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>T</b> or <b>TiB</b></dt>
  <dd class="It-tag">The size in terabytes (multiplied by 2**40).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>TB</b></dt>
  <dd class="It-tag">The size in SI 10**12 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>P</b> or <b>PiB</b></dt>
  <dd class="It-tag">The size in petabytes (multiplied by 2**50).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PB</b></dt>
  <dd class="It-tag">The size in SI 10**15 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>E</b> or <b>EiB</b></dt>
  <dd class="It-tag">The size in exabytes (multiplied by 2**60).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>EB</b></dt>
  <dd class="It-tag">The size in SI 10**18 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Z</b> or <b>ZiB</b></dt>
  <dd class="It-tag">The size in zettabytes (multiplied by 2**70).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ZB</b></dt>
  <dd class="It-tag">The size in SI 10**21 byte units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Y</b> or <b>YiB</b></dt>
  <dd class="It-tag">The size in yottabytes (multiplied by 2**80).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>YB</b></dt>
  <dd class="It-tag">The size in SI 10**24 byte units.</dd>
</dl>
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 truncate-size /file 1G
</pre>
<div class="Pp"></div>
would truncate the file to 1 gigabyte.
<div class="Pp"></div>
Be careful because a few commands take sizes in kilobytes or megabytes (eg. the
  parameter to &quot;memsize&quot; is specified in megabytes already). Adding a
  suffix will probably not do what you expect.
<h2 class="Ss" title="Ss" id="OCTAL_AND_HEXADECIMAL_NUMBERS"><a class="selflink" href="#OCTAL_AND_HEXADECIMAL_NUMBERS">OCTAL
  AND HEXADECIMAL NUMBERS</a></h2>
For specifying the radix (base) use the C convention: 0 to prefix an octal
  number or &quot;0x&quot; to prefix a hexadecimal number. For example:
<div class="Pp"></div>
<pre>
 1234      decimal number 1234
 02322     octal number, equivalent to decimal 1234
 0x4d2     hexadecimal number, equivalent to decimal 1234
</pre>
<div class="Pp"></div>
When using the &quot;chmod&quot; command, you almost always want to specify an
  octal number for the mode, and you must prefix it with 0 (unlike the Unix
  <i>chmod</i>(1) program):
<div class="Pp"></div>
<pre>
 chmod 0777 /public  # OK
 chmod 777 /public   # WRONG! This is mode 777 decimal = 01411 octal.
</pre>
<div class="Pp"></div>
Commands that return numbers usually print them in decimal, but some commands
  print numbers in other radices (eg. &quot;umask&quot; prints the mode in
  octal, preceded by 0).
<h1 class="Sh" title="Sh" id="WILDCARDS_AND_GLOBBING"><a class="selflink" href="#WILDCARDS_AND_GLOBBING">WILDCARDS
  AND GLOBBING</a></h1>
Neither guestfish nor the underlying guestfs API performs wildcard expansion
  (globbing) by default. So for example the following will not do what you
  expect:
<div class="Pp"></div>
<pre>
 rm-rf /home/*
</pre>
<div class="Pp"></div>
Assuming you don't have a directory called literally <i>/home/*</i> then the
  above command will return an error.
<div class="Pp"></div>
To perform wildcard expansion, use the &quot;glob&quot; command.
<div class="Pp"></div>
<pre>
 glob rm-rf /home/*
</pre>
<div class="Pp"></div>
runs &quot;rm-rf&quot; on each path that matches (ie. potentially running the
  command many times), equivalent to:
<div class="Pp"></div>
<pre>
 rm-rf /home/jim
 rm-rf /home/joe
 rm-rf /home/mary
</pre>
<div class="Pp"></div>
&quot;glob&quot; only works on simple guest paths and not on device names.
<div class="Pp"></div>
If you have several parameters, each containing a wildcard, then glob will
  perform a Cartesian product.
<h1 class="Sh" title="Sh" id="COMMENTS"><a class="selflink" href="#COMMENTS">COMMENTS</a></h1>
Any line which starts with a <i>#</i> character is treated as a comment and
  ignored. The <i>#</i> can optionally be preceded by whitespace, but <b>not</b>
  by a command. For example:
<div class="Pp"></div>
<pre>
 # this is a comment
         # this is a comment
 foo # NOT a comment
</pre>
<div class="Pp"></div>
Blank lines are also ignored.
<h1 class="Sh" title="Sh" id="RUNNING_COMMANDS_LOCALLY"><a class="selflink" href="#RUNNING_COMMANDS_LOCALLY">RUNNING
  COMMANDS LOCALLY</a></h1>
Any line which starts with a <i>!</i> character is treated as a command sent to
  the local shell ( <i>/bin/sh</i> or whatever <i>system</i>(3) uses). For
  example:
<div class="Pp"></div>
<pre>
 !mkdir local
 tgz-out /remote local/remote-data.tar.gz
</pre>
<div class="Pp"></div>
will create a directory &quot;local&quot; on the host, and then export the
  contents of <i>/remote</i> on the mounted filesystem to
  <i>local/remote-data.tar.gz</i>. (See &quot;tgz-out&quot;).
<div class="Pp"></div>
To change the local directory, use the &quot;lcd&quot; command. &quot;!cd&quot;
  will have no effect, due to the way that subprocesses work in Unix.
<h2 class="Ss" title="Ss" id="LOCAL_COMMANDS_WITH_INLINE_EXECUTION"><a class="selflink" href="#LOCAL_COMMANDS_WITH_INLINE_EXECUTION">LOCAL
  COMMANDS WITH INLINE EXECUTION</a></h2>
If a line starts with <i>&lt;!</i> then the shell command is executed (as for
  <i>!</i>), but subsequently any output (stdout) of the shell command is parsed
  and executed as guestfish commands.
<div class="Pp"></div>
Thus you can use shell script to construct arbitrary guestfish commands which
  are then parsed by guestfish.
<div class="Pp"></div>
For example it is tedious to create a sequence of files (eg. <i>/foo.1</i>
  through <i>/foo.100</i>) using guestfish commands alone. However this is
  simple if we use a shell script to create the guestfish commands for us:
<div class="Pp"></div>
<pre>
 &lt;! for n in `seq 1 100`; do echo write /foo.$n $n; done
</pre>
<div class="Pp"></div>
or with names like <i>/foo.001</i>:
<div class="Pp"></div>
<pre>
 &lt;! for n in `seq 1 100`; do printf &quot;write /foo.%03d %d\n&quot; $n $n; done
</pre>
<div class="Pp"></div>
When using guestfish interactively it can be helpful to just run the shell
  script first (ie. remove the initial &quot;&lt;&quot; character so it is just
  an ordinary <i>!</i> local command), see what guestfish commands it would run,
  and when you are happy with those prepend the &quot;&lt;&quot; character to
  run the guestfish commands for real.
<h1 class="Sh" title="Sh" id="PIPES"><a class="selflink" href="#PIPES">PIPES</a></h1>
Use &quot;command &lt;space&gt; | command&quot; to pipe the output of the first
  command (a guestfish command) to the second command (any host command). For
  example:
<div class="Pp"></div>
<pre>
 cat /etc/passwd | awk -F: '$3 == 0 { print }'
</pre>
<div class="Pp"></div>
(where &quot;cat&quot; is the guestfish cat command, but &quot;awk&quot; is the
  host awk program). The above command would list all accounts in the guest
  filesystem which have UID 0, ie. root accounts including backdoors. Other
  examples:
<div class="Pp"></div>
<pre>
 hexdump /bin/ls | head
 list-devices | tail -1
 tgz-out / - | tar ztf -
</pre>
<div class="Pp"></div>
The space before the pipe symbol is required, any space after the pipe symbol is
  optional. Everything after the pipe symbol is just passed straight to the host
  shell, so it can contain redirections, globs and anything else that makes
  sense on the host side.
<div class="Pp"></div>
To use a literal argument which begins with a pipe symbol, you have to quote it,
  eg:
<div class="Pp"></div>
<pre>
 echo &quot;|&quot;
</pre>
<h1 class="Sh" title="Sh" id="HOME_DIRECTORIES"><a class="selflink" href="#HOME_DIRECTORIES">HOME
  DIRECTORIES</a></h1>
If a parameter starts with the character &quot;~&quot; then the tilde may be
  expanded as a home directory path (either &quot;~&quot; for the current user's
  home directory, or &quot;~user&quot; for another user).
<div class="Pp"></div>
Note that home directory expansion happens for users known <i>on the</i>
  <i>host</i>, not in the guest filesystem.
<div class="Pp"></div>
To use a literal argument which begins with a tilde, you have to quote it, eg:
<div class="Pp"></div>
<pre>
 echo &quot;~&quot;
</pre>
<h1 class="Sh" title="Sh" id="ENCRYPTED_DISKS"><a class="selflink" href="#ENCRYPTED_DISKS">ENCRYPTED
  DISKS</a></h1>
Libguestfs has some support for Linux guests encrypted according to the Linux
  Unified Key Setup (LUKS) standard, which includes nearly all whole disk
  encryption systems used by modern Linux guests. Currently only LVM-on-LUKS is
  supported.
<div class="Pp"></div>
Identify encrypted block devices and partitions using &quot;vfs-type&quot;:
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; vfs-type /dev/sda2
 crypto_LUKS
</pre>
<div class="Pp"></div>
Then open those devices using &quot;luks-open&quot;. This creates a
  device-mapper device called <i>/dev/mapper/luksdev</i>.
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; luks-open /dev/sda2 luksdev
 Enter key or passphrase (&quot;key&quot;): &lt;enter the passphrase&gt;
</pre>
<div class="Pp"></div>
Finally you have to tell LVM to scan for volume groups on the newly created
  mapper device:
<div class="Pp"></div>
<pre>
 vgscan
 vg-activate-all true
</pre>
<div class="Pp"></div>
The logical volume(s) can now be mounted in the usual way.
<div class="Pp"></div>
Before closing a LUKS device you must unmount any logical volumes on it and
  deactivate the volume groups by calling &quot;vg-activate false VG&quot; on
  each one. Then you can close the mapper device:
<div class="Pp"></div>
<pre>
 vg-activate false /dev/VG
 luks-close /dev/mapper/luksdev
</pre>
<h1 class="Sh" title="Sh" id="WINDOWS_PATHS"><a class="selflink" href="#WINDOWS_PATHS">WINDOWS
  PATHS</a></h1>
If a path is prefixed with &quot;win:&quot; then you can use Windows-style drive
  letters and paths (with some limitations). The following commands are
  equivalent:
<div class="Pp"></div>
<pre>
 file /WINDOWS/system32/config/system.LOG
 file win:\windows\system32\config\system.log
 file WIN:C:\Windows\SYSTEM32\CONFIG\SYSTEM.LOG
</pre>
<div class="Pp"></div>
The parameter is rewritten &quot;behind the scenes&quot; by looking up the
  position where the drive is mounted, prepending that to the path, changing all
  backslash characters to forward slash, then resolving the result using
  &quot;case-sensitive-path&quot;. For example if the E: drive was mounted on
  <i>/e</i> then the parameter might be rewritten like this:
<div class="Pp"></div>
<pre>
 win:e:\foo\bar =&gt; /e/FOO/bar
</pre>
<div class="Pp"></div>
This only works in argument positions that expect a path.
<h1 class="Sh" title="Sh" id="UPLOADING_AND_DOWNLOADING_FILES"><a class="selflink" href="#UPLOADING_AND_DOWNLOADING_FILES">UPLOADING
  AND DOWNLOADING FILES</a></h1>
For commands such as &quot;upload&quot;, &quot;download&quot;,
  &quot;tar-in&quot;, &quot;tar-out&quot; and others which upload from or
  download to a local file, you can use the special filename &quot;-&quot; to
  mean &quot;from stdin&quot; or &quot;to stdout&quot;. For example:
<div class="Pp"></div>
<pre>
 upload - /foo
</pre>
<div class="Pp"></div>
reads stdin and creates from that a file <i>/foo</i> in the disk image, and:
<div class="Pp"></div>
<pre>
 tar-out /etc - | tar tf -
</pre>
<div class="Pp"></div>
writes the tarball to stdout and then pipes that into the external
  &quot;tar&quot; command (see &quot;PIPES&quot;).
<div class="Pp"></div>
When using &quot;-&quot; to read from stdin, the input is read up to the end of
  stdin. You can also use a special &quot;heredoc&quot;-like syntax to read up
  to some arbitrary end marker:
<div class="Pp"></div>
<pre>
 upload -&lt;&lt;END /foo
 input line 1
 input line 2
 input line 3
 END
</pre>
<div class="Pp"></div>
Any string of characters can be used instead of &quot;END&quot;. The end marker
  must appear on a line of its own, without any preceding or following
  characters (not even spaces).
<div class="Pp"></div>
Note that the &quot;-&lt;&lt;&quot; syntax only applies to parameters used to
  upload local files (so-called &quot;FileIn&quot; parameters in the generator).
<h1 class="Sh" title="Sh" id="EXIT_ON_ERROR_BEHAVIOUR"><a class="selflink" href="#EXIT_ON_ERROR_BEHAVIOUR">EXIT
  ON ERROR BEHAVIOUR</a></h1>
By default, guestfish will ignore any errors when in interactive mode (ie.
  taking commands from a human over a tty), and will exit on the first error in
  non-interactive mode (scripts, commands given on the command line).
<div class="Pp"></div>
If you prefix a command with a <i>-</i> character, then that command will not
  cause guestfish to exit, even if that (one) command returns an error.
<h1 class="Sh" title="Sh" id="REMOTE_CONTROL_GUESTFISH_OVER_A_SOCKET"><a class="selflink" href="#REMOTE_CONTROL_GUESTFISH_OVER_A_SOCKET">REMOTE
  CONTROL GUESTFISH OVER A SOCKET</a></h1>
Guestfish can be remote-controlled over a socket. This is useful particularly in
  shell scripts where you want to make several different changes to a
  filesystem, but you don't want the overhead of starting up a guestfish process
  each time.
<div class="Pp"></div>
Start a guestfish server process using:
<div class="Pp"></div>
<pre>
 eval &quot;`guestfish --listen`&quot;
</pre>
<div class="Pp"></div>
and then send it commands by doing:
<div class="Pp"></div>
<pre>
 guestfish --remote cmd [...]
</pre>
<div class="Pp"></div>
To cause the server to exit, send it the exit command:
<div class="Pp"></div>
<pre>
 guestfish --remote exit
</pre>
<div class="Pp"></div>
Note that the server will normally exit if there is an error in a command. You
  can change this in the usual way. See section &quot;EXIT ON ERROR
  BEHAVIOUR&quot;.
<h2 class="Ss" title="Ss" id="CONTROLLING_MULTIPLE_GUESTFISH_PROCESSES"><a class="selflink" href="#CONTROLLING_MULTIPLE_GUESTFISH_PROCESSES">CONTROLLING
  MULTIPLE GUESTFISH PROCESSES</a></h2>
The &quot;eval&quot; statement sets the environment variable $GUESTFISH_PID,
  which is how the <i>--remote</i> option knows where to send the commands. You
  can have several guestfish listener processes running using:
<div class="Pp"></div>
<pre>
 eval &quot;`guestfish --listen`&quot;
 pid1=$GUESTFISH_PID
 eval &quot;`guestfish --listen`&quot;
 pid2=$GUESTFISH_PID
 ...
 guestfish --remote=$pid1 cmd
 guestfish --remote=$pid2 cmd
</pre>
<h2 class="Ss" title="Ss" id="REMOTE_CONTROL_AND_CSH"><a class="selflink" href="#REMOTE_CONTROL_AND_CSH">REMOTE
  CONTROL AND CSH</a></h2>
When using csh-like shells (csh, tcsh etc) you have to add the <i>--csh</i>
  option:
<div class="Pp"></div>
<pre>
 eval &quot;`guestfish --listen --csh`&quot;
</pre>
<h2 class="Ss" title="Ss" id="REMOTE_CONTROL_DETAILS"><a class="selflink" href="#REMOTE_CONTROL_DETAILS">REMOTE
  CONTROL DETAILS</a></h2>
Remote control happens over a Unix domain socket called
  <i>/tmp/.guestfish-$UID/socket-$PID</i>, where $UID is the effective user ID
  of the process, and $PID is the process ID of the server.
<div class="Pp"></div>
Guestfish client and server versions must match exactly.
<div class="Pp"></div>
Older versions of guestfish were vulnerable to CVE-2013-4419 (see
  &quot;CVE-2013-4419&quot; in <i>guestfs</i>(3)). This is fixed in the current
  version.
<h2 class="Ss" title="Ss" id="USING_REMOTE_CONTROL_ROBUSTLY_FROM_SHELL_SCRIPTS"><a class="selflink" href="#USING_REMOTE_CONTROL_ROBUSTLY_FROM_SHELL_SCRIPTS">USING
  REMOTE CONTROL ROBUSTLY FROM SHELL SCRIPTS</a></h2>
From Bash, you can use the following code which creates a guestfish instance,
  correctly quotes the command line, handles failure to start, and cleans up
  guestfish when the script exits:
<div class="Pp"></div>
<pre>
 #!/bin/bash -
 
 set -e
 
 guestfish[0]=&quot;guestfish&quot;
 guestfish[1]=&quot;--listen&quot;
 guestfish[2]=&quot;--ro&quot;
 guestfish[3]=&quot;-a&quot;
 guestfish[4]=&quot;disk.img&quot;
 
 GUESTFISH_PID=
 eval $(&quot;${guestfish[@]}&quot;)
 if [ -z &quot;$GUESTFISH_PID&quot; ]; then
     echo &quot;error: guestfish didn't start up, see error messages above&quot;
     exit 1
 fi
 
 cleanup_guestfish ()
 {
     guestfish --remote -- exit &gt;/dev/null 2&gt;&amp;1 ||:
 }
 trap cleanup_guestfish EXIT ERR
 
 guestfish --remote -- run
 
 # ...
</pre>
<h2 class="Ss" title="Ss" id="REMOTE_CONTROL_DOES_NOT_WORK_WITH_-a_ETC._OPTIONS"><a class="selflink" href="#REMOTE_CONTROL_DOES_NOT_WORK_WITH_-a_ETC._OPTIONS">REMOTE
  CONTROL DOES NOT WORK WITH <i>-a</i> ETC. OPTIONS</a></h2>
Options such as <i>-a</i>, <i>--add</i>, <i>-N</i>, <i>--new</i> etc don't
  interact properly with remote support. They are processed locally, and not
  sent through to the remote guestfish. In particular this won't do what you
  expect:
<div class="Pp"></div>
<pre>
 guestfish --remote --add disk.img
</pre>
<div class="Pp"></div>
Don't use these options. Use the equivalent commands instead, eg:
<div class="Pp"></div>
<pre>
 guestfish --remote add-drive disk.img
</pre>
<div class="Pp"></div>
or:
<div class="Pp"></div>
<pre>
 guestfish --remote
 &gt;&lt;fs&gt; add disk.img
</pre>
<h2 class="Ss" title="Ss" id="REMOTE_CONTROL_RUN_COMMAND_HANGING"><a class="selflink" href="#REMOTE_CONTROL_RUN_COMMAND_HANGING">REMOTE
  CONTROL RUN COMMAND HANGING</a></h2>
Using the &quot;run&quot; (or &quot;launch&quot;) command remotely in a command
  substitution context hangs, ie. don't do (note the backquotes):
<div class="Pp"></div>
<pre>
 a=`guestfish --remote run`
</pre>
<div class="Pp"></div>
Since the &quot;run&quot; command produces no output on stdout, this is not
  useful anyway. For further information see
  https://bugzilla.redhat.com/show_bug.cgi?id=592910.
<h1 class="Sh" title="Sh" id="PREPARED_DISK_IMAGES"><a class="selflink" href="#PREPARED_DISK_IMAGES">PREPARED
  DISK IMAGES</a></h1>
Use the <i>-N [filename=]type</i> or <i>--new [filename=]type</i> parameter to
  select one of a set of preformatted disk images that guestfish can make for
  you to save typing. This is particularly useful for testing purposes. This
  option is used instead of the <i>-a</i> option, and like <i>-a</i> can appear
  multiple times (and can be mixed with <i>-a</i>).
<div class="Pp"></div>
The new disk is called <i>test1.img</i> for the first <i>-N</i>,
  <i>test2.img</i> for the second and so on. Existing files in the current
  directory are <i>overwritten</i>. You can use a different filename by
  specifying &quot;filename=&quot; before the type (see examples below).
<div class="Pp"></div>
The type briefly describes how the disk should be sized, partitioned, how
  filesystem(s) should be created, and how content should be added. Optionally
  the type can be followed by extra parameters, separated by &quot;:&quot;
  (colon) characters. For example, <i>-N fs</i> creates a default 100MB,
  sparsely-allocated disk, containing a single partition, with the partition
  formatted as ext2. <i>-N fs:ext4:1G</i> is the same, but for an ext4
  filesystem on a 1GB disk instead.
<div class="Pp"></div>
Note that the prepared filesystem is not mounted. You would usually have to use
  the &quot;mount /dev/sda1 /&quot; command or add the <i>-m /dev/sda1</i>
  option.
<div class="Pp"></div>
If any <i>-N</i> or <i>--new</i> options are given, the libguestfs appliance is
  automatically launched.
<h2 class="Ss" title="Ss" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h2>
Create a 100MB disk with an ext4-formatted partition, called <i>test1.img</i> in
  the current directory:
<div class="Pp"></div>
<pre>
 guestfish -N fs:ext4
</pre>
<div class="Pp"></div>
Create a 32MB disk with a VFAT-formatted partition, and mount it:
<div class="Pp"></div>
<pre>
 guestfish -N fs:vfat:32M -m /dev/sda1
</pre>
<div class="Pp"></div>
Create a blank 200MB disk:
<div class="Pp"></div>
<pre>
 guestfish -N disk:200M
</pre>
<div class="Pp"></div>
Create a blank 200MB disk called <i>blankdisk.img</i> (instead of
  <i>test1.img</i>):
<div class="Pp"></div>
<pre>
 guestfish -N blankdisk.img=disk:200M
</pre>
<h2 class="Ss" title="Ss" id="-N_disk_-_create_a_blank_disk"><a class="selflink" href="#-N_disk_-_create_a_blank_disk"><b>-N
  disk</b> - create a blank disk</a></h2>
&quot;guestfish -N [ <i>filename</i>=]disk[:<i>size</i>]&quot;
<div class="Pp"></div>
Create a blank disk, size 100MB (by default).
<div class="Pp"></div>
The default size can be changed by supplying an optional parameter.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 size          100M          the size of the disk image
</pre>
<h2 class="Ss" title="Ss" id="-N_part_-_create_a_partitioned_disk"><a class="selflink" href="#-N_part_-_create_a_partitioned_disk"><b>-N
  part</b> - create a partitioned disk</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]part[:<i>size</i>[:<i>partition</i>]]&quot;
<div class="Pp"></div>
Create a disk with a single partition. By default the size of the disk is 100MB
  (the available space in the partition will be a tiny bit smaller) and the
  partition table will be MBR (old DOS-style).
<div class="Pp"></div>
These defaults can be changed by supplying optional parameters.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 size          100M          the size of the disk image
 partition     mbr           partition table type
</pre>
<h2 class="Ss" title="Ss" id="-N_fs_-_create_a_filesystem"><a class="selflink" href="#-N_fs_-_create_a_filesystem"><b>-N
  fs</b> - create a filesystem</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]fs[:<i>filesystem</i>[:<i>size</i>[:<i>partition</i>]]]&quot;
<div class="Pp"></div>
Create a disk with a single partition, with the partition containing an empty
  filesystem. This defaults to creating a 100MB disk (the available space in the
  filesystem will be a tiny bit smaller) with an MBR (old DOS-style) partition
  table and an ext2 filesystem.
<div class="Pp"></div>
These defaults can be changed by supplying optional parameters.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 filesystem    ext2          the type of filesystem to use
 size          100M          the size of the disk image
 partition     mbr           partition table type
</pre>
<h2 class="Ss" title="Ss" id="-N_lv_-_create_a_disk_with_logical_volume"><a class="selflink" href="#-N_lv_-_create_a_disk_with_logical_volume"><b>-N
  lv</b> - create a disk with logical volume</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]lv[:<i>name</i>[:<i>size</i>[:<i>partition</i>]]]&quot;
<div class="Pp"></div>
Create a disk with a single partition, set up the partition as an LVM2 physical
  volume, and place a volume group and logical volume on there. This defaults to
  creating a 100MB disk with the VG and LV called &quot;/dev/VG/LV&quot;. You
  can change the name of the VG and LV by supplying an alternate name as the
  first optional parameter.
<div class="Pp"></div>
Note this does not create a filesystem. Use 'lvfs' to do that.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 name          /dev/VG/LV    the name of the VG and LV to use
 size          100M          the size of the disk image
 partition     mbr           partition table type
</pre>
<h2 class="Ss" title="Ss" id="-N_lvfs_-_create_a_disk_with_logical_volume_and_filesystem"><a class="selflink" href="#-N_lvfs_-_create_a_disk_with_logical_volume_and_filesystem"><b>-N
  lvfs</b> - create a disk with logical volume and filesystem</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]lvfs[:<i>name</i>[:<i>filesystem</i>[:<i>size</i>[:
  <i>partition</i>]]]]&quot;
<div class="Pp"></div>
Create a disk with a single partition, set up the partition as an LVM2 physical
  volume, and place a volume group and logical volume on there. Then format the
  LV with a filesystem. This defaults to creating a 100MB disk with the VG and
  LV called &quot;/dev/VG/LV&quot;, with an ext2 filesystem.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 name          /dev/VG/LV    the name of the VG and LV to use
 filesystem    ext2          the type of filesystem to use
 size          100M          the size of the disk image
 partition     mbr           partition table type
</pre>
<h2 class="Ss" title="Ss" id="-N_bootroot_-_create_a_boot_and_root_filesystem"><a class="selflink" href="#-N_bootroot_-_create_a_boot_and_root_filesystem"><b>-N
  bootroot</b> - create a boot and root filesystem</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]bootroot[:<i>bootfs</i>[:<i>rootfs</i>[:<i>size</i>[:<i>bootsize</i>[:<i>partition</i>]]]]]&quot;
<div class="Pp"></div>
Create a disk with two partitions, for boot and root filesystem. Format the two
  filesystems independently. There are several optional parameters which control
  the exact layout and filesystem types.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 bootfs        ext2          the type of filesystem to use for boot
 rootfs        ext2          the type of filesystem to use for root
 size          100M          the size of the disk image
 bootsize      32M           the size of the boot filesystem
 partition     mbr           partition table type
</pre>
<h2 class="Ss" title="Ss" id="-N_bootrootlv_-_create_a_boot_and_root_filesystem_using_LVM"><a class="selflink" href="#-N_bootrootlv_-_create_a_boot_and_root_filesystem_using_LVM"><b>-N
  bootrootlv</b> - create a boot and root filesystem using LVM</a></h2>
&quot;guestfish -N [
  <i>filename</i>=]bootrootlv[:<i>name</i>[:<i>bootfs</i>[:<i>rootfs</i>[:<i>size</i>[:<i>bootsize</i>[:<i>partition</i>]]]]]]&quot;
<div class="Pp"></div>
This is the same as &quot;bootroot&quot; but the root filesystem (only) is
  placed on a logical volume, named by default &quot;/dev/VG/LV&quot;. There are
  several optional parameters which control the exact layout.
<div class="Pp"></div>
The optional parameters are:
<div class="Pp"></div>
<pre>
 Name          Default value
 name          /dev/VG/LV    the name of the VG and LV for root
 bootfs        ext2          the type of filesystem to use for boot
 rootfs        ext2          the type of filesystem to use for root
 size          100M          the size of the disk image
 bootsize      32M           the size of the boot filesystem
 partition     mbr           partition table type
</pre>
<h1 class="Sh" title="Sh" id="ADDING_REMOTE_STORAGE"><a class="selflink" href="#ADDING_REMOTE_STORAGE">ADDING
  REMOTE STORAGE</a></h1>
<i>For API-level documentation on this topic, see</i>
  <i>&quot;guestfs_add_drive_opts&quot; in </i> <i>guestfs</i><i>(3) and</i>
  <i>&quot;REMOTE STORAGE&quot; in </i> <i>guestfs</i><i>(3)</i>.
<div class="Pp"></div>
On the command line, you can use the <i>-a</i> option to add network block
  devices using a URI-style format, for example:
<div class="Pp"></div>
<pre>
 guestfish -a nbd://example.com
</pre>
<div class="Pp"></div>
URIs <i>cannot</i> be used with the &quot;add&quot; command. The equivalent
  command using the API directly is:
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; add /disk.img protocol:nbd server:tcp:example.com
</pre>
<div class="Pp"></div>
The possible <i>-a URI</i> formats are described below.
<h2 class="Ss" title="Ss" id="-a_disk.img"><a class="selflink" href="#-a_disk.img"><b>-a
  disk.img</b></a></h2>
<h2 class="Ss" title="Ss" id="-a_file:///path/to/disk.img"><a class="selflink" href="#-a_file:///path/to/disk.img"><b>-a
  file:///path/to/disk.img</b></a></h2>
Add the local disk image (or device) called <i>disk.img</i>.
<h2 class="Ss" title="Ss" id="-a_nbd://example.com[:port]"><a class="selflink" href="#-a_nbd://example.com[:port]"><b>-a
  nbd://example.com[:port]</b></a></h2>
<h2 class="Ss" title="Ss" id="-a_nbd://example.com[:port]/exportname"><a class="selflink" href="#-a_nbd://example.com[:port]/exportname"><b>-a
  nbd://example.com[:port]/exportname</b></a></h2>
<h2 class="Ss" title="Ss" id="-a_nbd://?socket=/socket"><a class="selflink" href="#-a_nbd://?socket=/socket"><b>-a
  nbd://?socket=/socket</b></a></h2>
<h2 class="Ss" title="Ss" id="-a_nbd:///exportname?socket=/socket"><a class="selflink" href="#-a_nbd:///exportname?socket=/socket"><b>-a
  nbd:///exportname?socket=/socket</b></a></h2>
Add a disk located on Network Block Device (nbd) storage.
<div class="Pp"></div>
The <i>/exportname</i> part of the URI specifies an NBD export name, but is
  usually left empty.
<div class="Pp"></div>
The optional <i>?socket</i> parameter can be used to specify a Unix domain
  socket that we talk to the NBD server over. Note that you cannot mix server
  name (ie. TCP/IP) and socket path.
<div class="Pp"></div>
The equivalent API command would be (no export name):
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; add &quot;&quot; protocol:nbd server:[tcp:example.com|unix:/socket]
</pre>
<h2 class="Ss" title="Ss" id="-a_rbd:///pool/disk"><a class="selflink" href="#-a_rbd:///pool/disk"><b>-a
  rbd:///pool/disk</b></a></h2>
<h2 class="Ss" title="Ss" id="-a_rbd://example.com[:port]/pool/disk"><a class="selflink" href="#-a_rbd://example.com[:port]/pool/disk"><b>-a
  rbd://example.com[:port]/pool/disk</b></a></h2>
Add a disk image located on a Ceph (RBD/librbd) storage volume.
<div class="Pp"></div>
Although libguestfs and Ceph supports multiple servers, only a single server can
  be specified when using this URI syntax.
<div class="Pp"></div>
The equivalent API command would be:
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; add pool/disk protocol:rbd server:tcp:example.com:port
</pre>
<h1 class="Sh" title="Sh" id="PROGRESS_BARS"><a class="selflink" href="#PROGRESS_BARS">PROGRESS
  BARS</a></h1>
Some (not all) long-running commands send progress notification messages as they
  are running. Guestfish turns these messages into progress bars.
<div class="Pp"></div>
When a command that supports progress bars takes longer than two seconds to run,
  and if progress bars are enabled, then you will see one appearing below the
  command:
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; copy-size /large-file /another-file 2048M
 / 10% [#####-----------------------------------------] 00:30
</pre>
<div class="Pp"></div>
The spinner on the left hand side moves round once for every progress
  notification received from the backend. This is a (reasonably) golden
  assurance that the command is &quot;doing something&quot; even if the progress
  bar is not moving, because the command is able to send the progress
  notifications. When the bar reaches 100% and the command finishes, the spinner
  disappears.
<div class="Pp"></div>
Progress bars are enabled by default when guestfish is used interactively. You
  can enable them even for non-interactive modes using <i>--progress-bars</i>,
  and you can disable them completely using <i>--no-progress-bars</i>.
<h1 class="Sh" title="Sh" id="PROMPT"><a class="selflink" href="#PROMPT">PROMPT</a></h1>
You can change or add colours to the default prompt (&quot;&gt;&lt;fs&gt;&quot;)
  by setting the &quot;GUESTFISH_PS1&quot; environment variable. A second string
  (&quot;GUESTFISH_OUTPUT&quot;) is printed after the command has been entered
  and before the output, allowing you to control the colour of the output. A
  third string (&quot;GUESTFISH_INIT&quot;) is printed before the welcome
  message, allowing you to control the colour of that message. A fourth string
  (&quot;GUESTFISH_RESTORE&quot;) is printed before guestfish exits.
<div class="Pp"></div>
A simple prompt can be set by setting &quot;GUESTFISH_PS1&quot; to an alternate
  string:
<div class="Pp"></div>
<pre>
 $ GUESTFISH_PS1='(type a command) '
 $ export GUESTFISH_PS1
 $ guestfish
 [...]
 (type a command) &#x2582;
</pre>
<div class="Pp"></div>
You can also use special escape sequences, as described in the table below:
<dl class="Bl-tag">
  <dt class="It-tag">\\</dt>
  <dd class="It-tag">A literal backslash character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\[</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\]</dt>
  <dd class="It-tag">(These should only be used in &quot;GUESTFISH_PS1&quot;.)
    <div style="height: 1.00em;">&#x00A0;</div>
    Place non-printing characters (eg. terminal control codes for colours)
      between &quot;\[...\]&quot;. What this does it to tell the
      <i>readline</i>(3) library that it should treat this subsequence as
      zero-width, so that command-line redisplay, editing etc works.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\a</dt>
  <dd class="It-tag">A bell character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\e</dt>
  <dd class="It-tag">An ASCII ESC (escape) character.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\n</dt>
  <dd class="It-tag">A newline.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\r</dt>
  <dd class="It-tag">A carriage return.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\NNN</dt>
  <dd class="It-tag">The ASCII character whose code is the octal value NNN.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">\xNN</dt>
  <dd class="It-tag">The ASCII character whose code is the hex value NN.</dd>
</dl>
<h2 class="Ss" title="Ss" id="EXAMPLES_OF_PROMPTS"><a class="selflink" href="#EXAMPLES_OF_PROMPTS">EXAMPLES
  OF PROMPTS</a></h2>
Note these these require a terminal that supports ANSI escape codes.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 GUESTFISH_PS1='\[\e[1;30m\]&gt;&lt;fs&gt;\[\e[0;30m\] '
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    A bold black version of the ordinary prompt.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 GUESTFISH_PS1='\[\e[1;32m\]&gt;&lt;fs&gt;\[\e[0;31m\] '
 GUESTFISH_OUTPUT='\e[0m'
 GUESTFISH_RESTORE=&quot;$GUESTFISH_OUTPUT&quot;
 GUESTFISH_INIT='\e[1;34m'
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Blue welcome text, green prompt, red commands, black command output.</dd>
</dl>
<h1 class="Sh" title="Sh" id="WINDOWS_8"><a class="selflink" href="#WINDOWS_8">WINDOWS
  8</a></h1>
Windows 8 &quot;fast startup&quot; can prevent guestfish from mounting NTFS
  partitions. See &quot;WINDOWS HIBERNATION AND WINDOWS 8 FAST STARTUP&quot; in
  <i>guestfs</i>(3).
<h1 class="Sh" title="Sh" id="GUESTFISH_COMMANDS"><a class="selflink" href="#GUESTFISH_COMMANDS">GUESTFISH
  COMMANDS</a></h1>
The commands in this section are guestfish convenience commands, in other words,
  they are not part of the <i>guestfs</i>(3) API.
<h2 class="Ss" title="Ss" id="help"><a class="selflink" href="#help">help</a></h2>
<pre>
 help
 help cmd
</pre>
<div class="Pp"></div>
Without any parameter, this provides general help.
<div class="Pp"></div>
With a &quot;cmd&quot; parameter, this displays detailed help for that command.
<h2 class="Ss" title="Ss" id="exit"><a class="selflink" href="#exit">exit</a></h2>
<h2 class="Ss" title="Ss" id="quit"><a class="selflink" href="#quit">quit</a></h2>
This exits guestfish. You can also use &quot;^D&quot; key.
<h2 class="Ss" title="Ss" id="alloc"><a class="selflink" href="#alloc">alloc</a></h2>
<h2 class="Ss" title="Ss" id="allocate"><a class="selflink" href="#allocate">allocate</a></h2>
<pre>
 alloc filename size
</pre>
<div class="Pp"></div>
This creates an empty (zeroed) file of the given size, and then adds so it can
  be further examined.
<div class="Pp"></div>
For more advanced image creation, see &quot;disk-create&quot;.
<div class="Pp"></div>
Size can be specified using standard suffixes, eg. &quot;1M&quot;.
<div class="Pp"></div>
To create a sparse file, use &quot;sparse&quot; instead. To create a prepared
  disk image, see &quot;PREPARED DISK IMAGES&quot;.
<h2 class="Ss" title="Ss" id="copy-in"><a class="selflink" href="#copy-in">copy-in</a></h2>
<pre>
 copy-in local [local ...] /remotedir
</pre>
<div class="Pp"></div>
&quot;copy-in&quot; copies local files or directories recursively into the disk
  image, placing them in the directory called <i>/remotedir</i> (which must
  exist). This guestfish meta-command turns into a sequence of
  &quot;tar-in&quot; and other commands as necessary.
<div class="Pp"></div>
Multiple local files and directories can be specified, but the last parameter
  must always be a remote directory. Wildcards cannot be used.
<h2 class="Ss" title="Ss" id="copy-out"><a class="selflink" href="#copy-out">copy-out</a></h2>
<pre>
 copy-out remote [remote ...] localdir
</pre>
<div class="Pp"></div>
&quot;copy-out&quot; copies remote files or directories recursively out of the
  disk image, placing them on the host disk in a local directory called
  &quot;localdir&quot; (which must exist). This guestfish meta-command turns
  into a sequence of &quot;download&quot;, &quot;tar-out&quot; and other
  commands as necessary.
<div class="Pp"></div>
Multiple remote files and directories can be specified, but the last parameter
  must always be a local directory. To download to the current directory, use
  &quot;.&quot; as in:
<div class="Pp"></div>
<pre>
 copy-out /home .
</pre>
<div class="Pp"></div>
Wildcards cannot be used in the ordinary command, but you can use them with the
  help of &quot;glob&quot; like this:
<div class="Pp"></div>
<pre>
 glob copy-out /home/* .
</pre>
<h2 class="Ss" title="Ss" id="delete-event"><a class="selflink" href="#delete-event">delete-event</a></h2>
<pre>
 delete-event name
</pre>
<div class="Pp"></div>
Delete the event handler which was previously registered as &quot;name&quot;. If
  multiple event handlers were registered with the same name, they are all
  deleted.
<div class="Pp"></div>
See also the guestfish commands &quot;event&quot; and &quot;list-events&quot;.
<h2 class="Ss" title="Ss" id="display"><a class="selflink" href="#display">display</a></h2>
<pre>
 display filename
</pre>
<div class="Pp"></div>
Use &quot;display&quot; (a graphical display program) to display an image file.
  It downloads the file, and runs &quot;display&quot; on it.
<div class="Pp"></div>
To use an alternative program, set the &quot;GUESTFISH_DISPLAY_IMAGE&quot;
  environment variable. For example to use the GNOME display program:
<div class="Pp"></div>
<pre>
 export GUESTFISH_DISPLAY_IMAGE=eog
</pre>
<div class="Pp"></div>
See also <i>display</i>(1).
<h2 class="Ss" title="Ss" id="echo"><a class="selflink" href="#echo">echo</a></h2>
<pre>
 echo [params ...]
</pre>
<div class="Pp"></div>
This echos the parameters to the terminal.
<h2 class="Ss" title="Ss" id="edit"><a class="selflink" href="#edit">edit</a></h2>
<h2 class="Ss" title="Ss" id="vi"><a class="selflink" href="#vi">vi</a></h2>
<h2 class="Ss" title="Ss" id="emacs"><a class="selflink" href="#emacs">emacs</a></h2>
<pre>
 edit filename
</pre>
<div class="Pp"></div>
This is used to edit a file. It downloads the file, edits it locally using your
  editor, then uploads the result.
<div class="Pp"></div>
The editor is $EDITOR. However if you use the alternate commands &quot;vi&quot;
  or &quot;emacs&quot; you will get those corresponding editors.
<h2 class="Ss" title="Ss" id="event"><a class="selflink" href="#event">event</a></h2>
<pre>
 event name eventset &quot;shell script ...&quot;
</pre>
<div class="Pp"></div>
Register a shell script fragment which is executed when an event is raised. See
  &quot;guestfs_set_event_callback&quot; in <i>guestfs</i>(3) for a discussion
  of the event API in libguestfs.
<div class="Pp"></div>
The &quot;name&quot; parameter is a name that you give to this event handler. It
  can be any string (even the empty string) and is simply there so you can
  delete the handler using the guestfish &quot;delete-event&quot; command.
<div class="Pp"></div>
The &quot;eventset&quot; parameter is a comma-separated list of one or more
  events, for example &quot;close&quot; or &quot;close,trace&quot;. The special
  value &quot;*&quot; means all events.
<div class="Pp"></div>
The third and final parameter is the shell script fragment (or any external
  command) that is executed when any of the events in the eventset occurs. It is
  executed using &quot;$SHELL -c&quot;, or if $SHELL is not set then <i>/bin/sh
  -c</i>.
<div class="Pp"></div>
The shell script fragment receives callback parameters as arguments $1, $2 etc.
  The actual event that was called is available in the environment variable
  $EVENT.
<div class="Pp"></div>
<pre>
 event &quot;&quot; close &quot;echo closed&quot;
 event messages appliance,library,trace &quot;echo $@&quot;
 event &quot;&quot; progress &quot;echo progress: $3/$4&quot;
 event &quot;&quot; * &quot;echo $EVENT $@&quot;
</pre>
<div class="Pp"></div>
See also the guestfish commands &quot;delete-event&quot; and
  &quot;list-events&quot;.
<h2 class="Ss" title="Ss" id="glob"><a class="selflink" href="#glob">glob</a></h2>
<pre>
 glob command args...
</pre>
<div class="Pp"></div>
Expand wildcards in any paths in the args list, and run &quot;command&quot;
  repeatedly on each matching path.
<div class="Pp"></div>
See &quot;WILDCARDS AND GLOBBING&quot;.
<h2 class="Ss" title="Ss" id="hexedit"><a class="selflink" href="#hexedit">hexedit</a></h2>
<pre>
 hexedit &lt;filename|device&gt;
 hexedit &lt;filename|device&gt; &lt;max&gt;
 hexedit &lt;filename|device&gt; &lt;start&gt; &lt;max&gt;
</pre>
<div class="Pp"></div>
Use hexedit (a hex editor) to edit all or part of a binary file or block device.
<div class="Pp"></div>
This command works by downloading potentially the whole file or device, editing
  it locally, then uploading it. If the file or device is large, you have to
  specify which part you wish to edit by using &quot;max&quot; and/or
  &quot;start&quot; &quot;max&quot; parameters. &quot;start&quot; and
  &quot;max&quot; are specified in bytes, with the usual modifiers allowed such
  as &quot;1M&quot; (1 megabyte).
<div class="Pp"></div>
For example to edit the first few sectors of a disk you might do:
<div class="Pp"></div>
<pre>
 hexedit /dev/sda 1M
</pre>
<div class="Pp"></div>
which would allow you to edit anywhere within the first megabyte of the disk.
<div class="Pp"></div>
To edit the superblock of an ext2 filesystem on <i>/dev/sda1</i>, do:
<div class="Pp"></div>
<pre>
 hexedit /dev/sda1 0x400 0x400
</pre>
<div class="Pp"></div>
(assuming the superblock is in the standard location).
<div class="Pp"></div>
This command requires the external <i>hexedit</i>(1) program. You can specify
  another program to use by setting the &quot;HEXEDITOR&quot; environment
  variable.
<div class="Pp"></div>
See also &quot;hexdump&quot;.
<h2 class="Ss" title="Ss" id="lcd"><a class="selflink" href="#lcd">lcd</a></h2>
<pre>
 lcd directory
</pre>
<div class="Pp"></div>
Change the local directory, ie. the current directory of guestfish itself.
<div class="Pp"></div>
Note that &quot;!cd&quot; won't do what you might expect.
<h2 class="Ss" title="Ss" id="list-events"><a class="selflink" href="#list-events">list-events</a></h2>
<pre>
 list-events
</pre>
<div class="Pp"></div>
List the event handlers registered using the guestfish &quot;event&quot;
  command.
<h2 class="Ss" title="Ss" id="man"><a class="selflink" href="#man">man</a></h2>
<h2 class="Ss" title="Ss" id="manual"><a class="selflink" href="#manual">manual</a></h2>
<pre>
  man
</pre>
<div class="Pp"></div>
Opens the manual page for guestfish.
<h2 class="Ss" title="Ss" id="more"><a class="selflink" href="#more">more</a></h2>
<h2 class="Ss" title="Ss" id="less"><a class="selflink" href="#less">less</a></h2>
<pre>
 more filename
 less filename
</pre>
<div class="Pp"></div>
This is used to view a file.
<div class="Pp"></div>
The default viewer is $PAGER. However if you use the alternate command
  &quot;less&quot; you will get the &quot;less&quot; command specifically.
<h2 class="Ss" title="Ss" id="reopen"><a class="selflink" href="#reopen">reopen</a></h2>
<pre>
  reopen
</pre>
<div class="Pp"></div>
Close and reopen the libguestfs handle. It is not necessary to use this
  normally, because the handle is closed properly when guestfish exits. However
  this is occasionally useful for testing.
<h2 class="Ss" title="Ss" id="setenv"><a class="selflink" href="#setenv">setenv</a></h2>
<pre>
  setenv VAR value
</pre>
<div class="Pp"></div>
Set the environment variable &quot;VAR&quot; to the string &quot;value&quot;.
<div class="Pp"></div>
To print the value of an environment variable use a shell command such as:
<div class="Pp"></div>
<pre>
 !echo $VAR
</pre>
<h2 class="Ss" title="Ss" id="sparse"><a class="selflink" href="#sparse">sparse</a></h2>
<pre>
 sparse filename size
</pre>
<div class="Pp"></div>
This creates an empty sparse file of the given size, and then adds so it can be
  further examined.
<div class="Pp"></div>
In all respects it works the same as the &quot;alloc&quot; command, except that
  the image file is allocated sparsely, which means that disk blocks are not
  assigned to the file until they are needed. Sparse disk files only use space
  when written to, but they are slower and there is a danger you could run out
  of real disk space during a write operation.
<div class="Pp"></div>
For more advanced image creation, see &quot;disk-create&quot;.
<div class="Pp"></div>
Size can be specified using standard suffixes, eg. &quot;1M&quot;.
<div class="Pp"></div>
See also the guestfish &quot;scratch&quot; command.
<h2 class="Ss" title="Ss" id="supported"><a class="selflink" href="#supported">supported</a></h2>
<pre>
 supported
</pre>
<div class="Pp"></div>
This command returns a list of the optional groups known to the daemon, and
  indicates which ones are supported by this build of the libguestfs appliance.
<div class="Pp"></div>
See also &quot;AVAILABILITY&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="time"><a class="selflink" href="#time">time</a></h2>
<pre>
 time command args...
</pre>
<div class="Pp"></div>
Run the command as usual, but print the elapsed time afterwards. This can be
  useful for benchmarking operations.
<h2 class="Ss" title="Ss" id="unsetenv"><a class="selflink" href="#unsetenv">unsetenv</a></h2>
<pre>
  unsetenv VAR
</pre>
<div class="Pp"></div>
Remove &quot;VAR&quot; from the environment.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<h2 class="Ss" title="Ss" id="acl-delete-def-file"><a class="selflink" href="#acl-delete-def-file">acl-delete-def-file</a></h2>
<pre>
 acl-delete-def-file dir
</pre>
<div class="Pp"></div>
This function deletes the default POSIX Access Control List (ACL) attached to
  directory &quot;dir&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;acl&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="acl-get-file"><a class="selflink" href="#acl-get-file">acl-get-file</a></h2>
<pre>
 acl-get-file path acltype
</pre>
<div class="Pp"></div>
This function returns the POSIX Access Control List (ACL) attached to
  &quot;path&quot;. The ACL is returned in &quot;long text form&quot; (see
  <i>acl</i>(5)).
<div class="Pp"></div>
The &quot;acltype&quot; parameter may be:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;access&quot;</dt>
  <dd class="It-tag">Return the ordinary (access) ACL for any file, directory or
      other filesystem object.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;default&quot;</dt>
  <dd class="It-tag">Return the default ACL. Normally this only makes sense if
      &quot;path&quot; is a directory.</dd>
</dl>
<div class="Pp"></div>
This command depends on the feature &quot;acl&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="acl-set-file"><a class="selflink" href="#acl-set-file">acl-set-file</a></h2>
<pre>
 acl-set-file path acltype acl
</pre>
<div class="Pp"></div>
This function sets the POSIX Access Control List (ACL) attached to
  &quot;path&quot;.
<div class="Pp"></div>
The &quot;acltype&quot; parameter may be:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;access&quot;</dt>
  <dd class="It-tag">Set the ordinary (access) ACL for any file, directory or
      other filesystem object.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;default&quot;</dt>
  <dd class="It-tag">Set the default ACL. Normally this only makes sense if
      &quot;path&quot; is a directory.</dd>
</dl>
<div class="Pp"></div>
The &quot;acl&quot; parameter is the new ACL in either &quot;long text
  form&quot; or &quot;short text form&quot; (see <i>acl</i>(5)). The new ACL
  completely replaces any previous ACL on the file. The ACL must contain the
  full Unix permissions (eg. &quot;u::rwx,g::rx,o::rx&quot;).
<div class="Pp"></div>
If you are specifying individual users or groups, then the mask field is also
  required (eg. &quot;m::rwx&quot;), followed by the &quot;u:
  <i>ID</i>:...&quot; and/or &quot;g: <i>ID</i>:...&quot; field(s). A full ACL
  string might therefore look like this:
<div class="Pp"></div>
<pre>
 u::rwx,g::rwx,o::rwx,m::rwx,u:500:rwx,g:500:rwx
 \ Unix permissions / \mask/ \      ACL        /
</pre>
<div class="Pp"></div>
You should use numeric UIDs and GIDs. To map usernames and groupnames to the
  correct numeric ID in the context of the guest, use the Augeas functions (see
  &quot;aug-init&quot;).
<div class="Pp"></div>
This command depends on the feature &quot;acl&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="add-cdrom"><a class="selflink" href="#add-cdrom">add-cdrom</a></h2>
<pre>
 add-cdrom filename
</pre>
<div class="Pp"></div>
This function adds a virtual CD-ROM disk image to the guest.
<div class="Pp"></div>
The image is added as read-only drive, so this function is equivalent of
  &quot;add-drive-ro&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;add-drive-ro&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="add-domain"><a class="selflink" href="#add-domain">add-domain</a></h2>
<h2 class="Ss" title="Ss" id="domain"><a class="selflink" href="#domain">domain</a></h2>
<pre>
 add-domain dom [libvirturi:..] [readonly:true|false] [iface:..] [live:true|false] [allowuuid:true|false] [readonlydisk:..] [cachemode:..] [discard:..] [copyonread:true|false]
</pre>
<div class="Pp"></div>
This function adds the disk(s) attached to the named libvirt domain
  &quot;dom&quot;. It works by connecting to libvirt, requesting the domain and
  domain XML from libvirt, parsing it for disks, and calling
  &quot;add-drive-opts&quot; on each one.
<div class="Pp"></div>
The number of disks added is returned. This operation is atomic: if an error is
  returned, then no disks are added.
<div class="Pp"></div>
This function does some minimal checks to make sure the libvirt domain is not
  running (unless &quot;readonly&quot; is true). In a future version we will try
  to acquire the libvirt lock on each disk.
<div class="Pp"></div>
Disks must be accessible locally. This often means that adding disks from a
  remote libvirt connection (see http://libvirt.org/remote.html) will fail
  unless those disks are accessible via the same device path locally too.
<div class="Pp"></div>
The optional &quot;libvirturi&quot; parameter sets the libvirt URI (see
  http://libvirt.org/uri.html). If this is not set then we connect to the
  default libvirt URI (or one set through an environment variable, see the
  libvirt documentation for full details).
<div class="Pp"></div>
The optional &quot;live&quot; flag controls whether this call will try to
  connect to a running virtual machine &quot;guestfsd&quot; process if it sees a
  suitable &lt;channel&gt; element in the libvirt XML definition. The default
  (if the flag is omitted) is never to try. See &quot;ATTACHING TO RUNNING
  DAEMONS&quot; in <i>guestfs</i>(3) for more information.
<div class="Pp"></div>
If the &quot;allowuuid&quot; flag is true (default is false) then a UUID
  <i>may</i> be passed instead of the domain name. The &quot;dom&quot; string is
  treated as a UUID first and looked up, and if that lookup fails then we treat
  &quot;dom&quot; as a name as usual.
<div class="Pp"></div>
The optional &quot;readonlydisk&quot; parameter controls what we do for disks
  which are marked &lt;readonly/&gt; in the libvirt XML. Possible values are:
<dl class="Bl-tag">
  <dt class="It-tag">readonlydisk = &quot;error&quot;</dt>
  <dd class="It-tag">If &quot;readonly&quot; is false:
    <div style="height: 1.00em;">&#x00A0;</div>
    The whole call is aborted with an error if any disk with the
      &lt;readonly/&gt; flag is found.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;readonly&quot; is true:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are added read-only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">readonlydisk = &quot;read&quot;</dt>
  <dd class="It-tag">If &quot;readonly&quot; is false:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are added read-only. Other disks are
      added read/write.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;readonly&quot; is true:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are added read-only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">readonlydisk = &quot;write&quot; (default)</dt>
  <dd class="It-tag">If &quot;readonly&quot; is false:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are added read/write.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;readonly&quot; is true:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are added read-only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">readonlydisk = &quot;ignore&quot;</dt>
  <dd class="It-tag">If &quot;readonly&quot; is true or false:
    <div style="height: 1.00em;">&#x00A0;</div>
    Disks with the &lt;readonly/&gt; flag are skipped.</dd>
</dl>
<div class="Pp"></div>
The other optional parameters are passed directly through to
  &quot;add-drive-opts&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="add-drive"><a class="selflink" href="#add-drive">add-drive</a></h2>
<h2 class="Ss" title="Ss" id="add"><a class="selflink" href="#add">add</a></h2>
<h2 class="Ss" title="Ss" id="add-drive-opts"><a class="selflink" href="#add-drive-opts">add-drive-opts</a></h2>
<pre>
 add-drive filename [readonly:true|false] [format:..] [iface:..] [name:..] [label:..] [protocol:..] [server:..] [username:..] [secret:..] [cachemode:..] [discard:..] [copyonread:true|false]
</pre>
<div class="Pp"></div>
This function adds a disk image called <i>filename</i> to the handle.
  <i>filename</i> may be a regular host file or a host device.
<div class="Pp"></div>
When this function is called before &quot;launch&quot; (the usual case) then the
  first time you call this function, the disk appears in the API as
  <i>/dev/sda</i>, the second time as <i>/dev/sdb</i>, and so on.
<div class="Pp"></div>
In libguestfs &#x2265; 1.20 you can also call this function after launch (with
  some restrictions). This is called &quot;hotplugging&quot;. When hotplugging,
  you must specify a &quot;label&quot; so that the new disk gets a predictable
  name. For more information see &quot;HOTPLUGGING&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
You don't necessarily need to be root when using libguestfs. However you
  obviously do need sufficient permissions to access the filename for whatever
  operations you want to perform (ie. read access if you just want to read the
  image or write access if you want to modify the image).
<div class="Pp"></div>
This call checks that <i>filename</i> exists.
<div class="Pp"></div>
<i>filename</i> may be the special string &quot;/dev/null&quot;. See &quot;NULL
  DISKS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
The optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;readonly&quot;</dt>
  <dd class="It-tag">If true then the image is treated as read-only. Writes are
      still allowed, but they are stored in a temporary snapshot overlay which
      is discarded at the end. The disk that you add is not modified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;format&quot;</dt>
  <dd class="It-tag">This forces the image format. If you omit this (or use
      &quot;add-drive&quot; or &quot;add-drive-ro&quot;) then the format is
      automatically detected. Possible formats include &quot;raw&quot; and
      &quot;qcow2&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    Automatic detection of the format opens you up to a potential security hole
      when dealing with untrusted raw-format images. See CVE-2010-3851 and
      RHBZ#642934. Specifying the format closes this security hole.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;iface&quot;</dt>
  <dd class="It-tag">This rarely-used option lets you emulate the behaviour of
      the deprecated &quot;add-drive-with-if&quot; call (q.v.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;name&quot;</dt>
  <dd class="It-tag">The name the drive had in the original guest, e.g.
      <i>/dev/sdb</i>. This is used as a hint to the guest inspection process if
      it is available.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;label&quot;</dt>
  <dd class="It-tag">Give the disk a label. The label should be a unique, short
      string using <i>only</i> ASCII characters &quot;[a-zA-Z]&quot;. As well as
      its usual name in the API (such as <i>/dev/sda</i>), the drive will also
      be named <i>/dev/disk/guestfs/</i><i>label</i><i></i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    See &quot;DISK LABELS&quot; in <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;protocol&quot;</dt>
  <dd class="It-tag">The optional protocol argument can be used to select an
      alternate source protocol.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also: &quot;REMOTE STORAGE&quot; in <i>guestfs</i>(3).</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&quot;protocol = &quot;file&quot;&quot;</dt>
  <dd class="It-tag"><i>filename</i> is interpreted as a local file or device.
      This is the default if the optional protocol parameter is omitted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;protocol = &quot;nbd&quot;&quot;</dt>
  <dd class="It-tag">Connect to the Network Block Device server. The
      &quot;server&quot; parameter must also be supplied - see below.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also: &quot;NETWORK BLOCK DEVICE&quot; in <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;protocol = &quot;rbd&quot;&quot;</dt>
  <dd class="It-tag">Connect to the Ceph (librbd/RBD) server. The
      &quot;server&quot; parameter must also be supplied - see below. The
      &quot;username&quot; parameter may be supplied. See below. The
      &quot;secret&quot; parameter may be supplied. See below.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also: &quot;CEPH&quot; in <i>guestfs</i>(3).</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;server&quot;</dt>
  <dd class="It-tag">For protocols which require access to a remote server, this
      is a list of server(s).
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 Protocol       Number of servers required
 --------       --------------------------
 file           List must be empty or param not used at all
 nbd            Exactly one
 rbd            Zero or more
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Each list element is a string specifying a server. The string must be in one
      of the following formats:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 hostname
 hostname:port
 tcp:hostname
 tcp:hostname:port
 unix:/path/to/socket
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    If the port number is omitted, then the standard port number for the
      protocol is used (see <i>/etc/services</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;username&quot;</dt>
  <dd class="It-tag">For the &quot;rbd&quot; protocol, this specifies the remote
      username.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not given, then no authentication is attempted for ceph. But note this
      sometimes may give unexpected results, for example if using the libvirt
      backend and if the libvirt backend is configured to start the qemu
      appliance as a special user such as &quot;qemu.qemu&quot;. If in doubt,
      specify the remote username you want.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;secret&quot;</dt>
  <dd class="It-tag">For the &quot;rbd&quot; protocol only, this specifies the
      'secret' to use when connecting to the remote device. It must be base64
      encoded.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not given, then a secret matching the given username will be looked up in
      the default keychain locations, or if no username is given, then no
      authentication will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;cachemode&quot;</dt>
  <dd class="It-tag">Choose whether or not libguestfs will obey sync operations
      (safe but slow) or not (unsafe but fast). The possible values for this
      string are:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&quot;cachemode = &quot;writeback&quot;&quot;</dt>
  <dd class="It-tag">This is the default.
    <div style="height: 1.00em;">&#x00A0;</div>
    Write operations in the API do not return until a <i>write</i>(2) call has
      completed in the host [but note this does not imply that anything gets
      written to disk].
    <div style="height: 1.00em;">&#x00A0;</div>
    Sync operations in the API, including implicit syncs caused by filesystem
      journalling, will not return until an <i>fdatasync</i>(2) call has
      completed in the host, indicating that data has been committed to
    disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;cachemode = &quot;unsafe&quot;&quot;</dt>
  <dd class="It-tag">In this mode, there are no guarantees. Libguestfs may cache
      anything and ignore sync requests. This is suitable only for scratch or
      temporary disks.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;discard&quot;</dt>
  <dd class="It-tag">Enable or disable discard (a.k.a. trim or unmap) support on
      this drive. If enabled, operations such as &quot;fstrim&quot; will be able
      to discard / make thin / punch holes in the underlying host file or
      device.
    <div style="height: 1.00em;">&#x00A0;</div>
    Possible discard settings are:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&quot;discard = &quot;disable&quot;&quot;</dt>
  <dd class="It-tag">Disable discard support. This is the default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;discard = &quot;enable&quot;&quot;</dt>
  <dd class="It-tag">Enable discard support. Fail if discard is not
    possible.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;discard = &quot;besteffort&quot;&quot;</dt>
  <dd class="It-tag">Enable discard support if possible, but don't fail if it is
      not supported.
    <div style="height: 1.00em;">&#x00A0;</div>
    Since not all backends and not all underlying systems support discard, this
      is a good choice if you want to use discard if possible, but don't mind if
      it doesn't work.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;copyonread&quot;</dt>
  <dd class="It-tag">The boolean parameter &quot;copyonread&quot; enables
      copy-on-read support. This only affects disk formats which have backing
      files, and causes reads to be stored in the overlay layer, speeding up
      multiple reads of the same area of disk.
    <div style="height: 1.00em;">&#x00A0;</div>
    The default is false.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="add-drive-ro"><a class="selflink" href="#add-drive-ro">add-drive-ro</a></h2>
<h2 class="Ss" title="Ss" id="add-ro"><a class="selflink" href="#add-ro">add-ro</a></h2>
<pre>
 add-drive-ro filename
</pre>
<div class="Pp"></div>
This function is the equivalent of calling &quot;add-drive-opts&quot; with the
  optional parameter &quot;GUESTFS_ADD_DRIVE_OPTS_READONLY&quot; set to 1, so
  the disk is added read-only, with the format being detected automatically.
<h2 class="Ss" title="Ss" id="add-drive-ro-with-if"><a class="selflink" href="#add-drive-ro-with-if">add-drive-ro-with-if</a></h2>
<pre>
 add-drive-ro-with-if filename iface
</pre>
<div class="Pp"></div>
This is the same as &quot;add-drive-ro&quot; but it allows you to specify the
  QEMU interface emulation to use at run time.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;add-drive&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="add-drive-scratch"><a class="selflink" href="#add-drive-scratch">add-drive-scratch</a></h2>
<h2 class="Ss" title="Ss" id="scratch"><a class="selflink" href="#scratch">scratch</a></h2>
<pre>
 add-drive-scratch size [name:..] [label:..]
</pre>
<div class="Pp"></div>
This command adds a temporary scratch drive to the handle. The &quot;size&quot;
  parameter is the virtual size (in bytes). The scratch drive is blank initially
  (all reads return zeroes until you start writing to it). The drive is deleted
  when the handle is closed.
<div class="Pp"></div>
The optional arguments &quot;name&quot; and &quot;label&quot; are passed through
  to &quot;add-drive&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="add-drive-with-if"><a class="selflink" href="#add-drive-with-if">add-drive-with-if</a></h2>
<pre>
 add-drive-with-if filename iface
</pre>
<div class="Pp"></div>
This is the same as &quot;add-drive&quot; but it allows you to specify the QEMU
  interface emulation to use at run time.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;add-drive&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="aug-clear"><a class="selflink" href="#aug-clear">aug-clear</a></h2>
<pre>
 aug-clear augpath
</pre>
<div class="Pp"></div>
Set the value associated with &quot;path&quot; to &quot;NULL&quot;. This is the
  same as the <i>augtool</i>(1) &quot;clear&quot; command.
<h2 class="Ss" title="Ss" id="aug-close"><a class="selflink" href="#aug-close">aug-close</a></h2>
<pre>
 aug-close
</pre>
<div class="Pp"></div>
Close the current Augeas handle and free up any resources used by it. After
  calling this, you have to call &quot;aug-init&quot; again before you can use
  any other Augeas functions.
<h2 class="Ss" title="Ss" id="aug-defnode"><a class="selflink" href="#aug-defnode">aug-defnode</a></h2>
<pre>
 aug-defnode name expr val
</pre>
<div class="Pp"></div>
Defines a variable &quot;name&quot; whose value is the result of evaluating
  &quot;expr&quot;.
<div class="Pp"></div>
If &quot;expr&quot; evaluates to an empty nodeset, a node is created, equivalent
  to calling &quot;aug-set&quot; &quot;expr&quot;, &quot;value&quot;.
  &quot;name&quot; will be the nodeset containing that single node.
<div class="Pp"></div>
On success this returns a pair containing the number of nodes in the nodeset,
  and a boolean flag if a node was created.
<h2 class="Ss" title="Ss" id="aug-defvar"><a class="selflink" href="#aug-defvar">aug-defvar</a></h2>
<pre>
 aug-defvar name expr
</pre>
<div class="Pp"></div>
Defines an Augeas variable &quot;name&quot; whose value is the result of
  evaluating &quot;expr&quot;. If &quot;expr&quot; is NULL, then
  &quot;name&quot; is undefined.
<div class="Pp"></div>
On success this returns the number of nodes in &quot;expr&quot;, or 0 if
  &quot;expr&quot; evaluates to something which is not a nodeset.
<h2 class="Ss" title="Ss" id="aug-get"><a class="selflink" href="#aug-get">aug-get</a></h2>
<pre>
 aug-get augpath
</pre>
<div class="Pp"></div>
Look up the value associated with &quot;path&quot;. If &quot;path&quot; matches
  exactly one node, the &quot;value&quot; is returned.
<h2 class="Ss" title="Ss" id="aug-init"><a class="selflink" href="#aug-init">aug-init</a></h2>
<pre>
 aug-init root flags
</pre>
<div class="Pp"></div>
Create a new Augeas handle for editing configuration files. If there was any
  previous Augeas handle associated with this guestfs session, then it is
  closed.
<div class="Pp"></div>
You must call this before using any other &quot;aug-*&quot; commands.
<div class="Pp"></div>
&quot;root&quot; is the filesystem root. &quot;root&quot; must not be NULL, use
  <i>/</i> instead.
<div class="Pp"></div>
The flags are the same as the flags defined in &lt;augeas.h&gt;, the logical
  <i>or</i> of the following integers:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_SAVE_BACKUP&quot; = 1</dt>
  <dd class="It-tag">Keep the original file with a &quot;.augsave&quot;
      extension.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_SAVE_NEWFILE&quot; = 2</dt>
  <dd class="It-tag">Save changes into a file with extension
      &quot;.augnew&quot;, and do not overwrite original. Overrides
      &quot;AUG_SAVE_BACKUP&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_TYPE_CHECK&quot; = 4</dt>
  <dd class="It-tag">Typecheck lenses.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option is only useful when debugging Augeas lenses. Use of this option
      may require additional memory for the libguestfs appliance. You may need
      to set the &quot;LIBGUESTFS_MEMSIZE&quot; environment variable or call
      &quot;set-memsize&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_NO_STDINC&quot; = 8</dt>
  <dd class="It-tag">Do not use standard load path for modules.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_SAVE_NOOP&quot; = 16</dt>
  <dd class="It-tag">Make save a no-op, just record what would have been
      changed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;AUG_NO_LOAD&quot; = 32</dt>
  <dd class="It-tag">Do not load the tree in &quot;aug-init&quot;.</dd>
</dl>
<div class="Pp"></div>
To close the handle, you can call &quot;aug-close&quot;.
<div class="Pp"></div>
To find out more about Augeas, see http://augeas.net/.
<h2 class="Ss" title="Ss" id="aug-insert"><a class="selflink" href="#aug-insert">aug-insert</a></h2>
<pre>
 aug-insert augpath label true|false
</pre>
<div class="Pp"></div>
Create a new sibling &quot;label&quot; for &quot;path&quot;, inserting it into
  the tree before or after &quot;path&quot; (depending on the boolean flag
  &quot;before&quot;).
<div class="Pp"></div>
&quot;path&quot; must match exactly one existing node in the tree, and
  &quot;label&quot; must be a label, ie. not contain <i>/</i>, &quot;*&quot; or
  end with a bracketed index &quot;[N]&quot;.
<h2 class="Ss" title="Ss" id="aug-label"><a class="selflink" href="#aug-label">aug-label</a></h2>
<pre>
 aug-label augpath
</pre>
<div class="Pp"></div>
The label (name of the last element) of the Augeas path expression
  &quot;augpath&quot; is returned. &quot;augpath&quot; must match exactly one
  node, else this function returns an error.
<h2 class="Ss" title="Ss" id="aug-load"><a class="selflink" href="#aug-load">aug-load</a></h2>
<pre>
 aug-load
</pre>
<div class="Pp"></div>
Load files into the tree.
<div class="Pp"></div>
See &quot;aug_load&quot; in the Augeas documentation for the full gory details.
<h2 class="Ss" title="Ss" id="aug-ls"><a class="selflink" href="#aug-ls">aug-ls</a></h2>
<pre>
 aug-ls augpath
</pre>
<div class="Pp"></div>
This is just a shortcut for listing &quot;aug-match&quot; &quot;path/*&quot; and
  sorting the resulting nodes into alphabetical order.
<h2 class="Ss" title="Ss" id="aug-match"><a class="selflink" href="#aug-match">aug-match</a></h2>
<pre>
 aug-match augpath
</pre>
<div class="Pp"></div>
Returns a list of paths which match the path expression &quot;path&quot;. The
  returned paths are sufficiently qualified so that they match exactly one node
  in the current tree.
<h2 class="Ss" title="Ss" id="aug-mv"><a class="selflink" href="#aug-mv">aug-mv</a></h2>
<pre>
 aug-mv src dest
</pre>
<div class="Pp"></div>
Move the node &quot;src&quot; to &quot;dest&quot;. &quot;src&quot; must match
  exactly one node. &quot;dest&quot; is overwritten if it exists.
<h2 class="Ss" title="Ss" id="aug-rm"><a class="selflink" href="#aug-rm">aug-rm</a></h2>
<pre>
 aug-rm augpath
</pre>
<div class="Pp"></div>
Remove &quot;path&quot; and all of its children.
<div class="Pp"></div>
On success this returns the number of entries which were removed.
<h2 class="Ss" title="Ss" id="aug-save"><a class="selflink" href="#aug-save">aug-save</a></h2>
<pre>
 aug-save
</pre>
<div class="Pp"></div>
This writes all pending changes to disk.
<div class="Pp"></div>
The flags which were passed to &quot;aug-init&quot; affect exactly how files are
  saved.
<h2 class="Ss" title="Ss" id="aug-set"><a class="selflink" href="#aug-set">aug-set</a></h2>
<pre>
 aug-set augpath val
</pre>
<div class="Pp"></div>
Set the value associated with &quot;path&quot; to &quot;val&quot;.
<div class="Pp"></div>
In the Augeas API, it is possible to clear a node by setting the value to NULL.
  Due to an oversight in the libguestfs API you cannot do that with this call.
  Instead you must use the &quot;aug-clear&quot; call.
<h2 class="Ss" title="Ss" id="aug-setm"><a class="selflink" href="#aug-setm">aug-setm</a></h2>
<pre>
 aug-setm base sub val
</pre>
<div class="Pp"></div>
Change multiple Augeas nodes in a single operation. &quot;base&quot; is an
  expression matching multiple nodes. &quot;sub&quot; is a path expression
  relative to &quot;base&quot;. All nodes matching &quot;base&quot; are found,
  and then for each node, &quot;sub&quot; is changed to &quot;val&quot;.
  &quot;sub&quot; may also be &quot;NULL&quot; in which case the
  &quot;base&quot; nodes are modified.
<div class="Pp"></div>
This returns the number of nodes modified.
<h2 class="Ss" title="Ss" id="available"><a class="selflink" href="#available">available</a></h2>
<pre>
 available 'groups ...'
</pre>
<div class="Pp"></div>
This command is used to check the availability of some groups of functionality
  in the appliance, which not all builds of the libguestfs appliance will be
  able to provide.
<div class="Pp"></div>
The libguestfs groups, and the functions that those groups correspond to, are
  listed in &quot;AVAILABILITY&quot; in <i>guestfs</i>(3). You can also fetch
  this list at runtime by calling &quot;available-all-groups&quot;.
<div class="Pp"></div>
The argument &quot;groups&quot; is a list of group names, eg:
  &quot;[&quot;inotify&quot;, &quot;augeas&quot;]&quot; would check for the
  availability of the Linux inotify functions and Augeas (configuration file
  editing) functions.
<div class="Pp"></div>
The command returns no error if <i>all</i> requested groups are available.
<div class="Pp"></div>
It fails with an error if one or more of the requested groups is unavailable in
  the appliance.
<div class="Pp"></div>
If an unknown group name is included in the list of groups then an error is
  always returned.
<div class="Pp"></div>
<i>Notes:</i>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&quot;feature-available&quot; is the same as this call, but
      with a slightly simpler to use API: that call returns a boolean true/false
      instead of throwing an error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">You must call &quot;launch&quot; before calling this
      function.
    <div style="height: 1.00em;">&#x00A0;</div>
    The reason is because we don't know what groups are supported by the
      appliance/daemon until it is running and can be queried.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">If a group of functions is available, this does not
      necessarily mean that they will work. You still have to check for errors
      when calling individual API functions even if they are available.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">It is usually the job of distro packagers to build complete
      functionality into the libguestfs appliance. Upstream libguestfs, if built
      from source with all requirements satisfied, will support everything.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">This call was added in version 1.0.80. In previous versions
      of libguestfs all you could do would be to speculatively execute a command
      to find out if the daemon implemented it. See also
    &quot;version&quot;.</dd>
</dl>
<div class="Pp"></div>
See also &quot;filesystem-available&quot;.
<h2 class="Ss" title="Ss" id="available-all-groups"><a class="selflink" href="#available-all-groups">available-all-groups</a></h2>
<pre>
 available-all-groups
</pre>
<div class="Pp"></div>
This command returns a list of all optional groups that this daemon knows about.
  Note this returns both supported and unsupported groups. To find out which
  ones the daemon can actually support you have to call &quot;available&quot; /
  &quot;feature-available&quot; on each member of the returned list.
<div class="Pp"></div>
See also &quot;available&quot;, &quot;feature-available&quot; and
  &quot;AVAILABILITY&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="base64-in"><a class="selflink" href="#base64-in">base64-in</a></h2>
<pre>
 base64-in (base64file|-) filename
</pre>
<div class="Pp"></div>
This command uploads base64-encoded data from &quot;base64file&quot; to
  <i>filename</i>.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="base64-out"><a class="selflink" href="#base64-out">base64-out</a></h2>
<pre>
 base64-out filename (base64file|-)
</pre>
<div class="Pp"></div>
This command downloads the contents of <i>filename</i>, writing it out to local
  file &quot;base64file&quot; encoded as base64.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="blkdiscard"><a class="selflink" href="#blkdiscard">blkdiscard</a></h2>
<pre>
 blkdiscard device
</pre>
<div class="Pp"></div>
This discards all blocks on the block device &quot;device&quot;, giving the free
  space back to the host.
<div class="Pp"></div>
This operation requires support in libguestfs, the host filesystem, qemu and the
  host kernel. If this support isn't present it may give an error or even appear
  to run but do nothing. You must also set the &quot;discard&quot; attribute on
  the underlying drive (see &quot;add-drive-opts&quot;).
<div class="Pp"></div>
This command depends on the feature &quot;blkdiscard&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="blkdiscardzeroes"><a class="selflink" href="#blkdiscardzeroes">blkdiscardzeroes</a></h2>
<pre>
 blkdiscardzeroes device
</pre>
<div class="Pp"></div>
This call returns true if blocks on &quot;device&quot; that have been discarded
  by a call to &quot;blkdiscard&quot; are returned as blocks of zero bytes when
  read the next time.
<div class="Pp"></div>
If it returns false, then it may be that discarded blocks are read as stale or
  random data.
<div class="Pp"></div>
This command depends on the feature &quot;blkdiscardzeroes&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="blkid"><a class="selflink" href="#blkid">blkid</a></h2>
<pre>
 blkid device
</pre>
<div class="Pp"></div>
This command returns block device attributes for &quot;device&quot;. The
  following fields are usually present in the returned hash. Other fields may
  also be present.
<dl class="Bl-tag">
  <dt class="It-tag">&quot;UUID&quot;</dt>
  <dd class="It-tag">The uuid of this device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;LABEL&quot;</dt>
  <dd class="It-tag">The label of this device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;VERSION&quot;</dt>
  <dd class="It-tag">The version of blkid command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;TYPE&quot;</dt>
  <dd class="It-tag">The filesystem type or RAID of this device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;USAGE&quot;</dt>
  <dd class="It-tag">The usage of this device, for example
      &quot;filesystem&quot; or &quot;raid&quot;.</dd>
</dl>
<h2 class="Ss" title="Ss" id="blockdev-flushbufs"><a class="selflink" href="#blockdev-flushbufs">blockdev-flushbufs</a></h2>
<pre>
 blockdev-flushbufs device
</pre>
<div class="Pp"></div>
This tells the kernel to flush internal buffers associated with
  &quot;device&quot;.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-getbsz"><a class="selflink" href="#blockdev-getbsz">blockdev-getbsz</a></h2>
<pre>
 blockdev-getbsz device
</pre>
<div class="Pp"></div>
This returns the block size of a device.
<div class="Pp"></div>
Note: this is different from both <i>size in blocks</i> and <i>filesystem block
  size</i>. Also this setting is not really used by anything. You should
  probably not use it for anything. Filesystems have their own idea about what
  block size to choose.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-getro"><a class="selflink" href="#blockdev-getro">blockdev-getro</a></h2>
<pre>
 blockdev-getro device
</pre>
<div class="Pp"></div>
Returns a boolean indicating if the block device is read-only (true if
  read-only, false if not).
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-getsize64"><a class="selflink" href="#blockdev-getsize64">blockdev-getsize64</a></h2>
<pre>
 blockdev-getsize64 device
</pre>
<div class="Pp"></div>
This returns the size of the device in bytes.
<div class="Pp"></div>
See also &quot;blockdev-getsz&quot;.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-getss"><a class="selflink" href="#blockdev-getss">blockdev-getss</a></h2>
<pre>
 blockdev-getss device
</pre>
<div class="Pp"></div>
This returns the size of sectors on a block device. Usually 512, but can be
  larger for modern devices.
<div class="Pp"></div>
(Note, this is not the size in sectors, use &quot;blockdev-getsz&quot; for
  that).
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-getsz"><a class="selflink" href="#blockdev-getsz">blockdev-getsz</a></h2>
<pre>
 blockdev-getsz device
</pre>
<div class="Pp"></div>
This returns the size of the device in units of 512-byte sectors (even if the
  sectorsize isn't 512 bytes ... weird).
<div class="Pp"></div>
See also &quot;blockdev-getss&quot; for the real sector size of the device, and
  &quot;blockdev-getsize64&quot; for the more useful <i>size in bytes</i>.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-rereadpt"><a class="selflink" href="#blockdev-rereadpt">blockdev-rereadpt</a></h2>
<pre>
 blockdev-rereadpt device
</pre>
<div class="Pp"></div>
Reread the partition table on &quot;device&quot;.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-setbsz"><a class="selflink" href="#blockdev-setbsz">blockdev-setbsz</a></h2>
<pre>
 blockdev-setbsz device blocksize
</pre>
<div class="Pp"></div>
This call does nothing and has never done anything because of a bug in blockdev.
  <b>Do not use it.</b>
<div class="Pp"></div>
If you need to set the filesystem block size, use the &quot;blocksize&quot;
  option of &quot;mkfs&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mkfs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="blockdev-setra"><a class="selflink" href="#blockdev-setra">blockdev-setra</a></h2>
<pre>
 blockdev-setra device sectors
</pre>
<div class="Pp"></div>
Set readahead (in 512-byte sectors) for the device.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-setro"><a class="selflink" href="#blockdev-setro">blockdev-setro</a></h2>
<pre>
 blockdev-setro device
</pre>
<div class="Pp"></div>
Sets the block device named &quot;device&quot; to read-only.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="blockdev-setrw"><a class="selflink" href="#blockdev-setrw">blockdev-setrw</a></h2>
<pre>
 blockdev-setrw device
</pre>
<div class="Pp"></div>
Sets the block device named &quot;device&quot; to read-write.
<div class="Pp"></div>
This uses the <i>blockdev</i>(8) command.
<h2 class="Ss" title="Ss" id="btrfs-balance-cancel"><a class="selflink" href="#btrfs-balance-cancel">btrfs-balance-cancel</a></h2>
<pre>
 btrfs-balance-cancel path
</pre>
<div class="Pp"></div>
Cancel a running balance on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-balance-pause"><a class="selflink" href="#btrfs-balance-pause">btrfs-balance-pause</a></h2>
<pre>
 btrfs-balance-pause path
</pre>
<div class="Pp"></div>
Pause a running balance on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-balance-resume"><a class="selflink" href="#btrfs-balance-resume">btrfs-balance-resume</a></h2>
<pre>
 btrfs-balance-resume path
</pre>
<div class="Pp"></div>
Resume a paused balance on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-balance-status"><a class="selflink" href="#btrfs-balance-status">btrfs-balance-status</a></h2>
<pre>
 btrfs-balance-status path
</pre>
<div class="Pp"></div>
Show the status of a running or paused balance on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-device-add"><a class="selflink" href="#btrfs-device-add">btrfs-device-add</a></h2>
<pre>
 btrfs-device-add 'devices ...' fs
</pre>
<div class="Pp"></div>
Add the list of device(s) in &quot;devices&quot; to the btrfs filesystem mounted
  at &quot;fs&quot;. If &quot;devices&quot; is an empty list, this does nothing.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-device-delete"><a class="selflink" href="#btrfs-device-delete">btrfs-device-delete</a></h2>
<pre>
 btrfs-device-delete 'devices ...' fs
</pre>
<div class="Pp"></div>
Remove the &quot;devices&quot; from the btrfs filesystem mounted at
  &quot;fs&quot;. If &quot;devices&quot; is an empty list, this does nothing.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-filesystem-balance"><a class="selflink" href="#btrfs-filesystem-balance">btrfs-filesystem-balance</a></h2>
<h2 class="Ss" title="Ss" id="btrfs-balance"><a class="selflink" href="#btrfs-balance">btrfs-balance</a></h2>
<pre>
 btrfs-filesystem-balance fs
</pre>
<div class="Pp"></div>
Balance the chunks in the btrfs filesystem mounted at &quot;fs&quot; across the
  underlying devices.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-filesystem-defragment"><a class="selflink" href="#btrfs-filesystem-defragment">btrfs-filesystem-defragment</a></h2>
<pre>
 btrfs-filesystem-defragment path [flush:true|false] [compress:..]
</pre>
<div class="Pp"></div>
Defragment a file or directory on a btrfs filesystem. compress is one of zlib or
  lzo.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-filesystem-resize"><a class="selflink" href="#btrfs-filesystem-resize">btrfs-filesystem-resize</a></h2>
<pre>
 btrfs-filesystem-resize mountpoint [size:N]
</pre>
<div class="Pp"></div>
This command resizes a btrfs filesystem.
<div class="Pp"></div>
Note that unlike other resize calls, the filesystem has to be mounted and the
  parameter is the mountpoint not the device (this is a requirement of btrfs
  itself).
<div class="Pp"></div>
The optional parameters are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;size&quot;</dt>
  <dd class="It-tag">The new size (in bytes) of the filesystem. If omitted, the
      filesystem is resized to the maximum size.</dd>
</dl>
<div class="Pp"></div>
See also <i>btrfs</i>(8).
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-filesystem-sync"><a class="selflink" href="#btrfs-filesystem-sync">btrfs-filesystem-sync</a></h2>
<pre>
 btrfs-filesystem-sync fs
</pre>
<div class="Pp"></div>
Force sync on the btrfs filesystem mounted at &quot;fs&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-fsck"><a class="selflink" href="#btrfs-fsck">btrfs-fsck</a></h2>
<pre>
 btrfs-fsck device [superblock:N] [repair:true|false]
</pre>
<div class="Pp"></div>
Used to check a btrfs filesystem, &quot;device&quot; is the device file where
  the filesystem is stored.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-image"><a class="selflink" href="#btrfs-image">btrfs-image</a></h2>
<pre>
 btrfs-image 'source ...' image [compresslevel:N]
</pre>
<div class="Pp"></div>
This is used to create an image of a btrfs filesystem. All data will be zeroed,
  but metadata and the like is preserved.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-assign"><a class="selflink" href="#btrfs-qgroup-assign">btrfs-qgroup-assign</a></h2>
<pre>
 btrfs-qgroup-assign src dst path
</pre>
<div class="Pp"></div>
Add qgroup &quot;src&quot; to parent qgroup &quot;dst&quot;. This command can
  group several qgroups into a parent qgroup to share common limit.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-create"><a class="selflink" href="#btrfs-qgroup-create">btrfs-qgroup-create</a></h2>
<pre>
 btrfs-qgroup-create qgroupid subvolume
</pre>
<div class="Pp"></div>
Create a quota group (qgroup) for subvolume at &quot;subvolume&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-destroy"><a class="selflink" href="#btrfs-qgroup-destroy">btrfs-qgroup-destroy</a></h2>
<pre>
 btrfs-qgroup-destroy qgroupid subvolume
</pre>
<div class="Pp"></div>
Destroy a quota group.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-limit"><a class="selflink" href="#btrfs-qgroup-limit">btrfs-qgroup-limit</a></h2>
<pre>
 btrfs-qgroup-limit subvolume size
</pre>
<div class="Pp"></div>
Limit the size of a subvolume which's path is &quot;subvolume&quot;.
  &quot;size&quot; can have suffix of G, M, or K.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-remove"><a class="selflink" href="#btrfs-qgroup-remove">btrfs-qgroup-remove</a></h2>
<pre>
 btrfs-qgroup-remove src dst path
</pre>
<div class="Pp"></div>
Remove qgroup &quot;src&quot; from the parent qgroup &quot;dst&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-qgroup-show"><a class="selflink" href="#btrfs-qgroup-show">btrfs-qgroup-show</a></h2>
<pre>
 btrfs-qgroup-show path
</pre>
<div class="Pp"></div>
Show all subvolume quota groups in a btrfs filesystem, including their usages.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-quota-enable"><a class="selflink" href="#btrfs-quota-enable">btrfs-quota-enable</a></h2>
<pre>
 btrfs-quota-enable fs true|false
</pre>
<div class="Pp"></div>
Enable or disable subvolume quota support for filesystem which contains
  &quot;path&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-quota-rescan"><a class="selflink" href="#btrfs-quota-rescan">btrfs-quota-rescan</a></h2>
<pre>
 btrfs-quota-rescan fs
</pre>
<div class="Pp"></div>
Trash all qgroup numbers and scan the metadata again with the current config.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-replace"><a class="selflink" href="#btrfs-replace">btrfs-replace</a></h2>
<pre>
 btrfs-replace srcdev targetdev mntpoint
</pre>
<div class="Pp"></div>
Replace device of a btrfs filesystem. On a live filesystem, duplicate the data
  to the target device which is currently stored on the source device. After
  completion of the operation, the source device is wiped out and removed from
  the filesystem.
<div class="Pp"></div>
The &quot;targetdev&quot; needs to be same size or larger than the
  &quot;srcdev&quot;. Devices which are currently mounted are never allowed to
  be used as the &quot;targetdev&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-rescue-chunk-recover"><a class="selflink" href="#btrfs-rescue-chunk-recover">btrfs-rescue-chunk-recover</a></h2>
<pre>
 btrfs-rescue-chunk-recover device
</pre>
<div class="Pp"></div>
Recover the chunk tree of btrfs filesystem by scanning the devices one by one.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-rescue-super-recover"><a class="selflink" href="#btrfs-rescue-super-recover">btrfs-rescue-super-recover</a></h2>
<pre>
 btrfs-rescue-super-recover device
</pre>
<div class="Pp"></div>
Recover bad superblocks from good copies.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-scrub-cancel"><a class="selflink" href="#btrfs-scrub-cancel">btrfs-scrub-cancel</a></h2>
<pre>
 btrfs-scrub-cancel path
</pre>
<div class="Pp"></div>
Cancel a running scrub on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-scrub-resume"><a class="selflink" href="#btrfs-scrub-resume">btrfs-scrub-resume</a></h2>
<pre>
 btrfs-scrub-resume path
</pre>
<div class="Pp"></div>
Resume a previously canceled or interrupted scrub on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-scrub-start"><a class="selflink" href="#btrfs-scrub-start">btrfs-scrub-start</a></h2>
<pre>
 btrfs-scrub-start path
</pre>
<div class="Pp"></div>
Reads all the data and metadata on the filesystem, and uses checksums and the
  duplicate copies from RAID storage to identify and repair any corrupt data.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-scrub-status"><a class="selflink" href="#btrfs-scrub-status">btrfs-scrub-status</a></h2>
<pre>
 btrfs-scrub-status path
</pre>
<div class="Pp"></div>
Show status of running or finished scrub on a btrfs filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-set-seeding"><a class="selflink" href="#btrfs-set-seeding">btrfs-set-seeding</a></h2>
<pre>
 btrfs-set-seeding device true|false
</pre>
<div class="Pp"></div>
Enable or disable the seeding feature of a device that contains a btrfs
  filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-create"><a class="selflink" href="#btrfs-subvolume-create">btrfs-subvolume-create</a></h2>
<h2 class="Ss" title="Ss" id="btrfs-subvolume-create-opts"><a class="selflink" href="#btrfs-subvolume-create-opts">btrfs-subvolume-create-opts</a></h2>
<pre>
 btrfs-subvolume-create dest [qgroupid:..]
</pre>
<div class="Pp"></div>
Create a btrfs subvolume. The &quot;dest&quot; argument is the destination
  directory and the name of the subvolume, in the form
  <i>/path/to/dest/name</i>. The optional parameter &quot;qgroupid&quot;
  represents the qgroup which the newly created subvolume will be added to.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-delete"><a class="selflink" href="#btrfs-subvolume-delete">btrfs-subvolume-delete</a></h2>
<pre>
 btrfs-subvolume-delete subvolume
</pre>
<div class="Pp"></div>
Delete the named btrfs subvolume or snapshot.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-get-default"><a class="selflink" href="#btrfs-subvolume-get-default">btrfs-subvolume-get-default</a></h2>
<pre>
 btrfs-subvolume-get-default fs
</pre>
<div class="Pp"></div>
Get the default subvolume or snapshot of a filesystem mounted at
  &quot;mountpoint&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-list"><a class="selflink" href="#btrfs-subvolume-list">btrfs-subvolume-list</a></h2>
<pre>
 btrfs-subvolume-list fs
</pre>
<div class="Pp"></div>
List the btrfs snapshots and subvolumes of the btrfs filesystem which is mounted
  at &quot;fs&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-set-default"><a class="selflink" href="#btrfs-subvolume-set-default">btrfs-subvolume-set-default</a></h2>
<pre>
 btrfs-subvolume-set-default id fs
</pre>
<div class="Pp"></div>
Set the subvolume of the btrfs filesystem &quot;fs&quot; which will be mounted
  by default. See &quot;btrfs-subvolume-list&quot; to get a list of subvolumes.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-show"><a class="selflink" href="#btrfs-subvolume-show">btrfs-subvolume-show</a></h2>
<pre>
 btrfs-subvolume-show subvolume
</pre>
<div class="Pp"></div>
Return detailed information of the subvolume.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfs-subvolume-snapshot"><a class="selflink" href="#btrfs-subvolume-snapshot">btrfs-subvolume-snapshot</a></h2>
<h2 class="Ss" title="Ss" id="btrfs-subvolume-snapshot-opts"><a class="selflink" href="#btrfs-subvolume-snapshot-opts">btrfs-subvolume-snapshot-opts</a></h2>
<pre>
 btrfs-subvolume-snapshot source dest [ro:true|false] [qgroupid:..]
</pre>
<div class="Pp"></div>
Create a snapshot of the btrfs subvolume &quot;source&quot;. The
  &quot;dest&quot; argument is the destination directory and the name of the
  snapshot, in the form <i>/path/to/dest/name</i>. By default the newly created
  snapshot is writable, if the value of optional parameter &quot;ro&quot; is
  true, then a readonly snapshot is created. The optional parameter
  &quot;qgroupid&quot; represents the qgroup which the newly created snapshot
  will be added to.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfstune-enable-extended-inode-refs"><a class="selflink" href="#btrfstune-enable-extended-inode-refs">btrfstune-enable-extended-inode-refs</a></h2>
<pre>
 btrfstune-enable-extended-inode-refs device
</pre>
<div class="Pp"></div>
This will Enable extended inode refs.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfstune-enable-skinny-metadata-extent-refs"><a class="selflink" href="#btrfstune-enable-skinny-metadata-extent-refs">btrfstune-enable-skinny-metadata-extent-refs</a></h2>
<pre>
 btrfstune-enable-skinny-metadata-extent-refs device
</pre>
<div class="Pp"></div>
This enable skinny metadata extent refs.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="btrfstune-seeding"><a class="selflink" href="#btrfstune-seeding">btrfstune-seeding</a></h2>
<pre>
 btrfstune-seeding device true|false
</pre>
<div class="Pp"></div>
Enable seeding of a btrfs device, this will force a fs readonly so that you can
  use it to build other filesystems.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="c-pointer"><a class="selflink" href="#c-pointer">c-pointer</a></h2>
<pre>
 c-pointer
</pre>
<div class="Pp"></div>
In non-C language bindings, this allows you to retrieve the underlying C pointer
  to the handle (ie. &quot;h *&quot;). The purpose of this is to allow other
  libraries to interwork with libguestfs.
<h2 class="Ss" title="Ss" id="canonical-device-name"><a class="selflink" href="#canonical-device-name">canonical-device-name</a></h2>
<pre>
 canonical-device-name device
</pre>
<div class="Pp"></div>
This utility function is useful when displaying device names to the user. It
  takes a number of irregular device names and returns them in a consistent
  format:
<dl class="Bl-tag">
  <dt class="It-tag"><i>/dev/hdX</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/dev/vdX</i></dt>
  <dd class="It-tag">These are returned as <i>/dev/sdX</i>. Note this works for
      device names and partition names. This is approximately the reverse of the
      algorithm described in &quot;BLOCK DEVICE NAMING&quot; in
      <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/dev/mapper/VG-LV</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/dev/dm-N</i></dt>
  <dd class="It-tag">Converted to <i>/dev/VG/LV</i> form using
      &quot;lvm-canonical-lv-name&quot;.</dd>
</dl>
<div class="Pp"></div>
Other strings are returned unmodified.
<h2 class="Ss" title="Ss" id="cap-get-file"><a class="selflink" href="#cap-get-file">cap-get-file</a></h2>
<pre>
 cap-get-file path
</pre>
<div class="Pp"></div>
This function returns the Linux capabilities attached to &quot;path&quot;. The
  capabilities set is returned in text form (see <i>cap_to_text</i>(3)).
<div class="Pp"></div>
If no capabilities are attached to a file, an empty string is returned.
<div class="Pp"></div>
This command depends on the feature &quot;linuxcaps&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="cap-set-file"><a class="selflink" href="#cap-set-file">cap-set-file</a></h2>
<pre>
 cap-set-file path cap
</pre>
<div class="Pp"></div>
This function sets the Linux capabilities attached to &quot;path&quot;. The
  capabilities set &quot;cap&quot; should be passed in text form (see
  <i>cap_from_text</i>(3)).
<div class="Pp"></div>
This command depends on the feature &quot;linuxcaps&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="case-sensitive-path"><a class="selflink" href="#case-sensitive-path">case-sensitive-path</a></h2>
<pre>
 case-sensitive-path path
</pre>
<div class="Pp"></div>
This can be used to resolve case insensitive paths on a filesystem which is case
  sensitive. The use case is to resolve paths which you have read from Windows
  configuration files or the Windows Registry, to the true path.
<div class="Pp"></div>
The command handles a peculiarity of the Linux ntfs-3g filesystem driver (and
  probably others), which is that although the underlying filesystem is
  case-insensitive, the driver exports the filesystem to Linux as
  case-sensitive.
<div class="Pp"></div>
One consequence of this is that special directories such as <i>C:\windows</i>
  may appear as <i>/WINDOWS</i> or <i>/windows</i> (or other things) depending
  on the precise details of how they were created. In Windows itself this would
  not be a problem.
<div class="Pp"></div>
Bug or feature? You decide:
  http://www.tuxera.com/community/ntfs-3g-faq/#posixfilenames1
<div class="Pp"></div>
&quot;case-sensitive-path&quot; attempts to resolve the true case of each
  element in the path. It will return a resolved path if either the full path or
  its parent directory exists. If the parent directory exists but the full path
  does not, the case of the parent directory will be correctly resolved, and the
  remainder appended unmodified. For example, if the file
  &quot;/Windows/System32/netkvm.sys&quot; exists:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;case-sensitive-path&quot;
    (&quot;/windows/system32/netkvm.sys&quot;)</dt>
  <dd class="It-tag">&quot;Windows/System32/netkvm.sys&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;case-sensitive-path&quot;
    (&quot;/windows/system32/NoSuchFile&quot;)</dt>
  <dd class="It-tag">&quot;Windows/System32/NoSuchFile&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;case-sensitive-path&quot;
    (&quot;/windows/system33/netkvm.sys&quot;)</dt>
  <dd class="It-tag"><i>ERROR</i></dd>
</dl>
<div class="Pp"></div>
<i>Note</i>: Because of the above behaviour, &quot;case-sensitive-path&quot;
  cannot be used to check for the existence of a file.
<div class="Pp"></div>
<i>Note</i>: This function does not handle drive names, backslashes etc.
<div class="Pp"></div>
See also &quot;realpath&quot;.
<h2 class="Ss" title="Ss" id="cat"><a class="selflink" href="#cat">cat</a></h2>
<pre>
 cat path
</pre>
<div class="Pp"></div>
Return the contents of the file named &quot;path&quot;.
<div class="Pp"></div>
Because, in C, this function returns a &quot;char *&quot;, there is no way to
  differentiate between a &quot;\0&quot; character in a file and end of string.
  To handle binary files, use the &quot;read-file&quot; or &quot;download&quot;
  functions.
<h2 class="Ss" title="Ss" id="checksum"><a class="selflink" href="#checksum">checksum</a></h2>
<pre>
 checksum csumtype path
</pre>
<div class="Pp"></div>
This call computes the MD5, SHAx or CRC checksum of the file named
  &quot;path&quot;.
<div class="Pp"></div>
The type of checksum to compute is given by the &quot;csumtype&quot; parameter
  which must have one of the following values:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;crc&quot;</dt>
  <dd class="It-tag">Compute the cyclic redundancy check (CRC) specified by
      POSIX for the &quot;cksum&quot; command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;md5&quot;</dt>
  <dd class="It-tag">Compute the MD5 hash (using the &quot;md5sum&quot;
      program).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sha1&quot;</dt>
  <dd class="It-tag">Compute the SHA1 hash (using the &quot;sha1sum&quot;
      program).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sha224&quot;</dt>
  <dd class="It-tag">Compute the SHA224 hash (using the &quot;sha224sum&quot;
      program).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sha256&quot;</dt>
  <dd class="It-tag">Compute the SHA256 hash (using the &quot;sha256sum&quot;
      program).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sha384&quot;</dt>
  <dd class="It-tag">Compute the SHA384 hash (using the &quot;sha384sum&quot;
      program).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sha512&quot;</dt>
  <dd class="It-tag">Compute the SHA512 hash (using the &quot;sha512sum&quot;
      program).</dd>
</dl>
<div class="Pp"></div>
The checksum is returned as a printable string.
<div class="Pp"></div>
To get the checksum for a device, use &quot;checksum-device&quot;.
<div class="Pp"></div>
To get the checksums for many files, use &quot;checksums-out&quot;.
<h2 class="Ss" title="Ss" id="checksum-device"><a class="selflink" href="#checksum-device">checksum-device</a></h2>
<pre>
 checksum-device csumtype device
</pre>
<div class="Pp"></div>
This call computes the MD5, SHAx or CRC checksum of the contents of the device
  named &quot;device&quot;. For the types of checksums supported see the
  &quot;checksum&quot; command.
<h2 class="Ss" title="Ss" id="checksums-out"><a class="selflink" href="#checksums-out">checksums-out</a></h2>
<pre>
 checksums-out csumtype directory (sumsfile|-)
</pre>
<div class="Pp"></div>
This command computes the checksums of all regular files in <i>directory</i> and
  then emits a list of those checksums to the local output file
  &quot;sumsfile&quot;.
<div class="Pp"></div>
This can be used for verifying the integrity of a virtual machine. However to be
  properly secure you should pay attention to the output of the checksum command
  (it uses the ones from GNU coreutils). In particular when the filename is not
  printable, coreutils uses a special backslash syntax. For more information,
  see the GNU coreutils info file.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="chmod"><a class="selflink" href="#chmod">chmod</a></h2>
<pre>
 chmod mode path
</pre>
<div class="Pp"></div>
Change the mode (permissions) of &quot;path&quot; to &quot;mode&quot;. Only
  numeric modes are supported.
<div class="Pp"></div>
<i>Note</i>: When using this command from guestfish, &quot;mode&quot; by default
  would be decimal, unless you prefix it with 0 to get octal, ie. use 0700 not
  700.
<div class="Pp"></div>
The mode actually set is affected by the umask.
<h2 class="Ss" title="Ss" id="chown"><a class="selflink" href="#chown">chown</a></h2>
<pre>
 chown owner group path
</pre>
<div class="Pp"></div>
Change the file owner to &quot;owner&quot; and group to &quot;group&quot;.
<div class="Pp"></div>
Only numeric uid and gid are supported. If you want to use names, you will need
  to locate and parse the password file yourself (Augeas support makes this
  relatively easy).
<h2 class="Ss" title="Ss" id="clear-backend-setting"><a class="selflink" href="#clear-backend-setting">clear-backend-setting</a></h2>
<pre>
 clear-backend-setting name
</pre>
<div class="Pp"></div>
If there is a backend setting string matching &quot;name&quot; or beginning with
  &quot;name=&quot;, then that string is removed from the backend settings.
<div class="Pp"></div>
This call returns the number of strings which were removed (which may be 0, 1 or
  greater than 1).
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
  <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="command"><a class="selflink" href="#command">command</a></h2>
<pre>
 command 'arguments ...'
</pre>
<div class="Pp"></div>
This call runs a command from the guest filesystem. The filesystem must be
  mounted, and must contain a compatible operating system (ie. something Linux,
  with the same or compatible processor architecture).
<div class="Pp"></div>
The single parameter is an argv-style list of arguments. The first element is
  the name of the program to run. Subsequent elements are parameters. The list
  must be non-empty (ie. must contain a program name). Note that the command
  runs directly, and is <i>not</i> invoked via the shell (see &quot;sh&quot;).
<div class="Pp"></div>
The return value is anything printed to <i>stdout</i> by the command.
<div class="Pp"></div>
If the command returns a non-zero exit status, then this function returns an
  error message. The error message string is the content of <i>stderr</i> from
  the command.
<div class="Pp"></div>
The $PATH environment variable will contain at least <i>/usr/bin</i> and
  <i>/bin</i>. If you require a program from another location, you should
  provide the full path in the first parameter.
<div class="Pp"></div>
Shared libraries and data files required by the program must be available on
  filesystems which are mounted in the correct places. It is the caller's
  responsibility to ensure all filesystems that are needed are mounted at the
  right locations.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="command-lines"><a class="selflink" href="#command-lines">command-lines</a></h2>
<pre>
 command-lines 'arguments ...'
</pre>
<div class="Pp"></div>
This is the same as &quot;command&quot;, but splits the result into a list of
  lines.
<div class="Pp"></div>
See also: &quot;sh-lines&quot;
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="compress-device-out"><a class="selflink" href="#compress-device-out">compress-device-out</a></h2>
<pre>
 compress-device-out ctype device (zdevice|-) [level:N]
</pre>
<div class="Pp"></div>
This command compresses &quot;device&quot; and writes it out to the local file
  &quot;zdevice&quot;.
<div class="Pp"></div>
The &quot;ctype&quot; and optional &quot;level&quot; parameters have the same
  meaning as in &quot;compress-out&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="compress-out"><a class="selflink" href="#compress-out">compress-out</a></h2>
<pre>
 compress-out ctype file (zfile|-) [level:N]
</pre>
<div class="Pp"></div>
This command compresses <i>file</i> and writes it out to the local file
  <i>zfile</i>.
<div class="Pp"></div>
The compression program used is controlled by the &quot;ctype&quot; parameter.
  Currently this includes: &quot;compress&quot;, &quot;gzip&quot;,
  &quot;bzip2&quot;, &quot;xz&quot; or &quot;lzop&quot;. Some compression types
  may not be supported by particular builds of libguestfs, in which case you
  will get an error containing the substring &quot;not supported&quot;.
<div class="Pp"></div>
The optional &quot;level&quot; parameter controls compression level. The meaning
  and default for this parameter depends on the compression program being used.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="config"><a class="selflink" href="#config">config</a></h2>
<pre>
 config hvparam hvvalue
</pre>
<div class="Pp"></div>
This can be used to add arbitrary hypervisor parameters of the form <i>-param
  value</i>. Actually it's not quite arbitrary - we prevent you from setting
  some parameters which would interfere with parameters that we use.
<div class="Pp"></div>
The first character of &quot;hvparam&quot; string must be a &quot;-&quot;
  (dash).
<div class="Pp"></div>
&quot;hvvalue&quot; can be NULL.
<h2 class="Ss" title="Ss" id="copy-attributes"><a class="selflink" href="#copy-attributes">copy-attributes</a></h2>
<pre>
 copy-attributes src dest [all:true|false] [mode:true|false] [xattributes:true|false] [ownership:true|false]
</pre>
<div class="Pp"></div>
Copy the attributes of a path (which can be a file or a directory) to another
  path.
<div class="Pp"></div>
By default &quot;no&quot; attribute is copied, so make sure to specify any (or
  &quot;all&quot; to copy everything).
<div class="Pp"></div>
The optional arguments specify which attributes can be copied:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mode&quot;</dt>
  <dd class="It-tag">Copy part of the file mode from &quot;source&quot; to
      &quot;destination&quot;. Only the UNIX permissions and the
      sticky/setuid/setgid bits can be copied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;xattributes&quot;</dt>
  <dd class="It-tag">Copy the Linux extended attributes (xattrs) from
      &quot;source&quot; to &quot;destination&quot;. This flag does nothing if
      the <i>linuxxattrs</i> feature is not available (see
      &quot;feature-available&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ownership&quot;</dt>
  <dd class="It-tag">Copy the owner uid and the group gid of &quot;source&quot;
      to &quot;destination&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;all&quot;</dt>
  <dd class="It-tag">Copy <b>all</b> the attributes from &quot;source&quot; to
      &quot;destination&quot;. Enabling it enables all the other flags, if they
      are not specified already.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="copy-device-to-device"><a class="selflink" href="#copy-device-to-device">copy-device-to-device</a></h2>
<pre>
 copy-device-to-device src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false] [append:true|false]
</pre>
<div class="Pp"></div>
The four calls &quot;copy-device-to-device&quot;,
  &quot;copy-device-to-file&quot;, &quot;copy-file-to-device&quot;, and
  &quot;copy-file-to-file&quot; let you copy from a source (device|file) to a
  destination (device|file).
<div class="Pp"></div>
Partial copies can be made since you can specify optionally the source offset,
  destination offset and size to copy. These values are all specified in bytes.
  If not given, the offsets both default to zero, and the size defaults to
  copying as much as possible until we hit the end of the source.
<div class="Pp"></div>
The source and destination may be the same object. However overlapping regions
  may not be copied correctly.
<div class="Pp"></div>
If the destination is a file, it is created if required. If the destination file
  is not large enough, it is extended.
<div class="Pp"></div>
If the destination is a file and the &quot;append&quot; flag is not set, then
  the destination file is truncated. If the &quot;append&quot; flag is set, then
  the copy appends to the destination file. The &quot;append&quot; flag
  currently cannot be set for devices.
<div class="Pp"></div>
If the &quot;sparse&quot; flag is true then the call avoids writing blocks that
  contain only zeroes, which can help in some situations where the backing disk
  is thin-provisioned. Note that unless the target is already zeroed, using this
  option will result in incorrect copying.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="copy-device-to-file"><a class="selflink" href="#copy-device-to-file">copy-device-to-file</a></h2>
<pre>
 copy-device-to-file src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false] [append:true|false]
</pre>
<div class="Pp"></div>
See &quot;copy-device-to-device&quot; for a general overview of this call.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="copy-file-to-device"><a class="selflink" href="#copy-file-to-device">copy-file-to-device</a></h2>
<pre>
 copy-file-to-device src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false] [append:true|false]
</pre>
<div class="Pp"></div>
See &quot;copy-device-to-device&quot; for a general overview of this call.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="copy-file-to-file"><a class="selflink" href="#copy-file-to-file">copy-file-to-file</a></h2>
<pre>
 copy-file-to-file src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false] [append:true|false]
</pre>
<div class="Pp"></div>
See &quot;copy-device-to-device&quot; for a general overview of this call.
<div class="Pp"></div>
This is <b>not</b> the function you want for copying files. This is for copying
  blocks within existing files. See &quot;cp&quot;, &quot;cp-a&quot; and
  &quot;mv&quot; for general file copying and moving functions.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="copy-size"><a class="selflink" href="#copy-size">copy-size</a></h2>
<pre>
 copy-size src dest size
</pre>
<div class="Pp"></div>
This command copies exactly &quot;size&quot; bytes from one source device or
  file &quot;src&quot; to another destination device or file &quot;dest&quot;.
<div class="Pp"></div>
Note this will fail if the source is too short or if the destination is not
  large enough.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;copy-device-to-device&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="cp"><a class="selflink" href="#cp">cp</a></h2>
<pre>
 cp src dest
</pre>
<div class="Pp"></div>
This copies a file from &quot;src&quot; to &quot;dest&quot; where
  &quot;dest&quot; is either a destination filename or destination directory.
<h2 class="Ss" title="Ss" id="cp-a"><a class="selflink" href="#cp-a">cp-a</a></h2>
<pre>
 cp-a src dest
</pre>
<div class="Pp"></div>
This copies a file or directory from &quot;src&quot; to &quot;dest&quot;
  recursively using the &quot;cp -a&quot; command.
<h2 class="Ss" title="Ss" id="cp-r"><a class="selflink" href="#cp-r">cp-r</a></h2>
<pre>
 cp-r src dest
</pre>
<div class="Pp"></div>
This copies a file or directory from &quot;src&quot; to &quot;dest&quot;
  recursively using the &quot;cp -rP&quot; command.
<div class="Pp"></div>
Most users should use &quot;cp-a&quot; instead. This command is useful when you
  don't want to preserve permissions, because the target filesystem does not
  support it (primarily when writing to DOS FAT filesystems).
<h2 class="Ss" title="Ss" id="cpio-out"><a class="selflink" href="#cpio-out">cpio-out</a></h2>
<pre>
 cpio-out directory (cpiofile|-) [format:..]
</pre>
<div class="Pp"></div>
This command packs the contents of <i>directory</i> and downloads it to local
  file &quot;cpiofile&quot;.
<div class="Pp"></div>
The optional &quot;format&quot; parameter can be used to select the format. Only
  the following formats are currently permitted:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;newc&quot;</dt>
  <dd class="It-tag">New (SVR4) portable format. This format happens to be
      compatible with the cpio-like format used by the Linux kernel for
      initramfs.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is the default format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;crc&quot;</dt>
  <dd class="It-tag">New (SVR4) portable format with a checksum.</dd>
</dl>
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="dd"><a class="selflink" href="#dd">dd</a></h2>
<pre>
 dd src dest
</pre>
<div class="Pp"></div>
This command copies from one source device or file &quot;src&quot; to another
  destination device or file &quot;dest&quot;. Normally you would use this to
  copy to or from a device or partition, for example to duplicate a filesystem.
<div class="Pp"></div>
If the destination is a device, it must be as large or larger than the source
  file or device, otherwise the copy will fail. This command cannot do partial
  copies (see &quot;copy-device-to-device&quot;).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;copy-device-to-device&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="device-index"><a class="selflink" href="#device-index">device-index</a></h2>
<pre>
 device-index device
</pre>
<div class="Pp"></div>
This function takes a device name (eg. &quot;/dev/sdb&quot;) and returns the
  index of the device in the list of devices.
<div class="Pp"></div>
Index numbers start from 0. The named device must exist, for example as a string
  returned from &quot;list-devices&quot;.
<div class="Pp"></div>
See also &quot;list-devices&quot;, &quot;part-to-dev&quot;.
<h2 class="Ss" title="Ss" id="df"><a class="selflink" href="#df">df</a></h2>
<pre>
 df
</pre>
<div class="Pp"></div>
This command runs the &quot;df&quot; command to report disk space used.
<div class="Pp"></div>
This command is mostly useful for interactive sessions. It is <i>not</i>
  intended that you try to parse the output string. Use &quot;statvfs&quot; from
  programs.
<h2 class="Ss" title="Ss" id="df-h"><a class="selflink" href="#df-h">df-h</a></h2>
<pre>
 df-h
</pre>
<div class="Pp"></div>
This command runs the &quot;df -h&quot; command to report disk space used in
  human-readable format.
<div class="Pp"></div>
This command is mostly useful for interactive sessions. It is <i>not</i>
  intended that you try to parse the output string. Use &quot;statvfs&quot; from
  programs.
<h2 class="Ss" title="Ss" id="disk-create"><a class="selflink" href="#disk-create">disk-create</a></h2>
<pre>
 disk-create filename format size [backingfile:..] [backingformat:..] [preallocation:..] [compat:..] [clustersize:N]
</pre>
<div class="Pp"></div>
Create a blank disk image called <i>filename</i> (a host file) with format
  &quot;format&quot; (usually &quot;raw&quot; or &quot;qcow2&quot;). The size is
  &quot;size&quot; bytes.
<div class="Pp"></div>
If used with the optional &quot;backingfile&quot; parameter, then a snapshot is
  created on top of the backing file. In this case, &quot;size&quot; must be
  passed as &quot;-1&quot;. The size of the snapshot is the same as the size of
  the backing file, which is discovered automatically. You are encouraged to
  also pass &quot;backingformat&quot; to describe the format of
  &quot;backingfile&quot;.
<div class="Pp"></div>
If <i>filename</i> refers to a block device, then the device is formatted. The
  &quot;size&quot; is ignored since block devices have an intrinsic size.
<div class="Pp"></div>
The other optional parameters are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;preallocation&quot;</dt>
  <dd class="It-tag">If format is &quot;raw&quot;, then this can be either
      &quot;off&quot; (or &quot;sparse&quot;) or &quot;full&quot; to create a
      sparse or fully allocated file respectively. The default is
      &quot;off&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    If format is &quot;qcow2&quot;, then this can be &quot;off&quot; (or
      &quot;sparse&quot;), &quot;metadata&quot; or &quot;full&quot;.
      Preallocating metadata can be faster when doing lots of writes, but uses
      more space. The default is &quot;off&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;compat&quot;</dt>
  <dd class="It-tag">&quot;qcow2&quot; only: Pass the string 1.1 to use the
      advanced qcow2 format supported by qemu &#x2265; 1.1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;clustersize&quot;</dt>
  <dd class="It-tag">&quot;qcow2&quot; only: Change the qcow2 cluster size. The
      default is 65536 (bytes) and this setting may be any power of two between
      512 and 2097152.</dd>
</dl>
<div class="Pp"></div>
Note that this call does not add the new disk to the handle. You may need to
  call &quot;add-drive-opts&quot; separately.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="disk-format"><a class="selflink" href="#disk-format">disk-format</a></h2>
<pre>
 disk-format filename
</pre>
<div class="Pp"></div>
Detect and return the format of the disk image called <i>filename</i>.
  <i>filename</i> can also be a host device, etc. If the format of the image
  could not be detected, then &quot;unknown&quot; is returned.
<div class="Pp"></div>
Note that detecting the disk format can be insecure under some circumstances.
  See &quot;CVE-2010-3851&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
See also: &quot;DISK IMAGE FORMATS&quot; in <i>guestfs</i>(3)
<h2 class="Ss" title="Ss" id="disk-has-backing-file"><a class="selflink" href="#disk-has-backing-file">disk-has-backing-file</a></h2>
<pre>
 disk-has-backing-file filename
</pre>
<div class="Pp"></div>
Detect and return whether the disk image <i>filename</i> has a backing file.
<div class="Pp"></div>
Note that detecting disk features can be insecure under some circumstances. See
  &quot;CVE-2010-3851&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="disk-virtual-size"><a class="selflink" href="#disk-virtual-size">disk-virtual-size</a></h2>
<pre>
 disk-virtual-size filename
</pre>
<div class="Pp"></div>
Detect and return the virtual size in bytes of the disk image called
  <i>filename</i>.
<div class="Pp"></div>
Note that detecting disk features can be insecure under some circumstances. See
  &quot;CVE-2010-3851&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="dmesg"><a class="selflink" href="#dmesg">dmesg</a></h2>
<pre>
 dmesg
</pre>
<div class="Pp"></div>
This returns the kernel messages (&quot;dmesg&quot; output) from the guest
  kernel. This is sometimes useful for extended debugging of problems.
<div class="Pp"></div>
Another way to get the same information is to enable verbose messages with
  &quot;set-verbose&quot; or by setting the environment variable
  &quot;LIBGUESTFS_DEBUG=1&quot; before running the program.
<h2 class="Ss" title="Ss" id="download"><a class="selflink" href="#download">download</a></h2>
<pre>
 download remotefilename (filename|-)
</pre>
<div class="Pp"></div>
Download file <i>remotefilename</i> and save it as <i>filename</i> on the local
  machine.
<div class="Pp"></div>
<i>filename</i> can also be a named pipe.
<div class="Pp"></div>
See also &quot;upload&quot;, &quot;cat&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="download-offset"><a class="selflink" href="#download-offset">download-offset</a></h2>
<pre>
 download-offset remotefilename (filename|-) offset size
</pre>
<div class="Pp"></div>
Download file <i>remotefilename</i> and save it as <i>filename</i> on the local
  machine.
<div class="Pp"></div>
<i>remotefilename</i> is read for &quot;size&quot; bytes starting at
  &quot;offset&quot; (this region must be within the file or device).
<div class="Pp"></div>
Note that there is no limit on the amount of data that can be downloaded with
  this call, unlike with &quot;pread&quot;, and this call always reads the full
  amount unless an error occurs.
<div class="Pp"></div>
See also &quot;download&quot;, &quot;pread&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="drop-caches"><a class="selflink" href="#drop-caches">drop-caches</a></h2>
<pre>
 drop-caches whattodrop
</pre>
<div class="Pp"></div>
This instructs the guest kernel to drop its page cache, and/or dentries and
  inode caches. The parameter &quot;whattodrop&quot; tells the kernel what
  precisely to drop, see http://linux-mm.org/Drop_Caches
<div class="Pp"></div>
Setting &quot;whattodrop&quot; to 3 should drop everything.
<div class="Pp"></div>
This automatically calls <i>sync</i>(2) before the operation, so that the
  maximum guest memory is freed.
<h2 class="Ss" title="Ss" id="du"><a class="selflink" href="#du">du</a></h2>
<pre>
 du path
</pre>
<div class="Pp"></div>
This command runs the &quot;du -s&quot; command to estimate file space usage for
  &quot;path&quot;.
<div class="Pp"></div>
&quot;path&quot; can be a file or a directory. If &quot;path&quot; is a
  directory then the estimate includes the contents of the directory and all
  subdirectories (recursively).
<div class="Pp"></div>
The result is the estimated size in <i>kilobytes</i> (ie. units of 1024 bytes).
<h2 class="Ss" title="Ss" id="e2fsck"><a class="selflink" href="#e2fsck">e2fsck</a></h2>
<pre>
 e2fsck device [correct:true|false] [forceall:true|false]
</pre>
<div class="Pp"></div>
This runs the ext2/ext3 filesystem checker on &quot;device&quot;. It can take
  the following optional arguments:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;correct&quot;</dt>
  <dd class="It-tag">Automatically repair the file system. This option will
      cause e2fsck to automatically fix any filesystem problems that can be
      safely fixed without human intervention.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option may not be specified at the same time as the
      &quot;forceall&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;forceall&quot;</dt>
  <dd class="It-tag">Assume an answer of 'yes' to all questions; allows e2fsck
      to be used non-interactively.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option may not be specified at the same time as the &quot;correct&quot;
      option.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="e2fsck-f"><a class="selflink" href="#e2fsck-f">e2fsck-f</a></h2>
<pre>
 e2fsck-f device
</pre>
<div class="Pp"></div>
This runs &quot;e2fsck -p -f device&quot;, ie. runs the ext2/ext3 filesystem
  checker on &quot;device&quot;, noninteractively ( <i>-p</i>), even if the
  filesystem appears to be clean ( <i>-f</i>).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;e2fsck&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="echo-daemon"><a class="selflink" href="#echo-daemon">echo-daemon</a></h2>
<pre>
 echo-daemon 'words ...'
</pre>
<div class="Pp"></div>
This command concatenates the list of &quot;words&quot; passed with single
  spaces between them and returns the resulting string.
<div class="Pp"></div>
You can use this command to test the connection through to the daemon.
<div class="Pp"></div>
See also &quot;ping-daemon&quot;.
<h2 class="Ss" title="Ss" id="egrep"><a class="selflink" href="#egrep">egrep</a></h2>
<pre>
 egrep regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;egrep&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="egrepi"><a class="selflink" href="#egrepi">egrepi</a></h2>
<pre>
 egrepi regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;egrep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="equal"><a class="selflink" href="#equal">equal</a></h2>
<pre>
 equal file1 file2
</pre>
<div class="Pp"></div>
This compares the two files <i>file1</i> and <i>file2</i> and returns true if
  their content is exactly equal, or false otherwise.
<div class="Pp"></div>
The external <i>cmp</i>(1) program is used for the comparison.
<h2 class="Ss" title="Ss" id="exists"><a class="selflink" href="#exists">exists</a></h2>
<pre>
 exists path
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a file, directory (or
  anything) with the given &quot;path&quot; name.
<div class="Pp"></div>
See also &quot;is-file&quot;, &quot;is-dir&quot;, &quot;stat&quot;.
<h2 class="Ss" title="Ss" id="extlinux"><a class="selflink" href="#extlinux">extlinux</a></h2>
<pre>
 extlinux directory
</pre>
<div class="Pp"></div>
Install the SYSLINUX bootloader on the device mounted at <i>directory</i>.
  Unlike &quot;syslinux&quot; which requires a FAT filesystem, this can be used
  on an ext2/3/4 or btrfs filesystem.
<div class="Pp"></div>
The <i>directory</i> parameter can be either a mountpoint, or a directory within
  the mountpoint.
<div class="Pp"></div>
You also have to mark the partition as &quot;active&quot;
  (&quot;part-set-bootable&quot;) and a Master Boot Record must be installed
  (eg. using &quot;pwrite-device&quot;) on the first sector of the whole disk.
  The SYSLINUX package comes with some suitable Master Boot Records. See the
  <i>extlinux</i>(1) man page for further information.
<div class="Pp"></div>
Additional configuration can be supplied to SYSLINUX by placing a file called
  <i>extlinux.conf</i> on the filesystem under <i>directory</i>. For further
  information about the contents of this file, see <i>extlinux</i>(1).
<div class="Pp"></div>
See also &quot;syslinux&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;extlinux&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="fallocate"><a class="selflink" href="#fallocate">fallocate</a></h2>
<pre>
 fallocate path len
</pre>
<div class="Pp"></div>
This command preallocates a file (containing zero bytes) named &quot;path&quot;
  of size &quot;len&quot; bytes. If the file exists already, it is overwritten.
<div class="Pp"></div>
Do not confuse this with the guestfish-specific &quot;alloc&quot; command which
  allocates a file in the host and attaches it as a device.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;fallocate64&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="fallocate64"><a class="selflink" href="#fallocate64">fallocate64</a></h2>
<pre>
 fallocate64 path len
</pre>
<div class="Pp"></div>
This command preallocates a file (containing zero bytes) named &quot;path&quot;
  of size &quot;len&quot; bytes. If the file exists already, it is overwritten.
<div class="Pp"></div>
Note that this call allocates disk blocks for the file. To create a sparse file
  use &quot;truncate-size&quot; instead.
<div class="Pp"></div>
The deprecated call &quot;fallocate&quot; does the same, but owing to an
  oversight it only allowed 30 bit lengths to be specified, effectively limiting
  the maximum size of files created through that call to 1GB.
<div class="Pp"></div>
Do not confuse this with the guestfish-specific &quot;alloc&quot; and
  &quot;sparse&quot; commands which create a file in the host and attach it as a
  device.
<h2 class="Ss" title="Ss" id="feature-available"><a class="selflink" href="#feature-available">feature-available</a></h2>
<pre>
 feature-available 'groups ...'
</pre>
<div class="Pp"></div>
This is the same as &quot;available&quot;, but unlike that call it returns a
  simple true/false boolean result, instead of throwing an exception if a
  feature is not found. For other documentation see &quot;available&quot;.
<h2 class="Ss" title="Ss" id="fgrep"><a class="selflink" href="#fgrep">fgrep</a></h2>
<pre>
 fgrep pattern path
</pre>
<div class="Pp"></div>
This calls the external &quot;fgrep&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="fgrepi"><a class="selflink" href="#fgrepi">fgrepi</a></h2>
<pre>
 fgrepi pattern path
</pre>
<div class="Pp"></div>
This calls the external &quot;fgrep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="file"><a class="selflink" href="#file">file</a></h2>
<pre>
 file path
</pre>
<div class="Pp"></div>
This call uses the standard <i>file</i>(1) command to determine the type or
  contents of the file.
<div class="Pp"></div>
This call will also transparently look inside various types of compressed file.
<div class="Pp"></div>
The exact command which runs is &quot;file -zb path&quot;. Note in particular
  that the filename is not prepended to the output (the <i>-b</i> option).
<div class="Pp"></div>
The output depends on the output of the underlying <i>file</i>(1) command and it
  can change in future in ways beyond our control. In other words, the output is
  not guaranteed by the ABI.
<div class="Pp"></div>
See also: <i>file</i>(1), &quot;vfs-type&quot;, &quot;lstat&quot;,
  &quot;is-file&quot;, &quot;is-blockdev&quot; (etc), &quot;is-zero&quot;.
<h2 class="Ss" title="Ss" id="file-architecture"><a class="selflink" href="#file-architecture">file-architecture</a></h2>
<pre>
 file-architecture filename
</pre>
<div class="Pp"></div>
This detects the architecture of the binary <i>filename</i>, and returns it if
  known.
<div class="Pp"></div>
Currently defined architectures are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;i386&quot;</dt>
  <dd class="It-tag">This string is returned for all 32 bit i386, i486, i586,
      i686 binaries irrespective of the precise processor requirements of the
      binary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;x86_64&quot;</dt>
  <dd class="It-tag">64 bit x86-64.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sparc&quot;</dt>
  <dd class="It-tag">32 bit SPARC.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sparc64&quot;</dt>
  <dd class="It-tag">64 bit SPARC V9 and above.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ia64&quot;</dt>
  <dd class="It-tag">Intel Itanium.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ppc&quot;</dt>
  <dd class="It-tag">32 bit Power PC.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ppc64&quot;</dt>
  <dd class="It-tag">64 bit Power PC.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;arm&quot;</dt>
  <dd class="It-tag">32 bit ARM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;aarch64&quot;</dt>
  <dd class="It-tag">64 bit ARM.</dd>
</dl>
<div class="Pp"></div>
Libguestfs may return other architecture strings in future.
<div class="Pp"></div>
The function works on at least the following types of files:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">many types of Un*x and Linux binary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">many types of Un*x and Linux shared library</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Windows Win32 and Win64 binaries</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Windows Win32 and Win64 DLLs
    <div style="height: 1.00em;">&#x00A0;</div>
    Win32 binaries and DLLs return &quot;i386&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    Win64 binaries and DLLs return &quot;x86_64&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Linux kernel modules</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Linux new-style initrd images</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">some non-x86 Linux vmlinuz kernels</dd>
</dl>
<div class="Pp"></div>
What it can't do currently:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">static libraries (libfoo.a)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Linux old-style initrd as compressed ext2 filesystem (RHEL
      3)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">x86 Linux vmlinuz kernels
    <div style="height: 1.00em;">&#x00A0;</div>
    x86 vmlinuz images (bzImage format) consist of a mix of 16-, 32- and
      compressed code, and are horribly hard to unpack. If you want to find the
      architecture of a kernel, use the architecture of the associated initrd or
      kernel module(s) instead.</dd>
</dl>
<h2 class="Ss" title="Ss" id="filesize"><a class="selflink" href="#filesize">filesize</a></h2>
<pre>
 filesize file
</pre>
<div class="Pp"></div>
This command returns the size of <i>file</i> in bytes.
<div class="Pp"></div>
To get other stats about a file, use &quot;stat&quot;, &quot;lstat&quot;,
  &quot;is-dir&quot;, &quot;is-file&quot; etc. To get the size of block devices,
  use &quot;blockdev-getsize64&quot;.
<h2 class="Ss" title="Ss" id="filesystem-available"><a class="selflink" href="#filesystem-available">filesystem-available</a></h2>
<pre>
 filesystem-available filesystem
</pre>
<div class="Pp"></div>
Check whether libguestfs supports the named filesystem. The argument
  &quot;filesystem&quot; is a filesystem name, such as &quot;ext3&quot;.
<div class="Pp"></div>
You must call &quot;launch&quot; before using this command.
<div class="Pp"></div>
This is mainly useful as a negative test. If this returns true, it doesn't mean
  that a particular filesystem can be created or mounted, since filesystems can
  fail for other reasons such as it being a later version of the filesystem, or
  having incompatible features, or lacking the right mkfs.&lt; <i>fs</i>&gt;
  tool.
<div class="Pp"></div>
See also &quot;available&quot;, &quot;feature-available&quot;,
  &quot;AVAILABILITY&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="fill"><a class="selflink" href="#fill">fill</a></h2>
<pre>
 fill c len path
</pre>
<div class="Pp"></div>
This command creates a new file called &quot;path&quot;. The initial content of
  the file is &quot;len&quot; octets of &quot;c&quot;, where &quot;c&quot; must
  be a number in the range &quot;[0..255]&quot;.
<div class="Pp"></div>
To fill a file with zero bytes (sparsely), it is much more efficient to use
  &quot;truncate-size&quot;. To create a file with a pattern of repeating bytes
  use &quot;fill-pattern&quot;.
<h2 class="Ss" title="Ss" id="fill-dir"><a class="selflink" href="#fill-dir">fill-dir</a></h2>
<pre>
 fill-dir dir nr
</pre>
<div class="Pp"></div>
This function, useful for testing filesystems, creates &quot;nr&quot; empty
  files in the directory &quot;dir&quot; with names 00000000 through
  &quot;nr-1&quot; (ie. each file name is 8 digits long padded with zeroes).
<h2 class="Ss" title="Ss" id="fill-pattern"><a class="selflink" href="#fill-pattern">fill-pattern</a></h2>
<pre>
 fill-pattern pattern len path
</pre>
<div class="Pp"></div>
This function is like &quot;fill&quot; except that it creates a new file of
  length &quot;len&quot; containing the repeating pattern of bytes in
  &quot;pattern&quot;. The pattern is truncated if necessary to ensure the
  length of the file is exactly &quot;len&quot; bytes.
<h2 class="Ss" title="Ss" id="find"><a class="selflink" href="#find">find</a></h2>
<pre>
 find directory
</pre>
<div class="Pp"></div>
This command lists out all files and directories, recursively, starting at
  <i>directory</i>. It is essentially equivalent to running the shell command
  &quot;find directory -print&quot; but some post-processing happens on the
  output, described below.
<div class="Pp"></div>
This returns a list of strings <i>without any prefix</i>. Thus if the directory
  structure was:
<div class="Pp"></div>
<pre>
 /tmp/a
 /tmp/b
 /tmp/c/d
</pre>
<div class="Pp"></div>
then the returned list from &quot;find&quot; <i>/tmp</i> would be 4 elements:
<div class="Pp"></div>
<pre>
 a
 b
 c
 c/d
</pre>
<div class="Pp"></div>
If <i>directory</i> is not a directory, then this command returns an error.
<div class="Pp"></div>
The returned list is sorted.
<h2 class="Ss" title="Ss" id="find0"><a class="selflink" href="#find0">find0</a></h2>
<pre>
 find0 directory (files|-)
</pre>
<div class="Pp"></div>
This command lists out all files and directories, recursively, starting at
  <i>directory</i>, placing the resulting list in the external file called
  <i>files</i>.
<div class="Pp"></div>
This command works the same way as &quot;find&quot; with the following
  exceptions:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The resulting list is written to an external file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Items (filenames) in the result are separated by
      &quot;\0&quot; characters. See <i>find</i>(1) option <i>-print0</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The result list is not sorted.</dd>
</dl>
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="findfs-label"><a class="selflink" href="#findfs-label">findfs-label</a></h2>
<pre>
 findfs-label label
</pre>
<div class="Pp"></div>
This command searches the filesystems and returns the one which has the given
  label. An error is returned if no such filesystem can be found.
<div class="Pp"></div>
To find the label of a filesystem, use &quot;vfs-label&quot;.
<h2 class="Ss" title="Ss" id="findfs-uuid"><a class="selflink" href="#findfs-uuid">findfs-uuid</a></h2>
<pre>
 findfs-uuid uuid
</pre>
<div class="Pp"></div>
This command searches the filesystems and returns the one which has the given
  UUID. An error is returned if no such filesystem can be found.
<div class="Pp"></div>
To find the UUID of a filesystem, use &quot;vfs-uuid&quot;.
<h2 class="Ss" title="Ss" id="fsck"><a class="selflink" href="#fsck">fsck</a></h2>
<pre>
 fsck fstype device
</pre>
<div class="Pp"></div>
This runs the filesystem checker (fsck) on &quot;device&quot; which should have
  filesystem type &quot;fstype&quot;.
<div class="Pp"></div>
The returned integer is the status. See <i>fsck</i>(8) for the list of status
  codes from &quot;fsck&quot;.
<div class="Pp"></div>
Notes:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Multiple status codes can be summed together.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A non-zero return code can mean &quot;success&quot;, for
      example if errors have been corrected on the filesystem.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Checking or repairing NTFS volumes is not supported (by
      linux-ntfs).</dd>
</dl>
<div class="Pp"></div>
This command is entirely equivalent to running &quot;fsck -a -t fstype
  device&quot;.
<h2 class="Ss" title="Ss" id="fstrim"><a class="selflink" href="#fstrim">fstrim</a></h2>
<pre>
 fstrim mountpoint [offset:N] [length:N] [minimumfreeextent:N]
</pre>
<div class="Pp"></div>
Trim the free space in the filesystem mounted on &quot;mountpoint&quot;. The
  filesystem must be mounted read-write.
<div class="Pp"></div>
The filesystem contents are not affected, but any free space in the filesystem
  is &quot;trimmed&quot;, that is, given back to the host device, thus making
  disk images more sparse, allowing unused space in qcow2 files to be reused,
  etc.
<div class="Pp"></div>
This operation requires support in libguestfs, the mounted filesystem, the host
  filesystem, qemu and the host kernel. If this support isn't present it may
  give an error or even appear to run but do nothing.
<div class="Pp"></div>
In the case where the kernel vfs driver does not support trimming, this call
  will fail with errno set to &quot;ENOTSUP&quot;. Currently this happens when
  trying to trim FAT filesystems.
<div class="Pp"></div>
See also &quot;zero-free-space&quot;. That is a slightly different operation
  that turns free space in the filesystem into zeroes. It is valid to call
  &quot;fstrim&quot; either instead of, or after calling
  &quot;zero-free-space&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;fstrim&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="get-append"><a class="selflink" href="#get-append">get-append</a></h2>
<pre>
 get-append
</pre>
<div class="Pp"></div>
Return the additional kernel options which are added to the libguestfs appliance
  kernel command line.
<div class="Pp"></div>
If &quot;NULL&quot; then no options are added.
<h2 class="Ss" title="Ss" id="get-attach-method"><a class="selflink" href="#get-attach-method">get-attach-method</a></h2>
<pre>
 get-attach-method
</pre>
<div class="Pp"></div>
Return the current backend.
<div class="Pp"></div>
See &quot;set-backend&quot; and &quot;BACKEND&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;get-backend&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="get-autosync"><a class="selflink" href="#get-autosync">get-autosync</a></h2>
<pre>
 get-autosync
</pre>
<div class="Pp"></div>
Get the autosync flag.
<h2 class="Ss" title="Ss" id="get-backend"><a class="selflink" href="#get-backend">get-backend</a></h2>
<pre>
 get-backend
</pre>
<div class="Pp"></div>
Return the current backend.
<div class="Pp"></div>
This handle property was previously called the &quot;attach method&quot;.
<div class="Pp"></div>
See &quot;set-backend&quot; and &quot;BACKEND&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="get-backend-setting"><a class="selflink" href="#get-backend-setting">get-backend-setting</a></h2>
<pre>
 get-backend-setting name
</pre>
<div class="Pp"></div>
Find a backend setting string which is either &quot;name&quot; or begins with
  &quot;name=&quot;. If &quot;name&quot;, this returns the string &quot;1&quot;.
  If &quot;name=&quot;, this returns the part after the equals sign (which may
  be an empty string).
<div class="Pp"></div>
If no such setting is found, this function throws an error. The errno (see
  &quot;last-errno&quot;) will be &quot;ESRCH&quot; in this case.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
  <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="get-backend-settings"><a class="selflink" href="#get-backend-settings">get-backend-settings</a></h2>
<pre>
 get-backend-settings
</pre>
<div class="Pp"></div>
Return the current backend settings.
<div class="Pp"></div>
This call returns all backend settings strings. If you want to find a single
  backend setting, see &quot;get-backend-setting&quot;.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
  <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="get-cachedir"><a class="selflink" href="#get-cachedir">get-cachedir</a></h2>
<pre>
 get-cachedir
</pre>
<div class="Pp"></div>
Get the directory used by the handle to store the appliance cache.
<h2 class="Ss" title="Ss" id="get-direct"><a class="selflink" href="#get-direct">get-direct</a></h2>
<pre>
 get-direct
</pre>
<div class="Pp"></div>
Return the direct appliance mode flag.
<h2 class="Ss" title="Ss" id="get-e2attrs"><a class="selflink" href="#get-e2attrs">get-e2attrs</a></h2>
<pre>
 get-e2attrs file
</pre>
<div class="Pp"></div>
This returns the file attributes associated with <i>file</i>.
<div class="Pp"></div>
The attributes are a set of bits associated with each inode which affect the
  behaviour of the file. The attributes are returned as a string of letters
  (described below). The string may be empty, indicating that no file attributes
  are set for this file.
<div class="Pp"></div>
These attributes are only present when the file is located on an ext2/3/4
  filesystem. Using this call on other filesystem types will result in an error.
<div class="Pp"></div>
The characters (file attributes) in the returned string are currently:
<dl class="Bl-tag">
  <dt class="It-tag">'A'</dt>
  <dd class="It-tag">When the file is accessed, its atime is not modified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'a'</dt>
  <dd class="It-tag">The file is append-only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'c'</dt>
  <dd class="It-tag">The file is compressed on-disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'D'</dt>
  <dd class="It-tag">(Directories only.) Changes to this directory are written
      synchronously to disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'d'</dt>
  <dd class="It-tag">The file is not a candidate for backup (see
      <i>dump</i>(8)).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'E'</dt>
  <dd class="It-tag">The file has compression errors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'e'</dt>
  <dd class="It-tag">The file is using extents.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'h'</dt>
  <dd class="It-tag">The file is storing its blocks in units of the filesystem
      blocksize instead of sectors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'I'</dt>
  <dd class="It-tag">(Directories only.) The directory is using hashed
    trees.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'i'</dt>
  <dd class="It-tag">The file is immutable. It cannot be modified, deleted or
      renamed. No link can be created to this file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'j'</dt>
  <dd class="It-tag">The file is data-journaled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'s'</dt>
  <dd class="It-tag">When the file is deleted, all its blocks will be
    zeroed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'S'</dt>
  <dd class="It-tag">Changes to this file are written synchronously to
    disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'T'</dt>
  <dd class="It-tag">(Directories only.) This is a hint to the block allocator
      that subdirectories contained in this directory should be spread across
      blocks. If not present, the block allocator will try to group
      subdirectories together.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'t'</dt>
  <dd class="It-tag">For a file, this disables tail-merging. (Not used by
      upstream implementations of ext2.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'u'</dt>
  <dd class="It-tag">When the file is deleted, its blocks will be saved,
      allowing the file to be undeleted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'X'</dt>
  <dd class="It-tag">The raw contents of the compressed file may be
    accessed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'Z'</dt>
  <dd class="It-tag">The compressed file is dirty.</dd>
</dl>
<div class="Pp"></div>
More file attributes may be added to this list later. Not all file attributes
  may be set for all kinds of files. For detailed information, consult the
  <i>chattr</i>(1) man page.
<div class="Pp"></div>
See also &quot;set-e2attrs&quot;.
<div class="Pp"></div>
Don't confuse these attributes with extended attributes (see
  &quot;getxattr&quot;).
<h2 class="Ss" title="Ss" id="get-e2generation"><a class="selflink" href="#get-e2generation">get-e2generation</a></h2>
<pre>
 get-e2generation file
</pre>
<div class="Pp"></div>
This returns the ext2 file generation of a file. The generation (which used to
  be called the &quot;version&quot;) is a number associated with an inode. This
  is most commonly used by NFS servers.
<div class="Pp"></div>
The generation is only present when the file is located on an ext2/3/4
  filesystem. Using this call on other filesystem types will result in an error.
<div class="Pp"></div>
See &quot;set-e2generation&quot;.
<h2 class="Ss" title="Ss" id="get-e2label"><a class="selflink" href="#get-e2label">get-e2label</a></h2>
<pre>
 get-e2label device
</pre>
<div class="Pp"></div>
This returns the ext2/3/4 filesystem label of the filesystem on
  &quot;device&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;vfs-label&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="get-e2uuid"><a class="selflink" href="#get-e2uuid">get-e2uuid</a></h2>
<pre>
 get-e2uuid device
</pre>
<div class="Pp"></div>
This returns the ext2/3/4 filesystem UUID of the filesystem on
  &quot;device&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;vfs-uuid&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="get-hv"><a class="selflink" href="#get-hv">get-hv</a></h2>
<pre>
 get-hv
</pre>
<div class="Pp"></div>
Return the current hypervisor binary.
<div class="Pp"></div>
This is always non-NULL. If it wasn't set already, then this will return the
  default qemu binary name.
<h2 class="Ss" title="Ss" id="get-identifier"><a class="selflink" href="#get-identifier">get-identifier</a></h2>
<pre>
 get-identifier
</pre>
<div class="Pp"></div>
Get the handle identifier. See &quot;set-identifier&quot;.
<h2 class="Ss" title="Ss" id="get-libvirt-requested-credential-challenge"><a class="selflink" href="#get-libvirt-requested-credential-challenge">get-libvirt-requested-credential-challenge</a></h2>
<pre>
 get-libvirt-requested-credential-challenge index
</pre>
<div class="Pp"></div>
Get the challenge (provided by libvirt) for the &quot;index&quot;'th requested
  credential. If libvirt did not provide a challenge, this returns the empty
  string &quot;&quot;.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="get-libvirt-requested-credential-defresult"><a class="selflink" href="#get-libvirt-requested-credential-defresult">get-libvirt-requested-credential-defresult</a></h2>
<pre>
 get-libvirt-requested-credential-defresult index
</pre>
<div class="Pp"></div>
Get the default result (provided by libvirt) for the &quot;index&quot;'th
  requested credential. If libvirt did not provide a default result, this
  returns the empty string &quot;&quot;.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="get-libvirt-requested-credential-prompt"><a class="selflink" href="#get-libvirt-requested-credential-prompt">get-libvirt-requested-credential-prompt</a></h2>
<pre>
 get-libvirt-requested-credential-prompt index
</pre>
<div class="Pp"></div>
Get the prompt (provided by libvirt) for the &quot;index&quot;'th requested
  credential. If libvirt did not provide a prompt, this returns the empty string
  &quot;&quot;.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="get-libvirt-requested-credentials"><a class="selflink" href="#get-libvirt-requested-credentials">get-libvirt-requested-credentials</a></h2>
<pre>
 get-libvirt-requested-credentials
</pre>
<div class="Pp"></div>
This should only be called during the event callback for events of type
  &quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;.
<div class="Pp"></div>
Return the list of credentials requested by libvirt. Possible values are a
  subset of the strings provided when you called
  &quot;set-libvirt-supported-credentials&quot;.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="get-memsize"><a class="selflink" href="#get-memsize">get-memsize</a></h2>
<pre>
 get-memsize
</pre>
<div class="Pp"></div>
This gets the memory size in megabytes allocated to the hypervisor.
<div class="Pp"></div>
If &quot;set-memsize&quot; was not called on this handle, and if
  &quot;LIBGUESTFS_MEMSIZE&quot; was not set, then this returns the compiled-in
  default value for memsize.
<div class="Pp"></div>
For more information on the architecture of libguestfs, see <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="get-network"><a class="selflink" href="#get-network">get-network</a></h2>
<pre>
 get-network
</pre>
<div class="Pp"></div>
This returns the enable network flag.
<h2 class="Ss" title="Ss" id="get-path"><a class="selflink" href="#get-path">get-path</a></h2>
<pre>
 get-path
</pre>
<div class="Pp"></div>
Return the current search path.
<div class="Pp"></div>
This is always non-NULL. If it wasn't set already, then this will return the
  default path.
<h2 class="Ss" title="Ss" id="get-pgroup"><a class="selflink" href="#get-pgroup">get-pgroup</a></h2>
<pre>
 get-pgroup
</pre>
<div class="Pp"></div>
This returns the process group flag.
<h2 class="Ss" title="Ss" id="get-pid"><a class="selflink" href="#get-pid">get-pid</a></h2>
<h2 class="Ss" title="Ss" id="pid"><a class="selflink" href="#pid">pid</a></h2>
<pre>
 get-pid
</pre>
<div class="Pp"></div>
Return the process ID of the hypervisor. If there is no hypervisor running, then
  this will return an error.
<div class="Pp"></div>
This is an internal call used for debugging and testing.
<h2 class="Ss" title="Ss" id="get-program"><a class="selflink" href="#get-program">get-program</a></h2>
<pre>
 get-program
</pre>
<div class="Pp"></div>
Get the program name. See &quot;set-program&quot;.
<h2 class="Ss" title="Ss" id="get-qemu"><a class="selflink" href="#get-qemu">get-qemu</a></h2>
<pre>
 get-qemu
</pre>
<div class="Pp"></div>
Return the current hypervisor binary (usually qemu).
<div class="Pp"></div>
This is always non-NULL. If it wasn't set already, then this will return the
  default qemu binary name.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;get-hv&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="get-recovery-proc"><a class="selflink" href="#get-recovery-proc">get-recovery-proc</a></h2>
<pre>
 get-recovery-proc
</pre>
<div class="Pp"></div>
Return the recovery process enabled flag.
<h2 class="Ss" title="Ss" id="get-selinux"><a class="selflink" href="#get-selinux">get-selinux</a></h2>
<pre>
 get-selinux
</pre>
<div class="Pp"></div>
This returns the current setting of the selinux flag which is passed to the
  appliance at boot time. See &quot;set-selinux&quot;.
<div class="Pp"></div>
For more information on the architecture of libguestfs, see <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;selinux-relabel&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="get-smp"><a class="selflink" href="#get-smp">get-smp</a></h2>
<pre>
 get-smp
</pre>
<div class="Pp"></div>
This returns the number of virtual CPUs assigned to the appliance.
<h2 class="Ss" title="Ss" id="get-tmpdir"><a class="selflink" href="#get-tmpdir">get-tmpdir</a></h2>
<pre>
 get-tmpdir
</pre>
<div class="Pp"></div>
Get the directory used by the handle to store temporary files.
<h2 class="Ss" title="Ss" id="get-trace"><a class="selflink" href="#get-trace">get-trace</a></h2>
<pre>
 get-trace
</pre>
<div class="Pp"></div>
Return the command trace flag.
<h2 class="Ss" title="Ss" id="get-umask"><a class="selflink" href="#get-umask">get-umask</a></h2>
<pre>
 get-umask
</pre>
<div class="Pp"></div>
Return the current umask. By default the umask is 022 unless it has been set by
  calling &quot;umask&quot;.
<h2 class="Ss" title="Ss" id="get-verbose"><a class="selflink" href="#get-verbose">get-verbose</a></h2>
<pre>
 get-verbose
</pre>
<div class="Pp"></div>
This returns the verbose messages flag.
<h2 class="Ss" title="Ss" id="getcon"><a class="selflink" href="#getcon">getcon</a></h2>
<pre>
 getcon
</pre>
<div class="Pp"></div>
This gets the SELinux security context of the daemon.
<div class="Pp"></div>
See the documentation about SELINUX in <i>guestfs</i>(3), and &quot;setcon&quot;
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;selinux-relabel&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;selinux&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="getxattr"><a class="selflink" href="#getxattr">getxattr</a></h2>
<pre>
 getxattr path name
</pre>
<div class="Pp"></div>
Get a single extended attribute from file &quot;path&quot; named
  &quot;name&quot;. This call follows symlinks. If you want to lookup an
  extended attribute for the symlink itself, use &quot;lgetxattr&quot;.
<div class="Pp"></div>
Normally it is better to get all extended attributes from a file in one go by
  calling &quot;getxattrs&quot;. However some Linux filesystem implementations
  are buggy and do not provide a way to list out attributes. For these
  filesystems (notably ntfs-3g) you have to know the names of the extended
  attributes you want in advance and call this function.
<div class="Pp"></div>
Extended attribute values are blobs of binary data. If there is no extended
  attribute named &quot;name&quot;, this returns an error.
<div class="Pp"></div>
See also: &quot;getxattrs&quot;, &quot;lgetxattr&quot;, <i>attr</i>(5).
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="getxattrs"><a class="selflink" href="#getxattrs">getxattrs</a></h2>
<pre>
 getxattrs path
</pre>
<div class="Pp"></div>
This call lists the extended attributes of the file or directory
  &quot;path&quot;.
<div class="Pp"></div>
At the system call level, this is a combination of the <i>listxattr</i>(2) and
  <i>getxattr</i>(2) calls.
<div class="Pp"></div>
See also: &quot;lgetxattrs&quot;, <i>attr</i>(5).
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="glob-expand"><a class="selflink" href="#glob-expand">glob-expand</a></h2>
<h2 class="Ss" title="Ss" id="glob-expand-opts"><a class="selflink" href="#glob-expand-opts">glob-expand-opts</a></h2>
<pre>
 glob-expand pattern [directoryslash:true|false]
</pre>
<div class="Pp"></div>
This command searches for all the pathnames matching &quot;pattern&quot;
  according to the wildcard expansion rules used by the shell.
<div class="Pp"></div>
If no paths match, then this returns an empty list (note: not an error).
<div class="Pp"></div>
It is just a wrapper around the C <i>glob</i>(3) function with flags
  &quot;GLOB_MARK|GLOB_BRACE&quot;. See that manual page for more details.
<div class="Pp"></div>
&quot;directoryslash&quot; controls whether use the &quot;GLOB_MARK&quot; flag
  for <i>glob</i>(3), and it defaults to true. It can be explicitly set as off
  to return no trailing slashes in filenames of directories.
<div class="Pp"></div>
Notice that there is no equivalent command for expanding a device name (eg.
  <i>/dev/sd*</i>). Use &quot;list-devices&quot;, &quot;list-partitions&quot;
  etc functions instead.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="grep"><a class="selflink" href="#grep">grep</a></h2>
<h2 class="Ss" title="Ss" id="grep-opts"><a class="selflink" href="#grep-opts">grep-opts</a></h2>
<pre>
 grep regex path [extended:true|false] [fixed:true|false] [insensitive:true|false] [compressed:true|false]
</pre>
<div class="Pp"></div>
This calls the external &quot;grep&quot; program and returns the matching lines.
<div class="Pp"></div>
The optional flags are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;extended&quot;</dt>
  <dd class="It-tag">Use extended regular expressions. This is the same as using
      the <i>-E</i> flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;fixed&quot;</dt>
  <dd class="It-tag">Match fixed (don't use regular expressions). This is the
      same as using the <i>-F</i> flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;insensitive&quot;</dt>
  <dd class="It-tag">Match case-insensitive. This is the same as using the
      <i>-i</i> flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;compressed&quot;</dt>
  <dd class="It-tag">Use &quot;zgrep&quot; instead of &quot;grep&quot;. This
      allows the input to be compress- or gzip-compressed.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="grepi"><a class="selflink" href="#grepi">grepi</a></h2>
<pre>
 grepi regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;grep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="grub-install"><a class="selflink" href="#grub-install">grub-install</a></h2>
<pre>
 grub-install root device
</pre>
<div class="Pp"></div>
This command installs GRUB 1 (the Grand Unified Bootloader) on
  &quot;device&quot;, with the root directory being &quot;root&quot;.
<div class="Pp"></div>
Notes:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">There is currently no way in the API to install grub2,
      which is used by most modern Linux guests. It is possible to run the grub2
      command from the guest, although see the caveats in &quot;RUNNING
      COMMANDS&quot; in <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">This uses &quot;grub-install&quot; from the host.
      Unfortunately grub is not always compatible with itself, so this only
      works in rather narrow circumstances. Careful testing with each guest
      version is advisable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">If grub-install reports the error &quot;No suitable drive
      was found in the generated device map.&quot; it may be that you need to
      create a <i>/boot/grub/device.map</i> file first that contains the mapping
      between grub device names and Linux device names. It is usually sufficient
      to create a file containing:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 (hd0) /dev/vda
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    replacing <i>/dev/vda</i> with the name of the installation device.</dd>
</dl>
<div class="Pp"></div>
This command depends on the feature &quot;grub&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="head"><a class="selflink" href="#head">head</a></h2>
<pre>
 head path
</pre>
<div class="Pp"></div>
This command returns up to the first 10 lines of a file as a list of strings.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="head-n"><a class="selflink" href="#head-n">head-n</a></h2>
<pre>
 head-n nrlines path
</pre>
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is a positive number, this returns the
  first &quot;nrlines&quot; lines of the file &quot;path&quot;.
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is a negative number, this returns lines
  from the file &quot;path&quot;, excluding the last &quot;nrlines&quot; lines.
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is zero, this returns an empty list.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="hexdump"><a class="selflink" href="#hexdump">hexdump</a></h2>
<pre>
 hexdump path
</pre>
<div class="Pp"></div>
This runs &quot;hexdump -C&quot; on the given &quot;path&quot;. The result is
  the human-readable, canonical hex dump of the file.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="hivex-close"><a class="selflink" href="#hivex-close">hivex-close</a></h2>
<pre>
 hivex-close
</pre>
<div class="Pp"></div>
Close the current hivex handle.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-commit"><a class="selflink" href="#hivex-commit">hivex-commit</a></h2>
<pre>
 hivex-commit filename
</pre>
<div class="Pp"></div>
Commit (write) changes to the hive.
<div class="Pp"></div>
If the optional <i>filename</i> parameter is null, then the changes are written
  back to the same hive that was opened. If this is not null then they are
  written to the alternate filename given and the original hive is left
  untouched.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-add-child"><a class="selflink" href="#hivex-node-add-child">hivex-node-add-child</a></h2>
<pre>
 hivex-node-add-child parent name
</pre>
<div class="Pp"></div>
Add a child node to &quot;parent&quot; named &quot;name&quot;.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-children"><a class="selflink" href="#hivex-node-children">hivex-node-children</a></h2>
<pre>
 hivex-node-children nodeh
</pre>
<div class="Pp"></div>
Return the list of nodes which are subkeys of &quot;nodeh&quot;.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-delete-child"><a class="selflink" href="#hivex-node-delete-child">hivex-node-delete-child</a></h2>
<pre>
 hivex-node-delete-child nodeh
</pre>
<div class="Pp"></div>
Delete &quot;nodeh&quot;, recursively if necessary.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-get-child"><a class="selflink" href="#hivex-node-get-child">hivex-node-get-child</a></h2>
<pre>
 hivex-node-get-child nodeh name
</pre>
<div class="Pp"></div>
Return the child of &quot;nodeh&quot; with the name &quot;name&quot;, if it
  exists. This can return 0 meaning the name was not found.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-get-value"><a class="selflink" href="#hivex-node-get-value">hivex-node-get-value</a></h2>
<pre>
 hivex-node-get-value nodeh key
</pre>
<div class="Pp"></div>
Return the value attached to &quot;nodeh&quot; which has the name
  &quot;key&quot;, if it exists. This can return 0 meaning the key was not
  found.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-name"><a class="selflink" href="#hivex-node-name">hivex-node-name</a></h2>
<pre>
 hivex-node-name nodeh
</pre>
<div class="Pp"></div>
Return the name of &quot;nodeh&quot;.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-parent"><a class="selflink" href="#hivex-node-parent">hivex-node-parent</a></h2>
<pre>
 hivex-node-parent nodeh
</pre>
<div class="Pp"></div>
Return the parent node of &quot;nodeh&quot;.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-set-value"><a class="selflink" href="#hivex-node-set-value">hivex-node-set-value</a></h2>
<pre>
 hivex-node-set-value nodeh key t val
</pre>
<div class="Pp"></div>
Set or replace a single value under the node &quot;nodeh&quot;. The
  &quot;key&quot; is the name, &quot;t&quot; is the type, and &quot;val&quot; is
  the data.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-node-values"><a class="selflink" href="#hivex-node-values">hivex-node-values</a></h2>
<pre>
 hivex-node-values nodeh
</pre>
<div class="Pp"></div>
Return the array of (key, datatype, data) tuples attached to &quot;nodeh&quot;.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-open"><a class="selflink" href="#hivex-open">hivex-open</a></h2>
<pre>
 hivex-open filename [verbose:true|false] [debug:true|false] [write:true|false]
</pre>
<div class="Pp"></div>
Open the Windows Registry hive file named <i>filename</i>. If there was any
  previous hivex handle associated with this guestfs session, then it is closed.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-root"><a class="selflink" href="#hivex-root">hivex-root</a></h2>
<pre>
 hivex-root
</pre>
<div class="Pp"></div>
Return the root node of the hive.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-value-key"><a class="selflink" href="#hivex-value-key">hivex-value-key</a></h2>
<pre>
 hivex-value-key valueh
</pre>
<div class="Pp"></div>
Return the key (name) field of a (key, datatype, data) tuple.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-value-type"><a class="selflink" href="#hivex-value-type">hivex-value-type</a></h2>
<pre>
 hivex-value-type valueh
</pre>
<div class="Pp"></div>
Return the data type field from a (key, datatype, data) tuple.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-value-utf8"><a class="selflink" href="#hivex-value-utf8">hivex-value-utf8</a></h2>
<pre>
 hivex-value-utf8 valueh
</pre>
<div class="Pp"></div>
This calls &quot;hivex-value-value&quot; (which returns the data field from a
  hivex value tuple). It then assumes that the field is a UTF-16LE string and
  converts the result to UTF-8 (or if this is not possible, it returns an
  error).
<div class="Pp"></div>
This is useful for reading strings out of the Windows registry. However it is
  not foolproof because the registry is not strongly-typed and fields can
  contain arbitrary or unexpected data.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="hivex-value-value"><a class="selflink" href="#hivex-value-value">hivex-value-value</a></h2>
<pre>
 hivex-value-value valueh
</pre>
<div class="Pp"></div>
Return the data field of a (key, datatype, data) tuple.
<div class="Pp"></div>
This is a wrapper around the <i>hivex</i>(3) call of the same name.
<div class="Pp"></div>
See also: &quot;hivex-value-utf8&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;hivex&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="initrd-cat"><a class="selflink" href="#initrd-cat">initrd-cat</a></h2>
<pre>
 initrd-cat initrdpath filename
</pre>
<div class="Pp"></div>
This command unpacks the file <i>filename</i> from the initrd file called
  <i>initrdpath</i>. The filename must be given <i>without</i> the initial
  <i>/</i> character.
<div class="Pp"></div>
For example, in guestfish you could use the following command to examine the
  boot script (usually called <i>/init</i>) contained in a Linux initrd or
  initramfs image:
<div class="Pp"></div>
<pre>
 initrd-cat /boot/initrd-&lt;version&gt;.img init
</pre>
<div class="Pp"></div>
See also &quot;initrd-list&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="initrd-list"><a class="selflink" href="#initrd-list">initrd-list</a></h2>
<pre>
 initrd-list path
</pre>
<div class="Pp"></div>
This command lists out files contained in an initrd.
<div class="Pp"></div>
The files are listed without any initial <i>/</i> character. The files are
  listed in the order they appear (not necessarily alphabetical). Directory
  names are listed as separate items.
<div class="Pp"></div>
Old Linux kernels (2.4 and earlier) used a compressed ext2 filesystem as initrd.
  We <i>only</i> support the newer initramfs format (compressed cpio files).
<h2 class="Ss" title="Ss" id="inotify-add-watch"><a class="selflink" href="#inotify-add-watch">inotify-add-watch</a></h2>
<pre>
 inotify-add-watch path mask
</pre>
<div class="Pp"></div>
Watch &quot;path&quot; for the events listed in &quot;mask&quot;.
<div class="Pp"></div>
Note that if &quot;path&quot; is a directory then events within that directory
  are watched, but this does <i>not</i> happen recursively (in subdirectories).
<div class="Pp"></div>
Note for non-C or non-Linux callers: the inotify events are defined by the Linux
  kernel ABI and are listed in <i>/usr/include/sys/inotify.h</i>.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inotify-close"><a class="selflink" href="#inotify-close">inotify-close</a></h2>
<pre>
 inotify-close
</pre>
<div class="Pp"></div>
This closes the inotify handle which was previously opened by inotify_init. It
  removes all watches, throws away any pending events, and deallocates all
  resources.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inotify-files"><a class="selflink" href="#inotify-files">inotify-files</a></h2>
<pre>
 inotify-files
</pre>
<div class="Pp"></div>
This function is a helpful wrapper around &quot;inotify-read&quot; which just
  returns a list of pathnames of objects that were touched. The returned
  pathnames are sorted and deduplicated.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inotify-init"><a class="selflink" href="#inotify-init">inotify-init</a></h2>
<pre>
 inotify-init maxevents
</pre>
<div class="Pp"></div>
This command creates a new inotify handle. The inotify subsystem can be used to
  notify events which happen to objects in the guest filesystem.
<div class="Pp"></div>
&quot;maxevents&quot; is the maximum number of events which will be queued up
  between calls to &quot;inotify-read&quot; or &quot;inotify-files&quot;. If
  this is passed as 0, then the kernel (or previously set) default is used. For
  Linux 2.6.29 the default was 16384 events. Beyond this limit, the kernel
  throws away events, but records the fact that it threw them away by setting a
  flag &quot;IN_Q_OVERFLOW&quot; in the returned structure list (see
  &quot;inotify-read&quot;).
<div class="Pp"></div>
Before any events are generated, you have to add some watches to the internal
  watch list. See: &quot;inotify-add-watch&quot; and
  &quot;inotify-rm-watch&quot;.
<div class="Pp"></div>
Queued up events should be read periodically by calling &quot;inotify-read&quot;
  (or &quot;inotify-files&quot; which is just a helpful wrapper around
  &quot;inotify-read&quot;). If you don't read the events out often enough then
  you risk the internal queue overflowing.
<div class="Pp"></div>
The handle should be closed after use by calling &quot;inotify-close&quot;. This
  also removes any watches automatically.
<div class="Pp"></div>
See also <i>inotify</i>(7) for an overview of the inotify interface as exposed
  by the Linux kernel, which is roughly what we expose via libguestfs. Note that
  there is one global inotify handle per libguestfs instance.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inotify-read"><a class="selflink" href="#inotify-read">inotify-read</a></h2>
<pre>
 inotify-read
</pre>
<div class="Pp"></div>
Return the complete queue of events that have happened since the previous read
  call.
<div class="Pp"></div>
If no events have happened, this returns an empty list.
<div class="Pp"></div>
<i>Note</i>: In order to make sure that all events have been read, you must call
  this function repeatedly until it returns an empty list. The reason is that
  the call will read events up to the maximum appliance-to-host message size and
  leave remaining events in the queue.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inotify-rm-watch"><a class="selflink" href="#inotify-rm-watch">inotify-rm-watch</a></h2>
<pre>
 inotify-rm-watch wd
</pre>
<div class="Pp"></div>
Remove a previously defined inotify watch. See &quot;inotify-add-watch&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;inotify&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-arch"><a class="selflink" href="#inspect-get-arch">inspect-get-arch</a></h2>
<pre>
 inspect-get-arch root
</pre>
<div class="Pp"></div>
This returns the architecture of the inspected operating system. The possible
  return values are listed under &quot;file-architecture&quot;.
<div class="Pp"></div>
If the architecture could not be determined, then the string &quot;unknown&quot;
  is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-distro"><a class="selflink" href="#inspect-get-distro">inspect-get-distro</a></h2>
<pre>
 inspect-get-distro root
</pre>
<div class="Pp"></div>
This returns the distro (distribution) of the inspected operating system.
<div class="Pp"></div>
Currently defined distros are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;alpinelinux&quot;</dt>
  <dd class="It-tag">Alpine Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;altlinux&quot;</dt>
  <dd class="It-tag">ALT Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;archlinux&quot;</dt>
  <dd class="It-tag">Arch Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;buildroot&quot;</dt>
  <dd class="It-tag">Buildroot-derived distro, but not one we specifically
      recognize.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;centos&quot;</dt>
  <dd class="It-tag">CentOS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;cirros&quot;</dt>
  <dd class="It-tag">Cirros.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;coreos&quot;</dt>
  <dd class="It-tag">CoreOS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;debian&quot;</dt>
  <dd class="It-tag">Debian.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;fedora&quot;</dt>
  <dd class="It-tag">Fedora.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;freebsd&quot;</dt>
  <dd class="It-tag">FreeBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;freedos&quot;</dt>
  <dd class="It-tag">FreeDOS.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;frugalware&quot;</dt>
  <dd class="It-tag">Frugalware.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;gentoo&quot;</dt>
  <dd class="It-tag">Gentoo.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;linuxmint&quot;</dt>
  <dd class="It-tag">Linux Mint.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mageia&quot;</dt>
  <dd class="It-tag">Mageia.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mandriva&quot;</dt>
  <dd class="It-tag">Mandriva.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;meego&quot;</dt>
  <dd class="It-tag">MeeGo.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;netbsd&quot;</dt>
  <dd class="It-tag">NetBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;openbsd&quot;</dt>
  <dd class="It-tag">OpenBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;opensuse&quot;</dt>
  <dd class="It-tag">OpenSUSE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;oraclelinux&quot;</dt>
  <dd class="It-tag">Oracle Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;pardus&quot;</dt>
  <dd class="It-tag">Pardus.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;pldlinux&quot;</dt>
  <dd class="It-tag">PLD Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;redhat-based&quot;</dt>
  <dd class="It-tag">Some Red Hat-derived distro.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;rhel&quot;</dt>
  <dd class="It-tag">Red Hat Enterprise Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;scientificlinux&quot;</dt>
  <dd class="It-tag">Scientific Linux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;slackware&quot;</dt>
  <dd class="It-tag">Slackware.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sles&quot;</dt>
  <dd class="It-tag">SuSE Linux Enterprise Server or Desktop.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;suse-based&quot;</dt>
  <dd class="It-tag">Some openSuSE-derived distro.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ttylinux&quot;</dt>
  <dd class="It-tag">ttylinux.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ubuntu&quot;</dt>
  <dd class="It-tag">Ubuntu.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;unknown&quot;</dt>
  <dd class="It-tag">The distro could not be determined.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;windows&quot;</dt>
  <dd class="It-tag">Windows does not have distributions. This string is
      returned if the OS type is Windows.</dd>
</dl>
<div class="Pp"></div>
Future versions of libguestfs may return other strings here. The caller should
  be prepared to handle any string.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-drive-mappings"><a class="selflink" href="#inspect-get-drive-mappings">inspect-get-drive-mappings</a></h2>
<pre>
 inspect-get-drive-mappings root
</pre>
<div class="Pp"></div>
This call is useful for Windows which uses a primitive system of assigning drive
  letters (like <i>C:\</i>) to partitions. This inspection API examines the
  Windows Registry to find out how disks/partitions are mapped to drive letters,
  and returns a hash table as in the example below:
<div class="Pp"></div>
<pre>
 C      =&gt;     /dev/vda2
 E      =&gt;     /dev/vdb1
 F      =&gt;     /dev/vdc1
</pre>
<div class="Pp"></div>
Note that keys are drive letters. For Windows, the key is case insensitive and
  just contains the drive letter, without the customary colon separator
  character.
<div class="Pp"></div>
In future we may support other operating systems that also used drive letters,
  but the keys for those might not be case insensitive and might be longer than
  1 character. For example in OS-9, hard drives were named &quot;h0&quot;,
  &quot;h1&quot; etc.
<div class="Pp"></div>
For Windows guests, currently only hard drive mappings are returned. Removable
  disks (eg. DVD-ROMs) are ignored.
<div class="Pp"></div>
For guests that do not use drive mappings, or if the drive mappings could not be
  determined, this returns an empty hash table.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details. See
  also &quot;inspect-get-mountpoints&quot;, &quot;inspect-get-filesystems&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-filesystems"><a class="selflink" href="#inspect-get-filesystems">inspect-get-filesystems</a></h2>
<pre>
 inspect-get-filesystems root
</pre>
<div class="Pp"></div>
This returns a list of all the filesystems that we think are associated with
  this operating system. This includes the root filesystem, other ordinary
  filesystems, and non-mounted devices like swap partitions.
<div class="Pp"></div>
In the case of a multi-boot virtual machine, it is possible for a filesystem to
  be shared between operating systems.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details. See
  also &quot;inspect-get-mountpoints&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-format"><a class="selflink" href="#inspect-get-format">inspect-get-format</a></h2>
<pre>
 inspect-get-format root
</pre>
<div class="Pp"></div>
This returns the format of the inspected operating system. You can use it to
  detect install images, live CDs and similar.
<div class="Pp"></div>
Currently defined formats are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;installed&quot;</dt>
  <dd class="It-tag">This is an installed operating system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;installer&quot;</dt>
  <dd class="It-tag">The disk image being inspected is not an installed
      operating system, but a <i>bootable</i> install disk, live CD, or
    similar.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;unknown&quot;</dt>
  <dd class="It-tag">The format of this disk image is not known.</dd>
</dl>
<div class="Pp"></div>
Future versions of libguestfs may return other strings here. The caller should
  be prepared to handle any string.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-hostname"><a class="selflink" href="#inspect-get-hostname">inspect-get-hostname</a></h2>
<pre>
 inspect-get-hostname root
</pre>
<div class="Pp"></div>
This function returns the hostname of the operating system as found by
  inspection of the guest's configuration files.
<div class="Pp"></div>
If the hostname could not be determined, then the string &quot;unknown&quot; is
  returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-icon"><a class="selflink" href="#inspect-get-icon">inspect-get-icon</a></h2>
<pre>
 inspect-get-icon root [favicon:true|false] [highquality:true|false]
</pre>
<div class="Pp"></div>
This function returns an icon corresponding to the inspected operating system.
  The icon is returned as a buffer containing a PNG image (re-encoded to PNG if
  necessary).
<div class="Pp"></div>
If it was not possible to get an icon this function returns a zero-length
  (non-NULL) buffer. <i>Callers must check for this case</i>.
<div class="Pp"></div>
Libguestfs will start by looking for a file called <i>/etc/favicon.png</i> or
  <i>C:\etc\favicon.png</i> and if it has the correct format, the contents of
  this file will be returned. You can disable favicons by passing the optional
  &quot;favicon&quot; boolean as false (default is true).
<div class="Pp"></div>
If finding the favicon fails, then we look in other places in the guest for a
  suitable icon.
<div class="Pp"></div>
If the optional &quot;highquality&quot; boolean is true then only high quality
  icons are returned, which means only icons of high resolution with an alpha
  channel. The default (false) is to return any icon we can, even if it is of
  substandard quality.
<div class="Pp"></div>
Notes:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Unlike most other inspection API calls, the guest's disks
      must be mounted up before you call this, since it needs to read
      information from the guest filesystem during the call.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Security:</b> The icon data comes from the untrusted
      guest, and should be treated with caution. PNG files have been known to
      contain exploits. Ensure that libpng (or other relevant libraries) are
      fully up to date before trying to process or display the icon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The PNG image returned can be any size. It might not be
      square. Libguestfs tries to return the largest, highest quality icon
      available. The application must scale the icon to the required size.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Extracting icons from Windows guests requires the external
      &quot;wrestool&quot; program from the &quot;icoutils&quot; package, and
      several programs (&quot;bmptopnm&quot;, &quot;pnmtopng&quot;,
      &quot;pamcut&quot;) from the &quot;netpbm&quot; package. These must be
      installed separately.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Operating system icons are usually trademarks. Seek legal
      advice before using trademarks in applications.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-major-version"><a class="selflink" href="#inspect-get-major-version">inspect-get-major-version</a></h2>
<pre>
 inspect-get-major-version root
</pre>
<div class="Pp"></div>
This returns the major version number of the inspected operating system.
<div class="Pp"></div>
Windows uses a consistent versioning scheme which is <i>not</i> reflected in the
  popular public names used by the operating system. Notably the operating
  system known as &quot;Windows 7&quot; is really version 6.1 (ie. major = 6,
  minor = 1). You can find out the real versions corresponding to releases of
  Windows by consulting Wikipedia or MSDN.
<div class="Pp"></div>
If the version could not be determined, then 0 is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-minor-version"><a class="selflink" href="#inspect-get-minor-version">inspect-get-minor-version</a></h2>
<pre>
 inspect-get-minor-version root
</pre>
<div class="Pp"></div>
This returns the minor version number of the inspected operating system.
<div class="Pp"></div>
If the version could not be determined, then 0 is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details. See
  also &quot;inspect-get-major-version&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-mountpoints"><a class="selflink" href="#inspect-get-mountpoints">inspect-get-mountpoints</a></h2>
<pre>
 inspect-get-mountpoints root
</pre>
<div class="Pp"></div>
This returns a hash of where we think the filesystems associated with this
  operating system should be mounted. Callers should note that this is at best
  an educated guess made by reading configuration files such as
  <i>/etc/fstab</i>. <i>In particular note</i> that this may return filesystems
  which are non-existent or not mountable and callers should be prepared to
  handle or ignore failures if they try to mount them.
<div class="Pp"></div>
Each element in the returned hashtable has a key which is the path of the
  mountpoint (eg. <i>/boot</i>) and a value which is the filesystem that would
  be mounted there (eg. <i>/dev/sda1</i>).
<div class="Pp"></div>
Non-mounted devices such as swap devices are <i>not</i> returned in this list.
<div class="Pp"></div>
For operating systems like Windows which still use drive letters, this call will
  only return an entry for the first drive &quot;mounted on&quot; <i>/</i>. For
  information about the mapping of drive letters to partitions, see
  &quot;inspect-get-drive-mappings&quot;.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details. See
  also &quot;inspect-get-filesystems&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-package-format"><a class="selflink" href="#inspect-get-package-format">inspect-get-package-format</a></h2>
<pre>
 inspect-get-package-format root
</pre>
<div class="Pp"></div>
This function and &quot;inspect-get-package-management&quot; return the package
  format and package management tool used by the inspected operating system. For
  example for Fedora these functions would return &quot;rpm&quot; (package
  format), and &quot;yum&quot; or &quot;dnf&quot; (package management).
<div class="Pp"></div>
This returns the string &quot;unknown&quot; if we could not determine the
  package format <i>or</i> if the operating system does not have a real
  packaging system (eg. Windows).
<div class="Pp"></div>
Possible strings include: &quot;rpm&quot;, &quot;deb&quot;, &quot;ebuild&quot;,
  &quot;pisi&quot;, &quot;pacman&quot;, &quot;pkgsrc&quot;, &quot;apk&quot;.
  Future versions of libguestfs may return other strings.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-package-management"><a class="selflink" href="#inspect-get-package-management">inspect-get-package-management</a></h2>
<pre>
 inspect-get-package-management root
</pre>
<div class="Pp"></div>
&quot;inspect-get-package-format&quot; and this function return the package
  format and package management tool used by the inspected operating system. For
  example for Fedora these functions would return &quot;rpm&quot; (package
  format), and &quot;yum&quot; or &quot;dnf&quot; (package management).
<div class="Pp"></div>
This returns the string &quot;unknown&quot; if we could not determine the
  package management tool <i>or</i> if the operating system does not have a real
  packaging system (eg. Windows).
<div class="Pp"></div>
Possible strings include: &quot;yum&quot;, &quot;dnf&quot;, &quot;up2date&quot;,
  &quot;apt&quot; (for all Debian derivatives), &quot;portage&quot;,
  &quot;pisi&quot;, &quot;pacman&quot;, &quot;urpmi&quot;, &quot;zypper&quot;,
  &quot;apk&quot;. Future versions of libguestfs may return other strings.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-product-name"><a class="selflink" href="#inspect-get-product-name">inspect-get-product-name</a></h2>
<pre>
 inspect-get-product-name root
</pre>
<div class="Pp"></div>
This returns the product name of the inspected operating system. The product
  name is generally some freeform string which can be displayed to the user, but
  should not be parsed by programs.
<div class="Pp"></div>
If the product name could not be determined, then the string &quot;unknown&quot;
  is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-product-variant"><a class="selflink" href="#inspect-get-product-variant">inspect-get-product-variant</a></h2>
<pre>
 inspect-get-product-variant root
</pre>
<div class="Pp"></div>
This returns the product variant of the inspected operating system.
<div class="Pp"></div>
For Windows guests, this returns the contents of the Registry key
  &quot;HKLM\Software\Microsoft\Windows NT\CurrentVersion&quot;
  &quot;InstallationType&quot; which is usually a string such as
  &quot;Client&quot; or &quot;Server&quot; (other values are possible). This can
  be used to distinguish consumer and enterprise versions of Windows that have
  the same version number (for example, Windows 7 and Windows 2008 Server are
  both version 6.1, but the former is &quot;Client&quot; and the latter is
  &quot;Server&quot;).
<div class="Pp"></div>
For enterprise Linux guests, in future we intend this to return the product
  variant such as &quot;Desktop&quot;, &quot;Server&quot; and so on. But this is
  not implemented at present.
<div class="Pp"></div>
If the product variant could not be determined, then the string
  &quot;unknown&quot; is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details. See
  also &quot;inspect-get-product-name&quot;,
  &quot;inspect-get-major-version&quot;.
<h2 class="Ss" title="Ss" id="inspect-get-roots"><a class="selflink" href="#inspect-get-roots">inspect-get-roots</a></h2>
<pre>
 inspect-get-roots
</pre>
<div class="Pp"></div>
This function is a convenient way to get the list of root devices, as returned
  from a previous call to &quot;inspect-os&quot;, but without redoing the whole
  inspection process.
<div class="Pp"></div>
This returns an empty list if either no root devices were found or the caller
  has not called &quot;inspect-os&quot;.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-type"><a class="selflink" href="#inspect-get-type">inspect-get-type</a></h2>
<pre>
 inspect-get-type root
</pre>
<div class="Pp"></div>
This returns the type of the inspected operating system. Currently defined types
  are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;linux&quot;</dt>
  <dd class="It-tag">Any Linux-based operating system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;windows&quot;</dt>
  <dd class="It-tag">Any Microsoft Windows operating system.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;freebsd&quot;</dt>
  <dd class="It-tag">FreeBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;netbsd&quot;</dt>
  <dd class="It-tag">NetBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;openbsd&quot;</dt>
  <dd class="It-tag">OpenBSD.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;hurd&quot;</dt>
  <dd class="It-tag">GNU/Hurd.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;dos&quot;</dt>
  <dd class="It-tag">MS-DOS, FreeDOS and others.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;minix&quot;</dt>
  <dd class="It-tag">MINIX.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;unknown&quot;</dt>
  <dd class="It-tag">The operating system type could not be determined.</dd>
</dl>
<div class="Pp"></div>
Future versions of libguestfs may return other strings here. The caller should
  be prepared to handle any string.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-windows-current-control-set"><a class="selflink" href="#inspect-get-windows-current-control-set">inspect-get-windows-current-control-set</a></h2>
<pre>
 inspect-get-windows-current-control-set root
</pre>
<div class="Pp"></div>
This returns the Windows CurrentControlSet of the inspected guest. The
  CurrentControlSet is a registry key name such as &quot;ControlSet001&quot;.
<div class="Pp"></div>
This call assumes that the guest is Windows and that the Registry could be
  examined by inspection. If this is not the case then an error is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-get-windows-systemroot"><a class="selflink" href="#inspect-get-windows-systemroot">inspect-get-windows-systemroot</a></h2>
<pre>
 inspect-get-windows-systemroot root
</pre>
<div class="Pp"></div>
This returns the Windows systemroot of the inspected guest. The systemroot is a
  directory path such as <i>/WINDOWS</i>.
<div class="Pp"></div>
This call assumes that the guest is Windows and that the systemroot could be
  determined by inspection. If this is not the case then an error is returned.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-is-live"><a class="selflink" href="#inspect-is-live">inspect-is-live</a></h2>
<pre>
 inspect-is-live root
</pre>
<div class="Pp"></div>
If &quot;inspect-get-format&quot; returns &quot;installer&quot; (this is an
  install disk), then this returns true if a live image was detected on the
  disk.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-is-multipart"><a class="selflink" href="#inspect-is-multipart">inspect-is-multipart</a></h2>
<pre>
 inspect-is-multipart root
</pre>
<div class="Pp"></div>
If &quot;inspect-get-format&quot; returns &quot;installer&quot; (this is an
  install disk), then this returns true if the disk is part of a set.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-is-netinst"><a class="selflink" href="#inspect-is-netinst">inspect-is-netinst</a></h2>
<pre>
 inspect-is-netinst root
</pre>
<div class="Pp"></div>
If &quot;inspect-get-format&quot; returns &quot;installer&quot; (this is an
  install disk), then this returns true if the disk is a network installer, ie.
  not a self-contained install CD but one which is likely to require network
  access to complete the install.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-list-applications"><a class="selflink" href="#inspect-list-applications">inspect-list-applications</a></h2>
<pre>
 inspect-list-applications root
</pre>
<div class="Pp"></div>
Return the list of applications installed in the operating system.
<div class="Pp"></div>
<i>Note:</i> This call works differently from other parts of the inspection API.
  You have to call &quot;inspect-os&quot;, then
  &quot;inspect-get-mountpoints&quot;, then mount up the disks, before calling
  this. Listing applications is a significantly more difficult operation which
  requires access to the full filesystem. Also note that unlike the other
  &quot;inspect-get-*&quot; calls which are just returning data cached in the
  libguestfs handle, this call actually reads parts of the mounted filesystems
  during the call.
<div class="Pp"></div>
This returns an empty list if the inspection code was not able to determine the
  list of applications.
<div class="Pp"></div>
The application structure contains the following fields:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_name&quot;</dt>
  <dd class="It-tag">The name of the application. For Red Hat-derived and
      Debian-derived Linux guests, this is the package name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_display_name&quot;</dt>
  <dd class="It-tag">The display name of the application, sometimes localized to
      the install language of the guest operating system.
    <div style="height: 1.00em;">&#x00A0;</div>
    If unavailable this is returned as an empty string &quot;&quot;. Callers
      needing to display something can use &quot;app_name&quot; instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_epoch&quot;</dt>
  <dd class="It-tag">For package managers which use epochs, this contains the
      epoch of the package (an integer). If unavailable, this is returned as
    0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_version&quot;</dt>
  <dd class="It-tag">The version string of the application or package. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_release&quot;</dt>
  <dd class="It-tag">The release string of the application or package, for
      package managers that use this. If unavailable this is returned as an
      empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_install_path&quot;</dt>
  <dd class="It-tag">The installation path of the application (on operating
      systems such as Windows which use installation paths). This path is in the
      format used by the guest operating system, it is not a libguestfs path.
    <div style="height: 1.00em;">&#x00A0;</div>
    If unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_trans_path&quot;</dt>
  <dd class="It-tag">The install path translated into a libguestfs path. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_publisher&quot;</dt>
  <dd class="It-tag">The name of the publisher of the application, for package
      managers that use this. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_url&quot;</dt>
  <dd class="It-tag">The URL (eg. upstream URL) of the application. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_source_package&quot;</dt>
  <dd class="It-tag">For packaging systems which support this, the name of the
      source package. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_summary&quot;</dt>
  <dd class="It-tag">A short (usually one line) description of the application
      or package. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app_description&quot;</dt>
  <dd class="It-tag">A longer description of the application or package. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;inspect-list-applications2&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="inspect-list-applications2"><a class="selflink" href="#inspect-list-applications2">inspect-list-applications2</a></h2>
<pre>
 inspect-list-applications2 root
</pre>
<div class="Pp"></div>
Return the list of applications installed in the operating system.
<div class="Pp"></div>
<i>Note:</i> This call works differently from other parts of the inspection API.
  You have to call &quot;inspect-os&quot;, then
  &quot;inspect-get-mountpoints&quot;, then mount up the disks, before calling
  this. Listing applications is a significantly more difficult operation which
  requires access to the full filesystem. Also note that unlike the other
  &quot;inspect-get-*&quot; calls which are just returning data cached in the
  libguestfs handle, this call actually reads parts of the mounted filesystems
  during the call.
<div class="Pp"></div>
This returns an empty list if the inspection code was not able to determine the
  list of applications.
<div class="Pp"></div>
The application structure contains the following fields:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_name&quot;</dt>
  <dd class="It-tag">The name of the application. For Red Hat-derived and
      Debian-derived Linux guests, this is the package name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_display_name&quot;</dt>
  <dd class="It-tag">The display name of the application, sometimes localized to
      the install language of the guest operating system.
    <div style="height: 1.00em;">&#x00A0;</div>
    If unavailable this is returned as an empty string &quot;&quot;. Callers
      needing to display something can use &quot;app2_name&quot; instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_epoch&quot;</dt>
  <dd class="It-tag">For package managers which use epochs, this contains the
      epoch of the package (an integer). If unavailable, this is returned as
    0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_version&quot;</dt>
  <dd class="It-tag">The version string of the application or package. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_release&quot;</dt>
  <dd class="It-tag">The release string of the application or package, for
      package managers that use this. If unavailable this is returned as an
      empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_arch&quot;</dt>
  <dd class="It-tag">The architecture string of the application or package, for
      package managers that use this. If unavailable this is returned as an
      empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_install_path&quot;</dt>
  <dd class="It-tag">The installation path of the application (on operating
      systems such as Windows which use installation paths). This path is in the
      format used by the guest operating system, it is not a libguestfs path.
    <div style="height: 1.00em;">&#x00A0;</div>
    If unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_trans_path&quot;</dt>
  <dd class="It-tag">The install path translated into a libguestfs path. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_publisher&quot;</dt>
  <dd class="It-tag">The name of the publisher of the application, for package
      managers that use this. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_url&quot;</dt>
  <dd class="It-tag">The URL (eg. upstream URL) of the application. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_source_package&quot;</dt>
  <dd class="It-tag">For packaging systems which support this, the name of the
      source package. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_summary&quot;</dt>
  <dd class="It-tag">A short (usually one line) description of the application
      or package. If unavailable this is returned as an empty string
      &quot;&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;app2_description&quot;</dt>
  <dd class="It-tag">A longer description of the application or package. If
      unavailable this is returned as an empty string &quot;&quot;.</dd>
</dl>
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<h2 class="Ss" title="Ss" id="inspect-os"><a class="selflink" href="#inspect-os">inspect-os</a></h2>
<pre>
 inspect-os
</pre>
<div class="Pp"></div>
This function uses other libguestfs functions and certain heuristics to inspect
  the disk(s) (usually disks belonging to a virtual machine), looking for
  operating systems.
<div class="Pp"></div>
The list returned is empty if no operating systems were found.
<div class="Pp"></div>
If one operating system was found, then this returns a list with a single
  element, which is the name of the root filesystem of this operating system. It
  is also possible for this function to return a list containing more than one
  element, indicating a dual-boot or multi-boot virtual machine, with each
  element being the root filesystem of one of the operating systems.
<div class="Pp"></div>
You can pass the root string(s) returned to other &quot;inspect-get-*&quot;
  functions in order to query further information about each operating system,
  such as the name and version.
<div class="Pp"></div>
This function uses other libguestfs features such as &quot;mount-ro&quot; and
  &quot;umount-all&quot; in order to mount and unmount filesystems and look at
  the contents. This should be called with no disks currently mounted. The
  function may also use Augeas, so any existing Augeas handle will be closed.
<div class="Pp"></div>
This function cannot decrypt encrypted disks. The caller must do that first
  (supplying the necessary keys) if the disk is encrypted.
<div class="Pp"></div>
Please read &quot;INSPECTION&quot; in <i>guestfs</i>(3) for more details.
<div class="Pp"></div>
See also &quot;list-filesystems&quot;.
<h2 class="Ss" title="Ss" id="is-blockdev"><a class="selflink" href="#is-blockdev">is-blockdev</a></h2>
<h2 class="Ss" title="Ss" id="is-blockdev-opts"><a class="selflink" href="#is-blockdev-opts">is-blockdev-opts</a></h2>
<pre>
 is-blockdev path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a block device with the
  given &quot;path&quot; name.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a block device also causes the function to
  return true.
<div class="Pp"></div>
This call only looks at files within the guest filesystem. Libguestfs partitions
  and block devices (eg. <i>/dev/sda</i>) cannot be used as the &quot;path&quot;
  parameter of this call.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-chardev"><a class="selflink" href="#is-chardev">is-chardev</a></h2>
<h2 class="Ss" title="Ss" id="is-chardev-opts"><a class="selflink" href="#is-chardev-opts">is-chardev-opts</a></h2>
<pre>
 is-chardev path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a character device with
  the given &quot;path&quot; name.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a chardev also causes the function to return
  true.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-config"><a class="selflink" href="#is-config">is-config</a></h2>
<pre>
 is-config
</pre>
<div class="Pp"></div>
This returns true iff this handle is being configured (in the &quot;CONFIG&quot;
  state).
<div class="Pp"></div>
For more information on states, see <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="is-dir"><a class="selflink" href="#is-dir">is-dir</a></h2>
<h2 class="Ss" title="Ss" id="is-dir-opts"><a class="selflink" href="#is-dir-opts">is-dir-opts</a></h2>
<pre>
 is-dir path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a directory with the given
  &quot;path&quot; name. Note that it returns false for other objects like
  files.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a directory also causes the function to
  return true.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-fifo"><a class="selflink" href="#is-fifo">is-fifo</a></h2>
<h2 class="Ss" title="Ss" id="is-fifo-opts"><a class="selflink" href="#is-fifo-opts">is-fifo-opts</a></h2>
<pre>
 is-fifo path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a FIFO (named pipe) with
  the given &quot;path&quot; name.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a FIFO also causes the function to return
  true.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-file"><a class="selflink" href="#is-file">is-file</a></h2>
<h2 class="Ss" title="Ss" id="is-file-opts"><a class="selflink" href="#is-file-opts">is-file-opts</a></h2>
<pre>
 is-file path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a regular file with the
  given &quot;path&quot; name. Note that it returns false for other objects like
  directories.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a file also causes the function to return
  true.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-lv"><a class="selflink" href="#is-lv">is-lv</a></h2>
<pre>
 is-lv device
</pre>
<div class="Pp"></div>
This command tests whether &quot;device&quot; is a logical volume, and returns
  true iff this is the case.
<h2 class="Ss" title="Ss" id="is-socket"><a class="selflink" href="#is-socket">is-socket</a></h2>
<h2 class="Ss" title="Ss" id="is-socket-opts"><a class="selflink" href="#is-socket-opts">is-socket-opts</a></h2>
<pre>
 is-socket path [followsymlinks:true|false]
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a Unix domain socket with
  the given &quot;path&quot; name.
<div class="Pp"></div>
If the optional flag &quot;followsymlinks&quot; is true, then a symlink (or
  chain of symlinks) that ends with a socket also causes the function to return
  true.
<div class="Pp"></div>
See also &quot;stat&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="is-symlink"><a class="selflink" href="#is-symlink">is-symlink</a></h2>
<pre>
 is-symlink path
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if there is a symbolic link with the
  given &quot;path&quot; name.
<div class="Pp"></div>
See also &quot;stat&quot;.
<h2 class="Ss" title="Ss" id="is-whole-device"><a class="selflink" href="#is-whole-device">is-whole-device</a></h2>
<pre>
 is-whole-device device
</pre>
<div class="Pp"></div>
This returns &quot;true&quot; if and only if &quot;device&quot; refers to a
  whole block device. That is, not a partition or a logical device.
<h2 class="Ss" title="Ss" id="is-zero"><a class="selflink" href="#is-zero">is-zero</a></h2>
<pre>
 is-zero path
</pre>
<div class="Pp"></div>
This returns true iff the file exists and the file is empty or it contains all
  zero bytes.
<h2 class="Ss" title="Ss" id="is-zero-device"><a class="selflink" href="#is-zero-device">is-zero-device</a></h2>
<pre>
 is-zero-device device
</pre>
<div class="Pp"></div>
This returns true iff the device exists and contains all zero bytes.
<div class="Pp"></div>
Note that for large devices this can take a long time to run.
<h2 class="Ss" title="Ss" id="isoinfo"><a class="selflink" href="#isoinfo">isoinfo</a></h2>
<pre>
 isoinfo isofile
</pre>
<div class="Pp"></div>
This is the same as &quot;isoinfo-device&quot; except that it works for an ISO
  file located inside some other mounted filesystem. Note that in the common
  case where you have added an ISO file as a libguestfs device, you would
  <i>not</i> call this. Instead you would call &quot;isoinfo-device&quot;.
<h2 class="Ss" title="Ss" id="isoinfo-device"><a class="selflink" href="#isoinfo-device">isoinfo-device</a></h2>
<pre>
 isoinfo-device device
</pre>
<div class="Pp"></div>
&quot;device&quot; is an ISO device. This returns a struct of information read
  from the primary volume descriptor (the ISO equivalent of the superblock) of
  the device.
<div class="Pp"></div>
Usually it is more efficient to use the <i>isoinfo</i>(1) command with the
  <i>-d</i> option on the host to analyze ISO files, instead of going through
  libguestfs.
<div class="Pp"></div>
For information on the primary volume descriptor fields, see
  http://wiki.osdev.org/ISO_9660#The_Primary_Volume_Descriptor
<h2 class="Ss" title="Ss" id="journal-close"><a class="selflink" href="#journal-close">journal-close</a></h2>
<pre>
 journal-close
</pre>
<div class="Pp"></div>
Close the journal handle.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-get"><a class="selflink" href="#journal-get">journal-get</a></h2>
<pre>
 journal-get
</pre>
<div class="Pp"></div>
Read the current journal entry. This returns all the fields in the journal as a
  set of &quot;(attrname, attrval)&quot; pairs. The &quot;attrname&quot; is the
  field name (a string).
<div class="Pp"></div>
The &quot;attrval&quot; is the field value (a binary blob, often but not always
  a string). Please note that &quot;attrval&quot; is a byte array, <i>not</i> a
  \0-terminated C string.
<div class="Pp"></div>
The length of data may be truncated to the data threshold (see:
  &quot;journal-set-data-threshold&quot;,
  &quot;journal-get-data-threshold&quot;).
<div class="Pp"></div>
If you set the data threshold to unlimited (0) then this call can read a journal
  entry of any size, ie. it is not limited by the libguestfs protocol.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-get-data-threshold"><a class="selflink" href="#journal-get-data-threshold">journal-get-data-threshold</a></h2>
<pre>
 journal-get-data-threshold
</pre>
<div class="Pp"></div>
Get the current data threshold for reading journal entries. This is a hint to
  the journal that it may truncate data fields to this size when reading them
  (note also that it may not truncate them). If this returns 0, then the
  threshold is unlimited.
<div class="Pp"></div>
See also &quot;journal-set-data-threshold&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-get-realtime-usec"><a class="selflink" href="#journal-get-realtime-usec">journal-get-realtime-usec</a></h2>
<pre>
 journal-get-realtime-usec
</pre>
<div class="Pp"></div>
Get the realtime (wallclock) timestamp of the current journal entry.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-next"><a class="selflink" href="#journal-next">journal-next</a></h2>
<pre>
 journal-next
</pre>
<div class="Pp"></div>
Move to the next journal entry. You have to call this at least once after
  opening the handle before you are able to read data.
<div class="Pp"></div>
The returned boolean tells you if there are any more journal records to read.
  &quot;true&quot; means you can read the next record (eg. using
  &quot;journal-get&quot;), and &quot;false&quot; means you have reached the end
  of the journal.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-open"><a class="selflink" href="#journal-open">journal-open</a></h2>
<pre>
 journal-open directory
</pre>
<div class="Pp"></div>
Open the systemd journal located in <i>directory</i>. Any previously opened
  journal handle is closed.
<div class="Pp"></div>
The contents of the journal can be read using &quot;journal-next&quot; and
  &quot;journal-get&quot;.
<div class="Pp"></div>
After you have finished using the journal, you should close the handle by
  calling &quot;journal-close&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-set-data-threshold"><a class="selflink" href="#journal-set-data-threshold">journal-set-data-threshold</a></h2>
<pre>
 journal-set-data-threshold threshold
</pre>
<div class="Pp"></div>
Set the data threshold for reading journal entries. This is a hint to the
  journal that it may truncate data fields to this size when reading them (note
  also that it may not truncate them). If you set this to 0, then the threshold
  is unlimited.
<div class="Pp"></div>
See also &quot;journal-get-data-threshold&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="journal-skip"><a class="selflink" href="#journal-skip">journal-skip</a></h2>
<pre>
 journal-skip skip
</pre>
<div class="Pp"></div>
Skip forwards (&quot;skip &#x2265; 0&quot;) or backwards (&quot;skip &lt;
  0&quot;) in the journal.
<div class="Pp"></div>
The number of entries actually skipped is returned (note
  &quot;rskip&#x00A0;&#x2265;&#x00A0;0&quot;). If this is not the same as the
  absolute value of the skip parameter (&quot;|skip|&quot;) you passed in then
  it means you have reached the end or the start of the journal.
<div class="Pp"></div>
This command depends on the feature &quot;journal&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="kill-subprocess"><a class="selflink" href="#kill-subprocess">kill-subprocess</a></h2>
<pre>
 kill-subprocess
</pre>
<div class="Pp"></div>
This kills the hypervisor.
<div class="Pp"></div>
Do not call this. See: &quot;shutdown&quot; instead.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;shutdown&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="launch"><a class="selflink" href="#launch">launch</a></h2>
<h2 class="Ss" title="Ss" id="run"><a class="selflink" href="#run">run</a></h2>
<pre>
 launch
</pre>
<div class="Pp"></div>
You should call this after configuring the handle (eg. adding drives) but before
  performing any actions.
<div class="Pp"></div>
Do not call &quot;launch&quot; twice on the same handle. Although it will not
  give an error (for historical reasons), the precise behaviour when you do this
  is not well defined. Handles are very cheap to create, so create a new one for
  each launch.
<h2 class="Ss" title="Ss" id="lchown"><a class="selflink" href="#lchown">lchown</a></h2>
<pre>
 lchown owner group path
</pre>
<div class="Pp"></div>
Change the file owner to &quot;owner&quot; and group to &quot;group&quot;. This
  is like &quot;chown&quot; but if &quot;path&quot; is a symlink then the link
  itself is changed, not the target.
<div class="Pp"></div>
Only numeric uid and gid are supported. If you want to use names, you will need
  to locate and parse the password file yourself (Augeas support makes this
  relatively easy).
<h2 class="Ss" title="Ss" id="ldmtool-create-all"><a class="selflink" href="#ldmtool-create-all">ldmtool-create-all</a></h2>
<pre>
 ldmtool-create-all
</pre>
<div class="Pp"></div>
This function scans all block devices looking for Windows dynamic disk volumes
  and partitions, and creates devices for any that were found.
<div class="Pp"></div>
Call &quot;list-ldm-volumes&quot; and &quot;list-ldm-partitions&quot; to return
  all devices.
<div class="Pp"></div>
Note that you <b>don't</b> normally need to call this explicitly, since it is
  done automatically at &quot;launch&quot; time. However you might want to call
  this function if you have hotplugged disks or have just created a Windows
  dynamic disk.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-diskgroup-disks"><a class="selflink" href="#ldmtool-diskgroup-disks">ldmtool-diskgroup-disks</a></h2>
<pre>
 ldmtool-diskgroup-disks diskgroup
</pre>
<div class="Pp"></div>
Return the disks in a Windows dynamic disk group. The &quot;diskgroup&quot;
  parameter should be the GUID of a disk group, one element from the list
  returned by &quot;ldmtool-scan&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-diskgroup-name"><a class="selflink" href="#ldmtool-diskgroup-name">ldmtool-diskgroup-name</a></h2>
<pre>
 ldmtool-diskgroup-name diskgroup
</pre>
<div class="Pp"></div>
Return the name of a Windows dynamic disk group. The &quot;diskgroup&quot;
  parameter should be the GUID of a disk group, one element from the list
  returned by &quot;ldmtool-scan&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-diskgroup-volumes"><a class="selflink" href="#ldmtool-diskgroup-volumes">ldmtool-diskgroup-volumes</a></h2>
<pre>
 ldmtool-diskgroup-volumes diskgroup
</pre>
<div class="Pp"></div>
Return the volumes in a Windows dynamic disk group. The &quot;diskgroup&quot;
  parameter should be the GUID of a disk group, one element from the list
  returned by &quot;ldmtool-scan&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-remove-all"><a class="selflink" href="#ldmtool-remove-all">ldmtool-remove-all</a></h2>
<pre>
 ldmtool-remove-all
</pre>
<div class="Pp"></div>
This is essentially the opposite of &quot;ldmtool-create-all&quot;. It removes
  the device mapper mappings for all Windows dynamic disk volumes
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-scan"><a class="selflink" href="#ldmtool-scan">ldmtool-scan</a></h2>
<pre>
 ldmtool-scan
</pre>
<div class="Pp"></div>
This function scans for Windows dynamic disks. It returns a list of identifiers
  (GUIDs) for all disk groups that were found. These identifiers can be passed
  to other &quot;ldmtool-*&quot; functions.
<div class="Pp"></div>
This function scans all block devices. To scan a subset of block devices, call
  &quot;ldmtool-scan-devices&quot; instead.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-scan-devices"><a class="selflink" href="#ldmtool-scan-devices">ldmtool-scan-devices</a></h2>
<pre>
 ldmtool-scan-devices 'devices ...'
</pre>
<div class="Pp"></div>
This function scans for Windows dynamic disks. It returns a list of identifiers
  (GUIDs) for all disk groups that were found. These identifiers can be passed
  to other &quot;ldmtool-*&quot; functions.
<div class="Pp"></div>
The parameter &quot;devices&quot; is a list of block devices which are scanned.
  If this list is empty, all block devices are scanned.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-volume-hint"><a class="selflink" href="#ldmtool-volume-hint">ldmtool-volume-hint</a></h2>
<pre>
 ldmtool-volume-hint diskgroup volume
</pre>
<div class="Pp"></div>
Return the hint field of the volume named &quot;volume&quot; in the disk group
  with GUID &quot;diskgroup&quot;. This may not be defined, in which case the
  empty string is returned. The hint field is often, though not always, the name
  of a Windows drive, eg. &quot;E:&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-volume-partitions"><a class="selflink" href="#ldmtool-volume-partitions">ldmtool-volume-partitions</a></h2>
<pre>
 ldmtool-volume-partitions diskgroup volume
</pre>
<div class="Pp"></div>
Return the list of partitions in the volume named &quot;volume&quot; in the disk
  group with GUID &quot;diskgroup&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ldmtool-volume-type"><a class="selflink" href="#ldmtool-volume-type">ldmtool-volume-type</a></h2>
<pre>
 ldmtool-volume-type diskgroup volume
</pre>
<div class="Pp"></div>
Return the type of the volume named &quot;volume&quot; in the disk group with
  GUID &quot;diskgroup&quot;.
<div class="Pp"></div>
Possible volume types that can be returned here include: &quot;simple&quot;,
  &quot;spanned&quot;, &quot;striped&quot;, &quot;mirrored&quot;,
  &quot;raid5&quot;. Other types may also be returned.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lgetxattr"><a class="selflink" href="#lgetxattr">lgetxattr</a></h2>
<pre>
 lgetxattr path name
</pre>
<div class="Pp"></div>
Get a single extended attribute from file &quot;path&quot; named
  &quot;name&quot;. If &quot;path&quot; is a symlink, then this call returns an
  extended attribute from the symlink.
<div class="Pp"></div>
Normally it is better to get all extended attributes from a file in one go by
  calling &quot;getxattrs&quot;. However some Linux filesystem implementations
  are buggy and do not provide a way to list out attributes. For these
  filesystems (notably ntfs-3g) you have to know the names of the extended
  attributes you want in advance and call this function.
<div class="Pp"></div>
Extended attribute values are blobs of binary data. If there is no extended
  attribute named &quot;name&quot;, this returns an error.
<div class="Pp"></div>
See also: &quot;lgetxattrs&quot;, &quot;getxattr&quot;, <i>attr</i>(5).
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lgetxattrs"><a class="selflink" href="#lgetxattrs">lgetxattrs</a></h2>
<pre>
 lgetxattrs path
</pre>
<div class="Pp"></div>
This is the same as &quot;getxattrs&quot;, but if &quot;path&quot; is a symbolic
  link, then it returns the extended attributes of the link itself.
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="list-devices"><a class="selflink" href="#list-devices">list-devices</a></h2>
<pre>
 list-devices
</pre>
<div class="Pp"></div>
List all the block devices.
<div class="Pp"></div>
The full block device names are returned, eg. <i>/dev/sda</i>.
<div class="Pp"></div>
See also &quot;list-filesystems&quot;.
<h2 class="Ss" title="Ss" id="list-disk-labels"><a class="selflink" href="#list-disk-labels">list-disk-labels</a></h2>
<pre>
 list-disk-labels
</pre>
<div class="Pp"></div>
If you add drives using the optional &quot;label&quot; parameter of
  &quot;add-drive-opts&quot;, you can use this call to map between disk labels,
  and raw block device and partition names (like <i>/dev/sda</i> and
  <i>/dev/sda1</i>).
<div class="Pp"></div>
This returns a hashtable, where keys are the disk labels ( <i>without</i> the
  <i>/dev/disk/guestfs</i> prefix), and the values are the full raw block device
  and partition names (eg. <i>/dev/sda</i> and <i>/dev/sda1</i>).
<h2 class="Ss" title="Ss" id="list-dm-devices"><a class="selflink" href="#list-dm-devices">list-dm-devices</a></h2>
<pre>
 list-dm-devices
</pre>
<div class="Pp"></div>
List all device mapper devices.
<div class="Pp"></div>
The returned list contains <i>/dev/mapper/*</i> devices, eg. ones created by a
  previous call to &quot;luks-open&quot;.
<div class="Pp"></div>
Device mapper devices which correspond to logical volumes are <i>not</i>
  returned in this list. Call &quot;lvs&quot; if you want to list logical
  volumes.
<h2 class="Ss" title="Ss" id="list-filesystems"><a class="selflink" href="#list-filesystems">list-filesystems</a></h2>
<pre>
 list-filesystems
</pre>
<div class="Pp"></div>
This inspection command looks for filesystems on partitions, block devices and
  logical volumes, returning a list of &quot;mountables&quot; containing
  filesystems and their type.
<div class="Pp"></div>
The return value is a hash, where the keys are the devices containing
  filesystems, and the values are the filesystem types. For example:
<div class="Pp"></div>
<pre>
 &quot;/dev/sda1&quot; =&gt; &quot;ntfs&quot;
 &quot;/dev/sda2&quot; =&gt; &quot;ext2&quot;
 &quot;/dev/vg_guest/lv_root&quot; =&gt; &quot;ext4&quot;
 &quot;/dev/vg_guest/lv_swap&quot; =&gt; &quot;swap&quot;
</pre>
<div class="Pp"></div>
The key is not necessarily a block device. It may also be an opaque 'mountable'
  string which can be passed to &quot;mount&quot;.
<div class="Pp"></div>
The value can have the special value &quot;unknown&quot;, meaning the content of
  the device is undetermined or empty. &quot;swap&quot; means a Linux swap
  partition.
<div class="Pp"></div>
This command runs other libguestfs commands, which might include
  &quot;mount&quot; and &quot;umount&quot;, and therefore you should use this
  soon after launch and only when nothing is mounted.
<div class="Pp"></div>
Not all of the filesystems returned will be mountable. In particular, swap
  partitions are returned in the list. Also this command does not check that
  each filesystem found is valid and mountable, and some filesystems might be
  mountable but require special options. Filesystems may not all belong to a
  single logical operating system (use &quot;inspect-os&quot; to look for OSes).
<h2 class="Ss" title="Ss" id="list-ldm-partitions"><a class="selflink" href="#list-ldm-partitions">list-ldm-partitions</a></h2>
<pre>
 list-ldm-partitions
</pre>
<div class="Pp"></div>
This function returns all Windows dynamic disk partitions that were found at
  launch time. It returns a list of device names.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="list-ldm-volumes"><a class="selflink" href="#list-ldm-volumes">list-ldm-volumes</a></h2>
<pre>
 list-ldm-volumes
</pre>
<div class="Pp"></div>
This function returns all Windows dynamic disk volumes that were found at launch
  time. It returns a list of device names.
<div class="Pp"></div>
This command depends on the feature &quot;ldm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="list-md-devices"><a class="selflink" href="#list-md-devices">list-md-devices</a></h2>
<pre>
 list-md-devices
</pre>
<div class="Pp"></div>
List all Linux md devices.
<h2 class="Ss" title="Ss" id="list-partitions"><a class="selflink" href="#list-partitions">list-partitions</a></h2>
<pre>
 list-partitions
</pre>
<div class="Pp"></div>
List all the partitions detected on all block devices.
<div class="Pp"></div>
The full partition device names are returned, eg. <i>/dev/sda1</i>
<div class="Pp"></div>
This does not return logical volumes. For that you will need to call
  &quot;lvs&quot;.
<div class="Pp"></div>
See also &quot;list-filesystems&quot;.
<h2 class="Ss" title="Ss" id="ll"><a class="selflink" href="#ll">ll</a></h2>
<pre>
 ll directory
</pre>
<div class="Pp"></div>
List the files in <i>directory</i> (relative to the root directory, there is no
  cwd) in the format of 'ls -la'.
<div class="Pp"></div>
This command is mostly useful for interactive sessions. It is <i>not</i>
  intended that you try to parse the output string.
<h2 class="Ss" title="Ss" id="llz"><a class="selflink" href="#llz">llz</a></h2>
<pre>
 llz directory
</pre>
<div class="Pp"></div>
List the files in <i>directory</i> in the format of 'ls -laZ'.
<div class="Pp"></div>
This command is mostly useful for interactive sessions. It is <i>not</i>
  intended that you try to parse the output string.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;lgetxattrs&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="ln"><a class="selflink" href="#ln">ln</a></h2>
<pre>
 ln target linkname
</pre>
<div class="Pp"></div>
This command creates a hard link using the &quot;ln&quot; command.
<h2 class="Ss" title="Ss" id="ln-f"><a class="selflink" href="#ln-f">ln-f</a></h2>
<pre>
 ln-f target linkname
</pre>
<div class="Pp"></div>
This command creates a hard link using the &quot;ln -f&quot; command. The
  <i>-f</i> option removes the link (&quot;linkname&quot;) if it exists already.
<h2 class="Ss" title="Ss" id="ln-s"><a class="selflink" href="#ln-s">ln-s</a></h2>
<pre>
 ln-s target linkname
</pre>
<div class="Pp"></div>
This command creates a symbolic link using the &quot;ln -s&quot; command.
<h2 class="Ss" title="Ss" id="ln-sf"><a class="selflink" href="#ln-sf">ln-sf</a></h2>
<pre>
 ln-sf target linkname
</pre>
<div class="Pp"></div>
This command creates a symbolic link using the &quot;ln -sf&quot; command, The
  <i>-f</i> option removes the link (&quot;linkname&quot;) if it exists already.
<h2 class="Ss" title="Ss" id="lremovexattr"><a class="selflink" href="#lremovexattr">lremovexattr</a></h2>
<pre>
 lremovexattr xattr path
</pre>
<div class="Pp"></div>
This is the same as &quot;removexattr&quot;, but if &quot;path&quot; is a
  symbolic link, then it removes an extended attribute of the link itself.
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ls"><a class="selflink" href="#ls">ls</a></h2>
<pre>
 ls directory
</pre>
<div class="Pp"></div>
List the files in <i>directory</i> (relative to the root directory, there is no
  cwd). The '.' and '..' entries are not returned, but hidden files are shown.
<h2 class="Ss" title="Ss" id="ls0"><a class="selflink" href="#ls0">ls0</a></h2>
<pre>
 ls0 dir (filenames|-)
</pre>
<div class="Pp"></div>
This specialized command is used to get a listing of the filenames in the
  directory &quot;dir&quot;. The list of filenames is written to the local file
  <i>filenames</i> (on the host).
<div class="Pp"></div>
In the output file, the filenames are separated by &quot;\0&quot; characters.
<div class="Pp"></div>
&quot;.&quot; and &quot;..&quot; are not returned. The filenames are not sorted.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="lsetxattr"><a class="selflink" href="#lsetxattr">lsetxattr</a></h2>
<pre>
 lsetxattr xattr val vallen path
</pre>
<div class="Pp"></div>
This is the same as &quot;setxattr&quot;, but if &quot;path&quot; is a symbolic
  link, then it sets an extended attribute of the link itself.
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lstat"><a class="selflink" href="#lstat">lstat</a></h2>
<pre>
 lstat path
</pre>
<div class="Pp"></div>
Returns file information for the given &quot;path&quot;.
<div class="Pp"></div>
This is the same as &quot;stat&quot; except that if &quot;path&quot; is a
  symbolic link, then the link is stat-ed, not the file it refers to.
<div class="Pp"></div>
This is the same as the <i>lstat</i>(2) system call.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;lstatns&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="lstatlist"><a class="selflink" href="#lstatlist">lstatlist</a></h2>
<pre>
 lstatlist path 'names ...'
</pre>
<div class="Pp"></div>
This call allows you to perform the &quot;lstat&quot; operation on multiple
  files, where all files are in the directory &quot;path&quot;.
  &quot;names&quot; is the list of files from this directory.
<div class="Pp"></div>
On return you get a list of stat structs, with a one-to-one correspondence to
  the &quot;names&quot; list. If any name did not exist or could not be lstat'd,
  then the &quot;st_ino&quot; field of that structure is set to &quot;-1&quot;.
<div class="Pp"></div>
This call is intended for programs that want to efficiently list a directory
  contents without making many round-trips. See also &quot;lxattrlist&quot; for
  a similarly efficient call for getting extended attributes.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;lstatnslist&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="lstatns"><a class="selflink" href="#lstatns">lstatns</a></h2>
<pre>
 lstatns path
</pre>
<div class="Pp"></div>
Returns file information for the given &quot;path&quot;.
<div class="Pp"></div>
This is the same as &quot;statns&quot; except that if &quot;path&quot; is a
  symbolic link, then the link is stat-ed, not the file it refers to.
<div class="Pp"></div>
This is the same as the <i>lstat</i>(2) system call.
<h2 class="Ss" title="Ss" id="lstatnslist"><a class="selflink" href="#lstatnslist">lstatnslist</a></h2>
<pre>
 lstatnslist path 'names ...'
</pre>
<div class="Pp"></div>
This call allows you to perform the &quot;lstatns&quot; operation on multiple
  files, where all files are in the directory &quot;path&quot;.
  &quot;names&quot; is the list of files from this directory.
<div class="Pp"></div>
On return you get a list of stat structs, with a one-to-one correspondence to
  the &quot;names&quot; list. If any name did not exist or could not be lstat'd,
  then the &quot;st_ino&quot; field of that structure is set to &quot;-1&quot;.
<div class="Pp"></div>
This call is intended for programs that want to efficiently list a directory
  contents without making many round-trips. See also &quot;lxattrlist&quot; for
  a similarly efficient call for getting extended attributes.
<h2 class="Ss" title="Ss" id="luks-add-key"><a class="selflink" href="#luks-add-key">luks-add-key</a></h2>
<pre>
 luks-add-key device keyslot
</pre>
<div class="Pp"></div>
This command adds a new key on LUKS device &quot;device&quot;. &quot;key&quot;
  is any existing key, and is used to access the device. &quot;newkey&quot; is
  the new key to add. &quot;keyslot&quot; is the key slot that will be replaced.
<div class="Pp"></div>
Note that if &quot;keyslot&quot; already contains a key, then this command will
  fail. You have to use &quot;luks-kill-slot&quot; first to remove that key.
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-close"><a class="selflink" href="#luks-close">luks-close</a></h2>
<pre>
 luks-close device
</pre>
<div class="Pp"></div>
This closes a LUKS device that was created earlier by &quot;luks-open&quot; or
  &quot;luks-open-ro&quot;. The &quot;device&quot; parameter must be the name of
  the LUKS mapping device (ie. <i>/dev/mapper/mapname</i>) and <i>not</i> the
  name of the underlying block device.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-format"><a class="selflink" href="#luks-format">luks-format</a></h2>
<pre>
 luks-format device keyslot
</pre>
<div class="Pp"></div>
This command erases existing data on &quot;device&quot; and formats the device
  as a LUKS encrypted device. &quot;key&quot; is the initial key, which is added
  to key slot &quot;slot&quot;. (LUKS supports 8 key slots, numbered 0-7).
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-format-cipher"><a class="selflink" href="#luks-format-cipher">luks-format-cipher</a></h2>
<pre>
 luks-format-cipher device keyslot cipher
</pre>
<div class="Pp"></div>
This command is the same as &quot;luks-format&quot; but it also allows you to
  set the &quot;cipher&quot; used.
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-kill-slot"><a class="selflink" href="#luks-kill-slot">luks-kill-slot</a></h2>
<pre>
 luks-kill-slot device keyslot
</pre>
<div class="Pp"></div>
This command deletes the key in key slot &quot;keyslot&quot; from the encrypted
  LUKS device &quot;device&quot;. &quot;key&quot; must be one of the
  <i>other</i> keys.
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-open"><a class="selflink" href="#luks-open">luks-open</a></h2>
<pre>
 luks-open device mapname
</pre>
<div class="Pp"></div>
This command opens a block device which has been encrypted according to the
  Linux Unified Key Setup (LUKS) standard.
<div class="Pp"></div>
&quot;device&quot; is the encrypted block device or partition.
<div class="Pp"></div>
The caller must supply one of the keys associated with the LUKS block device, in
  the &quot;key&quot; parameter.
<div class="Pp"></div>
This creates a new block device called <i>/dev/mapper/mapname</i>. Reads and
  writes to this block device are decrypted from and encrypted to the underlying
  &quot;device&quot; respectively.
<div class="Pp"></div>
If this block device contains LVM volume groups, then calling &quot;vgscan&quot;
  followed by &quot;vg-activate-all&quot; will make them visible.
<div class="Pp"></div>
Use &quot;list-dm-devices&quot; to list all device mapper devices.
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="luks-open-ro"><a class="selflink" href="#luks-open-ro">luks-open-ro</a></h2>
<pre>
 luks-open-ro device mapname
</pre>
<div class="Pp"></div>
This is the same as &quot;luks-open&quot; except that a read-only mapping is
  created.
<div class="Pp"></div>
This command has one or more key or passphrase parameters. Guestfish will prompt
  for these separately.
<div class="Pp"></div>
This command depends on the feature &quot;luks&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvcreate"><a class="selflink" href="#lvcreate">lvcreate</a></h2>
<pre>
 lvcreate logvol volgroup mbytes
</pre>
<div class="Pp"></div>
This creates an LVM logical volume called &quot;logvol&quot; on the volume group
  &quot;volgroup&quot;, with &quot;size&quot; megabytes.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvcreate-free"><a class="selflink" href="#lvcreate-free">lvcreate-free</a></h2>
<pre>
 lvcreate-free logvol volgroup percent
</pre>
<div class="Pp"></div>
Create an LVM logical volume called <i>/dev/volgroup/logvol</i>, using
  approximately &quot;percent&quot; % of the free space remaining in the volume
  group. Most usefully, when &quot;percent&quot; is 100 this will create the
  largest possible LV.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvm-canonical-lv-name"><a class="selflink" href="#lvm-canonical-lv-name">lvm-canonical-lv-name</a></h2>
<pre>
 lvm-canonical-lv-name lvname
</pre>
<div class="Pp"></div>
This converts alternative naming schemes for LVs that you might find to the
  canonical name. For example, <i>/dev/mapper/VG-LV</i> is converted to
  <i>/dev/VG/LV</i>.
<div class="Pp"></div>
This command returns an error if the &quot;lvname&quot; parameter does not refer
  to a logical volume.
<div class="Pp"></div>
See also &quot;is-lv&quot;, &quot;canonical-device-name&quot;.
<h2 class="Ss" title="Ss" id="lvm-clear-filter"><a class="selflink" href="#lvm-clear-filter">lvm-clear-filter</a></h2>
<pre>
 lvm-clear-filter
</pre>
<div class="Pp"></div>
This undoes the effect of &quot;lvm-set-filter&quot;. LVM will be able to see
  every block device.
<div class="Pp"></div>
This command also clears the LVM cache and performs a volume group scan.
<h2 class="Ss" title="Ss" id="lvm-remove-all"><a class="selflink" href="#lvm-remove-all">lvm-remove-all</a></h2>
<pre>
 lvm-remove-all
</pre>
<div class="Pp"></div>
This command removes all LVM logical volumes, volume groups and physical
  volumes.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvm-set-filter"><a class="selflink" href="#lvm-set-filter">lvm-set-filter</a></h2>
<pre>
 lvm-set-filter 'devices ...'
</pre>
<div class="Pp"></div>
This sets the LVM device filter so that LVM will only be able to &quot;see&quot;
  the block devices in the list &quot;devices&quot;, and will ignore all other
  attached block devices.
<div class="Pp"></div>
Where disk image(s) contain duplicate PVs or VGs, this command is useful to get
  LVM to ignore the duplicates, otherwise LVM can get confused. Note also there
  are two types of duplication possible: either cloned PVs/VGs which have
  identical UUIDs; or VGs that are not cloned but just happen to have the same
  name. In normal operation you cannot create this situation, but you can do it
  outside LVM, eg. by cloning disk images or by bit twiddling inside the LVM
  metadata.
<div class="Pp"></div>
This command also clears the LVM cache and performs a volume group scan.
<div class="Pp"></div>
You can filter whole block devices or individual partitions.
<div class="Pp"></div>
You cannot use this if any VG is currently in use (eg. contains a mounted
  filesystem), even if you are not filtering out that VG.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvremove"><a class="selflink" href="#lvremove">lvremove</a></h2>
<pre>
 lvremove device
</pre>
<div class="Pp"></div>
Remove an LVM logical volume &quot;device&quot;, where &quot;device&quot; is the
  path to the LV, such as <i>/dev/VG/LV</i>.
<div class="Pp"></div>
You can also remove all LVs in a volume group by specifying the VG name,
  <i>/dev/VG</i>.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvrename"><a class="selflink" href="#lvrename">lvrename</a></h2>
<pre>
 lvrename logvol newlogvol
</pre>
<div class="Pp"></div>
Rename a logical volume &quot;logvol&quot; with the new name
  &quot;newlogvol&quot;.
<h2 class="Ss" title="Ss" id="lvresize"><a class="selflink" href="#lvresize">lvresize</a></h2>
<pre>
 lvresize device mbytes
</pre>
<div class="Pp"></div>
This resizes (expands or shrinks) an existing LVM logical volume to
  &quot;mbytes&quot;. When reducing, data in the reduced part is lost.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvresize-free"><a class="selflink" href="#lvresize-free">lvresize-free</a></h2>
<pre>
 lvresize-free lv percent
</pre>
<div class="Pp"></div>
This expands an existing logical volume &quot;lv&quot; so that it fills
  &quot;pc&quot;% of the remaining free space in the volume group. Commonly you
  would call this with pc = 100 which expands the logical volume as much as
  possible, using all remaining free space in the volume group.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvs"><a class="selflink" href="#lvs">lvs</a></h2>
<pre>
 lvs
</pre>
<div class="Pp"></div>
List all the logical volumes detected. This is the equivalent of the
  <i>lvs</i>(8) command.
<div class="Pp"></div>
This returns a list of the logical volume device names (eg.
  <i>/dev/VolGroup00/LogVol00</i>).
<div class="Pp"></div>
See also &quot;lvs-full&quot;, &quot;list-filesystems&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvs-full"><a class="selflink" href="#lvs-full">lvs-full</a></h2>
<pre>
 lvs-full
</pre>
<div class="Pp"></div>
List all the logical volumes detected. This is the equivalent of the
  <i>lvs</i>(8) command. The &quot;full&quot; version includes all fields.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="lvuuid"><a class="selflink" href="#lvuuid">lvuuid</a></h2>
<pre>
 lvuuid device
</pre>
<div class="Pp"></div>
This command returns the UUID of the LVM LV &quot;device&quot;.
<h2 class="Ss" title="Ss" id="lxattrlist"><a class="selflink" href="#lxattrlist">lxattrlist</a></h2>
<pre>
 lxattrlist path 'names ...'
</pre>
<div class="Pp"></div>
This call allows you to get the extended attributes of multiple files, where all
  files are in the directory &quot;path&quot;. &quot;names&quot; is the list of
  files from this directory.
<div class="Pp"></div>
On return you get a flat list of xattr structs which must be interpreted
  sequentially. The first xattr struct always has a zero-length
  &quot;attrname&quot;. &quot;attrval&quot; in this struct is zero-length to
  indicate there was an error doing &quot;lgetxattr&quot; for this file,
  <i>or</i> is a C string which is a decimal number (the number of following
  attributes for this file, which could be &quot;0&quot;). Then after the first
  xattr struct are the zero or more attributes for the first named file. This
  repeats for the second and subsequent files.
<div class="Pp"></div>
This call is intended for programs that want to efficiently list a directory
  contents without making many round-trips. See also &quot;lstatlist&quot; for a
  similarly efficient call for getting standard stats.
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="max-disks"><a class="selflink" href="#max-disks">max-disks</a></h2>
<pre>
 max-disks
</pre>
<div class="Pp"></div>
Return the maximum number of disks that may be added to a handle (eg. by
  &quot;add-drive-opts&quot; and similar calls).
<div class="Pp"></div>
This function was added in libguestfs 1.19.7. In previous versions of libguestfs
  the limit was 25.
<div class="Pp"></div>
See &quot;MAXIMUM NUMBER OF DISKS&quot; in <i>guestfs</i>(3) for additional
  information on this topic.
<h2 class="Ss" title="Ss" id="md-create"><a class="selflink" href="#md-create">md-create</a></h2>
<pre>
 md-create name 'devices ...' [missingbitmap:N] [nrdevices:N] [spare:N] [chunk:N] [level:..]
</pre>
<div class="Pp"></div>
Create a Linux md (RAID) device named &quot;name&quot; on the devices in the
  list &quot;devices&quot;.
<div class="Pp"></div>
The optional parameters are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;missingbitmap&quot;</dt>
  <dd class="It-tag">A bitmap of missing devices. If a bit is set it means that
      a missing device is added to the array. The least significant bit
      corresponds to the first device in the array.
    <div style="height: 1.00em;">&#x00A0;</div>
    As examples:
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;devices = [&quot;/dev/sda&quot;]&quot; and &quot;missingbitmap =
      0x1&quot; then the resulting array would be &quot;[&lt;missing&gt;,
      &quot;/dev/sda&quot;]&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;devices = [&quot;/dev/sda&quot;]&quot; and &quot;missingbitmap =
      0x2&quot; then the resulting array would be &quot;[&quot;/dev/sda&quot;,
      &lt;missing&gt;]&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    This defaults to 0 (no missing devices).
    <div style="height: 1.00em;">&#x00A0;</div>
    The length of &quot;devices&quot; + the number of bits set in
      &quot;missingbitmap&quot; must equal &quot;nrdevices&quot; +
      &quot;spare&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;nrdevices&quot;</dt>
  <dd class="It-tag">The number of active RAID devices.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not set, this defaults to the length of &quot;devices&quot; plus the
      number of bits set in &quot;missingbitmap&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;spare&quot;</dt>
  <dd class="It-tag">The number of spare devices.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not set, this defaults to 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;chunk&quot;</dt>
  <dd class="It-tag">The chunk size in bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;level&quot;</dt>
  <dd class="It-tag">The RAID level, which can be one of: <i>linear</i>,
      <i>raid0</i>, <i>0</i>, <i>stripe</i>, <i>raid1</i>, <i>1</i>,
      <i>mirror</i>, <i>raid4</i>, <i>4</i>, <i>raid5</i>, <i>5</i>,
      <i>raid6</i>, <i>6</i>, <i>raid10</i>, <i>10</i>. Some of these are
      synonymous, and more levels may be added in future.
    <div style="height: 1.00em;">&#x00A0;</div>
    If not set, this defaults to &quot;raid1&quot;.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;mdadm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="md-detail"><a class="selflink" href="#md-detail">md-detail</a></h2>
<pre>
 md-detail md
</pre>
<div class="Pp"></div>
This command exposes the output of 'mdadm -DY &lt;md&gt;'. The following fields
  are usually present in the returned hash. Other fields may also be present.
<dl class="Bl-tag">
  <dt class="It-tag">&quot;level&quot;</dt>
  <dd class="It-tag">The raid level of the MD device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;devices&quot;</dt>
  <dd class="It-tag">The number of underlying devices in the MD device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;metadata&quot;</dt>
  <dd class="It-tag">The metadata version used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;uuid&quot;</dt>
  <dd class="It-tag">The UUID of the MD device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;name&quot;</dt>
  <dd class="It-tag">The name of the MD device.</dd>
</dl>
<div class="Pp"></div>
This command depends on the feature &quot;mdadm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="md-stat"><a class="selflink" href="#md-stat">md-stat</a></h2>
<pre>
 md-stat md
</pre>
<div class="Pp"></div>
This call returns a list of the underlying devices which make up the single
  software RAID array device &quot;md&quot;.
<div class="Pp"></div>
To get a list of software RAID devices, call &quot;list-md-devices&quot;.
<div class="Pp"></div>
Each structure returned corresponds to one device along with additional status
  information:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mdstat_device&quot;</dt>
  <dd class="It-tag">The name of the underlying device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mdstat_index&quot;</dt>
  <dd class="It-tag">The index of this device within the array.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mdstat_flags&quot;</dt>
  <dd class="It-tag">Flags associated with this device. This is a string
      containing (in no specific order) zero or more of the following
    flags:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&quot;W&quot;</dt>
  <dd class="It-tag">write-mostly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;F&quot;</dt>
  <dd class="It-tag">device is faulty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;S&quot;</dt>
  <dd class="It-tag">device is a RAID spare</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;R&quot;</dt>
  <dd class="It-tag">replacement</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
This command depends on the feature &quot;mdadm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="md-stop"><a class="selflink" href="#md-stop">md-stop</a></h2>
<pre>
 md-stop md
</pre>
<div class="Pp"></div>
This command deactivates the MD array named &quot;md&quot;. The device is
  stopped, but it is not destroyed or zeroed.
<div class="Pp"></div>
This command depends on the feature &quot;mdadm&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mkdir"><a class="selflink" href="#mkdir">mkdir</a></h2>
<pre>
 mkdir path
</pre>
<div class="Pp"></div>
Create a directory named &quot;path&quot;.
<h2 class="Ss" title="Ss" id="mkdir-mode"><a class="selflink" href="#mkdir-mode">mkdir-mode</a></h2>
<pre>
 mkdir-mode path mode
</pre>
<div class="Pp"></div>
This command creates a directory, setting the initial permissions of the
  directory to &quot;mode&quot;.
<div class="Pp"></div>
For common Linux filesystems, the actual mode which is set will be &quot;mode
  &amp; ~umask &amp; 01777&quot;. Non-native-Linux filesystems may interpret the
  mode in other ways.
<div class="Pp"></div>
See also &quot;mkdir&quot;, &quot;umask&quot;
<h2 class="Ss" title="Ss" id="mkdir-p"><a class="selflink" href="#mkdir-p">mkdir-p</a></h2>
<pre>
 mkdir-p path
</pre>
<div class="Pp"></div>
Create a directory named &quot;path&quot;, creating any parent directories as
  necessary. This is like the &quot;mkdir -p&quot; shell command.
<h2 class="Ss" title="Ss" id="mkdtemp"><a class="selflink" href="#mkdtemp">mkdtemp</a></h2>
<pre>
 mkdtemp tmpl
</pre>
<div class="Pp"></div>
This command creates a temporary directory. The &quot;tmpl&quot; parameter
  should be a full pathname for the temporary directory name with the final six
  characters being &quot;XXXXXX&quot;.
<div class="Pp"></div>
For example: &quot;/tmp/myprogXXXXXX&quot; or &quot;/Temp/myprogXXXXXX&quot;,
  the second one being suitable for Windows filesystems.
<div class="Pp"></div>
The name of the temporary directory that was created is returned.
<div class="Pp"></div>
The temporary directory is created with mode 0700 and is owned by root.
<div class="Pp"></div>
The caller is responsible for deleting the temporary directory and its contents
  after use.
<div class="Pp"></div>
See also: <i>mkdtemp</i>(3)
<h2 class="Ss" title="Ss" id="mke2fs"><a class="selflink" href="#mke2fs">mke2fs</a></h2>
<pre>
 mke2fs device [blockscount:N] [blocksize:N] [fragsize:N] [blockspergroup:N] [numberofgroups:N] [bytesperinode:N] [inodesize:N] [journalsize:N] [numberofinodes:N] [stridesize:N] [stripewidth:N] [maxonlineresize:N] [reservedblockspercentage:N] [mmpupdateinterval:N] [journaldevice:..] [label:..] [lastmounteddir:..] [creatoros:..] [fstype:..] [usagetype:..] [uuid:..] [forcecreate:true|false] [writesbandgrouponly:true|false] [lazyitableinit:true|false] [lazyjournalinit:true|false] [testfs:true|false] [discard:true|false] [quotatype:true|false] [extent:true|false] [filetype:true|false] [flexbg:true|false] [hasjournal:true|false] [journaldev:true|false] [largefile:true|false] [quota:true|false] [resizeinode:true|false] [sparsesuper:true|false] [uninitbg:true|false]
</pre>
<div class="Pp"></div>
&quot;mke2fs&quot; is used to create an ext2, ext3, or ext4 filesystem on
  &quot;device&quot;.
<div class="Pp"></div>
The optional &quot;blockscount&quot; is the size of the filesystem in blocks. If
  omitted it defaults to the size of &quot;device&quot;. Note if the filesystem
  is too small to contain a journal, &quot;mke2fs&quot; will silently create an
  ext2 filesystem instead.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="mke2fs-J"><a class="selflink" href="#mke2fs-J">mke2fs-J</a></h2>
<pre>
 mke2fs-J fstype blocksize device journal
</pre>
<div class="Pp"></div>
This creates an ext2/3/4 filesystem on &quot;device&quot; with an external
  journal on &quot;journal&quot;. It is equivalent to the command:
<div class="Pp"></div>
<pre>
 mke2fs -t fstype -b blocksize -J device=&lt;journal&gt; &lt;device&gt;
</pre>
<div class="Pp"></div>
See also &quot;mke2journal&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mke2fs-JL"><a class="selflink" href="#mke2fs-JL">mke2fs-JL</a></h2>
<pre>
 mke2fs-JL fstype blocksize device label
</pre>
<div class="Pp"></div>
This creates an ext2/3/4 filesystem on &quot;device&quot; with an external
  journal on the journal labeled &quot;label&quot;.
<div class="Pp"></div>
See also &quot;mke2journal-L&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mke2fs-JU"><a class="selflink" href="#mke2fs-JU">mke2fs-JU</a></h2>
<pre>
 mke2fs-JU fstype blocksize device uuid
</pre>
<div class="Pp"></div>
This creates an ext2/3/4 filesystem on &quot;device&quot; with an external
  journal on the journal with UUID &quot;uuid&quot;.
<div class="Pp"></div>
See also &quot;mke2journal-U&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;linuxfsuuid&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mke2journal"><a class="selflink" href="#mke2journal">mke2journal</a></h2>
<pre>
 mke2journal blocksize device
</pre>
<div class="Pp"></div>
This creates an ext2 external journal on &quot;device&quot;. It is equivalent to
  the command:
<div class="Pp"></div>
<pre>
 mke2fs -O journal_dev -b blocksize device
</pre>
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mke2journal-L"><a class="selflink" href="#mke2journal-L">mke2journal-L</a></h2>
<pre>
 mke2journal-L blocksize label device
</pre>
<div class="Pp"></div>
This creates an ext2 external journal on &quot;device&quot; with label
  &quot;label&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mke2journal-U"><a class="selflink" href="#mke2journal-U">mke2journal-U</a></h2>
<pre>
 mke2journal-U blocksize uuid device
</pre>
<div class="Pp"></div>
This creates an ext2 external journal on &quot;device&quot; with UUID
  &quot;uuid&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mke2fs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;linuxfsuuid&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mkfifo"><a class="selflink" href="#mkfifo">mkfifo</a></h2>
<pre>
 mkfifo mode path
</pre>
<div class="Pp"></div>
This call creates a FIFO (named pipe) called &quot;path&quot; with mode
  &quot;mode&quot;. It is just a convenient wrapper around &quot;mknod&quot;.
<div class="Pp"></div>
Unlike with &quot;mknod&quot;, &quot;mode&quot; <b>must</b> contain only
  permissions bits.
<div class="Pp"></div>
The mode actually set is affected by the umask.
<div class="Pp"></div>
This command depends on the feature &quot;mknod&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mkfs"><a class="selflink" href="#mkfs">mkfs</a></h2>
<h2 class="Ss" title="Ss" id="mkfs-opts"><a class="selflink" href="#mkfs-opts">mkfs-opts</a></h2>
<pre>
 mkfs fstype device [blocksize:N] [features:..] [inode:N] [sectorsize:N] [label:..]
</pre>
<div class="Pp"></div>
This function creates a filesystem on &quot;device&quot;. The filesystem type is
  &quot;fstype&quot;, for example &quot;ext3&quot;.
<div class="Pp"></div>
The optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;blocksize&quot;</dt>
  <dd class="It-tag">The filesystem block size. Supported block sizes depend on
      the filesystem type, but typically they are 1024, 2048 or 4096 for Linux
      ext2/3 filesystems.
    <div style="height: 1.00em;">&#x00A0;</div>
    For VFAT and NTFS the &quot;blocksize&quot; parameter is treated as the
      requested cluster size.
    <div style="height: 1.00em;">&#x00A0;</div>
    For UFS block sizes, please see <i>mkfs.ufs</i>(8).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;features&quot;</dt>
  <dd class="It-tag">This passes the <i>-O</i> parameter to the external mkfs
      program.
    <div style="height: 1.00em;">&#x00A0;</div>
    For certain filesystem types, this allows extra filesystem features to be
      selected. See <i>mke2fs</i>(8) and <i>mkfs.ufs</i>(8) for more details.
    <div style="height: 1.00em;">&#x00A0;</div>
    You cannot use this optional parameter with the &quot;gfs&quot; or
      &quot;gfs2&quot; filesystem type.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;inode&quot;</dt>
  <dd class="It-tag">This passes the <i>-I</i> parameter to the external
      <i>mke2fs</i>(8) program which sets the inode size (only for ext2/3/4
      filesystems at present).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;sectorsize&quot;</dt>
  <dd class="It-tag">This passes the <i>-S</i> parameter to external
      <i>mkfs.ufs</i>(8) program, which sets sector size for ufs
    filesystem.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="mkfs-b"><a class="selflink" href="#mkfs-b">mkfs-b</a></h2>
<pre>
 mkfs-b fstype blocksize device
</pre>
<div class="Pp"></div>
This call is similar to &quot;mkfs&quot;, but it allows you to control the block
  size of the resulting filesystem. Supported block sizes depend on the
  filesystem type, but typically they are 1024, 2048 or 4096 only.
<div class="Pp"></div>
For VFAT and NTFS the &quot;blocksize&quot; parameter is treated as the
  requested cluster size.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mkfs&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mkfs-btrfs"><a class="selflink" href="#mkfs-btrfs">mkfs-btrfs</a></h2>
<pre>
 mkfs-btrfs 'devices ...' [allocstart:N] [bytecount:N] [datatype:..] [leafsize:N] [label:..] [metadata:..] [nodesize:N] [sectorsize:N]
</pre>
<div class="Pp"></div>
Create a btrfs filesystem, allowing all configurables to be set. For more
  information on the optional arguments, see <i>mkfs.btrfs</i>(8).
<div class="Pp"></div>
Since btrfs filesystems can span multiple devices, this takes a non-empty list
  of devices.
<div class="Pp"></div>
To create general filesystems, use &quot;mkfs&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;btrfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mklost-and-found"><a class="selflink" href="#mklost-and-found">mklost-and-found</a></h2>
<pre>
 mklost-and-found mountpoint
</pre>
<div class="Pp"></div>
Make the &quot;lost+found&quot; directory, normally in the root directory of an
  ext2/3/4 filesystem. &quot;mountpoint&quot; is the directory under which we
  try to create the &quot;lost+found&quot; directory.
<h2 class="Ss" title="Ss" id="mkmountpoint"><a class="selflink" href="#mkmountpoint">mkmountpoint</a></h2>
<pre>
 mkmountpoint exemptpath
</pre>
<div class="Pp"></div>
&quot;mkmountpoint&quot; and &quot;rmmountpoint&quot; are specialized calls that
  can be used to create extra mountpoints before mounting the first filesystem.
<div class="Pp"></div>
These calls are <i>only</i> necessary in some very limited circumstances, mainly
  the case where you want to mount a mix of unrelated and/or read-only
  filesystems together.
<div class="Pp"></div>
For example, live CDs often contain a &quot;Russian doll&quot; nest of
  filesystems, an ISO outer layer, with a squashfs image inside, with an ext2/3
  image inside that. You can unpack this as follows in guestfish:
<div class="Pp"></div>
<pre>
 add-ro Fedora-11-i686-Live.iso
 run
 mkmountpoint /cd
 mkmountpoint /sqsh
 mkmountpoint /ext3fs
 mount /dev/sda /cd
 mount-loop /cd/LiveOS/squashfs.img /sqsh
 mount-loop /sqsh/LiveOS/ext3fs.img /ext3fs
</pre>
<div class="Pp"></div>
The inner filesystem is now unpacked under the /ext3fs mountpoint.
<div class="Pp"></div>
&quot;mkmountpoint&quot; is not compatible with &quot;umount-all&quot;. You may
  get unexpected errors if you try to mix these calls. It is safest to manually
  unmount filesystems and remove mountpoints after use.
<div class="Pp"></div>
&quot;umount-all&quot; unmounts filesystems by sorting the paths longest first,
  so for this to work for manual mountpoints, you must ensure that the innermost
  mountpoints have the longest pathnames, as in the example code above.
<div class="Pp"></div>
For more details see https://bugzilla.redhat.com/show_bug.cgi?id=599503
<div class="Pp"></div>
Autosync [see &quot;set-autosync&quot;, this is set by default on handles] can
  cause &quot;umount-all&quot; to be called when the handle is closed which can
  also trigger these issues.
<h2 class="Ss" title="Ss" id="mknod"><a class="selflink" href="#mknod">mknod</a></h2>
<pre>
 mknod mode devmajor devminor path
</pre>
<div class="Pp"></div>
This call creates block or character special devices, or named pipes (FIFOs).
<div class="Pp"></div>
The &quot;mode&quot; parameter should be the mode, using the standard constants.
  &quot;devmajor&quot; and &quot;devminor&quot; are the device major and minor
  numbers, only used when creating block and character special devices.
<div class="Pp"></div>
Note that, just like <i>mknod</i>(2), the mode must be bitwise OR'd with
  S_IFBLK, S_IFCHR, S_IFIFO or S_IFSOCK (otherwise this call just creates a
  regular file). These constants are available in the standard Linux header
  files, or you can use &quot;mknod-b&quot;, &quot;mknod-c&quot; or
  &quot;mkfifo&quot; which are wrappers around this command which bitwise OR in
  the appropriate constant for you.
<div class="Pp"></div>
The mode actually set is affected by the umask.
<div class="Pp"></div>
This command depends on the feature &quot;mknod&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mknod-b"><a class="selflink" href="#mknod-b">mknod-b</a></h2>
<pre>
 mknod-b mode devmajor devminor path
</pre>
<div class="Pp"></div>
This call creates a block device node called &quot;path&quot; with mode
  &quot;mode&quot; and device major/minor &quot;devmajor&quot; and
  &quot;devminor&quot;. It is just a convenient wrapper around
  &quot;mknod&quot;.
<div class="Pp"></div>
Unlike with &quot;mknod&quot;, &quot;mode&quot; <b>must</b> contain only
  permissions bits.
<div class="Pp"></div>
The mode actually set is affected by the umask.
<div class="Pp"></div>
This command depends on the feature &quot;mknod&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mknod-c"><a class="selflink" href="#mknod-c">mknod-c</a></h2>
<pre>
 mknod-c mode devmajor devminor path
</pre>
<div class="Pp"></div>
This call creates a char device node called &quot;path&quot; with mode
  &quot;mode&quot; and device major/minor &quot;devmajor&quot; and
  &quot;devminor&quot;. It is just a convenient wrapper around
  &quot;mknod&quot;.
<div class="Pp"></div>
Unlike with &quot;mknod&quot;, &quot;mode&quot; <b>must</b> contain only
  permissions bits.
<div class="Pp"></div>
The mode actually set is affected by the umask.
<div class="Pp"></div>
This command depends on the feature &quot;mknod&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mkswap"><a class="selflink" href="#mkswap">mkswap</a></h2>
<h2 class="Ss" title="Ss" id="mkswap-opts"><a class="selflink" href="#mkswap-opts">mkswap-opts</a></h2>
<pre>
 mkswap device [label:..] [uuid:..]
</pre>
<div class="Pp"></div>
Create a Linux swap partition on &quot;device&quot;.
<div class="Pp"></div>
The option arguments &quot;label&quot; and &quot;uuid&quot; allow you to set the
  label and/or UUID of the new swap partition.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="mkswap-L"><a class="selflink" href="#mkswap-L">mkswap-L</a></h2>
<pre>
 mkswap-L label device
</pre>
<div class="Pp"></div>
Create a swap partition on &quot;device&quot; with label &quot;label&quot;.
<div class="Pp"></div>
Note that you cannot attach a swap label to a block device (eg.
  <i>/dev/sda</i>), just to a partition. This appears to be a limitation of the
  kernel or swap tools.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mkswap&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="mkswap-U"><a class="selflink" href="#mkswap-U">mkswap-U</a></h2>
<pre>
 mkswap-U uuid device
</pre>
<div class="Pp"></div>
Create a swap partition on &quot;device&quot; with UUID &quot;uuid&quot;.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;mkswap&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;linuxfsuuid&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mkswap-file"><a class="selflink" href="#mkswap-file">mkswap-file</a></h2>
<pre>
 mkswap-file path
</pre>
<div class="Pp"></div>
Create a swap file.
<div class="Pp"></div>
This command just writes a swap file signature to an existing file. To create
  the file itself, use something like &quot;fallocate&quot;.
<h2 class="Ss" title="Ss" id="mktemp"><a class="selflink" href="#mktemp">mktemp</a></h2>
<pre>
 mktemp tmpl [suffix:..]
</pre>
<div class="Pp"></div>
This command creates a temporary file. The &quot;tmpl&quot; parameter should be
  a full pathname for the temporary directory name with the final six characters
  being &quot;XXXXXX&quot;.
<div class="Pp"></div>
For example: &quot;/tmp/myprogXXXXXX&quot; or &quot;/Temp/myprogXXXXXX&quot;,
  the second one being suitable for Windows filesystems.
<div class="Pp"></div>
The name of the temporary file that was created is returned.
<div class="Pp"></div>
The temporary file is created with mode 0600 and is owned by root.
<div class="Pp"></div>
The caller is responsible for deleting the temporary file after use.
<div class="Pp"></div>
If the optional &quot;suffix&quot; parameter is given, then the suffix (eg.
  &quot;.txt&quot;) is appended to the temporary name.
<div class="Pp"></div>
See also: &quot;mkdtemp&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="modprobe"><a class="selflink" href="#modprobe">modprobe</a></h2>
<pre>
 modprobe modulename
</pre>
<div class="Pp"></div>
This loads a kernel module in the appliance.
<div class="Pp"></div>
This command depends on the feature &quot;linuxmodules&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="mount"><a class="selflink" href="#mount">mount</a></h2>
<pre>
 mount mountable mountpoint
</pre>
<div class="Pp"></div>
Mount a guest disk at a position in the filesystem. Block devices are named
  <i>/dev/sda</i>, <i>/dev/sdb</i> and so on, as they were added to the guest.
  If those block devices contain partitions, they will have the usual names (eg.
  <i>/dev/sda1</i>). Also LVM <i>/dev/VG/LV</i>-style names can be used, or
  'mountable' strings returned by &quot;list-filesystems&quot; or
  &quot;inspect-get-mountpoints&quot;.
<div class="Pp"></div>
The rules are the same as for <i>mount</i>(2): A filesystem must first be
  mounted on <i>/</i> before others can be mounted. Other filesystems can only
  be mounted on directories which already exist.
<div class="Pp"></div>
The mounted filesystem is writable, if we have sufficient permissions on the
  underlying device.
<div class="Pp"></div>
Before libguestfs 1.13.16, this call implicitly added the options
  &quot;sync&quot; and &quot;noatime&quot;. The &quot;sync&quot; option greatly
  slowed writes and caused many problems for users. If your program might need
  to work with older versions of libguestfs, use &quot;mount-options&quot;
  instead (using an empty string for the first parameter if you don't want any
  options).
<h2 class="Ss" title="Ss" id="mount-local"><a class="selflink" href="#mount-local">mount-local</a></h2>
<pre>
 mount-local localmountpoint [readonly:true|false] [options:..] [cachetimeout:N] [debugcalls:true|false]
</pre>
<div class="Pp"></div>
This call exports the libguestfs-accessible filesystem to a local mountpoint
  (directory) called &quot;localmountpoint&quot;. Ordinary reads and writes to
  files and directories under &quot;localmountpoint&quot; are redirected through
  libguestfs.
<div class="Pp"></div>
If the optional &quot;readonly&quot; flag is set to true, then writes to the
  filesystem return error &quot;EROFS&quot;.
<div class="Pp"></div>
&quot;options&quot; is a comma-separated list of mount options. See
  <i>guestmount</i>(1) for some useful options.
<div class="Pp"></div>
&quot;cachetimeout&quot; sets the timeout (in seconds) for cached directory
  entries. The default is 60 seconds. See <i>guestmount</i>(1) for further
  information.
<div class="Pp"></div>
If &quot;debugcalls&quot; is set to true, then additional debugging information
  is generated for every FUSE call.
<div class="Pp"></div>
When &quot;mount-local&quot; returns, the filesystem is ready, but is not
  processing requests (access to it will block). You have to call
  &quot;mount-local-run&quot; to run the main loop.
<div class="Pp"></div>
See &quot;MOUNT LOCAL&quot; in <i>guestfs</i>(3) for full documentation.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="mount-local-run"><a class="selflink" href="#mount-local-run">mount-local-run</a></h2>
<pre>
 mount-local-run
</pre>
<div class="Pp"></div>
Run the main loop which translates kernel calls to libguestfs calls.
<div class="Pp"></div>
This should only be called after &quot;mount-local&quot; returns successfully.
  The call will not return until the filesystem is unmounted.
<div class="Pp"></div>
<b>Note</b> you must <i>not</i> make concurrent libguestfs calls on the same
  handle from another thread.
<div class="Pp"></div>
You may call this from a different thread than the one which called
  &quot;mount-local&quot;, subject to the usual rules for threads and libguestfs
  (see &quot;MULTIPLE HANDLES AND MULTIPLE THREADS&quot; in <i>guestfs</i>(3)).
<div class="Pp"></div>
See &quot;MOUNT LOCAL&quot; in <i>guestfs</i>(3) for full documentation.
<h2 class="Ss" title="Ss" id="mount-loop"><a class="selflink" href="#mount-loop">mount-loop</a></h2>
<pre>
 mount-loop file mountpoint
</pre>
<div class="Pp"></div>
This command lets you mount <i>file</i> (a filesystem image in a file) on a
  mount point. It is entirely equivalent to the command &quot;mount -o loop file
  mountpoint&quot;.
<h2 class="Ss" title="Ss" id="mount-options"><a class="selflink" href="#mount-options">mount-options</a></h2>
<pre>
 mount-options options mountable mountpoint
</pre>
<div class="Pp"></div>
This is the same as the &quot;mount&quot; command, but it allows you to set the
  mount options as for the <i>mount</i>(8) <i>-o</i> flag.
<div class="Pp"></div>
If the &quot;options&quot; parameter is an empty string, then no options are
  passed (all options default to whatever the filesystem uses).
<h2 class="Ss" title="Ss" id="mount-ro"><a class="selflink" href="#mount-ro">mount-ro</a></h2>
<pre>
 mount-ro mountable mountpoint
</pre>
<div class="Pp"></div>
This is the same as the &quot;mount&quot; command, but it mounts the filesystem
  with the read-only ( <i>-o ro</i>) flag.
<h2 class="Ss" title="Ss" id="mount-vfs"><a class="selflink" href="#mount-vfs">mount-vfs</a></h2>
<pre>
 mount-vfs options vfstype mountable mountpoint
</pre>
<div class="Pp"></div>
This is the same as the &quot;mount&quot; command, but it allows you to set both
  the mount options and the vfstype as for the <i>mount</i>(8) <i>-o</i> and
  <i>-t</i> flags.
<h2 class="Ss" title="Ss" id="mountpoints"><a class="selflink" href="#mountpoints">mountpoints</a></h2>
<pre>
 mountpoints
</pre>
<div class="Pp"></div>
This call is similar to &quot;mounts&quot;. That call returns a list of devices.
  This one returns a hash table (map) of device name to directory where the
  device is mounted.
<h2 class="Ss" title="Ss" id="mounts"><a class="selflink" href="#mounts">mounts</a></h2>
<pre>
 mounts
</pre>
<div class="Pp"></div>
This returns the list of currently mounted filesystems. It returns the list of
  devices (eg. <i>/dev/sda1</i>, <i>/dev/VG/LV</i>).
<div class="Pp"></div>
Some internal mounts are not shown.
<div class="Pp"></div>
See also: &quot;mountpoints&quot;
<h2 class="Ss" title="Ss" id="mv"><a class="selflink" href="#mv">mv</a></h2>
<pre>
 mv src dest
</pre>
<div class="Pp"></div>
This moves a file from &quot;src&quot; to &quot;dest&quot; where
  &quot;dest&quot; is either a destination filename or destination directory.
<div class="Pp"></div>
See also: &quot;rename&quot;.
<h2 class="Ss" title="Ss" id="nr-devices"><a class="selflink" href="#nr-devices">nr-devices</a></h2>
<pre>
 nr-devices
</pre>
<div class="Pp"></div>
This returns the number of whole block devices that were added. This is the same
  as the number of devices that would be returned if you called
  &quot;list-devices&quot;.
<div class="Pp"></div>
To find out the maximum number of devices that could be added, call
  &quot;max-disks&quot;.
<h2 class="Ss" title="Ss" id="ntfs-3g-probe"><a class="selflink" href="#ntfs-3g-probe">ntfs-3g-probe</a></h2>
<pre>
 ntfs-3g-probe true|false device
</pre>
<div class="Pp"></div>
This command runs the <i>ntfs-3g.probe</i>(8) command which probes an NTFS
  &quot;device&quot; for mountability. (Not all NTFS volumes can be mounted
  read-write, and some cannot be mounted at all).
<div class="Pp"></div>
&quot;rw&quot; is a boolean flag. Set it to true if you want to test if the
  volume can be mounted read-write. Set it to false if you want to test if the
  volume can be mounted read-only.
<div class="Pp"></div>
The return value is an integer which 0 if the operation would succeed, or some
  non-zero value documented in the <i>ntfs-3g.probe</i>(8) manual page.
<div class="Pp"></div>
This command depends on the feature &quot;ntfs3g&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ntfsclone-in"><a class="selflink" href="#ntfsclone-in">ntfsclone-in</a></h2>
<pre>
 ntfsclone-in (backupfile|-) device
</pre>
<div class="Pp"></div>
Restore the &quot;backupfile&quot; (from a previous call to
  &quot;ntfsclone-out&quot;) to &quot;device&quot;, overwriting any existing
  contents of this device.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command depends on the feature &quot;ntfs3g&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ntfsclone-out"><a class="selflink" href="#ntfsclone-out">ntfsclone-out</a></h2>
<pre>
 ntfsclone-out device (backupfile|-) [metadataonly:true|false] [rescue:true|false] [ignorefscheck:true|false] [preservetimestamps:true|false] [force:true|false]
</pre>
<div class="Pp"></div>
Stream the NTFS filesystem &quot;device&quot; to the local file
  &quot;backupfile&quot;. The format used for the backup file is a special
  format used by the <i>ntfsclone</i>(8) tool.
<div class="Pp"></div>
If the optional &quot;metadataonly&quot; flag is true, then <i>only</i> the
  metadata is saved, losing all the user data (this is useful for diagnosing
  some filesystem problems).
<div class="Pp"></div>
The optional &quot;rescue&quot;, &quot;ignorefscheck&quot;,
  &quot;preservetimestamps&quot; and &quot;force&quot; flags have precise
  meanings detailed in the <i>ntfsclone</i>(8) man page.
<div class="Pp"></div>
Use &quot;ntfsclone-in&quot; to restore the file back to a libguestfs device.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ntfs3g&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ntfsfix"><a class="selflink" href="#ntfsfix">ntfsfix</a></h2>
<pre>
 ntfsfix device [clearbadsectors:true|false]
</pre>
<div class="Pp"></div>
This command repairs some fundamental NTFS inconsistencies, resets the NTFS
  journal file, and schedules an NTFS consistency check for the first boot into
  Windows.
<div class="Pp"></div>
This is <i>not</i> an equivalent of Windows &quot;chkdsk&quot;. It does
  <i>not</i> scan the filesystem for inconsistencies.
<div class="Pp"></div>
The optional &quot;clearbadsectors&quot; flag clears the list of bad sectors.
  This is useful after cloning a disk with bad sectors to a new disk.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ntfs3g&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ntfsresize"><a class="selflink" href="#ntfsresize">ntfsresize</a></h2>
<h2 class="Ss" title="Ss" id="ntfsresize-opts"><a class="selflink" href="#ntfsresize-opts">ntfsresize-opts</a></h2>
<pre>
 ntfsresize device [size:N] [force:true|false]
</pre>
<div class="Pp"></div>
This command resizes an NTFS filesystem, expanding or shrinking it to the size
  of the underlying device.
<div class="Pp"></div>
The optional parameters are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;size&quot;</dt>
  <dd class="It-tag">The new size (in bytes) of the filesystem. If omitted, the
      filesystem is resized to fit the container (eg. partition).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;force&quot;</dt>
  <dd class="It-tag">If this option is true, then force the resize of the
      filesystem even if the filesystem is marked as requiring a consistency
      check.
    <div style="height: 1.00em;">&#x00A0;</div>
    After the resize operation, the filesystem is always marked as requiring a
      consistency check (for safety). You have to boot into Windows to perform
      this check and clear this condition. If you <i>don't</i> set the
      &quot;force&quot; option then it is not possible to call
      &quot;ntfsresize&quot; multiple times on a single filesystem without
      booting into Windows between each resize.</dd>
</dl>
<div class="Pp"></div>
See also <i>ntfsresize</i>(8).
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;ntfsprogs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="ntfsresize-size"><a class="selflink" href="#ntfsresize-size">ntfsresize-size</a></h2>
<pre>
 ntfsresize-size device size
</pre>
<div class="Pp"></div>
This command is the same as &quot;ntfsresize&quot; except that it allows you to
  specify the new size (in bytes) explicitly.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;ntfsresize&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;ntfsprogs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="parse-environment"><a class="selflink" href="#parse-environment">parse-environment</a></h2>
<pre>
 parse-environment
</pre>
<div class="Pp"></div>
Parse the program's environment and set flags in the handle accordingly. For
  example if &quot;LIBGUESTFS_DEBUG=1&quot; then the 'verbose' flag is set in
  the handle.
<div class="Pp"></div>
<i>Most programs do not need to call this</i>. It is done implicitly when you
  call &quot;create&quot;.
<div class="Pp"></div>
See &quot;ENVIRONMENT VARIABLES&quot; in <i>guestfs</i>(3) for a list of
  environment variables that can affect libguestfs handles. See also
  &quot;guestfs_create_flags&quot; in <i>guestfs</i>(3), and
  &quot;parse-environment-list&quot;.
<h2 class="Ss" title="Ss" id="parse-environment-list"><a class="selflink" href="#parse-environment-list">parse-environment-list</a></h2>
<pre>
 parse-environment-list 'environment ...'
</pre>
<div class="Pp"></div>
Parse the list of strings in the argument &quot;environment&quot; and set flags
  in the handle accordingly. For example if &quot;LIBGUESTFS_DEBUG=1&quot; is a
  string in the list, then the 'verbose' flag is set in the handle.
<div class="Pp"></div>
This is the same as &quot;parse-environment&quot; except that it parses an
  explicit list of strings instead of the program's environment.
<h2 class="Ss" title="Ss" id="part-add"><a class="selflink" href="#part-add">part-add</a></h2>
<pre>
 part-add device prlogex startsect endsect
</pre>
<div class="Pp"></div>
This command adds a partition to &quot;device&quot;. If there is no partition
  table on the device, call &quot;part-init&quot; first.
<div class="Pp"></div>
The &quot;prlogex&quot; parameter is the type of partition. Normally you should
  pass &quot;p&quot; or &quot;primary&quot; here, but MBR partition tables also
  support &quot;l&quot; (or &quot;logical&quot;) and &quot;e&quot; (or
  &quot;extended&quot;) partition types.
<div class="Pp"></div>
&quot;startsect&quot; and &quot;endsect&quot; are the start and end of the
  partition in <i>sectors</i>. &quot;endsect&quot; may be negative, which means
  it counts backwards from the end of the disk (&quot;-1&quot; is the last
  sector).
<div class="Pp"></div>
Creating a partition which covers the whole disk is not so easy. Use
  &quot;part-disk&quot; to do that.
<h2 class="Ss" title="Ss" id="part-del"><a class="selflink" href="#part-del">part-del</a></h2>
<pre>
 part-del device partnum
</pre>
<div class="Pp"></div>
This command deletes the partition numbered &quot;partnum&quot; on
  &quot;device&quot;.
<div class="Pp"></div>
Note that in the case of MBR partitioning, deleting an extended partition also
  deletes any logical partitions it contains.
<h2 class="Ss" title="Ss" id="part-disk"><a class="selflink" href="#part-disk">part-disk</a></h2>
<pre>
 part-disk device parttype
</pre>
<div class="Pp"></div>
This command is simply a combination of &quot;part-init&quot; followed by
  &quot;part-add&quot; to create a single primary partition covering the whole
  disk.
<div class="Pp"></div>
&quot;parttype&quot; is the partition table type, usually &quot;mbr&quot; or
  &quot;gpt&quot;, but other possible values are described in
  &quot;part-init&quot;.
<h2 class="Ss" title="Ss" id="part-get-bootable"><a class="selflink" href="#part-get-bootable">part-get-bootable</a></h2>
<pre>
 part-get-bootable device partnum
</pre>
<div class="Pp"></div>
This command returns true if the partition &quot;partnum&quot; on
  &quot;device&quot; has the bootable flag set.
<div class="Pp"></div>
See also &quot;part-set-bootable&quot;.
<h2 class="Ss" title="Ss" id="part-get-gpt-guid"><a class="selflink" href="#part-get-gpt-guid">part-get-gpt-guid</a></h2>
<pre>
 part-get-gpt-guid device partnum
</pre>
<div class="Pp"></div>
Return the GUID of numbered GPT partition &quot;partnum&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;gdisk&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="part-get-gpt-type"><a class="selflink" href="#part-get-gpt-type">part-get-gpt-type</a></h2>
<pre>
 part-get-gpt-type device partnum
</pre>
<div class="Pp"></div>
Return the type GUID of numbered GPT partition &quot;partnum&quot;. For MBR
  partitions, return an appropriate GUID corresponding to the MBR type.
  Behaviour is undefined for other partition types.
<div class="Pp"></div>
This command depends on the feature &quot;gdisk&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="part-get-mbr-id"><a class="selflink" href="#part-get-mbr-id">part-get-mbr-id</a></h2>
<pre>
 part-get-mbr-id device partnum
</pre>
<div class="Pp"></div>
Returns the MBR type byte (also known as the ID byte) from the numbered
  partition &quot;partnum&quot;.
<div class="Pp"></div>
Note that only MBR (old DOS-style) partitions have type bytes. You will get
  undefined results for other partition table types (see
  &quot;part-get-parttype&quot;).
<h2 class="Ss" title="Ss" id="part-get-mbr-part-type"><a class="selflink" href="#part-get-mbr-part-type">part-get-mbr-part-type</a></h2>
<pre>
 part-get-mbr-part-type device partnum
</pre>
<div class="Pp"></div>
This returns the partition type of an MBR partition numbered &quot;partnum&quot;
  on device &quot;device&quot;.
<div class="Pp"></div>
It returns &quot;primary&quot;, &quot;logical&quot;, or &quot;extended&quot;.
<h2 class="Ss" title="Ss" id="part-get-name"><a class="selflink" href="#part-get-name">part-get-name</a></h2>
<pre>
 part-get-name device partnum
</pre>
<div class="Pp"></div>
This gets the partition name on partition numbered &quot;partnum&quot; on device
  &quot;device&quot;. Note that partitions are numbered from 1.
<div class="Pp"></div>
The partition name can only be read on certain types of partition table. This
  works on &quot;gpt&quot; but not on &quot;mbr&quot; partitions.
<h2 class="Ss" title="Ss" id="part-get-parttype"><a class="selflink" href="#part-get-parttype">part-get-parttype</a></h2>
<pre>
 part-get-parttype device
</pre>
<div class="Pp"></div>
This command examines the partition table on &quot;device&quot; and returns the
  partition table type (format) being used.
<div class="Pp"></div>
Common return values include: &quot;msdos&quot; (a DOS/Windows style MBR
  partition table), &quot;gpt&quot; (a GPT/EFI-style partition table). Other
  values are possible, although unusual. See &quot;part-init&quot; for a full
  list.
<h2 class="Ss" title="Ss" id="part-init"><a class="selflink" href="#part-init">part-init</a></h2>
<pre>
 part-init device parttype
</pre>
<div class="Pp"></div>
This creates an empty partition table on &quot;device&quot; of one of the
  partition types listed below. Usually &quot;parttype&quot; should be either
  &quot;msdos&quot; or &quot;gpt&quot; (for large disks).
<div class="Pp"></div>
Initially there are no partitions. Following this, you should call
  &quot;part-add&quot; for each partition required.
<div class="Pp"></div>
Possible values for &quot;parttype&quot; are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>efi</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>gpt</b></dt>
  <dd class="It-tag">Intel EFI / GPT partition table.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is recommended for &gt;= 2 TB partitions that will be accessed from
      Linux and Intel-based Mac OS X. It also has limited backwards
      compatibility with the &quot;mbr&quot; format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mbr</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>msdos</b></dt>
  <dd class="It-tag">The standard PC &quot;Master Boot Record&quot; (MBR) format
      used by MS-DOS and Windows. This partition type will <b>only</b> work for
      device sizes up to 2 TB. For large disks we recommend using
      &quot;gpt&quot;.</dd>
</dl>
<div class="Pp"></div>
Other partition table types that may work but are not supported include:
<dl class="Bl-tag">
  <dt class="It-tag"><b>aix</b></dt>
  <dd class="It-tag">AIX disk labels.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>amiga</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rdb</b></dt>
  <dd class="It-tag">Amiga &quot;Rigid Disk Block&quot; format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bsd</b></dt>
  <dd class="It-tag">BSD disk labels.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dasd</b></dt>
  <dd class="It-tag">DASD, used on IBM mainframes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dvh</b></dt>
  <dd class="It-tag">MIPS/SGI volumes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mac</b></dt>
  <dd class="It-tag">Old Mac partition format. Modern Macs use
    &quot;gpt&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pc98</b></dt>
  <dd class="It-tag">NEC PC-98 format, common in Japan apparently.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sun</b></dt>
  <dd class="It-tag">Sun disk labels.</dd>
</dl>
<h2 class="Ss" title="Ss" id="part-list"><a class="selflink" href="#part-list">part-list</a></h2>
<pre>
 part-list device
</pre>
<div class="Pp"></div>
This command parses the partition table on &quot;device&quot; and returns the
  list of partitions found.
<div class="Pp"></div>
The fields in the returned structure are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>part_num</b></dt>
  <dd class="It-tag">Partition number, counting from 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>part_start</b></dt>
  <dd class="It-tag">Start of the partition <i>in bytes</i>. To get sectors you
      have to divide by the device's sector size, see
      &quot;blockdev-getss&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>part_end</b></dt>
  <dd class="It-tag">End of the partition in bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>part_size</b></dt>
  <dd class="It-tag">Size of the partition in bytes.</dd>
</dl>
<h2 class="Ss" title="Ss" id="part-set-bootable"><a class="selflink" href="#part-set-bootable">part-set-bootable</a></h2>
<pre>
 part-set-bootable device partnum true|false
</pre>
<div class="Pp"></div>
This sets the bootable flag on partition numbered &quot;partnum&quot; on device
  &quot;device&quot;. Note that partitions are numbered from 1.
<div class="Pp"></div>
The bootable flag is used by some operating systems (notably Windows) to
  determine which partition to boot from. It is by no means universally
  recognized.
<h2 class="Ss" title="Ss" id="part-set-gpt-guid"><a class="selflink" href="#part-set-gpt-guid">part-set-gpt-guid</a></h2>
<pre>
 part-set-gpt-guid device partnum guid
</pre>
<div class="Pp"></div>
Set the GUID of numbered GPT partition &quot;partnum&quot; to &quot;guid&quot;.
  Return an error if the partition table of &quot;device&quot; isn't GPT, or if
  &quot;guid&quot; is not a valid GUID.
<div class="Pp"></div>
This command depends on the feature &quot;gdisk&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="part-set-gpt-type"><a class="selflink" href="#part-set-gpt-type">part-set-gpt-type</a></h2>
<pre>
 part-set-gpt-type device partnum guid
</pre>
<div class="Pp"></div>
Set the type GUID of numbered GPT partition &quot;partnum&quot; to
  &quot;guid&quot;. Return an error if the partition table of &quot;device&quot;
  isn't GPT, or if &quot;guid&quot; is not a valid GUID.
<div class="Pp"></div>
See http://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs for a
  useful list of type GUIDs.
<div class="Pp"></div>
This command depends on the feature &quot;gdisk&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="part-set-mbr-id"><a class="selflink" href="#part-set-mbr-id">part-set-mbr-id</a></h2>
<pre>
 part-set-mbr-id device partnum idbyte
</pre>
<div class="Pp"></div>
Sets the MBR type byte (also known as the ID byte) of the numbered partition
  &quot;partnum&quot; to &quot;idbyte&quot;. Note that the type bytes quoted in
  most documentation are in fact hexadecimal numbers, but usually documented
  without any leading &quot;0x&quot; which might be confusing.
<div class="Pp"></div>
Note that only MBR (old DOS-style) partitions have type bytes. You will get
  undefined results for other partition table types (see
  &quot;part-get-parttype&quot;).
<h2 class="Ss" title="Ss" id="part-set-name"><a class="selflink" href="#part-set-name">part-set-name</a></h2>
<pre>
 part-set-name device partnum name
</pre>
<div class="Pp"></div>
This sets the partition name on partition numbered &quot;partnum&quot; on device
  &quot;device&quot;. Note that partitions are numbered from 1.
<div class="Pp"></div>
The partition name can only be set on certain types of partition table. This
  works on &quot;gpt&quot; but not on &quot;mbr&quot; partitions.
<h2 class="Ss" title="Ss" id="part-to-dev"><a class="selflink" href="#part-to-dev">part-to-dev</a></h2>
<pre>
 part-to-dev partition
</pre>
<div class="Pp"></div>
This function takes a partition name (eg. &quot;/dev/sdb1&quot;) and removes the
  partition number, returning the device name (eg. &quot;/dev/sdb&quot;).
<div class="Pp"></div>
The named partition must exist, for example as a string returned from
  &quot;list-partitions&quot;.
<div class="Pp"></div>
See also &quot;part-to-partnum&quot;, &quot;device-index&quot;.
<h2 class="Ss" title="Ss" id="part-to-partnum"><a class="selflink" href="#part-to-partnum">part-to-partnum</a></h2>
<pre>
 part-to-partnum partition
</pre>
<div class="Pp"></div>
This function takes a partition name (eg. &quot;/dev/sdb1&quot;) and returns the
  partition number (eg. 1).
<div class="Pp"></div>
The named partition must exist, for example as a string returned from
  &quot;list-partitions&quot;.
<div class="Pp"></div>
See also &quot;part-to-dev&quot;.
<h2 class="Ss" title="Ss" id="ping-daemon"><a class="selflink" href="#ping-daemon">ping-daemon</a></h2>
<pre>
 ping-daemon
</pre>
<div class="Pp"></div>
This is a test probe into the guestfs daemon running inside the libguestfs
  appliance. Calling this function checks that the daemon responds to the ping
  message, without affecting the daemon or attached block device(s) in any other
  way.
<h2 class="Ss" title="Ss" id="pread"><a class="selflink" href="#pread">pread</a></h2>
<pre>
 pread path count offset
</pre>
<div class="Pp"></div>
This command lets you read part of a file. It reads &quot;count&quot; bytes of
  the file, starting at &quot;offset&quot;, from file &quot;path&quot;.
<div class="Pp"></div>
This may read fewer bytes than requested. For further details see the
  <i>pread</i>(2) system call.
<div class="Pp"></div>
See also &quot;pwrite&quot;, &quot;pread-device&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="pread-device"><a class="selflink" href="#pread-device">pread-device</a></h2>
<pre>
 pread-device device count offset
</pre>
<div class="Pp"></div>
This command lets you read part of a block device. It reads &quot;count&quot;
  bytes of &quot;device&quot;, starting at &quot;offset&quot;.
<div class="Pp"></div>
This may read fewer bytes than requested. For further details see the
  <i>pread</i>(2) system call.
<div class="Pp"></div>
See also &quot;pread&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="pvchange-uuid"><a class="selflink" href="#pvchange-uuid">pvchange-uuid</a></h2>
<pre>
 pvchange-uuid device
</pre>
<div class="Pp"></div>
Generate a new random UUID for the physical volume &quot;device&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvchange-uuid-all"><a class="selflink" href="#pvchange-uuid-all">pvchange-uuid-all</a></h2>
<pre>
 pvchange-uuid-all
</pre>
<div class="Pp"></div>
Generate new random UUIDs for all physical volumes.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvcreate"><a class="selflink" href="#pvcreate">pvcreate</a></h2>
<pre>
 pvcreate device
</pre>
<div class="Pp"></div>
This creates an LVM physical volume on the named &quot;device&quot;, where
  &quot;device&quot; should usually be a partition name such as
  <i>/dev/sda1</i>.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvremove"><a class="selflink" href="#pvremove">pvremove</a></h2>
<pre>
 pvremove device
</pre>
<div class="Pp"></div>
This wipes a physical volume &quot;device&quot; so that LVM will no longer
  recognise it.
<div class="Pp"></div>
The implementation uses the &quot;pvremove&quot; command which refuses to wipe
  physical volumes that contain any volume groups, so you have to remove those
  first.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvresize"><a class="selflink" href="#pvresize">pvresize</a></h2>
<pre>
 pvresize device
</pre>
<div class="Pp"></div>
This resizes (expands or shrinks) an existing LVM physical volume to match the
  new size of the underlying device.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvresize-size"><a class="selflink" href="#pvresize-size">pvresize-size</a></h2>
<pre>
 pvresize-size device size
</pre>
<div class="Pp"></div>
This command is the same as &quot;pvresize&quot; except that it allows you to
  specify the new size (in bytes) explicitly.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvs"><a class="selflink" href="#pvs">pvs</a></h2>
<pre>
 pvs
</pre>
<div class="Pp"></div>
List all the physical volumes detected. This is the equivalent of the
  <i>pvs</i>(8) command.
<div class="Pp"></div>
This returns a list of just the device names that contain PVs (eg.
  <i>/dev/sda2</i>).
<div class="Pp"></div>
See also &quot;pvs-full&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvs-full"><a class="selflink" href="#pvs-full">pvs-full</a></h2>
<pre>
 pvs-full
</pre>
<div class="Pp"></div>
List all the physical volumes detected. This is the equivalent of the
  <i>pvs</i>(8) command. The &quot;full&quot; version includes all fields.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="pvuuid"><a class="selflink" href="#pvuuid">pvuuid</a></h2>
<pre>
 pvuuid device
</pre>
<div class="Pp"></div>
This command returns the UUID of the LVM PV &quot;device&quot;.
<h2 class="Ss" title="Ss" id="pwrite"><a class="selflink" href="#pwrite">pwrite</a></h2>
<pre>
 pwrite path content offset
</pre>
<div class="Pp"></div>
This command writes to part of a file. It writes the data buffer
  &quot;content&quot; to the file &quot;path&quot; starting at offset
  &quot;offset&quot;.
<div class="Pp"></div>
This command implements the <i>pwrite</i>(2) system call, and like that system
  call it may not write the full data requested. The return value is the number
  of bytes that were actually written to the file. This could even be 0,
  although short writes are unlikely for regular files in ordinary
  circumstances.
<div class="Pp"></div>
See also &quot;pread&quot;, &quot;pwrite-device&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="pwrite-device"><a class="selflink" href="#pwrite-device">pwrite-device</a></h2>
<pre>
 pwrite-device device content offset
</pre>
<div class="Pp"></div>
This command writes to part of a device. It writes the data buffer
  &quot;content&quot; to &quot;device&quot; starting at offset
  &quot;offset&quot;.
<div class="Pp"></div>
This command implements the <i>pwrite</i>(2) system call, and like that system
  call it may not write the full data requested (although short writes to disk
  devices and partitions are probably impossible with standard Linux kernels).
<div class="Pp"></div>
See also &quot;pwrite&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="read-file"><a class="selflink" href="#read-file">read-file</a></h2>
<pre>
 read-file path
</pre>
<div class="Pp"></div>
This calls returns the contents of the file &quot;path&quot; as a buffer.
<div class="Pp"></div>
Unlike &quot;cat&quot;, this function can correctly handle files that contain
  embedded ASCII NUL characters.
<h2 class="Ss" title="Ss" id="read-lines"><a class="selflink" href="#read-lines">read-lines</a></h2>
<pre>
 read-lines path
</pre>
<div class="Pp"></div>
Return the contents of the file named &quot;path&quot;.
<div class="Pp"></div>
The file contents are returned as a list of lines. Trailing &quot;LF&quot; and
  &quot;CRLF&quot; character sequences are <i>not</i> returned.
<div class="Pp"></div>
Note that this function cannot correctly handle binary files (specifically,
  files containing &quot;\0&quot; character which is treated as end of string).
  For those you need to use the &quot;read-file&quot; function and split the
  buffer into lines yourself.
<h2 class="Ss" title="Ss" id="readdir"><a class="selflink" href="#readdir">readdir</a></h2>
<pre>
 readdir dir
</pre>
<div class="Pp"></div>
This returns the list of directory entries in directory &quot;dir&quot;.
<div class="Pp"></div>
All entries in the directory are returned, including &quot;.&quot; and
  &quot;..&quot;. The entries are <i>not</i> sorted, but returned in the same
  order as the underlying filesystem.
<div class="Pp"></div>
Also this call returns basic file type information about each file. The
  &quot;ftyp&quot; field will contain one of the following characters:
<dl class="Bl-tag">
  <dt class="It-tag">'b'</dt>
  <dd class="It-tag">Block special</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'c'</dt>
  <dd class="It-tag">Char special</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'d'</dt>
  <dd class="It-tag">Directory</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'f'</dt>
  <dd class="It-tag">FIFO (named pipe)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'l'</dt>
  <dd class="It-tag">Symbolic link</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'r'</dt>
  <dd class="It-tag">Regular file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'s'</dt>
  <dd class="It-tag">Socket</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'u'</dt>
  <dd class="It-tag">Unknown file type</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'?'</dt>
  <dd class="It-tag">The <i>readdir</i>(3) call returned a &quot;d_type&quot;
      field with an unexpected value</dd>
</dl>
<div class="Pp"></div>
This function is primarily intended for use by programs. To get a simple list of
  names, use &quot;ls&quot;. To get a printable directory for human consumption,
  use &quot;ll&quot;.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="readlink"><a class="selflink" href="#readlink">readlink</a></h2>
<pre>
 readlink path
</pre>
<div class="Pp"></div>
This command reads the target of a symbolic link.
<h2 class="Ss" title="Ss" id="readlinklist"><a class="selflink" href="#readlinklist">readlinklist</a></h2>
<pre>
 readlinklist path 'names ...'
</pre>
<div class="Pp"></div>
This call allows you to do a &quot;readlink&quot; operation on multiple files,
  where all files are in the directory &quot;path&quot;. &quot;names&quot; is
  the list of files from this directory.
<div class="Pp"></div>
On return you get a list of strings, with a one-to-one correspondence to the
  &quot;names&quot; list. Each string is the value of the symbolic link.
<div class="Pp"></div>
If the <i>readlink</i>(2) operation fails on any name, then the corresponding
  result string is the empty string &quot;&quot;. However the whole operation is
  completed even if there were <i>readlink</i>(2) errors, and so you can call
  this function with names where you don't know if they are symbolic links
  already (albeit slightly less efficient).
<div class="Pp"></div>
This call is intended for programs that want to efficiently list a directory
  contents without making many round-trips.
<h2 class="Ss" title="Ss" id="realpath"><a class="selflink" href="#realpath">realpath</a></h2>
<pre>
 realpath path
</pre>
<div class="Pp"></div>
Return the canonicalized absolute pathname of &quot;path&quot;. The returned
  path has no &quot;.&quot;, &quot;..&quot; or symbolic link path elements.
<h2 class="Ss" title="Ss" id="remount"><a class="selflink" href="#remount">remount</a></h2>
<pre>
 remount mountpoint [rw:true|false]
</pre>
<div class="Pp"></div>
This call allows you to change the &quot;rw&quot; (readonly/read-write) flag on
  an already mounted filesystem at &quot;mountpoint&quot;, converting a readonly
  filesystem to be read-write, or vice-versa.
<div class="Pp"></div>
Note that at the moment you must supply the &quot;optional&quot; &quot;rw&quot;
  parameter. In future we may allow other flags to be adjusted.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="remove-drive"><a class="selflink" href="#remove-drive">remove-drive</a></h2>
<pre>
 remove-drive label
</pre>
<div class="Pp"></div>
This function is conceptually the opposite of &quot;add-drive-opts&quot;. It
  removes the drive that was previously added with label &quot;label&quot;.
<div class="Pp"></div>
Note that in order to remove drives, you have to add them with labels (see the
  optional &quot;label&quot; argument to &quot;add-drive-opts&quot;). If you
  didn't use a label, then they cannot be removed.
<div class="Pp"></div>
You can call this function before or after launching the handle. If called after
  launch, if the backend supports it, we try to hot unplug the drive: see
  &quot;HOTPLUGGING&quot; in <i>guestfs</i>(3). The disk <b>must not</b> be in
  use (eg. mounted) when you do this. We try to detect if the disk is in use and
  stop you from doing this.
<h2 class="Ss" title="Ss" id="removexattr"><a class="selflink" href="#removexattr">removexattr</a></h2>
<pre>
 removexattr xattr path
</pre>
<div class="Pp"></div>
This call removes the extended attribute named &quot;xattr&quot; of the file
  &quot;path&quot;.
<div class="Pp"></div>
See also: &quot;lremovexattr&quot;, <i>attr</i>(5).
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="rename"><a class="selflink" href="#rename">rename</a></h2>
<pre>
 rename oldpath newpath
</pre>
<div class="Pp"></div>
Rename a file to a new place on the same filesystem. This is the same as the
  Linux <i>rename</i>(2) system call. In most cases you are better to use
  &quot;mv&quot; instead.
<h2 class="Ss" title="Ss" id="resize2fs"><a class="selflink" href="#resize2fs">resize2fs</a></h2>
<pre>
 resize2fs device
</pre>
<div class="Pp"></div>
This resizes an ext2, ext3 or ext4 filesystem to match the size of the
  underlying device.
<div class="Pp"></div>
See also &quot;RESIZE2FS ERRORS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="resize2fs-M"><a class="selflink" href="#resize2fs-M">resize2fs-M</a></h2>
<pre>
 resize2fs-M device
</pre>
<div class="Pp"></div>
This command is the same as &quot;resize2fs&quot;, but the filesystem is resized
  to its minimum size. This works like the <i>-M</i> option to the
  &quot;resize2fs&quot; command.
<div class="Pp"></div>
To get the resulting size of the filesystem you should call
  &quot;tune2fs-l&quot; and read the &quot;Block size&quot; and &quot;Block
  count&quot; values. These two numbers, multiplied together, give the resulting
  size of the minimal filesystem in bytes.
<div class="Pp"></div>
See also &quot;RESIZE2FS ERRORS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="resize2fs-size"><a class="selflink" href="#resize2fs-size">resize2fs-size</a></h2>
<pre>
 resize2fs-size device size
</pre>
<div class="Pp"></div>
This command is the same as &quot;resize2fs&quot; except that it allows you to
  specify the new size (in bytes) explicitly.
<div class="Pp"></div>
See also &quot;RESIZE2FS ERRORS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="rm"><a class="selflink" href="#rm">rm</a></h2>
<pre>
 rm path
</pre>
<div class="Pp"></div>
Remove the single file &quot;path&quot;.
<h2 class="Ss" title="Ss" id="rm-f"><a class="selflink" href="#rm-f">rm-f</a></h2>
<pre>
 rm-f path
</pre>
<div class="Pp"></div>
Remove the file &quot;path&quot;.
<div class="Pp"></div>
If the file doesn't exist, that error is ignored. (Other errors, eg. I/O errors
  or bad paths, are not ignored)
<div class="Pp"></div>
This call cannot remove directories. Use &quot;rmdir&quot; to remove an empty
  directory, or &quot;rm-rf&quot; to remove directories recursively.
<h2 class="Ss" title="Ss" id="rm-rf"><a class="selflink" href="#rm-rf">rm-rf</a></h2>
<pre>
 rm-rf path
</pre>
<div class="Pp"></div>
Remove the file or directory &quot;path&quot;, recursively removing the contents
  if its a directory. This is like the &quot;rm -rf&quot; shell command.
<h2 class="Ss" title="Ss" id="rmdir"><a class="selflink" href="#rmdir">rmdir</a></h2>
<pre>
 rmdir path
</pre>
<div class="Pp"></div>
Remove the single directory &quot;path&quot;.
<h2 class="Ss" title="Ss" id="rmmountpoint"><a class="selflink" href="#rmmountpoint">rmmountpoint</a></h2>
<pre>
 rmmountpoint exemptpath
</pre>
<div class="Pp"></div>
This calls removes a mountpoint that was previously created with
  &quot;mkmountpoint&quot;. See &quot;mkmountpoint&quot; for full details.
<h2 class="Ss" title="Ss" id="rsync"><a class="selflink" href="#rsync">rsync</a></h2>
<pre>
 rsync src dest [archive:true|false] [deletedest:true|false]
</pre>
<div class="Pp"></div>
This call may be used to copy or synchronize two directories under the same
  libguestfs handle. This uses the <i>rsync</i>(1) program which uses a fast
  algorithm that avoids copying files unnecessarily.
<div class="Pp"></div>
&quot;src&quot; and &quot;dest&quot; are the source and destination directories.
  Files are copied from &quot;src&quot; to &quot;dest&quot;.
<div class="Pp"></div>
The optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;archive&quot;</dt>
  <dd class="It-tag">Turns on archive mode. This is the same as passing the
      <i>--archive</i> flag to &quot;rsync&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;deletedest&quot;</dt>
  <dd class="It-tag">Delete files at the destination that do not exist at the
      source.</dd>
</dl>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;rsync&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="rsync-in"><a class="selflink" href="#rsync-in">rsync-in</a></h2>
<pre>
 rsync-in remote dest [archive:true|false] [deletedest:true|false]
</pre>
<div class="Pp"></div>
This call may be used to copy or synchronize the filesystem on the host or on a
  remote computer with the filesystem within libguestfs. This uses the
  <i>rsync</i>(1) program which uses a fast algorithm that avoids copying files
  unnecessarily.
<div class="Pp"></div>
This call only works if the network is enabled. See &quot;set-network&quot; or
  the <i>--network</i> option to various tools like <i>guestfish</i>(1).
<div class="Pp"></div>
Files are copied from the remote server and directory specified by
  &quot;remote&quot; to the destination directory &quot;dest&quot;.
<div class="Pp"></div>
The format of the remote server string is defined by <i>rsync</i>(1). Note that
  there is no way to supply a password or passphrase so the target must be set
  up not to require one.
<div class="Pp"></div>
The optional arguments are the same as those of &quot;rsync&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;rsync&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="rsync-out"><a class="selflink" href="#rsync-out">rsync-out</a></h2>
<pre>
 rsync-out src remote [archive:true|false] [deletedest:true|false]
</pre>
<div class="Pp"></div>
This call may be used to copy or synchronize the filesystem within libguestfs
  with a filesystem on the host or on a remote computer. This uses the
  <i>rsync</i>(1) program which uses a fast algorithm that avoids copying files
  unnecessarily.
<div class="Pp"></div>
This call only works if the network is enabled. See &quot;set-network&quot; or
  the <i>--network</i> option to various tools like <i>guestfish</i>(1).
<div class="Pp"></div>
Files are copied from the source directory &quot;src&quot; to the remote server
  and directory specified by &quot;remote&quot;.
<div class="Pp"></div>
The format of the remote server string is defined by <i>rsync</i>(1). Note that
  there is no way to supply a password or passphrase so the target must be set
  up not to require one.
<div class="Pp"></div>
The optional arguments are the same as those of &quot;rsync&quot;.
<div class="Pp"></div>
Globbing does not happen on the &quot;src&quot; parameter. In programs which use
  the API directly you have to expand wildcards yourself (see
  &quot;glob-expand&quot;). In guestfish you can use the &quot;glob&quot;
  command (see &quot;glob&quot;), for example:
<div class="Pp"></div>
<pre>
 &gt;&lt;fs&gt; glob rsync-out /* rsync://remote/
</pre>
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;rsync&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="scrub-device"><a class="selflink" href="#scrub-device">scrub-device</a></h2>
<pre>
 scrub-device device
</pre>
<div class="Pp"></div>
This command writes patterns over &quot;device&quot; to make data retrieval more
  difficult.
<div class="Pp"></div>
It is an interface to the <i>scrub</i>(1) program. See that manual page for more
  details.
<div class="Pp"></div>
This command depends on the feature &quot;scrub&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="scrub-file"><a class="selflink" href="#scrub-file">scrub-file</a></h2>
<pre>
 scrub-file file
</pre>
<div class="Pp"></div>
This command writes patterns over a file to make data retrieval more difficult.
<div class="Pp"></div>
The file is <i>removed</i> after scrubbing.
<div class="Pp"></div>
It is an interface to the <i>scrub</i>(1) program. See that manual page for more
  details.
<div class="Pp"></div>
This command depends on the feature &quot;scrub&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="scrub-freespace"><a class="selflink" href="#scrub-freespace">scrub-freespace</a></h2>
<pre>
 scrub-freespace dir
</pre>
<div class="Pp"></div>
This command creates the directory &quot;dir&quot; and then fills it with files
  until the filesystem is full, and scrubs the files as for
  &quot;scrub-file&quot;, and deletes them. The intention is to scrub any free
  space on the partition containing &quot;dir&quot;.
<div class="Pp"></div>
It is an interface to the <i>scrub</i>(1) program. See that manual page for more
  details.
<div class="Pp"></div>
This command depends on the feature &quot;scrub&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="selinux-relabel"><a class="selflink" href="#selinux-relabel">selinux-relabel</a></h2>
<pre>
 selinux-relabel specfile path [force:true|false]
</pre>
<div class="Pp"></div>
SELinux relabel parts of the filesystem.
<div class="Pp"></div>
The &quot;specfile&quot; parameter controls the policy spec file used. You have
  to parse &quot;/etc/selinux/config&quot; to find the correct SELinux policy
  and then pass the spec file, usually: &quot;/etc/selinux/&quot; +
  <i>selinuxtype</i> + &quot;/contexts/files/file_contexts&quot;.
<div class="Pp"></div>
The required &quot;path&quot; parameter is the top level directory where
  relabelling starts. Normally you should pass &quot;path&quot; as &quot;/&quot;
  to relabel the whole guest filesystem.
<div class="Pp"></div>
The optional &quot;force&quot; boolean controls whether the context is reset for
  customizable files, and also whether the user, role and range parts of the
  file context is changed.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;selinuxrelabel&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="set-append"><a class="selflink" href="#set-append">set-append</a></h2>
<h2 class="Ss" title="Ss" id="append"><a class="selflink" href="#append">append</a></h2>
<pre>
 set-append append
</pre>
<div class="Pp"></div>
This function is used to add additional options to the libguestfs appliance
  kernel command line.
<div class="Pp"></div>
The default is &quot;NULL&quot; unless overridden by setting
  &quot;LIBGUESTFS_APPEND&quot; environment variable.
<div class="Pp"></div>
Setting &quot;append&quot; to &quot;NULL&quot; means <i>no</i> additional
  options are passed (libguestfs always adds a few of its own).
<h2 class="Ss" title="Ss" id="set-attach-method"><a class="selflink" href="#set-attach-method">set-attach-method</a></h2>
<h2 class="Ss" title="Ss" id="attach-method"><a class="selflink" href="#attach-method">attach-method</a></h2>
<pre>
 set-attach-method backend
</pre>
<div class="Pp"></div>
Set the method that libguestfs uses to connect to the backend guestfsd daemon.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;set-backend&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="set-autosync"><a class="selflink" href="#set-autosync">set-autosync</a></h2>
<h2 class="Ss" title="Ss" id="autosync"><a class="selflink" href="#autosync">autosync</a></h2>
<pre>
 set-autosync true|false
</pre>
<div class="Pp"></div>
If &quot;autosync&quot; is true, this enables autosync. Libguestfs will make a
  best effort attempt to make filesystems consistent and synchronized when the
  handle is closed (also if the program exits without closing handles).
<div class="Pp"></div>
This is enabled by default (since libguestfs 1.5.24, previously it was disabled
  by default).
<h2 class="Ss" title="Ss" id="set-backend"><a class="selflink" href="#set-backend">set-backend</a></h2>
<h2 class="Ss" title="Ss" id="backend"><a class="selflink" href="#backend">backend</a></h2>
<pre>
 set-backend backend
</pre>
<div class="Pp"></div>
Set the method that libguestfs uses to connect to the backend guestfsd daemon.
<div class="Pp"></div>
This handle property was previously called the &quot;attach method&quot;.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="set-backend-setting"><a class="selflink" href="#set-backend-setting">set-backend-setting</a></h2>
<pre>
 set-backend-setting name val
</pre>
<div class="Pp"></div>
Append &quot;name=value&quot; to the backend settings string list. However if a
  string already exists matching &quot;name&quot; or beginning with
  &quot;name=&quot;, then that setting is replaced.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
  <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="set-backend-settings"><a class="selflink" href="#set-backend-settings">set-backend-settings</a></h2>
<pre>
 set-backend-settings 'settings ...'
</pre>
<div class="Pp"></div>
Set a list of zero or more settings which are passed through to the current
  backend. Each setting is a string which is interpreted in a backend-specific
  way, or ignored if not understood by the backend.
<div class="Pp"></div>
The default value is an empty list, unless the environment variable
  &quot;LIBGUESTFS_BACKEND_SETTINGS&quot; was set when the handle was created.
  This environment variable contains a colon-separated list of settings.
<div class="Pp"></div>
This call replaces all backend settings. If you want to replace a single backend
  setting, see &quot;set-backend-setting&quot;. If you want to clear a single
  backend setting, see &quot;clear-backend-setting&quot;.
<div class="Pp"></div>
See &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
  <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="set-cachedir"><a class="selflink" href="#set-cachedir">set-cachedir</a></h2>
<h2 class="Ss" title="Ss" id="cachedir"><a class="selflink" href="#cachedir">cachedir</a></h2>
<pre>
 set-cachedir cachedir
</pre>
<div class="Pp"></div>
Set the directory used by the handle to store the appliance cache, when using a
  supermin appliance. The appliance is cached and shared between all handles
  which have the same effective user ID.
<div class="Pp"></div>
The environment variables &quot;LIBGUESTFS_CACHEDIR&quot; and &quot;TMPDIR&quot;
  control the default value: If &quot;LIBGUESTFS_CACHEDIR&quot; is set, then
  that is the default. Else if &quot;TMPDIR&quot; is set, then that is the
  default. Else <i>/var/tmp</i> is the default.
<h2 class="Ss" title="Ss" id="set-direct"><a class="selflink" href="#set-direct">set-direct</a></h2>
<h2 class="Ss" title="Ss" id="direct"><a class="selflink" href="#direct">direct</a></h2>
<pre>
 set-direct true|false
</pre>
<div class="Pp"></div>
If the direct appliance mode flag is enabled, then stdin and stdout are passed
  directly through to the appliance once it is launched.
<div class="Pp"></div>
One consequence of this is that log messages aren't caught by the library and
  handled by &quot;set-log-message-callback&quot;, but go straight to stdout.
<div class="Pp"></div>
You probably don't want to use this unless you know what you are doing.
<div class="Pp"></div>
The default is disabled.
<h2 class="Ss" title="Ss" id="set-e2attrs"><a class="selflink" href="#set-e2attrs">set-e2attrs</a></h2>
<pre>
 set-e2attrs file attrs [clear:true|false]
</pre>
<div class="Pp"></div>
This sets or clears the file attributes &quot;attrs&quot; associated with the
  inode <i>file</i>.
<div class="Pp"></div>
&quot;attrs&quot; is a string of characters representing file attributes. See
  &quot;get-e2attrs&quot; for a list of possible attributes. Not all attributes
  can be changed.
<div class="Pp"></div>
If optional boolean &quot;clear&quot; is not present or false, then the
  &quot;attrs&quot; listed are set in the inode.
<div class="Pp"></div>
If &quot;clear&quot; is true, then the &quot;attrs&quot; listed are cleared in
  the inode.
<div class="Pp"></div>
In both cases, other attributes not present in the &quot;attrs&quot; string are
  left unchanged.
<div class="Pp"></div>
These attributes are only present when the file is located on an ext2/3/4
  filesystem. Using this call on other filesystem types will result in an error.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="set-e2generation"><a class="selflink" href="#set-e2generation">set-e2generation</a></h2>
<pre>
 set-e2generation file generation
</pre>
<div class="Pp"></div>
This sets the ext2 file generation of a file.
<div class="Pp"></div>
See &quot;get-e2generation&quot;.
<h2 class="Ss" title="Ss" id="set-e2label"><a class="selflink" href="#set-e2label">set-e2label</a></h2>
<pre>
 set-e2label device label
</pre>
<div class="Pp"></div>
This sets the ext2/3/4 filesystem label of the filesystem on &quot;device&quot;
  to &quot;label&quot;. Filesystem labels are limited to 16 characters.
<div class="Pp"></div>
You can use either &quot;tune2fs-l&quot; or &quot;get-e2label&quot; to return
  the existing label on a filesystem.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;set-label&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="set-e2uuid"><a class="selflink" href="#set-e2uuid">set-e2uuid</a></h2>
<pre>
 set-e2uuid device uuid
</pre>
<div class="Pp"></div>
This sets the ext2/3/4 filesystem UUID of the filesystem on &quot;device&quot;
  to &quot;uuid&quot;. The format of the UUID and alternatives such as
  &quot;clear&quot;, &quot;random&quot; and &quot;time&quot; are described in
  the <i>tune2fs</i>(8) manpage.
<div class="Pp"></div>
You can use &quot;vfs-uuid&quot; to return the existing UUID of a filesystem.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;set-uuid&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="set-hv"><a class="selflink" href="#set-hv">set-hv</a></h2>
<h2 class="Ss" title="Ss" id="hv"><a class="selflink" href="#hv">hv</a></h2>
<pre>
 set-hv hv
</pre>
<div class="Pp"></div>
Set the hypervisor binary that we will use. The hypervisor depends on the
  backend, but is usually the location of the qemu/KVM hypervisor. For the uml
  backend, it is the location of the &quot;linux&quot; or &quot;vmlinux&quot;
  binary.
<div class="Pp"></div>
The default is chosen when the library was compiled by the configure script.
<div class="Pp"></div>
You can also override this by setting the &quot;LIBGUESTFS_HV&quot; environment
  variable.
<div class="Pp"></div>
Note that you should call this function as early as possible after creating the
  handle. This is because some pre-launch operations depend on testing qemu
  features (by running &quot;qemu -help&quot;). If the qemu binary changes, we
  don't retest features, and so you might see inconsistent results. Using the
  environment variable &quot;LIBGUESTFS_HV&quot; is safest of all since that
  picks the qemu binary at the same time as the handle is created.
<h2 class="Ss" title="Ss" id="set-identifier"><a class="selflink" href="#set-identifier">set-identifier</a></h2>
<h2 class="Ss" title="Ss" id="identifier"><a class="selflink" href="#identifier">identifier</a></h2>
<pre>
 set-identifier identifier
</pre>
<div class="Pp"></div>
This is an informative string which the caller may optionally set in the handle.
  It is printed in various places, allowing the current handle to be identified
  in debugging output.
<div class="Pp"></div>
One important place is when tracing is enabled. If the identifier string is not
  an empty string, then trace messages change from this:
<div class="Pp"></div>
<pre>
 libguestfs: trace: get_tmpdir
 libguestfs: trace: get_tmpdir = &quot;/tmp&quot;
</pre>
<div class="Pp"></div>
to this:
<div class="Pp"></div>
<pre>
 libguestfs: trace: ID: get_tmpdir
 libguestfs: trace: ID: get_tmpdir = &quot;/tmp&quot;
</pre>
<div class="Pp"></div>
where &quot;ID&quot; is the identifier string set by this call.
<div class="Pp"></div>
The identifier must only contain alphanumeric ASCII characters, underscore and
  minus sign. The default is the empty string.
<div class="Pp"></div>
See also &quot;set-program&quot;, &quot;set-trace&quot;,
  &quot;get-identifier&quot;.
<h2 class="Ss" title="Ss" id="set-label"><a class="selflink" href="#set-label">set-label</a></h2>
<pre>
 set-label mountable label
</pre>
<div class="Pp"></div>
Set the filesystem label on &quot;mountable&quot; to &quot;label&quot;.
<div class="Pp"></div>
Only some filesystem types support labels, and libguestfs supports setting
  labels on only a subset of these.
<dl class="Bl-tag">
  <dt class="It-tag">ext2, ext3, ext4</dt>
  <dd class="It-tag">Labels are limited to 16 bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">NTFS</dt>
  <dd class="It-tag">Labels are limited to 128 unicode characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">XFS</dt>
  <dd class="It-tag">The label is limited to 12 bytes. The filesystem must not
      be mounted when trying to set the label.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">btrfs</dt>
  <dd class="It-tag">The label is limited to 255 bytes and some characters are
      not allowed. Setting the label on a btrfs subvolume will set the label on
      its parent filesystem. The filesystem must not be mounted when trying to
      set the label.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fat</dt>
  <dd class="It-tag">The label is limited to 11 bytes.</dd>
</dl>
<div class="Pp"></div>
If there is no support for changing the label for the type of the specified
  filesystem, set_label will fail and set errno as ENOTSUP.
<div class="Pp"></div>
To read the label on a filesystem, call &quot;vfs-label&quot;.
<h2 class="Ss" title="Ss" id="set-libvirt-requested-credential"><a class="selflink" href="#set-libvirt-requested-credential">set-libvirt-requested-credential</a></h2>
<pre>
 set-libvirt-requested-credential index cred
</pre>
<div class="Pp"></div>
After requesting the &quot;index&quot;'th credential from the user, call this
  function to pass the answer back to libvirt.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="set-libvirt-supported-credentials"><a class="selflink" href="#set-libvirt-supported-credentials">set-libvirt-supported-credentials</a></h2>
<pre>
 set-libvirt-supported-credentials 'creds ...'
</pre>
<div class="Pp"></div>
Call this function before setting an event handler for
  &quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;, to supply the list of credential types
  that the program knows how to process.
<div class="Pp"></div>
The &quot;creds&quot; list must be a non-empty list of strings. Possible strings
  are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;username&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;authname&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;language&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;cnonce&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;passphrase&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;echoprompt&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;noechoprompt&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;realm&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;external&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
See libvirt documentation for the meaning of these credential types.
<div class="Pp"></div>
See &quot;LIBVIRT AUTHENTICATION&quot; in <i>guestfs</i>(3) for documentation
  and example code.
<h2 class="Ss" title="Ss" id="set-memsize"><a class="selflink" href="#set-memsize">set-memsize</a></h2>
<h2 class="Ss" title="Ss" id="memsize"><a class="selflink" href="#memsize">memsize</a></h2>
<pre>
 set-memsize memsize
</pre>
<div class="Pp"></div>
This sets the memory size in megabytes allocated to the hypervisor. This only
  has any effect if called before &quot;launch&quot;.
<div class="Pp"></div>
You can also change this by setting the environment variable
  &quot;LIBGUESTFS_MEMSIZE&quot; before the handle is created.
<div class="Pp"></div>
For more information on the architecture of libguestfs, see <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="set-network"><a class="selflink" href="#set-network">set-network</a></h2>
<h2 class="Ss" title="Ss" id="network"><a class="selflink" href="#network">network</a></h2>
<pre>
 set-network true|false
</pre>
<div class="Pp"></div>
If &quot;network&quot; is true, then the network is enabled in the libguestfs
  appliance. The default is false.
<div class="Pp"></div>
This affects whether commands are able to access the network (see &quot;RUNNING
  COMMANDS&quot; in <i>guestfs</i>(3)).
<div class="Pp"></div>
You must call this before calling &quot;launch&quot;, otherwise it has no
  effect.
<h2 class="Ss" title="Ss" id="set-path"><a class="selflink" href="#set-path">set-path</a></h2>
<h2 class="Ss" title="Ss" id="path"><a class="selflink" href="#path">path</a></h2>
<pre>
 set-path searchpath
</pre>
<div class="Pp"></div>
Set the path that libguestfs searches for kernel and initrd.img.
<div class="Pp"></div>
The default is &quot;$libdir/guestfs&quot; unless overridden by setting
  &quot;LIBGUESTFS_PATH&quot; environment variable.
<div class="Pp"></div>
Setting &quot;path&quot; to &quot;NULL&quot; restores the default path.
<h2 class="Ss" title="Ss" id="set-pgroup"><a class="selflink" href="#set-pgroup">set-pgroup</a></h2>
<h2 class="Ss" title="Ss" id="pgroup"><a class="selflink" href="#pgroup">pgroup</a></h2>
<pre>
 set-pgroup true|false
</pre>
<div class="Pp"></div>
If &quot;pgroup&quot; is true, child processes are placed into their own process
  group.
<div class="Pp"></div>
The practical upshot of this is that signals like &quot;SIGINT&quot; (from users
  pressing &quot;^C&quot;) won't be received by the child process.
<div class="Pp"></div>
The default for this flag is false, because usually you want &quot;^C&quot; to
  kill the subprocess. Guestfish sets this flag to true when used interactively,
  so that &quot;^C&quot; can cancel long-running commands gracefully (see
  &quot;user-cancel&quot;).
<h2 class="Ss" title="Ss" id="set-program"><a class="selflink" href="#set-program">set-program</a></h2>
<h2 class="Ss" title="Ss" id="program"><a class="selflink" href="#program">program</a></h2>
<pre>
 set-program program
</pre>
<div class="Pp"></div>
Set the program name. This is an informative string which the main program may
  optionally set in the handle.
<div class="Pp"></div>
When the handle is created, the program name in the handle is set to the
  basename from &quot;argv[0]&quot;. If that was not possible, it is set to the
  empty string (but never &quot;NULL&quot;).
<h2 class="Ss" title="Ss" id="set-qemu"><a class="selflink" href="#set-qemu">set-qemu</a></h2>
<h2 class="Ss" title="Ss" id="qemu"><a class="selflink" href="#qemu">qemu</a></h2>
<pre>
 set-qemu hv
</pre>
<div class="Pp"></div>
Set the hypervisor binary (usually qemu) that we will use.
<div class="Pp"></div>
The default is chosen when the library was compiled by the configure script.
<div class="Pp"></div>
You can also override this by setting the &quot;LIBGUESTFS_HV&quot; environment
  variable.
<div class="Pp"></div>
Setting &quot;hv&quot; to &quot;NULL&quot; restores the default qemu binary.
<div class="Pp"></div>
Note that you should call this function as early as possible after creating the
  handle. This is because some pre-launch operations depend on testing qemu
  features (by running &quot;qemu -help&quot;). If the qemu binary changes, we
  don't retest features, and so you might see inconsistent results. Using the
  environment variable &quot;LIBGUESTFS_HV&quot; is safest of all since that
  picks the qemu binary at the same time as the handle is created.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;set-hv&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="set-recovery-proc"><a class="selflink" href="#set-recovery-proc">set-recovery-proc</a></h2>
<h2 class="Ss" title="Ss" id="recovery-proc"><a class="selflink" href="#recovery-proc">recovery-proc</a></h2>
<pre>
 set-recovery-proc true|false
</pre>
<div class="Pp"></div>
If this is called with the parameter &quot;false&quot; then &quot;launch&quot;
  does not create a recovery process. The purpose of the recovery process is to
  stop runaway hypervisor processes in the case where the main program aborts
  abruptly.
<div class="Pp"></div>
This only has any effect if called before &quot;launch&quot;, and the default is
  true.
<div class="Pp"></div>
About the only time when you would want to disable this is if the main process
  will fork itself into the background (&quot;daemonize&quot; itself). In this
  case the recovery process thinks that the main program has disappeared and so
  kills the hypervisor, which is not very helpful.
<h2 class="Ss" title="Ss" id="set-selinux"><a class="selflink" href="#set-selinux">set-selinux</a></h2>
<h2 class="Ss" title="Ss" id="selinux"><a class="selflink" href="#selinux">selinux</a></h2>
<pre>
 set-selinux true|false
</pre>
<div class="Pp"></div>
This sets the selinux flag that is passed to the appliance at boot time. The
  default is &quot;selinux=0&quot; (disabled).
<div class="Pp"></div>
Note that if SELinux is enabled, it is always in Permissive mode
  (&quot;enforcing=0&quot;).
<div class="Pp"></div>
For more information on the architecture of libguestfs, see <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;selinux-relabel&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="set-smp"><a class="selflink" href="#set-smp">set-smp</a></h2>
<h2 class="Ss" title="Ss" id="smp"><a class="selflink" href="#smp">smp</a></h2>
<pre>
 set-smp smp
</pre>
<div class="Pp"></div>
Change the number of virtual CPUs assigned to the appliance. The default is 1.
  Increasing this may improve performance, though often it has no effect.
<div class="Pp"></div>
This function must be called before &quot;launch&quot;.
<h2 class="Ss" title="Ss" id="set-tmpdir"><a class="selflink" href="#set-tmpdir">set-tmpdir</a></h2>
<h2 class="Ss" title="Ss" id="tmpdir"><a class="selflink" href="#tmpdir">tmpdir</a></h2>
<pre>
 set-tmpdir tmpdir
</pre>
<div class="Pp"></div>
Set the directory used by the handle to store temporary files.
<div class="Pp"></div>
The environment variables &quot;LIBGUESTFS_TMPDIR&quot; and &quot;TMPDIR&quot;
  control the default value: If &quot;LIBGUESTFS_TMPDIR&quot; is set, then that
  is the default. Else if &quot;TMPDIR&quot; is set, then that is the default.
  Else <i>/tmp</i> is the default.
<h2 class="Ss" title="Ss" id="set-trace"><a class="selflink" href="#set-trace">set-trace</a></h2>
<h2 class="Ss" title="Ss" id="trace"><a class="selflink" href="#trace">trace</a></h2>
<pre>
 set-trace true|false
</pre>
<div class="Pp"></div>
If the command trace flag is set to 1, then libguestfs calls, parameters and
  return values are traced.
<div class="Pp"></div>
If you want to trace C API calls into libguestfs (and other libraries) then
  possibly a better way is to use the external <i>ltrace</i>(1) command.
<div class="Pp"></div>
Command traces are disabled unless the environment variable
  &quot;LIBGUESTFS_TRACE&quot; is defined and set to 1.
<div class="Pp"></div>
Trace messages are normally sent to &quot;stderr&quot;, unless you register a
  callback to send them somewhere else (see &quot;set-event-callback&quot;).
<h2 class="Ss" title="Ss" id="set-uuid"><a class="selflink" href="#set-uuid">set-uuid</a></h2>
<pre>
 set-uuid device uuid
</pre>
<div class="Pp"></div>
Set the filesystem UUID on &quot;device&quot; to &quot;uuid&quot;. If this fails
  and the errno is ENOTSUP, means that there is no support for changing the UUID
  for the type of the specified filesystem.
<div class="Pp"></div>
Only some filesystem types support setting UUIDs.
<div class="Pp"></div>
To read the UUID on a filesystem, call &quot;vfs-uuid&quot;.
<h2 class="Ss" title="Ss" id="set-uuid-random"><a class="selflink" href="#set-uuid-random">set-uuid-random</a></h2>
<pre>
 set-uuid-random device
</pre>
<div class="Pp"></div>
Set the filesystem UUID on &quot;device&quot; to a random UUID. If this fails
  and the errno is ENOTSUP, means that there is no support for changing the UUID
  for the type of the specified filesystem.
<div class="Pp"></div>
Only some filesystem types support setting UUIDs.
<div class="Pp"></div>
To read the UUID on a filesystem, call &quot;vfs-uuid&quot;.
<h2 class="Ss" title="Ss" id="set-verbose"><a class="selflink" href="#set-verbose">set-verbose</a></h2>
<h2 class="Ss" title="Ss" id="verbose"><a class="selflink" href="#verbose">verbose</a></h2>
<pre>
 set-verbose true|false
</pre>
<div class="Pp"></div>
If &quot;verbose&quot; is true, this turns on verbose messages.
<div class="Pp"></div>
Verbose messages are disabled unless the environment variable
  &quot;LIBGUESTFS_DEBUG&quot; is defined and set to 1.
<div class="Pp"></div>
Verbose messages are normally sent to &quot;stderr&quot;, unless you register a
  callback to send them somewhere else (see &quot;set-event-callback&quot;).
<h2 class="Ss" title="Ss" id="setcon"><a class="selflink" href="#setcon">setcon</a></h2>
<pre>
 setcon context
</pre>
<div class="Pp"></div>
This sets the SELinux security context of the daemon to the string
  &quot;context&quot;.
<div class="Pp"></div>
See the documentation about SELINUX in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the
  &quot;selinux-relabel&quot; call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;selinux&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="setxattr"><a class="selflink" href="#setxattr">setxattr</a></h2>
<pre>
 setxattr xattr val vallen path
</pre>
<div class="Pp"></div>
This call sets the extended attribute named &quot;xattr&quot; of the file
  &quot;path&quot; to the value &quot;val&quot; (of length &quot;vallen&quot;).
  The value is arbitrary 8 bit data.
<div class="Pp"></div>
See also: &quot;lsetxattr&quot;, <i>attr</i>(5).
<div class="Pp"></div>
This command depends on the feature &quot;linuxxattrs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="sfdisk"><a class="selflink" href="#sfdisk">sfdisk</a></h2>
<pre>
 sfdisk device cyls heads sectors 'lines ...'
</pre>
<div class="Pp"></div>
This is a direct interface to the <i>sfdisk</i>(8) program for creating
  partitions on block devices.
<div class="Pp"></div>
&quot;device&quot; should be a block device, for example <i>/dev/sda</i>.
<div class="Pp"></div>
&quot;cyls&quot;, &quot;heads&quot; and &quot;sectors&quot; are the number of
  cylinders, heads and sectors on the device, which are passed directly to
  sfdisk as the <i>-C</i>, <i>-H</i> and <i>-S</i> parameters. If you pass 0 for
  any of these, then the corresponding parameter is omitted. Usually for 'large'
  disks, you can just pass 0 for these, but for small (floppy-sized) disks,
  sfdisk (or rather, the kernel) cannot work out the right geometry and you will
  need to tell it.
<div class="Pp"></div>
&quot;lines&quot; is a list of lines that we feed to &quot;sfdisk&quot;. For
  more information refer to the <i>sfdisk</i>(8) manpage.
<div class="Pp"></div>
To create a single partition occupying the whole disk, you would pass
  &quot;lines&quot; as a single element list, when the single element being the
  string &quot;,&quot; (comma).
<div class="Pp"></div>
See also: &quot;sfdisk-l&quot;, &quot;sfdisk-N&quot;, &quot;part-init&quot;
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;part-add&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="sfdiskM"><a class="selflink" href="#sfdiskM">sfdiskM</a></h2>
<pre>
 sfdiskM device 'lines ...'
</pre>
<div class="Pp"></div>
This is a simplified interface to the &quot;sfdisk&quot; command, where
  partition sizes are specified in megabytes only (rounded to the nearest
  cylinder) and you don't need to specify the cyls, heads and sectors parameters
  which were rarely if ever used anyway.
<div class="Pp"></div>
See also: &quot;sfdisk&quot;, the <i>sfdisk</i>(8) manpage and
  &quot;part-disk&quot;
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;part-add&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="sfdisk-N"><a class="selflink" href="#sfdisk-N">sfdisk-N</a></h2>
<pre>
 sfdisk-N device partnum cyls heads sectors line
</pre>
<div class="Pp"></div>
This runs <i>sfdisk</i>(8) option to modify just the single partition
  &quot;n&quot; (note: &quot;n&quot; counts from 1).
<div class="Pp"></div>
For other parameters, see &quot;sfdisk&quot;. You should usually pass 0 for the
  cyls/heads/sectors parameters.
<div class="Pp"></div>
See also: &quot;part-add&quot;
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;part-add&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="sfdisk-disk-geometry"><a class="selflink" href="#sfdisk-disk-geometry">sfdisk-disk-geometry</a></h2>
<pre>
 sfdisk-disk-geometry device
</pre>
<div class="Pp"></div>
This displays the disk geometry of &quot;device&quot; read from the partition
  table. Especially in the case where the underlying block device has been
  resized, this can be different from the kernel's idea of the geometry (see
  &quot;sfdisk-kernel-geometry&quot;).
<div class="Pp"></div>
The result is in human-readable format, and not designed to be parsed.
<h2 class="Ss" title="Ss" id="sfdisk-kernel-geometry"><a class="selflink" href="#sfdisk-kernel-geometry">sfdisk-kernel-geometry</a></h2>
<pre>
 sfdisk-kernel-geometry device
</pre>
<div class="Pp"></div>
This displays the kernel's idea of the geometry of &quot;device&quot;.
<div class="Pp"></div>
The result is in human-readable format, and not designed to be parsed.
<h2 class="Ss" title="Ss" id="sfdisk-l"><a class="selflink" href="#sfdisk-l">sfdisk-l</a></h2>
<pre>
 sfdisk-l device
</pre>
<div class="Pp"></div>
This displays the partition table on &quot;device&quot;, in the human-readable
  output of the <i>sfdisk</i>(8) command. It is not intended to be parsed.
<div class="Pp"></div>
See also: &quot;part-list&quot;
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;part-list&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="sh"><a class="selflink" href="#sh">sh</a></h2>
<pre>
 sh command
</pre>
<div class="Pp"></div>
This call runs a command from the guest filesystem via the guest's
  <i>/bin/sh</i>.
<div class="Pp"></div>
This is like &quot;command&quot;, but passes the command to:
<div class="Pp"></div>
<pre>
 /bin/sh -c &quot;command&quot;
</pre>
<div class="Pp"></div>
Depending on the guest's shell, this usually results in wildcards being
  expanded, shell expressions being interpolated and so on.
<div class="Pp"></div>
All the provisos about &quot;command&quot; apply to this call.
<h2 class="Ss" title="Ss" id="sh-lines"><a class="selflink" href="#sh-lines">sh-lines</a></h2>
<pre>
 sh-lines command
</pre>
<div class="Pp"></div>
This is the same as &quot;sh&quot;, but splits the result into a list of lines.
<div class="Pp"></div>
See also: &quot;command-lines&quot;
<h2 class="Ss" title="Ss" id="shutdown"><a class="selflink" href="#shutdown">shutdown</a></h2>
<pre>
 shutdown
</pre>
<div class="Pp"></div>
This is the opposite of &quot;launch&quot;. It performs an orderly shutdown of
  the backend process(es). If the autosync flag is set (which is the default)
  then the disk image is synchronized.
<div class="Pp"></div>
If the subprocess exits with an error then this function will return an error,
  which should <i>not</i> be ignored (it may indicate that the disk image could
  not be written out properly).
<div class="Pp"></div>
It is safe to call this multiple times. Extra calls are ignored.
<div class="Pp"></div>
This call does <i>not</i> close or free up the handle. You still need to call
  &quot;close&quot; afterwards.
<div class="Pp"></div>
&quot;close&quot; will call this if you don't do it explicitly, but note that
  any errors are ignored in that case.
<h2 class="Ss" title="Ss" id="sleep"><a class="selflink" href="#sleep">sleep</a></h2>
<pre>
 sleep secs
</pre>
<div class="Pp"></div>
Sleep for &quot;secs&quot; seconds.
<h2 class="Ss" title="Ss" id="stat"><a class="selflink" href="#stat">stat</a></h2>
<pre>
 stat path
</pre>
<div class="Pp"></div>
Returns file information for the given &quot;path&quot;.
<div class="Pp"></div>
This is the same as the <i>stat</i>(2) system call.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;statns&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="statns"><a class="selflink" href="#statns">statns</a></h2>
<pre>
 statns path
</pre>
<div class="Pp"></div>
Returns file information for the given &quot;path&quot;.
<div class="Pp"></div>
This is the same as the <i>stat</i>(2) system call.
<h2 class="Ss" title="Ss" id="statvfs"><a class="selflink" href="#statvfs">statvfs</a></h2>
<pre>
 statvfs path
</pre>
<div class="Pp"></div>
Returns file system statistics for any mounted file system. &quot;path&quot;
  should be a file or directory in the mounted file system (typically it is the
  mount point itself, but it doesn't need to be).
<div class="Pp"></div>
This is the same as the <i>statvfs</i>(2) system call.
<h2 class="Ss" title="Ss" id="strings"><a class="selflink" href="#strings">strings</a></h2>
<pre>
 strings path
</pre>
<div class="Pp"></div>
This runs the <i>strings</i>(1) command on a file and returns the list of
  printable strings found.
<div class="Pp"></div>
The &quot;strings&quot; command has, in the past, had problems with parsing
  untrusted files. These are mitigated in the current version of libguestfs, but
  see &quot;CVE-2014-8484&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="strings-e"><a class="selflink" href="#strings-e">strings-e</a></h2>
<pre>
 strings-e encoding path
</pre>
<div class="Pp"></div>
This is like the &quot;strings&quot; command, but allows you to specify the
  encoding of strings that are looked for in the source file &quot;path&quot;.
<div class="Pp"></div>
Allowed encodings are:
<dl class="Bl-tag">
  <dt class="It-tag">s</dt>
  <dd class="It-tag">Single 7-bit-byte characters like ASCII and the
      ASCII-compatible parts of ISO-8859-X (this is what &quot;strings&quot;
      uses).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">S</dt>
  <dd class="It-tag">Single 8-bit-byte characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">b</dt>
  <dd class="It-tag">16-bit big endian strings such as those encoded in UTF-16BE
      or UCS-2BE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">l (lower case letter L)</dt>
  <dd class="It-tag">16-bit little endian such as UTF-16LE and UCS-2LE. This is
      useful for examining binaries in Windows guests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">B</dt>
  <dd class="It-tag">32-bit big endian such as UCS-4BE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">L</dt>
  <dd class="It-tag">32-bit little endian such as UCS-4LE.</dd>
</dl>
<div class="Pp"></div>
The returned strings are transcoded to UTF-8.
<div class="Pp"></div>
The &quot;strings&quot; command has, in the past, had problems with parsing
  untrusted files. These are mitigated in the current version of libguestfs, but
  see &quot;CVE-2014-8484&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="swapoff-device"><a class="selflink" href="#swapoff-device">swapoff-device</a></h2>
<pre>
 swapoff-device device
</pre>
<div class="Pp"></div>
This command disables the libguestfs appliance swap device or partition named
  &quot;device&quot;. See &quot;swapon-device&quot;.
<h2 class="Ss" title="Ss" id="swapoff-file"><a class="selflink" href="#swapoff-file">swapoff-file</a></h2>
<pre>
 swapoff-file file
</pre>
<div class="Pp"></div>
This command disables the libguestfs appliance swap on file.
<h2 class="Ss" title="Ss" id="swapoff-label"><a class="selflink" href="#swapoff-label">swapoff-label</a></h2>
<pre>
 swapoff-label label
</pre>
<div class="Pp"></div>
This command disables the libguestfs appliance swap on labeled swap partition.
<h2 class="Ss" title="Ss" id="swapoff-uuid"><a class="selflink" href="#swapoff-uuid">swapoff-uuid</a></h2>
<pre>
 swapoff-uuid uuid
</pre>
<div class="Pp"></div>
This command disables the libguestfs appliance swap partition with the given
  UUID.
<div class="Pp"></div>
This command depends on the feature &quot;linuxfsuuid&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="swapon-device"><a class="selflink" href="#swapon-device">swapon-device</a></h2>
<pre>
 swapon-device device
</pre>
<div class="Pp"></div>
This command enables the libguestfs appliance to use the swap device or
  partition named &quot;device&quot;. The increased memory is made available for
  all commands, for example those run using &quot;command&quot; or
  &quot;sh&quot;.
<div class="Pp"></div>
Note that you should not swap to existing guest swap partitions unless you know
  what you are doing. They may contain hibernation information, or other
  information that the guest doesn't want you to trash. You also risk leaking
  information about the host to the guest this way. Instead, attach a new host
  device to the guest and swap on that.
<h2 class="Ss" title="Ss" id="swapon-file"><a class="selflink" href="#swapon-file">swapon-file</a></h2>
<pre>
 swapon-file file
</pre>
<div class="Pp"></div>
This command enables swap to a file. See &quot;swapon-device&quot; for other
  notes.
<h2 class="Ss" title="Ss" id="swapon-label"><a class="selflink" href="#swapon-label">swapon-label</a></h2>
<pre>
 swapon-label label
</pre>
<div class="Pp"></div>
This command enables swap to a labeled swap partition. See
  &quot;swapon-device&quot; for other notes.
<h2 class="Ss" title="Ss" id="swapon-uuid"><a class="selflink" href="#swapon-uuid">swapon-uuid</a></h2>
<pre>
 swapon-uuid uuid
</pre>
<div class="Pp"></div>
This command enables swap to a swap partition with the given UUID. See
  &quot;swapon-device&quot; for other notes.
<div class="Pp"></div>
This command depends on the feature &quot;linuxfsuuid&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="sync"><a class="selflink" href="#sync">sync</a></h2>
<pre>
 sync
</pre>
<div class="Pp"></div>
This syncs the disk, so that any writes are flushed through to the underlying
  disk image.
<div class="Pp"></div>
You should always call this if you have modified a disk image, before closing
  the handle.
<h2 class="Ss" title="Ss" id="syslinux"><a class="selflink" href="#syslinux">syslinux</a></h2>
<pre>
 syslinux device [directory:..]
</pre>
<div class="Pp"></div>
Install the SYSLINUX bootloader on &quot;device&quot;.
<div class="Pp"></div>
The device parameter must be either a whole disk formatted as a FAT filesystem,
  or a partition formatted as a FAT filesystem. In the latter case, the
  partition should be marked as &quot;active&quot;
  (&quot;part-set-bootable&quot;) and a Master Boot Record must be installed
  (eg. using &quot;pwrite-device&quot;) on the first sector of the whole disk.
  The SYSLINUX package comes with some suitable Master Boot Records. See the
  <i>syslinux</i>(1) man page for further information.
<div class="Pp"></div>
The optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag"><i>directory</i></dt>
  <dd class="It-tag">Install SYSLINUX in the named subdirectory, instead of in
      the root directory of the FAT filesystem.</dd>
</dl>
<div class="Pp"></div>
Additional configuration can be supplied to SYSLINUX by placing a file called
  <i>syslinux.cfg</i> on the FAT filesystem, either in the root directory, or
  under <i>directory</i> if that optional argument is being used. For further
  information about the contents of this file, see <i>syslinux</i>(1).
<div class="Pp"></div>
See also &quot;extlinux&quot;.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;syslinux&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="tail"><a class="selflink" href="#tail">tail</a></h2>
<pre>
 tail path
</pre>
<div class="Pp"></div>
This command returns up to the last 10 lines of a file as a list of strings.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="tail-n"><a class="selflink" href="#tail-n">tail-n</a></h2>
<pre>
 tail-n nrlines path
</pre>
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is a positive number, this returns the last
  &quot;nrlines&quot; lines of the file &quot;path&quot;.
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is a negative number, this returns lines
  from the file &quot;path&quot;, starting with the &quot;-nrlines&quot;th line.
<div class="Pp"></div>
If the parameter &quot;nrlines&quot; is zero, this returns an empty list.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<h2 class="Ss" title="Ss" id="tar-in"><a class="selflink" href="#tar-in">tar-in</a></h2>
<h2 class="Ss" title="Ss" id="tar-in-opts"><a class="selflink" href="#tar-in-opts">tar-in-opts</a></h2>
<pre>
 tar-in (tarfile|-) directory [compress:..] [xattrs:true|false] [selinux:true|false] [acls:true|false]
</pre>
<div class="Pp"></div>
This command uploads and unpacks local file &quot;tarfile&quot; into
  <i>directory</i>.
<div class="Pp"></div>
The optional &quot;compress&quot; flag controls compression. If not given, then
  the input should be an uncompressed tar file. Otherwise one of the following
  strings may be given to select the compression type of the input file:
  &quot;compress&quot;, &quot;gzip&quot;, &quot;bzip2&quot;, &quot;xz&quot;,
  &quot;lzop&quot;. (Note that not all builds of libguestfs will support all of
  these compression types).
<div class="Pp"></div>
The other optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;xattrs&quot;</dt>
  <dd class="It-tag">If set to true, extended attributes are restored from the
      tar file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;selinux&quot;</dt>
  <dd class="It-tag">If set to true, SELinux contexts are restored from the tar
      file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;acls&quot;</dt>
  <dd class="It-tag">If set to true, POSIX ACLs are restored from the tar
    file.</dd>
</dl>
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="tar-out"><a class="selflink" href="#tar-out">tar-out</a></h2>
<h2 class="Ss" title="Ss" id="tar-out-opts"><a class="selflink" href="#tar-out-opts">tar-out-opts</a></h2>
<pre>
 tar-out directory (tarfile|-) [compress:..] [numericowner:true|false] [excludes:..] [xattrs:true|false] [selinux:true|false] [acls:true|false]
</pre>
<div class="Pp"></div>
This command packs the contents of <i>directory</i> and downloads it to local
  file &quot;tarfile&quot;.
<div class="Pp"></div>
The optional &quot;compress&quot; flag controls compression. If not given, then
  the output will be an uncompressed tar file. Otherwise one of the following
  strings may be given to select the compression type of the output file:
  &quot;compress&quot;, &quot;gzip&quot;, &quot;bzip2&quot;, &quot;xz&quot;,
  &quot;lzop&quot;. (Note that not all builds of libguestfs will support all of
  these compression types).
<div class="Pp"></div>
The other optional arguments are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;excludes&quot;</dt>
  <dd class="It-tag">A list of wildcards. Files are excluded if they match any
      of the wildcards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;numericowner&quot;</dt>
  <dd class="It-tag">If set to true, the output tar file will contain UID/GID
      numbers instead of user/group names.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;xattrs&quot;</dt>
  <dd class="It-tag">If set to true, extended attributes are saved in the output
      tar.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;selinux&quot;</dt>
  <dd class="It-tag">If set to true, SELinux contexts are saved in the output
      tar.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;acls&quot;</dt>
  <dd class="It-tag">If set to true, POSIX ACLs are saved in the output
    tar.</dd>
</dl>
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="tgz-in"><a class="selflink" href="#tgz-in">tgz-in</a></h2>
<pre>
 tgz-in (tarball|-) directory
</pre>
<div class="Pp"></div>
This command uploads and unpacks local file &quot;tarball&quot; (a <i>gzip
  compressed</i> tar file) into <i>directory</i>.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;tar-in&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="tgz-out"><a class="selflink" href="#tgz-out">tgz-out</a></h2>
<pre>
 tgz-out directory (tarball|-)
</pre>
<div class="Pp"></div>
This command packs the contents of <i>directory</i> and downloads it to local
  file &quot;tarball&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;tar-out&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="touch"><a class="selflink" href="#touch">touch</a></h2>
<pre>
 touch path
</pre>
<div class="Pp"></div>
Touch acts like the <i>touch</i>(1) command. It can be used to update the
  timestamps on a file, or, if the file does not exist, to create a new
  zero-length file.
<div class="Pp"></div>
This command only works on regular files, and will fail on other file types such
  as directories, symbolic links, block special etc.
<h2 class="Ss" title="Ss" id="truncate"><a class="selflink" href="#truncate">truncate</a></h2>
<pre>
 truncate path
</pre>
<div class="Pp"></div>
This command truncates &quot;path&quot; to a zero-length file. The file must
  exist already.
<h2 class="Ss" title="Ss" id="truncate-size"><a class="selflink" href="#truncate-size">truncate-size</a></h2>
<pre>
 truncate-size path size
</pre>
<div class="Pp"></div>
This command truncates &quot;path&quot; to size &quot;size&quot; bytes. The file
  must exist already.
<div class="Pp"></div>
If the current file size is less than &quot;size&quot; then the file is extended
  to the required size with zero bytes. This creates a sparse file (ie. disk
  blocks are not allocated for the file until you write to it). To create a
  non-sparse file of zeroes, use &quot;fallocate64&quot; instead.
<h2 class="Ss" title="Ss" id="tune2fs"><a class="selflink" href="#tune2fs">tune2fs</a></h2>
<pre>
 tune2fs device [force:true|false] [maxmountcount:N] [mountcount:N] [errorbehavior:..] [group:N] [intervalbetweenchecks:N] [reservedblockspercentage:N] [lastmounteddirectory:..] [reservedblockscount:N] [user:N]
</pre>
<div class="Pp"></div>
This call allows you to adjust various filesystem parameters of an
  ext2/ext3/ext4 filesystem called &quot;device&quot;.
<div class="Pp"></div>
The optional parameters are:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;force&quot;</dt>
  <dd class="It-tag">Force tune2fs to complete the operation even in the face of
      errors. This is the same as the tune2fs &quot;-f&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;maxmountcount&quot;</dt>
  <dd class="It-tag">Set the number of mounts after which the filesystem is
      checked by <i>e2fsck</i>(8). If this is 0 then the number of mounts is
      disregarded. This is the same as the tune2fs &quot;-c&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;mountcount&quot;</dt>
  <dd class="It-tag">Set the number of times the filesystem has been mounted.
      This is the same as the tune2fs &quot;-C&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;errorbehavior&quot;</dt>
  <dd class="It-tag">Change the behavior of the kernel code when errors are
      detected. Possible values currently are: &quot;continue&quot;,
      &quot;remount-ro&quot;, &quot;panic&quot;. In practice these options don't
      really make any difference, particularly for write errors.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is the same as the tune2fs &quot;-e&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;group&quot;</dt>
  <dd class="It-tag">Set the group which can use reserved filesystem blocks.
      This is the same as the tune2fs &quot;-g&quot; option except that it can
      only be specified as a number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;intervalbetweenchecks&quot;</dt>
  <dd class="It-tag">Adjust the maximal time between two filesystem checks (in
      seconds). If the option is passed as 0 then time-dependent checking is
      disabled.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is the same as the tune2fs &quot;-i&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;reservedblockspercentage&quot;</dt>
  <dd class="It-tag">Set the percentage of the filesystem which may only be
      allocated by privileged processes. This is the same as the tune2fs
      &quot;-m&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;lastmounteddirectory&quot;</dt>
  <dd class="It-tag">Set the last mounted directory. This is the same as the
      tune2fs &quot;-M&quot; option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;reservedblockscount&quot; Set the number of reserved
    filesystem blocks. This is the same as the tune2fs &quot;-r&quot;
    option.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;user&quot;</dt>
  <dd class="It-tag">Set the user who can use the reserved filesystem blocks.
      This is the same as the tune2fs &quot;-u&quot; option except that it can
      only be specified as a number.</dd>
</dl>
<div class="Pp"></div>
To get the current values of filesystem parameters, see &quot;tune2fs-l&quot;.
  For precise details of how tune2fs works, see the <i>tune2fs</i>(8) man page.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="tune2fs-l"><a class="selflink" href="#tune2fs-l">tune2fs-l</a></h2>
<pre>
 tune2fs-l device
</pre>
<div class="Pp"></div>
This returns the contents of the ext2, ext3 or ext4 filesystem superblock on
  &quot;device&quot;.
<div class="Pp"></div>
It is the same as running &quot;tune2fs -l device&quot;. See <i>tune2fs</i>(8)
  manpage for more details. The list of fields returned isn't clearly defined,
  and depends on both the version of &quot;tune2fs&quot; that libguestfs was
  built against, and the filesystem itself.
<h2 class="Ss" title="Ss" id="txz-in"><a class="selflink" href="#txz-in">txz-in</a></h2>
<pre>
 txz-in (tarball|-) directory
</pre>
<div class="Pp"></div>
This command uploads and unpacks local file &quot;tarball&quot; (an <i>xz
  compressed</i> tar file) into <i>directory</i>.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;tar-in&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;xz&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="txz-out"><a class="selflink" href="#txz-out">txz-out</a></h2>
<pre>
 txz-out directory (tarball|-)
</pre>
<div class="Pp"></div>
This command packs the contents of <i>directory</i> and downloads it to local
  file &quot;tarball&quot; (as an xz compressed tar archive).
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;tar-out&quot;
  call instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<div class="Pp"></div>
This command depends on the feature &quot;xz&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="umask"><a class="selflink" href="#umask">umask</a></h2>
<pre>
 umask mask
</pre>
<div class="Pp"></div>
This function sets the mask used for creating new files and device nodes to
  &quot;mask &amp; 0777&quot;.
<div class="Pp"></div>
Typical umask values would be 022 which creates new files with permissions like
  &quot;-rw-r--r--&quot; or &quot;-rwxr-xr-x&quot;, and 002 which creates new
  files with permissions like &quot;-rw-rw-r--&quot; or &quot;-rwxrwxr-x&quot;.
<div class="Pp"></div>
The default umask is 022. This is important because it means that directories
  and device nodes will be created with 0644 or 0755 mode even if you specify
  0777.
<div class="Pp"></div>
See also &quot;get-umask&quot;, <i>umask</i>(2), &quot;mknod&quot;,
  &quot;mkdir&quot;.
<div class="Pp"></div>
This call returns the previous umask.
<h2 class="Ss" title="Ss" id="umount"><a class="selflink" href="#umount">umount</a></h2>
<h2 class="Ss" title="Ss" id="unmount"><a class="selflink" href="#unmount">unmount</a></h2>
<h2 class="Ss" title="Ss" id="umount-opts"><a class="selflink" href="#umount-opts">umount-opts</a></h2>
<pre>
 umount pathordevice [force:true|false] [lazyunmount:true|false]
</pre>
<div class="Pp"></div>
This unmounts the given filesystem. The filesystem may be specified either by
  its mountpoint (path) or the device which contains the filesystem.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="umount-all"><a class="selflink" href="#umount-all">umount-all</a></h2>
<h2 class="Ss" title="Ss" id="unmount-all"><a class="selflink" href="#unmount-all">unmount-all</a></h2>
<pre>
 umount-all
</pre>
<div class="Pp"></div>
This unmounts all mounted filesystems.
<div class="Pp"></div>
Some internal mounts are not unmounted by this call.
<h2 class="Ss" title="Ss" id="umount-local"><a class="selflink" href="#umount-local">umount-local</a></h2>
<pre>
 umount-local [retry:true|false]
</pre>
<div class="Pp"></div>
If libguestfs is exporting the filesystem on a local mountpoint, then this
  unmounts it.
<div class="Pp"></div>
See &quot;MOUNT LOCAL&quot; in <i>guestfs</i>(3) for full documentation.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<h2 class="Ss" title="Ss" id="upload"><a class="selflink" href="#upload">upload</a></h2>
<pre>
 upload (filename|-) remotefilename
</pre>
<div class="Pp"></div>
Upload local file <i>filename</i> to <i>remotefilename</i> on the filesystem.
<div class="Pp"></div>
<i>filename</i> can also be a named pipe.
<div class="Pp"></div>
See also &quot;download&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="upload-offset"><a class="selflink" href="#upload-offset">upload-offset</a></h2>
<pre>
 upload-offset (filename|-) remotefilename offset
</pre>
<div class="Pp"></div>
Upload local file <i>filename</i> to <i>remotefilename</i> on the filesystem.
<div class="Pp"></div>
<i>remotefilename</i> is overwritten starting at the byte &quot;offset&quot;
  specified. The intention is to overwrite parts of existing files or devices,
  although if a non-existent file is specified then it is created with a
  &quot;hole&quot; before &quot;offset&quot;. The size of the data written is
  implicit in the size of the source <i>filename</i>.
<div class="Pp"></div>
Note that there is no limit on the amount of data that can be uploaded with this
  call, unlike with &quot;pwrite&quot;, and this call always writes the full
  amount unless an error occurs.
<div class="Pp"></div>
See also &quot;upload&quot;, &quot;pwrite&quot;.
<div class="Pp"></div>
Use &quot;-&quot; instead of a filename to read/write from stdin/stdout.
<h2 class="Ss" title="Ss" id="user-cancel"><a class="selflink" href="#user-cancel">user-cancel</a></h2>
<pre>
 user-cancel
</pre>
<div class="Pp"></div>
This function cancels the current upload or download operation.
<div class="Pp"></div>
Unlike most other libguestfs calls, this function is signal safe and thread
  safe. You can call it from a signal handler or from another thread, without
  needing to do any locking.
<div class="Pp"></div>
The transfer that was in progress (if there is one) will stop shortly
  afterwards, and will return an error. The errno (see
  &quot;guestfs_last_errno&quot;) is set to &quot;EINTR&quot;, so you can test
  for this to find out if the operation was cancelled or failed because of
  another error.
<div class="Pp"></div>
No cleanup is performed: for example, if a file was being uploaded then after
  cancellation there may be a partially uploaded file. It is the caller's
  responsibility to clean up if necessary.
<div class="Pp"></div>
There are two common places that you might call &quot;user-cancel&quot;:
<div class="Pp"></div>
In an interactive text-based program, you might call it from a
  &quot;SIGINT&quot; signal handler so that pressing &quot;^C&quot; cancels the
  current operation. (You also need to call &quot;guestfs_set_pgroup&quot; so
  that child processes don't receive the &quot;^C&quot; signal).
<div class="Pp"></div>
In a graphical program, when the main thread is displaying a progress bar with a
  cancel button, wire up the cancel button to call this function.
<h2 class="Ss" title="Ss" id="utimens"><a class="selflink" href="#utimens">utimens</a></h2>
<pre>
 utimens path atsecs atnsecs mtsecs mtnsecs
</pre>
<div class="Pp"></div>
This command sets the timestamps of a file with nanosecond precision.
<div class="Pp"></div>
&quot;atsecs, atnsecs&quot; are the last access time (atime) in secs and
  nanoseconds from the epoch.
<div class="Pp"></div>
&quot;mtsecs, mtnsecs&quot; are the last modification time (mtime) in secs and
  nanoseconds from the epoch.
<div class="Pp"></div>
If the *nsecs field contains the special value &quot;-1&quot; then the
  corresponding timestamp is set to the current time. (The *secs field is
  ignored in this case).
<div class="Pp"></div>
If the *nsecs field contains the special value &quot;-2&quot; then the
  corresponding timestamp is left unchanged. (The *secs field is ignored in this
  case).
<h2 class="Ss" title="Ss" id="utsname"><a class="selflink" href="#utsname">utsname</a></h2>
<pre>
 utsname
</pre>
<div class="Pp"></div>
This returns the kernel version of the appliance, where this is available. This
  information is only useful for debugging. Nothing in the returned structure is
  defined by the API.
<h2 class="Ss" title="Ss" id="version"><a class="selflink" href="#version">version</a></h2>
<pre>
 version
</pre>
<div class="Pp"></div>
Return the libguestfs version number that the program is linked against.
<div class="Pp"></div>
Note that because of dynamic linking this is not necessarily the version of
  libguestfs that you compiled against. You can compile the program, and then at
  runtime dynamically link against a completely different <i>libguestfs.so</i>
  library.
<div class="Pp"></div>
This call was added in version 1.0.58. In previous versions of libguestfs there
  was no way to get the version number. From C code you can use dynamic linker
  functions to find out if this symbol exists (if it doesn't, then it's an
  earlier version).
<div class="Pp"></div>
The call returns a structure with four elements. The first three
  (&quot;major&quot;, &quot;minor&quot; and &quot;release&quot;) are numbers and
  correspond to the usual version triplet. The fourth element
  (&quot;extra&quot;) is a string and is normally empty, but may be used for
  distro-specific information.
<div class="Pp"></div>
To construct the original version string:
  &quot;$major.$minor.$release$extra&quot;
<div class="Pp"></div>
See also: &quot;LIBGUESTFS VERSION NUMBERS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>Note:</i> Don't use this call to test for availability of features. In
  enterprise distributions we backport features from later versions into earlier
  versions, making this an unreliable way to test for features. Use
  &quot;available&quot; or &quot;feature-available&quot; instead.
<h2 class="Ss" title="Ss" id="vfs-label"><a class="selflink" href="#vfs-label">vfs-label</a></h2>
<pre>
 vfs-label mountable
</pre>
<div class="Pp"></div>
This returns the label of the filesystem on &quot;mountable&quot;.
<div class="Pp"></div>
If the filesystem is unlabeled, this returns the empty string.
<div class="Pp"></div>
To find a filesystem from the label, use &quot;findfs-label&quot;.
<h2 class="Ss" title="Ss" id="vfs-minimum-size"><a class="selflink" href="#vfs-minimum-size">vfs-minimum-size</a></h2>
<pre>
 vfs-minimum-size mountable
</pre>
<div class="Pp"></div>
Get the minimum size of filesystem in bytes. This is the minimum possible size
  for filesystem shrinking.
<div class="Pp"></div>
If getting minimum size of specified filesystem is not supported, this will fail
  and set errno as ENOTSUP.
<div class="Pp"></div>
See also <i>ntfsresize</i>(8), <i>resize2fs</i>(8), <i>btrfs</i>(8),
  <i>xfs_info</i>(8).
<h2 class="Ss" title="Ss" id="vfs-type"><a class="selflink" href="#vfs-type">vfs-type</a></h2>
<pre>
 vfs-type mountable
</pre>
<div class="Pp"></div>
This command gets the filesystem type corresponding to the filesystem on
  &quot;mountable&quot;.
<div class="Pp"></div>
For most filesystems, the result is the name of the Linux VFS module which would
  be used to mount this filesystem if you mounted it without specifying the
  filesystem type. For example a string such as &quot;ext3&quot; or
  &quot;ntfs&quot;.
<h2 class="Ss" title="Ss" id="vfs-uuid"><a class="selflink" href="#vfs-uuid">vfs-uuid</a></h2>
<h2 class="Ss" title="Ss" id="get-uuid"><a class="selflink" href="#get-uuid">get-uuid</a></h2>
<pre>
 vfs-uuid mountable
</pre>
<div class="Pp"></div>
This returns the filesystem UUID of the filesystem on &quot;mountable&quot;.
<div class="Pp"></div>
If the filesystem does not have a UUID, this returns the empty string.
<div class="Pp"></div>
To find a filesystem from the UUID, use &quot;findfs-uuid&quot;.
<h2 class="Ss" title="Ss" id="vg-activate"><a class="selflink" href="#vg-activate">vg-activate</a></h2>
<pre>
 vg-activate true|false 'volgroups ...'
</pre>
<div class="Pp"></div>
This command activates or (if &quot;activate&quot; is false) deactivates all
  logical volumes in the listed volume groups &quot;volgroups&quot;.
<div class="Pp"></div>
This command is the same as running &quot;vgchange -a y|n volgroups...&quot;
<div class="Pp"></div>
Note that if &quot;volgroups&quot; is an empty list then <b>all</b> volume
  groups are activated or deactivated.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vg-activate-all"><a class="selflink" href="#vg-activate-all">vg-activate-all</a></h2>
<pre>
 vg-activate-all true|false
</pre>
<div class="Pp"></div>
This command activates or (if &quot;activate&quot; is false) deactivates all
  logical volumes in all volume groups.
<div class="Pp"></div>
This command is the same as running &quot;vgchange -a y|n&quot;
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgchange-uuid"><a class="selflink" href="#vgchange-uuid">vgchange-uuid</a></h2>
<pre>
 vgchange-uuid vg
</pre>
<div class="Pp"></div>
Generate a new random UUID for the volume group &quot;vg&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgchange-uuid-all"><a class="selflink" href="#vgchange-uuid-all">vgchange-uuid-all</a></h2>
<pre>
 vgchange-uuid-all
</pre>
<div class="Pp"></div>
Generate new random UUIDs for all volume groups.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgcreate"><a class="selflink" href="#vgcreate">vgcreate</a></h2>
<pre>
 vgcreate volgroup 'physvols ...'
</pre>
<div class="Pp"></div>
This creates an LVM volume group called &quot;volgroup&quot; from the non-empty
  list of physical volumes &quot;physvols&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vglvuuids"><a class="selflink" href="#vglvuuids">vglvuuids</a></h2>
<pre>
 vglvuuids vgname
</pre>
<div class="Pp"></div>
Given a VG called &quot;vgname&quot;, this returns the UUIDs of all the logical
  volumes created in this volume group.
<div class="Pp"></div>
You can use this along with &quot;lvs&quot; and &quot;lvuuid&quot; calls to
  associate logical volumes and volume groups.
<div class="Pp"></div>
See also &quot;vgpvuuids&quot;.
<h2 class="Ss" title="Ss" id="vgmeta"><a class="selflink" href="#vgmeta">vgmeta</a></h2>
<pre>
 vgmeta vgname
</pre>
<div class="Pp"></div>
&quot;vgname&quot; is an LVM volume group. This command examines the volume
  group and returns its metadata.
<div class="Pp"></div>
Note that the metadata is an internal structure used by LVM, subject to change
  at any time, and is provided for information only.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgpvuuids"><a class="selflink" href="#vgpvuuids">vgpvuuids</a></h2>
<pre>
 vgpvuuids vgname
</pre>
<div class="Pp"></div>
Given a VG called &quot;vgname&quot;, this returns the UUIDs of all the physical
  volumes that this volume group resides on.
<div class="Pp"></div>
You can use this along with &quot;pvs&quot; and &quot;pvuuid&quot; calls to
  associate physical volumes and volume groups.
<div class="Pp"></div>
See also &quot;vglvuuids&quot;.
<h2 class="Ss" title="Ss" id="vgremove"><a class="selflink" href="#vgremove">vgremove</a></h2>
<pre>
 vgremove vgname
</pre>
<div class="Pp"></div>
Remove an LVM volume group &quot;vgname&quot;, (for example &quot;VG&quot;).
<div class="Pp"></div>
This also forcibly removes all logical volumes in the volume group (if any).
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgrename"><a class="selflink" href="#vgrename">vgrename</a></h2>
<pre>
 vgrename volgroup newvolgroup
</pre>
<div class="Pp"></div>
Rename a volume group &quot;volgroup&quot; with the new name
  &quot;newvolgroup&quot;.
<h2 class="Ss" title="Ss" id="vgs"><a class="selflink" href="#vgs">vgs</a></h2>
<pre>
 vgs
</pre>
<div class="Pp"></div>
List all the volumes groups detected. This is the equivalent of the
  <i>vgs</i>(8) command.
<div class="Pp"></div>
This returns a list of just the volume group names that were detected (eg.
  &quot;VolGroup00&quot;).
<div class="Pp"></div>
See also &quot;vgs-full&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgs-full"><a class="selflink" href="#vgs-full">vgs-full</a></h2>
<pre>
 vgs-full
</pre>
<div class="Pp"></div>
List all the volumes groups detected. This is the equivalent of the
  <i>vgs</i>(8) command. The &quot;full&quot; version includes all fields.
<div class="Pp"></div>
This command depends on the feature &quot;lvm2&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="vgscan"><a class="selflink" href="#vgscan">vgscan</a></h2>
<pre>
 vgscan
</pre>
<div class="Pp"></div>
This rescans all block devices and rebuilds the list of LVM physical volumes,
  volume groups and logical volumes.
<h2 class="Ss" title="Ss" id="vguuid"><a class="selflink" href="#vguuid">vguuid</a></h2>
<pre>
 vguuid vgname
</pre>
<div class="Pp"></div>
This command returns the UUID of the LVM VG named &quot;vgname&quot;.
<h2 class="Ss" title="Ss" id="wc-c"><a class="selflink" href="#wc-c">wc-c</a></h2>
<pre>
 wc-c path
</pre>
<div class="Pp"></div>
This command counts the characters in a file, using the &quot;wc -c&quot;
  external command.
<h2 class="Ss" title="Ss" id="wc-l"><a class="selflink" href="#wc-l">wc-l</a></h2>
<pre>
 wc-l path
</pre>
<div class="Pp"></div>
This command counts the lines in a file, using the &quot;wc -l&quot; external
  command.
<h2 class="Ss" title="Ss" id="wc-w"><a class="selflink" href="#wc-w">wc-w</a></h2>
<pre>
 wc-w path
</pre>
<div class="Pp"></div>
This command counts the words in a file, using the &quot;wc -w&quot; external
  command.
<h2 class="Ss" title="Ss" id="wipefs"><a class="selflink" href="#wipefs">wipefs</a></h2>
<pre>
 wipefs device
</pre>
<div class="Pp"></div>
This command erases filesystem or RAID signatures from the specified
  &quot;device&quot; to make the filesystem invisible to libblkid.
<div class="Pp"></div>
This does not erase the filesystem itself nor any other data from the
  &quot;device&quot;.
<div class="Pp"></div>
Compare with &quot;zero&quot; which zeroes the first few blocks of a device.
<div class="Pp"></div>
This command depends on the feature &quot;wipefs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="write"><a class="selflink" href="#write">write</a></h2>
<pre>
 write path content
</pre>
<div class="Pp"></div>
This call creates a file called &quot;path&quot;. The content of the file is the
  string &quot;content&quot; (which can contain any 8 bit data).
<div class="Pp"></div>
See also &quot;write-append&quot;.
<h2 class="Ss" title="Ss" id="write-append"><a class="selflink" href="#write-append">write-append</a></h2>
<pre>
 write-append path content
</pre>
<div class="Pp"></div>
This call appends &quot;content&quot; to the end of file &quot;path&quot;. If
  &quot;path&quot; does not exist, then a new file is created.
<div class="Pp"></div>
See also &quot;write&quot;.
<h2 class="Ss" title="Ss" id="write-file"><a class="selflink" href="#write-file">write-file</a></h2>
<pre>
 write-file path content size
</pre>
<div class="Pp"></div>
This call creates a file called &quot;path&quot;. The contents of the file is
  the string &quot;content&quot; (which can contain any 8 bit data), with length
  &quot;size&quot;.
<div class="Pp"></div>
As a special case, if &quot;size&quot; is 0 then the length is calculated using
  &quot;strlen&quot; (so in this case the content cannot contain embedded ASCII
  NULs).
<div class="Pp"></div>
<i>NB.</i> Owing to a bug, writing content containing ASCII NUL characters does
  <i>not</i> work, even if the length is specified.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;write&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="xfs-admin"><a class="selflink" href="#xfs-admin">xfs-admin</a></h2>
<pre>
 xfs-admin device [extunwritten:true|false] [imgfile:true|false] [v2log:true|false] [projid32bit:true|false] [lazycounter:true|false] [label:..] [uuid:..]
</pre>
<div class="Pp"></div>
Change the parameters of the XFS filesystem on &quot;device&quot;.
<div class="Pp"></div>
Devices that are mounted cannot be modified. Administrators must unmount
  filesystems before this call can modify parameters.
<div class="Pp"></div>
Some of the parameters of a mounted filesystem can be examined and modified
  using the &quot;xfs-info&quot; and &quot;xfs-growfs&quot; calls.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;xfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="xfs-growfs"><a class="selflink" href="#xfs-growfs">xfs-growfs</a></h2>
<pre>
 xfs-growfs path [datasec:true|false] [logsec:true|false] [rtsec:true|false] [datasize:N] [logsize:N] [rtsize:N] [rtextsize:N] [maxpct:N]
</pre>
<div class="Pp"></div>
Grow the XFS filesystem mounted at &quot;path&quot;.
<div class="Pp"></div>
The returned struct contains geometry information. Missing fields are returned
  as &quot;-1&quot; (for numeric fields) or empty string.
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;xfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="xfs-info"><a class="selflink" href="#xfs-info">xfs-info</a></h2>
<pre>
 xfs-info pathordevice
</pre>
<div class="Pp"></div>
&quot;pathordevice&quot; is a mounted XFS filesystem or a device containing an
  XFS filesystem. This command returns the geometry of the filesystem.
<div class="Pp"></div>
The returned struct contains geometry information. Missing fields are returned
  as &quot;-1&quot; (for numeric fields) or empty string.
<div class="Pp"></div>
This command depends on the feature &quot;xfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="xfs-repair"><a class="selflink" href="#xfs-repair">xfs-repair</a></h2>
<pre>
 xfs-repair device [forcelogzero:true|false] [nomodify:true|false] [noprefetch:true|false] [forcegeometry:true|false] [maxmem:N] [ihashsize:N] [bhashsize:N] [agstride:N] [logdev:..] [rtdev:..]
</pre>
<div class="Pp"></div>
Repair corrupt or damaged XFS filesystem on &quot;device&quot;.
<div class="Pp"></div>
The filesystem is specified using the &quot;device&quot; argument which should
  be the device name of the disk partition or volume containing the filesystem.
  If given the name of a block device, &quot;xfs_repair&quot; will attempt to
  find the raw device associated with the specified block device and will use
  the raw device instead.
<div class="Pp"></div>
Regardless, the filesystem to be repaired must be unmounted, otherwise, the
  resulting filesystem may be inconsistent or corrupt.
<div class="Pp"></div>
The returned status indicates whether filesystem corruption was detected
  (returns 1) or was not detected (returns 0).
<div class="Pp"></div>
This command has one or more optional arguments. See &quot;OPTIONAL
  ARGUMENTS&quot;.
<div class="Pp"></div>
This command depends on the feature &quot;xfs&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="zegrep"><a class="selflink" href="#zegrep">zegrep</a></h2>
<pre>
 zegrep regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;zegrep&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zegrepi"><a class="selflink" href="#zegrepi">zegrepi</a></h2>
<pre>
 zegrepi regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;zegrep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zero"><a class="selflink" href="#zero">zero</a></h2>
<pre>
 zero device
</pre>
<div class="Pp"></div>
This command writes zeroes over the first few blocks of &quot;device&quot;.
<div class="Pp"></div>
How many blocks are zeroed isn't specified (but it's <i>not</i> enough to
  securely wipe the device). It should be sufficient to remove any partition
  tables, filesystem superblocks and so on.
<div class="Pp"></div>
If blocks are already zero, then this command avoids writing zeroes. This
  prevents the underlying device from becoming non-sparse or growing
  unnecessarily.
<div class="Pp"></div>
See also: &quot;zero-device&quot;, &quot;scrub-device&quot;,
  &quot;is-zero-device&quot;
<h2 class="Ss" title="Ss" id="zero-device"><a class="selflink" href="#zero-device">zero-device</a></h2>
<pre>
 zero-device device
</pre>
<div class="Pp"></div>
This command writes zeroes over the entire &quot;device&quot;. Compare with
  &quot;zero&quot; which just zeroes the first few blocks of a device.
<div class="Pp"></div>
If blocks are already zero, then this command avoids writing zeroes. This
  prevents the underlying device from becoming non-sparse or growing
  unnecessarily.
<h2 class="Ss" title="Ss" id="zero-free-space"><a class="selflink" href="#zero-free-space">zero-free-space</a></h2>
<pre>
 zero-free-space directory
</pre>
<div class="Pp"></div>
Zero the free space in the filesystem mounted on <i>directory</i>. The
  filesystem must be mounted read-write.
<div class="Pp"></div>
The filesystem contents are not affected, but any free space in the filesystem
  is freed.
<div class="Pp"></div>
Free space is not &quot;trimmed&quot;. You may want to call &quot;fstrim&quot;
  either as an alternative to this, or after calling this, depending on your
  requirements.
<h2 class="Ss" title="Ss" id="zerofree"><a class="selflink" href="#zerofree">zerofree</a></h2>
<pre>
 zerofree device
</pre>
<div class="Pp"></div>
This runs the <i>zerofree</i> program on &quot;device&quot;. This program claims
  to zero unused inodes and disk blocks on an ext2/3 filesystem, thus making it
  possible to compress the filesystem more effectively.
<div class="Pp"></div>
You should <b>not</b> run this program if the filesystem is mounted.
<div class="Pp"></div>
It is possible that using this program can damage the filesystem or data on the
  filesystem.
<div class="Pp"></div>
This command depends on the feature &quot;zerofree&quot;. See also
  &quot;feature-available&quot;.
<h2 class="Ss" title="Ss" id="zfgrep"><a class="selflink" href="#zfgrep">zfgrep</a></h2>
<pre>
 zfgrep pattern path
</pre>
<div class="Pp"></div>
This calls the external &quot;zfgrep&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zfgrepi"><a class="selflink" href="#zfgrepi">zfgrepi</a></h2>
<pre>
 zfgrepi pattern path
</pre>
<div class="Pp"></div>
This calls the external &quot;zfgrep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zfile"><a class="selflink" href="#zfile">zfile</a></h2>
<pre>
 zfile meth path
</pre>
<div class="Pp"></div>
This command runs <i>file</i> after first decompressing &quot;path&quot; using
  &quot;method&quot;.
<div class="Pp"></div>
&quot;method&quot; must be one of &quot;gzip&quot;, &quot;compress&quot; or
  &quot;bzip2&quot;.
<div class="Pp"></div>
Since 1.0.63, use &quot;file&quot; instead which can now process compressed
  files.
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;file&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zgrep"><a class="selflink" href="#zgrep">zgrep</a></h2>
<pre>
 zgrep regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;zgrep&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h2 class="Ss" title="Ss" id="zgrepi"><a class="selflink" href="#zgrepi">zgrepi</a></h2>
<pre>
 zgrepi regex path
</pre>
<div class="Pp"></div>
This calls the external &quot;zgrep -i&quot; program and returns the matching
  lines.
<div class="Pp"></div>
Because of the message protocol, there is a transfer limit of somewhere between
  2MB and 4MB. See &quot;PROTOCOL LIMITS&quot; in <i>guestfs</i>(3).
<div class="Pp"></div>
<i>This function is deprecated.</i> In new code, use the &quot;grep&quot; call
  instead.
<div class="Pp"></div>
Deprecated functions will not be removed from the API, but the fact that they
  are deprecated indicates that there are problems with correct use of these
  functions.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
guestfish returns 0 if the commands completed without error, or 1 if there was
  an error.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">EDITOR</dt>
  <dd class="It-tag">The &quot;edit&quot; command uses $EDITOR as the editor. If
      not set, it uses &quot;vi&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_DISPLAY_IMAGE</dt>
  <dd class="It-tag">The &quot;display&quot; command uses
      $GUESTFISH_DISPLAY_IMAGE to display images. If not set, it uses
      <i>display</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_INIT</dt>
  <dd class="It-tag">Printed when guestfish starts. See &quot;PROMPT&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_OUTPUT</dt>
  <dd class="It-tag">Printed before guestfish output. See
    &quot;PROMPT&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_PID</dt>
  <dd class="It-tag">Used with the <i>--remote</i> option to specify the remote
      guestfish process to control. See section &quot;REMOTE CONTROL GUESTFISH
      OVER A SOCKET&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_PS1</dt>
  <dd class="It-tag">Set the command prompt. See &quot;PROMPT&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GUESTFISH_RESTORE</dt>
  <dd class="It-tag">Printed before guestfish exits. See
    &quot;PROMPT&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">HEXEDITOR</dt>
  <dd class="It-tag">The &quot;hexedit&quot; command uses $HEXEDITOR as the
      external hex editor. If not specified, the external <i>hexedit</i>(1)
      program is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">HOME</dt>
  <dd class="It-tag">If compiled with GNU readline support, various files in the
      home directory can be used. See &quot;FILES&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_APPEND</dt>
  <dd class="It-tag">Pass additional options to the guest kernel.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_ATTACH_METHOD</dt>
  <dd class="It-tag">This is the old way to set
    &quot;LIBGUESTFS_BACKEND&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_BACKEND</dt>
  <dd class="It-tag">Choose the default way to create the appliance. See
      &quot;guestfs_set_backend&quot; in <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_BACKEND_SETTINGS</dt>
  <dd class="It-tag">A colon-separated list of backend-specific settings. See
      &quot;BACKEND&quot; in <i>guestfs</i>(3), &quot;BACKEND SETTINGS&quot; in
      <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_CACHEDIR</dt>
  <dd class="It-tag">The location where libguestfs will cache its appliance,
      when using a supermin appliance. The appliance is cached and shared
      between all handles which have the same effective user ID.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;LIBGUESTFS_CACHEDIR&quot; is not set, then &quot;TMPDIR&quot; is
      used. If &quot;TMPDIR&quot; is not set, then <i>/var/tmp</i> is used.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also &quot;LIBGUESTFS_TMPDIR&quot;, &quot;set-cachedir&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_DEBUG</dt>
  <dd class="It-tag">Set &quot;LIBGUESTFS_DEBUG=1&quot; to enable verbose
      messages. This has the same effect as using the <b>-v</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_HV</dt>
  <dd class="It-tag">Set the default hypervisor (usually qemu) binary that
      libguestfs uses. If not set, then the qemu which was found at compile time
      by the configure script is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_MEMSIZE</dt>
  <dd class="It-tag">Set the memory allocated to the qemu process, in megabytes.
      For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 LIBGUESTFS_MEMSIZE=700
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_PATH</dt>
  <dd class="It-tag">Set the path that guestfish uses to search for kernel and
      initrd.img. See the discussion of paths in <i>guestfs</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_QEMU</dt>
  <dd class="It-tag">This is the old way to set &quot;LIBGUESTFS_HV&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_TMPDIR</dt>
  <dd class="It-tag">The location where libguestfs will store temporary files
      used by each handle.
    <div style="height: 1.00em;">&#x00A0;</div>
    If &quot;LIBGUESTFS_TMPDIR&quot; is not set, then &quot;TMPDIR&quot; is
      used. If &quot;TMPDIR&quot; is not set, then <i>/tmp</i> is used.
    <div style="height: 1.00em;">&#x00A0;</div>
    See also &quot;LIBGUESTFS_CACHEDIR&quot;, &quot;set-tmpdir&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LIBGUESTFS_TRACE</dt>
  <dd class="It-tag">Set &quot;LIBGUESTFS_TRACE=1&quot; to enable command
      traces.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PAGER</dt>
  <dd class="It-tag">The &quot;more&quot; command uses $PAGER as the pager. If
      not set, it uses &quot;more&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PATH</dt>
  <dd class="It-tag">Libguestfs and guestfish may run some external programs,
      and rely on $PATH being set to a reasonable value. If using the libvirt
      backend, libvirt will not work at all unless $PATH contains the path of
      qemu/KVM.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SUPERMIN_KERNEL</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SUPERMIN_KERNEL_VERSION</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SUPERMIN_MODULES</dt>
  <dd class="It-tag">These three environment variables allow the kernel that
      libguestfs uses in the appliance to be selected. If $SUPERMIN_KERNEL is
      not set, then the most recent host kernel is chosen. For more information
      about kernel selection, see <i>supermin</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">TMPDIR</dt>
  <dd class="It-tag">See &quot;LIBGUESTFS_CACHEDIR&quot;,
      &quot;LIBGUESTFS_TMPDIR&quot;.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">$XDG_CONFIG_HOME/libguestfs/libguestfs-tools.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/.libguestfs-tools.rc</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$XDG_CONFIG_DIRS/libguestfs/libguestfs-tools.conf</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/libguestfs-tools.conf</dt>
  <dd class="It-tag">This configuration file controls the default read-only or
      read-write mode ( <i>--ro</i> or <i>--rw</i>).
    <div style="height: 1.00em;">&#x00A0;</div>
    See <i>libguestfs-tools.conf</i>(5).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/.guestfish</dt>
  <dd class="It-tag">If compiled with GNU readline support, then the command
      history is saved in this file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/.inputrc</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/inputrc</dt>
  <dd class="It-tag">If compiled with GNU readline support, then these files can
      be used to configure readline. For further information, please see
      &quot;INITIALIZATION FILE&quot; in <i>readline</i>(3).
    <div style="height: 1.00em;">&#x00A0;</div>
    To write rules which only apply to guestfish, use:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 $if guestfish
 ...
 $endif
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Variables that you can set in inputrc that change the behaviour of guestfish
      in useful ways include:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">completion-ignore-case (default: on)</dt>
  <dd class="It-tag">By default, guestfish will ignore case when tab-completing
      paths on the disk. Use:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 set completion-ignore-case off
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    to make guestfish case sensitive.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">test1.img</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">test2.img (etc)</dt>
  <dd class="It-tag">When using the <i>-N</i> or <i>--new</i> option, the
      prepared disk or filesystem will be created in the file <i>test1.img</i>
      in the current directory. The second use of <i>-N</i> will use
      <i>test2.img</i> and so on. Any existing file with the same name will be
      overwritten. You can use a different filename by using the
      &quot;filename=&quot; prefix.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>guestfs</i>(3), http://libguestfs.org/, <i>virt-alignment-scan</i>(1),
  <i>virt-builder</i>(1), <i>virt-cat</i>(1), <i>virt-copy-in</i>(1),
  <i>virt-copy-out</i>(1), <i>virt-customize</i>(1), <i>virt-df</i>(1),
  <i>virt-diff</i>(1), <i>virt-edit</i>(1), <i>virt-filesystems</i>(1),
  <i>virt-inspector</i>(1), <i>virt-list-filesystems</i>(1),
  <i>virt-list-partitions</i>(1), <i>virt-log</i>(1), <i>virt-ls</i>(1),
  <i>virt-make-fs</i>(1), <i>virt-p2v</i>(1), <i>virt-rescue</i>(1),
  <i>virt-resize</i>(1), <i>virt-sparsify</i>(1), <i>virt-sysprep</i>(1),
  <i>virt-tar</i>(1), <i>virt-tar-in</i>(1), <i>virt-tar-out</i>(1),
  <i>virt-v2v</i>(1), <i>virt-win-reg</i>(1), <i>libguestfs-tools.conf</i>(5),
  <i>display</i>(1), <i>hexedit</i>(1), <i>supermin</i>(1).
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Richard W.M. Jones (&quot;rjones at redhat dot com&quot;)
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2009-2016 Red Hat Inc.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; either version 2 of the License, or (at your option) any later
  version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 51 Franklin
  Street, Fifth Floor, Boston, MA 02110-1301 USA.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
To get a list of bugs against libguestfs, use this link:
  https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools
<div class="Pp"></div>
To report a new bug against libguestfs, use this link:
  https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools
<div class="Pp"></div>
When reporting a bug, please supply:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The version of libguestfs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Where you got libguestfs (eg. which Linux distro, compiled
      from source, etc)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Describe the bug accurately and give a way to reproduce
    it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Run <i>libguestfs-test-tool</i>(1) and paste the
      <b>complete, unedited</b> output into the bug report.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-08-08</td>
    <td class="foot-os">libguestfs-1.32.7</td>
  </tr>
</table>
</body>
</html>
