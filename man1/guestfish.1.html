<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:16:01 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>guestfish(1) Virtualization Support guestfish(1)</p>

<p style="margin-top: 1em">NAME <br>
guestfish - the guest filesystem shell</p>

<p style="margin-top: 1em">SYNOPSIS <br>
guestfish [--options] [commands]</p>

<p style="margin-top: 1em">guestfish</p>

<p style="margin-top: 1em">guestfish [--ro|--rw] -a
disk.img</p>

<p style="margin-top: 1em">guestfish [--ro|--rw] -a
disk.img -m dev[:mountpoint]</p>

<p style="margin-top: 1em">guestfish -d libvirt-domain</p>

<p style="margin-top: 1em">guestfish [--ro|--rw] -a
disk.img -i</p>

<p style="margin-top: 1em">guestfish -d libvirt-domain
-i</p>

<p style="margin-top: 1em">WARNING <br>
Using &quot;guestfish&quot; in write mode on live virtual
machines, or concurrently with other disk editing tools, can
be dangerous, potentially causing disk corruption. The
virtual <br>
machine must be shut down before you use this command, and
disk images must not be edited concurrently.</p>

<p style="margin-top: 1em">Use the --ro (read-only) option
to use &quot;guestfish&quot; safely if the disk image or
virtual machine might be live. You may see strange or
inconsistent results if running concurrently <br>
with other changes, but with this option you won&rsquo;t
risk disk corruption.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Guestfish is a shell and command-line tool for examining and
modifying virtual machine filesystems. It uses libguestfs
and exposes all of the functionality of the guestfs API,
<br>
see guestfs(3).</p>

<p style="margin-top: 1em">Guestfish gives you structured
access to the libguestfs API, from shell scripts or the
command line or interactively. If you want to rescue a
broken virtual machine image, you <br>
should look at the virt-rescue(1) command.</p>

<p style="margin-top: 1em">EXAMPLES <br>
As an interactive shell <br>
$ guestfish</p>

<p style="margin-top: 1em">Welcome to guestfish, the guest
filesystem shell for <br>
editing virtual machine filesystems.</p>

<p style="margin-top: 1em">Type: &rsquo;help&rsquo; for a
list of commands <br>
&rsquo;man&rsquo; to read the manual <br>
&rsquo;quit&rsquo; to quit the shell</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; add-ro disk.img
<br>
&gt;&lt;fs&gt; run <br>
&gt;&lt;fs&gt; list-filesystems <br>
/dev/sda1: ext4 <br>
/dev/vg_guest/lv_root: ext4 <br>
/dev/vg_guest/lv_swap: swap <br>
&gt;&lt;fs&gt; mount /dev/vg_guest/lv_root / <br>
&gt;&lt;fs&gt; cat /etc/fstab <br>
# /etc/fstab <br>
# Created by anaconda <br>
[...] <br>
&gt;&lt;fs&gt; exit</p>

<p style="margin-top: 1em">From shell scripts <br>
Create a new /etc/motd file in a guest or disk image:</p>

<p style="margin-top: 1em">guestfish &lt;&lt;_EOF_ <br>
add disk.img <br>
run <br>
mount /dev/vg_guest/lv_root / <br>
write /etc/motd &quot;Welcome, new users&quot; <br>
_EOF_</p>

<p style="margin-top: 1em">List the LVM logical volumes in
a disk image:</p>

<p style="margin-top: 1em">guestfish -a disk.img --ro
&lt;&lt;_EOF_ <br>
run <br>
lvs <br>
_EOF_</p>

<p style="margin-top: 1em">List all the filesystems in a
disk image:</p>

<p style="margin-top: 1em">guestfish -a disk.img --ro
&lt;&lt;_EOF_ <br>
run <br>
list-filesystems <br>
_EOF_</p>

<p style="margin-top: 1em">On one command line <br>
Update /etc/resolv.conf in a guest:</p>

<p style="margin-top: 1em">guestfish add disk.img : run :
mount /dev/vg_guest/lv_root / : write /etc/resolv.conf
&quot;nameserver 1.2.3.4&quot;</p>

<p style="margin-top: 1em">Edit /boot/grub/grub.conf
interactively:</p>

<p style="margin-top: 1em">guestfish --rw --add disk.img
--mount /dev/vg_guest/lv_root --mount /dev/sda1:/boot edit
/boot/grub/grub.conf</p>

<p style="margin-top: 1em">Mount disks automatically <br>
Use the -i option to automatically mount the disks from a
virtual machine:</p>

<p style="margin-top: 1em">guestfish --ro -a disk.img -i
cat /etc/group</p>

<p style="margin-top: 1em">guestfish --ro -d libvirt-domain
-i cat /etc/group</p>

<p style="margin-top: 1em">Another way to edit
/boot/grub/grub.conf interactively is:</p>

<p style="margin-top: 1em">guestfish --rw -a disk.img -i
edit /boot/grub/grub.conf</p>

<p style="margin-top: 1em">As a script interpreter <br>
Create a 100MB disk containing an ext2-formatted
partition:</p>

<p style="margin-top: 1em">#!/usr/bin/guestfish -f <br>
sparse test1.img 100M <br>
run <br>
part-disk /dev/sda mbr <br>
mkfs ext2 /dev/sda1</p>

<p style="margin-top: 1em">Start with a prepared disk <br>
An alternate way to create a 100MB disk called test1.img
containing a single ext2-formatted partition:</p>

<p style="margin-top: 1em">guestfish -N fs</p>

<p style="margin-top: 1em">To list what is available
do:</p>

<p style="margin-top: 1em">guestfish -N help | less</p>

<p style="margin-top: 1em">Remote drives <br>
Access a remote disk using NBD:</p>

<p style="margin-top: 1em">guestfish -a
nbd://example.com</p>

<p style="margin-top: 1em">Remote control <br>
eval &quot;&lsquo;guestfish --listen&lsquo;&quot; <br>
guestfish --remote add-ro disk.img <br>
guestfish --remote run <br>
guestfish --remote lvs</p>

<p style="margin-top: 1em">OPTIONS <br>
--help <br>
Displays general help on options.</p>

<p style="margin-top: 1em">-h <br>
--cmd-help <br>
Lists all available guestfish commands.</p>

<p style="margin-top: 1em">-h cmd <br>
--cmd-help cmd <br>
Displays detailed help on a single command
&quot;cmd&quot;.</p>

<p style="margin-top: 1em">-a image <br>
--add image <br>
Add a block device or virtual machine image to the
shell.</p>

<p style="margin-top: 1em">The format of the disk image is
auto-detected. To override this and force a particular
format use the --format=.. option.</p>

<p style="margin-top: 1em">Using this flag is mostly
equivalent to using the &quot;add&quot; command, with
&quot;readonly:true&quot; if the --ro flag was given, and
with &quot;format:...&quot; if the --format=... flag was
given.</p>

<p style="margin-top: 1em">-a URI <br>
--add URI <br>
Add a remote disk. See &quot;ADDING REMOTE
STORAGE&quot;.</p>

<p style="margin-top: 1em">-c URI <br>
--connect URI <br>
When used in conjunction with the -d option, this specifies
the libvirt URI to use. The default is to use the default
libvirt connection.</p>

<p style="margin-top: 1em">--csh <br>
If using the --listen option and a csh-like shell, use this
option. See section &quot;REMOTE CONTROL AND CSH&quot;
below.</p>

<p style="margin-top: 1em">-d libvirt-domain <br>
--domain libvirt-domain <br>
Add disks from the named libvirt domain. If the --ro option
is also used, then any libvirt domain can be used. However
in write mode, only libvirt domains which are shut <br>
down can be named here.</p>

<p style="margin-top: 1em">Domain UUIDs can be used instead
of names.</p>

<p style="margin-top: 1em">Using this flag is mostly
equivalent to using the &quot;add-domain&quot; command, with
&quot;readonly:true&quot; if the --ro flag was given, and
with &quot;format:...&quot; if the --format=... flag was
<br>
given.</p>

<p style="margin-top: 1em">--echo-keys <br>
When prompting for keys and passphrases, guestfish normally
turns echoing off so you cannot see what you are typing. If
you are not worried about Tempest attacks and there <br>
is no one else in the room you can specify this flag to see
what you are typing.</p>

<p style="margin-top: 1em">-f file <br>
--file file <br>
Read commands from &quot;file&quot;. To write pure guestfish
scripts, use:</p>

<p style="margin-top: 1em">#!/usr/bin/guestfish -f</p>

<p style="margin-top: 1em">--format=raw|qcow2|.. <br>
--format <br>
The default for the -a option is to auto-detect the format
of the disk image. Using this forces the disk format for -a
options which follow on the command line. Using <br>
--format with no argument switches back to auto-detection
for subsequent -a options.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">guestfish --format=raw -a
disk.img</p>

<p style="margin-top: 1em">forces raw format (no
auto-detection) for disk.img.</p>

<p style="margin-top: 1em">guestfish --format=raw -a
disk.img --format -a another.img</p>

<p style="margin-top: 1em">forces raw format (no
auto-detection) for disk.img and reverts to auto-detection
for another.img.</p>

<p style="margin-top: 1em">If you have untrusted raw-format
guest disk images, you should use this option to specify the
disk format. This avoids a possible security problem with
malicious guests <br>
(CVE-2010-3851). See also &quot;add&quot;.</p>

<p style="margin-top: 1em">-i <br>
--inspector <br>
Using virt-inspector(1) code, inspect the disks looking for
an operating system and mount filesystems as they would be
mounted on the real virtual machine.</p>

<p style="margin-top: 1em">Typical usage is either:</p>

<p style="margin-top: 1em">guestfish -d myguest -i</p>

<p style="margin-top: 1em">(for an inactive libvirt domain
called myguest), or:</p>

<p style="margin-top: 1em">guestfish --ro -d myguest -i</p>

<p style="margin-top: 1em">(for active domains, readonly),
or specify the block device directly:</p>

<p style="margin-top: 1em">guestfish --rw -a
/dev/Guests/MyGuest -i</p>

<p style="margin-top: 1em">Note that the command line
syntax changed slightly over older versions of guestfish.
You can still use the old syntax:</p>

<p style="margin-top: 1em">guestfish [--ro] -i disk.img</p>

<p style="margin-top: 1em">guestfish [--ro] -i
libvirt-domain</p>

<p style="margin-top: 1em">Using this flag is mostly
equivalent to using the &quot;inspect-os&quot; command and
then using other commands to mount the filesystems that were
found.</p>

<p style="margin-top: 1em">--keys-from-stdin <br>
Read key or passphrase parameters from stdin. The default is
to try to read passphrases from the user by opening
/dev/tty.</p>

<p style="margin-top: 1em">--listen <br>
Fork into the background and listen for remote commands. See
section &quot;REMOTE CONTROL GUESTFISH OVER A SOCKET&quot;
below.</p>

<p style="margin-top: 1em">--live <br>
Connect to a live virtual machine. (Experimental, see
&quot;ATTACHING TO RUNNING DAEMONS&quot; in guestfs(3)).</p>

<p style="margin-top: 1em">-m
dev[:mountpoint[:options[:fstype]]] <br>
--mount dev[:mountpoint[:options[:fstype]]] <br>
Mount the named partition or logical volume on the given
mountpoint.</p>

<p style="margin-top: 1em">If the mountpoint is omitted, it
defaults to /.</p>

<p style="margin-top: 1em">You have to mount something on /
before most commands will work.</p>

<p style="margin-top: 1em">If any -m or --mount options are
given, the guest is automatically launched.</p>

<p style="margin-top: 1em">If you don&rsquo;t know what
filesystems a disk image contains, you can either run
guestfish without this option, then list the partitions,
filesystems and LVs available (see <br>
&quot;list-partitions&quot;, &quot;list-filesystems&quot;
and &quot;lvs&quot; commands), or you can use the
virt-filesystems(1) program.</p>

<p style="margin-top: 1em">The third (and rarely used) part
of the mount parameter is the list of mount options used to
mount the underlying filesystem. If this is not given, then
the mount options <br>
are either the empty string or &quot;ro&quot; (the latter if
the --ro flag is used). By specifying the mount options, you
override this default choice. Probably the only time you
<br>
would use this is to enable ACLs and/or extended attributes
if the filesystem can support them:</p>

<p style="margin-top: 1em">-m
/dev/sda1:/:acl,user_xattr</p>

<p style="margin-top: 1em">Using this flag is equivalent to
using the &quot;mount-options&quot; command.</p>

<p style="margin-top: 1em">The fourth part of the parameter
is the filesystem driver to use, such as &quot;ext3&quot; or
&quot;ntfs&quot;. This is rarely needed, but can be useful
if multiple drivers are valid for a <br>
filesystem (eg: &quot;ext2&quot; and &quot;ext3&quot;), or
if libguestfs misidentifies a filesystem.</p>

<p style="margin-top: 1em">--network <br>
Enable QEMU user networking in the guest.</p>

<p style="margin-top: 1em">-N [filename=]type <br>
--new [filename=]type <br>
-N help <br>
Prepare a fresh disk image formatted as &quot;type&quot;.
This is an alternative to the -a option: whereas -a adds an
existing disk, -N creates a preformatted disk with a
filesystem <br>
and adds it. See &quot;PREPARED DISK IMAGES&quot; below.</p>

<p style="margin-top: 1em">-n <br>
--no-sync <br>
Disable autosync. This is enabled by default. See the
discussion of autosync in the guestfs(3) manpage.</p>

<p style="margin-top: 1em">--no-dest-paths <br>
Don&rsquo;t tab-complete paths on the guest filesystem. It
is useful to be able to hit the tab key to complete paths on
the guest filesystem, but this causes extra
&quot;hidden&quot; <br>
guestfs calls to be made, so this option is here to allow
this feature to be disabled.</p>

<p style="margin-top: 1em">--pipe-error <br>
If writes fail to pipe commands (see &quot;PIPES&quot;
below), then the command returns an error.</p>

<p style="margin-top: 1em">The default (also for historical
reasons) is to ignore such errors so that:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt;
command_with_lots_of_output | head</p>

<p style="margin-top: 1em">doesn&rsquo;t give an error.</p>

<p style="margin-top: 1em">--progress-bars <br>
Enable progress bars, even when guestfish is used
non-interactively.</p>

<p style="margin-top: 1em">Progress bars are enabled by
default when guestfish is used as an interactive shell.</p>

<p style="margin-top: 1em">--no-progress-bars <br>
Disable progress bars.</p>

<p style="margin-top: 1em">--remote[=pid] <br>
Send remote commands to $GUESTFISH_PID or &quot;pid&quot;.
See section &quot;REMOTE CONTROL GUESTFISH OVER A
SOCKET&quot; below.</p>

<p style="margin-top: 1em">-r <br>
--ro <br>
This changes the -a, -d and -m options so that disks are
added and mounts are done read-only.</p>

<p style="margin-top: 1em">The option must always be used
if the disk image or virtual machine might be running, and
is generally recommended in cases where you don&rsquo;t need
write access to the disk.</p>

<p style="margin-top: 1em">Note that prepared disk images
created with -N are not affected by this option. Also
commands like &quot;add&quot; are not affected - you have to
specify the &quot;readonly:true&quot; option <br>
explicitly if you need it.</p>

<p style="margin-top: 1em">See also &quot;OPENING DISKS FOR
READ AND WRITE&quot; below.</p>

<p style="margin-top: 1em">--selinux <br>
This option is provided for backwards compatibility and does
nothing.</p>

<p style="margin-top: 1em">-v <br>
--verbose <br>
Enable very verbose messages. This is particularly useful if
you find a bug.</p>

<p style="margin-top: 1em">-V <br>
--version <br>
Display the guestfish / libguestfs version number and
exit.</p>

<p style="margin-top: 1em">-w <br>
--rw <br>
This changes the -a, -d and -m options so that disks are
added and mounts are done read-write.</p>

<p style="margin-top: 1em">See &quot;OPENING DISKS FOR READ
AND WRITE&quot; below.</p>

<p style="margin-top: 1em">-x Echo each command before
executing it.</p>

<p style="margin-top: 1em">COMMANDS ON COMMAND LINE <br>
Any additional (non-option) arguments are treated as
commands to execute.</p>

<p style="margin-top: 1em">Commands to execute should be
separated by a colon (&quot;:&quot;), where the colon is a
separate parameter. Thus:</p>

<p style="margin-top: 1em">guestfish cmd [args...] : cmd
[args...] : cmd [args...] ...</p>

<p style="margin-top: 1em">If there are no additional
arguments, then we enter a shell, either an interactive
shell with a prompt (if the input is a terminal) or a
non-interactive shell.</p>

<p style="margin-top: 1em">In either command line mode or
non-interactive shell, the first command that gives an error
causes the whole shell to exit. In interactive mode (with a
prompt) if a command <br>
fails, you can continue to enter commands.</p>

<p style="margin-top: 1em">USING launch (OR run) <br>
As with guestfs(3), you must first configure your guest by
adding disks, then launch it, then mount any disks you need,
and finally issue actions/commands. So the general order
<br>
of the day is:</p>

<p style="margin-top: 1em">&Acirc;&middot; add or
-a/--add</p>

<p style="margin-top: 1em">&Acirc;&middot; launch (aka
run)</p>

<p style="margin-top: 1em">&Acirc;&middot; mount or
-m/--mount</p>

<p style="margin-top: 1em">&Acirc;&middot; any other
commands</p>

<p style="margin-top: 1em">&quot;run&quot; is a synonym for
&quot;launch&quot;. You must &quot;launch&quot; (or
&quot;run&quot;) your guest before mounting or performing
any other commands.</p>

<p style="margin-top: 1em">The only exception is that if
any of the -i, -m, --mount, -N or --new options were given
then &quot;run&quot; is done automatically, simply because
guestfish can&rsquo;t perform the action you <br>
asked for without doing this.</p>

<p style="margin-top: 1em">OPENING DISKS FOR READ AND WRITE
<br>
The guestfish, guestmount(1) and virt-rescue(1) options --ro
and --rw affect whether the other command line options -a,
-c, -d, -i and -m open disk images read-only or for <br>
writing.</p>

<p style="margin-top: 1em">In libguestfs &acirc;&curren;
1.10, guestfish, guestmount and virt-rescue defaulted to
opening disk images supplied on the command line for write.
To open a disk image read-only you have to <br>
do -a image --ro.</p>

<p style="margin-top: 1em">This matters: If you
accidentally open a live VM disk image writable then you
will cause irreversible disk corruption.</p>

<p style="margin-top: 1em">In a future libguestfs we intend
to change the default the other way. Disk images will be
opened read-only. You will have to either specify guestfish
--rw, guestmount --rw, <br>
virt-rescue --rw, or change the configuration file in order
to get write access for disk images specified by those other
command line options.</p>

<p style="margin-top: 1em">This version of guestfish,
guestmount and virt-rescue has a --rw option which does
nothing (it is already the default). However it is highly
recommended that you use this option <br>
to indicate that you need write access, and prepare your
scripts for the day when this option will be required for
write access.</p>

<p style="margin-top: 1em">Note: This does not affect
commands like &quot;add&quot; and &quot;mount&quot;, or any
other libguestfs program apart from guestfish and
guestmount.</p>

<p style="margin-top: 1em">QUOTING <br>
You can quote ordinary parameters using either single or
double quotes. For example:</p>

<p style="margin-top: 1em">add &quot;file with a
space.img&quot;</p>

<p style="margin-top: 1em">rm &rsquo;/file name&rsquo;</p>

<p style="margin-top: 1em">rm &rsquo;/&quot;&rsquo;</p>

<p style="margin-top: 1em">A few commands require a list of
strings to be passed. For these, use a whitespace-separated
list, enclosed in quotes. Strings containing whitespace to
be passed through must <br>
be enclosed in single quotes. A literal single quote must be
escaped with a backslash.</p>

<p style="margin-top: 1em">vgcreate VG &quot;/dev/sda1
/dev/sdb1&quot; <br>
command &quot;/bin/echo &rsquo;foo bar&rsquo;&quot; <br>
command &quot;/bin/echo &acute;foo&acute;&quot;</p>

<p style="margin-top: 1em">ESCAPE SEQUENCES IN DOUBLE
QUOTED ARGUMENTS <br>
In double-quoted arguments (only) use backslash to insert
special characters:</p>

<p style="margin-top: 1em">&quot;&quot; <br>
Alert (bell) character.</p>

<p style="margin-top: 1em">&quot; <br>
Backspace character.</p>

<p style="margin-top: 1em">&quot; <br>
Form feed character.</p>

<p style="margin-top: 1em">&quot;0 <br>
Newline character. &quot;</p>

<p style="margin-top: 1em">&quot; <br>
Carriage return character.</p>

<p style="margin-top: 1em">&quot;&quot; <br>
Horizontal tab character.</p>

<p style="margin-top: 1em">&quot; Vertical tab
character.</p>

<p style="margin-top: 1em">&quot; <br>
A literal double quote character.</p>

<p style="margin-top: 1em">&quot;&quot; <br>
A character with octal value ooo. There must be precisely 3
octal digits (unlike C).</p>

<p style="margin-top: 1em">&quot;&quot; <br>
A character with hex value hh. There must be precisely 2 hex
digits.</p>

<p style="margin-top: 1em">In the current implementation
&quot; 00&quot; and &quot;0&quot; cannot be used in
strings.</p>

<p style="margin-top: 1em">&quot;\&quot; <br>
A literal backslash character.</p>

<p style="margin-top: 1em">OPTIONAL ARGUMENTS <br>
Some commands take optional arguments. These arguments
appear in this documentation as &quot;[argname:..]&quot;.
You can use them as in these examples:</p>

<p style="margin-top: 1em">add filename</p>

<p style="margin-top: 1em">add filename readonly:true</p>

<p style="margin-top: 1em">add filename format:qcow2
readonly:false</p>

<p style="margin-top: 1em">Each optional argument can
appear at most once. All optional arguments must appear
after the required ones.</p>

<p style="margin-top: 1em">NUMBERS <br>
This section applies to all commands which can take integers
as parameters.</p>

<p style="margin-top: 1em">SIZE SUFFIX <br>
When the command takes a parameter measured in bytes, you
can use one of the following suffixes to specify kilobytes,
megabytes and larger sizes:</p>

<p style="margin-top: 1em">k or K or KiB <br>
The size in kilobytes (multiplied by 1024).</p>

<p style="margin-top: 1em">KB The size in SI 1000 byte
units.</p>

<p style="margin-top: 1em">M or MiB <br>
The size in megabytes (multiplied by 1048576).</p>

<p style="margin-top: 1em">MB The size in SI 1000000 byte
units.</p>

<p style="margin-top: 1em">G or GiB <br>
The size in gigabytes (multiplied by 2**30).</p>

<p style="margin-top: 1em">GB The size in SI 10**9 byte
units.</p>

<p style="margin-top: 1em">T or TiB <br>
The size in terabytes (multiplied by 2**40).</p>

<p style="margin-top: 1em">TB The size in SI 10**12 byte
units.</p>

<p style="margin-top: 1em">P or PiB <br>
The size in petabytes (multiplied by 2**50).</p>

<p style="margin-top: 1em">PB The size in SI 10**15 byte
units.</p>

<p style="margin-top: 1em">E or EiB <br>
The size in exabytes (multiplied by 2**60).</p>

<p style="margin-top: 1em">EB The size in SI 10**18 byte
units.</p>

<p style="margin-top: 1em">Z or ZiB <br>
The size in zettabytes (multiplied by 2**70).</p>

<p style="margin-top: 1em">ZB The size in SI 10**21 byte
units.</p>

<p style="margin-top: 1em">Y or YiB <br>
The size in yottabytes (multiplied by 2**80).</p>

<p style="margin-top: 1em">YB The size in SI 10**24 byte
units.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">truncate-size /file 1G</p>

<p style="margin-top: 1em">would truncate the file to 1
gigabyte.</p>

<p style="margin-top: 1em">Be careful because a few
commands take sizes in kilobytes or megabytes (eg. the
parameter to &quot;memsize&quot; is specified in megabytes
already). Adding a suffix will probably not do <br>
what you expect.</p>

<p style="margin-top: 1em">OCTAL AND HEXADECIMAL NUMBERS
<br>
For specifying the radix (base) use the C convention: 0 to
prefix an octal number or &quot;0x&quot; to prefix a
hexadecimal number. For example:</p>

<p style="margin-top: 1em">1234 decimal number 1234 <br>
02322 octal number, equivalent to decimal 1234 <br>
0x4d2 hexadecimal number, equivalent to decimal 1234</p>

<p style="margin-top: 1em">When using the &quot;chmod&quot;
command, you almost always want to specify an octal number
for the mode, and you must prefix it with 0 (unlike the Unix
chmod(1) program):</p>

<p style="margin-top: 1em">chmod 0777 /public # OK <br>
chmod 777 /public # WRONG! This is mode 777 decimal = 01411
octal.</p>

<p style="margin-top: 1em">Commands that return numbers
usually print them in decimal, but some commands print
numbers in other radices (eg. &quot;umask&quot; prints the
mode in octal, preceded by 0).</p>

<p style="margin-top: 1em">WILDCARDS AND GLOBBING <br>
Neither guestfish nor the underlying guestfs API performs
wildcard expansion (globbing) by default. So for example the
following will not do what you expect:</p>

<p style="margin-top: 1em">rm-rf /home/*</p>

<p style="margin-top: 1em">Assuming you don&rsquo;t have a
directory called literally /home/* then the above command
will return an error.</p>

<p style="margin-top: 1em">To perform wildcard expansion,
use the &quot;glob&quot; command.</p>

<p style="margin-top: 1em">glob rm-rf /home/*</p>

<p style="margin-top: 1em">runs &quot;rm-rf&quot; on each
path that matches (ie. potentially running the command many
times), equivalent to:</p>

<p style="margin-top: 1em">rm-rf /home/jim <br>
rm-rf /home/joe <br>
rm-rf /home/mary</p>

<p style="margin-top: 1em">&quot;glob&quot; only works on
simple guest paths and not on device names.</p>

<p style="margin-top: 1em">If you have several parameters,
each containing a wildcard, then glob will perform a
Cartesian product.</p>

<p style="margin-top: 1em">COMMENTS <br>
Any line which starts with a # character is treated as a
comment and ignored. The # can optionally be preceded by
whitespace, but not by a command. For example:</p>

<p style="margin-top: 1em"># this is a comment <br>
# this is a comment <br>
foo # NOT a comment</p>

<p style="margin-top: 1em">Blank lines are also
ignored.</p>

<p style="margin-top: 1em">RUNNING COMMANDS LOCALLY <br>
Any line which starts with a ! character is treated as a
command sent to the local shell (/bin/sh or whatever
system(3) uses). For example:</p>

<p style="margin-top: 1em">!mkdir local <br>
tgz-out /remote local/remote-data.tar.gz</p>

<p style="margin-top: 1em">will create a directory
&quot;local&quot; on the host, and then export the contents
of /remote on the mounted filesystem to
local/remote-data.tar.gz. (See &quot;tgz-out&quot;).</p>

<p style="margin-top: 1em">To change the local directory,
use the &quot;lcd&quot; command. &quot;!cd&quot; will have
no effect, due to the way that subprocesses work in
Unix.</p>

<p style="margin-top: 1em">LOCAL COMMANDS WITH INLINE
EXECUTION <br>
If a line starts with &lt;! then the shell command is
executed (as for !), but subsequently any output (stdout) of
the shell command is parsed and executed as guestfish
commands.</p>

<p style="margin-top: 1em">Thus you can use shell script to
construct arbitrary guestfish commands which are then parsed
by guestfish.</p>

<p style="margin-top: 1em">For example it is tedious to
create a sequence of files (eg. /foo.1 through /foo.100)
using guestfish commands alone. However this is simple if we
use a shell script to create <br>
the guestfish commands for us:</p>

<p style="margin-top: 1em">&lt;! for n in &lsquo;seq 1
100&lsquo;; do echo write /foo.$n $n; done</p>

<p style="margin-top: 1em">or with names like /foo.001:</p>

<p style="margin-top: 1em">&lt;! for n in &lsquo;seq 1
100&lsquo;; do printf &quot;write /foo.%03d %d0 $n $n;
done</p>

<p style="margin-top: 1em">When using guestfish
interactively it can be helpful to just run the shell script
first (ie. remove the initial &quot;&lt;&quot; character so
it is just an ordinary ! local command), see what <br>
guestfish commands it would run, and when you are happy with
those prepend the &quot;&lt;&quot; character to run the
guestfish commands for real.</p>

<p style="margin-top: 1em">PIPES <br>
Use &quot;command &lt;space&gt; | command&quot; to pipe the
output of the first command (a guestfish command) to the
second command (any host command). For example:</p>

<p style="margin-top: 1em">cat /etc/passwd | awk -F:
&rsquo;$3 == 0 { print }&rsquo;</p>

<p style="margin-top: 1em">(where &quot;cat&quot; is the
guestfish cat command, but &quot;awk&quot; is the host awk
program). The above command would list all accounts in the
guest filesystem which have UID 0, ie. root <br>
accounts including backdoors. Other examples:</p>

<p style="margin-top: 1em">hexdump /bin/ls | head <br>
list-devices | tail -1 <br>
tgz-out / - | tar ztf -</p>

<p style="margin-top: 1em">The space before the pipe symbol
is required, any space after the pipe symbol is optional.
Everything after the pipe symbol is just passed straight to
the host shell, so it can <br>
contain redirections, globs and anything else that makes
sense on the host side.</p>

<p style="margin-top: 1em">To use a literal argument which
begins with a pipe symbol, you have to quote it, eg:</p>

<p style="margin-top: 1em">echo &quot;|&quot;</p>

<p style="margin-top: 1em">HOME DIRECTORIES <br>
If a parameter starts with the character &quot;~&quot; then
the tilde may be expanded as a home directory path (either
&quot;~&quot; for the current user&rsquo;s home directory,
or &quot;~user&quot; for another <br>
user).</p>

<p style="margin-top: 1em">Note that home directory
expansion happens for users known on the host, not in the
guest filesystem.</p>

<p style="margin-top: 1em">To use a literal argument which
begins with a tilde, you have to quote it, eg:</p>

<p style="margin-top: 1em">echo &quot;~&quot;</p>

<p style="margin-top: 1em">ENCRYPTED DISKS <br>
Libguestfs has some support for Linux guests encrypted
according to the Linux Unified Key Setup (LUKS) standard,
which includes nearly all whole disk encryption systems used
by <br>
modern Linux guests. Currently only LVM-on-LUKS is
supported.</p>

<p style="margin-top: 1em">Identify encrypted block devices
and partitions using &quot;vfs-type&quot;:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; vfs-type
/dev/sda2 <br>
crypto_LUKS</p>

<p style="margin-top: 1em">Then open those devices using
&quot;luks-open&quot;. This creates a device-mapper device
called /dev/mapper/luksdev.</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; luks-open
/dev/sda2 luksdev <br>
Enter key or passphrase (&quot;key&quot;): &lt;enter the
passphrase&gt;</p>

<p style="margin-top: 1em">Finally you have to tell LVM to
scan for volume groups on the newly created mapper
device:</p>

<p style="margin-top: 1em">vgscan <br>
vg-activate-all true</p>

<p style="margin-top: 1em">The logical volume(s) can now be
mounted in the usual way.</p>

<p style="margin-top: 1em">Before closing a LUKS device you
must unmount any logical volumes on it and deactivate the
volume groups by calling &quot;vg-activate false VG&quot; on
each one. Then you can close the <br>
mapper device:</p>

<p style="margin-top: 1em">vg-activate false /dev/VG <br>
luks-close /dev/mapper/luksdev</p>

<p style="margin-top: 1em">WINDOWS PATHS <br>
If a path is prefixed with &quot;win:&quot; then you can use
Windows-style drive letters and paths (with some
limitations). The following commands are equivalent:</p>

<p style="margin-top: 1em">file
/WINDOWS/system32/config/system.LOG</p>

<p style="margin-top: 1em">file win:312gtem.log</p>

<p style="margin-top: 1em">file WIN:C:WindowsTEM32G</p>

<p style="margin-top: 1em">The parameter is rewritten
&quot;behind the scenes&quot; by looking up the position
where the drive is mounted, prepending that to the path,
changing all backslash characters to forward <br>
slash, then resolving the result using
&quot;case-sensitive-path&quot;. For example if the E: drive
was mounted on /e then the parameter might be rewritten like
this: r = &gt; / e</p>

<p style="margin-top: 1em">win:e:o/r F O O / b</p>

<p style="margin-top: 1em">This only works in argument
positions that expect a path.</p>

<p style="margin-top: 1em">UPLOADING AND DOWNLOADING FILES
<br>
For commands such as &quot;upload&quot;,
&quot;download&quot;, &quot;tar-in&quot;,
&quot;tar-out&quot; and others which upload from or download
to a local file, you can use the special filename
&quot;-&quot; to mean &quot;from stdin&quot; <br>
or &quot;to stdout&quot;. For example:</p>

<p style="margin-top: 1em">upload - /foo</p>

<p style="margin-top: 1em">reads stdin and creates from
that a file /foo in the disk image, and:</p>

<p style="margin-top: 1em">tar-out /etc - | tar tf -</p>

<p style="margin-top: 1em">writes the tarball to stdout and
then pipes that into the external &quot;tar&quot; command
(see &quot;PIPES&quot;).</p>

<p style="margin-top: 1em">When using &quot;-&quot; to read
from stdin, the input is read up to the end of stdin. You
can also use a special &quot;heredoc&quot;-like syntax to
read up to some arbitrary end marker:</p>

<p style="margin-top: 1em">upload -&lt;&lt;END /foo <br>
input line 1 <br>
input line 2 <br>
input line 3 <br>
END</p>

<p style="margin-top: 1em">Any string of characters can be
used instead of &quot;END&quot;. The end marker must appear
on a line of its own, without any preceding or following
characters (not even spaces).</p>

<p style="margin-top: 1em">Note that the
&quot;-&lt;&lt;&quot; syntax only applies to parameters used
to upload local files (so-called &quot;FileIn&quot;
parameters in the generator).</p>

<p style="margin-top: 1em">EXIT ON ERROR BEHAVIOUR <br>
By default, guestfish will ignore any errors when in
interactive mode (ie. taking commands from a human over a
tty), and will exit on the first error in non-interactive
mode <br>
(scripts, commands given on the command line).</p>

<p style="margin-top: 1em">If you prefix a command with a -
character, then that command will not cause guestfish to
exit, even if that (one) command returns an error.</p>

<p style="margin-top: 1em">REMOTE CONTROL GUESTFISH OVER A
SOCKET <br>
Guestfish can be remote-controlled over a socket. This is
useful particularly in shell scripts where you want to make
several different changes to a filesystem, but you
don&rsquo;t <br>
want the overhead of starting up a guestfish process each
time.</p>

<p style="margin-top: 1em">Start a guestfish server process
using:</p>

<p style="margin-top: 1em">eval &quot;&lsquo;guestfish
--listen&lsquo;&quot;</p>

<p style="margin-top: 1em">and then send it commands by
doing:</p>

<p style="margin-top: 1em">guestfish --remote cmd [...]</p>

<p style="margin-top: 1em">To cause the server to exit,
send it the exit command:</p>

<p style="margin-top: 1em">guestfish --remote exit</p>

<p style="margin-top: 1em">Note that the server will
normally exit if there is an error in a command. You can
change this in the usual way. See section &quot;EXIT ON
ERROR BEHAVIOUR&quot;.</p>

<p style="margin-top: 1em">CONTROLLING MULTIPLE GUESTFISH
PROCESSES <br>
The &quot;eval&quot; statement sets the environment variable
$GUESTFISH_PID, which is how the --remote option knows where
to send the commands. You can have several guestfish
listener <br>
processes running using:</p>

<p style="margin-top: 1em">eval &quot;&lsquo;guestfish
--listen&lsquo;&quot; <br>
pid1=$GUESTFISH_PID <br>
eval &quot;&lsquo;guestfish --listen&lsquo;&quot; <br>
pid2=$GUESTFISH_PID <br>
... <br>
guestfish --remote=$pid1 cmd <br>
guestfish --remote=$pid2 cmd</p>

<p style="margin-top: 1em">REMOTE CONTROL AND CSH <br>
When using csh-like shells (csh, tcsh etc) you have to add
the --csh option:</p>

<p style="margin-top: 1em">eval &quot;&lsquo;guestfish
--listen --csh&lsquo;&quot;</p>

<p style="margin-top: 1em">REMOTE CONTROL DETAILS <br>
Remote control happens over a Unix domain socket called
/tmp/.guestfish-$UID/socket-$PID, where $UID is the
effective user ID of the process, and $PID is the process ID
of the <br>
server.</p>

<p style="margin-top: 1em">Guestfish client and server
versions must match exactly.</p>

<p style="margin-top: 1em">Older versions of guestfish were
vulnerable to CVE-2013-4419 (see &quot;CVE-2013-4419&quot;
in guestfs(3)). This is fixed in the current version.</p>

<p style="margin-top: 1em">USING REMOTE CONTROL ROBUSTLY
FROM SHELL SCRIPTS <br>
From Bash, you can use the following code which creates a
guestfish instance, correctly quotes the command line,
handles failure to start, and cleans up guestfish when the
script <br>
exits:</p>

<p style="margin-top: 1em">#!/bin/bash -</p>

<p style="margin-top: 1em">set -e</p>


<p style="margin-top: 1em">guestfish[0]=&quot;guestfish&quot;
<br>
guestfish[1]=&quot;--listen&quot; <br>
guestfish[2]=&quot;--ro&quot; <br>
guestfish[3]=&quot;-a&quot; <br>
guestfish[4]=&quot;disk.img&quot;</p>

<p style="margin-top: 1em">GUESTFISH_PID= <br>
eval $(&quot;${guestfish[@]}&quot;) <br>
if [ -z &quot;$GUESTFISH_PID&quot; ]; then <br>
echo &quot;error: guestfish didn&rsquo;t start up, see error
messages above&quot; <br>
exit 1 <br>
fi</p>

<p style="margin-top: 1em">cleanup_guestfish () <br>
{ <br>
guestfish --remote -- exit &gt;/dev/null 2&gt;&amp;1 ||:
<br>
} <br>
trap cleanup_guestfish EXIT ERR</p>

<p style="margin-top: 1em">guestfish --remote -- run</p>

<p style="margin-top: 1em"># ...</p>

<p style="margin-top: 1em">REMOTE CONTROL DOES NOT WORK
WITH -a ETC. OPTIONS <br>
Options such as -a, --add, -N, --new etc don&rsquo;t
interact properly with remote support. They are processed
locally, and not sent through to the remote guestfish. In
particular <br>
this won&rsquo;t do what you expect:</p>

<p style="margin-top: 1em">guestfish --remote --add
disk.img</p>

<p style="margin-top: 1em">Don&rsquo;t use these options.
Use the equivalent commands instead, eg:</p>

<p style="margin-top: 1em">guestfish --remote add-drive
disk.img</p>

<p style="margin-top: 1em">or:</p>

<p style="margin-top: 1em">guestfish --remote <br>
&gt;&lt;fs&gt; add disk.img</p>

<p style="margin-top: 1em">REMOTE CONTROL RUN COMMAND
HANGING <br>
Using the &quot;run&quot; (or &quot;launch&quot;) command
remotely in a command substitution context hangs, ie.
don&rsquo;t do (note the backquotes):</p>

<p style="margin-top: 1em">a=&lsquo;guestfish --remote
run&lsquo;</p>

<p style="margin-top: 1em">Since the &quot;run&quot;
command produces no output on stdout, this is not useful
anyway. For further information see
https://bugzilla.redhat.com/show_bug.cgi?id=592910.</p>

<p style="margin-top: 1em">PREPARED DISK IMAGES <br>
Use the -N [filename=]type or --new [filename=]type
parameter to select one of a set of preformatted disk images
that guestfish can make for you to save typing. This is <br>
particularly useful for testing purposes. This option is
used instead of the -a option, and like -a can appear
multiple times (and can be mixed with -a).</p>

<p style="margin-top: 1em">The new disk is called test1.img
for the first -N, test2.img for the second and so on.
Existing files in the current directory are overwritten. You
can use a different filename <br>
by specifying &quot;filename=&quot; before the type (see
examples below).</p>

<p style="margin-top: 1em">The type briefly describes how
the disk should be sized, partitioned, how filesystem(s)
should be created, and how content should be added.
Optionally the type can be followed <br>
by extra parameters, separated by &quot;:&quot; (colon)
characters. For example, -N fs creates a default 100MB,
sparsely-allocated disk, containing a single partition, with
the partition <br>
formatted as ext2. -N fs:ext4:1G is the same, but for an
ext4 filesystem on a 1GB disk instead.</p>

<p style="margin-top: 1em">Note that the prepared
filesystem is not mounted. You would usually have to use the
&quot;mount /dev/sda1 /&quot; command or add the -m
/dev/sda1 option.</p>

<p style="margin-top: 1em">If any -N or --new options are
given, the libguestfs appliance is automatically
launched.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Create a 100MB disk with an ext4-formatted partition, called
test1.img in the current directory:</p>

<p style="margin-top: 1em">guestfish -N fs:ext4</p>

<p style="margin-top: 1em">Create a 32MB disk with a
VFAT-formatted partition, and mount it:</p>

<p style="margin-top: 1em">guestfish -N fs:vfat:32M -m
/dev/sda1</p>

<p style="margin-top: 1em">Create a blank 200MB disk:</p>

<p style="margin-top: 1em">guestfish -N disk:200M</p>

<p style="margin-top: 1em">Create a blank 200MB disk called
blankdisk.img (instead of test1.img):</p>

<p style="margin-top: 1em">guestfish -N
blankdisk.img=disk:200M</p>

<p style="margin-top: 1em">-N disk - create a blank disk
<br>
&quot;guestfish -N [filename=]disk[:size]&quot;</p>

<p style="margin-top: 1em">Create a blank disk, size 100MB
(by default).</p>

<p style="margin-top: 1em">The default size can be changed
by supplying an optional parameter.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
size 100M the size of the disk image</p>

<p style="margin-top: 1em">-N part - create a partitioned
disk <br>
&quot;guestfish -N
[filename=]part[:size[:partition]]&quot;</p>

<p style="margin-top: 1em">Create a disk with a single
partition. By default the size of the disk is 100MB (the
available space in the partition will be a tiny bit smaller)
and the partition table will be <br>
MBR (old DOS-style).</p>

<p style="margin-top: 1em">These defaults can be changed by
supplying optional parameters.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
size 100M the size of the disk image <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">-N fs - create a filesystem <br>
&quot;guestfish -N
[filename=]fs[:filesystem[:size[:partition]]]&quot;</p>

<p style="margin-top: 1em">Create a disk with a single
partition, with the partition containing an empty
filesystem. This defaults to creating a 100MB disk (the
available space in the filesystem will be a <br>
tiny bit smaller) with an MBR (old DOS-style) partition
table and an ext2 filesystem.</p>

<p style="margin-top: 1em">These defaults can be changed by
supplying optional parameters.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
filesystem ext2 the type of filesystem to use <br>
size 100M the size of the disk image <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">-N lv - create a disk with
logical volume <br>
&quot;guestfish -N
[filename=]lv[:name[:size[:partition]]]&quot;</p>

<p style="margin-top: 1em">Create a disk with a single
partition, set up the partition as an LVM2 physical volume,
and place a volume group and logical volume on there. This
defaults to creating a 100MB <br>
disk with the VG and LV called &quot;/dev/VG/LV&quot;. You
can change the name of the VG and LV by supplying an
alternate name as the first optional parameter.</p>

<p style="margin-top: 1em">Note this does not create a
filesystem. Use &rsquo;lvfs&rsquo; to do that.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
name /dev/VG/LV the name of the VG and LV to use <br>
size 100M the size of the disk image <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">-N lvfs - create a disk with
logical volume and filesystem <br>
&quot;guestfish -N
[filename=]lvfs[:name[:filesystem[:size[:partition]]]]&quot;</p>

<p style="margin-top: 1em">Create a disk with a single
partition, set up the partition as an LVM2 physical volume,
and place a volume group and logical volume on there. Then
format the LV with a <br>
filesystem. This defaults to creating a 100MB disk with the
VG and LV called &quot;/dev/VG/LV&quot;, with an ext2
filesystem.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
name /dev/VG/LV the name of the VG and LV to use <br>
filesystem ext2 the type of filesystem to use <br>
size 100M the size of the disk image <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">-N bootroot - create a boot and
root filesystem <br>
&quot;guestfish -N
[filename=]bootroot[:bootfs[:rootfs[:size[:bootsize[:partition]]]]]&quot;</p>

<p style="margin-top: 1em">Create a disk with two
partitions, for boot and root filesystem. Format the two
filesystems independently. There are several optional
parameters which control the exact layout <br>
and filesystem types.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
bootfs ext2 the type of filesystem to use for boot <br>
rootfs ext2 the type of filesystem to use for root <br>
size 100M the size of the disk image <br>
bootsize 32M the size of the boot filesystem <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">-N bootrootlv - create a boot
and root filesystem using LVM <br>
&quot;guestfish -N
[filename=]bootrootlv[:name[:bootfs[:rootfs[:size[:bootsize[:partition]]]]]]&quot;</p>

<p style="margin-top: 1em">This is the same as
&quot;bootroot&quot; but the root filesystem (only) is
placed on a logical volume, named by default
&quot;/dev/VG/LV&quot;. There are several optional
parameters which control <br>
the exact layout.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">Name Default value <br>
name /dev/VG/LV the name of the VG and LV for root <br>
bootfs ext2 the type of filesystem to use for boot <br>
rootfs ext2 the type of filesystem to use for root <br>
size 100M the size of the disk image <br>
bootsize 32M the size of the boot filesystem <br>
partition mbr partition table type</p>

<p style="margin-top: 1em">ADDING REMOTE STORAGE <br>
For API-level documentation on this topic, see
&quot;guestfs_add_drive_opts&quot; in guestfs(3) and
&quot;REMOTE STORAGE&quot; in guestfs(3).</p>

<p style="margin-top: 1em">On the command line, you can use
the -a option to add network block devices using a URI-style
format, for example:</p>

<p style="margin-top: 1em">guestfish -a
nbd://example.com</p>

<p style="margin-top: 1em">URIs cannot be used with the
&quot;add&quot; command. The equivalent command using the
API directly is:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; add /disk.img
protocol:nbd server:tcp:example.com</p>

<p style="margin-top: 1em">The possible -a URI formats are
described below.</p>

<p style="margin-top: 1em">-a disk.img <br>
-a file:///path/to/disk.img <br>
Add the local disk image (or device) called disk.img.</p>

<p style="margin-top: 1em">-a nbd://example.com[:port] <br>
-a nbd://example.com[:port]/exportname <br>
-a nbd://?socket=/socket <br>
-a nbd:///exportname?socket=/socket <br>
Add a disk located on Network Block Device (nbd)
storage.</p>

<p style="margin-top: 1em">The /exportname part of the URI
specifies an NBD export name, but is usually left empty.</p>

<p style="margin-top: 1em">The optional ?socket parameter
can be used to specify a Unix domain socket that we talk to
the NBD server over. Note that you cannot mix server name
(ie. TCP/IP) and socket <br>
path.</p>

<p style="margin-top: 1em">The equivalent API command would
be (no export name):</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; add &quot;&quot;
protocol:nbd server:[tcp:example.com|unix:/socket]</p>

<p style="margin-top: 1em">-a rbd:///pool/disk <br>
-a rbd://example.com[:port]/pool/disk <br>
Add a disk image located on a Ceph (RBD/librbd) storage
volume.</p>

<p style="margin-top: 1em">Although libguestfs and Ceph
supports multiple servers, only a single server can be
specified when using this URI syntax.</p>

<p style="margin-top: 1em">The equivalent API command would
be:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; add pool/disk
protocol:rbd server:tcp:example.com:port</p>

<p style="margin-top: 1em">PROGRESS BARS <br>
Some (not all) long-running commands send progress
notification messages as they are running. Guestfish turns
these messages into progress bars.</p>

<p style="margin-top: 1em">When a command that supports
progress bars takes longer than two seconds to run, and if
progress bars are enabled, then you will see one appearing
below the command:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; copy-size
/large-file /another-file 2048M <br>
/ 10% [#####-----------------------------------------]
00:30</p>

<p style="margin-top: 1em">The spinner on the left hand
side moves round once for every progress notification
received from the backend. This is a (reasonably) golden
assurance that the command is &quot;doing <br>
something&quot; even if the progress bar is not moving,
because the command is able to send the progress
notifications. When the bar reaches 100% and the command
finishes, the <br>
spinner disappears.</p>

<p style="margin-top: 1em">Progress bars are enabled by
default when guestfish is used interactively. You can enable
them even for non-interactive modes using --progress-bars,
and you can disable them <br>
completely using --no-progress-bars.</p>

<p style="margin-top: 1em">PROMPT <br>
You can change or add colours to the default prompt
(&quot;&gt;&lt;fs&gt;&quot;) by setting the
&quot;GUESTFISH_PS1&quot; environment variable. A second
string (&quot;GUESTFISH_OUTPUT&quot;) is printed after the
<br>
command has been entered and before the output, allowing you
to control the colour of the output. A third string
(&quot;GUESTFISH_INIT&quot;) is printed before the welcome
message, <br>
allowing you to control the colour of that message. A fourth
string (&quot;GUESTFISH_RESTORE&quot;) is printed before
guestfish exits.</p>

<p style="margin-top: 1em">A simple prompt can be set by
setting &quot;GUESTFISH_PS1&quot; to an alternate
string:</p>

<p style="margin-top: 1em">$ GUESTFISH_PS1=&rsquo;(type a
command) &rsquo; <br>
$ export GUESTFISH_PS1 <br>
$ guestfish <br>
[...] <br>
(type a command) &acirc;</p>

<p style="margin-top: 1em">You can also use special escape
sequences, as described in the table below:</p>

<p style="margin-top: 1em">\ A literal backslash
character.</p>

<p style="margin-top: 1em">] (These should only be used in
&quot;GUESTFISH_PS1&quot;.)</p>

<p style="margin-top: 1em">Place non-printing characters
(eg. terminal control codes for colours) between
&quot;&quot;. What this does it to tell the readline(3)
library that it should treat this <br>
subsequence as zero-width, so that command-line redisplay,
editing etc works.</p>

<p style="margin-top: 1em">A bell character.</p>

<p style="margin-top: 1em">\ An ASCII ESC (escape)
character.</p>

<p style="margin-top: 1em">A newline.</p>

<p style="margin-top: 1em">A carriage return.</p>

<p style="margin-top: 1em">The ASCII character whose code
is the octal value NNN.</p>

<p style="margin-top: 1em">The ASCII character whose code
is the hex value NN.</p>

<p style="margin-top: 1em">EXAMPLES OF PROMPTS <br>
Note these these require a terminal that supports ANSI
escape codes.</p>

<p style="margin-top: 1em">&Acirc;&middot;</p>


<p style="margin-top: 1em">GUESTFISH_PS1=&rsquo;[1;30m]&gt;&lt;fs&gt;[0;30m]
&rsquo;</p>

<p style="margin-top: 1em">A bold black version of the
ordinary prompt.</p>

<p style="margin-top: 1em">&Acirc;&middot;</p>


<p style="margin-top: 1em">GUESTFISH_PS1=&rsquo;[1;32m]&gt;&lt;fs&gt;[0;31m]
&rsquo; <br>
GUESTFISH_OUTPUT=&rsquo;\[0m&rsquo; <br>
GUESTFISH_RESTORE=&quot;$GUESTFISH_OUTPUT&quot; <br>
GUESTFISH_INIT=&rsquo;\[1;34m&rsquo;</p>

<p style="margin-top: 1em">Blue welcome text, green prompt,
red commands, black command output.</p>

<p style="margin-top: 1em">WINDOWS 8 <br>
Windows 8 &quot;fast startup&quot; can prevent guestfish
from mounting NTFS partitions. See &quot;WINDOWS HIBERNATION
AND WINDOWS 8 FAST STARTUP&quot; in guestfs(3).</p>

<p style="margin-top: 1em">GUESTFISH COMMANDS <br>
The commands in this section are guestfish convenience
commands, in other words, they are not part of the
guestfs(3) API.</p>

<p style="margin-top: 1em">help <br>
help <br>
help cmd</p>

<p style="margin-top: 1em">Without any parameter, this
provides general help.</p>

<p style="margin-top: 1em">With a &quot;cmd&quot;
parameter, this displays detailed help for that command.</p>

<p style="margin-top: 1em">exit <br>
quit <br>
This exits guestfish. You can also use &quot;^D&quot;
key.</p>

<p style="margin-top: 1em">alloc <br>
allocate <br>
alloc filename size</p>

<p style="margin-top: 1em">This creates an empty (zeroed)
file of the given size, and then adds so it can be further
examined.</p>

<p style="margin-top: 1em">For more advanced image
creation, see &quot;disk-create&quot;.</p>

<p style="margin-top: 1em">Size can be specified using
standard suffixes, eg. &quot;1M&quot;.</p>

<p style="margin-top: 1em">To create a sparse file, use
&quot;sparse&quot; instead. To create a prepared disk image,
see &quot;PREPARED DISK IMAGES&quot;.</p>

<p style="margin-top: 1em">copy-in <br>
copy-in local [local ...] /remotedir</p>

<p style="margin-top: 1em">&quot;copy-in&quot; copies local
files or directories recursively into the disk image,
placing them in the directory called /remotedir (which must
exist). This guestfish meta-command <br>
turns into a sequence of &quot;tar-in&quot; and other
commands as necessary.</p>

<p style="margin-top: 1em">Multiple local files and
directories can be specified, but the last parameter must
always be a remote directory. Wildcards cannot be used.</p>

<p style="margin-top: 1em">copy-out <br>
copy-out remote [remote ...] localdir</p>

<p style="margin-top: 1em">&quot;copy-out&quot; copies
remote files or directories recursively out of the disk
image, placing them on the host disk in a local directory
called &quot;localdir&quot; (which must exist). This <br>
guestfish meta-command turns into a sequence of
&quot;download&quot;, &quot;tar-out&quot; and other commands
as necessary.</p>

<p style="margin-top: 1em">Multiple remote files and
directories can be specified, but the last parameter must
always be a local directory. To download to the current
directory, use &quot;.&quot; as in:</p>

<p style="margin-top: 1em">copy-out /home .</p>

<p style="margin-top: 1em">Wildcards cannot be used in the
ordinary command, but you can use them with the help of
&quot;glob&quot; like this:</p>

<p style="margin-top: 1em">glob copy-out /home/* .</p>

<p style="margin-top: 1em">delete-event <br>
delete-event name</p>

<p style="margin-top: 1em">Delete the event handler which
was previously registered as &quot;name&quot;. If multiple
event handlers were registered with the same name, they are
all deleted.</p>

<p style="margin-top: 1em">See also the guestfish commands
&quot;event&quot; and &quot;list-events&quot;.</p>

<p style="margin-top: 1em">display <br>
display filename</p>

<p style="margin-top: 1em">Use &quot;display&quot; (a
graphical display program) to display an image file. It
downloads the file, and runs &quot;display&quot; on it.</p>

<p style="margin-top: 1em">To use an alternative program,
set the &quot;GUESTFISH_DISPLAY_IMAGE&quot; environment
variable. For example to use the GNOME display program:</p>

<p style="margin-top: 1em">export
GUESTFISH_DISPLAY_IMAGE=eog</p>

<p style="margin-top: 1em">See also display(1).</p>

<p style="margin-top: 1em">echo <br>
echo [params ...]</p>

<p style="margin-top: 1em">This echos the parameters to the
terminal.</p>

<p style="margin-top: 1em">edit <br>
vi <br>
emacs <br>
edit filename</p>

<p style="margin-top: 1em">This is used to edit a file. It
downloads the file, edits it locally using your editor, then
uploads the result.</p>

<p style="margin-top: 1em">The editor is $EDITOR. However
if you use the alternate commands &quot;vi&quot; or
&quot;emacs&quot; you will get those corresponding
editors.</p>

<p style="margin-top: 1em">event <br>
event name eventset &quot;shell script ...&quot;</p>

<p style="margin-top: 1em">Register a shell script fragment
which is executed when an event is raised. See
&quot;guestfs_set_event_callback&quot; in guestfs(3) for a
discussion of the event API in libguestfs.</p>

<p style="margin-top: 1em">The &quot;name&quot; parameter
is a name that you give to this event handler. It can be any
string (even the empty string) and is simply there so you
can delete the handler using the <br>
guestfish &quot;delete-event&quot; command.</p>

<p style="margin-top: 1em">The &quot;eventset&quot;
parameter is a comma-separated list of one or more events,
for example &quot;close&quot; or &quot;close,trace&quot;.
The special value &quot;*&quot; means all events.</p>

<p style="margin-top: 1em">The third and final parameter is
the shell script fragment (or any external command) that is
executed when any of the events in the eventset occurs. It
is executed using &quot;$SHELL <br>
-c&quot;, or if $SHELL is not set then /bin/sh -c.</p>

<p style="margin-top: 1em">The shell script fragment
receives callback parameters as arguments $1, $2 etc. The
actual event that was called is available in the environment
variable $EVENT.</p>

<p style="margin-top: 1em">event &quot;&quot; close
&quot;echo closed&quot; <br>
event messages appliance,library,trace &quot;echo $@&quot;
<br>
event &quot;&quot; progress &quot;echo progress: $3/$4&quot;
<br>
event &quot;&quot; * &quot;echo $EVENT $@&quot;</p>

<p style="margin-top: 1em">See also the guestfish commands
&quot;delete-event&quot; and &quot;list-events&quot;.</p>

<p style="margin-top: 1em">glob <br>
glob command args...</p>

<p style="margin-top: 1em">Expand wildcards in any paths in
the args list, and run &quot;command&quot; repeatedly on
each matching path.</p>

<p style="margin-top: 1em">See &quot;WILDCARDS AND
GLOBBING&quot;.</p>

<p style="margin-top: 1em">hexedit <br>
hexedit &lt;filename|device&gt; <br>
hexedit &lt;filename|device&gt; &lt;max&gt; <br>
hexedit &lt;filename|device&gt; &lt;start&gt;
&lt;max&gt;</p>

<p style="margin-top: 1em">Use hexedit (a hex editor) to
edit all or part of a binary file or block device.</p>

<p style="margin-top: 1em">This command works by
downloading potentially the whole file or device, editing it
locally, then uploading it. If the file or device is large,
you have to specify which part you <br>
wish to edit by using &quot;max&quot; and/or
&quot;start&quot; &quot;max&quot; parameters.
&quot;start&quot; and &quot;max&quot; are specified in
bytes, with the usual modifiers allowed such as
&quot;1M&quot; (1 megabyte).</p>

<p style="margin-top: 1em">For example to edit the first
few sectors of a disk you might do:</p>

<p style="margin-top: 1em">hexedit /dev/sda 1M</p>

<p style="margin-top: 1em">which would allow you to edit
anywhere within the first megabyte of the disk.</p>

<p style="margin-top: 1em">To edit the superblock of an
ext2 filesystem on /dev/sda1, do:</p>

<p style="margin-top: 1em">hexedit /dev/sda1 0x400
0x400</p>

<p style="margin-top: 1em">(assuming the superblock is in
the standard location).</p>

<p style="margin-top: 1em">This command requires the
external hexedit(1) program. You can specify another program
to use by setting the &quot;HEXEDITOR&quot; environment
variable.</p>

<p style="margin-top: 1em">See also
&quot;hexdump&quot;.</p>

<p style="margin-top: 1em">lcd <br>
lcd directory</p>

<p style="margin-top: 1em">Change the local directory, ie.
the current directory of guestfish itself.</p>

<p style="margin-top: 1em">Note that &quot;!cd&quot;
won&rsquo;t do what you might expect.</p>

<p style="margin-top: 1em">list-events <br>
list-events</p>

<p style="margin-top: 1em">List the event handlers
registered using the guestfish &quot;event&quot;
command.</p>

<p style="margin-top: 1em">man <br>
manual <br>
man</p>

<p style="margin-top: 1em">Opens the manual page for
guestfish.</p>

<p style="margin-top: 1em">more <br>
less <br>
more filename</p>

<p style="margin-top: 1em">less filename</p>

<p style="margin-top: 1em">This is used to view a file.</p>

<p style="margin-top: 1em">The default viewer is $PAGER.
However if you use the alternate command &quot;less&quot;
you will get the &quot;less&quot; command specifically.</p>

<p style="margin-top: 1em">reopen <br>
reopen</p>

<p style="margin-top: 1em">Close and reopen the libguestfs
handle. It is not necessary to use this normally, because
the handle is closed properly when guestfish exits. However
this is occasionally <br>
useful for testing.</p>

<p style="margin-top: 1em">setenv <br>
setenv VAR value</p>

<p style="margin-top: 1em">Set the environment variable
&quot;VAR&quot; to the string &quot;value&quot;.</p>

<p style="margin-top: 1em">To print the value of an
environment variable use a shell command such as:</p>

<p style="margin-top: 1em">!echo $VAR</p>

<p style="margin-top: 1em">sparse <br>
sparse filename size</p>

<p style="margin-top: 1em">This creates an empty sparse
file of the given size, and then adds so it can be further
examined.</p>

<p style="margin-top: 1em">In all respects it works the
same as the &quot;alloc&quot; command, except that the image
file is allocated sparsely, which means that disk blocks are
not assigned to the file until they <br>
are needed. Sparse disk files only use space when written
to, but they are slower and there is a danger you could run
out of real disk space during a write operation.</p>

<p style="margin-top: 1em">For more advanced image
creation, see &quot;disk-create&quot;.</p>

<p style="margin-top: 1em">Size can be specified using
standard suffixes, eg. &quot;1M&quot;.</p>

<p style="margin-top: 1em">See also the guestfish
&quot;scratch&quot; command.</p>

<p style="margin-top: 1em">supported <br>
supported</p>

<p style="margin-top: 1em">This command returns a list of
the optional groups known to the daemon, and indicates which
ones are supported by this build of the libguestfs
appliance.</p>

<p style="margin-top: 1em">See also
&quot;AVAILABILITY&quot; in guestfs(3).</p>

<p style="margin-top: 1em">time <br>
time command args...</p>

<p style="margin-top: 1em">Run the command as usual, but
print the elapsed time afterwards. This can be useful for
benchmarking operations.</p>

<p style="margin-top: 1em">unsetenv <br>
unsetenv VAR</p>

<p style="margin-top: 1em">Remove &quot;VAR&quot; from the
environment.</p>

<p style="margin-top: 1em">COMMANDS <br>
acl-delete-def-file <br>
acl-delete-def-file dir</p>

<p style="margin-top: 1em">This function deletes the
default POSIX Access Control List (ACL) attached to
directory &quot;dir&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;acl&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">acl-get-file <br>
acl-get-file path acltype</p>

<p style="margin-top: 1em">This function returns the POSIX
Access Control List (ACL) attached to &quot;path&quot;. The
ACL is returned in &quot;long text form&quot; (see
acl(5)).</p>

<p style="margin-top: 1em">The &quot;acltype&quot;
parameter may be:</p>

<p style="margin-top: 1em">&quot;access&quot; <br>
Return the ordinary (access) ACL for any file, directory or
other filesystem object.</p>

<p style="margin-top: 1em">&quot;default&quot; <br>
Return the default ACL. Normally this only makes sense if
&quot;path&quot; is a directory.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;acl&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">acl-set-file <br>
acl-set-file path acltype acl</p>

<p style="margin-top: 1em">This function sets the POSIX
Access Control List (ACL) attached to &quot;path&quot;.</p>

<p style="margin-top: 1em">The &quot;acltype&quot;
parameter may be:</p>

<p style="margin-top: 1em">&quot;access&quot; <br>
Set the ordinary (access) ACL for any file, directory or
other filesystem object.</p>

<p style="margin-top: 1em">&quot;default&quot; <br>
Set the default ACL. Normally this only makes sense if
&quot;path&quot; is a directory.</p>

<p style="margin-top: 1em">The &quot;acl&quot; parameter is
the new ACL in either &quot;long text form&quot; or
&quot;short text form&quot; (see acl(5)). The new ACL
completely replaces any previous ACL on the file. The ACL
must <br>
contain the full Unix permissions (eg.
&quot;u::rwx,g::rx,o::rx&quot;).</p>

<p style="margin-top: 1em">If you are specifying individual
users or groups, then the mask field is also required (eg.
&quot;m::rwx&quot;), followed by the &quot;u:ID:...&quot;
and/or &quot;g:ID:...&quot; field(s). A full ACL string <br>
might therefore look like this:</p>


<p style="margin-top: 1em">u::rwx,g::rwx,o::rwx,m::rwx,u:500:rwx,g:500:rwx
&nbsp; <br>
Unix permissions / sk/ &nbsp; ACL /</p>

<p style="margin-top: 1em">You should use numeric UIDs and
GIDs. To map usernames and groupnames to the correct numeric
ID in the context of the guest, use the Augeas functions
(see &quot;aug-init&quot;).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;acl&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">add-cdrom <br>
add-cdrom filename</p>

<p style="margin-top: 1em">This function adds a virtual
CD-ROM disk image to the guest.</p>

<p style="margin-top: 1em">The image is added as read-only
drive, so this function is equivalent of
&quot;add-drive-ro&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;add-drive-ro&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">add-domain <br>
domain <br>
add-domain dom [libvirturi:..] [readonly:true|false]
[iface:..] [live:true|false] [allowuuid:true|false]
[readonlydisk:..] [cachemode:..] [discard:..]
[copyonread:true|false]</p>

<p style="margin-top: 1em">This function adds the disk(s)
attached to the named libvirt domain &quot;dom&quot;. It
works by connecting to libvirt, requesting the domain and
domain XML from libvirt, parsing it for <br>
disks, and calling &quot;add-drive-opts&quot; on each
one.</p>

<p style="margin-top: 1em">The number of disks added is
returned. This operation is atomic: if an error is returned,
then no disks are added.</p>

<p style="margin-top: 1em">This function does some minimal
checks to make sure the libvirt domain is not running
(unless &quot;readonly&quot; is true). In a future version
we will try to acquire the libvirt lock on <br>
each disk.</p>

<p style="margin-top: 1em">Disks must be accessible
locally. This often means that adding disks from a remote
libvirt connection (see http://libvirt.org/remote.html) will
fail unless those disks are <br>
accessible via the same device path locally too.</p>

<p style="margin-top: 1em">The optional
&quot;libvirturi&quot; parameter sets the libvirt URI (see
http://libvirt.org/uri.html). If this is not set then we
connect to the default libvirt URI (or one set through an
<br>
environment variable, see the libvirt documentation for full
details).</p>

<p style="margin-top: 1em">The optional &quot;live&quot;
flag controls whether this call will try to connect to a
running virtual machine &quot;guestfsd&quot; process if it
sees a suitable &lt;channel&gt; element in the libvirt XML
<br>
definition. The default (if the flag is omitted) is never to
try. See &quot;ATTACHING TO RUNNING DAEMONS&quot; in
guestfs(3) for more information.</p>

<p style="margin-top: 1em">If the &quot;allowuuid&quot;
flag is true (default is false) then a UUID may be passed
instead of the domain name. The &quot;dom&quot; string is
treated as a UUID first and looked up, and if that <br>
lookup fails then we treat &quot;dom&quot; as a name as
usual.</p>

<p style="margin-top: 1em">The optional
&quot;readonlydisk&quot; parameter controls what we do for
disks which are marked &lt;readonly/&gt; in the libvirt XML.
Possible values are:</p>

<p style="margin-top: 1em">readonlydisk = &quot;error&quot;
<br>
If &quot;readonly&quot; is false:</p>

<p style="margin-top: 1em">The whole call is aborted with
an error if any disk with the &lt;readonly/&gt; flag is
found.</p>

<p style="margin-top: 1em">If &quot;readonly&quot; is
true:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are added read-only.</p>

<p style="margin-top: 1em">readonlydisk = &quot;read&quot;
<br>
If &quot;readonly&quot; is false:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are added read-only. Other disks are added
read/write.</p>

<p style="margin-top: 1em">If &quot;readonly&quot; is
true:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are added read-only.</p>

<p style="margin-top: 1em">readonlydisk = &quot;write&quot;
(default) <br>
If &quot;readonly&quot; is false:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are added read/write.</p>

<p style="margin-top: 1em">If &quot;readonly&quot; is
true:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are added read-only.</p>

<p style="margin-top: 1em">readonlydisk =
&quot;ignore&quot; <br>
If &quot;readonly&quot; is true or false:</p>

<p style="margin-top: 1em">Disks with the &lt;readonly/&gt;
flag are skipped.</p>

<p style="margin-top: 1em">The other optional parameters
are passed directly through to
&quot;add-drive-opts&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">add-drive <br>
add <br>
add-drive-opts <br>
add-drive filename [readonly:true|false] [format:..]
[iface:..] [name:..] [label:..] [protocol:..] [server:..]
[username:..] [secret:..] [cachemode:..] [discard:..]
[copyonread:true|false]</p>

<p style="margin-top: 1em">This function adds a disk image
called filename to the handle. filename may be a regular
host file or a host device.</p>

<p style="margin-top: 1em">When this function is called
before &quot;launch&quot; (the usual case) then the first
time you call this function, the disk appears in the API as
/dev/sda, the second time as /dev/sdb, <br>
and so on.</p>

<p style="margin-top: 1em">In libguestfs &acirc;&yen; 1.20
you can also call this function after launch (with some
restrictions). This is called &quot;hotplugging&quot;. When
hotplugging, you must specify a &quot;label&quot; so that
<br>
the new disk gets a predictable name. For more information
see &quot;HOTPLUGGING&quot; in guestfs(3).</p>

<p style="margin-top: 1em">You don&rsquo;t necessarily need
to be root when using libguestfs. However you obviously do
need sufficient permissions to access the filename for
whatever operations you want to <br>
perform (ie. read access if you just want to read the image
or write access if you want to modify the image).</p>

<p style="margin-top: 1em">This call checks that filename
exists.</p>

<p style="margin-top: 1em">filename may be the special
string &quot;/dev/null&quot;. See &quot;NULL DISKS&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">The optional arguments are:</p>

<p style="margin-top: 1em">&quot;readonly&quot; <br>
If true then the image is treated as read-only. Writes are
still allowed, but they are stored in a temporary snapshot
overlay which is discarded at the end. The disk that <br>
you add is not modified.</p>

<p style="margin-top: 1em">&quot;format&quot; <br>
This forces the image format. If you omit this (or use
&quot;add-drive&quot; or &quot;add-drive-ro&quot;) then the
format is automatically detected. Possible formats include
&quot;raw&quot; and &quot;qcow2&quot;.</p>

<p style="margin-top: 1em">Automatic detection of the
format opens you up to a potential security hole when
dealing with untrusted raw-format images. See CVE-2010-3851
and RHBZ#642934. Specifying the <br>
format closes this security hole.</p>

<p style="margin-top: 1em">&quot;iface&quot; <br>
This rarely-used option lets you emulate the behaviour of
the deprecated &quot;add-drive-with-if&quot; call (q.v.)</p>

<p style="margin-top: 1em">&quot;name&quot; <br>
The name the drive had in the original guest, e.g. /dev/sdb.
This is used as a hint to the guest inspection process if it
is available.</p>

<p style="margin-top: 1em">&quot;label&quot; <br>
Give the disk a label. The label should be a unique, short
string using only ASCII characters &quot;[a-zA-Z]&quot;. As
well as its usual name in the API (such as /dev/sda), the
drive <br>
will also be named /dev/disk/guestfs/label.</p>

<p style="margin-top: 1em">See &quot;DISK LABELS&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">&quot;protocol&quot; <br>
The optional protocol argument can be used to select an
alternate source protocol.</p>

<p style="margin-top: 1em">See also: &quot;REMOTE
STORAGE&quot; in guestfs(3).</p>

<p style="margin-top: 1em">&quot;protocol =
&quot;file&quot;&quot; <br>
filename is interpreted as a local file or device. This is
the default if the optional protocol parameter is
omitted.</p>

<p style="margin-top: 1em">&quot;protocol =
&quot;nbd&quot;&quot; <br>
Connect to the Network Block Device server. The
&quot;server&quot; parameter must also be supplied - see
below.</p>

<p style="margin-top: 1em">See also: &quot;NETWORK BLOCK
DEVICE&quot; in guestfs(3).</p>

<p style="margin-top: 1em">&quot;protocol =
&quot;rbd&quot;&quot; <br>
Connect to the Ceph (librbd/RBD) server. The
&quot;server&quot; parameter must also be supplied - see
below. The &quot;username&quot; parameter may be supplied.
See below. The &quot;secret&quot; <br>
parameter may be supplied. See below.</p>

<p style="margin-top: 1em">See also: &quot;CEPH&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">&quot;server&quot; <br>
For protocols which require access to a remote server, this
is a list of server(s).</p>

<p style="margin-top: 1em">Protocol Number of servers
required <br>
-------- -------------------------- <br>
file List must be empty or param not used at all <br>
nbd Exactly one <br>
rbd Zero or more</p>

<p style="margin-top: 1em">Each list element is a string
specifying a server. The string must be in one of the
following formats:</p>

<p style="margin-top: 1em">hostname <br>
hostname:port <br>
tcp:hostname <br>
tcp:hostname:port <br>
unix:/path/to/socket</p>

<p style="margin-top: 1em">If the port number is omitted,
then the standard port number for the protocol is used (see
/etc/services).</p>

<p style="margin-top: 1em">&quot;username&quot; <br>
For the &quot;rbd&quot; protocol, this specifies the remote
username.</p>

<p style="margin-top: 1em">If not given, then no
authentication is attempted for ceph. But note this
sometimes may give unexpected results, for example if using
the libvirt backend and if the libvirt <br>
backend is configured to start the qemu appliance as a
special user such as &quot;qemu.qemu&quot;. If in doubt,
specify the remote username you want.</p>

<p style="margin-top: 1em">&quot;secret&quot; <br>
For the &quot;rbd&quot; protocol only, this specifies the
&rsquo;secret&rsquo; to use when connecting to the remote
device. It must be base64 encoded.</p>

<p style="margin-top: 1em">If not given, then a secret
matching the given username will be looked up in the default
keychain locations, or if no username is given, then no
authentication will be used.</p>

<p style="margin-top: 1em">&quot;cachemode&quot; <br>
Choose whether or not libguestfs will obey sync operations
(safe but slow) or not (unsafe but fast). The possible
values for this string are:</p>

<p style="margin-top: 1em">&quot;cachemode =
&quot;writeback&quot;&quot; <br>
This is the default.</p>

<p style="margin-top: 1em">Write operations in the API do
not return until a write(2) call has completed in the host
[but note this does not imply that anything gets written to
disk].</p>

<p style="margin-top: 1em">Sync operations in the API,
including implicit syncs caused by filesystem journalling,
will not return until an fdatasync(2) call has completed in
the host, indicating <br>
that data has been committed to disk.</p>

<p style="margin-top: 1em">&quot;cachemode =
&quot;unsafe&quot;&quot; <br>
In this mode, there are no guarantees. Libguestfs may cache
anything and ignore sync requests. This is suitable only for
scratch or temporary disks.</p>

<p style="margin-top: 1em">&quot;discard&quot; <br>
Enable or disable discard (a.k.a. trim or unmap) support on
this drive. If enabled, operations such as
&quot;fstrim&quot; will be able to discard / make thin /
punch holes in the <br>
underlying host file or device.</p>

<p style="margin-top: 1em">Possible discard settings
are:</p>

<p style="margin-top: 1em">&quot;discard =
&quot;disable&quot;&quot; <br>
Disable discard support. This is the default.</p>

<p style="margin-top: 1em">&quot;discard =
&quot;enable&quot;&quot; <br>
Enable discard support. Fail if discard is not possible.</p>

<p style="margin-top: 1em">&quot;discard =
&quot;besteffort&quot;&quot; <br>
Enable discard support if possible, but don&rsquo;t fail if
it is not supported.</p>

<p style="margin-top: 1em">Since not all backends and not
all underlying systems support discard, this is a good
choice if you want to use discard if possible, but
don&rsquo;t mind if it doesn&rsquo;t work.</p>

<p style="margin-top: 1em">&quot;copyonread&quot; <br>
The boolean parameter &quot;copyonread&quot; enables
copy-on-read support. This only affects disk formats which
have backing files, and causes reads to be stored in the
overlay layer, <br>
speeding up multiple reads of the same area of disk.</p>

<p style="margin-top: 1em">The default is false.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">add-drive-ro <br>
add-ro <br>
add-drive-ro filename</p>

<p style="margin-top: 1em">This function is the equivalent
of calling &quot;add-drive-opts&quot; with the optional
parameter &quot;GUESTFS_ADD_DRIVE_OPTS_READONLY&quot; set to
1, so the disk is added read-only, with the <br>
format being detected automatically.</p>

<p style="margin-top: 1em">add-drive-ro-with-if <br>
add-drive-ro-with-if filename iface</p>

<p style="margin-top: 1em">This is the same as
&quot;add-drive-ro&quot; but it allows you to specify the
QEMU interface emulation to use at run time.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;add-drive&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">add-drive-scratch <br>
scratch <br>
add-drive-scratch size [name:..] [label:..]</p>

<p style="margin-top: 1em">This command adds a temporary
scratch drive to the handle. The &quot;size&quot; parameter
is the virtual size (in bytes). The scratch drive is blank
initially (all reads return zeroes <br>
until you start writing to it). The drive is deleted when
the handle is closed.</p>

<p style="margin-top: 1em">The optional arguments
&quot;name&quot; and &quot;label&quot; are passed through to
&quot;add-drive&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">add-drive-with-if <br>
add-drive-with-if filename iface</p>

<p style="margin-top: 1em">This is the same as
&quot;add-drive&quot; but it allows you to specify the QEMU
interface emulation to use at run time.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;add-drive&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">aug-clear <br>
aug-clear augpath</p>

<p style="margin-top: 1em">Set the value associated with
&quot;path&quot; to &quot;NULL&quot;. This is the same as
the augtool(1) &quot;clear&quot; command.</p>

<p style="margin-top: 1em">aug-close <br>
aug-close</p>

<p style="margin-top: 1em">Close the current Augeas handle
and free up any resources used by it. After calling this,
you have to call &quot;aug-init&quot; again before you can
use any other Augeas functions.</p>

<p style="margin-top: 1em">aug-defnode <br>
aug-defnode name expr val</p>

<p style="margin-top: 1em">Defines a variable
&quot;name&quot; whose value is the result of evaluating
&quot;expr&quot;.</p>

<p style="margin-top: 1em">If &quot;expr&quot; evaluates to
an empty nodeset, a node is created, equivalent to calling
&quot;aug-set&quot; &quot;expr&quot;, &quot;value&quot;.
&quot;name&quot; will be the nodeset containing that single
node.</p>

<p style="margin-top: 1em">On success this returns a pair
containing the number of nodes in the nodeset, and a boolean
flag if a node was created.</p>

<p style="margin-top: 1em">aug-defvar <br>
aug-defvar name expr</p>

<p style="margin-top: 1em">Defines an Augeas variable
&quot;name&quot; whose value is the result of evaluating
&quot;expr&quot;. If &quot;expr&quot; is NULL, then
&quot;name&quot; is undefined.</p>

<p style="margin-top: 1em">On success this returns the
number of nodes in &quot;expr&quot;, or 0 if
&quot;expr&quot; evaluates to something which is not a
nodeset.</p>

<p style="margin-top: 1em">aug-get <br>
aug-get augpath</p>

<p style="margin-top: 1em">Look up the value associated
with &quot;path&quot;. If &quot;path&quot; matches exactly
one node, the &quot;value&quot; is returned.</p>

<p style="margin-top: 1em">aug-init <br>
aug-init root flags</p>

<p style="margin-top: 1em">Create a new Augeas handle for
editing configuration files. If there was any previous
Augeas handle associated with this guestfs session, then it
is closed.</p>

<p style="margin-top: 1em">You must call this before using
any other &quot;aug-*&quot; commands.</p>

<p style="margin-top: 1em">&quot;root&quot; is the
filesystem root. &quot;root&quot; must not be NULL, use /
instead.</p>

<p style="margin-top: 1em">The flags are the same as the
flags defined in &lt;augeas.h&gt;, the logical or of the
following integers:</p>

<p style="margin-top: 1em">&quot;AUG_SAVE_BACKUP&quot; = 1
<br>
Keep the original file with a &quot;.augsave&quot;
extension.</p>

<p style="margin-top: 1em">&quot;AUG_SAVE_NEWFILE&quot; = 2
<br>
Save changes into a file with extension &quot;.augnew&quot;,
and do not overwrite original. Overrides
&quot;AUG_SAVE_BACKUP&quot;.</p>

<p style="margin-top: 1em">&quot;AUG_TYPE_CHECK&quot; = 4
<br>
Typecheck lenses.</p>

<p style="margin-top: 1em">This option is only useful when
debugging Augeas lenses. Use of this option may require
additional memory for the libguestfs appliance. You may need
to set the <br>
&quot;LIBGUESTFS_MEMSIZE&quot; environment variable or call
&quot;set-memsize&quot;.</p>

<p style="margin-top: 1em">&quot;AUG_NO_STDINC&quot; = 8
<br>
Do not use standard load path for modules.</p>

<p style="margin-top: 1em">&quot;AUG_SAVE_NOOP&quot; = 16
<br>
Make save a no-op, just record what would have been
changed.</p>

<p style="margin-top: 1em">&quot;AUG_NO_LOAD&quot; = 32
<br>
Do not load the tree in &quot;aug-init&quot;.</p>

<p style="margin-top: 1em">To close the handle, you can
call &quot;aug-close&quot;.</p>

<p style="margin-top: 1em">To find out more about Augeas,
see http://augeas.net/.</p>

<p style="margin-top: 1em">aug-insert <br>
aug-insert augpath label true|false</p>

<p style="margin-top: 1em">Create a new sibling
&quot;label&quot; for &quot;path&quot;, inserting it into
the tree before or after &quot;path&quot; (depending on the
boolean flag &quot;before&quot;).</p>

<p style="margin-top: 1em">&quot;path&quot; must match
exactly one existing node in the tree, and &quot;label&quot;
must be a label, ie. not contain /, &quot;*&quot; or end
with a bracketed index &quot;[N]&quot;.</p>

<p style="margin-top: 1em">aug-label <br>
aug-label augpath</p>

<p style="margin-top: 1em">The label (name of the last
element) of the Augeas path expression &quot;augpath&quot;
is returned. &quot;augpath&quot; must match exactly one
node, else this function returns an error.</p>

<p style="margin-top: 1em">aug-load <br>
aug-load</p>

<p style="margin-top: 1em">Load files into the tree.</p>

<p style="margin-top: 1em">See &quot;aug_load&quot; in the
Augeas documentation for the full gory details.</p>

<p style="margin-top: 1em">aug-ls <br>
aug-ls augpath</p>

<p style="margin-top: 1em">This is just a shortcut for
listing &quot;aug-match&quot; &quot;path/*&quot; and sorting
the resulting nodes into alphabetical order.</p>

<p style="margin-top: 1em">aug-match <br>
aug-match augpath</p>

<p style="margin-top: 1em">Returns a list of paths which
match the path expression &quot;path&quot;. The returned
paths are sufficiently qualified so that they match exactly
one node in the current tree.</p>

<p style="margin-top: 1em">aug-mv <br>
aug-mv src dest</p>

<p style="margin-top: 1em">Move the node &quot;src&quot; to
&quot;dest&quot;. &quot;src&quot; must match exactly one
node. &quot;dest&quot; is overwritten if it exists.</p>

<p style="margin-top: 1em">aug-rm <br>
aug-rm augpath</p>

<p style="margin-top: 1em">Remove &quot;path&quot; and all
of its children.</p>

<p style="margin-top: 1em">On success this returns the
number of entries which were removed.</p>

<p style="margin-top: 1em">aug-save <br>
aug-save</p>

<p style="margin-top: 1em">This writes all pending changes
to disk.</p>

<p style="margin-top: 1em">The flags which were passed to
&quot;aug-init&quot; affect exactly how files are saved.</p>

<p style="margin-top: 1em">aug-set <br>
aug-set augpath val</p>

<p style="margin-top: 1em">Set the value associated with
&quot;path&quot; to &quot;val&quot;.</p>

<p style="margin-top: 1em">In the Augeas API, it is
possible to clear a node by setting the value to NULL. Due
to an oversight in the libguestfs API you cannot do that
with this call. Instead you must <br>
use the &quot;aug-clear&quot; call.</p>

<p style="margin-top: 1em">aug-setm <br>
aug-setm base sub val</p>

<p style="margin-top: 1em">Change multiple Augeas nodes in
a single operation. &quot;base&quot; is an expression
matching multiple nodes. &quot;sub&quot; is a path
expression relative to &quot;base&quot;. All nodes matching
&quot;base&quot; <br>
are found, and then for each node, &quot;sub&quot; is
changed to &quot;val&quot;. &quot;sub&quot; may also be
&quot;NULL&quot; in which case the &quot;base&quot; nodes
are modified.</p>

<p style="margin-top: 1em">This returns the number of nodes
modified.</p>

<p style="margin-top: 1em">available <br>
available &rsquo;groups ...&rsquo;</p>

<p style="margin-top: 1em">This command is used to check
the availability of some groups of functionality in the
appliance, which not all builds of the libguestfs appliance
will be able to provide.</p>

<p style="margin-top: 1em">The libguestfs groups, and the
functions that those groups correspond to, are listed in
&quot;AVAILABILITY&quot; in guestfs(3). You can also fetch
this list at runtime by calling <br>
&quot;available-all-groups&quot;.</p>

<p style="margin-top: 1em">The argument &quot;groups&quot;
is a list of group names, eg: &quot;[&quot;inotify&quot;,
&quot;augeas&quot;]&quot; would check for the availability
of the Linux inotify functions and Augeas (configuration
file <br>
editing) functions.</p>

<p style="margin-top: 1em">The command returns no error if
all requested groups are available.</p>

<p style="margin-top: 1em">It fails with an error if one or
more of the requested groups is unavailable in the
appliance.</p>

<p style="margin-top: 1em">If an unknown group name is
included in the list of groups then an error is always
returned.</p>

<p style="margin-top: 1em">Notes:</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;feature-available&quot; is the same as this call, but
with a slightly simpler to use API: that call returns a
boolean true/false instead of throwing an error.</p>

<p style="margin-top: 1em">&Acirc;&middot; You must call
&quot;launch&quot; before calling this function.</p>

<p style="margin-top: 1em">The reason is because we
don&rsquo;t know what groups are supported by the
appliance/daemon until it is running and can be queried.</p>

<p style="margin-top: 1em">&Acirc;&middot; If a group of
functions is available, this does not necessarily mean that
they will work. You still have to check for errors when
calling individual API functions even if <br>
they are available.</p>

<p style="margin-top: 1em">&Acirc;&middot; It is usually
the job of distro packagers to build complete functionality
into the libguestfs appliance. Upstream libguestfs, if built
from source with all requirements <br>
satisfied, will support everything.</p>

<p style="margin-top: 1em">&Acirc;&middot; This call was
added in version 1.0.80. In previous versions of libguestfs
all you could do would be to speculatively execute a command
to find out if the daemon implemented <br>
it. See also &quot;version&quot;.</p>

<p style="margin-top: 1em">See also
&quot;filesystem-available&quot;.</p>

<p style="margin-top: 1em">available-all-groups <br>
available-all-groups</p>

<p style="margin-top: 1em">This command returns a list of
all optional groups that this daemon knows about. Note this
returns both supported and unsupported groups. To find out
which ones the daemon can <br>
actually support you have to call &quot;available&quot; /
&quot;feature-available&quot; on each member of the returned
list.</p>

<p style="margin-top: 1em">See also &quot;available&quot;,
&quot;feature-available&quot; and &quot;AVAILABILITY&quot;
in guestfs(3).</p>

<p style="margin-top: 1em">base64-in <br>
base64-in (base64file|-) filename</p>

<p style="margin-top: 1em">This command uploads
base64-encoded data from &quot;base64file&quot; to
filename.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">base64-out <br>
base64-out filename (base64file|-)</p>

<p style="margin-top: 1em">This command downloads the
contents of filename, writing it out to local file
&quot;base64file&quot; encoded as base64.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">blkdiscard <br>
blkdiscard device</p>

<p style="margin-top: 1em">This discards all blocks on the
block device &quot;device&quot;, giving the free space back
to the host.</p>

<p style="margin-top: 1em">This operation requires support
in libguestfs, the host filesystem, qemu and the host
kernel. If this support isn&rsquo;t present it may give an
error or even appear to run but do <br>
nothing. You must also set the &quot;discard&quot; attribute
on the underlying drive (see
&quot;add-drive-opts&quot;).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;blkdiscard&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">blkdiscardzeroes <br>
blkdiscardzeroes device</p>

<p style="margin-top: 1em">This call returns true if blocks
on &quot;device&quot; that have been discarded by a call to
&quot;blkdiscard&quot; are returned as blocks of zero bytes
when read the next time.</p>

<p style="margin-top: 1em">If it returns false, then it may
be that discarded blocks are read as stale or random
data.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;blkdiscardzeroes&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">blkid <br>
blkid device</p>

<p style="margin-top: 1em">This command returns block
device attributes for &quot;device&quot;. The following
fields are usually present in the returned hash. Other
fields may also be present.</p>

<p style="margin-top: 1em">&quot;UUID&quot; <br>
The uuid of this device.</p>

<p style="margin-top: 1em">&quot;LABEL&quot; <br>
The label of this device.</p>

<p style="margin-top: 1em">&quot;VERSION&quot; <br>
The version of blkid command.</p>

<p style="margin-top: 1em">&quot;TYPE&quot; <br>
The filesystem type or RAID of this device.</p>

<p style="margin-top: 1em">&quot;USAGE&quot; <br>
The usage of this device, for example &quot;filesystem&quot;
or &quot;raid&quot;.</p>

<p style="margin-top: 1em">blockdev-flushbufs <br>
blockdev-flushbufs device</p>

<p style="margin-top: 1em">This tells the kernel to flush
internal buffers associated with &quot;device&quot;.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-getbsz <br>
blockdev-getbsz device</p>

<p style="margin-top: 1em">This returns the block size of a
device.</p>

<p style="margin-top: 1em">Note: this is different from
both size in blocks and filesystem block size. Also this
setting is not really used by anything. You should probably
not use it for anything. <br>
Filesystems have their own idea about what block size to
choose.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-getro <br>
blockdev-getro device</p>

<p style="margin-top: 1em">Returns a boolean indicating if
the block device is read-only (true if read-only, false if
not).</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-getsize64 <br>
blockdev-getsize64 device</p>

<p style="margin-top: 1em">This returns the size of the
device in bytes.</p>

<p style="margin-top: 1em">See also
&quot;blockdev-getsz&quot;.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-getss <br>
blockdev-getss device</p>

<p style="margin-top: 1em">This returns the size of sectors
on a block device. Usually 512, but can be larger for modern
devices.</p>

<p style="margin-top: 1em">(Note, this is not the size in
sectors, use &quot;blockdev-getsz&quot; for that).</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-getsz <br>
blockdev-getsz device</p>

<p style="margin-top: 1em">This returns the size of the
device in units of 512-byte sectors (even if the sectorsize
isn&rsquo;t 512 bytes ... weird).</p>

<p style="margin-top: 1em">See also
&quot;blockdev-getss&quot; for the real sector size of the
device, and &quot;blockdev-getsize64&quot; for the more
useful size in bytes.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-rereadpt <br>
blockdev-rereadpt device</p>

<p style="margin-top: 1em">Reread the partition table on
&quot;device&quot;.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-setbsz <br>
blockdev-setbsz device blocksize</p>

<p style="margin-top: 1em">This call does nothing and has
never done anything because of a bug in blockdev. Do not use
it.</p>

<p style="margin-top: 1em">If you need to set the
filesystem block size, use the &quot;blocksize&quot; option
of &quot;mkfs&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mkfs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">blockdev-setra <br>
blockdev-setra device sectors</p>

<p style="margin-top: 1em">Set readahead (in 512-byte
sectors) for the device.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-setro <br>
blockdev-setro device</p>

<p style="margin-top: 1em">Sets the block device named
&quot;device&quot; to read-only.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">blockdev-setrw <br>
blockdev-setrw device</p>

<p style="margin-top: 1em">Sets the block device named
&quot;device&quot; to read-write.</p>

<p style="margin-top: 1em">This uses the blockdev(8)
command.</p>

<p style="margin-top: 1em">btrfs-balance-cancel <br>
btrfs-balance-cancel path</p>

<p style="margin-top: 1em">Cancel a running balance on a
btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-balance-pause <br>
btrfs-balance-pause path</p>

<p style="margin-top: 1em">Pause a running balance on a
btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-balance-resume <br>
btrfs-balance-resume path</p>

<p style="margin-top: 1em">Resume a paused balance on a
btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-balance-status <br>
btrfs-balance-status path</p>

<p style="margin-top: 1em">Show the status of a running or
paused balance on a btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-device-add <br>
btrfs-device-add &rsquo;devices ...&rsquo; fs</p>

<p style="margin-top: 1em">Add the list of device(s) in
&quot;devices&quot; to the btrfs filesystem mounted at
&quot;fs&quot;. If &quot;devices&quot; is an empty list,
this does nothing.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-device-delete <br>
btrfs-device-delete &rsquo;devices ...&rsquo; fs</p>

<p style="margin-top: 1em">Remove the &quot;devices&quot;
from the btrfs filesystem mounted at &quot;fs&quot;. If
&quot;devices&quot; is an empty list, this does nothing.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-filesystem-balance <br>
btrfs-balance <br>
btrfs-filesystem-balance fs</p>

<p style="margin-top: 1em">Balance the chunks in the btrfs
filesystem mounted at &quot;fs&quot; across the underlying
devices.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-filesystem-defragment <br>
btrfs-filesystem-defragment path [flush:true|false]
[compress:..]</p>

<p style="margin-top: 1em">Defragment a file or directory
on a btrfs filesystem. compress is one of zlib or lzo.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-filesystem-resize <br>
btrfs-filesystem-resize mountpoint [size:N]</p>

<p style="margin-top: 1em">This command resizes a btrfs
filesystem.</p>

<p style="margin-top: 1em">Note that unlike other resize
calls, the filesystem has to be mounted and the parameter is
the mountpoint not the device (this is a requirement of
btrfs itself).</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">&quot;size&quot; <br>
The new size (in bytes) of the filesystem. If omitted, the
filesystem is resized to the maximum size.</p>

<p style="margin-top: 1em">See also btrfs(8).</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-filesystem-sync <br>
btrfs-filesystem-sync fs</p>

<p style="margin-top: 1em">Force sync on the btrfs
filesystem mounted at &quot;fs&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-fsck <br>
btrfs-fsck device [superblock:N] [repair:true|false]</p>

<p style="margin-top: 1em">Used to check a btrfs
filesystem, &quot;device&quot; is the device file where the
filesystem is stored.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-image <br>
btrfs-image &rsquo;source ...&rsquo; image
[compresslevel:N]</p>

<p style="margin-top: 1em">This is used to create an image
of a btrfs filesystem. All data will be zeroed, but metadata
and the like is preserved.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-assign <br>
btrfs-qgroup-assign src dst path</p>

<p style="margin-top: 1em">Add qgroup &quot;src&quot; to
parent qgroup &quot;dst&quot;. This command can group
several qgroups into a parent qgroup to share common
limit.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-create <br>
btrfs-qgroup-create qgroupid subvolume</p>

<p style="margin-top: 1em">Create a quota group (qgroup)
for subvolume at &quot;subvolume&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-destroy <br>
btrfs-qgroup-destroy qgroupid subvolume</p>

<p style="margin-top: 1em">Destroy a quota group.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-limit <br>
btrfs-qgroup-limit subvolume size</p>

<p style="margin-top: 1em">Limit the size of a subvolume
which&rsquo;s path is &quot;subvolume&quot;.
&quot;size&quot; can have suffix of G, M, or K.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-remove <br>
btrfs-qgroup-remove src dst path</p>

<p style="margin-top: 1em">Remove qgroup &quot;src&quot;
from the parent qgroup &quot;dst&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-qgroup-show <br>
btrfs-qgroup-show path</p>

<p style="margin-top: 1em">Show all subvolume quota groups
in a btrfs filesystem, including their usages.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-quota-enable <br>
btrfs-quota-enable fs true|false</p>

<p style="margin-top: 1em">Enable or disable subvolume
quota support for filesystem which contains
&quot;path&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-quota-rescan <br>
btrfs-quota-rescan fs</p>

<p style="margin-top: 1em">Trash all qgroup numbers and
scan the metadata again with the current config.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-replace <br>
btrfs-replace srcdev targetdev mntpoint</p>

<p style="margin-top: 1em">Replace device of a btrfs
filesystem. On a live filesystem, duplicate the data to the
target device which is currently stored on the source
device. After completion of the <br>
operation, the source device is wiped out and removed from
the filesystem.</p>

<p style="margin-top: 1em">The &quot;targetdev&quot; needs
to be same size or larger than the &quot;srcdev&quot;.
Devices which are currently mounted are never allowed to be
used as the &quot;targetdev&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-rescue-chunk-recover <br>
btrfs-rescue-chunk-recover device</p>

<p style="margin-top: 1em">Recover the chunk tree of btrfs
filesystem by scanning the devices one by one.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-rescue-super-recover <br>
btrfs-rescue-super-recover device</p>

<p style="margin-top: 1em">Recover bad superblocks from
good copies.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-scrub-cancel <br>
btrfs-scrub-cancel path</p>

<p style="margin-top: 1em">Cancel a running scrub on a
btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-scrub-resume <br>
btrfs-scrub-resume path</p>

<p style="margin-top: 1em">Resume a previously canceled or
interrupted scrub on a btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-scrub-start <br>
btrfs-scrub-start path</p>

<p style="margin-top: 1em">Reads all the data and metadata
on the filesystem, and uses checksums and the duplicate
copies from RAID storage to identify and repair any corrupt
data.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-scrub-status <br>
btrfs-scrub-status path</p>

<p style="margin-top: 1em">Show status of running or
finished scrub on a btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-set-seeding <br>
btrfs-set-seeding device true|false</p>

<p style="margin-top: 1em">Enable or disable the seeding
feature of a device that contains a btrfs filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-create <br>
btrfs-subvolume-create-opts <br>
btrfs-subvolume-create dest [qgroupid:..]</p>

<p style="margin-top: 1em">Create a btrfs subvolume. The
&quot;dest&quot; argument is the destination directory and
the name of the subvolume, in the form /path/to/dest/name.
The optional parameter &quot;qgroupid&quot; <br>
represents the qgroup which the newly created subvolume will
be added to.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-delete <br>
btrfs-subvolume-delete subvolume</p>

<p style="margin-top: 1em">Delete the named btrfs subvolume
or snapshot.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-get-default <br>
btrfs-subvolume-get-default fs</p>

<p style="margin-top: 1em">Get the default subvolume or
snapshot of a filesystem mounted at
&quot;mountpoint&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-list <br>
btrfs-subvolume-list fs</p>

<p style="margin-top: 1em">List the btrfs snapshots and
subvolumes of the btrfs filesystem which is mounted at
&quot;fs&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-set-default <br>
btrfs-subvolume-set-default id fs</p>

<p style="margin-top: 1em">Set the subvolume of the btrfs
filesystem &quot;fs&quot; which will be mounted by default.
See &quot;btrfs-subvolume-list&quot; to get a list of
subvolumes.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-show <br>
btrfs-subvolume-show subvolume</p>

<p style="margin-top: 1em">Return detailed information of
the subvolume.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfs-subvolume-snapshot <br>
btrfs-subvolume-snapshot-opts <br>
btrfs-subvolume-snapshot source dest [ro:true|false]
[qgroupid:..]</p>

<p style="margin-top: 1em">Create a snapshot of the btrfs
subvolume &quot;source&quot;. The &quot;dest&quot; argument
is the destination directory and the name of the snapshot,
in the form /path/to/dest/name. By default the <br>
newly created snapshot is writable, if the value of optional
parameter &quot;ro&quot; is true, then a readonly snapshot
is created. The optional parameter &quot;qgroupid&quot;
represents the qgroup <br>
which the newly created snapshot will be added to.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>


<p style="margin-top: 1em">btrfstune-enable-extended-inode-refs
<br>
btrfstune-enable-extended-inode-refs device</p>

<p style="margin-top: 1em">This will Enable extended inode
refs.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>


<p style="margin-top: 1em">btrfstune-enable-skinny-metadata-extent-refs
<br>
btrfstune-enable-skinny-metadata-extent-refs device</p>

<p style="margin-top: 1em">This enable skinny metadata
extent refs.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">btrfstune-seeding <br>
btrfstune-seeding device true|false</p>

<p style="margin-top: 1em">Enable seeding of a btrfs
device, this will force a fs readonly so that you can use it
to build other filesystems.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">c-pointer <br>
c-pointer</p>

<p style="margin-top: 1em">In non-C language bindings, this
allows you to retrieve the underlying C pointer to the
handle (ie. &quot;h *&quot;). The purpose of this is to
allow other libraries to interwork with <br>
libguestfs.</p>

<p style="margin-top: 1em">canonical-device-name <br>
canonical-device-name device</p>

<p style="margin-top: 1em">This utility function is useful
when displaying device names to the user. It takes a number
of irregular device names and returns them in a consistent
format:</p>

<p style="margin-top: 1em">/dev/hdX <br>
/dev/vdX <br>
These are returned as /dev/sdX. Note this works for device
names and partition names. This is approximately the reverse
of the algorithm described in &quot;BLOCK DEVICE
NAMING&quot; <br>
in guestfs(3).</p>

<p style="margin-top: 1em">/dev/mapper/VG-LV <br>
/dev/dm-N <br>
Converted to /dev/VG/LV form using
&quot;lvm-canonical-lv-name&quot;.</p>

<p style="margin-top: 1em">Other strings are returned
unmodified.</p>

<p style="margin-top: 1em">cap-get-file <br>
cap-get-file path</p>

<p style="margin-top: 1em">This function returns the Linux
capabilities attached to &quot;path&quot;. The capabilities
set is returned in text form (see cap_to_text(3)).</p>

<p style="margin-top: 1em">If no capabilities are attached
to a file, an empty string is returned.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxcaps&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">cap-set-file <br>
cap-set-file path cap</p>

<p style="margin-top: 1em">This function sets the Linux
capabilities attached to &quot;path&quot;. The capabilities
set &quot;cap&quot; should be passed in text form (see
cap_from_text(3)).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxcaps&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">case-sensitive-path <br>
case-sensitive-path path</p>

<p style="margin-top: 1em">This can be used to resolve case
insensitive paths on a filesystem which is case sensitive.
The use case is to resolve paths which you have read from
Windows configuration files <br>
or the Windows Registry, to the true path.</p>

<p style="margin-top: 1em">The command handles a
peculiarity of the Linux ntfs-3g filesystem driver (and
probably others), which is that although the underlying
filesystem is case-insensitive, the driver <br>
exports the filesystem to Linux as case-sensitive.</p>

<p style="margin-top: 1em">One consequence of this is that
special directories such as C:816ndows (or other things)
depending on the precise details of how they were <br>
created. In Windows itself this would not be a problem.</p>

<p style="margin-top: 1em">Bug or feature? You decide:
http://www.tuxera.com/community/ntfs-3g-faq/#posixfilenames1</p>

<p style="margin-top: 1em">&quot;case-sensitive-path&quot;
attempts to resolve the true case of each element in the
path. It will return a resolved path if either the full path
or its parent directory exists. If the <br>
parent directory exists but the full path does not, the case
of the parent directory will be correctly resolved, and the
remainder appended unmodified. For example, if the file <br>
&quot;/Windows/System32/netkvm.sys&quot; exists:</p>

<p style="margin-top: 1em">&quot;case-sensitive-path&quot;
(&quot;/windows/system32/netkvm.sys&quot;) <br>
&quot;Windows/System32/netkvm.sys&quot;</p>

<p style="margin-top: 1em">&quot;case-sensitive-path&quot;
(&quot;/windows/system32/NoSuchFile&quot;) <br>
&quot;Windows/System32/NoSuchFile&quot;</p>

<p style="margin-top: 1em">&quot;case-sensitive-path&quot;
(&quot;/windows/system33/netkvm.sys&quot;) <br>
ERROR</p>

<p style="margin-top: 1em">Note: Because of the above
behaviour, &quot;case-sensitive-path&quot; cannot be used to
check for the existence of a file.</p>

<p style="margin-top: 1em">Note: This function does not
handle drive names, backslashes etc.</p>

<p style="margin-top: 1em">See also
&quot;realpath&quot;.</p>

<p style="margin-top: 1em">cat <br>
cat path</p>

<p style="margin-top: 1em">Return the contents of the file
named &quot;path&quot;.</p>

<p style="margin-top: 1em">Because, in C, this function
returns a &quot;char *&quot;, there is no way to
differentiate between a &quot; &quot; character in a file
and end of string. To handle binary files, use the
&quot;read- <br>
file&quot; or &quot;download&quot; functions.</p>

<p style="margin-top: 1em">checksum <br>
checksum csumtype path</p>

<p style="margin-top: 1em">This call computes the MD5, SHAx
or CRC checksum of the file named &quot;path&quot;.</p>

<p style="margin-top: 1em">The type of checksum to compute
is given by the &quot;csumtype&quot; parameter which must
have one of the following values:</p>

<p style="margin-top: 1em">&quot;crc&quot; <br>
Compute the cyclic redundancy check (CRC) specified by POSIX
for the &quot;cksum&quot; command.</p>

<p style="margin-top: 1em">&quot;md5&quot; <br>
Compute the MD5 hash (using the &quot;md5sum&quot;
program).</p>

<p style="margin-top: 1em">&quot;sha1&quot; <br>
Compute the SHA1 hash (using the &quot;sha1sum&quot;
program).</p>

<p style="margin-top: 1em">&quot;sha224&quot; <br>
Compute the SHA224 hash (using the &quot;sha224sum&quot;
program).</p>

<p style="margin-top: 1em">&quot;sha256&quot; <br>
Compute the SHA256 hash (using the &quot;sha256sum&quot;
program).</p>

<p style="margin-top: 1em">&quot;sha384&quot; <br>
Compute the SHA384 hash (using the &quot;sha384sum&quot;
program).</p>

<p style="margin-top: 1em">&quot;sha512&quot; <br>
Compute the SHA512 hash (using the &quot;sha512sum&quot;
program).</p>

<p style="margin-top: 1em">The checksum is returned as a
printable string.</p>

<p style="margin-top: 1em">To get the checksum for a
device, use &quot;checksum-device&quot;.</p>

<p style="margin-top: 1em">To get the checksums for many
files, use &quot;checksums-out&quot;.</p>

<p style="margin-top: 1em">checksum-device <br>
checksum-device csumtype device</p>

<p style="margin-top: 1em">This call computes the MD5, SHAx
or CRC checksum of the contents of the device named
&quot;device&quot;. For the types of checksums supported see
the &quot;checksum&quot; command.</p>

<p style="margin-top: 1em">checksums-out <br>
checksums-out csumtype directory (sumsfile|-)</p>

<p style="margin-top: 1em">This command computes the
checksums of all regular files in directory and then emits a
list of those checksums to the local output file
&quot;sumsfile&quot;.</p>

<p style="margin-top: 1em">This can be used for verifying
the integrity of a virtual machine. However to be properly
secure you should pay attention to the output of the
checksum command (it uses the ones <br>
from GNU coreutils). In particular when the filename is not
printable, coreutils uses a special backslash syntax. For
more information, see the GNU coreutils info file.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">chmod <br>
chmod mode path</p>

<p style="margin-top: 1em">Change the mode (permissions) of
&quot;path&quot; to &quot;mode&quot;. Only numeric modes are
supported.</p>

<p style="margin-top: 1em">Note: When using this command
from guestfish, &quot;mode&quot; by default would be
decimal, unless you prefix it with 0 to get octal, ie. use
0700 not 700.</p>

<p style="margin-top: 1em">The mode actually set is
affected by the umask.</p>

<p style="margin-top: 1em">chown <br>
chown owner group path</p>

<p style="margin-top: 1em">Change the file owner to
&quot;owner&quot; and group to &quot;group&quot;.</p>

<p style="margin-top: 1em">Only numeric uid and gid are
supported. If you want to use names, you will need to locate
and parse the password file yourself (Augeas support makes
this relatively easy).</p>

<p style="margin-top: 1em">clear-backend-setting <br>
clear-backend-setting name</p>

<p style="margin-top: 1em">If there is a backend setting
string matching &quot;name&quot; or beginning with
&quot;name=&quot;, then that string is removed from the
backend settings.</p>

<p style="margin-top: 1em">This call returns the number of
strings which were removed (which may be 0, 1 or greater
than 1).</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3), &quot;BACKEND SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">command <br>
command &rsquo;arguments ...&rsquo;</p>

<p style="margin-top: 1em">This call runs a command from
the guest filesystem. The filesystem must be mounted, and
must contain a compatible operating system (ie. something
Linux, with the same or <br>
compatible processor architecture).</p>

<p style="margin-top: 1em">The single parameter is an
argv-style list of arguments. The first element is the name
of the program to run. Subsequent elements are parameters.
The list must be non-empty <br>
(ie. must contain a program name). Note that the command
runs directly, and is not invoked via the shell (see
&quot;sh&quot;).</p>

<p style="margin-top: 1em">The return value is anything
printed to stdout by the command.</p>

<p style="margin-top: 1em">If the command returns a
non-zero exit status, then this function returns an error
message. The error message string is the content of stderr
from the command.</p>

<p style="margin-top: 1em">The $PATH environment variable
will contain at least /usr/bin and /bin. If you require a
program from another location, you should provide the full
path in the first parameter.</p>

<p style="margin-top: 1em">Shared libraries and data files
required by the program must be available on filesystems
which are mounted in the correct places. It is the
caller&rsquo;s responsibility to ensure all <br>
filesystems that are needed are mounted at the right
locations.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">command-lines <br>
command-lines &rsquo;arguments ...&rsquo;</p>

<p style="margin-top: 1em">This is the same as
&quot;command&quot;, but splits the result into a list of
lines.</p>

<p style="margin-top: 1em">See also:
&quot;sh-lines&quot;</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">compress-device-out <br>
compress-device-out ctype device (zdevice|-) [level:N]</p>

<p style="margin-top: 1em">This command compresses
&quot;device&quot; and writes it out to the local file
&quot;zdevice&quot;.</p>

<p style="margin-top: 1em">The &quot;ctype&quot; and
optional &quot;level&quot; parameters have the same meaning
as in &quot;compress-out&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">compress-out <br>
compress-out ctype file (zfile|-) [level:N]</p>

<p style="margin-top: 1em">This command compresses file and
writes it out to the local file zfile.</p>

<p style="margin-top: 1em">The compression program used is
controlled by the &quot;ctype&quot; parameter. Currently
this includes: &quot;compress&quot;, &quot;gzip&quot;,
&quot;bzip2&quot;, &quot;xz&quot; or &quot;lzop&quot;. Some
compression types may not be <br>
supported by particular builds of libguestfs, in which case
you will get an error containing the substring &quot;not
supported&quot;.</p>

<p style="margin-top: 1em">The optional &quot;level&quot;
parameter controls compression level. The meaning and
default for this parameter depends on the compression
program being used.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">config <br>
config hvparam hvvalue</p>

<p style="margin-top: 1em">This can be used to add
arbitrary hypervisor parameters of the form -param value.
Actually it&rsquo;s not quite arbitrary - we prevent you
from setting some parameters which would <br>
interfere with parameters that we use.</p>

<p style="margin-top: 1em">The first character of
&quot;hvparam&quot; string must be a &quot;-&quot;
(dash).</p>

<p style="margin-top: 1em">&quot;hvvalue&quot; can be
NULL.</p>

<p style="margin-top: 1em">copy-attributes <br>
copy-attributes src dest [all:true|false] [mode:true|false]
[xattributes:true|false] [ownership:true|false]</p>

<p style="margin-top: 1em">Copy the attributes of a path
(which can be a file or a directory) to another path.</p>

<p style="margin-top: 1em">By default &quot;no&quot;
attribute is copied, so make sure to specify any (or
&quot;all&quot; to copy everything).</p>

<p style="margin-top: 1em">The optional arguments specify
which attributes can be copied:</p>

<p style="margin-top: 1em">&quot;mode&quot; <br>
Copy part of the file mode from &quot;source&quot; to
&quot;destination&quot;. Only the UNIX permissions and the
sticky/setuid/setgid bits can be copied.</p>

<p style="margin-top: 1em">&quot;xattributes&quot; <br>
Copy the Linux extended attributes (xattrs) from
&quot;source&quot; to &quot;destination&quot;. This flag
does nothing if the linuxxattrs feature is not available
(see &quot;feature-available&quot;).</p>

<p style="margin-top: 1em">&quot;ownership&quot; <br>
Copy the owner uid and the group gid of &quot;source&quot;
to &quot;destination&quot;.</p>

<p style="margin-top: 1em">&quot;all&quot; <br>
Copy all the attributes from &quot;source&quot; to
&quot;destination&quot;. Enabling it enables all the other
flags, if they are not specified already.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">copy-device-to-device <br>
copy-device-to-device src dest [srcoffset:N] [destoffset:N]
[size:N] [sparse:true|false] [append:true|false]</p>

<p style="margin-top: 1em">The four calls
&quot;copy-device-to-device&quot;,
&quot;copy-device-to-file&quot;,
&quot;copy-file-to-device&quot;, and
&quot;copy-file-to-file&quot; let you copy from a source
(device|file) to a destination <br>
(device|file).</p>

<p style="margin-top: 1em">Partial copies can be made since
you can specify optionally the source offset, destination
offset and size to copy. These values are all specified in
bytes. If not given, the <br>
offsets both default to zero, and the size defaults to
copying as much as possible until we hit the end of the
source.</p>

<p style="margin-top: 1em">The source and destination may
be the same object. However overlapping regions may not be
copied correctly.</p>

<p style="margin-top: 1em">If the destination is a file, it
is created if required. If the destination file is not large
enough, it is extended.</p>

<p style="margin-top: 1em">If the destination is a file and
the &quot;append&quot; flag is not set, then the destination
file is truncated. If the &quot;append&quot; flag is set,
then the copy appends to the destination <br>
file. The &quot;append&quot; flag currently cannot be set
for devices.</p>

<p style="margin-top: 1em">If the &quot;sparse&quot; flag
is true then the call avoids writing blocks that contain
only zeroes, which can help in some situations where the
backing disk is thin-provisioned. Note <br>
that unless the target is already zeroed, using this option
will result in incorrect copying.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">copy-device-to-file <br>
copy-device-to-file src dest [srcoffset:N] [destoffset:N]
[size:N] [sparse:true|false] [append:true|false]</p>

<p style="margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">copy-file-to-device <br>
copy-file-to-device src dest [srcoffset:N] [destoffset:N]
[size:N] [sparse:true|false] [append:true|false]</p>

<p style="margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">copy-file-to-file <br>
copy-file-to-file src dest [srcoffset:N] [destoffset:N]
[size:N] [sparse:true|false] [append:true|false]</p>

<p style="margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-top: 1em">This is not the function you
want for copying files. This is for copying blocks within
existing files. See &quot;cp&quot;, &quot;cp-a&quot; and
&quot;mv&quot; for general file copying and moving
functions.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">copy-size <br>
copy-size src dest size</p>

<p style="margin-top: 1em">This command copies exactly
&quot;size&quot; bytes from one source device or file
&quot;src&quot; to another destination device or file
&quot;dest&quot;.</p>

<p style="margin-top: 1em">Note this will fail if the
source is too short or if the destination is not large
enough.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;copy-device-to-device&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">cp <br>
cp src dest</p>

<p style="margin-top: 1em">This copies a file from
&quot;src&quot; to &quot;dest&quot; where &quot;dest&quot;
is either a destination filename or destination
directory.</p>

<p style="margin-top: 1em">cp-a <br>
cp-a src dest</p>

<p style="margin-top: 1em">This copies a file or directory
from &quot;src&quot; to &quot;dest&quot; recursively using
the &quot;cp -a&quot; command.</p>

<p style="margin-top: 1em">cp-r <br>
cp-r src dest</p>

<p style="margin-top: 1em">This copies a file or directory
from &quot;src&quot; to &quot;dest&quot; recursively using
the &quot;cp -rP&quot; command.</p>

<p style="margin-top: 1em">Most users should use
&quot;cp-a&quot; instead. This command is useful when you
don&rsquo;t want to preserve permissions, because the target
filesystem does not support it (primarily when <br>
writing to DOS FAT filesystems).</p>

<p style="margin-top: 1em">cpio-out <br>
cpio-out directory (cpiofile|-) [format:..]</p>

<p style="margin-top: 1em">This command packs the contents
of directory and downloads it to local file
&quot;cpiofile&quot;.</p>

<p style="margin-top: 1em">The optional &quot;format&quot;
parameter can be used to select the format. Only the
following formats are currently permitted:</p>

<p style="margin-top: 1em">&quot;newc&quot; <br>
New (SVR4) portable format. This format happens to be
compatible with the cpio-like format used by the Linux
kernel for initramfs.</p>

<p style="margin-top: 1em">This is the default format.</p>

<p style="margin-top: 1em">&quot;crc&quot; <br>
New (SVR4) portable format with a checksum.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">dd <br>
dd src dest</p>

<p style="margin-top: 1em">This command copies from one
source device or file &quot;src&quot; to another destination
device or file &quot;dest&quot;. Normally you would use this
to copy to or from a device or partition, for <br>
example to duplicate a filesystem.</p>

<p style="margin-top: 1em">If the destination is a device,
it must be as large or larger than the source file or
device, otherwise the copy will fail. This command cannot do
partial copies (see &quot;copy- <br>
device-to-device&quot;).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;copy-device-to-device&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">device-index <br>
device-index device</p>

<p style="margin-top: 1em">This function takes a device
name (eg. &quot;/dev/sdb&quot;) and returns the index of the
device in the list of devices.</p>

<p style="margin-top: 1em">Index numbers start from 0. The
named device must exist, for example as a string returned
from &quot;list-devices&quot;.</p>

<p style="margin-top: 1em">See also
&quot;list-devices&quot;, &quot;part-to-dev&quot;.</p>

<p style="margin-top: 1em">df <br>
df</p>

<p style="margin-top: 1em">This command runs the
&quot;df&quot; command to report disk space used.</p>

<p style="margin-top: 1em">This command is mostly useful
for interactive sessions. It is not intended that you try to
parse the output string. Use &quot;statvfs&quot; from
programs.</p>

<p style="margin-top: 1em">df-h <br>
df-h</p>

<p style="margin-top: 1em">This command runs the &quot;df
-h&quot; command to report disk space used in human-readable
format.</p>

<p style="margin-top: 1em">This command is mostly useful
for interactive sessions. It is not intended that you try to
parse the output string. Use &quot;statvfs&quot; from
programs.</p>

<p style="margin-top: 1em">disk-create <br>
disk-create filename format size [backingfile:..]
[backingformat:..] [preallocation:..] [compat:..]
[clustersize:N]</p>

<p style="margin-top: 1em">Create a blank disk image called
filename (a host file) with format &quot;format&quot;
(usually &quot;raw&quot; or &quot;qcow2&quot;). The size is
&quot;size&quot; bytes.</p>

<p style="margin-top: 1em">If used with the optional
&quot;backingfile&quot; parameter, then a snapshot is
created on top of the backing file. In this case,
&quot;size&quot; must be passed as &quot;-1&quot;. The size
of the snapshot <br>
is the same as the size of the backing file, which is
discovered automatically. You are encouraged to also pass
&quot;backingformat&quot; to describe the format of
&quot;backingfile&quot;.</p>

<p style="margin-top: 1em">If filename refers to a block
device, then the device is formatted. The &quot;size&quot;
is ignored since block devices have an intrinsic size.</p>

<p style="margin-top: 1em">The other optional parameters
are:</p>

<p style="margin-top: 1em">&quot;preallocation&quot; <br>
If format is &quot;raw&quot;, then this can be either
&quot;off&quot; (or &quot;sparse&quot;) or &quot;full&quot;
to create a sparse or fully allocated file respectively. The
default is &quot;off&quot;.</p>

<p style="margin-top: 1em">If format is &quot;qcow2&quot;,
then this can be &quot;off&quot; (or &quot;sparse&quot;),
&quot;metadata&quot; or &quot;full&quot;. Preallocating
metadata can be faster when doing lots of writes, but uses
more space. The <br>
default is &quot;off&quot;.</p>

<p style="margin-top: 1em">&quot;compat&quot; <br>
&quot;qcow2&quot; only: Pass the string 1.1 to use the
advanced qcow2 format supported by qemu &acirc;&yen;
1.1.</p>

<p style="margin-top: 1em">&quot;clustersize&quot; <br>
&quot;qcow2&quot; only: Change the qcow2 cluster size. The
default is 65536 (bytes) and this setting may be any power
of two between 512 and 2097152.</p>

<p style="margin-top: 1em">Note that this call does not add
the new disk to the handle. You may need to call
&quot;add-drive-opts&quot; separately.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">disk-format <br>
disk-format filename</p>

<p style="margin-top: 1em">Detect and return the format of
the disk image called filename. filename can also be a host
device, etc. If the format of the image could not be
detected, then &quot;unknown&quot; is <br>
returned.</p>

<p style="margin-top: 1em">Note that detecting the disk
format can be insecure under some circumstances. See
&quot;CVE-2010-3851&quot; in guestfs(3).</p>

<p style="margin-top: 1em">See also: &quot;DISK IMAGE
FORMATS&quot; in guestfs(3)</p>

<p style="margin-top: 1em">disk-has-backing-file <br>
disk-has-backing-file filename</p>

<p style="margin-top: 1em">Detect and return whether the
disk image filename has a backing file.</p>

<p style="margin-top: 1em">Note that detecting disk
features can be insecure under some circumstances. See
&quot;CVE-2010-3851&quot; in guestfs(3).</p>

<p style="margin-top: 1em">disk-virtual-size <br>
disk-virtual-size filename</p>

<p style="margin-top: 1em">Detect and return the virtual
size in bytes of the disk image called filename.</p>

<p style="margin-top: 1em">Note that detecting disk
features can be insecure under some circumstances. See
&quot;CVE-2010-3851&quot; in guestfs(3).</p>

<p style="margin-top: 1em">dmesg <br>
dmesg</p>

<p style="margin-top: 1em">This returns the kernel messages
(&quot;dmesg&quot; output) from the guest kernel. This is
sometimes useful for extended debugging of problems.</p>

<p style="margin-top: 1em">Another way to get the same
information is to enable verbose messages with
&quot;set-verbose&quot; or by setting the environment
variable &quot;LIBGUESTFS_DEBUG=1&quot; before running the
program.</p>

<p style="margin-top: 1em">download <br>
download remotefilename (filename|-)</p>

<p style="margin-top: 1em">Download file remotefilename and
save it as filename on the local machine.</p>

<p style="margin-top: 1em">filename can also be a named
pipe.</p>

<p style="margin-top: 1em">See also &quot;upload&quot;,
&quot;cat&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">download-offset <br>
download-offset remotefilename (filename|-) offset size</p>

<p style="margin-top: 1em">Download file remotefilename and
save it as filename on the local machine.</p>

<p style="margin-top: 1em">remotefilename is read for
&quot;size&quot; bytes starting at &quot;offset&quot; (this
region must be within the file or device).</p>

<p style="margin-top: 1em">Note that there is no limit on
the amount of data that can be downloaded with this call,
unlike with &quot;pread&quot;, and this call always reads
the full amount unless an error occurs.</p>

<p style="margin-top: 1em">See also &quot;download&quot;,
&quot;pread&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">drop-caches <br>
drop-caches whattodrop</p>

<p style="margin-top: 1em">This instructs the guest kernel
to drop its page cache, and/or dentries and inode caches.
The parameter &quot;whattodrop&quot; tells the kernel what
precisely to drop, see <br>
http://linux-mm.org/Drop_Caches</p>

<p style="margin-top: 1em">Setting &quot;whattodrop&quot;
to 3 should drop everything.</p>

<p style="margin-top: 1em">This automatically calls sync(2)
before the operation, so that the maximum guest memory is
freed.</p>

<p style="margin-top: 1em">du <br>
du path</p>

<p style="margin-top: 1em">This command runs the &quot;du
-s&quot; command to estimate file space usage for
&quot;path&quot;.</p>

<p style="margin-top: 1em">&quot;path&quot; can be a file
or a directory. If &quot;path&quot; is a directory then the
estimate includes the contents of the directory and all
subdirectories (recursively).</p>

<p style="margin-top: 1em">The result is the estimated size
in kilobytes (ie. units of 1024 bytes).</p>

<p style="margin-top: 1em">e2fsck <br>
e2fsck device [correct:true|false] [forceall:true|false]</p>

<p style="margin-top: 1em">This runs the ext2/ext3
filesystem checker on &quot;device&quot;. It can take the
following optional arguments:</p>

<p style="margin-top: 1em">&quot;correct&quot; <br>
Automatically repair the file system. This option will cause
e2fsck to automatically fix any filesystem problems that can
be safely fixed without human intervention.</p>

<p style="margin-top: 1em">This option may not be specified
at the same time as the &quot;forceall&quot; option.</p>

<p style="margin-top: 1em">&quot;forceall&quot; <br>
Assume an answer of &rsquo;yes&rsquo; to all questions;
allows e2fsck to be used non-interactively.</p>

<p style="margin-top: 1em">This option may not be specified
at the same time as the &quot;correct&quot; option.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">e2fsck-f <br>
e2fsck-f device</p>

<p style="margin-top: 1em">This runs &quot;e2fsck -p -f
device&quot;, ie. runs the ext2/ext3 filesystem checker on
&quot;device&quot;, noninteractively (-p), even if the
filesystem appears to be clean (-f).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;e2fsck&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">echo-daemon <br>
echo-daemon &rsquo;words ...&rsquo;</p>

<p style="margin-top: 1em">This command concatenates the
list of &quot;words&quot; passed with single spaces between
them and returns the resulting string.</p>

<p style="margin-top: 1em">You can use this command to test
the connection through to the daemon.</p>

<p style="margin-top: 1em">See also
&quot;ping-daemon&quot;.</p>

<p style="margin-top: 1em">egrep <br>
egrep regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;egrep&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">egrepi <br>
egrepi regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;egrep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">equal <br>
equal file1 file2</p>

<p style="margin-top: 1em">This compares the two files
file1 and file2 and returns true if their content is exactly
equal, or false otherwise.</p>

<p style="margin-top: 1em">The external cmp(1) program is
used for the comparison.</p>

<p style="margin-top: 1em">exists <br>
exists path</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a file, directory (or anything) with
the given &quot;path&quot; name.</p>

<p style="margin-top: 1em">See also &quot;is-file&quot;,
&quot;is-dir&quot;, &quot;stat&quot;.</p>

<p style="margin-top: 1em">extlinux <br>
extlinux directory</p>

<p style="margin-top: 1em">Install the SYSLINUX bootloader
on the device mounted at directory. Unlike
&quot;syslinux&quot; which requires a FAT filesystem, this
can be used on an ext2/3/4 or btrfs filesystem.</p>

<p style="margin-top: 1em">The directory parameter can be
either a mountpoint, or a directory within the
mountpoint.</p>

<p style="margin-top: 1em">You also have to mark the
partition as &quot;active&quot;
(&quot;part-set-bootable&quot;) and a Master Boot Record
must be installed (eg. using &quot;pwrite-device&quot;) on
the first sector of the whole <br>
disk. The SYSLINUX package comes with some suitable Master
Boot Records. See the extlinux(1) man page for further
information.</p>

<p style="margin-top: 1em">Additional configuration can be
supplied to SYSLINUX by placing a file called extlinux.conf
on the filesystem under directory. For further information
about the contents of this <br>
file, see extlinux(1).</p>

<p style="margin-top: 1em">See also
&quot;syslinux&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;extlinux&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">fallocate <br>
fallocate path len</p>

<p style="margin-top: 1em">This command preallocates a file
(containing zero bytes) named &quot;path&quot; of size
&quot;len&quot; bytes. If the file exists already, it is
overwritten.</p>

<p style="margin-top: 1em">Do not confuse this with the
guestfish-specific &quot;alloc&quot; command which allocates
a file in the host and attaches it as a device.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;fallocate64&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">fallocate64 <br>
fallocate64 path len</p>

<p style="margin-top: 1em">This command preallocates a file
(containing zero bytes) named &quot;path&quot; of size
&quot;len&quot; bytes. If the file exists already, it is
overwritten.</p>

<p style="margin-top: 1em">Note that this call allocates
disk blocks for the file. To create a sparse file use
&quot;truncate-size&quot; instead.</p>

<p style="margin-top: 1em">The deprecated call
&quot;fallocate&quot; does the same, but owing to an
oversight it only allowed 30 bit lengths to be specified,
effectively limiting the maximum size of files created <br>
through that call to 1GB.</p>

<p style="margin-top: 1em">Do not confuse this with the
guestfish-specific &quot;alloc&quot; and &quot;sparse&quot;
commands which create a file in the host and attach it as a
device.</p>

<p style="margin-top: 1em">feature-available <br>
feature-available &rsquo;groups ...&rsquo;</p>

<p style="margin-top: 1em">This is the same as
&quot;available&quot;, but unlike that call it returns a
simple true/false boolean result, instead of throwing an
exception if a feature is not found. For other <br>
documentation see &quot;available&quot;.</p>

<p style="margin-top: 1em">fgrep <br>
fgrep pattern path</p>

<p style="margin-top: 1em">This calls the external
&quot;fgrep&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">fgrepi <br>
fgrepi pattern path</p>

<p style="margin-top: 1em">This calls the external
&quot;fgrep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">file <br>
file path</p>

<p style="margin-top: 1em">This call uses the standard
file(1) command to determine the type or contents of the
file.</p>

<p style="margin-top: 1em">This call will also
transparently look inside various types of compressed
file.</p>

<p style="margin-top: 1em">The exact command which runs is
&quot;file -zb path&quot;. Note in particular that the
filename is not prepended to the output (the -b option).</p>

<p style="margin-top: 1em">The output depends on the output
of the underlying file(1) command and it can change in
future in ways beyond our control. In other words, the
output is not guaranteed by the <br>
ABI.</p>

<p style="margin-top: 1em">See also: file(1),
&quot;vfs-type&quot;, &quot;lstat&quot;,
&quot;is-file&quot;, &quot;is-blockdev&quot; (etc),
&quot;is-zero&quot;.</p>

<p style="margin-top: 1em">file-architecture <br>
file-architecture filename</p>

<p style="margin-top: 1em">This detects the architecture of
the binary filename, and returns it if known.</p>

<p style="margin-top: 1em">Currently defined architectures
are:</p>

<p style="margin-top: 1em">&quot;i386&quot; <br>
This string is returned for all 32 bit i386, i486, i586,
i686 binaries irrespective of the precise processor
requirements of the binary.</p>

<p style="margin-top: 1em">&quot;x86_64&quot; <br>
64 bit x86-64.</p>

<p style="margin-top: 1em">&quot;sparc&quot; <br>
32 bit SPARC.</p>

<p style="margin-top: 1em">&quot;sparc64&quot; <br>
64 bit SPARC V9 and above.</p>

<p style="margin-top: 1em">&quot;ia64&quot; <br>
Intel Itanium.</p>

<p style="margin-top: 1em">&quot;ppc&quot; <br>
32 bit Power PC.</p>

<p style="margin-top: 1em">&quot;ppc64&quot; <br>
64 bit Power PC.</p>

<p style="margin-top: 1em">&quot;arm&quot; <br>
32 bit ARM.</p>

<p style="margin-top: 1em">&quot;aarch64&quot; <br>
64 bit ARM.</p>

<p style="margin-top: 1em">Libguestfs may return other
architecture strings in future.</p>

<p style="margin-top: 1em">The function works on at least
the following types of files:</p>

<p style="margin-top: 1em">&Acirc;&middot; many types of
Un*x and Linux binary</p>

<p style="margin-top: 1em">&Acirc;&middot; many types of
Un*x and Linux shared library</p>

<p style="margin-top: 1em">&Acirc;&middot; Windows Win32
and Win64 binaries</p>

<p style="margin-top: 1em">&Acirc;&middot; Windows Win32
and Win64 DLLs</p>

<p style="margin-top: 1em">Win32 binaries and DLLs return
&quot;i386&quot;.</p>

<p style="margin-top: 1em">Win64 binaries and DLLs return
&quot;x86_64&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; Linux kernel
modules</p>

<p style="margin-top: 1em">&Acirc;&middot; Linux new-style
initrd images</p>

<p style="margin-top: 1em">&Acirc;&middot; some non-x86
Linux vmlinuz kernels</p>

<p style="margin-top: 1em">What it can&rsquo;t do
currently:</p>

<p style="margin-top: 1em">&Acirc;&middot; static libraries
(libfoo.a)</p>

<p style="margin-top: 1em">&Acirc;&middot; Linux old-style
initrd as compressed ext2 filesystem (RHEL 3)</p>

<p style="margin-top: 1em">&Acirc;&middot; x86 Linux
vmlinuz kernels</p>

<p style="margin-top: 1em">x86 vmlinuz images (bzImage
format) consist of a mix of 16-, 32- and compressed code,
and are horribly hard to unpack. If you want to find the
architecture of a kernel, use <br>
the architecture of the associated initrd or kernel
module(s) instead.</p>

<p style="margin-top: 1em">filesize <br>
filesize file</p>

<p style="margin-top: 1em">This command returns the size of
file in bytes.</p>

<p style="margin-top: 1em">To get other stats about a file,
use &quot;stat&quot;, &quot;lstat&quot;, &quot;is-dir&quot;,
&quot;is-file&quot; etc. To get the size of block devices,
use &quot;blockdev-getsize64&quot;.</p>

<p style="margin-top: 1em">filesystem-available <br>
filesystem-available filesystem</p>

<p style="margin-top: 1em">Check whether libguestfs
supports the named filesystem. The argument
&quot;filesystem&quot; is a filesystem name, such as
&quot;ext3&quot;.</p>

<p style="margin-top: 1em">You must call &quot;launch&quot;
before using this command.</p>

<p style="margin-top: 1em">This is mainly useful as a
negative test. If this returns true, it doesn&rsquo;t mean
that a particular filesystem can be created or mounted,
since filesystems can fail for other <br>
reasons such as it being a later version of the filesystem,
or having incompatible features, or lacking the right
mkfs.&lt;fs&gt; tool.</p>

<p style="margin-top: 1em">See also &quot;available&quot;,
&quot;feature-available&quot;, &quot;AVAILABILITY&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">fill <br>
fill c len path</p>

<p style="margin-top: 1em">This command creates a new file
called &quot;path&quot;. The initial content of the file is
&quot;len&quot; octets of &quot;c&quot;, where &quot;c&quot;
must be a number in the range &quot;[0..255]&quot;.</p>

<p style="margin-top: 1em">To fill a file with zero bytes
(sparsely), it is much more efficient to use
&quot;truncate-size&quot;. To create a file with a pattern
of repeating bytes use &quot;fill-pattern&quot;.</p>

<p style="margin-top: 1em">fill-dir <br>
fill-dir dir nr</p>

<p style="margin-top: 1em">This function, useful for
testing filesystems, creates &quot;nr&quot; empty files in
the directory &quot;dir&quot; with names 00000000 through
&quot;nr-1&quot; (ie. each file name is 8 digits long padded
with <br>
zeroes).</p>

<p style="margin-top: 1em">fill-pattern <br>
fill-pattern pattern len path</p>

<p style="margin-top: 1em">This function is like
&quot;fill&quot; except that it creates a new file of length
&quot;len&quot; containing the repeating pattern of bytes in
&quot;pattern&quot;. The pattern is truncated if necessary
to <br>
ensure the length of the file is exactly &quot;len&quot;
bytes.</p>

<p style="margin-top: 1em">find <br>
find directory</p>

<p style="margin-top: 1em">This command lists out all files
and directories, recursively, starting at directory. It is
essentially equivalent to running the shell command
&quot;find directory -print&quot; but some <br>
post-processing happens on the output, described below.</p>

<p style="margin-top: 1em">This returns a list of strings
without any prefix. Thus if the directory structure was:</p>

<p style="margin-top: 1em">/tmp/a <br>
/tmp/b <br>
/tmp/c/d</p>

<p style="margin-top: 1em">then the returned list from
&quot;find&quot; /tmp would be 4 elements:</p>

<p style="margin-top: 1em">a <br>
b <br>
c <br>
c/d</p>

<p style="margin-top: 1em">If directory is not a directory,
then this command returns an error.</p>

<p style="margin-top: 1em">The returned list is sorted.</p>

<p style="margin-top: 1em">find0 <br>
find0 directory (files|-)</p>

<p style="margin-top: 1em">This command lists out all files
and directories, recursively, starting at directory, placing
the resulting list in the external file called files.</p>

<p style="margin-top: 1em">This command works the same way
as &quot;find&quot; with the following exceptions:</p>

<p style="margin-top: 1em">&Acirc;&middot; The resulting
list is written to an external file.</p>

<p style="margin-top: 1em">&Acirc;&middot; Items
(filenames) in the result are separated by &quot; &quot;
characters. See find(1) option -print0.</p>

<p style="margin-top: 1em">&Acirc;&middot; The result list
is not sorted.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">findfs-label <br>
findfs-label label</p>

<p style="margin-top: 1em">This command searches the
filesystems and returns the one which has the given label.
An error is returned if no such filesystem can be found.</p>

<p style="margin-top: 1em">To find the label of a
filesystem, use &quot;vfs-label&quot;.</p>

<p style="margin-top: 1em">findfs-uuid <br>
findfs-uuid uuid</p>

<p style="margin-top: 1em">This command searches the
filesystems and returns the one which has the given UUID. An
error is returned if no such filesystem can be found.</p>

<p style="margin-top: 1em">To find the UUID of a
filesystem, use &quot;vfs-uuid&quot;.</p>

<p style="margin-top: 1em">fsck <br>
fsck fstype device</p>

<p style="margin-top: 1em">This runs the filesystem checker
(fsck) on &quot;device&quot; which should have filesystem
type &quot;fstype&quot;.</p>

<p style="margin-top: 1em">The returned integer is the
status. See fsck(8) for the list of status codes from
&quot;fsck&quot;.</p>

<p style="margin-top: 1em">Notes:</p>

<p style="margin-top: 1em">&Acirc;&middot; Multiple status
codes can be summed together.</p>

<p style="margin-top: 1em">&Acirc;&middot; A non-zero
return code can mean &quot;success&quot;, for example if
errors have been corrected on the filesystem.</p>

<p style="margin-top: 1em">&Acirc;&middot; Checking or
repairing NTFS volumes is not supported (by linux-ntfs).</p>

<p style="margin-top: 1em">This command is entirely
equivalent to running &quot;fsck -a -t fstype
device&quot;.</p>

<p style="margin-top: 1em">fstrim <br>
fstrim mountpoint [offset:N] [length:N]
[minimumfreeextent:N]</p>

<p style="margin-top: 1em">Trim the free space in the
filesystem mounted on &quot;mountpoint&quot;. The filesystem
must be mounted read-write.</p>

<p style="margin-top: 1em">The filesystem contents are not
affected, but any free space in the filesystem is
&quot;trimmed&quot;, that is, given back to the host device,
thus making disk images more sparse, allowing <br>
unused space in qcow2 files to be reused, etc.</p>

<p style="margin-top: 1em">This operation requires support
in libguestfs, the mounted filesystem, the host filesystem,
qemu and the host kernel. If this support isn&rsquo;t
present it may give an error or even <br>
appear to run but do nothing.</p>

<p style="margin-top: 1em">In the case where the kernel vfs
driver does not support trimming, this call will fail with
errno set to &quot;ENOTSUP&quot;. Currently this happens
when trying to trim FAT filesystems.</p>

<p style="margin-top: 1em">See also
&quot;zero-free-space&quot;. That is a slightly different
operation that turns free space in the filesystem into
zeroes. It is valid to call &quot;fstrim&quot; either
instead of, or after <br>
calling &quot;zero-free-space&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;fstrim&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">get-append <br>
get-append</p>

<p style="margin-top: 1em">Return the additional kernel
options which are added to the libguestfs appliance kernel
command line.</p>

<p style="margin-top: 1em">If &quot;NULL&quot; then no
options are added.</p>

<p style="margin-top: 1em">get-attach-method <br>
get-attach-method</p>

<p style="margin-top: 1em">Return the current backend.</p>

<p style="margin-top: 1em">See &quot;set-backend&quot; and
&quot;BACKEND&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;get-backend&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">get-autosync <br>
get-autosync</p>

<p style="margin-top: 1em">Get the autosync flag.</p>

<p style="margin-top: 1em">get-backend <br>
get-backend</p>

<p style="margin-top: 1em">Return the current backend.</p>

<p style="margin-top: 1em">This handle property was
previously called the &quot;attach method&quot;.</p>

<p style="margin-top: 1em">See &quot;set-backend&quot; and
&quot;BACKEND&quot; in guestfs(3).</p>

<p style="margin-top: 1em">get-backend-setting <br>
get-backend-setting name</p>

<p style="margin-top: 1em">Find a backend setting string
which is either &quot;name&quot; or begins with
&quot;name=&quot;. If &quot;name&quot;, this returns the
string &quot;1&quot;. If &quot;name=&quot;, this returns the
part after the equals sign <br>
(which may be an empty string).</p>

<p style="margin-top: 1em">If no such setting is found,
this function throws an error. The errno (see
&quot;last-errno&quot;) will be &quot;ESRCH&quot; in this
case.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3), &quot;BACKEND SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">get-backend-settings <br>
get-backend-settings</p>

<p style="margin-top: 1em">Return the current backend
settings.</p>

<p style="margin-top: 1em">This call returns all backend
settings strings. If you want to find a single backend
setting, see &quot;get-backend-setting&quot;.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3), &quot;BACKEND SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">get-cachedir <br>
get-cachedir</p>

<p style="margin-top: 1em">Get the directory used by the
handle to store the appliance cache.</p>

<p style="margin-top: 1em">get-direct <br>
get-direct</p>

<p style="margin-top: 1em">Return the direct appliance mode
flag.</p>

<p style="margin-top: 1em">get-e2attrs <br>
get-e2attrs file</p>

<p style="margin-top: 1em">This returns the file attributes
associated with file.</p>

<p style="margin-top: 1em">The attributes are a set of bits
associated with each inode which affect the behaviour of the
file. The attributes are returned as a string of letters
(described below). The <br>
string may be empty, indicating that no file attributes are
set for this file.</p>

<p style="margin-top: 1em">These attributes are only
present when the file is located on an ext2/3/4 filesystem.
Using this call on other filesystem types will result in an
error.</p>

<p style="margin-top: 1em">The characters (file attributes)
in the returned string are currently:</p>

<p style="margin-top: 1em">&rsquo;A&rsquo; When the file is
accessed, its atime is not modified.</p>

<p style="margin-top: 1em">&rsquo;a&rsquo; The file is
append-only.</p>

<p style="margin-top: 1em">&rsquo;c&rsquo; The file is
compressed on-disk.</p>

<p style="margin-top: 1em">&rsquo;D&rsquo; (Directories
only.) Changes to this directory are written synchronously
to disk.</p>

<p style="margin-top: 1em">&rsquo;d&rsquo; The file is not
a candidate for backup (see dump(8)).</p>

<p style="margin-top: 1em">&rsquo;E&rsquo; The file has
compression errors.</p>

<p style="margin-top: 1em">&rsquo;e&rsquo; The file is
using extents.</p>

<p style="margin-top: 1em">&rsquo;h&rsquo; The file is
storing its blocks in units of the filesystem blocksize
instead of sectors.</p>

<p style="margin-top: 1em">&rsquo;I&rsquo; (Directories
only.) The directory is using hashed trees.</p>

<p style="margin-top: 1em">&rsquo;i&rsquo; The file is
immutable. It cannot be modified, deleted or renamed. No
link can be created to this file.</p>

<p style="margin-top: 1em">&rsquo;j&rsquo; The file is
data-journaled.</p>

<p style="margin-top: 1em">&rsquo;s&rsquo; When the file is
deleted, all its blocks will be zeroed.</p>

<p style="margin-top: 1em">&rsquo;S&rsquo; Changes to this
file are written synchronously to disk.</p>

<p style="margin-top: 1em">&rsquo;T&rsquo; (Directories
only.) This is a hint to the block allocator that
subdirectories contained in this directory should be spread
across blocks. If not present, the block <br>
allocator will try to group subdirectories together.</p>

<p style="margin-top: 1em">&rsquo;t&rsquo; For a file, this
disables tail-merging. (Not used by upstream implementations
of ext2.)</p>

<p style="margin-top: 1em">&rsquo;u&rsquo; When the file is
deleted, its blocks will be saved, allowing the file to be
undeleted.</p>

<p style="margin-top: 1em">&rsquo;X&rsquo; The raw contents
of the compressed file may be accessed.</p>

<p style="margin-top: 1em">&rsquo;Z&rsquo; The compressed
file is dirty.</p>

<p style="margin-top: 1em">More file attributes may be
added to this list later. Not all file attributes may be set
for all kinds of files. For detailed information, consult
the chattr(1) man page.</p>

<p style="margin-top: 1em">See also
&quot;set-e2attrs&quot;.</p>

<p style="margin-top: 1em">Don&rsquo;t confuse these
attributes with extended attributes (see
&quot;getxattr&quot;).</p>

<p style="margin-top: 1em">get-e2generation <br>
get-e2generation file</p>

<p style="margin-top: 1em">This returns the ext2 file
generation of a file. The generation (which used to be
called the &quot;version&quot;) is a number associated with
an inode. This is most commonly used by NFS <br>
servers.</p>

<p style="margin-top: 1em">The generation is only present
when the file is located on an ext2/3/4 filesystem. Using
this call on other filesystem types will result in an
error.</p>

<p style="margin-top: 1em">See
&quot;set-e2generation&quot;.</p>

<p style="margin-top: 1em">get-e2label <br>
get-e2label device</p>

<p style="margin-top: 1em">This returns the ext2/3/4
filesystem label of the filesystem on
&quot;device&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;vfs-label&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">get-e2uuid <br>
get-e2uuid device</p>

<p style="margin-top: 1em">This returns the ext2/3/4
filesystem UUID of the filesystem on &quot;device&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;vfs-uuid&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">get-hv <br>
get-hv</p>

<p style="margin-top: 1em">Return the current hypervisor
binary.</p>

<p style="margin-top: 1em">This is always non-NULL. If it
wasn&rsquo;t set already, then this will return the default
qemu binary name.</p>

<p style="margin-top: 1em">get-identifier <br>
get-identifier</p>

<p style="margin-top: 1em">Get the handle identifier. See
&quot;set-identifier&quot;.</p>


<p style="margin-top: 1em">get-libvirt-requested-credential-challenge
<br>
get-libvirt-requested-credential-challenge index</p>

<p style="margin-top: 1em">Get the challenge (provided by
libvirt) for the &quot;index&quot;&rsquo;th requested
credential. If libvirt did not provide a challenge, this
returns the empty string &quot;&quot;.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>


<p style="margin-top: 1em">get-libvirt-requested-credential-defresult
<br>
get-libvirt-requested-credential-defresult index</p>

<p style="margin-top: 1em">Get the default result (provided
by libvirt) for the &quot;index&quot;&rsquo;th requested
credential. If libvirt did not provide a default result,
this returns the empty string &quot;&quot;.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>


<p style="margin-top: 1em">get-libvirt-requested-credential-prompt
<br>
get-libvirt-requested-credential-prompt index</p>

<p style="margin-top: 1em">Get the prompt (provided by
libvirt) for the &quot;index&quot;&rsquo;th requested
credential. If libvirt did not provide a prompt, this
returns the empty string &quot;&quot;.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>


<p style="margin-top: 1em">get-libvirt-requested-credentials
<br>
get-libvirt-requested-credentials</p>

<p style="margin-top: 1em">This should only be called
during the event callback for events of type
&quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;.</p>

<p style="margin-top: 1em">Return the list of credentials
requested by libvirt. Possible values are a subset of the
strings provided when you called
&quot;set-libvirt-supported-credentials&quot;.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>

<p style="margin-top: 1em">get-memsize <br>
get-memsize</p>

<p style="margin-top: 1em">This gets the memory size in
megabytes allocated to the hypervisor.</p>

<p style="margin-top: 1em">If &quot;set-memsize&quot; was
not called on this handle, and if
&quot;LIBGUESTFS_MEMSIZE&quot; was not set, then this
returns the compiled-in default value for memsize.</p>

<p style="margin-top: 1em">For more information on the
architecture of libguestfs, see guestfs(3).</p>

<p style="margin-top: 1em">get-network <br>
get-network</p>

<p style="margin-top: 1em">This returns the enable network
flag.</p>

<p style="margin-top: 1em">get-path <br>
get-path</p>

<p style="margin-top: 1em">Return the current search
path.</p>

<p style="margin-top: 1em">This is always non-NULL. If it
wasn&rsquo;t set already, then this will return the default
path.</p>

<p style="margin-top: 1em">get-pgroup <br>
get-pgroup</p>

<p style="margin-top: 1em">This returns the process group
flag.</p>

<p style="margin-top: 1em">get-pid <br>
pid <br>
get-pid</p>

<p style="margin-top: 1em">Return the process ID of the
hypervisor. If there is no hypervisor running, then this
will return an error.</p>

<p style="margin-top: 1em">This is an internal call used
for debugging and testing.</p>

<p style="margin-top: 1em">get-program <br>
get-program</p>

<p style="margin-top: 1em">Get the program name. See
&quot;set-program&quot;.</p>

<p style="margin-top: 1em">get-qemu <br>
get-qemu</p>

<p style="margin-top: 1em">Return the current hypervisor
binary (usually qemu).</p>

<p style="margin-top: 1em">This is always non-NULL. If it
wasn&rsquo;t set already, then this will return the default
qemu binary name.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;get-hv&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">get-recovery-proc <br>
get-recovery-proc</p>

<p style="margin-top: 1em">Return the recovery process
enabled flag.</p>

<p style="margin-top: 1em">get-selinux <br>
get-selinux</p>

<p style="margin-top: 1em">This returns the current setting
of the selinux flag which is passed to the appliance at boot
time. See &quot;set-selinux&quot;.</p>

<p style="margin-top: 1em">For more information on the
architecture of libguestfs, see guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;selinux-relabel&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">get-smp <br>
get-smp</p>

<p style="margin-top: 1em">This returns the number of
virtual CPUs assigned to the appliance.</p>

<p style="margin-top: 1em">get-tmpdir <br>
get-tmpdir</p>

<p style="margin-top: 1em">Get the directory used by the
handle to store temporary files.</p>

<p style="margin-top: 1em">get-trace <br>
get-trace</p>

<p style="margin-top: 1em">Return the command trace
flag.</p>

<p style="margin-top: 1em">get-umask <br>
get-umask</p>

<p style="margin-top: 1em">Return the current umask. By
default the umask is 022 unless it has been set by calling
&quot;umask&quot;.</p>

<p style="margin-top: 1em">get-verbose <br>
get-verbose</p>

<p style="margin-top: 1em">This returns the verbose
messages flag.</p>

<p style="margin-top: 1em">getcon <br>
getcon</p>

<p style="margin-top: 1em">This gets the SELinux security
context of the daemon.</p>

<p style="margin-top: 1em">See the documentation about
SELINUX in guestfs(3), and &quot;setcon&quot;</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;selinux-relabel&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;selinux&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">getxattr <br>
getxattr path name</p>

<p style="margin-top: 1em">Get a single extended attribute
from file &quot;path&quot; named &quot;name&quot;. This call
follows symlinks. If you want to lookup an extended
attribute for the symlink itself, use
&quot;lgetxattr&quot;.</p>

<p style="margin-top: 1em">Normally it is better to get all
extended attributes from a file in one go by calling
&quot;getxattrs&quot;. However some Linux filesystem
implementations are buggy and do not provide a <br>
way to list out attributes. For these filesystems (notably
ntfs-3g) you have to know the names of the extended
attributes you want in advance and call this function.</p>

<p style="margin-top: 1em">Extended attribute values are
blobs of binary data. If there is no extended attribute
named &quot;name&quot;, this returns an error.</p>

<p style="margin-top: 1em">See also: &quot;getxattrs&quot;,
&quot;lgetxattr&quot;, attr(5).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">getxattrs <br>
getxattrs path</p>

<p style="margin-top: 1em">This call lists the extended
attributes of the file or directory &quot;path&quot;.</p>

<p style="margin-top: 1em">At the system call level, this
is a combination of the listxattr(2) and getxattr(2)
calls.</p>

<p style="margin-top: 1em">See also:
&quot;lgetxattrs&quot;, attr(5).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">glob-expand <br>
glob-expand-opts <br>
glob-expand pattern [directoryslash:true|false]</p>

<p style="margin-top: 1em">This command searches for all
the pathnames matching &quot;pattern&quot; according to the
wildcard expansion rules used by the shell.</p>

<p style="margin-top: 1em">If no paths match, then this
returns an empty list (note: not an error).</p>

<p style="margin-top: 1em">It is just a wrapper around the
C glob(3) function with flags
&quot;GLOB_MARK|GLOB_BRACE&quot;. See that manual page for
more details.</p>

<p style="margin-top: 1em">&quot;directoryslash&quot;
controls whether use the &quot;GLOB_MARK&quot; flag for
glob(3), and it defaults to true. It can be explicitly set
as off to return no trailing slashes in filenames of <br>
directories.</p>

<p style="margin-top: 1em">Notice that there is no
equivalent command for expanding a device name (eg.
/dev/sd*). Use &quot;list-devices&quot;,
&quot;list-partitions&quot; etc functions instead.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">grep <br>
grep-opts <br>
grep regex path [extended:true|false] [fixed:true|false]
[insensitive:true|false] [compressed:true|false]</p>

<p style="margin-top: 1em">This calls the external
&quot;grep&quot; program and returns the matching lines.</p>

<p style="margin-top: 1em">The optional flags are:</p>

<p style="margin-top: 1em">&quot;extended&quot; <br>
Use extended regular expressions. This is the same as using
the -E flag.</p>

<p style="margin-top: 1em">&quot;fixed&quot; <br>
Match fixed (don&rsquo;t use regular expressions). This is
the same as using the -F flag.</p>

<p style="margin-top: 1em">&quot;insensitive&quot; <br>
Match case-insensitive. This is the same as using the -i
flag.</p>

<p style="margin-top: 1em">&quot;compressed&quot; <br>
Use &quot;zgrep&quot; instead of &quot;grep&quot;. This
allows the input to be compress- or gzip-compressed.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">grepi <br>
grepi regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;grep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">grub-install <br>
grub-install root device</p>

<p style="margin-top: 1em">This command installs GRUB 1
(the Grand Unified Bootloader) on &quot;device&quot;, with
the root directory being &quot;root&quot;.</p>

<p style="margin-top: 1em">Notes:</p>

<p style="margin-top: 1em">&Acirc;&middot; There is
currently no way in the API to install grub2, which is used
by most modern Linux guests. It is possible to run the grub2
command from the guest, although see the <br>
caveats in &quot;RUNNING COMMANDS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">&Acirc;&middot; This uses
&quot;grub-install&quot; from the host. Unfortunately grub
is not always compatible with itself, so this only works in
rather narrow circumstances. Careful testing with <br>
each guest version is advisable.</p>

<p style="margin-top: 1em">&Acirc;&middot; If grub-install
reports the error &quot;No suitable drive was found in the
generated device map.&quot; it may be that you need to
create a /boot/grub/device.map file first that <br>
contains the mapping between grub device names and Linux
device names. It is usually sufficient to create a file
containing:</p>

<p style="margin-top: 1em">(hd0) /dev/vda</p>

<p style="margin-top: 1em">replacing /dev/vda with the name
of the installation device.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;grub&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">head <br>
head path</p>

<p style="margin-top: 1em">This command returns up to the
first 10 lines of a file as a list of strings.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">head-n <br>
head-n nrlines path</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is a positive number, this returns the
first &quot;nrlines&quot; lines of the file
&quot;path&quot;.</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is a negative number, this returns lines
from the file &quot;path&quot;, excluding the last
&quot;nrlines&quot; lines.</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is zero, this returns an empty list.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">hexdump <br>
hexdump path</p>

<p style="margin-top: 1em">This runs &quot;hexdump -C&quot;
on the given &quot;path&quot;. The result is the
human-readable, canonical hex dump of the file.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">hivex-close <br>
hivex-close</p>

<p style="margin-top: 1em">Close the current hivex
handle.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-commit <br>
hivex-commit filename</p>

<p style="margin-top: 1em">Commit (write) changes to the
hive.</p>

<p style="margin-top: 1em">If the optional filename
parameter is null, then the changes are written back to the
same hive that was opened. If this is not null then they are
written to the alternate <br>
filename given and the original hive is left untouched.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-add-child <br>
hivex-node-add-child parent name</p>

<p style="margin-top: 1em">Add a child node to
&quot;parent&quot; named &quot;name&quot;.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-children <br>
hivex-node-children nodeh</p>

<p style="margin-top: 1em">Return the list of nodes which
are subkeys of &quot;nodeh&quot;.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-delete-child <br>
hivex-node-delete-child nodeh</p>

<p style="margin-top: 1em">Delete &quot;nodeh&quot;,
recursively if necessary.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-get-child <br>
hivex-node-get-child nodeh name</p>

<p style="margin-top: 1em">Return the child of
&quot;nodeh&quot; with the name &quot;name&quot;, if it
exists. This can return 0 meaning the name was not
found.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-get-value <br>
hivex-node-get-value nodeh key</p>

<p style="margin-top: 1em">Return the value attached to
&quot;nodeh&quot; which has the name &quot;key&quot;, if it
exists. This can return 0 meaning the key was not found.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-name <br>
hivex-node-name nodeh</p>

<p style="margin-top: 1em">Return the name of
&quot;nodeh&quot;.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-parent <br>
hivex-node-parent nodeh</p>

<p style="margin-top: 1em">Return the parent node of
&quot;nodeh&quot;.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-set-value <br>
hivex-node-set-value nodeh key t val</p>

<p style="margin-top: 1em">Set or replace a single value
under the node &quot;nodeh&quot;. The &quot;key&quot; is the
name, &quot;t&quot; is the type, and &quot;val&quot; is the
data.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-node-values <br>
hivex-node-values nodeh</p>

<p style="margin-top: 1em">Return the array of (key,
datatype, data) tuples attached to &quot;nodeh&quot;.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-open <br>
hivex-open filename [verbose:true|false] [debug:true|false]
[write:true|false]</p>

<p style="margin-top: 1em">Open the Windows Registry hive
file named filename. If there was any previous hivex handle
associated with this guestfs session, then it is closed.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-root <br>
hivex-root</p>

<p style="margin-top: 1em">Return the root node of the
hive.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-value-key <br>
hivex-value-key valueh</p>

<p style="margin-top: 1em">Return the key (name) field of a
(key, datatype, data) tuple.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-value-type <br>
hivex-value-type valueh</p>

<p style="margin-top: 1em">Return the data type field from
a (key, datatype, data) tuple.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-value-utf8 <br>
hivex-value-utf8 valueh</p>

<p style="margin-top: 1em">This calls
&quot;hivex-value-value&quot; (which returns the data field
from a hivex value tuple). It then assumes that the field is
a UTF-16LE string and converts the result to UTF-8 (or <br>
if this is not possible, it returns an error).</p>

<p style="margin-top: 1em">This is useful for reading
strings out of the Windows registry. However it is not
foolproof because the registry is not strongly-typed and
fields can contain arbitrary or <br>
unexpected data.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">hivex-value-value <br>
hivex-value-value valueh</p>

<p style="margin-top: 1em">Return the data field of a (key,
datatype, data) tuple.</p>

<p style="margin-top: 1em">This is a wrapper around the
hivex(3) call of the same name.</p>

<p style="margin-top: 1em">See also:
&quot;hivex-value-utf8&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;hivex&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">initrd-cat <br>
initrd-cat initrdpath filename</p>

<p style="margin-top: 1em">This command unpacks the file
filename from the initrd file called initrdpath. The
filename must be given without the initial / character.</p>

<p style="margin-top: 1em">For example, in guestfish you
could use the following command to examine the boot script
(usually called /init) contained in a Linux initrd or
initramfs image:</p>

<p style="margin-top: 1em">initrd-cat
/boot/initrd-&lt;version&gt;.img init</p>

<p style="margin-top: 1em">See also
&quot;initrd-list&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">initrd-list <br>
initrd-list path</p>

<p style="margin-top: 1em">This command lists out files
contained in an initrd.</p>

<p style="margin-top: 1em">The files are listed without any
initial / character. The files are listed in the order they
appear (not necessarily alphabetical). Directory names are
listed as separate <br>
items.</p>

<p style="margin-top: 1em">Old Linux kernels (2.4 and
earlier) used a compressed ext2 filesystem as initrd. We
only support the newer initramfs format (compressed cpio
files).</p>

<p style="margin-top: 1em">inotify-add-watch <br>
inotify-add-watch path mask</p>

<p style="margin-top: 1em">Watch &quot;path&quot; for the
events listed in &quot;mask&quot;.</p>

<p style="margin-top: 1em">Note that if &quot;path&quot; is
a directory then events within that directory are watched,
but this does not happen recursively (in
subdirectories).</p>

<p style="margin-top: 1em">Note for non-C or non-Linux
callers: the inotify events are defined by the Linux kernel
ABI and are listed in /usr/include/sys/inotify.h.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inotify-close <br>
inotify-close</p>

<p style="margin-top: 1em">This closes the inotify handle
which was previously opened by inotify_init. It removes all
watches, throws away any pending events, and deallocates all
resources.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inotify-files <br>
inotify-files</p>

<p style="margin-top: 1em">This function is a helpful
wrapper around &quot;inotify-read&quot; which just returns a
list of pathnames of objects that were touched. The returned
pathnames are sorted and deduplicated.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inotify-init <br>
inotify-init maxevents</p>

<p style="margin-top: 1em">This command creates a new
inotify handle. The inotify subsystem can be used to notify
events which happen to objects in the guest filesystem.</p>

<p style="margin-top: 1em">&quot;maxevents&quot; is the
maximum number of events which will be queued up between
calls to &quot;inotify-read&quot; or
&quot;inotify-files&quot;. If this is passed as 0, then the
kernel (or previously <br>
set) default is used. For Linux 2.6.29 the default was 16384
events. Beyond this limit, the kernel throws away events,
but records the fact that it threw them away by setting a
<br>
flag &quot;IN_Q_OVERFLOW&quot; in the returned structure
list (see &quot;inotify-read&quot;).</p>

<p style="margin-top: 1em">Before any events are generated,
you have to add some watches to the internal watch list.
See: &quot;inotify-add-watch&quot; and
&quot;inotify-rm-watch&quot;.</p>

<p style="margin-top: 1em">Queued up events should be read
periodically by calling &quot;inotify-read&quot; (or
&quot;inotify-files&quot; which is just a helpful wrapper
around &quot;inotify-read&quot;). If you don&rsquo;t read
the events <br>
out often enough then you risk the internal queue
overflowing.</p>

<p style="margin-top: 1em">The handle should be closed
after use by calling &quot;inotify-close&quot;. This also
removes any watches automatically.</p>

<p style="margin-top: 1em">See also inotify(7) for an
overview of the inotify interface as exposed by the Linux
kernel, which is roughly what we expose via libguestfs. Note
that there is one global <br>
inotify handle per libguestfs instance.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inotify-read <br>
inotify-read</p>

<p style="margin-top: 1em">Return the complete queue of
events that have happened since the previous read call.</p>

<p style="margin-top: 1em">If no events have happened, this
returns an empty list.</p>

<p style="margin-top: 1em">Note: In order to make sure that
all events have been read, you must call this function
repeatedly until it returns an empty list. The reason is
that the call will read events <br>
up to the maximum appliance-to-host message size and leave
remaining events in the queue.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inotify-rm-watch <br>
inotify-rm-watch wd</p>

<p style="margin-top: 1em">Remove a previously defined
inotify watch. See &quot;inotify-add-watch&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;inotify&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">inspect-get-arch <br>
inspect-get-arch root</p>

<p style="margin-top: 1em">This returns the architecture of
the inspected operating system. The possible return values
are listed under &quot;file-architecture&quot;.</p>

<p style="margin-top: 1em">If the architecture could not be
determined, then the string &quot;unknown&quot; is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-distro <br>
inspect-get-distro root</p>

<p style="margin-top: 1em">This returns the distro
(distribution) of the inspected operating system.</p>

<p style="margin-top: 1em">Currently defined distros
are:</p>

<p style="margin-top: 1em">&quot;alpinelinux&quot; <br>
Alpine Linux.</p>

<p style="margin-top: 1em">&quot;altlinux&quot; <br>
ALT Linux.</p>

<p style="margin-top: 1em">&quot;archlinux&quot; <br>
Arch Linux.</p>

<p style="margin-top: 1em">&quot;buildroot&quot; <br>
Buildroot-derived distro, but not one we specifically
recognize.</p>

<p style="margin-top: 1em">&quot;centos&quot; <br>
CentOS.</p>

<p style="margin-top: 1em">&quot;cirros&quot; <br>
Cirros.</p>

<p style="margin-top: 1em">&quot;coreos&quot; <br>
CoreOS.</p>

<p style="margin-top: 1em">&quot;debian&quot; <br>
Debian.</p>

<p style="margin-top: 1em">&quot;fedora&quot; <br>
Fedora.</p>

<p style="margin-top: 1em">&quot;freebsd&quot; <br>
FreeBSD.</p>

<p style="margin-top: 1em">&quot;freedos&quot; <br>
FreeDOS.</p>

<p style="margin-top: 1em">&quot;frugalware&quot; <br>
Frugalware.</p>

<p style="margin-top: 1em">&quot;gentoo&quot; <br>
Gentoo.</p>

<p style="margin-top: 1em">&quot;linuxmint&quot; <br>
Linux Mint.</p>

<p style="margin-top: 1em">&quot;mageia&quot; <br>
Mageia.</p>

<p style="margin-top: 1em">&quot;mandriva&quot; <br>
Mandriva.</p>

<p style="margin-top: 1em">&quot;meego&quot; <br>
MeeGo.</p>

<p style="margin-top: 1em">&quot;netbsd&quot; <br>
NetBSD.</p>

<p style="margin-top: 1em">&quot;openbsd&quot; <br>
OpenBSD.</p>

<p style="margin-top: 1em">&quot;opensuse&quot; <br>
OpenSUSE.</p>

<p style="margin-top: 1em">&quot;oraclelinux&quot; <br>
Oracle Linux.</p>

<p style="margin-top: 1em">&quot;pardus&quot; <br>
Pardus.</p>

<p style="margin-top: 1em">&quot;pldlinux&quot; <br>
PLD Linux.</p>

<p style="margin-top: 1em">&quot;redhat-based&quot; <br>
Some Red Hat-derived distro.</p>

<p style="margin-top: 1em">&quot;rhel&quot; <br>
Red Hat Enterprise Linux.</p>

<p style="margin-top: 1em">&quot;scientificlinux&quot; <br>
Scientific Linux.</p>

<p style="margin-top: 1em">&quot;slackware&quot; <br>
Slackware.</p>

<p style="margin-top: 1em">&quot;sles&quot; <br>
SuSE Linux Enterprise Server or Desktop.</p>

<p style="margin-top: 1em">&quot;suse-based&quot; <br>
Some openSuSE-derived distro.</p>

<p style="margin-top: 1em">&quot;ttylinux&quot; <br>
ttylinux.</p>

<p style="margin-top: 1em">&quot;ubuntu&quot; <br>
Ubuntu.</p>

<p style="margin-top: 1em">&quot;unknown&quot; <br>
The distro could not be determined.</p>

<p style="margin-top: 1em">&quot;windows&quot; <br>
Windows does not have distributions. This string is returned
if the OS type is Windows.</p>

<p style="margin-top: 1em">Future versions of libguestfs
may return other strings here. The caller should be prepared
to handle any string.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-drive-mappings <br>
inspect-get-drive-mappings root</p>

<p style="margin-top: 1em">This call is useful for Windows
which uses a primitive system of assigning drive letters
(like C: to partitions. This inspection API examines the
Windows Registry to find out <br>
how disks/partitions are mapped to drive letters, and
returns a hash table as in the example below:</p>

<p style="margin-top: 1em">C =&gt; /dev/vda2 <br>
E =&gt; /dev/vdb1 <br>
F =&gt; /dev/vdc1</p>

<p style="margin-top: 1em">Note that keys are drive
letters. For Windows, the key is case insensitive and just
contains the drive letter, without the customary colon
separator character.</p>

<p style="margin-top: 1em">In future we may support other
operating systems that also used drive letters, but the keys
for those might not be case insensitive and might be longer
than 1 character. For <br>
example in OS-9, hard drives were named &quot;h0&quot;,
&quot;h1&quot; etc.</p>

<p style="margin-top: 1em">For Windows guests, currently
only hard drive mappings are returned. Removable disks (eg.
DVD-ROMs) are ignored.</p>

<p style="margin-top: 1em">For guests that do not use drive
mappings, or if the drive mappings could not be determined,
this returns an empty hash table.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details. See
also &quot;inspect-get-mountpoints&quot;,
&quot;inspect-get-filesystems&quot;.</p>

<p style="margin-top: 1em">inspect-get-filesystems <br>
inspect-get-filesystems root</p>

<p style="margin-top: 1em">This returns a list of all the
filesystems that we think are associated with this operating
system. This includes the root filesystem, other ordinary
filesystems, and non- <br>
mounted devices like swap partitions.</p>

<p style="margin-top: 1em">In the case of a multi-boot
virtual machine, it is possible for a filesystem to be
shared between operating systems.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details. See
also &quot;inspect-get-mountpoints&quot;.</p>

<p style="margin-top: 1em">inspect-get-format <br>
inspect-get-format root</p>

<p style="margin-top: 1em">This returns the format of the
inspected operating system. You can use it to detect install
images, live CDs and similar.</p>

<p style="margin-top: 1em">Currently defined formats
are:</p>

<p style="margin-top: 1em">&quot;installed&quot; <br>
This is an installed operating system.</p>

<p style="margin-top: 1em">&quot;installer&quot; <br>
The disk image being inspected is not an installed operating
system, but a bootable install disk, live CD, or
similar.</p>

<p style="margin-top: 1em">&quot;unknown&quot; <br>
The format of this disk image is not known.</p>

<p style="margin-top: 1em">Future versions of libguestfs
may return other strings here. The caller should be prepared
to handle any string.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-hostname <br>
inspect-get-hostname root</p>

<p style="margin-top: 1em">This function returns the
hostname of the operating system as found by inspection of
the guest&rsquo;s configuration files.</p>

<p style="margin-top: 1em">If the hostname could not be
determined, then the string &quot;unknown&quot; is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-icon <br>
inspect-get-icon root [favicon:true|false]
[highquality:true|false]</p>

<p style="margin-top: 1em">This function returns an icon
corresponding to the inspected operating system. The icon is
returned as a buffer containing a PNG image (re-encoded to
PNG if necessary).</p>

<p style="margin-top: 1em">If it was not possible to get an
icon this function returns a zero-length (non-NULL) buffer.
Callers must check for this case.</p>

<p style="margin-top: 1em">Libguestfs will start by looking
for a file called /etc/favicon.png or C:\tcvicon.png and if
it has the correct format, the contents of this file will be
returned. You can <br>
disable favicons by passing the optional &quot;favicon&quot;
boolean as false (default is true).</p>

<p style="margin-top: 1em">If finding the favicon fails,
then we look in other places in the guest for a suitable
icon.</p>

<p style="margin-top: 1em">If the optional
&quot;highquality&quot; boolean is true then only high
quality icons are returned, which means only icons of high
resolution with an alpha channel. The default (false) is
<br>
to return any icon we can, even if it is of substandard
quality.</p>

<p style="margin-top: 1em">Notes:</p>

<p style="margin-top: 1em">&Acirc;&middot; Unlike most
other inspection API calls, the guest&rsquo;s disks must be
mounted up before you call this, since it needs to read
information from the guest filesystem during the <br>
call.</p>

<p style="margin-top: 1em">&Acirc;&middot; Security: The
icon data comes from the untrusted guest, and should be
treated with caution. PNG files have been known to contain
exploits. Ensure that libpng (or other <br>
relevant libraries) are fully up to date before trying to
process or display the icon.</p>

<p style="margin-top: 1em">&Acirc;&middot; The PNG image
returned can be any size. It might not be square. Libguestfs
tries to return the largest, highest quality icon available.
The application must scale the icon <br>
to the required size.</p>

<p style="margin-top: 1em">&Acirc;&middot; Extracting icons
from Windows guests requires the external
&quot;wrestool&quot; program from the &quot;icoutils&quot;
package, and several programs (&quot;bmptopnm&quot;,
&quot;pnmtopng&quot;, &quot;pamcut&quot;) from the <br>
&quot;netpbm&quot; package. These must be installed
separately.</p>

<p style="margin-top: 1em">&Acirc;&middot; Operating system
icons are usually trademarks. Seek legal advice before using
trademarks in applications.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">inspect-get-major-version <br>
inspect-get-major-version root</p>

<p style="margin-top: 1em">This returns the major version
number of the inspected operating system.</p>

<p style="margin-top: 1em">Windows uses a consistent
versioning scheme which is not reflected in the popular
public names used by the operating system. Notably the
operating system known as &quot;Windows 7&quot; is <br>
really version 6.1 (ie. major = 6, minor = 1). You can find
out the real versions corresponding to releases of Windows
by consulting Wikipedia or MSDN.</p>

<p style="margin-top: 1em">If the version could not be
determined, then 0 is returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-minor-version <br>
inspect-get-minor-version root</p>

<p style="margin-top: 1em">This returns the minor version
number of the inspected operating system.</p>

<p style="margin-top: 1em">If the version could not be
determined, then 0 is returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details. See
also &quot;inspect-get-major-version&quot;.</p>

<p style="margin-top: 1em">inspect-get-mountpoints <br>
inspect-get-mountpoints root</p>

<p style="margin-top: 1em">This returns a hash of where we
think the filesystems associated with this operating system
should be mounted. Callers should note that this is at best
an educated guess made by <br>
reading configuration files such as /etc/fstab. In
particular note that this may return filesystems which are
non-existent or not mountable and callers should be prepared
to <br>
handle or ignore failures if they try to mount them.</p>

<p style="margin-top: 1em">Each element in the returned
hashtable has a key which is the path of the mountpoint (eg.
/boot) and a value which is the filesystem that would be
mounted there (eg. /dev/sda1).</p>

<p style="margin-top: 1em">Non-mounted devices such as swap
devices are not returned in this list.</p>

<p style="margin-top: 1em">For operating systems like
Windows which still use drive letters, this call will only
return an entry for the first drive &quot;mounted on&quot;
/. For information about the mapping of <br>
drive letters to partitions, see
&quot;inspect-get-drive-mappings&quot;.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details. See
also &quot;inspect-get-filesystems&quot;.</p>

<p style="margin-top: 1em">inspect-get-package-format <br>
inspect-get-package-format root</p>

<p style="margin-top: 1em">This function and
&quot;inspect-get-package-management&quot; return the
package format and package management tool used by the
inspected operating system. For example for Fedora these
<br>
functions would return &quot;rpm&quot; (package format), and
&quot;yum&quot; or &quot;dnf&quot; (package management).</p>

<p style="margin-top: 1em">This returns the string
&quot;unknown&quot; if we could not determine the package
format or if the operating system does not have a real
packaging system (eg. Windows).</p>

<p style="margin-top: 1em">Possible strings include:
&quot;rpm&quot;, &quot;deb&quot;, &quot;ebuild&quot;,
&quot;pisi&quot;, &quot;pacman&quot;, &quot;pkgsrc&quot;,
&quot;apk&quot;. Future versions of libguestfs may return
other strings.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-package-management
<br>
inspect-get-package-management root</p>


<p style="margin-top: 1em">&quot;inspect-get-package-format&quot;
and this function return the package format and package
management tool used by the inspected operating system. For
example for Fedora these <br>
functions would return &quot;rpm&quot; (package format), and
&quot;yum&quot; or &quot;dnf&quot; (package management).</p>

<p style="margin-top: 1em">This returns the string
&quot;unknown&quot; if we could not determine the package
management tool or if the operating system does not have a
real packaging system (eg. Windows).</p>

<p style="margin-top: 1em">Possible strings include:
&quot;yum&quot;, &quot;dnf&quot;, &quot;up2date&quot;,
&quot;apt&quot; (for all Debian derivatives),
&quot;portage&quot;, &quot;pisi&quot;, &quot;pacman&quot;,
&quot;urpmi&quot;, &quot;zypper&quot;, &quot;apk&quot;.
Future versions of libguestfs may <br>
return other strings.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-product-name <br>
inspect-get-product-name root</p>

<p style="margin-top: 1em">This returns the product name of
the inspected operating system. The product name is
generally some freeform string which can be displayed to the
user, but should not be parsed <br>
by programs.</p>

<p style="margin-top: 1em">If the product name could not be
determined, then the string &quot;unknown&quot; is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-product-variant <br>
inspect-get-product-variant root</p>

<p style="margin-top: 1em">This returns the product variant
of the inspected operating system.</p>

<p style="margin-top: 1em">For Windows guests, this returns
the contents of the Registry key
&quot;HKLMtwarecrosoftWindows NT&quot;InstallationType&quot;
which is usually a string such as <br>
&quot;Client&quot; or &quot;Server&quot; (other values are
possible). This can be used to distinguish consumer and
enterprise versions of Windows that have the same version
number (for example, <br>
Windows 7 and Windows 2008 Server are both version 6.1, but
the former is &quot;Client&quot; and the latter is
&quot;Server&quot;).</p>

<p style="margin-top: 1em">For enterprise Linux guests, in
future we intend this to return the product variant such as
&quot;Desktop&quot;, &quot;Server&quot; and so on. But this
is not implemented at present.</p>

<p style="margin-top: 1em">If the product variant could not
be determined, then the string &quot;unknown&quot; is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details. See
also &quot;inspect-get-product-name&quot;,
&quot;inspect-get-major-version&quot;.</p>

<p style="margin-top: 1em">inspect-get-roots <br>
inspect-get-roots</p>

<p style="margin-top: 1em">This function is a convenient
way to get the list of root devices, as returned from a
previous call to &quot;inspect-os&quot;, but without redoing
the whole inspection process.</p>

<p style="margin-top: 1em">This returns an empty list if
either no root devices were found or the caller has not
called &quot;inspect-os&quot;.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-type <br>
inspect-get-type root</p>

<p style="margin-top: 1em">This returns the type of the
inspected operating system. Currently defined types are:</p>

<p style="margin-top: 1em">&quot;linux&quot; <br>
Any Linux-based operating system.</p>

<p style="margin-top: 1em">&quot;windows&quot; <br>
Any Microsoft Windows operating system.</p>

<p style="margin-top: 1em">&quot;freebsd&quot; <br>
FreeBSD.</p>

<p style="margin-top: 1em">&quot;netbsd&quot; <br>
NetBSD.</p>

<p style="margin-top: 1em">&quot;openbsd&quot; <br>
OpenBSD.</p>

<p style="margin-top: 1em">&quot;hurd&quot; <br>
GNU/Hurd.</p>

<p style="margin-top: 1em">&quot;dos&quot; <br>
MS-DOS, FreeDOS and others.</p>

<p style="margin-top: 1em">&quot;minix&quot; <br>
MINIX.</p>

<p style="margin-top: 1em">&quot;unknown&quot; <br>
The operating system type could not be determined.</p>

<p style="margin-top: 1em">Future versions of libguestfs
may return other strings here. The caller should be prepared
to handle any string.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>


<p style="margin-top: 1em">inspect-get-windows-current-control-set
<br>
inspect-get-windows-current-control-set root</p>

<p style="margin-top: 1em">This returns the Windows
CurrentControlSet of the inspected guest. The
CurrentControlSet is a registry key name such as
&quot;ControlSet001&quot;.</p>

<p style="margin-top: 1em">This call assumes that the guest
is Windows and that the Registry could be examined by
inspection. If this is not the case then an error is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-get-windows-systemroot
<br>
inspect-get-windows-systemroot root</p>

<p style="margin-top: 1em">This returns the Windows
systemroot of the inspected guest. The systemroot is a
directory path such as /WINDOWS.</p>

<p style="margin-top: 1em">This call assumes that the guest
is Windows and that the systemroot could be determined by
inspection. If this is not the case then an error is
returned.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-is-live <br>
inspect-is-live root</p>

<p style="margin-top: 1em">If
&quot;inspect-get-format&quot; returns &quot;installer&quot;
(this is an install disk), then this returns true if a live
image was detected on the disk.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-is-multipart <br>
inspect-is-multipart root</p>

<p style="margin-top: 1em">If
&quot;inspect-get-format&quot; returns &quot;installer&quot;
(this is an install disk), then this returns true if the
disk is part of a set.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-is-netinst <br>
inspect-is-netinst root</p>

<p style="margin-top: 1em">If
&quot;inspect-get-format&quot; returns &quot;installer&quot;
(this is an install disk), then this returns true if the
disk is a network installer, ie. not a self-contained
install CD but one <br>
which is likely to require network access to complete the
install.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-list-applications <br>
inspect-list-applications root</p>

<p style="margin-top: 1em">Return the list of applications
installed in the operating system.</p>

<p style="margin-top: 1em">Note: This call works
differently from other parts of the inspection API. You have
to call &quot;inspect-os&quot;, then
&quot;inspect-get-mountpoints&quot;, then mount up the
disks, before calling <br>
this. Listing applications is a significantly more difficult
operation which requires access to the full filesystem. Also
note that unlike the other &quot;inspect-get-*&quot; calls
which <br>
are just returning data cached in the libguestfs handle,
this call actually reads parts of the mounted filesystems
during the call.</p>

<p style="margin-top: 1em">This returns an empty list if
the inspection code was not able to determine the list of
applications.</p>

<p style="margin-top: 1em">The application structure
contains the following fields:</p>

<p style="margin-top: 1em">&quot;app_name&quot; <br>
The name of the application. For Red Hat-derived and
Debian-derived Linux guests, this is the package name.</p>

<p style="margin-top: 1em">&quot;app_display_name&quot;
<br>
The display name of the application, sometimes localized to
the install language of the guest operating system.</p>

<p style="margin-top: 1em">If unavailable this is returned
as an empty string &quot;&quot;. Callers needing to display
something can use &quot;app_name&quot; instead.</p>

<p style="margin-top: 1em">&quot;app_epoch&quot; <br>
For package managers which use epochs, this contains the
epoch of the package (an integer). If unavailable, this is
returned as 0.</p>

<p style="margin-top: 1em">&quot;app_version&quot; <br>
The version string of the application or package. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_release&quot; <br>
The release string of the application or package, for
package managers that use this. If unavailable this is
returned as an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_install_path&quot;
<br>
The installation path of the application (on operating
systems such as Windows which use installation paths). This
path is in the format used by the guest operating system,
<br>
it is not a libguestfs path.</p>

<p style="margin-top: 1em">If unavailable this is returned
as an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_trans_path&quot; <br>
The install path translated into a libguestfs path. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_publisher&quot; <br>
The name of the publisher of the application, for package
managers that use this. If unavailable this is returned as
an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_url&quot; <br>
The URL (eg. upstream URL) of the application. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_source_package&quot;
<br>
For packaging systems which support this, the name of the
source package. If unavailable this is returned as an empty
string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_summary&quot; <br>
A short (usually one line) description of the application or
package. If unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app_description&quot; <br>
A longer description of the application or package. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;inspect-list-applications2&quot;
call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">inspect-list-applications2 <br>
inspect-list-applications2 root</p>

<p style="margin-top: 1em">Return the list of applications
installed in the operating system.</p>

<p style="margin-top: 1em">Note: This call works
differently from other parts of the inspection API. You have
to call &quot;inspect-os&quot;, then
&quot;inspect-get-mountpoints&quot;, then mount up the
disks, before calling <br>
this. Listing applications is a significantly more difficult
operation which requires access to the full filesystem. Also
note that unlike the other &quot;inspect-get-*&quot; calls
which <br>
are just returning data cached in the libguestfs handle,
this call actually reads parts of the mounted filesystems
during the call.</p>

<p style="margin-top: 1em">This returns an empty list if
the inspection code was not able to determine the list of
applications.</p>

<p style="margin-top: 1em">The application structure
contains the following fields:</p>

<p style="margin-top: 1em">&quot;app2_name&quot; <br>
The name of the application. For Red Hat-derived and
Debian-derived Linux guests, this is the package name.</p>

<p style="margin-top: 1em">&quot;app2_display_name&quot;
<br>
The display name of the application, sometimes localized to
the install language of the guest operating system.</p>

<p style="margin-top: 1em">If unavailable this is returned
as an empty string &quot;&quot;. Callers needing to display
something can use &quot;app2_name&quot; instead.</p>

<p style="margin-top: 1em">&quot;app2_epoch&quot; <br>
For package managers which use epochs, this contains the
epoch of the package (an integer). If unavailable, this is
returned as 0.</p>

<p style="margin-top: 1em">&quot;app2_version&quot; <br>
The version string of the application or package. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_release&quot; <br>
The release string of the application or package, for
package managers that use this. If unavailable this is
returned as an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_arch&quot; <br>
The architecture string of the application or package, for
package managers that use this. If unavailable this is
returned as an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_install_path&quot;
<br>
The installation path of the application (on operating
systems such as Windows which use installation paths). This
path is in the format used by the guest operating system,
<br>
it is not a libguestfs path.</p>

<p style="margin-top: 1em">If unavailable this is returned
as an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_trans_path&quot; <br>
The install path translated into a libguestfs path. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_publisher&quot; <br>
The name of the publisher of the application, for package
managers that use this. If unavailable this is returned as
an empty string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_url&quot; <br>
The URL (eg. upstream URL) of the application. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_source_package&quot;
<br>
For packaging systems which support this, the name of the
source package. If unavailable this is returned as an empty
string &quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_summary&quot; <br>
A short (usually one line) description of the application or
package. If unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">&quot;app2_description&quot;
<br>
A longer description of the application or package. If
unavailable this is returned as an empty string
&quot;&quot;.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">inspect-os <br>
inspect-os</p>

<p style="margin-top: 1em">This function uses other
libguestfs functions and certain heuristics to inspect the
disk(s) (usually disks belonging to a virtual machine),
looking for operating systems.</p>

<p style="margin-top: 1em">The list returned is empty if no
operating systems were found.</p>

<p style="margin-top: 1em">If one operating system was
found, then this returns a list with a single element, which
is the name of the root filesystem of this operating system.
It is also possible for <br>
this function to return a list containing more than one
element, indicating a dual-boot or multi-boot virtual
machine, with each element being the root filesystem of one
of the <br>
operating systems.</p>

<p style="margin-top: 1em">You can pass the root string(s)
returned to other &quot;inspect-get-*&quot; functions in
order to query further information about each operating
system, such as the name and version.</p>

<p style="margin-top: 1em">This function uses other
libguestfs features such as &quot;mount-ro&quot; and
&quot;umount-all&quot; in order to mount and unmount
filesystems and look at the contents. This should be called
with <br>
no disks currently mounted. The function may also use
Augeas, so any existing Augeas handle will be closed.</p>

<p style="margin-top: 1em">This function cannot decrypt
encrypted disks. The caller must do that first (supplying
the necessary keys) if the disk is encrypted.</p>

<p style="margin-top: 1em">Please read
&quot;INSPECTION&quot; in guestfs(3) for more details.</p>

<p style="margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>

<p style="margin-top: 1em">is-blockdev <br>
is-blockdev-opts <br>
is-blockdev path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a block device with the given
&quot;path&quot; name.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a block device also causes the
function to return true.</p>

<p style="margin-top: 1em">This call only looks at files
within the guest filesystem. Libguestfs partitions and block
devices (eg. /dev/sda) cannot be used as the
&quot;path&quot; parameter of this call.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-chardev <br>
is-chardev-opts <br>
is-chardev path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a character device with the given
&quot;path&quot; name.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a chardev also causes the
function to return true.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-config <br>
is-config</p>

<p style="margin-top: 1em">This returns true iff this
handle is being configured (in the &quot;CONFIG&quot;
state).</p>

<p style="margin-top: 1em">For more information on states,
see guestfs(3).</p>

<p style="margin-top: 1em">is-dir <br>
is-dir-opts <br>
is-dir path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a directory with the given
&quot;path&quot; name. Note that it returns false for other
objects like files.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a directory also causes the
function to return true.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-fifo <br>
is-fifo-opts <br>
is-fifo path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a FIFO (named pipe) with the given
&quot;path&quot; name.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a FIFO also causes the function
to return true.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-file <br>
is-file-opts <br>
is-file path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a regular file with the given
&quot;path&quot; name. Note that it returns false for other
objects like directories.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a file also causes the function
to return true.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-lv <br>
is-lv device</p>

<p style="margin-top: 1em">This command tests whether
&quot;device&quot; is a logical volume, and returns true iff
this is the case.</p>

<p style="margin-top: 1em">is-socket <br>
is-socket-opts <br>
is-socket path [followsymlinks:true|false]</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a Unix domain socket with the given
&quot;path&quot; name.</p>

<p style="margin-top: 1em">If the optional flag
&quot;followsymlinks&quot; is true, then a symlink (or chain
of symlinks) that ends with a socket also causes the
function to return true.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">is-symlink <br>
is-symlink path</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if there is a symbolic link with the given
&quot;path&quot; name.</p>

<p style="margin-top: 1em">See also &quot;stat&quot;.</p>

<p style="margin-top: 1em">is-whole-device <br>
is-whole-device device</p>

<p style="margin-top: 1em">This returns &quot;true&quot; if
and only if &quot;device&quot; refers to a whole block
device. That is, not a partition or a logical device.</p>

<p style="margin-top: 1em">is-zero <br>
is-zero path</p>

<p style="margin-top: 1em">This returns true iff the file
exists and the file is empty or it contains all zero
bytes.</p>

<p style="margin-top: 1em">is-zero-device <br>
is-zero-device device</p>

<p style="margin-top: 1em">This returns true iff the device
exists and contains all zero bytes.</p>

<p style="margin-top: 1em">Note that for large devices this
can take a long time to run.</p>

<p style="margin-top: 1em">isoinfo <br>
isoinfo isofile</p>

<p style="margin-top: 1em">This is the same as
&quot;isoinfo-device&quot; except that it works for an ISO
file located inside some other mounted filesystem. Note that
in the common case where you have added an ISO <br>
file as a libguestfs device, you would not call this.
Instead you would call &quot;isoinfo-device&quot;.</p>

<p style="margin-top: 1em">isoinfo-device <br>
isoinfo-device device</p>

<p style="margin-top: 1em">&quot;device&quot; is an ISO
device. This returns a struct of information read from the
primary volume descriptor (the ISO equivalent of the
superblock) of the device.</p>

<p style="margin-top: 1em">Usually it is more efficient to
use the isoinfo(1) command with the -d option on the host to
analyze ISO files, instead of going through libguestfs.</p>

<p style="margin-top: 1em">For information on the primary
volume descriptor fields, see
http://wiki.osdev.org/ISO_9660#The_Primary_Volume_Descriptor</p>

<p style="margin-top: 1em">journal-close <br>
journal-close</p>

<p style="margin-top: 1em">Close the journal handle.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-get <br>
journal-get</p>

<p style="margin-top: 1em">Read the current journal entry.
This returns all the fields in the journal as a set of
&quot;(attrname, attrval)&quot; pairs. The
&quot;attrname&quot; is the field name (a string).</p>

<p style="margin-top: 1em">The &quot;attrval&quot; is the
field value (a binary blob, often but not always a string).
Please note that &quot;attrval&quot; is a byte array, not a
-terminated C string.</p>

<p style="margin-top: 1em">The length of data may be
truncated to the data threshold (see:
&quot;journal-set-data-threshold&quot;,
&quot;journal-get-data-threshold&quot;).</p>

<p style="margin-top: 1em">If you set the data threshold to
unlimited (0) then this call can read a journal entry of any
size, ie. it is not limited by the libguestfs protocol.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-get-data-threshold <br>
journal-get-data-threshold</p>

<p style="margin-top: 1em">Get the current data threshold
for reading journal entries. This is a hint to the journal
that it may truncate data fields to this size when reading
them (note also that it may <br>
not truncate them). If this returns 0, then the threshold is
unlimited.</p>

<p style="margin-top: 1em">See also
&quot;journal-set-data-threshold&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-get-realtime-usec <br>
journal-get-realtime-usec</p>

<p style="margin-top: 1em">Get the realtime (wallclock)
timestamp of the current journal entry.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-next <br>
journal-next</p>

<p style="margin-top: 1em">Move to the next journal entry.
You have to call this at least once after opening the handle
before you are able to read data.</p>

<p style="margin-top: 1em">The returned boolean tells you
if there are any more journal records to read.
&quot;true&quot; means you can read the next record (eg.
using &quot;journal-get&quot;), and &quot;false&quot; means
you have <br>
reached the end of the journal.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-open <br>
journal-open directory</p>

<p style="margin-top: 1em">Open the systemd journal located
in directory. Any previously opened journal handle is
closed.</p>

<p style="margin-top: 1em">The contents of the journal can
be read using &quot;journal-next&quot; and
&quot;journal-get&quot;.</p>

<p style="margin-top: 1em">After you have finished using
the journal, you should close the handle by calling
&quot;journal-close&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-set-data-threshold <br>
journal-set-data-threshold threshold</p>

<p style="margin-top: 1em">Set the data threshold for
reading journal entries. This is a hint to the journal that
it may truncate data fields to this size when reading them
(note also that it may not <br>
truncate them). If you set this to 0, then the threshold is
unlimited.</p>

<p style="margin-top: 1em">See also
&quot;journal-get-data-threshold&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">journal-skip <br>
journal-skip skip</p>

<p style="margin-top: 1em">Skip forwards (&quot;skip
&acirc;&yen; 0&quot;) or backwards (&quot;skip &lt; 0&quot;)
in the journal.</p>

<p style="margin-top: 1em">The number of entries actually
skipped is returned (note
&quot;rskip&Acirc;&nbsp;&acirc;&yen;&Acirc;&nbsp;0&quot;).
If this is not the same as the absolute value of the skip
parameter (&quot;|skip|&quot;) you passed in then it means
<br>
you have reached the end or the start of the journal.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;journal&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">kill-subprocess <br>
kill-subprocess</p>

<p style="margin-top: 1em">This kills the hypervisor.</p>

<p style="margin-top: 1em">Do not call this. See:
&quot;shutdown&quot; instead.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;shutdown&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">launch <br>
run <br>
launch</p>

<p style="margin-top: 1em">You should call this after
configuring the handle (eg. adding drives) but before
performing any actions.</p>

<p style="margin-top: 1em">Do not call &quot;launch&quot;
twice on the same handle. Although it will not give an error
(for historical reasons), the precise behaviour when you do
this is not well defined. Handles <br>
are very cheap to create, so create a new one for each
launch.</p>

<p style="margin-top: 1em">lchown <br>
lchown owner group path</p>

<p style="margin-top: 1em">Change the file owner to
&quot;owner&quot; and group to &quot;group&quot;. This is
like &quot;chown&quot; but if &quot;path&quot; is a symlink
then the link itself is changed, not the target.</p>

<p style="margin-top: 1em">Only numeric uid and gid are
supported. If you want to use names, you will need to locate
and parse the password file yourself (Augeas support makes
this relatively easy).</p>

<p style="margin-top: 1em">ldmtool-create-all <br>
ldmtool-create-all</p>

<p style="margin-top: 1em">This function scans all block
devices looking for Windows dynamic disk volumes and
partitions, and creates devices for any that were found.</p>

<p style="margin-top: 1em">Call
&quot;list-ldm-volumes&quot; and
&quot;list-ldm-partitions&quot; to return all devices.</p>

<p style="margin-top: 1em">Note that you don&rsquo;t
normally need to call this explicitly, since it is done
automatically at &quot;launch&quot; time. However you might
want to call this function if you have hotplugged <br>
disks or have just created a Windows dynamic disk.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-diskgroup-disks <br>
ldmtool-diskgroup-disks diskgroup</p>

<p style="margin-top: 1em">Return the disks in a Windows
dynamic disk group. The &quot;diskgroup&quot; parameter
should be the GUID of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-diskgroup-name <br>
ldmtool-diskgroup-name diskgroup</p>

<p style="margin-top: 1em">Return the name of a Windows
dynamic disk group. The &quot;diskgroup&quot; parameter
should be the GUID of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-diskgroup-volumes <br>
ldmtool-diskgroup-volumes diskgroup</p>

<p style="margin-top: 1em">Return the volumes in a Windows
dynamic disk group. The &quot;diskgroup&quot; parameter
should be the GUID of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-remove-all <br>
ldmtool-remove-all</p>

<p style="margin-top: 1em">This is essentially the opposite
of &quot;ldmtool-create-all&quot;. It removes the device
mapper mappings for all Windows dynamic disk volumes</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-scan <br>
ldmtool-scan</p>

<p style="margin-top: 1em">This function scans for Windows
dynamic disks. It returns a list of identifiers (GUIDs) for
all disk groups that were found. These identifiers can be
passed to other <br>
&quot;ldmtool-*&quot; functions.</p>

<p style="margin-top: 1em">This function scans all block
devices. To scan a subset of block devices, call
&quot;ldmtool-scan-devices&quot; instead.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-scan-devices <br>
ldmtool-scan-devices &rsquo;devices ...&rsquo;</p>

<p style="margin-top: 1em">This function scans for Windows
dynamic disks. It returns a list of identifiers (GUIDs) for
all disk groups that were found. These identifiers can be
passed to other <br>
&quot;ldmtool-*&quot; functions.</p>

<p style="margin-top: 1em">The parameter
&quot;devices&quot; is a list of block devices which are
scanned. If this list is empty, all block devices are
scanned.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-volume-hint <br>
ldmtool-volume-hint diskgroup volume</p>

<p style="margin-top: 1em">Return the hint field of the
volume named &quot;volume&quot; in the disk group with GUID
&quot;diskgroup&quot;. This may not be defined, in which
case the empty string is returned. The hint field <br>
is often, though not always, the name of a Windows drive,
eg. &quot;E:&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-volume-partitions <br>
ldmtool-volume-partitions diskgroup volume</p>

<p style="margin-top: 1em">Return the list of partitions in
the volume named &quot;volume&quot; in the disk group with
GUID &quot;diskgroup&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ldmtool-volume-type <br>
ldmtool-volume-type diskgroup volume</p>

<p style="margin-top: 1em">Return the type of the volume
named &quot;volume&quot; in the disk group with GUID
&quot;diskgroup&quot;.</p>

<p style="margin-top: 1em">Possible volume types that can
be returned here include: &quot;simple&quot;,
&quot;spanned&quot;, &quot;striped&quot;,
&quot;mirrored&quot;, &quot;raid5&quot;. Other types may
also be returned.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lgetxattr <br>
lgetxattr path name</p>

<p style="margin-top: 1em">Get a single extended attribute
from file &quot;path&quot; named &quot;name&quot;. If
&quot;path&quot; is a symlink, then this call returns an
extended attribute from the symlink.</p>

<p style="margin-top: 1em">Normally it is better to get all
extended attributes from a file in one go by calling
&quot;getxattrs&quot;. However some Linux filesystem
implementations are buggy and do not provide a <br>
way to list out attributes. For these filesystems (notably
ntfs-3g) you have to know the names of the extended
attributes you want in advance and call this function.</p>

<p style="margin-top: 1em">Extended attribute values are
blobs of binary data. If there is no extended attribute
named &quot;name&quot;, this returns an error.</p>

<p style="margin-top: 1em">See also:
&quot;lgetxattrs&quot;, &quot;getxattr&quot;, attr(5).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lgetxattrs <br>
lgetxattrs path</p>

<p style="margin-top: 1em">This is the same as
&quot;getxattrs&quot;, but if &quot;path&quot; is a symbolic
link, then it returns the extended attributes of the link
itself.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">list-devices <br>
list-devices</p>

<p style="margin-top: 1em">List all the block devices.</p>

<p style="margin-top: 1em">The full block device names are
returned, eg. /dev/sda.</p>

<p style="margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>

<p style="margin-top: 1em">list-disk-labels <br>
list-disk-labels</p>

<p style="margin-top: 1em">If you add drives using the
optional &quot;label&quot; parameter of
&quot;add-drive-opts&quot;, you can use this call to map
between disk labels, and raw block device and partition
names (like <br>
/dev/sda and /dev/sda1).</p>

<p style="margin-top: 1em">This returns a hashtable, where
keys are the disk labels (without the /dev/disk/guestfs
prefix), and the values are the full raw block device and
partition names (eg. /dev/sda <br>
and /dev/sda1).</p>

<p style="margin-top: 1em">list-dm-devices <br>
list-dm-devices</p>

<p style="margin-top: 1em">List all device mapper
devices.</p>

<p style="margin-top: 1em">The returned list contains
/dev/mapper/* devices, eg. ones created by a previous call
to &quot;luks-open&quot;.</p>

<p style="margin-top: 1em">Device mapper devices which
correspond to logical volumes are not returned in this list.
Call &quot;lvs&quot; if you want to list logical
volumes.</p>

<p style="margin-top: 1em">list-filesystems <br>
list-filesystems</p>

<p style="margin-top: 1em">This inspection command looks
for filesystems on partitions, block devices and logical
volumes, returning a list of &quot;mountables&quot;
containing filesystems and their type.</p>

<p style="margin-top: 1em">The return value is a hash,
where the keys are the devices containing filesystems, and
the values are the filesystem types. For example:</p>

<p style="margin-top: 1em">&quot;/dev/sda1&quot; =&gt;
&quot;ntfs&quot; <br>
&quot;/dev/sda2&quot; =&gt; &quot;ext2&quot; <br>
&quot;/dev/vg_guest/lv_root&quot; =&gt; &quot;ext4&quot;
<br>
&quot;/dev/vg_guest/lv_swap&quot; =&gt; &quot;swap&quot;</p>

<p style="margin-top: 1em">The key is not necessarily a
block device. It may also be an opaque
&rsquo;mountable&rsquo; string which can be passed to
&quot;mount&quot;.</p>

<p style="margin-top: 1em">The value can have the special
value &quot;unknown&quot;, meaning the content of the device
is undetermined or empty. &quot;swap&quot; means a Linux
swap partition.</p>

<p style="margin-top: 1em">This command runs other
libguestfs commands, which might include &quot;mount&quot;
and &quot;umount&quot;, and therefore you should use this
soon after launch and only when nothing is mounted.</p>

<p style="margin-top: 1em">Not all of the filesystems
returned will be mountable. In particular, swap partitions
are returned in the list. Also this command does not check
that each filesystem found is <br>
valid and mountable, and some filesystems might be mountable
but require special options. Filesystems may not all belong
to a single logical operating system (use
&quot;inspect-os&quot; <br>
to look for OSes).</p>

<p style="margin-top: 1em">list-ldm-partitions <br>
list-ldm-partitions</p>

<p style="margin-top: 1em">This function returns all
Windows dynamic disk partitions that were found at launch
time. It returns a list of device names.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">list-ldm-volumes <br>
list-ldm-volumes</p>

<p style="margin-top: 1em">This function returns all
Windows dynamic disk volumes that were found at launch time.
It returns a list of device names.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ldm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">list-md-devices <br>
list-md-devices</p>

<p style="margin-top: 1em">List all Linux md devices.</p>

<p style="margin-top: 1em">list-partitions <br>
list-partitions</p>

<p style="margin-top: 1em">List all the partitions detected
on all block devices.</p>

<p style="margin-top: 1em">The full partition device names
are returned, eg. /dev/sda1</p>

<p style="margin-top: 1em">This does not return logical
volumes. For that you will need to call &quot;lvs&quot;.</p>

<p style="margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>

<p style="margin-top: 1em">ll <br>
ll directory</p>

<p style="margin-top: 1em">List the files in directory
(relative to the root directory, there is no cwd) in the
format of &rsquo;ls -la&rsquo;.</p>

<p style="margin-top: 1em">This command is mostly useful
for interactive sessions. It is not intended that you try to
parse the output string.</p>

<p style="margin-top: 1em">llz <br>
llz directory</p>

<p style="margin-top: 1em">List the files in directory in
the format of &rsquo;ls -laZ&rsquo;.</p>

<p style="margin-top: 1em">This command is mostly useful
for interactive sessions. It is not intended that you try to
parse the output string.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;lgetxattrs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">ln <br>
ln target linkname</p>

<p style="margin-top: 1em">This command creates a hard link
using the &quot;ln&quot; command.</p>

<p style="margin-top: 1em">ln-f <br>
ln-f target linkname</p>

<p style="margin-top: 1em">This command creates a hard link
using the &quot;ln -f&quot; command. The -f option removes
the link (&quot;linkname&quot;) if it exists already.</p>

<p style="margin-top: 1em">ln-s <br>
ln-s target linkname</p>

<p style="margin-top: 1em">This command creates a symbolic
link using the &quot;ln -s&quot; command.</p>

<p style="margin-top: 1em">ln-sf <br>
ln-sf target linkname</p>

<p style="margin-top: 1em">This command creates a symbolic
link using the &quot;ln -sf&quot; command, The -f option
removes the link (&quot;linkname&quot;) if it exists
already.</p>

<p style="margin-top: 1em">lremovexattr <br>
lremovexattr xattr path</p>

<p style="margin-top: 1em">This is the same as
&quot;removexattr&quot;, but if &quot;path&quot; is a
symbolic link, then it removes an extended attribute of the
link itself.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ls <br>
ls directory</p>

<p style="margin-top: 1em">List the files in directory
(relative to the root directory, there is no cwd). The
&rsquo;.&rsquo; and &rsquo;..&rsquo; entries are not
returned, but hidden files are shown.</p>

<p style="margin-top: 1em">ls0 <br>
ls0 dir (filenames|-)</p>

<p style="margin-top: 1em">This specialized command is used
to get a listing of the filenames in the directory
&quot;dir&quot;. The list of filenames is written to the
local file filenames (on the host).</p>

<p style="margin-top: 1em">In the output file, the
filenames are separated by &quot; &quot; characters.</p>

<p style="margin-top: 1em">&quot;.&quot; and &quot;..&quot;
are not returned. The filenames are not sorted.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">lsetxattr <br>
lsetxattr xattr val vallen path</p>

<p style="margin-top: 1em">This is the same as
&quot;setxattr&quot;, but if &quot;path&quot; is a symbolic
link, then it sets an extended attribute of the link
itself.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lstat <br>
lstat path</p>

<p style="margin-top: 1em">Returns file information for the
given &quot;path&quot;.</p>

<p style="margin-top: 1em">This is the same as
&quot;stat&quot; except that if &quot;path&quot; is a
symbolic link, then the link is stat-ed, not the file it
refers to.</p>

<p style="margin-top: 1em">This is the same as the lstat(2)
system call.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;lstatns&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">lstatlist <br>
lstatlist path &rsquo;names ...&rsquo;</p>

<p style="margin-top: 1em">This call allows you to perform
the &quot;lstat&quot; operation on multiple files, where all
files are in the directory &quot;path&quot;.
&quot;names&quot; is the list of files from this
directory.</p>

<p style="margin-top: 1em">On return you get a list of stat
structs, with a one-to-one correspondence to the
&quot;names&quot; list. If any name did not exist or could
not be lstat&rsquo;d, then the &quot;st_ino&quot; field of
<br>
that structure is set to &quot;-1&quot;.</p>

<p style="margin-top: 1em">This call is intended for
programs that want to efficiently list a directory contents
without making many round-trips. See also
&quot;lxattrlist&quot; for a similarly efficient call for
<br>
getting extended attributes.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;lstatnslist&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">lstatns <br>
lstatns path</p>

<p style="margin-top: 1em">Returns file information for the
given &quot;path&quot;.</p>

<p style="margin-top: 1em">This is the same as
&quot;statns&quot; except that if &quot;path&quot; is a
symbolic link, then the link is stat-ed, not the file it
refers to.</p>

<p style="margin-top: 1em">This is the same as the lstat(2)
system call.</p>

<p style="margin-top: 1em">lstatnslist <br>
lstatnslist path &rsquo;names ...&rsquo;</p>

<p style="margin-top: 1em">This call allows you to perform
the &quot;lstatns&quot; operation on multiple files, where
all files are in the directory &quot;path&quot;.
&quot;names&quot; is the list of files from this
directory.</p>

<p style="margin-top: 1em">On return you get a list of stat
structs, with a one-to-one correspondence to the
&quot;names&quot; list. If any name did not exist or could
not be lstat&rsquo;d, then the &quot;st_ino&quot; field of
<br>
that structure is set to &quot;-1&quot;.</p>

<p style="margin-top: 1em">This call is intended for
programs that want to efficiently list a directory contents
without making many round-trips. See also
&quot;lxattrlist&quot; for a similarly efficient call for
<br>
getting extended attributes.</p>

<p style="margin-top: 1em">luks-add-key <br>
luks-add-key device keyslot</p>

<p style="margin-top: 1em">This command adds a new key on
LUKS device &quot;device&quot;. &quot;key&quot; is any
existing key, and is used to access the device.
&quot;newkey&quot; is the new key to add.
&quot;keyslot&quot; is the key slot <br>
that will be replaced.</p>

<p style="margin-top: 1em">Note that if &quot;keyslot&quot;
already contains a key, then this command will fail. You
have to use &quot;luks-kill-slot&quot; first to remove that
key.</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-close <br>
luks-close device</p>

<p style="margin-top: 1em">This closes a LUKS device that
was created earlier by &quot;luks-open&quot; or
&quot;luks-open-ro&quot;. The &quot;device&quot; parameter
must be the name of the LUKS mapping device (ie.
/dev/mapper/mapname) <br>
and not the name of the underlying block device.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-format <br>
luks-format device keyslot</p>

<p style="margin-top: 1em">This command erases existing
data on &quot;device&quot; and formats the device as a LUKS
encrypted device. &quot;key&quot; is the initial key, which
is added to key slot &quot;slot&quot;. (LUKS supports 8 <br>
key slots, numbered 0-7).</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-format-cipher <br>
luks-format-cipher device keyslot cipher</p>

<p style="margin-top: 1em">This command is the same as
&quot;luks-format&quot; but it also allows you to set the
&quot;cipher&quot; used.</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-kill-slot <br>
luks-kill-slot device keyslot</p>

<p style="margin-top: 1em">This command deletes the key in
key slot &quot;keyslot&quot; from the encrypted LUKS device
&quot;device&quot;. &quot;key&quot; must be one of the other
keys.</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-open <br>
luks-open device mapname</p>

<p style="margin-top: 1em">This command opens a block
device which has been encrypted according to the Linux
Unified Key Setup (LUKS) standard.</p>

<p style="margin-top: 1em">&quot;device&quot; is the
encrypted block device or partition.</p>

<p style="margin-top: 1em">The caller must supply one of
the keys associated with the LUKS block device, in the
&quot;key&quot; parameter.</p>

<p style="margin-top: 1em">This creates a new block device
called /dev/mapper/mapname. Reads and writes to this block
device are decrypted from and encrypted to the underlying
&quot;device&quot; respectively.</p>

<p style="margin-top: 1em">If this block device contains
LVM volume groups, then calling &quot;vgscan&quot; followed
by &quot;vg-activate-all&quot; will make them visible.</p>

<p style="margin-top: 1em">Use &quot;list-dm-devices&quot;
to list all device mapper devices.</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">luks-open-ro <br>
luks-open-ro device mapname</p>

<p style="margin-top: 1em">This is the same as
&quot;luks-open&quot; except that a read-only mapping is
created.</p>

<p style="margin-top: 1em">This command has one or more key
or passphrase parameters. Guestfish will prompt for these
separately.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;luks&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvcreate <br>
lvcreate logvol volgroup mbytes</p>

<p style="margin-top: 1em">This creates an LVM logical
volume called &quot;logvol&quot; on the volume group
&quot;volgroup&quot;, with &quot;size&quot; megabytes.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvcreate-free <br>
lvcreate-free logvol volgroup percent</p>

<p style="margin-top: 1em">Create an LVM logical volume
called /dev/volgroup/logvol, using approximately
&quot;percent&quot; % of the free space remaining in the
volume group. Most usefully, when &quot;percent&quot; is 100
<br>
this will create the largest possible LV.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvm-canonical-lv-name <br>
lvm-canonical-lv-name lvname</p>

<p style="margin-top: 1em">This converts alternative naming
schemes for LVs that you might find to the canonical name.
For example, /dev/mapper/VG-LV is converted to
/dev/VG/LV.</p>

<p style="margin-top: 1em">This command returns an error if
the &quot;lvname&quot; parameter does not refer to a logical
volume.</p>

<p style="margin-top: 1em">See also &quot;is-lv&quot;,
&quot;canonical-device-name&quot;.</p>

<p style="margin-top: 1em">lvm-clear-filter <br>
lvm-clear-filter</p>

<p style="margin-top: 1em">This undoes the effect of
&quot;lvm-set-filter&quot;. LVM will be able to see every
block device.</p>

<p style="margin-top: 1em">This command also clears the LVM
cache and performs a volume group scan.</p>

<p style="margin-top: 1em">lvm-remove-all <br>
lvm-remove-all</p>

<p style="margin-top: 1em">This command removes all LVM
logical volumes, volume groups and physical volumes.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvm-set-filter <br>
lvm-set-filter &rsquo;devices ...&rsquo;</p>

<p style="margin-top: 1em">This sets the LVM device filter
so that LVM will only be able to &quot;see&quot; the block
devices in the list &quot;devices&quot;, and will ignore all
other attached block devices.</p>

<p style="margin-top: 1em">Where disk image(s) contain
duplicate PVs or VGs, this command is useful to get LVM to
ignore the duplicates, otherwise LVM can get confused. Note
also there are two types of <br>
duplication possible: either cloned PVs/VGs which have
identical UUIDs; or VGs that are not cloned but just happen
to have the same name. In normal operation you cannot create
<br>
this situation, but you can do it outside LVM, eg. by
cloning disk images or by bit twiddling inside the LVM
metadata.</p>

<p style="margin-top: 1em">This command also clears the LVM
cache and performs a volume group scan.</p>

<p style="margin-top: 1em">You can filter whole block
devices or individual partitions.</p>

<p style="margin-top: 1em">You cannot use this if any VG is
currently in use (eg. contains a mounted filesystem), even
if you are not filtering out that VG.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvremove <br>
lvremove device</p>

<p style="margin-top: 1em">Remove an LVM logical volume
&quot;device&quot;, where &quot;device&quot; is the path to
the LV, such as /dev/VG/LV.</p>

<p style="margin-top: 1em">You can also remove all LVs in a
volume group by specifying the VG name, /dev/VG.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvrename <br>
lvrename logvol newlogvol</p>

<p style="margin-top: 1em">Rename a logical volume
&quot;logvol&quot; with the new name
&quot;newlogvol&quot;.</p>

<p style="margin-top: 1em">lvresize <br>
lvresize device mbytes</p>

<p style="margin-top: 1em">This resizes (expands or
shrinks) an existing LVM logical volume to
&quot;mbytes&quot;. When reducing, data in the reduced part
is lost.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvresize-free <br>
lvresize-free lv percent</p>

<p style="margin-top: 1em">This expands an existing logical
volume &quot;lv&quot; so that it fills &quot;pc&quot;% of
the remaining free space in the volume group. Commonly you
would call this with pc = 100 which expands the <br>
logical volume as much as possible, using all remaining free
space in the volume group.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvs <br>
lvs</p>

<p style="margin-top: 1em">List all the logical volumes
detected. This is the equivalent of the lvs(8) command.</p>

<p style="margin-top: 1em">This returns a list of the
logical volume device names (eg.
/dev/VolGroup00/LogVol00).</p>

<p style="margin-top: 1em">See also &quot;lvs-full&quot;,
&quot;list-filesystems&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvs-full <br>
lvs-full</p>

<p style="margin-top: 1em">List all the logical volumes
detected. This is the equivalent of the lvs(8) command. The
&quot;full&quot; version includes all fields.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">lvuuid <br>
lvuuid device</p>

<p style="margin-top: 1em">This command returns the UUID of
the LVM LV &quot;device&quot;.</p>

<p style="margin-top: 1em">lxattrlist <br>
lxattrlist path &rsquo;names ...&rsquo;</p>

<p style="margin-top: 1em">This call allows you to get the
extended attributes of multiple files, where all files are
in the directory &quot;path&quot;. &quot;names&quot; is the
list of files from this directory.</p>

<p style="margin-top: 1em">On return you get a flat list of
xattr structs which must be interpreted sequentially. The
first xattr struct always has a zero-length
&quot;attrname&quot;. &quot;attrval&quot; in this struct is
<br>
zero-length to indicate there was an error doing
&quot;lgetxattr&quot; for this file, or is a C string which
is a decimal number (the number of following attributes for
this file, which <br>
could be &quot;0&quot;). Then after the first xattr struct
are the zero or more attributes for the first named file.
This repeats for the second and subsequent files.</p>

<p style="margin-top: 1em">This call is intended for
programs that want to efficiently list a directory contents
without making many round-trips. See also
&quot;lstatlist&quot; for a similarly efficient call for
<br>
getting standard stats.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">max-disks <br>
max-disks</p>

<p style="margin-top: 1em">Return the maximum number of
disks that may be added to a handle (eg. by
&quot;add-drive-opts&quot; and similar calls).</p>

<p style="margin-top: 1em">This function was added in
libguestfs 1.19.7. In previous versions of libguestfs the
limit was 25.</p>

<p style="margin-top: 1em">See &quot;MAXIMUM NUMBER OF
DISKS&quot; in guestfs(3) for additional information on this
topic.</p>

<p style="margin-top: 1em">md-create <br>
md-create name &rsquo;devices ...&rsquo; [missingbitmap:N]
[nrdevices:N] [spare:N] [chunk:N] [level:..]</p>

<p style="margin-top: 1em">Create a Linux md (RAID) device
named &quot;name&quot; on the devices in the list
&quot;devices&quot;.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">&quot;missingbitmap&quot; <br>
A bitmap of missing devices. If a bit is set it means that a
missing device is added to the array. The least significant
bit corresponds to the first device in the array.</p>

<p style="margin-top: 1em">As examples:</p>

<p style="margin-top: 1em">If &quot;devices =
[&quot;/dev/sda&quot;]&quot; and &quot;missingbitmap =
0x1&quot; then the resulting array would be
&quot;[&lt;missing&gt;, &quot;/dev/sda&quot;]&quot;.</p>

<p style="margin-top: 1em">If &quot;devices =
[&quot;/dev/sda&quot;]&quot; and &quot;missingbitmap =
0x2&quot; then the resulting array would be
&quot;[&quot;/dev/sda&quot;, &lt;missing&gt;]&quot;.</p>

<p style="margin-top: 1em">This defaults to 0 (no missing
devices).</p>

<p style="margin-top: 1em">The length of
&quot;devices&quot; + the number of bits set in
&quot;missingbitmap&quot; must equal &quot;nrdevices&quot; +
&quot;spare&quot;.</p>

<p style="margin-top: 1em">&quot;nrdevices&quot; <br>
The number of active RAID devices.</p>

<p style="margin-top: 1em">If not set, this defaults to the
length of &quot;devices&quot; plus the number of bits set in
&quot;missingbitmap&quot;.</p>

<p style="margin-top: 1em">&quot;spare&quot; <br>
The number of spare devices.</p>

<p style="margin-top: 1em">If not set, this defaults to
0.</p>

<p style="margin-top: 1em">&quot;chunk&quot; <br>
The chunk size in bytes.</p>

<p style="margin-top: 1em">&quot;level&quot; <br>
The RAID level, which can be one of: linear, raid0, 0,
stripe, raid1, 1, mirror, raid4, 4, raid5, 5, raid6, 6,
raid10, 10. Some of these are synonymous, and more levels
may <br>
be added in future.</p>

<p style="margin-top: 1em">If not set, this defaults to
&quot;raid1&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mdadm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">md-detail <br>
md-detail md</p>

<p style="margin-top: 1em">This command exposes the output
of &rsquo;mdadm -DY &lt;md&gt;&rsquo;. The following fields
are usually present in the returned hash. Other fields may
also be present.</p>

<p style="margin-top: 1em">&quot;level&quot; <br>
The raid level of the MD device.</p>

<p style="margin-top: 1em">&quot;devices&quot; <br>
The number of underlying devices in the MD device.</p>

<p style="margin-top: 1em">&quot;metadata&quot; <br>
The metadata version used.</p>

<p style="margin-top: 1em">&quot;uuid&quot; <br>
The UUID of the MD device.</p>

<p style="margin-top: 1em">&quot;name&quot; <br>
The name of the MD device.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mdadm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">md-stat <br>
md-stat md</p>

<p style="margin-top: 1em">This call returns a list of the
underlying devices which make up the single software RAID
array device &quot;md&quot;.</p>

<p style="margin-top: 1em">To get a list of software RAID
devices, call &quot;list-md-devices&quot;.</p>

<p style="margin-top: 1em">Each structure returned
corresponds to one device along with additional status
information:</p>

<p style="margin-top: 1em">&quot;mdstat_device&quot; <br>
The name of the underlying device.</p>

<p style="margin-top: 1em">&quot;mdstat_index&quot; <br>
The index of this device within the array.</p>

<p style="margin-top: 1em">&quot;mdstat_flags&quot; <br>
Flags associated with this device. This is a string
containing (in no specific order) zero or more of the
following flags:</p>

<p style="margin-top: 1em">&quot;W&quot; write-mostly</p>

<p style="margin-top: 1em">&quot;F&quot; device is
faulty</p>

<p style="margin-top: 1em">&quot;S&quot; device is a RAID
spare</p>

<p style="margin-top: 1em">&quot;R&quot; replacement</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mdadm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">md-stop <br>
md-stop md</p>

<p style="margin-top: 1em">This command deactivates the MD
array named &quot;md&quot;. The device is stopped, but it is
not destroyed or zeroed.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mdadm&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mkdir <br>
mkdir path</p>

<p style="margin-top: 1em">Create a directory named
&quot;path&quot;.</p>

<p style="margin-top: 1em">mkdir-mode <br>
mkdir-mode path mode</p>

<p style="margin-top: 1em">This command creates a
directory, setting the initial permissions of the directory
to &quot;mode&quot;.</p>

<p style="margin-top: 1em">For common Linux filesystems,
the actual mode which is set will be &quot;mode &amp; ~umask
&amp; 01777&quot;. Non-native-Linux filesystems may
interpret the mode in other ways.</p>

<p style="margin-top: 1em">See also &quot;mkdir&quot;,
&quot;umask&quot;</p>

<p style="margin-top: 1em">mkdir-p <br>
mkdir-p path</p>

<p style="margin-top: 1em">Create a directory named
&quot;path&quot;, creating any parent directories as
necessary. This is like the &quot;mkdir -p&quot; shell
command.</p>

<p style="margin-top: 1em">mkdtemp <br>
mkdtemp tmpl</p>

<p style="margin-top: 1em">This command creates a temporary
directory. The &quot;tmpl&quot; parameter should be a full
pathname for the temporary directory name with the final six
characters being &quot;XXXXXX&quot;.</p>

<p style="margin-top: 1em">For example:
&quot;/tmp/myprogXXXXXX&quot; or
&quot;/Temp/myprogXXXXXX&quot;, the second one being
suitable for Windows filesystems.</p>

<p style="margin-top: 1em">The name of the temporary
directory that was created is returned.</p>

<p style="margin-top: 1em">The temporary directory is
created with mode 0700 and is owned by root.</p>

<p style="margin-top: 1em">The caller is responsible for
deleting the temporary directory and its contents after
use.</p>

<p style="margin-top: 1em">See also: mkdtemp(3)</p>

<p style="margin-top: 1em">mke2fs <br>
mke2fs device [blockscount:N] [blocksize:N] [fragsize:N]
[blockspergroup:N] [numberofgroups:N] [bytesperinode:N]
[inodesize:N] [journalsize:N] [numberofinodes:N]
[stridesize:N] [stripewidth:N] [maxonlineresize:N]
[reservedblockspercentage:N] [mmpupdateinterval:N]
[journaldevice:..] [label:..] [lastmounteddir:..]
[creatoros:..] [fstype:..] [usagetype:..] [uuid:..]
[forcecreate:true|false] [writesbandgrouponly:true|false]
[lazyitableinit:true|false] [lazyjournalinit:true|false]
[testfs:true|false] [discard:true|false]
[quotatype:true|false] [extent:true|false]
[filetype:true|false] [flexbg:true|false]
[hasjournal:true|false] [journaldev:true|false]
[largefile:true|false] [quota:true|false]
[resizeinode:true|false] [sparsesuper:true|false]
[uninitbg:true|false]</p>

<p style="margin-top: 1em">&quot;mke2fs&quot; is used to
create an ext2, ext3, or ext4 filesystem on
&quot;device&quot;.</p>

<p style="margin-top: 1em">The optional
&quot;blockscount&quot; is the size of the filesystem in
blocks. If omitted it defaults to the size of
&quot;device&quot;. Note if the filesystem is too small to
contain a journal, <br>
&quot;mke2fs&quot; will silently create an ext2 filesystem
instead.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">mke2fs-J <br>
mke2fs-J fstype blocksize device journal</p>

<p style="margin-top: 1em">This creates an ext2/3/4
filesystem on &quot;device&quot; with an external journal on
&quot;journal&quot;. It is equivalent to the command:</p>

<p style="margin-top: 1em">mke2fs -t fstype -b blocksize -J
device=&lt;journal&gt; &lt;device&gt;</p>

<p style="margin-top: 1em">See also
&quot;mke2journal&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mke2fs-JL <br>
mke2fs-JL fstype blocksize device label</p>

<p style="margin-top: 1em">This creates an ext2/3/4
filesystem on &quot;device&quot; with an external journal on
the journal labeled &quot;label&quot;.</p>

<p style="margin-top: 1em">See also
&quot;mke2journal-L&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mke2fs-JU <br>
mke2fs-JU fstype blocksize device uuid</p>

<p style="margin-top: 1em">This creates an ext2/3/4
filesystem on &quot;device&quot; with an external journal on
the journal with UUID &quot;uuid&quot;.</p>

<p style="margin-top: 1em">See also
&quot;mke2journal-U&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxfsuuid&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mke2journal <br>
mke2journal blocksize device</p>

<p style="margin-top: 1em">This creates an ext2 external
journal on &quot;device&quot;. It is equivalent to the
command:</p>

<p style="margin-top: 1em">mke2fs -O journal_dev -b
blocksize device</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mke2journal-L <br>
mke2journal-L blocksize label device</p>

<p style="margin-top: 1em">This creates an ext2 external
journal on &quot;device&quot; with label
&quot;label&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mke2journal-U <br>
mke2journal-U blocksize uuid device</p>

<p style="margin-top: 1em">This creates an ext2 external
journal on &quot;device&quot; with UUID
&quot;uuid&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mke2fs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxfsuuid&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mkfifo <br>
mkfifo mode path</p>

<p style="margin-top: 1em">This call creates a FIFO (named
pipe) called &quot;path&quot; with mode &quot;mode&quot;. It
is just a convenient wrapper around &quot;mknod&quot;.</p>

<p style="margin-top: 1em">Unlike with &quot;mknod&quot;,
&quot;mode&quot; must contain only permissions bits.</p>

<p style="margin-top: 1em">The mode actually set is
affected by the umask.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mknod&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mkfs <br>
mkfs-opts <br>
mkfs fstype device [blocksize:N] [features:..] [inode:N]
[sectorsize:N] [label:..]</p>

<p style="margin-top: 1em">This function creates a
filesystem on &quot;device&quot;. The filesystem type is
&quot;fstype&quot;, for example &quot;ext3&quot;.</p>

<p style="margin-top: 1em">The optional arguments are:</p>

<p style="margin-top: 1em">&quot;blocksize&quot; <br>
The filesystem block size. Supported block sizes depend on
the filesystem type, but typically they are 1024, 2048 or
4096 for Linux ext2/3 filesystems.</p>

<p style="margin-top: 1em">For VFAT and NTFS the
&quot;blocksize&quot; parameter is treated as the requested
cluster size.</p>

<p style="margin-top: 1em">For UFS block sizes, please see
mkfs.ufs(8).</p>

<p style="margin-top: 1em">&quot;features&quot; <br>
This passes the -O parameter to the external mkfs
program.</p>

<p style="margin-top: 1em">For certain filesystem types,
this allows extra filesystem features to be selected. See
mke2fs(8) and mkfs.ufs(8) for more details.</p>

<p style="margin-top: 1em">You cannot use this optional
parameter with the &quot;gfs&quot; or &quot;gfs2&quot;
filesystem type.</p>

<p style="margin-top: 1em">&quot;inode&quot; <br>
This passes the -I parameter to the external mke2fs(8)
program which sets the inode size (only for ext2/3/4
filesystems at present).</p>

<p style="margin-top: 1em">&quot;sectorsize&quot; <br>
This passes the -S parameter to external mkfs.ufs(8)
program, which sets sector size for ufs filesystem.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">mkfs-b <br>
mkfs-b fstype blocksize device</p>

<p style="margin-top: 1em">This call is similar to
&quot;mkfs&quot;, but it allows you to control the block
size of the resulting filesystem. Supported block sizes
depend on the filesystem type, but typically they <br>
are 1024, 2048 or 4096 only.</p>

<p style="margin-top: 1em">For VFAT and NTFS the
&quot;blocksize&quot; parameter is treated as the requested
cluster size.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mkfs&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mkfs-btrfs <br>
mkfs-btrfs &rsquo;devices ...&rsquo; [allocstart:N]
[bytecount:N] [datatype:..] [leafsize:N] [label:..]
[metadata:..] [nodesize:N] [sectorsize:N]</p>

<p style="margin-top: 1em">Create a btrfs filesystem,
allowing all configurables to be set. For more information
on the optional arguments, see mkfs.btrfs(8).</p>

<p style="margin-top: 1em">Since btrfs filesystems can span
multiple devices, this takes a non-empty list of
devices.</p>

<p style="margin-top: 1em">To create general filesystems,
use &quot;mkfs&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;btrfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mklost-and-found <br>
mklost-and-found mountpoint</p>

<p style="margin-top: 1em">Make the &quot;lost+found&quot;
directory, normally in the root directory of an ext2/3/4
filesystem. &quot;mountpoint&quot; is the directory under
which we try to create the &quot;lost+found&quot;
directory.</p>

<p style="margin-top: 1em">mkmountpoint <br>
mkmountpoint exemptpath</p>

<p style="margin-top: 1em">&quot;mkmountpoint&quot; and
&quot;rmmountpoint&quot; are specialized calls that can be
used to create extra mountpoints before mounting the first
filesystem.</p>

<p style="margin-top: 1em">These calls are only necessary
in some very limited circumstances, mainly the case where
you want to mount a mix of unrelated and/or read-only
filesystems together.</p>

<p style="margin-top: 1em">For example, live CDs often
contain a &quot;Russian doll&quot; nest of filesystems, an
ISO outer layer, with a squashfs image inside, with an
ext2/3 image inside that. You can unpack this <br>
as follows in guestfish:</p>

<p style="margin-top: 1em">add-ro Fedora-11-i686-Live.iso
<br>
run <br>
mkmountpoint /cd <br>
mkmountpoint /sqsh <br>
mkmountpoint /ext3fs <br>
mount /dev/sda /cd <br>
mount-loop /cd/LiveOS/squashfs.img /sqsh <br>
mount-loop /sqsh/LiveOS/ext3fs.img /ext3fs</p>

<p style="margin-top: 1em">The inner filesystem is now
unpacked under the /ext3fs mountpoint.</p>

<p style="margin-top: 1em">&quot;mkmountpoint&quot; is not
compatible with &quot;umount-all&quot;. You may get
unexpected errors if you try to mix these calls. It is
safest to manually unmount filesystems and remove <br>
mountpoints after use.</p>

<p style="margin-top: 1em">&quot;umount-all&quot; unmounts
filesystems by sorting the paths longest first, so for this
to work for manual mountpoints, you must ensure that the
innermost mountpoints have the longest <br>
pathnames, as in the example code above.</p>

<p style="margin-top: 1em">For more details see
https://bugzilla.redhat.com/show_bug.cgi?id=599503</p>

<p style="margin-top: 1em">Autosync [see
&quot;set-autosync&quot;, this is set by default on handles]
can cause &quot;umount-all&quot; to be called when the
handle is closed which can also trigger these issues.</p>

<p style="margin-top: 1em">mknod <br>
mknod mode devmajor devminor path</p>

<p style="margin-top: 1em">This call creates block or
character special devices, or named pipes (FIFOs).</p>

<p style="margin-top: 1em">The &quot;mode&quot; parameter
should be the mode, using the standard constants.
&quot;devmajor&quot; and &quot;devminor&quot; are the device
major and minor numbers, only used when creating block and
<br>
character special devices.</p>

<p style="margin-top: 1em">Note that, just like mknod(2),
the mode must be bitwise OR&rsquo;d with S_IFBLK, S_IFCHR,
S_IFIFO or S_IFSOCK (otherwise this call just creates a
regular file). These constants are <br>
available in the standard Linux header files, or you can use
&quot;mknod-b&quot;, &quot;mknod-c&quot; or
&quot;mkfifo&quot; which are wrappers around this command
which bitwise OR in the appropriate constant <br>
for you.</p>

<p style="margin-top: 1em">The mode actually set is
affected by the umask.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mknod&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mknod-b <br>
mknod-b mode devmajor devminor path</p>

<p style="margin-top: 1em">This call creates a block device
node called &quot;path&quot; with mode &quot;mode&quot; and
device major/minor &quot;devmajor&quot; and
&quot;devminor&quot;. It is just a convenient wrapper around
&quot;mknod&quot;.</p>

<p style="margin-top: 1em">Unlike with &quot;mknod&quot;,
&quot;mode&quot; must contain only permissions bits.</p>

<p style="margin-top: 1em">The mode actually set is
affected by the umask.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mknod&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mknod-c <br>
mknod-c mode devmajor devminor path</p>

<p style="margin-top: 1em">This call creates a char device
node called &quot;path&quot; with mode &quot;mode&quot; and
device major/minor &quot;devmajor&quot; and
&quot;devminor&quot;. It is just a convenient wrapper around
&quot;mknod&quot;.</p>

<p style="margin-top: 1em">Unlike with &quot;mknod&quot;,
&quot;mode&quot; must contain only permissions bits.</p>

<p style="margin-top: 1em">The mode actually set is
affected by the umask.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;mknod&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mkswap <br>
mkswap-opts <br>
mkswap device [label:..] [uuid:..]</p>

<p style="margin-top: 1em">Create a Linux swap partition on
&quot;device&quot;.</p>

<p style="margin-top: 1em">The option arguments
&quot;label&quot; and &quot;uuid&quot; allow you to set the
label and/or UUID of the new swap partition.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">mkswap-L <br>
mkswap-L label device</p>

<p style="margin-top: 1em">Create a swap partition on
&quot;device&quot; with label &quot;label&quot;.</p>

<p style="margin-top: 1em">Note that you cannot attach a
swap label to a block device (eg. /dev/sda), just to a
partition. This appears to be a limitation of the kernel or
swap tools.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mkswap&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">mkswap-U <br>
mkswap-U uuid device</p>

<p style="margin-top: 1em">Create a swap partition on
&quot;device&quot; with UUID &quot;uuid&quot;.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;mkswap&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxfsuuid&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mkswap-file <br>
mkswap-file path</p>

<p style="margin-top: 1em">Create a swap file.</p>

<p style="margin-top: 1em">This command just writes a swap
file signature to an existing file. To create the file
itself, use something like &quot;fallocate&quot;.</p>

<p style="margin-top: 1em">mktemp <br>
mktemp tmpl [suffix:..]</p>

<p style="margin-top: 1em">This command creates a temporary
file. The &quot;tmpl&quot; parameter should be a full
pathname for the temporary directory name with the final six
characters being &quot;XXXXXX&quot;.</p>

<p style="margin-top: 1em">For example:
&quot;/tmp/myprogXXXXXX&quot; or
&quot;/Temp/myprogXXXXXX&quot;, the second one being
suitable for Windows filesystems.</p>

<p style="margin-top: 1em">The name of the temporary file
that was created is returned.</p>

<p style="margin-top: 1em">The temporary file is created
with mode 0600 and is owned by root.</p>

<p style="margin-top: 1em">The caller is responsible for
deleting the temporary file after use.</p>

<p style="margin-top: 1em">If the optional
&quot;suffix&quot; parameter is given, then the suffix (eg.
&quot;.txt&quot;) is appended to the temporary name.</p>

<p style="margin-top: 1em">See also:
&quot;mkdtemp&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">modprobe <br>
modprobe modulename</p>

<p style="margin-top: 1em">This loads a kernel module in
the appliance.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxmodules&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">mount <br>
mount mountable mountpoint</p>

<p style="margin-top: 1em">Mount a guest disk at a position
in the filesystem. Block devices are named /dev/sda,
/dev/sdb and so on, as they were added to the guest. If
those block devices contain <br>
partitions, they will have the usual names (eg. /dev/sda1).
Also LVM /dev/VG/LV-style names can be used, or
&rsquo;mountable&rsquo; strings returned by
&quot;list-filesystems&quot; or &quot;inspect-get- <br>
mountpoints&quot;.</p>

<p style="margin-top: 1em">The rules are the same as for
mount(2): A filesystem must first be mounted on / before
others can be mounted. Other filesystems can only be mounted
on directories which already <br>
exist.</p>

<p style="margin-top: 1em">The mounted filesystem is
writable, if we have sufficient permissions on the
underlying device.</p>

<p style="margin-top: 1em">Before libguestfs 1.13.16, this
call implicitly added the options &quot;sync&quot; and
&quot;noatime&quot;. The &quot;sync&quot; option greatly
slowed writes and caused many problems for users. If your
<br>
program might need to work with older versions of
libguestfs, use &quot;mount-options&quot; instead (using an
empty string for the first parameter if you don&rsquo;t want
any options).</p>

<p style="margin-top: 1em">mount-local <br>
mount-local localmountpoint [readonly:true|false]
[options:..] [cachetimeout:N] [debugcalls:true|false]</p>

<p style="margin-top: 1em">This call exports the
libguestfs-accessible filesystem to a local mountpoint
(directory) called &quot;localmountpoint&quot;. Ordinary
reads and writes to files and directories under <br>
&quot;localmountpoint&quot; are redirected through
libguestfs.</p>

<p style="margin-top: 1em">If the optional
&quot;readonly&quot; flag is set to true, then writes to the
filesystem return error &quot;EROFS&quot;.</p>

<p style="margin-top: 1em">&quot;options&quot; is a
comma-separated list of mount options. See guestmount(1) for
some useful options.</p>

<p style="margin-top: 1em">&quot;cachetimeout&quot; sets
the timeout (in seconds) for cached directory entries. The
default is 60 seconds. See guestmount(1) for further
information.</p>

<p style="margin-top: 1em">If &quot;debugcalls&quot; is set
to true, then additional debugging information is generated
for every FUSE call.</p>

<p style="margin-top: 1em">When &quot;mount-local&quot;
returns, the filesystem is ready, but is not processing
requests (access to it will block). You have to call
&quot;mount-local-run&quot; to run the main loop.</p>

<p style="margin-top: 1em">See &quot;MOUNT LOCAL&quot; in
guestfs(3) for full documentation.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">mount-local-run <br>
mount-local-run</p>

<p style="margin-top: 1em">Run the main loop which
translates kernel calls to libguestfs calls.</p>

<p style="margin-top: 1em">This should only be called after
&quot;mount-local&quot; returns successfully. The call will
not return until the filesystem is unmounted.</p>

<p style="margin-top: 1em">Note you must not make
concurrent libguestfs calls on the same handle from another
thread.</p>

<p style="margin-top: 1em">You may call this from a
different thread than the one which called
&quot;mount-local&quot;, subject to the usual rules for
threads and libguestfs (see &quot;MULTIPLE HANDLES AND
MULTIPLE <br>
THREADS&quot; in guestfs(3)).</p>

<p style="margin-top: 1em">See &quot;MOUNT LOCAL&quot; in
guestfs(3) for full documentation.</p>

<p style="margin-top: 1em">mount-loop <br>
mount-loop file mountpoint</p>

<p style="margin-top: 1em">This command lets you mount file
(a filesystem image in a file) on a mount point. It is
entirely equivalent to the command &quot;mount -o loop file
mountpoint&quot;.</p>

<p style="margin-top: 1em">mount-options <br>
mount-options options mountable mountpoint</p>

<p style="margin-top: 1em">This is the same as the
&quot;mount&quot; command, but it allows you to set the
mount options as for the mount(8) -o flag.</p>

<p style="margin-top: 1em">If the &quot;options&quot;
parameter is an empty string, then no options are passed
(all options default to whatever the filesystem uses).</p>

<p style="margin-top: 1em">mount-ro <br>
mount-ro mountable mountpoint</p>

<p style="margin-top: 1em">This is the same as the
&quot;mount&quot; command, but it mounts the filesystem with
the read-only (-o ro) flag.</p>

<p style="margin-top: 1em">mount-vfs <br>
mount-vfs options vfstype mountable mountpoint</p>

<p style="margin-top: 1em">This is the same as the
&quot;mount&quot; command, but it allows you to set both the
mount options and the vfstype as for the mount(8) -o and -t
flags.</p>

<p style="margin-top: 1em">mountpoints <br>
mountpoints</p>

<p style="margin-top: 1em">This call is similar to
&quot;mounts&quot;. That call returns a list of devices.
This one returns a hash table (map) of device name to
directory where the device is mounted.</p>

<p style="margin-top: 1em">mounts <br>
mounts</p>

<p style="margin-top: 1em">This returns the list of
currently mounted filesystems. It returns the list of
devices (eg. /dev/sda1, /dev/VG/LV).</p>

<p style="margin-top: 1em">Some internal mounts are not
shown.</p>

<p style="margin-top: 1em">See also:
&quot;mountpoints&quot;</p>

<p style="margin-top: 1em">mv <br>
mv src dest</p>

<p style="margin-top: 1em">This moves a file from
&quot;src&quot; to &quot;dest&quot; where &quot;dest&quot;
is either a destination filename or destination
directory.</p>

<p style="margin-top: 1em">See also:
&quot;rename&quot;.</p>

<p style="margin-top: 1em">nr-devices <br>
nr-devices</p>

<p style="margin-top: 1em">This returns the number of whole
block devices that were added. This is the same as the
number of devices that would be returned if you called
&quot;list-devices&quot;.</p>

<p style="margin-top: 1em">To find out the maximum number
of devices that could be added, call
&quot;max-disks&quot;.</p>

<p style="margin-top: 1em">ntfs-3g-probe <br>
ntfs-3g-probe true|false device</p>

<p style="margin-top: 1em">This command runs the
ntfs-3g.probe(8) command which probes an NTFS
&quot;device&quot; for mountability. (Not all NTFS volumes
can be mounted read-write, and some cannot be mounted at
<br>
all).</p>

<p style="margin-top: 1em">&quot;rw&quot; is a boolean
flag. Set it to true if you want to test if the volume can
be mounted read-write. Set it to false if you want to test
if the volume can be mounted read-only.</p>

<p style="margin-top: 1em">The return value is an integer
which 0 if the operation would succeed, or some non-zero
value documented in the ntfs-3g.probe(8) manual page.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfs3g&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ntfsclone-in <br>
ntfsclone-in (backupfile|-) device</p>

<p style="margin-top: 1em">Restore the
&quot;backupfile&quot; (from a previous call to
&quot;ntfsclone-out&quot;) to &quot;device&quot;,
overwriting any existing contents of this device.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfs3g&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ntfsclone-out <br>
ntfsclone-out device (backupfile|-)
[metadataonly:true|false] [rescue:true|false]
[ignorefscheck:true|false] [preservetimestamps:true|false]
[force:true|false]</p>

<p style="margin-top: 1em">Stream the NTFS filesystem
&quot;device&quot; to the local file &quot;backupfile&quot;.
The format used for the backup file is a special format used
by the ntfsclone(8) tool.</p>

<p style="margin-top: 1em">If the optional
&quot;metadataonly&quot; flag is true, then only the
metadata is saved, losing all the user data (this is useful
for diagnosing some filesystem problems).</p>

<p style="margin-top: 1em">The optional &quot;rescue&quot;,
&quot;ignorefscheck&quot;, &quot;preservetimestamps&quot;
and &quot;force&quot; flags have precise meanings detailed
in the ntfsclone(8) man page.</p>

<p style="margin-top: 1em">Use &quot;ntfsclone-in&quot; to
restore the file back to a libguestfs device.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfs3g&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ntfsfix <br>
ntfsfix device [clearbadsectors:true|false]</p>

<p style="margin-top: 1em">This command repairs some
fundamental NTFS inconsistencies, resets the NTFS journal
file, and schedules an NTFS consistency check for the first
boot into Windows.</p>

<p style="margin-top: 1em">This is not an equivalent of
Windows &quot;chkdsk&quot;. It does not scan the filesystem
for inconsistencies.</p>

<p style="margin-top: 1em">The optional
&quot;clearbadsectors&quot; flag clears the list of bad
sectors. This is useful after cloning a disk with bad
sectors to a new disk.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfs3g&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ntfsresize <br>
ntfsresize-opts <br>
ntfsresize device [size:N] [force:true|false]</p>

<p style="margin-top: 1em">This command resizes an NTFS
filesystem, expanding or shrinking it to the size of the
underlying device.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">&quot;size&quot; <br>
The new size (in bytes) of the filesystem. If omitted, the
filesystem is resized to fit the container (eg.
partition).</p>

<p style="margin-top: 1em">&quot;force&quot; <br>
If this option is true, then force the resize of the
filesystem even if the filesystem is marked as requiring a
consistency check.</p>

<p style="margin-top: 1em">After the resize operation, the
filesystem is always marked as requiring a consistency check
(for safety). You have to boot into Windows to perform this
check and clear this <br>
condition. If you don&rsquo;t set the &quot;force&quot;
option then it is not possible to call
&quot;ntfsresize&quot; multiple times on a single filesystem
without booting into Windows between each <br>
resize.</p>

<p style="margin-top: 1em">See also ntfsresize(8).</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfsprogs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">ntfsresize-size <br>
ntfsresize-size device size</p>

<p style="margin-top: 1em">This command is the same as
&quot;ntfsresize&quot; except that it allows you to specify
the new size (in bytes) explicitly.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;ntfsresize&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;ntfsprogs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">parse-environment <br>
parse-environment</p>

<p style="margin-top: 1em">Parse the program&rsquo;s
environment and set flags in the handle accordingly. For
example if &quot;LIBGUESTFS_DEBUG=1&quot; then the
&rsquo;verbose&rsquo; flag is set in the handle.</p>

<p style="margin-top: 1em">Most programs do not need to
call this. It is done implicitly when you call
&quot;create&quot;.</p>

<p style="margin-top: 1em">See &quot;ENVIRONMENT
VARIABLES&quot; in guestfs(3) for a list of environment
variables that can affect libguestfs handles. See also
&quot;guestfs_create_flags&quot; in guestfs(3), and
&quot;parse- <br>
environment-list&quot;.</p>

<p style="margin-top: 1em">parse-environment-list <br>
parse-environment-list &rsquo;environment ...&rsquo;</p>

<p style="margin-top: 1em">Parse the list of strings in the
argument &quot;environment&quot; and set flags in the handle
accordingly. For example if &quot;LIBGUESTFS_DEBUG=1&quot;
is a string in the list, then the &rsquo;verbose&rsquo; <br>
flag is set in the handle.</p>

<p style="margin-top: 1em">This is the same as
&quot;parse-environment&quot; except that it parses an
explicit list of strings instead of the program&rsquo;s
environment.</p>

<p style="margin-top: 1em">part-add <br>
part-add device prlogex startsect endsect</p>

<p style="margin-top: 1em">This command adds a partition to
&quot;device&quot;. If there is no partition table on the
device, call &quot;part-init&quot; first.</p>

<p style="margin-top: 1em">The &quot;prlogex&quot;
parameter is the type of partition. Normally you should pass
&quot;p&quot; or &quot;primary&quot; here, but MBR partition
tables also support &quot;l&quot; (or &quot;logical&quot;)
and &quot;e&quot; (or <br>
&quot;extended&quot;) partition types.</p>

<p style="margin-top: 1em">&quot;startsect&quot; and
&quot;endsect&quot; are the start and end of the partition
in sectors. &quot;endsect&quot; may be negative, which means
it counts backwards from the end of the disk (&quot;-1&quot;
is the <br>
last sector).</p>

<p style="margin-top: 1em">Creating a partition which
covers the whole disk is not so easy. Use
&quot;part-disk&quot; to do that.</p>

<p style="margin-top: 1em">part-del <br>
part-del device partnum</p>

<p style="margin-top: 1em">This command deletes the
partition numbered &quot;partnum&quot; on
&quot;device&quot;.</p>

<p style="margin-top: 1em">Note that in the case of MBR
partitioning, deleting an extended partition also deletes
any logical partitions it contains.</p>

<p style="margin-top: 1em">part-disk <br>
part-disk device parttype</p>

<p style="margin-top: 1em">This command is simply a
combination of &quot;part-init&quot; followed by
&quot;part-add&quot; to create a single primary partition
covering the whole disk.</p>

<p style="margin-top: 1em">&quot;parttype&quot; is the
partition table type, usually &quot;mbr&quot; or
&quot;gpt&quot;, but other possible values are described in
&quot;part-init&quot;.</p>

<p style="margin-top: 1em">part-get-bootable <br>
part-get-bootable device partnum</p>

<p style="margin-top: 1em">This command returns true if the
partition &quot;partnum&quot; on &quot;device&quot; has the
bootable flag set.</p>

<p style="margin-top: 1em">See also
&quot;part-set-bootable&quot;.</p>

<p style="margin-top: 1em">part-get-gpt-guid <br>
part-get-gpt-guid device partnum</p>

<p style="margin-top: 1em">Return the GUID of numbered GPT
partition &quot;partnum&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;gdisk&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">part-get-gpt-type <br>
part-get-gpt-type device partnum</p>

<p style="margin-top: 1em">Return the type GUID of numbered
GPT partition &quot;partnum&quot;. For MBR partitions,
return an appropriate GUID corresponding to the MBR type.
Behaviour is undefined for other partition <br>
types.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;gdisk&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">part-get-mbr-id <br>
part-get-mbr-id device partnum</p>

<p style="margin-top: 1em">Returns the MBR type byte (also
known as the ID byte) from the numbered partition
&quot;partnum&quot;.</p>

<p style="margin-top: 1em">Note that only MBR (old
DOS-style) partitions have type bytes. You will get
undefined results for other partition table types (see
&quot;part-get-parttype&quot;).</p>

<p style="margin-top: 1em">part-get-mbr-part-type <br>
part-get-mbr-part-type device partnum</p>

<p style="margin-top: 1em">This returns the partition type
of an MBR partition numbered &quot;partnum&quot; on device
&quot;device&quot;.</p>

<p style="margin-top: 1em">It returns &quot;primary&quot;,
&quot;logical&quot;, or &quot;extended&quot;.</p>

<p style="margin-top: 1em">part-get-name <br>
part-get-name device partnum</p>

<p style="margin-top: 1em">This gets the partition name on
partition numbered &quot;partnum&quot; on device
&quot;device&quot;. Note that partitions are numbered from
1.</p>

<p style="margin-top: 1em">The partition name can only be
read on certain types of partition table. This works on
&quot;gpt&quot; but not on &quot;mbr&quot; partitions.</p>

<p style="margin-top: 1em">part-get-parttype <br>
part-get-parttype device</p>

<p style="margin-top: 1em">This command examines the
partition table on &quot;device&quot; and returns the
partition table type (format) being used.</p>

<p style="margin-top: 1em">Common return values include:
&quot;msdos&quot; (a DOS/Windows style MBR partition table),
&quot;gpt&quot; (a GPT/EFI-style partition table). Other
values are possible, although unusual. See <br>
&quot;part-init&quot; for a full list.</p>

<p style="margin-top: 1em">part-init <br>
part-init device parttype</p>

<p style="margin-top: 1em">This creates an empty partition
table on &quot;device&quot; of one of the partition types
listed below. Usually &quot;parttype&quot; should be either
&quot;msdos&quot; or &quot;gpt&quot; (for large disks).</p>

<p style="margin-top: 1em">Initially there are no
partitions. Following this, you should call
&quot;part-add&quot; for each partition required.</p>

<p style="margin-top: 1em">Possible values for
&quot;parttype&quot; are:</p>

<p style="margin-top: 1em">efi <br>
gpt Intel EFI / GPT partition table.</p>

<p style="margin-top: 1em">This is recommended for &gt;= 2
TB partitions that will be accessed from Linux and
Intel-based Mac OS X. It also has limited backwards
compatibility with the &quot;mbr&quot; format.</p>

<p style="margin-top: 1em">mbr <br>
msdos <br>
The standard PC &quot;Master Boot Record&quot; (MBR) format
used by MS-DOS and Windows. This partition type will only
work for device sizes up to 2 TB. For large disks we
recommend <br>
using &quot;gpt&quot;.</p>

<p style="margin-top: 1em">Other partition table types that
may work but are not supported include:</p>

<p style="margin-top: 1em">aix AIX disk labels.</p>

<p style="margin-top: 1em">amiga <br>
rdb Amiga &quot;Rigid Disk Block&quot; format.</p>

<p style="margin-top: 1em">bsd BSD disk labels.</p>

<p style="margin-top: 1em">dasd <br>
DASD, used on IBM mainframes.</p>

<p style="margin-top: 1em">dvh MIPS/SGI volumes.</p>

<p style="margin-top: 1em">mac Old Mac partition format.
Modern Macs use &quot;gpt&quot;.</p>

<p style="margin-top: 1em">pc98 <br>
NEC PC-98 format, common in Japan apparently.</p>

<p style="margin-top: 1em">sun Sun disk labels.</p>

<p style="margin-top: 1em">part-list <br>
part-list device</p>

<p style="margin-top: 1em">This command parses the
partition table on &quot;device&quot; and returns the list
of partitions found.</p>

<p style="margin-top: 1em">The fields in the returned
structure are:</p>

<p style="margin-top: 1em">part_num <br>
Partition number, counting from 1.</p>

<p style="margin-top: 1em">part_start <br>
Start of the partition in bytes. To get sectors you have to
divide by the device&rsquo;s sector size, see
&quot;blockdev-getss&quot;.</p>

<p style="margin-top: 1em">part_end <br>
End of the partition in bytes.</p>

<p style="margin-top: 1em">part_size <br>
Size of the partition in bytes.</p>

<p style="margin-top: 1em">part-set-bootable <br>
part-set-bootable device partnum true|false</p>

<p style="margin-top: 1em">This sets the bootable flag on
partition numbered &quot;partnum&quot; on device
&quot;device&quot;. Note that partitions are numbered from
1.</p>

<p style="margin-top: 1em">The bootable flag is used by
some operating systems (notably Windows) to determine which
partition to boot from. It is by no means universally
recognized.</p>

<p style="margin-top: 1em">part-set-gpt-guid <br>
part-set-gpt-guid device partnum guid</p>

<p style="margin-top: 1em">Set the GUID of numbered GPT
partition &quot;partnum&quot; to &quot;guid&quot;. Return an
error if the partition table of &quot;device&quot;
isn&rsquo;t GPT, or if &quot;guid&quot; is not a valid
GUID.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;gdisk&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">part-set-gpt-type <br>
part-set-gpt-type device partnum guid</p>

<p style="margin-top: 1em">Set the type GUID of numbered
GPT partition &quot;partnum&quot; to &quot;guid&quot;.
Return an error if the partition table of &quot;device&quot;
isn&rsquo;t GPT, or if &quot;guid&quot; is not a valid
GUID.</p>

<p style="margin-top: 1em">See
http://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs
for a useful list of type GUIDs.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;gdisk&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">part-set-mbr-id <br>
part-set-mbr-id device partnum idbyte</p>

<p style="margin-top: 1em">Sets the MBR type byte (also
known as the ID byte) of the numbered partition
&quot;partnum&quot; to &quot;idbyte&quot;. Note that the
type bytes quoted in most documentation are in fact
hexadecimal <br>
numbers, but usually documented without any leading
&quot;0x&quot; which might be confusing.</p>

<p style="margin-top: 1em">Note that only MBR (old
DOS-style) partitions have type bytes. You will get
undefined results for other partition table types (see
&quot;part-get-parttype&quot;).</p>

<p style="margin-top: 1em">part-set-name <br>
part-set-name device partnum name</p>

<p style="margin-top: 1em">This sets the partition name on
partition numbered &quot;partnum&quot; on device
&quot;device&quot;. Note that partitions are numbered from
1.</p>

<p style="margin-top: 1em">The partition name can only be
set on certain types of partition table. This works on
&quot;gpt&quot; but not on &quot;mbr&quot; partitions.</p>

<p style="margin-top: 1em">part-to-dev <br>
part-to-dev partition</p>

<p style="margin-top: 1em">This function takes a partition
name (eg. &quot;/dev/sdb1&quot;) and removes the partition
number, returning the device name (eg.
&quot;/dev/sdb&quot;).</p>

<p style="margin-top: 1em">The named partition must exist,
for example as a string returned from
&quot;list-partitions&quot;.</p>

<p style="margin-top: 1em">See also
&quot;part-to-partnum&quot;, &quot;device-index&quot;.</p>

<p style="margin-top: 1em">part-to-partnum <br>
part-to-partnum partition</p>

<p style="margin-top: 1em">This function takes a partition
name (eg. &quot;/dev/sdb1&quot;) and returns the partition
number (eg. 1).</p>

<p style="margin-top: 1em">The named partition must exist,
for example as a string returned from
&quot;list-partitions&quot;.</p>

<p style="margin-top: 1em">See also
&quot;part-to-dev&quot;.</p>

<p style="margin-top: 1em">ping-daemon <br>
ping-daemon</p>

<p style="margin-top: 1em">This is a test probe into the
guestfs daemon running inside the libguestfs appliance.
Calling this function checks that the daemon responds to the
ping message, without <br>
affecting the daemon or attached block device(s) in any
other way.</p>

<p style="margin-top: 1em">pread <br>
pread path count offset</p>

<p style="margin-top: 1em">This command lets you read part
of a file. It reads &quot;count&quot; bytes of the file,
starting at &quot;offset&quot;, from file
&quot;path&quot;.</p>

<p style="margin-top: 1em">This may read fewer bytes than
requested. For further details see the pread(2) system
call.</p>

<p style="margin-top: 1em">See also &quot;pwrite&quot;,
&quot;pread-device&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">pread-device <br>
pread-device device count offset</p>

<p style="margin-top: 1em">This command lets you read part
of a block device. It reads &quot;count&quot; bytes of
&quot;device&quot;, starting at &quot;offset&quot;.</p>

<p style="margin-top: 1em">This may read fewer bytes than
requested. For further details see the pread(2) system
call.</p>

<p style="margin-top: 1em">See also &quot;pread&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">pvchange-uuid <br>
pvchange-uuid device</p>

<p style="margin-top: 1em">Generate a new random UUID for
the physical volume &quot;device&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvchange-uuid-all <br>
pvchange-uuid-all</p>

<p style="margin-top: 1em">Generate new random UUIDs for
all physical volumes.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvcreate <br>
pvcreate device</p>

<p style="margin-top: 1em">This creates an LVM physical
volume on the named &quot;device&quot;, where
&quot;device&quot; should usually be a partition name such
as /dev/sda1.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvremove <br>
pvremove device</p>

<p style="margin-top: 1em">This wipes a physical volume
&quot;device&quot; so that LVM will no longer recognise
it.</p>

<p style="margin-top: 1em">The implementation uses the
&quot;pvremove&quot; command which refuses to wipe physical
volumes that contain any volume groups, so you have to
remove those first.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvresize <br>
pvresize device</p>

<p style="margin-top: 1em">This resizes (expands or
shrinks) an existing LVM physical volume to match the new
size of the underlying device.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvresize-size <br>
pvresize-size device size</p>

<p style="margin-top: 1em">This command is the same as
&quot;pvresize&quot; except that it allows you to specify
the new size (in bytes) explicitly.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvs <br>
pvs</p>

<p style="margin-top: 1em">List all the physical volumes
detected. This is the equivalent of the pvs(8) command.</p>

<p style="margin-top: 1em">This returns a list of just the
device names that contain PVs (eg. /dev/sda2).</p>

<p style="margin-top: 1em">See also
&quot;pvs-full&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvs-full <br>
pvs-full</p>

<p style="margin-top: 1em">List all the physical volumes
detected. This is the equivalent of the pvs(8) command. The
&quot;full&quot; version includes all fields.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">pvuuid <br>
pvuuid device</p>

<p style="margin-top: 1em">This command returns the UUID of
the LVM PV &quot;device&quot;.</p>

<p style="margin-top: 1em">pwrite <br>
pwrite path content offset</p>

<p style="margin-top: 1em">This command writes to part of a
file. It writes the data buffer &quot;content&quot; to the
file &quot;path&quot; starting at offset
&quot;offset&quot;.</p>

<p style="margin-top: 1em">This command implements the
pwrite(2) system call, and like that system call it may not
write the full data requested. The return value is the
number of bytes that were actually <br>
written to the file. This could even be 0, although short
writes are unlikely for regular files in ordinary
circumstances.</p>

<p style="margin-top: 1em">See also &quot;pread&quot;,
&quot;pwrite-device&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">pwrite-device <br>
pwrite-device device content offset</p>

<p style="margin-top: 1em">This command writes to part of a
device. It writes the data buffer &quot;content&quot; to
&quot;device&quot; starting at offset
&quot;offset&quot;.</p>

<p style="margin-top: 1em">This command implements the
pwrite(2) system call, and like that system call it may not
write the full data requested (although short writes to disk
devices and partitions are <br>
probably impossible with standard Linux kernels).</p>

<p style="margin-top: 1em">See also &quot;pwrite&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">read-file <br>
read-file path</p>

<p style="margin-top: 1em">This calls returns the contents
of the file &quot;path&quot; as a buffer.</p>

<p style="margin-top: 1em">Unlike &quot;cat&quot;, this
function can correctly handle files that contain embedded
ASCII NUL characters.</p>

<p style="margin-top: 1em">read-lines <br>
read-lines path</p>

<p style="margin-top: 1em">Return the contents of the file
named &quot;path&quot;.</p>

<p style="margin-top: 1em">The file contents are returned
as a list of lines. Trailing &quot;LF&quot; and
&quot;CRLF&quot; character sequences are not returned.</p>

<p style="margin-top: 1em">Note that this function cannot
correctly handle binary files (specifically, files
containing &quot; &quot; character which is treated as end
of string). For those you need to use the <br>
&quot;read-file&quot; function and split the buffer into
lines yourself.</p>

<p style="margin-top: 1em">readdir <br>
readdir dir</p>

<p style="margin-top: 1em">This returns the list of
directory entries in directory &quot;dir&quot;.</p>

<p style="margin-top: 1em">All entries in the directory are
returned, including &quot;.&quot; and &quot;..&quot;. The
entries are not sorted, but returned in the same order as
the underlying filesystem.</p>

<p style="margin-top: 1em">Also this call returns basic
file type information about each file. The &quot;ftyp&quot;
field will contain one of the following characters:</p>

<p style="margin-top: 1em">&rsquo;b&rsquo; Block
special</p>

<p style="margin-top: 1em">&rsquo;c&rsquo; Char special</p>

<p style="margin-top: 1em">&rsquo;d&rsquo; Directory</p>

<p style="margin-top: 1em">&rsquo;f&rsquo; FIFO (named
pipe)</p>

<p style="margin-top: 1em">&rsquo;l&rsquo; Symbolic
link</p>

<p style="margin-top: 1em">&rsquo;r&rsquo; Regular file</p>

<p style="margin-top: 1em">&rsquo;s&rsquo; Socket</p>

<p style="margin-top: 1em">&rsquo;u&rsquo; Unknown file
type</p>

<p style="margin-top: 1em">&rsquo;?&rsquo; The readdir(3)
call returned a &quot;d_type&quot; field with an unexpected
value</p>

<p style="margin-top: 1em">This function is primarily
intended for use by programs. To get a simple list of names,
use &quot;ls&quot;. To get a printable directory for human
consumption, use &quot;ll&quot;.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">readlink <br>
readlink path</p>

<p style="margin-top: 1em">This command reads the target of
a symbolic link.</p>

<p style="margin-top: 1em">readlinklist <br>
readlinklist path &rsquo;names ...&rsquo;</p>

<p style="margin-top: 1em">This call allows you to do a
&quot;readlink&quot; operation on multiple files, where all
files are in the directory &quot;path&quot;.
&quot;names&quot; is the list of files from this
directory.</p>

<p style="margin-top: 1em">On return you get a list of
strings, with a one-to-one correspondence to the
&quot;names&quot; list. Each string is the value of the
symbolic link.</p>

<p style="margin-top: 1em">If the readlink(2) operation
fails on any name, then the corresponding result string is
the empty string &quot;&quot;. However the whole operation
is completed even if there were <br>
readlink(2) errors, and so you can call this function with
names where you don&rsquo;t know if they are symbolic links
already (albeit slightly less efficient).</p>

<p style="margin-top: 1em">This call is intended for
programs that want to efficiently list a directory contents
without making many round-trips.</p>

<p style="margin-top: 1em">realpath <br>
realpath path</p>

<p style="margin-top: 1em">Return the canonicalized
absolute pathname of &quot;path&quot;. The returned path has
no &quot;.&quot;, &quot;..&quot; or symbolic link path
elements.</p>

<p style="margin-top: 1em">remount <br>
remount mountpoint [rw:true|false]</p>

<p style="margin-top: 1em">This call allows you to change
the &quot;rw&quot; (readonly/read-write) flag on an already
mounted filesystem at &quot;mountpoint&quot;, converting a
readonly filesystem to be read-write, or vice- <br>
versa.</p>

<p style="margin-top: 1em">Note that at the moment you must
supply the &quot;optional&quot; &quot;rw&quot; parameter. In
future we may allow other flags to be adjusted.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">remove-drive <br>
remove-drive label</p>

<p style="margin-top: 1em">This function is conceptually
the opposite of &quot;add-drive-opts&quot;. It removes the
drive that was previously added with label
&quot;label&quot;.</p>

<p style="margin-top: 1em">Note that in order to remove
drives, you have to add them with labels (see the optional
&quot;label&quot; argument to &quot;add-drive-opts&quot;).
If you didn&rsquo;t use a label, then they cannot be <br>
removed.</p>

<p style="margin-top: 1em">You can call this function
before or after launching the handle. If called after
launch, if the backend supports it, we try to hot unplug the
drive: see &quot;HOTPLUGGING&quot; in <br>
guestfs(3). The disk must not be in use (eg. mounted) when
you do this. We try to detect if the disk is in use and stop
you from doing this.</p>

<p style="margin-top: 1em">removexattr <br>
removexattr xattr path</p>

<p style="margin-top: 1em">This call removes the extended
attribute named &quot;xattr&quot; of the file
&quot;path&quot;.</p>

<p style="margin-top: 1em">See also:
&quot;lremovexattr&quot;, attr(5).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">rename <br>
rename oldpath newpath</p>

<p style="margin-top: 1em">Rename a file to a new place on
the same filesystem. This is the same as the Linux rename(2)
system call. In most cases you are better to use
&quot;mv&quot; instead.</p>

<p style="margin-top: 1em">resize2fs <br>
resize2fs device</p>

<p style="margin-top: 1em">This resizes an ext2, ext3 or
ext4 filesystem to match the size of the underlying
device.</p>

<p style="margin-top: 1em">See also &quot;RESIZE2FS
ERRORS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">resize2fs-M <br>
resize2fs-M device</p>

<p style="margin-top: 1em">This command is the same as
&quot;resize2fs&quot;, but the filesystem is resized to its
minimum size. This works like the -M option to the
&quot;resize2fs&quot; command.</p>

<p style="margin-top: 1em">To get the resulting size of the
filesystem you should call &quot;tune2fs-l&quot; and read
the &quot;Block size&quot; and &quot;Block count&quot;
values. These two numbers, multiplied together, give the
<br>
resulting size of the minimal filesystem in bytes.</p>

<p style="margin-top: 1em">See also &quot;RESIZE2FS
ERRORS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">resize2fs-size <br>
resize2fs-size device size</p>

<p style="margin-top: 1em">This command is the same as
&quot;resize2fs&quot; except that it allows you to specify
the new size (in bytes) explicitly.</p>

<p style="margin-top: 1em">See also &quot;RESIZE2FS
ERRORS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">rm <br>
rm path</p>

<p style="margin-top: 1em">Remove the single file
&quot;path&quot;.</p>

<p style="margin-top: 1em">rm-f <br>
rm-f path</p>

<p style="margin-top: 1em">Remove the file
&quot;path&quot;.</p>

<p style="margin-top: 1em">If the file doesn&rsquo;t exist,
that error is ignored. (Other errors, eg. I/O errors or bad
paths, are not ignored)</p>

<p style="margin-top: 1em">This call cannot remove
directories. Use &quot;rmdir&quot; to remove an empty
directory, or &quot;rm-rf&quot; to remove directories
recursively.</p>

<p style="margin-top: 1em">rm-rf <br>
rm-rf path</p>

<p style="margin-top: 1em">Remove the file or directory
&quot;path&quot;, recursively removing the contents if its a
directory. This is like the &quot;rm -rf&quot; shell
command.</p>

<p style="margin-top: 1em">rmdir <br>
rmdir path</p>

<p style="margin-top: 1em">Remove the single directory
&quot;path&quot;.</p>

<p style="margin-top: 1em">rmmountpoint <br>
rmmountpoint exemptpath</p>

<p style="margin-top: 1em">This calls removes a mountpoint
that was previously created with &quot;mkmountpoint&quot;.
See &quot;mkmountpoint&quot; for full details.</p>

<p style="margin-top: 1em">rsync <br>
rsync src dest [archive:true|false]
[deletedest:true|false]</p>

<p style="margin-top: 1em">This call may be used to copy or
synchronize two directories under the same libguestfs
handle. This uses the rsync(1) program which uses a fast
algorithm that avoids copying <br>
files unnecessarily.</p>

<p style="margin-top: 1em">&quot;src&quot; and
&quot;dest&quot; are the source and destination directories.
Files are copied from &quot;src&quot; to
&quot;dest&quot;.</p>

<p style="margin-top: 1em">The optional arguments are:</p>

<p style="margin-top: 1em">&quot;archive&quot; <br>
Turns on archive mode. This is the same as passing the
--archive flag to &quot;rsync&quot;.</p>

<p style="margin-top: 1em">&quot;deletedest&quot; <br>
Delete files at the destination that do not exist at the
source.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;rsync&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">rsync-in <br>
rsync-in remote dest [archive:true|false]
[deletedest:true|false]</p>

<p style="margin-top: 1em">This call may be used to copy or
synchronize the filesystem on the host or on a remote
computer with the filesystem within libguestfs. This uses
the rsync(1) program which uses <br>
a fast algorithm that avoids copying files
unnecessarily.</p>

<p style="margin-top: 1em">This call only works if the
network is enabled. See &quot;set-network&quot; or the
--network option to various tools like guestfish(1).</p>

<p style="margin-top: 1em">Files are copied from the remote
server and directory specified by &quot;remote&quot; to the
destination directory &quot;dest&quot;.</p>

<p style="margin-top: 1em">The format of the remote server
string is defined by rsync(1). Note that there is no way to
supply a password or passphrase so the target must be set up
not to require one.</p>

<p style="margin-top: 1em">The optional arguments are the
same as those of &quot;rsync&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;rsync&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">rsync-out <br>
rsync-out src remote [archive:true|false]
[deletedest:true|false]</p>

<p style="margin-top: 1em">This call may be used to copy or
synchronize the filesystem within libguestfs with a
filesystem on the host or on a remote computer. This uses
the rsync(1) program which uses a <br>
fast algorithm that avoids copying files unnecessarily.</p>

<p style="margin-top: 1em">This call only works if the
network is enabled. See &quot;set-network&quot; or the
--network option to various tools like guestfish(1).</p>

<p style="margin-top: 1em">Files are copied from the source
directory &quot;src&quot; to the remote server and directory
specified by &quot;remote&quot;.</p>

<p style="margin-top: 1em">The format of the remote server
string is defined by rsync(1). Note that there is no way to
supply a password or passphrase so the target must be set up
not to require one.</p>

<p style="margin-top: 1em">The optional arguments are the
same as those of &quot;rsync&quot;.</p>

<p style="margin-top: 1em">Globbing does not happen on the
&quot;src&quot; parameter. In programs which use the API
directly you have to expand wildcards yourself (see
&quot;glob-expand&quot;). In guestfish you can use the <br>
&quot;glob&quot; command (see &quot;glob&quot;), for
example:</p>

<p style="margin-top: 1em">&gt;&lt;fs&gt; glob rsync-out /*
rsync://remote/</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;rsync&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">scrub-device <br>
scrub-device device</p>

<p style="margin-top: 1em">This command writes patterns
over &quot;device&quot; to make data retrieval more
difficult.</p>

<p style="margin-top: 1em">It is an interface to the
scrub(1) program. See that manual page for more details.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;scrub&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">scrub-file <br>
scrub-file file</p>

<p style="margin-top: 1em">This command writes patterns
over a file to make data retrieval more difficult.</p>

<p style="margin-top: 1em">The file is removed after
scrubbing.</p>

<p style="margin-top: 1em">It is an interface to the
scrub(1) program. See that manual page for more details.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;scrub&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">scrub-freespace <br>
scrub-freespace dir</p>

<p style="margin-top: 1em">This command creates the
directory &quot;dir&quot; and then fills it with files until
the filesystem is full, and scrubs the files as for
&quot;scrub-file&quot;, and deletes them. The intention is
<br>
to scrub any free space on the partition containing
&quot;dir&quot;.</p>

<p style="margin-top: 1em">It is an interface to the
scrub(1) program. See that manual page for more details.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;scrub&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">selinux-relabel <br>
selinux-relabel specfile path [force:true|false]</p>

<p style="margin-top: 1em">SELinux relabel parts of the
filesystem.</p>

<p style="margin-top: 1em">The &quot;specfile&quot;
parameter controls the policy spec file used. You have to
parse &quot;/etc/selinux/config&quot; to find the correct
SELinux policy and then pass the spec file, usually: <br>
&quot;/etc/selinux/&quot; + selinuxtype +
&quot;/contexts/files/file_contexts&quot;.</p>

<p style="margin-top: 1em">The required &quot;path&quot;
parameter is the top level directory where relabelling
starts. Normally you should pass &quot;path&quot; as
&quot;/&quot; to relabel the whole guest filesystem.</p>

<p style="margin-top: 1em">The optional &quot;force&quot;
boolean controls whether the context is reset for
customizable files, and also whether the user, role and
range parts of the file context is changed.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;selinuxrelabel&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">set-append <br>
append <br>
set-append append</p>

<p style="margin-top: 1em">This function is used to add
additional options to the libguestfs appliance kernel
command line.</p>

<p style="margin-top: 1em">The default is &quot;NULL&quot;
unless overridden by setting &quot;LIBGUESTFS_APPEND&quot;
environment variable.</p>

<p style="margin-top: 1em">Setting &quot;append&quot; to
&quot;NULL&quot; means no additional options are passed
(libguestfs always adds a few of its own).</p>

<p style="margin-top: 1em">set-attach-method <br>
attach-method <br>
set-attach-method backend</p>

<p style="margin-top: 1em">Set the method that libguestfs
uses to connect to the backend guestfsd daemon.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;set-backend&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">set-autosync <br>
autosync <br>
set-autosync true|false</p>

<p style="margin-top: 1em">If &quot;autosync&quot; is true,
this enables autosync. Libguestfs will make a best effort
attempt to make filesystems consistent and synchronized when
the handle is closed (also if the <br>
program exits without closing handles).</p>

<p style="margin-top: 1em">This is enabled by default
(since libguestfs 1.5.24, previously it was disabled by
default).</p>

<p style="margin-top: 1em">set-backend <br>
backend <br>
set-backend backend</p>

<p style="margin-top: 1em">Set the method that libguestfs
uses to connect to the backend guestfsd daemon.</p>

<p style="margin-top: 1em">This handle property was
previously called the &quot;attach method&quot;.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3).</p>

<p style="margin-top: 1em">set-backend-setting <br>
set-backend-setting name val</p>

<p style="margin-top: 1em">Append &quot;name=value&quot; to
the backend settings string list. However if a string
already exists matching &quot;name&quot; or beginning with
&quot;name=&quot;, then that setting is replaced.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3), &quot;BACKEND SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">set-backend-settings <br>
set-backend-settings &rsquo;settings ...&rsquo;</p>

<p style="margin-top: 1em">Set a list of zero or more
settings which are passed through to the current backend.
Each setting is a string which is interpreted in a
backend-specific way, or ignored if not <br>
understood by the backend.</p>

<p style="margin-top: 1em">The default value is an empty
list, unless the environment variable
&quot;LIBGUESTFS_BACKEND_SETTINGS&quot; was set when the
handle was created. This environment variable contains a
<br>
colon-separated list of settings.</p>

<p style="margin-top: 1em">This call replaces all backend
settings. If you want to replace a single backend setting,
see &quot;set-backend-setting&quot;. If you want to clear a
single backend setting, see &quot;clear- <br>
backend-setting&quot;.</p>

<p style="margin-top: 1em">See &quot;BACKEND&quot; in
guestfs(3), &quot;BACKEND SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">set-cachedir <br>
cachedir <br>
set-cachedir cachedir</p>

<p style="margin-top: 1em">Set the directory used by the
handle to store the appliance cache, when using a supermin
appliance. The appliance is cached and shared between all
handles which have the same <br>
effective user ID.</p>

<p style="margin-top: 1em">The environment variables
&quot;LIBGUESTFS_CACHEDIR&quot; and &quot;TMPDIR&quot;
control the default value: If
&quot;LIBGUESTFS_CACHEDIR&quot; is set, then that is the
default. Else if &quot;TMPDIR&quot; is set, then <br>
that is the default. Else /var/tmp is the default.</p>

<p style="margin-top: 1em">set-direct <br>
direct <br>
set-direct true|false</p>

<p style="margin-top: 1em">If the direct appliance mode
flag is enabled, then stdin and stdout are passed directly
through to the appliance once it is launched.</p>

<p style="margin-top: 1em">One consequence of this is that
log messages aren&rsquo;t caught by the library and handled
by &quot;set-log-message-callback&quot;, but go straight to
stdout.</p>

<p style="margin-top: 1em">You probably don&rsquo;t want to
use this unless you know what you are doing.</p>

<p style="margin-top: 1em">The default is disabled.</p>

<p style="margin-top: 1em">set-e2attrs <br>
set-e2attrs file attrs [clear:true|false]</p>

<p style="margin-top: 1em">This sets or clears the file
attributes &quot;attrs&quot; associated with the inode
file.</p>

<p style="margin-top: 1em">&quot;attrs&quot; is a string of
characters representing file attributes. See
&quot;get-e2attrs&quot; for a list of possible attributes.
Not all attributes can be changed.</p>

<p style="margin-top: 1em">If optional boolean
&quot;clear&quot; is not present or false, then the
&quot;attrs&quot; listed are set in the inode.</p>

<p style="margin-top: 1em">If &quot;clear&quot; is true,
then the &quot;attrs&quot; listed are cleared in the
inode.</p>

<p style="margin-top: 1em">In both cases, other attributes
not present in the &quot;attrs&quot; string are left
unchanged.</p>

<p style="margin-top: 1em">These attributes are only
present when the file is located on an ext2/3/4 filesystem.
Using this call on other filesystem types will result in an
error.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">set-e2generation <br>
set-e2generation file generation</p>

<p style="margin-top: 1em">This sets the ext2 file
generation of a file.</p>

<p style="margin-top: 1em">See
&quot;get-e2generation&quot;.</p>

<p style="margin-top: 1em">set-e2label <br>
set-e2label device label</p>

<p style="margin-top: 1em">This sets the ext2/3/4
filesystem label of the filesystem on &quot;device&quot; to
&quot;label&quot;. Filesystem labels are limited to 16
characters.</p>

<p style="margin-top: 1em">You can use either
&quot;tune2fs-l&quot; or &quot;get-e2label&quot; to return
the existing label on a filesystem.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;set-label&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">set-e2uuid <br>
set-e2uuid device uuid</p>

<p style="margin-top: 1em">This sets the ext2/3/4
filesystem UUID of the filesystem on &quot;device&quot; to
&quot;uuid&quot;. The format of the UUID and alternatives
such as &quot;clear&quot;, &quot;random&quot; and
&quot;time&quot; are described in the <br>
tune2fs(8) manpage.</p>

<p style="margin-top: 1em">You can use &quot;vfs-uuid&quot;
to return the existing UUID of a filesystem.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;set-uuid&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">set-hv <br>
hv <br>
set-hv hv</p>

<p style="margin-top: 1em">Set the hypervisor binary that
we will use. The hypervisor depends on the backend, but is
usually the location of the qemu/KVM hypervisor. For the uml
backend, it is the <br>
location of the &quot;linux&quot; or &quot;vmlinux&quot;
binary.</p>

<p style="margin-top: 1em">The default is chosen when the
library was compiled by the configure script.</p>

<p style="margin-top: 1em">You can also override this by
setting the &quot;LIBGUESTFS_HV&quot; environment
variable.</p>

<p style="margin-top: 1em">Note that you should call this
function as early as possible after creating the handle.
This is because some pre-launch operations depend on testing
qemu features (by running <br>
&quot;qemu -help&quot;). If the qemu binary changes, we
don&rsquo;t retest features, and so you might see
inconsistent results. Using the environment variable
&quot;LIBGUESTFS_HV&quot; is safest of all <br>
since that picks the qemu binary at the same time as the
handle is created.</p>

<p style="margin-top: 1em">set-identifier <br>
identifier <br>
set-identifier identifier</p>

<p style="margin-top: 1em">This is an informative string
which the caller may optionally set in the handle. It is
printed in various places, allowing the current handle to be
identified in debugging <br>
output.</p>

<p style="margin-top: 1em">One important place is when
tracing is enabled. If the identifier string is not an empty
string, then trace messages change from this:</p>

<p style="margin-top: 1em">libguestfs: trace: get_tmpdir
<br>
libguestfs: trace: get_tmpdir = &quot;/tmp&quot;</p>

<p style="margin-top: 1em">to this:</p>

<p style="margin-top: 1em">libguestfs: trace: ID:
get_tmpdir <br>
libguestfs: trace: ID: get_tmpdir = &quot;/tmp&quot;</p>

<p style="margin-top: 1em">where &quot;ID&quot; is the
identifier string set by this call.</p>

<p style="margin-top: 1em">The identifier must only contain
alphanumeric ASCII characters, underscore and minus sign.
The default is the empty string.</p>

<p style="margin-top: 1em">See also
&quot;set-program&quot;, &quot;set-trace&quot;,
&quot;get-identifier&quot;.</p>

<p style="margin-top: 1em">set-label <br>
set-label mountable label</p>

<p style="margin-top: 1em">Set the filesystem label on
&quot;mountable&quot; to &quot;label&quot;.</p>

<p style="margin-top: 1em">Only some filesystem types
support labels, and libguestfs supports setting labels on
only a subset of these.</p>

<p style="margin-top: 1em">ext2, ext3, ext4 <br>
Labels are limited to 16 bytes.</p>

<p style="margin-top: 1em">NTFS <br>
Labels are limited to 128 unicode characters.</p>

<p style="margin-top: 1em">XFS The label is limited to 12
bytes. The filesystem must not be mounted when trying to set
the label.</p>

<p style="margin-top: 1em">btrfs <br>
The label is limited to 255 bytes and some characters are
not allowed. Setting the label on a btrfs subvolume will set
the label on its parent filesystem. The filesystem <br>
must not be mounted when trying to set the label.</p>

<p style="margin-top: 1em">fat The label is limited to 11
bytes.</p>

<p style="margin-top: 1em">If there is no support for
changing the label for the type of the specified filesystem,
set_label will fail and set errno as ENOTSUP.</p>

<p style="margin-top: 1em">To read the label on a
filesystem, call &quot;vfs-label&quot;.</p>


<p style="margin-top: 1em">set-libvirt-requested-credential
<br>
set-libvirt-requested-credential index cred</p>

<p style="margin-top: 1em">After requesting the
&quot;index&quot;&rsquo;th credential from the user, call
this function to pass the answer back to libvirt.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>


<p style="margin-top: 1em">set-libvirt-supported-credentials
<br>
set-libvirt-supported-credentials &rsquo;creds
...&rsquo;</p>

<p style="margin-top: 1em">Call this function before
setting an event handler for
&quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;, to supply the list
of credential types that the program knows how to
process.</p>

<p style="margin-top: 1em">The &quot;creds&quot; list must
be a non-empty list of strings. Possible strings are:</p>

<p style="margin-top: 1em">&quot;username&quot; <br>
&quot;authname&quot; <br>
&quot;language&quot; <br>
&quot;cnonce&quot; <br>
&quot;passphrase&quot; <br>
&quot;echoprompt&quot; <br>
&quot;noechoprompt&quot; <br>
&quot;realm&quot; <br>
&quot;external&quot;</p>

<p style="margin-top: 1em">See libvirt documentation for
the meaning of these credential types.</p>

<p style="margin-top: 1em">See &quot;LIBVIRT
AUTHENTICATION&quot; in guestfs(3) for documentation and
example code.</p>

<p style="margin-top: 1em">set-memsize <br>
memsize <br>
set-memsize memsize</p>

<p style="margin-top: 1em">This sets the memory size in
megabytes allocated to the hypervisor. This only has any
effect if called before &quot;launch&quot;.</p>

<p style="margin-top: 1em">You can also change this by
setting the environment variable
&quot;LIBGUESTFS_MEMSIZE&quot; before the handle is
created.</p>

<p style="margin-top: 1em">For more information on the
architecture of libguestfs, see guestfs(3).</p>

<p style="margin-top: 1em">set-network <br>
network <br>
set-network true|false</p>

<p style="margin-top: 1em">If &quot;network&quot; is true,
then the network is enabled in the libguestfs appliance. The
default is false.</p>

<p style="margin-top: 1em">This affects whether commands
are able to access the network (see &quot;RUNNING
COMMANDS&quot; in guestfs(3)).</p>

<p style="margin-top: 1em">You must call this before
calling &quot;launch&quot;, otherwise it has no effect.</p>

<p style="margin-top: 1em">set-path <br>
path <br>
set-path searchpath</p>

<p style="margin-top: 1em">Set the path that libguestfs
searches for kernel and initrd.img.</p>

<p style="margin-top: 1em">The default is
&quot;$libdir/guestfs&quot; unless overridden by setting
&quot;LIBGUESTFS_PATH&quot; environment variable.</p>

<p style="margin-top: 1em">Setting &quot;path&quot; to
&quot;NULL&quot; restores the default path.</p>

<p style="margin-top: 1em">set-pgroup <br>
pgroup <br>
set-pgroup true|false</p>

<p style="margin-top: 1em">If &quot;pgroup&quot; is true,
child processes are placed into their own process group.</p>

<p style="margin-top: 1em">The practical upshot of this is
that signals like &quot;SIGINT&quot; (from users pressing
&quot;^C&quot;) won&rsquo;t be received by the child
process.</p>

<p style="margin-top: 1em">The default for this flag is
false, because usually you want &quot;^C&quot; to kill the
subprocess. Guestfish sets this flag to true when used
interactively, so that &quot;^C&quot; can cancel long- <br>
running commands gracefully (see
&quot;user-cancel&quot;).</p>

<p style="margin-top: 1em">set-program <br>
program <br>
set-program program</p>

<p style="margin-top: 1em">Set the program name. This is an
informative string which the main program may optionally set
in the handle.</p>

<p style="margin-top: 1em">When the handle is created, the
program name in the handle is set to the basename from
&quot;argv[0]&quot;. If that was not possible, it is set to
the empty string (but never &quot;NULL&quot;).</p>

<p style="margin-top: 1em">set-qemu <br>
qemu <br>
set-qemu hv</p>

<p style="margin-top: 1em">Set the hypervisor binary
(usually qemu) that we will use.</p>

<p style="margin-top: 1em">The default is chosen when the
library was compiled by the configure script.</p>

<p style="margin-top: 1em">You can also override this by
setting the &quot;LIBGUESTFS_HV&quot; environment
variable.</p>

<p style="margin-top: 1em">Setting &quot;hv&quot; to
&quot;NULL&quot; restores the default qemu binary.</p>

<p style="margin-top: 1em">Note that you should call this
function as early as possible after creating the handle.
This is because some pre-launch operations depend on testing
qemu features (by running <br>
&quot;qemu -help&quot;). If the qemu binary changes, we
don&rsquo;t retest features, and so you might see
inconsistent results. Using the environment variable
&quot;LIBGUESTFS_HV&quot; is safest of all <br>
since that picks the qemu binary at the same time as the
handle is created.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;set-hv&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">set-recovery-proc <br>
recovery-proc <br>
set-recovery-proc true|false</p>

<p style="margin-top: 1em">If this is called with the
parameter &quot;false&quot; then &quot;launch&quot; does not
create a recovery process. The purpose of the recovery
process is to stop runaway hypervisor processes in the <br>
case where the main program aborts abruptly.</p>

<p style="margin-top: 1em">This only has any effect if
called before &quot;launch&quot;, and the default is
true.</p>

<p style="margin-top: 1em">About the only time when you
would want to disable this is if the main process will fork
itself into the background (&quot;daemonize&quot; itself).
In this case the recovery process <br>
thinks that the main program has disappeared and so kills
the hypervisor, which is not very helpful.</p>

<p style="margin-top: 1em">set-selinux <br>
selinux <br>
set-selinux true|false</p>

<p style="margin-top: 1em">This sets the selinux flag that
is passed to the appliance at boot time. The default is
&quot;selinux=0&quot; (disabled).</p>

<p style="margin-top: 1em">Note that if SELinux is enabled,
it is always in Permissive mode
(&quot;enforcing=0&quot;).</p>

<p style="margin-top: 1em">For more information on the
architecture of libguestfs, see guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;selinux-relabel&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">set-smp <br>
smp <br>
set-smp smp</p>

<p style="margin-top: 1em">Change the number of virtual
CPUs assigned to the appliance. The default is 1. Increasing
this may improve performance, though often it has no
effect.</p>

<p style="margin-top: 1em">This function must be called
before &quot;launch&quot;.</p>

<p style="margin-top: 1em">set-tmpdir <br>
tmpdir <br>
set-tmpdir tmpdir</p>

<p style="margin-top: 1em">Set the directory used by the
handle to store temporary files.</p>

<p style="margin-top: 1em">The environment variables
&quot;LIBGUESTFS_TMPDIR&quot; and &quot;TMPDIR&quot; control
the default value: If &quot;LIBGUESTFS_TMPDIR&quot; is set,
then that is the default. Else if &quot;TMPDIR&quot; is set,
then that <br>
is the default. Else /tmp is the default.</p>

<p style="margin-top: 1em">set-trace <br>
trace <br>
set-trace true|false</p>

<p style="margin-top: 1em">If the command trace flag is set
to 1, then libguestfs calls, parameters and return values
are traced.</p>

<p style="margin-top: 1em">If you want to trace C API calls
into libguestfs (and other libraries) then possibly a better
way is to use the external ltrace(1) command.</p>

<p style="margin-top: 1em">Command traces are disabled
unless the environment variable &quot;LIBGUESTFS_TRACE&quot;
is defined and set to 1.</p>

<p style="margin-top: 1em">Trace messages are normally sent
to &quot;stderr&quot;, unless you register a callback to
send them somewhere else (see
&quot;set-event-callback&quot;).</p>

<p style="margin-top: 1em">set-uuid <br>
set-uuid device uuid</p>

<p style="margin-top: 1em">Set the filesystem UUID on
&quot;device&quot; to &quot;uuid&quot;. If this fails and
the errno is ENOTSUP, means that there is no support for
changing the UUID for the type of the specified <br>
filesystem.</p>

<p style="margin-top: 1em">Only some filesystem types
support setting UUIDs.</p>

<p style="margin-top: 1em">To read the UUID on a
filesystem, call &quot;vfs-uuid&quot;.</p>

<p style="margin-top: 1em">set-uuid-random <br>
set-uuid-random device</p>

<p style="margin-top: 1em">Set the filesystem UUID on
&quot;device&quot; to a random UUID. If this fails and the
errno is ENOTSUP, means that there is no support for
changing the UUID for the type of the specified <br>
filesystem.</p>

<p style="margin-top: 1em">Only some filesystem types
support setting UUIDs.</p>

<p style="margin-top: 1em">To read the UUID on a
filesystem, call &quot;vfs-uuid&quot;.</p>

<p style="margin-top: 1em">set-verbose <br>
verbose <br>
set-verbose true|false</p>

<p style="margin-top: 1em">If &quot;verbose&quot; is true,
this turns on verbose messages.</p>

<p style="margin-top: 1em">Verbose messages are disabled
unless the environment variable &quot;LIBGUESTFS_DEBUG&quot;
is defined and set to 1.</p>

<p style="margin-top: 1em">Verbose messages are normally
sent to &quot;stderr&quot;, unless you register a callback
to send them somewhere else (see
&quot;set-event-callback&quot;).</p>

<p style="margin-top: 1em">setcon <br>
setcon context</p>

<p style="margin-top: 1em">This sets the SELinux security
context of the daemon to the string &quot;context&quot;.</p>

<p style="margin-top: 1em">See the documentation about
SELINUX in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;selinux-relabel&quot; call
instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;selinux&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">setxattr <br>
setxattr xattr val vallen path</p>

<p style="margin-top: 1em">This call sets the extended
attribute named &quot;xattr&quot; of the file
&quot;path&quot; to the value &quot;val&quot; (of length
&quot;vallen&quot;). The value is arbitrary 8 bit data.</p>

<p style="margin-top: 1em">See also: &quot;lsetxattr&quot;,
attr(5).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxxattrs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">sfdisk <br>
sfdisk device cyls heads sectors &rsquo;lines ...&rsquo;</p>

<p style="margin-top: 1em">This is a direct interface to
the sfdisk(8) program for creating partitions on block
devices.</p>

<p style="margin-top: 1em">&quot;device&quot; should be a
block device, for example /dev/sda.</p>

<p style="margin-top: 1em">&quot;cyls&quot;,
&quot;heads&quot; and &quot;sectors&quot; are the number of
cylinders, heads and sectors on the device, which are passed
directly to sfdisk as the -C, -H and -S parameters. If you
pass 0 <br>
for any of these, then the corresponding parameter is
omitted. Usually for &rsquo;large&rsquo; disks, you can just
pass 0 for these, but for small (floppy-sized) disks, sfdisk
(or rather, <br>
the kernel) cannot work out the right geometry and you will
need to tell it.</p>

<p style="margin-top: 1em">&quot;lines&quot; is a list of
lines that we feed to &quot;sfdisk&quot;. For more
information refer to the sfdisk(8) manpage.</p>

<p style="margin-top: 1em">To create a single partition
occupying the whole disk, you would pass &quot;lines&quot;
as a single element list, when the single element being the
string &quot;,&quot; (comma).</p>

<p style="margin-top: 1em">See also: &quot;sfdisk-l&quot;,
&quot;sfdisk-N&quot;, &quot;part-init&quot;</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;part-add&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">sfdiskM <br>
sfdiskM device &rsquo;lines ...&rsquo;</p>

<p style="margin-top: 1em">This is a simplified interface
to the &quot;sfdisk&quot; command, where partition sizes are
specified in megabytes only (rounded to the nearest
cylinder) and you don&rsquo;t need to specify the <br>
cyls, heads and sectors parameters which were rarely if ever
used anyway.</p>

<p style="margin-top: 1em">See also: &quot;sfdisk&quot;,
the sfdisk(8) manpage and &quot;part-disk&quot;</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;part-add&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">sfdisk-N <br>
sfdisk-N device partnum cyls heads sectors line</p>

<p style="margin-top: 1em">This runs sfdisk(8) option to
modify just the single partition &quot;n&quot; (note:
&quot;n&quot; counts from 1).</p>

<p style="margin-top: 1em">For other parameters, see
&quot;sfdisk&quot;. You should usually pass 0 for the
cyls/heads/sectors parameters.</p>

<p style="margin-top: 1em">See also:
&quot;part-add&quot;</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;part-add&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">sfdisk-disk-geometry <br>
sfdisk-disk-geometry device</p>

<p style="margin-top: 1em">This displays the disk geometry
of &quot;device&quot; read from the partition table.
Especially in the case where the underlying block device has
been resized, this can be different from <br>
the kernel&rsquo;s idea of the geometry (see
&quot;sfdisk-kernel-geometry&quot;).</p>

<p style="margin-top: 1em">The result is in human-readable
format, and not designed to be parsed.</p>

<p style="margin-top: 1em">sfdisk-kernel-geometry <br>
sfdisk-kernel-geometry device</p>

<p style="margin-top: 1em">This displays the kernel&rsquo;s
idea of the geometry of &quot;device&quot;.</p>

<p style="margin-top: 1em">The result is in human-readable
format, and not designed to be parsed.</p>

<p style="margin-top: 1em">sfdisk-l <br>
sfdisk-l device</p>

<p style="margin-top: 1em">This displays the partition
table on &quot;device&quot;, in the human-readable output of
the sfdisk(8) command. It is not intended to be parsed.</p>

<p style="margin-top: 1em">See also:
&quot;part-list&quot;</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;part-list&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">sh <br>
sh command</p>

<p style="margin-top: 1em">This call runs a command from
the guest filesystem via the guest&rsquo;s /bin/sh.</p>

<p style="margin-top: 1em">This is like
&quot;command&quot;, but passes the command to:</p>

<p style="margin-top: 1em">/bin/sh -c
&quot;command&quot;</p>

<p style="margin-top: 1em">Depending on the guest&rsquo;s
shell, this usually results in wildcards being expanded,
shell expressions being interpolated and so on.</p>

<p style="margin-top: 1em">All the provisos about
&quot;command&quot; apply to this call.</p>

<p style="margin-top: 1em">sh-lines <br>
sh-lines command</p>

<p style="margin-top: 1em">This is the same as
&quot;sh&quot;, but splits the result into a list of
lines.</p>

<p style="margin-top: 1em">See also:
&quot;command-lines&quot;</p>

<p style="margin-top: 1em">shutdown <br>
shutdown</p>

<p style="margin-top: 1em">This is the opposite of
&quot;launch&quot;. It performs an orderly shutdown of the
backend process(es). If the autosync flag is set (which is
the default) then the disk image is <br>
synchronized.</p>

<p style="margin-top: 1em">If the subprocess exits with an
error then this function will return an error, which should
not be ignored (it may indicate that the disk image could
not be written out <br>
properly).</p>

<p style="margin-top: 1em">It is safe to call this multiple
times. Extra calls are ignored.</p>

<p style="margin-top: 1em">This call does not close or free
up the handle. You still need to call &quot;close&quot;
afterwards.</p>

<p style="margin-top: 1em">&quot;close&quot; will call this
if you don&rsquo;t do it explicitly, but note that any
errors are ignored in that case.</p>

<p style="margin-top: 1em">sleep <br>
sleep secs</p>

<p style="margin-top: 1em">Sleep for &quot;secs&quot;
seconds.</p>

<p style="margin-top: 1em">stat <br>
stat path</p>

<p style="margin-top: 1em">Returns file information for the
given &quot;path&quot;.</p>

<p style="margin-top: 1em">This is the same as the stat(2)
system call.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;statns&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">statns <br>
statns path</p>

<p style="margin-top: 1em">Returns file information for the
given &quot;path&quot;.</p>

<p style="margin-top: 1em">This is the same as the stat(2)
system call.</p>

<p style="margin-top: 1em">statvfs <br>
statvfs path</p>

<p style="margin-top: 1em">Returns file system statistics
for any mounted file system. &quot;path&quot; should be a
file or directory in the mounted file system (typically it
is the mount point itself, but it <br>
doesn&rsquo;t need to be).</p>

<p style="margin-top: 1em">This is the same as the
statvfs(2) system call.</p>

<p style="margin-top: 1em">strings <br>
strings path</p>

<p style="margin-top: 1em">This runs the strings(1) command
on a file and returns the list of printable strings
found.</p>

<p style="margin-top: 1em">The &quot;strings&quot; command
has, in the past, had problems with parsing untrusted files.
These are mitigated in the current version of libguestfs,
but see &quot;CVE-2014-8484&quot; in <br>
guestfs(3).</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">strings-e <br>
strings-e encoding path</p>

<p style="margin-top: 1em">This is like the
&quot;strings&quot; command, but allows you to specify the
encoding of strings that are looked for in the source file
&quot;path&quot;.</p>

<p style="margin-top: 1em">Allowed encodings are:</p>

<p style="margin-top: 1em">s Single 7-bit-byte characters
like ASCII and the ASCII-compatible parts of ISO-8859-X
(this is what &quot;strings&quot; uses).</p>

<p style="margin-top: 1em">S Single 8-bit-byte
characters.</p>

<p style="margin-top: 1em">b 16-bit big endian strings such
as those encoded in UTF-16BE or UCS-2BE.</p>

<p style="margin-top: 1em">l (lower case letter L) <br>
16-bit little endian such as UTF-16LE and UCS-2LE. This is
useful for examining binaries in Windows guests.</p>

<p style="margin-top: 1em">B 32-bit big endian such as
UCS-4BE.</p>

<p style="margin-top: 1em">L 32-bit little endian such as
UCS-4LE.</p>

<p style="margin-top: 1em">The returned strings are
transcoded to UTF-8.</p>

<p style="margin-top: 1em">The &quot;strings&quot; command
has, in the past, had problems with parsing untrusted files.
These are mitigated in the current version of libguestfs,
but see &quot;CVE-2014-8484&quot; in <br>
guestfs(3).</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">swapoff-device <br>
swapoff-device device</p>

<p style="margin-top: 1em">This command disables the
libguestfs appliance swap device or partition named
&quot;device&quot;. See &quot;swapon-device&quot;.</p>

<p style="margin-top: 1em">swapoff-file <br>
swapoff-file file</p>

<p style="margin-top: 1em">This command disables the
libguestfs appliance swap on file.</p>

<p style="margin-top: 1em">swapoff-label <br>
swapoff-label label</p>

<p style="margin-top: 1em">This command disables the
libguestfs appliance swap on labeled swap partition.</p>

<p style="margin-top: 1em">swapoff-uuid <br>
swapoff-uuid uuid</p>

<p style="margin-top: 1em">This command disables the
libguestfs appliance swap partition with the given UUID.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxfsuuid&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">swapon-device <br>
swapon-device device</p>

<p style="margin-top: 1em">This command enables the
libguestfs appliance to use the swap device or partition
named &quot;device&quot;. The increased memory is made
available for all commands, for example those run <br>
using &quot;command&quot; or &quot;sh&quot;.</p>

<p style="margin-top: 1em">Note that you should not swap to
existing guest swap partitions unless you know what you are
doing. They may contain hibernation information, or other
information that the guest <br>
doesn&rsquo;t want you to trash. You also risk leaking
information about the host to the guest this way. Instead,
attach a new host device to the guest and swap on that.</p>

<p style="margin-top: 1em">swapon-file <br>
swapon-file file</p>

<p style="margin-top: 1em">This command enables swap to a
file. See &quot;swapon-device&quot; for other notes.</p>

<p style="margin-top: 1em">swapon-label <br>
swapon-label label</p>

<p style="margin-top: 1em">This command enables swap to a
labeled swap partition. See &quot;swapon-device&quot; for
other notes.</p>

<p style="margin-top: 1em">swapon-uuid <br>
swapon-uuid uuid</p>

<p style="margin-top: 1em">This command enables swap to a
swap partition with the given UUID. See
&quot;swapon-device&quot; for other notes.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;linuxfsuuid&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">sync <br>
sync</p>

<p style="margin-top: 1em">This syncs the disk, so that any
writes are flushed through to the underlying disk image.</p>

<p style="margin-top: 1em">You should always call this if
you have modified a disk image, before closing the
handle.</p>

<p style="margin-top: 1em">syslinux <br>
syslinux device [directory:..]</p>

<p style="margin-top: 1em">Install the SYSLINUX bootloader
on &quot;device&quot;.</p>

<p style="margin-top: 1em">The device parameter must be
either a whole disk formatted as a FAT filesystem, or a
partition formatted as a FAT filesystem. In the latter case,
the partition should be marked <br>
as &quot;active&quot; (&quot;part-set-bootable&quot;) and a
Master Boot Record must be installed (eg. using
&quot;pwrite-device&quot;) on the first sector of the whole
disk. The SYSLINUX package comes with <br>
some suitable Master Boot Records. See the syslinux(1) man
page for further information.</p>

<p style="margin-top: 1em">The optional arguments are:</p>

<p style="margin-top: 1em">directory <br>
Install SYSLINUX in the named subdirectory, instead of in
the root directory of the FAT filesystem.</p>

<p style="margin-top: 1em">Additional configuration can be
supplied to SYSLINUX by placing a file called syslinux.cfg
on the FAT filesystem, either in the root directory, or
under directory if that <br>
optional argument is being used. For further information
about the contents of this file, see syslinux(1).</p>

<p style="margin-top: 1em">See also
&quot;extlinux&quot;.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;syslinux&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">tail <br>
tail path</p>

<p style="margin-top: 1em">This command returns up to the
last 10 lines of a file as a list of strings.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">tail-n <br>
tail-n nrlines path</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is a positive number, this returns the
last &quot;nrlines&quot; lines of the file
&quot;path&quot;.</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is a negative number, this returns lines
from the file &quot;path&quot;, starting with the
&quot;-nrlines&quot;th line.</p>

<p style="margin-top: 1em">If the parameter
&quot;nrlines&quot; is zero, this returns an empty list.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">tar-in <br>
tar-in-opts <br>
tar-in (tarfile|-) directory [compress:..]
[xattrs:true|false] [selinux:true|false]
[acls:true|false]</p>

<p style="margin-top: 1em">This command uploads and unpacks
local file &quot;tarfile&quot; into directory.</p>

<p style="margin-top: 1em">The optional
&quot;compress&quot; flag controls compression. If not
given, then the input should be an uncompressed tar file.
Otherwise one of the following strings may be given to <br>
select the compression type of the input file:
&quot;compress&quot;, &quot;gzip&quot;, &quot;bzip2&quot;,
&quot;xz&quot;, &quot;lzop&quot;. (Note that not all builds
of libguestfs will support all of these compression
types).</p>

<p style="margin-top: 1em">The other optional arguments
are:</p>

<p style="margin-top: 1em">&quot;xattrs&quot; <br>
If set to true, extended attributes are restored from the
tar file.</p>

<p style="margin-top: 1em">&quot;selinux&quot; <br>
If set to true, SELinux contexts are restored from the tar
file.</p>

<p style="margin-top: 1em">&quot;acls&quot; <br>
If set to true, POSIX ACLs are restored from the tar
file.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">tar-out <br>
tar-out-opts <br>
tar-out directory (tarfile|-) [compress:..]
[numericowner:true|false] [excludes:..] [xattrs:true|false]
[selinux:true|false] [acls:true|false]</p>

<p style="margin-top: 1em">This command packs the contents
of directory and downloads it to local file
&quot;tarfile&quot;.</p>

<p style="margin-top: 1em">The optional
&quot;compress&quot; flag controls compression. If not
given, then the output will be an uncompressed tar file.
Otherwise one of the following strings may be given to
select <br>
the compression type of the output file:
&quot;compress&quot;, &quot;gzip&quot;, &quot;bzip2&quot;,
&quot;xz&quot;, &quot;lzop&quot;. (Note that not all builds
of libguestfs will support all of these compression
types).</p>

<p style="margin-top: 1em">The other optional arguments
are:</p>

<p style="margin-top: 1em">&quot;excludes&quot; <br>
A list of wildcards. Files are excluded if they match any of
the wildcards.</p>

<p style="margin-top: 1em">&quot;numericowner&quot; <br>
If set to true, the output tar file will contain UID/GID
numbers instead of user/group names.</p>

<p style="margin-top: 1em">&quot;xattrs&quot; <br>
If set to true, extended attributes are saved in the output
tar.</p>

<p style="margin-top: 1em">&quot;selinux&quot; <br>
If set to true, SELinux contexts are saved in the output
tar.</p>

<p style="margin-top: 1em">&quot;acls&quot; <br>
If set to true, POSIX ACLs are saved in the output tar.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">tgz-in <br>
tgz-in (tarball|-) directory</p>

<p style="margin-top: 1em">This command uploads and unpacks
local file &quot;tarball&quot; (a gzip compressed tar file)
into directory.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;tar-in&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">tgz-out <br>
tgz-out directory (tarball|-)</p>

<p style="margin-top: 1em">This command packs the contents
of directory and downloads it to local file
&quot;tarball&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;tar-out&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">touch <br>
touch path</p>

<p style="margin-top: 1em">Touch acts like the touch(1)
command. It can be used to update the timestamps on a file,
or, if the file does not exist, to create a new zero-length
file.</p>

<p style="margin-top: 1em">This command only works on
regular files, and will fail on other file types such as
directories, symbolic links, block special etc.</p>

<p style="margin-top: 1em">truncate <br>
truncate path</p>

<p style="margin-top: 1em">This command truncates
&quot;path&quot; to a zero-length file. The file must exist
already.</p>

<p style="margin-top: 1em">truncate-size <br>
truncate-size path size</p>

<p style="margin-top: 1em">This command truncates
&quot;path&quot; to size &quot;size&quot; bytes. The file
must exist already.</p>

<p style="margin-top: 1em">If the current file size is less
than &quot;size&quot; then the file is extended to the
required size with zero bytes. This creates a sparse file
(ie. disk blocks are not allocated for <br>
the file until you write to it). To create a non-sparse file
of zeroes, use &quot;fallocate64&quot; instead.</p>

<p style="margin-top: 1em">tune2fs <br>
tune2fs device [force:true|false] [maxmountcount:N]
[mountcount:N] [errorbehavior:..] [group:N]
[intervalbetweenchecks:N] [reservedblockspercentage:N]
[lastmounteddirectory:..] [reservedblockscount:N]
[user:N]</p>

<p style="margin-top: 1em">This call allows you to adjust
various filesystem parameters of an ext2/ext3/ext4
filesystem called &quot;device&quot;.</p>

<p style="margin-top: 1em">The optional parameters are:</p>

<p style="margin-top: 1em">&quot;force&quot; <br>
Force tune2fs to complete the operation even in the face of
errors. This is the same as the tune2fs &quot;-f&quot;
option.</p>

<p style="margin-top: 1em">&quot;maxmountcount&quot; <br>
Set the number of mounts after which the filesystem is
checked by e2fsck(8). If this is 0 then the number of mounts
is disregarded. This is the same as the tune2fs
&quot;-c&quot; <br>
option.</p>

<p style="margin-top: 1em">&quot;mountcount&quot; <br>
Set the number of times the filesystem has been mounted.
This is the same as the tune2fs &quot;-C&quot; option.</p>

<p style="margin-top: 1em">&quot;errorbehavior&quot; <br>
Change the behavior of the kernel code when errors are
detected. Possible values currently are:
&quot;continue&quot;, &quot;remount-ro&quot;,
&quot;panic&quot;. In practice these options don&rsquo;t
really <br>
make any difference, particularly for write errors.</p>

<p style="margin-top: 1em">This is the same as the tune2fs
&quot;-e&quot; option.</p>

<p style="margin-top: 1em">&quot;group&quot; <br>
Set the group which can use reserved filesystem blocks. This
is the same as the tune2fs &quot;-g&quot; option except that
it can only be specified as a number.</p>


<p style="margin-top: 1em">&quot;intervalbetweenchecks&quot;
<br>
Adjust the maximal time between two filesystem checks (in
seconds). If the option is passed as 0 then time-dependent
checking is disabled.</p>

<p style="margin-top: 1em">This is the same as the tune2fs
&quot;-i&quot; option.</p>


<p style="margin-top: 1em">&quot;reservedblockspercentage&quot;
<br>
Set the percentage of the filesystem which may only be
allocated by privileged processes. This is the same as the
tune2fs &quot;-m&quot; option.</p>


<p style="margin-top: 1em">&quot;lastmounteddirectory&quot;
<br>
Set the last mounted directory. This is the same as the
tune2fs &quot;-M&quot; option.</p>

<p style="margin-top: 1em">&quot;reservedblockscount&quot;
Set the number of reserved filesystem blocks. This is the
same as the tune2fs &quot;-r&quot; option. <br>
&quot;user&quot; <br>
Set the user who can use the reserved filesystem blocks.
This is the same as the tune2fs &quot;-u&quot; option except
that it can only be specified as a number.</p>

<p style="margin-top: 1em">To get the current values of
filesystem parameters, see &quot;tune2fs-l&quot;. For
precise details of how tune2fs works, see the tune2fs(8) man
page.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">tune2fs-l <br>
tune2fs-l device</p>

<p style="margin-top: 1em">This returns the contents of the
ext2, ext3 or ext4 filesystem superblock on
&quot;device&quot;.</p>

<p style="margin-top: 1em">It is the same as running
&quot;tune2fs -l device&quot;. See tune2fs(8) manpage for
more details. The list of fields returned isn&rsquo;t
clearly defined, and depends on both the version of <br>
&quot;tune2fs&quot; that libguestfs was built against, and
the filesystem itself.</p>

<p style="margin-top: 1em">txz-in <br>
txz-in (tarball|-) directory</p>

<p style="margin-top: 1em">This command uploads and unpacks
local file &quot;tarball&quot; (an xz compressed tar file)
into directory.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;tar-in&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xz&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">txz-out <br>
txz-out directory (tarball|-)</p>

<p style="margin-top: 1em">This command packs the contents
of directory and downloads it to local file
&quot;tarball&quot; (as an xz compressed tar archive).</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;tar-out&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xz&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">umask <br>
umask mask</p>

<p style="margin-top: 1em">This function sets the mask used
for creating new files and device nodes to &quot;mask &amp;
0777&quot;.</p>

<p style="margin-top: 1em">Typical umask values would be
022 which creates new files with permissions like
&quot;-rw-r--r--&quot; or &quot;-rwxr-xr-x&quot;, and 002
which creates new files with permissions like
&quot;-rw-rw-r--&quot; <br>
or &quot;-rwxrwxr-x&quot;.</p>

<p style="margin-top: 1em">The default umask is 022. This
is important because it means that directories and device
nodes will be created with 0644 or 0755 mode even if you
specify 0777.</p>

<p style="margin-top: 1em">See also &quot;get-umask&quot;,
umask(2), &quot;mknod&quot;, &quot;mkdir&quot;.</p>

<p style="margin-top: 1em">This call returns the previous
umask.</p>

<p style="margin-top: 1em">umount <br>
unmount <br>
umount-opts <br>
umount pathordevice [force:true|false]
[lazyunmount:true|false]</p>

<p style="margin-top: 1em">This unmounts the given
filesystem. The filesystem may be specified either by its
mountpoint (path) or the device which contains the
filesystem.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">umount-all <br>
unmount-all <br>
umount-all</p>

<p style="margin-top: 1em">This unmounts all mounted
filesystems.</p>

<p style="margin-top: 1em">Some internal mounts are not
unmounted by this call.</p>

<p style="margin-top: 1em">umount-local <br>
umount-local [retry:true|false]</p>

<p style="margin-top: 1em">If libguestfs is exporting the
filesystem on a local mountpoint, then this unmounts it.</p>

<p style="margin-top: 1em">See &quot;MOUNT LOCAL&quot; in
guestfs(3) for full documentation.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">upload <br>
upload (filename|-) remotefilename</p>

<p style="margin-top: 1em">Upload local file filename to
remotefilename on the filesystem.</p>

<p style="margin-top: 1em">filename can also be a named
pipe.</p>

<p style="margin-top: 1em">See also
&quot;download&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">upload-offset <br>
upload-offset (filename|-) remotefilename offset</p>

<p style="margin-top: 1em">Upload local file filename to
remotefilename on the filesystem.</p>

<p style="margin-top: 1em">remotefilename is overwritten
starting at the byte &quot;offset&quot; specified. The
intention is to overwrite parts of existing files or
devices, although if a non-existent file is <br>
specified then it is created with a &quot;hole&quot; before
&quot;offset&quot;. The size of the data written is implicit
in the size of the source filename.</p>

<p style="margin-top: 1em">Note that there is no limit on
the amount of data that can be uploaded with this call,
unlike with &quot;pwrite&quot;, and this call always writes
the full amount unless an error occurs.</p>

<p style="margin-top: 1em">See also &quot;upload&quot;,
&quot;pwrite&quot;.</p>

<p style="margin-top: 1em">Use &quot;-&quot; instead of a
filename to read/write from stdin/stdout.</p>

<p style="margin-top: 1em">user-cancel <br>
user-cancel</p>

<p style="margin-top: 1em">This function cancels the
current upload or download operation.</p>

<p style="margin-top: 1em">Unlike most other libguestfs
calls, this function is signal safe and thread safe. You can
call it from a signal handler or from another thread,
without needing to do any <br>
locking.</p>

<p style="margin-top: 1em">The transfer that was in
progress (if there is one) will stop shortly afterwards, and
will return an error. The errno (see
&quot;guestfs_last_errno&quot;) is set to &quot;EINTR&quot;,
so you can <br>
test for this to find out if the operation was cancelled or
failed because of another error.</p>

<p style="margin-top: 1em">No cleanup is performed: for
example, if a file was being uploaded then after
cancellation there may be a partially uploaded file. It is
the caller&rsquo;s responsibility to clean up <br>
if necessary.</p>

<p style="margin-top: 1em">There are two common places that
you might call &quot;user-cancel&quot;:</p>

<p style="margin-top: 1em">In an interactive text-based
program, you might call it from a &quot;SIGINT&quot; signal
handler so that pressing &quot;^C&quot; cancels the current
operation. (You also need to call <br>
&quot;guestfs_set_pgroup&quot; so that child processes
don&rsquo;t receive the &quot;^C&quot; signal).</p>

<p style="margin-top: 1em">In a graphical program, when the
main thread is displaying a progress bar with a cancel
button, wire up the cancel button to call this function.</p>

<p style="margin-top: 1em">utimens <br>
utimens path atsecs atnsecs mtsecs mtnsecs</p>

<p style="margin-top: 1em">This command sets the timestamps
of a file with nanosecond precision.</p>

<p style="margin-top: 1em">&quot;atsecs, atnsecs&quot; are
the last access time (atime) in secs and nanoseconds from
the epoch.</p>

<p style="margin-top: 1em">&quot;mtsecs, mtnsecs&quot; are
the last modification time (mtime) in secs and nanoseconds
from the epoch.</p>

<p style="margin-top: 1em">If the *nsecs field contains the
special value &quot;-1&quot; then the corresponding
timestamp is set to the current time. (The *secs field is
ignored in this case).</p>

<p style="margin-top: 1em">If the *nsecs field contains the
special value &quot;-2&quot; then the corresponding
timestamp is left unchanged. (The *secs field is ignored in
this case).</p>

<p style="margin-top: 1em">utsname <br>
utsname</p>

<p style="margin-top: 1em">This returns the kernel version
of the appliance, where this is available. This information
is only useful for debugging. Nothing in the returned
structure is defined by the <br>
API.</p>

<p style="margin-top: 1em">version <br>
version</p>

<p style="margin-top: 1em">Return the libguestfs version
number that the program is linked against.</p>

<p style="margin-top: 1em">Note that because of dynamic
linking this is not necessarily the version of libguestfs
that you compiled against. You can compile the program, and
then at runtime dynamically <br>
link against a completely different libguestfs.so
library.</p>

<p style="margin-top: 1em">This call was added in version
1.0.58. In previous versions of libguestfs there was no way
to get the version number. From C code you can use dynamic
linker functions to find <br>
out if this symbol exists (if it doesn&rsquo;t, then
it&rsquo;s an earlier version).</p>

<p style="margin-top: 1em">The call returns a structure
with four elements. The first three (&quot;major&quot;,
&quot;minor&quot; and &quot;release&quot;) are numbers and
correspond to the usual version triplet. The fourth element
<br>
(&quot;extra&quot;) is a string and is normally empty, but
may be used for distro-specific information.</p>

<p style="margin-top: 1em">To construct the original
version string: &quot;$major.$minor.$release$extra&quot;</p>

<p style="margin-top: 1em">See also: &quot;LIBGUESTFS
VERSION NUMBERS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">Note: Don&rsquo;t use this call
to test for availability of features. In enterprise
distributions we backport features from later versions into
earlier versions, making this an <br>
unreliable way to test for features. Use
&quot;available&quot; or &quot;feature-available&quot;
instead.</p>

<p style="margin-top: 1em">vfs-label <br>
vfs-label mountable</p>

<p style="margin-top: 1em">This returns the label of the
filesystem on &quot;mountable&quot;.</p>

<p style="margin-top: 1em">If the filesystem is unlabeled,
this returns the empty string.</p>

<p style="margin-top: 1em">To find a filesystem from the
label, use &quot;findfs-label&quot;.</p>

<p style="margin-top: 1em">vfs-minimum-size <br>
vfs-minimum-size mountable</p>

<p style="margin-top: 1em">Get the minimum size of
filesystem in bytes. This is the minimum possible size for
filesystem shrinking.</p>

<p style="margin-top: 1em">If getting minimum size of
specified filesystem is not supported, this will fail and
set errno as ENOTSUP.</p>

<p style="margin-top: 1em">See also ntfsresize(8),
resize2fs(8), btrfs(8), xfs_info(8).</p>

<p style="margin-top: 1em">vfs-type <br>
vfs-type mountable</p>

<p style="margin-top: 1em">This command gets the filesystem
type corresponding to the filesystem on
&quot;mountable&quot;.</p>

<p style="margin-top: 1em">For most filesystems, the result
is the name of the Linux VFS module which would be used to
mount this filesystem if you mounted it without specifying
the filesystem type. For <br>
example a string such as &quot;ext3&quot; or
&quot;ntfs&quot;.</p>

<p style="margin-top: 1em">vfs-uuid <br>
get-uuid <br>
vfs-uuid mountable</p>

<p style="margin-top: 1em">This returns the filesystem UUID
of the filesystem on &quot;mountable&quot;.</p>

<p style="margin-top: 1em">If the filesystem does not have
a UUID, this returns the empty string.</p>

<p style="margin-top: 1em">To find a filesystem from the
UUID, use &quot;findfs-uuid&quot;.</p>

<p style="margin-top: 1em">vg-activate <br>
vg-activate true|false &rsquo;volgroups ...&rsquo;</p>

<p style="margin-top: 1em">This command activates or (if
&quot;activate&quot; is false) deactivates all logical
volumes in the listed volume groups
&quot;volgroups&quot;.</p>

<p style="margin-top: 1em">This command is the same as
running &quot;vgchange -a y|n volgroups...&quot;</p>

<p style="margin-top: 1em">Note that if
&quot;volgroups&quot; is an empty list then all volume
groups are activated or deactivated.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vg-activate-all <br>
vg-activate-all true|false</p>

<p style="margin-top: 1em">This command activates or (if
&quot;activate&quot; is false) deactivates all logical
volumes in all volume groups.</p>

<p style="margin-top: 1em">This command is the same as
running &quot;vgchange -a y|n&quot;</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgchange-uuid <br>
vgchange-uuid vg</p>

<p style="margin-top: 1em">Generate a new random UUID for
the volume group &quot;vg&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgchange-uuid-all <br>
vgchange-uuid-all</p>

<p style="margin-top: 1em">Generate new random UUIDs for
all volume groups.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgcreate <br>
vgcreate volgroup &rsquo;physvols ...&rsquo;</p>

<p style="margin-top: 1em">This creates an LVM volume group
called &quot;volgroup&quot; from the non-empty list of
physical volumes &quot;physvols&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vglvuuids <br>
vglvuuids vgname</p>

<p style="margin-top: 1em">Given a VG called
&quot;vgname&quot;, this returns the UUIDs of all the
logical volumes created in this volume group.</p>

<p style="margin-top: 1em">You can use this along with
&quot;lvs&quot; and &quot;lvuuid&quot; calls to associate
logical volumes and volume groups.</p>

<p style="margin-top: 1em">See also
&quot;vgpvuuids&quot;.</p>

<p style="margin-top: 1em">vgmeta <br>
vgmeta vgname</p>

<p style="margin-top: 1em">&quot;vgname&quot; is an LVM
volume group. This command examines the volume group and
returns its metadata.</p>

<p style="margin-top: 1em">Note that the metadata is an
internal structure used by LVM, subject to change at any
time, and is provided for information only.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgpvuuids <br>
vgpvuuids vgname</p>

<p style="margin-top: 1em">Given a VG called
&quot;vgname&quot;, this returns the UUIDs of all the
physical volumes that this volume group resides on.</p>

<p style="margin-top: 1em">You can use this along with
&quot;pvs&quot; and &quot;pvuuid&quot; calls to associate
physical volumes and volume groups.</p>

<p style="margin-top: 1em">See also
&quot;vglvuuids&quot;.</p>

<p style="margin-top: 1em">vgremove <br>
vgremove vgname</p>

<p style="margin-top: 1em">Remove an LVM volume group
&quot;vgname&quot;, (for example &quot;VG&quot;).</p>

<p style="margin-top: 1em">This also forcibly removes all
logical volumes in the volume group (if any).</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgrename <br>
vgrename volgroup newvolgroup</p>

<p style="margin-top: 1em">Rename a volume group
&quot;volgroup&quot; with the new name
&quot;newvolgroup&quot;.</p>

<p style="margin-top: 1em">vgs <br>
vgs</p>

<p style="margin-top: 1em">List all the volumes groups
detected. This is the equivalent of the vgs(8) command.</p>

<p style="margin-top: 1em">This returns a list of just the
volume group names that were detected (eg.
&quot;VolGroup00&quot;).</p>

<p style="margin-top: 1em">See also
&quot;vgs-full&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgs-full <br>
vgs-full</p>

<p style="margin-top: 1em">List all the volumes groups
detected. This is the equivalent of the vgs(8) command. The
&quot;full&quot; version includes all fields.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;lvm2&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">vgscan <br>
vgscan</p>

<p style="margin-top: 1em">This rescans all block devices
and rebuilds the list of LVM physical volumes, volume groups
and logical volumes.</p>

<p style="margin-top: 1em">vguuid <br>
vguuid vgname</p>

<p style="margin-top: 1em">This command returns the UUID of
the LVM VG named &quot;vgname&quot;.</p>

<p style="margin-top: 1em">wc-c <br>
wc-c path</p>

<p style="margin-top: 1em">This command counts the
characters in a file, using the &quot;wc -c&quot; external
command.</p>

<p style="margin-top: 1em">wc-l <br>
wc-l path</p>

<p style="margin-top: 1em">This command counts the lines in
a file, using the &quot;wc -l&quot; external command.</p>

<p style="margin-top: 1em">wc-w <br>
wc-w path</p>

<p style="margin-top: 1em">This command counts the words in
a file, using the &quot;wc -w&quot; external command.</p>

<p style="margin-top: 1em">wipefs <br>
wipefs device</p>

<p style="margin-top: 1em">This command erases filesystem
or RAID signatures from the specified &quot;device&quot; to
make the filesystem invisible to libblkid.</p>

<p style="margin-top: 1em">This does not erase the
filesystem itself nor any other data from the
&quot;device&quot;.</p>

<p style="margin-top: 1em">Compare with &quot;zero&quot;
which zeroes the first few blocks of a device.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;wipefs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">write <br>
write path content</p>

<p style="margin-top: 1em">This call creates a file called
&quot;path&quot;. The content of the file is the string
&quot;content&quot; (which can contain any 8 bit data).</p>

<p style="margin-top: 1em">See also
&quot;write-append&quot;.</p>

<p style="margin-top: 1em">write-append <br>
write-append path content</p>

<p style="margin-top: 1em">This call appends
&quot;content&quot; to the end of file &quot;path&quot;. If
&quot;path&quot; does not exist, then a new file is
created.</p>

<p style="margin-top: 1em">See also &quot;write&quot;.</p>

<p style="margin-top: 1em">write-file <br>
write-file path content size</p>

<p style="margin-top: 1em">This call creates a file called
&quot;path&quot;. The contents of the file is the string
&quot;content&quot; (which can contain any 8 bit data), with
length &quot;size&quot;.</p>

<p style="margin-top: 1em">As a special case, if
&quot;size&quot; is 0 then the length is calculated using
&quot;strlen&quot; (so in this case the content cannot
contain embedded ASCII NULs).</p>

<p style="margin-top: 1em">NB. Owing to a bug, writing
content containing ASCII NUL characters does not work, even
if the length is specified.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;write&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">xfs-admin <br>
xfs-admin device [extunwritten:true|false]
[imgfile:true|false] [v2log:true|false]
[projid32bit:true|false] [lazycounter:true|false] [label:..]
[uuid:..]</p>

<p style="margin-top: 1em">Change the parameters of the XFS
filesystem on &quot;device&quot;.</p>

<p style="margin-top: 1em">Devices that are mounted cannot
be modified. Administrators must unmount filesystems before
this call can modify parameters.</p>

<p style="margin-top: 1em">Some of the parameters of a
mounted filesystem can be examined and modified using the
&quot;xfs-info&quot; and &quot;xfs-growfs&quot; calls.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">xfs-growfs <br>
xfs-growfs path [datasec:true|false] [logsec:true|false]
[rtsec:true|false] [datasize:N] [logsize:N] [rtsize:N]
[rtextsize:N] [maxpct:N]</p>

<p style="margin-top: 1em">Grow the XFS filesystem mounted
at &quot;path&quot;.</p>

<p style="margin-top: 1em">The returned struct contains
geometry information. Missing fields are returned as
&quot;-1&quot; (for numeric fields) or empty string.</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">xfs-info <br>
xfs-info pathordevice</p>

<p style="margin-top: 1em">&quot;pathordevice&quot; is a
mounted XFS filesystem or a device containing an XFS
filesystem. This command returns the geometry of the
filesystem.</p>

<p style="margin-top: 1em">The returned struct contains
geometry information. Missing fields are returned as
&quot;-1&quot; (for numeric fields) or empty string.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">xfs-repair <br>
xfs-repair device [forcelogzero:true|false]
[nomodify:true|false] [noprefetch:true|false]
[forcegeometry:true|false] [maxmem:N] [ihashsize:N]
[bhashsize:N] [agstride:N] [logdev:..] [rtdev:..]</p>

<p style="margin-top: 1em">Repair corrupt or damaged XFS
filesystem on &quot;device&quot;.</p>

<p style="margin-top: 1em">The filesystem is specified
using the &quot;device&quot; argument which should be the
device name of the disk partition or volume containing the
filesystem. If given the name of a block <br>
device, &quot;xfs_repair&quot; will attempt to find the raw
device associated with the specified block device and will
use the raw device instead.</p>

<p style="margin-top: 1em">Regardless, the filesystem to be
repaired must be unmounted, otherwise, the resulting
filesystem may be inconsistent or corrupt.</p>

<p style="margin-top: 1em">The returned status indicates
whether filesystem corruption was detected (returns 1) or
was not detected (returns 0).</p>

<p style="margin-top: 1em">This command has one or more
optional arguments. See &quot;OPTIONAL ARGUMENTS&quot;.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;xfs&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">zegrep <br>
zegrep regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;zegrep&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zegrepi <br>
zegrepi regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;zegrep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zero <br>
zero device</p>

<p style="margin-top: 1em">This command writes zeroes over
the first few blocks of &quot;device&quot;.</p>

<p style="margin-top: 1em">How many blocks are zeroed
isn&rsquo;t specified (but it&rsquo;s not enough to securely
wipe the device). It should be sufficient to remove any
partition tables, filesystem superblocks and <br>
so on.</p>

<p style="margin-top: 1em">If blocks are already zero, then
this command avoids writing zeroes. This prevents the
underlying device from becoming non-sparse or growing
unnecessarily.</p>

<p style="margin-top: 1em">See also:
&quot;zero-device&quot;, &quot;scrub-device&quot;,
&quot;is-zero-device&quot;</p>

<p style="margin-top: 1em">zero-device <br>
zero-device device</p>

<p style="margin-top: 1em">This command writes zeroes over
the entire &quot;device&quot;. Compare with &quot;zero&quot;
which just zeroes the first few blocks of a device.</p>

<p style="margin-top: 1em">If blocks are already zero, then
this command avoids writing zeroes. This prevents the
underlying device from becoming non-sparse or growing
unnecessarily.</p>

<p style="margin-top: 1em">zero-free-space <br>
zero-free-space directory</p>

<p style="margin-top: 1em">Zero the free space in the
filesystem mounted on directory. The filesystem must be
mounted read-write.</p>

<p style="margin-top: 1em">The filesystem contents are not
affected, but any free space in the filesystem is freed.</p>

<p style="margin-top: 1em">Free space is not
&quot;trimmed&quot;. You may want to call &quot;fstrim&quot;
either as an alternative to this, or after calling this,
depending on your requirements.</p>

<p style="margin-top: 1em">zerofree <br>
zerofree device</p>

<p style="margin-top: 1em">This runs the zerofree program
on &quot;device&quot;. This program claims to zero unused
inodes and disk blocks on an ext2/3 filesystem, thus making
it possible to compress the filesystem <br>
more effectively.</p>

<p style="margin-top: 1em">You should not run this program
if the filesystem is mounted.</p>

<p style="margin-top: 1em">It is possible that using this
program can damage the filesystem or data on the
filesystem.</p>

<p style="margin-top: 1em">This command depends on the
feature &quot;zerofree&quot;. See also
&quot;feature-available&quot;.</p>

<p style="margin-top: 1em">zfgrep <br>
zfgrep pattern path</p>

<p style="margin-top: 1em">This calls the external
&quot;zfgrep&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zfgrepi <br>
zfgrepi pattern path</p>

<p style="margin-top: 1em">This calls the external
&quot;zfgrep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zfile <br>
zfile meth path</p>

<p style="margin-top: 1em">This command runs file after
first decompressing &quot;path&quot; using
&quot;method&quot;.</p>

<p style="margin-top: 1em">&quot;method&quot; must be one
of &quot;gzip&quot;, &quot;compress&quot; or
&quot;bzip2&quot;.</p>

<p style="margin-top: 1em">Since 1.0.63, use
&quot;file&quot; instead which can now process compressed
files.</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;file&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zgrep <br>
zgrep regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;zgrep&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">zgrepi <br>
zgrepi regex path</p>

<p style="margin-top: 1em">This calls the external
&quot;zgrep -i&quot; program and returns the matching
lines.</p>

<p style="margin-top: 1em">Because of the message protocol,
there is a transfer limit of somewhere between 2MB and 4MB.
See &quot;PROTOCOL LIMITS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">This function is deprecated. In
new code, use the &quot;grep&quot; call instead.</p>

<p style="margin-top: 1em">Deprecated functions will not be
removed from the API, but the fact that they are deprecated
indicates that there are problems with correct use of these
functions.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
guestfish returns 0 if the commands completed without error,
or 1 if there was an error.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
EDITOR <br>
The &quot;edit&quot; command uses $EDITOR as the editor. If
not set, it uses &quot;vi&quot;.</p>

<p style="margin-top: 1em">GUESTFISH_DISPLAY_IMAGE <br>
The &quot;display&quot; command uses
$GUESTFISH_DISPLAY_IMAGE to display images. If not set, it
uses display(1).</p>

<p style="margin-top: 1em">GUESTFISH_INIT <br>
Printed when guestfish starts. See &quot;PROMPT&quot;.</p>

<p style="margin-top: 1em">GUESTFISH_OUTPUT <br>
Printed before guestfish output. See &quot;PROMPT&quot;.</p>

<p style="margin-top: 1em">GUESTFISH_PID <br>
Used with the --remote option to specify the remote
guestfish process to control. See section &quot;REMOTE
CONTROL GUESTFISH OVER A SOCKET&quot;.</p>

<p style="margin-top: 1em">GUESTFISH_PS1 <br>
Set the command prompt. See &quot;PROMPT&quot;.</p>

<p style="margin-top: 1em">GUESTFISH_RESTORE <br>
Printed before guestfish exits. See &quot;PROMPT&quot;.</p>

<p style="margin-top: 1em">HEXEDITOR <br>
The &quot;hexedit&quot; command uses $HEXEDITOR as the
external hex editor. If not specified, the external
hexedit(1) program is used.</p>

<p style="margin-top: 1em">HOME <br>
If compiled with GNU readline support, various files in the
home directory can be used. See &quot;FILES&quot;.</p>

<p style="margin-top: 1em">LIBGUESTFS_APPEND <br>
Pass additional options to the guest kernel.</p>

<p style="margin-top: 1em">LIBGUESTFS_ATTACH_METHOD <br>
This is the old way to set
&quot;LIBGUESTFS_BACKEND&quot;.</p>

<p style="margin-top: 1em">LIBGUESTFS_BACKEND <br>
Choose the default way to create the appliance. See
&quot;guestfs_set_backend&quot; in guestfs(3).</p>

<p style="margin-top: 1em">LIBGUESTFS_BACKEND_SETTINGS <br>
A colon-separated list of backend-specific settings. See
&quot;BACKEND&quot; in guestfs(3), &quot;BACKEND
SETTINGS&quot; in guestfs(3).</p>

<p style="margin-top: 1em">LIBGUESTFS_CACHEDIR <br>
The location where libguestfs will cache its appliance, when
using a supermin appliance. The appliance is cached and
shared between all handles which have the same effective
<br>
user ID.</p>

<p style="margin-top: 1em">If
&quot;LIBGUESTFS_CACHEDIR&quot; is not set, then
&quot;TMPDIR&quot; is used. If &quot;TMPDIR&quot; is not
set, then /var/tmp is used.</p>

<p style="margin-top: 1em">See also
&quot;LIBGUESTFS_TMPDIR&quot;, &quot;set-cachedir&quot;.</p>

<p style="margin-top: 1em">LIBGUESTFS_DEBUG <br>
Set &quot;LIBGUESTFS_DEBUG=1&quot; to enable verbose
messages. This has the same effect as using the -v
option.</p>

<p style="margin-top: 1em">LIBGUESTFS_HV <br>
Set the default hypervisor (usually qemu) binary that
libguestfs uses. If not set, then the qemu which was found
at compile time by the configure script is used.</p>

<p style="margin-top: 1em">LIBGUESTFS_MEMSIZE <br>
Set the memory allocated to the qemu process, in megabytes.
For example:</p>

<p style="margin-top: 1em">LIBGUESTFS_MEMSIZE=700</p>

<p style="margin-top: 1em">LIBGUESTFS_PATH <br>
Set the path that guestfish uses to search for kernel and
initrd.img. See the discussion of paths in guestfs(3).</p>

<p style="margin-top: 1em">LIBGUESTFS_QEMU <br>
This is the old way to set &quot;LIBGUESTFS_HV&quot;.</p>

<p style="margin-top: 1em">LIBGUESTFS_TMPDIR <br>
The location where libguestfs will store temporary files
used by each handle.</p>

<p style="margin-top: 1em">If &quot;LIBGUESTFS_TMPDIR&quot;
is not set, then &quot;TMPDIR&quot; is used. If
&quot;TMPDIR&quot; is not set, then /tmp is used.</p>

<p style="margin-top: 1em">See also
&quot;LIBGUESTFS_CACHEDIR&quot;, &quot;set-tmpdir&quot;.</p>

<p style="margin-top: 1em">LIBGUESTFS_TRACE <br>
Set &quot;LIBGUESTFS_TRACE=1&quot; to enable command
traces.</p>

<p style="margin-top: 1em">PAGER <br>
The &quot;more&quot; command uses $PAGER as the pager. If
not set, it uses &quot;more&quot;.</p>

<p style="margin-top: 1em">PATH <br>
Libguestfs and guestfish may run some external programs, and
rely on $PATH being set to a reasonable value. If using the
libvirt backend, libvirt will not work at all unless <br>
$PATH contains the path of qemu/KVM.</p>

<p style="margin-top: 1em">SUPERMIN_KERNEL <br>
SUPERMIN_KERNEL_VERSION <br>
SUPERMIN_MODULES <br>
These three environment variables allow the kernel that
libguestfs uses in the appliance to be selected. If
$SUPERMIN_KERNEL is not set, then the most recent host
kernel is <br>
chosen. For more information about kernel selection, see
supermin(1).</p>

<p style="margin-top: 1em">TMPDIR <br>
See &quot;LIBGUESTFS_CACHEDIR&quot;,
&quot;LIBGUESTFS_TMPDIR&quot;.</p>

<p style="margin-top: 1em">FILES <br>
$XDG_CONFIG_HOME/libguestfs/libguestfs-tools.conf <br>
$HOME/.libguestfs-tools.rc <br>
$XDG_CONFIG_DIRS/libguestfs/libguestfs-tools.conf <br>
/etc/libguestfs-tools.conf <br>
This configuration file controls the default read-only or
read-write mode (--ro or --rw).</p>

<p style="margin-top: 1em">See
libguestfs-tools.conf(5).</p>

<p style="margin-top: 1em">$HOME/.guestfish <br>
If compiled with GNU readline support, then the command
history is saved in this file.</p>

<p style="margin-top: 1em">$HOME/.inputrc <br>
/etc/inputrc <br>
If compiled with GNU readline support, then these files can
be used to configure readline. For further information,
please see &quot;INITIALIZATION FILE&quot; in
readline(3).</p>

<p style="margin-top: 1em">To write rules which only apply
to guestfish, use:</p>

<p style="margin-top: 1em">$if guestfish <br>
... <br>
$endif</p>

<p style="margin-top: 1em">Variables that you can set in
inputrc that change the behaviour of guestfish in useful
ways include:</p>

<p style="margin-top: 1em">completion-ignore-case (default:
on) <br>
By default, guestfish will ignore case when tab-completing
paths on the disk. Use:</p>

<p style="margin-top: 1em">set completion-ignore-case
off</p>

<p style="margin-top: 1em">to make guestfish case
sensitive.</p>

<p style="margin-top: 1em">test1.img <br>
test2.img (etc) <br>
When using the -N or --new option, the prepared disk or
filesystem will be created in the file test1.img in the
current directory. The second use of -N will use test2.img
<br>
and so on. Any existing file with the same name will be
overwritten. You can use a different filename by using the
&quot;filename=&quot; prefix.</p>

<p style="margin-top: 1em">SEE ALSO <br>
guestfs(3), http://libguestfs.org/, virt-alignment-scan(1),
virt-builder(1), virt-cat(1), virt-copy-in(1),
virt-copy-out(1), virt-customize(1), virt-df(1),
virt-diff(1), <br>
virt-edit(1), virt-filesystems(1), virt-inspector(1),
virt-list-filesystems(1), virt-list-partitions(1),
virt-log(1), virt-ls(1), virt-make-fs(1), virt-p2v(1),
virt-rescue(1), <br>
virt-resize(1), virt-sparsify(1), virt-sysprep(1),
virt-tar(1), virt-tar-in(1), virt-tar-out(1), virt-v2v(1),
virt-win-reg(1), libguestfs-tools.conf(5), display(1),
hexedit(1), <br>
supermin(1).</p>

<p style="margin-top: 1em">AUTHORS <br>
Richard W.M. Jones (&quot;rjones at redhat dot
com&quot;)</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright (C) 2009-2016 Red Hat Inc.</p>

<p style="margin-top: 1em">LICENSE <br>
This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
<br>
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, <br>
Boston, MA 02110-1301 USA.</p>

<p style="margin-top: 1em">BUGS <br>
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-top: 1em">To report a new bug against
libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-top: 1em">When reporting a bug, please
supply:</p>

<p style="margin-top: 1em">&Acirc;&middot; The version of
libguestfs.</p>

<p style="margin-top: 1em">&Acirc;&middot; Where you got
libguestfs (eg. which Linux distro, compiled from source,
etc)</p>

<p style="margin-top: 1em">&Acirc;&middot; Describe the bug
accurately and give a way to reproduce it.</p>

<p style="margin-top: 1em">&Acirc;&middot; Run
libguestfs-test-tool(1) and paste the complete, unedited
output into the bug report.</p>

<p style="margin-top: 1em">libguestfs-1.32.7 2016-08-08
guestfish(1)</p>
<hr>
</body>
</html>
