<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GDCMCONV(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GDCMCONV(1)</td>
    <td class="head-vol">DICOM Manipulation.</td>
    <td class="head-rtitle">GDCMCONV(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
gdcmconv - Tool to convert DICOM to DICOM.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
gdcmconv [options] file-in file-out
</pre>
</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>gdcmconv</b> command line program takes as input a DICOM file (file-in)
  and process it to generate an output DICOM file (file-out). The command line
  option dictate the type of operation(s) gdcmconv will use to generate the
  output file.
<h1 class="Sh" title="Sh" id="PARAMETERS"><a class="selflink" href="#PARAMETERS">PARAMETERS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
file-in   DICOM input filename
<div class="Pp"></div>
file-out  DICOM output filename
</pre>
</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -i --input      DICOM filename
  -o --output     DICOM filename
</pre>
</div>
<h1 class="Sh" title="Sh" id="SPECIFIC_OPTIONS"><a class="selflink" href="#SPECIFIC_OPTIONS">SPECIFIC
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -X --explicit            Change Transfer Syntax to explicit.
  -M --implicit            Change Transfer Syntax to implicit.
  -U --use-dict            Use dict for VR (only public by default).
     --with-private-dict   Use private dict for VR (advanced user only).
  -C --check-meta          Check File Meta Information (advanced user only).
     --root-uid            Root UID.
     --remove-gl           Remove group length (deprecated in DICOM 2008).
     --remove-private-tags Remove private tags.
     --remove-retired      Remove retired tags.
</pre>
</div>
<h1 class="Sh" title="Sh" id="IMAGE_OPTIONS"><a class="selflink" href="#IMAGE_OPTIONS">IMAGE
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -l --apply-lut                      Apply LUT (non-standard, advanced user only).
  -P --photometric-interpretation %s  Change Photometric Interpretation (when possible).
  -w --raw                            Decompress image.
  -d --deflated                       Compress using deflated (gzip).
  -J --jpeg                           Compress image in jpeg.
  -K --j2k                            Compress image in j2k.
  -L --jpegls                         Compress image in jpeg-ls.
  -R --rle                            Compress image in rle (lossless only).
  -F --force                          Force decompression/merging before recompression/splitting.
     --generate-icon                  Generate icon.
     --icon-minmax %d,%d              Min/Max value for icon.
     --icon-auto-minmax               Automatically commpute best Min/Max values for icon.
     --compress-icon                  Decide whether icon follows main TransferSyntax or remains uncompressed.
     --planar-configuration [01]      Change planar configuration.
  -Y --lossy                          Use the lossy (if possible) compressor.
  -S --split %d                       Write 2D image with multiple fragments (using max size)
</pre>
</div>
<h1 class="Sh" title="Sh" id="JPEG_OPTIONS"><a class="selflink" href="#JPEG_OPTIONS">JPEG
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -q --quality %*f           set quality.
</pre>
</div>
<h1 class="Sh" title="Sh" id="JPEG-LS_OPTIONS"><a class="selflink" href="#JPEG-LS_OPTIONS">JPEG-LS
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -e --lossy-error %*i       set error.
</pre>
</div>
<h1 class="Sh" title="Sh" id="J2K_OPTIONS"><a class="selflink" href="#J2K_OPTIONS">J2K
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -r --rate    %*f           set rate.
  -q --quality %*f           set quality.
  -t --tile %d,%d            set tile size.
  -n --number-resolution %d  set number of resolution.
     --irreversible          set irreversible.
</pre>
</div>
<h1 class="Sh" title="Sh" id="GENERAL_OPTIONS"><a class="selflink" href="#GENERAL_OPTIONS">GENERAL
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -h   --help
         print this help text and exit
<div class="Pp"></div>
  -v   --version
         print version information and exit
<div class="Pp"></div>
  -V   --verbose
         verbose mode (warning+error).
<div class="Pp"></div>
  -W   --warning
         warning mode, print warning information
<div class="Pp"></div>
  -E   --error
         error mode, print error information
<div class="Pp"></div>
  -D   --debug
         debug mode, print debug information
</pre>
</div>
<h1 class="Sh" title="Sh" id="SPECIAL_OPTIONS"><a class="selflink" href="#SPECIAL_OPTIONS">SPECIAL
  OPTIONS</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  -I --ignore-errors   convert even if file is corrupted (advanced users only, see disclaimers).
</pre>
</div>
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLE"><a class="selflink" href="#ENVIRONMENT_VARIABLE">ENVIRONMENT
  VARIABLE</a></h1>
<div style="margin-left: 4.00ex;">
<pre>
  GDCM_ROOT_UID Root UID
</pre>
</div>
<h1 class="Sh" title="Sh" id="SIMPLE_USAGE"><a class="selflink" href="#SIMPLE_USAGE">SIMPLE
  USAGE</a></h1>
<b>gdcmconv</b> is a great tool to convert broken DICOM implementation into
  properly parsable DICOM file. Usage is simply:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv input.dcm output.dcm
</pre>
</div>
<div class="Pp"></div>
or if you prefer being explicit:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv -i input.dcm -o output.dcm
</pre>
</div>
<div class="Pp"></div>
Even though gdcmconv can overwrite directly on the same file (input.dcm =
  output.dcm), it is recommended that user should first convert into a different
  file to make sure the bug is properly handled by GDCM.
<div class="Pp"></div>
Typical cases where you would want to use gdcmconv in its simple form:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">&#x2022;convert non-cp246 conforming file into
  conforming cp246,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;convert implicit little endian
  transfer syntax file meta header into proper explicit little endian transfer
  syntax,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;convert the GE-13 bytes bug,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;convert dual syntax file:
  implicit/explicit,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;convert Philips dual Little Endian/Big
  Endian file,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;convert GDCM 1.2.0 broken UN-2-bytes
  fields,</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;...</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;All other broken files listed in the
  supported refsection.</div>
<div style="height: 1.00em;">&#x00A0;</div>
When no option other is used, only the dataset is inspected. So encapsulated
  Pixel Data, for instance, is not inspected for well known bugs.
<div class="Pp"></div>
When doing this kind of work, this is usually a good idea to perform some kind
  of quality control, see gdcmconv Quality Control refsection (down below).
<h1 class="Sh" title="Sh" id="TYPICAL_USAGE"><a class="selflink" href="#TYPICAL_USAGE">TYPICAL
  USAGE</a></h1>
<h2 class="Ss" title="Ss" id="File_Meta_Header"><a class="selflink" href="#File_Meta_Header">File
  Meta Header</a></h2>
Running
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv input.dcm output.dcm
</pre>
</div>
<div class="Pp"></div>
Is not enough to recompute file meta header, when input file is buggy. You may
  want to use: &#x2013;check-meta
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --check-meta input.dcm output.dcm
</pre>
</div>
<div class="Pp"></div>
See typical cases such as: GE_DLX-8-MONO2-PrivateSyntax.dcm or
  PICKER-16-MONO2-No_DicomV3_Preamble.dcm from gdcmData.
<h2 class="Ss" title="Ss" id="Conversion_to_Explicit_Transfer_Syntax"><a class="selflink" href="#Conversion_to_Explicit_Transfer_Syntax">Conversion
  to Explicit Transfer Syntax</a></h2>
To convert a file that was written using Implicit Transfer Syntax into Explicit
  Transfer Syntax simply use:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --explicit uncompressed.dcm compressed.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossless_JPEG"><a class="selflink" href="#Compressing_to_lossless_JPEG">Compressing
  to lossless JPEG</a></h2>
To compress an uncompressed DICOM file to a JPEG Lossless encapsulated format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --jpeg uncompressed.dcm compressed.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossy_JPEG"><a class="selflink" href="#Compressing_to_lossy_JPEG">Compressing
  to lossy JPEG</a></h2>
To compress an uncompressed DICOM file to a JPEG Lossy encapsulated format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --lossy --jpeg -q 90 uncompressed.dcm compressed.dcm
</pre>
</div>
<div class="Pp"></div>
Note:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
  -q is just one of the many way to specify lossy quality, you need to inspect the other cmd line flag to specify lossyness properties.
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossless_JPEG-LS"><a class="selflink" href="#Compressing_to_lossless_JPEG-LS">Compressing
  to lossless JPEG-LS</a></h2>
To compress an uncompressed DICOM file to a JPEG-LS Lossless encapsulated
  format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --jpegls uncompressed.dcm compressed.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossy_JPEG-LS"><a class="selflink" href="#Compressing_to_lossy_JPEG-LS">Compressing
  to lossy JPEG-LS</a></h2>
To compress an uncompressed DICOM file to a JPEG-LS Lossy encapsulated format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --lossy --jpegls -e 2 uncompressed.dcm lossy_compressed.dcm
</pre>
</div>
<div class="Pp"></div>
Note:
<div class="Pp"></div>
-e (or &#x2013;lossy-error) means that the maximum tolerate error is 2 for each
  pixel value
<h2 class="Ss" title="Ss" id="Compressing_to_lossless_J2K"><a class="selflink" href="#Compressing_to_lossless_J2K">Compressing
  to lossless J2K</a></h2>
To compress an uncompressed DICOM file to a JPEG-2000 Lossless encapsulated
  format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --j2k uncompressed.dcm compressed.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossy_J2K"><a class="selflink" href="#Compressing_to_lossy_J2K">Compressing
  to lossy J2K</a></h2>
To compress an uncompressed DICOM file to a JPEG-2000 Lossy encapsulated format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --lossy -q 55,50,45 --j2k uncompressed.dcm lossy_compressed.dcm
</pre>
</div>
<div class="Pp"></div>
Note:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
  -q is just one of the many way to specify lossy quality, you need to inspect the other cmd line flag to specify lossyness properties.
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_to_lossless_RLE"><a class="selflink" href="#Compressing_to_lossless_RLE">Compressing
  to lossless RLE</a></h2>
To compress an uncompressed DICOM file to a RLE Lossless encapsulated format:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --rle uncompressed.dcm compressed.dcm
</pre>
</div>
<div class="Pp"></div>
There is no such thing as lossy RLE compression.
<h2 class="Ss" title="Ss" id="Split_encapsulated_DICOM:"><a class="selflink" href="#Split_encapsulated_DICOM:">Split
  encapsulated DICOM:</a></h2>
To split an encapsulated stream into smaller chunk (1024 bytes each):
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --split 1024 rle.dcm rle_1024.dcm
</pre>
</div>
<div class="Pp"></div>
If an odd number of bytes is passed it will be rounded down to the next even
  number (eg. 1025 -&gt; 1024) since DICOM only allow even number for Value
  Length.
<h2 class="Ss" title="Ss" id="Forcing_(re)compression"><a class="selflink" href="#Forcing_(re)compression">Forcing
  (re)compression</a></h2>
Sometime it is necessary to use the &#x2013;force option. By default when user
  specify &#x2013;j2k and input file is already in JPEG 2000 encapsulated DICOM
  format then no operation takes places. By using &#x2013;force you make sure
  that (re)compression operation takes places.
<div class="Pp"></div>
Real life example of why you would use &#x2013;force:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;When Pixel Data is missing data / is
  padded with junk</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;When you would like to make sure GDCM
  can handle decompression &amp; recompression cycle</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Decompressing_a_Compressed_DICOM"><a class="selflink" href="#Decompressing_a_Compressed_DICOM">Decompressing
  a Compressed DICOM</a></h2>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --raw compressed.dcm uncompressed.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Compressing_an_uncompressed_Icon"><a class="selflink" href="#Compressing_an_uncompressed_Icon">Compressing
  an uncompressed Icon</a></h2>
By default when compressing a DICOM Image file, gdcmconv will not compress the
  icon. A user option needs to be turned on to explicitly force the compression
  of the Icon Image Sequence Pixel Data
<div class="Pp"></div>
For example, by default we will not compress the Icon Image Sequence Pixel Data
  attribute:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --jpeg gdcmData/simpleImageWithIcon.dcm uncompressed_icon.dcm
</pre>
</div>
<div class="Pp"></div>
In the following example we will explicitly compress the Icon Image Sequence
  Pixel Data attibute. In that case the same Transfer Syntax is being used for
  both the main Pixel Data and the Pixel Data from the Icon Image Sequence:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --jpeg --compress-icon gdcmData/simpleImageWithIcon.dcm compressed_icon.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Generating_an_Icon"><a class="selflink" href="#Generating_an_Icon">Generating
  an Icon</a></h2>
For some application it might be necessary to produce a small preview of the
  main image to be able to quickly load that short preview instead of the main
  image. In that case:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --raw --generate-icon gdcmData/test.acr test_icon.dcm
</pre>
</div>
<div class="Pp"></div>
In some cases the main Pixel Data element is expressed as pixel defined on
  16bits. Since Icon can only store at most pixel of size 8bits, a rescale
  operation needs to take place. In order to properly select a better interval
  for doing the rescale operation user can specify the min max used for the
  rescale operation:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --raw --generate-icon --icon-minmax 0,192 gdcmData/012345.002.050.dcm icon_minmax.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="Changing_the_planar_Configuration"><a class="selflink" href="#Changing_the_planar_Configuration">Changing
  the planar Configuration</a></h2>
Often RLE files are compressed using a different Planar Configuration (RRR ...
  GGG... BBB...) instead of the usual triplet (RGB ... RGB ... RGB ). So upon
  decompression the Planar Configuration is 1. This is perfectly legal in DICOM,
  however this is unconventional, and thus it may be a good idea to also change
  the planar configuration and set it to the default :
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --raw --planar-configuration 0 compressed.dcm uncompressed1.dcm
</pre>
</div>
<div class="Pp"></div>
To reinvert the planar configuration of file 'uncompressed1.dcm', simply do:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ gdcmconv --raw --planar-configuration 1 uncompressed1.dcm uncompressed2.dcm
</pre>
</div>
<h1 class="Sh" title="Sh" id="LOSSLESS_CONVERSION"><a class="selflink" href="#LOSSLESS_CONVERSION">LOSSLESS
  CONVERSION</a></h1>
When talking about lossless conversion, there is an ambiguity that need to be
  understood. To achieve higher compression ratio, the RGB color space is
  usually not used, in favor of a YBR one. Changing from one color space to the
  other is (bit level) not lossless.
<div class="Pp"></div>
For more detail, see what are the true lossless transformations as described:
<div class="Pp"></div>
<b>http://gdcm.sourceforge.net/wiki/index.php/Color_Space_Transformations</b>
<h1 class="Sh" title="Sh" id="QUALITY_CONTROL"><a class="selflink" href="#QUALITY_CONTROL">QUALITY
  CONTROL</a></h1>
One important part when using gdcmconv it to have a way to quality control the
  output.
<div class="Pp"></div>
You can use 3rd party tool to check the output of gdcmconv is correct.
<h2 class="Ss" title="Ss" id="DCMTK_/_dicom3tools"><a class="selflink" href="#DCMTK_/_dicom3tools">DCMTK
  / dicom3tools</a></h2>
Using another DICOM implementation such as the one from DCMTK or dicom3tools can
  be a good process to check the output of gdcmconv.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;For DCMTK use: dcmdump</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;For dicom3tools use: dcdump</div>
<div style="height: 1.00em;">&#x00A0;</div>
For reference, gdcmconv &#x2013;raw will act as dcmdjpeg +cn +px, since it never
  tries to convert color space.
<h2 class="Ss" title="Ss" id="VIM:_vimdiff"><a class="selflink" href="#VIM:_vimdiff">VIM:
  vimdiff</a></h2>
You can setup your favorite editor to compare the output, for instance in vim:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
autocmd BufReadPre *.dcm set ro
autocmd BufReadPost *.dcm silent %!dcmdump -M +uc &quot;%&quot;
</pre>
</div>
<div class="Pp"></div>
then simply do:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ vimdiff input.dcm output.dcm
</pre>
</div>
<h2 class="Ss" title="Ss" id="vbindiff"><a class="selflink" href="#vbindiff">vbindiff</a></h2>
On UNIX you can visually compare binary file using the vbindiff command:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
$ vbindiff input.dcm output.dcm
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>gdcmdump</b>(1), <b>gdcmraw</b>(1), <b>gdcminfo</b>(1), <b>gdcmdiff</b>(1)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Mathieu Malaterre</b>
<div style="margin-left: 4.00ex;">Main developer</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2006, 2011 Mathieu Malaterre
<div>&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">01/05/2017</td>
    <td class="foot-os">GDCM 2.6.6</td>
  </tr>
</table>
</body>
</html>
