<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:12:19 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GDCMCONV(1) DICOM Manipulation. GDCMCONV(1)</p>

<p style="margin-top: 1em">NAME <br>
gdcmconv - Tool to convert DICOM to DICOM.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
gdcmconv [options] file-in file-out</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The gdcmconv command line program takes as input a DICOM
file (file-in) and process it to generate an output DICOM
file (file-out). The command line option dictate the type of
<br>
operation(s) gdcmconv will use to generate the output
file.</p>

<p style="margin-top: 1em">PARAMETERS <br>
file-in DICOM input filename</p>

<p style="margin-top: 1em">file-out DICOM output
filename</p>

<p style="margin-top: 1em">OPTIONS <br>
-i --input DICOM filename <br>
-o --output DICOM filename</p>

<p style="margin-top: 1em">SPECIFIC OPTIONS <br>
-X --explicit Change Transfer Syntax to explicit. <br>
-M --implicit Change Transfer Syntax to implicit. <br>
-U --use-dict Use dict for VR (only public by default). <br>
--with-private-dict Use private dict for VR (advanced user
only). <br>
-C --check-meta Check File Meta Information (advanced user
only). <br>
--root-uid Root UID. <br>
--remove-gl Remove group length (deprecated in DICOM 2008).
<br>
--remove-private-tags Remove private tags. <br>
--remove-retired Remove retired tags.</p>

<p style="margin-top: 1em">IMAGE OPTIONS <br>
-l --apply-lut Apply LUT (non-standard, advanced user only).
<br>
-P --photometric-interpretation %s Change Photometric
Interpretation (when possible). <br>
-w --raw Decompress image. <br>
-d --deflated Compress using deflated (gzip). <br>
-J --jpeg Compress image in jpeg. <br>
-K --j2k Compress image in j2k. <br>
-L --jpegls Compress image in jpeg-ls. <br>
-R --rle Compress image in rle (lossless only). <br>
-F --force Force decompression/merging before
recompression/splitting. <br>
--generate-icon Generate icon. <br>
--icon-minmax %d,%d Min/Max value for icon. <br>
--icon-auto-minmax Automatically commpute best Min/Max
values for icon. <br>
--compress-icon Decide whether icon follows main
TransferSyntax or remains uncompressed. <br>
--planar-configuration [01] Change planar configuration.
<br>
-Y --lossy Use the lossy (if possible) compressor. <br>
-S --split %d Write 2D image with multiple fragments (using
max size)</p>

<p style="margin-top: 1em">JPEG OPTIONS <br>
-q --quality %*f set quality.</p>

<p style="margin-top: 1em">JPEG-LS OPTIONS <br>
-e --lossy-error %*i set error.</p>

<p style="margin-top: 1em">J2K OPTIONS <br>
-r --rate %*f set rate. <br>
-q --quality %*f set quality. <br>
-t --tile %d,%d set tile size. <br>
-n --number-resolution %d set number of resolution. <br>
--irreversible set irreversible.</p>

<p style="margin-top: 1em">GENERAL OPTIONS <br>
-h --help <br>
print this help text and exit</p>

<p style="margin-top: 1em">-v --version <br>
print version information and exit</p>

<p style="margin-top: 1em">-V --verbose <br>
verbose mode (warning+error).</p>

<p style="margin-top: 1em">-W --warning <br>
warning mode, print warning information</p>

<p style="margin-top: 1em">-E --error <br>
error mode, print error information</p>

<p style="margin-top: 1em">-D --debug <br>
debug mode, print debug information</p>

<p style="margin-top: 1em">SPECIAL OPTIONS <br>
-I --ignore-errors convert even if file is corrupted
(advanced users only, see disclaimers).</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLE <br>
GDCM_ROOT_UID Root UID</p>

<p style="margin-top: 1em">SIMPLE USAGE <br>
gdcmconv is a great tool to convert broken DICOM
implementation into properly parsable DICOM file. Usage is
simply:</p>

<p style="margin-top: 1em">$ gdcmconv input.dcm
output.dcm</p>

<p style="margin-top: 1em">or if you prefer being
explicit:</p>

<p style="margin-top: 1em">$ gdcmconv -i input.dcm -o
output.dcm</p>

<p style="margin-top: 1em">Even though gdcmconv can
overwrite directly on the same file (input.dcm =
output.dcm), it is recommended that user should first
convert into a different file to make sure the bug <br>
is properly handled by GDCM.</p>

<p style="margin-top: 1em">Typical cases where you would
want to use gdcmconv in its simple form:</p>

<p style="margin-top: 1em">&Acirc;&middot; convert
non-cp246 conforming file into conforming cp246,</p>

<p style="margin-top: 1em">&Acirc;&middot; convert implicit
little endian transfer syntax file meta header into proper
explicit little endian transfer syntax,</p>

<p style="margin-top: 1em">&Acirc;&middot; convert the
GE-13 bytes bug,</p>

<p style="margin-top: 1em">&Acirc;&middot; convert dual
syntax file: implicit/explicit,</p>

<p style="margin-top: 1em">&Acirc;&middot; convert Philips
dual Little Endian/Big Endian file,</p>

<p style="margin-top: 1em">&Acirc;&middot; convert GDCM
1.2.0 broken UN-2-bytes fields,</p>

<p style="margin-top: 1em">&Acirc;&middot; ...</p>

<p style="margin-top: 1em">&Acirc;&middot; All other broken
files listed in the supported refsection.</p>

<p style="margin-top: 1em">When no option other is used,
only the dataset is inspected. So encapsulated Pixel Data,
for instance, is not inspected for well known bugs.</p>

<p style="margin-top: 1em">When doing this kind of work,
this is usually a good idea to perform some kind of quality
control, see gdcmconv Quality Control refsection (down
below).</p>

<p style="margin-top: 1em">TYPICAL USAGE <br>
File Meta Header <br>
Running</p>

<p style="margin-top: 1em">$ gdcmconv input.dcm
output.dcm</p>

<p style="margin-top: 1em">Is not enough to recompute file
meta header, when input file is buggy. You may want to use:
&acirc;check-meta</p>

<p style="margin-top: 1em">$ gdcmconv --check-meta
input.dcm output.dcm</p>

<p style="margin-top: 1em">See typical cases such as:
GE_DLX-8-MONO2-PrivateSyntax.dcm or
PICKER-16-MONO2-No_DicomV3_Preamble.dcm from gdcmData.</p>

<p style="margin-top: 1em">Conversion to Explicit Transfer
Syntax <br>
To convert a file that was written using Implicit Transfer
Syntax into Explicit Transfer Syntax simply use:</p>

<p style="margin-top: 1em">$ gdcmconv --explicit
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">Compressing to lossless JPEG
<br>
To compress an uncompressed DICOM file to a JPEG Lossless
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --jpeg
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">Compressing to lossy JPEG <br>
To compress an uncompressed DICOM file to a JPEG Lossy
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --lossy --jpeg -q 90
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">Note:</p>

<p style="margin-top: 1em">-q is just one of the many way
to specify lossy quality, you need to inspect the other cmd
line flag to specify lossyness properties.</p>

<p style="margin-top: 1em">Compressing to lossless JPEG-LS
<br>
To compress an uncompressed DICOM file to a JPEG-LS Lossless
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --jpegls
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">Compressing to lossy JPEG-LS
<br>
To compress an uncompressed DICOM file to a JPEG-LS Lossy
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --lossy --jpegls -e 2
uncompressed.dcm lossy_compressed.dcm</p>

<p style="margin-top: 1em">Note:</p>

<p style="margin-top: 1em">-e (or &acirc;lossy-error) means
that the maximum tolerate error is 2 for each pixel
value</p>

<p style="margin-top: 1em">Compressing to lossless J2K <br>
To compress an uncompressed DICOM file to a JPEG-2000
Lossless encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --j2k
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">Compressing to lossy J2K <br>
To compress an uncompressed DICOM file to a JPEG-2000 Lossy
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --lossy -q 55,50,45
--j2k uncompressed.dcm lossy_compressed.dcm</p>

<p style="margin-top: 1em">Note:</p>

<p style="margin-top: 1em">-q is just one of the many way
to specify lossy quality, you need to inspect the other cmd
line flag to specify lossyness properties.</p>

<p style="margin-top: 1em">Compressing to lossless RLE <br>
To compress an uncompressed DICOM file to a RLE Lossless
encapsulated format:</p>

<p style="margin-top: 1em">$ gdcmconv --rle
uncompressed.dcm compressed.dcm</p>

<p style="margin-top: 1em">There is no such thing as lossy
RLE compression.</p>

<p style="margin-top: 1em">Split encapsulated DICOM: <br>
To split an encapsulated stream into smaller chunk (1024
bytes each):</p>

<p style="margin-top: 1em">$ gdcmconv --split 1024 rle.dcm
rle_1024.dcm</p>

<p style="margin-top: 1em">If an odd number of bytes is
passed it will be rounded down to the next even number (eg.
1025 -&gt; 1024) since DICOM only allow even number for
Value Length.</p>

<p style="margin-top: 1em">Forcing (re)compression <br>
Sometime it is necessary to use the &acirc;force option. By
default when user specify &acirc;j2k and input file is
already in JPEG 2000 encapsulated DICOM format then no
operation takes <br>
places. By using &acirc;force you make sure that
(re)compression operation takes places.</p>

<p style="margin-top: 1em">Real life example of why you
would use &acirc;force:</p>

<p style="margin-top: 1em">&Acirc;&middot; When Pixel Data
is missing data / is padded with junk</p>

<p style="margin-top: 1em">&Acirc;&middot; When you would
like to make sure GDCM can handle decompression &amp;
recompression cycle</p>

<p style="margin-top: 1em">Decompressing a Compressed DICOM
<br>
$ gdcmconv --raw compressed.dcm uncompressed.dcm</p>

<p style="margin-top: 1em">Compressing an uncompressed Icon
<br>
By default when compressing a DICOM Image file, gdcmconv
will not compress the icon. A user option needs to be turned
on to explicitly force the compression of the Icon Image
<br>
Sequence Pixel Data</p>

<p style="margin-top: 1em">For example, by default we will
not compress the Icon Image Sequence Pixel Data
attribute:</p>

<p style="margin-top: 1em">$ gdcmconv --jpeg
gdcmData/simpleImageWithIcon.dcm uncompressed_icon.dcm</p>

<p style="margin-top: 1em">In the following example we will
explicitly compress the Icon Image Sequence Pixel Data
attibute. In that case the same Transfer Syntax is being
used for both the main Pixel Data <br>
and the Pixel Data from the Icon Image Sequence:</p>

<p style="margin-top: 1em">$ gdcmconv --jpeg
--compress-icon gdcmData/simpleImageWithIcon.dcm
compressed_icon.dcm</p>

<p style="margin-top: 1em">Generating an Icon <br>
For some application it might be necessary to produce a
small preview of the main image to be able to quickly load
that short preview instead of the main image. In that
case:</p>

<p style="margin-top: 1em">$ gdcmconv --raw --generate-icon
gdcmData/test.acr test_icon.dcm</p>

<p style="margin-top: 1em">In some cases the main Pixel
Data element is expressed as pixel defined on 16bits. Since
Icon can only store at most pixel of size 8bits, a rescale
operation needs to take place. <br>
In order to properly select a better interval for doing the
rescale operation user can specify the min max used for the
rescale operation:</p>

<p style="margin-top: 1em">$ gdcmconv --raw --generate-icon
--icon-minmax 0,192 gdcmData/012345.002.050.dcm
icon_minmax.dcm</p>

<p style="margin-top: 1em">Changing the planar
Configuration <br>
Often RLE files are compressed using a different Planar
Configuration (RRR ... GGG... BBB...) instead of the usual
triplet (RGB ... RGB ... RGB ). So upon decompression the
<br>
Planar Configuration is 1. This is perfectly legal in DICOM,
however this is unconventional, and thus it may be a good
idea to also change the planar configuration and set it to
<br>
the default :</p>

<p style="margin-top: 1em">$ gdcmconv --raw
--planar-configuration 0 compressed.dcm
uncompressed1.dcm</p>

<p style="margin-top: 1em">To reinvert the planar
configuration of file &rsquo;uncompressed1.dcm&rsquo;,
simply do:</p>

<p style="margin-top: 1em">$ gdcmconv --raw
--planar-configuration 1 uncompressed1.dcm
uncompressed2.dcm</p>

<p style="margin-top: 1em">LOSSLESS CONVERSION <br>
When talking about lossless conversion, there is an
ambiguity that need to be understood. To achieve higher
compression ratio, the RGB color space is usually not used,
in favor <br>
of a YBR one. Changing from one color space to the other is
(bit level) not lossless.</p>

<p style="margin-top: 1em">For more detail, see what are
the true lossless transformations as described:</p>


<p style="margin-top: 1em">http://gdcm.sourceforge.net/wiki/index.php/Color_Space_Transformations</p>

<p style="margin-top: 1em">QUALITY CONTROL <br>
One important part when using gdcmconv it to have a way to
quality control the output.</p>

<p style="margin-top: 1em">You can use 3rd party tool to
check the output of gdcmconv is correct.</p>

<p style="margin-top: 1em">DCMTK / dicom3tools <br>
Using another DICOM implementation such as the one from
DCMTK or dicom3tools can be a good process to check the
output of gdcmconv.</p>

<p style="margin-top: 1em">&Acirc;&middot; For DCMTK use:
dcmdump</p>

<p style="margin-top: 1em">&Acirc;&middot; For dicom3tools
use: dcdump</p>

<p style="margin-top: 1em">For reference, gdcmconv
&acirc;raw will act as dcmdjpeg +cn +px, since it never
tries to convert color space.</p>

<p style="margin-top: 1em">VIM: vimdiff <br>
You can setup your favorite editor to compare the output,
for instance in vim:</p>

<p style="margin-top: 1em">autocmd BufReadPre *.dcm set ro
<br>
autocmd BufReadPost *.dcm silent %!dcmdump -M +uc
&quot;%&quot;</p>

<p style="margin-top: 1em">then simply do:</p>

<p style="margin-top: 1em">$ vimdiff input.dcm
output.dcm</p>

<p style="margin-top: 1em">vbindiff <br>
On UNIX you can visually compare binary file using the
vbindiff command:</p>

<p style="margin-top: 1em">$ vbindiff input.dcm
output.dcm</p>

<p style="margin-top: 1em">SEE ALSO <br>
gdcmdump(1), gdcmraw(1), gdcminfo(1), gdcmdiff(1)</p>

<p style="margin-top: 1em">AUTHOR <br>
Mathieu Malaterre <br>
Main developer</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2006, 2011 Mathieu Malaterre</p>

<p style="margin-top: 1em">GDCM 2.6.6 01/05/2017
GDCMCONV(1)</p>
<hr>
</body>
</html>
