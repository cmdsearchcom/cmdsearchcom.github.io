<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PSWIGGLE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PSWIGGLE(1)</td>
    <td class="head-vol">GMT</td>
    <td class="head-rtitle">PSWIGGLE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pswiggle - Plot z = f(x,y) anomalies along tracks
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>pswiggle</b> [ <i>table</i> ] <b>-J</b><i>parameters</i>
  <b>-R</b><i>west</i>/
  <i>east</i>/<i>south</i>/<i>north</i>[/<i>zmin</i>/<i>zmax</i>][ <b>+r</b>]
  <b>-Z</b><i>scale</i>[<i>units]</i> <i>[ |-A|[*azimuth</i>] ] [
  <b>-B</b>[<b>p</b>| <b>s</b>]<i>parameters</i> ] [ <b>-C</b><i>center</i> ] [
  <b>-G</b>[<b>+</b>|<b>-</b>|<b>=</b>]<i>fill</i> ] [ <b>-I</b><i>fix_az</i> ]
  [ <b>-K</b> ] [ <b>-O</b> ] [ <b>-P</b> ] [
  <b>-S</b>[<b>x</b>]<i>lon0</i>/<i>lat0</i>/ <i>length</i>[/<i>units</i>] ] [
  <b>-T</b><i>pen</i> ] [ <b>-U</b>[<i>stamp</i>] ] [ <b>-V</b>[<i>level</i>] ]
  [ <b>-W</b><i>pen</i> ] [ <b>-X</b><i>x_offset</i> ] [
  <b>-Y</b><i>y_offset</i> ] [ <b>-bi</b>binary ] [ <b>-di</b>nodata ] [
  <b>-e</b>regexp ] [ <b>-f</b>flags ] [ <b>-g</b>gaps ] [ <b>-h</b>headers ] [
  <b>-i</b>flags ] [ <b>-p</b>flags ] [ <b>-t</b>transp ] [
  <b>-:</b>[<b>i</b>|<b>o</b>] ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>Note:</b> No space is allowed between the option flag and the associated
  arguments.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>pswiggle</b> reads (<i>x</i>,<i>y</i>,<i>z</i>) triplets from files [or
  standard input] and plots z as a function of distance along track. This means
  that two consecutive ( <i>x</i>,<i>y</i>) points define the local distance
  axis, and the local <i>z</i> axis is then perpendicular to the distance axis,
  forming a right-handed coordinate system. The user may set a preferred
  positive anomaly plot direction, and if the positive normal is outside the
  plus/minus 90 degree window around the preferred direction, then 180 degrees
  are added to the direction. Either the positive or the negative wiggle may be
  shaded. The resulting PostScript code is written to standard output.
<h1 class="Sh" title="Sh" id="REQUIRED_ARGUMENTS"><a class="selflink" href="#REQUIRED_ARGUMENTS">REQUIRED
  ARGUMENTS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-J</b><i>parameters</i> (more &#x2026;)</dt>
  <dd class="It-tag">Select map projection.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b><i>xmin</i>/<i>xmax</i>/<i>ymin</i>/<i>ymax</i>[<b>+r</b>][<b>+u</b><i>unit</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Specify the region of interest.</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
For perspective view <b>p</b>, optionally append /<i>zmin</i>/<i>zmax</i>. (more
  &#x2026;)
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z</b><i>scale</i>[<i>units</i>]</dt>
  <dd class="It-tag">Gives anomaly scale in data-units/distance-unit, where
      distance-unit is the currently chosen unit specified by PROJ_LENGTH_UNIT.
      Alternatively, append a distance-unit among the other choices
    (c|i|p).</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OPTIONAL_ARGUMENTS"><a class="selflink" href="#OPTIONAL_ARGUMENTS">OPTIONAL
  ARGUMENTS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><i>table</i></b></dt>
  <dd class="It-tag">One or more ASCII (or binary, see
      <b>-bi</b>[<i>ncols</i>][<i>type</i>]) data table file(s) holding a number
      of data columns. If no tables are given then we read from standard
    input.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b>[<i>azimuth</i>]</dt>
  <dd class="It-tag">Sets the preferred positive azimuth. Positive wiggles will
      &#x201C;gravitate&#x201D; towards that direction, i.e., azimuths of the
      normal direction to the track will be flipped into the -90/+90 degree
      window centered on <i>azimuth</i> and that defines the positive wiggle
      side. If no azimuth is given the no preferred azimuth is enforced. Default
      is <b>-A</b>0.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b>[<b>p</b>|<b>s</b>]<i>parameters</i> (more
    &#x2026;)</dt>
  <dd class="It-tag">Set map boundary frame and axes attributes.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b><i>center</i></dt>
  <dd class="It-tag">Subtract <i>center</i> from the data set before plotting
      [0].</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b>[<b>+</b>|<b>-</b>|<b>=</b>]<i>fill</i></dt>
  <dd class="It-tag">Set fill shade, color or pattern for positive and/or
      negative wiggles [Default is no fill]. Optionally, prepend <b>+</b> to
      fill positive areas (this is the default behavior). Prepend <b>-</b> to
      fill negative areas. Prepend <b>=</b> to fill both positive and negative
      areas with the same fill.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b><i>fix_az</i></dt>
  <dd class="It-tag">Set a fixed azimuth projection for wiggles [Default uses
      track azimuth, but see <b>-A</b>]. With this option, the calculated
      track-normal azimuths are overridden by <i>fixed_az</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Jz</b>|<b>Z</b><i>parameters</i> (more &#x2026;)</dt>
  <dd class="It-tag">Set z-axis scaling; same syntax as <b>-Jx</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-K</b> (more &#x2026;)</dt>
  <dd class="It-tag">Do not finalize the PostScript plot.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O</b> (more &#x2026;)</dt>
  <dd class="It-tag">Append to existing PostScript plot.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b> (more &#x2026;)</dt>
  <dd class="It-tag">Select &#x201C;Portrait&#x201D; plot orientation.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>[<b>x</b>]<i>lon0</i>/<i>lat0</i>/<i>length</i>[/<i>units</i>]</dt>
  <dd class="It-tag">Draws a simple vertical scale centered on <i>lon0/lat0</i>.
      Use <b>-Sx</b> to specify cartesian coordinates instead. <i>length</i> is
      in z units, append unit name for labeling. <b>FONT_ANNOT_PRIMARY</b> is
      used as font.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b><i>pen</i></dt>
  <dd class="It-tag">Draw track [Default is no track]. Append pen attributes to
      use [Defaults: width = 0.25p, color = black, style = solid].</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b>[[<i>just</i>]/<i>dx</i>/<i>dy</i>/][<b>c</b>|<i>label</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Draw GMT time stamp logo on plot.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>[<i>level</i>] (more &#x2026;)</dt>
  <dd class="It-tag">Select verbosity level [c].</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<b>-W</b><i>pen</i>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bi</b>[<i>ncols</i>][<b>t</b>] (more &#x2026;)</dt>
  <dd class="It-tag">Select native binary input. [Default is 3 input
    columns].</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-di</b><i>nodata</i> (more &#x2026;)</dt>
  <dd class="It-tag">Replace input columns that equal <i>nodata</i> with
    NaN.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>[<b>~</b>]<i>&#x201D;pattern&#x201D;</i> <b>|</b>
    <b>-e</b>[<b>~</b>]/<i>regexp</i>/[<b>i</b>] (more &#x2026;)</dt>
  <dd class="It-tag">Only accept data records that match the given pattern.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>[<b>i</b>|<b>o</b>]<i>colinfo</i> (more
    &#x2026;)</dt>
  <dd class="It-tag">Specify data types of input and/or output columns.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b>[<b>a</b>]<b>x</b>|<b>y</b>|<b>d</b>|<b>X</b>|<b>Y</b>|<b>D</b>|[<i>col</i>]<b>z</b>[+|-]<i>gap</i>[<b>u</b>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Determine data gaps and line breaks.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>[<b>i</b>|<b>o</b>][<i>n</i>][<b>+c</b>][<b>+d</b>][<b>+r</b><i>remark</i>][<b>+r</b><i>title</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Skip or produce header record(s).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b><i>cols</i>[<b>+l</b>][<b>+s</b><i>scale</i>][<b>+o</b><i>offset</i>][,<i>&#x2026;</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Select input columns and transformations (0 is first
      column).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>[<b>x</b>|<b>y</b>|<b>z</b>]<i>azim</i>[/<i>elev</i>[/<i>zlevel</i>]][<b>+w</b><i>lon0</i>/<i>lat0</i>[/<i>z0</i>]][<b>+v</b><i>x0</i>/<i>y0</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Select perspective view.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>[<i>transp</i>] (more &#x2026;)</dt>
  <dd class="It-tag">Set PDF transparency level in percent.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-:</b>[<b>i</b>|<b>o</b>] (more &#x2026;)</dt>
  <dd class="It-tag">Swap 1st and 2nd column on input and/or output.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-^</b> or just <b>-</b></dt>
  <dd class="It-tag">Print a short message about the syntax of the command, then
      exits (NOTE: on Windows just use <b>-</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-+</b> or just <b>+</b></dt>
  <dd class="It-tag">Print an extensive usage (help) message, including the
      explanation of any module-specific option (but not the GMT common
      options), then exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b> or no arguments</dt>
  <dd class="It-tag">Print a complete usage (help) message, including the
      explanation of all options, then exits.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To plot the magnetic anomaly stored in the file track.xym along track @ 1000
  nTesla/cm (after removing a mean value of 32000 nTesla), using a 15-cm-wide
  Polar Stereographic map ticked every 5 degrees in Portrait mode, with positive
  anomalies in red on a blue track of width 0.25 points, use
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
gmt pswiggle track.xym -R-20/10/-80/-60 -JS0/90/15c -Z1000 -B5 \
             -C32000 -P -Gred -T0.25p,blue -S1000 -V &gt; track_xym.ps
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
and the positive anomalies will in general point in the north direction. To
  instead enforce a fixed azimuth of 45 for the positive wiggles, we add
  <b>-I</b> and obtain
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
gmt pswiggle track.xym -R-20/10/-80/-60 -JS0/90/15c -Z1000 -B5 \
          -C32000 -P -Gred -I45 -T0.25p,blue -S1000 -V &gt; track_xym.ps
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Sometimes the (x,y) coordinates are not printed with enough significant digits,
  so the local perpendicular to the track swings around a lot. To see if this is
  the problem, you should do this:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
awk '{ if (NR &gt; 1) print atan2(y-$1, x-$2); y=$1; x=$2; }' yourdata.xyz | more
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
(note that output is in radians; on some machines you need &#x201C;nawk&#x201D;
  to do this). Then if these numbers jump around a lot, you may do this:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
awk '{ print NR, $0 }' yourdata.xyz | filter1d -Fb5 -N4/0 \
--FORMAT_FLOAT_OUT=%.12g &gt; smoothed.xyz
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
which performs a 5-point boxcar filter, and plot this data set instead.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
gmt, gmtcolors, filter1d, psbasemap, splitxyz
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2017, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 24, 2017</td>
    <td class="foot-os">5.4.2</td>
  </tr>
</table>
</body>
</html>
