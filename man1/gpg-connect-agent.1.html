<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GPG-CONNECT-AGENT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GPG-CONNECT-AGENT(1)</td>
    <td class="head-vol">GNU Privacy Guard</td>
    <td class="head-rtitle">GPG-CONNECT-AGENT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>gpg-connect-agent</b> - Communicate with a running agent
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>gpg-connect-agent</b> [<i>options</i>]<i>[commands]</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>gpg-connect-agent</b> is a utility to communicate with a running
  <b>gpg-agent</b>. It is useful to check out the commands gpg-agent provides
  using the Assuan interface. It might also be useful for scripting simple
  applications. Input is expected at stdin and out put gets printed to stdout.
<div style="height: 1.00em;">&#x00A0;</div>
It is very similar to running <b>gpg-agent</b> in server mode; but here we
  connect to a running instance.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
The following options may be used:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Output additional information while running.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">Try to be as quiet as possible.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--homedir <i>dir</i></b></dt>
  <dd class="It-tag">Set the name of the home directory to <i>dir</i>. If this
      option is not used, the home directory defaults to &#x2018;
      <i>~/.gnupg</i>&#x2019;. It is only recognized when given on the command
      line. It also overrides any home directory stated through the environment
      variable &#x2018; <i>GNUPGHOME</i>&#x2019; or (on W32 systems) by means of
      the Registry entry <i>HKCU\Software\GNU\GnuPG:HomeDir</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--agent-program <i>file</i></b></dt>
  <dd class="It-tag">Specify the agent program to be started if none is running.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--raw-socket <i>name</i></b></dt>
  <dd class="It-tag">Connect to socket <i>name</i> assuming this is an Assuan
      style server. Do not run any special initializations or environment
      checks. This may be used to directly connect to any Assuan style socket
      server.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--exec</b></dt>
  <dd class="It-tag">Take the rest of the command line as a program and it's
      arguments and execute it as an assuan server. Here is how you would run
      <b>gpgsm</b>:</dd>
</dl>
<div style="margin-left: 2.00ex;">
<pre>
 gpg-connect-agent --exec gpgsm --server
</pre>
</div>
Note that you may not use options on the command line in this case.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-ext-connect</b></dt>
  <dd class="It-tag">When using <b>-S</b> or <b>--exec</b>,
      <b>gpg-connect-agent</b> connects to the assuan server in extended mode to
      allow descriptor passing. This option makes it use the old mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--run <i>file</i></b></dt>
  <dd class="It-tag">Run the commands from <i>file</i> at startup and then
      continue with the regular input method. Note, that commands given on the
      command line are executed after this file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--subst</b></dt>
  <dd class="It-tag">Run the command <b>/subst</b> at startup.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--hex</b></dt>
  <dd class="It-tag">Print data lines in a hex format and the ASCII
      representation of non-control characters.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--decode</b></dt>
  <dd class="It-tag">Decode data lines. That is to remove percent escapes but
      make sure that a new line always starts with a D and a space.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="CONTROL_COMMANDS"><a class="selflink" href="#CONTROL_COMMANDS">CONTROL
  COMMANDS</a></h1>
While reading Assuan commands, gpg-agent also allows a few special commands to
  control its operation. These control commands all start with a slash (
  <b>/</b>).
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/echo <i>args</i></b></dt>
  <dd class="It-tag">Just print <i>args</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/let <i>name</i> <i>value</i></b></dt>
  <dd class="It-tag">Set the variable <i>name</i> to <i>value</i>. Variables are
      only substituted on the input if the <b>/subst</b> has been used.
      Variables are referenced by prefixing the name with a dollar sign and
      optionally include the name in curly braces. The rules for a valid name
      are identically to those of the standard bourne shell. This is not yet
      enforced but may be in the future. When used with curly braces no leading
      or trailing white space is allowed.
    <div style="height: 1.00em;">&#x00A0;</div>
    If a variable is not found, it is searched in the environment and if found
      copied to the table of variables.
    <div style="height: 1.00em;">&#x00A0;</div>
    Variable functions are available: The name of the function must be followed
      by at least one space and the at least one argument. The following
      functions are available:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>get</b></dt>
  <dd class="It-tag">Return a value described by the argument. Available
      arguments are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>cwd</b></dt>
  <dd class="It-tag">The current working directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>homedir</b></dt>
  <dd class="It-tag">The gnupg homedir.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sysconfdir</b></dt>
  <dd class="It-tag">GnuPG's system configuration directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bindir</b></dt>
  <dd class="It-tag">GnuPG's binary directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>libdir</b></dt>
  <dd class="It-tag">GnuPG's library directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>libexecdir</b></dt>
  <dd class="It-tag">GnuPG's library directory for executable files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>datadir</b></dt>
  <dd class="It-tag">GnuPG's data directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>serverpid</b></dt>
  <dd class="It-tag">The PID of the current server. Command <b>/serverpid</b>
      must have been given to return a useful value.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unescape <i>args</i></b></dt>
  <dd class="It-tag">Remove C-style escapes from <i>args</i>. Note that
      <b>\0</b> and <b>\x00</b> terminate the returned string implicitly. The
      string to be converted are the entire arguments right behind the
      delimiting space of the function name.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unpercent <i>args</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unpercent+ <i>args</i></b></dt>
  <dd class="It-tag">Remove percent style escaping from <i>args</i>. Note that
      <b>%00</b> terminates the string implicitly. The string to be converted
      are the entire arguments right behind the delimiting space of the function
      name. <b>unpercent+</b> also maps plus signs to a spaces.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>percent <i>args</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>percent+ <i>args</i></b></dt>
  <dd class="It-tag">Escape the <i>args</i> using percent style escaping. Tabs,
      formfeeds, linefeeds, carriage returns and colons are escaped.
      <b>percent+</b> also maps spaces to plus signs.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>errcode <i>arg</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>errsource <i>arg</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>errstring <i>arg</i></b></dt>
  <dd class="It-tag">Assume <i>arg</i> is an integer and evaluate it using
      <b>strtol</b>. Return the gpg-error error code, error source or a
      formatted string with the error code and error source.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>*</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>%</b></dt>
  <dd class="It-tag">Evaluate all arguments as long integers using <b>strtol</b>
      and apply this operator. A division by zero yields an empty string.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>!</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>|</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&amp;</b></dt>
  <dd class="It-tag">Evaluate all arguments as long integers using <b>strtol</b>
      and apply the logical oeprators NOT, OR or AND. The NOT operator works on
      the last argument only.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/definq <i>name</i> <i>var</i></b></dt>
  <dd class="It-tag">Use content of the variable <i>var</i> for inquiries with
      <i>name</i>. <i>name</i> may be an asterisk (<b>*</b>) to match any
      inquiry.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/definqfile <i>name</i> <i>file</i></b></dt>
  <dd class="It-tag">Use content of <i>file</i> for inquiries with <i>name</i>.
      <i>name</i> may be an asterisk (<b>*</b>) to match any inquiry.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/definqprog <i>name</i> <i>prog</i></b></dt>
  <dd class="It-tag">Run <i>prog</i> for inquiries matching <i>name</i> and pass
      the entire line to it as command line arguments.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/datafile <i>name</i></b></dt>
  <dd class="It-tag">Write all data lines from the server to the file
      <i>name</i>. The file is opened for writing and created if it does not
      exists. An existing file is first truncated to 0. The data written to the
      file fully decoded. Using a single dash for <i>name</i> writes to stdout.
      The file is kept open until a new file is set using this command or this
      command is used without an argument.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/showdef</b></dt>
  <dd class="It-tag">Print all definitions
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/cleardef</b></dt>
  <dd class="It-tag">Delete all definitions
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/sendfd <i>file</i> <i>mode</i></b></dt>
  <dd class="It-tag">Open <i>file</i> in <i>mode</i> (which needs to be a valid
      <b>fopen</b> mode string) and send the file descriptor to the server. This
      is usually followed by a command like <b>INPUT FD</b> to set the input
      source for other commands.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/recvfd</b></dt>
  <dd class="It-tag">Not yet implemented.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/open <i>var</i> <i>file</i> [<i>mode</i>]</b></dt>
  <dd class="It-tag">Open <i>file</i> and assign the file descriptor to
      <i>var</i>. Warning: This command is experimental and might change in
      future versions.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/close <i>fd</i></b></dt>
  <dd class="It-tag">Close the file descriptor <i>fd</i>. Warning: This command
      is experimental and might change in future versions.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/showopen</b></dt>
  <dd class="It-tag">Show a list of open files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/serverpid</b></dt>
  <dd class="It-tag">Send the Assuan command <b>GETINFO pid</b> to the server
      and store the returned PID for internal purposes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/sleep</b></dt>
  <dd class="It-tag">Sleep for a second.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/hex</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/nohex</b></dt>
  <dd class="It-tag">Same as the command line option <b>--hex</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/decode</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/nodecode</b></dt>
  <dd class="It-tag">Same as the command line option <b>--decode</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/subst</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/nosubst</b></dt>
  <dd class="It-tag">Enable and disable variable substitution. It defaults to
      disabled unless the command line option <b>--subst</b> has been used. If
      /subst as been enabled once, leading whitespace is removed from input
      lines which makes scripts easier to read.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/while <i>condition</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/end</b></dt>
  <dd class="It-tag">These commands provide a way for executing loops. All lines
      between the <b>while</b> and the corresponding <b>end</b> are executed as
      long as the evaluation of <i>condition</i> yields a non-zero value or is
      the string <b>true</b> or <b>yes</b>. The evaluation is done by passing
      <i>condition</i> to the <b>strtol</b> function. Example:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 2.00ex;">
<pre>
  /subst
  /let i 3
  /while $i
    /echo loop couter is $i
    /let i ${- $i 1}
  /end
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/if <i>condition</i></b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/end</b></dt>
  <dd class="It-tag">These commands provide a way for conditional execution. All
      lines between the <b>if</b> and the corresponding <b>end</b> are executed
      only if the evaluation of <i>condition</i> yields a non-zero value or is
      the string <b>true</b> or <b>yes</b>. The evaluation is done by passing
      <i>condition</i> to the <b>strtol</b> function.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/run <i>file</i></b></dt>
  <dd class="It-tag">Run commands from <i>file</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/bye</b></dt>
  <dd class="It-tag">Terminate the connection and the program
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/help</b></dt>
  <dd class="It-tag">Print a list of available control commands.
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>gpg-agent</b>(1), <b>scdaemon</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
The full documentation for this tool is maintained as a Texinfo manual. If GnuPG
  and the info program are properly installed at your site, the command
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 2.00ex;">
<pre>
info gnupg
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
should give you access to the complete manual including a menu structure and an
  index.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-11-05</td>
    <td class="foot-os">GnuPG 2.0.22</td>
  </tr>
</table>
</body>
</html>
