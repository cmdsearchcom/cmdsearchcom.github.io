<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:18 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MSMTP(1) General Commands Manual MSMTP(1)</p>

<p style="margin-top: 1em">NAME <br>
msmtp - An SMTP client</p>

<p style="margin-top: 1em">SYNOPSIS <br>
Sendmail mode (default): <br>
msmtp [option...] [--] recipient... <br>
msmtp [option...] -t [--] [recipient...]</p>

<p style="margin-top: 1em">Server information mode: <br>
msmtp [option...] --serverinfo</p>

<p style="margin-top: 1em">Remote Message Queue Starting
mode: <br>
msmtp [option...] --rmqs=host|@domain|#queue</p>

<p style="margin-top: 1em">DESCRIPTION <br>
In the default sendmail mode, msmtp reads a mail from
standard input and sends it to an SMTP server for delivery.
<br>
In server information mode, msmtp prints information about
an SMTP server. <br>
In Remote Message Queue Starting mode, msmtp sends a Remote
Message Queue Starting request for a host, domain, or queue
to an SMTP server.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The standard sendmail exit status codes are used, as defined
in sysexits.h.</p>

<p style="margin-top: 1em">OPTIONS <br>
Options override configuration file settings. <br>
They are compatible with sendmail where appropriate.</p>

<p style="margin-top: 1em">General options</p>

<p style="margin-top: 1em">--version <br>
Print version information, including information about the
libraries used.</p>

<p style="margin-top: 1em">--help Print help.</p>

<p style="margin-top: 1em">-P, --pretend <br>
Print the configuration settings that would be used, but do
not take further action. An asterisk (&lsquo;*&rsquo;) will
be printed instead of your password.</p>

<p style="margin-top: 1em">-v, -d, --debug <br>
Print lots of debugging information, including the whole
conversation with the SMTP server. Be careful with this
option: the (potentially dangerous) output will not <br>
be sanitized, and your password may get printed in an easily
decodable format!</p>

<p style="margin-top: 1em">Changing the mode of
operation</p>

<p style="margin-top: 1em">-S, --serverinfo <br>
Print information about the SMTP server and exit. This
includes information about supported features (mail size
limit, authentication, TLS, DSN, ...) and about the <br>
TLS certificate (if TLS is active).</p>

<p style="margin-top: 1em">--rmqs=(host|@domain|#queue)
<br>
Send a Remote Message Queue Starting request for the given
host, domain, or queue to the SMTP server and exit.</p>

<p style="margin-top: 1em">Configuration options</p>

<p style="margin-top: 1em">-C, --file=filename <br>
Use the given file instead of ~/.msmtprc as the user
configuration file.</p>

<p style="margin-top: 1em">-a, --account=account_name <br>
Use the given account instead of the account named
&quot;default&quot;. The settings of this account may be
changed with command line options. This option cannot be
used <br>
together with the --host option.</p>

<p style="margin-top: 1em">--host=hostname <br>
Use this SMTP server with settings from the command line; do
not use any configuration file data. This option cannot be
used together with the --account option.</p>

<p style="margin-top: 1em">--port=number <br>
Set the port number to connect to. See the port command.</p>

<p style="margin-top: 1em">--timeout=(off|seconds) <br>
Set or unset a network timeout, in seconds. See the timeout
command.</p>

<p style="margin-top: 1em">--proxy-host=[IP|hostname] <br>
Set or unset a SOCKS proxy to use. See the proxy_host
command.</p>

<p style="margin-top: 1em">--proxy-port=[number] <br>
Set or unset a port number for the proxy host. See the
proxy_port command.</p>

<p style="margin-top: 1em">--protocol=(smtp|lmtp) <br>
Set the protocol. See the protocol command.</p>

<p style="margin-top: 1em">--domain=[string] <br>
Set the argument of the SMTP EHLO (or LMTP LHLO) command.
See the domain command.</p>

<p style="margin-top: 1em">--auth[=(on|off|method)] <br>
Enable or disable authentication and optionally choose the
method. See the auth command.</p>

<p style="margin-top: 1em">--user=[username] <br>
Set or unset the user name for authentication. See the user
command.</p>

<p style="margin-top: 1em">--passwordeval=[eval] <br>
Evaluate password for authentication. See the passwordeval
command.</p>

<p style="margin-top: 1em">--tls[=(on|off)] <br>
Enable or disable TLS/SSL. See the tls command.</p>

<p style="margin-top: 1em">--tls-starttls[=(on|off)] <br>
Enable or disable STARTTLS for TLS. See the tls_starttls
command.</p>

<p style="margin-top: 1em">--tls-trust-file=[file] <br>
Set or unset a trust file for TLS. See the tls_trust_file
command.</p>

<p style="margin-top: 1em">--tls-crl-file=[file] <br>
Set or unset a certificate revocation list (CRL) file for
TLS. See the tls_crl_file command.</p>

<p style="margin-top: 1em">--tls-fingerprint=[fingerprint]
<br>
Set ot unset the fingerprint of a trusted TLS certificate.
See the tls_fingerprint command.</p>

<p style="margin-top: 1em">--tls-key-file=[file] <br>
Set or unset a key file for TLS. See the tls_key_file
command.</p>

<p style="margin-top: 1em">--tls-cert-file=[file] <br>
Set or unset a cert file for TLS. See the tls_cert_file
command.</p>

<p style="margin-top: 1em">--tls-certcheck[=(on|off)] <br>
Enable or disable server certificate checks for TLS. See the
tls_certcheck command.</p>

<p style="margin-top: 1em">--tls-min-dh-prime-bits=[bits]
<br>
Set or unset minimum bit size of the Diffie-Hellman (DH)
prime. See the tls_min_dh_prime_bits command.</p>

<p style="margin-top: 1em">--tls-priorities=[priorities]
<br>
Set or unset TLS priorities. See the tls_priorities
command.</p>

<p style="margin-top: 1em">Options specific to sendmail
mode</p>

<p style="margin-top: 1em">-f, --from=address <br>
Set the envelope-from address. It is only used when
auto_from is off. <br>
If no account was chosen yet (with --account or --host),
this option will choose the first account that has the given
envelope-from address (set with the from com&acirc; <br>
mand). If no such account is found, &quot;default&quot; is
used.</p>

<p style="margin-top: 1em">--auto-from[=(on|off)] <br>
Enable or disable automatic envelope-from addresses. The
default is off. See the auto_from command.</p>

<p style="margin-top: 1em">--maildomain=[domain] <br>
Set the domain part for the --auto-from address. See the
maildomain command.</p>

<p style="margin-top: 1em">-N, --dsn-notify=(off|cond) <br>
Set or unset DSN notification conditions. See the dsn_notify
command.</p>

<p style="margin-top: 1em">-R, --dsn-return=(off|ret) <br>
Set or unset the DSN notification amount. See the dsn_return
command. Note that hdrs is accepted as an alias for headers
to be compatible with sendmail.</p>


<p style="margin-top: 1em">--add-missing-from-header[=(on|off)]
<br>
Enable or disable the addition of a missing From header. See
the add_missing_from_header command.</p>


<p style="margin-top: 1em">--add-missing-date-header[=(on|off)]
<br>
Enable or disable the addition of a missing Date header. See
the add_missing_date_header command.</p>

<p style="margin-top: 1em">--remove-bcc-headers[=(on|off)]
<br>
Enable or disable the removal of Bcc headers. See the
remove_bcc_headers command.</p>

<p style="margin-top: 1em">-X, --logfile=[file] <br>
Set or unset the log file. See the logfile command.</p>

<p style="margin-top: 1em">--syslog[=(on|off|facility)]
<br>
Enable or disable syslog logging. See the syslog
command.</p>

<p style="margin-top: 1em">-t, --read-recipients <br>
Read recipient addresses from the To, Cc, and Bcc headers of
the mail in addition to the recipients given on the command
line. If any Resent- headers are present, <br>
then the addresses from any Resent-To, Resent-Cc, and
Resent-Bcc headers in the first block of Resent- headers are
used instead.</p>

<p style="margin-top: 1em">--read-envelope-from <br>
Read the envelope from address from the From header of the
mail. Currently this header must be on a single line for
this option to work correctly.</p>

<p style="margin-top: 1em">--aliases=[file] <br>
Set or unset an aliases file. See the aliases command.</p>

<p style="margin-top: 1em">-Fname Msmtp adds a From header
to mails that lack it, using the envelope from address. This
option allows one to set a full name to be used in that
header.</p>

<p style="margin-top: 1em">-- This marks the end of
options. All following arguments will be treated as
recipient addresses, even if they start with a
&lsquo;-&rsquo;.</p>

<p style="margin-top: 1em">The following options are
accepted but ignored for sendmail compatibility: <br>
-Btype, -bm, -G, -hN, -i, -L tag, -m, -n, -O option=value,
-ox value</p>

<p style="margin-top: 1em">USAGE <br>
Normally, a system wide configuration file and/or a user
configuration file contain information about which SMTP
server to use and how to use it, but all settings can also
be <br>
configured on the command line. <br>
The information about SMTP servers is organized in accounts.
Each account describes one SMTP server: host name,
authentication settings, TLS settings, and so on. Each
configura&acirc; <br>
tion file can define multiple accounts.</p>

<p style="margin-top: 1em">The user can choose which
account to use in one of three ways:</p>

<p style="margin-top: 1em">--account=id <br>
Use the given account. Command line settings override
configuration file settings.</p>

<p style="margin-top: 1em">--host=hostname <br>
Use only the settings from the command line; do not use any
configuration file data.</p>

<p style="margin-top: 1em">--from=address or
--read-envelope-from <br>
Choose the first account from the system or user
configuration file that has a matching envelope-from address
as specified by a from command. This works only when neither
<br>
--account nor --host is used.</p>

<p style="margin-top: 1em">If none of the above options is
used (or if no account has a matching from command), then
the account &quot;default&quot; is used.</p>

<p style="margin-top: 1em">Msmtp transmits mails unaltered
to the SMTP server, with the following exceptions: <br>
- The Bcc header(s) will be removed. This behavior can be
changed with the remove_bcc_headers command and
--remove-bcc-headers option. <br>
- A From header will be added if the mail does not have one.
This can be changed with the add_missing_from_header command
and --add-missing-from-header option. The header will <br>
use the envelope from address and optionally a full name set
with the -F option. <br>
- A Date header will be added if the mail does not have one.
This can be changed with the add_missing_date_header command
and --add-missing-date-header option.</p>

<p style="margin-top: 1em">Skip to the EXAMPLES section for
a quick start.</p>

<p style="margin-top: 1em">CONFIGURATION FILES <br>
If it exists and is readable, a system wide configuration
file SYSCONFDIR/msmtprc will be loaded, where SYSCONFDIR
depends on your platform. Use --version to find out which
<br>
directory is used. <br>
If it exists and is readable, a user configuration file will
be loaded (~/.msmtprc by default, but see --version).
Accounts defined in the user configuration file override
<br>
accounts from the system configuration file. <br>
Configuration data from either file can be changed by
command line options.</p>

<p style="margin-top: 1em">A configuration file is a simple
text file. Empty lines and comment lines (whose first
non-blank character is &lsquo;#&rsquo;) are ignored. <br>
Every other line must contain a command and may contain an
argument to that command. <br>
The argument may be enclosed in double quotes (&quot;), for
example if its first or last character is a blank. <br>
If a file name starts with the tilde (~), this tilde will be
replaced by $HOME. If a command accepts the argument on, it
also accepts an empty argument and treats that as if it <br>
was on. <br>
Commands are organized in accounts. Each account starts with
the account command and defines the settings for one SMTP
account.</p>

<p style="margin-top: 1em">Skip to the EXAMPLES section for
a quick start.</p>

<p style="margin-top: 1em">Commands are as follows:</p>

<p style="margin-top: 1em">defaults <br>
Set defaults. The following configuration commands will set
default values for all following account definitions in the
current configuration file.</p>

<p style="margin-top: 1em">account name [:account[,...]]
<br>
Start a new account definition with the given name. The
current default values are filled in. <br>
If a colon and a list of previously defined accounts is
given after the account name, the new account, with the
filled in default values, will inherit all settings from
<br>
the accounts in the list.</p>

<p style="margin-top: 1em">host hostname <br>
The SMTP server to send the mail to. The argument may be a
host name or a network address. Every account definition
must contain this command.</p>

<p style="margin-top: 1em">port number <br>
The port that the SMTP server listens on. The default is 25
(&quot;smtp&quot;), unless TLS without STARTTLS is used, in
which case it is 465 (&quot;smtps&quot;).</p>

<p style="margin-top: 1em">timeout (off|seconds) <br>
Set or unset a network timeout, in seconds. The argument off
means that no timeout will be set, which means that the
operating system default will be used.</p>

<p style="margin-top: 1em">proxy_host [IP|hostname] <br>
Use a SOCKS proxy. All network traffic will go through this
proxy host, including DNS queries, except for a DNS query
that might be necessary to resolve the proxy host <br>
name itself (this can be avoided by using an IP address as
proxy host name). An empty hostname argument disables proxy
usage. The supported SOCKS protocol version is 5. <br>
If you want to use this with Tor, see also &quot;Using msmtp
with Tor&quot; below.</p>

<p style="margin-top: 1em">proxy_port [number] <br>
Set the port number for the proxy host. An empty number
argument resets this to the default port.</p>

<p style="margin-top: 1em">protocol (smtp|lmtp) <br>
Set the protocol to use. Currently only SMTP and LMTP are
supported. SMTP is the default. See the port command above
for default ports.</p>

<p style="margin-top: 1em">domain argument <br>
Use this command to set the argument of the SMTP EHLO (or
LMTP LHLO) command. The default is localhost, which is
stupid but usually works. Try to change the default if <br>
mails get rejected due to anti-SPAM measures. Possible
choices are the domain part of your mail address
(provider.example for joe@provider.example) or the fully
qualified <br>
domain name of your host (if available).</p>

<p style="margin-top: 1em">auth [(on|off|method)] <br>
Enable or disable authentication and optionally choose a
method to use. The argument on chooses a method
automatically. <br>
Usually a user name and a password are used for
authentication. The user name is specified in the
configuration file with the user command. There are five
different meth&acirc; <br>
ods to specify the password: <br>
1. Add the password to the system key ring. Currently
supported key rings are the Gnome key ring and the Mac OS X
Keychain. For the Gnome key ring, use the command <br>
secret-tool (part of Gnome&rsquo;s libsecret) to store
passwords: secret-tool store --label=msmtp host
mail.freemail.example service smtp user joe.smith. On Mac OS
X, use the <br>
Keychain Access GUI application. The account name is same as
the user name. The keychain item name is
smtp://&lt;hostname&gt; where &lt;hostname&gt; matches the
host argument. <br>
2. Store the password in an encrypted files, and use
passwordeval to specify a command to decrypt that file, e.g.
using GnuPG. See EXAMPLES. <br>
3. Store the password in the configuration file using the
password command. (Usually it is not considered a good idea
to store passwords in plain text files. If you do <br>
it anyway, you must make sure that the file can only be read
by yourself.) <br>
4. Store the password in ~/.netrc. This method is probably
obsolete. <br>
5. Type the password into the terminal when it is required.
<br>
It is recommended to use method 1 or 2. <br>
Multiple authentication methods exist. Most servers support
only some of them. Historically, sophisticated methods were
developed to protect passwords from being sent <br>
unencrypted to the server, but nowadays everybody needs TLS
anyway, so the simple methods suffice since the whole
session is protected. A suitable authentication method is
<br>
chosen automatically, and when TLS is disabled for some
reason, only methods that avoid sending clear text passwords
are considered. <br>
The following user / password methods are supported: plain
(a simple plain text method, with base64 encoding, supported
by almost all servers), scram-sha-1 (a method that <br>
avoids clear-text passwords), cram-md5 (an obsolete method
that avoids clear-text passwords), digest-md5 (an
overcomplicated obsolete method that avoids clear-text
pass&acirc; <br>
words, but is not considered secure anymore), login (a
non-standard clear-text method similar to but worse than the
plain method), ntlm (an obscure non-standard method <br>
that is now considered broken; it sometimes requires a
special domain parameter passed via ntlmdomain). <br>
There are currently two authentication methods that are not
based on user / password information and have to be chosen
manually: external (the authentication happens out&acirc;
<br>
side of the protocol, typically by sending a TLS client
certificate, and the method merely confirms that this
authentication succeeded), and gssapi (the Kerberos
framework <br>
takes care of secure authentication, only a user name is
required). <br>
It depends on the underlying authentication library and its
version whether a particular method is supported or not. Use
--version to find out which methods are supported.</p>

<p style="margin-top: 1em">user login <br>
Set the user name for authentication. An empty argument
unsets the user name.</p>

<p style="margin-top: 1em">password secret <br>
Set the password for authentication. An empty argument
unsets the password. Consider using the passwordeval command
or a key ring instead of this command, to avoid stor&acirc;
<br>
ing plain text passwords in the configuration file.</p>

<p style="margin-top: 1em">passwordeval [eval] <br>
Set the password for authentication to the output (stdout)
of the command eval. This can be used e.g. to decrypt
password files on the fly or to query key rings, and thus
<br>
to avoid storing plain text passwords.</p>

<p style="margin-top: 1em">ntlmdomain [domain] <br>
Set a domain for the ntlm authentication method. This is
obsolete.</p>

<p style="margin-top: 1em">tls [(on|off)] <br>
Enable or disable TLS (also known as SSL) for secured
connections. You also need tls_trust_file or
tls_fingerprint, and for some servers you may need to
disable <br>
tls_starttls. <br>
Transport Layer Security (TLS) &quot;... provides
communications privacy over the Internet. The protocol
allows client/server applications to communicate in a way
that is <br>
designed to prevent eavesdropping, tampering, or message
forgery&quot; (quote from RFC2246). <br>
A server can use TLS in one of two modes: via a STARTTLS
command (the session starts with the normal protocol
initialization, and TLS is then started using the
protocol&rsquo;s <br>
STARTTLS command), or immediately (TLS is initialized before
the normal protocol initialization; this requires a separate
port). The first mode is the default, but you can <br>
switch to the second mode by disabling tls_starttls. <br>
When TLS is started, the server sends a certificate to
identify itself. To verify the server identity, a client
program is expected to check that the certificate is
for&acirc; <br>
mally correct and that it was issued by a Certificate
Authority (CA) that the user trusts. (There can also be
certificate chains with intermediate CAs.) <br>
The list of trusted CAs is specified using the
tls_trust_file command. Usually there is some system-wide
default file available, e.g.
/etc/ssl/certs/ca-certificates.crt <br>
on Debian-based systems, but you can also choose to select
the trusted CAs yourself. <br>
One practical problem with this approach is that the client
program should also check if the server certificate has been
revoked for some reason, using a Certificate Revo&acirc;
<br>
cation List (CRL). A CRL file can be specified using the
tls_crl_file command, but getting the relevant CRL files and
keeping them up to date is not straightforward. You <br>
are basically on your own. <br>
A much more serious and fundamental problem is is that you
need to trust CAs. Like any other organization, a CA can be
incompetent, malicious, subverted by bad people, or <br>
forced by government agencies to compromise end users
without telling them. All of these things happened and
continue to happen worldwide. The idea to have central
orga&acirc; <br>
nizations that have to be trusted for your communication to
be secure is fundamentally broken. <br>
Instead of putting trust in a CA, you can choose to trust
only a single certificate for the server you want to connect
to. For that purpose, specify the certificate fin&acirc;
<br>
gerprint with tls_fingerprint. This makes sure that no
man-in-the-middle can fake the identity of the server by
presenting you a fraudulent certificate issued by some CA
<br>
that happens to be in your trust list. However, you have to
update the fingerprint whenever the server certificate
changes, and you have to make sure that the change is <br>
legitimate each time, e.g. when the old certificate expired.
This is inconvenient, but it&rsquo;s the price to pay. <br>
Information about a server certificate can be obtained with
--serverinfo --tls --tls-certcheck=off. This includes the
issuer CA of the certificate (so you can trust that <br>
CA via tls_trust_file), and the fingerprint of the
certificate (so you can trust that particular certificate
via tls_fingerprint). <br>
TLS also allows the server to verify the identity of the
client. For this purpose, the client has to present a
certificate issued by a CA that the server trusts. To <br>
present that certificate, the client also needs the matching
key file. You can set the certificate and key files using
tls_cert_file and tls_key_file. This mechanism can <br>
also be used to authenticate users, so that traditional user
/ password authentication is not necessary anymore. See the
external mechanism in auth.</p>

<p style="margin-top: 1em">tls_starttls [(on|off)] <br>
Choose the TLS variant: start TLS from within the session
(on, default), or tunnel the session through TLS (off).</p>

<p style="margin-top: 1em">tls_trust_file file <br>
Activate server certificate verification using a list of
truted Certification Authorities (CAs). The file must be in
PEM format. Some systems provide a system-wide default <br>
file, e.g. /etc/ssl/certs/ca-certificates.crt on
Debian-based systems with the ca-certificates package. An
empty argument disables this. You should also use
tls_crl_file.</p>

<p style="margin-top: 1em">tls_crl_file [file] <br>
Set a certificate revocation list (CRL) file for TLS, to
check for revoked certificates. An empty argument disables
this.</p>

<p style="margin-top: 1em">tls_fingerprint [fingerprint]
<br>
Set the fingerprint of a single certificate to accept for
TLS. This certificate will be trusted regardless of its
contents. The fingerprint should be of type SHA256, but <br>
can for backwards compatibility also be of type SHA1 or MD5
(please avoid this). The format should be 01:23:45:67:....
Use --serverinfo --tls --tls-certcheck=off <br>
--tls-fingerprint= to get the server certificate
fingerprint.</p>

<p style="margin-top: 1em">tls_key_file file <br>
Send a client certificate to the server (use this together
with tls_cert_file}). The file must contain the private key
of a certificate in PEM format. An empty argument <br>
disables this feature.</p>

<p style="margin-top: 1em">tls_cert_file file <br>
Send a client certificate to the server (use this together
with tls_key_file). The file must contain a certificate in
PEM format. An empty argument disables this feature.</p>

<p style="margin-top: 1em">tls_certcheck [(on|off)] <br>
Enable or disable checks of the server certificate. WARNING:
When the checks are disabled, TLS sessions will be
vulnerable to man-in-the-middle attacks!</p>

<p style="margin-top: 1em">tls_min_dh_prime_bits [bits]
<br>
Set or unset the minimum number of Diffie-Hellman (DH) prime
bits that mpop will accept for TLS sessions. The default is
set by the TLS library and can be selected by <br>
using an empty argument to this command. Only lower the
default (for example to 512 bits) if there is no other way
to make TLS work with the remote server.</p>

<p style="margin-top: 1em">tls_priorities [priorities] <br>
Set the priorities for TLS sessions. The default is set by
the TLS library and can be selected by using an empty
argument to this command. See the GnuTLS documentation of
<br>
the gnutls_priority_init function for a description of the
priorities string.</p>

<p style="margin-top: 1em">from envelope_from <br>
Set the envelope-from address. This address will only be
used when auto_from is off.</p>

<p style="margin-top: 1em">auto_from [(on|off)] <br>
Enable or disable automatic envelope-from addresses. The
default is off. When enabled, an envelope-from address of
the form user@domain will be generated. The local part <br>
will be set to USER or, if that fails, to LOGNAME or, if
that fails, to the login name of the current user. The
domain part can be set with the maildomain command. If <br>
the maildomain is empty, the envelope-from address will only
consist of the user name and not have a domain part. When
auto_from is disabled, the envelope-from address <br>
must be set explicitly.</p>

<p style="margin-top: 1em">maildomain [domain] <br>
Set a domain part for the generation of an envelope-from
address. This is only used when auto_from is on. The domain
may be empty.</p>

<p style="margin-top: 1em">dsn_notify (off|condition) <br>
This command sets the condition(s) under which the mail
system should send DSN (Delivery Status Notification)
messages. The argument off disables explicit DSN requests,
<br>
which means the mail system decides when to send DSN
messages. This is the default. The condition must be never,
to never request notification, or a comma separated list
<br>
(no spaces!) of one or more of the following: failure, to
request notification on transmission failure, delay, to be
notified of message delays, success, to be notified of <br>
successful transmission. The SMTP server must support the
DSN extension.</p>

<p style="margin-top: 1em">dsn_return (off|amount) <br>
This command controls how much of a mail should be returned
in DSN (Delivery Status Notification) messages. The argument
off disables explicit DSN requests, which means <br>
the mail system decides how much of a mail it returns in DSN
messages. This is the default. The amount must be headers,
to just return the message headers, or full, to <br>
return the full mail. The SMTP server must support the DSN
extension.</p>

<p style="margin-top: 1em">add_missing_from_header
[(on|off)] <br>
This command controls whether to add a From header if the
mail does not have one. The default is to add it.</p>

<p style="margin-top: 1em">add_missing_date_header
[(on|off)] <br>
This command controls whether to add a Date header if the
mail does not have one. The default is to add it.</p>

<p style="margin-top: 1em">remove_bcc_headers [(on|off)]
<br>
This command controls whether to remove Bcc headers. The
default is to remove them.</p>

<p style="margin-top: 1em">logfile [file] <br>
An empty argument disables logging (this is the default).
<br>
When logging is enabled by choosing a log file, msmtp will
append one line to the log file for each mail it tries to
send via the account that this log file was chosen <br>
for. <br>
The line will include the following information: date and
time, host name of the SMTP server, whether TLS was used,
whether authentication was used, authentication user <br>
name (only if authentication is used), envelope-from
address, recipient addresses, size of the mail as
transferred to the server (only if the delivery succeeded),
SMTP <br>
status code and SMTP error message (only in case of failure
and only if available), error message (only in case of
failure and only if available), exit code (from sysex&acirc;
<br>
its.h; EX_OK indicates success). <br>
If the filename is a dash (-), msmtp prints the log line to
the standard output.</p>

<p style="margin-top: 1em">syslog [(on|off|facility)] <br>
Enable or disable syslog logging. The facility can be one of
LOG_USER, LOG_MAIL, LOG_LOCAL0, ..., LOG_LOCAL7. The default
is LOG_USER. <br>
Each time msmtp tries to send a mail via the account that
contains this syslog command, it will log one entry to the
syslog service with the chosen facility. <br>
The line will include the following information: host name
of the SMTP server, whether TLS was used, whether
authentication was used, envelope-from address, recipient
<br>
addresses, size of the mail as transferred to the server
(only if the delivery succeeded), SMTP status code and SMTP
error message (only in case of failure and only if <br>
available), error message (only in case of failure and only
if available), exit code (from sysexits.h; EX_OK indicates
success).</p>

<p style="margin-top: 1em">aliases [file] <br>
Replace local recipients with addresses in the aliases file.
The aliases file is a plain text file containing mappings
between a local address and a list of domain <br>
addresses. A local address is defined as one without an
&lsquo;@&rsquo; character and a domain address is one with
an &lsquo;@&rsquo; character. The mappings are of the form:
<br>
local: someone@example.com, person@domain.example <br>
Multiple domain addresses are separated with commas.
Comments start with &lsquo;#&rsquo; and continue to the end
of the line. <br>
The local address default has special significance and is
matched if the local address is not found in the aliases
file. If no default alias is found, then the local <br>
address is left as is. <br>
An empty argument to the aliases command disables the
replacement of local addresses. This is the default.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Configuration file</p>

<p style="margin-top: 1em"># Example for a user
configuration file ~/.msmtprc <br>
# <br>
# This file focusses on TLS and authentication. Features not
used here include <br>
# logging, timeouts, SOCKS proxies, TLS parameters, Delivery
Status Notification <br>
# (DSN) settings, and more.</p>

<p style="margin-top: 1em"># Set default values for all
following accounts. <br>
defaults</p>

<p style="margin-top: 1em"># Use the mail submission port
587 instead of the SMTP port 25. <br>
port 587</p>

<p style="margin-top: 1em"># Always use TLS. <br>
tls on</p>

<p style="margin-top: 1em"># Set a list of trusted CAs for
TLS. You can use a system-wide default file, <br>
# as in this example, or download the root certificate of
your CA and use that. <br>
tls_trust_file /etc/ssl/certs/ca-certificates.crt</p>

<p style="margin-top: 1em"># Additionally, you should use
the tls_crl_file command to check for revoked <br>
# certificates, but unfortunately getting revocation lists
and keeping them <br>
# up to date is not straightforward. <br>
#tls_crl_file ~/.tls-crls</p>

<p style="margin-top: 1em"># A freemail service <br>
account freemail</p>

<p style="margin-top: 1em"># Host name of the SMTP server
<br>
host smtp.freemail.example</p>

<p style="margin-top: 1em"># As an alternative to
tls_trust_file/tls_crl_file, you can use tls_fingerprint
<br>
# to pin a single certificate. You have to update the
fingerprint when the <br>
# server certificate changes, but an attacker cannot trick
you into accepting <br>
# a fraudulent certificate. Get the fingerprint with <br>
# $ msmtp --serverinfo --tls --tls-certcheck=off
--host=smtp.freemail.example <br>
tls_fingerprint
00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33</p>

<p style="margin-top: 1em"># Envelope-from address <br>
from joe_smith@freemail.example</p>

<p style="margin-top: 1em"># Authentication. The password
is given using one of five methods, see below. <br>
auth on <br>
user joe.smith</p>

<p style="margin-top: 1em"># Password method 1: Add the
password to the system keyring, and let msmtp get <br>
# it automatically. To set the keyring password using
Gnome&rsquo;s libsecret: <br>
# $ secret-tool store --label=msmtp # host
smtp.freemail.example # service smtp # user joe.smith</p>

<p style="margin-top: 1em"># Password method 2: Store the
password in an encrypted file, and tell msmtp <br>
# which command to use to decrypt it. This is usually used
with GnuPG, as in <br>
# this example. Usually gpg-agent will ask once for the
decryption password. <br>
passwordeval gpg2 --no-tty -q -d ~/.msmtp-password.gpg</p>

<p style="margin-top: 1em"># Password method 3: Store the
password directly in this file. Usually it is not <br>
# a good idea to store passwords in plain text files. If you
do it anyway, at <br>
# least make sure that this file can only be read by
yourself. <br>
#password secret123</p>

<p style="margin-top: 1em"># Password method 4: Store the
password in ~/.netrc. This method is probably not <br>
# relevant anymore.</p>

<p style="margin-top: 1em"># Password method 5: Do not
specify a password. Msmtp will then prompt you for <br>
# it. This means you need to be able to type into a terminal
when msmtp runs.</p>

<p style="margin-top: 1em"># A second mail address at the
same freemail service <br>
account freemail2 : freemail <br>
from joey@freemail.example</p>

<p style="margin-top: 1em"># The SMTP server of your ISP
<br>
account isp <br>
host mail.isp.example <br>
from smithjoe@isp.example <br>
auth on <br>
user 12345</p>

<p style="margin-top: 1em"># Set a default account <br>
account default : freemail</p>

<p style="margin-top: 1em">Using msmtp with Mutt</p>

<p style="margin-top: 1em">Create a configuration file for
msmtp and add the following lines to your Mutt configuration
file: <br>
set sendmail=&quot;/path/to/msmtp&quot; <br>
set use_from=yes <br>
set realname=&quot;Your Name&quot; <br>
set from=you@example.com <br>
set envelope_from=yes <br>
The envelope_from=yes option lets Mutt use the -f option of
msmtp. Therefore msmtp chooses the first account that
matches the from address you@example.com. <br>
Alternatively, you can use the -a option: <br>
set sendmail=&quot;/path/to/msmtp -a my-account&quot; <br>
Or set everything from the command line (but note that you
cannot set a password this way): <br>
set sendmail=&quot;/path/to/msmtp --host=mailhub -f
me@example.com --tls --tls-trust-file=trust.crt&quot;</p>

<p style="margin-top: 1em">If you have multiple mail
accounts in your msmtp configuration file and let Mutt use
the -f option to choose the right one, you can easily switch
accounts in Mutt with the fol&acirc; <br>
lowing Mutt configuration lines: <br>
macro generic &quot;&lt;esc&gt;1&quot; &quot;:set
from=you@example.com&quot; <br>
macro generic &quot;&lt;esc&gt;2&quot; &quot;:set
from=you@your-employer.example&quot; <br>
macro generic &quot;&lt;esc&gt;3&quot; &quot;:set
from=you@some-other-provider.example&quot;</p>

<p style="margin-top: 1em">Using msmtp with mail</p>

<p style="margin-top: 1em">Define a default account, and
put the following in your ~/.mailrc: <br>
set sendmail=&quot;/path/to/msmtp&quot;</p>

<p style="margin-top: 1em">Using msmtp with Tor</p>

<p style="margin-top: 1em">Use the following settings: <br>
proxy_host 127.0.0.1 <br>
proxy_port 9050 <br>
tls on <br>
Use an IP address as proxy host name, so that msmtp does not
leak a DNS query when resolving it. <br>
TLS is required to prevent exit hosts from reading your SMTP
session. You also need tls_trust_file or tls_fingerprint to
check the server identity. <br>
Do not set domain to something that you do not want to
reveal (do not set it at all if possible).</p>

<p style="margin-top: 1em">Aliases file</p>

<p style="margin-top: 1em"># Example aliases file</p>

<p style="margin-top: 1em"># Send root to Joe and Jane <br>
root: joe_smith@example.com, jane_chang@example.com</p>

<p style="margin-top: 1em"># Send cron to Mark <br>
cron: mark_jones@example.com</p>

<p style="margin-top: 1em"># Send everything else to admin
<br>
default: admin@domain.example</p>

<p style="margin-top: 1em">FILES <br>
SYSCONFDIR/msmtprc <br>
System configuration file. Use --version to find out what
SYSCONFDIR is on your platform.</p>

<p style="margin-top: 1em">~/.msmtprc <br>
User configuration file.</p>

<p style="margin-top: 1em">~/.netrc and SYSCONFDIR/netrc
<br>
The netrc file contains login information. Before prompting
for a password, msmtp will search it in ~/.netrc and
SYSCONFDIR/netrc.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
USER, LOGNAME <br>
These variables override the user&rsquo;s login name when
constructing an envelope-from address. LOGNAME is only used
if USER is unset.</p>

<p style="margin-top: 1em">TMPDIR Directory to create
temporary files in. If this is unset, a system specific
default directory is used. <br>
A temporary file is only created when the
-t/--read-recipients or --read-envelope-from option is used.
The file is then used to buffer the headers of the mail (but
not the <br>
body, so the file won&rsquo;t get very large).</p>

<p style="margin-top: 1em">EMAIL, SMTPSERVER <br>
These environment variables are used only if neither --host
nor --account is used and there is no default account
defined in the configuration files. In this case, the <br>
host name is taken from SMTPSERVER, and the envelope from
address is taken from EMAIL, unless overridden by --from or
--read-envelope-from. Currently SMTPSERVER must con&acirc;
<br>
tain a plain host name (no URL), and EMAIL must contain a
plain address (no names or additional information).</p>

<p style="margin-top: 1em">AUTHORS <br>
msmtp was written by Martin Lambers
&lt;marlam@marlam.de&gt;. <br>
Other authors are listed in the AUTHORS file in the source
distribution.</p>

<p style="margin-top: 1em">SEE ALSO <br>
sendmail(8), netrc(5) or ftp(1)</p>

<p style="margin-top: 1em">2016-02 MSMTP(1)</p>
<hr>
</body>
</html>
