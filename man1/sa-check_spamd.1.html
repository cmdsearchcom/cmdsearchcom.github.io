<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SA-CHECK_SPAMD.RAW(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SA-CHECK_SPAMD.RAW(1)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">SA-CHECK_SPAMD.RAW(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
sa-check_spamd - spamd monitoring script for use with Nagios, etc.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
sa-check_spamd [options]
<div class="Pp"></div>
Options:
<div class="Pp"></div>
<pre>
 -c secs, --critical=secs          Critical ping response threshold
 -h, -?, --help                    Print usage message
 -H hostname, --hostname=hostname  Hostname of spamd service to ping
 -p port, --port=port              Port of spamd service to ping
 --socketpath=path                 Connect to given UNIX domain socket
 -t secs, --timeout=secs           Max time to wait for a ping response
 -v, --verbose                     Verbose debug output
 -V, --version                     Output version info
 -w secs, --warning=secs           Warning ping response threshold
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The purpose of this program is to provide a tool to monitor the status of
  &quot;spamd&quot; server processes. spamd is the daemonized version of the
  spamassassin executable, both provided in the SpamAssassin distribution.
<div class="Pp"></div>
This program is designed for use, as a plugin, with the Nagios service
  monitoring software available from http://nagios.org. It might be compatible
  with other service monitoring packages. It is also useful as a command line
  utility or as a component of a custom shell script.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Options of the long form can be shortened as long as the remain unambiguous
  (i.e. <b>--host</b> can be used instead of <b>--hostname</b>).
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b> <i>secs</i>, <b>--critical</b>=<i>secs</i></dt>
  <dd class="It-tag">Critical ping response threshold in seconds. If a spamd
      ping response takes longer than the value specified (in seconds) the
      program will exit with a value of 2 to indicate the critical status.
    <div style="height: 1.00em;">&#x00A0;</div>
    This value must be at least as long as the value specified for
      <b>warning</b> and less than the value specified for <b>timeout</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>-?</b>, <b>--help</b></dt>
  <dd class="It-tag">Prints this usage message and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b> <i>hostname</i>,
    <b>--hostname</b>=<i>hostname</i></dt>
  <dd class="It-tag">The hostname, or IP address, of the spamd service to ping.
      By default the hostname <b>localhost</b> is used. If <b>--socketpath</b>
      is set this value will be ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b> <i>port</i>, <b>--port</b>=<i>port</i></dt>
  <dd class="It-tag">The port of the spamd service to ping. By default port
      <b>783</b> (the spamd default port number) is used. If <b>--socketpath</b>
      is set this value will be ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--socketpath</b>=<i>path</i></dt>
  <dd class="It-tag">Connect to given UNIX domain socket. Use instead of a
      hostname and TCP port. When set, any hostname and TCP port specified will
      be ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b> <i>secs</i>, <b>--timeout</b>=<i>secs</i></dt>
  <dd class="It-tag">The maximum time to wait for a ping response. Once exceeded
      the program will exit with a value of 2 to indicate the critical status.
      The default timeout value is 45 seconds. The timeout must be no less than
      1 second.
    <div style="height: 1.00em;">&#x00A0;</div>
    This value must be greater than the values specified for both the
      <b>critical</b> and <b>warning</b> values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b></dt>
  <dd class="It-tag">Display verbose debug output on STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Display version info on STDOUT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b> <i>secs</i>, <b>--warning</b>=<i>secs</i></dt>
  <dd class="It-tag">Warning ping response threshold in seconds. If a spamd ping
      response takes longer than the value specified (in seconds), and does not
      exceed the <b>critical</b> threshold value, the program will exit with a
      value of 1 to indicate the warning staus.
    <div style="height: 1.00em;">&#x00A0;</div>
    This value must be no longer than the value specified for <b>critical</b>
      and less than the value specified for <b>timeout</b>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_CODES"><a class="selflink" href="#EXIT_CODES">EXIT
  CODES</a></h1>
The program will indicate the status of the spamd process being monitored by
  exiting with one of these values:
<dl class="Bl-tag">
  <dt class="It-tag">0</dt>
  <dd class="It-tag">OK: A spamd ping response was received within all threshold
      times.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">WARNING: A spamd ping response exceeded the warning
      threshold but not the critical threshold.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">CRITICAL: A spamd ping response exceeded either the
      critical threshold or the timeout value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3</dt>
  <dd class="It-tag">UNKNOWN: An error, probably caused by a missing dependency
      or an invalid configuration parameter being supplied, occurred in the
      sa-check_spamd program.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>spamc</i>(1) <i>spamd</i>(1) <i>spamassassin</i>(1)
<h1 class="Sh" title="Sh" id="PREREQUISITES"><a class="selflink" href="#PREREQUISITES">PREREQUISITES</a></h1>
&quot;Mail::SpamAssassin&quot; version 3.1.1 or higher (3.1.6 or higher
  recommended)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Daryl C. W. O'Shea, DOS Technologies &lt;spamassassin@dostech.ca&gt;
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
sa-check_spamd is distributed under the Apache License, Version 2.0, as
  described in the file &quot;LICENSE&quot; included with the Apache
  SpamAssassin distribution and available at
  http://www.apache.org/licenses/LICENSE-2.0</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-10-30</td>
    <td class="foot-os">perl v5.24.1</td>
  </tr>
</table>
</body>
</html>
