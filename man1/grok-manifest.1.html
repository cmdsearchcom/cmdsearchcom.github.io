<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:15:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GROK-MANIFEST(1) GROK-MANIFEST(1)</p>

<p style="margin-top: 1em">NAME <br>
GROK-MANIFEST - Create manifest for use with grokmirror</p>

<p style="margin-top: 1em">SYNOPSIS <br>
grok-manifest [opts] -m manifest.js[.gz] -t /path
[/path/to/bare.git]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Call grok-manifest from a git post-update or post-receive
hook to create the latest repository manifest. This manifest
file is downloaded by mirror slaves (if newer than what <br>
they already have) and used to only clone/pull the
repositories that have changed since the mirror&rsquo;s last
run.</p>

<p style="margin-top: 1em">OPTIONS <br>
--version <br>
show program&rsquo;s version number and exit</p>

<p style="margin-top: 1em">-h, --help <br>
show this help message and exit</p>

<p style="margin-top: 1em">-m MANIFILE, --manifest=MANIFILE
<br>
Location of manifest.js or manifest.js.gz</p>

<p style="margin-top: 1em">-t TOPLEVEL, --toplevel=TOPLEVEL
<br>
Top dir where all repositories reside</p>

<p style="margin-top: 1em">-l LOGFILE, --logfile=LOGFILE
<br>
When specified, will put debug logs in this location</p>

<p style="margin-top: 1em">-c, --check-export-ok <br>
Honor the git-daemon-export-ok magic file and do not export
repositories not marked as such</p>

<p style="margin-top: 1em">-n, --use-now <br>
Use current timestamp instead of parsing commits</p>

<p style="margin-top: 1em">-p, --purge <br>
Purge deleted git repositories from manifest</p>

<p style="margin-top: 1em">-x, --remove <br>
Remove repositories passed as arguments from the manifest
file</p>

<p style="margin-top: 1em">-y, --pretty <br>
Pretty-print the generated manifest (sort repos and add
indentation). This is much slower, so should be used with
caution on large collections.</p>

<p style="margin-top: 1em">-w, --wait-for-manifest <br>
When running with arguments, wait if manifest is not there
(can be useful when multiple writers are writing to the
manifest file via NFS)</p>

<p style="margin-top: 1em">-i IGNORE, --ignore-paths=IGNORE
<br>
When finding git dirs, ignore these paths (can be used
multiple times, accepts shell-style globbing)</p>

<p style="margin-top: 1em">-v, --verbose <br>
Be verbose and tell us what you are doing</p>

<p style="margin-top: 1em">EXAMPLES <br>
The examples assume that the repositories are located in
/repos. If your repositories are in /var/lib/git, adjust
both -m and -t flags accordingly.</p>

<p style="margin-top: 1em">Initial manifest generation:</p>

<p style="margin-top: 1em">/usr/bin/grok-manifest -m
/repos/manifest.js.gz -t /repos</p>

<p style="margin-top: 1em">Inside the git hook:</p>

<p style="margin-top: 1em">/usr/bin/grok-manifest -m
/repos/manifest.js.gz -t /repos -n &lsquo;pwd&lsquo;</p>

<p style="margin-top: 1em">To purge deleted repositories,
use the -p flag when running from cron:</p>

<p style="margin-top: 1em">/usr/bin/grok-manifest -m
/repos/manifest.js.gz -t /repos -p</p>

<p style="margin-top: 1em">You can also add it to the
gitolite&rsquo;s &quot;rm&quot; ADC using the -x flag:</p>

<p style="margin-top: 1em">/usr/bin/grok-manifest -m
/repos/manifest.js.gz -t /repos -x $repo.git</p>

<p style="margin-top: 1em">To troubleshoot potential
problems, you can pass -l parameter to grok-manifest, just
make sure the user executing the hook command (user git or
gitolite, for example) is able to <br>
write to that location:</p>

<p style="margin-top: 1em">/usr/bin/grok-manifest -m
/repos/manifest.js.gz -t /repos -l
/var/log/git/grok-manifest-hook.log -n &lsquo;pwd&lsquo;</p>

<p style="margin-top: 1em">SEE ALSO <br>
&Acirc;&middot; grok-pull(1)</p>

<p style="margin-top: 1em">&Acirc;&middot; git(1)</p>

<p style="margin-top: 1em">SUPPORT <br>
Please send support requests to the mailing list:</p>


<p style="margin-top: 1em">http://lists.kernel.org/mailman/listinfo/grokmirror</p>

<p style="margin-top: 1em">AUTHOR <br>
mricon@kernel.org</p>

<p style="margin-top: 1em">License: GPLv3+</p>

<p style="margin-top: 1em">COPYRIGHT <br>
The Linux Foundation and contributors</p>

<p style="margin-top: 1em">0.4 2013-08-22
GROK-MANIFEST(1)</p>
<hr>
</body>
</html>
