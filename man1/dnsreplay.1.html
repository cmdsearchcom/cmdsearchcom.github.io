<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DNSREPLAY(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DNSREPLAY(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">DNSREPLAY(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>dnsreplay</b> - A PowerDNS nameserver debugging tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dnsreplay</b> [<i>OPTION</i>]... <i>FILENAME</i> <i>ADDRESS</i> [<i>PORT</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program takes recorded questions and answers and replays them to the
  specified nameserver and reporting afterwards which percentage of answers
  matched, were worse or better.
<div class="Pp"></div>
dnsreplay compares the answers and some other metrics with the actual ones with
  those found in the dumpfile.
<div class="Pp"></div>
By default it only replay queries with recursion-desired flag set.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FILENAME</b></dt>
  <dd class="It-tag">is expected to be an PCAP file. The queries are send to the
      DNS server specified as <i>ADDRESS</i> and <i>PORT</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ADDRESS</b></dt>
  <dd class="It-tag">IPv4 or IPv6 address of the nameserver to replay
      <i>FILENAME</i> to.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PORT</b></dt>
  <dd class="It-tag">if omitted, 53 will be used.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help | -h</b></dt>
  <dd class="It-tag">Show summary of options.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ecs-mask <i>VAL</i></b></dt>
  <dd class="It-tag">When EDNS forwarding an IP address, mask out first octet
      with this value</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ecs-stamp <i>FLAG</i></b></dt>
  <dd class="It-tag">Add original IP address as EDNS Client Subnet Option when
      forwarding to reference server</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--packet-limit <i>NUM</i></b></dt>
  <dd class="It-tag">Stop after replaying <i>NUM</i> packets. Default for
      <i>NUM</i> is 0, which means no limit.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet <i>FLAG</i></b></dt>
  <dd class="It-tag">If <i>FLAG</i> is set to 1. dnsreplay will not be very
      noisy with its output. This is the default.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--recursive <i>FLAG</i></b></dt>
  <dd class="It-tag">If <i>FLAG</i> is set to 1. dnsreplay will only replay
      queries with recursion desired flag set. This is the default.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--speedup <i>FACTOR</i></b></dt>
  <dd class="It-tag">Replay queries with this speedup <i>FACTOR</i>. Default is
      1.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--timeout-msec <i>MSEC</i></b></dt>
  <dd class="It-tag">Wait at least <i>MSEC</i> milliseconds for a reply. Default
      is 500.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
dnsreplay has no certain handling for timeouts. It handles around at most 65536
  outstanding answers.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
pcap(3PCAP), tcpdump(8), dnswasher(1)
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Joerg Jungermann (jj+debian At borkum.net).</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 2012</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
