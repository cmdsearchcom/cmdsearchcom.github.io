<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>CRLUTIL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CRLUTIL(1)</td>
    <td class="head-vol">NSS Security Tools</td>
    <td class="head-rtitle">CRLUTIL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
crlutil - List, generate, modify, or delete CRLs within the NSS security
  database file(s) and list, create, modify or delete certificates entries in a
  particular CRL.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>crlutil</b>
  [ <i>options</i>] [[<i>arguments</i>]]</div>
<h1 class="Sh" title="Sh" id="STATUS"><a class="selflink" href="#STATUS">STATUS</a></h1>
This documentation is still work in progress. Please contribute to the initial
  review in <b>Mozilla NSS bug 836477</b>[1]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The Certificate Revocation List (CRL) Management Tool, <b>crlutil</b>, is a
  command-line utility that can list, generate, modify, or delete CRLs within
  the NSS security database file(s) and list, create, modify or delete
  certificates entries in a particular CRL.
<div class="Pp"></div>
The key and certificate management process generally begins with creating keys
  in the key database, then generating and managing certificates in the
  certificate database(see certutil tool) and continues with certificates
  expiration or revocation.
<div class="Pp"></div>
This document discusses certificate revocation list management. For information
  on security module database management, see Using the Security Module Database
  Tool. For information on certificate and key database management, see Using
  the Certificate Database Tool.
<div class="Pp"></div>
To run the Certificate Revocation List Management Tool, type the command
<div class="Pp"></div>
crlutil option [arguments]
<div class="Pp"></div>
where options and arguments are combinations of the options and arguments listed
  in the following section. Each command takes one option. Each option may take
  zero or more arguments. To see a usage string, issue the command without
  options, or with the -H option.
<h1 class="Sh" title="Sh" id="OPTIONS_AND_ARGUMENTS"><a class="selflink" href="#OPTIONS_AND_ARGUMENTS">OPTIONS
  AND ARGUMENTS</a></h1>
<b>Options</b>
<div class="Pp"></div>
Options specify an action. Option arguments modify an action. The options and
  arguments for the crlutil command are defined as follows:
<div class="Pp"></div>
-D
<div style="margin-left: 4.00ex;">Delete Certificate Revocation List from cert
  database.</div>
<div class="Pp"></div>
-E
<div style="margin-left: 4.00ex;">Erase all CRLs of specified type from the cert
  database</div>
<div class="Pp"></div>
-G
<div style="margin-left: 4.00ex;">Create new Certificate Revocation List
  (CRL).</div>
<div class="Pp"></div>
-I
<div style="margin-left: 4.00ex;">Import a CRL to the cert database</div>
<div class="Pp"></div>
-L
<div style="margin-left: 4.00ex;">List existing CRL located in cert database
  file.</div>
<div class="Pp"></div>
-M
<div style="margin-left: 4.00ex;">Modify existing CRL which can be located in
  cert db or in arbitrary file. If located in file it should be encoded in ASN.1
  encode format.</div>
<div class="Pp"></div>
-S
<div style="margin-left: 4.00ex;">Show contents of a CRL file which isn't stored
  in the database.</div>
<div class="Pp"></div>
<b>Arguments</b>
<div class="Pp"></div>
Option arguments modify an action.
<div class="Pp"></div>
-a
<div style="margin-left: 4.00ex;">Use ASCII format or allow the use of ASCII
  format for input and output. This formatting follows RFC #1113.</div>
<div class="Pp"></div>
-B
<div style="margin-left: 4.00ex;">Bypass CA signature checks.</div>
<div class="Pp"></div>
-c crl-gen-file
<div style="margin-left: 4.00ex;">Specify script file that will be used to
  control crl generation/modification. See crl-cript-file format below. If
  options -M|-G is used and -c crl-script-file is not specified, crlutil will
  read script data from standard input.</div>
<div class="Pp"></div>
-d directory
<div style="margin-left: 4.00ex;">Specify the database directory containing the
  certificate and key database files. On Unix the Certificate Database Tool
  defaults to $HOME/.netscape (that is, ~/.netscape). On Windows NT the default
  is the current directory.
<div style="height: 1.00em;">&#x00A0;</div>
The NSS database files must reside in the same directory.</div>
<div class="Pp"></div>
-f password-file
<div style="margin-left: 4.00ex;">Specify a file that will automatically supply
  the password to include in a certificate or to access a certificate database.
  This is a plain-text file containing one password. Be sure to prevent
  unauthorized access to this file.</div>
<div class="Pp"></div>
-i crl-file
<div style="margin-left: 4.00ex;">Specify the file which contains the CRL to
  import or show.</div>
<div class="Pp"></div>
-l algorithm-name
<div style="margin-left: 4.00ex;">Specify a specific signature algorithm. List
  of possible algorithms: MD2 | MD4 | MD5 | SHA1 | SHA256 | SHA384 |
  SHA512</div>
<div class="Pp"></div>
-n nickname
<div style="margin-left: 4.00ex;">Specify the nickname of a certificate or key
  to list, create, add to a database, modify, or validate. Bracket the nickname
  string with quotation marks if it contains spaces.</div>
<div class="Pp"></div>
-o output-file
<div style="margin-left: 4.00ex;">Specify the output file name for new CRL.
  Bracket the output-file string with quotation marks if it contains spaces. If
  this argument is not used the output destination defaults to standard
  output.</div>
<div class="Pp"></div>
-P dbprefix
<div style="margin-left: 4.00ex;">Specify the prefix used on the NSS security
  database files (for example, my_cert8.db and my_key3.db). This option is
  provided as a special case. Changing the names of the certificate and key
  databases is not recommended.</div>
<div class="Pp"></div>
-t crl-type
<div style="margin-left: 4.00ex;">Specify type of CRL. possible types are: 0 -
  SEC_KRL_TYPE, 1 - SEC_CRL_TYPE. This option is obsolete</div>
<div class="Pp"></div>
-u url
<div style="margin-left: 4.00ex;">Specify the url.</div>
<div class="Pp"></div>
-w pwd-string
<div style="margin-left: 4.00ex;">Provide db password in command line.</div>
<div class="Pp"></div>
-Z algorithm
<div style="margin-left: 4.00ex;">Specify the hash algorithm to use for signing
  the CRL.</div>
<h1 class="Sh" title="Sh" id="CRL_GENERATION_SCRIPT_SYNTAX"><a class="selflink" href="#CRL_GENERATION_SCRIPT_SYNTAX">CRL
  GENERATION SCRIPT SYNTAX</a></h1>
CRL generation script file has the following syntax:
<div class="Pp"></div>
* Line with comments should have # as a first symbol of a line
<div class="Pp"></div>
* Set &quot;this update&quot; or &quot;next update&quot; CRL fields:
<div class="Pp"></div>
update=YYYYMMDDhhmmssZ nextupdate=YYYYMMDDhhmmssZ
<div class="Pp"></div>
Field &quot;next update&quot; is optional. Time should be in GeneralizedTime
  format (YYYYMMDDhhmmssZ). For example: 20050204153000Z
<div class="Pp"></div>
* Add an extension to a CRL or a crl certificate entry:
<div class="Pp"></div>
addext extension-name critical/non-critical [arg1[arg2 ...]]
<div class="Pp"></div>
Where:
<div class="Pp"></div>
extension-name: string value of a name of known extensions.
  critical/non-critical: is 1 when extension is critical and 0 otherwise. arg1,
  arg2: specific to extension type extension parameters
<div class="Pp"></div>
addext uses the range that was set earlier by addcert and will install an
  extension to every cert entries within the range.
<div class="Pp"></div>
* Add certificate entries(s) to CRL:
<div class="Pp"></div>
addcert range date
<div class="Pp"></div>
range: two integer values separated by dash: range of certificates that will be
  added by this command. dash is used as a delimiter. Only one cert will be
  added if there is no delimiter. date: revocation date of a cert. Date should
  be represented in GeneralizedTime format (YYYYMMDDhhmmssZ).
<div class="Pp"></div>
* Remove certificate entry(s) from CRL
<div class="Pp"></div>
rmcert range
<div class="Pp"></div>
Where:
<div class="Pp"></div>
range: two integer values separated by dash: range of certificates that will be
  added by this command. dash is used as a delimiter. Only one cert will be
  added if there is no delimiter.
<div class="Pp"></div>
* Change range of certificate entry(s) in CRL
<div class="Pp"></div>
range new-range
<div class="Pp"></div>
Where:
<div class="Pp"></div>
new-range: two integer values separated by dash: range of certificates that will
  be added by this command. dash is used as a delimiter. Only one cert will be
  added if there is no delimiter.
<div class="Pp"></div>
Implemented Extensions
<div class="Pp"></div>
The extensions defined for CRL provide methods for associating additional
  attributes with CRLs of theirs entries. For more information see RFC #3280
<div class="Pp"></div>
* Add The Authority Key Identifier extension:
<div class="Pp"></div>
The authority key identifier extension provides a means of identifying the
  public key corresponding to the private key used to sign a CRL.
<div class="Pp"></div>
authKeyId critical [key-id | dn cert-serial]
<div class="Pp"></div>
Where:
<div class="Pp"></div>
authKeyIdent: identifies the name of an extension critical: value of 1 of 0.
  Should be set to 1 if this extension is critical or 0 otherwise. key-id: key
  identifier represented in octet string. dn:: is a CA distinguished name
  cert-serial: authority certificate serial number.
<div class="Pp"></div>
* Add Issuer Alternative Name extension:
<div class="Pp"></div>
The issuer alternative names extension allows additional identities to be
  associated with the issuer of the CRL. Defined options include an rfc822 name
  (electronic mail address), a DNS name, an IP address, and a URI.
<div class="Pp"></div>
issuerAltNames non-critical name-list
<div class="Pp"></div>
Where:
<div class="Pp"></div>
subjAltNames: identifies the name of an extension should be set to 0 since this
  is non-critical extension name-list: comma separated list of names
<div class="Pp"></div>
* Add CRL Number extension:
<div class="Pp"></div>
The CRL number is a non-critical CRL extension which conveys a monotonically
  increasing sequence number for a given CRL scope and CRL issuer. This
  extension allows users to easily determine when a particular CRL supersedes
  another CRL
<div class="Pp"></div>
crlNumber non-critical number
<div class="Pp"></div>
Where:
<div class="Pp"></div>
crlNumber: identifies the name of an extension critical: should be set to 0
  since this is non-critical extension number: value of long which identifies
  the sequential number of a CRL.
<div class="Pp"></div>
* Add Revocation Reason Code extension:
<div class="Pp"></div>
The reasonCode is a non-critical CRL entry extension that identifies the reason
  for the certificate revocation.
<div class="Pp"></div>
reasonCode non-critical code
<div class="Pp"></div>
Where:
<div class="Pp"></div>
reasonCode: identifies the name of an extension non-critical: should be set to 0
  since this is non-critical extension code: the following codes are available:
<div class="Pp"></div>
unspecified (0), keyCompromise (1), cACompromise (2), affiliationChanged (3),
  superseded (4), cessationOfOperation (5), certificateHold (6), removeFromCRL
  (8), privilegeWithdrawn (9), aACompromise (10)
<div class="Pp"></div>
* Add Invalidity Date extension:
<div class="Pp"></div>
The invalidity date is a non-critical CRL entry extension that provides the date
  on which it is known or suspected that the private key was compromised or that
  the certificate otherwise became invalid.
<div class="Pp"></div>
invalidityDate non-critical date
<div class="Pp"></div>
Where:
<div class="Pp"></div>
crlNumber: identifies the name of an extension non-critical: should be set to 0
  since this is non-critical extension date: invalidity date of a cert. Date
  should be represented in GeneralizedTime format (YYYYMMDDhhmmssZ).
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
The Certificate Revocation List Management Tool's capabilities are grouped as
  follows, using these combinations of options and arguments. Options and
  arguments in square brackets are optional, those without square brackets are
  required.
<div class="Pp"></div>
See &quot;Implemented extensions&quot; for more information regarding extensions
  and their parameters.
<div class="Pp"></div>
* Creating or modifying a CRL:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
crlutil -G|-M -c crl-gen-file -n nickname [-i crl] [-u url] [-d keydir] [-P dbprefix] [-l alg] [-a] [-B] 
      
</pre>
</div>
<div class="Pp"></div>
* Listing all CRls or a named CRL:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
	crlutil -L [-n crl-name] [-d krydir] 
      
</pre>
</div>
<div class="Pp"></div>
* Deleting CRL from db:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
	crlutil -D -n nickname [-d keydir] [-P dbprefix] 
      
</pre>
</div>
<div class="Pp"></div>
* Erasing CRLs from db:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
	crlutil -E [-d keydir] [-P dbprefix] 
      
</pre>
</div>
<div class="Pp"></div>
* Deleting CRL from db:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
          crlutil -D -n nickname [-d keydir] [-P dbprefix]
    
</pre>
</div>
<div class="Pp"></div>
* Erasing CRLs from db:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
          crlutil -E [-d keydir] [-P dbprefix] 
    
</pre>
</div>
<div class="Pp"></div>
* Import CRL from file:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
          crlutil -I -i crl [-t crlType] [-u url] [-d keydir] [-P dbprefix] [-B] 
    
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
certutil(1)
<h1 class="Sh" title="Sh" id="ADDITIONAL_RESOURCES"><a class="selflink" href="#ADDITIONAL_RESOURCES">ADDITIONAL
  RESOURCES</a></h1>
For information about NSS and other tools related to NSS (like JSS), check out
  the NSS project wiki at
  <b>http://www.mozilla.org/projects/security/pki/nss/</b>. The NSS site relates
  directly to NSS code changes and releases.
<div class="Pp"></div>
Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto
<div class="Pp"></div>
IRC: Freenode at #dogtag-pki
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
The NSS tools were written and maintained by developers with Netscape, Red Hat,
  Sun, Oracle, Mozilla, and Google.
<div class="Pp"></div>
Authors: Elio Maldonado &lt;emaldona@redhat.com&gt;, Deon Lackey
  &lt;dlackey@redhat.com&gt;.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
Licensed under the Mozilla Public License, v. 2.0. If a copy of the MPL was not
  distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">Mozilla NSS bug 836477</dd>
</dl>
<div style="margin-left: 4.00ex;">https://bugzilla.mozilla.org/show_bug.cgi?id=836477</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">5 June 2014</td>
    <td class="foot-os">nss-tools</td>
  </tr>
</table>
</body>
</html>
