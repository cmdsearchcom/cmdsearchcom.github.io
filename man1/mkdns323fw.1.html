<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:25:32 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MKDNS323FW(1) User Commands MKDNS323FW(1)</p>

<p style="margin-top: 1em">NAME <br>
mkdns323fw - build firmware images for the DNS-323 from a
kernel and initrd</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mkdns323fw -k KERNEL -i INITRD [-d DEFAULTS] -p PRODUCT_ID
-c CUSTOM_ID -m MODEL_ID -o OUTPUTFILE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mkdns323fw creates firmware images suitable for upload to
the D-link DNS-323 and other, similar devices based on the
same basic firmware image, such as the Conceptronics
CH3SNAS. <br>
These firmware images contain a kernel and initrd, as well
as various product-specific values and checksums.</p>

<p style="margin-top: 1em">This command can be very
dangerous; although it attempts to do some very, very basic
sanity checking, it is still quite easy to generate a
firmware file that, when loaded into <br>
your device, will kill it stone dead. This program is not
able to check that you&rsquo;re uploading valid data to your
device; if you brick it, you&rsquo;re on your own.</p>

<p style="margin-top: 1em">-k kernel, --kernel=kernel</p>

<p style="margin-top: 1em">specify the file containing the
kernel image to embed in the firmware image. This must be a
uBoot image file, as produced by mkimage(1) with appropriate
options to spec&acirc; <br>
ify it as a kernel image. Attempts to provide a non-uBoot
file will fail, while specifying a non-kernel uBoot file may
well brick your device. This option is required.</p>

<p style="margin-top: 1em">-i initrd, --initrd=initrd</p>

<p style="margin-top: 1em">the initrd file to embed in the
firmware image. This must be a uBoot image file, as produced
by mkimage(1) with appropriate options to specify it as a
ramdisk. The tool <br>
will refuse to embed a non-uBoot file, however a dodgy
ramdisk will likely brick your device.</p>

<p style="margin-top: 1em">-d defaults.tar.gz,
--defaults=defaults.tar.gz</p>

<p style="margin-top: 1em">The firmware format has the
ability to embed a tarball with a default configuration; if
you want to do this, you may use this option to do so.
However, the devices that <br>
the author has dealt with do not require such a thing, and
leaving it out still produces a valid firmware (and one that
is a bit smaller, to boot).</p>

<p style="margin-top: 1em">-s signature,
--defaults=signature</p>

<p style="margin-top: 1em">For reasons that will probably
remain unknown until the ends of time, there are (at least)
two different firmware signatures running around that are
otherwise identical in <br>
their internal structure, which are used for different
devices. This option exists to allow you to specify the
signature that you want to use in your firmware build. <br>
Valid values for this option are currently FrodoII
&Acirc;&reg;(the default if this option is not specified),
Chopper &Acirc;&reg;or Gandolf &Acirc;&reg;which is used in
some devices. See the table at <br>
the top of the script if you don&rsquo;t know which value to
use for your device.</p>

<p style="margin-top: 1em">--p product_id,
--product-id=product_id</p>

<p style="margin-top: 1em">--c custom_id,
--custom-id=custom_id</p>

<p style="margin-top: 1em">--m model_id,
--model-id=model_id</p>

<p style="margin-top: 1em">Specify the product, custom, and
model ID that this firmware image is intended for. As
several different devices share the same firmware format,
the intended device type <br>
is encoded in these fields. If you do not specify the
correct values for the device that you are targetting with
your firmware, it is quite likely that the device will <br>
refuse the upload.</p>

<p style="margin-top: 1em">Known-good values for various
devices are provided in the header of the script; please
look there for more information. You can also obtain the
values you need by down&acirc; <br>
loading an existing firmware for the device you&rsquo;re
targetting and doing a bit of digging.</p>

<p style="margin-top: 1em">-o outputfile,
--output=outputfile</p>

<p style="margin-top: 1em">Where to write the completed
firmware image. Will overwrite any existing file of the same
name.</p>

<p style="margin-top: 1em">BUGS <br>
E-mail bug reports to
theshed+dns323-firmware-tools@hezmatt.org. I don&rsquo;t
guarantee to be able to help, but I&rsquo;ll give it a shot.
Patches are far more helpful.</p>

<p style="margin-top: 1em">AUTHOR <br>
mkdns323fw was written by Matt Palmer, based on
reverse-engineering work done by Leschinsky Oleg.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2008 Matt Palmer. <br>
This is free software; see the source for copying
conditions. There is NO warranty; not even for
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE, to the
extent permitted by <br>
law.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mkimage(1), splitdns323fw(1).</p>

<p style="margin-top: 1em">dns323-firmware-tools 0.1
October 2008 MKDNS323FW(1)</p>
<hr>
</body>
</html>
