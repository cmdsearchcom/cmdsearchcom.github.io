<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:25:55 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MOGSTATS(1) User Contributed Perl Documentation
MOGSTATS(1)</p>

<p style="margin-top: 1em">NAME <br>
mogstats -- Utility for calculating slow stats directly
against a MogileFS DB</p>

<p style="margin-top: 1em">SYNOPSIS <br>
$ mogstats --db_dsn=&quot;DBI:mysql:mfs:host=mfshost&quot;
--db_user=&quot;mfs&quot; --db_pass=&quot;mfs&quot;
--verbose --stats=&quot;devices,files&quot; <br>
$ mogstats --stats=&quot;all&quot; <br>
$ mogstats [all options in ~/.mogilefs.conf]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Utility for inspecting queues and running general statistics
against a MogileFS database. Some of these stats can take a
very long time to run against a large instance, so the <br>
utility can be pointed at a read slave or special
account.</p>

<p style="margin-top: 1em">OPTIONS <br>
--db_dsn=&lt;DBI_dsn&gt; <br>
The DSN to use for connecting to the MogileFS database
server.</p>

<p style="margin-top: 1em">--db_user=&lt;username&gt; <br>
A database user for connecting to the database.</p>

<p style="margin-top: 1em">--db_pass=&lt;password&gt; <br>
An optional password for the database user.</p>

<p style="margin-top: 1em">--config=&lt;file&gt; <br>
An explicit config file to use. By default
/etc/mogilefs/mogilefs.conf and ~/.mogilefs.conf are
checked.</p>

<p style="margin-top: 1em">--verbose <br>
Print some extra text during processing. Mostly notes about
what stats are starting or finishing.</p>

<p style="margin-top: 1em">--stats=&lt;stats&gt; <br>
A list of which statistics to calculate. Notes on some of
them are listed below, see --help for full list. A value of
&quot;all&quot; fetches all possible stats.</p>

<p style="margin-top: 1em">--help <br>
List usage info and supported statistics.</p>

<p style="margin-top: 1em">AVAILABLE STATISTICS <br>
Contains notes on which stats may be fast or slow.</p>

<p style="margin-top: 1em">devices <br>
Lists count of files and current database status per-device.
Can be very slow.</p>

<p style="margin-top: 1em">fids <br>
Lists the current highest file id. Should be fast.</p>

<p style="margin-top: 1em">files <br>
Gives a breakdown of where files are by domain and class.
Displays the size of all stored files pre-replication, as
well as post-replication size. The latter being closer to
<br>
the actual storage amount. Can be very slow.</p>

<p style="margin-top: 1em">domains <br>
Shows a simple count of where files are by domain and class.
Faster than using &quot;files&quot; but displays less
information.</p>

<p style="margin-top: 1em">replication <br>
Displays a breakdown of devcount per domain/class combo.
Shows number of files in domain &quot;foo&quot; with class
&quot;bar&quot; that have a current devcount of 0, 1, 2, 3,
etc. Useful for <br>
spotting broken files (devcount 0), replication lag, or over
replication bugs. Can be very slow.</p>

<p style="margin-top: 1em">replication-queue <br>
Quick breakdown of how many fids are due for replication.
Fids listed as &quot;manual&quot; need manual intervention
before they can be replicated, and could be broken. Will be
fast <br>
unless there are many files in queue.</p>

<p style="margin-top: 1em">delete-queue <br>
Similar to replication-queue.</p>

<p style="margin-top: 1em">general-queue <br>
Displays a breakdown of what&rsquo;s in the general queue.
This includes FSCK, Rebalance, and other temporary queueing
systems MogileFS has. Should be fast unless you have <br>
configured MogileFS to queue many fids at once.</p>

<p style="margin-top: 1em">AUTHOR <br>
Dormando &lt;dormando@rydia.net&gt;</p>

<p style="margin-top: 1em">BUGS <br>
None known.</p>

<p style="margin-top: 1em">LICENSE <br>
Licensed for use and redistribution under the same terms as
Perl itself.</p>

<p style="margin-top: 1em">perl v5.24.1 2012-06-26
MOGSTATS(1)</p>
<hr>
</body>
</html>
