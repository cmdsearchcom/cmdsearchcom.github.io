<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:45 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>mysql&acirc;zrm&acirc;restore(1) mysql&acirc;
zrm&acirc;restore(1)</p>

<p style="margin-top: 1em">NAME <br>
mysql&acirc;zrm&acirc;restore &acirc; Recovery utility for
ZRM for MySQL.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mysql&acirc;zrm&acirc;restore <br>
[&acirc;&acirc;backup&acirc;set name] <br>
[&acirc;&acirc;source&acirc;directory directory name] <br>
[&acirc;&acirc;bin&acirc;logs &quot;/fullpath/name1
/fullpath/name2 ...&quot;] <br>
[&acirc;&acirc;mysql&acirc;shutdown |
&acirc;&acirc;no&acirc;mysql&acirc;shutdown] <br>
[&acirc;&acirc;retry&acirc;count count] <br>
[&acirc;&acirc;retry&acirc;delay seconds] <br>
[&acirc;&acirc;replication|&acirc;&acirc;noreplication] <br>
[&acirc;&acirc;all&acirc;databases] <br>
[&acirc;&acirc;databases &quot;name1 name2 ...&quot;] <br>
[&acirc;&acirc;start&acirc;position #] <br>
[&acirc;&acirc;stop&acirc;position #] <br>
[&acirc;&acirc;offset #] <br>
[&acirc;&acirc;start&acirc;datetime name] <br>
[&acirc;&acirc;stop&acirc;datetime name] <br>
[&acirc;&acirc;copy&acirc;plugin plugin] <br>
[&acirc;&acirc;ssh&acirc;user user] <br>
[&acirc;&acirc;ssh&acirc;identity&acirc;file filename] <br>
[&acirc;&acirc;socket&acirc;remote&acirc;port port] <br>
[&acirc;&acirc;passfile filename] <br>
[&acirc;&acirc;user user] <br>
[&acirc;&acirc;password password] <br>
[&acirc;&acirc;host hostname] <br>
[&acirc;&acirc;port portnumber] <br>
[&acirc;&acirc;socket name] <br>
[&acirc;&acirc;ssl&acirc;options &quot;MySQL ssl
options&quot;] <br>
[&acirc;&acirc;device&acirc;fs&acirc;map mapfilename] <br>
[&acirc;&acirc;dismount&acirc;existing] <br>
[&acirc;&acirc;mysql&acirc;binpath location of MySQL
commands] <br>

[&acirc;&acirc;compress&acirc;data&acirc;during&acirc;transport]
<br>
[&acirc;&acirc;pre&acirc;restore&acirc;plugin plugin] <br>
[&acirc;&acirc;post&acirc;restore&acirc;plugin plugin] <br>
[&acirc;&acirc;tmpdir temp_directory] <br>
[&acirc;&acirc;options&acirc;file filename] <br>
[&acirc;&acirc;restore&acirc;myloader&acirc;options
&quot;&acirc;&acirc;overwrite&acirc;tables <br>
&acirc;&acirc;enable&acirc;binlog ....&quot;] <br>
[&acirc;&acirc;quiet|&acirc;&acirc;no&acirc;quiet] <br>
[&acirc;&acirc;verbose] <br>
[&acirc;&acirc;help]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Recovery of various MySQL databases can be done using the
<br>
fImysql&acirc;zrm&acirc;restore utility. Use it to
fully/selective&acirc; ly restore the <br>
database on the same system or another system.</p>

<p style="margin-top: 1em">Please take a look at ZRM for
MySQL documentation (http://mysql&acirc; <br>
backup.zmanda.com/) for procedures on how to configure and
use ZRM for <br>
MySQL.</p>

<p style="margin-top: 1em">When restoring backed up
databases, use either &acirc;&acirc;all&acirc;databases or
<br>
&acirc;&acirc;databases options.</p>

<p style="margin-top: 1em">When the backup contains only
specific tables from a data&acirc; base, you need <br>
to specify mysql&acirc;zrm action as restore and the
database name to restore <br>
the backed up tables. Tables not included in the backup but
present in <br>
the database will be left untouched.</p>

<p style="margin-top: 1em">OPTIONS <br>
&acirc;&acirc;backup&acirc;set name <br>
Specify backup&acirc;set for the backup run. This is a
Command line <br>
option only and cannot be specified in the con&acirc;
figuration file. <br>
The default value is BackupSet1. If such a value is already
<br>
present, it will be used.</p>


<p style="margin-top: 1em">&acirc;&acirc;source&acirc;directory
directory name <br>
Choose the directory containing a backup. This op&acirc;
tion is ignored <br>
when backup action is specified. For restore action, both
<br>
source&acirc;directory and bin&acirc;logs options should not
be specified. <br>
If both are present, the utility will return an er&acirc;
ror.</p>

<p style="margin-top: 1em">&acirc;&acirc;bin&acirc;logs
&quot;fullpathname1 fullpathname2 ...&quot; <br>
List binary log files, along with their full paths to be
used <br>
for restore. For restore action, both source&acirc;directory
and <br>
bin&acirc;logs options should not be specified. The
util&acirc; ity will throw <br>
an error if both are specified</p>


<p style="margin-top: 1em">&acirc;&acirc;mysql&acirc;shutdown
| &acirc;&acirc;no&acirc;mysql&acirc;shutdown <br>
This specifies whether the mysql server should be shutdown
dur&acirc; <br>
ing the restore. If not specified, then the mysql server is
shut <br>
down only if restoring from a full raw backup. If the
options <br>
are not specified and the restore only contains logical full
<br>
backup data or incremental backup data, the mysql server is
not <br>
shut down. When restoring from a full raw backup it is
recom&acirc; <br>
mended not to use the
&acirc;&acirc;no&acirc;mysql&acirc;shutdown op&acirc; tion
as it can <br>
result in unexpected problems.</p>

<p style="margin-top: 1em">&acirc;&acirc;retry&acirc;count
count <br>
This specifies the number of times ZRM should try to attempt
the <br>
restore of a raw backup in case the speci&acirc; fied
copy&acirc;plugin <br>
returns an error. This retry is specifically to en&acirc;
sure that we <br>
do not fail the full restore in case the shutdown of the
mysql <br>
server takes more time than expected. Hence ZRM will only
<br>
attempt to retry for the restore of the very first file that
is <br>
attempted to be restored. The default value is 2.</p>

<p style="margin-top: 1em">&acirc;&acirc;retry&acirc;delay
delay in seconds <br>
This specifies the time in seconds between 2 retrys. The
default <br>
value is 5 seconds</p>


<p style="margin-top: 1em">&acirc;&acirc;all&acirc;databases
<br>
Opt for all databases to be backed up or re&acirc; stored.
This is the <br>
default if database or databases are not specified.</p>

<p style="margin-top: 1em">&acirc;&acirc;databases
&quot;name1 name2 ...&quot; <br>
List the databases to backup or restore.</p>

<p style="margin-top: 1em">&acirc;&acirc;replication |
&acirc;&acirc;noreplication <br>
Choose replication to restore replication files. They will
be <br>
restored only if the host is a replication slave. Default
option <br>
is &acirc;&acirc;noreplication.</p>


<p style="margin-top: 1em">&acirc;&acirc;start&acirc;position
N <br>
Fix the start position N for selective restore of all events
<br>
after log position N. Log position can be de&acirc; termined
using <br>
parse&acirc;binlogs action.</p>


<p style="margin-top: 1em">&acirc;&acirc;stop&acirc;position
N <br>
Stop selective restore of all events before log po&acirc;
sition N. Log <br>
positions can be determined using parse&acirc;binlogs
ac&acirc; tion.</p>

<p style="margin-top: 1em">&acirc;&acirc;offset N <br>
Skip the first N entries of the first bina&acirc; ry log
file in <br>
bin&acirc;logs parameter.</p>


<p style="margin-top: 1em">&acirc;&acirc;start&acirc;datetime
datetime <br>
Start selective restore from date and time speci&acirc; fied
in MySQL <br>
DATETIME or TIMESTAMP format(hh:mm:ss). The util&acirc; ity
will throw <br>
an error if the parameter is not in the format.</p>


<p style="margin-top: 1em">&acirc;&acirc;stop&acirc;datetime
datetime <br>
Selective restore till specified date and time specified in
<br>
MySQL DATETIME or TIMESTAMP format(hh:mm:ss). The utility
will <br>
return an error if the parameter is not in the for&acirc;
mat.</p>

<p style="margin-top: 1em">&acirc;&acirc;copy&acirc;plugin
plugin <br>
Specify plugin along with full pathname to be used for
transfer&acirc; <br>
ring backup files to and from a remote MySQL server to the
<br>
machine running ZRM for MySQL. Use this option when <br>
1. remote incremental backup is required <br>
2. copying replication related files from a re&acirc; mote
machine <br>
3. execute mysqlhotcopy (MySQL command) and copy the data
<br>
from the remote machine <br>
4. restore data to a remote machine using mysqlhotcopy(MySQL
<br>
command). This parameter is optional.</p>

<p style="margin-top: 1em">&acirc;&acirc;ssh&acirc;user
user <br>
Specifies the user to be used for SSH. This param&acirc;
eter is only <br>
used by the ssh&acirc;copy.pl plugin. The user specified
should either <br>
be the user mysqld runs as or root. If not speci&acirc; fied
the default <br>
value used is mysql. This parameter is optional.</p>


<p style="margin-top: 1em">&acirc;&acirc;ssh&acirc;identify&acirc;file
filename <br>
Selects a file from which the identity (private key) for RSA
or <br>
DSA authentication is read. This identity file is used by
the <br>
ssh&acirc;copy.pl plugin for authentication.</p>


<p style="margin-top: 1em">&acirc;&acirc;socket&acirc;remote&acirc;port
port <br>
Port that the socket&acirc;plugin.pl should use to connect.
This <br>
parameter is only used by the socket&acirc;copy.pl
plug&acirc; in. The default <br>
value used is 25300. This parameter is optional</p>

<p style="margin-top: 1em">&acirc;&acirc;passfile file <br>
The file containing the passphrase for encryption. This
parame&acirc; <br>
ter is used only by the encrypt&acirc;plugin.pl. If not
specified the <br>
value used is /etc/mysql&acirc;zrm/.passphrase. This
parameter is <br>
optional.</p>

<p style="margin-top: 1em">&acirc;&acirc;user user <br>
Specify MySQL backup/restore user</p>

<p style="margin-top: 1em">&acirc;&acirc;password password
<br>
Specify password for the MySQL user</p>

<p style="margin-top: 1em">&acirc;&acirc;host hostname <br>
Specify MySQL server host name or IP name.</p>

<p style="margin-top: 1em">&acirc;&acirc;port portnumber
<br>
Specify MySQL server port.</p>

<p style="margin-top: 1em">&acirc;&acirc;socket name <br>
Specify socket file to use for communication with MySQL
server.</p>

<p style="margin-top: 1em">&acirc;&acirc;ssl&acirc;options
&quot;MySQL ssl options&quot; <br>
Set any &acirc;&acirc;ssl* options that MySQL supports.
Refer to MySQL Docu&acirc; <br>
mentation for SSL options details.</p>


<p style="margin-top: 1em">&acirc;&acirc;mysql&acirc;binpath
mysql_binaries_dir <br>
Set the full path where MySQL binaries are in&acirc;
stalled. For exam&acirc; <br>
ple: /opt/lampp/bin</p>


<p style="margin-top: 1em">&acirc;&acirc;compress&acirc;data&acirc;during&acirc;transport
<br>
If the value is set to 1, the image being restored is
compressed <br>
when it transferred from ZRM server to restore destination.
<br>
Setting the value to zero, no compression is per&acirc;
formed. No com&acirc; <br>
pression is performed by default. Data compression during
trans&acirc; <br>
fer is independent of the Backup image compression
parameter.</p>


<p style="margin-top: 1em">&acirc;&acirc;pre&acirc;restore&acirc;plugin
plugin</p>


<p style="margin-top: 1em">&acirc;&acirc;post&acirc;restore&acirc;plugin
plugin <br>
(Optional) Specify the plugin along with full pathname to be
<br>
called before a full or incremental restore is started <br>
(pre&acirc;restore&acirc;plugin) or after a restore is
completed <br>
(post&acirc;restore&acirc;plugin). The plugins is executed
on ZRM server. <br>
The plugins are called with following parameters:</p>


<p style="margin-top: 1em">&acirc;&acirc;source&acirc;directory
<br>
The directory containing the backup image being
restored.</p>

<p style="margin-top: 1em">&acirc;&acirc;bin&acirc;logs
<br>
The list of binary logs to be parsed. Either
source&acirc;direc&acirc; <br>
tory or bin&acirc;logs is passed as parameter</p>


<p style="margin-top: 1em">&acirc;&acirc;backup&acirc;level
<br>
Backup level: full (0) or incremental (1)</p>


<p style="margin-top: 1em">&acirc;&acirc;mysql&acirc;shutdown
<br>
This parameter is passed if MySQL server was shutdown</p>

<p style="margin-top: 1em">&acirc;&acirc;zrm&acirc;error
error code <br>
Restoration error. This parameter is passed if there is a
<br>
fatal restoration error.</p>

<p style="margin-top: 1em">The script should be written to
return a non&acirc; zero value on <br>
error.</p>


<p style="margin-top: 1em">&acirc;&acirc;options&acirc;file
filename <br>
Set the file along with full pathname that contains MySQL
com&acirc; <br>
mand options.</p>


<p style="margin-top: 1em">&acirc;&acirc;restore&acirc;myloader&acirc;options
<br>
Pass the extra parameters during the Restore if backup was
done <br>
by mydumper.</p>

<p style="margin-top: 1em">&acirc;&acirc;tmpdir
temp_directory <br>
Full path of the directory for storing tempo&acirc; rary
files and <br>
directories on the backup host. The default is to use the
sys&acirc; <br>
tem&acirc;specified temporary directory on the backup host,
e.g /tmp.</p>


<p style="margin-top: 1em">&acirc;&acirc;quiet|&acirc;&acirc;no&acirc;quiet
<br>
Choose quiet to suppress display of log mes&acirc; sages on
stdout. <br>
Choose no&acirc;quiet to display the log messages to
standard output <br>
(stdout). The default is &acirc;&acirc;no&acirc;quiet.</p>

<p style="margin-top: 1em">&acirc;&acirc;verbose <br>
Provide more detailed output in the log. Ver&acirc; bose
output is <br>
turned off by default.</p>

<p style="margin-top: 1em">&acirc;&acirc;help Displays the
help message and exits. This com&acirc; mand line only <br>
parameter cannot be specified in the configuration file.</p>

<p style="margin-top: 1em">EXAMPLES <br>
For restoring backup image dated 18 Aug 2006 (backup image
can be <br>
either full or incremental backup):</p>

<p style="margin-top: 1em">mysql&acirc;zrm
&acirc;&acirc;action restore
&acirc;&acirc;source&acirc;directory
/var/lib/mysql&acirc;zrm/back&acirc; <br>
upset1/20060818121532</p>

<p style="margin-top: 1em">The above command will restore
all databases (full or incremental as <br>
the case may be) that were backed up.</p>

<p style="margin-top: 1em">mysql&acirc;zrm
&acirc;&acirc;action restore
&acirc;&acirc;source&acirc;directory
/var/lib/mysql&acirc;zrm/back&acirc; <br>
upset1/20060818121532 &acirc;&acirc;databases db1 db2
db3</p>

<p style="margin-top: 1em">The above command does a
selective restore of the speci&acirc; fied databases.</p>

<p style="margin-top: 1em">mysql&acirc;zrm
&acirc;&acirc;action restore &acirc;&acirc;bin&acirc;logs
/var/lib/mysql&acirc;zrm/back&acirc; <br>
upset1/20060818121532/mysql&acirc;bin.[0&acirc;9]*
/var/lib/mysql&acirc;zrm/back&acirc; <br>
upset1/20060819121532/mysql&acirc;bin.[0&acirc;9]*</p>

<p style="margin-top: 1em">The above command does a
selective restore of all speci&acirc; fied binary log <br>
files using a single MySQL server connection.</p>

<p style="margin-top: 1em">FILES <br>
/var/lib/mysql&acirc;zrm <br>
Directory under which all backup data is stored.</p>

<p style="margin-top: 1em">/etc/mysql&acirc;zrm/backup set
name/mysql&acirc;zrm.conf <br>
Configuration file read by mysql&acirc;zrm utility.</p>

<p style="margin-top: 1em">RETURN VALUES <br>
On success, zero is returned. On error, non&acirc;zero value
is returned.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mysql&acirc;zrm(1), mysql&acirc;zrm&acirc;backup(1),
mysql&acirc; zrm&acirc;check(1), <br>
mysql&acirc;zrm&acirc;list(1),
mysql&acirc;zrm&acirc;manage&acirc;backup(1), mysql&acirc;
zrm&acirc;getconf(1), <br>
mysql&acirc;zrm&acirc;setconf(1),
mysql&acirc;zrm&acirc;parse&acirc;binlogs(1), mysql&acirc;
zrm&acirc;purge(1), <br>
mysql&acirc;zrm&acirc;extract&acirc;backup(1),
mysql&acirc;zrm&acirc;ver&acirc; ify&acirc;backup(1), <br>
mysql&acirc;zrm&acirc;abort&acirc;backup(1),
mysql&acirc;zrm&acirc; scheduler(1), <br>
mysql&acirc;zrm&acirc;reporter(1), mysql&acirc;zrm.conf(5),
mysqldump(1), mysqlbinlog(1), <br>
mysql(1), lvm(8), Zmanda Recovery Manager for MySQL
(http://mysql&acirc; <br>
backup.zmanda.com/)</p>

<p style="margin-top: 1em">AUTHOR <br>
Zmanda Inc. (http://www.zmanda.com)</p>

<p style="margin-top: 1em">Zmanda, Inc. ZRM for MySQL
mysql&acirc; zrm&acirc;restore(1)</p>
<hr>
</body>
</html>
