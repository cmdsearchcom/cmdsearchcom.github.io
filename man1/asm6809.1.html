<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>asm6809(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">asm6809(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">asm6809(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
asm6809&#x2014;6809 cross-assembler
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>asm6809</b> [<i>OPTION</i>] [<i>SOURCE-FILE</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>asm6809</b> is a portable macro cross assembler targeting the Motorola 6809
  and Hitachi 6309 processors. These processors are most commonly encountered in
  the Dragon and Tandy Colour Computer.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b>, <b>--bin</b></dt>
  <dd class="It-tag">output raw binary file (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--dragondos</b></dt>
  <dd class="It-tag">output DragonDOS binary file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b>, <b>--coco</b></dt>
  <dd class="It-tag">output CoCo RS-DOS (&#x201C;DECB&#x201D;) segmented binary
      file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>, <b>--srec</b></dt>
  <dd class="It-tag">output Motorola SREC file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b>, <b>--hex</b></dt>
  <dd class="It-tag">output Intel hex record file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>, <b>--exec</b> <i>addr</i></dt>
  <dd class="It-tag">EXEC address (for output formats that support one)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-8</b>, <b>-9</b>, <b>--6809</b></dt>
  <dd class="It-tag">use 6809 ISA (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-3</b>, <b>--6309</b></dt>
  <dd class="It-tag">use 6309 ISA (6809 with extensions)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--define</b> <i>sym</i>[=<i>number</i>]</dt>
  <dd class="It-tag">define a symbol</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--setdp</b> <i>value</i></dt>
  <dd class="It-tag">initial value assumed for DP [undefined]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--output</b> <i>file</i></dt>
  <dd class="It-tag">output filename</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--listing</b> <i>file</i></dt>
  <dd class="It-tag">create listing file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--symbols</b> <i>file</i></dt>
  <dd class="It-tag">create symbol table</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--quiet</b></dt>
  <dd class="It-tag">don't warn about illegal (but working) code</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b></dt>
  <dd class="It-tag">warn about explicitly inefficient code</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">show help</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">show program version</dd>
</dl>
<div class="Pp"></div>
If more than one <i>SOURCE-FILE</i> is specified, they are assembled as though
  they were all in one file.
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
Text is read in and parsed, then as many passes are made over the parsed source
  as necessary (up to a limit), until symbols are resolved and addresses are
  stable. The fastest or smallest representation should always be chosen where
  there is ambiguity.
<div class="Pp"></div>
Output formats are: Raw binary, DragonDOS binary, CoCo RS-DOS
  (&#x201C;DECB&#x201D;) binary, Motorola SREC, Intel HEX.
<div class="Pp"></div>
Home page: &lt;http://www.6809.org.uk/asm6809/&gt;
<h2 class="Ss" title="Ss" id="Differences_to_other_assemblers"><a class="selflink" href="#Differences_to_other_assemblers">Differences
  to other assemblers</a></h2>
Motorola syntax allows a comment to follow any operands, separated from them
  only by whitespace. To an extent, this assembler accepts that, but be aware
  that as spaces are allowed within expressions, if the comment looks like it is
  continuing an expression it will generate bad code (or raise an error if the
  result is syntactically incorrect). Example:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
0000&#x00A0;&#x00A0;8605&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lda&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#5
0002&#x00A0;&#x00A0;C60A&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ldb&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#5&#x00A0;*&#x00A0;2&#x00A0;&#x00A0;twice&#x00A0;first&#x00A0;number
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
A strict Motorola assembler would generate bytes C6 05 for the second line, as
  the &#x201C;*&#x00A0;2&#x201D; would be ignored. For consistency, it is best
  to introduce end of line comments with a <b>;</b> character. An asterisk
  (<b>*</b>) can introduce whole line comments.
<div class="Pp"></div>
An unquoted semicolon always introduces a comment. The alternate form of the
  6309 instructions <b>AIM</b>, <b>OIM</b>, etc. listed in some documentation
  that uses a semicolon as a separator is not accepted.
<div class="Pp"></div>
A symbol may be forward referenced; any time a reference is unresolvable,
  another pass is triggered, up to some defined maximum.
<div class="Pp"></div>
In 6809 indexed addressing, the offset size will default to the fastest possible
  form, e.g. if the offset is an expression that happens to evaluate to zero,
  the <i>no offset</i> form will be used. Prepend <b>&lt;&lt;</b> to coerce a 5
  bit offset, <b>&lt;</b> to coerce 8 bits or <b>&gt;</b> to coerce 16 bits.
<div class="Pp"></div>
<b>asm6809</b> currently has no support for OS-9 modules or multiple object
  linking.
<h2 class="Ss" title="Ss" id="Program_syntax"><a class="selflink" href="#Program_syntax">Program
  syntax</a></h2>
Program files are considered line by line. Each line contains up to three
  fields, separated by whitespace: label, instruction and arguments. An unquoted
  semicolon ( <b>;</b>) indicates that the rest of the line is to be considered
  a comment. Whole line comments may be introduced with an asterisk ( <b>*</b>).
  Motorola-style end of line comments without a <b>;</b> are accepted, but see
  the notes about assembler differences.
<div class="Pp"></div>
Any label must appear at the very beginning of the line. If a label is omitted,
  whitespace must appear before the operator field. Certain pseudo-ops may
  affect a label's meaning, but usually labels define a symbol referring to the
  current position in the code (Program Counter, or PC).
<div class="Pp"></div>
The instruction field contains either an instruction op-code (mnemonic), a
  pseudo-op (assembler directive), or a macro name for expansion.
<div class="Pp"></div>
Pseudo-ops allow conditional assembly and inline data, can affect code placement
  and symbol values and be used to include further files inline. See the section
  on Pseudo-ops for more information.
<div class="Pp"></div>
Arguments are a comma-separated list: either instruction operands or arguments
  to a pseudo-op or macro. Permitted arguments are specific to the instruction
  or pseudo-op, but in general they may be:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">An expression.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A register name, with optional pre-decrement or
      post-increment.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A nested list surrounded by <b>[</b> and <b>]</b>. This is
      generally only used to indicate indirect indexed addressing.</dd>
</dl>
<div class="Pp"></div>
In addition, any argument may be preceded by:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>#</b>, indicate immediate value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>&lt;&lt;</b>, force 5-bit index offset.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>&lt;</b>, force direct addressing, 8-bit value or 8-bit
      index offset.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>&gt;</b>, force extended addressing, 16-bit value or
      16-bit index offset.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Expressions"><a class="selflink" href="#Expressions">Expressions</a></h2>
Expressions are formed of:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A decimal number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">An octal number preceded by <b>@</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A binary number preceded by <b>%</b> or <b>0b</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A hexadecimal number preceded by <b>$</b> or
    <b>0x</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A floating point number: decimal digits surrounding exactly
      one full stop ( <b>.</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A single quote followed by any ASCII character (yielding
      the ASCII value of that character).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A symbol name, local forward reference or local back
      reference.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Any of the above prefixed with a unary minus (<b>-</b>) or
      plus ( <b>+</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A string delimited either by double quotes or
    <b>/</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A combination of any of the above with arithmetic, bitwise,
      logical or relational operators.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Parenthesis to specify precedence.</dd>
</dl>
<div class="Pp"></div>
The assembler uses multiple passes to resolve expressions. If an expression
  refers to a symbol that cannot currently be resolved, an extra pass is
  triggered. Similarly, if a symbol is assigned a value (e.g. by an <b>EQU</b>
  pseudo-op) that differs to its value on the previous pass, another is
  triggered until it becomes stable.
<div class="Pp"></div>
When not directly used for their contents (e.g. by <b>FCC</b>), strings can be
  used in place of integer values. The ASCII value of each character is used to
  represent 8 bits of the integer result up to 32 bits. Example:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
0000&#x00A0;&#x00A0;CC443A&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ldd&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&quot;D:&quot;
    </pre>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Operators"><a class="selflink" href="#Operators">Operators</a></h2>
The following operators are available, listed in descending order of precedence
  (where operators share a precedence, left-to-right evaluation is performed):
<div style="margin-left: 5.00ex;">
<table class="tbl">
  <colgroup>
    <col style="width: 25.00ex;"/>
    <col style="width: 20.00ex;"/>
  </colgroup>
  <tr>
    <td> <b>Operator</b> </td>
    <td><b>Description</b></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>+</b> </td>
    <td>unary plus</td>
  </tr>
  <tr>
    <td> <b>-</b> </td>
    <td>unary minus</td>
  </tr>
  <tr>
    <td> <b>!</b> <b>~</b> </td>
    <td>logical, bitwise NOT</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>*</b> </td>
    <td>multiplication</td>
  </tr>
  <tr>
    <td> <b>/</b> </td>
    <td>division</td>
  </tr>
  <tr>
    <td> <b>%</b> </td>
    <td>modulo</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>+</b> </td>
    <td>addition</td>
  </tr>
  <tr>
    <td> <b>-</b> </td>
    <td>subtraction</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>&lt;&lt;</b> </td>
    <td>bitwise shift left</td>
  </tr>
  <tr>
    <td> <b>&gt;&gt;</b> </td>
    <td>bitwise shift right</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>&lt;</b> <b>&lt;=</b> </td>
    <td>relational operators</td>
  </tr>
  <tr>
    <td> <b>&gt;</b> <b>&gt;=</b> </td>
    <td>relational operators</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>==</b> </td>
    <td>relational equal</td>
  </tr>
  <tr>
    <td> <b>!=</b> </td>
    <td>relational not equal</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>&amp;</b> </td>
    <td>bitwise AND</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>^</b> </td>
    <td>bitwise XOR</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>|</b> </td>
    <td>bitwise OR</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>&amp;&amp;</b> </td>
    <td>logical AND</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>||</b> </td>
    <td>logical OR</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td> <b>?:</b> </td>
    <td>ternary operator</td>
  </tr>
</table>
</div>
<div class="Pp"></div>
Division always returns a floating point result. Other arithmetic operators
  return integers if both operands are integers, otherwise floating point.
  Bitwise operators and modulo all cast their operands to integers and return an
  integer. Relational and logical operators result in 0 if false, 1 if true.
  Integer calculations are performed using the platform's <i>int64_t</i> type,
  floating point uses <i>double</i>.
<h2 class="Ss" title="Ss" id="Conditional_assembly"><a class="selflink" href="#Conditional_assembly">Conditional
  assembly</a></h2>
The pseudo-ops <b>IF</b>, <b>ELSIF</b>, <b>ELSE</b> and <b>ENDIF</b> guide
  conditional assembly. <b>IF</b> and <b>ELSIF</b> take one argument, which is
  evaluated as an integer. If the result is non-zero, the following code will be
  assembled, else it will be skipped. Undefined symbols encountered while
  evaluating the condition are interpreted as zero (false) rather than raising
  an error.
<div class="Pp"></div>
Conditional assembly pseudo-ops are permitted within macro definitions and will
  be evaluated at the time of expansion, therefore positional variables can be
  used to affect macro expansion.
<h2 class="Ss" title="Ss" id="Sections"><a class="selflink" href="#Sections">Sections</a></h2>
Code can be placed into named sections with the <b>SECTION</b> pseudo-op. This
  can make breaking source into multiple input files more comfortable. Without
  <b>ORG</b> or <b>PUT</b> directives, sections will follow each other in memory
  in the order they are first defined.
<div class="Pp"></div>
Within each section, there may exist multiple spans of discontiguous data.
  Certain output formats are able to represent this, for the others (e.g.
  DragonDOS), the spans are combined first, with the gaps between them padded
  with zero bytes.
<h2 class="Ss" title="Ss" id="Local_labels"><a class="selflink" href="#Local_labels">Local
  labels</a></h2>
Local labels are considered local to the current <i>section</i>. A local label
  is any decimal number used in the label field, and the same local label may
  appear mulitple times, unlike other labels.
<div class="Pp"></div>
As an operand, a decimal number followed by <b>B</b> or <b>F</b> is considered
  to be a back or forward reference to the previous or next occurrence of that
  numerical local label in the section.
<div class="Pp"></div>
In this example, the <b>1</b> label occurs twice, but each use of <b>1B</b>
  refers to the closest one searching backwards:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
0000&#x00A0;&#x00A0;8E0400&#x00A0;&#x00A0;&#x00A0;&#x00A0;scroll&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ldx&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#$0400
0003&#x00A0;&#x00A0;EC8820&#x00A0;&#x00A0;&#x00A0;&#x00A0;1&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ldd&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;32,x
0006&#x00A0;&#x00A0;ED81&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;std&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;,x++
0008&#x00A0;&#x00A0;8C05E0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cmpx&#x00A0;&#x00A0;&#x00A0;&#x00A0;#$05e0
000B&#x00A0;&#x00A0;25F6&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;blo&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;1B
000D&#x00A0;&#x00A0;CC6060&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ldd&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#$6060
0010&#x00A0;&#x00A0;ED81&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;1&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;std&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;,x++
0012&#x00A0;&#x00A0;8C0600&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cmpx&#x00A0;&#x00A0;&#x00A0;&#x00A0;#$0600
0015&#x00A0;&#x00A0;25F9&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;blo&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;1B
0017&#x00A0;&#x00A0;39&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;rts
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
An exclamation mark ( <b>!</b>) in the label field is treated as a local label
  numbered zero. Operands of <b>&lt;</b> and <b>&gt;</b> are considered
  equivalent to <b>0B</b> and <b>0F</b> respectively, and can therefore refer to
  the <b>!</b> local label. This is included for compatibility with other
  assemblers.
<div class="Pp"></div>
As local labels can be repeated, their position is used to distinguish them. For
  this reason, all file inclusions and macro expansion must occur during the
  first pass so that the absolute line count at which each local label is
  encountered remains the same between passes.
<h2 class="Ss" title="Ss" id="Macros"><a class="selflink" href="#Macros">Macros</a></h2>
Start a macro definition by specifying a name for it in the label field, and
  <b>MACRO</b> in the instruction field. Finish the definition with <b>ENDM</b>
  in the instruction field.
<div class="Pp"></div>
Use a macro by specifying its name in the instruction field. Any arguments given
  will be available during expansion as a positional variable.
<div class="Pp"></div>
Positional variables can be used within strings, or pasted to form symbol names.
  In either case, they must be quoted or they will be passed by value, which
  will result in an error if they do not correspond to valid symbols by
  themselves.
<div class="Pp"></div>
The positional variables are referred to with <b>\{1}</b>, <b>\{2}</b>, ,
  <b>\{</b> <i>n</i><b>}</b>. For the first nine arguments, the braces are not
  required, so <b>\1</b>, <b>\2</b>, , <b>\9</b> are valid alternatives. For
  compatibility with the TSC Flex assembler, another form is accepted:
  <b>&amp;{1}</b>, <b>&amp;{2}</b>, , <b>&amp;{</b><i>n</i><b>}</b>. Within a
  string, the shorter <b>&amp;1</b>, <b>&amp;2</b>, , <b>&amp;9</b> is still
  valid, but as this can be confused with bitwise AND, it is not permitted
  elsewhere.
<div class="Pp"></div>
Here's a silly example demonstrating positional variables and symbol pasting.
  Consider the following macro definition and utilising code:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
go_left&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;equ&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;-1
go_right&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;equ&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;+1
move&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;macro
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lda&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x_position
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;adda&#x00A0;&#x00A0;&#x00A0;&#x00A0;#go_\1
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sta&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x_position
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;endm
do_move
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;move&#x00A0;&#x00A0;&#x00A0;&#x00A0;&quot;right&quot;
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;rts
x_position&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;rmb&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;1
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
The main code generated is as follows:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
0000&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;do_move
0000&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;move&#x00A0;&#x00A0;&#x00A0;&#x00A0;&quot;right&quot;
0000&#x00A0;&#x00A0;B60009&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lda&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x_position
0003&#x00A0;&#x00A0;8B01&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;adda&#x00A0;&#x00A0;&#x00A0;&#x00A0;#go_\1
0005&#x00A0;&#x00A0;B70009&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sta&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x_position
0008&#x00A0;&#x00A0;39&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;rts
    </pre>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="Pseudo-ops"><a class="selflink" href="#Pseudo-ops">Pseudo-ops</a></h2>
Conditional assembly:
<dl class="Bl-tag">
  <dt class="It-tag"><b>IF</b> <i>condition</i></dt>
  <dd class="It-tag">Subsequent lines are assembled only if <i>condition</i>
      evaluates to true (non-zero).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ELSIF</b> <i>condition</i></dt>
  <dd class="It-tag">Subsequent lines are assembled only if all preceding
      <b>IF</b> and <b>ELSIF</b> pseudo-ops evaluated to false (zero) and
      <i>condition</i> evaluates to true (non-zero).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ELSE</b></dt>
  <dd class="It-tag">Subsequent lines are assembled only if all preceding
      <b>IF</b> and <b>ELSIF</b> pseudo-ops evaluated to false (zero).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ENDIF</b></dt>
  <dd class="It-tag">Terminate an <b>IF</b> statement.</dd>
</dl>
<div class="Pp"></div>
Macro definition:
<dl class="Bl-tag">
  <dt class="It-tag"><b>MACRO</b></dt>
  <dd class="It-tag">Start defining a macro. The macro's name shall be in the
      label field. Subsequent lines up to the enclosing <b>ENDM</b> pseudo-op
      will not be assembled until the macro is expanded. Macro definitions may
      be nested; that is, using a macro may define another macro.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ENDM</b></dt>
  <dd class="It-tag">Finish a macro definition started with <b>MACRO</b>.</dd>
</dl>
<div class="Pp"></div>
Inline data:
<dl class="Bl-tag">
  <dt class="It-tag"><b>FCB</b> <i>value</i>[,<i>value</i>]</dt>
  <dd class="It-tag"><b>FCC</b> <i>value</i>[,<i>value</i>] Form Constant Byte.
      Each <i>value</i> is evaluated either to a number or a string. Numbers are
      truncated to 8 bits and stored directly as bytes. For strings, the ASCII
      value of each character is stored in sequential bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Historically, <b>FCB</b> handled bytes and <b>FCC</b> (Form
      Constant Character string) handled strings. <b>asm6809</b> treats them as
      synonymous, but is rather more strict about what is allowed as a string
      delimiter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FCN</b> <i>value</i>[,<i>value</i>]</dt>
  <dd class="It-tag">Identical to <b>FCC</b>, but a terminating zero byte is
      stored after the data. Included to increase compatibility with other
      assemblers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FDB</b> <i>value</i>[,<i>value</i>]</dt>
  <dd class="It-tag">Form Double Byte. Each <i>value</i> is evaluated to a
      number, which is truncated to 16 bits and stored as two successive bytes
      (big- endian, of course).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>FILL</b> <i>value</i>,<i>count</i></dt>
  <dd class="It-tag">Insert <i>count</i> bytes of <i>value</i>. This is
      effectively the same as the two-argument form of <b>RZB</b> with its
      arguments swapped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RZB</b> <i>count</i>[,<i>value</i>]</dt>
  <dd class="It-tag"><b>ZMB</b> <i>count</i>[,<i>value</i>] <b>BSZ</b>
      <i>count</i>[, <i>value</i>] Reserve Zeroed Bytes. Inserts a sequence of
      <i>count</i> bytes of zero, or <i>value</i> if specified. The two-argument
      form is effectively the same as <b>FILL</b> with its arguments
    swapped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>ZMB</b> and <b>BSZ</b> are alternate forms recognised
      for compatibility with other assemblers.</dd>
</dl>
<div class="Pp"></div>
Code placement &amp; addressing:
<dl class="Bl-tag">
  <dt class="It-tag"><b>ORG</b> <i>address</i></dt>
  <dd class="It-tag">Sets the Program Counter&#x2014;the base address assumed
      for the next assembled instruction. Unless followed by a <b>PUT</b>
      pseudo-op, this will also be the instruction's actual address in memory. A
      label on the same line will define a symbol with a value of the specified
      address.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>PUT</b> <i>address</i></dt>
  <dd class="It-tag">Modify the put address&#x2014;the Program Counter is
      unaffected, so the assumed address for subsequent instructions remains the
      same, but the actual data will be located elsewhere. Useful for assembling
      code that is going to be copied into place before executing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RMB</b> <i>count</i></dt>
  <dd class="It-tag">Reserve Memory Bytes. The Program Counter is advanced
      <i>count</i> bytes. In some output formats this region may be padded with
      zeroes, in others a new loadable section may be created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SECTION</b> <i>name</i></dt>
  <dd class="It-tag"><b>CODE</b> <b>DATA</b> <b>BSS</b> <b>RAM</b> <b>AUTO</b>
      Switch to the named section. The Program Counter will continue from the
      last value it had while assembling this section, or follow the previous
      section if had not previously been seen.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Each of <b>CODE</b>, <b>DATA</b>, <b>BSS</b>, <b>RAM</b>,
      and <b>AUTO</b> switches to a section named after the pseudo-op. They are
      recognised for compatibility with other assemblers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SETDP</b> <i>page</i></dt>
  <dd class="It-tag">Set the assumed value of the Direct Page (<b>DP</b>)
      register to <i>page</i> for subsequent instructions. Any non-negative
      <i>page</i> is truncated to 8 bits, or specify a negative number to
      disable automatic direct addressing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">See the section on Direct Page addressing for more
      information.</dd>
</dl>
<div class="Pp"></div>
Symbols:
<dl class="Bl-tag">
  <dt class="It-tag"><b>EQU</b> <i>value</i></dt>
  <dd class="It-tag">Short for &#x201C;equate&#x201D;, this must be used with a
      label and defines a symbol with the specified <i>value</i>. This may be
      any single valid argument (e.g. an expression or a string).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>EXPORT</b> <i>name</i>[,<i>name</i>]</dt>
  <dd class="It-tag">Each <i>name</i>&#x2014;either the name of a macro or a
      symbol&#x2014;is flagged to be exported. Exported macros and symbols will
      be listed in the symbols output file, if specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>SET</b> <i>value</i></dt>
  <dd class="It-tag">Similar to <b>EQU</b>, this must be used with a label and
      defines a symbol with the specified <i>value</i>. Unlike <b>EQU</b>, you
      can use <b>SET</b> multiple times to assign different values to the same
      symbol without error.</dd>
</dl>
<div class="Pp"></div>
Files:
<dl class="Bl-tag">
  <dt class="It-tag"><b>END</b> [<i>address</i>]</dt>
  <dd class="It-tag">Signifies the end of input. All further lines are
      disregarded.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Optionally specifies an EXEC address to be included in the
      output, where supported by the output format. An EXEC address specified on
      the command line will override any value specified here.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>INCLUDE</b> <i>filename</i></dt>
  <dd class="It-tag">Includes the contents of another file at this point in
      assembly. The <i>filename</i> argument must be a string, i.e. delimited by
      quotes or <b>/</b> characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>INCLUDEBIN</b> <i>filename</i></dt>
  <dd class="It-tag">Includes the binary data from <i>filename</i> (which, as
      with <b>INCLUDE</b> must be a delimited string) directly.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Direct_Page_addressing"><a class="selflink" href="#Direct_Page_addressing">Direct
  Page addressing</a></h2>
The 6809 extends the zero page concept from other processors by allowing fast
  accesses to whichever page is selected by the Direct Page register (
  <b>DP</b>). An assembler is not able to keep track of what the code has set
  this register to, but the information is useful when deciding which addressing
  mode to use for an instruction. The <b>SETDP</b> pseudo-op, or <b>--setdp</b>
  option, informs the assembler that the supplied value is to be assumed for
  <b>DP</b>. Set this to a negative number to undefine it and disable automatic
  use of direct addressing (this is the default).
<h1 class="Sh" title="Sh" id="LICENCE"><a class="selflink" href="#LICENCE">LICENCE</a></h1>
This program is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation, either version 3 of the License, or (at your option) any later
  version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 2017</td>
    <td class="foot-os">asm6809-2.8</td>
  </tr>
</table>
</body>
</html>
