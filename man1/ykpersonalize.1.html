<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:44:43 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>YKPERSONALIZE(1) YubiKey Personalization Tool M
YKPERSONALIZE(1)</p>

<p style="margin-top: 1em">NAME <br>
ykpersonalize - personalize YubiKey OTP tokens</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ykpersonalize [-Nkey] [-1 | -2] [-sfile] [-ifile] [-fformat]
[-axxx] [-cxxx] [-ooption] [-y] [-v] [-d] [-h] [-n] [-t]
[-u] [-x] [-z] [-m] [-S] [-V]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Set the AES key, user ID and other settings in a YubiKey.
For the complete explanation of the meaning of all
parameters, see the reference manual: YubiKey manual <br>

(https://www.yubico.com/wp-content/uploads/2015/03/YubiKeyManual_v3.4.pdf)</p>

<p style="margin-top: 1em">OPTIONS <br>
-Nkey <br>
use the nth YubiKey found.</p>

<p style="margin-top: 1em">-1 <br>
change the first configuration. This is the default and is
normally used for true OTP generation. In this
configuration, the option flag -oappend-cr is set by
default.</p>

<p style="margin-top: 1em">-2 <br>
change the second configuration. This is for YubiKey II only
and is then normally used for static key generation. In this
configuration, the option flags -oappend-cr, <br>
-ostatic-ticket, -ostrong-pw1, -ostrong-pw2 and -oman-update
are set by default.</p>

<p style="margin-top: 1em">-z <br>
delete configuration in selected slot</p>

<p style="margin-top: 1em">-sfile <br>
save configuration to file instead of key. (if file is -,
send to stdout)</p>

<p style="margin-top: 1em">-ifile <br>
read configuration from file. (if file is -, read from
stdin) Configuration import is only valid for the ycfg
format.</p>

<p style="margin-top: 1em">-fformat <br>
format to be used with -s and -i. Valid options are ycfg and
legacy.</p>

<p style="margin-top: 1em">-a[xxx] <br>
the AES secret key as a 32 (or 40 for OATH-HOTP/HMAC
CHAL-RESP) char hex value (not modhex) (none to prompt for
key on stdin) If -a is not used a random key will be <br>
generated.</p>

<p style="margin-top: 1em">-cxxx <br>
A 12 char hex value (not modhex) to use as access code for
programming. NOTE: this does NOT SET the access code,
that&acirc;s done with -oaccess=.</p>

<p style="margin-top: 1em">-ooption <br>
change configuration option. Possible option arguments
are:</p>

<p style="margin-top: 1em">fixed=fffffffffff <br>
The modhex public identity of the YubiKey, 0-32 characters
long (encoding up to 16 bytes). It&acirc;s possible to give
the identity in hex as well, just prepend the value with
<br>
&acirc;h:&acirc;. The fixed part is emitted before the OTP
when the button on the YubiKey is pressed. It can be used as
an identifier for the user, for example.</p>

<p style="margin-top: 1em">uid=uuuuuu <br>
The uid part of the generated OTP, also called private
identity, in hex. Must be 12 characters long. The uid is 6
bytes of static data that is included (encrypted) in <br>
every OTP, and is used to validate that an OTP was in fact
encrypted with the AES key shared between the YubiKey and
the validation service. It cannot be used to identify <br>
the YubiKey as it is only readable to those that know the
AES key.</p>

<p style="margin-top: 1em">access=fffffffffff <br>
New hex access code to set. Must be 12 characters long. If
an access code is set, it will be required for subsequent
reprogramming of the YubiKey.</p>

<p style="margin-top: 1em">oath-imf=xxx <br>
Set OATH Initial Moving Factor. This is the initial counter
value for the YubiKey. This should be a value between 0 and
1048560, evenly dividable by 16.</p>

<p style="margin-top: 1em">ticket-flag <br>
Set/clear ticket flag, see the section Ticket flags</p>

<p style="margin-top: 1em">configuration-flag <br>
Set/clear ticket flag, see the section Configuration
flags</p>

<p style="margin-top: 1em">-y <br>
always commit without prompting</p>

<p style="margin-top: 1em">-d <br>
dry-run, run without writing a YubiKey</p>

<p style="margin-top: 1em">-v <br>
Be more verbose</p>

<p style="margin-top: 1em">-h <br>
Help</p>

<p style="margin-top: 1em">-V <br>
Version</p>

<p style="margin-top: 1em">YubiKey Neo only <br>
-n URI <br>
Program NFC NDEF URI</p>

<p style="margin-top: 1em">-t text <br>
Program NFC NDEF text</p>

<p style="margin-top: 1em">YubiKey 3.0 and above <br>
-m mode <br>
set device configuration for the YubiKey. It is parsed in
the form mode:cr_timeout:autoeject_timeout where mode
is:</p>

<p style="margin-top: 1em">0 <br>
OTP device only.</p>

<p style="margin-top: 1em">1 <br>
CCID device only.</p>

<p style="margin-top: 1em">2 <br>
OTP/CCID composite device.</p>

<p style="margin-top: 1em">3 <br>
U2F device only.</p>

<p style="margin-top: 1em">4 <br>
OTP/U2F composite device.</p>

<p style="margin-top: 1em">5 <br>
U2F/CCID composite device.</p>

<p style="margin-top: 1em">6 <br>
OTP/U2F/CCID composite device. Add 80 to set
MODE_FLAG_EJECT, for example: 81</p>

<p style="margin-top: 1em">cr_timeout is the timeout in
seconds for the YubiKey to wait on button press for
challenge response (default is 15)</p>

<p style="margin-top: 1em">autoeject_timeout is the timeout
in seconds before the card is automatically ejected in mode
81</p>

<p style="margin-top: 1em">Removing OTP mode also disable
communication between ykpersonalize and the YubiKey, further
mode changes will have to be done with ykneomgr (for CCID
mode) or u2f-host (for U2F <br>
mode)</p>

<p style="margin-top: 1em">-S0605... <br>
set the scanmap to be used with the YubiKey. It must be 45
unique bytes as 90 characters. Leave argument empty to reset
to the YubiKey&acirc;s default. The scanmap must be sent in
<br>
the order:</p>


<p style="margin-top: 1em">cbdefghijklnrtuvCBDEFGHIJKLNRTUV0123456789!</p>

<p style="margin-top: 1em">The default scanmap in the
YubiKey is:</p>


<p style="margin-top: 1em">06050708090a0b0c0d0e0f111517181986858788898a8b8c8d8e8f9195979899271e1f202122232425269e2b28</p>

<p style="margin-top: 1em">An example for simplified us
dvorak would be:</p>


<p style="margin-top: 1em">0c110b071c180d0a0619130f120e09378c918b879c988d8a8699938f928e89b7271e1f202122232425269e2b28</p>

<p style="margin-top: 1em">Or for a French azerty keyboard
(digits are shifted):</p>


<p style="margin-top: 1em">06050708090a0b0c0d0e0f111517181986858788898a8b8c8d8e8f9195979899a79e9fa0a1a2a3a4a5a6382b28</p>

<p style="margin-top: 1em">And a Turkish example (has a
dotless i instead of usual i):</p>


<p style="margin-top: 1em">06050708090a0b340d0e0f111517181986858788898a8b8c8d8e8f9195979899271e1f202122232425269e2b28</p>

<p style="margin-top: 1em">Note that you must remove any
whitespace present in these examples before using the
values.</p>

<p style="margin-top: 1em">YubiKey 2.3 and above <br>
-u <br>
Update existing configuration, rather than overwriting. Only
possible if the slot is configured as updatable.</p>

<p style="margin-top: 1em">-x <br>
Swap configuration slot 1 and 2 inside the YubiKey. Only
possible if both slots are configured as updatable.</p>

<p style="margin-top: 1em">TICKET FLAGS <br>
tab-first <br>
Send a tab character as the first character. This is usually
used to move to the next input field.</p>

<p style="margin-top: 1em">append-tab1 <br>
Send a tab character between the fixed part and the one-time
password part. This is useful if you have the fixed portion
equal to the user name and two input fields that you <br>
navigate between using tab.</p>

<p style="margin-top: 1em">append-tab2 <br>
Send a tab character as the last character.</p>

<p style="margin-top: 1em">append-delay1 <br>
add a half-second delay before sending the one-time password
part. This option is only valid for firmware 1.x and
2.x.</p>

<p style="margin-top: 1em">append-delay2 <br>
a half-second delay after sending the one-time password
part. This option is only valid for firmware 1.x and
2.x.</p>

<p style="margin-top: 1em">append-cr <br>
a carriage return after sending the one-time password
part.</p>

<p style="margin-top: 1em">YubiKey 2.0 firmware and above
<br>
protect-cfg2 <br>
When written to configuration 1, block later updates to
configuration 2. When written to configuration 2, prevent
configuration 1 from having the lock bit set.</p>

<p style="margin-top: 1em">YubiKey 2.1 firmware and above
<br>
oath-hotp <br>
Set OATH-HOTP mode rather than YubiKey mode. In this mode,
the token functions according to the OATH-HOTP standard.</p>

<p style="margin-top: 1em">YubiKey 2.2 firmware and above
<br>
chal-resp <br>
Set challenge-response mode.</p>

<p style="margin-top: 1em">CONFIGURATION FLAGS <br>
send-ref <br>
Send a reference string of all 16 modhex characters before
the fixed part. When combined with -ostrong-pw2 this sends a
! before the rest of the string.</p>

<p style="margin-top: 1em">pacing-10ms <br>
Add a 10ms delay between key presses.</p>

<p style="margin-top: 1em">pacing-20ms <br>
Add a 20ms delay between key presses.</p>

<p style="margin-top: 1em">static-ticket <br>
Output a fixed string rather than a one-time password. The
password is still based on the AES key and should be hard to
guess and impossible to remember.</p>

<p style="margin-top: 1em">YubiKey 1.x firmware only <br>
ticket-first <br>
Send the one-time password rather than the fixed part
first.</p>

<p style="margin-top: 1em">allow-hidtrig <br>
Allow trigger through HID/keyboard by pressing caps-, num or
scroll-lock twice. Not recommended for security reasons.</p>

<p style="margin-top: 1em">YubiKey 2.0 firmware and above
<br>
short-ticket <br>
Limit the length of the static string to max 16 digits. This
flag only makes sense with the -ostatic-ticket option. When
-oshort-ticket is used without -ostatic-ticket it <br>
will program the YubiKey in &quot;scan-code mode&quot;, in
this mode the key sends the contents of fixed, uid and key
as raw keyboard scancodes. For example, by using the fixed
string <br>
h:8b080f0f122c9a12150f079e in this mode it will send Hello
World! on a qwerty keyboard. This mode sends raw scan codes,
so output will differ between keyboard layouts.</p>

<p style="margin-top: 1em">strong-pw1 <br>
Upper-case the two first letters of the output string. This
is for compatibility with legacy systems that enforce both
uppercase and lowercase characters in a password and <br>
does not add any security.</p>

<p style="margin-top: 1em">strong-pw2 <br>
Replace the first eight characters of the modhex alphabet
with the numbers 0 to 7. Like -ostrong-pw1, this is intended
to support legacy systems.</p>

<p style="margin-top: 1em">man-update <br>
Enable user-initiated update of the static password. Only
makes sense with the -ostatic-ticket option. This is only
valid for firmware 2.x.</p>

<p style="margin-top: 1em">YubiKey 2.1 firmware and above
<br>
oath-hotp8 <br>
When set, generate an 8-digit HOTP rather than a 6-digit
one.</p>

<p style="margin-top: 1em">oath-fixed-modhex1 <br>
When set, the first byte of the fixed part is sent as
modhex.</p>

<p style="margin-top: 1em">oath-fixed-modhex2 <br>
When set, the first two bytes of the fixed part is sent as
modhex.</p>

<p style="margin-top: 1em">oath-fixed-modhex <br>
When set, the fixed part is sent as modhex.</p>

<p style="margin-top: 1em">oath-id=m:OOTTUUUUUUUU <br>
Configure OATH token id with a provided value. See
description of this option under the 2.2 section for
details, but note that a YubiKey 2.1 key can&acirc;t report
its serial <br>
number and thus a token identifier value must be
specified.</p>

<p style="margin-top: 1em">YubiKey 2.2 firmware and above
<br>
chal-yubico <br>
Yubico OTP challenge-response mode.</p>

<p style="margin-top: 1em">chal-hmac <br>
Generate HMAC-SHA1 challenge responses.</p>

<p style="margin-top: 1em">hmac-lt64 <br>
Calculate HMAC on less than 64 bytes input. Whatever is in
the last byte of the challenge is used as end of input
marker (backtracking from end of payload).</p>

<p style="margin-top: 1em">chal-btn-trig <br>
The YubiKey will wait for the user to press the key (within
15 seconds) before answering the challenge.</p>

<p style="margin-top: 1em">serial-btn-visible <br>
The YubiKey will emit its serial number if the button is
pressed during power-up. This option is only valid for the
2.x firmware line.</p>

<p style="margin-top: 1em">serial-usb-visible <br>
The YubiKey will indicate its serial number in the USB
iSerial field. This option is not available in the 3.0 and
3.1 firmwares.</p>

<p style="margin-top: 1em">serial-api-visible <br>
The YubiKey will allow its serial number to be read using an
API call.</p>

<p style="margin-top: 1em">oath-id[=m:OOTTUUUUUUUU] <br>
Configure OATH token id with a provided value, or if used
without a value use the standard YubiKey token
identifier.</p>

<p style="margin-top: 1em">The standard OATH token id for a
Yubico YubiKey is (modhex) OO=ub, TT=he, (decimal)
UUUUUUUU=serial number.</p>

<p style="margin-top: 1em">The reason for the decimal
serial number is to make it easy for humans to correlate the
serial number on the back of the YubiKey to an entry in a
list of associated tokens for <br>
example. Other encodings can be accomplished using the
appropriate oath-fixed-modhex options.</p>

<p style="margin-top: 1em">Note that the YubiKey must be
programmed to allow reading its serial number, otherwise
automatic token id creation is not possible.</p>

<p style="margin-top: 1em">See section &quot;5.3.4 -
OATH-HOTP Token Identifier&quot; of the YubiKey manual
http://yubico.com/files/YubiKey_manual-2.0.pdf for further
details.</p>

<p style="margin-top: 1em">YubiKey 2.3 firmware and above
<br>
use-numeric-keypad <br>
Send scancodes for numeric keypad keypresses when sending
digits - helps with some keyboard layouts. This option is
only valid for the 2.x firmware line.</p>

<p style="margin-top: 1em">fast-trig <br>
Faster triggering when only configuration 1 is available.
This option is always in effect on firmware versions 3.0 and
above.</p>

<p style="margin-top: 1em">allow-update <br>
Allow updating (or swapping) of certain parameters in a
configuration at a later time.</p>

<p style="margin-top: 1em">dormant <br>
Hides/unhides a configuration stored in a YubiKey.</p>

<p style="margin-top: 1em">YubiKey 2.4/3.1 firmware and
above <br>
led-inv <br>
Inverts the behaviour of the led on the YubiKey.</p>

<p style="margin-top: 1em">OATH-HOTP Mode <br>
When using OATH-HOTP mode, a HMAC key of 160 bits (20 bytes,
40 chars of hex) can be supplied with -a.</p>

<p style="margin-top: 1em">Challenge-response Mode <br>
In CHAL-RESP mode, the token will NOT generate any
keypresses when the button is pressed (although it is
perfectly possible to have one slot with a
keypress-generating <br>
configuration, and the other in challenge-response mode).
Instead, a program capable of sending USB HID feature
reports to the token must be used to send it a challenge,
and read <br>
the response.</p>

<p style="margin-top: 1em">Modhex <br>
Modhex is a way of writing hex digits where the
&acirc;digits&acirc; are chosen for being in the same place
on most keyboard layouts. To convert from hex to modhex, you
can use:</p>

<p style="margin-top: 1em">tr
&quot;[0123456789abcdef]&quot;
&quot;[cbdefghijklnrtuv]&quot;</p>

<p style="margin-top: 1em">To convert the other way,
use:</p>

<p style="margin-top: 1em">tr
&quot;[cbdefghijklnrtuv]&quot;
&quot;[0123456789abcdef]&quot;</p>

<p style="margin-top: 1em">EXAMPLES <br>
Programming for YubiCloud:</p>

<p style="margin-top: 1em">ykpersonalize -1
-ouid=h:&lsquo;dd if=/dev/urandom bs=1 count=6 status=none |
hexdump -e &rsquo;/1 &quot;%02x&quot;&rsquo;&lsquo;
-ofixed=h:ff&lsquo;dd if=/dev/urandom bs=1 count=5
status=none | hexdump -e &rsquo;/1
&quot;%02x&quot;&rsquo;&lsquo;</p>

<p style="margin-top: 1em">This will program a key with a
random 6 byte uid and a 12 character fixed string starting
with vv. This is suitable for upload to YubiCloud at
https://upload.yubico.com/</p>

<p style="margin-top: 1em">BUGS <br>
Report ykpersonalize bugs in the issue tracker
https://github.com/Yubico/yubikey-personalization/issues</p>

<p style="margin-top: 1em">SEE ALSO <br>
The ykpersonalize home page
https://developers.yubico.com/yubikey-personalization/</p>

<p style="margin-top: 1em">YubiKeys can be obtained from
Yubico http://www.yubico.com/</p>

<p style="margin-top: 1em">ykpersonalize Version 1.18.0
YKPERSONALIZE(1)</p>
<hr>
</body>
</html>
