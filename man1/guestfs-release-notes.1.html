<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>guestfs-release-notes(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">guestfs-release-notes(1)</td>
    <td class="head-vol">Virtualization Support</td>
    <td class="head-rtitle">guestfs-release-notes(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
guestfs-release-notes - libguestfs Release Notes
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.32"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.32">RELEASE
  NOTES FOR LIBGUESTFS 1.32</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.30.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>New tools</i>
<div class="Pp"></div>
The new <i>virt-v2v-copy-to-local</i>(1) tool is an ancillary tool for
  <i>virt-v2v</i>(1) allowing you to convert source guests that virt-v2v is
  unable to access directly.
<div class="Pp"></div>
<i>New features in existing tools</i>
<div class="Pp"></div>
Virt-customize knows how to write a random seed to CirrOS (Pino Toscano).
<div class="Pp"></div>
On Fedora, virt-customize runs <i>dnf</i>(8) with the <i>--best</i> flag,
  ensuring it always updates to the latest available packages.
<div class="Pp"></div>
Virt-builder now provides 32 bit Fedora templates.
<div class="Pp"></div>
Virt-builder and virt-customize <i>--install</i> option now works on 32 bit
  Fedora guests. Previously it would try to install 64 bit packages (Jan
  Sedl&#x00E1;k).
<div class="Pp"></div>
Virt-builder can now fetch cloud images using Simple Streams v1.0 metadata (Pino
  Toscano).
<div class="Pp"></div>
Virt-builder can now fetch openSUSE cloud images out of the box (C&#x00E9;dric
  Bosdonnat).
<div class="Pp"></div>
Virt-customize will now use stronger (SHA-512) encrypted passwords by default on
  openSUSE &#x2265; 11 (Pino Toscano).
<div class="Pp"></div>
Virt-builder will now correctly handle output filenames containing colon
  characters (&quot;:&quot;), and will create temporary files in the libguestfs
  cache directory instead of defaulting to <i>/tmp</i> (Pino Toscano).
<div class="Pp"></div>
Virt-resize has a new <i>--unknown-filesystems</i> option to control what to do
  when asked to resize a filesystem that libguestfs doesn't know how to resize.
<div class="Pp"></div>
Virt-v2v now has an <i>--in-place</i> flag/mode, allowing in-place conversion of
  guests (Roman Kagan).
<div class="Pp"></div>
Virt-v2v has a <i>--compressed</i> option for creating compressed qcow2 output
  files.
<div class="Pp"></div>
Virt-v2v can now correctly get the VMware datacenter path (dcPath) from libvirt,
  instead of having to calculate it using an algorithm that occasionally got the
  wrong answer (Matthias Bolte, Tingting Zheng).
<div class="Pp"></div>
Virt-v2v now processes RAM sizes correctly for 64 bit guests when running on a
  32 bit host.
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
In Perl and Python programs, the &quot;get_program_name&quot; API now returns
  the true program name, instead of the incorrect string &quot;perl&quot; or
  &quot;python&quot;.
<div class="Pp"></div>
The Python bindings can now be compiled against a different version of
  libguestfs, allowing the pip module to be built against any version of
  libguestfs (instead of requiring the pip module and libguestfs to have exactly
  the same version).
<div class="Pp"></div>
The quality of the Ruby rdoc (documentation) has been improved (Pino Toscano).
<div class="Pp"></div>
Perl scripts no longer hard-code the location of perl in the shebang line, but
  use <i>env</i>(1) to locate it instead (Pino Toscano).
<div class="Pp"></div>
In OCaml programs, the guestfs handle was incorrectly made into a global root,
  meaning it could never be garbage collected. If you didn't call the
  &quot;close&quot; function explicitly, the handle would not be closed until
  the whole program exited. This has now been fixed so handles will be garbage
  collected in the usual way. This changes the API of the OCaml function
  &quot;Guestfs.event_callback&quot;. Note that non-C language bindings are not
  covered by the libguestfs API/ABI guarantee, although we try hard not to
  change them, but in this case it was essential in order to fix this very
  serious bug.
<div class="Pp"></div>
<i>Inspection</i>
<div class="Pp"></div>
Alpine Linux and the APK package manager, ALT Linux, Frugalware, and PLD Linux
  are now recognized (Pino Toscano).
<div class="Pp"></div>
If it exists, <i>/etc/os-release</i> will be preferred for inspecting Linux
  guests (Pino Toscano).
<div class="Pp"></div>
The correct kernel version is returned for Windows guests &#x2265; 10.
<div class="Pp"></div>
<i>Documentation</i>
<div class="Pp"></div>
The large <i>guestfs</i>(3) man page has been split into several separate man
  pages: <i>guestfs-hacking</i>(1) <i>guestfs-internals</i>(1)
  <i>guestfs-security</i>(1). In the source tree, a new <i>docs</i> directory
  contains this documentation.
<div class="Pp"></div>
<i>Architectures and platforms</i>
<div class="Pp"></div>
Libguestfs now supports ARM 64 bit platforms with vGICv3.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
See also <i>guestfs-security</i>(1).
<dl class="Bl-tag">
  <dt class="It-tag">&quot;CVE-2015-5745&quot;</dt>
  <dd class="It-tag">https://bugzilla.redhat.com/1251157
    <div style="height: 1.00em;">&#x00A0;</div>
    This is not a vulnerability in libguestfs, but because we always give a
      virtio-serial port to each guest (since that is how guest-host
      communication happens), an escalation from the appliance to the host qemu
      process is possible. This could affect you if:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">your libguestfs program runs untrusted programs out of the
      guest (using &quot;guestfs_sh&quot; etc), or</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">another exploit was found in (for example) kernel
      filesystem code that allowed a malformed filesystem to take over the
      appliance.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
If you use sVirt to confine qemu, that would thwart some attacks.</div>
<dl class="Bl-tag">
  <dt class="It-tag">Virt-customize permissions on <i>.ssh</i>,
    <i>.ssh/authorized_keys</i></dt>
  <dd class="It-tag">https://bugzilla.redhat.com/1260778.
    <div style="height: 1.00em;">&#x00A0;</div>
    Previously when asked to inject an SSH key into a guest, virt-customize
      (hence virt-builder too) would create the <i>.ssh</i> directory and
      <i>.ssh/authorized_keys</i> file with too broad permissions, allowing
      other users to read. They are now created as 0700 and 0600 respectively,
      which is the same as the <i>ssh-copy-id</i>(1) utility.</dd>
</dl>
<h2 class="Ss" title="Ss" id="API"><a class="selflink" href="#API">API</a></h2>
<i>New APIs</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_get_identifier&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_set_identifier&quot;</dt>
  <dd class="It-tag">Get/set a per-handle identifier. The main effect of this is
      to change trace output from:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 libguestfs: trace: foo
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    to:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 libguestfs: trace: ID: foo
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    making it easier to follow traces in multi-threaded programs, or where a
      program uses multiple handles (especially virt-v2v).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_vfs_minimum_size&quot;</dt>
  <dd class="It-tag">Return the minimum size of a filesystem (when shrunk). This
      supports ext2/3/4, XFS and btrfs, and can support other filesystem types
      in future (Maxim Perevedentsev).</dd>
</dl>
<div class="Pp"></div>
<i>Other API changes</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_disk_create&quot;: add
    &quot;preallocation&quot; =
    &quot;off&quot;/&quot;metadata&quot;/&quot;full&quot;.</dt>
  <dd class="It-tag">For raw, this allows &quot;off&quot; as a synonym for
      &quot;sparse&quot; (making it consistent with qcow2). For qcow2, this
      allows &quot;sparse&quot; as a synonym for &quot;off&quot;.
    <div style="height: 1.00em;">&#x00A0;</div>
    It also adds &quot;full&quot;, which corresponds to fully allocated, but
      uses <i>posix_fallocate</i>(3) for efficiency.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_tar_in&quot;: new &quot;xattrs&quot;,
    &quot;selinux&quot;, &quot;acl&quot; parameters.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_tar_out&quot;: new &quot;xattrs&quot;,
    &quot;selinux&quot;, &quot;acl&quot; parameters.</dt>
  <dd class="It-tag">These extra parameters control whether extended attributes,
      SELinux contexts and/or POSIX ACLs are restored from / saved to
    tarballs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_add_drive&quot;</dt>
  <dd class="It-tag">The existing &quot;username&quot; and &quot;secret&quot;
      parameters can be used to supply authentication for iSCSI (Pino
    Toscano).</dd>
</dl>
<h2 class="Ss" title="Ss" id="Build_changes"><a class="selflink" href="#Build_changes">Build
  changes</a></h2>
The &quot;./configure --enable-valgrind-daemon&quot; option has been removed.
<div class="Pp"></div>
You can no longer build libguestfs on RHEL 5-era (c.2007) machines. See the
  &quot;oldlinux&quot; branch if you need (limited) RHEL 5 support.
<div class="Pp"></div>
Virt-p2v can now be built on RHEL 6-era (c.2010) Linux distros.
<div class="Pp"></div>
OCaml &#x2265; 3.11 (released in 2008) is now required to build from git.
<div class="Pp"></div>
Building the Perl bindings now requires &quot;Module::Build&quot; (instead of
  &quot;ExtUtils::MakeMaker&quot;).
<div class="Pp"></div>
Builds should be faster (especially when incrementally rebuilding), because work
  was done to reduce build times.
<div class="Pp"></div>
Both OCaml and the OCaml findlib module are required if you need to run the
  generator at build time. Previously the build would have failed if findlib was
  not installed.
<div class="Pp"></div>
&quot;make check&quot; tests now run in parallel (within each test directory).
<div class="Pp"></div>
&quot;make install&quot; no longer installs OCaml <i>bindtests.*</i> files
  incorrectly.
<div class="Pp"></div>
&quot;make install&quot; can now be run twice. Previously it would fail on the
  second run.
<div class="Pp"></div>
&quot;make clean&quot; should now remove nearly every file that &quot;make&quot;
  creates.
<div class="Pp"></div>
A new &quot;make installcheck&quot; rule has been added, allowing the installed
  copy of libguestfs to be tested.
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
Some effort was put into minimizing the size of the appliance, which reduces
  temporary disk space and time needed by libguestfs handles.
<div class="Pp"></div>
The appliance now passes the NIC name to dhcpd, fixing hangs when running the
  appliance on some distros (C&#x00E9;dric Bosdonnat).
<div class="Pp"></div>
OCaml &quot;Guestfs.Errno&quot; is now generated (Pino Toscano).
<div class="Pp"></div>
In OCaml tools, common code now handles <i>--debug-gc</i>, <i>--verbose</i> and
  other common options (Roman Kagan, Pino Toscano).
<div class="Pp"></div>
The virt-v2v test harness allows us to boot the test guests at fixed dates in
  the past, ensuring that Windows reactivation doesn't kick in.
<div class="Pp"></div>
There is a new internal API for reading/writing a subprocess via a pipe from
  library code.
<div class="Pp"></div>
Used &quot;deheader&quot; program to remove unused &quot;#include&quot;
  directives.
<div class="Pp"></div>
In OCaml tools, the &quot;Char&quot; and &quot;String&quot; modules now
  implicitly reference the &quot;Common_utils.Char&quot; and
  &quot;Common_utils.String&quot; modules (instead of the ones from stdlib). The
  &quot;Common_utils&quot; modules contain a number of extra char/string utility
  functions, and also hide some unsafe functions in stdlib.
<div class="Pp"></div>
Many more virt-v2v tests will now be run even if you don't have rhsrvany and
  virtio-win installed (Roman Kagan).
<div class="Pp"></div>
The huge <i>configure.ac</i> file has been split into several smaller files
  called <i>m4/guestfs_*.m4</i>.
<div class="Pp"></div>
The old <i>tests/data</i> and <i>tests/guests</i> directories have been moved to
  <i>test-data/</i>. This new top level directory carries all test data which is
  common, large and/or shared between multiple tests.
<div class="Pp"></div>
There is a new top level <i>website/</i> directory containing the public
  http://libguestfs.org website (or most of it).
<div class="Pp"></div>
The fuzz testing of inspection ( <i>tests/fuzz</i>) has been removed.
<div class="Pp"></div>
Virt-p2v now saves the source physical machine dmesg output into the conversion
  server debug directory, making it simpler to debug cases of missing drivers,
  firmware etc.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1294956</dt>
  <dd class="It-tag">set-label returns wrong error message when set the
      ext3/ext4 filesystem label</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1288733</dt>
  <dd class="It-tag">Add a Fedora 23 32-bit base image for virt-builder</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1288201</dt>
  <dd class="It-tag">virt-builder writes temporary files to /tmp</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1285847</dt>
  <dd class="It-tag">virt-resize does not copy logical partitions</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1281578</dt>
  <dd class="It-tag">virt-inspector returns version 6.3 for win10 images (should
      return 10.0)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1281577</dt>
  <dd class="It-tag">virt-inspector --xpath segfault on attribute get</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1280029</dt>
  <dd class="It-tag">libguestfs can run commands with stdin not open (or worse
      still, connected to arbitrary guest-chosen random devices)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1279273</dt>
  <dd class="It-tag">About compression option for qcow2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1278878</dt>
  <dd class="It-tag">guestfish should be able to handle LVM thin layouts</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1278382</dt>
  <dd class="It-tag">DNF python programming error when run from
    virt-builder</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1278371</dt>
  <dd class="It-tag">inspection returns arch=&quot;unknown&quot; for Windows
      guest if file command is not installed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1277274</dt>
  <dd class="It-tag">Document permissions needed for non-admin users to use
      virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1277122</dt>
  <dd class="It-tag">RFE: virt-sparsify: make '--in-place' sparsification safe
      to abort (gracefully or ungracefully)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1277074</dt>
  <dd class="It-tag">Virt-p2v client shouldn't present the vdsm option because
      it's not usable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1276540</dt>
  <dd class="It-tag">virt-v2v fails to convert Windows raw image: error
      &quot;device name is not a partition&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1275806</dt>
  <dd class="It-tag">virt-builder: error: [file] is not a regular file in the
      guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1270011</dt>
  <dd class="It-tag">Simplestreams test fails: virt-builder: error: the value
      for the key 'size' is not an integer</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1267032</dt>
  <dd class="It-tag">guestfish copy-in command behaves oddly/unexpectedly with
      wildcards</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1262983</dt>
  <dd class="It-tag">python: Cannot compile pip module if installed libguestfs
      != pip guestfs version</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1262127</dt>
  <dd class="It-tag">Better diagnostic message when virbr0 doesn't exist</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1261436</dt>
  <dd class="It-tag">No warning shows when convert a win7 guest with AVG
      AntiVirus installed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1260778</dt>
  <dd class="It-tag">virt-builder --ssh-inject doesn't set proper permissions on
      created files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1260689</dt>
  <dd class="It-tag">RFE: V2V to check and warn user to disable group policy and
      anti virus on Windows guests</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1260590</dt>
  <dd class="It-tag">Wrong graphics protocal and video type set for guest after
      convert to rhev 3.6 by virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1258342</dt>
  <dd class="It-tag">extra slashes in vcenter URL confuses virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1257895</dt>
  <dd class="It-tag">[RHEV][V2V] virt-v2v ignores NIC if interface
      source/@network or source/@bridge is an empty string</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1256405</dt>
  <dd class="It-tag">virt-builder created Fedora 22 32bit disk image cannot be
      updated</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1256222</dt>
  <dd class="It-tag">virt-p2v no GUI mode:error opening control connection to
      $ip:22:unexpected &#x2026;rompt</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1251909</dt>
  <dd class="It-tag">Option -oa preallocated -of qcow2 of virt-v2v didn't work
      efficiently</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1250715</dt>
  <dd class="It-tag">v2v: spaces need to be escaped as %20 in paths</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1248678</dt>
  <dd class="It-tag">Close all incoming ports on virt-p2v ISO</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1246882</dt>
  <dd class="It-tag">man virt-customize shows synopsis twice</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1242853</dt>
  <dd class="It-tag">mount-loop failed to setup loop device: No such file or
      directory</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1237136</dt>
  <dd class="It-tag">BUG: unable to handle kernel NULL pointer dereference at
      &lt;addr&gt; in function __blkg_lookup</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1230412</dt>
  <dd class="It-tag">virt-v2v should ignore bogus kernel entries in grub
    config</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1229119</dt>
  <dd class="It-tag">Unrelated info in fstab makes virt-v2v fail with unclear
      error info</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1227609</dt>
  <dd class="It-tag">virt-p2v: Using &quot;Back&quot; button causes output list
      to be repopulated multiple times</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1225789</dt>
  <dd class="It-tag">Wrong video driver is installed for rhel5.11 guest after
      conversion to libvirt</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1204131</dt>
  <dd class="It-tag">RFE: virt-builder creates qcow v3 images, add build option
      for qcow v2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1176801</dt>
  <dd class="It-tag">File /etc/sysconfig/kernel isn't updated when convert XenPV
      guest with regular kernel installed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1174551</dt>
  <dd class="It-tag">&quot;lstatnslist&quot; and &quot;lstatlist&quot; don't
      give an error if the API is used wrongly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1168223</dt>
  <dd class="It-tag">koji spin-livecd cannot build a working live CD</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1165785</dt>
  <dd class="It-tag">mount-loop command fails: mount failed: Unknown error
    -1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1164708</dt>
  <dd class="It-tag">set-label can only set &lt;=127 bytes for btrfs and
      &lt;=126 bytes for ntfs filesystem which not meet the help message. Also
      for ntfs it should give a warning message when the length &gt;128
    bytes</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1020216</dt>
  <dd class="It-tag">libvirt fails to shut down domain: could not destroy
      libvirt domain: Requested operation is not valid: domain is not
    running</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1011907</dt>
  <dd class="It-tag">mount-loop failed to setup loop device: No such file or
      directory</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.30"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.30">RELEASE
  NOTES FOR LIBGUESTFS 1.30</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.28.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>New tools</i>
<div class="Pp"></div>
<i>virt-dib</i>(1) is a secure and safe alternative to the OpenStack
  &quot;diskimage-builder&quot; tool. It is compatible with diskimage-builder
  elements. (Pino Toscano)
<div class="Pp"></div>
<i>virt-get-kernel</i>(1) extracts the kernel and ramdisk from a disk image.
  Previously this functionality was part of <i>virt-builder</i>(1), but the new
  tool is more featureful. (Pino Toscano)
<div class="Pp"></div>
<i>New features in existing tools</i>
<div class="Pp"></div>
<i>virt-v2v</i>(1) <i>-i ova</i> mode can now read a wider range of OVA files,
  and also unpacked files (directories).
<div class="Pp"></div>
virt-v2v now securely passes options to curl, so passwords, cookies and so on
  cannot be seen by users with shell access on the same machine.
<div class="Pp"></div>
virt-v2v has a new <i>--password-file</i> option to allow you to securely pass
  in a password, and to avoid an interactive prompt.
<div class="Pp"></div>
virt-v2v disables Windows autoreboot, making debugging conversion failures on
  Windows easier.
<div class="Pp"></div>
virt-v2v now comes with an extensive external test suite. See
  <i>virt-v2v-test-harness</i>(1).
<div class="Pp"></div>
virt-v2v allows virtio drivers to come from any location (Roman Kagan), and
  drivers can be read directly from the virtio ISO.
<div class="Pp"></div>
virt-v2v supports conversion of Windows &#x2265; 8. Note this is experimental,
  and possibly broken. Use with caution.
<div class="Pp"></div>
virt-v2v can now convert UEFI guests.
<div class="Pp"></div>
<i>virt-p2v</i>(1) adds a network configuration dialog.
<div class="Pp"></div>
virt-p2v now has &quot;p2v.pre&quot;, &quot;p2v.post&quot; and
  &quot;p2v.fail&quot; triggers, allowing arbitrary scripts for preparing the
  host for conversion and tidying up post-conversion.
<div class="Pp"></div>
virt-p2v now uses the more advanced metacity window manager (instead of
  matchbox).
<div class="Pp"></div>
<i>virt-sysprep</i>(1) will remove &quot;/var/spool/mail/username&quot; for
  non-root accounts (Hu Tao).
<div class="Pp"></div>
<i>virt-customize</i>(1), <i>virt-builder</i>(1) and virt-sysprep have the
  following new options:
<dl class="Bl-tag">
  <dt class="It-tag"><i>--commands-from-file</i></dt>
  <dd class="It-tag">allow long lists of commands to be read from a file instead
      of from the command line (Pino Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--copy</i></dt>
  <dd class="It-tag">copy files inside the guest (Maros Zatko)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--copy-in</i></dt>
  <dd class="It-tag">copy host files recursively into the guest (Pino
    Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--move</i></dt>
  <dd class="It-tag">move files inside the guest (Maros Zatko)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--ssh-inject</i></dt>
  <dd class="It-tag">inject SSH keys into a guest (Pino Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--sm-attach</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--sm-credentials</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--sm-register</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--sm-remove</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--sm-unregister</i></dt>
  <dd class="It-tag">register and unregister a guest from subscription-manager
      (Pino Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--touch</i></dt>
  <dd class="It-tag">touch a file in the guest (Pino Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--truncate</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>--truncate-recursive</i></dt>
  <dd class="It-tag">truncate files (Maros Zatko)</dd>
</dl>
<div class="Pp"></div>
Improvements to virt-customize firstboot support. In particular, Windows
  firstboot should work as well as Linux (Roman Kagan).
<div class="Pp"></div>
<i>virt-df</i>(1) can now use PolicyKit, SASL and other authentication methods
  when getting the list of domains from libvirt.
<div class="Pp"></div>
Improvements to guestfish bash completion (Pino Toscano).
<div class="Pp"></div>
Bash completion now completes short options as well as long options (Pino
  Toscano).
<div class="Pp"></div>
<i>guestfish</i>(1) now displays a command synopsis if the number of parameters
  given to a command is wrong (Hu Tao).
<div class="Pp"></div>
virt-builder now supports Red Hat Enterprise Linux versions back to RHEL 3.
<div class="Pp"></div>
virt-builder supports SUSE guests using zypper (C&#x00E9;dric Bosdonnat).
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
The Java bindings now include validated Javadoc, and other improvements (Pino
  Toscano).
<div class="Pp"></div>
Multiple fixes and improvements to the PHP bindings (Pino Toscano).
<div class="Pp"></div>
<i>Inspection</i>
<div class="Pp"></div>
Inspection can now get icons from RHEL 7 and CentOS 7.
<div class="Pp"></div>
<i>/etc/favicon.png</i> is now allowed to be a symbolic link.
<div class="Pp"></div>
For RPM-based guests, inspection now returns RPM Epoch fields.
<div class="Pp"></div>
Debian packages now have separate Epoch and Version fields (Nikos Skalkotos).
<div class="Pp"></div>
OpenBSD detection added, FreeBSD and NetBSD added as separate
  &quot;distros&quot;, and other BSD inspection improvements and bug fixes
  (Nikos Skalkotos).
<div class="Pp"></div>
CoreOS detection added (Nikos Skalkotos).
<div class="Pp"></div>
The package manager in Fedora &#x2265; 22 is &quot;dnf&quot;.
<div class="Pp"></div>
ReactOS guests can be inspected (Maros Zatko).
<div class="Pp"></div>
Add support for UEFI guests.
<div class="Pp"></div>
Inspection now works when kernel modules are gzip or xz compressed (Pino
  Toscano).
<div class="Pp"></div>
Inspection now recognizes ppc64 and ppc64le guests (Maros Zatko).
<div class="Pp"></div>
Inspection lists the installed applications on Archlinux guests (Nikos
  Skalkotos).
<div class="Pp"></div>
<i>Architectures and platforms</i>
<div class="Pp"></div>
PPC64 (POWER7) and PPC64LE (POWER8) architectures are now much better supported,
  and should work out of the box.
<div class="Pp"></div>
For aarch64, we use AAVMF (an open source UEFI implementation based on OVMF) if
  available to run the appliance.
<div class="Pp"></div>
For armv7, we now use the <i>-M virt</i> machine type by default.
<div class="Pp"></div>
There is better support for compiling on non-Linux platforms (Pino Toscano,
  Margaret Lewicka).
<div class="Pp"></div>
Libguestfs should now work on MIPS 32 bit little endian (&quot;mipsel&quot;). I
  have not been able to try 64 bit or big endian.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">CVE-2014-8484</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">CVE-2014-8485</dt>
  <dd class="It-tag">Libguestfs previously ran the <i>strings</i>(1) utility on
      untrusted files. Strings could parse BFD headers in an unsafe way, leading
      to possible arbitrary code execution. Libguestfs now runs strings with a
      flag to ensure it does not try to parse BFD headers. This could have led
      to exploitation of the libguestfs appliance, but since libguestfs further
      constrains the appliance through virtualization, SELinux and other
      techniques, it was unlikely to have caused any privilege escalation on the
      host.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">XPath injection in virt-v2v</dt>
  <dd class="It-tag">One possible XPath injection vulnerability was fixed in
      virt-v2v. This might have allowed a malicious guest which was being
      converted by virt-v2v to construct an arbitrary XPath expression which
      would have been evaluated on the host (by the libxml2 library linked to
      the virt-v2v binary). It is not clear what the effects of this might be.
    <div style="height: 1.00em;">&#x00A0;</div>
    For further information, see upstream commit
      https://github.com/libguestfs/libguestfs/commit/6c6ce85f94c36803fe2db35a98db436bff0c14b0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Denial of service problems when using &quot;qemu-img
    info&quot;</dt>
  <dd class="It-tag">When using the American Fuzzy Lop fuzzer
      (&quot;afl-fuzz&quot;) on the &quot;qemu-img info&quot; command, Richard
      W.M. Jones found that certain files can cause the &quot;qemu-img&quot;
      program to use lots of memory and time (for example 6GB of heap and 14
      seconds of CPU time on a fast Intel processor), and in some cases to
      crash. Since libguestfs may run &quot;qemu-img info&quot; on disk images
      to find out what they contain, this transitively could cause libguestfs to
      hang or consume lots of memory.
    <div style="height: 1.00em;">&#x00A0;</div>
    Libguestfs was modified so that it uses resource limits to limit the space
      and time used by &quot;qemu-img info&quot;, to avoid this problem. If a
      malicious user tries to pass one of these disk images to libguestfs,
      &quot;qemu-img&quot; will crash and the crash is reported back to
      libguestfs callers as an error message.</dd>
</dl>
<h2 class="Ss" title="Ss" id="API"><a class="selflink" href="#API">API</a></h2>
<i>New APIs</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_add_libvirt_dom&quot;</dt>
  <dd class="It-tag">This exposes a previously private API that allows you to
      pass a &quot;virDomainPtr&quot; object directly from libvirt to
      libguestfs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_blockdev_setra&quot;</dt>
  <dd class="It-tag">Adjust readahead parameter for devices. See &quot;blockdev
      --setra&quot; command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_balance&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_balance_cancel&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_balance_pause&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_balance_resume&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_balance_status&quot;</dt>
  <dd class="It-tag">Balance support for Btrfs filesystems (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_filesystem_defragment&quot;</dt>
  <dd class="It-tag">Filesystem defragmentation support for Btrfs filesystems
      (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_image&quot;</dt>
  <dd class="It-tag">Create an image of a Btrfs filesystem (Chen Hanxiao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_assign&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_create&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_destroy&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_limit&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_remove&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_qgroup_show&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_quota_enable&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_quota_rescan&quot;</dt>
  <dd class="It-tag">Quote support for Btrfs filesystems (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_rescue_chunk_recover&quot;</dt>
  <dd class="It-tag">Scan and recover the chunk tree in Btrfs filesystems (Hu
      Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_rescue_super_recover&quot;</dt>
  <dd class="It-tag">Restore superblocks in Btrfs filesystems (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_replace&quot;</dt>
  <dd class="It-tag">Replace a device in a Btrfs filesystem (Cao Jin).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_scrub&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_scrub_cancel&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_scrub_resume&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_scrub_status&quot;</dt>
  <dd class="It-tag">Scrub a Btrfs filesystem (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_subvolume_get_default&quot;</dt>
  <dd class="It-tag">Get the default subvolume of a Btrfs filesystem (Hu
    Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfs_subvolume_show&quot;</dt>
  <dd class="It-tag">List detailed information about the subvolume of a Btrfs
      filesystem (Hu Tao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfstune_enable_extended_inode_refs&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfstune_enable_skinny_metadata_extent_refs&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_btrfstune_seeding&quot;</dt>
  <dd class="It-tag">Various tuning parameters for Btrfs filesystems (Chen
      Hanxiao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_c_pointer&quot;</dt>
  <dd class="It-tag">Return the C pointer to the underlying &quot;guestfs_h
      *&quot;. This allows interworking of libguestfs bindings with bindings
      from other libraries. For further information see
      https://bugzilla.redhat.com/1075164</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_copy_in&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_copy_out&quot;</dt>
  <dd class="It-tag">Flexible APIs for recursively copying directories of files
      between the host and guest filesystem. Previously these were available
      only as guestfish commands, but now any API users can call them (Pino
      Toscano).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_part_get_gpt_guid&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_part_set_gpt_guid&quot;</dt>
  <dd class="It-tag">Get and set the GPT per-partition GUID.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_part_get_mbr_part_type&quot;</dt>
  <dd class="It-tag">Get MBR partition type (Chen Hanxiao).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_set_uuid_random&quot;</dt>
  <dd class="It-tag">Set the UUID of a filesystem to a randomly generated value;
      supported filesystems currently are ext2/3/4, XFS, Btrfs, and swap
      partitions. (Chen Hanxiao).</dd>
</dl>
<div class="Pp"></div>
<i>Other API changes</i>
<div class="Pp"></div>
&quot;guestfs_disk_create&quot; can now use VMDK files as backing files.
<div class="Pp"></div>
&quot;guestfs_btrfs_subvolume_snapshot&quot; takes extra optional parameters
  (all added by Hu Tao):
<dl class="Bl-tag">
  <dt class="It-tag">&quot;ro&quot;</dt>
  <dd class="It-tag">for creating a read-only Btrfs snapshot</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;qgroupid&quot;</dt>
  <dd class="It-tag">for adding the snapshot to a qgroup</dd>
</dl>
<div class="Pp"></div>
&quot;guestfs_btrfs_subvolume_create&quot; can also take the optional
  &quot;qgroupid&quot; parameter (Hu Tao).
<div class="Pp"></div>
&quot;guestfs_set_uuid&quot; can set UUID of swap partitions, Btrfs (Hu Tao,
  Chen Hanxiao).
<div class="Pp"></div>
&quot;guestfs_copy_device_to_file&quot; and
  &quot;guestfs_copy_file_to_file&quot; have a new optional &quot;append&quot;
  parameter, allowing you to append to the output file instead of truncating it.
<div class="Pp"></div>
&quot;guestfs_mkfs&quot; has a new optional &quot;label&quot; parameter to set
  the initial label of the new filesystem (Pino Toscano).
<div class="Pp"></div>
&quot;guestfs_set_label&quot; and &quot;guestfs_set_uuid&quot; now set
  &quot;ENOTSUP&quot; as errno when there is no implemented support for the
  filesystem of the specified mountable (Chen Hanxiao).
<div class="Pp"></div>
Environment variables now let you write &quot;LIBGUESTFS_DEBUG=true&quot;,
  &quot;LIBGUESTFS_DEBUG=0&quot; and so on.
<div class="Pp"></div>
All &quot;guestfs_sfdisk*&quot; APIs have been deprecated. Because
  <i>sfdisk</i>(8) was rewritten, incompatibly, upstream, we don't recommend
  using these APIs in future code. Use the &quot;guestfs_part*&quot; APIs as
  replacements.
<div class="Pp"></div>
APIs such as &quot;guestfs_download&quot; do not truncate <i>/dev/stdout</i> or
  <i>/dev/stderr</i> when writing to them, meaning that if you redirect stdout
  or stderr to a file, the file is no longer truncated.
<h2 class="Ss" title="Ss" id="Build_changes"><a class="selflink" href="#Build_changes">Build
  changes</a></h2>
The daemon no longer uses its own separate copy of gnulib. Instead it shares a
  single copy with the library.
<div class="Pp"></div>
OCaml <i>.annot</i> files are now created, so IDEs and editors like emacs and vi
  can browse OCaml types in the source code.
<div class="Pp"></div>
Various fixes to allow different host/appliance architecture builds (Pino
  Toscano).
<div class="Pp"></div>
Automake is now used directly to build all the OCaml programs, instead of ad hoc
  Makefile rules. One side effect of this is to enable warnings in all the C
  code used by OCaml programs.
<div class="Pp"></div>
&quot;-fno-strict-overflow&quot; is used throughout the build to avoid dubious
  GCC optimizations.
<div class="Pp"></div>
Multiple cleanups to support GCC 5.
<div class="Pp"></div>
OCaml OUnit2 is needed to run some OCaml tests.
<div class="Pp"></div>
Creating a statically linked <i>libguestfs.a</i> should work again.
<div class="Pp"></div>
The <i>src/api-support</i> subdirectory and its scripts are no longer used.
  Instead we store in the <i>generator/actions.ml</i> when the API was added to
  libguestfs.
<h2 class="Ss" title="Ss" id="Internationalization"><a class="selflink" href="#Internationalization">Internationalization</a></h2>
The translation service has changed from Transifex to Zanata.
<div class="Pp"></div>
Many more translations are available now, for both library and tools messages
  and documentation.
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
In all OCaml tools, there are now common &quot;error&quot;, &quot;warning&quot;,
  &quot;info&quot; functions, and common way to set and get the <i>--quiet</i>,
  <i>-x</i> (trace) and <i>-v</i> (verbose) flags, and colour highlighting used
  consistently.
<div class="Pp"></div>
&quot;COMPILE_REGEXP&quot; macros are used to simplify PCRE constructors and
  destructors.
<div class="Pp"></div>
In the generator, &quot;Pointer&quot; arguments have finally been implemented.
<div class="Pp"></div>
Internal identifiers no longer use double and triple underscores (eg.
  &quot;guestfs___program_name&quot;). These identifiers are invalid for C99 and
  C++ programs, although compilers would accept them.
<div class="Pp"></div>
The daemon no longer parses &quot;guestfs_*&quot; options from
  <i>/proc/cmdline</i>. Instead it only takes ordinary command line options. The
  appliance init script turns <i>/proc/cmdline</i> into daemon command line
  options.
<div class="Pp"></div>
The tests can now run the daemon as a &quot;captive process&quot;, allowing it
  to be run directly on the host. The main advantage of this is we can run
  valgrind directly on the daemon during testing.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1239053</dt>
  <dd class="It-tag">virt-v2v error reporting when grub.conf cannot be parsed by
      Augeas</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1238053</dt>
  <dd class="It-tag">v2v:Duplicate disk target set when convert guest with cdrom
      attached</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1237869</dt>
  <dd class="It-tag">Virtio drivers are not installed for windows 2008 guests by
      virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1234351</dt>
  <dd class="It-tag">virt-v2v Support for Fedora virtio-win drivers</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1232192</dt>
  <dd class="It-tag">Virt-v2v gives an error on a blank disk: part_get_parttype:
      unknown signature, of the output: BYT;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1229385</dt>
  <dd class="It-tag">virt-p2v in kernel command line mode should power off the
      machine after conversion</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1229340</dt>
  <dd class="It-tag">virt-p2v no GUI mode appends \n to the final command line
      parameter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1229305</dt>
  <dd class="It-tag">virt-sysprep at cleanup deletes /var/spool/at/.SEQ which
      results in failing at</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1226794</dt>
  <dd class="It-tag">&quot;Doing conversion&#x2026;&#x2026;&quot; still shows
      after cancel the conversion from virt-p2v client</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1215042</dt>
  <dd class="It-tag">Memory leak in virNetSocketNewConnectUNIX</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1213324</dt>
  <dd class="It-tag">virt-v2v: warning: unknown guest operating system: windows
      windows 6.3 when converting win8,win8.1,win2012,win2012R2 to rhev</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1213247</dt>
  <dd class="It-tag">virt tools should print the same format of version
    string</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1212808</dt>
  <dd class="It-tag">RFE: virt-builder --touch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1212807</dt>
  <dd class="It-tag">virt-builder --selinux-relabel flag fails on
      cross-architecture builds</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1212680</dt>
  <dd class="It-tag">RFE: virt-inspector xpath query should output a neat format
      of the query element</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1212152</dt>
  <dd class="It-tag">virt-builder firstboot-command fails: File name too
    long</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1211996</dt>
  <dd class="It-tag">virt-inspector gives incorrect arch (ppc64) for ppc64le
      guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1203817</dt>
  <dd class="It-tag">RFE: virt-customize --move and --copy</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1201526</dt>
  <dd class="It-tag">index-parser can't parse systemd mount files properly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1196101</dt>
  <dd class="It-tag">virt-builder --upload option doesn't work to a FAT
      partition</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1196100</dt>
  <dd class="It-tag">virt-builder -x option on its own does not enable
    tracing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1195204</dt>
  <dd class="It-tag">`virt-builder` should create $HOME/.cache directory if it
      already doesn't exist</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1193237</dt>
  <dd class="It-tag">Virt-builder fingerprint is required even when no check
      desired</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1189284</dt>
  <dd class="It-tag">virt-resize should preserve GPT partition UUIDs, else EFI
      guests become unbootable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1188866</dt>
  <dd class="It-tag">Performance regression in virt-builder when uncompressing
      image</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1186800</dt>
  <dd class="It-tag">virt-v2v should support gzip format ova as input</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1185561</dt>
  <dd class="It-tag">virt-sparsify should ignore read-only LVs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1182463</dt>
  <dd class="It-tag">&quot;mknod-b&quot;, &quot;mknod-c&quot;, and
      &quot;mkfifo&quot; do not strip non-permissions bits from
    &quot;mode&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1176493</dt>
  <dd class="It-tag">virt-v2v ignores sound device when convert xen guest to
      local kvm</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1175676</dt>
  <dd class="It-tag">Typo error in 'help ping-daemon'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1175196</dt>
  <dd class="It-tag">&quot;parse-environment&quot; and
      &quot;parse-environment-list&quot; fail to parse &quot;LIBGUESTFS_TRACE =
      0&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1175035</dt>
  <dd class="It-tag">&quot;is-blockdev&quot;/&quot;is-blockdev-opts&quot; fail
      to detect &quot;/dev/sda&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1174280</dt>
  <dd class="It-tag">RFE: Allow v2v conversion of Oracle Linux 5.8 VMware
    VM</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1174200</dt>
  <dd class="It-tag">New virt-v2v failure: CURL: Error opening file: NSS: client
      certificate not found (nickname not specified): Invalid argument</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1174123</dt>
  <dd class="It-tag">Graphics password disappear after conversion of
    virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1174073</dt>
  <dd class="It-tag">The listen address for vnc is changed after conversion by
      virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1171666</dt>
  <dd class="It-tag">inspection thinks EFI partition is a separate operating
      system</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1171130</dt>
  <dd class="It-tag">virt-v2v conversion of RHEL 3 guest fails with: All of your
      loopback devices are in use</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1170685</dt>
  <dd class="It-tag">Conversion of RHEL 4 guest fails: rpm -ql
      1:kernel-utils-2.4-23.el4: virt-v2v: error: libguestfs error:
      command_lines:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1170073</dt>
  <dd class="It-tag">virt-v2v picks debug kernels over non-debug kernels when
      versions are equal</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1169045</dt>
  <dd class="It-tag">virt-sparsify: libguestfs error: qemu-img info:
      'virtual-size' is not representable as a 64 bit integer</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1169015</dt>
  <dd class="It-tag">virt-resize --expand fails on ubuntu-14.04.img image
      (regression)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1168144</dt>
  <dd class="It-tag">warning: fstrim: fstrim: /sysroot/: FITRIM ioctl failed:
      Operation not supported (ignored) when convert win2003 guest from xen
      server</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1167921</dt>
  <dd class="It-tag">p2v: No Network Connection dialog</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1167774</dt>
  <dd class="It-tag">virt-p2v fails with
      error:&quot;nbd.<i>c:nbd_receive_negotiate()</i>:L501: read
    failed&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1167623</dt>
  <dd class="It-tag">Remove &quot;If reporting bugs, run virt-v2v with debugging
      enabled ..&quot; message when running virt-p2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1167601</dt>
  <dd class="It-tag">&quot;Conversion was successful&quot; pop out even virt-p2v
      fails</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1167302</dt>
  <dd class="It-tag">virt-v2v: warning: ova hard disk has no parent controller
      when convert from a ova file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1166618</dt>
  <dd class="It-tag">virt-resize should give out the detail warning info to let
      customers know what's going wrong</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1165975</dt>
  <dd class="It-tag">File &quot;/boot/grub2/device.map&quot; showing is not
      right after converting a rhel7 guest from esx server</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1165785</dt>
  <dd class="It-tag">mount-loop command fails: mount failed: Unknown error
    -1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1165569</dt>
  <dd class="It-tag">Disable &quot;cancel conversion&quot; button after virt-p2v
      conversion finished</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1165564</dt>
  <dd class="It-tag">Provide Reboot/Shutdown button after virt-p2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1164853</dt>
  <dd class="It-tag">Booting in qemu found no volume groups and failed checking
      the filesystems</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1164732</dt>
  <dd class="It-tag">The description of 'help append' is not accurately, it add
      the kernel options to libguestfs appliance not the guest kernel</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1164697</dt>
  <dd class="It-tag">typo errors in man pages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1164619</dt>
  <dd class="It-tag">Inspect-get-icon failed on RHEL7 guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1162966</dt>
  <dd class="It-tag">xfs should also give a warning out to let customer know the
      limitation</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1161575</dt>
  <dd class="It-tag">Failed to import guest with &quot;rtl8139&quot; nic to
      openstack server after converted by v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1159651</dt>
  <dd class="It-tag">virt-sysprep firstboot script is not deleted if it reboot a
      RHEL 7 guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1159258</dt>
  <dd class="It-tag">esx win2008 32 bit guest fail to load after conversion
      because the firmware isn't ACPI compatible</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1159016</dt>
  <dd class="It-tag">libvirt backend does not set RBD password</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1158526</dt>
  <dd class="It-tag">Use password file instead of process interaction</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1157679</dt>
  <dd class="It-tag">virt-p2v-make-disk should add firmwares</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1156449</dt>
  <dd class="It-tag">libguestfs FTBFS on f21 ppc64le</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1156301</dt>
  <dd class="It-tag">virt-inspector support adding a remote disk, but in its man
      page -a URI / --add URI is missing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1155121</dt>
  <dd class="It-tag">Virt-v2v will fail when using relative path for -i ova</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1153844</dt>
  <dd class="It-tag">Redundancy whitespace at the end of directory name when use
      &lt;TAB&gt; to complete the directory name in guestfish with a xfs
      filesystem in guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1153589</dt>
  <dd class="It-tag">virt-v2v will hang when converting esx guest before disk
      copy phase</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1152998</dt>
  <dd class="It-tag">virt-v2v / qemu-img fails on ova image</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151910</dt>
  <dd class="It-tag">virt-ls should remove '/' in the output when specify the
      directory name as /etc/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151900</dt>
  <dd class="It-tag">Should also add a field for directory files when run
      virt-ls with --csv option</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151033</dt>
  <dd class="It-tag">virt-v2v conversions from VMware vCenter server run
    slowly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1146832</dt>
  <dd class="It-tag">virt-v2v fail to convert guest with disk type volume</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1146007</dt>
  <dd class="It-tag">Input/output error during conversion of esx guest.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1135585</dt>
  <dd class="It-tag">[RFE] virt-builder should support copying in a
      directory/list of files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1089566</dt>
  <dd class="It-tag">[abrt] livecd-tools: kickstart.py:276:apply:IOError: [Errno
      2] No such file or directory:
      '/run/media/jones/2tp001data/createlive/temp/imgcreate-_dX8Us/install_root/etc/rpm/macros.imgcreate'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1079625</dt>
  <dd class="It-tag">virt-sparsify fails if a btrfs filesystem contains readonly
      snapshots</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1075164</dt>
  <dd class="It-tag">RFE: allow passing in a pre-opened libvirt connection from
      python</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/912499</dt>
  <dd class="It-tag">Security context on image file gets reset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/889082</dt>
  <dd class="It-tag">[RFE] virt-v2v should check whether guest with same name
      exist on target first then transfer the disk</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/855059</dt>
  <dd class="It-tag">RFE: virt-p2v: display more information about network
      devices such as topology, bonding, etc.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/823758</dt>
  <dd class="It-tag">p2v client should have largest number restrictions for CPU
      and Memory settings</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/709327</dt>
  <dd class="It-tag">hivex cannot read registry hives from ReactOS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/709326</dt>
  <dd class="It-tag">virt-inspector cannot detect ReactOS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/119673</dt>
  <dd class="It-tag">installation via NFS doesn't seem to work</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.28"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.28">RELEASE
  NOTES FOR LIBGUESTFS 1.28</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.26.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>Tools</i>
<div class="Pp"></div>
<i>virt-v2v</i>(1) and <i>virt-p2v</i>(1) are tools for converting from foreign
  hypervisors (such as VMware or Xen) or physical machines, to KVM. These tools
  were previously a separate project. The code for both tools has been
  integrated into the libguestfs tree. As part of the refactoring, virt-p2v has
  been rewritten (from Ruby, now C), and virt-v2v now uses several modern
  features of qemu which make it run many times faster than before.
  <i>virt-v2v</i>(1) can import from: VMware vCenter, VMware OVA files, local
  disk files, libvirt, RHEL 5 Xen. It can output to: oVirt or Red Hat Enterprise
  Virtualization (RHEV-M), OpenStack Glance, libvirt, qemu, local disk files.
<div class="Pp"></div>
<i>virt-log</i>(1) is a new tool for listing log files from guests. It supports
  a variety of guests including Linux traditional, Linux using journal, and
  Windows event log.
<div class="Pp"></div>
<i>virt-builder</i>(1) has a new &quot;--machine-readable&quot; option to make
  it simpler to consume virt-builder from other programs.
<div class="Pp"></div>
New <i>virt-builder</i>(1) and <i>virt-customize</i>(1) <i>--chmod</i> option.
<div class="Pp"></div>
<i>virt-sysprep</i>(1) will now remove: systemd journals, anaconda logs, lightdm
  logs, debian-installer files, apt logs, exim logs, ConsoleKit logs, firewalld
  logs, grubby logs, proftpd logs, libvirt/libxml logs, and several other log
  files. The virt-sysprep &quot;user-account&quot; operation is now able to
  remove or keep particular user accounts. (Pino Toscano).
<div class="Pp"></div>
New <i>guestmount</i>(1) <i>--fd</i> option, allowing you to run guestmount
  captive under another process.
<div class="Pp"></div>
<i>virt-sparsify</i>(1) has a new <i>--tmp</i> option allowing you to precisely
  control where temporary files are stored.
<div class="Pp"></div>
<i>virt-sparsify</i>(1) can now write to a block device.
<div class="Pp"></div>
<i>virt-customize</i>(1) and <i>virt-sysprep</i>(1) now support adding firstboot
  scripts to Windows guests.
<div class="Pp"></div>
<i>virt-cat</i>(1), <i>virt-edit</i>(1), <i>virt-ls</i>(1) now support the
  <i>-m</i> option, allowing you to override automatic inspection of guests and
  instead specify where to mount partitions (Pino Toscano).
<div class="Pp"></div>
The virt tools now have coloured output: green for OK, red for errors, blue for
  warnings.
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
You can build a Python distribution using &quot;make -C python sdist&quot;
<div class="Pp"></div>
Ruby bindings have switched from &quot;Test::Unit&quot; to &quot;MiniTest&quot;.
<div class="Pp"></div>
The Java bindings are now compatible with OpenJDK 8 (Pino Toscano).
<div class="Pp"></div>
<i>Inspection</i>
<div class="Pp"></div>
Oracle Linux is returned as &quot;oraclelinux&quot; (Nikos Skalkotos).
<div class="Pp"></div>
Linux guests which do not have <i>/etc/fstab</i> can now be handled (Pino
  Toscano).
<div class="Pp"></div>
Minix is returned as &quot;minix&quot; (Pino Toscano).
<div class="Pp"></div>
<i>Architectures</i>
<div class="Pp"></div>
Aarch64 (64 bit ARM) support has been added.
<div class="Pp"></div>
Inspection and the &quot;guestfs_file_architecture&quot; call can now recognize
  arm (32 bit) and aarch64 guests.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">CVE-2014-0191 Network usage and entity resolution in XML
    parsing</dt>
  <dd class="It-tag">Libguestfs previously used unsafe libxml2 APIs for parsing
      libvirt XML. These APIs defaulted to allowing network connections to be
      made when certain XML documents were presented. Using a malformed XML
      document it was also possible to exhaust all CPU, memory or file
      descriptors on the machine.
    <div style="height: 1.00em;">&#x00A0;</div>
    Since the libvirt XML comes from a trusted source (the libvirt daemon) it is
      not thought that this could have been exploitable.
    <div style="height: 1.00em;">&#x00A0;</div>
    This was fixed in libguestfs &#x2265; 1.27.9 and the fix was backported to
      stable versions &#x2265; 1.26.2, &#x2265; 1.24.9, &#x2265; 1.22.10 and
      &#x2265; 1.20.13. (Thanks: Dan Berrange, Pino Toscano).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Shellshock (bash CVE-2014-6271)</dt>
  <dd class="It-tag">This bash bug indirectly affects libguestfs. For more
      information see:
      https://www.redhat.com/archives/libguestfs/2014-September/msg00252.html</dd>
</dl>
<h2 class="Ss" title="Ss" id="API"><a class="selflink" href="#API">API</a></h2>
<i>New APIs</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_clear_backend_setting&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_get_backend_setting&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_set_backend_setting&quot;</dt>
  <dd class="It-tag">Use these APIs to set individual backend settings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_cpio_out&quot;</dt>
  <dd class="It-tag">Convert a directory within the disk image to cpio
    format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_journal_get_realtime_usec&quot;</dt>
  <dd class="It-tag">Fetch precise journal times, see
      <i>sd_journal_get_realtime_usec</i>(3).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_lstatns&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_lstatnslist&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_statns&quot;</dt>
  <dd class="It-tag">Enhanced versions of &quot;guestfs_lstat&quot;,
      &quot;guestfs_lstatlist&quot;, &quot;guestfs_stat&quot; which return
      nanosecond timestamps.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Build_changes"><a class="selflink" href="#Build_changes">Build
  changes</a></h2>
Libguestfs can now be built with qemu 2.x.
<div class="Pp"></div>
Add support for packaging the appliance on Mageia (Joseph Wang, Thierry
  Vignaud).
<div class="Pp"></div>
Augeas is now a required dependency.
<div class="Pp"></div>
Flex and bison are now required dependencies.
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
User-Mode Linux (UML) is no longer a supported backend (although still
  available). It will be supported again once someone steps in and fixes various
  regressions and brokenness in the UML (Linux) kernel.
<div class="Pp"></div>
You can now connect gdb to qemu by specifying
  &quot;LIBGUESTFS_BACKEND_SETTINGS=gdb&quot;
<div class="Pp"></div>
Serial BIOS (sgabios) is now used by the libvirt backend (on x86 only) so that
  we see early BIOS messages.
<div class="Pp"></div>
For the OCaml virt tools, exceptions are now handled and printed by a common
  function.
<div class="Pp"></div>
A GCC warning about large stack frames is now enabled by default. Several places
  that used large arrays and structures on the stack have been fixed.
<div class="Pp"></div>
There is now a test for booting the appliance repeatedly. Useful for finding
  kernel leaks. See: <i>tests/qemu/qemu-boot.c</i>
<div class="Pp"></div>
There is a test for testing the speed of various qemu features such as
  virtio-serial uploads and block device writes. See:
  <i>tests/qemu/qemu-speed-test.c</i>
<div class="Pp"></div>
GCC warnings are now enabled for OCaml-C bindings in the OCaml virt tools.
<div class="Pp"></div>
The code for editing files used by <i>virt-edit</i>(1), <i>guestfish</i>(1)
  &quot;edit&quot; command, <i>virt-customize</i>(1) <i>--edit</i> option and
  more is now shared between all these utilities (thanks Pino Toscano).
<div class="Pp"></div>
The FUSE tests were rewritten in C to ensure finer control over how system calls
  are tested.
<div class="Pp"></div>
The <i>update-bugs.sh</i> script has been fixed so it should no longer create an
  empty &quot;BUGS&quot; file if the Bugzilla server is unavailable.
<div class="Pp"></div>
The <i>virt-resize</i>(1) tests now use a stochastic method to ensure much
  deeper and broader testing.
<div class="Pp"></div>
When the network is enabled, the appliance now uses DHCP to acquire an IP
  address.
<div class="Pp"></div>
If libvirt is being used then the appliance will connect to &quot;virbr0&quot;
  (can be overridden by setting
  &quot;LIBGUESTFS_BACKEND_SETTINGS=network_bridge=&lt;some_bridge&gt;&quot;).
  This enables full-featured network connections, with working ICMP, ping and so
  on.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1153515</dt>
  <dd class="It-tag">empty (but set) LIBGUESTFS_BACKEND prints libguestfs:
      error: invalid backend:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151766</dt>
  <dd class="It-tag">libguestfs-bash-completion package contains file
      /usr/share/bash-completion/completions/virt-log, but no <i>_virt_log()</i>
      function in that file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151738</dt>
  <dd class="It-tag">typo error in man page of virt-edit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1151033</dt>
  <dd class="It-tag">virt-v2v conversions from VMware vCenter server run
    slowly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1150880</dt>
  <dd class="It-tag">virt-v2v: warning: display &lt;graphics type='sdl'&gt; was
      ignored when converting rhel5 guest with sdl graphics</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1150867</dt>
  <dd class="It-tag">'copy-file-to-file /src /dest' create file /dest even if
      command 'copy-file-to-file /src /dest' failed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1150815</dt>
  <dd class="It-tag">Can not find &quot;RECURSIVE LONG LISTING&quot; in 'man
      virt-diff'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1150701</dt>
  <dd class="It-tag">virt-v2v does not fstrim data disks and non-mounted
      filesystems</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1150475</dt>
  <dd class="It-tag">Exporting 2+ disk guest to RHEV, only one disk shows after
      import</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1148355</dt>
  <dd class="It-tag">virt-filesystems: incorrect LVM vg name when listing Fedora
      21 Alpha Atomic image filesystems</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1148072</dt>
  <dd class="It-tag">Option missing --no-selinux-relabel</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1148012</dt>
  <dd class="It-tag">RFE: Allow qemu-bridge-helper to be used to implement
      guestfs_set_network</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1146815</dt>
  <dd class="It-tag">virt-v2v prints warning: /files/etc/fstab/8/spec references
      unknown device &quot;cdrom&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1146275</dt>
  <dd class="It-tag">regression setting root password with
      virt-builder/virt-customize</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1146017</dt>
  <dd class="It-tag">virt-v2v -v -x during windows guest conversion will hang at
      hivex: hivex_open: used block id &#x2026;&#x2026;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1145995</dt>
  <dd class="It-tag">Improve the error info when converting windows guest with
      unclean file system</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1145916</dt>
  <dd class="It-tag">virt-v2v fails to convert win7 guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1144891</dt>
  <dd class="It-tag">RFE: stat calls do not return nanosecond timestamps</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1144766</dt>
  <dd class="It-tag"><i>futimens()</i> is a no-op via guestmount</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1144201</dt>
  <dd class="It-tag">guestfish can not restore terminal's output colour when
      exit guestfish, if the terminal's background colour is black then it will
      make a inconvenient</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1143949</dt>
  <dd class="It-tag">virt-customize option '--password-crypto' do not work</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1143887</dt>
  <dd class="It-tag">Warning shows when converting guests to rhev:chown:
      changing ownership of &#x2018;/tmp/v2v.u48xag/*.ovf&#x2019;: Invalid
      argument</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1143883</dt>
  <dd class="It-tag">warning shows when converting rhel7 guest:virt-v2v:could
      not update grub2 console: aug_get: no matching node (ignored)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1143866</dt>
  <dd class="It-tag">virt-v2v fails with error: cannot open Packages index using
      db5</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1142416</dt>
  <dd class="It-tag">part-get-name give 'libguestfs: error: part_get_name:
      parted does not support the machine output (-m)' error message when run
      'part-get-name /dev/sda 1'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1142186</dt>
  <dd class="It-tag">virt-sysprep option '--mount-options' don't work well</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1142158</dt>
  <dd class="It-tag">Illegal command 'part-get-name /dev/sda1 1' cause
      libguestfs appliance crashed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1142004</dt>
  <dd class="It-tag">virt-v2v prints warning:WARNING:/files/boot/grub/device.map
      references unknown device &quot;xvda&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141723</dt>
  <dd class="It-tag">virt-v2v: error: disk sda has no defined format shows when
      converting xen hvm guest</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141680</dt>
  <dd class="It-tag">[RFE] virt-v2 should support convert a domain with using
      domain's UUID instead of domain name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141631</dt>
  <dd class="It-tag">[RFE] virt-v2 should support convert a guest to a dir-pool
      with using pool's uuid</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141157</dt>
  <dd class="It-tag">virt-sysprep option '--user-accounts' don't work well</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141145</dt>
  <dd class="It-tag">virt-v2v fails to convert xen pv guests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1141113</dt>
  <dd class="It-tag">virt-v2v fails to convert esx guests</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1140946</dt>
  <dd class="It-tag">qemu-img shows error message for backing file twice</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1140894</dt>
  <dd class="It-tag">No error messages output if append '--format qcow2' after
      '-a guest.img', guest.img is a raw format image file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1140547</dt>
  <dd class="It-tag">virt-builder option '--format' don't work well</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1140156</dt>
  <dd class="It-tag">RFE: Export to RHEV data domain</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1140050</dt>
  <dd class="It-tag">No error shows when multiple conflicting options used with
      virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1139973</dt>
  <dd class="It-tag">Improve the error info when converting xen guest with no
      passwordless SSH access configured</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1139543</dt>
  <dd class="It-tag">Improve the error info when converting guest with no space
      left</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1138586</dt>
  <dd class="It-tag">No error shows when converting running guest with
    virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1138184</dt>
  <dd class="It-tag">virt-v2v will fail when converting guests with
      initramfs-*kdump.img under /boot</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1138182</dt>
  <dd class="It-tag">xen guest will be kernel panic after converted by
    virt-v2v</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1130189</dt>
  <dd class="It-tag">Annoying message about permissions of /dev/kvm</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1123007</dt>
  <dd class="It-tag">libguestfs 'direct' backend should close file descriptors
      before exec-ing qemu to avoid leaking !O_CLOEXEC fds</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1122557</dt>
  <dd class="It-tag">virt-sparsify overwrites block devices if used as output
      files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1113156</dt>
  <dd class="It-tag">Empty fstab breaks libguestfs inspection</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1111662</dt>
  <dd class="It-tag">Guestfs.Error(&quot;vgchange_uuid_all: Volume group has
      active logical volumes&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1109174</dt>
  <dd class="It-tag">virt-win-reg manual page is corrupted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1106548</dt>
  <dd class="It-tag">root gets an error accessing to a non-root dir on a
      snapshot guestmount VMDK img</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1103877</dt>
  <dd class="It-tag">These APIs also need to add to `guestfish -h` command
    list</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1102448</dt>
  <dd class="It-tag">mageia package list is incorrect</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1102447</dt>
  <dd class="It-tag">libguestfs 1.27.13 does not build due to libxml library
      order</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1100498</dt>
  <dd class="It-tag">RFE: non-polling mechanism to detect guestmount --no-fork
      readiness</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1099490</dt>
  <dd class="It-tag">scrub-file can't handle link file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1099284</dt>
  <dd class="It-tag">typo errors in man pages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1098718</dt>
  <dd class="It-tag">RFE: virt-builder aliases</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1096465</dt>
  <dd class="It-tag">virt-builder &quot;proxy=off&quot; setting doesn't turn off
      the proxy for downloads</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1094746</dt>
  <dd class="It-tag">virt-sparsify man failes to mention what happens to
      snapshots within a qcow2 image (they are discarded)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1092753</dt>
  <dd class="It-tag">virt-builder: If several repos contain the same os-version
      images, then they are duplicated in -l output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1091803</dt>
  <dd class="It-tag">tar-in-opts execute failed that cause libguestfs appliance
      crashed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1088424</dt>
  <dd class="It-tag">virt-resize: libguestfs error: part_set_name: parted:
      /dev/sdb: Error during translation: Invalid or incomplete multibyte or
      wide character</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1088262</dt>
  <dd class="It-tag">virt-builder cannot write to a block device</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1085029</dt>
  <dd class="It-tag">Ruby tests fail with latest Ruby</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1079210</dt>
  <dd class="It-tag">virt-sparsify --in-place cannot sparsify as much as it
      should</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1079182</dt>
  <dd class="It-tag">virt-df cannot report used disk space of windows guest when
      updated to 6.5</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1077817</dt>
  <dd class="It-tag">virt-builder error: &quot;syntax error at line 3: syntax
      error&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1056290</dt>
  <dd class="It-tag">virt-sparsify overwrites block devices if used as output
      files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/812970</dt>
  <dd class="It-tag">virt-rescue cannot set &#x2265;&lt;rescue&gt; prompt, on
      Ubuntu 12.04</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.26"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.26">RELEASE
  NOTES FOR LIBGUESTFS 1.26</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.24.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>Tools</i>
<div class="Pp"></div>
<i>virt-customize</i>(1) is a new tool for customizing virtual machine disk
  images. It lets you install packages, edit configuration files, run scripts,
  set passwords and so on. <i>virt-builder</i>(1) and <i>virt-sysprep</i>(1) use
  virt-customize, and command line options across all these tools are now
  identical.
<div class="Pp"></div>
<i>virt-diff</i>(1) is a new tool for showing the differences between the
  filesystems of two virtual machines. It is mainly useful when showing what
  files have been changed between snapshots.
<div class="Pp"></div>
<i>virt-builder</i>(1) has been greatly enhanced. There are many more ways to
  customize the virtual machine. It can pull templates from multiple
  repositories. A parallelized internal xzcat implementation speeds up template
  decompression. Virt-builder uses an optimizing planner to choose the fastest
  way to build the VM. It is now easier to use virt-builder from other programs.
  Internationalization support has been added to metadata. More efficient
  SELinux relabelling of files. Can build guests for multiple architectures.
  Error messages have been improved. (Pino Toscano)
<div class="Pp"></div>
<i>virt-sparsify</i>(1) has a new <i>--in-place</i> option. This sparsifies an
  image in place (without copying it) and is also much faster. (Lots of help
  provided by Paolo Bonzini)
<div class="Pp"></div>
<i>virt-sysprep</i>(1) can delete and scrub files under user control. You can
  lock user accounts or set random passwords on accounts. Can remove more log
  files. Can unsubscribe a guest from Red Hat Subscription Manager. New flexible
  way to enable and disable operations. (Wanlong Gao, Pino Toscano)
<div class="Pp"></div>
<i>virt-win-reg</i>(1) allows you to use URIs to specify remote disk images.
<div class="Pp"></div>
<i>virt-format</i>(1) can now pass the extra space that it recovers back to the
  host.
<div class="Pp"></div>
<i>guestfish</i>(1) has additional environment variables to give fine control
  over the &quot;&gt;&lt;fs&gt;&quot; prompt. Guestfish reads its (rarely used)
  configuration file in a different order now so that local settings override
  global settings. (Pino Toscano)
<div class="Pp"></div>
<i>virt-make-fs</i>(1) was rewritten in C, but is unchanged in terms of
  functionality and command line usage.
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
The OCaml bindings have a new &quot;Guestfs.Errno&quot; module, used to check
  the error number returned by &quot;Guestfs.last_errno&quot;.
<div class="Pp"></div>
PHP tests now work. (Pino Toscano)
<div class="Pp"></div>
<i>Inspection</i>
<div class="Pp"></div>
Inspection can recognize Debian live images.
<div class="Pp"></div>
<i>Architectures</i>
<div class="Pp"></div>
ARMv7 (32 bit) now supports KVM acceleration.
<div class="Pp"></div>
Aarch64 (ARM 64 bit) is supported, but the appliance part does not work yet.
<div class="Pp"></div>
PPC64 support has been fixed and enhanced.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">Denial of service when inspecting disk images with corrupt
    btrfs volumes</dt>
  <dd class="It-tag">It was possible to crash libguestfs (and programs that use
      libguestfs as a library) by presenting a disk image containing a corrupt
      btrfs volume.
    <div style="height: 1.00em;">&#x00A0;</div>
    This was caused by a NULL pointer dereference causing a denial of service,
      and is not thought to be exploitable any further.
    <div style="height: 1.00em;">&#x00A0;</div>
    See commit d70ceb4cbea165c960710576efac5a5716055486 for the fix. This fix is
      included in libguestfs stable branches &#x2265;&#x00A0;1.26.0,
      &#x2265;&#x00A0;1.24.6 and &#x2265;&#x00A0;1.22.8, and also in RHEL
      &#x2265;&#x00A0;7.0. Earlier versions of libguestfs are not
    vulnerable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Better generation of random root passwords and random
    seeds</dt>
  <dd class="It-tag">When generating random root passwords and random seeds, two
      bugs were fixed which are possibly security related. Firstly we no longer
      read excessive bytes from <i>/dev/urandom</i> (most of which were just
      thrown away). Secondly we changed the code to avoid modulo bias. These
      issues were not thought to be exploitable. (Both changes suggested by
      Edwin T&#x00F6;r&#x00F6;k)</dd>
</dl>
<h2 class="Ss" title="Ss" id="API"><a class="selflink" href="#API">API</a></h2>
GUID parameters are now validated when they are passed to API calls, whereas
  previously you could have passed any string. (Pino Toscano)
<div class="Pp"></div>
<i>New APIs</i>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_add_drive_opts&quot;: new &quot;discard&quot;
    parameter</dt>
  <dd class="It-tag">The new &quot;discard&quot; parameter allows fine-grained
      control over discard/trim support for a particular disk. This allows the
      host file to become more sparse (or thin-provisioned) when you delete
      files or issue the &quot;guestfs_fstrim&quot; API call.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_add_domain&quot;: new parameters:
    &quot;cachemode&quot;, &quot;discard&quot;</dt>
  <dd class="It-tag">These parameters are passed through when adding the
      domain's disks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_blkdiscard&quot;</dt>
  <dd class="It-tag">Discard all blocks on a guestfs device. Combined with the
      &quot;discard&quot; parameter above, this makes the host file sparse.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_blkdiscardzeroes&quot;</dt>
  <dd class="It-tag">Test if discarded blocks read back as zeroes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_compare_*&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_copy_*&quot;</dt>
  <dd class="It-tag">For each struct returned through the API, libguestfs now
      generates &quot;guestfs_compare_*&quot; and &quot;guestfs_copy_*&quot;
      functions to allow you to compare and copy structs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_copy_attributes&quot;</dt>
  <dd class="It-tag">Copy attributes (like permissions, xattrs, ownership) from
      one file to another. (Pino Toscano)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_disk_create&quot;</dt>
  <dd class="It-tag">A flexible API for creating empty disk images from scratch.
      This avoids the need to call out to external programs like
      <i>qemu-img</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_get_backend_settings&quot;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_set_backend_settings&quot;</dt>
  <dd class="It-tag">Per-backend settings (can also be set via the environment
      variable &quot;LIBGUESTFS_BACKEND_SETTINGS&quot;). The main use for this
      is forcing TCG mode in the qemu-based backends, for example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 export LIBGUESTFS_BACKEND=direct
 export LIBGUESTFS_BACKEND_SETTINGS=force_tcg
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;guestfs_part_get_name&quot;</dt>
  <dd class="It-tag">Get the label or name of a partition (for GPT disk
    images).</dd>
</dl>
<h2 class="Ss" title="Ss" id="Build_changes"><a class="selflink" href="#Build_changes">Build
  changes</a></h2>
The following extra packages are required to build libguestfs 1.26:
<dl class="Bl-tag">
  <dt class="It-tag">supermin &#x2265; 5</dt>
  <dd class="It-tag">Supermin version 5 is required to build this version of
      libguestfs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">flex, bison</dt>
  <dd class="It-tag">Virt-builder now uses a real parser to parse its metadata
      file, so these tools are required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">xz</dt>
  <dd class="It-tag">This is now a required build dependency, where previously
      it was (in theory) optional.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
PO message extraction rewritten to be more robust. (Pino Toscano)
<div class="Pp"></div>
&quot;podwrapper&quot; gives an error if the <i>--insert</i> or
  <i>--verbatim</i> argument pattern is not found.
<div class="Pp"></div>
Libguestfs now passes the qemu <i>-enable-fips</i> option to enable FIPS, if
  qemu supports it.
<div class="Pp"></div>
&quot;./configure --without-qemu&quot; can be used if you don't want to specify
  a default hypervisor.
<div class="Pp"></div>
Copy-on-write [COW] overlays, used for example for read-only drives, are now
  created through an internal backend API (&quot;.create_cow_overlay&quot;).
<div class="Pp"></div>
Libvirt backend uses some funky C macros to generate XML. These are simpler and
  safer.
<div class="Pp"></div>
The ChangeLog file format has changed. It is now just the same as &quot;git
  log&quot;, instead of using a custom format.
<div class="Pp"></div>
Appliance start-up has changed:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The libguestfs appliance now initializes LVM the same way
      as it is done on physical machines.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The libguestfs appliance does not write an empty string to
      <i>/proc/sys/kernel/hotplug</i> when starting up.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that you <b>must</b> configure your kernel to have
      &quot;CONFIG_UEVENT_HELPER_PATH=&quot;&quot;&quot; otherwise you will get
      strange LVM errors (this applies as much to any Linux machine, not just
      libguestfs). (Peter Rajnoha)</dd>
</dl>
<div class="Pp"></div>
Libguestfs can now be built on arches that have <i>ocamlc</i>(1) but not
  <i>ocamlopt</i>(1). (Hilko Bengen, Olaf Hering)
<div class="Pp"></div>
You cannot use &quot;./configure --disable-daemon --enable-appliance&quot;. It
  made no sense anyway. Now it is expressly forbidden by the configure script.
<div class="Pp"></div>
The packagelist file uses &quot;m4&quot; for macro expansion instead of
  &quot;cpp&quot;.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1073906</dt>
  <dd class="It-tag">java bindings inspect_list_applications2 throws
      java.lang.ArrayIndexOutOfBoundsException:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1063374</dt>
  <dd class="It-tag">[RFE] enable subscription manager clean or unregister
      operation to sysprep</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1060404</dt>
  <dd class="It-tag">virt-resize does not preserve GPT partition names</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1057504</dt>
  <dd class="It-tag">mount-local should give a clearer error if root is not
      mounted</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1056290</dt>
  <dd class="It-tag">virt-sparsify overwrites block devices if used as output
      files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1055452</dt>
  <dd class="It-tag">libguestfs: error: invalid backend: appliance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1054761</dt>
  <dd class="It-tag">guestfs_pvs prints &quot;unknown device&quot; if a physical
      volume is missing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1053847</dt>
  <dd class="It-tag">Recommended default clock/timer settings</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1046509</dt>
  <dd class="It-tag">ruby-libguestfs throws &quot;expecting 0 or 1
      arguments&quot; on Guestfs::Guestfs.new</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1045450</dt>
  <dd class="It-tag">Cannot inspect cirros 0.3.1 disk image fully</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1045033</dt>
  <dd class="It-tag">LIBVIRT_DEFAULT_URI=qemu:///system breaks libguestfs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1044585</dt>
  <dd class="It-tag">virt-builder network (eg. --install) doesn't work if
      resolv.conf sets nameserver 127.0.0.1</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1044014</dt>
  <dd class="It-tag">When SSSD is installed, libvirt configuration requires
      authentication, but not clear to user</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1039995</dt>
  <dd class="It-tag">virt-make-fs fails making fat/vfat whole disk: Device
      partition expected, not making filesystem on entire device '/dev/sda' (use
      -I to override)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1039540</dt>
  <dd class="It-tag">virt-sysprep to delete more logfiles</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1033207</dt>
  <dd class="It-tag">RFE: libguestfs inspection does not recognize Free4NAS live
      CD</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1028660</dt>
  <dd class="It-tag">RFE: virt-sysprep/virt-builder should have an option to
      lock a user account</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1026688</dt>
  <dd class="It-tag">libguestfs fails examining libvirt guest with ceph drives:
      rbd: image name must begin with a '/'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1022431</dt>
  <dd class="It-tag">virt-builder fails if $HOME/.cache doesn't exist</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1022184</dt>
  <dd class="It-tag">libguestfs: do not use versioned jar file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1020806</dt>
  <dd class="It-tag">All libguestfs LVM operations fail on Debian/Ubuntu</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1008417</dt>
  <dd class="It-tag">Need update helpout of part-set-gpt-type</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/953907</dt>
  <dd class="It-tag">virt-sysprep does not correctly set the hostname on
      Debian/Ubuntu</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/923355</dt>
  <dd class="It-tag">guestfish prints literal &quot;\n&quot; in error
    messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/660687</dt>
  <dd class="It-tag">guestmount: &quot;touch&quot; command fails: touch: setting
      times of `timestamp': Invalid argument</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/593511</dt>
  <dd class="It-tag">[RFE] function to get partition name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/563450</dt>
  <dd class="It-tag">list-devices returns devices of different types out of
      order</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.24"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.24">RELEASE
  NOTES FOR LIBGUESTFS 1.24</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.22.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
User-Mode Linux (UML) can be used as an alternative backend (ie. instead of
  KVM). This improves performance especially when using libguestfs inside a VM
  (eg. in the cloud). UML is supported as a first-class backend. See
  &quot;USER-MODE LINUX BACKEND&quot; in <i>guestfs</i>(3) for how to use this.
<div class="Pp"></div>
ARM (32 bit) and PPC64 are now fully supported.
<div class="Pp"></div>
<i>Tools</i>
<div class="Pp"></div>
<i>virt-builder</i>(1) is a new tool for building virtual machine images. It
  lets you rapidly and securely create guests and customize them.
<div class="Pp"></div>
New <i>virt-sysprep</i>(1) operations: Remove files in <i>/tmp</i> and
  <i>/var/tmp</i>. Remove RPM database files. Change root and user passwords.
  More log files are removed. New operations which are not enabled by default:
  Create random UUIDs for filesystems. Reset firewall rules. (Wanlong Gao)
<div class="Pp"></div>
<i>virt-resize</i>(1) and virt-sysprep can now use URIs to specify a remote
  disk.
<div class="Pp"></div>
Use &quot;guestfish -N filename=type&quot; to create a named disk image (instead
  of the default <i>test1.img</i> etc).
<div class="Pp"></div>
<i>virt-sparsify</i>(1) now tests if there is enough disk space to complete the
  operation, instead of possibly running out of space half way through.
<div class="Pp"></div>
<i>virt-format</i>(1) and <i>virt-make-fs</i>(1): new <i>--label</i> option for
  setting filesystem label.
<div class="Pp"></div>
virt-resize <i>--no-sparse</i> flag can be used to resize on to partitions and
  other targets that are not zeroed.
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
New bindings for the Go programming language.
<div class="Pp"></div>
<i>API</i>
<div class="Pp"></div>
Support for the systemd journal.
<div class="Pp"></div>
&quot;guestfs_add_drive_opts&quot; can now control the qemu caching mode through
  a new &quot;cachemode&quot; parameter. You can select improved performance for
  temporary drives, or safety.
<div class="Pp"></div>
&quot;guestfs_set_label&quot; now works for XFS and btrfs.
<div class="Pp"></div>
New GUESTFS_EVENT_WARNING event for warning messages.
<div class="Pp"></div>
<i>Inspection</i>
<div class="Pp"></div>
Better inspection of SUSE guests (Olaf Hering).
<div class="Pp"></div>
Better support for non-standard Windows %systemroot% (Matthew Booth).
<div class="Pp"></div>
Enhanced error reporting for Augeas errors.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">CVE-2013-2124</dt>
  <dd class="It-tag">https://bugzilla.redhat.com/show_bug.cgi?id=968306
    <div style="height: 1.00em;">&#x00A0;</div>
    A denial of service was possible when inspecting certain guests. The fix has
      been backported to 1.20 and 1.22 branches.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">CVE-2013-4419</dt>
  <dd class="It-tag">https://www.redhat.com/archives/libguestfs/2013-October/msg00031.html
    <div style="height: 1.00em;">&#x00A0;</div>
    Fix insecure temporary directory handling for remote guestfish. The fix has
      been backported to 1.20 and 1.22 branches.</dd>
</dl>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
 add-drive-scratch: Add a temporary scratch drive
 aug-label
 aug-setm
 journal-open: Systemd journal support
 journal-close
 journal-next
 journal-skip
 journal-get
 journal-get-data-threshold
 journal-set-data-threshold
 remount: Allow rw flag to be adjusted on mounted filesystems
 set-uuid: Set UUID of filesystem
</pre>
<div class="Pp"></div>
&quot;is-file&quot;, &quot;is-dir&quot;, &quot;is-blockdev&quot;,
  &quot;is-chardev&quot;, &quot;is-fifo&quot;, &quot;is-socket&quot; APIs now
  have an extra &quot;followsymlinks&quot; flag.
<div class="Pp"></div>
&quot;add-drive&quot; has a new &quot;cachemode&quot; parameter.
<h2 class="Ss" title="Ss" id="Build_changes"><a class="selflink" href="#Build_changes">Build
  changes</a></h2>
The following packages are required to build libguestfs 1.24:
<dl class="Bl-tag">
  <dt class="It-tag">Augeas &#x2265; 1.0.0</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
The following optional packages may be added to enhance functionality but are
  not required:
<dl class="Bl-tag">
  <dt class="It-tag">sd-journal</dt>
  <dd class="It-tag">To read journal files from guests which use that.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">url_mkcow</dt>
  <dd class="It-tag">For UML backend.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">curl</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">gpg</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">xz</dt>
  <dd class="It-tag">For virt-builder.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">golang &#x2265; 1.1.1</dt>
  <dd class="It-tag">For Go language bindings.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
New &quot;make check-*&quot; rules replace &quot;make extra-tests&quot;. See
  &quot;make help&quot; and <i>guestfs</i>(3) for details.
<div class="Pp"></div>
Perl code can now be valgrinded.
<div class="Pp"></div>
Inspection code is now fuzz-tested.
<div class="Pp"></div>
&quot;make&quot; no longer recurses into the generator directory in every other
  directory. This reduces the overhead of builds considerably.
<div class="Pp"></div>
Additional tests for Augeas, hivex.
<div class="Pp"></div>
Add a launch timeout of 20 minutes waiting for the appliance to start up.
<div class="Pp"></div>
Add a timeout (4 hours) to all tests so we can catch the case where qemu or
  other components hang.
<div class="Pp"></div>
Use kvmclock and &quot;-cpu host&quot;. This improves clock stability and
  overall performance.
<div class="Pp"></div>
&quot;./configure --enable-packet-dump&quot; mode is fixed.
<div class="Pp"></div>
&quot;./configure --enable-valgrind-daemon&quot; mode has been rewritten. It is
  now feasible for developers to keep this flag enabled at all times.
<div class="Pp"></div>
Backends have been refactored to be modular (although they are not actually
  loadable modules).
<div class="Pp"></div>
When enabled, the network now uses resolver configuration (ie. /etc/resolv.conf)
  from the host.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1019889</dt>
  <dd class="It-tag">libguestfs-tools.conf should have a man page</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1018149</dt>
  <dd class="It-tag">valgrind errors in btrfs_subvolume_list</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1002032</dt>
  <dd class="It-tag">mke2fs can't return the correct filesystem type when
      blockscount is less than 2048 for ext3</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1001876</dt>
  <dd class="It-tag">Update &quot;rsync-out&quot; helpout for using
    wildcard</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1001875</dt>
  <dd class="It-tag">Argument 'excludes' of tar-out does not work</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1000428</dt>
  <dd class="It-tag">virt-format uses wrong partition type for vfat
    filesystems</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/1000121</dt>
  <dd class="It-tag">'sh' command before mount causes daemon to segfault</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/998513</dt>
  <dd class="It-tag">guestfish does not work when you mix --remote and --add
      options</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/998482</dt>
  <dd class="It-tag">guestfish remote prints &quot;libguestfs: error: waitpid
      (qemu): No child processes&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/995711</dt>
  <dd class="It-tag">list-filesystems command fails if there are no block
      devices</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/994517</dt>
  <dd class="It-tag">cache=none/O_DIRECT workaround doesn't work for images with
      backing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/989356</dt>
  <dd class="It-tag">cap-get-file will return error if the file has not be set
      capabilities</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/986877</dt>
  <dd class="It-tag">RFE: Implement set-uuid command</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/986875</dt>
  <dd class="It-tag">RFE: Implement set-label for xfs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/985269</dt>
  <dd class="It-tag">Can't set acl value for a specified user with
      'acl-set-file'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/983218</dt>
  <dd class="It-tag">libguestfs double free when kernel link fails during
    launch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/981715</dt>
  <dd class="It-tag">Make xfs filesystem failed with specified blocksize, gives
      &quot;unknown option -b&quot; error</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/981683</dt>
  <dd class="It-tag">&quot;hivex-commit&quot; should fail with a relative
    path</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/981663</dt>
  <dd class="It-tag">disk-format &quot;qemu-img info: JSON parse error&quot;
      when target file does not exist</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/978302</dt>
  <dd class="It-tag">mke2fs-J should give a meaningful error when specified type
      is anything except 'ext{2,3,4}'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/975797</dt>
  <dd class="It-tag">Specifying virtio interface ('iface' parameter) breaks the
      direct backend - libguestfs hangs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/975753</dt>
  <dd class="It-tag">&quot;virt-resize --expand&quot; and &quot;virt-resize
      --resize&quot; outputs error message for Win2008 32bit OS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/975412</dt>
  <dd class="It-tag">inspection: Augeas expressions are broken with augeas &gt;=
      0.10</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/974904</dt>
  <dd class="It-tag">virt-resize --expand fails on Ubuntu Cloud Image</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/974489</dt>
  <dd class="It-tag">Regression: Fedora inspection broken by change from
      guestfs_exists to guestfs_is_file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/972775</dt>
  <dd class="It-tag">txz-out command produces a bzip2-compressed file (should be
      xz-compressed)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/969845</dt>
  <dd class="It-tag">upload to a directory occasionally hangs instead of
    failing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/968875</dt>
  <dd class="It-tag">virt-sysprep should support URL-type arguments</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/624334</dt>
  <dd class="It-tag">blockdev-setbsz succeeds, but does not affect
      blockdev-getbsz</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.22"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.22">RELEASE
  NOTES FOR LIBGUESTFS 1.22</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.20.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>API</i>
<div class="Pp"></div>
Remote access to disks:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Network Block Device (nbd)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Secure Shell (ssh)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">HTTP and HTTPS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">FTP and FTPS</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">iSCSI</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Gluster</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Ceph/rbd (Mike Kelly)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Sheepdog</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">TFTP</dd>
</dl>
<div class="Pp"></div>
The SYSLINUX and EXTLINUX bootloaders can now be installed in disk images using
  the API.
<div class="Pp"></div>
Inspection can now handle filesystems such as btrfs where subvolumes are
  separately mountable (Matthew Booth).
<div class="Pp"></div>
&quot;Attach methods&quot; are now known as &quot;backends&quot;. Compatibility
  with existing code is preserved.
<div class="Pp"></div>
Filenames can contain ':', as long as newer QEMU is being used.
<div class="Pp"></div>
<i>Tools</i>
<div class="Pp"></div>
Virt-alignment-scan and virt-df scan multiple guests in parallel.
<div class="Pp"></div>
Guestmount now passes errno accurately back to userspace in almost all cases.
<div class="Pp"></div>
Guestfish and other tools can now use a URI-like syntax to access remote disks,
  eg:
<div class="Pp"></div>
<pre>
 guestfish -a ssh://example.com/path/to/disk.img
</pre>
<div class="Pp"></div>
Guestfish and guestmount now allow you to specify the filesystem type when
  mounting, which is more secure (Dave Vasilevsky).
<div class="Pp"></div>
Guestfish is now the &quot;guest filesystem shell&quot;.
<div class="Pp"></div>
Guestfish allows only 1 &quot;true&quot; &quot;t&quot; &quot;yes&quot;
  &quot;y&quot; &quot;on&quot; 0 &quot;false&quot; &quot;f&quot; &quot;no&quot;
  &quot;n&quot; &quot;off&quot; for boolean values (case insensitive), and gives
  an error for all other strings.
<div class="Pp"></div>
New tool &quot;guestunmount&quot; for unmounting FUSE filesystems safely.
<div class="Pp"></div>
&quot;guestmount --no-fork&quot; flag prevents guestmount from daemonizing.
<div class="Pp"></div>
Virt-resize now uses sparse copies by default, saving considerable space for
  guests which are mostly empty.
<div class="Pp"></div>
Bash tab completion has been rewritten and can now handle most tools, and
  correctly tab-complete &quot;--long&quot; options. In addition, bash
  completion scripts are loaded on demand.
<div class="Pp"></div>
<i>Language bindings</i>
<div class="Pp"></div>
The Java API now supports events.
<div class="Pp"></div>
The Python object now inherits from the &quot;object&quot; base class.
<div class="Pp"></div>
Python methods which previously returned lists of tuples can now be made to
  return a Python dict. For backwards compatibility, you have to enable this by
  using the constructor option
  &quot;guestfs.GuestFS&#x00A0;(python_return_dict=True)&quot;.
<div class="Pp"></div>
The PHP bindings are now tested properly, and have had multiple fixes.
<div class="Pp"></div>
The long-deprecated Perl &quot;Sys::Guestfs::Lib&quot; library has been removed.
  https://www.redhat.com/archives/libguestfs/2013-April/msg00001.html
<div class="Pp"></div>
<i>Examples</i>
<div class="Pp"></div>
New example program showing how to enable debugging and capture log messages.
<div class="Pp"></div>
<i>Other</i>
<div class="Pp"></div>
Distributors can add arbitrary extra packages to the appliance by doing:
<div class="Pp"></div>
<pre>
 ./configure --with-extra-packages=&quot;list of package names&quot;
</pre>
<div class="Pp"></div>
Distributors can use:
<div class="Pp"></div>
<pre>
 ./configure --with-supermin-extra-options=&quot;...&quot;
</pre>
<div class="Pp"></div>
to add arbitrary extra options to supermin.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
No security issues were found in this release.
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
 cp-r
 extlinux
 feature-available
 get-program
 is-whole-device
 part-get-gpt-type
 part-set-gpt-type
 rename
 set-program
 syslinux
</pre>
<div class="Pp"></div>
C only:
<div class="Pp"></div>
<pre>
 guestfs_event_to_string
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
The febootstrap tool has now been renamed to &quot;supermin&quot;. Libguestfs
  can use either, but now prefers &quot;supermin&quot;.
  http://people.redhat.com/~rjones/supermin/
<div class="Pp"></div>
libxml2 is required to build libguestfs.
<div class="Pp"></div>
The hivexregedit program (from hivex) is required to build from git.
<div class="Pp"></div>
Internal functions can no longer be used unless the caller defines
  &quot;-DGUESTFS_PRIVATE=1&quot;.
<div class="Pp"></div>
Enable C compiler warnings in Python, Ruby bindings.
<div class="Pp"></div>
Fail early and clearly if libvirt does not support qemu/KVM (eg. if default
  libvirt connection is to Xen).
<div class="Pp"></div>
&quot;make print-subdirs&quot; rule, useful for selectively running tests.
<div class="Pp"></div>
Multiple fixes to allow separated (sourcedir != builddir) builds.
<div class="Pp"></div>
Multiple fixes to Haskell bindings.
<div class="Pp"></div>
&quot;ln&quot; and &quot;ln-f&quot; APIs now capture &quot;errno&quot;
  correctly.
<div class="Pp"></div>
Language binding tests use (mostly) a standard numbering scheme and aim to test
  the same range of features in each language. Also the number of launches
  required has been reduced so these tests should run much more quickly.
<div class="Pp"></div>
Library code internally uses GCC &quot;__attribute__((cleanup))&quot; (if
  available) to simplify memory allocation.
<div class="Pp"></div>
Internal header files have been reorganized. See the comments in
  <i>src/guestfs-internal*.h</i>
<div class="Pp"></div>
Internal code shared between the library and certain tools is now located in a
  static &quot;libutils&quot; library.
<div class="Pp"></div>
Almost all subdirectories can now use parallel builds, although note that the
  top-level directories still build in series.
<div class="Pp"></div>
Use of &quot;PATH_MAX&quot; and &quot;NAME_MAX&quot; has been eliminated from
  the code.
<div class="Pp"></div>
The Java API now requires JVM &#x2265; 1.6.
<div class="Pp"></div>
Force use of &quot;serial-tests&quot; with automake &#x2265; 1.12.
<div class="Pp"></div>
Use of sockets in the library protocol layer is abstracted, allowing other
  non-POSIX layers to be added in future (see <i>src/conn-socket.c</i>).
<div class="Pp"></div>
&quot;qemu-img info --output json&quot; is used if available, for more secure
  parsing of the output of this command.
<div class="Pp"></div>
Distros can now use &quot;make INSTALLDIRS=vendor install&quot; to place Ruby
  bindings in vendordir. This eliminates a non-upstream patch carried by both
  Fedora and Debian.
<div class="Pp"></div>
Valgrind log files are now written to
  <i>tmp/valgrind-</i><i>DATE</i><i>-</i><i>PID</i> <i>.log</i>
<div class="Pp"></div>
&quot;make clean&quot; cleans the local &quot;tmp/&quot; directory.
<div class="Pp"></div>
The C API tests have been rewritten using a more flexible generator language
  that allows arbitrary C code to be executing during tests.
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/961812</dt>
  <dd class="It-tag">Segfault in inspect-fs.c in mountable code</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/957772</dt>
  <dd class="It-tag">tar-out and base64-out quoting error</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/957380</dt>
  <dd class="It-tag">libguestfs: error: btrfsvol:/dev/sda2/root: root device not
      found: only call this function with a root device previously returned by
      guestfs_inspect_os</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/948324</dt>
  <dd class="It-tag">inspection fails if libosinfo is not installed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/928995</dt>
  <dd class="It-tag">file on zero-sized file now produces &quot;empty &quot;
      instead of &quot;empty&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/921292</dt>
  <dd class="It-tag">qemu: could not open disk image /tmp/.../snapshot1:
      Permission denied</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/921040</dt>
  <dd class="It-tag">&quot;error: external command failed, see earlier error
      messages&quot; message needs to change</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/920225</dt>
  <dd class="It-tag">libguestfs should use --output json (if supported) to
      safely parse the output of qemu-img command</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/916780</dt>
  <dd class="It-tag">feature request: guestmount --with-cleanup-pipefd</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/914934</dt>
  <dd class="It-tag">oom-killer kills guestfsd when tar-in a lot of data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/914931</dt>
  <dd class="It-tag">FileIn commands cause segfault if appliance dies during the
      file copy in</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/913145</dt>
  <dd class="It-tag">Misc leaks in virNetClientProgramCall in libvirt 1.0.2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/912499</dt>
  <dd class="It-tag">Security context on image file gets reset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/909836</dt>
  <dd class="It-tag">libguestfs-test-tool --qemu segfaults</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/909624</dt>
  <dd class="It-tag">Unexpected non-tail recursion in recv_from_daemon results
      in stack overflow in very long-running API calls that send progress
      messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/908322</dt>
  <dd class="It-tag">virt-tar fails on non-existent directory names &quot;error
      in chunked encoding at /home/rjones/d/libguestfs/tools/virt-tar line
      272.&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/908321</dt>
  <dd class="It-tag">virt-cat fails on directory names &quot;/dev/stdout: error
      in chunked encoding&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/907554</dt>
  <dd class="It-tag">btrfs causes subsequent ntfs-3g filesystem to fail</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/905341</dt>
  <dd class="It-tag">&quot;No such file or directory&quot; when execute
      &quot;hivex-commit&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/903620</dt>
  <dd class="It-tag">btrfs_subvolume_list broken due to change in subvolume list
      output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/895910</dt>
  <dd class="It-tag">guestmount: <i>rename()</i> incorrectly follows symbolic
      links</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/895905</dt>
  <dd class="It-tag">guestmount: <i>link()</i> incorrectly returns ENOENT, when
      it should be EXDEV</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/895904</dt>
  <dd class="It-tag">checksums-out fail to compute the checksums of all regular
      files in directory</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/894545</dt>
  <dd class="It-tag">libguestfs FTBFS on Fedora 19 because of new ruby</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/890027</dt>
  <dd class="It-tag">virt-sysprep: Setting hostname, domain name and pretty name
      on Fedora 18 correctly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/887971</dt>
  <dd class="It-tag">pvcreate fails if partition contains a swap signature</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/887520</dt>
  <dd class="It-tag">zero_free_space: open: /sysroot//ujqqq135.rd3: Cannot
      allocate memory</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/886915</dt>
  <dd class="It-tag">libguestfs with libvirt attach-method fails with odd error
      if default hypervisor is Xen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/847549</dt>
  <dd class="It-tag">Adding a zero-length virtio-scsi disk causes: qemu-kvm:
      hw/scsi-bus.c:1568: scsi_req_complete: Assertion `req-&gt;status == -1'
      failed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/811649</dt>
  <dd class="It-tag">libguestfs cannot open disk images which are symlinks to
      files that contain ':' (colon) character</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/664558</dt>
  <dd class="It-tag">RFE: Allow to set log callback in Ruby bindings</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.20"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.20">RELEASE
  NOTES FOR LIBGUESTFS 1.20</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.18.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>libvirt and sVirt (SELinux confinement)</i>
<div class="Pp"></div>
You can <i>optionally</i> use libvirt to launch and manage the backend appliance
  by:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">setting
    &quot;LIBGUESTFS_ATTACH_METHOD=libvirt[:URI]&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">using &quot;./configure
      --with-default-attach-method=libvirt[:URI]&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">or calling the API method
      &quot;guestfs_set_attach_method&quot;</dd>
</dl>
<div class="Pp"></div>
SVirt (SELinux confinement) is used to secure the libguestfs appliance, if the
  libvirt backend is selected.
<div class="Pp"></div>
<i>virtio-scsi, larger number of drives, hotplugging</i>
<div class="Pp"></div>
Virtio-scsi is now used by default, if it is available. This greatly increases
  the number of drives that can be added to a single libguestfs handle (up to
  255).
<div class="Pp"></div>
You can now hotplug drives (add and remove drives after launch).
<div class="Pp"></div>
Libguestfs can now handle &gt; 25 disks, in all APIs, tools and tests.
<div class="Pp"></div>
You can label drives when adding them, then refer to them by label (
  <i>/dev/disk/guestfs/LABEL</i>) instead of having to use device names (
  <i>/dev/sda</i>).
<div class="Pp"></div>
<i>new library features</i>
<div class="Pp"></div>
POSIX Access Control Lists (ACLs) and Linux filesystem capabilities can now be
  read and written through the API.
<div class="Pp"></div>
Windows Dynamic Disks are now supported. The metadata can only be read (volumes
  cannot be modified or created). However the data/filesystems in the volumes
  themselves can be mounted, read and written (Matthew Booth).
<div class="Pp"></div>
Hivex (Windows Registry editing) is now directly supported through the API,
  making reading or editing the Windows Registry much more efficient.
<div class="Pp"></div>
Several libguestfs APIs were reimplemented so they no longer have any limits on
  output. The reimplemented APIs are: &quot;guestfs_cat&quot;,
  &quot;guestfs_find&quot;, &quot;guestfs_read_file&quot;,
  &quot;guestfs_read_lines&quot;, &quot;guestfs_write&quot;,
  &quot;guestfs_write_append&quot;, &quot;guestfs_lstatlist&quot;,
  &quot;guestfs_lxattrlist&quot;, &quot;guestfs_readlinklist&quot;,
  &quot;guestfs_ls&quot;.
<div class="Pp"></div>
<i>virt tools</i>
<div class="Pp"></div>
&quot;guestfish touch 'win:c:\new_file'&quot; now works as expected.
<div class="Pp"></div>
&quot;guestfish&quot; has a new <i>--network</i> option, which enables the user
  network in libguestfs.
<div class="Pp"></div>
You can set &quot;GUESTFISH_PS1&quot; to use fancy prompts in
  &quot;guestfish&quot;.
<div class="Pp"></div>
&quot;rsync&quot;, &quot;ssh&quot;, &quot;less&quot; and &quot;lrzip&quot;
  commands are now available in virt-rescue. In addition, &quot;rsync&quot; can
  be used through the API for doing incremental copies.
<div class="Pp"></div>
&quot;virt-sparsify&quot; uses qcow2 v3 for increased efficiency.
<div class="Pp"></div>
&quot;virt-sysprep&quot; enhancements:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">generate new UUIDs for PVs and VGs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove the local machine ID (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove ABRT data (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove puppet keys and log files (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove process accounting files (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">new <i>--firstboot</i> parameter allowing firstboot scripts
      for customizing guests</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove HOSTNAME field from &quot;ifcfg-eth*&quot; files
      (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">miscellaneous improvements for SuSE (Olaf Hering)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove man pages cache (Wanlong Gao)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">remove crash data generated by kexec-tools (Wanlong
    Gao)</dd>
</dl>
<div class="Pp"></div>
&quot;virt-make-fs&quot; can now create virtual floppy disks (VFDs).
<div class="Pp"></div>
&quot;guestmount&quot; has a <i>--pid-file</i> option, which can be used to
  avoid a race condition between unmounting the filesystem and using the
  underlying disk image.
<div class="Pp"></div>
<i>language bindings</i>
<div class="Pp"></div>
Full-featured Lua bindings have been added in this release (thanks to Jerome
  Vuarand for many suggestions).
<div class="Pp"></div>
In Ruby, optional arguments hash is optional.
<div class="Pp"></div>
In Python, optional arguments now don't use special &quot;sentinel&quot; values,
  so any integer can be passed as an optional argument.
<div class="Pp"></div>
Erlang bindings now come with examples and tests.
<div class="Pp"></div>
Erlang bindings now handle 64 bit integer parameters correctly.
<div class="Pp"></div>
The automated 'bindtests' now test for 64 bit cleanliness in parameter passing.
  Several bugs in the bindings were found and fixed as a result.
<div class="Pp"></div>
Better handling of blocking and non-blocking functions should make libguestfs
  calls more efficient.
<div class="Pp"></div>
<i>inspection</i>
<div class="Pp"></div>
Windows guests with unlimited-sized Registries are now supported. By adding the
  hivex API to the libguestfs API, it is much more efficient and easier to
  inspect and modify the Windows Registry in guests.
<div class="Pp"></div>
Better support for SuSE guests (Olaf Hering).
<div class="Pp"></div>
Return the architecture of installed applications (John Eckersberg).
<div class="Pp"></div>
Windows 8 is now supported.
<div class="Pp"></div>
Fedora 18 is now supported.
<div class="Pp"></div>
Inspection of ISOs/CDs/DVDs can now use the libosinfo database.
<div class="Pp"></div>
<i>ports</i>
<div class="Pp"></div>
Libguestfs without the appliance can be compiled on Mac OS X (Masami HIRATA).
<div class="Pp"></div>
RHEL 5 is now explicitly supported through the 'oldlinux' branch in upstream
  git.
<div class="Pp"></div>
PowerPC 64 bit is now supported. Also libguestfs has been examined for
  endianness bugs and these have been fixed.
<div class="Pp"></div>
<i>daemon</i>
<div class="Pp"></div>
A man page for the daemon ( <i>guestfsd</i>(8)) is included.
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<i>guestfish history file</i>
<div class="Pp"></div>
The <i></i><i>$HOME</i><i>/.guestfish</i> history file is now created with 0600
  permissions (instead of 0644 before) so it is no longer world readable.
<div class="Pp"></div>
<i>CVE-2012-2690</i>
<div class="Pp"></div>
Old versions of both &quot;virt-edit&quot; and the &quot;guestfish&quot;
  &quot;edit&quot; command created a new file containing the changes but did not
  set the permissions, etc of the new file to match the old one. The result of
  this was that if you edited a security sensitive file such as
  <i>/etc/shadow</i> then it would be left world-readable after the edit.
<div class="Pp"></div>
This issue was assigned CVE-2012-2690, and is fixed in libguestfs &#x2265; 1.16.
<div class="Pp"></div>
For further information, see https://bugzilla.redhat.com/show_bug.cgi?id=788642
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
 acl-delete-def-file
 acl-get-file
 acl-set-file
 canonical-device-name
 cap-get-file
 cap-set-file
 create-flags
 device-index
 disk-has-backing-file
 disk-format
 disk-virtual-size
 filesystem-available
 fill-dir
 fstrim
 get-cachedir
 get-libvirt-requested-credentials
 get-libvirt-requested-credential-prompt
 get-libvirt-requested-credential-challenge
 get-libvirt-requested-credential-defresult
 get-tmpdir
 hivex-close
 hivex-commit
 hivex-node-add-child
 hivex-node-children
 hivex-node-delete-child
 hivex-node-get-child
 hivex-node-get-value
 hivex-node-name
 hivex-node-parent
 hivex-node-set-value
 hivex-node-values
 hivex-open
 hivex-root
 hivex-value-key
 hivex-value-type
 hivex-value-utf8
 hivex-value-value
 inspect-list-applications2 (John Eckersberg)
 list-ldm-volumes
 list-ldm-partitions
 ldmtool-create-all
 ldmtool-diskgroup-disks
 ldmtool-diskgroup-name
 ldmtool-diskgroup-volumes
 ldmtool-remove-all
 ldmtool-scan
 ldmtool-scan-devices
 ldmtool-volume-hint
 ldmtool-volume-partitions
 ldmtool-volume-type
 ls0
 max-disks
 mke2fs (Wanlong Gao)
 mklost-and-found
 mkswap [added label and uuid optional arguments]
 mktemp (Wanlong Gao)
 nr-devices
 parse-environment
 parse-environment-list
 rm-f
 rsync
 rsync-in
 rsync-out
 set-cachedir
 set-libvirt-supported-credentials
 set-libvirt-requested-credential
 set-tmpdir
 shutdown [backported to 1.16 and 1.18]
 tar-in [added compress flag]
 tar-out [added compress, numericowner, excludes flags]
 umount [added force and lazy optional arguments]
 utsname
 xfs-admin (Wanlong Gao)
 xfs-growfs (Wanlong Gao)
 xfs-info (Wanlong Gao)
 xfs-repair (Wanlong Gao)
</pre>
<div class="Pp"></div>
In the C API only:
<div class="Pp"></div>
<pre>
 guestfs_push_error_handler
 guestfs_pop_error_handler
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
qemu &#x2265; 1.1 is required (&#x2265; 1.2 preferred).
<div class="Pp"></div>
febootstrap &#x2265; 3.20 is required.
<div class="Pp"></div>
libvirt is optional, but if you want to use the new libvirt backend for
  launching the appliance then libvirt &#x2265; 0.10.2 would be required.
<div class="Pp"></div>
Coverity has been run over the complete codebase, and many issues fixed (thanks
  Ondrej Vasik, Kamil Dudka).
<div class="Pp"></div>
Functions which previously had no optargs can now be converted to ones with
  optargs, making extending the API much more flexible. Source and binary
  backwards compatibility is preserved for users of the API.
<div class="Pp"></div>
The way that libguestfs APIs and structures are represented in the generator has
  changed to use an OCaml struct instead of a tuple. This makes generator
  descriptions more flexible and easier to understand. For details see commits
  39d1a7db and eb185eef.
<div class="Pp"></div>
Separation of the library code into more files:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Launch backends are now located in separate files eg.
      <i>src/launch-appliance.c</i>, &quot;src/launch-libvirt.c&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Generated action code is now split over several
      <i>src/action*.c</i> files, for faster compilation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The huge <i>src/guestfs.c</i> file is now split into
      smaller logical units.</dd>
</dl>
<div class="Pp"></div>
POD (documentation) is now generated using a rewritten Perl program instead of
  pod2* + shell scripts.
<div class="Pp"></div>
Man pages now contain stable dates (Hilko Bengen).
<div class="Pp"></div>
Skipped tests now exit with code 77, so they appear as &quot;SKIP:&quot; in
  &quot;make check&quot; output.
<div class="Pp"></div>
The parallel mount-local test has been rewritten in C (RHBZ#838081).
<div class="Pp"></div>
Ruby 1.8.5 is now supported (though Ruby &#x2265; 1.9 is preferred).
<div class="Pp"></div>
Perl bindings can be disabled via &quot;./configure --disable-perl&quot; (Wulf
  C. Krueger). Note that Perl is still required in order to build libguestfs.
<div class="Pp"></div>
Java bindings are now enabled/disabled using &quot;./configure --with-java&quot;
  or &quot;./configure --without-java&quot; (Wulf C. Krueger).
<div class="Pp"></div>
New configure options &quot;./configure --enable-code-profiling&quot; and
  &quot;./configure --enable-code-coverage&quot;.
<div class="Pp"></div>
Multiple fixes to use of 64 bit integers in language bindings.
<div class="Pp"></div>
The appliance backend now uses sgabios instead of vgabios (Dan Berrange).
<div class="Pp"></div>
The &quot;./run&quot; script now sets enough environment variables that you can
  run OCaml, Python, Ruby, Java, GJS, Erlang, Lua programs.
<div class="Pp"></div>
&quot;./run --test&quot; flag for running tests with minimal output. It also
  prints the time taken to run each test.
<div class="Pp"></div>
The &quot;./run&quot; script now builds up paths cumulatively, meaning that you
  can use &quot;./run&quot; twice, or use the libguestfs and libvirt
  &quot;./run&quot; scripts together.
<div class="Pp"></div>
You can extract a list of external commands required by the daemon, making
  building the appliance on certain distros easier (Olaf Hering).
<div class="Pp"></div>
The &quot;virt-rescue&quot; command is now tested during &quot;make check&quot;.
<div class="Pp"></div>
The generator now removes unused generated files. This helps when going back and
  forth with git rebase, git bisect, etc.
<div class="Pp"></div>
Tests now run in a separate toplevel &quot;tmp/&quot; directory in the source.
  This allows the directory to be labelled for SELinux (sVirt), and also makes
  it easier to clean up.
<div class="Pp"></div>
&quot;make syntax-check&quot; now works to a greater extent, and many problems
  in the main code that were found by syntax-check have been fixed (thanks Jim
  Meyering).
<div class="Pp"></div>
Emacs mode (-*- foo -*-) has been added to generated files.
<div class="Pp"></div>
Progress bar output is now sent to <i>/dev/tty</i> so it doesn't end up in the
  regular output of the program. virt-resize and virt-sparsify now suppress
  progress bars if stdout is not a tty.
<div class="Pp"></div>
There is now a &quot;./configure --without-libvirt&quot; option. This is useful
  for testing that the code still compiles without libvirt.
<div class="Pp"></div>
There is now an internal mini-library for running commands. This allows us to
  redirect errors from external commands into events.
<div class="Pp"></div>
Code for handling temporary directories and the appliance cache was completely
  overhauled.
<div class="Pp"></div>
Code for temporarily ignoring/disabling errors now looks like this:
<div class="Pp"></div>
<pre>
 guestfs_push_error_handler (g, NULL, NULL);
 guestfs_mkdir (g, &quot;/foo&quot;); /* We don't care if this fails. */
 guestfs_pop_error_handler (g);
</pre>
<div class="Pp"></div>
The &quot;tests/extra&quot; directory has gone. The &quot;extra tests&quot; are
  now split into separately runnable targets, such as &quot;make
  check-valgrind&quot;. Use &quot;make help&quot; to get a summary of the
  targets.
<div class="Pp"></div>
The &quot;lpj&quot; option is passed to the appliance kernel when using TCG.
  This should improve clock stability (thanks Marcelo Tosatti, Olaf Hering).
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/882417</dt>
  <dd class="It-tag">libguestfs tools fail with odd error messages if TMPDIR is
      not an absolute path</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/882299</dt>
  <dd class="It-tag">Windows 8 guest disks can't be mounted: &quot;The NTFS
      partition is in an unsafe state. Please resume and shutdown Windows fully
      (no hibernation or fast restarting), or mount the volume read-only with
      the 'ro' mount option.&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/881953</dt>
  <dd class="It-tag">libguestfs: migration to /etc/hostname, /etc/vconsole.conf,
      /etc/locale.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/880801</dt>
  <dd class="It-tag">virt-df with two -a options displays incorrect disk image
      name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/879416</dt>
  <dd class="It-tag">libguestfs-test-tool pauses when you use --help option</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/876579</dt>
  <dd class="It-tag">mke2fs API does not apply block device naming translation
      to journaldevice optarg</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/860235</dt>
  <dd class="It-tag">SELinux policy ought to allow qemu to write to
      unconfined_u:object_r:user_tmp_t:s0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/859949</dt>
  <dd class="It-tag">RFE: inspect-list-applications does not return the
      architecture of RPM packages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/859885</dt>
  <dd class="It-tag">inspect-list-applications does not list all installed RPM
      packages with same name and different versions</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/859876</dt>
  <dd class="It-tag">guestfish printed paths are not canonicalized</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/859875</dt>
  <dd class="It-tag">Progress bar output should go to tty(?) stderr(?)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/858696</dt>
  <dd class="It-tag">virt-sysprep reports Guestfs.Error(&quot;read_lines: fopen:
      /etc/sysconfig/network: No such file or directory&quot;) on some Fedora
      guests</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/858128</dt>
  <dd class="It-tag">libguestfs fail to list devices added by
      add-drive-ro-with-if twice</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/858126</dt>
  <dd class="It-tag">virt-inspector fail to work with some windows guests</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/853762</dt>
  <dd class="It-tag">virt-sparsify should use a more robust method to detect the
      input format</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/853393</dt>
  <dd class="It-tag">libvirt doesn't label console, serial sockets</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/853159</dt>
  <dd class="It-tag">virt-rescue in Fedora 18 is completely broken</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/852394</dt>
  <dd class="It-tag">libguestfs inspection limits registries to 100 MiB</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/852194</dt>
  <dd class="It-tag">virt-sparsify --compress fails if output is raw format</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/847881</dt>
  <dd class="It-tag">RFE: allow extra arguments (like --exclude) to tar-out</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/847880</dt>
  <dd class="It-tag">tar-out should allow (or force) --numeric-owner</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/845522</dt>
  <dd class="It-tag">guestfish &quot;copy-out / localdir&quot; command fails
      with &quot;No such file or directory&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/845488</dt>
  <dd class="It-tag">Long filenames on NTFS cause tar-out, copy-out etc to fail
      with error &quot;Cannot open: File name too long&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/842307</dt>
  <dd class="It-tag">RFE: Need help designing and implementing selinux policy
      for libguestfs/sVirt</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/840572</dt>
  <dd class="It-tag">virt-make-fs / tar-in should support vfat properly</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/840115</dt>
  <dd class="It-tag">guestfish touch problem - case_sensitive_path API expects
      the file to exist</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/836710</dt>
  <dd class="It-tag">Data loss when writing to qcow2-format disk files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/834712</dt>
  <dd class="It-tag">lvresize, lvresize-free fail unnecessarily if you don't
      change the size of the LV: &quot;New size (nn extents) matches existing
      size (nn extents)&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/824716</dt>
  <dd class="It-tag">compress-device-out didn't support bzip2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/824043</dt>
  <dd class="It-tag">guestfish unrecognized mount option gives confusing error
      message</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/823887</dt>
  <dd class="It-tag">Filenames containing Chinese characters can't be created on
      vfat filesystems</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/823885</dt>
  <dd class="It-tag">virt-make-fs cannot create vfat filesystem containing
      filesystems with Chinese characters</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/823883</dt>
  <dd class="It-tag">virt-make-fs -t fat fails with an obscure error
    message</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/823821</dt>
  <dd class="It-tag">Inspection fails when /etc/HOSTNAME is empty</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/801117</dt>
  <dd class="It-tag">libguestfs cannot get icon for Windows 8</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/798979</dt>
  <dd class="It-tag">Ubuntu install CDs from oneiric onwards are not recognized:
      &quot;multi-boot operating systems are not supported&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/782167</dt>
  <dd class="It-tag">libguestfs doesn't recognize Windows Dynamic disks in some
      configurations, eg. spanned</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/713678</dt>
  <dd class="It-tag">Not all febootstrap messages are redirected to log
      callbacks</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/627675</dt>
  <dd class="It-tag">libguestfs inspector code cannot handle /dev/disk/by-id/*
      paths</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">https://bugzilla.redhat.com/602997</dt>
  <dd class="It-tag">part-get-bootable gives wrong result with an unordered part
      layout</dd>
</dl>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.18"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.18">RELEASE
  NOTES FOR LIBGUESTFS 1.18</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.16.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>virt tools</i>
<div class="Pp"></div>
<pre>
   - virt-sysprep has been rewritten and expanded (thanks Wanlong Gao)
     http://libguestfs.org/virt-sysprep.1.html
   - virt-sparsify --zero is a new option that zeroes the named
     partition or filesystem
   - virt-sparsify can now safely sparsify Linux swap partitions
   - virt-sparsify fixed so it cleans up after ^C
     http://libguestfs.org/virt-sparsify.1.html
   - a new tool 'libguestfs-make-fixed-appliance' is provided to build
     fixed appliances that can be copied to other machines that don't
     have febootstrap support
     http://libguestfs.org/libguestfs-make-fixed-appliance.1.html
   - virt-filesystems now displays the parents (containers) of MD
     devices and volume groups
   - virt-alignment-scan, run with no args, displays alignment information
     for all libvirt domains
   - virt-df and virt-alignment-scan will display information from all
     guests even when a disk is inaccessible
   - virt-rescue new --scratch option to make scratch disks
     https://rwmj.wordpress.com/2012/04/26/virt-rescue-scratch/#content
   - virt-make-fs can now be used to create btrfs
   - virt-edit preserves permissions, UID, GID and SELinux context
     when editing files
   - guestfish passes the close event over stdout and remote correctly
   - guestfish new '--pipe-error' option lets you detect errors in pipe
     commands
   - guestfish globs now expand device names
   - comma and colon characters in filenames now handled correctly by
     all virt tools
</pre>
<div class="Pp"></div>
<i>inspection</i>
<div class="Pp"></div>
<pre>
   - added support for Fedora 17+
   - added support for FreeDOS
   - added support for Buildroot and Cirros
   - inspection is now compatible with Windows guests that have been
     sysprepped (thanks Grant Williamson).
</pre>
<div class="Pp"></div>
<i>API</i>
<div class="Pp"></div>
<pre>
   - broad support for btrfs added, including adding multiple devices,
     fsck, snapshots (thanks Wanlong Gao)
   - the new 'mount-local' API brings FUSE support directly into the
     core libguestfs API
     https://rwmj.wordpress.com/2012/05/14/tip-using-mount-local-api-from-c/#content
   - new man page: guestfs-performance(1), which contains performance
     tuning tips
     http://libguestfs.org/guestfs-performance.1.html
   - new man page: guestfs-faq(1), Frequently Asked Questions
     http://libguestfs.org/guestfs-faq.1.html
   - ENOTSUP (from guestfs_last_errno) is now returned for APIs that
     are not supported
</pre>
<div class="Pp"></div>
<i>examples</i>
<div class="Pp"></div>
<pre>
   - 'copy_over' example showing how to copy between two handles
   - 'display_icon' program displays the icon associated with a guest
   - 'mount_local.c' example shows how to use the mount-local API
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
  (no security problems were found or fixed in this release)
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  btrfs-device-add: Add devices to a btrfs filesystem.
  btrfs-device-delete: Remove devices from a btrfs filesystem.
  btrfs-filesystem-sync: Sync a btrfs filesystem.
  btrfs-filesystem-balance: Balance a btrfs filesystem.
  btrfs-fsck: Check btrfs filesystem.
  btrfs-set-seeding: Enable or disable seeding.
  btrfs-subvolume-create: Create a btrfs snapshot.
  btrfs-subvolume-delete: Delete a btrfs snapshot.
  btrfs-subvolume-list: List btrfs snapshots and subvolumes.
  btrfs-subvolume-set-default: Set default btrfs subvolume.
  btrfs-subvolume-snapshot: Create a writable btrfs snapshot.
  get-e2attrs: List ext2 file attributes of a file.
  get-e2generation: Get ext2 file generation of a file.
  isoinfo, isoinfo-device: Get information from the header of ISO files.
  llz: List files with SELinux information.
  lvcreate-free: Create an LVM logical volume in % remaining free space.
  md-stat: Return underlying devices from an MD device.
  mkfs-brtfs: Make btrfs filesystem, with all tunables.
  mount-local, mount-local-run, umount-local: FUSE support in the API.
  ntfsclone-in, ntfsclone-out: Save, restore NTFS from backup.
  ntfsfix: Fix common errors and force Windows to check NTFS.
  set-e2attrs: Set or clear ext2 file attributes of a file.
  set-e2generation: Set ext2 file generation of a file.
  set-label: Unified interface for setting filesystem label.
  vgmeta: Get volume group metadata.
  wipefs: Wipe filesystem signatures from a device.
  zero-free-space: Zero free space in a filesystem.
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - The debian/ subdirectory has been removed.  We recommend you use
   the official Debian packages made by Hilko Bengen.
   http://people.debian.org/~bengen/libguestfs/
   http://packages.debian.org/search?keywords=libguestfs
 - O_CLOEXEC / SOCK_CLOEXEC is now used for almost all file
   descriptors that the library opens.
 - posix_fadvise is called when sequentially reading or writing large
   files.
 - close all file descriptors and remove all signal handlers in the
   recovery process
 - multiple gcc warnings and Coverity bugs have been fixed;  many
   strict-overflow bugs have also been fixed
 - use ./configure --enable-valgrind-daemon to use valgrind on the
   daemon;  many errors have been fixed
 - use ./configure --with-qemu-options to pass extra options to qemu
 - the daemon now has a growable strings buffer type (DECLARE_STRINGSBUF)
 - the &lt;guestfs.h&gt; header file works with C++ and we have a regression
   test for this
 - multiple APIs which should only be called in the CONFIG state now
   give an error if they are not
 - .gitignore fixed to use absolute paths
 - gobject bindings have been expanded, including mapping libguestfs
   events to gobject signals (thanks Matt Booth)
 - gobject documentation is generated properly (thanks Matt Booth)
 - gobject header files now live in a subdirectory
 - CompareWithString test in the generator now works
 - FUInt32, FUInt64 struct field types now use the correct XDR type
 - OCaml tests are now run on bytecode and native code.
 - java -Xlint:all is used, and all warnings have been fixed
 - bmptopng, wrestool (etc) missing or failure no longer prints
   warning messages
 - ruby: Use RbConfig instead of Config.
 - PYTHONPATH is set by the ./run script.
 - appliance building is now thread-safe.
 - appliance now uses 'ip' instead of 'ifconfig' and 'netstat'
   commands
 - several fixes to make parallel builds work properly
 - guestfish --listen now cleans up properly
 - the BUSY state has been removed
 - gettextize has been removed, replaced by a simple Makefile.am
 - gettext support now covers virt-resize, virt-sparsify and virt-sysprep
 - better support for the arm architecture
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 822490 virt-ls error: &quot;libguestfs: error: checksum: path: parameter cannot be NULL&quot;
 - 816839 data overflow error when debug progress -1
 - 816098 virt-make-fs fails to make a btrfs filesystem because it doesn't allocate enough space
 - 811872 inspection fails on ubuntu 10.04 guest with encrypted swap
 - 811650 guestfs_last_error not set when qemu fails early during launch
 - 811649 libguestfs cannot open disk images which are symlinks to files that contain ':' (colon) character
 - 811117 [RFE][virt-sysprep] net-hwaddr not removed from &quot;ifcfg-*&quot; files on rhel
 - 811112 [RFE][virt-sysprep] hostname can not be changed on rhel system
 - 809361 inspection doesn't recognize Fedora 18 (grub2 + GPT)
 - 807905 mkfs blocksize option breaks when creating btrfs
 - 805070 virt-filesystems should show 'parents' of LV and RAID devices
 - 804464 libguestfs cannot be built when LINGUAS is different then ja or uk
 - 803664 libguestfs inspection fails on Windows XP: libguestfs: error: hivex: could not locate HKLM\SYSTEM\MountedDevices
 - 803533 guestfish: write error
 - 802389 event handlers for 'close' event doesn't work in remote mode
 - 802109 libguestfs uses putc on stderr, results in many individual 1 byte writes of debug messages
 - 801640 [RFE] the error reported by resize2fs-M need to be more clear
 - 801298 Possible null dereference and resource leaks
 - 801273 Document for set-pgroup need to be updated
 - 798196 virt-resize confuses format and output_format variables; using --output-format sets the input format
 - 797986 virt-resize on Windows XP in sysprep state causes &quot;UNMOUNTABLE_BOOT_VOLUME&quot; BSOD
 - 796520 [RFE] Prevent user from running some appliance configure commands after appliance boot up
 - 790721 multiprovider build error: RuntimeError: link: /tmp/.guestfs-0/kernel /tmp/.guestfs-0/kernel.10139: File exists
 - 789960 guestfsd crash when try to mount non-exist disk
 - 789504 virt-df (other tools?) should not give up if a guest disk is missing
 - 788641 virt-edit doesn't preserve file permissions
 - 786215 libguestfs inspection does not recognize FreeDOS operating system
 - 786188 libguestfs inspection does not recognize FreeDOS install CD
 - 785668 aug-defnode: daemon crash
 - 784647 Libguestfs uses deprecated net-tools
 - 769304 virt-resize on RHEL 6 kernel fails to re-read the partition table
 - 755729 Error message for resize2fs-M needs tweaking
 - 701814 virt-win-reg fails on a libvirt guest that has no defined disk format: &quot;format parameter is empty or contains disallowed characters&quot;
 - 679737 libguestfs: improve error message when zerofree is not available in the appliance
 - 635971 glob mkfs ext2 /dev/vd[b-t]1 does not expand
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.16"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.16">RELEASE
  NOTES FOR LIBGUESTFS 1.16</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.14.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>libguestfs</i>
<div class="Pp"></div>
<pre>
   - allow XFS filesystems to be created over an existing filesystem
     (Wanlong Gao)
   - the (unspecified) default alignment for part-disk has been
     changed to 64K for better support of high-end network-attached
     storage
   - new guestfs-testing(1) man page
   - list-filesystems returns MD devices containing filesystems
     (Matthew Booth)
   - support for GCC &gt;= 4.7 (Jim Meyering)
   - check user does not add the same drive twice (Wanlong Gao).
</pre>
<div class="Pp"></div>
<i>language bindings</i>
<div class="Pp"></div>
<pre>
   - Experimental GObject bindings, with support for GObject
     Introspection.  You can now use libguestfs from Javascript.
     Please note these are not stable and final in this release.
     (Matthew Booth).
   - support for Ruby &gt;= 1.9
   - Ruby bindings can be disabled individually (Hilko Bengen)
   - support for Python 2.6, 3.x (Richard Jones, Hilko Bengen)
   - support for PHP &gt;= 5.4
   - new %guestfs_introspection hash is available in Perl bindings so
     you can query which optional arguments are available
</pre>
<div class="Pp"></div>
<i>inspection</i>
<div class="Pp"></div>
<pre>
   - guests with MD devices can be inspected (Matthew Booth)
   - support for GNU/Hurd guests
</pre>
<div class="Pp"></div>
<i>guestfish</i>
<div class="Pp"></div>
<pre>
   - libguestfs events (such as progress bar events and log messages) can
     be trapped and processed by user-defined shell scripts.
   - MD devices are tab-completed (Matthew Booth)
</pre>
<div class="Pp"></div>
<i>virt tools</i>
<div class="Pp"></div>
<pre>
   - New tool virt-format for erasing and making blank disks
   - virt-sparsify new --compress and -o options to allow for compressed
     and different format output
   - virt-sparsify can now detect and sparsify .vdi files
   - virt-sysprep no longer requires xmlstarlet; a new virt-inspector --xpath
     option has been added to replace this functionality
   - virt-rescue has a new --suggest option which suggests mount commands
     for the guest
   - virt-resize no longer requires OCaml pcre library
</pre>
<div class="Pp"></div>
<i>libguestfs live</i>
<div class="Pp"></div>
<pre>
   - daemon will no longer try to edit your live /etc/lvm configuration
   - fix a potential security problem with predictable /tmp names (Steve Kemp)
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
  CVE-2011-4127, RHBZ#757071
  Mitigate possible privilege escalation via SG_IO ioctl
  For more information, see: https://github.com/libguestfs/libguestfs/commit/9a5f784d511a8f00a8386f316eab41fe660430db
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  blkid: print all attributes of a device known to blkid (Wanlong Gao)
  e2fsck: access to more features of e2fsck (Wanlong Gao)
  list-md-devices: list of Linux MD devices (Matthew Booth)
  md-create: create an MD device
  md-detail: returns metadata for an MD device (Matthew Booth)
  md-stop: stop an MD device (Wanlong Gao)
  tune2fs: allow ext2/3/4 filesystems to be tuned
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
  Git hosting has moved to http://github.com/libguestfs
  The various test directories have been rearranged logically, and now
  all appear under 'tests/'.
  There is a 'make extra-tests' rule which runs ordinary tests and
  additional tests, using valgrind to check for memory problems.
  Multiple memory leaks and other problems found by valgrind and fixed.
  Support for optional arguments in the generator has been rewritten
  to provide more features and safety (Matthew Booth).
  With gcc -fvisibility=hidden is used for internal symbols, avoiding
  call indirection via the PLT.
  RHashtable functions can be tested in the generator.
  ADD_ARG macro in daemon allows arg lists to be constructed without
  risk of stack smashing.
  Fix generation of OCaml functions that have more than 10 arguments.
  psmisc has been added to the appliance, allowing use of 'fuser',
  'killall' and 'pstree' for debugging.
  bindtests now cover RBufferOut and optional arguments (Matthew Booth).
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 769680 temporary directories created during appliance builds are not cleaned up on error
 - 761460 guestfs_utimens hangs on named pipes
 - 761451 guestfs_utimens cannot set times on a directory
 - 760775 &quot;guestfish: multi-boot operating systems are not supported by the -i option&quot; should be more explanatory
 - 760669 guestfish copy-in and &lt;! (inline execution) don't mix well: pclose: No child processes
 - 760000 libguestfs fails to compile with Ruby &gt;= 1.9
 - 755729 Error message for resize2fs-M needs tweaking
 - 750889 Python code incompatible with Python v3.
 - 596761 Ctrl-\ causes guestfish to abort
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.14"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.14">RELEASE
  NOTES FOR LIBGUESTFS 1.14</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.12.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<pre>
  Erlang bindings.
  virt-alignment-scan is a new tool to check the alignment of
  partitions within virtual machines or disk images.
  virt-sparsify is a new tool to make virtual machine disk images
  sparse.
  virt-sysprep is a new tool to make cloning guests from a template
  simpler.
</pre>
<div class="Pp"></div>
<i>guestfish</i>
<div class="Pp"></div>
<pre>
   - New commands setenv, unsetenv, to set environment variables.
   - The input file and line number is printed in error messages.
   - guestfish progress bars are now a &quot;mini-library&quot; used by other
     tools too.
</pre>
<div class="Pp"></div>
<i>guestmount</i>
<div class="Pp"></div>
<pre>
   - the --live option (for access to live VMs) now works.
</pre>
<div class="Pp"></div>
<i>virt-cat</i>
<div class="Pp"></div>
<pre>
   - virt-cat can now handle Windows paths and drive letters (RHBZ#693359).
</pre>
<div class="Pp"></div>
<i>virt-filesystems</i>
<div class="Pp"></div>
<pre>
   - the MBR partition type byte is displayed in --long output.
</pre>
<div class="Pp"></div>
<i>virt-make-fs</i>
<div class="Pp"></div>
<pre>
   - virt-make-fs now sets the MBR partition type byte correctly,
     improving compatibility with Windows (RHBZ#746295).
</pre>
<div class="Pp"></div>
<i>virt-resize</i>
<div class="Pp"></div>
<pre>
   - virt-resize can now work with guests using extended and logical
     partitions, in particular Ubuntu guests.
   - virt-resize can now align the first partition of Windows guests,
     improving performance.  The new virt-resize --align-first option
     controls this behaviour.
   - The virt-resize --machine-readable flag makes it possible to use
     virt-resize from other programs.
   - Partitions are now aligned to 128 sectors (usually 64K) by
     default.  This improves efficiency on high-end storage.  The new
     virt-resize --alignment option allows the alignment to be
     adjusted.
</pre>
<div class="Pp"></div>
<i>virt-win-reg</i>
<div class="Pp"></div>
<pre>
   - The syntax for deleting registry keys and values is documented
     in the man page (RHBZ#737944).
</pre>
<div class="Pp"></div>
<i>library</i>
<div class="Pp"></div>
<pre>
   - non-printing characters are escaped correctly in debug output.
   - GUESTFS_EVENT_ENTER is a new event type generated whenever a
     libguestfs function is called.
   - the library contains systemtap/DTrace probes.
   - the library can now be compiled without hivex (RHBZ#723474).
</pre>
<div class="Pp"></div>
<i>inspection</i>
<div class="Pp"></div>
<pre>
   - Improve detection of Windows disks.
   - Adds support for:
         ttylinux - a minimal Linux
         Mageia (thanks Michael Scherer)
         OpenSUSE and zypper (thanks Michael Scherer, Vincent Untz)
         Ubuntu logos (thanks Michael Scherer)
         NetBSD and pkgsrc (thanks Michael Scherer)
   - Handle some guest types that use /dev/root in /etc/fstab.
   - Fix handling of guests with &gt; 26 disks (thanks Matthew Booth)
   - Add support for guests with HP Smart Array disks (thanks Matthew Booth)
</pre>
<div class="Pp"></div>
<i>febootstrap</i>
<div class="Pp"></div>
<pre>
   - FEBOOTSTRAP_KERNEL, FEBOOTSTRAP_MODULES environment variables can
     be set in order to choose which kernel to use for the appliance.
</pre>
<div class="Pp"></div>
<i>misc</i>
<div class="Pp"></div>
<pre>
   - ArchLinux support now working with Linux 3.0 (thanks Erik Nolte)
   - libvirt disks marked &lt;readonly/&gt; are now added readonly when
     using the virt-tools '-d' option.
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
  (no security problems were found or fixed in this release)
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  compress-out, compress-device-out, copy-device-to-device,
  copy-device-to-file, copy-file-to-device, copy-file-to-file,
  get-smp, part-to-partnum, set-smp.
  The mount API no longer implicitly adds -o sync,noatime options.
  add-domain has a new 'readonlydisk' optional parameter to control
  how &lt;readonly/&gt; disks are handled.
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - Coverity was run on the source and more bugs were identified and
   fixed.
 - PCRE library is now required to build libguestfs.
 - APIC is now the default for the appliance.  You can also enable
   SMP support in the appliance.
 - OCaml bindings now correctly acquire GC lock during callbacks.
 - Out of tree builds should now work correctly (thanks Hilko Bengen).
 - ./configure --with-extra=&quot;...&quot; can be used by packagers to set
   the extra version string.
 - zero, zero-device APIs: if the blocks already contain zeroes,
   don't write zeroes, so that we don't unnecessarily make the
   underlying storage non-sparse.
 - is-zero, is-zero-device APIs: optimize these so zero detection is
   faster.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 748266 libguestfs should detect versions of qemu which require -machine pc option
 - 747290 libguestfs ignores &lt;readonly/&gt; in libvirt XML
 - 747287 Misleading error message when permission denied opening a disk image
 - 746295 virt-make-fs doesn't set partition ID
 - 744795 guestmount --live is not usable
 - 737944 virt-win-reg hyphen (delete key) syntax may be wrong, and is not documented
 - 733297 ruby event handlers fail with &quot;exception in callback: wrong argument type Proc (expected Data)&quot;
 - 731744 libguestfs should escape special/non-printing characters in debug output
 - 729887 appliance crashes running aug_init with flags=4
 - 729075 libguestfs confuses Hp_recovery partition with Windows root filesystem
 - 727178 error: luks_open: cryptsetup: error while loading shared libraries: libfipscheck.so.1: cannot open shared object file: No such file or directory
 - 726739 libguestfs: error: aug_get: no matching node, trying to find hostname
 - 723474 If hivex and/or pcre not installed, libguestfs fails to compile
 - 693359 virt-cat and virt-edit don't handle case sensitive NTFS paths properly
 - 678231 virt-inspector reports unknown filesystem UUID
 - 671082 libguestfs does not work with kernel-rt
 - 666578 libguestfs: unknown filesystem label SWAP-sda2
 - 642821 virt-resize falls over on a disk image with a logical swap partition
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.12"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.12">RELEASE
  NOTES FOR LIBGUESTFS 1.12</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.10.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<i>guestfish</i>
<div class="Pp"></div>
<pre>
   - guestfish strings can use escapes,
     eg. &gt;&lt;fs&gt; write /foo &quot;line 1\nline 2\n&quot;
   - guestfish write-append command can be used to append to files.
   - Long-running file uploads and downloads can be cancelled through the
     API or by hitting ^C in guestfish.
   - New guestfish &quot;display&quot; command for displaying graphical files
     inside guests.
   - In guestfish, tab completion now works on /dev/mapper devices.
</pre>
<div class="Pp"></div>
<i>virt-inspector</i>
<div class="Pp"></div>
<pre>
   - Inspection API can get an icon or logo for certain guests.
   - virt-inspector includes the logo and hostname for certain guests.
   - virt-inspector can now get the version and release numbers for RPM
     packages.
   - CentOS and Scientific Linux are now treated as separate distros by
     the inspection API.
</pre>
<div class="Pp"></div>
<i>virt-resize</i>
<div class="Pp"></div>
<pre>
   - virt-resize can now handle btrfs.
   - New virt-resize --ntfsresize-force option allows Windows VMs to be
     resized multiple times.
</pre>
<div class="Pp"></div>
<i>other virt tools</i>
<div class="Pp"></div>
<pre>
   - guestfish, guestmount, virt-cat, virt-df, virt-edit, virt-filesystems,
     virt-inspector, virt-ls and virt-rescue now allow you to use
     &quot;-d UUID&quot; option to specify a guest by UUID.  This makes them more
     robust to use from other programs.
   - virt-ls -lR option allows complex file iteration and guest analysis.
   - virt-win-reg supports HKEY_USERS\&lt;SID&gt; and HKEY_USERS\&lt;username&gt;.
   - virt-win-reg new option --unsafe-printable-strings allows printable
     strings to be displayed in the output (unsafely: read the documentation
     before using).
   - virt-edit has been rewritten in C.
</pre>
<div class="Pp"></div>
<i>API and language bindings</i>
<div class="Pp"></div>
<pre>
   - Java is now completely supported.
     See http://libguestfs.org/guestfs-java.3.html
   - JRuby is supported via the Java bindings.
   - guestfs_close now appears in trace messages.
   - Python binding adds explicit g.close() method.
   - Python programs can now use the new event API.
   - Python GIL is released during libguestfs calls, allowing multithreaded
     Python programs to work properly.
   - 9pfs (Plan 9 filesystems exported from the host) are now supported.
   - Add -DGUESTFS_WARN_DEPRECATED=1 to warn about use of deprecated API
     functions in C programs.
   - New manual page guestfs-recipes(1) with recipes.
   - mkfs-opts can now set inode size and sector size on created filesystems
     (thanks Nikita Menkovich).
   - guestfs_last_errno is now accessible from OCaml (as g#last_errno ()).
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
 - optargs_bitmask is checked even for calls that have no optional
   arguments.  This closes a possible exploit in the daemon from
   untrusted callers.
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  btrfs-filesystem-resize, get-pgroup, inspect-get-icon, is-zero,
  is-zero-device, list-9p, list-dm-devices, mount-9p, ntfsresize-opts,
  set-pgroup, write-append
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - Coverity (a static analysis tool) was run across the codebase and
   many fixes were made.
 - Generator can handle functions that return RBufferOut and have
   optional arguments.
 - Compatible with Perl 5.14.
 - Compatible with gcc 4.6.
 - Perform safety checks on QEMU.
 - C API tests can now fully test calls that have optional arguments.
 - Use ./configure --enable-install-daemon to install /usr/sbin/guestfsd.
 - po-docs directory now covers all man pages.
 - stderr from qemu process is now captured by the event subsystem.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 602997 part-get-bootable gives wrong result with an unordered part layout
 - 661280 virt-rescue: panic when shutting down: &quot;/sbin/reboot: No such file or directory&quot;
 - 700369 qemu-system-x86_64 says 'KVM not supported for this target'
 - 705200 guestmount attempt results in access denied
 - 714981 'list-filesystems' does not know about virtio 9p filesystems or detect existing mounts
 - 717786 libguestfs python bindings should have an explicit close call
 - 721275 virt-resize in F16 should support btrfs
</pre>
<h1 class="Sh" title="Sh" id="Release_notes_for_libguestfs_1.10.0"><a class="selflink" href="#Release_notes_for_libguestfs_1.10.0">Release
  notes for libguestfs 1.10.0</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.8.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<pre>
 - libguestfs and tools can be used against live virtual machines.
   See the 'guestfish --live' and 'guestmount --live' options, and (for
   the low-level interface) the new APIs set-attach-method and
   get-attach-method.
 - New virt tools:
   virt-copy-in, virt-copy-out, virt-tar-in, virt-tar-out.
 - libguestfs can get the drive letter mappings for Windows guests.
 - virt-inspector displays drive letter mappings for Windows guests.
 - Drive letters can now be used in virt-edit and guestfish programs
   when operating on Windows guests.
 - virt-resize now works on 32 bit hosts.
 - You can now inspect the install disks and live CDs of many different
   operating systems.
 - guestfish &lt;! cmd which executes a shell cmd and inlines the result.
 - guestfish, guestmount, virt-rescue now all support --ro and --rw
   options, and the default for this can be chosen via a configuration
   file (/etc/libguestfs-tools.conf).
 - New event API allows more than one callback to be registered for
   each event, makes it possible to call the API from other languages,
   and allows nearly all log, debug and trace messages to be rerouted
   from stderr.
 - Greater FHS compliance for temporary files, including using /var/tmp
   for large cached files that should survive reboot (instead of /tmp).
 - guestfish, guestmount -m option allows mount options to be passed
   through to the underlying filesystem.
 - mkfs-opts allows filesystem features to be specified.
 - More intelligent handling of mountpoints, allowing mkmountpoint, mount
   and umount-all commands to work together properly.
 - Trace messages are prefixed with a distinct string, allowing them to
   be easily 'grepped' out from debug output.
 - guestfs_launch (guestfish 'run' command) now produces progress
   messages (a guestfish progress bar) if it takes longer than 5
   seconds to run.
 - Several long-running commands where we are unable to estimate time
   to completion generate &quot;pulse mode&quot; progress events.  Progress bar
   in guestfish has been updated to display these.
 - Publish new example code in: C, Perl, Python, OCaml, Ruby.
 - New virt-dhcp-address example program.
 - The Java and Ruby bindings have been improved greatly.
 - Perl includes a way to get the errno of the last error.
 - Python bindings now compatible with rpyc (thanks Erez Shinan).
 - Transifex is now being used to manage translations.
   http://www.transifex.net/projects/p/libguestfs/
 - Inspection now supports Red Hat Desktop, Slackware distributions.
 - Inspection no longer fails for Windows guests that have two or
   more disks.
 - Inspection can now tell the difference between Windows 2008 Server
   and Windows 7.
 - Inspection can detect 32 bit applications installed in 64 bit
   Windows, running on the WOW64 emulator.
 - A series of protocol fixes has fixed the old bug RHBZ#576879
   which used to cause errors during the upload command to lose
   protocol synchronization.
 - New logo!
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
  [none]
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  first-private, get-attach-method, inspect-get-drive-mappings,
  inspect-get-product-variant,
  inspect-get-windows-current-control-set, next-private, resize2fs-M,
  set-attach-method.
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - The 'HACKING' file is obsolete.  The contents have been moved into
   a section of the guestfs(3) manual page.
 - libguestfs-test-tool simplified.  It no longer needs the static
   binary or tries to construct an ISO.
 - rpcgen-generated files are compiled with -fno-strict-aliasing
   which should be safer (thanks Matt Booth).
 - virt-resize was rewritten in OCaml.
 - guestfish and other tools tested with valgrind; some memory leaks
   were fixed.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 502533 Updated Polish translation of libguestfs
 - 576879 libguestfs protocol loses synchronization if you 'upload' before mounting disks
 - 599503 document that mkmountpoint and umount-all cannot be mixed
 - 617440 guestfish: fails to tilde expand '~' when the $HOME env is unset
 - 664558 RFE: Allow to set log callback in Ruby bindings
 - 665358 Punjabi Translation Completed (pa_IN)
 - 666577 libguestfs: unknown filesystem /dev/fd0
 - 667610 Multiple bugs, memory leaks in libguestfs ruby bindings
 - 668112 virt-filesystems command fails on guest with corrupt filesystem label
 - 668574 guestfish -i is trying to mount all mounts from /etc/fstab and fails with an error when device doesn't exists
 - 673479 Add a grep-friendly string to LIBGUESTFS_TRACE output
 - 674130 Inspection code fails for Windows guest with two disks
 - 682756 libguestfs trace segfaults when list-filesystems returns error
 - 682979 libguestfs incorrectly detects Red Hat desktop as 'redhat-based' instead of 'redhat'
 - 690819 mkfs fails creating a filesystem on a disk device when using a disk with 'ide' interface
 - 691389 Extended attributes don't work over guestmount (FUSE)
 - 691724 virt-inspector reports unknown filesystem /dev/vda1
 - 692545 inspect-list-applications fails to detect 32 bit apps installed under WOW64 emulator on 64 bit Windows
 - 693324 sfdisk's python interface only accepts lists of type 'list' for the lines parameter
</pre>
<h1 class="Sh" title="Sh" id="Release_notes_for_libguestfs_1.8"><a class="selflink" href="#Release_notes_for_libguestfs_1.8">Release
  notes for libguestfs 1.8</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.6.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<pre>
 - Support and packages for Debian and Ubuntu.
 - Daily builds from git repository on Debian and Ubuntu to reduce risk
   of regressions.
 - Port to ArchLinux 'pacman' (thanks Thomas S Hatch).
 - The following tools have been rewritten in C (originally in Perl):
     . virt-cat
     . virt-df
     . virt-inspector
     . virt-ls
     . virt-rescue
 - Some C tools support encrypted guests automatically.  This is
   supported in: guestfish, guestmount, virt-cat, virt-inspector,
   virt-ls.
 - New tool virt-filesystems (in C) which is a replacement for
   virt-list-filesystems and virt-list-partitions, and has a superset
   of the functionality of those tools.
 - guestfish, guestmount and the C tools use unified command line option
   parsing, so they support many common options such as '-a disk.img',
   '-d libvirt-domain', '-x', '-v'.  The old command line option
   parsing is preserved for compatibility in scripts etc.
 - guestfish no longer has any dependencies on Perl
 - New man pages containing programming examples: guestfs-examples(3) (C/C++),
   guestfs-ocaml(3), guestfs-python(3), guestfs-ruby(3).
 - Trace mode prints return values from API functions.
 - virt-inspector can list applications installed in Windows guests, along
   with a great deal of information about those applications.
 - Add support for inspecting: Linux Mint, Mandriva, FreeBSD.
 - guestfish --rw option (with no effect currently) to make potentially
   dangerous write access explicit.
 - guestfish --listen --csh for compatibility with csh, tcsh (thanks
   Eric Blake).
 - The first upstream version that introduced each API function is now
   documented in guestfs(3).
 - guestfs_last_errno allows you to retrieve the errno from the
   daemon, correctly translated to the local operating system.
 - Functions can now have optional parameters.
 - Progress bars and progress notifications can now happen for upload
   commands.
 - Appliance builder more careful about not leaving temporary files
   around in /tmp.
 - getfattr/setfattr commands added to virt-rescue.
 - ROADMAP file covers roadmap and goals for future releases.
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
 - New SECURITY section in guestfs(3) API documentation.
 - virt-inspector no longer runs any guest commands.
 - Inspection code is more careful about avoiding very large files
   from guests which might previously have caused a denial of service.
 - FUSE calls into guestmount are now traced when using guestmount -x.
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
 - add-domain
 - add-drive-opts
 - getxattr
 - inspect-get-hostname
 - inspect-get-package-format
 - inspect-get-package-management
 - inspect-get-roots
 - inspect-list-applications
 - lgetxattr
 - mkfs-opts
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - C programs now only link precisely with the libraries that they use.
 - PCRE, libmagic, hivex and libvirt libraries are now completely
   optional for building.
 - Multiple memory leaks and file descriptor leaks fixed.
 - Add a POD wrapper to unify generation of man pages and HTML files
   across all programs.
 - Source includes phony images of Fedora, Debian, Ubuntu and
   Windows guests.
 - Ruby bindings have 'make install' rule.
 - &lt;guestfs.h&gt; is now a single file.
 - &lt;guestfs.h&gt; does not require XDR headers.
 - ocaml xml-light library is no longer required to build (thanks
   Maxim Koltsov).
 - ./configure --disable-[...] for each language binding (thanks
   Maxim Koltsov).
 - Old ocaml-viewer program removed (use guestfs-browser instead).
 - New C API test type 'InitScratchFS' makes the tests run a little
   more quickly.
 - Excluded packages in the appliance are now listed in a separate
   file appliance/excludelist.in, and can be customized per-distro.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 663407 readlink and readlinklist returns /sysroot/ in some paths
 - 661280 virt-rescue: panic when shutting down: &quot;/sbin/reboot: No such file or directory&quot;
 - 657499 checksum: wrong check sum type causes umount to fail
 - 655554 Whole disk paths are not made canonical by virt-inspector
 - 654638 openssl updated to 1.0.0b libguestfs depends on exact file names
 - 652796 ruby bindings not installed by 'make install', hence omitted from the binary distribution
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.6"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.6">RELEASE
  NOTES FOR LIBGUESTFS 1.6</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.4.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<pre>
 - Use a new method for creating and caching the appliance.  This
   greatly improves the performance of libguestfs, often by a factor
   of x 4 to x 5.
 - Support for guest inspection (like virt-inspector) via the ordinary
   API and all language bindings.  'guestfish -i' option is as a side-
   effect much quicker.
 - virt-inspector and core inspection API can now detect guests running:
   Fedora, Debian, Ubuntu, Windows, Red Hat Enterprise Linux, CentOS,
   Scientific Linux, Gentoo, Pardus, Arch Linux, MeeGo.
 - Support for LUKS whole-disk encryption in guests.
 - PHP bindings.
 - Progress messages (and progress bars in guestfish and virt-resize)
   for certain long-running operations.
 - virt-df is now much more efficient.  Use '--one-per-guest' to restore
   the old per-guest isolation behaviour.
 - guestfish 'copy-in' and 'copy-out' commands for copying files and
   directories recursively in and out of the guest.
 - guestfish 'hexedit' command for doing binary edits to devices and
   files.
 - Change guestfish -i syntax to allow commands to be specified on the
   command line (retaining backwards compatibility).
 - guestfish '-d &lt;domain&gt;' for adding disks from libvirt domains.
 - guestfish '-N' option supports several new prepared disk image types:
         lvfs : disk with LV formatted with filesystem
           lv : disk with LV
     bootroot : boot+root
   bootrootlv : boot and root on LV
 - guestfish 'more' and 'edit' commands now work with arbitrary files.
 - guestfish '--echo-keys' option allows you to echo keys/passphrases
   while typing them.
 - guestmount now supports -a / -d / -i options, like guestfish.
 - Use virtio-serial for communications with the appliance.  This
   also has a major performance benefit.
 - virt-edit '-b' option to create a backup of edited files.
 - virt-edit '-e' option for non-interactive edits to files.
 - Ability to capture core dumps from the appliance (thanks Matthew Booth).
 - virt-rescue now shuts down cleanly (thanks Matthew Booth).
 - virt-rescue now has a --network option to enable network access.
 - virt-resize can now handle guests which use GPT partition table format.
 - virt-resize has better support for shrinking guests.
 - virt-resize supports qcow2-format guests.
 - $TMPDIR can be used to override almost all temporary directory usage.
 - OCaml users can use an alternate OO-style of coding, eg. g#launch ()
 - The API supports calls which take optional parameters, eg.
     $g-&gt;add_drive_opts (&quot;disk&quot;, readonly =&gt; 1);
 - Trace output now escapes and shortens large strings (thanks
   Matthew Booth).
 - Autosync is now on by default, resulting in more reliable behaviour
   when the handle is closed.
 - virt-df --uuid option allows you to follow a domain across migration
   and renaming.
 - Translations of manual pages.
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
 - CVE-2010-3851 libguestfs: missing disk format specifier when adding a disk
   https://www.redhat.com/archives/libguestfs/2010-October/msg00036.html
   This is comprehensively fixed in this release, and the fix will be
   backported to the other stable branches after more testing.
 - virt-inspector no longer relies on untrusted guest code to list
   applications in some guests.
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
  download-offset, file-architecture, findfs-label, findfs-uuid,
  inspect-os, inspect-get-arch, inspect-get-distro,
  inspect-get-filesystems, inspect-get-major-version,
  inspect-get-minor-version, inspect-get-mountpoints,
  inspect-get-product-name, inspect-get-type, is-blockdev, is-chardev,
  is-fifo, is-lv, is-socket, is-symlink, list-filesystems, luks-add-key,
  luks-close, luks-format, luks-format-cipher, luks-kill-slot,
  luks-open, luks-open-ro, lvm-clear-filter, lvm-canonical-lv-name,
  lvm-set-filter, part-to-dev, pread-device, pwrite-device,
  upload-offset
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - Use size_t for loop iterators.
 - Refactor the library code into separate files.
 - Refactor the generator code into separate files.
 - Generate guestfish commands.
 - guestfish &amp; guestmount options processing is unified.
 - Protocol changes:
     error message size increased to 64K
     send errno to library
 - Add 'make bindist' to make a binary distribution.
 - Cleaner behaviour under valgrind.
 - More testing of the guestfish command line options and libvirt
   integration.
 - The Perl inspection code is no longer used by any of the tools.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 646822 libguestfs trace mode should not print long binary strings
 - 646821 virt-df should have --uuid option
 - 646432 /dev/mapper paths should not be returned from guestfs_mountpoints
 - 643624 libguestfs tools documentation should describe how to quote guest domain names from shell
 - 642934 No way to specify disk format when adding a disk to libguestfs
 - 642933 guestfs_list_filesystems should be used in all possible places
 - 642932 guestmount options should match guestfish options
 - 642930 virt-inspector (Sys::Guestfs::Lib) should use C inspection APIs
 - 642929 C inspection code should ignore /dev/fd* in /etc/fstab
 - 642826 virt-resize converts any other image format to raw without notifying user, instructions do not account for this
 - 640961 Document that grub-install might be needed for old Linux guests after virt-resize
 - 639986 virt-df --csv does not properly quote &quot; in libvirt domain names
 - 639405 Interrupted cached appliance creation leaves libguestfs unusable
 - 638901 Appliance filename should not contain repository name
 - 638899 /dev/mapper paths should not be returned from C inspection APIs
 - 636918 Updates to Spanish translation
 - 636061 [abrt] guestfish-1.2.11-1.fc12: malloc_consolidate: Process /usr/bin/guestfish was killed by signal 11 (SIGSEGV)
 - 635969 glob echo mkfs ext2 /dev/vd[b-t]1 prints garbage
 - 634246 guestfs_part_get_parttype returns &quot;loop&quot; when run against a partition, LV or filesystem
 - 633766 virt-resize --shrink fails
 - 633357 Updates to Spanish translation
 - 633096 virt-resize calculates block device size incorrectly, doesn't work with qcow2 target
 - 629593 Dutch translation added
 - 627556 Updates to Spanish translations of libguestfs
 - 626843 Updates to Spanish translations
 - 619793 [RFE] Need a way to determine if a particular block device is a logical volume
 - 618556 virt-rescue return none zero value when exit
 - 617200 mount operation failed and hung on some images which running in read-only mode
 - 610880 libguestfs should set broader read perms on tmpdir, so works in some situations when executed with umask 077
 - 599503 document that mkmountpoint and umount-all cannot be mixed
 - 571714 Running virt-df on disk image relabels it, so qemu can no longer write to it.
 - 502533 Updated Polish translation of libguestfs
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_LIBGUESTFS_1.4"><a class="selflink" href="#RELEASE_NOTES_FOR_LIBGUESTFS_1.4">RELEASE
  NOTES FOR LIBGUESTFS 1.4</a></h1>
These release notes only cover the differences from the previous stable/dev
  branch split (1.2.0). For detailed changelogs, please see the git repository,
  or the ChangeLog file distributed in the tarball.
<h2 class="Ss" title="Ss" id="New_features"><a class="selflink" href="#New_features">New
  features</a></h2>
<pre>
 - guestfish lets you choose a prepared disk image, eg:
     guestfish -N fs:ext4
 - Add write support to guestmount (FUSE) module.
 - virt-resize can now resize the content of partitions and logical
   volumes in the guest, and we have better support for shrinking guests.
 - Bash tab-completion script for guestfish.
 - Add ZFS support to virt-rescue.
 - New tool 'virt-make-fs' for creating filesystems with content.
 - Allow suffixes on any guestfish number parameter, eg. &quot;1M&quot;.
 - guestfish 'man' command opens the manual page.
 - guestfish supports a &quot;heredoc&quot; syntax for uploading files:
     upload -&lt;&lt;_end_ /foo
     content
     _end_
 - Some guestfish commands now print their output in octal or hex
   where appropriate (RHBZ#583242).
 - Allow dash prefix on guestfish command line.  This ignores any
   error from the second command:                   (RHBZ#578407)
     guestfish -- cmd1 : -cmd2 : cmd3
 - guestfish -h / help command now returns an error for non-existent
   commands (RHBZ#597145).
 - New 'supported' command in guestfish to list optional groups of
   commands which are supported by the daemon / configuration.
 - virt-inspector and guestfish -i now work for filenames which
   contain spaces (RHBZ#507810).
 - Change the protocol to use link-local addresses, to avoid
   conflicting with any address that the host might be using
   (RHBZ#588763).
 - libguestfs now sets the correct time and timezone on filesystem
   modifications.
 - Sort the domains into alphabetical order in virt-df.
 - Make mkfs-b command work for FAT and NTFS by mapping the blocksize
   parameter to the cluster size (RHBZ#599464).
 - Add version numbers to Perl modules (RHBZ#521674).
 - Localization now works for all the libguestfs tools (RHBZ#559963).
 - Tools now support filesystem-on-image VMs (RHBZ#590167).
 - virt-list-partitions has a '-t' option to show the total size of disks.
 - Include extra Augeas lenses in the supermin appliance (Matthew Booth).
 - Add error and close callbacks.
 - Add explicit close method in the Perl API.
 - Multiple fixes for RHEL 5 compatibility.
 - Multiple fixes for Debian/Ubuntu compatibility.
 - Multiple revisions to improve the documentation.
</pre>
<h2 class="Ss" title="Ss" id="Security"><a class="selflink" href="#Security">Security</a></h2>
<pre>
 - Fix a potential DoS in virt-inspector and virt-v2v if a specially
   crafted disk image contained a char device in place of one of the
   configuration files that we read under /etc (RHBZ#582484).
</pre>
<h2 class="Ss" title="Ss" id="New_APIs"><a class="selflink" href="#New_APIs">New
  APIs</a></h2>
<pre>
 - aug-clear - clear Augeas path
 - available-all-groups - return a list of all optional groups
 - base64-in - upload base64-encoded data to file
 - base64-out - download file and encode as base64
 - checksum-device - compute checksums on the contents of a device
 - checksums-out - compute checksums of multiple files in a directory
 - debug-upload - upload a file to the appliance
 - fallocate64 - preallocate a file in the guest filesystem
 - fill-pattern - fill a file with a repeating pattern of bytes
 - get-umask - get the current umask
 - lvresize-free - expand an LV to fill free space
 - ntfsresize - resize an NTFS filesystem
 - ntfsresize-size - resize an NTFS filesystem (with size)
 - part-del - delete a partition
 - part-get-bootable - get the bootable flag of a partition
 - part-get-mbr-id - get the MBR type byte of a partition
 - part-set-mbr-id - set the MBR type byte of a partition
 - pvresize-size - resize a physical volume (with size)
 - pwrite - write to part of a file
 - resize2fs-size - resize an ext2/3/4 filesystem (with size)
 - txz-in - unpack compressed tarball to directory (RHBZ#580556)
 - txz-out - pack directory into compressed tarball (RHBZ#580556)
 - vfs-label - get the filesystem label
 - vfs-uuid - get the filesystem UUID
 - vgscan - rescan for LVM physical volumes, volume groups and logical volumes
 - write - create a new file
 - zero-device - write zeroes to an entire device
</pre>
<h2 class="Ss" title="Ss" id="Internals"><a class="selflink" href="#Internals">Internals</a></h2>
<pre>
 - Extend the generator to support testing optional features.
 - Stricter checks on input parameters to many calls (RHBZ#501893 RHBZ#501894)
 - Extend the protocol to support sending arbitrary 8 bit data buffers.
 - Ship 'BUGS' file with releases.  This is a summary of the bugs in
   the Red Hat Bugzilla database.
 - Ship 'RELEASE-NOTES' file with releases, containing release notes.
 - Unify supermin appliance building into one place, in febootstrap 2.7.
 - Fix the protocol code to handle the case where both ends send cancel
   messages at the same time.
</pre>
<h2 class="Ss" title="Ss" id="Bugs_fixed"><a class="selflink" href="#Bugs_fixed">Bugs
  fixed</a></h2>
<pre>
 - 612178 guestfish: using -m option in conjunction with --listen option causes appliance to die
 - 610880 libguestfs should set broader read perms on tmpdir, so works in some situations when executed with umask 077
 - 604691 OCaml bindings are not thread safe
 - 603870 Updates to Spanish translation
 - 602592 [RFE] expose guestfs_close in perl bindings
 - 600977 virt-df -h --csv &quot;Argument .. isn't numeric in printf&quot;
 - 599464 mkfs-b does not support vfat/ntfs
 - 598807 add_cdrom does not work in RHEL 6
 - 598309 part-list and several other cmd failed on libguestfs on RHEL5
 - 597145 guestfish 'help' command should indicate error in exit status with an unknown command
 - 597135 guestfish write-file cmd does not check &quot;size&quot; parameter
 - 597118 A warning should be given in the help of mke2journal-L for the length of label
 - 597112 get-e2uuid should use blkid instead of &quot;tune2fs -l&quot; to get filesystem UUID
 - 596776 virt-inspector doesn't discover modprobe aliases on RHEL 3 guests
 - 596763 Updates to Spanish translation
 - 593292 Updates to Spanish translation
 - 592883 can not edit files on  images mounted with guestmount cmd
 - 592360 Updates to Spanish translation
 - 591250 virt-tar prints &quot;tar_in: tar subcommand failed on directory&quot; if the archive is compressed or not in the right format
 - 591155 virt-tar prints &quot;tar_in: tar subcommand failed on directory&quot; if a disk image is not writable
 - 591142 virt-inspector should give an error for unrecognized disk images
 - 590167 virt-inspector and other virt tools should be able to handle filesystem-on-image VMs
 - 589039 guestfish read-file cmd will cause daemon hang when read large files
 - 588851 guestfs_launch() returns -1, but guestfs_last_error() == NULL
 - 588763 libguestfs should use non-public or link-local addresses for appliance network
 - 588733 Updates to Spanish translation
 - 588651 guestfish 'strings-e' cmd does not give proper error message or hint
 - 587484 lvresize can't reduce size of a volumn
 - 585961 Updates to Spanish translation
 - 585223 ntfsresize should support shrinking filesystems
 - 585222 pvresize should support shrinking PVs
 - 585221 resize2fs should support shrinking filesystems
 - 584038 Updates to Spanish translation
 - 583554 [FEAT] mknod-mode command is needed to set mode explicitly
 - 583242 [RFE] guestfish should print outputs in a suitable base (eg. octal for modes)
 - 582993 guestfish eats words when tab completing case (in)sensitive paths
 - 582953 Misleading help information about lvcreate command
 - 582948 mknod command doesn't make block, character or FIFO devices
 - 582929 mknod doesn't check for invalid mode
 - 582901 guestfish chmod/umask commands do not check invalid mode value
 - 582899 guestfish:sparse is missed from command autocomplete list
 - 582891 [Feature Request] behavior and return value of guestfish umask cmd should be changed
 - 582548 [mknod] umask shouldn't take effect when mode is set explicitly
 - 582484 some guestfish sub commands can not handle special files properly
 - 582252 Updates to Spanish translation
 - 581501 Updates to Spanish translation
 - 580650 virt-inspector warns &quot;No grub default specified at /usr/lib/perl5/Sys/Guestfs/Lib.pm at [...]&quot;
 - 580556 request for libguestfs to support .txz tarballs
 - 580246 tar-in command hangs if uploading more than available space
 - 580016 aug-ls in guestfish does not take augeas variable as argument
 - 579664 guestfish doesn't report error when there is not enough space for image allocation
 - 579608 multiple commands in guestfish can not work for symbol links
 - 579155 libguestfs hangs if qemu doesn't start (in null vmchannel mode)
 - 578407 the prefix '-' in sub-command isn't handled by guestfish in remote control mode
 - 576879 libguestfs protocol loses synchronization if you 'upload' before mounting disks
 - 559963 libguestfs Perl programs do set locale, but still localization doesn't work
 - 521674 Perl modules are unversioned, but should carry version numbers
 - 516096 Race condition in test_swapon_label_0: /sbin/blockdev: BLKRRPART: Device or resource busy
 - 507810 guestfish -i / virt-inspector cannot handle spaces in filenames
 - 502533 Updated Polish translation of libguestfs
 - 501894 Some String parameters should be OptString
 - 501893 String parameters should be checked for != NULL
 - 501889 write-file does not support strings containing ASCII NUL
 - 484986 grub-install fails on virtio disk
</pre>
<h1 class="Sh" title="Sh" id="RELEASE_NOTES_FOR_HISTORICAL_VERSIONS_OF_LIBGUESTFS"><a class="selflink" href="#RELEASE_NOTES_FOR_HISTORICAL_VERSIONS_OF_LIBGUESTFS">RELEASE
  NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS</a></h1>
Before 2010 libguestfs did not have official release notes or a formalized
  version numbering system. However these are links to historically significant
  versions.
<dl class="Bl-tag">
  <dt class="It-tag">2009-11-10 (1.0.78)</dt>
  <dd class="It-tag">https://www.redhat.com/archives/libguestfs/2009-November/msg00095.html</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2009-09-13 (1.0.67)</dt>
  <dd class="It-tag">https://www.redhat.com/archives/libguestfs/2009-August/msg00281.html</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2009-07-23 (1.0.64)</dt>
  <dd class="It-tag">https://www.redhat.com/archives/libguestfs/2009-July/msg00059.html</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2009-07-14 (1.0.59)</dt>
  <dd class="It-tag">https://www.redhat.com/archives/libguestfs/2009-July/msg00023.html</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2009-04-01 (the initial announcement)</dt>
  <dd class="It-tag">http://rwmj.wordpress.com/2009/04/01/libguestfs-access-and-modify-virtual-machine-disk-images/</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>guestfs-examples</i>(1), <i>guestfs-faq</i>(1),
  <i>guestfs-performance</i>(1), <i>guestfs-recipes</i>(1),
  <i>guestfs-testing</i>(1), <i>guestfs</i>(3), <i>guestfish</i>(1),
  http://libguestfs.org/
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Richard W.M. Jones
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2009-2016 Red Hat Inc.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; either version 2 of the License, or (at your option) any later
  version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 51 Franklin
  Street, Fifth Floor, Boston, MA 02110-1301 USA.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
To get a list of bugs against libguestfs, use this link:
  https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools
<div class="Pp"></div>
To report a new bug against libguestfs, use this link:
  https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools
<div class="Pp"></div>
When reporting a bug, please supply:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The version of libguestfs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Where you got libguestfs (eg. which Linux distro, compiled
      from source, etc)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Describe the bug accurately and give a way to reproduce
    it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Run <i>libguestfs-test-tool</i>(1) and paste the
      <b>complete, unedited</b> output into the bug report.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-08-08</td>
    <td class="foot-os">libguestfs-1.32.7</td>
  </tr>
</table>
</body>
</html>
