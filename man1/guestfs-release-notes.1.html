<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:16:03 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>guestfs-release-notes(1) Virtualization Support
guestfs-release-notes(1)</p>

<p style="margin-top: 1em">NAME <br>
guestfs-release-notes - libguestfs Release Notes</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.32 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.30.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
New tools</p>

<p style="margin-top: 1em">The new
virt-v2v-copy-to-local(1) tool is an ancillary tool for
virt-v2v(1) allowing you to convert source guests that
virt-v2v is unable to access directly.</p>

<p style="margin-top: 1em">New features in existing
tools</p>

<p style="margin-top: 1em">Virt-customize knows how to
write a random seed to CirrOS (Pino Toscano).</p>

<p style="margin-top: 1em">On Fedora, virt-customize runs
dnf(8) with the --best flag, ensuring it always updates to
the latest available packages.</p>

<p style="margin-top: 1em">Virt-builder now provides 32 bit
Fedora templates.</p>

<p style="margin-top: 1em">Virt-builder and virt-customize
--install option now works on 32 bit Fedora guests.
Previously it would try to install 64 bit packages (Jan
Sedl&Atilde;&iexcl;k).</p>

<p style="margin-top: 1em">Virt-builder can now fetch cloud
images using Simple Streams v1.0 metadata (Pino
Toscano).</p>

<p style="margin-top: 1em">Virt-builder can now fetch
openSUSE cloud images out of the box (C&Atilde;&copy;dric
Bosdonnat).</p>

<p style="margin-top: 1em">Virt-customize will now use
stronger (SHA-512) encrypted passwords by default on
openSUSE &acirc;&yen; 11 (Pino Toscano).</p>

<p style="margin-top: 1em">Virt-builder will now correctly
handle output filenames containing colon characters
(&quot;:&quot;), and will create temporary files in the
libguestfs cache directory instead of defaulting <br>
to /tmp (Pino Toscano).</p>

<p style="margin-top: 1em">Virt-resize has a new
--unknown-filesystems option to control what to do when
asked to resize a filesystem that libguestfs doesn&rsquo;t
know how to resize.</p>

<p style="margin-top: 1em">Virt-v2v now has an --in-place
flag/mode, allowing in-place conversion of guests (Roman
Kagan).</p>

<p style="margin-top: 1em">Virt-v2v has a --compressed
option for creating compressed qcow2 output files.</p>

<p style="margin-top: 1em">Virt-v2v can now correctly get
the VMware datacenter path (dcPath) from libvirt, instead of
having to calculate it using an algorithm that occasionally
got the wrong answer <br>
(Matthias Bolte, Tingting Zheng).</p>

<p style="margin-top: 1em">Virt-v2v now processes RAM sizes
correctly for 64 bit guests when running on a 32 bit
host.</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">In Perl and Python programs, the
&quot;get_program_name&quot; API now returns the true
program name, instead of the incorrect string
&quot;perl&quot; or &quot;python&quot;.</p>

<p style="margin-top: 1em">The Python bindings can now be
compiled against a different version of libguestfs, allowing
the pip module to be built against any version of libguestfs
(instead of requiring the <br>
pip module and libguestfs to have exactly the same
version).</p>

<p style="margin-top: 1em">The quality of the Ruby rdoc
(documentation) has been improved (Pino Toscano).</p>

<p style="margin-top: 1em">Perl scripts no longer hard-code
the location of perl in the shebang line, but use env(1) to
locate it instead (Pino Toscano).</p>

<p style="margin-top: 1em">In OCaml programs, the guestfs
handle was incorrectly made into a global root, meaning it
could never be garbage collected. If you didn&rsquo;t call
the &quot;close&quot; function explicitly, <br>
the handle would not be closed until the whole program
exited. This has now been fixed so handles will be garbage
collected in the usual way. This changes the API of the
OCaml <br>
function &quot;Guestfs.event_callback&quot;. Note that non-C
language bindings are not covered by the libguestfs API/ABI
guarantee, although we try hard not to change them, but in
this <br>
case it was essential in order to fix this very serious
bug.</p>

<p style="margin-top: 1em">Inspection</p>

<p style="margin-top: 1em">Alpine Linux and the APK package
manager, ALT Linux, Frugalware, and PLD Linux are now
recognized (Pino Toscano).</p>

<p style="margin-top: 1em">If it exists, /etc/os-release
will be preferred for inspecting Linux guests (Pino
Toscano).</p>

<p style="margin-top: 1em">The correct kernel version is
returned for Windows guests &acirc;&yen; 10.</p>

<p style="margin-top: 1em">Documentation</p>

<p style="margin-top: 1em">The large guestfs(3) man page
has been split into several separate man pages:
guestfs-hacking(1) guestfs-internals(1) guestfs-security(1).
In the source tree, a new docs <br>
directory contains this documentation.</p>

<p style="margin-top: 1em">Architectures and platforms</p>

<p style="margin-top: 1em">Libguestfs now supports ARM 64
bit platforms with vGICv3.</p>

<p style="margin-top: 1em">Security <br>
See also guestfs-security(1).</p>

<p style="margin-top: 1em">&quot;CVE-2015-5745&quot; <br>
https://bugzilla.redhat.com/1251157</p>

<p style="margin-top: 1em">This is not a vulnerability in
libguestfs, but because we always give a virtio-serial port
to each guest (since that is how guest-host communication
happens), an escalation <br>
from the appliance to the host qemu process is possible.
This could affect you if:</p>

<p style="margin-top: 1em">&Acirc;&middot; your libguestfs
program runs untrusted programs out of the guest (using
&quot;guestfs_sh&quot; etc), or</p>

<p style="margin-top: 1em">&Acirc;&middot; another exploit
was found in (for example) kernel filesystem code that
allowed a malformed filesystem to take over the
appliance.</p>

<p style="margin-top: 1em">If you use sVirt to confine
qemu, that would thwart some attacks.</p>

<p style="margin-top: 1em">Virt-customize permissions on
.ssh, .ssh/authorized_keys <br>
https://bugzilla.redhat.com/1260778.</p>

<p style="margin-top: 1em">Previously when asked to inject
an SSH key into a guest, virt-customize (hence virt-builder
too) would create the .ssh directory and
.ssh/authorized_keys file with too broad <br>
permissions, allowing other users to read. They are now
created as 0700 and 0600 respectively, which is the same as
the ssh-copy-id(1) utility.</p>

<p style="margin-top: 1em">API <br>
New APIs</p>


<p style="margin-top: 1em">&quot;guestfs_get_identifier&quot;
<br>
&quot;guestfs_set_identifier&quot; <br>
Get/set a per-handle identifier. The main effect of this is
to change trace output from:</p>

<p style="margin-top: 1em">libguestfs: trace: foo</p>

<p style="margin-top: 1em">to:</p>

<p style="margin-top: 1em">libguestfs: trace: ID: foo</p>

<p style="margin-top: 1em">making it easier to follow
traces in multi-threaded programs, or where a program uses
multiple handles (especially virt-v2v).</p>


<p style="margin-top: 1em">&quot;guestfs_vfs_minimum_size&quot;
<br>
Return the minimum size of a filesystem (when shrunk). This
supports ext2/3/4, XFS and btrfs, and can support other
filesystem types in future (Maxim Perevedentsev).</p>

<p style="margin-top: 1em">Other API changes</p>


<p style="margin-top: 1em">&quot;guestfs_disk_create&quot;:
add &quot;preallocation&quot; =
&quot;off&quot;/&quot;metadata&quot;/&quot;full&quot;. <br>
For raw, this allows &quot;off&quot; as a synonym for
&quot;sparse&quot; (making it consistent with qcow2). For
qcow2, this allows &quot;sparse&quot; as a synonym for
&quot;off&quot;.</p>

<p style="margin-top: 1em">It also adds &quot;full&quot;,
which corresponds to fully allocated, but uses
posix_fallocate(3) for efficiency.</p>

<p style="margin-top: 1em">&quot;guestfs_tar_in&quot;: new
&quot;xattrs&quot;, &quot;selinux&quot;, &quot;acl&quot;
parameters. <br>
&quot;guestfs_tar_out&quot;: new &quot;xattrs&quot;,
&quot;selinux&quot;, &quot;acl&quot; parameters. <br>
These extra parameters control whether extended attributes,
SELinux contexts and/or POSIX ACLs are restored from / saved
to tarballs.</p>

<p style="margin-top: 1em">&quot;guestfs_add_drive&quot;
<br>
The existing &quot;username&quot; and &quot;secret&quot;
parameters can be used to supply authentication for iSCSI
(Pino Toscano).</p>

<p style="margin-top: 1em">Build changes <br>
The &quot;./configure --enable-valgrind-daemon&quot; option
has been removed.</p>

<p style="margin-top: 1em">You can no longer build
libguestfs on RHEL 5-era (c.2007) machines. See the
&quot;oldlinux&quot; branch if you need (limited) RHEL 5
support.</p>

<p style="margin-top: 1em">Virt-p2v can now be built on
RHEL 6-era (c.2010) Linux distros.</p>

<p style="margin-top: 1em">OCaml &acirc;&yen; 3.11
(released in 2008) is now required to build from git.</p>

<p style="margin-top: 1em">Building the Perl bindings now
requires &quot;Module::Build&quot; (instead of
&quot;ExtUtils::MakeMaker&quot;).</p>

<p style="margin-top: 1em">Builds should be faster
(especially when incrementally rebuilding), because work was
done to reduce build times.</p>

<p style="margin-top: 1em">Both OCaml and the OCaml findlib
module are required if you need to run the generator at
build time. Previously the build would have failed if
findlib was not installed.</p>

<p style="margin-top: 1em">&quot;make check&quot; tests now
run in parallel (within each test directory).</p>

<p style="margin-top: 1em">&quot;make install&quot; no
longer installs OCaml bindtests.* files incorrectly.</p>

<p style="margin-top: 1em">&quot;make install&quot; can now
be run twice. Previously it would fail on the second
run.</p>

<p style="margin-top: 1em">&quot;make clean&quot; should
now remove nearly every file that &quot;make&quot;
creates.</p>

<p style="margin-top: 1em">A new &quot;make
installcheck&quot; rule has been added, allowing the
installed copy of libguestfs to be tested.</p>

<p style="margin-top: 1em">Internals <br>
Some effort was put into minimizing the size of the
appliance, which reduces temporary disk space and time
needed by libguestfs handles.</p>

<p style="margin-top: 1em">The appliance now passes the NIC
name to dhcpd, fixing hangs when running the appliance on
some distros (C&Atilde;&copy;dric Bosdonnat).</p>

<p style="margin-top: 1em">OCaml &quot;Guestfs.Errno&quot;
is now generated (Pino Toscano).</p>

<p style="margin-top: 1em">In OCaml tools, common code now
handles --debug-gc, --verbose and other common options
(Roman Kagan, Pino Toscano).</p>

<p style="margin-top: 1em">The virt-v2v test harness allows
us to boot the test guests at fixed dates in the past,
ensuring that Windows reactivation doesn&rsquo;t kick
in.</p>

<p style="margin-top: 1em">There is a new internal API for
reading/writing a subprocess via a pipe from library
code.</p>

<p style="margin-top: 1em">Used &quot;deheader&quot;
program to remove unused &quot;#include&quot;
directives.</p>

<p style="margin-top: 1em">In OCaml tools, the
&quot;Char&quot; and &quot;String&quot; modules now
implicitly reference the &quot;Common_utils.Char&quot; and
&quot;Common_utils.String&quot; modules (instead of the ones
from stdlib). The <br>
&quot;Common_utils&quot; modules contain a number of extra
char/string utility functions, and also hide some unsafe
functions in stdlib.</p>

<p style="margin-top: 1em">Many more virt-v2v tests will
now be run even if you don&rsquo;t have rhsrvany and
virtio-win installed (Roman Kagan).</p>

<p style="margin-top: 1em">The huge configure.ac file has
been split into several smaller files called
m4/guestfs_*.m4.</p>

<p style="margin-top: 1em">The old tests/data and
tests/guests directories have been moved to test-data/. This
new top level directory carries all test data which is
common, large and/or shared between <br>
multiple tests.</p>

<p style="margin-top: 1em">There is a new top level
website/ directory containing the public
http://libguestfs.org website (or most of it).</p>

<p style="margin-top: 1em">The fuzz testing of inspection
(tests/fuzz) has been removed.</p>

<p style="margin-top: 1em">Virt-p2v now saves the source
physical machine dmesg output into the conversion server
debug directory, making it simpler to debug cases of missing
drivers, firmware etc.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/1294956 <br>
set-label returns wrong error message when set the ext3/ext4
filesystem label</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1288733
<br>
Add a Fedora 23 32-bit base image for virt-builder</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1288201
<br>
virt-builder writes temporary files to /tmp</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1285847
<br>
virt-resize does not copy logical partitions</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1281578
<br>
virt-inspector returns version 6.3 for win10 images (should
return 10.0)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1281577
<br>
virt-inspector --xpath segfault on attribute get</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1280029
<br>
libguestfs can run commands with stdin not open (or worse
still, connected to arbitrary guest-chosen random
devices)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1279273
<br>
About compression option for qcow2</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1278878
<br>
guestfish should be able to handle LVM thin layouts</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1278382
<br>
DNF python programming error when run from virt-builder</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1278371
<br>
inspection returns arch=&quot;unknown&quot; for Windows
guest if file command is not installed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1277274
<br>
Document permissions needed for non-admin users to use
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1277122
<br>
RFE: virt-sparsify: make &rsquo;--in-place&rsquo;
sparsification safe to abort (gracefully or
ungracefully)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1277074
<br>
Virt-p2v client shouldn&rsquo;t present the vdsm option
because it&rsquo;s not usable</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1276540
<br>
virt-v2v fails to convert Windows raw image: error
&quot;device name is not a partition&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1275806
<br>
virt-builder: error: [file] is not a regular file in the
guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1270011
<br>
Simplestreams test fails: virt-builder: error: the value for
the key &rsquo;size&rsquo; is not an integer</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1267032
<br>
guestfish copy-in command behaves oddly/unexpectedly with
wildcards</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1262983
<br>
python: Cannot compile pip module if installed libguestfs !=
pip guestfs version</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1262127
<br>
Better diagnostic message when virbr0 doesn&rsquo;t
exist</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1261436
<br>
No warning shows when convert a win7 guest with AVG
AntiVirus installed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1260778
<br>
virt-builder --ssh-inject doesn&rsquo;t set proper
permissions on created files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1260689
<br>
RFE: V2V to check and warn user to disable group policy and
anti virus on Windows guests</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1260590
<br>
Wrong graphics protocal and video type set for guest after
convert to rhev 3.6 by virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1258342
<br>
extra slashes in vcenter URL confuses virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1257895
<br>
[RHEV][V2V] virt-v2v ignores NIC if interface
source/@network or source/@bridge is an empty string</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1256405
<br>
virt-builder created Fedora 22 32bit disk image cannot be
updated</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1256222
<br>
virt-p2v no GUI mode:error opening control connection to
$ip:22:unexpected &acirc;&brvbar;rompt</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1251909
<br>
Option -oa preallocated -of qcow2 of virt-v2v didn&rsquo;t
work efficiently</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1250715
<br>
v2v: spaces need to be escaped as %20 in paths</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1248678
<br>
Close all incoming ports on virt-p2v ISO</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1246882
<br>
man virt-customize shows synopsis twice</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1242853
<br>
mount-loop failed to setup loop device: No such file or
directory</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1237136
<br>
BUG: unable to handle kernel NULL pointer dereference at
&lt;addr&gt; in function __blkg_lookup</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1230412
<br>
virt-v2v should ignore bogus kernel entries in grub
config</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1229119
<br>
Unrelated info in fstab makes virt-v2v fail with unclear
error info</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1227609
<br>
virt-p2v: Using &quot;Back&quot; button causes output list
to be repopulated multiple times</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1225789
<br>
Wrong video driver is installed for rhel5.11 guest after
conversion to libvirt</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1204131
<br>
RFE: virt-builder creates qcow v3 images, add build option
for qcow v2</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1176801
<br>
File /etc/sysconfig/kernel isn&rsquo;t updated when convert
XenPV guest with regular kernel installed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1174551
<br>
&quot;lstatnslist&quot; and &quot;lstatlist&quot;
don&rsquo;t give an error if the API is used wrongly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1168223
<br>
koji spin-livecd cannot build a working live CD</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1165785
<br>
mount-loop command fails: mount failed: Unknown error -1</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1164708
<br>
set-label can only set &lt;=127 bytes for btrfs and &lt;=126
bytes for ntfs filesystem which not meet the help message.
Also for ntfs it should give a warning message when the <br>
length &gt;128 bytes</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1020216
<br>
libvirt fails to shut down domain: could not destroy libvirt
domain: Requested operation is not valid: domain is not
running</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1011907
<br>
mount-loop failed to setup loop device: No such file or
directory</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.30 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.28.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
New tools</p>

<p style="margin-top: 1em">virt-dib(1) is a secure and safe
alternative to the OpenStack &quot;diskimage-builder&quot;
tool. It is compatible with diskimage-builder elements.
(Pino Toscano)</p>

<p style="margin-top: 1em">virt-get-kernel(1) extracts the
kernel and ramdisk from a disk image. Previously this
functionality was part of virt-builder(1), but the new tool
is more featureful. (Pino <br>
Toscano)</p>

<p style="margin-top: 1em">New features in existing
tools</p>

<p style="margin-top: 1em">virt-v2v(1) -i ova mode can now
read a wider range of OVA files, and also unpacked files
(directories).</p>

<p style="margin-top: 1em">virt-v2v now securely passes
options to curl, so passwords, cookies and so on cannot be
seen by users with shell access on the same machine.</p>

<p style="margin-top: 1em">virt-v2v has a new
--password-file option to allow you to securely pass in a
password, and to avoid an interactive prompt.</p>

<p style="margin-top: 1em">virt-v2v disables Windows
autoreboot, making debugging conversion failures on Windows
easier.</p>

<p style="margin-top: 1em">virt-v2v now comes with an
extensive external test suite. See
virt-v2v-test-harness(1).</p>

<p style="margin-top: 1em">virt-v2v allows virtio drivers
to come from any location (Roman Kagan), and drivers can be
read directly from the virtio ISO.</p>

<p style="margin-top: 1em">virt-v2v supports conversion of
Windows &acirc;&yen; 8. Note this is experimental, and
possibly broken. Use with caution.</p>

<p style="margin-top: 1em">virt-v2v can now convert UEFI
guests.</p>

<p style="margin-top: 1em">virt-p2v(1) adds a network
configuration dialog.</p>

<p style="margin-top: 1em">virt-p2v now has
&quot;p2v.pre&quot;, &quot;p2v.post&quot; and
&quot;p2v.fail&quot; triggers, allowing arbitrary scripts
for preparing the host for conversion and tidying up
post-conversion.</p>

<p style="margin-top: 1em">virt-p2v now uses the more
advanced metacity window manager (instead of matchbox).</p>

<p style="margin-top: 1em">virt-sysprep(1) will remove
&quot;/var/spool/mail/username&quot; for non-root accounts
(Hu Tao).</p>

<p style="margin-top: 1em">virt-customize(1),
virt-builder(1) and virt-sysprep have the following new
options:</p>

<p style="margin-top: 1em">--commands-from-file <br>
allow long lists of commands to be read from a file instead
of from the command line (Pino Toscano)</p>

<p style="margin-top: 1em">--copy <br>
copy files inside the guest (Maros Zatko)</p>

<p style="margin-top: 1em">--copy-in <br>
copy host files recursively into the guest (Pino
Toscano)</p>

<p style="margin-top: 1em">--move <br>
move files inside the guest (Maros Zatko)</p>

<p style="margin-top: 1em">--ssh-inject <br>
inject SSH keys into a guest (Pino Toscano)</p>

<p style="margin-top: 1em">--sm-attach <br>
--sm-credentials <br>
--sm-register <br>
--sm-remove <br>
--sm-unregister <br>
register and unregister a guest from subscription-manager
(Pino Toscano)</p>

<p style="margin-top: 1em">--touch <br>
touch a file in the guest (Pino Toscano)</p>

<p style="margin-top: 1em">--truncate <br>
--truncate-recursive <br>
truncate files (Maros Zatko)</p>

<p style="margin-top: 1em">Improvements to virt-customize
firstboot support. In particular, Windows firstboot should
work as well as Linux (Roman Kagan).</p>

<p style="margin-top: 1em">virt-df(1) can now use
PolicyKit, SASL and other authentication methods when
getting the list of domains from libvirt.</p>

<p style="margin-top: 1em">Improvements to guestfish bash
completion (Pino Toscano).</p>

<p style="margin-top: 1em">Bash completion now completes
short options as well as long options (Pino Toscano).</p>

<p style="margin-top: 1em">guestfish(1) now displays a
command synopsis if the number of parameters given to a
command is wrong (Hu Tao).</p>

<p style="margin-top: 1em">virt-builder now supports Red
Hat Enterprise Linux versions back to RHEL 3.</p>

<p style="margin-top: 1em">virt-builder supports SUSE
guests using zypper (C&Atilde;&copy;dric Bosdonnat).</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">The Java bindings now include
validated Javadoc, and other improvements (Pino
Toscano).</p>

<p style="margin-top: 1em">Multiple fixes and improvements
to the PHP bindings (Pino Toscano).</p>

<p style="margin-top: 1em">Inspection</p>

<p style="margin-top: 1em">Inspection can now get icons
from RHEL 7 and CentOS 7.</p>

<p style="margin-top: 1em">/etc/favicon.png is now allowed
to be a symbolic link.</p>

<p style="margin-top: 1em">For RPM-based guests, inspection
now returns RPM Epoch fields.</p>

<p style="margin-top: 1em">Debian packages now have
separate Epoch and Version fields (Nikos Skalkotos).</p>

<p style="margin-top: 1em">OpenBSD detection added, FreeBSD
and NetBSD added as separate &quot;distros&quot;, and other
BSD inspection improvements and bug fixes (Nikos
Skalkotos).</p>

<p style="margin-top: 1em">CoreOS detection added (Nikos
Skalkotos).</p>

<p style="margin-top: 1em">The package manager in Fedora
&acirc;&yen; 22 is &quot;dnf&quot;.</p>

<p style="margin-top: 1em">ReactOS guests can be inspected
(Maros Zatko).</p>

<p style="margin-top: 1em">Add support for UEFI guests.</p>

<p style="margin-top: 1em">Inspection now works when kernel
modules are gzip or xz compressed (Pino Toscano).</p>

<p style="margin-top: 1em">Inspection now recognizes ppc64
and ppc64le guests (Maros Zatko).</p>

<p style="margin-top: 1em">Inspection lists the installed
applications on Archlinux guests (Nikos Skalkotos).</p>

<p style="margin-top: 1em">Architectures and platforms</p>

<p style="margin-top: 1em">PPC64 (POWER7) and PPC64LE
(POWER8) architectures are now much better supported, and
should work out of the box.</p>

<p style="margin-top: 1em">For aarch64, we use AAVMF (an
open source UEFI implementation based on OVMF) if available
to run the appliance.</p>

<p style="margin-top: 1em">For armv7, we now use the -M
virt machine type by default.</p>

<p style="margin-top: 1em">There is better support for
compiling on non-Linux platforms (Pino Toscano, Margaret
Lewicka).</p>

<p style="margin-top: 1em">Libguestfs should now work on
MIPS 32 bit little endian (&quot;mipsel&quot;). I have not
been able to try 64 bit or big endian.</p>

<p style="margin-top: 1em">Security <br>
CVE-2014-8484 <br>
CVE-2014-8485 <br>
Libguestfs previously ran the strings(1) utility on
untrusted files. Strings could parse BFD headers in an
unsafe way, leading to possible arbitrary code execution.
<br>
Libguestfs now runs strings with a flag to ensure it does
not try to parse BFD headers. This could have led to
exploitation of the libguestfs appliance, but since
libguestfs <br>
further constrains the appliance through virtualization,
SELinux and other techniques, it was unlikely to have caused
any privilege escalation on the host.</p>

<p style="margin-top: 1em">XPath injection in virt-v2v <br>
One possible XPath injection vulnerability was fixed in
virt-v2v. This might have allowed a malicious guest which
was being converted by virt-v2v to construct an arbitrary
<br>
XPath expression which would have been evaluated on the host
(by the libxml2 library linked to the virt-v2v binary). It
is not clear what the effects of this might be.</p>

<p style="margin-top: 1em">For further information, see
upstream commit
https://github.com/libguestfs/libguestfs/commit/6c6ce85f94c36803fe2db35a98db436bff0c14b0</p>

<p style="margin-top: 1em">Denial of service problems when
using &quot;qemu-img info&quot; <br>
When using the American Fuzzy Lop fuzzer
(&quot;afl-fuzz&quot;) on the &quot;qemu-img info&quot;
command, Richard W.M. Jones found that certain files can
cause the &quot;qemu-img&quot; program to use lots <br>
of memory and time (for example 6GB of heap and 14 seconds
of CPU time on a fast Intel processor), and in some cases to
crash. Since libguestfs may run &quot;qemu-img info&quot; on
<br>
disk images to find out what they contain, this transitively
could cause libguestfs to hang or consume lots of
memory.</p>

<p style="margin-top: 1em">Libguestfs was modified so that
it uses resource limits to limit the space and time used by
&quot;qemu-img info&quot;, to avoid this problem. If a
malicious user tries to pass one of <br>
these disk images to libguestfs, &quot;qemu-img&quot; will
crash and the crash is reported back to libguestfs callers
as an error message.</p>

<p style="margin-top: 1em">API <br>
New APIs</p>


<p style="margin-top: 1em">&quot;guestfs_add_libvirt_dom&quot;
<br>
This exposes a previously private API that allows you to
pass a &quot;virDomainPtr&quot; object directly from libvirt
to libguestfs.</p>


<p style="margin-top: 1em">&quot;guestfs_blockdev_setra&quot;
<br>
Adjust readahead parameter for devices. See &quot;blockdev
--setra&quot; command.</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_balance&quot;
<br>
&quot;guestfs_btrfs_balance_cancel&quot; <br>
&quot;guestfs_btrfs_balance_pause&quot; <br>
&quot;guestfs_btrfs_balance_resume&quot; <br>
&quot;guestfs_btrfs_balance_status&quot; <br>
Balance support for Btrfs filesystems (Hu Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_filesystem_defragment&quot;
<br>
Filesystem defragmentation support for Btrfs filesystems (Hu
Tao).</p>

<p style="margin-top: 1em">&quot;guestfs_btrfs_image&quot;
<br>
Create an image of a Btrfs filesystem (Chen Hanxiao)</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_qgroup_assign&quot;
<br>
&quot;guestfs_btrfs_qgroup_create&quot; <br>
&quot;guestfs_btrfs_qgroup_destroy&quot; <br>
&quot;guestfs_btrfs_qgroup_limit&quot; <br>
&quot;guestfs_btrfs_qgroup_remove&quot; <br>
&quot;guestfs_btrfs_qgroup_show&quot; <br>
&quot;guestfs_btrfs_quota_enable&quot; <br>
&quot;guestfs_btrfs_quota_rescan&quot; <br>
Quote support for Btrfs filesystems (Hu Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_rescue_chunk_recover&quot;
<br>
Scan and recover the chunk tree in Btrfs filesystems (Hu
Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_rescue_super_recover&quot;
<br>
Restore superblocks in Btrfs filesystems (Hu Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_replace&quot;
<br>
Replace a device in a Btrfs filesystem (Cao Jin).</p>

<p style="margin-top: 1em">&quot;guestfs_btrfs_scrub&quot;
<br>
&quot;guestfs_btrfs_scrub_cancel&quot; <br>
&quot;guestfs_btrfs_scrub_resume&quot; <br>
&quot;guestfs_btrfs_scrub_status&quot; <br>
Scrub a Btrfs filesystem (Hu Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_subvolume_get_default&quot;
<br>
Get the default subvolume of a Btrfs filesystem (Hu
Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_subvolume_show&quot;
<br>
List detailed information about the subvolume of a Btrfs
filesystem (Hu Tao).</p>


<p style="margin-top: 1em">&quot;guestfs_btrfstune_enable_extended_inode_refs&quot;
<br>

&quot;guestfs_btrfstune_enable_skinny_metadata_extent_refs&quot;
<br>
&quot;guestfs_btrfstune_seeding&quot; <br>
Various tuning parameters for Btrfs filesystems (Chen
Hanxiao).</p>

<p style="margin-top: 1em">&quot;guestfs_c_pointer&quot;
<br>
Return the C pointer to the underlying &quot;guestfs_h
*&quot;. This allows interworking of libguestfs bindings
with bindings from other libraries. For further information
see <br>
https://bugzilla.redhat.com/1075164</p>

<p style="margin-top: 1em">&quot;guestfs_copy_in&quot; <br>
&quot;guestfs_copy_out&quot; <br>
Flexible APIs for recursively copying directories of files
between the host and guest filesystem. Previously these were
available only as guestfish commands, but now any API <br>
users can call them (Pino Toscano).</p>


<p style="margin-top: 1em">&quot;guestfs_part_get_gpt_guid&quot;
<br>
&quot;guestfs_part_set_gpt_guid&quot; <br>
Get and set the GPT per-partition GUID.</p>


<p style="margin-top: 1em">&quot;guestfs_part_get_mbr_part_type&quot;
<br>
Get MBR partition type (Chen Hanxiao).</p>


<p style="margin-top: 1em">&quot;guestfs_set_uuid_random&quot;
<br>
Set the UUID of a filesystem to a randomly generated value;
supported filesystems currently are ext2/3/4, XFS, Btrfs,
and swap partitions. (Chen Hanxiao).</p>

<p style="margin-top: 1em">Other API changes</p>

<p style="margin-top: 1em">&quot;guestfs_disk_create&quot;
can now use VMDK files as backing files.</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_subvolume_snapshot&quot;
takes extra optional parameters (all added by Hu Tao):</p>

<p style="margin-top: 1em">&quot;ro&quot; <br>
for creating a read-only Btrfs snapshot</p>

<p style="margin-top: 1em">&quot;qgroupid&quot; <br>
for adding the snapshot to a qgroup</p>


<p style="margin-top: 1em">&quot;guestfs_btrfs_subvolume_create&quot;
can also take the optional &quot;qgroupid&quot; parameter
(Hu Tao).</p>

<p style="margin-top: 1em">&quot;guestfs_set_uuid&quot; can
set UUID of swap partitions, Btrfs (Hu Tao, Chen
Hanxiao).</p>


<p style="margin-top: 1em">&quot;guestfs_copy_device_to_file&quot;
and &quot;guestfs_copy_file_to_file&quot; have a new
optional &quot;append&quot; parameter, allowing you to
append to the output file instead of truncating it.</p>

<p style="margin-top: 1em">&quot;guestfs_mkfs&quot; has a
new optional &quot;label&quot; parameter to set the initial
label of the new filesystem (Pino Toscano).</p>

<p style="margin-top: 1em">&quot;guestfs_set_label&quot;
and &quot;guestfs_set_uuid&quot; now set &quot;ENOTSUP&quot;
as errno when there is no implemented support for the
filesystem of the specified mountable (Chen Hanxiao).</p>

<p style="margin-top: 1em">Environment variables now let
you write &quot;LIBGUESTFS_DEBUG=true&quot;,
&quot;LIBGUESTFS_DEBUG=0&quot; and so on.</p>

<p style="margin-top: 1em">All &quot;guestfs_sfdisk*&quot;
APIs have been deprecated. Because sfdisk(8) was rewritten,
incompatibly, upstream, we don&rsquo;t recommend using these
APIs in future code. Use the <br>
&quot;guestfs_part*&quot; APIs as replacements.</p>

<p style="margin-top: 1em">APIs such as
&quot;guestfs_download&quot; do not truncate /dev/stdout or
/dev/stderr when writing to them, meaning that if you
redirect stdout or stderr to a file, the file is no longer
<br>
truncated.</p>

<p style="margin-top: 1em">Build changes <br>
The daemon no longer uses its own separate copy of gnulib.
Instead it shares a single copy with the library.</p>

<p style="margin-top: 1em">OCaml .annot files are now
created, so IDEs and editors like emacs and vi can browse
OCaml types in the source code.</p>

<p style="margin-top: 1em">Various fixes to allow different
host/appliance architecture builds (Pino Toscano).</p>

<p style="margin-top: 1em">Automake is now used directly to
build all the OCaml programs, instead of ad hoc Makefile
rules. One side effect of this is to enable warnings in all
the C code used by OCaml <br>
programs.</p>


<p style="margin-top: 1em">&quot;-fno-strict-overflow&quot;
is used throughout the build to avoid dubious GCC
optimizations.</p>

<p style="margin-top: 1em">Multiple cleanups to support GCC
5.</p>

<p style="margin-top: 1em">OCaml OUnit2 is needed to run
some OCaml tests.</p>

<p style="margin-top: 1em">Creating a statically linked
libguestfs.a should work again.</p>

<p style="margin-top: 1em">The src/api-support subdirectory
and its scripts are no longer used. Instead we store in the
generator/actions.ml when the API was added to
libguestfs.</p>

<p style="margin-top: 1em">Internationalization <br>
The translation service has changed from Transifex to
Zanata.</p>

<p style="margin-top: 1em">Many more translations are
available now, for both library and tools messages and
documentation.</p>

<p style="margin-top: 1em">Internals <br>
In all OCaml tools, there are now common &quot;error&quot;,
&quot;warning&quot;, &quot;info&quot; functions, and common
way to set and get the --quiet, -x (trace) and -v (verbose)
flags, and colour <br>
highlighting used consistently.</p>

<p style="margin-top: 1em">&quot;COMPILE_REGEXP&quot;
macros are used to simplify PCRE constructors and
destructors.</p>

<p style="margin-top: 1em">In the generator,
&quot;Pointer&quot; arguments have finally been
implemented.</p>

<p style="margin-top: 1em">Internal identifiers no longer
use double and triple underscores (eg.
&quot;guestfs___program_name&quot;). These identifiers are
invalid for C99 and C++ programs, although compilers would
<br>
accept them.</p>

<p style="margin-top: 1em">The daemon no longer parses
&quot;guestfs_*&quot; options from /proc/cmdline. Instead it
only takes ordinary command line options. The appliance init
script turns /proc/cmdline into <br>
daemon command line options.</p>

<p style="margin-top: 1em">The tests can now run the daemon
as a &quot;captive process&quot;, allowing it to be run
directly on the host. The main advantage of this is we can
run valgrind directly on the daemon <br>
during testing.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/1239053 <br>
virt-v2v error reporting when grub.conf cannot be parsed by
Augeas</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1238053
<br>
v2v:Duplicate disk target set when convert guest with cdrom
attached</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1237869
<br>
Virtio drivers are not installed for windows 2008 guests by
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1234351
<br>
virt-v2v Support for Fedora virtio-win drivers</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1232192
<br>
Virt-v2v gives an error on a blank disk: part_get_parttype:
unknown signature, of the output: BYT;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1229385
<br>
virt-p2v in kernel command line mode should power off the
machine after conversion</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1229340
<br>
virt-p2v no GUI mode appends to the final command line
parameter</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1229305
<br>
virt-sysprep at cleanup deletes /var/spool/at/.SEQ which
results in failing at</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1226794
<br>
&quot;Doing conversion&acirc;&brvbar;&acirc;&brvbar;&quot;
still shows after cancel the conversion from virt-p2v
client</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1215042
<br>
Memory leak in virNetSocketNewConnectUNIX</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1213324
<br>
virt-v2v: warning: unknown guest operating system: windows
windows 6.3 when converting win8,win8.1,win2012,win2012R2 to
rhev</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1213247
<br>
virt tools should print the same format of version
string</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1212808
<br>
RFE: virt-builder --touch</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1212807
<br>
virt-builder --selinux-relabel flag fails on
cross-architecture builds</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1212680
<br>
RFE: virt-inspector xpath query should output a neat format
of the query element</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1212152
<br>
virt-builder firstboot-command fails: File name too long</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1211996
<br>
virt-inspector gives incorrect arch (ppc64) for ppc64le
guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1203817
<br>
RFE: virt-customize --move and --copy</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1201526
<br>
index-parser can&rsquo;t parse systemd mount files
properly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1196101
<br>
virt-builder --upload option doesn&rsquo;t work to a FAT
partition</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1196100
<br>
virt-builder -x option on its own does not enable
tracing</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1195204
<br>
&lsquo;virt-builder&lsquo; should create $HOME/.cache
directory if it already doesn&rsquo;t exist</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1193237
<br>
Virt-builder fingerprint is required even when no check
desired</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1189284
<br>
virt-resize should preserve GPT partition UUIDs, else EFI
guests become unbootable</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1188866
<br>
Performance regression in virt-builder when uncompressing
image</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1186800
<br>
virt-v2v should support gzip format ova as input</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1185561
<br>
virt-sparsify should ignore read-only LVs</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1182463
<br>
&quot;mknod-b&quot;, &quot;mknod-c&quot;, and
&quot;mkfifo&quot; do not strip non-permissions bits from
&quot;mode&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1176493
<br>
virt-v2v ignores sound device when convert xen guest to
local kvm</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1175676
<br>
Typo error in &rsquo;help ping-daemon&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1175196
<br>
&quot;parse-environment&quot; and
&quot;parse-environment-list&quot; fail to parse
&quot;LIBGUESTFS_TRACE = 0&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1175035
<br>
&quot;is-blockdev&quot;/&quot;is-blockdev-opts&quot; fail to
detect &quot;/dev/sda&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1174280
<br>
RFE: Allow v2v conversion of Oracle Linux 5.8 VMware VM</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1174200
<br>
New virt-v2v failure: CURL: Error opening file: NSS: client
certificate not found (nickname not specified): Invalid
argument</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1174123
<br>
Graphics password disappear after conversion of virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1174073
<br>
The listen address for vnc is changed after conversion by
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1171666
<br>
inspection thinks EFI partition is a separate operating
system</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1171130
<br>
virt-v2v conversion of RHEL 3 guest fails with: All of your
loopback devices are in use</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1170685
<br>
Conversion of RHEL 4 guest fails: rpm -ql
1:kernel-utils-2.4-23.el4: virt-v2v: error: libguestfs
error: command_lines:</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1170073
<br>
virt-v2v picks debug kernels over non-debug kernels when
versions are equal</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1169045
<br>
virt-sparsify: libguestfs error: qemu-img info:
&rsquo;virtual-size&rsquo; is not representable as a 64 bit
integer</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1169015
<br>
virt-resize --expand fails on ubuntu-14.04.img image
(regression)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1168144
<br>
warning: fstrim: fstrim: /sysroot/: FITRIM ioctl failed:
Operation not supported (ignored) when convert win2003 guest
from xen server</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1167921
<br>
p2v: No Network Connection dialog</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1167774
<br>
virt-p2v fails with
error:&quot;nbd.c:nbd_receive_negotiate():L501: read
failed&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1167623
<br>
Remove &quot;If reporting bugs, run virt-v2v with debugging
enabled ..&quot; message when running virt-p2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1167601
<br>
&quot;Conversion was successful&quot; pop out even virt-p2v
fails</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1167302
<br>
virt-v2v: warning: ova hard disk has no parent controller
when convert from a ova file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1166618
<br>
virt-resize should give out the detail warning info to let
customers know what&rsquo;s going wrong</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1165975
<br>
File &quot;/boot/grub2/device.map&quot; showing is not right
after converting a rhel7 guest from esx server</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1165785
<br>
mount-loop command fails: mount failed: Unknown error -1</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1165569
<br>
Disable &quot;cancel conversion&quot; button after virt-p2v
conversion finished</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1165564
<br>
Provide Reboot/Shutdown button after virt-p2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1164853
<br>
Booting in qemu found no volume groups and failed checking
the filesystems</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1164732
<br>
The description of &rsquo;help append&rsquo; is not
accurately, it add the kernel options to libguestfs
appliance not the guest kernel</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1164697
<br>
typo errors in man pages</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1164619
<br>
Inspect-get-icon failed on RHEL7 guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1162966
<br>
xfs should also give a warning out to let customer know the
limitation</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1161575
<br>
Failed to import guest with &quot;rtl8139&quot; nic to
openstack server after converted by v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1159651
<br>
virt-sysprep firstboot script is not deleted if it reboot a
RHEL 7 guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1159258
<br>
esx win2008 32 bit guest fail to load after conversion
because the firmware isn&rsquo;t ACPI compatible</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1159016
<br>
libvirt backend does not set RBD password</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1158526
<br>
Use password file instead of process interaction</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1157679
<br>
virt-p2v-make-disk should add firmwares</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1156449
<br>
libguestfs FTBFS on f21 ppc64le</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1156301
<br>
virt-inspector support adding a remote disk, but in its man
page -a URI / --add URI is missing</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1155121
<br>
Virt-v2v will fail when using relative path for -i ova</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1153844
<br>
Redundancy whitespace at the end of directory name when use
&lt;TAB&gt; to complete the directory name in guestfish with
a xfs filesystem in guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1153589
<br>
virt-v2v will hang when converting esx guest before disk
copy phase</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1152998
<br>
virt-v2v / qemu-img fails on ova image</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151910
<br>
virt-ls should remove &rsquo;/&rsquo; in the output when
specify the directory name as /etc/</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151900
<br>
Should also add a field for directory files when run virt-ls
with --csv option</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151033
<br>
virt-v2v conversions from VMware vCenter server run
slowly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1146832
<br>
virt-v2v fail to convert guest with disk type volume</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1146007
<br>
Input/output error during conversion of esx guest.</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1135585
<br>
[RFE] virt-builder should support copying in a
directory/list of files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1089566
<br>
[abrt] livecd-tools: kickstart.py:276:apply:IOError: [Errno
2] No such file or directory: <br>

&rsquo;/run/media/jones/2tp001data/createlive/temp/imgcreate-_dX8Us/install_root/etc/rpm/macros.imgcreate&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1079625
<br>
virt-sparsify fails if a btrfs filesystem contains readonly
snapshots</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1075164
<br>
RFE: allow passing in a pre-opened libvirt connection from
python</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/912499
<br>
Security context on image file gets reset</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/889082
<br>
[RFE] virt-v2v should check whether guest with same name
exist on target first then transfer the disk</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/855059
<br>
RFE: virt-p2v: display more information about network
devices such as topology, bonding, etc.</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/823758
<br>
p2v client should have largest number restrictions for CPU
and Memory settings</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/709327
<br>
hivex cannot read registry hives from ReactOS</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/709326
<br>
virt-inspector cannot detect ReactOS</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/119673
<br>
installation via NFS doesn&rsquo;t seem to work</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.28 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.26.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
Tools</p>

<p style="margin-top: 1em">virt-v2v(1) and virt-p2v(1) are
tools for converting from foreign hypervisors (such as
VMware or Xen) or physical machines, to KVM. These tools
were previously a separate <br>
project. The code for both tools has been integrated into
the libguestfs tree. As part of the refactoring, virt-p2v
has been rewritten (from Ruby, now C), and virt-v2v now uses
<br>
several modern features of qemu which make it run many times
faster than before. virt-v2v(1) can import from: VMware
vCenter, VMware OVA files, local disk files, libvirt, RHEL 5
<br>
Xen. It can output to: oVirt or Red Hat Enterprise
Virtualization (RHEV-M), OpenStack Glance, libvirt, qemu,
local disk files.</p>

<p style="margin-top: 1em">virt-log(1) is a new tool for
listing log files from guests. It supports a variety of
guests including Linux traditional, Linux using journal, and
Windows event log.</p>

<p style="margin-top: 1em">virt-builder(1) has a new
&quot;--machine-readable&quot; option to make it simpler to
consume virt-builder from other programs.</p>

<p style="margin-top: 1em">New virt-builder(1) and
virt-customize(1) --chmod option.</p>

<p style="margin-top: 1em">virt-sysprep(1) will now remove:
systemd journals, anaconda logs, lightdm logs,
debian-installer files, apt logs, exim logs, ConsoleKit
logs, firewalld logs, grubby logs, proftpd <br>
logs, libvirt/libxml logs, and several other log files. The
virt-sysprep &quot;user-account&quot; operation is now able
to remove or keep particular user accounts. (Pino
Toscano).</p>

<p style="margin-top: 1em">New guestmount(1) --fd option,
allowing you to run guestmount captive under another
process.</p>

<p style="margin-top: 1em">virt-sparsify(1) has a new --tmp
option allowing you to precisely control where temporary
files are stored.</p>

<p style="margin-top: 1em">virt-sparsify(1) can now write
to a block device.</p>

<p style="margin-top: 1em">virt-customize(1) and
virt-sysprep(1) now support adding firstboot scripts to
Windows guests.</p>

<p style="margin-top: 1em">virt-cat(1), virt-edit(1),
virt-ls(1) now support the -m option, allowing you to
override automatic inspection of guests and instead specify
where to mount partitions (Pino <br>
Toscano).</p>

<p style="margin-top: 1em">The virt tools now have coloured
output: green for OK, red for errors, blue for warnings.</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">You can build a Python
distribution using &quot;make -C python sdist&quot;</p>

<p style="margin-top: 1em">Ruby bindings have switched from
&quot;Test::Unit&quot; to &quot;MiniTest&quot;.</p>

<p style="margin-top: 1em">The Java bindings are now
compatible with OpenJDK 8 (Pino Toscano).</p>

<p style="margin-top: 1em">Inspection</p>

<p style="margin-top: 1em">Oracle Linux is returned as
&quot;oraclelinux&quot; (Nikos Skalkotos).</p>

<p style="margin-top: 1em">Linux guests which do not have
/etc/fstab can now be handled (Pino Toscano).</p>

<p style="margin-top: 1em">Minix is returned as
&quot;minix&quot; (Pino Toscano).</p>

<p style="margin-top: 1em">Architectures</p>

<p style="margin-top: 1em">Aarch64 (64 bit ARM) support has
been added.</p>

<p style="margin-top: 1em">Inspection and the
&quot;guestfs_file_architecture&quot; call can now recognize
arm (32 bit) and aarch64 guests.</p>

<p style="margin-top: 1em">Security <br>
CVE-2014-0191 Network usage and entity resolution in XML
parsing <br>
Libguestfs previously used unsafe libxml2 APIs for parsing
libvirt XML. These APIs defaulted to allowing network
connections to be made when certain XML documents were <br>
presented. Using a malformed XML document it was also
possible to exhaust all CPU, memory or file descriptors on
the machine.</p>

<p style="margin-top: 1em">Since the libvirt XML comes from
a trusted source (the libvirt daemon) it is not thought that
this could have been exploitable.</p>

<p style="margin-top: 1em">This was fixed in libguestfs
&acirc;&yen; 1.27.9 and the fix was backported to stable
versions &acirc;&yen; 1.26.2, &acirc;&yen; 1.24.9,
&acirc;&yen; 1.22.10 and &acirc;&yen; 1.20.13. (Thanks: Dan
Berrange, Pino Toscano).</p>

<p style="margin-top: 1em">Shellshock (bash CVE-2014-6271)
<br>
This bash bug indirectly affects libguestfs. For more
information see:
https://www.redhat.com/archives/libguestfs/2014-September/msg00252.html</p>

<p style="margin-top: 1em">API <br>
New APIs</p>


<p style="margin-top: 1em">&quot;guestfs_clear_backend_setting&quot;
<br>
&quot;guestfs_get_backend_setting&quot; <br>
&quot;guestfs_set_backend_setting&quot; <br>
Use these APIs to set individual backend settings.</p>

<p style="margin-top: 1em">&quot;guestfs_cpio_out&quot;
<br>
Convert a directory within the disk image to cpio
format.</p>


<p style="margin-top: 1em">&quot;guestfs_journal_get_realtime_usec&quot;
<br>
Fetch precise journal times, see
sd_journal_get_realtime_usec(3).</p>

<p style="margin-top: 1em">&quot;guestfs_lstatns&quot; <br>
&quot;guestfs_lstatnslist&quot; <br>
&quot;guestfs_statns&quot; <br>
Enhanced versions of &quot;guestfs_lstat&quot;,
&quot;guestfs_lstatlist&quot;, &quot;guestfs_stat&quot;
which return nanosecond timestamps.</p>

<p style="margin-top: 1em">Build changes <br>
Libguestfs can now be built with qemu 2.x.</p>

<p style="margin-top: 1em">Add support for packaging the
appliance on Mageia (Joseph Wang, Thierry Vignaud).</p>

<p style="margin-top: 1em">Augeas is now a required
dependency.</p>

<p style="margin-top: 1em">Flex and bison are now required
dependencies.</p>

<p style="margin-top: 1em">Internals <br>
User-Mode Linux (UML) is no longer a supported backend
(although still available). It will be supported again once
someone steps in and fixes various regressions and
brokenness <br>
in the UML (Linux) kernel.</p>

<p style="margin-top: 1em">You can now connect gdb to qemu
by specifying
&quot;LIBGUESTFS_BACKEND_SETTINGS=gdb&quot;</p>

<p style="margin-top: 1em">Serial BIOS (sgabios) is now
used by the libvirt backend (on x86 only) so that we see
early BIOS messages.</p>

<p style="margin-top: 1em">For the OCaml virt tools,
exceptions are now handled and printed by a common
function.</p>

<p style="margin-top: 1em">A GCC warning about large stack
frames is now enabled by default. Several places that used
large arrays and structures on the stack have been
fixed.</p>

<p style="margin-top: 1em">There is now a test for booting
the appliance repeatedly. Useful for finding kernel leaks.
See: tests/qemu/qemu-boot.c</p>

<p style="margin-top: 1em">There is a test for testing the
speed of various qemu features such as virtio-serial uploads
and block device writes. See:
tests/qemu/qemu-speed-test.c</p>

<p style="margin-top: 1em">GCC warnings are now enabled for
OCaml-C bindings in the OCaml virt tools.</p>

<p style="margin-top: 1em">The code for editing files used
by virt-edit(1), guestfish(1) &quot;edit&quot; command,
virt-customize(1) --edit option and more is now shared
between all these utilities (thanks Pino <br>
Toscano).</p>

<p style="margin-top: 1em">The FUSE tests were rewritten in
C to ensure finer control over how system calls are
tested.</p>

<p style="margin-top: 1em">The update-bugs.sh script has
been fixed so it should no longer create an empty
&quot;BUGS&quot; file if the Bugzilla server is
unavailable.</p>

<p style="margin-top: 1em">The virt-resize(1) tests now use
a stochastic method to ensure much deeper and broader
testing.</p>

<p style="margin-top: 1em">When the network is enabled, the
appliance now uses DHCP to acquire an IP address.</p>

<p style="margin-top: 1em">If libvirt is being used then
the appliance will connect to &quot;virbr0&quot; (can be
overridden by setting
&quot;LIBGUESTFS_BACKEND_SETTINGS=network_bridge=&lt;some_bridge&gt;&quot;).
This enables <br>
full-featured network connections, with working ICMP, ping
and so on.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/1153515 <br>
empty (but set) LIBGUESTFS_BACKEND prints libguestfs: error:
invalid backend:</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151766
<br>
libguestfs-bash-completion package contains file
/usr/share/bash-completion/completions/virt-log, but no
_virt_log() function in that file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151738
<br>
typo error in man page of virt-edit</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1151033
<br>
virt-v2v conversions from VMware vCenter server run
slowly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1150880
<br>
virt-v2v: warning: display &lt;graphics
type=&rsquo;sdl&rsquo;&gt; was ignored when converting rhel5
guest with sdl graphics</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1150867
<br>
&rsquo;copy-file-to-file /src /dest&rsquo; create file /dest
even if command &rsquo;copy-file-to-file /src /dest&rsquo;
failed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1150815
<br>
Can not find &quot;RECURSIVE LONG LISTING&quot; in
&rsquo;man virt-diff&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1150701
<br>
virt-v2v does not fstrim data disks and non-mounted
filesystems</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1150475
<br>
Exporting 2+ disk guest to RHEV, only one disk shows after
import</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1148355
<br>
virt-filesystems: incorrect LVM vg name when listing Fedora
21 Alpha Atomic image filesystems</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1148072
<br>
Option missing --no-selinux-relabel</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1148012
<br>
RFE: Allow qemu-bridge-helper to be used to implement
guestfs_set_network</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1146815
<br>
virt-v2v prints warning: /files/etc/fstab/8/spec references
unknown device &quot;cdrom&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1146275
<br>
regression setting root password with
virt-builder/virt-customize</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1146017
<br>
virt-v2v -v -x during windows guest conversion will hang at
hivex: hivex_open: used block id
&acirc;&brvbar;&acirc;&brvbar;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1145995
<br>
Improve the error info when converting windows guest with
unclean file system</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1145916
<br>
virt-v2v fails to convert win7 guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1144891
<br>
RFE: stat calls do not return nanosecond timestamps</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1144766
<br>
futimens() is a no-op via guestmount</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1144201
<br>
guestfish can not restore terminal&rsquo;s output colour
when exit guestfish, if the terminal&rsquo;s background
colour is black then it will make a inconvenient</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1143949
<br>
virt-customize option &rsquo;--password-crypto&rsquo; do not
work</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1143887
<br>
Warning shows when converting guests to rhev:chown: changing
ownership of &acirc;/tmp/v2v.u48xag/*.ovf&acirc;: Invalid
argument</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1143883
<br>
warning shows when converting rhel7 guest:virt-v2v:could not
update grub2 console: aug_get: no matching node
(ignored)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1143866
<br>
virt-v2v fails with error: cannot open Packages index using
db5</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1142416
<br>
part-get-name give &rsquo;libguestfs: error: part_get_name:
parted does not support the machine output (-m)&rsquo; error
message when run &rsquo;part-get-name /dev/sda 1&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1142186
<br>
virt-sysprep option &rsquo;--mount-options&rsquo;
don&rsquo;t work well</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1142158
<br>
Illegal command &rsquo;part-get-name /dev/sda1 1&rsquo;
cause libguestfs appliance crashed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1142004
<br>
virt-v2v prints warning:WARNING:/files/boot/grub/device.map
references unknown device &quot;xvda&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141723
<br>
virt-v2v: error: disk sda has no defined format shows when
converting xen hvm guest</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141680
<br>
[RFE] virt-v2 should support convert a domain with using
domain&rsquo;s UUID instead of domain name</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141631
<br>
[RFE] virt-v2 should support convert a guest to a dir-pool
with using pool&rsquo;s uuid</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141157
<br>
virt-sysprep option &rsquo;--user-accounts&rsquo;
don&rsquo;t work well</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141145
<br>
virt-v2v fails to convert xen pv guests.</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1141113
<br>
virt-v2v fails to convert esx guests</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1140946
<br>
qemu-img shows error message for backing file twice</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1140894
<br>
No error messages output if append &rsquo;--format
qcow2&rsquo; after &rsquo;-a guest.img&rsquo;, guest.img is
a raw format image file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1140547
<br>
virt-builder option &rsquo;--format&rsquo; don&rsquo;t work
well</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1140156
<br>
RFE: Export to RHEV data domain</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1140050
<br>
No error shows when multiple conflicting options used with
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1139973
<br>
Improve the error info when converting xen guest with no
passwordless SSH access configured</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1139543
<br>
Improve the error info when converting guest with no space
left</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1138586
<br>
No error shows when converting running guest with
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1138184
<br>
virt-v2v will fail when converting guests with
initramfs-*kdump.img under /boot</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1138182
<br>
xen guest will be kernel panic after converted by
virt-v2v</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1130189
<br>
Annoying message about permissions of /dev/kvm</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1123007
<br>
libguestfs &rsquo;direct&rsquo; backend should close file
descriptors before exec-ing qemu to avoid leaking !O_CLOEXEC
fds</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1122557
<br>
virt-sparsify overwrites block devices if used as output
files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1113156
<br>
Empty fstab breaks libguestfs inspection</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1111662
<br>
Guestfs.Error(&quot;vgchange_uuid_all: Volume group has
active logical volumes&quot;)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1109174
<br>
virt-win-reg manual page is corrupted</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1106548
<br>
root gets an error accessing to a non-root dir on a snapshot
guestmount VMDK img</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1103877
<br>
These APIs also need to add to &lsquo;guestfish -h&lsquo;
command list</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1102448
<br>
mageia package list is incorrect</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1102447
<br>
libguestfs 1.27.13 does not build due to libxml library
order</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1100498
<br>
RFE: non-polling mechanism to detect guestmount --no-fork
readiness</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1099490
<br>
scrub-file can&rsquo;t handle link file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1099284
<br>
typo errors in man pages</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1098718
<br>
RFE: virt-builder aliases</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1096465
<br>
virt-builder &quot;proxy=off&quot; setting doesn&rsquo;t
turn off the proxy for downloads</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1094746
<br>
virt-sparsify man failes to mention what happens to
snapshots within a qcow2 image (they are discarded)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1092753
<br>
virt-builder: If several repos contain the same os-version
images, then they are duplicated in -l output</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1091803
<br>
tar-in-opts execute failed that cause libguestfs appliance
crashed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1088424
<br>
virt-resize: libguestfs error: part_set_name: parted:
/dev/sdb: Error during translation: Invalid or incomplete
multibyte or wide character</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1088262
<br>
virt-builder cannot write to a block device</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1085029
<br>
Ruby tests fail with latest Ruby</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1079210
<br>
virt-sparsify --in-place cannot sparsify as much as it
should</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1079182
<br>
virt-df cannot report used disk space of windows guest when
updated to 6.5</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1077817
<br>
virt-builder error: &quot;syntax error at line 3: syntax
error&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1056290
<br>
virt-sparsify overwrites block devices if used as output
files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/812970
<br>
virt-rescue cannot set &acirc;&yen;&lt;rescue&gt; prompt, on
Ubuntu 12.04</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.26 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.24.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
Tools</p>

<p style="margin-top: 1em">virt-customize(1) is a new tool
for customizing virtual machine disk images. It lets you
install packages, edit configuration files, run scripts, set
passwords and so on. <br>
virt-builder(1) and virt-sysprep(1) use virt-customize, and
command line options across all these tools are now
identical.</p>

<p style="margin-top: 1em">virt-diff(1) is a new tool for
showing the differences between the filesystems of two
virtual machines. It is mainly useful when showing what
files have been changed between <br>
snapshots.</p>

<p style="margin-top: 1em">virt-builder(1) has been greatly
enhanced. There are many more ways to customize the virtual
machine. It can pull templates from multiple repositories. A
parallelized internal <br>
xzcat implementation speeds up template decompression.
Virt-builder uses an optimizing planner to choose the
fastest way to build the VM. It is now easier to use
virt-builder <br>
from other programs. Internationalization support has been
added to metadata. More efficient SELinux relabelling of
files. Can build guests for multiple architectures. Error
<br>
messages have been improved. (Pino Toscano)</p>

<p style="margin-top: 1em">virt-sparsify(1) has a new
--in-place option. This sparsifies an image in place
(without copying it) and is also much faster. (Lots of help
provided by Paolo Bonzini)</p>

<p style="margin-top: 1em">virt-sysprep(1) can delete and
scrub files under user control. You can lock user accounts
or set random passwords on accounts. Can remove more log
files. Can unsubscribe a <br>
guest from Red Hat Subscription Manager. New flexible way to
enable and disable operations. (Wanlong Gao, Pino
Toscano)</p>

<p style="margin-top: 1em">virt-win-reg(1) allows you to
use URIs to specify remote disk images.</p>

<p style="margin-top: 1em">virt-format(1) can now pass the
extra space that it recovers back to the host.</p>

<p style="margin-top: 1em">guestfish(1) has additional
environment variables to give fine control over the
&quot;&gt;&lt;fs&gt;&quot; prompt. Guestfish reads its
(rarely used) configuration file in a different order now so
<br>
that local settings override global settings. (Pino
Toscano)</p>

<p style="margin-top: 1em">virt-make-fs(1) was rewritten in
C, but is unchanged in terms of functionality and command
line usage.</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">The OCaml bindings have a new
&quot;Guestfs.Errno&quot; module, used to check the error
number returned by &quot;Guestfs.last_errno&quot;.</p>

<p style="margin-top: 1em">PHP tests now work. (Pino
Toscano)</p>

<p style="margin-top: 1em">Inspection</p>

<p style="margin-top: 1em">Inspection can recognize Debian
live images.</p>

<p style="margin-top: 1em">Architectures</p>

<p style="margin-top: 1em">ARMv7 (32 bit) now supports KVM
acceleration.</p>

<p style="margin-top: 1em">Aarch64 (ARM 64 bit) is
supported, but the appliance part does not work yet.</p>

<p style="margin-top: 1em">PPC64 support has been fixed and
enhanced.</p>

<p style="margin-top: 1em">Security <br>
Denial of service when inspecting disk images with corrupt
btrfs volumes <br>
It was possible to crash libguestfs (and programs that use
libguestfs as a library) by presenting a disk image
containing a corrupt btrfs volume.</p>

<p style="margin-top: 1em">This was caused by a NULL
pointer dereference causing a denial of service, and is not
thought to be exploitable any further.</p>

<p style="margin-top: 1em">See commit
d70ceb4cbea165c960710576efac5a5716055486 for the fix. This
fix is included in libguestfs stable branches
&acirc;&yen;&Acirc;&nbsp;1.26.0,
&acirc;&yen;&Acirc;&nbsp;1.24.6 and
&acirc;&yen;&Acirc;&nbsp;1.22.8, and also in RHEL
&acirc;&yen;&Acirc;&nbsp;7.0. <br>
Earlier versions of libguestfs are not vulnerable.</p>

<p style="margin-top: 1em">Better generation of random root
passwords and random seeds <br>
When generating random root passwords and random seeds, two
bugs were fixed which are possibly security related. Firstly
we no longer read excessive bytes from /dev/urandom <br>
(most of which were just thrown away). Secondly we changed
the code to avoid modulo bias. These issues were not thought
to be exploitable. (Both changes suggested by Edwin <br>
T&Atilde;&para;r&Atilde;&para;k)</p>

<p style="margin-top: 1em">API <br>
GUID parameters are now validated when they are passed to
API calls, whereas previously you could have passed any
string. (Pino Toscano)</p>

<p style="margin-top: 1em">New APIs</p>


<p style="margin-top: 1em">&quot;guestfs_add_drive_opts&quot;:
new &quot;discard&quot; parameter <br>
The new &quot;discard&quot; parameter allows fine-grained
control over discard/trim support for a particular disk.
This allows the host file to become more sparse (or thin-
<br>
provisioned) when you delete files or issue the
&quot;guestfs_fstrim&quot; API call.</p>

<p style="margin-top: 1em">&quot;guestfs_add_domain&quot;:
new parameters: &quot;cachemode&quot;, &quot;discard&quot;
<br>
These parameters are passed through when adding the
domain&rsquo;s disks.</p>

<p style="margin-top: 1em">&quot;guestfs_blkdiscard&quot;
<br>
Discard all blocks on a guestfs device. Combined with the
&quot;discard&quot; parameter above, this makes the host
file sparse.</p>


<p style="margin-top: 1em">&quot;guestfs_blkdiscardzeroes&quot;
<br>
Test if discarded blocks read back as zeroes.</p>

<p style="margin-top: 1em">&quot;guestfs_compare_*&quot;
<br>
&quot;guestfs_copy_*&quot; <br>
For each struct returned through the API, libguestfs now
generates &quot;guestfs_compare_*&quot; and
&quot;guestfs_copy_*&quot; functions to allow you to compare
and copy structs.</p>


<p style="margin-top: 1em">&quot;guestfs_copy_attributes&quot;
<br>
Copy attributes (like permissions, xattrs, ownership) from
one file to another. (Pino Toscano)</p>

<p style="margin-top: 1em">&quot;guestfs_disk_create&quot;
<br>
A flexible API for creating empty disk images from scratch.
This avoids the need to call out to external programs like
qemu-img(1).</p>


<p style="margin-top: 1em">&quot;guestfs_get_backend_settings&quot;
<br>
&quot;guestfs_set_backend_settings&quot; <br>
Per-backend settings (can also be set via the environment
variable &quot;LIBGUESTFS_BACKEND_SETTINGS&quot;). The main
use for this is forcing TCG mode in the qemu-based backends,
for <br>
example:</p>

<p style="margin-top: 1em">export LIBGUESTFS_BACKEND=direct
<br>
export LIBGUESTFS_BACKEND_SETTINGS=force_tcg</p>


<p style="margin-top: 1em">&quot;guestfs_part_get_name&quot;
<br>
Get the label or name of a partition (for GPT disk
images).</p>

<p style="margin-top: 1em">Build changes <br>
The following extra packages are required to build
libguestfs 1.26:</p>

<p style="margin-top: 1em">supermin &acirc;&yen; 5 <br>
Supermin version 5 is required to build this version of
libguestfs.</p>

<p style="margin-top: 1em">flex, bison <br>
Virt-builder now uses a real parser to parse its metadata
file, so these tools are required.</p>

<p style="margin-top: 1em">xz This is now a required build
dependency, where previously it was (in theory)
optional.</p>

<p style="margin-top: 1em">Internals <br>
PO message extraction rewritten to be more robust. (Pino
Toscano)</p>

<p style="margin-top: 1em">&quot;podwrapper&quot; gives an
error if the --insert or --verbatim argument pattern is not
found.</p>

<p style="margin-top: 1em">Libguestfs now passes the qemu
-enable-fips option to enable FIPS, if qemu supports it.</p>

<p style="margin-top: 1em">&quot;./configure
--without-qemu&quot; can be used if you don&rsquo;t want to
specify a default hypervisor.</p>

<p style="margin-top: 1em">Copy-on-write [COW] overlays,
used for example for read-only drives, are now created
through an internal backend API
(&quot;.create_cow_overlay&quot;).</p>

<p style="margin-top: 1em">Libvirt backend uses some funky
C macros to generate XML. These are simpler and safer.</p>

<p style="margin-top: 1em">The ChangeLog file format has
changed. It is now just the same as &quot;git log&quot;,
instead of using a custom format.</p>

<p style="margin-top: 1em">Appliance start-up has
changed:</p>

<p style="margin-top: 1em">&Acirc;&middot; The libguestfs
appliance now initializes LVM the same way as it is done on
physical machines.</p>

<p style="margin-top: 1em">&Acirc;&middot; The libguestfs
appliance does not write an empty string to
/proc/sys/kernel/hotplug when starting up.</p>

<p style="margin-top: 1em">Note that you must configure
your kernel to have
&quot;CONFIG_UEVENT_HELPER_PATH=&quot;&quot;&quot; otherwise
you will get strange LVM errors (this applies as much to any
Linux machine, not just <br>
libguestfs). (Peter Rajnoha)</p>

<p style="margin-top: 1em">Libguestfs can now be built on
arches that have ocamlc(1) but not ocamlopt(1). (Hilko
Bengen, Olaf Hering)</p>

<p style="margin-top: 1em">You cannot use &quot;./configure
--disable-daemon --enable-appliance&quot;. It made no sense
anyway. Now it is expressly forbidden by the configure
script.</p>

<p style="margin-top: 1em">The packagelist file uses
&quot;m4&quot; for macro expansion instead of
&quot;cpp&quot;.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/1073906 <br>
java bindings inspect_list_applications2 throws
java.lang.ArrayIndexOutOfBoundsException:</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1063374
<br>
[RFE] enable subscription manager clean or unregister
operation to sysprep</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1060404
<br>
virt-resize does not preserve GPT partition names</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1057504
<br>
mount-local should give a clearer error if root is not
mounted</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1056290
<br>
virt-sparsify overwrites block devices if used as output
files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1055452
<br>
libguestfs: error: invalid backend: appliance</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1054761
<br>
guestfs_pvs prints &quot;unknown device&quot; if a physical
volume is missing</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1053847
<br>
Recommended default clock/timer settings</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1046509
<br>
ruby-libguestfs throws &quot;expecting 0 or 1
arguments&quot; on Guestfs::Guestfs.new</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1045450
<br>
Cannot inspect cirros 0.3.1 disk image fully</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1045033
<br>
LIBVIRT_DEFAULT_URI=qemu:///system breaks libguestfs</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1044585
<br>
virt-builder network (eg. --install) doesn&rsquo;t work if
resolv.conf sets nameserver 127.0.0.1</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1044014
<br>
When SSSD is installed, libvirt configuration requires
authentication, but not clear to user</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1039995
<br>
virt-make-fs fails making fat/vfat whole disk: Device
partition expected, not making filesystem on entire device
&rsquo;/dev/sda&rsquo; (use -I to override)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1039540
<br>
virt-sysprep to delete more logfiles</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1033207
<br>
RFE: libguestfs inspection does not recognize Free4NAS live
CD</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1028660
<br>
RFE: virt-sysprep/virt-builder should have an option to lock
a user account</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1026688
<br>
libguestfs fails examining libvirt guest with ceph drives:
rbd: image name must begin with a &rsquo;/&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1022431
<br>
virt-builder fails if $HOME/.cache doesn&rsquo;t exist</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1022184
<br>
libguestfs: do not use versioned jar file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1020806
<br>
All libguestfs LVM operations fail on Debian/Ubuntu</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1008417
<br>
Need update helpout of part-set-gpt-type</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/953907
<br>
virt-sysprep does not correctly set the hostname on
Debian/Ubuntu</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/923355
<br>
guestfish prints literal &quot;0 in error messages</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/660687
<br>
guestmount: &quot;touch&quot; command fails: touch: setting
times of &lsquo;timestamp&rsquo;: Invalid argument</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/593511
<br>
[RFE] function to get partition name</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/563450
<br>
list-devices returns devices of different types out of
order</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.24 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.22.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
User-Mode Linux (UML) can be used as an alternative backend
(ie. instead of KVM). This improves performance especially
when using libguestfs inside a VM (eg. in the cloud). UML
<br>
is supported as a first-class backend. See &quot;USER-MODE
LINUX BACKEND&quot; in guestfs(3) for how to use this.</p>

<p style="margin-top: 1em">ARM (32 bit) and PPC64 are now
fully supported.</p>

<p style="margin-top: 1em">Tools</p>

<p style="margin-top: 1em">virt-builder(1) is a new tool
for building virtual machine images. It lets you rapidly and
securely create guests and customize them.</p>

<p style="margin-top: 1em">New virt-sysprep(1) operations:
Remove files in /tmp and /var/tmp. Remove RPM database
files. Change root and user passwords. More log files are
removed. New operations which <br>
are not enabled by default: Create random UUIDs for
filesystems. Reset firewall rules. (Wanlong Gao)</p>

<p style="margin-top: 1em">virt-resize(1) and virt-sysprep
can now use URIs to specify a remote disk.</p>

<p style="margin-top: 1em">Use &quot;guestfish -N
filename=type&quot; to create a named disk image (instead of
the default test1.img etc).</p>

<p style="margin-top: 1em">virt-sparsify(1) now tests if
there is enough disk space to complete the operation,
instead of possibly running out of space half way
through.</p>

<p style="margin-top: 1em">virt-format(1) and
virt-make-fs(1): new --label option for setting filesystem
label.</p>

<p style="margin-top: 1em">virt-resize --no-sparse flag can
be used to resize on to partitions and other targets that
are not zeroed.</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">New bindings for the Go
programming language.</p>

<p style="margin-top: 1em">API</p>

<p style="margin-top: 1em">Support for the systemd
journal.</p>


<p style="margin-top: 1em">&quot;guestfs_add_drive_opts&quot;
can now control the qemu caching mode through a new
&quot;cachemode&quot; parameter. You can select improved
performance for temporary drives, or safety.</p>

<p style="margin-top: 1em">&quot;guestfs_set_label&quot;
now works for XFS and btrfs.</p>

<p style="margin-top: 1em">New GUESTFS_EVENT_WARNING event
for warning messages.</p>

<p style="margin-top: 1em">Inspection</p>

<p style="margin-top: 1em">Better inspection of SUSE guests
(Olaf Hering).</p>

<p style="margin-top: 1em">Better support for non-standard
Windows %systemroot% (Matthew Booth).</p>

<p style="margin-top: 1em">Enhanced error reporting for
Augeas errors.</p>

<p style="margin-top: 1em">Security <br>
CVE-2013-2124 <br>
https://bugzilla.redhat.com/show_bug.cgi?id=968306</p>

<p style="margin-top: 1em">A denial of service was possible
when inspecting certain guests. The fix has been backported
to 1.20 and 1.22 branches.</p>

<p style="margin-top: 1em">CVE-2013-4419 <br>

https://www.redhat.com/archives/libguestfs/2013-October/msg00031.html</p>

<p style="margin-top: 1em">Fix insecure temporary directory
handling for remote guestfish. The fix has been backported
to 1.20 and 1.22 branches.</p>

<p style="margin-top: 1em">New APIs <br>
add-drive-scratch: Add a temporary scratch drive <br>
aug-label <br>
aug-setm <br>
journal-open: Systemd journal support <br>
journal-close <br>
journal-next <br>
journal-skip <br>
journal-get <br>
journal-get-data-threshold <br>
journal-set-data-threshold <br>
remount: Allow rw flag to be adjusted on mounted filesystems
<br>
set-uuid: Set UUID of filesystem</p>

<p style="margin-top: 1em">&quot;is-file&quot;,
&quot;is-dir&quot;, &quot;is-blockdev&quot;,
&quot;is-chardev&quot;, &quot;is-fifo&quot;,
&quot;is-socket&quot; APIs now have an extra
&quot;followsymlinks&quot; flag.</p>

<p style="margin-top: 1em">&quot;add-drive&quot; has a new
&quot;cachemode&quot; parameter.</p>

<p style="margin-top: 1em">Build changes <br>
The following packages are required to build libguestfs
1.24:</p>

<p style="margin-top: 1em">Augeas &acirc;&yen; 1.0.0</p>

<p style="margin-top: 1em">The following optional packages
may be added to enhance functionality but are not
required:</p>

<p style="margin-top: 1em">sd-journal <br>
To read journal files from guests which use that.</p>

<p style="margin-top: 1em">url_mkcow <br>
For UML backend.</p>

<p style="margin-top: 1em">curl <br>
gpg <br>
xz For virt-builder.</p>

<p style="margin-top: 1em">golang &acirc;&yen; 1.1.1 <br>
For Go language bindings.</p>

<p style="margin-top: 1em">Internals <br>
New &quot;make check-*&quot; rules replace &quot;make
extra-tests&quot;. See &quot;make help&quot; and guestfs(3)
for details.</p>

<p style="margin-top: 1em">Perl code can now be
valgrinded.</p>

<p style="margin-top: 1em">Inspection code is now
fuzz-tested.</p>

<p style="margin-top: 1em">&quot;make&quot; no longer
recurses into the generator directory in every other
directory. This reduces the overhead of builds
considerably.</p>

<p style="margin-top: 1em">Additional tests for Augeas,
hivex.</p>

<p style="margin-top: 1em">Add a launch timeout of 20
minutes waiting for the appliance to start up.</p>

<p style="margin-top: 1em">Add a timeout (4 hours) to all
tests so we can catch the case where qemu or other
components hang.</p>

<p style="margin-top: 1em">Use kvmclock and &quot;-cpu
host&quot;. This improves clock stability and overall
performance.</p>

<p style="margin-top: 1em">&quot;./configure
--enable-packet-dump&quot; mode is fixed.</p>

<p style="margin-top: 1em">&quot;./configure
--enable-valgrind-daemon&quot; mode has been rewritten. It
is now feasible for developers to keep this flag enabled at
all times.</p>

<p style="margin-top: 1em">Backends have been refactored to
be modular (although they are not actually loadable
modules).</p>

<p style="margin-top: 1em">When enabled, the network now
uses resolver configuration (ie. /etc/resolv.conf) from the
host.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/1019889 <br>
libguestfs-tools.conf should have a man page</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1018149
<br>
valgrind errors in btrfs_subvolume_list</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1002032
<br>
mke2fs can&rsquo;t return the correct filesystem type when
blockscount is less than 2048 for ext3</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1001876
<br>
Update &quot;rsync-out&quot; helpout for using wildcard</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1001875
<br>
Argument &rsquo;excludes&rsquo; of tar-out does not work</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1000428
<br>
virt-format uses wrong partition type for vfat
filesystems</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/1000121
<br>
&rsquo;sh&rsquo; command before mount causes daemon to
segfault</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/998513
<br>
guestfish does not work when you mix --remote and --add
options</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/998482
<br>
guestfish remote prints &quot;libguestfs: error: waitpid
(qemu): No child processes&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/995711
<br>
list-filesystems command fails if there are no block
devices</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/994517
<br>
cache=none/O_DIRECT workaround doesn&rsquo;t work for images
with backing files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/989356
<br>
cap-get-file will return error if the file has not be set
capabilities</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/986877
<br>
RFE: Implement set-uuid command</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/986875
<br>
RFE: Implement set-label for xfs</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/985269
<br>
Can&rsquo;t set acl value for a specified user with
&rsquo;acl-set-file&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/983218
<br>
libguestfs double free when kernel link fails during
launch</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/981715
<br>
Make xfs filesystem failed with specified blocksize, gives
&quot;unknown option -b&quot; error</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/981683
<br>
&quot;hivex-commit&quot; should fail with a relative
path</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/981663
<br>
disk-format &quot;qemu-img info: JSON parse error&quot; when
target file does not exist</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/978302
<br>
mke2fs-J should give a meaningful error when specified type
is anything except &rsquo;ext{2,3,4}&rsquo;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/975797
<br>
Specifying virtio interface (&rsquo;iface&rsquo; parameter)
breaks the direct backend - libguestfs hangs</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/975753
<br>
&quot;virt-resize --expand&quot; and &quot;virt-resize
--resize&quot; outputs error message for Win2008 32bit
OS</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/975412
<br>
inspection: Augeas expressions are broken with augeas &gt;=
0.10</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/974904
<br>
virt-resize --expand fails on Ubuntu Cloud Image</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/974489
<br>
Regression: Fedora inspection broken by change from
guestfs_exists to guestfs_is_file</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/972775
<br>
txz-out command produces a bzip2-compressed file (should be
xz-compressed)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/969845
<br>
upload to a directory occasionally hangs instead of
failing</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/968875
<br>
virt-sysprep should support URL-type arguments</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/624334
<br>
blockdev-setbsz succeeds, but does not affect
blockdev-getbsz</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.22 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.20.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
API</p>

<p style="margin-top: 1em">Remote access to disks:</p>

<p style="margin-top: 1em">&Acirc;&middot; Network Block
Device (nbd)</p>

<p style="margin-top: 1em">&Acirc;&middot; Secure Shell
(ssh)</p>

<p style="margin-top: 1em">&Acirc;&middot; HTTP and
HTTPS</p>

<p style="margin-top: 1em">&Acirc;&middot; FTP and FTPS</p>

<p style="margin-top: 1em">&Acirc;&middot; iSCSI</p>

<p style="margin-top: 1em">&Acirc;&middot; Gluster</p>

<p style="margin-top: 1em">&Acirc;&middot; Ceph/rbd (Mike
Kelly)</p>

<p style="margin-top: 1em">&Acirc;&middot; Sheepdog</p>

<p style="margin-top: 1em">&Acirc;&middot; TFTP</p>

<p style="margin-top: 1em">The SYSLINUX and EXTLINUX
bootloaders can now be installed in disk images using the
API.</p>

<p style="margin-top: 1em">Inspection can now handle
filesystems such as btrfs where subvolumes are separately
mountable (Matthew Booth).</p>

<p style="margin-top: 1em">&quot;Attach methods&quot; are
now known as &quot;backends&quot;. Compatibility with
existing code is preserved.</p>

<p style="margin-top: 1em">Filenames can contain
&rsquo;:&rsquo;, as long as newer QEMU is being used.</p>

<p style="margin-top: 1em">Tools</p>

<p style="margin-top: 1em">Virt-alignment-scan and virt-df
scan multiple guests in parallel.</p>

<p style="margin-top: 1em">Guestmount now passes errno
accurately back to userspace in almost all cases.</p>

<p style="margin-top: 1em">Guestfish and other tools can
now use a URI-like syntax to access remote disks, eg:</p>

<p style="margin-top: 1em">guestfish -a
ssh://example.com/path/to/disk.img</p>

<p style="margin-top: 1em">Guestfish and guestmount now
allow you to specify the filesystem type when mounting,
which is more secure (Dave Vasilevsky).</p>

<p style="margin-top: 1em">Guestfish is now the &quot;guest
filesystem shell&quot;.</p>

<p style="margin-top: 1em">Guestfish allows only 1
&quot;true&quot; &quot;t&quot; &quot;yes&quot; &quot;y&quot;
&quot;on&quot; 0 &quot;false&quot; &quot;f&quot;
&quot;no&quot; &quot;n&quot; &quot;off&quot; for boolean
values (case insensitive), and gives an error for all other
strings.</p>

<p style="margin-top: 1em">New tool
&quot;guestunmount&quot; for unmounting FUSE filesystems
safely.</p>

<p style="margin-top: 1em">&quot;guestmount --no-fork&quot;
flag prevents guestmount from daemonizing.</p>

<p style="margin-top: 1em">Virt-resize now uses sparse
copies by default, saving considerable space for guests
which are mostly empty.</p>

<p style="margin-top: 1em">Bash tab completion has been
rewritten and can now handle most tools, and correctly
tab-complete &quot;--long&quot; options. In addition, bash
completion scripts are loaded on demand.</p>

<p style="margin-top: 1em">Language bindings</p>

<p style="margin-top: 1em">The Java API now supports
events.</p>

<p style="margin-top: 1em">The Python object now inherits
from the &quot;object&quot; base class.</p>

<p style="margin-top: 1em">Python methods which previously
returned lists of tuples can now be made to return a Python
dict. For backwards compatibility, you have to enable this
by using the constructor <br>
option
&quot;guestfs.GuestFS&Acirc;&nbsp;(python_return_dict=True)&quot;.</p>

<p style="margin-top: 1em">The PHP bindings are now tested
properly, and have had multiple fixes.</p>

<p style="margin-top: 1em">The long-deprecated Perl
&quot;Sys::Guestfs::Lib&quot; library has been removed.
https://www.redhat.com/archives/libguestfs/2013-April/msg00001.html</p>

<p style="margin-top: 1em">Examples</p>

<p style="margin-top: 1em">New example program showing how
to enable debugging and capture log messages.</p>

<p style="margin-top: 1em">Other</p>

<p style="margin-top: 1em">Distributors can add arbitrary
extra packages to the appliance by doing:</p>

<p style="margin-top: 1em">./configure
--with-extra-packages=&quot;list of package names&quot;</p>

<p style="margin-top: 1em">Distributors can use:</p>

<p style="margin-top: 1em">./configure
--with-supermin-extra-options=&quot;...&quot;</p>

<p style="margin-top: 1em">to add arbitrary extra options
to supermin.</p>

<p style="margin-top: 1em">Security <br>
No security issues were found in this release.</p>

<p style="margin-top: 1em">New APIs <br>
cp-r <br>
extlinux <br>
feature-available <br>
get-program <br>
is-whole-device <br>
part-get-gpt-type <br>
part-set-gpt-type <br>
rename <br>
set-program <br>
syslinux</p>

<p style="margin-top: 1em">C only:</p>

<p style="margin-top: 1em">guestfs_event_to_string</p>

<p style="margin-top: 1em">Internals <br>
The febootstrap tool has now been renamed to
&quot;supermin&quot;. Libguestfs can use either, but now
prefers &quot;supermin&quot;.
http://people.redhat.com/~rjones/supermin/</p>

<p style="margin-top: 1em">libxml2 is required to build
libguestfs.</p>

<p style="margin-top: 1em">The hivexregedit program (from
hivex) is required to build from git.</p>

<p style="margin-top: 1em">Internal functions can no longer
be used unless the caller defines
&quot;-DGUESTFS_PRIVATE=1&quot;.</p>

<p style="margin-top: 1em">Enable C compiler warnings in
Python, Ruby bindings.</p>

<p style="margin-top: 1em">Fail early and clearly if
libvirt does not support qemu/KVM (eg. if default libvirt
connection is to Xen).</p>

<p style="margin-top: 1em">&quot;make print-subdirs&quot;
rule, useful for selectively running tests.</p>

<p style="margin-top: 1em">Multiple fixes to allow
separated (sourcedir != builddir) builds.</p>

<p style="margin-top: 1em">Multiple fixes to Haskell
bindings.</p>

<p style="margin-top: 1em">&quot;ln&quot; and
&quot;ln-f&quot; APIs now capture &quot;errno&quot;
correctly.</p>

<p style="margin-top: 1em">Language binding tests use
(mostly) a standard numbering scheme and aim to test the
same range of features in each language. Also the number of
launches required has been <br>
reduced so these tests should run much more quickly.</p>

<p style="margin-top: 1em">Library code internally uses GCC
&quot;__attribute__((cleanup))&quot; (if available) to
simplify memory allocation.</p>

<p style="margin-top: 1em">Internal header files have been
reorganized. See the comments in src/guestfs-internal*.h</p>

<p style="margin-top: 1em">Internal code shared between the
library and certain tools is now located in a static
&quot;libutils&quot; library.</p>

<p style="margin-top: 1em">Almost all subdirectories can
now use parallel builds, although note that the top-level
directories still build in series.</p>

<p style="margin-top: 1em">Use of &quot;PATH_MAX&quot; and
&quot;NAME_MAX&quot; has been eliminated from the code.</p>

<p style="margin-top: 1em">The Java API now requires JVM
&acirc;&yen; 1.6.</p>

<p style="margin-top: 1em">Force use of
&quot;serial-tests&quot; with automake &acirc;&yen;
1.12.</p>

<p style="margin-top: 1em">Use of sockets in the library
protocol layer is abstracted, allowing other non-POSIX
layers to be added in future (see src/conn-socket.c).</p>

<p style="margin-top: 1em">&quot;qemu-img info --output
json&quot; is used if available, for more secure parsing of
the output of this command.</p>

<p style="margin-top: 1em">Distros can now use &quot;make
INSTALLDIRS=vendor install&quot; to place Ruby bindings in
vendordir. This eliminates a non-upstream patch carried by
both Fedora and Debian.</p>

<p style="margin-top: 1em">Valgrind log files are now
written to tmp/valgrind-DATE-PID.log</p>

<p style="margin-top: 1em">&quot;make clean&quot; cleans
the local &quot;tmp/&quot; directory.</p>

<p style="margin-top: 1em">The C API tests have been
rewritten using a more flexible generator language that
allows arbitrary C code to be executing during tests.</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/961812 <br>
Segfault in inspect-fs.c in mountable code</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/957772
<br>
tar-out and base64-out quoting error</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/957380
<br>
libguestfs: error: btrfsvol:/dev/sda2/root: root device not
found: only call this function with a root device previously
returned by guestfs_inspect_os</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/948324
<br>
inspection fails if libosinfo is not installed</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/928995
<br>
file on zero-sized file now produces &quot;empty &quot;
instead of &quot;empty&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/921292
<br>
qemu: could not open disk image /tmp/.../snapshot1:
Permission denied</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/921040
<br>
&quot;error: external command failed, see earlier error
messages&quot; message needs to change</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/920225
<br>
libguestfs should use --output json (if supported) to safely
parse the output of qemu-img command</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/916780
<br>
feature request: guestmount --with-cleanup-pipefd</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/914934
<br>
oom-killer kills guestfsd when tar-in a lot of data</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/914931
<br>
FileIn commands cause segfault if appliance dies during the
file copy in</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/913145
<br>
Misc leaks in virNetClientProgramCall in libvirt 1.0.2</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/912499
<br>
Security context on image file gets reset</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/909836
<br>
libguestfs-test-tool --qemu segfaults</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/909624
<br>
Unexpected non-tail recursion in recv_from_daemon results in
stack overflow in very long-running API calls that send
progress messages</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/908322
<br>
virt-tar fails on non-existent directory names &quot;error
in chunked encoding at
/home/rjones/d/libguestfs/tools/virt-tar line 272.&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/908321
<br>
virt-cat fails on directory names &quot;/dev/stdout: error
in chunked encoding&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/907554
<br>
btrfs causes subsequent ntfs-3g filesystem to fail</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/905341
<br>
&quot;No such file or directory&quot; when execute
&quot;hivex-commit&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/903620
<br>
btrfs_subvolume_list broken due to change in subvolume list
output</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/895910
<br>
guestmount: rename() incorrectly follows symbolic links</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/895905
<br>
guestmount: link() incorrectly returns ENOENT, when it
should be EXDEV</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/895904
<br>
checksums-out fail to compute the checksums of all regular
files in directory</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/894545
<br>
libguestfs FTBFS on Fedora 19 because of new ruby</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/890027
<br>
virt-sysprep: Setting hostname, domain name and pretty name
on Fedora 18 correctly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/887971
<br>
pvcreate fails if partition contains a swap signature</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/887520
<br>
zero_free_space: open: /sysroot//ujqqq135.rd3: Cannot
allocate memory</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/886915
<br>
libguestfs with libvirt attach-method fails with odd error
if default hypervisor is Xen</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/847549
<br>
Adding a zero-length virtio-scsi disk causes: qemu-kvm:
hw/scsi-bus.c:1568: scsi_req_complete: Assertion
&lsquo;req-&gt;status == -1&rsquo; failed.</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/811649
<br>
libguestfs cannot open disk images which are symlinks to
files that contain &rsquo;:&rsquo; (colon) character</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/664558
<br>
RFE: Allow to set log callback in Ruby bindings</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.20 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.18.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
libvirt and sVirt (SELinux confinement)</p>

<p style="margin-top: 1em">You can optionally use libvirt
to launch and manage the backend appliance by:</p>

<p style="margin-top: 1em">&Acirc;&middot; setting
&quot;LIBGUESTFS_ATTACH_METHOD=libvirt[:URI]&quot;</p>

<p style="margin-top: 1em">&Acirc;&middot; using
&quot;./configure
--with-default-attach-method=libvirt[:URI]&quot;</p>

<p style="margin-top: 1em">&Acirc;&middot; or calling the
API method &quot;guestfs_set_attach_method&quot;</p>

<p style="margin-top: 1em">SVirt (SELinux confinement) is
used to secure the libguestfs appliance, if the libvirt
backend is selected.</p>

<p style="margin-top: 1em">virtio-scsi, larger number of
drives, hotplugging</p>

<p style="margin-top: 1em">Virtio-scsi is now used by
default, if it is available. This greatly increases the
number of drives that can be added to a single libguestfs
handle (up to 255).</p>

<p style="margin-top: 1em">You can now hotplug drives (add
and remove drives after launch).</p>

<p style="margin-top: 1em">Libguestfs can now handle &gt;
25 disks, in all APIs, tools and tests.</p>

<p style="margin-top: 1em">You can label drives when adding
them, then refer to them by label (/dev/disk/guestfs/LABEL)
instead of having to use device names (/dev/sda).</p>

<p style="margin-top: 1em">new library features</p>

<p style="margin-top: 1em">POSIX Access Control Lists
(ACLs) and Linux filesystem capabilities can now be read and
written through the API.</p>

<p style="margin-top: 1em">Windows Dynamic Disks are now
supported. The metadata can only be read (volumes cannot be
modified or created). However the data/filesystems in the
volumes themselves can be <br>
mounted, read and written (Matthew Booth).</p>

<p style="margin-top: 1em">Hivex (Windows Registry editing)
is now directly supported through the API, making reading or
editing the Windows Registry much more efficient.</p>

<p style="margin-top: 1em">Several libguestfs APIs were
reimplemented so they no longer have any limits on output.
The reimplemented APIs are: &quot;guestfs_cat&quot;,
&quot;guestfs_find&quot;, &quot;guestfs_read_file&quot;,
<br>
&quot;guestfs_read_lines&quot;, &quot;guestfs_write&quot;,
&quot;guestfs_write_append&quot;,
&quot;guestfs_lstatlist&quot;,
&quot;guestfs_lxattrlist&quot;,
&quot;guestfs_readlinklist&quot;,
&quot;guestfs_ls&quot;.</p>

<p style="margin-top: 1em">virt tools</p>

<p style="margin-top: 1em">&quot;guestfish touch
&rsquo;win:c:0w_file&rsquo;&quot; now works as expected.</p>

<p style="margin-top: 1em">&quot;guestfish&quot; has a new
--network option, which enables the user network in
libguestfs.</p>

<p style="margin-top: 1em">You can set
&quot;GUESTFISH_PS1&quot; to use fancy prompts in
&quot;guestfish&quot;.</p>

<p style="margin-top: 1em">&quot;rsync&quot;,
&quot;ssh&quot;, &quot;less&quot; and &quot;lrzip&quot;
commands are now available in virt-rescue. In addition,
&quot;rsync&quot; can be used through the API for doing
incremental copies.</p>

<p style="margin-top: 1em">&quot;virt-sparsify&quot; uses
qcow2 v3 for increased efficiency.</p>

<p style="margin-top: 1em">&quot;virt-sysprep&quot;
enhancements:</p>

<p style="margin-top: 1em">&Acirc;&middot; generate new
UUIDs for PVs and VGs</p>

<p style="margin-top: 1em">&Acirc;&middot; remove the local
machine ID (Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; remove ABRT data
(Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; remove puppet
keys and log files (Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; remove process
accounting files (Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; new --firstboot
parameter allowing firstboot scripts for customizing
guests</p>

<p style="margin-top: 1em">&Acirc;&middot; remove HOSTNAME
field from &quot;ifcfg-eth*&quot; files (Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; miscellaneous
improvements for SuSE (Olaf Hering)</p>

<p style="margin-top: 1em">&Acirc;&middot; remove man pages
cache (Wanlong Gao)</p>

<p style="margin-top: 1em">&Acirc;&middot; remove crash
data generated by kexec-tools (Wanlong Gao)</p>

<p style="margin-top: 1em">&quot;virt-make-fs&quot; can now
create virtual floppy disks (VFDs).</p>

<p style="margin-top: 1em">&quot;guestmount&quot; has a
--pid-file option, which can be used to avoid a race
condition between unmounting the filesystem and using the
underlying disk image.</p>

<p style="margin-top: 1em">language bindings</p>

<p style="margin-top: 1em">Full-featured Lua bindings have
been added in this release (thanks to Jerome Vuarand for
many suggestions).</p>

<p style="margin-top: 1em">In Ruby, optional arguments hash
is optional.</p>

<p style="margin-top: 1em">In Python, optional arguments
now don&rsquo;t use special &quot;sentinel&quot; values, so
any integer can be passed as an optional argument.</p>

<p style="margin-top: 1em">Erlang bindings now come with
examples and tests.</p>

<p style="margin-top: 1em">Erlang bindings now handle 64
bit integer parameters correctly.</p>

<p style="margin-top: 1em">The automated
&rsquo;bindtests&rsquo; now test for 64 bit cleanliness in
parameter passing. Several bugs in the bindings were found
and fixed as a result.</p>

<p style="margin-top: 1em">Better handling of blocking and
non-blocking functions should make libguestfs calls more
efficient.</p>

<p style="margin-top: 1em">inspection</p>

<p style="margin-top: 1em">Windows guests with
unlimited-sized Registries are now supported. By adding the
hivex API to the libguestfs API, it is much more efficient
and easier to inspect and modify the <br>
Windows Registry in guests.</p>

<p style="margin-top: 1em">Better support for SuSE guests
(Olaf Hering).</p>

<p style="margin-top: 1em">Return the architecture of
installed applications (John Eckersberg).</p>

<p style="margin-top: 1em">Windows 8 is now supported.</p>

<p style="margin-top: 1em">Fedora 18 is now supported.</p>

<p style="margin-top: 1em">Inspection of ISOs/CDs/DVDs can
now use the libosinfo database.</p>

<p style="margin-top: 1em">ports</p>

<p style="margin-top: 1em">Libguestfs without the appliance
can be compiled on Mac OS X (Masami HIRATA).</p>

<p style="margin-top: 1em">RHEL 5 is now explicitly
supported through the &rsquo;oldlinux&rsquo; branch in
upstream git.</p>

<p style="margin-top: 1em">PowerPC 64 bit is now supported.
Also libguestfs has been examined for endianness bugs and
these have been fixed.</p>

<p style="margin-top: 1em">daemon</p>

<p style="margin-top: 1em">A man page for the daemon
(guestfsd(8)) is included.</p>

<p style="margin-top: 1em">Security <br>
guestfish history file</p>

<p style="margin-top: 1em">The $HOME/.guestfish history
file is now created with 0600 permissions (instead of 0644
before) so it is no longer world readable.</p>

<p style="margin-top: 1em">CVE-2012-2690</p>

<p style="margin-top: 1em">Old versions of both
&quot;virt-edit&quot; and the &quot;guestfish&quot;
&quot;edit&quot; command created a new file containing the
changes but did not set the permissions, etc of the new file
to match the <br>
old one. The result of this was that if you edited a
security sensitive file such as /etc/shadow then it would be
left world-readable after the edit.</p>

<p style="margin-top: 1em">This issue was assigned
CVE-2012-2690, and is fixed in libguestfs &acirc;&yen;
1.16.</p>

<p style="margin-top: 1em">For further information, see
https://bugzilla.redhat.com/show_bug.cgi?id=788642</p>

<p style="margin-top: 1em">New APIs <br>
acl-delete-def-file <br>
acl-get-file <br>
acl-set-file <br>
canonical-device-name <br>
cap-get-file <br>
cap-set-file <br>
create-flags <br>
device-index <br>
disk-has-backing-file <br>
disk-format <br>
disk-virtual-size <br>
filesystem-available <br>
fill-dir <br>
fstrim <br>
get-cachedir <br>
get-libvirt-requested-credentials <br>
get-libvirt-requested-credential-prompt <br>
get-libvirt-requested-credential-challenge <br>
get-libvirt-requested-credential-defresult <br>
get-tmpdir <br>
hivex-close <br>
hivex-commit <br>
hivex-node-add-child <br>
hivex-node-children <br>
hivex-node-delete-child <br>
hivex-node-get-child <br>
hivex-node-get-value <br>
hivex-node-name <br>
hivex-node-parent <br>
hivex-node-set-value <br>
hivex-node-values <br>
hivex-open <br>
hivex-root <br>
hivex-value-key <br>
hivex-value-type <br>
hivex-value-utf8 <br>
hivex-value-value <br>
inspect-list-applications2 (John Eckersberg) <br>
list-ldm-volumes <br>
list-ldm-partitions <br>
ldmtool-create-all <br>
ldmtool-diskgroup-disks <br>
ldmtool-diskgroup-name <br>
ldmtool-diskgroup-volumes <br>
ldmtool-remove-all <br>
ldmtool-scan <br>
ldmtool-scan-devices <br>
ldmtool-volume-hint <br>
ldmtool-volume-partitions <br>
ldmtool-volume-type <br>
ls0 <br>
max-disks <br>
mke2fs (Wanlong Gao) <br>
mklost-and-found <br>
mkswap [added label and uuid optional arguments] <br>
mktemp (Wanlong Gao) <br>
nr-devices <br>
parse-environment <br>
parse-environment-list <br>
rm-f <br>
rsync <br>
rsync-in <br>
rsync-out <br>
set-cachedir <br>
set-libvirt-supported-credentials <br>
set-libvirt-requested-credential <br>
set-tmpdir <br>
shutdown [backported to 1.16 and 1.18] <br>
tar-in [added compress flag] <br>
tar-out [added compress, numericowner, excludes flags] <br>
umount [added force and lazy optional arguments] <br>
utsname <br>
xfs-admin (Wanlong Gao) <br>
xfs-growfs (Wanlong Gao) <br>
xfs-info (Wanlong Gao) <br>
xfs-repair (Wanlong Gao)</p>

<p style="margin-top: 1em">In the C API only:</p>

<p style="margin-top: 1em">guestfs_push_error_handler <br>
guestfs_pop_error_handler</p>

<p style="margin-top: 1em">Internals <br>
qemu &acirc;&yen; 1.1 is required (&acirc;&yen; 1.2
preferred).</p>

<p style="margin-top: 1em">febootstrap &acirc;&yen; 3.20 is
required.</p>

<p style="margin-top: 1em">libvirt is optional, but if you
want to use the new libvirt backend for launching the
appliance then libvirt &acirc;&yen; 0.10.2 would be
required.</p>

<p style="margin-top: 1em">Coverity has been run over the
complete codebase, and many issues fixed (thanks Ondrej
Vasik, Kamil Dudka).</p>

<p style="margin-top: 1em">Functions which previously had
no optargs can now be converted to ones with optargs, making
extending the API much more flexible. Source and binary
backwards compatibility is <br>
preserved for users of the API.</p>

<p style="margin-top: 1em">The way that libguestfs APIs and
structures are represented in the generator has changed to
use an OCaml struct instead of a tuple. This makes generator
descriptions more <br>
flexible and easier to understand. For details see commits
39d1a7db and eb185eef.</p>

<p style="margin-top: 1em">Separation of the library code
into more files:</p>

<p style="margin-top: 1em">&Acirc;&middot; Launch backends
are now located in separate files eg.
src/launch-appliance.c,
&quot;src/launch-libvirt.c&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; Generated action
code is now split over several src/action*.c files, for
faster compilation.</p>

<p style="margin-top: 1em">&Acirc;&middot; The huge
src/guestfs.c file is now split into smaller logical
units.</p>

<p style="margin-top: 1em">POD (documentation) is now
generated using a rewritten Perl program instead of pod2* +
shell scripts.</p>

<p style="margin-top: 1em">Man pages now contain stable
dates (Hilko Bengen).</p>

<p style="margin-top: 1em">Skipped tests now exit with code
77, so they appear as &quot;SKIP:&quot; in &quot;make
check&quot; output.</p>

<p style="margin-top: 1em">The parallel mount-local test
has been rewritten in C (RHBZ#838081).</p>

<p style="margin-top: 1em">Ruby 1.8.5 is now supported
(though Ruby &acirc;&yen; 1.9 is preferred).</p>

<p style="margin-top: 1em">Perl bindings can be disabled
via &quot;./configure --disable-perl&quot; (Wulf C.
Krueger). Note that Perl is still required in order to build
libguestfs.</p>

<p style="margin-top: 1em">Java bindings are now
enabled/disabled using &quot;./configure --with-java&quot;
or &quot;./configure --without-java&quot; (Wulf C.
Krueger).</p>

<p style="margin-top: 1em">New configure options
&quot;./configure --enable-code-profiling&quot; and
&quot;./configure --enable-code-coverage&quot;.</p>

<p style="margin-top: 1em">Multiple fixes to use of 64 bit
integers in language bindings.</p>

<p style="margin-top: 1em">The appliance backend now uses
sgabios instead of vgabios (Dan Berrange).</p>

<p style="margin-top: 1em">The &quot;./run&quot; script now
sets enough environment variables that you can run OCaml,
Python, Ruby, Java, GJS, Erlang, Lua programs.</p>

<p style="margin-top: 1em">&quot;./run --test&quot; flag
for running tests with minimal output. It also prints the
time taken to run each test.</p>

<p style="margin-top: 1em">The &quot;./run&quot; script now
builds up paths cumulatively, meaning that you can use
&quot;./run&quot; twice, or use the libguestfs and libvirt
&quot;./run&quot; scripts together.</p>

<p style="margin-top: 1em">You can extract a list of
external commands required by the daemon, making building
the appliance on certain distros easier (Olaf Hering).</p>

<p style="margin-top: 1em">The &quot;virt-rescue&quot;
command is now tested during &quot;make check&quot;.</p>

<p style="margin-top: 1em">The generator now removes unused
generated files. This helps when going back and forth with
git rebase, git bisect, etc.</p>

<p style="margin-top: 1em">Tests now run in a separate
toplevel &quot;tmp/&quot; directory in the source. This
allows the directory to be labelled for SELinux (sVirt), and
also makes it easier to clean up.</p>

<p style="margin-top: 1em">&quot;make syntax-check&quot;
now works to a greater extent, and many problems in the main
code that were found by syntax-check have been fixed (thanks
Jim Meyering).</p>

<p style="margin-top: 1em">Emacs mode (-*- foo -*-) has
been added to generated files.</p>

<p style="margin-top: 1em">Progress bar output is now sent
to /dev/tty so it doesn&rsquo;t end up in the regular output
of the program. virt-resize and virt-sparsify now suppress
progress bars if stdout is not <br>
a tty.</p>

<p style="margin-top: 1em">There is now a &quot;./configure
--without-libvirt&quot; option. This is useful for testing
that the code still compiles without libvirt.</p>

<p style="margin-top: 1em">There is now an internal
mini-library for running commands. This allows us to
redirect errors from external commands into events.</p>

<p style="margin-top: 1em">Code for handling temporary
directories and the appliance cache was completely
overhauled.</p>

<p style="margin-top: 1em">Code for temporarily
ignoring/disabling errors now looks like this:</p>

<p style="margin-top: 1em">guestfs_push_error_handler (g,
NULL, NULL); <br>
guestfs_mkdir (g, &quot;/foo&quot;); /* We don&rsquo;t care
if this fails. */ <br>
guestfs_pop_error_handler (g);</p>

<p style="margin-top: 1em">The &quot;tests/extra&quot;
directory has gone. The &quot;extra tests&quot; are now
split into separately runnable targets, such as &quot;make
check-valgrind&quot;. Use &quot;make help&quot; to get a
summary of the <br>
targets.</p>

<p style="margin-top: 1em">The &quot;lpj&quot; option is
passed to the appliance kernel when using TCG. This should
improve clock stability (thanks Marcelo Tosatti, Olaf
Hering).</p>

<p style="margin-top: 1em">Bugs fixed <br>
https://bugzilla.redhat.com/882417 <br>
libguestfs tools fail with odd error messages if TMPDIR is
not an absolute path</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/882299
<br>
Windows 8 guest disks can&rsquo;t be mounted: &quot;The NTFS
partition is in an unsafe state. Please resume and shutdown
Windows fully (no hibernation or fast restarting), or mount
the <br>
volume read-only with the &rsquo;ro&rsquo; mount
option.&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/881953
<br>
libguestfs: migration to /etc/hostname, /etc/vconsole.conf,
/etc/locale.conf</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/880801
<br>
virt-df with two -a options displays incorrect disk image
name</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/879416
<br>
libguestfs-test-tool pauses when you use --help option</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/876579
<br>
mke2fs API does not apply block device naming translation to
journaldevice optarg</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/860235
<br>
SELinux policy ought to allow qemu to write to
unconfined_u:object_r:user_tmp_t:s0</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/859949
<br>
RFE: inspect-list-applications does not return the
architecture of RPM packages</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/859885
<br>
inspect-list-applications does not list all installed RPM
packages with same name and different versions</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/859876
<br>
guestfish printed paths are not canonicalized</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/859875
<br>
Progress bar output should go to tty(?) stderr(?)</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/858696
<br>
virt-sysprep reports Guestfs.Error(&quot;read_lines: fopen:
/etc/sysconfig/network: No such file or directory&quot;) on
some Fedora guests</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/858128
<br>
libguestfs fail to list devices added by
add-drive-ro-with-if twice</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/858126
<br>
virt-inspector fail to work with some windows guests</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/853762
<br>
virt-sparsify should use a more robust method to detect the
input format</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/853393
<br>
libvirt doesn&rsquo;t label console, serial sockets</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/853159
<br>
virt-rescue in Fedora 18 is completely broken</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/852394
<br>
libguestfs inspection limits registries to 100 MiB</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/852194
<br>
virt-sparsify --compress fails if output is raw format</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/847881
<br>
RFE: allow extra arguments (like --exclude) to tar-out</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/847880
<br>
tar-out should allow (or force) --numeric-owner</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/845522
<br>
guestfish &quot;copy-out / localdir&quot; command fails with
&quot;No such file or directory&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/845488
<br>
Long filenames on NTFS cause tar-out, copy-out etc to fail
with error &quot;Cannot open: File name too long&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/842307
<br>
RFE: Need help designing and implementing selinux policy for
libguestfs/sVirt</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/840572
<br>
virt-make-fs / tar-in should support vfat properly</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/840115
<br>
guestfish touch problem - case_sensitive_path API expects
the file to exist</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/836710
<br>
Data loss when writing to qcow2-format disk files</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/834712
<br>
lvresize, lvresize-free fail unnecessarily if you
don&rsquo;t change the size of the LV: &quot;New size (nn
extents) matches existing size (nn extents)&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/824716
<br>
compress-device-out didn&rsquo;t support bzip2</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/824043
<br>
guestfish unrecognized mount option gives confusing error
message</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/823887
<br>
Filenames containing Chinese characters can&rsquo;t be
created on vfat filesystems</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/823885
<br>
virt-make-fs cannot create vfat filesystem containing
filesystems with Chinese characters</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/823883
<br>
virt-make-fs -t fat fails with an obscure error message</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/823821
<br>
Inspection fails when /etc/HOSTNAME is empty</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/801117
<br>
libguestfs cannot get icon for Windows 8</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/798979
<br>
Ubuntu install CDs from oneiric onwards are not recognized:
&quot;multi-boot operating systems are not
supported&quot;</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/782167
<br>
libguestfs doesn&rsquo;t recognize Windows Dynamic disks in
some configurations, eg. spanned</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/713678
<br>
Not all febootstrap messages are redirected to log
callbacks</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/627675
<br>
libguestfs inspector code cannot handle /dev/disk/by-id/*
paths</p>


<p style="margin-top: 1em">https://bugzilla.redhat.com/602997
<br>
part-get-bootable gives wrong result with an unordered part
layout</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.18 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.16.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
virt tools</p>

<p style="margin-top: 1em">- virt-sysprep has been
rewritten and expanded (thanks Wanlong Gao) <br>
http://libguestfs.org/virt-sysprep.1.html</p>

<p style="margin-top: 1em">- virt-sparsify --zero is a new
option that zeroes the named <br>
partition or filesystem</p>

<p style="margin-top: 1em">- virt-sparsify can now safely
sparsify Linux swap partitions</p>

<p style="margin-top: 1em">- virt-sparsify fixed so it
cleans up after ^C <br>
http://libguestfs.org/virt-sparsify.1.html</p>

<p style="margin-top: 1em">- a new tool
&rsquo;libguestfs-make-fixed-appliance&rsquo; is provided to
build <br>
fixed appliances that can be copied to other machines that
don&rsquo;t <br>
have febootstrap support <br>

http://libguestfs.org/libguestfs-make-fixed-appliance.1.html</p>

<p style="margin-top: 1em">- virt-filesystems now displays
the parents (containers) of MD <br>
devices and volume groups</p>

<p style="margin-top: 1em">- virt-alignment-scan, run with
no args, displays alignment information <br>
for all libvirt domains</p>

<p style="margin-top: 1em">- virt-df and
virt-alignment-scan will display information from all <br>
guests even when a disk is inaccessible</p>

<p style="margin-top: 1em">- virt-rescue new --scratch
option to make scratch disks <br>

https://rwmj.wordpress.com/2012/04/26/virt-rescue-scratch/#content</p>

<p style="margin-top: 1em">- virt-make-fs can now be used
to create btrfs</p>

<p style="margin-top: 1em">- virt-edit preserves
permissions, UID, GID and SELinux context <br>
when editing files</p>

<p style="margin-top: 1em">- guestfish passes the close
event over stdout and remote correctly</p>

<p style="margin-top: 1em">- guestfish new
&rsquo;--pipe-error&rsquo; option lets you detect errors in
pipe <br>
commands</p>

<p style="margin-top: 1em">- guestfish globs now expand
device names</p>

<p style="margin-top: 1em">- comma and colon characters in
filenames now handled correctly by <br>
all virt tools</p>

<p style="margin-top: 1em">inspection</p>

<p style="margin-top: 1em">- added support for Fedora
17+</p>

<p style="margin-top: 1em">- added support for FreeDOS</p>

<p style="margin-top: 1em">- added support for Buildroot
and Cirros</p>

<p style="margin-top: 1em">- inspection is now compatible
with Windows guests that have been <br>
sysprepped (thanks Grant Williamson).</p>

<p style="margin-top: 1em">API</p>

<p style="margin-top: 1em">- broad support for btrfs added,
including adding multiple devices, <br>
fsck, snapshots (thanks Wanlong Gao)</p>

<p style="margin-top: 1em">- the new
&rsquo;mount-local&rsquo; API brings FUSE support directly
into the <br>
core libguestfs API <br>

https://rwmj.wordpress.com/2012/05/14/tip-using-mount-local-api-from-c/#content</p>

<p style="margin-top: 1em">- new man page:
guestfs-performance(1), which contains performance <br>
tuning tips <br>
http://libguestfs.org/guestfs-performance.1.html</p>

<p style="margin-top: 1em">- new man page: guestfs-faq(1),
Frequently Asked Questions <br>
http://libguestfs.org/guestfs-faq.1.html</p>

<p style="margin-top: 1em">- ENOTSUP (from
guestfs_last_errno) is now returned for APIs that <br>
are not supported</p>

<p style="margin-top: 1em">examples</p>

<p style="margin-top: 1em">- &rsquo;copy_over&rsquo;
example showing how to copy between two handles</p>

<p style="margin-top: 1em">- &rsquo;display_icon&rsquo;
program displays the icon associated with a guest</p>

<p style="margin-top: 1em">- &rsquo;mount_local.c&rsquo;
example shows how to use the mount-local API</p>

<p style="margin-top: 1em">Security <br>
(no security problems were found or fixed in this
release)</p>

<p style="margin-top: 1em">New APIs <br>
btrfs-device-add: Add devices to a btrfs filesystem. <br>
btrfs-device-delete: Remove devices from a btrfs filesystem.
<br>
btrfs-filesystem-sync: Sync a btrfs filesystem. <br>
btrfs-filesystem-balance: Balance a btrfs filesystem. <br>
btrfs-fsck: Check btrfs filesystem. <br>
btrfs-set-seeding: Enable or disable seeding. <br>
btrfs-subvolume-create: Create a btrfs snapshot. <br>
btrfs-subvolume-delete: Delete a btrfs snapshot. <br>
btrfs-subvolume-list: List btrfs snapshots and subvolumes.
<br>
btrfs-subvolume-set-default: Set default btrfs subvolume.
<br>
btrfs-subvolume-snapshot: Create a writable btrfs snapshot.
<br>
get-e2attrs: List ext2 file attributes of a file. <br>
get-e2generation: Get ext2 file generation of a file. <br>
isoinfo, isoinfo-device: Get information from the header of
ISO files. <br>
llz: List files with SELinux information. <br>
lvcreate-free: Create an LVM logical volume in % remaining
free space. <br>
md-stat: Return underlying devices from an MD device. <br>
mkfs-brtfs: Make btrfs filesystem, with all tunables. <br>
mount-local, mount-local-run, umount-local: FUSE support in
the API. <br>
ntfsclone-in, ntfsclone-out: Save, restore NTFS from backup.
<br>
ntfsfix: Fix common errors and force Windows to check NTFS.
<br>
set-e2attrs: Set or clear ext2 file attributes of a file.
<br>
set-e2generation: Set ext2 file generation of a file. <br>
set-label: Unified interface for setting filesystem label.
<br>
vgmeta: Get volume group metadata. <br>
wipefs: Wipe filesystem signatures from a device. <br>
zero-free-space: Zero free space in a filesystem.</p>

<p style="margin-top: 1em">Internals <br>
- The debian/ subdirectory has been removed. We recommend
you use <br>
the official Debian packages made by Hilko Bengen. <br>
http://people.debian.org/~bengen/libguestfs/ <br>
http://packages.debian.org/search?keywords=libguestfs</p>

<p style="margin-top: 1em">- O_CLOEXEC / SOCK_CLOEXEC is
now used for almost all file <br>
descriptors that the library opens.</p>

<p style="margin-top: 1em">- posix_fadvise is called when
sequentially reading or writing large <br>
files.</p>

<p style="margin-top: 1em">- close all file descriptors and
remove all signal handlers in the <br>
recovery process</p>

<p style="margin-top: 1em">- multiple gcc warnings and
Coverity bugs have been fixed; many <br>
strict-overflow bugs have also been fixed</p>

<p style="margin-top: 1em">- use ./configure
--enable-valgrind-daemon to use valgrind on the <br>
daemon; many errors have been fixed</p>

<p style="margin-top: 1em">- use ./configure
--with-qemu-options to pass extra options to qemu</p>

<p style="margin-top: 1em">- the daemon now has a growable
strings buffer type (DECLARE_STRINGSBUF)</p>

<p style="margin-top: 1em">- the &lt;guestfs.h&gt; header
file works with C++ and we have a regression <br>
test for this</p>

<p style="margin-top: 1em">- multiple APIs which should
only be called in the CONFIG state now <br>
give an error if they are not</p>

<p style="margin-top: 1em">- .gitignore fixed to use
absolute paths</p>

<p style="margin-top: 1em">- gobject bindings have been
expanded, including mapping libguestfs <br>
events to gobject signals (thanks Matt Booth)</p>

<p style="margin-top: 1em">- gobject documentation is
generated properly (thanks Matt Booth)</p>

<p style="margin-top: 1em">- gobject header files now live
in a subdirectory</p>

<p style="margin-top: 1em">- CompareWithString test in the
generator now works</p>

<p style="margin-top: 1em">- FUInt32, FUInt64 struct field
types now use the correct XDR type</p>

<p style="margin-top: 1em">- OCaml tests are now run on
bytecode and native code.</p>

<p style="margin-top: 1em">- java -Xlint:all is used, and
all warnings have been fixed</p>

<p style="margin-top: 1em">- bmptopng, wrestool (etc)
missing or failure no longer prints <br>
warning messages</p>

<p style="margin-top: 1em">- ruby: Use RbConfig instead of
Config.</p>

<p style="margin-top: 1em">- PYTHONPATH is set by the ./run
script.</p>

<p style="margin-top: 1em">- appliance building is now
thread-safe.</p>

<p style="margin-top: 1em">- appliance now uses
&rsquo;ip&rsquo; instead of &rsquo;ifconfig&rsquo; and
&rsquo;netstat&rsquo; <br>
commands</p>

<p style="margin-top: 1em">- several fixes to make parallel
builds work properly</p>

<p style="margin-top: 1em">- guestfish --listen now cleans
up properly</p>

<p style="margin-top: 1em">- the BUSY state has been
removed</p>

<p style="margin-top: 1em">- gettextize has been removed,
replaced by a simple Makefile.am</p>

<p style="margin-top: 1em">- gettext support now covers
virt-resize, virt-sparsify and virt-sysprep</p>

<p style="margin-top: 1em">- better support for the arm
architecture</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 822490 virt-ls error: &quot;libguestfs: error: checksum:
path: parameter cannot be NULL&quot; <br>
- 816839 data overflow error when debug progress -1 <br>
- 816098 virt-make-fs fails to make a btrfs filesystem
because it doesn&rsquo;t allocate enough space <br>
- 811872 inspection fails on ubuntu 10.04 guest with
encrypted swap <br>
- 811650 guestfs_last_error not set when qemu fails early
during launch <br>
- 811649 libguestfs cannot open disk images which are
symlinks to files that contain &rsquo;:&rsquo; (colon)
character <br>
- 811117 [RFE][virt-sysprep] net-hwaddr not removed from
&quot;ifcfg-*&quot; files on rhel <br>
- 811112 [RFE][virt-sysprep] hostname can not be changed on
rhel system <br>
- 809361 inspection doesn&rsquo;t recognize Fedora 18 (grub2
+ GPT) <br>
- 807905 mkfs blocksize option breaks when creating btrfs
<br>
- 805070 virt-filesystems should show &rsquo;parents&rsquo;
of LV and RAID devices <br>
- 804464 libguestfs cannot be built when LINGUAS is
different then ja or uk <br>
- 803664 libguestfs inspection fails on Windows XP:
libguestfs: error: hivex: could not locate
HKLMTEMuntedDevices <br>
- 803533 guestfish: write error <br>
- 802389 event handlers for &rsquo;close&rsquo; event
doesn&rsquo;t work in remote mode <br>
- 802109 libguestfs uses putc on stderr, results in many
individual 1 byte writes of debug messages <br>
- 801640 [RFE] the error reported by resize2fs-M need to be
more clear <br>
- 801298 Possible null dereference and resource leaks <br>
- 801273 Document for set-pgroup need to be updated <br>
- 798196 virt-resize confuses format and output_format
variables; using --output-format sets the input format <br>
- 797986 virt-resize on Windows XP in sysprep state causes
&quot;UNMOUNTABLE_BOOT_VOLUME&quot; BSOD <br>
- 796520 [RFE] Prevent user from running some appliance
configure commands after appliance boot up <br>
- 790721 multiprovider build error: RuntimeError: link:
/tmp/.guestfs-0/kernel /tmp/.guestfs-0/kernel.10139: File
exists <br>
- 789960 guestfsd crash when try to mount non-exist disk
<br>
- 789504 virt-df (other tools?) should not give up if a
guest disk is missing <br>
- 788641 virt-edit doesn&rsquo;t preserve file permissions
<br>
- 786215 libguestfs inspection does not recognize FreeDOS
operating system <br>
- 786188 libguestfs inspection does not recognize FreeDOS
install CD <br>
- 785668 aug-defnode: daemon crash <br>
- 784647 Libguestfs uses deprecated net-tools <br>
- 769304 virt-resize on RHEL 6 kernel fails to re-read the
partition table <br>
- 755729 Error message for resize2fs-M needs tweaking <br>
- 701814 virt-win-reg fails on a libvirt guest that has no
defined disk format: &quot;format parameter is empty or
contains disallowed characters&quot; <br>
- 679737 libguestfs: improve error message when zerofree is
not available in the appliance <br>
- 635971 glob mkfs ext2 /dev/vd[b-t]1 does not expand</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.16 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.14.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
libguestfs</p>

<p style="margin-top: 1em">- allow XFS filesystems to be
created over an existing filesystem <br>
(Wanlong Gao)</p>

<p style="margin-top: 1em">- the (unspecified) default
alignment for part-disk has been <br>
changed to 64K for better support of high-end
network-attached <br>
storage</p>

<p style="margin-top: 1em">- new guestfs-testing(1) man
page</p>

<p style="margin-top: 1em">- list-filesystems returns MD
devices containing filesystems <br>
(Matthew Booth)</p>

<p style="margin-top: 1em">- support for GCC &gt;= 4.7 (Jim
Meyering)</p>

<p style="margin-top: 1em">- check user does not add the
same drive twice (Wanlong Gao).</p>

<p style="margin-top: 1em">language bindings</p>

<p style="margin-top: 1em">- Experimental GObject bindings,
with support for GObject <br>
Introspection. You can now use libguestfs from Javascript.
<br>
Please note these are not stable and final in this release.
<br>
(Matthew Booth).</p>

<p style="margin-top: 1em">- support for Ruby &gt;= 1.9</p>

<p style="margin-top: 1em">- Ruby bindings can be disabled
individually (Hilko Bengen)</p>

<p style="margin-top: 1em">- support for Python 2.6, 3.x
(Richard Jones, Hilko Bengen)</p>

<p style="margin-top: 1em">- support for PHP &gt;= 5.4</p>

<p style="margin-top: 1em">- new %guestfs_introspection
hash is available in Perl bindings so <br>
you can query which optional arguments are available</p>

<p style="margin-top: 1em">inspection</p>

<p style="margin-top: 1em">- guests with MD devices can be
inspected (Matthew Booth)</p>

<p style="margin-top: 1em">- support for GNU/Hurd
guests</p>

<p style="margin-top: 1em">guestfish</p>

<p style="margin-top: 1em">- libguestfs events (such as
progress bar events and log messages) can <br>
be trapped and processed by user-defined shell scripts.</p>

<p style="margin-top: 1em">- MD devices are tab-completed
(Matthew Booth)</p>

<p style="margin-top: 1em">virt tools</p>

<p style="margin-top: 1em">- New tool virt-format for
erasing and making blank disks</p>

<p style="margin-top: 1em">- virt-sparsify new --compress
and -o options to allow for compressed <br>
and different format output</p>

<p style="margin-top: 1em">- virt-sparsify can now detect
and sparsify .vdi files</p>

<p style="margin-top: 1em">- virt-sysprep no longer
requires xmlstarlet; a new virt-inspector --xpath <br>
option has been added to replace this functionality</p>

<p style="margin-top: 1em">- virt-rescue has a new
--suggest option which suggests mount commands <br>
for the guest</p>

<p style="margin-top: 1em">- virt-resize no longer requires
OCaml pcre library</p>

<p style="margin-top: 1em">libguestfs live</p>

<p style="margin-top: 1em">- daemon will no longer try to
edit your live /etc/lvm configuration</p>

<p style="margin-top: 1em">- fix a potential security
problem with predictable /tmp names (Steve Kemp)</p>

<p style="margin-top: 1em">Security <br>
CVE-2011-4127, RHBZ#757071 <br>
Mitigate possible privilege escalation via SG_IO ioctl <br>
For more information, see:
https://github.com/libguestfs/libguestfs/commit/9a5f784d511a8f00a8386f316eab41fe660430db</p>

<p style="margin-top: 1em">New APIs <br>
blkid: print all attributes of a device known to blkid
(Wanlong Gao) <br>
e2fsck: access to more features of e2fsck (Wanlong Gao) <br>
list-md-devices: list of Linux MD devices (Matthew Booth)
<br>
md-create: create an MD device <br>
md-detail: returns metadata for an MD device (Matthew Booth)
<br>
md-stop: stop an MD device (Wanlong Gao) <br>
tune2fs: allow ext2/3/4 filesystems to be tuned</p>

<p style="margin-top: 1em">Internals <br>
Git hosting has moved to http://github.com/libguestfs</p>

<p style="margin-top: 1em">The various test directories
have been rearranged logically, and now <br>
all appear under &rsquo;tests/&rsquo;.</p>

<p style="margin-top: 1em">There is a &rsquo;make
extra-tests&rsquo; rule which runs ordinary tests and <br>
additional tests, using valgrind to check for memory
problems.</p>

<p style="margin-top: 1em">Multiple memory leaks and other
problems found by valgrind and fixed.</p>

<p style="margin-top: 1em">Support for optional arguments
in the generator has been rewritten <br>
to provide more features and safety (Matthew Booth).</p>

<p style="margin-top: 1em">With gcc -fvisibility=hidden is
used for internal symbols, avoiding <br>
call indirection via the PLT.</p>

<p style="margin-top: 1em">RHashtable functions can be
tested in the generator.</p>

<p style="margin-top: 1em">ADD_ARG macro in daemon allows
arg lists to be constructed without <br>
risk of stack smashing.</p>

<p style="margin-top: 1em">Fix generation of OCaml
functions that have more than 10 arguments.</p>

<p style="margin-top: 1em">psmisc has been added to the
appliance, allowing use of &rsquo;fuser&rsquo;, <br>
&rsquo;killall&rsquo; and &rsquo;pstree&rsquo; for
debugging.</p>

<p style="margin-top: 1em">bindtests now cover RBufferOut
and optional arguments (Matthew Booth).</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 769680 temporary directories created during appliance
builds are not cleaned up on error <br>
- 761460 guestfs_utimens hangs on named pipes <br>
- 761451 guestfs_utimens cannot set times on a directory
<br>
- 760775 &quot;guestfish: multi-boot operating systems are
not supported by the -i option&quot; should be more
explanatory <br>
- 760669 guestfish copy-in and &lt;! (inline execution)
don&rsquo;t mix well: pclose: No child processes <br>
- 760000 libguestfs fails to compile with Ruby &gt;= 1.9
<br>
- 755729 Error message for resize2fs-M needs tweaking <br>
- 750889 Python code incompatible with Python v3. <br>
- 596761 Ctrl-&nbsp;causes guestfish to abort</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.14 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.12.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
Erlang bindings.</p>

<p style="margin-top: 1em">virt-alignment-scan is a new
tool to check the alignment of <br>
partitions within virtual machines or disk images.</p>

<p style="margin-top: 1em">virt-sparsify is a new tool to
make virtual machine disk images <br>
sparse.</p>

<p style="margin-top: 1em">virt-sysprep is a new tool to
make cloning guests from a template <br>
simpler.</p>

<p style="margin-top: 1em">guestfish</p>

<p style="margin-top: 1em">- New commands setenv, unsetenv,
to set environment variables.</p>

<p style="margin-top: 1em">- The input file and line number
is printed in error messages.</p>

<p style="margin-top: 1em">- guestfish progress bars are
now a &quot;mini-library&quot; used by other <br>
tools too.</p>

<p style="margin-top: 1em">guestmount</p>

<p style="margin-top: 1em">- the --live option (for access
to live VMs) now works.</p>

<p style="margin-top: 1em">virt-cat</p>

<p style="margin-top: 1em">- virt-cat can now handle
Windows paths and drive letters (RHBZ#693359).</p>

<p style="margin-top: 1em">virt-filesystems</p>

<p style="margin-top: 1em">- the MBR partition type byte is
displayed in --long output.</p>

<p style="margin-top: 1em">virt-make-fs</p>

<p style="margin-top: 1em">- virt-make-fs now sets the MBR
partition type byte correctly, <br>
improving compatibility with Windows (RHBZ#746295).</p>

<p style="margin-top: 1em">virt-resize</p>

<p style="margin-top: 1em">- virt-resize can now work with
guests using extended and logical <br>
partitions, in particular Ubuntu guests.</p>

<p style="margin-top: 1em">- virt-resize can now align the
first partition of Windows guests, <br>
improving performance. The new virt-resize --align-first
option <br>
controls this behaviour.</p>

<p style="margin-top: 1em">- The virt-resize
--machine-readable flag makes it possible to use <br>
virt-resize from other programs.</p>

<p style="margin-top: 1em">- Partitions are now aligned to
128 sectors (usually 64K) by <br>
default. This improves efficiency on high-end storage. The
new <br>
virt-resize --alignment option allows the alignment to be
<br>
adjusted.</p>

<p style="margin-top: 1em">virt-win-reg</p>

<p style="margin-top: 1em">- The syntax for deleting
registry keys and values is documented <br>
in the man page (RHBZ#737944).</p>

<p style="margin-top: 1em">library</p>

<p style="margin-top: 1em">- non-printing characters are
escaped correctly in debug output.</p>

<p style="margin-top: 1em">- GUESTFS_EVENT_ENTER is a new
event type generated whenever a <br>
libguestfs function is called.</p>

<p style="margin-top: 1em">- the library contains
systemtap/DTrace probes.</p>

<p style="margin-top: 1em">- the library can now be
compiled without hivex (RHBZ#723474).</p>

<p style="margin-top: 1em">inspection</p>

<p style="margin-top: 1em">- Improve detection of Windows
disks.</p>

<p style="margin-top: 1em">- Adds support for: <br>
ttylinux - a minimal Linux <br>
Mageia (thanks Michael Scherer) <br>
OpenSUSE and zypper (thanks Michael Scherer, Vincent Untz)
<br>
Ubuntu logos (thanks Michael Scherer) <br>
NetBSD and pkgsrc (thanks Michael Scherer)</p>

<p style="margin-top: 1em">- Handle some guest types that
use /dev/root in /etc/fstab.</p>

<p style="margin-top: 1em">- Fix handling of guests with
&gt; 26 disks (thanks Matthew Booth)</p>

<p style="margin-top: 1em">- Add support for guests with HP
Smart Array disks (thanks Matthew Booth)</p>

<p style="margin-top: 1em">febootstrap</p>

<p style="margin-top: 1em">- FEBOOTSTRAP_KERNEL,
FEBOOTSTRAP_MODULES environment variables can <br>
be set in order to choose which kernel to use for the
appliance.</p>

<p style="margin-top: 1em">misc</p>

<p style="margin-top: 1em">- ArchLinux support now working
with Linux 3.0 (thanks Erik Nolte)</p>

<p style="margin-top: 1em">- libvirt disks marked
&lt;readonly/&gt; are now added readonly when <br>
using the virt-tools &rsquo;-d&rsquo; option.</p>

<p style="margin-top: 1em">Security <br>
(no security problems were found or fixed in this
release)</p>

<p style="margin-top: 1em">New APIs <br>
compress-out, compress-device-out, copy-device-to-device,
<br>
copy-device-to-file, copy-file-to-device, copy-file-to-file,
<br>
get-smp, part-to-partnum, set-smp.</p>

<p style="margin-top: 1em">The mount API no longer
implicitly adds -o sync,noatime options.</p>

<p style="margin-top: 1em">add-domain has a new
&rsquo;readonlydisk&rsquo; optional parameter to control
<br>
how &lt;readonly/&gt; disks are handled.</p>

<p style="margin-top: 1em">Internals <br>
- Coverity was run on the source and more bugs were
identified and <br>
fixed.</p>

<p style="margin-top: 1em">- PCRE library is now required
to build libguestfs.</p>

<p style="margin-top: 1em">- APIC is now the default for
the appliance. You can also enable <br>
SMP support in the appliance.</p>

<p style="margin-top: 1em">- OCaml bindings now correctly
acquire GC lock during callbacks.</p>

<p style="margin-top: 1em">- Out of tree builds should now
work correctly (thanks Hilko Bengen).</p>

<p style="margin-top: 1em">- ./configure
--with-extra=&quot;...&quot; can be used by packagers to set
<br>
the extra version string.</p>

<p style="margin-top: 1em">- zero, zero-device APIs: if the
blocks already contain zeroes, <br>
don&rsquo;t write zeroes, so that we don&rsquo;t
unnecessarily make the <br>
underlying storage non-sparse.</p>

<p style="margin-top: 1em">- is-zero, is-zero-device APIs:
optimize these so zero detection is <br>
faster.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 748266 libguestfs should detect versions of qemu which
require -machine pc option <br>
- 747290 libguestfs ignores &lt;readonly/&gt; in libvirt XML
<br>
- 747287 Misleading error message when permission denied
opening a disk image <br>
- 746295 virt-make-fs doesn&rsquo;t set partition ID <br>
- 744795 guestmount --live is not usable <br>
- 737944 virt-win-reg hyphen (delete key) syntax may be
wrong, and is not documented <br>
- 733297 ruby event handlers fail with &quot;exception in
callback: wrong argument type Proc (expected Data)&quot;
<br>
- 731744 libguestfs should escape special/non-printing
characters in debug output <br>
- 729887 appliance crashes running aug_init with flags=4
<br>
- 729075 libguestfs confuses Hp_recovery partition with
Windows root filesystem <br>
- 727178 error: luks_open: cryptsetup: error while loading
shared libraries: libfipscheck.so.1: cannot open shared
object file: No such file or directory <br>
- 726739 libguestfs: error: aug_get: no matching node,
trying to find hostname <br>
- 723474 If hivex and/or pcre not installed, libguestfs
fails to compile <br>
- 693359 virt-cat and virt-edit don&rsquo;t handle case
sensitive NTFS paths properly <br>
- 678231 virt-inspector reports unknown filesystem UUID <br>
- 671082 libguestfs does not work with kernel-rt <br>
- 666578 libguestfs: unknown filesystem label SWAP-sda2 <br>
- 642821 virt-resize falls over on a disk image with a
logical swap partition</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS
1.12 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.10.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
guestfish</p>

<p style="margin-top: 1em">- guestfish strings can use
escapes, <br>
eg. &gt;&lt;fs&gt; write /foo &quot;line 10ine 20</p>

<p style="margin-top: 1em">- guestfish write-append command
can be used to append to files.</p>

<p style="margin-top: 1em">- Long-running file uploads and
downloads can be cancelled through the <br>
API or by hitting ^C in guestfish.</p>

<p style="margin-top: 1em">- New guestfish
&quot;display&quot; command for displaying graphical files
<br>
inside guests.</p>

<p style="margin-top: 1em">- In guestfish, tab completion
now works on /dev/mapper devices.</p>

<p style="margin-top: 1em">virt-inspector</p>

<p style="margin-top: 1em">- Inspection API can get an icon
or logo for certain guests.</p>

<p style="margin-top: 1em">- virt-inspector includes the
logo and hostname for certain guests.</p>

<p style="margin-top: 1em">- virt-inspector can now get the
version and release numbers for RPM <br>
packages.</p>

<p style="margin-top: 1em">- CentOS and Scientific Linux
are now treated as separate distros by <br>
the inspection API.</p>

<p style="margin-top: 1em">virt-resize</p>

<p style="margin-top: 1em">- virt-resize can now handle
btrfs.</p>

<p style="margin-top: 1em">- New virt-resize
--ntfsresize-force option allows Windows VMs to be <br>
resized multiple times.</p>

<p style="margin-top: 1em">other virt tools</p>

<p style="margin-top: 1em">- guestfish, guestmount,
virt-cat, virt-df, virt-edit, virt-filesystems, <br>
virt-inspector, virt-ls and virt-rescue now allow you to use
<br>
&quot;-d UUID&quot; option to specify a guest by UUID. This
makes them more <br>
robust to use from other programs.</p>

<p style="margin-top: 1em">- virt-ls -lR option allows
complex file iteration and guest analysis.</p>

<p style="margin-top: 1em">- virt-win-reg supports
HKEY_USERS&lt;SID&gt; and HKEY_USERS&lt;username&gt;.</p>

<p style="margin-top: 1em">- virt-win-reg new option
--unsafe-printable-strings allows printable <br>
strings to be displayed in the output (unsafely: read the
documentation <br>
before using).</p>

<p style="margin-top: 1em">- virt-edit has been rewritten
in C.</p>

<p style="margin-top: 1em">API and language bindings</p>

<p style="margin-top: 1em">- Java is now completely
supported. <br>
See http://libguestfs.org/guestfs-java.3.html</p>

<p style="margin-top: 1em">- JRuby is supported via the
Java bindings.</p>

<p style="margin-top: 1em">- guestfs_close now appears in
trace messages.</p>

<p style="margin-top: 1em">- Python binding adds explicit
g.close() method.</p>

<p style="margin-top: 1em">- Python programs can now use
the new event API.</p>

<p style="margin-top: 1em">- Python GIL is released during
libguestfs calls, allowing multithreaded <br>
Python programs to work properly.</p>

<p style="margin-top: 1em">- 9pfs (Plan 9 filesystems
exported from the host) are now supported.</p>

<p style="margin-top: 1em">- Add
-DGUESTFS_WARN_DEPRECATED=1 to warn about use of deprecated
API <br>
functions in C programs.</p>

<p style="margin-top: 1em">- New manual page
guestfs-recipes(1) with recipes.</p>

<p style="margin-top: 1em">- mkfs-opts can now set inode
size and sector size on created filesystems <br>
(thanks Nikita Menkovich).</p>

<p style="margin-top: 1em">- guestfs_last_errno is now
accessible from OCaml (as g#last_errno ()).</p>

<p style="margin-top: 1em">Security <br>
- optargs_bitmask is checked even for calls that have no
optional <br>
arguments. This closes a possible exploit in the daemon from
<br>
untrusted callers.</p>

<p style="margin-top: 1em">New APIs <br>
btrfs-filesystem-resize, get-pgroup, inspect-get-icon,
is-zero, <br>
is-zero-device, list-9p, list-dm-devices, mount-9p,
ntfsresize-opts, <br>
set-pgroup, write-append</p>

<p style="margin-top: 1em">Internals <br>
- Coverity (a static analysis tool) was run across the
codebase and <br>
many fixes were made.</p>

<p style="margin-top: 1em">- Generator can handle functions
that return RBufferOut and have <br>
optional arguments.</p>

<p style="margin-top: 1em">- Compatible with Perl 5.14.</p>

<p style="margin-top: 1em">- Compatible with gcc 4.6.</p>

<p style="margin-top: 1em">- Perform safety checks on
QEMU.</p>

<p style="margin-top: 1em">- C API tests can now fully test
calls that have optional arguments.</p>

<p style="margin-top: 1em">- Use ./configure
--enable-install-daemon to install /usr/sbin/guestfsd.</p>

<p style="margin-top: 1em">- po-docs directory now covers
all man pages.</p>

<p style="margin-top: 1em">- stderr from qemu process is
now captured by the event subsystem.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 602997 part-get-bootable gives wrong result with an
unordered part layout <br>
- 661280 virt-rescue: panic when shutting down:
&quot;/sbin/reboot: No such file or directory&quot; <br>
- 700369 qemu-system-x86_64 says &rsquo;KVM not supported
for this target&rsquo; <br>
- 705200 guestmount attempt results in access denied <br>
- 714981 &rsquo;list-filesystems&rsquo; does not know about
virtio 9p filesystems or detect existing mounts <br>
- 717786 libguestfs python bindings should have an explicit
close call <br>
- 721275 virt-resize in F16 should support btrfs</p>

<p style="margin-top: 1em">Release notes for libguestfs
1.10.0 <br>
These release notes only cover the differences from the
previous stable/dev branch split (1.8.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
- libguestfs and tools can be used against live virtual
machines. <br>
See the &rsquo;guestfish --live&rsquo; and &rsquo;guestmount
--live&rsquo; options, and (for <br>
the low-level interface) the new APIs set-attach-method and
<br>
get-attach-method.</p>

<p style="margin-top: 1em">- New virt tools: <br>
virt-copy-in, virt-copy-out, virt-tar-in, virt-tar-out.</p>

<p style="margin-top: 1em">- libguestfs can get the drive
letter mappings for Windows guests.</p>

<p style="margin-top: 1em">- virt-inspector displays drive
letter mappings for Windows guests.</p>

<p style="margin-top: 1em">- Drive letters can now be used
in virt-edit and guestfish programs <br>
when operating on Windows guests.</p>

<p style="margin-top: 1em">- virt-resize now works on 32
bit hosts.</p>

<p style="margin-top: 1em">- You can now inspect the
install disks and live CDs of many different <br>
operating systems.</p>

<p style="margin-top: 1em">- guestfish &lt;! cmd which
executes a shell cmd and inlines the result.</p>

<p style="margin-top: 1em">- guestfish, guestmount,
virt-rescue now all support --ro and --rw <br>
options, and the default for this can be chosen via a
configuration <br>
file (/etc/libguestfs-tools.conf).</p>

<p style="margin-top: 1em">- New event API allows more than
one callback to be registered for <br>
each event, makes it possible to call the API from other
languages, <br>
and allows nearly all log, debug and trace messages to be
rerouted <br>
from stderr.</p>

<p style="margin-top: 1em">- Greater FHS compliance for
temporary files, including using /var/tmp <br>
for large cached files that should survive reboot (instead
of /tmp).</p>

<p style="margin-top: 1em">- guestfish, guestmount -m
option allows mount options to be passed <br>
through to the underlying filesystem.</p>

<p style="margin-top: 1em">- mkfs-opts allows filesystem
features to be specified.</p>

<p style="margin-top: 1em">- More intelligent handling of
mountpoints, allowing mkmountpoint, mount <br>
and umount-all commands to work together properly.</p>

<p style="margin-top: 1em">- Trace messages are prefixed
with a distinct string, allowing them to <br>
be easily &rsquo;grepped&rsquo; out from debug output.</p>

<p style="margin-top: 1em">- guestfs_launch (guestfish
&rsquo;run&rsquo; command) now produces progress <br>
messages (a guestfish progress bar) if it takes longer than
5 <br>
seconds to run.</p>

<p style="margin-top: 1em">- Several long-running commands
where we are unable to estimate time <br>
to completion generate &quot;pulse mode&quot; progress
events. Progress bar <br>
in guestfish has been updated to display these.</p>

<p style="margin-top: 1em">- Publish new example code in:
C, Perl, Python, OCaml, Ruby.</p>

<p style="margin-top: 1em">- New virt-dhcp-address example
program.</p>

<p style="margin-top: 1em">- The Java and Ruby bindings
have been improved greatly.</p>

<p style="margin-top: 1em">- Perl includes a way to get the
errno of the last error.</p>

<p style="margin-top: 1em">- Python bindings now compatible
with rpyc (thanks Erez Shinan).</p>

<p style="margin-top: 1em">- Transifex is now being used to
manage translations. <br>
http://www.transifex.net/projects/p/libguestfs/</p>

<p style="margin-top: 1em">- Inspection now supports Red
Hat Desktop, Slackware distributions.</p>

<p style="margin-top: 1em">- Inspection no longer fails for
Windows guests that have two or <br>
more disks.</p>

<p style="margin-top: 1em">- Inspection can now tell the
difference between Windows 2008 Server <br>
and Windows 7.</p>

<p style="margin-top: 1em">- Inspection can detect 32 bit
applications installed in 64 bit <br>
Windows, running on the WOW64 emulator.</p>

<p style="margin-top: 1em">- A series of protocol fixes has
fixed the old bug RHBZ#576879 <br>
which used to cause errors during the upload command to lose
<br>
protocol synchronization.</p>

<p style="margin-top: 1em">- New logo!</p>

<p style="margin-top: 1em">Security <br>
[none]</p>

<p style="margin-top: 1em">New APIs <br>
first-private, get-attach-method,
inspect-get-drive-mappings, <br>
inspect-get-product-variant, <br>
inspect-get-windows-current-control-set, next-private,
resize2fs-M, <br>
set-attach-method.</p>

<p style="margin-top: 1em">Internals <br>
- The &rsquo;HACKING&rsquo; file is obsolete. The contents
have been moved into <br>
a section of the guestfs(3) manual page.</p>

<p style="margin-top: 1em">- libguestfs-test-tool
simplified. It no longer needs the static <br>
binary or tries to construct an ISO.</p>

<p style="margin-top: 1em">- rpcgen-generated files are
compiled with -fno-strict-aliasing <br>
which should be safer (thanks Matt Booth).</p>

<p style="margin-top: 1em">- virt-resize was rewritten in
OCaml.</p>

<p style="margin-top: 1em">- guestfish and other tools
tested with valgrind; some memory leaks <br>
were fixed.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 502533 Updated Polish translation of libguestfs <br>
- 576879 libguestfs protocol loses synchronization if you
&rsquo;upload&rsquo; before mounting disks <br>
- 599503 document that mkmountpoint and umount-all cannot be
mixed <br>
- 617440 guestfish: fails to tilde expand &rsquo;~&rsquo;
when the $HOME env is unset <br>
- 664558 RFE: Allow to set log callback in Ruby bindings
<br>
- 665358 Punjabi Translation Completed (pa_IN) <br>
- 666577 libguestfs: unknown filesystem /dev/fd0 <br>
- 667610 Multiple bugs, memory leaks in libguestfs ruby
bindings <br>
- 668112 virt-filesystems command fails on guest with
corrupt filesystem label <br>
- 668574 guestfish -i is trying to mount all mounts from
/etc/fstab and fails with an error when device doesn&rsquo;t
exists <br>
- 673479 Add a grep-friendly string to LIBGUESTFS_TRACE
output <br>
- 674130 Inspection code fails for Windows guest with two
disks <br>
- 682756 libguestfs trace segfaults when list-filesystems
returns error <br>
- 682979 libguestfs incorrectly detects Red Hat desktop as
&rsquo;redhat-based&rsquo; instead of &rsquo;redhat&rsquo;
<br>
- 690819 mkfs fails creating a filesystem on a disk device
when using a disk with &rsquo;ide&rsquo; interface <br>
- 691389 Extended attributes don&rsquo;t work over
guestmount (FUSE) <br>
- 691724 virt-inspector reports unknown filesystem /dev/vda1
<br>
- 692545 inspect-list-applications fails to detect 32 bit
apps installed under WOW64 emulator on 64 bit Windows <br>
- 693324 sfdisk&rsquo;s python interface only accepts lists
of type &rsquo;list&rsquo; for the lines parameter</p>

<p style="margin-top: 1em">Release notes for libguestfs 1.8
<br>
These release notes only cover the differences from the
previous stable/dev branch split (1.6.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
- Support and packages for Debian and Ubuntu.</p>

<p style="margin-top: 1em">- Daily builds from git
repository on Debian and Ubuntu to reduce risk <br>
of regressions.</p>

<p style="margin-top: 1em">- Port to ArchLinux
&rsquo;pacman&rsquo; (thanks Thomas S Hatch).</p>

<p style="margin-top: 1em">- The following tools have been
rewritten in C (originally in Perl):</p>

<p style="margin-top: 1em">. virt-cat <br>
. virt-df <br>
. virt-inspector <br>
. virt-ls <br>
. virt-rescue</p>

<p style="margin-top: 1em">- Some C tools support encrypted
guests automatically. This is <br>
supported in: guestfish, guestmount, virt-cat,
virt-inspector, <br>
virt-ls.</p>

<p style="margin-top: 1em">- New tool virt-filesystems (in
C) which is a replacement for <br>
virt-list-filesystems and virt-list-partitions, and has a
superset <br>
of the functionality of those tools.</p>

<p style="margin-top: 1em">- guestfish, guestmount and the
C tools use unified command line option <br>
parsing, so they support many common options such as
&rsquo;-a disk.img&rsquo;, <br>
&rsquo;-d libvirt-domain&rsquo;, &rsquo;-x&rsquo;,
&rsquo;-v&rsquo;. The old command line option <br>
parsing is preserved for compatibility in scripts etc.</p>

<p style="margin-top: 1em">- guestfish no longer has any
dependencies on Perl</p>

<p style="margin-top: 1em">- New man pages containing
programming examples: guestfs-examples(3) (C/C++), <br>
guestfs-ocaml(3), guestfs-python(3), guestfs-ruby(3).</p>

<p style="margin-top: 1em">- Trace mode prints return
values from API functions.</p>

<p style="margin-top: 1em">- virt-inspector can list
applications installed in Windows guests, along <br>
with a great deal of information about those
applications.</p>

<p style="margin-top: 1em">- Add support for inspecting:
Linux Mint, Mandriva, FreeBSD.</p>

<p style="margin-top: 1em">- guestfish --rw option (with no
effect currently) to make potentially <br>
dangerous write access explicit.</p>

<p style="margin-top: 1em">- guestfish --listen --csh for
compatibility with csh, tcsh (thanks <br>
Eric Blake).</p>

<p style="margin-top: 1em">- The first upstream version
that introduced each API function is now <br>
documented in guestfs(3).</p>

<p style="margin-top: 1em">- guestfs_last_errno allows you
to retrieve the errno from the <br>
daemon, correctly translated to the local operating
system.</p>

<p style="margin-top: 1em">- Functions can now have
optional parameters.</p>

<p style="margin-top: 1em">- Progress bars and progress
notifications can now happen for upload <br>
commands.</p>

<p style="margin-top: 1em">- Appliance builder more careful
about not leaving temporary files <br>
around in /tmp.</p>

<p style="margin-top: 1em">- getfattr/setfattr commands
added to virt-rescue.</p>

<p style="margin-top: 1em">- ROADMAP file covers roadmap
and goals for future releases.</p>

<p style="margin-top: 1em">Security <br>
- New SECURITY section in guestfs(3) API documentation.</p>

<p style="margin-top: 1em">- virt-inspector no longer runs
any guest commands.</p>

<p style="margin-top: 1em">- Inspection code is more
careful about avoiding very large files <br>
from guests which might previously have caused a denial of
service.</p>

<p style="margin-top: 1em">- FUSE calls into guestmount are
now traced when using guestmount -x.</p>

<p style="margin-top: 1em">New APIs <br>
- add-domain <br>
- add-drive-opts <br>
- getxattr <br>
- inspect-get-hostname <br>
- inspect-get-package-format <br>
- inspect-get-package-management <br>
- inspect-get-roots <br>
- inspect-list-applications <br>
- lgetxattr <br>
- mkfs-opts</p>

<p style="margin-top: 1em">Internals <br>
- C programs now only link precisely with the libraries that
they use.</p>

<p style="margin-top: 1em">- PCRE, libmagic, hivex and
libvirt libraries are now completely <br>
optional for building.</p>

<p style="margin-top: 1em">- Multiple memory leaks and file
descriptor leaks fixed.</p>

<p style="margin-top: 1em">- Add a POD wrapper to unify
generation of man pages and HTML files <br>
across all programs.</p>

<p style="margin-top: 1em">- Source includes phony images
of Fedora, Debian, Ubuntu and <br>
Windows guests.</p>

<p style="margin-top: 1em">- Ruby bindings have &rsquo;make
install&rsquo; rule.</p>

<p style="margin-top: 1em">- &lt;guestfs.h&gt; is now a
single file.</p>

<p style="margin-top: 1em">- &lt;guestfs.h&gt; does not
require XDR headers.</p>

<p style="margin-top: 1em">- ocaml xml-light library is no
longer required to build (thanks <br>
Maxim Koltsov).</p>

<p style="margin-top: 1em">- ./configure --disable-[...]
for each language binding (thanks <br>
Maxim Koltsov).</p>

<p style="margin-top: 1em">- Old ocaml-viewer program
removed (use guestfs-browser instead).</p>

<p style="margin-top: 1em">- New C API test type
&rsquo;InitScratchFS&rsquo; makes the tests run a little
<br>
more quickly.</p>

<p style="margin-top: 1em">- Excluded packages in the
appliance are now listed in a separate <br>
file appliance/excludelist.in, and can be customized
per-distro.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 663407 readlink and readlinklist returns /sysroot/ in some
paths <br>
- 661280 virt-rescue: panic when shutting down:
&quot;/sbin/reboot: No such file or directory&quot; <br>
- 657499 checksum: wrong check sum type causes umount to
fail <br>
- 655554 Whole disk paths are not made canonical by
virt-inspector <br>
- 654638 openssl updated to 1.0.0b libguestfs depends on
exact file names <br>
- 652796 ruby bindings not installed by &rsquo;make
install&rsquo;, hence omitted from the binary
distribution</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS 1.6
<br>
These release notes only cover the differences from the
previous stable/dev branch split (1.4.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
- Use a new method for creating and caching the appliance.
This <br>
greatly improves the performance of libguestfs, often by a
factor <br>
of x 4 to x 5.</p>

<p style="margin-top: 1em">- Support for guest inspection
(like virt-inspector) via the ordinary <br>
API and all language bindings. &rsquo;guestfish -i&rsquo;
option is as a side- <br>
effect much quicker.</p>

<p style="margin-top: 1em">- virt-inspector and core
inspection API can now detect guests running: <br>
Fedora, Debian, Ubuntu, Windows, Red Hat Enterprise Linux,
CentOS, <br>
Scientific Linux, Gentoo, Pardus, Arch Linux, MeeGo.</p>

<p style="margin-top: 1em">- Support for LUKS whole-disk
encryption in guests.</p>

<p style="margin-top: 1em">- PHP bindings.</p>

<p style="margin-top: 1em">- Progress messages (and
progress bars in guestfish and virt-resize) <br>
for certain long-running operations.</p>

<p style="margin-top: 1em">- virt-df is now much more
efficient. Use &rsquo;--one-per-guest&rsquo; to restore <br>
the old per-guest isolation behaviour.</p>

<p style="margin-top: 1em">- guestfish
&rsquo;copy-in&rsquo; and &rsquo;copy-out&rsquo; commands
for copying files and <br>
directories recursively in and out of the guest.</p>

<p style="margin-top: 1em">- guestfish
&rsquo;hexedit&rsquo; command for doing binary edits to
devices and <br>
files.</p>

<p style="margin-top: 1em">- Change guestfish -i syntax to
allow commands to be specified on the <br>
command line (retaining backwards compatibility).</p>

<p style="margin-top: 1em">- guestfish &rsquo;-d
&lt;domain&gt;&rsquo; for adding disks from libvirt
domains.</p>

<p style="margin-top: 1em">- guestfish &rsquo;-N&rsquo;
option supports several new prepared disk image types: <br>
lvfs : disk with LV formatted with filesystem <br>
lv : disk with LV <br>
bootroot : boot+root <br>
bootrootlv : boot and root on LV</p>

<p style="margin-top: 1em">- guestfish &rsquo;more&rsquo;
and &rsquo;edit&rsquo; commands now work with arbitrary
files.</p>

<p style="margin-top: 1em">- guestfish
&rsquo;--echo-keys&rsquo; option allows you to echo
keys/passphrases <br>
while typing them.</p>

<p style="margin-top: 1em">- guestmount now supports -a /
-d / -i options, like guestfish.</p>

<p style="margin-top: 1em">- Use virtio-serial for
communications with the appliance. This <br>
also has a major performance benefit.</p>

<p style="margin-top: 1em">- virt-edit &rsquo;-b&rsquo;
option to create a backup of edited files.</p>

<p style="margin-top: 1em">- virt-edit &rsquo;-e&rsquo;
option for non-interactive edits to files.</p>

<p style="margin-top: 1em">- Ability to capture core dumps
from the appliance (thanks Matthew Booth).</p>

<p style="margin-top: 1em">- virt-rescue now shuts down
cleanly (thanks Matthew Booth).</p>

<p style="margin-top: 1em">- virt-rescue now has a
--network option to enable network access.</p>

<p style="margin-top: 1em">- virt-resize can now handle
guests which use GPT partition table format.</p>

<p style="margin-top: 1em">- virt-resize has better support
for shrinking guests.</p>

<p style="margin-top: 1em">- virt-resize supports
qcow2-format guests.</p>

<p style="margin-top: 1em">- $TMPDIR can be used to
override almost all temporary directory usage.</p>

<p style="margin-top: 1em">- OCaml users can use an
alternate OO-style of coding, eg. g#launch ()</p>

<p style="margin-top: 1em">- The API supports calls which
take optional parameters, eg. <br>
$g-&gt;add_drive_opts (&quot;disk&quot;, readonly =&gt;
1);</p>

<p style="margin-top: 1em">- Trace output now escapes and
shortens large strings (thanks <br>
Matthew Booth).</p>

<p style="margin-top: 1em">- Autosync is now on by default,
resulting in more reliable behaviour <br>
when the handle is closed.</p>

<p style="margin-top: 1em">- virt-df --uuid option allows
you to follow a domain across migration <br>
and renaming.</p>

<p style="margin-top: 1em">- Translations of manual
pages.</p>

<p style="margin-top: 1em">Security <br>
- CVE-2010-3851 libguestfs: missing disk format specifier
when adding a disk <br>

https://www.redhat.com/archives/libguestfs/2010-October/msg00036.html
<br>
This is comprehensively fixed in this release, and the fix
will be <br>
backported to the other stable branches after more
testing.</p>

<p style="margin-top: 1em">- virt-inspector no longer
relies on untrusted guest code to list <br>
applications in some guests.</p>

<p style="margin-top: 1em">New APIs <br>
download-offset, file-architecture, findfs-label,
findfs-uuid, <br>
inspect-os, inspect-get-arch, inspect-get-distro, <br>
inspect-get-filesystems, inspect-get-major-version, <br>
inspect-get-minor-version, inspect-get-mountpoints, <br>
inspect-get-product-name, inspect-get-type, is-blockdev,
is-chardev, <br>
is-fifo, is-lv, is-socket, is-symlink, list-filesystems,
luks-add-key, <br>
luks-close, luks-format, luks-format-cipher, luks-kill-slot,
<br>
luks-open, luks-open-ro, lvm-clear-filter,
lvm-canonical-lv-name, <br>
lvm-set-filter, part-to-dev, pread-device, pwrite-device,
<br>
upload-offset</p>

<p style="margin-top: 1em">Internals <br>
- Use size_t for loop iterators. <br>
- Refactor the library code into separate files. <br>
- Refactor the generator code into separate files. <br>
- Generate guestfish commands. <br>
- guestfish &amp; guestmount options processing is unified.
<br>
- Protocol changes: <br>
error message size increased to 64K <br>
send errno to library <br>
- Add &rsquo;make bindist&rsquo; to make a binary
distribution. <br>
- Cleaner behaviour under valgrind. <br>
- More testing of the guestfish command line options and
libvirt <br>
integration. <br>
- The Perl inspection code is no longer used by any of the
tools.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 646822 libguestfs trace mode should not print long binary
strings <br>
- 646821 virt-df should have --uuid option <br>
- 646432 /dev/mapper paths should not be returned from
guestfs_mountpoints <br>
- 643624 libguestfs tools documentation should describe how
to quote guest domain names from shell <br>
- 642934 No way to specify disk format when adding a disk to
libguestfs <br>
- 642933 guestfs_list_filesystems should be used in all
possible places <br>
- 642932 guestmount options should match guestfish options
<br>
- 642930 virt-inspector (Sys::Guestfs::Lib) should use C
inspection APIs <br>
- 642929 C inspection code should ignore /dev/fd* in
/etc/fstab <br>
- 642826 virt-resize converts any other image format to raw
without notifying user, instructions do not account for this
<br>
- 640961 Document that grub-install might be needed for old
Linux guests after virt-resize <br>
- 639986 virt-df --csv does not properly quote &quot; in
libvirt domain names <br>
- 639405 Interrupted cached appliance creation leaves
libguestfs unusable <br>
- 638901 Appliance filename should not contain repository
name <br>
- 638899 /dev/mapper paths should not be returned from C
inspection APIs <br>
- 636918 Updates to Spanish translation <br>
- 636061 [abrt] guestfish-1.2.11-1.fc12: malloc_consolidate:
Process /usr/bin/guestfish was killed by signal 11 (SIGSEGV)
<br>
- 635969 glob echo mkfs ext2 /dev/vd[b-t]1 prints garbage
<br>
- 634246 guestfs_part_get_parttype returns &quot;loop&quot;
when run against a partition, LV or filesystem <br>
- 633766 virt-resize --shrink fails <br>
- 633357 Updates to Spanish translation <br>
- 633096 virt-resize calculates block device size
incorrectly, doesn&rsquo;t work with qcow2 target <br>
- 629593 Dutch translation added <br>
- 627556 Updates to Spanish translations of libguestfs <br>
- 626843 Updates to Spanish translations <br>
- 619793 [RFE] Need a way to determine if a particular block
device is a logical volume <br>
- 618556 virt-rescue return none zero value when exit <br>
- 617200 mount operation failed and hung on some images
which running in read-only mode <br>
- 610880 libguestfs should set broader read perms on tmpdir,
so works in some situations when executed with umask 077
<br>
- 599503 document that mkmountpoint and umount-all cannot be
mixed <br>
- 571714 Running virt-df on disk image relabels it, so qemu
can no longer write to it. <br>
- 502533 Updated Polish translation of libguestfs</p>

<p style="margin-top: 1em">RELEASE NOTES FOR LIBGUESTFS 1.4
<br>
These release notes only cover the differences from the
previous stable/dev branch split (1.2.0). For detailed
changelogs, please see the git repository, or the ChangeLog
file <br>
distributed in the tarball.</p>

<p style="margin-top: 1em">New features <br>
- guestfish lets you choose a prepared disk image, eg: <br>
guestfish -N fs:ext4</p>

<p style="margin-top: 1em">- Add write support to
guestmount (FUSE) module.</p>

<p style="margin-top: 1em">- virt-resize can now resize the
content of partitions and logical <br>
volumes in the guest, and we have better support for
shrinking guests.</p>

<p style="margin-top: 1em">- Bash tab-completion script for
guestfish.</p>

<p style="margin-top: 1em">- Add ZFS support to
virt-rescue.</p>

<p style="margin-top: 1em">- New tool
&rsquo;virt-make-fs&rsquo; for creating filesystems with
content.</p>

<p style="margin-top: 1em">- Allow suffixes on any
guestfish number parameter, eg. &quot;1M&quot;.</p>

<p style="margin-top: 1em">- guestfish &rsquo;man&rsquo;
command opens the manual page.</p>

<p style="margin-top: 1em">- guestfish supports a
&quot;heredoc&quot; syntax for uploading files: <br>
upload -&lt;&lt;_end_ /foo <br>
content <br>
_end_</p>

<p style="margin-top: 1em">- Some guestfish commands now
print their output in octal or hex <br>
where appropriate (RHBZ#583242).</p>

<p style="margin-top: 1em">- Allow dash prefix on guestfish
command line. This ignores any <br>
error from the second command: (RHBZ#578407) <br>
guestfish -- cmd1 : -cmd2 : cmd3</p>

<p style="margin-top: 1em">- guestfish -h / help command
now returns an error for non-existent <br>
commands (RHBZ#597145).</p>

<p style="margin-top: 1em">- New &rsquo;supported&rsquo;
command in guestfish to list optional groups of <br>
commands which are supported by the daemon /
configuration.</p>

<p style="margin-top: 1em">- virt-inspector and guestfish
-i now work for filenames which <br>
contain spaces (RHBZ#507810).</p>

<p style="margin-top: 1em">- Change the protocol to use
link-local addresses, to avoid <br>
conflicting with any address that the host might be using
<br>
(RHBZ#588763).</p>

<p style="margin-top: 1em">- libguestfs now sets the
correct time and timezone on filesystem <br>
modifications.</p>

<p style="margin-top: 1em">- Sort the domains into
alphabetical order in virt-df.</p>

<p style="margin-top: 1em">- Make mkfs-b command work for
FAT and NTFS by mapping the blocksize <br>
parameter to the cluster size (RHBZ#599464).</p>

<p style="margin-top: 1em">- Add version numbers to Perl
modules (RHBZ#521674).</p>

<p style="margin-top: 1em">- Localization now works for all
the libguestfs tools (RHBZ#559963).</p>

<p style="margin-top: 1em">- Tools now support
filesystem-on-image VMs (RHBZ#590167).</p>

<p style="margin-top: 1em">- virt-list-partitions has a
&rsquo;-t&rsquo; option to show the total size of disks.</p>

<p style="margin-top: 1em">- Include extra Augeas lenses in
the supermin appliance (Matthew Booth).</p>

<p style="margin-top: 1em">- Add error and close
callbacks.</p>

<p style="margin-top: 1em">- Add explicit close method in
the Perl API.</p>

<p style="margin-top: 1em">- Multiple fixes for RHEL 5
compatibility.</p>

<p style="margin-top: 1em">- Multiple fixes for
Debian/Ubuntu compatibility.</p>

<p style="margin-top: 1em">- Multiple revisions to improve
the documentation.</p>

<p style="margin-top: 1em">Security <br>
- Fix a potential DoS in virt-inspector and virt-v2v if a
specially <br>
crafted disk image contained a char device in place of one
of the <br>
configuration files that we read under /etc
(RHBZ#582484).</p>

<p style="margin-top: 1em">New APIs <br>
- aug-clear - clear Augeas path <br>
- available-all-groups - return a list of all optional
groups <br>
- base64-in - upload base64-encoded data to file <br>
- base64-out - download file and encode as base64 <br>
- checksum-device - compute checksums on the contents of a
device <br>
- checksums-out - compute checksums of multiple files in a
directory <br>
- debug-upload - upload a file to the appliance <br>
- fallocate64 - preallocate a file in the guest filesystem
<br>
- fill-pattern - fill a file with a repeating pattern of
bytes <br>
- get-umask - get the current umask <br>
- lvresize-free - expand an LV to fill free space <br>
- ntfsresize - resize an NTFS filesystem <br>
- ntfsresize-size - resize an NTFS filesystem (with size)
<br>
- part-del - delete a partition <br>
- part-get-bootable - get the bootable flag of a partition
<br>
- part-get-mbr-id - get the MBR type byte of a partition
<br>
- part-set-mbr-id - set the MBR type byte of a partition
<br>
- pvresize-size - resize a physical volume (with size) <br>
- pwrite - write to part of a file <br>
- resize2fs-size - resize an ext2/3/4 filesystem (with size)
<br>
- txz-in - unpack compressed tarball to directory
(RHBZ#580556) <br>
- txz-out - pack directory into compressed tarball
(RHBZ#580556) <br>
- vfs-label - get the filesystem label <br>
- vfs-uuid - get the filesystem UUID <br>
- vgscan - rescan for LVM physical volumes, volume groups
and logical volumes <br>
- write - create a new file <br>
- zero-device - write zeroes to an entire device</p>

<p style="margin-top: 1em">Internals <br>
- Extend the generator to support testing optional features.
<br>
- Stricter checks on input parameters to many calls
(RHBZ#501893 RHBZ#501894) <br>
- Extend the protocol to support sending arbitrary 8 bit
data buffers. <br>
- Ship &rsquo;BUGS&rsquo; file with releases. This is a
summary of the bugs in <br>
the Red Hat Bugzilla database. <br>
- Ship &rsquo;RELEASE-NOTES&rsquo; file with releases,
containing release notes. <br>
- Unify supermin appliance building into one place, in
febootstrap 2.7. <br>
- Fix the protocol code to handle the case where both ends
send cancel <br>
messages at the same time.</p>

<p style="margin-top: 1em">Bugs fixed <br>
- 612178 guestfish: using -m option in conjunction with
--listen option causes appliance to die <br>
- 610880 libguestfs should set broader read perms on tmpdir,
so works in some situations when executed with umask 077
<br>
- 604691 OCaml bindings are not thread safe <br>
- 603870 Updates to Spanish translation <br>
- 602592 [RFE] expose guestfs_close in perl bindings <br>
- 600977 virt-df -h --csv &quot;Argument .. isn&rsquo;t
numeric in printf&quot; <br>
- 599464 mkfs-b does not support vfat/ntfs <br>
- 598807 add_cdrom does not work in RHEL 6 <br>
- 598309 part-list and several other cmd failed on
libguestfs on RHEL5 <br>
- 597145 guestfish &rsquo;help&rsquo; command should
indicate error in exit status with an unknown command <br>
- 597135 guestfish write-file cmd does not check
&quot;size&quot; parameter <br>
- 597118 A warning should be given in the help of
mke2journal-L for the length of label <br>
- 597112 get-e2uuid should use blkid instead of
&quot;tune2fs -l&quot; to get filesystem UUID <br>
- 596776 virt-inspector doesn&rsquo;t discover modprobe
aliases on RHEL 3 guests <br>
- 596763 Updates to Spanish translation <br>
- 593292 Updates to Spanish translation <br>
- 592883 can not edit files on images mounted with
guestmount cmd <br>
- 592360 Updates to Spanish translation <br>
- 591250 virt-tar prints &quot;tar_in: tar subcommand failed
on directory&quot; if the archive is compressed or not in
the right format <br>
- 591155 virt-tar prints &quot;tar_in: tar subcommand failed
on directory&quot; if a disk image is not writable <br>
- 591142 virt-inspector should give an error for
unrecognized disk images <br>
- 590167 virt-inspector and other virt tools should be able
to handle filesystem-on-image VMs <br>
- 589039 guestfish read-file cmd will cause daemon hang when
read large files <br>
- 588851 guestfs_launch() returns -1, but
guestfs_last_error() == NULL <br>
- 588763 libguestfs should use non-public or link-local
addresses for appliance network <br>
- 588733 Updates to Spanish translation <br>
- 588651 guestfish &rsquo;strings-e&rsquo; cmd does not give
proper error message or hint <br>
- 587484 lvresize can&rsquo;t reduce size of a volumn <br>
- 585961 Updates to Spanish translation <br>
- 585223 ntfsresize should support shrinking filesystems
<br>
- 585222 pvresize should support shrinking PVs <br>
- 585221 resize2fs should support shrinking filesystems <br>
- 584038 Updates to Spanish translation <br>
- 583554 [FEAT] mknod-mode command is needed to set mode
explicitly <br>
- 583242 [RFE] guestfish should print outputs in a suitable
base (eg. octal for modes) <br>
- 582993 guestfish eats words when tab completing case
(in)sensitive paths <br>
- 582953 Misleading help information about lvcreate command
<br>
- 582948 mknod command doesn&rsquo;t make block, character
or FIFO devices <br>
- 582929 mknod doesn&rsquo;t check for invalid mode <br>
- 582901 guestfish chmod/umask commands do not check invalid
mode value <br>
- 582899 guestfish:sparse is missed from command
autocomplete list <br>
- 582891 [Feature Request] behavior and return value of
guestfish umask cmd should be changed <br>
- 582548 [mknod] umask shouldn&rsquo;t take effect when mode
is set explicitly <br>
- 582484 some guestfish sub commands can not handle special
files properly <br>
- 582252 Updates to Spanish translation <br>
- 581501 Updates to Spanish translation <br>
- 580650 virt-inspector warns &quot;No grub default
specified at /usr/lib/perl5/Sys/Guestfs/Lib.pm at
[...]&quot; <br>
- 580556 request for libguestfs to support .txz tarballs
<br>
- 580246 tar-in command hangs if uploading more than
available space <br>
- 580016 aug-ls in guestfish does not take augeas variable
as argument <br>
- 579664 guestfish doesn&rsquo;t report error when there is
not enough space for image allocation <br>
- 579608 multiple commands in guestfish can not work for
symbol links <br>
- 579155 libguestfs hangs if qemu doesn&rsquo;t start (in
null vmchannel mode) <br>
- 578407 the prefix &rsquo;-&rsquo; in sub-command
isn&rsquo;t handled by guestfish in remote control mode <br>
- 576879 libguestfs protocol loses synchronization if you
&rsquo;upload&rsquo; before mounting disks <br>
- 559963 libguestfs Perl programs do set locale, but still
localization doesn&rsquo;t work <br>
- 521674 Perl modules are unversioned, but should carry
version numbers <br>
- 516096 Race condition in test_swapon_label_0:
/sbin/blockdev: BLKRRPART: Device or resource busy <br>
- 507810 guestfish -i / virt-inspector cannot handle spaces
in filenames <br>
- 502533 Updated Polish translation of libguestfs <br>
- 501894 Some String parameters should be OptString <br>
- 501893 String parameters should be checked for != NULL
<br>
- 501889 write-file does not support strings containing
ASCII NUL <br>
- 484986 grub-install fails on virtio disk</p>

<p style="margin-top: 1em">RELEASE NOTES FOR HISTORICAL
VERSIONS OF LIBGUESTFS <br>
Before 2010 libguestfs did not have official release notes
or a formalized version numbering system. However these are
links to historically significant versions.</p>

<p style="margin-top: 1em">2009-11-10 (1.0.78) <br>

https://www.redhat.com/archives/libguestfs/2009-November/msg00095.html</p>

<p style="margin-top: 1em">2009-09-13 (1.0.67) <br>

https://www.redhat.com/archives/libguestfs/2009-August/msg00281.html</p>

<p style="margin-top: 1em">2009-07-23 (1.0.64) <br>

https://www.redhat.com/archives/libguestfs/2009-July/msg00059.html</p>

<p style="margin-top: 1em">2009-07-14 (1.0.59) <br>

https://www.redhat.com/archives/libguestfs/2009-July/msg00023.html</p>

<p style="margin-top: 1em">2009-04-01 (the initial
announcement) <br>

http://rwmj.wordpress.com/2009/04/01/libguestfs-access-and-modify-virtual-machine-disk-images/</p>

<p style="margin-top: 1em">SEE ALSO <br>
guestfs-examples(1), guestfs-faq(1), guestfs-performance(1),
guestfs-recipes(1), guestfs-testing(1), guestfs(3),
guestfish(1), http://libguestfs.org/</p>

<p style="margin-top: 1em">AUTHOR <br>
Richard W.M. Jones</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright (C) 2009-2016 Red Hat Inc.</p>

<p style="margin-top: 1em">LICENSE <br>
This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
<br>
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, <br>
Boston, MA 02110-1301 USA.</p>

<p style="margin-top: 1em">BUGS <br>
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-top: 1em">To report a new bug against
libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-top: 1em">When reporting a bug, please
supply:</p>

<p style="margin-top: 1em">&Acirc;&middot; The version of
libguestfs.</p>

<p style="margin-top: 1em">&Acirc;&middot; Where you got
libguestfs (eg. which Linux distro, compiled from source,
etc)</p>

<p style="margin-top: 1em">&Acirc;&middot; Describe the bug
accurately and give a way to reproduce it.</p>

<p style="margin-top: 1em">&Acirc;&middot; Run
libguestfs-test-tool(1) and paste the complete, unedited
output into the bug report.</p>

<p style="margin-top: 1em">libguestfs-1.32.7 2016-08-08
guestfs-release-notes(1)</p>
<hr>
</body>
</html>
