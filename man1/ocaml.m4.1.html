<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:28:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>OCAML.M4(1) Autoconf macros OCAML.M4(1)</p>

<p style="margin-top: 1em">NAME <br>
ocaml.m4 - Autoconf macros for OCaml</p>

<p style="margin-top: 1em">SUMMARY <br>
AC_PROG_OCAML <br>
AC_PROG_FINDLIB <br>
AC_PROG_OCAMLLEX <br>
AC_PROG_OCAMLYACC <br>
AC_PROG_CAMLP4 <br>
AC_CHECK_OCAML_PKG([name]) <br>
AC_CHECK_OCAML_MODULE(VARIABLE,NAME,MODULE,INCLUDE-PATHS)
<br>
AC_CHECK_OCAML_WORD_SIZE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
ocaml.m4 is a file containing standard, useful autoconf
macros for detecting the OCaml, findlib, OCaml packages, and
so on in your autoconf-generated ./configure scripts.</p>

<p style="margin-top: 1em">To begin using these macros, you
will need to copy the &quot;ocaml.m4&quot; file (usually
located at &quot;/usr/share/aclocal/ocaml.m4&quot;) to the
autoconf macros directory in your project. <br>
Normally this is the &quot;m4/&quot; directory in your
project, but the directory can be changed using the
&quot;AC_CONFIG_MACRO_DIR(DIR)&quot; directive. If you have
just created the &quot;m4/&quot; <br>
directory, then you may also need to do:</p>

<p style="margin-top: 1em">aclocal -I m4</p>

<p style="margin-top: 1em">You can then add any of the
macros described below to your &quot;configure.ac&quot; (or
&quot;configure.in&quot;). Almost every OCaml project should
use &quot;AC_PROG_OCAML&quot; first and probably <br>
&quot;AC_PROG_FINDLIB&quot; right after it.</p>

<p style="margin-top: 1em">This manual page does not
describe how to use autoconf. For that you should read the
detailed autoconf info file (&quot;info autoconf&quot;).</p>

<p style="margin-top: 1em">AC_PROG_OCAML <br>
This macro detects which tools of the usual OCaml toolchain
are available. It defines and substitutes the following
variables:</p>

<p style="margin-top: 1em">OCAMLC set to the name of the
bytecode compiler <br>
(eg. &quot;ocamlc&quot; or &quot;ocamlc.opt&quot;), or
&quot;no&quot; if <br>
no OCaml installation was found <br>
OCAMLOPT the name of the native-code compiler, eg.
&quot;ocamlopt&quot;, <br>
&quot;ocamlopt.opt&quot; or &quot;no&quot; <br>
OCAMLBEST &quot;byte&quot; (if only the bytecode compiler is
available) <br>
or &quot;opt&quot; (if both bytecode and native code
compilers <br>
are available) <br>
OCAMLDEP the name of the dependency resolver, eg.
&quot;ocamldep&quot; <br>
OCAMLMKTOP the name of ocamlmktop <br>
OCAMLMKLIB the name of ocamlmklib <br>
OCAMLDOC the name of ocamldoc <br>
OCAMLBUILD the name of ocamlbuild <br>
OCAMLLIB the OCaml library path (eg.
C&lt;/usr/lib/ocaml/&gt;) <br>
OCAMLVERSION the compiler version (eg. C&lt;3.11.0&gt;)</p>

<p style="margin-top: 1em">Detecting if OCaml is installed
<br>
Unlike old versions of these macros,
&quot;AC_PROG_OCAML&quot; does not exit if no OCaml
installation is detected. Therefore if you want to detect if
OCaml is installed you have to do <br>
something like this:</p>

<p style="margin-top: 1em">AC_PROG_OCAML <br>
if test &quot;$OCAMLC&quot; = &quot;no&quot;; then <br>
AC_MSG_ERROR([You must install the OCaml compiler]) <br>
fi</p>

<p style="margin-top: 1em">This behaviour and usage pattern
are consistent with other macros of the
&quot;AC_PROG_*&quot;) family.</p>

<p style="margin-top: 1em">Cross-compiling <br>
If the configure script is invoked for cross-compiling then
&quot;AC_PROG_OCAML&quot; will detect the cross-compiler
versions of the OCaml compiler, eg.
&quot;OCAMLC=i686-pc-mingw32-ocamlc&quot; <br>
etc. This happens automatically, and for most purposes you
don&rsquo;t need to worry about it.</p>

<p style="margin-top: 1em">AC_PROG_FINDLIB <br>
This macro checks for the presence of the ocamlfind program
(part of findlib). It defines and substitutes
&quot;OCAMLFIND&quot; to the name of the ocamlfind program,
or &quot;no&quot; if not found.</p>

<p style="margin-top: 1em">Note that this macro does not
fail if ocamlfind is not found. If you want to force the
user to install findlib, you should do:</p>

<p style="margin-top: 1em">AC_PROG_FINDLIB <br>
if test &quot;$OCAMLFIND&quot; = &quot;no&quot;; then <br>
AC_MSG_ERROR([You must install OCaml findlib (the ocamlfind
command)]) <br>
fi</p>

<p style="margin-top: 1em">See also
&quot;AC_CHECK_OCAML_PKG&quot;.</p>

<p style="margin-top: 1em">AC_PROG_OCAMLLEX <br>
This checks for the ocamllex program and sets
&quot;OCAMLLEX&quot; to the name of the program (eg.
&quot;ocamllex&quot; or &quot;ocamllex.opt&quot;), or
&quot;no&quot; if not found.</p>

<p style="margin-top: 1em">AC_PROG_OCAMLYACC <br>
This checks for the ocamlyacc program and sets
&quot;OCAMLYACC&quot; to the name of the program, or
&quot;no&quot; if not found.</p>

<p style="margin-top: 1em">AC_PROG_CAMLP4 <br>
This checks for camlp4, and checks that the version matches
the compiler version found previously. It sets
&quot;CAMLP4&quot; to the name of the basic camlp4 program,
or &quot;no&quot; if not <br>
found.</p>

<p style="margin-top: 1em">The macro also checks for other
tools of the camlp4 suite like camlp4o, camlp4orf, etc. For
each of them, a fully capitalized variable is set to the
tool name (or &quot;no&quot; if not <br>
found); all variable are substituted for when filling .in
files. The full list of tools and respective variable names
is as follows:</p>

<p style="margin-top: 1em">camlp4 CAMLP4 <br>
camlp4boot CAMLP4BOOT <br>
camlp4o CAMLP4O <br>
camlp4of CAMLP4OF <br>
camlp4oof CAMLP4OOF <br>
camlp4orf CAMLP4ORF <br>
camlp4prof CAMLP4PROF <br>
camlp4r CAMLP4R <br>
camlp4rf CAMLP4RF</p>

<p style="margin-top: 1em">AC_CHECK_OCAML_PKG <br>
This is the main macro that can be used to detect the
presence of OCaml findlib packages. This macro uses
ocamlfind to look up findlib packages (and thus requires
that findlib <br>
itself has been installed, and that the package has been
properly packaged with a META file etc.) If you want to find
an OCaml findlib package which hasn&rsquo;t been installed
with <br>
findlib then you should try using
&quot;AC_CHECK_OCAML_MODULE&quot; instead.</p>

<p style="margin-top: 1em">AC_CHECK_OCAML_PKG([name])</p>

<p style="margin-top: 1em">checks for an OCaml findlib
package with the given name. If found, it defines and
substitutes the variable &quot;OCAML_PKG_name&quot; where
the &quot;name&quot; part is substituted for the package
<br>
name by replacing all dashes with underscores.</p>

<p style="margin-top: 1em">For example,</p>


<p style="margin-top: 1em">AC_CHECK_OCAML_PKG([xml-light])</p>

<p style="margin-top: 1em">will set
&quot;OCAML_PKG_xml_light&quot; to either
&quot;xml-light&quot; or &quot;no&quot;.</p>

<p style="margin-top: 1em">To have the configure script
fail if a package is not installed, do:</p>

<p style="margin-top: 1em">AC_CHECK_OCAML_PKG([foo]) <br>
if test &quot;$OCAML_PKG_foo&quot; = &quot;no&quot;; then
<br>
AC_MSG_ERROR([Please install OCaml findlib module
&rsquo;foo&rsquo;.]) <br>
fi</p>

<p style="margin-top: 1em">In your Makefile.in, use the
substitution variable in conjunction with ocamlfind, eg:</p>

<p style="margin-top: 1em">.ml.cmo: <br>
$(OCAMLFIND) ocamlc -package @OCAML_PKG_foo@ -c $&lt; -o
$@</p>

<p style="margin-top: 1em">Note that also in the
substitution variable dashes are replaced with
underscores.</p>

<p style="margin-top: 1em">Checking for alternative findlib
package names <br>
In the (unlikely) case where the same library corresponds to
different findlib package names on different systems, you
can improve portability by checking for the alternative <br>
names passing a second argument to
&quot;AC_CHECK_OCAML_PKG&quot;:</p>


<p style="margin-top: 1em">AC_CHECK_OCAML_PKG(PKGNAME,ALTERNATIVE-NAMES)</p>

<p style="margin-top: 1em">The behaviour is the same as
before if &quot;PKGNAME&quot; is found. Otherwise all names
in &quot;ALTERNATIVE-NAMES&quot; are tested in turn as
findlib package names. If one is found, it is set as <br>
the value set by the macro and substituted in .in files;
otherwise &quot;no&quot; is set.</p>

<p style="margin-top: 1em">Note that the variable name is
determined by &quot;PKGNAME&quot;, while the value depends
on the actual alternative name found.</p>

<p style="margin-top: 1em">For example, to detect the
camlzip findlib package, either called &quot;zip&quot; or
&quot;camlzip&quot;, and to store the found value in the
&quot;OCAML_PKG_zip&quot; variable you can do in your <br>
configure.ac:</p>


<p style="margin-top: 1em">AC_CHECK_OCAML_PKG(zip,camlzip)</p>

<p style="margin-top: 1em">and have a portable Makefile.in
build line such as:</p>

<p style="margin-top: 1em">.ml.cmo: <br>
$(OCAMLFIND) ocamlc -package @OCAML_PKG_zip@ -c $&lt; -o
$@</p>


<p style="margin-top: 1em">AC_CHECK_OCAML_MODULE(VARIABLE,NAME,MODULE,INCLUDE-PATHS)
<br>
&quot;AC_CHECK_OCAML_MODULE&quot; is the hairier alternative
to &quot;AC_CHECK_OCAML_PKG&quot;. You should always use
&quot;AC_CHECK_OCAML_PKG&quot; and ocamlfind/findlib if
possible.</p>

<p style="margin-top: 1em">The parameters are:</p>

<p style="margin-top: 1em">VARIABLE <br>
This is the environment variable that is set. It will either
be set to the include path, or to &quot;no&quot; if the
module was not found.</p>

<p style="margin-top: 1em">NAME <br>
This is the name of the module we are looking for. This
parameter is just used for printing messages, and does not
affect how the module is found.</p>

<p style="margin-top: 1em">MODULE <br>
This should be an OCaml module name, representing the module
name being looked up. You can put sub-modules here, eg.
&quot;CalendarLib.Date&quot;</p>

<p style="margin-top: 1em">INCLUDE-PATHS <br>
This is the default list of include directories to search,
eg. &quot;+calendar&quot;</p>

<p style="margin-top: 1em">For example, the following code
will check for the OCaml Calendar module, and will
distinguish between version 1 and version 2 of this module
(which have incompatible APIs).</p>

<p style="margin-top: 1em">AC_CHECK_OCAML_PKG(calendar)
<br>

AC_CHECK_OCAML_MODULE(is_calendar2,calendar,[CalendarLib.Date],[+calendar])</p>

<p style="margin-top: 1em">After the above code has run,
variables &quot;OCAML_PKG_calendar&quot; and
&quot;is_calendar2&quot; will be set as follows:</p>

<p style="margin-top: 1em">OCAML_PKG_calendar is_calendar2
Result</p>

<p style="margin-top: 1em">yes +calendar Calendar v2 is
installed <br>
yes no Calendar v1 is installed <br>
no no No Calendar module installed</p>

<p style="margin-top: 1em">AC_CHECK_OCAML_WORD_SIZE <br>
This checks the word size of the OCaml compiler, and sets
&quot;OCAML_WORD_SIZE&quot; to either 32 or 64.</p>

<p style="margin-top: 1em">SEE ALSO <br>
autoconf(1),
&lt;http://ocaml-autoconf.forge.ocamlcore.org&gt;,
&lt;http://caml.inria.fr/&gt;</p>

<p style="margin-top: 1em">FILES <br>
&Acirc;&middot; /usr/share/aclocal/ocaml.m4</p>

<p style="margin-top: 1em">AUTHORS <br>
Various people have contributed to these macros over many
years:</p>

<p style="margin-top: 1em">&Acirc;&middot; Olivier
Andrieu</p>

<p style="margin-top: 1em">&Acirc;&middot; Jean-Christophe
Filliatre</p>

<p style="margin-top: 1em">&Acirc;&middot; Richard W.M.
Jones</p>

<p style="margin-top: 1em">&Acirc;&middot; Georges
Mariano</p>

<p style="margin-top: 1em">&Acirc;&middot; Jim Meyering</p>

<p style="margin-top: 1em">&Acirc;&middot; Stefano
Zacchiroli</p>

<p style="margin-top: 1em">LICENSE <br>
Copyright X 2009 Richard W.M. Jones <br>
Copyright X 2009 Stefano Zacchiroli <br>
Copyright X 2000-2005 Olivier Andrieu <br>
Copyright X 2000-2005 Jean-Christophe Filliatre <br>
Copyright X 2000-2005 Georges Mariano</p>

<p style="margin-top: 1em">All rights reserved.</p>

<p style="margin-top: 1em">Redistribution and use in source
and binary forms, with or without modification, <br>
are permitted provided that the following conditions are
met:</p>

<p style="margin-top: 1em">* Redistributions of source code
must retain the above copyright notice, this <br>
list of conditions and the following disclaimer. <br>
* Redistributions in binary form must reproduce the above
copyright notice, <br>
this list of conditions and the following disclaimer in the
documentation <br>
and/or other materials provided with the distribution. <br>
* The names of the contributors may not be used to endorse
or promote <br>
products derived from this software without specific prior
written <br>
permission.</p>

<p style="margin-top: 1em">THIS SOFTWARE IS PROVIDED BY THE
REGENTS AND CONTRIBUTORS &rsquo;&rsquo;AS IS&rsquo;&rsquo;
AND ANY <br>
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED <br>
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE <br>
DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE
LIABLE FOR ANY <br>
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES <br>
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
GOODS OR SERVICES; <br>
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON <br>
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT <br>
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS <br>
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Please report bugs to the authors at the project page:
&lt;http://forge.ocamlcore.org/projects/ocaml-autoconf/&gt;,
using the forge bug tracker <br>

&lt;http://forge.ocamlcore.org/tracker/?group_id=69&gt;.</p>

<p style="margin-top: 1em">ocaml-autoconf-1.0 2009-10-12
OCAML.M4(1)</p>
<hr>
</body>
</html>
