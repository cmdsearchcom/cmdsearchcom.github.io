<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>bsvplay(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">bsvplay(1)</td>
    <td class="head-vol">hxtools</td>
    <td class="head-rtitle">bsvplay(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="Name"><a class="selflink" href="#Name">Name</a></h1>
bsvplay &#x2014; convert BASICA music files to PCM
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
<b>bsvplay</b> [<b>-i</b> <i>part</i>] [<b>-q</b> <i>part</i>] [<b>-r</b>
  <i>rate</i>] [ <i>file</i>...] <b>| aplay -f dat -c 1</b>
<h1 class="Sh" title="Sh" id="Description"><a class="selflink" href="#Description">Description</a></h1>
bsvplay will convert BASICA binary music files to linear 16-bit raw PCM.
  Normally, you will be wanting to pipe it into a raw PCM player like
  <b>aplay</b>(1) to actually output it to a sound device. Be sure to lower the
  volume beforehand to avoid nasty surprises that come with square waves. By
  default, bsvplay will mix 1:1 square:sine waves to give a medium tone
  hardness.
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b> <i>part</i></dt>
  <dd class="It-tag">Part to mix square waves in (default: 1.0)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b> <i>part</i></dt>
  <dd class="It-tag">Part to mix sine waves in (default: 1.0). If <b>-q2 -i1</b>
      is specified for example, the final PCM output will consist of
      2/3*squarepcm + 1/3*sinpcm.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b> <i>rate</i></dt>
  <dd class="It-tag">PCM sample rate (default: 48000 Hz)</dd>
</dl>
<h1 class="Sh" title="Sh" id="File_format"><a class="selflink" href="#File_format">File
  format</a></h1>
The BASICA format is defined 6-byte tuples of divisor, duration and pause.
<div class="Pp"></div>
<pre>
	struct bsv_insn {
		uint16_t divisor;
		uint16_t duration; /* in ticks */
		uint16_t af_pause; /* in ticks */
	};
</pre>
<div class="Pp"></div>
where divisor specifies the divisor value that it directly handed to the x86 PC
  speaker. The following formula holds:
<div class="Pp"></div>
<pre>
	frequency = 1193181 / divisor;
</pre>
<h1 class="Sh" title="Sh" id="See_also"><a class="selflink" href="#See_also">See
  also</a></h1>
<b>aplay</b>(1), <b>oplay</b>(1), <b>qplay</b>(1), <b>hxtools</b>(7)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2008-02-06</td>
    <td class="foot-os">hxtools</td>
  </tr>
</table>
</body>
</html>
