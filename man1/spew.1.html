<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SPEW(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SPEW(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">SPEW(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
spew - measures I/O performance and/or generates I/O load
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>spew</b> <i>--write|--read|--read-after-write </i>[<i>OPTION</i>]...
  <i>TRANSFER_SIZE</i>[ <i>kKmMgG</i>] <i>FILE</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
An I/O performance measurement and load generation tool. Writes and/or reads
  generated data to or from a character device, block device, or regular file.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b>, <b>--max-buffer-size</b>=<i>BUFFER_SIZE</i></dt>
  <dd class="It-tag">Each read(2)/write(2) call uses a maximum buffer of size
      BUFFER_SIZE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>, <b>--min-buffer-size</b>=<i>BUFFER_SIZE</i></dt>
  <dd class="It-tag">Each read(2)/write(2) call uses a minimum buffer of size
      BUFFER_SIZE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--continue-after-error</b></dt>
  <dd class="It-tag">Continue after data integrity errors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--direct</b></dt>
  <dd class="It-tag">Use direct I/O. Should only be used on block device files.
      Not all operating systems support direct I/O</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b>, <b>--generate-load</b></dt>
  <dd class="It-tag">Equivalent to: <b>-v</b> <b>-t</b> <b>-P</b> <b>-p</b>
      random <b>-i</b> 0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--iterations</b>=<i>COUNT</i></dt>
  <dd class="It-tag">Write/read data COUNT times. If count is 0, repeats
      forever.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--logfile</b>=<i>LOGFILE</i></dt>
  <dd class="It-tag">Send log messages to LOGFILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress</b></dt>
  <dd class="It-tag">Don't show progress (default).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-rcfiles</b></dt>
  <dd class="It-tag">Don't use standard rcfiles.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--no-statistics</b></dt>
  <dd class="It-tag">Don't output statistics.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-tui</b></dt>
  <dd class="It-tag">Don't use TUI interface.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--offset</b>=<i>OFFSET</i></dt>
  <dd class="It-tag">Seek to OFFSET before starting I/O.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>, <b>--progress</b></dt>
  <dd class="It-tag">Show progress.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>, <b>--pattern</b>=<i>PATTERN</i></dt>
  <dd class="It-tag">Use data pattern PATTERN when reading or writing data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--random</b></dt>
  <dd class="It-tag">Read/Write buffers to random offsets.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--raw</b></dt>
  <dd class="It-tag">An alias for <b>--read-after-write</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--rcfile</b>=<i>RCFILE</i></dt>
  <dd class="It-tag">Read command-line options from RCFILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--read</b></dt>
  <dd class="It-tag">Read date from FILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--read-after-write</b></dt>
  <dd class="It-tag">Read back data after writing to FILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>, <b>--seed</b>=<i>SEED</i></dt>
  <dd class="It-tag">Use SEED for random number seed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--sync</b></dt>
  <dd class="It-tag">Use synchronous I/O.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--statistics</b></dt>
  <dd class="It-tag">Output statistics (default).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--tui</b></dt>
  <dd class="It-tag">Use curses-based, terminal user interface.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b>, <b>--units</b>=<i>UNITS</i></dt>
  <dd class="It-tag">Show transfer rate in UNITS units.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--usage</b></dt>
  <dd class="It-tag">Show brief usage message and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Output version information and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--detailed-statistics</b></dt>
  <dd class="It-tag">Output detailed statistics.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--write</b></dt>
  <dd class="It-tag">Write data to FILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-?, <b>--help</b></dt>
  <dd class="It-tag">Show this help and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">FILE</dt>
  <dd class="It-tag">Regular or device file to write data to.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">LOGFILE</dt>
  <dd class="It-tag">Path to a file used for logging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MAX_BUFFER_SIZE</dt>
  <dd class="It-tag">Minimum buffer size used in each read(2)/write(2) call
      (default is MIN_BUFFER_SIZE bytes). MAX_BUFFER_SIZE. Must be an even
      multiple of 512 bytes and can be specified in bytes, kibibytes(k),
      kilobytes(K), mebibytes(m), megabytes(M), gibibytes(g), gigabytes(G).
      tebibytes(t), or terabytes(T). MAX_BUFFER_SIZE defaults to
      MIN_BUFFER_SIZE. If MAX_BUFFER_SIZE &gt; MIN_BUFFER_SIZE, random buffers
      sizes between the two limits are used. MAX_BUFFER_SIZE must be an even
      multiple of MIN_BUFFER_SIZE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MIN_BUFFER_SIZE</dt>
  <dd class="It-tag">Minimum buffer size used in each read(2)/write(2) call
      (default is 512 bytes). MIN_BUFFER_SIZE. Must be an even multiple of 512
      bytes and can be specified in bytes, kibibytes(k), kilobytes(K),
      mebibytes(m), megabytes(M), gibibytes(g), gigabytes(G). tebibytes(t), or
      terabytes(T).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">OFFSET</dt>
  <dd class="It-tag">Position to seek to in the file before starting I/O
      (default is 0). OFFSET must be an even multiple of 512 bytes and can be
      specified in bytes, kibibytes(k), kilobytes(K), mebibytes(m),
      megabytes(M), gibibytes(g), gigabytes(G). tebibytes(t), or
    terabytes(T).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">PATTERN</dt>
  <dd class="It-tag">Data pattern used when writing/reading data. Available
      patterns are: none, zeros, ones, alt, random, numbers, and &quot;#&quot;
      (where &quot;#&quot; is a number between 0-255). The default pattern is
      &quot;none&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">RCFILE</dt>
  <dd class="It-tag">Read additional command-line options from RCFILE. Other
      options on the command-line will override options in RCFILE.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">SEED</dt>
  <dd class="It-tag">Used to seed the random number generator Must be &gt;= 1
      and &lt;= 2^32.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">TRANSFER_SIZE</dt>
  <dd class="It-tag">Total number of bytes to transfer (must be an even multiple
      of both MIN_BUFFER_SIZE and MAX_BUFFER)SIZE). TRANSFER_SIZE can be
      specified in bytes, kilobytes, megabytes, or gigabytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">UNITS</dt>
  <dd class="It-tag">Kibibytes(k), kilobytes(K), mebibytes(m), megabytes(M),
      gibibytes(g), gigabytes(G). tebibytes(t), or terabytes(T).</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>spew --write -b 16k 1m /tmp/bigfile</b>
<div class="Pp"></div>
or
<div class="Pp"></div>
<b>spew -b 16k 1m /tmp/bigfile</b>
<div class="Pp"></div>
Writes 1 mebibyte (1 mebibyte = 1024*1024 bytes) using 16 kibibytes (1 kibibyte
  = 1024 bytes) requests to the file <i>/tmp/bigfile</i> using the default
  pattern (random). Displays the write transfer rate in kibibytes per second and
  the write transfer time in seconds.
<div class="Pp"></div>
<b>spew --write -u m -i 10 -b 1k 256k /dev/sda1</b>
<div class="Pp"></div>
or
<div class="Pp"></div>
<b>spew -u m -i 10 -b 1k 256k /dev/sda1</b>
<div class="Pp"></div>
Writes 256 kibibytes using 1 kibibyte requests to the block device file
  <i>/dev/sda1</i> 10 times using the default pattern (random). The iteration
  and cumulative write transfer rates are displayed in mebibytes per second and
  the iteration and cumulative write transfer times are displayed in seconds.
<div class="Pp"></div>
<b>spew --raw -d -o 1m -b 16m 1g /tmp/bigfile</b>
<div class="Pp"></div>
or
<div class="Pp"></div>
<b>regorge -s -o 1m -b 16m 1g /tmp/bigfile</b>
<div class="Pp"></div>
Write 1 gibibyte (1 gibibyte = 1024*1024*1024 bytes) starting at an offset of 1
  mebibyte using 16 mebibyte requests to the file <i>/tmp/bigfile</i> using the
  default pattern (random). The data is written synchronously and flushed at
  file close. Then read in the same data using the same request size and offset.
  The data is checked to ensure that the data read in matches the data read out.
  Write and read tranfer rates are displayed in kibibytes/second. Read are write
  transfer times are displayed in seconds.
<div class="Pp"></div>
<b>spew --read -i 0 -u M -p zeros -b 512 1m /dev/zero</b>
<div class="Pp"></div>
or
<div class="Pp"></div>
<b>gorge -i 0 -u M -p zeros -b 512 1m /dev/zero</b>
<div class="Pp"></div>
Read 1 mebibyte of data using 512 byte requests from the file <i>/dev/zero</i>
  an infinite number of times using the zeros pattern (don't check the data).
  The iteration and cumulative read transfer rates are displayed in megabytes (1
  megabyte = 1,000,000 bytes) per second and the iteration and cumulative read
  transfer times are displayed in seconds.
<div class="Pp"></div>
<b>spew --raw -g -r -b 1k -B 256K 1t /dev/md1</b>
<div class="Pp"></div>
or
<div class="Pp"></div>
<b>regorge -g -r -b 1k -B 256K 1t /dev/md1</b>
<div class="Pp"></div>
Write 1 tebibyte (1 tebibyte = 1024*1024*1024*1024 bytes) using 1-256 kibibyte
  requests to the block device <i>/dev/md1</i> using the random pattern. Random
  seeks are performed before each transfer, but each block between the start and
  end of the data is written exactly once. The request sizes are chosen
  randomly. Then read in the same data using the same request sizes and seeks in
  the same sequence. Repeat the above sequence an infinite number of times until
  told to quit (via signal or TUI command).
<div class="Pp"></div>
The data is checked to ensure that the data read in matches the data read out. A
  curses-based TUI is used to display iteration and cumulative transfer rates,
  transfer times, and bytes transferred. Display verbose statistics after
  quitting.
<h1 class="Sh" title="Sh" id="ALGORITHMS"><a class="selflink" href="#ALGORITHMS">ALGORITHMS</a></h1>
The following algorithm is used to determine blocksize when MAX_BUFFER_SIZE &gt;
  MIN_BUFFER_SIZE:
<div class="Pp"></div>
Find the largest blocksize that is a power of 2 and is &gt;= MAX_BUFFER_SIZE.
  Call this maxbuffersize. Find the smallest buffersize that is a power of 2 and
  is &gt;= MIN_BUFFER_SIZE. Call this minbuffersize. Chunksize = maxbuffersize *
  (difference in number of bits between min and maxbuffersize + 1). The number
  of chunks is TRANSFER_SIZE/chunksize. Call this numchunks. There will be
  numchunks number of read/writes that are of size maxbuffersize, 2 * numchunks
  number of read/writes that are of size maxbuffersize/2, 4 * numchunks number
  of read/writes that are of size maxbuffersize/4, and so on until minbuffersize
  is reached. MIN_BUFFER_SIZE is used for any remaining transfers if
  TRANSFER_SIZE is not evenly divisible by chunksize.
<div class="Pp"></div>
Example: Using a MIN_BLOCK_SIZE of 1k, a MAX_BLOCK_SIZE of 8k and a
  TRANSFER_SIZE of 264k results in 8 8k read/writes, 16 4k read/write, 32 2k
  read/writes, and 64 + 8 1k read/writes.
<h1 class="Sh" title="Sh" id="PATTERNS"><a class="selflink" href="#PATTERNS">PATTERNS</a></h1>
Use the following od(1) command to examine spew generated files where a data
  integrity problem has occurred:
<div class="Pp"></div>
od -A d --format=d8 --width=32 &lt;file&gt;
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">$HOME/.spewrc or $SPEWRC</dt>
  <dd class="It-tag">Holds user default options. These options precede any
      options included on the command-line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/spew.conf</dt>
  <dd class="It-tag">Holds system-wide default options. These options precede
      any options included on the command-line and options included from
      $HOME/.spewrc or $SPEWRC.</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Andrew Patterson &lt;andrew.patterson@hp.com&gt;
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to Andrew Patterson &lt;andrew.patterson@hp.com&gt;.
<div class="Pp"></div>
Copyright 2007 Hewlett-Packard Corp.</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2010</td>
    <td class="foot-os">spew 1.0.8</td>
  </tr>
</table>
</body>
</html>
