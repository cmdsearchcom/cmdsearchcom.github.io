<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>USCAN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">USCAN(1)</td>
    <td class="head-vol"> </td>
    <td class="head-rtitle">USCAN(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
uscan - scan/watch upstream sources for new releases of software
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>uscan</b> [<i>options</i>] [<i>path</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
For basic usage, <b>uscan</b> is executed without any arguments from the root of
  the Debianized source tree where you see the <i>debian/</i> directory. Then
  typically the following happens:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> reads the first entry in
      <i>debian/changelog</i> to determine the source package name
      <i>&lt;spkg&gt;</i> and the last upstream version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> process the watch lines <i>debian/watch</i>
      from the top to the bottom in a single pass.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> downloads a web page from the specified
      <i>URL</i> in <i>debian/watch</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> extracts hrefs pointing to the upstream
      tarball(s) from the web page using the specified <i>matching-pattern</i>
      in <i>debian/watch</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> downloads the upstream tarball with the
      highest version newer than the last upstream version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> saves the downloaded tarball to the parent
      <b>../</b> directory: <i>../&lt;upkg&gt;-&lt;uversion&gt;.tar.gz</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes <b>mk-origtargz</b> to create the
      source tarball: <i>../&lt;spkg&gt;_&lt;oversion&gt;.orig.tar.gz</i></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For a multiple upstream tarball (MUT) package, the
      secondary upstream tarball will instead be named
      <i>../&lt;spkg&gt;_&lt;oversion&gt;.orig-&lt;component&gt;.tar.gz</i>.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Repeat until all lines in <i>debian/watch</i> are
      processed.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes <b>uupdate</b> to create the
      Debianized source tree: <i>../&lt;spkg&gt;-&lt;oversion&gt;/*</i></dd>
</dl>
<div class="Pp"></div>
Please note the following.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">For simplicity, the compression method used in examples is
      <b>gzip</b> with <b>.gz</b> suffix. Other methods such as <b>xz</b>,
      <b>bzip2</b>, and <b>lzma</b> with corresponding <b>xz</b>, <b>bz2</b>,
      and <b>lzma</b> suffixes may also be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The new <b>version=4</b> enables handling of multiple
      upstream tarball (MUT) packages but this is a rare case for Debian
      packaging. For a single upstream tarball package, there is only one watch
      line and no
      <i>../&lt;spkg&gt;_&lt;oversion&gt;.orig-&lt;component&gt;.tar.gz</i>
    .</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> with the <b>--verbose</b> option produces a
      human readable report of <b>uscan</b>'s execution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> with the <b>--debug</b> option produces a
      human readable report of <b>uscan</b>'s execution including internal
      variable states.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> with the <b>--dehs</b> option produces an
      upstream package status report in XML format for other programs such as
      the Debian External Health System.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The primary objective of <b>uscan</b> is to help identify
      if the latest version upstream tarball is used or not; and to download the
      latest upstream tarball. The ordering of versions is decided by <b>dpkg
      --compare-versions</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> with the <b>--safe</b> option limits the
      functionality of <b>uscan</b> to its primary objective. Both the repacking
      of downloaded files and updating of the source tree are skipped to avoid
      running unsafe scripts. This also changes the default to
      <b>--no-download</b> and <b>--skip-signature</b>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FORMAT_OF_THE_WATCH_FILE"><a class="selflink" href="#FORMAT_OF_THE_WATCH_FILE">FORMAT
  OF THE WATCH FILE</a></h1>
The current version 4 format of <i>debian/watch</i> can be summarized as
  follows:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Leading spaces and tabs are dropped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Empty lines are dropped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A line started by <b>#</b> (hash) is a comment line and
      dropped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A single <b>\</b> (back slash) at the end of a line is
      dropped and the next line is concatenated after removing leading spaces
      and tabs. The concatenated line is parsed as a single line. (The existence
      or non-existence of the space before the tailing single <b>\</b> is
      significant.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The first non-comment line is:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>version=4</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
This is required.</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The following non-comment lines (watch lines) specify the
      rules for the selection of the candidate upstream tarball URLs and are in
      one of the following three formats:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>opts=&quot;</b> <i>...</i> <b>&quot;</b>
      <b>http://</b><i>URL</i> <i>matching-pattern</i> [<i>version</i>
      [<i>script</i>]]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>http://</b><i>URL</i> <i>matching-pattern</i>
      [<i>version</i> [ <i>script</i>]]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>opts=&quot;</b> <i>...</i> <b>&quot;</b></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Here,
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>opts=&quot;</b> <i>...</i> <b>&quot;</b> specifies the
      behavior of <b>uscan</b>. See &quot;WATCH FILE OPTIONS&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>http://</b><i>URL</i> specifies the web page where
      upstream publishes the link to the latest source archive.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>https://</b><i>URL</i> may also be used, as may</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>ftp://</b><i>URL</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Some parts of <i>URL</i> may be in the regex match pattern
      surrounded between <b>(</b> and <b>)</b> such as
      <b>/foo/bar-([\.\d]+)/</b>. (If multiple directories match, the highest
      version is picked.) Otherwise, the <i>URL</i> is taken as verbatim.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>matching-pattern</i> specifies the full string matching
      pattern for hrefs in the web page. See &quot;WATCH FILE
    EXAMPLES&quot;.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">All matching parts in <b>(</b> and <b>)</b> are
      concatenated with <b>.</b> (period) to form the upstream version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">If the hrefs do not contain directories, you can combine
      this with the previous entry. I.e.,
      <b>http://</b><i>URL</i><b>/</b><i>matching-pattern</i> .</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>version</i> restricts the upstream tarball which may be
      downloaded. The newest available version is chosen in each case.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>debian</b> requires the downloading upstream tarball to
      be newer than the version obtained from <i>debian/changelog</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>version-number</i> such as <b>12.5</b> requires the
      upstream tarball to be newer than the <i>version-number</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>same</b> requires the downloaded version of the
      secondary tarballs to be exactly the same as the one for the first
      upstream tarball downloaded. (Useful only for MUT)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>previous</b> restricts the version of the signature
      file. (Used with pgpmode=previous)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>ignore</b> does not restrict the version of the
      secondary tarballs. (Maybe useful for MUT)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>script</i> is executed at the end of <b>uscan</b>
      execution with appropriate arguments provided by <b>uscan</b>.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The typical Debian package is a non-native package made
      from one upstream tarball. Only a single line of the watch line in one of
      the first two formats is usually used with its <i>version</i> set to
      <b>debian</b> and <i>script</i> set to <b>uupdate</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A native package should not specify <i>script</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">A multiple upstream tarball (MUT) package should specify
      <b>uupdate</b> as <i>script</i> in the last watch line and should skip
      specifying <i>script</i> in the rest of the watch lines.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The last format of the watch line is useful to set the
      persistent parameters: <b>user-agent</b>, <b>compression</b>. If this
      format is used, this must be followed by the <i>URL</i> defining watch
      line(s).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">[ and ] in the above format are there to mark the optional
      parts and should not be typed.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
There are a few special strings which are substituted by <b>uscan</b> to make it
  easy to write the watch file.
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>@PACKAGE</b><b>@</b></dt>
  <dd class="It-tag">This is substituted with the source package name found in
      the first line of the <i>debian/changelog</i> file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>@ANY_VERSION</b><b>@</b></dt>
  <dd class="It-tag">This is substituted by the legal upstream version regex
      (capturing).
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
  [-_]?(\d[\-+\.:\~\da-zA-Z]*)
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>@ARCHIVE_EXT</b><b>@</b></dt>
  <dd class="It-tag">This is substituted by the typical archive file extension
      regex (non-capturing).
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
  (?i)\.(?:tar\.xz|tar\.bz2|tar\.gz|zip)
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>@SIGNATURE_EXT</b><b>@</b></dt>
  <dd class="It-tag">This is substituted by the typical signature file extension
      regex (non-capturing).
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
  (?i)\.(?:tar\.xz|tar\.bz2|tar\.gz|zip)\.(?:asc|pgp|gpg|sig)
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Some file extensions are not included in the above intentionally to avoid false
  positives. You can still set such file extension patterns manually.
<h1 class="Sh" title="Sh" id="WATCH_FILE_OPTIONS"><a class="selflink" href="#WATCH_FILE_OPTIONS">WATCH
  FILE OPTIONS</a></h1>
<b>uscan</b> reads the watch options specified in <b>opts=&quot;</b> <i>...</i>
  <b>&quot;</b> to customize its behavior. Multiple options <i>option1</i>,
  <i>option2</i>, <i>option3</i>, ... can be set as
  <b>opts=&quot;</b><i>option1</i> <b>,</b> <i>option2</i><b>,</b>
  <i>option3</i> <b>,</b> <i> ...</i> <i></i><b>&quot;</b> . The double quotes
  are necessary if options contain any spaces.
<div class="Pp"></div>
Unless otherwise noted as persistent, most options are valid only within their
  containing watch line.
<div class="Pp"></div>
The available watch options are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>component=</b><i>component</i></dt>
  <dd class="It-tag">Set the name of the secondary source tarball as
      <i>&lt;spkg&gt;_&lt;oversion&gt;.orig-&lt;component&gt;.tar.gz</i> for a
      MUT package.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>compression=</b><i>method</i></dt>
  <dd class="It-tag">Set the compression <i>method</i> when the tarball is
      repacked (persistent).
    <div style="height: 1.00em;">&#x00A0;</div>
    Available <i>method</i> values are <b>xz</b>, <b>gzip</b> (alias <b>gz</b>),
      <b>bzip2</b> (alias <b>bz2</b>), and <b>lzma</b>. The default is
      <b>gzip</b> for normal tarballs, and <b>xz</b> for tarballs generated
      directly from a git repository.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the debian source format is not 1.0, setting this to <b>xz</b> should
      help reduce the package size when the package is repacked.
    <div style="height: 1.00em;">&#x00A0;</div>
    Please note the repacking of the upstream tarballs by <b>mk-origtargz</b>
      happens only if one of the following conditions is satisfied:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>USCAN_REPACK</b> is set in the devscript configuration.
      See &quot;DEVSCRIPT CONFIGURATION VARIABLES&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>--repack</b> is set on the commandline. See
      &lt;COMMANDLINE OPTIONS&gt;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>repack</b> is set in the watch line as
      <b>opts=&quot;repack,</b> <i>...</i><b>&quot;</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">The upstream archive is of <b>zip</b> type including
      <b>jar</b>, <b>xpi</b>, ...</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Files-Excluded</b> or
      <b>Files-Excluded-</b><i>component</i> stanzas are set in
      <i>debian/copyright</i> to make <b>mk-origtargz</b> invoked from
      <b>uscan</b> remove files from the upstream tarball and repack it. See
      &quot;COPYRIGHT FILE EXAMPLES&quot; and <i>mk-origtargz</i>(1).</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>repack</b></dt>
  <dd class="It-tag">Force repacking of the upstream tarball using the
      compression <i>method</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>repacksuffix=</b><i>suffix</i></dt>
  <dd class="It-tag">Add <i>suffix</i> to the Debian package upstream version
      only when the source tarball is repackaged. This rule should be used only
      for a single upstream tarball package.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mode=</b><i>mode</i></dt>
  <dd class="It-tag">Set the archive download <i>mode</i>.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>LWP</b></dt>
  <dd class="It-tag">This mode is the default one which downloads the specified
      tarball from the archive URL on the web.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>git</b></dt>
  <dd class="It-tag">This mode accesses the upstream git archive directly with
      the <b>git</b> command and packs the source tree with the specified tag
      into <i>spkg-version</i><b>.tar.xz</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the upstream publishes the released tarball via its web interface, please
      use it instead of using this mode. This mode is the last resort
    method.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pgpmode=</b><i>mode</i></dt>
  <dd class="It-tag">Set the PGP/GPG signature verification <i>mode</i>.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>auto</b></dt>
  <dd class="It-tag"><b>uscan</b> checks possible URLs for the signature file
      and autogenerates a <b>pgpsigurlmangle</b> rule to use it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>default</b></dt>
  <dd class="It-tag">Use <b>pgpsigurlmangle=</b><i>rules</i> to generate the
      candidate upstream signature file URL string from the upstream tarball
      URL. (default)
    <div style="height: 1.00em;">&#x00A0;</div>
    If the specified <b>pgpsigurlmangle</b> is missing, <b>uscan</b> checks
      possible URLs for the signature file and suggests adding a
      <b>pgpsigurlmangle</b> rule.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mangle</b></dt>
  <dd class="It-tag">Use <b>pgpsigurlmangle=</b><i>rules</i> to generate the
      candidate upstream signature file URL string from the upstream tarball
      URL.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>next</b></dt>
  <dd class="It-tag">Verify this downloaded tarball file with the signature file
      specified in the next watch line. The next watch line must be
      <b>pgpmode=previous</b>. Otherwise, no verification occurs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>previous</b></dt>
  <dd class="It-tag">Verify the downloaded tarball file specified in the
      previous watch line with this signature file. The previous watch line must
      be <b>pgpmode=next</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>self</b></dt>
  <dd class="It-tag">Verify the downloaded file <i>foo.ext</i> with its self
      signature and extract its content tarball file as <i>foo</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>none</b></dt>
  <dd class="It-tag">No signature available. (No warning.)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>decompress</b></dt>
  <dd class="It-tag">Decompress compressed archive before the pgp/gpg signature
      verification.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bare</b></dt>
  <dd class="It-tag">Disable all site specific special case code such as URL
      redirector uses and page content alterations. (persistent)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>user-agent=</b><i>user-agent-string</i></dt>
  <dd class="It-tag">Set the user-agent string used to contact the HTTP(S)
      server as <i>user-agent-string</i>. (persistent)
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>user-agent</b> option should be specified by itself in the watch line
      without <i>URL</i>, to allow using semicolons and commas in it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pasv</b>, <b>passive</b></dt>
  <dd class="It-tag">Use PASV mode for the FTP connection.
    <div style="height: 1.00em;">&#x00A0;</div>
    If PASV mode is required due to the client side network environment, set
      <b>uscan</b> to use PASV mode via &quot;COMMANDLINE OPTIONS&quot; or
      &quot;DEVSCRIPT CONFIGURATION VARIABLES&quot; instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>active</b>, <b>nopasv</b></dt>
  <dd class="It-tag">Don't use PASV mode for the FTP connection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unzipopt=</b><i>options</i></dt>
  <dd class="It-tag">Add the extra options to use with the <b>unzip</b> command,
      such as <b>-a</b>, <b>-aa</b>, and <b>-b</b>, when executed by
      <b>mk-origtargz</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dversionmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Normalize the last upstream version string found in
      <i>debian/changelog</i> to compare it to the available upstream tarball
      version. Removal of the Debian specific suffix such as
      <b>s/\+dfsg\d*$//</b> is usually done here.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dirversionmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Normalize the directory path string matching the regex in a
      set of parentheses of <b>http://</b><i>URL</i> as the sortable version
      index string. This is used as the directory path sorting index only.
    <div style="height: 1.00em;">&#x00A0;</div>
    Substitution such as <b>s/PRE/~pre/; s/RC/~rc/</b> may help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pagemangle=</b><i>rules</i></dt>
  <dd class="It-tag">Normalize the downloaded web page string. (Don't use this
      unless this is absolutely needed. Generally, <b>g</b> flag is required for
      these <i>rules</i>.)
    <div style="height: 1.00em;">&#x00A0;</div>
    This is handy if you wish to access Amazon AWS or Subversion repositories in
      which &lt;a href=&quot;...&quot;&gt; is not used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uversionmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Normalize the candidate upstream version strings extracted
      from hrefs in the source of the web page. This is used as the version
      sorting index when selecting the latest upstream version.
    <div style="height: 1.00em;">&#x00A0;</div>
    Substitution such as <b>s/PRE/~pre/; s/RC/~rc/</b> may help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>versionmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Syntactic shorthand for
      <b>uversionmangle=</b><i>rules</i><b>,
    dversionmangle=</b><i>rules</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>downloadurlmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Convert the selected upstream tarball href string into the
      accessible URL for obfuscated web sites.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>filenamemangle=</b><i>rules</i></dt>
  <dd class="It-tag">Generate the upstream tarball filename from the selected
      href string if <i>matching-pattern</i> can extract the latest upstream
      version <i>&lt;uversion&gt;</i> from the selected href string. Otherwise,
      generate the upstream tarball filename from its full URL string and set
      the missing <i>&lt;uversion&gt;</i> from the generated upstream tarball
      filename.
    <div style="height: 1.00em;">&#x00A0;</div>
    Without this option, the default upstream tarball filename is generated by
      taking the last component of the URL and removing everything after any '?'
      or '#'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pgpsigurlmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Generate the candidate upstream signature file URL string
      from the upstream tarball URL.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>oversionmangle=</b><i>rules</i></dt>
  <dd class="It-tag">Generate the version string <i>&lt;oversion&gt;</i> of the
      source tarball <i>&lt;spkg&gt;_&lt;oversion&gt;.orig.tar.gz</i> from
      <i>&lt;uversion&gt;</i>. This should be used to add a suffix such as
      <b>+dfsg1</b> to a MUT package.</dd>
</dl>
<div class="Pp"></div>
Here, the mangling rules apply the <i>rules</i> to the pertinent string.
  Multiple rules can be specified in a mangling rule string by making a
  concatenated string of each mangling <i>rule</i> separated by <b>;</b>
  (semicolon).
<div class="Pp"></div>
Each mangling <i>rule</i> cannot contain <b>;</b> (semicolon), <b>,</b> (comma),
  or <b>&quot;</b> (double quote).
<div class="Pp"></div>
Each mangling <i>rule</i> behaves as if a Perl command
  &quot;<i></i><i>$string</i> <i></i> <b>=~</b> <i>rule</i>&quot; is executed.
  There are some notable details.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>rule</i> may only use the <b>s</b>, <b>tr</b>, and
      <b>y</b> operations.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>s/</b><i>regex</i><b>/</b><i>replacement</i><b>/</b><i>options</i></dt>
  <dd class="It-tag">Regex pattern match and replace the target string. Only the
      <b>g</b>, <b>i</b> and <b>x</b> flags are available. Use the
      <b></b><b>$1</b> <b></b> syntax for back references (No <b>\1</b> syntax).
      Code execution is not allowed (i.e. no <b>(?{})</b> or <b>(??{})</b>
      constructs).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>y/</b><i>source</i><b>/</b><i>dest</i><b>/</b> or
    <b>tr/</b> <i>source</i><b>/</b><i>dest</i><b>/</b></dt>
  <dd class="It-tag">Transliterate the characters in the target string.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<h1 class="Sh" title="Sh" id="EXAMPLE_OF_EXECUTION"><a class="selflink" href="#EXAMPLE_OF_EXECUTION">EXAMPLE
  OF EXECUTION</a></h1>
<b>uscan</b> reads the first entry in <i>debian/changelog</i> to determine the
  source package name and the last upstream version.
<div class="Pp"></div>
For example, if the first entry of <i>debian/changelog</i> is:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>bar</i> (<b>3:2.03+dfsg1-4</b>) unstable;
    urgency=low</dd>
</dl>
<div class="Pp"></div>
then, the source package name is <i>bar</i> and the last Debian package version
  is <b>3:2.03+dfsg1-4</b>.
<div class="Pp"></div>
The last upstream version is normalized to <b>2.03+dfsg1</b> by removing the
  epoch and the Debian revision.
<div class="Pp"></div>
If the <b>dversionmangle</b> rule exists, the last upstream version is further
  normalized by applying this rule to it. For example, if the last upstream
  version is <b>2.03+dfsg1</b> indicating the source tarball is repackaged, the
  suffix <b>+dfsg1</b> is removed by the string substitution
  <b>s/\+dfsg\d*$//</b> to make the (dversionmangled) last upstream version
  <b>2.03</b> and it is compared to the candidate upstream tarball versions such
  as <b>2.03</b>, <b>2.04</b>, ... found in the remote site. Thus, set this rule
  as:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>opts=&quot;dversionmangle=s/\+dfsg\d*$//&quot;</b></dd>
</dl>
<div class="Pp"></div>
<b>uscan</b> downloads a web page from <b>http://</b><i>URL</i> specified in
  <i>debian/watch</i>.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">If the directory name part of <i>URL</i> has no
      parentheses, <b>(</b> and <b>)</b>, it is taken as verbatim.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">If the directory name part of <i>URL</i> has parentheses,
      <b>(</b> and <b>)</b>, then <b>uscan</b> recursively searches all possible
      directories to find a page for the newest version. If the
      <b>dirversionmangle</b> rule exists, the generated sorting index is used
      to find the newest version. If a specific version is specified for the
      download, the matching version string has priority over the newest
      version.</dd>
</dl>
<div class="Pp"></div>
For example, this <b>http://</b><i>URL</i> may be specified as:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>http://www.example.org/([\d\.]+)/</b></dd>
</dl>
<div class="Pp"></div>
Please note the trailing <b>/</b> in the above to make <b>([\d\.]+)</b> as the
  directory.
<div class="Pp"></div>
If the <b>pagemangle</b> rule exists, the whole downloaded web page as a string
  is normalized by applying this rule to it. This is very powerful tool and
  needs to be used with caution. If other mangling rules can be used to address
  your objective, do not use this rule.
<div class="Pp"></div>
The downloaded web page is scanned for hrefs defined in the <b>&lt;a
  href=&quot;</b> <i>...</i> <b>&quot;&gt;</b> tag to locate the candidate
  upstream tarball hrefs. These candidate upstream tarball hrefs are matched by
  the Perl regex pattern <i>matching-pattern</i> such as
  <b>DL-(?:[\d\.]+?)/foo-(.+)\.tar\.gz</b> to narrow down the candidates. This
  pattern match needs to be anchored at the beginning and the end. For example,
  candidate hrefs may be:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>DL-2.02/foo-2.02.tar.gz</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>DL-2.03/foo-2.03.tar.gz</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>DL-2.04/foo-2.04.tar.gz</b></dd>
</dl>
<div class="Pp"></div>
Here the matching string of <b>(.+)</b> in <i>matching-pattern</i> is considered
  as the candidate upstream version. If there are multiple matching strings of
  capturing patterns in <i>matching-pattern</i>, they are all concatenated with
  <b>.</b> (period) to form the candidate upstream version. Make sure to use the
  non-capturing regex such as <b>(?:[\d\.]+?)</b> instead for the variable text
  matching part unrelated to the version.
<div class="Pp"></div>
Then, the candidate upstream versions are:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>2.02</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>2.03</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>2.04</b></dd>
</dl>
<div class="Pp"></div>
The downloaded tarball filename is basically set to the same as the filename in
  the remote URL of the selected href.
<div class="Pp"></div>
If the <b>uversionmangle</b> rule exists, the candidate upstream versions are
  normalized by applying this rule to them. (This rule may be useful if the
  upstream version scheme doesn't sort correctly to identify the newest
  version.)
<div class="Pp"></div>
The upstream tarball href corresponding to the newest (uversionmangled)
  candidate upstream version newer than the (dversionmangled) last upstream
  version is selected.
<div class="Pp"></div>
If multiple upstream tarball hrefs corresponding to a single version with
  different extensions exist, the highest compression one is chosen. (Priority:
  <b>tar.xz &gt; tar.lzma &gt; tar.bz2 &gt; tar.gz</b>.)
<div class="Pp"></div>
If the selected upstream tarball href is the relative URL, it is converted to
  the absolute URL using the base URL of the web page. If the <b>&lt;base
  href=&quot;</b> <i> ... </i> <b>&quot;&gt;</b> tag exists in the web page, the
  selected upstream tarball href is converted to the absolute URL using the
  specified base URL in the base tag, instead.
<div class="Pp"></div>
If the <b>downloadurlmangle</b> rule exists, the selected upstream tarball href
  is normalized by applying this rule to it. (This is useful for some sites with
  the obfuscated download URL.)
<div class="Pp"></div>
If the <b>filenamemangle</b> rule exists, the downloaded tarball filename is
  generated by applying this rule to the selected href if
  <i>matching-pattern</i> can extract the latest upstream version
  <i>&lt;uversion&gt;</i> from the selected href string. Otherwise, generate the
  upstream tarball filename from its full URL string and set the missing
  <i>&lt;uversion&gt;</i> from the generated upstream tarball filename.
<div class="Pp"></div>
Without the <b>filenamemangle</b> rule, the default upstream tarball filename is
  generated by taking the last component of the URL and removing everything
  after any '?' or '#'.
<div class="Pp"></div>
<b>uscan</b> downloads the selected upstream tarball to the parent <b>../</b>
  directory. For example, the downloaded file may be:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>../foo-2.04.tar.gz</i></dd>
</dl>
<div class="Pp"></div>
Let's call this downloaded version <b>2.04</b> in the above example generically
  as <i>&lt;uversion&gt;</i> in the following.
<div class="Pp"></div>
If the <b>pgpsigurlmangle</b> rule exists, the upstream signature file URL is
  generated by applying this rule to the (downloadurlmangled) selected upstream
  tarball href and the signature file is tried to be downloaded from it.
<div class="Pp"></div>
If the <b>pgpsigurlmangle</b> rule doesn't exist, <b>uscan</b> warns user if the
  matching upstream signature file is available from the same URL with their
  filename being suffixed by the 4 common suffix <b>asc</b>, <b>gpg</b>,
  <b>pgp</b>, and <b>sig</b>. (You can avoid this warning by setting
  <b>pgpmode=none</b>.)
<div class="Pp"></div>
If the signature file is downloaded, the downloaded upstream tarball is checked
  for its authenticity against the downloaded signature file using the keyring
  <i>debian/upstream/signing-key.pgp</i> or the armored keyring
  <i>debian/upstream/signing-key.asc</i> (see &quot;KEYRING FILE
  EXAMPLES&quot;). If its signature is not valid, or not made by one of the
  listed keys, <b>uscan</b> will report an error.
<div class="Pp"></div>
If the <b>oversionmangle</b> rule exists, the source tarball version
  <i>oversion</i> is generated from the downloaded upstream version
  <i>uversion</i> by applying this rule. This rule is useful to add suffix such
  as <b>+dfsg1</b> to the version of all the source packages of the MUT package
  for which the repacksuffix mechanism doesn't work.
<div class="Pp"></div>
<b>uscan</b> invokes <b>mk-origtargz</b> to create the source tarball properly
  named for the source package with <b>.orig.</b> (or
  <b>.orig-&lt;component&gt;.</b> for the secondary tarballs) in its filename.
<dl class="Bl-tag">
  <dt class="It-tag">case A: packaging of the upstream tarball as is</dt>
  <dd class="It-tag"><b>mk-origtargz</b> creates a symlink
      <i>../bar_&lt;oversion&gt;.orig.tar.gz</i> linked to the downloaded local
      upstream tarball. Here, <i>bar</i> is the source package name found in
      <i>debian/changelog</i>. The generated symlink may be:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>../bar_2.04.orig.tar.gz</i> -&gt; <i>foo-2.04.tar.gz</i>
      (as is)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Usually, there is no need to set up <b>opts=&quot;dversionmangle=</b> <i>...</i>
  <b>&quot;</b> for this case.</div>
<dl class="Bl-tag">
  <dt class="It-tag">case B: packaging of the upstream tarball after removing
    non-DFSG files</dt>
  <dd class="It-tag"><b>mk-origtargz</b> checks the filename glob of the
      <b>Files-Excluded</b> stanza in the first section of
      <i>debian/copyright</i>, removes matching files to create a repacked
      upstream tarball. Normally, the repacked upstream tarball is renamed with
      <i>suffix</i> to <i>../bar_&lt;oversion&gt;&lt;suffix&gt;.orig.tar.gz</i>
      using the <b>repacksuffix</b> option for the single upstream package. Here
      <i>&lt;oversion&gt;</i> is updated to be
      <i>&lt;oversion&gt;&lt;suffix&gt;</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    The removal of files is required if files are not DFSG-compliant. For such
      case, <b>+dfsg1</b> is used as <i>suffix</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    So the combined options are set as
      <b>opts=&quot;dversionmangle=s/\+dfsg\d*$//
      ,repacksuffix=+dfsg1&quot;</b>, instead.
    <div style="height: 1.00em;">&#x00A0;</div>
    For example, the repacked upstream tarball may be:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>../bar_2.04+dfsg1.orig.tar.gz</i> (repackaged)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<div class="Pp"></div>
<b>uscan</b> normally invokes &quot;<b>uupdate</b> <b>--find
  --upstream-version</b> <i>oversion</i> &quot; for the version=4 watch file.
<div class="Pp"></div>
Please note that <b>--find</b> option is used here since <b>mk-origtargz</b> has
  been invoked to make <b>*.orig.tar.gz</b> file already. <b>uscan</b> picks
  <i>bar</i> from <i>debian/changelog</i>.
<div class="Pp"></div>
It creates the new upstream source tree under the <i>../bar-&lt;oversion&gt;</i>
  directory and Debianize it leveraging the last package contents.
<h1 class="Sh" title="Sh" id="WATCH_FILE_EXAMPLES"><a class="selflink" href="#WATCH_FILE_EXAMPLES">WATCH
  FILE EXAMPLES</a></h1>
When writing the watch file, you should rely on the latest upstream source
  announcement web page. You should not try to second guess the upstream archive
  structure if possible. Here are the typical <i>debian/watch</i> files.
<div class="Pp"></div>
Please note that executing <b>uscan</b> with <b>-v</b> or <b>-vv</b> reveals
  what exactly happens internally.
<div class="Pp"></div>
The existence and non-existence of a space the before tailing <b>\</b> (back
  slash) are significant.
<h2 class="Ss" title="Ss" id="HTTP_site_(basic)"><a class="selflink" href="#HTTP_site_(basic)">HTTP
  site (basic)</a></h2>
Here is an example for the basic single upstream tarball.
<div class="Pp"></div>
<pre>
  version=4
  http://example.com/~user/release/foo.html \
      files/foo-([\d\.]+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
Or using the special strings:
<div class="Pp"></div>
<pre>
  version=4
  http://example.com/~user/release/@PACKAGE@.html \
      files/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian uupdate
</pre>
<div class="Pp"></div>
For the upstream source package <b>foo-2.0.tar.gz</b>, this watch file downloads
  and creates the Debian <b>orig.tar</b> file <b>foo_2.0.orig.tar.gz</b>.
<h2 class="Ss" title="Ss" id="HTTP_site_(pgpsigurlmangle)"><a class="selflink" href="#HTTP_site_(pgpsigurlmangle)">HTTP
  site (pgpsigurlmangle)</a></h2>
Here is an example for the basic single upstream tarball with the matching
  signature file in the same file path.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpsigurlmangle=s%$%.asc%&quot; http://example.com/release/@PACKAGE@.html \
      files/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian uupdate
</pre>
<div class="Pp"></div>
For the upstream source package <b>foo-2.0.tar.gz</b> and the upstream signature
  file <b>foo-2.0.tar.gz.asc</b>, this watch file downloads these files,
  verifies the authenticity using the keyring <i>debian/upstream-key.pgp</i> and
  creates the Debian <b>orig.tar</b> file <b>foo_2.0.orig.tar.gz</b>.
<h2 class="Ss" title="Ss" id="HTTP_site_(pgpmode=next/previous)"><a class="selflink" href="#HTTP_site_(pgpmode=next/previous)">HTTP
  site (pgpmode=next/previous)</a></h2>
Here is an example for the basic single upstream tarball with the matching
  signature file in the unrelated file path.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpmode=next&quot; http://example.com/release/@PACKAGE@.html \
      files/(?:\d+)/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian
  opts=&quot;pgpmode=previous&quot; http://example.com/release/@PACKAGE@.html \
      files/(?:\d+)/@PACKAGE@@ANY_VERSION@@SIGNATURE_EXT@ previous uupdate
</pre>
<div class="Pp"></div>
<b>(?:\d+)</b> part can be any random value. The tarball file can have
  <b>53</b>, while the signature file can have <b>33</b>.
<div class="Pp"></div>
<b>([\d\.]+)</b> part for the signature file has a strict requirement to match
  that for the upstream tarball specified in the previous line by having
  <b>previous</b> as <i>version</i> in the watch line.
<h2 class="Ss" title="Ss" id="HTTP_site_(flexible)"><a class="selflink" href="#HTTP_site_(flexible)">HTTP
  site (flexible)</a></h2>
Here is an example for the maximum flexibility of upstream tarball and signature
  file extensions.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpmode=next&quot; http://example.com/DL/ \
      files/(?:\d+)/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian
  opts=&quot;pgpmode=previous&quot; http://example.com/DL/ \
      files/(?:\d+)/@PACKAGE@@ANY_VERSION@@SIGNATURE_EXT@ \
      previous uupdate
</pre>
<h2 class="Ss" title="Ss" id="HTTP_site_(basic_MUT)"><a class="selflink" href="#HTTP_site_(basic_MUT)">HTTP
  site (basic MUT)</a></h2>
Here is an example for the basic multiple upstream tarballs.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpsigurlmangle=s%$%.sig%&quot; \
      http://example.com/release/foo.html \
      files/foo-([\d\.]+)\.tar\.gz debian
  opts=&quot;pgpsigurlmangle=s%$%.sig%, component=bar&quot; \
      http://example.com/release/foo.html \
      files/foobar-([\d\.]+)\.tar\.gz same
  opts=&quot;pgpsigurlmangle=s%$%.sig%, component=baz&quot; \
      http://example.com/release/foo.html \
      files/foobaz-([\d\.]+)\.tar\.gz same uupdate
</pre>
<div class="Pp"></div>
For the main upstream source package <b>foo-2.0.tar.gz</b> and the secondary
  upstream source packages <b>foobar-2.0.tar.gz</b> and <b>foobaz-2.0.tar.gz</b>
  which install under <i>bar/</i> and <i>baz/</i>, this watch file downloads and
  creates the Debian <b>orig.tar</b> file <b>foo_2.0.orig.tar.gz</b>,
  <b>foo_2.0.orig-bar.tar.gz</b> and <b>foo_2.0.orig-baz.tar.gz</b>. Also, these
  upstream tarballs are verified by their signature files.
<h2 class="Ss" title="Ss" id="HTTP_site_(recursive_directory_scanning)"><a class="selflink" href="#HTTP_site_(recursive_directory_scanning)">HTTP
  site (recursive directory scanning)</a></h2>
Here is an example with the recursive directory scanning for the upstream
  tarball and its signature files released in a directory named after their
  version.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpsigurlmangle=s%$%.sig%, dirversionmangle=s/-PRE/~pre/;s/-RC/~rc/&quot; \
      http://tmrc.mit.edu/mirror/twisted/Twisted/([\d+\.]+)/ \
      Twisted-([\d\.]+)\.tar\.xz debian uupdate
</pre>
<div class="Pp"></div>
Here, the web site should be accessible at the following URL:
<div class="Pp"></div>
<pre>
  http://tmrc.mit.edu/mirror/twisted/Twisted/
</pre>
<div class="Pp"></div>
Here, <b>dirversionmangle</b> option is used to normalize the sorting order of
  the directory names.
<h2 class="Ss" title="Ss" id="HTTP_site_(alternative_shorthand)"><a class="selflink" href="#HTTP_site_(alternative_shorthand)">HTTP
  site (alternative shorthand)</a></h2>
For the bare HTTP site where you can directly see archive filenames, the normal
  watch file:
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpsigurlmangle=s%$%.sig%&quot; \
      http://www.cpan.org/modules/by-module/Text/ \
      Text-CSV_XS-(.+)\.tar\.gz \
      debian uupdate
</pre>
<div class="Pp"></div>
can be rewritten in an alternative shorthand form:
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpsigurlmangle=s%$%.sig%&quot; \
      http://www.cpan.org/modules/by-module/Text/\
      Text-CSV_XS-(.+)\.tar\.gz \
      debian uupdate
</pre>
<div class="Pp"></div>
Please note that <i>matching-pattern</i> of the first example doesn't have
  directory and the subtle difference of a space before the tailing <b>\</b>.
<h2 class="Ss" title="Ss" id="HTTP_site_(funny_version)"><a class="selflink" href="#HTTP_site_(funny_version)">HTTP
  site (funny version)</a></h2>
For a site which has funny version numbers, the parenthesized groups will be
  joined with <b>.</b> (period) to make a sanitized version number.
<div class="Pp"></div>
<pre>
  version=4
  http://www.site.com/pub/foobar/foobar_v(\d+)_(\d+)\.tar\.gz \
  debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="HTTP_site_(DFSG)"><a class="selflink" href="#HTTP_site_(DFSG)">HTTP
  site (DFSG)</a></h2>
The upstream part of the Debian version number can be mangled to indicate the
  source package was repackaged to clean up non-DFSG files:
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;dversionmangle=s/\+dfsg\d*$//,repacksuffix=+dfsg1&quot; \
  http://some.site.org/some/path/foobar-(.+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
See &quot;COPYRIGHT FILE EXAMPLES&quot;.
<h2 class="Ss" title="Ss" id="HTTP_site_(filenamemangle)"><a class="selflink" href="#HTTP_site_(filenamemangle)">HTTP
  site (filenamemangle)</a></h2>
The upstream tarball filename is found by taking the last component of the URL
  and removing everything after any '?' or '#'.
<div class="Pp"></div>
If this does not fit to you, use <b>filenamemangle</b>. For example,
  <i>&lt;A</i>
  <i>href=&quot;http://foo.bar.org/dl/?path=&amp;dl=foo-0.1.1.tar.gz&quot;&gt;</i>
  could be handled as:
<div class="Pp"></div>
<pre>
  version=4
  opts=filenamemangle=s/.*=(.*)/$1/ \
  http://foo.bar.org/dl/\?path=&amp;dl=foo-(.+)\.tar\.gz \
  debian uupdate
</pre>
<div class="Pp"></div>
<i>&lt;A
  href=&quot;http://foo.bar.org/dl/?path=&amp;dl_version=0.1.1&quot;&gt;</i>
  could be handled as:
<div class="Pp"></div>
<pre>
  version=4
  opts=filenamemangle=s/.*=(.*)/foo-$1\.tar\.gz/ \
  http://foo.bar.org/dl/\?path=&amp;dl_version=(.+) \
  debian uupdate
</pre>
<div class="Pp"></div>
If the href string has no version using &lt;I&gt;matching-pattern&gt;, the
  version can be obtained from the full URL using <b>filenamemangle</b>.
<div class="Pp"></div>
<pre>
  version=4
  opts=filenamemangle=s&amp;.*/dl/(.*)/foo\.tar\.gz&amp;foo-$1\.tar\.gz&amp; \
  http://foo.bar.org/dl/([\.\d]+)/ foo.tar.gz \
  debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="HTTP_site_(downloadurlmangle)"><a class="selflink" href="#HTTP_site_(downloadurlmangle)">HTTP
  site (downloadurlmangle)</a></h2>
The option <b>downloadurlmangle</b> can be used to mangle the URL of the file to
  download. This can only be used with <b>http://</b> URLs. This may be
  necessary if the link given on the web page needs to be transformed in some
  way into one which will work automatically, for example:
<div class="Pp"></div>
<pre>
  version=4
  opts=downloadurlmangle=s/prdownload/download/ \
  http://developer.berlios.de/project/showfiles.php?group_id=2051 \
  http://prdownload.berlios.de/softdevice/vdr-softdevice-(.+).tgz \
  debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="HTTP_site_(oversionmangle,_MUT)"><a class="selflink" href="#HTTP_site_(oversionmangle,_MUT)">HTTP
  site (oversionmangle, MUT)</a></h2>
The option <b>oversionmangle</b> can be used to mangle the version of the source
  tarball ( <b>.orig.tar.gz</b> and <b>.orig-bar.tar.gz</b>). For example,
  <b>+dfsg1</b> can be added to the upstream version as:
<div class="Pp"></div>
<pre>
  version=4
  opts=oversionmangle=s/(.*)/$1+dfsg1/ \
  http://example.com/~user/release/foo.html \
  files/foo-([\d\.]*).tar.gz debian
  opts=&quot;component=bar&quot; \
  http://example.com/~user/release/foo.html \
  files/bar-([\d\.]*).tar.gz same uupdate
</pre>
<div class="Pp"></div>
See &quot;COPYRIGHT FILE EXAMPLES&quot;.
<h2 class="Ss" title="Ss" id="HTTP_site_(pagemangle)"><a class="selflink" href="#HTTP_site_(pagemangle)">HTTP
  site (pagemangle)</a></h2>
The option <b>pagemangle</b> can be used to mangle the downloaded web page
  before applying other rules. The non-standard web page without proper <b>&lt;a
  href=&quot;</b> &lt;&lt; ... &gt;&gt; <b>&quot;&gt;</b> entries can be
  converted. For example, if <i>foo.html</i> uses <b>&lt;a bogus=&quot;</b>
  <i>...</i> <b>&quot;&gt;</b>, this can be converted to the standard page
  format with:
<div class="Pp"></div>
<pre>
  version=4
  opts=pagemangle=&quot;s/&lt;a\s+bogus=/&lt;a href=/g&quot; \
  http://example.com/release/@PACKAGE@.html \
  files/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian uupdate
</pre>
<div class="Pp"></div>
Please note the use of <b>g</b> here to replace all occurrences.
<div class="Pp"></div>
If <i>foo.html</i> uses <b>&lt;Key&gt;</b> <i>...</i> <b>&lt;/Key&gt;</b>, this
  can be converted to the standard page format with:
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pagemangle=s%&lt;Key&gt;([^&lt;]*)&lt;/Key&gt;%&lt;Key&gt;&lt;a href=&quot;$1&quot;&gt;$1&lt;/a&gt;&lt;/Key&gt;%g&quot; \\
  http://localhost:$PORT/ \
  (?:.*)/@PACKAGE@@ANY_VERSION@@ARCHIVE_EXT@ debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="FTP_site_(basic):"><a class="selflink" href="#FTP_site_(basic):">FTP
  site (basic):</a></h2>
<pre>
  version=4
  ftp://ftp.tex.ac.uk/tex-archive/web/c_cpp/cweb/cweb-(.+)\.tar\.gz \
  debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="FTP_site_(regex_special_characters):"><a class="selflink" href="#FTP_site_(regex_special_characters):">FTP
  site (regex special characters):</a></h2>
<pre>
  version=4
  ftp://ftp.worldforge.org/pub/worldforge/libs/\
  Atlas-C++/transitional/Atlas-C\+\+-(.+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
Please note that this URL is connected to be <i> ...
  </i><b>libs/Atlas-C++/</b><i> ... </i> . For <b>++</b>, the first one in the
  directory path is verbatim while the one in the filename is escaped by
  <b>\</b>.
<h2 class="Ss" title="Ss" id="FTP_site_(funny_version)"><a class="selflink" href="#FTP_site_(funny_version)">FTP
  site (funny version)</a></h2>
This is another way of handling site with funny version numbers, this time using
  mangling. (Note that multiple groups will be concatenated before mangling is
  performed, and that mangling will only be performed on the basename version
  number, not any path version numbers.)
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;uversionmangle=s/^/0.0./&quot; \
  ftp://ftp.ibiblio.org/pub/Linux/ALPHA/wine/\
  development/Wine-(.+)\.tar\.gz debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="sf.net"><a class="selflink" href="#sf.net">sf.net</a></h2>
For SourceForge based projects, qa.debian.org runs a redirector which allows a
  simpler form of URL. The format below will automatically be rewritten to use
  the redirector with the watch file:
<div class="Pp"></div>
<pre>
  version=4
  http://sf.net/&lt;project&gt;/ &lt;tar-name&gt;-(.+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
For <b>audacity</b>, set the watch file as:
<div class="Pp"></div>
<pre>
  version=4
  http://sf.net/audacity/ audacity-minsrc-(.+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
Please note, you can still use normal functionalities of <b>uscan</b> to set up
  a watch file for this site without using the redirector.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;uversionmangle=s/-pre/~pre/, \
        filenamemangle=s%(?:.*)audacity-minsrc-(.+)\.tar\.xz/download%\
                         audacity-$1.tar.xz%&quot; \
        http://sourceforge.net/projects/audacity/files/audacity/(\d[\d\.]+)/ \
        (?:.*)audacity-minsrc-([\d\.]+)\.tar\.xz/download debian uupdate
</pre>
<div class="Pp"></div>
Here, <b>%</b> is used as the separator instead of the standard <b>/</b>.
<h2 class="Ss" title="Ss" id="github.com"><a class="selflink" href="#github.com">github.com</a></h2>
For GitHub based projects, you can use the tags or releases page. The archive
  URL uses only the version as the filename. You can rename the downloaded
  upstream tarball from into the standard
  <i>&lt;project&gt;-&lt;version&gt;.tar.gz</i> using <b>filenamemangle</b>:
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;filenamemangle=s%(?:.*?)?v?(\d[\d.]*)\.tar\.gz%&lt;project&gt;-$1.tar.gz%&quot; \
      https://github.com/&lt;user&gt;/&lt;project&gt;/tags \
      (?:.*?/)?v?(\d[\d.]*)\.tar\.gz debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="PyPI"><a class="selflink" href="#PyPI">PyPI</a></h2>
For PyPI based projects, pypi.debian.net runs a redirector which allows a
  simpler form of URL. The format below will automatically be rewritten to use
  the redirector with the watch file:
<div class="Pp"></div>
<pre>
  version=4
  https://pypi.python.org/packages/source/&lt;initial&gt;/&lt;project&gt;/ \
      &lt;tar-name&gt;-(.+)\.tar\.gz debian uupdate
</pre>
<div class="Pp"></div>
For <b>cfn-sphere</b>, set the watch file as:
<div class="Pp"></div>
<pre>
  version=4
  https://pypi.python.org/packages/source/c/cfn-sphere/ \
      cfn-sphere-([\d\.]+).tar.gz debian uupdate
</pre>
<div class="Pp"></div>
Please note, you can still use normal functionalities of <b>uscan</b> to set up
  a watch file for this site without using the redirector.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;pgpmode=none&quot; \
      https://pypi.python.org/pypi/cfn-sphere/ \
      https://pypi.python.org/packages/source/c/cfn-sphere/\
      cfn-sphere-([\d\.]+).tar.gz#.* debian uupdate
</pre>
<h2 class="Ss" title="Ss" id="code.google.com"><a class="selflink" href="#code.google.com">code.google.com</a></h2>
Sites which used to be hosted on the Google Code service should have migrated to
  elsewhere (github?). Please look for the newer upstream site.
<h2 class="Ss" title="Ss" id="direct_access_to_the_git_repository"><a class="selflink" href="#direct_access_to_the_git_repository">direct
  access to the git repository</a></h2>
If the upstream only publishes its code via the git repository and it has no web
  interface to obtain the release tarball, you can use uscan with the tags of
  the git repository.
<div class="Pp"></div>
<pre>
  version=4
  opts=&quot;mode=git, pgpmode=none&quot; \
  http://git.ao2.it/tweeper.git \
  refs/tags/v([\d\.]+) debian uupdate
</pre>
<div class="Pp"></div>
Please note &quot; <b>git ls-remote</b>&quot; is used to obtain references for
  tags. If a tag <b>v20.5</b> is the newest tag, the above example downloads
  <i>spkg</i> <b>-20.5.tar.xz</b>.
<h1 class="Sh" title="Sh" id="COPYRIGHT_FILE_EXAMPLES"><a class="selflink" href="#COPYRIGHT_FILE_EXAMPLES">COPYRIGHT
  FILE EXAMPLES</a></h1>
Here is an example for the <i>debian/copyright</i> file which initiates
  automatic repackaging of the upstream tarball into
  <i>&lt;spkg&gt;_&lt;oversion&gt;.orig.tar.gz</i> (In <i>debian/copyright</i>,
  the <b>Files-Excluded</b> and <b>Files-Excluded-</b><i>component</i> stanzas
  are a part of the first paragraph and there is a blank line before the
  following paragraphs which contain <b>Files</b> and other stanzas.):
<div class="Pp"></div>
<pre>
  Format: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
  Files-Excluded: exclude-this
   exclude-dir
   */exclude-dir
   .*
   */js/jquery.js
   Files: *
   Copyright: ...
   ...
</pre>
<div class="Pp"></div>
Here is another example for the <i>debian/copyright</i> file which initiates
  automatic repackaging of the multiple upstream tarballs into
  <i>&lt;spkg&gt;_&lt;oversion&gt;.orig.tar.gz</i> and
  <i>&lt;spkg&gt;_&lt;oversion&gt;.orig-bar.tar.gz</i>:
<div class="Pp"></div>
<pre>
  Format: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
  Files-Excluded: exclude-this
   exclude-dir
   */exclude-dir
   .*
   */js/jquery.js
  Files-Excluded-bar: exclude-this
   exclude-dir
   */exclude-dir
   .*
   */js/jquery.js
   Files: *
   Copyright: ...
   ...
</pre>
<div class="Pp"></div>
See <i>mk-origtargz</i>(1).
<h1 class="Sh" title="Sh" id="KEYRING_FILE_EXAMPLES"><a class="selflink" href="#KEYRING_FILE_EXAMPLES">KEYRING
  FILE EXAMPLES</a></h1>
Let's assume that the upstream &quot; <b>uscan test key (no secret)</b>
  <b>&lt;none@debian.org&gt;</b>&quot; signs its package and publishes its
  public key fingerprint ' <b>CF21 8F0E 7EAB F584 B7E2 0402 C77E 2D68 7254
  3FAF</b>' which you know is the trusted one.
<div class="Pp"></div>
Please note that the short keyid <b>72543FAF</b> is the last 4 Bytes, the long
  keyid <b>C77E2D6872543FAF</b> is the last 8 Bytes, and the finger print is the
  last 20 Bytes of the public key in hexadecimal form. You can save typing by
  using the short keyid but you must verify the OpenPGP key using its
  fingerprint.
<div class="Pp"></div>
The armored keyring file <i>debian/upstream/signing-key.asc</i> can be created
  by using the <b>gpg</b> (or <b>gpg2</b>) command as follows.
<div class="Pp"></div>
<pre>
  $ gpg --recv-keys &quot;72543FAF&quot;
  ...
  $ gpg --finger &quot;72543FAF&quot;
  pub   4096R/72543FAF 2015-09-02
        Key fingerprint = CF21 8F0E 7EAB F584 B7E2  0402 C77E 2D68 7254 3FAF
  uid                  uscan test key (no secret) &lt;none@debian.org&gt;
  sub   4096R/52C6ED39 2015-09-02
  $ cd path/to/&lt;upkg&gt;-&lt;uversion&gt;
  $ mkdir -p debian/upstream
  $ gpg --export --export-options export-minimal --armor \
        'CF21 8F0E 7EAB F584 B7E2  0402 C77E 2D68 7254 3FAF' \
        &gt;debian/upstream/signing-key.asc
</pre>
<div class="Pp"></div>
The binary keyring file can be created instead by skipping <b>--armor</b> and
  changing the storing file to <i>debian/upstream/signing-key.pgp</i> in the
  above example. If a group of developers sign the package, you need to list
  fingerprints of all of them in the argument for <b>gpg --export ...</b> to
  make the keyring to contain all OpenPGP keys of them.
<div class="Pp"></div>
Sometimes you may wonder who made a signature file. You can get the public keyid
  used to create the detached signature file <i>foo-2.0.tar.gz.asc</i> by
  running <b>gpg</b> as:
<div class="Pp"></div>
<pre>
  $ gpg -vv foo-2.0.tar.gz.asc
  gpg: armor: BEGIN PGP SIGNATURE
  gpg: armor header: Version: GnuPG v1
  :signature packet: algo 1, keyid C77E2D6872543FAF
        version 4, created 1445177469, md5len 0, sigclass 0x00
        digest algo 2, begin of digest 7a c7
        hashed subpkt 2 len 4 (sig created 2015-10-18)
        subpkt 16 len 8 (issuer key ID C77E2D6872543FAF)
        data: [4091 bits]
  gpg: assuming signed data in `foo-2.0.tar.gz'
  gpg: Signature made Sun 18 Oct 2015 11:11:09 PM JST using RSA key ID 72543FAF
  ...
</pre>
<h1 class="Sh" title="Sh" id="COMMANDLINE_OPTIONS"><a class="selflink" href="#COMMANDLINE_OPTIONS">COMMANDLINE
  OPTIONS</a></h1>
For the basic usage, <b>uscan</b> does not require to set these options.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-conf</b>, <b>--noconf</b></dt>
  <dd class="It-tag">Don't read any configuration files. This can only be used
      as the first option given on the command-line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-verbose</b></dt>
  <dd class="It-tag">Don't report verbose information. (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b>, <b>-v</b></dt>
  <dd class="It-tag">Report verbose information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug</b>, <b>-vv</b></dt>
  <dd class="It-tag">Report verbose information including the downloaded web
      pages as processed to STDERR for debugging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--dehs</b></dt>
  <dd class="It-tag">Send DEHS style output (XML-type) to STDOUT, while send all
      other uscan output to STDERR.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-dehs</b></dt>
  <dd class="It-tag">Use only traditional uscan output format. (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--download</b>, <b>-d</b></dt>
  <dd class="It-tag">Download the new upstream release. (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--force-download</b>, <b>-dd</b></dt>
  <dd class="It-tag">Download the new upstream release even if up-to-date. (may
      not overwrite the local file)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite-download</b>, <b>-ddd</b></dt>
  <dd class="It-tag">Download the new upstream release even if up-to-date. (may
      overwrite the local file)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-download</b>, <b>--nodownload</b></dt>
  <dd class="It-tag">Don't download and report information.
    <div style="height: 1.00em;">&#x00A0;</div>
    Previously downloaded tarballs may be used.
    <div style="height: 1.00em;">&#x00A0;</div>
    Change default to <b>--skip-signature</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--signature</b></dt>
  <dd class="It-tag">Download signature. (default)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-signature</b></dt>
  <dd class="It-tag">Don't download signature but verify if already
    downloaded.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--skip-signature</b></dt>
  <dd class="It-tag">Don't bother download signature nor verifying
    signature.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--safe</b>, <b>--report</b></dt>
  <dd class="It-tag">Avoid running unsafe scripts by skipping both the repacking
      of the downloaded package and the updating of the new source tree.
    <div style="height: 1.00em;">&#x00A0;</div>
    Change default to <b>--no-download</b> and <b>--skip-signature</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    When the objective of running <b>uscan</b> is to gather the upstream package
      status under the security conscious environment, please make sure to use
      this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--report-status</b></dt>
  <dd class="It-tag">This is equivalent of setting &quot;<b>--verbose
      --safe</b>&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--download-version</b> <i>version</i></dt>
  <dd class="It-tag">Specify the <i>version</i> which the upstream release must
      match in order to be considered, rather than using the release with the
      highest version. (a best effort feature)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--download-debversion</b> <i>version</i></dt>
  <dd class="It-tag">Specify the Debian package version to download the
      corresponding upstream release version. The <b>dversionmangle</b> and
      <b>uversionmangle</b> rules are considered. (a best effort feature)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--download-current-version</b></dt>
  <dd class="It-tag">Download the currently packaged version. (a best effort
      feature)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-dirname-level</b> <i>N</i></dt>
  <dd class="It-tag">See the below section &quot;Directory name checking&quot;
      for an explanation of this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-dirname-regex</b> <i>regex</i></dt>
  <dd class="It-tag">See the below section &quot;Directory name checking&quot;
      for an explanation of this option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--destdir</b></dt>
  <dd class="It-tag">Set the path of directory to which to download instead of
      its default <i>../</i>. If the specified path is not absolute, it will be
      relative to one of the current directory or, if directory scanning is
      enabled, the package's source directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--package</b> <i>package</i></dt>
  <dd class="It-tag">Specify the name of the package to check for rather than
      examining <i>debian/changelog</i>; this requires the
      <b>--upstream-version</b> (unless a version is specified in the
      <i>watch</i> file) and <b>--watchfile</b> options as well. Furthermore, no
      directory scanning will be done and nothing will be downloaded. This
      option automatically sets <b>--no-download</b> and
      <b>--skip-signature</b>; and probably most useful in conjunction with the
      DEHS system (and <b>--dehs</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--upstream-version</b> <i>upstream-version</i></dt>
  <dd class="It-tag">Specify the current upstream version rather than examine
      <i>debian/watch</i> or <i>debian/changelog</i> to determine it. This is
      ignored if a directory scan is being performed and more than one
      <i>debian/watch</i> file is found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--watchfile</b> <i>watchfile</i></dt>
  <dd class="It-tag">Specify the <i>watchfile</i> rather than perform a
      directory scan to determine it. If this option is used without
      <b>--package</b>, then <b>uscan</b> must be called from within the Debian
      package source tree (so that <i>debian/changelog</i> can be found simply
      by stepping up through the tree).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bare</b></dt>
  <dd class="It-tag">Disable all site specific special case codes to perform URL
      redirections and page content alterations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-exclusion</b></dt>
  <dd class="It-tag">Don't automatically exclude files mentioned in
      <i>debian/copyright</i> field <b>Files-Excluded</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pasv</b></dt>
  <dd class="It-tag">Force PASV mode for FTP connections.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-pasv</b></dt>
  <dd class="It-tag">Don't use PASV mode for FTP connections.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-symlink</b></dt>
  <dd class="It-tag">Don't rename nor repack upstream tarball.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--timeout</b> <i>N</i></dt>
  <dd class="It-tag">Set timeout to <i>N</i> seconds (default 20 seconds).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--user-agent</b>, <b>--useragent</b></dt>
  <dd class="It-tag">Override the default user agent header.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Give brief usage information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Display version information.</dd>
</dl>
<div class="Pp"></div>
<b>uscan</b> also accepts following options and passes them to
  <b>mk-origtargz</b>:
<dl class="Bl-tag">
  <dt class="It-tag"><b>--symlink</b></dt>
  <dd class="It-tag">Make <b>orig.tar.gz</b> (with the appropriate extension)
      symlink to the downloaded files. (This is the default behavior.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--copy</b></dt>
  <dd class="It-tag">Instead of symlinking as described above, copy the
      downloaded files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--rename</b></dt>
  <dd class="It-tag">Instead of symlinking as described above, rename the
      downloaded files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--repack</b></dt>
  <dd class="It-tag">After having downloaded an lzma tar, xz tar, bzip tar, gz
      tar, zip, jar, xpi archive, repack it to the specified compression (see
      <b>--compression</b>).
    <div style="height: 1.00em;">&#x00A0;</div>
    The unzip package must be installed in order to repack zip and jar archives,
      the mozilla-devscripts package must be installed to repack xpi archives,
      and the xz-utils package must be installed to repack lzma or xz tar
      archives.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--compression</b> [ <b>gzip</b> | <b>bzip2</b> |
    <b>lzma</b> | <b>xz</b> ]</dt>
  <dd class="It-tag">In the case where the upstream sources are repacked (either
      because <b>--repack</b> option is given or <i>debian/copyright</i>
      contains the field <b>Files-Excluded</b>), it is possible to control the
      compression method via the parameter. The default is <b>gzip</b> for
      normal tarballs, and <b>xz</b> for tarballs generated directly from the
      git repository.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--copyright-file</b> <i>copyright-file</i></dt>
  <dd class="It-tag">Exclude files mentioned in <b>Files-Excluded</b> in the
      given <i>copyright-file</i>. This is useful when running <b>uscan</b> not
      within a source package directory.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DEVSCRIPT_CONFIGURATION_VARIABLES"><a class="selflink" href="#DEVSCRIPT_CONFIGURATION_VARIABLES">DEVSCRIPT
  CONFIGURATION VARIABLES</a></h1>
For the basic usage, <b>uscan</b> does not require to set these configuration
  variables.
<div class="Pp"></div>
The two configuration files <i>/etc/devscripts.conf</i> and <i>~/.devscripts</i>
  are sourced by a shell in that order to set configuration variables. These may
  be overridden by command line options. Environment variable settings are
  ignored for this purpose. If the first command line option given is
  <b>--noconf</b>, then these files will not be read. The currently recognized
  variables are:
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_DOWNLOAD</b></dt>
  <dd class="It-tag">If this is set to <b>no</b>, then newer upstream files will
      not be downloaded; this is equivalent to the <b>--no-download</b>
    options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_SAFE</b></dt>
  <dd class="It-tag">If this is set to <b>yes</b>, then <b>uscan</b> avoids
      running unsafe scripts by skipping both the repacking of the downloaded
      package and the updating of the new source tree; this is equivalent to the
      <b>--safe</b> options; this also sets the default to <b>--no-download</b>
      and <b>--skip-signature</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_PASV</b></dt>
  <dd class="It-tag">If this is set to yes or no, this will force FTP
      connections to use PASV mode or not to, respectively. If this is set to
      default, then <b></b><b><i>Net::FTP</i></b><b>(3)</b> makes the choice
      (primarily based on the <b>FTP_PASSIVE</b> environment variable).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_TIMEOUT</b></dt>
  <dd class="It-tag">If set to a number <i>N</i>, then set the timeout to
      <i>N</i> seconds. This is equivalent to the <b>--timeout</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_SYMLINK</b></dt>
  <dd class="It-tag">If this is set to no, then a
      <i>pkg</i>_<i>version</i><b>.orig.tar.{gz|bz2|lzma|xz}</b> symlink will
      not be made (equivalent to the <b>--no-symlink</b> option). If it is set
      to <b>yes</b> or <b>symlink</b>, then the symlinks will be made. If it is
      set to rename, then the files are renamed (equivalent to the
      <b>--rename</b> option).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_DEHS_OUTPUT</b></dt>
  <dd class="It-tag">If this is set to <b>yes</b>, then DEHS-style output will
      be used. This is equivalent to the <b>--dehs</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_VERBOSE</b></dt>
  <dd class="It-tag">If this is set to <b>yes</b>, then verbose output will be
      given. This is equivalent to the <b>--verbose</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_USER_AGENT</b></dt>
  <dd class="It-tag">If set, the specified user agent string will be used in
      place of the default. This is equivalent to the <b>--user-agent</b>
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_DESTDIR</b></dt>
  <dd class="It-tag">If set, the downloaded files will be placed in this
      directory. This is equivalent to the <b>--destdir</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_REPACK</b></dt>
  <dd class="It-tag">If this is set to yes, then after having downloaded a bzip
      tar, lzma tar, xz tar, or zip archive, uscan will repack it to the
      specified compression (see <b>--compression</b>). This is equivalent to
      the <b>--repack</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USCAN_EXCLUSION</b></dt>
  <dd class="It-tag">If this is set to no, files mentioned in the field
      <b>Files-Excluded</b> of <i>debian/copyright</i> will be ignored and no
      exclusion of files will be tried. This is equivalent to the
      <b>--no-exclusion</b> option.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The exit status gives some indication of whether a newer version was found or
  not; one is advised to read the output to determine exactly what happened and
  whether there were any warnings to be noted.
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">Either <b>--help</b> or <b>--version</b> was used, or for
      some <i>watch</i> file which was examined, a newer upstream version was
      located.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">No newer upstream versions were located for any of the
      <i>watch</i> files examined.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ADVANCED_FEATURES"><a class="selflink" href="#ADVANCED_FEATURES">ADVANCED
  FEATURES</a></h1>
<b>uscan</b> has many other enhanced features which are skipped in the above
  section for the simplicity. Let's check their highlights.
<div class="Pp"></div>
<b>uscan</b> actually scans not just the current directory but all its
  subdirectories looking for <i>debian/watch</i> to process them all. See
  &quot;Directory name checking&quot;.
<div class="Pp"></div>
<b>uscan</b> can be executed with <i>path</i> as its argument to change the
  starting directory of search from the current directory to <i>path</i> .
<div class="Pp"></div>
See &quot;COMMANDLINE OPTIONS&quot; and &quot;DEVSCRIPT CONFIGURATION
  VARIABLES&quot; for other variations.
<h2 class="Ss" title="Ss" id="Custom_script"><a class="selflink" href="#Custom_script">Custom
  script</a></h2>
The optional <i>script</i> parameter in <i>debian/watch</i> means to execute
  <i>script</i> with options after processing this line if specified.
<div class="Pp"></div>
For compatibility with other tools such as <b>git-buildpackage</b>, it may not
  be wise to create custom scripts with random behavior. In general,
  <b>uupdate</b> is the best choice for the non-native package and custom
  scripts, if created, should behave as if <b>uupdate</b>. For possible use
  case, see &lt;http://bugs.debian.org/748474&gt; as an example.
<h2 class="Ss" title="Ss" id="URL_diversion"><a class="selflink" href="#URL_diversion">URL
  diversion</a></h2>
Some popular web sites changed their web page structure causing maintenance
  problems to the watch file. There are some redirection services created to
  ease maintenance of the watch file. Currently, <b>uscan</b> makes automatic
  diversion of URL requests to the following URLs to cope with this situation.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&lt;http://sf.net&gt;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">&lt;http://pypi.python.org&gt;</dd>
</dl>
<h2 class="Ss" title="Ss" id="Directory_name_checking"><a class="selflink" href="#Directory_name_checking">Directory
  name checking</a></h2>
Similarly to several other scripts in the <b>devscripts</b> package,
  <b>uscan</b> explores the requested directory trees looking for
  <i>debian/changelog</i> and <i>debian/watch</i> files. As a safeguard against
  stray files causing potential problems, and in order to promote efficiency, it
  will examine the name of the parent directory once it finds the
  <i>debian/changelog</i> file, and check that the directory name corresponds to
  the package name. It will only attempt to download newer versions of the
  package and then perform any requested action if the directory name matches
  the package name. Precisely how it does this is controlled by two
  configuration file variables <b>DEVSCRIPTS_CHECK_DIRNAME_LEVEL</b> and
  <b>DEVSCRIPTS_CHECK_DIRNAME_REGEX</b>, and their corresponding command-line
  options <b>--check-dirname-level</b> and <b>--check-dirname-regex</b>.
<div class="Pp"></div>
<b>DEVSCRIPTS_CHECK_DIRNAME_LEVEL</b> can take the following values:
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">Never check the directory name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">Only check the directory name if we have had to change
      directory in our search for <i>debian/changelog</i>, that is, the
      directory containing <i>debian/changelog</i> is not the directory from
      which <b>uscan</b> was invoked. This is the default behavior.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">Always check the directory name.</dd>
</dl>
<div class="Pp"></div>
The directory name is checked by testing whether the current directory name (as
  determined by <i>pwd</i>(1)) matches the regex given by the configuration file
  option <b>DEVSCRIPTS_CHECK_DIRNAME_REGEX</b> or by the command line option
  <b>--check-dirname-regex</b> <i>regex</i>. Here regex is a Perl regex (see
  <i>perlre</i>(3perl)), which will be anchored at the beginning and the end. If
  regex contains a <b>/</b>, then it must match the full directory path. If not,
  then it must match the full directory name. If regex contains the string
  <i>package</i>, this will be replaced by the source package name, as
  determined from the <i>debian/changelog</i>. The default value for the regex
  is: <i>package</i><b>(-.+)?</b>, thus matching directory names such as
  <i>package</i> and <i>package</i>-<i>version</i>.
<h1 class="Sh" title="Sh" id="HISTORY_AND_UPGRADING"><a class="selflink" href="#HISTORY_AND_UPGRADING">HISTORY
  AND UPGRADING</a></h1>
This section briefly describes the backwards-incompatible <i>watch</i> file
  features which have been added in each <i>watch</i> file version, and the
  first version of the <b>devscripts</b> package which understood them.
<dl class="Bl-tag">
  <dt class="It-tag">Pre-version 2</dt>
  <dd class="It-tag">The <i>watch</i> file syntax was significantly different in
      those days. Don't use it. If you are upgrading from a pre-version 2
      <i>watch</i> file, you are advised to read this manpage and to start from
      scratch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Version 2</dt>
  <dd class="It-tag"><b>devscripts</b> version 2.6.90: The first incarnation of
      the current style of <i>watch</i> files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Version 3</dt>
  <dd class="It-tag"><b>devscripts</b> version 2.8.12: Introduced the following:
      correct handling of regex special characters in the path part,
      directory/path pattern matching, version number in several parts, version
      number mangling. Later versions have also introduced URL mangling.
    <div style="height: 1.00em;">&#x00A0;</div>
    If you are upgrading from version 2, the key incompatibility is if you have
      multiple groups in the pattern part; whereas only the first one would be
      used in version 2, they will all be used in version 3. To avoid this
      behavior, change the non-version-number groups to be <b>(?:</b> <i>
      ...</i> <b>)</b> instead of a plain <b>(</b> <i> ... </i> <b>)</b>
    group.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes the custom <i>script</i> as
      &quot;<i>script</i> <b>--upstream-version</b> <i>version</i>
      <b>../</b><i>spkg</i>
    <b>_</b><i>version</i><b>.orig.tar.gz</b>&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes the standard <b>uupdate</b> as
      &quot;<b>uupdate</b> <b>--no-symlink</b> <b>--upstream-version</b>
      <i>version</i>
      <b>../</b><i>spkg</i><b>_</b><i>version</i><b>.orig.tar.gz</b>&quot;.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag">Version 4</dt>
  <dd class="It-tag"><b>devscripts</b> version 2.15.10: The first incarnation of
      <i>watch</i> files supporting multiple upstream tarballs.
    <div style="height: 1.00em;">&#x00A0;</div>
    The syntax of the watch file is relaxed to allow more spaces for
      readability.
    <div style="height: 1.00em;">&#x00A0;</div>
    If you have a custom script in place of <b>uupdate</b>, you may also
      encounter problems updating from Version 3.</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes the custom <i>script</i> as
      &quot;<i>script</i> <b>--upstream-version</b> <i>version</i>&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>uscan</b> invokes the standard <b>uupdate</b> as
      &quot;<b>uupdate</b> <b>--find</b> <b>--upstream-version</b>
      <i>version</i>&quot;.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
Restriction for <b>--dehs</b> is lifted by redirecting other output to STDERR
  when it is activated.</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>dpkg</i>(1), <i>mk-origtargz</i>(1), <i>perlre</i>(1), <i>uupdate</i>(1),
  <i>devscripts.conf</i>(5)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original version of uscan was written by Christoph Lameter
  &lt;clameter@debian.org&gt;. Significant improvements, changes and bugfixes
  were made by Julian Gilbey &lt;jdg@debian.org&gt;. HTTP support was added by
  Piotr Roszatycki &lt;dexter@debian.org&gt;. The program was rewritten in Perl
  by Julian Gilbey.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-04-04</td>
    <td class="foot-os">Debian Utilities</td>
  </tr>
</table>
</body>
</html>
