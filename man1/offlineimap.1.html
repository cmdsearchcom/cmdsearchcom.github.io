<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:28:24 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>OFFLINEIMAP(1) OFFLINEIMAP(1)</p>

<p style="margin-top: 1em">NAME <br>
offlineimap - Synchronize mailboxes and Maildirs</p>

<p style="margin-top: 1em">SYNOPSIS <br>
offlineimap (options)</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Synchronize the accounts configured in the configuration
file via IMAP. Each account has two sides.</p>

<p style="margin-top: 1em">One of the side must be an IMAP
server. The other side can either be a Maildir or another
IMAP server.</p>

<p style="margin-top: 1em">OPTIONS <br>
-h, --help <br>
Display summary of options.</p>

<p style="margin-top: 1em">--version <br>
Output version.</p>

<p style="margin-top: 1em">--dry-run <br>
Run in dry run mode.</p>

<p style="margin-top: 1em">Do not actually modify any store
but check and print what synchronization actions would be
taken if a sync would be performed. It will not precisely
give the exact <br>
information what will happen. If e.g. we need to create a
folder, it merely outputs Would create folder X, but not how
many and which mails it would transfer.</p>

<p style="margin-top: 1em">--info <br>
Output information on the configured email repositories.</p>

<p style="margin-top: 1em">Useful for debugging and bug
reporting. Use in conjunction with the -a option to limit
the output to a single account. This mode will prevent any
actual sync to occur and <br>
exits after it outp ut the debug information.</p>

<p style="margin-top: 1em">-1 <br>
Limit multithreading operations and run solely a
single-thread sync.</p>

<p style="margin-top: 1em">This effectively sets the
maxsyncaccounts and all maxconnections configuration file
variables to 1. This is 1, the number.</p>

<p style="margin-top: 1em">-P &lt;directory&gt; <br>
Set OfflineIMAP into profile mode.</p>

<p style="margin-top: 1em">The program will create DIR (it
must not already exist). As it runs, Python profiling
information about each thread is logged into profiledir.
Please note: This option is <br>
present for debugging and optimization only, and should NOT
be used unless you have a specific reason to do so. It will
significantly decrease program performance, may reduce <br>
reliability, and can generate huge amounts of data. This
option implies the -1 option.</p>

<p style="margin-top: 1em">-a
&lt;account1[,account2[,...]]&gt; <br>
Overrides the accounts section in the config file.</p>

<p style="margin-top: 1em">Allows one to specify a
particular account or set of accounts to sync without having
to edit the config file.</p>

<p style="margin-top: 1em">-c
&lt;path/to/configuration_file&gt; <br>
Specifies a configuration file to use.</p>

<p style="margin-top: 1em">-d &lt;type1[,type2[,...]]&gt;
<br>
Enables debugging for OfflineIMAP.</p>

<p style="margin-top: 1em">This is useful if you are to
track down a malfunction or figure out what is going on
under the hood. This option requires one or more debugtypes,
separated by commas. These <br>
define what exactly will be debugged, and so far include two
options: imap, thread, maildir or ALL. The imap option will
enable IMAP protocol stream and parsing debugging. <br>
Note that the output may contain passwords, so take care to
remove that from the debugging output before sending it to
anyone else. The maildir option will enable debugging <br>
for certain Maildir operations. The use of any debug option
(unless thread is included), implies the single-thread
option -1.</p>

<p style="margin-top: 1em">-l &lt;path/to/file.log&gt; <br>
Send logs to &lt;file.log&gt;.</p>

<p style="margin-top: 1em">-s <br>
Send logs to syslog.</p>

<p style="margin-top: 1em">-f
&lt;folder1[,folder1[,...]]&gt; <br>
Only sync the specified folders.</p>

<p style="margin-top: 1em">The folder names are the
untranslated foldernames of the remote repository. This
command-line option overrides any folderfilter and
folderincludes options in the <br>
configuration file.</p>

<p style="margin-top: 1em">-k &lt;[section:]option=value
<br>
Override any configuration file option.</p>

<p style="margin-top: 1em">If &quot;section&quot; is
omitted, it defaults to &quot;general&quot;. Any underscores
in the section name are replaced with spaces: for instance,
to override option &quot;autorefresh&quot; in the <br>
&quot;[Account Personal]&quot; section in the config file
one would use &quot;-k
Account_Personal:autorefresh=30&quot;. Repeat this option as
much as necessary to redefine multiple options.</p>

<p style="margin-top: 1em">-o <br>
Run only once.</p>

<p style="margin-top: 1em">Ignore any autorefresh setting
in the configuration file.</p>

<p style="margin-top: 1em">-q <br>
Run only quick synchronizations.</p>

<p style="margin-top: 1em">Ignore any flag updates on IMAP
servers. If a flag on the remote IMAP changes, and we have
the message locally, it will be left untouched in a quick
run. This option is <br>
ignored if maxage is set.</p>

<p style="margin-top: 1em">-u &lt;UI&gt; <br>
Specifies an alternative user interface to use.</p>

<p style="margin-top: 1em">This overrides the default
specified in the configuration file. The UI specified with
-u will be forced to be used, even if checks determine that
it is not usable. Possible <br>
interface choices are: quiet, basic, syslog, ttyui,
blinkenlights, machineui.</p>

<p style="margin-top: 1em">--column[=&lt;options&gt;],
--no-column <br>
Display branch listing in columns. See configuration
variable column.branch for option syntax.--column and
--no-column without options are equivalent to always and
never <br>
respectively.</p>

<p style="margin-top: 1em">This option is only applicable
in non-verbose mode.</p>

<p style="margin-top: 1em">--migrate-fmd5-using-nametrans
<br>
Migrate FMD5 hashes from versions prior to 6.3.5.</p>

<p style="margin-top: 1em">The way that FMD5 hashes are
calculated was changed in version 6.3.5 (now using the
nametrans folder name) introducing a regression which may
lead to re-uploading all <br>
messages. Try and fix the above regression by calculating
the correct FMD5 values and renaming the corresponding
messages.</p>

<p style="margin-top: 1em">Caution <br>
Since the FMD5 part of the filename changes, this may lead
to UID conflicts. Ensure to dispose a proper backup of both
the cache and the Maildir before running this fix as <br>
well as verify the results using the &acirc;--dry-run&acirc;
flag first.</p>

<p style="margin-top: 1em">SYNCHRONIZATION PERFORMANCE <br>
By default, we use fairly conservative settings that are
safe for syncing but that might not be the best performing
one. Once you got everything set up and running, you might
<br>
want to look into speeding up your synchronization. Here are
a couple of hints and tips on how to achieve this.</p>

<p style="margin-top: 1em">1. Use maxconnections &gt;
1.</p>

<p style="margin-top: 1em">By default we only use one
connection to an IMAP server. Using 2 or even 3 speeds
things up considerably in most cases. This setting goes into
the [Repository XXX] section.</p>

<p style="margin-top: 1em">2. Use folderfilters.</p>

<p style="margin-top: 1em">The quickest sync is a sync that
can ignore some folders. I sort my inbox into monthly
folders, and ignore every folder that is more than 2-3
months old, this lets me only <br>
inspect a fraction of my Mails on every sync. If you
haven&acirc;t done this yet, do it :). See the folderfilter
section the example offlineimap.conf.</p>

<p style="margin-top: 1em">3. The cache.</p>

<p style="margin-top: 1em">The default status cache is a
plain text file that will write out the complete file for
each single new message (or even changed flag) to a
temporary file. If you have plenty <br>
of files in a folder, this is a few hundred kilo to
megabytes for each mail and is bound to make things slower.
I recommend to use the sqlite backend for that. See the <br>
status_backend = sqlite setting in the example
offlineimap.conf. You will need to have python-sqlite
installed in order to use this. This will save you plenty of
disk <br>
activity. Do note that the sqlite backend is still
considered experimental as it has only been included
recently (although a loss of your status cache should not be
a tragedy <br>
as that file can be rebuilt automatically)</p>

<p style="margin-top: 1em">4. Use quick sync.</p>

<p style="margin-top: 1em">A regular sync will request all
flags and all UIDs of all mails in each folder which takes
quite some time. A quick sync only compares the number of
messages in a folder on <br>
the IMAP side (it will detect flag changes on the Maildir
side of things though). A quick sync on my smallish account
will take 7 seconds rather than 40 seconds. Eg, I run a <br>
cron script that does a regular sync once a day, and does
quick syncs (-q) only synchronizing the &quot;-f INBOX&quot;
in between.</p>

<p style="margin-top: 1em">5. Turn off fsync.</p>

<p style="margin-top: 1em">In the [general] section you can
set fsync to True or False. If you want to play 110% safe
and wait for all operations to hit the disk before
continuing, you can set this to <br>
True. If you set it to False, you lose some of that safety,
trading it for speed.</p>

<p style="margin-top: 1em">UPGRADING FROM PLAIN TEXT TO
SQLITE CACHE FORMAT <br>
OfflineImap uses a cache to store the last known status of
mails (flags etc).</p>

<p style="margin-top: 1em">Historically that has meant
plain text files, but recently we introduced sqlite-based
cache, which helps with performance and CPU usage on large
folders. Here is how to upgrade <br>
existing plain text cache installations to sqlite based
one:</p>

<p style="margin-top: 1em">1. Sync to make sure things are
reasonably similar.</p>

<p style="margin-top: 1em">2. Change the account section to
&quot;status_backend = sqlite&quot;.</p>

<p style="margin-top: 1em">3. Run a new sync.</p>

<p style="margin-top: 1em">This will convert your plain
text cache to an sqlite cache (but leave the old plain text
cache around for easy reverting). This must be quick and not
involve any mail <br>
up/downloading.</p>

<p style="margin-top: 1em">4. See if it works! :-)</p>

<p style="margin-top: 1em">5. If it does not work, go back
to the old version or set &quot;status_backend =
plain&quot;</p>

<p style="margin-top: 1em">6. Delete the old text cache
files.</p>

<p style="margin-top: 1em">Once you are sure it works, you
can delete the ~/.offlineimap/Account-foo/LocalStatus folder
(the new cache will be in the LocalStatus-sqlite folder)</p>

<p style="margin-top: 1em">SECURITY AND SSL <br>
By default, OfflineIMAP will connect using any method that
openssl supports, that is SSLv2, SSLv3, or TLSv1.</p>

<p style="margin-top: 1em">Do note that SSLv2 is
notoriously insecure and deprecated. Unfortunately, python2
does not offer easy ways to disable SSLv2. It is recommended
you test your setup and make sure <br>
that the mail server does not use an SSLv2 connection. Use
e.g. &quot;openssl s_client -host mail.server -port
443&quot; to find out the connection that is used by
default.</p>

<p style="margin-top: 1em">&Acirc;&middot; Certificate
checking</p>

<p style="margin-top: 1em">Unfortunately, by default we
will not verify the certificate of an IMAP TLS/SSL server we
connect to, so connecting by SSL is no guarantee against
man-in-the-middle attacks. <br>
While verifying a server certificate checking the
fingerprint is recommended. There is currently only one safe
way to ensure that you connect to the correct server in an
<br>
encrypted manner: you can specify a sslcacertfile setting in
your repository section of offlineimap.conf pointing to a
file that contains (among others) a CA Certificate in <br>
PEM format which validating your server certificate. In this
case, we will check that:</p>

<p style="margin-top: 1em">1. The server SSL certificate is
validated by the CA Certificate.</p>

<p style="margin-top: 1em">2. The server host name matches
the SSL certificate.</p>

<p style="margin-top: 1em">3. The server certificate is not
past its expiration date.</p>

<p style="margin-top: 1em">The FAQ has an entry on how to
create your own certificate and CA certificate.</p>

<p style="margin-top: 1em">&Acirc;&middot; StartTLS</p>

<p style="margin-top: 1em">If you have not configured your
account to connect via SSL anyway, OfflineImap will still
attempt to set up an SSL connection via the STARTTLS
function, in case the imap <br>
server supports it.</p>

<p style="margin-top: 1em">There is no certificate or
fingerprint checking involved at all, when using STARTTLS
(the underlying imaplib library does not support this yet).
This means that you will be <br>
protected against passively listening eavesdroppers and they
will not be able to see your password or email contents.
However, this will not protect you from active attacks, <br>
such as Man-In-The-Middle attacks which cause you to connect
to the wrong server and pretend to be your mail server.</p>

<p style="margin-top: 1em">DO NOT RELY ON STARTTLS AS A
SAFE CONNECTION GUARANTEEING THE AUTHENTICITY OF YOUR IMAP
SERVER!</p>

<p style="margin-top: 1em">UNIX SIGNALS <br>
OfflineImap listens to the unix signals SIGUSR1, SIGUSR2,
SIGTERM, SIGINT, SIGHUP, SIGQUIT.</p>

<p style="margin-top: 1em">&Acirc;&middot; If sent a
SIGUSR1 it will abort any current (or next future) sleep of
all accounts that are configured to &quot;autorefresh&quot;.
In effect, this will trigger a full sync of all <br>
accounts to be performed as soon as possible.</p>

<p style="margin-top: 1em">&Acirc;&middot; If sent a
SIGUSR2, it will stop &quot;autorefresh mode&quot; for all
accounts. That is, accounts will abort any current sleep and
will exit after a currently running synchronization <br>
has finished. This signal can be used to gracefully exit out
of a running offlineimap &quot;daemon&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; SIGTERM, SIGINT,
SIGHUP are all treated to gracefully terminate as soon as
possible. This means it will finish syncing the current
folder in each account, close keep alive <br>
connections, remove locks on the accounts and exit.</p>

<p style="margin-top: 1em">It may take up to 10 seconds, if
autorefresh option is used.</p>

<p style="margin-top: 1em">&Acirc;&middot; If sent SIGQUIT,
dumps stack traces for all threads and tries to dump process
core.</p>

<p style="margin-top: 1em">KNOWN ISSUES <br>
&Acirc;&middot; SSL3 write pending.</p>

<p style="margin-top: 1em">Users enabling SSL may hit a bug
about &quot;SSL3 write pending&quot;. If so, the account(s)
will stay unsynchronised from the time the bug appeared.
Running OfflineIMAP again can <br>
help. We are still working on this bug. Patches or detailed
bug reports would be appreciated. Please check you&acirc;re
running the last stable version and send us a report to the
<br>
mailing list including the full log.</p>

<p style="margin-top: 1em">&Acirc;&middot; IDLE support is
incomplete and experimental. Bugs may be encountered.</p>

<p style="margin-top: 1em">&Acirc;&middot; No hook exists
for &quot;run after an IDLE response&quot;.</p>

<p style="margin-top: 1em">Email will show up, but may not
be processed until the next refresh cycle.</p>

<p style="margin-top: 1em">&Acirc;&middot; nametrans may
not be supported correctly.</p>

<p style="margin-top: 1em">&Acirc;&middot; IMAP IDLE
&lt;&acirc; IMAP IDLE doesn&acirc;t work yet.</p>

<p style="margin-top: 1em">&Acirc;&middot; IDLE might stop
syncing on a system suspend/resume.</p>

<p style="margin-top: 1em">&Acirc;&middot; IDLE may only
work &quot;once&quot; per refresh.</p>

<p style="margin-top: 1em">If you encounter this bug,
please send a report to the list!</p>

<p style="margin-top: 1em">&Acirc;&middot; Maildir support
in Windows drive.</p>

<p style="margin-top: 1em">Maildir uses colon caracter (:)
in message file names. Colon is however forbidden character
in windows drives. There are several workarounds for that
situation:</p>

<p style="margin-top: 1em">1. Enable file name character
translation in windows registry (not tested).</p>

<p style="margin-top: 1em">&Acirc;&middot;
http://support.microsoft.com/kb/289627</p>

<p style="margin-top: 1em">2. Use cygwin managed mount (not
tested).</p>

<p style="margin-top: 1em">&Acirc;&middot; not available
anymore since cygwin 1.7</p>

<p style="margin-top: 1em">3. Use
&quot;maildir-windows-compatible = yes&quot; account
OfflineIMAP configuration.</p>

<p style="margin-top: 1em">&Acirc;&middot; That makes
OfflineIMAP to use exclamation mark (!) instead of colon for
storing messages. Such files can be written to windows
partitions. But you will probably loose <br>
compatibility with other programs trying to read the same
Maildir.</p>

<p style="margin-top: 1em">&Acirc;&middot; Exclamation mark
was chosen because of the note in
http://docs.python.org/library/mailbox.html</p>

<p style="margin-top: 1em">&Acirc;&middot; If you have some
messages already stored without this option, you will have
to re-sync them again</p>

<p style="margin-top: 1em">&Acirc;&middot; OfflineIMAP
confused after system suspend.</p>

<p style="margin-top: 1em">When resuming a suspended
session, OfflineIMAP does not cleanly handles the broken
socket(s) if socktimeout option is not set. You should
enable this option with a value like <br>
10.</p>

<p style="margin-top: 1em">&Acirc;&middot; OfflineIMAP
confused when mails change while in a sync.</p>

<p style="margin-top: 1em">When OfflineIMAP is syncing,
some events happening since the invocation on remote or
local side are badly handled. OfflineIMAP won&acirc;t track
for changes during the sync.</p>

<p style="margin-top: 1em">&Acirc;&middot; Sharing a
maildir with multiple IMAP servers.</p>

<p style="margin-top: 1em">Generally a word of caution
mixing IMAP repositories on the same Maildir root. You have
to be careful that you never use the same maildir folder for
2 IMAP servers. In the <br>
best case, the folder MD5 will be different, and you will
get a loop where it will upload your mails to both servers
in turn (infinitely!) as it thinks you have placed new <br>
mails in the local Maildir. In the worst case, the MD5 is
the same (likely) and mail UIDs overlap (likely too!) and it
will fail to sync some mails as it thinks they are <br>
already existent.</p>

<p style="margin-top: 1em">I would create a new local
Maildir Repository for the Personal Gmail and use a
different root to be on the safe side here. You could e.g.
use</p>

<p style="margin-top: 1em">&lsquo;~/mail/Pro&lsquo; as
Maildir root for the ProGmail and <br>
&lsquo;~/mail/Personal&lsquo; as root for the personal
one.</p>

<p style="margin-top: 1em">If you then point your local
mutt, or whatever MUA you use to ~/mail/ as root, it should
still recognize all folders.</p>

<p style="margin-top: 1em">&Acirc;&middot; Edge cases with
maxage causing too many messages to be synced.</p>

<p style="margin-top: 1em">All messages from at most maxage
days ago (+/- a few hours, depending on timezones) are
synced, but there are cases in which older messages can also
be synced. This happens <br>
when a message&acirc;s UID is significantly higher than
those of other messages with similar dates, e.g. when
messages are added to the local folder behind
offlineimap&acirc;s back, <br>
causing them to get assigned a new UID, or when offlineimap
first syncs a pre-existing Maildir. In the latter case, it
could appear as if a noticeable and random subset of <br>
old messages are synced.</p>

<p style="margin-top: 1em">MAIN AUTHORS <br>
John Goerzen, Sebastian Spaetz, Eygene Ryabinkin, Nicolas
Sebrecht.</p>

<p style="margin-top: 1em">SEE ALSO <br>
offlineimapui(7), openssl(1), signal(7), sqlite3(1). <br>
http://www.offlineimap.org</p>

<p style="margin-top: 1em">02/11/2017 OFFLINEIMAP(1)</p>
<hr>
</body>
</html>
