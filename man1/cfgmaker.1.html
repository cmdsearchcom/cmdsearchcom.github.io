<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>CFGMAKER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CFGMAKER(1)</td>
    <td class="head-vol">mrtg</td>
    <td class="head-rtitle">CFGMAKER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
cfgmaker - Creates mrtg.cfg files (for mrtg-2.17.4)
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
cfgmaker [options] [community@]router [[options] [community@]router ...]
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<pre>
 --ifref=nr    interface references by Interface Number (default)
 --ifref=ip                     ... by Ip Address
 --ifref=eth                        ... by Ethernet Number
 --ifref=descr                      ... by Interface Description
 --ifref=name                       ... by Interface Name
 --ifref=type                       ... by Interface Type
                You may also use multiple options separated by commas,
               in which case the first available one is used:
               e.g.  --ifref=ip,name,nr
 --ifdesc=nr       interface description uses Interface Number (default)
 --ifdesc=ip                        ... uses Ip Address
 --ifdesc=eth                       ... uses Ethernet Number
 --ifdesc=descr                     ... uses Interface Description
 --ifdesc=name                      ... uses Interface Name
 --ifdesc=catname                   ... uses CatOS Interface Name
 --ifdesc=ppname                    ... uses Passport Port Name
 --ifdesc=alias                     ... uses Interface Alias
 --ifdesc=type                      ... uses Interface Type
                You may also use multiple options separated by commas,
               in which case the first available one is used:
               e.g.  --ifdesc=catname,ppname,descr,alias,ip,name,nr
 --if-filter=f     Test every interface against filter f to decide wether
                   or not to include that interface into the collection.
                   Currently f is being evaluated as a Perl expression
                   and it's truth value is used to reject or accept the
                   interface.
                   (Experimental, under development, might change)
 --if-template=templatefile
                   Replace the normal target entries for the interfaces
                   with an entry as specified by the contents in the file
                   templatefile.  The file is supposed to contain Perl
                   code to be executed to generate the lines for the
                   target in the configuration file.
                   (Experimental, under development, might change)
 --host-template=templatefile
                   In addition to creating targets for a host's interfaces
                   do also create targets for the host itself as specified
                   by the contents in the file templatefile.  The file is
                   supposed to contain Perl code to be executed to generate
                   the lines for the host related targets (such as CPU,
                   ping response time measurements etc.) in the config-
                   uration file.
                   (Experimental, under development, might change)
 --global &quot;x: a&quot;   add global config entries
 --no-down         do not look at admin or opr status of interfaces
 --show-op-down    show interfaces which are operatively down
 --zero-speed=spd  use this speed in bits-per-second as the interface
                   speed for all interfaces that return a speed of 0
                   via ifSpeed/ifHighSpeed.  100Mbps = 100000000
 --subdirs=format  give each router its own subdirectory, naming each per
                   &quot;format&quot;, in which HOSTNAME and SNMPNAME will be
                   replaced by the values of those items -- for instance,
                   --subdirs=HOSTNAME or --subdirs=&quot;HOSTNAME (SNMPNAME)&quot;
 --noreversedns    do not reverse lookup ip numbers
 --community=cmty  Set the default community string to &quot;cmty&quot; instead of
                   &quot;public&quot;.
 --enable-ipv6     Enable IPv6 support, if the required libraries are
                   present. Numeric IPv6 addresses must be enclosed
                   in square brackets, e.g. public@[2001:760:4::1]:161
 --use-16bit       Use 16bit SNMP request IDs to query all routers.
 --snmp-options=:[&lt;port&gt;][:[&lt;tmout&gt;][:[&lt;retr&gt;][:[&lt;backoff&gt;][:&lt;ver&gt;]]]]
                   Specify default SNMP options to be appended to all
                   routers following.  Individual fields can be empty.
                   Routers following might override some or all of the
           options given to --snmp-options.
 --dns-domain=domain
           Specifies a domain to append to the name of all
           routers following.
 --nointerfaces    Don't do generate any configuration lines for interfaces,
                   skip the step of gathering interface information and
                   don't run any interface template code.
 --interfaces      Generate configuration lines for interfaces (this is the
                   default).  The main purpose of this option is to negate
                   an --nointerfaces appearing earlier on the command line.
 --help            brief help message
 --man             full documentation
 --version         print the version of cfgmaker
 --output=file     output filename default is STDOUT
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Cfgmaker</b> creates MRTG configuration files based on information pulled
  from a router or another SNMP manageable device.
<div class="Pp"></div>
[ <i>community</i><b>@</b>]<i>router</i>
<div class="Pp"></div>
<i>Community</i> is the community name of the device you want to create a
  configuration for. If not specified, it defaults to ' <b>public</b>'; you
  might want to try this first if you do not know the community name of a
  device. If you are using the wrong community name you will get no response
  from the device.
<div class="Pp"></div>
<i>Router</i> is the DNS name or the IP number of an SNMP-managable device.
  Following the name you can specify 6 further options separated by colons. The
  full syntax looks like this:
<div class="Pp"></div>
<b>router</b>[:[<b>prt</b>][:[<b>tmout</b>][:[<b>retr</b>][:[<b>backoff</b>][:<b>vers</b>]]]]]
<div class="Pp"></div>
Of special interest may be the last parameter, <b>vers</b>. If you set this to
  '2' then your device will be queried with SNMP version 2 requests. This allows
  you to poll the 64 bit traffic counters in the device and will thus work much
  better with fast interfaces (no more counter overrun). Note that the order in
  which the routers are specified on the command line do matter as the same
  order is used when the configuration file is generated. The first specified
  router has it's configuration lines genrated first, followed by the lines
  belonging to the next router and so on.
<div class="Pp"></div>
Note that the first line of the generated cfg file will contain all the
  commandline options you used for generating it. This is to allow for the easy
  'regeneration' in case you want to add newhosts or make some other global
  change.
<h2 class="Ss" title="Ss" id="Configuration"><a class="selflink" href="#Configuration">Configuration</a></h2>
Except for the <b>--output</b> and <b>--global</b> options, all options affect
  only the routers following them on the command line. If an option specified
  earlier on the command line reappears later on the command line with another
  value, the new value overrides the old value as far as remaining routers are
  concerned. This way options might be tailored for groups of routers or for
  individual routers.
<div class="Pp"></div>
See <b>--output</b> and <b>--global</b> for how their behaviour is affected by
  where or how many times they appear on the command line.
<div class="Pp"></div>
See the <b>Examples</b> below on how to set an option differently for multiple
  routers.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print a brief help message and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--man</b></dt>
  <dd class="It-tag">Prints the manual page and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the version of cfgmaker. This should match the
      version of MRTG for which config files are being created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ifref</b>
    <b>nr</b>|<b>ip</b>|<b>eth</b>|<b>descr</b>|<b>name</b></dt>
  <dd class="It-tag">Select the interface identification method. Default is
      <b>nr</b> which identifies the router interfaces by their number.
      Unfortunately the interface numbering scheme in an SNMP tree can change.
      Some routers change their numbering when new interfaces are added, others
      change thier numbering every full moon just for fun.
    <div style="height: 1.00em;">&#x00A0;</div>
    To work around this sad problem MRTG can identify interfaces by 4 other
      properties. None of these works for all interfaces, but you should be able
      to find one which does fine for you. Note that especially ethernet
      addrsses can be problematic as some routers have the same ethernet address
      on most of their interface cards.
    <div style="height: 1.00em;">&#x00A0;</div>
    Select <b>ip</b> to identify the interface by its IP number. Use <b>eth</b>
      to use the ethernet address for identification. Use <b>descr</b> to use
      the Interface description. Or use <b>name</b> to use the Interface name.
    <div style="height: 1.00em;">&#x00A0;</div>
    You can specify multiple properties if you wish, separated by commas. In
      this case, cfgmaker will use the first item in the list which can provide
      unique identification. This allows you to specify, for example, to use IP
      address and to use ifName if this is not defined:
    <br/>
     --ifref ip,name
    <div style="height: 1.00em;">&#x00A0;</div>
    If your chosen method does not allow unique interface identification on the
      device you are querying, <b>cfgmaker</b> will tell you about it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ifdesc</b>
    <b>nr</b>|<b>ip</b>|<b>eth</b>|<b>descr</b>|
    <b>name</b>|<b>type</b>|<b>alias</b></dt>
  <dd class="It-tag">Select what to use as the description of the interface. The
      description appears in the &quot;Title[]&quot; property for the target as
      well as the text header in the HTML code defined in the target's
      &quot;PageTop[]&quot;. Default is to use <b>nr</b> which is just the
      interface number which isn't always useful to the viewer of the graphs.
    <div style="height: 1.00em;">&#x00A0;</div>
    There are 6 other properties which could be used. Use <b>ip</b> if you want
      to use the interface's IP-address. Use <b>eth</b> if you want to use the
      interface's ethernet address. If you want a better description, you can
      use either <b>descr</b>, <b>name</b> or <b>alias</b>. Exactly what each of
      these do varies between different equipment so you might need to
      experiment. For instance, for a serial interface on a Cisco router running
      IOS using <b>name</b> might result in &quot;S0&quot; being the interface
      description , <b>descr</b> might result in &quot;Serial0&quot; and
      <b>alias</b> might result in &quot;Link to HQ&quot; (provided that is what
      is used as the interface's &quot;description&quot; in the router's
      configuration).
    <div style="height: 1.00em;">&#x00A0;</div>
    Finally, if you want to describe the interface by it's Btype (i.e
      &quot;ethernetCSMA&quot;, &quot;propPointtoPoint&quot; etc) you can use
      <b>type</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    You can specify multiple properties if you wish, separated by commas. In
      this case, cfgmaker will use the first item in the list which is available
      for this interface. This allows you to specify, for example, to use any of
      the different aliases in order of preference.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--if-filter</b> '<b>filter-expression</b>'</dt>
  <dd class="It-tag">First of all, this is under some development and is
      experimental.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use this if you want to have better control over what interfaces gets
      included into the configuration. The <b>filter-expression</b> is evaluated
      as a piece of Perl code and is expected to return a truth value. If true,
      include the interface and if false, exclude the interface.
    <div style="height: 1.00em;">&#x00A0;</div>
    For a further discussion on how these filters work, see the section
      &quot;Details on Filters&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--if-template</b> <b>template-file</b></dt>
  <dd class="It-tag">First of all, this is under some development and is
      experimental.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use this if you want to control what the line for each target should look
      like in the configuration file. The contents of the file
      <b>template-file</b> will be evaluated as a Perl program which generates
      the lines using certain variables for input and output.
    <div style="height: 1.00em;">&#x00A0;</div>
    For a further discussion on how these templates work, see the section
      &quot;Details on Temaplates&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--host-template</b> <b>template-file</b></dt>
  <dd class="It-tag">First of all, this is under some development and is
      experimental.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use this if you want to have some extra targets related to the host itself
      such as CPU utilization, ping response time to the host, number of busy
      modems etc. The contents of the file <b>template-file</b> will be
      evaluated once per host as a Perl program which generates the lines using
      certain variables for input and output.
    <div style="height: 1.00em;">&#x00A0;</div>
    For a further discussion on how these templates work, see the section
      &quot;Details on Templates&quot; below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--community</b> <b>community-string</b></dt>
  <dd class="It-tag">Use this to set the community for the routers following on
      the command line to <b>community-string</b>. Individual routers might
      overrride this community string by using the syntax
      <b>community</b><b>@</b> <b>router</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--enable-ipv6</b></dt>
  <dd class="It-tag">This option enables IPv6 support. It requires the
      appropriate perl modules; if they are not found then IPv6 is disabled (see
      the ipv6 documentation).
    <div style="height: 1.00em;">&#x00A0;</div>
    cfgmaker will use IPv6 or IPv4 depending on the target. If the target is a
      numeric address, the protocol depends on the type of address. If the
      target is a hostname, cfgmaker will try to resolve the name first to an
      IPv6 address then to an IPv4 address.
    <div style="height: 1.00em;">&#x00A0;</div>
    IPv6 numeric addresses must be specified between square braces.
    <div style="height: 1.00em;">&#x00A0;</div>
    For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 cfgmaker --enable-ipv6 [2001:760:4::1]:165:::2
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    If the target has both an IPv6 address and an IPv4 address with the same
      hostname, cfgmaker first queries the target using IPv6 and falls back to
      IPv4 if it fails. This is useful for targets which don't support SNMP over
      IPv6.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--use-16bit</b></dt>
  <dd class="It-tag">This option forces the use of 16bit SNMP request IDs. Some
      broken SNMP agents do not accept 32bit request IDs. Try to avoid this
      option as much as possible, complain to your agent vendor instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--snmp-options</b>
    :[<b>port</b>][:[<b>timeout</b>][:[<b>retries</b>][:[<b>backoff</b>][:<b>version</b>]]]]</dt>
  <dd class="It-tag">Use this to set the default SNMP options for all routers
      following on the command line. Individual values might be omitted as well
      as trailing colons. Note that routers might override individual (or all)
      values specified by <b>--snmp-options</b> by using the syntax
    <div style="height: 1.00em;">&#x00A0;</div>
    
      <b>router</b>[:[<b>port</b>][:[<b>timeout</b>][:[<b>retries</b>][:[<b>backoff</b>][:
      <b>version</b>]]]]]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--global</b> <b>&quot;</b><i>bla:
    abc</i><b>&quot;</b></dt>
  <dd class="It-tag">Use this to add global options to the generated config
      file. You can call <b>--global</b> several times to add multiple options.
      The line will appear in the configuration just before the config for the
      next router appearing on the command line.
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 --global &quot;workdir: /home/mrtg&quot;
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    If you want some default Options you might want to put
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 --global &quot;options[_]: growright,bits&quot;
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifying <b>--global</b> after the last router on the command line will
      create a line in the configuration file which will appear after all the
      routers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--noreversedns</b></dt>
  <dd class="It-tag">Do not try to reverse lookup IP numbers ... a must for DNS
      free environments.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-down</b></dt>
  <dd class="It-tag">Normally cfgmaker will not include interfaces which are
      marked anything but administratively and operationally UP. With this
      switch you get them all.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-op-down</b></dt>
  <dd class="It-tag">Include interfaces which are operatively down.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--zero-speed</b> <i>speed</i></dt>
  <dd class="It-tag">Assign this speed in bits-per-second to all interfaces
      which return 0 for ifSpeed and ifHighSpeed. Some switches, notably Foundry
      equipment, return a speed of zero for some interfaces. For example, to
      have all interfaces reporting zero set to 100Mbps, use
      --zero-speed=100000000.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--subdirs</b> <i>format</i></dt>
  <dd class="It-tag">Give each router its own subdirectory for the HTML and
      graphics (or .rrd) files. The directory name is the given <i>format</i>
      string with a couple of pattern replacements. The string
      &quot;HOSTNAME&quot; will be replaced by the hostname of the router
      (however you specified it on the <b>cfgmaker</b> commandline -- it may be
      an actual hostname or just an IP address), and &quot;SNMPNAME&quot; will
      be replaced with the device's idea of its own name (the same name that
      appears on the right side of the &quot;Title&quot; lines). For instance, a
      call like:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 cfgmaker --subdirs=HOSTNAME__SNMPNAME public@10.10.0.18
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    would result in the generation of lines looking something like:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 Directory[10.10.0.18_1]: 10.10.0.18__fp2200-bothrip-1.3
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output</b> <i>file</i></dt>
  <dd class="It-tag">Write the output from <b>cfgmaker</b> into the file
      <i>file</i>. The default is to use &quot;STDOUT&quot;. <b>--output</b> is
      expected to appear only once on the command line. If used multiple times,
      the file specified by the last <b>--output</b> will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nointerfaces</b></dt>
  <dd class="It-tag">Don't generate configuration lines for interfaces.
    <div style="height: 1.00em;">&#x00A0;</div>
    This makes cfgmaker skip all steps related to interfaces which means it will
      not do any polling of the router to retrieve interface information which
      speeds up the execution of cfgmaker and it will neither run any interface
      templates.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--interfaces</b></dt>
  <dd class="It-tag">This makes cfgmaker generate configuration lines for
      interfaces (the default behaviour).
    <div style="height: 1.00em;">&#x00A0;</div>
    The main usage of this option is to negate an --nointerfaces appearing
      earlier on the command line.</dd>
</dl>
<h2 class="Ss" title="Ss" id="SNMP_V3_Options"><a class="selflink" href="#SNMP_V3_Options">SNMP
  V3 Options</a></h2>
<b>Cfgmaker</b> supports SNMP V3 using the <b>Net:SNMP</b> perl module. There
  are optional parameters affecting SNMP operation.
<dl class="Bl-tag">
  <dt class="It-tag">--enablesnmpv3 {yes|no}</dt>
  <dd class="It-tag">The <b>--enablesnmpv3</b> option is an optional flag to
      check for the presence of the <b>Net::SNMP</b> libraries. <b>Cfgmaker</b>
      will try to determine whether this flag is required and will set the
      values automatically.</dd>
</dl>
<div class="Pp"></div>
<i>SNMPv3 Arguments</i>
<div class="Pp"></div>
A SNMP context is a collection of management information accessible by a SNMP
  entity. An item of management information may exist in more than one context
  and a SNMP entity potentially has access to many contexts. The combination of
  a contextEngineID and a contextName unambiguously identifies a context within
  an administrative domain. In a SNMPv3 message, the contextEngineID and
  contextName are included as part of the scopedPDU. All methods that generate a
  SNMP message optionally take a <b>--contextengineid</b> and
  <b>--contextname</b> argument to configure these fields.
<dl class="Bl-tag">
  <dt class="It-tag">Context Engine ID</dt>
  <dd class="It-tag">The <b>--contextengineid</b> argument expects a hexadecimal
      string representing the desired contextEngineID. The string must be 10 to
      64 characters (5 to 32 octets) long and can be prefixed with an optional
      &quot;0x&quot;. Once the <b>--contextengineid</b> is specified it stays
      with the object until it is changed again or reset to default by passing
      in the undefined value. By default, the contextEngineID is set to match
      the authoritativeEngineID of the authoritative SNMP engine.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Context Name</dt>
  <dd class="It-tag">The contextName is passed as a string which must be 0 to 32
      octets in length using the <b>--contextname</b> argument. The contextName
      stays with the object until it is changed. The contextName defaults to an
      empty string which represents the &quot;default&quot; context.</dd>
</dl>
<div class="Pp"></div>
<i>User-based Security Model Arguments</i>
<div class="Pp"></div>
The User-based Security Model (USM) used by SNMPv3 requires that a securityName
  be specified using the <b>--username</b> argument. The creation of a Net::SNMP
  object with the version set to SNMPv3 will fail if the <b>--username</b>
  argument is not present. The <b>--username</b> argument expects a string 1 to
  32 octets in length.
<div class="Pp"></div>
Different levels of security are allowed by the User-based Security Model which
  address authentication and privacy concerns. A SNMPv3 target will derive the
  security level (securityLevel) based on which of the following arguments are
  specified.
<div class="Pp"></div>
By default a securityLevel of 'noAuthNoPriv' is assumed. If the <b>--authkey</b>
  or <b>--authpassword</b> arguments are specified, the securityLevel becomes
  'authNoPriv'. The <b>--authpassword</b> argument expects a string which is at
  least 1 octet in length. Optionally, the <b>--authkey</b> argument can be used
  so that a plain text password does not have to be specified in a script. The
  <b>--authkey</b> argument expects a hexadecimal string produced by localizing
  the password with the authoritativeEngineID for the specific destination
  device. The &quot;snmpkey&quot; utility included with the Net::SNMP
  distribution can be used to create the hexadecimal string (see snmpkey).
<div class="Pp"></div>
Two different hash algorithms are defined by SNMPv3 which can be used by the
  Security Model for authentication. These algorithms are HMAC-MD5-96
  &quot;MD5&quot; (RFC 1321) and HMAC-SHA-96 &quot;SHA-1&quot; (NIST FIPS PUB
  180-1). The default algorithm used by the module is HMAC-MD5-96. This behavior
  can be changed by using the <b>--authprotocol</b> argument. This argument
  expects either the string 'md5' or 'sha' to be passed to modify the hash
  algorithm.
<div class="Pp"></div>
By specifying the arguments <b>--privkey</b> or <b>--privpassword</b> the
  securityLevel associated with the object becomes 'authPriv'. According to
  SNMPv3, privacy requires the use of authentication. Therefore, if either of
  these two arguments are present and the <b>--authkey</b> or
  <b>--authpassword</b> arguments are missing, the creation of the object fails.
  The <b>--privkey</b> and <b>--privpassword</b> arguments expect the same input
  as the <b>--authkey</b> and <b>--authpassword</b> arguments respectively.
<div class="Pp"></div>
The User-based Security Model described in RFC 3414 defines a single encryption
  protocol to be used for privacy. This protocol, CBC-DES &quot;DES&quot; (NIST
  FIPS PUB 46-1), is used by default or if the string 'des' is passed to the
  <b>--privprotocol</b> argument. By working with the Extended Security Options
  Consortium http://www.snmp.com/eso/, the module also supports additional
  protocols which have been defined in draft specifications. The draft
  http://www.snmp.com/eso/draft-reeder-snmpv3-usm-3desede-00.txt defines the
  support of CBC-3DES-EDE &quot;Triple-DES&quot; (NIST FIPS 46-3) in the
  User-based Security Model. This protocol can be selected using the
  <b>--privprotocol</b> argument with the string '3desede'. The draft
  http://www.snmp.com/eso/draft-blumenthal-aes-usm-04.txt describes the use of
  CFB128-AES-128/192/256 &quot;AES&quot; (NIST FIPS PUB 197) in the USM. The
  three AES encryption protocols, differentiated by their key sizes, can be
  selected by passing 'aescfb128', 'aescfb192', or 'aescfb256' to the
  <b>-privprotocol</b> argument.
<h2 class="Ss" title="Ss" id="Details_on_Filters"><a class="selflink" href="#Details_on_Filters">Details
  on Filters</a></h2>
The purpose of the filters is to decide which interfaces to accept and which
  interfaces to reject. This decision is done for each interface by evaluating
  the filter expression as a piece of Perl code and investigating the result of
  the evaluation. If true, accept the interface otherwise reject it.
<div class="Pp"></div>
When working with filters, remember that Perl has it's own idea of what truth
  and false is. The empty string &quot;&quot; and the string &quot;0&quot; are
  false, all other strings are true. This further imples that any integer value
  of 0 is false as well as any undef value. It also implies that all references
  are considered true.
<div class="Pp"></div>
As the filter is evaluated as a Perl expression, several useful constructs in
  Perl are worth mentioning:
<div class="Pp"></div>
Expressions might be grouped by using parentheses &quot;()&quot;. Expressions
  might be combined using boolean operators such as the following:
<dl class="Bl-tag">
  <dt class="It-tag">&quot;<b>and</b>&quot; (equivalent with
    &quot;<b>&amp;&amp;</b>&quot;)</dt>
  <dd class="It-tag">Boolean &quot;and&quot; of the two expressions, is only
      true if both expressions are true. Example: <i>expression1</i> <b>and</b>
      <i>expression2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;<b>or</b>&quot; (equivalent with
    &quot;<b>||</b>&quot;)</dt>
  <dd class="It-tag">Boolean &quot;or&quot; of the two expressions, is true if
      either or both expressions are true. Example: <i>expression1</i> <b>or</b>
      <i>expression2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&quot;<b>not</b>&quot; (equivalent with
    &quot;<b>!</b>&quot;)</dt>
  <dd class="It-tag">Boolean negation of a single expression. Example:
      <b>not</b> <i>expression</i> . Yet another example:
      <b>!</b><i>expression</i></dd>
</dl>
<div class="Pp"></div>
(For more details on this I recommend a book on Perl)
<div class="Pp"></div>
<i>Predefined Filter Variables</i>
<div class="Pp"></div>
To facilitate, there are a number of predefined values available to use in the
  filter. Note that these variables are also available when templates interfaces
  are evaluated (but not host templates).
<div class="Pp"></div>
Caveat: All these variables' names begin with a dollar sign ($), which is a
  syntactic requirement for scalar variables in Perl. The danger here is that
  the dollar sign in many shells is an active character (often used for shell
  variables exactly as in Perl variables) so it is important to ensure that the
  Perl expression isn't evaluated by the command line shell as shell code before
  being passed to cfgmaker as command line arguments. In shells like Bourne
  shell, ksh shell or bash shell, placing the entire expression within single
  qoutes will avoid such accidental evaluation:
<div class="Pp"></div>
<pre>
 '--if-filter=($default_iftype &amp;&amp; $if_admin)'
</pre>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_type</b><b></b></dt>
  <dd class="It-tag">This is an integer specifying the interface type as per the
      SNMP standards and as reported by the polled device. A complete list of
      interface types would be impractical for this document , but there are a
      number predefined varables below. Normally, cfgmaker puts in the target's
      PageTop this iftype value within paranthesis after the name of the
      interface type. (e.g &quot;propPointToPointSerial (22)&quot;).
    <div style="height: 1.00em;">&#x00A0;</div>
    Here's a list of some of the most common interface types by number:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
   6 ethernetCsmacd
   7 iso88023Csmacd
   9 iso88025TokenRing
  15 fddi
  19 E1
  20 basicISDN
  21 primaryISDN
  22 propPointToPointSerial
  23 ppp
  24 softwareLoopback
  30 ds3
  32 frame-relay
  33 rs232
  37 atm
  39 sonet
  44 frameRelayService
  46 hssi
  49 aal5
  53 propVirtual
  62 Fast Ethernet (100BaseT)
  63 ISDN &amp; X.25
  69 Full Duplex Fast Ethernet (100BaseFX)
  94 Asymetric Digital Subscriber Loop (ADSL)
 117 Gigabit Ethernet
 134 ATM Sub Interface
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default</b><b></b></dt>
  <dd class="It-tag">True if and only if cfgmaker normally should accepted the
      interface based on the interfaces administrative and operational state
      (taking the flags <b>--no-down</b> and <b>--show-op-down</b> into account)
      and it's type (and a few other things).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_ifstate</b><b></b></dt>
  <dd class="It-tag">True if and only if cfgmaker would have accepted the
      interface based on it's operational and administrative states (also taking
      into account the presence of the flags <b>--no-down</b> and
      <b>--show-op-down</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_iftype</b><b></b></dt>
  <dd class="It-tag">True if and only if cfgmaker would have accepted the
      interface based on it's type (and a few type specific details in
      addition).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_admin</b><b></b></dt>
  <dd class="It-tag">True if and only if the interface is in an adminstrative up
      state.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_oper</b><b></b></dt>
  <dd class="It-tag">True if and only if the interface is in an operational up
      state.</dd>
</dl>
<div class="Pp"></div>
A number of variables are also predefined to easily decide if an interface
  belong to a certain cathegory or not. Below is all those variables listed
  together with which if_type numbers each variable will be true for. Note that
  some variables refer to other variables as well.
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_ethernet</b><b></b></dt>
  <dd class="It-tag">True for ethernet interfaces (nr 6, 7, 26, 62, 69 and
    117).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_isdn</b><b></b></dt>
  <dd class="It-tag">True for various ISDN interface types (nr 20, 21, 63, 75,
      76 and 77)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_dialup</b><b></b></dt>
  <dd class="It-tag">True for dial-up interfaces such as PPP as well as ISDN.
      (nr 23, 81, 82 and 108 in addition to the numbers of
      <b></b><b>$if_is_isdn</b> <b></b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_atm</b><b></b></dt>
  <dd class="It-tag">True for miscellaneous ATM related interface types (nr 37,
      49, 107, 105, 106, 114 and 134).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_wan</b><b></b></dt>
  <dd class="It-tag">True for WAN interfaces point to point, Frame Relay and
      High Speed Serial ( 22,32,44,46)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_lan</b><b></b></dt>
  <dd class="It-tag">True for LAN interfaces (8, 9, 11, 15, 26, 55, 59, 60 and
      115 in addition to the numbers of
    <b></b><b>$if_is_ethernet</b><b></b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_dsl</b><b></b></dt>
  <dd class="It-tag">True for ADSL, RDSL, HDSL and SDSL (nr 94, 95, 96, 97)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_loopback</b><b></b></dt>
  <dd class="It-tag">True for software loopback interfaces (nr 24)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_is_ciscovlan</b><b></b></dt>
  <dd class="It-tag">True for Cisco VLAN interfaces (interfaces with the word
      Vlan or VLAN in their ifdescs)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_vlan_id</b><b></b></dt>
  <dd class="It-tag">Returns the vlan id associated with a specific port on
      Cisco Catalyst switches under both Catalyst OS and IOS, and 3Com switches.
      If it is not a vlan interface, will return undef.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_cisco_trunk</b><b></b></dt>
  <dd class="It-tag">Returns the trunking state of a specific port on Cisco
      Catalyst switches under both Catalyst OS and IOS. Returns &quot;1&quot; if
      the interface is a trunk, undef otherwise.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_MTU</b><b></b></dt>
  <dd class="It-tag">Returns the Maximum Transfer Unit associated with a
      specific port.</dd>
</dl>
<div class="Pp"></div>
Besides that, you can also use the variables defined for templates below.
  Further, all the variables available in cfgmaker is at the scripts disposal
  even if the use of such features is discouraged. More &quot;shortcuts&quot; in
  the form of variables and functions will be made available in the future
  instead.
<div class="Pp"></div>
<i>Examples on Filters</i>
<div class="Pp"></div>
The following filter will not affect which interfaces get's included or
  excluded, it will make cfgmaker behave as normally.
<div class="Pp"></div>
<pre>
 '--if-filter=$default'
</pre>
<div class="Pp"></div>
The following filter will make cfgmaker exclude PPP (23) interfaces:
<div class="Pp"></div>
<pre>
 '--if-filter=$default &amp;&amp; $if_type!=23'
</pre>
<div class="Pp"></div>
The following filter will make cfgmaker behave as usual except that it will
  consider the operational state of an interface irrelevant but still reject all
  interfaces which are administratively down.
<div class="Pp"></div>
<pre>
 '--if-filter=$if_admin &amp;&amp; $default_iftype'
</pre>
<h2 class="Ss" title="Ss" id="Details_on_Templates"><a class="selflink" href="#Details_on_Templates">Details
  on Templates</a></h2>
The contents of the template files are evaluated as a Perl program. A number or
  Perl variables are available for the program to read and others are used to be
  written to.
<div class="Pp"></div>
As quite a few of the predefined variables has values which are are supposed to
  be used in HTML code some of them have an &quot;HTML-escaped&quot; variant,
  e.g $html_syslocation is the HTML escaped variant of $syslocation. The HTML
  escaping means that the chars &quot;&lt;&quot;, &quot;&gt;&quot; and
  &quot;&amp;&quot; are replaced by &quot;&amp;lt;&quot;, &quot;&amp;gt;&quot;
  and &quot;&amp;amp;&quot; and that newlines embedded in the string are
  prepended with &quot;&lt;BR&gt;&quot; and appended with a space character (if
  a newline is last in the string it is not touched).
<div class="Pp"></div>
<i>Writable Template Variables</i>
<div class="Pp"></div>
These are the variables available to store the configuration lines in. Some of
  them are initialized prior to the evaluation of the template but such content
  normally is comments for inclusion in the final configuration file so those
  variables might be reset to the empty string in the template code to eliminate
  the comments. The other way around is also possible, the contents of these
  variables might be extended with further information for various reasons such
  as debugging etc.
<div class="Pp"></div>
Once the template has been evaluated, the following happens: if the template is
  a interface template and the actual interface for some reason is rejected and
  thus needs to be commented out, all the lines in the variable
  <b></b><b>$target_lines</b> <b></b> are turned into comments by adding a hash
  mark (&quot;#&quot;) at their beginning. Then all the variables
  <b></b><b>$head_lines</b> <b></b>, <b></b><b>$problem_lines</b><b></b> ,
  <b></b> <b>$target_lines</b><b></b> and <b></b><b>$separator_lines</b><b></b>
  are concatenated together to form the lines to add to the configuration file.
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$target_lines</b><b></b></dt>
  <dd class="It-tag">This variable is the placeholder for the configuration
      lines created by the template. <b></b><b>$target_lines</b><b></b> is
      predefined to be empty when the template code is evaluated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$head_lines</b><b></b></dt>
  <dd class="It-tag">This variable is intended to be the placeholder for the
      comment line appearing just before the target in the configuration file.
      It is initialized with that comment line before the evaluation of the
      template code and if the template doesn't modify
      <b></b><b>$head_lines</b><b></b> during evaluation, the comment will look
      like usual in the config file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$problem_lines</b><b></b></dt>
  <dd class="It-tag">This variable is intended to be the placholder for the
      comment lines describing any problems which might have been encountered
      when trying to add the target into the configuration. For host templates
      it's normally not used and for those it's predefined as the empty string.
      For interface templates <b></b><b>$problem_lines</b><b></b> is predefined
      with the error description comments which cfgmaker normally would use for
      rejected interfaces or as the empty string for accepted interfaces.
    <div style="height: 1.00em;">&#x00A0;</div>
    It is possible to test against <b></b><b>$problem_lines</b><b></b> to find
      out if an interface will be included or rejected but this is not
      recommended. Test against <b></b><b>$if_ok</b><b></b> instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$separator_lines</b><b></b></dt>
  <dd class="It-tag">This variable is the placeholder for the string to use as
      the separator between the code for individual targets. The contents of
      this variable is put after each target (so the lines will appear after the
      end of the last target in the config as well).</dd>
</dl>
<div class="Pp"></div>
<i>Predefined Template Variables</i>
<div class="Pp"></div>
All the variables below are available for interface templates to use. For host
  templates, only those listed under &quot;Host and System Variables&quot; are
  available.
<div class="Pp"></div>
For interface templates the variables listed under &quot;Predefined Filter
  Variables&quot; are also available.
<div class="Pp"></div>
<i>Host and System Variables</i>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$router_name</b><b></b></dt>
  <dd class="It-tag">This is the fully qualified name for the router. It is
      affected by the following items on the command line: the router name
      itself and <b>--dns-domain</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$router_connect</b><b></b></dt>
  <dd class="It-tag">This is the reference string for the router being polled.
      It is on the form community@router possibly followed by some snmp options.
      It is affected by the following items on the command line: the router name
      itself, <b>--community</b>, <b>--snmp-options</b> and <b>--dns-domain</b>.
      (There's no HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$directory_name</b><b></b></dt>
  <dd class="It-tag">This variable should contain the directory name as cfgmaker
      normally would use as the value for the &quot;Directory[]&quot; directive.
      The value is determined by the <b>--subdirs</b> command line option. If
      <b>--subdirs</b> isn't specified <b></b><b>$directory_name</b><b></b> will
      be the empty string. (There's no HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$syscontact</b><b></b></dt>
  <dd class="It-tag">This variable is the router's SNMP sysContact value. (HTML
      escaped variant: <b></b><b>$html_syscontact</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$sysname</b><b></b></dt>
  <dd class="It-tag">This variable is the router's SNMP sysName value. (No HTML
      escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$syslocation</b><b></b></dt>
  <dd class="It-tag">This variable is the router's SNMP sysLocation value. (HTML
      escaped variant: <b></b><b>$html_syslocation</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$sysdescr</b><b></b></dt>
  <dd class="It-tag">This variable is the router's SNMP sysDescr value. It is
      normally not used by cfgmaker but might be useful in a template. (HTML
      escaped variant: <b></b><b>$html_sysdescr</b><b></b>)</dd>
</dl>
<div class="Pp"></div>
<i>Interface Target Related Variables</i>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$target_name</b><b></b></dt>
  <dd class="It-tag">This is what cfgmaker normally would use as the the name of
      the target. The target name is what is found within the square brackets,
      &quot;[]&quot;, for target directives. (There's no HTML escaped variant
      available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_ref</b><b></b></dt>
  <dd class="It-tag">This the reference string for the interface. It is expected
      to be used in the &quot;Target[xyz]&quot; directive to distinguish what
      interface to use. The value of this variable is affected by the
      <b>--ifref</b> command line option. It is normally used together with
      <b></b> <b>$router_connect</b><b></b>. (There's no HTML escaped variant
      available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_ok</b><b></b></dt>
  <dd class="It-tag">This variable is true if the interface is going to be
      included into the configuration file, otherwise false. Don't test against
      other variables such as <b></b><b>$problem_lines</b><b></b> to find out if
      an interface will be rejected or not, use this <b></b><b>$if_ok</b><b></b>
      instead.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_target_lines</b><b></b></dt>
  <dd class="It-tag">This variable contains all the target lines which cfgmaker
      by default outputs for this interface. It's useful if you want to have the
      &quot;standard target&quot; but want to add some extra lines to it by
      using a template.</dd>
</dl>
<div class="Pp"></div>
By default cfgmaker uses the following directives for each target it generates:
  Target[], SetEnv[], MaxBytes[], Title[], PageTop[] and if there is any
  directory specified also the Directory[] directive.
<div class="Pp"></div>
To facilitate the creation of templates which generates target configs which are
  similar to the default one, each of the above mentioned directive lines have a
  corresponding variable containing the line as cfgmaker would have output it by
  default.
<div class="Pp"></div>
Note that none of these have a HTML escaped variant, text in them is HTML
  escaped where needed. Also note that they do not have any newline at the end.
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_target_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the Target[]
      directive line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_setenv_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the SetEnv[]
      directive line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_directory_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the
      Directory[] directive line which means it is an empty string (with no
      newline) if there's no directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_maxbytes_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the
      MaxBytes[] directive line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_title_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the Title[]
      directive line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$default_pagetop_directive</b><b></b></dt>
  <dd class="It-tag">This variable contains the default string for the PageTop[]
      directive lines.</dd>
</dl>
<div class="Pp"></div>
<i>Interface Network Configuration Variables</i>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_ip</b><b></b></dt>
  <dd class="It-tag">This variable should contain the IP-address of the
      interface, if any has been assigned to it. (There's no HTML escaped
      variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$ifindex</b><b></b></dt>
  <dd class="It-tag">This variable is the SNMP ifIndex for the interface which
      per definition always is an integer. (There's no HTML escaped variant
      available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_index</b><b></b></dt>
  <dd class="It-tag">Equivalent with <b></b><b>$ifindex</b><b></b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_eth</b><b></b></dt>
  <dd class="It-tag">Contains the ethernet address of the interface, if any.
      (There's no HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_speed</b><b></b></dt>
  <dd class="It-tag">This variable is the speed in bytes/second (with prefixes).
      (There's no HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_speed_str</b><b></b></dt>
  <dd class="It-tag">This variable is a cooked speed description which is either
      in bits or bytes depending on wether or not the bits option is active and
      also with the proper prefix for the speed (k, M, G etc). (No HTML escaped
      variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_type_desc</b><b></b></dt>
  <dd class="It-tag">This variable is a textual description of the interface
      type. (HTML escaped variant: <b></b><b>$html_if_type_desc</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_type_num</b><b></b></dt>
  <dd class="It-tag">This variable the integer value corresponding to the
      interface type (for a listing for the value for the more common interface
      types, see the section DETAILS ON FILTERS above). (No HTML escaped variant
      available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_dns_name</b><b></b></dt>
  <dd class="It-tag">This is the DNS name for the interface. (No HTML escaped
      variant available)</dd>
</dl>
<div class="Pp"></div>
<i>Interface Name, Description and Alias Variables</i>
<div class="Pp"></div>
It might seem confusing with both <i>Name</i>, <i>Description</i> and
  <i>Alias</i> in this context and to some extent it is. <i>Name</i> and
  <i>Description</i> are usually supported on most equipment but how they are
  used varies, both between manufacturers as well as between different
  cathegories of equipment from the same manufacturer. The <i>Alias</i> is at
  least supported by Cisco IOS, and that variable contains whatever is used in
  the IOS statement called &quot;description&quot; for the interface (not to be
  confused with the SNMP variables for <i>Description</i>).
<div class="Pp"></div>
For better control from the command line consider
  <b></b><b>$if_title_desc</b><b></b> which contents are controlled by the
  <b>--if-descr</b> command line option.
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_snmp_descr</b><b></b></dt>
  <dd class="It-tag">This variable should contain the &quot;raw&quot;
      description of the interface as determined by the SNMP polling of the
      router. (HTML escaped variant:
    <b></b><b>$html_if_snmp_descr</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_snmp_name</b><b></b></dt>
  <dd class="It-tag">The &quot;raw&quot; name for the interface as provided by
      SNMP polling. (HTML escaped variant:
      <b></b><b>$html_if_snmp_name</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_snmp_alias</b><b></b></dt>
  <dd class="It-tag">The &quot;raw&quot; ifAlias for the interface as provided
      by SNMP polling. (HTML escaped variant:
      <b></b><b>$html_if_snmp_alias</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_cisco_descr</b><b></b></dt>
  <dd class="It-tag">The &quot;raw&quot; CiscolocIfDescr for the interface as
      provided by SNMP polling. (HTML escaped variant:
      <b></b><b>$html_if_cisco_descr</b> <b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_description</b><b></b></dt>
  <dd class="It-tag">This is the &quot;cooked&quot; description string for the
      interface, taking into account the SNMP values found for the interface's
      RDescr, ifAlias and CiscolocIfDescr. (HTML escaped variant:
      <b></b><b>$html_if_description</b> <b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_title</b><b></b></dt>
  <dd class="It-tag">The full string cfgmaker by default would have used for the
      Title[] directive in the configuration as well as the content of the
      topmost H1 tag in the PageTop[]. Is composed by the contents of
      <b></b><b>$desc_prefix</b> <b></b>, <b></b><b>$if_title_desc</b><b></b>
      and <b></b><b>$sysname</b><b></b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    As <b></b><b>$if_title</b><b></b> depends on
      <b></b><b>$if_title_desc</b><b></b>, it is possible to indirectly control
      <b></b><b>$if_title</b><b></b> by using the command line option
      <b>--if-descr</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    (HTML escaped variant: <b></b><b>$html_if_title</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_port_name</b><b></b></dt>
  <dd class="It-tag">If the host is a Cisco Catalyst LAN switch, this variable
      is the name of that port. (No HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_pp_port_name</b><b></b></dt>
  <dd class="It-tag">If the host is a Nortel Passport LAN switch, this variable
      is the name of that port. (No HTML escaped variant available)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$desc_prefix</b><b></b></dt>
  <dd class="It-tag">This variable is a prefix of the description of what the
      target is to use in the &quot;Title[]&quot; directive and in the H1
      section of the &quot;PageTop[]&quot;. Default is &quot;Traffic analysis
      for &quot;. (HTML escaped variant:
    <b></b><b>$html_desc_prefix</b><b></b>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><b>$if_title_desc</b><b></b></dt>
  <dd class="It-tag">This is the description of the interface normally used by
      cfgmaker as part of the variable <b></b><b>$if_title</b><b></b>. The
      latter is used as the full string in the &quot;Title[]&quot; directove and
      the H1 section in the PageTop[].
    <div style="height: 1.00em;">&#x00A0;</div>
     <b></b><b>$if_title_desc</b><b></b> is controlled by the command line
      option <b>--if-descr</b> which indirectly controls the contents of
      <b></b><b>$if_title</b><b></b>
    <div style="height: 1.00em;">&#x00A0;</div>
    (HTML escaped variant: <b></b><b>$html_if_title_desc</b><b></b>)</dd>
</dl>
<div class="Pp"></div>
<i>Help Functions for Templates</i>
<div class="Pp"></div>
The following functions exists to facilitate the writing of host and interface
  templates.
<dl class="Bl-tag">
  <dt class="It-tag"><b>html_escape(</b><b><i>string</i></b><b>)</b></dt>
  <dd class="It-tag"><b></b><b><i>html_escape()</i></b><b></b> takes a string as
      an argument and returns a new string where the following substitutions has
      been done: the chars &quot;&lt;&quot;, &quot;&gt;&quot; and
      &quot;&amp;&quot; are replaced by &quot;&amp;lt;&quot;,
      &quot;&amp;gt;&quot; and &quot;&amp;amp;&quot; and that newlines embedded
      in the string are prepended with &quot;&lt;BR&gt;&quot; and appended with
      a space character (newlines at the end of the string are not
    touched).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>oid_pick($router_connect,$v3opt,&quot;oid1&quot;,&quot;oid2&quot;...)</b></dt>
  <dd class="It-tag">This function will try to poll each of the oids specified
      until it is successful or has run out of oids. It will return the name of
      the first oid that worked or undef if it is not successful</dd>
</dl>
<div class="Pp"></div>
<i>Example Template Files</i>
<div class="Pp"></div>
Template Example 1: Eliminating Rejected Targets From Appearing
<div class="Pp"></div>
This template file generates exactly the same configuration code per interface
  as cfgmaker does by default, with the exception that it eliminates all lines
  (comments as well as config code) for an interface if the interface happens to
  be rejected.
<div class="Pp"></div>
<pre>
 if(not $problem_lines)
 {
   $target_lines .= &lt;&lt;ECHO;
 Target[$target_name]: $if_ref:$router_connect
 SetEnv[$target_name]: MRTG_INT_IP=&quot;$if_ip&quot; MRTG_INT_DESCR=&quot;$if_snmp_descr&quot;
 ECHO
   if ($directory_name) {
       $target_lines .= &quot;Directory[$target_name]: $directory_name\n&quot;;
   }
   $target_lines .= &lt;&lt;ECHO;
 MaxBytes[$target_name]: $if_speed
 Title[$target_name]: $html_desc_prefix$html_if_title_desc -- $sysname
 PageTop[$target_name]: &lt;h1&gt;$html_desc_prefix$html_if_title_desc -- $sysname&lt;/h1&gt;
                &lt;div id=&quot;sysdetails&quot;&gt;
                        &lt;table&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;System:&lt;/td&gt;
                                        &lt;td&gt;$sysname in $html_syslocation&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Maintainer:&lt;/td&gt;
                                        &lt;td&gt;$html_syscontact&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Description:&lt;/td&gt;
                                        &lt;td&gt;$html_if_description&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;ifType:&lt;/td&gt;
                                        &lt;td&gt;$html_if_type_desc ($if_type_num)&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;ifName:&lt;/td&gt;
                                        &lt;td&gt;$html_if_snmp_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if defined $if_port_name;
                                &lt;tr&gt;
                                        &lt;td&gt;Port Name:&lt;/td&gt;
                                        &lt;td&gt;$if_port_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if defined $if_pp_port_name;
                                &lt;tr&gt;
                                        &lt;td&gt;Port Name:&lt;/td&gt;
                                        &lt;td&gt;$if_pp_port_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO;
                                &lt;tr&gt;
                                        &lt;td&gt;Max Speed:&lt;/td&gt;
                                        &lt;td&gt;$if_speed_str&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if $if_ip;
                                &lt;tr&gt;
                                        &lt;td&gt;Ip:&lt;/td&gt;
                                        &lt;td&gt;$if_ip ($if_dns_name)&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO;
                        &lt;/table&gt;
                &lt;/div&gt;
 ECHO
 } else {
   $head_lines=&quot;&quot;;
   $problem_lines=&quot;&quot;;
   $target_lines=&quot;&quot;;
   $separator_lines=&quot;&quot;;
 }
</pre>
<div class="Pp"></div>
<i>Template Example 2: Simplier Version of Example 1</i>
<div class="Pp"></div>
Example 1 was partly intended to demonstrate how to customize the generation of
  interface targets but also to provide a hint of how the variables are used in
  the &quot;default&quot; template which one could consider that cfgmaker
  normally uses.
<div class="Pp"></div>
If you're only intrested in the easiest way of entirely eliminating those reject
  interfaces, the template below would do the job as well by using
  <b></b><b>$default_target_lines</b> <b></b>.
<div class="Pp"></div>
<pre>
 if($if_ok) {
  $target_lines = $default_target_lines;
 } else {
   $head_lines=&quot;&quot;;
   $problem_lines=&quot;&quot;;
   $target_lines=&quot;&quot;;
   $separator_lines=&quot;&quot;;
 }
</pre>
<div class="Pp"></div>
<i>Template Example 3: Creating CPU Targets for Hosts</i>
<div class="Pp"></div>
Below is an example of a host template.
<div class="Pp"></div>
<pre>
 $head_lines .= &lt;&lt;ECHO;
 #---------------------------------------------------------------------
 ECHO
 my $target_name = $router_name . &quot;.cpu&quot;;
 $target_lines .= &lt;&lt;ECHO;
 YLegend[$target_name]: Percentage CPU load
 ShortLegend[$target_name]: %
 Legend1[$target_name]: CPU load in %
 Legend2[$target_name]:
 Legend3[$target_name]: Max Observed CPU load
 Legend4[$target_name]:
 LegendI[$target_name]: &amp;nbsp;CPU Load:
 LegendO[$target_name]:
 WithPeak[$target_name]: ywm
 MaxBytes[$target_name]: 100
 Options[$target_name]: growright, gauge, nopercent
 Title[$target_name]: $router_name CPU load
 Target[$target_name]: 1.3.6.1.4.1.9.2.1.58.0&amp;1.3.6.1.4.1.9.2.1.58.0:$router_connect
 PageTop[$target_name]: &lt;h1&gt;$router_name CPU load&lt;/h1&gt;
                &lt;div&gt;
                        &lt;table&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;System:&lt;/td&gt;
                                        &lt;td&gt;$router_name in $html_syslocation&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Maintainer:&lt;/td&gt;
                                        &lt;td&gt;$html_syscontact&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Description:&lt;/td&gt;
                                        &lt;td&gt;$html_sysdescr&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Resource:&lt;/td&gt;
                                        &lt;td&gt;CPU.&lt;/td&gt;
                                &lt;/tr&gt;
                        &lt;/table&gt;
                &lt;/div&gt;
 ECHO
</pre>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The first example creates a config file for <i>router.place.xyz</i>: the router
  has the community name <i>public</i>. Interfaces get identified by their IP
  number. Two global options get added to the config file. The config file gets
  redirected to <i>mrtg.conf</i>. The '\' signs at the end of the line mean that
  this command should be written on a single line.
<div class="Pp"></div>
<pre>
 cfgmaker --global &quot;WorkDir: /home/tobi&quot;           \
          --global &quot;Options[_]: growright,bits&quot;    \
          --ifref=ip                               \
          public@router.place.xyz &gt; mrtg.cfg
</pre>
<div class="Pp"></div>
Note: if cfgmaker is not in your path, but you are in the directory where
  cfgmaker is stored, you can start it with ./cfgmaker
<div class="Pp"></div>
The next example creates a config file for four devices:
  <i>router1.place.xyz</i>, <i>router2.place.xyz</i>, <i>switch1.place.xyz</i>
  and <i>switch2.place.xyz</i> all with the community <i>public</i>.
<div class="Pp"></div>
The two routers will have <b>--ifref</b> set to <b>descr</b> whilst the two
  switches will use <b>--ifref</b> set to <b>name</b>. Further the routers will
  use <b>--ifdesc</b> set to <b>alias</b> and <i>switch1.place.xyz</i> will use
  <b>--ifdesc</b> set to <b>descr</b> whilst <i>switch2.place.xyz</i> use
  <b>name</b> instead.
<div class="Pp"></div>
Finally, there will be two Options lines inserted in the configuration: One will
  be in the beginning, whilst the other will be inserted after the lines related
  to the two routers but before those lines related to the switches.
<div class="Pp"></div>
<pre>
 cfgmaker --global &quot;WorkDir: /home/tobi&quot;           \
          --global &quot;Options[_]: growright,bits&quot;    \
          --ifref=descr                            \
          --ifdesc=alias                           \
          public@router1.place.xyz                 \
          public@router2.place.xyz                 \
          --global &quot;Options[_]: growright&quot;         \
          --ifref=name                             \
          --ifdesc=descr                           \
          public@switch1.place.xyz                 \
          --ifdesc=name                            \
          public@switch2.place.xyz &gt; mrtg.cfg
</pre>
<div class="Pp"></div>
The next example demonstrates how to use the <b>--community</b>,
  <b>--snmp-options</b> and <b>--dns-domain</b> to make the command line
  simpler. All the equipment will use the community <i>hidden</i>, except for
  the ppp-server which use community <i>access</i>. All equipment uses these
  SNMP options: <b>1s timeout</b>, <b>1 retry</b> and <b>SNMP version 2</b>
  (<b>backoff</b> and <b>port</b> is unspecified which means they use the
  default values). The exception again is the ppp-server which uses <b>SNMP
  version 1</b>. Finally, all the equipment is part of the domain
  <i>place.xyz</i>, except for the ppp-server which is part of the domain
  <i>remote.place.xyz</i>. Note that the latter is achieved simply by specifying
  the name of the ppp-server to be <i>ppp-server.</i><b><i>remote</i></b><i></i>
  .
<div class="Pp"></div>
<pre>
 cfgmaker --global &quot;WorkDir: /home/tobi&quot;           \
          --global &quot;Options[_]: growright,bits&quot;    \
          --dns-domain=place.xyz                   \
          --community=hidden                       \
          --snmp-options=::1:1::2                  \
          router1                                  \
          router2                                  \
          router3                                  \
          router4                                  \
          router5                                  \
          switch1                                  \
          switch2                                  \
          switch3                                  \
          switch4                                  \
          switch5                                  \
          switch6                                  \
          switch7                                  \
          access@ppp-server.remote:::::1 &gt; mrtg.cfg
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
mrtg-reference
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Tobias Oetiker &lt;tobi@oetiker.ch&gt; and Jakob Ilves
  &lt;jakob.ilves@oracle.com&gt;
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
GNU General Public License
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Cfgmaker is Copyright 2000 by Tobias Oetiker &lt;tobi@oetiker.ch&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-01-12</td>
    <td class="foot-os">2.17.4</td>
  </tr>
</table>
</body>
</html>
