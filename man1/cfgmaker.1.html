<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:58:02 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CFGMAKER(1) mrtg CFGMAKER(1)</p>

<p style="margin-top: 1em">NAME <br>
cfgmaker - Creates mrtg.cfg files (for mrtg-2.17.4)</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cfgmaker [options] [community@]router [[options]
[community@]router ...]</p>

<p style="margin-top: 1em">OPTIONS <br>
--ifref=nr interface references by Interface Number
(default) <br>
--ifref=ip ... by Ip Address <br>
--ifref=eth ... by Ethernet Number <br>
--ifref=descr ... by Interface Description <br>
--ifref=name ... by Interface Name <br>
--ifref=type ... by Interface Type <br>
You may also use multiple options separated by commas, <br>
in which case the first available one is used: <br>
e.g. --ifref=ip,name,nr</p>

<p style="margin-top: 1em">--ifdesc=nr interface
description uses Interface Number (default) <br>
--ifdesc=ip ... uses Ip Address <br>
--ifdesc=eth ... uses Ethernet Number <br>
--ifdesc=descr ... uses Interface Description <br>
--ifdesc=name ... uses Interface Name <br>
--ifdesc=catname ... uses CatOS Interface Name <br>
--ifdesc=ppname ... uses Passport Port Name <br>
--ifdesc=alias ... uses Interface Alias <br>
--ifdesc=type ... uses Interface Type <br>
You may also use multiple options separated by commas, <br>
in which case the first available one is used: <br>
e.g. --ifdesc=catname,ppname,descr,alias,ip,name,nr</p>

<p style="margin-top: 1em">--if-filter=f Test every
interface against filter f to decide wether <br>
or not to include that interface into the collection. <br>
Currently f is being evaluated as a Perl expression <br>
and it&rsquo;s truth value is used to reject or accept the
<br>
interface. <br>
(Experimental, under development, might change)</p>

<p style="margin-top: 1em">--if-template=templatefile <br>
Replace the normal target entries for the interfaces <br>
with an entry as specified by the contents in the file <br>
templatefile. The file is supposed to contain Perl <br>
code to be executed to generate the lines for the <br>
target in the configuration file. <br>
(Experimental, under development, might change)</p>

<p style="margin-top: 1em">--host-template=templatefile
<br>
In addition to creating targets for a host&rsquo;s
interfaces <br>
do also create targets for the host itself as specified <br>
by the contents in the file templatefile. The file is <br>
supposed to contain Perl code to be executed to generate
<br>
the lines for the host related targets (such as CPU, <br>
ping response time measurements etc.) in the config- <br>
uration file. <br>
(Experimental, under development, might change)</p>

<p style="margin-top: 1em">--global &quot;x: a&quot; add
global config entries</p>

<p style="margin-top: 1em">--no-down do not look at admin
or opr status of interfaces</p>

<p style="margin-top: 1em">--show-op-down show interfaces
which are operatively down</p>

<p style="margin-top: 1em">--zero-speed=spd use this speed
in bits-per-second as the interface <br>
speed for all interfaces that return a speed of 0 <br>
via ifSpeed/ifHighSpeed. 100Mbps = 100000000</p>

<p style="margin-top: 1em">--subdirs=format give each
router its own subdirectory, naming each per <br>
&quot;format&quot;, in which HOSTNAME and SNMPNAME will be
<br>
replaced by the values of those items -- for instance, <br>
--subdirs=HOSTNAME or --subdirs=&quot;HOSTNAME
(SNMPNAME)&quot;</p>

<p style="margin-top: 1em">--noreversedns do not reverse
lookup ip numbers</p>

<p style="margin-top: 1em">--community=cmty Set the default
community string to &quot;cmty&quot; instead of <br>
&quot;public&quot;.</p>

<p style="margin-top: 1em">--enable-ipv6 Enable IPv6
support, if the required libraries are <br>
present. Numeric IPv6 addresses must be enclosed <br>
in square brackets, e.g. public@[2001:760:4::1]:161</p>

<p style="margin-top: 1em">--use-16bit Use 16bit SNMP
request IDs to query all routers.</p>


<p style="margin-top: 1em">--snmp-options=:[&lt;port&gt;][:[&lt;tmout&gt;][:[&lt;retr&gt;][:[&lt;backoff&gt;][:&lt;ver&gt;]]]]</p>

<p style="margin-top: 1em">Specify default SNMP options to
be appended to all <br>
routers following. Individual fields can be empty. <br>
Routers following might override some or all of the <br>
options given to --snmp-options.</p>

<p style="margin-top: 1em">--dns-domain=domain <br>
Specifies a domain to append to the name of all <br>
routers following.</p>

<p style="margin-top: 1em">--nointerfaces Don&rsquo;t do
generate any configuration lines for interfaces, <br>
skip the step of gathering interface information and <br>
don&rsquo;t run any interface template code.</p>

<p style="margin-top: 1em">--interfaces Generate
configuration lines for interfaces (this is the <br>
default). The main purpose of this option is to negate <br>
an --nointerfaces appearing earlier on the command line.</p>

<p style="margin-top: 1em">--help brief help message <br>
--man full documentation <br>
--version print the version of cfgmaker</p>

<p style="margin-top: 1em">--output=file output filename
default is STDOUT</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Cfgmaker creates MRTG configuration files based on
information pulled from a router or another SNMP manageable
device.</p>

<p style="margin-top: 1em">[community@]router</p>

<p style="margin-top: 1em">Community is the community name
of the device you want to create a configuration for. If not
specified, it defaults to &rsquo;public&rsquo;; you might
want to try this first if you do not <br>
know the community name of a device. If you are using the
wrong community name you will get no response from the
device.</p>

<p style="margin-top: 1em">Router is the DNS name or the IP
number of an SNMP-managable device. Following the name you
can specify 6 further options separated by colons. The full
syntax looks like this:</p>


<p style="margin-top: 1em">router[:[prt][:[tmout][:[retr][:[backoff][:vers]]]]]</p>

<p style="margin-top: 1em">Of special interest may be the
last parameter, vers. If you set this to &rsquo;2&rsquo;
then your device will be queried with SNMP version 2
requests. This allows you to poll the 64 bit <br>
traffic counters in the device and will thus work much
better with fast interfaces (no more counter overrun). Note
that the order in which the routers are specified on the
<br>
command line do matter as the same order is used when the
configuration file is generated. The first specified router
has it&rsquo;s configuration lines genrated first, followed
by <br>
the lines belonging to the next router and so on.</p>

<p style="margin-top: 1em">Note that the first line of the
generated cfg file will contain all the commandline options
you used for generating it. This is to allow for the easy
&rsquo;regeneration&rsquo; in case you <br>
want to add newhosts or make some other global change.</p>

<p style="margin-top: 1em">Configuration <br>
Except for the --output and --global options, all options
affect only the routers following them on the command line.
If an option specified earlier on the command line <br>
reappears later on the command line with another value, the
new value overrides the old value as far as remaining
routers are concerned. This way options might be tailored
for <br>
groups of routers or for individual routers.</p>

<p style="margin-top: 1em">See --output and --global for
how their behaviour is affected by where or how many times
they appear on the command line.</p>

<p style="margin-top: 1em">See the Examples below on how to
set an option differently for multiple routers.</p>

<p style="margin-top: 1em">--help <br>
Print a brief help message and exit.</p>

<p style="margin-top: 1em">--man <br>
Prints the manual page and exits.</p>

<p style="margin-top: 1em">--version <br>
Print the version of cfgmaker. This should match the version
of MRTG for which config files are being created.</p>

<p style="margin-top: 1em">--ifref nr|ip|eth|descr|name
<br>
Select the interface identification method. Default is nr
which identifies the router interfaces by their number.
Unfortunately the interface numbering scheme in an SNMP <br>
tree can change. Some routers change their numbering when
new interfaces are added, others change thier numbering
every full moon just for fun.</p>

<p style="margin-top: 1em">To work around this sad problem
MRTG can identify interfaces by 4 other properties. None of
these works for all interfaces, but you should be able to
find one which does fine <br>
for you. Note that especially ethernet addrsses can be
problematic as some routers have the same ethernet address
on most of their interface cards.</p>

<p style="margin-top: 1em">Select ip to identify the
interface by its IP number. Use eth to use the ethernet
address for identification. Use descr to use the Interface
description. Or use name to use <br>
the Interface name.</p>

<p style="margin-top: 1em">You can specify multiple
properties if you wish, separated by commas. In this case,
cfgmaker will use the first item in the list which can
provide unique identification. <br>
This allows you to specify, for example, to use IP address
and to use ifName if this is not defined: <br>
--ifref ip,name</p>

<p style="margin-top: 1em">If your chosen method does not
allow unique interface identification on the device you are
querying, cfgmaker will tell you about it.</p>

<p style="margin-top: 1em">--ifdesc
nr|ip|eth|descr|name|type|alias <br>
Select what to use as the description of the interface. The
description appears in the &quot;Title[]&quot; property for
the target as well as the text header in the HTML code
defined <br>
in the target&rsquo;s &quot;PageTop[]&quot;. Default is to
use nr which is just the interface number which isn&rsquo;t
always useful to the viewer of the graphs.</p>

<p style="margin-top: 1em">There are 6 other properties
which could be used. Use ip if you want to use the
interface&rsquo;s IP-address. Use eth if you want to use the
interface&rsquo;s ethernet address. If you <br>
want a better description, you can use either descr, name or
alias. Exactly what each of these do varies between
different equipment so you might need to experiment. For
<br>
instance, for a serial interface on a Cisco router running
IOS using name might result in &quot;S0&quot; being the
interface description , descr might result in
&quot;Serial0&quot; and alias <br>
might result in &quot;Link to HQ&quot; (provided that is
what is used as the interface&rsquo;s
&quot;description&quot; in the router&rsquo;s
configuration).</p>

<p style="margin-top: 1em">Finally, if you want to describe
the interface by it&rsquo;s Btype (i.e
&quot;ethernetCSMA&quot;, &quot;propPointtoPoint&quot; etc)
you can use type.</p>

<p style="margin-top: 1em">You can specify multiple
properties if you wish, separated by commas. In this case,
cfgmaker will use the first item in the list which is
available for this interface. This <br>
allows you to specify, for example, to use any of the
different aliases in order of preference.</p>

<p style="margin-top: 1em">--if-filter
&rsquo;filter-expression&rsquo; <br>
First of all, this is under some development and is
experimental.</p>

<p style="margin-top: 1em">Use this if you want to have
better control over what interfaces gets included into the
configuration. The filter-expression is evaluated as a piece
of Perl code and is <br>
expected to return a truth value. If true, include the
interface and if false, exclude the interface.</p>

<p style="margin-top: 1em">For a further discussion on how
these filters work, see the section &quot;Details on
Filters&quot; below.</p>

<p style="margin-top: 1em">--if-template template-file <br>
First of all, this is under some development and is
experimental.</p>

<p style="margin-top: 1em">Use this if you want to control
what the line for each target should look like in the
configuration file. The contents of the file template-file
will be evaluated as a Perl <br>
program which generates the lines using certain variables
for input and output.</p>

<p style="margin-top: 1em">For a further discussion on how
these templates work, see the section &quot;Details on
Temaplates&quot; below.</p>

<p style="margin-top: 1em">--host-template template-file
<br>
First of all, this is under some development and is
experimental.</p>

<p style="margin-top: 1em">Use this if you want to have
some extra targets related to the host itself such as CPU
utilization, ping response time to the host, number of busy
modems etc. The contents <br>
of the file template-file will be evaluated once per host as
a Perl program which generates the lines using certain
variables for input and output.</p>

<p style="margin-top: 1em">For a further discussion on how
these templates work, see the section &quot;Details on
Templates&quot; below.</p>

<p style="margin-top: 1em">--community community-string
<br>
Use this to set the community for the routers following on
the command line to community-string. Individual routers
might overrride this community string by using the syntax
<br>
community@router.</p>

<p style="margin-top: 1em">--enable-ipv6 <br>
This option enables IPv6 support. It requires the
appropriate perl modules; if they are not found then IPv6 is
disabled (see the ipv6 documentation).</p>

<p style="margin-top: 1em">cfgmaker will use IPv6 or IPv4
depending on the target. If the target is a numeric address,
the protocol depends on the type of address. If the target
is a hostname, cfgmaker <br>
will try to resolve the name first to an IPv6 address then
to an IPv4 address.</p>

<p style="margin-top: 1em">IPv6 numeric addresses must be
specified between square braces.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">cfgmaker --enable-ipv6
[2001:760:4::1]:165:::2</p>

<p style="margin-top: 1em">If the target has both an IPv6
address and an IPv4 address with the same hostname, cfgmaker
first queries the target using IPv6 and falls back to IPv4
if it fails. This is <br>
useful for targets which don&rsquo;t support SNMP over
IPv6.</p>

<p style="margin-top: 1em">--use-16bit <br>
This option forces the use of 16bit SNMP request IDs. Some
broken SNMP agents do not accept 32bit request IDs. Try to
avoid this option as much as possible, complain to <br>
your agent vendor instead.</p>

<p style="margin-top: 1em">--snmp-options
:[port][:[timeout][:[retries][:[backoff][:version]]]] <br>
Use this to set the default SNMP options for all routers
following on the command line. Individual values might be
omitted as well as trailing colons. Note that routers <br>
might override individual (or all) values specified by
--snmp-options by using the syntax</p>


<p style="margin-top: 1em">router[:[port][:[timeout][:[retries][:[backoff][:version]]]]]</p>

<p style="margin-top: 1em">--global &quot;bla: abc&quot;
<br>
Use this to add global options to the generated config file.
You can call --global several times to add multiple options.
The line will appear in the configuration just <br>
before the config for the next router appearing on the
command line.</p>

<p style="margin-top: 1em">--global &quot;workdir:
/home/mrtg&quot;</p>

<p style="margin-top: 1em">If you want some default Options
you might want to put</p>

<p style="margin-top: 1em">--global &quot;options[_]:
growright,bits&quot;</p>

<p style="margin-top: 1em">Specifying --global after the
last router on the command line will create a line in the
configuration file which will appear after all the
routers.</p>

<p style="margin-top: 1em">--noreversedns <br>
Do not try to reverse lookup IP numbers ... a must for DNS
free environments.</p>

<p style="margin-top: 1em">--no-down <br>
Normally cfgmaker will not include interfaces which are
marked anything but administratively and operationally UP.
With this switch you get them all.</p>

<p style="margin-top: 1em">--show-op-down <br>
Include interfaces which are operatively down.</p>

<p style="margin-top: 1em">--zero-speed speed <br>
Assign this speed in bits-per-second to all interfaces which
return 0 for ifSpeed and ifHighSpeed. Some switches, notably
Foundry equipment, return a speed of zero for some <br>
interfaces. For example, to have all interfaces reporting
zero set to 100Mbps, use --zero-speed=100000000.</p>

<p style="margin-top: 1em">--subdirs format <br>
Give each router its own subdirectory for the HTML and
graphics (or .rrd) files. The directory name is the given
format string with a couple of pattern replacements. The
<br>
string &quot;HOSTNAME&quot; will be replaced by the hostname
of the router (however you specified it on the cfgmaker
commandline -- it may be an actual hostname or just an IP
address), <br>
and &quot;SNMPNAME&quot; will be replaced with the
device&rsquo;s idea of its own name (the same name that
appears on the right side of the &quot;Title&quot; lines).
For instance, a call like:</p>

<p style="margin-top: 1em">cfgmaker
--subdirs=HOSTNAME__SNMPNAME public@10.10.0.18</p>

<p style="margin-top: 1em">would result in the generation
of lines looking something like:</p>

<p style="margin-top: 1em">Directory[10.10.0.18_1]:
10.10.0.18__fp2200-bothrip-1.3</p>

<p style="margin-top: 1em">--output file <br>
Write the output from cfgmaker into the file file. The
default is to use &quot;STDOUT&quot;. --output is expected
to appear only once on the command line. If used multiple
times, the <br>
file specified by the last --output will be used.</p>

<p style="margin-top: 1em">--nointerfaces <br>
Don&rsquo;t generate configuration lines for interfaces.</p>

<p style="margin-top: 1em">This makes cfgmaker skip all
steps related to interfaces which means it will not do any
polling of the router to retrieve interface information
which speeds up the execution <br>
of cfgmaker and it will neither run any interface
templates.</p>

<p style="margin-top: 1em">--interfaces <br>
This makes cfgmaker generate configuration lines for
interfaces (the default behaviour).</p>

<p style="margin-top: 1em">The main usage of this option is
to negate an --nointerfaces appearing earlier on the command
line.</p>

<p style="margin-top: 1em">SNMP V3 Options <br>
Cfgmaker supports SNMP V3 using the Net:SNMP perl module.
There are optional parameters affecting SNMP operation.</p>

<p style="margin-top: 1em">--enablesnmpv3 {yes|no} <br>
The --enablesnmpv3 option is an optional flag to check for
the presence of the Net::SNMP libraries. Cfgmaker will try
to determine whether this flag is required and will set <br>
the values automatically.</p>

<p style="margin-top: 1em">SNMPv3 Arguments</p>

<p style="margin-top: 1em">A SNMP context is a collection
of management information accessible by a SNMP entity. An
item of management information may exist in more than one
context and a SNMP entity <br>
potentially has access to many contexts. The combination of
a contextEngineID and a contextName unambiguously identifies
a context within an administrative domain. In a SNMPv3 <br>
message, the contextEngineID and contextName are included as
part of the scopedPDU. All methods that generate a SNMP
message optionally take a --contextengineid and <br>
--contextname argument to configure these fields.</p>

<p style="margin-top: 1em">Context Engine ID <br>
The --contextengineid argument expects a hexadecimal string
representing the desired contextEngineID. The string must be
10 to 64 characters (5 to 32 octets) long and can be <br>
prefixed with an optional &quot;0x&quot;. Once the
--contextengineid is specified it stays with the object
until it is changed again or reset to default by passing in
the undefined <br>
value. By default, the contextEngineID is set to match the
authoritativeEngineID of the authoritative SNMP engine.</p>

<p style="margin-top: 1em">Context Name <br>
The contextName is passed as a string which must be 0 to 32
octets in length using the --contextname argument. The
contextName stays with the object until it is changed. <br>
The contextName defaults to an empty string which represents
the &quot;default&quot; context.</p>

<p style="margin-top: 1em">User-based Security Model
Arguments</p>

<p style="margin-top: 1em">The User-based Security Model
(USM) used by SNMPv3 requires that a securityName be
specified using the --username argument. The creation of a
Net::SNMP object with the version <br>
set to SNMPv3 will fail if the --username argument is not
present. The --username argument expects a string 1 to 32
octets in length.</p>

<p style="margin-top: 1em">Different levels of security are
allowed by the User-based Security Model which address
authentication and privacy concerns. A SNMPv3 target will
derive the security level <br>
(securityLevel) based on which of the following arguments
are specified.</p>

<p style="margin-top: 1em">By default a securityLevel of
&rsquo;noAuthNoPriv&rsquo; is assumed. If the --authkey or
--authpassword arguments are specified, the securityLevel
becomes &rsquo;authNoPriv&rsquo;. The --authpassword <br>
argument expects a string which is at least 1 octet in
length. Optionally, the --authkey argument can be used so
that a plain text password does not have to be specified in
a <br>
script. The --authkey argument expects a hexadecimal string
produced by localizing the password with the
authoritativeEngineID for the specific destination device.
The <br>
&quot;snmpkey&quot; utility included with the Net::SNMP
distribution can be used to create the hexadecimal string
(see snmpkey).</p>

<p style="margin-top: 1em">Two different hash algorithms
are defined by SNMPv3 which can be used by the Security
Model for authentication. These algorithms are HMAC-MD5-96
&quot;MD5&quot; (RFC 1321) and HMAC-SHA-96 <br>
&quot;SHA-1&quot; (NIST FIPS PUB 180-1). The default
algorithm used by the module is HMAC-MD5-96. This behavior
can be changed by using the --authprotocol argument. This
argument <br>
expects either the string &rsquo;md5&rsquo; or
&rsquo;sha&rsquo; to be passed to modify the hash
algorithm.</p>

<p style="margin-top: 1em">By specifying the arguments
--privkey or --privpassword the securityLevel associated
with the object becomes &rsquo;authPriv&rsquo;. According to
SNMPv3, privacy requires the use of <br>
authentication. Therefore, if either of these two arguments
are present and the --authkey or --authpassword arguments
are missing, the creation of the object fails. The <br>
--privkey and --privpassword arguments expect the same input
as the --authkey and --authpassword arguments
respectively.</p>

<p style="margin-top: 1em">The User-based Security Model
described in RFC 3414 defines a single encryption protocol
to be used for privacy. This protocol, CBC-DES
&quot;DES&quot; (NIST FIPS PUB 46-1), is used by <br>
default or if the string &rsquo;des&rsquo; is passed to the
--privprotocol argument. By working with the Extended
Security Options Consortium http://www.snmp.com/eso/, the
module also <br>
supports additional protocols which have been defined in
draft specifications. The draft
http://www.snmp.com/eso/draft-reeder-snmpv3-usm-3desede-00.txt
defines the support of <br>
CBC-3DES-EDE &quot;Triple-DES&quot; (NIST FIPS 46-3) in the
User-based Security Model. This protocol can be selected
using the --privprotocol argument with the string
&rsquo;3desede&rsquo;. The <br>
draft
http://www.snmp.com/eso/draft-blumenthal-aes-usm-04.txt
describes the use of CFB128-AES-128/192/256 &quot;AES&quot;
(NIST FIPS PUB 197) in the USM. The three AES encryption
<br>
protocols, differentiated by their key sizes, can be
selected by passing &rsquo;aescfb128&rsquo;,
&rsquo;aescfb192&rsquo;, or &rsquo;aescfb256&rsquo; to the
-privprotocol argument.</p>

<p style="margin-top: 1em">Details on Filters <br>
The purpose of the filters is to decide which interfaces to
accept and which interfaces to reject. This decision is done
for each interface by evaluating the filter expression <br>
as a piece of Perl code and investigating the result of the
evaluation. If true, accept the interface otherwise reject
it.</p>

<p style="margin-top: 1em">When working with filters,
remember that Perl has it&rsquo;s own idea of what truth and
false is. The empty string &quot;&quot; and the string
&quot;0&quot; are false, all other strings are true. This
<br>
further imples that any integer value of 0 is false as well
as any undef value. It also implies that all references are
considered true.</p>

<p style="margin-top: 1em">As the filter is evaluated as a
Perl expression, several useful constructs in Perl are worth
mentioning:</p>

<p style="margin-top: 1em">Expressions might be grouped by
using parentheses &quot;()&quot;. Expressions might be
combined using boolean operators such as the following:</p>

<p style="margin-top: 1em">&quot;and&quot; (equivalent with
&quot;&amp;&amp;&quot;) <br>
Boolean &quot;and&quot; of the two expressions, is only true
if both expressions are true. Example: expression1 and
expression2</p>

<p style="margin-top: 1em">&quot;or&quot; (equivalent with
&quot;||&quot;) <br>
Boolean &quot;or&quot; of the two expressions, is true if
either or both expressions are true. Example: expression1 or
expression2</p>

<p style="margin-top: 1em">&quot;not&quot; (equivalent with
&quot;!&quot;) <br>
Boolean negation of a single expression. Example: not
expression . Yet another example: !expression</p>

<p style="margin-top: 1em">(For more details on this I
recommend a book on Perl)</p>

<p style="margin-top: 1em">Predefined Filter Variables</p>

<p style="margin-top: 1em">To facilitate, there are a
number of predefined values available to use in the filter.
Note that these variables are also available when templates
interfaces are evaluated (but <br>
not host templates).</p>

<p style="margin-top: 1em">Caveat: All these
variables&rsquo; names begin with a dollar sign ($), which
is a syntactic requirement for scalar variables in Perl. The
danger here is that the dollar sign in many <br>
shells is an active character (often used for shell
variables exactly as in Perl variables) so it is important
to ensure that the Perl expression isn&rsquo;t evaluated by
the command <br>
line shell as shell code before being passed to cfgmaker as
command line arguments. In shells like Bourne shell, ksh
shell or bash shell, placing the entire expression within
<br>
single qoutes will avoid such accidental evaluation:</p>


<p style="margin-top: 1em">&rsquo;--if-filter=($default_iftype
&amp;&amp; $if_admin)&rsquo;</p>

<p style="margin-top: 1em">$if_type <br>
This is an integer specifying the interface type as per the
SNMP standards and as reported by the polled device. A
complete list of interface types would be impractical for
<br>
this document , but there are a number predefined varables
below. Normally, cfgmaker puts in the target&rsquo;s PageTop
this iftype value within paranthesis after the name of the
<br>
interface type. (e.g &quot;propPointToPointSerial
(22)&quot;).</p>

<p style="margin-top: 1em">Here&rsquo;s a list of some of
the most common interface types by number:</p>

<p style="margin-top: 1em">6 ethernetCsmacd <br>
7 iso88023Csmacd <br>
9 iso88025TokenRing <br>
15 fddi <br>
19 E1 <br>
20 basicISDN <br>
21 primaryISDN <br>
22 propPointToPointSerial <br>
23 ppp <br>
24 softwareLoopback <br>
30 ds3 <br>
32 frame-relay <br>
33 rs232 <br>
37 atm <br>
39 sonet <br>
44 frameRelayService <br>
46 hssi <br>
49 aal5 <br>
53 propVirtual <br>
62 Fast Ethernet (100BaseT) <br>
63 ISDN &amp; X.25 <br>
69 Full Duplex Fast Ethernet (100BaseFX) <br>
94 Asymetric Digital Subscriber Loop (ADSL) <br>
117 Gigabit Ethernet <br>
134 ATM Sub Interface</p>

<p style="margin-top: 1em">$default <br>
True if and only if cfgmaker normally should accepted the
interface based on the interfaces administrative and
operational state (taking the flags --no-down and <br>
--show-op-down into account) and it&rsquo;s type (and a few
other things).</p>

<p style="margin-top: 1em">$default_ifstate <br>
True if and only if cfgmaker would have accepted the
interface based on it&rsquo;s operational and administrative
states (also taking into account the presence of the flags
<br>
--no-down and --show-op-down).</p>

<p style="margin-top: 1em">$default_iftype <br>
True if and only if cfgmaker would have accepted the
interface based on it&rsquo;s type (and a few type specific
details in addition).</p>

<p style="margin-top: 1em">$if_admin <br>
True if and only if the interface is in an adminstrative up
state.</p>

<p style="margin-top: 1em">$if_oper <br>
True if and only if the interface is in an operational up
state.</p>

<p style="margin-top: 1em">A number of variables are also
predefined to easily decide if an interface belong to a
certain cathegory or not. Below is all those variables
listed together with which if_type <br>
numbers each variable will be true for. Note that some
variables refer to other variables as well.</p>

<p style="margin-top: 1em">$if_is_ethernet <br>
True for ethernet interfaces (nr 6, 7, 26, 62, 69 and
117).</p>

<p style="margin-top: 1em">$if_is_isdn <br>
True for various ISDN interface types (nr 20, 21, 63, 75, 76
and 77)</p>

<p style="margin-top: 1em">$if_is_dialup <br>
True for dial-up interfaces such as PPP as well as ISDN. (nr
23, 81, 82 and 108 in addition to the numbers of
$if_is_isdn).</p>

<p style="margin-top: 1em">$if_is_atm <br>
True for miscellaneous ATM related interface types (nr 37,
49, 107, 105, 106, 114 and 134).</p>

<p style="margin-top: 1em">$if_is_wan <br>
True for WAN interfaces point to point, Frame Relay and High
Speed Serial ( 22,32,44,46)</p>

<p style="margin-top: 1em">$if_is_lan <br>
True for LAN interfaces (8, 9, 11, 15, 26, 55, 59, 60 and
115 in addition to the numbers of $if_is_ethernet).</p>

<p style="margin-top: 1em">$if_is_dsl <br>
True for ADSL, RDSL, HDSL and SDSL (nr 94, 95, 96, 97)</p>

<p style="margin-top: 1em">$if_is_loopback <br>
True for software loopback interfaces (nr 24)</p>

<p style="margin-top: 1em">$if_is_ciscovlan <br>
True for Cisco VLAN interfaces (interfaces with the word
Vlan or VLAN in their ifdescs)</p>

<p style="margin-top: 1em">$if_vlan_id <br>
Returns the vlan id associated with a specific port on Cisco
Catalyst switches under both Catalyst OS and IOS, and 3Com
switches. If it is not a vlan interface, will return <br>
undef.</p>

<p style="margin-top: 1em">$if_cisco_trunk <br>
Returns the trunking state of a specific port on Cisco
Catalyst switches under both Catalyst OS and IOS. Returns
&quot;1&quot; if the interface is a trunk, undef
otherwise.</p>

<p style="margin-top: 1em">$if_MTU <br>
Returns the Maximum Transfer Unit associated with a specific
port.</p>

<p style="margin-top: 1em">Besides that, you can also use
the variables defined for templates below. Further, all the
variables available in cfgmaker is at the scripts disposal
even if the use of such <br>
features is discouraged. More &quot;shortcuts&quot; in the
form of variables and functions will be made available in
the future instead.</p>

<p style="margin-top: 1em">Examples on Filters</p>

<p style="margin-top: 1em">The following filter will not
affect which interfaces get&rsquo;s included or excluded, it
will make cfgmaker behave as normally.</p>


<p style="margin-top: 1em">&rsquo;--if-filter=$default&rsquo;</p>

<p style="margin-top: 1em">The following filter will make
cfgmaker exclude PPP (23) interfaces:</p>

<p style="margin-top: 1em">&rsquo;--if-filter=$default
&amp;&amp; $if_type!=23&rsquo;</p>

<p style="margin-top: 1em">The following filter will make
cfgmaker behave as usual except that it will consider the
operational state of an interface irrelevant but still
reject all interfaces which are <br>
administratively down.</p>

<p style="margin-top: 1em">&rsquo;--if-filter=$if_admin
&amp;&amp; $default_iftype&rsquo;</p>

<p style="margin-top: 1em">Details on Templates <br>
The contents of the template files are evaluated as a Perl
program. A number or Perl variables are available for the
program to read and others are used to be written to.</p>

<p style="margin-top: 1em">As quite a few of the predefined
variables has values which are are supposed to be used in
HTML code some of them have an &quot;HTML-escaped&quot;
variant, e.g $html_syslocation is the <br>
HTML escaped variant of $syslocation. The HTML escaping
means that the chars &quot;&lt;&quot;, &quot;&gt;&quot; and
&quot;&amp;&quot; are replaced by &quot;&amp;lt;&quot;,
&quot;&amp;gt;&quot; and &quot;&amp;amp;&quot; and that
newlines embedded in the string <br>
are prepended with &quot;&lt;BR&gt;&quot; and appended with
a space character (if a newline is last in the string it is
not touched).</p>

<p style="margin-top: 1em">Writable Template Variables</p>

<p style="margin-top: 1em">These are the variables
available to store the configuration lines in. Some of them
are initialized prior to the evaluation of the template but
such content normally is comments <br>
for inclusion in the final configuration file so those
variables might be reset to the empty string in the template
code to eliminate the comments. The other way around is also
<br>
possible, the contents of these variables might be extended
with further information for various reasons such as
debugging etc.</p>

<p style="margin-top: 1em">Once the template has been
evaluated, the following happens: if the template is a
interface template and the actual interface for some reason
is rejected and thus needs to be <br>
commented out, all the lines in the variable $target_lines
are turned into comments by adding a hash mark
(&quot;#&quot;) at their beginning. Then all the variables
$head_lines, <br>
$problem_lines , $target_lines and $separator_lines are
concatenated together to form the lines to add to the
configuration file.</p>

<p style="margin-top: 1em">$target_lines <br>
This variable is the placeholder for the configuration lines
created by the template. $target_lines is predefined to be
empty when the template code is evaluated.</p>

<p style="margin-top: 1em">$head_lines <br>
This variable is intended to be the placeholder for the
comment line appearing just before the target in the
configuration file. It is initialized with that comment line
<br>
before the evaluation of the template code and if the
template doesn&rsquo;t modify $head_lines during evaluation,
the comment will look like usual in the config file.</p>

<p style="margin-top: 1em">$problem_lines <br>
This variable is intended to be the placholder for the
comment lines describing any problems which might have been
encountered when trying to add the target into the <br>
configuration. For host templates it&rsquo;s normally not
used and for those it&rsquo;s predefined as the empty
string. For interface templates $problem_lines is predefined
with the <br>
error description comments which cfgmaker normally would use
for rejected interfaces or as the empty string for accepted
interfaces.</p>

<p style="margin-top: 1em">It is possible to test against
$problem_lines to find out if an interface will be included
or rejected but this is not recommended. Test against $if_ok
instead.</p>

<p style="margin-top: 1em">$separator_lines <br>
This variable is the placeholder for the string to use as
the separator between the code for individual targets. The
contents of this variable is put after each target (so <br>
the lines will appear after the end of the last target in
the config as well).</p>

<p style="margin-top: 1em">Predefined Template
Variables</p>

<p style="margin-top: 1em">All the variables below are
available for interface templates to use. For host
templates, only those listed under &quot;Host and System
Variables&quot; are available.</p>

<p style="margin-top: 1em">For interface templates the
variables listed under &quot;Predefined Filter
Variables&quot; are also available.</p>

<p style="margin-top: 1em">Host and System Variables</p>

<p style="margin-top: 1em">$router_name <br>
This is the fully qualified name for the router. It is
affected by the following items on the command line: the
router name itself and --dns-domain.</p>

<p style="margin-top: 1em">$router_connect <br>
This is the reference string for the router being polled. It
is on the form community@router possibly followed by some
snmp options. It is affected by the following items <br>
on the command line: the router name itself, --community,
--snmp-options and --dns-domain. (There&rsquo;s no HTML
escaped variant available)</p>

<p style="margin-top: 1em">$directory_name <br>
This variable should contain the directory name as cfgmaker
normally would use as the value for the
&quot;Directory[]&quot; directive. The value is determined
by the --subdirs command <br>
line option. If --subdirs isn&rsquo;t specified
$directory_name will be the empty string. (There&rsquo;s no
HTML escaped variant available)</p>

<p style="margin-top: 1em">$syscontact <br>
This variable is the router&rsquo;s SNMP sysContact value.
(HTML escaped variant: $html_syscontact)</p>

<p style="margin-top: 1em">$sysname <br>
This variable is the router&rsquo;s SNMP sysName value. (No
HTML escaped variant available)</p>

<p style="margin-top: 1em">$syslocation <br>
This variable is the router&rsquo;s SNMP sysLocation value.
(HTML escaped variant: $html_syslocation)</p>

<p style="margin-top: 1em">$sysdescr <br>
This variable is the router&rsquo;s SNMP sysDescr value. It
is normally not used by cfgmaker but might be useful in a
template. (HTML escaped variant: $html_sysdescr)</p>

<p style="margin-top: 1em">Interface Target Related
Variables</p>

<p style="margin-top: 1em">$target_name <br>
This is what cfgmaker normally would use as the the name of
the target. The target name is what is found within the
square brackets, &quot;[]&quot;, for target directives.
(There&rsquo;s <br>
no HTML escaped variant available)</p>

<p style="margin-top: 1em">$if_ref <br>
This the reference string for the interface. It is expected
to be used in the &quot;Target[xyz]&quot; directive to
distinguish what interface to use. The value of this
variable is <br>
affected by the --ifref command line option. It is normally
used together with $router_connect. (There&rsquo;s no HTML
escaped variant available)</p>

<p style="margin-top: 1em">$if_ok <br>
This variable is true if the interface is going to be
included into the configuration file, otherwise false.
Don&rsquo;t test against other variables such as
$problem_lines to <br>
find out if an interface will be rejected or not, use this
$if_ok instead.</p>

<p style="margin-top: 1em">$default_target_lines <br>
This variable contains all the target lines which cfgmaker
by default outputs for this interface. It&rsquo;s useful if
you want to have the &quot;standard target&quot; but want to
add some <br>
extra lines to it by using a template.</p>

<p style="margin-top: 1em">By default cfgmaker uses the
following directives for each target it generates: Target[],
SetEnv[], MaxBytes[], Title[], PageTop[] and if there is any
directory specified also <br>
the Directory[] directive.</p>

<p style="margin-top: 1em">To facilitate the creation of
templates which generates target configs which are similar
to the default one, each of the above mentioned directive
lines have a corresponding <br>
variable containing the line as cfgmaker would have output
it by default.</p>

<p style="margin-top: 1em">Note that none of these have a
HTML escaped variant, text in them is HTML escaped where
needed. Also note that they do not have any newline at the
end.</p>

<p style="margin-top: 1em">$default_target_directive <br>
This variable contains the default string for the Target[]
directive line.</p>

<p style="margin-top: 1em">$default_setenv_directive <br>
This variable contains the default string for the SetEnv[]
directive line.</p>

<p style="margin-top: 1em">$default_directory_directive
<br>
This variable contains the default string for the
Directory[] directive line which means it is an empty string
(with no newline) if there&rsquo;s no directory.</p>

<p style="margin-top: 1em">$default_maxbytes_directive <br>
This variable contains the default string for the MaxBytes[]
directive line.</p>

<p style="margin-top: 1em">$default_title_directive <br>
This variable contains the default string for the Title[]
directive line.</p>

<p style="margin-top: 1em">$default_pagetop_directive <br>
This variable contains the default string for the PageTop[]
directive lines.</p>

<p style="margin-top: 1em">Interface Network Configuration
Variables</p>

<p style="margin-top: 1em">$if_ip <br>
This variable should contain the IP-address of the
interface, if any has been assigned to it. (There&rsquo;s no
HTML escaped variant available)</p>

<p style="margin-top: 1em">$ifindex <br>
This variable is the SNMP ifIndex for the interface which
per definition always is an integer. (There&rsquo;s no HTML
escaped variant available)</p>

<p style="margin-top: 1em">$if_index <br>
Equivalent with $ifindex.</p>

<p style="margin-top: 1em">$if_eth <br>
Contains the ethernet address of the interface, if any.
(There&rsquo;s no HTML escaped variant available)</p>

<p style="margin-top: 1em">$if_speed <br>
This variable is the speed in bytes/second (with prefixes).
(There&rsquo;s no HTML escaped variant available)</p>

<p style="margin-top: 1em">$if_speed_str <br>
This variable is a cooked speed description which is either
in bits or bytes depending on wether or not the bits option
is active and also with the proper prefix for the <br>
speed (k, M, G etc). (No HTML escaped variant available)</p>

<p style="margin-top: 1em">$if_type_desc <br>
This variable is a textual description of the interface
type. (HTML escaped variant: $html_if_type_desc)</p>

<p style="margin-top: 1em">$if_type_num <br>
This variable the integer value corresponding to the
interface type (for a listing for the value for the more
common interface types, see the section DETAILS ON FILTERS
<br>
above). (No HTML escaped variant available)</p>

<p style="margin-top: 1em">$if_dns_name <br>
This is the DNS name for the interface. (No HTML escaped
variant available)</p>

<p style="margin-top: 1em">Interface Name, Description and
Alias Variables</p>

<p style="margin-top: 1em">It might seem confusing with
both Name, Description and Alias in this context and to some
extent it is. Name and Description are usually supported on
most equipment but how they <br>
are used varies, both between manufacturers as well as
between different cathegories of equipment from the same
manufacturer. The Alias is at least supported by Cisco IOS,
and <br>
that variable contains whatever is used in the IOS statement
called &quot;description&quot; for the interface (not to be
confused with the SNMP variables for Description).</p>

<p style="margin-top: 1em">For better control from the
command line consider $if_title_desc which contents are
controlled by the --if-descr command line option.</p>

<p style="margin-top: 1em">$if_snmp_descr <br>
This variable should contain the &quot;raw&quot; description
of the interface as determined by the SNMP polling of the
router. (HTML escaped variant: $html_if_snmp_descr)</p>

<p style="margin-top: 1em">$if_snmp_name <br>
The &quot;raw&quot; name for the interface as provided by
SNMP polling. (HTML escaped variant: $html_if_snmp_name)</p>

<p style="margin-top: 1em">$if_snmp_alias <br>
The &quot;raw&quot; ifAlias for the interface as provided by
SNMP polling. (HTML escaped variant:
$html_if_snmp_alias)</p>

<p style="margin-top: 1em">$if_cisco_descr <br>
The &quot;raw&quot; CiscolocIfDescr for the interface as
provided by SNMP polling. (HTML escaped variant:
$html_if_cisco_descr)</p>

<p style="margin-top: 1em">$if_description <br>
This is the &quot;cooked&quot; description string for the
interface, taking into account the SNMP values found for the
interface&rsquo;s RDescr, ifAlias and CiscolocIfDescr. (HTML
escaped <br>
variant: $html_if_description)</p>

<p style="margin-top: 1em">$if_title <br>
The full string cfgmaker by default would have used for the
Title[] directive in the configuration as well as the
content of the topmost H1 tag in the PageTop[]. Is composed
<br>
by the contents of $desc_prefix, $if_title_desc and
$sysname.</p>

<p style="margin-top: 1em">As $if_title depends on
$if_title_desc, it is possible to indirectly control
$if_title by using the command line option --if-descr.</p>

<p style="margin-top: 1em">(HTML escaped variant:
$html_if_title)</p>

<p style="margin-top: 1em">$if_port_name <br>
If the host is a Cisco Catalyst LAN switch, this variable is
the name of that port. (No HTML escaped variant
available)</p>

<p style="margin-top: 1em">$if_pp_port_name <br>
If the host is a Nortel Passport LAN switch, this variable
is the name of that port. (No HTML escaped variant
available)</p>

<p style="margin-top: 1em">$desc_prefix <br>
This variable is a prefix of the description of what the
target is to use in the &quot;Title[]&quot; directive and in
the H1 section of the &quot;PageTop[]&quot;. Default is
&quot;Traffic analysis <br>
for &quot;. (HTML escaped variant: $html_desc_prefix)</p>

<p style="margin-top: 1em">$if_title_desc <br>
This is the description of the interface normally used by
cfgmaker as part of the variable $if_title. The latter is
used as the full string in the &quot;Title[]&quot; directove
and <br>
the H1 section in the PageTop[].</p>

<p style="margin-top: 1em">$if_title_desc is controlled by
the command line option --if-descr which indirectly controls
the contents of $if_title</p>

<p style="margin-top: 1em">(HTML escaped variant:
$html_if_title_desc)</p>

<p style="margin-top: 1em">Help Functions for Templates</p>

<p style="margin-top: 1em">The following functions exists
to facilitate the writing of host and interface
templates.</p>

<p style="margin-top: 1em">html_escape(string) <br>
html_escape() takes a string as an argument and returns a
new string where the following substitutions has been done:
the chars &quot;&lt;&quot;, &quot;&gt;&quot; and
&quot;&amp;&quot; are replaced by &quot;&amp;lt;&quot;, <br>
&quot;&amp;gt;&quot; and &quot;&amp;amp;&quot; and that
newlines embedded in the string are prepended with
&quot;&lt;BR&gt;&quot; and appended with a space character
(newlines at the end of the string are not touched).</p>


<p style="margin-top: 1em">oid_pick($router_connect,$v3opt,&quot;oid1&quot;,&quot;oid2&quot;...)
<br>
This function will try to poll each of the oids specified
until it is successful or has run out of oids. It will
return the name of the first oid that worked or undef if it
<br>
is not successful</p>

<p style="margin-top: 1em">Example Template Files</p>

<p style="margin-top: 1em">Template Example 1: Eliminating
Rejected Targets From Appearing</p>

<p style="margin-top: 1em">This template file generates
exactly the same configuration code per interface as
cfgmaker does by default, with the exception that it
eliminates all lines (comments as well as <br>
config code) for an interface if the interface happens to be
rejected.</p>

<p style="margin-top: 1em">if(not $problem_lines) <br>
{ <br>
$target_lines .= &lt;&lt;ECHO;</p>

<p style="margin-top: 1em">Target[$target_name]:
$if_ref:$router_connect <br>
SetEnv[$target_name]: MRTG_INT_IP=&quot;$if_ip&quot;
MRTG_INT_DESCR=&quot;$if_snmp_descr&quot; <br>
ECHO</p>

<p style="margin-top: 1em">if ($directory_name) { <br>
$target_lines .= &quot;Directory[$target_name]:
$directory_name0; <br>
}</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO;
<br>
MaxBytes[$target_name]: $if_speed <br>
Title[$target_name]: $html_desc_prefix$html_if_title_desc --
$sysname <br>
PageTop[$target_name]:
&lt;h1&gt;$html_desc_prefix$html_if_title_desc --
$sysname&lt;/h1&gt; <br>
&lt;div id=&quot;sysdetails&quot;&gt; <br>
&lt;table&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;System:&lt;/td&gt; <br>
&lt;td&gt;$sysname in $html_syslocation&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;Maintainer:&lt;/td&gt; <br>
&lt;td&gt;$html_syscontact&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;Description:&lt;/td&gt; <br>
&lt;td&gt;$html_if_description&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;ifType:&lt;/td&gt; <br>
&lt;td&gt;$html_if_type_desc ($if_type_num)&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;ifName:&lt;/td&gt; <br>
&lt;td&gt;$html_if_snmp_name&lt;/td&gt; <br>
&lt;/tr&gt; <br>
ECHO</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO if
defined $if_port_name; <br>
&lt;tr&gt; <br>
&lt;td&gt;Port Name:&lt;/td&gt; <br>
&lt;td&gt;$if_port_name&lt;/td&gt; <br>
&lt;/tr&gt; <br>
ECHO</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO if
defined $if_pp_port_name; <br>
&lt;tr&gt; <br>
&lt;td&gt;Port Name:&lt;/td&gt; <br>
&lt;td&gt;$if_pp_port_name&lt;/td&gt; <br>
&lt;/tr&gt; <br>
ECHO</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO;
<br>
&lt;tr&gt; <br>
&lt;td&gt;Max Speed:&lt;/td&gt; <br>
&lt;td&gt;$if_speed_str&lt;/td&gt; <br>
&lt;/tr&gt; <br>
ECHO</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO if
$if_ip; <br>
&lt;tr&gt; <br>
&lt;td&gt;Ip:&lt;/td&gt; <br>
&lt;td&gt;$if_ip ($if_dns_name)&lt;/td&gt; <br>
&lt;/tr&gt; <br>
ECHO</p>

<p style="margin-top: 1em">$target_lines .= &lt;&lt;ECHO;
<br>
&lt;/table&gt; <br>
&lt;/div&gt; <br>
ECHO <br>
} else { <br>
$head_lines=&quot;&quot;; <br>
$problem_lines=&quot;&quot;; <br>
$target_lines=&quot;&quot;; <br>
$separator_lines=&quot;&quot;; <br>
}</p>

<p style="margin-top: 1em">Template Example 2: Simplier
Version of Example 1</p>

<p style="margin-top: 1em">Example 1 was partly intended to
demonstrate how to customize the generation of interface
targets but also to provide a hint of how the variables are
used in the &quot;default&quot; <br>
template which one could consider that cfgmaker normally
uses.</p>

<p style="margin-top: 1em">If you&rsquo;re only intrested
in the easiest way of entirely eliminating those reject
interfaces, the template below would do the job as well by
using $default_target_lines.</p>

<p style="margin-top: 1em">if($if_ok) { <br>
$target_lines = $default_target_lines; <br>
} else { <br>
$head_lines=&quot;&quot;; <br>
$problem_lines=&quot;&quot;; <br>
$target_lines=&quot;&quot;; <br>
$separator_lines=&quot;&quot;; <br>
}</p>

<p style="margin-top: 1em">Template Example 3: Creating CPU
Targets for Hosts</p>

<p style="margin-top: 1em">Below is an example of a host
template.</p>

<p style="margin-top: 1em">$head_lines .= &lt;&lt;ECHO;
<br>

#---------------------------------------------------------------------
<br>
ECHO</p>

<p style="margin-top: 1em">my $target_name = $router_name .
&quot;.cpu&quot;;</p>

<p style="margin-top: 1em">$target_lines .=
&lt;&lt;ECHO;</p>

<p style="margin-top: 1em">YLegend[$target_name]:
Percentage CPU load <br>
ShortLegend[$target_name]: % <br>
Legend1[$target_name]: CPU load in % <br>
Legend2[$target_name]: <br>
Legend3[$target_name]: Max Observed CPU load <br>
Legend4[$target_name]: <br>
LegendI[$target_name]: &amp;nbsp;CPU Load: <br>
LegendO[$target_name]: <br>
WithPeak[$target_name]: ywm <br>
MaxBytes[$target_name]: 100 <br>
Options[$target_name]: growright, gauge, nopercent <br>
Title[$target_name]: $router_name CPU load <br>
Target[$target_name]:
1.3.6.1.4.1.9.2.1.58.0&amp;1.3.6.1.4.1.9.2.1.58.0:$router_connect
<br>
PageTop[$target_name]: &lt;h1&gt;$router_name CPU
load&lt;/h1&gt; <br>
&lt;div&gt; <br>
&lt;table&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;System:&lt;/td&gt; <br>
&lt;td&gt;$router_name in $html_syslocation&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;Maintainer:&lt;/td&gt; <br>
&lt;td&gt;$html_syscontact&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;Description:&lt;/td&gt; <br>
&lt;td&gt;$html_sysdescr&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;tr&gt; <br>
&lt;td&gt;Resource:&lt;/td&gt; <br>
&lt;td&gt;CPU.&lt;/td&gt; <br>
&lt;/tr&gt; <br>
&lt;/table&gt; <br>
&lt;/div&gt; <br>
ECHO</p>

<p style="margin-top: 1em">EXAMPLES <br>
The first example creates a config file for
router.place.xyz: the router has the community name public.
Interfaces get identified by their IP number. Two global
options get <br>
added to the config file. The config file gets redirected to
mrtg.conf. The &rsquo;&acute; signs at the end of the line
mean that this command should be written on a single
line.</p>

<p style="margin-top: 1em">cfgmaker --global &quot;WorkDir:
/home/tobi&quot; --global &quot;Options[_]:
growright,bits&quot; --ifref=ip public@router.place.xyz &gt;
mrtg.cfg</p>

<p style="margin-top: 1em">Note: if cfgmaker is not in your
path, but you are in the directory where cfgmaker is stored,
you can start it with ./cfgmaker</p>

<p style="margin-top: 1em">The next example creates a
config file for four devices: router1.place.xyz,
router2.place.xyz, switch1.place.xyz and switch2.place.xyz
all with the community public.</p>

<p style="margin-top: 1em">The two routers will have
--ifref set to descr whilst the two switches will use
--ifref set to name. Further the routers will use --ifdesc
set to alias and switch1.place.xyz <br>
will use --ifdesc set to descr whilst switch2.place.xyz use
name instead.</p>

<p style="margin-top: 1em">Finally, there will be two
Options lines inserted in the configuration: One will be in
the beginning, whilst the other will be inserted after the
lines related to the two routers <br>
but before those lines related to the switches.</p>

<p style="margin-top: 1em">cfgmaker --global &quot;WorkDir:
/home/tobi&quot; --global &quot;Options[_]:
growright,bits&quot; --ifref=descr --ifdesc=alias
public@router1.place.xyz public@router2.place.xyz --global
&quot;Options[_]: growright&quot; --ifref=name
--ifdesc=descr public@switch1.place.xyz --ifdesc=name
public@switch2.place.xyz &gt; mrtg.cfg</p>

<p style="margin-top: 1em">The next example demonstrates
how to use the --community, --snmp-options and --dns-domain
to make the command line simpler. All the equipment will use
the community hidden, <br>
except for the ppp-server which use community access. All
equipment uses these SNMP options: 1s timeout, 1 retry and
SNMP version 2 (backoff and port is unspecified which means
<br>
they use the default values). The exception again is the
ppp-server which uses SNMP version 1. Finally, all the
equipment is part of the domain place.xyz, except for the
ppp- <br>
server which is part of the domain remote.place.xyz. Note
that the latter is achieved simply by specifying the name of
the ppp-server to be ppp-server.remote .</p>

<p style="margin-top: 1em">cfgmaker --global &quot;WorkDir:
/home/tobi&quot; --global &quot;Options[_]:
growright,bits&quot; --dns-domain=place.xyz
--community=hidden --snmp-options=::1:1::2 router1 router2
router3 router4 router5 switch1 switch2 switch3 switch4
switch5 switch6 switch7 access@ppp-server.remote:::::1 &gt;
mrtg.cfg</p>

<p style="margin-top: 1em">SEE ALSO <br>
mrtg-reference</p>

<p style="margin-top: 1em">AUTHOR <br>
Tobias Oetiker &lt;tobi@oetiker.ch&gt; and Jakob Ilves
&lt;jakob.ilves@oracle.com&gt;</p>

<p style="margin-top: 1em">LICENSE <br>
GNU General Public License</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Cfgmaker is Copyright 2000 by Tobias Oetiker
&lt;tobi@oetiker.ch&gt;</p>

<p style="margin-top: 1em">2.17.4 2012-01-12
CFGMAKER(1)</p>
<hr>
</body>
</html>
