<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.net.path(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.net.path(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.net.path(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.net.path</b> - Finds shortest path on vector network.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, network, shortest path
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.net.path</b>
<div>&#x00A0;</div>
<b>v.net.path --help</b>
<div>&#x00A0;</div>
<b>v.net.path</b> [-<b>tgs</b>] <b>input</b>=<i>name</i>
  <b>output</b>=<i>name</i> <b>arc_layer</b>=<i>string</i>
  <b>arc_type</b>=<i>string</i>[, <i>string</i>,...]
  <b>node_layer</b>=<i>string</i> [ <b>file</b>=<i>name</i>]
  [<b>arc_column</b>=<i>string</i>] [<b>arc_backward_column</b>=<i>string</i>]
  [<b>node_column</b>=<i>string</i>] [<b>dmax</b>=<i>float</i>]
  [<b>turn_layer</b>= <i>string</i>] [<b>turn_cat_layer</b>=<i>string</i>]
  [--<b>overwrite</b>] [--<b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use turntable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use geodesic calculation for longitude-latitude locations</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Write output as original input segments, not each path as one line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_layer</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_type</b>=<i>string[,</i><i>string</i>,...]
    <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc type
    <div>&#x00A0;</div>
    Input feature type
    <div>&#x00A0;</div>
    Options: <i>line, boundary</i>
    <div>&#x00A0;</div>
    Default: <i>line,boundary</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_layer</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>file</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of file containing start and end points. If not given, read from
    stdin</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc forward/both direction(s) cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_backward_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc backward direction cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_column</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node cost column (number)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dmax</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Maximum distance to the network
    <div>&#x00A0;</div>
    If start/end are given as coordinates. If start/end point is outside this
      threshold, the path is not found and error message is printed. To speed up
      the process, keep this value as low as possible.
    <div>&#x00A0;</div>
    Default: <i>1000</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>turn_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer with turntable
    <div>&#x00A0;</div>
    Relevant only with -t flag
    <div>&#x00A0;</div>
    Default: <i>3</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>turn_cat_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Layer with unique categories used in turntable
    <div>&#x00A0;</div>
    Relevant only with -t flag
    <div>&#x00A0;</div>
    Default: <i>4</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.net.path</i> determines least costly, e.g. shortest or fastest path(s) on a
  vector network.
<div class="Pp"></div>
Costs may be either line lengths, or attributes saved in a database table. These
  attribute values are taken as costs of whole segments, not as costs to
  traverse a length unit (e.g. meter) of the segment. For example, if the speed
  limit is 100 km / h, the cost to traverse a 10 km long road segment must be
  calculated as
<div>&#x00A0;</div>
<pre>
length / speed = 10 km / (100 km/h) = 0.1 h.
</pre>
Supported are cost assignments for both arcs and nodes, and also different costs
  for both directions of a vector line. For areas, costs will be calculated
  along boundary lines.
<div class="Pp"></div>
The input vector needs to be prepared with v.net operation=connect in order to
  connect points representing center nodes to the network.
<div class="Pp"></div>
Nodes and arcs can be closed using cost = -1.
<div class="Pp"></div>
Least cost paths are written to the output vector map with an attached attribute
  table.
<div class="Pp"></div>
Nodes can be
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">piped into the program from file or from stdin, or</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">defined in the graphical user interface (&quot;enter values
      interactively&quot;).</dd>
</dl>
</div>
The syntax is as follows:
<div>&#x00A0;</div>
<pre>
id start_point_category end_point_category
</pre>
(Example: 1 1 2)
<div class="Pp"></div>
or
<div>&#x00A0;</div>
<pre>
id start_point_x start_point_y end_point_x end_point_y
</pre>
<div class="Pp"></div>
Points specified by category must be exactly on network nodes, and the input
  vector map needs to be prepared with v.net operation=connect.
<div class="Pp"></div>
When specifying coordinates, the next network node to a given coordinate pair is
  used.
<div class="Pp"></div>
The attribute table will contain the following attributes:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">cat - path unique category assigned by module</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">id - path id (read from input)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">fcat - from point category</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">tcat - to point category</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">sp - result status:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0 - OK, path found</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">1 - node is not reachable</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">2 - point of given category does not exist</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">cost - travelling costs (on the network, not to/from
      network)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">fdist - the distance from first point to the network</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">tdist - the distance from the network to second point</dd>
</dl>
</div>
<div class="Pp"></div>
Application of flag <b>-t</b> enables a turntable support. This flag requires
  additional parameters <b>turn_layer</b> and <b>turn_cat_layer</b> that are
  otherwise ignored. The turntable allows to model e.g. traffic code, where some
  turns may be prohibited. This means that the input layer is expanded by
  turntable with costs of every possible turn on any possible node
  (intersection) in both directions. Turntable can be created by the
  <i>v.net</i> module. For more information about turns in the vector network
  analyses see wiki page.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Nodes and arcs can be closed using cost = -1.
<div class="Pp"></div>
If the cost columns <b>arc_column</b>, <b>arc_backward_column</b> and
  <b>node_column</b> are not specified, the length of network segments is
  measured and zero costs are assumed for nodes.
<div class="Pp"></div>
When using attributes, the length of segments is not used. To get accurate
  results, the line length must be taken into account when assigning costs as
  attributes. For example, to get the <i>fastest path</i>, the columns
  &#x2019;max_speed&#x2019; and &#x2019;length&#x2019; are required. The correct
  fastest path can then be found by specifying arc_column=length/max_speed. If
  not yet existing, the column containing the line length (&quot;length&quot;)
  has to added to the attributes table using <i>v.to.db</i>.
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Shortest (red) and fastest (blue) path between two digitized nodes (Spearfish):
<div class="Pp"></div>
<pre>
# Spearfish
echo &quot;1|601955.1|4916944.9|start
2|594385.6|4921565.2|end&quot; | v.in.ascii in=- cat=1 x=2 y=3 out=startend col=&quot;cat integer, \
                         east double precision, north double precision, label varchar(6)&quot;
v.db.select startend
g.copy vect=roads,myroads
# create lines map connecting points to network
v.net myroads points=startend out=myroads_net op=connect thresh=500 arc_layer=1 node_layer=2
# set up costs
# create unique categories for each road in layer 3
v.category in=myroads_net out=myroads_net_time opt=add cat=1 layer=3 type=line
# add new table for layer 3
v.db.addtable myroads_net_time layer=3 col=&quot;cat integer,label varchar(43),length double precision,speed double precision,cost double precision,bcost double precision&quot;
# copy road type to layer 3
v.to.db myroads_net_time layer=3 qlayer=1 opt=query qcolumn=label columns=label
# upload road length in miles
v.to.db myroads_net_time layer=3 type=line option=length col=length unit=miles
# set speed limits in miles / hour
v.db.update myroads_net_time layer=3 col=speed val=&quot;5.0&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;75.0&quot; where=&quot;label=&#x2019;interstate&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;75.0&quot; where=&quot;label=&#x2019;primary highway, hard surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;50.0&quot; where=&quot;label=&#x2019;secondary highway, hard surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;25.0&quot; where=&quot;label=&#x2019;light-duty road, improved surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;5.0&quot; where=&quot;label=&#x2019;unimproved road&#x2019;&quot;
# define traveling costs as traveling time in minutes:
# set forward costs
v.db.update myroads_net_time layer=3 col=cost val=&quot;length / speed * 60&quot;
# set backward costs
v.db.update myroads_net_time layer=3 col=bcost val=&quot;length / speed * 60&quot;
# ... the &#x2019;start&#x2019; and &#x2019;end&#x2019; nodes have category number 1 and 2
# Shortest path: ID as first number, then cat1 and cat2
echo &quot;1 1 2&quot; | v.net.path myroads_net_time arc_layer=3 node_layer=2 out=mypath
# Fastest path: ID as first number, then cat1 and cat2
echo &quot;1 1 2&quot; | v.net.path myroads_net_time arc_layer=3 node_layer=2 arc_column=cost arc_backward_column=bcost out=mypath_time
</pre>
To display the result, run for example:
<div>&#x00A0;</div>
<pre>
g.region vector=myroads_net
d.mon x0
d.vect myroads_net
# show shortest path
d.vect mypath col=red width=2
# show fastest path
d.vect mypath_time col=blue width=2
# start and end point
d.vect myroads_net icon=basic/triangle fcol=green size=12 layer=2
d.font font=Vera
d.vect startend disp=cat type=point lsize=14 layer=2
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>d.path,</i> <i>v.net,</i> <i>v.net.alloc,</i> <i>v.net.iso,</i>
  <i>v.net.salesman,</i> <i>v.net.steiner,</i> <i>v.to.db</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Radim Blazek, ITC-Irst, Trento, Italy
<div>&#x00A0;</div>
Documentation: Markus Neteler, Markus Metz
<h2 class="Ss" title="Ss" id="TURNS_SUPPORT"><a class="selflink" href="#TURNS_SUPPORT">TURNS
  SUPPORT</a></h2>
The turns support was implemnented as part of GRASS GIS turns cost project at
  Czech Technical University in Prague, Czech Republic.
<div class="Pp"></div>
Implementation: Stepan Turek
<div>&#x00A0;</div>
Documentation: Lukas Bocan, Eliska Kyzlikova, Viera Bejdova
<div>&#x00A0;</div>
Mentor: Martin Landa
<div class="Pp"></div>
<i>Last changed: $Date: 2016-11-14 00:09:36 +0100 (Mon, 14 Nov 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.net.path source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
