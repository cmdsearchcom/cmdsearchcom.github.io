<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:09:45 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FFSERVER(1) FFSERVER(1)</p>

<p style="margin-top: 1em">NAME <br>
ffserver - ffserver video server</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ffserver [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
ffserver is a streaming server for both audio and video. It
supports several live feeds, streaming from files and time
shifting on live feeds. You can seek to positions in the
<br>
past on each live feed, provided you specify a big enough
feed storage.</p>

<p style="margin-top: 1em">ffserver is configured through a
configuration file, which is read at startup. If not
explicitly specified, it will read from
/etc/ffserver.conf.</p>

<p style="margin-top: 1em">ffserver receives prerecorded
files or FFM streams from some ffmpeg instance as input,
then streams them over RTP/RTSP/HTTP.</p>

<p style="margin-top: 1em">An ffserver instance will listen
on some port as specified in the configuration file. You can
launch one or more instances of ffmpeg and send one or more
FFM streams to the port <br>
where ffserver is expecting to receive them. Alternately,
you can make ffserver launch such ffmpeg instances at
startup.</p>

<p style="margin-top: 1em">Input streams are called feeds,
and each one is specified by a &quot;&lt;Feed&gt;&quot;
section in the configuration file.</p>

<p style="margin-top: 1em">For each feed you can have
different output streams in various formats, each one
specified by a &quot;&lt;Stream&gt;&quot; section in the
configuration file.</p>

<p style="margin-top: 1em">DETAILED DESCRIPTION <br>
ffserver works by forwarding streams encoded by ffmpeg, or
pre-recorded streams which are read from disk.</p>

<p style="margin-top: 1em">Precisely, ffserver acts as an
HTTP server, accepting POST requests from ffmpeg to acquire
the stream to publish, and serving RTSP clients or HTTP
clients GET requests with the <br>
stream media content.</p>

<p style="margin-top: 1em">A feed is an FFM stream created
by ffmpeg, and sent to a port where ffserver is
listening.</p>

<p style="margin-top: 1em">Each feed is identified by a
unique name, corresponding to the name of the resource
published on ffserver, and is configured by a dedicated
&quot;Feed&quot; section in the configuration <br>
file.</p>

<p style="margin-top: 1em">The feed publish URL is given
by:</p>


<p style="margin-top: 1em">http://&lt;ffserver_ip_address&gt;:&lt;http_port&gt;/&lt;feed_name&gt;</p>

<p style="margin-top: 1em">where ffserver_ip_address is the
IP address of the machine where ffserver is installed,
http_port is the port number of the HTTP server (configured
through the HTTPPort option), <br>
and feed_name is the name of the corresponding feed defined
in the configuration file.</p>

<p style="margin-top: 1em">Each feed is associated to a
file which is stored on disk. This stored file is used to
send pre-recorded data to a player as fast as possible when
new content is added in real- <br>
time to the stream.</p>

<p style="margin-top: 1em">A &quot;live-stream&quot; or
&quot;stream&quot; is a resource published by ffserver, and
made accessible through the HTTP protocol to clients.</p>

<p style="margin-top: 1em">A stream can be connected to a
feed, or to a file. In the first case, the published stream
is forwarded from the corresponding feed generated by a
running instance of ffmpeg, in <br>
the second case the stream is read from a pre-recorded
file.</p>

<p style="margin-top: 1em">Each stream is identified by a
unique name, corresponding to the name of the resource
served by ffserver, and is configured by a dedicated
&quot;Stream&quot; section in the configuration <br>
file.</p>

<p style="margin-top: 1em">The stream access HTTP URL is
given by:</p>


<p style="margin-top: 1em">http://&lt;ffserver_ip_address&gt;:&lt;http_port&gt;/&lt;stream_name&gt;[&lt;options&gt;]</p>

<p style="margin-top: 1em">The stream access RTSP URL is
given by:</p>


<p style="margin-top: 1em">http://&lt;ffserver_ip_address&gt;:&lt;rtsp_port&gt;/&lt;stream_name&gt;[&lt;options&gt;]</p>

<p style="margin-top: 1em">stream_name is the name of the
corresponding stream defined in the configuration file.
options is a list of options specified after the URL which
affects how the stream is served <br>
by ffserver. http_port and rtsp_port are the HTTP and RTSP
ports configured with the options HTTPPort and RTSPPort
respectively.</p>

<p style="margin-top: 1em">In case the stream is associated
to a feed, the encoding parameters must be configured in the
stream configuration. They are sent to ffmpeg when setting
up the encoding. This <br>
allows ffserver to define the encoding parameters used by
the ffmpeg encoders.</p>

<p style="margin-top: 1em">The ffmpeg override_ffserver
commandline option allows one to override the encoding
parameters set by the server.</p>

<p style="margin-top: 1em">Multiple streams can be
connected to the same feed.</p>

<p style="margin-top: 1em">For example, you can have a
situation described by the following graph:</p>

<p style="margin-top: 1em">_________ __________ <br>
| | | | <br>
ffmpeg 1 -----| feed 1 |-----| stream 1 | &nbsp; <br>
|_________|&nbsp; |__________| &nbsp; &nbsp; &nbsp; <br>
__________ &nbsp; &nbsp; <br>
| | &nbsp; <br>
stream 2 | &nbsp; <br>
|__________| &nbsp; <br>
_________ __________ &nbsp; <br>
| | | | <br>
feed 2 |-----| stream 3 | <br>
|_________| |__________|</p>

<p style="margin-top: 1em">_________ __________ <br>
| | | | <br>
ffmpeg 2 -----| feed 3 |-----| stream 4 | <br>
|_________| |__________|</p>

<p style="margin-top: 1em">_________ __________ <br>
| | | | <br>
| file 1 |-----| stream 5 | <br>
|_________| |__________|</p>

<p style="margin-top: 1em">FFM, FFM2 formats <br>
FFM and FFM2 are formats used by ffserver. They allow
storing a wide variety of video and audio streams and
encoding options, and can store a moving time segment of an
infinite <br>
movie or a whole movie.</p>

<p style="margin-top: 1em">FFM is version specific, and
there is limited compatibility of FFM files generated by one
version of ffmpeg/ffserver and another version of
ffmpeg/ffserver. It may work but it is <br>
not guaranteed to work.</p>

<p style="margin-top: 1em">FFM2 is extensible while
maintaining compatibility and should work between differing
versions of tools. FFM2 is the default.</p>

<p style="margin-top: 1em">Status stream <br>
ffserver supports an HTTP interface which exposes the
current status of the server.</p>

<p style="margin-top: 1em">Simply point your browser to the
address of the special status stream specified in the
configuration file.</p>

<p style="margin-top: 1em">For example if you have:</p>

<p style="margin-top: 1em">&lt;Stream status.html&gt; <br>
Format status</p>

<p style="margin-top: 1em"># Only allow local people to get
the status <br>
ACL allow localhost <br>
ACL allow 192.168.0.0 192.168.255.255 <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">then the server will post a page
with the status information when the special stream
status.html is requested.</p>

<p style="margin-top: 1em">How do I make it work? <br>
As a simple test, just run the following two command lines
where INPUTFILE is some file which you can decode with
ffmpeg:</p>

<p style="margin-top: 1em">ffserver -f doc/ffserver.conf
&amp; <br>
ffmpeg -i INPUTFILE http://localhost:8090/feed1.ffm</p>

<p style="margin-top: 1em">At this point you should be able
to go to your Windows machine and fire up Windows Media
Player (WMP). Go to Open URL and enter</p>


<p style="margin-top: 1em">http://&lt;linuxbox&gt;:8090/test.asf</p>

<p style="margin-top: 1em">You should (after a short delay)
see video and hear audio.</p>

<p style="margin-top: 1em">WARNING: trying to stream
test1.mpg doesn&rsquo;t work with WMP as it tries to
transfer the entire file before starting to play. The same
is true of AVI files.</p>

<p style="margin-top: 1em">You should edit the
ffserver.conf file to suit your needs (in terms of frame
rates etc). Then install ffserver and ffmpeg, write a script
to start them up, and off you go.</p>

<p style="margin-top: 1em">What else can it do? <br>
You can replay video from .ffm files that was recorded
earlier. However, there are a number of caveats, including
the fact that the ffserver parameters must match the
original <br>
parameters used to record the file. If they do not, then
ffserver deletes the file before recording into it. (Now
that I write this, it seems broken).</p>

<p style="margin-top: 1em">You can fiddle with many of the
codec choices and encoding parameters, and there are a bunch
more parameters that you cannot control. Post a message to
the mailing list if there <br>
are some &rsquo;must have&rsquo; parameters. Look in
ffserver.conf for a list of the currently available
controls.</p>

<p style="margin-top: 1em">It will automatically generate
the ASX or RAM files that are often used in browsers. These
files are actually redirections to the underlying ASF or RM
file. The reason for this <br>
is that the browser often fetches the entire file before
starting up the external viewer. The redirection files are
very small and can be transferred quickly. [The stream
itself <br>
is often &rsquo;infinite&rsquo; and thus the browser tries
to download it and never finishes.]</p>

<p style="margin-top: 1em">Tips <br>
* When you connect to a live stream, most players (WMP, RA,
etc) want to buffer a certain number of seconds of material
so that they can display the signal continuously. However,
<br>
ffserver (by default) starts sending data in realtime. This
means that there is a pause of a few seconds while the
buffering is being done by the player. The good news is that
<br>
this can be cured by adding a &rsquo;?buffer=5&rsquo; to the
end of the URL. This means that the stream should start 5
seconds in the past -- and so the first 5 seconds of the
stream are <br>
sent as fast as the network will allow. It will then slow
down to real time. This noticeably improves the startup
experience.</p>

<p style="margin-top: 1em">You can also add a
&rsquo;Preroll 15&rsquo; statement into the ffserver.conf
that will add the 15 second prebuffering on all requests
that do not otherwise specify a time. In addition, <br>
ffserver will skip frames until a key_frame is found. This
further reduces the startup delay by not transferring data
that will be discarded.</p>

<p style="margin-top: 1em">Why does the ?buffer / Preroll
stop working after a time? <br>
It turns out that (on my machine at least) the number of
frames successfully grabbed is marginally less than the
number that ought to be grabbed. This means that the
timestamp in <br>
the encoded data stream gets behind realtime. This means
that if you say &rsquo;Preroll 10&rsquo;, then when the
stream gets 10 or more seconds behind, there is no Preroll
left.</p>

<p style="margin-top: 1em">Fixing this requires a change in
the internals of how timestamps are handled.</p>

<p style="margin-top: 1em">Does the &quot;?date=&quot;
stuff work. <br>
Yes (subject to the limitation outlined above). Also note
that whenever you start ffserver, it deletes the ffm file
(if any parameters have changed), thus wiping out what you
had <br>
recorded before.</p>

<p style="margin-top: 1em">The format of the
&quot;?date=xxxxxx&quot; is fairly flexible. You should use
one of the following formats (the &rsquo;T&rsquo; is
literal):</p>

<p style="margin-top: 1em">* YYYY-MM-DDTHH:MM:SS
(localtime) <br>
* YYYY-MM-DDTHH:MM:SSZ (UTC)</p>

<p style="margin-top: 1em">You can omit the YYYY-MM-DD, and
then it refers to the current day. However note that
?date=16:00:00 refers to 16:00 on the current day -- this
may be in the future and so is <br>
unlikely to be useful.</p>

<p style="margin-top: 1em">You use this by adding the
?date= to the end of the URL for the stream. For example:
http://localhost:8080/test.asf?date=2002-07-26T23:05:00.</p>

<p style="margin-top: 1em">OPTIONS <br>
All the numerical options, if not specified otherwise,
accept a string representing a number as input, which may be
followed by one of the SI unit prefixes, for example:
&rsquo;K&rsquo;, <br>
&rsquo;M&rsquo;, or &rsquo;G&rsquo;.</p>

<p style="margin-top: 1em">If &rsquo;i&rsquo; is appended
to the SI unit prefix, the complete prefix will be
interpreted as a unit prefix for binary multiples, which are
based on powers of 1024 instead of powers of <br>
1000. Appending &rsquo;B&rsquo; to the SI unit prefix
multiplies the value by 8. This allows using, for example:
&rsquo;KB&rsquo;, &rsquo;MiB&rsquo;, &rsquo;G&rsquo; and
&rsquo;B&rsquo; as number suffixes.</p>

<p style="margin-top: 1em">Options which do not take
arguments are boolean options, and set the corresponding
value to true. They can be set to false by prefixing the
option name with &quot;no&quot;. For example <br>
using &quot;-nofoo&quot; will set the boolean option with
name &quot;foo&quot; to false.</p>

<p style="margin-top: 1em">Stream specifiers <br>
Some options are applied per-stream, e.g. bitrate or codec.
Stream specifiers are used to precisely specify which
stream(s) a given option belongs to.</p>

<p style="margin-top: 1em">A stream specifier is a string
generally appended to the option name and separated from it
by a colon. E.g. &quot;-codec:a:1 ac3&quot; contains the
&quot;a:1&quot; stream specifier, which matches <br>
the second audio stream. Therefore, it would select the ac3
codec for the second audio stream.</p>

<p style="margin-top: 1em">A stream specifier can match
several streams, so that the option is applied to all of
them. E.g. the stream specifier in &quot;-b:a 128k&quot;
matches all audio streams.</p>

<p style="margin-top: 1em">An empty stream specifier
matches all streams. For example, &quot;-codec copy&quot; or
&quot;-codec: copy&quot; would copy all the streams without
reencoding.</p>

<p style="margin-top: 1em">Possible forms of stream
specifiers are:</p>

<p style="margin-top: 1em">stream_index <br>
Matches the stream with this index. E.g. &quot;-threads:1
4&quot; would set the thread count for the second stream to
4.</p>

<p style="margin-top: 1em">stream_type[:stream_index] <br>
stream_type is one of following: &rsquo;v&rsquo; or
&rsquo;V&rsquo; for video, &rsquo;a&rsquo; for audio,
&rsquo;s&rsquo; for subtitle, &rsquo;d&rsquo; for data, and
&rsquo;t&rsquo; for attachments. &rsquo;v&rsquo; matches all
video streams, &rsquo;V&rsquo; only matches <br>
video streams which are not attached pictures, video
thumbnails or cover arts. If stream_index is given, then it
matches stream number stream_index of this type. Otherwise,
<br>
it matches all streams of this type.</p>

<p style="margin-top: 1em">p:program_id[:stream_index] <br>
If stream_index is given, then it matches the stream with
number stream_index in the program with the id program_id.
Otherwise, it matches all streams in the program.</p>

<p style="margin-top: 1em">#stream_id or i:stream_id <br>
Match the stream by stream id (e.g. PID in MPEG-TS
container).</p>

<p style="margin-top: 1em">m:key[:value] <br>
Matches streams with the metadata tag key having the
specified value. If value is not given, matches streams that
contain the given tag with any value.</p>

<p style="margin-top: 1em">u Matches streams with usable
configuration, the codec must be defined and the essential
information such as video dimension or audio sample rate
must be present.</p>

<p style="margin-top: 1em">Note that in ffmpeg, matching by
metadata will only work properly for input files.</p>

<p style="margin-top: 1em">Generic options <br>
These options are shared amongst the ff* tools.</p>

<p style="margin-top: 1em">-L Show license.</p>

<p style="margin-top: 1em">-h, -?, -help, --help [arg] <br>
Show help. An optional parameter may be specified to print
help about a specific item. If no argument is specified,
only basic (non advanced) tool options are shown.</p>

<p style="margin-top: 1em">Possible values of arg are:</p>

<p style="margin-top: 1em">long <br>
Print advanced tool options in addition to the basic tool
options.</p>

<p style="margin-top: 1em">full <br>
Print complete list of options, including shared and private
options for encoders, decoders, demuxers, muxers, filters,
etc.</p>

<p style="margin-top: 1em">decoder=decoder_name <br>
Print detailed information about the decoder named
decoder_name. Use the -decoders option to get a list of all
decoders.</p>

<p style="margin-top: 1em">encoder=encoder_name <br>
Print detailed information about the encoder named
encoder_name. Use the -encoders option to get a list of all
encoders.</p>

<p style="margin-top: 1em">demuxer=demuxer_name <br>
Print detailed information about the demuxer named
demuxer_name. Use the -formats option to get a list of all
demuxers and muxers.</p>

<p style="margin-top: 1em">muxer=muxer_name <br>
Print detailed information about the muxer named muxer_name.
Use the -formats option to get a list of all muxers and
demuxers.</p>

<p style="margin-top: 1em">filter=filter_name <br>
Print detailed information about the filter name
filter_name. Use the -filters option to get a list of all
filters.</p>

<p style="margin-top: 1em">-version <br>
Show version.</p>

<p style="margin-top: 1em">-formats <br>
Show available formats (including devices).</p>

<p style="margin-top: 1em">-devices <br>
Show available devices.</p>

<p style="margin-top: 1em">-codecs <br>
Show all codecs known to libavcodec.</p>

<p style="margin-top: 1em">Note that the term
&rsquo;codec&rsquo; is used throughout this documentation as
a shortcut for what is more correctly called a media
bitstream format.</p>

<p style="margin-top: 1em">-decoders <br>
Show available decoders.</p>

<p style="margin-top: 1em">-encoders <br>
Show all available encoders.</p>

<p style="margin-top: 1em">-bsfs <br>
Show available bitstream filters.</p>

<p style="margin-top: 1em">-protocols <br>
Show available protocols.</p>

<p style="margin-top: 1em">-filters <br>
Show available libavfilter filters.</p>

<p style="margin-top: 1em">-pix_fmts <br>
Show available pixel formats.</p>

<p style="margin-top: 1em">-sample_fmts <br>
Show available sample formats.</p>

<p style="margin-top: 1em">-layouts <br>
Show channel names and standard channel layouts.</p>

<p style="margin-top: 1em">-colors <br>
Show recognized color names.</p>

<p style="margin-top: 1em">-sources
device[,opt1=val1[,opt2=val2]...] <br>
Show autodetected sources of the intput device. Some devices
may provide system-dependent source names that cannot be
autodetected. The returned list cannot be assumed to <br>
be always complete.</p>

<p style="margin-top: 1em">ffmpeg -sources
pulse,server=192.168.0.4</p>

<p style="margin-top: 1em">-sinks
device[,opt1=val1[,opt2=val2]...] <br>
Show autodetected sinks of the output device. Some devices
may provide system-dependent sink names that cannot be
autodetected. The returned list cannot be assumed to be <br>
always complete.</p>

<p style="margin-top: 1em">ffmpeg -sinks
pulse,server=192.168.0.4</p>

<p style="margin-top: 1em">-loglevel [repeat+]loglevel | -v
[repeat+]loglevel <br>
Set the logging level used by the library. Adding
&quot;repeat+&quot; indicates that repeated log output
should not be compressed to the first line and the
&quot;Last message repeated n <br>
times&quot; line will be omitted. &quot;repeat&quot; can
also be used alone. If &quot;repeat&quot; is used alone, and
with no prior loglevel set, the default loglevel will be
used. If multiple <br>
loglevel parameters are given, using &rsquo;repeat&rsquo;
will not change the loglevel. loglevel is a string or a
number containing one of the following values:</p>

<p style="margin-top: 1em">quiet, -8 <br>
Show nothing at all; be silent.</p>

<p style="margin-top: 1em">panic, 0 <br>
Only show fatal errors which could lead the process to
crash, such as an assertion failure. This is not currently
used for anything.</p>

<p style="margin-top: 1em">fatal, 8 <br>
Only show fatal errors. These are errors after which the
process absolutely cannot continue.</p>

<p style="margin-top: 1em">error, 16 <br>
Show all errors, including ones which can be recovered
from.</p>

<p style="margin-top: 1em">warning, 24 <br>
Show all warnings and errors. Any message related to
possibly incorrect or unexpected events will be shown.</p>

<p style="margin-top: 1em">info, 32 <br>
Show informative messages during processing. This is in
addition to warnings and errors. This is the default
value.</p>

<p style="margin-top: 1em">verbose, 40 <br>
Same as &quot;info&quot;, except more verbose.</p>

<p style="margin-top: 1em">debug, 48 <br>
Show everything, including debugging information.</p>

<p style="margin-top: 1em">trace, 56</p>

<p style="margin-top: 1em">By default the program logs to
stderr. If coloring is supported by the terminal, colors are
used to mark errors and warnings. Log coloring can be
disabled setting the <br>
environment variable AV_LOG_FORCE_NOCOLOR or NO_COLOR, or
can be forced setting the environment variable
AV_LOG_FORCE_COLOR. The use of the environment variable
NO_COLOR is <br>
deprecated and will be dropped in a future FFmpeg
version.</p>

<p style="margin-top: 1em">-report <br>
Dump full command line and console output to a file named
&quot;program-YYYYMMDD-HHMMSS.log&quot; in the current
directory. This file can be useful for bug reports. It also
implies <br>
&quot;-loglevel verbose&quot;.</p>

<p style="margin-top: 1em">Setting the environment variable
FFREPORT to any value has the same effect. If the value is a
&rsquo;:&rsquo;-separated key=value sequence, these options
will affect the report; option <br>
values must be escaped if they contain special characters or
the options delimiter &rsquo;:&rsquo; (see the
&lsquo;&lsquo;Quoting and escaping&rsquo;&rsquo; section in
the ffmpeg-utils manual).</p>

<p style="margin-top: 1em">The following options are
recognized:</p>

<p style="margin-top: 1em">file <br>
set the file name to use for the report; %p is expanded to
the name of the program, %t is expanded to a timestamp,
&quot;%%&quot; is expanded to a plain &quot;%&quot;</p>

<p style="margin-top: 1em">level <br>
set the log verbosity level using a numerical value (see
&quot;-loglevel&quot;).</p>

<p style="margin-top: 1em">For example, to output a report
to a file named ffreport.log using a log level of 32 (alias
for log level &quot;info&quot;):</p>


<p style="margin-top: 1em">FFREPORT=file=ffreport.log:level=32
ffmpeg -i input output</p>

<p style="margin-top: 1em">Errors in parsing the
environment variable are not fatal, and will not appear in
the report.</p>

<p style="margin-top: 1em">-hide_banner <br>
Suppress printing banner.</p>

<p style="margin-top: 1em">All FFmpeg tools will normally
show a copyright notice, build options and library versions.
This option can be used to suppress printing this
information.</p>

<p style="margin-top: 1em">-cpuflags flags (global) <br>
Allows setting and clearing cpu flags. This option is
intended for testing. Do not use it unless you know what
you&rsquo;re doing.</p>

<p style="margin-top: 1em">ffmpeg -cpuflags -sse+mmx ...
<br>
ffmpeg -cpuflags mmx ... <br>
ffmpeg -cpuflags 0 ...</p>

<p style="margin-top: 1em">Possible flags for this option
are:</p>

<p style="margin-top: 1em">x86 <br>
mmx <br>
mmxext <br>
sse <br>
sse2 <br>
sse2slow <br>
sse3 <br>
sse3slow <br>
ssse3 <br>
atom <br>
sse4.1 <br>
sse4.2 <br>
avx <br>
avx2 <br>
xop <br>
fma3 <br>
fma4 <br>
3dnow <br>
3dnowext <br>
bmi1 <br>
bmi2 <br>
cmov <br>
ARM <br>
armv5te <br>
armv6 <br>
armv6t2 <br>
vfp <br>
vfpv3 <br>
neon <br>
setend <br>
AArch64 <br>
armv8 <br>
vfp <br>
neon <br>
PowerPC <br>
altivec <br>
Specific Processors <br>
pentium2 <br>
pentium3 <br>
pentium4 <br>
k6 <br>
k62 <br>
athlon <br>
athlonxp <br>
k8 <br>
-opencl_bench <br>
This option is used to benchmark all available OpenCL
devices and print the results. This option is only available
when FFmpeg has been compiled with
&quot;--enable-opencl&quot;.</p>

<p style="margin-top: 1em">When FFmpeg is configured with
&quot;--enable-opencl&quot;, the options for the global
OpenCL context are set via -opencl_options. See the
&quot;OpenCL Options&quot; section in the ffmpeg-utils <br>
manual for the complete list of supported options. Amongst
others, these options include the ability to select a
specific platform and device to run the OpenCL code on. By
<br>
default, FFmpeg will run on the first device of the first
platform. While the options for the global OpenCL context
provide flexibility to the user in selecting the OpenCL <br>
device of their choice, most users would probably want to
select the fastest OpenCL device for their system.</p>

<p style="margin-top: 1em">This option assists the
selection of the most efficient configuration by identifying
the appropriate device for the user&rsquo;s system. The
built-in benchmark is run on all the <br>
OpenCL devices and the performance is measured for each
device. The devices in the results list are sorted based on
their performance with the fastest device listed first. <br>
The user can subsequently invoke ffmpeg using the device
deemed most appropriate via -opencl_options to obtain the
best performance for the OpenCL accelerated code.</p>

<p style="margin-top: 1em">Typical usage to use the fastest
OpenCL device involve the following steps.</p>

<p style="margin-top: 1em">Run the command:</p>

<p style="margin-top: 1em">ffmpeg -opencl_bench</p>

<p style="margin-top: 1em">Note down the platform ID (pidx)
and device ID (didx) of the first i.e. fastest device in the
list. Select the platform and device using the command:</p>

<p style="margin-top: 1em">ffmpeg -opencl_options
platform_idx=&lt;pidx&gt;:device_idx=&lt;didx&gt; ...</p>

<p style="margin-top: 1em">-opencl_options options (global)
<br>
Set OpenCL environment options. This option is only
available when FFmpeg has been compiled with
&quot;--enable-opencl&quot;.</p>

<p style="margin-top: 1em">options must be a list of
key=value option pairs separated by &rsquo;:&rsquo;. See the
&lsquo;&lsquo;OpenCL Options&rsquo;&rsquo; section in the
ffmpeg-utils manual for the list of supported options.</p>

<p style="margin-top: 1em">AVOptions <br>
These options are provided directly by the libavformat,
libavdevice and libavcodec libraries. To see the list of
available AVOptions, use the -help option. They are
separated <br>
into two categories:</p>

<p style="margin-top: 1em">generic <br>
These options can be set for any container, codec or device.
Generic options are listed under AVFormatContext options for
containers/devices and under AVCodecContext options <br>
for codecs.</p>

<p style="margin-top: 1em">private <br>
These options are specific to the given container, device or
codec. Private options are listed under their corresponding
containers/devices/codecs.</p>

<p style="margin-top: 1em">For example to write an ID3v2.3
header instead of a default ID3v2.4 to an MP3 file, use the
id3v2_version private option of the MP3 muxer:</p>

<p style="margin-top: 1em">ffmpeg -i input.flac
-id3v2_version 3 out.mp3</p>

<p style="margin-top: 1em">All codec AVOptions are
per-stream, and thus a stream specifier should be attached
to them.</p>

<p style="margin-top: 1em">Note: the -nooption syntax
cannot be used for boolean AVOptions, use -option 0/-option
1.</p>

<p style="margin-top: 1em">Note: the old undocumented way
of specifying per-stream AVOptions by prepending v/a/s to
the options name is now obsolete and will be removed
soon.</p>

<p style="margin-top: 1em">Main options <br>
-f configfile <br>
Read configuration file configfile. If not specified it will
read by default from /etc/ffserver.conf.</p>

<p style="margin-top: 1em">-n Enable no-launch mode. This
option disables all the &quot;Launch&quot; directives within
the various &quot;&lt;Feed&gt;&quot; sections. Since
ffserver will not launch any ffmpeg instances, you will <br>
have to launch them manually.</p>

<p style="margin-top: 1em">-d Enable debug mode. This
option increases log verbosity, and directs log messages to
stdout. When specified, the CustomLog option is ignored.</p>

<p style="margin-top: 1em">CONFIGURATION FILE SYNTAX <br>
ffserver reads a configuration file containing global
options and settings for each stream and feed.</p>

<p style="margin-top: 1em">The configuration file consists
of global options and dedicated sections, which must be
introduced by &quot;&lt;SECTION_NAME ARGS&gt;&quot; on a
separate line and must be terminated by a line in <br>
the form &quot;&lt;/SECTION_NAME&gt;&quot;. ARGS is
optional.</p>

<p style="margin-top: 1em">Currently the following sections
are recognized: Feed, Stream, Redirect.</p>

<p style="margin-top: 1em">A line starting with
&quot;#&quot; is ignored and treated as a comment.</p>

<p style="margin-top: 1em">Name of options and sections are
case-insensitive.</p>

<p style="margin-top: 1em">ACL syntax <br>
An ACL (Access Control List) specifies the address which are
allowed to access a given stream, or to write a given
feed.</p>

<p style="margin-top: 1em">It accepts the folling forms</p>

<p style="margin-top: 1em">&Acirc;&middot; Allow/deny
access to address.</p>

<p style="margin-top: 1em">ACL ALLOW &lt;address&gt; <br>
ACL DENY &lt;address&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Allow/deny
access to ranges of addresses from first_address to
last_address.</p>

<p style="margin-top: 1em">ACL ALLOW &lt;first_address&gt;
&lt;last_address&gt; <br>
ACL DENY &lt;first_address&gt; &lt;last_address&gt;</p>

<p style="margin-top: 1em">You can repeat the ACL
allow/deny as often as you like. It is on a per stream
basis. The first match defines the action. If there are no
matches, then the default is the inverse <br>
of the last ACL statement.</p>

<p style="margin-top: 1em">Thus &rsquo;ACL allow
localhost&rsquo; only allows access from localhost.
&rsquo;ACL deny 1.0.0.0 1.255.255.255&rsquo; would deny the
whole of network 1 and allow everybody else.</p>

<p style="margin-top: 1em">Global options <br>
HTTPPort port_number <br>
Port port_number <br>
RTSPPort port_number <br>
HTTPPort sets the HTTP server listening TCP port number,
RTSPPort sets the RTSP server listening TCP port number.</p>

<p style="margin-top: 1em">Port is the equivalent of
HTTPPort and is deprecated.</p>

<p style="margin-top: 1em">You must select a different port
from your standard HTTP web server if it is running on the
same computer.</p>

<p style="margin-top: 1em">If not specified, no
corresponding server will be created.</p>

<p style="margin-top: 1em">HTTPBindAddress ip_address <br>
BindAddress ip_address <br>
RTSPBindAddress ip_address <br>
Set address on which the HTTP/RTSP server is bound. Only
useful if you have several network interfaces.</p>

<p style="margin-top: 1em">BindAddress is the equivalent of
HTTPBindAddress and is deprecated.</p>

<p style="margin-top: 1em">MaxHTTPConnections n <br>
Set number of simultaneous HTTP connections that can be
handled. It has to be defined before the MaxClients
parameter, since it defines the MaxClients maximum
limit.</p>

<p style="margin-top: 1em">Default value is 2000.</p>

<p style="margin-top: 1em">MaxClients n <br>
Set number of simultaneous requests that can be handled.
Since ffserver is very fast, it is more likely that you will
want to leave this high and use MaxBandwidth.</p>

<p style="margin-top: 1em">Default value is 5.</p>

<p style="margin-top: 1em">MaxBandwidth kbps <br>
Set the maximum amount of kbit/sec that you are prepared to
consume when streaming to clients.</p>

<p style="margin-top: 1em">Default value is 1000.</p>

<p style="margin-top: 1em">CustomLog filename <br>
Set access log file (uses standard Apache log file format).
&rsquo;-&rsquo; is the standard output.</p>

<p style="margin-top: 1em">If not specified ffserver will
produce no log.</p>

<p style="margin-top: 1em">In case the commandline option
-d is specified this option is ignored, and the log is
written to standard output.</p>

<p style="margin-top: 1em">NoDaemon <br>
Set no-daemon mode. This option is currently ignored since
now ffserver will always work in no-daemon mode, and is
deprecated.</p>

<p style="margin-top: 1em">UseDefaults <br>
NoDefaults <br>
Control whether default codec options are used for the all
streams or not. Each stream may overwrite this setting for
its own. Default is UseDefaults. The lastest <br>
occurrence overrides previous if multiple definitions.</p>

<p style="margin-top: 1em">Feed section <br>
A Feed section defines a feed provided to ffserver.</p>

<p style="margin-top: 1em">Each live feed contains one
video and/or audio sequence coming from an ffmpeg encoder or
another ffserver. This sequence may be encoded
simultaneously with several codecs at <br>
several resolutions.</p>

<p style="margin-top: 1em">A feed instance specification is
introduced by a line in the form:</p>

<p style="margin-top: 1em">&lt;Feed FEED_FILENAME&gt;</p>

<p style="margin-top: 1em">where FEED_FILENAME specifies
the unique name of the FFM stream.</p>

<p style="margin-top: 1em">The following options are
recognized within a Feed section.</p>

<p style="margin-top: 1em">File filename <br>
ReadOnlyFile filename <br>
Set the path where the feed file is stored on disk.</p>

<p style="margin-top: 1em">If not specified, the
/tmp/FEED.ffm is assumed, where FEED is the feed name.</p>

<p style="margin-top: 1em">If ReadOnlyFile is used the file
is marked as read-only and it will not be deleted or
updated.</p>

<p style="margin-top: 1em">Truncate <br>
Truncate the feed file, rather than appending to it. By
default ffserver will append data to the file, until the
maximum file size value is reached (see FileMaxSize
option).</p>

<p style="margin-top: 1em">FileMaxSize size <br>
Set maximum size of the feed file in bytes. 0 means
unlimited. The postfixes &quot;K&quot; (2^10), &quot;M&quot;
(2^20), and &quot;G&quot; (2^30) are recognized.</p>

<p style="margin-top: 1em">Default value is 5M.</p>

<p style="margin-top: 1em">Launch args <br>
Launch an ffmpeg command when creating ffserver.</p>

<p style="margin-top: 1em">args must be a sequence of
arguments to be provided to an ffmpeg instance. The first
provided argument is ignored, and it is replaced by a path
with the same dirname of the <br>
ffserver instance, followed by the remaining argument and
terminated with a path corresponding to the feed.</p>

<p style="margin-top: 1em">When the launched process exits,
ffserver will launch another program instance.</p>

<p style="margin-top: 1em">In case you need a more complex
ffmpeg configuration, e.g. if you need to generate multiple
FFM feeds with a single ffmpeg instance, you should launch
ffmpeg by hand.</p>

<p style="margin-top: 1em">This option is ignored in case
the commandline option -n is specified.</p>

<p style="margin-top: 1em">ACL spec <br>
Specify the list of IP address which are allowed or denied
to write the feed. Multiple ACL options can be
specified.</p>

<p style="margin-top: 1em">Stream section <br>
A Stream section defines a stream provided by ffserver, and
identified by a single name.</p>

<p style="margin-top: 1em">The stream is sent when
answering a request containing the stream name.</p>

<p style="margin-top: 1em">A stream section must be
introduced by the line:</p>

<p style="margin-top: 1em">&lt;Stream STREAM_NAME&gt;</p>

<p style="margin-top: 1em">where STREAM_NAME specifies the
unique name of the stream.</p>

<p style="margin-top: 1em">The following options are
recognized within a Stream section.</p>

<p style="margin-top: 1em">Encoding options are marked with
the encoding tag, and they are used to set the encoding
parameters, and are mapped to libavcodec encoding options.
Not all encoding options are <br>
supported, in particular it is not possible to set encoder
private options. In order to override the encoding options
specified by ffserver, you can use the ffmpeg <br>
override_ffserver commandline option.</p>

<p style="margin-top: 1em">Only one of the Feed and File
options should be set.</p>

<p style="margin-top: 1em">Feed feed_name <br>
Set the input feed. feed_name must correspond to an existing
feed defined in a &quot;Feed&quot; section.</p>

<p style="margin-top: 1em">When this option is set,
encoding options are used to setup the encoding operated by
the remote ffmpeg process.</p>

<p style="margin-top: 1em">File filename <br>
Set the filename of the pre-recorded input file to
stream.</p>

<p style="margin-top: 1em">When this option is set,
encoding options are ignored and the input file content is
re-streamed as is.</p>

<p style="margin-top: 1em">Format format_name <br>
Set the format of the output stream.</p>

<p style="margin-top: 1em">Must be the name of a format
recognized by FFmpeg. If set to status, it is treated as a
status stream.</p>

<p style="margin-top: 1em">InputFormat format_name <br>
Set input format. If not specified, it is automatically
guessed.</p>

<p style="margin-top: 1em">Preroll n <br>
Set this to the number of seconds backwards in time to
start. Note that most players will buffer 5-10 seconds of
video, and also you need to allow for a keyframe to appear
in <br>
the data stream.</p>

<p style="margin-top: 1em">Default value is 0.</p>

<p style="margin-top: 1em">StartSendOnKey <br>
Do not send stream until it gets the first key frame. By
default ffserver will send data immediately.</p>

<p style="margin-top: 1em">MaxTime n <br>
Set the number of seconds to run. This value set the maximum
duration of the stream a client will be able to receive.</p>

<p style="margin-top: 1em">A value of 0 means that no limit
is set on the stream duration.</p>

<p style="margin-top: 1em">ACL spec <br>
Set ACL for the stream.</p>

<p style="margin-top: 1em">DynamicACL spec <br>
RTSPOption option <br>
MulticastAddress address <br>
MulticastPort port <br>
MulticastTTL integer <br>
NoLoop <br>
FaviconURL url <br>
Set favicon (favourite icon) for the server status page. It
is ignored for regular streams.</p>

<p style="margin-top: 1em">Author value <br>
Comment value <br>
Copyright value <br>
Title value <br>
Set metadata corresponding to the option. All these options
are deprecated in favor of Metadata.</p>

<p style="margin-top: 1em">Metadata key value <br>
Set metadata value on the output stream.</p>

<p style="margin-top: 1em">UseDefaults <br>
NoDefaults <br>
Control whether default codec options are used for the
stream or not. Default is UseDefaults unless disabled
globally.</p>

<p style="margin-top: 1em">NoAudio <br>
NoVideo <br>
Suppress audio/video.</p>

<p style="margin-top: 1em">AudioCodec codec_name
(encoding,audio) <br>
Set audio codec.</p>

<p style="margin-top: 1em">AudioBitRate rate
(encoding,audio) <br>
Set bitrate for the audio stream in kbits per second.</p>

<p style="margin-top: 1em">AudioChannels n (encoding,audio)
<br>
Set number of audio channels.</p>

<p style="margin-top: 1em">AudioSampleRate n
(encoding,audio) <br>
Set sampling frequency for audio. When using low bitrates,
you should lower this frequency to 22050 or 11025. The
supported frequencies depend on the selected audio
codec.</p>

<p style="margin-top: 1em">AVOptionAudio [codec:]option
value (encoding,audio) <br>
Set generic or private option for audio stream. Private
option must be prefixed with codec name or codec must be
defined before.</p>

<p style="margin-top: 1em">AVPresetAudio preset
(encoding,audio) <br>
Set preset for audio stream.</p>

<p style="margin-top: 1em">VideoCodec codec_name
(encoding,video) <br>
Set video codec.</p>

<p style="margin-top: 1em">VideoBitRate n (encoding,video)
<br>
Set bitrate for the video stream in kbits per second.</p>

<p style="margin-top: 1em">VideoBitRateRange range
(encoding,video) <br>
Set video bitrate range.</p>

<p style="margin-top: 1em">A range must be specified in the
form minrate-maxrate, and specifies the minrate and maxrate
encoding options expressed in kbits per second.</p>

<p style="margin-top: 1em">VideoBitRateRangeTolerance n
(encoding,video) <br>
Set video bitrate tolerance in kbits per second.</p>

<p style="margin-top: 1em">PixelFormat pixel_format
(encoding,video) <br>
Set video pixel format.</p>

<p style="margin-top: 1em">Debug integer (encoding,video)
<br>
Set video debug encoding option.</p>

<p style="margin-top: 1em">Strict integer (encoding,video)
<br>
Set video strict encoding option.</p>

<p style="margin-top: 1em">VideoBufferSize n
(encoding,video) <br>
Set ratecontrol buffer size, expressed in KB.</p>

<p style="margin-top: 1em">VideoFrameRate n
(encoding,video) <br>
Set number of video frames per second.</p>

<p style="margin-top: 1em">VideoSize (encoding,video) <br>
Set size of the video frame, must be an abbreviation or in
the form WxH. See the Video size section in the
ffmpeg-utils(1) manual.</p>

<p style="margin-top: 1em">Default value is
&quot;160x128&quot;.</p>

<p style="margin-top: 1em">VideoIntraOnly (encoding,video)
<br>
Transmit only intra frames (useful for low bitrates, but
kills frame rate).</p>

<p style="margin-top: 1em">VideoGopSize n (encoding,video)
<br>
If non-intra only, an intra frame is transmitted every
VideoGopSize frames. Video synchronization can only begin at
an intra frame.</p>

<p style="margin-top: 1em">VideoTag tag (encoding,video)
<br>
Set video tag.</p>

<p style="margin-top: 1em">VideoHighQuality
(encoding,video) <br>
Video4MotionVector (encoding,video) <br>
BitExact (encoding,video) <br>
Set bitexact encoding flag.</p>

<p style="margin-top: 1em">IdctSimple (encoding,video) <br>
Set simple IDCT algorithm.</p>

<p style="margin-top: 1em">Qscale n (encoding,video) <br>
Enable constant quality encoding, and set video qscale
(quantization scale) value, expressed in n QP units.</p>

<p style="margin-top: 1em">VideoQMin n (encoding,video)
<br>
VideoQMax n (encoding,video) <br>
Set video qmin/qmax.</p>

<p style="margin-top: 1em">VideoQDiff integer
(encoding,video) <br>
Set video qdiff encoding option.</p>

<p style="margin-top: 1em">LumiMask float (encoding,video)
<br>
DarkMask float (encoding,video) <br>
Set lumi_mask/dark_mask encoding options.</p>

<p style="margin-top: 1em">AVOptionVideo [codec:]option
value (encoding,video) <br>
Set generic or private option for video stream. Private
option must be prefixed with codec name or codec must be
defined before.</p>

<p style="margin-top: 1em">AVPresetVideo preset
(encoding,video) <br>
Set preset for video stream.</p>

<p style="margin-top: 1em">preset must be the path of a
preset file.</p>

<p style="margin-top: 1em">Server status stream</p>

<p style="margin-top: 1em">A server status stream is a
special stream which is used to show statistics about the
ffserver operations.</p>

<p style="margin-top: 1em">It must be specified setting the
option Format to status.</p>

<p style="margin-top: 1em">Redirect section <br>
A redirect section specifies where to redirect the requested
URL to another page.</p>

<p style="margin-top: 1em">A redirect section must be
introduced by the line:</p>

<p style="margin-top: 1em">&lt;Redirect NAME&gt;</p>

<p style="margin-top: 1em">where NAME is the name of the
page which should be redirected.</p>

<p style="margin-top: 1em">It only accepts the option URL,
which specify the redirection URL.</p>

<p style="margin-top: 1em">STREAM EXAMPLES <br>
&Acirc;&middot; Multipart JPEG</p>

<p style="margin-top: 1em">&lt;Stream test.mjpg&gt; <br>
Feed feed1.ffm <br>
Format mpjpeg <br>
VideoFrameRate 2 <br>
VideoIntraOnly <br>
NoAudio <br>
Strict -1 <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Single JPEG</p>

<p style="margin-top: 1em">&lt;Stream test.jpg&gt; <br>
Feed feed1.ffm <br>
Format jpeg <br>
VideoFrameRate 2 <br>
VideoIntraOnly <br>
VideoSize 352x240 <br>
NoAudio <br>
Strict -1 <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Flash</p>

<p style="margin-top: 1em">&lt;Stream test.swf&gt; <br>
Feed feed1.ffm <br>
Format swf <br>
VideoFrameRate 2 <br>
VideoIntraOnly <br>
NoAudio <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; ASF
compatible</p>

<p style="margin-top: 1em">&lt;Stream test.asf&gt; <br>
Feed feed1.ffm <br>
Format asf <br>
VideoFrameRate 15 <br>
VideoSize 352x240 <br>
VideoBitRate 256 <br>
VideoBufferSize 40 <br>
VideoGopSize 30 <br>
AudioBitRate 64 <br>
StartSendOnKey <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; MP3 audio</p>

<p style="margin-top: 1em">&lt;Stream test.mp3&gt; <br>
Feed feed1.ffm <br>
Format mp2 <br>
AudioCodec mp3 <br>
AudioBitRate 64 <br>
AudioChannels 1 <br>
AudioSampleRate 44100 <br>
NoVideo <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Ogg Vorbis
audio</p>

<p style="margin-top: 1em">&lt;Stream test.ogg&gt; <br>
Feed feed1.ffm <br>
Metadata title &quot;Stream title&quot; <br>
AudioBitRate 64 <br>
AudioChannels 2 <br>
AudioSampleRate 44100 <br>
NoVideo <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Real with audio
only at 32 kbits</p>

<p style="margin-top: 1em">&lt;Stream test.ra&gt; <br>
Feed feed1.ffm <br>
Format rm <br>
AudioBitRate 32 <br>
NoVideo <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Real with audio
and video at 64 kbits</p>

<p style="margin-top: 1em">&lt;Stream test.rm&gt; <br>
Feed feed1.ffm <br>
Format rm <br>
AudioBitRate 32 <br>
VideoBitRate 128 <br>
VideoFrameRate 25 <br>
VideoGopSize 25 <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; For stream
coming from a file: you only need to set the input filename
and optionally a new format.</p>

<p style="margin-top: 1em">&lt;Stream file.rm&gt; <br>
File &quot;/usr/local/httpd/htdocs/tlive.rm&quot; <br>
NoAudio <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">&lt;Stream file.asf&gt; <br>
File &quot;/usr/local/httpd/htdocs/test.asf&quot; <br>
NoAudio <br>
Metadata author &quot;Me&quot; <br>
Metadata copyright &quot;Super MegaCorp&quot; <br>
Metadata title &quot;Test stream from disk&quot; <br>
Metadata comment &quot;Test comment&quot; <br>
&lt;/Stream&gt;</p>

<p style="margin-top: 1em">SEE ALSO <br>
ffserver-all(1), the doc/ffserver.conf example, ffmpeg(1),
ffplay(1), ffprobe(1), ffmpeg-utils(1), ffmpeg-scaler(1),
ffmpeg-resampler(1), ffmpeg-codecs(1), <br>
ffmpeg-bitstream-filters(1), ffmpeg-formats(1),
ffmpeg-devices(1), ffmpeg-protocols(1),
ffmpeg-filters(1)</p>

<p style="margin-top: 1em">AUTHORS <br>
The FFmpeg developers.</p>

<p style="margin-top: 1em">For details about the
authorship, see the Git history of the project
(git://source.ffmpeg.org/ffmpeg), e.g. by typing the command
git log in the FFmpeg source directory, or <br>
browsing the online repository at
&lt;http://source.ffmpeg.org&gt;.</p>

<p style="margin-top: 1em">Maintainers for the specific
components are listed in the file MAINTAINERS in the source
code tree.</p>
 
<p style="margin-top: 1em">FFSERVER(1)</p>
<hr>
</body>
</html>
