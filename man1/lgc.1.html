<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:21:44 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>LGC(1) User Commands LGC(1)</p>

<p style="margin-top: 1em">NAME <br>
lgc - translate and publish logiweb page</p>

<p style="margin-top: 1em">SYNOPSIS <br>
lgc [OPTION]... [SOURCE]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The Logiweb compiler translates Logiweb pages from source
format to a number of machine and human readable
formats.</p>

<p style="margin-top: 1em">Pages may contain free text
mixed with machine intelligible objects like computer
programs, testsuites, and formal proofs. The compiler can
compile embedded computer programs, <br>
run testsuites, and check the correctness of formal
proofs.</p>

<p style="margin-top: 1em">The compiler takes a source file
as input and produces a &rsquo;vector&rsquo;, a
&rsquo;rack&rsquo;, and a &rsquo;rendering&rsquo; as output.
Source, vector, rack, and rendering all represent the same
Logiweb page. <br>
The source format is suited for authoring of Logiweb pages
using an ordinary text editor. The vector is a condensed
representation suited for transmission over the Internet.
The <br>
rack is a comprehensive representation suited for storing on
a local disk. The rendering is a human readable
representation suited for reading in a web browser.</p>

<p style="margin-top: 1em">The compiler assigns a
world-wide unique &rsquo;reference&rsquo; to each page it
translates. A reference comprises around 30 bytes. Having
the reference of a page one may retrieve the vector <br>
of the page via an untrusted network from an untrusted
repository. This is so since the reference contains a
RIPEMD-160 hash code which allows to verify the authenticity
of the <br>
page.</p>

<p style="margin-top: 1em">References are expressed in
&rsquo;mixed endian hexadecimal&rsquo;: Each byte is written
with the most significant hex digit first, bytes are given
in network byte order, and capital letters <br>
are used for the hex digits A to F.</p>

<p style="margin-top: 1em">OPTIONS <br>
-h, --help <br>
Print help on frequently used options.</p>

<p style="margin-top: 1em">-H, --help2 <br>
Print help on less frequent options.</p>

<p style="margin-top: 1em">--help3 <br>
Print help on configuration options.</p>

<p style="margin-top: 1em">-l location, --link=location
<br>
Store a symbolic link at the given location to the rendering
output. The rightmost colon (if any) in the location is
replaced by the name of the source file (without the <br>
.lgs extension). An opening tilde (if any) is replaced by
$HOME. The default values are ~/.logiweb/name/:/ and : so
that two links are produced by default. See LIST <br>
OPTIONS below on how to give this option more than once.</p>

<p style="margin-top: 1em">--license <br>
Print the license (i.e. GNU/GPL) of the lgc compiler.</p>

<p style="margin-top: 1em">-n location, --namepath=location
<br>
Read pages given by name from given location. The rightmost
colon (if any) in the location is replaced by the given
name. Such names may be given in the source file being <br>
translated, c.f. lgc(5). An opening tilde in the location
(if any) is replaced by $HOME. The default value of NAMEPATH
is ~/.logiweb/name/:/rack.lgr. See LIST OPTIONS <br>
below on how to give this option more than once.</p>

<p style="margin-top: 1em">-o name, --option=name <br>
Process all configuration files, environment variables, and
command line options. Then print the value of the option
with the given name.</p>

<p style="margin-top: 1em">--options <br>
Like -o above, but prints all options.</p>

<p style="margin-top: 1em">-p location, --path location
<br>
Read referenced pages from given location. The rightmost
colon (if any) in the location is replaced by the reference
of the page expressed in mixed endian hexadecimal. <br>
Such references may come from the source file, c.f. lgc(5),
or may be used for locating transitively referenced pages,
i.e. pages referenced from referenced pages. An <br>
opening tilde in the location (if any) is replaced by $HOME.
The default value of PATH is ~/.logiweb/logiweb/:/rack.lgr.
See LIST OPTIONS below on how to give this option <br>
more than once.</p>

<p style="margin-top: 1em">-r location,
--rendering=location <br>
Store rendering at the given location. The rightmost colon
(if any) in the location is replaced by the reference of the
page. An opening tilde (if any) is replaced by <br>
$HOME. The default value is ~/.logiweb/logiweb/:/. The
vector and rack produced by lgc are stored as vector.lgw and
rack.lgr at the given location.</p>

<p style="margin-top: 1em">-s file, --siteconfig=file <br>
Read options from given file, c.f. CONFIGURATION FILES
below. An opening tilde (if any) is replaced by $HOME. The
default value is /etc/logiweb/lgc.conf.</p>

<p style="margin-top: 1em">-u file, --userconfig=file <br>
Read options from given file, c.f. CONFIGURATION FILES
below. An opening tilde (if any) is replaced by $HOME. The
default value is ~/.logiweb/lgc.conf.</p>

<p style="margin-top: 1em">--source=file <br>
Translate given file. &rsquo;lgc --source=X&rsquo; is like
&rsquo;lgc X&rsquo;.</p>

<p style="margin-top: 1em">-v verbosity,
--verbose=verbosity <br>
Set verbosity to given level. Levels are: 1. Print error
messages. 2. Also print warning message. 3. Also print
progress messages. 4. Print more progress messages. 5. <br>
Print debugging information. Level 0 is reserved for
silence. Default level is 3.</p>

<p style="margin-top: 1em">--version <br>
Print the version of the lgc compiler.</p>

<p style="margin-top: 1em">CONFIGURATION OPTIONS <br>
While it is possible to give the following options on the
command line, they are intended to be used in configuration
files.</p>

<p style="margin-top: 1em">--leap=leapspec <br>
Tell lgc that a leap second occurred or will occur at the
given point in time. A leapspec has format</p>


<p style="margin-top: 1em">GRD-&lt;year&gt;-&lt;month&gt;-&lt;day&gt;[+1|-1].</p>

<p style="margin-top: 1em">The year, month, and day are
given as a Gregorian date. Days go from UTC midnight to UTC
midnight. The month and day have two digits. The year has
four until year 9999. A <br>
leapspec indicates that the length of the given day is
altered by the given amount (+1 second or -1 second). The
leap affects the last minute of the last hour of the given
<br>
UTC day. See LIST OPTIONS below on how to give this option
more than once.</p>

<p style="margin-top: 1em">--newline=value <br>
Tell lgc what host newline convention to use. Possible
values are CR, LF, CRLF, or LFCR. For the sake of
portability, Logiweb always uses LF internally.</p>

<p style="margin-top: 1em">--script=headline <br>
Tell lgc what line to start with when emitting an
executable. Default is &rsquo;#!/usr/bin/lgwam
script&rsquo;</p>

<p style="margin-top: 1em">LIST OPTIONS <br>
The value of each option is a list of strings. Each command
line option transforms the value of some option. The
available transformations are: (1) Discard the current value
and <br>
set the given option to a one element list containing the
given string. (2) Add the given string in front of the given
option. (3) Add the given string at the end of the given
<br>
option. (4) Set the given option to the empty list. These
four possibilities are illustrated in the following using
the PATH variable as an example.</p>

<p style="margin-top: 1em">-p xyzzy, --path=xyzzy <br>
Set PATH to a one element list containing xyzzy.</p>

<p style="margin-top: 1em">+p foo, --path+foo <br>
Add foo in front of PATH. If given after the option above,
the PATH now has value foo;xyzzy.</p>

<p style="margin-top: 1em">++p bar, --path++bar <br>
Add bar at end of PATH. If given after the options above,
the PATH now has value foo;xyzzy;bar.</p>

<p style="margin-top: 1em">--path Set path to the empty
list</p>

<p style="margin-top: 1em">Options like HELP, VERSION, and
so on have default value &rsquo;no&rsquo;. Such options take
effect when they differ from &rsquo;no&rsquo;. As an
example, -h translates to --help which sets HELP to the <br>
empty list which differs from &rsquo;no&rsquo;.</p>

<p style="margin-top: 1em">Options like SITECONFIG,
USERCONFIG, and RENDERING only use the first string in the
list. As an example, &rsquo;-s file&rsquo; translates to
&rsquo;--siteconfig=file&rsquo; which sets the first (and
<br>
only) element of SITECONFIG to file.</p>

<p style="margin-top: 1em">A source file foo given on the
command line translate to --source=foo. The compiler only
uses the first string of the SOURCE option.</p>

<p style="margin-top: 1em">The compiler processes the
command line left to right. Long options are case
insensitive. Short options are case sensitive. Short options
are translated to long options before <br>
processing.</p>

<p style="margin-top: 1em">CONFIGURATION FILES <br>
The compiler processes options from the following sources in
the order given.</p>

<p style="margin-top: 1em">Compiled in defaults <br>
These are the default values which can only be changed by
recompiling lgc.</p>

<p style="margin-top: 1em">Script defaults <br>
The compiler is itself a Logiweb script and may look like
this:</p>

<p style="margin-top: 1em">&gt; more /usr/bin/lgc <br>
#!/usr/bin/lgwam script <br>
string <br>

015F43BE4A17DAD915936B7A773154A80946AEC82EFBEECDA4A7D7B80806
<br>
lgc <br>
execute <br>
siteconfig=/etc/logiweb/lgc.conf</p>

<p style="margin-top: 1em">The first five lines identify
the lgc compiler. The remaining lines define options exactly
like long options do on the command line except that the
leading two hyphens are <br>
omitted. Blank lines and lines starting with a hashmark (#)
are ignored. Lines may be ended by an arbitrary sequence of
CR and LF characters.</p>

<p style="margin-top: 1em">Site configuration file <br>
The site configuration file is treated like the option part
of the script.</p>

<p style="margin-top: 1em">User configuration file <br>
The user configuration file is treated like the site
configuration file. The only difference between the two is
that the site file is processed before the user file.</p>

<p style="margin-top: 1em">Environment variables <br>
Environment options like LGC_FOO=xyzzy are treated as
--FOO=xyzzy. Environment options can only be used for
setting options to one-element lists of strings. As a
special <br>
case, the environment variable HOME=xyzzy is treated as
--HOME=xyzzy.</p>

<p style="margin-top: 1em">Command line options <br>
These were treated in great detail earlier in this man
page.</p>

<p style="margin-top: 1em">Options from the six sources
above are treated as one long list of option
transformations. As an example, --path+foo on the command
line adds foo in front of whatever the five <br>
other sources have defined PATH to be.</p>

<p style="margin-top: 1em">The compiler reads options once
but process them three times: First for finding the value of
SITECONFIG ignoring the site and user configuration files.
Second for finding the <br>
value of USERCONFIG ignoring the user configuration file.
And finally for finding the value of all the other
options.</p>

<p style="margin-top: 1em">The compiler does not restrict
the set of possible options to those it knows itself. Hence,
&rsquo;lgc --foo=bar source&rsquo; will define the FOO
option to equal &rsquo;bar&rsquo;. Such user defined <br>
options can be picked up by user defined rendering functions
in the source and may affect the outcome of rendering. Note
that if the rendering is put on WWW this may expose the <br>
options used to the outside world. This includes the
environment variable HOME and variables starting with LGC_.
Use &rsquo;lgc --options&rsquo; to see what might get
exposed to the outside <br>
world.</p>

<p style="margin-top: 1em">PATH ITEMS <br>
When looking up a page by name or reference, lgc considers
the locations in NAMEPATH and PATH, respectively, one at a
time as follows.</p>

<p style="margin-top: 1em">(1) If the item does not start
with &quot;file:&quot; or &quot;http:&quot;, then
&quot;file:&quot; is prepended.</p>

<p style="margin-top: 1em">(2) The item is divided in
scheme and contents at the leftmost colon character. Hence,
the scheme is either &quot;file&quot; or
&quot;http&quot;.</p>

<p style="margin-top: 1em">(3) If the scheme is
&quot;file&quot; and the contents starts with a tilde, then
the tilde is replaced by the value of $HOME.</p>

<p style="margin-top: 1em">(4) The rightmost colon
character (if any) is replaced by the name (for NAMEPATH) or
reference (for PATH) of the page. The reference is expressed
in mixed endian hexadecimal.</p>

<p style="margin-top: 1em">(5) The page is looked up as a
file or using http depending on the scheme. A page with
extension .lgr is treated as a Logiweb rack. A page with
extension .lgw is treated as a <br>
Logiweb vector. A page with extension .lgu is treated as an
URL which points at the page to be fetched. That URL is
supposed to have extension .lgr or .lgw or .lgu. The .lgu
<br>
extension is intended for future uses involving CGI
scripts.</p>

<p style="margin-top: 1em">As an example, if the item is
~/.logiweb/cache/:/page.lgr and the referenced page has
reference 01AB then .logiweb/cache/01AB/page.lgr under the
users home catalogue is retrieved <br>
and is interpretted as a Logiweb rack.</p>

<p style="margin-top: 1em">FILES <br>
The site configuration file typically resides in
/etc/logiweb/lgc.conf. It is considered to be blank if it
does not exist.</p>

<p style="margin-top: 1em">The user configuration file
typically resides in ~/.logiweb/lgc.conf. It is considered
to be blank if it does not exist.</p>

<p style="margin-top: 1em">Example source files typically
reside in /usr/share/doc/logiweb/examples.</p>

<p style="margin-top: 1em">Source files should have
extension .lgs (this may become mandatory in the
future).</p>

<p style="margin-top: 1em">Links to rendering output
typically have no extension.</p>

<p style="margin-top: 1em">Logiweb vectors (compact
representations of Logiweb pages suited for transmission
over the internet) have extension .lgw.</p>

<p style="margin-top: 1em">Logiweb racks (precompiled
representations of Logiweb pages suited for fast loading)
have extension .lgr.</p>

<p style="margin-top: 1em">Logiweb pointers (page
references in mixed endian hexadecimal) have extension
.lgp.</p>

<p style="margin-top: 1em">Logiweb URL indirections have
extension .lgu.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
For each long option there is an associated environment
variable, c.f. CONFIGURATION FILES above. Furthermore, lgc
may use the HOME environment variable.</p>

<p style="margin-top: 1em">SECURITY CONSIDERATIONS <br>
The HOME environment variable and environment variables
starting with LGC_ may get exposed if rendering output is
made available via WWW.</p>

<p style="margin-top: 1em">All transitively referenced
pages are rendered locally. Local rendering may involve
invokation of latex, bibtex, makeindex, and dvipdfm. Local
rendering should occur in a chroot <br>
jail, but this has not yet been implemented. Thus: only
reference trusted pages.</p>

<p style="margin-top: 1em">All pages may define executable
code. Executables end up under the rendering directory. Such
executables can do anything if they are invoked. The lgc
compiler never itself <br>
invokes an executable, but an attacker could either persuade
or fool you to run it or could exploit security holes in
latex to do so. Thus: only reference trusted pages.</p>

<p style="margin-top: 1em">When loading a Logiweb vector,
lgc uses the RIPEMD-160 hash function to verify the
authenticity of the received vector. lgc makes no check of
racks. Thus, only load racks from <br>
trusted places (typically your own harddisk and nowhere
else).</p>

<p style="margin-top: 1em">Feel free to include locations
like http://untrusted.com/:/vector.lgw in PATH. RIPEMD-160
will protect you. But never include .lgr references to
untrusted places and never <br>
include references to untrusted places in NAMEPATH.</p>

<p style="margin-top: 1em">AUTHOR <br>
Klaus Grue, http://logiweb.eu/</p>

<p style="margin-top: 1em">SEE ALSO <br>
lgwam(1), lgc(5), lgc.conf(5), logiweb(5)</p>

<p style="margin-top: 1em">Logiweb JULY 2009 LGC(1)</p>
<hr>
</body>
</html>
