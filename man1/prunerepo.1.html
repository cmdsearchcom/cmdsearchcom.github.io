<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PRUNEREPO(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PRUNEREPO(1)</td>
    <td class="head-vol">&#x00A0;</td>
    <td class="head-rtitle">PRUNEREPO(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
prunerepo - remove old packages from rpm-md repository
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
prunerepo [--days DAYS] [--cleancopr] [--nocreaterepo] [--verbose] [-h] [-v]
  path
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
RPM packages that have newer version available in that same repository are
  deleted from filesystem and the rpm-md metadata are recreated afterwards. If
  there is a source rpm for a deleted rpm (and they both share the same
  directory path), then the source rpm will be deleted as well.
<div style="height: 1.00em;">&#x00A0;</div>
Support for specific repository structure (e.g. COPR) is also available making
  it possible to additionally remove build logs and whole build directories
  associated with a package.
<div style="height: 1.00em;">&#x00A0;</div>
After deletion of obsoleted packages, the command &quot;createrepo_c --database
  --update&quot; is called to recreate the repository metadata.
<h1 class="Sh" title="Sh" id="ARGUMENTS"><a class="selflink" href="#ARGUMENTS">ARGUMENTS</a></h1>
path
<div style="margin-left: 4.00ex;">local path to a yum repository</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
--days DAYS
<div style="margin-left: 4.00ex;">only remove packages that are DAYS old or
  older by their build date. This option also affects subsequent deletion of
  build directories with no rpm or srpm inside when --cleancopr is used. These
  directories are deleted only if their latest modification time is more than
  DAYS in past.</div>
<div class="Pp"></div>
--cleancopr
<div style="margin-left: 4.00ex;">additionaly remove whole copr build dirs
  (contain <i>build.info</i> file) and logs if the associated package gets
  deleted</div>
<div class="Pp"></div>
--nocreaterepo
<div style="margin-left: 4.00ex;">repository is not automatically recreated
  after deletion</div>
<div class="Pp"></div>
--verbose
<div style="margin-left: 4.00ex;">print all deleted items to stdout</div>
<div class="Pp"></div>
--verbose
<div style="margin-left: 4.00ex;">do not print any info messages, just do your
  job</div>
<div class="Pp"></div>
-h, --help
<div style="margin-left: 4.00ex;">show this help message and exit</div>
<div class="Pp"></div>
-v, --version
<div style="margin-left: 4.00ex;">print program version and exit</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
prunerepo /path/to/repo
<div style="margin-left: 4.00ex;">removes all packages for which a newer version
  is available in the repository</div>
<div class="Pp"></div>
prunerepo /path/to/repo --cleancopr
<div style="margin-left: 4.00ex;">the same thing but also removes copr-specific
  build directories if they no longer contain any srpm/rpm package</div>
<div class="Pp"></div>
prunerepo /path/to/repo --days 7
<div style="margin-left: 4.00ex;">does not delete a package built in last 7 days
  even if a newer version is available for it</div>
<div class="Pp"></div>
prunerepo /path/to/repo --days 7 --nocreaterepo
<div style="margin-left: 4.00ex;">the same thing but omits call to createrepo_c
  at the end</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Michal Novotny &lt;clime@redhat.com&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">04/20/2017</td>
    <td class="foot-os">&#x00A0;</td>
  </tr>
</table>
</body>
</html>
