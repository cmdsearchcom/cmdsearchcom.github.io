<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>d.legend(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">d.legend(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">d.legend(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>d.legend</b> - Displays a legend for a 2D or 3D raster map in the
  active frame of the graphics monitor.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
display, cartography, legend
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>d.legend</b>
<div>&#x00A0;</div>
<b>d.legend --help</b>
<div>&#x00A0;</div>
<b>d.legend</b> [-<b>vctnsfdbl</b>] [<b>raster</b>=<i>name</i>]
  [<b>raster_3d</b>= <i>name</i>] [<b>title</b>=<i>string</i>]
  [<b>title_fontsize</b>= <i>float</i>] [<b>lines</b>=<i>integer</i>]
  [<b>thin</b>= <i>integer</i>] [<b>units</b>=<i>string</i>]
  [<b>labelnum</b>=<i>integer</i>]
  [<b>label_values</b>=<i>float</i>[,<i>float</i>,...]] [
  <b>label_step</b>=<i>float</i>] [ <b>digits</b>=<i>integer</i>]
  [<b>at</b>=<i>bottom,top,left,right</i>] [
  <b>use</b>=<i>float</i>[,<i>float</i>,...]] [ <b>range</b>=<i>min,max</i>]
  [<b>color</b>=<i>name</i>] [<b>font</b>=<i>string</i>]
  [<b>fontsize</b>=<i>float</i>] [ <b>path</b>=<i>name</i>]
  [<b>charset</b>=<i>string</i>] [ <b>border_color</b>=<i>name</i>]
  [<b>bgcolor</b>= <i>name</i>] [--<b>help</b>] [--<b>verbose</b>]
  [--<b>quiet</b>] [-- <b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Do not show category labels</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Do not show category numbers</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Draw legend ticks for labels</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Skip categories with no label</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Draw smooth gradient</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Flip legend</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Add histogram to smoothed legend</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show background</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use logarithmic scale</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raster</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>raster_3d</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of 3D raster map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>title</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Legend title</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>title_fontsize</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Title font size
    <div>&#x00A0;</div>
    Default: Same as fontsize
    <div>&#x00A0;</div>
    Options: <i>1-360</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lines</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of text lines (useful for truncating long legends)
    <div>&#x00A0;</div>
    Options: <i>0-1000</i>
    <div>&#x00A0;</div>
    Default: <i>0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>thin</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Thinning factor (thin=10 gives cats 0,10,20...)
    <div>&#x00A0;</div>
    Options: <i>1-1000</i>
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>units</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Units to display after labels (e.g. meters)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>labelnum</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of text labels for smooth gradient legend
    <div>&#x00A0;</div>
    Options: <i>2-100</i>
    <div>&#x00A0;</div>
    Default: <i>5</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>label_values</b>=<i>float[,</i><i>float</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specific values to draw ticks</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>label_step</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Display label every step</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>digits</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of digits after decimal point
    <div>&#x00A0;</div>
    Options: <i>0-6</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>at</b>=<i>bottom,top,left,right</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Size and placement as percentage of screen coordinates (0,0 is lower left)
    <div>&#x00A0;</div>
    bottom,top,left,right
    <div>&#x00A0;</div>
    Options: <i>0-100</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>use</b>=<i>float[,</i><i>float</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List of discrete category numbers/values for legend</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>range</b>=<i>min,max</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use a subset of the map range for the legend (min,max)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>color</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Text color
    <div>&#x00A0;</div>
    Either a standard color name or R:G:B triplet
    <div>&#x00A0;</div>
    Default: <i>black</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>font</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Font name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>fontsize</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Font size
    <div>&#x00A0;</div>
    Default: Auto-scaled
    <div>&#x00A0;</div>
    Options: <i>1-360</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>path</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Path to font file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>charset</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Text encoding (only applicable to TrueType fonts)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>border_color</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Border color
    <div>&#x00A0;</div>
    Either a standard color name, R:G:B triplet, or &quot;none&quot;
    <div>&#x00A0;</div>
    Default: <i>black</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>bgcolor</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Background color
    <div>&#x00A0;</div>
    Either a standard color name, R:G:B triplet, or &quot;none&quot;
    <div>&#x00A0;</div>
    Default: <i>white</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>d.legend</i> displays a legend for a user-specified raster map or 3D raster
  map layer in the active frame on the graphics monitor.
<div class="Pp"></div>
The legend&#x2019;s default size is based on the dimensions of the active frame,
  specifically its height. <i>d.legend</i> will only obscure those portions of
  the active frame that directly underlie the legend.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
When using the <b>at</b> to size &amp; place the legend, a user may create a
  horizontal legend by making the box wider than it is tall.
<div class="Pp"></div>
Raster maps based on floating point values will display smoothed, from greatest
  to smallest value, while categorical raster maps will display in order, from
  top to bottom. Horizontal legends will always be smoothed. If the box is
  defined with inverted y-values or an inverted <b>range</b>, the legend will
  automatically flip. If this is not the desired result, the <b>-f</b> flag may
  be used to flip it back.
<div class="Pp"></div>
If the user attempts to display a very long legend in a relatively short display
  frame, the legend may appear in unreadably small text, or even revert to a
  smooth gradient legend. Use the <b>lines</b>, <b>thin</b>, <b>use</b>,
  <b>range</b>, and/or <b>-n</b> options to reduce the number of categories to
  be displayed, or the <b>-s</b> flag to force a smooth gradient legend.
<div class="Pp"></div>
The <b>lines</b> option will display the first number of categories, as defined
  by <i>value</i>, contained in the raster map. When used with the <b>-n</b>
  flag, it takes on a new meaning: &quot;up to category #&quot;. When used with
  both <b>thin</b> and the <b>-n</b> flag, its meaning becomes more obscure.
  When using <b>lines</b>, auto-scaled text similar to &quot;4 of 16
  categories&quot; will be placed at the bottom of the legend.
<div class="Pp"></div>
The <b>thin</b> option sets the thinning factor. For raster maps with a 0th
  category, <b>thin=</b><i>10</i> gives cats [0,10,20,...]. For raster maps
  starting at category 1, <b>thin=</b><i>10</i> gives cats [1,11,21,...].
<div class="Pp"></div>
The <b>use</b> option lets the user create a legend made up of arbitrary
  category values. e.g. <b>use=</b><i>1000,100,10,0,-10,-100,-1000</i>
<div class="Pp"></div>
The <b>range</b> option lets the user define the minimum and maximum categories
  to be used in the legend. It may also be used to define the limits of a smooth
  gradient legend created from a raster containing floating point values. Note
  the color scale will remain faithful to the category values as defined with
  <i>r.colors</i>, and the <b>range</b> may be extended to the limits defined by
  the <i>r.colors</i> color map.
<div class="Pp"></div>
The flag <b>-n</b> is useful for categorial maps, as it suppresses the drawing
  of non-existing categories (otherwise the full range is shown).
<div class="Pp"></div>
Vertical legends produced with <i>d.legend</i> will place text labels to the
  right of the legend box, horizontal legends will place text below. This text
  will be auto-scaled to fit within the frame, reducing the size of the legend
  if necessary. Legends positioned with the <b>at</b> option will not auto-scale
  text, in order to provide more control to the user. Smaller text may be
  obtained in this case by reducing the height of the box or by using the
  <b>fontsize</b> option. The <b>-c</b> and <b>-v</b> flags may be used to
  suppress the display of category numbers and labels respectively, or used
  together to suppress all text of categorial raster maps.
<div class="Pp"></div>
The text produced from floating-point raster maps will automatically create
  output with a meaningful number of significant digits. For very small values,
  numbers will be expressed in scientific notation, e.g. &quot;1.7e-9&quot;.
  Option <b>digits</b> can be used to determine how many digits after decimal
  point will be displayed.
<div class="Pp"></div>
When the <b>-d</b> flag is used to display a histogram distribution along side
  the smoothed gradient legend, note that the statistics are calculated on the
  <i>current computational region</i> settings set by <i>g.region</i>. The
  default <b>range</b> however covers the entire natural bounds of the input
  map. If the histogram appears empty, check your region settings.
<div class="Pp"></div>
If the raster map&#x2019;s <i>units</i> metadata has been set with the
  <i>r.support</i> module then it will be displayed along side the legend.
<div class="Pp"></div>
The option <b>title</b> will display the custom title at the top of the legend.
  In case of vertical legend the title is aligned to the left edge of legend, in
  case of horizontal legend the title is aligned to the center.
  <b>title_fontsize</b> can be used to set the size of legend title. By default
  the legend title font size is the same as labels font size.
<div class="Pp"></div>
There are different options to customize displayed labels. The <b>labelnum</b>
  set the number of labels which are displayed in regular intervals. The
  <b>label_values</b> will specify the values where the labels will be
  displayed. The <b>label_step</b> will display labels at values which are
  divisible by this value.
<div class="Pp"></div>
The flag <b>-t</b> will show ticks at labels.
<div class="Pp"></div>
The flag <b>-b</b> will show the background. Options <b>bgcolor</b> and
  <b>border_color</b> can be used to choose the color of border and background
  fill.
<div class="Pp"></div>
The flag <b>-l</b> will switch to logarithmic scale. In case this flag is used,
  the provided step in <b>label_step</b> is interpreted in the logarithmic
  space.
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Displaying the legend along with a histogram (North Carolina Sample dataset):
<div>&#x00A0;</div>
<pre>
g.region raster=elevation -p
d.rast elevation
d.legend -d elevation
</pre>
Displaying the legend with custom labels and background:
<div>&#x00A0;</div>
<pre>
g.region raster=elevation -p
d.rast elevation
d.legend raster=elevation -t label_step=20 label_values=108 title=Legend -b bgcolor=255:255:204 border_color=gray
</pre>
Displaying the legend with logarithmic scale:
<div>&#x00A0;</div>
<pre>
g.region raster=elevation -p
r.watershed -a elevation=elevation threshold=1000 accumulation=flowacc
d.rast flowacc
d.legend raster=flowacc -t -l label_step=1
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>d.barscale,</i> <i>d.colortable,</i> <i>d.font,</i> <i>d.grid,</i>
  <i>d.rast,</i> <i>d.rast.leg,</i> <i>d.text,</i> <i>d.vect.thematic,</i>
  <i>r.reclass,</i> <i>r.stats,</i> <i>r3.stats</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Bill Brown, U.S. Army Construction Engineering Research Laboratories
<div>&#x00A0;</div>
Late 2002: Rewrite of much of the code. Hamish Bowman, Otago University, New
  Zealand
<div>&#x00A0;</div>
Additional improvements from various authors
<div class="Pp"></div>
<i>Last changed: $Date: 2016-07-27 20:05:07 +0200 (Wed, 27 Jul 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: d.legend source code (history)
<div class="Pp"></div>
Main index | Display index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
