<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:43:21 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>X11VNC(1) User Commands X11VNC(1)</p>

<p style="margin-top: 1em">NAME <br>
x11vnc - allow VNC connections to real X11 displays <br>
version: 0.9.14, lastmod: 2013-11-21</p>

<p style="margin-top: 1em">SYNOPSIS <br>
x11vnc [OPTION]...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Typical usage is:</p>

<p style="margin-top: 1em">Run this command in a shell on
the remote machine &quot;far-host&quot; with X session you
wish to view:</p>

<p style="margin-top: 1em">x11vnc -display :0</p>

<p style="margin-top: 1em">Then run this in another window
on the machine you are sitting at:</p>

<p style="margin-top: 1em">vncviewer far-host:0</p>

<p style="margin-top: 1em">Once x11vnc establishes
connections with the X11 server and starts listening as a
VNC server it will print out a string: PORT=XXXX where XXXX
is typically 5900 (the default VNC <br>
server port). One would next run something like this on the
local machine: &quot;vncviewer hostname:N&quot; where
&quot;hostname&quot; is the name of the machine running
x11vnc and N is XXXX - <br>
5900, i.e. usually &quot;vncviewer hostname:0&quot;.</p>

<p style="margin-top: 1em">By default x11vnc will not allow
the screen to be shared and it will exit as soon as the
client disconnects. See -shared and -forever below to
override these protections. See <br>
the FAQ for details how to tunnel the VNC connection through
an encrypted channel such as ssh(1). In brief:</p>

<p style="margin-top: 1em">ssh -t -L 5900:localhost:5900
far-host &rsquo;x11vnc -localhost -display :0&rsquo;</p>

<p style="margin-top: 1em">% vncviewer -encodings
&rsquo;copyrect tight zrle hextile&rsquo; localhost:0</p>

<p style="margin-top: 1em">Also, use of a VNC password
(-rfbauth or -passwdfile) is strongly recommended.</p>

<p style="margin-top: 1em">For additional info see:
http://www.karlrunge.com/x11vnc/ and
http://www.karlrunge.com/x11vnc/faq.html</p>

<p style="margin-top: 1em">Config file support: if the file
$HOME/.x11vncrc exists then each line in it is treated as a
single command line option. Disable with -norc. For each
option name, the leading <br>
character &quot;-&quot; is not required. E.g. a line that is
either &quot;forever&quot; or &quot;-forever&quot; may be
used and are equivalent. Likewise &quot;wait 100&quot; or
&quot;-wait 100&quot; are acceptable and equiva&acirc; <br>
lent lines. The &quot;#&quot; character comments out to the
end of the line in the usual way (backslash it for a
literal). Leading and trailing whitespace is trimmed off.
Lines may be <br>
continued with a &quot;</p>

<p style="margin-top: 1em">OPTIONS <br>
-display disp</p>

<p style="margin-top: 1em">X11 server display to connect
to, usually :0. The X server process must be running on same
machine and support MIT-SHM. Equivalent to setting the
DISPLAY environment <br>
variable to disp.</p>

<p style="margin-top: 1em">See the description below of the
&quot;-display WAIT:...&quot; extensions, where alias
&quot;-find&quot; will find the user&rsquo;s display
automatically, and &quot;-create&quot; will create a Xvfb
session <br>
if no session is found.</p>

<p style="margin-top: 1em">-auth file</p>

<p style="margin-top: 1em">Set the X authority file to be
file, equivalent to setting the XAUTHORITY environment
variable to file before startup. Same as -xauth file. See
Xsecurity(7) , xauth(1) <br>
man pages for more info.</p>

<p style="margin-top: 1em">Use &rsquo;-auth guess&rsquo; to
have x11vnc use its -findauth mechanism (described below) to
try to guess the XAUTHORITY filename and use it.</p>

<p style="margin-top: 1em">XDM/GDM/KDM: if you are running
x11vnc as root and want to find the XAUTHORITY before anyone
has logged into an X session yet, use: x11vnc -env FD_XDM=1
-auth guess ... <br>
(This will also find the XAUTHORITY if a user is already
logged into the X session.) When running as root, FD_XDM=1
will be tried if the initial -auth guess fails.</p>

<p style="margin-top: 1em">-N</p>

<p style="margin-top: 1em">If the X display is :N, try to
set the VNC display to also be :N This just sets the
-rfbport option to 5900+N The program will exit immediately
if that port is not avail&acirc; <br>
able. The -N option only works with normal -display usage,
e.g. :0 or :8, -N is ignored in the -display WAIT:...,
-create, -find, -svc, -redirect, etc modes.</p>

<p style="margin-top: 1em">-autoport n</p>

<p style="margin-top: 1em">Automatically probe for a free
VNC port starting at n. The default is to start probing at
5900. Use this to stay away from other VNC servers near
5900.</p>

<p style="margin-top: 1em">-rfbport str</p>

<p style="margin-top: 1em">The VNC port to listen on (a
LibVNCServer option), e.g. 5900, 5901, etc. If specified as
&quot;-rfbport PROMPT&quot; then the x11vnc -gui is used to
prompt the user to enter the <br>
port number.</p>

<p style="margin-top: 1em">-6</p>

<p style="margin-top: 1em">IPv6 listening support. In
addition to IPv4, the IPv6 address is listened on for
incoming connections. The same port number as IPv4 is
used.</p>

<p style="margin-top: 1em">NOTE: This x11vnc binary was
compiled to have the &quot;-6&quot; IPv6 listening mode
ENABLED by default (CPPFLAGS -DX11VNC_LISTEN6=1). So to
disable IPv6 listening mode you MUST <br>
supply the &quot;-no6&quot; option (see below.)</p>

<p style="margin-top: 1em">The &quot;-6&quot; mode works
for both normal connections and -ssl encrypted ones. Nearly
everything is supported for the IPv6 case, but there are a
few exceptions. See -stunnel <br>
for its IPv6 support.</p>

<p style="margin-top: 1em">Currently, for absolutely
everything to work correctly the machine may need to have
some IPv4 support, at the least for the loopback interface.
However, for nearly all <br>
usage modes no IPv4 support is required. See -nopiv4.</p>

<p style="margin-top: 1em">If you have trouble compiling or
running in IPv6 mode, set -DX11VNC_IPV6=0 in CPPFLAGS when
configuring to disable IPv6 support.</p>

<p style="margin-top: 1em">-no6</p>

<p style="margin-top: 1em">Disable IPv6 listening support
(only useful if the &quot;-6&quot; mode is compiled in to be
the default; see the X11VNC_LISTEN6 description above under
&quot;-6&quot;.)</p>

<p style="margin-top: 1em">-noipv6</p>

<p style="margin-top: 1em">Do not try to use IPv6 for any
listening or connecting sockets. This includes both the
listening service port(s) and outgoing connections from
-connect, -connect_or_exit, <br>
or -proxy. Use this if you are having problems due to
IPv6.</p>

<p style="margin-top: 1em">-noipv4</p>

<p style="margin-top: 1em">Do not try to use IPv4 for any
listening or connecting sockets. This is mainly for
exploring the behavior of x11vnc on an IPv6-only system, but
may have other uses.</p>

<p style="margin-top: 1em">-reopen</p>

<p style="margin-top: 1em">If the X server connection is
disconnected, try to reopen the X display (up to one time.)
This is of use for display managers like GDM
(KillInitClients option) that kill <br>
x11vnc just after the user logs into the X session. Note:
the reopened state may be unstable. Set
X11VNC_REOPEN_DISPLAY=n to reopen n times and set <br>
X11VNC_REOPEN_SLEEP_MAX to the number of seconds, default
10, to keep trying to reopen the display (once per
second.)</p>

<p style="margin-top: 1em">Update: as of 0.9.9, x11vnc
tries to automatically avoid being killed by the display
manager by delaying creating windows or using XFIXES. So you
shouldn&rsquo;t need to use <br>
KillInitClients=false as long as you log in quickly enough
(within 45 seconds of connecting.) You can disable this by
setting X11VNC_AVOID_WINDOWS=never. You can also <br>
set it to the number of seconds to delay.</p>

<p style="margin-top: 1em">-reflect host:N</p>

<p style="margin-top: 1em">Instead of connecting to and
polling an X display, connect to the remote VNC server
host:N and be a reflector/repeater for it. This is useful
for trying to manage the <br>
case of many simultaneous VNC viewers (e.g. classroom
broadcasting) where, e.g. you put a repeater on each network
switch, etc, to improve performance by distributing the <br>
load and network traffic. Implies -shared (use -noshared as
a later option to disable). See the discussion below under
-rawfb vnc:host:N for more details.</p>

<p style="margin-top: 1em">-id windowid</p>

<p style="margin-top: 1em">Show the X window corresponding
to windowid not the entire display. New windows like popup
menus, transient toplevels, etc, may not be seen or may be
clipped. Disabling <br>
SaveUnders or BackingStore in the X server may help show
them. x11vnc may crash if the window is initially partially
obscured, changes size, is iconified, etc. Some <br>
steps are taken to avoid this and the -xrandr mechanism is
used to track resizes. Use xwininfo(1) to get the window id,
or use &quot;-id pick&quot; to have x11vnc run xwininfo(1)
<br>
for you and extract the id. The -id option is useful for
exporting very simple applications (e.g. the current view on
a webcam).</p>

<p style="margin-top: 1em">-sid windowid</p>

<p style="margin-top: 1em">As -id, but instead of using the
window directly it shifts a root view to it: this shows
SaveUnders menus, etc, although they will be clipped if they
extend beyond the <br>
window.</p>

<p style="margin-top: 1em">-tag str</p>

<p style="margin-top: 1em">This option is ignored, but
allows you to specify a unique string on the x11vnc command
line, for example &quot;-tag test34934z&quot;, this could
enable a reliable way to identify <br>
different x11vnc processes via their command lines (see
ps(1) , pgrep(1) , and pkill(1) and /proc/PID/cmdline.)</p>

<p style="margin-top: 1em">-appshare</p>

<p style="margin-top: 1em">Simple application sharing based
on the -id/-sid mechanism. Every new toplevel window that
the application creates induces a new viewer window via a
reverse connection. <br>
The -id/-sid and -connect options are required. Run
&rsquo;x11vnc -appshare -help&rsquo; for more info.</p>

<p style="margin-top: 1em">-clip WxH+X+Y</p>

<p style="margin-top: 1em">Only show the sub-region of the
full display that corresponds to the rectangle geometry with
size WxH and offset +X+Y. The VNC display has size WxH (i.e.
smaller than the <br>
full display). This also works for -id/-sid mode where the
offset is relative to the upper left corner of the selected
window. An example use of this option would be to <br>
split a large (e.g. Xinerama) display into two parts to be
accessed via separate viewers by running a separate x11vnc
on each part.</p>

<p style="margin-top: 1em">Use &rsquo;-clip
xinerama0&rsquo; to clip to the first xinerama sub-screen
(if xinerama is active). xinerama1 for the 2nd sub-screen,
etc. This way you don&rsquo;t need to figure out the <br>
WxH+X+Y of the desired xinerama sub-screen. screens are
sorted in increasing distance from the (0,0) origin (I.e.
not the Xserver&rsquo;s order).</p>

<p style="margin-top: 1em">-flashcmap</p>

<p style="margin-top: 1em">In 8bpp indexed color, let the
installed colormap flash as the pointer moves from window to
window (slow). Also try the -8to24 option to avoid flash
altogether.</p>

<p style="margin-top: 1em">-shiftcmap n</p>

<p style="margin-top: 1em">Rare problem, but some 8bpp
displays use less than 256 colorcells (e.g. 16-color
grayscale, perhaps the other bits are used for double
buffering) *and* also need to shift <br>
the pixels values away from 0, .., ncells. n indicates the
shift to be applied to the pixel values. To see the pixel
values set DEBUG_CMAP=1 to print out a colormap his&acirc;
<br>
togram. Example: -shiftcmap 240</p>

<p style="margin-top: 1em">-notruecolor</p>

<p style="margin-top: 1em">For 8bpp displays, force indexed
color (i.e. a colormap) even if it looks like 8bpp TrueColor
(rare problem).</p>

<p style="margin-top: 1em">-advertise_truecolor</p>

<p style="margin-top: 1em">If the X11 display is indexed
color, lie to clients when they first connect by telling
them it is truecolor. To workaround RealVNC: inPF has
colourMap but not 8bpp Use <br>
&rsquo;-advertise_truecolor reset&rsquo; to reset client fb
too.</p>

<p style="margin-top: 1em">-visual n</p>

<p style="margin-top: 1em">This option probably does not do
what you think. It simply *forces* the visual used for the
framebuffer; this may be a bad thing... (e.g. messes up
colors or cause a <br>
crash). It is useful for testing and for some workarounds. n
may be a decimal number, or 0x hex. Run xdpyinfo(1) for the
values. One may also use &quot;TrueColor&quot;, etc. see
<br>
&lt;X11/X.h&gt; for a list. If the string ends in
&quot;:m&quot; then for better or for worse the visual depth
is forced to be m. You may want to use -noshm when using
this option (so <br>
XGetImage may automatically translate the pixel data).</p>

<p style="margin-top: 1em">-overlay</p>

<p style="margin-top: 1em">Handle multiple depth visuals on
one screen, e.g. 8+24 and 24+8 overlay visuals (the 32 bits
per pixel are packed with 8 for PseudoColor and 24 for
TrueColor).</p>

<p style="margin-top: 1em">Currently -overlay only works on
Solaris via XReadScreen(3X11) and IRIX using
XReadDisplay(3). On Solaris there is a problem with image
&quot;bleeding&quot; around transient popup <br>
menus (but not for the menu itself): a workaround is to
disable SaveUnders by passing the &quot;-su&quot; argument
to Xsun (in /etc/dt/config/Xservers).</p>

<p style="margin-top: 1em">Use -overlay as a workaround for
situations like these: Some legacy applications require the
default visual to be 8bpp (8+24), or they will use 8bpp
PseudoColor even when <br>
the default visual is depth 24 TrueColor (24+8). In these
cases colors in some windows will be incorrect in x11vnc
unless -overlay is used. Another use of -overlay is to <br>
enable showing the exact mouse cursor shape (details
below).</p>

<p style="margin-top: 1em">Under -overlay, performance will
be somewhat slower due to the extra image transformations
required. For optimal performance do not use -overlay, but
rather configure the <br>
X server so that the default visual is depth 24 TrueColor
and try to have all apps use that visual (e.g. some apps
have -use24 or -visual options).</p>

<p style="margin-top: 1em">-overlay_nocursor</p>

<p style="margin-top: 1em">Sets -overlay, but does not try
to draw the exact mouse cursor shape using the overlay
mechanism.</p>

<p style="margin-top: 1em">-8to24 [opts]</p>

<p style="margin-top: 1em">Try this option if -overlay is
not supported on your OS, and you have a legacy 8bpp app
that you want to view on a multi-depth display with default
depth 24 (and is 32 <br>
bpp) OR have a default depth 8 display with depth 24 overlay
windows for some apps. This option may not work on all X
servers and hardware (tested on XFree86/Xorg mga <br>
driver and Xsun). The &quot;opts&quot; string is not
required and is described below.</p>

<p style="margin-top: 1em">This mode enables a hack where
x11vnc monitors windows within 3 levels from the root
window. If it finds any that are 8bpp it extracts the
indexed color pixel values <br>
using XGetImage() and then applies a transformation using
the colormap(s) to create TrueColor RGB values that it in
turn inserts into bits 1-24 of the framebuffer. This <br>
creates a depth 24 &quot;view&quot; of the display that is
then exported via VNC.</p>

<p style="margin-top: 1em">Conversely, for default depth 8
displays, the depth 24 regions are read by XGetImage() and
everything is transformed and inserted into a depth 24
TrueColor framebuffer.</p>

<p style="margin-top: 1em">Note that even if there are *no*
depth 24 visuals or windows (i.e. pure 8bpp), this mode is
potentially an improvement over -flashcmap because it avoids
the flashing and <br>
shows each window in the correct color.</p>

<p style="margin-top: 1em">This method works OK, but may
still have bugs and it does hog resources. If there are
multiple 8bpp windows using different colormaps, one may
have to iconify all but one <br>
for the colors to be correct.</p>

<p style="margin-top: 1em">There may be painting errors for
clipping and switching between windows of depths 8 and 24.
Heuristics are applied to try to minimize the painting
errors. One can also <br>
press 3 Alt_L&rsquo;s in a row to refresh the screen if the
error does not repair itself. Also the option -fixscreen
8=3.0 or -fixscreen V=3.0 may be used to periodically <br>
refresh the screen at the cost of bandwidth (every 3 sec for
this example).</p>

<p style="margin-top: 1em">The [opts] string can contain
the following settings. Multiple settings are separated by
commas.</p>

<p style="margin-top: 1em">For for some X servers with
default depth 24 a speedup may be achieved via the option
&quot;nogetimage&quot;. This enables a scheme were
XGetImage() is not used to retrieve the <br>
8bpp data. Instead, it assumes that the 8bpp data is in bits
25-32 of the 32bit X pixels. There is no requirement that
the X server should put the data there for our <br>
poll requests, but some do and so the extra steps to
retrieve it can be skipped. Tested with mga driver with
XFree86/Xorg. For the default depth 8 case this option is
<br>
ignored.</p>

<p style="margin-top: 1em">To adjust how often XGetImage()
is used to poll the non-default visual regions for changes,
use the option &quot;poll=t&quot; where &quot;t&quot; is a
floating point time. (default: 0.05)</p>

<p style="margin-top: 1em">Setting the option
&quot;level2&quot; will limit the search for non-default
visual windows to two levels from the root window. Do this
on slow machines where you know the window <br>
manager only imposes one extra window between the app window
and the root window.</p>

<p style="margin-top: 1em">Also for very slow machines use
&quot;cachewin=t&quot; where t is a floating point amount of
time to cache XGetWindowAttributes results. E.g.
cachewin=5.0. This may lead to the <br>
windows being unnoticed for this amount of time when
deiconifying, painting errors, etc.</p>

<p style="margin-top: 1em">While testing on a very old SS20
these options gave tolerable response: -8to24
poll=0.2,cachewin=5.0. For this machine -overlay is
supported and gives better response.</p>

<p style="margin-top: 1em">Debugging for this mode can be
enabled by setting &quot;dbg=1&quot;, &quot;dbg=2&quot;, or
&quot;dbg=3&quot;.</p>

<p style="margin-top: 1em">-24to32</p>

<p style="margin-top: 1em">Very rare problem: if the
framebuffer (X display or -rawfb) is 24bpp instead of the
usual 32bpp, then dynamically transform the pixels to 32bpp.
This will be slower, but <br>
can be used to work around problems where VNC viewers cannot
handle 24bpp (e.g. &quot;main: setPF: not 8, 16 or 32
bpp?&quot;). See the FAQ for more info.</p>

<p style="margin-top: 1em">In the case of -rawfb mode, the
pixels are directly modified by inserting a 0 byte to pad
them out to 32bpp. For X displays, a kludge is done that is
equivalent to <br>
&quot;-noshm -visual TrueColor:32&quot;. (If better
performance is needed for the latter, feel free to ask).</p>

<p style="margin-top: 1em">-scale fraction</p>

<p style="margin-top: 1em">Scale the framebuffer by factor
fraction. Values less than 1 shrink the fb, larger ones
expand it. Note: the image may not be sharp and response may
be slower. If frac&acirc; <br>
tion contains a decimal point &quot;.&quot; it is taken as a
floating point number, alternatively the notation
&quot;m/n&quot; may be used to denote fractions exactly,
e.g. -scale 2/3</p>

<p style="margin-top: 1em">To scale asymmetrically in the
horizontal and vertical directions, specify a WxH geometry
to stretch to: e.g. &rsquo;-scale 1024x768&rsquo;, or also
&rsquo;-scale 0.9x0.75&rsquo;</p>

<p style="margin-top: 1em">Scaling Options: can be added
after fraction via &quot;:&quot;, to supply multiple
&quot;:&quot; options use commas. If you just want a quick,
rough scaling without blending, append &quot;:nb&quot; to
<br>
fraction (e.g. -scale 1/3:nb). No blending is the default
for 8bpp indexed color, to force blending for this case use
&quot;:fb&quot;.</p>

<p style="margin-top: 1em">To disable -scrollcopyrect and
-wirecopyrect under -scale use &quot;:nocr&quot;. If you
need to to enable them use &quot;:cr&quot; or specify them
explicitly on the command line. If a slow <br>
link is detected, &quot;:nocr&quot; may be applied
automatically. Default: :cr</p>

<p style="margin-top: 1em">More esoteric options: for
compatibility with vncviewers the scaled width is adjusted
to be a multiple of 4: to disable this use &quot;:n4&quot;.
&quot;:in&quot; use interpolation scheme <br>
even when shrinking, &quot;:pad&quot; pad scaled width and
height to be multiples of scaling denominator (e.g. 3 for
2/3).</p>

<p style="margin-top: 1em">-geometry WxH</p>

<p style="margin-top: 1em">Same as -scale WxH</p>

<p style="margin-top: 1em">-scale_cursor frac</p>

<p style="margin-top: 1em">By default if -scale is supplied
the cursor shape is scaled by the same factor. Depending on
your usage, you may want to scale the cursor independently
of the screen or <br>
not at all. If you specify -scale_cursor the cursor will be
scaled by that factor. When using -scale mode to keep the
cursor at its &quot;natural&quot; size use
&quot;-scale_cursor 1&quot;. <br>
Most of the &quot;:&quot; scaling options apply here as
well.</p>

<p style="margin-top: 1em">-viewonly</p>

<p style="margin-top: 1em">All VNC clients can only watch
(default off).</p>

<p style="margin-top: 1em">-shared</p>

<p style="margin-top: 1em">VNC display is shared, i.e. more
than one viewer can connect at the same time (default
off).</p>

<p style="margin-top: 1em">-once</p>

<p style="margin-top: 1em">Exit after the first
successfully connected viewer disconnects, opposite of
-forever. This is the Default.</p>

<p style="margin-top: 1em">-forever</p>

<p style="margin-top: 1em">Keep listening for more
connections rather than exiting as soon as the first
client(s) disconnect. Same as -many</p>

<p style="margin-top: 1em">To get the standard non-shared
VNC behavior where when a new VNC client connects the
existing VNC client is dropped use: -nevershared -forever
This method can also be <br>
used to guard against hung TCP connections that do not go
away.</p>

<p style="margin-top: 1em">-loop</p>

<p style="margin-top: 1em">Create an outer loop restarting
the x11vnc process whenever it terminates. -bg and -inetd
are ignored in this mode (however see -loopbg below).</p>

<p style="margin-top: 1em">Useful for continuing even if
the X server terminates and restarts (at that moment the
process will need permission to reconnect to the new X
server of course).</p>

<p style="margin-top: 1em">Use, e.g., -loop100 to sleep 100
millisecs between restarts, etc. Default is 2000ms (i.e. 2
secs) Use, e.g. -loop300,5 to sleep 300 ms and only loop 5
times.</p>

<p style="margin-top: 1em">If -loopbg (plus any numbers) is
specified instead, the &quot;-bg&quot; option is implied and
the mode approximates inetd(8) usage to some degree. In this
case when it goes into <br>
the background any listening sockets (i.e. ports 5900, 5800)
are closed, so the next one in the loop can use them. This
mode will only be of use if a VNC client (the only <br>
client for that process) is already connected before the
process goes into the background, for example, usage of
-display WAIT:.., -svc, and -connect can make use of this
<br>
&quot;poor man&rsquo;s&quot; inetd mode. The default wait
time is 500ms in this mode. This usage could use useful:
-svc -bg -loopbg</p>

<p style="margin-top: 1em">-timeout n</p>

<p style="margin-top: 1em">Exit unless a client connects
within the first n seconds after startup.</p>

<p style="margin-top: 1em">If there have been no connection
attempts after n seconds x11vnc exits immediately. If a
client is trying to connect but has not progressed to the
normal operating state, <br>
x11vnc gives it a few more seconds to finish and exits if it
does not make it to the normal state.</p>

<p style="margin-top: 1em">For reverse connections via
-connect or -connect_or_exit a timeout of n seconds will be
set for all reverse connects. If the connect timeout alarm
goes off, x11vnc will <br>
exit immediately.</p>

<p style="margin-top: 1em">-sleepin n</p>

<p style="margin-top: 1em">At startup sleep n seconds
before proceeding (e.g. to allow redirs and listening
clients to start up)</p>

<p style="margin-top: 1em">If a range is given:
&rsquo;-sleepin min-max&rsquo;, a random value between min
and max is slept. E.g. &rsquo;-sleepin 0-20&rsquo; and
&Acirc;&acute;-sleepin 10-30&rsquo;. Floats are allowed
too.</p>

<p style="margin-top: 1em">-inetd</p>

<p style="margin-top: 1em">Launched by inetd(8): stdio
instead of listening socket. Note: if you are not
redirecting stderr to a log file (via shell 2&gt; or -o
option) you MUST also specify the -q <br>
option, otherwise the stderr goes to the viewer which will
cause it to abort. Specifying both -inetd and -q and no -o
will automatically close the stderr.</p>

<p style="margin-top: 1em">If the libvncserver used
supports non AF_INET sockets (the one bundled in x11vnc
0.9.13 and later does), then -inetd mode can be used for a
raw stdio pipe. For example, <br>
using the SSVNC viewer exec=... mechanism:</p>

<p style="margin-top: 1em">ssvnc -viewer exec=&quot;ssh -tt
-e none user@host &nbsp;&Acirc;&acute;x11vnc -inetd -o
log.txt -display :0&rsquo;&quot;</p>

<p style="margin-top: 1em">where the long cmdline has been
split. In the above the only TCP connection is that of the
ssh connection. There is no port redirection (-L), etc.; raw
stdio is used on <br>
both sides of the ssh. In some cases the -tt option is not
needed.</p>

<p style="margin-top: 1em">-tightfilexfer</p>

<p style="margin-top: 1em">Enable the TightVNC file
transfer extension. Note that that when the -viewonly option
is supplied all file transfers are disabled. Also clients
that log in viewonly can&acirc; <br>
not transfer files. However, if the remote control mechanism
is used to change the global or per-client viewonly state
the filetransfer permissions will NOT change.</p>

<p style="margin-top: 1em">IMPORTANT: please understand if
-tightfilexfer is specified and you run x11vnc as root for,
say, inetd or display manager (gdm, kdm, ...) access and you
do not have it <br>
switch users via the -users option, then VNC Viewers that
connect are able to do filetransfer reads and writes as
*root*.</p>

<p style="margin-top: 1em">Also, tightfilexfer is disabled
in -unixpw mode.</p>

<p style="margin-top: 1em">-ultrafilexfer</p>

<p style="margin-top: 1em">Note: to enable UltraVNC
filetransfer and to get it to work you probably need to
supply these LibVNCServer options: &quot;-rfbversion 3.6
-permitfiletransfer&quot; &quot;-ultrafilexfer&quot; <br>
is an alias for this combination.</p>

<p style="margin-top: 1em">IMPORTANT: please understand if
-ultrafilexfer is specified and you run x11vnc as root for,
say, inetd or display manager (gdm, kdm, ...) access and you
do not have it <br>
switch users via the -users option, then VNC Viewers that
connect are able to do filetransfer reads and writes as
*root*.</p>

<p style="margin-top: 1em">Note that sadly you cannot do
both -tightfilexfer and -ultrafilexfer at the same time
because the latter requires setting the version to 3.6 and
tightvnc will not do file&acirc; <br>
transfer when it sees that version number.</p>

<p style="margin-top: 1em">-http</p>

<p style="margin-top: 1em">Instead of using -httpdir (see
below) to specify where the Java vncviewer applet is, have
x11vnc try to *guess* where the directory is by looking
relative to the program <br>
location and in standard locations
(/usr/local/share/x11vnc/classes, etc). Under -ssl or
-stunnel the ssl classes subdirectory is sought.</p>

<p style="margin-top: 1em">-http_ssl</p>

<p style="margin-top: 1em">As -http, but force lookup for
ssl classes subdir.</p>

<p style="margin-top: 1em">Note that for HTTPS, single-port
Java applet delivery you can set
X11VNC_HTTPS_DOWNLOAD_WAIT_TIME to the max number of seconds
to wait for the applet download to finish. <br>
The default is 15.</p>

<p style="margin-top: 1em">-avahi</p>

<p style="margin-top: 1em">Use the Avahi/mDNS ZeroConf
protocol to advertise this VNC server to the local network.
(Related terms: Rendezvous, Bonjour). Depending on your
setup, you may need to <br>
start avahi-daemon and open udp port 5353 in your
firewall.</p>

<p style="margin-top: 1em">You can set X11VNC_AVAHI_NAME,
X11VNC_AVAHI_HOST, and/or X11VNC_AVAHI_PORT environment
variables to override the default values. For example: -env
X11VNC_AVAHI_NAME=wally</p>

<p style="margin-top: 1em">If the avahi API cannot be found
at build time, a helper program like avahi- publish(1) or
dns- sd(1) will be tried</p>

<p style="margin-top: 1em">-mdns</p>

<p style="margin-top: 1em">Same as -avahi.</p>

<p style="margin-top: 1em">-zeroconf</p>

<p style="margin-top: 1em">Same as -avahi.</p>

<p style="margin-top: 1em">-connect string</p>

<p style="margin-top: 1em">For use with &quot;vncviewer
-listen&quot; reverse connections. If string has the form
&quot;host&quot; or &quot;host:port&quot; the connection is
made once at startup.</p>

<p style="margin-top: 1em">Use commas for a list of
host&rsquo;s and host:port&rsquo;s. E.g. -connect
host1,host2 or host1:0,host2:5678. Note that to reverse
connect to multiple hosts at the same time you <br>
will likely need to also supply: -shared</p>

<p style="margin-top: 1em">Note that unlike most vnc
servers, x11vnc will require a password for reverse as well
as for forward connections. (provided password auth has been
enabled, -rfbauth, etc) <br>
If you do not want to require a password for reverse
connections set X11VNC_REVERSE_CONNECTION_NO_AUTH=1 in your
environment before starting x11vnc.</p>

<p style="margin-top: 1em">If string contains &quot;/&quot;
it is instead interpreted as a file to periodically check
for new hosts. The first line is read and then the file is
truncated. Be careful about <br>
the location of this file if x11vnc is running as root (e.g.
via gdm(1) , etc).</p>

<p style="margin-top: 1em">Repeater mode: Some services
provide an intermediate &quot;vnc repeater&quot;:
http://www.uvnc.com/addons/repeater.html (and also
http://koti.mbnet.fi/jtko/ for linux port) that <br>
acts as a proxy/gateway. Modes like these require an initial
string to be sent for the reverse connection before the VNC
protocol is started. Here are the ways to do <br>
this:</p>

<p style="margin-top: 1em">-connect
pre=some_string+host:port -connect
pre128=some_string+host:port -connect
repeater=ID:1234+host:port -connect
repeater=23.45.67.89::5501+host:port</p>

<p style="margin-top: 1em">SSVNC notation is also
supported:</p>

<p style="margin-top: 1em">-connect
repeater://host:port+ID:1234</p>

<p style="margin-top: 1em">As with normal -connect usage,
if the repeater port is not supplied 5500 is assumed.</p>

<p style="margin-top: 1em">The basic idea is between the
special tag, e.g. &quot;pre=&quot; and &quot;+&quot; is the
pre-string to be sent. Note that in this case host:port is
the repeater server, NOT the vnc viewer. <br>
Somehow the pre-string tells the repeater server how to find
the vnc viewer and connect you to it.</p>

<p style="margin-top: 1em">In the case
pre=some_string+host:port, &quot;some_string&quot; is simply
sent. In the case preNNN=some_string+host:port
&quot;some_string&quot; is sent in a null padded buffer of
length NNN. <br>
repeater= is the same as pre250=, this is the ultravnc
repeater buffer size. &quot;, etc. are expanded to</p>

<p style="margin-top: 1em">Strings like &quot;0 and &quot;
newline and carriage return. &quot; <br>
See also the -proxy option below for additional ways to
plumb reverse connections.</p>

<p style="margin-top: 1em">Reverse SSL: using -connect in
-ssl mode makes x11vnc act as an SSL client (initiates SSL
connection) rather than an SSL server. The idea is x11vnc
might be connecting to <br>
stunnel on the viewer side with the viewer in listening
mode. If you do not want this behavior, use -env
X11VNC_DISABLE_SSL_CLIENT_MODE=1. With this the viewer side
can <br>
act as the SSL client as it normally does for forward
connections.</p>

<p style="margin-top: 1em">Reverse SSL Repeater mode: This
will work, but note that if the VNC Client does any sort of
a &rsquo;Fetch Cert&rsquo; action before connecting, then
the Repeater will likely drop <br>
the connection and both sides will need to restart. Consider
the use of -connect_or_exit and -loop300,2 to have x11vnc
reconnect once to the repeater after the fetch. <br>
You will probably also want to supply -sslonly to avoid
x11vnc thinking the delay in response means the connection
is VeNCrypt. The env var X11VNC_DIS&acirc; <br>
ABLE_SSL_CLIENT_MODE=1 discussed above may also be useful
(i.e. the viewer can do a forward connection as it normally
does.)</p>

<p style="margin-top: 1em">IPv6: as of x11vnc 0.9.10 the
-connect option should connect to IPv6 hosts properly. If
there are problems you can disable IPv6 by setting
-DX11VNC_IPV6=0 in CPPFLAGS <br>
when configuring. If there problems connecting to IPv6 hosts
consider a relay like the included inet6to4 script or the
-proxy option.</p>

<p style="margin-top: 1em">-connect_or_exit str</p>

<p style="margin-top: 1em">As with -connect, except if none
of the reverse connections succeed, then x11vnc shuts down
immediately</p>

<p style="margin-top: 1em">An easier to type alias for this
option is &rsquo;-coe&rsquo;</p>

<p style="margin-top: 1em">By the way, if you do not want
x11vnc to listen on ANY interface use -rfbport 0 which is
handy for the -connect_or_exit mode.</p>

<p style="margin-top: 1em">-proxy string</p>

<p style="margin-top: 1em">Use proxy in string (e.g.
host:port) as a proxy for making reverse connections
(-connect or -connect_or_exit options).</p>

<p style="margin-top: 1em">Web proxies are supported, but
note by default most of them only support destination
connections to ports 443 or 563, so this might not be very
useful (the viewer would <br>
need to listen on that port or the router would have to do a
port redirection).</p>

<p style="margin-top: 1em">A web proxy may be specified by
either &quot;host:port&quot; or &quot;http://host:port&quot;
(the port is required even if it is the common choices 80 or
8080)</p>

<p style="margin-top: 1em">SOCKS4, SOCKS4a, and SOCKS5 are
also supported. SOCKS proxies normally do not have
restrictions on the destination port number.</p>

<p style="margin-top: 1em">Use a format like this:
socks://host:port or socks5://host:port. Note that ssh -D
does not support SOCKS4a, so use socks5://. For socks://
SOCKS4 is used on a numerical <br>
IP and &quot;localhost&quot;, otherwise SOCKS4a is used (and
so the proxy tries to do the DNS lookup).</p>

<p style="margin-top: 1em">An experimental mode is
&quot;-proxy http://host:port/...&quot; Note the
&quot;/&quot; after the port that distinguishes it from a
normal web proxy. The port must be supplied even if it is
<br>
the default 80. For this mode a GET is done to the supplied
URL with the string host=H&amp;port=P appended. H and P will
be the -connect reverse connect host and port. Use <br>
the string &quot;__END__&quot; to disable the appending. The
basic idea here is that maybe some cgi script provides the
actual viewer hookup and tunnelling. How to actually <br>
achieve this within cgi, php, etc. is not clear... A custom
web server or apache module would be straight-forward.</p>

<p style="margin-top: 1em">Another experimental mode is
&quot;-proxy ssh://user@host&quot; in which case a SSH
tunnel is used for the proxying. &quot;user@&quot; is not
needed unless your unix username is different on <br>
&quot;host&quot;. For a non-standard SSH port use
ssh://user@host:port. If proxies are chained (see next
paragraph) then the ssh one must be the first one. If
ssh-agent is not <br>
active, then the ssh password needs to be entered in the
terminal where x11vnc is running. Examples:</p>

<p style="margin-top: 1em">-connect localhost:0 -proxy
ssh://me@friends-pc:2222</p>

<p style="margin-top: 1em">-connect snoopy:0 -proxy
ssh://ssh.company.com</p>

<p style="margin-top: 1em">Multiple proxies may be chained
together in case one needs to ricochet off of a number of
hosts to finally reach the VNC viewer. Up to 3 may be
chained, separate them by <br>
commas in the order they are to be connected to. E.g.:
http://host1:port1,socks5://host2:port2 or three like:
first,second,third</p>

<p style="margin-top: 1em">IPv6: as of x11vnc 0.9.10 the
-proxy option should connect to IPv6 hosts properly. If
there are problems you can disable IPv6 by setting
-DX11VNC_IPV6=0 in CPPFLAGS when <br>
configuring. If there problems connecting to IPv6 hosts
consider a relay like the included inet6to4 script.</p>

<p style="margin-top: 1em">-vncconnect, -novncconnect</p>

<p style="margin-top: 1em">Monitor the VNC_CONNECT X
property set by the standard VNC program vncconnect(1). When
the property is set to &quot;host&quot; or
&quot;host:port&quot; establish a reverse connection. Using
<br>
xprop(1) instead of vncconnect may work (see the FAQ). The
-remote control mechanism uses X11VNC_REMOTE channel, and
this option disables/enables it as well. Default: <br>
-vncconnect</p>

<p style="margin-top: 1em">To use different names for these
X11 properties (e.g. to have separate communication channels
for multiple x11vnc&rsquo;s on the same display) set the
VNC_CONNECT or <br>
X11VNC_REMOTE env. vars. to the string you want, for
example: -env X11VNC_REMOTE=X11VNC_REMOTE_12345 Both sides
of the channel must use the same unique name. The same can
<br>
be done for the internal X11VNC_TICKER property (heartbeat
and timestamp) if desired.</p>

<p style="margin-top: 1em">-allow host1[,host2..]</p>

<p style="margin-top: 1em">Only allow client connections
from hosts matching the comma separated list of hostnames or
IP addresses. By ending in a &quot;.&quot;, it can also be a
numerical IP prefix, e.g. <br>
&quot;192.168.100.&quot; to match a simple subnet, for more
control build LibVNCServer with libwrap support (See the
FAQ). If the list contains a &quot;/&quot; it instead is a
interpreted as <br>
a file containing addresses or prefixes that is re-read each
time a new client connects. Lines can be commented out with
the &quot;#&quot; character in the usual way.</p>

<p style="margin-top: 1em">-allow applies in -ssl mode, but
not in -stunnel mode.</p>

<p style="margin-top: 1em">IPv6: as of x11vnc 0.9.10 a host
can be specified in IPv6 numerical format, e.g.
2001:4860:b009::93</p>

<p style="margin-top: 1em">Env. vars: Set -env
X11VNC_DEBUG_ACCESS=1 to print out debugging info during the
check_access() call. Set -env X11VNC_ALLOW_FULLMATCH=1 to
force a full string match, that <br>
is, no subnet &quot;.&quot; matching will be performed.</p>

<p style="margin-top: 1em">Unix sockets: if -unixsock is
being used and you want to limit TCP access also you must
also include the path to the unix socket prefixed with
&quot;unix=&quot; in the allow list, <br>
e.g.: -allow 192.168.100.3,unix=/tmp/mysock If the socket is
not a named one, e.g. created via socketpair(2) with -inetd,
then you must supply the generic name x11vnc <br>
gives to it, e.g. -allow 192.168.100.3,UNNAMED_AF_UNIX In
both cases it must be an exact string match to be allowed to
connect. Note that since you completely control <br>
these local non-TCP access methods by file system
permissions, etc., it is not useful to guard against them
with -allow, however you still need to have them in the
allow <br>
list to let them connect.</p>

<p style="margin-top: 1em">-localhost</p>

<p style="margin-top: 1em">Basically the same as
&quot;-allow 127.0.0.1&quot;.</p>

<p style="margin-top: 1em">Note: if you want to restrict
which network interface x11vnc listens on, see the -listen
option below. E.g. &quot;-listen localhost&quot; or
&quot;-listen 192.168.3.21&quot;. As a special <br>
case, the option &quot;-localhost&quot; implies
&quot;-listen localhost&quot;.</p>

<p style="margin-top: 1em">A rare case, but for
non-localhost -listen usage, if you use the remote control
mechanism (-R) to change the -listen interface you may need
to manually adjust the -allow <br>
list (and vice versa) to avoid situations where no
connections (or too many) are allowed.</p>

<p style="margin-top: 1em">If you do not want x11vnc to
listen on ANY TCP interface (evidently you are using
-connect or -connect_or_exit, or plan to use remote control:
-R connect:host, or to use <br>
-unixsock), specify -rfbport 0</p>

<p style="margin-top: 1em">IPv6: if IPv6 is supported, this
option automatically implies the IPv6 loopback address
&rsquo;::1&rsquo; as well.</p>

<p style="margin-top: 1em">-unixsock str</p>

<p style="margin-top: 1em">In addition to the regular TCP
port, listen on the unix socket (AF_UNIX) &rsquo;str&rsquo;
for incoming connections. This mode is for either local
connections or a tunnel endpoint <br>
where one wants the file permission of the unix socket file
to determine what can connect to it. Example: mkdir ~/s;
chmod 700 ~/s; x11vnc -unixsock ~/s/mysock -rfbport 0 <br>
... same as: x11vnc -unixsockonly ~/s/mysock ... (see
-unixsockonly below.)</p>

<p style="margin-top: 1em">This mode currently requires the
modified libvncserver bundled in the the x11vnc 0.9.13
tarball and later.</p>

<p style="margin-top: 1em">Note that the SSVNC unix
vncviewer can connect to unix sockets, for example: ssvnc
-viewer unix=./s/mysock</p>

<p style="margin-top: 1em">As a special mechanism, if
&rsquo;str&rsquo; for either -unixsock or -unixsockonly is
of the form &quot;fd=n&quot; where n is a non-negative
decimal integer, then instead of creating a unix <br>
socket, that file descriptor (assumed already opened and
O_RDWR) will be attached as a VNC client. Perhaps the
program that execs x11vnc has created a socketpair(2) to
<br>
communicate over. Use this mechanism if -inetd (which is
basically fd=0) is not flexible enough for you.</p>

<p style="margin-top: 1em">-unixsockonly str</p>

<p style="margin-top: 1em">Listen on unix socket
&rsquo;str&rsquo; only, no TCP ports. First note that one
can disable all tcp listening ports by specifying
&rsquo;-rfbport 0&rsquo;. The option &rsquo;-unixsockonly
str&rsquo; is func&acirc; <br>
tionally equivalent to &rsquo;-unixsock str -rfbport
0&rsquo;</p>

<p style="margin-top: 1em">-listen6 str</p>

<p style="margin-top: 1em">When in IPv6 listen mode
&quot;-6&quot;, listen only on the network interface with
address str. It also works for link scope addresses
(fe80::219:dbff:fee5:3f92%eth0) and IPv6 <br>
hostname strings (e.g. ipv6.google.com.) Use LibVNCServer
-listen option for the IPv4 interface.</p>

<p style="margin-top: 1em">-nolookup</p>

<p style="margin-top: 1em">Do not use gethostbyname() or
gethostbyaddr() to look up host names or IP numbers. Use
this if name resolution is incorrectly set up and leads to
long pauses as name <br>
lookups time out, etc.</p>

<p style="margin-top: 1em">-input string</p>

<p style="margin-top: 1em">Fine tuning of allowed user
input. If string does not contain a comma &quot;,&quot; the
tuning applies only to normal clients. Otherwise the part
before &quot;,&quot; is for normal clients <br>
and the part after for view-only clients. &quot;K&quot; is
for Keystroke input, &quot;M&quot; for Mouse-motion input,
&quot;B&quot; for Button-click input, &quot;C&quot; is for
Clipboard input, and &quot;F&quot; is for <br>
File transfer (ultravnc only). Their presence in the string
enables that type of input. E.g. &quot;-input M&quot; means
normal users can only move the mouse and &quot;-input
KMBCF,M&quot; <br>
lets normal users do anything and enables view-only users to
move the mouse. This option is ignored when a global
-viewonly is in effect (all input is discarded in that <br>
case).</p>

<p style="margin-top: 1em">-grabkbd</p>

<p style="margin-top: 1em">When VNC viewers are connected,
attempt to the grab the keyboard so a (non-malicious) user
sitting at the physical display is not able to enter
keystrokes. This method <br>
uses XGrabKeyboard(3X11) and so it is not secure and does
not rule out the person at the physical display injecting
keystrokes by flooding the server with them, grabbing <br>
the keyboard himself, etc. Some degree of cooperation from
the person at the display is assumed. This is intended for
remote help-desk or educational usage modes.</p>

<p style="margin-top: 1em">Note: on some recent (12/2010) X
servers and/or desktops, -grabkbd no longer works: it
prevents the window manager from resizing windows and
similar things. Try -ungrab&acirc; <br>
both below (might not work.)</p>

<p style="margin-top: 1em">-grabptr</p>

<p style="margin-top: 1em">As -grabkbd, but for the mouse
pointer using XGrabPointer(3X11). Unfortunately due to the
way the X server works, the mouse can still be moved around
by the user at the <br>
physical display, but he will not be able to change window
focus with it. Also some window managers that call
XGrabServer(3X11) for resizes, etc, will act on the local
<br>
user&rsquo;s input. Again, some degree of cooperation from
the person at the display is assumed.</p>

<p style="margin-top: 1em">-ungrabboth</p>

<p style="margin-top: 1em">Whenever there is any input
(either keyboard or pointer), ungrab *both* the keyboard and
the pointer while injecting the synthetic input. This is to
allow window man&acirc; <br>
agers, etc. a chance to grab.</p>

<p style="margin-top: 1em">-grabalways</p>

<p style="margin-top: 1em">Apply both -grabkbd and -grabptr
even when no VNC viewers are connected. If you only want one
of them, use the -R remote control to turn the other back
on, e.g. -R <br>
nograbptr.</p>

<p style="margin-top: 1em">(PASSWORDS: Note that the
LibVNCServer password options &quot;-rfbauth file&quot; and
&quot;-passwd str&quot; are described at the bottom of the
help output.)</p>

<p style="margin-top: 1em">-viewpasswd string</p>

<p style="margin-top: 1em">Supply a 2nd password for
view-only logins. The -passwd (full-access) password must
also be supplied.</p>

<p style="margin-top: 1em">-passwdfile filename</p>

<p style="margin-top: 1em">Specify the LibVNCServer
password via the first line of the file filename (instead of
via -passwd on the command line where others might see it
via ps(1) ).</p>

<p style="margin-top: 1em">See the descriptions below for
how to supply multiple passwords, view-only passwords, to
specify external programs for the authentication, and other
features.</p>

<p style="margin-top: 1em">If the filename is prefixed with
&quot;rm:&quot; it will be removed after being read. Perhaps
this is useful in limiting the readability of the file. In
general, the password file <br>
should not be readable by untrusted users (BTW: neither
should the VNC -rfbauth file: it is NOT encrypted, only
obscured with a fixed key).</p>

<p style="margin-top: 1em">If the filename is prefixed with
&quot;read:&quot; it will periodically be checked for
changes and reread. It is guaranteed to be reread just when
a new client connects so that the <br>
latest passwords will be used.</p>

<p style="margin-top: 1em">If filename is prefixed with
&quot;cmd:&quot; then the string after the &quot;:&quot; is
run as an external command: the output of the command will
be interpreted as if it were read from a <br>
password file (see below). If the command does not exit with
0, then x11vnc terminates immediately. To specify more than
1000 passwords this way set X11VNC_MAX_PASSWDS <br>
before starting x11vnc. The environment variables are set as
in -accept.</p>

<p style="margin-top: 1em">Note that due to the VNC
protocol only the first 8 characters of a password are used
(DES key).</p>

<p style="margin-top: 1em">If filename is prefixed with
&quot;custom:&quot; then a custom password checker is
supplied as an external command following the &quot;:&quot;.
The command will be run when a client authenti&acirc; <br>
cates. If the command exits with 0 the client is accepted,
otherwise it is rejected. The environment variables are set
as in -accept.</p>

<p style="margin-top: 1em">The standard input to the custom
command will be a decimal digit &quot;len&quot; followed by
a newline. &quot;len&quot; specifies the challenge size and
is usually 16 (the VNC spec). Then <br>
follows len bytes which is the random challenge string that
was sent to the client. This is then followed by len more
bytes holding the client&rsquo;s response (i.e. the
chal&acirc; <br>
lenge string encrypted via DES with the user password in the
standard situation).</p>

<p style="margin-top: 1em">The &quot;custom:&quot; scheme
can be useful to implement dynamic passwords or to implement
methods where longer passwords and/or different encryption
algorithms are used. The lat&acirc; <br>
ter will require customizing the VNC client as well. One
could create an MD5SUM based scheme for example. See also
-unixpw_cmd below.</p>

<p style="margin-top: 1em">File format for -passwdfile:</p>

<p style="margin-top: 1em">If multiple non-blank lines
exist in the file they are all taken as valid passwords.
Blank lines are ignored. Password lines may be
&quot;commented out&quot; (ignored) if they <br>
begin with the character &quot;#&quot; or the line contains
the string &quot;__SKIP__&quot;. Lines may be annotated by
use of the &quot;__COMM__&quot; string: from it to the end
of the line is <br>
ignored. An empty password may be specified via the
&quot;__EMPTY__&quot; string on a line by itself (note your
viewer might not accept empty passwords).</p>

<p style="margin-top: 1em">If the string
&quot;__BEGIN_VIEWONLY__&quot; appears on a line by itself,
the remaining passwords are used for viewonly access. For
compatibility, as a special case if the file <br>
contains only two password lines the 2nd one is
automatically taken as the viewonly password. Otherwise the
&quot;__BEGIN_VIEWONLY__&quot; token must be used to have
viewonly pass&acirc; <br>
words. (tip: make the 3rd and last line be
&quot;__BEGIN_VIEWONLY__&quot; to have 2 full-access
passwords)</p>

<p style="margin-top: 1em">-showrfbauth filename</p>

<p style="margin-top: 1em">Print to the screen the obscured
VNC password kept in the rfbauth file filename and then
exit.</p>

<p style="margin-top: 1em">-usepw</p>

<p style="margin-top: 1em">If no other password method was
supplied on the command line, first look for ~/.vnc/passwd
and if found use it with -rfbauth; next, look for
~/.vnc/passwdfile and use it <br>
with -passwdfile; otherwise, prompt the user for a password
to create ~/.vnc/passwd and use it with the -rfbauth option.
If none of these succeed x11vnc exits immedi&acirc; <br>
ately.</p>

<p style="margin-top: 1em">-storepasswd pass file</p>

<p style="margin-top: 1em">Store password pass as the VNC
password in the file file. Once the password is stored the
program exits. Use the password via &quot;-rfbauth
file&quot;</p>

<p style="margin-top: 1em">If called with no arguments,
&quot;x11vnc -storepasswd&quot;, the user is prompted for a
password and it is stored in the file ~/.vnc/passwd. Called
with one argument, that will be <br>
the file to store the prompted password in.</p>

<p style="margin-top: 1em">-nopw</p>

<p style="margin-top: 1em">Disable the big warning message
when you use x11vnc without some sort of password.</p>

<p style="margin-top: 1em">-accept string</p>

<p style="margin-top: 1em">Run a command (possibly to
prompt the user at the X11 display) to decide whether an
incoming client should be allowed to connect or not. string
is an external command run <br>
via system(3) or some special cases described below. Be sure
to quote string if it contains spaces, shell characters,
etc. If the external command returns 0 the client <br>
is accepted, otherwise the client is rejected. See below for
an extension to accept a client view-only.</p>

<p style="margin-top: 1em">If x11vnc is running as root
(say from inetd(8) or from display managers xdm(1) , gdm(1)
, etc), think about the security implications carefully
before supplying this <br>
option (likewise for the -gone option).</p>

<p style="margin-top: 1em">Environment: The RFB_CLIENT_IP
environment variable will be set to the incoming client IP
number and the port in RFB_CLIENT_PORT (or -1 if
unavailable). Similarly, <br>
RFB_SERVER_IP and RFB_SERVER_PORT (the x11vnc side of the
connection), are set to allow identification of the tcp
virtual circuit. The x11vnc process id will be in <br>
RFB_X11VNC_PID, a client id number in RFB_CLIENT_ID, and the
number of other connected clients in RFB_CLIENT_COUNT.
RFB_MODE will be &quot;accept&quot;. RFB_STATE will be
PROTO&acirc; <br>
COL_VERSION, SECURITY_TYPE, AUTHENTICATION, INITIALISATION,
NORMAL, or UNKNOWN indicating up to which state the client
has achieved. RFB_LOGIN_VIEWONLY will be 0, 1, or <br>
-1 (unknown). RFB_USERNAME, RFB_LOGIN_TIME, and
RFB_CURRENT_TIME may also be set.</p>

<p style="margin-top: 1em">If string is &quot;popup&quot;
then a builtin popup window is used. The popup will time out
after 120 seconds, use &quot;popup:N&quot; to modify the
timeout to N seconds (use 0 for no time&acirc; <br>
out).</p>

<p style="margin-top: 1em">In the case of &quot;popup&quot;
and when the -unixpw option is specified, then a *second*
window will be popped up after the user successfully logs in
via his UNIX password. This <br>
time the user will be identified as UNIX:username@hostname,
the &quot;UNIX:&quot; prefix indicates which user the viewer
logged as via -unixpw. The first popup is only for whether
<br>
to allow him to even *try* to login via unix password.</p>

<p style="margin-top: 1em">If string is
&quot;xmessage&quot; then an xmessage(1) invocation is used
for the command. xmessage must be installed on the machine
for this to work.</p>

<p style="margin-top: 1em">Both &quot;popup&quot; and
&quot;xmessage&quot; will present an option for accepting
the client &quot;View-Only&quot; (the client can only
watch). This option will not be presented if -viewonly has
<br>
been specified, in which case the entire display is view
only.</p>

<p style="margin-top: 1em">If the user supplied command is
prefixed with something like &quot;yes:0,no:*,view:3
mycommand ...&quot; then this associates the numerical
command return code with the actions: <br>
accept, reject, and accept-view-only, respectively. Use
&quot;*&quot; instead of a number to indicate the default
action (in case the command returns an unexpected value).
E.g. <br>
&quot;no:*&quot; is a good choice.</p>

<p style="margin-top: 1em">Note that x11vnc blocks while
the external command or popup is running (other clients may
see no updates during this period). So a person sitting a
the physical display <br>
is needed to respond to an popup prompt. (use a 2nd x11vnc
if you lock yourself out).</p>

<p style="margin-top: 1em">More -accept tricks: use
&quot;popupmouse&quot; to only allow mouse clicks in the
builtin popup to be recognized. Similarly use
&quot;popupkey&quot; to only recognize keystroke responses.
<br>
These are to help avoid the user accidentally accepting a
client by typing or clicking. All 3 of the popup keywords
can be followed by +N+M to supply a position for the <br>
popup window. The default is to center the popup window.</p>

<p style="margin-top: 1em">-afteraccept string</p>

<p style="margin-top: 1em">As -accept, except to run a user
supplied command after a client has been accepted and
authenticated. RFB_MODE will be set to
&quot;afteraccept&quot; and the other RFB_* variables <br>
are as in -accept. Unlike -accept, the command return code
is not interpreted by x11vnc. Example: -afteraccept
&rsquo;killall xlock &amp;&rsquo;</p>

<p style="margin-top: 1em">-gone string</p>

<p style="margin-top: 1em">As -accept, except to run a user
supplied command when a client goes away (disconnects).
RFB_MODE will be set to &quot;gone&quot; and the other RFB_*
variables are as in -accept. <br>
The &quot;popup&quot; actions apply as well. Unlike -accept,
the command return code is not interpreted by x11vnc.
Example: -gone &rsquo;xlock &amp;&rsquo;</p>

<p style="margin-top: 1em">-unixpw [list]</p>

<p style="margin-top: 1em">Use Unix username and password
authentication. x11vnc will use the su(1) program to verify
the user&rsquo;s password. [list] is an optional comma
separated list of allowed <br>
Unix usernames. If the [list] string begins with the
character &quot;!&quot; then the entire list is taken as an
exclude list. See below for per-user options that can be
applied.</p>

<p style="margin-top: 1em">A familiar &quot;login:&quot;
and &quot;Password:&quot; dialog is presented to the user on
a black screen inside the vncviewer. The connection is
dropped if the user fails to supply the cor&acirc; <br>
rect password in 3 tries or does not send one before a 45
second timeout. Existing clients are view-only during this
period.</p>

<p style="margin-top: 1em">If the first character received
is &quot;Escape&quot; then the unix username will not be
displayed after &quot;login:&quot; as it is typed. This
could be of use for VNC viewers that automat&acirc; <br>
ically type the username and password.</p>

<p style="margin-top: 1em">Since the detailed behavior of
su(1) can vary from OS to OS and for local configurations,
test the mode before deployment to make sure it is working
properly. x11vnc will <br>
attempt to be conservative and reject a login if anything
abnormal occurs.</p>

<p style="margin-top: 1em">One case to note: FreeBSD and
the other BSD&rsquo;s by default it is impossible for the
user running x11vnc to validate his *own* password via su(1)
(commenting out the <br>
pam_self.so entry in /etc/pam.d/su eliminates this
behavior). So the x11vnc login will always *FAIL* for this
case (even when the correct password is supplied).</p>

<p style="margin-top: 1em">A possible workaround for this
on *BSD would be to start x11vnc as root with the
&quot;-users +nobody&quot; option to immediately switch to
user nobody where the su&rsquo;ing will proceed <br>
normally.</p>

<p style="margin-top: 1em">Another source of potential
problems are PAM modules that prompt for extra info, e.g.
password aging modules. These logins will fail as well even
when the correct pass&acirc; <br>
word is supplied.</p>

<p style="margin-top: 1em">**IMPORTANT**: to prevent the
Unix password being sent in *clear text* over the network,
one of two schemes will be enforced: 1) the -ssl builtin SSL
mode, or 2) require <br>
both -localhost and -stunnel be enabled.</p>

<p style="margin-top: 1em">Method 1) ensures the traffic is
encrypted between viewer and server. A PEM file will be
required, see the discussion under -ssl below (under some
circumstances a tempo&acirc; <br>
rary one can be automatically generated).</p>

<p style="margin-top: 1em">Method 2) requires the viewer
connection to appear to come from the same machine x11vnc is
running on (e.g. from a ssh -L port redirection). And that
the -stunnel SSL <br>
mode be used for encryption over the network. (see the
description of -stunnel below).</p>

<p style="margin-top: 1em">Note: as a convenience, if you
ssh(1) in and start x11vnc it will check if the environment
variable SSH_CONNECTION is set and appears reasonable. If it
does, then the <br>
-ssl or -stunnel requirement will be dropped since it is
assumed you are using ssh for the encrypted tunnelling.
-localhost is still enforced. Use -ssl or -stunnel to <br>
force SSL usage even if SSH_CONNECTION is set.</p>

<p style="margin-top: 1em">To override the above
restrictions you can set environment variables before
starting x11vnc:</p>

<p style="margin-top: 1em">Set UNIXPW_DISABLE_SSL=1 to
disable requiring either -ssl or -stunnel (as under
SSH_CONNECTION.) Evidently you will be using a different
method to encrypt the data <br>
between the vncviewer and x11vnc: perhaps ssh(1) or an IPSEC
VPN. -localhost is still enforced (however, see the next
paragraph.)</p>

<p style="margin-top: 1em">Set UNIXPW_DISABLE_LOCALHOST=1
to disable the -localhost requirement in -unixpw modes. One
should never do this (i.e. allow the Unix passwords to be
sniffed on the net&acirc; <br>
work.) This also disables the localhost requirement for
reverse connections (see below.)</p>

<p style="margin-top: 1em">Note that use of -localhost with
ssh(1) (and no -unixpw) is roughly the same as requiring a
Unix user login (since a Unix password or the user&rsquo;s
public key authentication <br>
is used by sshd on the machine where x11vnc runs and only
local connections from that machine are accepted).</p>

<p style="margin-top: 1em">Regarding reverse connections
(e.g. -R connect:host and -connect host), when the
-localhost constraint is in effect then reverse connections
can only be used to connect to <br>
the same machine x11vnc is running on (default port 5500).
Please use a ssh or stunnel port redirection to the viewer
machine to tunnel the reverse connection over an <br>
encrypted channel.</p>

<p style="margin-top: 1em">In -inetd mode the Method 1)
will be enforced (not Method 2). With -ssl in effect reverse
connections are disabled. If you override this via env. var,
be sure to also <br>
use encryption from the viewer to inetd. Tip: you can also
have your own stunnel spawn x11vnc in -inetd mode (thereby
bypassing inetd). See the FAQ for details.</p>

<p style="margin-top: 1em">The user names in the comma
separated [list] may have per-user options after a
&quot;:&quot;, e.g. &quot;fred:opts&quot; where
&quot;opts&quot; is a &quot;+&quot; separated list of
&quot;viewonly&quot;, &quot;fullaccess&quot;, <br>
&quot;input=XXXX&quot;, or &quot;deny&quot;, e.g.
&quot;karl,wally:viewonly,boss:input=M&quot;. For
&quot;input=&quot; it is the K,M,B,C described under
-input.</p>

<p style="margin-top: 1em">If an item in the list is
&quot;*&quot; that means those options apply to all users.
It ALSO implies all users are allowed to log in after
supplying a valid password. Use &quot;deny&quot; <br>
to explicitly deny some users if you use &quot;*&quot; to
set a global option. If [list] begins with the &quot;!&quot;
character then &quot;*&quot; is ignored for checking if the
user is allowed, but <br>
the option values associated with it do apply as normal.</p>

<p style="margin-top: 1em">There are also some utilities
for checking passwords if [list] starts with the
&quot;%&quot; character. See the quick_pw() function for
more details. Description: &quot;%-&quot; or
&quot;%stdin&quot; <br>
means read one line from stdin of form user:pass.
&quot;%stdin2&quot; means read the username from the first
stdin line and the password from the second stdin line.
&quot;%pipe&quot; means <br>
the first line of stdin is user:pass, if UNIXPW_CMD_STDIN is
set then that string is piped into the UNIXPW_CMD command
(see next paragraph), otherwise the 2nd line of <br>
stdin is read, if it a positive number that many bytes are
read from stdin and are piped into the command, if it is -1
then one more line, up to 8000 bytes, is read from <br>
stdin and piped to the command. &quot;%env&quot; means
user:pass is in UNIXPW env var. A leading &quot;%/&quot; or
&quot;%.&quot; means read the first line from the filename
that follows after the % <br>
character. % by itself means prompt for the username and
password. Otherwise: %user:pass For example: -unixpw
%fred:swordfish For the other cases user:pass is read <br>
from the indicated source. If the password is correct
&rsquo;Y user&rsquo; is printed and the program exit code is
0. If the password is incorrect it prints &rsquo;N
user&rsquo; and the exit <br>
code is 1. If there is some other error the exit code is 2.
This feature enables x11vnc to be a general unix user
password checking tool; it could be used from scripts <br>
or other programs. These % password checks, except for
&quot;%pipe&quot;, also apply to the -unixpw_nis and
-unixpw_cmd options.</p>

<p style="margin-top: 1em">For the % password check, if the
env. var. UNIXPW_CMD is set to a command then it is run as
the user (assuming the password is correct.) The output of
the command is not <br>
printed, the program or script must manage that by some
other means. The exit code of x11vnc will depend on the exit
code of the command that is run.</p>

<p style="margin-top: 1em">When interacting with /bin/su to
login x11vnc tries to emulate typing in the pty, set
X11VNC_SLOW_PW_MS to tune this (default 50 ms between
characters.)</p>

<p style="margin-top: 1em">Use -nounixpw to disable unixpw
mode if it was enabled earlier in the cmd line (e.g. -svc
mode)</p>

<p style="margin-top: 1em">-unixpw_nis [list]</p>

<p style="margin-top: 1em">As -unixpw above, however do not
use su(1) but rather use the traditional getpwnam(3) +
crypt(3) method to verify passwords. All of the above
-unixpw options and con&acirc; <br>
straints apply.</p>

<p style="margin-top: 1em">This mode requires that the
encrypted passwords be readable. Encrypted passwords stored
in /etc/shadow will be inaccessible unless x11vnc is run as
root.</p>

<p style="margin-top: 1em">This is called &quot;NIS&quot;
mode simply because in most NIS setups user encrypted
passwords are accessible (e.g. &quot;ypcat passwd&quot;) by
an ordinary user and so that user can authen&acirc; <br>
ticate ANY user.</p>

<p style="margin-top: 1em">NIS is not required for this
mode to work (only that getpwnam(3) return the encrypted
password is required), but it is unlikely it will work (as
an ordinary user) for most <br>
modern environments unless NIS is available. On the other
hand, when x11vnc is run as root it will be able to to
access /etc/shadow even if NIS is not available (note <br>
running as root is often done when running x11vnc from inetd
and xdm/gdm/kdm).</p>

<p style="margin-top: 1em">Looked at another way, if you do
not want to use the su(1) method provided by -unixpw (i.e.
su_verify()), you can run x11vnc as root and use
-unixpw_nis. Any users with <br>
passwords in /etc/shadow can then be authenticated.</p>

<p style="margin-top: 1em">In -unixpw_nis mode, under no
circumstances is x11vnc&rsquo;s user password verifying
function based on su called (i.e. the function su_verify()
that runs /bin/su in a pseu&acirc; <br>
doterminal to verify passwords.) However, if -unixpw_nis is
used in conjunction with the -find and -create -display
WAIT:... modes then, if x11vnc is running as root, <br>
/bin/su may be called externally to run the find or create
commands.</p>

<p style="margin-top: 1em">-unixpw_cmd cmd</p>

<p style="margin-top: 1em">As -unixpw above, however do not
use su(1) but rather run the externally supplied command
cmd. The first line of its stdin will be the username and
the second line the <br>
received password. If the command exits with status 0
(success) the VNC user will be accepted. It will be rejected
for any other return status.</p>

<p style="margin-top: 1em">Dynamic passwords and non-unix
passwords, e.g. LDAP, can be implemented this way by
providing your own custom helper program. Note that the
remote viewer is given 3 tries <br>
to enter the correct password, and so the program may be
called in a row that many (or more) times.</p>

<p style="margin-top: 1em">If a list of allowed users is
needed to limit who can log in, use -unixpw [list] in
addition to this option.</p>

<p style="margin-top: 1em">In FINDDISPLAY and
FINDCREATEDISPLAY modes the cmd will also be run with the
RFB_UNIXPW_CMD_RUN env. var. non-empty and set to the
corresponding display find/create com&acirc; <br>
mand. The first two lines of input are the username and
passwd as in the normal case described above. To support
FINDDISPLAY and FINDCREATEDISPLAY, cmd should run the <br>
requested command as the user (and most likely refusing to
run it if the password is not correct.) Here is an example
script (note it has a hardwired bogus password <br>
&quot;abc&quot;!)</p>

<p style="margin-top: 1em">#!/bin/sh # Example x11vnc
-unixpw_cmd script. # Read the first two lines of stdin
(user and passwd) read user read pass</p>

<p style="margin-top: 1em">debug=0 if [ $debug = 1 ]; then
echo &quot;user: $user&quot; 1&gt;&amp;2 echo &quot;pass:
$pass&quot; 1&gt;&amp;2 env | egrep -i &rsquo;rfb|vnc&rsquo;
1&gt;&amp;2 fi</p>

<p style="margin-top: 1em"># Check if the password is
valid. # (A real example would use ldap lookup, etc!) if [
&quot;X$pass&quot; != &quot;Xabc&quot; ]; then exit 1 #
incorrect password fi</p>

<p style="margin-top: 1em">if [
&quot;X$RFB_UNIXPW_CMD_RUN&quot; = &quot;X&quot; ]; then
exit 0 # correct password else # Run the requested command
(finddisplay) if [ $debug = 1 ]; then echo &quot;run: <br>
$RFB_UNIXPW_CMD_RUN&quot; 1&gt;&amp;2 fi exec /bin/su -
&quot;$user&quot; -c &quot;$RFB_UNIXPW_CMD_RUN&quot; fi exit
1</p>

<p style="margin-top: 1em">In -unixpw_cmd mode, under no
circumstances is x11vnc&rsquo;s user password verifying
function based on su called (i.e. the function su_verify()
that runs /bin/su in a pseu&acirc; <br>
doterminal to verify passwords.) It is up to the supplied
unixpw_cmd to do user switching if desired and if it has the
permissions to do so.</p>

<p style="margin-top: 1em">See also &quot;-passwdfile
custom:...&quot; above for a non unix username based custom
password checking interface.</p>

<p style="margin-top: 1em">-find</p>

<p style="margin-top: 1em">Find the user&rsquo;s display
using FINDDISPLAY. This is an alias for &quot;-display
WAIT:cmd=FINDDISPLAY&quot;.</p>

<p style="margin-top: 1em">Note: if a -display occurs later
on the command line it will override the -find setting.</p>

<p style="margin-top: 1em">For this and the next few
options see -display WAIT:... below for all of the
details.</p>

<p style="margin-top: 1em">-finddpy</p>

<p style="margin-top: 1em">Run the FINDDISPLAY program,
print out the found display (if any) and exit. Output is
like: DISPLAY=:0.0 DISPLAY=:0.0,XPID=12345 or
DISPLAY=:0.0,VT=7. XPID is the <br>
process ID of the found X server. VT is the Linux virtual
terminal of the X server.</p>

<p style="margin-top: 1em">-listdpy</p>

<p style="margin-top: 1em">Have the FINDDISPLAY program
list all of your displays (i.e. all the X displays on the
local machine that you have access rights to). x11vnc then
exits.</p>

<p style="margin-top: 1em">-findauth [disp]</p>

<p style="margin-top: 1em">Apply the -find/-finddpy
heuristics to try to guess the XAUTHORITY file for DISPLAY
&rsquo;disp&rsquo;. If &rsquo;disp&rsquo; is not supplied,
then the value in the -display on the cmdline is <br>
used; failing that $DISPLAY is used; and failing that
&quot;:0&quot; is used. x11vnc then exits.</p>

<p style="margin-top: 1em">If nothing is printed out, that
means no XAUTHORITY was found for &rsquo;disp&rsquo;; i.e.
failure. If &quot;XAUTHORITY=&quot; is printed out, that
means use the default (i.e. do not set XAU&acirc; <br>
THORITY). If &quot;XAUTHORITY=/path/to/file&quot; is printed
out, then use that file.</p>

<p style="margin-top: 1em">XDM/GDM/KDM: if you are running
x11vnc as root and want to find the XAUTHORITY before anyone
has logged into an X session yet, use: x11vnc -env FD_XDM=1
-findauth ... <br>
(This will also find the XAUTHORITY if a user is already
logged into the X session.) When running as root, FD_XDM=1
will be tried if the initial -findauth fails.</p>

<p style="margin-top: 1em">-create</p>

<p style="margin-top: 1em">First try to find the
user&rsquo;s display using FINDDISPLAY, if that
doesn&rsquo;t succeed create an X session via the
FINDCREATEDISPLAY method. This is an alias for
&quot;-display <br>
WAIT:cmd=FINDCREATEDISPLAY-Xvfb&quot;.</p>

<p style="margin-top: 1em">Note: if a -display occurs later
on the command line it will override the -create
setting.</p>

<p style="margin-top: 1em">SSH NOTE: for both -find and
-create you can (should!) add the &quot;-localhost&quot;
option to force SSH tunnel access.</p>

<p style="margin-top: 1em">-xdummy</p>

<p style="margin-top: 1em">As in -create, except Xdummy
instead of Xvfb.</p>

<p style="margin-top: 1em">-xvnc</p>

<p style="margin-top: 1em">As in -create, except Xvnc
instead of Xvfb.</p>

<p style="margin-top: 1em">-xvnc_redirect</p>

<p style="margin-top: 1em">As in -create, except
Xvnc.redirect instead of Xvfb.</p>

<p style="margin-top: 1em">-xdummy_xvfb</p>

<p style="margin-top: 1em">Sets
WAIT:cmd=FINDCREATEDISPLAY-Xdummy,Xvfb</p>

<p style="margin-top: 1em">-create_xsrv str</p>

<p style="margin-top: 1em">Sets
WAIT:cmd=FINDCREATEDISPLAY-&lt;str&gt; Can be on cmdline
after anything that sets WAIT:.. and other things (e.g.
-svc, -xdmsvc) to adjust the X server list. Example: -svc
<br>
... -create_xsrv Xdummy,X</p>

<p style="margin-top: 1em">-svc</p>

<p style="margin-top: 1em">Terminal services mode based on
SSL access. Alias for -display
WAIT:cmd=FINDCREATEDISPLAY-Xvfb -unixpw -users unixpw= -ssl
SAVE Also &quot;-service&quot;.</p>

<p style="margin-top: 1em">Note: if a -display, -unixpw,
-users, or -ssl occurs later on the command line it will
override the -svc setting.</p>

<p style="margin-top: 1em">-svc_xdummy</p>

<p style="margin-top: 1em">As -svc except Xdummy instead of
Xvfb.</p>

<p style="margin-top: 1em">-svc_xvnc</p>

<p style="margin-top: 1em">As -svc except Xvnc instead of
Xvfb.</p>

<p style="margin-top: 1em">-svc_xdummy_xvfb</p>

<p style="margin-top: 1em">As -svc with Xdummy,Xvfb.</p>

<p style="margin-top: 1em">-xdmsvc</p>

<p style="margin-top: 1em">Display manager Terminal
services mode based on SSL. Alias for -display
WAIT:cmd=FINDCREATEDISPLAY-Xvfb.xdmcp -unixpw -users unixpw=
-ssl SAVE Also &quot;-xdm_service&quot;.</p>

<p style="margin-top: 1em">Note: if a -display, -unixpw,
-users, or -ssl occurs later on the command line it will
override the -xdmsvc setting.</p>

<p style="margin-top: 1em">To create a session a user will
have to first log in to the -unixpw dialog and then log in
again to the XDM/GDM/KDM prompt. Subsequent re-connections
will only require <br>
the -unixpw password. See the discussion under -display
WAIT:... for more details about XDM, etc configuration.</p>

<p style="margin-top: 1em">Remember to enable XDMCP in the
xdm-config, gdm.conf, or kdmrc configuration file. See
-display WAIT: for more info.</p>

<p style="margin-top: 1em">-sshxdmsvc</p>

<p style="margin-top: 1em">Display manager Terminal
services mode based on SSH. Alias for -display
WAIT:cmd=FINDCREATEDISPLAY-Xvfb.xdmcp -localhost.</p>

<p style="margin-top: 1em">The -localhost option constrains
connections to come in via a SSH tunnel (which will require
a login). To create a session a user will also have to log
into the XDM GDM <br>
KDM prompt. Subsequent re-connections will only only require
the SSH login. See the discussion under -display WAIT:...
for more details about XDM, etc configuration.</p>

<p style="margin-top: 1em">Remember to enable XDMCP in the
xdm-config, gdm.conf, or kdmrc configuration file. See
-display WAIT: for more info.</p>

<p style="margin-top: 1em">-unixpw_system_greeter</p>

<p style="margin-top: 1em">Present a &quot;Press
&rsquo;Escape&rsquo; for System Greeter&quot; option to the
connecting VNC client in combined -unixpw and xdmcp
FINDCREATEDISPLAY modes (e.g. -xdmsvc).</p>

<p style="margin-top: 1em">Normally in a -unixpw mode the
VNC client must supply a valid username and password to gain
access. However, if -unixpw_system_greeter is supplied AND
the FINDCREATEDIS&acirc; <br>
PLAY command matches &rsquo;xdmcp&rsquo;, then the user has
the option to press Escape and then get a XDM/GDM/KDM
login/greeter panel instead. They will then supply a
username and <br>
password directly to the greeter.</p>

<p style="margin-top: 1em">Otherwise, in xdmcp
FINDCREATEDISPLAY mode the user must supply his username and
password TWICE. First to the initial unixpw login dialog,
and second to the subsequent <br>
XDM/GDM/KDM greeter. Note that if the user re-connects and
supplies his username and password in the unixpw dialog the
xdmcp greeter is skipped and he is connected <br>
directly to his existing X session. So the
-unixpw_system_greeter option avoids the extra password at X
session creation time.</p>

<p style="margin-top: 1em">Example: x11vnc -xdmsvc
-unixpw_system_greeter See -unixpw and -display WAIT:... for
more info.</p>

<p style="margin-top: 1em">The special options after a
colon at the end of the username (e.g. user:solid) described
under -display WAIT: are also applied in this mode if they
are typed in before the <br>
user hits Escape. The username is ignored but the colon
options are not.</p>

<p style="margin-top: 1em">The default message is 2 lines
in a small font, set the env. var.
X11VNC_SYSTEM_GREETER1=true for a 1 line message in a larger
font.</p>

<p style="margin-top: 1em">If the user pressed Escape the
FINDCREATEDISPLAY command will be run with the env. var.
X11VNC_XDM_ONLY=1.</p>

<p style="margin-top: 1em">Remember to enable XDMCP in the
xdm-config, gdm.conf, or kdmrc configuration file. See
-display WAIT: for more info.</p>

<p style="margin-top: 1em">-redirect port</p>

<p style="margin-top: 1em">As in
FINDCREATEDISPLAY-Xvnc.redirect mode except redirect
immediately (i.e. without X session finding or creation) to
a VNC server listening on port. You can also supply <br>
host:port to redirect to a different machine.</p>

<p style="margin-top: 1em">If 0 &lt;= port &lt; 200 it is
taken as a VNC display (5900 is added to get the actual
port), if port &lt; 0 then -port is used.</p>

<p style="margin-top: 1em">Probably the only reason to use
the -redirect option is in conjunction with SSL support,
e.g. -ssl SAVE. This provides an easy way to add SSL
encryption to a VNC server <br>
that does not support SSL (e.g. Xvnc or vnc.so) In fact, the
protocol does not even need to be VNC, and so &quot;-rfbport
port1 -ssl SAVE -redirect host:port2&quot; can act as a <br>
replacement for stunnel(1).</p>

<p style="margin-top: 1em">This mode only allows one
redirected connection. The -forever option does not apply.
Use -inetd or -loop for persistent service.</p>

<p style="margin-top: 1em">-display WAIT:...</p>

<p style="margin-top: 1em">A special usage mode for the
normal -display option. Useful with -unixpw, but can be used
independently of it. If the display string begins with WAIT:
then x11vnc waits <br>
until a VNC client connects before opening the X display (or
-rawfb device).</p>

<p style="margin-top: 1em">This could be useful for
delaying opening the display for certain usage modes (say if
x11vnc is started at boot time and no X server is running or
users logged in yet).</p>

<p style="margin-top: 1em">If the string is, e.g. WAIT:0.0
or WAIT:1, i.e. &quot;WAIT&quot; in front of a normal X
display, then that indicated display is used.</p>

<p style="margin-top: 1em">One can also insert a geometry
between colons, e.g. WAIT:1280x1024:... to set the size of
the display the VNC client first attaches to since some VNC
viewers will not <br>
automatically adjust to a new framebuffer size.</p>

<p style="margin-top: 1em">A more interesting case is like
this:</p>


<p style="margin-top: 1em">WAIT:cmd=/usr/local/bin/find_display</p>

<p style="margin-top: 1em">in which case the command after
&quot;cmd=&quot; is run to dynamically work out the DISPLAY
and optionally the XAUTHORITY data. The first line of the
command output must be of the <br>
form DISPLAY=&lt;xdisplay&gt;. On Linux if the virtual
terminal is known append &quot;,VT=n&quot; to this string
and the chvt(1) program will also be run. Any remaining
output is taken <br>
as XAUTHORITY data. It can be either of the form
XAUTHORITY=&lt;file&gt; or raw xauthority data for the
display. For example;</p>

<p style="margin-top: 1em">xauth extract -
$DISPLAY&quot;</p>

<p style="margin-top: 1em">NOTE: As specified in the
previous paragraph, you can supply your own WAIT:cmd=...
program or script, BUT there are two very useful *BUILT-IN*
ones: FINDDISPLAY (alias <br>
-find above) and FINDCREATEDISPLAY (alias -create above.)
Most people use these instead of creating their own script.
Read the following (especially the BUILT-IN modes <br>
sections) to see how to configure these two useful builtin
-display WAIT: modes.</p>

<p style="margin-top: 1em">In the case of -unixpw (and
-unixpw_nis only if x11vnc is running as root), then the
cmd= command is run as the user who just authenticated via
the login and password <br>
prompt.</p>

<p style="margin-top: 1em">In the case of -unixpw_cmd, the
commands will also be run as the logged-in user, as long as
the user-supplied helper program supports RFB_UNIXPW_CMD_RUN
(see the <br>
-unixpw_cmd option.)</p>

<p style="margin-top: 1em">Also in the case of -unixpw, the
user logging in can place a colon at the end of her username
and supply a few options: scale=, scale_cursor= (or sc=),
solid (or so), id=, <br>
clear_mods (or cm), clear_keys (or ck), clear_all (or ca),
repeat, speeds= (or sp=), readtimeout= (or rd=), viewonly
(or vo), nodisplay= (or nd=), rotate= (or ro=), or <br>
noncache (or nc), all separated by commas if there is more
than one. After the user logs in successfully, these options
will be applied to the VNC screen. For example,</p>

<p style="margin-top: 1em">login:
fred:scale=3/4,sc=1,repeat Password: ...</p>

<p style="margin-top: 1em">login:
runge:sp=modem,rd=120,solid</p>

<p style="margin-top: 1em">for convenience m/n implies
scale= e.g. fred:3/4 If you type and enter your password
incorrectly, to retrieve your long &quot;login:&quot; line
press the Up arrow once (before typ&acirc; <br>
ing anything else).</p>

<p style="margin-top: 1em">Most of these colon options only
apply to the builtin FINDDISPLAY and FINDCREATEDISPLAY
modes, but note that they are passed to the extrenal command
in the environment as <br>
well and so could be used.</p>

<p style="margin-top: 1em">In the login panel, press F1 to
get a list of the available options that you can add after
the username.</p>

<p style="margin-top: 1em">Another option is
&quot;geom=WxH&quot; or &quot;geom=WxHxD&quot; (or ge=).
This only has an effect in FINDCREATEDISPLAY mode when a
virtual X server such as Xvfb is going to be created. It
<br>
sets the width and height of the new display, and optionally
the color depth as well.</p>

<p style="margin-top: 1em">You can also supply
&quot;gnome&quot;, &quot;kde&quot;, &quot;twm&quot;,
&quot;fvwm&quot;, &quot;mwm&quot;, &quot;dtwm&quot;,
&quot;wmaker&quot;, &quot;xfce&quot;, &quot;lxde&quot;,
&quot;enlightenment&quot;, &quot;Xsession&quot;, or
&quot;failsafe&quot; (same as &quot;xterm&quot;) to have the
cre&acirc; <br>
ated display use that mode for the user session.</p>

<p style="margin-top: 1em">Specify &quot;tag=...&quot; to
set the unique FD_TAG desktop session tag described below.
Note: this option will be ignored if the FD_TAG env. var. is
already set or if the viewer- <br>
side supplied value is not completely composed of
alphanumeric or &rsquo;_&rsquo; or &rsquo;-&rsquo;
characters.</p>

<p style="margin-top: 1em">User preferences file: Instead
of having the user type in geom=WxH,... etc. every time he
logs in to find or create his X session, if you set
FD_USERPREFS to a string that <br>
does not contain the &quot;/&quot; character, then the
user&rsquo;s home directory is prepended to that string and
if the file exists its first line is read and appended to
any options he <br>
supplied at the login: prompt. For example -env
FD_USERPREFS=.x11vnc_create and the user put
&quot;geom=1600x1200&quot; in his ~/.x11vnc_create file.</p>

<p style="margin-top: 1em">To disable the option setting
set the environment variable X11VNC_NO_UNIXPW_OPTS=1 before
starting x11vnc. To set any other options, the user can use
the gui (x11vnc -gui <br>
connect) or the remote control method (x11vnc -R opt:val)
during his VNC session.</p>

<p style="margin-top: 1em">So we see the combination of
-display WAIT:cmd=... and -unixpw allows automatic pairing
of an unix authenticated VNC user with his desktop. This
could be very useful on <br>
SunRays and also any system where multiple users share a
given machine. The user does not need to remember special
ports or passwords set up for his desktop and VNC.</p>

<p style="margin-top: 1em">A nice way to use WAIT:cmd=...
is out of inetd(8) (it automatically forks a new x11vnc for
each user). You can have the x11vnc inetd spawned process
run as, say, root or <br>
nobody. When run as root (for either inetd or display
manager), you can also supply the option &quot;-users
unixpw=&quot; to have the x11vnc process switch to the user
as well. <br>
Note: there will be a 2nd SSL helper process that will not
switch, but it is only encoding and decoding the encrypted
stream at that point.</p>

<p style="margin-top: 1em">BUILT-IN modes:</p>

<p style="margin-top: 1em">-- Automatic Finding of User X
Sessions --</p>

<p style="margin-top: 1em">As a special case,
WAIT:cmd=FINDDISPLAY will run a script that works on most
Unixes to determine a user&rsquo;s DISPLAY variable and
xauthority data (see who(1) ).</p>

<p style="margin-top: 1em">NOTE: The option
&quot;-find&quot; is an alias for this mode.</p>

<p style="margin-top: 1em">To have this default script
printed to stdout (e.g. for customization) run with
WAIT:cmd=FINDDISPLAY-print To have the script run to print
what display it would find use <br>
&quot;-finddpy&quot; or WAIT:cmd=FINDDISPLAY-run</p>

<p style="margin-top: 1em">The standard script runs
xdpyinfo(1) run on potential displays. If your X server(s)
have a login greeter that exclusively grabs the Xserver,
then xdpyinfo blocks forever <br>
and this mode will not work. See
www.karlrunge.com/x11vnc/faq.html#faq-display-manager for
how to disable this for dtgreet on Solaris and possibly for
other greeters.</p>

<p style="margin-top: 1em">In -find/cmd=FINDDISPLAY mode,
if you set FD_XDM=1, e.g. &rsquo;x11vnc -env FD_XDM=1 -find
...&rsquo; and x11vnc is running as root (e.g. inetd) then
it will try to find the XAUTHOR&acirc; <br>
ITY file of a running XDM/GDM/KDM login greeter (i.e. no
user has logged into an X session yet.)</p>

<p style="margin-top: 1em">As another special case,
WAIT:cmd=HTTPONCE will allow x11vnc to service one http
request and then exit. This is usually done in -inetd mode
to run on, say, port 5800 and <br>
allow the Java vncviewer to be downloaded by client web
browsers. For example:</p>

<p style="margin-top: 1em">5815 stream tcp nowait root
/usr/sbin/tcpd /.../x11vnc &nbsp;-inetd -q -http_ssl -prog
/.../x11vnc &nbsp;-display WAIT:cmd=HTTPONCE</p>

<p style="margin-top: 1em">Where /.../x11vnc is the full
path to x11vnc. It is used in the Apache SSL-portal example
(see FAQ).</p>

<p style="margin-top: 1em">In this mode you can set
X11VNC_SKIP_DISPLAY to a comma separated list of displays
(e.g. &quot;:0,:1&quot;) to ignore in the finding process.
The &quot;:&quot; is optional. Ranges n-m e.g. <br>
0-20 can also be supplied. This string can also be set by
the connecting user via &quot;nd=&quot; using &quot;+&quot;
instead of &quot;,&quot; If &quot;nd=all&quot; or you set
X11VNC_SKIP_DISPLAY=all then all <br>
display finding fails as if you set
X11VNC_FINDDISPLAY_ALWAYS_FAILS=1 (below.)</p>

<p style="margin-top: 1em">On some systems lsof(1) can be
very slow. Set the env. var. FIND_DISPLAY_NO_LSOF=1 to skip
using lsof to try to find the Linux VT the X server is
running on. set <br>
FIND_DISPLAY_NO_VT_FIND=1 to avoid looking at all.</p>

<p style="margin-top: 1em">-- Automatic Creation of User X
Sessions --</p>

<p style="margin-top: 1em">An interesting option is
WAIT:cmd=FINDCREATEDISPLAY that is like FINDDISPLAY in that
is uses the same method to find an existing display.
However, if it does not find one <br>
it will try to *start* up an X server session for the user.
This is the only time x11vnc tries to actually start up an X
server.</p>

<p style="margin-top: 1em">NOTE: The option
&quot;-create&quot; is an alias for this mode.</p>

<p style="margin-top: 1em">It will start looking for an
open display number at :20 Override via
X11VNC_CREATE_STARTING_DISPLAY_NUMBER=n By default 80 X
displays are allowed (i.e. going to :99) Over&acirc; <br>
ride via X11VNC_CREATE_MAX_DISPLAYS=n</p>

<p style="margin-top: 1em">For its heuristics, the create
display script sets LC_ALL=C so that command output is
uniform. By default it will try to restore LC_ALL right
before starting the user <br>
session. However, if you don&rsquo;t mind it keeping
LC_ALL=C set the env. var.: X11VNC_CREATE_LC_ALL_C_OK=1</p>

<p style="margin-top: 1em">By default FINDCREATEDISPLAY
will try Xvfb and then Xdummy:</p>

<p style="margin-top: 1em">The Xdummy wrapper is part of
the x11vnc source code (x11vnc/misc/Xdummy) It should be
available in PATH and have run &quot;Xdummy -install&quot;
once to create the shared library. <br>
Xdummy only works on Linux. As of 12/2009 it no longer needs
to be run as root, and the default is to not run as root. In
some circumstances permissions may require run&acirc; <br>
ning it as root, in these cases specify
FD_XDUMMY_RUN_AS_ROOT=1, this is the same as supplying -root
to the Xdummy cmdline.</p>

<p style="margin-top: 1em">Xvfb is available on most
platforms and does not require root.</p>

<p style="margin-top: 1em">An advantage of Xdummy over Xvfb
is that Xdummy supports RANDR dynamic screen resizing.</p>

<p style="margin-top: 1em">When x11vnc exits (i.e. user
disconnects) the X server session stays running in the
background. The FINDDISPLAY will find it directly next time.
The user must exit the X <br>
session in the usual way for it to terminate (or kill the X
server process if all else fails).</p>

<p style="margin-top: 1em">To troubleshoot the
FINDCREATEDISPLAY mechanism, set the following env. var. to
an output log file, e.g -env
CREATE_DISPLAY_OUTPUT=/tmp/mydebug.txt</p>

<p style="margin-top: 1em">So this is a somewhat odd mode
for x11vnc in that it will start up and poll virtual X
servers! This can be used from, say, inetd(8) to provide a
means of definitely get&acirc; <br>
ting a desktop (either real or virtual) on the machine. E.g.
a desktop service:</p>

<p style="margin-top: 1em">5900 stream tcp nowait root
/usr/sbin/tcpd /.../x11vnc -inetd -q -http -ssl SAVE -unixpw
-users unixpw=&nbsp;-passwd secret -prog /.../x11vnc &nbsp;
-display WAIT:cmd=FINDCREATE&acirc; <br>
DISPLAY</p>

<p style="margin-top: 1em">Where /.../x11vnc is the full
path to x11vnc.</p>

<p style="margin-top: 1em">See the -svc/-service option
alias above.</p>

<p style="margin-top: 1em">If for some reason you do not
want x11vnc to ever try to find an existing display set the
env. var X11VNC_FINDDISPLAY_ALWAYS_FAILS=1 (also -env ...)
This is the same as <br>
setting X11VNC_SKIP_DISPLAY=all or supplying
&quot;nd=all&quot; after &quot;username:&quot;</p>

<p style="margin-top: 1em">Use
WAIT:cmd=FINDCREATEDISPLAY-print to print out the script
that is used for this.</p>

<p style="margin-top: 1em">You can specify the preferred X
server order via e.g.,
WAIT:cmd=FINDCREATEDISPLAY-Xdummy,Xvfb,X and/or leave out
ones you do not want. The the case &quot;X&quot; means try
to <br>
start up a real, hardware X server using xinit(1) or
startx(1). If there is already an X server running the X
case may only work on Linux (see startx(1) ).</p>

<p style="margin-top: 1em">&quot;Xvnc&quot; will start up a
VNC X server (real- or tight-vnc, e.g. use if Xvfb is not
available). &quot;Xsrv&quot; will start up the server
program in the variable &quot;FD_XSRV&quot; if it is <br>
non-empty. You can make this be a wrapper script if you like
(it must handle :N, -geometry, and -depth and other X server
options).</p>

<p style="margin-top: 1em">You can set the environment
variable FD_GEOM (or X11VNC_CREATE_GEOM) to WxH or WxHxD to
set the width and height and optionally the color depth of
the created display. <br>
You can also set FD_SESS to be the session (short name of
the windowmanager: kde, gnome, twm, failsafe, etc.). FD_OPTS
contains extra options to pass to the X server. You <br>
can also set FD_PROG to be the full path to the
session/windowmanager program.</p>

<p style="margin-top: 1em">More FD tricks: FD_CUPS=port or
FD_CUPS=host:port will set the cups printing environment.
Similarly for FD_ESD=port or FD_ESD=host:port for esddsp
sound redirection. <br>
Set FD_EXTRA to a command to be run a few seconds after the
X server starts up. Set FD_TAG to be a unique name for the
session, it is set as an X property, that makes <br>
FINDDISPLAY only find sessions with that tag value.</p>

<p style="margin-top: 1em">Set FD_XDMCP_IF to the network
interface that the display manager is running on; default is
&rsquo;localhost&rsquo; but you may need to set it to
&rsquo;::1&rsquo; on some IPv6 only systems or <br>
misconfigured display managers.</p>

<p style="margin-top: 1em">Set FD_NOLISTEN to override the
default &rsquo;-nolisten tcp&rsquo;</p>

<p style="margin-top: 1em">If you want the
FINDCREATEDISPLAY session to contact an XDMCP login manager
(xdm/gdm/kdm) on the same machine, then use
&quot;Xvfb.xdmcp&quot; instead of &quot;Xvfb&quot;, etc. The
user will <br>
have to supply his username and password one more time (but
he gets to select his desktop type so that can be useful).
For this to work, you will need to enable localhost <br>
XDMCP (udp port 177) for the display manager. This seems to
be:</p>

<p style="margin-top: 1em">for gdm in gdm.conf: Enable=true
in section [xdmcp] for kdm in kdmrc: Enable=true in section
[Xdmcp] for xdm in xdm-config: DisplayManager.requestPort:
177</p>

<p style="margin-top: 1em">See the shorthand options above
&quot;-svc&quot;, &quot;-xdmsvc&quot; and
&quot;-sshxdmsvc&quot; that specify the above options for
some useful cases.</p>

<p style="margin-top: 1em">If you set the env. var WAITBG=1
x11vnc will go into the background once listening in wait
mode.</p>

<p style="margin-top: 1em">Another special mode is
FINDCREATEDISPLAY-Xvnc.redirect, (or
FINDDISPLAY-Xvnc.redirect). In this case it will start up
Xvnc as above if needed, but instead of polling it <br>
in its normal way, it simply does a socket redirection of
the connected VNC viewer to the Xvnc.</p>

<p style="margin-top: 1em">So in Xvnc.redirect x11vnc does
no VNC but merely transfers the data back and forth. This
should be faster then x11vnc&rsquo;s polling method, but not
as fast as connecting <br>
directly to the Xvnc with the VNC Viewer. The idea here is
to take advantage of x11vnc&rsquo;s display finding/creating
scheme, SSL, and perhaps a few others. Most of
x11vnc&rsquo;s <br>
options do not apply in this mode.</p>

<p style="margin-top: 1em">Xvnc.redirect should also work
for the vnc.so X server module for the h/w display however
it will work only for finding the display and the user must
already be logged <br>
into the X console.</p>

<p style="margin-top: 1em">-vencrypt mode</p>

<p style="margin-top: 1em">The VeNCrypt extension to the
VNC protocol allows encrypted SSL/TLS connections. If the
-ssl mode is enabled, then VeNCrypt is enabled as well BY
DEFAULT (they both use a <br>
SSL/TLS tunnel, only the protocol handshake is a little
different.)</p>

<p style="margin-top: 1em">To control when and how VeNCrypt
is used, specify the mode string. If mode is
&quot;never&quot;, then VeNCrypt is not used. If mode is
&quot;support&quot; (the default) then VeNCrypt is <br>
supported. If mode is &quot;only&quot;, then the similar and
older ANONTLS protocol is not simultaneously supported.
x11vnc&rsquo;s normal SSL mode (vncs://) will be supported
under <br>
-ssl unless you set mode to &quot;force&quot;.</p>

<p style="margin-top: 1em">If mode is prefixed with
&quot;nodh:&quot;, then Diffie Hellman anonymous key
exchange is disabled. If mode is prefixed with
&quot;nox509:&quot;, then X509 key exchange is disabled.</p>

<p style="margin-top: 1em">To disable all Anonymous
Diffie-Hellman access (susceptible to Man-In-The-Middle
attack) you will need to supply &quot;-vencrypt nodh:support
-anontls never&quot; or &quot;-vencrypt <br>
nodh:only&quot;</p>

<p style="margin-top: 1em">If mode is prefixed with
&quot;newdh:&quot;, then new Diffie Hellman parameters are
generated for each connection (this can be time consuming:
1-60 secs; see -dhparams below for a <br>
faster way) rather than using the fixed values in the
program. Using fixed, publicly known values is not known to
be a security problem. This setting applies to ANONTLS <br>
as well.</p>

<p style="margin-top: 1em">Long example: -vencrypt
newdh:nox509:support</p>

<p style="margin-top: 1em">Also, if mode is prefixed with
&quot;plain:&quot;, then if -unixpw mode is active the
VeNCrypt &quot;*Plain&quot; username+passwd method is
enabled for Unix logins. Otherwise in -unixpw mode <br>
the normal login panel is provided.</p>

<p style="margin-top: 1em">You *MUST* supply the -ssl
option for VeNCrypt to be active. The -vencrypt option only
fine-tunes its operation.</p>

<p style="margin-top: 1em">-anontls mode</p>

<p style="margin-top: 1em">The ANONTLS extension to the VNC
protocol allows encrypted SSL/TLS connections. If the -ssl
mode is enabled, then ANONTLS is enabled as well BY DEFAULT
(they both use a <br>
SSL/TLS tunnel, only the protocol handshake is a little
different.)</p>

<p style="margin-top: 1em">ANONTLS is an older SSL/TLS mode
introduced by vino.</p>

<p style="margin-top: 1em">It is referred to as
&rsquo;TLS&rsquo; for its registered VNC security-type name,
but we use the more descriptive &Acirc;&acute;ANONTLS&rsquo;
here because it provides only Anonymous Diffie-Hellman <br>
encrypted connections, and hence no possibility for
certificate authentication.</p>

<p style="margin-top: 1em">To control when and how ANONTLS
is used, specify the mode string. If mode is
&quot;never&quot;, then ANONTLS is not used. If mode is
&quot;support&quot; (the default) then ANONTLS is sup&acirc;
<br>
ported. If mode is &quot;only&quot;, then the similar
VeNCrypt protocol is not simultaneously supported.
x11vnc&rsquo;s normal SSL mode (vncs://) will be supported
under -ssl unless you <br>
set mode to &quot;force&quot;.</p>

<p style="margin-top: 1em">If mode is prefixed with
&quot;newdh:&quot;, then new Diffie Hellman parameters are
generated for each connection (this can be time consuming:
1-60 secs; see -dhparams below for a <br>
faster way) rather than using the fixed values in the
program. Using fixed, publicly known values is not known to
be a security problem. This setting applies to VeNCrypt <br>
as well. See the description of &quot;plain:&quot; under
-vencrypt.</p>

<p style="margin-top: 1em">Long example: -anontls
newdh:plain:support</p>

<p style="margin-top: 1em">You *MUST* supply the -ssl
option for ANONTLS to be active. The -anontls option only
fine-tunes its operation.</p>

<p style="margin-top: 1em">-sslonly</p>

<p style="margin-top: 1em">Same as: &quot;-vencrypt never
-anontls never&quot; i.e. it disables the VeNCrypt and
ANONTLS encryption methods and only allows standard SSL
tunneling. You must also supply the <br>
-ssl ... option (see below.)</p>

<p style="margin-top: 1em">-dhparams file</p>

<p style="margin-top: 1em">For some operations a set of
Diffie Hellman parameters (prime and generator) is needed.
If so, use the parameters in file. In particular, the
VeNCrypt and ANONTLS anony&acirc; <br>
mous DH mode need them. By default a fixed set is used. If
you do not want to do that you can specify
&quot;newdh:&quot; to the -vencrypt and -anontls options to
generate a new set <br>
each session. If that is too slow for you, use -dhparams
file to a set you created manually via &quot;openssl dhparam
-out file 1024&quot;</p>

<p style="margin-top: 1em">-nossl</p>

<p style="margin-top: 1em">Disable the -ssl option (see
below). Since -ssl is off by default -nossl would only be
used on the commandline to unset any *earlier* -ssl option
(or -svc...)</p>

<p style="margin-top: 1em">-ssl [pem]</p>

<p style="margin-top: 1em">Use the openssl library
(www.openssl.org) to provide a built-in encrypted SSL/TLS
tunnel between VNC viewers and x11vnc. This requires libssl
support to be compiled into <br>
x11vnc at build time. If x11vnc is not built with libssl
support it will exit immediately when -ssl is prescribed.
See the -stunnel option below for an alternative.</p>

<p style="margin-top: 1em">The VNC Viewer-side needs to
support SSL/TLS as well. See this URL and also the
discussion below for ideas on how to enable SSL support for
the viewer: http://www.karl&acirc; <br>
runge.com/x11vnc/faq.html#faq-ssl-tun nel-viewers . x11vnc
provides an SSL enabled Java viewer applet in the
classes/ssl directory (-http or -httpdir options.) The SSVNC
<br>
viewer package supports SSL tunnels too.</p>

<p style="margin-top: 1em">If the VNC Viewer supports
VeNCrypt or ANONTLS (vino&rsquo;s encryption mode) they are
also supported by the -ssl mode (see the -vencrypt and
-anontls options for more info; use <br>
-sslonly to disable both of them.)</p>

<p style="margin-top: 1em">Use &quot;-ssl
/path/to/mycert.pem&quot; to specify an SSL certificate file
in PEM format to use to identify and provide a key for this
server. See openssl(1) for more info about <br>
PEMs and the -sslGenCert and &quot;-ssl SAVE&quot; options
below for how to create them.</p>

<p style="margin-top: 1em">The connecting VNC viewer SSL
tunnel can (at its option) authenticate this server if it
has the public key part of the certificate (or a common
certificate authority, CA, <br>
is a more sophisticated way to verify this server&rsquo;s
cert, see -sslGenCA below). This authentication is done to
prevent Man-In-The-Middle attacks. Otherwise, if the VNC
<br>
viewer simply accepts this server&rsquo;s key WITHOUT
verification, the traffic is protected from passive sniffing
on the network, but *NOT* from Man-In-The-Middle attacks.
<br>
There are hacker tools like dsniff/webmitm and cain that
implement SSL Man-In-The-Middle attacks.</p>

<p style="margin-top: 1em">If [pem] is empty or the string
&quot;SAVE&quot; then the openssl(1) command must be
available to generate the certificate the first time. A
self-signed certificate is generated <br>
(see -sslGenCA and -sslGenCert for use of a Certificate
Authority.) It will be saved to the file
~/.vnc/certs/server.pem. On subsequent calls if that file
already exists <br>
it will be used directly.</p>

<p style="margin-top: 1em">Use &quot;SAVE_NOPROMPT&quot; to
avoid being prompted to protect the generated key with a
passphrase. However in -inetd and -bg modes there will be no
prompting for a passphrase in <br>
either case.</p>

<p style="margin-top: 1em">If [pem] is
&quot;SAVE_PROMPT&quot; the server.pem certificate will be
created based on your answers to its prompts for all info
such as OrganizationalName, CommonName, etc.</p>

<p style="margin-top: 1em">Use
&quot;SAVE-&lt;string&gt;&quot; and
&quot;SAVE_PROMPT-&lt;string&gt;&quot; to refer to the file
~/.vnc/certs/server-&lt;string&gt;.pem instead (it will be
generated if it does not already exist). E.g. <br>
&quot;SAVE-charlie&quot; will store to the file
~/.vnc/certs/server-charlie.pem</p>

<p style="margin-top: 1em">Examples: x11vnc -ssl SAVE
-display :0 ... x11vnc -ssl SAVE-someother -display :0
...</p>

<p style="margin-top: 1em">If [pem] is &quot;TMP&quot; and
the openssl(1) utility command exists in PATH, then a
temporary, self-signed certificate will be generated for
this session. If openssl(1) cannot be <br>
used to generate a temporary certificate x11vnc exits
immediately. The temporary cert will be discarded when
x11vnc exits.</p>

<p style="margin-top: 1em">If successful in using
openssl(1) to generate a temporary certificate in
&quot;SAVE&quot; or &quot;TMP&quot; creation modes, the
public part of it will be displayed to stderr (e.g. one
could <br>
copy it to the client-side to provide authentication of the
server to VNC viewers.)</p>

<p style="margin-top: 1em">NOTE: In &quot;TMP&quot; mode,
unless you safely copy the public part of the temporary Cert
to the viewer for authenticate *every time* (unlikely...),
then only passive sniffing <br>
attacks are prevented and you are still open to
Man-In-The-Middle attacks. This is why the default
&quot;SAVE&quot; mode is preferred (and more sophisticated
CA mode too). Only <br>
with saved keys AND the VNC viewer authenticating them (via
the public certificate), are Man-In-The-Middle attacks
prevented.</p>

<p style="margin-top: 1em">If [pem] is &quot;ANON&quot;
then the Diffie-Hellman anonymous key exchange method is
used. In this mode there are *no* SSL certificates and so it
is not possible to authenticate <br>
either the VNC server or VNC client. Thus only passive
network sniffing attacks are avoided: the &quot;ANON&quot;
method is susceptible to Man-In-The-Middle attacks.
&quot;ANON&quot; is not <br>
recommended; instead use a SSL PEM you created or the
default &quot;SAVE&quot; method.</p>

<p style="margin-top: 1em">See -ssldir below to use a
directory besides the default ~/.vnc/certs</p>

<p style="margin-top: 1em">If your x11vnc binary was not
compiled with OpenSSL library support, use of the -ssl
option will induce an immediate failure and exit. For such
binaries, consider using <br>
the -stunnel option for SSL encrypted connections.</p>

<p style="margin-top: 1em">Misc Info: In temporary cert
creation mode &quot;TMP&quot;, set the env. var.
X11VNC_SHOW_TMP_PEM=1 to have x11vnc print out the entire
certificate, including the PRIVATE KEY part, <br>
to stderr. There are better ways to get/save this info. See
&quot;SAVE&quot; above and &quot;-sslGenCert&quot;
below.</p>

<p style="margin-top: 1em">-ssltimeout n</p>

<p style="margin-top: 1em">Set SSL read timeout to n
seconds. In some situations (i.e. an iconified viewer in
Windows) the viewer stops talking and the connection is
dropped after the default time&acirc; <br>
out (25s for about the first minute, 43200s later). Set to
zero to poll forever. Set to a negative value to use the
builtin setting.</p>

<p style="margin-top: 1em">Note that this value does NOT
apply to the *initial* ssl init connection. The default
timeout for that is 20sec. Use -env SSL_INIT_TIMEOUT=n to
modify it.</p>

<p style="margin-top: 1em">-sslnofail</p>

<p style="margin-top: 1em">Exit at the first SSL connection
failure. Useful when scripting SSL connections (e.g. x11vnc
is started via ssh) and you do not want x11vnc waiting
around for more connec&acirc; <br>
tions, tying up ports, etc.</p>

<p style="margin-top: 1em">-ssldir dir</p>

<p style="margin-top: 1em">Use dir as an alternate ssl
certificate and key management toplevel directory. The
default is ~/.vnc/certs</p>

<p style="margin-top: 1em">This directory is used to store
server and other certificates and keys and also other
materials. E.g. in the simplest case, &quot;-ssl SAVE&quot;
will store the x11vnc server cert <br>
in dir/server.pem</p>

<p style="margin-top: 1em">Use of alternate directories via
-ssldir allows you to manage multiple VNC Certificate
Authority (CA) keys. Another use is if ~/.vnc/cert is on an
NFS share you might <br>
want your certificates and keys to be on a local filesystem
to prevent network snooping (for example -ssldir
/var/lib/x11vnc-certs).</p>

<p style="margin-top: 1em">-ssldir affects nearly all of
the other -ssl* options, e.g. -ssl SAVE, -sslGenCert,
etc..</p>

<p style="margin-top: 1em">-sslverify path</p>

<p style="margin-top: 1em">For either of the -ssl or
-stunnel modes, use path to provide certificates to
authenticate incoming VNC *Client* connections (normally
only the server is authenticated in <br>
SSL.) This can be used as a method to replace standard
password authentication of clients.</p>

<p style="margin-top: 1em">If path is a directory it
contains the client (or CA) certificates in separate files.
If path is a file, it contains one or more certificates. See
special tokens below. <br>
These correspond to the &quot;CApath = dir&quot; and
&quot;CAfile = file&quot; stunnel options. See the
stunnel(8) manpage for details.</p>

<p style="margin-top: 1em">Examples: x11vnc -ssl -sslverify
~/my.crt x11vnc -ssl -sslverify ~/my_pem_dir/</p>

<p style="margin-top: 1em">Note that if path is a
directory, it must contain the certs in separate files named
like &lt;HASH&gt;.0, where the value of &lt;HASH&gt; is
found by running the command &quot;openssl x509 <br>
-hash -noout -in file.crt&quot;. Evidently one uses
&lt;HASH&gt;.1 if there is a collision...</p>

<p style="margin-top: 1em">The the key-management utility
&quot;-sslCertInfo HASHON&quot; and &quot;-sslCertInfo
HASHOFF&quot; will create/delete these hashes for you
automatically (via symlink) in the HASH subdirs it <br>
manages. Then you can point -sslverify to the HASH
subdir.</p>

<p style="margin-top: 1em">Special tokens: in -ssl mode, if
path is not a file or a directory, it is taken as a comma
separated list of tokens that are interpreted as
follows:</p>

<p style="margin-top: 1em">If a token is &quot;CA&quot;
that means load the CA/cacert.pem file from the ssl
directory. If a token is &quot;clients&quot; then all the
files clients/*.crt in the ssl directory are <br>
loaded. Otherwise the file clients/token.crt is attempted to
be loaded. As a kludge, use a token like ../server-foo to
load a server cert if you find that necessary.</p>

<p style="margin-top: 1em">Use -ssldir to use a directory
different from the ~/.vnc/certs default.</p>

<p style="margin-top: 1em">Note that if the &quot;CA&quot;
cert is loaded you do not need to load any of the certs that
have been signed by it. You will need to load any additional
self-signed certs however.</p>

<p style="margin-top: 1em">Examples: x11vnc -ssl -sslverify
CA x11vnc -ssl -sslverify self:fred,self:jim x11vnc -ssl
-sslverify CA,clients</p>

<p style="margin-top: 1em">Usually &quot;-sslverify
CA&quot; is the most effective. See the -sslGenCA and
-sslGenCert options below for how to set up and manage the
CA framework.</p>

<p style="margin-top: 1em">Note that if the Client&rsquo;s
(vncviewer) certificate has been signed by a well-known CA
then the CA&rsquo;s certificate may already be installed on
the system. So, for example, on <br>
a debian based system one could use: -sslverify
/etc/ssl/certs.</p>

<p style="margin-top: 1em">NOTE: the following utilities,
-sslGenCA, -sslGenCert, -sslEncKey, -sslCertInfo, and
-sslCRL are provided for completeness, but for casual usage
they are overkill.</p>

<p style="margin-top: 1em">They provide VNC Certificate
Authority (CA) key creation and server / client key
generation and signing. So they provide a basic Public Key
management framework for VNC- <br>
ing with x11vnc. (note that they require openssl(1) be
installed on the system)</p>

<p style="margin-top: 1em">However, the simplest usage
mode, &quot;-ssl TMP&quot; (where x11vnc automatically
generates its own, self-signed, temporary key and the VNC
viewers always accept it, e.g. accepting <br>
via a dialog box) is probably safe enough for most
scenarios. CA management is not needed.</p>

<p style="margin-top: 1em">To protect against
Man-In-The-Middle attacks the &quot;TMP&quot; mode can be
improved by using &quot;-ssl SAVE&quot; (same as
&quot;-ssl&quot;, i.e. the default) to have x11vnc create a
longer term <br>
self-signed certificate, and then (safely) copy the
corresponding public key cert to the desired client machines
(care must be taken the private key part is not stolen; <br>
you will be prompted for a passphrase).</p>

<p style="margin-top: 1em">So keep in mind no CA key
creation or management (-sslGenCA and -sslGenCert) is needed
for either of the above two common usage modes.</p>

<p style="margin-top: 1em">One might want to use -sslGenCA
and -sslGenCert if you had a large number of VNC client and
server workstations. That way the administrator could
generate a single CA key <br>
with -sslGenCA and distribute its certificate part to all of
the workstations.</p>

<p style="margin-top: 1em">Next, he could create signed VNC
server keys (-sslGenCert server ...) for each workstation or
user that then x11vnc would use to authenticate itself to
any VNC client that <br>
has the CA cert.</p>

<p style="margin-top: 1em">Optionally, the admin could also
make it so the VNC clients themselves are authenticated to
x11vnc (-sslGenCert client ...) For this -sslverify would be
pointed to the CA <br>
cert (and/or self-signed certs).</p>

<p style="margin-top: 1em">x11vnc will be able to use all
of these cert and key files. On the VNC client side, they
will need to be &quot;imported&quot; somehow. Web browsers
have &quot;Manage Certificates&quot; <br>
actions as does the Java applet plugin Control Panel.
stunnel can also use these files (see the ss_vncviewer
example script in the FAQ and SSVNC.)</p>

<p style="margin-top: 1em">-sslCRL path</p>

<p style="margin-top: 1em">Set the Certificate Revocation
Lists (CRL) to path. This setting applies for both -ssl and
-stunnel modes.</p>

<p style="margin-top: 1em">If path is a file, the file
contains one or more CRLs in PEM format. If path is a
directory, it contains hash named files of CRLs in the usual
OpenSSL manner. See the <br>
OpenSSL and stunnel(8) documentation for more info.</p>

<p style="margin-top: 1em">This option only applies if
-sslverify has been supplied: it checks for revocation along
the certificate chain used to verify the VNC client. The
-sslCRL setting will be <br>
ignored when -sslverify is not specified.</p>

<p style="margin-top: 1em">Note that if a CRL&rsquo;s
expiration date has passed, all SSL connections will fail
regardless of if they are related to the subject of the CRL
or not.</p>

<p style="margin-top: 1em">Only rarely will one&rsquo;s
x11vnc -ssl infrastructure be so large that this option
would be useful (since normally maintaining the contents of
the -sslverify file or directory <br>
should be enough.) However, when using x11vnc with a
Certificate Authority (see -sslGenCA) to authenticate
Clients via SSL/TLS, the -sslCRL option can be useful to
revoke <br>
users&rsquo; certs whose private SSL keys were lost or
stolen (e.g. laptop.) This way a new CA cert+key does not
need to be created and new signed client keys generated and
<br>
distributed to all users.</p>

<p style="margin-top: 1em">To create a CRL file with
revoked certificates the commands &rsquo;openssl ca -revoke
...&rsquo; and &rsquo;openssl ca -gencrl ...&rsquo; are
useful. (Run them in ~/.vnc/certs)</p>

<p style="margin-top: 1em">-sslGenCA [dir]</p>

<p style="margin-top: 1em">Generate your own Certificate
Authority private key, certificate, and other files in
directory [dir]. x11vnc then exits.</p>

<p style="margin-top: 1em">If [dir] is not supplied, a
-ssldir setting is used, or otherwise ~/.vnc/certs is
used.</p>

<p style="margin-top: 1em">This command also creates
directories where server and client certs and keys will be
stored. The openssl(1) program must be installed on the
system and available in PATH.</p>

<p style="margin-top: 1em">After the CA files and
directories are created the x11vnc command exits; the VNC
server is not run.</p>

<p style="margin-top: 1em">You will be prompted for
information to put into the CA certificate. The info does
not have to be accurate just as long as clients accept the
cert for VNC connections. <br>
You will also need to supply a passphrase of at least 4
characters for the CA private key.</p>

<p style="margin-top: 1em">Once you have generated the CA
you can distribute its certificate part,
[dir]/CA/cacert.pem, to other workstations where VNC viewers
will be run. One will need to <br>
&quot;import&quot; this certificate in the applications,
e.g. Web browser, Java applet plugin, stunnel, etc. Next,
you can create and sign keys using the CA with the
-sslGenCert <br>
option below.</p>

<p style="margin-top: 1em">Examples: x11vnc -sslGenCA
x11vnc -sslGenCA ~/myCAdir x11vnc -ssldir ~/myCAdir
-sslGenCA</p>

<p style="margin-top: 1em">(the last two lines are
equivalent)</p>

<p style="margin-top: 1em">-sslGenCert type name</p>

<p style="margin-top: 1em">Generate a VNC server or client
certificate and private key pair signed by the CA created
previously with -sslGenCA. The openssl(1) program must be
installed on the sys&acirc; <br>
tem and available in PATH.</p>

<p style="margin-top: 1em">After the Certificate is
generated x11vnc exits; the VNC server is not run.</p>

<p style="margin-top: 1em">The type of key to be generated
is the string type. It is either &quot;server&quot; (i.e.
for use by x11vnc) or &quot;client&quot; (for a VNC viewer).
Note that typically only &quot;server&quot; is <br>
used: the VNC clients authenticate themselves by a
non-public-key method (e.g. VNC or unix password). type is
required.</p>

<p style="margin-top: 1em">An arbitrary default name you
want to associate with the key is supplied by the name
string. You can change it at the various prompts when
creating the key. name is <br>
optional.</p>

<p style="margin-top: 1em">If name is left blank for
clients keys then &quot;nobody&quot; is used. If left blank
for server keys, then the primary server key:
&quot;server.pem&quot; is created (this is the saved one
<br>
referenced by &quot;-ssl SAVE&quot; when the server is
started)</p>

<p style="margin-top: 1em">If name begins with the string
&quot;self:&quot; then a self-signed certificate is created
instead of one signed by your CA key.</p>

<p style="margin-top: 1em">If name begins with the string
&quot;req:&quot; then only a key (.key) and a certificate
signing *request* (.req) are generated. You can then send
the .req file to an external CA <br>
(even a professional one, e.g. Thawte) and then combine the
.key and the received cert into the .pem file with the same
basename.</p>

<p style="margin-top: 1em">The distinction between
&quot;server&quot; and &quot;client&quot; is simply the
choice of output filenames and sub-directory. This makes it
so the -ssl SAVE-name option can easily pick up <br>
the x11vnc PEM file this option generates. And similarly
makes it easy for the -sslverify option to pick up your
client certs.</p>

<p style="margin-top: 1em">There is nothing special about
the filename or directory location of either the
&quot;server&quot; and &quot;client&quot; certs. You can
rename the files or move them to wherever you like.</p>

<p style="margin-top: 1em">Precede this option with -ssldir
[dir] to use a directory other than the default ~/.vnc/certs
You will need to run -sslGenCA on that directory first
before doing any <br>
-sslGenCert key creation.</p>

<p style="margin-top: 1em">Note you cannot recreate a cert
with exactly the same distiguished name (DN) as an existing
one. To do so, you will need to edit the [dir]/CA/index.txt
file to delete the <br>
line.</p>

<p style="margin-top: 1em">Similar to -sslGenCA, you will
be prompted to fill in some information that will be
recorded in the certificate when it is created.</p>

<p style="margin-top: 1em">Tip: if you know the
fully-qualified hostname other people will be connecting to,
you can use that as the CommonName &quot;CN&quot; to avoid
some applications (e.g. web browsers and <br>
java plugin) complaining that it does not match the
hostname.</p>

<p style="margin-top: 1em">You will also need to supply the
CA private key passphrase to unlock the private key created
from -sslGenCA. This private key is used to sign the server
or client cer&acirc; <br>
tificate.</p>

<p style="margin-top: 1em">The &quot;server&quot; certs can
be used by x11vnc directly by pointing to them via the -ssl
[pem] option. The default file will be
~/.vnc/certs/server.pem. This one would be used <br>
by simply typing -ssl SAVE. The pem file contains both the
certificate and the private key. server.crt file contains
the cert only.</p>

<p style="margin-top: 1em">The &quot;client&quot; cert +
private key file will need to be copied and imported into
the VNC viewer side applications (Web browser, Java plugin,
stunnel, etc.) Once that is done <br>
you can delete the &quot;client&quot; private key file on
this machine since it is only needed on the VNC viewer side.
The, e.g. ~/.vnc/certs/clients/&lt;name&gt;.pem contains
both the <br>
cert and private key. The &lt;name&gt;.crt contains the
certificate only.</p>

<p style="margin-top: 1em">NOTE: It is very important to
know one should generate new keys with a passphrase.
Otherwise if an untrusted user steals the key file he could
use it to masquerade as the <br>
x11vnc server (or VNC viewer client). You will be prompted
whether to encrypt the key with a passphrase or not. It is
recommended that you do. One inconvenience to a <br>
passphrase is that it must be typed in EVERY time x11vnc or
the client app is started up.</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">x11vnc -sslGenCert server x11vnc
-ssl SAVE -display :0 ...</p>

<p style="margin-top: 1em">and then on viewer using
ss_vncviewer stunnel wrapper (see the FAQ): ss_vncviewer
-verify ./cacert.crt hostname:0</p>

<p style="margin-top: 1em">(this assumes the cacert.crt
cert from -sslGenCA was safely copied to the VNC viewer
machine where ss_vncviewer is run)</p>

<p style="margin-top: 1em">Example using a name:</p>

<p style="margin-top: 1em">x11vnc -sslGenCert server
charlie x11vnc -ssl SAVE-charlie -display :0 ...</p>

<p style="margin-top: 1em">Example for a client certificate
(rarely used):</p>

<p style="margin-top: 1em">x11vnc -sslGenCert client roger
scp ~/.vnc/certs/clients/roger.pem somehost:. rm
~/.vnc/certs/clients/roger.pem</p>

<p style="margin-top: 1em">x11vnc is then started with the
option -sslverify ~/.vnc/certs/clients/roger.crt (or simply
-sslverify roger), and on the viewer user on somehost could
do for example:</p>

<p style="margin-top: 1em">ss_vncviewer -mycert ./roger.pem
hostname:0</p>

<p style="margin-top: 1em">If you set the env. var
REQ_ARGS=&rsquo;...&rsquo; it will be passed to openssl
req(1). A common use would be REQ_ARGS=&rsquo;-days
1095&rsquo; to bump up the expiration date (3 years in this
<br>
case).</p>

<p style="margin-top: 1em">-sslEncKey pem</p>

<p style="margin-top: 1em">Utility to encrypt an existing
PEM file with a passphrase you supply when prompted. For
that key to be used (e.g. by x11vnc) the passphrase must be
supplied each time.</p>

<p style="margin-top: 1em">The &quot;SAVE&quot; notation
described under -ssl applies as well. (precede this option
with -ssldir [dir] to refer a directory besides the default
~/.vnc/certs)</p>

<p style="margin-top: 1em">The openssl(1) program must be
installed on the system and available in PATH. After the Key
file is encrypted the x11vnc command exits; the VNC server
is not run.</p>

<p style="margin-top: 1em">Examples: x11vnc -sslEncKey
/path/to/foo.pem x11vnc -sslEncKey SAVE x11vnc -sslEncKey
SAVE-charlie</p>

<p style="margin-top: 1em">-sslCertInfo pem</p>

<p style="margin-top: 1em">Prints out information about an
existing PEM file. In addition the public certificate is
also printed. The openssl(1) program must be in PATH.
Basically the command <br>
&quot;openssl x509 -text&quot; is run on the pem.</p>

<p style="margin-top: 1em">After the info is printed the
x11vnc command exits; the VNC server is not run.</p>

<p style="margin-top: 1em">The &quot;SAVE&quot; notation
described under -ssl applies as well.</p>

<p style="margin-top: 1em">Using &quot;LIST&quot; will give
a list of all certs being managed (in the ~/.vnc/certs dir,
use -ssldir to refer to another dir). &quot;ALL&quot; will
print out the info for every managed <br>
key (this can be very long). Giving a client or server cert
shortname will also try a lookup (e.g. -sslCertInfo
charlie). Use &quot;LISTL&quot; or &quot;LL&quot; for a long
(ls -l style) <br>
listing.</p>

<p style="margin-top: 1em">Using &quot;HASHON&quot; will
create subdirs [dir]/HASH and [dir]/HASH with OpenSSL hash
filenames (e.g. 0d5fbbf1.0) symlinks pointing up to the
corresponding *.crt file. ([dir] is <br>
~/.vnc/certs or one given by -ssldir.) This is a useful way
for other OpenSSL applications (e.g. stunnel) to access all
of the certs without having to concatenate them. <br>
x11vnc will not use them unless you specifically reference
them. &quot;HASHOFF&quot; removes these HASH subdirs.</p>

<p style="margin-top: 1em">The LIST, LISTL, LL, ALL,
HASHON, HASHOFF words can also be lowercase, e.g.
&quot;list&quot;.</p>

<p style="margin-top: 1em">-sslDelCert pem</p>

<p style="margin-top: 1em">Prompts you to delete all .crt
.pem .key .req files associated with [pem]. x11vnc then
exits. &quot;SAVE&quot; and lookups as in -sslCertInfo apply
as well.</p>

<p style="margin-top: 1em">-sslScripts</p>

<p style="margin-top: 1em">Prints out both the
&rsquo;genCA&rsquo; and &rsquo;genCert&rsquo; x11vnc openssl
wrapper scripts for you to examine, modify, etc. The scripts
are printed to stdout and then the x11vnc program <br>
exits.</p>

<p style="margin-top: 1em">-stunnel [pem]</p>

<p style="margin-top: 1em">Use the stunnel(8)
(stunnel.mirt.net) to provide an encrypted SSL tunnel
between viewers and x11vnc.</p>

<p style="margin-top: 1em">This external tunnel method was
implemented prior to the integrated -ssl encryption
described above. It still works well and avoids the
requirement of linking with the <br>
OpenSSL libraries. This mode requires stunnel to be
installed on the system and available via PATH (n.b. stunnel
is often installed in sbin directories). Version 4.x of <br>
stunnel is assumed (but see -stunnel3 below.)</p>

<p style="margin-top: 1em">[pem] is optional, use
&quot;-stunnel /path/to/stunnel.pem&quot; to specify a PEM
certificate file to pass to stunnel. See the -ssl option for
more info on certificate files.</p>

<p style="margin-top: 1em">Whether or not your stunnel has
its own certificate depends on your stunnel configuration;
stunnel often generates one at install time. See your
stunnel documentation for <br>
details. In any event, if you want to use this certificate
you must supply the full path to it as [pem]. Note: the file
may only be readable by root.</p>

<p style="margin-top: 1em">[pem] may also be the special
strings &quot;TMP&quot;, &quot;SAVE&quot;, and
&quot;SAVE...&quot; as described in the -ssl option. If
[pem] is not supplied, &quot;SAVE&quot; is assumed.</p>

<p style="margin-top: 1em">Note that the VeNCrypt, ANONTLS,
and &quot;ANON&quot; modes are not supported in -stunnel
mode.</p>

<p style="margin-top: 1em">stunnel is started up as a child
process of x11vnc and any SSL connections stunnel receives
are decrypted and sent to x11vnc over a local socket. The
strings &quot;The SSL VNC <br>
desktop is ...&quot; and &quot;SSLPORT=...&quot; are printed
out at startup to indicate this.</p>

<p style="margin-top: 1em">The -localhost option is
enforced by default to avoid people routing around the SSL
channel. Use -env STUNNEL_DISABLE_LOCALHOST=1 to disable
this security requirement.</p>

<p style="margin-top: 1em">Set -env STUNNEL_DEBUG=1 for
more debugging printout.</p>

<p style="margin-top: 1em">Set -env STUNNEL_PROG=xxx to the
full path of stunnel program you want to be used (e.g.
/usr/bin/stunnel4).</p>

<p style="margin-top: 1em">Set -env STUNNEL_LISTEN=xxx to
the address of the network interface to listen on (the
default is to listen on all interfaces), e.g.
STUNNEL_LISTEN=192.168.1.100.</p>

<p style="margin-top: 1em">A simple way to add IPv6 support
is STUNNEL_LISTEN=::</p>

<p style="margin-top: 1em">Your VNC viewer will also need
to be able to connect via SSL. Unfortunately not too many do
this. See the information about SSL viewers under the -ssl
option. The <br>
x11vnc project&rsquo;s SSVNC is an option.</p>

<p style="margin-top: 1em">Also, in the x11vnc
distribution, patched TightVNC and UltraVNC Java applet jar
files are provided in the classes/ssl directory that do SSL
connections. Enable serving <br>
them with the -http, -http_ssl, or -httpdir (see the option
descriptions for more info.)</p>

<p style="margin-top: 1em">Note that for the Java viewer
applet usage the &quot;?PORT=xxxx&quot; in the various URLs
printed at startup will need to be supplied to the web
browser to connect properly.</p>

<p style="margin-top: 1em">Currently the automatic
&quot;single port&quot; HTTPS mode of -ssl is not fully
supported in -stunnel mode. However, it can be emulated
via:</p>

<p style="margin-top: 1em">% x11vnc -stunnel -http_ssl
-http_oneport ...</p>

<p style="margin-top: 1em">In general, it is also not too
difficult to set up an stunnel or other SSL tunnel on the
viewer side. A simple example on Unix using stunnel 3.x
is:</p>

<p style="margin-top: 1em">% stunnel -c -d localhost:5901
-r remotehost:5900 % vncviewer localhost:1</p>

<p style="margin-top: 1em">For Windows, stunnel has been
ported to it and there are probably other such tools
available. See the FAQ and SSVNC for more examples.</p>

<p style="margin-top: 1em">-stunnel3 [pem]</p>

<p style="margin-top: 1em">Use version 3.x stunnel command
line syntax instead of version 4.x. The -http/-httpdir Java
applet serving is currently not available in this mode.</p>

<p style="margin-top: 1em">-enc cipher:keyfile</p>

<p style="margin-top: 1em">Use symmetric encryption with
cipher &quot;cipher&quot; and secret key data in
&quot;keyfile&quot;. If keyfile is pw=&lt;string&gt; then
&quot;string&quot; is used as the key data.</p>

<p style="margin-top: 1em">NOTE: It is recommended that you
use SSL via the -ssl option instead of this option because
SSL is well understood and takes great care to establish
unique session keys <br>
and is more compatible with other software. Use this option
if you do not want to deal with SSL certificates for
authentication and do not want to use SSH but want some <br>
encryption for your VNC session. Or if you must interface
with a symmetric key tunnel that you do not have control
over.</p>

<p style="margin-top: 1em">Note that this mode will NOT
work with the UltraVNC DSM plugins because they alter the
RFB protocol in addition to tunnelling with the symmetric
cipher (an unfortunate <br>
choice of implementation...)</p>

<p style="margin-top: 1em">cipher can be one of: arc4,
aesv2, aes-cfb, blowfish, aes256, or 3des. See the OpenSSL
documentation for more info. The keysize is 128 bits (except
for aes256). Here <br>
is one way to make a keyfile with that many bits:</p>

<p style="margin-top: 1em">dd if=/dev/random of=./my.key
bs=16 count=1</p>

<p style="margin-top: 1em">you will need to securely share
this key with the other side of the VNC connection (See
SSVNC for examples).</p>

<p style="margin-top: 1em">Example: -enc blowfish:./my.key
Example: -enc blowfish:pw=swordfish</p>

<p style="margin-top: 1em">By default 16 bytes of random
salt followed by 16 bytes of random initialization vector
are sent at the very beginning of the stream. The other side
must read these and <br>
initialize their cipher with them. These values make the
session key unique (without them the security is minimal).
Similarly, the other side must send us its random <br>
salt and IV with those same lengths.</p>

<p style="margin-top: 1em">The salt and key data are
combined to create a session key using an md5 hash as
described in EVP_BytesToKey(3).</p>

<p style="margin-top: 1em">The exact call is:
EVP_BytesToKey(Cipher, EVP_md5(), salt, keydata, len, 1,
keystr, NULL); where salt is the random data as described
above, and keydata is the shared <br>
secret key data. keystr is the resulting session key. The
cipher is then seeded with keystr and uses the random
initialization vector as its first block.</p>

<p style="margin-top: 1em">To modify the amount of random
salt and initialization vector use cipher@n,m where n is the
salt length and m the initialization vector length. E.g.</p>

<p style="margin-top: 1em">-enc aes-cfb@8,16:./my.key</p>

<p style="margin-top: 1em">It is not a good idea to set
either one to zero, although you may be forced to if the
other side of the tunnel is not under your control.</p>

<p style="margin-top: 1em">To skip the salt and
EVP_BytesToKey MD5 entirely (no hashing is done: the keydata
is directly inserted into the cipher) specify &quot;-1&quot;
for the salt, e.g.</p>

<p style="margin-top: 1em">-enc blowfish@-1,16:./my.key</p>

<p style="margin-top: 1em">The message digest can also be
changed to something besides the default MD5. Use
cipher@md+n,m where &quot;md&quot; can be one of sha, sha1,
md5, or ripe. For example:</p>

<p style="margin-top: 1em">-enc arc4@sha+8,16:./my.key</p>

<p style="margin-top: 1em">The SSVNC vnc viewer project
supplies a symmetric encryption tool named
&quot;ultravnc_dsm_helper&quot; that can be used on the
viewer side. For example:</p>

<p style="margin-top: 1em">ssvncviewer
exec=&rsquo;ultravnc_dsm_helper arc4 my.key 0 h:p&rsquo;</p>

<p style="margin-top: 1em">(or replace
&rsquo;ssvncviewer&rsquo; with &rsquo;ssvnc -viewer&rsquo;)
where h:p is the hostname and port of the x11vnc server.
ultravnc_dsm_helper may also be used standalone to provide a
sym&acirc; <br>
metric encryption tunnel for any viewer or server (VNC or
otherwise.) The cipher (1st arg) is basically the same
syntax as we use above.</p>

<p style="margin-top: 1em">Also see the &rsquo;Non-Ultra
DSM&rsquo; SSVNC option for the &Acirc;&acute;UltraVNC DSM
Encryption Plugin&rsquo; advanced option.</p>

<p style="margin-top: 1em">For both ways of using the
viewer, you can specify the salt,ivec sizes (in GUI or, e.g.
arc4@8,16).</p>

<p style="margin-top: 1em">-https [port]</p>

<p style="margin-top: 1em">Use a special, separate HTTPS
port (-ssl and -stunnel modes only) for HTTPS Java viewer
applet downloading. I.e. not 5900 and not 5800 (the
defaults.)</p>

<p style="margin-top: 1em">BACKGROUND: In -ssl mode, it
turns out you can use the single VNC port (e.g. 5900) for
both VNC and HTTPS connections. (HTTPS is used to retrieve a
SSL-aware VncViewer.jar <br>
applet that is provided with x11vnc). Since both use SSL the
implementation was extended to detect if HTTP traffic (i.e.
GET) is taking place and handle it accordingly. <br>
The URL would be, e.g.:</p>

<p style="margin-top: 1em">https://mymachine.org:5900/</p>

<p style="margin-top: 1em">This is convenient for
firewalls, etc, because only one port needs to be allowed
in. However, this heuristic adds a few seconds delay to each
connection and can be unre&acirc; <br>
liable (especially if the user takes much time to ponder the
Certificate dialogs in his browser, Java VM, or VNC Viewer
applet. That&rsquo;s right 3 separate &quot;Are you sure you
<br>
want to connect?&quot; dialogs!)</p>

<p style="margin-top: 1em">END OF BACKGROUND.</p>

<p style="margin-top: 1em">USAGE: So use the -https option
to provide a separate, more reliable HTTPS port that x11vnc
will listen on. If [port] is not provided (or is 0), one is
autoselected. The <br>
URL to use is printed out at startup.</p>

<p style="margin-top: 1em">The SSL Java applet directory is
specified via the -httpdir option. If not supplied, -https
will try to guess the directory as though the -http option
was supplied.</p>

<p style="margin-top: 1em">-httpsredir [port]</p>

<p style="margin-top: 1em">In -ssl mode with the Java
applet retrieved via HTTPS, when the HTML file containing
applet parameters (&rsquo;index.vnc&rsquo; or
&rsquo;proxy.vnc&rsquo;) is sent do NOT set the applet PORT
<br>
parameter to the actual VNC port but set it to
&quot;port&quot; instead. If &quot;port&quot; is not
supplied, then the port number is guessed from the Host:
HTTP header.</p>

<p style="margin-top: 1em">This is useful when an incoming
TCP connection redirection is performed by a
router/gateway/firewall from one port to an internal machine
where x11vnc is listening on a <br>
different port. The Java applet needs to connect to the
firewall/router port, not the VNC port on the internal
workstation. For example, one could redir from mygate&acirc;
<br>
way.com:443 to workstation:5900.</p>

<p style="margin-top: 1em">This spares the user from having
to type in https://mygateway.com/?PORT=443 into their web
browser. Note that port 443 is the default https port; other
ports must be <br>
explicitly indicated, for example:
https://mygateway.com:8000/?PORT=8000. To avoid having to
include the PORT= in the browser URL, simply supply
&quot;-httpsredir&quot; to x11vnc.</p>

<p style="margin-top: 1em">This option does not work in
-stunnel mode.</p>

<p style="margin-top: 1em">More tricks: set the env var
X11VNC_EXTRA_HTTPS_PARAMS to be extra URL parameters to use.
This way you do not need to specify extra PARAMS in the
index.vnc file. E.g. <br>
x11vnc -env X11VNC_EXTRA_HTTPS_PARAMS=&rsquo;?GET=1&rsquo;
...</p>

<p style="margin-top: 1em">If you do not want to expose the
non-SSL HTTP port to the network (i.e. you just want the
single VNC/HTTPS port, e.g. 5900, open for connections) then
specify the option <br>
-env X11VNC_HTTP_LISTEN_LOCALHOST=1 This way the connection
to the LibVNCServer httpd server will only be available on
localhost (note that in -ssl mode, HTTPS requests <br>
are redirected from SSL to the non-SSL LibVNCServer HTTP
server.)</p>

<p style="margin-top: 1em">-http_oneport</p>

<p style="margin-top: 1em">For UN-encrypted connections
mode (i.e. no -ssl, -stunnel, or -enc options), allow the
Java VNC Viewer applet to be downloaded thru the VNC port
via HTTP.</p>

<p style="margin-top: 1em">That is to say, you can use a
single port for Java applet viewer connections by using a
URL in your web browser like this, for example:</p>

<p style="margin-top: 1em">http://hostname:5900</p>

<p style="margin-top: 1em">The regular, two-port mode, URL
http://hostname:5800 will continue to work as well.</p>

<p style="margin-top: 1em">As mentioned above, this mode
will NOT work with the -ssl, -stunnel, or -enc encryption
options. Note that is it equivalent to &rsquo;-enc
none&rsquo; (i.e. it uses the same detec&acirc; <br>
tion mechanism as for HTTPS, but with no encryption.)</p>

<p style="margin-top: 1em">HTTPS single-port is on by
default in -ssl encrypted mode (and -enc too), so you only
need -http_oneport when doing non-SSL encrypted
connections.</p>

<p style="margin-top: 1em">This mode could also be useful
for SSH tunnels since it means only one port needs to be
redirected.</p>

<p style="margin-top: 1em">The -httpsredir option may also
be useful for this mode when using an SSH tunnel as well as
for router port redirections.</p>

<p style="margin-top: 1em">Note that the -env
X11VNC_HTTP_LISTEN_LOCALHOST=1 option described above under
-httpsredir applies for the LibVNCServer httpd server in all
cases (ssl or not.)</p>

<p style="margin-top: 1em">-ssh user@host:disp</p>

<p style="margin-top: 1em">Create a remote listening port
on machine &quot;host&quot; via a SSH tunnel using the -R
rport:localhost:lport method. lport will be the local x11vnc
listening port, so a connection <br>
to rport (5900+disp) on &quot;host&quot; will reach x11vnc.
E.g. fred@snoopy.com:0</p>

<p style="margin-top: 1em">This could be useful if a
firewall/router prevents incoming connections to the x11vnc
machine, but the ssh machine &quot;host&quot; can be reached
by the VNC viewer. &quot;user@&quot; is not <br>
needed unless the remote unix username differs from the
current one.</p>

<p style="margin-top: 1em">By default the remote sshd is
usually configured to listen only on localhost for rport, so
the viewer may need to ssh -L redir to &quot;host&quot; as
well (See SSVNC to automate <br>
this). The sshd setting GatewayPorts enables listening on
all interfaces for rport; viewers can reach it more
easily.</p>

<p style="margin-top: 1em">&quot;disp&quot; is the VNC
display for the remote SSH side, e.g. 0 corresponds to port
5900, etc. If disp is greater than 200 the value is used as
the port. Use a negative value <br>
to force a low port, e.g. host:-80 will use port 80.</p>

<p style="margin-top: 1em">If ssh-agent is not active, then
the ssh password needs to be entered in the terminal where
x11vnc is running.</p>

<p style="margin-top: 1em">By default the remote ssh will
issue a &rsquo;sleep 300&rsquo; to wait for the incoming
connection for 5 mins. To modify this use
user@host:disp+secs.</p>

<p style="margin-top: 1em">If the remote SSH server is on a
non-standard port (i.e. not 22) use
user@host:port:disp+secs.</p>

<p style="margin-top: 1em">Note that the ssh process MAY
NOT be killed when x11vnc exits. It tries by looking at
ps(1) output.</p>

<p style="margin-top: 1em">-users list</p>

<p style="margin-top: 1em">If x11vnc is started as root
(say from inetd(8) or from display managers xdm(1) , gdm(1)
, etc), then as soon as possible after connections to the X
display are estab&acirc; <br>
lished try to switch to one of the users in the comma
separated list. If x11vnc is not running as root this option
is ignored.</p>

<p style="margin-top: 1em">Why use this option? In general
it is not needed since x11vnc is already connected to the X
display and can perform its primary functions. The option
was added to make <br>
some of the *external* utility commands x11vnc occasionally
runs work properly. In particular under GNOME and KDE to
implement the &quot;-solid color&quot; feature external
com&acirc; <br>
mands (gconftool-2 and dcop) unfortunately must be run as
the user owning the desktop session. Since this option
switches userid it also affects the userid used to run <br>
the processes for the -accept and -gone options. It also
affects the ability to read files for options such as
-connect, -allow, and -remap and also the ultra and tight
<br>
filetransfer feature if enabled. Note that the -connect file
is also sometimes written to.</p>

<p style="margin-top: 1em">So be careful with this option
since in some situations its use can decrease security.</p>

<p style="margin-top: 1em">In general the switch to a user
will only take place if the display can still be
successfully opened as that user (this is primarily to try
to guess the actual owner of <br>
the session). Example: &quot;-users fred,wilma,betty&quot;.
Note that a malicious local user &quot;barney&quot; by
quickly using &quot;xhost +&quot; when logging in may
possibly get the x11vnc process <br>
to switch to user &quot;fred&quot;. What happens next?</p>

<p style="margin-top: 1em">Under display managers it may be
a long time before the switch succeeds (i.e. a user logs
in). To instead make it switch immediately regardless if the
display can be <br>
reopened prefix the username with the &quot;+&quot;
character. E.g. &quot;-users +bob&quot; or &quot;-users
+nobody&quot;.</p>

<p style="margin-top: 1em">The latter (i.e. switching
immediately to user &quot;nobody&quot;) is the only obvious
use of the -users option that increases security.</p>

<p style="margin-top: 1em">Use the following notation to
associate a group with a user: user1.group1,user2.group2,...
Note that initgroups(2) will still be called first to try to
switch to ALL of a <br>
user&rsquo;s groups (primary and additional groups). Only if
that fails or it is not available then the single group
specified as above (or the user&rsquo;s primary group if not
<br>
specified) is switched to with setgid(2). Use -env
X11VNC_SINGLE_GROUP=1 to prevent trying initgroups(2) and
only switch to the single group. This sort of setting is
<br>
only really needed to make the ultra or tight filetransfer
permissions work properly. This format applies to any comma
separated list of users, even the special &quot;=&quot;
modes <br>
described below.</p>

<p style="margin-top: 1em">In -unixpw mode, if &quot;-users
unixpw=&quot; is supplied then after a user authenticates
himself via the -unixpw mechanism, x11vnc will try to switch
to that user as though <br>
&quot;-users +username&quot; had been supplied. If you want
to limit which users this will be done for, provide them as
a comma separated list after &quot;unixpw=&quot; Groups can
also be <br>
specified as described above.</p>

<p style="margin-top: 1em">Similarly, in -ssl mode, if
&quot;-users sslpeer=&quot; is supplied then after an SSL
client authenticates with his cert (the -sslverify option is
required for this) x11vnc will <br>
extract a UNIX username from the &quot;emailAddress&quot;
field (username@hostname.com) of the &quot;Subject&quot; of
the x509 SSL cert and then try to switch to that user as
though &quot;-users <br>
+username&quot; had been supplied. If you want to limit
which users this will be done for, provide them as a comma
separated list after &quot;sslpeer=&quot;. Set the env. var
<br>
X11VNC_SSLPEER_CN to use the Common Name (normally a
hostname) instead of the Email field.</p>

<p style="margin-top: 1em">NOTE: for sslpeer= mode the
x11vnc administrator must take care that any client certs he
adds to -sslverify have the intended UNIX username in the
&quot;emailAddress&quot; field of <br>
the cert. Otherwise a user may be able to log in as another.
This command can be of use in checking: &quot;openssl x509
-text -in file.crt&quot;, see the &quot;Subject:&quot; line.
Also, <br>
along with the normal RFB_* env. vars. (see -accept) passed
to external cmd= commands, RFB_SSL_CLIENT_CERT will be set
to the client&rsquo;s x509 certificate string.</p>

<p style="margin-top: 1em">The sslpeer= mode can aid
finding X sessions via the FINDDISPLAY and FINDCREATEDISPLAY
mechanisms.</p>

<p style="margin-top: 1em">To immediately switch to a user
*before* connections to the X display are made or any files
opened use the &quot;=&quot; character: &quot;-users
=bob&quot;. That user needs to be able to <br>
open the X display and any files of course.</p>

<p style="margin-top: 1em">The special user
&quot;guess=&quot; means to examine the utmpx database (see
who(1) ) looking for a user attached to the display number
(from DISPLAY or -display option) and try <br>
him/her. To limit the list of guesses, use: &quot;-users
guess=bob,betty&quot;.</p>

<p style="margin-top: 1em">Even more sinister is the
special user &quot;lurk=&quot; that means to try to guess
the DISPLAY from the utmpx login database as well. So it
&quot;lurks&quot; waiting for anyone to log into <br>
an X session and then connects to it. Specify a list of
users after the = to limit which users will be tried. To
enable a different searching mode, if the first user in <br>
the list is something like &quot;:0&quot; or
&quot;:0-2&quot; that indicates a range of DISPLAY numbers
that will be tried (regardless of whether they are in the
utmpx database) for all users <br>
that are logged in. Also see the &quot;-display
WAIT:...&quot; functionality. Examples: &quot;-users
lurk=&quot; and also &quot;-users
lurk=:0-1,bob,mary&quot;</p>

<p style="margin-top: 1em">Be especially careful using the
&quot;guess=&quot; and &quot;lurk=&quot; modes. They are not
recommended for use on machines with untrustworthy local
users.</p>

<p style="margin-top: 1em">-noshm</p>

<p style="margin-top: 1em">Do not use the MIT-SHM extension
for the polling. Remote displays can be polled this way: be
careful this can use large amounts of network bandwidth.
This is also of use <br>
if the local machine has a limited number of shm segments
and -onetile is not sufficient.</p>

<p style="margin-top: 1em">-flipbyteorder</p>

<p style="margin-top: 1em">Sometimes needed if remotely
polled host has different endianness. Ignored unless -noshm
is set.</p>

<p style="margin-top: 1em">-onetile</p>

<p style="margin-top: 1em">Do not use the new copy_tiles()
framebuffer mechanism, just use 1 shm tile for polling.
Limits shm segments used to 3.</p>

<p style="margin-top: 1em">To disable any automatic shm
reduction set the env. var. X11VNC_NO_LIMIT_SHM.</p>

<p style="margin-top: 1em">-solid [color]</p>

<p style="margin-top: 1em">To improve performance, when VNC
clients are connected try to change the desktop background
to a solid color. The [color] is optional: the default color
is &quot;cyan4&quot;. For <br>
a different one specify the X color (rgb.txt name, e.g.
&quot;darkblue&quot; or numerical &quot;#RRGGBB&quot;).</p>

<p style="margin-top: 1em">Currently this option only works
on GNOME, KDE, CDE, XFCE, and classic X (i.e. with the
background image on the root window). The
&quot;gconftool-2&quot;, &quot;dcop&quot; and
&quot;xfconf-query&quot; <br>
external commands are run for GNOME, KDE, and XFCE
respectively. This also works on native MacOSX. (There is no
color selection for MacOSX or XFCE.) Other desktops <br>
won&rsquo;t work, (send us the corresponding commands if you
find them). If x11vnc is running as root ( inetd(8) or
gdm(1) ), the -users option may be needed for GNOME, KDE,
<br>
XFCE. If x11vnc guesses your desktop incorrectly, you can
force it by prefixing color with &quot;gnome:&quot;,
&quot;kde:&quot;, &quot;cde:&quot;, &quot;xfce:&quot;, or
&quot;root:&quot;.</p>

<p style="margin-top: 1em">Update: -solid no longer works
on KDE4.</p>

<p style="margin-top: 1em">This mode works in a limited way
on the Mac OS X Console with one color (&rsquo;kelp&rsquo;)
using the screensaver writing to the background. Look in
&quot;~/Library/Screen Savers&quot; for <br>
VncSolidColor.png to change the color.</p>

<p style="margin-top: 1em">-blackout string</p>

<p style="margin-top: 1em">Black out rectangles on the
screen. string is a comma separated list of WxH+X+Y type
geometries for each rectangle. If one of the items on the
list is the string &quot;noptr&quot; <br>
the mouse pointer will not be allowed to go into a blacked
out region.</p>

<p style="margin-top: 1em">-xinerama, -noxinerama</p>

<p style="margin-top: 1em">If your screen is composed of
multiple monitors glued together via XINERAMA, and that
screen is not a rectangle this option will try to guess the
areas to black out (if <br>
your system has libXinerama). default: -xinerama</p>

<p style="margin-top: 1em">In general, we have noticed on
XINERAMA displays you may need to use the
&quot;-xwarppointer&quot; option if the mouse pointer
misbehaves and it is enabled by default. Use <br>
&quot;-noxwarppointer&quot; if you do not want this.</p>

<p style="margin-top: 1em">-xtrap</p>

<p style="margin-top: 1em">Use the DEC-XTRAP extension for
keystroke and mouse input insertion. For use on legacy
systems, e.g. X11R5, running an incomplete or missing XTEST
extension. By default <br>
DEC-XTRAP will be used if XTEST server grab control is
missing, use -xtrap to do the keystroke and mouse insertion
via DEC-XTRAP as well.</p>

<p style="margin-top: 1em">-xrandr [mode]</p>

<p style="margin-top: 1em">If the display supports the
XRANDR (X Resize, Rotate and Reflection) extension, and you
expect XRANDR events to occur to the display while x11vnc is
running, this options <br>
indicates x11vnc should try to respond to them (as opposed
to simply crashing by assuming the old screen size). See the
xrandr(1) manpage and run &Acirc;&acute;xrandr -q&rsquo; for
more <br>
info. [mode] is optional and described below.</p>

<p style="margin-top: 1em">Since watching for XRANDR events
and trapping errors increases polling overhead, only use
this option if XRANDR changes are expected. For example on a
rotatable screen <br>
PDA or laptop, or using a XRANDR-aware Desktop where you
resize often. It is best to be viewing with a vncviewer that
supports the NewFBSize encoding, since it knows how <br>
to react to screen size changes. Otherwise, LibVNCServer
tries to do so something reasonable for viewers that cannot
do this (portions of the screen may be clipped, <br>
unused, etc).</p>

<p style="margin-top: 1em">Note: the default now is to
check for XRANDR events, but do not trap every X call that
may fail due to resize. If a resize event is received, the
full -xrandr mode is <br>
enabled. To disable even checking for events supply:
-noxrandr.</p>

<p style="margin-top: 1em">&quot;mode&quot; defaults to
&quot;resize&quot;, which means create a new, resized,
framebuffer and hope all viewers can cope with the change.
&quot;newfbsize&quot; means first disconnect all viewers
<br>
that do not support the NewFBSize VNC encoding, and then
resize the framebuffer. &quot;exit&quot; means disconnect
all viewer clients, and then terminate x11vnc.</p>

<p style="margin-top: 1em">-rotate string</p>

<p style="margin-top: 1em">Rotate and/or flip the
framebuffer view exported by VNC. This transformation is
independent of XRANDR and is done in software in main memory
and so may be slower. This <br>
mode could be useful on a handheld with portrait or
landscape modes that do not correspond to the scanline order
of the actual framebuffer. string can be:</p>

<p style="margin-top: 1em">x flip along x-axis y flip along
y-axis xy flip along x- and y-axes +90 rotate 90 degrees
clockwise -90 rotate 90 degrees counter-clockwise +90x <br>
rotate 90 degrees CW, then flip along x +90y rotate 90
degrees CW, then flip along y</p>

<p style="margin-top: 1em">these give all possible
rotations and reflections.</p>

<p style="margin-top: 1em">Aliases: same as xy: yx, +180,
-180, 180 same as -90: +270, 270 same as +90: 90, (ditto for
90x, 90y)</p>

<p style="margin-top: 1em">Like -scale, this transformation
is applied at the very end of any chain of framebuffer
transformations and so any options with geometries, e.g.
-blackout, -clip, etc. <br>
are relative to the original X (or -rawfb) framebuffer, not
the final one sent to VNC viewers.</p>

<p style="margin-top: 1em">If you do not want the cursor
shape to be rotated prefix string with &quot;nc:&quot;, e.g.
&quot;nc:+90&quot;, &quot;nc:xy&quot;, etc.</p>

<p style="margin-top: 1em">-padgeom WxH</p>

<p style="margin-top: 1em">Whenever a new vncviewer
connects, the framebuffer is replaced with a fake, solid
black one of geometry WxH. Shortly afterwards the
framebuffer is replaced with the real <br>
one. This is intended for use with vncviewers that do not
support NewFBSize and one wants to make sure the initial
viewer geometry will be big enough to handle all
subse&acirc; <br>
quent resizes (e.g. under -xrandr, -remote id:windowid,
rescaling, etc.)</p>

<p style="margin-top: 1em">In -unixpw mode this sets the
size of the login screen. Use &quot;once:WxH&quot; it ignore
padgeom after the login screen is set up.</p>

<p style="margin-top: 1em">-o logfile</p>

<p style="margin-top: 1em">Write stderr messages to file
logfile instead of to the terminal. Same as &quot;-logfile
file&quot;. To append to the file use &quot;-oa file&quot;
or &quot;-logappend file&quot;. If logfile con&acirc; <br>
tains the string &quot;%VNCDISPLAY&quot; it is expanded to
the vnc display (the name may need to be guessed at.)
&quot;%HOME&quot; works too.</p>

<p style="margin-top: 1em">-flag file</p>

<p style="margin-top: 1em">Write the &quot;PORT=NNNN&quot;
(e.g. PORT=5900) string to file in addition to stdout. This
option could be useful by wrapper script to detect when
x11vnc is ready.</p>

<p style="margin-top: 1em">-rmflag file</p>

<p style="margin-top: 1em">Remove file at exit to signal
when x11vnc is done. The file is created at startup if it
does not already exist or if file is prefixed with
&quot;create:&quot;. If the file is cre&acirc; <br>
ated, the x11vnc PID is placed in the file. Otherwise the
files contents is not changed. Use prefix
&quot;nocreate:&quot; to prevent creation.</p>

<p style="margin-top: 1em">-rc filename</p>

<p style="margin-top: 1em">Use filename instead of
$HOME/.x11vncrc for rc file.</p>

<p style="margin-top: 1em">-norc</p>

<p style="margin-top: 1em">Do not process any .x11vncrc
file for options.</p>

<p style="margin-top: 1em">-env VAR=VALUE</p>

<p style="margin-top: 1em">Set the environment variable
&rsquo;VAR&rsquo; to value &rsquo;VALUE&rsquo; at x11vnc
startup. This is a convenience utility to avoid shell script
wrappers, etc. to set the env. var. You may <br>
specify as many of these as needed on the command line.</p>

<p style="margin-top: 1em">-prog /path/to/x11vnc</p>

<p style="margin-top: 1em">Set the full path to the x11vnc
program for cases when it cannot be determined from argv[0]
(e.g. tcpd/inetd)</p>

<p style="margin-top: 1em">-h, -help</p>

<p style="margin-top: 1em">Print this help text. -?, -opts
Only list the x11vnc options.</p>

<p style="margin-top: 1em">-V, -version</p>

<p style="margin-top: 1em">Print program version and last
modification date.</p>

<p style="margin-top: 1em">-license</p>

<p style="margin-top: 1em">Print out license information.
Same as -copying and -warranty.</p>

<p style="margin-top: 1em">-dbg</p>

<p style="margin-top: 1em">Instead of exiting after
cleaning up, run a simple &quot;debug crash shell&quot; when
fatal errors are trapped.</p>

<p style="margin-top: 1em">-q, -quiet</p>

<p style="margin-top: 1em">Be quiet by printing less
informational output to stderr. (use -noquiet to undo an
earlier -quiet.)</p>

<p style="margin-top: 1em">The -quiet option does not
eliminate all informational output, it only reduces it. It
is ignored in most auxiliary usage modes, e.g. -storepasswd.
To eliminate all out&acirc; <br>
put use: 2&gt;/dev/null 1&gt;&amp;2, etc.</p>

<p style="margin-top: 1em">-v, -verbose</p>

<p style="margin-top: 1em">Print out more information to
stderr.</p>

<p style="margin-top: 1em">-bg</p>

<p style="margin-top: 1em">Go into the background after
screen setup. Messages to stderr are lost unless -o logfile
is used. Something like this could be useful in a
script:</p>

<p style="margin-top: 1em">port=&lsquo;ssh -t $host
&quot;x11vnc -display :0 -bg&quot; | grep PORT&lsquo;</p>

<p style="margin-top: 1em">port=&lsquo;echo
&quot;$port&quot; | sed -e
&rsquo;s/PORT=//&rsquo;&lsquo;</p>

<p style="margin-top: 1em">port=&lsquo;expr $port -
5900&lsquo;</p>

<p style="margin-top: 1em">vncviewer $host:$port</p>

<p style="margin-top: 1em">-modtweak, -nomodtweak</p>

<p style="margin-top: 1em">Option -modtweak automatically
tries to adjust the AltGr and Shift modifiers for differing
language keyboards between client and host. Otherwise, only
a single key <br>
press/release of a Keycode is simulated (i.e. ignoring the
state of the modifiers: this usually works for identical
keyboards). Also useful in resolving cases where a <br>
Keysym is bound to multiple keys (e.g. &quot;&lt;&quot; +
&quot;&gt;&quot; and &quot;,&quot; + &quot;&lt;&quot; keys).
Default: -modtweak</p>

<p style="margin-top: 1em">If you are having trouble with
with keys and -xkb or -noxkb, and similar things don&rsquo;t
help, try -nomodtweak.</p>

<p style="margin-top: 1em">On some HP-UX systems it is been
noted that they have an odd keymapping where a single
keycode will have a keysym, e.g. &quot;#&quot;, up to three
times. You can check via &quot;xmodmap <br>
-pk&quot; or the -dk option. The failure is when you try to
type &quot;#&quot; it yields &quot;3&quot;. If you see this
problem try setting the environment variable
MODTWEAK_LOWEST=1 to see if <br>
it helps.</p>

<p style="margin-top: 1em">-xkb, -noxkb</p>

<p style="margin-top: 1em">When in modtweak mode, use the
XKEYBOARD extension (if the X display supports it) to do the
modifier tweaking. This is powerful and should be tried if
there are still <br>
keymapping problems when using -modtweak by itself. The
default is to check whether some common keysyms, e.g. !, @,
[, are only accessible via -xkb mode and if so then <br>
automatically enable the mode. To disable this automatic
detection use -noxkb.</p>

<p style="margin-top: 1em">When -xkb mode is active you can
set these env. vars. They apply only when there is ambiguity
as to which key to choose (i.e the mapping is not
one-to-one). NOKEY&acirc; <br>
HINTS=1: for up ascii keystrokes do not use score hints
saved when the key was pressed down. NOANYDOWN=1: for up
keystrokes do not resort to searching through keys that <br>
are currently pressed down. KEYSDOWN=N: remember the last N
keys press down for tie-breaking when an up keystroke comes
in.</p>

<p style="margin-top: 1em">-capslock</p>

<p style="margin-top: 1em">When in -modtweak (the default)
or -xkb mode, if a keysym in the range A-Z comes in check
the X server to see if the Caps_Lock is set. If it is do not
artificially press <br>
Shift to generate the keysym. This will enable the CapsLock
key to behave correctly in some circumstances: namely *both*
the VNC viewer machine and the x11vnc X server <br>
are in the CapsLock on state. If one side has CapsLock on
and the other off and the keyboard is not behaving as you
think it should you should correct the CapsLock states <br>
(hint: pressing CapsLock inside and outside of the viewer
can help toggle them both to the correct state). However,
for best results do not use this option, but rather <br>
*only* enable CapsLock on the VNC viewer side (i.e. by
pressing CapsLock outside of the viewer window, also
-skip_lockkeys below). Also try -nomodtweak for a possible
<br>
workaround.</p>

<p style="margin-top: 1em">-skip_lockkeys,
-noskip_lockkeys</p>

<p style="margin-top: 1em">Have x11vnc ignore all
Caps_Lock, Shift_Lock, Num_Lock, Scroll_Lock keysyms
received from viewers. The idea is you press Caps_Lock on
the VNC Viewer side but that does <br>
not change the lock state in the x11vnc-side X server.
Nevertheless your capitalized letters come in over the wire
and are applied correctly to the x11vnc-side X server. <br>
Note this mode probably won&rsquo;t do what you want in
-nomodtweak mode. Also, a kludge for KP_n digits is always
done in this mode: they are mapped to regular digit keysyms.
<br>
See also -capslock above. The default is
-noskip_lockkeys.</p>

<p style="margin-top: 1em">-skip_keycodes string</p>

<p style="margin-top: 1em">Ignore the comma separated list
of decimal keycodes. Perhaps these are keycodes not on your
keyboard but your X server thinks exist. Currently only
applies to -xkb mode. <br>
Use this option to help x11vnc in the reverse problem it
tries to solve: Keysym -&gt; Keycode(s) when ambiguities
exist (more than one Keycode per Keysym). Run &rsquo;xmodmap
-pk&rsquo; <br>
to see your keymapping. Example: &quot;-skip_keycodes
94,114&quot;</p>

<p style="margin-top: 1em">-sloppy_keys</p>

<p style="margin-top: 1em">Experimental option that tries
to correct some &quot;sloppy&quot; key behavior. E.g. if at
the viewer you press Shift+Key but then release the Shift
before Key that could give rise <br>
to extra unwanted characters (usually only between keyboards
of different languages). Only use this option if you observe
problems with some keystrokes.</p>

<p style="margin-top: 1em">-skip_dups, -noskip_dups</p>

<p style="margin-top: 1em">Some VNC viewers send impossible
repeated key events, e.g. key-down, key-down, key-up, key-up
all for the same key, or 20 downs in a row for the same
modifier key! Set&acirc; <br>
ting -skip_dups means to skip these duplicates and just
process the first event. Note: some VNC viewers assume they
can send down&rsquo;s without the corresponding up&rsquo;s
and so <br>
you should not set this option for these viewers (symptom:
some keys do not autorepeat) Default: -noskip_dups</p>

<p style="margin-top: 1em">-add_keysyms, -noadd_keysyms</p>

<p style="margin-top: 1em">If a Keysym is received from a
VNC viewer and that Keysym does not exist in the X server,
then add the Keysym to the X server&rsquo;s keyboard mapping
on an unused key. Added <br>
Keysyms will be removed periodically and also when x11vnc
exits. Default: -add_keysyms</p>

<p style="margin-top: 1em">-clear_mods</p>

<p style="margin-top: 1em">At startup and exit clear the
modifier keys by sending KeyRelease for each one. The Lock
modifiers are skipped. Used to clear the state if the
display was accidentally <br>
left with any pressed down.</p>

<p style="margin-top: 1em">-clear_keys</p>

<p style="margin-top: 1em">As -clear_mods, except try to
release ANY pressed key. Note that this option and
-clear_mods can interfere with a person typing at the
physical keyboard.</p>

<p style="margin-top: 1em">-clear_all</p>

<p style="margin-top: 1em">As -clear_keys, except try to
release any CapsLock, NumLock, etc. locks as well.</p>

<p style="margin-top: 1em">-remap string</p>

<p style="margin-top: 1em">Read Keysym remappings from file
named string. Format is one pair of Keysyms per line (can be
name or hex value) separated by a space. If no file named
string exists, it <br>
is instead interpreted as this form: key1-key2,key3-key4,...
See &lt;X11/keysymdef.h&gt; header file for a list of Keysym
names, or use xev(1).</p>

<p style="margin-top: 1em">To map a key to a button click,
use the fake Keysyms &quot;Button1&quot;, ..., etc. E.g:
&quot;-remap Super_R-Button2&quot; (useful for pasting on a
laptop)</p>

<p style="margin-top: 1em">I use these if the machine I am
viewing from does not have a scrollwheel or I don&rsquo;t
like using the one it has:</p>

<p style="margin-top: 1em">-remap
Super_R-Button4,Menu-Button5 -remap
KP_Add-Button4,KP_Enter-Button5</p>

<p style="margin-top: 1em">the former would be used on a
PC, the latter on a MacBook. This way those little used keys
can be used to generate bigger hops than the Up and Down
arrows provide. One <br>
can scroll through text or web pages more quickly this way
(especially if x11vnc scroll detection is active.)</p>

<p style="margin-top: 1em">Use Button44, Button12, etc. for
multiple clicks.</p>

<p style="margin-top: 1em">To disable a keysym (i.e. make
it so it will not be injected), remap it to
&quot;NoSymbol&quot; or &quot;None&quot;.</p>

<p style="margin-top: 1em">Dead keys: &quot;dead&quot; (or
silent, mute) keys are keys that do not produce a character
but must be followed by a 2nd keystroke. This is often used
for accenting characters, <br>
e.g. to put &quot;&lsquo;&quot; on top of &quot;a&quot; by
pressing the dead key and then &quot;a&quot;. Note that this
interpretation is not part of core X11, it is up to the
toolkit or application to <br>
decide how to react to the sequence. The X11 names for these
keysyms are &quot;dead_grave&quot;, &quot;dead_acute&quot;,
etc. However some VNC viewers send the keysyms
&quot;grave&quot;, &quot;acute&quot; <br>
instead thereby disabling the accenting. To work around this
-remap can be used. For example &quot;-remap
grave-dead_grave,acute-dead_acute&quot;</p>

<p style="margin-top: 1em">As a convenience, &quot;-remap
DEAD&quot; applies these remaps:</p>

<p style="margin-top: 1em">g grave-dead_grave <br>
a acute-dead_acute <br>
c asciicircum-dead_circumflex <br>
t asciitilde-dead_tilde <br>
m macron-dead_macron <br>
b breve-dead_breve <br>
D abovedot-dead_abovedot <br>
d diaeresis-dead_diaeresis <br>
o degree-dead_abovering <br>
A doubleacute-dead_doubleacute <br>
r caron-dead_caron <br>
e cedilla-dead_cedilla</p>

<p style="margin-top: 1em">If you just want a subset use
the first letter label, e.g. &quot;-remap DEAD=ga&quot; to
get the first two. Additional remaps may also be supplied
via commas, e.g. &quot;-remap <br>
DEAD=ga,Super_R-Button2&quot;. Finally,
&quot;DEAD=missing&quot; means to apply all of the above as
long as the left hand member is not already in the X11
keymap.</p>

<p style="margin-top: 1em">-norepeat, -repeat</p>

<p style="margin-top: 1em">Option -norepeat disables X
server key auto repeat when VNC clients are connected and
VNC keyboard input is not idle for more than 5 minutes. This
works around a repeat&acirc; <br>
ing keystrokes bug (triggered by long processing delays
between key down and key up client events: either from large
screen changes or high latency). Default: -norepeat</p>

<p style="margin-top: 1em">You can set the env. var.
X11VNC_IDLE_TIMEOUT to the number of idle seconds you want
(5min = 300secs).</p>

<p style="margin-top: 1em">Note: your VNC viewer side will
likely do autorepeating, so this is no loss unless someone
is simultaneously at the real X display.</p>

<p style="margin-top: 1em">Use &quot;-norepeat N&quot; to
set how many times norepeat will be reset if something else
(e.g. X session manager) undoes it. The default is 2. Use a
negative value for unlimited <br>
resets.</p>

<p style="margin-top: 1em">-nofb</p>

<p style="margin-top: 1em">Ignore video framebuffer: only
process keyboard and pointer. Intended for use with Win2VNC
and x2vnc dual-monitor setups.</p>

<p style="margin-top: 1em">-nobell</p>

<p style="margin-top: 1em">Do not watch for XBell events.
(no beeps will be heard) Note: XBell monitoring requires the
XKEYBOARD extension.</p>

<p style="margin-top: 1em">-nosel</p>

<p style="margin-top: 1em">Do not manage exchange of X
selection/cutbuffer between VNC viewers and the X server at
all.</p>

<p style="margin-top: 1em">-noprimary</p>

<p style="margin-top: 1em">Do not poll the PRIMARY
selection for changes to send back to clients. (PRIMARY is
still set on received changes, however).</p>

<p style="margin-top: 1em">-nosetprimary</p>

<p style="margin-top: 1em">Do not set the PRIMARY selection
for changes received from VNC clients.</p>

<p style="margin-top: 1em">-noclipboard</p>

<p style="margin-top: 1em">Do not poll the CLIPBOARD
selection for changes to send back to clients. (CLIPBOARD is
still set on received changes, however).</p>

<p style="margin-top: 1em">-nosetclipboard</p>

<p style="margin-top: 1em">Do not set the CLIPBOARD
selection for changes received from VNC clients.</p>

<p style="margin-top: 1em">-seldir string</p>

<p style="margin-top: 1em">If direction string is
&quot;send&quot;, only send the selection to viewers, and if
it is &quot;recv&quot; only receive it from viewers. To work
around apps setting the selection too fre&acirc; <br>
quently and messing up the other end. You can actually
supply a comma separated list of directions, including
&quot;debug&quot; to turn on debugging output.</p>

<p style="margin-top: 1em">-cursor [mode], -nocursor</p>

<p style="margin-top: 1em">Sets how the pointer cursor
shape (little icon at the mouse pointer) should be handled.
The &quot;mode&quot; string is optional and is described
below. The default is to show some <br>
sort of cursor shape(s). How this is done depends on the VNC
viewer and the X server. Use -nocursor to disable cursor
shapes completely.</p>

<p style="margin-top: 1em">Some VNC viewers support the
TightVNC CursorPosUpdates and CursorShapeUpdates extensions
(cuts down on network traffic by not having to send the
cursor image every time <br>
the pointer is moved), in which case these extensions are
used (see -nocursorshape and -nocursorpos below to disable).
For other viewers the cursor shape is written <br>
directly to the framebuffer every time the pointer is moved
or changed and gets sent along with the other framebuffer
updates. In this case, there will be some lag <br>
between the vnc viewer pointer and the remote cursor
position.</p>

<p style="margin-top: 1em">If the X display supports
retrieving the cursor shape information from the X server,
then the default is to use that mode. On Solaris this can be
done with the SUN_OVL <br>
extension using -overlay (see also the -overlay_nocursor
option). A similar overlay scheme is used on IRIX. Xorg
(e.g. Linux) and recent Solaris Xsun servers support the
<br>
XFIXES extension to retrieve the exact cursor shape from the
X server. If XFIXES is present it is preferred over Overlay
and is used by default (see -noxfixes below). <br>
This can be disabled with -nocursor, and also some values of
the &quot;mode&quot; option below.</p>

<p style="margin-top: 1em">Note that under XFIXES cursors
with transparency (alpha channel) will usually not be
exactly represented and one may find Overlay preferable. See
also the -alphacut and <br>
-alphafrac options below as fudge factors to try to improve
the situation for cursors with transparency for a given
theme.</p>

<p style="margin-top: 1em">The &quot;mode&quot; string can
be used to fine-tune the displaying of cursor shapes. It can
be used the following ways:</p>

<p style="margin-top: 1em">&quot;-cursor arrow&quot; - just
show the standard arrow nothing more or nothing less.</p>

<p style="margin-top: 1em">&quot;-cursor none&quot; - same
as &quot;-nocursor&quot;</p>

<p style="margin-top: 1em">&quot;-cursor X&quot; - when the
cursor appears to be on the root window, draw the familiar X
shape. Some desktops such as GNOME cover up the root window
completely, and so this <br>
will not work, try &quot;X1&quot;, etc, to try to shift the
tree depth. On high latency links or slow machines there
will be a time lag between expected and the actual cursor
<br>
shape.</p>

<p style="margin-top: 1em">&quot;-cursor some&quot; - like
&quot;X&quot; but use additional heuristics to try to guess
if the window should have a windowmanager-like resizer
cursor or a text input I-beam cursor. This <br>
is a complete hack, but may be useful in some situations
because it provides a little more feedback about the cursor
shape.</p>

<p style="margin-top: 1em">&quot;-cursor most&quot; - try
to show as many cursors as possible. Often this will only be
the same as &quot;some&quot; unless the display has overlay
visuals or XFIXES extensions avail&acirc; <br>
able. On Solaris and IRIX if XFIXES is not available,
-overlay mode will be attempted.</p>

<p style="margin-top: 1em">-cursor_drag</p>

<p style="margin-top: 1em">Show cursor shape changes even
when the mouse is being dragged with a mouse button down.
This is useful if you want to be able to see Drag-and-Drop
cursor icons, etc.</p>

<p style="margin-top: 1em">-arrow n</p>

<p style="margin-top: 1em">Choose an alternate
&quot;arrow&quot; cursor from a set of some common ones. n
can be 1 to 6. Default is: 1 Ignored when in XFIXES
cursor-grabbing mode.</p>

<p style="margin-top: 1em">-noxfixes</p>

<p style="margin-top: 1em">Do not use the XFIXES extension
to draw the exact cursor shape even if it is available.</p>

<p style="margin-top: 1em">Note: To work around a crash in
Xorg 1.5 and later some people needed to use -noxfixes. The
Xorg crash occurred right after a Display Manager (e.g. GDM)
login. Starting <br>
with x11vnc 0.9.9 it tries to automatically avoid using
XFIXES until it is sure a window manager is running. See the
-reopen option for more info and how to use <br>
X11VNC_AVOID_WINDOWS=never to disable it.</p>

<p style="margin-top: 1em">-alphacut n</p>

<p style="margin-top: 1em">When using the XFIXES extension
for the cursor shape, cursors with transparency will not
usually be displayed exactly (but opaque ones will). This
option sets n as a cut&acirc; <br>
off for cursors that have transparency (&quot;alpha
channel&quot; with values ranging from 0 to 255) Any cursor
pixel with alpha value less than n becomes completely
transparent. <br>
Otherwise the pixel is completely opaque. Default 240</p>

<p style="margin-top: 1em">-alphafrac fraction</p>

<p style="margin-top: 1em">With the threshold in -alphacut
some cursors will become almost completely transparent
because their alpha values are not high enough. For those
cursors adjust the alpha <br>
threshold until fraction of the non-zero alpha channel
pixels become opaque. Default 0.33</p>

<p style="margin-top: 1em">-alpharemove</p>

<p style="margin-top: 1em">By default, XFIXES cursors
pixels with transparency have the alpha factor multiplied
into the RGB color values (i.e. that corresponding to
blending the cursor with a black <br>
background). Specify this option to remove the alpha factor.
(useful for light colored semi-transparent cursors).</p>

<p style="margin-top: 1em">-noalphablend</p>

<p style="margin-top: 1em">In XFIXES mode do not send
cursor alpha channel data to LibVNCServer. The default is to
send it. The alphablend effect will only be visible in
-nocursorshape mode or for <br>
clients with cursorshapeupdates turned off. (However there
is a hack for 32bpp with depth 24, it uses the extra 8 bits
to store cursor transparency for use with a hacked <br>
vncviewer that applies the transparency locally. See the FAQ
for more info).</p>

<p style="margin-top: 1em">-nocursorshape</p>

<p style="margin-top: 1em">Do not use the TightVNC
CursorShapeUpdates extension even if clients support it. See
-cursor above.</p>

<p style="margin-top: 1em">-cursorpos, -nocursorpos</p>

<p style="margin-top: 1em">Option -cursorpos enables
sending the X cursor position back to all vnc clients that
support the TightVNC CursorPosUpdates extension. Other
clients will be able to see <br>
the pointer motions. Default: -cursorpos</p>

<p style="margin-top: 1em">-xwarppointer,
-noxwarppointer</p>

<p style="margin-top: 1em">Move the pointer with
XWarpPointer(3X) instead of the XTEST extension. Use this as
a workaround if the pointer motion behaves incorrectly, e.g.
on touchscreens or other <br>
non-standard setups.</p>

<p style="margin-top: 1em">It is also sometimes needed on
XINERAMA displays and is enabled by default if XINERAMA is
found to be active. To prevent this, use
-noxwarppointer.</p>

<p style="margin-top: 1em">Also since 2009 there is an Xorg
bug where the pointer cannot be moved properly on
multiscreen displays. If x11vnc detects a multiscreen
display it activates this option. <br>
To prevent this, use -noxwarppointer.</p>

<p style="margin-top: 1em">-always_inject</p>

<p style="margin-top: 1em">Even if there is no displacement
(dx = dy = 0) for a VNC mouse event force the pointer to the
indicated x,y position anyway. Recent (2009) gui toolkits
(gnome) have prob&acirc; <br>
lems with x11vnc&rsquo;s original mouse input injection
method. So x11vnc&rsquo;s mouse input injection method has
been modified. To regain the OLD behavior use this option:
<br>
-always_inject. Then x11vnc will always force positioning
the mouse to the x,y position even if that position has not
changed since the previous VNC input event.</p>

<p style="margin-top: 1em">The first place this problem was
noticed was in gnome terminal: if you pressed and released
mouse button 3, a menu was posted and then its first element
&rsquo;New Terminal Win&acirc; <br>
dow&rsquo; was activated. This was because x11vnc injected
the mouse position twice: once on ButtonPress and again on
ButtonRelease. The toolkit interpreted the 2nd one as <br>
mouse motion even though the mouse hadn&rsquo;t moved. So
now by default x11vnc tries to avoid injecting the 2nd
one.</p>

<p style="margin-top: 1em">Note that with the new default
x11vnc will be oblivious to applications moving the pointer
(warping) or the user at the physical display moving it. So
it might, e.g., <br>
inject ButtonRelease at the wrong position. If this (or
similar scenarios) causes problems in your environment,
specify -always_inject for the old method.</p>

<p style="margin-top: 1em">-buttonmap string</p>

<p style="margin-top: 1em">String to remap mouse buttons.
Format: IJK-LMN, this maps buttons I -&gt; L, etc., e.g.
-buttonmap 13-31</p>

<p style="margin-top: 1em">Button presses can also be
mapped to keystrokes: replace a button digit on the right of
the dash with :&lt;sym&gt;: or :&lt;sym1&gt;+&lt;sym2&gt;:
etc. for multiple keys. For example, if <br>
the viewing machine has a mouse-wheel (buttons 4 5) but the
x11vnc side does not, these will do scrolls:</p>

<p style="margin-top: 1em">-buttonmap
12345-123:Prior::Next:</p>

<p style="margin-top: 1em">-buttonmap
12345-123:Up+Up+Up::Down+Down+Down:</p>

<p style="margin-top: 1em">See &lt;X11/keysymdef.h&gt;
header file for a list of Keysyms, or use the xev(1)
program. Note: mapping of button clicks to Keysyms may not
work if -modtweak or -xkb is needed <br>
for the Keysym.</p>

<p style="margin-top: 1em">If you include a modifier like
&quot;Shift_L&quot; the modifier&rsquo;s up/down state is
toggled, e.g. to send &quot;The&quot; use
:Shift_L+t+Shift_L+h+e: (the 1st one is shift down and the
2nd one <br>
is shift up). (note: the initial state of the modifier is
ignored and not reset) To include button events use
&quot;Button1&quot;, ... etc.</p>

<p style="margin-top: 1em">-buttonmap currently does not
work on MacOSX console or in -rawfb mode.</p>

<p style="margin-top: 1em">Workaround: use -buttonmap
IJ...-LM...=n to limit the number of mouse buttons to n,
e.g. 123-123=3. This will prevent x11vnc from crashing if
the X server reports there <br>
are 5 buttons (4/5 scroll wheel), but there are only really
3.</p>

<p style="margin-top: 1em">-nodragging</p>

<p style="margin-top: 1em">Do not update the display during
mouse dragging events (mouse button held down). Greatly
improves response on slow setups, but you lose all visual
feedback for drags, <br>
text selection, and some menu traversals. It overrides any
-pointer_mode setting.</p>

<p style="margin-top: 1em">-ncache n</p>

<p style="margin-top: 1em">Client-side caching scheme.
Framebuffer memory n (an integer) times that of the full
display is allocated below the actual framebuffer to cache
screen contents for rapid <br>
retrieval. So a W x H frambuffer is expanded to a W x
(n+1)*H one. Use 0 to disable.</p>

<p style="margin-top: 1em">The n is actually optional, the
default is 10.</p>

<p style="margin-top: 1em">For this and the other -ncache*
options below you can abbreviate &quot;-ncache&quot; with
&quot;-nc&quot;. Also, &quot;-nonc&quot; is the same as
&quot;-ncache 0&quot;</p>

<p style="margin-top: 1em">This is an experimental option,
currently implemented in an awkward way in that in the VNC
Viewer you can see the pixel cache contents if you scroll
down, etc. So you <br>
will have to set things up so you can&rsquo;t see that
region. If this method is successful, the changes required
for clients to do this less awkwardly will be
investigated.</p>

<p style="margin-top: 1em">The SSVNC viewer does a good job
at automatically hiding the pixel cache region. Or use
SSVNC&rsquo;s -ycrop option to explicitly hide the
region.</p>

<p style="margin-top: 1em">Note that this mode consumes a
huge amount of memory, both on the x11vnc server side and on
the VNC Viewer side. If n=2 then the amount of RAM used is
roughly tripled for <br>
both x11vnc and the VNC Viewer. As a rule of thumb, note
that 1280x1024 at depth 24 is about 5MB of pixel data.</p>

<p style="margin-top: 1em">For reasonable response when
cycling through 4 to 6 large (e.g. web browser) windows a
value n of 6 to 12 is recommended. (that&rsquo;s right: ~10X
more memory...)</p>

<p style="margin-top: 1em">Because of the way window
backingstore and saveunders are implemented, n must be even.
It will be incremented by 1 if it is not.</p>

<p style="margin-top: 1em">This mode also works for native
MacOS X, but may not be as effective as the X version. This
is due to a number of things, one is the drop-shadow
compositing that leaves <br>
extra areas that need to be repaired (see -ncache_pad).
Another is the window iconification animations need to be
avoided (see -macicontime). It appears the that the <br>
&rsquo;Scale&rsquo; animation mode gives better results than
the &rsquo;Genie&rsquo; one. Also, window event detection
not as accurate as the X version.</p>

<p style="margin-top: 1em">-ncache_cr</p>

<p style="margin-top: 1em">In -ncache mode, try to do
copyrect opaque window moves/drags instead of wireframes
(this can induce painting errors). The wireframe will still
be used when moving a win&acirc; <br>
dow whose save-unders has not yet been set or has been
invalidated.</p>

<p style="margin-top: 1em">Some VNC Viewers provide better
response than others with this option. On Unix, realvnc
viewer gives smoother drags than tightvnc viewer. Response
may also be choppy if <br>
the server side machine is too slow.</p>

<p style="margin-top: 1em">Sometimes on very slow modem
connections, this actually gives an improvement because no
pixel data at all (not even the box animation) is sent
during the drag.</p>

<p style="margin-top: 1em">-ncache_no_moveraise</p>

<p style="margin-top: 1em">In -ncache mode, do not assume
that moving a window will cause the window manager to raise
it to the top of the stack. The default is to assume it
does, and so at the <br>
beginning of any wireframe, etc, window moves the window
will be pushed to top in the VNC viewer.</p>

<p style="margin-top: 1em">-ncache_no_dtchange</p>

<p style="margin-top: 1em">In -ncache mode, do not try to
guess when the desktop (viewport) changes to another one
(i.e. another workarea). The default is to try to guess and
when detected try to <br>
make the transistion more smoothly.</p>

<p style="margin-top: 1em">-ncache_no_rootpixmap</p>

<p style="margin-top: 1em">In -ncache mode, do not try to
snapshot the desktop background to use in guessing or
reconstructing window save-unders.</p>

<p style="margin-top: 1em">-ncache_keep_anims</p>

<p style="margin-top: 1em">In -ncache mode, do not try to
disable window manager animations and other effects (that
usually degrade ncache performance or cause painting
errors). The default is to <br>
try to disable them on KDE (but not GNOME) when VNC clients
are connected.</p>

<p style="margin-top: 1em">For other window managers or
desktops that provide animations, effects, compositing,
translucency, etc. that interfere with the -ncache method
you will have to disable <br>
them manually.</p>

<p style="margin-top: 1em">-ncache_old_wm</p>

<p style="margin-top: 1em">In -ncache mode, enable some
heuristics for old style window managers such as fvwm and
twm.</p>

<p style="margin-top: 1em">-ncache_pad n</p>

<p style="margin-top: 1em">In -ncache mode, pad each window
with n pixels for the caching rectangles. This can be used
to try to improve the situation with dropshadows or other
compositing (e.g. <br>
MacOS X window manager), although it could make things
worse. The default is 0 on Unix and 24 on MacOS X.</p>

<p style="margin-top: 1em">-debug_ncache</p>

<p style="margin-top: 1em">Turn on debugging and profiling
output under -ncache.</p>

<p style="margin-top: 1em">-wireframe [str],
-nowireframe</p>

<p style="margin-top: 1em">Try to detect window moves or
resizes when a mouse button is held down and show a
wireframe instead of the full opaque window. This is based
completely on heuristics and <br>
may not always work: it depends on your window manager and
even how you move things around. See -pointer_mode below for
discussion of the &quot;bogging down&quot; problem this <br>
tries to avoid. Default: -wireframe</p>

<p style="margin-top: 1em">Shorter aliases: -wf [str] and
-nowf</p>

<p style="margin-top: 1em">The value &quot;str&quot; is
optional and, of course, is packed with many tunable
parameters for this scheme:</p>

<p style="margin-top: 1em">Format:
shade,linewidth,percent,T+B+L+R,mod,t1+t2+t3+t4 Default:
0xff,2,0,32+8+8+8,all,0.15+0.30+5.0+0.125</p>

<p style="margin-top: 1em">If you leave nothing between
commas: &quot;,,&quot; the default value is used. If you
don&rsquo;t specify enough commas, the trailing parameters
are set to their defaults.</p>

<p style="margin-top: 1em">&quot;shade&quot; indicate the
&quot;color&quot; for the wireframe, usually a greyscale:
0-255, however for 16 and 32bpp you can specify an rgb.txt X
color (e.g. &quot;dodgerblue&quot;) or a value &gt; <br>
255 is treated as RGB (e.g. red is 0xff0000).
&quot;linewidth&quot; sets the width of the wireframe in
pixels. &quot;percent&quot; indicates to not apply the
wireframe scheme to windows <br>
with area less than this percent of the full screen.</p>

<p style="margin-top: 1em">&quot;T+B+L+R&quot; indicates
four integers for how close in pixels the pointer has to be
from the Top, Bottom, Left, or Right edges of the window to
consider wireframing. This is <br>
a speedup to quickly exclude a window from being wireframed:
set them all to zero to not try the speedup (scrolling and
selecting text will likely be slower).</p>

<p style="margin-top: 1em">&quot;mod&quot; specifies if a
button down event in the interior of the window with a
modifier key (Alt, Shift, etc.) down should indicate a
wireframe opportunity. It can be &quot;0&quot; or <br>
&quot;none&quot; to skip it, &quot;1&quot; or
&quot;all&quot; to apply it to any modifier, or
&quot;Shift&quot;, &quot;Alt&quot;, &quot;Control&quot;,
&quot;Meta&quot;, &quot;Super&quot;, or &quot;Hyper&quot; to
only apply for that type of modifier key.</p>

<p style="margin-top: 1em">&quot;t1+t2+t3+t4&quot; specify
four floating point times in seconds: t1 is how long to wait
for the pointer to move, t2 is how long to wait for the
window to start moving or being <br>
resized (for some window managers this can be rather long),
t3 is how long to keep a wireframe moving before repainting
the window. t4 is the minimum time between sending <br>
wireframe &quot;animations&quot;. If a slow link is
detected, these values may be automatically changed to
something better for a slow link.</p>

<p style="margin-top: 1em">-nowireframelocal</p>

<p style="margin-top: 1em">By default, mouse motion and
button presses of a user sitting at the LOCAL display are
monitored for wireframing opportunities (so that the changes
will be sent effi&acirc; <br>
ciently to the VNC clients). Use this option to disable this
behavior.</p>

<p style="margin-top: 1em">-wirecopyrect mode,
-nowirecopyrect</p>

<p style="margin-top: 1em">Since the -wireframe mechanism
evidently tracks moving windows accurately, a speedup can be
obtained by telling the VNC viewers to locally copy the
translated window <br>
region. This is the VNC CopyRect encoding: the framebuffer
update doesn&rsquo;t need to send the actual new image
data.</p>

<p style="margin-top: 1em">Shorter aliases: -wcr [mode] and
-nowcr</p>

<p style="margin-top: 1em">&quot;mode&quot; can be
&quot;never&quot; (same as -nowirecopyrect) to never try the
copyrect, &quot;top&quot; means only do it if the window was
not covered by any other windows, and &quot;always&quot;
means to <br>
translate the orginally unobscured region (this may look odd
as the remaining pieces come in, but helps on a slow link).
Default: &quot;always&quot;</p>

<p style="margin-top: 1em">Note: there can be painting
errors or slow response when using -scale so you may want to
disable CopyRect in this case &quot;-wirecopyrect
never&quot; on the command line or by <br>
remote-control. Or you can also use the &quot;-scale
xxx:nocr&quot; scale option.</p>

<p style="margin-top: 1em">-debug_wireframe</p>

<p style="margin-top: 1em">Turn on debugging info printout
for the wireframe heuristics. &quot;-dwf&quot; is an alias.
Specify multiple times for more output.</p>

<p style="margin-top: 1em">-scrollcopyrect mode,
-noscrollcopyrect</p>

<p style="margin-top: 1em">Like -wirecopyrect, but use
heuristics to try to guess if a window has scrolled its
contents (either vertically or horizontally). This requires
the RECORD X extension to <br>
&quot;snoop&quot; on X applications (currently for certain
XCopyArea and XConfigureWindow X protocol requests).
Examples: Hitting &lt;Return&gt; in a terminal window when
the cursor was <br>
at the bottom, the text scrolls up one line. Hitting
&lt;Down&gt; arrow in a web browser window, the web page
scrolls up a small amount. Or scrolling with a scrollbar or
mouse <br>
wheel.</p>

<p style="margin-top: 1em">Shorter aliases: -scr [mode] and
-noscr</p>

<p style="margin-top: 1em">This scheme will not always
detect scrolls, but when it does there is a nice speedup
from using the VNC CopyRect encoding (see -wirecopyrect).
The speedup is both in <br>
reduced network traffic and reduced X framebuffer
polling/copying. On the other hand, it may induce undesired
transients (e.g. a terminal cursor being scrolled up when it
<br>
should not be) or other painting errors (window tearing,
bunching-up, etc). These are automatically repaired in a
short period of time. If this is unacceptable disable <br>
the feature with -noscrollcopyrect.</p>

<p style="margin-top: 1em">Screen clearing kludges: for
testing at least, there are some &quot;magic key
sequences&quot; (must be done in less than 1 second) to aid
repairing painting errors that may be seen <br>
when using this mode:</p>

<p style="margin-top: 1em">3 Alt_L&rsquo;s in a row: resend
whole screen, 4 Alt_L&rsquo;s in a row: reread and resend
whole screen, 3 Super_L&rsquo;s in a row: mark whole screen
for polling, 4 Super_L&rsquo;s in a row: <br>
reset RECORD context, 5 Super_L&rsquo;s in a row: try to
push a black screen</p>

<p style="margin-top: 1em">note: Alt_L is the Left
&quot;Alt&quot; key (a single key) Super_L is the Left
&quot;Super&quot; key (Windows flag). Both of these are
modifier keys, and so should not generate characters <br>
when pressed by themselves. Also, your VNC viewer may have
its own refresh hot-key or button.</p>

<p style="margin-top: 1em">&quot;mode&quot; can be
&quot;never&quot; (same as -noscrollcopyrect) to never try
the copyrect, &quot;keys&quot; means to try it in response
to keystrokes only, &quot;mouse&quot; means to try it in
response to <br>
mouse events only, &quot;always&quot; means to do both.
Default: &quot;always&quot;</p>

<p style="margin-top: 1em">Note: there can be painting
errors or slow response when using -scale so you may want to
disable CopyRect in this case &quot;-scrollcopyrect
never&quot; on the command line or by <br>
remote-control. Or you can also use the &quot;-scale
xxx:nocr&quot; scale option.</p>

<p style="margin-top: 1em">-scr_area n</p>

<p style="margin-top: 1em">Set the minimum area in pixels
for a rectangle to be considered for the -scrollcopyrect
detection scheme. This is to avoid wasting the effort on
small rectangles that <br>
would be quickly updated the normal way. E.g. suppose an app
updated the position of its skinny scrollbar first and then
shifted the large panel it controlled. We want <br>
to be sure to skip the small scrollbar and get the large
panel. Default: 60000</p>

<p style="margin-top: 1em">-scr_skip list</p>

<p style="margin-top: 1em">Skip scroll detection for
applications matching the comma separated list of strings in
list. Some applications implement their scrolling in strange
ways where the XCopy&acirc; <br>
Area, etc, also applies to invisible portions of the window:
if we CopyRect those areas it looks awful during the scroll
and there may be painting errors left after the <br>
scroll. Soffice.bin is the worst known offender.</p>

<p style="margin-top: 1em">Use &quot;##&quot; to denote the
start of the application class (e.g. &quot;##XTerm&quot;)
and &quot;++&quot; to denote the start of the application
instance name (e.g. &quot;++xterm&quot;). The string your
<br>
list is matched against is of the form
&quot;^^WM_NAME##Class++Instance&lt;same-for-any-subwindows&gt;&quot;
The &quot;xlsclients -la&quot; command will provide this
info.</p>

<p style="margin-top: 1em">If a pattern is prefixed with
&quot;KEY:&quot; it only applies to Keystroke generated
scrolls (e.g. Up arrow). If it is prefixed with
&quot;MOUSE:&quot; it only applies to Mouse induced <br>
scrolls (e.g. dragging on a scrollbar). Default:
##Soffice.bin,##StarOffice,##OpenOffice</p>

<p style="margin-top: 1em">-scr_inc list</p>

<p style="margin-top: 1em">Opposite of -scr_skip: this list
is consulted first and if there is a match the window will
be monitored via RECORD for scrolls irrespective of
-scr_skip. Use -scr_skip <br>
&rsquo;*&rsquo; to skip anything that does not match your
-scr_inc. Use -scr_inc &rsquo;*&rsquo; to include
everything.</p>

<p style="margin-top: 1em">-scr_keys list</p>

<p style="margin-top: 1em">For keystroke scroll detection,
only apply the RECORD heuristics to the comma separated list
of keysyms in list. You may find the RECORD overhead for
every one of your <br>
keystrokes disrupts typing too much, but you don&rsquo;t
want to turn it off completely with &quot;-scr mouse&quot;
and -scr_parms does not work or is too confusing.</p>

<p style="margin-top: 1em">The listed keysyms can be
numeric or the keysym names in the &lt;X11/keysymdef.h&gt;
header file or from the xev(1) program. Example:
&quot;-scr_keys Up,Down,Return&quot;. One probably <br>
wants to have application specific lists (e.g. for
terminals, etc) but that is too icky to think about for
now...</p>

<p style="margin-top: 1em">If list begins with the
&quot;-&quot; character the list is taken as an exclude
list: all keysyms except those list will be considered. The
special string &quot;builtin&quot; expands to an <br>
internal list of keysyms that are likely to cause scrolls.
BTW, by default modifier keys, Shift_L, Control_R, etc, are
skipped since they almost never induce scrolling by <br>
themselves.</p>

<p style="margin-top: 1em">-scr_term list</p>

<p style="margin-top: 1em">Yet another cosmetic kludge.
Apply shell/terminal heuristics to applications matching
comma separated list (same as for -scr_skip/-scr_inc). For
example an annoying <br>
transient under scroll detection is if you hit Enter in a
terminal shell with full text window, the solid text cursor
block will be scrolled up. So for a short time there <br>
are two (or more) block cursors on the screen. There are
similar scenarios, (e.g. an output line is duplicated).</p>

<p style="margin-top: 1em">These transients are induced by
the approximation of scroll detection (e.g. it detects the
scroll, but not the fact that the block cursor was cleared
just before the <br>
scroll). In nearly all cases these transient errors are
repaired when the true X framebuffer is consulted by the
normal polling. But they are distracting, so what this <br>
option provides is extra &quot;padding&quot; near the bottom
of the terminal window: a few extra lines near the bottom
will not be scrolled, but rather updated from the actual X
<br>
framebuffer. This usually reduces the annoying artifacts.
Use &quot;none&quot; to disable. Default:
&quot;term&quot;</p>

<p style="margin-top: 1em">-scr_keyrepeat lo-hi</p>

<p style="margin-top: 1em">If a key is held down (or
otherwise repeats rapidly) and this induces a rapid sequence
of scrolls (e.g. holding down an Arrow key) the
&quot;scrollcopyrect&quot; detection and over&acirc; <br>
head may not be able to keep up. A time per single scroll
estimate is performed and if that estimate predicts a
sustainable scrollrate of keys per second between
&quot;lo&quot; and <br>
&quot;hi&quot; then repeated keys will be DISCARDED to
maintain the scrollrate. For example your key autorepeat may
be 25 keys/sec, but for a large window or slow link only 8
<br>
scrolls per second can be sustained, then roughly 2 out of
every 3 repeated keys will be discarded during this period.
Default: &quot;4-20&quot;</p>

<p style="margin-top: 1em">-scr_parms string</p>

<p style="margin-top: 1em">Set various parameters for the
scrollcopyrect mode. The format is similar to that for
-wireframe and packed with lots of parameters:</p>

<p style="margin-top: 1em">Format:
T+B+L+R,t1+t2+t3,s1+s2+s3+s4+s5 Default:
0+64+32+32,0.02+0.10+0.9,0.03+0.06+0.5+0.1+5.0</p>

<p style="margin-top: 1em">If you leave nothing between
commas: &quot;,,&quot; the default value is used. If you
don&rsquo;t specify enough commas, the trailing parameters
are set to their defaults.</p>

<p style="margin-top: 1em">&quot;T+B+L+R&quot; indicates
four integers for how close in pixels the pointer has to be
from the Top, Bottom, Left, or Right edges of the window to
consider scrollcopyrect. If <br>
-wireframe overlaps it takes precedence. This is a speedup
to quickly exclude a window from being watched for
scrollcopyrect: set them all to zero to not try the speedup
<br>
(things like selecting text will likely be slower).</p>

<p style="margin-top: 1em">&quot;t1+t2+t3&quot; specify
three floating point times in seconds that apply to
scrollcopyrect detection with *Keystroke* input: t1 is how
long to wait after a key is pressed for <br>
the first scroll, t2 is how long to keep looking after a
Keystroke scroll for more scrolls. t3 is how frequently to
try to update surrounding scrollbars outside of the <br>
scrolling area (0.0 to disable)</p>

<p style="margin-top: 1em">&quot;s1+s2+s3+s4+s5&quot;
specify five floating point times in seconds that apply to
scrollcopyrect detection with *Mouse* input: s1 is how long
to wait after a mouse button is <br>
pressed for the first scroll, s2 is how long to keep waiting
for additional scrolls after the first Mouse scroll was
detected. s3 is how frequently to try to update sur&acirc;
<br>
rounding scrollbars outside of the scrolling area (0.0 to
disable). s4 is how long to buffer pointer motion (to try to
get fewer, bigger mouse scrolls). s5 is the maximum <br>
time to spend just updating the scroll window without
updating the rest of the screen.</p>

<p style="margin-top: 1em">-fixscreen string</p>

<p style="margin-top: 1em">Periodically &quot;repair&quot;
the screen based on settings in string. Hopefully you
won&rsquo;t need this option, it is intended for cases when
the -scrollcopyrect or -wirecopyrect <br>
features leave too many painting errors, but it can be used
for any scenario. This option periodically performs costly
operations and so interactive response may be <br>
reduced when it is on. You can use 3 Alt_L&rsquo;s (the Left
&quot;Alt&quot; key) taps in a row (as described under
-scrollcopyrect) instead to manually request a screen
repaint when it <br>
is needed.</p>

<p style="margin-top: 1em">string is a comma separated list
of one or more of the following: &quot;V=t&quot;,
&quot;C=t&quot;, &quot;X=t&quot;, and &quot;8=t&quot;. In
these &quot;t&quot; stands for a time in seconds (it is a
floating point even <br>
though one should usually use values &gt; 2 to avoid wasting
resources). V sets how frequently the entire screen should
be sent to viewers (it is like the 3 Alt_L&rsquo;s). C <br>
sets how long to wait after a CopyRect to repaint the full
screen. X sets how frequently to reread the full X11
framebuffer from the X server and push it out to connected
<br>
viewers. Use of X should be rare, please report a bug if you
find you need it. 8= applies only for -8to24 mode: it sets
how often the non-default visual regions of the <br>
screen (e.g. 8bpp windows) are refreshed. Examples:
-fixscreen V=10 -fixscreen C=10</p>

<p style="margin-top: 1em">-debug_scroll</p>

<p style="margin-top: 1em">Turn on debugging info printout
for the scroll heuristics. &quot;-ds&quot; is an alias.
Specify it multiple times for more output.</p>

<p style="margin-top: 1em">-noxrecord</p>

<p style="margin-top: 1em">Disable any use of the RECORD
extension. This is currently used by the -scrollcopyrect
scheme and to monitor X server grabs.</p>

<p style="margin-top: 1em">-grab_buster, -nograb_buster</p>

<p style="margin-top: 1em">Some of the use of the RECORD
extension can leave a tiny window for XGrabServer deadlock.
This is only if the whole-server grabbing application
expects mouse or keyboard <br>
input before releasing the grab. It is usually a window
manager that does this. x11vnc takes care to avoid the
problem, but if caught x11vnc will freeze. Without <br>
-grab_buster, the only solution is to go the physical
display and give it some input to satisfy the grabbing app.
Or manually kill and restart the window manager if that <br>
is feasible. With -grab_buster, x11vnc will fork a helper
thread and if x11vnc appears to be stuck in a grab after a
period of time (20-30 sec) then it will inject some <br>
user input: button clicks, Escape, mouse motion, etc to try
to break the grab. If you experience a lot of grab deadlock,
please report a bug.</p>

<p style="margin-top: 1em">-debug_grabs</p>

<p style="margin-top: 1em">Turn on debugging info printout
with respect to XGrabServer() deadlock for
-scrollcopyrect__mode_.</p>

<p style="margin-top: 1em">-debug_sel</p>

<p style="margin-top: 1em">Turn on debugging info printout
with respect to PRIMARY, CLIPBOARD, and CUTBUFFER0
selections.</p>

<p style="margin-top: 1em">-pointer_mode n</p>

<p style="margin-top: 1em">Various pointer motion update
schemes. &quot;-pm&quot; is an alias. The problem is pointer
motion can cause rapid changes on the screen: consider the
rapid changes when you drag a <br>
large window around opaquely. Neither x11vnc&rsquo;s screen
polling and vnc compression routines nor the bandwidth to
the vncviewers can keep up these rapid screen changes: <br>
everything will bog down when dragging or scrolling. So a
scheme has to be used to &quot;eat&quot; much of that
pointer input before re-polling the screen and sending out
frame&acirc; <br>
buffer updates. The mode number n can be 0 to 4 and selects
one of the schemes desribed below.</p>

<p style="margin-top: 1em">Note that the -wireframe and
-scrollcopyrect__mode_s complement -pointer_mode by
detecting (and improving) certain periods of &quot;rapid
screen change&quot;.</p>

<p style="margin-top: 1em">n=0: does the same as
-nodragging. (all screen polling is suspended if a mouse
button is pressed.)</p>

<p style="margin-top: 1em">n=1: was the original scheme
used to about Jan 2004: it basically just skips -input_skip
keyboard or pointer events before repolling the screen.</p>

<p style="margin-top: 1em">n=2 is an improved scheme: by
watching the current rate of input events it tries to detect
if it should try to &quot;eat&quot; additional pointer
events before continuing.</p>

<p style="margin-top: 1em">n=3 is basically a dynamic
-nodragging mode: it detects when the mouse motion has
paused and then refreshes the display.</p>

<p style="margin-top: 1em">n=4 attempts to measures network
rates and latency, the video card read rate, and how many
tiles have been changed on the screen. From this, it
aggressively tries to push <br>
screen &quot;frames&quot; when it decides it has enough
resources to do so. NOT FINISHED.</p>

<p style="margin-top: 1em">The default n is 2. Note that
modes 2, 3, 4 will skip -input_skip keyboard events (but it
will not count pointer events). Also note that these modes
are not available in <br>
-threads mode which has its own pointer event handling
mechanism.</p>

<p style="margin-top: 1em">To try out the different pointer
modes to see which one gives the best response for your
usage, it is convenient to use the remote control function,
for example &quot;x11vnc -R <br>
pm:4&quot; or the tcl/tk gui (Tuning -&gt; pointer_mode
-&gt; n).</p>

<p style="margin-top: 1em">-input_skip n</p>

<p style="margin-top: 1em">For the pointer handling when
non-threaded: try to read n user input events before
scanning display. n &lt; 0 means to act as though there is
always user input. Default: 10</p>

<p style="margin-top: 1em">-allinput</p>

<p style="margin-top: 1em">Have x11vnc read and process all
available client input before proceeding.</p>

<p style="margin-top: 1em">-input_eagerly</p>

<p style="margin-top: 1em">Similar to -allinput but use the
handleEventsEagerly mechanism built into LibVNCServer.</p>

<p style="margin-top: 1em">-speeds rd,bw,lat</p>

<p style="margin-top: 1em">x11vnc tries to estimate some
speed parameters that are used to optimize scheduling (e.g.
-pointer_mode 4, -wireframe, -scrollcopyrect) and other
things. Use the -speeds <br>
option to set these manually. The triple rd,bw,lat
corresponds to video h/w read rate in MB/sec, network
bandwidth to clients in KB/sec, and network latency to
clients in <br>
milliseconds, respectively. If a value is left blank, e.g.
&quot;-speeds ,100,15&quot;, then the internal scheme is
used to estimate the empty value(s).</p>

<p style="margin-top: 1em">Typical PC video cards have read
rates of 5-10 MB/sec. If the framebuffer is in main memory
instead of video h/w (e.g. SunRay, shadowfb, dummy driver,
Xvfb), the read <br>
rate may be much faster. &quot;x11perf -getimage500&quot;
can be used to get a lower bound (remember to factor in the
bytes per pixel). It is up to you to estimate the network
<br>
bandwith and latency to clients. For the latency the ping(1)
command can be used.</p>

<p style="margin-top: 1em">For convenience there are some
aliases provided, e.g. &quot;-speeds modem&quot;. The
aliases are: &quot;modem&quot; for 6,4,200; &quot;dsl&quot;
for 6,100,50; and &quot;lan&quot; for 6,5000,1</p>

<p style="margin-top: 1em">-wmdt string</p>

<p style="margin-top: 1em">For some features, e.g.
-wireframe and -scrollcopyrect, x11vnc has to work around
issues for certain window managers or desktops (currently
kde and xfce). By default it <br>
tries to guess which one, but it can guess incorrectly. Use
this option to indicate which wm/dt. string can be
&quot;gnome&quot;, &quot;kde&quot;, &quot;cde&quot;,
&quot;xfce&quot;, or &quot;root&quot; (classic X wm). <br>
Anything else is interpreted as &quot;root&quot;.</p>

<p style="margin-top: 1em">-debug_pointer</p>

<p style="margin-top: 1em">Print debugging output for every
pointer event.</p>

<p style="margin-top: 1em">-debug_keyboard</p>

<p style="margin-top: 1em">Print debugging output for every
keyboard event.</p>

<p style="margin-top: 1em">Same as -dp and -dk,
respectively. Use multiple times for more output.</p>

<p style="margin-top: 1em">-defer time</p>

<p style="margin-top: 1em">Time in ms to delay sending
updates to connected clients (deferUpdateTime) Default:
20</p>

<p style="margin-top: 1em">-wait time</p>

<p style="margin-top: 1em">Time in ms to pause between
screen polls. Used to cut down on load. Default: 20</p>

<p style="margin-top: 1em">-extra_fbur n</p>

<p style="margin-top: 1em">Perform extra
FrameBufferUpdateRequests checks to try to be in better sync
with the client&rsquo;s requests. What this does is perform
extra polls of the client socket at crit&acirc; <br>
ical times (before &rsquo;-defer&rsquo; and
&rsquo;-wait&rsquo; calls.) The default is n=1. Set to a
larger number to insert more checks or set to n=0 to
disable. A downside of these extra <br>
calls is that more mouse input may be processed than
desired.</p>

<p style="margin-top: 1em">-wait_ui factor</p>

<p style="margin-top: 1em">Factor by which to cut the -wait
time if there has been recent user input (pointer or
keyboard). Improves response, but increases the load
whenever you are moving the <br>
mouse or typing. Default: 2.00</p>

<p style="margin-top: 1em">-setdefer n</p>

<p style="margin-top: 1em">When the -wait_ui mechanism cuts
down the wait time ms, set the defer time to the same ms
value. n=1 to enable, 0 to disable, and -1 to set defer to 0
(no delay). Simi&acirc; <br>
larly, 2 and -2 indicate &rsquo;urgent_update&rsquo; mode
should be used to push the updates even sooner. Default:
1</p>

<p style="margin-top: 1em">-nowait_bog</p>

<p style="margin-top: 1em">Do not detect if the screen
polling is &quot;bogging down&quot; and sleep more. Some
activities with no user input can slow things down a lot:
consider a large terminal window with <br>
a long build running in it continuously streaming text
output. By default x11vnc will try to detect this (3 screen
polls in a row each longer than 0.25 sec with no user <br>
input), and sleep up to 1.5 secs to let things &quot;catch
up&quot;. Use this option to disable that detection.</p>

<p style="margin-top: 1em">-slow_fb time</p>

<p style="margin-top: 1em">Floating point time in seconds
to delay all screen polling. For special purpose usage where
a low frame rate is acceptable and desirable, but you want
the user input pro&acirc; <br>
cessed at the normal rate so you cannot use -wait.</p>

<p style="margin-top: 1em">-xrefresh time</p>

<p style="margin-top: 1em">Floating point time in seconds
to indicate how often to do the equivalent of xrefresh(1) to
force all windows (in the viewable area if -id, -sid, or
-clip is used) to <br>
repaint themselves. Use this only if applications misbehave
by not repainting themselves properly. See also
-noxdamage.</p>

<p style="margin-top: 1em">-nap, -nonap</p>

<p style="margin-top: 1em">Monitor activity and if it is
low take longer naps between screen polls to really cut down
load when idle. Default: take naps</p>

<p style="margin-top: 1em">-sb time</p>

<p style="margin-top: 1em">Time in seconds after NO
activity (e.g. screen blank) to really throttle down the
screen polls (i.e. sleep for about 1.5 secs). Use 0 to
disable. Default: 60 Set the env. <br>
var. X11VNC_SB_FACTOR to scale it.</p>

<p style="margin-top: 1em">-readtimeout n</p>

<p style="margin-top: 1em">Set LibVNCServer
rfbMaxClientWait to n seconds. On slow links that take a
long time to paint the first screen LibVNCServer may hit the
timeout and drop the connection. <br>
Default: 20 seconds.</p>

<p style="margin-top: 1em">-ping n</p>

<p style="margin-top: 1em">Send a 1x1 framebuffer update to
all clients every n seconds (e.g. to try to keep a network
connection alive)</p>

<p style="margin-top: 1em">-nofbpm, -fbpm</p>

<p style="margin-top: 1em">If the system supports the FBPM
(Frame Buffer Power Management) extension (i.e. some Sun
systems), then prevent the video h/w from going into a
reduced power state when <br>
VNC clients are connected.</p>

<p style="margin-top: 1em">FBPM capable video h/w save
energy when the workstation is idle by going into low power
states (similar to DPMS for monitors). This interferes with
x11vnc&rsquo;s polling of <br>
the framebuffer data.</p>

<p style="margin-top: 1em">&quot;-nofbpm&quot; means
prevent FBPM low power states whenever VNC clients are
connected, while &quot;-fbpm&quot; means to not monitor the
FBPM state at all. See the xset(1) manpage for <br>
details. -nofbpm is basically the same as running &quot;xset
fbpm force on&quot; periodically. Default: -fbpm</p>

<p style="margin-top: 1em">-nodpms, -dpms</p>

<p style="margin-top: 1em">If the system supports the DPMS
(Display Power Management Signaling) extension, then prevent
the monitor from going into a reduced power state when VNC
clients are con&acirc; <br>
nected.</p>

<p style="margin-top: 1em">DPMS reduced power monitor
states are a good thing and you normally want the power down
to take place (usually x11vnc has no problem exporting the
display in this state). <br>
You probably only want to use &quot;-nodpms&quot; to work
around problems with Screen Savers kicking on in DPMS low
power states. There is known problem with kdesktop_lock on
KDE <br>
where the screen saver keeps kicking in every time user
input stops for a second or two. Specifying
&quot;-nodpms&quot; works around it.</p>

<p style="margin-top: 1em">&quot;-nodpms&quot; means
prevent DPMS low power states whenever VNC clients are
connected, while &quot;-dpms&quot; means to not monitor the
DPMS state at all. See the xset(1) manpage for <br>
details. -nodpms is basically the same as running &quot;xset
dpms force on&quot; periodically. Default: -dpms</p>

<p style="margin-top: 1em">-forcedpms</p>

<p style="margin-top: 1em">If the system supports the DPMS
(Display Power Management Signaling) extension, then try to
keep the monitor in a powered off state. This is to prevent
nosey people at <br>
the physical display from viewing what is on the screen. Be
sure to lock the screen before disconnecting.</p>

<p style="margin-top: 1em">This method is far from bullet
proof, e.g. suppose someone attaches a non-DPMS monitor, or
loads the machine so that there is a gap of time before
x11vnc restores the pow&acirc; <br>
ered off state? On many machines if he floods it with
keyboard and mouse input he can see flashes of what is on
the screen before the DPMS off state is reestablished. <br>
For this to work securely there would need to be support in
the X server to do this exactly rather than approximately
with DPMS.</p>

<p style="margin-top: 1em">-clientdpms</p>

<p style="margin-top: 1em">As -forcedpms but only when VNC
clients are connected.</p>

<p style="margin-top: 1em">-noserverdpms</p>

<p style="margin-top: 1em">The UltraVNC ServerInput
extension is supported. This allows the VNC viewer to click
a button that will cause the server (x11vnc) to try to
disable keyboard and mouse <br>
input at the physical display and put the monitor in dpms
powered off state. Use this option to skip powering off the
monitor.</p>

<p style="margin-top: 1em">-noultraext</p>

<p style="margin-top: 1em">Disable the following UltraVNC
extensions: SingleWindow and ServerInput. The others managed
by LibVNCServer (textchat, 1/n scaling, rfbEncodingUltra)
are not.</p>

<p style="margin-top: 1em">-chatwindow</p>

<p style="margin-top: 1em">Place a local UltraVNC chat
window on the X11 display that x11vnc is polling. That way
the person on the VNC viewer-side can chat with the person
at the physical X11 con&acirc; <br>
sole. (e.g. helpdesk w/o telephone)</p>

<p style="margin-top: 1em">For this to work the SSVNC
package (version 1.0.21 or later) MUST BE installed on the
system where x11vnc runs and the &rsquo;ssvnc&rsquo; command
must be available in $PATH. The <br>
ssvncviewer is used as a chat window helper. See
http://www.karlrunge.com/x11vnc/ssvnc.html</p>

<p style="margin-top: 1em">This option implies
&rsquo;-rfbversion 3.6&rsquo; so as to trick UltraVNC
viewers, otherwise they assume chat is not available. To
specify a different rfbversion, place it after the <br>
-chatwindow option on the cmdline.</p>

<p style="margin-top: 1em">See also the remote control
&rsquo;chaton&rsquo; and &rsquo;chatoff&rsquo; actions.
These can also be set from the tkx11vnc GUI.</p>

<p style="margin-top: 1em">-noxdamage</p>

<p style="margin-top: 1em">Do not use the X DAMAGE
extension to detect framebuffer changes even if it is
available. Use -xdamage if your default is to have it
off.</p>

<p style="margin-top: 1em">x11vnc&rsquo;s use of the DAMAGE
extension: 1) significantly reduces the load when the screen
is not changing much, and 2) detects changed areas (small
ones by default) more <br>
quickly.</p>

<p style="margin-top: 1em">Currently the DAMAGE extension
is overly conservative and often reports large areas (e.g. a
whole terminal or browser window) as damaged even though the
actual changed <br>
region is much smaller (sometimes just a few pixels). So
heuristics were introduced to skip large areas and use the
damage rectangles only as &quot;hints&quot; for the
traditional <br>
scanline polling. The following tuning parameters are
introduced to adjust this behavior:</p>

<p style="margin-top: 1em">-xd_area A</p>

<p style="margin-top: 1em">Set the largest DAMAGE rectangle
area A (in pixels: width * height) to trust as truly
damaged: the rectangle will be copied from the framebuffer
(slow) no matter what. <br>
Set to zero to trust *all* rectangles. Default: 20000</p>

<p style="margin-top: 1em">-xd_mem f</p>

<p style="margin-top: 1em">Set how long DAMAGE rectangles
should be &quot;remembered&quot;, f is a floating point
number and is in units of the scanline repeat cycle time (32
iterations). The default (1.0) <br>
should give no painting problems. Increase it if there are
problems or decrease it to live on the edge (perhaps useful
on a slow machine).</p>

<p style="margin-top: 1em">-sigpipe string</p>

<p style="margin-top: 1em">Broken pipe (SIGPIPE) handling.
string can be &quot;ignore&quot; or &quot;exit&quot;. For
&quot;ignore&quot; LibVNCServer will handle the abrupt loss
of a client and continue, for &quot;exit&quot; x11vnc will
<br>
cleanup and exit at the 1st broken connection.</p>

<p style="margin-top: 1em">This option is not really needed
since LibVNCServer is doing the correct thing now for quite
some time. However, for convenience you can use it to ignore
other signals, <br>
e.g. &quot;-sigpipe ignore:HUP,INT,TERM&quot; in case that
would be useful for some sort of application. You can also
put &quot;exit:..&quot; in the list to have x11vnc cleanup
on the listed <br>
signals. &quot;-sig&quot; is an alias for this option if you
don&rsquo;t like the &rsquo;pipe&rsquo;. Example: -sig
ignore:INT,TERM,exit:USR1</p>

<p style="margin-top: 1em">-threads, -nothreads</p>

<p style="margin-top: 1em">Whether or not to use the
threaded LibVNCServer algorithm [rfbRunEventLoop] if
libpthread is available. In this mode new threads (one for
input and one for output) are <br>
created to handle each new client. Default: -nothreads.</p>

<p style="margin-top: 1em">Thread stability is much
improved in version 0.9.8.</p>

<p style="margin-top: 1em">Multiple clients in threaded
mode should be stable for the ZRLE encoding on all
platforms. The Tight and Zlib encodings are currently only
stable on Linux for multiple <br>
clients. Compile with -DTLS=__thread if your OS and compiler
and linker support it.</p>

<p style="margin-top: 1em">For resizes (randr, etc.) set
this env. var. to the number of milliseconds to sleep:
X11VNC_THREADS_NEW_FB_SLEEP at various places in the
do_new_fb() action. This is to <br>
let various activities settle. Default is about 500ms.</p>

<p style="margin-top: 1em">Multiple clients in threaded
mode could yield better performance for
&rsquo;class-room&rsquo; broadcasting usage; also in
-appshare broadcast mode. See also the -reflect option.</p>

<p style="margin-top: 1em">-fs f</p>

<p style="margin-top: 1em">If the fraction of changed tiles
in a poll is greater than f, the whole screen is updated.
Default: 0.75</p>

<p style="margin-top: 1em">-gaps n</p>

<p style="margin-top: 1em">Heuristic to fill in gaps in
rows or cols of n or less tiles. Used to improve text
paging. Default: 4</p>

<p style="margin-top: 1em">-grow n</p>

<p style="margin-top: 1em">Heuristic to grow islands of
changed tiles n or wider by checking the tile near the
boundary. Default: 3</p>

<p style="margin-top: 1em">-fuzz n</p>

<p style="margin-top: 1em">Tolerance in pixels to mark a
tiles edges as changed. Default: 2</p>

<p style="margin-top: 1em">-debug_tiles</p>

<p style="margin-top: 1em">Print debugging output for
tiles, fb updates, etc.</p>

<p style="margin-top: 1em">-snapfb</p>

<p style="margin-top: 1em">Instead of polling the X display
framebuffer (fb) for changes, periodically copy all of X
display fb into main memory and examine that copy for
changes. (This setting <br>
also applies for non-X -rawfb modes). Under some
circumstances this will improve interactive response, or at
least make things look smoother, but in others (most!) it
<br>
will make the response worse. If the video h/w fb is such
that reading small tiles is very slow this mode could help.
To keep the &quot;framerate&quot; up the screen size x bpp
<br>
cannot be too large. Note that this mode is very wasteful of
memory I/O resources (it makes full screen copies even if
nothing changes). It may be of use in video cap&acirc; <br>
ture-like applications, webcams, or where window tearing is
a problem.</p>

<p style="margin-top: 1em">-rawfb string</p>

<p style="margin-top: 1em">Instead of polling X, poll the
memory object specified in string.</p>

<p style="margin-top: 1em">For file polling, to memory map
mmap(2) a file use: &quot;map:/path/to/a/file@WxHxB&quot;,
with framebuffer Width, Height, and Bits per pixel.
&quot;mmap:...&quot; is the same.</p>

<p style="margin-top: 1em">If there is trouble with mmap,
use &quot;file:/...&quot; for slower lseek(2) based
reading.</p>

<p style="margin-top: 1em">Use &quot;snap:...&quot; to
imply -snapfb mode and the &quot;file:&quot; access (this is
for unseekable devices that only provide the fb all at once,
e.g. a video camera provides the whole <br>
frame).</p>

<p style="margin-top: 1em">For shared memory segments
string is of the form: &quot;shm:N@WxHxB&quot; which
specifies a shmid N and with WxHxB as above. See shmat(1)
and ipcs(1)</p>

<p style="margin-top: 1em">If you do not supply a type
&quot;map&quot; is assumed if the file exists (see the next
paragraphs for some exceptions to this.)</p>

<p style="margin-top: 1em">If string is
&quot;setup:cmd&quot;, then the command &quot;cmd&quot; is
run and the first line from it is read and used as string.
This allows initializing the device, determining WxHxB, <br>
etc. These are often done as root so take care.</p>

<p style="margin-top: 1em">If the string begins with
&quot;video&quot;, see the VIDEO4LINUX discussion below
where the device may be queried for (and possibly set) the
framebuffer parameters.</p>

<p style="margin-top: 1em">If the string begins with
&quot;console&quot;, &quot;/dev/fb&quot;, &quot;fb&quot;, or
&quot;vt&quot;, see the LINUX CONSOLE discussion below where
the framebuffer device is opened and keystrokes (and
possibly <br>
mouse events) are inserted into the console.</p>

<p style="margin-top: 1em">If the string begins with
&quot;vnc&quot;, see the VNC HOST discussion below where the
framebuffer is taken as that of another remote VNC
server.</p>

<p style="margin-top: 1em">Optional suffixes are
&quot;:R/G/B&quot; and &quot;+O&quot; to specify red, green,
and blue masks (in hex) and an offset into the memory
object. If the masks are not provided x11vnc guesses <br>
them based on the bpp (if the colors look wrong, you need to
provide the masks.)</p>

<p style="margin-top: 1em">Another optional suffix is the
Bytes Per Line which in some cases is not WxB/8. Specify it
as WxHxB-BPL e.g. 800x600x16-2048. This could be a normal
width 1024 at 16bpp <br>
fb, but only width 800 shows up.</p>

<p style="margin-top: 1em">So the full format is:
mode:file@WxHxB:R/G/B+O-BPL</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">-rawfb
shm:210337933@800x600x32:ff/ff00/ff0000</p>

<p style="margin-top: 1em">-rawfb
map:/dev/fb0@1024x768x32</p>

<p style="margin-top: 1em">-rawfb
map:/tmp/Xvfb_screen0@640x480x8+3232</p>

<p style="margin-top: 1em">-rawfb
file:/tmp/my.pnm@250x200x24+37</p>

<p style="margin-top: 1em">-rawfb
file:/dev/urandom@128x128x8 -rawfb
snap:/dev/video0@320x240x24 -24to32 -rawfb video0 -rawfb
video -pipeinput VID -rawfb console -rawfb vt2 -rawfb
vnc:somehost:0</p>

<p style="margin-top: 1em">(see ipcs(1) and fbset(1) for
the first two examples)</p>

<p style="margin-top: 1em">In general all user input is
discarded by default (see the -pipeinput option for how to
use a helper program to insert). Most of the X11 (screen,
keyboard, mouse) options <br>
do not make sense and many will cause this mode to crash, so
please think twice before setting or changing them in a
running x11vnc.</p>

<p style="margin-top: 1em">If you DO NOT want x11vnc to
close the X DISPLAY in rawfb mode, prepend a &quot;+&quot;
e.g. +file:/dev/fb0... Keeping the display open enables the
default remote-control channel, <br>
which could be useful. Alternatively, if you specify
-noviewonly, then the mouse and keyboard input are STILL
sent to the X display, this usage should be very rare, i.e.
<br>
doing something strange with /dev/fb0.</p>

<p style="margin-top: 1em">If the device is not
&quot;seekable&quot; (e.g. webcam) try reading it all at
once in full snaps via the &quot;snap:&quot; mode (note:
this is a resource hog). If you are using file: or map: <br>
AND the device needs to be reopened for *every* snapfb
snapshot, set the environment variable: SNAPFB_RAWFB_RESET=1
as well.</p>

<p style="margin-top: 1em">If you want x11vnc to
dynamically transform a 24bpp rawfb to 32bpp (note that this
will be slower) also supply the -24to32 option. This would
be useful for, say, a video <br>
camera that delivers the pixel data as 24bpp packed RGB.
This is the default under &quot;video&quot; mode if the bpp
is 24.</p>

<p style="margin-top: 1em">Normally the bits per pixel, B,
is 8, 16, or 32 (or rarely 24), however there is also some
support for B &lt; 8 (e.g. old graphics displays 4 bpp or 1
bpp). In this case you <br>
certainly must supply the masks as well: WxHxB:R/G/B. The
pixels will be padded out to 8 bpp using depth 8 truecolor.
The scheme currently does not work with snap fb <br>
(ask if interested.) B=1 monochrome example:
file:/dev/urandom@128x128x1:1/1/1 Some other like this are
128x128x2:3/3/3 128x128x4:7/7/7</p>

<p style="margin-top: 1em">For B &lt; 8 framebuffers you
can also set the env. var RAWFB_CGA=1 to try a CGA mapping
for B=4 (e.g. linux vga16fb driver.) Note with low bpp
and/or resolution VGA and <br>
VGA16 modes on the Linux console one&rsquo;s attempt to
export them via x11vnc can often be thwarted due to special
color palettes, pixel packings, and even video painting <br>
buffering. OTOH, often experimenting with the RGB masks can
yield something recognizable.</p>

<p style="margin-top: 1em">VIDEO4LINUX: on Linux some
attempt is made to handle video devices (webcams or TV
tuners) automatically. The idea is the WxHxB will be
extracted from the device itself. <br>
So if you do not supply &quot;@WxHxB... parameters x11vnc
will try to determine them. It first tries the v4l API if
that support has been compiled in. Otherwise it will run
<br>
the v4l- info(1) external program if it is available.</p>

<p style="margin-top: 1em">The simplest examples are
&quot;-rawfb video&quot; and &quot;-rawfb video1&quot; which
imply the device file /dev/video and /dev/video1,
respectively. You can also supply the /dev if you <br>
like, e.g. &quot;-rawfb /dev/video0&quot;</p>

<p style="margin-top: 1em">Since the video capture device
framebuffer usually changes continuously (e.g. brightness
fluctuations), you may want to use the -wait, -slow_fb, or
-defer options to lower <br>
the &quot;framerate&quot; to cut down on network VNC
traffic.</p>

<p style="margin-top: 1em">A more sophisticated video
device scheme allows initializing the device&rsquo;s
settings using:</p>

<p style="margin-top: 1em">-rawfb
video:&lt;settings&gt;</p>

<p style="margin-top: 1em">The prefix could also be, as
above, e.g. &quot;video1:&quot; to specify the device file.
The v4l API must be available for this to work. Otherwise,
you will need to try to ini&acirc; <br>
tialize the device with an external program, e.g. xawtv,
spcaview, and hope they persist when x11vnc re-opens the
device.</p>

<p style="margin-top: 1em">&lt;settings&gt; is a comma
separated list of key=value pairs. The device&rsquo;s
brightness, color, contrast, and hue can be set to
percentages, e.g. br=80,co=50,cn=44,hu=60.</p>

<p style="margin-top: 1em">The device filename can be set
too if needed (if it does not start with &quot;video&quot;),
e.g. fn=/dev/qcam.</p>

<p style="margin-top: 1em">The width, height and bpp of the
framebuffer can be set via, e.g., w=160,h=120,bpp=16.</p>

<p style="margin-top: 1em">Related to the bpp above, the
pixel format can be set via the fmt=XXX, where XXX can be
one of: GREY, HI240, RGB555, RGB565, RGB24, and RGB32 (with
bpp 8, 8, 16, 16, 24, <br>
and 32 respectively). See http://www.linuxtv.org for more
info (V4L api).</p>

<p style="margin-top: 1em">For TV/rf tuner cards one can
set the tuning mode via tun=XXX where XXX can be one of PAL,
NTSC, SECAM, or AUTO.</p>

<p style="margin-top: 1em">One can switch the input channel
by the inp=XXX setting, where XXX is the name of the input
channel (Television, Composite1, S-Video, etc). Use the name
that is in the <br>
information about the device that is printed at startup.</p>

<p style="margin-top: 1em">For input channels with tuners
(e.g. Television) one can change which station is selected
by the sta=XXX setting. XXX is the station number. Currently
only the ntsc- <br>
cable-us (US cable) channels are built into x11vnc. See the
-freqtab option below to supply one from xawtv. If XXX is
greater than 500, then it is interpreted as a raw <br>
frequency in KHz.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">-rawfb
video:br=80,w=320,h=240,fmt=RGB32,tun=NTSC,sta=47</p>

<p style="margin-top: 1em">one might need to add
inp=Television too for the input channel to be TV if the
card doesn&rsquo;t come up by default in that one.</p>

<p style="margin-top: 1em">Note that not all video capture
devices will support all of the above settings.</p>

<p style="margin-top: 1em">See the -pipeinput VID option
below for a way to control the settings through the VNC
Viewer via keystrokes. As a shortcut, if the string begins
&quot;Video..&quot; instead of <br>
&quot;video..&quot; then -pipeinput VID is implied.</p>

<p style="margin-top: 1em">As above, if you specify a
&quot;@WxHxB...&quot; after the &lt;settings&gt; string they
are used verbatim: the device is not queried for the current
values. Otherwise the device will be <br>
queried.</p>

<p style="margin-top: 1em">LINUX CONSOLE: The following
describes some ways to view and possibly interact with the
Linux text/graphics console (i.e. not X11 XFree86/Xorg)</p>

<p style="margin-top: 1em">Note: If the LibVNCServer
LinuxVNC program is on your system you may want to use that
instead of the following method because it will be faster
and more accurate for the <br>
Linux text console and includes mouse support. There is,
however, the basic LinuxVNC functionality in x11vnc if you
replace &quot;console&quot; with &quot;vt&quot; in the
examples below.</p>

<p style="margin-top: 1em">If the rawfb string begins with
&quot;console&quot; the framebuffer device /dev/fb0 is
opened and /dev/tty0 is opened too. The latter is used to
inject keystrokes (not all are sup&acirc; <br>
ported, but the basic ones are). You will need to be root to
inject keystrokes, but not necessarily to open /dev/fb0.
/dev/tty0 refers to the active VT, to indicate one <br>
explicitly, use, e.g., &quot;console2&quot; for /dev/tty2,
etc. by indicating the specific VT number.</p>

<p style="margin-top: 1em">For the Linux framebuffer
device, /dev/fb0, (fb1, etc) to be enabled the appropriate
kernel drivers must be loaded. E.g. vesafb or vga16fb and
also by setting the boot <br>
parameter vga=0x301 (or 0x314, 0x317, etc.) (The vga=...
method is the preferred way; set your machines up that way.)
Otherwise there will be a &Acirc;&acute;No such
device&rsquo; error. <br>
You can also load a Linux framebuffer driver specific to
your make of video card for more functionality. Once the
machine is booted one can often &rsquo;modprobe&rsquo; the
fb driver <br>
as root to obtain a framebuffer device.</p>

<p style="margin-top: 1em">If you cannot get /dev/fb0
working on Linux, try using the LinuxVNC emulation mode by
&quot;-rawfb vtN&quot; where N = 1, ... 6 is the Linux
Virtual Terminal (aka virtual console) <br>
you wish to view, e.g. &quot;-rawfb vt2&quot;. Unlike
/dev/fb mode, it need not be the active Virtual Terminal.
Note that this mode can only show text and not graphics.
x11vnc <br>
polls the text in /dev/vcsaN</p>

<p style="margin-top: 1em">Set the env. var.
RAWFB_VCSA_BW=1 to disable colors in the &quot;vtN&quot;
mode (i.e. black and white only.) If you do not prefer the
default 16bpp set RAWFB_VCSA_BPP to 8 or 32. <br>
If you need to tweak the rawfb parameters by using the
&rsquo;console_guess&rsquo; string printed at startup, be
sure to indicate the snap: method.</p>

<p style="margin-top: 1em">uinput: If the Linux version
appears to be 2.6 or later and the &quot;uinput&quot; module
appears to be present (modprobe uinput), then the uinput
method will be used instead of <br>
/dev/ttyN. uinput allows insertion of BOTH keystrokes and
mouse input and so it preferred when accessing graphical
(e.g. QT-embedded) linux console apps. It also pro&acirc;
<br>
vides more accurate keystroke insertion. See -pipeinput
UINPUT below for more information on this mode; you will
have to use -pipeinput if you want to tweak any UINPUT <br>
parameters. You may also want to also use the -nodragging
and -cursor none options. Use &quot;console0&quot;, etc or
-pipeinput CONSOLE to force the /dev/ttyN method.</p>

<p style="margin-top: 1em">Note you can change the Linux VT
remotely using the chvt(1) command to make the one you want
be the active one (e.g. &rsquo;chvt 3&rsquo;). Sometimes
switching out and back corrects <br>
the framebuffer&rsquo;s graphics state. For the &quot;-rawfb
vtN&quot; mode there is no need to switch the
VT&rsquo;s.</p>

<p style="margin-top: 1em">To skip input injecting entirely
use &quot;consolex&quot; or &quot;vtx&quot;.</p>

<p style="margin-top: 1em">The string &quot;/dev/fb0&quot;
(1, etc.) can be used instead of &quot;console&quot;. This
can be used to specify a different framebuffer device, e.g.
/dev/fb1. As a shortcut the &quot;/dev/&quot; <br>
can be dropped. If the name is something nonstandard, use
&quot;console:/dev/foofb&quot;</p>

<p style="margin-top: 1em">If you do not want x11vnc to
guess the framebuffer&rsquo;s WxHxB and masks automatically
(sometimes the kernel gives incorrect information), specify
them with a @WxHxB (and <br>
optional :R/G/B masks) at the end of the string.</p>

<p style="margin-top: 1em">Examples: -rawfb console -rawfb
/dev/fb0 (same) -rawfb console3 (force /dev/tty3) -rawfb
consolex (no keystrokes or mouse) -rawfb con&acirc; <br>
sole:/dev/nonstd -rawfb console -pipeinput UINPUT:accel=4.0
-rawfb vt3 (/dev/tty3 w/o /dev/fb0)</p>

<p style="margin-top: 1em">VNC HOST: if the -rawfb string
is of the form &quot;vnc:host:N&quot; then the VNC display
&quot;N&quot; on the remote VNC server &quot;host&quot; is
connected to (i.e. x11vnc acts as a VNC client <br>
itself) and that framebuffer is exported. This is the same
as the option &quot;-reflect host:N&quot;.</p>

<p style="margin-top: 1em">This mode is really only of use
if you are trying to improve performance in the case of many
(e.g. &gt;10) simultaneous VNC viewers, and you try a divide
and conquer scheme <br>
to reduce bandwidth and improve responsiveness. However,
another user found this mode useful to export a demo display
through a slow link: then multiple demo viewers con&acirc;
<br>
nected to the reflecting x11vnc on the fast side of the
link, and so avoided all of the demo viewers going through
the slow link. Other users have found this mode useful <br>
to be able to take advantage of some of x11vnc&rsquo;s many
features that other VNC servers do not have, for example SSL
encryption, single port http and https, unix usernames <br>
and passwords, and -allow, -zeroconf, -clip, and -scale
options and others.</p>

<p style="margin-top: 1em">For the classroom broadcast
example, if there will be 64 simultaneous VNC viewers this
can lead to a lot of redundant VNC traffic to and from the
server host:N, extra CPU <br>
usage, and all viewers response can be reduced by having to
wait for writes to the slowest client to finish. However, if
you set up 8 reflectors/repeaters started with <br>
option -rawfb vnc:host:N, then there are only 8 connections
to host:N. Each repeater then handles 8 vnc viewer
connections thereby spreading the load around. In
class&acirc; <br>
room broadcast usage, try to put the repeaters on different
switches. This mode is the same as -reflect host:N. Replace
&quot;host:N&quot; by &quot;listen&quot; or
&quot;listen:port&quot; for a <br>
reverse connection. Use &quot;listennofork:port&quot; to use
the LibVNCServer non forking client listen interface (if
your LibVNCServer has it), same as setting <br>
X11VNC_REFLECT_NO_FORK=1.</p>

<p style="margin-top: 1em">Overall performance will not be
as good as a single direct connection because, among other
things, there is an additional level of framebuffer polling
and pointer motion <br>
can still induce many changes per second that must be
propagated. Tip: if the remote VNC is x11vnc doing
wireframing, or an X display that does wireframing that
gives <br>
much better response than opaque window dragging. Consider
the -nodragging option if the problem is severe.</p>

<p style="margin-top: 1em">The env. var.
X11VNC_REFLECT_PASSWORD can be set to the password needed to
log into the vnc host server, or to
&quot;file:path_to_file&quot; to indicate a file containing
the pass&acirc; <br>
word as its first line.</p>

<p style="margin-top: 1em">To set the pixel format that
x11vnc requests as a VNC CLIENT set the env. vars:
X11VNC_REFLECT_bitsPerSample X11VNC_REFLECT_samplesPerPixel,
and X11VNC_REFLECT_bytesPer&acirc; <br>
Pixel; the defaults are 8, 3, 4. 2, 3, 1 would give a low
color mode. See the function rfbGetClient() in libvncclient
for more info.</p>

<p style="margin-top: 1em">The VNC HOST mode implies
-shared. Use -noshared as a subsequent cmdline option to
disable sharing.</p>

<p style="margin-top: 1em">-freqtab file</p>

<p style="margin-top: 1em">For use with &quot;-rawfb
video&quot; for TV tuner devices to specify station
frequencies. Instead of using the built in ntsc-cable-us
mapping of station number to frequency, use <br>
the data in file. For stations that are not numeric, e.g.
SE20, they are placed above the highest numbered station in
the order they are found. Example: &quot;-freqtab <br>
/usr/X11R6/share/xawtv/europe-west.list&quot; You can make
your own freqtab by copying the xawtv format.</p>

<p style="margin-top: 1em">-pipeinput cmd</p>

<p style="margin-top: 1em">This option lets you supply an
external command in cmd that x11vnc will pipe all of the
user input events to in a simple format. In -pipeinput mode
by default x11vnc will <br>
not process any of the user input events. If you prefix cmd
with &quot;tee:&quot; it will both send them to the pipe
command and process them. For a description of the format
run <br>
&quot;-pipeinput tee:/bin/cat&quot;. Another prefix is
&quot;reopen&quot; which means to reopen pipe if it exits.
Separate multiple prefixes with commas.</p>

<p style="margin-top: 1em">In combination with -rawfb one
might be able to do amusing things (e.g. control non-X
devices). To facilitate this, if -rawfb is in effect then
the value is stored in <br>
X11VNC_RAWFB_STR for the pipe command to use if it wants. Do
&rsquo;env | grep X11VNC&rsquo; for more.</p>

<p style="margin-top: 1em">Built-in pipeinput modes (no
external program required):</p>

<p style="margin-top: 1em">If cmd is &quot;VID&quot; and
you are using the -rawfb for a video capture device, then an
internal list of keyboard mappings is used to set parameters
of the video. The mappings <br>
are:</p>

<p style="margin-top: 1em">&quot;B&quot; and &quot;b&quot;
adjust the brightness up and down. &quot;H&quot; and
&quot;h&quot; adjust the hue. &quot;C&quot; and
&quot;c&quot; adjust the colour. &quot;N&quot; and
&quot;n&quot; adjust the contrast. &quot;S&quot; and
&quot;s&quot; adjust the size <br>
of the capture screen. &quot;I&quot; and &quot;i&quot; cycle
through input channels. Up and Down arrows adjust the
station (if a tuner) F1, F2, ..., F6 will switch the video
capture pixel <br>
format to HI240, RGB565, RGB24, RGB32, RGB555, and GREY
respectively. See -rawfb video for details.</p>

<p style="margin-top: 1em">If cmd is &quot;CONSOLE&quot; or
&quot;CONSOLEn&quot; where n is a Linux console number, then
the linux console keystroke insertion to /dev/ttyN (see
-rawfb console) is performed.</p>

<p style="margin-top: 1em">If cmd begins with
&quot;UINPUT&quot; then the Linux uinput module is used to
insert both keystroke and mouse events to the Linux console
(see -rawfb above). This usually is the <br>
/dev/input/uinput device file (you may need to create it
with &quot;mknod /dev/input/uinput c 10 223&quot; and insert
the module with &quot;modprobe uinput&quot;.</p>

<p style="margin-top: 1em">The UINPUT mode currently only
does US keyboards (a scan code option may be added), and not
all keysyms are supported. But it is probably more accurate
than the &quot;CONSOLE&quot; <br>
method.</p>

<p style="margin-top: 1em">You may want to use the options
-cursor none and -nodragging in this mode.</p>

<p style="margin-top: 1em">Additional tuning options may be
supplied via: UINPUT:opt1,opt2,... (a comma separated list).
If an option begins with &quot;/&quot; it is taken as the
uinput device file.</p>

<p style="margin-top: 1em">Which uinput is injected can be
controlled by an option string made of the characters
&quot;K&quot;, &quot;M&quot;, and &quot;B&quot; (see the
-input option), e.g. &quot;KM&quot; allows keystroke and
motion but <br>
not button clicks.</p>

<p style="margin-top: 1em">A UINPUT option of the form:
accel=f, or accel=fx+fy sets the mouse motion
&quot;acceleration&quot;. This is used to correct raw mouse
relative motion into how much the application <br>
cursor moves (x11vnc has no control over, or knowledge of
how the windowing application interprets the raw mouse
motions). Typically the acceleration for an X display is
<br>
2 (see xset &quot;m&quot; option). &quot;f&quot; is a
floating point number, e.g. 3.0. Use &quot;fx+fy&quot; if
you need to supply different corrections for x and y.</p>

<p style="margin-top: 1em">Note: the default acceleration
is 2.0 since it seems both X and qt-embedded often (but not
always) use this value.</p>

<p style="margin-top: 1em">Even with a correct accel
setting the mouse position will get out of sync (probably
due to a mouse &quot;threshold&quot; setting where the
acceleration doe not apply, set xset(1) ). <br>
The option reset=N sets the number of ms (default 150) after
which the cursor is attempted to be reset (by forcing the
mouse to (0, 0) via small increments and then back <br>
out to (x, y) in 1 jump), This correction seems to be needed
but can cause jerkiness or unexpected behavior with menus,
etc. Use reset=0 to disable.</p>

<p style="margin-top: 1em">If you set the env. var
X11VNC_UINPUT_THRESHOLDS then the thresh=n mode will be
enabled. It is currently not working well. If |dx| &lt;=
thresh and |dy| &lt; thresh no accel&acirc; <br>
eration is applied. Use &quot;thresh=+n&quot; |dx| + |dy|
&lt; thresh to be used instead (X11?)</p>

<p style="margin-top: 1em">Example: -pipeinput
UINPUT:accel=4.0 -cursor none</p>

<p style="margin-top: 1em">If the uinput device has an
absolute pointer (as opposed to a normal mouse that is a
relative pointer) you can specify the option
&quot;abs&quot;. Note that a touchpad on a laptop <br>
is an absolute device to some degree. This (usually) avoids
all the problems with mouse acceleration. If x11vnc has
trouble deducing the size of the device, use <br>
&quot;abs=WxH&quot;. Furthermore, if the device is a
touchscreen (assumed to have an absolute pointer) use
&quot;touch&quot; or &quot;touch=WxH&quot;. For
touchscreens, when a mouse button is <br>
pressed, a pressure increase is injected, and when the
button is released a pressure of zero is injected.</p>

<p style="margin-top: 1em">If touch has been set, use
&quot;touch_always=1&quot; to indicate whenever the mouse
moves with no button pressed, a touch event of zero pressure
should be sent anyway. Also use <br>
&quot;btn_touch=1&quot; to indicate a BTN_TOUCH keystroke
press or release should be sent instead of a pressure
change. Set &quot;dragskip=n&quot; to skip n dragged mouse
touches (with pres&acirc; <br>
sure applied) before injecting one. To indicate the pressure
that should be sent when there is a button click for a
touchscreen device, specify pressure=n, e.g. n=5. The <br>
default is n=1.</p>

<p style="margin-top: 1em">If a touch screen is being used
(&quot;touch&quot; above) and it is having its input
processed by tslib, you can specify the tslib calibration
file via tslib_cal=&lt;file&gt;. For exam&acirc; <br>
ple, tslib_cal=/etc/pointercal. To get accurate or even
usable positioning this is required when tslib is in
use.</p>

<p style="margin-top: 1em">The Linux uinput mechanism can
be bypassed and one can write input events DIRECTLY to the
devices instead. To do this, specify one or more of the
following for the input <br>
classes: direct_rel=&lt;device&gt; direct_abs=&lt;device&gt;
direct_btn=&lt;device&gt; or direct_key=&lt;device&gt;. The
&lt;device&gt; file is usually something like
/dev/input/event1 but you can <br>
specify any device file or pipe. You must specify each one
of the above classes even if they correspond to the same
device file (rel/abs and btn are often the same.) <br>
Look at the file /proc/bus/input/devices to get an idea what
is available and the device filenames. Note: The
/dev/input/mouse* devices do not seem to work, use the
cor&acirc; <br>
responding /dev/input/event* file instead. Any input class
not directly specified as above will be handled via the
uinput mechanism. To disable creating a uinput device <br>
(and thereby discarding unhandled input), specify
&quot;nouinput&quot;.</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">-pipeinput
UINPUT:direct_abs=/dev/input/event1</p>

<p style="margin-top: 1em">this was used on a qtmoko Neo
freerunner (armel):</p>

<p style="margin-top: 1em">-pipeinput
UINPUT:touch,tslib_cal=/etc/pointercal,
direct_abs=/dev/input/event1,nouinput,dragskip=4</p>

<p style="margin-top: 1em">(where the long line has been
split into two.)</p>

<p style="margin-top: 1em">You can set the env. var
X11VNC_UINPUT_DEBUG=1 or higher to get debugging output for
UINPUT mode.</p>

<p style="margin-top: 1em">-macnodim</p>

<p style="margin-top: 1em">For the native MacOSX server,
disable dimming.</p>

<p style="margin-top: 1em">-macnosleep</p>

<p style="margin-top: 1em">For the native MacOSX server,
disable display sleep.</p>

<p style="margin-top: 1em">-macnosaver</p>

<p style="margin-top: 1em">For the native MacOSX server,
disable screensaver.</p>

<p style="margin-top: 1em">-macnowait</p>

<p style="margin-top: 1em">For the native MacOSX server, do
not wait for the user to switch back to his display.</p>

<p style="margin-top: 1em">-macwheel n</p>

<p style="margin-top: 1em">For the native MacOSX server,
set the mouse wheel speed to n (default 5).</p>

<p style="margin-top: 1em">-macnoswap</p>

<p style="margin-top: 1em">For the native MacOSX server, do
not swap mouse buttons 2 and 3.</p>

<p style="margin-top: 1em">-macnoresize</p>

<p style="margin-top: 1em">For the native MacOSX server, do
not resize or reset the framebuffer even if it is detected
that the screen resolution or depth has changed.</p>

<p style="margin-top: 1em">-maciconanim n</p>

<p style="margin-top: 1em">For the native MacOSX server,
set n to the number of milliseconds that the window
iconify/deiconify animation takes. In -ncache mode this
value will be used to skip the <br>
animation if possible. (default 400)</p>

<p style="margin-top: 1em">-macmenu</p>

<p style="margin-top: 1em">For the native MacOSX server, in
-ncache client-side caching mode, try to cache pull down
menus (not perfect because they have animated fades,
etc.)</p>

<p style="margin-top: 1em">-macuskbd</p>

<p style="margin-top: 1em">For the native MacOSX server,
use the original keystroke insertion code based on a US
keyboard.</p>

<p style="margin-top: 1em">-macnocglion</p>

<p style="margin-top: 1em">For the native MacOSX server, do
not use CG interfaces added for MacOSX Lion for screen
capture.</p>

<p style="margin-top: 1em">-macnoopengl</p>

<p style="margin-top: 1em">For the native MacOSX server, do
not use OpenGL for screen capture.</p>

<p style="margin-top: 1em">-macnorawfb</p>

<p style="margin-top: 1em">For the native MacOSX server,
disable the raw memory address screen capture method.</p>

<p style="margin-top: 1em">-macdisplay n</p>

<p style="margin-top: 1em">For the native MacOSX server,
use display &rsquo;n&rsquo; as the screen to export. A
macosx display is a distinct monitor or builtin screen. The
main display is always n=0 and is <br>
the default screen to export. For an extra attached monitor
use n=1, etc. A list of all Available Displays is printed
out at startup so that you can find the n you want. <br>
Notes: Currently there seem to be refresh problems with
anything but the main display. Not all of the pointer
behavior is correct in the non-main displays. Usually only
<br>
the main display has the menu bar (so you may need to run a
more than one x11vnc for complete control of an
application.)</p>

<p style="margin-top: 1em">MORE MACOSX NOTES: There are
some deprecated MacOSX interfaces to inject keyboard and
mouse events and the raw memory access method is deprecated
as well (however, OpenGL <br>
will be preferred if available because it is faster.) One
can force not using any deprecated interfaces at compile
time by setting -DX11VNC_MACOSX_NO_DEPRECATED=1 in <br>
CPPFLAGS. Or to turn them off one by one:
-DX11VNC_MACOSX_NO_DEPRECATED_LOCALEVENTS=1,
-DX11VNC_MACOSX_NO_DEPRECATED_POSTEVENTS=1 or
-DX11VNC_MACOSX_NO_DEPRECATED_FRAME&acirc; <br>
BUFFER=1 At run time, for testing and workarounds, one can
disable them by using: -env X11VNC_MACOSX_NO_DEPRECATED=1
-env X11VNC_MACOSX_NO_DEPRECATED_LOCALEVENTS=1 -env <br>
X11VNC_MACOSX_NO_DEPRECATED_POSTEVENTS=1 or -env
X11VNC_MACOSX_NO_DEPRECATED_FRAMEBUFFER=1 Note: When doing
either of these for the mouse input not everything works
cur&acirc; <br>
rently, e.g. double clicks and wireframing. Also, screen
resolution and pixel depth changes will not be automatically
detected unless the deprecated framebuffer inter&acirc; <br>
faces are allowed.</p>

<p style="margin-top: 1em">Conversely, if you are compiling
on an older machine that does not have some of the newer
interfaces, you may need to specify
-DX11VNC_MACOSX_NO_CGEVENTCREATESCROLL&acirc; <br>
WHEELEVENT -DX11VNC_MACOSX_NO_CGEVENTCREATEMOUSEEVENT or
-DX11VNC_MACOSX_NO_CGEVENTCREATEKEYBOARDEVENT. Use
-DX11VNC_MACOSX_USE_GETMAINDEVICE to regain the very old
<br>
QuickDraw GetMainDevice() interface (rare...) End of MACOSX
NOTES.</p>

<p style="margin-top: 1em">-gui [gui-opts]</p>

<p style="margin-top: 1em">Start up a simple tcl/tk gui
based on the remote control options -remote/-query described
below. Requires the &quot;wish&quot; program to be installed
on the machine. &quot;gui-opts&quot; <br>
is not required: the default is to start up both the full
gui and x11vnc with the gui showing up on the X display in
the environment variable DISPLAY.</p>

<p style="margin-top: 1em">&quot;gui-opts&quot; can be a
comma separated list of items. Currently there are these
types of items: 1) a gui mode, a 2) gui
&quot;simplicity&quot;, 3) the X display the gui should
display <br>
on, 4) a &quot;tray&quot; or &quot;icon&quot; mode, and 5) a
gui geometry.</p>

<p style="margin-top: 1em">1) The gui mode can be
&quot;start&quot;, &quot;conn&quot;, or &quot;wait&quot;
&quot;start&quot; is the default mode above and is not
required. &quot;conn&quot; means do not automatically start
up x11vnc, but instead <br>
just try to connect to an existing x11vnc process.
&quot;wait&quot; means just start the gui and nothing else
(you will later instruct the gui to start x11vnc or connect
to an <br>
existing one.)</p>

<p style="margin-top: 1em">2) The gui simplicity is off by
default (a power-user gui with all options is presented) To
start with something less daunting supply the string
&quot;simple&quot; (&quot;ez&quot; is an alias <br>
for this). Once the gui is started you can toggle between
the two with &quot;Misc -&gt; simple_gui&quot;.</p>

<p style="margin-top: 1em">3) Note the possible confusion
regarding the potentially two different X displays: x11vnc
polls one, but you may want the gui to appear on another.
For example, if you <br>
ssh in and x11vnc is not running yet you may want the gui to
come back to you via your ssh redirected X display (e.g.
localhost:10).</p>

<p style="margin-top: 1em">If you do not specify a gui X
display in &quot;gui-opts&quot; then the DISPLAY environment
variable and -display option are tried (in that order).
Regarding the x11vnc X display <br>
the gui will try to communication with, it first tries
-display and then DISPLAY. For example, &quot;x11vnc
-display :0 -gui otherhost:0&quot;, will remote control an
x11vnc <br>
polling :0 and display the gui on otherhost:0 The
&quot;tray/icon&quot; mode below reverses this preference,
preferring to display on the x11vnc display.</p>

<p style="margin-top: 1em">4) When &quot;tray&quot; or
&quot;icon&quot; is specified, the gui presents itself as a
small icon with behavior typical of a &quot;system
tray&quot; or &quot;dock applet&quot;. The color of the icon
indicates <br>
status (connected clients) and there is also a balloon
status. Clicking on the icon gives a menu from which
properties, etc, can be set and the full gui is available
<br>
under &quot;Advanced&quot;. To be fully functional, the gui
mode should be &quot;start&quot; (the default).</p>

<p style="margin-top: 1em">Note that tray or icon mode will
imply the -forever x11vnc option (if the x11vnc server is
started along with the gui) unless -connect or
-connect_or_exit has been speci&acirc; <br>
fied. So x11vnc (and the tray/icon gui) will wait for more
connections after the first client disconnects. If you want
only one viewer connection include the -once <br>
option.</p>

<p style="margin-top: 1em">For &quot;icon&quot; the gui
just a small standalone window. For &quot;tray&quot; it will
attempt to embed itself in the &quot;system tray&quot; if
possible. If &quot;=setpass&quot; is appended then at
startup <br>
the X11 user will be prompted to set the VNC session
password. If =&lt;hexnumber&gt; is appended that icon will
attempt to embed itself in the window given by hexnumber.
Use <br>
=noadvanced to disable the full gui. (To supply more than
one, use &quot;+&quot; sign). E.g. -gui tray=setpass and
-gui icon=0x3600028</p>

<p style="margin-top: 1em">Other modes: &quot;full&quot;,
the default and need not be specified. &quot;-gui
none&quot;, do not show a gui, useful to override a
~/.x11vncrc setting, etc.</p>

<p style="margin-top: 1em">5) When &quot;geom=+X+Y&quot; is
specified, that geometry is passed to the gui toplevel. This
is the icon in icon/tray mode, or the full gui otherwise.
You can also specify width <br>
and height, i.e. WxH+X+Y, but it is not recommended. In
&quot;tray&quot; mode the geometry is ignored unless the
system tray manager does not seem to be running. One could
imagine <br>
using something like &quot;-gui tray,geom=+4000+4000&quot;
with a display manager to keep the gui invisible until
someone logs in...</p>

<p style="margin-top: 1em">More icon tricks,
&quot;icon=minimal&quot; gives an icon just with the VNC
display number. You can also set the font with
&quot;iconfont=...&quot;. The following could be useful:
&quot;-gui <br>
icon=minimal,iconfont=5x8,geom=24x10+0-0&quot;</p>

<p style="margin-top: 1em">General examples of the -gui
option: &quot;x11vnc -gui&quot;, &quot;x11vnc -gui ez&quot;
&quot;x11vnc -gui localhost:10&quot;, &quot;x11vnc -gui
conn,host:0&quot;, &quot;x11vnc -gui tray,ez&quot;
&quot;x11vnc -gui tray=set&acirc; <br>
pass&quot;</p>

<p style="margin-top: 1em">If you do not intend to start
x11vnc from the gui (i.e. just remote control an existing
one), then the gui process can run on a different machine
from the x11vnc server as <br>
long as X permissions, etc. permit communication between the
two.</p>

<p style="margin-top: 1em">FONTS: On some systems the tk
fonts can be too small, jagged, or otherwise unreadable.
There are 4 env vars you can set to be the tk font you
prefer:</p>

<p style="margin-top: 1em">X11VNC_FONT_BOLD main font for
menus and buttons. X11VNC_FONT_FIXED font for fixed width
text.</p>

<p style="margin-top: 1em">X11VNC_FONT_BOLD_SMALL tray icon
font. X11VNC_FONT_REG_SMALL tray icon menu font.</p>

<p style="margin-top: 1em">The last two only apply for the
tray icon mode.</p>

<p style="margin-top: 1em">Here are some examples:</p>

<p style="margin-top: 1em">-env
X11VNC_FONT_BOLD=&rsquo;Helvetica -16 bold&rsquo; -env
X11VNC_FONT_FIXED=&rsquo;Courier -14&rsquo; -env
X11VNC_FONT_REG_SMALL=&rsquo;Helvetica -12&rsquo;</p>

<p style="margin-top: 1em">You can put the lines like the
above (without the quotes) in your ~/.x11vncrc file to avoid
having to specify them on the x11vnc command line.</p>

<p style="margin-top: 1em">Sometimes there are problems
when the gui asks x11vnc to use the identd (port 113)
service to try to get the names of attached users. To
disable trying to connect to the <br>
viewer machines to identify the user&rsquo;s names, set -env
X11VNC_NO_IDENT_USERNAME=1</p>

<p style="margin-top: 1em">-remote command</p>

<p style="margin-top: 1em">Remotely control some aspects of
an already running x11vnc server. &quot;-R&quot; and
&quot;-r&quot; are aliases for &quot;-remote&quot;. After
the remote control command is sent to the running <br>
server the &rsquo;x11vnc -remote ...&rsquo; x11vnc command
exits. You can often use the -query command (see below) to
see if the x11vnc server processed your -remote command.</p>

<p style="margin-top: 1em">The default communication
channel is that of X properties (specifically
X11VNC_REMOTE), and so this command must be run with correct
settings for DISPLAY and possibly XAU&acirc; <br>
THORITY to connect to the X server and set the property.
Alternatively, use the -display and -auth options to set
them to the correct values. The running server cannot <br>
use the -novncconnect option because that disables the
communication channel. See below for alternate channels.</p>

<p style="margin-top: 1em">For example: &rsquo;x11vnc
-remote stop&rsquo; (which is the same as
&Acirc;&acute;x11vnc -R stop&rsquo;) will close down the
x11vnc server. &Acirc;&acute;x11vnc -R shared&rsquo; will
enable shared connections, and <br>
&Acirc;&acute;x11vnc -R scale:3/4&rsquo; will rescale the
desktop.</p>

<p style="margin-top: 1em">To use a different name for the
X11 property (e.g. to have separate communication channels
for multiple x11vnc&rsquo;s on the same display) set the
X11VNC_REMOTE environment <br>
variable to the string you want, for example: -env
X11VNC_REMOTE=X11VNC_REMOTE_12345 Both sides of the channel
must use the same unique name.</p>

<p style="margin-top: 1em">To run a bunch of commands in a
sequence use something like: x11vnc -R
&rsquo;script:firstcmd;secondcmd;...&rsquo;</p>

<p style="margin-top: 1em">Use x11vnc -R
script:file=/path/to/file to read commands from a file (can
be multi-line and use the comment &rsquo;#&rsquo; character
in the normal way. The &rsquo;;&rsquo; separator must still
<br>
be used to separate each command.)</p>

<p style="margin-top: 1em">To not try to contact another
x11vnc process and instead just run the command (or query)
directly, prefix the command with the string
&quot;DIRECT:&quot;</p>

<p style="margin-top: 1em">The following -remote/-R
commands are supported:</p>

<p style="margin-top: 1em">stop terminate the server, same
as &quot;quit&quot; &quot;exit&quot; or
&quot;shutdown&quot;.</p>

<p style="margin-top: 1em">ping see if the x11vnc server
responds. return is: ans=ping:&lt;display&gt;</p>

<p style="margin-top: 1em">ping:mystring as above, but use
your own unique string. return is:
ans=ping:mystring:&lt;xdisplay&gt;</p>

<p style="margin-top: 1em">blacken try to push a black fb
update to all clients (due to timings a client could miss
it). Same as &quot;zero&quot;, also
&quot;zero:x1,y1,x2,y2&quot; for a rectangle.</p>

<p style="margin-top: 1em">refresh send the entire fb to
all clients.</p>

<p style="margin-top: 1em">reset recreate the fb, polling
memory, etc.</p>

<p style="margin-top: 1em">id:windowid set -id window to
&quot;windowid&quot;. empty or &quot;root&quot; to go back
to root window</p>

<p style="margin-top: 1em">sid:windowid set -sid window to
&quot;windowid&quot;</p>

<p style="margin-top: 1em">id_cmd:cmd cmds: raise, lower,
map, unmap, iconify, move:dXdY, resize:dWdH, geom:WxH+X+Y.
dX dY, dW, and dH must have a leading &quot;+&quot; or
&quot;-&quot; e.g.: move:-30+10 <br>
resize:+20+35 also: wm_delete, wm_name:string and
icon_name:string. Also id_cmd:win=N:cmd</p>

<p style="margin-top: 1em">waitmapped wait until subwin is
mapped.</p>

<p style="margin-top: 1em">nowaitmapped do not wait until
subwin is mapped.</p>

<p style="margin-top: 1em">clip:WxH+X+Y set -clip mode to
&quot;WxH+X+Y&quot;</p>

<p style="margin-top: 1em">flashcmap enable -flashcmap
mode.</p>

<p style="margin-top: 1em">noflashcmap disable -flashcmap
mode.</p>

<p style="margin-top: 1em">shiftcmap:n set -shiftcmap to
n.</p>

<p style="margin-top: 1em">notruecolor enable -notruecolor
mode.</p>

<p style="margin-top: 1em">truecolor disable -notruecolor
mode.</p>

<p style="margin-top: 1em">overlay enable -overlay mode (if
applicable).</p>

<p style="margin-top: 1em">nooverlay disable -overlay
mode.</p>

<p style="margin-top: 1em">overlay_cursor in -overlay mode,
enable cursor drawing.</p>

<p style="margin-top: 1em">overlay_nocursor disable cursor
drawing. same as nooverlay_cursor.</p>

<p style="margin-top: 1em">8to24 enable -8to24 mode (if
applicable).</p>

<p style="margin-top: 1em">no8to24 disable -8to24 mode.</p>

<p style="margin-top: 1em">8to24_opts:str set the -8to24
opts to &quot;str&quot;.</p>

<p style="margin-top: 1em">24to32 enable -24to32 mode (if
applicable).</p>

<p style="margin-top: 1em">no24to32 disable -24to32
mode.</p>

<p style="margin-top: 1em">visual:vis set -visual to
&quot;vis&quot;</p>

<p style="margin-top: 1em">scale:frac set -scale to
&quot;frac&quot;</p>

<p style="margin-top: 1em">scale_cursor:f set -scale_cursor
to &quot;f&quot;</p>

<p style="margin-top: 1em">viewonly enable -viewonly
mode.</p>

<p style="margin-top: 1em">noviewonly disable -viewonly
mode.</p>

<p style="margin-top: 1em">shared enable -shared mode.</p>

<p style="margin-top: 1em">noshared disable -shared
mode.</p>

<p style="margin-top: 1em">forever enable -forever
mode.</p>

<p style="margin-top: 1em">noforever disable -forever
mode.</p>

<p style="margin-top: 1em">timeout:n reset -timeout to n,
if there are currently no clients, exit unless one connects
in the next n secs.</p>

<p style="margin-top: 1em">tightfilexfer enable
filetransfer for NEW clients.</p>

<p style="margin-top: 1em">notightfilexfer disable
filetransfer for NEW clients.</p>

<p style="margin-top: 1em">ultrafilexfer enable
filetransfer for clients.</p>

<p style="margin-top: 1em">noultrafilexfer disable
filetransfer for clients.</p>

<p style="margin-top: 1em">rfbversion:n.m set -rfbversion
for new clients.</p>

<p style="margin-top: 1em">http enable http client
connections.</p>

<p style="margin-top: 1em">nohttp disable http client
connections.</p>

<p style="margin-top: 1em">deny deny any new connections,
same as &quot;lock&quot;</p>

<p style="margin-top: 1em">nodeny allow new connections,
same as &quot;unlock&quot;</p>

<p style="margin-top: 1em">avahi enable avahi service
advertising.</p>

<p style="margin-top: 1em">noavahi disable avahi service
advertising.</p>

<p style="margin-top: 1em">mdns enable avahi service
advertising.</p>

<p style="margin-top: 1em">nomdns disable avahi service
advertising.</p>

<p style="margin-top: 1em">zeroconf enable avahi service
advertising.</p>

<p style="margin-top: 1em">nozeroconf disable avahi service
advertising.</p>

<p style="margin-top: 1em">connect:host do reverse
connection to host, &quot;host&quot; may be a comma
separated list of hosts or host:ports. See -connect.
Passwords required as with fwd connections. <br>
See X11VNC_REVERSE_CONNECTION_NO_AUTH=1</p>

<p style="margin-top: 1em">disconnect:host disconnect any
clients from &quot;host&quot; same as
&quot;close:host&quot;. Use host &quot;all&quot; to close
all current clients. If you know the client internal hex ID,
e.g. 0x3 <br>
(returned by &quot;-query clients&quot; and RFB_CLIENT_ID)
you can use that too.</p>

<p style="margin-top: 1em">proxy:host:port set reverse
connection proxy (empty to disable).</p>

<p style="margin-top: 1em">allowonce:host For the next
connection only, allow connection from &quot;host&quot;. In
-ssl mode two connections are allowed (i.e. Fetch Cert)
unless X11VNC_NO_SSL_ALLOW_TWICE=1</p>

<p style="margin-top: 1em">allow:hostlist set -allow list
to (comma separated) &quot;hostlist&quot;. See -allow and
-localhost. Do not use with -allow /path/to/file Use
&quot;+host&quot; to add a single host, and use <br>
&quot;-host&quot; to delete a single host</p>

<p style="margin-top: 1em">localhost enable -localhost
mode</p>

<p style="margin-top: 1em">nolocalhost disable -localhost
mode</p>

<p style="margin-top: 1em">listen:str set -listen to str,
empty to disable.</p>

<p style="margin-top: 1em">noipv6 enable -noipv6 mode.</p>

<p style="margin-top: 1em">ipv6 disable -noipv6 mode.</p>

<p style="margin-top: 1em">noipv4 enable -noipv4 mode.</p>

<p style="margin-top: 1em">ipv4 disable -noipv4 mode.</p>

<p style="margin-top: 1em">6 enable -6 IPv6 listening
mode.</p>

<p style="margin-top: 1em">no6 disable -6 IPv6 listening
mode.</p>

<p style="margin-top: 1em">lookup disable -nolookup
mode.</p>

<p style="margin-top: 1em">nolookup enable -nolookup
mode.</p>

<p style="margin-top: 1em">lookup disable -nolookup
mode.</p>

<p style="margin-top: 1em">input:str set -input to
&quot;str&quot;, empty to disable.</p>

<p style="margin-top: 1em">grabkbd enable -grabkbd
mode.</p>

<p style="margin-top: 1em">nograbkbd disable -grabkbd
mode.</p>

<p style="margin-top: 1em">grabptr enable -grabptr
mode.</p>

<p style="margin-top: 1em">nograbptr disable -grabptr
mode.</p>

<p style="margin-top: 1em">grabalways enable -grabalways
mode.</p>

<p style="margin-top: 1em">nograbalways disable -grabalways
mode.</p>

<p style="margin-top: 1em">grablocal:n set -grablocal to
n.</p>

<p style="margin-top: 1em">client_input:str set the K, M, B
-input on a per-client basis. select which client as for
disconnect, e.g. client_input:host:MB or
client_input:0x2:K</p>

<p style="margin-top: 1em">accept:cmd set -accept
&quot;cmd&quot; (empty to disable).</p>

<p style="margin-top: 1em">afteraccept:cmd set -afteraccept
(empty to disable).</p>

<p style="margin-top: 1em">gone:cmd set -gone
&quot;cmd&quot; (empty to disable).</p>

<p style="margin-top: 1em">noshm enable -noshm mode.</p>

<p style="margin-top: 1em">shm disable -noshm mode (i.e.
use shm).</p>

<p style="margin-top: 1em">flipbyteorder enable
-flipbyteorder mode, you may need to set noshm for this to
do something.</p>

<p style="margin-top: 1em">noflipbyteorder disable
-flipbyteorder mode.</p>

<p style="margin-top: 1em">onetile enable -onetile mode.
(you may need to set shm for this to do something)</p>

<p style="margin-top: 1em">noonetile disable -onetile
mode.</p>

<p style="margin-top: 1em">solid enable -solid mode</p>

<p style="margin-top: 1em">nosolid disable -solid mode.</p>

<p style="margin-top: 1em">solid_color:color set -solid
color (and apply it).</p>

<p style="margin-top: 1em">blackout:str set -blackout
&quot;str&quot; (empty to disable). See -blackout for the
form of &quot;str&quot; (basically: WxH+X+Y,...) Use
&quot;+WxH+X+Y&quot; to append a single rectangle use <br>
&quot;-WxH+X+Y&quot; to delete one</p>

<p style="margin-top: 1em">xinerama enable -xinerama mode.
(if applicable)</p>

<p style="margin-top: 1em">noxinerama disable -xinerama
mode.</p>

<p style="margin-top: 1em">xtrap enable -xtrap input
mode(if applicable)</p>

<p style="margin-top: 1em">noxtrap disable -xtrap input
mode.</p>

<p style="margin-top: 1em">xrandr enable -xrandr mode. (if
applicable)</p>

<p style="margin-top: 1em">noxrandr disable -xrandr
mode.</p>

<p style="margin-top: 1em">xrandr_mode:mode set the -xrandr
mode to &quot;mode&quot;.</p>

<p style="margin-top: 1em">rotate:mode set the -rotate mode
to &quot;mode&quot;.</p>

<p style="margin-top: 1em">padgeom:WxH set -padgeom to WxH
(empty to disable) If WxH is &quot;force&quot; or
&quot;do&quot; the padded geometry fb is immediately
applied.</p>

<p style="margin-top: 1em">quiet enable -quiet mode.</p>

<p style="margin-top: 1em">noquiet disable -quiet mode.</p>

<p style="margin-top: 1em">modtweak enable -modtweak
mode.</p>

<p style="margin-top: 1em">nomodtweak enable -nomodtweak
mode.</p>

<p style="margin-top: 1em">xkb enable -xkb modtweak
mode.</p>

<p style="margin-top: 1em">noxkb disable -xkb modtweak
mode.</p>

<p style="margin-top: 1em">capslock enable -capslock
mode.</p>

<p style="margin-top: 1em">nocapslock disable -capslock
mode.</p>

<p style="margin-top: 1em">skip_lockkeys enable
-skip_lockkeys mode.</p>

<p style="margin-top: 1em">noskip_lockkeys disable
-skip_lockkeys mode.</p>

<p style="margin-top: 1em">skip_keycodes:str enable -xkb
-skip_keycodes &quot;str&quot;.</p>

<p style="margin-top: 1em">sloppy_keys enable -sloppy_keys
mode.</p>

<p style="margin-top: 1em">nosloppy_keys disable
-sloppy_keys mode.</p>

<p style="margin-top: 1em">skip_dups enable -skip_dups
mode.</p>

<p style="margin-top: 1em">noskip_dups disable -skip_dups
mode.</p>

<p style="margin-top: 1em">add_keysyms enable -add_keysyms
mode.</p>

<p style="margin-top: 1em">noadd_keysyms stop adding
keysyms. those added will still be removed at exit.</p>

<p style="margin-top: 1em">clear_mods enable -clear_mods
mode and clear them.</p>

<p style="margin-top: 1em">noclear_mods disable -clear_mods
mode.</p>

<p style="margin-top: 1em">clear_keys enable -clear_keys
mode and clear them.</p>

<p style="margin-top: 1em">noclear_keys disable -clear_keys
mode.</p>

<p style="margin-top: 1em">clear_locks do the clear_locks
action.</p>

<p style="margin-top: 1em">clear_all do the clear_all
action.</p>

<p style="margin-top: 1em">keystate have x11vnc print
current keystate.</p>

<p style="margin-top: 1em">remap:str set -remap
&quot;str&quot; (empty to disable). See -remap for the form
of &quot;str&quot; (basically: key1-key2,key3-key4,...) Use
&quot;+key1-key2&quot; to append a single keymap&acirc; <br>
ping, use &quot;-key1-key2&quot; to delete.</p>

<p style="margin-top: 1em">norepeat enable -norepeat
mode.</p>

<p style="margin-top: 1em">repeat disable -norepeat
mode.</p>

<p style="margin-top: 1em">nofb enable -nofb mode.</p>

<p style="margin-top: 1em">fb disable -nofb mode.</p>

<p style="margin-top: 1em">bell enable bell (if
supported).</p>

<p style="margin-top: 1em">nobell disable bell.</p>

<p style="margin-top: 1em">sendbell ring the bell now.</p>

<p style="margin-top: 1em">nosel enable -nosel mode.</p>

<p style="margin-top: 1em">sel disable -nosel mode.</p>

<p style="margin-top: 1em">noprimary enable -noprimary
mode.</p>

<p style="margin-top: 1em">primary disable -noprimary
mode.</p>

<p style="margin-top: 1em">nosetprimary enable
-nosetprimary mode.</p>

<p style="margin-top: 1em">setprimary disable -nosetprimary
mode.</p>

<p style="margin-top: 1em">noclipboard enable -noclipboard
mode.</p>

<p style="margin-top: 1em">clipboard disable -noclipboard
mode.</p>

<p style="margin-top: 1em">nosetclipboard enable
-nosetclipboard mode.</p>

<p style="margin-top: 1em">setclipboard disable
-nosetclipboard mode.</p>

<p style="margin-top: 1em">seldir:str set -seldir to
&quot;str&quot;</p>

<p style="margin-top: 1em">resend_cutbuffer resend the most
recent CUTBUFFER0 copy</p>

<p style="margin-top: 1em">resend_clipboard resend the most
recent CLIPBOARD copy</p>

<p style="margin-top: 1em">resend_primary resend the most
recent PRIMARY copy</p>

<p style="margin-top: 1em">cursor:mode enable -cursor
&quot;mode&quot;.</p>

<p style="margin-top: 1em">show_cursor enable showing a
cursor.</p>

<p style="margin-top: 1em">noshow_cursor disable showing a
cursor. (same as &quot;nocursor&quot;)</p>

<p style="margin-top: 1em">cursor_drag enable cursor
changes during drag.</p>

<p style="margin-top: 1em">nocursor_drag disable cursor
changes during drag.</p>

<p style="margin-top: 1em">arrow:n set -arrow to alternate
n.</p>

<p style="margin-top: 1em">xfixes enable xfixes cursor
shape mode.</p>

<p style="margin-top: 1em">noxfixes disable xfixes cursor
shape mode.</p>

<p style="margin-top: 1em">alphacut:n set -alphacut to
n.</p>

<p style="margin-top: 1em">alphafrac:f set -alphafrac to
f.</p>

<p style="margin-top: 1em">alpharemove enable -alpharemove
mode.</p>

<p style="margin-top: 1em">noalpharemove disable
-alpharemove mode.</p>

<p style="margin-top: 1em">alphablend disable -noalphablend
mode.</p>

<p style="margin-top: 1em">noalphablend enable
-noalphablend mode.</p>

<p style="margin-top: 1em">cursorshape disable
-nocursorshape mode.</p>

<p style="margin-top: 1em">nocursorshape enable
-nocursorshape mode.</p>

<p style="margin-top: 1em">cursorpos disable -nocursorpos
mode.</p>

<p style="margin-top: 1em">nocursorpos enable -nocursorpos
mode.</p>

<p style="margin-top: 1em">xwarp enable -xwarppointer
mode.</p>

<p style="margin-top: 1em">noxwarp disable -xwarppointer
mode.</p>

<p style="margin-top: 1em">always_inject enable
-always_inject mode.</p>

<p style="margin-top: 1em">noalways_inject disable
-always_inject mode.</p>

<p style="margin-top: 1em">buttonmap:str set -buttonmap
&quot;str&quot;, empty to disable</p>

<p style="margin-top: 1em">dragging disable -nodragging
mode.</p>

<p style="margin-top: 1em">nodragging enable -nodragging
mode.</p>

<p style="margin-top: 1em">ncache reenable -ncache
mode.</p>

<p style="margin-top: 1em">noncache disable -ncache
mode.</p>

<p style="margin-top: 1em">ncache_size:n set -ncache size
to n.</p>

<p style="margin-top: 1em">ncache_cr enable -ncache_cr
mode.</p>

<p style="margin-top: 1em">noncache_cr disable -ncache_cr
mode.</p>

<p style="margin-top: 1em">ncache_no_moveraise enable
no_moveraise mode.</p>

<p style="margin-top: 1em">noncache_no_moveraise disable
no_moveraise mode.</p>

<p style="margin-top: 1em">ncache_no_dtchange enable
ncache_no_dtchange mode.</p>

<p style="margin-top: 1em">noncache_no_dtchange disable
ncache_no_dtchange mode.</p>

<p style="margin-top: 1em">ncache_old_wm enable
ncache_old_wm mode.</p>

<p style="margin-top: 1em">noncache_old_wm disable
ncache_old_wm mode.</p>

<p style="margin-top: 1em">ncache_no_rootpixmap enable
ncache_no_rootpixmap.</p>

<p style="margin-top: 1em">noncache_no_rootpixmap disable
ncache_no_rootpixmap.</p>

<p style="margin-top: 1em">ncache_reset_rootpixmap recheck
the root pixmap, ncrp</p>

<p style="margin-top: 1em">ncache_keep_anims enable
ncache_keep_anims.</p>

<p style="margin-top: 1em">noncache_keep_anims disable
ncache_keep_anims.</p>

<p style="margin-top: 1em">ncache_pad:n set -ncache_pad to
n.</p>

<p style="margin-top: 1em">wireframe enable -wireframe
mode. same as &quot;wf&quot;</p>

<p style="margin-top: 1em">nowireframe disable -wireframe
mode. same as &quot;nowf&quot;</p>

<p style="margin-top: 1em">wireframe:str enable -wireframe
mode string.</p>

<p style="margin-top: 1em">wireframe_mode:str enable
-wireframe mode string.</p>

<p style="margin-top: 1em">wireframelocal enable
wireframelocal. same as &quot;wfl&quot;</p>

<p style="margin-top: 1em">nowireframe disable
wireframelocal. same as &quot;nowfl&quot;</p>

<p style="margin-top: 1em">wirecopyrect:str set
-wirecopyrect string. same as &quot;wcr:&quot;</p>

<p style="margin-top: 1em">scrollcopyrect:str set
-scrollcopyrect string. same &quot;scr&quot;</p>

<p style="margin-top: 1em">noscrollcopyrect disable
-scrollcopyrect__mode_. &quot;noscr&quot;</p>

<p style="margin-top: 1em">scr_area:n set -scr_area to
n</p>

<p style="margin-top: 1em">scr_skip:list set -scr_skip to
&quot;list&quot;</p>

<p style="margin-top: 1em">scr_inc:list set -scr_inc to
&quot;list&quot;</p>

<p style="margin-top: 1em">scr_keys:list set -scr_keys to
&quot;list&quot;</p>

<p style="margin-top: 1em">scr_term:list set -scr_term to
&quot;list&quot;</p>

<p style="margin-top: 1em">scr_keyrepeat:str set
-scr_keyrepeat to &quot;str&quot;</p>

<p style="margin-top: 1em">scr_parms:str set -scr_parms
parameters.</p>

<p style="margin-top: 1em">fixscreen:str set -fixscreen to
&quot;str&quot;.</p>

<p style="margin-top: 1em">noxrecord disable all use of
RECORD extension.</p>

<p style="margin-top: 1em">xrecord enable use of RECORD
extension.</p>

<p style="margin-top: 1em">reset_record reset RECORD
extension (if avail.)</p>

<p style="margin-top: 1em">pointer_mode:n set -pointer_mode
to n. same as &quot;pm&quot;</p>

<p style="margin-top: 1em">input_skip:n set -input_skip to
n.</p>

<p style="margin-top: 1em">allinput enable use of -allinput
mode.</p>

<p style="margin-top: 1em">noallinput disable use of
-allinput mode.</p>

<p style="margin-top: 1em">input_eagerly enable use of
-input_eagerly mode.</p>

<p style="margin-top: 1em">noinput_eagerly disable use of
-input_eagerly mode.</p>

<p style="margin-top: 1em">ssltimeout:n set -ssltimeout to
n.</p>

<p style="margin-top: 1em">speeds:str set -speeds to
str.</p>

<p style="margin-top: 1em">wmdt:str set -wmdt to str.</p>

<p style="margin-top: 1em">debug_pointer enable
-debug_pointer, same as &quot;dp&quot;</p>

<p style="margin-top: 1em">nodebug_pointer disable
-debug_pointer, same as &quot;nodp&quot;</p>

<p style="margin-top: 1em">debug_keyboard enable
-debug_keyboard, same as &quot;dk&quot;</p>

<p style="margin-top: 1em">nodebug_keyboard disable
-debug_keyboard, same as &quot;nodk&quot;</p>

<p style="margin-top: 1em">keycode:n inject keystroke
&rsquo;keycode&rsquo; (xmodmap -pk)</p>

<p style="margin-top: 1em">keycode:n,down inject
&rsquo;keycode&rsquo; (down=0,1)</p>

<p style="margin-top: 1em">keysym:str inject keystroke
&rsquo;keysym&rsquo; (number/name)</p>

<p style="margin-top: 1em">keysym:str,down inject
&rsquo;keysym&rsquo; (down=0,1)</p>

<p style="margin-top: 1em">ptr:x,y,mask inject pointer
event x, y, button-mask</p>

<p style="margin-top: 1em">fakebuttonevent:button,down
direct XTestFakeButtonEvent.</p>

<p style="margin-top: 1em">sleep:t sleep floating point
time t.</p>

<p style="margin-top: 1em">get_xprop:p get X property named
&rsquo;p&rsquo;.</p>

<p style="margin-top: 1em">set_xprop:p:val set X property
named &rsquo;p&rsquo; to &rsquo;val&rsquo;. p -&gt; id=NNN:p
for hex/dec window id.</p>

<p style="margin-top: 1em">wininfo:id get info about X
window id. use &rsquo;root&rsquo; for root window, use +id
for children.</p>

<p style="margin-top: 1em">grab_state get state of pointer
and keyboard grab.</p>

<p style="margin-top: 1em">pointer_pos print XQueryPointer
x,y cursor position.</p>

<p style="margin-top: 1em">pointer_x print XQueryPointer x
cursor position.</p>

<p style="margin-top: 1em">pointer_y print XQueryPointer y
cursor position.</p>

<p style="margin-top: 1em">pointer_same print XQueryPointer
ptr on same screen.</p>

<p style="margin-top: 1em">pointer_root print XQueryPointer
curr ptr rootwin.</p>

<p style="margin-top: 1em">pointer_mask print XQueryPointer
button and mods mask</p>

<p style="margin-top: 1em">mouse_x print x11vnc&rsquo;s
idea of cursor position.</p>

<p style="margin-top: 1em">mouse_y print x11vnc&rsquo;s
idea of cursor position.</p>

<p style="margin-top: 1em">noop do nothing.</p>

<p style="margin-top: 1em">defer:n set -defer to n ms,same
as deferupdate:n</p>

<p style="margin-top: 1em">wait:n set -wait to n ms.</p>

<p style="margin-top: 1em">extra_fbur:n set -extra_fbur to
n.</p>

<p style="margin-top: 1em">wait_ui:f set -wait_ui factor to
f.</p>

<p style="margin-top: 1em">setdefer:n set -setdefer to
-2,-1,0,1, or 2.</p>

<p style="margin-top: 1em">wait_bog disable -nowait_bog
mode.</p>

<p style="margin-top: 1em">nowait_bog enable -nowait_bog
mode.</p>

<p style="margin-top: 1em">slow_fb:f set -slow_fb to f
seconds.</p>

<p style="margin-top: 1em">xrefresh:f set -xrefresh to f
seconds.</p>

<p style="margin-top: 1em">readtimeout:n set read timeout
to n seconds.</p>

<p style="margin-top: 1em">nap enable -nap mode.</p>

<p style="margin-top: 1em">nonap disable -nap mode.</p>

<p style="margin-top: 1em">sb:n set -sb to n s, same as
screen_blank:n</p>

<p style="margin-top: 1em">fbpm disable -nofbpm mode.</p>

<p style="margin-top: 1em">nofbpm enable -nofbpm mode.</p>

<p style="margin-top: 1em">dpms disable -nodpms mode.</p>

<p style="margin-top: 1em">nodpms enable -nodpms mode.</p>

<p style="margin-top: 1em">forcedpms enable -forcedpms
mode.</p>

<p style="margin-top: 1em">noforcedpms disable -forcedpms
mode.</p>

<p style="margin-top: 1em">clientdpms enable -clientdpms
mode.</p>

<p style="margin-top: 1em">noclientdpms disable -clientdpms
mode.</p>

<p style="margin-top: 1em">noserverdpms enable
-noserverdpms mode.</p>

<p style="margin-top: 1em">serverdpms disable -noserverdpms
mode.</p>

<p style="margin-top: 1em">noultraext enable -noultraext
mode.</p>

<p style="margin-top: 1em">ultraext disable -noultraext
mode.</p>

<p style="margin-top: 1em">chatwindow enable local
chatwindow mode.</p>

<p style="margin-top: 1em">nochatwindow disable local
chatwindow mode.</p>

<p style="margin-top: 1em">chaton begin chat using local
window.</p>

<p style="margin-top: 1em">chatoff end chat using local
window.</p>

<p style="margin-top: 1em">xdamage enable xdamage polling
hints.</p>

<p style="margin-top: 1em">noxdamage disable xdamage
polling hints.</p>

<p style="margin-top: 1em">xd_area:A set -xd_area max pixel
area to &quot;A&quot;</p>

<p style="margin-top: 1em">xd_mem:f set -xd_mem remembrance
to &quot;f&quot;</p>

<p style="margin-top: 1em">fs:frac set -fs fraction to
&quot;frac&quot;, e.g. 0.5</p>

<p style="margin-top: 1em">gaps:n set -gaps to n.</p>

<p style="margin-top: 1em">grow:n set -grow to n.</p>

<p style="margin-top: 1em">fuzz:n set -fuzz to n.</p>

<p style="margin-top: 1em">snapfb enable -snapfb mode.</p>

<p style="margin-top: 1em">nosnapfb disable -snapfb
mode.</p>

<p style="margin-top: 1em">rawfb:str set -rawfb mode to
&quot;str&quot;.</p>

<p style="margin-top: 1em">uinput_accel:f set uinput_accel
to f.</p>

<p style="margin-top: 1em">uinput_thresh:n set
uinput_thresh to n.</p>

<p style="margin-top: 1em">uinput_reset:n set uinput_reset
to n ms.</p>

<p style="margin-top: 1em">uinput_always:n set
uinput_always to 1/0.</p>

<p style="margin-top: 1em">progressive:n set LibVNCServer
-progressive slice height parameter to n.</p>

<p style="margin-top: 1em">desktop:str set -desktop name to
str for new clients.</p>

<p style="margin-top: 1em">rfbport:n set -rfbport to n.</p>

<p style="margin-top: 1em">macnosaver enable -macnosaver
mode.</p>

<p style="margin-top: 1em">macsaver disable -macnosaver
mode.</p>

<p style="margin-top: 1em">macnowait enable -macnowait
mode.</p>

<p style="margin-top: 1em">macwait disable -macnowait
mode.</p>

<p style="margin-top: 1em">macwheel:n set -macwheel to
n.</p>

<p style="margin-top: 1em">macnoswap enable -macnoswap
mouse button mode.</p>

<p style="margin-top: 1em">macswap disable -macnoswap mouse
button mode.</p>

<p style="margin-top: 1em">macnoresize enable -macnoresize
mode.</p>

<p style="margin-top: 1em">macresize disable -macnoresize
mode.</p>

<p style="margin-top: 1em">maciconanim:n set -maciconanim
to n.</p>

<p style="margin-top: 1em">macmenu enable -macmenu
mode.</p>

<p style="margin-top: 1em">macnomenu disable -macmenu
mode.</p>

<p style="margin-top: 1em">macuskbd enable -macuskbd
mode.</p>

<p style="margin-top: 1em">macnouskbd disable -macuskbd
mode.</p>

<p style="margin-top: 1em">httpport:n set -httpport to
n.</p>

<p style="margin-top: 1em">httpdir:dir set -httpdir to dir
(and enable http).</p>

<p style="margin-top: 1em">enablehttpproxy enable
-enablehttpproxy mode.</p>

<p style="margin-top: 1em">noenablehttpproxy disable
-enablehttpproxy mode.</p>

<p style="margin-top: 1em">alwaysshared enable
-alwaysshared mode.</p>

<p style="margin-top: 1em">noalwaysshared disable
-alwaysshared mode. (may interfere with other options)</p>

<p style="margin-top: 1em">nevershared enable -nevershared
mode.</p>

<p style="margin-top: 1em">nonevershared disable
-nevershared mode. (may interfere with other options)</p>

<p style="margin-top: 1em">dontdisconnect enable
-dontdisconnect mode.</p>

<p style="margin-top: 1em">nodontdisconnect disable
-dontdisconnect mode. (may interfere with other options)</p>

<p style="margin-top: 1em">debug_xevents enable debugging X
events.</p>

<p style="margin-top: 1em">nodebug_xevents disable
debugging X events.</p>

<p style="margin-top: 1em">debug_xdamage enable debugging X
DAMAGE mechanism.</p>

<p style="margin-top: 1em">nodebug_xdamage disable
debugging X DAMAGE mechanism.</p>

<p style="margin-top: 1em">debug_wireframe enable debugging
wireframe mechanism.</p>

<p style="margin-top: 1em">nodebug_wireframe disable
debugging wireframe mechanism.</p>

<p style="margin-top: 1em">debug_scroll enable debugging
scrollcopy mechanism.</p>

<p style="margin-top: 1em">nodebug_scroll disable debugging
scrollcopy mechanism.</p>

<p style="margin-top: 1em">debug_tiles enable
-debug_tiles</p>

<p style="margin-top: 1em">nodebug_tiles disable
-debug_tiles</p>

<p style="margin-top: 1em">debug_grabs enable
-debug_grabs</p>

<p style="margin-top: 1em">nodebug_grabs disable
-debug_grabs</p>

<p style="margin-top: 1em">debug_sel enable -debug_sel</p>

<p style="margin-top: 1em">nodebug_sel disable
-debug_sel</p>

<p style="margin-top: 1em">debug_ncache enable
-debug_ncache</p>

<p style="margin-top: 1em">nodebug_ncache disable
-debug_ncache</p>

<p style="margin-top: 1em">dbg enable -dbg crash shell</p>

<p style="margin-top: 1em">nodbg disable -dbg crash
shell</p>

<p style="margin-top: 1em">noremote disable the -remote
command processing, it cannot be turned back on.</p>

<p style="margin-top: 1em">bcx_xattach:str This remote
control command is for use with the BARCO xattach program or
the x2x program. Both of these programs are for
&rsquo;pointer and keyboard&rsquo; sharing <br>
between separate X displays. In general the two displays are
usually nearby, e.g. on the same desk, and this allows the
user to share a single pointer and keyboard <br>
between them. The user moves the mouse to an edge and then
the mouse pointer appears to &rsquo;jump&rsquo; to the other
display screen. Thus it emulates what a single X server
would <br>
do for two screens (e.g. :0.0 and :0.1) The illusion of a
single Xserver with multiple screens is achieved by
forwarding events to the 2nd one via the XTEST
extension.</p>

<p style="margin-top: 1em">What the x11vnc bcx_xattach
command does is to perform some pointer movements to try to
INDUCE xattach/x2x to &rsquo;jump&rsquo; to the other
display. In what follows the &Acirc;&acute;master&rsquo;
<br>
display refers to the one that when it has
&Acirc;&acute;focus&rsquo; it is basically doing nothing
besides watching for the mouse to go over an edge. The
&rsquo;slave&rsquo; display refers to the one <br>
to which the mouse and keyboard is redirected to once an
edge in the master has been crossed. Note that the x11vnc
executing the bcx_xattach command MUST be the one con&acirc;
<br>
nected to the *master* display.</p>

<p style="margin-top: 1em">Also note that when input is
being redirected (via XTEST) from the master display to the
slave display, the master display&rsquo;s pointer and
keyboard are *grabbed* by xat&acirc; <br>
tach/x2x. x11vnc can use this info to verify that the
master/slave mode change has taken place correctly. If you
specify the &quot;ifneeded&quot; option (see below) and the
ini&acirc; <br>
tial grab state is that of the desired final state, then no
pointer movements are injected and &quot;DONE,GRAB_OK&quot;
is returned.</p>

<p style="margin-top: 1em">&quot;str&quot; must contain one
of &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, or
&quot;right&quot; to indicate the direction of the
&rsquo;jump&rsquo;. &quot;str&quot; must also contain one of
&quot;master_to_slave&quot; or &quot;slave_to_master&quot;
<br>
to indicate the type of mode change induced by the jump. Use
&quot;M2S&quot; and &quot;S2M&quot; as shorter aliases.</p>

<p style="margin-top: 1em">&quot;str&quot; may be a
&quot;+&quot; separated list of additional tuning options.
The &quot;shift=n&quot; option indicates an offset shift
position away from (0,0) (default 20). &quot;final=x+y&quot;
speci&acirc; <br>
fies the final position of the cursor at the end of the
normal move sequence; default 30+30.
&quot;extra_move=x+y&quot; means to do one more pointer move
after &quot;final&quot; to x+y. <br>
&quot;dt=n&quot; sets the sleep time in milliseconds between
pointer moves (default: 40ms) &quot;retry=n&quot; specifies
the maximum number of retries if the grab state change
fails. <br>
&quot;ifneeded&quot; means to not apply the pointer
movements if the initial grab state is that of the desired
final state. &quot;nograbcheck&quot; means to not check if
the grab state <br>
changed as expected and only apply the pointer movements
(default is to check the grab states.)</p>

<p style="margin-top: 1em">If you do not specify
&quot;up&quot;, etc., to bcx_xattach nothing will be
attempted and the command returns the string
FAIL,NO_DIRECTION_SPECIFIED. If you do not specify
&quot;mas&acirc; <br>
ter_to_slave&quot; or &quot;M2S&quot;, etc., to bcx_xattach
nothing will be attempted and the command returns the string
FAIL,NO_MODE_CHANGE_SPECIFIED.</p>

<p style="margin-top: 1em">Otherwise, the returned string
will contain &quot;DONE&quot;. It will be
&quot;DONE,GRAB_OK&quot; if the grab state changed as
expected (or if &quot;ifneeded&quot; was supplied and the
initial grab <br>
state was already the desired one.) If the initial grab
state was incorrect, but the final grab state was correct
then it is &quot;DONE,GRAB_FAIL_INIT&quot;. If the initial
grab <br>
state was correct, but the final grab state was incorrect
then it is &quot;DONE,GRAB_FAIL_FINAL&quot;. If both are
incorrect it will be &quot;DONE,GRAB_FAIL&quot;. Under grab
failure the <br>
string will be followed by &quot;:p1,k1-p2,k2&quot; where
p1,k1 indicates the initial pointer and keyboard grab states
and p2,k2 the final ones. If GRAB_FAIL or GRAB_FAIL_FINAL
<br>
occurs, the action will be retried up to 3 times; trying to
reset the state and sleeping a bit between each try. Set
retry=n to adjust the number of retries, zero to dis&acirc;
<br>
able retries.</p>

<p style="margin-top: 1em">Examples: -R
bcx_xattach:down+M2S -R bcx_xattach:up+S2M -R
bcx_xattach:up+S2M+nograbcheck+dt=30 -R
bcx_xattach:down+M2S+extra_move=100+100</p>

<p style="margin-top: 1em">or use -Q instead of -R to
retrieve the result text.</p>

<p style="margin-top: 1em">End of the bcx_xattach:str
description.</p>

<p style="margin-top: 1em">The vncconnect(1) command from
standard VNC distributions may also be used if string is
prefixed with &quot;cmd=&quot; E.g. &rsquo;vncconnect
cmd=stop&rsquo;. Under some circumstances xprop(1) <br>
can used if it supports -set (see the FAQ).</p>

<p style="margin-top: 1em">If &quot;-connect
/path/to/file&quot; has been supplied to the running x11vnc
server then that file can be used as a communication channel
(this is the only way to remote control <br>
one of many x11vnc&rsquo;s polling the same X display)
Simply run: &rsquo;x11vnc -connect /path/to/file -remote
...&rsquo; or you can directly write to the file via
something like: &quot;echo <br>
cmd=stop &gt; /path/to/file&quot;, etc.</p>

<p style="margin-top: 1em">-query variable</p>

<p style="margin-top: 1em">Like -remote, except just query
the value of variable. &quot;-Q&quot; is an alias for
&quot;-query&quot;. Multiple queries can be done by
separating variables by commas, e.g. -query <br>
var1,var2. The results come back in the form
ans=var1:value1,ans=var2:value2,... to the standard output.
If a variable is read-only, it comes back with prefix
&quot;aro=&quot; <br>
instead of &quot;ans=&quot;.</p>

<p style="margin-top: 1em">Some -remote commands are pure
actions that do not make sense as variables, e.g.
&quot;stop&quot; or &quot;disconnect&quot;, in these cases
the value returned is &quot;N/A&quot;. To direct a query
<br>
straight to the X11VNC_REMOTE property or connect file use
&quot;qry=...&quot; instead of &quot;cmd=...&quot;</p>

<p style="margin-top: 1em">ans= stop quit exit shutdown
ping resend_cutbuffer resend_clipboard resend_primary
blacken zero refresh reset close disconnect id_cmd id sid
waitmapped nowaitmapped clip <br>
flashcmap noflashcmap shiftcmap truecolor notruecolor
overlay nooverlay overlay_cursor overlay_yescursor
nooverlay_nocursor nooverlay_cursor nooverlay_yescursor
over&acirc; <br>
lay_nocursor 8to24 no8to24 8to24_opts 24to32 no24to32 visual
scale scale_cursor viewonly noviewonly shared noshared
forever noforever once timeout tightfilexfer notight&acirc;
<br>
filexfer ultrafilexfer noultrafilexfer rfbversion deny lock
nodeny unlock avahi mdns zeroconf noavahi nomdns nozeroconf
connect proxy allowonce allow noipv6 ipv6 noipv4 <br>
ipv4 no6 6 localhost nolocalhost listen lookup nolookup
accept afteraccept gone shm noshm flipbyteorder
noflipbyteorder onetile noonetile solid_color solid nosolid
black&acirc; <br>
out xinerama noxinerama xtrap noxtrap xrandr noxrandr
xrandr_mode rotate padgeom quiet q noquiet modtweak
nomodtweak xkb noxkb capslock nocapslock skip_lockkeys <br>
noskip_lockkeys skip_keycodes sloppy_keys nosloppy_keys
skip_dups noskip_dups add_keysyms noadd_keysyms clear_mods
noclear_mods clear_keys noclear_keys clear_all <br>
clear_locks keystate remap repeat norepeat fb nofb bell
nobell sendbell sel nosel primary noprimary setprimary
nosetprimary clipboard noclipboard setclipboard
nosetclip&acirc; <br>
board seldir cursorshape nocursorshape cursorpos nocursorpos
cursor_drag nocursor_drag cursor show_cursor noshow_cursor
nocursor arrow xfixes noxfixes xdamage noxdamage <br>
xd_area xd_mem alphacut alphafrac alpharemove noalpharemove
alphablend noalphablend xwarppointer xwarp noxwarppointer
noxwarp always_inject noalways_inject buttonmap drag&acirc;
<br>
ging nodragging ncache_cr noncache_cr ncache_no_moveraise
noncache_no_moveraise ncache_no_dtchange
noncache_no_dtchange ncache_no_rootpixmap
noncache_no_rootpixmap <br>
ncache_reset_rootpixmap ncrp ncache_keep_anims
noncache_keep_anims ncache_old_wm noncache_old_wm ncache_pad
ncache noncache ncache_size debug_ncache nodebug_ncache
wire&acirc; <br>
frame_mode wireframe wf nowireframe nowf wireframelocal wfl
nowireframelocal nowfl wirecopyrect wcr nowirecopyrect nowcr
scr_area scr_skip scr_inc scr_keys scr_term <br>
scr_keyrepeat scr_parms scrollcopyrect scr noscrollcopyrect
noscr fixscreen noxrecord xrecord reset_record pointer_mode
pm input_skip allinput noallinput input_eagerly <br>
noinput_eagerly input grabkbd nograbkbd grabptr nograbptr
grabalways nograbalways grablocal client_input ssltimeout
speeds wmdt debug_pointer dp nodebug_pointer nodp <br>
debug_keyboard dk nodebug_keyboard nodk keycode keysym ptr
fakebuttonevent sleep get_xprop set_xprop wininfo
bcx_xattach deferupdate defer setdefer extra_fbur wait_ui
<br>
wait_bog nowait_bog slow_fb xrefresh wait readtimeout nap
nonap sb screen_blank fbpm nofbpm dpms nodpms clientdpms
noclientdpms forcedpms noforcedpms noserverdpms <br>
serverdpms noultraext ultraext chatwindow nochatwindow
chaton chatoff fs gaps grow fuzz snapfb nosnapfb rawfb
uinput_accel uinput_thresh uinput_reset uinput_always
pro&acirc; <br>
gressive rfbport http nohttp httpport httpdir
enablehttpproxy noenablehttpproxy alwaysshared
noalwaysshared nevershared noalwaysshared dontdisconnect
nodontdisconnect <br>
desktop debug_xevents nodebug_xevents debug_xevents
debug_xdamage nodebug_xdamage debug_xdamage debug_wireframe
nodebug_wireframe debug_wireframe debug_scroll node&acirc;
<br>
bug_scroll debug_scroll debug_tiles dbt nodebug_tiles nodbt
debug_tiles debug_grabs nodebug_grabs debug_sel nodebug_sel
dbg nodbg macnosaver macsaver nomacnosaver mac&acirc; <br>
nowait macwait nomacnowait macwheel macnoswap macswap
nomacnoswap macnoresize macresize nomacnoresize maciconanim
macmenu macnomenu nomacmenu macuskbd nomacuskbd noremote</p>

<p style="margin-top: 1em">aro= noop display vncdisplay
icon_mode autoport loop loopbg desktopname guess_desktop
guess_dbus http_url auth xauth users rootshift clipshift
scale_str scaled_x scaled_y <br>
scale_numer scale_denom scale_fac_x scale_fac_y
scaling_blend scaling_nomult4 scaling_pad
scaling_interpolate inetd privremote unsafe safer nocmds
passwdfile unixpw <br>
unixpw_nis unixpw_list ssl ssl_pem sslverify stunnel
stunnel_pem https httpsredir usepw using_shm logfile o flag
rmflag rc norc h help V version lastmod bg sigpipe threads
<br>
readrate netrate netlatency pipeinput clients client_count
pid ext_xtest ext_xtrap ext_xrecord ext_xkb ext_xshm
ext_xinerama ext_overlay ext_xfixes ext_xdamage ext_xrandr
<br>
rootwin num_buttons button_mask mouse_x mouse_y grab_state
pointer_pos pointer_x pointer_y pointer_same pointer_root
pointer_mask bpp depth indexed_color dpy_x dpy_y <br>
wdpy_x wdpy_y off_x off_y cdpy_x cdpy_y coff_x coff_y
rfbauth passwd viewpasswd</p>

<p style="margin-top: 1em">-QD variable</p>

<p style="margin-top: 1em">Just like -query variable, but
returns the default value for that parameter (no running
x11vnc server is consulted)</p>

<p style="margin-top: 1em">-sync</p>

<p style="margin-top: 1em">By default -remote commands are
run asynchronously, that is, the request is posted and the
program immediately exits. Use -sync to have the program
wait for an acknowl&acirc; <br>
edgement from the x11vnc server that command was processed
(somehow). On the other hand -query requests are always
processed synchronously because they have to wait for <br>
the answer.</p>

<p style="margin-top: 1em">Also note that if both -remote
and -query requests are supplied on the command line, the
-remote is processed first (synchronously: no need for
-sync), and then the -query <br>
request is processed in the normal way. This allows for a
reliable way to see if the -remote command was processed by
querying for any new settings. Note however that <br>
there is timeout of a few seconds (see the next paragraph)
so if the x11vnc takes longer than that to process the
requests the requester will think that a failure has <br>
taken place.</p>

<p style="margin-top: 1em">The default is to wait 3.5
seconds. Or if cmd=stop only 1.0 seconds. If cmd matches
&rsquo;script:&rsquo; then it will wait up to 10.0 seconds.
Set X11VNC_SYNC_TIMEOUT to the num&acirc; <br>
ber of seconds you want it to wait.</p>

<p style="margin-top: 1em">-query_retries str</p>

<p style="margin-top: 1em">If a query fails to get a
response from an x11vnc server, retry up to n times. str is
specified as n[:t][/match] Optionally the delay between
tries may be specified by <br>
&quot;t&quot; a floating point time (default 0.5 seconds.)
Note: the response is not checked for validity or whether it
corresponds to the query sent. The query
&quot;ping:mystring&quot; <br>
may be used to help uniquely identify the query. Optionally,
a matching string after a &quot;/&quot; will be used to
check the result text. Up to n retries will take place until
<br>
the matching string is found in the output text. If the
match string is never found the program&rsquo;s exit code is
1; if the match is found it exits with 0. Note that there
<br>
may be stdout printed for each retry (i.e. multiple lines
printed out to stdout.) Example: -query_retries
4:1.5/grab_state</p>

<p style="margin-top: 1em">-remote_prefix str</p>

<p style="margin-top: 1em">Enable a remote-control
communication channel for connected VNC clients. str is a
non-empty string. If a VNC client sends rfbCutText having
the prefix str then the part <br>
after it is processed as though it were sent via
&rsquo;x11vnc -remote ...&rsquo;. If it begins with neither
&rsquo;cmd=&rsquo; nor &rsquo;qry=&rsquo; then
&rsquo;qry=&rsquo; is assumed. Any corresponding output text
<br>
for that remote control command is sent back to all client
as rfbCutText. The returned output is also prefixed with
str. Example: -remote_prefix DO_THIS:</p>

<p style="margin-top: 1em">Note that enabling
-remote_prefix allows the remote VNC viewers to run x11vnc
-remote commands. Do not use this option if they are not to
be trusted.</p>

<p style="margin-top: 1em">-noremote, -yesremote</p>

<p style="margin-top: 1em">Do not process any remote
control commands or queries. Do process remote control
commands or queries. Default: -yesremote</p>

<p style="margin-top: 1em">A note about security wrt remote
control commands. If someone can connect to the X display
and change the property X11VNC_REMOTE, then they can
remotely control x11vnc. <br>
Normally access to the X display is protected. Note that if
they can modify X11VNC_REMOTE on the X server, they have
enough permissions to also run their own x11vnc and <br>
thus have complete control of the desktop. If the
&quot;-connect /path/to/file&quot; channel is being used,
obviously anyone who can write to /path/to/file can remotely
control <br>
x11vnc. So be sure to protect the X display and that
file&rsquo;s write permissions. See -privremote below.</p>

<p style="margin-top: 1em">If you are paranoid and do not
think -noremote is enough, to disable the X11VNC_REMOTE
property channel completely use -novncconnect, or use the
-safer option that shuts <br>
many things off.</p>

<p style="margin-top: 1em">-unsafe</p>

<p style="margin-top: 1em">A few remote commands are
disabled by default (currently: id:pick, accept:&lt;cmd&gt;,
gone:&lt;cmd&gt;, and rawfb:setup:&lt;cmd&gt;) because they
are associated with running external pro&acirc; <br>
grams. If you specify -unsafe, then these remote-control
commands are allowed. Note that you can still specify these
parameters on the command line, they just cannot be <br>
invoked via remote-control.</p>

<p style="margin-top: 1em">-safer</p>

<p style="margin-top: 1em">Equivalent to: -novncconnect
-noremote and prohibiting -gui and the -connect file. Shuts
off communcation channels.</p>

<p style="margin-top: 1em">-privremote</p>

<p style="margin-top: 1em">Perform some sanity checks and
disable remote-control commands if it appears that the X
DISPLAY and/or connectfile can be accessed by other users.
Once remote-control is <br>
disabled it cannot be turned back on.</p>

<p style="margin-top: 1em">-nocmds</p>

<p style="margin-top: 1em">No external commands (e.g.
system(3) , popen(3) , exec(3) ) will be run at all.</p>

<p style="margin-top: 1em">-allowedcmds list</p>

<p style="margin-top: 1em">list contains a comma separated
list of the only external commands that can be run. The full
list of associated options is:</p>

<p style="margin-top: 1em">stunnel, ssl, unixpw, WAIT,
zeroconf, id, accept, afteraccept, gone, pipeinput,
v4l-info, rawfb-setup, dt, gui, ssh, storepasswd,
passwdfile, custom_passwd, findauth, <br>
crash.</p>

<p style="margin-top: 1em">See each option&rsquo;s help to
learn the associated external command. Note that the -nocmds
option takes precedence and disables all external
commands.</p>

<p style="margin-top: 1em">-deny_all</p>

<p style="margin-top: 1em">For use with -remote nodeny:
start out denying all incoming clients until &quot;-remote
nodeny&quot; is used to let them in.</p>

<p style="margin-top: 1em">These options are passed to
LibVNCServer:</p>

<p style="margin-top: 1em">-rfbport port</p>

<p style="margin-top: 1em">TCP port for RFB protocol</p>

<p style="margin-top: 1em">-rfbwait time</p>

<p style="margin-top: 1em">max time in ms to wait for RFB
client</p>

<p style="margin-top: 1em">-rfbauth passwd-file</p>

<p style="margin-top: 1em">use authentication on RFB
protocol (use &rsquo;x11vnc -storepasswd pass file&rsquo; to
create a password file)</p>

<p style="margin-top: 1em">-rfbversion 3.x</p>

<p style="margin-top: 1em">Set the version of the RFB we
choose to advertise</p>

<p style="margin-top: 1em">-permitfiletransfer</p>

<p style="margin-top: 1em">permit file transfer support</p>

<p style="margin-top: 1em">-passwd plain-password</p>

<p style="margin-top: 1em">use authentication (use
plain-password as password, USE AT YOUR RISK)</p>

<p style="margin-top: 1em">-deferupdate time</p>

<p style="margin-top: 1em">time in ms to defer updates
(default 40)</p>

<p style="margin-top: 1em">-deferptrupdate time</p>

<p style="margin-top: 1em">time in ms to defer pointer
updates (default none)</p>

<p style="margin-top: 1em">-desktop name</p>

<p style="margin-top: 1em">VNC desktop name (default
&quot;LibVNCServer&quot;)</p>

<p style="margin-top: 1em">-alwaysshared</p>

<p style="margin-top: 1em">always treat new clients as
shared</p>

<p style="margin-top: 1em">-nevershared</p>

<p style="margin-top: 1em">never treat new clients as
shared</p>

<p style="margin-top: 1em">-dontdisconnect</p>

<p style="margin-top: 1em">don&rsquo;t disconnect existing
clients when a new non-shared connection comes in (refuse
new connection instead)</p>

<p style="margin-top: 1em">-httpdir dir-path</p>

<p style="margin-top: 1em">enable http server using
dir-path home</p>

<p style="margin-top: 1em">-httpport portnum</p>

<p style="margin-top: 1em">use portnum for http
connection</p>

<p style="margin-top: 1em">-enablehttpproxy</p>

<p style="margin-top: 1em">enable http proxy support</p>

<p style="margin-top: 1em">-progressive height</p>

<p style="margin-top: 1em">enable progressive updating for
slow links</p>

<p style="margin-top: 1em">-listen ipaddr</p>

<p style="margin-top: 1em">listen for connections only on
network interface with addr ipaddr. &rsquo;-listen
localhost&rsquo; and hostname work too.</p>

<p style="margin-top: 1em">libvncserver-tight-extension
options:</p>

<p style="margin-top: 1em">-disablefiletransfer</p>

<p style="margin-top: 1em">disable file transfer</p>

<p style="margin-top: 1em">-ftproot string</p>

<p style="margin-top: 1em">set ftp root</p>

<p style="margin-top: 1em">FILES <br>
$HOME/.x11vncrc, $HOME/.Xauthority</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
DISPLAY, XAUTHORITY, HOME</p>

<p style="margin-top: 1em">The following are set for the
auxiliary commands run by -accept, -gone and other
cases:</p>

<p style="margin-top: 1em">RFB_CLIENT_IP, RFB_CLIENT_PORT,
RFB_SERVER_IP, RFB_SERVER_PORT, RFB_X11VNC_PID,
RFB_CLIENT_ID, RFB_CLIENT_COUNT, RFB_MODE RFB_STATE
RFB_LOGIN_VIEWONLY RFB_LOGIN_TIME RFB_CUR&acirc; <br>
RENT_TIME RFB_USERNAME RFB_SSL_CLIENT_CERT</p>

<p style="margin-top: 1em">SEE ALSO <br>
vncviewer(1), vncpasswd(1), vncconnect(1), vncserver(1),
Xvnc(1), xev(1), xdpyinfo(1), xwininfo(1), xprop(1),
xmodmap(1), xrandr(1), Xserver(1), xauth(1), xhost(1),
Xsecurity(7), <br>
xmessage(1), XGetImage(3X11), ipcrm(1), inetd(1), xdm(1),
gdm(1), kdm(1), ssh(1), stunnel(8), su(1),
http://www.tightvnc.com, http://www.realvnc.com,
http://www.karl&acirc; <br>
runge.com/x11vnc/, http://www.karlrunge.com/x11vnc/#faq</p>

<p style="margin-top: 1em">AUTHORS <br>
x11vnc was written by Karl J. Runge
&lt;runge@karlrunge.com&gt;, it is part of the LibVNCServer
project &lt;http://sf.net/projects/libvncserver&gt;. This
manual page is based one the one <br>
written by Ludovic Drolez &lt;ldrolez@debian.org&gt;, for
the Debian project (both may be used by others).</p>

<p style="margin-top: 1em">x11vnc April 2014 X11VNC(1)</p>
<hr>
</body>
</html>
