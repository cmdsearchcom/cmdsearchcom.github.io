<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:41:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VARNISHHIST(1) VARNISHHIST(1)</p>

<p style="margin-top: 1em">NAME <br>
varnishhist - Varnish request histogram</p>

<p style="margin-top: 1em">SYNOPSIS <br>
varnishhist [-B &lt;factor&gt;] [-C] [-d] [-g
&lt;request|vxid&gt;] [-h] [-L &lt;limit&gt;] [-n
&lt;dir&gt;] [-N &lt;filename&gt;] [-p &lt;period&gt;] [-P
responsetime] [-P size] [-P Bereqtime] [-P Beresptime] [-P
<br>
BerespBodytime] [-P Besize] [-P
&lt;[cb:]tag:field_num:min:max&gt;] [-q &lt;query&gt;] [-r
&lt;filename&gt;] [-t &lt;seconds|off&gt;] [-T
&lt;seconds&gt;] [-V]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The varnishhist utility reads varnishd(1) shared memory logs
and presents a continuously updated histogram showing the
distribution of the last N requests by their processing.
<br>
The value of N and the vertical scale are displayed in the
top left corner. The horizontal scale is logarithmic. Hits
are marked with a pipe character (&quot;|&quot;), and misses
are <br>
marked with a hash character (&quot;#&quot;).</p>

<p style="margin-top: 1em">The following options are
available:</p>

<p style="margin-top: 1em">-B &lt;factor&gt; <br>
Factor to bend time by. Particularly useful when [-r]eading
from a vsl file. =1 process in near real time, &lt;1
slow-motion, &gt;1 time-lapse (useless unless reading from a
<br>
file). At runtime, &lt; halves and &gt; doubles.</p>

<p style="margin-top: 1em">-C Do all regular expression and
string matching caseless.</p>

<p style="margin-top: 1em">-d Process log records at the
head of the log and exit.</p>

<p style="margin-top: 1em">-g &lt;request|vxid&gt; <br>
The grouping of the log records. The default is to group by
vxid.</p>

<p style="margin-top: 1em">-h Print program usage and
exit</p>

<p style="margin-top: 1em">-L &lt;limit&gt; <br>
Sets the upper limit of incomplete transactions kept before
the oldest transaction is force completed. A warning record
is synthesized when this happens. This setting <br>
keeps an upper bound on the memory usage of running queries.
Defaults to 1000 transactions.</p>

<p style="margin-top: 1em">-n &lt;dir&gt; <br>
Specify the varnishd working directory (also known as
instance name) to get logs from. If -n is not specified, the
host name is used.</p>

<p style="margin-top: 1em">-N &lt;filename&gt; <br>
Specify the filename of a stale VSM instance. When using
this option the abandonment checking is disabled.</p>

<p style="margin-top: 1em">-p &lt;period&gt; <br>
Specified the number of seconds between screen refreshes.
Default is 1 second, and can be changed at runtime by
pressing the [0-9] keys (powers of 2 in seconds or + and -
<br>
(double/halve the speed).</p>

<p style="margin-top: 1em">-P responsetime <br>
Predefined client profile: graph the total time from start
of request processing (first byte received) until ready to
deliver the client response (field 3 of SLT_Timestamp <br>
Process: VSL tag).</p>

<p style="margin-top: 1em">-P size <br>
Predefined client profile: graph the size of responses
(field 5 of SLT_ReqAcct VSL tag).</p>

<p style="margin-top: 1em">-P Bereqtime <br>
Predefined backend profile: graph the time from beginning of
backend processing until a backend request is sent
completely (field 3 of SLT_Timestamp Bereq: VSL tag).</p>

<p style="margin-top: 1em">-P Beresptime <br>
Predefined backend profile: graph the time from beginning of
backend processing until the response headers are being
received completely (field 3 of SLT_Timestamp Beresp: <br>
VSL tag).</p>

<p style="margin-top: 1em">-P BerespBodytime <br>
Predefined backend profile: graph the time from beginning of
backend processing until the response body has been received
(field 3 of SLT_Timestamp BerespBody: VSL tag).</p>

<p style="margin-top: 1em">-P Besize <br>
Predefined backend profile: graph the backend response body
size (field 5 of SLT_BereqAcct VSL tag).</p>

<p style="margin-top: 1em">-P
&lt;[cb:]tag:field_num:min:max&gt; <br>
Graph the given custom definition defined as: an optional
(c)lient or (b)ackend filter (defaults to client), the tag
we&rsquo;ll look for, and the field number of the value we
<br>
are interested in. min and max are the boundaries of the
graph (these are power of ten).</p>

<p style="margin-top: 1em">-q &lt;query&gt; <br>
Specifies the VSL query to use.</p>

<p style="margin-top: 1em">-r &lt;filename&gt; <br>
Read log in binary file format from this file. The file can
be created with varnishlog -w filename.</p>

<p style="margin-top: 1em">-t &lt;seconds|off&gt; <br>
Timeout before returning error on initial VSM connection. If
set the VSM connection is retried every 0.5 seconds for this
many seconds. If zero the connection is attempted <br>
only once and will fail immediately if unsuccessful. If set
to &quot;off&quot;, the connection will not fail, allowing
the utility to start and wait indefinetely for the Varnish
<br>
instance to appear. Defaults to 5 seconds.</p>

<p style="margin-top: 1em">-T &lt;seconds&gt; <br>
Sets the transaction timeout in seconds. This defines the
maximum number of seconds elapsed between a Begin tag and
the End tag. If the timeout expires, a warning record <br>
is synthesized and the transaction is force completed.
Defaults to 120 seconds.</p>

<p style="margin-top: 1em">-V Print version information and
exit.</p>

<p style="margin-top: 1em">SEE ALSO <br>
&Acirc;&middot; varnishd(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishlog(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishncsa(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishstat(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishtop(1)</p>

<p style="margin-top: 1em">&Acirc;&middot; vsl(7)</p>

<p style="margin-top: 1em">HISTORY <br>
The varnishhist utility was developed by Poul-Henning Kamp
in cooperation with Verdens Gang AS and Varnish Software AS.
This manual page was written by Dag-Erling
Sm&Atilde;&cedil;rgrav.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
This document is licensed under the same licence as Varnish
itself. See LICENCE for details.</p>

<p style="margin-top: 1em">&Acirc;&middot; Copyright (c)
2006 Verdens Gang AS</p>

<p style="margin-top: 1em">&Acirc;&middot; Copyright (c)
2006-2015 Varnish Software AS</p>
 
<p style="margin-top: 1em">VARNISHHIST(1)</p>
<hr>
</body>
</html>
