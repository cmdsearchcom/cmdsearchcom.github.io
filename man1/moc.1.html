<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:25:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>moc(1) General Commands Manual moc(1)</p>

<p style="margin-top: 1em">NAME <br>
moc - generate Qt meta object support code</p>

<p style="margin-top: 1em">SYNOPSIS <br>
moc [-o file] [-i] [-f] [-k] [-ldbg] [-nw] [-p path] [-q
path] [-v] file</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This page documents the Meta Object Compiler for the Qt GUI
application framework. The moc reads one or more C++ class
declarations from a C++ header or source file and generates
<br>
one C++ source file containing meta object information for
the classes. The C++ source file generated by the moc must
be compiled and linked with the implementation of the class
<br>
(or it can be #included into the class&rsquo;s source
file).</p>

<p style="margin-top: 1em">If you use qmake to create your
Makefiles, build rules will be included that call the moc
when required, so you will not need to use the moc
directly.</p>

<p style="margin-top: 1em">In brief, the meta object system
is a structure used by Qt (see http://doc.trolltech.com) for
component programming and run time type information. It adds
properties and <br>
inheritance information to (some) classes and provides a new
type of communication between those instances of those
classes, signal-slot connections.</p>

<p style="margin-top: 1em">OPTIONS <br>
-o file <br>
Write output to file rather than to stdout.</p>

<p style="margin-top: 1em">-f Force the generation of an
#include statement in the output. This is the default for
files whose name matches the regular expression .[hH][^.]*
(i.e. the extension starts <br>
with H or h ). This option is only useful if you have header
files that do not follow the standard naming
conventions.</p>

<p style="margin-top: 1em">-i Do not generate an #include
statement in the output. This may be used to run moc on a
C++ file containing one or more class declarations. You
should then #include the <br>
meta object code in the .cpp file (see USAGE below). If both
-f and -i are present, the last one wins.</p>

<p style="margin-top: 1em">-nw Do not generate any
warnings. Not recommended.</p>

<p style="margin-top: 1em">-ldbg Write a flood of lex debug
information to stdout.</p>

<p style="margin-top: 1em">-p path <br>
Makes moc prepend path/ to the file name in the generated
#include statement (if one is generated).</p>

<p style="margin-top: 1em">-q path <br>
Makes moc prepend path/ to the file name of qt #include
files in the generated code.</p>

<p style="margin-top: 1em">-v Displays the version of moc
and Qt.</p>

<p style="margin-top: 1em">You can explicitly tell the moc
not to parse parts of a header file. It recognizes any C++
comment (//) that contains the substrings MOC_SKIP_BEGIN or
MOC_SKIP_END. They work as <br>
you would expect and you can have several levels of them.
The net result as seen by the moc is as if you had removed
all lines between a MOC_SKIP_BEGIN and a MOC_SKIP_END</p>

<p style="margin-top: 1em">USAGE <br>
moc is almost always invoked by make(1), not by hand.</p>

<p style="margin-top: 1em">moc is typically used with an
input file containing class declarations like this:</p>

<p style="margin-top: 1em">class YourClass : public QObject
{ <br>
Q_OBJECT <br>
Q_PROPERTY( ... ) <br>
Q_CLASSINFO( ... )</p>

<p style="margin-top: 1em">public: <br>
YourClass( QObject * parent=0, const char * name=0 ); <br>
~YourClass();</p>

<p style="margin-top: 1em">signals:</p>

<p style="margin-top: 1em">public slots:</p>

<p style="margin-top: 1em">};</p>

<p style="margin-top: 1em">Here is a useful makefile rule
if you only use GNU make:</p>

<p style="margin-top: 1em">m%.cpp: %.h <br>
moc $&lt; -o $@</p>

<p style="margin-top: 1em">If you want to write portably,
you can use individual rules of the following form:</p>

<p style="margin-top: 1em">mNAME.cpp: NAME.h <br>
moc $&lt; -o $@</p>

<p style="margin-top: 1em">You must also remember to add
mNAME.cpp to your SOURCES (substitute your favorite name)
variable and mNAME.o to your OBJECTS variable.</p>

<p style="margin-top: 1em">(While we prefer to name our C++
source files .cpp, the moc doesn&rsquo;t know that, so you
can use .C, .cc, .CC, .cxx or even .c++ if you prefer.)</p>

<p style="margin-top: 1em">If you have class declarations
in C++ files, we recommend that you use a makefile rule like
this:</p>

<p style="margin-top: 1em">NAME.o: mNAME.cpp</p>

<p style="margin-top: 1em">mNAME.cpp: NAME.cpp <br>
moc -i $&lt; -o $@</p>

<p style="margin-top: 1em">This guarantees that make(1)
will run the moc before it compiles NAME.cpp. You can then
put</p>

<p style="margin-top: 1em">#include
&quot;nNAME.cpp&quot;</p>

<p style="margin-top: 1em">at the end of NAME.cpp, where
all the classes declared in that file are fully known.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
Sometimes you may get linkage errors, saying that
YourClass::className() is undefined or that YourClass lacks
a vtbl. Those errors happen most often when you forget to
compile <br>
the moc-generated C++ code or include that object file in
the link command.</p>

<p style="margin-top: 1em">The moc will warn you about a
number of dangerous or illegal constructs.</p>

<p style="margin-top: 1em">BUGS <br>
The moc does not expand #include or #define, it simply skips
any preprocessor directives it encounters. This is
regrettable, but is normally not a problem in practice.</p>

<p style="margin-top: 1em">The moc does not handle all of
C++. The main problem is that class templates cannot have
signals or slots. This is an important bug. Here is an
example:</p>

<p style="margin-top: 1em">class SomeTemplate&lt;int&gt; :
public QFrame { <br>
Q_OBJECT <br>
.... <br>
signals: <br>
void bugInMocDetected( int ); <br>
};</p>

<p style="margin-top: 1em">Less importantly, the following
constructs are illegal. All of them have have alternatives
which we think are usually better, so removing these
limitations is not a high <br>
priority for us.</p>

<p style="margin-top: 1em">Multiple inheritance requires
QObject to be first. <br>
If you are using multiple inheritance, moc assumes that the
first inherited class is a subclass of QObject. Also, be
sure that only the first inherited class is a QObject.</p>

<p style="margin-top: 1em">class SomeClass : public
QObject, public OtherClass { <br>
... <br>
};</p>

<p style="margin-top: 1em">This bug is almost impossible to
fix; since the moc does not expand #include or #define, it
cannot find out which one of the base classes is a
QObject.</p>

<p style="margin-top: 1em">Function pointers cannot be
arguments to signals or slots. <br>
In most cases where you would consider that, we think
inheritance is a better alternative. Here is an example of
illegal syntax:</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
... <br>
public slots: <br>
// illegal <br>
void apply( void (*apply)(List *, void *), void * ); <br>
};</p>

<p style="margin-top: 1em">You can work around this
restriction like this:</p>

<p style="margin-top: 1em">typedef void
(*ApplyFunctionType)( List *, void * );</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
... <br>
public slots: <br>
void apply( ApplyFunctionType, char * ); <br>
};</p>

<p style="margin-top: 1em">It may sometimes be even better
to replace the function pointer with inheritance and virtual
functions, signals or slots.</p>

<p style="margin-top: 1em">Friend declarations cannot be
placed in signals or slots sections <br>
Sometimes it will work, but in general, friend declarations
cannot be placed in signals or slots sections. Put them in
the good old private, protected or public sections <br>
instead. Here is an example of the illegal syntax:</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
... <br>
signals: <br>
friend class ClassTemplate&lt;char&gt;; // illegal <br>
};</p>

<p style="margin-top: 1em">Signals and slots cannot be
upgraded <br>
The C++ feature of upgrading an inherited member function to
public status is not extended to cover signals and slots.
Here is an illegal example:</p>

<p style="margin-top: 1em">class Whatever : public
QButtonGroup { <br>
... <br>
public slots: <br>
QButtonGroup::buttonPressed; // illegal <br>
... <br>
};</p>

<p style="margin-top: 1em">The
QButtonGroup::buttonPressed() slot is protected.</p>

<p style="margin-top: 1em">C++ quiz: What happens if you
try to upgrade a protected member function which is
overloaded?</p>

<p style="margin-top: 1em">- All the functions are
upgraded.</p>

<p style="margin-top: 1em">- That is not legal C++.</p>

<p style="margin-top: 1em">Type macros cannot be used for
signal and slot arguments <br>
Since the moc does not expand #define, type macros that take
an argument will not work in signals and slots. Here is an
illegal example:</p>

<p style="margin-top: 1em">#ifdef ultrix <br>
#define SIGNEDNESS(a) unsigned a <br>
#else <br>
#define SIGNEDNESS(a) a <br>
#endif <br>
class Whatever : public QObject { <br>
... <br>
signals: <br>
void someSignal( SIGNEDNESS(int) ); // illegal <br>
};</p>

<p style="margin-top: 1em">A #define without arguments
works.</p>

<p style="margin-top: 1em">Nested classes cannot be in the
signals or slots sections nor have signals or slots <br>
Here&rsquo;s an example:</p>

<p style="margin-top: 1em">class A { <br>
Q_OBJECT <br>
public: <br>
class B { <br>
public slots: // illegal <br>
void b(); <br>
... <br>
}; <br>
signals: <br>
class B { // illegal <br>
void b(); <br>
... <br>
}: <br>
};</p>

<p style="margin-top: 1em">Constructors cannot be used in
signals or slots sections <br>
It is a mystery to us why anyone would put a constructor on
either the signals or slots sections. You can&rsquo;t,
anyway (except that it happens to work in some cases). Put
them in <br>
private, protected or public sections, where they belong.
Here is an example of the illegal syntax:</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
public slots: <br>
SomeClass( QObject *parent, const char *name ) <br>
: QObject( parent, name ) {} // illegal <br>
... <br>
};</p>

<p style="margin-top: 1em">Properties need to be declared
before the public section that contains the respective get
and set functions <br>
Declaring the first property within or after the public
section that contains the type definition and the respective
get and set functions does not work as expected. The moc
will <br>
complain that it can neither find the functions nor resolve
the type. Here is an example of the illegal syntax:</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
public: <br>
... <br>
// illegal <br>
Q_PROPERTY( Priority priority READ priority WRITE
setPriority ) <br>
Q_ENUMS( Priority ) <br>
enum Priority { High, Low, VeryHigh, VeryLow }; <br>
void setPriority( Priority ); <br>
Priority priority() const; <br>
... <br>
};</p>

<p style="margin-top: 1em">Work around this limitation by
declaring all properties at the beginning of the class
declaration, right after Q_OBJECT:</p>

<p style="margin-top: 1em">class SomeClass : public QObject
{ <br>
Q_OBJECT <br>
Q_PROPERTY( Priority priority READ priority WRITE
setPriority ) <br>
Q_ENUMS( Priority ) <br>
public: <br>
... <br>
enum Priority { High, Low, VeryHigh, VeryLow }; <br>
void setPriority( Priority ); <br>
Priority priority() const; <br>
... <br>
};</p>

<p style="margin-top: 1em">SEE ALSO <br>
http://www.trolltech.com, C++ ARM, section r.11.3 (for the
answer to the quiz), and http://doc.trolltech.com (for
complete Qt documentation).</p>

<p style="margin-top: 1em">Trolltech AS 24 June 2001
moc(1)</p>
<hr>
</body>
</html>
