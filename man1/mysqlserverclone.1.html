<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MYSQLSERVERCLONE()</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MYSQLSERVERCLONE()</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">MYSQLSERVERCLONE()</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mysqlserverclone - Clone Existing Server to Create New Server
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 27.00ex; text-indent: -27.00ex;"><b>mysqlserverclone
  [</b> <b></b><i>options</i><b>]</b></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This utility enables you to clone an existing MySQL server instance to create a
  new server instance on the same host. The utility creates a new datadir (
  <b>--new-data</b>), and, on Unix systems, starts the server with a socket
  file. You can optionally add a password for the login user account on the new
  instance.
<div class="Pp"></div>
If the user does not have read and write access to the folder specified by the
  <b>--new-data</b> option, the utility shall issue an error.
<div class="Pp"></div>
Similarly, if the folder specified by <b> --new-data</b> exists and is not
  empty, the utility will not delete the folder and will issue an error message.
  Users must specify the <b>--delete-data</b> option to permit the utility to
  remove the folder prior to starting the cloned server. OPTIONS.PP
  <b>mysqlserverclone</b> accepts the following command-line options:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--help
<div style="height: 1.00em;">&#x00A0;</div>
Display a help message and exit.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--license
<div style="height: 1.00em;">&#x00A0;</div>
Display license information and exit.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--delete-data
<div style="height: 1.00em;">&#x00A0;</div>
Delete the folder specified by <b>--new-data</b> if it exists and is not
  empty.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--basedir
<div style="height: 1.00em;">&#x00A0;</div>
The base directory for the MySQL server source, as an alternative to the
  <b>--server</b> option.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
shell&gt;  <b>mysqlserverclone</b> <b>--basedir=/source/mysql-5.6 \</b>
<b>--new-data=/source/temp_3007 --new-port=3007 --new-id=101 \</b>
<b>--root=root --mysqld=&quot;--log-bin --gtid-mode=on --log-slave-updates \</b>
<b>--enforce-gtid-consistency --master-info-repository=table \</b>
<b>--report-host=localhost --report-port=3007&quot; --delete</b>
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--force
<div style="height: 1.00em;">&#x00A0;</div>
Ignore the maximum path length and the low space checks for the
  <b>--new-data</b> option.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--mysqld=&lt;options&gt;
<div style="height: 1.00em;">&#x00A0;</div>
Additional options for <b>mysqld</b>. To specify multiple options, separate them
  by spaces. Use appropriate quoting as necessary. For example, to specify
  --log-bin=binlog and --general-log-file=&quot;mylogfile&quot;, use:
<div style="height: 1.00em;">&#x00A0;</div>
If the option --skip-innodb is included when connecting to a MySQL server
  version 5.7.5 or higher, the option is ignored and a warning is issued.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
--mysqld=&quot;--log-bin=binlog --general-log-file='my log file'&quot;
</pre>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--new-data=&lt;path_to_new_datadir&gt;
<div style="height: 1.00em;">&#x00A0;</div>
The full path to the location of the data directory for the new instance. The
  path size must be 200 characters or less and it requires at least 120 MB of
  free space.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--new-id=&lt;server_id&gt;
<div style="height: 1.00em;">&#x00A0;</div>
The server_id value for the new server instance. The default is 2.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--new-port=&lt;port&gt;
<div style="height: 1.00em;">&#x00A0;</div>
The port number for the new server instance. The default is 3307.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--quiet, -q
<div style="height: 1.00em;">&#x00A0;</div>
Turn off all messages for quiet execution.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--root-password=&lt;password&gt;
<div style="height: 1.00em;">&#x00A0;</div>
The password for the root user of the new server instance.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--server=&lt;source&gt;
<div style="height: 1.00em;">&#x00A0;</div>
Connection information for the server to be cloned.
<div style="height: 1.00em;">&#x00A0;</div>
To connect to a server, it is necessary to specify connection parameters such as
  user name, host name, password, and either a port or socket. MySQL Utilities
  provides a number of ways to provide this information. All of the methods
  require specifying your choice via a command-line option such as --server,
  --master, --slave, etc. The methods include the following in order of most
  secure to least secure.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Use login-paths from your .mylogin.cnf
  file (encrypted, not visible). Example : &lt;
  <i>login-path</i>&gt;[:&lt;<i>port</i>&gt;][:&lt; <i>socket</i>&gt;]</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Use a configuration file (unencrypted,
  not visible) Note: available in release-1.5.0. Example : &lt;
  <i>configuration-file-path</i>&gt;[:&lt; <i>section</i>&gt;]</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Specify the data on the command-line
  (unencrypted, visible). Example : &lt;
  <i>user</i>&gt;[:&lt;<i>passwd</i>&gt;]@&lt;
  <i>host</i>&gt;[:&lt;<i>port</i>&gt;][:&lt; <i>socket</i>&gt;]</div>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--ssl-ca
<div style="height: 1.00em;">&#x00A0;</div>
The path to a file that contains a list of trusted SSL CAs.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--ssl-cert
<div style="height: 1.00em;">&#x00A0;</div>
The name of the SSL certificate file to use for establishing a secure
  connection.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--ssl-cert
<div style="height: 1.00em;">&#x00A0;</div>
The name of the SSL key file to use for establishing a secure connection.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--ssl
<div style="height: 1.00em;">&#x00A0;</div>
Specifies if the server connection requires use of SSL. If an encrypted
  connection cannot be established, the connection attempt fails. Default
  setting is 0 (SSL not required).</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--start-timeout=&lt;timeout_in_seconds&gt;
<div style="height: 1.00em;">&#x00A0;</div>
Number of seconds to wait for server to start. Default = 10 seconds.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--verbose, -v
<div style="height: 1.00em;">&#x00A0;</div>
Specify how much information to display. Use this option multiple times to
  increase the amount of information. For example, <b>-v</b> = verbose,
  <b>-vv</b> = more verbose, <b>-vvv</b> = debug.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--version
<div style="height: 1.00em;">&#x00A0;</div>
Display version information and exit.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;--write-command=&lt;file_name&gt;,
  -w&lt;file_name&gt;
<div style="height: 1.00em;">&#x00A0;</div>
Path name of file in which to write the command used to launch the new server
  instance.</div>
EXAMPLES.PP The following command demonstrates how to create a new instance of a
  running server, set the root user password and enable binary logging:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
shell&gt;  <b>mkdir /source/test123</b>
shell&gt;  <b>mysqlserverclone --server=root:pass@localhost \</b>
     <b>--new-data=/Users/cbell/source/test123 --new-port=3310 \</b>
     <b>--root-password=pass --mysqld=--log-bin=mysql-bin</b>
# Cloning the MySQL server running on localhost.
# Creating new data directory...
# Configuring new instance...
# Locating mysql tools...
# Setting up empty database and mysql tables...
# Starting new instance of the server...
# Testing connection to new instance...
# Success!
# Setting the root password...
# ...done.
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
PERMISSIONS REQUIRED.PP The user must have permission to read all databases.
  Since we are using the root account for these examples (and you typically
  would), permissions are not generally a problem.
<div class="Pp"></div>
You also need permissions to create the new data directory and write data to it.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2006, 2015, Oracle and/or its affiliates. All rights
  reserved.
<div class="Pp"></div>
This documentation is free software; you can redistribute it and/or modify it
  only under the terms of the GNU General Public License as published by the
  Free Software Foundation; version 2 of the License.
<div class="Pp"></div>
This documentation is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
  details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with the
  program; if not, write to the Free Software Foundation, Inc., 51 Franklin
  Street, Fifth Floor, Boston, MA 02110-1301 USA or see
  http://www.gnu.org/licenses/.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
For more information, please refer to the MySQL Utilities and Fabric
  documentation, which is available online at
  http://dev.mysql.com/doc/index-utils-fabric.html
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Oracle Corporation (http://dev.mysql.com/).</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
