<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SMBTAR(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SMBTAR(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">SMBTAR(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
smbtar - shell script for backing up SMB/CIFS shares directly to UNIX tape
  drives
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 1.00ex; text-indent: -1.00ex;">smbtar [-r]
  [-i] [-a] [-v] {-s&#x00A0;server} [-p&#x00A0;password] [-x&#x00A0;services]
  [-X] [-N&#x00A0;filename] [-b&#x00A0;blocksize] [-d&#x00A0;directory]
  [-l&#x00A0;loglevel] [-u&#x00A0;user] [-t&#x00A0;tape] {filenames}</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This tool is part of the <b>samba</b>(7) suite.
<div class="Pp"></div>
smbtar is a very small shell script on top of <b>smbclient</b>(1) which dumps
  SMB shares directly to tape.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
-s server
<div style="margin-left: 4.00ex;">The SMB/CIFS server that the share resides
  upon.</div>
<div class="Pp"></div>
-x service
<div style="margin-left: 4.00ex;">The share name on the server to connect to.
  The default is &quot;backup&quot;.</div>
<div class="Pp"></div>
-X
<div style="margin-left: 4.00ex;">Exclude mode. Exclude filenames... from tar
  create or restore.</div>
<div class="Pp"></div>
-d directory
<div style="margin-left: 4.00ex;">Change to initial <i>directory </i> before
  restoring / backing up files.</div>
<div class="Pp"></div>
-v
<div style="margin-left: 4.00ex;">Verbose mode.</div>
<div class="Pp"></div>
-p password
<div style="margin-left: 4.00ex;">The password to use to access a share.
  Default: none</div>
<div class="Pp"></div>
-u user
<div style="margin-left: 4.00ex;">The user id to connect as. Default: UNIX login
  name.</div>
<div class="Pp"></div>
-a
<div style="margin-left: 4.00ex;">Reset DOS archive bit mode to indicate file
  has been archived.</div>
<div class="Pp"></div>
-t tape
<div style="margin-left: 4.00ex;">Tape device. May be regular file or tape
  device. Default: <i>$TAPE</i> environmental variable; if not set, a file
  called tar.out.</div>
<div class="Pp"></div>
-b blocksize
<div style="margin-left: 4.00ex;">Blocking factor. Defaults to 20. See tar(1)
  for a fuller explanation.</div>
<div class="Pp"></div>
-N filename
<div style="margin-left: 4.00ex;">Backup only files newer than filename. Could
  be used (for example) on a log file to implement incremental backups.</div>
<div class="Pp"></div>
-i
<div style="margin-left: 4.00ex;">Incremental mode; tar files are only backed up
  if they have the archive bit set. The archive bit is reset after each file is
  read.</div>
<div class="Pp"></div>
-r
<div style="margin-left: 4.00ex;">Restore. Files are restored to the share from
  the tar file.</div>
<div class="Pp"></div>
-l log level
<div style="margin-left: 4.00ex;">Log (debug) level. Corresponds to the
  <i>-d</i> flag of <b>smbclient</b>(1).</div>
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The <i>$TAPE</i> variable specifies the default tape device to write to. May be
  overridden with the -t option.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The smbtar script has different options from ordinary tar and from smbclient's
  tar command.
<h1 class="Sh" title="Sh" id="CAVEATS"><a class="selflink" href="#CAVEATS">CAVEATS</a></h1>
Sites that are more careful about security may not like the way the script
  handles PC passwords. Backup and restore work on entire shares; should work on
  file lists. smbtar works best with GNU tar and may not work well with other
  versions.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
See the <i>DIAGNOSTICS</i> section for the <b>smbclient</b>(1) command.
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
This man page is correct for version 3 of the Samba suite.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>smbd</b>(8), <b>smbclient</b>(1), <b>smb.conf</b>(5).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
The original Samba software and related utilities were created by Andrew
  Tridgell. Samba is now developed by the Samba Team as an Open Source project
  similar to the way the Linux kernel is developed.
<div class="Pp"></div>
Ricky Poulten wrote the tar extension and this man page. The smbtar script was
  heavily rewritten and improved by Martin Kraemer. Many thanks to everyone who
  suggested extensions, improvements, bug fixes, etc. The man page sources were
  converted to YODL format (another excellent piece of Open Source software,
  available at ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba 2.0
  release by Jeremy Allison. The conversion to DocBook for Samba 2.2 was done by
  Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by
  Alexander Bokovoy.</div>
<table class="foot">
  <tr>
    <td class="foot-date">05/25/2017</td>
    <td class="foot-os">Samba 4.4</td>
  </tr>
</table>
</body>
</html>
