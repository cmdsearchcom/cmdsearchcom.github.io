<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OPENCV_HAARTRAINING(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OPENCV_HAARTRAINING(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">OPENCV_HAARTRAINING(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opencv_haartraining - train classifier
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>opencv_haartraining [options]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>opencv_haartraining</b> is training the classifier. While it is running, you
  can already get an impression, whether the classifier will be suitable or if
  you need to improve the training set and/or parameters.
<div class="Pp"></div>
In the output:
<dl class="Bl-tag">
  <dt class="It-tag">'<b>POS:</b>'</dt>
  <dd class="It-tag">shows the hitrate in the set of training samples (should be
      equal or near to <i>1.0</i> as in stage 0)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">'<b>NEG:</b>'</dt>
  <dd class="It-tag">indicates the false alarm rate (should reach at least
      <i>5*10-6</i> to be a usable classifier for real world applications)</dd>
</dl>
<div class="Pp"></div>
If one of the above values gets <i>0</i> (<i>zero</i>) there is an overflow. In
  this case the false alarm rate is so low, that further training doesn't make
  sense anymore, so it can be stopped.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>opencv_haartraining</b> supports the following options:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-data </b><i>dir_name</i></dt>
  <dd class="It-tag">The directory in which the trained classifier is stored.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-vec </b><i>vec_file_name</i></dt>
  <dd class="It-tag">The file name of the positive samples file (e.g. created by
      the <b>opencv_createsamples</b>(1) utility).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bg </b><i>background_file_name</i></dt>
  <dd class="It-tag">The background description file (the negative sample set).
      It contains a list of images into which randomly distorted versions of the
      object are pasted for positive sample generation.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bg-vecfile</b></dt>
  <dd class="It-tag">This option is that bgfilename represents a vec file with
      discrete negatives. The default is <b>not set</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-npos </b><i>number_of_positive_samples</i></dt>
  <dd class="It-tag">The number of positive samples used in training of each
      classifier stage. The default is <i>2000</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nneg </b><i>number_of_negative_samples</i></dt>
  <dd class="It-tag">The number of negative samples used in training of each
      classifier stage. The default is <i>2000</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
Reasonable values are <b>-npos 7000 -nneg 3000</b>.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nstages </b><i>number_of_stage</i></dt>
  <dd class="It-tag">The number of stages to be trained. The default is
      <i>14</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nsplits </b><i>number_of_splits</i></dt>
  <dd class="It-tag">Determine the weak classifier used in stage classifiers. If
      the value is</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>1</b>, then a simple stump classifier is used</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>&gt;=2</b>, then CART classifier with
      <i>number_of_splits</i> internal (split) nodes is used</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The default is <i>1</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mem </b><i>memory_in_MB</i></dt>
  <dd class="It-tag">Available memory in <b>MB</b> for precalculation. The more
      memory you have the faster the training process is. The default is
      <i>200</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sym, -nonsym</b></dt>
  <dd class="It-tag">Specify whether the object class under training has
      vertical symmetry or not. Vertical symmetry speeds up training process and
      reduces memory usage. For instance, frontal faces show off vertical
      symmetry. The default is <b>-sym</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-minhitrate </b><i>min_hit_rate</i></dt>
  <dd class="It-tag">The minimal desired hit rate for each stage classifier.
      Overall hit rate may be estimated as <i>min_hit_rate^number_of_stages</i>.
      The default is <i>0.950000</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-maxfalsealarm </b><i>max_false_alarm_rate</i></dt>
  <dd class="It-tag">The maximal desired false alarm rate for each stage
      classifier. Overall false alarm rate may be estimated as
      <i>max_false_alarm_rate^number_of_stages</i>. The default is
      <i>0.500000</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-weighttrimming </b><i>weight_trimming</i></dt>
  <dd class="It-tag">Specifies whether and how much weight trimming should be
      used. The default is <i>0.950000</i>. A decent choice is <i>0.900000</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-eqw</b></dt>
  <dd class="It-tag">Specify if initial weights of all samples will be equal.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mode
    {</b><i>BASIC</i><b>|</b><i>CORE</i><b>|</b><i>ALL</i><b>}</b></dt>
  <dd class="It-tag">Select the type of haar features set used in training.
      <i>BASIC</i> uses only upright features, while <i>CORE</i> uses the full
      upright feature set and <i>ALL</i> uses the full set of upright and 45
      degree rotated feature set. The default is <i>BASIC</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">For more information on this see
      http://www.lienhart.de/ICIP2002.pdf.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h </b><i>sample_height</i></dt>
  <dd class="It-tag">The sample height (must have the same value as used during
      creation). The default is <i>24</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w </b><i>sample_width</i></dt>
  <dd class="It-tag">The sample width (must have the same value as used during
      creation). The default is <i>24</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bt
    {</b><i>DAB</i><b>|</b><i>RAB</i><b>|</b><i>LB</i><b>|</b><i>GAB</i><b>}</b></dt>
  <dd class="It-tag">The type of the applied boosting algorithm. You can choose
      between Discrete AdaBoost ( <i>DAB</i>), Real AdaBoost (<i>RAB</i>),
      LogitBoost ( <i>LB</i>) and Gentle AdaBoost ( <i>GAB</i>). The default is
      <i>GAB</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-err
    {</b><i>misclass</i><b>|</b><i>gini</i><b>|</b><i>entropy</i><b>}</b></dt>
  <dd class="It-tag">The type of used error if Discrete AdaBoost (<b>-bt
      DAB</b>) algorithm is applied. The default is <i>misclass</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-maxtreesplits
    </b><i>max_number_of_splits_in_tree_cascade</i></dt>
  <dd class="It-tag">The maximal number of splits in a tree cascade. The default
      is <i>0</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-minpos
    </b><i>min_number_of_positive_samples_per_cluster</i></dt>
  <dd class="It-tag">The minimal number of positive samples per cluster. The
      default is <i>500</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
The same information is shown, if <b>opencv_haartraining</b> is called without
  any arguments/options.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
TODO
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>opencv_createsamples</b>(1), <b>opencv_performance</b>(1)
<div class="Pp"></div>
More information and examples can be found in the OpenCV documentation.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
This manual page was written by <b>Daniel Leidert</b>
  &lt;daniel.leidert@wgdd.de&gt; and <b>Nobuhiro Iwamatsu</b>
  &lt;iwamatsu@debian.org&gt; for the Debian project (but may be used by
  others).</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2010</td>
    <td class="foot-os">OpenCV</td>
  </tr>
</table>
</body>
</html>
