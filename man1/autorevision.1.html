<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>AUTOREVISION(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AUTOREVISION(1)</td>
    <td class="head-vol">&#x00A0;</td>
    <td class="head-rtitle">AUTOREVISION(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
autorevision - extract current-revision metadata from version-control
  repositories
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>autorevision</b> <b>-t</b> &lt;output-type&gt; [<b>-o</b> &lt;cache-file&gt;
  [ <b>-f</b>] ] [<b>-e</b> &lt;name&gt;] [<b>-U</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>autorevision</b> <b>-s</b> &lt;symbol&gt; [<b>-o</b> &lt;cache-file&gt;
  [<b>-f</b>] ] [ <b>-e</b> &lt;name&gt;] [<b>-U</b>]
<div style="height: 1.00em;">&#x00A0;</div>
<b>autorevision</b> <b>-V</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Extracts metadata about the head revision from your repository.
<div style="height: 1.00em;">&#x00A0;</div>
This program is meant to be used by project build systems to extract properties
  that can be used in version strings. It can emit source files containing
  variable and macro definitions suitable for use with C, C++, Java, Mac
  info.plist, sh, Python, Perl and many other types of files (see below for the
  full list).
<div style="height: 1.00em;">&#x00A0;</div>
The generated source is written to the standard output.
<div style="height: 1.00em;">&#x00A0;</div>
This program can normally be called from anywhere within a repository copy.
  Under bzr the copy must be of a branch, not a full multibranch repository.
  Under Subversion it must be called under a repository checkout, not the
  repository itself.
<div style="height: 1.00em;">&#x00A0;</div>
If you specify a cache file, then when <b>autorevision</b> is run where no
  repository can be recognized, the values from the cache file will be used
  instead. If a repository can be recognized, the cache is rewritten. This
  feature makes it possible for your build to run from an unpacked tarball that
  includes the cache file.
<h2 class="Ss" title="Ss" id="Valid_Repository_Types"><a class="selflink" href="#Valid_Repository_Types">Valid
  Repository Types</a></h2>
<b>Git</b>: A version greater than 1.7.2.3 is recommended.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Mercurial</b>: A version greater than 1.6 is recommended.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Subversion</b>: Any production version.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Bazaar</b>: Any production version.
<h2 class="Ss" title="Ss" id="Valid_Output_Types"><a class="selflink" href="#Valid_Output_Types">Valid
  Output Types</a></h2>
<b>clojure</b>
<div style="margin-left: 4.00ex;">A clojure source file setting clojure
  variables.</div>
<div class="Pp"></div>
<b>c</b>
<div style="margin-left: 4.00ex;">A C/C++ source file.
<div style="height: 1.00em;">&#x00A0;</div>
autorevision_declr.h in the contribs dir is provided for use with this
  output.</div>
<div class="Pp"></div>
<b>cmake</b>
<div style="margin-left: 4.00ex;">A cmake script file.</div>
<div class="Pp"></div>
<b>csharp</b>
<div style="margin-left: 4.00ex;">C# file with Autorevision class</div>
<div class="Pp"></div>
<b>h</b>
<div style="margin-left: 4.00ex;">A header file suitable for C/C++.</div>
<div class="Pp"></div>
<b>hpp</b>
<div style="margin-left: 4.00ex;">Alternate C++ header file with namespace.
  Namespace is assigned from VCS_BASENAME.</div>
<div class="Pp"></div>
<b>ini</b>
<div style="margin-left: 4.00ex;">A ini source file setting ini variables.</div>
<div class="Pp"></div>
<b>java</b>
<div style="margin-left: 4.00ex;">A Java source file setting class
  properties.</div>
<div class="Pp"></div>
<b>javaprop</b>
<div style="margin-left: 4.00ex;">A Java properties file (like ini); useful when
  META-INF is readable in Java.</div>
<div class="Pp"></div>
<b>js</b>
<div style="margin-left: 4.00ex;">A javascript source file setting javascript
  variables.</div>
<div class="Pp"></div>
<b>json</b>
<div style="margin-left: 4.00ex;">A JSON format file.</div>
<div class="Pp"></div>
<b>lua</b>
<div style="margin-left: 4.00ex;">A lua source file setting lua variables.</div>
<div class="Pp"></div>
<b>m4</b>
<div style="margin-left: 4.00ex;">An m4 source file defining m4 macros.</div>
<div class="Pp"></div>
<b>matlab</b>
<div style="margin-left: 4.00ex;">Matlab output.</div>
<div class="Pp"></div>
<b>octave</b>
<div style="margin-left: 4.00ex;">Octave output.</div>
<div class="Pp"></div>
<b>php</b>
<div style="margin-left: 4.00ex;">A PHP source file setting PHP variables.</div>
<div class="Pp"></div>
<b>pl</b>
<div style="margin-left: 4.00ex;">A Perl source file setting Perl variables
  (<b>perl</b> is an acceptable synonym).</div>
<div class="Pp"></div>
<b>py</b>
<div style="margin-left: 4.00ex;">A Python source file setting Python variables
  ( <b>python</b> is an acceptable synonym).</div>
<div class="Pp"></div>
<b>rpm</b>
<div style="margin-left: 4.00ex;">A RPM spec file format setting spec file
  macros.</div>
<div class="Pp"></div>
<b>scheme</b>
<div style="margin-left: 4.00ex;">A scheme source file setting scheme
  variables.</div>
<div class="Pp"></div>
<b>sh</b>
<div style="margin-left: 4.00ex;">A text file suitable for including from a bash
  script. Will work with Ruby.</div>
<div class="Pp"></div>
<b>swift</b>
<div style="margin-left: 4.00ex;">A Swift source file setting Swift global
  constants.
<div style="height: 1.00em;">&#x00A0;</div>
Unless set <b>VCS_EXTRA</b> and any symbols that are missing because of
  repository support are set to nil.</div>
<div class="Pp"></div>
<b>tex</b>
<div style="margin-left: 4.00ex;">A TeX source file defining TeX macros. Note
  that the symbols are given different names since the underscore has a special
  meaning in TeX. For example, VCS_SHORT_HASH is renamed to \vcsShortHash.</div>
<div class="Pp"></div>
<b>xcode</b>
<div style="margin-left: 4.00ex;">A header like output for use with xcode to
  populate info.plist strings.</div>
<h2 class="Ss" title="Ss" id="Valid_Symbol_Names"><a class="selflink" href="#Valid_Symbol_Names">Valid
  Symbol Names</a></h2>
<b>VCS_TYPE</b>
<div style="margin-left: 4.00ex;">The repository type - &quot;git&quot;,
  &quot;hg&quot;, &quot;bzr&quot;, or &quot;svn&quot;.</div>
<div class="Pp"></div>
<b>VCS_BASENAME</b>
<div style="margin-left: 4.00ex;">The basename of the directory root. For most
  VCSes this will simply be the basename of the repository root directory. For
  Subversion, <b>autorevision</b> will attempt to navigate up though trunk,
  branches, and tags directories to find the actual root.</div>
<div class="Pp"></div>
<b>VCS_NUM</b>
<div style="margin-left: 4.00ex;">A count of revisions between the current one
  and the initial one; useful for reporting build numbers.</div>
<div class="Pp"></div>
<b>VCS_UUID</b>
<div style="margin-left: 4.00ex;">A universally unique identifier, generated
  from the root commit in git and hg; for svn it uses the supplied UUID.
<div style="height: 1.00em;">&#x00A0;</div>
For git we choose the oldest commit if there is more than one.
<div style="height: 1.00em;">&#x00A0;</div>
Not currently implemented for bzr.</div>
<div class="Pp"></div>
<b>VCS_DATE</b>
<div style="margin-left: 4.00ex;">The date of the most recent commit in true
  ISO-8601/RFC3339 format, including seconds.</div>
<div class="Pp"></div>
<b>VCS_BRANCH</b>
<div style="margin-left: 4.00ex;">The name of the branch of the commit graph
  that was selected when autoversion was run.
<div style="height: 1.00em;">&#x00A0;</div>
Under git, this will normally be the shortname of the current branch (the
  asterisked line in the output of &quot;git branch&quot;) except that when the
  branch doesn&#x2019;t have a shortname it will be a full refspec.
<div style="height: 1.00em;">&#x00A0;</div>
Under hg the feature that is called <i>branches</i> is actually a sort of graph
  coloring (multiple heads can have the same branch name) so this symbol is
  filled with the current bookmark if it exists, with the current branch name as
  a fallback.
<div style="height: 1.00em;">&#x00A0;</div>
Under Subversion this will normally be either <i>trunk</i> or the basename of
  some branch or tag subdirectory, depending on where <b>autoversion</b> was
  run.
<div style="height: 1.00em;">&#x00A0;</div>
Under bzr, this is the nick of the branch you are on.</div>
<div class="Pp"></div>
<b>VCS_TAG</b>
<div style="margin-left: 4.00ex;">The name of the most recent tag ancestral to
  the current commit.
<div style="height: 1.00em;">&#x00A0;</div>
Empty under Subversion.</div>
<div class="Pp"></div>
<b>VCS_TICK</b>
<div style="margin-left: 4.00ex;">A count of commits since most recent tag
  ancestral to the current commit or an alias of <b>VCS_NUM</b> if there are no
  prior tags.
<div style="height: 1.00em;">&#x00A0;</div>
Empty under Subversion.</div>
<div class="Pp"></div>
<b>VCS_EXTRA</b>
<div style="margin-left: 4.00ex;">A symbol set aside specifically to be set by
  the user through the environment or via scripts.</div>
<div class="Pp"></div>
<b>VCS_ACTION_STAMP</b>
<div style="margin-left: 4.00ex;">An &quot;action stamp&quot; consists of an
  RFC3339 timestamp in Zulu time, followed by an exclamation point, followed by
  an RFC822 address (technically, an &quot;addr-spec&quot; as defined in 6.1).
<div style="height: 1.00em;">&#x00A0;</div>
For svn the second part is simply the author name.
<div style="height: 1.00em;">&#x00A0;</div>
Not currently implemented for bzr.</div>
<div class="Pp"></div>
<b>VCS_FULL_HASH</b>
<div style="margin-left: 4.00ex;">A full unique identifier for the current
  revision.</div>
<div class="Pp"></div>
<b>VCS_SHORT_HASH</b>
<div style="margin-left: 4.00ex;">A shortened version of <b>VCS_FULL_HASH</b>,
  but <b>VCS_FULL_HASH</b> if it cannot be shortened.</div>
<div class="Pp"></div>
<b>VCS_WC_MODIFIED</b>
<div style="margin-left: 4.00ex;">Set to 1 if the current working directory has
  been modified and 0 if not. If the output language has native Boolean
  literals, true will mean modified and false unmodified. The C/C++ output is
  left as numeric so the preprocessor can test it.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Untracked files are not ignored; see </i><i></i><b>-U</b><i> for
  details.</i></div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-t</b> <i>&lt;output-type&gt;</i>
<div style="margin-left: 4.00ex;">Sets the output type. It is required unless
  <b>-s</b> is specified; both <b>-t</b> and <b>-s</b> cannot be used in the
  same invocation.</div>
<div class="Pp"></div>
<b>-s</b> <i>&lt;symbol&gt;</i>
<div style="margin-left: 4.00ex;">Changes the reporting behavior; instead of
  emitting a symbol file to stdout, only the value of that individual symbol
  will be reported. It is required unless <b>-t</b> is specified; both <b>-t</b>
  and <b>-s</b> cannot be used in the same invocation.</div>
<div class="Pp"></div>
<b>-o</b> <i>&lt;cache-file&gt;</i>
<div style="margin-left: 4.00ex;">Sets the name of the cache file.</div>
<div class="Pp"></div>
<b>-e</b> <i>&lt;name&gt;</i>
<div style="margin-left: 4.00ex;">Sets the output name of <b>VCS_EXTRA</b>
  Defaults to VCS_EXTRA.</div>
<div class="Pp"></div>
<b>-f</b>
<div style="margin-left: 4.00ex;">Forces the use of cache data even when in a
  repo; useful for speeding up subsequent runs if more than one output format is
  needed.</div>
<div class="Pp"></div>
<b>-U</b>
<div style="margin-left: 4.00ex;">Causes untracked files to be checked when
  determining if the working copy is modified <i>for Subversion only</i>. While
  this is the default behavior for all other repository types, it is off by
  default for Subversion because of speed concerns.</div>
<div class="Pp"></div>
<b>-V</b>
<div style="margin-left: 4.00ex;">Emits the autorevision version and
  exits.</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The bzr extractor is not very well tested.
<div style="height: 1.00em;">&#x00A0;</div>
When a git repo is actually a git-svn remote, this tool tries to do the right
  thing and return a Subversion revision. The bug is that the detector code for
  this case is somewhat unreliable; you will get the hash instead if your
  configuration doesn&#x2019;t use svn-remote.svn.url.
<div style="height: 1.00em;">&#x00A0;</div>
Nested repositories, particularly repositories of different types, <i>may</i>
  result in incorrect and unintended behavior.
<div style="height: 1.00em;">&#x00A0;</div>
Unpacking a tarball into a repository <i>will</i> result in incorrect and
  unintended behavior.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Development of autorevision is carried out at
  https://github.com/Autorevision/autorevision
<div style="height: 1.00em;">&#x00A0;</div>
HTML rendered docs and usage examples can be found at
  https://autorevision.github.io/
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
dak180 &lt;dak180@users.sf.net&gt;: concept, bash/C/C++/XCode/PHP/ini support,
  git and hg extraction. Eric S. Raymond &lt;esr@thyrsus.com&gt;:
  Python/Perl/lua/m4 support, svn and bzr extraction, git-svn support, CLI
  design, man page. See AUTHORS.txt for a full list in order of number of
  contributions.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-01-03</td>
    <td class="foot-os">&#x00A0; 1.20</td>
  </tr>
</table>
</body>
</html>
