<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>RIEMANN-CLIENT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RIEMANN-CLIENT(1)</td>
    <td class="head-vol">riemann-c-client</td>
    <td class="head-rtitle">RIEMANN-CLIENT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>riemann-client</b> - Riemann communication tool
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>riemann-client</b> <b>query</b> [<i>OPTIONS</i>...] <i>QUERY</i>
  [<i>HOST</i>] [ <i>PORT</i>]
<div>&#x00A0;</div>
<b>riemann-client</b> <b>send</b> [<i>OPTIONS</i>...] [<i>HOST</i>]
  [<i>PORT</i>]
<div>&#x00A0;</div>
<b>riemann-client</b> <b>--help</b>|<b>-?</b>
<div>&#x00A0;</div>
<b>riemann-client</b> <b>--version</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>riemann-client</b> is a very simple tool to faciliate communication with a
  Riemann event stream processing server. It can be used both for sending events
  to one, and to query it too.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
In both <b>query</b> and <b>send</b> mode, <i>HOST</i> and <i>PORT</i> default
  to <i>localhost</i> and <i>5555</i>, respectively.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Query_mode"><a class="selflink" href="#Query_mode">Query
  mode</a></h2>
In query mode, <b>riemann-client</b> takes one mandatory argument: the query
  itself. It must be a single argument, which will be sent to Riemann as-is, and
  the response dumped to the standard output, or, in case of an error, the error
  message will be written to the standard error.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
See the Riemann documentation <i>http://riemann.io/concepts.html</i> for more
  information about the query syntax.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Apart from the mandatory argument, the <b>riemann-client</b> accepts the
  following options in query mode:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b>, <b>--json</b></dt>
  <dd class="It-tag">Print the result in JSON format, instead of the default,
      human-readable one.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b>, <b>--tcp</b></dt>
  <dd class="It-tag">Send the event via TCP (the default).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b>, <b>--tls</b></dt>
  <dd class="It-tag">Send the event via TLS.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--option</b> <i>option</i>=<i>value</i></dt>
  <dd class="It-tag">Set one client option to the given value.
    <div style="height: 1.00em;">&#x00A0;</div>
    Available client options are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>cafile</b></dt>
  <dd class="It-tag">Path to the file containing trusted certificate authority
      certificates. Only used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>certfile</b></dt>
  <dd class="It-tag">Path to the file containing the public client certificate.
      Only used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keyfile</b></dt>
  <dd class="It-tag">Path to the file containing the private client key. Only
      used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>priorities</b></dt>
  <dd class="It-tag">Priorities for the cipher suites to be used for the
      session.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Submit_mode"><a class="selflink" href="#Submit_mode">Submit
  mode</a></h2>
In submit mode, <b>riemann-client</b> accepts the following options:
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--state</b> <i>STATE</i></dt>
  <dd class="It-tag">The state the event should describe, free-form text,
      optional.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>, <b>--service</b> <i>SERVICE</i></dt>
  <dd class="It-tag">The service the event is coming from.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--host</b> <i>HOST</i></dt>
  <dd class="It-tag">The host the event originates from. Not to be confused with
      the optional <i>HOST</i> parameter of <b>riemann-client</b> itself, which
      sets where to send the events to.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--description</b> <i>DESCRIPTION</i></dt>
  <dd class="It-tag">The description of the event, optional.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--tag</b> <i>TAG</i></dt>
  <dd class="It-tag">This option can be used multiple times to add tags to the
      event.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>, <b>--attribute</b> <i>NAME</i>=<i>VALUE</i></dt>
  <dd class="It-tag">This option can be used multiple times to add custom
      attributes to the event.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--metric-sint64</b> <i>METRIC</i></dt>
  <dd class="It-tag">Sets the metric for the event, using integer precision.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--metric-d</b> <i>METRIC</i></dt>
  <dd class="It-tag">Sets the metric of the event, using double precision.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--metric-f</b> <i>METRIC</i></dt>
  <dd class="It-tag">Sets the metric of the event, using floating point
      precision.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b>, <b>--ttl</b> <i>TTL</i></dt>
  <dd class="It-tag">An optional time-to-live of the event, in seconds (floating
      point number).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b>, <b>--tcp</b></dt>
  <dd class="It-tag">Send the event via TCP (the default).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b>, <b>--udp</b></dt>
  <dd class="It-tag">Send the event via UDP.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b>, <b>--tls</b></dt>
  <dd class="It-tag">Send the event via TLS.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--option</b> <i>option</i>=<i>value</i></dt>
  <dd class="It-tag">Set one client option to the given value.
    <div style="height: 1.00em;">&#x00A0;</div>
    Available client options are:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>cafile</b></dt>
  <dd class="It-tag">Path to the file containing trusted certificate authority
      certificates. Only used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>certfile</b></dt>
  <dd class="It-tag">Path to the file containing the public client certificate.
      Only used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>keyfile</b></dt>
  <dd class="It-tag">Path to the file containing the private client key. Only
      used for TLS connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>priorities</b></dt>
  <dd class="It-tag">Priorities for the cipher suites to be used for the
      session.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-0</b>, <b>--stdin</b></dt>
  <dd class="It-tag">Continously read and send metrics and states from standard
      input. Uses all other fields specified on the command line. For each line
      on standard input, a new event will be sent to Riemann. If the input is a
      number, it will be used as a metric. If not, it will be used as the state.
      If it is a number, followed by a space and some string, then both metric
      and state will be set for the outgoing event.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Sending_an_event"><a class="selflink" href="#Sending_an_event">Sending
  an event</a></h2>
<pre>
$ riemann-client send --state ok \
                      --service &quot;client-test&quot; \
                      --host &quot;my-host&quot; \
                      --description &quot;A message from the Manual&quot; \
                      --tag tag-1 --tag tag-2 \
                      --attribute x-manual=best-friend \
                      --metric-sint64 1 \
                      --ttl 300.5 \
                      --tcp
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Sending_metrics_/_state_from_standard_input"><a class="selflink" href="#Sending_metrics_/_state_from_standard_input">Sending
  metrics / state from standard input</a></h2>
<pre>
$ echo &quot;1.5 ok&quot; | &#x00A0;\
  riemann-client send --service &quot;client-test: stdin&quot; \
                      --host &quot;my-host&quot; \
                      --description &quot;A message from STDIN&quot; \
                      --tag stdin \
                      --tcp \
                      --stdin
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Querying_Riemann"><a class="selflink" href="#Querying_Riemann">Querying
  Riemann</a></h2>
<pre>
$ riemann-client query 'host = &quot;my-host&quot;'
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Using_TLS"><a class="selflink" href="#Using_TLS">Using
  TLS</a></h2>
<pre>
$ riemann-client query 'host = &quot;my-host&quot;' \
                       --tls \
                       --option cafile=tests/data/cacert.pem \
                       --option certfile=tests/data/client.crt \
                       --option keyfile=tests/data/client.key \
                       --option priorities=NORMAL \
                       localhost 5554
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Gergely Nagy <i>algernon@madhouse-project.org</i></div>
<table class="foot">
  <tr>
    <td class="foot-date">March 2016</td>
    <td class="foot-os">The MadHouse Project</td>
  </tr>
</table>
</body>
</html>
