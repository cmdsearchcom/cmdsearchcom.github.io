<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:04:37 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DNSTCPBENCH(1) DNSTCPBENCH(1)</p>

<p style="margin-top: 1em">NAME <br>
dnstcpbench - tool to perform TCP benchmarking of
nameservers</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dnstcpbench [OPTION]... REMOTE-ADDRESS [REMOTE-PORT]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
dnstcpbench reads DNS queries (by default from standard
input) and sends them out in parallel to a remote
nameserver. By default TCP/IP is used, but optionally, UDP
is tried <br>
first, which allows for the benchmarking of TCP/IP
fallback.</p>

<p style="margin-top: 1em">The program reports both mean
and median numbers for queries per second and UDP and TCP
latency. Each query only counts once, even if it is tried
over UDP first. This effec&acirc; <br>
tively means that passing &rsquo;-u&rsquo; can lower query
rates if many queries get shunted to TCP.</p>

<p style="margin-top: 1em">The input format is one query
per line: qname single-space qtype. An example:</p>

<p style="margin-top: 1em">www.powerdns.com ANY</p>

<p style="margin-top: 1em">When benchmarking extended runs,
it may be necessary to enable TIME_WAIT recycling, as TCP/IP
port tuples may otherwise run out. On Linux this is
performed by running:</p>

<p style="margin-top: 1em">echo 1 &gt;
/proc/sys/net/ipv4/tcp_tw_recycle</p>

<p style="margin-top: 1em">The equivalent for IPv6 is not
known.</p>

<p style="margin-top: 1em">OPTIONS <br>
-f | --file FILENAME <br>
FILENAME from which to read queries. Defaults to standard
input if unspecified.</p>

<p style="margin-top: 1em">-h | --help <br>
Provide a helpful message.</p>

<p style="margin-top: 1em">--timeout-msec MSEC <br>
MSEC milliseconds to wait for an answer.</p>

<p style="margin-top: 1em">-u | --udp-first <br>
Attempt resolution via UDP first, only do TCP if truncated
answer is received.</p>

<p style="margin-top: 1em">-v | --verbose <br>
Be wordy on what the program is doing.</p>

<p style="margin-top: 1em">--workers NUM <br>
Use NUM parallel worker threads.</p>

<p style="margin-top: 1em">REMOTE-ADDRESS <br>
IPv4 or IPv6 to test against.</p>

<p style="margin-top: 1em">REMOTE-PORT <br>
Port to test against, defaults to 53.</p>

<p style="margin-top: 1em">BUGS <br>
Currently the timeout code does not actually perform
non-blocking connects or writes. So a slow connect or slow
writes will still cause low performance and delays.</p>

<p style="margin-top: 1em">Median queries per second
statistics are reported as 0 for sub-second runs.</p>

<p style="margin-top: 1em">AUTHORS <br>
PowerDNS.COM BV.</p>

<p style="margin-top: 1em">July 2013 DNSTCPBENCH(1)</p>
<hr>
</body>
</html>
