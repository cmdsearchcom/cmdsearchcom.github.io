<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MOSQUITTO_SUB(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MOSQUITTO_SUB(1)</td>
    <td class="head-vol">Commands</td>
    <td class="head-rtitle">MOSQUITTO_SUB(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mosquitto_sub - an MQTT version 3.1 client for subscribing to topics
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 14.00ex; text-indent: -14.00ex;"><b>mosquitto_sub</b>
  [ <b>-A</b>&#x00A0;<i>bind_address</i>] [<b>-c</b>]
  [<b>-C</b>&#x00A0;<i>msg&#x00A0;count</i>] [ <b>-d</b>]
  [<b>-h</b>&#x00A0;<i>hostname</i>] [ <b>-i</b>&#x00A0;<i>client_id</i>]
  [<b>-I</b>&#x00A0; <i>client&#x00A0;id&#x00A0;prefix</i>]
  [<b>-k</b>&#x00A0;<i>keepalive&#x00A0;time</i>]
  [<b>-p</b>&#x00A0;<i>port&#x00A0;number</i>] [
  <b>-q</b>&#x00A0;<i>message&#x00A0;QoS</i>] [ <b>-R</b>] [<b>-S</b>]
  [<b>-N</b>] [ <b>--quiet</b>] [<b>-v</b>]
  [[<b>-u</b>&#x00A0;<i>username</i>]&#x00A0;[
  <b>-P</b>&#x00A0;<i>password</i>]] [
  <b>--will-topic</b>&#x00A0;<i>topic</i>&#x00A0;[
  <b>--will-payload</b>&#x00A0;<i>payload</i>]&#x00A0;[<b>--will-qos</b>&#x00A0;<i>qos</i>]&#x00A0;[<b>--will-retain</b>]]
  [[{
  <b>--cafile</b>&#x00A0;<i>file</i>&#x00A0;|&#x00A0;<b>--capath</b>&#x00A0;<i>dir</i>}&#x00A0;[<b>--cert</b>&#x00A0;<i>file</i>]&#x00A0;[<b>--key</b>&#x00A0;<i>file</i>]&#x00A0;[<b>--tls-version</b>&#x00A0;<i>version</i>]&#x00A0;[<b>--insecure</b>]]
  | [
  <b>--psk</b>&#x00A0;<i>hex-key</i>&#x00A0;<b>--psk-identity</b>&#x00A0;<i>identity</i>&#x00A0;[
  <b>--tls-version</b>&#x00A0;<i>version</i>]]]
  [<b>--proxy</b>&#x00A0;<i>socks-url</i>] [
  <b>-V</b>&#x00A0;<i>protocol-version</i>] [
  <b>-T</b>&#x00A0;<i>filter-out</i>...]
  <b>-t</b>&#x00A0;<i>message-topic</i>...</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 14.00ex; text-indent: -14.00ex;"><b>mosquitto_sub</b>
  [ <b>--help</b>]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>mosquitto_sub</b> is a simple MQTT version 3.1 client that will subscribe to
  a topic and print the messages that it receives.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The options below may be given on the command line, but may also be placed in a
  config file located at <b>$XDG_CONFIG_HOME/mosquitto_sub</b> or
  <b>$HOME/.config/mosquitto_sub</b> with one pair of <b>-option
  </b><b></b><i>value</i> per line. The values in the config file will be used
  as defaults and can be overridden by using the command line. The exceptions to
  this are <b>-t</b> and <b>-T</b>, which if given in the config file will not
  be overridden. Note also that currently some options cannot be negated, e.g.
  <b>-S</b>. Config file lines that have a <b>#</b> as the first character are
  treated as comments and not processed any further.
<div class="Pp"></div>
<b>-A</b>
<div style="margin-left: 4.00ex;">Bind the outgoing connection to a local ip
  address/hostname. Use this argument if you need to restrict network
  communication to a particular interface.</div>
<div class="Pp"></div>
<b>-c</b>, <b>--disable-clean-session</b>
<div style="margin-left: 4.00ex;">Disable the 'clean session' flag. This means
  that all of the subscriptions for the client will be maintained after it
  disconnects, along with subsequent QoS 1 and QoS 2 messages that arrive. When
  the client reconnects, it will receive all of the queued messages.
<div style="height: 1.00em;">&#x00A0;</div>
If using this option, it is recommended that the client id is set manually with
  <b>--id</b></div>
<div class="Pp"></div>
<b>--cafile</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing PEM
  encoded CA certificates that are trusted. Used to enable SSL communication.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--capath</b></div>
<div class="Pp"></div>
<b>--capath</b>
<div style="margin-left: 4.00ex;">Define the path to a directory containing PEM
  encoded CA certificates that are trusted. Used to enable SSL communication.
<div style="height: 1.00em;">&#x00A0;</div>
For <b>--capath</b> to work correctly, the certificate files must have
  &quot;.crt&quot; as the file ending and you must run &quot;c_rehash &lt;path
  to capath&gt;&quot; each time you add/remove a certificate.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--cafile</b></div>
<div class="Pp"></div>
<b>--cert</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing a PEM
  encoded certificate for this client, if required by the server.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--key</b>.</div>
<div class="Pp"></div>
<b>--ciphers</b>
<div style="margin-left: 4.00ex;">An openssl compatible list of TLS ciphers to
  support in the client. See <b>ciphers</b>(1) for more information.</div>
<div class="Pp"></div>
<b>-C</b>
<div style="margin-left: 4.00ex;">Disconnect and exit the program immediately
  after the given count of messages have been received. This may be useful in
  shell scripts where on a single status value is required, for example.
<div style="height: 1.00em;">&#x00A0;</div>
Combine with <b>-R</b> to print only the first set of fresh messages (i.e. that
  does not have the retained flag set), or with <b>-T</b> to filter which topics
  are processed.</div>
<div class="Pp"></div>
<b>-d</b>, <b>--debug</b>
<div style="margin-left: 4.00ex;">Enable debug messages.</div>
<div class="Pp"></div>
<b>--help</b>
<div style="margin-left: 4.00ex;">Display usage information.</div>
<div class="Pp"></div>
<b>-h</b>, <b>--host</b>
<div style="margin-left: 4.00ex;">Specify the host to connect to. Defaults to
  localhost.</div>
<div class="Pp"></div>
<b>-i</b>, <b>--id</b>
<div style="margin-left: 4.00ex;">The id to use for this client. If not given,
  defaults to mosquitto_sub_ appended with the process id of the client. Cannot
  be used at the same time as the <b>--id-prefix</b> argument.</div>
<div class="Pp"></div>
<b>-I</b>, <b>--id-prefix</b>
<div style="margin-left: 4.00ex;">Provide a prefix that the client id will be
  built from by appending the process id of the client. This is useful where the
  broker is using the clientid_prefixes option. Cannot be used at the same time
  as the <b>--id</b> argument.</div>
<div class="Pp"></div>
<b>--insecure</b>
<div style="margin-left: 4.00ex;">When using certificate based encryption, this
  option disables verification of the server hostname in the server certificate.
  This can be useful when testing initial server configurations but makes it
  possible for a malicious third party to impersonate your server through DNS
  spoofing, for example. Use this option in testing <i>only</i>. If you need to
  resort to using this option in a production environment, your setup is at
  fault and there is no point using encryption.</div>
<div class="Pp"></div>
<b>-k</b>, <b>--keepalive</b>
<div style="margin-left: 4.00ex;">The number of seconds between sending PING
  commands to the broker for the purposes of informing it we are still connected
  and functioning. Defaults to 60 seconds.</div>
<div class="Pp"></div>
<b>--key</b>
<div style="margin-left: 4.00ex;">Define the path to a file containing a PEM
  encoded private key for this client, if required by the server.
<div style="height: 1.00em;">&#x00A0;</div>
See also <b>--cert</b>.</div>
<div class="Pp"></div>
<b>-N</b>
<div style="margin-left: 4.00ex;">Do not append an end of line character to the
  payload when printing. This allows streaming of payload data from multiple
  messages directly to another application unmodified. Only really makes sense
  when not using <b>-v</b>.</div>
<div class="Pp"></div>
<b>-p</b>, <b>--port</b>
<div style="margin-left: 4.00ex;">Connect to the port specified instead of the
  default 1883.</div>
<div class="Pp"></div>
<b>-P</b>, <b>--pw</b>
<div style="margin-left: 4.00ex;">Provide a password to be used for
  authenticating with the broker. Using this argument without also specifying a
  username is invalid. This requires a broker that supports MQTT v3.1. See also
  the <b>--username</b> option.</div>
<div class="Pp"></div>
<b>--proxy</b>
<div style="margin-left: 4.00ex;">Specify a SOCKS5 proxy to connect through.
  &quot;None&quot; and &quot;username&quot; authentication types are supported.
  The <b>socks-url</b> must be of the form
  <b>socks5h://[username[:password]@]host[:port]</b>. The protocol prefix
  <b>socks5h</b> means that hostnames are resolved by the proxy. The symbols
  %25, %3A and %40 are URL decoded into %, : and @ respectively, if present in
  the username or password.
<div style="height: 1.00em;">&#x00A0;</div>
If username is not given, then no authentication is attempted. If the port is
  not given, then the default of 1080 is used.
<div style="height: 1.00em;">&#x00A0;</div>
More SOCKS versions may be available in the future, depending on demand, and
  will use different protocol prefixes as described in <b>curl</b>(1).</div>
<div class="Pp"></div>
<b>--psk</b>
<div style="margin-left: 4.00ex;">Provide the hexadecimal (no leading 0x)
  pre-shared-key matching the one used on the broker to use TLS-PSK encryption
  support. <b>--psk-identity</b> must also be provided to enable TLS-PSK.</div>
<div class="Pp"></div>
<b>--psk-identity</b>
<div style="margin-left: 4.00ex;">The client identity to use with TLS-PSK
  support. This may be used instead of a username if the broker is configured to
  do so.</div>
<div class="Pp"></div>
<b>-q</b>, <b>--qos</b>
<div style="margin-left: 4.00ex;">Specify the quality of service desired for the
  incoming messages, from 0, 1 and 2. Defaults to 0. See <b>mqtt</b>(7) for more
  information on QoS.
<div style="height: 1.00em;">&#x00A0;</div>
The QoS is identical for all topics subscribed to in a single instance of
  mosquitto_sub.</div>
<div class="Pp"></div>
<b>--quiet</b>
<div style="margin-left: 4.00ex;">If this argument is given, no runtime errors
  will be printed. This excludes any error messages given in case of invalid
  user input (e.g. using <b>--port</b> without a port).</div>
<div class="Pp"></div>
<b>-R</b>
<div style="margin-left: 4.00ex;">If this argument is given, messages that are
  received that have the retain bit set will not be printed. Messages with
  retain set are &quot;stale&quot;, in that it is not known when they were
  originally published. When subscribing to a wildcard topic there may be a
  large number of retained messages. This argument suppresses their
  display.</div>
<div class="Pp"></div>
<b>-S</b>
<div style="margin-left: 4.00ex;">Use SRV lookups to determine which host to
  connect to. Performs lookups to <b>_mqtt._tcp.&lt;host&gt;</b> when used in
  conjunction with <b>-h</b>, otherwise uses <b>_mqtt._tcp.&lt;local dns
  domain&gt;</b>.</div>
<div class="Pp"></div>
<b>-t</b>, <b>--topic</b>
<div style="margin-left: 4.00ex;">The MQTT topic to subscribe to. See
  <b>mqtt</b>(7) for more information on MQTT topics.
<div style="height: 1.00em;">&#x00A0;</div>
This option may be repeated to subscribe to multiple topics.</div>
<div class="Pp"></div>
<b>-T</b>, <b>--filter-out</b>
<div style="margin-left: 4.00ex;">Suppress printing of topics that match the
  filter. This allows subscribing to a wildcard topic and only printing a
  partial set of the wildcard hierarchy.
<div style="height: 1.00em;">&#x00A0;</div>
For example, subscribe to the BBC tree, but suppress output from Radio 3:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_sub -t bbc/# -T
  bbc/radio3</div>
<div style="height: 1.00em;">&#x00A0;</div>
This option may be repeated to filter out multiple topics or topic trees.</div>
<div class="Pp"></div>
<b>--tls-version</b>
<div style="margin-left: 4.00ex;">Choose which TLS protocol version to use when
  communicating with the broker. Valid options are <b>tlsv1.2</b>,
  <b>tlsv1.1</b> and <b>tlsv1</b>. The default value is <b>tlsv1.2</b>. If the
  installed version of openssl is too old, only <b>tlsv1</b> will be available.
  Must match the protocol version used by the broker.</div>
<div class="Pp"></div>
<b>-u</b>, <b>--username</b>
<div style="margin-left: 4.00ex;">Provide a username to be used for
  authenticating with the broker. This requires a broker that supports MQTT
  v3.1. See also the <b>--pw</b> argument.</div>
<div class="Pp"></div>
<b>-v</b>, <b>--verbose</b>
<div style="margin-left: 4.00ex;">Print received messages verbosely. With this
  argument, messages will be printed as &quot;topic payload&quot;. When this
  argument is not given, the messages are printed as &quot;payload&quot;.</div>
<div class="Pp"></div>
<b>-V</b>, <b>--protocol-version</b>
<div style="margin-left: 4.00ex;">Specify which version of the MQTT protocol
  should be used when connecting to the rmeote broker. Can be <b>mqttv31</b> or
  <b>mqttv311</b>. Defaults to <b>mqttv31</b>.</div>
<div class="Pp"></div>
<b>--will-payload</b>
<div style="margin-left: 4.00ex;">Specify a message that will be stored by the
  broker and sent out if this client disconnects unexpectedly. This must be used
  in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-qos</b>
<div style="margin-left: 4.00ex;">The QoS to use for the Will. Defaults to 0.
  This must be used in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-retain</b>
<div style="margin-left: 4.00ex;">If given, if the client disconnects
  unexpectedly the message sent out will be treated as a retained message. This
  must be used in conjunction with <b>--will-topic</b>.</div>
<div class="Pp"></div>
<b>--will-topic</b>
<div style="margin-left: 4.00ex;">The topic on which to send a Will, in the
  event that the client disconnects unexpectedly.</div>
<h1 class="Sh" title="Sh" id="WILLS"><a class="selflink" href="#WILLS">WILLS</a></h1>
mosquitto_sub can register a message with the broker that will be sent out if it
  disconnects unexpectedly. See <b>mqtt</b>(7) for more information.
<div class="Pp"></div>
The minimum requirement for this is to use <b>--will-topic</b> to specify which
  topic the will should be sent out on. This will result in a non-retained, zero
  length message with QoS 0.
<div class="Pp"></div>
Use the <b>--will-retain</b>, <b>--will-payload</b> and <b>--will-qos</b>
  arguments to modify the other will parameters.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Note that these really are examples - the subscriptions will work if you run
  them as shown, but there must be something publishing messages on those topics
  for you to receive anything.
<div class="Pp"></div>
Subscribe to temperature information on localhost with QoS 1:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_sub -t sensors/temperature
  -q 1</div>
<div class="Pp"></div>
Subscribe to hard drive temperature updates on multiple machines/hard drives.
  This expects each machine to be publishing its hard drive temperature to
  sensors/machines/HOSTNAME/temperature/HD_NAME.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_sub -t
  sensors/machines/+/temperature/+</div>
<div class="Pp"></div>
Subscribe to all broker status messages:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;mosquitto_sub -v -t \$SYS/#</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
$XDG_CONFIG_HOME/mosquitto_sub, $HOME/.config/mosquitto_sub
<div style="margin-left: 4.00ex;">Configuration file for default options.</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<b>mosquitto</b> bug information can be found at
  <b>https://github.com/eclipse/mosquitto/issues</b>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>mqtt</b>(7), <b>mosquitto_pub</b>(1), <b>mosquitto</b>(8),
  <b>libmosquitto</b>(3), <b>mosquitto-tls</b>(7)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Roger Light &lt;roger@atchoo.org&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">07/10/2017</td>
    <td class="foot-os">Mosquitto Project</td>
  </tr>
</table>
</body>
</html>
