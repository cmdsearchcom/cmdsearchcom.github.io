<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:09 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MPOP(1) General Commands Manual MPOP(1)</p>

<p style="margin-top: 1em">NAME <br>
mpop - A POP3 client</p>

<p style="margin-top: 1em">SYNOPSIS <br>
Mail retrieval mode (default): <br>
mpop [option...] [--] [account...] <br>
mpop --host=host [option...]</p>

<p style="margin-top: 1em">Server information mode: <br>
mpop [option...] --serverinfo [account...] <br>
mpop --host=host [option...] --serverinfo</p>

<p style="margin-top: 1em">DESCRIPTION <br>
In mail retrieval mode of operation, mpop retrieves mails
from one or more POP3 mailboxes, optionally does some
filtering, and delivers them through a mail delivery agent
(MDA), <br>
to a maildir folder, or to an mbox file. Mails that were
successfully delivered before will not be retrieved a second
time, even if errors occur or mpop is terminated in the <br>
middle of a session. <br>
In server information mode, mpop prints information about
one or more POP3 servers. <br>
If no account names are given on the command line, one named
default will be used. <br>
The best way to start is probably to have a look at the
EXAMPLES section.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The standard sendmail exit codes are used, as defined in
sysexits.h.</p>

<p style="margin-top: 1em">OPTIONS <br>
Options override configuration file settings, for every used
account.</p>

<p style="margin-top: 1em">General Options</p>

<p style="margin-top: 1em">--version <br>
Print version information, including information about the
libraries used.</p>

<p style="margin-top: 1em">--help Print help.</p>

<p style="margin-top: 1em">-P, --pretend <br>
Print the configuration settings that would be used, but do
not take further action. An asterisk (&lsquo;*&rsquo;) will
be printed instead of your password.</p>

<p style="margin-top: 1em">-d, --debug <br>
Print lots of debugging information, including the whole
conversation with the server. Be careful with this option:
the (potentially dangerous) output will not be <br>
sanitized, and your password may get printed in an easily
decodable format! <br>
This option implies --half-quiet, because the progress
output would interfere with the debugging output.</p>

<p style="margin-top: 1em">Changing the mode of
operation</p>

<p style="margin-top: 1em">-S, --serverinfo <br>
Print information about the POP3 server(s) and exit. This
includes information about supported features (pipelining,
authentication methods, TOP command, ...), <br>
about parameters (time for which mails will not be deleted,
minimum time between logins, ...), and about the TLS
certificate (if TLS is active).</p>

<p style="margin-top: 1em">Configuration options</p>

<p style="margin-top: 1em">-C, --file=conffile <br>
Use the given file instead of ~/.mpoprc as configuration
file.</p>

<p style="margin-top: 1em">--host=hostname <br>
Use this server with settings from the command line; do not
use any configuration file data. This option disables
loading of the configuration file. You cannot use <br>
both this option and account names on the command line.</p>

<p style="margin-top: 1em">--port=number <br>
Set the port number to connect to. See the port command.</p>

<p style="margin-top: 1em">--timeout=(off|seconds) <br>
Set a network timeout. See the timeout command.</p>

<p style="margin-top: 1em">--pipelining=(auto|on|off) <br>
Enable or disable POP3 pipelining. See the pipelining
command.</p>

<p style="margin-top: 1em">--proxy-host=[IP|hostname] <br>
Set or unset a SOCKS proxy to use. See the proxy_host
command.</p>

<p style="margin-top: 1em">--proxy-port=[number] <br>
Set or unset a port number for the proxy host. See the
proxy_port command.</p>

<p style="margin-top: 1em">--received-header[=(on|off)]
<br>
Enable or disable the Received header. See the
received_header command.</p>

<p style="margin-top: 1em">--auth[=(on|method)] <br>
Set the authentication method to automatic (with
&quot;on&quot;) or manually choose an authentication method.
See the auth command.</p>

<p style="margin-top: 1em">--user=[username] <br>
Set or unset the user name for authentication. See the user
command.</p>

<p style="margin-top: 1em">--passwordeval=[eval] <br>
Evaluate password for authentication. See the passwordeval
command.</p>

<p style="margin-top: 1em">--tls[=(on|off)] <br>
Enable or disable TLS/SSL. See the tls command.</p>

<p style="margin-top: 1em">--tls-starttls[=(on|off)] <br>
Enable or disable STARTTLS for TLS. See the tls_starttls
command.</p>

<p style="margin-top: 1em">--tls-trust-file=[file] <br>
Set or unset a trust file for TLS. See the tls_trust_file
command.</p>

<p style="margin-top: 1em">--tls-crl-file=[file] <br>
Set or unset a certificate revocation list (CRL) file for
TLS. See the tls_crl_file command.</p>

<p style="margin-top: 1em">--tls-fingerprint=[fingerprint]
<br>
Set ot unset the fingerprint of a trusted TLS certificate.
See the tls_fingerprint command.</p>

<p style="margin-top: 1em">--tls-key-file=[file] <br>
Set or unset a key file for TLS. See the tls_key_file
command.</p>

<p style="margin-top: 1em">--tls-cert-file=[file] <br>
Set or unset a cert file for TLS. See the tls_cert_file
command.</p>

<p style="margin-top: 1em">--tls-certcheck[=(on|off)] <br>
Enable or disable server certificate checks for TLS. See the
tls_certcheck command.</p>

<p style="margin-top: 1em">--tls-min-dh-prime-bits=[bits]
<br>
Set or unset minimum bit size of the Diffie-Hellmann (DH)
prime. See the tls_min_dh_prime_bits command.</p>

<p style="margin-top: 1em">--tls-priorities=[priorities]
<br>
Set or unset TLS priorities. See the tls_priorities
command.</p>

<p style="margin-top: 1em">Options specific to mail
retrieval mode</p>

<p style="margin-top: 1em">-q, --quiet <br>
Do not print status or progress information.</p>

<p style="margin-top: 1em">-Q, --half-quiet <br>
Print status but not progress information.</p>

<p style="margin-top: 1em">-a, --all-accounts <br>
Query all accounts in the configuration file.</p>

<p style="margin-top: 1em">-A, --auth-only <br>
Authenticate only; do not retrieve mail. Useful for
SMTP-after-POP.</p>

<p style="margin-top: 1em">-s, --status-only <br>
Print number and size of mails in each account only; do not
retrieve mail.</p>

<p style="margin-top: 1em">-n, --only-new[=(on|off)] <br>
Process only new messages. See the only_new command.</p>

<p style="margin-top: 1em">-k, --keep[=(on|off)] <br>
Do not delete mails from POP3 servers, regardless of other
options or settings. See the keep command.</p>

<p style="margin-top: 1em">--killsize=(off|size) <br>
Set or unset kill size. See the killsize command.</p>

<p style="margin-top: 1em">--skipsize=(off|size) <br>
Set or unset skip size. See the skipsize command.</p>

<p style="margin-top: 1em">--filter=[program] <br>
Set a filter which will decide whether to retrieve, skip, or
delete each mail by investigating the mail&rsquo;s headers.
See the filter command.</p>


<p style="margin-top: 1em">--delivery=method,method_arguments...
<br>
How to deliver messages received from this account. See the
delivery command. Note that a comma is used instead of a
blank to separate the method from its argu&acirc; <br>
ments.</p>

<p style="margin-top: 1em">--uidls-file=filename <br>
File to store UIDLs in. See the uidls_file command.</p>

<p style="margin-top: 1em">USAGE <br>
The default configuration file is ~/.mpoprc. Settings in
this file can be changed by command line options. <br>
A configuration file is a simple text file. Empty lines and
comment lines (first non-blank character is &rsquo;#&rsquo;)
are ignored. Every other line must contain a command and may
contain <br>
an argument to that command. The argument may be enclosed in
double quotes (&quot;). <br>
If a file name starts with the tilde (~), this tilde will be
replaced by $HOME. <br>
If a command accepts the argument on, it also accepts an
empty argument and treats that as if it was on. <br>
Commands are organized in accounts. Each account starts with
the account command and defines the settings for one POP3
account.</p>

<p style="margin-top: 1em">Commands are as follows:</p>

<p style="margin-top: 1em">defaults <br>
Set defaults. The following configuration commands will set
default values for all following account definitions.</p>

<p style="margin-top: 1em">account name [:account[,...]]
<br>
Start a new account definition with the given name. The
current default values are filled in. <br>
If a colon and a list of previously defined accounts is
given after the account name, the new account, with the
filled in default values, will inherit all settings from
<br>
the accounts in the list.</p>

<p style="margin-top: 1em">host hostname <br>
The POP3 server to retrieve mails from. The argument may be
a host name or a network address. Every account definition
must contain this command.</p>

<p style="margin-top: 1em">port number <br>
The port that the POP3 server listens on. The default is 110
(&quot;pop3&quot;), unless TLS without STARTTLS is used, in
which case it is 995 (&quot;pop3s&quot;).</p>

<p style="margin-top: 1em">timeout (off|seconds) <br>
Set or unset a network timeout, in seconds. The default is
180 seconds. The argument off means that no timeout will be
set, which means that the operating system default <br>
will be used.</p>

<p style="margin-top: 1em">pipelining (auto|on|off) <br>
Enable or disable POP3 pipelining. You should never need to
change the default setting, which is auto: mpop enables
pipelining for POP3 servers that advertise this capa&acirc;
<br>
bility, and disables it for all other servers. Pipelining
can speed up a POP3 session substantially.</p>

<p style="margin-top: 1em">proxy_host [IP|hostname] <br>
Use a SOCKS proxy. All network traffic will go through this
proxy host, including DNS queries, except for a DNS query
that might be necessary to resolve the proxy host <br>
name itself (this can be avoided by using an IP address as
proxy host name). An empty hostname argument disables proxy
usage. The supported SOCKS protocol version is 5. <br>
If you want to use this with Tor, see also &quot;Using mpop
with Tor&quot; below.</p>

<p style="margin-top: 1em">proxy_port [number] <br>
Set the port number for the proxy host. An empty number
argument resets this to the default port, which is 1080
(&quot;socks&quot;).</p>

<p style="margin-top: 1em">auth [(on|method)] <br>
Choose an authentication method. The default argument on
chooses a method automatically. <br>
Usually a user name and a password are used for
authentication. The user name is specified in the
configuration file with the user command. There are five
different meth&acirc; <br>
ods to specify the password: <br>
1. Add the password to the system key ring. Currently
supported key rings are the Gnome key ring and the Mac OS X
Keychain. For the Gnome key ring, use the command <br>
secret-tool (part of Gnome&rsquo;s libsecret) to store
passwords: secret-tool store --label=mpop host
pop.freemail.example service pop3 user joe.smith. On Mac OS
X, use the <br>
Keychain Access GUI application. The account name is same as
the user name. The keychain item name is
pop3://&lt;hostname&gt; where &lt;hostname&gt; matches the
host argument. <br>
2. Store the password in an encrypted files, and use
passwordeval to specify a command to decrypt that file, e.g.
using GnuPG. See EXAMPLES. <br>
3. Store the password in the configuration file using the
password command. (Usually it is not considered a good idea
to store passwords in plain text files. If you do <br>
it anyway, you must make sure that the file can only be read
by yourself.) <br>
4. Store the password in ~/.netrc. This method is probably
obsolete. <br>
5. Type the password into the terminal when it is required.
<br>
It is recommended to use method 1 or 2. <br>
Multiple authentication methods exist. Most servers support
only some of them. Historically, sophisticated methods were
developed to protect passwords from being sent <br>
unencrypted to the server, but nowadays everybody needs TLS
anyway, so the simple methods suffice since the whole
session is protected. A suitable authentication method is
<br>
chosen automatically, and when TLS is disabled for some
reason, only methods that avoid sending clear text passwords
are considered. <br>
The following user / password methods are supported: user (a
simple plain text method supported by all servers), plain
(another simple plain text method, with base64 <br>
encoding, supported by almost all servers), scram-sha-1 (a
method that avoids clear-text passwords), cram-md5 (an
obsolete method that avoids clear-text passwords), apop <br>
(an obsolete method that avoids clear-text passwords, but is
vulnerable to man-in-the-middle attacks), digest-md5 (an
overcomplicated obsolete method that avoids clear- <br>
text passwords, but is not considered secure anymore), login
(a non-standard clear-text method similar to but worse than
the plain method), ntlm (an obscure non-standard <br>
method that is now considered broken; it sometimes requires
a special domain parameter passed via ntlmdomain). <br>
There are currently two authentication methods that are not
based on user / password information and have to be chosen
manually: external (the authentication happens out&acirc;
<br>
side of the protocol, typically by sending a TLS client
certificate, and the method merely confirms that this
authentication succeeded), and gssapi (the Kerberos
framework <br>
takes care of secure authentication, only a user name is
required). <br>
It depends on the underlying authentication library and its
version whether a particular method is supported or not. Use
--version to find out which methods are supported.</p>

<p style="margin-top: 1em">user login <br>
Set the user name for authentication. An empty argument
unsets the user name.</p>

<p style="margin-top: 1em">password secret <br>
Set the password for authentication. An empty argument
unsets the password. Consider using the passwordeval command
or a key ring instead of this command, to avoid stor&acirc;
<br>
ing plain text passwords in the configuration file.</p>

<p style="margin-top: 1em">passwordeval [eval] <br>
Set the password for authentication to the output (stdout)
of the command eval. This can be used e.g. to decrypt
password files on the fly or to query key rings, and thus
<br>
to avoid storing plain text passwords.</p>

<p style="margin-top: 1em">ntlmdomain [domain] <br>
Set a domain for the ntlm authentication method. This is
obsolete.</p>

<p style="margin-top: 1em">tls [(on|off)] <br>
Enable or disable TLS (also known as SSL) for secured
connections. You also need tls_trust_file or
tls_fingerprint, and for some servers you may need to
disable <br>
tls_starttls. <br>
Transport Layer Security (TLS) &quot;... provides
communications privacy over the Internet. The protocol
allows client/server applications to communicate in a way
that is <br>
designed to prevent eavesdropping, tampering, or message
forgery&quot; (quote from RFC2246). <br>
A server can use TLS in one of two modes: via a STARTTLS
command (the session starts with the normal protocol
initialization, and TLS is then started using the
protocol&rsquo;s <br>
STARTTLS command), or immediately (TLS is initialized before
the normal protocol initialization; this requires a separate
port). The first mode is the default, but you can <br>
switch to the second mode by disabling tls_starttls. <br>
When TLS is started, the server sends a certificate to
identify itself. To verify the server identity, a client
program is expected to check that the certificate is
for&acirc; <br>
mally correct and that it was issued by a Certificate
Authority (CA) that the user trusts. (There can also be
certificate chains with intermediate CAs.) <br>
The list of trusted CAs is specified using the
tls_trust_file command. Usually there is some system-wide
default file available, e.g.
/etc/ssl/certs/ca-certificates.crt <br>
on Debian-based systems, but you can also choose to select
the trusted CAs yourself. <br>
One practical problem with this approach is that the client
program should also check if the server certificate has been
revoked for some reason, using a Certificate Revo&acirc;
<br>
cation List (CRL). A CRL file can be specified using the
tls_crl_file command, but getting the relevant CRL files and
keeping them up to date is not straightforward. You <br>
are basically on your own. <br>
A much more serious and fundamental problem is is that you
need to trust CAs. Like any other organization, a CA can be
incompetent, malicious, subverted by bad people, or <br>
forced by government agencies to compromise end users
without telling them. All of these things happened and
continue to happen worldwide. The idea to have central
orga&acirc; <br>
nizations that have to be trusted for your communication to
be secure is fundamentally broken. <br>
Instead of putting trust in a CA, you can choose to trust
only a single certificate for the server you want to connect
to. For that purpose, specify the certificate fin&acirc;
<br>
gerprint with tls_fingerprint. This makes sure that no
man-in-the-middle can fake the identity of the server by
presenting you a fraudulent certificate issued by some CA
<br>
that happens to be in your trust list. However, you have to
update the fingerprint whenever the server certificate
changes, and you have to make sure that the change is <br>
legitimate each time, e.g. when the old certificate expired.
This is inconvenient, but it&rsquo;s the price to pay. <br>
Information about a server certificate can be obtained with
--serverinfo --tls --tls-certcheck=off. This includes the
issuer CA of the certificate (so you can trust that <br>
CA via tls_trust_file), and the fingerprint of the
certificate (so you can trust that particular certificate
via tls_fingerprint). <br>
TLS also allows the server to verify the identity of the
client. For this purpose, the client has to present a
certificate issued by a CA that the server trusts. To <br>
present that certificate, the client also needs the matching
key file. You can set the certificate and key files using
tls_cert_file and tls_key_file. This mechanism can <br>
also be used to authenticate users, so that traditional user
/ password authentication is not necessary anymore. See the
external mechanism in auth.</p>

<p style="margin-top: 1em">tls_starttls [(on|off)] <br>
Choose the TLS variant: start TLS from within the session
(on, default), or tunnel the session through TLS (off).</p>

<p style="margin-top: 1em">tls_trust_file file <br>
Activate server certificate verification using a list of
truted Certification Authorities (CAs). The file must be in
PEM format. Some systems provide a system-wide default <br>
file, e.g. /etc/ssl/certs/ca-certificates.crt on
Debian-based systems with the ca-certificates package. An
empty argument disables this. You should also use
tls_crl_file.</p>

<p style="margin-top: 1em">tls_crl_file [file] <br>
Set a certificate revocation list (CRL) file for TLS, to
check for revoked certificates. An empty argument disables
this.</p>

<p style="margin-top: 1em">tls_fingerprint [fingerprint]
<br>
Set the fingerprint of a single certificate to accept for
TLS. This certificate will be trusted regardless of its
contents. The fingerprint should be of type SHA256, but <br>
can for backwards compatibility also be of type SHA1 or MD5
(please avoid this). The format should be 01:23:45:67:....
Use --serverinfo --tls --tls-certcheck=off <br>
--tls-fingerprint= to get the server certificate
fingerprint.</p>

<p style="margin-top: 1em">tls_key_file file <br>
Send a client certificate to the server (use this together
with tls_cert_file}). The file must contain the private key
of a certificate in PEM format. An empty argument <br>
disables this feature.</p>

<p style="margin-top: 1em">tls_cert_file file <br>
Send a client certificate to the server (use this together
with tls_key_file). The file must contain a certificate in
PEM format. An empty argument disables this feature.</p>

<p style="margin-top: 1em">tls_certcheck [(on|off)] <br>
Enable or disable checks of the server certificate. WARNING:
When the checks are disabled, TLS sessions will be
vulnerable to man-in-the-middle attacks!</p>

<p style="margin-top: 1em">tls_min_dh_prime_bits [bits]
<br>
Set or unset the minimum number of Diffie-Hellman (DH) prime
bits that mpop will accept for TLS sessions. The default is
set by the TLS library and can be selected by <br>
using an empty argument to this command. Only lower the
default (for example to 512 bits) if there is no other way
to make TLS work with the remote server.</p>

<p style="margin-top: 1em">tls_priorities [priorities] <br>
Set the priorities for TLS sessions. The default is set by
the TLS library and can be selected by using an empty
argument to this command. See the GnuTLS documentation of
<br>
the gnutls_priority_init function for a description of the
priorities string.</p>

<p style="margin-top: 1em">delivery method
method_arguments... <br>
How to deliver messages received from this account.</p>

<p style="margin-top: 1em">delivery mda command <br>
Deliver the mails through a mail delivery agent (MDA). <br>
All occurences of %F in the command will be replaced with
the envelope from address of the current message (or
MAILER-DAEMON if none is found). Note that this <br>
address is guaranteed to contain only letters a-z and A-Z,
digits 0-9, and any of &quot;.@_-+/&quot;, even though that
is only a subset of what is theoretically allowed in a <br>
mail address. Other characters, including those interpreted
by the shell, are replaced with &quot;_&quot;. Nevertheless,
you should put %F into single quotes: &rsquo;%F&rsquo;. <br>
Use &quot;delivery mda /usr/bin/procmail -f &rsquo;%F&rsquo;
-d $USER&quot; for the procmail MDA. <br>
Use &quot;delivery mda /usr/sbin/sendmail -oi -oem -f
&rsquo;%F&rsquo; -- $USER&quot; to let your MTA handle the
mail. <br>
Use &quot;delivery mda /usr/local/bin/msmtp --host=localhost
--from=&rsquo;%F&rsquo; --
$USER@&lsquo;hostname&lsquo;.&lsquo;dnsdomainname&lsquo;&quot;
to pass the mail to your MTA via SMTP. (This is what <br>
fetchmail does by default.)</p>

<p style="margin-top: 1em">delivery maildir directory <br>
Deliver the mails to the given maildir directory. The
directory must exist and it must have the maildir
subdirectories cur, new, and tmp; mpop will not create <br>
directories. This delivery type only works on file systems
that support hard links.</p>

<p style="margin-top: 1em">delivery mbox mbox-file <br>
Deliver the mails to the given file in mbox format. The file
will be locked with fcntl(2). mpop uses the MBOXRD mbox
format variant; see the documentation of the <br>
mbox format.</p>

<p style="margin-top: 1em">delivery exchange directory <br>
Deliver the mails to the given Exchange pickup directory.
The directory must exist.</p>

<p style="margin-top: 1em">If the delivery method needs to
parse the mail headers for an envelope from address (the mda
method if the command contains %F, and the mbox method),
then it needs to cre&acirc; <br>
ate a temporary file to store the mail headers (but not the
body) in. See $TMPDIR in the FILES / ENVIRONMENT
section.</p>

<p style="margin-top: 1em">uidls_file filename <br>
The file to store UIDLs in. These are needed to identify new
messages. %U in the filename will be replaced by the
username of the current account. %H in the filename <br>
will be replaced by the hostname of the current account. If
the filename contains directories that do not exist, mpop
will create them. mpop locks this file for exclu&acirc; <br>
sive access when accessing the associated POP3 account. <br>
The default value is &quot;~/.mpop_uidls/%U_at_%H&quot;. You
can also use a single UIDLS file for multiple accounts, but
then you cannot poll more than one of these accounts at the
<br>
same time.</p>

<p style="margin-top: 1em">only_new [(on|off)] <br>
By default, mpop processes only new messages (new messages
are those that were not already successfully retrieved in an
earlier session). If this option is turned off, <br>
mpop will process all messages.</p>

<p style="margin-top: 1em">keep [(on|off)] <br>
Keep all mails on the POP3 server, never delete them. The
default behaviour is to delete mails that have been
successfully retrieved or filtered by kill filters.</p>

<p style="margin-top: 1em">killsize (off|size) <br>
Mails larger than the given size will be deleted (unless the
keep command is used, in which case they will just be
skipped). The size argument must be zero or greater. If <br>
it is followed by a &lsquo;k&rsquo; or an &lsquo;m&rsquo;,
the size is measured in kibibytes/mebibytes instead of
bytes. Note that some POP3 servers report slightly incorrect
sizes for mails; <br>
see NOTES below. <br>
When killsize is set to 0 and keep is set to on, then all
mails are marked as retrieved, but no mail gets deleted from
the server. This can be used to synchronize the UID <br>
list on the client to the UID list on the server.</p>

<p style="margin-top: 1em">skipsize (off|size) <br>
Mails larger than the given size will be skipped (not
downloaded). The size argument must be zero or greater. If
it is followed by a &lsquo;k&rsquo; or an &lsquo;m&rsquo;,
the size is measured <br>
in kibibytes/mebibytes instead of bytes. Note that some POP3
servers report slightly incorrect sizes for mails; see NOTES
below.</p>

<p style="margin-top: 1em">filter [command] <br>
Set a filter which will decide whether to retrieve, skip, or
delete each mail by investigating the mail&rsquo;s headers.
The POP3 server must support the POP3 TOP command for <br>
this to work; see option --serverinfo above. An empty
argument disables filtering. <br>
All occurences of %F in the command will be replaced with
the envelope from address of the current message (or
MAILER-DAEMON if none is found). Note that this address is
<br>
guaranteed to contain only letters a-z and A-Z, digits 0-9,
and any of &quot;.@_-+/&quot;, even though that is only a
subset of what is theoretically allowed in a mail address.
<br>
Other characters, including those interpreted by the shell,
are replaced with &quot;_&quot;. Nevertheless, you should
put %F into single quotes: &rsquo;%F&rsquo;. <br>
All occurences of %S in the command will be replaced with
the size of the current mail as reported by the POP3 server.
<br>
The mail headers (plus the blank line separating the headers
from the body) will be piped to the command. Based on the
return code, mpop decides what to do with the mail: <br>
0: proceed normally; no special action <br>
1: delete the mail; do not retrieve it <br>
2: skip the mail; do not retrieve it <br>
Return codes greater than or equal to 3 mean that an error
occured. The sysexits.h error codes may be used to give
information about the kind of the error, but this is not
<br>
necessary.</p>

<p style="margin-top: 1em">received_header [(on|off)] <br>
Enable or disable adding a Received header. By default, mpop
prepends a Received header to the mail during delivery. This
is required by the RFCs if the mail is subse&acirc; <br>
quently further delivered e.g. via SMTP.</p>

<p style="margin-top: 1em">FILTERING <br>
There are three filtering commands available. They will be
executed in the following order: <br>
killsize <br>
skipsize <br>
filter <br>
If a filtering command applies to a mail, the remaining
filters will not be executed.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Configuration file</p>

<p style="margin-top: 1em"># Example for a user
configuration file ~/.mpoprc <br>
# <br>
# This file focusses on TLS, authentication, and the mail
delivery method. <br>
# Features not used here include mail filtering, timeouts,
SOCKS proxies, <br>
# TLS parameters, and more.</p>

<p style="margin-top: 1em"># Set default values for all
following accounts. <br>
defaults</p>

<p style="margin-top: 1em"># Always use TLS. <br>
tls on</p>

<p style="margin-top: 1em"># Set a list of trusted CAs for
TLS. You can use a system-wide default file, <br>
# as in this example, or download the root certificate of
your CA and use that. <br>
tls_trust_file /etc/ssl/certs/ca-certificates.crt</p>

<p style="margin-top: 1em"># Additionally, you should use
the tls_crl_file command to check for revoked <br>
# certificates, but unfortunately getting revocation lists
and keeping them <br>
# up to date is not straightforward. <br>
#tls_crl_file ~/.tls-crls</p>

<p style="margin-top: 1em"># Deliver mail to an MBOX mail
file: <br>
delivery mbox ~/Mail/inbox <br>
# Deliver mail to a maildir folder: <br>
#delivery maildir ~/Mail/incoming <br>
# Deliver mail via procmail: <br>
#delivery mda &quot;/usr/bin/procmail -f &rsquo;%F&rsquo; -d
$USER&quot; <br>
# Deliver mail via the local SMTP server: <br>
#delivery mda &quot;/usr/bin/msmtp --host=localhost
--from=&rsquo;%F&rsquo; -- $USER&quot; <br>
# Deliver mail to an Exchange pickup directory: <br>
#delivery exchange c:\xchangeickup</p>

<p style="margin-top: 1em"># A freemail service <br>
account freemail</p>

<p style="margin-top: 1em"># Host name of the POP3 server
<br>
host pop.freemail.example</p>

<p style="margin-top: 1em"># As an alternative to
tls_trust_file/tls_crl_file, you can use tls_fingerprint
<br>
# to pin a single certificate. You have to update the
fingerprint when the <br>
# server certificate changes, but an attacker cannot trick
you into accepting <br>
# a fraudulent certificate. Get the fingerprint with <br>
# $ mpop --serverinfo --tls --tls-certcheck=off
--host=pop.freemail.example <br>
tls_fingerprint
00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33</p>

<p style="margin-top: 1em"># Authentication. The password
is given using one of five methods, see below. <br>
user joe.smith</p>

<p style="margin-top: 1em"># Password method 1: Add the
password to the system keyring, and let mpop get <br>
# it automatically. To set the keyring password using
Gnome&rsquo;s libsecret: <br>
# $ secret-tool store --label=mpop # host
pop.freemail.example # service pop3 # user joe.smith</p>

<p style="margin-top: 1em"># Password method 2: Store the
password in an encrypted file, and tell mpop <br>
# which command to use to decrypt it. This is usually used
with GnuPG, as in <br>
# this example. Usually gpg-agent will ask once for the
decryption password. <br>
passwordeval gpg2 --no-tty -q -d ~/.mpop-password.gpg</p>

<p style="margin-top: 1em"># Password method 3: Store the
password directly in this file. Usually it is not <br>
# a good idea to store passwords in plain text files. If you
do it anyway, at <br>
# least make sure that this file can only be read by
yourself. <br>
#password secret123</p>

<p style="margin-top: 1em"># Password method 4: Store the
password in ~/.netrc. This method is probably not <br>
# relevant anymore.</p>

<p style="margin-top: 1em"># Password method 5: Do not
specify a password. Mpop will then prompt you for <br>
# it. This means you need to be able to type into a terminal
when mpop runs.</p>

<p style="margin-top: 1em"># A second mail box at the same
freemail service <br>
account freemail2 : freemail <br>
user joey</p>

<p style="margin-top: 1em"># The POP3 server of your ISP
<br>
account isp <br>
host mail.isp.example <br>
auth on <br>
user 12345 <br>
# Your ISP runs SpamAssassin, so test each mail for the
&quot;X-Spam-Status: Yes&quot; <br>
# header, and delete all mails with this header before
downloading them. <br>
filter if [ &quot;&lsquo;grep &quot;^X-Spam-Status:
Yes&quot;&lsquo;&quot; ]; then exit 1; else exit 0; fi</p>

<p style="margin-top: 1em"># Set a default account <br>
account default : freemail</p>

<p style="margin-top: 1em">Filtering with SpamAssassin</p>

<p style="margin-top: 1em">The command filter
&quot;/path/to/spamc -c &gt; /dev/null&quot; will delete all
mails that SpamAssassin thinks are spam. Since no message
body is passed to SpamAssassin, you should disable <br>
all body-specific tests in the SpamAssassin configuration
file; for example set use_bayes 0.</p>

<p style="margin-top: 1em">If your mail provider runs
SpamAssassin for you, you just have to check for the result.
The following script can do that when used as an mpop
filter: <br>
#!/bin/sh <br>
if [ &quot;&lsquo;grep &quot;^X-Spam-Status:
Yes&quot;&lsquo;&quot; ]; then <br>
exit 1 # kill this message <br>
else <br>
exit 0 # proceed normally <br>
fi <br>
Since the filter command is passed to a shell, you can also
use this directly: <br>
filter if [ &quot;&lsquo;grep &quot;^X-Spam-Status:
Yes&quot;&lsquo;&quot; ]; then exit 1; else exit 0; fi</p>

<p style="margin-top: 1em">Using mpop with Tor</p>

<p style="margin-top: 1em">Use the following settings: <br>
proxy_host 127.0.0.1 <br>
proxy_port 9050 <br>
tls on <br>
Use an IP address as proxy host name, so that mpop does not
leak a DNS query when resolving it. <br>
TLS is required to prevent exit hosts from reading your POP3
session. You also need tls_trust_file or tls_fingerprint to
check the server identity.</p>

<p style="margin-top: 1em">FILES <br>
~/.mpoprc <br>
Default configuration file.</p>

<p style="margin-top: 1em">~/.mpop_uidls <br>
Default directory to store UIDLs files in.</p>

<p style="margin-top: 1em">~/.netrc and SYSCONFDIR/netrc
<br>
The netrc file contains login information. Before prompting
for a password, msmtp will search it in ~/.netrc and
SYSCONFDIR/netrc.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
$USER, $LOGNAME <br>
These variables override the user&rsquo;s login name.
$LOGNAME is only used if $USER is unset. The user&rsquo;s
login name is used for Received headers.</p>

<p style="margin-top: 1em">$TMPDIR <br>
Directory to create temporary files in. If this is unset, a
system specific default directory is used.</p>

<p style="margin-top: 1em">AUTHOR <br>
mpop was written by Martin Lambers &lt;marlam@marlam.de&gt;
<br>
Other authors are listed in the AUTHORS file in the source
distribution.</p>

<p style="margin-top: 1em">SEE ALSO <br>
procmail(1), spamassassin(1), netrc(5) or ftp(1), mbox(5),
fcntl(2)</p>

<p style="margin-top: 1em">2016-02 MPOP(1)</p>
<hr>
</body>
</html>
