<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MPOP(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MPOP(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">MPOP(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mpop - A POP3 client
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Mail retrieval mode (default):</dt>
  <dd class="It-tag"><b>mpop</b> [option...] [--] [account...]
    <div>&#x00A0;</div>
    <b>mpop</b> --host=host [option...]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Server information mode:</dt>
  <dd class="It-tag"><b>mpop</b> [option...] --serverinfo [account...]
    <div>&#x00A0;</div>
    <b>mpop</b> --host=host [option...] --serverinfo</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
In mail retrieval mode of operation, mpop retrieves mails from one or more POP3
  mailboxes, optionally does some filtering, and delivers them through a mail
  delivery agent (MDA), to a maildir folder, or to an mbox file. Mails that were
  successfully delivered before will not be retrieved a second time, even if
  errors occur or mpop is terminated in the middle of a session.
<div>&#x00A0;</div>
In server information mode, mpop prints information about one or more POP3
  servers.
<div>&#x00A0;</div>
If no account names are given on the command line, one named <i>default</i> will
  be used.
<div>&#x00A0;</div>
The best way to start is probably to have a look at the EXAMPLES section.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The standard sendmail exit codes are used, as defined in sysexits.h.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Options override configuration file settings, for every used account.
<dl class="Bl-tag">
  <dt class="It-tag"><b>General Options</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">--version</dt>
  <dd class="It-tag">Print version information, including information about the
      libraries used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Print help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-P, --pretend</dt>
  <dd class="It-tag">Print the configuration settings that would be used, but do
      not take further action. An asterisk (`*') will be printed instead of your
      password.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-d, --debug</dt>
  <dd class="It-tag">Print lots of debugging information, including the whole
      conversation with the server. Be careful with this option: the
      (potentially dangerous) output will not be sanitized, and your password
      may get printed in an easily decodable format!
    <div>&#x00A0;</div>
    This option implies --half-quiet, because the progress output would
      interfere with the debugging output.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Changing the mode of operation</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">-S, --serverinfo</dt>
  <dd class="It-tag">Print information about the POP3 server(s) and exit. This
      includes information about supported features (pipelining, authentication
      methods, TOP command, ...), about parameters (time for which mails will
      not be deleted, minimum time between logins, ...), and about the TLS
      certificate (if TLS is active).</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Configuration options</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">-C, --file=<i>conffile</i></dt>
  <dd class="It-tag">Use the given file instead of ~/.mpoprc as configuration
      file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--host=<i>hostname</i></dt>
  <dd class="It-tag">Use this server with settings from the command line; do not
      use any configuration file data. This option disables loading of the
      configuration file. You cannot use both this option and account names on
      the command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--port=<i>number</i></dt>
  <dd class="It-tag">Set the port number to connect to. See the <b>port</b>
      command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--timeout=(<i>off</i>|<i>seconds</i>)</dt>
  <dd class="It-tag">Set a network timeout. See the <b>timeout</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--pipelining=(<i>auto</i>|<i>on</i>|<i>off)</i></dt>
  <dd class="It-tag">Enable or disable POP3 pipelining. See the
      <b>pipelining</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--proxy-host=[<i>IP</i>|<i>hostname</i>]</dt>
  <dd class="It-tag">Set or unset a SOCKS proxy to use. See the
      <b>proxy_host</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--proxy-port=[<i>number</i>]</dt>
  <dd class="It-tag">Set or unset a port number for the proxy host. See the
      <b>proxy_port</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--received-header[=(<i>on</i>|<i>off)]</i></dt>
  <dd class="It-tag">Enable or disable the Received header. See the
      <b>received_header</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--auth[=(<i>on</i>|<i>method</i>)]</dt>
  <dd class="It-tag">Set the authentication method to automatic (with
      &quot;on&quot;) or manually choose an authentication method. See the
      <b>auth</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--user=[<i>username</i>]</dt>
  <dd class="It-tag">Set or unset the user name for authentication. See the
      <b>user</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--passwordeval=[<i>eval</i>]</dt>
  <dd class="It-tag">Evaluate password for authentication. See the
      <b>passwordeval</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls[=(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable TLS/SSL. See the <b>tls</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-starttls[=(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable STARTTLS for TLS. See the
      <b>tls_starttls</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-trust-file=[<i>file</i>]</dt>
  <dd class="It-tag">Set or unset a trust file for TLS. See the
      <b>tls_trust_file</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-crl-file=[<i>file</i>]</dt>
  <dd class="It-tag">Set or unset a certificate revocation list (CRL) file for
      TLS. See the <b>tls_crl_file</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-fingerprint=[<i>fingerprint</i>]</dt>
  <dd class="It-tag">Set ot unset the fingerprint of a trusted TLS certificate.
      See the <b>tls_fingerprint</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-key-file=[<i>file</i>]</dt>
  <dd class="It-tag">Set or unset a key file for TLS. See the
      <b>tls_key_file</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-cert-file=[<i>file</i>]</dt>
  <dd class="It-tag">Set or unset a cert file for TLS. See the
      <b>tls_cert_file</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-certcheck[=(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable server certificate checks for TLS. See
      the <b>tls_certcheck</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-min-dh-prime-bits=[<i>bits</i>]</dt>
  <dd class="It-tag">Set or unset minimum bit size of the Diffie-Hellmann (DH)
      prime. See the <b>tls_min_dh_prime_bits</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--tls-priorities=[<i>priorities</i>]</dt>
  <dd class="It-tag">Set or unset TLS priorities. See the <b>tls_priorities</b>
      command.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Options specific to mail retrieval mode</b></dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">-q, --quiet</dt>
  <dd class="It-tag">Do not print status or progress information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-Q, --half-quiet</dt>
  <dd class="It-tag">Print status but not progress information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-a, --all-accounts</dt>
  <dd class="It-tag">Query all accounts in the configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-A, --auth-only</dt>
  <dd class="It-tag">Authenticate only; do not retrieve mail. Useful for
      SMTP-after-POP.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s, --status-only</dt>
  <dd class="It-tag">Print number and size of mails in each account only; do not
      retrieve mail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-n, --only-new[=(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Process only new messages. See the <b>only_new</b>
    command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-k, --keep[=(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Do not delete mails from POP3 servers, regardless of other
      options or settings. See the <b>keep</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--killsize=(<i>off</i>|<i>size</i>)</dt>
  <dd class="It-tag">Set or unset kill size. See the <b>killsize</b>
    command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--skipsize=(<i>off</i>|<i>size</i>)</dt>
  <dd class="It-tag">Set or unset skip size. See the <b>skipsize</b>
    command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--filter=[<i>program</i>]</dt>
  <dd class="It-tag">Set a filter which will decide whether to retrieve, skip,
      or delete each mail by investigating the mail's headers. See the
      <b>filter</b> command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--delivery=<i>method</i>,<i>method_arguments...</i></dt>
  <dd class="It-tag">How to deliver messages received from this account. See the
      <b>delivery</b> command. Note that a comma is used instead of a blank to
      separate the method from its arguments.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--uidls-file=<i>filename</i></dt>
  <dd class="It-tag">File to store UIDLs in. See the <b>uidls_file</b>
    command.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
The default configuration file is ~/.mpoprc. Settings in this file can be
  changed by command line options.
<div>&#x00A0;</div>
A configuration file is a simple text file. Empty lines and comment lines (first
  non-blank character is '#') are ignored. Every other line must contain a
  command and may contain an argument to that command. The argument may be
  enclosed in double quotes (&quot;).
<div>&#x00A0;</div>
If a file name starts with the tilde (~), this tilde will be replaced by $HOME.
<div>&#x00A0;</div>
If a command accepts the argument <i>on</i>, it also accepts an empty argument
  and treats that as if it was <i>on</i>.
<div>&#x00A0;</div>
Commands are organized in accounts. Each account starts with the <i>account</i>
  command and defines the settings for one POP3 account.
<div class="Pp"></div>
Commands are as follows:
<dl class="Bl-tag">
  <dt class="It-tag">defaults</dt>
  <dd class="It-tag">Set defaults. The following configuration commands will set
      default values for all following account definitions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">account <i>name</i> [:<i>account</i>[,...]]</dt>
  <dd class="It-tag">Start a new account definition with the given name. The
      current default values are filled in.
    <div>&#x00A0;</div>
    If a colon and a list of previously defined accounts is given after the
      account name, the new account, with the filled in default values, will
      inherit all settings from the accounts in the list.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">host <i>hostname</i></dt>
  <dd class="It-tag">The POP3 server to retrieve mails from. The argument may be
      a host name or a network address. Every account definition must contain
      this command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">port <i>number</i></dt>
  <dd class="It-tag">The port that the POP3 server listens on. The default is
      110 (&quot;pop3&quot;), unless TLS without STARTTLS is used, in which case
      it is 995 (&quot;pop3s&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">timeout (<i>off</i>|<i>seconds</i>)</dt>
  <dd class="It-tag">Set or unset a network timeout, in seconds. The default is
      180 seconds. The argument <i>off</i> means that no timeout will be set,
      which means that the operating system default will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">pipelining (<i>auto</i>|<i>on</i>|<i>off</i>)</dt>
  <dd class="It-tag">Enable or disable POP3 pipelining. You should never need to
      change the default setting, which is <i>auto</i>: mpop enables pipelining
      for POP3 servers that advertise this capability, and disables it for all
      other servers. Pipelining can speed up a POP3 session substantially.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">proxy_host [<i>IP|hostname</i>]</dt>
  <dd class="It-tag">Use a SOCKS proxy. All network traffic will go through this
      proxy host, including DNS queries, except for a DNS query that might be
      necessary to resolve the proxy host name itself (this can be avoided by
      using an IP address as proxy host name). An empty <i>hostname</i> argument
      disables proxy usage. The supported SOCKS protocol version is 5. If you
      want to use this with Tor, see also &quot;Using mpop with Tor&quot;
    below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">proxy_port [<i>number</i>]</dt>
  <dd class="It-tag">Set the port number for the proxy host. An empty
      <i>number</i> argument resets this to the default port, which is 1080
      (&quot;socks&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">auth [(<i>on</i>|<i>method</i>)]</dt>
  <dd class="It-tag">Choose an authentication method. The default argument
      <i>on</i> chooses a method automatically.
    <div>&#x00A0;</div>
    Usually a user name and a password are used for authentication. The user
      name is specified in the configuration file with the <b>user</b> command.
      There are five different methods to specify the password:
    <div>&#x00A0;</div>
    1. Add the password to the system key ring. Currently supported key rings
      are the Gnome key ring and the Mac OS X Keychain. For the Gnome key ring,
      use the command secret-tool (part of Gnome's libsecret) to store
      passwords: secret-tool store --label=mpop host pop.freemail.example
      service pop3 user joe.smith. On Mac OS X, use the Keychain Access GUI
      application. The account name is same as the user name. The keychain item
      name is pop3://&lt;hostname&gt; where &lt;hostname&gt; matches the host
      argument.
    <div>&#x00A0;</div>
    2. Store the password in an encrypted files, and use <b>passwordeval</b> to
      specify a command to decrypt that file, e.g. using GnuPG. See EXAMPLES.
    <div>&#x00A0;</div>
    3. Store the password in the configuration file using the <b>password</b>
      command. (Usually it is not considered a good idea to store passwords in
      plain text files. If you do it anyway, you must make sure that the file
      can only be read by yourself.)
    <div>&#x00A0;</div>
    4. Store the password in ~/.netrc. This method is probably obsolete.
    <div>&#x00A0;</div>
    5. Type the password into the terminal when it is required.
    <div>&#x00A0;</div>
    It is recommended to use method 1 or 2.
    <div>&#x00A0;</div>
    Multiple authentication methods exist. Most servers support only some of
      them. Historically, sophisticated methods were developed to protect
      passwords from being sent unencrypted to the server, but nowadays
      everybody needs TLS anyway, so the simple methods suffice since the whole
      session is protected. A suitable authentication method is chosen
      automatically, and when TLS is disabled for some reason, only methods that
      avoid sending clear text passwords are considered.
    <div>&#x00A0;</div>
    The following user / password methods are supported: <i>user</i> (a simple
      plain text method supported by all servers), <i>plain</i> (another simple
      plain text method, with base64 encoding, supported by almost all servers),
      <i>scram-sha-1</i> (a method that avoids clear-text passwords),
      <i>cram-md5</i> (an obsolete method that avoids clear-text passwords),
      <i>apop</i> (an obsolete method that avoids clear-text passwords, but is
      vulnerable to man-in-the-middle attacks), <i>digest-md5</i> (an
      overcomplicated obsolete method that avoids clear-text passwords, but is
      not considered secure anymore), <i>login</i> (a non-standard clear-text
      method similar to but worse than the plain method), <i>ntlm</i> (an
      obscure non-standard method that is now considered broken; it sometimes
      requires a special domain parameter passed via <b>ntlmdomain</b>).
    <div>&#x00A0;</div>
    There are currently two authentication methods that are not based on user /
      password information and have to be chosen manually: <i>external</i> (the
      authentication happens outside of the protocol, typically by sending a TLS
      client certificate, and the method merely confirms that this
      authentication succeeded), and <i>gssapi</i> (the Kerberos framework takes
      care of secure authentication, only a user name is required).
    <div>&#x00A0;</div>
    It depends on the underlying authentication library and its version whether
      a particular method is supported or not. Use <b>--version</b> to find out
      which methods are supported.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">user <i>login</i></dt>
  <dd class="It-tag">Set the user name for authentication. An empty argument
      unsets the user name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">password <i>secret</i></dt>
  <dd class="It-tag">Set the password for authentication. An empty argument
      unsets the password. Consider using the <b>passwordeval</b> command or a
      key ring instead of this command, to avoid storing plain text passwords in
      the configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">passwordeval [<i>eval</i>]</dt>
  <dd class="It-tag">Set the password for authentication to the output (stdout)
      of the command <i>eval</i>. This can be used e.g. to decrypt password
      files on the fly or to query key rings, and thus to avoid storing plain
      text passwords.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">ntlmdomain [<i>domain</i>]</dt>
  <dd class="It-tag">Set a domain for the <b>ntlm</b> authentication method.
      This is obsolete.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable TLS (also known as SSL) for secured
      connections. You also need <b>tls_trust_file</b> or
      <b>tls_fingerprint</b>, and for some servers you may need to disable
      <b>tls_starttls</b>.
    <div>&#x00A0;</div>
    Transport Layer Security (TLS) &quot;... provides communications privacy
      over the Internet. The protocol allows client/server applications to
      communicate in a way that is designed to prevent eavesdropping, tampering,
      or message forgery&quot; (quote from RFC2246).
    <div>&#x00A0;</div>
    A server can use TLS in one of two modes: via a STARTTLS command (the
      session starts with the normal protocol initialization, and TLS is then
      started using the protocol's STARTTLS command), or immediately (TLS is
      initialized before the normal protocol initialization; this requires a
      separate port). The first mode is the default, but you can switch to the
      second mode by disabling <b>tls_starttls</b>.
    <div>&#x00A0;</div>
    When TLS is started, the server sends a certificate to identify itself. To
      verify the server identity, a client program is expected to check that the
      certificate is formally correct and that it was issued by a Certificate
      Authority (CA) that the user trusts. (There can also be certificate chains
      with intermediate CAs.)
    <div>&#x00A0;</div>
    The list of trusted CAs is specified using the <b>tls_trust_file</b>
      command. Usually there is some system-wide default file available, e.g.
      /etc/ssl/certs/ca-certificates.crt on Debian-based systems, but you can
      also choose to select the trusted CAs yourself.
    <div>&#x00A0;</div>
    One practical problem with this approach is that the client program should
      also check if the server certificate has been revoked for some reason,
      using a Certificate Revocation List (CRL). A CRL file can be specified
      using the <b>tls_crl_file</b> command, but getting the relevant CRL files
      and keeping them up to date is not straightforward. You are basically on
      your own.
    <div>&#x00A0;</div>
    A much more serious and fundamental problem is is that you need to trust
      CAs. Like any other organization, a CA can be incompetent, malicious,
      subverted by bad people, or forced by government agencies to compromise
      end users without telling them. All of these things happened and continue
      to happen worldwide. The idea to have central organizations that have to
      be trusted for your communication to be secure is fundamentally broken.
    <div>&#x00A0;</div>
    Instead of putting trust in a CA, you can choose to trust only a single
      certificate for the server you want to connect to. For that purpose,
      specify the certificate fingerprint with <b>tls_fingerprint</b>. This
      makes sure that no man-in-the-middle can fake the identity of the server
      by presenting you a fraudulent certificate issued by some CA that happens
      to be in your trust list. However, you have to update the fingerprint
      whenever the server certificate changes, and you have to make sure that
      the change is legitimate each time, e.g. when the old certificate expired.
      This is inconvenient, but it's the price to pay.
    <div>&#x00A0;</div>
    Information about a server certificate can be obtained with
      <i>--serverinfo</i> <i>--tls --tls-certcheck=off</i>. This includes the
      issuer CA of the certificate (so you can trust that CA via
      <b>tls_trust_file</b>), and the fingerprint of the certificate (so you can
      trust that particular certificate via <b>tls_fingerprint</b>).
    <div>&#x00A0;</div>
    TLS also allows the server to verify the identity of the client. For this
      purpose, the client has to present a certificate issued by a CA that the
      server trusts. To present that certificate, the client also needs the
      matching key file. You can set the certificate and key files using
      <b>tls_cert_file</b> and <b>tls_key_file</b>. This mechanism can also be
      used to authenticate users, so that traditional user / password
      authentication is not necessary anymore. See the <i>external</i> mechanism
      in <b>auth</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_starttls [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Choose the TLS variant: start TLS from within the session
      (<i>on</i>, default), or tunnel the session through TLS (
    <i>off</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_trust_file <i>file</i></dt>
  <dd class="It-tag">Activate server certificate verification using a list of
      truted Certification Authorities (CAs). The file must be in PEM format.
      Some systems provide a system-wide default file, e.g.
      /etc/ssl/certs/ca-certificates.crt on Debian-based systems with the
      ca-certificates package. An empty argument disables this. You should also
      use <b>tls_crl_file</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_crl_file [<i>file</i>]</dt>
  <dd class="It-tag">Set a certificate revocation list (CRL) file for TLS, to
      check for revoked certificates. An empty argument disables this.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_fingerprint [<i>fingerprint</i>]</dt>
  <dd class="It-tag">Set the fingerprint of a single certificate to accept for
      TLS. This certificate will be trusted regardless of its contents. The
      fingerprint should be of type SHA256, but can for backwards compatibility
      also be of type SHA1 or MD5 (please avoid this). The format should be
      01:23:45:67:.... Use <i>--serverinfo --tls --tls-certcheck=off
      --tls-fingerprint=</i> to get the server certificate fingerprint.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_key_file <i>file</i></dt>
  <dd class="It-tag">Send a client certificate to the server (use this together
      with <b>tls_cert_file}</b>). The file must contain the private key of a
      certificate in PEM format. An empty argument disables this feature.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_cert_file <i>file</i></dt>
  <dd class="It-tag">Send a client certificate to the server (use this together
      with <b>tls_key_file</b>). The file must contain a certificate in PEM
      format. An empty argument disables this feature.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_certcheck [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable checks of the server certificate.
      WARNING: When the checks are disabled, TLS sessions will be vulnerable to
      man-in-the-middle attacks!</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_min_dh_prime_bits [<i>bits</i>]</dt>
  <dd class="It-tag">Set or unset the minimum number of Diffie-Hellman (DH)
      prime bits that mpop will accept for TLS sessions. The default is set by
      the TLS library and can be selected by using an empty argument to this
      command. Only lower the default (for example to 512 bits) if there is no
      other way to make TLS work with the remote server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tls_priorities [<i>priorities</i>]</dt>
  <dd class="It-tag">Set the priorities for TLS sessions. The default is set by
      the TLS library and can be selected by using an empty argument to this
      command. See the GnuTLS documentation of the <i>gnutls_priority_init</i>
      function for a description of the priorities string.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">delivery <i>method</i> <i>method_arguments...</i></dt>
  <dd class="It-tag">How to deliver messages received from this account.</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">delivery mda <i>command</i></dt>
  <dd class="It-tag">Deliver the mails through a mail delivery agent (MDA).
    <div>&#x00A0;</div>
    All occurences of %F in the command will be replaced with the envelope from
      address of the current message (or MAILER-DAEMON if none is found). Note
      that this address is guaranteed to contain only letters a-z and A-Z,
      digits 0-9, and any of &quot;.@_-+/&quot;, even though that is only a
      subset of what is theoretically allowed in a mail address. Other
      characters, including those interpreted by the shell, are replaced with
      &quot;_&quot;. Nevertheless, you should put %F into single quotes: '%F'.
    <div>&#x00A0;</div>
    Use &quot;delivery mda /usr/bin/procmail -f '%F' -d $USER&quot; for the
      procmail MDA.
    <div>&#x00A0;</div>
    Use &quot;delivery mda /usr/sbin/sendmail -oi -oem -f '%F' -- $USER&quot; to
      let your MTA handle the mail.
    <div>&#x00A0;</div>
    Use &quot;delivery mda /usr/local/bin/msmtp --host=localhost --from='%F' --
      $USER@`hostname`.`dnsdomainname`&quot; to pass the mail to your MTA via
      SMTP. (This is what fetchmail does by default.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">delivery maildir <i>directory</i></dt>
  <dd class="It-tag">Deliver the mails to the given maildir directory. The
      directory must exist and it must have the maildir subdirectories
      <i>cur</i>, <i>new</i>, and <i>tmp</i>; mpop will not create directories.
      This delivery type only works on file systems that support hard
    links.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">delivery mbox <i>mbox-file</i></dt>
  <dd class="It-tag">Deliver the mails to the given file in mbox format. The
      file will be locked with <b>fcntl(2)</b>. mpop uses the MBOXRD mbox format
      variant; see the documentation of the mbox format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">delivery exchange <i>directory</i></dt>
  <dd class="It-tag">Deliver the mails to the given Exchange pickup directory.
      The directory must exist.</dd>
</dl>
<div class="Pp"></div>
If the delivery method needs to parse the mail headers for an envelope from
  address (the mda method if the command contains %F, and the mbox method), then
  it needs to create a temporary file to store the mail headers (but not the
  body) in. See $TMPDIR in the FILES / ENVIRONMENT section.</div>
<dl class="Bl-tag">
  <dt class="It-tag">uidls_file <i>filename</i></dt>
  <dd class="It-tag">The file to store UIDLs in. These are needed to identify
      new messages. %U in the filename will be replaced by the username of the
      current account. %H in the filename will be replaced by the hostname of
      the current account. If the filename contains directories that do not
      exist, mpop will create them. mpop locks this file for exclusive access
      when accessing the associated POP3 account.
    <div>&#x00A0;</div>
    The default value is &quot;~/.mpop_uidls/%U_at_%H&quot;. You can also use a
      single UIDLS file for multiple accounts, but then you cannot poll more
      than one of these accounts at the same time.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">only_new [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">By default, mpop processes only new messages (new messages
      are those that were not already successfully retrieved in an earlier
      session). If this option is turned off, mpop will process all
    messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">keep [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Keep all mails on the POP3 server, never delete them. The
      default behaviour is to delete mails that have been successfully retrieved
      or filtered by kill filters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">killsize (<i>off</i>|<i>size</i>)</dt>
  <dd class="It-tag">Mails larger than the given size will be deleted (unless
      the <b>keep</b> command is used, in which case they will just be skipped).
      The size argument must be zero or greater. If it is followed by a `k' or
      an `m', the size is measured in kibibytes/mebibytes instead of bytes. Note
      that some POP3 servers report slightly incorrect sizes for mails; see
      <b>NOTES</b> below.
    <div>&#x00A0;</div>
    When <b>killsize</b> is set to 0 and <b>keep</b> is set to on, then all
      mails are marked as retrieved, but no mail gets deleted from the server.
      This can be used to synchronize the UID list on the client to the UID list
      on the server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">skipsize (<i>off</i>|<i>size</i>)</dt>
  <dd class="It-tag">Mails larger than the given size will be skipped (not
      downloaded). The size argument must be zero or greater. If it is followed
      by a `k' or an `m', the size is measured in kibibytes/mebibytes instead of
      bytes. Note that some POP3 servers report slightly incorrect sizes for
      mails; see <b>NOTES</b> below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">filter [<i>command</i>]</dt>
  <dd class="It-tag">Set a filter which will decide whether to retrieve, skip,
      or delete each mail by investigating the mail's headers. The POP3 server
      must support the POP3 TOP command for this to work; see option
      <b>--serverinfo</b> above. An empty argument disables filtering.
    <div>&#x00A0;</div>
    All occurences of %F in the command will be replaced with the envelope from
      address of the current message (or MAILER-DAEMON if none is found). Note
      that this address is guaranteed to contain only letters a-z and A-Z,
      digits 0-9, and any of &quot;.@_-+/&quot;, even though that is only a
      subset of what is theoretically allowed in a mail address. Other
      characters, including those interpreted by the shell, are replaced with
      &quot;_&quot;. Nevertheless, you should put %F into single quotes: '%F'.
    <div>&#x00A0;</div>
    All occurences of %S in the command will be replaced with the size of the
      current mail as reported by the POP3 server.
    <div>&#x00A0;</div>
    The mail headers (plus the blank line separating the headers from the body)
      will be piped to the command. Based on the return code, mpop decides what
      to do with the mail:
    <div>&#x00A0;</div>
    0: proceed normally; no special action
    <div>&#x00A0;</div>
    1: delete the mail; do not retrieve it
    <div>&#x00A0;</div>
    2: skip the mail; do not retrieve it
    <div>&#x00A0;</div>
    Return codes greater than or equal to 3 mean that an error occured. The
      sysexits.h error codes may be used to give information about the kind of
      the error, but this is not necessary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">received_header [(<i>on</i>|<i>off</i>)]</dt>
  <dd class="It-tag">Enable or disable adding a Received header. By default,
      mpop prepends a Received header to the mail during delivery. This is
      required by the RFCs if the mail is subsequently further delivered e.g.
      via SMTP.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILTERING"><a class="selflink" href="#FILTERING">FILTERING</a></h1>
There are three filtering commands available. They will be executed in the
  following order:
<div>&#x00A0;</div>
<b>killsize</b>
<div>&#x00A0;</div>
<b>skipsize</b>
<div>&#x00A0;</div>
<b>filter</b>
<div>&#x00A0;</div>
If a filtering command applies to a mail, the remaining filters will not be
  executed.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>Configuration file</b>
<div class="Pp"></div>
# Example for a user configuration file ~/.mpoprc
<div>&#x00A0;</div>
#
<div>&#x00A0;</div>
# This file focusses on TLS, authentication, and the mail delivery method.
<div>&#x00A0;</div>
# Features not used here include mail filtering, timeouts, SOCKS proxies,
<div>&#x00A0;</div>
# TLS parameters, and more.
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Set default values for all following accounts.
<div>&#x00A0;</div>
defaults
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Always use TLS.
<div>&#x00A0;</div>
tls on
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Set a list of trusted CAs for TLS. You can use a system-wide default file,
<div>&#x00A0;</div>
# as in this example, or download the root certificate of your CA and use that.
<div>&#x00A0;</div>
tls_trust_file /etc/ssl/certs/ca-certificates.crt
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Additionally, you should use the tls_crl_file command to check for revoked
<div>&#x00A0;</div>
# certificates, but unfortunately getting revocation lists and keeping them
<div>&#x00A0;</div>
# up to date is not straightforward.
<div>&#x00A0;</div>
#tls_crl_file ~/.tls-crls
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Deliver mail to an MBOX mail file:
<div>&#x00A0;</div>
delivery mbox ~/Mail/inbox
<div>&#x00A0;</div>
# Deliver mail to a maildir folder:
<div>&#x00A0;</div>
#delivery maildir ~/Mail/incoming
<div>&#x00A0;</div>
# Deliver mail via procmail:
<div>&#x00A0;</div>
#delivery mda &quot;/usr/bin/procmail -f '%F' -d $USER&quot;
<div>&#x00A0;</div>
# Deliver mail via the local SMTP server:
<div>&#x00A0;</div>
#delivery mda &quot;/usr/bin/msmtp --host=localhost --from='%F' -- $USER&quot;
<div>&#x00A0;</div>
# Deliver mail to an Exchange pickup directory:
<div>&#x00A0;</div>
#delivery exchange c:\exchange\pickup
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# A freemail service
<div>&#x00A0;</div>
account freemail
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Host name of the POP3 server
<div>&#x00A0;</div>
host pop.freemail.example
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# As an alternative to tls_trust_file/tls_crl_file, you can use tls_fingerprint
<div>&#x00A0;</div>
# to pin a single certificate. You have to update the fingerprint when the
<div>&#x00A0;</div>
# server certificate changes, but an attacker cannot trick you into accepting
<div>&#x00A0;</div>
# a fraudulent certificate. Get the fingerprint with
<div>&#x00A0;</div>
# $ mpop --serverinfo --tls --tls-certcheck=off --host=pop.freemail.example
<div>&#x00A0;</div>
tls_fingerprint 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Authentication. The password is given using one of five methods, see below.
<div>&#x00A0;</div>
user joe.smith
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Password method 1: Add the password to the system keyring, and let mpop get
<div>&#x00A0;</div>
# it automatically. To set the keyring password using Gnome's libsecret:
<div>&#x00A0;</div>
# $ secret-tool store --label=mpop \
<div>&#x00A0;</div>
# host pop.freemail.example \
<div>&#x00A0;</div>
# service pop3 \
<div>&#x00A0;</div>
# user joe.smith
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Password method 2: Store the password in an encrypted file, and tell mpop
<div>&#x00A0;</div>
# which command to use to decrypt it. This is usually used with GnuPG, as in
<div>&#x00A0;</div>
# this example. Usually gpg-agent will ask once for the decryption password.
<div>&#x00A0;</div>
passwordeval gpg2 --no-tty -q -d ~/.mpop-password.gpg
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Password method 3: Store the password directly in this file. Usually it is not
<div>&#x00A0;</div>
# a good idea to store passwords in plain text files. If you do it anyway, at
<div>&#x00A0;</div>
# least make sure that this file can only be read by yourself.
<div>&#x00A0;</div>
#password secret123
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Password method 4: Store the password in ~/.netrc. This method is probably not
<div>&#x00A0;</div>
# relevant anymore.
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Password method 5: Do not specify a password. Mpop will then prompt you for
<div>&#x00A0;</div>
# it. This means you need to be able to type into a terminal when mpop runs.
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# A second mail box at the same freemail service
<div>&#x00A0;</div>
account freemail2 : freemail
<div>&#x00A0;</div>
user joey
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# The POP3 server of your ISP
<div>&#x00A0;</div>
account isp
<div>&#x00A0;</div>
host mail.isp.example
<div>&#x00A0;</div>
auth on
<div>&#x00A0;</div>
user 12345
<div>&#x00A0;</div>
# Your ISP runs SpamAssassin, so test each mail for the &quot;X-Spam-Status:
  Yes&quot;
<div>&#x00A0;</div>
# header, and delete all mails with this header before downloading them.
<div>&#x00A0;</div>
filter	if [ &quot;`grep &quot;^X-Spam-Status: Yes&quot;`&quot; ]; then exit 1;
  else exit 0; fi
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
# Set a default account
<div>&#x00A0;</div>
account default : freemail
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
<b>Filtering with SpamAssassin</b>
<div class="Pp"></div>
The command <b>filter&#x00A0;&quot;/path/to/spamc -c &gt; /dev/null&quot;</b>
  will delete all mails that SpamAssassin thinks are spam. Since no message body
  is passed to SpamAssassin, you should disable all body-specific tests in the
  SpamAssassin configuration file; for example set <b>use_bayes 0.</b>
<div class="Pp"></div>
If your mail provider runs SpamAssassin for you, you just have to check for the
  result. The following script can do that when used as an mpop filter:
<div>&#x00A0;</div>
#!/bin/sh
<div>&#x00A0;</div>
if [ &quot;`grep &quot;^X-Spam-Status: Yes&quot;`&quot; ]; then
<div>&#x00A0;</div>
<br/>
 exit 1 # kill this message
<div>&#x00A0;</div>
else
<div>&#x00A0;</div>
<br/>
 exit 0 # proceed normally
<div>&#x00A0;</div>
fi
<div>&#x00A0;</div>
Since the filter command is passed to a shell, you can also use this directly:
<div>&#x00A0;</div>
<b>filter if [&#x00A0;&quot;`grep&#x00A0;&quot;^X-Spam-Status: Yes&quot;`&quot;
  ]; then exit 1; else exit 0; fi</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
<b>Using mpop with Tor</b>
<div class="Pp"></div>
Use the following settings:
<div>&#x00A0;</div>
<b>proxy_host 127.0.0.1</b>
<div>&#x00A0;</div>
<b>proxy_port 9050</b>
<div>&#x00A0;</div>
<b>tls on</b>
<div>&#x00A0;</div>
Use an IP address as proxy host name, so that mpop does not leak a DNS query
  when resolving it.
<div>&#x00A0;</div>
TLS is required to prevent exit hosts from reading your POP3 session. You also
  need <b>tls_trust_file</b> or <b>tls_fingerprint</b> to check the server
  identity.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">~/.mpoprc</dt>
  <dd class="It-tag">Default configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">~/.mpop_uidls</dt>
  <dd class="It-tag">Default directory to store UIDLs files in.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">~/.netrc and SYSCONFDIR/netrc</dt>
  <dd class="It-tag">The netrc file contains login information. Before prompting
      for a password, msmtp will search it in ~/.netrc and
    SYSCONFDIR/netrc.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">$USER, $LOGNAME</dt>
  <dd class="It-tag">These variables override the user's login name. $LOGNAME is
      only used if $USER is unset. The user's login name is used for Received
      headers.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">$TMPDIR</dt>
  <dd class="It-tag">Directory to create temporary files in. If this is unset, a
      system specific default directory is used.</dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
mpop was written by Martin Lambers &lt;marlam@marlam.de&gt;
<div>&#x00A0;</div>
Other authors are listed in the AUTHORS file in the source distribution.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>procmail</b>(1), <b>spamassassin</b>(1), <b>netrc</b>(5) or <b>ftp</b>(1),
  <b>mbox</b>(5), <b>fcntl</b>(2)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-02</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
