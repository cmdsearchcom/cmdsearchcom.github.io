<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>KDIG(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">KDIG(1)</td>
    <td class="head-vol">Knot DNS</td>
    <td class="head-rtitle">KDIG(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
kdig - Advanced DNS lookup utility
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>kdig</b> [<i>common-settings</i>] [<i>query</i> [<i>settings</i>]]...
<div style="height: 1.00em;">&#x00A0;</div>
<b>kdig</b> <b>-h</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This utility sends one or more DNS queries to a nameserver. Each query can have
  individual <i>settings</i>, or it can be specified globally via
  <i>common-settings</i>, which must precede <i>query</i> specification.
<h2 class="Ss" title="Ss" id="Parameters"><a class="selflink" href="#Parameters">Parameters</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><i>query</i></dt>
  <dd class="It-tag"><i>name</i> | <b>-q</b> <i>name</i> | <b>-x</b>
      <i>address</i> | <b>-G</b> <i>tapfile</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>common-settings</i>, <i>settings</i></dt>
  <dd class="It-tag">[<i>class</i>] [<i>type</i>] [<b>@</b><i>server</i>]...
      [<i>options</i>]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>name</i></dt>
  <dd class="It-tag">Is a domain name that is to be looked up.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>server</i></dt>
  <dd class="It-tag">Is a domain name or an IPv4 or IPv6 address of the
      nameserver to send a query to. An additional port can be specified using
      address:port ([address]:port for IPv6 address), address@port, or
      address#port notation. If no server is specified, the servers from
      <b>/etc/resolv.conf</b> are used.</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
If no arguments are provided, <b>kdig</b> sends NS query for the root zone.
<h2 class="Ss" title="Ss" id="Options"><a class="selflink" href="#Options">Options</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-4</b></dt>
  <dd class="It-tag">Use the IPv4 protocol only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-6</b></dt>
  <dd class="It-tag">Use the IPv6 protocol only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b> <i>address</i></dt>
  <dd class="It-tag">Set the source IP address of the query to <i>address</i>.
      The address must be a valid address for local interface or :: or 0.0.0.0.
      An optional port can be specified in the same format as the <i>server</i>
      value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b> <i>class</i></dt>
  <dd class="It-tag">Set the query class (e.g. CH, CLASS4). An explicit variant
      of <i>class</i> specification. The default class is IN.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Enable debug messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Print the program help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b> <i>keyfile</i></dt>
  <dd class="It-tag">Use the TSIG key stored in a file <i>keyfile</i> to
      authenticate the request. The file must contain the key in the same format
      as accepted by the <b>-y</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b> <i>port</i></dt>
  <dd class="It-tag">Set the nameserver port number or service name to send a
      query to. The default port is 53.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b> <i>name</i></dt>
  <dd class="It-tag">Set the query name. An explicit variant of <i>name</i>
      specification.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b> <i>type</i></dt>
  <dd class="It-tag">Set the query type (e.g. NS, IXFR=12345, TYPE65535,
      NOTIFY). An explicit variant of <i>type</i> specification. The default
      type is A. IXFR type requires SOA serial parameter. NOTIFY type without
      SOA serial parameter causes pure NOTIFY message without any SOA hint.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Print the program version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b> <i>address</i></dt>
  <dd class="It-tag">Send a reverse (PTR) query for IPv4 or IPv6 <i>address</i>.
      The correct name, class and type is set automatically.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y</b> [<i>alg</i>:]<i>name</i>:<i>key</i></dt>
  <dd class="It-tag">Use the TSIG key named <i>name</i> to authenticate the
      request. The <i>alg</i> part specifies the algorithm (the default is
      hmac-md5) and <i>key</i> specifies the shared secret encoded in
    Base64.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b> <i>tapfile</i></dt>
  <dd class="It-tag">Export a dnstap trace of the query and response messages
      received to the file <i>tapfile</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b> <i>tapfile</i></dt>
  <dd class="It-tag">Generate message output from a previously saved dnstap file
      <i>tapfile</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>multiline</b></dt>
  <dd class="It-tag">Wrap long records to more lines and improve human
      readability.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>short</b></dt>
  <dd class="It-tag">Show record data only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>generic</b></dt>
  <dd class="It-tag">Use the generic representation format when printing
      resource record types and data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>aaflag</b></dt>
  <dd class="It-tag">Set the AA flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tcflag</b></dt>
  <dd class="It-tag">Set the TC flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>rdflag</b></dt>
  <dd class="It-tag">Set the RD flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>recurse</b></dt>
  <dd class="It-tag">Same as <b>+</b>[<b>no</b>]<b>rdflag</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>raflag</b></dt>
  <dd class="It-tag">Set the RA flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>zflag</b></dt>
  <dd class="It-tag">Set the zero flag bit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>adflag</b></dt>
  <dd class="It-tag">Set the AD flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>cdflag</b></dt>
  <dd class="It-tag">Set the CD flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>dnssec</b></dt>
  <dd class="It-tag">Set the DO flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>all</b></dt>
  <dd class="It-tag">Show all packet sections.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>qr</b></dt>
  <dd class="It-tag">Show the query packet.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>header</b></dt>
  <dd class="It-tag">Show the packet header.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>opt</b></dt>
  <dd class="It-tag">Show the EDNS pseudosection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>question</b></dt>
  <dd class="It-tag">Show the question section.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>answer</b></dt>
  <dd class="It-tag">Show the answer section.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>authority</b></dt>
  <dd class="It-tag">Show the authority section.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>additional</b></dt>
  <dd class="It-tag">Show the additional section.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tsig</b></dt>
  <dd class="It-tag">Show the TSIG pseudosection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>stats</b></dt>
  <dd class="It-tag">Show trailing packet statistics.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>class</b></dt>
  <dd class="It-tag">Show the DNS class.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>ttl</b></dt>
  <dd class="It-tag">Show the TTL value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tcp</b></dt>
  <dd class="It-tag">Use the TCP protocol (default is UDP for standard query and
      TCP for AXFR/IXFR).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>ignore</b></dt>
  <dd class="It-tag">Don't use TCP automatically if a truncated reply is
      received.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tls</b></dt>
  <dd class="It-tag">Use TLS with the Opportunistic privacy profile.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tls-ca</b>[=<i>FILE</i>]</dt>
  <dd class="It-tag">Use TLS with the Out-Of-Band privacy profile, use a
      specified PEM file (default is system certificate storage if no argument
      is provided). Can be specified multiple times.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tls-pin</b>=<i>BASE64</i></dt>
  <dd class="It-tag">Use TLS with a pinned certificate check. The PIN must be a
      Base64 encoded SHA-256 hash of the X.509 SubjectPublicKeyInfo. Can be
      specified multiple times.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>tls-hostname</b>=<i>STR</i></dt>
  <dd class="It-tag">Use TLS with a remote server hostname check.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>nsid</b></dt>
  <dd class="It-tag">Request the nameserver identifier (NSID).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>bufsize</b>=<i>B</i></dt>
  <dd class="It-tag">Set EDNS buffer size in bytes (default is 512 bytes).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>padding</b>=<i>B</i></dt>
  <dd class="It-tag">Set EDNS(0) padding option data length (default is
    no).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>alignment</b>[=<i>B</i>]</dt>
  <dd class="It-tag">Align the query to B-byte-block message using the EDNS(0)
      padding option (default is no or 128 if no argument is specified).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>subnet</b>=<i>SUBN</i></dt>
  <dd class="It-tag">Set EDNS(0) client subnet SUBN=addr/prefix.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>edns</b>[=<i>N</i>]</dt>
  <dd class="It-tag">Use EDNS version (default is 0).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>time</b>=<i>T</i></dt>
  <dd class="It-tag">Set the wait-for-reply interval in seconds (default is 5
      seconds). This timeout applies to each query attempt.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+</b>[<b>no</b>]<b>retry</b>=<i>N</i></dt>
  <dd class="It-tag">Set the number (&gt;=0) of UDP retries (default is 2). This
      doesn't apply to AXFR/IXFR.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+noidn</b></dt>
  <dd class="It-tag">Disable the IDN transformation to ASCII and vice versa.
      IDNA2003 support depends on libidn availability during project
    building!</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Options <b>-k</b> and <b>-y</b> can not be used simultaneously.
<div style="height: 1.00em;">&#x00A0;</div>
Dnssec-keygen keyfile format is not supported. Use <b>keymgr(8)</b> instead.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">1.</dt>
  <dd class="It-tag">Get A records for example.com:</dd>
</dl>
<div style="margin-left: 3.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ kdig example.com A
</pre>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">2.</dt>
  <dd class="It-tag">Perform AXFR for zone example.com from the server
      192.0.2.1:</dd>
</dl>
<div style="margin-left: 3.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ kdig example.com -t AXFR @192.0.2.1
</pre>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">3.</dt>
  <dd class="It-tag">Get A records for example.com from 192.0.2.1 and reverse
      lookup for address 2001:DB8::1 from 192.0.2.2. Both using the TCP
      protocol:</dd>
</dl>
<div style="margin-left: 3.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ kdig +tcp example.com -t A @192.0.2.1 -x 2001:DB8::1 @192.0.2.2
</pre>
</div>
<br/>
</div>
<br/>
<dl class="Bl-tag">
  <dt class="It-tag">4.</dt>
  <dd class="It-tag">Get SOA record for example.com, use TLS, use system
      certificates, check for specified hostname, check for certificate pin, and
      print additional debug info:</dd>
</dl>
<div style="margin-left: 3.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ kdig -d @185.49.141.38 +tls-ca +tls-host=getdnsapi.net \
  +tls-pin=foxZRnIh9gZpWnl+zEiKa0EJ2rdCGroMWm02gaxSc9S= soa example.com
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>/etc/resolv.conf</b>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>khost(1)</b>, <b>knsupdate(1)</b>, <b>keymgr(8)</b>.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
CZ.NIC Labs &lt;http://www.knot-dns.cz&gt;
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2010&#x2013;2017, CZ.NIC, z.s.p.o.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-02-10</td>
    <td class="foot-os">2.4.1</td>
  </tr>
</table>
</body>
</html>
