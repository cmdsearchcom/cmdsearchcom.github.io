<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:25:34 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MKFS.JFFS2(1) General Commands Manual MKFS.JFFS2(1)</p>

<p style="margin-top: 1em">NAME <br>
mkfs.jffs2 - Create a JFFS2 file system image from
directory</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mkfs.jffs2 [ -p,--pad[=SIZE] ] [ -r,-d,--root directory ] [
-s,--pagesize=SIZE ] [ -e,--eraseblock=SIZE ] [
-c,--cleanmarker=SIZE ] [ -n,--no-cleanmarkers ] [
-o,--output <br>
image.jffs2 ] [ -l,--little-endian ] [ -b,--big-endian ] [
-D,--devtable=FILE ] [ -f,--faketime ] [ -q,--squash ] [
-U,--squash-uids ] [ -P,--squash-perms ] [ --with-xattr ] [
<br>
--with-selinux ] [ --with-posix-acl ] [
-m,--compression-mode=MODE ] [ -x,--disable-compressor=NAME
] [ -X,--enable-compressor=NAME ] [
-y,--compressor-priority=PRIORITY:NAME ] [ <br>
-L,--list-compressors ] [ -t,--test-compression ] [
-h,--help ] [ -v,--verbose ] [ -V,--version ] [
-i,--incremental image.jffs2 ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The program mkfs.jffs2 creates a JFFS2 (Second Journalling
Flash File System) file system image and writes the
resulting image to the file specified by the -o option or by
<br>
default to the standard output, unless the standard output
is a terminal device in which case mkfs.jffs2 will
abort.</p>

<p style="margin-top: 1em">The file system image is created
using the files and directories contained in the directory
specified by the option -r or the present directory, if the
-r option is not speci&acirc; <br>
fied.</p>

<p style="margin-top: 1em">Each block of the files to be
placed into the file system image are compressed using one
of the available compressors depending on the selected
compression mode.</p>

<p style="margin-top: 1em">File systems are created with
the same endianness as the host, unless the -b or -l options
are specified. JFFS2 driver in the 2.4 Linux kernel only
supported images having the <br>
same endianness as the CPU. As of 2.5.48, the kernel can be
changed with a #define to accept images of the non-native
endianness. Full bi-endian support in the kernel is not <br>
planned.</p>

<p style="margin-top: 1em">It is unlikely that JFFS2 images
are useful except in conjuction with the MTD (Memory
Technology Device) drivers in the Linux kernel, since the
JFFS2 file system driver in the <br>
kernel requires MTD devices.</p>

<p style="margin-top: 1em">OPTIONS <br>
Options that take SIZE arguments can be specified as either
decimal (e.g., 65536), octal (0200000), or hexidecimal
(0x1000).</p>

<p style="margin-top: 1em">-p, --pad[=SIZE] <br>
Pad output to SIZE bytes with 0xFF. If SIZE is not
specified, the output is padded to the end of the final
erase block.</p>

<p style="margin-top: 1em">-r, -d, --root=DIR <br>
Build file system from directory DIR. The default is the
current directory.</p>

<p style="margin-top: 1em">-s, --pagesize=SIZE <br>
Use page size SIZE. The default is 4 KiB. This size is the
maximum size of a data node. Set according to target
system&rsquo;s memory management page size (NOTE: this is
NOT <br>
related to NAND page size).</p>

<p style="margin-top: 1em">-e, --eraseblock=SIZE <br>
Use erase block size SIZE. The default is 64 KiB. If you use
a erase block size different than the erase block size of
the target MTD device, JFFS2 may not perform opti&acirc;
<br>
mally. If the SIZE specified is below 4096, the units are
assumed to be KiB.</p>

<p style="margin-top: 1em">-c, --cleanmarker=SIZE <br>
Write &Acirc;&acute;CLEANMARKER&Acirc;&acute; nodes with the
size specified. It is not normally appropriate to specify a
size other than the default 12 bytes.</p>

<p style="margin-top: 1em">-n, --no-cleanmarkers <br>
Do not write &Acirc;&acute;CLEANMARKER&Acirc;&acute; nodes
to the beginning of each erase block. This option can be
useful for creating JFFS2 images for use on NAND flash, and
for creating images <br>
which are to be used on a variety of hardware with differing
eraseblock sizes.</p>

<p style="margin-top: 1em">-o, --output=FILE <br>
Write JFFS2 image to file FILE. Default is the standard
output.</p>

<p style="margin-top: 1em">-l, --little-endian <br>
Create a little-endian JFFS2 image. Default is to make an
image with the same endianness as the host.</p>

<p style="margin-top: 1em">-b, --big-endian <br>
Create a big-endian JFFS2 image. Default is to make an image
with the same endianness as the host.</p>

<p style="margin-top: 1em">-D, --devtable=FILE <br>
Use the named FILE as a device table file, for including
devices and changing permissions in the created image when
the user does not have appropriate permissions to cre&acirc;
<br>
ate them on the file system used as source.</p>

<p style="margin-top: 1em">-f, --faketime <br>
Change all file timestamps to &Acirc;&acute;0&Acirc;&acute;
for regression testing.</p>

<p style="margin-top: 1em">-q, --squash <br>
Squash permissions and owners, making all files be owned by
root and removing write permission for
&Acirc;&acute;group&Acirc;&acute; and
&Acirc;&acute;other&Acirc;&acute;.</p>

<p style="margin-top: 1em">-U, --squash-uids <br>
Squash owners making all files be owned by root.</p>

<p style="margin-top: 1em">-P, --squash-perms <br>
Squash permissions, removing write permission for
&Acirc;&acute;group&Acirc;&acute; and
&Acirc;&acute;other&Acirc;&acute;.</p>

<p style="margin-top: 1em">--with-xattr <br>
Enables xattr, stuff all xattr entries into jffs2 image
file.</p>

<p style="margin-top: 1em">--with-selinux <br>
Enables xattr, stuff only SELinux Labels into jffs2 image
file.</p>

<p style="margin-top: 1em">--with-posix-acl <br>
Enable xattr, stuff only POSIX ACL entries into jffs2 image
file.</p>

<p style="margin-top: 1em">-m, --compression-mode=MODE <br>
Set the default compression mode. The default mode is
priority which tries the compressors in a predefinied order
and chooses the first successful one. The alternatives <br>
are: none (mkfs will not compress) and size (mkfs will try
all compressor and chooses the one which have the smallest
result).</p>

<p style="margin-top: 1em">-x, --disable-compressor=NAME
<br>
Disable a compressor. Use -L to see the list of the
available compressors and their default states.</p>

<p style="margin-top: 1em">-X, --enable-compressor=NAME
<br>
Enable a compressor. Use -L to see the list of the available
compressors and their default states.</p>

<p style="margin-top: 1em">-y,
--compressor-priority=PRIORITY:NAME <br>
Set the priority of a compressor. Use -L to see the list of
the available compressors and their default priority.
Priorities are used by priority compression mode.</p>

<p style="margin-top: 1em">-L, --list-compressors <br>
Show the list of the available compressors and their
states.</p>

<p style="margin-top: 1em">-t, --test-compression <br>
Call decompress after every compress - and compare the
result with the original data -, and some other check.</p>

<p style="margin-top: 1em">-h, --help <br>
Display help text.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Verbose operation.</p>

<p style="margin-top: 1em">-V, --version <br>
Display version information.</p>

<p style="margin-top: 1em">-i, --incremental=FILE <br>
Generate an appendage image for FILE. If FILE is written to
flash and flash is appended with the output, then it seems
as if it was one thing.</p>

<p style="margin-top: 1em">LIMITATIONS <br>
The format and grammar of the device table file does not
allow it to create symbolic links when the symbolic links
are not already present in the root working directory.</p>

<p style="margin-top: 1em">However, symbolic links may be
specified in the device table file using the l type for the
purposes of setting their permissions and ownership.</p>

<p style="margin-top: 1em">BUGS <br>
JFFS2 limits device major and minor numbers to 8 bits each.
Some consider this a bug.</p>

<p style="margin-top: 1em">mkfs.jffs2 does not properly
handle hard links in the input directory structure.
Currently, hard linked files will be expanded to multiple
identical files in the output image.</p>

<p style="margin-top: 1em">AUTHORS <br>
David Woodhouse <br>
Manual page written by David Schleef
&lt;ds@schleef.org&gt;</p>

<p style="margin-top: 1em">SEE ALSO <br>
mkfs(8), mkfs.jffs(1), fakeroot(1)</p>
 
<p style="margin-top: 1em">MKFS.JFFS2(1)</p>
<hr>
</body>
</html>
