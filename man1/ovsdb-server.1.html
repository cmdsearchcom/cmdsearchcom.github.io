<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:29:35 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ovsdb-server(1) Open vSwitch Manual ovsdb-server(1)</p>

<p style="margin-top: 1em">NAME <br>
ovsdb-server - Open vSwitch database server</p>

<p style="margin-top: 1em">SYNOPSIS <br>
ovsdb-server [database]... [--remote=remote]...
[--run=command]</p>

<p style="margin-top: 1em">Daemon options: <br>
[--pidfile[=pidfile]] [--overwrite-pidfile] [--detach]
[--no-chdir] [--no-self-confinement]</p>

<p style="margin-top: 1em">Service options: <br>
[--service] [--service-monitor]</p>

<p style="margin-top: 1em">Logging options: <br>
[-v[module[:destination[:level]]]]... <br>
[--verbose[=module[:destination[:level]]]]... <br>
[--log-file[=file]]</p>

<p style="margin-top: 1em">Syncing options: <br>
[--sync-from=server]</p>

<p style="margin-top: 1em">Public key infrastructure
options: <br>
[--private-key=privkey.pem] <br>
[--certificate=cert.pem] <br>
[--ca-cert=cacert.pem] <br>
[--bootstrap-ca-cert=cacert.pem] <br>
[--peer-ca-cert=peer-cacert.pem]</p>

<p style="margin-top: 1em">SSL connection options: <br>
[--ssl-protocols=protocols] <br>
[--ssl-ciphers=ciphers]</p>

<p style="margin-top: 1em">Runtime management options: <br>
--unixctl=socket</p>

<p style="margin-top: 1em">Common options: <br>
[-h | --help] [-V | --version]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The ovsdb-server program provides RPC interfaces to one or
more Open vSwitch databases (OVSDBs). It supports JSON-RPC
client connections over active or passive TCP/IP or Unix
<br>
domain sockets.</p>

<p style="margin-top: 1em">Each OVSDB file may be specified
on the command line as database. If none is specified, the
default is /etc/openvswitch/conf.db. The database files must
already have been cre&acirc; <br>
ated and initialized using, for example, ovsdb-tool
create.</p>

<p style="margin-top: 1em">ACTIVE and BACKUP <br>
ovsdb-server runs either as a backup server, or as an active
server. When ovsdb-server is running as a backup server, all
transactions that can modify the database content, <br>
including the lock commands are rejected. Active server, on
the other hand, accepts all ovsdb server transactions. When
ovsdb-server role changes, all existing client connec&acirc;
<br>
tion are reset, requiring clients to reconnect to the
server.</p>

<p style="margin-top: 1em">By default, ovsdb-server runs as
an active server, except when the --sync-from=server command
line option is specified and without the --no-sync option.
During runtime, <br>
ovsdb-server role can be switch by using appctl
commands.</p>


<p style="margin-top: 1em">ovsdb-server/connect-active-ovsdb-server
switches ovsdb-server into a backup server, Conversely,
ovsdb-server/disconnect-active-ovsdb-server switches server
into an active one.</p>

<p style="margin-top: 1em">OPTIONS <br>
--remote=remote <br>
Adds remote as a connection method used by ovsdb-server.
remote must take one of the following forms:</p>

<p style="margin-top: 1em">pssl:port[:ip] <br>
Listen on the given SSL port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but specifying ip limits connections to those
from the given ip, either IPv4 or IPv6 address. If ip is an
IPv6 address, then wrap ip with square brack&acirc; <br>
ets, e.g.: pssl:6640:[::1]. The --private-key,
--certificate, and --ca-cert options are mandatory when this
form is used.</p>

<p style="margin-top: 1em">ptcp:port[:ip] <br>
Listen on the given TCP port for a connection. By default,
connections are not bound to a particular local IP address
and it listens only on IPv4 (but not IPv6) <br>
addresses, but ip may be specified to listen only for
connections to the given ip, either IPv4 or IPv6 address. If
ip is an IPv6 address, then wrap ip with square <br>
brackets, e.g.: ptcp:6640:[::1].</p>

<p style="margin-top: 1em">punix:file <br>
On POSIX, listen on the Unix domain server socket named file
for a connection.</p>

<p style="margin-top: 1em">On Windows, listen on a local
named pipe. A file is created in the path file to mimic the
behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">ssl:ip:port <br>
The specified SSL port on the host at the given ip, which
must be expressed as an IP address (not a DNS name) in IPv4
or IPv6 address format. If ip is an IPv6 <br>
address, then wrap ip with square brackets, e.g.:
ssl:[::1]:6640. The --private-key, --certificate, and
--ca-cert options are mandatory when this form is used.</p>

<p style="margin-top: 1em">tcp:ip:port <br>
Connect to the given TCP port on ip, where ip can be IPv4 or
IPv6 address. If ip is an IPv6 address, then wrap ip with
square brackets, e.g.: tcp:[::1]:6640.</p>

<p style="margin-top: 1em">unix:file <br>
On POSIX, connect to the Unix domain server socket named
file.</p>

<p style="margin-top: 1em">On Windows, connect to a local
named pipe that is represented by a file created in the path
file to mimic the behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">db:db,table,column <br>
Reads additional connection methods from column in all of
the rows in table within db. As the contents of column
changes, ovsdb-server also adds and drops connec&acirc; <br>
tion methods accordingly.</p>

<p style="margin-top: 1em">If column&rsquo;s type is string
or set of strings, then the connection methods are taken
directly from the column. The connection methods in the
column must have one of <br>
the forms described above.</p>

<p style="margin-top: 1em">If column&rsquo;s type is UUID
or set of UUIDs and references a table, then each UUID is
looked up in the referenced table to obtain a row. The
following columns in the <br>
row, if present and of the correct type, configure a
connection method. Any additional columns are ignored.</p>

<p style="margin-top: 1em">target (string) <br>
Connection method, in one of the forms described above. This
column is mandatory: if it is missing or empty then no
connection method can be configured.</p>

<p style="margin-top: 1em">max_backoff (integer) <br>
Maximum number of milliseconds to wait between connection
attempts.</p>

<p style="margin-top: 1em">inactivity_probe (integer) <br>
Maximum number of milliseconds of idle time on connection to
client before sending an inactivity probe message.</p>

<p style="margin-top: 1em">read_only (boolean) <br>
If true, only read-only transactions are allowed on this
connection.</p>

<p style="margin-top: 1em">It is an error for column to
have another type.</p>

<p style="margin-top: 1em">To connect or listen on multiple
connection methods, use multiple --remote options.</p>

<p style="margin-top: 1em">--run=command] <br>
Ordinarily ovsdb-server runs forever, or until it is told to
exit (see RUNTIME MANAGEMENT COMMANDS below). With this
option, ovsdb-server instead starts a shell subpro&acirc;
<br>
cess running command. When the subprocess terminates,
ovsdb-server also exits gracefully. If the subprocess exits
normally with exit code 0, then ovsdb-server exits with <br>
exit code 0 also; otherwise, it exits with exit code 1.</p>

<p style="margin-top: 1em">This option can be useful where
a database server is needed only to run a single command,
e.g.: ovsdb-server --remote=punix:socket
--run=&rsquo;ovsdb-client dump unix:socket <br>
Open_vSwitch&rsquo;</p>

<p style="margin-top: 1em">This option is not supported on
Windows platform.</p>

<p style="margin-top: 1em">Daemon Options <br>
The following options are valid on POSIX based
platforms.</p>

<p style="margin-top: 1em">--pidfile[=pidfile] <br>
Causes a file (by default, ovsdb-server.pid) to be created
indicating the PID of the running process. If the pidfile
argument is not specified, or if it does not begin <br>
with /, then it is created in /var/run/openvswitch.</p>

<p style="margin-top: 1em">If --pidfile is not specified,
no pidfile is created.</p>

<p style="margin-top: 1em">--overwrite-pidfile <br>
By default, when --pidfile is specified and the specified
pidfile already exists and is locked by a running process,
ovsdb-server refuses to start. Specify --over&acirc; <br>
write-pidfile to cause it to instead overwrite the
pidfile.</p>

<p style="margin-top: 1em">When --pidfile is not specified,
this option has no effect.</p>

<p style="margin-top: 1em">--detach <br>
Runs ovsdb-server as a background process. The process
forks, and in the child it starts a new session, closes the
standard file descriptors (which has the side effect of <br>
disabling logging to the console), and changes its current
directory to the root (unless --no-chdir is specified).
After the child completes its initialization, the par&acirc;
<br>
ent exits. ovsdb-server detaches only after it starts
listening on all configured remotes.</p>

<p style="margin-top: 1em">--monitor <br>
Creates an additional process to monitor the ovsdb-server
daemon. If the daemon dies due to a signal that indicates a
programming error (SIGABRT, SIGALRM, SIGBUS, SIGFPE, <br>
SIGILL, SIGPIPE, SIGSEGV, SIGXCPU, or SIGXFSZ) then the
monitor process starts a new copy of it. If the daemon dies
or exits for another reason, the monitor process <br>
exits.</p>

<p style="margin-top: 1em">This option is normally used
with --detach, but it also functions without it.</p>

<p style="margin-top: 1em">--no-chdir <br>
By default, when --detach is specified, ovsdb-server changes
its current working directory to the root directory after it
detaches. Otherwise, invoking ovsdb-server from <br>
a carelessly chosen directory would prevent the
administrator from unmounting the file system that holds
that directory.</p>

<p style="margin-top: 1em">Specifying --no-chdir suppresses
this behavior, preventing ovsdb-server from changing its
current working directory. This may be useful for collecting
core files, since <br>
it is common behavior to write core dumps into the current
working directory and the root directory is not a good
directory to use.</p>

<p style="margin-top: 1em">This option has no effect when
--detach is not specified.</p>

<p style="margin-top: 1em">--no-self-confinement <br>
By default daemon will try to self-confine itself to work
with files under well-know, at build-time whitelisted
directories. It is better to stick with this default <br>
behavior and not to use this flag unless some other Access
Control is used to confine daemon. Note that in contrast to
other access control implementations that are typi&acirc;
<br>
cally enforced from kernel-space (e.g. DAC or MAC),
self-confinement is imposed from the user-space daemon
itself and hence should not be considered as a full
confinement <br>
strategy, but instead should be viewed as an additional
layer of security.</p>

<p style="margin-top: 1em">--user Causes ovsdb-server to
run as a different user specified in &quot;user:group&quot;,
thus dropping most of the root privileges. Short forms
&quot;user&quot; and &quot;:group&quot; are also allowed,
with <br>
current user or group are assumed respectively. Only daemons
started by the root user accepts this argument.</p>

<p style="margin-top: 1em">On Linux, daemons will be
granted CAP_IPC_LOCK and CAP_NET_BIND_SERVICES before
dropping root privileges. Daemons that interact with a
datapath, such as ovs-vswitchd, will <br>
be granted two additional capabilities, namely CAP_NET_ADMIN
and CAP_NET_RAW. The capability change will apply even if
new user is &quot;root&quot;.</p>

<p style="margin-top: 1em">On Windows, this option is not
currently supported. For security reasons, specifying this
option will cause the daemon process not to start.</p>

<p style="margin-top: 1em">Service Options <br>
The following options are valid only on Windows
platform.</p>

<p style="margin-top: 1em">--service <br>
Causes ovsdb-server to run as a service in the background.
The service should already have been created through
external tools like SC.exe.</p>

<p style="margin-top: 1em">--service-monitor <br>
Causes the ovsdb-server service to be automatically
restarted by the Windows services manager if the service
dies or exits for unexpected reasons.</p>

<p style="margin-top: 1em">When --service is not specified,
this option has no effect.</p>

<p style="margin-top: 1em">Logging Options <br>
-v[spec] <br>
--verbose=[spec] <br>
Sets logging levels. Without any spec, sets the log level
for every module and destination to dbg. Otherwise, spec is
a list of words separated by spaces or commas or <br>
colons, up to one from each category below:</p>

<p style="margin-top: 1em">&Acirc;&middot; A valid module
name, as displayed by the vlog/list command on
ovs-appctl(8), limits the log level change to the specified
module.</p>

<p style="margin-top: 1em">&Acirc;&middot; syslog, console,
or file, to limit the log level change to only to the system
log, to the console, or to a file, respectively. (If
--detach is specified, <br>
ovsdb-server closes its standard file descriptors, so
logging to the console will have no effect.)</p>

<p style="margin-top: 1em">On Windows platform, syslog is
accepted as a word and is only useful along with the
--syslog-target option (the word has no effect
otherwise).</p>

<p style="margin-top: 1em">&Acirc;&middot; off, emer, err,
warn, info, or dbg, to control the log level. Messages of
the given severity or higher will be logged, and messages of
lower severity will be fil&acirc; <br>
tered out. off filters out all messages. See ovs-appctl(8)
for a definition of each log level.</p>

<p style="margin-top: 1em">Case is not significant within
spec.</p>

<p style="margin-top: 1em">Regardless of the log levels set
for file, logging to a file will not take place unless
--log-file is also specified (see below).</p>

<p style="margin-top: 1em">For compatibility with older
versions of OVS, any is accepted as a word but has no
effect.</p>

<p style="margin-top: 1em">-v <br>
--verbose <br>
Sets the maximum logging verbosity level, equivalent to
--verbose=dbg.</p>

<p style="margin-top: 1em">-vPATTERN:destination:pattern
<br>
--verbose=PATTERN:destination:pattern <br>
Sets the log pattern for destination to pattern. Refer to
ovs-appctl(8) for a description of the valid syntax for
pattern.</p>

<p style="margin-top: 1em">-vFACILITY:facility <br>
--verbose=FACILITY:facility <br>
Sets the RFC5424 facility of the log message. facility can
be one of kern, user, mail, daemon, auth, syslog, lpr, news,
uucp, clock, ftp, ntp, audit, alert, clock2, <br>
local0, local1, local2, local3, local4, local5, local6 or
local7. If this option is not specified, daemon is used as
the default for the local system syslog and local0 is <br>
used while sending a message to the target provided via the
--syslog-target option.</p>

<p style="margin-top: 1em">--log-file[=file] <br>
Enables logging to a file. If file is specified, then it is
used as the exact name for the log file. The default log
file name used if file is omitted is /var/log/open&acirc;
<br>
vswitch/ovsdb-server.log.</p>

<p style="margin-top: 1em">--syslog-target=host:port <br>
Send syslog messages to UDP port on host, in addition to the
system syslog. The host must be a numerical IP address, not
a hostname.</p>

<p style="margin-top: 1em">--syslog-method=method <br>
Specify method how syslog messages should be sent to syslog
daemon. Following forms are supported:</p>

<p style="margin-top: 1em">&Acirc;&middot; libc, use libc
syslog() function. This is the default behavior. Downside of
using this options is that libc adds fixed prefix to every
message before it is actu&acirc; <br>
ally sent to the syslog daemon over /dev/log UNIX domain
socket.</p>

<p style="margin-top: 1em">&Acirc;&middot; unix:file, use
UNIX domain socket directly. It is possible to specify
arbitrary message format with this option. However, rsyslogd
8.9 and older versions use hard <br>
coded parser function anyway that limits UNIX domain socket
use. If you want to use arbitrary message format with older
rsyslogd versions, then use UDP socket to <br>
localhost IP address instead.</p>

<p style="margin-top: 1em">&Acirc;&middot; udp:ip:port, use
UDP socket. With this method it is possible to use arbitrary
message format also with older rsyslogd. When sending syslog
messages over UDP <br>
socket extra precaution needs to be taken into account, for
example, syslog daemon needs to be configured to listen on
the specified UDP port, accidental iptables <br>
rules could be interfering with local syslog traffic and
there are some security considerations that apply to UDP
sockets, but do not apply to UNIX domain sockets.</p>

<p style="margin-top: 1em">Syncing Options <br>
The following options allow ovsdb-server to synchronize its
databases with another running ovsdb-server.</p>

<p style="margin-top: 1em">--sync-from=server <br>
Sets up ovsdb-server to synchronize its databases with the
databases in server, which must be an active connection
method in one of the forms documented in <br>
ovsdb-client(1). Every transaction committed by server will
be replicated to ovsdb-server. This option makes
ovsdb-server start as a backup server; add --active to make
<br>
it start as an active server.</p>


<p style="margin-top: 1em">--sync-exclude-tables=db:table[,db:table]...
<br>
Causes the specified tables to be excluded from
replication.</p>

<p style="margin-top: 1em">--active <br>
By default, --sync-from makes ovsdb-server start up as a
backup for server. With --active, however, ovsdb-server
starts as an active server. Use this option to allow the
<br>
syncing options to be specified using command line options,
yet start the server, as the default, active server. To
switch the running server to backup mode, use ovs- <br>
appctl(1) to execute the
ovsdb-server/connect-active-ovsdb-server command.</p>

<p style="margin-top: 1em">Public Key Infrastructure
Options <br>
The options described below for configuring the SSL public
key infrastructure accept a special syntax for obtaining
their configuration from the database. If any of these <br>
options is given db:db,table,column as its argument, then
the actual file name is read from the specified column in
table within the db database. The column must have type <br>
string or set of strings. The first nonempty string in the
table is taken as the file name. (This means that ordinarily
there should be at most one row in table.)</p>

<p style="margin-top: 1em">-p privkey.pem <br>
--private-key=privkey.pem <br>
Specifies a PEM file containing the private key used as
ovsdb-server&rsquo;s identity for outgoing SSL
connections.</p>

<p style="margin-top: 1em">-c cert.pem <br>
--certificate=cert.pem <br>
Specifies a PEM file containing a certificate that certifies
the private key specified on -p or --private-key to be
trustworthy. The certificate must be signed by the <br>
certificate authority (CA) that the peer in SSL connections
will use to verify it.</p>

<p style="margin-top: 1em">-C cacert.pem <br>
--ca-cert=cacert.pem <br>
Specifies a PEM file containing the CA certificate that
ovsdb-server should use to verify certificates presented to
it by SSL peers. (This may be the same certificate <br>
that SSL peers use to verify the certificate specified on -c
or --certificate, or it may be a different one, depending on
the PKI design in use.)</p>

<p style="margin-top: 1em">-C none <br>
--ca-cert=none <br>
Disables verification of certificates presented by SSL
peers. This introduces a security risk, because it means
that certificates cannot be verified to be those of known
<br>
trusted hosts.</p>

<p style="margin-top: 1em">--bootstrap-ca-cert=cacert.pem
<br>
When cacert.pem exists, this option has the same effect as
-C or --ca-cert. If it does not exist, then ovsdb-server
will attempt to obtain the CA certificate from the SSL <br>
peer on its first SSL connection and save it to the named
PEM file. If it is successful, it will immediately drop the
connection and reconnect, and from then on all SSL <br>
connections must be authenticated by a certificate signed by
the CA certificate thus obtained.</p>

<p style="margin-top: 1em">This option exposes the SSL
connection to a man-in-the-middle attack obtaining the
initial CA certificate, but it may be useful for
bootstrapping.</p>

<p style="margin-top: 1em">This option is only useful if
the SSL peer sends its CA certificate as part of the SSL
certificate chain. The SSL protocol does not require the
server to send the CA cer&acirc; <br>
tificate.</p>

<p style="margin-top: 1em">This option is mutually
exclusive with -C and --ca-cert.</p>

<p style="margin-top: 1em">--peer-ca-cert=peer-cacert.pem
<br>
Specifies a PEM file that contains one or more additional
certificates to send to SSL peers. peer-cacert.pem should be
the CA certificate used to sign ovsdb-server&rsquo;s own
<br>
certificate, that is, the certificate specified on -c or
--certificate. If ovsdb-server&rsquo;s certificate is
self-signed, then --certificate and --peer-ca-cert should
specify <br>
the same file.</p>

<p style="margin-top: 1em">This option is not useful in
normal operation, because the SSL peer must already have the
CA certificate for the peer to have any confidence in
ovsdb-server&rsquo;s identity. <br>
However, this offers a way for a new installation to
bootstrap the CA certificate on its first SSL
connection.</p>

<p style="margin-top: 1em">SSL Connection Options <br>
--ssl-protocols=protocols <br>
Specifies, in a comma- or space-delimited list, the SSL
protocols ovsdb-server will enable for SSL connections.
Supported protocols include TLSv1, TLSv1.1, and TLSv1.2.
<br>
Regardless of order, the highest protocol supported by both
sides will be chosen when making the connection. The default
when this option is omitted is <br>
TLSv1,TLSv1.1,TLSv1.2.</p>

<p style="margin-top: 1em">--ssl-ciphers=ciphers <br>
Specifies, in OpenSSL cipher string format, the ciphers
ovsdb-server will support for SSL connections. The default
when this option is omitted is HIGH:!aNULL:!MD5.</p>

<p style="margin-top: 1em">Other Options <br>
--unixctl=socket <br>
Sets the name of the control socket on which ovsdb-server
listens for runtime management commands (see RUNTIME
MANAGEMENT COMMANDS, below). If socket does not begin with
<br>
/, it is interpreted as relative to /var/run/openvswitch. If
--unixctl is not used at all, the default socket is
/var/run/openvswitch/ovsdb-server.pid.ctl, where pid is <br>
ovsdb-server&rsquo;s process ID.</p>

<p style="margin-top: 1em">On Windows a local named pipe is
used to listen for runtime management commands. A file is
created in the absolute path as pointed by socket or if
--unixctl is not used <br>
at all, a file is created as ovsdb-server.ctl in the
configured OVS_RUNDIR directory. The file exists just to
mimic the behavior of a Unix domain socket.</p>

<p style="margin-top: 1em">Specifying none for socket
disables the control socket feature.</p>

<p style="margin-top: 1em">-h <br>
--help Prints a brief help message to the console.</p>

<p style="margin-top: 1em">-V <br>
--version <br>
Prints version information to the console.</p>

<p style="margin-top: 1em">RUNTIME MANAGEMENT COMMANDS <br>
ovs-appctl(8) can send commands to a running ovsdb-server
process. The currently supported commands are described
below.</p>

<p style="margin-top: 1em">OVSDB-SERVER COMMANDS <br>
These commands are specific to ovsdb-server.</p>

<p style="margin-top: 1em">exit Causes ovsdb-server to
gracefully terminate.</p>

<p style="margin-top: 1em">ovsdb-server/compact [db]...
<br>
Compacts each database db in-place. If no db is specified,
compacts every database in-place. A database is also
compacted automatically when a transaction is logged if <br>
it is over 4 times as large as its previous compacted size
(and at least 10 MB), but not before 100 commits have been
added or 10 minutes have elapsed since the last com&acirc;
<br>
paction.</p>

<p style="margin-top: 1em">ovsdb-server/reconnect <br>
Makes ovsdb-server drop all of the JSON-RPC connections to
database clients and reconnect.</p>

<p style="margin-top: 1em">This command might be useful for
debugging issues with database clients.</p>

<p style="margin-top: 1em">ovsdb-server/add-remote remote
<br>
Adds a remote, as if --remote=remote had been specified on
the ovsdb-server command line. (If remote is already a
remote, this command succeeds without changing the
con&acirc; <br>
figuration.)</p>

<p style="margin-top: 1em">ovsdb-server/remove-remote
remote <br>
Removes the specified remote from the configuration, failing
with an error if remote is not configured as a remote. This
command only works with remotes that were named <br>
on --remote or ovsdb-server/add-remote, that is, it will not
remove remotes added indirectly because they were read from
the database by configuring a db:db,table,column <br>
remote. (You can remove a database source with
ovsdb-server/remove-remote db:db,table,column, but not
individual remotes found indirectly through the
database.)</p>

<p style="margin-top: 1em">ovsdb-server/list-remotes <br>
Outputs a list of the currently configured remotes named on
--remote or ovsdb-server/add-remote, that is, it does not
list remotes added indirectly because they were read <br>
from the database by configuring a db:db,table,column
remote.</p>

<p style="margin-top: 1em">ovsdb-server/add-db database
<br>
Adds the database to the running ovsdb-server. The database
file must already have been created and initialized using,
for example, ovsdb-tool create.</p>

<p style="margin-top: 1em">ovsdb-server/remove-db database
<br>
Removes database from the running ovsdb-server. database
must be a database name as listed by
ovsdb-server/list-dbs.</p>

<p style="margin-top: 1em">If a remote has been configured
that points to the specified database (e.g.
--remote=db:database,... on the command line), then it will
be disabled until another database <br>
with the same name is added again (with
ovsdb-server/add-db).</p>

<p style="margin-top: 1em">Any public key infrastructure
options specified through this database (e.g.
--private-key=db:database,... on the command line) will be
disabled until another database with <br>
the same name is added again (with ovsdb-server/add-db).</p>

<p style="margin-top: 1em">ovsdb-server/list-dbs <br>
Outputs a list of the currently configured databases added
either through the command line or through the
ovsdb-server/add-db command.</p>


<p style="margin-top: 1em">ovsdb-server/set-active-ovsdb-server
server <br>
Sets the active server from which ovsdb-server connects
through ovsdb-server/connect-active-ovsdb-server.</p>


<p style="margin-top: 1em">ovsdb-server/get-active-ovsdb-server
<br>
Gets the active server from which ovsdb-server is currently
synchronizing its databases.</p>


<p style="margin-top: 1em">ovsdb-server/connect-active-ovsdb-server
<br>
Causes ovsdb-server to synchronize its databases with the
server specified by
ovsdb-server/set-active-ovsdb-server.</p>


<p style="margin-top: 1em">ovsdb-server/disconnect-active-ovsdb-server
<br>
Causes ovsdb-server to stop synchronizing its databases with
a active server.</p>


<p style="margin-top: 1em">ovsdb-server/set-sync-exclude-tables
db:table[,db:table]... <br>
Sets the table whitin db that will be excluded from
synchronization.</p>


<p style="margin-top: 1em">ovsdb-server/get-sync-exclude-tables
<br>
Gets the tables that are currently excluded from
synchronization.</p>

<p style="margin-top: 1em">ovsdb-server/sync-status <br>
Prints a summary of replication run time information. The
state information is always provided, indicating whether the
server is running in the active or the backup mode. <br>
When running in backup mode, replication connection status,
which can be either connecting, replicating or error, are
shown. When the connection is in replicating state, <br>
further output shows the list of databases currently
replicating, and the tables that are excluded.</p>

<p style="margin-top: 1em">VLOG COMMANDS <br>
These commands manage ovsdb-server&rsquo;s logging
settings.</p>

<p style="margin-top: 1em">vlog/set [spec] <br>
Sets logging levels. Without any spec, sets the log level
for every module and destination to dbg. Otherwise, spec is
a list of words separated by spaces or commas or <br>
colons, up to one from each category below:</p>

<p style="margin-top: 1em">&Acirc;&middot; A valid module
name, as displayed by the vlog/list command on
ovs-appctl(8), limits the log level change to the specified
module.</p>

<p style="margin-top: 1em">&Acirc;&middot; syslog, console,
or file, to limit the log level change to only to the system
log, to the console, or to a file, respectively.</p>

<p style="margin-top: 1em">On Windows platform, syslog is
accepted as a word and is only useful along with the
--syslog-target option (the word has no effect
otherwise).</p>

<p style="margin-top: 1em">&Acirc;&middot; off, emer, err,
warn, info, or dbg, to control the log level. Messages of
the given severity or higher will be logged, and messages of
lower severity will be fil&acirc; <br>
tered out. off filters out all messages. See ovs-appctl(8)
for a definition of each log level.</p>

<p style="margin-top: 1em">Case is not significant within
spec.</p>

<p style="margin-top: 1em">Regardless of the log levels set
for file, logging to a file will not take place unless
ovsdb-server was invoked with the --log-file option.</p>

<p style="margin-top: 1em">For compatibility with older
versions of OVS, any is accepted as a word but has no
effect.</p>

<p style="margin-top: 1em">vlog/set
PATTERN:destination:pattern <br>
Sets the log pattern for destination to pattern. Refer to
ovs-appctl(8) for a description of the valid syntax for
pattern.</p>

<p style="margin-top: 1em">vlog/list <br>
Lists the supported logging modules and their current
levels.</p>

<p style="margin-top: 1em">vlog/list-pattern <br>
Lists logging patterns used for each destination.</p>

<p style="margin-top: 1em">vlog/close <br>
Causes ovsdb-server to close its log file, if it is open.
(Use vlog/reopen to reopen it later.)</p>

<p style="margin-top: 1em">vlog/reopen <br>
Causes ovsdb-server to close its log file, if it is open,
and then reopen it. (This is useful after rotating log
files, to cause a new log file to be used.)</p>

<p style="margin-top: 1em">This has no effect unless
ovsdb-server was invoked with the --log-file option.</p>

<p style="margin-top: 1em">vlog/disable-rate-limit
[module]... <br>
vlog/enable-rate-limit [module]... <br>
By default, ovsdb-server limits the rate at which certain
messages can be logged. When a message would appear more
frequently than the limit, it is suppressed. This <br>
saves disk space, makes logs easier to read, and speeds up
execution, but occasionally troubleshooting requires more
detail. Therefore, vlog/disable-rate-limit allows <br>
rate limits to be disabled at the level of an individual log
module. Specify one or more module names, as displayed by
the vlog/list command. Specifying either no module <br>
names at all or the keyword any disables rate limits for
every log module.</p>

<p style="margin-top: 1em">The vlog/enable-rate-limit
command, whose syntax is the same as
vlog/disable-rate-limit, can be used to re-enable a rate
limit that was previously disabled.</p>

<p style="margin-top: 1em">MEMORY COMMANDS <br>
These commands report memory usage.</p>

<p style="margin-top: 1em">memory/show <br>
Displays some basic statistics about ovsdb-server&rsquo;s
memory usage. ovsdb-server also logs this information soon
after startup and periodically as its memory consumption
<br>
grows.</p>

<p style="margin-top: 1em">COVERAGE COMMANDS <br>
These commands manage ovsdb-server&rsquo;s
&lsquo;&lsquo;coverage counters,&rsquo;&rsquo; which count
the number of times particular events occur during a
daemon&rsquo;s runtime. In addition to these commands, <br>
ovsdb-server automatically logs coverage counter values, at
INFO level, when it detects that the daemon&rsquo;s main
loop takes unusually long to run.</p>

<p style="margin-top: 1em">Coverage counters are useful
mainly for performance analysis and debugging.</p>

<p style="margin-top: 1em">coverage/show <br>
Displays the averaged per-second rates for the last few
seconds, the last minute and the last hour, and the total
counts of all of the coverage counters.</p>

<p style="margin-top: 1em">SPECIFICATIONS <br>
ovsdb-server implements the Open vSwitch Database (OVSDB)
protocol specified in RFC 7047, with the following
clarifications:</p>

<p style="margin-top: 1em">3.1. JSON Usage <br>
RFC 4627 says that names within a JSON object should be
unique. The Open vSwitch JSON parser discards all but the
last value for a name that is specified more than once.</p>

<p style="margin-top: 1em">The definition of &lt;error&gt;
allows for implementation extensions. Currently ovsdb-server
uses the following additional &quot;error&quot; strings
which might change in later <br>
releases):</p>

<p style="margin-top: 1em">syntax error or unknown column
<br>
The request could not be parsed as an OVSDB request. An
additional &quot;syntax&quot; member, whose value is a
string that contains JSON, may narrow down the particular
syn&acirc; <br>
tax that could not be parsed.</p>

<p style="margin-top: 1em">internal error <br>
The request triggered a bug in ovsdb-server.</p>

<p style="margin-top: 1em">ovsdb error <br>
A map or set contains a duplicate key.</p>

<p style="margin-top: 1em">3.2. Schema Format <br>
RFC 7047 requires the &quot;version&quot; field in
&lt;database-schema&gt;. Current versions of ovsdb-server
allow it to be omitted (future versions are likely to
require it).</p>

<p style="margin-top: 1em">RFC 7047 allows columns that
contain weak references to be immutable. This raises the
issue of the behavior of the weak reference when the rows
that it references are <br>
deleted. Since version 2.6, ovsdb-server forces columns that
contain weak references to be mutable.</p>

<p style="margin-top: 1em">4. Wire Protocol <br>
The original OVSDB specifications included the following
reason, omitted from RFC 7047, to operate JSON-RPC directly
over a stream instead of over HTTP:</p>

<p style="margin-top: 1em">&Acirc;&middot; JSON-RPC is a
peer-to-peer protocol, but HTTP is a client-server protocol,
which is a poor match. Thus, JSON-RPC over HTTP requires the
client to periodically poll <br>
the server to receive server requests.</p>

<p style="margin-top: 1em">&Acirc;&middot; HTTP is more
complicated than stream connections and doesn&rsquo;t
provide any corresponding advantage.</p>

<p style="margin-top: 1em">&Acirc;&middot; The JSON-RPC
specification for HTTP transport is incomplete.</p>

<p style="margin-top: 1em">4.1.5. Monitor <br>
For backward compatibility, ovsdb-server currently permits a
single &lt;monitor-request&gt; to be used instead of an
array; it is treated as a single-element array. Future
ver&acirc; <br>
sions of ovsdb-server might remove this compatibility
feature.</p>

<p style="margin-top: 1em">Because the &lt;json-value&gt;
parameter is used to match subsequent update notifications
(see below) to the request, it must be unique among all
active monitors. ovsdb-server <br>
rejects attempt to create two monitors with the same
identifier.</p>

<p style="margin-top: 1em">4.1.12. Monitor_cond <br>
A new monitor method added in Open vSwitch version 2.6. The
monitor_cond request enables a client to replicate subsets
of tables within an OVSDB database by requesting <br>
notifications of changes to rows matching one of the
conditions specified in &quot;where&quot; by receiving the
specified contents of these rows when table updates occur.
Moni&acirc; <br>
tor_cond also allows a more efficient update notifications
by receiving table-updates2 notifications (described
below).</p>

<p style="margin-top: 1em">The monitor method described in
Section 4.1.5 also applies to monitor_cond, with the
following exceptions:</p>

<p style="margin-top: 1em">&Acirc;&middot; RPC request
method becomes &quot;monitor_cond&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; Reply result
follows &lt;table-updates2&gt;, described in Section
4.1.14.</p>

<p style="margin-top: 1em">&Acirc;&middot; Subsequent
changes are sent to the client using the &quot;update2&quot;
monitor notification, described in Section 4.1.14</p>

<p style="margin-top: 1em">&Acirc;&middot; Update
notifications are being sent only for rows matching
[&lt;condition&gt;*].</p>

<p style="margin-top: 1em">The request object has the
following members:</p>

<p style="margin-top: 1em">&quot;method&quot;:
&quot;monitor_cond&quot; <br>
&quot;params&quot;: [&lt;db-name&gt;, &lt;json-value&gt;,
&lt;monitor-cond-requests&gt;] <br>
&quot;id&quot;: &lt;nonnull-json-value&gt;</p>

<p style="margin-top: 1em">The &lt;json-value&gt; parameter
is used to match subsequent update notifications (see below)
to this request. The &lt;monitor-cond-requests&gt; object
maps the name of the table to <br>
an array of &lt;monitor-cond-request&gt;.</p>

<p style="margin-top: 1em">Each
&lt;monitor-cond-request&gt; is an object with the following
members:</p>

<p style="margin-top: 1em">&quot;columns&quot;:
[&lt;column&gt;*] optional <br>
&quot;where&quot;: [&lt;condition&gt;*] optional <br>
&quot;select&quot;: &lt;monitor-select&gt; optional</p>

<p style="margin-top: 1em">The &quot;columns&quot;, if
present, define the columns within the table to be monitored
that match conditions. If not present all columns are being
monitored.</p>

<p style="margin-top: 1em">The &quot;where&quot; if present
is a JSON array of &lt;condition&gt; and boolean values. If
not present or condition is an empty array, implicit True
will be considered and updates on <br>
all rows will be sent.</p>

<p style="margin-top: 1em">&lt;monitor-select&gt; is an
object with the following members:</p>

<p style="margin-top: 1em">&quot;initial&quot;:
&lt;boolean&gt; optional <br>
&quot;insert&quot;: &lt;boolean&gt; optional <br>
&quot;delete&quot;: &lt;boolean&gt; optional <br>
&quot;modify&quot;: &lt;boolean&gt; optional</p>

<p style="margin-top: 1em">The contents of this object
specify how the columns or table are to be monitored as
explained in more detail below.</p>

<p style="margin-top: 1em">The response object has the
following members:</p>

<p style="margin-top: 1em">&quot;result&quot;:
&lt;table-updates2&gt; <br>
&quot;error&quot;: null <br>
&quot;id&quot;: same &quot;id&quot; as request</p>

<p style="margin-top: 1em">The &lt;table-updates2&gt;
object is described in detail in Section 4.1.14. It contains
the contents of the tables for which &quot;initial&quot;
rows are selected. If no tables initial <br>
contents are requested, then &quot;result&quot; is an empty
object.</p>

<p style="margin-top: 1em">Subsequently, when changes to a
specified table that match one of the conditions in
monitor-cond-request are committed, the changes are
automatically sent to the client <br>
using the &quot;update2&quot; monitor notification (see
Section 4.1.14). This monitoring persists until the JSON-RPC
session terminates or until the client sends a
&quot;monitor_cancel&quot; <br>
JSON-RPC request.</p>

<p style="margin-top: 1em">Each
&lt;monitor-cond-request&gt; specifies one or more
conditions and the manner in which the rows that match the
conditions are to be monitored. The circumstances in which
an <br>
&quot;update&quot; notification is sent for a row within the
table are determined by &lt;monitor-select&gt;:</p>

<p style="margin-top: 1em">&Acirc;&middot; If
&quot;initial&quot; is omitted or true, every row in the
original table that matches one of the conditions is sent as
part of the response to the &quot;monitor_cond&quot;
request.</p>

<p style="margin-top: 1em">&Acirc;&middot; If
&quot;insert&quot; is omitted or true, &quot;update&quot;
notifications are sent for rows newly inserted into the
table that match conditions or for rows modified in the
table so <br>
that their old version does not match the condition and new
version does.</p>

<p style="margin-top: 1em">&Acirc;&middot; If
&quot;delete&quot; is omitted or true, &quot;update&quot;
notifications are sent for rows deleted from the table that
match conditions or for rows modified in the table so that
<br>
their old version does match the conditions and new version
does not.</p>

<p style="margin-top: 1em">&Acirc;&middot; If
&quot;modify&quot; is omitted or true, &quot;update&quot;
notifications are sent whenever a row in the table that
matches conditions in both old and new version is
modified.</p>

<p style="margin-top: 1em">Both monitor and monitor_cond
sessions can exist concurrently. However, monitor and
monitor_cond shares the same &lt;json-value&gt; parameter
space; it must be unique among all <br>
monitor and monitor_cond sessions.</p>

<p style="margin-top: 1em">4.1.13. Monitor_cond_change <br>
The &quot;monitor_cond_change&quot; request enables a client
to change an existing &quot;monitor_cond&quot; replication
of the database by specifying a new condition and columns
for each <br>
replicated table. Currently changing the columns set is not
supported.</p>

<p style="margin-top: 1em">The request object has the
following members:</p>

<p style="margin-top: 1em">&quot;method&quot;:
&quot;monitor_cond_change&quot; <br>
&quot;params&quot;: [&lt;json-value&gt;, &lt;json-value&gt;,
&lt;monitor-cond-update-requests&gt;] <br>
&quot;id&quot;: &lt;nonnull-json-value&gt;</p>

<p style="margin-top: 1em">The &lt;json-value&gt; parameter
should have a value of an existing conditional monitoring
session from this client. The second &lt;json-value&gt; in
params array is the requested <br>
value for this session. This value is valid only after
&quot;monitor_cond_change&quot; is committed. A user can use
these values to distinguish between update messages before
condi&acirc; <br>
tions update and after. The
&lt;monitor-cond-update-requests&gt; object maps the name of
the table to an array of
&lt;monitor-cond-update-request&gt;.</p>

<p style="margin-top: 1em">Each
&lt;monitor-cond-update-request&gt; is an object with the
following members:</p>

<p style="margin-top: 1em">&quot;columns&quot;:
[&lt;column&gt;*] optional <br>
&quot;where&quot;: [&lt;condition&gt;*] optional</p>

<p style="margin-top: 1em">The &quot;columns&quot; specify
a new array of columns to be monitored (Currently
unsupported).</p>

<p style="margin-top: 1em">The &quot;where&quot; specify a
new array of conditions to be applied to this monitoring
session.</p>

<p style="margin-top: 1em">The response object has the
following members:</p>

<p style="margin-top: 1em">&quot;result&quot;: null <br>
&quot;error&quot;: null <br>
&quot;id&quot;: same &quot;id&quot; as request</p>

<p style="margin-top: 1em">Subsequent
&lt;table-updates2&gt; notifications are described in detail
in Section 4.1.14 in the RFC. If insert contents are
requested by original monitor_cond request, &lt;table- <br>
updates2&gt; will contain rows that match the new condition
and do not match the old condition. If deleted contents are
requested by origin monitor request, &lt;table-updates2&gt;
<br>
will contain any matched rows by old condition and not
matched by the new condition.</p>

<p style="margin-top: 1em">Changes according to the new
conditions are automatically sent to the client using the
&quot;update2&quot; monitor notification. An update, if any,
as a result of a condition <br>
change, will be sent to the client before the reply to the
&quot;monitor_cond_change&quot; request.</p>

<p style="margin-top: 1em">4.1.14. Update2 notification
<br>
The &quot;update2&quot; notification is sent by the server
to the client to report changes in tables that are being
monitored following a &quot;monitor_cond&quot; request as
described above. <br>
The notification has the following members: <br>
&quot;method&quot;: &quot;update2&quot; <br>
&quot;params&quot;: [&lt;json-value&gt;,
&lt;table-updates2&gt;] <br>
&quot;id&quot;: null</p>

<p style="margin-top: 1em">The &lt;json-value&gt; in
&quot;params&quot; is the same as the value passed as the
&lt;json-value&gt; in &quot;params&quot; for the
corresponding &quot;monitor&quot; request.
&lt;table-updates2&gt; is an object that <br>
maps from a table name to a &lt;table-update2&gt;. A
&lt;table-update2&gt; is an object that maps from
row&rsquo;s UUID to a &lt;row-update2&gt; object. A
&lt;row-update2&gt; is an object with one of <br>
the following members:</p>

<p style="margin-top: 1em">&quot;initial&quot;: &lt;row&gt;
<br>
present for &quot;initial&quot; updates</p>

<p style="margin-top: 1em">&quot;insert&quot;: &lt;row&gt;
<br>
present for &quot;insert&quot; updates</p>

<p style="margin-top: 1em">&quot;delete&quot;: &lt;row&gt;
<br>
present for &quot;delete&quot; updates</p>

<p style="margin-top: 1em">&quot;modify&quot;: &lt;row&gt;
<br>
present for &quot;modify&quot; updates</p>

<p style="margin-top: 1em">The format of &lt;row&gt; is
described in Section 5.1.</p>

<p style="margin-top: 1em">&lt;row&gt; is always a null
object for a &quot;delete&quot; update. In
&quot;initial&quot; and &quot;insert&quot; updates,
&lt;row&gt; omits columns whose values equal the default
value of the column type.</p>

<p style="margin-top: 1em">For a &quot;modify&quot; update,
&lt;row&gt; contains only the columns that are modified.
&lt;row&gt; stores the difference between the old and new
value for those columns, as described below.</p>

<p style="margin-top: 1em">For columns with single value,
the difference is the value of the new column.</p>

<p style="margin-top: 1em">The difference between two sets
are all elements that only belong to one of the sets.</p>

<p style="margin-top: 1em">The difference between two maps
are all key-value pairs whose keys appears in only one of
the maps, plus the key-value pairs whose keys appear in both
maps but with dif&acirc; <br>
ferent values. For the latter elements, &lt;row&gt; includes
the value from the new column.</p>

<p style="margin-top: 1em">Initial views of rows are not
presented in update2 notifications, but in the response
object to the monitor_cond request. The formatting of the
&lt;table-updates2&gt; object, <br>
however, is the same in either case.</p>

<p style="margin-top: 1em">4.1.15. Get Server ID <br>
A new RPC method added in Open vSwitch version 2.7. The
request contains the following members:</p>

<p style="margin-top: 1em">&quot;method&quot;:
&quot;get_server_id&quot; <br>
&quot;params&quot;: null <br>
&quot;id&quot;: &lt;nonnull-json-value&gt;</p>

<p style="margin-top: 1em">The response object contains the
following members:</p>

<p style="margin-top: 1em">&quot;result&quot;:
&quot;&lt;server_id&gt;&quot; <br>
&quot;error&quot;: null <br>
&quot;id&quot;: same &quot;id&quot; as request</p>

<p style="margin-top: 1em">&lt;server_id&gt; is JSON string
that contains a UUID that uniquely identifies the running
OVSDB server process. A fresh UUID is generated when the
process restarts.</p>

<p style="margin-top: 1em">5.1. Notation <br>
For &lt;condition&gt;, RFC 7047 only allows the use of !=,
==, includes, and excludes operators with set types. Open
vSwitch 2.4 and later extend &lt;condition&gt; to allow the
use <br>
of &lt;, &lt;=, &gt;=, and &gt; operators with columns with
type &lsquo;&lsquo;set of 0 or 1 integer&rsquo;&rsquo; and
&lsquo;&lsquo;set of 0 or 1 real&rsquo;&rsquo;. These
conditions evaluate to false when the column is empty, <br>
and otherwise as described in RFC 7047 for integer and real
types.</p>

<p style="margin-top: 1em">&lt;condition&gt; is specified
in Section 5.1 in the RFC with the following change: A
condition can be either a 3-element JSON array as described
in the RFC or a boolean value. <br>
In case of an empty array an implicit true boolean value
will be considered.</p>

<p style="margin-top: 1em">BUGS <br>
In Open vSwitch before version 2.4, when ovsdb-server sent
JSON-RPC error responses to some requests, it incorrectly
formulated them with the result and error swapped, so that
<br>
the response appeared to indicate success (with a
nonsensical result) rather than an error. The requests that
suffered from this problem were:</p>

<p style="margin-top: 1em">transact <br>
get_schema <br>
Only if the request names a nonexistent database.</p>

<p style="margin-top: 1em">monitor <br>
lock <br>
unlock In all error cases.</p>

<p style="margin-top: 1em">Of these cases, the only error
that a well-written application is likely to encounter in
practice is monitor of tables or columns that do not exist,
in an situation where the <br>
application has been upgraded but the old database schema is
still temporarily in use. To handle this situation
gracefully, we recommend that clients should treat a monitor
<br>
response with a result that contains an error key-value pair
as an error (assuming that the database being monitored does
not contain a table named error).</p>

<p style="margin-top: 1em">SEE ALSO <br>
ovsdb-tool(1).</p>

<p style="margin-top: 1em">Open vSwitch 2.7.0
ovsdb-server(1)</p>
<hr>
</body>
</html>
