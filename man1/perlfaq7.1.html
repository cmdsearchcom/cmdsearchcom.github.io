<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:30:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PERLFAQ7(1) Perl Programmers Reference Guide
PERLFAQ7(1)</p>

<p style="margin-top: 1em">NAME <br>
perlfaq7 - General Perl Language Issues</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This section deals with general Perl language issues that
don&rsquo;t clearly fit into any of the other sections.</p>

<p style="margin-top: 1em">Can I get a BNF/yacc/RE for the
Perl language? <br>
There is no BNF, but you can paw your way through the yacc
grammar in perly.y in the source distribution if
you&rsquo;re particularly brave. The grammar relies on very
smart tokenizing <br>
code, so be prepared to venture into toke.c as well.</p>

<p style="margin-top: 1em">In the words of Chaim Frenkel:
&quot;Perl&rsquo;s grammar can not be reduced to BNF. The
work of parsing perl is distributed between yacc, the lexer,
smoke and mirrors.&quot;</p>

<p style="margin-top: 1em">What are all these $@%&amp;*
punctuation signs, and how do I know when to use them? <br>
They are type specifiers, as detailed in perldata:</p>

<p style="margin-top: 1em">$ for scalar values (number,
string or reference) <br>
@ for arrays <br>
% for hashes (associative arrays) <br>
&amp; for subroutines (aka functions, procedures, methods)
<br>
* for all types of that symbol name. In version 4 you used
them like <br>
pointers, but in modern perls you can just use
references.</p>

<p style="margin-top: 1em">There are a couple of other
symbols that you&rsquo;re likely to encounter that
aren&rsquo;t really type specifiers:</p>

<p style="margin-top: 1em">&lt;&gt; are used for inputting
a record from a filehandle. &nbsp; <br>
takes a reference to something.</p>

<p style="margin-top: 1em">Note that &lt;FILE&gt; is
neither the type specifier for files nor the name of the
handle. It is the &quot;&lt;&gt;&quot; operator applied to
the handle FILE. It reads one line (well, record--see
&quot;$/&quot; <br>
in perlvar) from the handle FILE in scalar context, or all
lines in list context. When performing open, close, or any
other operation besides &quot;&lt;&gt;&quot; on files, or
even when talking <br>
about the handle, do not use the brackets. These are
correct: &quot;eof(FH)&quot;, &quot;seek(FH, 0, 2)&quot; and
&quot;copying from STDIN to FILE&quot;.</p>

<p style="margin-top: 1em">Do I always/never have to quote
my strings or use semicolons and commas? <br>
Normally, a bareword doesn&rsquo;t need to be quoted, but in
most cases probably should be (and must be under &quot;use
strict&quot;). But a hash key consisting of a simple word
and the left- <br>
hand operand to the &quot;=&gt;&quot; operator both count as
though they were quoted:</p>

<p style="margin-top: 1em">This is like this <br>
------------ --------------- <br>
$foo{line} $foo{&rsquo;line&rsquo;} <br>
bar =&gt; stuff &rsquo;bar&rsquo; =&gt; stuff</p>

<p style="margin-top: 1em">The final semicolon in a block
is optional, as is the final comma in a list. Good style
(see perlstyle) says to put them in except for
one-liners:</p>

<p style="margin-top: 1em">if ($whoops) { exit 1 } <br>
my @nums = (1, 2, 3);</p>

<p style="margin-top: 1em">if ($whoops) { <br>
exit 1; <br>
}</p>

<p style="margin-top: 1em">my @lines = ( <br>
&quot;There Beren came from mountains cold&quot;, <br>
&quot;And lost he wandered under leaves&quot;, <br>
);</p>

<p style="margin-top: 1em">How do I skip some return
values? <br>
One way is to treat the return values as a list and index
into it:</p>

<p style="margin-top: 1em">$dir = (getpwnam($user))[7];</p>

<p style="margin-top: 1em">Another way is to use undef as
an element on the left-hand-side:</p>

<p style="margin-top: 1em">($dev, $ino, undef, undef, $uid,
$gid) = stat($file);</p>

<p style="margin-top: 1em">You can also use a list slice to
select only the elements that you need:</p>

<p style="margin-top: 1em">($dev, $ino, $uid, $gid) = (
stat($file) )[0,1,4,5];</p>

<p style="margin-top: 1em">How do I temporarily block
warnings? <br>
If you are running Perl 5.6.0 or better, the &quot;use
warnings&quot; pragma allows fine control of what warnings
are produced. See perllexwarn for more details.</p>

<p style="margin-top: 1em">{ <br>
no warnings; # temporarily turn off warnings <br>
$x = $y + $z; # I know these might be undef <br>
}</p>

<p style="margin-top: 1em">Additionally, you can enable and
disable categories of warnings. You turn off the categories
you want to ignore and you can still get other categories of
warnings. See <br>
perllexwarn for the complete details, including the category
names and hierarchy.</p>

<p style="margin-top: 1em">{ <br>
no warnings &rsquo;uninitialized&rsquo;; <br>
$x = $y + $z; <br>
}</p>

<p style="margin-top: 1em">If you have an older version of
Perl, the $^W variable (documented in perlvar) controls
runtime warnings for a block:</p>

<p style="margin-top: 1em">{ <br>
local $^W = 0; # temporarily turn off warnings <br>
$x = $y + $z; # I know these might be undef <br>
}</p>

<p style="margin-top: 1em">Note that like all the
punctuation variables, you cannot currently use my() on $^W,
only local().</p>

<p style="margin-top: 1em">What&rsquo;s an extension? <br>
An extension is a way of calling compiled C code from Perl.
Reading perlxstut is a good place to learn more about
extensions.</p>

<p style="margin-top: 1em">Why do Perl operators have
different precedence than C operators? <br>
Actually, they don&rsquo;t. All C operators that Perl copies
have the same precedence in Perl as they do in C. The
problem is with operators that C doesn&rsquo;t have,
especially functions <br>
that give a list context to everything on their right, eg.
print, chmod, exec, and so on. Such functions are called
&quot;list operators&quot; and appear as such in the
precedence table in <br>
perlop.</p>

<p style="margin-top: 1em">A common mistake is to
write:</p>

<p style="margin-top: 1em">unlink $file || die
&quot;snafu&quot;;</p>

<p style="margin-top: 1em">This gets interpreted as:</p>

<p style="margin-top: 1em">unlink ($file || die
&quot;snafu&quot;);</p>

<p style="margin-top: 1em">To avoid this problem, either
put in extra parentheses or use the super low precedence
&quot;or&quot; operator:</p>

<p style="margin-top: 1em">(unlink $file) || die
&quot;snafu&quot;; <br>
unlink $file or die &quot;snafu&quot;;</p>

<p style="margin-top: 1em">The &quot;English&quot;
operators (&quot;and&quot;, &quot;or&quot;, &quot;xor&quot;,
and &quot;not&quot;) deliberately have precedence lower than
that of list operators for just such situations as the one
above.</p>

<p style="margin-top: 1em">Another operator with surprising
precedence is exponentiation. It binds more tightly even
than unary minus, making &quot;-2**2&quot; produce a
negative four and not a positive one. It is <br>
also right-associating, meaning that &quot;2**3**2&quot; is
two raised to the ninth power, not eight squared.</p>

<p style="margin-top: 1em">Although it has the same
precedence as in C, Perl&rsquo;s &quot;?:&quot; operator
produces an lvalue. This assigns $x to either $if_true or
$if_false, depending on the trueness of $maybe:</p>

<p style="margin-top: 1em">($maybe ? $if_true : $if_false)
= $x;</p>

<p style="margin-top: 1em">How do I declare/create a
structure? <br>
In general, you don&rsquo;t &quot;declare&quot; a structure.
Just use a (probably anonymous) hash reference. See perlref
and perldsc for details. Here&rsquo;s an example:</p>

<p style="margin-top: 1em">$person = {}; # new anonymous
hash <br>
$person-&gt;{AGE} = 24; # set field AGE to 24 <br>
$person-&gt;{NAME} = &quot;Nat&quot;; # set field NAME to
&quot;Nat&quot;</p>

<p style="margin-top: 1em">If you&rsquo;re looking for
something a bit more rigorous, try perltoot.</p>

<p style="margin-top: 1em">How do I create a module? <br>
perlnewmod is a good place to start, ignore the bits about
uploading to CPAN if you don&rsquo;t want to make your
module publicly available.</p>

<p style="margin-top: 1em">ExtUtils::ModuleMaker and
Module::Starter are also good places to start. Many CPAN
authors now use Dist::Zilla to automate as much as
possible.</p>

<p style="margin-top: 1em">Detailed documentation about
modules can be found at: perlmod, perlmodlib,
perlmodstyle.</p>

<p style="margin-top: 1em">If you need to include C code or
C library interfaces use h2xs. h2xs will create the module
distribution structure and the initial interface files.
perlxs and perlxstut explain <br>
the details.</p>

<p style="margin-top: 1em">How do I adopt or take over a
module already on CPAN? <br>
Ask the current maintainer to make you a co-maintainer or
transfer the module to you.</p>

<p style="margin-top: 1em">If you can not reach the author
for some reason contact the PAUSE admins at modules@perl.org
who may be able to help, but each case it treated
seperatly.</p>

<p style="margin-top: 1em">&Acirc;&middot; Get a login for
the Perl Authors Upload Server (PAUSE) if you don&rsquo;t
already have one: &lt;http://pause.perl.org&gt;</p>

<p style="margin-top: 1em">&Acirc;&middot; Write to
modules@perl.org explaining what you did to contact the
current maintainer. The PAUSE admins will also try to reach
the maintainer.</p>

<p style="margin-top: 1em">&Acirc;&middot; Post a public
message in a heavily trafficked site announcing your
intention to take over the module.</p>

<p style="margin-top: 1em">&Acirc;&middot; Wait a bit. The
PAUSE admins don&rsquo;t want to act too quickly in case the
current maintainer is on holiday. If there&rsquo;s no
response to private communication or the public post, a <br>
PAUSE admin can transfer it to you.</p>

<p style="margin-top: 1em">How do I create a class? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">In Perl, a class is just a
package, and methods are just subroutines. Perl
doesn&rsquo;t get more formal than that and lets you set up
the package just the way that you like it (that <br>
is, it doesn&rsquo;t set up anything for you).</p>

<p style="margin-top: 1em">The Perl documentation has
several tutorials that cover class creation, including
perlboot (Barnyard Object Oriented Tutorial), perltoot
(Tom&rsquo;s Object Oriented Tutorial), perlbot <br>
(Bag o&rsquo; Object Tricks), and perlobj.</p>

<p style="margin-top: 1em">How can I tell if a variable is
tainted? <br>
You can use the tainted() function of the Scalar::Util
module, available from CPAN (or included with Perl since
release 5.8.0). See also &quot;Laundering and Detecting
Tainted Data&quot; <br>
in perlsec.</p>

<p style="margin-top: 1em">What&rsquo;s a closure? <br>
Closures are documented in perlref.</p>

<p style="margin-top: 1em">Closure is a computer science
term with a precise but hard-to-explain meaning. Usually,
closures are implemented in Perl as anonymous subroutines
with lasting references to <br>
lexical variables outside their own scopes. These lexicals
magically refer to the variables that were around when the
subroutine was defined (deep binding).</p>

<p style="margin-top: 1em">Closures are most often used in
programming languages where you can have the return value of
a function be itself a function, as you can in Perl. Note
that some languages provide <br>
anonymous functions but are not capable of providing proper
closures: the Python language, for example. For more
information on closures, check out any textbook on
functional <br>
programming. Scheme is a language that not only supports but
encourages closures.</p>

<p style="margin-top: 1em">Here&rsquo;s a classic
non-closure function-generating function:</p>

<p style="margin-top: 1em">sub add_function_generator {
<br>
return sub { shift() + shift() }; <br>
}</p>

<p style="margin-top: 1em">my $add_sub =
add_function_generator(); <br>
my $sum = $add_sub-&gt;(4,5); # $sum is 9 now.</p>

<p style="margin-top: 1em">The anonymous subroutine
returned by add_function_generator() isn&rsquo;t technically
a closure because it refers to no lexicals outside its own
scope. Using a closure gives you a <br>
function template with some customization slots left out to
be filled later.</p>

<p style="margin-top: 1em">Contrast this with the following
make_adder() function, in which the returned anonymous
function contains a reference to a lexical variable outside
the scope of that function <br>
itself. Such a reference requires that Perl return a proper
closure, thus locking in for all time the value that the
lexical had when the function was created.</p>

<p style="margin-top: 1em">sub make_adder { <br>
my $addpiece = shift; <br>
return sub { shift() + $addpiece }; <br>
}</p>

<p style="margin-top: 1em">my $f1 = make_adder(20); <br>
my $f2 = make_adder(555);</p>

<p style="margin-top: 1em">Now &quot;$f1-&gt;($n)&quot; is
always 20 plus whatever $n you pass in, whereas
&quot;$f2-&gt;($n)&quot; is always 555 plus whatever $n you
pass in. The $addpiece in the closure sticks around.</p>

<p style="margin-top: 1em">Closures are often used for less
esoteric purposes. For example, when you want to pass in a
bit of code into a function:</p>

<p style="margin-top: 1em">my $line; <br>
timeout( 30, sub { $line = &lt;STDIN&gt; } );</p>

<p style="margin-top: 1em">If the code to execute had been
passed in as a string, &rsquo;$line = &lt;STDIN&gt;&rsquo;,
there would have been no way for the hypothetical timeout()
function to access the lexical variable <br>
$line back in its caller&rsquo;s scope.</p>

<p style="margin-top: 1em">Another use for a closure is to
make a variable private to a named subroutine, e.g. a
counter that gets initialized at creation time of the sub
and can only be modified from <br>
within the sub. This is sometimes used with a BEGIN block in
package files to make sure a variable doesn&rsquo;t get
meddled with during the lifetime of the package:</p>

<p style="margin-top: 1em">BEGIN { <br>
my $id = 0; <br>
sub next_id { ++$id } <br>
}</p>

<p style="margin-top: 1em">This is discussed in more detail
in perlsub; see the entry on Persistent Private
Variables.</p>

<p style="margin-top: 1em">What is variable suicide and how
can I prevent it? <br>
This problem was fixed in perl 5.004_05, so preventing it
means upgrading your version of perl. ;)</p>

<p style="margin-top: 1em">Variable suicide is when you
(temporarily or permanently) lose the value of a variable.
It is caused by scoping through my() and local() interacting
with either closures or <br>
aliased foreach() iterator variables and subroutine
arguments. It used to be easy to inadvertently lose a
variable&rsquo;s value this way, but now it&rsquo;s much
harder. Take this code:</p>

<p style="margin-top: 1em">my $f = &rsquo;foo&rsquo;; <br>
sub T { <br>
while ($i++ &lt; 3) { my $f = $f; $f .= &quot;bar&quot;;
print $f, &quot;0 } <br>
}</p>

<p style="margin-top: 1em">T; <br>
print &quot;Finally $f0;</p>

<p style="margin-top: 1em">If you are experiencing variable
suicide, that &quot;my $f&quot; in the subroutine
doesn&rsquo;t pick up a fresh copy of the $f whose value is
&rsquo;foo&rsquo;. The output shows that inside the
subroutine <br>
the value of $f leaks through when it shouldn&rsquo;t, as in
this output:</p>

<p style="margin-top: 1em">foobar <br>
foobarbar <br>
foobarbarbar <br>
Finally foo</p>

<p style="margin-top: 1em">The $f that has &quot;bar&quot;
added to it three times should be a new $f &quot;my $f&quot;
should create a new lexical variable each time through the
loop. The expected output is:</p>

<p style="margin-top: 1em">foobar <br>
foobar <br>
foobar <br>
Finally foo</p>

<p style="margin-top: 1em">How can I pass/return a
{Function, FileHandle, Array, Hash, Method, Regex}? <br>
You need to pass references to these objects. See &quot;Pass
by Reference&quot; in perlsub for this particular question,
and perlref for information on references.</p>

<p style="margin-top: 1em">Passing Variables and Functions
<br>
Regular variables and functions are quite easy to pass: just
pass in a reference to an existing or anonymous variable or
function:</p>

<p style="margin-top: 1em">func( ome_scalar );</p>

<p style="margin-top: 1em">func( @some_array ); <br>
func( [ 1 .. 10 ] );</p>

<p style="margin-top: 1em">func( some_hash ); <br>
func( { this =&gt; 10, that =&gt; 20 } );</p>

<p style="margin-top: 1em">func( some_func ); <br>
func( sub { $_[0] ** $_[1] } );</p>

<p style="margin-top: 1em">Passing Filehandles <br>
As of Perl 5.6, you can represent filehandles with scalar
variables which you treat as any other scalar.</p>

<p style="margin-top: 1em">open my $fh, $filename or die
&quot;Cannot open $filename! $!&quot;; <br>
func( $fh );</p>

<p style="margin-top: 1em">sub func { <br>
my $passed_fh = shift;</p>

<p style="margin-top: 1em">my $line = &lt;$passed_fh&gt;;
<br>
}</p>

<p style="margin-top: 1em">Before Perl 5.6, you had to use
the *FH or &quot;H&quot; notations. These are
&quot;typeglobs&quot;--see &quot;Typeglobs and
Filehandles&quot; in perldata and especially &quot;Pass by
Reference&quot; in perlsub <br>
for more information.</p>

<p style="margin-top: 1em">Passing Regexes <br>
Here&rsquo;s an example of how to pass in a string and a
regular expression for it to match against. You construct
the pattern with the &quot;qr//&quot; operator:</p>

<p style="margin-top: 1em">sub compare($$) { <br>
my ($val1, $regex) = @_; <br>
my $retval = $val1 =~ /$regex/; <br>
return $retval; <br>
} <br>
$match = compare(&quot;old McDonald&quot;, qr/d.*D/i);</p>

<p style="margin-top: 1em">Passing Methods <br>
To pass an object method into a subroutine, you can do
this:</p>

<p style="margin-top: 1em">call_a_lot(10, $some_obj,
&quot;methname&quot;) <br>
sub call_a_lot { <br>
my ($count, $widget, $trick) = @_; <br>
for (my $i = 0; $i &lt; $count; $i++) { <br>
$widget-&gt;$trick(); <br>
} <br>
}</p>

<p style="margin-top: 1em">Or, you can use a closure to
bundle up the object, its method call, and arguments:</p>

<p style="margin-top: 1em">my $whatnot = sub {
$some_obj-&gt;obfuscate(@args) }; <br>
func($whatnot); <br>
sub func { <br>
my $code = shift; <br>
&amp;$code(); <br>
}</p>

<p style="margin-top: 1em">You could also investigate the
can() method in the UNIVERSAL class (part of the standard
perl distribution).</p>

<p style="margin-top: 1em">How do I create a static
variable? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">In Perl 5.10, declare the
variable with &quot;state&quot;. The &quot;state&quot;
declaration creates the lexical variable that persists
between calls to the subroutine:</p>

<p style="margin-top: 1em">sub counter { state $count = 1;
$count++ }</p>

<p style="margin-top: 1em">You can fake a static variable
by using a lexical variable which goes out of scope. In this
example, you define the subroutine &quot;counter&quot;, and
it uses the lexical variable $count. <br>
Since you wrap this in a BEGIN block, $count is defined at
compile-time, but also goes out of scope at the end of the
BEGIN block. The BEGIN block also ensures that the <br>
subroutine and the value it uses is defined at compile-time
so the subroutine is ready to use just like any other
subroutine, and you can put this code in the same place as
other <br>
subroutines in the program text (i.e. at the end of the
code, typically). The subroutine &quot;counter&quot; still
has a reference to the data, and is the only way you can
access the value <br>
(and each time you do, you increment the value). The data in
chunk of memory defined by $count is private to
&quot;counter&quot;.</p>

<p style="margin-top: 1em">BEGIN { <br>
my $count = 1; <br>
sub counter { $count++ } <br>
}</p>

<p style="margin-top: 1em">my $start = counter();</p>

<p style="margin-top: 1em">.... # code that calls
counter();</p>

<p style="margin-top: 1em">my $end = counter();</p>

<p style="margin-top: 1em">In the previous example, you
created a function-private variable because only one
function remembered its reference. You could define multiple
functions while the variable is in <br>
scope, and each function can share the &quot;private&quot;
variable. It&rsquo;s not really &quot;static&quot; because
you can access it outside the function while the lexical
variable is in scope, and <br>
even create references to it. In this example,
&quot;increment_count&quot; and &quot;return_count&quot;
share the variable. One function adds to the value and the
other simply returns the value. <br>
They can both access $count, and since it has gone out of
scope, there is no other way to access it.</p>

<p style="margin-top: 1em">BEGIN { <br>
my $count = 1; <br>
sub increment_count { $count++ } <br>
sub return_count { $count } <br>
}</p>

<p style="margin-top: 1em">To declare a file-private
variable, you still use a lexical variable. A file is also a
scope, so a lexical variable defined in the file cannot be
seen from any other file.</p>

<p style="margin-top: 1em">See &quot;Persistent Private
Variables&quot; in perlsub for more information. The
discussion of closures in perlref may help you even though
we did not use anonymous subroutines in this <br>
answer. See &quot;Persistent Private Variables&quot; in
perlsub for details.</p>

<p style="margin-top: 1em">What&rsquo;s the difference
between dynamic and lexical (static) scoping? Between
local() and my()? <br>
&quot;local($x)&quot; saves away the old value of the global
variable $x and assigns a new value for the duration of the
subroutine which is visible in other functions called from
that <br>
subroutine. This is done at run-time, so is called dynamic
scoping. local() always affects global variables, also
called package variables or dynamic variables.</p>

<p style="margin-top: 1em">&quot;my($x)&quot; creates a new
variable that is only visible in the current subroutine.
This is done at compile-time, so it is called lexical or
static scoping. my() always affects <br>
private variables, also called lexical variables or
(improperly) static(ly scoped) variables.</p>

<p style="margin-top: 1em">For instance:</p>

<p style="margin-top: 1em">sub visible { <br>
print &quot;var has value $var0; <br>
}</p>

<p style="margin-top: 1em">sub dynamic { <br>
local $var = &rsquo;local&rsquo;; # new temporary value for
the still-global <br>
visible(); # variable called $var <br>
}</p>

<p style="margin-top: 1em">sub lexical { <br>
my $var = &rsquo;private&rsquo;; # new private variable,
$var <br>
visible(); # (invisible outside of sub scope) <br>
}</p>

<p style="margin-top: 1em">$var = &rsquo;global&rsquo;;</p>

<p style="margin-top: 1em">visible(); # prints global <br>
dynamic(); # prints local <br>
lexical(); # prints global</p>

<p style="margin-top: 1em">Notice how at no point does the
value &quot;private&quot; get printed. That&rsquo;s because
$var only has that value within the block of the lexical()
function, and it is hidden from the called <br>
subroutine.</p>

<p style="margin-top: 1em">In summary, local()
doesn&rsquo;t make what you think of as private, local
variables. It gives a global variable a temporary value.
my() is what you&rsquo;re looking for if you want private
<br>
variables.</p>

<p style="margin-top: 1em">See &quot;Private Variables via
my()&quot; in perlsub and &quot;Temporary Values via
local()&quot; in perlsub for excruciating details.</p>

<p style="margin-top: 1em">How can I access a dynamic
variable while a similarly named lexical is in scope? <br>
If you know your package, you can just mention it
explicitly, as in $Some_Pack::var. Note that the notation
$::var is not the dynamic $var in the current package, but
rather the <br>
one in the &quot;main&quot; package, as though you had
written $main::var.</p>

<p style="margin-top: 1em">use vars &rsquo;$var&rsquo;;
<br>
local $var = &quot;global&quot;; <br>
my $var = &quot;lexical&quot;;</p>

<p style="margin-top: 1em">print &quot;lexical is $var0;
<br>
print &quot;global is $main::var0;</p>

<p style="margin-top: 1em">Alternatively you can use the
compiler directive our() to bring a dynamic variable into
the current lexical scope.</p>

<p style="margin-top: 1em">require 5.006; # our() did not
exist before 5.6 <br>
use vars &rsquo;$var&rsquo;;</p>

<p style="margin-top: 1em">local $var = &quot;global&quot;;
<br>
my $var = &quot;lexical&quot;;</p>

<p style="margin-top: 1em">print &quot;lexical is
$var0;</p>

<p style="margin-top: 1em">{ <br>
our $var; <br>
print &quot;global is $var0; <br>
}</p>

<p style="margin-top: 1em">What&rsquo;s the difference
between deep and shallow binding? <br>
In deep binding, lexical variables mentioned in anonymous
subroutines are the same ones that were in scope when the
subroutine was created. In shallow binding, they are <br>
whichever variables with the same names happen to be in
scope when the subroutine is called. Perl always uses deep
binding of lexical variables (i.e., those created with
my()). <br>
However, dynamic variables (aka global, local, or package
variables) are effectively shallowly bound. Consider this
just one more reason not to use them. See the answer to <br>
&quot;What&rsquo;s a closure?&quot;.</p>

<p style="margin-top: 1em">Why doesn&rsquo;t &quot;my($foo)
= &lt;$fh&gt;;&quot; work right? <br>
&quot;my()&quot; and &quot;local()&quot; give list context
to the right hand side of &quot;=&quot;. The &lt;$fh&gt;
read operation, like so many of Perl&rsquo;s functions and
operators, can tell which context it was <br>
called in and behaves appropriately. In general, the
scalar() function can help. This function does nothing to
the data itself (contrary to popular myth) but rather tells
its <br>
argument to behave in whatever its scalar fashion is. If
that function doesn&rsquo;t have a defined scalar behavior,
this of course doesn&rsquo;t help you (such as with
sort()).</p>

<p style="margin-top: 1em">To enforce scalar context in
this particular case, however, you need merely omit the
parentheses:</p>

<p style="margin-top: 1em">local($foo) = &lt;$fh&gt;; #
WRONG <br>
local($foo) = scalar(&lt;$fh&gt;); # ok <br>
local $foo = &lt;$fh&gt;; # right</p>

<p style="margin-top: 1em">You should probably be using
lexical variables anyway, although the issue is the same
here:</p>

<p style="margin-top: 1em">my($foo) = &lt;$fh&gt;; # WRONG
<br>
my $foo = &lt;$fh&gt;; # right</p>

<p style="margin-top: 1em">How do I redefine a builtin
function, operator, or method? <br>
Why do you want to do that? :-)</p>

<p style="margin-top: 1em">If you want to override a
predefined function, such as open(), then you&rsquo;ll have
to import the new definition from a different module. See
&quot;Overriding Built-in Functions&quot; in <br>
perlsub.</p>

<p style="margin-top: 1em">If you want to overload a Perl
operator, such as &quot;+&quot; or &quot;**&quot;, then
you&rsquo;ll want to use the &quot;use overload&quot;
pragma, documented in overload.</p>

<p style="margin-top: 1em">If you&rsquo;re talking about
obscuring method calls in parent classes, see
&quot;Overridden Methods&quot; in perltoot.</p>

<p style="margin-top: 1em">What&rsquo;s the difference
between calling a function as &amp;foo and foo()? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">Calling a subroutine as &amp;foo
with no trailing parentheses ignores the prototype of
&quot;foo&quot; and passes it the current value of the
argument list, @_. Here&rsquo;s an example; the
&quot;bar&quot; <br>
subroutine calls &amp;foo, which prints its arguments
list:</p>

<p style="margin-top: 1em">sub bar { &amp;foo }</p>

<p style="margin-top: 1em">sub foo { print &quot;Args in
foo are: @_0 }</p>

<p style="margin-top: 1em">bar( qw( a b c ) );</p>

<p style="margin-top: 1em">When you call &quot;bar&quot;
with arguments, you see that &quot;foo&quot; got the same
@_:</p>

<p style="margin-top: 1em">Args in foo are: a b c</p>

<p style="margin-top: 1em">Calling the subroutine with
trailing parentheses, with or without arguments, does not
use the current @_ and respects the subroutine prototype.
Changing the example to put <br>
parentheses after the call to &quot;foo&quot; changes the
program:</p>

<p style="margin-top: 1em">sub bar { &amp;foo() }</p>

<p style="margin-top: 1em">sub foo { print &quot;Args in
foo are: @_0 }</p>

<p style="margin-top: 1em">bar( qw( a b c ) );</p>

<p style="margin-top: 1em">Now the output shows that
&quot;foo&quot; doesn&rsquo;t get the @_ from its
caller.</p>

<p style="margin-top: 1em">Args in foo are:</p>

<p style="margin-top: 1em">The main use of the @_
pass-through feature is to write subroutines whose main job
it is to call other subroutines for you. For further
details, see perlsub.</p>

<p style="margin-top: 1em">How do I create a switch or case
statement? <br>
In Perl 5.10, use the &quot;given-when&quot; construct
described in perlsyn:</p>

<p style="margin-top: 1em">use 5.010;</p>

<p style="margin-top: 1em">given ( $string ) { <br>
when( &rsquo;Fred&rsquo; ) { say &quot;I found Fred!&quot; }
<br>
when( &rsquo;Barney&rsquo; ) { say &quot;I found
Barney!&quot; } <br>
when( /Bamm-?Bamm/ ) { say &quot;I found Bamm-Bamm!&quot; }
<br>
default { say &quot;I don&rsquo;t recognize the name!&quot;
} <br>
};</p>

<p style="margin-top: 1em">If one wants to use pure Perl
and to be compatible with Perl versions prior to 5.10, the
general answer is to use &quot;if-elsif-else&quot;:</p>

<p style="margin-top: 1em">for ($variable_to_test) { <br>
if (/pat1/) { } # do something <br>
elsif (/pat2/) { } # do something else <br>
elsif (/pat3/) { } # do something else <br>
else { } # default <br>
}</p>

<p style="margin-top: 1em">Here&rsquo;s a simple example of
a switch based on pattern matching, lined up in a way to
make it look more like a switch statement. We&rsquo;ll do a
multiway conditional based on the type <br>
of reference stored in $whatchamacallit:</p>

<p style="margin-top: 1em">SWITCH: for (ref
$whatchamacallit) {</p>

<p style="margin-top: 1em">/^$/ &amp;&amp; die &quot;not a
reference&quot;;</p>

<p style="margin-top: 1em">/SCALAR/ &amp;&amp; do { <br>
print_scalar($$ref); <br>
last SWITCH; <br>
};</p>

<p style="margin-top: 1em">/ARRAY/ &amp;&amp; do { <br>
print_array(@$ref); <br>
last SWITCH; <br>
};</p>

<p style="margin-top: 1em">/HASH/ &amp;&amp; do { <br>
print_hash(%$ref); <br>
last SWITCH; <br>
};</p>

<p style="margin-top: 1em">/CODE/ &amp;&amp; do { <br>
warn &quot;can&rsquo;t print function ref&quot;; <br>
last SWITCH; <br>
};</p>

<p style="margin-top: 1em"># DEFAULT</p>

<p style="margin-top: 1em">warn &quot;User defined type
skipped&quot;;</p>

<p style="margin-top: 1em">}</p>

<p style="margin-top: 1em">See perlsyn for other examples
in this style.</p>

<p style="margin-top: 1em">Sometimes you should change the
positions of the constant and the variable. For example,
let&rsquo;s say you wanted to test which of many answers you
were given, but in a case- <br>
insensitive way that also allows abbreviations. You can use
the following technique if the strings all start with
different characters or if you want to arrange the matches
so <br>
that one takes precedence over another, as &quot;SEND&quot;
has precedence over &quot;STOP&quot; here:</p>

<p style="margin-top: 1em">chomp($answer = &lt;&gt;); <br>
if (&quot;SEND&quot; =~ /^Q$answer/i) { print &quot;Action
is send0 } <br>
elsif (&quot;STOP&quot; =~ /^Q$answer/i) { print
&quot;Action is stop0 } <br>
elsif (&quot;ABORT&quot; =~ /^Q$answer/i) { print
&quot;Action is abort0 } <br>
elsif (&quot;LIST&quot; =~ /^Q$answer/i) { print
&quot;Action is list0 } <br>
elsif (&quot;EDIT&quot; =~ /^Q$answer/i) { print
&quot;Action is edit0 }</p>

<p style="margin-top: 1em">A totally different approach is
to create a hash of function references.</p>

<p style="margin-top: 1em">my %commands = ( <br>
&quot;happy&quot; =&gt; joy, <br>
&quot;sad&quot;, =&gt; sullen, <br>
&quot;done&quot; =&gt; sub { die &quot;See ya!&quot; }, <br>
&quot;mad&quot; =&gt; angry, <br>
);</p>

<p style="margin-top: 1em">print &quot;How are you? &quot;;
<br>
chomp($string = &lt;STDIN&gt;); <br>
if ($commands{$string}) { <br>
$commands{$string}-&gt;(); <br>
} else { <br>
print &quot;No such command: $string0; <br>
}</p>

<p style="margin-top: 1em">Starting from Perl 5.8, a source
filter module, &quot;Switch&quot;, can also be used to get
switch and case. Its use is now discouraged, because
it&rsquo;s not fully compatible with the native <br>
switch of Perl 5.10, and because, as it&rsquo;s implemented
as a source filter, it doesn&rsquo;t always work as intended
when complex syntax is involved.</p>

<p style="margin-top: 1em">How can I catch accesses to
undefined variables, functions, or methods? <br>
The AUTOLOAD method, discussed in &quot;Autoloading&quot; in
perlsub and &quot;AUTOLOAD: Proxy Methods&quot; in perltoot,
lets you capture calls to undefined functions and
methods.</p>

<p style="margin-top: 1em">When it comes to undefined
variables that would trigger a warning under &quot;use
warnings&quot;, you can promote the warning to an error.</p>

<p style="margin-top: 1em">use warnings FATAL =&gt;
qw(uninitialized);</p>

<p style="margin-top: 1em">Why can&rsquo;t a method
included in this same file be found? <br>
Some possible reasons: your inheritance is getting confused,
you&rsquo;ve misspelled the method name, or the object is of
the wrong type. Check out perltoot for details about any of
<br>
the above cases. You may also use &quot;print
ref($object)&quot; to find out the class $object was blessed
into.</p>

<p style="margin-top: 1em">Another possible reason for
problems is that you&rsquo;ve used the indirect object
syntax (eg, &quot;find Guru &quot;Samy&quot;&quot;) on a
class name before Perl has seen that such a package exists.
It&rsquo;s <br>
wisest to make sure your packages are all defined before you
start using them, which will be taken care of if you use the
&quot;use&quot; statement instead of &quot;require&quot;. If
not, make sure <br>
to use arrow notation (eg.,
&quot;Guru-&gt;find(&quot;Samy&quot;)&quot;) instead. Object
notation is explained in perlobj.</p>

<p style="margin-top: 1em">Make sure to read about creating
modules in perlmod and the perils of indirect objects in
&quot;Method Invocation&quot; in perlobj.</p>

<p style="margin-top: 1em">How can I find out my current or
calling package? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">To find the package you are
currently in, use the special literal
&quot;__PACKAGE__&quot;, as documented in perldata. You can
only use the special literals as separate tokens, so you
can&rsquo;t <br>
interpolate them into strings like you can with
variables:</p>

<p style="margin-top: 1em">my $current_package =
__PACKAGE__; <br>
print &quot;I am in package $current_package0;</p>

<p style="margin-top: 1em">If you want to find the package
calling your code, perhaps to give better diagnostics as
Carp does, use the &quot;caller&quot; built-in:</p>

<p style="margin-top: 1em">sub foo { <br>
my @args = ...; <br>
my( $package, $filename, $line ) = caller;</p>

<p style="margin-top: 1em">print &quot;I was called from
package $package0; <br>
);</p>

<p style="margin-top: 1em">By default, your program starts
in package &quot;main&quot;, so you will always be in some
package.</p>

<p style="margin-top: 1em">This is different from finding
out the package an object is blessed into, which might not
be the current package. For that, use &quot;blessed&quot;
from Scalar::Util, part of the Standard <br>
Library since Perl 5.8:</p>

<p style="margin-top: 1em">use Scalar::Util qw(blessed);
<br>
my $object_package = blessed( $object );</p>

<p style="margin-top: 1em">Most of the time, you
shouldn&rsquo;t care what package an object is blessed into,
however, as long as it claims to inherit from that
class:</p>

<p style="margin-top: 1em">my $is_right_class = eval {
$object-&gt;isa( $package ) }; # true or false</p>

<p style="margin-top: 1em">And, with Perl 5.10 and later,
you don&rsquo;t have to check for an inheritance to see if
the object can handle a role. For that, you can use
&quot;DOES&quot;, which comes from
&quot;UNIVERSAL&quot;:</p>

<p style="margin-top: 1em">my $class_does_it = eval {
$object-&gt;DOES( $role ) }; # true or false</p>

<p style="margin-top: 1em">You can safely replace
&quot;isa&quot; with &quot;DOES&quot; (although the converse
is not true).</p>

<p style="margin-top: 1em">How can I comment out a large
block of Perl code? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">The quick-and-dirty way to
comment out more than one line of Perl is to surround those
lines with Pod directives. You have to put these directives
at the beginning of the line <br>
and somewhere where Perl expects a new statement (so not in
the middle of statements like the &quot;#&quot; comments).
You end the comment with &quot;=cut&quot;, ending the Pod
section:</p>

<p style="margin-top: 1em">=pod</p>

<p style="margin-top: 1em">my $object =
NotGonnaHappen-&gt;new();</p>

<p style="margin-top: 1em">ignored_sub();</p>

<p style="margin-top: 1em">$wont_be_assigned = 37;</p>

<p style="margin-top: 1em">=cut</p>

<p style="margin-top: 1em">The quick-and-dirty method only
works well when you don&rsquo;t plan to leave the commented
code in the source. If a Pod parser comes along,
you&rsquo;re multiline comment is going to show <br>
up in the Pod translation. A better way hides it from Pod
parsers as well.</p>

<p style="margin-top: 1em">The &quot;=begin&quot; directive
can mark a section for a particular purpose. If the Pod
parser doesn&rsquo;t want to handle it, it just ignores it.
Label the comments with &quot;comment&quot;. End the <br>
comment using &quot;=end&quot; with the same label. You
still need the &quot;=cut&quot; to go back to Perl code from
the Pod comment:</p>

<p style="margin-top: 1em">=begin comment</p>

<p style="margin-top: 1em">my $object =
NotGonnaHappen-&gt;new();</p>

<p style="margin-top: 1em">ignored_sub();</p>

<p style="margin-top: 1em">$wont_be_assigned = 37;</p>

<p style="margin-top: 1em">=end comment</p>

<p style="margin-top: 1em">=cut</p>

<p style="margin-top: 1em">For more information on Pod,
check out perlpod and perlpodspec.</p>

<p style="margin-top: 1em">How do I clear a package? <br>
Use this code, provided by Mark-Jason Dominus:</p>

<p style="margin-top: 1em">sub scrub_package { <br>
no strict &rsquo;refs&rsquo;; <br>
my $pack = shift; <br>
die &quot;Shouldn&rsquo;t delete main package&quot; <br>
if $pack eq &quot;&quot; || $pack eq &quot;main&quot;; <br>
my $stash = *{$pack . &rsquo;::&rsquo;}{HASH}; <br>
my $name; <br>
foreach $name (keys %$stash) { <br>
my $fullname = $pack . &rsquo;::&rsquo; . $name; <br>
# Get rid of everything with that name. <br>
undef $$fullname; <br>
undef @$fullname; <br>
undef %$fullname; <br>
undef &amp;$fullname; <br>
undef *$fullname; <br>
} <br>
}</p>

<p style="margin-top: 1em">Or, if you&rsquo;re using a
recent release of Perl, you can just use the
Symbol::delete_package() function instead.</p>

<p style="margin-top: 1em">How can I use a variable as a
variable name? <br>
Beginners often think they want to have a variable contain
the name of a variable.</p>

<p style="margin-top: 1em">$fred = 23; <br>
$varname = &quot;fred&quot;; <br>
++$$varname; # $fred now 24</p>

<p style="margin-top: 1em">This works sometimes, but it is
a very bad idea for two reasons.</p>

<p style="margin-top: 1em">The first reason is that this
technique only works on global variables. That means that if
$fred is a lexical variable created with my() in the above
example, the code wouldn&rsquo;t <br>
work at all: you&rsquo;d accidentally access the global and
skip right over the private lexical altogether. Global
variables are bad because they can easily collide
accidentally and in <br>
general make for non-scalable and confusing code.</p>

<p style="margin-top: 1em">Symbolic references are
forbidden under the &quot;use strict&quot; pragma. They are
not true references and consequently are not
reference-counted or garbage-collected.</p>

<p style="margin-top: 1em">The other reason why using a
variable to hold the name of another variable is a bad idea
is that the question often stems from a lack of
understanding of Perl data structures, <br>
particularly hashes. By using symbolic references, you are
just using the package&rsquo;s symbol-table hash (like
%main::) instead of a user-defined hash. The solution is to
use your <br>
own hash or a real reference instead.</p>

<p style="margin-top: 1em">$USER_VARS{&quot;fred&quot;} =
23; <br>
my $varname = &quot;fred&quot;; <br>
$USER_VARS{$varname}++; # not $$varname++</p>

<p style="margin-top: 1em">There we&rsquo;re using the
%USER_VARS hash instead of symbolic references. Sometimes
this comes up in reading strings from the user with variable
references and wanting to expand <br>
them to the values of your perl program&rsquo;s variables.
This is also a bad idea because it conflates the
program-addressable namespace and the user-addressable one.
Instead of <br>
reading a string and expanding it to the actual contents of
your program&rsquo;s own variables:</p>

<p style="margin-top: 1em">$str = &rsquo;this has a $fred
and $barney in it&rsquo;; <br>
$str =~ s/(w+)/$1/eeg; # need double eval</p>

<p style="margin-top: 1em">it would be better to keep a
hash around like %USER_VARS and have variable references
actually refer to entries in that hash:</p>

<p style="margin-top: 1em">$str =~ s/+)/$USER_VARS{$1}/g; #
no /e here at all</p>

<p style="margin-top: 1em">That&rsquo;s faster, cleaner,
and safer than the previous approach. Of course, you
don&rsquo;t need to use a dollar sign. You could use your
own scheme to make it less confusing, like <br>
bracketed percent symbols, etc.</p>

<p style="margin-top: 1em">$str = &rsquo;this has a %fred%
and %barney% in it&rsquo;; <br>
$str =~ s/%(1008</p>

<p style="margin-top: 1em">Another reason that folks
sometimes think they want a variable to contain the name of
a variable is that they don&rsquo;t know how to build proper
data structures using hashes. For <br>
example, let&rsquo;s say they wanted two hashes in their
program: %fred and %barney, and that they wanted to use
another scalar variable to refer to those by name.</p>

<p style="margin-top: 1em">$name = &quot;fred&quot;; <br>
$$name{WIFE} = &quot;wilma&quot;; # set %fred</p>

<p style="margin-top: 1em">$name = &quot;barney&quot;; <br>
$$name{WIFE} = &quot;betty&quot;; # set %barney</p>

<p style="margin-top: 1em">This is still a symbolic
reference, and is still saddled with the problems enumerated
above. It would be far better to write:</p>

<p style="margin-top: 1em">$folks{&quot;fred&quot;}{WIFE} =
&quot;wilma&quot;; <br>
$folks{&quot;barney&quot;}{WIFE} = &quot;betty&quot;;</p>

<p style="margin-top: 1em">And just use a multilevel hash
to start with.</p>

<p style="margin-top: 1em">The only times that you
absolutely must use symbolic references are when you really
must refer to the symbol table. This may be because
it&rsquo;s something that one can&rsquo;t take a real <br>
reference to, such as a format name. Doing so may also be
important for method calls, since these always go through
the symbol table for resolution.</p>

<p style="margin-top: 1em">In those cases, you would turn
off &quot;strict &rsquo;refs&rsquo;&quot; temporarily so you
can play around with the symbol table. For example:</p>

<p style="margin-top: 1em">@colors = qw(red blue green
yellow orange purple violet); <br>
for my $name (@colors) { <br>
no strict &rsquo;refs&rsquo;; # renege for the block <br>
*$name = sub { &quot;&lt;FONT
COLOR=&rsquo;$name&rsquo;&gt;@_&lt;/FONT&gt;&quot; }; <br>
}</p>

<p style="margin-top: 1em">All those functions (red(),
blue(), green(), etc.) appear to be separate, but the real
code in the closure actually was compiled only once.</p>

<p style="margin-top: 1em">So, sometimes you might want to
use symbolic references to manipulate the symbol table
directly. This doesn&rsquo;t matter for formats, handles,
and subroutines, because they are <br>
always global--you can&rsquo;t use my() on them. For
scalars, arrays, and hashes, though--and usually for
subroutines-- you probably only want to use hard
references.</p>

<p style="margin-top: 1em">What does &quot;bad
interpreter&quot; mean? <br>
(contributed by brian d foy)</p>

<p style="margin-top: 1em">The &quot;bad interpreter&quot;
message comes from the shell, not perl. The actual message
may vary depending on your platform, shell, and locale
settings.</p>

<p style="margin-top: 1em">If you see &quot;bad interpreter
- no such file or directory&quot;, the first line in your
perl script (the &quot;shebang&quot; line) does not contain
the right path to perl (or any other program <br>
capable of running scripts). Sometimes this happens when you
move the script from one machine to another and each machine
has a different path to perl--/usr/bin/perl versus <br>
/usr/local/bin/perl for instance. It may also indicate that
the source machine has CRLF line terminators and the
destination machine has LF only: the shell tries to find
<br>
/usr/bin/perl&lt;CR&gt;, but can&rsquo;t.</p>

<p style="margin-top: 1em">If you see &quot;bad
interpreter: Permission denied&quot;, you need to make your
script executable.</p>

<p style="margin-top: 1em">In either case, you should still
be able to run the scripts with perl explicitly:</p>

<p style="margin-top: 1em">% perl script.pl</p>

<p style="margin-top: 1em">If you get a message like
&quot;perl: command not found&quot;, perl is not in your
PATH, which might also mean that the location of perl is not
where you expect it so you need to adjust <br>
your shebang line.</p>

<p style="margin-top: 1em">AUTHOR AND COPYRIGHT <br>
Copyright (c) 1997-2010 Tom Christiansen, Nathan Torkington,
and other authors as noted. All rights reserved.</p>

<p style="margin-top: 1em">This documentation is free; you
can redistribute it and/or modify it under the same terms as
Perl itself.</p>

<p style="margin-top: 1em">Irrespective of its
distribution, all code examples in this file are hereby
placed into the public domain. You are permitted and
encouraged to use this code in your own programs <br>
for fun or for profit as you see fit. A simple comment in
the code giving credit would be courteous but is not
required.</p>

<p style="margin-top: 1em">perl v5.16.3 2013-03-04
PERLFAQ7(1)</p>
<hr>
</body>
</html>
