<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:08:50 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fai-mirror(1) General Commands Manual fai-mirror(1)</p>

<p style="margin-top: 1em">NAME <br>
fai-mirror - create and manage a partial mirror for FAI</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fai-mirror [OPTION]... DIRECTORY</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This command creates a partial mirror of Debian packages. It
can be used to create the fai CD or as a local mirror when
you can&rsquo;t download the whole Debian mirror. By default
the <br>
mirror will contain all packages of all classes used in the
configuration space (/srv/fai/config/package_config).</p>

<p style="margin-top: 1em">OPTIONS <br>
-a ARCH <br>
Download packages from architecture ARCH. If not specified,
use native architecture of host.</p>

<p style="margin-top: 1em">-B Do not add packages included
in base.tar.xz and packages defined in /etc/fai/NFSROOT to
the mirror. By default all these packages are included in
the mirror. This will <br>
explicitly remove packages from the mirror that are already
in base.tar.xz.</p>

<p style="margin-top: 1em">-b Create the mirror only from
packages names in /srv/fai/config. Do not include packages
from /etc/fai/NFSROOT, but also do not remove packages that
are in base.tar.xz. This <br>
is useful if your partitial mirror does not match the Linux
distribution of the nfsroot, or if you do not have a nfsroot
yet.</p>

<p style="margin-top: 1em">-C CFDIR <br>
Use CFDIR as the configuration directory. Default is
/etc/fai. You can also set the environment variable
FAI_ETC_DIR.</p>

<p style="margin-top: 1em">-c CLASS[,CLASS] <br>
Use only this list of classes for building the mirror.
Can&rsquo;t be used in conjunction with -x.</p>

<p style="margin-top: 1em">-h Show simple help and
version.</p>

<p style="margin-top: 1em">-m MAX Set the number of
packages to NUM. This overwrites the variable
MAXPACKAGES.</p>

<p style="margin-top: 1em">-x CLASS[,CLASS] <br>
Exclude these classes. Do not add the packages of these
classes to the mirror.</p>

<p style="margin-top: 1em">-P FILE <br>
Copy an APT preferences file into the cache config before
creating the mirror. Using this you can set pin priority for
packages to a certain release.</p>

<p style="margin-top: 1em">-p Preserve existing
sources.list. NOT YET IMPLEMENTED.</p>

<p style="margin-top: 1em">-v Create verbose output.</p>

<p style="margin-top: 1em">EXAMPLES <br>
# fai-mirror -v /files/scratch/mirror</p>

<p style="margin-top: 1em">Creates a partial mirror in the
directory /files/scratch/mirror using all classes.</p>

<p style="margin-top: 1em"># fai-mirror -v -cDEFAULT,DEMO
/debmirror</p>

<p style="margin-top: 1em">Creates a partial mirror
containing all packages used in the classes DEFAULT and
DEMO.</p>

<p style="margin-top: 1em"># fai-mirror -v -cDEFAULT,AMD64
/srv/debmirror-amd64</p>

<p style="margin-top: 1em">Will create a mirror including
packages for amd64 architecture defined for classes DEFAULT
and AMD64. You can also run this on a non amd64 host.</p>

<p style="margin-top: 1em">NOTES <br>
You only need root permissions if you access the official
Debian mirror via NFS. By default, the variable MAXPACKAGES
is set to 1, so conflicting packages can also be added to
<br>
the mirror. Setting this to a higher number (e.g. 99999)
reduces the time for creating the mirror, but some packages
may be missing.</p>

<p style="margin-top: 1em">SEE ALSO <br>
This program is part of FAI (Fully Automatic Installation).
The FAI homepage is http://fai-project.org.</p>

<p style="margin-top: 1em">fai-make-nfsroot(8),
install_packages(8)</p>

<p style="margin-top: 1em">FILES <br>
/etc/fai/fai.conf <br>
The FAI configuration file.</p>

<p style="margin-top: 1em">/etc/fai/nfsroot.conf <br>
The FAI configuration file for the nfsroot.</p>

<p style="margin-top: 1em">/etc/fai/apt/sources.list <br>
Package resource definition for FAI.</p>

<p style="margin-top: 1em">/srv/fai/config/package_config/
<br>
The FAI package configuration directory. This directory is
defined by the variable FAI_CONFIGDIR.</p>

<p style="margin-top: 1em">$NFSROOT/var/tmp/base-pkgs.lis
<br>
The list of packages included in base.tar.xz inside the
nfsroot.</p>


<p style="margin-top: 1em">$NFSROOT/var/tmp/packages.nfsroot
<br>
Additional packages that were added to the nfsroot by the
configuration file /etc/fai/NFSROOT.</p>

<p style="margin-top: 1em">AUTHOR <br>
Thomas Lange &lt;lange@informatik.uni-koeln.de&gt;</p>

<p style="margin-top: 1em">FAI 5.0 November 2015
fai-mirror(1)</p>
<hr>
</body>
</html>
