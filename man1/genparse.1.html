<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GENPARSE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GENPARSE(1)</td>
    <td class="head-vol">Programmer's Manual</td>
    <td class="head-rtitle">GENPARSE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
genparse - command line parser generator
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>genparse</b> [<i>options</i>]<i> files</i>...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>genparse</b> is a generic command line parser generator. From simple and
  concise specification file, you can define the command line parameters and
  switches that you would like to be able to pass to your program. Genparse
  creates the C, C++ or Java code of the parser for you.
<div class="Pp"></div>
Genparse assumes that the GNU getopt_long(3) function is built into your C
  library. For Java you may have to specify an appropriate jar file to your Java
  compiler.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>genparse</b> accepts these options:
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>,<b> --cppext </b><i>extension</i></dt>
  <dd class="It-tag">C++ file extension. (default = cc)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Turn on logging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>,<b> --logfile </b><i>name</i></dt>
  <dd class="It-tag">Log file name. (default = genparse.log)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>,<b> --help</b></dt>
  <dd class="It-tag">Display help information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b>,<b> --gnulib</b></dt>
  <dd class="It-tag">Use GNU Compatibility Library (Gnulib, see
      <i>http://www.gnu.org/software/gnulib/</i>). Only available for C output.
      Allows some more types (unsigned long, intmax_t etc.) for which Gnulib
      provides conversion functions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>,<b> --internationalize</b></dt>
  <dd class="It-tag">Put internationalization macro _() around text output so
      that the generated program can be internationalized using the GNU gettext
      command. Presently only implemented for C output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>,<b> --language </b><i>lang</i></dt>
  <dd class="It-tag">Output language. Only C, C++ and Java are supported. Any of
      the following indicate C++: &quot;c++&quot;, &quot;cpp&quot;,
      &quot;cc&quot;, and &quot;cxx&quot;. For Java use: &quot;java&quot; or
      &quot;Java&quot;. (default = c)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>,<b> --outfile </b><i>name</i></dt>
  <dd class="It-tag">Output file name. (default = parse_cl)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b>,<b> --longmembers</b></dt>
  <dd class="It-tag">Use long options for the members of the parser class
      (struct). The default is to use the short representation except if there
      is only a long representation defined in the genparse file. If this option
      is set then the behavior is reverted. The long representation is used then
      except if there is only a short representation defined.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>,<b> --outfile </b><i>filename</i></dt>
  <dd class="It-tag">Root name of output file. The extension will be determined
      by the output language and possibly by other options. For example, when
      the output language is C, giving this option an argument of
      &quot;file&quot; will result in output file names of &quot;file.h&quot;,
      &quot;file.c&quot; and &quot;file_cb.c&quot; for the header, parser, and
      callback files, respectively. Default value is &quot;parse_cl&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>,<b> --parsefunc </b><i>func</i></dt>
  <dd class="It-tag">Name of parsing function / class. This option allows the
      user to specify the name of the function (for C) or class (for C++ and
      Java) that does the actual command line parsing (default =
      &quot;Cmdline&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>,<b> --manyprints</b></dt>
  <dd class="It-tag">Output help text for every command line parameter in a
      separate print command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>,<b> --quiet</b></dt>
  <dd class="It-tag">Quiet mode - no on screen output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>,<b> --static-headers</b></dt>
  <dd class="It-tag">Keep the descriptive header on top of the generated files
      static. Without this option genparse prints creation date and time, Linux
      kernel version, kernel build time, computer architecture name, host name
      and user name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>,<b> --version</b></dt>
  <dd class="It-tag">Output version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>,<b> --directory </b></dt>
  <dd class="It-tag">Directory for storing results.</dd>
</dl>
<h1 class="Sh" title="Sh" id="INPUT_FILE"><a class="selflink" href="#INPUT_FILE">INPUT
  FILE</a></h1>
A genparse specification file (usually just called a 'genparse file') consists
  of a number of entries, one per command line parameter, of the form:
<div style="height: 1.00em;">&#x00A0;</div>
<i>short_names</i>[*|!] [/ <i>long_name</i>[*|!][=<i>opt_name</i>]]<i> type
  </i>[<i> options </i>]
<div style="height: 1.00em;">&#x00A0;</div>
A <i>short_name</i> is a single character (small or capital) or a single digit.
  <i>long_name</i> is a longer (more descriptive) option name. On the command
  line a short name will be preceded by a single dash (e.g. '-a') and a long
  version will be preceded by two dashes (e.g. '--all'). If a long parameter
  name is not necessary, you may specify only the short one (and the slash need
  not appear). In order to specify a parameter that only has a long name set
  <i>short_names</i> to <b>NONE</b>. It is possible to have multiple short
  options, so for example setting <i>short_name</i> to 'aA' and <i>long_name</i>
  to 'all' would allow one to specify the command line switch as '-a' or '-A' or
  '--all', all of them doing the same thing.
<div style="height: 1.00em;">&#x00A0;</div>
A <b>*</b> after <i>short_name</i> or <i>long_name</i> makes the argument
  optional. This can be specified for short and long options separately.
<div style="height: 1.00em;">&#x00A0;</div>
A <b>!</b> after <i>short_name</i> or <i>long_name</i> makes the option boolean.
  This allows one to combine a boolean short option with a long option with an
  optional or mandatory argument or to combine a boolean long option with a
  short option with an optional or mandatory argument. A <b>!</b> doesn't make
  sense if the option's type is <b>flag</b>.
<div class="Pp"></div>
<i>type</i> must be one of <b>int float char string</b> or <b>flag</b>. The
  first four should be self-explanatory. The last is a &quot;switch&quot; option
  that takes no arguments. For C output and if --gnulib is set on the command
  line additionally the following types are allowed: <b>long</b> (for long int),
  <b>ulong</b> (for unsigned long int), <b>intmax</b> (for intmax_t, defined in
  Gnulib), <b>uintmax</b> (for uintmax_t), <b>double</b>.
<div class="Pp"></div>
The following <i>options</i> are supported. They may appear in any order and
  except for <b>descriptions</b> only one of each field may be defined per
  option.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">A <b>default value</b> for the parameter. For
  a string this is just the plain default value, whatever it is. For strings, a
  default must be specified within braces and quotes, and may include
  whitespace, e.g. {&quot;my default value&quot;}. For a char parameter it must
  be enclosed in single quotes, e.g. 'a' or '\n'.
<div class="Pp"></div>
A <b>range</b> of values within brackets. The low and high values are specified
  between a range specifier (either '...' or '..'). Either the high or the low
  value may be omitted for a range bounded on one side only. The parameter will
  be checked to make sure that it lies within this range.
<div class="Pp"></div>
A <b>callback function</b>. This function is called after any range checking is
  performed. The purpose of the callback to do validity checking that is more
  complicated than can be specified in the genparse file. For example, you might
  write a program that requires input to be prime numbers, strings of a certain
  length, etc.
<div class="Pp"></div>
A <b>description</b> in double quotes. It is printed by the <b>usage()</b>
  function. If one line is not enough then specify multiple descriptions, one
  per line and each of them in double quotes. If the description starts in the
  1st column in the Genparse file then it will also be printed in the 1st column
  in the <b>usage()</b> function.
<div class="Pp"></div>
A <b>#gp_include</b> directive will instruct genparse to include another
  genparse file, e.g <b>#gp_include another.gp</b>. Only parameter definitions
  are allowed in the included file, no global directives.
<div class="Pp"></div>
An <b>__ERR_MSG__(err_txt)</b> directive. Specifies the error message which is
  printed when the argument could not be converted. Example:
  <b>__ERR_MSG__(&quot;%s: invalid argument&quot;)</b>. This message will be
  printed when either the conversion function failed or when the argument was
  out of range. Assumes to contain one <b>%s</b> which will be replaced with the
  argument which could not be converted. Only available when Genparse is invoked
  with <b>--gnulib</b>, ignored otherwise.
<div class="Pp"></div>
Optionally a conversion function can be added as a second argument, e. g.
  <b>__ERR_MSG__(&quot;%s: invalid argument&quot;, quotearg)</b>. This would
  lead to an error message like <b>error (EXIT_FAILURE, 0, &quot;%s: invalid
  argument&quot;, quotearg (optind))</b>.
<div class="Pp"></div>
An <b>__ADD_FLAG__</b> directive. Makes sense only if the command line parameter
  is not already a flag, in this case an additional flag parameter is added
  which will be set if the command line parameter was specified on the command
  line. This option is automatically set if a parameter has an optional
  argument.
<div class="Pp"></div>
A <b>__CODE__(statements)</b> directive. The specified code statements are
  copied literally. Example: <b>__CODE__(printf (&quot;Parameter x was
  set&quot;);)</b>. The specified code can extend over more than one line. In
  order to give Genparse the chance to indent the code properly, do not mix
  space and tab indentations in one <b>__CODE__</b> statement.
<div class="Pp"></div>
A <b>__STORE_LONGINDEX__</b> directive. Instructs Genparse to add an interer
  type field to the result class which will be set to the longindex variable
  (last argument in the call to @code{getopt_long()}). This new field will get
  the same name as the result field it is related to but with an <b>_li</b>
  postfix.</div>
<div style="height: 1.00em;">&#x00A0;</div>
The following <i>global directives</i> are supported. They may appear in any
  order.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">An <b>#include</b> directive will instruct
  genparse to copy the said include statement into the C or C++ code generated
  by genparse, but not any header files or callback files.
<div class="Pp"></div>
A <b>#mandatory</b> directive can be used it make usage() function calls nicer.
  It allows you to specify mandatory command line parameters that might follow
  switches. Note that Genparse does not check for mandatory parameters, they are
  only printed in the <b>usage ()</b> function with the <b>__MANDATORIES__</b>
  directive. <b>Deprecated: add</b> <b>mandatory parameters in the #usage
  section instead.</b>
<div class="Pp"></div>
An <b>#exit_value</b> directive which specifies the exit value in case of an
  error. Default is EXIT_FAILURE.
<div class="Pp"></div>
A <b>#break_lines</b> directive which specifies the width to which lines shall
  be broken on the help screen. If no <b>#break_lines</b> directive is specified
  then lines will be printed exactly as given in the genparse file.
<div class="Pp"></div>
If <b>#no_struct</b> is specified then no struct will be defined which will be
  filled with the command line parameters in the generated parser. This may be
  useful if you want to add your own code with <b>__CODE__</b> statements
  instead. Only supported for C output.
<div class="Pp"></div>
A <b>#export_long_options</b> directive. If <b>#export_long_options</b> is
  defined then a function <b>#get_long_options()</b> is added which exports the
  longoptions array used by <b>#getopt_long()</b>. This directive is only
  available for C output, for other languages it is ignored.
<div class="Pp"></div>
A <b>global callback function</b>. This function is useful for checking
  interdependencies between parameters. Interdependencies cannot be checked
  within each individual callback function because the order in which these
  functions will be called varies, depending on the order of the parameters on
  the command line.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Genparse also generates a <b>usage()</b> function which prints a help text to
  stdout about the usage of the program for which Genparse is generating the
  parser. It can be customized by specifying a usage section at the bottom of
  the Genparse file. If no such section is specified it defaults to
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
#usage_begin
usage: __PROGRAM_NAME__ __OPTIONS_SHORT__ __MANDATORIES__
__GLOSSARY__
#usage_end
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
The usage section starts with <b>#usage_begin</b> and ends with
  <b>#usage_end</b>. Any text between is printed verbatim except for the
  following keywords, which will be replaced as listed below:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;"><b>__PROGRAM_NAME__</b>: The program name. In
  C and C++ the program name is given in argv[0].
<div class="Pp"></div>
<b>__OPTIONS_SHORT__</b>: A list of available short form options, e.g. [ -abc ].
<div class="Pp"></div>
<b>__MANDATORIES__</b>: A list of all mandatory parameters as defined with
  #mandatory commands. <b>Deprecated: List mandatory</b> <b>parameters here
  directly.</b>
<div class="Pp"></div>
<b>__GLOSSARY__</b>: A description of all command line options. This is the
  information given for the parameter definitons in human readable form. It
  includes the parameter type, default, range and any comments. A line which
  contains <b>__GLOSSARY__</b> is replaced by the glossary of the parameters,
  any other text in the same line is ignored.
<div class="Pp"></div>
<b>__GLOSSARY_GNU__</b>: Same as <b>__GLOSSARY__</b> but in GNU style.
  Optionally followed by an integer in brackets which specifies the indentation
  of the descriptive text (e.g. <b>__GLOSSARY__</b>(30)). Default indentation is
  24.
<div class="Pp"></div>
<b>__STRING__(s)</b>: A string constant, in C probably a string macro defined
  with the #define preprocessor command. This macro can be imported from another
  file using the include directive in the genparse file. Ignored when generating
  Java output.
<div class="Pp"></div>
<b>__INT__(x)</b>: An integer constant, in C probably an integer macro defined
  with the #define preprocessor command. This macro can be imported from another
  file using the include directive in the genparse file. Ignored when generating
  Java output.
<div class="Pp"></div>
<b>__CODE__(statements)</b>: Same as for the parameter options, see above.
<div class="Pp"></div>
<b>__DO_NOT_DOCUMENT__</b>: Any line which contains this macro will not be
  printed in the <i>usage()</i> function. Can be used for implementing command
  line parameters without listing them on the help screen.
<div class="Pp"></div>
<b>__NL__</b>: New line. Useful for breaking lines manually while automatic line
  breaking is on (see <b>#break_lines</b>). Ignored when generating Java output.
<div class="Pp"></div>
<b>__NEW_PRINT__</b>: Close the active print command and start a new one.
<div class="Pp"></div>
<b>__COMMENT__(text)</b>: Comment in the code for printing the usage text.</div>
<div class="Pp"></div>
long options can be followed by an = sign and an optional designation
  <i>opt_name</i> which can be referred to in the following description. It will
  be used in the <i>usage()</i> function only. For example the following
  genparse line
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
s / block-size=SIZE		int	&quot;use SIZE-byte blocks&quot;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
will lead to the following line in the help screen
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
   [ -s ] [ --block-size=SIZE ] (type=INTEGER)
          use SIZE-byte blocks
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
in genparse style ( <b>__GLOSSARY__</b>) or
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
   -s, --block-size=SIZE   use SIZE-byte blocks
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
in GNU style ( <b>__GLOSSARY_GNU__</b>).
<div style="height: 1.00em;">&#x00A0;</div>
It is also possible to put square braces around the optional name in order to
  indicate that the argument is optional. This has no meaning for the generated
  parser however. Use * postfixes in order to make an argument optional.
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
s* / block*[=SIZE]   int   &quot;use blocks.&quot;
                           &quot;If SIZE is not given then they will get a size of 1kB.&quot;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
will lead to the following line in the help screen
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
-s, --block[=SIZE]   use blocks.
                     If SIZE is not given then they will get a size of 1kB.
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Here is a sample genparse file:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
#include&lt;sys/types.h&gt;
<div class="Pp"></div>
/* comment */
my_callback()
<div class="Pp"></div>
i / iterations int 100 [10...1000] iter_callback()
        &quot;Number of iterations to run for.&quot;
<div class="Pp"></div>
/*
 * Comment
 */
<div class="Pp"></div>
n / name string {&quot;mike&quot;} name_cb() &quot;User's name&quot;
s / str  string                    &quot;test string&quot;
f        flag                      &quot;a stupid flag!&quot;
<div class="Pp"></div>
#usage_begin
usage: __PROGRAM_NAME__ __OPTIONS_SHORT__ filename
This is only a stupid test program.
__GLOSSARY__
#usage_end
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
For an example input file, see <i>/usr/share/doc/genparse/examples/test.gp</i>.
<div class="Pp"></div>
The full documentation for <b>genparse</b> is maintained as a Texinfo manual. If
  the <b>info</b> and <b>genparse</b> programs are properly installed at your
  site, the command
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 info genparse
<div style="height: 1.00em;">&#x00A0;</div>
should give you access to the complete manual.
<div style="height: 1.00em;">&#x00A0;</div>
The latest version of <b>genparse</b> can always be found at
  <i>http://genparse.sourceforge.net</i>.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manual page was written by James R. Van Zandt and Michael Geng.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2008-01-19</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
