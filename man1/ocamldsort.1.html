<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OCAMLDSORT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OCAMLDSORT(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">OCAMLDSORT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ocamldsort - Dependency sorter for OCaml source files
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>ocamldsort</b> [ <b>-pp</b> <i> pre-command</i> ] [ <b>-d</b>
  <i>dep-command</i> ]
<br/>
 [ <b>-mli</b> ] [ <b>-nox</b> ] [ <b>-obj</b> | <b>-byte</b> | <b>-opt</b> ] [
  <i>filename</i> ] <i>...</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>ocamldsort</b>(1) command scans a set of OCaml source files (.ml and .mli
  files), sorts them according to their dependencies and prints the sorted files
  in order to link their corresponding .cmo files.
<div style="height: 1.00em;">&#x00A0;</div>
For <b>ocamldsort</b>(1) to work it must get a list of dependencies generated by
  <b>ocamldep</b>(1), if the standard input to <b>ocamldsort</b>(1) has been
  redirected then ocamldsort assumes that this is a dependency file generated by
  <b>ocamldep</b>(1). Otherwise ocamldsort calls <b>ocamldep</b>(1) to generate
  the dependency list itself. In either case the source files to be sorted
  should be given as arguments to the <b>ocamldsort</b>(1) command.
<div style="height: 1.00em;">&#x00A0;</div>
<b>ocamldsort</b>(1) can be used to compile and link simple projects with one
  command, such as:
<div style="height: 1.00em;">&#x00A0;</div>
ocamlc $(ocamldsort *.ml)
<div style="height: 1.00em;">&#x00A0;</div>
if your project doesn't contain .mli files or:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
ocamlc -c $(ocamldsort -mli *.ml *.mli) &amp;&amp; ocamlc $(ocamldsort -byte *.ml)
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
if it contains .mli files.
<div style="height: 1.00em;">&#x00A0;</div>
However for larger projects where separate compilation is desirable,
  <b>ocamldsort</b>(1) can also be used from within a makefile. Here is a
  typical makefile example:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
TARGET=my_program
OCAMLC=ocamlc
OCAMLOPT=ocamlopt
OCAMLDEP=ocamldep
OCAMLDSORT=ocamldsort
<div class="Pp"></div>
PPFLAGS=-pp camlp4o
<div class="Pp"></div>
MLY=$(shell echo *.mly)
MLL=$(shell echo *.mll)
GENERATED_ML=$(MLY:.mly=.ml) $(MLL:.mll=.ml)
<div class="Pp"></div>
include .generated .depend .ocamldsort
<div class="Pp"></div>
$(TARGET): $(CMO_FILES)
	$(OCAMLC) $(COMPFLAGS) $(LIBS) $^ -o $@
<div class="Pp"></div>
$(TARGET).opt: $(CMX_FILES)
	$(OCAMLOPT) $(COMPFLAGS) $(LIBS_OPT) $^ -o $@
<div class="Pp"></div>
.generated: $(GENERATED_ML)
	@touch .generated
<div class="Pp"></div>
.depend: .generated
	$(OCAMLDEP) *.ml *.mli &gt; $@
<div class="Pp"></div>
.ocamldsort: .depend
	echo CMO_FILES=`&lt; .depend $(OCAMLDSORT) -byte *.ml` &gt; .ocamldsort
	echo CMX_FILES=`&lt; .depend $(OCAMLDSORT) -opt *.ml` &gt;&gt; .ocamldsort
<div class="Pp"></div>
distclean: clean
	rm -f .generated .depend .ocamldsort
	rm -f $(GENERATED_ML)
	rm -f *~
	rm -f $(TARGET) 
<div class="Pp"></div>
clean:
	rm -f *.cmo *.cmi *.cmx *.o 
<div class="Pp"></div>
.SUFFIXES: .mli .ml .cmi .cmo .cmx .mll .mly
<div class="Pp"></div>
%.cmi:%.mli
	$(OCAMLC) $(PPFLAGS) $(COMPFLAGS) -c $&lt;
<div class="Pp"></div>
%.cmo:%.ml
	$(OCAMLC) $(PPFLAGS) $(COMPFLAGS) -c $&lt;
<div class="Pp"></div>
%.cmi %.cmo:%.ml
	$(OCAMLC) $(PPFLAGS) $(COMPFLAGS) -c $&lt;
<div class="Pp"></div>
%.cmx %.o:%.ml
	$(OCAMLOPT) $(PPFLAGS) $(COMPFLAGS) -c $&lt;
<div class="Pp"></div>
%.ml:%.mll
	$(OCAMLLEX) $&lt;
<div class="Pp"></div>
%.mli %.ml:%.mly
	$(OCAMLYACC) -v $&lt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The following command-line options are recognized by <b>ocamlsort</b>(1):
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b><i>&#x00A0;directory</i></dt>
  <dd class="It-tag">Add the given directory to the list of directories searched
      for source files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pp</b><i>&#x00A0;pre-command</i></dt>
  <dd class="It-tag">Command to preprocess file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b><i>&#x00A0;dep-command</i></dt>
  <dd class="It-tag">Command to compute dependencies. <b>ocamldep</b>(1) by
      default.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mli</b></dt>
  <dd class="It-tag">Sort files using mli dependencies.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nox</b></dt>
  <dd class="It-tag">Ignore filenames containg `*' so that unexpanded wildcards
      are ignored.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-obj</b></dt>
  <dd class="It-tag">Print bytecode filenames (.cmo and .cmi) (deprecated: use
      -byte).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-byte</b></dt>
  <dd class="It-tag">Print bytecode filenames (.cmo and .cmi).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-opt</b></dt>
  <dd class="It-tag">Print opt filenames (.cmx and .cmi).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Output version information and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-help</b>, <b>--help</b></dt>
  <dd class="It-tag">Output help and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>ocamldep</b>(1).</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
