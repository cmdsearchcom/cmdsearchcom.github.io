<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SED(1POSIX)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SED(1POSIX)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">SED(1POSIX)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
sed &#x2014; stream editor
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
sed  <b>[</b>&#x2212;n<b>] </b><i>script </i><b>[</b><i>file</i>...<b>]</b>
</pre>
<div class="Pp"></div>
<pre>
sed  <b>[</b>&#x2212;n<b>] </b>&#x2212;e <i>script </i><b>[</b>&#x2212;e <i>script</i><b>]</b>... <b>[</b>&#x2212;f <i>script_file</i><b>]</b>... <b>[</b><i>file</i>...<b>]</b>
</pre>
<div class="Pp"></div>
<pre>
sed  <b>[</b>&#x2212;n<b>] [</b>&#x2212;e <i>script</i><b>]</b>... &#x2212;f <i>script_file</i> <b>[</b>&#x2212;f <i>script_file</i><b>]</b>... <b>[</b><i>file</i>...<b>]</b>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>sed</i> utility is a stream editor that shall read one or more text
  files, make editing changes according to a script of editing commands, and
  write the results to standard output. The script shall be obtained from either
  the <i>script</i> operand string or a combination of the option-arguments from
  the <b>&#x2212;e</b> <i>script</i> and <b>&#x2212;f</b> <i>script_file</i>
  options.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <i>sed</i> utility shall conform to the Base Definitions volume of
  POSIX.1&#x2010;2008, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>,
  except that the order of presentation of the <b>&#x2212;e</b> and
  <b>&#x2212;f</b> options is significant.
<div class="Pp"></div>
The following options shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;e&#x00A0;</b><i>script</i></dt>
  <dd class="It-tag">Add the editing commands specified by the <i>script</i>
      option-argument to the end of the script of editing commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;f&#x00A0;</b><i>script_file</i></dt>
  <dd class="It-tag">Add the editing commands in the file <i>script_file</i> to
      the end of the script of editing commands.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;n</b></dt>
  <dd class="It-tag">Suppress the default output (in which each line, after it
      is examined for editing, is written to standard output). Only lines
      explicitly selected for output are written.</dd>
</dl>
<div class="Pp"></div>
If any <b>&#x2212;e</b> or <b>&#x2212;f</b> options are specified, the script of
  editing commands shall initially be empty. The commands specified by each
  <b>&#x2212;e</b> or <b>&#x2212;f</b> option shall be added to the script in
  the order specified. When each addition is made, if the previous addition (if
  any) was from a <b>&#x2212;e</b> option, a &lt;newline&gt; shall be inserted
  before the new addition. The resulting script shall have the same properties
  as the <i>script</i> operand, described in the OPERANDS section.
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The following operands shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><i>file</i></dt>
  <dd class="It-tag">A pathname of a file whose contents are read and edited. If
      multiple <i>file</i> operands are specified, the named files shall be read
      in the order specified and the concatenation shall be edited. If no
      <i>file</i> operands are specified, the standard input shall be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>script</i></dt>
  <dd class="It-tag">A string to be used as the script of editing commands. The
      application shall not present a <i>script</i> that violates the
      restrictions of a text file except that the final character need not be a
      &lt;newline&gt;.</dd>
</dl>
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
The standard input shall be used if no <i>file</i> operands are specified, and
  shall be used if a <i>file</i> operand is <b>'&#x2212;'</b> and the
  implementation treats the <b>'&#x2212;'</b> as meaning standard input.
  Otherwise, the standard input shall not be used. See the INPUT FILES section.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
The input files shall be text files. The <i>script_file</i>s named by the
  <b>&#x2212;f</b> option shall consist of editing commands.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>sed</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      POSIX.1&#x2010;2008, <i>Section 8.2</i>, <i>Internationalization
      Variables</i> for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_COLLATE</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale for the behavior of ranges, equivalence classes, and
      multi-character collating elements within regular expressions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments and input files), and the behavior of
      character classes within regular expressions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
The input files shall be written to standard output, with the editing commands
  specified in the script applied. If the <b>&#x2212;n</b> option is specified,
  only those input lines selected by the script shall be written to standard
  output.
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
The standard error shall be used only for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
The output files shall be text files whose formats are dependent on the editing
  commands given.
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
The <i>script</i> shall consist of editing commands of the following form:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b></b><b>[</b><i>address</i><b>[</b>,<i>address</i><b>]]</b><i>function</i>
</pre>
</div>
<div class="Pp"></div>
where <i>function</i> represents a single-character command verb from the list
  in <i>Editing Commands in sed</i>, followed by any applicable arguments.
<div class="Pp"></div>
The command can be preceded by &lt;blank&gt; characters and/or &lt;semicolon&gt;
  characters. The function can be preceded by &lt;blank&gt; characters. These
  optional characters shall have no effect.
<div class="Pp"></div>
In default operation, <i>sed</i> cyclically shall append a line of input, less
  its terminating &lt;newline&gt; character, into the pattern space. Reading
  from input shall be skipped if a &lt;newline&gt; was in the pattern space
  prior to a <b>D</b> command ending the previous cycle. The <i>sed</i> utility
  shall then apply in sequence all commands whose addresses select that pattern
  space, until a command starts the next cycle or quits. If no commands
  explicitly started a new cycle, then at the end of the script the pattern
  space shall be copied to standard output (except when <b>&#x2212;n</b> is
  specified) and the pattern space shall be deleted. Whenever the pattern space
  is written to standard output or a named file, <i>sed</i> shall immediately
  follow it with a &lt;newline&gt;.
<div class="Pp"></div>
Some of the editing commands use a hold space to save all or part of the pattern
  space for subsequent retrieval. The pattern and hold spaces shall each be able
  to hold at least 8192 bytes.
<h2 class="Ss" title="Ss" id="Addresses_in_sed"><a class="selflink" href="#Addresses_in_sed">Addresses
  in sed</a></h2>
An address is either a decimal number that counts input lines cumulatively
  across files, a <b>'$'</b> character that addresses the last line of input, or
  a context address (which consists of a BRE, as described in <i>Regular
  Expressions in sed</i>, preceded and followed by a delimiter, usually a
  &lt;slash&gt;).
<div class="Pp"></div>
An editing command with no addresses shall select every pattern space.
<div class="Pp"></div>
An editing command with one address shall select each pattern space that matches
  the address.
<div class="Pp"></div>
An editing command with two addresses shall select the inclusive range from the
  first pattern space that matches the first address through the next pattern
  space that matches the second. (If the second address is a number less than or
  equal to the line number first selected, only one line shall be selected.)
  Starting at the first line following the selected range, <i>sed</i> shall look
  again for the first address. Thereafter, the process shall be repeated.
  Omitting either or both of the address components in the following form
  produces undefined results:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b></b><b>[</b><i>address</i><b>[</b>,<i>address</i><b>]]</b>
</pre>
</div>
<h2 class="Ss" title="Ss" id="Regular_Expressions_in_sed"><a class="selflink" href="#Regular_Expressions_in_sed">Regular
  Expressions in sed</a></h2>
The <i>sed</i> utility shall support the BREs described in the Base Definitions
  volume of POSIX.1&#x2010;2008, <i>Section 9.3</i>, <i>Basic Regular
  Expressions</i>, with the following additions:
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">In a context address, the construction
      <b>&quot;\cBREc&quot;</b>, where <i>c</i> is any character other than
      &lt;backslash&gt; or &lt;newline&gt;, shall be identical to
      <b>&quot;/BRE/&quot;</b>. If the character designated by <i>c</i> appears
      following a &lt;backslash&gt;, then it shall be considered to be that
      literal character, which shall not terminate the BRE. For example, in the
      context address <b>&quot;\xabc\xdefx&quot;</b>, the second <i>x</i> stands
      for itself, so that the BRE is <b>&quot;abcxdef&quot;</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">The escape sequence <b>'\n'</b> shall match a
      &lt;newline&gt; embedded in the pattern space. A literal &lt;newline&gt;
      shall not be used in the BRE of a context address or in the substitute
      function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">If an RE is empty (that is, no pattern is specified)
      <i>sed</i> shall behave as if the last RE used in the last command applied
      (either as an address or as part of a substitute command) was
    specified.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Editing_Commands_in_sed"><a class="selflink" href="#Editing_Commands_in_sed">Editing
  Commands in sed</a></h2>
In the following list of editing commands, the maximum number of permissible
  addresses for each function is indicated by [<i>0addr</i>], [<i>1addr</i>], or
  [<i>2addr</i>], representing zero, one, or two addresses.
<div class="Pp"></div>
The argument <i>text</i> shall consist of one or more lines. Each embedded
  &lt;newline&gt; in the text shall be preceded by a &lt;backslash&gt;. Other
  &lt;backslash&gt; characters in text shall be removed, and the following
  character shall be treated literally.
<div class="Pp"></div>
The <b>r</b> and <b>w</b> command verbs, and the <i>w</i> flag to the <b>s</b>
  command, take an <i>rfile</i> (or <i>wfile</i>) parameter, separated from the
  command verb letter or flag by one or more &lt;blank&gt; characters;
  implementations may allow zero separation as an extension.
<div class="Pp"></div>
The argument <i>rfile</i> or the argument <i>wfile</i> shall terminate the
  editing command. Each <i>wfile</i> shall be created before processing begins.
  Implementations shall support at least ten <i>wfile</i> arguments in the
  script; the actual number (greater than or equal to 10) that is supported by
  the implementation is unspecified. The use of the <i>wfile</i> parameter shall
  cause that file to be initially created, if it does not exist, or shall
  replace the contents of an existing file.
<div class="Pp"></div>
The <b>b</b>, <b>r</b>, <b>s</b>, <b>t</b>, <b>w</b>, <b>y</b>, and <b>:</b>
  command verbs shall accept additional arguments. The following synopses
  indicate which arguments shall be separated from the command verbs by a single
  &lt;space&gt;.
<div class="Pp"></div>
The <b>a</b> and <b>r</b> commands schedule text for later output. The text
  specified for the <b>a</b> command, and the contents of the file specified for
  the <b>r</b> command, shall be written to standard output just before the next
  attempt to fetch a line of input when executing the <b>N</b> or <b>n</b>
  commands, or when reaching the end of the script. If written when reaching the
  end of the script, and the <b>&#x2212;n</b> option was not specified, the text
  shall be written after copying the pattern space to standard output. The
  contents of the file specified for the <b>r</b> command shall be as of the
  time the output is written, not the time the <b>r</b> command is applied. The
  text shall be output in the order in which the <b>a</b> and <b>r</b> commands
  were applied to the input.
<div class="Pp"></div>
Command verbs other than <b>{</b>, <b>a</b>, <b>b</b>, <b>c</b>, <b>i</b>,
  <b>r</b>, <b>t</b>, <b>w</b>, <b>:</b>, and <b>#</b> can be followed by a
  &lt;semicolon&gt;, optional &lt;blank&gt; characters, and another command
  verb. However, when the <b>s</b> command verb is used with the <i>w</i> flag,
  following it with another command in this manner produces undefined results.
<div class="Pp"></div>
A function can be preceded by one or more <b>'!'</b> characters, in which case
  the function shall be applied if the addresses do not select the pattern
  space. Zero or more &lt;blank&gt; characters shall be accepted before the
  first <b>'!'</b> character. It is unspecified whether &lt;blank&gt; characters
  can follow a <b>'!'</b> character, and conforming applications shall not
  follow a <b>'!'</b> character with &lt;blank&gt; characters.
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]&#x00A0;{</b><i>editing
    command</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>editing command</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">...</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>}</b></dt>
  <dd class="It-tag">Execute a list of <i>sed</i> editing commands only when the
      pattern space is selected. The list of <i>sed</i> editing commands shall
      be surrounded by braces and separated by &lt;newline&gt; characters, and
      conform to the following rules. The braces can be preceded or followed by
      &lt;blank&gt; characters. The editing commands can be preceded by
      &lt;blank&gt; characters, but shall not be followed by &lt;blank&gt;
      characters. The &lt;right-brace&gt; shall be preceded by a &lt;newline&gt;
      and can be preceded or followed by &lt;blank&gt; characters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>1addr</i><b>]a\</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>text</i></dt>
  <dd class="It-tag">Write text to standard output as described previously.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]b&#x00A0;[</b><i>label</i><b>]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Branch to the <b>:</b> function bearing the <i>label</i>. If <i>label</i> is
      not specified, branch to the end of the script. The implementation shall
      support <i>label</i>s recognized as unique up to at least 8 characters;
      the actual length (greater than or equal to 8) that shall be supported by
      the implementation is unspecified. It is unspecified whether exceeding a
      label length causes an error or a silent truncation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]c\</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>text</i></dt>
  <dd class="It-tag">Delete the pattern space. With a 0 or 1 address or at the
      end of a 2-address range, place <i>text</i> on the output and start the
      next cycle.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]d</b></dt>
  <dd class="It-tag">Delete the pattern space and start the next cycle.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]D</b></dt>
  <dd class="It-tag">If the pattern space contains no &lt;newline&gt;, delete
      the pattern space and start a normal new cycle as if the <b>d</b> command
      was issued. Otherwise, delete the initial segment of the pattern space
      through the first &lt;newline&gt;, and start the next cycle with the
      resultant pattern space and without reading any new input.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]g</b></dt>
  <dd class="It-tag">Replace the contents of the pattern space by the contents
      of the hold space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]G</b></dt>
  <dd class="It-tag">Append to the pattern space a &lt;newline&gt; followed by
      the contents of the hold space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]h</b></dt>
  <dd class="It-tag">Replace the contents of the hold space with the contents of
      the pattern space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]H</b></dt>
  <dd class="It-tag">Append to the hold space a &lt;newline&gt; followed by the
      contents of the pattern space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>1addr</i><b>]i\</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>text</i></dt>
  <dd class="It-tag">Write <i>text</i> to standard output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]l</b></dt>
  <dd class="It-tag">(The letter ell.) Write the pattern space to standard
      output in a visually unambiguous form. The characters listed in the Base
      Definitions volume of POSIX.1&#x2010;2008, <i>Table 5-1</i>, <i>Escape
      Sequences and Associated Actions</i> (<b>'\\'</b>, <b>'\a'</b>,
      <b>'\b'</b>, <b>'\f'</b>, <b>'\r'</b>, <b>'\t'</b>, <b>'\v'</b>) shall be
      written as the corresponding escape sequence; the <b>'\n'</b> in that
      table is not applicable. Non-printable characters not in that table shall
      be written as one three-digit octal number (with a preceding
      &lt;backslash&gt;) for each byte in the character (most significant byte
      first).</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
Long lines shall be folded, with the point of folding indicated by writing a
  &lt;backslash&gt; followed by a &lt;newline&gt;; the length at which folding
  occurs is unspecified, but should be appropriate for the output device. The
  end of each line shall be marked with a <b>'$'</b>.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]n</b></dt>
  <dd class="It-tag">Write the pattern space to standard output if the default
      output has not been suppressed, and replace the pattern space with the
      next line of input, less its terminating &lt;newline&gt;.</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
If no next line of input is available, the <b>n</b> command verb shall branch to
  the end of the script and quit without starting a new cycle.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]N</b></dt>
  <dd class="It-tag">Append the next line of input, less its terminating
      &lt;newline&gt;, to the pattern space, using an embedded &lt;newline&gt;
      to separate the appended material from the original material. Note that
      the current line number changes.</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
If no next line of input is available, the <b>N</b> command verb shall branch to
  the end of the script and quit without starting a new cycle or copying the
  pattern space to standard output.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]p</b></dt>
  <dd class="It-tag">Write the pattern space to standard output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]P</b></dt>
  <dd class="It-tag">Write the pattern space, up to the first &lt;newline&gt;,
      to standard output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>1addr</i><b>]q</b></dt>
  <dd class="It-tag">Branch to the end of the script and quit without starting a
      new cycle.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>1addr</i><b>]r&#x00A0;</b><i>rfile</i></dt>
  <dd class="It-tag">Copy the contents of <i>rfile</i> to standard output as
      described previously. If <i>rfile</i> does not exist or cannot be read, it
      shall be treated as if it were an empty file, causing no error
    condition.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]s/</b><i>BRE</i><b>/</b><i>replacement</i><b>/</b><i>flags</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Substitute the replacement string for instances of the BRE in the pattern
      space. Any character other than &lt;backslash&gt; or &lt;newline&gt; can
      be used instead of a &lt;slash&gt; to delimit the BRE and the replacement.
      Within the BRE and the replacement, the BRE delimiter itself can be used
      as a literal character if it is preceded by a &lt;backslash&gt;.</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
The replacement string shall be scanned from beginning to end. An
  &lt;ampersand&gt; (<b>'&amp;'</b>) appearing in the replacement shall be
  replaced by the string matching the BRE. The special meaning of <b>'&amp;'</b>
  in this context can be suppressed by preceding it by a &lt;backslash&gt;. The
  characters &quot;\ <i>n&quot;</i>, where <i>n</i> is a digit, shall be
  replaced by the text matched by the corresponding back-reference expression.
  If the corresponding back-reference expression does not match, then the
  characters &quot;\ <i>n&quot;</i> shall be replaced by the empty string. The
  special meaning of &quot;\ <i>n&quot;</i> where <i>n</i> is a digit in this
  context, can be suppressed by preceding it by a &lt;backslash&gt;. For each
  other &lt;backslash&gt; encountered, the following character shall lose its
  special meaning (if any). The meaning of a &lt;backslash&gt; immediately
  followed by any character other than <b>'&amp;'</b>, &lt;backslash&gt;, a
  digit, or the delimiter character used for this command, is unspecified.
<div class="Pp"></div>
A line can be split by substituting a &lt;newline&gt; into it. The application
  shall escape the &lt;newline&gt; in the replacement by preceding it by a
  &lt;backslash&gt;. A substitution shall be considered to have been performed
  even if the replacement string is identical to the string that it replaces.
  Any &lt;backslash&gt; used to alter the default meaning of a subsequent
  character shall be discarded from the BRE or the replacement before evaluating
  the BRE or using the replacement.
<div class="Pp"></div>
The value of <i>flags</i> shall be zero or more of:
<dl class="Bl-tag">
  <dt class="It-tag"><i>n</i></dt>
  <dd class="It-tag">Substitute for the <i>n</i>th occurrence only of the BRE
      found within the pattern space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>g</b></dt>
  <dd class="It-tag">Globally substitute for all non-overlapping instances of
      the BRE rather than just the first one. If both <b>g</b> and <i>n</i> are
      specified, the results are unspecified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>p</b></dt>
  <dd class="It-tag">Write the pattern space to standard output if a replacement
      was made.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>w&#x00A0;</b><i>wfile</i></dt>
  <dd class="It-tag">Write. Append the pattern space to <i>wfile</i> if a
      replacement was made. A conforming application shall precede the
      <i>wfile</i> argument with one or more &lt;blank&gt; characters. If the
      <b>w</b> flag is not the last flag value given in a concatenation of
      multiple flag values, the results are undefined.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]t&#x00A0;[</b><i>label</i><b>]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Test. Branch to the <b>:</b> command verb bearing the <i>label</i> if any
      substitutions have been made since the most recent reading of an input
      line or execution of a <b>t</b>. If <i>label</i> is not specified, branch
      to the end of the script.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]w&#x00A0;</b><i>wfile</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Append (write) the pattern space to <i>wfile</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]x</b></dt>
  <dd class="It-tag">Exchange the contents of the pattern and hold spaces.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>2addr</i><b>]y/</b><i>string1</i><b>/</b><i>string2</i><b>/</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Replace all occurrences of characters in <i>string1</i> with the
      corresponding characters in <i>string2</i>. If a &lt;backslash&gt;
      followed by an <b>'n'</b> appear in <i>string1</i> or <i>string2</i>, the
      two characters shall be handled as a single &lt;newline&gt;. If the number
      of characters in <i>string1</i> and <i>string2</i> are not equal, or if
      any of the characters in <i>string1</i> appear more than once, the results
      are undefined. Any character other than &lt;backslash&gt; or
      &lt;newline&gt; can be used instead of &lt;slash&gt; to delimit the
      strings. If the delimiter is not <b>'n'</b>, within <i>string1</i> and
      <i>string2</i>, the delimiter itself can be used as a literal character if
      it is preceded by a &lt;backslash&gt;. If a &lt;backslash&gt; character is
      immediately followed by a &lt;backslash&gt; character in <i>string1</i> or
      <i>string2</i>, the two &lt;backslash&gt; characters shall be counted as a
      single literal &lt;backslash&gt; character. The meaning of a
      &lt;backslash&gt; followed by any character that is not <b>'n'</b>, a
      &lt;backslash&gt;, or the delimiter character is undefined.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>0addr</i><b>]:</b><i>label</i></dt>
  <dd class="It-tag">Do nothing. This command bears a <i>label</i> to which the
      <b>b</b> and <b>t</b> commands branch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>1addr</i><b>]=</b></dt>
  <dd class="It-tag">Write the following to standard output:</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%d\n&quot;, &lt;</b><i>current line number</i>&gt;
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>0addr</i><b>]</b></dt>
  <dd class="It-tag">Ignore this empty command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>[</b><i>0addr</i><b>]#</b></dt>
  <dd class="It-tag">Ignore the <b>'#'</b> and the remainder of the line (treat
      them as a comment), with the single exception that if the first two
      characters in the script are <b>&quot;#n&quot;</b>, the default output
      shall be suppressed; this shall be the equivalent of specifying
      <b>&#x2212;n</b> on the command line.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2002;0</dt>
  <dd class="It-tag">Successful completion.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;0</dt>
  <dd class="It-tag">An error occurred.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
Default.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
Regular expressions match entire strings, not just individual lines, but a
  &lt;newline&gt; is matched by <b>'\n'</b> in a <i>sed</i> RE; a
  &lt;newline&gt; is not allowed by the general definition of regular expression
  in POSIX.1&#x2010;2008. Also note that <b>'\n'</b> cannot be used to match a
  &lt;newline&gt; at the end of an arbitrary input line; &lt;newline&gt;
  characters appear in the pattern space as a result of the <b>N</b> editing
  command.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
This <i>sed</i> script simulates the BSD <i>cat</i> <b>&#x2212;s</b> command,
  squeezing excess empty lines from standard input.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>sed &#x2212;n '</b>
<b># Write non-empty lines.</b>
<b>/./ {</b>
<b>    p</b>
<b>    d</b>
<b>    }</b>
<b># Write a single empty line, then look for more empty lines.</b>
<b>/^$/    p</b>
<b># Get next line, discard the held &lt;newline&gt; (empty line),</b>
<b># and look for more empty lines.</b>
<b>:Empty</b>
<b>/^$/    {</b>
<b>    N</b>
<b>    s/.//</b>
<b>    b Empty</b>
<b>    }</b>
<b># Write the non-empty line before going back to search</b>
<b># for the first in a set of empty lines.</b>
<b>    p</b>
<b>'</b>
</pre>
</div>
<div class="Pp"></div>
The following <i>sed</i> command is a much simpler method of squeezing empty
  lines, although it is not quite the same as <i>cat</i> <b>&#x2212;s</b> since
  it removes any initial empty lines:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>sed &#x2212;n '/./,/^$/p'</b>
</pre>
</div>
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
This volume of POSIX.1&#x2010;2008 requires implementations to support at least
  ten distinct <i>wfile</i>s, matching historical practice on many
  implementations. Implementations are encouraged to support more, but
  conforming applications should not exceed this limit.
<div class="Pp"></div>
The exit status codes specified here are different from those in System V.
  System V returns 2 for garbled <i>sed</i> commands, but returns zero with its
  usage message or if the input file could not be opened. The standard
  developers considered this to be a bug.
<div class="Pp"></div>
The manner in which the <b>l</b> command writes non-printable characters was
  changed to avoid the historical backspace-overstrike method, and other
  requirements to achieve unambiguous output were added. See the RATIONALE for
  <i><i>ed</i></i> for details of the format chosen, which is the same as that
  chosen for <i>sed</i>.
<div class="Pp"></div>
This volume of POSIX.1&#x2010;2008 requires implementations to provide pattern
  and hold spaces of at least 8192 bytes, larger than the 4000 bytes spaces used
  by some historical implementations, but less than the 20480 bytes limit used
  in an early proposal. Implementations are encouraged to allocate dynamically
  larger pattern and hold spaces as needed.
<div class="Pp"></div>
The requirements for acceptance of &lt;blank&gt; and &lt;space&gt; characters in
  command lines has been made more explicit than in early proposals to describe
  clearly the historical practice and to remove confusion about the phrase
  ``protect initial blanks [ <i>sic</i>] and tabs from the stripping that is
  done on every script line'' that appears in much of the historical
  documentation of the <i>sed</i> utility description of text. (Not all
  implementations are known to have stripped &lt;blank&gt; characters from text
  lines, although they all have allowed leading &lt;blank&gt; characters
  preceding the address on a command line.)
<div class="Pp"></div>
The treatment of <b>'#'</b> comments differs from the SVID which only allows a
  comment as the first line of the script, but matches BSD-derived
  implementations. The comment character is treated as a command, and it has the
  same properties in terms of being accepted with leading &lt;blank&gt;
  characters; the BSD implementation has historically supported this.
<div class="Pp"></div>
Early proposals required that a <i>script_file</i> have at least one non-comment
  line. Some historical implementations have behaved in unexpected ways if this
  were not the case. The standard developers considered that this was incorrect
  behavior and that application developers should not have to avoid this
  feature. A correct implementation of this volume of POSIX.1&#x2010;2008 shall
  permit <i>script_file</i>s that consist only of comment lines.
<div class="Pp"></div>
Early proposals indicated that if <b>&#x2212;e</b> and <b>&#x2212;f</b> options
  were intermixed, all <b>&#x2212;e</b> options were processed before any
  <b>&#x2212;f</b> options. This has been changed to process them in the order
  presented because it matches historical practice and is more intuitive.
<div class="Pp"></div>
The treatment of the <b>p</b> flag to the <b>s</b> command differs between
  System V and BSD-based systems when the default output is suppressed. In the
  two examples:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>echo a | sed    's/a/A/p'</b>
<b>echo a | sed &#x2212;n 's/a/A/p'</b>
</pre>
</div>
<div class="Pp"></div>
this volume of POSIX.1&#x2010;2008, BSD, System V documentation, and the SVID
  indicate that the first example should write two lines with <b>A</b>, whereas
  the second should write one. Some System V systems write the <b>A</b> only
  once in both examples because the <b>p</b> flag is ignored if the
  <b>&#x2212;n</b> option is not specified.
<div class="Pp"></div>
This is a case of a diametrical difference between systems that could not be
  reconciled through the compromise of declaring the behavior to be unspecified.
  The SVID/BSD/System V documentation behavior was adopted for this volume of
  POSIX.1&#x2010;2008 because:
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">No known documentation for any historic system describes
      the interaction between the <b>p</b> flag and the <b>&#x2212;n</b>
    option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">The selected behavior is more correct as there is no
      technical justification for any interaction between the <b>p</b> flag and
      the <b>&#x2212;n</b> option. A relationship between <b>&#x2212;n</b> and
      the <b>p</b> flag might imply that they are only used together, but this
      ignores valid scripts that interrupt the cyclical nature of the processing
      through the use of the <b>D</b>, <b>d</b>, <b>q</b>, or branching
      commands. Such scripts rely on the <b>p</b> suffix to write the pattern
      space because they do not make use of the default output at the ``bottom''
      of the script.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">Because the <b>&#x2212;n</b> option makes the <b>p</b> flag
      unnecessary, any interaction would only be useful if <i>sed</i> scripts
      were written to run both with and without the <b>&#x2212;n</b> option.
      This is believed to be unlikely. It is even more unlikely that programmers
      have coded the <b>p</b> flag expecting it to be unnecessary. Because the
      interaction was not documented, the likelihood of a programmer discovering
      the interaction and depending on it is further decreased.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> *</dt>
  <dd class="It-tag">Finally, scripts that break under the specified behavior
      produce too much output instead of too little, which is easier to diagnose
      and correct.</dd>
</dl>
<div class="Pp"></div>
The form of the substitute command that uses the <b>n</b> suffix was limited to
  the first 512 matches in an early proposal. This limit has been removed
  because there is no reason an editor processing lines of {LINE_MAX} length
  should have this restriction. The command <b>s/a/A/2047</b> should be able to
  substitute the 2047th occurrence of <b>a</b> on a line.
<div class="Pp"></div>
The <b>b</b>, <b>t</b>, and <b>:</b> commands are documented to ignore leading
  white space, but no mention is made of trailing white space. Historical
  implementations of <i>sed</i> assigned different locations to the labels
  <b>'x'</b> and <b>&quot;x&#x00A0;&quot;</b>. This is not useful, and leads to
  subtle programming errors, but it is historical practice, and changing it
  could theoretically break working scripts. Implementors are encouraged to
  provide warning messages about labels that are never used or jumps to labels
  that do not exist.
<div class="Pp"></div>
Historically, the <i>sed</i> <b>!</b> and <b>}</b> editing commands did not
  permit multiple commands on a single line using a &lt;semicolon&gt; as a
  command delimiter. Implementations are permitted, but not required, to support
  this extension.
<div class="Pp"></div>
Earlier versions of this standard allowed for implementations with bytes other
  than eight bits, but this has been modified in this version.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i><i>awk</i></i>, <i><i>ed</i></i>, <i><i>grep</i></i>
<div class="Pp"></div>
The Base Definitions volume of POSIX.1&#x2010;2008, <i>Table 5-1</i>, <i>Escape
  Sequences and Associated Actions</i>, <i>Chapter 8</i>, <i>Environment
  Variables</i>, <i>Section 9.3</i>, <i>Basic Regular Expressions</i>,
  <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2013 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  7, Copyright (C) 2013 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. (This is POSIX.1-2008 with the 2013
  Technical Corrigendum 1 applied.) In the event of any discrepancy between this
  version and the original IEEE and The Open Group Standard, the original IEEE
  and The Open Group Standard is the referee document. The original Standard can
  be obtained online at http://www.unix.org/online.html .
<div style="height: 1.00em;">&#x00A0;</div>
Any typographical or formatting errors that appear in this page are most likely
  to have been introduced during the conversion of the source files to man page
  format. To report such errors, see
  https://www.kernel.org/doc/man-pages/reporting_bugs.html .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
