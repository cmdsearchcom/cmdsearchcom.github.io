<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:37:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SED(1POSIX) POSIX Programmer&rsquo;s Manual
SED(1POSIX)</p>

<p style="margin-top: 1em">PROLOG <br>
This manual page is part of the POSIX Programmer&rsquo;s
Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of <br>
Linux behavior), or the interface may not be implemented on
Linux.</p>

<p style="margin-top: 1em">NAME <br>
sed &acirc; stream editor</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sed [&acirc;n] script [file...]</p>

<p style="margin-top: 1em">sed [&acirc;n] &acirc;e script
[&acirc;e script]... [&acirc;f script_file]... [file...]</p>

<p style="margin-top: 1em">sed [&acirc;n] [&acirc;e
script]... &acirc;f script_file [&acirc;f script_file]...
[file...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The sed utility is a stream editor that shall read one or
more text files, make editing changes according to a script
of editing commands, and write the results to standard
out&acirc; <br>
put. The script shall be obtained from either the script
operand string or a combination of the option-arguments from
the &acirc;e script and &acirc;f script_file options.</p>

<p style="margin-top: 1em">OPTIONS <br>
The sed utility shall conform to the Base Definitions volume
of POSIX.1&acirc;2008, Section 12.2, Utility Syntax
Guidelines, except that the order of presentation of the
&acirc;e and &acirc;f <br>
options is significant.</p>

<p style="margin-top: 1em">The following options shall be
supported:</p>

<p style="margin-top: 1em">&acirc;e script Add the editing
commands specified by the script option-argument to the end
of the script of editing commands.</p>

<p style="margin-top: 1em">&acirc;f script_file <br>
Add the editing commands in the file script_file to the end
of the script of editing commands.</p>

<p style="margin-top: 1em">&acirc;n Suppress the default
output (in which each line, after it is examined for
editing, is written to standard output). Only lines
explicitly selected for output are writ&acirc; <br>
ten.</p>

<p style="margin-top: 1em">If any &acirc;e or &acirc;f
options are specified, the script of editing commands shall
initially be empty. The commands specified by each &acirc;e
or &acirc;f option shall be added to the script in the <br>
order specified. When each addition is made, if the previous
addition (if any) was from a &acirc;e option, a
&lt;newline&gt; shall be inserted before the new addition.
The resulting script <br>
shall have the same properties as the script operand,
described in the OPERANDS section.</p>

<p style="margin-top: 1em">OPERANDS <br>
The following operands shall be supported:</p>

<p style="margin-top: 1em">file A pathname of a file whose
contents are read and edited. If multiple file operands are
specified, the named files shall be read in the order
specified and the concate&acirc; <br>
nation shall be edited. If no file operands are specified,
the standard input shall be used.</p>

<p style="margin-top: 1em">script A string to be used as
the script of editing commands. The application shall not
present a script that violates the restrictions of a text
file except that the final <br>
character need not be a &lt;newline&gt;.</p>

<p style="margin-top: 1em">STDIN <br>
The standard input shall be used if no file operands are
specified, and shall be used if a file operand is
&rsquo;&acirc;&rsquo; and the implementation treats the
&rsquo;&acirc;&rsquo; as meaning standard input. <br>
Otherwise, the standard input shall not be used. See the
INPUT FILES section.</p>

<p style="margin-top: 1em">INPUT FILES <br>
The input files shall be text files. The script_files named
by the &acirc;f option shall consist of editing
commands.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
The following environment variables shall affect the
execution of sed:</p>

<p style="margin-top: 1em">LANG Provide a default value for
the internationalization variables that are unset or null.
(See the Base Definitions volume of POSIX.1&acirc;2008,
Section 8.2, Internationaliza&acirc; <br>
tion Variables for the precedence of internationalization
variables used to determine the values of locale
categories.)</p>

<p style="margin-top: 1em">LC_ALL If set to a non-empty
string value, override the values of all the other
internationalization variables.</p>

<p style="margin-top: 1em">LC_COLLATE <br>
Determine the locale for the behavior of ranges, equivalence
classes, and multi-character collating elements within
regular expressions.</p>

<p style="margin-top: 1em">LC_CTYPE Determine the locale
for the interpretation of sequences of bytes of text data as
characters (for example, single-byte as opposed to
multi-byte characters in arguments <br>
and input files), and the behavior of character classes
within regular expressions.</p>

<p style="margin-top: 1em">LC_MESSAGES <br>
Determine the locale that should be used to affect the
format and contents of diagnostic messages written to
standard error.</p>

<p style="margin-top: 1em">NLSPATH Determine the location
of message catalogs for the processing of LC_MESSAGES.</p>

<p style="margin-top: 1em">ASYNCHRONOUS EVENTS <br>
Default.</p>

<p style="margin-top: 1em">STDOUT <br>
The input files shall be written to standard output, with
the editing commands specified in the script applied. If the
&acirc;n option is specified, only those input lines
selected by <br>
the script shall be written to standard output.</p>

<p style="margin-top: 1em">STDERR <br>
The standard error shall be used only for diagnostic
messages.</p>

<p style="margin-top: 1em">OUTPUT FILES <br>
The output files shall be text files whose formats are
dependent on the editing commands given.</p>

<p style="margin-top: 1em">EXTENDED DESCRIPTION <br>
The script shall consist of editing commands of the
following form:</p>

<p style="margin-top: 1em">[address[,address]]function</p>

<p style="margin-top: 1em">where function represents a
single-character command verb from the list in Editing
Commands in sed, followed by any applicable arguments.</p>

<p style="margin-top: 1em">The command can be preceded by
&lt;blank&gt; characters and/or &lt;semicolon&gt;
characters. The function can be preceded by &lt;blank&gt;
characters. These optional characters shall have no <br>
effect.</p>

<p style="margin-top: 1em">In default operation, sed
cyclically shall append a line of input, less its
terminating &lt;newline&gt; character, into the pattern
space. Reading from input shall be skipped if a <br>
&lt;newline&gt; was in the pattern space prior to a D
command ending the previous cycle. The sed utility shall
then apply in sequence all commands whose addresses select
that pattern <br>
space, until a command starts the next cycle or quits. If no
commands explicitly started a new cycle, then at the end of
the script the pattern space shall be copied to standard
<br>
output (except when &acirc;n is specified) and the pattern
space shall be deleted. Whenever the pattern space is
written to standard output or a named file, sed shall
immediately fol&acirc; <br>
low it with a &lt;newline&gt;.</p>

<p style="margin-top: 1em">Some of the editing commands use
a hold space to save all or part of the pattern space for
subsequent retrieval. The pattern and hold spaces shall each
be able to hold at least <br>
8192 bytes.</p>

<p style="margin-top: 1em">Addresses in sed <br>
An address is either a decimal number that counts input
lines cumulatively across files, a &rsquo;$&rsquo; character
that addresses the last line of input, or a context address
(which con&acirc; <br>
sists of a BRE, as described in Regular Expressions in sed,
preceded and followed by a delimiter, usually a
&lt;slash&gt;).</p>

<p style="margin-top: 1em">An editing command with no
addresses shall select every pattern space.</p>

<p style="margin-top: 1em">An editing command with one
address shall select each pattern space that matches the
address.</p>

<p style="margin-top: 1em">An editing command with two
addresses shall select the inclusive range from the first
pattern space that matches the first address through the
next pattern space that matches the <br>
second. (If the second address is a number less than or
equal to the line number first selected, only one line shall
be selected.) Starting at the first line following the <br>
selected range, sed shall look again for the first address.
Thereafter, the process shall be repeated. Omitting either
or both of the address components in the following form <br>
produces undefined results:</p>

<p style="margin-top: 1em">[address[,address]]</p>

<p style="margin-top: 1em">Regular Expressions in sed <br>
The sed utility shall support the BREs described in the Base
Definitions volume of POSIX.1&acirc;2008, Section 9.3, Basic
Regular Expressions, with the following additions:</p>

<p style="margin-top: 1em">* In a context address, the
construction &quot; c appears following a &lt;backslash&gt;,
then it shall be considered to be that literal character,
which shall not terminate the BRE. For example, in the
context address <br>
&quot;cfx&quot;, the second x stands for itself, so that the
BRE is &quot;abcxdef&quot;.</p>

<p style="margin-top: 1em">* The escape sequence &rsquo;0
shall match a &lt;newline&gt; embedded in the pattern space.
A literal &lt;newline&gt; shall not be used in the BRE of a
context address or in the substitute <br>
function.</p>

<p style="margin-top: 1em">* If an RE is empty (that is, no
pattern is specified) sed shall behave as if the last RE
used in the last command applied (either as an address or as
part of a substitute com&acirc; <br>
mand) was specified.</p>

<p style="margin-top: 1em">Editing Commands in sed <br>
In the following list of editing commands, the maximum
number of permissible addresses for each function is
indicated by [0addr], [1addr], or [2addr], representing
zero, one, or <br>
two addresses.</p>

<p style="margin-top: 1em">The argument text shall consist
of one or more lines. Each embedded &lt;newline&gt; in the
text shall be preceded by a &lt;backslash&gt;. Other
&lt;backslash&gt; characters in text shall be <br>
removed, and the following character shall be treated
literally.</p>

<p style="margin-top: 1em">The r and w command verbs, and
the w flag to the s command, take an rfile (or wfile)
parameter, separated from the command verb letter or flag by
one or more &lt;blank&gt; characters; <br>
implementations may allow zero separation as an
extension.</p>

<p style="margin-top: 1em">The argument rfile or the
argument wfile shall terminate the editing command. Each
wfile shall be created before processing begins.
Implementations shall support at least ten <br>
wfile arguments in the script; the actual number (greater
than or equal to 10) that is supported by the implementation
is unspecified. The use of the wfile parameter shall cause
<br>
that file to be initially created, if it does not exist, or
shall replace the contents of an existing file.</p>

<p style="margin-top: 1em">The b, r, s, t, w, y, and :
command verbs shall accept additional arguments. The
following synopses indicate which arguments shall be
separated from the command verbs by a single <br>
&lt;space&gt;.</p>

<p style="margin-top: 1em">The a and r commands schedule
text for later output. The text specified for the a command,
and the contents of the file specified for the r command,
shall be written to standard <br>
output just before the next attempt to fetch a line of input
when executing the N or n commands, or when reaching the end
of the script. If written when reaching the end of the <br>
script, and the &acirc;n option was not specified, the text
shall be written after copying the pattern space to standard
output. The contents of the file specified for the r command
<br>
shall be as of the time the output is written, not the time
the r command is applied. The text shall be output in the
order in which the a and r commands were applied to the <br>
input.</p>

<p style="margin-top: 1em">Command verbs other than {, a,
b, c, i, r, t, w, :, and # can be followed by a
&lt;semicolon&gt;, optional &lt;blank&gt; characters, and
another command verb. However, when the s command <br>
verb is used with the w flag, following it with another
command in this manner produces undefined results.</p>

<p style="margin-top: 1em">A function can be preceded by
one or more &rsquo;!&rsquo; characters, in which case the
function shall be applied if the addresses do not select the
pattern space. Zero or more &lt;blank&gt; <br>
characters shall be accepted before the first
&rsquo;!&rsquo; character. It is unspecified whether
&lt;blank&gt; characters can follow a &rsquo;!&rsquo;
character, and conforming applications shall not fol&acirc;
<br>
low a &rsquo;!&rsquo; character with &lt;blank&gt;
characters.</p>

<p style="margin-top: 1em">[2addr] {editing command</p>

<p style="margin-top: 1em">editing command</p>

<p style="margin-top: 1em">...</p>

<p style="margin-top: 1em">} Execute a list of sed editing
commands only when the pattern space is selected. The list
of sed editing commands shall be surrounded by braces and
separated by &lt;new&acirc; <br>
line&gt; characters, and conform to the following rules. The
braces can be preceded or followed by &lt;blank&gt;
characters. The editing commands can be preceded by
&lt;blank&gt; <br>
characters, but shall not be followed by &lt;blank&gt;
characters. The &lt;right-brace&gt; shall be preceded by a
&lt;newline&gt; and can be preceded or followed by
&lt;blank&gt; characters.</p>

<p style="margin-top: 1em">[1addr]a <br>
text Write text to standard output as described
previously.</p>

<p style="margin-top: 1em">[2addr]b [label] <br>
Branch to the : function bearing the label. If label is not
specified, branch to the end of the script. The
implementation shall support labels recognized as unique up
<br>
to at least 8 characters; the actual length (greater than or
equal to 8) that shall be supported by the implementation is
unspecified. It is unspecified whether exceed&acirc; <br>
ing a label length causes an error or a silent
truncation.</p>

<p style="margin-top: 1em">[2addr]c <br>
text Delete the pattern space. With a 0 or 1 address or at
the end of a 2-address range, place text on the output and
start the next cycle.</p>

<p style="margin-top: 1em">[2addr]d Delete the pattern
space and start the next cycle.</p>

<p style="margin-top: 1em">[2addr]D If the pattern space
contains no &lt;newline&gt;, delete the pattern space and
start a normal new cycle as if the d command was issued.
Otherwise, delete the initial segment <br>
of the pattern space through the first &lt;newline&gt;, and
start the next cycle with the resultant pattern space and
without reading any new input.</p>

<p style="margin-top: 1em">[2addr]g Replace the contents of
the pattern space by the contents of the hold space.</p>

<p style="margin-top: 1em">[2addr]G Append to the pattern
space a &lt;newline&gt; followed by the contents of the hold
space.</p>

<p style="margin-top: 1em">[2addr]h Replace the contents of
the hold space with the contents of the pattern space.</p>

<p style="margin-top: 1em">[2addr]H Append to the hold
space a &lt;newline&gt; followed by the contents of the
pattern space.</p>

<p style="margin-top: 1em">[1addr]i <br>
text Write text to standard output.</p>

<p style="margin-top: 1em">[2addr]l (The letter ell.) Write
the pattern space to standard output in a visually
unambiguous form. The characters listed in the Base
Definitions volume of POSIX.1&acirc;2008, Table <br>
5-1, Escape Sequences and Associated Actions&rsquo;,
&rsquo;&rsquo;, &rsquo; shall be written as the
corresponding (&rsquo;\&rsquo;, &rsquo;&rsquo;, &rsquo;,,
&rsquo; escape sequence; the &rsquo;0 in that table is <br>
not applicable. Non-printable characters not in that table
shall be written as one three-digit octal number (with a
preceding &lt;backslash&gt;) for each byte in the
charac&acirc; <br>
ter (most significant byte first).</p>

<p style="margin-top: 1em">Long lines shall be folded, with
the point of folding indicated by writing a
&lt;backslash&gt; followed by a &lt;newline&gt;; the length
at which folding occurs is unspecified, but <br>
should be appropriate for the output device. The end of each
line shall be marked with a &rsquo;$&rsquo;.</p>

<p style="margin-top: 1em">[2addr]n Write the pattern space
to standard output if the default output has not been
suppressed, and replace the pattern space with the next line
of input, less its terminat&acirc; <br>
ing &lt;newline&gt;.</p>

<p style="margin-top: 1em">If no next line of input is
available, the n command verb shall branch to the end of the
script and quit without starting a new cycle.</p>

<p style="margin-top: 1em">[2addr]N Append the next line of
input, less its terminating &lt;newline&gt;, to the pattern
space, using an embedded &lt;newline&gt; to separate the
appended material from the original <br>
material. Note that the current line number changes.</p>

<p style="margin-top: 1em">If no next line of input is
available, the N command verb shall branch to the end of the
script and quit without starting a new cycle or copying the
pattern space to <br>
standard output.</p>

<p style="margin-top: 1em">[2addr]p Write the pattern space
to standard output.</p>

<p style="margin-top: 1em">[2addr]P Write the pattern
space, up to the first &lt;newline&gt;, to standard
output.</p>

<p style="margin-top: 1em">[1addr]q Branch to the end of
the script and quit without starting a new cycle.</p>

<p style="margin-top: 1em">[1addr]r rfile <br>
Copy the contents of rfile to standard output as described
previously. If rfile does not exist or cannot be read, it
shall be treated as if it were an empty file, caus&acirc;
<br>
ing no error condition.</p>

<p style="margin-top: 1em">[2addr]s/BRE/replacement/flags
<br>
Substitute the replacement string for instances of the BRE
in the pattern space. Any character other than
&lt;backslash&gt; or &lt;newline&gt; can be used instead of
a &lt;slash&gt; to <br>
delimit the BRE and the replacement. Within the BRE and the
replacement, the BRE delimiter itself can be used as a
literal character if it is preceded by a
&lt;backslash&gt;.</p>

<p style="margin-top: 1em">The replacement string shall be
scanned from beginning to end. An &lt;ampersand&gt;
(&rsquo;&amp;&rsquo;) appearing in the replacement shall be
replaced by the string matching the BRE. The <br>
special meaning of &rsquo;&amp;&rsquo; in this context can
be suppressed by preceding it by a &lt;backslash&gt;. The
characters &quot;0, where n is a digit, shall be replaced by
the text <br>
matched by the corresponding back-reference expression. If
the corresponding back-reference expression does not match,
then the characters &quot;0 shall be replaced by the <br>
empty string. The special meaning of &quot;0 where n is a
digit in this context, can be suppressed by preceding it by
a &lt;backslash&gt;. For each other &lt;backslash&gt;
encoun&acirc; <br>
tered, the following character shall lose its special
meaning (if any). The meaning of a &lt;backslash&gt;
immediately followed by any character other than
&rsquo;&amp;&rsquo;, &lt;backslash&gt;, <br>
a digit, or the delimiter character used for this command,
is unspecified.</p>

<p style="margin-top: 1em">A line can be split by
substituting a &lt;newline&gt; into it. The application
shall escape the &lt;newline&gt; in the replacement by
preceding it by a &lt;backslash&gt;. A substitution <br>
shall be considered to have been performed even if the
replacement string is identical to the string that it
replaces. Any &lt;backslash&gt; used to alter the default
meaning <br>
of a subsequent character shall be discarded from the BRE or
the replacement before evaluating the BRE or using the
replacement.</p>

<p style="margin-top: 1em">The value of flags shall be zero
or more of:</p>

<p style="margin-top: 1em">n Substitute for the nth
occurrence only of the BRE found within the pattern
space.</p>

<p style="margin-top: 1em">g Globally substitute for all
non-overlapping instances of the BRE rather than just the
first one. If both g and n are specified, the results are
unspecified.</p>

<p style="margin-top: 1em">p Write the pattern space to
standard output if a replacement was made.</p>

<p style="margin-top: 1em">w wfile Write. Append the
pattern space to wfile if a replacement was made. A
conforming application shall precede the wfile argument with
one or more &lt;blank&gt; charac&acirc; <br>
ters. If the w flag is not the last flag value given in a
concatenation of multiple flag values, the results are
undefined.</p>

<p style="margin-top: 1em">[2addr]t [label] <br>
Test. Branch to the : command verb bearing the label if any
substitutions have been made since the most recent reading
of an input line or execution of a t. If label <br>
is not specified, branch to the end of the script.</p>

<p style="margin-top: 1em">[2addr]w wfile <br>
Append (write) the pattern space to wfile.</p>

<p style="margin-top: 1em">[2addr]x Exchange the contents
of the pattern and hold spaces.</p>

<p style="margin-top: 1em">[2addr]y/string1/string2/ <br>
Replace all occurrences of characters in string1 with the
corresponding characters in string2. If a &lt;backslash&gt;
followed by an &rsquo;n&rsquo; appear in string1 or string2,
the <br>
two characters shall be handled as a single &lt;newline&gt;.
If the number of characters in string1 and string2 are not
equal, or if any of the characters in string1 appear <br>
more than once, the results are undefined. Any character
other than &lt;backslash&gt; or &lt;newline&gt; can be used
instead of &lt;slash&gt; to delimit the strings. If the
delimiter is <br>
not &rsquo;n&rsquo;, within string1 and string2, the
delimiter itself can be used as a literal character if it is
preceded by a &lt;backslash&gt;. If a &lt;backslash&gt;
character is immedi&acirc; <br>
ately followed by a &lt;backslash&gt; character in string1
or string2, the two &lt;backslash&gt; characters shall be
counted as a single literal &lt;backslash&gt; character. The
meaning <br>
of a &lt;backslash&gt; followed by any character that is not
&rsquo;n&rsquo;, a &lt;backslash&gt;, or the delimiter
character is undefined.</p>

<p style="margin-top: 1em">[0addr]:label <br>
Do nothing. This command bears a label to which the b and t
commands branch.</p>

<p style="margin-top: 1em">[1addr]= Write the following to
standard output:</p>

<p style="margin-top: 1em">&quot;%d0, &lt;current line
number&gt;</p>

<p style="margin-top: 1em">[0addr] Ignore this empty
command.</p>

<p style="margin-top: 1em">[0addr]# Ignore the
&rsquo;#&rsquo; and the remainder of the line (treat them as
a comment), with the single exception that if the first two
characters in the script are &quot;#n&quot;, the default
<br>
output shall be suppressed; this shall be the equivalent of
specifying &acirc;n on the command line.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The following exit values shall be returned:</p>

<p style="margin-top: 1em">0 Successful completion.</p>

<p style="margin-top: 1em">&gt;0 An error occurred.</p>

<p style="margin-top: 1em">CONSEQUENCES OF ERRORS <br>
Default.</p>

<p style="margin-top: 1em">The following sections are
informative.</p>

<p style="margin-top: 1em">APPLICATION USAGE <br>
Regular expressions match entire strings, not just
individual lines, but a &lt;newline&gt; is matched by
&rsquo;0 in a sed RE; a &lt;newline&gt; is not allowed by
the general definition of regu&acirc; <br>
lar expression in POSIX.1&acirc;2008. Also note that
&rsquo;0 cannot be used to match a &lt;newline&gt; at the
end of an arbitrary input line; &lt;newline&gt; characters
appear in the pattern space as <br>
a result of the N editing command.</p>

<p style="margin-top: 1em">EXAMPLES <br>
This sed script simulates the BSD cat &acirc;s command,
squeezing excess empty lines from standard input.</p>

<p style="margin-top: 1em">sed &acirc;n &rsquo; <br>
# Write non-empty lines. <br>
/./ { <br>
p <br>
d <br>
} <br>
# Write a single empty line, then look for more empty lines.
<br>
/^$/ p <br>
# Get next line, discard the held &lt;newline&gt; (empty
line), <br>
# and look for more empty lines. <br>
:Empty <br>
/^$/ { <br>
N <br>
s/.// <br>
b Empty <br>
} <br>
# Write the non-empty line before going back to search <br>
# for the first in a set of empty lines. <br>
p <br>
&rsquo;</p>

<p style="margin-top: 1em">The following sed command is a
much simpler method of squeezing empty lines, although it is
not quite the same as cat &acirc;s since it removes any
initial empty lines:</p>

<p style="margin-top: 1em">sed &acirc;n
&rsquo;/./,/^$/p&rsquo;</p>

<p style="margin-top: 1em">RATIONALE <br>
This volume of POSIX.1&acirc;2008 requires implementations
to support at least ten distinct wfiles, matching historical
practice on many implementations. Implementations are
encouraged <br>
to support more, but conforming applications should not
exceed this limit.</p>

<p style="margin-top: 1em">The exit status codes specified
here are different from those in System V. System V returns
2 for garbled sed commands, but returns zero with its usage
message or if the input <br>
file could not be opened. The standard developers considered
this to be a bug.</p>

<p style="margin-top: 1em">The manner in which the l
command writes non-printable characters was changed to avoid
the historical backspace-overstrike method, and other
requirements to achieve unambiguous <br>
output were added. See the RATIONALE for ed for details of
the format chosen, which is the same as that chosen for
sed.</p>

<p style="margin-top: 1em">This volume of
POSIX.1&acirc;2008 requires implementations to provide
pattern and hold spaces of at least 8192 bytes, larger than
the 4000 bytes spaces used by some historical imple&acirc;
<br>
mentations, but less than the 20480 bytes limit used in an
early proposal. Implementations are encouraged to allocate
dynamically larger pattern and hold spaces as needed.</p>

<p style="margin-top: 1em">The requirements for acceptance
of &lt;blank&gt; and &lt;space&gt; characters in command
lines has been made more explicit than in early proposals to
describe clearly the historical practice <br>
and to remove confusion about the phrase
&lsquo;&lsquo;protect initial blanks [sic] and tabs from the
stripping that is done on every script line&rsquo;&rsquo;
that appears in much of the historical <br>
documentation of the sed utility description of text. (Not
all implementations are known to have stripped &lt;blank&gt;
characters from text lines, although they all have allowed
lead&acirc; <br>
ing &lt;blank&gt; characters preceding the address on a
command line.)</p>

<p style="margin-top: 1em">The treatment of &rsquo;#&rsquo;
comments differs from the SVID which only allows a comment
as the first line of the script, but matches BSD-derived
implementations. The comment character is <br>
treated as a command, and it has the same properties in
terms of being accepted with leading &lt;blank&gt;
characters; the BSD implementation has historically
supported this.</p>

<p style="margin-top: 1em">Early proposals required that a
script_file have at least one non-comment line. Some
historical implementations have behaved in unexpected ways
if this were not the case. The <br>
standard developers considered that this was incorrect
behavior and that application developers should not have to
avoid this feature. A correct implementation of this volume
of <br>
POSIX.1&acirc;2008 shall permit script_files that consist
only of comment lines.</p>

<p style="margin-top: 1em">Early proposals indicated that
if &acirc;e and &acirc;f options were intermixed, all
&acirc;e options were processed before any &acirc;f options.
This has been changed to process them in the order
pre&acirc; <br>
sented because it matches historical practice and is more
intuitive.</p>

<p style="margin-top: 1em">The treatment of the p flag to
the s command differs between System V and BSD-based systems
when the default output is suppressed. In the two
examples:</p>

<p style="margin-top: 1em">echo a | sed
&rsquo;s/a/A/p&rsquo; <br>
echo a | sed &acirc;n &rsquo;s/a/A/p&rsquo;</p>

<p style="margin-top: 1em">this volume of
POSIX.1&acirc;2008, BSD, System V documentation, and the
SVID indicate that the first example should write two lines
with A, whereas the second should write one. Some <br>
System V systems write the A only once in both examples
because the p flag is ignored if the &acirc;n option is not
specified.</p>

<p style="margin-top: 1em">This is a case of a diametrical
difference between systems that could not be reconciled
through the compromise of declaring the behavior to be
unspecified. The SVID/BSD/System V <br>
documentation behavior was adopted for this volume of
POSIX.1&acirc;2008 because:</p>

<p style="margin-top: 1em">* No known documentation for any
historic system describes the interaction between the p flag
and the &acirc;n option.</p>

<p style="margin-top: 1em">* The selected behavior is more
correct as there is no technical justification for any
interaction between the p flag and the &acirc;n option. A
relationship between &acirc;n and the p <br>
flag might imply that they are only used together, but this
ignores valid scripts that interrupt the cyclical nature of
the processing through the use of the D, d, q, or <br>
branching commands. Such scripts rely on the p suffix to
write the pattern space because they do not make use of the
default output at the &lsquo;&lsquo;bottom&rsquo;&rsquo; of
the script.</p>

<p style="margin-top: 1em">* Because the &acirc;n option
makes the p flag unnecessary, any interaction would only be
useful if sed scripts were written to run both with and
without the &acirc;n option. This is <br>
believed to be unlikely. It is even more unlikely that
programmers have coded the p flag expecting it to be
unnecessary. Because the interaction was not documented, the
like&acirc; <br>
lihood of a programmer discovering the interaction and
depending on it is further decreased.</p>

<p style="margin-top: 1em">* Finally, scripts that break
under the specified behavior produce too much output instead
of too little, which is easier to diagnose and correct.</p>

<p style="margin-top: 1em">The form of the substitute
command that uses the n suffix was limited to the first 512
matches in an early proposal. This limit has been removed
because there is no reason an <br>
editor processing lines of {LINE_MAX} length should have
this restriction. The command s/a/A/2047 should be able to
substitute the 2047th occurrence of a on a line.</p>

<p style="margin-top: 1em">The b, t, and : commands are
documented to ignore leading white space, but no mention is
made of trailing white space. Historical implementations of
sed assigned different loca&acirc; <br>
tions to the labels &rsquo;x&rsquo; and &quot;x &quot;. This
is not useful, and leads to subtle programming errors, but
it is historical practice, and changing it could
theoretically break working <br>
scripts. Implementors are encouraged to provide warning
messages about labels that are never used or jumps to labels
that do not exist.</p>

<p style="margin-top: 1em">Historically, the sed ! and }
editing commands did not permit multiple commands on a
single line using a &lt;semicolon&gt; as a command
delimiter. Implementations are permitted, but <br>
not required, to support this extension.</p>

<p style="margin-top: 1em">Earlier versions of this
standard allowed for implementations with bytes other than
eight bits, but this has been modified in this version.</p>

<p style="margin-top: 1em">FUTURE DIRECTIONS <br>
None.</p>

<p style="margin-top: 1em">SEE ALSO <br>
awk, ed, grep</p>

<p style="margin-top: 1em">The Base Definitions volume of
POSIX.1&acirc;2008, Table 5-1, Escape Sequences and
Associated Actions, Chapter 8, Environment Variables,
Section 9.3, Basic Regular Expressions, Section <br>
12.2, Utility Syntax Guidelines</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Portions of this text are reprinted and reproduced in
electronic form from IEEE Std 1003.1, 2013 Edition, Standard
for Information Technology -- Portable Operating System
Inter&acirc; <br>
face (POSIX), The Open Group Base Specifications Issue 7,
Copyright (C) 2013 by the Institute of Electrical and
Electronics Engineers, Inc and The Open Group. (This is <br>
POSIX.1-2008 with the 2013 Technical Corrigendum 1 applied.)
In the event of any discrepancy between this version and the
original IEEE and The Open Group Standard, the original <br>
IEEE and The Open Group Standard is the referee document.
The original Standard can be obtained online at
http://www.unix.org/online.html .</p>

<p style="margin-top: 1em">Any typographical or formatting
errors that appear in this page are most likely to have been
introduced during the conversion of the source files to man
page format. To report <br>
such errors, see
https://www.kernel.org/doc/man-pages/reporting_bugs.html
.</p>

<p style="margin-top: 1em">IEEE/The Open Group 2013
SED(1POSIX)</p>
<hr>
</body>
</html>
