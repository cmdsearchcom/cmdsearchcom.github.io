<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:11:21 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fvwm-menu-desktop(1) Fvwm Modules
fvwm-menu-desktop(1)</p>

<p style="margin-top: 1em">NAME <br>
fvwm-menu-desktop - Reads XDG menu files and creates Fvwm
menus</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fvwm-menu-desktop [ --help|-h ] [ --version ] [
--install-prefix DIR ] [ --desktop NAME ] [ --menu-type NAME
] [ --theme NAME ] [ --with-titles|-w ] [ --without-titles ]
[ <br>
--enable-mini-icons ] [ --size|-s NUM ] [ --mini-icon-dir
DIR ] [ --app-icon NAME ] [ --dir-icon NAME ] [ --title|-t
NAME ] [ --insert-in-menu NAME ] [ --get-menus all|desktop ]
<br>
[ --set-menus menu_paths ] [ --all-menus ] [ --include-items
NAME ] [ --regen-cmd CMD ] [ --dynamic ] [ --menu-error|-e ]
[ --verbose|-v ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This is a python script which parses XDG menus definitions
to build corresponding fvwm menus. This script depends on
python-xdg to run.</p>

<p style="margin-top: 1em">OPTIONS <br>
Main Options</p>

<p style="margin-top: 1em">--help Show the help and
exit.</p>

<p style="margin-top: 1em">--version <br>
Show the version and exit.</p>

<p style="margin-top: 1em">--get-menus all|desktop <br>
Prints a space separated list of full menu paths found on
the system. all will print all menus found on the system
except empty ones. desktop will print the menu(s) that <br>
would be generated by the script.</p>

<p style="margin-top: 1em">No menu generation is done.</p>

<p style="margin-top: 1em">--desktop NAME <br>
Optional parameter to set the NAME of the desktop XDG .menu
file(s) to use. This option will override any default menus
set via FvwmForm-XDGMenu-Config and cause the <br>
script to find menus in which NAME is a part of the file
name. Possible names are: gnome, kde, xfce, lxde, debian,
etc.</p>

<p style="margin-top: 1em">This option can be used in
conjunction with --menu-type to control which .menu file(s)
are used.</p>

<p style="margin-top: 1em">--menu-type NAME <br>
Optional parameter to set the NAME of the XDG menu type to
use. This option will override any default menus set via
FvwmForm-XDGMenu-Config and cause the script to find <br>
menus in which NAME is a part of the file name. Possible
NAME types could be: applications, settings, preferences,
etc.</p>

<p style="margin-top: 1em">When used in conjunction with
--desktop, only menus whose file name matches
&rsquo;*destkop*menutype*&rsquo; are found. If no menus are
found, the script exits with an error.</p>

<p style="margin-top: 1em">--all-menus <br>
This option will build all menus found on the system. If
used in conjunction with --desktop or --menu-type this will
build all menus matching those settings.</p>

<p style="margin-top: 1em">--install-prefix DIR <br>
Optional parameter to override the standard locations for
XDG menu definitions. Tells fvwm-menu-desktop to look in DIR
for .menu files instead of the standard locations <br>
/etc/xdg/menus (and $HOME/.config/menus if it exists).</p>

<p style="margin-top: 1em">--with-titles|-w <br>
If this option is set menus are generated with titles. This
is the default. This option can be used to override the
FvwmForm-XDGMenu-Config default setting.</p>

<p style="margin-top: 1em">--without-titles <br>
If this option is set menus are generated without titles.
The default is to generate with titles.</p>

<p style="margin-top: 1em">--title|-t NAME <br>
Option to define the menu title NAME of the top menu used by
Fvwm&rsquo;s Menu or Popup commands. Default is
&quot;XDGMenu&quot;.</p>

<p style="margin-top: 1em">--include-items NAME <br>
This option controls if the additional menu items
&rsquo;Regenerate&rsquo; and &rsquo;Configure&rsquo; are
included in the top level menu. NAME can be one of regen,
config, both, or none. The <br>
default is both.</p>

<p style="margin-top: 1em">--regen-cmd CMD <br>
This option sets the fvwm command CMD that is run when the
menu item &Acirc;&acute;Regenerate&rsquo; is selected. The
default is &quot;PipeRead
&lsquo;fvwm-menu-desktop&lsquo;&quot;.</p>

<p style="margin-top: 1em">--dynamic <br>
This option is to be used with creating dynamic menus using
DynamicPopUpAction and DynamicPopDownAction. This adds a
&rsquo;recreate&rsquo; to the DestroyMenu command on the top
level <br>
menu so those actions are not Destroyed when the menu is
regenerated.</p>

<p style="margin-top: 1em">--insert-in-menu NAME <br>
Option to insert generated menu(s) IN a menu NAME (its top
title). This option makes it so the top level menu is not
Destroyed and the items are added to the end.</p>

<p style="margin-top: 1em">Note menus regenerated with this
option will append the menu items at the end of the existing
menu. Each time the menu is regenerated new menu items
appear giving a grow&acirc; <br>
ing menu of duplicate items. You have to regenerate the
whole menu via a function or restart fvwm. See EXAMPLES
below for some solutions.</p>

<p style="margin-top: 1em">--set-menus menu_paths <br>
Generates all menus listed in a space separated list of full
menu paths. This option overrides any defaults and
--desktop|--menu-type settings.</p>

<p style="margin-top: 1em">--menu-error |-t <br>
If this option is present and python-xdg is not found, the
script will print the error in the generated menu. Used in
the default-config.</p>

<p style="margin-top: 1em">--verbose <br>
Enables additional information printouts on STDERR.</p>

<p style="margin-top: 1em">Icons Options</p>

<p style="margin-top: 1em">By default, fvwm-menu-desktop
builds menus without mini-icons. To enable mini-icons use
the following options.</p>

<p style="margin-top: 1em">If ImageMagick is installed on
the system, the script will resize and copy the icons to
$FVWM_USERDIR/.icons. This can take awhile. You should be
prepared to wait the <br>
first time you generate the icons. Once the icons have been
generated the script should run faster. If it is still to
slow using icons, see EXAMPLES for ways to limit how <br>
often the menu is generated to speed things up.</p>

<p style="margin-top: 1em">--enable-mini-icons <br>
This option enables mini-icons in the menus. If set, 24x24
mini-icons are used. If the specified icon isn&rsquo;t that
size it will be converted if ImageMagick is installed and
<br>
saved in $HOME/.fvwm/icons or to the directory specified
with --mini-icon-dir option. Otherwise no icon appears in
the menu for that entry. With most distributions, all <br>
the menu entries will have mini-icons appropriate to the
application.</p>

<p style="margin-top: 1em">--theme NAME <br>
Defines the used icon theme. Default is gnome but all others
found in /usr/share/icons could be used except the hicolor
theme because it&rsquo;s the default fallback theme if no
<br>
icon is found.</p>

<p style="margin-top: 1em">--size|-s NUM <br>
If --enable-mini-icons is used the size of the icons can
changed with this parameter. Default is 24.</p>

<p style="margin-top: 1em">--mini-icon-dir DIR <br>
When the right size mini-icon isn&rsquo;t available,
fvwm-menu-desktop creates icons with the right size in
$HOME/.fvwm/icons. If you don&rsquo;t want to use the
default directory, <br>
$HOME/.fvwm/icons, use this option to specify a different
folder.</p>

<p style="margin-top: 1em">--app-icon NAME <br>
Sets the default application icon if no others are found.
Default is &Acirc;&acute;gnome-applications&rsquo;.</p>

<p style="margin-top: 1em">--dir-icon NAME <br>
Sets the default directory icon if no others are found.
Default is &Acirc;&acute;gnome-fs-directory&rsquo;.</p>

<p style="margin-top: 1em">USAGE <br>
fvwm-menu-desktop outputs XDG .menu files in the syntax of
fvwm menus. When fvwm-menu-desktop is run with no options,
it will load defaults from the FvwmForm-XDGMenu-Config file
<br>
(see below) then search your system for suitable menu
file(s). To see which menus are available on your system
run:</p>

<p style="margin-top: 1em">fvwm-menu-desktop --get-menus
all</p>

<p style="margin-top: 1em">If no menus are found you may
not have any installed on your system. By default menus are
stored as *.menu files in /etc/xdg/menus,
$HOME/.config/menus or the location set in <br>
$XDG_MENU_PREFIX. You can use --install-prefix to specify
another location search for menus.</p>

<p style="margin-top: 1em">Though a combination of command
line options and the FvwmForm-XDGMenu-Config settings,
fvwm-menu-desktop can generate any combination of the menus
found. To get a list of what <br>
menu(s) would be generated use the --get-menus desktop
option. The following will list all menus generated if
fvwm-menu-desktop was run with no options.</p>

<p style="margin-top: 1em">fvwm-menu-desktop --get-menus
desktop</p>

<p style="margin-top: 1em">fvwm-menu-desktop determines
which menu(s) to generate as follows</p>

<p style="margin-top: 1em">If no config file is found, all
menus will be weighted and the script will generate the best
(highest weight) menu found.</p>

<p style="margin-top: 1em">If a config file is found (and
override options are not used) the script will generate all
menus selected in FvwmForm-XDGMenu-Config.</p>

<p style="margin-top: 1em">--desktop, --menu-type,
--set-menus and --all-menus will override any menus selected
in FvwmForm-XDGMenu-Config.</p>

<p style="margin-top: 1em">--desktop and --menu-type will
only include menus whose name matches
&rsquo;*desktop*menutype*&rsquo;. If used with --all-menus,
all matching menus are generated. If used without <br>
--all-menus, only the highest weighted menu is
generated.</p>

<p style="margin-top: 1em">--set-menus generates menus from
the list of full path menu file names.</p>

<p style="margin-top: 1em">--all-menus by itself will
generate all menus found.</p>

<p style="margin-top: 1em">By default fvwm-menu-desktop
will generate a menu whose top level name is
&quot;XDGMenu&quot;. To tell fvwm to read the output of
fvwm-menu-desktop to create the menu XDGMenu add the
fol&acirc; <br>
lowing to your fvwm config file:</p>

<p style="margin-top: 1em">PipeRead
&rsquo;fvwm-menu-desktop&rsquo;</p>

<p style="margin-top: 1em">Warning: Depending on the
options used this command may be slow and fvwm will pause
until this command is complete. See EXAMPLES below for more
details and possible workarounds.</p>

<p style="margin-top: 1em">Once the menu is generated you
can open the menu by using the command &quot;Menu
XDGMenu&quot;. You can also include this in the MenuFvwmRoot
menu by:</p>

<p style="margin-top: 1em">AddToMenu MenuFvwmRoot &quot;XDG
Menu&quot; Popup XDGMenu</p>

<p style="margin-top: 1em">fvwm-menu-desktop can be
configured though both command line options and a FvwmForm
GUI to customize the menu(s) that get generated.</p>

<p style="margin-top: 1em">GUI <br>
FvwmForm-XDGMenu-Config is a FvwmForm interface that can be
used to configure the defaults for fvwm-menu-desktop. You
can access this from the &quot;Configure&quot; item in the
top level <br>
menu that is generated or run the following from within
FvwmConsole</p>

<p style="margin-top: 1em">Module FvwmPerl -l
fvwm-menu-desktop-config.fpl</p>

<p style="margin-top: 1em">This form can be used to select
which menu(s) get generated by default along with setting
many (but not all) of the available options. When you click
&quot;Save Settings&quot; the form <br>
will write a config file located at
$FVWM_USERDIR/.FvwmForm-XDGMenu-Config that
fvwm-menu-desktop will parse for defaults when run.</p>

<p style="margin-top: 1em">See the help inside of
FvwmForm-XDGMenu-Config for more information.</p>

<p style="margin-top: 1em">EXAMPLES <br>
There are many ways to setup when fvwm runs
fvwm-menu-desktop to generate the menu. One method is to
just generate the menu when fvwm loads and then use the GUI
config tool to <br>
change any options. To do this you only need to add the
following to the fvwm config file:</p>

<p style="margin-top: 1em">AddToMenu MenuFvwmRoot &quot;XDG
Menu&quot; Popup XDGMenu <br>
PipeRead &rsquo;fvwm-menu-desktop&rsquo;</p>

<p style="margin-top: 1em">The menu is created once when
fvwm loads. Since menu creation can sometimes be slow, this
could cause fvwm to take longer to load than one wants.</p>

<p style="margin-top: 1em">The menu is only generated when
fvwm starts. If software is installed or removed you will
have to select the &rsquo;Regenerate&rsquo; option to
rebuild the menu.</p>

<p style="margin-top: 1em">One way to speed things up is to
save the menu in a file and only generate the menu when
&rsquo;Regenerate&rsquo; is selected. To do this use
--regen-cmd to call a custom function and write <br>
the menu to a file using a command like</p>

<p style="margin-top: 1em">fvwm-menu-desktop --regen-cmd
XDGRegen &gt; $FVWM_USERDIR/.XDGMenu</p>

<p style="margin-top: 1em">Then add the following to the
fvwm config file to define the function XDGRegen. The second
to last line will generate the menu if the menu file
doesn&rsquo;t exist when fvwm starts.</p>

<p style="margin-top: 1em">DestroyFunc XDGRegen <br>
AddToFunc XDGRegen <br>
+ I PipeRead &rsquo;fvwm-menu-desktop --regen-cmd XDGRegen
&gt; $[FVWM_USERDIR]/.XDGMenu; echo &quot;Nop&quot;&rsquo;
<br>
+ I Read $[FVWM_USERDIR]/.XDGMenu</p>

<p style="margin-top: 1em">Test (!f
$[FVWM_USERDIR]/.XDGMenu) XDGRegen <br>
Read $[FVWM_USERDIR]/.XDGMenu</p>

<p style="margin-top: 1em">Besides creating a top level
menu, fvwm-menu-desktop can insert the menu into an existing
menu using the --insert-in-menu option. For example one
could create the menu MenuFvwm&acirc; <br>
Root and include the XDG items at the end.</p>

<p style="margin-top: 1em">DestroyMenu MenuFvwmRoot <br>
AddToMenu MenuFvwmRoot &quot;Fvwm&quot; Title <br>
+ &quot;Item1&quot; Action1 <br>
... <br>
+ &quot;ItemN&quot; ActionN <br>
+ &quot;&quot; Nop <br>
PipeRead &rsquo;fvwm-menu-desktop --insert-in-menu
MenuFvwmRoot&rsquo;</p>

<p style="margin-top: 1em">In this case the menu items are
inserted at the end of the MenuFvwmRoot menu. If no items
are in the menu, this menu becomes MenuFvwmRoot. The problem
here is, that you have to <br>
restart fvwm or rebuild the whole menu to Regenerate it
because menu items cannot be removed. To do this you could
use a function like</p>

<p style="margin-top: 1em">DestroyFunc XDGRegen <br>
AddToFunc XDGRegen <br>
+ I DestroyMenu MenuFvwmRoot <br>
+ I AddToMenu MenuFvwmRoot &quot;Fvwm&quot; Title <br>
+ I AddToMenu MenuFvwmRoot &quot;Item1&quot; Action1 <br>
... <br>
+ I AddToMenu MenuFvwmRoot &quot;ItemN&quot; ActionN <br>
+ I AddToMenu MenuFvwmRoot &quot;&quot; Nop <br>
+ I PipeRead &rsquo;fvwm-menu-desktop --insert-in-menu
MenuFvwmRoot --regen-cmd XDGRegen&rsquo;</p>

<p style="margin-top: 1em">Fvwm can also create menus
dynamically by using DynamicPopUpAction and/or
DynamicPopDownAction. These commands when used with a Menu
will run a Function when the menu is opened. <br>
For example one could create the menu XDGMenu when it is
opened using</p>

<p style="margin-top: 1em">AddToMenu XDGMenu
&quot;XDGMenu&quot; Title <br>
+ DynamicPopUpAction PipeRead
&rsquo;fvwm-menu-desktop&rsquo;</p>

<p style="margin-top: 1em">This will create the menu when
it is opened. One issue here is it will only create the menu
the first time it is opened, and you still have to
Regenerate the menu to see any <br>
changes. To create the menu each time it is open used the
--dynamic option</p>

<p style="margin-top: 1em">AddToMenu XDGMenu
&quot;XDGMenu&quot; Title <br>
+ DynamicPopUpAction PipeRead &rsquo;fvwm-menu-desktop
--dynamic --include-items config&rsquo; <br>
+ DynamicPopDownAction DestroyMenu recreate XDGMenu</p>

<p style="margin-top: 1em">This will now Destroy the menu
when it closed so it can be rebuilt the next time it is
opened. The recreate flag doesn&rsquo;t completely destroy
the menu keeping the DynamicPopU&acirc; <br>
pAction and DynamicPopDownAction actions. The --dynamic flag
includes the recreate option in the generated menus.</p>

<p style="margin-top: 1em">To insert a menu into
MenuFvwmRoot and still be dynamic you need to use a function
that generates the whole menu. For example</p>

<p style="margin-top: 1em">DestroyFunc GenRootMenu <br>
AddToFunc GenRootMenu <br>
+ I DestroyMenu recreate MenuFvwmRoot <br>
+ I AddToMenu MenuFvwmRoot &quot;Fvwm&quot; Title <br>
+ I AddToMenu MenuFvwmRoot &quot;Item1&quot; Action1 <br>
... <br>
+ I AddToMenu MenuFvwmRoot &quot;ItemN&quot; ActionN <br>
+ I AddToMenu MenuFvwmRoot &quot;&quot; Nop <br>
+ PipeRead &lsquo;fvwm-menu-desktop --insert-in-menu
MenuFvwmRoot --include-items config&lsquo;</p>

<p style="margin-top: 1em">AddToMenu MenuFvwmRoot
&quot;Fvwm&quot; Title <br>
+ DynamicPopUpAction GenRootMenu <br>
+ DynamicPopDownAction DestroyMenu recreate MenuFvwmRoot</p>

<p style="margin-top: 1em">BUGS <br>
The whole process of creating menus from files is slow.
Otherwise report bugs to the fvwm-workers mailing list
&lt;fvwm-workers@fvwm.org&gt;.</p>

<p style="margin-top: 1em">AUTHORS <br>
This script is based on fvwm-xdg-menu.py written by Piotr
Zielinski (http://www.cl.cam.ac.uk/~pz215/) who assigned
Licence: GPL 2 Date: 03.12.2005.</p>

<p style="margin-top: 1em">The script was reworked to
replace the existing fvwm-menu-desktop perl script by the
fvwm-workers.</p>

<p style="margin-top: 1em">COPYING <br>
The script is distributed by the same terms as fvwm itself.
See GNU General Public License for details.</p>

<p style="margin-top: 1em">3rd Berkeley Distribution 06
November 2016 (2.6.7) fvwm-menu-desktop(1)</p>
<hr>
</body>
</html>
