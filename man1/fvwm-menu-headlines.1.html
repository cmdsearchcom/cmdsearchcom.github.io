<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:11:22 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>fvwm-menu-headlines(1) Fvwm Utilities
fvwm-menu-headlines(1)</p>

<p style="margin-top: 1em">NAME <br>
fvwm-menu-headlines - builds headlines menu definition for
fvwm</p>

<p style="margin-top: 1em">SYNOPSIS <br>
fvwm-menu-headlines [ --help|-h|-? ] [ --version|-V ] [
--info [site] ] [ --site|-s site ] [ --name|-n name ] [
--title|-t title ] [ --item item ] [ --exec|-e exec-command
] [ <br>
--command|-e fvwm-command ] [ --icon-title icon ] [
--icon-item icon ] [ --icon-home icon ] [ --icon-error icon
] [ --wm-icons ] [ --frontpage [where] ] [ --proxy|-p
host:port ] <br>
[ --file [file] ] [ --fake [file] ] [ --timeout seconds
]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This configurable perl script builds an fvwm menu definition
for headlines of popular news web sites: FreshMeat,
Slashdot, LinuxToday, DaemonNews, GNOME-News, KDE-News, <br>
RootPrompt, LinuxFr, ThinkGeek, CNN, BBC and more.</p>

<p style="margin-top: 1em">It is possible to specify a
customized menu item format, change a command (usually
launching a browser) and add menu icons (there is a support
for the wm-icons package).</p>

<p style="margin-top: 1em">OPTIONS <br>
--help <br>
show the help and exit</p>

<p style="margin-top: 1em">--version <br>
show the version and exit</p>

<p style="margin-top: 1em">--info [site] <br>
if site name is given print the site specific info,
otherwise print all site names</p>

<p style="margin-top: 1em">--site site <br>
defile a web site, headlines of which to show, this option
also can be used together with --help to get new defaults.
Default site: freshmeat.</p>

<p style="margin-top: 1em">--name name <br>
define menu name (default is
&quot;MenuHeadlinesFreshmeat&quot;)</p>

<p style="margin-top: 1em">--title title <br>
define menu title (default is &quot;Freshmeat
Headlines&quot;).</p>

<p style="margin-top: 1em">--item label-format <br>
--exec command-format <br>
define format for menu item or command (what is shown and
what is executed when the item is chosen). Default label is
&rsquo;%h%[(%Y-%m-%d %H:%M)]&rsquo;. TAB can be specified as
&rsquo;&rsquo;, <br>
but in .fvwm2rc you should specify a double backslash or a
real TAB.</p>

<p style="margin-top: 1em">Format specifiers for a headline
format:</p>

<p style="margin-top: 1em">%h - headline <br>
%u - url <br>
%d - date in the native format (that site backend supplied)
<br>
%[strftime-argument-string] - date/time, see strftime(3)
<br>
the date/time is represented according to the local time;
<br>
date and/or time fields that can&rsquo;t be guessed are
stripped <br>
Example: %[|%d %B %Y| %H:%M %S] <br>
If site supplied only date - this becomes %[|%d %B %Y|],
<br>
if site supplied no date - this becomes an empty string.
<br>
%{name} - site specific named value, like %{comments} <br>
%(text) - arbitrary text, good for escaping or aligning</p>

<p style="margin-top: 1em">These specifiers can receive an
optional integer size, positive for right adjusted string or
negative for left adjusted, example: %8x; and optional *num
or *-num, which means <br>
to leave only the first or last (if minus) num of chars, the
num must be greater than 3, since the striped part is
replaced with &quot;...&quot;, example: %*30x. Both can be
combined: <br>
%-10*-20x, this instructs to get only the 20 last
characters, but if the length is less then 10 - to fill with
up to 10 spaces on the right.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">--exec &quot;iceweasel -remote
&rsquo;openURL(%u, new-window)&rsquo; || iceweasel
&rsquo;%u&rsquo;&quot;</p>

<p style="margin-top: 1em">--command command-format <br>
like --exec above, but enables to specify any fvwm command,
for example, &quot;Function FuncFvwmShowURL
&rsquo;%u&rsquo;&quot; not only Exec.</p>

<p style="margin-top: 1em">In fact, --exec=&quot;mozilla
&rsquo;%u&rsquo;&quot; is equivalent to --command=&quot;Exec
mozilla &rsquo;%u&rsquo;&quot;</p>

<p style="margin-top: 1em">--icon-title icon <br>
--icon-item icon <br>
--icon-home icon <br>
--icon-error icon <br>
define menu icon for title, regular item, frontpage item and
error item respectively. Default is no menu icons
(equivalent to an empty icon argument).</p>

<p style="margin-top: 1em">--wm-icons <br>
define icon names suitable for use with wm-icons package.
Currently this is equivalent to: --icon-title &rsquo;&rsquo;
--icon-item menu/information.xpm --icon-home menu/home.xpm
<br>
--icon-error menu/choice-no.xpm.</p>

<p style="margin-top: 1em">--frontpage [where] <br>
add the site frontpage item to the menu. Optional value can
be used to specify where this item will be placed in the
menu - &rsquo;top&rsquo; or &rsquo;t&rsquo;,
&rsquo;bottom&rsquo; or &rsquo;b&rsquo;.</p>

<p style="margin-top: 1em">--proxy host[:port] <br>
define a proxy to use. Example: --proxy
proxy.inter.net:3128</p>

<p style="margin-top: 1em">--file [file] <br>
write the menu output to specified file. If no filename is
given with this option (or empty filename), the default
filename WORK_HOME/SITE.menu is used. Without this option
<br>
or with &rsquo;-&rsquo; filename, the menu output is written
to standard output.</p>

<p style="margin-top: 1em">--fake [file] <br>
don&rsquo;t connect to the host using HTTP protocol,
instead, read from WORK_HOME/SITE.in file. The following
reads input from freshmeat.in (downloaded <br>
http://freshmeat.net/backend/recentnews.txt) and saves
output to segfault.menu (both files are in WORK_HOME):
fvwm-menu-headlines --site freshmeat --fake --file</p>

<p style="margin-top: 1em">--timeout seconds <br>
limit a line reading from a socket to this timeout, the
default timeout is 20 seconds.</p>

<p style="margin-top: 1em">WORK_HOME of this script is
~/.fvwm/.fvwm-menu-headlines. It is created if needed.</p>

<p style="margin-top: 1em">Option parameters can be
specified either using &rsquo;=&rsquo; or in the next
argument. Short options are ok if not ambiguous:
&quot;-h&quot;, &quot;-t&quot;; but be careful with short
options, what is now <br>
unambiguous, can become ambiguous in the next versions.</p>

<p style="margin-top: 1em">USAGE <br>
1. One of the ways to use this script is to define a crontab
entry to run the script every hour or so for every monitored
site:</p>

<p style="margin-top: 1em">0,30 * * * * fvwm-menu-headlines
--file --site freshmeat <br>
1,31 * * * * fvwm-menu-headlines --file --site linuxtoday
<br>
2,32 * * * * fvwm-menu-headlines --file --site slashdot</p>

<p style="margin-top: 1em">Then add these lines to your
fvwm configuration file:</p>

<p style="margin-top: 1em">DestroyFunc
FuncFvwmMenuHeadlines <br>
AddToFunc FuncFvwmMenuHeadlines <br>
+ I Read
&quot;$HOME/.fvwm/.fvwm-menu-headlines/$0.menu&quot;</p>

<p style="margin-top: 1em">DestroyMenu MenuHeadlines <br>
AddToMenu MenuHeadlines &quot;Headlines&quot; Title <br>
+ MissingSubmenuFunction FuncFvwmMenuHeadlines <br>
+ &quot;FreshMeat&quot; Popup freshmeat <br>
+ &quot;LinuxToday&quot; Popup linuxtoday <br>
+ &quot;Slashdot&quot; Popup slashdot</p>

<p style="margin-top: 1em">2. Another way to use this
script (only if you have fast network/proxy) is to run it
every time you want to open your Headlines submenus. (Note,
the submenu that is once created <br>
is not reloaded, use &quot;Reset all&quot;.)</p>

<p style="margin-top: 1em">In this case your fvwm
configuration lines could be:</p>

<p style="margin-top: 1em">DestroyFunc
FuncFvwmMenuHeadlines <br>
AddToFunc FuncFvwmMenuHeadlines <br>
+ I PipeRead &quot;fvwm-menu-headlines --site $0&quot; <br>
#+ I Schedule 900000 DestroyMenu $0 # reset generated menu
in 15 minutes</p>

<p style="margin-top: 1em">DestroyMenu MenuHeadlines <br>
AddToMenu MenuHeadlines &quot;Headlines&quot; Title <br>
+ MissingSubmenuFunction FuncFvwmMenuHeadlines <br>
+ &quot;FreshMeat&quot; Popup freshmeat <br>
+ &quot;Slashdot&quot; Popup slashdot <br>
+ &quot;LinuxToday&quot; Popup linuxtoday <br>
+ &quot;GNOME News&quot; Popup gnome-news <br>
+ &quot;KDE News&quot; Popup kde-news <br>
+ &quot;&quot; Nop <br>
+ &quot;Reset all&quot; FuncResetHeadlines</p>

<p style="margin-top: 1em">DestroyFunc FuncResetHeadlines
<br>
AddToFunc FuncResetHeadlines <br>
+ I DestroyMenu freshmeat <br>
+ I DestroyMenu linuxtoday <br>
+ I DestroyMenu slashdot <br>
+ I DestroyMenu gnome-news <br>
+ I DestroyMenu kde-news</p>

<p style="margin-top: 1em">And finally, add &quot;Popup
MenuHeadlines&quot; somewhere.</p>

<p style="margin-top: 1em">3. Here is a usual usage. Use
FvwmConsole or FvwmCommand to run fvwm commands from a shell
script. Every time you want headlines from some site,
execute (give any additional <br>
options if you want):</p>

<p style="margin-top: 1em">PipeRead
&quot;fvwm-menu-headlines --site newsforge --name
MenuHeadlinesNewsForge&quot; <br>
# this may take several seconds, you may use: BusyCursor
Read true <br>
Popup MenuHeadlinesNewsForge</p>

<p style="margin-top: 1em">HOW TO ADD SITE HEADLINES <br>
It is possible to add user defined site headlines without
touching the script itself. Put your perl extensions to the
file WORK_HOME/extension.pl. For each site add something
<br>
similar to:</p>


<p style="margin-top: 1em">$site_info-&gt;{&rsquo;myslashdot&rsquo;}
= { <br>
&rsquo;name&rsquo; =&gt; &quot;MySlashdot&quot;, <br>
&rsquo;host&rsquo; =&gt; &quot;myslashdot.org&quot;, <br>
&rsquo;path&rsquo; =&gt; &quot;/myslashdot.xml&quot;, <br>
&rsquo;func&rsquo; =&gt; process_my_slashdot, <br>
# the following string is only used in --info <br>
&rsquo;flds&rsquo; =&gt; &rsquo;time, title, department,
topic, author, url&rsquo;, <br>
};</p>

<p style="margin-top: 1em">sub process_my_slashdot () {
<br>
return process_xml( <br>
&rsquo;story&rsquo;, <br>
# mandatory &rsquo;h&rsquo;, &rsquo;u&rsquo; and
&rsquo;d&rsquo; aliases or undef <br>
{ &rsquo;h&rsquo; =&gt; &rsquo;title&rsquo;, &rsquo;u&rsquo;
=&gt; &rsquo;url&rsquo;, &rsquo;d&rsquo; =&gt;
&rsquo;time&rsquo; }, <br>
sub ($) { # convert &rsquo;d&rsquo; string to (y, m, d, H,
M, S) <br>
$_[0] =~ /(+)-(+)-(+) (+):(+):(+)/; <br>
($1, ($2 || 0) - 1, $3, $4, $5, $6); <br>
}, +0, # timezone offset; already in UTC <br>
); <br>
}</p>

<p style="margin-top: 1em">1;</p>

<p style="margin-top: 1em">AUTHORS <br>
This script is inspired by WMHeadlines v1.3 by:</p>

<p style="margin-top: 1em">Jeff Meininger
&lt;jeffm@boxybutgood.com&gt; <br>
(http://rive.boxybutgood.com/WMHeadlines/).</p>

<p style="margin-top: 1em">Reimplemented for fvwm and
heavily enhanced by:</p>

<p style="margin-top: 1em">Mikhael Goikhman
&lt;migo@homemail.com&gt;, 16 Dec 1999.</p>

<p style="margin-top: 1em">COPYING <br>
The script is distributed by the same terms as fvwm itself.
See GNU General Public License for details.</p>

<p style="margin-top: 1em">BUGS <br>
I try to keep all supported site info up to date, but sites
often go down, change their backend formats, change their
httpd responses, just stop to post news and so on; the <br>
script in the latest cvs may be more up to date.</p>

<p style="margin-top: 1em">The headline times may be off by
one hour or more, since the time is displayed for your local
time zone, and the time zone of the original time in the
site backend output is <br>
often guessed (sometimes incorrectly); similarly it is
guessed whether to apply the daylight saving correction.</p>

<p style="margin-top: 1em">Report bugs to
fvwm-bug@fvwm.org.</p>

<p style="margin-top: 1em">2.5.28 (from cvs) 2009-03-22
fvwm-menu-headlines(1)</p>
<hr>
</body>
</html>
