<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PERL-CROSS-STAGING(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERL-CROSS-STAGING(1)</td>
    <td class="head-vol">perl-cross-staging User Manual</td>
    <td class="head-rtitle">PERL-CROSS-STAGING(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
perl-cross-staging - Long term maintenance of cross-build support for the Debian
  configuration of perl
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 19.00ex; text-indent: -19.00ex;"><b>perl-cross-staging</b></div>
<div class="Pp"></div>
<b>perl-cross-staging</b> takes no commands or options.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>perl-cross-staging</b> supports the long term maintenance of cross-build
  support for the Debian configuration of perl.
<div class="Pp"></div>
<b>perl-cross-staging</b> assists in the producuction of config files from the
  current perl build tree to update existing perl-cross-debian support by
  staging native builds of perl patched to support <b>perl-cross-staging</b>.
<div class="Pp"></div>
Config files generated by <b>perl-cross-staging</b> need substantial manual
  editing and updating before being usable for a cross-build or inclusion into
  <b>perl-cross-debian</b>.
<h1 class="Sh" title="Sh" id="UPDATING_CROSS_CONFIG_FILES"><a class="selflink" href="#UPDATING_CROSS_CONFIG_FILES">UPDATING
  CROSS CONFIG FILES</a></h1>
Each new version of perl introduces and rearranges the existing config values
  and the config.h and config.sh files for each variant need to be updated.
<div class="Pp"></div>
Some sections simply need to be moved around within the file for easier
  comparison, some sections will be new (and may need adjustment if the new
  values are architecture-sensitive) and some may need to be removed. Some
  values include the version string of the perl version being built. Some values
  include the name of the compiler or preprocessor. There are values which
  specify the original build directory and these need to be replaced with
  PERL_BUILD_DIR:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
installarchlib='PERL_BUILD_DIR/debian/tmp/usr/lib/perl/5.16'
    
</pre>
</div>
<div class="Pp"></div>
Missing values will be easiest to spot as these cause the build to fail with
  invalid preprocessing directives.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
config.h:2229:3: error: invalid preprocessing directive #HAS_STATIC_INLINE
config.h:2766:3: error: invalid preprocessing directive #HAS_SOCKADDR_SA_LEN
config.h:2773:3: error: invalid preprocessing directive #HAS_SIN6_SCOPE_ID
config.h:3614:3: error: invalid preprocessing directive #HAS_PRCTL
config.h:3615:3: error: invalid preprocessing directive #HAS_PRCTL_SET_NAME
</pre>
</div>
<div class="Pp"></div>
Probably the biggest problem is reorganisation of the files which arises because
  the files are all generated, rather than edited. This can easily lead to
  sections being added in one place of the file and being repeated (with
  differing values) elsewhere. Use a comparison tool like <b>meld</b> to push
  snippets in and out of the staged files with usable previous/next search/find
  regexp support.
<div class="Pp"></div>
Once one of the variant files has been updated, merge the changes into the other
  staged variants before comparing those with the files from the previous
  version of perl.
<div class="Pp"></div>
Old perl version strings also need to be updated.
<h1 class="Sh" title="Sh" id="ARCHITECTURE"><a class="selflink" href="#ARCHITECTURE">ARCHITECTURE</a></h1>
Typically, <b>perl-cross-staging</b> is run for the native architecture on the
  expectation that most of the updates to the staged files will include changes
  for the cross architecture. e.g. updates for 5.16.2 were prepared by staging
  amd64 and porting the updates into the cross architecture files for 5.14.2.
<div class="Pp"></div>
<b>perl-cross-staging</b> does support attempting to stage a cross build but
  this has not been tested. Please report success or failure.
<h1 class="Sh" title="Sh" id="UPSTREAM_SUPPORT"><a class="selflink" href="#UPSTREAM_SUPPORT">UPSTREAM
  SUPPORT</a></h1>
Note that work is ongoing to get perl cross-building upstream and this is not
  complete. <b>perl-cross-staging</b> will need changes once this work is
  complete. The aim is to make it easier to obtain the configuration value cache
  for architectures where real hardware or an emulation model can be accessed
  over a network. This work takes place at
  https://github.com/codehelp/perl/tree/jrobinson/configure-for-cross which is
  intermittently pulled into the main cross-configure branch at
  https://github.com/castaway/perl/tree/jrobinson/configure-for-cross
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Currently <b>perl-cross-staging</b> does not substitute the working directory
  for PERL_BUILD_DIR in the .sh scripts - this is left as one of the manual
  steps required before including the generated files into
  <b>perl-cross-debian</b>.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Neil Williams</b> &lt;codehelp@debian.org&gt;
<div style="margin-left: 4.00ex;">Wrote this manpage for the Debian
  system.</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2012 Neil Williams
<div>&#x00A0;</div>
<div class="Pp"></div>
This manual page was written for the Debian system (and may be used by others).
<div class="Pp"></div>
Permission is granted to copy, distribute and/or modify this document under the
  terms of the GNU General Public License, Version 2 or (at your option) any
  later version published by the Free Software Foundation.
<div class="Pp"></div>
On Debian systems, the complete text of the GNU General Public License can be
  found in /usr/share/common-licenses/GPL.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">05/19/2013</td>
    <td class="foot-os">perl-cross-staging</td>
  </tr>
</table>
</body>
</html>
