<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:30:45 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PERL-CROSS-STAGING(1) perl-cross-staging User Manual
PERL-CROSS-STAGING(1)</p>

<p style="margin-top: 1em">NAME <br>
perl-cross-staging - Long term maintenance of cross-build
support for the Debian configuration of perl</p>

<p style="margin-top: 1em">SYNOPSIS <br>
perl-cross-staging</p>

<p style="margin-top: 1em">perl-cross-staging takes no
commands or options.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
perl-cross-staging supports the long term maintenance of
cross-build support for the Debian configuration of
perl.</p>

<p style="margin-top: 1em">perl-cross-staging assists in
the producuction of config files from the current perl build
tree to update existing perl-cross-debian support by staging
native builds of perl <br>
patched to support perl-cross-staging.</p>

<p style="margin-top: 1em">Config files generated by
perl-cross-staging need substantial manual editing and
updating before being usable for a cross-build or inclusion
into perl-cross-debian.</p>

<p style="margin-top: 1em">UPDATING CROSS CONFIG FILES <br>
Each new version of perl introduces and rearranges the
existing config values and the config.h and config.sh files
for each variant need to be updated.</p>

<p style="margin-top: 1em">Some sections simply need to be
moved around within the file for easier comparison, some
sections will be new (and may need adjustment if the new
values are <br>
architecture-sensitive) and some may need to be removed.
Some values include the version string of the perl version
being built. Some values include the name of the compiler or
<br>
preprocessor. There are values which specify the original
build directory and these need to be replaced with
PERL_BUILD_DIR:</p>


<p style="margin-top: 1em">installarchlib=&rsquo;PERL_BUILD_DIR/debian/tmp/usr/lib/perl/5.16&rsquo;</p>

<p style="margin-top: 1em">Missing values will be easiest
to spot as these cause the build to fail with invalid
preprocessing directives.</p>

<p style="margin-top: 1em">config.h:2229:3: error: invalid
preprocessing directive #HAS_STATIC_INLINE <br>
config.h:2766:3: error: invalid preprocessing directive
#HAS_SOCKADDR_SA_LEN <br>
config.h:2773:3: error: invalid preprocessing directive
#HAS_SIN6_SCOPE_ID <br>
config.h:3614:3: error: invalid preprocessing directive
#HAS_PRCTL <br>
config.h:3615:3: error: invalid preprocessing directive
#HAS_PRCTL_SET_NAME</p>

<p style="margin-top: 1em">Probably the biggest problem is
reorganisation of the files which arises because the files
are all generated, rather than edited. This can easily lead
to sections being added in <br>
one place of the file and being repeated (with differing
values) elsewhere. Use a comparison tool like meld to push
snippets in and out of the staged files with usable <br>
previous/next search/find regexp support.</p>

<p style="margin-top: 1em">Once one of the variant files
has been updated, merge the changes into the other staged
variants before comparing those with the files from the
previous version of perl.</p>

<p style="margin-top: 1em">Old perl version strings also
need to be updated.</p>

<p style="margin-top: 1em">ARCHITECTURE <br>
Typically, perl-cross-staging is run for the native
architecture on the expectation that most of the updates to
the staged files will include changes for the cross
architecture. <br>
e.g. updates for 5.16.2 were prepared by staging amd64 and
porting the updates into the cross architecture files for
5.14.2.</p>

<p style="margin-top: 1em">perl-cross-staging does support
attempting to stage a cross build but this has not been
tested. Please report success or failure.</p>

<p style="margin-top: 1em">UPSTREAM SUPPORT <br>
Note that work is ongoing to get perl cross-building
upstream and this is not complete. perl-cross-staging will
need changes once this work is complete. The aim is to make
it <br>
easier to obtain the configuration value cache for
architectures where real hardware or an emulation model can
be accessed over a network. This work takes place at <br>

https://github.com/codehelp/perl/tree/jrobinson/configure-for-cross
which is intermittently pulled into the main cross-configure
branch at <br>

https://github.com/castaway/perl/tree/jrobinson/configure-for-cross</p>

<p style="margin-top: 1em">BUGS <br>
Currently perl-cross-staging does not substitute the working
directory for PERL_BUILD_DIR in the .sh scripts - this is
left as one of the manual steps required before including
<br>
the generated files into perl-cross-debian.</p>

<p style="margin-top: 1em">AUTHOR <br>
Neil Williams &lt;codehelp@debian.org&gt; <br>
Wrote this manpage for the Debian system.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2012 Neil Williams</p>

<p style="margin-top: 1em">This manual page was written for
the Debian system (and may be used by others).</p>

<p style="margin-top: 1em">Permission is granted to copy,
distribute and/or modify this document under the terms of
the GNU General Public License, Version 2 or (at your
option) any later version published <br>
by the Free Software Foundation.</p>

<p style="margin-top: 1em">On Debian systems, the complete
text of the GNU General Public License can be found in
/usr/share/common-licenses/GPL.</p>

<p style="margin-top: 1em">perl-cross-staging 05/19/2013
PERL-CROSS-STAGING(1)</p>
<hr>
</body>
</html>
