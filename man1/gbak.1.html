<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GBAK(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GBAK(1)</td>
    <td class="head-vol">Firebird documentation</td>
    <td class="head-rtitle">GBAK(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
gbak -- backup /restore Firebird database
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>gbak</b> -b [<i>backup option</i>...] [<i>common option</i>...] <i>source</i>
  <i>target</i>
<div class="Pp"></div>
<b>gbak</b> -c|-r [<i>restore option</i>...] [<i>common option</i>...]
  <i>source</i> <i>target</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>gbak</b> is the tool for managing Firebird database logical backup and
  restore.
<div class="Pp"></div>
In backup mode <i>source</i> is the path to an existing database and
  <i>target</i> is the backup file name. If <i>target</i> is &quot;stdout&quot;,
  the backup is sent to the standard output.
<div class="Pp"></div>
In restore mode <i>source</i> is an existing backup file and <i>target</i> is
  the path to a firebird database. If <i>source</i> is &quot;stdin&quot;, the
  backup data is expected on the standard input.
<h1 class="Sh" title="Sh" id="COMMON_OPTIONS"><a class="selflink" href="#COMMON_OPTIONS">COMMON
  OPTIONS</a></h1>
Most options can be abbreviated. Below are given the shortest abbreviations as
  well as the full versions.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-user</b> <i>string</i></dt>
  <dd class="It-tag">User name to use when connecting to the database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ro</b> <i>string</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-role</b> <i>string</i></dt>
  <dd class="It-tag">SQL role to use when connecting to theh database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pas</b> <i>string</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-password</b> <i>string</i></dt>
  <dd class="It-tag">Password to use when connecting to the database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-se</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-service</b></dt>
  <dd class="It-tag">Use services manager when talking to the database.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-verify</b></dt>
  <dd class="It-tag">Report each action.
    <div style="height: 1.00em;">&#x00A0;</div>
    Displays verbose information about what metadata is being processed, what
      table is being backed up/restored and how many records are processed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y</b> <i>string</i></dt>
  <dd class="It-tag">Redirects status/error messages to the given path.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b></dt>
  <dd class="It-tag">Prints full program version number before doing anything
      else. Prints server and database version information after connecting to
      the database.</dd>
</dl>
<h1 class="Sh" title="Sh" id="BACKUP_OPTIONS"><a class="selflink" href="#BACKUP_OPTIONS">BACKUP
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-backup_database</b></dt>
  <dd class="It-tag">Turns on backup mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-co</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-convert</b></dt>
  <dd class="It-tag">Converts external tables into tables.
    <div style="height: 1.00em;">&#x00A0;</div>
    Normally external tables are ignored during backup and restore. With the
      <b>-convert</b> option external tables are included in the backup as any
      other regular table. When such a backup is restored, these previously
      external tables are created as regular tables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fa</b> <i>number</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-factor</b> <i>number</i></dt>
  <dd class="It-tag">Blocking factor. Output is written in block of
      <i>number</i> bytes. Useful when backing up to a tape.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-garbage_collect</b></dt>
  <dd class="It-tag">Inhibits garbage collection.
    <div style="height: 1.00em;">&#x00A0;</div>
    Normally Firebird runs a garbage collector when reading through the tables.
      Since the backup process reads all the tables, this forces garbage
      collection of the whole database. Using this switch speeds up the backup
      process and also can help in some cases of backing up damaged
    databases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ig</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ignore</b></dt>
  <dd class="It-tag">Ignores records with bad checksums.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option should be used only when backing up damaged databases.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-limbo</b></dt>
  <dd class="It-tag">Ignores transactions in limbo.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-metadata_only</b></dt>
  <dd class="It-tag">Backs up metadata only. No table content is included in the
      backup.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nt</b></dt>
  <dd class="It-tag">Uses non-transportable backup format.
    <div style="height: 1.00em;">&#x00A0;</div>
    Non-transportable backups can be restored only on machines using the same
      byte order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-old_descriptions</b></dt>
  <dd class="It-tag">Saves old-style metadata descriptions.</dd>
</dl>
<h1 class="Sh" title="Sh" id="RESTORE_OPTIONS"><a class="selflink" href="#RESTORE_OPTIONS">RESTORE
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-create</b></dt>
  <dd class="It-tag">Turns on restore mode.
    <div style="height: 1.00em;">&#x00A0;</div>
     <i>target</i> database will be created and must not exist.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b> [<b>o</b>]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-recreate_database</b> [<b>overwrite</b>]</dt>
  <dd class="It-tag">Like <b>-create_database</b>, but by adding
      &quot;overwrite&quot; any existing database is overwritten.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-rep</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-replace_database</b></dt>
  <dd class="It-tag">Turns on restore mode. Target database is overwritten if it
      exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bu</b> <i>number</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-buffers</b> <i>number</i></dt>
  <dd class="It-tag">When creating target database, ignore information about
      database buffers stored in the backup and use specified number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-expand</b></dt>
  <dd class="It-tag">Normally, Firebird uses RLE compression for strings when
      storing them on disk. This option turns this compression off.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-inactive</b></dt>
  <dd class="It-tag">Restore indexes in inactive state. This can be used to
      restore a backup, containing data inconsistent with foreign key/unique
      constraints.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that since version 3.0 gbak leaves any problematic indices in inactive
      state automatically.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-kill</b></dt>
  <dd class="It-tag">Does not restore database shadow files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mo</b> <i>access</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-mode</b> <i>access</i></dt>
  <dd class="It-tag">Restores the database with given <i>access</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    Valid values for <i>access</i> are &quot;read_only&quot; and
      &quot;read_write&quot;. The default is to restore the database with its
      original access mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no_validity</b></dt>
  <dd class="It-tag">Restores the database without its validity constraints.
      This includes foreign key, unique and check constraints. Useful for
      restoring a backup, containing inconsistent data.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-one_at_a_time</b></dt>
  <dd class="It-tag">Commits restoring transaction after each table.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b> <i>number</i></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-page_size</b> <i>number</i></dt>
  <dd class="It-tag">Override page size stored in the backup. Valid values are
      1024, 2048, 4096, 8192, 16384 and 32768.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-use_</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-use_all_space</b></dt>
  <dd class="It-tag">Normally, Fireburd reserves some space on each data page
      for further use. This reserved space is used for newly inserted data and
      for keeping older versions of the data. Having space reserved for this
      purpose &quot;near&quot; to the data speeds up modifications. If the
      database will be used mainly for read operations, specifying this option
      will save disk space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fix_fss_metadata</b> <i>string</i></dt>
  <dd class="It-tag">When restoring metadata, in case it is not valid UTF8, try
      to convert it from the specified character set. Useful when table
      descriptions are given in some national non-UTF8 encoding, which was
      possible with Firebird before version 2.5.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fix_fss_data</b> <i>string</i></dt>
  <dd class="It-tag">When restoring table data, in case a column defined with
      UNICODE_FSS character set contains no valid UTF8 (which was possible with
      versions of Firebird prior to 2.5), try to convert the data from the
      specified character set.</dd>
</dl>
<h2 class="Ss" title="Ss" id="RESTORING_TO_MULTIPLE-FILE_DATABASE"><a class="selflink" href="#RESTORING_TO_MULTIPLE-FILE_DATABASE">RESTORING
  TO MULTIPLE-FILE DATABASE</a></h2>
When the <i>target</i> argument is in the form <i>file_1</i> <i>pages_1</i> ...
  <i>file_N</i>, the restored database is written in several files with
  <i>file_i</i> not bigger than <i>pages_i</i> pages. This may be useful if the
  file system that holds the database file can't handle files above certain
  size.
<div class="Pp"></div>
<b>Note 1</b>: the file size limit is in <b>pages</b>.
<div class="Pp"></div>
<b>Note 1</b>: there is no limit on the size of the last file.
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ISC_USER</b></dt>
  <dd class="It-tag">Default value for the -user option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ISC_ROLE</b></dt>
  <dd class="It-tag">Default value for the -role option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ISC_PASSWORD</b></dt>
  <dd class="It-tag">Default value for the -password option.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Backup_a_database_into_a_compressed_format"><a class="selflink" href="#Backup_a_database_into_a_compressed_format">Backup
  a database into a compressed format</a></h2>
gbak -b srv:/database.fdb stdout | gzip &gt; database.fbk.gz
<h2 class="Ss" title="Ss" id="Restore_a_database_from_a_compressed_backup"><a class="selflink" href="#Restore_a_database_from_a_compressed_backup">Restore
  a database from a compressed backup</a></h2>
zcat database.fbk.gz | gbak -c stdin srv:/new-database.fdb
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>isql-fb</i>(1), <i>gfix</i>(1), <i>fbstat</i>(1).
<div class="Pp"></div>
Additional documentation about Firebird can be found on the Firebird Project
  website, &lt;http://www.firebirdsql.org&gt;.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
This manual page was written by Damyan Ivanov dmn@debian.org for the Debian
  project. Permission is granted to use this document, with or without
  modifications, provided that this notice is retained. If we meet some day, and
  you think this stuff is worth it, you can buy me a beer in return.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-01-14</td>
    <td class="foot-os">Firebird 3.0</td>
  </tr>
</table>
</body>
</html>
