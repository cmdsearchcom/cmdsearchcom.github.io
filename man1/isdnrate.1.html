<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ISDNRATE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ISDNRATE(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">ISDNRATE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
isdnrate - Print telephone rates and various info from rate-files(5).
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>isdnrate -a -b</b><i>best</i><b> -d</b><i>day</i><b> -f</b><i>from</i><b>
  -h</b><i>hour</i><b> -l</b><i>len</i> <b>-o</b> <b>-p</b><i>provs</i><b>
  -r</b> <i>v<i>NN</i></i> <b>-s</b> <b>-t</b><i>takt</i><b>
  -v</b><i>verbose</i><b> -x</b><i>exclude</i> <b> -C -D</b><i>det</i><b>
  -G</b><i>data</i><b> -H -L -N -O</b><i>socketfile</i><b> -P</b><i>piddir</i>
  <b> -S</b><i>sort</i><b> -T -U -V -X</b><i>explain</i> <b>-Z</b> <b>NUMBER
  ...</b>
<div class="Pp"></div>
All options are optional.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>isdnrate</b> program prints various information from rate-files(5). Its
  main purpose is the calculation of telephone rates from your location to an
  arbitrary destination at a certain time and of a certain length for all the
  providers in a rate-file.
<h2 class="Ss" title="Ss"><b>NUMBER</b></h2>
A telephone number may be
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>1234</b> a local area number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>01234</b> a different area in your country</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>+12345</b> a foreign country</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>China</b> text for a foreign country</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>Paris</b> a town</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>US</b> a code as defined in <i>country.dat</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>Internet</b> a Service name (if option <b>-s</b> is also
      given).</dd>
</dl>
<div class="Pp"></div>
Note that currently only city names in AT, DE and NL are supported plus some
  international capitals.
<div>&#x00A0;</div>
Note also, spaces in country- or service names may be given as underscores.
<h2 class="Ss" title="Ss"><b>OPTIONS</b></h2>
<b>-a</b> Show old and newer rates. Default actual only.
<div class="Pp"></div>
<b>-b</b><i>best</i> Print only <i>best</i> providers. Default is all.
<div class="Pp"></div>
<b>-c</b><i>rateconf</i> Use <i>rateconf</i> as provider selection file and
  ignore setting in <i>isdn.conf</i>.
<div class="Pp"></div>
<b>-d</b><i>day</i> Calc rates for <i>day</i>. <i>day</i> can be one of
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><i>dd</i> day of current month
    <div>&#x00A0;</div>
    <i>dd.mm</i> day month
    <div>&#x00A0;</div>
    <i>dd.mm.yy</i>[<i>yy</i>] day, month, year
    <div>&#x00A0;</div>
    <i>W</i> Weekday
    <div>&#x00A0;</div>
    <i>N</i> Weekday - night
    <div>&#x00A0;</div>
    <i>E</i> Weekend</dd>
</dl>
<div class="Pp"></div>
Default is now.
<div class="Pp"></div>
<b>-f</b><i>from</i> Callers location. Default is from <i>isdn.conf</i>.
<div class="Pp"></div>
<b>-h</b><i>hour</i> Time <i>hh</i>[<i>:mm</i>[<i>:ss</i>]] of call. Default is
  now.
<div class="Pp"></div>
<b>-i</b><i>ratefile</i> Use <i>ratefile</i> (usually rate-CC.dat) as source for
  telephone fees and ignore setting in <i>isdn.conf</i>.
<div class="Pp"></div>
<b>-l</b><i>len</i> Length of call in seconds. Default is 153 seconds.
<div class="Pp"></div>
<b>-o</b> Show only booked providers. These are providers, which are listed in
  <i>rate.conf</i>.
<div class="Pp"></div>
<i><b>-p</b> provider</i>[<i>,provider...</i>] Print only info for given
  <i>provider</i>(s). <i>provider</i> is the provider number, without the
  leading VBN, or <i>provider_variant</i> if there are more variations, or
  <i>B</i> for business providers.
<div class="Pp"></div>
<b>-r</b>v<i>NN</i> Show only providers whose VBN begins with <i>NN</i>. The VBN
  is also known as provider prefix consisting of VBN and provider number.
<div class="Pp"></div>
<b>-s</b> Consider <b>NUMBER</b> as the name of a service and print all numbers
  / providers, which supply this service.
<div class="Pp"></div>
<b>-t</b><i>takt</i> Print only providers, which have calculation impulses
  smaller or equal to <i>takt</i>. Default is 9999.
<div class="Pp"></div>
<b>-v</b><i>verbose</i> Set <i>verbose</i> level.
<div class="Pp"></div>
<i><b>-x</b> provider</i>[<i>,provider...</i>] Exclude these <i>provider</i>(s).
<h2 class="Ss" title="Ss"><b>DISPLAY AND RUN OPTIONS</b></h2>
<b>-C</b> Connect to a running isdnrate daemon. This avoids long start-up times.
<div class="Pp"></div>
<b>-D</b> Start as a daemon, waiting for connections from a client. The socket
  <i>/tmp/isdnrate</i> is created, which clients can connect to.
<div class="Pp"></div>
<b>-D2</b> Start as a daemon and go background.
<div class="Pp"></div>
<b>-CD3</b> Stop a running daemon.
<div class="Pp"></div>
<b>-G</b><i>n</i> Print raw data for connection. <i>n</i> may be currently
  97,98,99.
<div class="Pp"></div>
<b>-H</b> Print a header.
<div class="Pp"></div>
<b>-L</b> Print a semicolon separated list of
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">vbn ; providername ; zone ; day ; time ; currency ; charge
      ; basicprice ; price ; duration ; charge/min ; takt ; minimum price</dd>
</dl>
<div class="Pp"></div>
<b>-N</b> Show info about following numbers. If no provider is given, the
  preselected provider is used.
<div class="Pp"></div>
<b>-O</b><i>socketfile</i> Write socket to given filename on start of daemon.
  Default is <i>tmp/isdnrate</i>.
<div class="Pp"></div>
<b>-P</b><i>piddir</i> Write own PID to <i>piddir/isdnrate.pid</i> on start of
  daemon.
<div class="Pp"></div>
<b>-S</b><i>sort</i> Sort output by <i>sort</i>, which may be
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>v</b> vbn or <b>n</b> provider name. Default is by
      charge.</dd>
</dl>
<div class="Pp"></div>
<b>-T</b> Print a table of charges for daytimes weekday/weekend.
<div class="Pp"></div>
<b>-V</b> Print version info and exit.
<div class="Pp"></div>
<b>-X</b><i>explain</i> Print additional information for charge or from
  rate-file. <i>explain</i> may be
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>1</b> (zone)
    <div>&#x00A0;</div>
    <b>2</b> (charge/min, zone, day, time)
    <div>&#x00A0;</div>
    <b>50</b> International areas
    <div>&#x00A0;</div>
    <b>51</b> National zones
    <div>&#x00A0;</div>
    <b>52</b> Services
    <div>&#x00A0;</div>
    <b>COMMENT</b> Print C:COMMENT: info from rate files.</dd>
</dl>
<div class="Pp"></div>
If <i>-s</i> is given, the number of the service is also listed with <i>-X1</i>
  or <i>-X2</i>.
<div class="Pp"></div>
<b>-Z</b> Print info for LCR
<div>&#x00A0;</div>
e.g. isdnrate -p1 -ZX 19430
<div>&#x00A0;</div>
shows the rate for provider 1 and the cheapest rate to this service.
<div class="Pp"></div>
Note: Various output options may not be used together. Conflicting options will
  produce a warning.
<div>&#x00A0;</div>
Note also: Sort by name or providernumber and <b>-b</b><i>best</i> will bring
  you the first <i>best</i> providers in sorting order, not the cheapest.
<div>&#x00A0;</div>
And finally: Some options like <i>-X50</i>, <i>-X51</i>, <i>-X52</i>, <i>-D</i>,
  <i>-V</i> don't require a telephone <i>NUMBER</i>.
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<i>rate-CC.dat</i>, <i>holiday-CC.dat</i>, <i>dest.gdbm</i>,
  <i>zone-CC-PPP.gdbm</i>, <i>isdn.conf</i>, <i>telrate.cgi</i> and more.
<div>&#x00A0;</div>
Note: The extension of zone- and dest data files depends on configuration.
  Recently <i>.cdb</i> is used.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<i>isdnrate -D2</i>
<div>&#x00A0;</div>
Start the isdnrate daemon.
<div class="Pp"></div>
<i>isdnrate -D2 -P /var/run -O /tmp/isdnr_socket</i>
<div>&#x00A0;</div>
Start the isdnrate daemon, write <i>isdnrate.pid</i> to /var/run and create the
  given socket.
<div class="Pp"></div>
<i>isdnrate -CH -b5 -f01 -l120 Attersee</i>
<div>&#x00A0;</div>
Connect to running daemon, print a header and the best 5 rates from Vienna
  (<i>01</i>) to destination <i>Attersee</i> for a connection length of 2
  Minutes.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<i>isdnrate -CX -p1_2,24 +1</i>
<div>&#x00A0;</div>
Show rates and zones for destination USA for providers <i>1, 2</i> and
  <i>24</i>.
<div class="Pp"></div>
<i>isdnrate -C -l60 -rv010 HAM</i>
<div>&#x00A0;</div>
Show rates for a one minute call to Hamburg (HAM: airport code) and use only
  providers whose vbn begins with 010. So provider A with vbn 01030 is
  displayed, provider B with vbn 0190023 is not.
<div class="Pp"></div>
<i>isdnrate -CX -H -dW -b5 US CA</i>
<div>&#x00A0;</div>
Show a header, rates and zones for destinations USA and Canada for best 5
  providers during workday.
<div class="Pp"></div>
<i>isdnrate -CHoX US</i>
<div>&#x00A0;</div>
Show header, rate and zone for destination USA for booked providers only.
<div class="Pp"></div>
<i>isdnrate -CsX -l60 Internet</i>
<div>&#x00A0;</div>
Show rates and numbers for service <i>Internet</i> for a 1 minute call.
<div class="Pp"></div>
<i>isdnrate -CZ 19430</i>
<div>&#x00A0;</div>
Show rates and the best provider for this (service-)number.
<div class="Pp"></div>
<i>isdnrate -CD3</i>
<div>&#x00A0;</div>
Stop the running isdnrate daemon.
<h1 class="Sh" title="Sh" id="SIGNALS"><a class="selflink" href="#SIGNALS">SIGNALS</a></h1>
A isdnrate daemon restarts (and therefore rereads its configuration) on getting
  a SIGHUP signal.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>rate-files(5)</b>, <b>isdnlog(8)</b>, <b>isdn.conf(5)</b>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Definitely yes. Sometimes more then one daemon can be started, sometimes the
  socket is not removed, when the daemon terminates. if this happens ('socket in
  use'), do a <i>rm /tmp/isdnrate</i> and try again.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Andreas Kool &lt;akool@isdn4linux.de&gt; started this program. Leopold Toetsch
  &lt;lt@toetsch.at&gt; continued the work and brought this man page to you.
  Michael Reinelt &lt;reinelt@eunet.at&gt; did the calculation engine and
  various tools for it.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2004/07/13</td>
    <td class="foot-os">-lt-</td>
  </tr>
</table>
</body>
</html>
