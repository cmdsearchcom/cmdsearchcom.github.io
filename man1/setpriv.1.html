<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:37:25 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SETPRIV(1) User Commands SETPRIV(1)</p>

<p style="margin-top: 1em">NAME <br>
setpriv - run a program with different Linux privilege
settings</p>

<p style="margin-top: 1em">SYNOPSIS <br>
setpriv [options] program [arguments]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Sets or queries various Linux privilege settings that are
inherited across execve(2).</p>

<p style="margin-top: 1em">OPTION <br>
-d, --dump <br>
Dumps current privilege state. Specify more than once to
show extra, mostly useless, information. Incompatible with
all other options.</p>

<p style="margin-top: 1em">--no-new-privs <br>
Sets the no_new_privs bit. With this bit set, execve(2) will
not grant new privileges. For example, the setuid and setgid
bits as well as file capabilities will be dis&acirc; <br>
abled. (Executing binaries with these bits set will still
work, but they will not gain privilege. Certain LSMs,
especially AppArmor, may result in failures to execute <br>
certain programs.) This bit is inherited by child processes
and cannot be unset. See prctl(2) and
Documentation/prctl/no_new_privs.txt in the Linux kernel
source.</p>

<p style="margin-top: 1em">The no_new_privs bit is
supported since Linux 3.5.</p>

<p style="margin-top: 1em">--inh-caps (+|-)cap,... or
--bounding-set (+|-)cap,... <br>
Sets inheritable capabilities or capability bounding set.
See capabilities(7). The argument is a comma-separated list
of +cap and -cap entries, which add or remove an <br>
entry respectively. +all and -all can be used to add or
remove all caps. The set of capabilities starts out as the
current inheritable set for --inh-caps and the current <br>
bounding set for --bounding-set. If you drop something from
the bounding set without also dropping it from the
inheritable set, you are likely to become confused. Do not
<br>
do that.</p>

<p style="margin-top: 1em">--list-caps <br>
Lists all known capabilities. Must be specified alone.</p>

<p style="margin-top: 1em">--ruid uid, --euid uid, --reuid
uid <br>
Sets the real, effective, or both uids.</p>

<p style="margin-top: 1em">Setting uid or gid does not
change capabilities, although the exec call at the end might
change capabilities. This means that, if you are root, you
probably want to do <br>
something like:</p>

<p style="margin-top: 1em">--reuid=1000 --regid=1000
--caps=-all</p>

<p style="margin-top: 1em">--rgid gid, --egid gid, --regid
gid <br>
Sets the real, effective, or both gids.</p>

<p style="margin-top: 1em">For safety, you must specify one
of --keep-groups, --clear-groups, or --groups if you set any
primary gid.</p>

<p style="margin-top: 1em">--clear-groups <br>
Clears supplementary groups.</p>

<p style="margin-top: 1em">--keep-groups <br>
Preserves supplementary groups. Only useful in conjunction
with --rgid, --egid, or --regid.</p>

<p style="margin-top: 1em">--groups group,... <br>
Sets supplementary groups.</p>

<p style="margin-top: 1em">--securebits (+|-)securebit,...
<br>
Sets or clears securebits. The valid securebits are noroot,
noroot_locked, no_setuid_fixup, no_setuid_fixup_locked, and
keep_caps_locked. keep_caps is cleared by <br>
execve(2) and is therefore not allowed.</p>

<p style="margin-top: 1em">--selinux-label label <br>
Requests a particular SELinux transition (using a transition
on exec, not dyntrans). This will fail and cause setpriv(1)
to abort if SELinux is not in use, and the tran&acirc; <br>
sition may be ignored or cause execve(2) to fail at
SELinux&rsquo;s whim. (In particular, this is unlikely to
work in conjunction with no_new_privs.) This is similar to
run&acirc; <br>
con(1).</p>

<p style="margin-top: 1em">--apparmor-profile profile <br>
Requests a particular AppArmor profile (using a transition
on exec). This will fail and cause setpriv(1) to abort if
AppArmor is not in use, and the transition may be <br>
ignored or cause execve(2) to fail at AppArmor&rsquo;s
whim.</p>

<p style="margin-top: 1em">-V, --version <br>
Display version information and exit.</p>

<p style="margin-top: 1em">-h, --help <br>
Display help and exit.</p>

<p style="margin-top: 1em">NOTES <br>
If applying any specified option fails, program will not be
run and setpriv will return with exit code 127.</p>

<p style="margin-top: 1em">Be careful with this tool -- it
may have unexpected security consequences. For example,
setting no_new_privs and then execing a program that is
SELinux-confined (as this tool <br>
would do) may prevent the SELinux restrictions from taking
effect.</p>

<p style="margin-top: 1em">SEE ALSO <br>
prctl(2), capability(7)</p>

<p style="margin-top: 1em">AUTHOR <br>
Andy Lutomirski
&acirc;&uml;luto@amacapital.net&acirc;&copy;</p>

<p style="margin-top: 1em">AVAILABILITY <br>
The setpriv command is part of the util-linux package and is
available from Linux Kernel Archive
&acirc;&uml;ftp://ftp.kernel.org/pub/linux/utils/util-linux/&acirc;&copy;.</p>

<p style="margin-top: 1em">util-linux January 2013
SETPRIV(1)</p>
<hr>
</body>
</html>
