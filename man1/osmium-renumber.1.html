<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OSMIUM-RENUMBER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OSMIUM-RENUMBER(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">OSMIUM-RENUMBER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
osmium-renumber - renumber object IDs
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>osmium renumber</b> [<i>OPTIONS</i>] <i>OSM-DATA-FILE</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The objects (nodes, ways, and relations) in an OSM file often have very large
  IDs. This can make some kinds of postprocessing difficult. This command will
  renumber all objects using IDs starting at 1. Referential integrity will be
  kept. All objects which appear in the source file will be in the same order in
  the output file. IDs of objects which are not in the file but referenced from
  ways or relations are not guaranteed to be in the correct order.
<div class="Pp"></div>
This command expects the input file to be ordered in the usual way: First nodes
  in order of ID, then ways in order of ID, then relations in order of ID. The
  input file will be read twice, so it will not work with STDIN.
<div class="Pp"></div>
Currently this command can not renumber negative IDs.
<div class="Pp"></div>
You must never upload the data generated by this command to OSM! This would
  really confuse the OSM database because it knows the objects under different
  IDs.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i, --index-directory=DIR</b></dt>
  <dd class="It-tag">Directory where the index files for mapping between old and
      news IDs are read from and written to, respectively. Use this if you want
      to map IDs in several OSM files. Without this option, the indexes are not
      read from or written to disk. The directory must exist. Use '.' for the
      current directory. The files written will be named nodes.idx, ways.idx,
      and relations.idx. See also the <b>INDEX FILES</b> section below.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t, --object-type=TYPE</b></dt>
  <dd class="It-tag">Renumber only objects of given type (<i>node</i>,
      <i>way</i>, or <i>relation</i>). By default all objects of all types are
      renumbered. This option can be given multiple times.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="COMMON_OPTIONS"><a class="selflink" href="#COMMON_OPTIONS">COMMON
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show usage help.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Set verbose mode. The program will output information about
      what it is doing to <i>stderr</i>.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--progress</b></dt>
  <dd class="It-tag">Show progress bar. Usually a progress bar is only displayed
      if STDERR is detected to be a TTY. With this option a progress bar is
      always shown. Note that a progress bar will never be shown when reading
      from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress</b></dt>
  <dd class="It-tag">Do not show progress bar. Usually a progress bar is
      displayed if STDERR is detected to be a TTY. With this option the progress
      bar is suppressed. Note that a progress bar will never be shown when
      reading from STDIN or a pipe.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="INPUT_OPTIONS"><a class="selflink" href="#INPUT_OPTIONS">INPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F, --input-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the input file(s). Can be used to set the
      input format if it can't be autodetected from the file name(s). This will
      set the format for all input files, there is no way to set the format for
      some input files only. See <b>osmium-file-formats</b>(5) or the libosmium
      manual for details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="OUTPUT_OPTIONS"><a class="selflink" href="#OUTPUT_OPTIONS">OUTPUT
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --output-format=FORMAT</b></dt>
  <dd class="It-tag">The format of the output file. Can be used to set the
      output file format if it can't be autodetected from the output file name.
      See <b>osmium-file-formats</b>(5) or the libosmium manual for
    details.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--fsync</b></dt>
  <dd class="It-tag">Call fsync after writing the output file to force flushing
      buffers to disk.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generator=NAME</b></dt>
  <dd class="It-tag">The name and version of the program generating the output
      file. It will be added to the header of the output file. Default is &quot;
      <i>osmium/</i>&quot; and the version of osmium.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o, --output=FILE</b></dt>
  <dd class="It-tag">Name of the output file. Default is '-' (STDOUT).</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O, --overwrite</b></dt>
  <dd class="It-tag">Allow an existing output file to be overwritten. Normally
      <b>osmium</b> will refuse to write over an existing file.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output-header=OPTION</b></dt>
  <dd class="It-tag">Add output header option. This option can be given several
      times. See the <i>libosmium manual</i> for a list of allowed header
      options.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="INDEX_FILES"><a class="selflink" href="#INDEX_FILES">INDEX
  FILES</a></h1>
When the -i or --index-directory option is used, index files named nodes.idx,
  ways.idx, and relations.idx are read from and written to the given directory.
  This can be used to force consistent mapping over several invocations of
  osmium&#x00A0;renumber, for instance when you want to remap an OSM data file
  and a corresponding OSM change file.
<div class="Pp"></div>
The index files are in binary format, but you can use the following command line
  to convert them into something readable:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
od&#x00A0;-An&#x00A0;-td8&#x00A0;-w8&#x00A0;TYPE.idx&#x00A0;|&#x00A0;cat&#x00A0;-n
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<b>osmium renumber</b> exits with exit code
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b></dt>
  <dd class="It-tag">if everything went alright,</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">if there was an error processing the data, or</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">if there was a problem with the command line
    arguments.</dd>
</dl>
<div style="margin-left: 5.00ex;"></div>
<h1 class="Sh" title="Sh" id="MEMORY_USAGE"><a class="selflink" href="#MEMORY_USAGE">MEMORY
  USAGE</a></h1>
<b>osmium renumber</b> needs quite a bit of main memory to keep the mapping
  between old and new IDs. It is intended for small to medium sized extracts.
  You will need more than 32 GB RAM to run this on a full planet.
<div class="Pp"></div>
Memory use is at least 8 bytes per node, way, and relation ID in the input file.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Renumber a PBF file and output to a compressed XML file:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;renumber&#x00A0;-o&#x00A0;ch.osm.bz2&#x00A0;germany.osm.pbf
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
Renumbering Germany currently (spring 2016) takes less than three minutes and
  needs about 3 GB RAM.
<div class="Pp"></div>
Renumber an OSM file storing the indexes on disk:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;renumber&#x00A0;-i.&#x00A0;-o&#x00A0;renumbered.osm&#x00A0;data.osm
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
then rewrite a change file, too:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">
    <pre>
osmium&#x00A0;renumber&#x00A0;-i.&#x00A0;-o&#x00A0;renumbered.osc&#x00A0;changes.osc
    </pre>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>osmium</b>(1), <b>osmium-file-formats</b>(5)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Osmium website (http://osmcode.org/osmium-tool/)</dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2013-2017 Jochen Topf &lt;jochen@topf.org&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
License GPLv3+: GNU GPL version 3 or later
  &lt;https://gnu.org/licenses/gpl.html&gt;. This is free software: you are free
  to change and redistribute it. There is NO WARRANTY, to the extent permitted
  by law.
<h1 class="Sh" title="Sh" id="CONTACT"><a class="selflink" href="#CONTACT">CONTACT</a></h1>
If you have any questions or want to report a bug, please go to
  http://osmcode.org/contact.html
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Jochen Topf &lt;jochen@topf.org&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.6.1</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
