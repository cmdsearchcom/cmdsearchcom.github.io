<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:37 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MYSQLAUDITADMIN MySQL Utilities MYSQLAUDITADMIN</p>

<p style="margin-top: 1em">NAME <br>
mysqlauditadmin - Maintain the audit log</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mysqlauditadmin [OPTIONS]... mysqlauditadmin [OPTIONS]...
[COMMAND]mysqlauditadmin l=user:pass@host:port [OPTIONS]...
[COMMAND[--value=VALUE]]mysqlauditadmin --file-stats <br>
--audit-log-name=FULL_PATHmysqlauditadmin <br>
copy <br>
--audit-log-name=FULL_PATH <br>
--copy-to=DESTINATION <br>
[--remote-login=user:host]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility allow you to maintain the audit log[1],
allowing you to monitor the audit log file growth and
control its rotation. Rotation refers to the action of
replacing the <br>
current audit log file by a new one for continuous use,
renaming (with a timestamp extension) and copying the
previously used audit log file to a defined location.</p>

<p style="margin-top: 1em">This utility allows you to view
and modify a subset of audit log control variables, display
the audit log file status, perform on-demand rotation of the
log file, and copy files <br>
to other locations. These features enable you to easily
monitor the audit log file growth and control its rotation
(automatically based on the defined file size threshold, or
<br>
manually by a on-demand command).</p>

<p style="margin-top: 1em">The available actions include
the following:</p>

<p style="margin-top: 1em">&Acirc;&middot; copy</p>

<p style="margin-top: 1em">This command copies the audit
log specified by --audit-log-name to the destination path
specified by --copy-to. The --remote-login option can be
used to copy log files from a <br>
remote location. Note: the destination path must be locally
accessible by the current user.</p>

<p style="margin-top: 1em">&Acirc;&middot; policy</p>

<p style="margin-top: 1em">The policy command is used to
change the audit logging policy. The accepted values are the
following, which are set using the --value option.</p>

<p style="margin-top: 1em">Note <br>
The --server option is also required to execute this
command.</p>

<p style="margin-top: 1em">Starting from MySQL server
5.6.20 and 5.7.5, the value is read only for the
audit_log_policy variable. Now the policy results from the
combination of two new variables: <br>
audit_log_connection_policy and audit_log_statement_policy.
This change is supported starting from MySQL Utilities
1.5.2.</p>

<p style="margin-top: 1em">&Acirc;&middot; ALL: log all
events</p>

<p style="margin-top: 1em">&Acirc;&middot; NONE: log
nothing</p>

<p style="margin-top: 1em">&Acirc;&middot; LOGINS: only log
login events</p>

<p style="margin-top: 1em">&Acirc;&middot; QUERIES: only
log query events</p>

<p style="margin-top: 1em">&Acirc;&middot; DEFAULT: sets
the default log policy</p>

<p style="margin-top: 1em">&Acirc;&middot;
rotate_on_size</p>

<p style="margin-top: 1em">This command sets the file size
threshold for automatic rotation of the audit log (the
audit_log_rotate_on_size variable). The value is set using
the --value option, and must <br>
be in the range (0, 4294967295). This command also requires
the --server option to be specified. Note: if the variable
is set with a value that is not a multiple of 4096, <br>
then it is truncated to the nearest multiple.</p>

<p style="margin-top: 1em">&Acirc;&middot; rotate</p>

<p style="margin-top: 1em">This command is used to perform
an on-demand audit log rotation, and only requires the
--server option to be passed. Note: this command has no
effect if the audit log file <br>
size is smaller than 4096, which is the minimum value
allowed that is greater than 0 for the
audit_log_rotate_on_size variable). <br>
OPTIONS.PP mysqlauditadmin accepts the following
command-line options:</p>

<p style="margin-top: 1em">&Acirc;&middot;
--audit-log-name=&lt;AUDIT_LOG_FILE&gt;</p>

<p style="margin-top: 1em">Full path and file name for the
audit log file. Used by the --file-stats option, and the
copy command.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--copy-to=&lt;COPY_DESTINATION&gt;</p>

<p style="margin-top: 1em">The location to copy the
specified audit log file. The path must be locally
accessible for the current user.</p>

<p style="margin-top: 1em">&Acirc;&middot; --file-stats</p>

<p style="margin-top: 1em">Display the audit log file
statistics.</p>

<p style="margin-top: 1em">&Acirc;&middot; --help</p>

<p style="margin-top: 1em">Display a help message and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot; --license</p>

<p style="margin-top: 1em">Display license information and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--remote-login=&lt;REMOTE_LOGIN&gt;</p>

<p style="margin-top: 1em">User name and host to be used
for the remote login, for copying log files. It is defined
using the following format: &lt;user&gt;:&lt;host or IP&gt;.
Usage will prompt for the password.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--server=&lt;SERVER&gt;</p>

<p style="margin-top: 1em">Connection information for the
server.</p>

<p style="margin-top: 1em">To connect to a server, it is
necessary to specify connection parameters such as user
name, host name, password, and either a port or socket.
MySQL Utilities provides a <br>
number of ways to provide this information. All of the
methods require specifying your choice via a command-line
option such as --server, --master, --slave, etc. The methods
<br>
include the following in order of most secure to least
secure.</p>

<p style="margin-top: 1em">&Acirc;&middot; Use login-paths
from your .mylogin.cnf file (encrypted, not visible).
Example :
&lt;login-path&gt;[:&lt;port&gt;][:&lt;socket&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot; Use a
configuration file (unencrypted, not visible) Note:
available in release-1.5.0. Example :
&lt;configuration-file-path&gt;[:&lt;section&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot; Specify the data
on the command-line (unencrypted, visible). Example :
&lt;user&gt;[:&lt;passwd&gt;]@&lt;host&gt;[:&lt;port&gt;][:&lt;socket&gt;]</p>

<p style="margin-top: 1em">&Acirc;&middot;
--show-options</p>

<p style="margin-top: 1em">Display the audit log system
variables.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-ca</p>

<p style="margin-top: 1em">The path to a file that contains
a list of trusted SSL CAs.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-cert</p>

<p style="margin-top: 1em">The name of the SSL certificate
file to use for establishing a secure connection.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl-cert</p>

<p style="margin-top: 1em">The name of the SSL key file to
use for establishing a secure connection.</p>

<p style="margin-top: 1em">&Acirc;&middot; --ssl</p>

<p style="margin-top: 1em">Specifies if the server
connection requires use of SSL. If an encrypted connection
cannot be established, the connection attempt fails. Default
setting is 0 (SSL not <br>
required).</p>

<p style="margin-top: 1em">&Acirc;&middot;
--value=&lt;VALUE&gt;</p>

<p style="margin-top: 1em">Value used to set variables
based on the specified commands, such as policy and
rotate_on_size.</p>

<p style="margin-top: 1em">&Acirc;&middot; --verbose,
-v</p>

<p style="margin-top: 1em">Specify how much information to
display. Use this option multiple times to increase the
amount of information. For example, -v = verbose, -vv = more
verbose, -vvv = debug.</p>

<p style="margin-top: 1em">&Acirc;&middot; --version</p>

<p style="margin-top: 1em">Display version information and
exit. <br>
NOTES.PP This utility can only be applied to servers with
the audit log plugin enabled[2]. And the audit log plugin is
available as of MySQL Server versions 5.5.28 and 5.6.10.</p>

<p style="margin-top: 1em">This utility requires Python
version 2.6 or higher, but does not support Python 3.</p>

<p style="margin-top: 1em">The path to the MySQL client
tools should be included in the PATH environment variable in
order to use the authentication mechanism with login-paths.
This will allow the utility <br>
to use the my_print_defaults tools, which is required to
read the login-path values from the login configuration file
(.mylogin.cnf). This feature exists as of MySQL Server <br>
5.6.6, see mysql_config_editor &acirc; MySQL Configuration
Utility[3].</p>

<p style="margin-top: 1em">Changes to MySQL Enterprise
Audit Log Plugin are not documented in this documentation,
so your output might be different than the examples here.
For example, a new (or removed) <br>
MySQL Enterprise Audit Log Plugin option might affect the
output. LIMITATIONS.PP The --remote-login option is not
supported on Microsoft Windows platforms. For Microsoft <br>
Windows, use UNC paths and perform a local copy operation,
omitting the <br>
--remote-login option. EXAMPLES.PP To display the audit log
system variables, run the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--show-options --server=root@localhost:3310 <br>
# <br>
# Showing options after command. <br>
# <br>
# Audit Log Variables and Options <br>
# <br>
+------------------------------+---------------+ <br>
| Variable_name | Value | <br>
+------------------------------+---------------+ <br>
| audit_log_buffer_size | 1048576 | <br>
| audit_log_connection_policy | NONE | <br>
| audit_log_current_session | ON | <br>
| audit_log_exclude_accounts | | <br>
| audit_log_file | audit.log | <br>
| audit_log_flush | OFF | <br>
| audit_log_format | OLD | <br>
| audit_log_include_accounts | | <br>
| audit_log_policy | ALL | <br>
| audit_log_rotate_on_size | 0 | <br>
| audit_log_statement_policy | ALL | <br>
| audit_log_strategy | ASYNCHRONOUS | <br>
+------------------------------+---------------+</p>

<p style="margin-top: 1em">To perform a (manual) rotation
of the audit log file, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--server=root@localhost:3310 rotate <br>
# <br>
# Executing ROTATE command. <br>
#</p>

<p style="margin-top: 1em">To display the audit log file
statistics, run the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--file-stats --audit-log-name=../SERVER/data/audit.log <br>

+------------------------------+--------+---------------------------+---------------------------+
<br>
| File | Size | Created | Last Modified | <br>

+------------------------------+--------+---------------------------+---------------------------+
<br>
| audit.log | 3258 | Wed Sep 26 11:07:43 2012 | Wed Sep 26
11:07:43 2012 | <br>
| audit.log.13486539046497235 | 47317 | Wed Sep 26 11:05:04
2012 | Wed Sep 26 11:05:04 2012 | <br>

+------------------------------+--------+---------------------------+---------------------------+</p>

<p style="margin-top: 1em">To change the audit log policy
to log only query events, and show the system variables
before and after the execution of the policy command, use
the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--show-options --server=root@localhost:3310 policy
--value=QUERIES <br>
# <br>
# Showing options before command. <br>
# <br>
# Audit Log Variables and Options <br>
# <br>
+------------------------------+---------------+ <br>
| Variable_name | Value | <br>
+------------------------------+---------------+ <br>
| audit_log_buffer_size | 1048576 | <br>
| audit_log_connection_policy | ALL | <br>
| audit_log_current_session | ON | <br>
| audit_log_exclude_accounts | | <br>
| audit_log_file | audit.log | <br>
| audit_log_flush | OFF | <br>
| audit_log_format | OLD | <br>
| audit_log_include_accounts | | <br>
| audit_log_policy | ALL | <br>
| audit_log_rotate_on_size | 0 | <br>
| audit_log_statement_policy | ALL | <br>
| audit_log_strategy | ASYNCHRONOUS | <br>
+------------------------------+---------------+ <br>
# <br>
# Executing POLICY command. <br>
# <br>
# <br>
# Showing options after command. <br>
# <br>
# Audit Log Variables and Options <br>
# <br>
+------------------------------+---------------+ <br>
| Variable_name | Value | <br>
+------------------------------+---------------+ <br>
| audit_log_buffer_size | 1048576 | <br>
| audit_log_connection_policy | NONE | <br>
| audit_log_current_session | ON | <br>
| audit_log_exclude_accounts | | <br>
| audit_log_file | audit.log | <br>
| audit_log_flush | OFF | <br>
| audit_log_format | OLD | <br>
| audit_log_include_accounts | | <br>
| audit_log_policy | ALL | <br>
| audit_log_rotate_on_size | 0 | <br>
| audit_log_statement_policy | ALL | <br>
| audit_log_strategy | ASYNCHRONOUS | <br>
+------------------------------+---------------+</p>

<p style="margin-top: 1em">To change the audit log
automatic file rotation size (audit_log_rotate_on_size) to
32535, and show the system variables before and after the
execution of the rotate_on_size <br>
command, use the following command. (Notice that the value
set is actually 28672 because the specified rotate_on_size
value is truncated to a multiple of 4096):</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--show-options --server=root@localhost:3310 rotate_on_size
--value=32535 <br>
# <br>
# Showing options before command. <br>
# <br>
# Audit Log Variables and Options <br>
# <br>
+------------------------------+---------------+ <br>
| Variable_name | Value | <br>
+------------------------------+---------------+ <br>
| audit_log_buffer_size | 1048576 | <br>
| audit_log_connection_policy | ALL | <br>
| audit_log_current_session | ON | <br>
| audit_log_exclude_accounts | | <br>
| audit_log_file | audit.log | <br>
| audit_log_flush | OFF | <br>
| audit_log_format | OLD | <br>
| audit_log_include_accounts | | <br>
| audit_log_policy | ALL | <br>
| audit_log_rotate_on_size | 0 | <br>
| audit_log_statement_policy | ALL | <br>
| audit_log_strategy | ASYNCHRONOUS | <br>
+------------------------------+---------------+ <br>
# <br>
# Executing POLICY command. <br>
# <br>
# <br>
# Showing options after command. <br>
# <br>
# Audit Log Variables and Options <br>
# <br>
+------------------------------+---------------+ <br>
| Variable_name | Value | <br>
+------------------------------+---------------+ <br>
| audit_log_buffer_size | 1048576 | <br>
| audit_log_connection_policy | NONE | <br>
| audit_log_current_session | ON | <br>
| audit_log_exclude_accounts | | <br>
| audit_log_file | audit.log | <br>
| audit_log_flush | OFF | <br>
| audit_log_format | OLD | <br>
| audit_log_include_accounts | | <br>
| audit_log_policy | ALL | <br>
| audit_log_rotate_on_size | 28672 | <br>
| audit_log_statement_policy | ALL | <br>
| audit_log_strategy | ASYNCHRONOUS | <br>
+------------------------------+---------------+</p>

<p style="margin-top: 1em">To perform a copy of a audit log
file to another location, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--audit-log-name=../SERVER/data/audit.log.13486539046497235
copy --copy-to=/BACKUP/Audit_Logs</p>

<p style="margin-top: 1em">To copy a audit log file from a
remote server/location to the current location (user
password will be prompted), use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditadmin
--audit-log-name=audit.log.13486539046497235 copy
--remote-login=user:host --copy-to=.</p>

<p style="margin-top: 1em">PERMISSIONS REQUIRED.PP The user
must have permissions to read the audit log on disk and
write the file to the remove location.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2006, 2015, Oracle and/or its
affiliates. All rights reserved.</p>

<p style="margin-top: 1em">This documentation is free
software; you can redistribute it and/or modify it only
under the terms of the GNU General Public License as
published by the Free Software Foundation; <br>
version 2 of the License.</p>

<p style="margin-top: 1em">This documentation is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with the program; if
not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, <br>
Boston, MA 02110-1301 USA or see
http://www.gnu.org/licenses/.</p>

<p style="margin-top: 1em">NOTES <br>
1. audit log <br>

http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin.html</p>

<p style="margin-top: 1em">2. audit log plugin enabled <br>

http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin-installation.html</p>

<p style="margin-top: 1em">3. mysql_config_editor &acirc;
MySQL Configuration Utility <br>

http://dev.mysql.com/doc/refman/5.6/en/mysql-config-editor.html</p>

<p style="margin-top: 1em">SEE ALSO <br>
For more information, please refer to the MySQL Utilities
and Fabric documentation, which is available online at
http://dev.mysql.com/doc/index-utils-fabric.html</p>

<p style="margin-top: 1em">AUTHOR <br>
Oracle Corporation (http://dev.mysql.com/).</p>

<p style="margin-top: 1em">MySQL 1.5.6 09/15/2015
MYSQLAUDITADMIN</p>
<hr>
</body>
</html>
