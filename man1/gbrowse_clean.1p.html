<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:11:46 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>GBROWSE_CLEAN(1p) User Contributed Perl Documentation
GBROWSE_CLEAN(1p)</p>

<p style="margin-top: 1em">NAME <br>
gbrowse_clean.pl - Clean up sessions and other temporary
gbrowse2 files</p>

<p style="margin-top: 1em">SYNOPSIS <br>
From the command line:</p>

<p style="margin-top: 1em">sudo -u www-data
gbrowse_clean.pl</p>

<p style="margin-top: 1em">Replace &quot;www-data&quot;
with the web server account name on your system.</p>

<p style="margin-top: 1em">To run automatically under cron,
create a crontab file for the web server user that contains
a line like the following:</p>

<p style="margin-top: 1em"># m h dom mon dow command <br>
5 0 * * /usr/bin/gbrowse_clean.pl
&gt;&gt;/var/log/gbrowse2/gbrowse_clean.log</p>

<p style="margin-top: 1em">OPTIONS <br>
-verbose <br>
Report actions verbosely, printing out each session, file
and directory deleted.</p>

<p style="margin-top: 1em">-help <br>
Print a brief help message and exits.</p>

<p style="margin-top: 1em">-man <br>
Prints the manual page and exits.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
GBrowse2 generates a number of temporary files during its
operations. These files include session data, data cache
files, and temporary image files, as well as user upload
data <br>
from custom tracks.</p>

<p style="margin-top: 1em">This script expires these
temporary files, releasing unneeded space. The script honors
the following options from the GBrowse.conf master
configuration file:</p>

<p style="margin-top: 1em">Name Default Description <br>
---- ------- ----------- <br>
exire session 1M How long to keep session data <br>
expire cache 2h How long to keep cache data <br>
expire uploads 6w How long to keep user track data</p>

<p style="margin-top: 1em">Time intervals are indicated
using a count and a unit:</p>

<p style="margin-top: 1em">Suffix Time Unit <br>
------ --------- <br>
s seconds <br>
m minutes <br>
h hours <br>
d days <br>
w weeks <br>
M months <br>
y years</p>

<p style="margin-top: 1em">expire session controls how long
before user session data expires. Once a session expires,
the user&rsquo;s saved settings, such as his preferred data
source, track visibility <br>
settings, and custom track uploads are purged. The
expiration interval is measured since the last time the user
accessed his session, so simply loading a region in the
browser <br>
without changing settings is sufficient to prevent a session
from expiring.</p>

<p style="margin-top: 1em">expire cache controls how long
before cached track data is purged from the system. Caching
for up to a few hours increases performance because users
frequently reload the same <br>
region. Caching for longer periods increases the time
between updating the database and tracks displaying those
changes.</p>

<p style="margin-top: 1em">expire uploads controls how long
to keep user uploaded data for custom tracks on disk. It
makes sense to keep it on disk for as long or longer than
the session. Even if the <br>
user&rsquo;s session expires, he can still get at the
uploaded data if he bookmarked his session or shared the
uploaded track at any point.</p>

<p style="margin-top: 1em">This script should be run
periodically, ideally under cron. Once per day should be
adequate for most uses, but heavily-used sites may wish to
run the script more frequently. It <br>
is important to run the script under the same user account
as the web server; otherwise the script will be unable to
delete the files created by the web server user during <br>
gbrowse execution. Do not run this script as root.</p>

<p style="margin-top: 1em">AUTHOR <br>
Lincoln D. Stein &lt;lincoln.stein@gmail.com&gt; Copyright
2009 Ontario Institute for Cancer Research</p>

<p style="margin-top: 1em">This script is available under
either the GNU General Public License or the Perl Artistic
License version 2.0. See LICENSE in the GBrowse source code
distribution for details.</p>

<p style="margin-top: 1em">SEE ALSO <br>
&lt;http://gmod.org/wiki/GBrowse_2.0_HOWTO&gt;</p>

<p style="margin-top: 1em">perl v5.24.1 2017-04-12
GBROWSE_CLEAN(1p)</p>
<hr>
</body>
</html>
