<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:50:11 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>arename(1) User Contributed Perl Documentation
arename(1)</p>

<p style="margin-top: 1em">NAME <br>
arename - automatically rename audio files by tagging
information</p>

<p style="margin-top: 1em">SYNOPSIS <br>
arename [OPTION(s)] FILE(s)...</p>

<p style="margin-top: 1em">OPTIONS AND ARGUMENTS <br>
--ambiguous-use-first <br>
Sets the ambiguoususefirst option. See below for
details.</p>

<p style="margin-top: 1em">--compare-versions <br>
Prints the version of the arename script and the version of
the Perl module, that contains most of the code. These
versions should be the same. If not, that would <br>
indicate a possibly broken installation.</p>

<p style="margin-top: 1em">--copy (short option: -c) <br>
Copy files instead of renaming (moving). This can be useful
to copy tracks from your audio archive to a portable device
for example.</p>

<p style="margin-top: 1em">--debug Enable debugging output.
This actually sets &lsquo;verbosity&rsquo; to 10000. This
output option will cause very noisy output. You probably
want something less verbose, like <br>
&lsquo;--verbosity 20&rsquo;.</p>

<p style="margin-top: 1em">--disable-hooks (short option:
-H) <br>
Do not make use of hooks of any sort (neither global nor
local ones).</p>

<p style="margin-top: 1em">--disable-profiles (short
option: -N) <br>
Do not use configuration profiles (see below). Overwrites
the useprofiles setting.</p>

<p style="margin-top: 1em">--dryrun (short option: -d) <br>
Go into dryrun mode. This means, that no action will be
taken. arename will print what it would do, if called
without -d.</p>

<p style="margin-top: 1em">--enable-hooks <br>
Explicitly enable hooks.</p>

<p style="margin-top: 1em">--force (short option: -f) <br>
Overwrite files if needed.</p>

<p style="margin-top: 1em">--help (short option: -h) <br>
Display a short help text.</p>

<p style="margin-top: 1em">--list-cfg (short option: -L)
<br>
List the current configuration in the actual configuration
format.</p>

<p style="margin-top: 1em">--list-file-types <br>
Lists all file types currently supported by arename, one
type per line.</p>

<p style="margin-top: 1em">--list-exts-for-type
&lt;type[,type[,...]]&gt; <br>
Lists all extensions recognised file name extsionsion for
type &lt;type&gt;, one extension per line. If a list of
types is given as a comma-separated list, extensions for all
<br>
listed types are listed.</p>

<p style="margin-top: 1em">--list-profiles (short option:
-S) <br>
Print a list of profile names defined in the active
configuration. (This is primarily used by the zsh completion
for the --profile option.)</p>

<p style="margin-top: 1em">--read-local (short option: -l)
<br>
Read a local config file (./.arename.local). Overwrites the
uselocalrc configuration setting.</p>

<p style="margin-top: 1em">--stdin (short option: -s) <br>
Read filenames from stdin after processing files given on
the command line. It reads one file name per line, which
means that file names containing newlines are not <br>
supported.</p>

<p style="margin-top: 1em">--version (short option: -V)
<br>
Display version information.</p>

<p style="margin-top: 1em">--verbosity
&lt;integer-value&gt; <br>
Sets the &lsquo;verbosity&rsquo; setting to
&lsquo;integer-value&rsquo;.</p>

<p style="margin-top: 1em">--suppress-skips (short option:
-Q) <br>
When a file is skipped, because its name would not change,
this option will cause arename to suppress any output. This
sets the &lsquo;suppress_skips&rsquo; option.</p>

<p style="margin-top: 1em">Note that if the
&lsquo;verbosity&rsquo; setting is at a high enough level,
you may still get messages about the file being processed in
the first place.</p>

<p style="margin-top: 1em">--rc &lt;file&gt; <br>
Read file instead of ~/.arenamerc.</p>

<p style="margin-top: 1em">--post-rc &lt;file&gt; <br>
Read file after ~/.arenamerc and before
./.arename.local.</p>

<p style="margin-top: 1em">--prefix &lt;prefix&gt; (short
option: -p) <br>
Define a prefix for destination files.</p>

<p style="margin-top: 1em">--profile &lt;profile(s),...&gt;
(short option: -P) <br>
Define a list of one or more profiles to use forcibly, no
matter if they would be activated normally or not.</p>

<p style="margin-top: 1em">--compilation-template
&lt;template&gt; (short option: -T) <br>
Define a template, that will be used for files that contain
a compilation tag.</p>

<p style="margin-top: 1em">--template &lt;template&gt;
(short option: -t) <br>
Define a generic template (for all files that do not contain
a compilation tag).</p>

<p style="margin-top: 1em">--userset &lt;variable=value&gt;
(short option: -u) <br>
Set a user defined variable to a given value (see &quot;User
defined variables&quot; below).</p>

<p style="margin-top: 1em">FILE(s)... <br>
Input files, that are subject for renaming.</p>

<p style="margin-top: 1em">A word about option name
stability: With arename version 3.0 we are now using
Getopt::Long for parsing command lines options. That change
was made, because the meaningful single <br>
letter options where used up. Every option is available via
a --long-option. That interface will remain stable. If
changes to the --long-option interface are done, that will
<br>
happen with an appropriate deprecation phase, so users can
adjust. So, if you want to use arename in scripts, those are
the options you should use. There are currently no plans
<br>
of removing or changing any further short options, but there
are no guarantees. If it is indeed better to change a short
option, we will do so.</p>

<p style="margin-top: 1em">A list of options that changed
from arename 3.x to 4.0 can be found in the project&rsquo;s
CHANGES file and general advice about incompatible changes
from major version to major <br>
version are documented in the UPGRADING file.</p>

<p style="margin-top: 1em">Deprecated Command Line Options
<br>
The following options are deprecated and will be removed in
a later version of arename.</p>

<p style="margin-top: 1em">--quiet <br>
This option is a short hand for &quot;--verbosity
10&quot;.</p>

<p style="margin-top: 1em">--uber-quiet <br>
This option is a short hand for &quot;--verbosity
5&quot;.</p>

<p style="margin-top: 1em">--verbose <br>
This is a short hand for &quot;--verbosity 20&quot;.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
arename is a tool that is able to rename audio files by
looking at a file&rsquo;s tagging information. It uses this
information to assemble a consistent destination file name.
The user <br>
can define the format of the destination filename by the use
of template strings.</p>

<p style="margin-top: 1em">Templates can be defined in the
&quot;Configuration files&quot;, by the template and
comp_template settings (See &quot;SETTINGS&quot; below).</p>

<p style="margin-top: 1em">By default, arename will refuse
to overwrite destination files, if the file in question
already exists. You can force overwriting by supplying the
--force option.</p>

<p style="margin-top: 1em">In order to see what would
happen instead of actually modifying files, you can use the
--dryrun option. This way you can avoid problems, that would
occur if the situation (e.g. <br>
the information in the files or your configuration) is not
exactly as you expected it.</p>

<p style="margin-top: 1em">Supported file formats <br>
Since version 4.0, arename supports a lot more file formats
than it used to (version 3.0 only supported .mp3, .ogg and
.flac files). Thanks to Audio::Scan, we now support a much
<br>
wider range of file types, of which most may exist using
different file name extensions (e.g. *.ogg and *.oga are
both of the type ogg).</p>

<p style="margin-top: 1em">You may use the
&lsquo;--list-file-types&rsquo; and
&lsquo;--list-ext-for-type&rsquo; options to find out which
file type is mapped to which file name extensions.</p>

<p style="margin-top: 1em">If you would like support for
another file type in arename, you will have to persuade the
Audio::Scan developers to extend their module with said
feature. Adding support for it <br>
in arename after that should be trivial.</p>

<p style="margin-top: 1em">To give you an idea, arename (in
connection with Audio::Scan 0.85) let&rsquo;s you rename
mp3, mp4, aac, ogg, flac, asf, musepack, monkey audio, wav
(this type also supports aiff) and <br>
wavpack files.</p>

<p style="margin-top: 1em">Inputting a *lot* of files <br>
arename can be used to keep the file names of whole audio
archives in sync. However, that means that you will have to
tell the script the location of many files, thousands
maybe.</p>

<p style="margin-top: 1em">In order to do that you will
face the problem, that on most UNIX-like systems, the length
of the argument list for external programs is limited
(recent Linux versions, as an <br>
exception, do not have that limitation anymore).</p>

<p style="margin-top: 1em">So, even if your shell can do
recursive globbing like ksh or zsh, this will most likely
get you into trouble (for more than just a few files):</p>

<p style="margin-top: 1em">% arename -d **/*.mp3</p>

<p style="margin-top: 1em">There are several ways to
overcome that limitation, of course.</p>

<p style="margin-top: 1em">The first solution is to use
find in connection with arename&rsquo;s -s option:</p>

<p style="margin-top: 1em">% find . -name &quot;*.mp3&quot;
-print | arename -d -s</p>

<p style="margin-top: 1em">This will break for file names
that contain newlines, because --stdin will read one file
name per line from the standard input stream.</p>

<p style="margin-top: 1em">Another way of using find to
deal with this problem is to use find&rsquo;s -exec
option:</p>

<p style="margin-top: 1em">% find . -name &quot;*.mp3&quot;
-exec arename -d &rsquo;{}&rsquo; &rsquo;+&rsquo;</p>

<p style="margin-top: 1em">This will work for every
possible file name. No matter if it has spaces or newlines
in it. The + at the end of the call causes find to call the
external program (arename in this <br>
case) with as many arguments as possible, without exceeding
the limit. This requires a POSIXly correct find. GNU find
for instance, did not support the + way for a long time. If
<br>
you are stuck with an old version, you can exchange the +
with a ; (note, that a semicolon must be quoted in any
case), or use the xargs tool instead.</p>

<p style="margin-top: 1em">A last solution for zsh users
would be zargs (which requires &rsquo;autoload zargs&rsquo;
in your zsh configuration):</p>

<p style="margin-top: 1em">% zargs -- **/*.mp3 -- arename
-d</p>

<p style="margin-top: 1em">GENERAL USAGE <br>
When you are first confronted with arename and you try to
get started with the documentation you might argue, that a
1000+ lines manual, that is not filled with too many
examples <br>
is hardly starter-friendly.</p>

<p style="margin-top: 1em">Therefore, this section was
introduced to give you the bare minimum of information in
order to use the program without going through too much
fuzz.</p>

<p style="margin-top: 1em">If you are really afraid of
documentation, you could of course just read the output of
the --help option and see which options to provide in order
to get what you want. Then <br>
again, you will soon be pissed by the weird default values
arename uses.</p>

<p style="margin-top: 1em">You will probably want other
templates. After all, the ability to have these expanded
strings is one of the points to use arename in the first
place. They are described in the <br>
TEMPLATE section; and reading that section is the minimum
effort you will want to go through.</p>

<p style="margin-top: 1em">After that, you can open the
file ~/.arenamerc in your favourite text editor and resemble
the following text (and presumably change the few values in
there to your liking):</p>

<p style="margin-top: 1em"># now you certainly want your
own templates, so define them here <br>
# one for your normal files <br>
template &amp;artist - &amp;album - &amp;tracknumber.
&amp;tracktitle</p>

<p style="margin-top: 1em"># and another one for files that
orignate from compilations <br>
comp_template va - &amp;album - &amp;tracknumber.
&amp;artist - &amp;tracktitle</p>

<p style="margin-top: 1em">If you want more automation or
more customization, you will not get around reading the
manual below. If you need to solve special problems, the
&quot;HOOKS&quot; part even further below is <br>
for you.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
ARENAME_LOAD_QUIET <br>
When set to 1, arename will not output any startup messages;
not while reading the configuration or hook files, nor will
arename emit messages about whether it is in copy <br>
mode or on a dry-run or similar.</p>

<p style="margin-top: 1em">However, if warnings or errors
are encoutered while loading the configuration, those
messages are still emitted, of course.</p>

<p style="margin-top: 1em">Any other value but 1 - and that
includes ARENAME_LOAD_QUIET being absent from the
environment - will cause arename to start up in its normal
manner.</p>

<p style="margin-top: 1em">ARENAME_SUPPRESS_COLOURS <br>
When set to 1 (and only 1 - arename will ignore any other
setting), arename will turn off its output colourations. As
of version 4.0, arename uses Term::ANSIColor to <br>
produce output, that features terminal colours.</p>

<p style="margin-top: 1em">FILES <br>
arename&rsquo;s behaviour can be altered by a number of
files it reads when starting up.</p>

<p style="margin-top: 1em">Normal configuration tasks are
done in (how convenient) &quot;Configuration files&quot;,
described below.</p>

<p style="margin-top: 1em">If you need more control, or
want to solve special problems you are having, you can do so
by supplying Perl code in &quot;Hook definition
files&quot;.</p>

<p style="margin-top: 1em">arename can be configured to
read configuration files as well as hook definition files
from the current working directory. This feature is disabled
by default, because they can <br>
be a security issue on multiuser systems.</p>

<p style="margin-top: 1em">There are no such things as
system wide configuration files in arename.</p>

<p style="margin-top: 1em">For all setup files arename
tries to find (except for the local ones) four different
locations are tried. If the $XDG_CONFIG_HOME/arename
directory exists, all files are expected <br>
to be there. If that directory does not exist,
~/etc/arename/ and if that is not there ~/.arename are are
tried instead. If those directories could not be found
either, arename <br>
will try to find the file it is looking for directly in the
user&rsquo;s home directory.</p>

<p style="margin-top: 1em">The default for $XDG_CONFIG_HOME
is ~/.config.</p>

<p style="margin-top: 1em">The first setup directory we
find always wins. arename does not consider more than one
setup directory.</p>

<p style="margin-top: 1em">If, for example, ~/etc/arename/
exists and we are looking for the normal configuration file
(see below), but ~/etc/arename/rc could not be found, we do
not try to find it in <br>
~/.arename/ or the user&rsquo;s home directory.</p>

<p style="margin-top: 1em">Configuration files <br>
arename uses up to three configuration files. As for most
programs, the script will try to read a configuration file,
that is located in the user&rsquo;s home directory. In
addition to <br>
that, it will try to load local configuration files, if it
finds appropriately named files in the current directory
(and the uselocalrc feature is enabled):</p>

<p style="margin-top: 1em">$XDG_CONFIG_HOME/arename/rc <br>
~/etc/arename/rc <br>
~/.arename/rc <br>
~/.arenamerc <br>
per-user normal configuration file.</p>

<p style="margin-top: 1em">./.arename.local <br>
per-directory local configuration file (only read if
uselocalrc is set or the --read-local option is given on the
command line).</p>

<p style="margin-top: 1em">The per-user normal
configuration file can be substituted by another file, if
specified via the --rc option.</p>

<p style="margin-top: 1em">Last but not least, you can
specify an intermediate configuration file, that is read in
between the normal and the per-directory file, via the
--post-rc option.</p>

<p style="margin-top: 1em">File format</p>

<p style="margin-top: 1em">The format of the aforementioned
files is pretty simple. It is parsed line by line. Empty
lines, lines only containing whitespace and lines, whose
first non whitespace character <br>
is a hash character (#) are ignored.</p>

<p style="margin-top: 1em">There are two different types of
settings: boolean and scalar settings.</p>

<p style="margin-top: 1em">Booleans can be set like
this:</p>

<p style="margin-top: 1em">&lt;setting&gt; [true|false]</p>

<p style="margin-top: 1em">If the value is omitted, true is
assumed. true and false are recognized case insensitively,
and a value of 1 is synonymous to true, as is 0 to
false.</p>

<p style="margin-top: 1em">Scalar settings are done in a
very similar way:</p>

<p style="margin-top: 1em">&lt;setting&gt;
&lt;value&gt;</p>

<p style="margin-top: 1em">If the value is omitted, string
values will be set to an empty string and numeric values
will be set to zero.</p>

<p style="margin-top: 1em">In both cases, setting and value
are separated by one or more whitespace characters. The
value will be the rest of the line (all of it, including
trailing whitespace).</p>

<p style="margin-top: 1em">If the value part starts with a
backslash, that backslash is left out of the value. That
makes it possible to define templates with leading
whitespace.</p>

<p style="margin-top: 1em">If a line contains only a string
within square brackets, that string is the start of a
section. Section names are matches for starts of file names.
That means, the settings <br>
following such a section definition will only applied for
input file names that start with the same string as the
section name. Where file name means the string, handed over
to <br>
arename. The string ~/ at the beginning of a section name is
expanded to the user&rsquo;s home directory.</p>

<p style="margin-top: 1em">You may start as many sections
as you would like.</p>

<p style="margin-top: 1em">A section named /foo/bar/
supersedes a section named /foo/ for a file named
/foo/bar/baz.ogg. So, the longest match wins.</p>

<p style="margin-top: 1em">Another possible configuration
file entry is a user variable, which is defined via the set
command. These settings are very different from the normal
settings. Therefore, they <br>
are defined in a different way. That way is described in the
&quot;User defined variables&quot; subsection below.</p>

<p style="margin-top: 1em">Last but not least, you may
define so called profiles, see below.</p>

<p style="margin-top: 1em">Configuration profiles</p>

<p style="margin-top: 1em">Profiles are a very flexible and
context sensitive way of using multiple configuration files
at once. With profiles, local configuration files (and local
hook definition files) <br>
can be substituted in a secure way; even on multi-user
systems.</p>

<p style="margin-top: 1em">Reading local files (configs and
hook-files) is still supported for backwards compatibility
(see uselocalrc and uselocalhooks options). However, you are
strongly encouraged to <br>
use profiles whenever you can.</p>

<p style="margin-top: 1em">As normal configuration files
and global hook-files, profile-related files are searched in
one of the setup directories described above. They are using
the following naming <br>
conventions:</p>


<p style="margin-top: 1em">$XDG_CONFIG_HOME/arename/profile.PROFILENAME
<br>
~/etc/arename/profile.PROFILENAME <br>
~/.arename/profile.PROFILENAME <br>
~/.arename.PROFILENAME <br>
Profile related configuration files; read if PROFILENAME is
active.</p>

<p style="margin-top: 1em">They are read after a
intermediate config file defined by --post-rc and a local
config file (if enabled).</p>


<p style="margin-top: 1em">$XDG_CONFIG_HOME/arename/profile.PROFILENAME.hooks
<br>
~/etc/arename/profile.PROFILENAME.hooks <br>
~/.arename/profile.PROFILENAME.hooks <br>
~/.arename.PROFILENAME.hooks <br>
Profile related &quot;Hook definition files&quot; (see below
for details); read if PROFILENAME is active.</p>

<p style="margin-top: 1em">These files are read, between
global and local hook-definition files.</p>

<p style="margin-top: 1em">In order to define profiles, you
need to use the profile keyword:</p>

<p style="margin-top: 1em">profile &lt;name&gt;
&lt;pattern&gt;</p>

<p style="margin-top: 1em">Where name is a string, that is
used in the place of PROFILENAME in the file location lists
above. This name may contain of the following character
range: a-zA-Z0-9_-</p>

<p style="margin-top: 1em">pattern is part of a Perl regex
pattern (see perlreref and perlretut manpages). The pattern
will be anchored at the beginning and is open at the end,
somewhat like this <br>
pseudocode:</p>

<p style="margin-top: 1em">if ($working_directory =~
m/^PATTERN/) { use_this_profile(); }</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">profile music
/mnt/audio/music/</p>

<p style="margin-top: 1em">Will cause the profile music to
be active when the working directory is /mnt/audio/music/ or
below. So, do not be afraid. You can use profiles without
understanding regular <br>
expressions.</p>

<p style="margin-top: 1em">Like many other values in
arename&rsquo;s configuration, a leading backslash of a
pattern will be ignored to allow patterns, that start in
white spaces. Furthermore, if a pattern <br>
starts in ~/, that string is replaced by the user&rsquo;s
home directory.</p>

<p style="margin-top: 1em">You may add as many patterns to
a profile name, as you want:</p>

<p style="margin-top: 1em">profile music /mnt/audio/music/
<br>
profile music /mnt/extern/audio/music/</p>

<p style="margin-top: 1em">The above activates the music
profile in /mnt/audio/music/ and /mnt/extern/audio/music/,
for example.</p>

<p style="margin-top: 1em">More than one profile can be
activated at the same time. If that is true, the according
configuration files are read in lexical order.</p>

<p style="margin-top: 1em">Sections versus Profiles</p>

<p style="margin-top: 1em">Since arename provides two
context sensitive configuration facilities, you might ask
yourself when to use which, when you are confronted with
both for the first time.</p>

<p style="margin-top: 1em">First of all, profiles are more
powerful. They may even introduce new hooks for arename to
use. But that is not the conceptual difference between the
two.</p>

<p style="margin-top: 1em">sections are sets of
configuration settings, that are considered for each and
every input file and they are only enabled for input files,
whose name matches the section name.</p>

<p style="margin-top: 1em">profiles on the other hand are
sets of configuration and hook-definition files, whose
inclusion in the current arename run is decided at the
beginning of the program&rsquo;s execution <br>
(not for every input file) - namely, if the name of the
current working directory matches one of the profile&rsquo;s
patterns.</p>

<p style="margin-top: 1em">That means, that if you need to
introduce slight configuration changes based on an input
file&rsquo;s name you want to use a section.</p>

<p style="margin-top: 1em">If you need to make broader
configuration changes, considering the name of the current
working directory, profiles are the way to go.</p>

<p style="margin-top: 1em">Of course, profile configuration
files may introduce new sections, too.</p>

<p style="margin-top: 1em">Configuration file example <br>
# switch on verbosity <br>
verbosity 20</p>

<p style="margin-top: 1em"># canonicalize file names before
working with them <br>
canonicalize</p>

<p style="margin-top: 1em"># the author is crazy! use a
sane template by default. :-) <br>
template &amp;artist - &amp;album (&amp;year) -
&amp;tracknumber. &amp;tracktitle</p>

<p style="margin-top: 1em"># activate the
&rsquo;music&rsquo; profile below /mnt/audio/music/. <br>
profile music /mnt/audio/music/</p>

<p style="margin-top: 1em"># force files from /foo/bar/ to
stay below that directory <br>
[/foo/bar/] <br>
prefix /foo/bar</p>

<p style="margin-top: 1em">Hook definition files <br>
$XDG_CONFIG_HOME/arename/hooks <br>
~/etc/arename/hooks <br>
~/.arename/hooks <br>
~/.arename.hooks <br>
Defines global hooks, that are in effect in every directory
if the usehooks option is set to true.</p>

<p style="margin-top: 1em">./.arename.hooks.local <br>
This allows you to define special hooks, that will only be
applied for processes that run in the directory the local
file is found (and if the uselocalhooks option is set to
<br>
true).</p>

<p style="margin-top: 1em">For details about hooks in
arename, see &quot;HOOKS&quot; below.</p>

<p style="margin-top: 1em">SETTINGS <br>
The following settings are supported in all configuration
files.</p>

<p style="margin-top: 1em">Not all of them are usable in
sections. The ones you can use in sections are: All
default_* options, force, prefix, sepreplace, tnpad,
comp_template and template.</p>

<p style="margin-top: 1em">ambiguoususefirst <br>
Some tag types support setting the sametag multiple times.
The scanning backends before arename 4.0 did not support
such tags. When this option is set to false (default), <br>
arename gives up when it encounters such tags.</p>

<p style="margin-top: 1em">When set to true, arename just
uses the first value it encounters.</p>

<p style="margin-top: 1em">For maximum control over how
tags with ambiguous values are handled, you may use the
&lsquo;ambiguoustag&rsquo; hook. (default: false)</p>

<p style="margin-top: 1em">canonicalize <br>
If set, a given file name will be transformed to its cleaned
up absolute path. You may want to set this, if you are using
sections in the configuration. If you do not use <br>
sections, all this will give you is a performance penalty.
(default value: false)</p>

<p style="margin-top: 1em">checkprofilerc <br>
If set, arename will check if there is a configuration file
for a profile as soon as it reads a profile definition in
the setup and only consider the profile if it found <br>
the according config file. Profiles without config file will
cause a warning if this is set, which may cause the dryrun
option to be set if the warningsautodryrun option <br>
is set.</p>

<p style="margin-top: 1em">If unset, profiles without
config file will not cause warnings. You will see messages
about missing configuration files, if a profile without
config file is active. <br>
(default: true)</p>

<p style="margin-top: 1em">checktemplatesinitially <br>
If set, arename will inspect all template and comp_template
settings for possible problems. Unsetting this option
probably only makes sense, if you are working with <br>
templates within hooks and know what you are doing. Normal
users will most likely want to stick with the default.
(default: on)</p>

<p style="margin-top: 1em">comp_template <br>
Defines a template to use with files that provide a
compilation tag (for &rsquo;various artist&rsquo; CDs, for
example). This setting can still be overwritten by the <br>
--compilation-template command line option. (default value:
va/&amp;album/&amp;tracknumber - &amp;artist -
&amp;tracktitle)</p>

<p style="margin-top: 1em">default_* <br>
default_artist, default_album, default_compilation,
default_genre, default_tracknumber, default_tracktitle,
default_year</p>

<p style="margin-top: 1em">Defines a default value, for the
given tag in files, that lack this information. (default
value: undefined)</p>

<p style="margin-top: 1em">hookerrfatal <br>
If this is set to false, arename will continue execution
even if reading, parsing or compiling a hooks file failed.
(default value: false)</p>

<p style="margin-top: 1em">prefix Defines a prefix for
destination files. Setting this to &rsquo;/foo/bar&rsquo;
results in destination files named &rsquo;/foo/bar/Expanded
Template.ogg&rsquo;</p>

<p style="margin-top: 1em">This setting can still be
overwritten by the --profile command line option. (default
value: .)</p>

<p style="margin-top: 1em">sepreplace <br>
Tagging information strings may contain slashes, which is a
pretty bad idea on most file systems. Therefore, you can
define a string, that replaces slashes with the value <br>
of this setting. (default value: _)</p>

<p style="margin-top: 1em">suppress_skips <br>
Like the &lsquo;--suppress-skips&rsquo; command line option,
this disables messages for files that arename will skip
because the file name would not change.</p>

<p style="margin-top: 1em">template <br>
Defines a template to use with files that do not provide a
compilation tag (or where the compilation tag and the artist
tag are exactly the same). This setting can be <br>
overwritten by the --compilation-template command line
option. (default value:
&amp;artist[1]/&amp;artist/&amp;album/&amp;tracknumber -
&amp;tracktitle)</p>

<p style="margin-top: 1em">template_aliases <br>
If this option is set, arename allows the use of abbreviated
taq names in template and comp_template. See &quot;Available
expression identifiers&quot; below for details. (default
<br>
value: off)</p>

<p style="margin-top: 1em">tnpad This defines the width, to
which the track number field is padded with zeros on the
left. Setting this to zero disables padding. (default value:
2)</p>

<p style="margin-top: 1em">usehooks <br>
If set to true, use hooks defined in ~/.arename.hooks.
(default value: true)</p>

<p style="margin-top: 1em">uselocalhooks <br>
If set to true, use hooks defined in ./.arename.hooks.local.
(default value: false)</p>

<p style="margin-top: 1em">uselocalrc <br>
If set to true, read a local configuration file
(./.arename.local), if it exists. (default value: false)</p>

<p style="margin-top: 1em">useprofiles <br>
If set to true, configuration profiles will be used. If
false, they are not. (default value: true)</p>

<p style="margin-top: 1em">usetypeasextension <br>
One file type may be used for different file name
extensions. For example, files matching *.ogg and *.oga will
both be handled as type ogg in Audio::Scan (the information
<br>
gathering backend, arename is using since version 4.0).</p>

<p style="margin-top: 1em">When this option is set to true,
a file matching *.oga would be renamed using .ogg as the
extension, since its type is ogg. Otherwise, the original
extension is left <br>
untouched. (default: true)</p>

<p style="margin-top: 1em">verbosity <br>
Integer option, that sets the verbosity of arename&rsquo;s
output. The default value is &lsquo;10&rsquo;. The
&lsquo;--verbosity&rsquo; option may be used to override
this setting.</p>

<p style="margin-top: 1em">warningsautodryrun <br>
Switches on the dryrun option (if not enabled already), as
soon as the configuration file parser encounters non-fatal
warnings. This option was introduced to avoid <br>
destructive behaviour due to incorrect lines in any of the
configuration files. (default value: true)</p>

<p style="margin-top: 1em">Deprecated Settings <br>
verbose <br>
This setting has no effect and will be removed in a later
version. Use an appropriate &lsquo;verbosity&rsquo; setting
instead.</p>

<p style="margin-top: 1em">quiet <br>
This setting has no effect and will be removed in a later
version. Use an appropriate &lsquo;verbosity&rsquo; setting
instead.</p>

<p style="margin-top: 1em">quiet_skip <br>
This setting has no effect and will be removed in a later
version. Use an appropriate &lsquo;verbosity&rsquo; setting
instead.</p>

<p style="margin-top: 1em">debug <br>
This setting has no effect and will be removed in a later
version. Use an appropriate &lsquo;verbosity&rsquo; setting
instead.</p>

<p style="margin-top: 1em">User defined variables <br>
You can use the set command in arenamerc files. This way the
user can define his own variables. The namespace is separate
from arename&rsquo;s normal settings. (That means, you
cannot, <br>
for example, overwrite the internal template variable with
this command.)</p>

<p style="margin-top: 1em">The sytnax is quite simple (and
different to normal settings on purpose!):</p>

<p style="margin-top: 1em">set varname = value</p>

<p style="margin-top: 1em">There may be an arbitrary amount
of whitespace around the equal sign (including no whitespace
at all). If you want to have a value that starts in a
whitespace character, you may <br>
start the value with a backslash character (just like with
the normal settings, a leading backslash is always
ignored).</p>

<p style="margin-top: 1em">You may also set user defined
variables on the command line by using the --userset
option:</p>

<p style="margin-top: 1em">% arename --userset
variable0=value <br>
% arename -u variable0=value</p>

<p style="margin-top: 1em">User defined variables are
useful to make hooks configurable (see &quot;HOOKS&quot;
below). Starting with version 4 of arename, user defined
variables may also be defined within sections, <br>
which (just like normal option) makes them applicable only
if said section is used for a given file.</p>

<p style="margin-top: 1em">TEMPLATE FORMAT <br>
arename&rsquo;s templates are fairly easy to understand, but
powerful.</p>

<p style="margin-top: 1em">At simplest, a template is just
a fixed character string. However, that would not be exactly
useful, because then every file you would ever want to
rename would be getting the <br>
exact same name. That is why arename is able to expand
certain expressions with information gathered from the
file&rsquo;s tagging information.</p>

<p style="margin-top: 1em">An expression basically looks
like one of the following forms:</p>

<p style="margin-top: 1em">&amp;identifier <br>
This is the &lsquo;trivial&rsquo; expression. It will expand
to the information stored within the corresponding tag. If
the tag in question is not available, the expansion of the
<br>
template string will fail.</p>

<p style="margin-top: 1em">&amp;identifier[length] <br>
The &lsquo;sized&rsquo; expression. The length modifier in
square brackets defines the maximum length, to which the
expression should be expanded.</p>

<p style="margin-top: 1em">That means, if the artist of a
file reveals to be &rsquo;Frank Zappa&rsquo;, then using
&rsquo;&amp;artist[1]&rsquo; will expand to
&rsquo;F&rsquo;.</p>


<p style="margin-top: 1em">&amp;{identifier:default-template}
<br>
This is the first complex expession, called
&lsquo;complex-default&rsquo;. When the tag, which
corresponds to &lsquo;identifier&rsquo; is available, this
expression will expand exactly like the <br>
trivial expression would.</p>

<p style="margin-top: 1em">If it is not available though,
the expansion doesn&rsquo;t fail, but instead the
&lsquo;default-template&rsquo; string is expanded.</p>


<p style="margin-top: 1em">&amp;{identifier?set-template!unset-template}
<br>
This expansion is called &lsquo;complex-set-unset&rsquo;.
Again, what will be used during template expansion depends
on whether the tag which corresponds to
&lsquo;identifier&rsquo; is set or <br>
not.</p>

<p style="margin-top: 1em">If it is set, the string
set-template is expanded; if it is unset, the unset-template
string is used.</p>

<p style="margin-top: 1em">Both simple expansions may be
used with braces, like the complex expansions are:</p>

<p style="margin-top: 1em">&amp;{identifier} <br>
This is equal to &lsquo;&amp;identifier&rsquo;.</p>

<p style="margin-top: 1em">&amp;{identifier[length]} <br>
And this is equal to
&lsquo;&amp;identifier[length]&rsquo;.</p>

<p style="margin-top: 1em">Backslashes are special in
template strings, because they are used to quote characters
that bear special meaning (for example, to get a ampersand
character, you need to use <br>
&quot;&quot;). To get an actual backslash in the resulting
string, you need to use a backslash, quoted by a backslash.
A backslash on non-special characters is silently
dropped.</p>

<p style="margin-top: 1em">Nesting expressions <br>
In complex expressions, the strings called
&lsquo;default-template&rsquo;, &lsquo;set-template&rsquo;
and &lsquo;unset-template&rsquo; are subject to regular
template expansion. Hence, expressions like the <br>
following are possible:</p>


<p style="margin-top: 1em">&quot;&amp;{album?&amp;album/!}&quot;</p>

<p style="margin-top: 1em">If &lsquo;album&rsquo; were set,
it would expand to its value followed by a slash; otherwise
it would expand to nothing. Using this, it is fairly easy to
deal with album-less tracks:</p>


<p style="margin-top: 1em">&quot;&amp;artist/&amp;{album?&amp;album/&amp;tracknumber.
!-no-album-/}&amp;tracktitle&quot;</p>

<p style="margin-top: 1em">That will effectively use the
following template if &lsquo;album&rsquo; is set:</p>


<p style="margin-top: 1em">&quot;&amp;artist/&amp;album/&amp;tracknumber.
&amp;tracktitle&quot;</p>

<p style="margin-top: 1em">But if it is not set, it will
instead use this:</p>


<p style="margin-top: 1em">&quot;&amp;artist/-no-album-/&amp;tracktitle&quot;</p>

<p style="margin-top: 1em">Caution has to be taken if
certain characters are to be used within conditional
template expressions. For example, to use a closing curly
bracket in either of them, it needs to <br>
be quoted using a backslash character.</p>

<p style="margin-top: 1em">Similarly, if an exclamation
mark is to be used in a &lsquo;set-template&rsquo;, it needs
to be quoted by a backslash to avoid the character being
interpreted as the end of the &lsquo;set- <br>
template&rsquo; string.</p>

<p style="margin-top: 1em">Available expression identifiers
<br>
The data, that is expanded is derived from tagging
information in the audio files. There are two kinds of
information available. One is the purely informational tag
(like a <br>
track&rsquo;s artist) and the other further describes the
format of the audio file (like the file&rsquo;s
bitrate).</p>

<p style="margin-top: 1em">If you are defining a lot of
templates on the command line, you may find that these
identifiers take quite a while to type. If the
template_aliases option is set, you may use <br>
shorter alias names instead of the the real identifier.
Available aliases are listed with their corresponding
idetifier below.</p>

<p style="margin-top: 1em">This is a list of all all
informational identifiers available for all file-types:</p>

<p style="margin-top: 1em">album The album the currently
processed track is part of. (alias: al)</p>

<p style="margin-top: 1em">artist The artist for the
current track. (alias: ar)</p>

<p style="margin-top: 1em">compilation <br>
Compilation tags are not very stable across different file
types. Usually, this is set to a string like &quot;Various
Artists&quot; for tracks that are part of some sort of <br>
compilation album (like motion picture sound-tracks).
(alias: cmp)</p>

<p style="margin-top: 1em">genre The genre or content type
of the audio file. (alias: gn)</p>

<p style="margin-top: 1em">tracknumber <br>
The number of the position of the track on the disc.
Obviously. However, this can be in the form of
&rsquo;12&rsquo; or &rsquo;12/23&rsquo;. In the second form,
only the part left of the slash <br>
is used. The tracknumber is a little special, as you can
define to what width it should be padded with zeros on the
left (see tnpad setting in &quot;SETTINGS&quot;). (alias:
tn)</p>

<p style="margin-top: 1em">tracktitle <br>
The title of the currently processed track. (alias: tt)</p>

<p style="margin-top: 1em">year Chronological information
about the track (usually the year a song was written or the
year the album a track is part of was released). (alias:
yr)</p>

<p style="margin-top: 1em">Here is a list of file-format
information tag available for all file-types:</p>

<p style="margin-top: 1em">bitrate The bitrate the file was
recorded/encoded with. (alias: br)</p>

<p style="margin-top: 1em">channels <br>
The number of channels available in the file (for example,
this is &lsquo;2&rsquo; for stereo files). (alias: ch)</p>

<p style="margin-top: 1em">length_ms <br>
The length of the track in milli-seconds. (alias: ln)</p>

<p style="margin-top: 1em">samplerate <br>
The samplerate the file was recorded/encoded with. (alias:
sr)</p>

<p style="margin-top: 1em">For all file-types, the
following tags are generated from the ones listed above (for
convenience):</p>

<p style="margin-top: 1em">kbitrate <br>
Kilobits per second (bitrate / 1000). (alias: kbr)</p>

<p style="margin-top: 1em">ksamplerate <br>
Kilosamples per second (samplerate / 1000). (alias: ksr)</p>

<p style="margin-top: 1em">length_sec <br>
The length of the track in seconds. (alias: ls)</p>

<p style="margin-top: 1em">Some tags are only available for
certain file-types. They are always called
&lsquo;type_*&rsquo;. File-type specific identifiers do not
have alias names. Here is a list of those tags:</p>

<p style="margin-top: 1em">flac_wordsize <br>
The word-size used in a flac file. &lsquo;24&rsquo; if
samples are 24 bits wide.</p>

<p style="margin-top: 1em">mp3_id3_version <br>
The version of the id3 tag used in mp3 files (e.g.
&quot;ID3v2.3.0&quot;).</p>

<p style="margin-top: 1em">wav_id3_version <br>
The same as &lsquo;mp3_id3_version&rsquo;, but for wave
files.</p>

<p style="margin-top: 1em">EXIT STATUS <br>
arename returns zero if everything went fine; non-zero on
fatal problems. This may change in future versions.</p>

<p style="margin-top: 1em">HOOKS <br>
Before we start, a word of warning: Hooks can solve a lot of
problems. That amount of flexibility comes at its price. All
data passed to hook functions are references to the <br>
actual data in the script (except for the namespace
argument, which is a copy). If you write hooks carelessly,
arename will get back at you! HOOKS ARE A BIG HAMMER, THAT
CAN <br>
CRUSH PROBLEMS AS WELL AS LIMBS!</p>

<p style="margin-top: 1em">You have been warned!</p>

<p style="margin-top: 1em">Discussion <br>
The reason for implementing hooks was to have a simple way
of post processing tags, filenames etc. without having to
invent own magic in the configuration files, when Perl has
<br>
regular expressions on steriods anyway. Hooks can do more
then pure pre and post processing, because they are called
in numerous places and give broad access to the
script&rsquo;s data <br>
structures. Still, post processing is probably the most
useful feature they implement.</p>

<p style="margin-top: 1em">Hooks are just Perl subroutines,
which are defined in one of two files (see
&quot;FILES&quot;). They are run at certain events during
the execution of arename. The contents of the argument <br>
list for each hook depends on what hook is called (see the
&quot;List of hook events&quot; below). However, the first
argument (argument zero aka. $_[0]) to all hooks is the hook
<br>
namespace, the subroutine is called in.</p>

<p style="margin-top: 1em">The global hooks file is read
before the local one, which means, that this local file may
overwrite and extend the definitions from the global file,
as much as Perl permits. This <br>
also means, that hooks from the local file are run after the
ones from the global file (unless you are using your own
method of registering hooks; but if you do so, you know what
<br>
you are doing anyway).</p>

<p style="margin-top: 1em">Subroutines must be registered
to arename, to be known as hooks. Once registered, a
subroutine can be removed from the known hooks, if requested
(see &quot;Utility subroutines&quot; <br>
below).</p>

<p style="margin-top: 1em">The keys in various data hashes
passed to the hooks can be one of the following: album,
artist, compilation, genre, tracknumber, tracktitle,
year.</p>

<p style="margin-top: 1em">Utility subroutines <br>
Registration subroutines</p>

<p style="margin-top: 1em">There are two subroutines, that
are used to tell arename about subroutines, you defined that
shall become hooks.</p>

<p style="margin-top: 1em">register_hook(event, coderef)
<br>
Registers a code reference (read: your subroutine) for the
given event. Example: register_hook(&rsquo;startup&rsquo;,
custom_banner);</p>

<p style="margin-top: 1em">remove_hook(event, coderef) <br>
Removes all entries of the code reference for the given
event. Example: remove_hook(&rsquo;startup&rsquo;,
custom_banner);</p>

<p style="margin-top: 1em">If the coderef was added more
than once, all entries are removed.</p>

<p style="margin-top: 1em">File access and manipulation</p>

<p style="margin-top: 1em">The currently processed file
name can be accessed via two subroutines:</p>

<p style="margin-top: 1em">get_file() <br>
Returns the current file name as a string. This way, you can
get the name of the currently processed file in every
hook.</p>

<p style="margin-top: 1em">set_file(file name string) <br>
This gives you the opportunity of manipulating the current
file name. Be careful using this, because if you break the
file name, arename cannot work properly.</p>

<p style="margin-top: 1em">With these, you could even
change the file name of the processed file, while arename
works on it (which you really should only do, if you know
what you are doing).</p>

<p style="margin-top: 1em">User-defined-variable
subroutines</p>

<p style="margin-top: 1em">Hooks can also use the data from
user defined variables, via their Perl interface:</p>

<p style="margin-top: 1em">user_get(setting) <br>
Returns the current value of setting. This is always a
scalar value.</p>

<p style="margin-top: 1em">user_set(setting, value) <br>
Change the value of setting to value.</p>

<p style="margin-top: 1em">Here is an example for user
defined settings:</p>

<p style="margin-top: 1em"># Assume, the user set the
myvar-variable to &quot;bar&quot; in his <br>
# configuration file <br>
my $foo = user_get(&rsquo;myvar&rsquo;); # $foo is now
&quot;bar&quot; <br>
user_set(&rsquo;foo&rsquo;, &quot;bar, baz&quot;); <br>
my $foo = user_get(&rsquo;myvar&rsquo;); # $foo is now
&quot;bar, baz&quot;</p>

<p style="margin-top: 1em">API for accessing to
arename&rsquo;s internal configuration</p>

<p style="margin-top: 1em">You can also access the
configuration data of arename itself:</p>

<p style="margin-top: 1em">get_opt(setting) <br>
Returns the current value of setting. This is always a
scalar value.</p>

<p style="margin-top: 1em">set_opt(setting, value) <br>
Change the value of setting to value.</p>

<p style="margin-top: 1em">A list of settings arename will
use: canonicalize, dryrun, force, hookerrfatal, prefix,
quiet, quiet_skip, readstdin, sepreplace, tnpad, usehooks,
uselocalhooks, uselocalrc, <br>
verbose, verbosity, comp_template and template.</p>

<p style="margin-top: 1em">If you want to actually change
these settings, you should have a profound knowledge of
arename&rsquo;s internals. Be careful.</p>

<p style="margin-top: 1em">API for default_* settings</p>

<p style="margin-top: 1em">If you need to access the
current values of the default_* settings:</p>

<p style="margin-top: 1em">get_defaults(tagname) <br>
Returns the value of default_tagname.</p>

<p style="margin-top: 1em">get_default_keys() <br>
Returns a lexically sorted array of tag names of currently
set default_* values.</p>

<p style="margin-top: 1em">set_default(tagname, value) <br>
Sets the value of default_tagname to value.</p>

<p style="margin-top: 1em">Miscellaneous subroutines</p>

<p style="margin-top: 1em">And finally, a few miscellaneous
functions ARename.pm provides, that might be of
interest.</p>

<p style="margin-top: 1em">choose_template(data hash
reference) <br>
Return the appropriate template (normal versus compiliation
template) by the data in the referenced data hash.</p>

<p style="margin-top: 1em">expand_template(template string,
data hash reference) <br>
Return the expanded version of template string. The
information, that is used to do the expansion is taken from
the referenced data hash.</p>

<p style="margin-top: 1em">Keep in mind that this function
calls hooks itself. Avoid endless loops! See &quot;Hooks
when expanding the template&quot; for details.</p>

<p style="margin-top: 1em">ensure_dir(directory) <br>
Makes sure directory exists. Think: mkdir -p directory</p>

<p style="margin-top: 1em">file_eq(file0, file1) <br>
Checks if the name file0 and the name file1 point to the
same file. Returns 0, if one of the file names does not
exist or if the files do not point to the same file, 1 <br>
otherwise.</p>

<p style="margin-top: 1em">Dies if it cannot stat one of
the given files.</p>

<p style="margin-top: 1em">tag_supported(tagname) <br>
Returns 1 if the tag tagname is supported by arename, 0
otherwise.</p>


<p style="margin-top: 1em">template_deep_inspect(template_string)
<br>
This tokenises a template string and then looks at the whole
token tree, and tries to figure out any potential problems
in it.</p>

<p style="margin-top: 1em">If tokenisation already failed,
a negative value is returned. In case of any warnings with
the token tree, zero is returned. If nothing came up, a
positive value is returned.</p>

<p style="margin-top: 1em">This subroutine is called for
the &lsquo;template&rsquo; and &lsquo;comp_template&rsquo;
strings in all sections when arename starts. If the user
chooses to change a template string in a hook it is <br>
recommended to use this function to avoid any errors due to
broken templates.</p>

<p style="margin-top: 1em">xrename(src, dest) <br>
Renames src to dest. Works across file systems, too. Dies if
something fails.</p>

<p style="margin-top: 1em">List of hook events <br>
This is a complete list of hooks events with
descriptions.</p>

<p style="margin-top: 1em">The first argument (argument
number &quot;zero&quot;) for every hook is the name space
they are called in. To find out the name of the currently
processed file, use the get_file() <br>
subroutine described above.</p>

<p style="margin-top: 1em">Hooks in the main loop</p>

<p style="margin-top: 1em">These hooks are called at the
highest level of the script.</p>

<p style="margin-top: 1em">canonicalize <br>
This is called in the middle of the file name
canonicalization process (but only if the canonicalize
setting is set).</p>

<p style="margin-top: 1em">You can get the current file
name via get_file(). The canonicalized file name is handed
to you via the hook&rsquo;s arguments. The value from this
argument will be assigned to the <br>
processed filename after the execution of this hook.</p>

<p style="margin-top: 1em">Arguments: 1: canonicalized file
name</p>

<p style="margin-top: 1em">next_file_early <br>
Called at the start of the main loop before any file checks
and canonicalizations (if enabled) are done.</p>

<p style="margin-top: 1em">Arguments:</p>

<p style="margin-top: 1em">next_file_late <br>
Called in the main loop after the file checks and
canonicalizations are done.</p>

<p style="margin-top: 1em">In this context, file checks
means tests for read-access and for whether the processed
file is a symlink. arename will refuse to process symlinks
and files it cannot read.</p>

<p style="margin-top: 1em">Arguments:</p>

<p style="margin-top: 1em">file_done <br>
Called in the main loop after the file has been processed
(unless filetype_unknown was triggered, see below).</p>

<p style="margin-top: 1em">Arguments:</p>

<p style="margin-top: 1em">filetype_unknown <br>
Called in the main loop after the file was tried to be
processed but the file type (the extension, specifically)
was unknown.</p>

<p style="margin-top: 1em">Arguments:</p>

<p style="margin-top: 1em">filetype_known <br>
Called when it has been established, that the file in
question should theoretically be supported by arename.</p>

<p style="margin-top: 1em">Arguments: 1: the current file
name extension 2: the file type that has been detected</p>

<p style="margin-top: 1em">pre_rename <br>
This is triggered directly before the actual file renaming
process starts. All information about the file has been
gathered at this point.</p>

<p style="margin-top: 1em">Arguments: 1: the file type, 2:
the extension that will be used to assemble the target
filename, 3: the data hash</p>

<p style="margin-top: 1em">Hooks in the renaming
procedure</p>

<p style="margin-top: 1em">When all data has been gathered,
arename will go on to actually rename the files to their new
destination name (which will be generated in the process,
see &quot;Hooks when expanding <br>
the template&quot; below).</p>

<p style="margin-top: 1em">pre_apply_defaults <br>
This is the first action to be taken in the renaming
process. It is called even before the default values are
applied.</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2: file
extension</p>

<p style="margin-top: 1em">pre_template <br>
Called before template expansions have been done.</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2: file
extension</p>

<p style="margin-top: 1em">post_template <br>
Called after the template has been expanded and the new file
name has been completely generated (including the
destination directory prefix).</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2: file
extension 3: the generated new filename (including directory
prefix and file extension)</p>

<p style="margin-top: 1em">post_ensure_dir <br>
The destnation directory for the new file name may contain
sub directories, which currently do not exist. This hook is
called after it is ensured, every directory portion <br>
exists.</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2: file
extension 3: the generated new filename (including directory
prefix and file extension)</p>

<p style="margin-top: 1em">post_rename <br>
This is the final hook in the actual renaming process. The
file has been renamed at this point.</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2: file
extension 3: the generated new filename (including directory
prefix and file extension)</p>

<p style="margin-top: 1em">Hooks when expanding the
template</p>

<p style="margin-top: 1em">These hooks are called when the
template string is filled with the data from tags in the
audio files. To do this, arename first tokenises the
template string into a data <br>
structure, which is later used to assemble the target file
name.</p>

<p style="margin-top: 1em">pre_expand_template <br>
Called before any expansions are done.</p>

<p style="margin-top: 1em">Arguments: 1: the template
string, 2: the data hash</p>

<p style="margin-top: 1em">post_expand_template <br>
Called after all expansions have been done, right before the
the resulting string is returned.</p>

<p style="margin-top: 1em">Arguments: 1: the template
string (fully expanded), 2: the data hash</p>

<p style="margin-top: 1em">expand_template_pre_expand_tag
<br>
Called each time the value of an existing tag is expanded.
This may be more than once, as tags may be used as often in
a template as the user requires. At each point, this <br>
hook will be called right before the data was retrieved and
post-processed (like zero-padding the
&lsquo;tracknumber&rsquo; tag).</p>

<p style="margin-top: 1em">Arguments: 1: the tag&rsquo;s
name, 2: the data hash</p>

<p style="margin-top: 1em">expand_template_post_expand_tag
<br>
Called each time the value of an existing tag is expanded.
Like with the &lsquo;expand_template_pre_expand_tag&rsquo;
hook, this may be more than once.</p>

<p style="margin-top: 1em">At each point, this hook will be
called right after the data was retrieved and
post-processed.</p>

<p style="margin-top: 1em">Arguments: 1: the value, which
will be used for expansion, 2: the tag&rsquo;s name, 2: the
data hash</p>

<p style="margin-top: 1em">Hooks while gathering
information</p>

<p style="margin-top: 1em">These hooks are triggered while
the tag information is extracted from the audio files
arename is processing. This is done in two steps. First the
Audio::Scan module is used to <br>
scan for the raw meta data information from the current
file. Then arename&rsquo;s data hash is being filled with
that data.</p>

<p style="margin-top: 1em">pre_scan <br>
This hook is called right before any scanning has been
done.</p>

<p style="margin-top: 1em">Arguments: 1: the type of the
file being processed (&lsquo;ogg&rsquo; for ogg vorbis
files)</p>

<p style="margin-top: 1em">post_scan <br>
This is triggered as soon as Audio::Scan is done processing
the current file, but before arename&rsquo;s data hash has
been filled.</p>

<p style="margin-top: 1em">Arguments: 1: the type of the
file being processed (&lsquo;ogg&rsquo; for ogg vorbis
files), 2: the data structure returned by
&lsquo;Audio::Scan&rsquo;</p>

<p style="margin-top: 1em">ambiguoustag <br>
When the data hash is being filled it is possible, that for
one arename tag (like &lsquo;artist&rsquo;) multiple values
where returned by Audio::Scan. This hook is triggered as
soon as <br>
such a tag with ambiguous values is processed.</p>

<p style="margin-top: 1em">The hook may be used for maximum
control over how ambiguous values are handled. To do this,
the ambiguous value (passed as an array reference in the
second argument) should <br>
be turned into the desired scalar value.</p>

<p style="margin-top: 1em">If the array reference is left
as it is, the usual &lsquo;ambiguoususefirst&rsquo;
behaviour is followed. The the option&rsquo;s description
for details.</p>

<p style="margin-top: 1em">Arguments: 1: the name of the
tag with the ambiguous value, 2: its current (ambiguous)
value, 3: the data hash in its current form (obviously not
all values will have been <br>
filled in at this point), 4: the data structure returned by
Audio::Scan (see its documentation for details)</p>

<p style="margin-top: 1em">post_fill <br>
Finally, the &lsquo;post_fill&rsquo; hook is called after
the data hash has been filled. This is a good spot, if
post-processing the values of individual tag is desired.</p>

<p style="margin-top: 1em">Arguments: 1: return code of the
filling process (&lsquo;0&rsquo; in case of an error,
&lsquo;1&rsquo; otherwise), 2: the type of the file being
processed (&lsquo;ogg&rsquo; for ogg vorbis files), 3: the
data <br>
structure returned by &lsquo;Audio::Scan&rsquo;, 4: the data
hash.</p>

<p style="margin-top: 1em">Miscellaneous hooks</p>

<p style="margin-top: 1em">apply_defaults <br>
This is triggered before values from the default_* settings
are applied to missing values in the audio file. This hook
is only run if a default value for a tag will be used!</p>

<p style="margin-top: 1em">Arguments: 1: data hash, 2:
current key</p>

<p style="margin-top: 1em">startup <br>
Called directly after all the module initialisation is done,
at the very start of the script. Configuration files will
have been read, as well as hook files (obviously) and <br>
command line options will have been handled at this point
already.</p>

<p style="margin-top: 1em">This hook may be useful for
postprocessing the configuration as well as for
debugging.</p>

<p style="margin-top: 1em">Arguments: 1: program name, 2:
its version, 3: configuration hash, 4: array of supported
tags, 5: the program&rsquo;s argument list</p>

<p style="margin-top: 1em">normal_quit <br>
Called at the end of the script. This is reached if nothing
fatal happened.</p>

<p style="margin-top: 1em">Arguments: 1: the
program&rsquo;s argument list</p>

<p style="margin-top: 1em">Example <br>
This is a very simple example for a hook file, that prints a
custom banner and replaces all whitespace in the expanded
template with underscores:</p>

<p style="margin-top: 1em">sub my_banner { <br>
print &quot;Hello World.0; <br>
} <br>
register_hook(&rsquo;startup&rsquo;, my_banner);</p>

<p style="margin-top: 1em">sub replace_spaces_by_underscore
{ <br>
my ($templateref, $datref) = @_; <br>
$$templateref =~ s/_/g; <br>
} <br>
register_hook(&rsquo;post_expand_template&rsquo;, <br>
replace_spaces_by_underscore);</p>

<p style="margin-top: 1em">Further examples can be found in
the arename.hooks file of the distribution.</p>

<p style="margin-top: 1em">SEE ALSO <br>
find(1), xargs(1), Audio::Scan.</p>

<p style="margin-top: 1em">VERSION <br>
This manual describes arename version 4.0.</p>

<p style="margin-top: 1em">AUTHOR <br>
Frank Terbeck &lt;ft@bewatermyfriend.org&gt;,</p>

<p style="margin-top: 1em">Please report bugs.</p>

<p style="margin-top: 1em">LICENCE <br>
Copyright 2007-2011 <br>
Frank Terbeck &lt;ft@bewatermyfriend.org&gt;, All rights
reserved.</p>

<p style="margin-top: 1em">Redistribution and use in source
and binary forms, with or without <br>
modification, are permitted provided that the following
conditions <br>
are met:</p>

<p style="margin-top: 1em">1. Redistributions of source
code must retain the above <br>
copyright notice, this list of conditions and the following
<br>
disclaimer. <br>
2. Redistributions in binary form must reproduce the above
<br>
copyright notice, this list of conditions and the following
<br>
disclaimer in the documentation and/or other materials <br>
provided with the distribution.</p>

<p style="margin-top: 1em">THIS SOFTWARE IS PROVIDED
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED <br>
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES <br>
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
<br>
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS OF
THE <br>
PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, <br>
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, <br>
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR <br>
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY <br>
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
<br>
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE <br>
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.</p>

<p style="margin-top: 1em">perl v5.20.2 2015-05-23
arename(1)</p>
<hr>
</body>
</html>
