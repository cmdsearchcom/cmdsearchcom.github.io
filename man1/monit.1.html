<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MONIT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MONIT(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">MONIT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
Monit - utility for monitoring services on a Unix system
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>monit</b> [options] {arguments}
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Monit</b> is a utility for managing and monitoring processes, programs,
  files, directories and filesystems on a Unix system. Monit conducts automatic
  maintenance and repair and can execute meaningful causal actions in error
  situations. E.g. Monit can start a process if it does not run, restart a
  process if it does not respond and stop a process if it uses too much
  resources. You can use Monit to monitor files, directories and filesystems for
  changes, such as timestamps changes, checksum changes or size changes.
<div class="Pp"></div>
Monit is controlled via an easy to configure control file based on a
  free-format, token-oriented syntax. Monit logs to syslog or to its own log
  file and notifies you about error conditions via customizable alert messages.
  Monit can perform various TCP/IP network checks, protocol checks and can
  utilize SSL for such checks. Monit provides a http(s) interface and you may
  use a browser to access the Monit program.
<h1 class="Sh" title="Sh" id="WHAT_TO_MONITOR?"><a class="selflink" href="#WHAT_TO_MONITOR?">WHAT
  TO MONITOR?</a></h1>
You can use Monit to monitor daemon <b>processes</b> or similar programs running
  on localhost. Monit is particularly useful for monitoring daemon processes,
  such as those started at system boot time. For instance sendmail, sshd, apache
  and mysql. In contrast to many other monitoring systems, Monit can act if an
  error situation should occur, e.g.; if sendmail is not running, monit can
  start sendmail again automatically or if apache is using too many resources
  (e.g. if a DoS attack is in progress) Monit can stop or restart apache and
  send you an alert message. Monit can also monitor process characteristics,
  such as how much memory or cpu cycles a process is using.
<div class="Pp"></div>
You can also use Monit to monitor <b>files</b>, <b>directories</b> and
  <b>filesystems</b> on localhost. Monit can monitor these items for changes,
  such as timestamps changes, checksum changes or size changes. This is also
  useful for security reasons - you can monitor the md5 or sha1 checksum of
  files that should not change and get an alert or perform an action if they
  should change.
<div class="Pp"></div>
Monit can monitor <b>network connections</b> to various servers, either on
  localhost or on remote hosts. TCP, UDP and Unix Domain Sockets are supported.
  Network test can be performed on a protocol level; Monit has built-in tests
  for the main Internet protocols, such as HTTP, SMTP etc. Even if a protocol is
  not supported you can still test the server because you can configure Monit to
  send any data and test the response from the server.
<div class="Pp"></div>
Monit can be used to test <b>programs</b> or scripts at certain times, much like
  cron, but in addition, you can test the exit value of a program and perform an
  action or send an alert if the exit value indicates an error. This means that
  you can use Monit to perform any type of check you can write a script for.
<div class="Pp"></div>
Finally, Monit can be used to monitor general <b>system</b> resources on
  localhost such as overall CPU usage, Memory and System Load.
<h1 class="Sh" title="Sh" id="GENERAL_OPERATION"><a class="selflink" href="#GENERAL_OPERATION">GENERAL
  OPERATION</a></h1>
The behavior of Monit is controlled by command-line options <i>and</i> a run
  control file, monitrc, the syntax of which we describe in a later section.
  Command-line options override <i>.monitrc</i> declarations.
<div class="Pp"></div>
The default location for <i>monitrc</i> is <i>~/.monitrc</i>. If this file does
  not exist, Monit will try <i>/etc/monitrc</i> and a few other places. See
  FILES for details. You can also specify the control file directly by using the
  <i>-c</i> command-line switch to monit. For instance,
<div class="Pp"></div>
<pre>
 $ monit -c /var/monit/monitrc
</pre>
<div class="Pp"></div>
Before Monit is started the first time, you can test the control file for syntax
  errors:
<div class="Pp"></div>
<pre>
 $ monit -t
 $ Control file syntax OK
</pre>
<div class="Pp"></div>
If there was an error, Monit will print an error message to the console,
  including the line number in the control file from where the error was found.
<div class="Pp"></div>
Once you have a working Monit control file, simply start Monit from the console,
  like so:
<div class="Pp"></div>
<pre>
 $ monit
</pre>
<div class="Pp"></div>
You can change some configuration directives via command-line switches, but for
  simplicity it is recommended that you put these in the control file.
<div class="Pp"></div>
Monit will detach from the terminal and run as a background process, i.e. as a
  daemon process. As a daemon, Monit runs in cycles; It monitor services, then
  goes to sleep for a configured period, then wakes up and start monitoring
  again in an endless loop.
<h2 class="Ss" title="Ss" id="Options"><a class="selflink" href="#Options">Options</a></h2>
The following options are recognized by Monit. However, it is recommended that
  you set options (when applicable) directly in the <i>.monitrc</i> control
  file.
<div class="Pp"></div>
<b>-c</b> <i>file</i>
<br/>
 Use this control file
<div class="Pp"></div>
<b>-d</b> <i>n</i>
<br/>
 Run Monit as a daemon once per <i>n</i> seconds. Or use <i>&quot;set</i>
<br/>
<i> daemon&quot;</i> in monitrc.
<div class="Pp"></div>
<b>-g</b> <i>name</i>
<br/>
 Set group name for start, stop, restart, monitor, unmonitor,
<br/>
 status and summary action.
<div class="Pp"></div>
<b>-l</b> <i>logfile</i>
<br/>
 Print log information to this file. Or use <i>&quot;set logfile&quot;</i>
<br/>
 in monitrc.
<div class="Pp"></div>
<b>-p</b> <i>pidfile</i>
<br/>
 Use this lock file in daemon mode. Or use <i>&quot;set pidfile&quot;</i>
<br/>
 in monitrc.
<div class="Pp"></div>
<b>-s</b> <i>statefile</i>
<br/>
 Write state information to this file. Or use <i>&quot;set</i>
<br/>
<i> statefile&quot;</i> in monitrc.
<div class="Pp"></div>
<b>-I</b>
<br/>
 Do not run in background (needed for run from init)
<div class="Pp"></div>
<b>-i</b>
<br/>
 Print Monit's unique ID
<div class="Pp"></div>
<b>-r</b>
<br/>
 Reset Monit's unique ID. Use with caution
<div class="Pp"></div>
<b>-t</b>
<br/>
 Run syntax check for the control file
<div class="Pp"></div>
<b>-v</b>
<br/>
 Verbose mode, work noisy (diagnostic output)
<div class="Pp"></div>
<b>-vv</b>
<br/>
 Very verbose mode, same as -v plus log stack-trace on error
<div class="Pp"></div>
<b>-H</b> <i>[filename]</i>
<br/>
 Print MD5 and SHA1 hashes of the file or of stdin if the
<br/>
 filename is omitted; Monit will exit afterwards
<div class="Pp"></div>
<b>-V</b>
<br/>
 Print version number and patch level
<div class="Pp"></div>
<b>-h</b>
<br/>
 Print a help text
<h2 class="Ss" title="Ss" id="Arguments"><a class="selflink" href="#Arguments">Arguments</a></h2>
Once you have Monit running as a daemon process, you can call Monit with one of
  the following arguments. Monit will then connect to the Monit daemon (on TCP
  port 127.0.0.1:2812 by default) and ask the Monit daemon to perform the
  requested action. In other words; calling monit without arguments starts the
  Monit daemon, and calling monit <i>with</i> arguments enables you to
  communicate with the Monit daemon process.
<dl class="Bl-tag">
  <dt class="It-tag">start all</dt>
  <dd class="It-tag">Start all services listed in the control file and enable
      monitoring for them. If the group option is set ( <i>-g</i>), only start
      and enable monitoring of services in the named group (&quot;all&quot; is
      not required in this case).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">start name</dt>
  <dd class="It-tag">Start the named service and enable monitoring for it. The
      name is a service entry name from the monitrc file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">stop all</dt>
  <dd class="It-tag">Stop all services listed in the control file and disable
      their monitoring. If the group option is set, only stop and disable
      monitoring of the services in the named group (all&quot; is not required
      in this case).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">stop name</dt>
  <dd class="It-tag">Stop the named service and disable its monitoring. The name
      is a service entry name from the monitrc file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">restart all</dt>
  <dd class="It-tag">Stop and start <i>all</i> services. If the group option is
      set, only restart the services in the named group (&quot;all&quot; is not
      required in this case).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">restart name</dt>
  <dd class="It-tag">Restart the named service. The name is a service entry name
      from the monitrc file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">monitor all</dt>
  <dd class="It-tag">Enable monitoring of all services listed in the control
      file. If the group option is set, only start monitoring of services in the
      named group (&quot;all&quot; is not required in this case).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">monitor name</dt>
  <dd class="It-tag">Enable monitoring of the named service. The name is a
      service entry name from the monitrc file. Monit will also enable
      monitoring of all services this service depends on.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">unmonitor all</dt>
  <dd class="It-tag">Disable monitoring of all services listed in the control
      file. If the group option is set, only disable monitoring of services in
      the named group (&quot;all&quot; is not required in this case).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">unmonitor name</dt>
  <dd class="It-tag">Disable monitoring of the named service. The name is a
      service entry name from the monitrc file. Monit will also disable
      monitoring of all services that depends on this service.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">status [name]</dt>
  <dd class="It-tag">Print service status information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">summary [name]</dt>
  <dd class="It-tag">Print a short status summary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">reload</dt>
  <dd class="It-tag">Reinitialize a running Monit daemon, the daemon will reread
      its configuration, close and reopen log files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">quit</dt>
  <dd class="It-tag">Kill the Monit daemon process</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">validate</dt>
  <dd class="It-tag">Check all services listed in the control file. This action
      is also the default behavior when Monit runs in daemon mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">procmatch regex</dt>
  <dd class="It-tag">Allows for easy testing of pattern for process match check.
      The command takes regular expression as an argument and displays all
      running processes matching the pattern.</dd>
</dl>
<h1 class="Sh" title="Sh" id="THE_MONIT_CONTROL_FILE"><a class="selflink" href="#THE_MONIT_CONTROL_FILE">THE
  MONIT CONTROL FILE</a></h1>
Monit is configured and controlled via a control file called <i>monitrc</i>. The
  default location for this file is ~/.monitrc. If this file does not exist,
  Monit will try /etc/monitrc, then @sysconfdir@/monitrc and finally ./monitrc.
  If you build Monit from source, the value of @sysconfdir@ can be given at
  configure time as ./configure --sysconfdir. For instance, using
  <i>./configure</i> <i>--sysconfdir /var/monit/etc</i> will make Monit search
  for <i>monitrc</i> in <i>/var/monit/etc</i>
<div class="Pp"></div>
To protect the security of your control file and passwords the control file must
  have read-write permissions <i>no more than 0700</i> (u=xrw,g=,o=); Monit will
  complain and exit otherwise.
<div class="Pp"></div>
When there is a conflict between the command-line arguments and the arguments in
  this file, the command-line arguments takes precedence.
<div class="Pp"></div>
Monit uses its own Domain Specific Language (DSL); The control file consists of
  a series of service entries and global option statements.
<div class="Pp"></div>
Comments begin with a '#' and extend through the end of the line. Otherwise the
  file consists of a series of service entries or global option statements in a
  free-format, token-oriented syntax.
<div class="Pp"></div>
You can use noise keywords like 'if', 'and', 'with(in)', 'has', 'us(ing|e)',
  'on(ly)', 'then', 'for', 'of' anywhere in an entry to make it resemble
  English. They're ignored, but can make entries much easier to read at a
  glance. Keywords are case insensitive.
<div class="Pp"></div>
There are three kinds of tokens: <i>grammar</i>, <i>numbers</i> (i.e. decimal
  digit sequences) and <i>strings</i>. Strings can be either quoted or unquoted.
  A quoted string is bounded by double quotes and may contain whitespace (and
  quoted digits are treated as a string). An unquoted string is any
  whitespace-delimited token, containing characters and/or numbers.
<div class="Pp"></div>
On a semantic level, the control file consists of three types of entries:
<dl class="Bl-tag">
  <dt class="It-tag">1. Global set-statements</dt>
  <dd class="It-tag">A global set-statement starts with the keyword
      &quot;set&quot; and the item to configure.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2. Global include-statement</dt>
  <dd class="It-tag">The include statement consists of the keyword
      &quot;include&quot; and a glob string. This statement is used to include
      configure directives from separate files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3. One or more service entry statements.</dt>
  <dd class="It-tag">Each service entry consists of the keywords
      &quot;check&quot;, followed by the service type. Each entry requires a
      <b>unique</b> descriptive name, which may be freely chosen. This name is
      used by Monit to refer to the service internally and in all interactions
      with the user.</dd>
</dl>
<div class="Pp"></div>
Currently, nine types of check statements are supported:
<dl class="Bl-tag">
  <dt class="It-tag">1. CHECK PROCESS &lt;unique name&gt; &lt;PIDFILE
    &lt;path&gt; | MATCHING &lt;regex&gt;&gt;</dt>
  <dd class="It-tag">&lt;path&gt; is the absolute path to the program's
      pid-file. A pid-file is a file, containing a Process's unique ID. If the
      pid-file does not exist or does not contain the PID number of a running
      process, Monit will call the entry's start method if defined.
    <div style="height: 1.00em;">&#x00A0;</div>
    &lt;regex&gt; is an alternative to using PID files and uses process name
      pattern matching to find the process to monitor. The first match is used
      so this form of check is most useful if the process name is unique.
      Pid-file should be used where possible as it defines expected pid exactly
      (pattern matching won't be useful for processes which start a child
      process using fork/clone as the child will match the same pattern
      temporarily). You can test if a process match a pattern from the
      command-line using &quot;monit procmatch &quot;regex-pattern&quot;&quot;.
      This will lists all processes matching or not, the regex-pattern.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2. CHECK FILE &lt;unique name&gt; PATH &lt;path&gt;</dt>
  <dd class="It-tag">&lt;path&gt; is the absolute path to the file. If the file
      does not exist, Monit will call the entry's start method if defined, if
      &lt;path&gt; does not point to a regular file type (for instance a
      directory), Monit will disable monitoring of this entry. If Monit runs in
      passive mode or the start methods is not defined, Monit will just send an
      alert on error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3. CHECK FIFO &lt;unique name&gt; PATH &lt;path&gt;</dt>
  <dd class="It-tag">&lt;path&gt; is the absolute path to the fifo. If the fifo
      does not exist, Monit will call the entry's start method if defined, if
      &lt;path&gt; does not point to a fifo type (for instance a directory),
      Monit will disable monitoring of this entry. If Monit runs in passive mode
      or the start methods is not defined, Monit will just send an alert on
      error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4. CHECK FILESYSTEM &lt;unique name&gt; PATH
    &lt;path&gt;</dt>
  <dd class="It-tag">&lt;path&gt; is the path to the device/disk, mount point,
      file or a directory which is part of a filesystem. It is recommended to
      use a block special file directly (for example /dev/hda1 on Linux or
      /dev/dsk/c0t0d0s1 on Solaris, etc.) If you use a mount point (for example
      /data), note if the filesystem is unmounted the test will still be true
      because the mount point exist.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the filesystem becomes unavailable, Monit will call the entry's start
      method if defined. if &lt;path&gt; does not point to a filesystem, Monit
      will disable monitoring of this entry. If Monit runs in passive mode or
      the start methods is not defined, Monit will just send an alert on
    error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">5. CHECK DIRECTORY &lt;unique name&gt; PATH
    &lt;path&gt;</dt>
  <dd class="It-tag">&lt;path&gt; is the absolute path to the directory. If the
      directory does not exist, Monit will call the entry's start method if
      defined. If &lt;path&gt; does not point to a directory, monit will disable
      monitoring of this entry. If Monit runs in passive mode or the start
      methods is not defined, Monit will just send an alert on error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">6. CHECK HOST &lt;unique name&gt; ADDRESS &lt;host
    address&gt;</dt>
  <dd class="It-tag">The host address can be specified as a hostname string or
      as an IP-address string on a dotted decimal format. Such as,
      tildeslash.com or &quot;64.87.72.95&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">7. CHECK SYSTEM &lt;unique name&gt;</dt>
  <dd class="It-tag">The <i>unique name</i> is usually the local host name, but
      any descriptive name can be used. If you use the variable $HOST as the
      name, it will expand to the hostname. This check allows one to monitor
      general system resources such as CPU usage, total memory usage or load
      average. The <i>unique name</i> is used as the system hostname in mail
      alerts and as the initial name of the host entry in M/Monit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">8. CHECK PROGRAM &lt;unique name&gt; PATH &lt;executable
    file&gt; [TIMEOUT &lt;number&gt; SECONDS]</dt>
  <dd class="It-tag">&lt;path&gt; is the absolute path to the executable program
      or script. The status test allows one to check the program's exit status.
      If the program does not finish executing within &lt;number&gt; seconds,
      Monit will terminate it. The default program timeout is 300 seconds (5
      minutes). The output of the program is recorded and made available in the
      User Interface and in alerts (up to 1kB).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">9. CHECK NETWORK &lt;unique name&gt; &lt;ADDRESS
    &lt;ipaddress&gt; | INTERFACE &lt;name&gt;&gt;</dt>
  <dd class="It-tag">&lt;ipaddress&gt; is the IPv4 or IPv6 address of the
      monitored network interface. It is also possible to use interface name,
      such as &quot;eth0&quot; on Linux.</dd>
</dl>
<h1 class="Sh" title="Sh" id="LOGGING"><a class="selflink" href="#LOGGING">LOGGING</a></h1>
Monit will log status and error messages to a log file. Use the <i>set
  logfile</i> statement in the monitrc control file. To setup Monit to log to
  its own logfile, use e.g. <i>set logfile</i> <i>/var/log/monit.log</i>. If
  <b>syslog</b> is given as a value for the &quot;-l&quot; command-line switch
  (or the keyword <i>set logfile syslog</i> is found in the control file) Monit
  will use the <b>syslog</b> system daemon to log messages with a priority
  assigned to each message based on the context. To turn off logging, simply do
  not set the logfile in the control file (and of course, do not use the -l
  switch)
<div class="Pp"></div>
The format for logfile is:
<div class="Pp"></div>
<pre>
    [date] priority : message
</pre>
<div class="Pp"></div>
for example:
<div class="Pp"></div>
<pre>
    [CET Jan  5 18:49:29] info : 'mymachine' Monit started
</pre>
<h1 class="Sh" title="Sh" id="DAEMON_MODE"><a class="selflink" href="#DAEMON_MODE">DAEMON
  MODE</a></h1>
Use
<div class="Pp"></div>
<pre>
 set daemon n (where n is a number in seconds)
</pre>
<div class="Pp"></div>
to specify Monit's poll cycle length and run Monit in daemon mode. You must
  specify a numeric argument which is a polling interval in seconds. In daemon
  mode, Monit detaches from the console, puts itself in the background and runs
  continuously, monitoring each specified service and then goes to sleep for the
  given poll interval, wakes up and start monitoring again in an endless cycle.
<div class="Pp"></div>
Alternatively, you can use the &quot;-d&quot; command line switch to set the
  poll interval, but it is strongly recommended to set the poll interval in your
  <i>~/.monitrc</i> file, by using <i>set daemon</i>.
<div class="Pp"></div>
Monit will then always start in daemon mode. If you do not use this statement
  and do not start monit with the -d option, Monit will just run through the
  service checks once and then exit. This might be useful in some situations,
  but Monit is primarily designed to run as a daemon process.
<div class="Pp"></div>
Calling &quot;monit&quot; with a Monit daemon running in the background sends a
  wake-up signal to the daemon, forcing it to check services immediately.
  Calling &quot;monit&quot; with the quit argument will kill a running Monit
  daemon process instead of waking it up.
<h1 class="Sh" title="Sh" id="INIT_SUPPORT"><a class="selflink" href="#INIT_SUPPORT">INIT
  SUPPORT</a></h1>
The &quot;set init&quot; statement prevents Monit from transforming itself into
  a daemon process. Instead Monit will run as a foreground process. (You should
  still use &quot;set daemon&quot; to specify the poll cycle).
<div class="Pp"></div>
This is required to run Monit from init. Using init to start Monit is probably
  the best way to run Monit if you want to be certain that you always have a
  running Monit daemon on your system. Another option is to run Monit from
  crontab. In any case, you should make sure that the control file does not have
  any syntax errors before you start Monit from init or crontab (use &quot;monit
  -t&quot; to check).
<div class="Pp"></div>
To setup Monit to run from init, you can either use the &quot;set init&quot;
  statement in Monit's control file or use the &quot;-I&quot; option from the
  command line. Here is what you must add to &quot;/etc/inittab&quot;:
<div class="Pp"></div>
<pre>
  # Run Monit in standard run-levels
  mo:2345:respawn:/usr/local/bin/monit -Ic /etc/monitrc
</pre>
<div class="Pp"></div>
After you have modified init's configuration file, you can run the following
  command to re-examine /etc/inittab and start Monit:
<div class="Pp"></div>
<pre>
  telinit q
</pre>
<div class="Pp"></div>
For systems without telinit:
<div class="Pp"></div>
<pre>
  kill -1 1
</pre>
<div class="Pp"></div>
If Monit is used to monitor services that are also started at boot time (e.g.
  services started via SYSV init rc scripts or via inittab) then, in some cases,
  a race condition could occur. That is; if a service is slow to start, Monit
  can assume that the service is not running and possibly try to start it and
  raise an alert, while, in fact the service is already about to start or
  already in its startup sequence. Please see the FAQ for a solution to this
  problem. The short version is to start Monit on a higher run-level after
  system processes.
<h1 class="Sh" title="Sh" id="INCLUDE_FILES"><a class="selflink" href="#INCLUDE_FILES">INCLUDE
  FILES</a></h1>
The Monit control file, &quot;monitrc&quot;, can include additional
  configuration files. This feature helps one to organize configuration into
  separate files instead of having everything in one file, if you like this kind
  of thing. Include statements can be placed at virtually any place in
  &quot;monitrc&quot; though the convention is at the bottom. The syntax is the
  following:
<div class="Pp"></div>
<pre>
  include globstring
</pre>
<div class="Pp"></div>
The globstring is any kind of string as defined in glob(7). Thus, you can refer
  to a single file or you can load several files at once. If you want to use
  whitespace in your string the globstring needs to be embedded into quotes (')
  or double quotes (&quot;). If the globstring matches a directory instead of a
  file, it is silently ignored.
<div class="Pp"></div>
Any <i>include</i> statements in an included file are parsed as in the main
  control file.
<div class="Pp"></div>
If the globstring matches several results, the files are included in a non
  sorted manner. If you need to rely on a certain order, you should avoid
  wild-card globbing and instead specify the full path of files included.
<div class="Pp"></div>
An example,
<div class="Pp"></div>
<pre>
 include /etc/monit.d/*.cfg
</pre>
<div class="Pp"></div>
This will load any file matching the globstring. That is, all files in
  <i>/etc/monit.d</i> that ends with the prefix <i>.cfg</i>.
<h1 class="Sh" title="Sh" id="MONIT_HTTPD"><a class="selflink" href="#MONIT_HTTPD">MONIT
  HTTPD</a></h1>
If specified in the control file, Monit will start with http support. You can
  then use Monit CLI to start and stop services, disable or enable service
  monitoring as well as view the status of each service.
<div class="Pp"></div>
If http support is enabled over TCP rather than over a Unix Socket, you can also
  view Monit's informative dashboard in your web browser.
<div class="Pp"></div>
Note that if HTTP support is disabled, the Monit CLI interface will have reduced
  functionality, as most CLI commands (such as &quot;monit status&quot;) need to
  communicate with the Monit background process via the the HTTP interface. We
  strongly recommend having HTTP support enabled. If security is a concern, bind
  the HTTP interface to local host only or use Unix Socket so Monit is not
  accessible from the outside.
<div class="Pp"></div>
Syntax for TCP port:
<div class="Pp"></div>
<pre>
  SET HTTPD PORT &lt;number&gt; [ADDRESS &lt;hostname | IP-address&gt;]
      [SSL &lt;ENABLE | DISABLE&gt;]
      [PEMFILE &lt;path&gt;]
      [CLIENTPEMFILE &lt;path&gt;]
      [ALLOWSELFCERTIFICATION]
      [SIGNATURE &lt;ENABLE | DISABLE&gt;]
      ALLOW &lt;user:password | IP-address | IP-range&gt;+
</pre>
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 set httpd port 2812
     allow username:password
</pre>
<div class="Pp"></div>
You can now use &lt;http://localhost:2812/&gt; to access Monit's web interface
  from a browser, after you have entered username and password as credentials.
<div class="Pp"></div>
Syntax for Unix Socket:
<div class="Pp"></div>
<pre>
  SET HTTPD UNIXSOCKET &lt;path&gt;
      ALLOW &lt;user:password&gt;+
</pre>
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 set httpd unixsocket /var/run/monit.sock
     allow username:password
</pre>
<div class="Pp"></div>
<b>Options</b>:
<div class="Pp"></div>
<b>UNIXSOCKET</b> set the path to the Unix Socket Monit should bind to and
  listen on.
<div class="Pp"></div>
<b>PORT</b> set the port Monit should bind to and listen on. Monit is usually
  setup on port 2812.
<div class="Pp"></div>
<b>ADDRESS</b> make Monit listen on a specific interface only. For example if
  you <i>don't</i> want to expose Monit's web interface to the network, bind it
  to localhost only. Monit will accept connections on any address by default (if
  ADDRESS option is missing).
<div class="Pp"></div>
For example to limit the web interface to localhost only:
<div class="Pp"></div>
<pre>
 set httpd
     port 2812
     use address 127.0.0.1
     allow username:password
</pre>
<div class="Pp"></div>
<b>SSL</b> enable TLS for Monit's web interface. The <i>PEMFILE</i> option holds
  both the server's private key and certificate. This file should be stored in a
  safe place on the filesystem and should have strict permissions, no more than
  0700.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 set httpd
     port 2812
     ssl enable
     pemfile /etc/certs/monit.pem
     allow myuser:mypassword
</pre>
<div class="Pp"></div>
You can now use &lt;https://localhost:2812/&gt; to access the Monit web server
  over a TLS encrypted connection.
<div class="Pp"></div>
OpenSSL FIPS is supported. To enable FIPS mode (provided your OpenSSL library
  supports it), add this statement to Monit control file:
<div class="Pp"></div>
<pre>
 SET FIPS
</pre>
<div class="Pp"></div>
<b>CLIENTPEMFILE</b> client certificate based authentication. A connecting
  client has to provide a certificate known to Monit in order to connect. This
  file also needs to have all necessary CA certificates. By default self-signed
  client certificates are <b>not</b> allowed. If you want to use a self signed
  certificate from a client it has to be allowed explicitly with the
  <b>ALLOWSELFCERTIFICATION</b> statement.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 set httpd
     port 2812
     ssl enable
     pemfile /etc/certs/monit.pem
     clientpemfile /etc/certs/monit-client.pem
</pre>
<div class="Pp"></div>
<b>SIGNATURE</b> can be used to hide Monit version from the HTTP response header
  and error pages. For example:
<div class="Pp"></div>
<pre>
  set httpd
    port 2812
    signature disable
    allow myuser:mypassword
</pre>
<h2 class="Ss" title="Ss" id="Authentication"><a class="selflink" href="#Authentication">Authentication</a></h2>
Access to the Monit web interface is controlled primarily via the <b>ALLOW</b>
  option which is used to specify authentication and authorize only specific
  clients to connect.
<div class="Pp"></div>
If the Monit command line interface is being used, at least one cleartext
  password is necessary (see bellow), otherwise the Monit command line interface
  will not be able to connect to the Monit web interface.
<div class="Pp"></div>
Clients trying to connect to Monit, but submit a wrong username and/or password
  are logged with their IP-address.
<div class="Pp"></div>
<i>Client certificates</i>
<div class="Pp"></div>
This authentication method is a strong authentication mechanism and employ HTTPS
  client certificates to verify the authenticity of a connecting client. Clients
  must posses a Public Key Certificate known by Monit. The client must connect
  to Monit over SSL and Monit ask the client to send its certificate. Upon
  receiving the certificate Monit compares the certificate to certificates
  located in the <i>CLIENTPEMFILE</i> file. Access is granted if the client
  certificate is in this file. See <i>CLIENTPEMFILE</i> above for details.
<div class="Pp"></div>
<i>Host and network allow list</i>
<div class="Pp"></div>
Monit maintains an access-control list of hosts and networks allowed to connect.
  You can add as many hosts as you want to, but only hosts with a valid domain
  name or its IP address are allowed.
<div class="Pp"></div>
Monit will query a name server to check any hosts trying to connect. If a host
  (client) is trying to connect, but cannot be found in the access list or
  cannot be resolved, Monit will shutdown the connection to the client promptly.
<div class="Pp"></div>
Control file example:
<div class="Pp"></div>
<pre>
  set httpd port 2812
      allow localhost
      allow my.other.work.machine.com
      allow 10.1.1.1
      allow 192.168.1.0/255.255.255.0
      allow 10.0.0.0/8
</pre>
<div class="Pp"></div>
Clients, not mentioned in the allow list, trying to connect to Monit will be
  denied access and are logged with their IP-address.
<div class="Pp"></div>
<i>Basic Authentication</i>
<div class="Pp"></div>
Monit supports Basic Authentication as described in RFC 2617.
<div class="Pp"></div>
In short; a server challenge a client (e.g. a Browser) to send authentication
  information (username and password) and if accepted, the server will allow the
  client access to the requested document.
<div class="Pp"></div>
The biggest weakness with Basic Authentication is that username and password is
  sent in clear-text over the network (i.e. base64 encoded). It is therefor
  recommended that you do not use this authentication method unless you run
  Monit with <i>ssl</i> support. With ssl, it is safe to use Basic
  Authentication since <i>all</i> http data, including Basic Authentication
  headers will be encrypted.
<div class="Pp"></div>
Cleartext user and password
<div class="Pp"></div>
Monit will use Basic Authentication if an allow statement contains a username
  and a password separated with a single ':' character. Special characters can
  be used, but for non-alphanumerics the password has to be quoted.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 ALLOW &lt;username&gt;:&lt;password&gt;
</pre>
<div class="Pp"></div>
PAM
<div class="Pp"></div>
PAM is supported on platforms which provide PAM (such as Linux, Mac OS X,
  FreeBSD, NetBSD).
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 ALLOW @&lt;group&gt;
</pre>
<div class="Pp"></div>
where &quot;group&quot; is the group name allowed to access Monit's web
  interface. Monit uses a PAM service called <i>monit</i> for PAM
  authentication, see the PAM manual page for detailed instructions on how to
  set the PAM service and PAM authentication plugins.
<div class="Pp"></div>
Sample PAM service for Monit on Mac OS X (store as &quot;/etc/pam.d/monit&quot;
  file):
<div class="Pp"></div>
<pre>
  # monit: auth account password session
  auth       sufficient     pam_securityserver.so
  auth       sufficient     pam_unix.so
  auth       required       pam_deny.so
  account    required       pam_permit.so
</pre>
<div class="Pp"></div>
And monitrc config which only allows group &quot;admin&quot; authenticated via
  PAM to access the web interface:
<div class="Pp"></div>
<pre>
  set httpd
      port 2812
      allow @admin
</pre>
<div class="Pp"></div>
htpasswd file
<div class="Pp"></div>
Alternatively you can use files in &quot;htpasswd&quot; format (one
  <i>user:passwd</i> entry per line), like so: <i>allow
  [cleartext|crypt|md5]</i> <i>/path [users]</i>. By default cleartext passwords
  are read. In case the passwords are digested it is necessary to specify the
  cryptographic method. If you do not want all users in the password file to
  have access to Monit you can specify only those users that should have access,
  in the allow statement. Otherwise all users are added.
<div class="Pp"></div>
Example1:
<div class="Pp"></div>
<pre>
  set httpd port 2812
      allow hauk:password
      allow md5 /etc/httpd/htpasswd john paul ringo george
</pre>
<div class="Pp"></div>
If you use this method together with a host list, then only clients from the
  listed hosts will be allowed to connect to the Monit http server and each
  client will be asked to provide a username and a password.
<div class="Pp"></div>
Example2:
<div class="Pp"></div>
<pre>
  set httpd port 2812
      allow localhost
      allow 10.1.1.1
      allow hauk:&quot;passw@rd&quot;
</pre>
<div class="Pp"></div>
If you only want to use Basic Authentication, then just provide allow entries
  with username and password or password files as in example 1 above.
<div class="Pp"></div>
Read-only users
<div class="Pp"></div>
Finally it is possible to define some users as read-only. A read-only user can
  read the Monit web pages but will <i>not</i> get access to push-buttons and
  cannot change a service from the web interface.
<div class="Pp"></div>
<pre>
  set httpd port 2812
      allow admin:password
      allow hauk:password read-only
      allow @admins
      allow @users read-only
</pre>
<div class="Pp"></div>
A user is set to read-only by using the <i>read-only</i> keyword <b>after</b>
  username:password. In the above example the user <i>hauk</i> is defined as a
  read-only user, while the <i>admin</i> user has all access rights.
<h1 class="Sh" title="Sh" id="ALERT_MESSAGES"><a class="selflink" href="#ALERT_MESSAGES">ALERT
  MESSAGES</a></h1>
Monit will raise an alert in the following situations:
<div class="Pp"></div>
<pre>
 o A service does not exist (e.g. process is not running)
 o Cannot read service data (e.g. cannot get filesystem usage)
 o Execution of a service related script failed (e.g. start failed)
 o Invalid service type (e.g. if path points to directory instead of file)
 o Custom test script returned error
 o Ping test failed
 o TCP/UDP connection and/or port test failed
 o Resource usage test failed (e.g. cpu usage too high)
 o Checksum mismatch or change (e.g. file changed)
 o File size test failed (e.g. file too large)
 o Timestamp test failed (e.g. file is older then expected)
 o Permission test failed (e.g. file mode doesn't match)
 o An UID test failed (e.g. file owned by different user)
 o A GID test failed (e.g. file owned by different group)
 o A process' PID changed out of Monit's control
 o A process' PPID changed out of Monit control
 o Too many service recovery attempts failed
 o A file content test found a match
 o Filesystem flags changed
 o A service action was performed by administrator
 o A network link failed
 o A network link capacity changed
 o A network link saturation failed
 o A network link upload/download rate failed
 o Monit was started, stopped or reloaded
</pre>
<div class="Pp"></div>
To get an alert via e-mail, set the alert target using the global &quot;set
  alert&quot; statement (for all services) or the &quot;alert&quot; statement in
  the context of a service entry (for a single service).
<h2 class="Ss" title="Ss" id="Setting_an_alert_recipient"><a class="selflink" href="#Setting_an_alert_recipient">Setting
  an alert recipient</a></h2>
If an event occurs, Monit will send an alert. There are two kinds of alert
  statement: global and local.
<div class="Pp"></div>
Global syntax:
<div class="Pp"></div>
<pre>
 SET ALERT mail-address [[NOT] {event, ...}] [REMINDER cycles]
</pre>
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 set alert foo@bar
</pre>
<div class="Pp"></div>
will send a default email to the address foo@bar whenever any event occurs on
  any service.
<div class="Pp"></div>
If you want to send alert messages to more email addresses, add a &quot;set
  alert 'email'&quot; statement for each address.
<div class="Pp"></div>
It is also possible to use the local alert statement in the context of a service
  check to enable alert for the given service only:
<div class="Pp"></div>
<pre>
 ALERT mail-address [[NOT] {event, ...}] [REMINDER cycles]
</pre>
<div class="Pp"></div>
Local alert example:
<div class="Pp"></div>
<pre>
 check host myhost with address 1.2.3.4
     if failed port 3306 protocol mysql then alert
     if failed port 80 protocol http then alert
     alert foo@baz # Local service alert
</pre>
<div class="Pp"></div>
You can combine global and local alert statements. If there is a conflict, the
  local alert has precedence and overrides the global statement.
<div class="Pp"></div>
<i>Setting an event filter</i>
<div class="Pp"></div>
If you only want an alert message sent for certain events, list them in an
  &quot;{event, ...}&quot; block, e.g.:
<div class="Pp"></div>
<pre>
 set alert foo@bar only on { timeout, nonexist }
</pre>
<div class="Pp"></div>
The event list can also be negated to send alerts for all events <i>except</i>
  those which are listed, by prepending the list with the word &quot;not&quot;.
  For example, to receive all alerts except notification about Monit program
  start and stop:
<div class="Pp"></div>
<pre>
 set alert foo@bar but not on { instance }
</pre>
<div class="Pp"></div>
Here is a list of all possible event types emitted by Monit. Values from the
  first column can be used in the event filter list mentioned above:
<div class="Pp"></div>
<pre>
 Event:     | Failure state:              | Success state:
 ---------------------------------------------------------------------
 action     | &quot;Action done&quot;               | &quot;Action done&quot;
 checksum   | &quot;Checksum failed&quot;           | &quot;Checksum succeeded&quot;
 bytein     | &quot;Download bytes exceeded&quot;   | &quot;Download bytes ok&quot;
 byteout    | &quot;Upload bytes exceeded&quot;     | &quot;Upload bytes ok&quot;
 connection | &quot;Connection failed&quot;         | &quot;Connection succeeded&quot;
 content    | &quot;Content failed&quot;,           | &quot;Content succeeded&quot;
 data       | &quot;Data access error&quot;         | &quot;Data access succeeded&quot;
 exec       | &quot;Execution failed&quot;          | &quot;Execution succeeded&quot;
 fsflags    | &quot;Filesystem flags failed&quot;   | &quot;Filesystem flags succeeded&quot;
 gid        | &quot;GID failed&quot;                | &quot;GID succeeded&quot;
 icmp       | &quot;Ping failed&quot;               | &quot;Ping succeeded&quot;
 instance   | &quot;Monit instance changed&quot;    | &quot;Monit instance changed not&quot;
 invalid    | &quot;Invalid type&quot;              | &quot;Type succeeded&quot;
 link       | &quot;Link down&quot;                 | &quot;Link up&quot;
 nonexist   | &quot;Does not exist&quot;            | &quot;Exists&quot;
 packetin   | &quot;Download packets exceeded&quot; | &quot;Download packets ok&quot;
 packetout  | &quot;Upload packets exceeded&quot;   | &quot;Upload packets ok&quot;
 permission | &quot;Permission failed&quot;         | &quot;Permission succeeded&quot;
 pid        | &quot;PID failed&quot;                | &quot;PID succeeded&quot;
 ppid       | &quot;PPID failed&quot;               | &quot;PPID succeeded&quot;
 resource   | &quot;Resource limit matched&quot;    | &quot;Resource limit succeeded&quot;
 saturation | &quot;Saturation exceeded&quot;       | &quot;Saturation ok&quot;
 size       | &quot;Size failed&quot;               | &quot;Size succeeded&quot;
 speed      | &quot;Speed failed&quot;              | &quot;Speed ok&quot;
 status     | &quot;Status failed&quot;             | &quot;Status succeeded&quot;
 timeout    | &quot;Timeout&quot;                   | &quot;Timeout recovery&quot;
 timestamp  | &quot;Timestamp failed&quot;          | &quot;Timestamp succeeded&quot;
 uid        | &quot;UID failed&quot;                | &quot;UID succeeded&quot;
 uptime     | &quot;Uptime failed&quot;             | &quot;Uptime succeeded&quot;
</pre>
<div class="Pp"></div>
Each alert recipient can have it's own filter, for example:
<div class="Pp"></div>
<pre>
 set alert foo@bar { nonexist, timeout, resource, icmp, connection }
 set alert security@bar on { checksum, permission, uid, gid }
 set alert admin@bar
</pre>
<div class="Pp"></div>
<i>Setting an error reminder</i>
<div class="Pp"></div>
Monit by default sends just <i>one</i> notification if a service failed and
  another when/if it recover. If you want to be notified that the service is
  still in a failed state, you can use the reminder option in the alert
  statement:
<div class="Pp"></div>
<pre>
 SET ALERT mail-address [WITH] REMINDER [ON] number [CYCLES]
</pre>
<div class="Pp"></div>
For example if you want to be notified each tenth cycle if a service remains in
  a failed state, you can use:
<div class="Pp"></div>
<pre>
 alert foo@bar with reminder on 10 cycles
</pre>
<div class="Pp"></div>
Likewise if you want to be notified on each failed cycle, you can use:
<div class="Pp"></div>
<pre>
  alert foo@bar with reminder on 1 cycle
</pre>
<h2 class="Ss" title="Ss" id="Disabling_alerts_for_some_service"><a class="selflink" href="#Disabling_alerts_for_some_service">Disabling
  alerts for some service</a></h2>
To suppress alerts for some user and service, add the &quot;noalert&quot;
  statement in the context of a service check.
<div class="Pp"></div>
<pre>
 NOALERT mail-address
</pre>
<div class="Pp"></div>
Example (send all alerts to foo@bar except for service p3):
<div class="Pp"></div>
<pre>
 set alert foo@bar
 check process p1 with pidfile /var/run/p1.pid
 check process p2 with pidfile /var/run/p2.pid
 check process p3 with pidfile /var/run/p3.pid
     noalert foo@bar
</pre>
<h2 class="Ss" title="Ss" id="Message_format"><a class="selflink" href="#Message_format">Message
  format</a></h2>
The alert message format can be modified by using the &quot;set
  mail-format&quot; statement:
<div class="Pp"></div>
<pre>
 SET MAIL-FORMAT {mail-format}
</pre>
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 set mail-format {
      from: monit@foo.bar
  reply-to: support@domain.com
   subject: $SERVICE $EVENT at $DATE
   message: Monit $ACTION $SERVICE at $DATE on $HOST: $DESCRIPTION.
            Yours sincerely,
            monit
 }
</pre>
<div class="Pp"></div>
The <i>from:</i> option is the sender's email address. That is, the email
  address Monit will pretend it is sending alerts from. It does not have to be a
  real email-address only a proper formatted address.
<div class="Pp"></div>
The <i>reply-to:</i> option can be used to set the reply-to mail header.
<div class="Pp"></div>
The <i>subject:</i> option sets the message subject and must be on only
  <i>one</i> line.
<div class="Pp"></div>
The <i>message:</i> option sets the mail body. This option should always be the
  last in a mail-format statement. The mail body can be as long as needed, but
  must <i>not</i> contain the block-closing '}' character.
<div class="Pp"></div>
You need not use all options, only the option which you want to override. For
  example to globally change the senders address only:
<div class="Pp"></div>
<pre>
 set mail-format { from: bofh@foo.bar }
</pre>
<div class="Pp"></div>
The subject and body may contain $NAME variables, which are expanded by Monit.
  Here is a list of variables that can be used when composing an alert message.
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$EVENT</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    A string describing the event that occurred.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$SERVICE</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    The service name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$DATE</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    The current time and date (RFC 822 date style).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$HOST</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    The name of the host Monit is running on</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$ACTION</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    The name of the action which was done by Monit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i></i><i>$DESCRIPTION</i><i></i>
    <div style="height: 1.00em;">&#x00A0;</div>
    The description of the error condition</dd>
</dl>
<h2 class="Ss" title="Ss" id="Setting_a_mail_server_for_alert_delivery"><a class="selflink" href="#Setting_a_mail_server_for_alert_delivery">Setting
  a mail server for alert delivery</a></h2>
The mail server Monit should use to send alert messages is defined with a
  &quot;set mailserver&quot; statement:
<div class="Pp"></div>
<pre>
 SET MAILSERVER &lt;hostname|ip-address [PORT number] [USERNAME string]
 [PASSWORD string] [using SSLAUTO|SSLV2|SSLV3|TLSV1|TLSV11|TLSV12]
 [CERTMD5 checksum]&gt;, ...
   [with TIMEOUT X SECONDS]
   [using HOSTNAME hostname]
</pre>
<div class="Pp"></div>
Multiple mail servers can be set by using a comma separated list. If Monit
  cannot connect to the first server, it will try the next in the list and so
  on.
<div class="Pp"></div>
The port statement allows to override the default SMTP port (465 for SSL, or 25
  for TLS and non secure connection).
<div class="Pp"></div>
Monit supports AUTH PLAIN and AUTH LOGIN for SMTP authentication. You can set a
  username and a password using the USERNAME and PASSWORD options.
<div class="Pp"></div>
You can enable SSL or TLS with optional certificate checksum.
<div class="Pp"></div>
The default connection timeout is 5 seconds. You can rise this limit using the
  TIMEOUT option.
<div class="Pp"></div>
Example (setting two mail servers for failover):
<div class="Pp"></div>
<pre>
 set mailserver smtp.gmail.com, smtp.other.host
</pre>
<div class="Pp"></div>
By default, Monit uses the local host name in SMTP HELO/EHLO and in the
  Message-ID header. You can override this using the HOSTNAME option.
<h2 class="Ss" title="Ss" id="Event_queue"><a class="selflink" href="#Event_queue">Event
  queue</a></h2>
If no mail server is available, Monit <i>can</i> queue events in the local
  file-system for retry until the mail server recovers.
<div class="Pp"></div>
If Monit is used with M/Monit, the event queue provides a safe event store for
  M/Monit in the case of temporary problems.
<div class="Pp"></div>
The event queue is persistent across Monit restarts and provided that the
  back-end filesystem is persistent, across system restart as well.
<div class="Pp"></div>
By default, the queue is disabled and if the alert handler fails, Monit will
  simply drop the alert message.
<div class="Pp"></div>
To enable the event queue, add the following statement:
<div class="Pp"></div>
<pre>
 SET EVENTQUEUE BASEDIR &lt;path&gt; [SLOTS &lt;number&gt;]
</pre>
<div class="Pp"></div>
The &lt;path&gt; is the path to the directory where events will be stored.
<div class="Pp"></div>
Optionally if you want to limit the queue size, use the slots option to only
  store up to <i>number</i> event messages.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
  set eventqueue basedir /var/monit slots 5000
</pre>
<div class="Pp"></div>
If you are running more then one Monit instance on the same machine, you
  <b>must</b> use separated event queue directories.
<h1 class="Sh" title="Sh" id="SERVICE_METHODS"><a class="selflink" href="#SERVICE_METHODS">SERVICE
  METHODS</a></h1>
Each service can have associated <i>start</i>, <i>stop</i> and <i>restart</i>
  methods which Monit can use to execute action on the service.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 &lt;START | STOP | RESTART&gt; [PROGRAM] = &quot;program&quot;
        [[AS] UID &lt;number | string&gt;]
        [[AS] GID &lt;number | string&gt;]
        [[WITH] TIMEOUT &lt;number&gt; SECOND(S)]
</pre>
<div class="Pp"></div>
If the &quot;program&quot; is a shell script it must begin with &quot;#!&quot;
  and the remainder of the first line must specify an interpreter for the
  program. e.g. &quot;#!/bin/sh&quot;
<div class="Pp"></div>
The &quot;program&quot; must also be executable (for example mode 0755).
<div class="Pp"></div>
It's possible to write scripts directly into the <i>program</i> this way:
<div class="Pp"></div>
<pre>
 stop = &quot;/bin/bash -c 'kill -s SIGTERM `cat /var/run/process.pid`'&quot;
</pre>
<div class="Pp"></div>
By default the program is executed as the user under which Monit is running. If
  Monit is running as root, you may optionally specify the <i>UID</i> and
  <i>GID</i> the executed program should switch to.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check process mmonit with pidfile /usr/local/mmonit/mmonit/logs/mmonit.pid
   start program = &quot;/usr/local/mmonit/bin/mmonit&quot; as uid &quot;mmonit&quot; and gid &quot;mmonit&quot;
   stop program = &quot;/usr/local/mmonit/bin/mmonit stop&quot; as uid &quot;mmonit&quot; and gid &quot;mmonit&quot;
</pre>
<div class="Pp"></div>
In the case of a process check, Monit will wait up to 30 seconds for the
  start/stop action to finish before giving up and report an error. You can
  override this timeout using the <i>TIMEOUT</i> option.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check process foobar with pidfile /var/run/foobar.pid
   start program = &quot;/etc/init.d/foobar start&quot; with timeout 60 seconds
   stop program = &quot;/etc/init.d/foobar stop&quot;
</pre>
<h1 class="Sh" title="Sh" id="SERVICE_POLL_TIME"><a class="selflink" href="#SERVICE_POLL_TIME">SERVICE
  POLL TIME</a></h1>
Services are checked in regular intervals by the &quot;set daemon n&quot;
  statement. Checks are performed in the same order as they are written in the
  &quot;.monitrc&quot; file, except if dependencies are setup between services.
<div class="Pp"></div>
It is possible to modify a service check schedule by using the &quot;every&quot;
  statement.
<div class="Pp"></div>
There are three variants:
<dl class="Bl-tag">
  <dt class="It-tag">1. custom interval based on a poll cycle multiple</dt>
  <dd class="It-tag">
    <pre>
 EVERY [number] CYCLES
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2. check is schedule based on a cron-style string</dt>
  <dd class="It-tag">
    <pre>
 EVERY [cron]
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3. do-not-check schedule based on a cron-style string</dt>
  <dd class="It-tag">
    <pre>
 NOT EVERY [cron]
    </pre>
  </dd>
</dl>
<div class="Pp"></div>
A cron-style string, consist of 5 fields separated with white-space. All fields
  are required:
<div class="Pp"></div>
<pre>
 Name:        | Allowed values:            | Special characters:
 ---------------------------------------------------------------
 Minutes      | 0-59                       | * - ,
 Hours        | 0-23                       | * - ,
 Day of month | 1-31                       | * - ,
 Month        | 1-12 (1=jan, 12=dec)       | * - ,
 Day of week  | 0-6 (0=sunday, 6=saturday) | * - ,
</pre>
<div class="Pp"></div>
The special characters:
<div class="Pp"></div>
<pre>
 Character:   | Description:
 ---------------------------------------------------------------
 * (asterisk) | The asterisk indicates that the expression will
              | match for all values of the field; e.g., using
              | an asterisk in the 4th field (month) would
              | indicate every month.
 - (hyphen)   | Hyphens are used to define ranges. For example,
              | 8-9 in the hour field indicate between 8AM and
              | 9AM. Note that range is from start time until and
              | including end time. That is, from 8AM and until
              | 10AM unless minutes are set. Another example,
              | 1-5 in the weekday field, specify from monday to
              | friday (including friday).
 , (comma)    | Comma are used to specify a sequence. For example
              | 17,18 in the day field indicate the 17th and 18th
              | day of the month. A sequence can also include
              | ranges. For example, using 1-5,0 in the weekday
              | field indicate monday to friday and sunday.
</pre>
<div class="Pp"></div>
Example 1: Check once per two cycles
<div class="Pp"></div>
<pre>
 check process nginx with pidfile /var/run/nginx.pid
       every 2 cycles
</pre>
<div class="Pp"></div>
Example 2: Check every workday 8AM-7PM
<div class="Pp"></div>
<pre>
 check program checkOracleDatabase
        with path /var/monit/programs/checkoracle.pl
       every &quot;* 8-19 * * 1-5&quot;
</pre>
<div class="Pp"></div>
Example 3: Do not run the check in the backup window on Sunday 0AM-3AM
<div class="Pp"></div>
<pre>
 check process mysqld with pidfile /var/run/mysqld.pid
       not every &quot;* 0-3 * * 0&quot;
</pre>
<div class="Pp"></div>
Limitations:
<div class="Pp"></div>
The current scheduler is poll cycle based. When a service check is constraint
  with the <i>every cron</i> statement, Monit will check whether the current
  time match the cron-string pattern. If it does, the check is performed,
  otherwise it is skipped. The cron specification thus does not guarantee when
  exactly the test will run, this depends on the default poll time and the
  length of the check cycle. In other words, we cannot guarantee that Monit will
  run on a specific time. Therefor we <b>strongly</b> recommend to use an
  asterix in the minute field or at minimum a range, e..g. 0-15. <b>Never</b>
  use a specific minute as Monit may not run on that minute.
<div class="Pp"></div>
We will address this limitation in a future release and convert the scheduler
  from serial polling into a parallel non-blocking scheduler where checks are
  guaranteed to run on time and with seconds resolution.
<h1 class="Sh" title="Sh" id="SERVICE_GROUPS"><a class="selflink" href="#SERVICE_GROUPS">SERVICE
  GROUPS</a></h1>
Service entries in the control file, <i>monitrc</i>, can be grouped together by
  the <i>group</i> statement. The syntax is simply (keyword in capital):
<div class="Pp"></div>
<pre>
  GROUP groupname
</pre>
<div class="Pp"></div>
With this statement it is possible to group similar service entries together and
  manage them as a whole. Monit provides functions to start, stop, restart,
  monitor and unmonitor a group of services, like so:
<div class="Pp"></div>
To start a group of services from the console:
<div class="Pp"></div>
<pre>
  monit -g &lt;groupname&gt; start
</pre>
<div class="Pp"></div>
To stop a group of services:
<div class="Pp"></div>
<pre>
  monit -g &lt;groupname&gt; stop
</pre>
<div class="Pp"></div>
To restart a group of services:
<div class="Pp"></div>
<pre>
  monit -g &lt;groupname&gt; restart
</pre>
<div class="Pp"></div>
A service can be added to multiple groups by using more than one group
  statement:
<div class="Pp"></div>
<pre>
  group www
  group filesystem
</pre>
<h1 class="Sh" title="Sh" id="SERVICE_MONITORING_MODE"><a class="selflink" href="#SERVICE_MONITORING_MODE">SERVICE
  MONITORING MODE</a></h1>
Monit supports three monitoring modes per service: <i>active</i>, <i>passive</i>
  and <i>manual</i>.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
  MODE &lt;ACTIVE | PASSIVE | MANUAL&gt;
</pre>
<div class="Pp"></div>
In <i>active</i> mode (the default), Monit will pro-actively monitor a service
  and in case of problems raise alerts and/or restart the service.
<div class="Pp"></div>
In <i>passive</i> mode, Monit will passively monitor a service and will raise
  alerts, but will <b>not</b> try to fix a problem by executing <i>start</i>,
  <i>stop</i> or <i>restart</i>.
<div class="Pp"></div>
In <i>manual</i> mode, Monit will enter <i>active</i> mode <i>only</i> if a
  service was started via Monit:
<div class="Pp"></div>
<pre>
  monit start &lt;servicename&gt;
</pre>
<div class="Pp"></div>
Use &quot;monit stop &lt;servicename&gt;&quot; to stop the service and take it
  out of Monit's control. The manual mode can be used to build a simple cluster
  with active/passive HA-services.
<div class="Pp"></div>
A service's monitoring state is persistent across Monit restart.
<div class="Pp"></div>
If you use Monit in a HA-cluster you should place the Monit state file in a
  temporary filesystem so if the machine which runs HA-services should crash and
  the stand-by machine take over its services, the HA-services won't be started
  after the crashed node will boot again:
<div class="Pp"></div>
<pre>
  set statefile /tmp/monit.state
</pre>
<h1 class="Sh" title="Sh" id="SERVICE_RESTART_LIMIT"><a class="selflink" href="#SERVICE_RESTART_LIMIT">SERVICE
  RESTART LIMIT</a></h1>
<b>Monit</b> provides a restart limit mechanism for situations where a service
  simply refuses to start or respond over a longer period.
<div class="Pp"></div>
The restart limit mechanism is based on number of service restarts and number of
  poll-cycles. For example, if a service had <i>x</i> restarts within <i>y</i>
  poll-cycles (where <i>x</i> &lt;= <i>y</i>) then Monit will perform an action
  (for example unmonitor the service). If a timeout occurs, Monit will send an
  alert message if you have register interest for this event.
<div class="Pp"></div>
The syntax for the timeout statement is as follows (keywords are in capital):
<div class="Pp"></div>
<pre>
 IF &lt;number&gt; RESTART &lt;number&gt; CYCLE(S) THEN &lt;action&gt;
</pre>
<div class="Pp"></div>
The <i>action</i> value is either one of common actions or TIMEOUT (for backward
  compatibility, equals to UNMONITOR action).
<div class="Pp"></div>
Here is an example where Monit will unmonitor the service if it was restarted 2
  times within 3 cycles:
<div class="Pp"></div>
<pre>
 if 2 restarts within 3 cycles then unmonitor
</pre>
<div class="Pp"></div>
To have Monit check the service again after monitoring was disabled, run
  &quot;monit monitor servicename&quot; from the command line.
<div class="Pp"></div>
Example for setting custom exec on timeout:
<div class="Pp"></div>
<pre>
 if 5 restarts within 5 cycles then exec &quot;/foo/bar&quot;
</pre>
<div class="Pp"></div>
Example for stopping the service:
<div class="Pp"></div>
<pre>
 if 7 restarts within 10 cycles then stop
</pre>
<h1 class="Sh" title="Sh" id="SERVICE_DEPENDENCIES"><a class="selflink" href="#SERVICE_DEPENDENCIES">SERVICE
  DEPENDENCIES</a></h1>
If specified in the control file, Monit can do dependency checking before start,
  stop, monitoring or unmonitoring of services. The dependency statement may be
  used within any service entries in the Monit control file.
<div class="Pp"></div>
The syntax for the depend statement is simply:
<div class="Pp"></div>
<pre>
 DEPENDS on service[, service [,...]]
</pre>
<div class="Pp"></div>
Where <b>service</b> is a check service entry name used in your
  &quot;.monitrc&quot; file, for instance <b>apache</b> or <b>datafs</b>.
<div class="Pp"></div>
You may add more than one service name of any type or use more than one depend
  statement in an entry.
<div class="Pp"></div>
Services specified in a <i>depend</i> statement will be checked during
  stop/start/monitor/unmonitor operations. If a service is stopped or
  unmonitored it will stop/unmonitor any services that depends on itself.
  Likewise, if a service is started, it will first stop any services that
  depends on itself and after it is started, start all depending services again.
  If the service is to be monitored (enable monitoring), all services which this
  service depends on will be monitored before enabling monitoring of this
  service.
<div class="Pp"></div>
Here is an example where we set up an apache service entry to depend on the
  underlying apache binary. If the binary should change an alert is sent and
  apache is not monitored anymore. The rationale is security and that Monit
  should not execute a possibly cracked apache binary.
<div class="Pp"></div>
<pre>
 (1) check process apache
 (2)    with pidfile &quot;/usr/local/apache/logs/httpd.pid&quot;
 (3)    ...
 (4)    depends on httpd
 (5)
 (6) check file httpd with path /usr/local/apache/bin/httpd
 (7)    if failed checksum then unmonitor
</pre>
<div class="Pp"></div>
The first entry is the process entry for apache (abbreviated for clarity). The
  fourth line sets up a dependency between this entry and the service entry
  named httpd in line 6. A dependency tree works as follows, if an action is
  conducted in a lower branch it will propagate upward in the tree and for every
  dependent entry execute the same action. In this case, if the checksum should
  fail in line 7 then an unmonitor action is executed and the apache binary is
  not checked anymore. But since the apache process entry depends on the httpd
  entry this entry will also execute the unmonitor action. In short, if the
  checksum test for the httpd binary file should fail, both the check file httpd
  entry and the check process apache entry is set in un-monitoring mode.
<div class="Pp"></div>
A dependency tree is a general construct and can be used between all types of
  service entries and span many levels and propagate any supported action
  (except the exec action which will not propagate upward in a dependency tree
  for obvious reasons).
<div class="Pp"></div>
Here is another different example. Consider the following common server setup:
<div class="Pp"></div>
<pre>
  WEB-SERVER -&gt; APPLICATION-SERVER -&gt; DATABASE -&gt; FILESYSTEM
      (a)               (b)             (c)          (d)
</pre>
<div class="Pp"></div>
You can set dependencies so that the web-server depends on the application
  server to run before the web-server starts and the application server depends
  on the database server and the database depends on the file-system to be
  mounted before it starts. See also the example section below for examples
  using the depend statement.
<div class="Pp"></div>
Here we describe how Monit will function with the above dependencies:
<dl class="Bl-tag">
  <dt class="It-tag">If no servers are running</dt>
  <dd class="It-tag">Monit will start the servers in the following order:
      <i>d</i>, <i>c</i>, <i>b</i>, <i>a</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If all servers are running</dt>
  <dd class="It-tag">When you run 'Monit stop all' this is the stop order:
      <i>a</i>, <i>b</i>, <i>c</i>, <i>d</i>. If you run 'Monit stop d' then
      <i>a</i>, <i>b</i> and <i>c</i> are also stopped because they depend on
      <i>d</i> and finally <i>d</i> is stopped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If <i>a</i> does not run</dt>
  <dd class="It-tag">When Monit runs it will start <i>a</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If <i>b</i> does not run</dt>
  <dd class="It-tag">When Monit runs it will first stop <i>a</i> then start
      <i>b</i> and finally start <i>a</i> again.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If <i>c</i> does not run</dt>
  <dd class="It-tag">When Monit runs it will first stop <i>a</i> and <i>b</i>
      then start <i>c</i> and finally start <i>b</i> then <i>a</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If <i>d</i> does not run</dt>
  <dd class="It-tag">When Monit runs it will first stop <i>a</i>, <i>b</i> and
      <i>c</i> then start <i>d</i> and finally start <i>c</i>, <i>b</i> then
      <i>a</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">If the control file contains a depend loop.</dt>
  <dd class="It-tag">A depend loop is for example; a-&gt;b and b-&gt;a or
      a-&gt;b-&gt;c-&gt;a.
    <div style="height: 1.00em;">&#x00A0;</div>
    When Monit starts it will check for such loops and complain and exit if a
      loop was found. It will also exit with a complaint if a depend statement
      was used that does not point to a service in the control file.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SERVICE_TESTS"><a class="selflink" href="#SERVICE_TESTS">SERVICE
  TESTS</a></h1>
<i>GENERAL SYNTAX</i>
<div class="Pp"></div>
Monit provides several tests you can use in a 'check' statement to test a
  service.
<div class="Pp"></div>
You can test either for some expected value or range and take actions if the
  value changed.
<div class="Pp"></div>
General syntax for testing a specific value or range:
<div class="Pp"></div>
<pre>
 IF &lt;TEST&gt; THEN ACTION [ELSE IF SUCCEEDED THEN ACTION]
</pre>
<div class="Pp"></div>
The action is evaluated each time the &lt;TEST&gt; condition is true. Success
  action is optional and executed only when the state changes from failure to
  success. If success action is not set, Monit will send a recovery alert by
  default.
<div class="Pp"></div>
General syntax for a value change test:
<div class="Pp"></div>
<pre>
 IF CHANGED &lt;TEST&gt; THEN ACTION
</pre>
<div class="Pp"></div>
The action is executed each time the value changes. Monit will remember the new
  value and will trigger event if the value change again.
<div class="Pp"></div>
<i>ACTION</i>
<div class="Pp"></div>
In each test you must select the action to be executed from this list:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>ALERT</b> sends the user an alert event on each state
      change.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>RESTART</b> restarts the service <b>and</b> send an
      alert. Restart is performed by calling the service's registered restart
      method or by first calling the stop method followed by the start method if
      restart is not set.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>START</b> starts the service by calling the service's
      registered start method <b>and</b> send an alert.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>STOP</b> stops the service by calling the service's
      registered stop method <b>and</b> send an alert. If Monit stops a service
      it will not be checked by Monit anymore nor restarted again later. To
      reactivate monitoring of the service again you must explicitly enable
      monitoring from the web interface or from the console.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>EXEC</b> can be used to execute an arbitrary program
      <b>and</b> send an alert. If you choose this action you must state the
      program to be executed and if the program require arguments you must
      enclose the program and its arguments in a quoted string. You may
      optionally specify the uid and gid the executed program should switch to
      upon start. For instance:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 exec &quot;/usr/local/tomcat/bin/startup.sh&quot;
      as uid nobody and gid nobody
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Remember, if Monit is run by root, then all programs executed by Monit will
      be started with superuser privileges unless the uid and gid extension is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>UNMONITOR</b> will disable monitoring of the service
      <b>and</b> send an alert. The service will not be checked by Monit anymore
      nor restarted again later. To reactivate monitoring of the service you
      must explicitly enable monitoring from the web interface or from the
      console.</dd>
</dl>
<div class="Pp"></div>
<i>FAILURE TOLERANCE</i>
<div class="Pp"></div>
By default the action is executed if it matches and the service set in an error
  state. However, you can require a test to fail more than once before the error
  event is triggered and the service state changed to failed. This is useful to
  avoid getting alerts on spurious errors, which can happen, especially with
  network tests.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 FOR &lt;X&gt; CYCLES ...
</pre>
<div class="Pp"></div>
or:
<div class="Pp"></div>
<pre>
 &lt;X&gt; [TIMES WITHIN] &lt;Y&gt; CYCLES ...
</pre>
<div class="Pp"></div>
The condition can be used both for failure and success action.
<div class="Pp"></div>
The first, simpler and recommended format requires &quot;X&quot; consecutive
  events before switching the state:
<div class="Pp"></div>
<pre>
 if failed
    port 80
    for 3 cycles
 then alert
</pre>
<div class="Pp"></div>
The second format is more advanced and allows to tolerate intermittent issues,
  but still catch excessive problems, where the service is flapping between
  error and success states frequently.
<div class="Pp"></div>
For example if every second cycle fails (1-0-1-0-1-0-...), then &quot;for 2
  cycles&quot; condition will never match, despite the service having problems.
  The following statement will catch such a state:
<div class="Pp"></div>
<pre>
 if failed
    port 80
    for 3 times within 5 cycles
 then alert
</pre>
<div class="Pp"></div>
Example which sets multiple error levels and actions:
<div class="Pp"></div>
<pre>
 check filesystem rootfs with path /dev/hda1
  if space usage &gt; 80% for 5 times within 15 cycles then alert
  if space usage &gt; 90% for 5 cycles then exec '/try/to/free/the/space'
</pre>
<div class="Pp"></div>
Note: the maximum value for cycles is 64.
<h2 class="Ss" title="Ss" id="EXISTENCE_TESTING"><a class="selflink" href="#EXISTENCE_TESTING">EXISTENCE
  TESTING</a></h2>
This test is always active for the process, file, directory and fifo checks and
  is if not defined, it defaults to a restart action.
<div class="Pp"></div>
You can override the default action with the following statement:
<div class="Pp"></div>
<pre>
 IF [DOES] NOT EXIST THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check file with path /cifs/mydata
       if does not exist then exec &quot;/usr/bin/mount_cifs.sh&quot;
</pre>
<h2 class="Ss" title="Ss" id="RESOURCE_TESTING"><a class="selflink" href="#RESOURCE_TESTING">RESOURCE
  TESTING</a></h2>
Monit can examine how much system resources a service is using. This test can
  only be used within a system or process service entry in the Monit control
  file.
<div class="Pp"></div>
Depending on system or process characteristics, services can be stopped or
  restarted and alerts can be generated. Thus it is possible to utilize systems
  which are idle and to spare system under high load.
<div class="Pp"></div>
The full syntax for a resource-statement used for resource testing is as follows
  (keywords are in capital and optional statements in [brackets]),
<div class="Pp"></div>
<pre>
 IF resource operator value THEN action
</pre>
<div class="Pp"></div>
<i>resource</i> is a choice of &quot;CPU&quot;, &quot;TOTAL CPU&quot;,
  &quot;CPU([user|system|wait])&quot;, &quot;MEMORY&quot;, &quot;SWAP&quot;,
  &quot;CHILDREN&quot;, &quot;TOTAL MEMORY&quot;,
  &quot;LOADAVG([1min|5min|15min])&quot;. Some resource tests can be used inside
  a check system entry, some in a check process entry and some in both:
<div class="Pp"></div>
System only resource tests:
<div class="Pp"></div>
CPU([user|system|wait]) is the percent of time the system spend in user or
  kernel space and I/O. The user/system/wait modifier is optional, if not used,
  the total system cpu usage is tested.
<div class="Pp"></div>
SWAP is the swap usage of the system in either percent (of the systems total) or
  as an amount (Byte, kB, MB, GB).
<div class="Pp"></div>
Process only resource tests:
<div class="Pp"></div>
CPU is the CPU usage of the process itself (percent).
<div class="Pp"></div>
TOTAL CPU is the total CPU usage of the process and its children in (percent).
  You will want to use TOTAL CPU typically for services like Apache web server
  where one master process forks child processes as workers.
<div class="Pp"></div>
CHILDREN is the number of child processes of the process.
<div class="Pp"></div>
TOTAL MEMORY is the memory usage of the process and its child processes in
  either percent or as an amount (Byte, kB, MB, GB).
<div class="Pp"></div>
System and process resource tests:
<div class="Pp"></div>
MEMORY is the memory usage of the system or of a process (without children) in
  either percent (of the systems total) or as an amount (Byte, kB, MB, GB).
<div class="Pp"></div>
LOADAVG([1min|5min|15min]) refers to the system's load average. The load average
  is the number of processes in the system run queue, averaged over the
  specified time period.
<div class="Pp"></div>
<i>operator</i> is a choice of &quot;&lt;&quot;, &quot;&gt;&quot;,
  &quot;!=&quot;, &quot;==&quot; in C notation, &quot;gt&quot;, &quot;lt&quot;,
  &quot;eq&quot;, &quot;ne&quot; in shell sh notation and &quot;greater&quot;,
  &quot;less&quot;, &quot;equal&quot;, &quot;notequal&quot; in human readable
  form (if not specified, default is EQUAL).
<div class="Pp"></div>
<i>value</i> is either an integer or a real number (except for CHILDREN). For
  CPU, TOTAL CPU, MEMORY and TOTAL MEMORY you need to specify a <i>unit</i>.
  This could be &quot;%&quot; or if applicable &quot;B&quot; (Byte),
  &quot;kB&quot; (1024 Byte), &quot;MB&quot; (1024 KiloByte) or &quot;GB&quot;
  (1024 MegaByte).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
To calculate the cycles, a counter is raised whenever the expression above is
  true and it is lowered whenever it is false (but not below 0). All counters
  are reset in case of a restart.
<div class="Pp"></div>
The following is an example to check that the CPU usage of a service is not
  going beyond 50% during five poll cycles. If it does, Monit will restart the
  service:
<div class="Pp"></div>
<pre>
 if cpu is greater than 50% for 5 cycles then restart
</pre>
<h2 class="Ss" title="Ss" id="FILE_CHECKSUM_TESTING"><a class="selflink" href="#FILE_CHECKSUM_TESTING">FILE
  CHECKSUM TESTING</a></h2>
The checksum statement may only be used in a file service entry and can be used
  to check the file's MD5 or SHA1 checksum.
<div class="Pp"></div>
Check specific checksum:
<div class="Pp"></div>
<pre>
 IF FAILED [MD5|SHA1] CHECKSUM [EXPECT checksum] THEN action
</pre>
<div class="Pp"></div>
Check any file changes:
<div class="Pp"></div>
<pre>
 IF CHANGED [MD5|SHA1] CHECKSUM THEN action
</pre>
<div class="Pp"></div>
The choice of MD5 or SHA1 is optional. MD5 features a 128 bits checksum (32
  bytes hex encoded string) and SHA1 a 160 bits checksum (40 bytes hex encoded
  string). If this option is omitted, Monit will try to guess the method from
  the EXPECT string or use MD5 as the default checksum.
<div class="Pp"></div>
&quot;expect&quot; is optional and if used, specifies the md5 or sha1 string
  Monit should expect when testing a file's checksum. Monit will then not
  compute an initial checksum for the file, but instead use the string you
  submit. For example:
<div class="Pp"></div>
<pre>
 if failed
    checksum expect 8f7f419955cefa0b33a2ba316cba3659
 then alert
</pre>
<div class="Pp"></div>
You can, for example, use the GNU utility <i></i><i>md5sum</i><i>(1)</i> or
  <i></i> <i>sha1sum</i><i>(1)</i> to create a checksum string for a file and
  use this string in the expect-statement.
<div class="Pp"></div>
Reloading a server if its configuration file was changed:
<div class="Pp"></div>
<pre>
 check file apache_conf with path /etc/apache/httpd.conf
     if changed checksum then exec &quot;/usr/bin/apachectl graceful&quot;
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<h2 class="Ss" title="Ss" id="TIMESTAMP_TESTING"><a class="selflink" href="#TIMESTAMP_TESTING">TIMESTAMP
  TESTING</a></h2>
The timestamp statement may only be used in a file, fifo or directory service
  entry.
<div class="Pp"></div>
Specific timestamp syntax:
<div class="Pp"></div>
<pre>
 IF TIMESTAMP [[operator] value [unit]] THEN action
</pre>
<div class="Pp"></div>
Timestamp changed syntax:
<div class="Pp"></div>
<pre>
 IF CHANGED TIMESTAMP THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of &quot;&lt;&quot;, &quot;&gt;&quot;,
  &quot;!=&quot;, &quot;==&quot; in C notation, &quot;GT&quot;, &quot;LT&quot;,
  &quot;EQ&quot;, &quot;NE&quot; in shell sh notation and &quot;GREATER&quot;,
  &quot;LESS&quot;, &quot;EQUAL&quot;, &quot;NOTEQUAL&quot; in human readable
  form (if not specified, default is EQUAL).
<div class="Pp"></div>
<i>value</i> is a time watermark.
<div class="Pp"></div>
<i>unit</i> is either &quot;SECOND(S)&quot;, &quot;MINUTE(S)&quot;,
  &quot;HOUR(S)&quot; or &quot;DAY(S)&quot;.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
For example to reload apache if the configuration file timestamp changed:
<div class="Pp"></div>
<pre>
 check file apache_conf with path /etc/apache/httpd.conf
   if changed timestamp then exec &quot;/usr/bin/apachectl graceful&quot;
</pre>
<div class="Pp"></div>
For example testing directory for file addition or removal:
<div class="Pp"></div>
<pre>
 check directory bar path /foo/bar
       if timestamp &lt; 1 hour then alert
</pre>
<h2 class="Ss" title="Ss" id="FILE_SIZE_TESTING"><a class="selflink" href="#FILE_SIZE_TESTING">FILE
  SIZE TESTING</a></h2>
The size statement may only be used in a check file service entry. If specified
  in the control file, Monit will compute a size for a file.
<div class="Pp"></div>
Testing specific size or range:
<div class="Pp"></div>
<pre>
 IF SIZE [[operator] value [unit]] THEN action
</pre>
<div class="Pp"></div>
Testing size changes:
<div class="Pp"></div>
<pre>
 IF CHANGED SIZE THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of &quot;&lt;&quot;, &quot;&gt;&quot;,
  &quot;!=&quot;, &quot;==&quot; in C notation, &quot;GT&quot;, &quot;LT&quot;,
  &quot;EQ&quot;, &quot;NE&quot; in shell sh notation and &quot;GREATER&quot;,
  &quot;LESS&quot;, &quot;EQUAL&quot;, &quot;NOTEQUAL&quot; in human readable
  form (if not specified, default is EQUAL).
<div class="Pp"></div>
<i>value</i> is a size watermark.
<div class="Pp"></div>
<i>unit</i> is a choice of
  &quot;B&quot;,&quot;KB&quot;,&quot;MB&quot;,&quot;GB&quot; or long
  alternatives &quot;byte&quot;, &quot;kilobyte&quot;, &quot;megabyte&quot;,
  &quot;gigabyte&quot;. If it is not specified, &quot;byte&quot; unit is assumed
  by default.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
For example to send an alert if the file is too large:
<div class="Pp"></div>
<pre>
 check file mydb with path /data/mydatabase.db
       if size &gt; 1 GB then alert
</pre>
<h2 class="Ss" title="Ss" id="FILE_CONTENT_TESTING"><a class="selflink" href="#FILE_CONTENT_TESTING">FILE
  CONTENT TESTING</a></h2>
The match statement can be used to incrementally test the content of a text file
  by using regular expressions.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF [NOT] MATCH {regex|path} THEN action
</pre>
<div class="Pp"></div>
<i>regex</i> is a string containing the extended regular expression. See also
  <i>regex</i>(7).
<div class="Pp"></div>
<i>path</i> is an absolute path to a file containing extended regular expression
  on every line. See also <i>regex</i>(7).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
You can use the <i>NOT</i> statement to invert a match.
<div class="Pp"></div>
On startup the read position is set to the end of the file and Monit continues
  to scan to the end of the file on each cycle.
<div class="Pp"></div>
If the file size should decrease or inode changed, the read position is set to
  the start of the file.
<div class="Pp"></div>
Only lines ending with a newline character are inspected.
<div class="Pp"></div>
Only the first 511 characters of a line are inspected.
<div class="Pp"></div>
<pre>
 IGNORE [NOT] MATCH {regex|path}
</pre>
<div class="Pp"></div>
Lines matching an <i>IGNORE</i> are not inspected during later evaluations.
  <i>IGNORE MATCH</i> has always precedence over <i>IF MATCH</i>.
<div class="Pp"></div>
All <i>IGNORE MATCH</i> statements are evaluated first, in the order of their
  appearance. Thereafter, all the <i>IF MATCH</i> statements are evaluated.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
  check file syslog with path /var/log/syslog
        ignore match &quot;^monit&quot;
        if match &quot;^mrcoffee&quot; then alert
</pre>
<h2 class="Ss" title="Ss" id="FILESYSTEM_FLAGS_TESTING"><a class="selflink" href="#FILESYSTEM_FLAGS_TESTING">FILESYSTEM
  FLAGS TESTING</a></h2>
Monit can test the flags of a filesystem for changes. This test is implicit and
  Monit will send alert in case of failure by default.
<div class="Pp"></div>
This test is useful for detecting changes of filesystem flags such as if the
  filesystem become read-only (on disk error) or mount flags were changed (such
  as nosuid).
<div class="Pp"></div>
The syntax for the fsflags statement is:
<div class="Pp"></div>
<pre>
 IF CHANGED FSFLAGS THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check filesystem rootfs with path /
       if changed fsflags then exec &quot;/my/script&quot;
</pre>
<h2 class="Ss" title="Ss" id="SPACE_TESTING"><a class="selflink" href="#SPACE_TESTING">SPACE
  TESTING</a></h2>
Monit can test a filesystem or a disk for space usage. This test may only be
  used in the context of a filesystem service type.
<div class="Pp"></div>
Filesystems usually have some space reserved for the root user (ca. 1-5%), so
  non-superusers cannot write to a nearly full filesystem. If you set a limit
  for the filesystem which is used by non-root users you might want to consider
  these reserved blocks when setting the limit. You can use Monit itself to view
  the reserved blocks percentage by using the CLI status command or the HTTP
  interface for the given filesystem.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF SPACE operator value unit THEN action
</pre>
<div class="Pp"></div>
or:
<div class="Pp"></div>
<pre>
 IF SPACE FREE operator value unit THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>unit</i> is a choice of
  &quot;B&quot;,&quot;KB&quot;,&quot;MB&quot;,&quot;GB&quot;, &quot;%&quot; or
  long alternatives &quot;byte&quot;, &quot;kilobyte&quot;,
  &quot;megabyte&quot;, &quot;gigabyte&quot;, &quot;percent&quot;.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check filesystem rootfs with path /
       if space usage &gt; 90% then alert
</pre>
<h2 class="Ss" title="Ss" id="INODE_TESTING"><a class="selflink" href="#INODE_TESTING">INODE
  TESTING</a></h2>
Monit can test filesystem inode usage. This test may only be used in the context
  of a filesystem service type.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF INODE(S) operator value [unit] THEN action
</pre>
<div class="Pp"></div>
or:
<div class="Pp"></div>
<pre>
 IF INODE(S) FREE operator value [unit] THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>unit</i> is optional. If not specified, the value is an absolute count of
  inodes. You can use the &quot;%&quot; character or the longer alternative
  &quot;percent&quot; as a unit.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check filesystem rootfs with path /
       if inode usage &gt; 90% then alert
</pre>
<h2 class="Ss" title="Ss" id="PERMISSION_TESTING"><a class="selflink" href="#PERMISSION_TESTING">PERMISSION
  TESTING</a></h2>
Monit can test the permissions of file objects. This test may only be used in
  the context of a file, fifo, directory or filesystem service types.
<div class="Pp"></div>
Syntax for testing specific permissions:
<div class="Pp"></div>
<pre>
 IF FAILED PERM(ISSION) octalnumber THEN action
</pre>
<div class="Pp"></div>
Syntax for testing any permission change:
<div class="Pp"></div>
<pre>
 IF CHANGED PERM(ISSION) THEN action
</pre>
<div class="Pp"></div>
<i>octalnumber</i> defines permissions for a file, a directory or a filesystem
  as four octal digits (0-7). Valid range is 0000 - 7777 (you can omit the
  leading zeros, Monit will add the zeros to the left. For example,
  &quot;640&quot; is a valid value and matches &quot;0640&quot;).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check file shadow with path /etc/shadow
       if failed permission 0640 then alert
</pre>
<h2 class="Ss" title="Ss" id="UID_TESTING"><a class="selflink" href="#UID_TESTING">UID
  TESTING</a></h2>
Monit can monitor the owner user id (uid) of a file, fifo, directory or owner
  and effective user of a process.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF FAILED [E]UID user THEN action
</pre>
<div class="Pp"></div>
<i>user</i> defines a user id either in numeric or in string form.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check file shadow with path /etc/shadow
       if failed uid root then alert
</pre>
<h2 class="Ss" title="Ss" id="GID_TESTING"><a class="selflink" href="#GID_TESTING">GID
  TESTING</a></h2>
Monit can monitor the owner group id (gid) of a file, fifo, directory or
  process.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF FAILED GID group THEN action
</pre>
<div class="Pp"></div>
<i>group</i> defines a group id either in numeric or in string form.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check file shadow with path /etc/shadow
       if failed gid shadow then alert
</pre>
<h2 class="Ss" title="Ss" id="PID_TESTING"><a class="selflink" href="#PID_TESTING">PID
  TESTING</a></h2>
Monit can test the process' PID. This test is implicit and Monit will send an
  alert in case the PID changed outside of Monit's control.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF CHANGED PID THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
This test is useful to detect possible process restarts which has occurred in
  the timeframe between two Monit testing cycles.
<div class="Pp"></div>
For example if someone changes sshd configuration and did sshd restart outside
  of Monit's control you will be notified that the process was replaced by a new
  instance:
<div class="Pp"></div>
<pre>
 check process sshd with pidfile /var/run/sshd.pid
       if changed pid then alert
</pre>
<h2 class="Ss" title="Ss" id="PPID_TESTING"><a class="selflink" href="#PPID_TESTING">PPID
  TESTING</a></h2>
Monit can test the process' parent PID (PPID) for changes. This test is implicit
  and Monit will send alert in the case that the PPID changed outside of Monit
  control.
<div class="Pp"></div>
The syntax for the ppid statement is:
<div class="Pp"></div>
<pre>
 IF CHANGED PPID THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check process myproc with pidfile /var/run/myproc.pid
       if changed ppid then exec &quot;/my/script&quot;
</pre>
<h2 class="Ss" title="Ss" id="PROCESS_UPTIME_TESTING"><a class="selflink" href="#PROCESS_UPTIME_TESTING">PROCESS
  UPTIME TESTING</a></h2>
The uptime statement may only be used in a process service type context.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF UPTIME [[operator] value [unit]] THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of &quot;&lt;&quot;, &quot;&gt;&quot;,
  &quot;!=&quot;, &quot;==&quot; in C notation, &quot;GT&quot;, &quot;LT&quot;,
  &quot;EQ&quot;, &quot;NE&quot; in shell sh notation and &quot;GREATER&quot;,
  &quot;LESS&quot;, &quot;EQUAL&quot;, &quot;NOTEQUAL&quot; in human readable
  form (if not specified, default is EQUAL).
<div class="Pp"></div>
<i>value</i> is a uptime watermark.
<div class="Pp"></div>
<i>unit</i> is either &quot;SECOND&quot;, &quot;MINUTE&quot;, &quot;HOUR&quot;
  or &quot;DAY&quot; (it is also possible to use &quot;SECONDS&quot;,
  &quot;MINUTES&quot;, &quot;HOURS&quot;, or &quot;DAYS&quot;).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example of restarting the process every three days:
<div class="Pp"></div>
<pre>
 check process myapp with pidfile /var/run/myapp.pid
    start program = &quot;/etc/init.d/myapp start&quot;
    stop program = &quot;/etc/init.d/myapp stop&quot;
    if uptime &gt; 3 days then restart
</pre>
<h2 class="Ss" title="Ss" id="PROGRAM_STATUS_TESTING"><a class="selflink" href="#PROGRAM_STATUS_TESTING">PROGRAM
  STATUS TESTING</a></h2>
You can check the exit status of a program or a script. This test may only be
  used within a check program service entry in the Monit control file.
<div class="Pp"></div>
Syntax for testing specific exit value:
<div class="Pp"></div>
<pre>
 IF STATUS operator value THEN action
</pre>
<div class="Pp"></div>
Syntax for testing any exit value change:
<div class="Pp"></div>
<pre>
 IF CHANGED STATUS THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check program myscript with path /usr/local/bin/myscript.sh
       if status != 0 then alert
</pre>
<div class="Pp"></div>
Sample script for the above example (/usr/local/bin/myscript.sh):
<div class="Pp"></div>
<pre>
 #!/bin/bash
 echo test
 exit $?
</pre>
<div class="Pp"></div>
You can also send parameters with the program:
<div class="Pp"></div>
<pre>
 check program list-files with path &quot;/bin/ls -lrt /tmp/&quot;
       if status != 0 then alert
</pre>
<div class="Pp"></div>
Arguments to the program or script is a sequence of whitespace separated
  strings. In the above example the strings '-lrt' and '/tmp/' are arguments to
  the program '/bin/ls'. If arguments are used, it is recommended to use quotes
  <b>&quot;</b> to enclose the string, otherwise, if no arguments are used,
  quotes are not needed.
<div class="Pp"></div>
Notes: If the program is a script, the interpreter is required in the first
  line. The program or script must also be executable.
<div class="Pp"></div>
If Monit is run as the super user, you can optionally run the program as a
  different user and/or group. In this example we run the <i>ls</i> program as
  user www and as group staff:
<div class="Pp"></div>
<pre>
 check program ls with path &quot;/bin/ls /tmp&quot; as uid &quot;www&quot;
          and gid &quot;staff&quot;
       if status != 0 then alert
</pre>
<div class="Pp"></div>
Monit will execute the program periodically and if the exit status of the
  program does not match the expected result, Monit can perform an action. In
  the example above, Monit will raise an alert if the exit value is different
  from 0. By convention, 0 means the program exited normally.
<div class="Pp"></div>
Program checks are asynchronous. Meaning that Monit will not wait for the
  program to exit, but instead, Monit will start the program in the background
  and immediately continue checking the next service entry in <i>monitrc</i>. At
  the next cycle, Monit will check if the program has finished and if so,
  collect the program's exit status. If the status indicate a failure, Monit
  will raise an alert message containing the program's error (stderr) output, if
  any. If the program has not exited after the first cycle, Monit will wait
  another cycle and so on. If the program is still running after 5 minutes,
  Monit will kill it and generate a program timeout event. It is possible to
  override the default timeout (see the syntax below).
<div class="Pp"></div>
The asynchronous nature of the program check allows for non-blocking behavior in
  the current Monit design, but it comes with a side-effect: when the program
  has finished executing and is waiting for Monit to collect the result, it
  becomes a so-called &quot;zombie&quot; process. A zombie process does not
  consume any system resources (only the PID remains in use) and it is under
  Monit's control and the zombie process is removed from the system as soon as
  Monit collects the exit status. This means that every &quot;check
  program&quot; will be associated with either a running process or a temporary
  zombie. This unwanted zombie side-effect will be removed in a later release of
  Monit.
<div class="Pp"></div>
Multiple status tests can be used, for example:
<div class="Pp"></div>
<pre>
 check program hwtest with path /usr/local/bin/hwtest.sh
       with timeout 500 seconds
       if status = 1 then alert
       if status = 3 for 5 cycles then exec &quot;/usr/local/bin/emergency.sh&quot;
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_LINK_STATUS_TEST"><a class="selflink" href="#NETWORK_LINK_STATUS_TEST">NETWORK
  LINK STATUS TEST</a></h2>
You can check the network link state. This test may only be used within a check
  network service entry in the Monit control file.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF FAILED LINK THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
The test will fail if the link/interface is down or link errors were detected.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0 
       if failed link then alert
</pre>
<div class="Pp"></div>
In case a link failed you can add a start and stop program to automatically
  restart the interface which might help. (Substitute with the relevant network
  commands for your system)
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0
       start program = '/sbin/ipup eth0'
       stop program = '/sbin/ipdown eth0'
       if failed link then restart
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_LINK_CAPACITY_TEST"><a class="selflink" href="#NETWORK_LINK_CAPACITY_TEST">NETWORK
  LINK CAPACITY TEST</a></h2>
You can check the network link mode capacity for changes. This test may only be
  used within a check network service entry in the Monit control file.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF CHANGED LINK [CAPACITY] THEN action
</pre>
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
The test will match if the link mode has changed (e.g. maximum speed dropped) or
  if the duplex mode has changed.
<div class="Pp"></div>
NOTE: not all interface types allow for capacity monitoring. Pseudo interfaces
  such as loopback device or VMWare interfaces does not have a speed attribute.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0 
       if changed link capacity then alert
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_SATURATION_TEST"><a class="selflink" href="#NETWORK_SATURATION_TEST">NETWORK
  SATURATION TEST</a></h2>
You can check the network link saturation. Monit then computes the link
  utilization based on the current transfer rate vs. link capacity. This test
  may only be used within a check network service entry in the Monit control
  file.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 IF SATURATION operator value% THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
NOTE: this test depends on the availability of the speed attribute and not all
  interface types have this attribute. See the LINK SPEED test description.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0 
       if saturation &gt; 90% then alert
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_BANDWIDTH_TEST"><a class="selflink" href="#NETWORK_BANDWIDTH_TEST">NETWORK
  BANDWIDTH TEST</a></h2>
You can check a network link upload and download bandwidth usage, current
  transfer rate and total data transferred in the last 24 hours. This test may
  only be used within a check network service entry in the Monit control file.
<div class="Pp"></div>
Warning: this test requires monit poll time to be at maximum 30 seconds.
<div class="Pp"></div>
Current upload bandwidth rate test syntax:
<div class="Pp"></div>
<pre>
 IF UPLOAD operator value unit THEN action
</pre>
<div class="Pp"></div>
Current download bandwidth rate test syntax:
<div class="Pp"></div>
<pre>
 IF DOWNLOAD operator value unit THEN action
</pre>
<div class="Pp"></div>
Total upload test syntax:
<div class="Pp"></div>
<pre>
 IF TOTAL UPLOAD operator value unit IN LAST number time-unit THEN action
</pre>
<div class="Pp"></div>
Total download test syntax:
<div class="Pp"></div>
<pre>
 IF TOTAL DOWNLOAD operator value unit IN LAST number time-unit THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>unit</i> is a choice of
  &quot;B&quot;,&quot;KB&quot;,&quot;MB&quot;,&quot;GB&quot; or long
  alternatives &quot;byte&quot;, &quot;kilobyte&quot;, &quot;megabyte&quot;,
  &quot;gigabyte&quot;.
<div class="Pp"></div>
<i>time-unit</i> is a choice of &quot;MINUTE(S)&quot;, &quot;HOUR(S)&quot;,
  &quot;DAY&quot;. NOTE: Monit maintains a rolling count of total uploaded and
  downloaded bytes for the last 24 hours only. The value of time-unit can
  therefor not specify a range wider than one day.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Examples:
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0 
       if upload &gt; 500 kB/s then alert
       if total download &gt; 1 GB in last 2 hours then alert
       if total download &gt; 10 GB in last day then alert
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_PACKETS_TEST"><a class="selflink" href="#NETWORK_PACKETS_TEST">NETWORK
  PACKETS TEST</a></h2>
You can check the network link upload and download packets count, current
  transfer rate and total data transferred in last 24 hours. This test may only
  be used within a check network service entry in the Monit control file.
<div class="Pp"></div>
Warning: this test requires monit poll time to be at maximum 30 seconds.
<div class="Pp"></div>
Current upload bandwidth rate test syntax:
<div class="Pp"></div>
<pre>
 IF UPLOAD operator value PACKETS/S THEN action
</pre>
<div class="Pp"></div>
Current download bandwidth rate test syntax:
<div class="Pp"></div>
<pre>
 IF DOWNLOAD operator value PACKETS/S THEN action
</pre>
<div class="Pp"></div>
Total upload test syntax:
<div class="Pp"></div>
<pre>
 IF TOTAL UPLOAD operator value PACKETS IN LAST number time-unit THEN action
</pre>
<div class="Pp"></div>
Total download test syntax:
<div class="Pp"></div>
<pre>
 IF TOTAL DOWNLOAD operator value PACKETS IN LAST number time-unit THEN action
</pre>
<div class="Pp"></div>
<i>operator</i> is a choice of
  &quot;&lt;&quot;,&quot;&gt;&quot;,&quot;!=&quot;,&quot;==&quot; in c notation,
  &quot;gt&quot;, &quot;lt&quot;, &quot;eq&quot;, &quot;ne&quot; in shell sh
  notation and &quot;greater&quot;, &quot;less&quot;, &quot;equal&quot;,
  &quot;notequal&quot; in human readable form (if not specified, default is
  EQUAL).
<div class="Pp"></div>
<i>time-unit</i> is a choice of &quot;MINUTE(S)&quot;, &quot;HOUR(S)&quot;,
  &quot;DAY&quot;. NOTE: Monit keeps total upload/download statistics only for
  the last 24 hours. The time-unit value cannot therefor span more than one day.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
Examples:
<div class="Pp"></div>
<pre>
 check network eth0 with interface eth0 
       if upload &gt; 1000 packets/s then alert
       if total upload &gt; 900000 packets in last hour then alert
</pre>
<h2 class="Ss" title="Ss" id="NETWORK_PING_TEST"><a class="selflink" href="#NETWORK_PING_TEST">NETWORK
  PING TEST</a></h2>
Monit can perform a network ping test by sending ICMP echo request datagram
  packets to a host and wait for the reply. This test can only be used within a
  check host statement. Monit must also run as the root user in order to be able
  to perform the ping test (because the ping test must use raw sockets which
  usually only the super user is allowed to).
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
  IF FAILED PING[4|6]
     [COUNT number] [WITH] [TIMEOUT number SECONDS]
  THEN action
</pre>
<div class="Pp"></div>
If a DNS host name was used in the <i>check host</i> statement and the host name
  resolve to several addresses (either IPv4 or IPv6), Monit will ping the first
  available address and continue with the next address until one connection
  succeed or until there are no more addresses left to try. You can force Monit
  to only ping IPv4 or IPv6 addresses by using the PING4 or the PING6 keyword
  instead of PING.
<div class="Pp"></div>
The <b>COUNT</b> parameter specifies how many consecutive ping requests will be
  sent to the host in one cycle. If no reply arrive within <b>TIMEOUT</b>
  seconds, Monit reports an error. If at least one reply was received, the ping
  test is considered a success. Monit will, by default, send <i>three</i> ping
  request packets in one cycle to prevent false alarm (i.e. up to 66% packet
  loss is tolerated). You can set the <b>COUNT</b> option to a value between 1
  and 20 to send more or fewer packets. If you require 100% ping success, set
  the count to 1 (i.e. just one request will be sent, and if the packet was lost
  an error will be reported).
<div class="Pp"></div>
Note that many ISPs have started to filter out ping or ICMP packets now, in
  which case there will be no reply from the host.
<div class="Pp"></div>
If a ping test is used in a check host entry, this test is run first and if the
  test should fail, we assume that the connection to the host is down and Monit
  will <i>not</i> continue with any subsequent port tests.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 check host mmonit.com with address mmonit.com
       if failed ping then alert  # IPv4 or IPv6
 check host mmonit.com with address 62.109.39.247
       if failed ping then alert # Address is IPv4 so IPv4 is preferred
</pre>
<div class="Pp"></div>
or test that the system is explicit accessible via IPv4 and IPv6:
<div class="Pp"></div>
<pre>
 check host mmonit.com with address mmonit.com
       if failed ping4 then alert  # IPv4 only
       if failed ping6 then alert  # IPv6 only
</pre>
<div class="Pp"></div>
or with all parameters; Send 5 pings to mmonit.com and wait for up to 10 seconds
  for a reply
<div class="Pp"></div>
<pre>
  check host mmonit.com with address mmonit.com
        if failed ping count 5 with timeout 10 seconds then alert
</pre>
<h2 class="Ss" title="Ss" id="CONNECTION_TESTING"><a class="selflink" href="#CONNECTION_TESTING">CONNECTION
  TESTING</a></h2>
Monit can perform connection testing via network ports or via Unix sockets. A
  connection test may only be used within a process or host service type
  context.
<div class="Pp"></div>
If a service listens on one or more sockets, Monit can connect to the port
  (using TCP or UDP) and verify that the service will accept a connection and
  that it is possible to write and read from the socket. If a connection is not
  accepted or if there is a problem with socket I/O, Monit will execute a
  specified action.
<div class="Pp"></div>
TCP/UDP port test syntax:
<div class="Pp"></div>
<pre>
 IF FAILED
    [host]
    &lt;port&gt;
    [ipversion]
    [type]
    [protocol | {send/expect}+]
    [timeout]
    [retry]
 THEN action
</pre>
<div class="Pp"></div>
Unix socket test syntax:
<div class="Pp"></div>
<pre>
 IF FAILED
    &lt;unixsocket&gt;
    [type]
    [protocol | {send/expect}+]
    [timeout]
    [retry]
 THEN action
</pre>
<div class="Pp"></div>
Examples:
<div class="Pp"></div>
<pre>
 if failed port 80 then alert
 if failed port 53 type udp protocol dns then alert
 if failed unixsocket /var/run/sophie then alert
</pre>
<div class="Pp"></div>
Options:
<div class="Pp"></div>
<i>host: HOST hostname</i>. Optionally specify the host to connect to. If the
  host is not given then localhost is assumed if this test is used inside a
  process entry. If this test is used inside a remote host entry then the
  entry's remote host is assumed.
<div class="Pp"></div>
<i>port: PORT number</i>. The port number to connect to
<div class="Pp"></div>
<i>unixsocket: UNIXSOCKET path</i>. Specifies the path to a Unix socket (local
  machine only).
<div class="Pp"></div>
<i>ipversion: IPV4 | IPV6 </i>. Optionally specify the IP version Monit should
  use when trying to connect to the port. If not used, Monit will try to connect
  to the first available address (IPv4 or IPv6). If multiple addresses are
  available and connection to one address failed, Monit will try the next
  address and so on until a connection succeed or until there are no more
  addresses left to try.
<div class="Pp"></div>
<i>type: TYPE {TCP|UDP|TCPSSL}</i>. Optionally specify the socket type Monit
  should use when trying to connect to the port. The different socket types are;
  TCP, UDP or TCPSSL, where TCP is a regular stream based socket, UDP is a
  datagram socket and TCPSSL specifies that Monit should use a TCP socket with
  SSL when connecting to a port. The default socket type is TCP. If TCPSSL is
  used you may optionally specify the SSL/TLS protocol to be used and the MD5
  checksum of the server's certificate.
<div class="Pp"></div>
The TCPSSL options are:
<div class="Pp"></div>
<pre>
 TCPSSL [SSLAUTO|SSLV2|SSLV3|TLSV1|TLSV11|TLSV12] [CERTMD5 md5sum]
</pre>
<div class="Pp"></div>
The default mode is <i>SSLAUTO</i> and it will select the method automatically,
  but for security reasons only TLS is used, not SSL. If you need SSLv2 or SSLv3
  you have to explicitly select that method using <i>SSLV2</i> or <i>SSLV3</i>
  option.
<div class="Pp"></div>
<i>protocol: PROTO(COL) protocol</i>. Optionally specify the protocol Monit
  should speak when a connection is established. At the moment Monit knows how
  to speak:
<br/>
 <i>APACHE-STATUS</i>
<br/>
 <i>DNS</i>
<br/>
 <i>DWP</i>
<br/>
 <i>FTP</i>
<br/>
 <i>GPS</i>
<br/>
 <i>HTTP</i>
<br/>
 <i>HTTPS</i>
<br/>
 <i>IMAP</i>
<br/>
 <i>IMAPS</i>
<br/>
 <i>CLAMAV</i>
<br/>
 <i>LDAP2</i>
<br/>
 <i>LDAP3</i>
<br/>
 <i>LMTP</i>
<br/>
 <i>MEMCACHE</i>
<br/>
 <i>MONGODB</i>
<br/>
 <i>MYSQL</i>
<br/>
 <i>NNTP</i>
<br/>
 <i>NTP3</i>
<br/>
 <i>PGSQL</i>
<br/>
 <i>POP</i>
<br/>
 <i>POPS</i>
<br/>
 <i>POSTFIX-POLICY</i>
<br/>
 <i>RADIUS</i>
<br/>
 <i>RDATE</i>
<br/>
 <i>REDIS</i>
<br/>
 <i>RSYNC</i>
<br/>
 <i>SIEVE</i>
<br/>
 <i>SIP</i>
<br/>
 <i>SMTP</i>
<br/>
 <i>SMTPS</i>
<br/>
 <i>SSH</i>
<br/>
 <i>TNS</i>
<br/>
 <i>WEBSOCKET</i>
<div class="Pp"></div>
If the target server's protocol is not found in this list, simply do not specify
  the protocol and Monit will use a default connection test.
<div class="Pp"></div>
<i>timeout: [WITH] TIMEOUT number SECONDS</i>. Optionally specifies the connect
  and read timeout for the connection. If Monit cannot connect to the server
  within this time it will assume that the connection failed and execute the
  specified action. The default connect timeout is 5 seconds.
<div class="Pp"></div>
<i>retry: RETRY number</i>. Optionally specifies the number of consecutive
  retries within the same testing cycle in the case that the connection failed.
  The default is fail on first error.
<div class="Pp"></div>
<i>action</i> is a choice of &quot;ALERT&quot;, &quot;RESTART&quot;,
  &quot;START&quot;, &quot;STOP&quot;, &quot;EXEC&quot; or
  &quot;UNMONITOR&quot;.
<div class="Pp"></div>
<i>Specific protocol test options</i>
<div class="Pp"></div>
GENERIC (SEND/EXPECT)
<div class="Pp"></div>
If Monit does not support the protocol spoken by the server, you can write your
  own protocol-test using <i>send</i> and <i>expect</i> strings. The <i>SEND</i>
  statement sends a string to the server port and the <i>EXPECT</i> statement
  compares a string read from the server with the string given in the expect
  statement.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 [{SEND|EXPECT} &quot;string&quot;]+
</pre>
<div class="Pp"></div>
Monit will send a string as it is, and you <b>must</b> remember to include CR
  and LF in the string sent to the server if the protocol expects such
  characters to terminate a string (most text based protocols used over Internet
  do).
<div class="Pp"></div>
Monit will by default read up to 255 bytes from the server and use this string
  when comparing the EXPECT string. You can override the default value by using
  this statement at the top of the Monit configuration file:
<div class="Pp"></div>
<pre>
 SET EXPECTBUFFER &lt;number&gt; [&quot;b&quot;|&quot;kb&quot;]
</pre>
<div class="Pp"></div>
Max value for the expect buffer is 100 kb. For example, to set the expect buffer
  to read 10 kilobytes:
<div class="Pp"></div>
<pre>
 set expectbuffer 10 kb
</pre>
<div class="Pp"></div>
You can use non-printable characters in a SEND string if needed. Use the hex
  notation, \0xHEXHEX to send any char in the range \0x00-\0xFF, that is, 0-255
  in decimal. For example, to test a Quake 3 server:
<div class="Pp"></div>
<pre>
 send &quot;\0xFF\0xFF\0xFF\0xFFgetstatus&quot;
 expect &quot;sv_floodProtect|sv_maxPing&quot;
</pre>
<div class="Pp"></div>
If your system supports POSIX regular expressions, you can use regular
  expressions in the EXPECT string, see <i>regex</i>(7) to learn more about the
  types of regular expressions you can use in an expect string.
<div class="Pp"></div>
Since both regex and string compare operates on a zero terminated string, you
  cannot test for '\0' in an EXPECT buffer since this character marks the end of
  the buffer. However, we escape '\0' in the expect buffer as &quot;\0&quot;
  which you can test for. That is, '\' followed by the ascii value for 0. For
  instance, here is how to test for an expect string that starts with zero
  followed by any number of characters.
<div class="Pp"></div>
<pre>
 expect &quot;^[\\]0.*&quot;
</pre>
<div class="Pp"></div>
Here is a simple SMTP protocol example:
<div class="Pp"></div>
<pre>
 if failed
    port 25 and
    expect &quot;^220.*&quot;
    send   &quot;HELO localhost.localdomain\r\n&quot;
    expect &quot;^250.*&quot;
    send   &quot;QUIT\r\n&quot;
 then alert
</pre>
<div class="Pp"></div>
SEND/EXPECT can be used with any socket type, such as TCP sockets, UNIX sockets
  and UDP sockets.
<div class="Pp"></div>
HTTP
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTO(COL) HTTP
     [REQUEST &quot;string&quot;]
     [STATUS operator number]
     [CHECKSUM checksum]
     [HTTP HEADERS list of headers]
     [CONTENT {= | != } STRING]
</pre>
<div class="Pp"></div>
<i>REQUEST</i> option can set an URL string specifying a document on the HTTP
  server. If the request statement isn't specified, the default &quot;/&quot;
  page will be requested.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 if failed
    port 80
    protocol http
    request &quot;/data/show?a=b&amp;c=d&quot;
 then restart
</pre>
<div class="Pp"></div>
<i>STATUS</i> option can be used to explicitly test the HTTP status code
  returned by the HTTP server. If not used, the http protocol test will fail if
  the status code returned is greater than or equal to 400. You can override
  this behaviour by using the <i>status</i> qualifier.
<div class="Pp"></div>
For example to test that a page does <b>not</b> exist (the HTTP server should
  return 404 in this case):
<div class="Pp"></div>
<pre>
  if failed
     port 80
     protocol http
     request &quot;/non/existent.php&quot;
     status = 404
  then alert
</pre>
<div class="Pp"></div>
<i>CHECKSUM</i> You can test the checksum of documents returned by a HTTP
  server. Either MD5 or SHA1 hash can be used. Monit will <b>not</b> test the
  checksum for a document if the server does not set the HTTP
  <i>Content-Length</i> header. A HTTP server should set this header when it
  server a static document (i.e. a file). There are no limitation on the
  document size, but keep in mind that Monit will use time to download the
  document over the network to compute the checksum.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 if failed
    port 80
    protocol http
    request &quot;/page.html&quot;
    checksum 8f7f419955cefa0b33a2ba316cba3659
 then alert
</pre>
<div class="Pp"></div>
<i>HTTP HEADERS</i> can be used to send a list of any HTTP headers with a http
  protocol test. For instance, the host header. If the host header is not set,
  Monit will use the hostname or IP-address of the host as specified in the
  check host statement. Specifying a host header is useful if you want to
  connect to and test a name-based virtual host. The syntax for setting HTTP
  headers is
<div class="Pp"></div>
<pre>
  http headers [name:value, name:value,..]
</pre>
<div class="Pp"></div>
where each name:value pair is separated with ','. If you need to use ':' in the
  value string, for instance to set port number for a host header, you must
  enclose the value in quotes. For example,
<div class="Pp"></div>
<pre>
  http headers [Host: &quot;mmonit.com:443&quot;]
</pre>
<div class="Pp"></div>
In a check host context, using this statement might look like
<div class="Pp"></div>
<pre>
  check host mmonit.com with address mmonit.com
    if failed
       port 80 protocol http
       with http headers [Host: mmonit.com, Cache-Control: no-cache,
         Cookie: csrftoken=nj1bI3CnMCaiNv4beqo8ZaCfAQQvpgLH]
       and request /monit/ with content = &quot;Monit [0-9.]+&quot;
    then alert
</pre>
<div class="Pp"></div>
Setting http headers is associated with the http protocol test and must come
  before <i>request</i> as in the example above.
<div class="Pp"></div>
<i>CONTENT</i> option sets the pattern which is expected in the data returned by
  the server. If the pattern doesn't match, event is triggered.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
  if failed
     port 80
     protocol http
     content = &quot;foobar [0-9.]+&quot;
  then alert
</pre>
<div class="Pp"></div>
APACHE-STATUS
<div class="Pp"></div>
The <i>APACHE-STATUS</i> test allows to check server performance by examination
  of the status page generated by Apache's mod_status, which is expected to be
  at its default address of http://www.example.com/server-status.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTOCOL APACHE-STATUS &lt;limit operator number&gt;+
</pre>
<div class="Pp"></div>
<i>limit</i> is acronym for child status:
<div class="Pp"></div>
<pre>
 (1) logging (loglimit)
 (2) closing connections (closelimit)
 (3) performing DNS lookups (dnslimit)
 (4) in keepalive with a client (keepalivelimit)
 (5) replying to a client (replylimit)
 (6) receiving a request (requestlimit)
 (7) initialising (startlimit)
 (8) waiting for incoming connections (waitlimit)
 (9) gracefully closing down (gracefullimit)
 (10) performing cleanup procedures (cleanuplimit)
</pre>
<div class="Pp"></div>
<i>operator</i> is one of &quot;&lt;&quot;, &quot;=&quot;, &quot;&gt;&quot;.
<div class="Pp"></div>
<i>number</i> is percentile numeric limit.
<div class="Pp"></div>
Each of these limits can be compared against a value relative to the total
  number of active Apache child processes.
<div class="Pp"></div>
You can combine all of these tests into one expression or you can choose to test
  a certain limit only. If you combine the limits you must connect them together
  using the OR keyword.
<div class="Pp"></div>
Example:
<div class="Pp"></div>
<pre>
 if failed port 80 protocol apache-status
        loglimit &gt; 10% or
        dnslimit &gt; 50% or
        waitlimit &lt; 20%
 then alert
</pre>
<div class="Pp"></div>
SIP
<div class="Pp"></div>
The SIP protocol is used by communication platform servers such as Asterisk and
  FreeSWITCH.
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTOCOL SIP [TARGET valid@uri] [MAXFORWARD n]
</pre>
<div class="Pp"></div>
<i>TARGET</i> you may specify an alternative recipient for the message, by
  adding a valid sip uri after this keyword.
<div class="Pp"></div>
<i>MAXFORWARD</i> Limit the number of proxies or gateways that can forward the
  request to the next server. It's value is an integer in the range 0-255, set
  by default to 70. If max-forward = 0, the next server may respond 200 OK (test
  succeeded) or send a 483 Too Many Hops (test failed)
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 check host openser_all with address 127.0.0.1
   if failed
      port 5060 type udp protocol sip
      with target &quot;localhost:5060&quot; and maxforward 6
   then alert
</pre>
<div class="Pp"></div>
RADIUS
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTOCOL RADIUS [SECRET string]
</pre>
<div class="Pp"></div>
<i>SECRET</i> you may specify an alternative secret, default is
  &quot;testing123&quot;.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 check process radiusd with pidfile /var/run/radiusd.pid
       start program = &quot;/etc/init.d/freeradius start&quot;
       stop program = &quot;/etc/init.d/freeradius stop&quot;
       if failed
          host 127.0.0.1 port 1812 type udp protocol radius
          secret pingpong
       then alert
</pre>
<div class="Pp"></div>
MYSQL
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTOCOL MYSQL [USERNAME string PASSWORD string]
</pre>
<div class="Pp"></div>
<i>USERNAME</i> MySQL username (maximum 16 characters).
<div class="Pp"></div>
<i>PASSWORD</i> MySQL password.
<div class="Pp"></div>
The credentials are <b>optional</b>. If no credentials are set, Monit will
  perform the test using anonymous login. That may cause authentication error to
  be logged in your MySQL log for higher MySQL log levels.
<div class="Pp"></div>
If credentials are set, Monit will login and perform MySQL ping. Monit doesn't
  require any database privileges, it needs just database user, we recommend to
  create standalone user for Monit testing, for example:
<div class="Pp"></div>
<pre>
 CREATE USER 'monit'@'host_from_which_monit_performs_testing' IDENTIFIED BY 'mysecretpassword';
 FLUSH PRIVILEGES;
</pre>
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 check process mysql with pidfile /var/run/mysqld/mysqld.pid
     start program = &quot;/sbin/start mysql&quot;
     stop program = &quot;/sbin/stop mysql&quot;
     if failed
        port 3306
        protocol mysql username foo password bar
     then alert
</pre>
<div class="Pp"></div>
or with unix-socket and OS X start/stop commands
<div class="Pp"></div>
<pre>
 check process mysql with pidfile /var/run/mysqld/mysqld.pid
     start program = &quot;/usr/local/mysql/support-files/mysql.server start&quot;
     stop program = &quot;/usr/local/mysql/support-files/mysql.server stop&quot;
     if failed
        unixsocket /tmp/mysql.sock
        protocol mysql username foo password bar
     then alert
</pre>
<div class="Pp"></div>
WEBSOCKET
<div class="Pp"></div>
Syntax:
<div class="Pp"></div>
<pre>
 PROTOCOL WEBSOCKET
         [REQUEST string]
         [HOST string]
         [ORIGIN string]
         [VERSION number]
</pre>
<div class="Pp"></div>
<i>HOST</i> you may specify an alternative Host header
<div class="Pp"></div>
<i>REQUEST</i> you may specify an alternative request, default is &quot;/&quot;
<div class="Pp"></div>
<i>ORIGIN</i> you may specify an alternative origin, default is
  &quot;http://www.mmonit.com&quot;
<div class="Pp"></div>
<i>VERSION</i> you may specify an alternative version, default is &quot;0&quot;
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<pre>
 check host websocket.org with address &quot;echo.websocket.org&quot;
       if failed
          port 80 protocol websocket
          host &quot;echo.websocket.org&quot;
          request &quot;/&quot;
          origin 'http://websocket.com'
          version 13
       then alert
</pre>
<h1 class="Sh" title="Sh" id="CONFIGURATION_EXAMPLES"><a class="selflink" href="#CONFIGURATION_EXAMPLES">CONFIGURATION
  EXAMPLES</a></h1>
The simplest form is just the check statement. In this example we check to see
  if our web server is running and log a message if not:
<div class="Pp"></div>
<pre>
 check process nginx with pidfile /var/run/nginx.pid
</pre>
<div class="Pp"></div>
To have Monit start the server if it's not running, add a start statement:
<div class="Pp"></div>
<pre>
 check process nginx with pidfile /var/run/nginx.pid
       start program = &quot;/etc/init.d/nginx start&quot;
</pre>
<div class="Pp"></div>
Here's a more advanced example for monitoring an apache web-server listening on
  the default port number for HTTP and HTTPS. In this example Monit will restart
  apache if it's not accepting connections at the port numbers. The method Monit
  use for restart is to first execute the stop-program, then wait (up to 30s)
  for the process to stop and then execute the start-program and wait (30s) for
  it to start. The length of start or stop wait can be overridden using the
  'timeout' option. If Monit was unable to stop or start the service a failed
  alert message will be sent if you have requested alert messages to be sent.
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start program = &quot;/etc/init.d/httpd start&quot; with timeout 60 seconds
       stop program  = &quot;/etc/init.d/httpd stop&quot;
       if failed port 80 for 2 cycles then restart
       if failed port 443 for 2 cycles then restart
</pre>
<div class="Pp"></div>
This example demonstrate how you can run a program as a specified user (uid) and
  with a specified group (gid). Many daemon programs can do the uid and gid
  switch by themselves, but for those programs that does not (e.g. Java
  programs), monit's ability to start a program as a certain user can be very
  useful. In this example we start the Tomcat Java Servlet Engine as the
  standard <i>nobody</i> user and group. Please note that Monit can only switch
  uid and gid for the program if the super-user is running Monit, otherwise
  Monit will simply ignore the request to change uid and gid.
<div class="Pp"></div>
<pre>
 check process tomcat with pidfile /var/run/tomcat.pid
       start program = &quot;/etc/init.d/tomcat start&quot;
             as uid nobody and gid nobody
       stop program  = &quot;/etc/init.d/tomcat stop&quot;
             # You can also use id numbers instead and write:
             as uid 99 and with gid 99
       if failed port 8080 then alert
</pre>
<div class="Pp"></div>
In this example we use udp for connection testing to check if the name-server is
  running:
<div class="Pp"></div>
<pre>
 check process named with pidfile /var/run/named.pid
       start program = &quot;/etc/init.d/named start&quot;
       stop program  = &quot;/etc/init.d/named stop&quot;
       if failed port 53 use type udp protocol dns then restart
</pre>
<div class="Pp"></div>
The following example illustrates how to check if the service 'sophie' is
  answering connections on its Unix domain socket:
<div class="Pp"></div>
<pre>
 check process sophie with pidfile /var/run/sophie.pid
       start program = &quot;/etc/init.d/sophie start&quot;
       stop  program = &quot;/etc/init.d/sophie stop&quot;
       if failed unix /var/run/sophie then restart
</pre>
<div class="Pp"></div>
In this example we check an apache web-server running on localhost which answers
  for several IP-based virtual hosts or vhosts, hence the host statement before
  port:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start &quot;/etc/init.d/httpd start&quot;
       stop  &quot;/etc/init.d/httpd stop&quot;
       if failed host www.sol.no port 80 then alert
       if failed host shop.sol.no port 443 then alert
       if failed host chat.sol.no port 80 then alert
</pre>
<div class="Pp"></div>
To make sure that Monit is communicating with a http server a protocol test can
  be added:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start &quot;/etc/init.d/httpd start&quot;
       stop  &quot;/etc/init.d/httpd stop&quot;
       if failed
          host www.sol.no port 80 protocol http
       then alert
</pre>
<div class="Pp"></div>
This example demonstrate a different way to check a web-server using the
  send/expect mechanism:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start &quot;/etc/init.d/httpd start&quot;
       stop  &quot;/etc/init.d/httpd stop&quot;
       if failed
          host www.sol.no port 80 and
          send &quot;GET / HTTP/1.1\r\nHost: www.sol.no\r\n\r\n&quot;
          expect &quot;HTTP/[0-9\.]{3} 200.*&quot;
       then alert
</pre>
<div class="Pp"></div>
Here we ping a remote host to check if it is up and if not, send an alert:
<div class="Pp"></div>
<pre>
 check host www.tildeslash.com with address www.tildeslash.com
       if failed ping then alert
</pre>
<div class="Pp"></div>
In the following example we ask Monit to compute and verify the checksum for the
  underlying apache binary used by the start and stop programs. If the the
  checksum test should fail, monitoring will be disabled to prevent possibly
  restarting a compromised binary:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start program = &quot;/etc/init.d/httpd start&quot;
       stop program  = &quot;/etc/init.d/httpd stop&quot;
       if failed host www.tildeslash.com port 80 then restart
       depends on apache_bin
 check file apache_bin with path /usr/local/apache/bin/httpd
       if failed checksum then unmonitor
</pre>
<div class="Pp"></div>
In this example we ask Monit to test a document's checksum on a remote server.
  If the checksum was changed we send an alert:
<div class="Pp"></div>
<pre>
 check host mmonit.com with address mmonit.com
       if failed
          port 80 protocol http and
          request &quot;/monit/dist/monit-5.7.tar.gz&quot;
          with checksum f9d26b8393736b5dfad837bb13780786
       then alert
</pre>
<div class="Pp"></div>
Here are a couple of tests for some popular communication servers, using the SIP
  protocol. First we test a FreeSWITCH server and then an Asterisk server
<div class="Pp"></div>
<pre>
 check process freeswitch
    with pidfile /usr/local/freeswitch/log/freeswitch.pid
  start program = &quot;/usr/local/freeswitch/bin/freeswitch -nc -hp&quot;
  stop program = &quot;/usr/local/freeswitch/bin/freeswitch -stop&quot;
  if total memory &gt; 1000.0 MB for 5 cycles then alert
  if total memory &gt; 1500.0 MB for 5 cycles then alert
  if total memory &gt; 2000.0 MB for 5 cycles then restart
  if cpu &gt; 60% for 5 cycles then alert
  if failed
     port 5060 type udp protocol SIP
     target me@foo.bar and maxforward 10
  then restart
 check process asterisk
   with pidfile /var/run/asterisk/asterisk.pid
   start program = &quot;/usr/sbin/asterisk&quot;
   stop program = &quot;/usr/sbin/asterisk -r -x 'shutdown now'&quot;
   if total memory &gt; 1000.0 MB for 5 cycles then alert
   if total memory &gt; 1500.0 MB for 5 cycles then alert
   if total memory &gt; 2000.0 MB for 5 cycles then restart
   if cpu &gt; 60% for 5 cycles then alert
   if failed
      port 5060 type udp protocol SIP
      and target me@foo.bar maxforward 10
   then restart
</pre>
<div class="Pp"></div>
Some servers are slow starters, like for example Java based Application Servers.
  If we want to keep the poll-cycle low (i.e. &lt; 60 seconds) but allow some
  services to take its time to start, the <b>every</b> statement is handy:
<div class="Pp"></div>
<pre>
 check process dynamo with pidfile /etc/dynamo.pid every 2 cycles
       start program = &quot;/etc/init.d/dynamo start&quot;
       stop program  = &quot;/etc/init.d/dynamo stop&quot;
       if failed port 8840 then alert
</pre>
<div class="Pp"></div>
Here is an example where we group together two database entries so you can
  manage them together, e.g.; 'Monit -g database start all'. The mode statement
  is also illustrated in the first entry and have the effect that Monit will not
  try to (re)start this service if it is not running:
<div class="Pp"></div>
<pre>
 check process sybase with pidfile /var/run/sybase.pid
       start = &quot;/etc/init.d/sybase start&quot;
       stop  = &quot;/etc/init.d/sybase stop&quot;
       mode passive
       group database
 check process oracle with pidfile /var/run/oracle.pid
       start program = &quot;/etc/init.d/oracle start&quot;
       stop program  = &quot;/etc/init.d/oracle stop&quot;
       if failed
          port 9001 protocol tns
       then restart
       group database
</pre>
<div class="Pp"></div>
This resource checks example will send an alert if CPU usage of the Apache's
  http daemon and its child processes goes beyond 60% for two cycles. Apache is
  restarted if the CPU usage is over 80% for five cycles or the memory usage is
  over 100Mb for five cycles or if the machines load average is more than 10 for
  8 cycles:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start program = &quot;/etc/init.d/httpd start&quot;
       stop program  = &quot;/etc/init.d/httpd stop&quot;
       if cpu &gt; 40% for 2 cycles then alert
       if total cpu &gt; 60% for 2 cycles then alert
       if total cpu &gt; 80% for 5 cycles then restart
       if mem &gt; 100 MB for 5 cycles then stop
       if loadavg(5min) greater than 10.0 for 8 cycles then stop
</pre>
<div class="Pp"></div>
This examples demonstrate the timestamp statement with exec and how you may
  restart apache if its configuration file was changed.
<div class="Pp"></div>
<pre>
 check file httpd.conf with path /etc/httpd/httpd.conf
       if changed timestamp
          then exec &quot;/etc/init.d/httpd graceful&quot;
</pre>
<div class="Pp"></div>
In this example we demonstrate usage of the extended alert statement and a file
  check dependency:
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
      start = &quot;/etc/init.d/httpd start&quot;
      stop  = &quot;/etc/init.d/httpd stop&quot;
      alert admin@bar on {nonexist, timeout}
        with mail-format {
              from:     bofh@$HOST
              subject:  apache $EVENT - $ACTION
              message:  This event occurred on $HOST at $DATE.
              Your faithful employee,
              monit
      }
      if failed host www.tildeslash.com  port 80 then restart
      depend httpd_bin
      group apache
 check file httpd_bin with path /usr/local/apache/bin/httpd
       alert security@bar on {checksum, timestamp,
                  permission, uid, gid}
             with mail-format {subject: Alaaarrm! on $HOST}
       if failed checksum
          and expect 8f7f419955cefa0b33a2ba316cba3659
              then unmonitor
       if failed permission 755 then unmonitor
       if failed uid root then unmonitor
       if failed gid root then unmonitor
       if changed timestamp then alert
       group apache
</pre>
<div class="Pp"></div>
In this example, we demonstrate usage of the depend statement. In this case, we
  want to start oracle and apache. However, we've set up apache to use oracle as
  a back end, and if oracle is restarted, apache must be restarted as well.
<div class="Pp"></div>
<pre>
 check process apache with pidfile /var/run/httpd.pid
       start = &quot;/etc/init.d/httpd start&quot;
       stop  = &quot;/etc/init.d/httpd stop&quot;
       depends on oracle
 check process oracle with pidfile /var/run/oracle.pid
       start = &quot;/etc/init.d/oracle start&quot;
       stop  = &quot;/etc/init.d/oracle stop&quot;
       if failed port 9001 for 5 cycles then restart
</pre>
<div class="Pp"></div>
Next, we have 2 services, oracle-import and oracle-export that need to be
  restarted if oracle is restarted, but are independent of each other.
<div class="Pp"></div>
<pre>
 check process oracle with pidfile /var/run/oracle.pid
       start = &quot;/etc/init.d/oracle start&quot;
       stop  = &quot;/etc/init.d/oracle stop&quot;
       if failed port 9001 for 3 cycles then restart
 check process oracle-import
      with pidfile /var/run/oracle-import.pid
       start = &quot;/etc/init.d/oracle-import start&quot;
       stop  = &quot;/etc/init.d/oracle-import stop&quot;
       depends on oracle
 check process oracle-export
      with pidfile /var/run/oracle-export.pid
       start = &quot;/etc/init.d/oracle-export start&quot;
       stop  = &quot;/etc/init.d/oracle-export stop&quot;
       depends on oracle
</pre>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<i>~/.monitrc</i>
<br/>
 Default run control file
<div class="Pp"></div>
<i>/etc/monitrc</i>
<br/>
 If the control file is not found in the default
<br/>
 location and /etc contains a <i>monitrc</i> file, this
<br/>
 file will be used instead.
<div class="Pp"></div>
<i>./monitrc</i>
<br/>
 If the control file is not found in either of the
<br/>
 previous two locations, and the current working
<br/>
 directory contains a <i>monitrc</i> file, this file is
<br/>
 used instead.
<div class="Pp"></div>
<i>~/.monit.pid</i>
<br/>
 Lock file to help prevent concurrent runs (non-root
<br/>
 mode).
<div class="Pp"></div>
<i>/run/monit.pid</i>
<br/>
 Lock file to help prevent concurrent runs (root mode,
<br/>
 Linux systems, if /run directory is available).
<div class="Pp"></div>
<i>/var/run/monit.pid</i>
<br/>
 Lock file to help prevent concurrent runs (root mode,
<br/>
 Linux systems).
<div class="Pp"></div>
<i>/etc/monit.pid</i>
<br/>
 Lock file to help prevent concurrent runs (root mode,
<br/>
 systems without /var/run).
<div class="Pp"></div>
<i>~/.monit.state</i>
<br/>
 Monit saves its state to this file and utilizes
<br/>
 information found in this file to recover from
<br/>
 a crash. This is a binary file and its content is
<br/>
 only of interest to monit. You may set the location
<br/>
 of this file in the Monit control file or by using
<br/>
 the -s switch when Monit is started.
<div class="Pp"></div>
<i>~/.monit.id</i>
<br/>
 Monit save its unique id to this file.
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
No environment variables are used by Monit. However, when Monit execute a script
  or a program Monit will set several environment variables which can be
  utilized by the executable. The following and <i>only</i> the following
  environment variables are available:
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_EVENT</dt>
  <dd class="It-tag">The event that occurred on the service</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_DESCRIPTION</dt>
  <dd class="It-tag">A description of the error condition</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_SERVICE</dt>
  <dd class="It-tag">The name of the service (from monitrc) on which the event
      occurred.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_DATE</dt>
  <dd class="It-tag">The time and date (RFC 822 style) the event occurred</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_HOST</dt>
  <dd class="It-tag">The host the event occurred on</dd>
</dl>
<div class="Pp"></div>
The following environment variables are only available for process service
  entries:
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_PROCESS_PID</dt>
  <dd class="It-tag">The process pid. This may be 0 if the process was
      (re)started,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_PROCESS_MEMORY</dt>
  <dd class="It-tag">Process memory. This may be 0 if the process was
      (re)started,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_PROCESS_CHILDREN</dt>
  <dd class="It-tag">Process children. This may be 0 if the process was
      (re)started,</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">MONIT_PROCESS_CPU_PERCENT</dt>
  <dd class="It-tag">Process cpu%. This may be 0 if the process was
    (re)started,</dd>
</dl>
<h1 class="Sh" title="Sh" id="SIGNALS"><a class="selflink" href="#SIGNALS">SIGNALS</a></h1>
If a Monit daemon is running, SIGUSR1 wakes it up from its sleep phase and
  forces a poll of all services. SIGTERM and SIGINT will gracefully terminate a
  Monit daemon. The SIGTERM signal is sent to a Monit daemon if Monit is started
  with the <i>quit</i> action argument.
<div class="Pp"></div>
Sending a SIGHUP signal to a running Monit daemon will force the daemon to
  reinitialize itself, specifically it will reread configuration, close and
  reopen log files.
<div class="Pp"></div>
Running Monit in foreground while a background Monit daemon is running will wake
  up the daemon.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
This is a very silent program. Use the -v switch if you want to see what Monit
  is doing, and tail -f the logfile. Optionally for testing purposes; you can
  start Monit with the -Iv switch. Monit will then print debug information to
  the console, to stop monit in this mode, simply press CTRL^C (i.e. SIGINT) in
  the same console.
<div class="Pp"></div>
The syntax (and parser) of the control file was inspired by Eric S. Raymond et
  al. excellent fetchmail program. Some portions of this man page also receive
  inspiration from the same authors.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2001-2015 by Tildeslash Ltd. All Rights Reserved. This product is
  distributed in the hope that it will be useful, but WITHOUT any warranty;
  without even the implied warranty of MERCHANTABILITY or FITNESS for a
  particular purpose.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
GNU text utilities; <i>md5sum</i>(1); <i>sha1sum</i>(1); <i>openssl</i>(1);
  <i>glob</i>(7); <i>regex</i>(7); <i>http://www.mmonit.com/</i></div>
<table class="foot">
  <tr>
    <td class="foot-date">www.mmonit.com</td>
    <td class="foot-os">June 09. 2015</td>
  </tr>
</table>
</body>
</html>
