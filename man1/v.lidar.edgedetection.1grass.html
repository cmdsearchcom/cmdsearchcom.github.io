<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.lidar.edgedetection(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.lidar.edgedetection(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.lidar.edgedetection(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.lidar.edgedetection</b> - Detects the object&#x2019;s edges from a
  LIDAR data set.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, LIDAR, edges
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.lidar.edgedetection</b>
<div>&#x00A0;</div>
<b>v.lidar.edgedetection --help</b>
<div>&#x00A0;</div>
<b>v.lidar.edgedetection</b> [-<b>e</b>] <b>input</b>=<i>name</i>
  <b>output</b>=<i>name</i> [<b>ew_step</b>=<i>float</i>]
  [<b>ns_step</b>=<i>float</i>] [ <b>lambda_g</b>=<i>float</i>]
  [<b>tgh</b>=<i>float</i>] [ <b>tgl</b>=<i>float</i>]
  [<b>theta_g</b>=<i>float</i>] [ <b>lambda_r</b>=<i>float</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Estimate point density and distance
    <div>&#x00A0;</div>
    Estimate point density and distance for the input vector points within the
      current region extends and quit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ew_step</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Length of each spline step in the east-west direction
    <div>&#x00A0;</div>
    Default: <i>4</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ns_step</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Length of each spline step in the north-south direction
    <div>&#x00A0;</div>
    Default: <i>4</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lambda_g</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Regularization weight in gradient evaluation
    <div>&#x00A0;</div>
    Default: <i>0.01</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tgh</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    High gradient threshold for edge classification
    <div>&#x00A0;</div>
    Default: <i>6</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>tgl</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Low gradient threshold for edge classification
    <div>&#x00A0;</div>
    Default: <i>3</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>theta_g</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Angle range for same direction detection
    <div>&#x00A0;</div>
    Default: <i>0.26</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lambda_r</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Regularization weight in residual evaluation
    <div>&#x00A0;</div>
    Default: <i>2</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.lidar.edgedetection</i> is the first of three steps to filter LiDAR data.
  The filter aims to recognize and extract attached and detached object (such as
  buildings, bridges, power lines, trees, etc.) in order to create a Digital
  Terrain Model.
<div class="Pp"></div>
In particular, this module detects the edge of each single feature over the
  terrain surface of a LIDAR point surface. First of all, a bilinear spline
  interpolation with a Tychonov regularization parameter is performed. The
  gradient is minimized and the low Tychonov regularization parameter brings the
  interpolated functions as close as possible to the observations. Bicubic
  spline interpolation with Tychonov regularization is then performed. However,
  now the curvature is minimized and the regularization parameter is set to a
  high value. For each point, an interpolated value is computed from the bicubic
  surface and an interpolated gradient is computed from the bilinear surface. At
  each point the gradient magnitude and the direction of the edge vector are
  calculated, and the residual between interpolated and observed values is
  computed. Two thresholds are defined on the gradient, a high threshold
  <b>tgh</b> and a low one <b>tgl</b>. For each point, if the gradient magnitude
  is greater than or equal to the high threshold and its residual is greater
  than or equal to zero, it is labeled as an EDGE point. Similarly a point is
  labeled as being an EDGE point if the gradient magnitude is greater than or
  equal to the low threshold, its residual is greater than or equal to zero, and
  the gradient to two of eight neighboring points is greater than the high
  threshold. Other points are classified as TERRAIN.
<div class="Pp"></div>
The output will be a vector map in which points has been classified as TERRAIN,
  EDGE or UNKNOWN. This vector map should be the input of <i>v.lidar.growing</i>
  module.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
In this module, an external table will be created which will be useful for the
  next module of the procedure of LiDAR data filtering. In this table the
  interpolated height values of each point will be recorded. Also points in the
  output vector map will be classified as:
<div>&#x00A0;</div>
<pre>
TERRAIN (cat = 1, layer = 1)
EDGE (cat = 2, layer = 1)
UNKNOWN (cat = 3, layer = 1)
</pre>
The final result of the whole procedure ( <i>v.lidar.edgedetection</i>,
  <i>v.lidar.growing</i>, <i>v.lidar.correction</i>) will be a point
  classification in four categories:
<div>&#x00A0;</div>
<pre>
TERRAIN SINGLE PULSE (cat = 1, layer = 2)
TERRAIN DOUBLE PULSE (cat = 2, layer = 2)
OBJECT SINGLE PULSE (cat = 3, layer = 2)
OBJECT DOUBLE PULSE (cat = 4, layer = 2)
</pre>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Basic_edge_detection"><a class="selflink" href="#Basic_edge_detection">Basic
  edge detection</a></h2>
<pre>
v.lidar.edgedetection input=vector_last output=edge ew_step=8 ns_step=8 lambda_g=0.5
</pre>
<h2 class="Ss" title="Ss" id="Complete_workflow"><a class="selflink" href="#Complete_workflow">Complete
  workflow</a></h2>
<pre>
# region settings (using an existing raster)
g.region raster=elev_lid792_1m
# import
v.in.lidar -tr input=points.las output=points
v.in.lidar -tr input=points.las output=points_first return_filter=first
# detection
v.lidar.edgedetection input=points output=edge ew_step=8 ns_step=8 lambda_g=0.5
v.lidar.growing input=edge output=growing first=points_first
v.lidar.correction input=growing output=correction terrain=only_terrain
# visualization of selected points
# zoom somewhere first, to make it faster
d.rast map=orthophoto
d.vect map=correction layer=2 cats=2,3,4 color=red size=0.25
d.vect map=correction layer=2 cats=1 color=0:128:0 size=0.5
# interpolation (this may take some time)
v.surf.rst input=only_terrain elevation=terrain
# get object points for 3D visualization
v.extract input=correction layer=2 cats=2,3,4 output=objects
</pre>
<div class="Pp"></div>
<i>Figure 1: Example output from complete workflow (red: objects, green:
  terrain)</i>
<div class="Pp"></div>
<i></i> <i>Figure 2: 3D visualization of filtered object points (red)</i> <i>and
  terrain created from terrain points (gray)</i> <i></i>
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Antolin, R. et al., 2006. Digital terrain models
      determination by LiDAR technology: Po basin experimentation. Bolletino di
      Geodesia e Scienze Affini, anno LXV, n. 2, pp. 69-89.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Brovelli M. A., Cannata M., Longoni U.M., 2004. LIDAR Data
      Filtering and DTM Interpolation Within GRASS, Transactions in GIS, April
      2004, vol. 8, iss. 2, pp. 155-174(20), Blackwell Publishing Ltd.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Brovelli M. A., Cannata M., 2004. Digital Terrain model
      reconstruction in urban areas from airborne laser scanning data: the
      method and an example for Pavia (Northern Italy). Computers and
      Geosciences 30 (2004) pp.325-331</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Brovelli M. A. and Longoni U.M., 2003. Software per il
      filtraggio di dati LIDAR, Rivista dell&#x2019;Agenzia del Territorio, n.
      3-2003, pp. 11-22 (ISSN 1593-2192).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Brovelli M. A., Cannata M. and Longoni U.M., 2002. DTM
      LIDAR in area urbana, Bollettino SIFET N.2, pp. 7-26.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Performances of the filter can be seen in the ISPRS WG
      III/3 Comparison of Filters report by Sithole, G. and Vosselman, G.,
    2003.</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>v.lidar.growing,</i> <i>v.lidar.correction,</i>
  <i>v.surf.bspline,</i> <i>v.surf.rst,</i> <i>v.in.lidar,</i> <i>v.in.ascii</i>
  <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Original version of program in GRASS 5.4:
<div>&#x00A0;</div>
Maria Antonia Brovelli, Massimiliano Cannata, Ulisse Longoni and Mirko Reguzzoni
<div>&#x00A0;</div>
<div>&#x00A0;</div>
Update for GRASS 6.X:
<div>&#x00A0;</div>
Roberto Antolin and Gonzalo Moreno
<div class="Pp"></div>
<i>Last changed: $Date: 2015-09-13 14:47:50 +0200 (Sun, 13 Sep 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.lidar.edgedetection source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
