<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DATAMASH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DATAMASH(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">DATAMASH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
datamash - command-line calculations
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>datamash</b> [ <i>OPTION</i>] <i>op </i>[<i>col</i>] [<i>op col </i>...]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Performs numeric/string operations on input from stdin.
<div class="Pp"></div>
'op' is the operation to perform; For grouping,per-line operations 'col' is the
  input field to use; 'col' can be a number (1=first field), or a column name
  when using <b>-H</b> or <b>--header-in</b> options.
<h2 class="Ss" title="Ss" id="File_operations:"><a class="selflink" href="#File_operations:">File
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">transpose, reverse</dd>
</dl>
<h2 class="Ss" title="Ss" id="Line-Filtering_operations:"><a class="selflink" href="#Line-Filtering_operations:">Line-Filtering
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">rmdup</dd>
</dl>
<h2 class="Ss" title="Ss" id="Per-Line_operations:"><a class="selflink" href="#Per-Line_operations:">Per-Line
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">base64, debase64, md5, sha1, sha256, sha512</dd>
</dl>
<h2 class="Ss" title="Ss" id="Numeric_Grouping_operations:"><a class="selflink" href="#Numeric_Grouping_operations:">Numeric
  Grouping operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">sum, min, max, absmin, absmax</dd>
</dl>
<h2 class="Ss" title="Ss" id="Textual/Numeric_Grouping_operations:"><a class="selflink" href="#Textual/Numeric_Grouping_operations:">Textual/Numeric
  Grouping operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">count, first, last, rand, unique, collapse,
    countunique</dd>
</dl>
<h2 class="Ss" title="Ss" id="Statistical_Grouping_operations:"><a class="selflink" href="#Statistical_Grouping_operations:">Statistical
  Grouping operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">mean, median, q1, q3, iqr, mode, antimode, pstdev, sstdev,
      pvar svar, mad, madraw, pskew, sskew, pkurt, skurt, dpo, jarque</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<h2 class="Ss" title="Ss" id="Grouping_Options:"><a class="selflink" href="#Grouping_Options:">Grouping
  Options:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--full</b></dt>
  <dd class="It-tag">print entire input line before op results (default: print
      only the grouped keys)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b>, <b>--group</b>=<i>X[</i>,Y,Z]</dt>
  <dd class="It-tag">group via fields X,[Y,Z]</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--header-in</b></dt>
  <dd class="It-tag">first input line is column headers</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--header-out</b></dt>
  <dd class="It-tag">print column headers as first line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b>, <b>--headers</b></dt>
  <dd class="It-tag">same as '--header-in <b>--header-out</b>'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--ignore-case</b></dt>
  <dd class="It-tag">ignore upper/lower case when comparing text; this affects
      grouping, and string operations</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--sort</b></dt>
  <dd class="It-tag">sort the input before grouping; this removes the need to
      manually pipe the input through 'sort'</dd>
</dl>
<h2 class="Ss" title="Ss" id="File_Operation_Options:"><a class="selflink" href="#File_Operation_Options:">File
  Operation Options:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-strict</b></dt>
  <dd class="It-tag">allow lines with varying number of fields</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--filler</b>=<i>X</i></dt>
  <dd class="It-tag">fill missing values with X (default %s)</dd>
</dl>
<h2 class="Ss" title="Ss" id="General_Options:"><a class="selflink" href="#General_Options:">General
  Options:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--field-separator</b>=<i>X</i></dt>
  <dd class="It-tag">use X instead of TAB as field delimiter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--narm</b></dt>
  <dd class="It-tag">skip NA/NaN values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-W</b>, <b>--whitespace</b></dt>
  <dd class="It-tag">use whitespace (one or more spaces and/or tabs) for field
      delimiters</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b>, <b>--zero-terminated</b></dt>
  <dd class="It-tag">end lines with 0 byte, not newline</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">display this help and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">output version information and exit</dd>
</dl>
<h1 class="Sh" title="Sh" id="AVAILABLE_OPERATIONS"><a class="selflink" href="#AVAILABLE_OPERATIONS">AVAILABLE
  OPERATIONS</a></h1>
<h2 class="Ss" title="Ss" id="File_operations:"><a class="selflink" href="#File_operations:">File
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>transpose</b></dt>
  <dd class="It-tag">transpose rows, columns of the input file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reverse</b></dt>
  <dd class="It-tag">reverse field order in each line</dd>
</dl>
<h2 class="Ss" title="Ss" id="Line-Filtering_operations:"><a class="selflink" href="#Line-Filtering_operations:">Line-Filtering
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rmdup</b></dt>
  <dd class="It-tag">remove lines with duplicated key value</dd>
</dl>
<h2 class="Ss" title="Ss" id="Per-Line_operations:"><a class="selflink" href="#Per-Line_operations:">Per-Line
  operations:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>base64</b></dt>
  <dd class="It-tag">Encode the field as base64</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>debase64</b></dt>
  <dd class="It-tag">Decode the field as base64, exit with error if invalid
      base64 string</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>md5/sha1/sha256/sha512</b></dt>
  <dd class="It-tag">Calculate md5/sha1/sha256/sha512 hash of the field
    value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reverse</b></dt>
  <dd class="It-tag">reverse field order in each line</dd>
</dl>
<h2 class="Ss" title="Ss" id="Numeric_Grouping_operations"><a class="selflink" href="#Numeric_Grouping_operations">Numeric
  Grouping operations</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sum</b></dt>
  <dd class="It-tag">sum the of values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>min</b></dt>
  <dd class="It-tag">minimum value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>max</b></dt>
  <dd class="It-tag">maximum value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>absmin</b></dt>
  <dd class="It-tag">minimum of the absolute values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>absmax</b></dt>
  <dd class="It-tag">maximum of the absolute values</dd>
</dl>
<h2 class="Ss" title="Ss" id="Textual/Numeric_Grouping_operations"><a class="selflink" href="#Textual/Numeric_Grouping_operations">Textual/Numeric
  Grouping operations</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>count</b></dt>
  <dd class="It-tag">count number of elements in the group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>first</b></dt>
  <dd class="It-tag">the first value of the group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>last</b></dt>
  <dd class="It-tag">the last value of the group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>rand</b></dt>
  <dd class="It-tag">one random value from the group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>unique</b></dt>
  <dd class="It-tag">comma-separated sorted list of unique values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>collapse</b></dt>
  <dd class="It-tag">comma-separated list of all input values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>countunique</b></dt>
  <dd class="It-tag">number of unique/distinct values</dd>
</dl>
<h2 class="Ss" title="Ss" id="Statistical_Grouping_operations"><a class="selflink" href="#Statistical_Grouping_operations">Statistical
  Grouping operations</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mean</b></dt>
  <dd class="It-tag">mean of the values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>median</b></dt>
  <dd class="It-tag">median value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>q1</b></dt>
  <dd class="It-tag">1st quartile value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>q3</b></dt>
  <dd class="It-tag">3rd quartile value</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>iqr</b></dt>
  <dd class="It-tag">inter-quartile range</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mode</b></dt>
  <dd class="It-tag">mode value (most common value)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>antimode</b></dt>
  <dd class="It-tag">anti-mode value (least common value)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pstdev</b></dt>
  <dd class="It-tag">population standard deviation</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sstdev</b></dt>
  <dd class="It-tag">sample standard deviation</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pvar</b></dt>
  <dd class="It-tag">population variance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>svar</b></dt>
  <dd class="It-tag">sample variance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mad</b></dt>
  <dd class="It-tag">median absolute deviation, scaled by constant 1.4826 for
      normal distributions</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>madraw</b></dt>
  <dd class="It-tag">median absolute deviation, unscaled</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sskew</b></dt>
  <dd class="It-tag">skewness of the (sample) group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pskew</b></dt>
  <dd class="It-tag">skewness of the (population) group
    <br/>
     values x reported by 'sskew' and 'pskew' operations:
    <pre>
          x &gt; 0       -  positively skewed / skewed right
      0 &gt; x           -  negatively skewed / skewed left
          x &gt; 1       -  highly skewed right
      1 &gt; x &gt;  0.5    -  moderately skewed right
    0.5 &gt; x &gt; -0.5    -  approximately symmetric
   -0.5 &gt; x &gt; -1      -  moderately skewed left
     -1 &gt; x           -  highly skewed left
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>skurt</b></dt>
  <dd class="It-tag">excess Kurtosis of the (sample) group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>pkurt</b></dt>
  <dd class="It-tag">excess Kurtosis of the (population) group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>jarque</b></dt>
  <dd class="It-tag">p-value of the Jarque-Beta test for normality</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>dpo</b></dt>
  <dd class="It-tag">p-value of the D'Agostino-Pearson Omnibus test for
      normality;
    <br/>
     for 'jarque' and 'dpo' operations:
    <br/>
     null hypothesis is normality;
    <br/>
     low p-Values indicate non-normal data;
    <br/>
     high p-Values indicate null-hypothesis cannot be rejected.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Print the sum and the mean of values from column 1:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ seq 10 |  <b>datamash</b> sum 1 mean 1
55  5.5
</pre>
</div>
<br/>
<div class="Pp"></div>
Group input based on field 1, and sum values (per group) on field 2:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ cat example.txt
A  10
A  5
B  9
B  11
$  <b>datamash</b> -g 1 sum 2 &lt; example.txt
A  15
B  20
</pre>
</div>
<br/>
<div class="Pp"></div>
Unsorted input must be sorted (with '-s'):
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ cat example.txt
A  10
C  4
B  9
C  1
A  5
B  11
$  <b>datamash</b> -s -g1 sum 2 &lt; example.txt
A  15
B  20
C  5
</pre>
</div>
<br/>
<div class="Pp"></div>
Which is equivalent to:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ cat example.txt | sort -k1,1 |  <b>datamash</b> -g 1 sum 2
</pre>
</div>
<br/>
<div class="Pp"></div>
Use <b>-h</b> <b>(--headers)</b> if the input file has a header line:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
# Given a file with student name, field, test score...
$ head -n5 scores_h.txt
Name           Major            Score
Shawn          Engineering      47
Caleb          Business         87
Christian      Business         88
Derek          Arts             60
<div class="Pp"></div>
# Calculate the mean and standard devian for each major
$  <b>datamash</b> --sort --headers --group 2 mean 3 pstdev 3 &lt; scores_h.txt
 (or use short form)
$  <b>datamash</b> -sH -g2 mean 3 pstdev 3 &lt; scores_h.txt
 (or use named columns)
$  <b>datamash</b> -sH -g Major mean Score pstdev Score &lt; scores_h.txt
GroupBy(Major)    mean(Score)   pstdev(Score)
Arts              68.9          10.1
Business          87.3           4.9
Engineering       66.5          19.1
Health-Medicine   90.6           8.8
Life-Sciences     55.3          19.7
Social-Sciences   60.2          16.6
</pre>
</div>
<br/>
<div class="Pp"></div>
Reverse field order in each line:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ seq 6 | paste - - |  <b>datamash</b> reverse
2    1
4    3
6    5
</pre>
</div>
<br/>
<div class="Pp"></div>
Transpose rows, columns:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ seq 6 | paste - - |  <b>datamash</b> transpose
1    3    5
2    4    6
</pre>
</div>
<br/>
<div class="Pp"></div>
Remove lines with duplicate key value from column 1 (Unlike
  <b>first</b>,<b>last</b> operations, <b>rmdup</b> is much faster and does not
  require sorting the file with -s):
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
# Given a list of files and sample IDs:
$ cat INPUT
SampleID  File
2         cc.txt
3         dd.txt
1         ab.txt
2         ee.txt
3         ff.txt
<div class="Pp"></div>
# Remove lines with duplicated Sample-ID (column 1):
$  <b>datamash</b> rmdup 1 &lt; INPUT
   (or used named column)
$  <b>datamash</b> -H rmdup SampleID &lt; INPUT
SampleID  File
2         cc.txt
3         dd.txt
1         ab.txt
</pre>
</div>
<br/>
<div class="Pp"></div>
Calculate the sha1 hash value of each TXT file, after calculating the sha1 value
  of each file's content:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
$ sha1sum *.txt | datamash -Wf sha1 2
</pre>
</div>
<br/>
<h1 class="Sh" title="Sh" id="ADDITIONAL_INFORMATION"><a class="selflink" href="#ADDITIONAL_INFORMATION">ADDITIONAL
  INFORMATION</a></h1>
See <a class="Lk" title="Lk" href="http://www.gnu.org/software/datamash">GNU
  Datamash Website (http://www.gnu.org/software/datamash)</a>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Assaf Gordon.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2015 Assaf Gordon License GPLv3+: GNU GPL version 3 or later
  &lt;http://gnu.org/licenses/gpl.html&gt;.
<div>&#x00A0;</div>
This is free software: you are free to change and redistribute it. There is NO
  WARRANTY, to the extent permitted by law.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The full documentation for <b>datamash</b> is maintained as a Texinfo manual. If
  the <b>info</b> and <b>datamash</b> programs are properly installed at your
  site, the command
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>info datamash</b></dd>
</dl>
<div class="Pp"></div>
should give you access to the complete manual.</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 2015</td>
    <td class="foot-os">datamash 1.0.7</td>
  </tr>
</table>
</body>
</html>
