<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:03:38 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>dgit(1) dgit dgit(1)</p>

<p style="margin-top: 1em">NAME <br>
dgit - git integration with the Debian archive</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dgit [dgit-opts] clone [dgit-opts] package [suite]
[./dir|/dir] <br>
dgit [dgit-opts] fetch|pull [dgit-opts] [suite] <br>
dgit [dgit-opts] build|sbuild|build-source [build-opts] <br>
dgit [dgit-opts] push [dgit-opts] [suite] <br>
dgit [dgit-opts] rpush build-host:build-dir [push args...]
<br>
dgit [dgit-opts] action ...</p>

<p style="margin-top: 1em">DESCRIPTION <br>
dgit allows you to treat the Debian archive as if it were a
git repository.</p>

<p style="margin-top: 1em">This is the command line
reference. Please read the tutorial(s):</p>

<p style="margin-top: 1em">dgit-user(7) for users: editing,
building and sharing packages <br>
dgit-nmu-simple(7) for DDs: doing a straightforward NMU <br>
dgit-maint-native(7) for maintainers of Debian-native
packages <br>
dgit-maint-merge(7) for maintainers who want a pure git
workflow <br>
dgit-maint-gbp(7) for maintainers already using
git-buildpackage <br>
dgit-sponsorship(7) for sponsors and sponsored
contributors</p>

<p style="margin-top: 1em">See dgit(7) for detailed
information about the data model, common problems likely to
arise with certain kinds of package, etc.</p>

<p style="margin-top: 1em">OPERATIONS <br>
dgit clone package [suite] [./dir|/dir] <br>
Consults the archive and dgit-repos to construct the git
view of history for package in suite (sid by default) in a
new directory (named ./package by default); also,
down&acirc; <br>
loads any necessary orig tarballs.</p>

<p style="margin-top: 1em">The suite&rsquo;s git tip is
left on the local branch dgit/suite ready for work, and on
the corresponding dgit remote tracking branch. The origin
remote will be set up to point <br>
to the package&rsquo;s dgit-repos tree for the distro to
which suite belongs.</p>

<p style="margin-top: 1em">suite may be a combination of
several underlying suites in the form mainsuite,subsuite...;
see COMBINED SUITES in dgit(7).</p>

<p style="margin-top: 1em">For your convenience, the
vcs-git remote will be set up from the package&rsquo;s
Vcs-Git field, if there is one - but note that in the
general case the history found there may <br>
be different to or even disjoint from dgit&rsquo;s view.</p>

<p style="margin-top: 1em">dgit fetch [suite] <br>
Consults the archive and git-repos to update the git view of
history for a specific suite (and downloads any necessary
orig tarballs), and updates the remote tracking <br>
branch remotes/dgit/dgit/suite. If the current branch is
dgit/suite then dgit fetch defaults to suite; otherwise it
parses debian/changelog and uses the suite specified <br>
there. suite may be a combined suite, as for clone.</p>

<p style="margin-top: 1em">dgit pull [suite] <br>
Does dgit fetch, and then merges the new head of the remote
tracking branch remotes/dgit/dgit/suite into the current
branch.</p>

<p style="margin-top: 1em">dgit build ... <br>
Runs dpkg-buildpackage with some suitable options. Options
and arguments after build will be passed on to
dpkg-buildpackage. It is not necessary to use dgit build
when <br>
using dgit; it is OK to use any approach which ensures that
the generated source package corresponds to the relevant git
commit.</p>

<p style="margin-top: 1em">Tagging, signing and actually
uploading should be left to dgit push.</p>

<p style="margin-top: 1em">dgit build-source ... <br>
Builds the source package, and a changes file for a
prospective source-only upload, using dpkg-source. The
output is left in package_version.dsc and package_ver&acirc;
<br>
sion_source.changes.</p>

<p style="margin-top: 1em">Tagging, signing and actually
uploading should be left to dgit push.</p>

<p style="margin-top: 1em">dgit clean <br>
Cleans the current working tree (according to the --clean=
option in force).</p>

<p style="margin-top: 1em">dgit help <br>
Print a usage summary.</p>

<p style="margin-top: 1em">dgit sbuild ... <br>
Constructs the source package, uses sbuild to do a binary
build, and uses mergechanges to merge the source and binary
changes files. Options and arguments after sbuild <br>
will be passed on to sbuild. The output is left in
package_version_multi.changes.</p>

<p style="margin-top: 1em">Note that by default sbuild does
not build arch-independent packages. You probably want to
pass -A, to request those.</p>

<p style="margin-top: 1em">Tagging, signing and actually
uploading should be left to dgit push.</p>

<p style="margin-top: 1em">dgit gbp-build ... <br>
Runs git-buildpackage with some suitable options. Options
and arguments after gbp-build will be passed on to
git-buildpackage.</p>

<p style="margin-top: 1em">By default this uses
--quilt=gbp, so HEAD should be a git-buildpackage style
branch, not a patches-applied branch.</p>

<p style="margin-top: 1em">Tagging, signing and actually
uploading should be left to dgit push.</p>

<p style="margin-top: 1em">dgit push [suite] <br>
Does an &lsquo;upload&rsquo;, pushing the current HEAD to
the archive (as a source package) and to dgit-repos (as git
commits). The package must already have been built ready for
<br>
upload, with the .dsc and .changes left in the parent
directory. It is normally best to do the build with dgit too
(eg with dgit sbuild): some existing build tools pass <br>
unhelpful options to dpkg-source et al by default, which can
result in the built source package not being identical to
the git tree.</p>

<p style="margin-top: 1em">In more detail: dgit push checks
that the current HEAD corresponds to the .dsc. It then
pushes the HEAD to the suite&rsquo;s dgit-repos branch,
adjusts the .changes to include <br>
any .origs which the archive lacks and exclude .origs which
the archive has (so -sa and -sd are not needed when building
for dgit push), makes a signed git tag, edits the <br>
.dsc to contain the dgit metadata field, runs debsign to
sign the upload (.dsc and .changes), pushes the signed tag,
and finally uses dput to upload the .changes to the <br>
archive.</p>

<p style="margin-top: 1em">dgit push always uses the
package, suite and version specified in the debian/changelog
and the .dsc, which must agree. If the command line
specifies a suite then that <br>
must match too.</p>

<p style="margin-top: 1em">dgit rpush build-host:build-dir
[push args...] <br>
Pushes the contents of the specified directory on a remote
machine. This is like running dgit push on build-host with
build-dir as the current directory; however, signing <br>
operations are done on the invoking host. This allows you to
do a push when the system which has the source code and the
build outputs has no access to the key:</p>

<p style="margin-top: 1em">1. Clone on build host (dgit
clone) <br>
2. Edit code on build host (edit, git commit) <br>
3. Build package on build host (dgit build) <br>
4. Test package on build host or elsewhere (dpkg -i, test)
<br>
5. Upload by invoking dgit rpush on host with your GPG
key.</p>

<p style="margin-top: 1em">However, the build-host must be
able to ssh to the dgit repos. If this is not already the
case, you must organise it separately, for example by the
use of ssh agent for&acirc; <br>
warding.</p>

<p style="margin-top: 1em">The remaining arguments are
treated just as dgit push would handle them.</p>

<p style="margin-top: 1em">build-host and build-dir can be
passed as separate arguments; this is assumed to be the case
if the first argument contains no : (except perhaps one in [
], to support <br>
IPv6 address literals).</p>

<p style="margin-top: 1em">You will need similar enough
versions of dgit on the build-host and the invocation host.
The build-host needs gnupg installed, with your public key
in its keyring (but <br>
not your private key, obviously).</p>

<p style="margin-top: 1em">dgit setup-new-tree <br>
Configure the current working tree the way that dgit clone
would have set it up. Like running dgit setup-useremail,
setup-mergechangelogs and setup-gitattributes (but <br>
only does each thing if dgit is configured to do it
automatically). You can use these in any git repository, not
just ones used with the other dgit operations.</p>

<p style="margin-top: 1em">dgit setup-useremail <br>
Set the working tree&rsquo;s user.name and user.email from
the distro-specific dgit configuration
(dgit-distro.distro.user-name and .user-email), or
DEBFULLNAME or DEBEMAIL.</p>

<p style="margin-top: 1em">dgit setup-mergechangelogs <br>
Configures a git merge helper for the file debian/changelog
which uses dpkg-mergechangelogs.</p>

<p style="margin-top: 1em">dgit setup-gitattributes <br>
Set up the working tree&rsquo;s .git/info/attributes to
disable all transforming attributes for all files. This is
done by defining a macro attribute dgit-defuse-attrs and
<br>
applying it to *. For why, see GITATTRIBUTES in dgit(7).</p>

<p style="margin-top: 1em">(If there is already a macro
attribute line [attr]dgit-defuse-attrs in
.git/info/attributes (whatever its effects), this operation
does nothing further. This fact can be <br>
used to defeat or partially defeat dgit setup-gitattributes
and hence dgit setup-new-tree.)</p>

<p style="margin-top: 1em">dgit quilt-fixup <br>
&lsquo;3.0 (quilt)&rsquo; format source packages need
changes representing not only in-tree but also as patches in
debian/patches. dgit quilt-fixup checks whether this has
been done; <br>
if not, dgit will make appropriate patches in debian/patches
and also commit the resulting changes to git.</p>

<p style="margin-top: 1em">This is normally done
automatically by dgit build and dgit push.</p>

<p style="margin-top: 1em">dgit will try to turn each
relevant commit in your git history into a new quilt patch.
dgit cannot convert nontrivial merges, or certain other
kinds of more exotic his&acirc; <br>
tory. If dgit can&rsquo;t find a suitable linearisation of
your history, by default it will fail, but you can ask it to
generate a single squashed patch instead.</p>

<p style="margin-top: 1em">dgit import-dsc [sub-options]
../path/to/.dsc [+|..]branch <br>
Import a Debian-format source package, specified by its
.dsc, into git, the way dgit fetch would do.</p>

<p style="margin-top: 1em">This does about half the work of
dgit fetch: it will convert the .dsc into a new, orphan git
branch. Since dgit has no access to a corresponding source
package archive or <br>
knowledge of the history it does not consider whether this
version is newer than any previous import or corresponding
git branches; and it therefore does not make a pseu&acirc;
<br>
domerge to bind the import into any existing git
history.</p>

<p style="margin-top: 1em">Because a .dsc can contain a
Dgit field naming a git commit (which you might not have),
and specifying where to find that commit (and any history
rewrite table), import- <br>
dsc might need online access. If this is a problem (or
dgit&rsquo;s efforts to find the commit fail), consider
--no-chase-dsc-distro or
--force-import-dsc-with-dgit-field.</p>

<p style="margin-top: 1em">There is only only
sub-option:</p>

<p style="margin-top: 1em">--require-valid-signature causes
dgit to insist that the signature on the .dsc is valid
(using the same criteria as dpkg-source -x). Otherwise, dgit
tries to verify the <br>
signature but the outcome is reported only as messages to
stderr.</p>

<p style="margin-top: 1em">If branch is prefixed with +
then if it already exists, it will be simply ovewritten, no
matter its existing contents. If branch is prefixed with ..
then if it already <br>
exists and dgit actually imports the dsc (rather than simply
reading the git commit out of the Dgit field), dgit will
make a pseudomerge so that the result is necessarily <br>
fast forward from the existing branch. Otherwise, if branch
already exists, dgit will stop with an error message.</p>

<p style="margin-top: 1em">If branch does not start with
refs/, refs/heads/ is prepended.</p>

<p style="margin-top: 1em">dgit version <br>
Prints version information and exits.</p>

<p style="margin-top: 1em">dgit clone-dgit-repos-server
destdir <br>
Tries to fetch a copy of the source code for the
dgit-repos-server, as actually being used on the dgit git
server, as a git tree.</p>

<p style="margin-top: 1em">dgit
print-dgit-repos-server-source-url <br>
Prints the url used by dgit clone-dgit-repos-server. This is
hopefully suitable for use as a git remote url. It may not
be useable in a browser.</p>

<p style="margin-top: 1em">OPTIONS <br>
--dry-run | -n <br>
Go through the motions, fetching all information needed, but
do not actually update the output(s). For push, dgit does
the required checks and leaves the new .dsc in a <br>
temporary file, but does not sign, tag, push or upload.</p>

<p style="margin-top: 1em">--damp-run | -L <br>
Go through many more of the motions: do everything that
doesn&rsquo;t involve either signing things, or making
changes on the public servers.</p>

<p style="margin-top: 1em">-kkeyid <br>
Use keyid for signing the tag and the upload. The default
comes from the distro&rsquo;s keyid config setting (see
CONFIGURATION, below), or failing that, the uploader trailer
<br>
line in debian/changelog.</p>

<p style="margin-top: 1em">--no-sign <br>
does not sign tags or uploads (meaningful only with
push).</p>

<p style="margin-top: 1em">-ppackage <br>
Specifies that we should process source package package
rather than looking in debian/control or debian/changelog.
Valid with dgit fetch and dgit pull, only.</p>

<p style="margin-top: 1em">--clean=git | -wg <br>
Use git clean -xdf to clean the working tree, rather than
running the package&rsquo;s rules clean target.</p>

<p style="margin-top: 1em">This will delete all files which
are not tracked by git. (Including any files you forgot to
git add.)</p>

<p style="margin-top: 1em">--clean=... options other than
dpkg-source are useful when the package&rsquo;s clean target
is troublesome, or to avoid needing the
build-dependencies.</p>

<p style="margin-top: 1em">--clean=git-ff | -wgf <br>
Use git clean -xdff to clean the working tree. Like git
clean -xdf but it also removes any subdirectories containing
different git trees (which only unusual packages are <br>
likely to create).</p>

<p style="margin-top: 1em">--clean=check | -wc <br>
Merely check that the tree is clean (does not contain
uncommitted files). Avoids running rules clean, and can
avoid needing the build-dependencies.</p>

<p style="margin-top: 1em">--clean=none | -wn <br>
Do not clean the tree, nor check that it is clean. Avoids
running rules clean, and can avoid needing the
build-dependencies. If there are files which are not in git,
or <br>
if the build creates such files, a subsequent dgit push will
fail.</p>

<p style="margin-top: 1em">--clean=dpkg-source | -wd <br>
Use dpkg-buildpackage to do the clean, so that the source
package is cleaned by dpkg-source running the
package&rsquo;s clean target. This is the default. Requires
the pack&acirc; <br>
age&rsquo;s build dependencies.</p>

<p style="margin-top: 1em">--clean=dpkg-source-d | -wdd
<br>
Use dpkg-buildpackage -d to do the clean, so that the source
package is cleaned by dpkg-source running the
package&rsquo;s clean target. The build-dependencies are not
checked <br>
(due to -d), which violates policy, but may work in
practice.</p>

<p style="margin-top: 1em">-N | --new <br>
The package is or may be new in this suite. Without this,
dgit will refuse to push. It may (for Debian, will) be
unable to access the git history for any packages which <br>
have been newly pushed and have not yet been published.</p>

<p style="margin-top: 1em">--ignore-dirty <br>
Do not complain if the working tree does not match your git
HEAD. This can be useful with build, if you plan to commit
later. (dgit push will still ensure that the .dsc <br>
you upload and the git tree you push are identical, so this
option won&rsquo;t make broken pushes.)</p>

<p style="margin-top: 1em">--overwrite[=previous-version]
<br>
Declare that even though your git branch is not a descendant
of the version in the archive according to the revision
history, it really does contain all the (wanted) <br>
changes from that version.</p>

<p style="margin-top: 1em">This option is useful if you are
the maintainer, and you have incorporated NMU changes into
your own git workflow in a way that doesn&rsquo;t make your
branch a fast forward <br>
from the NMU.</p>

<p style="margin-top: 1em">previous-version ought to be the
version currently in the archive. If previous-version is not
specified, dgit will check that the version in the archive
is mentioned in <br>
your debian/changelog. (This will avoid losing changes
unless someone committed to git a finalised changelog entry,
and then made later changes to that version.)</p>

<p style="margin-top: 1em">dgit push --overwrite will make
a pseudo-merge (that is, something that looks like the
result of git merge -s ours) to stitch the archive&rsquo;s
version into your own git his&acirc; <br>
tory, so that your push is a fast forward from the
archive.</p>

<p style="margin-top: 1em">(In quilt mode gbp, dpm or
unpatched, implying a split between the dgit view and the
maintainer view, the pseudo-merge will appear only in the
dgit view.)</p>

<p style="margin-top: 1em">--delayed=days <br>
Upload to a DELAYED queue.</p>

<p style="margin-top: 1em">WARNING: If the maintainer
responds by cancelling your upload from the queue, and does
not make an upload of their own, this will not rewind the
git branch on the dgit git <br>
server. Other dgit users will then see your push (with a
warning message from dgit) even though the maintainer wanted
to abolish it. Such users might unwittingly rein&acirc; <br>
troduce your changes.</p>

<p style="margin-top: 1em">If this situation arises,
someone should make a suitable dgit push to update the
contents of dgit-repos to a version without the
controversial changes.</p>

<p style="margin-top: 1em">--no-chase-dsc-distro <br>
Tells dgit not to look online for additional git
repositories containing information about a particular .dsc
being imported. Chasing is the default.</p>

<p style="margin-top: 1em">For most operations (such as
fetch and pull), disabling chasing means dgit will access
only the git server for the distro you are directly working
with, even if the .dsc <br>
was copied verbatim from another distro. For import-dsc,
disabling chasing means dgit will work completely
offline.</p>

<p style="margin-top: 1em">Disabling chasing can be
hazardous: if the .dsc names a git commit which has been
rewritten by those in charge of the distro, this option may
prevent that rewrite from <br>
being effective. Also, it can mean that dgit fails to find
necessary git commits.</p>

<p style="margin-top: 1em">--dgit-view-save=branch|ref <br>
Specifies that when a split view quilt mode is in operation,
and dgit calculates (or looks up in its cache) a dgit view
corresponding to your HEAD, the dgit view will be <br>
left in ref. The specified ref is unconditionally
overwritten, so don&rsquo;t specify a branch you want to
keep.</p>

<p style="margin-top: 1em">This option is effective only
with the following operations: quilt-fixup; push; all
builds. And it is only effective with --[quilt=]gbp,
--[quilt=]dpm, --quilt=unpatched.</p>

<p style="margin-top: 1em">If ref does not start with refs/
it is taken to to be a branch - i.e. refs/heads/ is
prepended.</p>

<p style="margin-top: 1em">--deliberately-something <br>
Declare that you are deliberately doing something. This can
be used to override safety catches, including safety catches
which relate to distro-specific policies. The <br>
use of --deliberately is declared and published in the
signed tags generated for you by dgit, so that the archive
software can give effect to your intent, and for the
ben&acirc; <br>
efit humans looking at the history. The meanings of
somethings understood in the context of Debian are discussed
below:</p>

<p style="margin-top: 1em">--deliberately-not-fast-forward
<br>
Declare that you are deliberately rewinding history. When
pushing to Debian, use this when you are making a renewed
upload of an entirely new source package whose previ&acirc;
<br>
ous version was not accepted for release from NEW because of
problems with copyright or redistributibility.</p>


<p style="margin-top: 1em">--deliberately-include-questionable-history
<br>
Declare that you are deliberately including, in the git
history of your current push, history which contains a
previously-submitted version of this package which was not
<br>
approved (or has not yet been approved) by the ftpmasters.
When pushing to Debian, only use this option after verifying
that: none of the rejected-from-NEW (or never- <br>
accepted) versions in the git history of your current push,
were rejected by ftpmaster for copyright or
redistributability reasons.</p>

<p style="margin-top: 1em">--deliberately-fresh-repo <br>
Declare that you are deliberately rewinding history and want
to throw away the existing repo. Not relevant when pushing
to Debian, as the Debian server will do this auto&acirc;
<br>
matically when necessary.</p>

<p style="margin-top: 1em">--quilt=linear <br>
When fixing up source format &lsquo;3.0 (quilt)&rsquo;
metadata, insist on generating a linear patch stack: one new
patch for each relevant commit. If such a stack cannot be
gener&acirc; <br>
ated, fail. This is the default for Debian.</p>

<p style="margin-top: 1em">HEAD should be a series of plain
commits (not touching debian/patches/), and pseudomerges,
with as ancestor a patches-applied branch.</p>

<p style="margin-top: 1em">--quilt=auto <br>
When fixing up source format &lsquo;3.0 (quilt)&rsquo;
metadata, prefer to generate a linear patch stack (as with
--quilt=auto) but if that doesn&rsquo;t seem possible, try
to generate a <br>
single squashed patch for all the changes made in git (as
with --quilt=smash). This is not a good idea for an NMU in
Debian.</p>

<p style="margin-top: 1em">--quilt=smash <br>
When fixing up source format &lsquo;3.0 (quilt)&rsquo;
metadata, generate a single additional patch for all the
changes made in git. This is not a good idea for an NMU in
Debian.</p>

<p style="margin-top: 1em">(If HEAD has any in-tree patches
already, they must apply cleanly. This will be the case for
any trees produced by dgit fetch or clone; if you do not
change the upstream <br>
version nor make changes in debian/patches, it will remain
true.)</p>

<p style="margin-top: 1em">--quilt=nofix <br>
Check whether source format &lsquo;3.0 (quilt)&rsquo;
metadata would need fixing up, but, if it does, fail. You
must then fix the metadata yourself somehow before pushing.
(NB that <br>
dpkg-source --commit will not work because the dgit git tree
does not have a .pc directory.)</p>

<p style="margin-top: 1em">--quilt=nocheck |
--no-quilt-fixup <br>
Do not check whether up source format &lsquo;3.0
(quilt)&rsquo; metadata needs fixing up. If you use this
option and the metadata did in fact need fixing up, dgit
push will fail.</p>

<p style="margin-top: 1em">--[quilt=]gbp | --[quilt=]dpm |
--quilt=unapplied <br>
Tell dgit that you are using a nearly-dgit-compatible git
branch, aka a maintainer view, and do not want your branch
changed by dgit.</p>

<p style="margin-top: 1em">--gbp (short for --quilt=gbp) is
for use with git-buildpackage. Your HEAD is expected to be a
patches-unapplied git branch, except that it might contain
changes to <br>
upstream .gitignore files. This is the default for dgit
gbp-build.</p>

<p style="margin-top: 1em">--dpm (short for --quilt=dpm) is
for use with git-dpm. Your HEAD is expected to be a
patches-applied git branch, except that it might contain
changes to upstream .gitig&acirc; <br>
nore files.</p>

<p style="margin-top: 1em">--quilt=unapplied specifies that
your HEAD is a patches-unapplied git branch (and that any
changes to upstream .gitignore files are represented as
patches in <br>
debian/patches).</p>

<p style="margin-top: 1em">With --quilt=gbp|dpm|unapplied,
dgit push (or precursors like quilt-fixup and build) will
automatically generate a conversion of your git branch into
the right form. dgit <br>
push will push the dgit-compatible form (the dgit view) to
the dgit git server. The dgit view will be visible to you in
the dgit remote tracking branches, but your own <br>
branch will not be modified. dgit push will create a tag
debian/version for the maintainer view, and the dgit tag
archive/debian/version for the dgit view. dgit quilt- <br>
fixup will merely do some checks, and cache the maintainer
view.</p>

<p style="margin-top: 1em">If you have a branch like this
it is essential to specify the appropriate --quilt= option!
This is because it is not always possible to tell: a
patches-unapplied git <br>
branch of a package with one patch, for example, looks very
like a patches-applied branch where the user has used git
revert to undo the patch, expecting to actually <br>
revert it. However, if you fail to specify the right --quilt
option, and you aren&rsquo;t too lucky, dgit will notice the
problem and stop, with a useful hint.</p>

<p style="margin-top: 1em">-ddistro | --distro=distro <br>
Specifies that the suite to be operated on is part of distro
distro. This overrides the default value found from the git
config option dgit-suite.suite.distro. The only <br>
effect is that other configuration variables (used for
accessing the archive and dgit-repos) used are
dgit-distro.distro.*.</p>

<p style="margin-top: 1em">If your suite is part of a
distro that dgit already knows about, you can use this
option to make dgit work even if your dgit doesn&rsquo;t
know about the suite. For example, <br>
specifying -ddebian will work when the suite is an unknown
suite in the Debian archive.</p>

<p style="margin-top: 1em">To define a new distro it is
necessary to define methods and URLs for fetching (and, for
dgit push, altering) a variety of information both in the
archive and in dgit- <br>
repos. How to set this up is not yet documented.</p>

<p style="margin-top: 1em">-Cchangesfile <br>
Specifies the .changes file which is to be uploaded. By
default dgit push looks for single .changes file in the
parent directory whose filename suggests it is for the <br>
right package and version.</p>

<p style="margin-top: 1em">If the specified changesfile
pathname contains slashes, the directory part is also used
as the value for --build-products-dir; otherwise, the
changes file is expected in <br>
that directory (by default, in ..).</p>

<p style="margin-top: 1em">--rm-old-changes <br>
When doing a build, delete any changes files matching
package_version_*.changes before starting. This ensures that
dgit push (and dgit sbuild) will be able to unam&acirc; <br>
bigously identify the relevant changes files from the most
recent build, even if there have been previous builds with
different tools or options. The default is not to <br>
remove, but --no-rm-old-changes can be used to override a
previous --rm-old-changes or the .rm-old-changes
configuration setting.</p>

<p style="margin-top: 1em">--build-products-dir=directory
<br>
Specifies where to find the built files to be uploaded. By
default, dgit looks in the parent directory (..).</p>

<p style="margin-top: 1em">--no-rm-on-error <br>
Do not delete the destination directory if clone fails.</p>

<p style="margin-top: 1em">--dep14tag <br>
Generates a DEP-14 tag (eg debian/version) as well as a dgit
tag (eg archive/debian/version) where possible. This is the
default.</p>

<p style="margin-top: 1em">--no-dep14tag <br>
Do not generate a DEP-14 tag, except in split quilt view
mode. (On servers where only the old tag format is
supported, the dgit tag will have the DEP-14 name. This <br>
option does not prevent that.)</p>

<p style="margin-top: 1em">--dep14tag-always <br>
Insist on generating a DEP-14 tag as well as a dgit tag. If
the server does not support that, dgit push will fail.</p>

<p style="margin-top: 1em">-D Prints debugging information
to stderr. Repeating the option produces more output
(currently, up to -DDDD is meaningfully different).</p>

<p style="margin-top: 1em">-cname=value <br>
Specifies a git configuration option, to be used for this
run. dgit itself is also controlled by git configuration
options.</p>

<p style="margin-top: 1em">-vversion|_ |
--since-version=version|_ <br>
Specifies the -vversion option to pass to dpkg-genchanges,
during builds. Changes (from debian/changelog) since this
version will be included in the built changes file, <br>
and hence in the upload. If this option is not specified,
dgit will query the archive and use the latest version
uploaded to the intended suite.</p>

<p style="margin-top: 1em">Specifying _ inhibits this, so
that no -v option will be passed to dpkg-genchanges (and as
a result, only the last stanza from debian/changelog will be
used for the build <br>
and upload).</p>

<p style="margin-top: 1em">-mmaintaineraddress <br>
Passed to dpkg-genchanges (eventually).</p>

<p style="margin-top: 1em">--ch:option <br>
Specifies a single additional option to pass, eventually, to
dpkg-genchanges.</p>

<p style="margin-top: 1em">Options which are safe to pass
include -C (and also -si -sa -sd although these should never
be necessary with Debian since dgit automatically calculates
whether .origs <br>
need to be uploaded.)</p>

<p style="margin-top: 1em">For other options the caveat
below applies.</p>

<p style="margin-top: 1em">--curl:option | --dput:option
|... <br>
Specifies a single additional option to pass to curl, dput,
debsign, dpkg-source, dpkg-buildpackage, dpkg-genchanges,
sbuild, ssh, dgit, apt-get, apt-cache, gbp-pq, gbp- <br>
build, or mergechanges. Can be repeated as necessary.</p>

<p style="margin-top: 1em">Use of this ability should not
normally be necessary. It is provided for working around
bugs, or other unusual situations. If you use these options,
you may violate <br>
dgit&rsquo;s assumptions about the behaviour of its
subprograms and cause lossage.</p>

<p style="margin-top: 1em">For dpkg-buildpackage,
dpkg-genchanges, mergechanges and sbuild, the option applies
only when the program is invoked directly by dgit. Usually,
for passing options to <br>
dpkg-genchanges, you should use --ch:option.</p>

<p style="margin-top: 1em">Specifying --git is not
effective for some lower-level read-only git operations
performed by dgit, and also not when git is invoked by
another program run by dgit.</p>

<p style="margin-top: 1em">See notes below regarding ssh
and dgit.</p>

<p style="margin-top: 1em">NB that --gpg:option is not
supported (because debsign does not have that facility). But
see -k and the keyid distro config setting.</p>

<p style="margin-top: 1em">--curl=program | --dput=program
|... <br>
Specifies alternative programs to use instead of curl, dput,
debsign, dpkg-source, dpkg-buildpackage, dpkg-genchanges,
sbuild, gpg, ssh, dgit, apt-get, apt-cache, git, <br>
gbp-pq, gbp-build, or mergechanges.</p>

<p style="margin-top: 1em">For dpkg-buildpackage,
dpkg-genchanges, mergechanges and sbuild, this applies only
when the program is invoked directly by dgit.</p>

<p style="margin-top: 1em">For dgit, specifies the command
to run on the remote host when dgit rpush needs to invoke a
remote copy of itself. (dgit also reinvokes itself as the
EDITOR for dpkg- <br>
source --commit; this is done using argv[0], and is not
affected by --dgit=).</p>

<p style="margin-top: 1em">gbp-build&rsquo;s value is used
instead of gbp build or git-buildpackage. (The default is
the latter unless the former exists on PATH.) gbp-pq&rsquo;s
value is used instead of gbp <br>
pq. In both cases, unusually, the specified value is split
on whitespace to produce a command and possibly some options
and/or arguments.</p>

<p style="margin-top: 1em">For ssh, the default value is
taken from the DGIT_SSH or GIT_SSH environment variables, if
set (see below). And, for ssh, when accessing the archive
and dgit-repos, this <br>
command line setting is overridden by the git config
variables dgit-distro.distro.ssh and .dgit.default.ssh
(which can in turn be overridden with -c). Also, when dgit
is <br>
using git to access dgit-repos, only git&rsquo;s idea of
what ssh to use (eg, GIT_SSH) is relevant.</p>

<p style="margin-top: 1em">--existing-package=package <br>
dgit push needs to canonicalise the suite name. Sometimes,
dgit lacks a way to ask the archive to do this without
knowing the name of an existing package. Without --new <br>
we can just use the package we are trying to push. But with
--new that will not work, so we guess dpkg or use the value
of this option. This option is not needed with <br>
the default mechanisms for accessing the archive.</p>

<p style="margin-top: 1em">-h|--help <br>
Print a usage summary.</p>

<p style="margin-top: 1em">--initiator-tempdir=directory
<br>
dgit rpush uses a temporary directory on the invoking
(signing) host. This option causes dgit to use directory
instead. Furthermore, the specified directory will be
emp&acirc; <br>
tied, removed and recreated before dgit starts, rather than
removed after dgit finishes. The directory specified must be
an absolute pathname.</p>

<p style="margin-top: 1em">--force-something <br>
Instructs dgit to try to proceed despite detecting what it
thinks is going to be a fatal problem. This is probably not
going to work. These options are provided as an <br>
escape hatch, in case dgit is confused. (They might also be
useful for testing error cases.)</p>


<p style="margin-top: 1em">--force-import-dsc-with-dgit-field
<br>
Tell dgit import-dsc to treat a .dsc with a Dgit field like
one without it. The result is a fresh import, discarding the
git history that the person who pushed that .dsc <br>
was working with.</p>

<p style="margin-top: 1em">--force-unrepresentable <br>
Carry on even if dgit thinks that your git tree contains
changes (relative to your .orig tarballs) which dpkg-source
is not able to represent. Your build or push will <br>
probably fail later.</p>

<p style="margin-top: 1em">--force-changes-origs-exactly
<br>
Use the set of .origs specified in your .changes, exactly,
without regard to what is in the archive already. The
archive may well reject your upload.</p>


<p style="margin-top: 1em">--force-unsupported-source-format
<br>
Carry on despite dgit not understanding your source package
format. dgit will probably mishandle it.</p>

<p style="margin-top: 1em">--force-dsc-changes-mismatch
<br>
Do not check whether .dsc and .changes match. The archive
will probably reject your upload.</p>

<p style="margin-top: 1em">--force-import-gitapply-absurd |
--force-import-gitapply-no-absurd <br>
Force on or off the use of the absurd git-apply emulation
when running gbp pq import when importing a package from a
.dsc. See Debian bug #841867.</p>

<p style="margin-top: 1em">CONFIGURATION <br>
dgit can be configured via the git config system. You may
set keys with git-config (either in system-global or
per-tree configuration), or provide -ckey=value on the dgit
com&acirc; <br>
mand line.</p>

<p style="margin-top: 1em">Settings likely to be useful for
an end user include:</p>

<p style="margin-top: 1em">dgit-suite.suite.distro distro
<br>
Specifies the distro for a suite. dgit keys off the suite
name (which appears in changelogs etc.), and uses that to
determine the distro which is involved. The config <br>
used is thereafter that for the distro.</p>

<p style="margin-top: 1em">suite may be a glob pattern.</p>

<p style="margin-top: 1em">dgit.default.distro distro <br>
The default distro for an unknown suite.</p>

<p style="margin-top: 1em">dgit.default.default-suite suite
<br>
The default suite (eg for clone).</p>

<p style="margin-top: 1em">dgit.default.* <br>
for each dgit-distro.distro.*, the default value used if
there is no distro-specific setting.</p>

<p style="margin-top: 1em">dgit-distro.distro.clean-mode
<br>
One of the values for the command line --clean= option; used
if --clean is not specified.</p>

<p style="margin-top: 1em">dgit-distro.distro.quilt-mode
<br>
One of the values for the command line --quilt= option; used
if --quilt is not specified.</p>


<p style="margin-top: 1em">dgit-distro.distro.rm-old-changes
<br>
Boolean, used if neither --rm-old-changes nor
--no-rm-old-changes is specified. The default is not to
remove.</p>

<p style="margin-top: 1em">dgit-distro.distro.readonly
auto|a | true|t|y|1 | false|f|n|0 <br>
Whether you have push access to the distro. For Debian, it
is OK to use auto, which uses readonly mode if you are not
pushing right now; but, setting this to false will <br>
avoid relying on the mirror of the dgit git repository
server.</p>

<p style="margin-top: 1em">dgit-distro.distro.keyid <br>
See also -k.</p>

<p style="margin-top: 1em">dgit-distro.distro.mirror
url</p>

<p style="margin-top: 1em">dgit-distro.distro.username <br>
Not relevant for Debian.</p>

<p style="margin-top: 1em">dgit-distro.distro.upload-host
<br>
Might be useful if you have an intermediate queue
server.</p>

<p style="margin-top: 1em">dgit-distro.distro.user-name
dgit-distro.distro.user-email <br>
Values to configure for user.name and user.email in new git
trees. If not specified, the DEBFULLNAME and DEBEMAIL
environment variables are used, respectively. Only used <br>
if .setup-usermail is not disabled.</p>


<p style="margin-top: 1em">dgit-distro.distro.setup-useremail
<br>
Whether to set user.name and user.email in new git trees.
True by default. Ignored for dgit setup-setup-useremail,
which does it anyway.</p>


<p style="margin-top: 1em">dgit-distro.distro.setup-mergechangelogs
<br>
Whether to setup a merge driver which uses
dpkg-mergechangelogs for debian/changelog. True by default.
Ignored for dgit setup-mergechangelogs, which does it
anyway.</p>


<p style="margin-top: 1em">dgit-distro.distro.setup-gitattributes
<br>
Whether to configure .git/info/attributes to suppress
checkin/checkout file content transformations in new git
trees. True by default. Ignored for dgit setup-gitat&acirc;
<br>
tributes, which does it anyway.</p>

<p style="margin-top: 1em">dgit-distro.distro.cmd-cmd <br>
Program to use instead of cmd. Works like --cmd=... .</p>

<p style="margin-top: 1em">dgit-distro.distro.opts-cmd <br>
Extra options to pass to cmd. Works like --cmd:... . To pass
several options, configure multiple values in git config
(with git config --add). The options for <br>
dgit.default.opts-cmd dgit-distro.distro/push.opts-cmd and
are all used, followed by options from dgit&rsquo;s command
line.</p>

<p style="margin-top: 1em">ACCESS CONFIGURATION <br>
There are many other settings which specify how a particular
distro&rsquo;s services (archive and git) are provided.
These should not normally be adjusted, but are documented
for the <br>
benefit of distros who wish to adopt dgit.</p>


<p style="margin-top: 1em">dgit-distro.distro.nominal-distro
<br>
Shown in git tags, Dgit fields, and so on.</p>

<p style="margin-top: 1em">dgit-distro.distro.alias-canon
<br>
Used for all access configuration lookup.</p>

<p style="margin-top: 1em">dgit-distro.distro/push.* <br>
If set, overrides corresponding non /push config when
readonly=false, or when pushing and readonly=auto.</p>

<p style="margin-top: 1em">dgit-distro.distro.git-url</p>


<p style="margin-top: 1em">dgit-distro.distro.git-url[-suffix]</p>


<p style="margin-top: 1em">dgit-distro.distro.git-proto</p>

<p style="margin-top: 1em">dgit-distro.distro.git-path</p>

<p style="margin-top: 1em">dgit-distro.distro.git-check
true|false|url|ssh-cmd</p>


<p style="margin-top: 1em">dgit-distro.distro.git-check-suffix</p>


<p style="margin-top: 1em">dgit-distro.distro.diverts.divert
new-distro|/distro-suffix</p>

<p style="margin-top: 1em">dgit-distro.distro.git-create
ssh-cmd|true</p>


<p style="margin-top: 1em">dgit-distro.distro.archive-query
ftpmasterapi: | madison:distro | dummycat:/path |
sshpsql:user@host:dbname</p>


<p style="margin-top: 1em">dgit-distro.distro.archive-query-(url|tls-key|curl-ca-args)</p>


<p style="margin-top: 1em">dgit-distro.distro.madison-distro</p>


<p style="margin-top: 1em">dgit-distro.distro.archive-query-default-component</p>


<p style="margin-top: 1em">dgit-distro.distro.dgit-tag-format</p>

<p style="margin-top: 1em">dgit-distro.distro.dep14tag
want|no|always</p>

<p style="margin-top: 1em">dgit-distro.distro.ssh</p>


<p style="margin-top: 1em">dgit-distro.distro.sshpsql-dbname</p>


<p style="margin-top: 1em">dgit-distro.distro.(git|sshpsql)-(user|host|user-force)</p>


<p style="margin-top: 1em">dgit-distro.distro.backports-quirk</p>


<p style="margin-top: 1em">dgit-distro.distro.rewrite-map-enable</p>

<p style="margin-top: 1em">dgit.default.old-dsc-distro</p>


<p style="margin-top: 1em">dgit.dsc-url-proto-ok.protocol</p>


<p style="margin-top: 1em">dgit.dsc-url-proto-ok.bad-syntax</p>


<p style="margin-top: 1em">dgit.default.dsc-url-proto-ok</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
DGIT_SSH, GIT_SSH <br>
specify an alternative default program (and perhaps
arguments) to use instead of ssh. DGIT_SSH is consulted
first and may contain arguments; if it contains any
whitespace <br>
will be passed to the shell. GIT_SSH specifies just the
program; no arguments can be specified, so dgit interprets
it the same way as git does. See also the --ssh= and <br>
--ssh: options.</p>

<p style="margin-top: 1em">DEBEMAIL, DEBFULLNAME <br>
Default git user.email and user.name for new trees. See dgit
setup-new-tree.</p>

<p style="margin-top: 1em">gpg, dpkg-..., debsign, git,
curl, dput, LWP::UserAgent <br>
and other subprograms and modules used by dgit are affected
by various environment variables. Consult the documentaton
for those programs for details.</p>

<p style="margin-top: 1em">BUGS <br>
There should be a &lsquo;dgit rebase-prep&rsquo; command or
some such to turn a fast-forwarding branch containing
pseudo-merges back into a rebasing patch stack. It might
have to leave a <br>
note for a future dgit push.</p>

<p style="margin-top: 1em">If the dgit push fails halfway
through, it is not necessarily restartable and idempotent.
It would be good to check that the proposed signing key is
available before starting <br>
work.</p>

<p style="margin-top: 1em">dgit&rsquo;s build functions,
and dgit push, may make changes to your current HEAD. Sadly
this is necessary for packages in the &lsquo;3.0
(quilt)&rsquo; source format. This is ultimately due to <br>
what I consider design problems in quilt and
dpkg-source.</p>

<p style="margin-top: 1em">--dry-run does not always work
properly, as not doing some of the git fetches may result in
subsequent actions being different. Doing a non-dry-run dgit
fetch first will help. <br>
--damp-run is likely to work much better.</p>

<p style="margin-top: 1em">SEE ALSO <br>
dgit(7), dgit-*(7), curl(1), dput(1), debsign(1),
git-config(1), git-buildpackage(1), dpkg-buildpackage(1),
<br>
https://browse.dgit.debian.org/</p>

<p style="margin-top: 1em">Debian Project dgit(1)</p>
<hr>
</body>
</html>
