<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ipa-test-task(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ipa-test-task(1)</td>
    <td class="head-vol">FreeIPA Manual Pages</td>
    <td class="head-rtitle">ipa-test-task(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ipa-test-task - Run a task for FreeIPA testing
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
ipa-test-task -h
<div>&#x00A0;</div>
ipa-test-task [global-options] TASK [task-options]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Run a task using FreeIPA integration testing configuration. This tool is meant
  for use in scripts that test FreeIPA functionality. See ipa-test-config(1) for
  FreeIPA integration test configuration.
<div style="height: 1.00em;">&#x00A0;</div>
This tool should never be run in a production environment. It is not designed
  with security in mind.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="GLOBAL_OPTIONS"><a class="selflink" href="#GLOBAL_OPTIONS">GLOBAL
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Print out the command's usage and exit. If given after a
      subcommand, prints that subcommand's usage message.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--with-beakerlib</b></dt>
  <dd class="It-tag">Enable BeakerLib integration. Log messages are reported via
      beakerlib(1) commands. This option requires an active BeakerLib phase.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SUBCOMMANDS"><a class="selflink" href="#SUBCOMMANDS">SUBCOMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task install-master [--host HOST]</b></dt>
  <dd class="It-tag">Install an initial IPA server on the given host, or on the
      configured master if --host is not given.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task install-replica [--master MASTER]
    HOST</b></dt>
  <dd class="It-tag">Install an IPA replica on the given host. It is initialized
      from the IPA server given by --master, or from the configured master if
      --master is not given.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task install-client [--master MASTER]
    HOST</b></dt>
  <dd class="It-tag">Install an IPA client on the given host. It is initialized
      from the IPA server given by --master, or from the configured master if
      --master is not given.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task connect-replica HOST1 HOST2</b></dt>
  <dd class="It-tag">Create a replication agreement between two given replicas.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task disconnect-replica HOST1 HOST2</b></dt>
  <dd class="It-tag">Remove a replication agreement between two given replicas.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task uninstall-server [HOST [HOST
    ...]]</b></dt>
  <dd class="It-tag">Uninstall an IPA server (master or replica) on the given
      host(s), and restore the host(s) to the state before installation. If no
      host is given, uninstalls all configured masters and replicas. If no
      server is installed on a host, does nothing on that host.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task uninstall-client [HOST [HOST
    ...]]</b></dt>
  <dd class="It-tag">Uninstall an IPA client on the given host(s), and restore
      the host(s) to the state before installation. If no host is given,
      uninstalls all configured clients. If no client is installed on a host,
      does nothing on that host.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task uninstall-all</b></dt>
  <dd class="It-tag">Uninstall IPA from all configured master, replica and
      client hosts. Equivalent to running uninstall-server and uninstall-client
      without arguments.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task cleanup [HOST [HOST ...]]</b></dt>
  <dd class="It-tag">Restore system configuration (such as /etc/resolv.conf) on
      the given hosts to a state before installation. If no hosts are given,
      clean up all configured hosts. This functionality is included in the
      uninstall-* subcommands and is rarely useful alone.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task install-topo [--skip-master]
    [--skip-clients] [--master M] [--replicas R1 [R2...]] [--clients C1 [C2
    ...]] TOPO</b></dt>
  <dd class="It-tag">Install a number of FreeIPA servers and clients in the
      given topology. Use the list-topos subcommand for a list of available
      topologies.
    <div style="height: 1.00em;">&#x00A0;</div>
    Unless --skip-master is given, an initial server is installed on the host
      given by --master, or on the configured master if --master is missing.
    <div style="height: 1.00em;">&#x00A0;</div>
    Replicas are installed according to the selected topology on hosts given by
      --replicas, or on all configured replicas if that option is not given.
    <div style="height: 1.00em;">&#x00A0;</div>
    Unless --skip-clients is given, clients are installed on hosts given by
      --clients, or on all configured clients if --clients is not given. Servers
      used for client installation are selected in a round-robin fashion.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task list-topos</b></dt>
  <dd class="It-tag">List the topologies available for the install-topo
      subcommand.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task install-adtrust HOST</b></dt>
  <dd class="It-tag">Run ipa-adtrust-install on the IPA and generate SIDs for
      the entries in IPA.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task configure-dns-for-trust HOST AD</b></dt>
  <dd class="It-tag">Based on the relationship of the domains configures the IPA
      DNS for trust. AD DNS needs to be setup manually.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task establish-trust-with-ad HOST AD</b></dt>
  <dd class="It-tag">Establishes trust with Active Directory. Trust type is
      detected depending on the presence of SfU (Services for Unix) support on
      the AD.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task remove-trust-with-ad HOST AD</b></dt>
  <dd class="It-tag">Removes trust with Active Directory. Also removes the
      associated ID range.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task configure-auth-to-local-rule HOST
    AD</b></dt>
  <dd class="It-tag">Configures auth_to_local rule in /etc/krb5.conf
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task clear-sssd-cache HOST</b></dt>
  <dd class="It-tag">Clears SSSD cache by removing the cache files. Restarts
      SSSD.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task setup-sssd-debugging HOST</b></dt>
  <dd class="It-tag">Sets up SSSD debugging. Restarts SSSD.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task sync-time HOST SERVER</b></dt>
  <dd class="It-tag">Syncs the time with the remote server. Please note that
      this function leaves ntpd stopped.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task add-a-records-in-master-domain
    MASTER</b></dt>
  <dd class="It-tag">Adds A records to the IPA master for all the hosts in the
      master domain.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ipa-test-task add-a-record MASTER HOST</b></dt>
  <dd class="It-tag">Adds an A record for the host to the IPA master.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
0 if the command was successful
<div style="height: 1.00em;">&#x00A0;</div>
nonzero if an error occurred
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
A full description of the FreeIPA integration testing framework is available at
  http://www.freeipa.org/page/V3/Integration_testing</div>
<table class="foot">
  <tr>
    <td class="foot-date">Aug 29 2013</td>
    <td class="foot-os">FreeIPA</td>
  </tr>
</table>
</body>
</html>
