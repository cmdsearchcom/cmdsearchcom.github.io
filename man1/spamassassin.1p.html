<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>SPAMASSASSIN(1p)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SPAMASSASSIN(1p)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">SPAMASSASSIN(1p)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
spamassassin - extensible email filter used to identify spam
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
SpamAssassin is an intelligent email filter which uses a diverse range of tests
  to identify unsolicited bulk email, more commonly known as &quot;spam&quot;.
  These tests are applied to email headers and content to classify email using
  advanced statistical methods. In addition, SpamAssassin has a modular
  architecture that allows other technologies to be quickly wielded against spam
  and is designed for easy integration into virtually any email system.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
For ease of access, the SpamAssassin manual has been split up into several
  sections. If you're intending to read these straight through for the first
  time, the suggested order will tend to reduce the number of forward
  references.
<div class="Pp"></div>
Extensive additional documentation for SpamAssassin is available, primarily on
  the SpamAssassin web site and wiki.
<div class="Pp"></div>
You should be able to view SpamAssassin's documentation with your <i>man</i>(1)
  program or <i>perldoc</i>(1).
<h2 class="Ss" title="Ss" id="OVERVIEW"><a class="selflink" href="#OVERVIEW">OVERVIEW</a></h2>
<pre>
    spamassassin              SpamAssassin overview (this section)
</pre>
<h2 class="Ss" title="Ss" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h2>
<pre>
    Mail::SpamAssassin::Conf  SpamAssassin configuration files
</pre>
<h2 class="Ss" title="Ss" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h2>
<pre>
    spamassassin-run          &quot;spamassassin&quot; front-end filtering script
    sa-learn                  train SpamAssassin's Bayesian classifier
    spamc                     client for spamd (faster than spamassassin)
    spamd                     spamassassin server (needed by spamc)
</pre>
<h2 class="Ss" title="Ss" id="DEFAULT_PLUGINS"><a class="selflink" href="#DEFAULT_PLUGINS">DEFAULT
  PLUGINS</a></h2>
<pre>
    Mail::SpamAssassin::Plugin::AskDNS
    Mail::SpamAssassin::Plugin::AutoLearnThreshold
    Mail::SpamAssassin::Plugin::Bayes
    Mail::SpamAssassin::Plugin::BodyEval
    Mail::SpamAssassin::Plugin::Check
    Mail::SpamAssassin::Plugin::DKIM
    Mail::SpamAssassin::Plugin::DNSEval
    Mail::SpamAssassin::Plugin::FreeMail
    Mail::SpamAssassin::Plugin::HTMLEval
    Mail::SpamAssassin::Plugin::HTTPSMismatch
    Mail::SpamAssassin::Plugin::Hashcash
    Mail::SpamAssassin::Plugin::HeaderEval
    Mail::SpamAssassin::Plugin::ImageInfo
    Mail::SpamAssassin::Plugin::MIMEEval
    Mail::SpamAssassin::Plugin::MIMEHeader
    Mail::SpamAssassin::Plugin::Pyzor
    Mail::SpamAssassin::Plugin::Razor2
    Mail::SpamAssassin::Plugin::RelayEval
    Mail::SpamAssassin::Plugin::ReplaceTags
    Mail::SpamAssassin::Plugin::SPF
    Mail::SpamAssassin::Plugin::SpamCop
    Mail::SpamAssassin::Plugin::URIDNSBL
    Mail::SpamAssassin::Plugin::URIDetail
    Mail::SpamAssassin::Plugin::URIEval
    Mail::SpamAssassin::Plugin::VBounce
    Mail::SpamAssassin::Plugin::WLBLEval
    Mail::SpamAssassin::Plugin::WhiteListSubject
</pre>
<h1 class="Sh" title="Sh" id="WEB_SITES"><a class="selflink" href="#WEB_SITES">WEB
  SITES</a></h1>
<pre>
    SpamAssassin web site:     http://spamassassin.apache.org/
    Wiki-based documentation:  http://wiki.apache.org/spamassassin/
</pre>
<h1 class="Sh" title="Sh" id="USER_MAILING_LIST"><a class="selflink" href="#USER_MAILING_LIST">USER
  MAILING LIST</a></h1>
A users mailing list exists where other experienced users are often able to help
  and provide tips and advice. Subscription instructions are located on the
  SpamAssassin web site.
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILES"><a class="selflink" href="#CONFIGURATION_FILES">CONFIGURATION
  FILES</a></h1>
The SpamAssassin rule base, text templates, and rule description text are loaded
  from configuration files.
<div class="Pp"></div>
Default configuration data is loaded from the first existing directory in:
<dl class="Bl-tag">
  <dt class="It-tag">/var/lib/spamassassin/3.004001</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/local/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Site-specific configuration data is used to override any values which had
  already been set. This is loaded from the first existing directory in:
<dl class="Bl-tag">
  <dt class="It-tag">/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/etc/mail/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/local/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/pkg/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/mail/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
From those three directories, SpamAssassin will first read files ending in
  &quot;.pre&quot; in lexical order and then it will read files ending in
  &quot;.cf&quot; in lexical order (most files begin with two numbers to make
  the sorting order obvious).
<div class="Pp"></div>
In other words, it will read <i>init.pre</i> first, then
  <i>10_default_prefs.cf</i> before <i>50_scores.cf</i> and
  <i>20_body_tests.cf</i> before <i>20_head_tests.cf</i>. Options in later files
  will override earlier files.
<div class="Pp"></div>
Individual user preferences are loaded from the location specified on the
  &quot;spamassassin&quot;, &quot;sa-learn&quot;, or &quot;spamd&quot; command
  line (see respective manual page for details). If the location is not
  specified, <i>~/.spamassassin/user_prefs</i> is used if it exists.
  SpamAssassin will create that file if it does not already exist, using
  <i>user_prefs.template</i> as a template. That file will be looked for in:
<dl class="Bl-tag">
  <dt class="It-tag">/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/etc/mail/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/etc/mail/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/local/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/usr/share/spamassassin</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="TAGGING"><a class="selflink" href="#TAGGING">TAGGING</a></h1>
The following two sections detail the default tagging and markup that takes
  place for messages when running &quot;spamassassin&quot; or &quot;spamc&quot;
  with &quot;spamd&quot; in the default configuration.
<div class="Pp"></div>
Note: before header modification and addition, all headers beginning with
  &quot;X-Spam-&quot; are removed to prevent spammer mischief and also to avoid
  potential problems caused by prior invocations of SpamAssassin.
<h2 class="Ss" title="Ss" id="TAGGING_FOR_SPAM_MAILS"><a class="selflink" href="#TAGGING_FOR_SPAM_MAILS">TAGGING
  FOR SPAM MAILS</a></h2>
By default, all messages with a calculated score of 5.0 or higher are tagged as
  spam.
<div class="Pp"></div>
If an incoming message is tagged as spam, instead of modifying the original
  message, SpamAssassin will create a new report message and attach the original
  message as a message/rfc822 MIME part (ensuring the original message is
  completely preserved and easier to recover).
<div class="Pp"></div>
The new report message inherits the following headers (if they are present) from
  the original spam message:
<dl class="Bl-tag">
  <dt class="It-tag">From: header</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">To: header</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Cc: header</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Subject: header</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Date: header</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Message-ID: header</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
The above headers can be modified if the relevant &quot;rewrite_header&quot;
  option is given (see &quot;Mail::SpamAssassin::Conf&quot; for more
  information).
<div class="Pp"></div>
By default these message headers are added to spam:
<dl class="Bl-tag">
  <dt class="It-tag">X-Spam-Flag: header</dt>
  <dd class="It-tag">Set to &quot;YES&quot;.</dd>
</dl>
<div class="Pp"></div>
The headers that added are fully configurable via the &quot;add_header&quot;
  option (see &quot;Mail::SpamAssassin::Conf&quot; for more information).
<dl class="Bl-tag">
  <dt class="It-tag">spam mail body text</dt>
  <dd class="It-tag">The SpamAssassin report is added to top of the mail message
      body, if the message is marked as spam.</dd>
</dl>
<h2 class="Ss" title="Ss" id="DEFAULT_TAGGING_FOR_ALL_MAILS"><a class="selflink" href="#DEFAULT_TAGGING_FOR_ALL_MAILS">DEFAULT
  TAGGING FOR ALL MAILS</a></h2>
These headers are added to all messages, both spam and ham (non-spam).
<dl class="Bl-tag">
  <dt class="It-tag">X-Spam-Checker-Version: header</dt>
  <dd class="It-tag">The version and subversion of SpamAssassin and the host
      where SpamAssassin was run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">X-Spam-Level: header</dt>
  <dd class="It-tag">A series of &quot;*&quot; charactes where each one
      represents a full score point.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">X-Spam-Status: header</dt>
  <dd class="It-tag">A string, &quot;(Yes|No), score=nn required=nn
      tests=xxx,xxx autolearn=(ham|spam|no|unavailable|failed)&quot; is set in
      this header to reflect the filter status. For the first word,
      &quot;Yes&quot; means spam and &quot;No&quot; means ham (non-spam).</dd>
</dl>
<div class="Pp"></div>
The headers that added are fully configurable via the &quot;add_header&quot;
  option (see &quot;Mail::SpamAssassin::Conf&quot; for more information).
<h1 class="Sh" title="Sh" id="INSTALLATION"><a class="selflink" href="#INSTALLATION">INSTALLATION</a></h1>
The <b>spamassassin</b> command is part of the <b>Mail::SpamAssassin</b> Perl
  module. Install this as a normal Perl module, using &quot;perl -MCPAN -e
  shell&quot;, or by hand.
<div class="Pp"></div>
Note that it is not possible to use the &quot;PERL5LIB&quot; environment
  variable to affect where SpamAssassin finds its perl modules, due to
  limitations imposed by perl's &quot;taint&quot; security checks.
<div class="Pp"></div>
For further details on how to install, please read the &quot;INSTALL&quot; file
  from the SpamAssassin distribution.
<h1 class="Sh" title="Sh" id="DEVELOPER_DOCUMENTATION"><a class="selflink" href="#DEVELOPER_DOCUMENTATION">DEVELOPER
  DOCUMENTATION</a></h1>
<pre>
    Mail::SpamAssassin
        Spam detector and markup engine
    Mail::SpamAssassin::ArchiveIterator
        find and process messages one at a time
    Mail::SpamAssassin::AutoWhitelist
        auto-whitelist handler for SpamAssassin
    Mail::SpamAssassin::Bayes
        determine spammishness using a Bayesian classifier
    Mail::SpamAssassin::BayesStore
        Bayesian Storage Module
    Mail::SpamAssassin::BayesStore::SQL
        SQL Bayesian Storage Module Implementation
    Mail::SpamAssassin::Conf::LDAP
        load SpamAssassin scores from LDAP database
    Mail::SpamAssassin::Conf::Parser
        parse SpamAssassin configuration
    Mail::SpamAssassin::Conf::SQL
        load SpamAssassin scores from SQL database
    Mail::SpamAssassin::Message
        decode, render, and hold an RFC-2822 message
    Mail::SpamAssassin::Message::Metadata
        extract metadata from a message
    Mail::SpamAssassin::Message::Node
        decode, render, and make available MIME message parts
    Mail::SpamAssassin::PerMsgLearner
        per-message status (spam or not-spam)
    Mail::SpamAssassin::PerMsgStatus
        per-message status (spam or not-spam)
    Mail::SpamAssassin::PersistentAddrList
        persistent address list base class
    Mail::SpamAssassin::Plugin
        SpamAssassin plugin base class
    Mail::SpamAssassin::Plugin::Hashcash
        perform hashcash verification tests
    Mail::SpamAssassin::Plugin::RelayCountry
        add message metadata indicating the country code of each relay
    Mail::SpamAssassin::Plugin::SPF
        perform SPF verification tests
    Mail::SpamAssassin::Plugin::URIDNSBL
        look up URLs against DNS blocklists
    Mail::SpamAssassin::SQLBasedAddrList
        SpamAssassin SQL Based Auto Whitelist
</pre>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
See &lt;http://issues.apache.org/SpamAssassin/&gt;
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
The SpamAssassin(tm) Project &lt;http://spamassassin.apache.org/&gt;
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
SpamAssassin is distributed under the Apache License, Version 2.0, as described
  in the file &quot;LICENSE&quot; included with the distribution.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-10-30</td>
    <td class="foot-os">perl v5.24.1</td>
  </tr>
</table>
</body>
</html>
