<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OPENSHIFT ADMIN PRUNE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OPENSHIFT ADMIN PRUNE(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OPENSHIFT ADMIN PRUNE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
openshift admin prune images - Remove unreferenced images
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>openshift admin prune images</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Remove image stream tags, images, and image layers by age or usage
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command removes historical image stream tags, unused images, and
  unreferenced image layers from the integrated registry. It prefers images that
  have been directly pushed to the registry, but you may specify --all to
  include images that were imported (if registry mirroring is enabled).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
By default, the prune operation performs a dry run making no changes to internal
  registry. A --confirm flag is needed for changes to be effective.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Only a user with a cluster role system:image-pruner or higher who is logged-in
  will be able to actually delete the images.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--all</b>=false
<br/>
 Include images that were not pushed to the registry but have been mirrored by
  pullthrough. Requires --registry-url
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 The path to a certificate authority bundle to use when communicating with the
  managed Docker registries. Defaults to the certificate authority data from the
  current user's config file.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--confirm</b>=false
<br/>
 If true, specify that image pruning should proceed. Defaults to false,
  displaying what would be deleted but not actually deleting anything.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--keep-tag-revisions</b>=3
<br/>
 Specify the number of image revisions for a tag in an image stream that will be
  preserved.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--keep-younger-than</b>=0
<br/>
 Specify the minimum age of an image for it to be considered a candidate for
  pruning.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--prune-over-size-limit</b>=false
<br/>
 Specify if images which are exceeding LimitRanges (see 'openshift.io/Image'),
  specified in the same namespace, should be considered for pruning. This flag
  cannot be combined with --keep-younger-than nor --keep-tag-revisions.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--registry-url</b>=&quot;&quot;
<br/>
 The address to use when contacting the registry, instead of using the default
  value. This is useful if you can't resolve or reach the registry (e.g.; the
  default is a cluster-internal URL) but you do have an alternative route that
  works.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # See, what the prune command would delete if only images more than an hour old and obsoleted
  # by 3 newer revisions under the same tag were considered.
  openshift admin prune images --keep-tag-revisions=3 --keep-younger-than=60m
  
  # To actually perform the prune operation, the confirm flag must be appended
  openshift admin prune images --keep-tag-revisions=3 --keep-younger-than=60m --confirm
  
  # See, what the prune command would delete if we're interested in removing images
  # exceeding currently set limit ranges ('openshift.io/Image')
  openshift admin prune images --prune-over-size-limit
  
  # To actually perform the prune operation, the confirm flag must be appended
  openshift admin prune images --prune-over-size-limit --confirm
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>openshift-admin-prune(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
