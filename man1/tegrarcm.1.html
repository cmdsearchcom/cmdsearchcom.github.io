<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>tegrarcm(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">tegrarcm(1)</td>
    <td class="head-vol">NVIDIA Tegra Firmware Download Tool</td>
    <td class="head-rtitle">tegrarcm(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
tegrarcm - tegra firmware download utility
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>tegrarcm</b> [ <i>options</i> ]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program is used to send code to a Tegra device in recovery mode. It does
  not supported locked devices with an encrypted boot key, only open devices
  such as the ventana or cardhu reference boards. It is not capable of flashing
  firmware to a device, but can be used to download firmware that is then
  capable of flashing. For example in ChromeOS tegrarcm is used to download a
  special build of u-boot to the target Tegra device with a payload that it then
  flashes to the boot device.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Platforms_supported"><a class="selflink" href="#Platforms_supported">Platforms
  supported</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Tegra20</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Tegra30</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Tegra114</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>Tegra124</b>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h2 class="Ss" title="Ss" id="How_to_use"><a class="selflink" href="#How_to_use">How
  to use</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2014;</dt>
  <dd class="It-tag">Connect a USB cable from your development system to your
      Tegra device. You will either need a USB A to A cable or A to micro B
      depending on the target board.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2014;</dt>
  <dd class="It-tag">Find the appropriate BCT file for your board. For reference
      boards, BCT files can be found in the L4T distribution from NVIDIA.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2014;</dt>
  <dd class="It-tag">Build some firmware for your device (such as u-boot)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2014;</dt>
  <dd class="It-tag">Run tegrarcm to download the firmware
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>readbct</b></dt>
  <dd class="It-tag">Read the BCT from the target device and write it to
      <i>bctfile</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bct <i>bctfile</i></b></dt>
  <dd class="It-tag">Specify the BCT file to download to the Tegra device. This
      file contains memory configuation information for the board. BCT files can
      be obtained through the NVIDIA L4T distribution or generated with
      cbootimage and a proper configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bootloader <i>blfile</i></b></dt>
  <dd class="It-tag">Specify the bootloader file to download to the Tegra
      device. This is the firmware file that will be downloaded and
    executed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--loadaddr <i>loadaddr</i></b></dt>
  <dd class="It-tag">Specify the address the bootloader will be loaded at. This
      should be specified in hex and is typically 0x108000 for a Tegra20 device
      or 0x80108000 for a Tegra30, Tegra114, or Tegra124 device.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--entryaddr <i>entryaddr</i></b></dt>
  <dd class="It-tag">Specify the entry address that control will be passed to
      after the firmware is loaded. This should be specified in hex. If this
      option is omitted it is assumed to be the same as the load address.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the version number and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print help text and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--miniloader <i>mlfile</i></b></dt>
  <dd class="It-tag">Read the miniloader from the specified file instead of
      using the built-in one.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--miniloader_entry <i>mlentry</i></b></dt>
  <dd class="It-tag">Specify the entry address of the miniloader.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--usb-port-path <i>path</i></b></dt>
  <dd class="It-tag">Specify the physical USB port path of the Tegra device to
      control.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="USB_PORT_PATH"><a class="selflink" href="#USB_PORT_PATH">USB
  PORT PATH</a></h1>
By default, tegrarcm operates on the first USB applicable device it finds. In a
  system that contains multiple Tegra devices, the user may wish to specify
  which device tegrarcm should operate upon. The --usb-port-path option allows
  this, and in a manner that is most immune to the set of attached USB devices
  varying.
<div style="height: 1.00em;">&#x00A0;</div>
Note that the USB port path is associated with a physical USB port on a
  particular hub. This value will vary if you physically re-organize your USB
  connections. This feature is still useful even if your USB topology changes,
  providing you have some other mechanism to differentiate attached devices. For
  example, you could use a wrapper script around tegrarcm that identifies the
  appropriate device by other means, then automatically calculates the USB port
  path using the procedures below, and passes the value to tegrarcm.
<div style="height: 1.00em;">&#x00A0;</div>
To determine the USB port path of a device, you must plug it in and find the
  current USB bus and USB device number of the device, then map that to the USB
  port path. Simply run lsusb to find the current USB bus and device number. If
  you have multiple NVIDIA devices attached, you may need to unplug and replug
  the Tegra device to ensure you know which is which (all while not changing the
  state of any other USB devices so you don't confuse yourself).
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ lsusb
Bus 003 Device 039: ID 0955:7721 NVidia Corp.
Bus 003 Device 045: ID 0955:7140 NVidia Corp.
fi
<div class="Pp"></div>
Then, to determine the USB port path, do one of:
<div class="Pp"></div>
</pre>
<dl class="Bl-tag">
  <dt class="It-tag">1.</dt>
  <dd class="It-tag">
    <pre>
<div class="Pp"></div>
Execute udevmadm on the USB device, and look for the DEVPATH entry. The
final component in the path is the USB port path:
<div class="Pp"></div>
$ udevadm info /dev/bus/usb/003/045
P: /devices/pci0000:00/0000:00:14.0/usb3/3-10/3-10.4
N: bus/usb/003/045
E: BUSNUM=003
E: DEVNUM=045
E: DEVPATH=/devices/pci0000:00/0000:00:14.0/usb3/3-10/3-10.4
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2.</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    Look at all the sub-directories of /sys/bus/usb/devices/* that do not
      contain either &quot;:&quot; or &quot;usb&quot;. Each of these will
      contain a busnum and devnum file. Find the directory which matches the
      lsusb output, and use its name:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
$ cat /sys/bus/usb/devices/3-10.4/busnum
3
$ cat /sys/bus/usb/devices/3-10.4/devnum
45
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    Alternatively, you may already have udev rules that create a device node
      symlink for the device (after some specific identification algorithm). In
      that case, you can search the udev output for MAJOR/MINOR values, or
      /sys/bus/usb/devices/* directories for &quot;dev&quot; files, that match
      the device node the symlink points to.
    <div style="height: 1.00em;">&#x00A0;</div>
    Once the port path is known, this value will not vary unless your USB
      connections are physically changed, so you can use it over and over
      without repeating the steps above.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To download u-boot firmware to a Tegra20 seaboard:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ sudo tegrarcm --bct seaboard.bct --bootloader u-boot.bin --loadaddr 0x108000
bct file: seaboard.bct
booloader file: u-boot.bin
load addr 0x108000
entry addr 0x108000
device id: 0x7820
uid:  0x33c20c0413fb217
RCM version: 2.1
downloading miniloader to target...
miniloader downloaded successfully
Chip UID:                0x33c20c0413fb217
Chip ID:                 0x20
Chip ID Major Version:   0x1
Chip ID Minor Version:   0x4
Chip SKU:                0x18 (t25)
Boot ROM Version:        0x1
Boot Device:             0x3 (SPI)
Operating Mode:          0x3 (developer mode)
Device Config Strap:     0x0
Device Config Fuse:      0x0
SDRAM Config Strap:      0x0
sending file: seaboard.bct
- 4080/4080 bytes sent
seaboard.bct sent successfully
sending file: u-boot.bin
- 268314/268314 bytes sent
u-boot.bin sent successfully
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To read the BCT from a system:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
$ sudo tegrarcm --bct ventana.bct readbct
bct file: ventana.bct
device id: 0x7820
reading BCT from system, writing to ventana.bct...done!
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="RETURN_VALUE"><a class="selflink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
If any error occurs a non zero exit status is returned.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>cbootimage</b>(1),
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Allen Martin, &lt;amartin@nvidia.com&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">29 November 2012</td>
    <td class="foot-os">tegrarcm-1.7</td>
  </tr>
</table>
</body>
</html>
