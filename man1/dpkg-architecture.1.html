<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:05:14 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>dpkg-architecture(1) dpkg utilities
dpkg-architecture(1)</p>

<p style="margin-top: 1em">NAME <br>
dpkg-architecture - set and determine the architecture for
package building</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dpkg-architecture [option...] [command]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
dpkg-architecture provides a facility to determine and set
the build and host architecture for package building.</p>

<p style="margin-top: 1em">The build architecture is always
determined by an external call to dpkg(1), and can not be
set at the command line.</p>

<p style="margin-top: 1em">You can specify the host
architecture by providing one or both of the options
--host-arch and --host-type. The default is determined by an
external call to gcc(1), or the same as <br>
the build architecture if CC or gcc are both not available.
One out of --host-arch and --host-type is sufficient, the
value of the other will be set to a usable default. Indeed,
<br>
it is often better to only specify one, because
dpkg-architecture will warn you if your choice does not
match the default.</p>

<p style="margin-top: 1em">COMMANDS <br>
-l, --list <br>
Print the environment variables, one each line, in the
format VARIABLE=value. This is the default action.</p>

<p style="margin-top: 1em">-e, --equal architecture <br>
Check for equality of architecture (since dpkg 1.13.13). It
compares the current or specified Debian host architecture
against architecture, to check if they are equal. <br>
This action will not expand the architecture wildcards.
Command finishes with an exit status of 0 if matched, 1 if
not matched.</p>

<p style="margin-top: 1em">-i, --is architecture-wildcard
<br>
Check for identity of architecture (since dpkg 1.13.13). It
compares the current or specified Debian host architecture
against architecture-wildcard after having expanded <br>
it as an architecture wildcard, to check if they match.
Command finishes with an exit status of 0 if matched, 1 if
not matched.</p>

<p style="margin-top: 1em">-q, --query variable-name <br>
Print the value of a single variable.</p>

<p style="margin-top: 1em">-s, --print-set <br>
Print an export command. This can be used to set the
environment variables using eval.</p>

<p style="margin-top: 1em">-u, --print-unset <br>
Print a similar command to --print-unset but to unset all
variables.</p>

<p style="margin-top: 1em">-c, --command command <br>
Execute a command in an environment which has all variables
set to the determined value.</p>

<p style="margin-top: 1em">-L, --list-known <br>
Print a list of valid architecture names. Possibly
restricted by one or more of the matching options
--match-wildcard, --match-bits or --match-endian (since dpkg
<br>
1.17.14).</p>

<p style="margin-top: 1em">-?, --help <br>
Show the usage message and exit.</p>

<p style="margin-top: 1em">--version <br>
Show the version and exit.</p>

<p style="margin-top: 1em">OPTIONS <br>
-a, --host-arch architecture <br>
Set the host Debian architecture.</p>

<p style="margin-top: 1em">-t, --host-type gnu-system-type
<br>
Set the host GNU system type.</p>

<p style="margin-top: 1em">-A, --target-arch architecture
<br>
Set the target Debian architecture (since dpkg 1.17.14).</p>

<p style="margin-top: 1em">-T, --target-type
gnu-system-type <br>
Set the target GNU system type (since dpkg 1.17.14).</p>

<p style="margin-top: 1em">-W, --match-wildcard
architecture-wildcard <br>
Restrict the architectures listed by --list-known to ones
matching the specified architecture wildcard (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">-B, --match-bits
architecture-bits <br>
Restrict the architectures listed by --list-known to ones
with the specified CPU bits (since dpkg 1.17.14). Either 32
or 64.</p>

<p style="margin-top: 1em">-E, --match-endian
architecture-endianness <br>
Restrict the architectures listed by --list-known to ones
with the specified endianness (since dpkg 1.17.14). Either
little or big.</p>

<p style="margin-top: 1em">-f, --force <br>
Values set by existing environment variables with the same
name as used by the scripts are honored (i.e. used by
dpkg-architecture), except if this force flag is present.
<br>
This allows the user to override a value even when the call
to dpkg-architecture is buried in some other script (for
example dpkg-buildpackage(1)).</p>

<p style="margin-top: 1em">TERMS <br>
build machine <br>
The machine the package is built on.</p>

<p style="margin-top: 1em">host machine <br>
The machine the package is built for.</p>

<p style="margin-top: 1em">target machine <br>
The machine the compiler is building for. This is only
needed when building a cross-toolchain, one that will be
built on the build architecture, to be run on the host
archi&acirc; <br>
tecture, and to build code for the target architecture.</p>

<p style="margin-top: 1em">Debian architecture <br>
The Debian architecture string, which specifies the binary
tree in the FTP archive. Examples: i386, sparc,
hurd-i386.</p>

<p style="margin-top: 1em">Debian architecture wildcard
<br>
A Debian architecture wildcard is a special architecture
string that will match any real architecture being part of
it. The general form is &lt;kernel&gt;-&lt;cpu&gt;.
Examples: <br>
linux-any, any-i386, hurd-any.</p>

<p style="margin-top: 1em">GNU system type <br>
An architecture specification string consisting of two parts
separated by a hyphen: cpu and system. Examples:
i586-linux-gnu, sparc-linux-gnu, i686-gnu,
x86_64-netbsd.</p>

<p style="margin-top: 1em">multiarch triplet <br>
The clarified GNU system type, used for filesystem paths.
This triplet does not change even when the baseline ISA gets
bumped, so that the resulting paths are stable over <br>
time. The only current difference with the GNU system type
is that the CPU part for i386 based systems is always i386.
Examples: i386-linux-gnu, x86_64-linux-gnu. Example <br>
paths: /lib/powerpc64le-linux-gnu/,
/usr/lib/i386-kfreebsd-gnu/.</p>

<p style="margin-top: 1em">VARIABLES <br>
The following variables are set by dpkg-architecture:</p>

<p style="margin-top: 1em">DEB_BUILD_ARCH <br>
The Debian architecture of the build machine.</p>

<p style="margin-top: 1em">DEB_BUILD_ARCH_OS <br>
The Debian system name of the build machine (since dpkg
1.13.2).</p>

<p style="margin-top: 1em">DEB_BUILD_ARCH_CPU <br>
The Debian cpu name of the build machine (since dpkg
1.13.2).</p>

<p style="margin-top: 1em">DEB_BUILD_ARCH_BITS <br>
The pointer size of the build machine (in bits; since dpkg
1.15.4).</p>

<p style="margin-top: 1em">DEB_BUILD_ARCH_ENDIAN <br>
The endianness of the build machine (little / big; since
dpkg 1.15.4).</p>

<p style="margin-top: 1em">DEB_BUILD_GNU_CPU <br>
The CPU part of DEB_BUILD_GNU_TYPE.</p>

<p style="margin-top: 1em">DEB_BUILD_GNU_SYSTEM <br>
The System part of DEB_BUILD_GNU_TYPE.</p>

<p style="margin-top: 1em">DEB_BUILD_GNU_TYPE <br>
The GNU system type of the build machine.</p>

<p style="margin-top: 1em">DEB_BUILD_MULTIARCH <br>
The clarified GNU system type of the build machine, used for
filesystem paths (since dpkg 1.16.0).</p>

<p style="margin-top: 1em">DEB_HOST_ARCH <br>
The Debian architecture of the host machine.</p>

<p style="margin-top: 1em">DEB_HOST_ARCH_OS <br>
The Debian system name of the host machine (since dpkg
1.13.2).</p>

<p style="margin-top: 1em">DEB_HOST_ARCH_CPU <br>
The Debian cpu name of the host machine (since dpkg
1.13.2).</p>

<p style="margin-top: 1em">DEB_HOST_ARCH_BITS <br>
The pointer size of the host machine (in bits; since dpkg
1.15.4).</p>

<p style="margin-top: 1em">DEB_HOST_ARCH_ENDIAN <br>
The endianness of the host machine (little / big; since dpkg
1.15.4).</p>

<p style="margin-top: 1em">DEB_HOST_GNU_CPU <br>
The CPU part of DEB_HOST_GNU_TYPE.</p>

<p style="margin-top: 1em">DEB_HOST_GNU_SYSTEM <br>
The System part of DEB_HOST_GNU_TYPE.</p>

<p style="margin-top: 1em">DEB_HOST_GNU_TYPE <br>
The GNU system type of the host machine.</p>

<p style="margin-top: 1em">DEB_HOST_MULTIARCH <br>
The clarified GNU system type of the host machine, used for
filesystem paths (since dpkg 1.16.0).</p>

<p style="margin-top: 1em">DEB_TARGET_ARCH <br>
The Debian architecture of the target machine (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_ARCH_OS <br>
The Debian system name of the target machine (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_ARCH_CPU <br>
The Debian cpu name of the target machine (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_ARCH_BITS <br>
The pointer size of the target machine (in bits; since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_ARCH_ENDIAN <br>
The endianness of the target machine (little / big; since
dpkg 1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_GNU_CPU <br>
The CPU part of DEB_TARGET_GNU_TYPE (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_GNU_SYSTEM <br>
The System part of DEB_TARGET_GNU_TYPE (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_GNU_TYPE <br>
The GNU system type of the target machine (since dpkg
1.17.14).</p>

<p style="margin-top: 1em">DEB_TARGET_MULTIARCH <br>
The clarified GNU system type of the target machine, used
for filesystem paths (since dpkg 1.17.14).</p>

<p style="margin-top: 1em">FILES <br>
Architecture tables <br>
All these files have to be present for dpkg-architecture to
work. Their location can be overridden at runtime with the
environment variable DPKG_DATADIR.</p>

<p style="margin-top: 1em">/usr/share/dpkg/cputable <br>
Table of known CPU names and mapping to their GNU name.</p>

<p style="margin-top: 1em">/usr/share/dpkg/ostable <br>
Table of known operating system names and mapping to their
GNU name.</p>

<p style="margin-top: 1em">/usr/share/dpkg/triplettable
<br>
Mapping between Debian architecture triplets and Debian
architecture names.</p>

<p style="margin-top: 1em">/usr/share/dpkg/abitable <br>
Table of Debian architecture ABI attribute overrides.</p>

<p style="margin-top: 1em">Packaging support <br>
/usr/share/dpkg/architecture.mk <br>
Makefile snippet that properly sets and exports all the
variables that dpkg-architecture outputs (since dpkg
1.16.1).</p>

<p style="margin-top: 1em">EXAMPLES <br>
dpkg-buildpackage accepts the -a option and passes it to
dpkg-architecture. Other examples:</p>

<p style="margin-top: 1em">CC=i386-gnu-gcc
dpkg-architecture -c debian/rules build</p>

<p style="margin-top: 1em">eval &lsquo;dpkg-architecture
-u&lsquo;</p>

<p style="margin-top: 1em">Check if the current or
specified host architecture is equal to an architecture:</p>

<p style="margin-top: 1em">dpkg-architecture
-elinux-alpha</p>

<p style="margin-top: 1em">dpkg-architecture -amips
-elinux-mips</p>

<p style="margin-top: 1em">Check if the current or
specified host architecture is a Linux system:</p>

<p style="margin-top: 1em">dpkg-architecture
-ilinux-any</p>

<p style="margin-top: 1em">dpkg-architecture -ai386
-ilinux-any</p>

<p style="margin-top: 1em">Usage in debian/rules <br>
The environment variables set by dpkg-architecture are
passed to debian/rules as make variables (see make
documentation). However, you should not rely on them, as
this breaks <br>
manual invocation of the script. Instead, you should always
initialize them using dpkg-architecture with the -q option.
Here are some examples, which also show how you can <br>
improve the cross compilation support in your package:</p>

<p style="margin-top: 1em">Retrieving the GNU system type
and forwarding it to ./configure:</p>

<p style="margin-top: 1em">DEB_BUILD_GNU_TYPE ?= $(shell
dpkg-architecture -qDEB_BUILD_GNU_TYPE) <br>
DEB_HOST_GNU_TYPE ?= $(shell dpkg-architecture
-qDEB_HOST_GNU_TYPE) <br>
[...] <br>
ifeq ($(DEB_BUILD_GNU_TYPE), $(DEB_HOST_GNU_TYPE)) <br>
confflags += --build=$(DEB_HOST_GNU_TYPE) <br>
else <br>
confflags += --build=$(DEB_BUILD_GNU_TYPE)
--host=$(DEB_HOST_GNU_TYPE) <br>
endif <br>
[...] <br>
./configure $(confflags)</p>

<p style="margin-top: 1em">Doing something only for a
specific architecture:</p>

<p style="margin-top: 1em">DEB_HOST_ARCH ?= $(shell
dpkg-architecture -qDEB_HOST_ARCH)</p>

<p style="margin-top: 1em">ifeq ($(DEB_HOST_ARCH),alpha)
<br>
[...] <br>
endif</p>

<p style="margin-top: 1em">or if you only need to check the
CPU or OS type, use the DEB_HOST_ARCH_CPU or
DEB_HOST_ARCH_OS variables.</p>

<p style="margin-top: 1em">Note that you can also rely on
an external Makefile snippet to properly set all the
variables that dpkg-architecture can provide:</p>

<p style="margin-top: 1em">include
/usr/share/dpkg/architecture.mk</p>

<p style="margin-top: 1em">ifeq ($(DEB_HOST_ARCH),alpha)
<br>
[...] <br>
endif</p>

<p style="margin-top: 1em">In any case, you should never
use dpkg --print-architecture to get architecture
information during a package build.</p>

<p style="margin-top: 1em">NOTES <br>
All long command and option names available only since dpkg
1.17.17.</p>

<p style="margin-top: 1em">SEE ALSO <br>
dpkg-buildpackage(1), dpkg-cross(1).</p>

<p style="margin-top: 1em">Debian Project 2013-03-28
dpkg-architecture(1)</p>
<hr>
</body>
</html>
