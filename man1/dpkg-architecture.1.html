<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>dpkg-architecture(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dpkg-architecture(1)</td>
    <td class="head-vol">dpkg utilities</td>
    <td class="head-rtitle">dpkg-architecture(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dpkg-architecture - set and determine the architecture for package building
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dpkg-architecture</b> [<i>option</i>...] [<i>command</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>dpkg-architecture</b> provides a facility to determine and set the build and
  host architecture for package building.
<div class="Pp"></div>
The build architecture is always determined by an external call to
  <b>dpkg</b>(1), and can not be set at the command line.
<div class="Pp"></div>
You can specify the host architecture by providing one or both of the options
  <b>--host-arch</b> and <b>--host-type</b>. The default is determined by an
  external call to <b>gcc</b>(1), or the same as the build architecture if
  <b>CC</b> or gcc are both not available. One out of <b>--host-arch</b> and
  <b>--host-type</b> is sufficient, the value of the other will be set to a
  usable default. Indeed, it is often better to only specify one, because
  <b>dpkg-architecture</b> will warn you if your choice does not match the
  default.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--list</b></dt>
  <dd class="It-tag">Print the environment variables, one each line, in the
      format <i>VARIABLE=value</i>. This is the default action.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>, <b>--equal</b> <i>architecture</i></dt>
  <dd class="It-tag">Check for equality of architecture (since dpkg 1.13.13). It
      compares the current or specified Debian host architecture against
      <i>architecture</i>, to check if they are equal. This action will not
      expand the architecture wildcards. Command finishes with an exit status of
      0 if matched, 1 if not matched.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--is</b> <i>architecture-wildcard</i></dt>
  <dd class="It-tag">Check for identity of architecture (since dpkg 1.13.13). It
      compares the current or specified Debian host architecture against
      <i>architecture-wildcard</i> after having expanded it as an architecture
      wildcard, to check if they match. Command finishes with an exit status of
      0 if matched, 1 if not matched.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--query</b> <i>variable-name</i></dt>
  <dd class="It-tag">Print the value of a single variable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--print-set</b></dt>
  <dd class="It-tag">Print an export command. This can be used to set the
      environment variables using eval.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b>, <b>--print-unset</b></dt>
  <dd class="It-tag">Print a similar command to <b>--print-unset</b> but to
      unset all variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--command</b> <i>command</i></dt>
  <dd class="It-tag">Execute a <i>command</i> in an environment which has all
      variables set to the determined value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b>, <b>--list-known</b></dt>
  <dd class="It-tag">Print a list of valid architecture names. Possibly
      restricted by one or more of the matching options <b>--match-wildcard</b>,
      <b>--match-bits</b> or <b>--match-endian</b> (since dpkg 1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b>, <b>--help</b></dt>
  <dd class="It-tag">Show the usage message and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Show the version and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>, <b>--host-arch</b> <i>architecture</i></dt>
  <dd class="It-tag">Set the host Debian architecture.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>, <b>--host-type</b> <i>gnu-system-type</i></dt>
  <dd class="It-tag">Set the host GNU system type.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b>, <b>--target-arch</b> <i>architecture</i></dt>
  <dd class="It-tag">Set the target Debian architecture (since dpkg
    1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b>, <b>--target-type</b> <i>gnu-system-type</i></dt>
  <dd class="It-tag">Set the target GNU system type (since dpkg 1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-W</b>, <b>--match-wildcard</b>
    <i>architecture-wildcard</i></dt>
  <dd class="It-tag">Restrict the architectures listed by <b>--list-known</b> to
      ones matching the specified architecture wildcard (since dpkg
    1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b>, <b>--match-bits</b>
    <i>architecture-bits</i></dt>
  <dd class="It-tag">Restrict the architectures listed by <b>--list-known</b> to
      ones with the specified CPU bits (since dpkg 1.17.14). Either <b>32</b> or
      <b>64</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b>, <b>--match-endian</b>
    <i>architecture-endianness</i></dt>
  <dd class="It-tag">Restrict the architectures listed by <b>--list-known</b> to
      ones with the specified endianness (since dpkg 1.17.14). Either
      <b>little</b> or <b>big</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--force</b></dt>
  <dd class="It-tag">Values set by existing environment variables with the same
      name as used by the scripts are honored (i.e. used by
      <b>dpkg-architecture</b>), except if this force flag is present. This
      allows the user to override a value even when the call to
      <b>dpkg-architecture</b> is buried in some other script (for example
      <b>dpkg-buildpackage</b>(1)).</dd>
</dl>
<h1 class="Sh" title="Sh" id="TERMS"><a class="selflink" href="#TERMS">TERMS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">build machine</dt>
  <dd class="It-tag">The machine the package is built on.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">host machine</dt>
  <dd class="It-tag">The machine the package is built for.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">target machine</dt>
  <dd class="It-tag">The machine the compiler is building for. This is only
      needed when building a cross-toolchain, one that will be built on the
      build architecture, to be run on the host architecture, and to build code
      for the target architecture.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Debian architecture</dt>
  <dd class="It-tag">The Debian architecture string, which specifies the binary
      tree in the FTP archive. Examples: i386, sparc, hurd-i386.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Debian architecture wildcard</dt>
  <dd class="It-tag">A Debian architecture wildcard is a special architecture
      string that will match any real architecture being part of it. The general
      form is &lt;kernel&gt;-&lt;cpu&gt;. Examples: linux-any, any-i386,
      hurd-any.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">GNU system type</dt>
  <dd class="It-tag">An architecture specification string consisting of two
      parts separated by a hyphen: cpu and system. Examples: i586-linux-gnu,
      sparc-linux-gnu, i686-gnu, x86_64-netbsd.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">multiarch triplet</dt>
  <dd class="It-tag">The clarified GNU system type, used for filesystem paths.
      This triplet does not change even when the baseline ISA gets bumped, so
      that the resulting paths are stable over time. The only current difference
      with the GNU system type is that the CPU part for i386 based systems is
      always i386. Examples: i386-linux-gnu, x86_64-linux-gnu. Example paths:
      /lib/powerpc64le-linux-gnu/, /usr/lib/i386-kfreebsd-gnu/.</dd>
</dl>
<h1 class="Sh" title="Sh" id="VARIABLES"><a class="selflink" href="#VARIABLES">VARIABLES</a></h1>
The following variables are set by <b>dpkg-architecture</b>:
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_ARCH</b></dt>
  <dd class="It-tag">The Debian architecture of the build machine.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_ARCH_OS</b></dt>
  <dd class="It-tag">The Debian system name of the build machine (since dpkg
      1.13.2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_ARCH_CPU</b></dt>
  <dd class="It-tag">The Debian cpu name of the build machine (since dpkg
      1.13.2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_ARCH_BITS</b></dt>
  <dd class="It-tag">The pointer size of the build machine (in bits; since dpkg
      1.15.4).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_ARCH_ENDIAN</b></dt>
  <dd class="It-tag">The endianness of the build machine (little / big; since
      dpkg 1.15.4).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_GNU_CPU</b></dt>
  <dd class="It-tag">The CPU part of <b>DEB_BUILD_GNU_TYPE</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_GNU_SYSTEM</b></dt>
  <dd class="It-tag">The System part of <b>DEB_BUILD_GNU_TYPE</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_GNU_TYPE</b></dt>
  <dd class="It-tag">The GNU system type of the build machine.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_BUILD_MULTIARCH</b></dt>
  <dd class="It-tag">The clarified GNU system type of the build machine, used
      for filesystem paths (since dpkg 1.16.0).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_ARCH</b></dt>
  <dd class="It-tag">The Debian architecture of the host machine.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_ARCH_OS</b></dt>
  <dd class="It-tag">The Debian system name of the host machine (since dpkg
      1.13.2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_ARCH_CPU</b></dt>
  <dd class="It-tag">The Debian cpu name of the host machine (since dpkg
      1.13.2).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_ARCH_BITS</b></dt>
  <dd class="It-tag">The pointer size of the host machine (in bits; since dpkg
      1.15.4).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_ARCH_ENDIAN</b></dt>
  <dd class="It-tag">The endianness of the host machine (little / big; since
      dpkg 1.15.4).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_GNU_CPU</b></dt>
  <dd class="It-tag">The CPU part of <b>DEB_HOST_GNU_TYPE</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_GNU_SYSTEM</b></dt>
  <dd class="It-tag">The System part of <b>DEB_HOST_GNU_TYPE</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_GNU_TYPE</b></dt>
  <dd class="It-tag">The GNU system type of the host machine.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_HOST_MULTIARCH</b></dt>
  <dd class="It-tag">The clarified GNU system type of the host machine, used for
      filesystem paths (since dpkg 1.16.0).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_ARCH</b></dt>
  <dd class="It-tag">The Debian architecture of the target machine (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_ARCH_OS</b></dt>
  <dd class="It-tag">The Debian system name of the target machine (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_ARCH_CPU</b></dt>
  <dd class="It-tag">The Debian cpu name of the target machine (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_ARCH_BITS</b></dt>
  <dd class="It-tag">The pointer size of the target machine (in bits; since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_ARCH_ENDIAN</b></dt>
  <dd class="It-tag">The endianness of the target machine (little / big; since
      dpkg 1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_GNU_CPU</b></dt>
  <dd class="It-tag">The CPU part of <b>DEB_TARGET_GNU_TYPE</b> (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_GNU_SYSTEM</b></dt>
  <dd class="It-tag">The System part of <b>DEB_TARGET_GNU_TYPE</b> (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_GNU_TYPE</b></dt>
  <dd class="It-tag">The GNU system type of the target machine (since dpkg
      1.17.14).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DEB_TARGET_MULTIARCH</b></dt>
  <dd class="It-tag">The clarified GNU system type of the target machine, used
      for filesystem paths (since dpkg 1.17.14).</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<h2 class="Ss" title="Ss" id="Architecture_tables"><a class="selflink" href="#Architecture_tables">Architecture
  tables</a></h2>
All these files have to be present for <b>dpkg-architecture</b> to work. Their
  location can be overridden at runtime with the environment variable
  <b>DPKG_DATADIR</b>.
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/share/dpkg/cputable</i></dt>
  <dd class="It-tag">Table of known CPU names and mapping to their GNU
    name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/share/dpkg/ostable</i></dt>
  <dd class="It-tag">Table of known operating system names and mapping to their
      GNU name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/share/dpkg/triplettable</i></dt>
  <dd class="It-tag">Mapping between Debian architecture triplets and Debian
      architecture names.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/share/dpkg/abitable</i></dt>
  <dd class="It-tag">Table of Debian architecture ABI attribute overrides.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Packaging_support"><a class="selflink" href="#Packaging_support">Packaging
  support</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/usr/share/dpkg/architecture.mk</i></dt>
  <dd class="It-tag">Makefile snippet that properly sets and exports all the
      variables that <b>dpkg-architecture</b> outputs (since dpkg 1.16.1).</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<b>dpkg-buildpackage</b> accepts the <b>-a</b> option and passes it to
  <b>dpkg-architecture</b>. Other examples:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">CC=i386-gnu-gcc dpkg-architecture -c debian/rules
    build</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">eval `dpkg-architecture -u`</dd>
</dl>
<div class="Pp"></div>
Check if the current or specified host architecture is equal to an architecture:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">dpkg-architecture -elinux-alpha</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">dpkg-architecture -amips -elinux-mips</dd>
</dl>
<div class="Pp"></div>
Check if the current or specified host architecture is a Linux system:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">dpkg-architecture -ilinux-any</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">dpkg-architecture -ai386 -ilinux-any</dd>
</dl>
<h2 class="Ss" title="Ss" id="Usage_in_debian/rules"><a class="selflink" href="#Usage_in_debian/rules">Usage
  in debian/rules</a></h2>
The environment variables set by <b>dpkg-architecture</b> are passed to
  <i>debian/rules</i> as make variables (see make documentation). However, you
  should not rely on them, as this breaks manual invocation of the script.
  Instead, you should always initialize them using <b>dpkg-architecture</b> with
  the <b>-q</b> option. Here are some examples, which also show how you can
  improve the cross compilation support in your package:
<div class="Pp"></div>
Retrieving the GNU system type and forwarding it to ./configure:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
DEB_BUILD_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_BUILD_GNU_TYPE)
DEB_HOST_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)
[...]
ifeq ($(DEB_BUILD_GNU_TYPE), $(DEB_HOST_GNU_TYPE))
  confflags += --build=$(DEB_HOST_GNU_TYPE)
else
  confflags += --build=$(DEB_BUILD_GNU_TYPE) \
               --host=$(DEB_HOST_GNU_TYPE)
endif
[...]
./configure $(confflags)
</pre>
</div>
<div class="Pp"></div>
Doing something only for a specific architecture:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
DEB_HOST_ARCH ?= $(shell dpkg-architecture -qDEB_HOST_ARCH)
<div class="Pp"></div>
ifeq ($(DEB_HOST_ARCH),alpha)
  [...]
endif
</pre>
</div>
<div class="Pp"></div>
or if you only need to check the CPU or OS type, use the
  <b>DEB_HOST_ARCH_CPU</b> or <b>DEB_HOST_ARCH_OS</b> variables.
<div class="Pp"></div>
Note that you can also rely on an external Makefile snippet to properly set all
  the variables that <b>dpkg-architecture</b> can provide:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">
<pre>
include /usr/share/dpkg/architecture.mk
<div class="Pp"></div>
ifeq ($(DEB_HOST_ARCH),alpha)
  [...]
endif
</pre>
</div>
<div class="Pp"></div>
In any case, you should never use <b>dpkg --print-architecture</b> to get
  architecture information during a package build.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
All long command and option names available only since dpkg 1.17.17.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>dpkg-buildpackage</b>(1), <b>dpkg-cross</b>(1).</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-03-28</td>
    <td class="foot-os">Debian Project</td>
  </tr>
</table>
</body>
</html>
