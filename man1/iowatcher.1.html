<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>iowatcher(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">iowatcher(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">iowatcher(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
iowatcher - Create visualizations from blktrace results
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>iowatcher</b> <i>OPTIONS...</i>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
iowatcher graphs the results of a blktrace run. It can graph the result of an
  existing blktrace, start a new blktrace, or start a new blktrace and a
  benchmark run. It can then create an image or movie of the IO from a given
  trace. iowatcher can produce either SVG files or movies in mp4 format (with
  ffmpeg) or ogg format (with png2theora).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print a brief usage summary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d, --device</b> &lt;device&gt;</dt>
  <dd class="It-tag">Controls which device you are tracing. You can only trace
      one device at a time for now. It is sent directly to blktrace, and only
      needed when you are making a new trace.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D, --blktrace-destination</b> &lt;destination&gt;</dt>
  <dd class="It-tag">Destination for blktrace.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p, --prog</b> &lt;program&gt;</dt>
  <dd class="It-tag">Program to run while blktrace is run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-K, --keep-movie-svgs</b></dt>
  <dd class="It-tag">Keep the SVG files generated for movie mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t, --trace</b> &lt;file|directory&gt;</dt>
  <dd class="It-tag">Controls the name of the blktrace file. iowatcher uses a
      dump from blkparse, so -t tries to guess the name of the corresponding per
      CPU blktrace data files if the dump file doesn't already exist. If you
      want more than one trace in a given graph, you can specify -t more than
      once. If a directory is specified, iowatcher will use the name of the
      directory as the base name of the dump file and all trace files found
      inside the directory will be processed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l, --label</b> &lt;label&gt;</dt>
  <dd class="It-tag">Sets a label in the graph for a trace file. The labels are
      added in the same order the trace files are added.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m, --movie</b> [spindle|rect]</dt>
  <dd class="It-tag">Create a movie. The file format depends on the extension
      used in the -o filename.* option. If you specify an .ogv or .ogg
      extension, the result will be Ogg Theora video, if png2theora is
      available. If you use an .mp4 extension, the result will be an mp4 video
      if ffmpeg is available. You can use any other extension, but the end
      result will be an mp4. You can use --movie=spindle or --movie=rect, which
      changes the style of the IO mapping.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T, --title</b> &lt;title&gt;</dt>
  <dd class="It-tag">Set a title to be placed at the top of the graph.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o, --output</b> &lt;file&gt;</dt>
  <dd class="It-tag">Output filename (default: trace.svg).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r, --rolling</b> &lt;seconds&gt;</dt>
  <dd class="It-tag">Control the duration for the rolling average. iowatcher
      tries to smooth out bumpy graphs by averaging the current second with
      seconds from the past. Larger numbers here give you flatter graphs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --height</b> &lt;height&gt;</dt>
  <dd class="It-tag">Set the height of each graph</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w, --width</b> &lt;width&gt;</dt>
  <dd class="It-tag">Set the width of each graph</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c, --columns</b> &lt;columns&gt;</dt>
  <dd class="It-tag">Numbers of columns in graph output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x, --xzoom</b> &lt;min:max&gt;</dt>
  <dd class="It-tag">Limit processed time range to min:max</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y, --yzoom</b> &lt;min:max&gt;</dt>
  <dd class="It-tag">Limit processed sectors to min:max</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --io-plot-action</b> &lt;action&gt;</dt>
  <dd class="It-tag">Plot given action (one of Q,D,C) in IO graph</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P, --per-process-io</b></dt>
  <dd class="It-tag">Distinguish between processes in IO graph</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O, --only-graph</b> &lt;graph&gt;</dt>
  <dd class="It-tag">Add a single graph to the output (see GRAPHS). By default
      all the graphs are included, but with -O you get only the graphs you ask
      for. -O may be used more than once.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N, --no-graph</b> &lt;type&gt;</dt>
  <dd class="It-tag">Remove a single graph from the output (see GRAPHS). This
      may also be used more than once.</dd>
</dl>
<h1 class="Sh" title="Sh" id="GRAPHS"><a class="selflink" href="#GRAPHS">GRAPHS</a></h1>
Choices for -O and -N are:
<br/>
 io, tput, latency, queue_depth, iops, cpu-sys, cpu-io, cpu-irq, cpu-user,
  cpu-soft
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Generate graph from the existing trace.dump:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -t trace.dump -o trace.svg</div>
<div class="Pp"></div>
Skip the IO graph:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -t trace.dump -o trace.svg -N
  io</div>
<div class="Pp"></div>
Only graph tput and latency:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -t trace.dump -o trace.svg -O tput
  -O latency</div>
<div class="Pp"></div>
Generate a graph from two runs, and label them:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -t ext4.dump -t xfs.dump -l Ext4 -l
  XFS -o trace.svg</div>
<div class="Pp"></div>
Run a fio benchmark and store the trace in trace.dump, add a title to the top,
  use /dev/sda for blktrace:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -d /dev/sda -t trace.dump -T 'Fio
  Benchmark' -p 'fio some_job_file'</div>
<div class="Pp"></div>
Make a movie from an existing trace:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">iowatcher -t trace --movie -o trace.mp4</div>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
