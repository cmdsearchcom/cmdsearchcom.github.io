<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>NASM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NASM(1)</td>
    <td class="head-vol">The Netwide Assembler Project</td>
    <td class="head-rtitle">NASM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
nasm - the Netwide Assembler, a portable 80x86 assembler
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>nasm</b> [<b>-@</b> response file] [<b>-f</b> format] [<b>-o</b> outfile]
  [<b>-l</b> listfile] [<i>options</i>...] filename
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>nasm</b> command assembles the file <i>filename</i> and directs output to
  the file <i>outfile</i> if specified. If <i>outfile</i> is not specified,
  <b>nasm</b> will derive a default output file name from the name of its input
  file, usually by appending &#x2018;.o&#x2019; or &#x2018;.obj&#x2019;, or by
  removing all extensions for a raw binary file. Failing that, the output file
  name will be &#x2018;nasm.out&#x2019;.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-@</b> <i>filename</i>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to process options from
  filename as if they were included on the command line.</div>
<div class="Pp"></div>
<b>-a</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to assemble the given input
  file without first applying the macro preprocessor.</div>
<div class="Pp"></div>
<b>-D</b>|<b>-d</b> <i>macro[=value]</i>
<div style="margin-left: 4.00ex;">Pre-defines a single-line macro.</div>
<div class="Pp"></div>
<b>-E</b>|<b>-e</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to preprocess the given
  input file, and write the output to <i>stdout</i> (or the specified output
  file name), and not actually assemble anything.</div>
<div class="Pp"></div>
<b>-f</b> <i>format</i>
<div style="margin-left: 4.00ex;">Specifies the output file format. To see a
  list of valid output formats, use the <b>-hf</b> option.</div>
<div class="Pp"></div>
<b>-F</b> <i>format</i>
<div style="margin-left: 4.00ex;">Specifies the debug information format. To see
  a list of valid output formats, use the <b>-y</b> option (for example <b>-felf
  -y</b>).</div>
<div class="Pp"></div>
<b>-g</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to generate debug
  information in selected format.</div>
<div class="Pp"></div>
<b>-h</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to exit immediately, after
  giving a summary of its invocation options.</div>
<div class="Pp"></div>
<b>-hf</b>
<div style="margin-left: 4.00ex;">Same as <b>-h</b> , but also lists all valid
  output formats.</div>
<div class="Pp"></div>
<b>-I</b>|<b>-i</b> <i>directory</i>
<div style="margin-left: 4.00ex;">Adds a directory to the search path for
  include files. The directory specification must include the trailing slash, as
  it will be directly prepended to the name of the include file.</div>
<div class="Pp"></div>
<b>-l</b> <i>listfile</i>
<div style="margin-left: 4.00ex;">Causes an assembly listing to be directed to
  the given file, in which the original source is displayed on the right hand
  side (plus the source for included files and the expansions of multi-line
  macros) and the generated code is shown in hex on the left.</div>
<div class="Pp"></div>
<b>-M</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to output Makefile-style
  dependencies to stdout; normal output is suppressed.</div>
<div class="Pp"></div>
<b>-MG</b> <i>file</i>
<div style="margin-left: 4.00ex;">Same as <b>-M</b> but assumes that missing
  Makefile dependecies are generated and added to dependency list without a
  prefix.</div>
<div class="Pp"></div>
<b>-MF</b> <i>file</i>
<div style="margin-left: 4.00ex;">Output Makefile-style dependencies to the
  specified file.</div>
<div class="Pp"></div>
<b>-MD</b> <i>file</i>
<div style="margin-left: 4.00ex;">Same as a combination of <b>-M</b> and
  <b>-MF</b> options.</div>
<div class="Pp"></div>
<b>-MT</b> <i>file</i>
<div style="margin-left: 4.00ex;">Override the default name of the dependency
  target dependency target name. This is normally the same as the output
  filename, specified by the <b>-o</b> option.</div>
<div class="Pp"></div>
<b>-MQ</b> <i>file</i>
<div style="margin-left: 4.00ex;">The same as <b>-MT</b> except it tries to
  quote characters that have special meaning in Makefile syntax. This is not
  foolproof, as not all characters with special meaning are quotable in
  Make.</div>
<div class="Pp"></div>
<b>-MP</b>
<div style="margin-left: 4.00ex;">Emit phony target.</div>
<div class="Pp"></div>
<b>-O</b> <i>number</i>
<div style="margin-left: 4.00ex;">Optimize branch offsets.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>-O0</b>: No optimization</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>-O1</b>: Minimal optimization</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<b>-Ox</b>: Multipass optimization
  (default)</div>
</div>
<div class="Pp"></div>
<b>-o</b> <i>outfile</i>
<div style="margin-left: 4.00ex;">Specifies a precise name for the output file,
  overriding <b>nasm</b>'s default means of determining it.</div>
<div class="Pp"></div>
<b>-P</b>|<b>-p</b> <i>file</i>
<div style="margin-left: 4.00ex;">Specifies a file to be pre-included, before
  the main source file starts to be processed.</div>
<div class="Pp"></div>
<b>-s</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to send its error messages
  and/or help text to stdout instead of stderr.</div>
<div class="Pp"></div>
<b>-t</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to assemble in SciTech TASM
  compatible mode.</div>
<div class="Pp"></div>
<b>-U</b>|<b>-u</b> <i>macro</i>
<div style="margin-left: 4.00ex;">Undefines a single-line macro.</div>
<div class="Pp"></div>
<b>-v</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to exit immediately, after
  displaying its version number.</div>
<div class="Pp"></div>
*-W[no-]foo'
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to enable or disable
  certain classes of warning messages, in gcc-like style, for example
  <b>-Worphan-labels</b> or <b>-Wno-orphan-labels</b>.</div>
<div class="Pp"></div>
<b>-w</b><i>[+-]foo</i>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to enable or disable
  certain classes of warning messages, for example <b>-w+orphan-labels</b> or
  <b>-w-macro-params</b>.</div>
<div class="Pp"></div>
<b>-X</b> <i>format</i>
<div style="margin-left: 4.00ex;">Specifies error reporting format (gnu or
  vc).</div>
<div class="Pp"></div>
<b>-y</b>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to list supported debug
  formats.</div>
<div class="Pp"></div>
<b>-Z</b> <i>filename</i>
<div style="margin-left: 4.00ex;">Causes <b>nasm</b> to redirect error messages
  to <i>filename</i>. This option exists to support operating systems on which
  stderr is not easily redirected.</div>
<div class="Pp"></div>
--prefix, --postfix
<div style="margin-left: 4.00ex;">Prepend or append (respectively) the given
  argument to all global or extern variables.</div>
<h1 class="Sh" title="Sh" id="SYNTAX"><a class="selflink" href="#SYNTAX">SYNTAX</a></h1>
This man page does not fully describe the syntax of <b>nasm</b>'s assembly
  language, but does give a summary of the differences from other assemblers.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Registers</i> have no leading &#x2018;%&#x2019; sign, unlike <b>gas</b>, and
  floating-point stack registers are referred to as <i>st0</i>, <i>st1</i>, and
  so on.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Floating-point instructions</i> may use either the single-operand form or the
  double. A <i>TO</i> keyword is provided; thus, one could either write
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
fadd st0,st1
fadd st1,st0
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
or one could use the alternative single-operand forms
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
fadd st1
fadd to st1
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<i>Uninitialised storage</i> is reserved using the <i>RESB</i>, <i>RESW</i>,
  <i>RESD</i>, <i>RESQ</i>, <i>REST</i> and <i>RESO</i> pseudo-opcodes, each
  taking one parameter which gives the number of bytes, words, doublewords,
  quadwords or ten-byte words to reserve.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Repetition</i> of data items is not done by the <i>DUP</i> keyword as seen in
  DOS assemblers, but by the use of the <i>TIMES</i> prefix, like this:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
message: times 3 db 'abc'
         times 64-$+message db 0
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
which defines the string abcabcabc, followed by the right number of zero bytes
  to make the total length up to 64 bytes.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Symbol references</i> are always understood to be immediate (i.e. the address
  of the symbol), unless square brackets are used, in which case the contents of
  the memory location are used. Thus:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
mov ax,wordvar
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
loads AX with the address of the variable wordvar, whereas
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
mov ax,[wordvar]
mov ax,[wordvar+1]
mov ax,[es:wordvar+bx]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
all refer to the <i>contents</i> of memory locations. The syntaxes
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
mov ax,es:wordvar[bx]
es mov ax,wordvar[1]
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
are not legal at all, although the use of a segment register name as an
  instruction prefix is valid, and can be used with instructions such as
  <i>LODSB</i> which can&#x2019;t be overridden any other way.
<div style="height: 1.00em;">&#x00A0;</div>
<i>Constants</i> may be expressed numerically in most formats: a trailing H, Q
  or B denotes hex, octal or binary respectively, and a leading
  &#x2018;0x&#x2019; or &#x2018;$&#x2019; denotes hex as well. Leading zeros are
  not treated specially at all. Character constants may be enclosed in single or
  double quotes; there is no escape character. The ordering is little-endian
  (reversed), so that the character constant <i>'abcd</i>' denotes 0x64636261
  and not 0x61626364.
<div style="height: 1.00em;">&#x00A0;</div>
Local labels begin with a period, and their &#x2018;locality&#x2019; is granted
  by the assembler prepending the name of the previous non-local symbol. Thus
  declaring a label &#x2018;.loop&#x2019; after a label &#x2018;label&#x2019;
  has actually defined a symbol called &#x2018;label.loop&#x2019;.
<h1 class="Sh" title="Sh" id="DIRECTIVES"><a class="selflink" href="#DIRECTIVES">DIRECTIVES</a></h1>
<i>SECTION</i> <i>name</i> or <i>SEGMENT</i> <i>name</i> causes <b>nasm</b> to
  direct all following code to the named section. Section names vary with output
  file format, although most formats support the names <i>.text</i>,
  <i>.data</i> and <i>.bss</i>. (The exception is the <i>obj</i> format, in
  which all segments are user-definable.)
<div style="height: 1.00em;">&#x00A0;</div>
<i>ABSOLUTE</i> <i>address</i> causes <b>nasm</b> to position its notional
  assembly point at an absolute address: so no code or data may be generated,
  but you can use <i>RESB</i>, <i>RESW</i> and <i>RESD</i> to move the assembly
  point further on, and you can define labels. So this directive may be used to
  define data structures. When you have finished doing absolute assembly, you
  must issue another <i>SECTION</i> directive to return to normal assembly.
<div style="height: 1.00em;">&#x00A0;</div>
<i>BITS</i> <i>16</i>, <i>BITS</i> <i>32</i> or <i>BITS</i> <i>64</i> switches
  the default processor mode for which <b>nasm</b> is generating code: it is
  equivalent to <i>USE16</i> or <i>USE32</i> in DOS assemblers.
<div style="height: 1.00em;">&#x00A0;</div>
<i>EXTERN</i> <i>symbol</i> and <i>GLOBAL</i> <i>symbol</i> import and export
  symbol definitions, respectively, from and to other modules. Note that the
  <i>GLOBAL</i> directive must appear before the definition of the symbol it
  refers to.
<div style="height: 1.00em;">&#x00A0;</div>
<i>STRUC</i> <i>strucname</i> and <i>ENDSTRUC</i>, when used to bracket a number
  of <i>RESB</i>, <i>RESW</i> or similar instructions, define a data structure.
  In addition to defining the offsets of the structure members, the construct
  also defines a symbol for the size of the structure, which is simply the
  structure name with <i>size</i> tacked on to the end.
<h1 class="Sh" title="Sh" id="FORMAT-SPECIFIC_DIRECTIVES"><a class="selflink" href="#FORMAT-SPECIFIC_DIRECTIVES">FORMAT-SPECIFIC
  DIRECTIVES</a></h1>
<i>ORG</i> <i>address</i> is used by the <i>bin</i> flat-form binary output
  format, and specifies the address at which the output code will eventually be
  loaded.
<div style="height: 1.00em;">&#x00A0;</div>
<i>GROUP</i> <i>grpname</i> <i>seg1</i> <i>seg2</i>... is used by the obj
  (Microsoft 16-bit) output format, and defines segment groups. This format also
  uses <i>UPPERCASE</i>, which directs that all segment, group and symbol names
  output to the object file should be in uppercase. Note that the actual
  assembly is still case sensitive.
<div style="height: 1.00em;">&#x00A0;</div>
<i>LIBRARY</i> <i>libname</i> is used by the <i>rdf</i> output format, and
  causes a dependency record to be written to the output file which indicates
  that the program requires a certain library in order to run.
<h1 class="Sh" title="Sh" id="MACRO_PREPROCESSOR"><a class="selflink" href="#MACRO_PREPROCESSOR">MACRO
  PREPROCESSOR</a></h1>
Single-line macros are defined using the <i>%define</i> or <i>%idefine</i>
  commands, in a similar fashion to the C preprocessor. They can be overloaded
  with respect to number of parameters, although defining a macro with no
  parameters prevents the definition of any macro with the same name taking
  parameters, and vice versa. <i>%define</i> defines macros whose names match
  case-sensitively, whereas <i>%idefine</i> defines case-insensitive macros.
<div style="height: 1.00em;">&#x00A0;</div>
Multi-line macros are defined using <i>%macro</i> and <i>%imacro</i> (the
  distinction is the same as that between <i>%define</i> and <i>%idefine</i>),
  whose syntax is as follows
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
%macro name minprm[-maxprm][+][.nolist] [defaults]
        &lt;some lines of macro expansion text&gt;
%endmacro
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Again, these macros may be overloaded. The trailing plus sign indicates that any
  parameters after the last one get subsumed, with their separating commas, into
  the last parameter. The <i>defaults</i> part can be used to specify defaults
  for unspecified macro parameters after <i>minparam</i>. <i>%endm</i> is a
  valid synonym for <i>%endmacro</i>.
<div style="height: 1.00em;">&#x00A0;</div>
To refer to the macro parameters within a macro expansion, you use <i>%1</i>,
  <i>%2</i> and so on. You can also enforce that a macro parameter should
  contain a condition code by using <i>%+1</i>, and you can invert the condition
  code by using <i>%-1</i>. You can also define a label specific to a macro
  invocation by prefixing it with a double &#x2018;%&#x2019; sign.
<div style="height: 1.00em;">&#x00A0;</div>
Files can be included using the <i>%include</i> directive, which works like C.
<div style="height: 1.00em;">&#x00A0;</div>
The preprocessor has a &#x2018;context stack&#x2019;, which may be used by one
  macro to store information that a later one will retrieve. You can push a
  context on the stack using <i>%push</i>, remove one using <i>%pop</i>, and
  change the name of the top context (without disturbing any associated
  definitions) using <i>%repl</i>. Labels and <i>%define</i> macros specific to
  the top context may be defined by prefixing their names with %$, and things
  specific to the next context down with %$$, and so on.
<div style="height: 1.00em;">&#x00A0;</div>
Conditional assembly is done by means of <i>%ifdef</i>, <i>%ifndef</i>,
  <i>%else</i> and <i>%endif</i> as in C. (Except that <i>%ifdef</i> can accept
  several putative macro names, and will evaluate TRUE if any of them is
  defined.) In addition, the directives <i>%ifctx</i> and <i>%ifnctx</i> can be
  used to condition on the name of the top context on the context stack. The
  obvious set of &#x2018;else-if&#x2019; directives, <i>%elifdef</i>,
  <i>%elifndef</i>, <i>%elifctx</i> and <i>%elifnctx</i> are also supported.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please report bugs through the bug tracker function at <b>http://nasm.us</b>.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>as</b>(1), <b>ld</b>(1).</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/09/2014</td>
    <td class="foot-os">NASM</td>
  </tr>
</table>
</body>
</html>
