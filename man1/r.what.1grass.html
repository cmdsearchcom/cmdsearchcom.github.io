<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>r.what(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">r.what(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">r.what(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>r.what</b> - Queries raster maps on their category values and category
  labels.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
raster, querying, position
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>r.what</b>
<div>&#x00A0;</div>
<b>r.what --help</b>
<div>&#x00A0;</div>
<b>r.what</b> [-<b>nfric</b>] <b>map</b>=<i>name</i>[,<i>name</i>,...]
  [<b>coordinates</b>= <i>east,north</i>] [<b>points</b>=<i>name</i>]
  [<b>null_value</b>= <i>string</i>] [<b>output</b>=<i>name</i>]
  [<b>separator</b>= <i>character</i>] [<b>cache</b>=<i>integer</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output header row</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Show the category labels of the grid cell(s)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output color values as RRR:GGG:BBB</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output integer category values, not cell values</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Turn on cache reporting</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>map</b>=<i>name[,</i><i>name</i>,...]
    <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of existing raster map(s) to query</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>coordinates</b>=<i>east,north</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Coordinates for query</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>points</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of vector points map for query
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>null_value</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    String representing NULL value
    <div>&#x00A0;</div>
    Default: <i>*</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output file (if omitted or &quot;-&quot; output to stdout)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separator</b>=<i>character</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Field separator
    <div>&#x00A0;</div>
    Special characters: pipe, comma, space, tab, newline
    <div>&#x00A0;</div>
    Default: <i>pipe</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>cache</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Size of point cache
    <div>&#x00A0;</div>
    Default: <i>500</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>r.what</i> outputs the category values and (optionally) the category labels
  associated with user-specified locations on raster input map(s). Locations are
  specified as geographic x,y coordinate pairs (i.e., pair of eastings and
  northings); the user can also (optionally) associate a label with each
  location.
<div class="Pp"></div>
The input coordinates can be entered directly on the command line via
  <b>coordinates</b> parameter, or redirected via stdin from an input text file,
  script, or piped from another program (like <i>v.out.ascii</i>). Coordinates
  can be given also as a vector points map ( <b>points</b>).
<div class="Pp"></div>
If none of the above input methods are used and the module is run from the
  terminal prompt, the program will interactively query the user for point
  locations and labels.
<div class="Pp"></div>
Each line of the input consists of an easting, a northing, and an optional
  label, which are separated by spaces. In interactive mode, the word
  &quot;end&quot; must be typed after the last pair of input coordinates.
<div class="Pp"></div>
<i>r.what</i> output consists of the input geographic location and label, and,
  for each user-named raster map layer, the category value, and (if the
  <b>-f</b> label flag is specified) the category label associated with the
  cell(s) at this geographic location.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Input_coordinates_given_as_an_option"><a class="selflink" href="#Input_coordinates_given_as_an_option">Input
  coordinates given as an option</a></h2>
The module&#x2019;s <b>coordinates</b> parameter can be used to enter coordinate
  pairs directly. The maximum number of pairs will be limited by your
  system&#x2019;s maximum input line length (e.g. 4096 characters).
<div>&#x00A0;</div>
<pre>
g.region raster=landuse96_28m,aspect -p
r.what map=landuse96_28m,aspect coordinates=633614.08,224125.12,632972.36,225382.87 -f
633614.08|224125.12||2|Low Intensity Developed|209.5939|209 degrees ccw from east
632972.36|225382.87||15|Southern Yellow Pine|140.7571|140 degrees ccw from east
</pre>
<h2 class="Ss" title="Ss" id="Input_coordinates_given_as_a_vector_points_map"><a class="selflink" href="#Input_coordinates_given_as_a_vector_points_map">Input
  coordinates given as a vector points map</a></h2>
Coordinates can be read from existing vector points map by specifying
  <b>points</b> option. Other features than points or centroids are ignored.
  Example: query North Carolina county number for each community college:
<div>&#x00A0;</div>
<pre>
g.region raster=boundary_county_500m -p
r.what map=boundary_county_500m points=comm_colleges
145096.859150|154534.264884||39
616341.437150|146049.750884||51
...
</pre>
<h2 class="Ss" title="Ss" id="Input_coordinates_given_as_a_vector_points_map,_output_into_CSV_file"><a class="selflink" href="#Input_coordinates_given_as_a_vector_points_map,_output_into_CSV_file">Input
  coordinates given as a vector points map, output into CSV file</a></h2>
Coordinates can be read from existing vector points map by specifying
  <b>points</b> option. Other features than points or centroids are ignored. The
  output is stored in a CSV file including header row. Example: query North
  Carolina county number for each community college:
<div>&#x00A0;</div>
<pre>
g.region raster=boundary_county_500m -p
r.what map=boundary_county_500m points=comm_colleges \
       separator=comma output=result.csv -n
cat result.csv
easting,northing,site_name,boundary_county_500m
145096.859150,154534.264884,,39
616341.437150,146049.750884,,51
410595.719150,174301.828884,,71
...
</pre>
<h2 class="Ss" title="Ss" id="Input_from_a_text_file_containing_coordinates"><a class="selflink" href="#Input_from_a_text_file_containing_coordinates">Input
  from a text file containing coordinates</a></h2>
The contents of an ASCII text file can be redirected to <i>r.what</i> as
  follows. If we have a file called <i>input_coord.txt</i> containing the
  whitespace separated coordinates and optionally labels, the resulting raster
  map values are extracted:
<div>&#x00A0;</div>
<pre>
cat input_coord.txt
633614.08 224125.12 site 1
632972.36 225382.87 site 2
r.what map=landuse96_28m,aspect &lt; input_coord.txt
633614.08|224125.12|site 1|2|209.5939
632972.36|225382.87|site 2|15|140.7571
</pre>
<h2 class="Ss" title="Ss" id="Input_from_standard_input_on_the_command_line"><a class="selflink" href="#Input_from_standard_input_on_the_command_line">Input
  from standard input on the command line</a></h2>
Input coordinates may be given directly from standard input (stdin), for example
  (input data appears between the &quot;EOF&quot; markers):
<div>&#x00A0;</div>
<pre>
r.what map=landuse96_28m,aspect &lt;&lt; EOF
633614.08 224125.12 site 1
632972.36 225382.87 site 2
EOF
633614.08|224125.12|site 1|2|209.5939
632972.36|225382.87|site 2|15|140.7571
</pre>
<div>&#x00A0;</div>
<pre>
echo &quot;633614.08 224125.12&quot; | r.what map=landuse96_28m,aspect
633614.08|224125.12||2|209.5939
</pre>
<h2 class="Ss" title="Ss" id="Input_coordinates_piped_from_another_program"><a class="selflink" href="#Input_coordinates_piped_from_another_program">Input
  coordinates piped from another program</a></h2>
The input coordinates may be &quot;piped&quot; from the standard output (stdout)
  of another program. In the next example, vector point coordinates are piped
  from the <i>v.out.ascii</i> module.
<div>&#x00A0;</div>
<pre>
v.out.ascii comm_colleges separator=space | r.what map=boundary_county_500m
145096.8591495|154534.26488388|1|39
616341.4371495|146049.75088388|2|51
410595.7191495|174301.82888388|3|71
...
</pre>
<h2 class="Ss" title="Ss" id="Output_containing_raster_map_category_labels"><a class="selflink" href="#Output_containing_raster_map_category_labels">Output
  containing raster map category labels</a></h2>
Here we use the <b>-f</b> label flag to enable the output of category labels
  associated with the raster cell(s), as well as values (categorical maps only).
<div>&#x00A0;</div>
<pre>
r.what -f map=landuse96_28m,aspect &lt;&lt; EOF
633614.08 224125.12 site 1
632972.36 225382.87 site 2
EOF
633614.08|224125.12|site 1|2|Low Intensity Developed|209.5939|209 degrees ccw from east
632972.36|225382.87|site 2|15|Southern Yellow Pine|140.7571|140 degrees ccw from east
</pre>
<h1 class="Sh" title="Sh" id="NOTE"><a class="selflink" href="#NOTE">NOTE</a></h1>
The maximum number of raster map layers that can be queried at one time is 400.
<h1 class="Sh" title="Sh" id="TODO"><a class="selflink" href="#TODO">TODO</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Fix <b>400 maps</b> limit</dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>r.category,</i> <i>r.report,</i> <i>r.stats,</i> <i>r.series,</i>
  <i>r.univar,</i> <i>v.what,</i> <i>v.what.rast,</i> <i>v.what.vect</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Michael Shapiro, U.S. Army Construction Engineering Research Laboratory
<div>&#x00A0;</div>
Vector point input added by Martin Landa, Czech Technical University in Prague,
  Czech Republic
<div class="Pp"></div>
<i>Last changed: $Date: 2016-03-08 09:06:33 +0100 (Tue, 08 Mar 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: r.what source code (history)
<div class="Pp"></div>
Main index | Raster index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
