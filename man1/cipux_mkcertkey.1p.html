<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:58:32 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CIPUX_MKCERTKEY(1p) User Contributed Perl Documentation
CIPUX_MKCERTKEY(1p)</p>

<p style="margin-top: 1em">NAME <br>
cipux_mkcertkey - simple script to generate certificate for
stunnel</p>

<p style="margin-top: 1em">VERSION <br>
version 3.4.0.0</p>

<p style="margin-top: 1em">SYNOPSIS <br>
cipux_mkcertkey</p>

<p style="margin-top: 1em">REQUIRED ARGUMENTS <br>
None.</p>

<p style="margin-top: 1em">ABSTRACT <br>
In order to add security to your XML-RPC server you should
generate a certificate. This script shows a simple method to
do that. You have to take the responsibility by yourself
<br>
to make sure you understand what you do.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Generates a certificate and a key in /etc/cipux/stunnel.</p>

<p style="margin-top: 1em">USAGE <br>
cipux_mkcertkey</p>

<p style="margin-top: 1em">OPTIONS <br>
None.</p>

<p style="margin-top: 1em">CERTIFICATE <br>
Each SSL enabled XML-RPC server needs to present a valid
X.509 certificate to the peer and it also needs a private
key to decrypt the incoming data. The easiest way to obtain
a <br>
certificate and a key is to generate them with the free
openssl package. You can find more information on
certificates generation below. The certificates must be in
PEM format <br>
and must be sorted starting with the certificate to the
highest level (root CA)</p>

<p style="margin-top: 1em">Two things are important when
generating the certificate-key pairs.</p>

<p style="margin-top: 1em">(1) Because the server has no
way to obtain the password from the user, the private key
cannot be encrypted. To create an unencrypted key add the
&quot;-nodes&quot; option when running <br>
the req command from the openssl kit.</p>

<p style="margin-top: 1em">(2) The order of contents of the
.pem file is also important. It should contain the
unencrypted private key first, then a signed certificate
(not certificate request). There <br>
should be also empty lines after certificate and private
key. Plaintext certificate information appended on the top
of generated certificate should be discarded. So the file
<br>
should look like this:</p>

<p style="margin-top: 1em">-----BEGIN RSA PRIVATE KEY-----
<br>
[encoded key] <br>
-----END RSA PRIVATE KEY----- <br>
[empty line] <br>
-----BEGIN CERTIFICATE----- <br>
[encoded certificate] <br>
-----END CERTIFICATE----- <br>
[empty line]</p>

<p style="margin-top: 1em">This can be stored in one file
or in two files. This script stores the in to files to have
the flexibility to use the certificate in other location.
This to files will be <br>
created:</p>

<p style="margin-top: 1em">stunnel-cert.pem <br>
stunnel-key.pem</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
TODO: write explanations to the messages.</p>

<p style="margin-top: 1em">&quot;Cannot find certificate
configuration: %s&quot; <br>
&quot;Cannot find openssl executable: %s&quot; <br>
&quot;Directory to store certs do not exist: %s&quot; <br>
&quot;Directory to store certs is not save!...&quot; <br>
Directory to store certs is not save! <br>
Should be for example: <br>
drwx------ 2 root root 4096 2008-04-17 21:15
/etc/cipux/stunnel</p>

<p style="margin-top: 1em">&quot;Cannot execute %s&quot;
<br>
&quot;Can not close %s&quot; <br>
&quot;Can not print to STDOUT!&quot; <br>
&quot;%s not known to the system!&quot;</p>

<p style="margin-top: 1em">CONFIGURATION <br>
TODO.</p>

<p style="margin-top: 1em">DEPENDENCIES <br>
Carp CipUX File::stat Cwd POSIX Readonly Fatal English
version</p>

<p style="margin-top: 1em">INCOMPATIBILITIES <br>
Not known.</p>

<p style="margin-top: 1em">BUGS AND LIMITATIONS <br>
Not known.</p>

<p style="margin-top: 1em">SEE ALSO <br>
See the CipUX webpage and the manual at
&lt;http://www.cipux.org&gt; See the mailing list
&lt;http://sympa.cipworx.org/wws/info/cipux-devel&gt;</p>

<p style="margin-top: 1em">AUTHOR <br>
Christian Kuelker &lt;christian.kuelker@cipworx.org&gt;</p>

<p style="margin-top: 1em">LICENSE AND COPYRIGHT <br>
Copyright (C) 2008 by Christian Kuelker</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
the GNU General Public License as published by the Free
Software Foundation; either <br>
version 2, or (at your option) any later version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 59
Temple Place, Suite 330, <br>
Boston, MA 02111-1307 USA</p>

<p style="margin-top: 1em">perl v5.20.2 2015-07-24
CIPUX_MKCERTKEY(1p)</p>
<hr>
</body>
</html>
