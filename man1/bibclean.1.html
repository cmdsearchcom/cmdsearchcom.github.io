<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:54:48 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>BIBCLEAN(1) General Commands Manual BIBCLEAN(1)</p>

<p style="margin-top: 1em">NAME <br>
bibclean - prettyprint and syntax check BibTeX and Scribe
bibliography data base files</p>

<p style="margin-top: 1em">SYNOPSIS <br>
bibclean [ -author ] [ -error-log filename ] [ -help ] [ -?
] [ -init-file filename ] [ -long-field fieldname ] [
-max-width nnn ] [ -[no-]align-equals ] [ -[no-]check-values
] <br>
[ -[no-]delete-empty-values ] [ -[no-]file-position ] [
-[no-]fix-font-changes ] [ -[no-]fix-initials ] [
-[no-]fix-names ] [ -[no-]German-style ] <br>
[ -[no-]keep-linebreaks ] [ -[no-]keep-parbreaks ] [
-[no-]keep-preamble-spaces ] [ -[no-]keep-spaces ] [
-[no-]keep-string-spaces ] [ -[no-]parbreaks ] <br>
[ -[no-]prettyprint ] [ -[no-]print-patterns ] [
-[no-]read-init-files ] [ -[no-]remove-OPT-prefixes ] [
-[no-]scribe ] [ -[no-]trace-file-opening ] [ -[no-]warnings
] <br>
[ -version ] ( &lt;infile | bibfile1 bibfile2 bibfile3 ... )
&gt;outfile</p>

<p style="margin-top: 1em">All options can be abbreviated
to a unique leading prefix.</p>

<p style="margin-top: 1em">An explicit file name of
&lsquo;&lsquo;-&rsquo;&rsquo; represents standard input; it
is assumed if no input files are specified.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
bibclean prettyprints input BibTeX files to stdout, and
checks the brace balance and bibliography entry syntax as
well. It can be used to detect problems in BibTeX files that
<br>
sometimes confuse even BibTeX itself, and importantly, can
be used to normalize the appearance of collections of BibTeX
files.</p>

<p style="margin-top: 1em">Here is a summary of the
formatting actions:</p>

<p style="margin-top: 1em">&Acirc;&middot; BibTeX items are
formatted into a consistent structure with one field =
&quot;value&quot; pair per line, and the initial @ and
trailing right brace in column 1.</p>

<p style="margin-top: 1em">&Acirc;&middot; Tabs are
expanded into blank strings; their use is discouraged
because they inhibit portability, and can suffer corruption
in electronic mail.</p>

<p style="margin-top: 1em">&Acirc;&middot; Long string
values are split at a blank and continued onto the next line
with leading indentation.</p>

<p style="margin-top: 1em">&Acirc;&middot; A single blank
line separates adjacent bibliography entries.</p>

<p style="margin-top: 1em">&Acirc;&middot; Text outside
BibTeX entries is passed through verbatim.</p>

<p style="margin-top: 1em">&Acirc;&middot; Outer
parentheses around entries are converted to braces.</p>

<p style="margin-top: 1em">&Acirc;&middot; Personal names
in author and editor field values are normalized to the form
&lsquo;&lsquo;P. D. Q. Bach&rsquo;&rsquo;, from
&lsquo;&lsquo;P.D.Q. Bach&rsquo;&rsquo; and
&lsquo;&lsquo;Bach, P.D.Q.&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">&Acirc;&middot; Hyphen sequences
in page numbers are converted to en-dashes.</p>

<p style="margin-top: 1em">&Acirc;&middot; Month values are
converted to standard BibTeX string abbreviations.</p>

<p style="margin-top: 1em">&Acirc;&middot; In titles,
sequences of upper-case characters at brace level zero are
braced to protect them from being converted to lower-case
letters by some bibliography styles.</p>

<p style="margin-top: 1em">&Acirc;&middot; CODEN, ISBN
(International Standard Book Number) and ISSN (International
Standard Serial Number) entry values are examined to verify
the checksums of each listed number, and <br>
correct ISBN hyphenation is automatically supplied.</p>

<p style="margin-top: 1em">The standardized format of the
output of bibclean facilitates the later application of
simple filters, such as bibcheck(1), bibdup(1),
bibextract(1), bibindex(1), bibjoin(1), <br>
biblabel(1), biblook(1), biborder(1), bibsort(1),
citefind(1), and citetags(1), to process the text, and also
is the one expected by the GNU Emacs BibTeX support
functions.</p>

<p style="margin-top: 1em">OPTIONS <br>
Command-line switches may be abbreviated to a unique leading
prefix, and letter case is not significant. All options are
parsed before any input bibliography files are read, no <br>
matter what their order on the command line. Options that
correspond to a yes/no setting of a flag have a form with a
prefix &quot;no-&quot; to set the flag to no. For such
options, the <br>
last setting determines the flag value used. This is
significant when options are also specified in
initialization files (see the INITIALIZATION FILES manual
section).</p>

<p style="margin-top: 1em">The leading hyphen that
distinguishes an option from a filename may be doubled, for
compatibility with GNU and POSIX conventions. Thus, -author
and --author are equivalent.</p>

<p style="margin-top: 1em">To avoid confusion with options,
if a filename begins with a hyphen, it must be disguised by
a leading absolute or relative directory path, e.g.,
/tmp/-foo.bib or ./-foo.bib.</p>

<p style="margin-top: 1em">-author Display an author credit
on the standard error unit, stderr, and then exit with a
success return code. Sometimes an executable program is
separated from its documenta&acirc; <br>
tion and source code; this option provides a way to recover
from that.</p>

<p style="margin-top: 1em">-error-log filename <br>
Redirect stderr to the indicated file, which will then
contain all of the error and warning messages. This option
is provided for those systems that have difficulty <br>
redirecting stderr.</p>

<p style="margin-top: 1em">-help or -? <br>
Display a help message on stderr, giving a usage
description, similar to this section of the manual pages,
and then exit with a success return code.</p>

<p style="margin-top: 1em">-init-file filename <br>
Provide an explicit value pattern initialization file. It
will be processed after any system-wide and job-wide
initialization files, and may override them. It in turn <br>
may be overridden by a subsequent file-specific
initialization file. For further details, see the
INITIALIZATION FILES manual section.</p>

<p style="margin-top: 1em">-long-field fieldname <br>
Suppress warnings that field named fieldname have lenghts
exceeding the standard BibTeX limits. NB! This is a
Debian-specific extension!</p>

<p style="margin-top: 1em">-max-width nnn <br>
bibclean normally limits output line widths to 72
characters, and in the interests of consistency, that value
should not be changed. Occasionally, special-purpose <br>
applications may require different maximum line widths, so
this option provides that capability. The number following
the option name can be specified in decimal, <br>
octal (starting with 0), or hexadecimal (starting with 0x).
A zero or negative value is interpreted to mean unlimited,
so -max-width 0 can be used to ensure that each <br>
field/value pair appears on a single line.</p>

<p style="margin-top: 1em">When -no-prettyprint requests
bibclean to act as a lexical analyzer, the default line
width is unlimited, unless overridden by this option.</p>

<p style="margin-top: 1em">When bibclean is prettyprinting,
line wrapping will be done only at a space. Consequently, a
long non-blank character sequence may result in the output
exceeding the <br>
requested line width.</p>

<p style="margin-top: 1em">When bibclean is lexing, line
wrapping is done by inserting a backslash-newline pair when
the specified maximum is reached, so no line length will
ever exceed the maxi&acirc; <br>
mum.</p>

<p style="margin-top: 1em">-[no-]align-equals <br>
With the positive form, align the equals sign in key/value
assignments at the same column, separated by a single space
from the value string. Otherwise, the equals <br>
sign follows the key, separated by a single space. Default:
no.</p>

<p style="margin-top: 1em">-[no-]check-values <br>
With the positive form, apply heuristic pattern matching to
field values in order to detect possible errors (e.g.,
&lsquo;&lsquo;year = &quot;192&quot;&rsquo;&rsquo; instead
of &lsquo;&lsquo;year = &quot;1992&quot;&rsquo;&rsquo;), and
<br>
issue warnings when unexpected patterns are found.</p>

<p style="margin-top: 1em">This checking is usually
beneficial, but if it produces too many bogus warnings for a
particular bibliography file, you can disable it with the
negative form of this <br>
option. Default: yes.</p>

<p style="margin-top: 1em">-[no-]delete-empty-values <br>
With the positive form, remove all field/value pairs for
which the value is an empty string. This is helpful in
cleaning up bibliographies generated from text editor <br>
templates. Compare this option with
-[no-]remove-OPT-prefixes described below. Default: no.</p>

<p style="margin-top: 1em">-[no-]file-position <br>
With the positive form, give detailed file position
information in warning and error messages. Default: no.</p>

<p style="margin-top: 1em">-[no-]fix-font-changes <br>
With the positive form, supply an additional brace level
around font changes in titles to protect against downcasing
by some BibTeX styles. Font changes that already <br>
have more than one level of braces are not modified.</p>

<p style="margin-top: 1em">For example, if a title contains
the Latin phrase {\m Dictyostelium Discoideum} or {\m
{D}ictyostelium {D}iscoideum}, then downcasing will
incorrectly convert the <br>
phrase to lower-case letters. Most BibTeX users are
surprised that bracing the initial letters does not prevent
the downcase action. The correct coding is {{\m Dic&acirc;
<br>
tyostelium Discoideum}}. However, there are also legitimate
cases where an extra level of bracing wrongly protects from
downcasing. Consequently, bibclean will nor&acirc; <br>
mally not supply an extra level of braces, but if you have a
bibliography where the extra braces are routinely missing,
you can use this option to supply them.</p>

<p style="margin-top: 1em">If you think that you need this
option, it is strongly recommended that you apply bibclean
to your bibliography file with and without
-fix-font-changes, then compare <br>
the two output files to ensure that extra braces are not
being supplied in titles where they should not be present.
You will have to decide which of the two output <br>
files is the better choice, then repair the incorrect title
bracing by hand.</p>

<p style="margin-top: 1em">Since font changes in titles are
uncommon, except for cases of the type which this option is
designed to correct, it should do more good than harm.
Default: no.</p>

<p style="margin-top: 1em">-[no-]fix-initials <br>
With the positive form, insert a space after a period
following author initials. Default: yes.</p>

<p style="margin-top: 1em">-[no-]fix-names <br>
With the positive form, reorder author and editor name lists
to remove commas at brace level zero, placing first names or
initials before last names. Default: yes.</p>

<p style="margin-top: 1em">-[no-]German-style <br>
With the positive form, interpret quote characters [&quot;]
inside braced value strings at brace level 1 according to
the conventions of the TeX style file german.sty, which <br>
overloads quote to simplify input and representation of
German umlaut accents, sharp-s (es-zet), ligature
separators, invisible hyphens, raised/lowered quotes, French
<br>
guillemets, and discretionary hyphens. Recognized character
combinations will be braced to prevent BibTeX from
interpreting the quote as a string delimiter.</p>

<p style="margin-top: 1em">Quoted strings receive no
special handling from this option, and since German nouns in
titles must anyway be protected from the downcasing
operation of most BibTeX bib&acirc; <br>
liography styles, German value strings that use the
overloaded quote character can always be entered in the form
&quot;{...}&quot;, without the need to specify this option
at <br>
all.</p>

<p style="margin-top: 1em">Default: no.</p>

<p style="margin-top: 1em">-[no-]keep-linebreaks <br>
Normally, line breaks inside value strings are collapsed
into a single space, so that long value strings can later be
broken to provide lines of reasonable length.</p>

<p style="margin-top: 1em">With the positive form,
linebreaks are preserved in value strings. If -max-width is
set to zero, this preserves the original line breaks.
Spacing outside value <br>
strings remains under bibclean&rsquo;s control, and is not
affected by this option.</p>

<p style="margin-top: 1em">Default: no.</p>

<p style="margin-top: 1em">-[no-]keep-parbreaks <br>
With the positive form, preserve paragraph breaks (either
formfeeds, or lines containing only spaces) in value
strings. Normally, paragraph breaks are collapsed into a
<br>
single space. Spacing outside value strings remains under
bibclean&rsquo;s control, and is not affected by this
option. Default: no.</p>

<p style="margin-top: 1em">-[no-]keep-preamble-spaces <br>
With the positive form, preserve all whitespace in
@Preamble{...} entries. Default: no.</p>

<p style="margin-top: 1em">-[no-]keep-spaces <br>
With the positive form, preserve all spaces in value
strings. Normally, multiple spaces are collapsed into a
single space. This option can be used together with <br>
-keep-linebreaks, -keep-parbreaks, and -max-width 0 to
preserve the form of value strings while still providing
syntax and value checking. Spacing outside value <br>
strings remains under bibclean&rsquo;s control, and is not
affected by this option. Default: no.</p>

<p style="margin-top: 1em">-[no-]keep-string-spaces <br>
With the positive form, preserve all whitespace in
@String{...} entries. Default: no.</p>

<p style="margin-top: 1em">-[no-]parbreaks <br>
With the negative form, a paragraph break (either a
formfeed, or a line containing only spaces) is not permitted
in value strings, or between field/value pairs. This <br>
may be useful to quickly trap runaway strings arising from
mismatched delimiters. Default: yes.</p>

<p style="margin-top: 1em">-[no-]prettyprint <br>
Normally, bibclean functions as a prettyprinter. However,
with the negative form of this option, it acts as a lexical
analyzer instead, producing a stream of lexical <br>
tokens. See the LEXICAL ANALYSIS manual section for further
details. Default: yes.</p>

<p style="margin-top: 1em">-[no-]print-patterns <br>
With the positive form, print the value patterns read from
initialization files as they are added to internal tables.
Use this option to check newly-added patterns, or <br>
to see what patterns are being used.</p>

<p style="margin-top: 1em">These patterns are the ones that
will be used in checking value strings for valid syntax, and
all of them are specified in initialization files, rather
than hard-coded <br>
into the program. For further details, see the
INITIALIZATION FILES manual section. Default: no.</p>

<p style="margin-top: 1em">-[no-]read-init-files <br>
With the negative form, suppress loading of system-, user-,
and file-specific initialization files. Initializations will
come only from those files explicitly given by <br>
-init-file filename options. Default: yes.</p>

<p style="margin-top: 1em">-[no-]remove-OPT-prefixes <br>
With the positive form, remove the
&lsquo;&lsquo;OPT&rsquo;&rsquo; prefix from each field name
where the corresponding value is not an empty string. The
prefix &lsquo;&lsquo;OPT&rsquo;&rsquo; must be entirely in
<br>
upper-case to be recognized.</p>

<p style="margin-top: 1em">This option is for
bibliographies generated with the help of the GNU Emacs
BibTeX editing support, which generates templates with
optional fields identified by the <br>
&lsquo;&lsquo;OPT&rsquo;&rsquo; prefix. Although the
function M-x bibtex-remove-OPT normally bound to the
keystrokes C-c C-o does the job, users often forget, with
the result that BibTeX does <br>
not recognize the field name, and ignores the value string.
Compare this option with -[no-]delete-empty-values described
above. Default: no.</p>

<p style="margin-top: 1em">-[no-]scribe <br>
With the positive form, accept input syntax conforming to
the Scribe document system. The output will be converted to
conform to BibTeX syntax. See the SCRIBE BIBLI&acirc; <br>
OGRAPHY FORMAT manual section for further details. Default:
no.</p>

<p style="margin-top: 1em">-[no-]trace-file-opening <br>
With the positive form, record in the error log file the
names of all files which bibclean attempts to open. Use this
option to identify where initialization files are <br>
located. Default: no.</p>

<p style="margin-top: 1em">-[no-]warnings <br>
With the positive form, allow all warning messages. The
negative form is not recommended since it may mask problems
that should be repaired. Default: yes.</p>

<p style="margin-top: 1em">-version Display the program
version number on stderr, and then exit with a success
return code. This will also include an indication of who
compiled the program, the host name <br>
on which it was compiled, the time of compilation, and the
type of string-value matching code selected, when that
information is available to the compiler.</p>

<p style="margin-top: 1em">ERROR RECOVERY AND WARNINGS <br>
When bibclean detects an error, it issues an error message
to both stderr and stdout. That way, the user is clearly
notified, and the output bibliography also contains the
mes&acirc; <br>
sage at the point of error.</p>

<p style="margin-top: 1em">Error messages begin with a
distinctive pair of queries, ??, beginning in column 1,
followed by the input file name and line number. If the
-file-position option was specified, <br>
they also contain the input and output positions of the
current file, entry, and value. Each position includes the
file byte number, the line number, and the column number. In
<br>
the event of a runaway string argument, the entry and value
positions should precisely pinpoint the erroneous
bibliography entry, and the file positions will indicate
where it <br>
was detected, which may be rather later in the files.</p>

<p style="margin-top: 1em">Warning messages identify
possible problems, and are therefore sent only to stderr,
and not to stdout, so they never appear in the output file.
They are identified by a distinc&acirc; <br>
tive pair of percents, %%, beginning in column 1, and as
with error messages, may be followed by file position
messages if the -file-position option was specified.</p>

<p style="margin-top: 1em">For convenience, the first line
of each error and warning message sent to stderr is
formatted according to the expectations of the GNU Emacs
next-error command. You can invoke <br>
bibclean with the Emacs M-x compile&lt;RET&gt;bibclean
filename.bib &gt;filename.new command, then use the
next-error command, normally bound to C-x &lsquo;
(that&rsquo;s a grave, or back, accent), <br>
to move to the location of the error in the input file.</p>

<p style="margin-top: 1em">If error messages are ignored,
and left in the output bibliography file, they will
precipitate an error when the bibliography is next processed
with BibTeX.</p>

<p style="margin-top: 1em">After issuing an error message,
bibclean then resynchronizes its input by copying it
verbatim to stdout until a new bibliography entry is
recognized on a line in which the first <br>
non-blank character is an at-sign (@). This ensures that
nothing is lost from the input file(s), allowing corrections
to be made in either the input or the output files.
How&acirc; <br>
ever, if bibclean detects an internal error in its data
structures, it will terminate abruptly without further input
or output processing; this kind of error should never
happen, <br>
and if it does, it should be reported immediately to the
author of the program. Errors in initialization files, and
running out of dynamic memory, will also immediately
termi&acirc; <br>
nate bibclean.</p>

<p style="margin-top: 1em">INITIALIZATION FILES <br>
bibclean can be compiled with one of three different types
of pattern matching; the choice is made by the installer at
compile time:</p>

<p style="margin-top: 1em">&Acirc;&middot; The original
version uses explicit hand-coded tests of value-string
syntax.</p>

<p style="margin-top: 1em">&Acirc;&middot; The second
version uses regular-expression pattern-matching host
library routines together with regular-expression patterns
that come entirely from initialization <br>
files.</p>

<p style="margin-top: 1em">&Acirc;&middot; The third
version uses special patterns that come entirely from
initialization files.</p>

<p style="margin-top: 1em">This Debianized version of
bibclean uses the third version. However, command-line
options can also be specified in initialization files, no
matter which pattern matching choice <br>
was selected.</p>

<p style="margin-top: 1em">When bibclean starts, it
searches for initialization files, using the first one of
$(HOME)/.bibcleanrc, /usr/share/bibcleanrc, and
/etc/bibcleanrc that exists. Afterwards, it <br>
reads the first .bibcleanrc found in the BIBINPUTS search
path. The name .bibcleanrc can be changed at run time
through a setting of the environment variable BIBCLEANINI.
If <br>
the name starts with a dot, it will be stripped when looking
in /usr/share and /etc.</p>

<p style="margin-top: 1em">Then, when command-line
arguments are processed, any additional files specified by
-init-filefilename options are also processed. Finally,
immediately before each named bibliog&acirc; <br>
raphy file is processed, an attempt is made to process an
initialization file with the same name, but with the
extension changed to .ini. The default extension can be
changed by <br>
a setting of the environment variable BIBCLEANEXT. This
scheme permits system-wide, user-wide, session-wide, and
file-specific initialization files to be supported.</p>

<p style="margin-top: 1em">When input is taken from stdin,
there is no file-specific initialization.</p>

<p style="margin-top: 1em">For precise control, the
-no-read-init-files option suppresses all initialization
files except those explicitly named by -init-filefilename
options, either on the command line, <br>
or in requested initialization files.</p>

<p style="margin-top: 1em">Recursive execution of
initialization files with nested -init-file options is
permitted; if the recursion is circular, bibclean will
finally get a non-fatal initialization file <br>
open failure after opening too many files. This terminates
further initialization file processing. As the recursion
unwinds, the files are all closed, then execution proceeds
<br>
normally.</p>

<p style="margin-top: 1em">An initialization file may
contain empty lines, comments from percent to end of line
(just like TeX), option switches, and field/pattern or
field/pattern/message assignments. <br>
Leading and trailing spaces are ignored. This is best
illustrated by a short example:</p>

<p style="margin-top: 1em">% This is a small bibclean
initialization file</p>

<p style="margin-top: 1em">-init-file
/u/math/bib/.bibcleanrc %% departmental patterns</p>

<p style="margin-top: 1em">chapter = &quot;</p>

<p style="margin-top: 1em">pages = &quot;</p>

<p style="margin-top: 1em">volume = &quot;</p>

<p style="margin-top: 1em">year = &quot; <br>
&quot;Multiple years specified.&quot; %% 1989, 1990,
1991</p>

<p style="margin-top: 1em">-no-fix-names %% do not modify
author/editor lists</p>

<p style="margin-top: 1em">Long logical lines can be split
into multiple physical lines by breaking at a
backslash-newline pair; the backslash-newline pair is
discarded. This processing happens while <br>
characters are being read, before any further interpretation
of the input stream.</p>

<p style="margin-top: 1em">Each logical line must contain a
complete option (and its value, if any), or a complete
field/pattern pair, or a field/pattern/message triple.</p>

<p style="margin-top: 1em">Comments are stripped during the
parsing of the field, pattern, and message values. The
comment start symbol is not recognized inside quoted
strings, so it can be freely used in <br>
such strings.</p>

<p style="margin-top: 1em">Comments on logical lines that
were input as multiple physical lines via the
backslash-newline convention must appear on the last
physical line; otherwise, the remaining physical <br>
lines will become part of the comment.</p>

<p style="margin-top: 1em">Pattern strings must be enclosed
in quotation marks; within such strings, a backslash starts
an escape mechanism that is commonly used in UNIX software.
The recognized escape <br>
sequences are:</p>

<p style="margin-top: 1em">alarm bell (octal 007)</p>

<p style="margin-top: 1em">backspace (octal 010)</p>

<p style="margin-top: 1em">formfeed (octal 014)</p>

<p style="margin-top: 1em">newline (octal 012)</p>

<p style="margin-top: 1em">carriage return (octal 015)</p>

<p style="margin-top: 1em">horizontal tab (octal 011)</p>

<p style="margin-top: 1em">vertical tab (octal 013)</p>

<p style="margin-top: 1em">character number octal ooo (e.g
12 is linefeed). Up to 3 octal digits may be used.</p>

<p style="margin-top: 1em">xhh character number hexadecimal
hh (e.g., x0a is linefeed). xhh may be in either letter
case. Any number of hexadecimal digits may be used.</p>

<p style="margin-top: 1em">Backslash followed by any other
character produces just that character. Thus, gets a literal
percent into a string (preventing its interpretation as a
comment), <br>
quotation mark, and \ produces a single backslash.</p>

<p style="margin-top: 1em">An ASCII NUL ( ) in a string
will terminate it; this is a feature of the C programming
language in which bibclean is implemented.</p>

<p style="margin-top: 1em">Field/pattern pairs can be
separated by arbitrary space, and optionally, either an
equals sign or colon functioning as an assignment operator.
Thus, the following are equiva&acirc; <br>
lent:</p>

<p style="margin-top: 1em">pages=&quot; <br>
pages:&quot; <br>
pages &quot; <br>
pages = &quot; <br>
pages : &quot; <br>
pages &quot;</p>

<p style="margin-top: 1em">Each field name can have an
arbitrary number of patterns associated with it; however,
they must be specified in separate field/pattern
assignments.</p>

<p style="margin-top: 1em">An empty pattern string causes
previously-loaded patterns for that field name to be
forgotten. This feature permits an initialization file to
completely discard patterns from <br>
earlier initialization files.</p>

<p style="margin-top: 1em">Patterns for value strings are
represented in a tiny special-purpose language that is both
convenient and suitable for bibliography value-string syntax
checking. While not as <br>
powerful as the language of regular-expression patterns, its
parsing can be portably implemented in less than 3% of the
code in a widely-used regular-expression parser (the GNU
<br>
regexp package).</p>

<p style="margin-top: 1em">The patterns are represented by
the following special characters:</p>

<p style="margin-top: 1em">&lt;space&gt; one or more
spaces</p>

<p style="margin-top: 1em">a exactly one letter</p>

<p style="margin-top: 1em">A one or more letters</p>

<p style="margin-top: 1em">d exactly one digit</p>

<p style="margin-top: 1em">D one or more digits</p>

<p style="margin-top: 1em">r exactly one Roman numeral</p>

<p style="margin-top: 1em">R one or more Roman numerals
(i.e. a Roman number)</p>

<p style="margin-top: 1em">w exactly one word (one or more
letters and digits)</p>

<p style="margin-top: 1em">W one or more space-separated
words, beginning and ending with a word</p>

<p style="margin-top: 1em">. one &lsquo;special&rsquo;
character, one of the characters
&lt;space&gt;!#()*+,-./:;?[]~, a subset of punctuation
characters that are typically used in string values</p>

<p style="margin-top: 1em">: one or more
&lsquo;special&rsquo; characters</p>

<p style="margin-top: 1em">X one or more
&lsquo;special&rsquo;-separated words, beginning and ending
with a word</p>

<p style="margin-top: 1em">exactly one x (x is any
character), possibly with an escape sequence interpretation
given earlier</p>

<p style="margin-top: 1em">x exactly the character x (x is
anything but one of these pattern characters:
aAdDrRwW.:&lt;space&gt;</p>

<p style="margin-top: 1em">The X pattern character is very
powerful, but generally inadvisable, since it will match
almost anything likely to be found in a BibTeX value string.
The reason for providing <br>
pattern matching on the value strings is to uncover possible
errors, not mask them.</p>

<p style="margin-top: 1em">There is no provision for
specifying ranges or repetitions of characters, but this can
usually be done with separate patterns. It is a good idea to
accompany the pattern with a <br>
comment showing the kind of thing it is expected to match.
Here is a portion of an initialization file giving a few of
the patterns used to match number value strings:</p>

<p style="margin-top: 1em">number = &quot; <br>
number = &quot; <br>
number = &quot; <br>
number = &quot; <br>
number = &quot; <br>
number = &quot; <br>
number = &quot; <br>
number = &quot;</p>

<p style="margin-top: 1em">For a bibliography that contains
only article entries, this list should probably be reduced
to just the first pattern, so that anything other than a
digit string fails the pat&acirc; <br>
tern-match test. This is easily done by keeping
bibliography-specific patterns in a corresponding file with
extension .ini, since that file is read automatically.</p>

<p style="margin-top: 1em">You should be sure to use empty
pattern strings in this pattern file to discard patterns
from earlier initialization files.</p>

<p style="margin-top: 1em">The value strings passed to the
pattern matcher contain surrounding quotes, so the patterns
should also. However, you could use a pattern specification
like &quot; <br>
initial digit string followed by anything else; the omission
of the final quotation mark <br>
the value string is a quotation mark.</p>

<p style="margin-top: 1em">Because the value strings are
intended to be processed by TeX, the pattern matching
ignores braces, and TeX control sequences, together with any
space following those control <br>
sequences. Spaces around braces are preserved. This
convention allows the pattern fragment A-AD-D to match the
value string TN-Ksh 27-70, because the value is implicitly
<br>
collapsed to TN-K27-70 during the matching operation.</p>

<p style="margin-top: 1em">bibclean&rsquo;s normal action
when a string value fails to match any of the corresponding
patterns is to issue a warning message something like this:
&quot;Unexpected value in &lsquo;&lsquo;year = <br>
&quot;192&quot;&rsquo;&rsquo;. In most cases, that is
sufficient to alert the user to a problem. In some cases,
however, it may be desirable to associate a different
message with a particular pat&acirc; <br>
tern. This can be done by supplying a message string
following the pattern string. Format items %% (single
percent), %e (entry name), %f (field name), %k (citation
key), and %v <br>
(string value) are available to get current values expanded
in the messages. Here is an example:</p>

<p style="margin-top: 1em">chapter = &quot;</p>

<p style="margin-top: 1em">To be consistent with other
messages output by bibclean, the message string should not
end with punctuation.</p>

<p style="margin-top: 1em">If you wish to make the message
an error, rather than just a warning, begin it with a query
(?), like this:</p>

<p style="margin-top: 1em">chapter = &quot;</p>

<p style="margin-top: 1em">The query will not be included
in the output message.</p>

<p style="margin-top: 1em">Escape sequences are supported
in message strings, just as they are in pattern strings. You
can use this to advantage for fancy things, such as terminal
display mode control. <br>
If you rewrite the previous example as</p>

<p style="margin-top: 1em">chapter = &quot; <br>
&quot;? 33[7mColon found in &lsquo;&lsquo;%f =
%v&rsquo;&rsquo; 33[0m&quot; %% 23:2</p>

<p style="margin-top: 1em">the error message will appear in
inverse video on display screens that support ANSI terminal
control sequences. Such practice is not normally
recommended, since it may have <br>
undesirable effects on some output devices. Nevertheless,
you may find it useful for restricted applications.</p>

<p style="margin-top: 1em">For some types of bibliography
fields, bibclean contains special-purpose code to supplement
or replace the pattern matching:</p>

<p style="margin-top: 1em">&Acirc;&middot; CODEN, ISBN and
ISSN field values are handled this way because their
validation requires evaluation of checksums that cannot be
expressed by simple patterns; no pat&acirc; <br>
terns are even used in these three cases.</p>

<p style="margin-top: 1em">&Acirc;&middot; chapter, number,
pages, and volume values are checked only by pattern
matching.</p>

<p style="margin-top: 1em">&Acirc;&middot; month values are
first checked against the standard BibTeX month
abbreviations, and only if no match is found are patterns
then used.</p>

<p style="margin-top: 1em">&Acirc;&middot; year values are
first checked against patterns, then if no match is found,
the year numbers are found and converted to integer values
for testing against reasonable <br>
bounds.</p>

<p style="margin-top: 1em">Values for other fields are
checked only against patterns. You can provide patterns for
any field you like, even ones bibclean does not already know
about. New ones are simply <br>
added to an internal table that is searched for each string
to be validated.</p>

<p style="margin-top: 1em">The special field, key,
represents the bibliographic citation key. It can be given
patterns, like any other field. Here is an initialization
file pattern assignment that will <br>
match an author name, a colon, an alphabetic string, and a
two-digit year:</p>

<p style="margin-top: 1em">key = &quot;A:Add&quot; %%
Knuth:TB86</p>

<p style="margin-top: 1em">Notice that no quotation marks
are included in the pattern, because the citation keys are
not quoted. You can use such patterns to help enforce
uniform naming conventions for <br>
citation keys, which is increasingly important as your
bibliography data base grows.</p>

<p style="margin-top: 1em">LEXICAL ANALYSIS <br>
When -no-prettyprint is specified, bibclean acts as a
lexical analyzer instead of a prettyprinter, producing
output in lines of the form</p>


<p style="margin-top: 1em">&lt;token-number&gt;&lt;tab&gt;&lt;token-name&gt;&lt;tab&gt;&quot;&lt;token-value&gt;&quot;</p>

<p style="margin-top: 1em">Each output line contains a
single complete token, identified by a small integer number
for use by a computer program, a token type name for human
readers, and a string value in <br>
quotes.</p>

<p style="margin-top: 1em">Special characters in the token
value string are represented with ANSI/ISO Standard C escape
sequences, so all characters other than NUL are
representable, and multi-line values <br>
can be represented in a single line.</p>

<p style="margin-top: 1em">Here are the token numbers and
token type names that can appear in the output when
-prettyprint is specified:</p>

<p style="margin-top: 1em">0 UNKNOWN <br>
1 ABBREV <br>
2 AT <br>
3 COMMA <br>
4 COMMENT <br>
5 ENTRY <br>
6 EQUALS <br>
7 FIELD <br>
8 INCLUDE <br>
9 INLINE <br>
10 KEY <br>
11 LBRACE <br>
12 LITERAL <br>
13 NEWLINE <br>
14 PREAMBLE <br>
15 RBRACE <br>
16 SHARP <br>
17 SPACE <br>
18 STRING <br>
19 VALUE</p>

<p style="margin-top: 1em">Programs that parse such output
should also be prepared for lines beginning with the warning
prefix, %%, or the error prefix, ??, and for ANSI/ISO
Standard C line number direc&acirc; <br>
tives of the form <br>
# line 273 &quot;texbook1.bib&quot; <br>
which record the line number and file name of the current
input file.</p>

<p style="margin-top: 1em">If a -max-width nnn command-line
option was specified, long output lines will be wrapped at a
backslash-newline pair, and consequently, software that
processes the lexical token <br>
stream should be prepared to collapse such wrapped lines
back into single lines.</p>

<p style="margin-top: 1em">As an example of the use of
-no-prettyprint, the UNIX command pipeline <br>
bibclean -no-prettyprint mylib.bib | awk &rsquo;$2 ==
&quot;KEY&quot; {print $3}&rsquo; | sed -e
&rsquo;s/&quot;//g&rsquo; | sort <br>
will extract a sorted list of all citation keys in the file
mylib.bib.</p>

<p style="margin-top: 1em">A certain amount of processing
will have been done on the tokens. In particular, delimiters
equivalent to braces will have been replaced by braces, and
braced strings will have <br>
become quoted strings.</p>

<p style="margin-top: 1em">The LITERAL token type is used
for arbitrary text that bibclean does not examine further,
such as the contents of a @Preamble{...} or a
@Comment{...}.</p>

<p style="margin-top: 1em">The UNKNOWN token type should
never appear in the output stream. It is used internally to
initialize token type variables.</p>

<p style="margin-top: 1em">SCRIBE BIBLIOGRAPHY FORMAT <br>
bibclean&rsquo;s support for the Scribe bibliography format
is based on the syntax description in the Scribe
Introductory User&rsquo;s Manual, 3rd Edition, May 1980.
Scribe was originally <br>
developed by Brian Reid at Carnegie-Mellon University, and
is now marketed by Unilogic, Ltd.</p>

<p style="margin-top: 1em">The BibTeX bibliography format
was strongly influenced by Scribe, and indeed, with care, it
is possible to share bibliography files between the two
systems. Nevertheless, there <br>
are some differences, so here is a summary of features of
the Scribe bibliography file format:</p>

<p style="margin-top: 1em">(1) Letter case is not
significant in field names and entry names, but case is
preserved in value strings.</p>

<p style="margin-top: 1em">(2) In field/value pairs, the
field and value may be separated by one of three characters:
=, /, or space. Space may optionally surround these
separators.</p>

<p style="margin-top: 1em">(3) Value delimiters are any of
these seven pairs: { } [ ] ( ) &lt; &gt; &rsquo; &rsquo;
&quot; &quot; &lsquo; &lsquo;</p>

<p style="margin-top: 1em">(4) Value delimiters may not be
nested, even though with the first four delimiter pairs,
nested balanced delimiters would be unambiguous.</p>

<p style="margin-top: 1em">(5) Delimiters can be omitted
around values that contain only letters, digits, sharp (#),
ampersand (&amp;), period (.), and percent (%).</p>

<p style="margin-top: 1em">(6) Outside of delimited values,
a literal at-sign (@) is represented by doubled at-signs
(@@).</p>

<p style="margin-top: 1em">(7) Bibliography entries begin
with @name, as for BibTeX, but any of the seven Scribe value
delimiter pairs may be used to surround the values in
field/value pairs. As in (4), <br>
nested delimiters are forbidden.</p>

<p style="margin-top: 1em">(8) Arbitrary space may separate
entry names from the following delimiters.</p>

<p style="margin-top: 1em">(9) @Comment is a special
command whose delimited value is discarded. As in (4),
nested delimiters are forbidden.</p>

<p style="margin-top: 1em">(10) The special form</p>

<p style="margin-top: 1em">@Begin{comment} <br>
... <br>
@End{comment}</p>

<p style="margin-top: 1em">permits encapsulating arbitrary
text containing any characters or delimiters, other than
&lsquo;&lsquo;@End{comment}&rsquo;&rsquo;. Any of the seven
delimiter pairs may be used around the word <br>
&lsquo;&lsquo;comment&rsquo;&rsquo; following the
&lsquo;&lsquo;@Begin&rsquo;&rsquo; or
&lsquo;&lsquo;@End&rsquo;&rsquo;; the delimiters in the two
cases need not be the same, and consequently,
&lsquo;&lsquo;@Begin{comment}&rsquo;&rsquo;/&lsquo;&lsquo;@End{comment}&rsquo;&rsquo;
pairs may <br>
not be nested.</p>

<p style="margin-top: 1em">(11) The key field is required
in each bibliography entry.</p>

<p style="margin-top: 1em">(12) A backslashed quote in a
string will be assumed to be a TeX accent, and braced
appropriately. While such accents do not conform to Scribe
syntax, Scribe-format bibliogra&acirc; <br>
phies have been found that appear to be intended for TeX
processing.</p>

<p style="margin-top: 1em">Because of this loose syntax,
bibclean&rsquo;s normal error detection heuristics are less
effective, and consequently, Scribe mode input is not the
default; it must be explicitly <br>
requested.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
BIBCLEANEXT File extension of bibliography-specific
initialization files. Default: .ini.</p>

<p style="margin-top: 1em">BIBCLEANINI Name of bibclean
initialization files. Default: .bibcleanrc.</p>

<p style="margin-top: 1em">BIBINPUTS Search path for
bibclean and BibTeX input files. This is a colon-separated
list of directories that are searched in order from first to
last. It is not an error <br>
for a specified directory to not exist.</p>

<p style="margin-top: 1em">FILES <br>
*.bib BibTeX and Scribe bibliography data base files.</p>

<p style="margin-top: 1em">*.ini File-specific
initialization files.</p>

<p style="margin-top: 1em">/usr/share/bibcleanrc,
/etc/bibcleanrc <br>
System-wide initialization files.</p>

<p style="margin-top: 1em">.bibcleanrc User-specific
initialization files.</p>

<p style="margin-top: 1em">SEE ALSO <br>
bibcheck(1), bibdup(1), bibextract(1), bibindex(1),
bibjoin(1), biblabel(1), biblex(1), biblook(1), biborder(1),
bibparse(1), bibsort(1), bibtex(1), bibunlex(1),
citefind(1), <br>
citesub(1), citetags(1), latex(1), scribe(1), tex(1).</p>

<p style="margin-top: 1em">AUTHOR <br>
Nelson H. F. Beebe <br>
Center for Scientific Computing <br>
University of Utah <br>
Department of Mathematics, 322 INSCC <br>
155 S 1400 E RM 233 <br>
Salt Lake City, UT 84112-0090 <br>
USA <br>
Tel: +1 801 581 5254 <br>
FAX: +1 801 585 1640, +1 801 581 4148 <br>
Email: beebe@math.utah.edu, beebe@acm.org, beebe@ieee.org
(Internet) <br>
URL: http://www.math.utah.edu/~beebe</p>

<p style="margin-top: 1em">This Debianization of bibclean
was done by Henning Makholm &lt;henning@makholm.net&gt;, and
differs from the upstream source in where it looks for the
system-wide initialization file <br>
(vanilla bibclean expects to find it in $PATH), and has also
been patched to ignore the built-in BibTeX field-length
limit for abstract fields.</p>

<p style="margin-top: 1em">Version 2.11.4 09 May 1998
BIBCLEAN(1)</p>
<hr>
</body>
</html>
