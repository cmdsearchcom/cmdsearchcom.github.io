<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>TSMOKE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TSMOKE(1)</td>
    <td class="head-vol">SmokePing</td>
    <td class="head-rtitle">TSMOKE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
tSmoke - Commandline tool for sending SmokePing information
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>tSmoke</b> [ <b>--testmail</b> | <b>--morning</b> | <b>--weekly</b> |
  <b>--version</b> | <b>--help</b> | <b>--man</b>]
<div class="Pp"></div>
<pre>
 Options:
 --man      Show the manpage
 --help     Help :-)
 --version  Show SmokePing Version
 --testmail Send a test message
 --listrrds List the RRDs used by this Smokeping
 --morning  Send a morning synopsis
 --weekly   Send a weekly status report
 --to       E-mail address to send message (i.e. '--to=xyz@company.com.invalid'
 --detail   How much detail to send in weekly report (i.e. '--detail=1')
 --quiet    Do not print welcome
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>tSmoke</b> tool is a commandline tool which interfaces with the SmokePing
  system. Its main function is to send a message indicating the current status
  of the systems being monitored by Smokeping or an HTML mail file containing
  the status over the past day, past week and past month including an overview.
<div class="Pp"></div>
Typical crontab used to invoke this are
<div class="Pp"></div>
<pre>
 # Quick morning alert to see what's down
 0 6 * * * /usr/local/smokeping/bin/tSmoke.pl --q --to=mobilephone@att.net.invalid --morning
 # Weekly report on the percent availability of network systems with no detail
 0 8 * * * /usr/local/smokeping/bin/tSmoke.pl --q --to=mailbox@company.com.invalid --weekly --detail=0
</pre>
<h1 class="Sh" title="Sh" id="SETUP"><a class="selflink" href="#SETUP">SETUP</a></h1>
When installing tSmoke, some variables must be adjusted to fit your local
  system.
<div class="Pp"></div>
We need to use the following <b>libraries</b>:
<dl class="Bl-tag">
  <dt class="It-tag">Smokeping</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">RRDTool Perl bindings</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Getopt::Long</dt>
  <dd class="It-tag"></dd>
</dl>
<div class="Pp"></div>
Set up your libraries:
<div class="Pp"></div>
<pre>
 use lib &quot;/usr/local/smokeping/lib&quot;;
 use lib &quot;/usr/local/rrdtool-1.0.39/lib/perl&quot;;
</pre>
<div class="Pp"></div>
Point to your Smokeping <b>config</b> file
<div class="Pp"></div>
<pre>
 my $cfgfile = &quot;/usr/local/smokeping/etc/config&quot;;
</pre>
<div class="Pp"></div>
Modify the Smokeping config file to include a path for tmail in the General
  section:
<div class="Pp"></div>
<pre>
 tmail = /usr/local/smokeping/etc/tmail
</pre>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2003 by Dan McGinn-Combs. All right reserved.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; either version 2 of the License, or (at your option) any later
  version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 675 Mass
  Ave, Cambridge, MA 02139, USA.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Dan McGinn-Combs &lt;d.mcginn-combs@mindspring.com&gt;
<div class="Pp"></div>
Modified for Smokeping official distribution by Niko Tyni
  &lt;ntyni@iki.fi&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-02-12</td>
    <td class="foot-os">2.6.11</td>
  </tr>
</table>
</body>
</html>
