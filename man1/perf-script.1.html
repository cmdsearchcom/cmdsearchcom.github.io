<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:30:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PERF-SCRIPT(1) perf Manual PERF-SCRIPT(1)</p>

<p style="margin-top: 1em">NAME <br>
perf-script - Read perf.data (created by perf record) and
display trace output</p>

<p style="margin-top: 1em">SYNOPSIS <br>
perf script [&lt;options&gt;] <br>
perf script [&lt;options&gt;] record &lt;script&gt;
[&lt;record-options&gt;] &lt;command&gt; <br>
perf script [&lt;options&gt;] report &lt;script&gt;
[script-args] <br>
perf script [&lt;options&gt;] &lt;script&gt;
&lt;required-script-args&gt; [&lt;record-options&gt;]
&lt;command&gt; <br>
perf script [&lt;options&gt;] &lt;top-script&gt;
[script-args]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This command reads the input file and displays the trace
recorded.</p>

<p style="margin-top: 1em">There are several variants of
perf script:</p>

<p style="margin-top: 1em">&rsquo;perf script&rsquo; to see
a detailed trace of the workload that was <br>
recorded.</p>

<p style="margin-top: 1em">You can also run a set of
pre-canned scripts that aggregate and <br>
summarize the raw trace data in various ways (the list of
scripts is <br>
available via &rsquo;perf script -l&rsquo;). The following
variants allow you to <br>
record and run those scripts:</p>

<p style="margin-top: 1em">&rsquo;perf script record
&lt;script&gt; &lt;command&gt;&rsquo; to record the events
required <br>
for &rsquo;perf script report&rsquo;. &lt;script&gt; is the
name displayed in the <br>
output of &rsquo;perf script --list&rsquo; i.e. the actual
script name minus any <br>
language extension. If &lt;command&gt; is not specified, the
events are <br>
recorded using the -a (system-wide) &rsquo;perf
record&rsquo; option.</p>

<p style="margin-top: 1em">&rsquo;perf script report
&lt;script&gt; [args]&rsquo; to run and display the results
<br>
of &lt;script&gt;. &lt;script&gt; is the name displayed in
the output of &rsquo;perf <br>
trace --list&rsquo; i.e. the actual script name minus any
language <br>
extension. The perf.data output from a previous run of
&rsquo;perf script <br>
record &lt;script&gt;&rsquo; is used and should be present
for this command to <br>
succeed. [args] refers to the (mainly optional) args
expected by <br>
the script.</p>

<p style="margin-top: 1em">&rsquo;perf script
&lt;script&gt; &lt;required-script-args&gt;
&lt;command&gt;&rsquo; to both <br>
record the events required for &lt;script&gt; and to run the
&lt;script&gt; <br>
using &rsquo;live-mode&rsquo; i.e. without writing anything
to disk. &lt;script&gt; <br>
is the name displayed in the output of &rsquo;perf script
--list&rsquo; i.e. the <br>
actual script name minus any language extension. If
&lt;command&gt; is <br>
not specified, the events are recorded using the -a
(system-wide) <br>
&rsquo;perf record&rsquo; option. If &lt;script&gt; has any
required args, they <br>
should be specified before &lt;command&gt;. This mode
doesn&rsquo;t allow for <br>
optional script args to be specified; if optional script
args are <br>
desired, they can be specified using separate &rsquo;perf
script record&rsquo; <br>
and &rsquo;perf script report&rsquo; commands, with the
stdout of the record step <br>
piped to the stdin of the report script, using the &rsquo;-o
-&rsquo; and &rsquo;-i -&rsquo; <br>
options of the corresponding commands.</p>

<p style="margin-top: 1em">&rsquo;perf script
&lt;top-script&gt;&rsquo; to both record the events required
for <br>
&lt;top-script&gt; and to run the &lt;top-script&gt; using
&rsquo;live-mode&rsquo; <br>
i.e. without writing anything to disk. &lt;top-script&gt; is
the name <br>
displayed in the output of &rsquo;perf script --list&rsquo;
i.e. the actual <br>
script name minus any language extension; a
&lt;top-script&gt; is defined <br>
as any script name ending with the string
&rsquo;top&rsquo;.</p>

<p style="margin-top: 1em">[&lt;record-options&gt;] can be
passed to the record steps of &rsquo;perf script <br>
record&rsquo; and &rsquo;live-mode&rsquo; variants; this
isn&rsquo;t possible however for <br>
&lt;top-script&gt; &rsquo;live-mode&rsquo; or &rsquo;perf
script report&rsquo; variants.</p>

<p style="margin-top: 1em">See the &rsquo;SEE ALSO&rsquo;
section for links to language-specific <br>
information on how to write and run your own trace
scripts.</p>

<p style="margin-top: 1em">OPTIONS <br>
&lt;command&gt;... <br>
Any command you can specify in a shell.</p>

<p style="margin-top: 1em">-D, --dump-raw-script= <br>
Display verbose dump of the trace data.</p>

<p style="margin-top: 1em">-L, --Latency= <br>
Show latency attributes (irqs/preemption disabled, etc).</p>

<p style="margin-top: 1em">-l, --list= <br>
Display a list of available trace scripts.</p>

<p style="margin-top: 1em">-s [lang], --script= <br>
Process trace data with the given script
([lang]:script[.ext]). If the string lang is specified in
place of a script name, a list of supported languages will
be displayed <br>
instead.</p>

<p style="margin-top: 1em">-g, --gen-script= <br>
Generate perf-script.[ext] starter script for given
language, using current perf.data.</p>

<p style="margin-top: 1em">-a <br>
Force system-wide collection. Scripts run without a
&lt;command&gt; normally use -a by default, while scripts
run with a &lt;command&gt; normally don&acirc;t - this
option allows the latter to <br>
be run in system-wide mode.</p>

<p style="margin-top: 1em">-i, --input= <br>
Input file name. (default: perf.data unless stdin is a
fifo)</p>

<p style="margin-top: 1em">-d, --debug-mode <br>
Do various checks like samples ordering and lost events.</p>

<p style="margin-top: 1em">-F, --fields <br>
Comma separated list of fields to print. Options are: comm,
tid, pid, time, cpu, event, trace, ip, sym, dso, addr,
symoff, srcline, period, iregs, brstack, brstacksym, flags.
<br>
Field list can be prepended with the type, trace, sw or hw,
to indicate to which event type the field list applies.
e.g., -f sw:comm,tid,time,ip,sym and -f <br>
trace:time,cpu,trace</p>

<p style="margin-top: 1em">perf script -f
&lt;fields&gt;</p>

<p style="margin-top: 1em">is equivalent to:</p>

<p style="margin-top: 1em">perf script -f
trace:&lt;fields&gt; -f sw:&lt;fields&gt; -f
hw:&lt;fields&gt;</p>

<p style="margin-top: 1em">i.e., the specified fields apply
to all event types if the type string <br>
is not given.</p>

<p style="margin-top: 1em">The arguments are processed in
the order received. A later usage can <br>
reset a prior request. e.g.:</p>

<p style="margin-top: 1em">-f trace: -f
comm,tid,time,ip,sym</p>

<p style="margin-top: 1em">The first -f suppresses trace
events (field list is &quot;&quot;), but then the <br>
second invocation sets the fields to comm,tid,time,ip,sym.
In this case a <br>
warning is given to the user:</p>

<p style="margin-top: 1em">&quot;Overriding previous field
request for all events.&quot;</p>

<p style="margin-top: 1em">Alternatively, consider the
order:</p>

<p style="margin-top: 1em">-f comm,tid,time,ip,sym -f
trace:</p>

<p style="margin-top: 1em">The first -f sets the fields for
all events and the second -f <br>
suppresses trace events. The user is given a warning message
about <br>
the override, and the result of the above is that only S/W
and H/W <br>
events are displayed with the given fields.</p>

<p style="margin-top: 1em">For the &rsquo;wildcard&rsquo;
option if a user selected field is invalid for an <br>
event type, a message is displayed to the user that the
option is <br>
ignored for that type. For example:</p>

<p style="margin-top: 1em">$ perf script -f comm,tid,trace
<br>
&rsquo;trace&rsquo; not valid for hardware events. Ignoring.
<br>
&rsquo;trace&rsquo; not valid for software events.
Ignoring.</p>

<p style="margin-top: 1em">Alternatively, if the type is
given an invalid field is specified it <br>
is an error. For example:</p>

<p style="margin-top: 1em">perf script -v -f
sw:comm,tid,trace <br>
&rsquo;trace&rsquo; not valid for software events.</p>

<p style="margin-top: 1em">At this point usage is
displayed, and perf-script exits.</p>

<p style="margin-top: 1em">The flags field is synthesized
and may have a value when Instruction <br>
Trace decoding. The flags are &quot;bcrosyiABEx&quot; which
stand for branch, <br>
call, return, conditional, system, asynchronous, interrupt,
<br>
transaction abort, trace begin, trace end, and in
transaction, <br>
respectively.</p>

<p style="margin-top: 1em">Finally, a user may not set
fields to none for all event types. <br>
i.e., -f &quot;&quot; is not allowed.</p>

<p style="margin-top: 1em">The brstack output includes
branch related information with raw addresses using the <br>
/v/v/v/v/ syntax in the following order: <br>
FROM: branch source instruction <br>
TO : branch target instruction <br>
M/P/-: M=branch target mispredicted or branch direction was
mispredicted, P=target predicted or direction predicted,
-=not supported <br>
X/- : X=branch inside a transactional region, -=not in
transaction region or not supported <br>
A/- : A=TSX abort entry, -=not aborted region or not
supported</p>

<p style="margin-top: 1em">The brstacksym is identical to
brstack, except that the FROM and TO addresses are printed
in a symbolic form if possible.</p>

<p style="margin-top: 1em">-k, --vmlinux=&lt;file&gt; <br>
vmlinux pathname</p>

<p style="margin-top: 1em">--kallsyms=&lt;file&gt; <br>
kallsyms pathname</p>

<p style="margin-top: 1em">--symfs=&lt;directory&gt; <br>
Look for files with symbols relative to this directory.</p>

<p style="margin-top: 1em">-G, --hide-call-graph <br>
When printing symbols do not display call chain.</p>

<p style="margin-top: 1em">-C, --cpu <br>
Only report samples for the list of CPUs provided. Multiple
CPUs can be provided as a comma-separated list with no
space: 0,1. Ranges of CPUs are specified with -: 0-2. <br>
Default is to report samples on all CPUs.</p>

<p style="margin-top: 1em">-c, --comms= <br>
Only display events for these comms. CSV that understands
file://filename entries.</p>

<p style="margin-top: 1em">--pid= <br>
Only show events for given process ID (comma separated
list).</p>

<p style="margin-top: 1em">--tid= <br>
Only show events for given thread ID (comma separated
list).</p>

<p style="margin-top: 1em">-I, --show-info <br>
Display extended information about the perf.data file. This
adds information which may be very large and thus may
clutter the display. It currently includes: cpu and numa
<br>
topology of the host system. It can only be used with the
perf script report mode.</p>

<p style="margin-top: 1em">--show-kernel-path <br>
Try to resolve the path of [kernel.kallsyms]</p>

<p style="margin-top: 1em">--show-task-events Display task
related events (e.g. FORK, COMM, EXIT).</p>

<p style="margin-top: 1em">--show-mmap-events Display mmap
related events (e.g. MMAP, MMAP2).</p>

<p style="margin-top: 1em">--show-switch-events Display
context switch events i.e. events of type PERF_RECORD_SWITCH
or PERF_RECORD_SWITCH_CPU_WIDE.</p>

<p style="margin-top: 1em">--demangle <br>
Demangle symbol names to human readable form. It&acirc;s
enabled by default, disable with --no-demangle.</p>

<p style="margin-top: 1em">--demangle-kernel <br>
Demangle kernel symbol names to human readable form (for C++
kernels).</p>

<p style="margin-top: 1em">--header Show perf.data
header.</p>

<p style="margin-top: 1em">--header-only Show only
perf.data header.</p>

<p style="margin-top: 1em">--itrace <br>
Options for decoding instruction tracing data. The options
are:</p>

<p style="margin-top: 1em">i synthesize instructions events
<br>
b synthesize branches events <br>
c synthesize branches events (calls only) <br>
r synthesize branches events (returns only) <br>
x synthesize transactions events <br>
e synthesize error events <br>
d create a debug log <br>
g synthesize a call chain (use with i or x) <br>
l synthesize last branch entries (use with i or x)</p>

<p style="margin-top: 1em">The default is all events i.e.
the same as --itrace=ibxe</p>

<p style="margin-top: 1em">In addition, the period (default
100000) for instructions events <br>
can be specified in units of:</p>

<p style="margin-top: 1em">i instructions <br>
t ticks <br>
ms milliseconds <br>
us microseconds <br>
ns nanoseconds (default)</p>

<p style="margin-top: 1em">Also the call chain size
(default 16, max. 1024) for instructions or <br>
transactions events can be specified.</p>

<p style="margin-top: 1em">Also the number of last branch
entries (default 64, max. 1024) for <br>
instructions or transactions events can be specified.</p>

<p style="margin-top: 1em">To disable decoding entirely,
use --no-itrace.</p>

<p style="margin-top: 1em">--full-source-path <br>
Show the full path for source files for srcline output.</p>

<p style="margin-top: 1em">--ns <br>
Use 9 decimal places when displaying time (i.e. show the
nanoseconds)</p>

<p style="margin-top: 1em">SEE ALSO <br>
perf-record(1), perf-script-perl(1),
perf-script-python(1)</p>

<p style="margin-top: 1em">perf 07/04/2017
PERF-SCRIPT(1)</p>
<hr>
</body>
</html>
