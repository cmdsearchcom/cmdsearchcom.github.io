<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:16:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>H2XS(1) Perl Programmers Reference Guide H2XS(1)</p>

<p style="margin-top: 1em">NAME <br>
h2xs - convert .h C header files to Perl extensions</p>

<p style="margin-top: 1em">SYNOPSIS <br>
h2xs [OPTIONS ...] [headerfile ... [extra_libraries]]</p>

<p style="margin-top: 1em">h2xs -h|-?|--help</p>

<p style="margin-top: 1em">DESCRIPTION <br>
h2xs builds a Perl extension from C header files. The
extension will include functions which can be used to
retrieve the value of any #define statement which was in the
C header <br>
files.</p>

<p style="margin-top: 1em">The module_name will be used for
the name of the extension. If module_name is not supplied
then the name of the first header file will be used, with
the first character <br>
capitalized.</p>

<p style="margin-top: 1em">If the extension might need
extra libraries, they should be included here. The extension
Makefile.PL will take care of checking whether the libraries
actually exist and how they <br>
should be loaded. The extra libraries should be specified in
the form -lm -lposix, etc, just as on the cc command line.
By default, the Makefile.PL will search through the <br>
library path determined by Configure. That path can be
augmented by including arguments of the form
-L/another/library/path in the extra-libraries argument.</p>

<p style="margin-top: 1em">In spite of its name, h2xs may
also be used to create a skeleton pure Perl module. See the
-X option.</p>

<p style="margin-top: 1em">OPTIONS <br>
-A, --omit-autoload <br>
Omit all autoload facilities. This is the same as -c but
also removes the &quot;use AutoLoader&quot; statement from
the .pm file.</p>

<p style="margin-top: 1em">-B, --beta-version <br>
Use an alpha/beta style version number. Causes version
number to be &quot;0.00_01&quot; unless -v is specified.</p>

<p style="margin-top: 1em">-C, --omit-changes <br>
Omits creation of the Changes file, and adds a HISTORY
section to the POD template.</p>

<p style="margin-top: 1em">-F, --cpp-flags=addflags <br>
Additional flags to specify to C preprocessor when scanning
header for function declarations. Writes these options in
the generated Makefile.PL too.</p>

<p style="margin-top: 1em">-M, --func-mask=regular
expression <br>
selects functions/macros to process.</p>

<p style="margin-top: 1em">-O, --overwrite-ok <br>
Allows a pre-existing extension directory to be
overwritten.</p>

<p style="margin-top: 1em">-P, --omit-pod <br>
Omit the autogenerated stub POD section.</p>

<p style="margin-top: 1em">-X, --omit-XS <br>
Omit the XS portion. Used to generate a skeleton pure Perl
module. &quot;-c&quot; and &quot;-f&quot; are implicitly
enabled.</p>

<p style="margin-top: 1em">-a, --gen-accessors <br>
Generate an accessor method for each element of structs and
unions. The generated methods are named after the element
name; will return the current value of the element if <br>
called without additional arguments; and will set the
element to the supplied value (and return the new value) if
called with an additional argument. Embedded structures and
<br>
unions are returned as a pointer rather than the complete
structure, to facilitate chained calls.</p>

<p style="margin-top: 1em">These methods all apply to the
Ptr type for the structure; additionally two methods are
constructed for the structure type itself,
&quot;_to_ptr&quot; which returns a Ptr type <br>
pointing to the same structure, and a &quot;new&quot; method
to construct and return a new structure, initialised to
zeroes.</p>

<p style="margin-top: 1em">-b, --compat-version=version
<br>
Generates a .pm file which is backwards compatible with the
specified perl version.</p>

<p style="margin-top: 1em">For versions &lt; 5.6.0, the
changes are. <br>
- no use of &rsquo;our&rsquo; (uses &rsquo;use vars&rsquo;
instead) <br>
- no &rsquo;use warnings&rsquo;</p>

<p style="margin-top: 1em">Specifying a compatibility
version higher than the version of perl you are using to run
h2xs will have no effect. If unspecified h2xs will default
to compatibility with the <br>
version of perl you are using to run h2xs.</p>

<p style="margin-top: 1em">-c, --omit-constant <br>
Omit &quot;constant()&quot; from the .xs file and
corresponding specialised &quot;AUTOLOAD&quot; from the .pm
file.</p>

<p style="margin-top: 1em">-d, --debugging <br>
Turn on debugging messages.</p>

<p style="margin-top: 1em">-e, --omit-enums=[regular
expression] <br>
If regular expression is not given, skip all constants that
are defined in a C enumeration. Otherwise skip only those
constants that are defined in an enum whose name <br>
matches regular expression.</p>

<p style="margin-top: 1em">Since regular expression is
optional, make sure that this switch is followed by at least
one other switch if you omit regular expression and have
some pending arguments such <br>
as header-file names. This is ok:</p>

<p style="margin-top: 1em">h2xs -e -n Module::Foo foo.h</p>

<p style="margin-top: 1em">This is not ok:</p>

<p style="margin-top: 1em">h2xs -n Module::Foo -e foo.h</p>

<p style="margin-top: 1em">In the latter, foo.h is taken as
regular expression.</p>

<p style="margin-top: 1em">-f, --force <br>
Allows an extension to be created for a header even if that
header is not found in standard include directories.</p>

<p style="margin-top: 1em">-g, --global <br>
Include code for safely storing static data in the .xs file.
Extensions that do no make use of static data can ignore
this option.</p>

<p style="margin-top: 1em">-h, -?, --help <br>
Print the usage, help and version for this h2xs and
exit.</p>

<p style="margin-top: 1em">-k, --omit-const-func <br>
For function arguments declared as &quot;const&quot;, omit
the const attribute in the generated XS code.</p>

<p style="margin-top: 1em">-m, --gen-tied-var <br>
Experimental: for each variable declared in the header
file(s), declare a perl variable of the same name magically
tied to the C variable.</p>

<p style="margin-top: 1em">-n, --name=module_name <br>
Specifies a name to be used for the extension, e.g., -n
RPC::DCE</p>

<p style="margin-top: 1em">-o, --opaque-re=regular
expression <br>
Use &quot;opaque&quot; data type for the C types matched by
the regular expression, even if these types are
&quot;typedef&quot;-equivalent to types from typemaps.
Should not be used without <br>
-x.</p>

<p style="margin-top: 1em">This may be useful since, say,
types which are &quot;typedef&quot;-equivalent to integers
may represent OS-related handles, and one may want to work
with these handles in OO-way, as <br>
in &quot;$handle-&gt;do_something()&quot;. Use &quot;-o
.&quot; if you want to handle all the &quot;typedef&quot;ed
types as opaque types.</p>

<p style="margin-top: 1em">The type-to-match is whitewashed
(except for commas, which have no whitespace before them,
and multiple &quot;*&quot; which have no whitespace between
them).</p>

<p style="margin-top: 1em">-p, --remove-prefix=prefix <br>
Specify a prefix which should be removed from the Perl
function names, e.g., -p sec_rgy_ This sets up the XS PREFIX
keyword and removes the prefix from functions that are <br>
autoloaded via the &quot;constant()&quot; mechanism.</p>

<p style="margin-top: 1em">-s, --const-subs=sub1,sub2 <br>
Create a perl subroutine for the specified macros rather
than autoload with the constant() subroutine. These macros
are assumed to have a return type of char *, e.g., <br>
-s sec_rgy_wildcard_name,sec_rgy_wildcard_sid.</p>

<p style="margin-top: 1em">-t, --default-type=type <br>
Specify the internal type that the constant() mechanism uses
for macros. The default is IV (signed integer). Currently
all macros found during the header scanning process <br>
will be assumed to have this type. Future versions of
&quot;h2xs&quot; may gain the ability to make educated
guesses.</p>

<p style="margin-top: 1em">--use-new-tests <br>
When --compat-version (-b) is present the generated tests
will use &quot;Test::More&quot; rather than &quot;Test&quot;
which is the default for versions before 5.6.2.
&quot;Test::More&quot; will be <br>
added to PREREQ_PM in the generated
&quot;Makefile.PL&quot;.</p>

<p style="margin-top: 1em">--use-old-tests <br>
Will force the generation of test code that uses the older
&quot;Test&quot; module.</p>

<p style="margin-top: 1em">--skip-exporter <br>
Do not use &quot;Exporter&quot; and/or export any
symbol.</p>

<p style="margin-top: 1em">--skip-ppport <br>
Do not use &quot;Devel::PPPort&quot;: no portability to
older version.</p>

<p style="margin-top: 1em">--skip-autoloader <br>
Do not use the module &quot;AutoLoader&quot;; but keep the
constant() function and &quot;sub AUTOLOAD&quot; for
constants.</p>

<p style="margin-top: 1em">--skip-strict <br>
Do not use the pragma &quot;strict&quot;.</p>

<p style="margin-top: 1em">--skip-warnings <br>
Do not use the pragma &quot;warnings&quot;.</p>

<p style="margin-top: 1em">-v, --version=version <br>
Specify a version number for this extension. This version
number is added to the templates. The default is 0.01, or
0.00_01 if &quot;-B&quot; is specified. The version
specified <br>
should be numeric.</p>

<p style="margin-top: 1em">-x, --autogen-xsubs <br>
Automatically generate XSUBs basing on function declarations
in the header file. The package &quot;C::Scan&quot; should
be installed. If this option is specified, the name of the
<br>
header file may look like &quot;NAME1,NAME2&quot;. In this
case NAME1 is used instead of the specified string, but
XSUBs are emitted only for the declarations included from
file <br>
NAME2.</p>

<p style="margin-top: 1em">Note that some types of
arguments/return-values for functions may result in
XSUB-declarations/typemap-entries which need hand-editing.
Such may be objects which cannot be <br>
converted from/to a pointer (like &quot;long long&quot;),
pointers to functions, or arrays. See also the section on
&quot;LIMITATIONS of -x&quot;.</p>

<p style="margin-top: 1em">EXAMPLES <br>
# Default behavior, extension is Rusers <br>
h2xs rpcsvc/rusers</p>

<p style="margin-top: 1em"># Same, but extension is RUSERS
<br>
h2xs -n RUSERS rpcsvc/rusers</p>

<p style="margin-top: 1em"># Extension is rpcsvc::rusers.
Still finds &lt;rpcsvc/rusers.h&gt; <br>
h2xs rpcsvc::rusers</p>

<p style="margin-top: 1em"># Extension is ONC::RPC. Still
finds &lt;rpcsvc/rusers.h&gt; <br>
h2xs -n ONC::RPC rpcsvc/rusers</p>

<p style="margin-top: 1em"># Without constant() or AUTOLOAD
<br>
h2xs -c rpcsvc/rusers</p>

<p style="margin-top: 1em"># Creates templates for an
extension named RPC <br>
h2xs -cfn RPC</p>

<p style="margin-top: 1em"># Extension is ONC::RPC. <br>
h2xs -cfn ONC::RPC</p>

<p style="margin-top: 1em"># Extension is a pure Perl
module with no XS code. <br>
h2xs -X My::Module</p>

<p style="margin-top: 1em"># Extension is Lib::Foo which
works at least with Perl5.005_03. <br>
# Constants are created for all #defines and enums h2xs can
find <br>
# in foo.h. <br>
h2xs -b 5.5.3 -n Lib::Foo foo.h</p>

<p style="margin-top: 1em"># Extension is Lib::Foo which
works at least with Perl5.005_03. <br>
# Constants are created for all #defines but only for enums
<br>
# whose names do not start with &rsquo;bar_&rsquo;. <br>
h2xs -b 5.5.3 -e &rsquo;^bar_&rsquo; -n Lib::Foo foo.h</p>

<p style="margin-top: 1em"># Makefile.PL will look for
library -lrpc in <br>
# additional directory /opt/net/lib <br>
h2xs rpcsvc/rusers -L/opt/net/lib -lrpc</p>

<p style="margin-top: 1em"># Extension is DCE::rgynbase
<br>
# prefix &quot;sec_rgy_&quot; is dropped from perl function
names <br>
h2xs -n DCE::rgynbase -p sec_rgy_ dce/rgynbase</p>

<p style="margin-top: 1em"># Extension is DCE::rgynbase
<br>
# prefix &quot;sec_rgy_&quot; is dropped from perl function
names <br>
# subroutines are created for sec_rgy_wildcard_name and <br>
# sec_rgy_wildcard_sid <br>
h2xs -n DCE::rgynbase -p sec_rgy_ -s
sec_rgy_wildcard_name,sec_rgy_wildcard_sid dce/rgynbase</p>

<p style="margin-top: 1em"># Make XS without defines in
perl.h, but with function declarations <br>
# visible from perl.h. Name of the extension is perl1. <br>
# When scanning perl.h, define -DEXT=extern -DdEXT=
-DINIT(x)= <br>
# Extra backslashes below because the string is passed to
shell. <br>
# Note that a directory with perl header files would <br>
# be added automatically to include path. <br>
h2xs -xAn perl1 -F &quot;-DEXT=extern -DdEXT= -DINIT=&quot;
perl.h</p>

<p style="margin-top: 1em"># Same with function declaration
in proto.h as visible from perl.h. <br>
h2xs -xAn perl2 perl.h,proto.h</p>

<p style="margin-top: 1em"># Same but select only functions
which match /^av_/ <br>
h2xs -M &rsquo;^av_&rsquo; -xAn perl2 perl.h,proto.h</p>

<p style="margin-top: 1em"># Same but treat SV* etc as
&quot;opaque&quot; types <br>
h2xs -o &rsquo;^[S]V &rsquo; -M &rsquo;^av_&rsquo; -xAn
perl2 perl.h,proto.h</p>

<p style="margin-top: 1em">Extension based on .h and .c
files <br>
Suppose that you have some C files implementing some
functionality, and the corresponding header files. How to
create an extension which makes this functionality
accessible in <br>
Perl? The example below assumes that the header files are
interface_simple.h and interface_hairy.h, and you want the
perl module be named as &quot;Ext::Ension&quot;. If you need
some <br>
preprocessor directives and/or linking with external
libraries, see the flags &quot;-F&quot;, &quot;-L&quot; and
&quot;-l&quot; in &quot;OPTIONS&quot;.</p>

<p style="margin-top: 1em">Find the directory name <br>
Start with a dummy run of h2xs:</p>

<p style="margin-top: 1em">h2xs -Afn Ext::Ension</p>

<p style="margin-top: 1em">The only purpose of this step is
to create the needed directories, and let you know the names
of these directories. From the output you can see that the
directory for the <br>
extension is Ext/Ension.</p>

<p style="margin-top: 1em">Copy C files <br>
Copy your header files and C files to this directory
Ext/Ension.</p>

<p style="margin-top: 1em">Create the extension <br>
Run h2xs, overwriting older autogenerated files:</p>

<p style="margin-top: 1em">h2xs -Oxan Ext::Ension
interface_simple.h interface_hairy.h</p>

<p style="margin-top: 1em">h2xs looks for header files
after changing to the extension directory, so it will find
your header files OK.</p>

<p style="margin-top: 1em">Archive and test <br>
As usual, run</p>

<p style="margin-top: 1em">cd Ext/Ension <br>
perl Makefile.PL <br>
make dist <br>
make <br>
make test</p>

<p style="margin-top: 1em">Hints <br>
It is important to do &quot;make dist&quot; as early as
possible. This way you can easily merge(1) your changes to
autogenerated files if you decide to edit your
&quot;.h&quot; files and rerun <br>
h2xs.</p>

<p style="margin-top: 1em">Do not forget to edit the
documentation in the generated .pm file.</p>

<p style="margin-top: 1em">Consider the autogenerated files
as skeletons only, you may invent better interfaces than
what h2xs could guess.</p>

<p style="margin-top: 1em">Consider this section as a
guideline only, some other options of h2xs may better suit
your needs.</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
No environment variables are used.</p>

<p style="margin-top: 1em">AUTHOR <br>
Larry Wall and others</p>

<p style="margin-top: 1em">SEE ALSO <br>
perl, perlxstut, ExtUtils::MakeMaker, and AutoLoader.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
The usual warnings if it cannot read or write the files
involved.</p>

<p style="margin-top: 1em">LIMITATIONS of -x <br>
h2xs would not distinguish whether an argument to a C
function which is of the form, say, &quot;int *&quot;, is an
input, output, or input/output parameter. In particular,
argument <br>
declarations of the form</p>

<p style="margin-top: 1em">int <br>
foo(n) <br>
int *n</p>

<p style="margin-top: 1em">should be better rewritten
as</p>

<p style="margin-top: 1em">int <br>
foo(n) <br>
int &amp;n</p>

<p style="margin-top: 1em">if &quot;n&quot; is an input
parameter.</p>

<p style="margin-top: 1em">Additionally, h2xs has no
facilities to intuit that a function</p>

<p style="margin-top: 1em">int <br>
foo(addr,l) <br>
char *addr <br>
int l</p>

<p style="margin-top: 1em">takes a pair of address and
length of data at this address, so it is better to rewrite
this function as</p>

<p style="margin-top: 1em">int <br>
foo(sv) <br>
SV *addr <br>
PREINIT: <br>
STRLEN len; <br>
char *s; <br>
CODE: <br>
s = SvPV(sv,len); <br>
RETVAL = foo(s, len); <br>
OUTPUT: <br>
RETVAL</p>

<p style="margin-top: 1em">or alternately</p>

<p style="margin-top: 1em">static int <br>
my_foo(SV *sv) <br>
{ <br>
STRLEN len; <br>
char *s = SvPV(sv,len);</p>

<p style="margin-top: 1em">return foo(s, len); <br>
}</p>

<p style="margin-top: 1em">MODULE = foo PACKAGE = foo
PREFIX = my_</p>

<p style="margin-top: 1em">int <br>
foo(sv) <br>
SV *sv</p>

<p style="margin-top: 1em">See perlxs and perlxstut for
additional details.</p>

<p style="margin-top: 1em">perl v5.16.3 2016-11-06
H2XS(1)</p>
<hr>
</body>
</html>
