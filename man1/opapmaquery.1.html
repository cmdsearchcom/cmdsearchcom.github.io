<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>opapmaquery(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">opapmaquery(1)</td>
    <td class="head-vol">Master map: IFSFFCLIRG (Man Page)</td>
    <td class="head-rtitle">opapmaquery(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
opapmaquery
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>(All)</b> Performs individual PMA queries against a specific LID. It is very
  useful in displaying port runtime information.
<h1 class="Sh" title="Sh" id="Syntax"><a class="selflink" href="#Syntax">Syntax</a></h1>
opapmaquery [-v] [-s <i>sl</i>] [-l <i>lid</i>] [-h <i>hfi</i>] [-p <i>port</i>]
  [-o <i>otype</i>]
<div>&#x00A0;</div>
[-m <i>port</i>] [-n <i>mask</i>] [-e <i>mask</i>] [-w <i>mask</i>]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">-v</dt>
  <dd class="It-tag">Verbose output. Can be specified more than once for
      additional openib debugging and libibumad debugging.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-s <i>sl</i></dt>
  <dd class="It-tag">Specifies different service level. Default is 0.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-l <i>lid</i></dt>
  <dd class="It-tag">Destination LID. Default is local port.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>hfi</i></dt>
  <dd class="It-tag">HFI, numbered 1..n. Using 0 specifies that the -p
      <i>port</i> port is a system-wide port number. Default is 0.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-p <i>port</i></dt>
  <dd class="It-tag">Port, numbered 1..n. If -h <i>hfi</i> is 0, then
      <i>port</i> is a system-wide port number. Default is first active port.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-o <i>otype</i></dt>
  <dd class="It-tag">Output type. Default is getportstatus.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Valid output types are:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
classportinfo List of port info records.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
getportstatus List of port status records.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-m port] [-w vl mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
clearportstatus Clears the port status.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-n port mask] [-e counter mask] [-w vl mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
getdatacounters List of data counters.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-n port mask] [-w vl mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
geterrorcounters List of error counters.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-n port mask] [-w vl mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
geterrorinfo List of error info.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-n port mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
clearerrorinfo Clears the error info.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[-n port mask] [-e counter mask]</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h and -p options permit a variety of
    selections:</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h 0</dt>
  <dd class="It-tag">First active port in system (default).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h 0 -p 0</dt>
  <dd class="It-tag">First active port in system.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>x</i></dt>
  <dd class="It-tag">First active port on HFI <i>x</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>x</i>#8217#160;-p 0</dt>
  <dd class="It-tag">First active port on HFI <i>x</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h 0 -p <i>y</i></dt>
  <dd class="It-tag">Port <i>y</i>#8217#160;within system (no matter which ports
      are active).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-h <i>x</i>#8217#160;-p <i>y</i></dt>
  <dd class="It-tag">HFI <i>x</i>, port <i>y</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>otype options vary by report</b></dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-m <i>port</i></dt>
  <dd class="It-tag">Port in destination device to query/clear. Required when
      using -l option for all but -o classportinfo.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-n <i>mask</i></dt>
  <dd class="It-tag">Port mask, in hexadecimal. Bits represent ports 63-0. For
      example: 0x2 for port 1, 0x6 for ports 1, 2.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e <i>mask</i></dt>
  <dd class="It-tag">Counter/error select mask, in hexadecimal. The following
      lists &quot;Mask - Bit - Location for Counters&quot;. Where applicable,
      location &quot;for Error Info&quot; is presented. The default is all bits
      set (0xffffffe0).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x80000000 - 31 - Transmit Data For Error Info: Receive
      Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x40000000 - 30 - Receive Data For Error Info: Excessive
      Buffer Overrun
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x20000000 - 29 - Transmit Packets For Error Info: Transmit
      Const Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x10000000 - 28 - Receive Packets For Error Info: Receive
      Const Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x08000000 - 27 - Multicast Transmit Packets For Error
      Info: Receive Switch Relay Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x04000000 - 26 - Multicast Receive Packets For Error Info:
      Uncorrectable Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x02000000 - 25 - Transmit Wait For Error Info: FM
      Configuration Error Info
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x01000000 - 24 - Congestion Discards
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00800000 - 23 - Receive FECN
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00400000 - 22 - Receive BECN
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00200000 - 21 - Transmit Time Cong.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00100000 - 20 - Transmit Time Wasted BW
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00080000 - 19 - Transmit Time Wait Data
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00040000 - 18 - Receive Bubble
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00020000 - 17 - Mark FECN
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00010000 - 16 - Receive Constraint Errors
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00008000 - 15 - Receive Switch Relay
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00004000 - 14 - Transmit Discards
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00002000 - 13 - Transmit Constraint Errors
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00001000 - 12 - Receive Remote Physical Errors
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000800 - 11 - Local Link Integrity
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000400 - 10 - Receive Errors
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000200 - 9 - Exc. Buffer Overrun
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000100 - 8 - FM Configuration Errors
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000080 - 7 - Link Error Recovery
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000040 - 6 - Link Error Downed
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">0x00000020 - 5 - Uncorrectable Errors
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">-w <i>mask</i></dt>
  <dd class="It-tag">Virtual Lane Select Mask, in hexadecimal. Bits represent VL
      number 31-0. For example, 0x1 for VL 0, 0x3 for VL 0,1. Default is none.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
opapmaquery -o classportinfo
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o getportstatus
<div>&#x00A0;</div>
# get data and error counts, local port
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o getdatacounters -n 0x2
<div>&#x00A0;</div>
# get data counts, local port 1
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o geterrorcounters -n 0x2
<div>&#x00A0;</div>
# get error counts, local port 1
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o clearportstatus -n 0x2
<div>&#x00A0;</div>
# clear all counters local port 1
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o geterrorinfo -n 0x2
<div>&#x00A0;</div>
# get error info for local port 1
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o clearerrorinfo -n 0x2
<div>&#x00A0;</div>
# clear all error info, local port 1
<div class="Pp"></div>
<b>Additional Examples</b>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o getdatacounters -l 6 -n 0x7e -w 0x1
<div>&#x00A0;</div>
# for device at LID 6, get data counters on ports 1-6, inclusive of VL 0 data
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o clearportstatus -l 6 -n 0x2 -e 0x1ffff
<div>&#x00A0;</div>
# for device at LID 6, on port 1, clear only error counters
<div>&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div>&#x00A0;</div>
opapmaquery -o clearerrorinfo -l 6 -n 0x2 -e 0x04000000
<div>&#x00A0;</div>
# for device at LID 6, on ports 1, clear uncorrectable error info</div>
<table class="foot">
  <tr>
    <td class="foot-date">Intel Corporation</td>
    <td class="foot-os">Copyright(C) 2015-2016</td>
  </tr>
</table>
</body>
</html>
