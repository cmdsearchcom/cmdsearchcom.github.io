<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:28:33 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opapmaquery(1) Master map:
IFSFFCLIRG (Man Page) opapmaquery(1)</p>

<p style="margin-top: 1em">NAME <br>
opapmaquery</p>

<p style="margin-top: 1em">(All) Performs individual PMA
queries against a specific LID. It is very useful in
displaying port runtime information.</p>

<p style="margin-top: 1em">Syntax <br>
opapmaquery [-v] [-s sl] [-l lid] [-h hfi] [-p port] [-o
otype] <br>
[-m port] [-n mask] [-e mask] [-w mask]</p>

<p style="margin-top: 1em">Options <br>
-v Verbose output. Can be specified more than once for
additional openib debugging and libibumad debugging.</p>

<p style="margin-top: 1em">-s sl Specifies different
service level. Default is 0.</p>

<p style="margin-top: 1em">-l lid Destination LID. Default
is local port.</p>

<p style="margin-top: 1em">-h hfi HFI, numbered 1..n. Using
0 specifies that the -p port port is a system-wide port
number. Default is 0.</p>

<p style="margin-top: 1em">-p port Port, numbered 1..n. If
-h hfi is 0, then port is a system-wide port number. Default
is first active port.</p>

<p style="margin-top: 1em">-o otype Output type. Default is
getportstatus.</p>

<p style="margin-top: 1em">Valid output types are:</p>

<p style="margin-top: 1em">classportinfo <br>
List of port info records.</p>

<p style="margin-top: 1em">getportstatus <br>
List of port status records.</p>

<p style="margin-top: 1em">[-m port] [-w vl mask]</p>

<p style="margin-top: 1em">clearportstatus <br>
Clears the port status.</p>

<p style="margin-top: 1em">[-n port mask] [-e counter mask]
[-w vl mask]</p>

<p style="margin-top: 1em">getdatacounters <br>
List of data counters.</p>

<p style="margin-top: 1em">[-n port mask] [-w vl mask]</p>

<p style="margin-top: 1em">geterrorcounters <br>
List of error counters.</p>

<p style="margin-top: 1em">[-n port mask] [-w vl mask]</p>

<p style="margin-top: 1em">geterrorinfo <br>
List of error info.</p>

<p style="margin-top: 1em">[-n port mask]</p>

<p style="margin-top: 1em">clearerrorinfo <br>
Clears the error info.</p>

<p style="margin-top: 1em">[-n port mask] [-e counter
mask]</p>

<p style="margin-top: 1em">-h and -p options permit a
variety of selections:</p>

<p style="margin-top: 1em">-h 0 First active port in system
(default).</p>

<p style="margin-top: 1em">-h 0 -p 0 First active port in
system.</p>

<p style="margin-top: 1em">-h x First active port on HFI
x.</p>

<p style="margin-top: 1em">-h x#8217#160;-p 0 <br>
First active port on HFI x.</p>

<p style="margin-top: 1em">-h 0 -p y Port y#8217#160;within
system (no matter which ports are active).</p>

<p style="margin-top: 1em">-h x#8217#160;-p y <br>
HFI x, port y.</p>

<p style="margin-top: 1em">otype options vary by report</p>

<p style="margin-top: 1em">-m port Port in destination
device to query/clear. Required when using -l option for all
but -o classportinfo.</p>

<p style="margin-top: 1em">-n mask Port mask, in
hexadecimal. Bits represent ports 63-0. For example: 0x2 for
port 1, 0x6 for ports 1, 2.</p>

<p style="margin-top: 1em">-e mask Counter/error select
mask, in hexadecimal. The following lists &quot;Mask - Bit -
Location for Counters&quot;. Where applicable, location
&quot;for Error Info&quot; is presented. The <br>
default is all bits set (0xffffffe0).</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x80000000 - 31
- Transmit Data For Error Info: Receive Error Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x40000000 - 30
- Receive Data For Error Info: Excessive Buffer Overrun</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x20000000 - 29
- Transmit Packets For Error Info: Transmit Const Error
Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x10000000 - 28
- Receive Packets For Error Info: Receive Const Error
Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x08000000 - 27
- Multicast Transmit Packets For Error Info: Receive Switch
Relay Error Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x04000000 - 26
- Multicast Receive Packets For Error Info: Uncorrectable
Error Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x02000000 - 25
- Transmit Wait For Error Info: FM Configuration Error
Info</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x01000000 - 24
- Congestion Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00800000 - 23
- Receive FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00400000 - 22
- Receive BECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00200000 - 21
- Transmit Time Cong.</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00100000 - 20
- Transmit Time Wasted BW</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00080000 - 19
- Transmit Time Wait Data</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00040000 - 18
- Receive Bubble</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00020000 - 17
- Mark FECN</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00010000 - 16
- Receive Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00008000 - 15
- Receive Switch Relay</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00004000 - 14
- Transmit Discards</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00002000 - 13
- Transmit Constraint Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00001000 - 12
- Receive Remote Physical Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000800 - 11
- Local Link Integrity</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000400 - 10
- Receive Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000200 - 9 -
Exc. Buffer Overrun</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000100 - 8 -
FM Configuration Errors</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000080 - 7 -
Link Error Recovery</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000040 - 6 -
Link Error Downed</p>

<p style="margin-top: 1em">&Acirc;&middot; 0x00000020 - 5 -
Uncorrectable Errors</p>

<p style="margin-top: 1em">-w mask Virtual Lane Select
Mask, in hexadecimal. Bits represent VL number 31-0. For
example, 0x1 for VL 0, 0x3 for VL 0,1. Default is none.</p>

<p style="margin-top: 1em">Examples <br>
opapmaquery -o classportinfo</p>

<p style="margin-top: 1em">opapmaquery -o getportstatus
<br>
# get data and error counts, local port</p>

<p style="margin-top: 1em">opapmaquery -o getdatacounters
-n 0x2 <br>
# get data counts, local port 1</p>

<p style="margin-top: 1em">opapmaquery -o geterrorcounters
-n 0x2 <br>
# get error counts, local port 1</p>

<p style="margin-top: 1em">opapmaquery -o clearportstatus
-n 0x2 <br>
# clear all counters local port 1</p>

<p style="margin-top: 1em">opapmaquery -o geterrorinfo -n
0x2 <br>
# get error info for local port 1</p>

<p style="margin-top: 1em">opapmaquery -o clearerrorinfo -n
0x2 <br>
# clear all error info, local port 1</p>

<p style="margin-top: 1em">Additional Examples</p>

<p style="margin-top: 1em">opapmaquery -o getdatacounters
-l 6 -n 0x7e -w 0x1 <br>
# for device at LID 6, get data counters on ports 1-6,
inclusive of VL 0 data</p>

<p style="margin-top: 1em">opapmaquery -o clearportstatus
-l 6 -n 0x2 -e 0x1ffff <br>
# for device at LID 6, on port 1, clear only error
counters</p>

<p style="margin-top: 1em">opapmaquery -o clearerrorinfo -l
6 -n 0x2 -e 0x04000000 <br>
# for device at LID 6, on ports 1, clear uncorrectable error
info</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opapmaquery(1)</p>
<hr>
</body>
</html>
