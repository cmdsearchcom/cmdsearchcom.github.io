<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:17:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>IBDIAGPATH(1) IB DIAGNOSTIC PACKAGE IBDIAGPATH(1)</p>

<p style="margin-top: 1em">NAME <br>
ibdiagpath - IB diagnostic path</p>

<p style="margin-top: 1em">SYNOPSYS <br>
ibdiagpath <br>
{-n &lt;[src-name,]dst-name&gt;|-l
&lt;[src-lid,]dst-lid&gt;|-d &lt;p1,p2,p3,...&gt;} <br>
[-c &lt;count&gt;] [-v] [-t &lt;topo-file&gt;] [-s
&lt;sys-name&gt;] [-i &lt;dev-index&gt;] <br>
[-p &lt;port-num&gt;] [-o &lt;out-dir&gt;] [-lw
&lt;1x|4x|12x&gt;] [-ls &lt;2.5|5|10&gt;] [-pm] <br>
[-pc] [-P &lt;&lt;PM counter&gt;=&lt;Trash
Limit&gt;&gt;]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
ibdiagpath traces a path between two end-points and provides
information regarding the nodes and ports traversed along
the path. It utilizes device specific health queries for
<br>
the different devices along the traversed path. The way
ibdiagpath operates depends on the addressing mode used on
the command line. If directed route adressing is used, the
<br>
local node is the source node and the route to the
destination port is known apriori. On the other hand, if LID
route (or by-name) addressing is imployed, then the source
and <br>
destination ports of a route are specified by their LIDs (or
by the names defined in the topology file). In this case,
the actual path from the local port to the source port, and
<br>
from the source port to the destination port, is defined by
means of Subnet Management Linear Forwarding Table queries
of the switch nodes along those paths. Therefore, the path
<br>
cannot be predicted as it may change. The tool allows
omitting the source node, in which case the local port on
the machine running the tool is assumed to be the source.
Note: <br>
When ibdiagpath queries for the performance counters along
the path between the source and destination ports, it always
traverses the LID route, even if a directed route is <br>
specified. If along the LID route one or more links are not
in the ACTIVE state, ibdiagpath reports an error. Checks for
path validity from partitions, IPoIB and QoS <br>
perspectives are also provided.</p>

<p style="margin-top: 1em">ibdiagpath.log - <br>
A dump of all the application reports generate according to
the provided flags</p>

<p style="margin-top: 1em">ibdiagnet.pm - <br>
A dump of the pm Counters values, of the fabric links</p>

<p style="margin-top: 1em">OPTIONS <br>
-n &lt;[src-name,]dst-name&gt; : <br>
Names of the source and destination ports (as defined in the
topology file; source may be omitted -&gt; local port is
assumed to be the source) <br>
-l &lt;[src-lid,]dst-lid&gt; : <br>
Source and destination LIDs (source may be omitted -&gt;
local port is assumed to be the source) <br>
-d &lt;p1,p2,p3,...&gt; : <br>
directed route from the local node (which is the source) and
the destination node <br>
-c &lt;count&gt; : <br>
The minimal number of packets to be sent across each link
(default = 100) <br>
-v : <br>
Enable verbose mode <br>
-t &lt;topo-file&gt; : <br>
Specifies the topology file name <br>
-s &lt;sys-name&gt; : <br>
Specifies the local system name. Meaningful only if a
topology file is specified <br>
-i &lt;dev-index&gt; : <br>
Specifies the index of the device of the port used to
connect to the IB fabric (in case of multiple devices on the
local system) <br>
-p &lt;port-num&gt; : <br>
Specifies the local device&rsquo;s port number used to
connect to the IB fabric <br>
-o &lt;out-dir&gt; : <br>
Specifies the directory where the output files will be
placed (default = /var/cache/ibutils) <br>
-lw &lt;1x|4x|12x&gt; : <br>
Specifies the expected link width <br>
-ls &lt;2.5|5|10&gt; : <br>
Specifies the expected link speed <br>
-pm : <br>
Dump all the fabric links, pm Counters into ibdiagnet.pm
<br>
-pc : <br>
Reset all the fabric links pmCounters <br>
-P &lt;PM=&lt;Trash&gt;&gt; : <br>
If any of the provided pm is greater then its provided
value, print it to screen <br>
-h|--help : <br>
Prints the help page information <br>
-V|--version : <br>
Prints the version of the tool <br>
--vars : <br>
Prints the tool&rsquo;s environment variables and their
values</p>

<p style="margin-top: 1em">ERROR CODES <br>
1 - The path traced is un-healthy <br>
2 - Failed to parse command line options <br>
3 - More then 64 hops are required for traversing the local
port to the &quot;Source&quot; port and then to the
&quot;Destination&quot; port. <br>
4 - Unable to traverse the LFT data from source to
destination <br>
5 - Failed to use Topology File <br>
6 - Failed to load required Package</p>

<p style="margin-top: 1em">IBDIAG 1.0 2016-11-07
IBDIAGPATH(1)</p>
<hr>
</body>
</html>
