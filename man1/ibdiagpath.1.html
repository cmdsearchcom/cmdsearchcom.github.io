<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>IBDIAGPATH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IBDIAGPATH(1)</td>
    <td class="head-vol">IB DIAGNOSTIC PACKAGE</td>
    <td class="head-rtitle">IBDIAGPATH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
ibdiagpath - IB diagnostic path
<h1 class="Sh" title="Sh" id="SYNOPSYS"><a class="selflink" href="#SYNOPSYS">SYNOPSYS</a></h1>
ibdiagpath
<br/>
 {-n &lt;[src-name,]dst-name&gt;|-l &lt;[src-lid,]dst-lid&gt;|-d
  &lt;p1,p2,p3,...&gt;}
<br/>
 [-c &lt;count&gt;] [-v] [-t &lt;topo-file&gt;] [-s &lt;sys-name&gt;] [-i
  &lt;dev-index&gt;]
<br/>
 [-p &lt;port-num&gt;] [-o &lt;out-dir&gt;] [-lw &lt;1x|4x|12x&gt;] [-ls
  &lt;2.5|5|10&gt;] [-pm]
<br/>
 [-pc] [-P &lt;&lt;PM counter&gt;=&lt;Trash Limit&gt;&gt;]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
ibdiagpath traces a path between two end-points and provides information
  regarding the nodes and ports traversed along the path. It utilizes device
  specific health queries for the different devices along the traversed path.
  The way ibdiagpath operates depends on the addressing mode used on the command
  line. If directed route adressing is used, the local node is the source node
  and the route to the destination port is known apriori. On the other hand, if
  LID route (or by-name) addressing is imployed, then the source and destination
  ports of a route are specified by their LIDs (or by the names defined in the
  topology file). In this case, the actual path from the local port to the
  source port, and from the source port to the destination port, is defined by
  means of Subnet Management Linear Forwarding Table queries of the switch nodes
  along those paths. Therefore, the path cannot be predicted as it may change.
  The tool allows omitting the source node, in which case the local port on the
  machine running the tool is assumed to be the source. Note: When ibdiagpath
  queries for the performance counters along the path between the source and
  destination ports, it always traverses the LID route, even if a directed route
  is specified. If along the LID route one or more links are not in the ACTIVE
  state, ibdiagpath reports an error. Checks for path validity from partitions,
  IPoIB and QoS perspectives are also provided.
<dl class="Bl-tag">
  <dt class="It-tag"><i>ibdiagpath.log</i> -</dt>
  <dd class="It-tag">A dump of all the application reports generate according to
      the provided flags</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>ibdiagnet.pm</i> -</dt>
  <dd class="It-tag">A dump of the pm Counters values, of the fabric links</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n &lt;[src-name,]dst-name</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Names of the source and destination ports (as defined in
    the topology file; source may be omitted -&gt; local port is assumed to be
    the source)</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l &lt;[src-lid,]dst-lid</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Source and destination LIDs (source may be omitted -&gt;
    local port is assumed to be the source)</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d &lt;p1,p2,p3,...</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> directed route from the local node (which is the source)
    and the destination node</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c &lt;count</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> The minimal number of packets to be sent across each link
    (default = 100)</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Enable verbose mode</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t &lt;topo-file</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the topology file name</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s &lt;sys-name</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the local system name. Meaningful only if a
    topology file is specified</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i &lt;dev-index</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the index of the device of the port used to
    connect to the IB fabric (in case of multiple devices on the local
    system)</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p &lt;port-num</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the local device's port number used to connect
    to the IB fabric</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o &lt;out-dir</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the directory where the output files will be
    placed (default = /var/cache/ibutils)</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-lw &lt;1x|4x|12x</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the expected link width</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ls &lt;2.5|5|10</b>&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Specifies the expected link speed</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pm</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Dump all the fabric links, pm Counters into
    ibdiagnet.pm</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pc</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Reset all the fabric links pmCounters</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b> &lt;PM=&lt;Trash&gt;&gt; :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> If any of the provided pm is greater then its provided
    value, print it to screen</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h|--help</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Prints the help page information</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V|--version</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Prints the version of the tool</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--vars</b> :</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"> Prints the tool's environment variables and their
    values</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<h1 class="Sh" title="Sh" id="ERROR_CODES"><a class="selflink" href="#ERROR_CODES">ERROR
  CODES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">1 - The path traced is un-healthy</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2 - Failed to parse command line options</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3 - More then 64 hops are required for traversing the local
    port to the &quot;Source&quot; port and then to the &quot;Destination&quot;
    port.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4 - Unable to traverse the LFT data from source to
    destination</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">5 - Failed to use Topology File</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">6 - Failed to load required Package</dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-11-07</td>
    <td class="foot-os">IBDIAG 1.0</td>
  </tr>
</table>
</body>
</html>
