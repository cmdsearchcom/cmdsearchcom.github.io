<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:31 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SWATCH(1) User Contributed Perl Documentation
SWATCH(1)</p>

<p style="margin-top: 1em">NAME <br>
swatch - simple watcher</p>

<p style="margin-top: 1em">SYNOPSIS <br>
swatch [ --awk-field-syntax ] [ --config-file|-c file ] [
--daemon ] [ --extra-include-dir|-I path ] [
--extra-module|-M module_name ] [ --help|-h ] [
--input-record-separator <br>
regex ] [ --old-style-config|-O ] [ --pid-file file ] [
--restart-time|-r time ] [ --script-dir path ] [ --tail-args
arguments_for_tail_program ] [ --tail-program-name filename
] <br>
[ --version|-V ] [ --use-cpan-file-tail ] [ [ --examine|-f
file_to_examine ] | [ --read-pipe|-p program_to_pipe_from ]
| [ --tail-file|-t file_to_tail ] ] [ --debug [ level ] ] [
<br>
--dump-script filename ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Swatch is designed to monitor system activity. In order for
Swatch to be useful, it requires a configuration file which
contains pattern(s) to look for and action(s) to perform
<br>
when each pattern is found.</p>

<p style="margin-top: 1em">COMMAND LINE OPTIONS <br>
--awk-field-syntax <br>
Use this option only if you want to overide regular
expression backreferencing in favor of awk(1) style field
referencing. Included for backward compatability.</p>

<p style="margin-top: 1em">--config-file|-c filename <br>
Tells swatch where to find its configuration file. The
default is ${HOME}/.swatchrc.</p>

<p style="margin-top: 1em">--daemon <br>
This tells swatch to run in the background and disassociate
itself from any terminal.</p>

<p style="margin-top: 1em">--extra-include-dir|-I path <br>
This tells swatch where to look for custom action
modules.</p>

<p style="margin-top: 1em">--extra-module|-M module_name
<br>
This tells swatch what custom action modules to load in.</p>

<p style="margin-top: 1em">--help|-h <br>
Prints usage information and exits.</p>


<p style="margin-top: 1em">--input-record-separator=regular_expression
<br>
Tells swatch to use regular_expression to delineate the
boundary of each input record. The default is a carriage
return.</p>

<p style="margin-top: 1em">--old-style-config|-O <br>
This tells swatch that your configuration file is written
using the syntax that was abandoned back in the
1990&rsquo;s.</p>

<p style="margin-top: 1em">--pid-file file <br>
Writes the process ID to file. Useful when running in daemon
mode.</p>

<p style="margin-top: 1em">--restart-time=[+]hh:mm[am|pm]
or -r [+]hh:mm[am|pm] <br>
Restart at the specified time where hh is hours and mm is
minutes. If the am/pm indicator is omitted, then a 24-hour
clock is assumed. If the time is preceded by the
&quot;+&quot; <br>
character, then the restart time will be set to the current
time plus the specified time and the am/pm indicator will be
ignored.</p>

<p style="margin-top: 1em">--script-dir=/path/to/directory
<br>
This switch causes the temporary watcher script to be
written to a file in the specified directory rather than the
user&rsquo;s home directory. It is highly advised that you
do NOT <br>
use directories that are writable by others such as
/tmp.</p>

<p style="margin-top: 1em">--tail-args
arguments_for_tail_program <br>
Pass specific options to the tail(1) program.</p>

<p style="margin-top: 1em">--tail-program-name filename
<br>
Runs an alternate tail(1) like program instead of the system
default.</p>

<p style="margin-top: 1em">--version or -V <br>
Prints version information and exits.</p>

<p style="margin-top: 1em">--use-cpan-file-tail <br>
Use CPAN&rsquo;s File::Tail module to read the log file
instead of the tail(1) command.</p>

<p style="margin-top: 1em">You may specify only one of the
following options:</p>

<p style="margin-top: 1em">--tail-file=filename or -t
filename <br>
Examine lines of text as they are added to filename.</p>

<p style="margin-top: 1em">--read-pipe=command or -p
command <br>
Examine input piped in from the command.</p>

<p style="margin-top: 1em">--examine=filename or -f
filename <br>
Use filename as the file to examine. Swatch will do a single
pass through the named file.</p>

<p style="margin-top: 1em">The following options are purely
for debugging purposes, but are documented here for
completeness:</p>

<p style="margin-top: 1em">--debug[=level] <br>
Spew out various levels of debugging for swatch
developers.</p>

<p style="margin-top: 1em">--dump-script[=filename] <br>
Instead of running the watcher script after it is generated,
it is written to filename or to STDOUT.</p>

<p style="margin-top: 1em">If swatch is called with no
options, it is the same as typing the command line</p>

<p style="margin-top: 1em">swatch --config-file=~/.swatchrc
--tail-file=/var/log/syslog</p>

<p style="margin-top: 1em">or if /var/log/messages
exists</p>

<p style="margin-top: 1em">swatch --config-file=~/.swatchrc
--tail-file=/var/log/messages</p>

<p style="margin-top: 1em">THE CONFIGURATION FILE <br>
The configuration file is used by the swatch(8) program to
determine what types of expression patterns to look for and
what type of action(s) should be taken when a pattern is
<br>
matched.</p>

<p style="margin-top: 1em">Each line should contain a
keyword and a, sometimes optional, value for that keyword.
The keyword and value are separated by a space or an equal
(=) sign.</p>

<p style="margin-top: 1em">watchfor regex</p>

<p style="margin-top: 1em">ignore regex</p>

<p style="margin-top: 1em">echo [modes] <br>
Echo the matched line. The text mode may be normal, bold,
underscore, blink, inverse, black, red, green, yellow, blue,
magenta, cyan, white, black_h, red_h, green_h, <br>
yellow_h, blue_h, magenta_h, cyan_h, and/or white_h. The _h
colors specify a highlighting color. The other colors are
assigned to the letters. Some modes may not work on <br>
some terminals. Normal is the default.</p>

<p style="margin-top: 1em">bell [N] <br>
Echo the matched line, and send a bell N times (default =
1).</p>

<p style="margin-top: 1em">exec command <br>
Execute command. The command may contain variables which are
substituted with fields from the matched line. A $N will be
replaced by the Nth field in the line. A $0 or $* <br>
will be replaced by the entire line.</p>

<p style="margin-top: 1em">mail
[addresses=address:address:...][,subject=your_text_here]
<br>
Send mail to address(es) containing the matched lines as
they appear (default address is the user who is running the
program).</p>

<p style="margin-top: 1em">pipe command[,keep_open] <br>
Pipe matched lines into command. Use the keep_open option to
force the pipe to stay open until a different pipe action is
run or until swatch exits.</p>

<p style="margin-top: 1em">write [user:user:...] <br>
Use write(1) to send matched lines to user(s).</p>

<p style="margin-top: 1em">throttle
hours:minutes:seconds,[key=message|regex|&lt;regexE]&gt;
<br>
This action has been depreciated. Use threshold instead For
example,</p>

<p style="margin-top: 1em">throttle
15:00,key=&quot;foo&quot;</p>

<p style="margin-top: 1em">would look like this</p>

<p style="margin-top: 1em">threshold
track_by=&quot;foo&quot;,type=limit,count=1,seconds=900</p>

<p style="margin-top: 1em">threshold track_by=key,
type=&lt;limit|threshold|both, count=number,
seconds=number&gt; <br>
Thresholding can be done for the complete watchfor block
and/or for individual actions. Add &quot;threshold=on&quot;
as an option along with the other threshold options when
<br>
thresholding an individual action.</p>

<p style="margin-top: 1em">track_by <br>
The value of this should be something that is unique to the
watchfor regular expression. Tip: enclose unique parts of
the regular expression in parentheses, then use the <br>
sub matches as part of the value (e.g.
track_by=&quot;$2:$4&quot;).</p>

<p style="margin-top: 1em">type <br>
There are three types of thresholding. They are as
follows:</p>

<p style="margin-top: 1em">limit <br>
Perform action(s) for the first &quot;count&quot; matches
during the time interval specified by &quot;seconds&quot;,
then ignore events for the rest of the time interval (kind
of like <br>
throttle)</p>

<p style="margin-top: 1em">threshold <br>
Perform action(s) on each match for up to count matches
during the time interval specified by seconds</p>

<p style="margin-top: 1em">both <br>
Perform actions(s) once per time interval after
&quot;count&quot; matches occur, then ignore additional
matches during the time interval specified by
&quot;seconds&quot;</p>

<p style="margin-top: 1em">continue <br>
Use this action to cause swatch to continue to try to match
other pattern/action groups after it is done with the
current pattern/action block.</p>

<p style="margin-top: 1em">quit <br>
Use this action to cause swatch to clean up and quit
immediately.</p>

<p style="margin-top: 1em">SPECIAL OPTION <br>
The following may be used as an option for any of the above
actions except for throttle and threshold.</p>

<p style="margin-top: 1em">when=day_of_week:hour_of_day
<br>
Use this option to specify windows of time and days when the
action can be performed. For example:</p>


<p style="margin-top: 1em">mail=sysad-pager@somehost.somedomain,when=1-6:8-17</p>

<p style="margin-top: 1em">FOR PERL HACKS ONLY <br>
perlcode [depth] arbitrary_Perl_code <br>
This permits you to easily insert random Perl code into your
swatchrc file. The optional depth value tells swatch how
deep into the code to put the perl code. (0=outside the <br>
main loop, 1=inside the main loop (default), 2=just inside
the conditional used by the current watchfor statement, and
3=inside the throttle block).</p>

<p style="margin-top: 1em">Its intended use is to permit
variable substitution. For example:</p>

<p style="margin-top: 1em">perlcode
$syslog=&quot;^481,2}{2}:{2}:{2}.*&quot;;</p>

<p style="margin-top: 1em">watchfor /$syslog hostname
pppd/&gt;</p>

<p style="margin-top: 1em">but any valid Perl is permitted.
Remember the semicolon, and make judicious use of the
--dump-script option if you run into trouble.</p>

<p style="margin-top: 1em">CONFIGURATION EXAMPLE <br>
perlcode my $fsf_regex = &rsquo;{2}:{2}:{2}* file system
full)&rsquo;;</p>

<p style="margin-top: 1em">watchfor /$fsf_regex/ <br>
threshold track_by=$1,type=limit,count=1,seconds=60 <br>
echo <br>
bell</p>

<p style="margin-top: 1em">In this example, a line which
contains the string &quot;file system full&quot; will be
echoed and the screen bell will sound. Also, threshold will
use what is matched within the <br>
parentheses as its key rather than trying to use the log
message with its time stamp cut out. Multiple instances of
the message will not be echoed if they appear within a
minute <br>
of the first one. Instead the following message will be
acted upon after the time interval has expired.</p>

<p style="margin-top: 1em">SEE ALSO <br>
signal(3), perl(1), perlre(1)</p>

<p style="margin-top: 1em">NOTES <br>
Upon receiving an ALRM or HUP signal swatch will re-read the
configuration file and restart, except when used with the
--daemon command line option where it will simply exit. <br>
Swatch will terminate gracefully when it receives a QUIT,
TERM, or INT signal.</p>

<p style="margin-top: 1em">AUTHOR <br>
E. Todd Atkins <br>
Todd.Atkins@StanfordAlumni.ORG</p>

<p style="margin-top: 1em">AVAILABILITY <br>
Swatch is a SourceForge project whose project page is at
http://sourceforge.net/projects/swatch and homepage is at
http://swatch.sourceforge.net</p>

<p style="margin-top: 1em">perl v5.24.1 2017-02-12
SWATCH(1)</p>
<hr>
</body>
</html>
