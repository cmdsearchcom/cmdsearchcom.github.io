<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>AMC-ANNOTATE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AMC-ANNOTATE(1)</td>
    <td class="head-vol">Auto Multiple Choice</td>
    <td class="head-rtitle">AMC-ANNOTATE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
AMC-annotate - completed answer sheets annotation after marking for AMC multiple
  choice exams.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 21.00ex; text-indent: -21.00ex;"><b>auto-multiple-choice</b>
  annotate --project&#x00A0; <i>project-dir</i>
  --names-file&#x00A0;<i>students.csv</i> [annotation&#x00A0;options...]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>AMC-annotate.pl</b> command annotates papers scans with scores for all
  questions, global score and mark, resulting in PDF files (one for each
  student, or one single file).
<h2 class="Ss" title="Ss" id="General_options"><a class="selflink" href="#General_options">General
  options</a></h2>
<b>--project </b><b></b><i>project-dir</i>
<div style="margin-left: 4.00ex;">sets the project name or directory.</div>
<div class="Pp"></div>
<b>--data </b><b></b><i>project-data-dir</i>
<div style="margin-left: 4.00ex;">gives the directory where data files are
  (default value is <i>project-dir</i>/data).</div>
<div class="Pp"></div>
<b>--pdf-dir </b><b></b><i>pdf-dir</i>
<div style="margin-left: 4.00ex;">sets the project pdf directory, where to
  output annotated scans (default value is
  <i>project-dir</i>/cr/corrections/pdf).</div>
<div class="Pp"></div>
<b>--names-file </b><b></b><i>students-list.csv</i>
<div style="margin-left: 4.00ex;">sets the students list file name.</div>
<div class="Pp"></div>
<b>--names-encoding </b><b></b><i>encoding</i>
<div style="margin-left: 4.00ex;">selects an encoding for file
  <i>students-list.csv</i> (default is utf-8).</div>
<div class="Pp"></div>
<b>--association-key </b><b></b><i>key</i>
<div style="margin-left: 4.00ex;">sets the key (column name in the students list
  file) that is used for association. Default value is stored in the database
  from value actually used for association, so this option should not be
  used.</div>
<div class="Pp"></div>
<b>--subject </b><b></b><i>subject.pdf</i>
<div style="margin-left: 4.00ex;">sets the path to the PDF question file
  (default is <i>project-dir</i>/DOC-sujet.pdf).</div>
<div class="Pp"></div>
<b>--compose </b><b></b><i>mode</i>
<div style="margin-left: 4.00ex;">use this option if you want to take pages from
  the subject when there is no boxes to be filled on them (for example, question
  pages before the annotated answer sheet). When <i>mode</i> equals 1, the pages
  are taken from the subject, are filled or not according to the student's
  answers (the same as on the answer sheet), and the same correction marks are
  drawn as on the answer sheet. When mode equals 2, the pages are taken from the
  corrected answer sheet (so the ticked answers are the correct ones), and no
  correction marks are drawn.</div>
<div class="Pp"></div>
<b>--corrected </b><b></b><i>corrected.pdf</i>
<div style="margin-left: 4.00ex;">sets the path to the PDF corrected subject
  (default is <i>project-dir</i>/DOC-corrected.pdf). If not present, this file
  will be built using values from options <b>--n-copies</b>, <b>--with</b>,
  <b>--filter</b> and <b>--filtered-source</b>).</div>
<div class="Pp"></div>
<b>--darkness-threshold </b><b></b><i>t</i>
<div style="margin-left: 4.00ex;">sets the darkness threshold. Default value is
  stored in the database from value actually used for scoring, so this option
  should not be used.</div>
<div class="Pp"></div>
<b>--darkness-threshold-up </b><b></b><i>upper_t</i>
<div style="margin-left: 4.00ex;">sets the upper darkness threshold. Default
  value is stored in the database from value actually used for scoring, so this
  option should not be used.</div>
<div class="Pp"></div>
<b>--csv-build-name </b><b></b><i>name-model</i>
<div style="margin-left: 4.00ex;">sets the model for building students names
  from the students list file. Default value is '(nom|surname) (prenom|name)',
  so that the name is built using the nom column content (or the surname column
  if the nom column does not exist), followed by the content of the prenom
  column (or the name column), so that the result should be OK for French or
  English simple CSV files.</div>
<div class="Pp"></div>
<b>--id-file </b><b></b><i>ids.txt</i>
<div style="margin-left: 4.00ex;">gives a filename where to find the ids of
  copies to annotate (one per line, either the student number if photocopy mode
  is off, or <i>student</i>:<i>copy</i> if the photocopy mode is on). If no file
  is given, then all copies will be annotated.</div>
<div class="Pp"></div>
<b>--debug </b><b></b><i>file.log</i>
<div style="margin-left: 4.00ex;">gives a file to fill with debugging
  information.</div>
<h2 class="Ss" title="Ss" id="PDF_output_options"><a class="selflink" href="#PDF_output_options">PDF
  output options</a></h2>
<b>--single-output</b>
<div style="margin-left: 4.00ex;">use this option if you need all annotated
  copies in a single PDF file. Default behavior is to build one PDF file per
  student.</div>
<div class="Pp"></div>
<b>--sort </b><b></b><i>s</i>
<div style="margin-left: 4.00ex;">sets the sort key (only useful when using
  <b>--single-output</b>): use
<div class="Pp"></div>
l
<div style="margin-left: 4.00ex;">to keep students in the same order as in the
  students list file.</div>
<div class="Pp"></div>
m
<div style="margin-left: 4.00ex;">to sort students according to their
  marks.</div>
<div class="Pp"></div>
i
<div style="margin-left: 4.00ex;">to sort students according to the copy
  id.</div>
<div class="Pp"></div>
n
<div style="margin-left: 4.00ex;">to sort students according to their
  names.</div>
</div>
<div class="Pp"></div>
<b>--filename-model </b><b></b><i>model</i>
<div style="margin-left: 4.00ex;">sets a file name model for annotated PDFs. In
  this model, some sequences will be substituted:
<div class="Pp"></div>
(N)
<div style="margin-left: 4.00ex;">is replaced by the student's name (see
  <b>--csv-build-name</b>).</div>
<div class="Pp"></div>
(ID)
<div style="margin-left: 4.00ex;">is replaced by the student number.</div>
<div class="Pp"></div>
( <i>COL</i>)
<div style="margin-left: 4.00ex;">is replaced by the value of column <i>COL</i>
  in the students list for the current student.</div>
<div style="height: 1.00em;">&#x00A0;</div>
The default value is '(N)-(ID).pdf'.</div>
<h2 class="Ss" title="Ss" id="Source_file_options"><a class="selflink" href="#Source_file_options">Source
  file options</a></h2>
These options are used when the <b>--corrected</b> path points to a non-existing
  file, so that this file can be rebuilt.
<div class="Pp"></div>
<b>--src </b><b></b><i>mcq-source-file</i><b> --n-copies </b><b></b><i>n</i><b>
  --with </b> <b></b><i>latex-engine</i><b> --filter
  </b><b></b><i>filter-name</i> <b> --filtered-source </b><b></b><i>fs.tex</i>
<div style="margin-left: 4.00ex;">see <b>AMC-prepare</b>(1).</div>
<h2 class="Ss" title="Ss" id="Options_for_embedded_scans"><a class="selflink" href="#Options_for_embedded_scans">Options
  for embedded scans</a></h2>
When present, scans are embedded in the annotated PDF file. The following
  options control the quality of the embedded scans, to reduce the annotated
  file size.
<div class="Pp"></div>
<b>--embedded-max-size </b><b></b><i>maxsize</i>
<div style="margin-left: 4.00ex;">sets the maximal size for scans (in the format
  <i>width</i>x<i>height</i>, in pixels). Default value is the empty string,
  which means there is no maximum size. Scans that are larger will be reduced
  before being included in the annotated file.</div>
<div class="Pp"></div>
<b>--embedded-format </b><b></b><i>format</i>
<div style="margin-left: 4.00ex;">sets the format for scans inclusion:
  <i>jpeg</i> or <i>png</i>.</div>
<div class="Pp"></div>
<b>--embedded-jpeg-quality </b><b></b><i>quality</i>
<div style="margin-left: 4.00ex;">sets the JPEG quality (from 1 to 100) for jpeg
  embedded scans.</div>
<h2 class="Ss" title="Ss" id="Annotation_options"><a class="selflink" href="#Annotation_options">Annotation
  options</a></h2>
These options controls what kind of annotations are being to be drawn.
<div class="Pp"></div>
<b>--font-size </b><b></b><i>fs</i>
<div style="margin-left: 4.00ex;">sets the font size, in points, for
  annotations.</div>
<div class="Pp"></div>
<b>--text-color </b><b></b><i>color</i>
<div style="margin-left: 4.00ex;">text color for annotations. Default value is
  <i>red</i>.</div>
<div class="Pp"></div>
<b>--verdict </b><b></b><i>header</i>
<div style="margin-left: 4.00ex;">sets the text header to be printed on each
  first page of the students copies. This text may contain CR characters for
  multi-line headers. Some sequences are substituted in it:
<div class="Pp"></div>
%S
<div style="margin-left: 4.00ex;">is replaced by the student total score.</div>
<div class="Pp"></div>
%M
<div style="margin-left: 4.00ex;">is replaced by the maximum total score.</div>
<div class="Pp"></div>
%s
<div style="margin-left: 4.00ex;">is replaced by the student mark.</div>
<div class="Pp"></div>
%m
<div style="margin-left: 4.00ex;">is replaced by the maximum mark.</div>
<div class="Pp"></div>
%(ID)
<div style="margin-left: 4.00ex;">is replaced by the student's name.</div>
<div class="Pp"></div>
%( <i>COL</i>)
<div style="margin-left: 4.00ex;">is replaced by the value of column <i>COL</i>
  in the students list for the current student.</div>
</div>
<div class="Pp"></div>
<b>--position </b><b></b><i>pos</i>
<div style="margin-left: 4.00ex;">sets the position where question scores are to
  be written:
<div class="Pp"></div>
marge
<div style="margin-left: 4.00ex;">the scores will be written in the left
  margin</div>
<div class="Pp"></div>
marges
<div style="margin-left: 4.00ex;">the scores will be written in the closest
  margin (left or right).</div>
<div class="Pp"></div>
case
<div style="margin-left: 4.00ex;">the scores will be written near the
  boxes</div>
<div class="Pp"></div>
none
<div style="margin-left: 4.00ex;">the scores won't be written.</div>
</div>
<div class="Pp"></div>
--verdict-question <i>perl-expression</i>
<div style="margin-left: 4.00ex;">sets the text to be printed next to all
  questions, through a perl expression to be evaluated (if you need a simple
  text, simply quote it with &quot;). Some sequences are substituted in it
  before evaluation:
<div class="Pp"></div>
%S
<div style="margin-left: 4.00ex;">is replaced by the student score for this
  question.</div>
<div class="Pp"></div>
%M
<div style="margin-left: 4.00ex;">is replaced by the maximum score for this
  question.</div>
<div class="Pp"></div>
%s
<div style="margin-left: 4.00ex;">is the same as %S, but rounded to <i>nc</i>
  significant digits (see option <b>--ch-sign</b>).</div>
<div class="Pp"></div>
%m
<div style="margin-left: 4.00ex;">is the same as %M, but rounded to <i>nc</i>
  significant digits (see option <b>--ch-sign</b>).</div>
<div style="height: 1.00em;">&#x00A0;</div>
A standard value for this option is &quot;\&quot;%s/%m\&quot;&quot;. You can
  also use tests (with the perl syntax ( TEST ? IF-YES : IF-NO )) to write
  <i>Valid</i> if the score is the maximal score, or <i>Failed</i> if not, using
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
--verdict-question &quot;(%S==%M ? \&quot;Valid\&quot; : \&quot;Failed\&quot;)&quot;
</pre>
</div>
</div>
<div class="Pp"></div>
--verdict-question-cancelled <i>perl-expression</i>
<div style="margin-left: 4.00ex;">same as <b>--verdict-question</b>, but applies
  for cancelled questions (see allowempty scoring strategy). The default value
  is &quot;X&quot;.</div>
<div class="Pp"></div>
<b>--indicatives</b>
<div style="margin-left: 4.00ex;">use this option to request boxes annotation
  for indicative questions (these questions' scores won't be taken into account
  while computing the global score. The correct/wrong status is often irrelevant
  for these questions, so there is no point correcting the corresponding
  boxes).</div>
<div class="Pp"></div>
<b>--line-width </b><b></b><i>width</i>
<div style="margin-left: 4.00ex;">sets the line width (in points) when drawing
  symbols to correct answers.</div>
<div class="Pp"></div>
<b>--symbols </b><b></b><i>symbols-definition</i>
<div style="margin-left: 4.00ex;">defines how boxes will be annotated.
  symbols-definition is a comma separated list of
  <i>H</i>-<i>A</i>:<i>shape</i>: <i>color</i> constructs, where <i>H</i> is 0
  or 1 depending on whether the box has to be checked or not, <i>A</i> is 0 or 1
  depending on whether the box is actually checked or not, <i>shape</i> is one
  of none, circle, mark, box and <i>color</i> is a color (name or #RGB, see
  ImageMagick or GraphicsMagick documentation for details). Default value is
  &quot;0-0:none,0-1:circle:red,1-0:mark:red,1-1:mark:blue&quot;.</div>
<h2 class="Ss" title="Ss" id="Lengths"><a class="selflink" href="#Lengths">Lengths</a></h2>
The following length can be given with a unit (in, ft, pt, cm or mm).
<div class="Pp"></div>
<b>--dist-to-box </b><b></b><i>d</i>
<div style="margin-left: 4.00ex;">sets the distance from the boxes (going left)
  where to write questions scores when using <b>--position case</b>.Defaults to
  1cm.</div>
<div class="Pp"></div>
<b>--dist-margin </b><b></b><i>d</i>
<div style="margin-left: 4.00ex;">sets the margin size. Defaults to 5mm.</div>
<div class="Pp"></div>
<b>--dist-margin-global </b><b></b><i>d</i>
<div style="margin-left: 4.00ex;">sets the margin size for the header. Defaults
  to 3mm.</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<b>Alexis Bienven&#x00FC;e</b> &lt;paamc@passoire.fr&gt;
<div style="margin-left: 4.00ex;">Main author</div>
<div class="Pp"></div>
<b>Anirvan Sarkar</b>
<div style="margin-left: 4.00ex;">Author and Editor</div>
<div class="Pp"></div>
<b>Hiroto Kagotani</b>
<div style="margin-left: 4.00ex;">Editor</div>
<div class="Pp"></div>
<b>Fr&#x00E9;d&#x00E9;ric Br&#x00E9;al</b>
<div style="margin-left: 4.00ex;">Author and Editor</div>
<div class="Pp"></div>
<b>Jean B&#x00E9;rard</b>
<div style="margin-left: 4.00ex;">Translation from French</div>
<div class="Pp"></div>
<b>Georges Khaznadar</b>
<div style="margin-left: 4.00ex;">Translation from French</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 2008-2016 Alexis Bienven&#x00FC;e
<div>&#x00A0;</div>
<div class="Pp"></div>
This document can be used according to the terms of the GNU General Public
  License, version 2 or later.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-03-16</td>
    <td class="foot-os">Auto Multiple Choice 1.3.0</td>
  </tr>
</table>
</body>
</html>
