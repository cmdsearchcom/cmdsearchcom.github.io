<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>EFA(1p)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EFA(1p)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">EFA(1p)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
efa - unofficial efa.vrr.de command line client
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>efa</b> <b>--from</b> <i>city</i> <i>stop</i>
    <b>--to</b> <i>city</i> <i>stop</i> [ <i>additional options</i> ]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>efa</b> [ <i>options</i> ] <i>from-city</i>
    <i>from-stop</i> [ <i>via-city</i> <i>via-stop</i> ] <i>to-city</i>
    <i>to-stop</i></dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="VERSION"><a class="selflink" href="#VERSION">VERSION</a></h1>
version 2.14
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>efa</b> is a command line client for the &lt;http://efa.vrr.de&gt; web
  interface. It sends the specified information to the online form and displays
  the results.
<div class="Pp"></div>
It also supports other EFA services than &lt;http://efa.vrr.de&gt;. <b>efa</b>
  has a builtin list of EFA entry points which can be probed with the <b>-A</b>
  and <b>-D</b> options and listed with <b>-l</b>. You can also specify a custom
  service using <b>-u</b> <i>url</i> or <b>-s</b> <i>name</i>. However, the
  default EFA service is sufficient in most cases (even ICE connections all over
  Germany).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--from</b> <i>city</i> <i>stop</i></dt>
  <dd class="It-tag">Departure place</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--to</b> <i>city</i> <i>stop</i></dt>
  <dd class="It-tag">Arrival place</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--via</b> <i>city</i> <i>stop</i></dt>
  <dd class="It-tag">Travel via this place
    <div style="height: 1.00em;">&#x00A0;</div>
    In all cases, if you want <i>stop</i> to be an address or &quot;point of
      interest&quot;, you can set it to 'addr:something' or
    'poi:something'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>|<b>--arrive</b> <i>hh</i>:<i>mm</i></dt>
  <dd class="It-tag">Journey end time (overrides --time/--depart)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b>|<b>--auto-url</b>|<b>--discover-and-print</b></dt>
  <dd class="It-tag">Probe all known EFA entry points for the specified
      connection. Print the first result which was not an error.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that this may take a while and will not necessarily return the best
      result. Also, using this option by default is not recommended, as it puts
      EFA services under considerable additional load.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>|<b>--bike</b></dt>
  <dd class="It-tag">Request connections allowing the passenger to take a bike
      with them. Note that this may cause <b>efa</b> to display no routes at all
      -- In that case, the backend was unable to find such connections or didn't
      know about their bike-support.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B</b>|<b>--bike-info</b></dt>
  <dd class="It-tag">Show information about bike support, but do not select
      routes based on it. In essence, this option simply changes the
      <b>--ignore-info</b> default. It is useful when <b>--bike</b> did not
      return any routes even though most of the route has bike support.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>|<b>--date</b>
    <i>dd</i>.<i>mm</i>.[<i>yyyy</i>]</dt>
  <dd class="It-tag">Journey date</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>|<b>--discover</b></dt>
  <dd class="It-tag">Probe all known EFA entry points for the specified
      connection. No routes are returned in this case. Instead, <b>efa</b> will
      print the URLs and names of all entry points which did not return an
      error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b>|<b>--efa-url</b> <i>url</i></dt>
  <dd class="It-tag">URL to the EFA entry point, defaults to
      &lt;http://efa.vrr.de/vrr/XSLT_TRIP_REQUEST2&gt;. Depending on your
      location, some <i>url</i>s may contain more specific data than others. See
      <i>Travel::Routing::DE::EFA</i>(3pm) and the <b>-l</b> option for
      alternatives.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>|<b>--exclude</b> <i>transports</i></dt>
  <dd class="It-tag">Exclude <i>transports</i> (comma separated list).
    <div style="height: 1.00em;">&#x00A0;</div>
    Possible transports: zug, s-bahn, u-bahn, stadtbahn, tram, stadtbus,
      regionalbus, schnellbus, seilbahn, schiff, ast, sonstige</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b>|<b>--extended-info</b></dt>
  <dd class="It-tag">Display more than just the basic route information. At the
      moment, the following is displayed (if available):</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Route duration</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Ticket fare</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">transfer duration and elevation changes (via stairs /
      escalators) at each stop</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>|<b>--full-route</b></dt>
  <dd class="It-tag">Display intermediate stops (with time and platform) of each
      train. Note that these are not always available.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b>|<b>--ignore-info</b> [ <i>regex</i> ]</dt>
  <dd class="It-tag">Ignore additional information matching <i>regex</i>
      (default: /Fahrradmitnahme|Einstiegshilfe/)
    <div style="height: 1.00em;">&#x00A0;</div>
    If <i>regex</i> is not supplied, removes the default regex (-&gt; nothing
      will be ignored)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>|<b>--include</b> <i>type</i></dt>
  <dd class="It-tag">Include connections using trains of type <i>type</i>, where
      <i>type</i> may be:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">local (default)
    <div style="height: 1.00em;">&#x00A0;</div>
    only take local trains (&quot;Verbund-/Nahverkehrslinien&quot;). Slow, but
      the cheapest method if you're not traveling long distance</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">ic
    <div style="height: 1.00em;">&#x00A0;</div>
    Local trains + IC</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">ice
    <div style="height: 1.00em;">&#x00A0;</div>
    All trains (local + IC + ICE)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>|<b>--list</b></dt>
  <dd class="It-tag">List supported EFA services wit their URLs (see <b>-u</b>)
      and abbreviations (see <b>-s</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b>|<b>--maps</b></dt>
  <dd class="It-tag">Output links to maps of transfer paths and transfer
      stations where available.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b>|<b>--max-change</b> <i>number</i></dt>
  <dd class="It-tag">Print connections with at most <i>number</i>
    interchanges</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b>|<b>--num-connections</b> <i>number</i></dt>
  <dd class="It-tag">Return up to <i>number</i> connections. If unset, the
      default of the respective EFA server is used (usually 4 or 5).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>|<b>--prefer</b> <i>type</i></dt>
  <dd class="It-tag">Prefer connections of <i>type</i>:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">speed (default)
    <div style="height: 1.00em;">&#x00A0;</div>
    The faster, the better</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">nowait
    <div style="height: 1.00em;">&#x00A0;</div>
    Prefer connections with less interchanges</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">nowalk
    <div style="height: 1.00em;">&#x00A0;</div>
    Prefer connections with less walking (at interchanges)</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>|<b>--proximity</b> [<i>minutes</i>]</dt>
  <dd class="It-tag">Take stops close to the stop/start into account. By
      default, up to 10 minutes of walking to/from the route's first/last stop
      is considered acceptable. You can specify <i>minutes</i> to use a custom
      value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>|<b>--service</b> <i>name</i></dt>
  <dd class="It-tag">Shortname of the EFA entry point. See
      <i>Travel::Routing::DE::EFA</i>(3pm) and the <b>-l</b> option for a list
      of services.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b>|<b>--time</b>|<b>--depart</b>
    <i>hh</i>:<i>mm</i></dt>
  <dd class="It-tag">Journey start time</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--timeout</b> <i>seconds</i></dt>
  <dd class="It-tag">Set timeout for HTTP requests. Default: 60 seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>|<b>--version</b></dt>
  <dd class="It-tag">Print version information</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w</b>|<b>--walk-speed</b> <i>speed</i></dt>
  <dd class="It-tag">Set your walking speed to <i>speed</i>. Accepted values:
      normal (default), fast, slow</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b>|<b>--accessibility</b> <i>types</i></dt>
  <dd class="It-tag">Request connections satisfying all of the specified
      accessibility <i>types</i> (comma-separated list, option may be repeated).
      Please note that this may cause the backend to return no results at all,
      either because no such connection exists or because the required lines do
      not have the correct accessibility attributes set.
    <div style="height: 1.00em;">&#x00A0;</div>
    The following <i>types</i> are supported:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">e / no-escalators</dt>
  <dd class="It-tag">Transfers must be possible without taking an
    escalator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">E / no-elevators</dt>
  <dd class="It-tag">Transfers must be possible without using an elevator.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">i / info</dt>
  <dd class="It-tag">Does not restrict the requested connections. However, this
      option causes <b>efa</b> to display additional accessibility information
      for each route part (where available). When <b>-x w</b> or <b>-x l</b> do
      not return any connections, using <b>-x i</b> might be more helpful
      (though it cannot guarantee that any of the results satisfy the respective
      type).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">l / nf / low-platform</dt>
  <dd class="It-tag">All vehicles must be low-platform
    (&quot;Niederflur&quot;).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">s / no-stairs</dt>
  <dd class="It-tag">Transfers must be possible without stairs (e.g. via
      escalators/elevators or ramps).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">w / wheelchair</dt>
  <dd class="It-tag">All vehicles must be wheelchair accessible.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;"></div>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<pre>
    0    Everything went well
    1    Invalid arguments, see error message
    2    Network error, unable to send request
    3    efa.vrr.de did not return any parsable data
    4    efa.vrr.de error: ambiguous input
    5    efa.vrr.de error: no connections found
    10   Unknown Travel::Routing::DE::EFA error
    255  Other internal error
</pre>
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">efa Do Hbf MH Hbf</dt>
  <dd class="It-tag">Look up a connection from Dortmund (Do) Hbf to Muelheim
      (MH) Hbf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">efa --include ice Essen Hbf Hamburg Dammtor</dt>
  <dd class="It-tag">Look up a connection with long-distance trains</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">efa --arrive 18:00 -e zug,s-bahn -M E Wickenburgstr D
    Oststr</dt>
  <dd class="It-tag">Look up a connection from Essen Wickenburgstr to
      Duesseldorf Oststr. Do not use any trains, make sure to arrive around
      18:00 and print links to maps of all interchange stations.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">efa -s vvs Stuttgart Hbf Stuttgart Marienplatz</dt>
  <dd class="It-tag">Use the VVS (Verkehrsverbund Stuttgart) EFA service to look
      up a connection.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DEPENDENCIES"><a class="selflink" href="#DEPENDENCIES">DEPENDENCIES</a></h1>
This script requires perl 5.10 (or higher) with the following modules:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Class::Accessor</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Exception::Class</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">LWP::UserAgent</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">XML::LibXML</dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS_AND_LIMITATIONS"><a class="selflink" href="#BUGS_AND_LIMITATIONS">BUGS
  AND LIMITATIONS</a></h1>
The EFA backend is not able to calculate &quot;two-way&quot; routes, i.e. from
  -&gt; via -&gt; to routes with from == to. If from and to are the same stop,
  it doesn't even try to calculate a route (&quot;we recommend walking
  instead&quot;), if they are close to each other it may or may not work.
  Workaround: Request from -&gt; via using the normal four-argument efa
  invocation, read the time, use efa -t time via via to to to request via -&gt;
  to.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Copyright (C) 2009-2015 by Daniel Friesel &lt;derf@finalrewind.org&gt;
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
<pre>
  0. You just DO WHAT THE FUCK YOU WANT TO.
</pre>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-10-26</td>
    <td class="foot-os">perl v5.20.2</td>
  </tr>
</table>
</body>
</html>
