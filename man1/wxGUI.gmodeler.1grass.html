<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>wxGUI.gmodeler(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">wxGUI.gmodeler(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">wxGUI.gmodeler(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="wxGUI_Graphical_Modeler"><a class="selflink" href="#wxGUI_Graphical_Modeler">wxGUI
  Graphical Modeler</a></h1>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>Graphical Modeler</b> is a <i>wxGUI</i> component which allows the user
  to create, edit, and manage simple and complex models using an easy-to-use
  interface. When performing analytical operations in GRASS GIS, the operations
  are not isolated, but part of a chain of operations. Using the Graphical
  Modeler, a chain of processes (i.e. GRASS GIS modules) can be wrapped into one
  process (i.e. model). Subsequently it is easier to execute the model later on
  even with slightly different inputs or parameters.
<div>&#x00A0;</div>
Models represent a programming technique used in GRASS GIS to concatenate single
  steps together to accomplish a task. It is advantageous when the user see
  boxes and ovals that are connected by lines and represent some tasks rather
  than seeing lines of coded text. The Graphical Modeler can be used as a custom
  tool that automates a process. Created models can simplify or shorten a task
  which can be run many times and it can also be easily shared with others.
  Important to note is that models cannot perform specified tasks that one
  cannot also manually perform with GRASS GIS. It is recommended to first to
  develop the process manually, note down the steps (e.g. by using the
  <i>Copy</i> button in module dialogs) and later replicate them in model.
<div class="Pp"></div>
The Graphical Modeler allows you to:
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define data items (raster, vector, 3D raster maps)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define actions (GRASS commands)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define relations between data and action items</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define loops (e.g. map series) and conditions (if-else
      statements)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define model variables</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">parameterize GRASS commands</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">define intermediate data</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">validate and run model</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">save model properties to a file (<i>GRASS Model
      File|*.gxm</i>)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">export model to Python script</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">export model to image file</dd>
</dl>
</div>
<h2 class="Ss" title="Ss" id="Main_dialog"><a class="selflink" href="#Main_dialog">Main
  dialog</a></h2>
The Graphical Modeler can be launched from the Layer Manager menu File -&gt;
  Graphical modeler or from the main toolbar . It&#x2019;s also available as
  stand-alone module <i>g.gui.gmodeler</i>.
<div class="Pp"></div>
The main Graphical Modeler menu contains options which enable the user to fully
  control the model. Directly under the main menu one can find toolbar with
  buttons (see figure below). There are options including (1) Create new model,
  (2) Load model from file, (3) Save current model to file, (4) Export model to
  image, (5) Export model to Python script, (6) Add command (GRASS modul) to
  model, (7) Add data to model, (8) Manually define relation between data and
  commands, (9) Add loop/series to model, (10) Add comment to model, (11) Redraw
  model canvas, (12) Validate model, (13) Run model, (14) Manage model
  variables, (15) Model settings, (16) Show manual, (17) Quit Graphical Modeler.
<div class="Pp"></div>
<i>Figure: Components of Graphical Modeler menu toolbar.</i>
<div class="Pp"></div>
There is also a lower menu bar in the Graphical modeler dialog where one can
  manage model items, visualize commands, add or manage model variables, define
  default values and descriptions. The Python editor dialog window allows seeing
  workflows written in Python code. The rightmost tab of the bottom menu is
  automatically triggered when the model is activated and shows all the steps of
  running GRASS modeler modules. In case of errors in the calculation process,
  it is written at that place.
<div>&#x00A0;</div>
<i>Figure: Lower Graphical Modeler menu toolbar.</i> <i></i>
<h2 class="Ss" title="Ss" id="Components_of_models"><a class="selflink" href="#Components_of_models">Components
  of models</a></h2>
The workflow is usually established from four types of diagrams. Input and
  derived model data are usually represented with oval diagrams. This type of
  model elements stores path to specific data on the user&#x2019;s disk. It is
  possible to insert vector data, raster data, database tables, etc. The type of
  data is clearly distinguishable in the model by its color. Different model
  elements are shown in the figures below.
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(A) raster data:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(B) relation:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(C) GRASS module:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(D) loop:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(E) database table:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(F) 3D raster data:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(G) vector data:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(H) disabled GRASS module:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">(I) comment:</dd>
</dl>
</div>
<div>&#x00A0;</div>
<i>Figure: A model to perform unsupervised classification using MLC</i>
  <i>(i.maxlik) and SMAP (i.smap).</i> <i></i>
<div class="Pp"></div>
Another example:
<div>&#x00A0;</div>
<i>Figure: A model to perform estimation of average annual soil loss</i>
  <i>caused by sheet and rill erosion using The Universal Soil Loss</i>
  <i>Equation.</i>
<div class="Pp"></div>
Example as part of landslide prediction process:
<div>&#x00A0;</div>
<i>Figure: A model to perform creation of parametric maps used by geologists</i>
  <i>to predict landslides in the area of interest.</i>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
In this example the zipcodes_wake vector data and the elev_state_500m raster
  data from the North Carolina sample dataset (original raster and vector data)
  are used to calculate average elevation for every zone. The important part of
  the process is the Graphical Modeler, namely its possibilities of process
  automation.
<h2 class="Ss" title="Ss" id="The_workflow_shown_as_a_series_of_commands"><a class="selflink" href="#The_workflow_shown_as_a_series_of_commands">The
  workflow shown as a series of commands</a></h2>
In the command console the procedure looks as follows:
<div>&#x00A0;</div>
<pre>
# input data import
r.import input=elev_state_500m.tif output=elevation
v.import input=zipcodes_wake.shp output=zipcodes_wake
# computation region settings
g.region vector=zipcodes_wake
# raster statistics (average values), upload to vector map table calculation
v.rast.stats -c map=zipcodes_wake raster=elevation column_prefix=rst method=average
# univariate statistics on selected table column for zipcode map calculation
v.db.univar map=zipcodes_wake column=rst_average
# conversion from vector to raster layer (due to result presentation)
v.to.rast input=zipcodes_wake output=zipcodes_avg use=attr attribute_column=rst_average
# display settings
r.colors -e map=zipcodes_avg color=bgyr
d.mon start=wx0 bgcolor=white
d.barscale style=arrow_ends color=black bgcolor=white fontsize=10
d.rast map=zipcodes_avg bgcolor=white
d.vect map=zipcodes_wake type=boundary color=black
d.northarrow style=1a at=85.0,15.0 color=black fill_color=black width=0 fontsize=10
d.legend raster=zipcodes_avg lines=50 thin=5 labelnum=5 color=black fontsize=10
</pre>
<h2 class="Ss" title="Ss" id="Defining_the_workflow_in_the_Graphical_Modeler"><a class="selflink" href="#Defining_the_workflow_in_the_Graphical_Modeler">Defining
  the workflow in the Graphical Modeler</a></h2>
To start performing above steps as an automatic process with the Graphical
  Modeler press the icon or type <i>g.gui.gmodeler</i>. The simplest way of
  inserting elements is by adding the complete GRASS command to the Command
  field in the GRASS command dialog (see figure below). With full text search
  one can do faster module hunting. Next, the label and the command can be
  added. In case that only a module name is inserted, after pressing the
  <i>Enter</i> button, the module dialog window is displayed and it is possible
  to set all of the usual module options (parameters and flags).
<div class="Pp"></div>
<i>Figure: Dialog for adding GRASS commands to model.</i>
<h2 class="Ss" title="Ss" id="Managing_model_parameters"><a class="selflink" href="#Managing_model_parameters">Managing
  model parameters</a></h2>
All used modules can be parameterized in the model. That causes launching the
  dialog with input options for model after the model is run. In this example,
  input layers (zipcodes_wake vector map and elev_state_500m raster map) are
  parameterized. Parameterized elements show their diagram border slightly
  thicker than those of unparameterized elements.
<div>&#x00A0;</div>
<i>Figure: Model parameter settings.</i>
<div class="Pp"></div>
The final model, the list of all model items, and the Python code window with
  <i>Save</i> and <i>Run</i> option are shown in the figures below.
<div>&#x00A0;</div>
<i>Figure: A model to perform average statistics for zipcode zones.</i>
<div>&#x00A0;</div>
<div class="Pp"></div>
<i>Figure: Items with Python editor window.</i>
<div class="Pp"></div>
For convenience, this model for the Graphical Modeler is also available for
  download here.
<div class="Pp"></div>
The model is run by clicking the <i>Run</i> button . When all inputs are set,
  the results can be displayed as shown in the next Figure:
<div>&#x00A0;</div>
<i>Figure: Average elevation for ZIP codes using North Carolina sample dataset
  as</i> <i>an automatic calculation performed by Graphical Modeler.</i>
<h2 class="Ss" title="Ss" id="Managing_model_properties"><a class="selflink" href="#Managing_model_properties">Managing
  model properties</a></h2>
When one wants to run model again with the same data or the same names, it is
  necessary to use --overwrite option. It will cause maps with identical names
  to be overwritten. Instead of setting it for every module separately it is
  handy to change the Model Property settings globally. This dialog includes
  also metadata settings, where model name, model description and author(s) of
  the model can be specified.
<div>&#x00A0;</div>
<i>Figure: Model properties.</i>
<h2 class="Ss" title="Ss" id="Defining_variables"><a class="selflink" href="#Defining_variables">Defining
  variables</a></h2>
Another useful trick is the possibility to set variables. Their content can be
  used as a substitute for other items. Value of variables can be values such as
  raster or vector data, integer, float, string value or they may constitute
  some region, mapset, file or direction data type. Then it is not necessary to
  set any parameters for input data. The dialog with variable settings is
  automatically displayed after model is run. So, instead of model parameters
  (e.g. r.import a v.import, see the Figure <i>Run model dialog</i> above) there
  are Variables.
<div>&#x00A0;</div>
<i>Figure: Model with variable inputs.</i>
<div class="Pp"></div>
The key point is the usage of % before the substituting variable and settings in
  Variables dialog. For example, in case of a model variable raster that points
  to an input file path and which value is required to be used as one of inputs
  for a particular model, it should be specified in the Variables dialog with
  its respective name (raster), data type, default value and description. Then
  it should be set in the module dialog as input called %raster.
<div>&#x00A0;</div>
<i>Figure: Example of raster file variable settings.</i>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<i>Figure: Example of raster file variable usage.</i>
<h2 class="Ss" title="Ss" id="Saving_the_model_file"><a class="selflink" href="#Saving_the_model_file">Saving
  the model file</a></h2>
Finally, the model settings can be stored as a GRASS GIS Model file with *.gxm
  extension. The advantage is that it can be shared as a reusable workflow that
  may be run also by other users with different data.
<div class="Pp"></div>
For example, this model can later be used to calculate the average precipitation
  for every administrative region in Slovakia using the precip raster data from
  Slovakia precipitation dataset and administration boundaries of Slovakia from
  Slovak Geoportal (only with a few clicks).
<h2 class="Ss" title="Ss" id="Handling_intermediate_data"><a class="selflink" href="#Handling_intermediate_data">Handling
  intermediate data</a></h2>
There can be some data in a model that did not exist before the process and that
  it is not worth it to maintain after the process executes. They can be
  described as being Intermediate by single clicking using the right mouse
  button, see figure below. All such data should be deleted following model
  completion. The boundary of intermediate component is dotted line.
<div>&#x00A0;</div>
<i>Figure: Usage and definition of intermediate data in model.</i>
<h2 class="Ss" title="Ss" id="Using_the_Python_editor"><a class="selflink" href="#Using_the_Python_editor">Using
  the Python editor</a></h2>
By using the Python editor in the Graphical Modeler one can add Python code and
  then run it with <i>Run</i> button or just save it as a Python script *.py.
  The result is shown in the Figure below:
<div>&#x00A0;</div>
<i>Figure: Python editor in the wxGUI Graphical Modeler.</i>
<h2 class="Ss" title="Ss" id="Defining_loops"><a class="selflink" href="#Defining_loops">Defining
  loops</a></h2>
In the example below the MODIS MOD13Q1 (NDVI) satellite data products are used
  in a loop. The original data are stored as coded integer values that need to
  be multiplied by the value 0.0001 to represent real <i>ndvi values</i>.
  Moreover, GRASS GIS provides a predefined color table called ndvi to represent
  <i>ndvi data</i>. In this case it is not necessary to work with every image
  separately.
<div>&#x00A0;</div>
The Graphical Modeler is an appropriate tool to process data in an effective way
  using loop and variables (%map for a particular MODIS image in mapset and
  %ndvi for original data name suffix). After the loop component is added to
  model, it is necessary to define series of maps with required settings of map
  type, mapset, etc.
<div>&#x00A0;</div>
<i>Figure: MODIS data representation in GRASS GIS after Graphical Modeler
  usage.</i>
<div class="Pp"></div>
When the model is supplemented by all of modules, these modules should be ticked
  in the boxes of loop dialog. The final model and its results are shown below.
<div>&#x00A0;</div>
<i>Figure: Model with loop.</i>
<div class="Pp"></div>
<i>Figure: MODIS data representation in GRASS GIS after Graphical Modeler
  usage.</i>
<div class="Pp"></div>
The steps to enter in the command console of the Graphical Modeler would be as
  follows:
<div>&#x00A0;</div>
<pre>
# note that the white space usage differs from the standard command line usage
# rename original image with preselected suffix
g.rename raster = %map,%map.%ndvi
# convert integer values
r.mapcalc expression = %map = %map.%ndvi * 0.0001
# set color table appropriate for nvdi data
r.colors = map = %map color = ndvi
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>wxGUI</i>
<div>&#x00A0;</div>
wxGUI components
<div class="Pp"></div>
See also selected user models available from this SVN repository.
<div class="Pp"></div>
See also the wiki page (especially various video tutorials).
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Martin Landa, OSGeoREL, Czech Technical University in Prague, Czech Republic
<div>&#x00A0;</div>
Various manual improvements by Ludmila Furkevicova, Slovak University of
  Technology in Bratislava, Slovak Republic
<div class="Pp"></div>
<i>$Date: 2016-09-19 12:21:19 +0200 (Mon, 19 Sep 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: wxGUI Graphical Modeler source code (history)
<div class="Pp"></div>
Main index | GUI index | Topics index | Keywords index | Graphical index | Full
  index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
