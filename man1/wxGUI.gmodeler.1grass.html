<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:43:17 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>wxGUI.gmodeler(1grass) Grass User&rsquo;s Manual
wxGUI.gmodeler(1grass)</p>

<p style="margin-top: 1em">wxGUI Graphical Modeler
DESCRIPTION <br>
The Graphical Modeler is a wxGUI component which allows the
user to create, edit, and manage simple and complex models
using an easy-to-use interface. When performing analytical
<br>
operations in GRASS GIS, the operations are not isolated,
but part of a chain of operations. Using the Graphical
Modeler, a chain of processes (i.e. GRASS GIS modules) can
be <br>
wrapped into one process (i.e. model). Subsequently it is
easier to execute the model later on even with slightly
different inputs or parameters. <br>
Models represent a programming technique used in GRASS GIS
to concatenate single steps together to accomplish a task.
It is advantageous when the user see boxes and ovals that
<br>
are connected by lines and represent some tasks rather than
seeing lines of coded text. The Graphical Modeler can be
used as a custom tool that automates a process. Created
mod&acirc; <br>
els can simplify or shorten a task which can be run many
times and it can also be easily shared with others.
Important to note is that models cannot perform specified
tasks that <br>
one cannot also manually perform with GRASS GIS. It is
recommended to first to develop the process manually, note
down the steps (e.g. by using the Copy button in module
dialogs) <br>
and later replicate them in model.</p>

<p style="margin-top: 1em">The Graphical Modeler allows you
to:</p>

<p style="margin-top: 1em">&Acirc;&middot; define data
items (raster, vector, 3D raster maps)</p>

<p style="margin-top: 1em">&Acirc;&middot; define actions
(GRASS commands)</p>

<p style="margin-top: 1em">&Acirc;&middot; define relations
between data and action items</p>

<p style="margin-top: 1em">&Acirc;&middot; define loops
(e.g. map series) and conditions (if-else statements)</p>

<p style="margin-top: 1em">&Acirc;&middot; define model
variables</p>

<p style="margin-top: 1em">&Acirc;&middot; parameterize
GRASS commands</p>

<p style="margin-top: 1em">&Acirc;&middot; define
intermediate data</p>

<p style="margin-top: 1em">&Acirc;&middot; validate and run
model</p>

<p style="margin-top: 1em">&Acirc;&middot; save model
properties to a file (GRASS Model File|*.gxm)</p>

<p style="margin-top: 1em">&Acirc;&middot; export model to
Python script</p>

<p style="margin-top: 1em">&Acirc;&middot; export model to
image file</p>

<p style="margin-top: 1em">Main dialog <br>
The Graphical Modeler can be launched from the Layer Manager
menu File -&gt; Graphical modeler or from the main toolbar .
It&acirc;s also available as stand-alone module
g.gui.gmodeler.</p>

<p style="margin-top: 1em">The main Graphical Modeler menu
contains options which enable the user to fully control the
model. Directly under the main menu one can find toolbar
with buttons (see figure <br>
below). There are options including (1) Create new model,
(2) Load model from file, (3) Save current model to file,
(4) Export model to image, (5) Export model to Python
script, <br>
(6) Add command (GRASS modul) to model, (7) Add data to
model, (8) Manually define relation between data and
commands, (9) Add loop/series to model, (10) Add comment to
model, <br>
(11) Redraw model canvas, (12) Validate model, (13) Run
model, (14) Manage model variables, (15) Model settings,
(16) Show manual, (17) Quit Graphical Modeler.</p>

<p style="margin-top: 1em">Figure: Components of Graphical
Modeler menu toolbar.</p>

<p style="margin-top: 1em">There is also a lower menu bar
in the Graphical modeler dialog where one can manage model
items, visualize commands, add or manage model variables,
define default values and <br>
descriptions. The Python editor dialog window allows seeing
workflows written in Python code. The rightmost tab of the
bottom menu is automatically triggered when the model is
<br>
activated and shows all the steps of running GRASS modeler
modules. In case of errors in the calculation process, it is
written at that place. <br>
Figure: Lower Graphical Modeler menu toolbar.</p>

<p style="margin-top: 1em">Components of models <br>
The workflow is usually established from four types of
diagrams. Input and derived model data are usually
represented with oval diagrams. This type of model elements
stores path <br>
to specific data on the user&acirc;s disk. It is possible to
insert vector data, raster data, database tables, etc. The
type of data is clearly distinguishable in the model by its
<br>
color. Different model elements are shown in the figures
below.</p>

<p style="margin-top: 1em">&Acirc;&middot; (A) raster
data:</p>

<p style="margin-top: 1em">&Acirc;&middot; (B)
relation:</p>

<p style="margin-top: 1em">&Acirc;&middot; (C) GRASS
module:</p>

<p style="margin-top: 1em">&Acirc;&middot; (D) loop:</p>

<p style="margin-top: 1em">&Acirc;&middot; (E) database
table:</p>

<p style="margin-top: 1em">&Acirc;&middot; (F) 3D raster
data:</p>

<p style="margin-top: 1em">&Acirc;&middot; (G) vector
data:</p>

<p style="margin-top: 1em">&Acirc;&middot; (H) disabled
GRASS module:</p>

<p style="margin-top: 1em">&Acirc;&middot; (I) comment:
<br>
Figure: A model to perform unsupervised classification using
MLC (i.maxlik) and SMAP (i.smap).</p>

<p style="margin-top: 1em">Another example: <br>
Figure: A model to perform estimation of average annual soil
loss caused by sheet and rill erosion using The Universal
Soil Loss Equation.</p>

<p style="margin-top: 1em">Example as part of landslide
prediction process: <br>
Figure: A model to perform creation of parametric maps used
by geologists to predict landslides in the area of
interest.</p>

<p style="margin-top: 1em">EXAMPLE <br>
In this example the zipcodes_wake vector data and the
elev_state_500m raster data from the North Carolina sample
dataset (original raster and vector data) are used to
calculate <br>
average elevation for every zone. The important part of the
process is the Graphical Modeler, namely its possibilities
of process automation.</p>

<p style="margin-top: 1em">The workflow shown as a series
of commands <br>
In the command console the procedure looks as follows: <br>
# input data import <br>
r.import input=elev_state_500m.tif output=elevation <br>
v.import input=zipcodes_wake.shp output=zipcodes_wake <br>
# computation region settings <br>
g.region vector=zipcodes_wake <br>
# raster statistics (average values), upload to vector map
table calculation <br>
v.rast.stats -c map=zipcodes_wake raster=elevation
column_prefix=rst method=average <br>
# univariate statistics on selected table column for zipcode
map calculation <br>
v.db.univar map=zipcodes_wake column=rst_average <br>
# conversion from vector to raster layer (due to result
presentation) <br>
v.to.rast input=zipcodes_wake output=zipcodes_avg use=attr
attribute_column=rst_average <br>
# display settings <br>
r.colors -e map=zipcodes_avg color=bgyr <br>
d.mon start=wx0 bgcolor=white <br>
d.barscale style=arrow_ends color=black bgcolor=white
fontsize=10 <br>
d.rast map=zipcodes_avg bgcolor=white <br>
d.vect map=zipcodes_wake type=boundary color=black <br>
d.northarrow style=1a at=85.0,15.0 color=black
fill_color=black width=0 fontsize=10 <br>
d.legend raster=zipcodes_avg lines=50 thin=5 labelnum=5
color=black fontsize=10</p>

<p style="margin-top: 1em">Defining the workflow in the
Graphical Modeler <br>
To start performing above steps as an automatic process with
the Graphical Modeler press the icon or type g.gui.gmodeler.
The simplest way of inserting elements is by adding the <br>
complete GRASS command to the Command field in the GRASS
command dialog (see figure below). With full text search one
can do faster module hunting. Next, the label and the
com&acirc; <br>
mand can be added. In case that only a module name is
inserted, after pressing the Enter button, the module dialog
window is displayed and it is possible to set all of the
usual <br>
module options (parameters and flags).</p>

<p style="margin-top: 1em">Figure: Dialog for adding GRASS
commands to model.</p>

<p style="margin-top: 1em">Managing model parameters <br>
All used modules can be parameterized in the model. That
causes launching the dialog with input options for model
after the model is run. In this example, input layers
(zip&acirc; <br>
codes_wake vector map and elev_state_500m raster map) are
parameterized. Parameterized elements show their diagram
border slightly thicker than those of unparameterized
elements. <br>
Figure: Model parameter settings.</p>

<p style="margin-top: 1em">The final model, the list of all
model items, and the Python code window with Save and Run
option are shown in the figures below. <br>
Figure: A model to perform average statistics for zipcode
zones.</p>

<p style="margin-top: 1em">Figure: Items with Python editor
window.</p>

<p style="margin-top: 1em">For convenience, this model for
the Graphical Modeler is also available for download
here.</p>

<p style="margin-top: 1em">The model is run by clicking the
Run button . When all inputs are set, the results can be
displayed as shown in the next Figure: <br>
Figure: Average elevation for ZIP codes using North Carolina
sample dataset as an automatic calculation performed by
Graphical Modeler.</p>

<p style="margin-top: 1em">Managing model properties <br>
When one wants to run model again with the same data or the
same names, it is necessary to use --overwrite option. It
will cause maps with identical names to be overwritten. <br>
Instead of setting it for every module separately it is
handy to change the Model Property settings globally. This
dialog includes also metadata settings, where model name,
<br>
model description and author(s) of the model can be
specified. <br>
Figure: Model properties.</p>

<p style="margin-top: 1em">Defining variables <br>
Another useful trick is the possibility to set variables.
Their content can be used as a substitute for other items.
Value of variables can be values such as raster or vector
<br>
data, integer, float, string value or they may constitute
some region, mapset, file or direction data type. Then it is
not necessary to set any parameters for input data. The <br>
dialog with variable settings is automatically displayed
after model is run. So, instead of model parameters (e.g.
r.import a v.import, see the Figure Run model dialog above)
<br>
there are Variables. <br>
Figure: Model with variable inputs.</p>

<p style="margin-top: 1em">The key point is the usage of %
before the substituting variable and settings in Variables
dialog. For example, in case of a model variable raster that
points to an input file <br>
path and which value is required to be used as one of inputs
for a particular model, it should be specified in the
Variables dialog with its respective name (raster), data
type, <br>
default value and description. Then it should be set in the
module dialog as input called %raster. <br>
Figure: Example of raster file variable settings. <br>
Figure: Example of raster file variable usage.</p>

<p style="margin-top: 1em">Saving the model file <br>
Finally, the model settings can be stored as a GRASS GIS
Model file with *.gxm extension. The advantage is that it
can be shared as a reusable workflow that may be run also by
<br>
other users with different data.</p>

<p style="margin-top: 1em">For example, this model can
later be used to calculate the average precipitation for
every administrative region in Slovakia using the precip
raster data from Slovakia precipita&acirc; <br>
tion dataset and administration boundaries of Slovakia from
Slovak Geoportal (only with a few clicks).</p>

<p style="margin-top: 1em">Handling intermediate data <br>
There can be some data in a model that did not exist before
the process and that it is not worth it to maintain after
the process executes. They can be described as being
Inter&acirc; <br>
mediate by single clicking using the right mouse button, see
figure below. All such data should be deleted following
model completion. The boundary of intermediate component is
<br>
dotted line. <br>
Figure: Usage and definition of intermediate data in
model.</p>

<p style="margin-top: 1em">Using the Python editor <br>
By using the Python editor in the Graphical Modeler one can
add Python code and then run it with Run button or just save
it as a Python script *.py. The result is shown in the <br>
Figure below: <br>
Figure: Python editor in the wxGUI Graphical Modeler.</p>

<p style="margin-top: 1em">Defining loops <br>
In the example below the MODIS MOD13Q1 (NDVI) satellite data
products are used in a loop. The original data are stored as
coded integer values that need to be multiplied by the <br>
value 0.0001 to represent real ndvi values. Moreover, GRASS
GIS provides a predefined color table called ndvi to
represent ndvi data. In this case it is not necessary to
work <br>
with every image separately. <br>
The Graphical Modeler is an appropriate tool to process data
in an effective way using loop and variables (%map for a
particular MODIS image in mapset and %ndvi for original data
<br>
name suffix). After the loop component is added to model, it
is necessary to define series of maps with required settings
of map type, mapset, etc. <br>
Figure: MODIS data representation in GRASS GIS after
Graphical Modeler usage.</p>

<p style="margin-top: 1em">When the model is supplemented
by all of modules, these modules should be ticked in the
boxes of loop dialog. The final model and its results are
shown below. <br>
Figure: Model with loop.</p>

<p style="margin-top: 1em">Figure: MODIS data
representation in GRASS GIS after Graphical Modeler
usage.</p>

<p style="margin-top: 1em">The steps to enter in the
command console of the Graphical Modeler would be as
follows: <br>
# note that the white space usage differs from the standard
command line usage <br>
# rename original image with preselected suffix <br>
g.rename raster = %map,%map.%ndvi <br>
# convert integer values <br>
r.mapcalc expression = %map = %map.%ndvi * 0.0001 <br>
# set color table appropriate for nvdi data <br>
r.colors = map = %map color = ndvi</p>

<p style="margin-top: 1em">SEE ALSO <br>
wxGUI <br>
wxGUI components</p>

<p style="margin-top: 1em">See also selected user models
available from this SVN repository.</p>

<p style="margin-top: 1em">See also the wiki page
(especially various video tutorials).</p>

<p style="margin-top: 1em">AUTHORS <br>
Martin Landa, OSGeoREL, Czech Technical University in
Prague, Czech Republic <br>
Various manual improvements by Ludmila Furkevicova, Slovak
University of Technology in Bratislava, Slovak Republic</p>

<p style="margin-top: 1em">$Date: 2016-09-19 12:21:19 +0200
(Mon, 19 Sep 2016) $</p>

<p style="margin-top: 1em">SOURCE CODE <br>
Available at: wxGUI Graphical Modeler source code
(history)</p>

<p style="margin-top: 1em">Main index | GUI index | Topics
index | Keywords index | Graphical index | Full index</p>

<p style="margin-top: 1em">&Acirc;&copy; 2003-2016 GRASS
Development Team, GRASS GIS 7.2.0 Reference Manual</p>

<p style="margin-top: 1em">GRASS 7.2.0
wxGUI.gmodeler(1grass)</p>
<hr>
</body>
</html>
