<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:10:13 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FLATPAK BUILD-FINIS(1) flatpak build-finish FLATPAK
BUILD-FINIS(1)</p>

<p style="margin-top: 1em">NAME <br>
flatpak-build-finish - Finalize a build directory</p>

<p style="margin-top: 1em">SYNOPSIS <br>
flatpak build-finish [OPTION...] DIRECTORY</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Finalizes a build directory, to prepare it for exporting.
DIRECTORY is the name of the directory.</p>

<p style="margin-top: 1em">The result of this command is
that desktop files, icons and D-Bus service files from the
files subdirectory are copied to a new export subdirectory.
In the metadata file, the <br>
command key is set in the [Application] group, and the
supported keys in the [Environment] group are set according
to the options.</p>

<p style="margin-top: 1em">You should review the exported
files and the application metadata before creating and
distributing an application bundle.</p>

<p style="margin-top: 1em">It is an error to run
build-finish on a directory that has not been initialized as
a build directory, or has already been finalized.</p>

<p style="margin-top: 1em">OPTIONS <br>
The following options are understood:</p>

<p style="margin-top: 1em">-h, --help <br>
Show help options and exit.</p>

<p style="margin-top: 1em">--command=COMMAND <br>
The command to use. If this option is not specified, the
first executable found in files/bin is used.</p>


<p style="margin-top: 1em">--require-version=MAJOR.MINOR.MICRO
<br>
Require this version of later of flatpak to install/update
to this build.</p>

<p style="margin-top: 1em">--share=SUBSYSTEM <br>
Share a subsystem with the host session. This updates the
[Context] group in the metadata. SUBSYSTEM must be one of:
network, ipc. This option can be used multiple times.</p>

<p style="margin-top: 1em">--unshare=SUBSYSTEM <br>
Don&rsquo;t share a subsystem with the host session. This
updates the [Context] group in the metadata. SUBSYSTEM must
be one of: network, ipc. This option can be used multiple
<br>
times.</p>

<p style="margin-top: 1em">--socket=SOCKET <br>
Expose a well known socket to the application. This updates
the [Context] group in the metadata. SOCKET must be one of:
x11, wayland, pulseaudio, system-bus, session-bus. <br>
This option can be used multiple times.</p>

<p style="margin-top: 1em">--nosocket=SOCKET <br>
Don&rsquo;t expose a well known socket to the application.
This updates the [Context] group in the metadata. SOCKET
must be one of: x11, wayland, pulseaudio, system-bus, <br>
session-bus. This option can be used multiple times.</p>

<p style="margin-top: 1em">--device=DEVICE <br>
Expose a device to the application. This updates the
[Context] group in the metadata. DEVICE must be one of: dri,
kvm, all. This option can be used multiple times.</p>

<p style="margin-top: 1em">--nodevice=DEVICE <br>
Don&rsquo;t expose a device to the application. This updates
the [Context] group in the metadata. DEVICE must be one of:
dri, kvm, all. This option can be used multiple times.</p>

<p style="margin-top: 1em">--allow=FEATURE <br>
Allow access to a specific feature. This updates the
[Context] group in the metadata. FEATURE must be one of:
devel, multiarch. This option can be used multiple
times.</p>

<p style="margin-top: 1em">The devel feature allows the
application to access certain syscalls such as ptrace(), and
perf_event_open().</p>

<p style="margin-top: 1em">The multiarch feature allows the
application to execute programs compiled for an ABI other
than the one supported natively by the system. For example,
for the x86_64 <br>
architecture, 32-bit x86 binaries will be allowed as
well.</p>

<p style="margin-top: 1em">--disallow=FEATURE <br>
Disallow access to a specific feature. This updates the
[Context] group in the metadata. FEATURE must be one of:
devel, multiarch. This option can be used multiple
times.</p>

<p style="margin-top: 1em">--filesystem=FS <br>
Allow the application access to a subset of the filesystem.
This updates the [Context] group in the metadata. FS can be
one of: home, host, xdg-desktop, xdg-documents, <br>
xdg-download xdg-music, xdg-pictures, xdg-public-share,
xdg-templates, xdg-videos, xdg-run, xdg-config, xdg-cache,
xdg-data, an absolute path, or a homedir-relative path like
<br>
~/dir or paths relative to the xdg dirs, like
xdg-download/subdir. The optional :ro suffix indicates that
the location will be read-only. The optional :create suffix
<br>
indicates that the location will be read-write and created
if it doesn&rsquo;t exist. This option can be used multiple
times.</p>

<p style="margin-top: 1em">--nofilesystem=FILESYSTEM <br>
Remove access to the specified subset of the filesystem from
the application. This overrides to the Context section from
the application metadata. FILESYSTEM can be one of: <br>
home, host, xdg-desktop, xdg-documents, xdg-download
xdg-music, xdg-pictures, xdg-public-share, xdg-templates,
xdg-videos, an absolute path, or a homedir-relative path
like <br>
~/dir. This option can be used multiple times.</p>

<p style="margin-top: 1em">--env=VAR=VALUE <br>
Set an environment variable in the application. This updates
the [Environment] group in the metadata. This overrides to
the Context section from the application metadata. <br>
This option can be used multiple times.</p>

<p style="margin-top: 1em">--own-name=NAME <br>
Allow the application to own the well known name NAME on the
session bus. If NAME ends with .*, it allows the application
to own all matching names. This updates the [Session <br>
Bus Policy] group in the metadata. This option can be used
multiple times.</p>

<p style="margin-top: 1em">--talk-name=NAME <br>
Allow the application to talk to the well known name NAME on
the session bus. If NAME ends with .*, it allows the
application to talk to all matching names. This updates the
<br>
[Session Bus Policy] group in the metadata. This option can
be used multiple times.</p>

<p style="margin-top: 1em">--system-own-name=NAME <br>
Allow the application to own the well known name NAME on the
system bus. If NAME ends with .*, it allows the application
to own all matching names. This updates the [System <br>
Bus Policy] group in the metadata. This option can be used
multiple times.</p>

<p style="margin-top: 1em">--system-talk-name=NAME <br>
Allow the application to talk to the well known name NAME on
the system bus. If NAME ends with .*, it allows the
application to talk to all matching names. This updates the
<br>
[System Bus Policy] group in the metadata. This option can
be used multiple times.</p>

<p style="margin-top: 1em">--persist=FILENAME <br>
If the application doesn&rsquo;t have access to the real
homedir, make the (homedir-relative) path FILENAME a bind
mount to the corresponding path in the per-application
directory, <br>
allowing that location to be used for persistent data. This
updates the [Context] group in the metadata. This option can
be used multiple times.</p>


<p style="margin-top: 1em">--extra-data=NAME:SHA256:DOWNLOAD-SIZE:INSTALL-SIZE:URL
<br>
Adds information about extra data uris to the app. These
will be downloaded and verified by the client when the app
is installed and placed in the /app/extra directory. You
<br>
can also supply an /app/bin/apply_extra script that will be
run after the files are downloaded.</p>

<p style="margin-top: 1em">--no-exports <br>
Don&rsquo;t look for exports in the build.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Print debug information during command processing.</p>

<p style="margin-top: 1em">--ostree-verbose <br>
Print OSTree debug information during command
processing.</p>

<p style="margin-top: 1em">--version <br>
Print version information and exit.</p>

<p style="margin-top: 1em">EXAMPLES <br>
$ flatpak build-finish /build/my-app --socket=x11
--share=ipc</p>

<p style="margin-top: 1em">Exporting
share/applications/gnome-calculator.desktop <br>
Exporting
share/dbus-1/services/org.gnome.Calculator.SearchProvider.service
<br>
More than one executable <br>
Using gcalccmd as command <br>
Please review the exported files and the metadata</p>

<p style="margin-top: 1em">SEE ALSO <br>
flatpak(1), flatpak-build-init(1), flatpak-build(1),
flatpak-build-export(1)</p>

<p style="margin-top: 1em">flatpak FLATPAK
BUILD-FINIS(1)</p>
<hr>
</body>
</html>
