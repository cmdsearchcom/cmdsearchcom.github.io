<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>moc(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">moc(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">moc(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
moc - generate Qt meta object support code
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>moc</b> [-o file] [-i] [-f] [-k] [-ldbg] [-nw] [-p path] [-q path] [-v] file
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This page documents the <b>Meta Object Compiler</b> for the Qt GUI application
  framework. The <b>moc</b> reads one or more C++ class declarations from a C++
  header or source file and generates one C++ source file containing meta object
  information for the classes. The C++ source file generated by the <b>moc</b>
  must be compiled and linked with the implementation of the class (or it can be
  #included into the class's source file).
<div class="Pp"></div>
If you use <b>qmake</b> to create your Makefiles, build rules will be included
  that call the <b>moc</b> when required, so you will not need to use the
  <b>moc</b> directly.
<div class="Pp"></div>
In brief, the meta object system is a structure used by Qt (see
  <b>http://doc.trolltech.com</b>) for component programming and run time type
  information. It adds properties and inheritance information to (some) classes
  and provides a new type of communication between those instances of those
  classes, signal-slot connections.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-o file</i></dt>
  <dd class="It-tag">Write output to <i>file</i> rather than to stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-f</i></dt>
  <dd class="It-tag">Force the generation of an #include statement in the
      output. This is the default for files whose name matches the regular
      expression .[hH][^.]* (i.e. the extension starts with <b>H</b> or <b>h</b>
      ). This option is only useful if you have header files that do not follow
      the standard naming conventions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-i</i></dt>
  <dd class="It-tag">Do not generate an #include statement in the output. This
      may be used to run <b>moc</b> on a C++ file containing one or more class
      declarations. You should then #include the meta object code in the .cpp
      file (see USAGE below). If both <i>-f</i> and <i>-i</i> are present, the
      last one wins.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-nw</i></dt>
  <dd class="It-tag">Do not generate any warnings. Not recommended.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-ldbg</i></dt>
  <dd class="It-tag">Write a flood of lex debug information to stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-p path</i></dt>
  <dd class="It-tag">Makes <b>moc</b> prepend <i>path</i>/ to the file name in
      the generated #include statement (if one is generated).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-q path</i></dt>
  <dd class="It-tag">Makes <b>moc</b> prepend <i>path</i>/ to the file name of
      qt #include files in the generated code.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-v</i></dt>
  <dd class="It-tag">Displays the version of <b>moc</b> and Qt.</dd>
</dl>
<div class="Pp"></div>
You can explicitly tell the <b>moc</b> not to parse parts of a header file. It
  recognizes any C++ comment (//) that contains the substrings MOC_SKIP_BEGIN or
  MOC_SKIP_END. They work as you would expect and you can have several levels of
  them. The net result as seen by the <b>moc</b> is as if you had removed all
  lines between a MOC_SKIP_BEGIN and a MOC_SKIP_END
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
<b>moc</b> is almost always invoked by <b>make</b>(1), not by hand.
<div class="Pp"></div>
<b>moc</b> is typically used with an input file containing class declarations
  like this:
<div class="Pp"></div>
<br/>
<pre>
class YourClass : public QObject {
    Q_OBJECT
    Q_PROPERTY( ... )
    Q_CLASSINFO( ... )
<div class="Pp"></div>
public:
    YourClass( QObject * parent=0, const char * name=0 );
    ~YourClass();
<div class="Pp"></div>
signals:
<div class="Pp"></div>
public slots:
<div class="Pp"></div>
};
</pre>
<br/>
<div class="Pp"></div>
Here is a useful makefile rule if you only use GNU make:
<div class="Pp"></div>
<br/>
<pre>
m%.cpp: %.h
        moc $&lt; -o $@
</pre>
<br/>
<div class="Pp"></div>
If you want to write portably, you can use individual rules of the following
  form:
<div class="Pp"></div>
<br/>
<pre>
mNAME.cpp: NAME.h
        moc $&lt; -o $@
</pre>
<br/>
<div class="Pp"></div>
You must also remember to add <i>mNAME.cpp</i> to your SOURCES (substitute your
  favorite name) variable and <i>mNAME.o</i> to your OBJECTS variable.
<div class="Pp"></div>
(While we prefer to name our C++ source files .cpp, the <b>moc</b> doesn't know
  that, so you can use .C, .cc, .CC, .cxx or even .c++ if you prefer.)
<div class="Pp"></div>
If you have class declarations in C++ files, we recommend that you use a
  makefile rule like this:
<div class="Pp"></div>
<br/>
<pre>
NAME.o: mNAME.cpp
<div class="Pp"></div>
mNAME.cpp: NAME.cpp
        moc -i $&lt; -o $@
</pre>
<br/>
<div class="Pp"></div>
This guarantees that <b>make</b>(1) will run the <b>moc</b> before it compiles
  <i>NAME.cpp</i>. You can then put
<div class="Pp"></div>
#include &quot;nNAME.cpp&quot;
<div class="Pp"></div>
at the end of <i>NAME.cpp</i>, where all the classes declared in that file are
  fully known.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
Sometimes you may get linkage errors, saying that YourClass::className() is
  undefined or that YourClass lacks a vtbl. Those errors happen most often when
  you forget to compile the moc-generated C++ code or include that object file
  in the link command.
<div class="Pp"></div>
The <b>moc</b> will warn you about a number of dangerous or illegal constructs.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The <b>moc</b> does not expand #include or #define, it simply skips any
  preprocessor directives it encounters. This is regrettable, but is normally
  not a problem in practice.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>moc</b> does not handle all of C++. The main problem is that class
  templates cannot have signals or slots. This is an important bug. Here is an
  example:
<div class="Pp"></div>
<br/>
<pre>
class SomeTemplate&lt;int&gt; : public QFrame {
    Q_OBJECT
    ....
signals:
    void bugInMocDetected( int );
};
</pre>
<br/>
<div class="Pp"></div>
Less importantly, the following constructs are illegal. All of them have have
  alternatives which we think are usually better, so removing these limitations
  is not a high priority for us.
<h2 class="Ss" title="Ss" id="Multiple_inheritance_requires_QObject_to_be_first."><a class="selflink" href="#Multiple_inheritance_requires_QObject_to_be_first.">Multiple
  inheritance requires QObject to be first.</a></h2>
If you are using multiple inheritance, <b>moc</b> assumes that the <b>first</b>
  inherited class is a subclass of QObject. Also, be sure that <b>only</b> the
  first inherited class is a QObject.
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject, public OtherClass {
    ...
};
</pre>
<br/>
<div class="Pp"></div>
This bug is almost impossible to fix; since the <b>moc</b> does not expand
  #include or #define, it cannot find out which one of the base classes is a
  QObject.
<h2 class="Ss" title="Ss" id="Function_pointers_cannot_be_arguments_to_signals_or_slots."><a class="selflink" href="#Function_pointers_cannot_be_arguments_to_signals_or_slots.">Function
  pointers cannot be arguments to signals or slots.</a></h2>
In most cases where you would consider that, we think inheritance is a better
  alternative. Here is an example of illegal syntax:
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    ...
public slots:
    // illegal
    void apply( void (*apply)(List *, void *), void * );
};
</pre>
<br/>
<div class="Pp"></div>
You can work around this restriction like this:
<div class="Pp"></div>
<br/>
<pre>
typedef void (*ApplyFunctionType)( List *, void * );
<div class="Pp"></div>
class SomeClass : public QObject {
    Q_OBJECT
    ...
public slots:
    void apply( ApplyFunctionType, char * );
};
</pre>
<br/>
<div class="Pp"></div>
It may sometimes be even better to replace the function pointer with inheritance
  and virtual functions, signals or slots.
<h2 class="Ss" title="Ss" id="Friend_declarations_cannot_be_placed_in_signals_or_slots_sections"><a class="selflink" href="#Friend_declarations_cannot_be_placed_in_signals_or_slots_sections">Friend
  declarations cannot be placed in signals or slots sections</a></h2>
Sometimes it will work, but in general, friend declarations cannot be placed in
  <b>signals</b> or <b>slots</b> sections. Put them in the good old
  <b>private</b>, <b>protected</b> or <b>public</b> sections instead. Here is an
  example of the illegal syntax:
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    ...
signals:
    friend class ClassTemplate&lt;char&gt;; // illegal
};
</pre>
<br/>
<h2 class="Ss" title="Ss" id="Signals_and_slots_cannot_be_upgraded"><a class="selflink" href="#Signals_and_slots_cannot_be_upgraded">Signals
  and slots cannot be upgraded</a></h2>
The C++ feature of upgrading an inherited member function to <b>public</b>
  status is not extended to cover signals and slots. Here is an illegal example:
<div class="Pp"></div>
<br/>
<pre>
class Whatever : public QButtonGroup {
    ...
public slots:
    QButtonGroup::buttonPressed; // illegal
    ...
};
</pre>
<br/>
<div class="Pp"></div>
The QButtonGroup::buttonPressed() slot is protected.
<div class="Pp"></div>
C++ quiz: What happens if you try to upgrade a protected member function which
  is overloaded?
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">- All the functions are upgraded.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">- That is not legal C++.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Type_macros_cannot_be_used_for_signal_and_slot_arguments"><a class="selflink" href="#Type_macros_cannot_be_used_for_signal_and_slot_arguments">Type
  macros cannot be used for signal and slot arguments</a></h2>
Since the <b>moc</b> does not expand #define, type macros that take an argument
  will not work in signals and slots. Here is an illegal example:
<div class="Pp"></div>
<br/>
<pre>
#ifdef ultrix
#define SIGNEDNESS(a) unsigned a
#else
#define SIGNEDNESS(a) a
#endif
class Whatever : public QObject {
    ...
signals:
    void someSignal( SIGNEDNESS(int) ); // illegal
};
</pre>
<div class="Pp"></div>
<pre>
A #define without arguments works.
</pre>
<br/>
<h2 class="Ss" title="Ss" id="Nested_classes_cannot_be_in_the_signals_or_slots_sections_nor_have_signals_or_slots"><a class="selflink" href="#Nested_classes_cannot_be_in_the_signals_or_slots_sections_nor_have_signals_or_slots">Nested
  classes cannot be in the signals or slots sections nor have signals or
  slots</a></h2>
Here's an example:
<div class="Pp"></div>
<br/>
<pre>
class A {
    Q_OBJECT
public:
    class B {
    public slots: // illegal
        void b();
        ...
    };
signals:
    class B {  // illegal
        void b();
	...
    }:
};
</pre>
<br/>
<h2 class="Ss" title="Ss" id="Constructors_cannot_be_used_in_signals_or_slots_sections"><a class="selflink" href="#Constructors_cannot_be_used_in_signals_or_slots_sections">Constructors
  cannot be used in signals or slots sections</a></h2>
It is a mystery to us why anyone would put a constructor on either the
  <b>signals</b> or <b>slots</b> sections. You can't, anyway (except that it
  happens to work in some cases). Put them in <b>private</b>, <b>protected</b>
  or <b>public</b> sections, where they belong. Here is an example of the
  illegal syntax:
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
public slots:
    SomeClass( QObject *parent, const char *name )
        : QObject( parent, name ) {} // illegal
    ...
};
</pre>
<br/>
<h2 class="Ss" title="Ss" id="Properties_need_to_be_declared_before_the_public_section_that_contains_the_respective_get_and_set_functions"><a class="selflink" href="#Properties_need_to_be_declared_before_the_public_section_that_contains_the_respective_get_and_set_functions">Properties
  need to be declared before the public section that contains the respective get
  and set functions</a></h2>
Declaring the first property within or after the public section that contains
  the type definition and the respective get and set functions does not work as
  expected. The <b>moc</b> will complain that it can neither find the functions
  nor resolve the type. Here is an example of the illegal syntax:
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
public:
    ...
    // illegal
    Q_PROPERTY( Priority priority READ priority WRITE setPriority )
    Q_ENUMS( Priority )
    enum Priority { High, Low, VeryHigh, VeryLow };
    void setPriority( Priority );
    Priority priority() const;
    ...
};
</pre>
<br/>
<div class="Pp"></div>
Work around this limitation by declaring all properties at the beginning of the
  class declaration, right after Q_OBJECT:
<div class="Pp"></div>
<br/>
<pre>
class SomeClass : public QObject {
    Q_OBJECT
    Q_PROPERTY( Priority priority READ priority WRITE setPriority )
    Q_ENUMS( Priority )
public:
    ...
    enum Priority { High, Low, VeryHigh, VeryLow };
    void setPriority( Priority );
    Priority priority() const;
    ...
};
</pre>
<br/>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>http://www.trolltech.com</b>, <b>C++ ARM, section r.11.3</b> (for the answer
  to the quiz), and <b>http://doc.trolltech.com</b> (for complete Qt
  documentation).</div>
<table class="foot">
  <tr>
    <td class="foot-date">24 June 2001</td>
    <td class="foot-os">Trolltech AS</td>
  </tr>
</table>
</body>
</html>
