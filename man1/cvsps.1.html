<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>cvsps(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">cvsps(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">cvsps(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
CVSps - create patchset information from CVS
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>cvsps</b> [-h] [-x] [-u] [-z &lt;fuzz&gt;] [-g] [-s &lt;patchset&gt;] [-a
  &lt;author&gt;] [-f &lt;file&gt;] [-d &lt;date1&gt; [-d &lt;date2&gt;]] [-l
  &lt;text&gt;] [-b &lt;branch&gt;] [-r &lt;tag&gt; [-r &lt;tag&gt;]] [-p
  &lt;directory&gt;] [-v] [-t] [--norc] [--summary-first] [--test-log
  &lt;filename&gt;] [--bkcvs] [--no-rlog] [--diff-opts &lt;option string&gt;]
  [--cvs-direct] [--debuglvl &lt;bitmask&gt;] [-Z &lt;compression&gt;] [--root
  &lt;cvsroot&gt;] [-q] [-A] [&lt;repository&gt;]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
CVSps is a program for generating 'patchset' information from a CVS repository.
  A patchset in this case is defined as a set of changes made to a collection of
  files, and all committed at the same time (using a single 'cvs commit'
  command). This information is valuable to seeing the big picture of the
  evolution of a cvs project. While cvs tracks revision information, it is often
  difficult to see what changes were committed &#x00B4;atomically' to the
  repository.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">display usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">ignore (and rebuild) ~/.cvsps/cvsps.cache file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b></dt>
  <dd class="It-tag">update ~/.cvsps/cvsps.cache file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z &lt;fuzz&gt;</b></dt>
  <dd class="It-tag">set the timestamp fuzz factor for identifying patch
    sets</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">generate diffs of the selected patch sets</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s
    &lt;patchset&gt;[-[&lt;patchset&gt;]][,&lt;patchset&gt;...]</b></dt>
  <dd class="It-tag">generate a diff for a given patchsets and patchset
    ranges</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a &lt;author&gt;</b></dt>
  <dd class="It-tag">restrict output to patchsets created by author</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f &lt;file&gt;</b></dt>
  <dd class="It-tag">restrict output to patchsets involving file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d &lt;date1&gt; -d &lt;date2&gt;</b></dt>
  <dd class="It-tag">if just one date specified, show revisions newer than
      date1. If two dates specified, show revisions between two dates.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l &lt;regex&gt;</b></dt>
  <dd class="It-tag">restrict output to patchsets matching regex in log
    message</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b &lt;branch&gt;</b></dt>
  <dd class="It-tag">restrict output to patchsets affecting history of branch.
      If you want to restrict to the main branch, use a branch of 'HEAD'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r &lt;tag1&gt; -r &lt;tag2&gt;</b></dt>
  <dd class="It-tag">if just one tag specified, show revisions since tag1. If
      two tags specified, show revisions between the two tags.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p &lt;dir&gt;</b></dt>
  <dd class="It-tag">output individual patchsets as files in &lt;dir&gt; as
      &lt;dir&gt;/&lt;patchset&gt;.patch</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">show very verbose parsing messages</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">show some brief memory usage statistics</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--norc</b></dt>
  <dd class="It-tag">when invoking cvs, ignore the .cvsrc file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--summary-first</b></dt>
  <dd class="It-tag">when multiple patchset diffs are being generated, put the
      patchset summary for all patchsets at the beginning of the output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--test-log &lt;captured cvs log file&gt;</b></dt>
  <dd class="It-tag">for testing changes, you can capture cvs log output, then
      test against this captured file instead of hammering some poor CVS
    server</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bkcvs</b></dt>
  <dd class="It-tag">(see note below) for use in parsing the BK-&gt;CVS tree log
      formats only. This enables some hacks which are not generally
    applicable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-rlog</b></dt>
  <dd class="It-tag">disable the use of rlog internally. Note: rlog is required
      for stable PatchSet numbering. Use with care.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--diff-opts &lt;option string&gt;</b></dt>
  <dd class="It-tag">send a custom set of options to diff, for example to
      increase the number of context lines, or change the diff format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cvs-direct (--no-cvs-direct)</b></dt>
  <dd class="It-tag">enable (disable) built-in cvs client code. This enables the
      'pipelining' of multiple requests over a single client, reducing the
      overhead of handshaking and authentication to one per PatchSet instead of
      one per file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debuglvl &lt;bitmask&gt;</b></dt>
  <dd class="It-tag">enable various debug output channels.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z &lt;compression&gt;</b></dt>
  <dd class="It-tag">A value 1-9 which specifies amount of compression. A value
      of 0 disables compression.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--root &lt;cvsroot&gt;</b></dt>
  <dd class="It-tag">Override the setting of CVSROOT (overrides working dir. and
      environment). For --cvs-direct only.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">Be quiet about warnings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b></dt>
  <dd class="It-tag">Show ancestor branch when a new branch is found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;repository&gt;</b></dt>
  <dd class="It-tag">Operate on the specified repository (overrides working
      dir.)</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTE_ON_TAG_HANDLING"><a class="selflink" href="#NOTE_ON_TAG_HANDLING">NOTE
  ON TAG HANDLING</a></h1>
Tags are fundamentally 'file at a time' in cvs, but like everything else, it
  would be nice to imagine that they are 'repository at a time.' The approach
  cvsps takes is that a tag is assigned to a patchset. The meaning of this is
  that after this patchset, every revision of every file is after the tag (and
  conversely, before this patchset, at least one file is still before the tag).
  However, there are two kinds of inconsistent (or 'funky') tags that can be
  created, even when following best practices for cvs.
<div class="Pp"></div>
The first is what is called a FUNKY tag. A funky tag is one where there are
  patchsets which are chronologically (and thus by patchset id) earlier than the
  tag, but are tagwise after. These tags will be marked as '**FUNKY**' in the
  Tag: section of the cvsps output. When a funky tag is specified as one of the
  '-r' arguments, there are some number of patchsets which need to be considered
  out of sequence. In this case, the patchsets themselves will be labeled FUNKY
  and will be processed correctly.
<div class="Pp"></div>
The second is called an INVALID tag. An invalid tag is a tag where there are
  patchsets which are chronologically (and thus by patchset id) earlier than the
  tag, but which have members which are tagwise both before, and after the tag,
  in the same patchset. If an INVALID tag is specified as one of the '-r'
  arguments, cvsps will flag each member of the affected patchsets as before or
  after the tag and the patchset summary will indicate which members are which,
  and diffs will be generated accordingly.
<h1 class="Sh" title="Sh" id="NOTE_ON_CVS_VERSIONS"><a class="selflink" href="#NOTE_ON_CVS_VERSIONS">NOTE
  ON CVS VERSIONS</a></h1>
Among the different cvs subcommands used by cvsps is the 'rlog' command. The
  rlog command is used to get revision history of a module, and it disregards
  the current working directory. The important difference between 'rlog' and
  'log' (from cvsps perspective) is the 'rlog' will include log data for files
  not in the current working directory. The impact of this is mainly when there
  are directories which at one time had files, but are now empty, and have been
  pruned from the working directory with the '-P' option. If 'rlog' is not used,
  these files logs will not be parsed, and the PatchSet numbering will be
  unstable.
<div class="Pp"></div>
The main problem with 'rlog' is that, until cvs version 1.11.1, 'rlog' was an
  alias for the 'log' command. This means, for old versions of cvs, 'rlog' has
  different semantics and usage. cvsps will attempt to work around this problem
  by detecting capable versions of cvs. If an old version is detected, 'log'
  will be used instead of 'rlog', and YMMV.
<h1 class="Sh" title="Sh" id="NOTE_ON_GENERATED_DIFFS"><a class="selflink" href="#NOTE_ON_GENERATED_DIFFS">NOTE
  ON GENERATED DIFFS</a></h1>
Another important note is that cvsps will attempt, whenever possible, to use the
  r-commands (rlog, rdiff and co) instead of the local commands (log, diff, and
  update). This is to allow cvsps to function without a completely checked out
  tree. Because these r-commands are used, the generated diffs will include the
  module directory in them, and it is recommended to apply them in the working
  directory with the -p1 option to the patch command. However, if the
  --diff-opts option is specified (to change, for example, the lines of
  context), then rdiff cannot be used, because it doesn't support arbitrary
  options. In this case, the patches will be generated without the module
  directory in the path, and -p0 will be required when applying the patch. When
  diffs are generated in cvs-direct mode (see below), however, they will always
  be -p1 style patches.
<h1 class="Sh" title="Sh" id="NOTE_ON_BKCVS"><a class="selflink" href="#NOTE_ON_BKCVS">NOTE
  ON BKCVS</a></h1>
The --bkcvs option is a special operating mode that should only be used when
  parsing the log files from the BK -&gt; CVS exported linux kernel trees. cvsps
  uses special semantics for recreating the BK ChangeSet metadata that has been
  embedded in the log files for those trees. The --bkcvs option should only be
  specified when the cache file is being created or updated (i.e. initial run of
  cvsps, or when -u and -x options are used).
<h1 class="Sh" title="Sh" id="NOTE_ON_CVS-DIRECT"><a class="selflink" href="#NOTE_ON_CVS-DIRECT">NOTE
  ON CVS-DIRECT</a></h1>
As of version 2.0b6 cvsps has a partial implementation of the cvs client code
  built in. This reduces the RTT and/or handshaking overhead from one per
  patchset member to one per patchset. This dramatically increases the speed of
  generating diffs over a slow link, and improves the consistency of operation.
  Currently the --cvs-direct option turns on the use of this code, but it very
  well may be default by the time 2.0 comes out. The built-in cvs code attempts
  to be compatible with cvs, but may have problems, which should be reported. It
  honors the CVS_RSH and CVS_SERVER environment variables, but does not parse
  the ~/.cvsrc file.
<h1 class="Sh" title="Sh" id="NOTE_ON_CVSPS_RC_FILE"><a class="selflink" href="#NOTE_ON_CVSPS_RC_FILE">NOTE
  ON CVSPS RC FILE</a></h1>
CVSps parses an rc file at startup. This file should be located in
  ~/.cvsps/cvspsrc. The file should contain arguments, in the exact syntax as
  the command line, one per line. If an argument takes a parameter, the
  parameter should be on the same line as the argument.
<h1 class="Sh" title="Sh" id="NOTE_ON_DATE_FORMATS"><a class="selflink" href="#NOTE_ON_DATE_FORMATS">NOTE
  ON DATE FORMATS</a></h1>
All dates are reported in localtime. This can be overridden (as usual) using the
  TZ environment variable. Dates as arguments must be in the format 'yyyy/mm/dd
  hh:mm:ss'; for example,
<dl class="Bl-tag">
  <dt class="It-tag">
  <div class="Pp"></div>
  </dt>
  <dd class="It-tag">$ cvsps -d '2004/05/01 00:00:00' -d '2004/07/07
    12:00:00'</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>cvs</b>(<b>1</b>), <b>ci</b>(<b>1</b>), <b>co</b>(<b>1</b>),
  <b>cvs</b>(<b>5</b>), <b>cvsbug</b>(<b>8</b>), <b>diff</b>(<b>1</b>),
  <b>grep</b>(<b>1</b>), <b>patch</b>(<b>1</b>), <b>rcs</b>(<b>1</b>),
  <b>rcsdiff</b>(<b>1</b>), <b>rcsmerge</b>(<b>1</b>), <b>rlog</b>(<b>1</b>).
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to &quot;David Mansfield &lt;cvsps@dm.cobite.com&gt;&quot;
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
No known bugs.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
