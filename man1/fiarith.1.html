<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>FIARITH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FIARITH(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">FIARITH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
fiarith - evaluating arithmetic expressions on images as operands
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>fiarith</b> [ <i>options</i>] <i>&quot;&lt;expression&gt;&quot;
  </i>[<i>-o|--output &lt;output.fits&gt;</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The purpose of this program is to evaluate &lt;expression&gt; which is intented
  to contain arithmetic operations and functions on FITS images (of the same
  size). See the section &quot;Examples&quot; below for examples on the syntax
  of &lt;expression&gt;
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<h2 class="Ss" title="Ss" id="General_options:"><a class="selflink" href="#General_options:">General
  options:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Gives general summary about the command line options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--long-help</b>, <b>--help-long</b></dt>
  <dd class="It-tag">Gives a detailed list of command line options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--wiki-help</b>, <b>--help-wiki</b>,
    <b>--mediawiki-help</b>, <b>--help-mediawiki</b></dt>
  <dd class="It-tag">Gives a detailed list of command line options in Mediawiki
      format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b>, <b>--version-short</b>,
    <b>--short-version</b></dt>
  <dd class="It-tag">Gives some version information about the program.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--output</b> &lt;fits&gt;</dt>
  <dd class="It-tag">The name of the output file (omitting or specifing '-'
      yields the output to be written to stdout).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--size</b> &lt;sx&gt;,&lt;sy&gt;</dt>
  <dd class="It-tag">Horizontal and vertical size of the output image
      (meaningless if &lt;expression&gt; contains any existing FITS image).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b>, <b>--input-mask</b> &lt;fits&gt;</dt>
  <dd class="It-tag">Input mask file to co-add to output image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--output-mask</b> &lt;fits&gt;</dt>
  <dd class="It-tag">Name of output mask file to create.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--data</b> &lt;spec&gt;</dt>
  <dd class="It-tag">Output pixel data format specification.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>, <b>--bitpix</b> &lt;bitpix&gt;</dt>
  <dd class="It-tag">Standard FITS output bitpix value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>, <b>--apply-mask</b></dt>
  <dd class="It-tag">Resets pixel values to zero if masked.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b>, <b>--header</b> &lt;fits&gt;</dt>
  <dd class="It-tag">Inherit output header from the specified FITS file.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Available_arithmetic_operators:"><a class="selflink" href="#Available_arithmetic_operators:">Available
  arithmetic operators:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">+</dt>
  <dd class="It-tag">Addition.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-</dt>
  <dd class="It-tag">Subtraction.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">*</dt>
  <dd class="It-tag">Multiplication.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">/</dt>
  <dd class="It-tag">Division. Dividing by zero yields zero automatically.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Available_arithmetic_functions:"><a class="selflink" href="#Available_arithmetic_functions:">Available
  arithmetic functions:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">sin(.), cos(.), tan(.)</dt>
  <dd class="It-tag">Trigonometric functions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">asin(.), acos(.), atan(.), atan2(.,.), arg(.,.)</dt>
  <dd class="It-tag">Inverse trigonometric functions.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">abs(.), sq(.), sqrt(.), exp(.), log(.)</dt>
  <dd class="It-tag">Absolute value, square, Square root, exponential and
      natural logarithm functions.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Available_image_functions:"><a class="selflink" href="#Available_image_functions:">Available
  image functions:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag">min(....)</dt>
  <dd class="It-tag">The per pixel minimal value of pixel intensities of the
      images listed (separated by comma) in the argument of the function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">max(....)</dt>
  <dd class="It-tag">The per pixel maximal value of pixel intensities of the
      images listed (separated by comma) in the argument of the function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">mean(...)</dt>
  <dd class="It-tag">The per pixel mean value of pixel intensities of the images
      listed (separated by comma) in the argument of the function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">norm(.)</dt>
  <dd class="It-tag">The mean of the pixel values on the image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">sign(.)</dt>
  <dd class="It-tag">The per pixel sign function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">theta(.)</dt>
  <dd class="It-tag">The per pixel Heaviside step function.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">laplace(.)</dt>
  <dd class="It-tag">The Laplace transform of the image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">scatter(.)</dt>
  <dd class="It-tag">Noise level estimation for the image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">corr(.,.)</dt>
  <dd class="It-tag">Correlation between two images.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">smooth(&lt;image&gt;,&lt;sigma&gt;,&lt;size&gt;)</dt>
  <dd class="It-tag">The smoothed variant of the first argument (threated as an
      image), which is yielded by the convolution with a Gaussian profile with a
      standard deviation of &lt;sigma&gt;, evaluated on a kernel stamp with the
      size of &lt;size&gt;.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">fiarith &quot;'img1.fits'-'orig.fits'&quot; -o
    diff.fits</dt>
  <dd class="It-tag">Calculates the per pixel difference between images
      &quot;img1.fits&quot; and &quot;orig.fits&quot; and stores the result in
      &quot;diff.fits&quot;.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fiarith -s 512,512 &quot;137.42&quot; -o constant.fits</dt>
  <dd class="It-tag">Creates a new image with the size of 512 by 512 pixels with
      the constant value of 137.42.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fiarith &quot;'-'*26&quot; -o -</dt>
  <dd class="It-tag">Multiplies the pixel intensities of the image read from the
      standard input by 26 and writes the result to the standard output. The
      &quot;-o -&quot; can either be omitted, since by default the output is
      written to stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fiarith -s 512,512
    &quot;['input.fits'](a/(1-0.3*(X^2-Y^2)))&quot; -o flattened.fits</dt>
  <dd class="It-tag">This invocation evaluates the
      &quot;a/(1-0.3*(X^2+Y^2))&quot; expression on each pixel of the image
      &quot;input.fits&quot;, where &quot;a&quot; referes to the pixel value
      itself and X and Y are the normalized spatial coordinates. The
      normalization is always done as X=(2*x-SX)/(SX) and Y=(2*y-SY)/SX, i.e.
      the X and Y coordinates are zero at the center of the images, X has a
      unity absolute value at the left and right edges and Y is scaled properly
      to X.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">fiarith
    &quot;('R.fits'-'B.fits'-0.5*'D.fits')*(norm('F.fits')/'F.fits')&quot; -o
    C.fits</dt>
  <dd class="It-tag">This operation performs a simple bias, dark and flat
      calibration on the input raw image &quot;R.fits&quot;, expecting
      &quot;B.fits&quot;, &quot;D.fits&quot; and &quot;F.fits&quot; to be the
      master bias, dark and flat calibration frames, respectively; and assuming
      an exposure time for the raw image which is the half of the exposure time
      of the master dark frame. Due to the &quot;norm(...)&quot; function, the
      mean intensity level of the image is kept to be the same as it is in the
      raw image.</dd>
</dl>
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Report bugs to &lt;apal@szofi.net&gt;, see also http://fitsh.net/.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright &#x00A9; 1996, 2002, 2004-2008, 2010-2015; Pal, Andras
  &lt;apal@szofi.net&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 2016</td>
    <td class="foot-os">fiarith 1.0pre3 (0.9.2@2016.09.23)</td>
  </tr>
</table>
</body>
</html>
