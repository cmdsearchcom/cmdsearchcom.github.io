<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:05:08 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DOVEADM-MAILBOX-CRYPTOKEY(1) Dovecot
DOVEADM-MAILBOX-CRYPTOKEY(1)</p>

<p style="margin-top: 1em">NAME <br>
doveadm-mailbox-cryptokey - Mail crypt plugin management</p>

<p style="margin-top: 1em">SYNOPSIS <br>
doveadm -o plugin/mail_crypt_private_password=password [ -Dv
][ -f formatter ] mailbox cryptokey
export|generate|list|password [ -u username | -A ][ -S ][ -F
file ] [ other <br>
options ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Generate new keypair for user or folder. The new keypair is
marked as active.</p>

<p style="margin-top: 1em">OPTIONS <br>
options:</p>

<p style="margin-top: 1em">-A If the -A option is present,
the command will be performed for all users. Using this
option in combination with system users from userdb { driver
= passwd } is not recom&acirc; <br>
mended, because it contains also users with a lower UID than
the one configured with the first_valid_uid setting.</p>

<p style="margin-top: 1em">When the SQL userdb module is
used make sure that the iterate_query setting in
/etc/dovecot/dovecot-sql.conf.ext matches your database
layout. When using the LDAP userdb <br>
module, make sure that the iterate_attrs and iterate_filter
settings in /etc/dovecot/dovecot-ldap.conf.ext match your
LDAP schema. Otherwise doveadm(1) will be unable to <br>
iterate over all users.</p>

<p style="margin-top: 1em">-F file <br>
Execute the command for all the users in the file. This is
similar to the -A option, but instead of getting the list of
users from the userdb, they are read from the <br>
given file. The file contains one username per line.</p>

<p style="margin-top: 1em">-S socket_path <br>
The option&rsquo;s argument is either an absolute path to a
local UNIX domain socket, or a hostname and port
(hostname:port), in order to connect a remote host via a TCP
socket.</p>

<p style="margin-top: 1em">This allows an administrator to
execute doveadm(1) mail commands through the given
socket.</p>

<p style="margin-top: 1em">-u user/mask <br>
Run the command only for the given user. It&rsquo;s also
possible to use &rsquo;*&rsquo; and &rsquo;?&rsquo;
wildcards (e.g. -u *@example.org). <br>
When neither the -A option, nor the -F file option, nor the
-u user was specified, the command will be executed with the
environment of the currently logged in user.</p>

<p style="margin-top: 1em">-o
plugin/mail_crypt_private_password=password <br>
Dovecot option, needed if you use password protected
keys</p>

<p style="margin-top: 1em">SUBCOMMANDS <br>
export [ -U ] | mailbox-mask</p>

<p style="margin-top: 1em">-U Operate on user keypair
only</p>

<p style="margin-top: 1em">Exports user&rsquo;s or
folder&rsquo;s keypair(s) in PEM format. If the keys are
password protected, -o is needed.</p>

<p style="margin-top: 1em">generate [ -Rf [ -U ] |
mailbox-mask ]</p>

<p style="margin-top: 1em">-U Operate on user keypair
only</p>

<p style="margin-top: 1em">-R Re-encrypt all folder keys
with current active user key</p>

<p style="margin-top: 1em">-f Force keypair creation,
normally keypair is only created if none found</p>

<p style="margin-top: 1em">Generates new keypair for user
or folder. If you want to generate new user key and use it
to secure your folder keys, use generate -u username
-UR.</p>

<p style="margin-top: 1em">If you want to password-protect
your key here, use -o.</p>

<p style="margin-top: 1em">list [ -U ] | mailbox-mask</p>

<p style="margin-top: 1em">-U Operate on user keypair
only</p>

<p style="margin-top: 1em">List all keys for user or
folder. No password is required.</p>

<p style="margin-top: 1em">password [ -N | -n password ] [
-O | -o password ] [ -C ]</p>

<p style="margin-top: 1em">-O Ask for old password</p>

<p style="margin-top: 1em">-o old-password <br>
Provide old password</p>

<p style="margin-top: 1em">-N Ask for new password</p>

<p style="margin-top: 1em">-n new-password <br>
Provide new password</p>

<p style="margin-top: 1em">-C Clear (unset/remove)
password. Your key will not be protected by password.</p>

<p style="margin-top: 1em">Set, change or clear password
from your user key.</p>

<p style="margin-top: 1em">SEE ALSO <br>
doveadm(1)</p>

<p style="margin-top: 1em">Dovecot v2.2 2016-01-12
DOVEADM-MAILBOX-CRYPTOKEY(1)</p>
<hr>
</body>
</html>
