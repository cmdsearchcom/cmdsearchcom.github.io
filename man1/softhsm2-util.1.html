<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:38:20 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SOFTHSM2-UTIL(1) General Commands Manual
SOFTHSM2-UTIL(1)</p>

<p style="margin-top: 1em">NAME <br>
softhsm2-util - support tool for libsofthsm2</p>

<p style="margin-top: 1em">SYNOPSIS <br>
softhsm2-util --show-slots</p>

<p style="margin-top: 1em">softhsm2-util --init-token
--slot number --label text [--so-pin PIN --pin PIN]</p>

<p style="margin-top: 1em">softhsm2-util --import path
[--file-pin PIN] --slot number [--pin PIN --no-public-key]
--label text --id hex</p>

<p style="margin-top: 1em">DESCRIPTION <br>
softhsm2-util is a support tool mainly for libsofthsm2. It
can also be used with other PKCS#11 libraries by using the
option --module</p>

<p style="margin-top: 1em">Read the sections below to get
more information on the libsofthsm2 and PKCS#11. Most
applications assumes that the token they want to use is
already initialized. It is then up <br>
to the user to initialize the PKCS#11 token. This is done by
using the PKCS#11 interface, but instead of writing your own
tool you can use the softhsm2-util tool.</p>

<p style="margin-top: 1em">Keys are usually created
directly in the token, but the user may want to use an
existing key pair. Keys can be imported to a token by using
the PKCS#11 interface, but this tool <br>
can also be used if the user has the key pair in a PKCS#8
file. If you need to convert keys from BIND .private-key
format over to PKCS#8, one can use softhsm2-keyconv.</p>

<p style="margin-top: 1em">The libary libsofthsm2, known as
SoftHSM, provides cryptographic functionality by using the
PKCS#11 API. It was developed as a part of the OpenDNSSEC
project, thus designed to <br>
meet the requirements of OpenDNSSEC, but can also work
together with other software that want to use the
functionality of the PKCS#11 API.</p>

<p style="margin-top: 1em">SoftHSM is a software
implementation of a generic cryptographic device with a
PKCS#11 interface. These devices are often called tokens.
Read in the manual softhsm2.conf(5) on <br>
how to create these tokens and how they are added to a slot
in SoftHSM.</p>

<p style="margin-top: 1em">The PKCS#11 API can be used to
handle and store cryptographic keys. This interface
specifies how to communicate with cryptographic devices such
as HSMs (Hardware Security Mod&acirc; <br>
ules) and smart cards. The purpose of these devices is,
among others, to generate cryptographic keys and sign
information without revealing private-key material to the
outside <br>
world. They are often designed to perform well on these
specific tasks compared to ordinary processes in a normal
computer.</p>

<p style="margin-top: 1em">ACTIONS <br>
--help, -h <br>
Show the help information.</p>

<p style="margin-top: 1em">--import path <br>
Import a key pair from the given path. The file must be in
PKCS#8-format. <br>
Use with --file-pin, --slot, --pin, --no-public-key,
--label, and --id.</p>

<p style="margin-top: 1em">--init-token <br>
Initialize the token at a given slot. If the token is
already initialized then this command will reinitialize it,
thus erasing all the objects in the token. The matching <br>
Security Officer (SO) PIN must also be provided when doing
reinitialization. <br>
Use with --slot or --free, --label, --so-pin, and --pin.</p>

<p style="margin-top: 1em">--show-slots <br>
Display all the available slots and their current
status.</p>

<p style="margin-top: 1em">--version, -v <br>
Show the version info.</p>

<p style="margin-top: 1em">OPTIONS <br>
--file-pin PIN <br>
The PIN will be used to decrypt the PKCS#8 file. If not
given then the PKCS#8 file is assumed to be unencrypted.</p>

<p style="margin-top: 1em">--force <br>
Use this option to override the warnings and force the given
action.</p>

<p style="margin-top: 1em">--free Initialize the first free
token.</p>

<p style="margin-top: 1em">--id hex <br>
Choose an ID of the key pair. The ID is in hexadecimal with
a variable length. Use with --force when importing a key
pair if the ID already exists.</p>

<p style="margin-top: 1em">--label text <br>
Defines the label of the object or the token.</p>

<p style="margin-top: 1em">--module path <br>
Use another PKCS#11 library than SoftHSM.</p>

<p style="margin-top: 1em">--no-public-key <br>
Do not import the public key.</p>

<p style="margin-top: 1em">--pin PIN <br>
The PIN for the normal user.</p>

<p style="margin-top: 1em">--slot number <br>
The slot where the token is located.</p>

<p style="margin-top: 1em">--so-pin PIN <br>
The PIN for the Security Officer (SO).</p>

<p style="margin-top: 1em">EXAMPLES <br>
The token can be initialized using this command:</p>

<p style="margin-top: 1em">softhsm2-util --init-token
--slot 1 --label &quot;A token&quot;</p>

<p style="margin-top: 1em">A key pair can be imported using
the softhsm tool where you specify the path to the key file,
slot number, label and ID of the new objects, and the user
PIN. The file must be in <br>
PKCS#8 format.</p>

<p style="margin-top: 1em">softhsm2-util --import key1.pem
--slot 1 --label &quot;My key&quot; --id A1B2 --pin 123456
<br>
(Add, --file-pin PIN, if the key file is encrypted.)</p>

<p style="margin-top: 1em">AUTHORS <br>
Written by Rickard Bellgrim, Francis Dupont,
Ren&Atilde;&copy; Post, and Roland van Rijswijk.</p>

<p style="margin-top: 1em">SEE ALSO <br>
softhsm2-keyconv(1), softhsm2-migrate(1),
softhsm2.conf(5)</p>

<p style="margin-top: 1em">SoftHSM 29 October 2014
SOFTHSM2-UTIL(1)</p>
<hr>
</body>
</html>
