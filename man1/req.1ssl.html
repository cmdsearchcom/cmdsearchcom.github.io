<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:35:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>REQ(1) OpenSSL REQ(1)</p>

<p style="margin-top: 1em">NAME <br>
req - PKCS#10 certificate request and certificate generating
utility.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
openssl req [-inform PEM|DER] [-outform PEM|DER] [-in
filename] [-passin arg] [-out filename] [-passout arg]
[-text] [-pubkey] [-noout] [-verify] [-modulus] [-new]
[-rand <br>
file(s)] [-newkey rsa:bits] [-newkey alg:file] [-nodes]
[-key filename] [-keyform PEM|DER] [-keyout filename]
[-keygen_engine id] [-[digest]] [-config filename] [-subj
arg] <br>
[-multivalue-rdn] [-x509] [-days n] [-set_serial n]
[-asn1-kludge] [-no-asn1-kludge] [-newhdr] [-extensions
section] [-reqexts section] [-utf8] [-nameopt] [-reqopt]
[-subject] <br>
[-subj arg] [-batch] [-verbose] [-engine id]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The req command primarily creates and processes certificate
requests in PKCS#10 format. It can additionally create self
signed certificates for use as root CAs for example.</p>

<p style="margin-top: 1em">COMMAND OPTIONS <br>
-inform DER|PEM <br>
This specifies the input format. The DER option uses an ASN1
DER encoded form compatible with the PKCS#10. The PEM form
is the default format: it consists of the DER format <br>
base64 encoded with additional header and footer lines.</p>

<p style="margin-top: 1em">-outform DER|PEM <br>
This specifies the output format, the options have the same
meaning as the -inform option.</p>

<p style="margin-top: 1em">-in filename <br>
This specifies the input filename to read a request from or
standard input if this option is not specified. A request is
only read if the creation options (-new and -newkey) <br>
are not specified.</p>

<p style="margin-top: 1em">-passin arg <br>
the input file password source. For more information about
the format of arg see the PASS PHRASE ARGUMENTS section in
openssl(1).</p>

<p style="margin-top: 1em">-out filename <br>
This specifies the output filename to write to or standard
output by default.</p>

<p style="margin-top: 1em">-passout arg <br>
the output file password source. For more information about
the format of arg see the PASS PHRASE ARGUMENTS section in
openssl(1).</p>

<p style="margin-top: 1em">-text <br>
prints out the certificate request in text form.</p>

<p style="margin-top: 1em">-subject <br>
prints out the request subject (or certificate subject if
-x509 is specified)</p>

<p style="margin-top: 1em">-pubkey <br>
outputs the public key.</p>

<p style="margin-top: 1em">-noout <br>
this option prevents output of the encoded version of the
request.</p>

<p style="margin-top: 1em">-modulus <br>
this option prints out the value of the modulus of the
public key contained in the request.</p>

<p style="margin-top: 1em">-verify <br>
verifies the signature on the request.</p>

<p style="margin-top: 1em">-new <br>
this option generates a new certificate request. It will
prompt the user for the relevant field values. The actual
fields prompted for and their maximum and minimum sizes are
<br>
specified in the configuration file and any requested
extensions.</p>

<p style="margin-top: 1em">If the -key option is not used
it will generate a new RSA private key using information
specified in the configuration file.</p>

<p style="margin-top: 1em">-subj arg <br>
Replaces subject field of input request with specified data
and outputs modified request. The arg must be formatted as
/type0=value0/type1=value1/type2=..., characters may be <br>
escaped by &nbsp;(backslash), no spaces are skipped.</p>

<p style="margin-top: 1em">-rand file(s) <br>
a file or files containing random data used to seed the
random number generator, or an EGD socket (see RAND_egd(3)).
Multiple files can be specified separated by a OS- <br>
dependent character. The separator is ; for MS-Windows, ,
for OpenVMS, and : for all others.</p>

<p style="margin-top: 1em">-newkey arg <br>
this option creates a new certificate request and a new
private key. The argument takes one of several forms.
rsa:nbits, where nbits is the number of bits, generates an
RSA <br>
key nbits in size. If nbits is omitted, i.e. -newkey rsa
specified, the default key size, specified in the
configuration file is used.</p>

<p style="margin-top: 1em">All other algorithms support the
-newkey alg:file form, where file may be an algorithm
parameter file, created by the genpkey -genparam command or
and X.509 certificate for a <br>
key with approriate algorithm.</p>

<p style="margin-top: 1em">param:file generates a key using
the parameter file or certificate file, the algorithm is
determined by the parameters. algname:file use algorithm
algname and parameter file <br>
file: the two algorithms must match or an error occurs.
algname just uses algorithm algname, and parameters, if
neccessary should be specified via -pkeyopt parameter.</p>

<p style="margin-top: 1em">dsa:filename generates a DSA key
using the parameters in the file filename. ec:filename
generates EC key (usable both with ECDSA or ECDH
algorithms), gost2001:filename <br>
generates GOST R 34.10-2001 key (requires ccgost engine
configured in the configuration file). If just gost2001 is
specified a parameter set should be specified by -pkeyopt
<br>
paramset:X</p>

<p style="margin-top: 1em">-pkeyopt opt:value <br>
set the public key algorithm option opt to value. The
precise set of options supported depends on the public key
algorithm used and its implementation. See KEY GENERATION
<br>
OPTIONS in the genpkey manual page for more details.</p>

<p style="margin-top: 1em">-key filename <br>
This specifies the file to read the private key from. It
also accepts PKCS#8 format private keys for PEM format
files.</p>

<p style="margin-top: 1em">-keyform PEM|DER <br>
the format of the private key file specified in the -key
argument. PEM is the default.</p>

<p style="margin-top: 1em">-keyout filename <br>
this gives the filename to write the newly created private
key to. If this option is not specified then the filename
present in the configuration file is used.</p>

<p style="margin-top: 1em">-nodes <br>
if this option is specified then if a private key is created
it will not be encrypted.</p>

<p style="margin-top: 1em">-[digest] <br>
this specifies the message digest to sign the request with
(such as -md5, -sha1). This overrides the digest algorithm
specified in the configuration file. For full list of <br>
possible digests see openssl dgst -h output.</p>

<p style="margin-top: 1em">Some public key algorithms may
override this choice. For instance, DSA signatures always
use SHA1, GOST R 34.10 signatures always use GOST R 34.11-94
(-md_gost94).</p>

<p style="margin-top: 1em">-config filename <br>
this allows an alternative configuration file to be
specified, this overrides the compile time filename or any
specified in the OPENSSL_CONF environment variable.</p>

<p style="margin-top: 1em">-subj arg <br>
sets subject name for new request or supersedes the subject
name when processing a request. The arg must be formatted as
/type0=value0/type1=value1/type2=..., characters may <br>
be escaped by &nbsp;(backslash), no spaces are skipped.</p>

<p style="margin-top: 1em">-multivalue-rdn <br>
this option causes the -subj argument to be interpreted with
full support for multivalued RDNs. Example:</p>


<p style="margin-top: 1em">/DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John
Doe</p>

<p style="margin-top: 1em">If -multi-rdn is not used then
the UID value is 123456+CN=John Doe.</p>

<p style="margin-top: 1em">-x509 <br>
this option outputs a self signed certificate instead of a
certificate request. This is typically used to generate a
test certificate or a self signed root CA. The extensions
<br>
added to the certificate (if any) are specified in the
configuration file. Unless specified using the set_serial
option 0 will be used for the serial number.</p>

<p style="margin-top: 1em">-days n <br>
when the -x509 option is being used this specifies the
number of days to certify the certificate for. The default
is 30 days.</p>

<p style="margin-top: 1em">-set_serial n <br>
serial number to use when outputting a self signed
certificate. This may be specified as a decimal value or a
hex value if preceded by 0x. It is possible to use negative
<br>
serial numbers but this is not recommended.</p>

<p style="margin-top: 1em">-extensions section <br>
-reqexts section <br>
these options specify alternative sections to include
certificate extensions (if the -x509 option is present) or
certificate request extensions. This allows several
different <br>
sections to be used in the same configuration file to
specify requests for a variety of purposes.</p>

<p style="margin-top: 1em">-utf8 <br>
this option causes field values to be interpreted as UTF8
strings, by default they are interpreted as ASCII. This
means that the field values, whether prompted from a <br>
terminal or obtained from a configuration file, must be
valid UTF8 strings.</p>

<p style="margin-top: 1em">-nameopt option <br>
option which determines how the subject or issuer names are
displayed. The option argument can be a single option or
multiple options separated by commas. Alternatively the <br>
-nameopt switch may be used more than once to set multiple
options. See the x509(1) manual page for details.</p>

<p style="margin-top: 1em">-reqopt <br>
customise the output format used with -text. The option
argument can be a single option or multiple options
separated by commas.</p>

<p style="margin-top: 1em">See discission of the -certopt
parameter in the x509 command.</p>

<p style="margin-top: 1em">-asn1-kludge <br>
by default the req command outputs certificate requests
containing no attributes in the correct PKCS#10 format.
However certain CAs will only accept requests containing no
<br>
attributes in an invalid form: this option produces this
invalid format.</p>

<p style="margin-top: 1em">More precisely the Attributes in
a PKCS#10 certificate request are defined as a SET OF
Attribute. They are not OPTIONAL so if no attributes are
present then they should be <br>
encoded as an empty SET OF. The invalid form does not
include the empty SET OF whereas the correct form does.</p>

<p style="margin-top: 1em">It should be noted that very few
CAs still require the use of this option.</p>

<p style="margin-top: 1em">-no-asn1-kludge <br>
Reverses effect of -asn1-kludge</p>

<p style="margin-top: 1em">-newhdr <br>
Adds the word NEW to the PEM file header and footer lines on
the outputed request. Some software (Netscape certificate
server) and some CAs need this.</p>

<p style="margin-top: 1em">-batch <br>
non-interactive mode.</p>

<p style="margin-top: 1em">-verbose <br>
print extra details about the operations being
performed.</p>

<p style="margin-top: 1em">-engine id <br>
specifying an engine (by its unique id string) will cause
req to attempt to obtain a functional reference to the
specified engine, thus initialising it if needed. The engine
<br>
will then be set as the default for all available
algorithms.</p>

<p style="margin-top: 1em">-keygen_engine id <br>
specifies an engine (by its unique id string) which would be
used for key generation operations.</p>

<p style="margin-top: 1em">CONFIGURATION FILE FORMAT <br>
The configuration options are specified in the req section
of the configuration file. As with all configuration files
if no value is specified in the specific section (i.e. req)
<br>
then the initial unnamed or default section is searched
too.</p>

<p style="margin-top: 1em">The options available are
described in detail below.</p>

<p style="margin-top: 1em">input_password output_password
<br>
The passwords for the input private key file (if present)
and the output private key file (if one will be created).
The command line options passin and passout override the
<br>
configuration file values.</p>

<p style="margin-top: 1em">default_bits <br>
This specifies the default key size in bits. If not
specified then 512 is used. It is used if the -new option is
used. It can be overridden by using the -newkey option.</p>

<p style="margin-top: 1em">default_keyfile <br>
This is the default filename to write a private key to. If
not specified the key is written to standard output. This
can be overridden by the -keyout option.</p>

<p style="margin-top: 1em">oid_file <br>
This specifies a file containing additional OBJECT
IDENTIFIERS. Each line of the file should consist of the
numerical form of the object identifier followed by white
space <br>
then the short name followed by white space and finally the
long name.</p>

<p style="margin-top: 1em">oid_section <br>
This specifies a section in the configuration file
containing extra object identifiers. Each line should
consist of the short name of the object identifier followed
by = and <br>
the numerical form. The short and long names are the same
when this option is used.</p>

<p style="margin-top: 1em">RANDFILE <br>
This specifies a filename in which random number seed
information is placed and read from, or an EGD socket (see
RAND_egd(3)). It is used for private key generation.</p>

<p style="margin-top: 1em">encrypt_key <br>
If this is set to no then if a private key is generated it
is not encrypted. This is equivalent to the -nodes command
line option. For compatibility encrypt_rsa_key is an <br>
equivalent option.</p>

<p style="margin-top: 1em">default_md <br>
This option specifies the digest algorithm to use. Possible
values include md5 sha1 mdc2. If not present then MD5 is
used. This option can be overridden on the command line.</p>

<p style="margin-top: 1em">string_mask <br>
This option masks out the use of certain string types in
certain fields. Most users will not need to change this
option.</p>

<p style="margin-top: 1em">It can be set to several values
default which is also the default option uses
PrintableStrings, T61Strings and BMPStrings if the pkix
value is used then only PrintableStrings <br>
and BMPStrings will be used. This follows the PKIX
recommendation in RFC2459. If the utf8only option is used
then only UTF8Strings will be used: this is the PKIX <br>
recommendation in RFC2459 after 2003. Finally the nombstr
option just uses PrintableStrings and T61Strings: certain
software has problems with BMPStrings and UTF8Strings: in
<br>
particular Netscape.</p>

<p style="margin-top: 1em">req_extensions <br>
this specifies the configuration file section containing a
list of extensions to add to the certificate request. It can
be overridden by the -reqexts command line switch. See <br>
the x509v3_config(5) manual page for details of the
extension section format.</p>

<p style="margin-top: 1em">x509_extensions <br>
this specifies the configuration file section containing a
list of extensions to add to certificate generated when the
-x509 switch is used. It can be overridden by the <br>
-extensions command line switch.</p>

<p style="margin-top: 1em">prompt <br>
if set to the value no this disables prompting of
certificate fields and just takes values from the config
file directly. It also changes the expected format of the
<br>
distinguished_name and attributes sections.</p>

<p style="margin-top: 1em">utf8 <br>
if set to the value yes then field values to be interpreted
as UTF8 strings, by default they are interpreted as ASCII.
This means that the field values, whether prompted from <br>
a terminal or obtained from a configuration file, must be
valid UTF8 strings.</p>

<p style="margin-top: 1em">attributes <br>
this specifies the section containing any request
attributes: its format is the same as distinguished_name.
Typically these may contain the challengePassword or <br>
unstructuredName types. They are currently ignored by
OpenSSL&rsquo;s request signing utilities but some CAs might
want them.</p>

<p style="margin-top: 1em">distinguished_name <br>
This specifies the section containing the distinguished name
fields to prompt for when generating a certificate or
certificate request. The format is described in the next
<br>
section.</p>

<p style="margin-top: 1em">DISTINGUISHED NAME AND ATTRIBUTE
SECTION FORMAT <br>
There are two separate formats for the distinguished name
and attribute sections. If the prompt option is set to no
then these sections just consist of field names and values:
<br>
for example,</p>

<p style="margin-top: 1em">CN=My Name <br>
OU=My Organization <br>
emailAddress=someone@somewhere.org</p>

<p style="margin-top: 1em">This allows external programs
(e.g. GUI based) to generate a template file with all the
field names and values and just pass it to req. An example
of this kind of configuration <br>
file is contained in the EXAMPLES section.</p>

<p style="margin-top: 1em">Alternatively if the prompt
option is absent or not set to no then the file contains
field prompting information. It consists of lines of the
form:</p>

<p style="margin-top: 1em">fieldName=&quot;prompt&quot;
<br>
fieldName_default=&quot;default field value&quot; <br>
fieldName_min= 2 <br>
fieldName_max= 4</p>

<p style="margin-top: 1em">&quot;fieldName&quot; is the
field name being used, for example commonName (or CN). The
&quot;prompt&quot; string is used to ask the user to enter
the relevant details. If the user enters nothing <br>
then the default value is used if no default value is
present then the field is omitted. A field can still be
omitted if a default value is present if the user just
enters the <br>
&rsquo;.&rsquo; character.</p>

<p style="margin-top: 1em">The number of characters entered
must be between the fieldName_min and fieldName_max limits:
there may be additional restrictions based on the field
being used (for example <br>
countryName can only ever be two characters long and must
fit in a PrintableString).</p>

<p style="margin-top: 1em">Some fields (such as
organizationName) can be used more than once in a DN. This
presents a problem because configuration files will not
recognize the same name occurring twice. <br>
To avoid this problem if the fieldName contains some
characters followed by a full stop they will be ignored. So
for example a second organizationName can be input by
calling it <br>
&quot;1.organizationName&quot;.</p>

<p style="margin-top: 1em">The actual permitted field names
are any object identifier short or long names. These are
compiled into OpenSSL and include the usual values such as
commonName, countryName, <br>
localityName, organizationName, organizationUnitName,
stateOrProvinceName. Additionally emailAddress is include as
well as name, surname, givenName initials and
dnQualifier.</p>

<p style="margin-top: 1em">Additional object identifiers
can be defined with the oid_file or oid_section options in
the configuration file. Any additional fields will be
treated as though they were a <br>
DirectoryString.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Examine and verify certificate request:</p>

<p style="margin-top: 1em">openssl req -in req.pem -text
-verify -noout</p>

<p style="margin-top: 1em">Create a private key and then
generate a certificate request from it:</p>

<p style="margin-top: 1em">openssl genrsa -out key.pem 1024
<br>
openssl req -new -key key.pem -out req.pem</p>

<p style="margin-top: 1em">The same but just using req:</p>

<p style="margin-top: 1em">openssl req -newkey rsa:1024
-keyout key.pem -out req.pem</p>

<p style="margin-top: 1em">Generate a self signed root
certificate:</p>

<p style="margin-top: 1em">openssl req -x509 -newkey
rsa:1024 -keyout key.pem -out req.pem</p>

<p style="margin-top: 1em">Example of a file pointed to by
the oid_file option:</p>

<p style="margin-top: 1em">1.2.3.4 shortName A longer Name
<br>
1.2.3.6 otherName Other longer Name</p>

<p style="margin-top: 1em">Example of a section pointed to
by oid_section making use of variable expansion:</p>

<p style="margin-top: 1em">testoid1=1.2.3.5 <br>
testoid2=${testoid1}.6</p>

<p style="margin-top: 1em">Sample configuration file
prompting for field values:</p>

<p style="margin-top: 1em">[ req ] <br>
default_bits = 1024 <br>
default_keyfile = privkey.pem <br>
distinguished_name = req_distinguished_name <br>
attributes = req_attributes <br>
x509_extensions = v3_ca</p>

<p style="margin-top: 1em">dirstring_type = nobmp</p>

<p style="margin-top: 1em">[ req_distinguished_name ] <br>
countryName = Country Name (2 letter code) <br>
countryName_default = AU <br>
countryName_min = 2 <br>
countryName_max = 2</p>

<p style="margin-top: 1em">localityName = Locality Name
(eg, city)</p>

<p style="margin-top: 1em">organizationalUnitName =
Organizational Unit Name (eg, section)</p>

<p style="margin-top: 1em">commonName = Common Name (eg,
YOUR name) <br>
commonName_max = 64</p>

<p style="margin-top: 1em">emailAddress = Email Address
<br>
emailAddress_max = 40</p>

<p style="margin-top: 1em">[ req_attributes ] <br>
challengePassword = A challenge password <br>
challengePassword_min = 4 <br>
challengePassword_max = 20</p>

<p style="margin-top: 1em">[ v3_ca ]</p>

<p style="margin-top: 1em">subjectKeyIdentifier=hash <br>
authorityKeyIdentifier=keyid:always,issuer:always <br>
basicConstraints = CA:true</p>

<p style="margin-top: 1em">Sample configuration containing
all field values:</p>

<p style="margin-top: 1em">RANDFILE = $ENV::HOME/.rnd</p>

<p style="margin-top: 1em">[ req ] <br>
default_bits = 1024 <br>
default_keyfile = keyfile.pem <br>
distinguished_name = req_distinguished_name <br>
attributes = req_attributes <br>
prompt = no <br>
output_password = mypass</p>

<p style="margin-top: 1em">[ req_distinguished_name ] <br>
C = GB <br>
ST = Test State or Province <br>
L = Test Locality <br>
O = Organization Name <br>
OU = Organizational Unit Name <br>
CN = Common Name <br>
emailAddress = test@email.address</p>

<p style="margin-top: 1em">[ req_attributes ] <br>
challengePassword = A challenge password</p>

<p style="margin-top: 1em">NOTES <br>
The header and footer lines in the PEM format are
normally:</p>

<p style="margin-top: 1em">-----BEGIN CERTIFICATE
REQUEST----- <br>
-----END CERTIFICATE REQUEST-----</p>

<p style="margin-top: 1em">some software (some versions of
Netscape certificate server) instead needs:</p>

<p style="margin-top: 1em">-----BEGIN NEW CERTIFICATE
REQUEST----- <br>
-----END NEW CERTIFICATE REQUEST-----</p>

<p style="margin-top: 1em">which is produced with the
-newhdr option but is otherwise compatible. Either form is
accepted transparently on input.</p>

<p style="margin-top: 1em">The certificate requests
generated by Xenroll with MSIE have extensions added. It
includes the keyUsage extension which determines the type of
key (signature only or general <br>
purpose) and any additional OIDs entered by the script in an
extendedKeyUsage extension.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
The following messages are frequently asked about:</p>

<p style="margin-top: 1em">Using configuration from
/some/path/openssl.cnf <br>
Unable to load config info</p>

<p style="margin-top: 1em">This is followed some time later
by...</p>

<p style="margin-top: 1em">unable to find
&rsquo;distinguished_name&rsquo; in config <br>
problems making Certificate Request</p>

<p style="margin-top: 1em">The first error message is the
clue: it can&rsquo;t find the configuration file! Certain
operations (like examining a certificate request)
don&rsquo;t need a configuration file so its use <br>
isn&rsquo;t enforced. Generation of certificates or requests
however does need a configuration file. This could be
regarded as a bug.</p>

<p style="margin-top: 1em">Another puzzling message is
this:</p>

<p style="margin-top: 1em">Attributes: <br>
a0:00</p>

<p style="margin-top: 1em">this is displayed when no
attributes are present and the request includes the correct
empty SET OF structure (the DER encoding of which is 0xa0
0x00). If you just see:</p>

<p style="margin-top: 1em">Attributes:</p>

<p style="margin-top: 1em">then the SET OF is missing and
the encoding is technically invalid (but it is tolerated).
See the description of the command line option -asn1-kludge
for more information.</p>

<p style="margin-top: 1em">ENVIRONMENT VARIABLES <br>
The variable OPENSSL_CONF if defined allows an alternative
configuration file location to be specified, it will be
overridden by the -config command line switch if it is
present. <br>
For compatibility reasons the SSLEAY_CONF environment
variable serves the same purpose but its use is
discouraged.</p>

<p style="margin-top: 1em">BUGS <br>
OpenSSL&rsquo;s handling of T61Strings (aka TeletexStrings)
is broken: it effectively treats them as ISO-8859-1 (Latin
1), Netscape and MSIE have similar behaviour. This can cause
<br>
problems if you need characters that aren&rsquo;t available
in PrintableStrings and you don&rsquo;t want to or
can&rsquo;t use BMPStrings.</p>

<p style="margin-top: 1em">As a consequence of the
T61String handling the only correct way to represent
accented characters in OpenSSL is to use a BMPString:
unfortunately Netscape currently chokes on <br>
these. If you have to use accented characters with Netscape
and MSIE then you currently need to use the invalid
T61String form.</p>

<p style="margin-top: 1em">The current prompting is not
very friendly. It doesn&rsquo;t allow you to confirm what
you&rsquo;ve just entered. Other things like extensions in
certificate requests are statically defined <br>
in the configuration file. Some of these: like an email
address in subjectAltName should be input by the user.</p>

<p style="margin-top: 1em">SEE ALSO <br>
x509(1), ca(1), genrsa(1), gendsa(1), config(5),
x509v3_config(5)</p>

<p style="margin-top: 1em">1.0.1e 2017-02-20 REQ(1)</p>
<hr>
</body>
</html>
