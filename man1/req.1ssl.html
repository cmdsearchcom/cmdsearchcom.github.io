<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>REQ(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">REQ(1)</td>
    <td class="head-vol">OpenSSL</td>
    <td class="head-rtitle">REQ(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
req - PKCS#10 certificate request and certificate generating utility.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>openssl</b> <b>req</b> [ <b>-inform PEM|DER</b>] [ <b>-outform PEM|DER</b>] [
  <b>-in filename</b>] [ <b>-passin arg</b>] [ <b>-out filename</b>] [
  <b>-passout arg</b>] [ <b>-text</b>] [ <b>-pubkey</b>] [ <b>-noout</b>] [
  <b>-verify</b>] [ <b>-modulus</b>] [ <b>-new</b>] [ <b>-rand file(s)</b>] [
  <b>-newkey rsa:bits</b>] [ <b>-newkey alg:file</b>] [ <b>-nodes</b>] [ <b>-key
  filename</b>] [ <b>-keyform PEM|DER</b>] [ <b>-keyout filename</b>] [
  <b>-keygen_engine id</b>] [ <b>-[digest]</b>] [ <b>-config filename</b>] [
  <b>-subj arg</b>] [ <b>-multivalue-rdn</b>] [ <b>-x509</b>] [ <b>-days n</b>]
  [ <b>-set_serial n</b>] [ <b>-asn1-kludge</b>] [ <b>-no-asn1-kludge</b>] [
  <b>-newhdr</b>] [ <b>-extensions section</b>] [ <b>-reqexts section</b>] [
  <b>-utf8</b>] [ <b>-nameopt</b>] [ <b>-reqopt</b>] [ <b>-subject</b>] [
  <b>-subj arg</b>] [ <b>-batch</b>] [ <b>-verbose</b>] [ <b>-engine id</b>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>req</b> command primarily creates and processes certificate requests in
  PKCS#10 format. It can additionally create self signed certificates for use as
  root CAs for example.
<h1 class="Sh" title="Sh" id="COMMAND_OPTIONS"><a class="selflink" href="#COMMAND_OPTIONS">COMMAND
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-inform DER|PEM</b></dt>
  <dd class="It-tag">This specifies the input format. The <b>DER</b> option uses
      an ASN1 DER encoded form compatible with the PKCS#10. The <b>PEM</b> form
      is the default format: it consists of the <b>DER</b> format base64 encoded
      with additional header and footer lines.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-outform DER|PEM</b></dt>
  <dd class="It-tag">This specifies the output format, the options have the same
      meaning as the <b>-inform</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-in filename</b></dt>
  <dd class="It-tag">This specifies the input filename to read a request from or
      standard input if this option is not specified. A request is only read if
      the creation options ( <b>-new</b> and <b>-newkey</b>) are not
    specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-passin arg</b></dt>
  <dd class="It-tag">the input file password source. For more information about
      the format of <b>arg</b> see the <b>PASS PHRASE ARGUMENTS</b> section in
      <i>openssl</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-out filename</b></dt>
  <dd class="It-tag">This specifies the output filename to write to or standard
      output by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-passout arg</b></dt>
  <dd class="It-tag">the output file password source. For more information about
      the format of <b>arg</b> see the <b>PASS PHRASE ARGUMENTS</b> section in
      <i>openssl</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-text</b></dt>
  <dd class="It-tag">prints out the certificate request in text form.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-subject</b></dt>
  <dd class="It-tag">prints out the request subject (or certificate subject if
      <b>-x509</b> is specified)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pubkey</b></dt>
  <dd class="It-tag">outputs the public key.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-noout</b></dt>
  <dd class="It-tag">this option prevents output of the encoded version of the
      request.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-modulus</b></dt>
  <dd class="It-tag">this option prints out the value of the modulus of the
      public key contained in the request.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-verify</b></dt>
  <dd class="It-tag">verifies the signature on the request.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-new</b></dt>
  <dd class="It-tag">this option generates a new certificate request. It will
      prompt the user for the relevant field values. The actual fields prompted
      for and their maximum and minimum sizes are specified in the configuration
      file and any requested extensions.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the <b>-key</b> option is not used it will generate a new RSA private key
      using information specified in the configuration file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-subj arg</b></dt>
  <dd class="It-tag">Replaces subject field of input request with specified data
      and outputs modified request. The arg must be formatted as
      <i>/type0=value0/type1=value1/type2=...</i>, characters may be escaped by
      \ (backslash), no spaces are skipped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-rand file(s)</b></dt>
  <dd class="It-tag">a file or files containing random data used to seed the
      random number generator, or an EGD socket (see <i>RAND_egd</i>(3)).
      Multiple files can be specified separated by a OS-dependent character. The
      separator is <b>;</b> for MS-Windows, <b>,</b> for OpenVMS, and <b>:</b>
      for all others.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-newkey arg</b></dt>
  <dd class="It-tag">this option creates a new certificate request and a new
      private key. The argument takes one of several forms. <b>rsa:nbits</b>,
      where <b>nbits</b> is the number of bits, generates an RSA key
      <b>nbits</b> in size. If <b>nbits</b> is omitted, i.e. <b>-newkey rsa</b>
      specified, the default key size, specified in the configuration file is
      used.
    <div style="height: 1.00em;">&#x00A0;</div>
    All other algorithms support the <b>-newkey alg:file</b> form, where file
      may be an algorithm parameter file, created by the <b>genpkey
      -genparam</b> command or and X.509 certificate for a key with approriate
      algorithm.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>param:file</b> generates a key using the parameter file or certificate
      <b>file</b>, the algorithm is determined by the parameters.
      <b>algname:file</b> use algorithm <b>algname</b> and parameter file
      <b>file</b>: the two algorithms must match or an error occurs.
      <b>algname</b> just uses algorithm <b>algname</b>, and parameters, if
      neccessary should be specified via <b>-pkeyopt</b> parameter.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>dsa:filename</b> generates a DSA key using the parameters in the file
      <b>filename</b>. <b>ec:filename</b> generates EC key (usable both with
      ECDSA or ECDH algorithms), <b>gost2001:filename</b> generates GOST R
      34.10-2001 key (requires <b>ccgost</b> engine configured in the
      configuration file). If just <b>gost2001</b> is specified a parameter set
      should be specified by <b>-pkeyopt paramset:X</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pkeyopt opt:value</b></dt>
  <dd class="It-tag">set the public key algorithm option <b>opt</b> to
      <b>value</b>. The precise set of options supported depends on the public
      key algorithm used and its implementation. See <b>KEY GENERATION
      OPTIONS</b> in the <b>genpkey</b> manual page for more details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-key filename</b></dt>
  <dd class="It-tag">This specifies the file to read the private key from. It
      also accepts PKCS#8 format private keys for PEM format files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keyform PEM|DER</b></dt>
  <dd class="It-tag">the format of the private key file specified in the
      <b>-key</b> argument. PEM is the default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keyout filename</b></dt>
  <dd class="It-tag">this gives the filename to write the newly created private
      key to. If this option is not specified then the filename present in the
      configuration file is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nodes</b></dt>
  <dd class="It-tag">if this option is specified then if a private key is
      created it will not be encrypted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-[digest]</b></dt>
  <dd class="It-tag">this specifies the message digest to sign the request with
      (such as <b>-md5</b>, <b>-sha1</b>). This overrides the digest algorithm
      specified in the configuration file. For full list of possible digests see
      openssl dgst -h output.
    <div style="height: 1.00em;">&#x00A0;</div>
    Some public key algorithms may override this choice. For instance, DSA
      signatures always use SHA1, GOST R 34.10 signatures always use GOST R
      34.11-94 ( <b>-md_gost94</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-config filename</b></dt>
  <dd class="It-tag">this allows an alternative configuration file to be
      specified, this overrides the compile time filename or any specified in
      the <b>OPENSSL_CONF</b> environment variable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-subj arg</b></dt>
  <dd class="It-tag">sets subject name for new request or supersedes the subject
      name when processing a request. The arg must be formatted as
      <i>/type0=value0/type1=value1/type2=...</i>, characters may be escaped by
      \ (backslash), no spaces are skipped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-multivalue-rdn</b></dt>
  <dd class="It-tag">this option causes the -subj argument to be interpreted
      with full support for multivalued RDNs. Example:
    <div style="height: 1.00em;">&#x00A0;</div>
     <i>/DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John Doe</i>
    <div style="height: 1.00em;">&#x00A0;</div>
    If -multi-rdn is not used then the UID value is <i>123456+CN=John
    Doe</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x509</b></dt>
  <dd class="It-tag">this option outputs a self signed certificate instead of a
      certificate request. This is typically used to generate a test certificate
      or a self signed root CA. The extensions added to the certificate (if any)
      are specified in the configuration file. Unless specified using the
      <b>set_serial</b> option <b>0</b> will be used for the serial number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-days n</b></dt>
  <dd class="It-tag">when the <b>-x509</b> option is being used this specifies
      the number of days to certify the certificate for. The default is 30
    days.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-set_serial n</b></dt>
  <dd class="It-tag">serial number to use when outputting a self signed
      certificate. This may be specified as a decimal value or a hex value if
      preceded by <b>0x</b>. It is possible to use negative serial numbers but
      this is not recommended.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-extensions section</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-reqexts section</b></dt>
  <dd class="It-tag">these options specify alternative sections to include
      certificate extensions (if the <b>-x509</b> option is present) or
      certificate request extensions. This allows several different sections to
      be used in the same configuration file to specify requests for a variety
      of purposes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-utf8</b></dt>
  <dd class="It-tag">this option causes field values to be interpreted as UTF8
      strings, by default they are interpreted as ASCII. This means that the
      field values, whether prompted from a terminal or obtained from a
      configuration file, must be valid UTF8 strings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nameopt option</b></dt>
  <dd class="It-tag">option which determines how the subject or issuer names are
      displayed. The <b>option</b> argument can be a single option or multiple
      options separated by commas. Alternatively the <b>-nameopt</b> switch may
      be used more than once to set multiple options. See the <i>x509</i>(1)
      manual page for details.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-reqopt</b></dt>
  <dd class="It-tag">customise the output format used with <b>-text</b>. The
      <b>option</b> argument can be a single option or multiple options
      separated by commas.
    <div style="height: 1.00em;">&#x00A0;</div>
    See discission of the <b>-certopt</b> parameter in the <b>x509</b>
    command.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-asn1-kludge</b></dt>
  <dd class="It-tag">by default the <b>req</b> command outputs certificate
      requests containing no attributes in the correct PKCS#10 format. However
      certain CAs will only accept requests containing no attributes in an
      invalid form: this option produces this invalid format.
    <div style="height: 1.00em;">&#x00A0;</div>
    More precisely the <b>Attributes</b> in a PKCS#10 certificate request are
      defined as a <b>SET OF Attribute</b>. They are <b>not OPTIONAL</b> so if
      no attributes are present then they should be encoded as an empty <b>SET
      OF</b>. The invalid form does not include the empty <b>SET OF</b> whereas
      the correct form does.
    <div style="height: 1.00em;">&#x00A0;</div>
    It should be noted that very few CAs still require the use of this
    option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no-asn1-kludge</b></dt>
  <dd class="It-tag">Reverses effect of <b>-asn1-kludge</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-newhdr</b></dt>
  <dd class="It-tag">Adds the word <b>NEW</b> to the PEM file header and footer
      lines on the outputed request. Some software (Netscape certificate server)
      and some CAs need this.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-batch</b></dt>
  <dd class="It-tag">non-interactive mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-verbose</b></dt>
  <dd class="It-tag">print extra details about the operations being
    performed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-engine id</b></dt>
  <dd class="It-tag">specifying an engine (by its unique <b>id</b> string) will
      cause <b>req</b> to attempt to obtain a functional reference to the
      specified engine, thus initialising it if needed. The engine will then be
      set as the default for all available algorithms.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keygen_engine id</b></dt>
  <dd class="It-tag">specifies an engine (by its unique <b>id</b> string) which
      would be used for key generation operations.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILE_FORMAT"><a class="selflink" href="#CONFIGURATION_FILE_FORMAT">CONFIGURATION
  FILE FORMAT</a></h1>
The configuration options are specified in the <b>req</b> section of the
  configuration file. As with all configuration files if no value is specified
  in the specific section (i.e. <b>req</b>) then the initial unnamed or
  <b>default</b> section is searched too.
<div class="Pp"></div>
The options available are described in detail below.
<dl class="Bl-tag">
  <dt class="It-tag"><b>input_password output_password</b></dt>
  <dd class="It-tag">The passwords for the input private key file (if present)
      and the output private key file (if one will be created). The command line
      options <b>passin</b> and <b>passout</b> override the configuration file
      values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>default_bits</b></dt>
  <dd class="It-tag">This specifies the default key size in bits. If not
      specified then 512 is used. It is used if the <b>-new</b> option is used.
      It can be overridden by using the <b>-newkey</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>default_keyfile</b></dt>
  <dd class="It-tag">This is the default filename to write a private key to. If
      not specified the key is written to standard output. This can be
      overridden by the <b>-keyout</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>oid_file</b></dt>
  <dd class="It-tag">This specifies a file containing additional <b>OBJECT
      IDENTIFIERS</b>. Each line of the file should consist of the numerical
      form of the object identifier followed by white space then the short name
      followed by white space and finally the long name.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>oid_section</b></dt>
  <dd class="It-tag">This specifies a section in the configuration file
      containing extra object identifiers. Each line should consist of the short
      name of the object identifier followed by <b>=</b> and the numerical form.
      The short and long names are the same when this option is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RANDFILE</b></dt>
  <dd class="It-tag">This specifies a filename in which random number seed
      information is placed and read from, or an EGD socket (see
      <i>RAND_egd</i>(3)). It is used for private key generation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>encrypt_key</b></dt>
  <dd class="It-tag">If this is set to <b>no</b> then if a private key is
      generated it is <b>not</b> encrypted. This is equivalent to the
      <b>-nodes</b> command line option. For compatibility
      <b>encrypt_rsa_key</b> is an equivalent option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>default_md</b></dt>
  <dd class="It-tag">This option specifies the digest algorithm to use. Possible
      values include <b>md5 sha1 mdc2</b>. If not present then MD5 is used. This
      option can be overridden on the command line.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>string_mask</b></dt>
  <dd class="It-tag">This option masks out the use of certain string types in
      certain fields. Most users will not need to change this option.
    <div style="height: 1.00em;">&#x00A0;</div>
    It can be set to several values <b>default</b> which is also the default
      option uses PrintableStrings, T61Strings and BMPStrings if the <b>pkix</b>
      value is used then only PrintableStrings and BMPStrings will be used. This
      follows the PKIX recommendation in RFC2459. If the <b>utf8only</b> option
      is used then only UTF8Strings will be used: this is the PKIX
      recommendation in RFC2459 after 2003. Finally the <b>nombstr</b> option
      just uses PrintableStrings and T61Strings: certain software has problems
      with BMPStrings and UTF8Strings: in particular Netscape.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>req_extensions</b></dt>
  <dd class="It-tag">this specifies the configuration file section containing a
      list of extensions to add to the certificate request. It can be overridden
      by the <b>-reqexts</b> command line switch. See the
      <i>x509v3_config</i>(5) manual page for details of the extension section
      format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>x509_extensions</b></dt>
  <dd class="It-tag">this specifies the configuration file section containing a
      list of extensions to add to certificate generated when the <b>-x509</b>
      switch is used. It can be overridden by the <b>-extensions</b> command
      line switch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>prompt</b></dt>
  <dd class="It-tag">if set to the value <b>no</b> this disables prompting of
      certificate fields and just takes values from the config file directly. It
      also changes the expected format of the <b>distinguished_name</b> and
      <b>attributes</b> sections.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>utf8</b></dt>
  <dd class="It-tag">if set to the value <b>yes</b> then field values to be
      interpreted as UTF8 strings, by default they are interpreted as ASCII.
      This means that the field values, whether prompted from a terminal or
      obtained from a configuration file, must be valid UTF8 strings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>attributes</b></dt>
  <dd class="It-tag">this specifies the section containing any request
      attributes: its format is the same as <b>distinguished_name</b>. Typically
      these may contain the challengePassword or unstructuredName types. They
      are currently ignored by OpenSSL's request signing utilities but some CAs
      might want them.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>distinguished_name</b></dt>
  <dd class="It-tag">This specifies the section containing the distinguished
      name fields to prompt for when generating a certificate or certificate
      request. The format is described in the next section.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DISTINGUISHED_NAME_AND_ATTRIBUTE_SECTION_FORMAT"><a class="selflink" href="#DISTINGUISHED_NAME_AND_ATTRIBUTE_SECTION_FORMAT">DISTINGUISHED
  NAME AND ATTRIBUTE SECTION FORMAT</a></h1>
There are two separate formats for the distinguished name and attribute
  sections. If the <b>prompt</b> option is set to <b>no</b> then these sections
  just consist of field names and values: for example,
<div class="Pp"></div>
<pre>
 CN=My Name
 OU=My Organization
 emailAddress=someone@somewhere.org
</pre>
<div class="Pp"></div>
This allows external programs (e.g. GUI based) to generate a template file with
  all the field names and values and just pass it to <b>req</b>. An example of
  this kind of configuration file is contained in the <b>EXAMPLES</b> section.
<div class="Pp"></div>
Alternatively if the <b>prompt</b> option is absent or not set to <b>no</b> then
  the file contains field prompting information. It consists of lines of the
  form:
<div class="Pp"></div>
<pre>
 fieldName=&quot;prompt&quot;
 fieldName_default=&quot;default field value&quot;
 fieldName_min= 2
 fieldName_max= 4
</pre>
<div class="Pp"></div>
&quot;fieldName&quot; is the field name being used, for example commonName (or
  CN). The &quot;prompt&quot; string is used to ask the user to enter the
  relevant details. If the user enters nothing then the default value is used if
  no default value is present then the field is omitted. A field can still be
  omitted if a default value is present if the user just enters the '.'
  character.
<div class="Pp"></div>
The number of characters entered must be between the fieldName_min and
  fieldName_max limits: there may be additional restrictions based on the field
  being used (for example countryName can only ever be two characters long and
  must fit in a PrintableString).
<div class="Pp"></div>
Some fields (such as organizationName) can be used more than once in a DN. This
  presents a problem because configuration files will not recognize the same
  name occurring twice. To avoid this problem if the fieldName contains some
  characters followed by a full stop they will be ignored. So for example a
  second organizationName can be input by calling it
  &quot;1.organizationName&quot;.
<div class="Pp"></div>
The actual permitted field names are any object identifier short or long names.
  These are compiled into OpenSSL and include the usual values such as
  commonName, countryName, localityName, organizationName, organizationUnitName,
  stateOrProvinceName. Additionally emailAddress is include as well as name,
  surname, givenName initials and dnQualifier.
<div class="Pp"></div>
Additional object identifiers can be defined with the <b>oid_file</b> or
  <b>oid_section</b> options in the configuration file. Any additional fields
  will be treated as though they were a DirectoryString.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Examine and verify certificate request:
<div class="Pp"></div>
<pre>
 openssl req -in req.pem -text -verify -noout
</pre>
<div class="Pp"></div>
Create a private key and then generate a certificate request from it:
<div class="Pp"></div>
<pre>
 openssl genrsa -out key.pem 1024
 openssl req -new -key key.pem -out req.pem
</pre>
<div class="Pp"></div>
The same but just using req:
<div class="Pp"></div>
<pre>
 openssl req -newkey rsa:1024 -keyout key.pem -out req.pem
</pre>
<div class="Pp"></div>
Generate a self signed root certificate:
<div class="Pp"></div>
<pre>
 openssl req -x509 -newkey rsa:1024 -keyout key.pem -out req.pem
</pre>
<div class="Pp"></div>
Example of a file pointed to by the <b>oid_file</b> option:
<div class="Pp"></div>
<pre>
 1.2.3.4        shortName       A longer Name
 1.2.3.6        otherName       Other longer Name
</pre>
<div class="Pp"></div>
Example of a section pointed to by <b>oid_section</b> making use of variable
  expansion:
<div class="Pp"></div>
<pre>
 testoid1=1.2.3.5
 testoid2=${testoid1}.6
</pre>
<div class="Pp"></div>
Sample configuration file prompting for field values:
<div class="Pp"></div>
<pre>
 [ req ]
 default_bits           = 1024
 default_keyfile        = privkey.pem
 distinguished_name     = req_distinguished_name
 attributes             = req_attributes
 x509_extensions        = v3_ca
 dirstring_type = nobmp
 [ req_distinguished_name ]
 countryName                    = Country Name (2 letter code)
 countryName_default            = AU
 countryName_min                = 2
 countryName_max                = 2
 localityName                   = Locality Name (eg, city)
 organizationalUnitName         = Organizational Unit Name (eg, section)
 commonName                     = Common Name (eg, YOUR name)
 commonName_max                 = 64
 emailAddress                   = Email Address
 emailAddress_max               = 40
 [ req_attributes ]
 challengePassword              = A challenge password
 challengePassword_min          = 4
 challengePassword_max          = 20
 [ v3_ca ]
 subjectKeyIdentifier=hash
 authorityKeyIdentifier=keyid:always,issuer:always
 basicConstraints = CA:true
</pre>
<div class="Pp"></div>
Sample configuration containing all field values:
<div class="Pp"></div>
<pre>
 RANDFILE               = $ENV::HOME/.rnd
 [ req ]
 default_bits           = 1024
 default_keyfile        = keyfile.pem
 distinguished_name     = req_distinguished_name
 attributes             = req_attributes
 prompt                 = no
 output_password        = mypass
 [ req_distinguished_name ]
 C                      = GB
 ST                     = Test State or Province
 L                      = Test Locality
 O                      = Organization Name
 OU                     = Organizational Unit Name
 CN                     = Common Name
 emailAddress           = test@email.address
 [ req_attributes ]
 challengePassword              = A challenge password
</pre>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
The header and footer lines in the <b>PEM</b> format are normally:
<div class="Pp"></div>
<pre>
 -----BEGIN CERTIFICATE REQUEST-----
 -----END CERTIFICATE REQUEST-----
</pre>
<div class="Pp"></div>
some software (some versions of Netscape certificate server) instead needs:
<div class="Pp"></div>
<pre>
 -----BEGIN NEW CERTIFICATE REQUEST-----
 -----END NEW CERTIFICATE REQUEST-----
</pre>
<div class="Pp"></div>
which is produced with the <b>-newhdr</b> option but is otherwise compatible.
  Either form is accepted transparently on input.
<div class="Pp"></div>
The certificate requests generated by <b>Xenroll</b> with MSIE have extensions
  added. It includes the <b>keyUsage</b> extension which determines the type of
  key (signature only or general purpose) and any additional OIDs entered by the
  script in an extendedKeyUsage extension.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
The following messages are frequently asked about:
<div class="Pp"></div>
<pre>
        Using configuration from /some/path/openssl.cnf
        Unable to load config info
</pre>
<div class="Pp"></div>
This is followed some time later by...
<div class="Pp"></div>
<pre>
        unable to find 'distinguished_name' in config
        problems making Certificate Request
</pre>
<div class="Pp"></div>
The first error message is the clue: it can't find the configuration file!
  Certain operations (like examining a certificate request) don't need a
  configuration file so its use isn't enforced. Generation of certificates or
  requests however does need a configuration file. This could be regarded as a
  bug.
<div class="Pp"></div>
Another puzzling message is this:
<div class="Pp"></div>
<pre>
        Attributes:
            a0:00
</pre>
<div class="Pp"></div>
this is displayed when no attributes are present and the request includes the
  correct empty <b>SET OF</b> structure (the DER encoding of which is 0xa0
  0x00). If you just see:
<div class="Pp"></div>
<pre>
        Attributes:
</pre>
<div class="Pp"></div>
then the <b>SET OF</b> is missing and the encoding is technically invalid (but
  it is tolerated). See the description of the command line option
  <b>-asn1-kludge</b> for more information.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The variable <b>OPENSSL_CONF</b> if defined allows an alternative configuration
  file location to be specified, it will be overridden by the <b>-config</b>
  command line switch if it is present. For compatibility reasons the
  <b>SSLEAY_CONF</b> environment variable serves the same purpose but its use is
  discouraged.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
OpenSSL's handling of T61Strings (aka TeletexStrings) is broken: it effectively
  treats them as ISO-8859-1 (Latin 1), Netscape and MSIE have similar behaviour.
  This can cause problems if you need characters that aren't available in
  PrintableStrings and you don't want to or can't use BMPStrings.
<div class="Pp"></div>
As a consequence of the T61String handling the only correct way to represent
  accented characters in OpenSSL is to use a BMPString: unfortunately Netscape
  currently chokes on these. If you have to use accented characters with
  Netscape and MSIE then you currently need to use the invalid T61String form.
<div class="Pp"></div>
The current prompting is not very friendly. It doesn't allow you to confirm what
  you've just entered. Other things like extensions in certificate requests are
  statically defined in the configuration file. Some of these: like an email
  address in subjectAltName should be input by the user.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>x509</i>(1), <i>ca</i>(1), <i>genrsa</i>(1), <i>gendsa</i>(1),
  <i>config</i>(5), <i>x509v3_config</i>(5)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-02-20</td>
    <td class="foot-os">1.0.1e</td>
  </tr>
</table>
</body>
</html>
