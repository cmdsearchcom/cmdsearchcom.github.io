<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>MAILBOT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MAILBOT(1)</td>
    <td class="head-vol">Double Precision, Inc.</td>
    <td class="head-rtitle">MAILBOT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
mailbot - A MIME-aware autoresponder utility
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 8.00ex; text-indent: -8.00ex;"><b>mailbot</b>
  [options] { <i>program</i>} [arg...]</div>
<div class="Pp"></div>
In .mailfilter:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
if (/^Subject: *info/)
{
     cc &quot;| mailbot -t /usr/share/autoresponse/info -d autoresponsedb \
            -A 'From: info@domain.com' /usr/bin/sendmail -f ''&quot;
}
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>mailbot</b> reads an E-mail message on standard input and creates an E-mail
  message replying to the original message's sender. A <b>program</b> is
  specified as an argument to <b>mailbot</b> after all of <b>mailbot</b>
  options. <b>program</b> is expected to read the created autoreply on its
  standard input, and mail it. If <b>program</b> is not specified,
  <b>mailbot</b> runs 'sendmail -f &quot;&quot;'.
<div class="Pp"></div>
<b>mailbot</b> has several options for suppressing duplicate autoresponse
  messages. If <b>mailbot</b> chooses not to send an autoresponse, it quietly
  terminates without running <b>program</b>. The autoresponse is optionally
  formatted as a MIME delivery status notification.
<div class="Pp"></div>
The text of the autoresponse is specified by the <b>-t</b> or the <b>-m</b>
  argument. Either one is required. Everything else is optional. The only
  exception is the <b>-T replydraft</b> option, which requires the <b>-l</b>
  option instead of either <b>-t</b> or <b>-m</b>. The default behavior is to
  send an autoresponse unless the original message has the &quot;Precedence:
  junk&quot; or the &quot;Precedence: bulk&quot; header, or the
  &quot;Precedence: list&quot; header, or the &quot;List-ID:&quot; header, or if
  its MIME content type is &quot;multipart/report&quot; (this is the MIME
  content type for delivery status notifications). The <b>-M</b> option formats
  the the autoresponse itself as a MIME delivery status notification.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
-A &quot; <i>header: value</i>&quot;
<div style="margin-left: 4.00ex;">Add a header to the autoresponse. Multiple
  <b>-A</b> options are allowed. In most situations, the <b>-A</b> option must
  be used to set the &#x201C;From:&#x201D; header in the autogenerated
  response.</div>
<div class="Pp"></div>
-f <i>address</i>
<div style="margin-left: 4.00ex;">Address the autoresponse to <i>address</i>,
  which must be an <b>RFC 2822</b>[1] address. By default <b>mailbot</b> takes
  the autoresponse address from the From: (or the Reply-To:) header in the
  original message. <b>-f</b>, if present, overrides and explicitly sets the
  autoresponse address. &quot; <i>address</i>&quot; must immediately follow the
  <b>-f</b> option without an intervening space (it's a single command line
  argument). An <b>-f</b> option without an <i>address</i> takes the address
  from the <b>SENDER</b> environment variable.</div>
<div class="Pp"></div>
-t <i>filename</i>
<div style="margin-left: 4.00ex;">Read text autoresponse from <i>filename</i>,
  which must contain a plain text message in &#x201C;flowed-text&#x201D; format.
  In a &#x201C;flowed-text&#x201D;-formatted message, each line that ends with a
  space character indicates that the line logically flows into the next line.
  This allows the message to be reformatted for any shown display width.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
Messages in languages (see the <b>-c</b> option) which use spaces as word
  delimiters must have <i>two</i> spaces at the end of a flowed line. The last
  space on a flowed line is logically removed, and the first space separates the
  last word on the previous line from the first word on the next line.
  Otherwise, the two words will not have a logical space between them if they
  get repositioned as part of adjusting the message's width for display.
<div style="height: 1.00em;">&#x00A0;</div>
Messages in ideographic languages that do not use spaces as word delimiters need
  only one space trailing a flowed line.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
The trailing whitespace has no visual impact when shown by software that does
  not implemented flowed text format, and always displays messages using their
  original width.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
-c <i>charset</i>
<div style="margin-left: 4.00ex;">Set the autoresponse's MIME character set to
  <i>charset</i>. Run <b>mailbot</b> without any arguments to see the default
  character set.</div>
<div class="Pp"></div>
-m <i>filename</i>
<div style="margin-left: 4.00ex;">Read a MIME autoresponse from filename. This
  is similar to the <b>-t</b> option, except that <i>filename</i> contains MIME
  headers, followed by a blank line, and the corresponding MIME content. The
  contents of <i>filename</i> are inserted in the autoresponse without further
  processing.
<div style="height: 1.00em;">&#x00A0;</div>
The specified file must contain the &#x201C;Content-Type&#x201D; header
  specifying the &#x201C;text/plain&#x201D; MIME type, with the
  &#x201C;format=flowed&#x201D;, &#x201C;delsp=yes&#x201D;, and the
  &#x201C;charset&#x201D; attributes, which override the <b>-c</b> parameter. If
  the specified file has a &#x201C;Content-Transfer-Encoding&#x201D; header it
  must be either &#x201C;7bit&#x201D; or &#x201C;8bit&#x201D;, it may not be
  &#x201C;quoted-printable&#x201D;. <b>mailbot</b> always drops any existing
  &#x201C;Content-Transfer-Encoding&#x201D; header and always adds the
  &#x201C;Content-Transfer-Encoding: 8bit&#x201D; header, even with the
  <b>-m</b>, since the salutation inserted into the message includes the
  sender's name, which may contain 8-bit characters. Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
Content-Type: text/plain; format=flowed; delsp=yes; charset=&quot;iso-8859-1&quot;
<div class="Pp"></div>
Mary had a little lamb,  
Its fleece was white as snow.  
And everywhere Mary went,  
The lamb was sure to go.
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
When the <b>-m</b> option is specified <b>mailbot</b> ignores the locale's
  character set and formats the autoreply according to the character set read
  from the &#x201C;Content-Type&#x201D; header.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
-M <i>address</i>
<div style="margin-left: 4.00ex;">Format the autoresponse as a delivery status
  notification ( <b>RFC 1894</b>[2]). <i>address</i> is an <b>RFC 2822</b>[1]
  E-mail address that generates the DSN. Note that the <b>-A</b> option should
  still be used in addition to <b>-M</b> in order to set the From: header on the
  autoresponse. <b>-M</b> sets the DSN address only. The <b>-M</b> option
  automatically sets <b>-T </b><b>replydsn</b></div>
<div class="Pp"></div>
-R <i>type</i>
<div style="margin-left: 4.00ex;">Specify the feedback report type, with
  <i>type</i> set to abuse, fraud, other, or virus. Must be used together with
  &#x201C;-T feedback&#x201D; or &#x201C;-T replyfeedback&#x201D;.</div>
<div class="Pp"></div>
-T <i>format</i>
<div style="margin-left: 4.00ex;">Set the reply format. <i>format</i> must be
  one of the following values:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;reply&#x201D; - the default
  reply format.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;replyall&#x201D; - like
  &#x201C;reply&#x201D;, except also puts the recipients in the original
  message's &#x201C;To:&#x201D; and &#x201C;Cc:&#x201D; headers into the
  &#x201C;Cc:&#x201D; header of the generated reply.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;replydsn&#x201D; - like
  &#x201C;reply&#x201D;, except the message is formatted as a delivery status
  notification.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;replydraft&#x201D; - like
  &#x201C;reply&#x201D;, with the text of the autoresponse coming from a maildir
  specified by the <b>-l</b> option. See &#x201C;Autoreplies from a maildir
  folder&#x201D;, below.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;forward&#x201D; - attach the
  original message as forwarded text.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;forwardatt&#x201D; - attach
  the original message as a forwarded message attachment.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;feedback&#x201D; - generate an
  Email Feedback Report message (see <b>RFC 5965</b>[3]). The &#x201C;-R&#x201D;
  option is required when this is specified.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;&#x201C;replyfeedback&#x201D; - like
  &#x201C;feedback&#x201D;, but also adds a &#x201C;To:&#x201D; header,
  addressed to the original message's sender.</div>
</div>
<div class="Pp"></div>
-N
<div style="margin-left: 4.00ex;">Do not quote the contents of the original
  message in the message created by &#x201C;reply&#x201D;,
  &#x201C;replyall&#x201D;, &#x201C;replydsn&#x201D;, &#x201C;feedback&#x201D;,
  and &#x201C;replyfeedback&#x201D; options.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
The original message gets quoted, in the absence of this option, only if the
  original message was formatted as plain text. <b>mailbot</b> is unable to
  quote an original message which was formatted as HTML, or any other
  non-plaintext format.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
For &#x201C;replydsn&#x201D;, &#x201C;feedback&#x201D;, and
  &#x201C;replyfeedback&#x201D; options, the convention is to attach the
  original message, or only its headers, separately; so this option should
  always be specified for these three reply formats.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
-a
<div style="margin-left: 4.00ex;">Attach the entire message, for
  &#x201C;replydsn&#x201D;, &#x201C;feedback&#x201D;, and
  &#x201C;replyfeedback&#x201D;, instead of only its headers.</div>
<div class="Pp"></div>
-e
<div style="margin-left: 4.00ex;">Generate a reply
  (&#x201C;reply&#x201D;-formats) to the address listed in any
  &#x201C;Errors-To&#x201D; or &#x201C;Return-Path&#x201D; header, if present,
  instead of the &#x201C;From&#x201D; header.</div>
<div class="Pp"></div>
-S &#x201C;salutation&#x201D;
<div style="margin-left: 4.00ex;">Use the given <i>salutation</i> in the
  &#x201C;reply&#x201D;. The default value is &#x201C;%F writes:&#x201D;. The
  following substitutions are recognized in the salutation string:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%% - an explicit % character.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%n - a newline character.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%C - the &#x201C;X-Newsgroup:&#x201D;
  header from the original message.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%N - the &#x201C;Newsgroups:&#x201D;
  header from the original message.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%i - the &#x201C;Message-ID:&#x201D;
  header from the original message.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%f - the original message's sender's
  address.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%F - the original message's sender's
  name.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%S - the &#x201C;Subject:&#x201D;
  header from the original message</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%d - the original message's date, in
  the local timezone.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;%{<i>...</i>}d - use <b>strftime</b>()
  to format the original message's date. A plain %d is equivalent to %{%a, %d %b
  %Y %H:%M:%S %z}d.</div>
<div style="height: 1.00em;">&#x00A0;</div>
All other characters in the salutation string are left as is.</div>
<div class="Pp"></div>
-F &#x201C;marker&#x201D;
<div style="margin-left: 4.00ex;">When generating a forward, use the
  <i>marker</i> to separate the forwarded message from the autoreply text,
  instead of the default &#x201C;--- Forwarded message ---&#x201D;</div>
<div class="Pp"></div>
-r <i>addrlist</i>
<div style="margin-left: 4.00ex;"><i>addrlist</i> is a comma-separated list of
  <b>RFC 2822</b>[1] E-mail addresses. <b>mailbot</b> sends an autoresponse only
  if the original message has at least one of the specified addresses in any To:
  or Cc: header.</div>
<div class="Pp"></div>
-d <i>filename</i>
<div style="margin-left: 4.00ex;">Create a small database, <i>filename</i>, that
  keeps track of senders' E-mail addresses, and prevent duplicate autoresponses
  going to the same address (suppress autoresponses going back to the same
  senders, for subsequent received messages). The <b>-d</b> option is only
  available if <b>maildrop</b> has GDBM/DB extensions enabled.</div>
<div class="Pp"></div>
-D <i>x</i>
<div style="margin-left: 4.00ex;">Do not send duplicate autoresponses (see the
  <b>-d</b> option) for at least <i>x</i> days (default: 1 day). The <b>-d</b>
  option creates a database of E-mail addresses and the times an autoresponse
  was last mailed to them. Another autoresponse to the same address will not be
  mailed until at least the amount of time specified by the <b>-D</b> option has
  elapsed.</div>
<div class="Pp"></div>
-s &quot; <i>subject</i>&quot;
<div style="margin-left: 4.00ex;">Set the Subject: header on the autoresponse to
  <i>subject</i>.</div>
<div class="Pp"></div>
-n
<div style="margin-left: 4.00ex;">Show the resulting message, do not send it.
  Used for debugging purposes.</div>
<div class="Pp"></div>
--feedback-original-envelope-id&#x00A0; <i>&quot;&lt;envelopeid&gt;&quot;</i>,
  --feedback-original-mail-from&#x00A0; <i>&quot;&lt;mailfrom&gt;&quot;</i>,
  --feedback-reporting-mta&#x00A0;&quot; <i>dns;&#x00A0;hostname&quot;</i>,
  --feedback-source-ip&#x00A0; <i>aaa.bbb.ccc.ddd</i>,
  --feedback-incidents&#x00A0; <i>n</i>,
  --feedback-authentication-results&#x00A0; <i>&quot;results&quot;</i>,
  --feedback-original-rcpt-to&#x00A0; <i>&quot;&lt;rcptto&gt;&quot;</i>,
  --feedback-reported-domain&#x00A0; <i>example.com</i>
<div style="margin-left: 4.00ex;">Optional parameters to include in the feedback
  report generated by &#x201C;feedback&#x201D; and
  &#x201C;replyfeedback&#x201D;. <b>mailbot</b> always adds
  &#x201C;Arrival-Date&#x201D; with the current time, as well as
  &#x201C;Version&#x201D; and &#x201C;User-Agent&#x201D;.
<div style="height: 1.00em;">&#x00A0;</div>
&#x201C;--feedback-authentication-results&#x201D;,
  &#x201C;--feedback-original-rcpt-to&#x201D; and
  &#x201C;--feedback-reported-domain&#x201D; may be specified more than
  once.</div>
<div class="Pp"></div>
-l <i>maildir</i>
<div style="margin-left: 4.00ex;">Specifies the maildir for the &#x201C;-T
  replydraft&#x201D; option. See &#x201C;Autoreplies from a maildir
  folder&#x201D;, below.</div>
<h2 class="Ss" title="Ss" id="Autoreplies_from_a_maildir_folder"><a class="selflink" href="#Autoreplies_from_a_maildir_folder">Autoreplies
  from a maildir folder</a></h2>
In .mailfilter:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
cc &quot;| mailbot -T replydraft -l './Maildir/.Vacation' \
        -d autoresponsedb \
        -A 'From: info@domain.com' /usr/bin/sendmail -f ''&quot;
to &quot;./Maildir&quot;
</pre>
</div>
<div class="Pp"></div>
The <b>-T replydraft</b> reply format takes the content of the autoresponse from
  the most recent message in a maildir. The <b>-l</b> option specifies the
  maildir. The above example takes the message from $HOME/Maildir/.Drafts which
  should be a maildir (with the usual cur, new, and tmp subdirectories). It
  would typically get created by Courier-IMAP as a folder named
  &#x201C;Vacation&#x201D;.
<div class="Pp"></div>
This makes it possible to install autoreplies via an IMAP client by creating a
  folder named &#x201C;Vacation&#x201D;, and copying a message into it. The
  contents of the message become the autoresponse.
<div class="Pp"></div>
If the named maildir does not exist, or is empty, <b>mailbot</b> does nothing.
  If the named maildir has more than one message, the most recent message gets
  used.
<div class="Pp"></div>
The above example uses additional <b>mailbot</b> options to suppress duplicate
  autoresponses, and to set the &#x201C;From:&#x201D; header on the
  autoresponse.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b></b><b>maildrop</b>(1)[4], <b></b><b>reformail</b>(1)[5],
  <b></b><b>reformime</b>(1)[6].
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Sam Varshavchik</b>
<div style="margin-left: 4.00ex;">Author</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">RFC 2822</dd>
</dl>
<div style="margin-left: 4.00ex;">http://tools.ietf.org/html/rfc2822</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">RFC 1894</dd>
</dl>
<div style="margin-left: 4.00ex;">http://tools.ietf.org/html/rfc1894</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag">RFC 5965</dd>
</dl>
<div style="margin-left: 4.00ex;">http://tools.ietf.org/html/rfc5965</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 4.</dt>
  <dd class="It-tag"><b>maildrop</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.courier-mta.org/maildrop/maildrop.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 5.</dt>
  <dd class="It-tag"><b>reformail</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.courier-mta.org/maildrop/reformail.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 6.</dt>
  <dd class="It-tag"><b>reformime</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.courier-mta.org/maildrop/reformime.html</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/20/2015</td>
    <td class="foot-os">Courier Mail Server</td>
  </tr>
</table>
</body>
</html>
