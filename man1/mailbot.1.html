<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:23:32 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MAILBOT(1) Double Precision, Inc. MAILBOT(1)</p>

<p style="margin-top: 1em">NAME <br>
mailbot - A MIME-aware autoresponder utility</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mailbot [options] {program} [arg...]</p>

<p style="margin-top: 1em">In .mailfilter:</p>

<p style="margin-top: 1em">if (/^Subject: *info/) <br>
{ <br>
cc &quot;| mailbot -t /usr/share/autoresponse/info -d
autoresponsedb -A &rsquo;From: info@domain.com&rsquo;
/usr/bin/sendmail -f &rsquo;&rsquo;&quot; <br>
}</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mailbot reads an E-mail message on standard input and
creates an E-mail message replying to the original
message&rsquo;s sender. A program is specified as an
argument to mailbot after <br>
all of mailbot options. program is expected to read the
created autoreply on its standard input, and mail it. If
program is not specified, mailbot runs &rsquo;sendmail -f
&quot;&quot;&rsquo;.</p>

<p style="margin-top: 1em">mailbot has several options for
suppressing duplicate autoresponse messages. If mailbot
chooses not to send an autoresponse, it quietly terminates
without running program. The <br>
autoresponse is optionally formatted as a MIME delivery
status notification.</p>

<p style="margin-top: 1em">The text of the autoresponse is
specified by the -t or the -m argument. Either one is
required. Everything else is optional. The only exception is
the -T replydraft option, which <br>
requires the -l option instead of either -t or -m. The
default behavior is to send an autoresponse unless the
original message has the &quot;Precedence: junk&quot; or the
&quot;Precedence: <br>
bulk&quot; header, or the &quot;Precedence: list&quot;
header, or the &quot;List-ID:&quot; header, or if its MIME
content type is &quot;multipart/report&quot; (this is the
MIME content type for delivery status <br>
notifications). The -M option formats the the autoresponse
itself as a MIME delivery status notification.</p>

<p style="margin-top: 1em">OPTIONS <br>
-A &quot;header: value&quot; <br>
Add a header to the autoresponse. Multiple -A options are
allowed. In most situations, the -A option must be used to
set the &acirc;From:&acirc; header in the autogenerated
response.</p>

<p style="margin-top: 1em">-faddress <br>
Address the autoresponse to address, which must be an RFC
2822[1] address. By default mailbot takes the autoresponse
address from the From: (or the Reply-To:) header in the <br>
original message. -f, if present, overrides and explicitly
sets the autoresponse address. &quot;address&quot; must
immediately follow the -f option without an intervening
space (it&rsquo;s <br>
a single command line argument). An -f option without an
address takes the address from the SENDER environment
variable.</p>

<p style="margin-top: 1em">-t filename <br>
Read text autoresponse from filename, which must contain a
plain text message in &acirc;flowed-text&acirc; format. In a
&acirc;flowed-text&acirc;-formatted message, each line that
ends with a space <br>
character indicates that the line logically flows into the
next line. This allows the message to be reformatted for any
shown display width.</p>

<p style="margin-top: 1em">Note <br>
Messages in languages (see the -c option) which use spaces
as word delimiters must have two spaces at the end of a
flowed line. The last space on a flowed line is <br>
logically removed, and the first space separates the last
word on the previous line from the first word on the next
line. Otherwise, the two words will not have a logical <br>
space between them if they get repositioned as part of
adjusting the message&rsquo;s width for display.</p>

<p style="margin-top: 1em">Messages in ideographic
languages that do not use spaces as word delimiters need
only one space trailing a flowed line.</p>

<p style="margin-top: 1em">Note <br>
The trailing whitespace has no visual impact when shown by
software that does not implemented flowed text format, and
always displays messages using their original width.</p>

<p style="margin-top: 1em">-c charset <br>
Set the autoresponse&rsquo;s MIME character set to charset.
Run mailbot without any arguments to see the default
character set.</p>

<p style="margin-top: 1em">-m filename <br>
Read a MIME autoresponse from filename. This is similar to
the -t option, except that filename contains MIME headers,
followed by a blank line, and the corresponding MIME <br>
content. The contents of filename are inserted in the
autoresponse without further processing.</p>

<p style="margin-top: 1em">The specified file must contain
the &acirc;Content-Type&acirc; header specifying the
&acirc;text/plain&acirc; MIME type, with the
&acirc;format=flowed&acirc;, &acirc;delsp=yes&acirc;, and
the &acirc;charset&acirc; attributes, which <br>
override the -c parameter. If the specified file has a
&acirc;Content-Transfer-Encoding&acirc; header it must be
either &acirc;7bit&acirc; or &acirc;8bit&acirc;, it may not
be &acirc;quoted-printable&acirc;. mailbot <br>
always drops any existing
&acirc;Content-Transfer-Encoding&acirc; header and always
adds the &acirc;Content-Transfer-Encoding: 8bit&acirc;
header, even with the -m, since the salutation inserted <br>
into the message includes the sender&rsquo;s name, which may
contain 8-bit characters. Example:</p>

<p style="margin-top: 1em">Content-Type: text/plain;
format=flowed; delsp=yes; charset=&quot;iso-8859-1&quot;</p>

<p style="margin-top: 1em">Mary had a little lamb, <br>
Its fleece was white as snow. <br>
And everywhere Mary went, <br>
The lamb was sure to go.</p>

<p style="margin-top: 1em">Note <br>
When the -m option is specified mailbot ignores the
locale&rsquo;s character set and formats the autoreply
according to the character set read from the
&acirc;Content-Type&acirc; header.</p>

<p style="margin-top: 1em">-M address <br>
Format the autoresponse as a delivery status notification
(RFC 1894[2]). address is an RFC 2822[1] E-mail address that
generates the DSN. Note that the -A option should <br>
still be used in addition to -M in order to set the From:
header on the autoresponse. -M sets the DSN address only.
The -M option automatically sets -T replydsn</p>

<p style="margin-top: 1em">-R type <br>
Specify the feedback report type, with type set to abuse,
fraud, other, or virus. Must be used together with &acirc;-T
feedback&acirc; or &acirc;-T replyfeedback&acirc;.</p>

<p style="margin-top: 1em">-T format <br>
Set the reply format. format must be one of the following
values:</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;reply&acirc; - the default reply format.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;replyall&acirc; - like &acirc;reply&acirc;, except
also puts the recipients in the original message&rsquo;s
&acirc;To:&acirc; and &acirc;Cc:&acirc; headers into the
&acirc;Cc:&acirc; header of the generated reply.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;replydsn&acirc; - like &acirc;reply&acirc;, except
the message is formatted as a delivery status
notification.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;replydraft&acirc; - like &acirc;reply&acirc;, with
the text of the autoresponse coming from a maildir specified
by the -l option. See &acirc;Autoreplies from a maildir
folder&acirc;, below.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;forward&acirc; - attach the original message as
forwarded text.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;forwardatt&acirc; - attach the original message as a
forwarded message attachment.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;feedback&acirc; - generate an Email Feedback Report
message (see RFC 5965[3]). The &acirc;-R&acirc; option is
required when this is specified.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&acirc;replyfeedback&acirc; - like &acirc;feedback&acirc;,
but also adds a &acirc;To:&acirc; header, addressed to the
original message&rsquo;s sender.</p>

<p style="margin-top: 1em">-N <br>
Do not quote the contents of the original message in the
message created by &acirc;reply&acirc;,
&acirc;replyall&acirc;, &acirc;replydsn&acirc;,
&acirc;feedback&acirc;, and &acirc;replyfeedback&acirc;
options.</p>

<p style="margin-top: 1em">Note <br>
The original message gets quoted, in the absence of this
option, only if the original message was formatted as plain
text. mailbot is unable to quote an original message <br>
which was formatted as HTML, or any other non-plaintext
format.</p>

<p style="margin-top: 1em">Note <br>
For &acirc;replydsn&acirc;, &acirc;feedback&acirc;, and
&acirc;replyfeedback&acirc; options, the convention is to
attach the original message, or only its headers,
separately; so this option should always <br>
be specified for these three reply formats.</p>

<p style="margin-top: 1em">-a <br>
Attach the entire message, for &acirc;replydsn&acirc;,
&acirc;feedback&acirc;, and &acirc;replyfeedback&acirc;,
instead of only its headers.</p>

<p style="margin-top: 1em">-e <br>
Generate a reply (&acirc;reply&acirc;-formats) to the
address listed in any &acirc;Errors-To&acirc; or
&acirc;Return-Path&acirc; header, if present, instead of the
&acirc;From&acirc; header.</p>

<p style="margin-top: 1em">-S &acirc;salutation&acirc; <br>
Use the given salutation in the &acirc;reply&acirc;. The
default value is &acirc;%F writes:&acirc;. The following
substitutions are recognized in the salutation string:</p>

<p style="margin-top: 1em">&Acirc;&middot; %% - an explicit
% character.</p>

<p style="margin-top: 1em">&Acirc;&middot; %n - a newline
character.</p>

<p style="margin-top: 1em">&Acirc;&middot; %C - the
&acirc;X-Newsgroup:&acirc; header from the original
message.</p>

<p style="margin-top: 1em">&Acirc;&middot; %N - the
&acirc;Newsgroups:&acirc; header from the original
message.</p>

<p style="margin-top: 1em">&Acirc;&middot; %i - the
&acirc;Message-ID:&acirc; header from the original
message.</p>

<p style="margin-top: 1em">&Acirc;&middot; %f - the
original message&rsquo;s sender&rsquo;s address.</p>

<p style="margin-top: 1em">&Acirc;&middot; %F - the
original message&rsquo;s sender&rsquo;s name.</p>

<p style="margin-top: 1em">&Acirc;&middot; %S - the
&acirc;Subject:&acirc; header from the original message</p>

<p style="margin-top: 1em">&Acirc;&middot; %d - the
original message&rsquo;s date, in the local timezone.</p>

<p style="margin-top: 1em">&Acirc;&middot; %{...}d - use
strftime() to format the original message&rsquo;s date. A
plain %d is equivalent to %{%a, %d %b %Y %H:%M:%S %z}d.</p>

<p style="margin-top: 1em">All other characters in the
salutation string are left as is.</p>

<p style="margin-top: 1em">-F &acirc;marker&acirc; <br>
When generating a forward, use the marker to separate the
forwarded message from the autoreply text, instead of the
default &acirc;--- Forwarded message ---&acirc;</p>

<p style="margin-top: 1em">-r addrlist <br>
addrlist is a comma-separated list of RFC 2822[1] E-mail
addresses. mailbot sends an autoresponse only if the
original message has at least one of the specified addresses
in <br>
any To: or Cc: header.</p>

<p style="margin-top: 1em">-d filename <br>
Create a small database, filename, that keeps track of
senders&rsquo; E-mail addresses, and prevent duplicate
autoresponses going to the same address (suppress
autoresponses going <br>
back to the same senders, for subsequent received messages).
The -d option is only available if maildrop has GDBM/DB
extensions enabled.</p>

<p style="margin-top: 1em">-D x <br>
Do not send duplicate autoresponses (see the -d option) for
at least x days (default: 1 day). The -d option creates a
database of E-mail addresses and the times an <br>
autoresponse was last mailed to them. Another autoresponse
to the same address will not be mailed until at least the
amount of time specified by the -D option has elapsed.</p>

<p style="margin-top: 1em">-s &quot;subject&quot; <br>
Set the Subject: header on the autoresponse to subject.</p>

<p style="margin-top: 1em">-n <br>
Show the resulting message, do not send it. Used for
debugging purposes.</p>

<p style="margin-top: 1em">--feedback-original-envelope-id
&quot;&lt;envelopeid&gt;&quot;,
--feedback-original-mail-from &quot;&lt;mailfrom&gt;&quot;,
--feedback-reporting-mta &quot;dns; hostname&quot;,
--feedback-source-ip aaa.bbb.ccc.ddd, <br>
--feedback-incidents n, --feedback-authentication-results
&quot;results&quot;, --feedback-original-rcpt-to
&quot;&lt;rcptto&gt;&quot;, --feedback-reported-domain
example.com <br>
Optional parameters to include in the feedback report
generated by &acirc;feedback&acirc; and
&acirc;replyfeedback&acirc;. mailbot always adds
&acirc;Arrival-Date&acirc; with the current time, as well as
<br>
&acirc;Version&acirc; and &acirc;User-Agent&acirc;.</p>


<p style="margin-top: 1em">&acirc;--feedback-authentication-results&acirc;,
&acirc;--feedback-original-rcpt-to&acirc; and
&acirc;--feedback-reported-domain&acirc; may be specified
more than once.</p>

<p style="margin-top: 1em">-l maildir <br>
Specifies the maildir for the &acirc;-T replydraft&acirc;
option. See &acirc;Autoreplies from a maildir folder&acirc;,
below.</p>

<p style="margin-top: 1em">Autoreplies from a maildir
folder <br>
In .mailfilter:</p>

<p style="margin-top: 1em">cc &quot;| mailbot -T replydraft
-l &rsquo;./Maildir/.Vacation&rsquo; -d autoresponsedb -A
&rsquo;From: info@domain.com&rsquo; /usr/bin/sendmail -f
&rsquo;&rsquo;&quot; <br>
to &quot;./Maildir&quot;</p>

<p style="margin-top: 1em">The -T replydraft reply format
takes the content of the autoresponse from the most recent
message in a maildir. The -l option specifies the maildir.
The above example takes the <br>
message from $HOME/Maildir/.Drafts which should be a maildir
(with the usual cur, new, and tmp subdirectories). It would
typically get created by Courier-IMAP as a folder named <br>
&acirc;Vacation&acirc;.</p>

<p style="margin-top: 1em">This makes it possible to
install autoreplies via an IMAP client by creating a folder
named &acirc;Vacation&acirc;, and copying a message into it.
The contents of the message become the <br>
autoresponse.</p>

<p style="margin-top: 1em">If the named maildir does not
exist, or is empty, mailbot does nothing. If the named
maildir has more than one message, the most recent message
gets used.</p>

<p style="margin-top: 1em">The above example uses
additional mailbot options to suppress duplicate
autoresponses, and to set the &acirc;From:&acirc; header on
the autoresponse.</p>

<p style="margin-top: 1em">SEE ALSO <br>
maildrop(1)[4], reformail(1)[5], reformime(1)[6].</p>

<p style="margin-top: 1em">AUTHOR <br>
Sam Varshavchik <br>
Author</p>

<p style="margin-top: 1em">NOTES <br>
1. RFC 2822 <br>
http://tools.ietf.org/html/rfc2822</p>

<p style="margin-top: 1em">2. RFC 1894 <br>
http://tools.ietf.org/html/rfc1894</p>

<p style="margin-top: 1em">3. RFC 5965 <br>
http://tools.ietf.org/html/rfc5965</p>

<p style="margin-top: 1em">4. maildrop(1) <br>
http://www.courier-mta.org/maildrop/maildrop.html</p>

<p style="margin-top: 1em">5. reformail(1) <br>
http://www.courier-mta.org/maildrop/reformail.html</p>

<p style="margin-top: 1em">6. reformime(1) <br>
http://www.courier-mta.org/maildrop/reformime.html</p>

<p style="margin-top: 1em">Courier Mail Server 06/20/2015
MAILBOT(1)</p>
<hr>
</body>
</html>
