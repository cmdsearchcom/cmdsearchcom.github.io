<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:44:58 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ZSHCOMPSYS(1) General Commands Manual ZSHCOMPSYS(1)</p>

<p style="margin-top: 1em">NAME <br>
zshcompsys - zsh completion system</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This describes the shell code for the &lsquo;new&rsquo;
completion system, referred to as compsys. It is written in
shell functions based on the features described in
zshcompwid(1).</p>

<p style="margin-top: 1em">The features are contextual,
sensitive to the point at which completion is started. Many
completions are already provided. For this reason, a user
can perform a great many <br>
tasks without knowing any details beyond how to initialize
the system, which is described below in INITIALIZATION.</p>

<p style="margin-top: 1em">The context that decides what
completion is to be performed may be <br>
&Acirc;&middot; an argument or option position: these
describe the position on the command line at which
completion is requested. For example &lsquo;first argument
to rmdir, the word being <br>
completed names a directory&rsquo;;</p>

<p style="margin-top: 1em">&Acirc;&middot; a special
context, denoting an element in the shell&rsquo;s syntax.
For example &lsquo;a word in command position&rsquo; or
&lsquo;an array subscript&rsquo;.</p>

<p style="margin-top: 1em">A full context specification
contains other elements, as we shall describe.</p>

<p style="margin-top: 1em">Besides commands names and
contexts, the system employs two more concepts, styles and
tags. These provide ways for the user to configure the
system&rsquo;s behaviour.</p>

<p style="margin-top: 1em">Tags play a dual role. They
serve as a classification system for the matches, typically
indicating a class of object that the user may need to
distinguish. For example, when <br>
completing arguments of the ls command the user may prefer
to try files before directories, so both of these are tags.
They also appear as the rightmost element in a context <br>
specification.</p>

<p style="margin-top: 1em">Styles modify various operations
of the completion system, such as output formatting, but
also what kinds of completers are used (and in what order),
or which tags are examined. <br>
Styles may accept arguments and are manipulated using the
zstyle command described in see zshmodules(1).</p>

<p style="margin-top: 1em">In summary, tags describe what
the completion objects are, and style how they are to be
completed. At various points of execution, the completion
system checks what styles <br>
and/or tags are defined for the current context, and uses
that to modify its behavior. The full description of context
handling, which determines how tags and other elements of
<br>
the context influence the behaviour of styles, is described
below in COMPLETION SYSTEM CONFIGURATION.</p>

<p style="margin-top: 1em">When a completion is requested,
a dispatcher function is called; see the description of
_main_complete in the list of control functions below. This
dispatcher decides which func&acirc; <br>
tion should be called to produce the completions, and calls
it. The result is passed to one or more completers,
functions that implement individual completion strategies:
simple <br>
completion, error correction, completion with error
correction, menu selection, etc.</p>

<p style="margin-top: 1em">More generally, the shell
functions contained in the completion system are of two
types: <br>
&Acirc;&middot; those beginning &lsquo;comp&rsquo; are to be
called directly; there are only a few of these;</p>

<p style="margin-top: 1em">&Acirc;&middot; those beginning
&lsquo;_&rsquo; are called by the completion code. The shell
functions of this set, which implement completion behaviour
and may be bound to keystrokes, are referred <br>
to as &lsquo;widgets&rsquo;. These proliferate as new
completions are required.</p>

<p style="margin-top: 1em">INITIALIZATION <br>
If the system was installed completely, it should be enough
to call the shell function compinit from your initialization
file; see the next section. However, the function <br>
compinstall can be run by a user to configure various
aspects of the completion system.</p>

<p style="margin-top: 1em">Usually, compinstall will insert
code into .zshrc, although if that is not writable it will
save it in another file and tell you that file&rsquo;s
location. Note that it is up to you <br>
to make sure that the lines added to .zshrc are actually
run; you may, for example, need to move them to an earlier
place in the file if .zshrc usually returns early. So long
as <br>
you keep them all together (including the comment lines at
the start and finish), you can rerun compinstall and it will
correctly locate and modify these lines. Note, however, <br>
that any code you add to this section by hand is likely to
be lost if you rerun compinstall, although lines using the
command &lsquo;zstyle&rsquo; should be gracefully
handled.</p>

<p style="margin-top: 1em">The new code will take effect
next time you start the shell, or run .zshrc by hand; there
is also an option to make them take effect immediately.
However, if compinstall has <br>
removed definitions, you will need to restart the shell to
see the changes.</p>

<p style="margin-top: 1em">To run compinstall you will need
to make sure it is in a directory mentioned in your fpath
parameter, which should already be the case if zsh was
properly configured as long as <br>
your startup files do not remove the appropriate directories
from fpath. Then it must be autoloaded (&lsquo;autoload -U
compinstall&rsquo; is recommended). You can abort the
installation <br>
any time you are being prompted for information, and your
.zshrc will not be altered at all; changes only take place
right at the end, where you are specifically asked for
con&acirc; <br>
firmation.</p>

<p style="margin-top: 1em">Use of compinit <br>
This section describes the use of compinit to initialize
completion for the current session when called directly; if
you have run compinstall it will be called automatically
from <br>
your .zshrc.</p>

<p style="margin-top: 1em">To initialize the system, the
function compinit should be in a directory mentioned in the
fpath parameter, and should be autoloaded (&lsquo;autoload
-U compinit&rsquo; is recommended), and <br>
then run simply as &lsquo;compinit&rsquo;. This will define
a few utility functions, arrange for all the necessary shell
functions to be autoloaded, and will then re-define all
widgets that <br>
do completion to use the new system. If you use the
menu-select widget, which is part of the zsh/complist
module, you should make sure that that module is loaded
before the call <br>
to compinit so that that widget is also re-defined. If
completion styles (see below) are set up to perform
expansion as well as completion by default, and the TAB key
is bound <br>
to expand-or-complete, compinit will rebind it to
complete-word; this is necessary to use the correct form of
expansion.</p>

<p style="margin-top: 1em">Should you need to use the
original completion commands, you can still bind keys to the
old widgets by putting a &lsquo;.&rsquo; in front of the
widget name, e.g. &lsquo;.expand-or-complete&rsquo;.</p>

<p style="margin-top: 1em">To speed up the running of
compinit, it can be made to produce a dumped configuration
that will be read in on future invocations; this is the
default, but can be turned off by <br>
calling compinit with the option -D. The dumped file is
.zcompdump in the same directory as the startup files (i.e.
$ZDOTDIR or $HOME); alternatively, an explicit file name can
<br>
be given by &lsquo;compinit -d dumpfile&rsquo;. The next
invocation of compinit will read the dumped file instead of
performing a full initialization.</p>

<p style="margin-top: 1em">If the number of completion
files changes, compinit will recognise this and produce a
new dump file. However, if the name of a function or the
arguments in the first line of a <br>
#compdef function (as described below) change, it is easiest
to delete the dump file by hand so that compinit will
re-create it the next time it is run. The check performed to
<br>
see if there are new functions can be omitted by giving the
option -C. In this case the dump file will only be created
if there isn&rsquo;t one already.</p>

<p style="margin-top: 1em">The dumping is actually done by
another function, compdump, but you will only need to run
this yourself if you change the configuration (e.g. using
compdef) and then want to dump <br>
the new one. The name of the old dumped file will be
remembered for this purpose.</p>

<p style="margin-top: 1em">If the parameter _compdir is
set, compinit uses it as a directory where completion
functions can be found; this is only necessary if they are
not already in the function search <br>
path.</p>

<p style="margin-top: 1em">For security reasons compinit
also checks if the completion system would use files not
owned by root or by the current user, or files in
directories that are world- or <br>
group-writable or that are not owned by root or by the
current user. If such files or directories are found,
compinit will ask if the completion system should really be
used. <br>
To avoid these tests and make all files found be used
without asking, use the option -u, and to make compinit
silently ignore all insecure files and directories use the
option <br>
-i. This security check is skipped entirely when the -C
option is given.</p>

<p style="margin-top: 1em">The security check can be
retried at any time by running the function compaudit. This
is the same check used by compinit, but when it is executed
directly any changes to fpath <br>
are made local to the function so they do not persist. The
directories to be checked may be passed as arguments; if
none are given, compaudit uses fpath and _compdir to find
<br>
completion system directories, adding missing ones to fpath
as necessary. To force a check of exactly the directories
currently named in fpath, set _compdir to an empty string
<br>
before calling compaudit or compinit.</p>

<p style="margin-top: 1em">The function bashcompinit
provides compatibility with bash&rsquo;s programmable
completion system. When run it will define the functions,
compgen and complete which correspond to the <br>
bash builtins with the same names. It will then be possible
to use completion specifications and functions written for
bash.</p>

<p style="margin-top: 1em">Autoloaded files <br>
The convention for autoloaded functions used in completion
is that they start with an underscore; as already mentioned,
the fpath/FPATH parameter must contain the directory in <br>
which they are stored. If zsh was properly installed on your
system, then fpath/FPATH automatically contains the required
directories for the standard functions.</p>

<p style="margin-top: 1em">For incomplete installations, if
compinit does not find enough files beginning with an
underscore (fewer than twenty) in the search path, it will
try to find more by adding the <br>
directory _compdir to the search path. If that directory has
a subdirectory named Base, all subdirectories will be added
to the path. Furthermore, if the subdirectory Base has <br>
a subdirectory named Core, compinit will add all
subdirectories of the subdirectories is to the path: this
allows the functions to be in the same format as in the zsh
source dis&acirc; <br>
tribution.</p>

<p style="margin-top: 1em">When compinit is run, it
searches all such files accessible via fpath/FPATH and reads
the first line of each of them. This line should contain one
of the tags described below. <br>
Files whose first line does not start with one of these tags
are not considered to be part of the completion system and
will not be treated specially.</p>

<p style="margin-top: 1em">The tags are:</p>

<p style="margin-top: 1em">#compdef names... [ -[pP]
patterns... [ -N names... ] ] <br>
The file will be made autoloadable and the function defined
in it will be called when completing names, each of which is
either the name of a command whose arguments are <br>
to be completed or one of a number of special contexts in
the form -context- described below.</p>

<p style="margin-top: 1em">Each name may also be of the
form &lsquo;cmd=service&rsquo;. When completing the command
cmd, the function typically behaves as if the command (or
special context) service was being <br>
completed instead. This provides a way of altering the
behaviour of functions that can perform many different
completions. It is implemented by setting the parameter <br>
$service when calling the function; the function may choose
to interpret this how it wishes, and simpler functions will
probably ignore it.</p>

<p style="margin-top: 1em">If the #compdef line contains
one of the options -p or -P, the words following are taken
to be patterns. The function will be called when completion
is attempted for a <br>
command or context that matches one of the patterns. The
options -p and -P are used to specify patterns to be tried
before or after other completions respectively. Hence <br>
-P may be used to specify default actions.</p>

<p style="margin-top: 1em">The option -N is used after a
list following -p or -P; it specifies that remaining words
no longer define patterns. It is possible to toggle between
the three options as <br>
many times as necessary.</p>

<p style="margin-top: 1em">#compdef -k style
key-sequences... <br>
This option creates a widget behaving like the builtin
widget style and binds it to the given key-sequences, if
any. The style must be one of the builtin widgets that <br>
perform completion, namely complete-word,
delete-char-or-list, expand-or-complete,
expand-or-complete-prefix, list-choices, menu-complete,
menu-expand-or-complete, or <br>
reverse-menu-complete. If the zsh/complist module is loaded
(see zshmodules(1)) the widget menu-select is also
available.</p>

<p style="margin-top: 1em">When one of the key-sequences is
typed, the function in the file will be invoked to generate
the matches. Note that a key will not be re-bound if it
already was (that is, <br>
was bound to something other than undefined-key). The widget
created has the same name as the file and can be bound to
any other keys using bindkey as usual.</p>

<p style="margin-top: 1em">#compdef -K widget-name style
key-sequences ... <br>
This is similar to -k except that only one key-sequences
argument may be given for each widget-name style pair.
However, the entire set of three arguments may be repeated
<br>
with a different set of arguments. Note in particular that
the widget-name must be distinct in each set. If it does not
begin with &lsquo;_&rsquo; this will be added. The
wid&acirc; <br>
get-name should not clash with the name of any existing
widget: names based on the name of the function are most
useful. For example,</p>

<p style="margin-top: 1em">#compdef -K _foo_complete
complete-word &quot;^X^C&quot; _foo_list list-choices
&quot;^X^D&quot;</p>

<p style="margin-top: 1em">(all on one line) defines a
widget _foo_complete for completion, bound to
&lsquo;^X^C&rsquo;, and a widget _foo_list for listing,
bound to &lsquo;^X^D&rsquo;.</p>

<p style="margin-top: 1em">#autoload [ options ] <br>
Functions with the #autoload tag are marked for autoloading
but are not otherwise treated specially. Typically they are
to be called from within one of the completion <br>
functions. Any options supplied will be passed to the
autoload builtin; a typical use is +X to force the function
to be loaded immediately. Note that the -U and -z flags <br>
are always added implicitly.</p>

<p style="margin-top: 1em">The # is part of the tag name
and no white space is allowed after it. The #compdef tags
use the compdef function described below; the main
difference is that the name of the <br>
function is supplied implicitly.</p>

<p style="margin-top: 1em">The special contexts for which
completion functions can be defined are:</p>

<p style="margin-top: 1em">-array-value- <br>
The right hand side of an array-assignment
(&lsquo;foo=(...)&rsquo;)</p>

<p style="margin-top: 1em">-brace-parameter- <br>
The name of a parameter expansion within braces
(&lsquo;${...}&rsquo;)</p>

<p style="margin-top: 1em">-assign-parameter- <br>
The name of a parameter in an assignment, i.e. on the left
hand side of an &lsquo;=&rsquo;</p>

<p style="margin-top: 1em">-command- <br>
A word in command position</p>

<p style="margin-top: 1em">-condition- <br>
A word inside a condition (&lsquo;[[...]]&rsquo;)</p>

<p style="margin-top: 1em">-default- <br>
Any word for which no other completion is defined</p>

<p style="margin-top: 1em">-equal- <br>
A word beginning with an equals sign</p>

<p style="margin-top: 1em">-first- <br>
This is tried before any other completion function. The
function called may set the _compskip parameter to one of
various values: all: no further completion is attempted;
<br>
a string containing the substring patterns: no pattern
completion functions will be called; a string containing
default: the function for the &lsquo;-default-&rsquo;
context will not <br>
be called, but functions defined for commands will</p>

<p style="margin-top: 1em">-math- Inside mathematical
contexts, such as &lsquo;((...))&rsquo;</p>

<p style="margin-top: 1em">-parameter- <br>
The name of a parameter expansion (&lsquo;$...&rsquo;)</p>

<p style="margin-top: 1em">-redirect- <br>
The word after a redirection operator.</p>

<p style="margin-top: 1em">-subscript- <br>
The contents of a parameter subscript.</p>

<p style="margin-top: 1em">-tilde- <br>
After an initial tilde (&lsquo;~&rsquo;), but before the
first slash in the word.</p>

<p style="margin-top: 1em">-value- <br>
On the right hand side of an assignment.</p>

<p style="margin-top: 1em">Default implementations are
supplied for each of these contexts. In most cases the
context -context- is implemented by a corresponding function
_context, for example the context <br>
&lsquo;-tilde-&rsquo; and the function
&lsquo;_tilde&rsquo;).</p>

<p style="margin-top: 1em">The contexts -redirect- and
-value- allow extra context-specific information.
(Internally, this is handled by the functions for each
context calling the function _dispatch.) <br>
The extra information is added separated by commas.</p>

<p style="margin-top: 1em">For the -redirect- context, the
extra information is in the form
&lsquo;-redirect-,op,command&rsquo;, where op is the
redirection operator and command is the name of the command
on the line. <br>
If there is no command on the line yet, the command field
will be empty.</p>

<p style="margin-top: 1em">For the -value- context, the
form is &lsquo;-value-,name,command&rsquo;, where name is
the name of the parameter. In the case of elements of an
associative array, for example &lsquo;assoc=(key <br>
&lt;TAB&gt;&rsquo;, name is expanded to
&lsquo;name-key&rsquo;. In certain special contexts, such as
completing after &lsquo;make CFLAGS=&rsquo;, the command
part gives the name of the command, here make; other&acirc;
<br>
wise it is empty.</p>

<p style="margin-top: 1em">It is not necessary to define
fully specific completions as the functions provided will
try to generate completions by progressively replacing the
elements with &lsquo;-default-&rsquo;. For <br>
example, when completing after
&lsquo;foo=&lt;TAB&gt;&rsquo;, _value will try the names
&lsquo;-value-,foo,&rsquo; (note the empty command part),
&lsquo;-value-,foo,-default-&rsquo;
and&lsquo;-value-,-default-,-default-&rsquo;, in <br>
that order, until it finds a function to handle the
context.</p>

<p style="margin-top: 1em">As an example:</p>

<p style="margin-top: 1em">compdef &rsquo;_files -g
&quot;*.log&quot;&rsquo;
&rsquo;-redirect-,2&gt;,-default-&rsquo;</p>

<p style="margin-top: 1em">completes files matching
&lsquo;*.log&rsquo; after &lsquo;2&gt; &lt;TAB&gt;&rsquo;
for any command with no more specific handler defined.</p>

<p style="margin-top: 1em">Also:</p>

<p style="margin-top: 1em">compdef _foo
-value-,-default-,-default-</p>

<p style="margin-top: 1em">specifies that _foo provides
completions for the values of parameters for which no
special function has been defined. This is usually handled
by the function _value itself.</p>

<p style="margin-top: 1em">The same lookup rules are used
when looking up styles (as described below); for example</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:-redirect-,2&gt;,*:*&rsquo;
file-patterns &rsquo;*.log&rsquo;</p>

<p style="margin-top: 1em">is another way to make
completion after &lsquo;2&gt; &lt;TAB&gt;&rsquo; complete
files matching &lsquo;*.log&rsquo;.</p>

<p style="margin-top: 1em">Functions <br>
The following function is defined by compinit and may be
called directly.</p>

<p style="margin-top: 1em">compdef [ -ane ] function
names... [ -[pP] patterns... [ -N names... ] ] <br>
compdef -d names... <br>
compdef -k [ -an ] function style key-sequences... <br>
compdef -K [ -an ] function name style key-sequences ...
<br>
The first form defines the function to call for completion
in the given contexts as described for the #compdef tag
above.</p>

<p style="margin-top: 1em">Alternatively, all the arguments
may have the form &lsquo;cmd=service&rsquo;. Here service
should already have been defined by
&lsquo;cmd1=service&rsquo; lines in #compdef files, as
described <br>
above. The argument for cmd will be completed in the same
way as service.</p>

<p style="margin-top: 1em">The function argument may
alternatively be a string containing almost any shell code.
If the string contains an equal sign, the above will take
precedence. The option -e <br>
may be used to specify the first argument is to be evaluated
as shell code even if it contains an equal sign. The string
will be executed using the eval builtin command <br>
to generate completions. This provides a way of avoiding
having to define a new completion function. For example, to
complete files ending in &lsquo;.h&rsquo; as arguments to
the <br>
command foo:</p>

<p style="margin-top: 1em">compdef &rsquo;_files -g
&quot;*.h&quot;&rsquo; foo</p>

<p style="margin-top: 1em">The option -n prevents any
completions already defined for the command or context from
being overwritten.</p>

<p style="margin-top: 1em">The option -d deletes any
completion defined for the command or contexts listed.</p>

<p style="margin-top: 1em">The names may also contain -p,
-P and -N options as described for the #compdef tag. The
effect on the argument list is identical, switching between
definitions of pat&acirc; <br>
terns tried initially, patterns tried finally, and normal
commands and contexts.</p>

<p style="margin-top: 1em">The parameter $_compskip may be
set by any function defined for a pattern context. If it is
set to a value containing the substring
&lsquo;patterns&rsquo; none of the pattern-func&acirc; <br>
tions will be called; if it is set to a value containing the
substring &lsquo;all&rsquo;, no other function will be
called.</p>

<p style="margin-top: 1em">The form with -k defines a
widget with the same name as the function that will be
called for each of the key-sequences; this is like the
#compdef -k tag. The function <br>
should generate the completions needed and will otherwise
behave like the builtin widget whose name is given as the
style argument. The widgets usable for this are: com&acirc;
<br>
plete-word, delete-char-or-list, expand-or-complete,
expand-or-complete-prefix, list-choices, menu-complete,
menu-expand-or-complete, and reverse-menu-complete, as well
as <br>
menu-select if the zsh/complist module is loaded. The option
-n prevents the key being bound if it is already to bound to
something other than undefined-key.</p>

<p style="margin-top: 1em">The form with -K is similar and
defines multiple widgets based on the same function, each of
which requires the set of three arguments name, style and
key-sequences, where <br>
the latter two are as for -k and the first must be a unique
widget name beginning with an underscore.</p>

<p style="margin-top: 1em">Wherever applicable, the -a
option makes the function autoloadable, equivalent to
autoload -U function.</p>

<p style="margin-top: 1em">The function compdef can be used
to associate existing completion functions with new
commands. For example,</p>

<p style="margin-top: 1em">compdef _pids foo</p>

<p style="margin-top: 1em">uses the function _pids to
complete process IDs for the command foo.</p>

<p style="margin-top: 1em">Note also the _gnu_generic
function described below, which can be used to complete
options for commands that understand the
&lsquo;--help&rsquo; option.</p>

<p style="margin-top: 1em">COMPLETION SYSTEM CONFIGURATION
<br>
This section gives a short overview of how the completion
system works, and then more detail on how users can
configure how and when matches are generated.</p>

<p style="margin-top: 1em">Overview <br>
When completion is attempted somewhere on the command line
the completion system first works out the context. This
takes account of a number of things including the command
word <br>
(such as &lsquo;grep&rsquo; or &lsquo;zsh&rsquo;) and
options to which the current word may be an argument (such
as the &lsquo;-o&rsquo; option to zsh which takes a shell
option as an argument).</p>

<p style="margin-top: 1em">This context information is
condensed into a string consisting of multiple fields
separated by colons, referred to simply as &lsquo;the
context&rsquo; in the remainder of the documentation. <br>
This is used to look up styles, context-sensitive options
that can be used to configure the completion system. The
context used for lookup may vary during the same call to the
<br>
completion system.</p>

<p style="margin-top: 1em">The context string always
consists of a fixed set of fields, separated by colons and
with a leading colon before the first, in the form
:completion:function:completer:com&acirc; <br>
mand:argument:tag. These have the following meaning:</p>

<p style="margin-top: 1em">&Acirc;&middot; The literal
string completion, saying that this style is used by the
completion system. This distinguishes the context from those
used by, for example, zle widgets and <br>
ZFTP functions.</p>

<p style="margin-top: 1em">&Acirc;&middot; The function, if
completion is called from a named widget rather than through
the normal completion system. Typically this is blank, but
it is set by special widgets such <br>
as predict-on and the various functions in the Widget
directory of the distribution to the name of that function,
often in an abbreviated form.</p>

<p style="margin-top: 1em">&Acirc;&middot; The completer
currently active, the name of the function without the
leading underscore and with other underscores converted to
hyphens. A &lsquo;completer&rsquo; is in overall con&acirc;
<br>
trol of how completion is to be performed;
&lsquo;complete&rsquo; is the simplest, but other completers
exist to perform related tasks such as correction, or to
modify the behaviour <br>
of a later completer. See the section &lsquo;Control
Functions&rsquo; below for more information.</p>

<p style="margin-top: 1em">&Acirc;&middot; The command or a
special -context-, just at it appears following the #compdef
tag or the compdef function. Completion functions for
commands that have sub-commands usu&acirc; <br>
ally modify this field to contain the name of the command
followed by a minus sign and the sub-command. For example,
the completion function for the cvs command sets this <br>
field to cvs-add when completing arguments to the add
subcommand.</p>

<p style="margin-top: 1em">&Acirc;&middot; The argument;
this indicates which command line or option argument we are
completing. For command arguments this generally takes the
form argument-n, where n is the num&acirc; <br>
ber of the argument, and for arguments to options the form
option-opt-n where n is the number of the argument to option
opt. However, this is only the case if the command <br>
line is parsed with standard UNIX-style options and
arguments, so many completions do not set this.</p>

<p style="margin-top: 1em">&Acirc;&middot; The tag. As
described previously, tags are used to discriminate between
the types of matches a completion function can generate in a
certain context. Any completion <br>
function may use any tag name it likes, but a list of the
more common ones is given below.</p>

<p style="margin-top: 1em">The context is gradually put
together as the functions are executed, starting with the
main entry point, which adds :completion: and the function
element if necessary. The com&acirc; <br>
pleter then adds the completer element. The contextual
completion adds the command and argument options. Finally,
the tag is added when the types of completion are known. For
<br>
example, the context name</p>


<p style="margin-top: 1em">:completion::complete:dvips:option-o-1:files</p>

<p style="margin-top: 1em">says that normal completion was
attempted as the first argument to the option -o of the
command dvips:</p>

<p style="margin-top: 1em">dvips -o ...</p>

<p style="margin-top: 1em">and the completion function will
generate filenames.</p>

<p style="margin-top: 1em">Usually completion will be tried
for all possible tags in an order given by the completion
function. However, this can be altered by using the
tag-order style. Completion is <br>
then restricted to the list of given tags in the given
order.</p>

<p style="margin-top: 1em">The _complete_help bindable
command shows all the contexts and tags available for
completion at a particular point. This provides an easy way
of finding information for <br>
tag-order and other styles. It is described in the section
&lsquo;Bindable Commands&rsquo; below.</p>

<p style="margin-top: 1em">Styles determine such things as
how the matches are generated, similarly to shell options
but with much more control. They can have any number of
strings as their value. They <br>
are defined with the zstyle builtin command (see
zshmodules(1)).</p>

<p style="margin-top: 1em">When looking up styles the
completion system uses full context names, including the
tag. Looking up the value of a style therefore consists of
two things: the context, which <br>
may be matched as a pattern, and the name of the style
itself, which must be given exactly.</p>

<p style="margin-top: 1em">For example, many completion
functions can generate matches in a simple and a verbose
form and use the verbose style to decide which form should
be used. To make all such func&acirc; <br>
tions use the verbose form, put</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; verbose yes</p>

<p style="margin-top: 1em">in a startup file (probably
.zshrc). This gives the verbose style the value yes in every
context inside the completion system, unless that context
has a more specific defini&acirc; <br>
tion. It is best to avoid giving the context as
&lsquo;*&rsquo; in case the style has some meaning outside
the completion system.</p>

<p style="margin-top: 1em">Many such general purpose styles
can be configured simply by using the compinstall
function.</p>

<p style="margin-top: 1em">A more specific example of the
use of the verbose style is by the completion for the kill
builtin. If the style is set, the builtin lists full job
texts and process command <br>
lines; otherwise it shows the bare job numbers and PIDs. To
turn the style off for this use only:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:kill:*&rsquo; verbose no</p>

<p style="margin-top: 1em">For even more control, the style
can use one of the tags &lsquo;jobs&rsquo; or
&lsquo;processes&rsquo;. To turn off verbose display only
for jobs:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:kill:*:jobs&rsquo; verbose no</p>

<p style="margin-top: 1em">The -e option to zstyle even
allows completion function code to appear as the argument to
a style; this requires some understanding of the internals
of completion functions (see <br>
see zshcompwid(1))). For example,</p>

<p style="margin-top: 1em">zstyle -e
&rsquo;:completion:*&rsquo; hosts
&rsquo;reply=($myhosts)&rsquo;</p>

<p style="margin-top: 1em">This forces the value of the
hosts style to be read from the variable myhosts each time a
host name is needed; this is useful if the value of myhosts
can change dynamically. For <br>
another useful example, see the example in the description
of the file-list style below. This form can be slow and
should be avoided for commonly examined styles such as menu
<br>
and list-rows-first.</p>

<p style="margin-top: 1em">Note that the order in which
styles are defined does not matter; the style mechanism uses
the most specific possible match for a particular style to
determine the set of values. <br>
More precisely, strings are preferred over patterns (for
example, &lsquo;:completion::complete:foo&rsquo; is more
specific than &lsquo;:completion::complete:*&rsquo;), and
longer patterns are preferred <br>
over shorter patterns.</p>

<p style="margin-top: 1em">Style names like those of tags
are arbitrary and depend on the completion function.
However, the following two sections list some of the most
common tags and styles.</p>

<p style="margin-top: 1em">Standard Tags <br>
Some of the following are only used when looking up
particular styles and do not refer to a type of match.</p>

<p style="margin-top: 1em">accounts <br>
used to look up the users-hosts style</p>

<p style="margin-top: 1em">all-expansions <br>
used by the _expand completer when adding the single string
containing all possible expansions</p>

<p style="margin-top: 1em">all-files <br>
for the names of all files (as distinct from a particular
subset, see the globbed-files tag).</p>

<p style="margin-top: 1em">arguments <br>
for arguments to a command</p>

<p style="margin-top: 1em">arrays for names of array
parameters</p>

<p style="margin-top: 1em">association-keys <br>
for keys of associative arrays; used when completing inside
a subscript to a parameter of this type</p>

<p style="margin-top: 1em">bookmarks <br>
when completing bookmarks (e.g. for URLs and the zftp
function suite)</p>

<p style="margin-top: 1em">builtins <br>
for names of builtin commands</p>

<p style="margin-top: 1em">characters <br>
for single characters in arguments of commands such as stty.
Also used when completing character classes after an opening
bracket</p>

<p style="margin-top: 1em">colormapids <br>
for X colormap ids</p>

<p style="margin-top: 1em">colors for color names</p>

<p style="margin-top: 1em">commands <br>
for names of external commands. Also used by complex
commands such as cvs when completing names subcommands.</p>

<p style="margin-top: 1em">contexts <br>
for contexts in arguments to the zstyle builtin command</p>

<p style="margin-top: 1em">corrections <br>
used by the _approximate and _correct completers for
possible corrections</p>

<p style="margin-top: 1em">cursors <br>
for cursor names used by X programs</p>

<p style="margin-top: 1em">default <br>
used in some contexts to provide a way of supplying a
default when more specific tags are also valid. Note that
this tag is used when only the function field of the
con&acirc; <br>
text name is set</p>

<p style="margin-top: 1em">descriptions <br>
used when looking up the value of the format style to
generate descriptions for types of matches</p>

<p style="margin-top: 1em">devices <br>
for names of device special files</p>

<p style="margin-top: 1em">directories <br>
for names of directories -- local-directories is used
instead when completing arguments of cd and related builtin
commands when the cdpath array is set</p>

<p style="margin-top: 1em">directory-stack <br>
for entries in the directory stack</p>

<p style="margin-top: 1em">displays <br>
for X display names</p>

<p style="margin-top: 1em">domains <br>
for network domains</p>

<p style="margin-top: 1em">expansions <br>
used by the _expand completer for individual words (as
opposed to the complete set of expansions) resulting from
the expansion of a word on the command line</p>

<p style="margin-top: 1em">extensions <br>
for X server extensions</p>

<p style="margin-top: 1em">file-descriptors <br>
for numbers of open file descriptors</p>

<p style="margin-top: 1em">files the generic file-matching
tag used by functions completing filenames</p>

<p style="margin-top: 1em">fonts for X font names</p>

<p style="margin-top: 1em">fstypes <br>
for file system types (e.g. for the mount command)</p>

<p style="margin-top: 1em">functions <br>
names of functions -- normally shell functions, although
certain commands may understand other kinds of function</p>

<p style="margin-top: 1em">globbed-files <br>
for filenames when the name has been generated by pattern
matching</p>

<p style="margin-top: 1em">groups for names of user
groups</p>

<p style="margin-top: 1em">history-words <br>
for words from the history</p>

<p style="margin-top: 1em">hosts for hostnames</p>

<p style="margin-top: 1em">indexes <br>
for array indexes</p>

<p style="margin-top: 1em">jobs for jobs (as listed by the
&lsquo;jobs&rsquo; builtin)</p>

<p style="margin-top: 1em">interfaces <br>
for network interfaces</p>

<p style="margin-top: 1em">keymaps <br>
for names of zsh keymaps</p>

<p style="margin-top: 1em">keysyms <br>
for names of X keysyms</p>

<p style="margin-top: 1em">libraries <br>
for names of system libraries</p>

<p style="margin-top: 1em">limits for system limits</p>

<p style="margin-top: 1em">local-directories <br>
for names of directories that are subdirectories of the
current working directory when completing arguments of cd
and related builtin commands (compare path-directories) <br>
-- when the cdpath array is unset, directories is used
instead</p>

<p style="margin-top: 1em">manuals <br>
for names of manual pages</p>

<p style="margin-top: 1em">mailboxes <br>
for e-mail folders</p>

<p style="margin-top: 1em">maps for map names (e.g. NIS
maps)</p>

<p style="margin-top: 1em">messages <br>
used to look up the format style for messages</p>

<p style="margin-top: 1em">modifiers <br>
for names of X modifiers</p>

<p style="margin-top: 1em">modules <br>
for modules (e.g. zsh modules)</p>

<p style="margin-top: 1em">my-accounts <br>
used to look up the users-hosts style</p>

<p style="margin-top: 1em">named-directories <br>
for named directories (you wouldn&rsquo;t have guessed that,
would you?)</p>

<p style="margin-top: 1em">names for all kinds of names</p>

<p style="margin-top: 1em">newsgroups <br>
for USENET groups</p>

<p style="margin-top: 1em">nicknames <br>
for nicknames of NIS maps</p>

<p style="margin-top: 1em">options <br>
for command options</p>

<p style="margin-top: 1em">original <br>
used by the _approximate, _correct and _expand completers
when offering the original string as a match</p>

<p style="margin-top: 1em">other-accounts <br>
used to look up the users-hosts style</p>

<p style="margin-top: 1em">other-files <br>
for the names of any non-directory files. This is used
instead of all-files when the list-dirs-first style is in
effect.</p>

<p style="margin-top: 1em">packages <br>
for packages (e.g. rpm or installed Debian packages)</p>

<p style="margin-top: 1em">parameters <br>
for names of parameters</p>

<p style="margin-top: 1em">path-directories <br>
for names of directories found by searching the cdpath array
when completing arguments of cd and related builtin commands
(compare local-directories)</p>

<p style="margin-top: 1em">paths used to look up the values
of the expand, ambiguous and special-dirs styles</p>

<p style="margin-top: 1em">pods for perl pods
(documentation files)</p>

<p style="margin-top: 1em">ports for communication
ports</p>

<p style="margin-top: 1em">prefixes <br>
for prefixes (like those of a URL)</p>

<p style="margin-top: 1em">printers <br>
for print queue names</p>

<p style="margin-top: 1em">processes <br>
for process identifiers</p>

<p style="margin-top: 1em">processes-names <br>
used to look up the command style when generating the names
of processes for killall</p>

<p style="margin-top: 1em">sequences <br>
for sequences (e.g. mh sequences)</p>

<p style="margin-top: 1em">sessions <br>
for sessions in the zftp function suite</p>

<p style="margin-top: 1em">signals <br>
for signal names</p>

<p style="margin-top: 1em">strings <br>
for strings (e.g. the replacement strings for the cd builtin
command)</p>

<p style="margin-top: 1em">styles for styles used by the
zstyle builtin command</p>

<p style="margin-top: 1em">suffixes <br>
for filename extensions</p>

<p style="margin-top: 1em">tags for tags (e.g. rpm
tags)</p>

<p style="margin-top: 1em">targets <br>
for makefile targets</p>

<p style="margin-top: 1em">time-zones <br>
for time zones (e.g. when setting the TZ parameter)</p>

<p style="margin-top: 1em">types for types of whatever
(e.g. address types for the xhost command)</p>

<p style="margin-top: 1em">urls used to look up the urls
and local styles when completing URLs</p>

<p style="margin-top: 1em">users for usernames</p>

<p style="margin-top: 1em">values for one of a set of
values in certain lists</p>

<p style="margin-top: 1em">variant <br>
used by _pick_variant to look up the command to run when
determining what program is installed for a particular
command name.</p>

<p style="margin-top: 1em">visuals <br>
for X visuals</p>

<p style="margin-top: 1em">warnings <br>
used to look up the format style for warnings</p>

<p style="margin-top: 1em">widgets <br>
for zsh widget names</p>

<p style="margin-top: 1em">windows <br>
for IDs of X windows</p>

<p style="margin-top: 1em">zsh-options <br>
for shell options</p>

<p style="margin-top: 1em">Standard Styles <br>
Note that the values of several of these styles represent
boolean values. Any of the strings &lsquo;true&rsquo;,
&lsquo;on&rsquo;, &lsquo;yes&rsquo;, and &lsquo;1&rsquo; can
be used for the value &lsquo;true&rsquo; and any of the
strings <br>
&lsquo;false&rsquo;, &lsquo;off&rsquo;, &lsquo;no&rsquo;,
and &lsquo;0&rsquo; for the value &lsquo;false&rsquo;. The
behavior for any other value is undefined except where
explicitly mentioned. The default value may be either true
or <br>
false if the style is not set.</p>

<p style="margin-top: 1em">Some of these styles are tested
first for every possible tag corresponding to a type of
match, and if no style was found, for the default tag. The
most notable styles of this <br>
type are menu, list-colors and styles controlling completion
listing such as list-packed and last-prompt. When tested for
the default tag, only the function field of the context <br>
will be set so that a style using the default tag will
normally be defined along the lines of:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:default&rsquo; menu ...</p>

<p style="margin-top: 1em">accept-exact <br>
This is tested for the default tag in addition to the tags
valid for the current context. If it is set to
&lsquo;true&rsquo; and any of the trial matches is the same
as the string on <br>
the command line, this match will immediately be accepted
(even if it would otherwise be considered ambiguous).</p>

<p style="margin-top: 1em">When completing pathnames (where
the tag used is &lsquo;paths&rsquo;) this style accepts any
number of patterns as the value in addition to the boolean
values. Pathnames matching one <br>
of these patterns will be accepted immediately even if the
command line contains some more partially typed pathname
components and these match no file under the directory <br>
accepted.</p>

<p style="margin-top: 1em">This style is also used by the
_expand completer to decide if words beginning with a tilde
or parameter expansion should be expanded. For example, if
there are parameters <br>
foo and foobar, the string &lsquo;$foo&rsquo; will only be
expanded if accept-exact is set to &lsquo;true&rsquo;;
otherwise the completion system will be allowed to complete
$foo to $foobar. If <br>
the style is set to &lsquo;continue&rsquo;, _expand will add
the expansion as a match and the completion system will also
be allowed to continue.</p>

<p style="margin-top: 1em">accept-exact-dirs <br>
This is used by filename completion. Unlike accept-exact it
is a boolean. By default, filename completion examines all
components of a path to see if there are comple&acirc; <br>
tions of that component, even if the component matches an
existing directory. For example, when completion after
/usr/bin/, the function examines possible completions to
<br>
/usr.</p>

<p style="margin-top: 1em">When this style is true, any
prefix of a path that matches an existing directory is
accepted without any attempt to complete it further. Hence,
in the given example, the <br>
path /usr/bin/ is accepted immediately and completion tried
in that directory.</p>

<p style="margin-top: 1em">If you wish to inhibit this
behaviour entirely, set the path-completion style (see
below) to false.</p>

<p style="margin-top: 1em">add-space <br>
This style is used by the _expand completer. If it is true
(the default), a space will be inserted after all words
resulting from the expansion, or a slash in the case of <br>
directory names. If the value is &lsquo;file&rsquo;, the
completer will only add a space to names of existing files.
Either a boolean true or the value &lsquo;file&rsquo; may be
combined with <br>
&lsquo;subst&rsquo;, in which case the completer will not
add a space to words generated from the expansion of a
substitution of the form &lsquo;$(...)&rsquo; or
&lsquo;${...}&rsquo;.</p>

<p style="margin-top: 1em">The _prefix completer uses this
style as a simple boolean value to decide if a space should
be inserted before the suffix.</p>

<p style="margin-top: 1em">ambiguous <br>
This applies when completing non-final components of
filename paths, in other words those with a trailing slash.
If it is set, the cursor is left after the first
ambigu&acirc; <br>
ous component, even if menu completion is in use. The style
is always tested with the paths tag.</p>

<p style="margin-top: 1em">assign-list <br>
When completing after an equals sign that is being treated
as an assignment, the completion system normally completes
only one filename. In some cases the value may be a <br>
list of filenames separated by colons, as with PATH and
similar parameters. This style can be set to a list of
patterns matching the names of such parameters.</p>

<p style="margin-top: 1em">The default is to complete lists
when the word on the line already contains a colon.</p>

<p style="margin-top: 1em">auto-description <br>
If set, this style&rsquo;s value will be used as the
description for options that are not described by the
completion functions, but that have exactly one argument.
The <br>
sequence &lsquo;%d&rsquo; in the value will be replaced by
the description for this argument. Depending on personal
preferences, it may be useful to set this style to something
like <br>
&lsquo;specify: %d&rsquo;. Note that this may not work for
some commands.</p>

<p style="margin-top: 1em">avoid-completer <br>
This is used by the _all_matches completer to decide if the
string consisting of all matches should be added to the list
currently being generated. Its value is a list of <br>
names of completers. If any of these is the name of the
completer that generated the matches in this completion, the
string will not be added.</p>

<p style="margin-top: 1em">The default value for this style
is &lsquo;_expand _old_list _correct _approximate&rsquo;,
i.e. it contains the completers for which a string with all
matches will almost never be <br>
wanted.</p>

<p style="margin-top: 1em">cache-path <br>
This style defines the path where any cache files containing
dumped completion data are stored. It defaults to
&lsquo;$ZDOTDIR/.zcompcache&rsquo;, or
&lsquo;$HOME/.zcompcache&rsquo; if $ZDOTDIR <br>
is not defined. The completion cache will not be used unless
the use-cache style is set.</p>

<p style="margin-top: 1em">cache-policy <br>
This style defines the function that will be used to
determine whether a cache needs rebuilding. See the section
on the _cache_invalid function below.</p>

<p style="margin-top: 1em">call-command <br>
This style is used in the function for commands such as make
and ant where calling the command directly to generate
matches suffers problems such as being slow or, as in <br>
the case of make can potentially cause actions in the
makefile to be executed. If it is set to &lsquo;true&rsquo;
the command is called to generate matches. The default value
of this <br>
style is &lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">command <br>
In many places, completion functions need to call external
commands to generate the list of completions. This style can
be used to override the command that is called in <br>
some such cases. The elements of the value are joined with
spaces to form a command line to execute. The value can also
start with a hyphen, in which case the usual com&acirc; <br>
mand will be added to the end; this is most useful for
putting &lsquo;builtin&rsquo; or &lsquo;command&rsquo; in
front to make sure the appropriate version of a command is
called, for example to <br>
avoid calling a shell function with the same name as an
external command.</p>

<p style="margin-top: 1em">As an example, the completion
function for process IDs uses this style with the processes
tag to generate the IDs to complete and the list of
processes to display (if the <br>
verbose style is &lsquo;true&rsquo;). The list produced by
the command should look like the output of the ps command.
The first line is not displayed, but is searched for the
string <br>
&lsquo;PID&rsquo; (or &lsquo;pid&rsquo;) to find the
position of the process IDs in the following lines. If the
line does not contain &lsquo;PID&rsquo;, the first numbers
in each of the other lines are <br>
taken as the process IDs to complete.</p>

<p style="margin-top: 1em">Note that the completion
function generally has to call the specified command for
each attempt to generate the completion list. Hence care
should be taken to specify only <br>
commands that take a short time to run, and in particular to
avoid any that may never terminate.</p>

<p style="margin-top: 1em">command-path <br>
This is a list of directories to search for commands to
complete. The default for this style is the value of the
special parameter path.</p>

<p style="margin-top: 1em">commands <br>
This is used by the function completing sub-commands for the
system initialisation scripts (residing in /etc/init.d or
somewhere not too far away from that). Its values <br>
give the default commands to complete for those commands for
which the completion function isn&rsquo;t able to find them
out automatically. The default for this style are the <br>
two strings &lsquo;start&rsquo; and &lsquo;stop&rsquo;.</p>

<p style="margin-top: 1em">complete <br>
This is used by the _expand_alias function when invoked as a
bindable command. If set to &lsquo;true&rsquo; and the word
on the command line is not the name of an alias, matching
<br>
alias names will be completed.</p>

<p style="margin-top: 1em">complete-options <br>
This is used by the completer for cd, chdir and pushd. For
these commands a - is used to introduce a directory stack
entry and completion of these is far more common than <br>
completing options. Hence unless the value of this style is
true options will not be completed, even after an initial -.
If it is true, options will be completed after <br>
an initial - unless there is a preceding -- on the command
line.</p>

<p style="margin-top: 1em">completer <br>
The strings given as the value of this style provide the
names of the completer functions to use. The available
completer functions are described in the section
&lsquo;Control <br>
Functions&rsquo; below.</p>

<p style="margin-top: 1em">Each string may be either the
name of a completer function or a string of the form
&lsquo;function:name&rsquo;. In the first case the completer
field of the context will contain the <br>
name of the completer without the leading underscore and
with all other underscores replaced by hyphens. In the
second case the function is the name of the completer to
<br>
call, but the context will contain the user-defined name in
the completer field of the context. If the name starts with
a hyphen, the string for the context will be build <br>
from the name of the completer function as in the first case
with the name appended to it. For example:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete
_complete:-foo</p>

<p style="margin-top: 1em">Here, completion will call the
_complete completer twice, once using &lsquo;complete&rsquo;
and once using &lsquo;complete-foo&rsquo; in the completer
field of the context. Normally, using the <br>
same completer more than once only makes sense when used
with the &lsquo;functions:name&rsquo; form, because
otherwise the context name will be the same in all calls to
the completer; <br>
possible exceptions to this rule are the _ignored and
_prefix completers.</p>

<p style="margin-top: 1em">The default value for this style
is &lsquo;_complete _ignored&rsquo;: only completion will be
done, first using the ignored-patterns style and the
$fignore array and then without <br>
ignoring matches.</p>

<p style="margin-top: 1em">condition <br>
This style is used by the _list completer function to decide
if insertion of matches should be delayed unconditionally.
The default is &lsquo;true&rsquo;.</p>

<p style="margin-top: 1em">delimiters <br>
This style is used when adding a delimiter for use with
history modifiers or glob qualifiers that have delimited
arguments. It is an array of preferred delimiters to add.
<br>
Non-special characters are preferred as the completion
system may otherwise become confused. The default list is :,
+, /, -, %. The list may be empty to force a delim&acirc;
<br>
iter to be typed.</p>

<p style="margin-top: 1em">disabled <br>
If this is set to &lsquo;true&rsquo;, the _expand_alias
completer and bindable command will try to expand disabled
aliases, too. The default is &lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">domains <br>
A list of names of network domains for completion. If this
is not set, domain names will be taken from the file
/etc/resolv.conf.</p>

<p style="margin-top: 1em">environ <br>
The environ style is used when completing for
&lsquo;sudo&rsquo;. It is set to an array of
&lsquo;VAR=value&rsquo; assignments to be exported into the
local environment before the completion for <br>
the target command is invoked. <br>
zstyle &rsquo;:completion:*:sudo::&rsquo; environ
PATH=&quot;/sbin:/usr/sbin:$PATH&quot;
HOME=&quot;/root&quot;</p>

<p style="margin-top: 1em">expand This style is used when
completing strings consisting of multiple parts, such as
path names.</p>

<p style="margin-top: 1em">If one of its values is the
string &lsquo;prefix&rsquo;, the partially typed word from
the line will be expanded as far as possible even if
trailing parts cannot be completed.</p>

<p style="margin-top: 1em">If one of its values is the
string &lsquo;suffix&rsquo;, matching names for components
after the first ambiguous one will also be added. This means
that the resulting string is the <br>
longest unambiguous string possible. However, menu
completion can be used to cycle through all matches.</p>

<p style="margin-top: 1em">fake This style may be set for
any completion context. It specifies additional strings that
will always be completed in that context. The form of each
string is <br>
&lsquo;value:description&rsquo;; the colon and description
may be omitted, but any literal colons in value must be
quoted with a backslash. Any description provided is shown
along&acirc; <br>
side the value in completion listings.</p>

<p style="margin-top: 1em">It is important to use a
sufficiently restrictive context when specifying fake
strings. Note that the styles fake-files and fake-parameters
provide additional features <br>
when completing files or parameters.</p>

<p style="margin-top: 1em">fake-always <br>
This works identically to the fake style except that the
ignored-patterns style is not applied to it. This makes it
possible to override a set of matches completely by <br>
setting the ignored patterns to &lsquo;*&rsquo;.</p>

<p style="margin-top: 1em">The following shows a way of
supplementing any tag with arbitrary data, but having it
behave for display purposes like a separate tag. In this
example we use the features <br>
of the tag-order style to divide the named-directories tag
into two when performing completion with the standard
completer complete for arguments of cd. The tag <br>
named-directories-normal behaves as normal, but the tag
named-directories-mine contains a fixed set of directories.
This has the effect of adding the match group &lsquo;extra
<br>
directories&rsquo; with the given completions.</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion::complete:cd:*&rsquo; tag-order
&rsquo;named-directories:-mine:extra&nbsp;directories <br>
named-directories:-normal:named&nbsp;directories *&rsquo;
<br>
zstyle
&rsquo;:completion::complete:cd:*:named-directories-mine&rsquo;
fake-always mydir1 mydir2 <br>
zstyle
&rsquo;:completion::complete:cd:*:named-directories-mine&rsquo;
ignored-patterns &rsquo;*&rsquo;</p>

<p style="margin-top: 1em">fake-files <br>
This style is used when completing files and looked up
without a tag. Its values are of the form
&lsquo;dir:names...&rsquo;. This will add the names (strings
separated by spaces) as <br>
possible matches when completing in the directory dir, even
if no such files really exist. The dir may be a pattern;
pattern characters or colons in dir should be quoted <br>
with a backslash to be treated literally.</p>

<p style="margin-top: 1em">This can be useful on systems
that support special file systems whose top-level pathnames
can not be listed or generated with glob patterns. It can
also be used for <br>
directories for which one does not have read permission.</p>

<p style="margin-top: 1em">The pattern form can be used to
add a certain &lsquo;magic&rsquo; entry to all directories
on a particular file system.</p>

<p style="margin-top: 1em">fake-parameters <br>
This is used by the completion function for parameter names.
Its values are names of parameters that might not yet be set
but should be completed nonetheless. Each name <br>
may also be followed by a colon and a string specifying the
type of the parameter (like &lsquo;scalar&rsquo;,
&lsquo;array&rsquo; or &lsquo;integer&rsquo;). If the type
is given, the name will only be com&acirc; <br>
pleted if parameters of that type are required in the
particular context. Names for which no type is specified
will always be completed.</p>

<p style="margin-top: 1em">file-list <br>
This style controls whether files completed using the
standard builtin mechanism are to be listed with a long list
similar to ls -l. Note that this feature uses the shell <br>
module zsh/stat for file information; this loads the builtin
stat which will replace any external stat executable. To
avoid this the following code can be included in an <br>
initialization file:</p>

<p style="margin-top: 1em">zmodload -i zsh/stat <br>
disable stat</p>

<p style="margin-top: 1em">The style may either be set to a
true value (or &lsquo;all&rsquo;), or one of the values
&lsquo;insert&rsquo; or &lsquo;list&rsquo;, indicating that
files are to be listed in long format in all circum&acirc;
<br>
stances, or when attempting to insert a file name, or when
listing file names without attempting to insert one.</p>

<p style="margin-top: 1em">More generally, the value may be
an array of any of the above values, optionally followed by
=num. If num is present it gives the maximum number of
matches for which long <br>
listing style will be used. For example,</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; file-list list=20 insert=10</p>

<p style="margin-top: 1em">specifies that long format will
be used when listing up to 20 files or inserting a file with
up to 10 matches (assuming a listing is to be shown at all,
for example on an <br>
ambiguous completion), else short format will be used.</p>

<p style="margin-top: 1em">zstyle -e
&rsquo;:completion:*&rsquo; file-list &rsquo;(( ${+NUMERIC}
)) &amp;&amp; reply=(true)&rsquo;</p>

<p style="margin-top: 1em">specifies that long format will
be used any time a numeric argument is supplied, else short
format.</p>

<p style="margin-top: 1em">file-patterns <br>
This is used by the standard function for completing
filenames, _files. If the style is unset up to three tags
are offered,
&lsquo;globbed-files&rsquo;,&lsquo;directories&rsquo; and
&lsquo;all-files&rsquo;, <br>
depending on the types of files expected by the caller of
_files. The first two (&lsquo;globbed-files&rsquo; and
&lsquo;directories&rsquo;) are normally offered together to
make it easier to <br>
complete files in sub-directories.</p>

<p style="margin-top: 1em">The file-patterns style provides
alternatives to the default tags, which are not used. Its
value consists of elements of the form
&lsquo;pattern:tag&rsquo;; each string may contain <br>
any number of such specifications separated by spaces.</p>

<p style="margin-top: 1em">The pattern is a pattern that is
to be used to generate filenames. Any occurrence of the
sequence &lsquo;%p&rsquo; is replaced by any pattern(s)
passed by the function calling <br>
_files. Colons in the pattern must be preceded by a
backslash to make them distinguishable from the colon before
the tag. If more than one pattern is needed, the pat&acirc;
<br>
terns can be given inside braces, separated by commas.</p>

<p style="margin-top: 1em">The tags of all strings in the
value will be offered by _files and used when looking up
other styles. Any tags in the same word will be offered at
the same time and <br>
before later words. If no &lsquo;:tag&rsquo; is given the
&lsquo;files&rsquo; tag will be used.</p>

<p style="margin-top: 1em">The tag may also be followed by
an optional second colon and a description, which will be
used for the &lsquo;%d&rsquo; in the value of the format
style (if that is set) instead of <br>
the default description supplied by the completion function.
If the description given here contains itself a
&lsquo;%d&rsquo;, that is replaced with the description
supplied by the <br>
completion function.</p>

<p style="margin-top: 1em">For example, to make the rm
command first complete only names of object files and then
the names of all files if there is no matching object
file:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:rm:*&rsquo; file-patterns
&rsquo;*.o:object-files&rsquo;
&rsquo;%p:all-files&rsquo;</p>

<p style="margin-top: 1em">To alter the default behaviour
of file completion -- offer files matching a pattern and
directories on the first attempt, then all files -- to offer
only matching files on <br>
the first attempt, then directories, and finally all
files:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; file-patterns
&rsquo;%p:globbed-files&rsquo;
&rsquo;*(-/):directories&rsquo;
&rsquo;*:all-files&rsquo;</p>

<p style="margin-top: 1em">This works even where there is
no special pattern: _files matches all files using the
pattern &lsquo;*&rsquo; at the first step and stops when it
sees this pattern. Note also it will <br>
never try a pattern more than once for a single completion
attempt.</p>

<p style="margin-top: 1em">During the execution of
completion functions, the EXTENDED_GLOB option is in effect,
so the characters &lsquo;#&rsquo;, &lsquo;~&rsquo; and
&lsquo;^&rsquo; have special meanings in the patterns.</p>

<p style="margin-top: 1em">file-sort <br>
The standard filename completion function uses this style
without a tag to determine in which order the names should
be listed; menu completion will cycle through them in <br>
the same order. The possible values are: &lsquo;size&rsquo;
to sort by the size of the file; &lsquo;links&rsquo; to sort
by the number of links to the file;
&lsquo;modification&rsquo; (or &lsquo;time&rsquo; or
&lsquo;date&rsquo;) <br>
to sort by the last modification time; &lsquo;access&rsquo;
to sort by the last access time; and &lsquo;inode&rsquo; (or
&lsquo;change&rsquo;) to sort by the last inode change time.
If the style is set to <br>
any other value, or is unset, files will be sorted
alphabetically by name. If the value contains the string
&lsquo;reverse&rsquo;, sorting is done in the opposite
order. If the <br>
value contains the string &lsquo;follow&rsquo;, timestamps
are associated with the targets of symbolic links; the
default is to use the timestamps of the links
themselves.</p>

<p style="margin-top: 1em">filter This is used by the LDAP
plugin for e-mail address completion to specify the
attributes to match against when filtering entries. So for
example, if the style is set to <br>
&lsquo;sn&rsquo;, matching is done against surnames.
Standard LDAP filtering is used so normal completion
matching is bypassed. If this style is not set, the LDAP
plugin is skipped. <br>
You may also need to set the command style to specify how to
connect to your LDAP server.</p>

<p style="margin-top: 1em">force-list <br>
This forces a list of completions to be shown at any point
where listing is done, even in cases where the list would
usually be suppressed. For example, normally the list <br>
is only shown if there are at least two different matches.
By setting this style to &lsquo;always&rsquo;, the list will
always be shown, even if there is only a single match that
<br>
will immediately be accepted. The style may also be set to a
number. In this case the list will be shown if there are at
least that many matches, even if they would all <br>
insert the same string.</p>

<p style="margin-top: 1em">This style is tested for the
default tag as well as for each tag valid for the current
completion. Hence the listing can be forced only for certain
types of match.</p>

<p style="margin-top: 1em">format If this is set for the
descriptions tag, its value is used as a string to display
above matches in completion lists. The sequence
&lsquo;%d&rsquo; in this string will be replaced <br>
with a short description of what these matches are. This
string may also contain the following sequences to specify
output attributes, as described in the section EXPAN&acirc;
<br>
SION OF PROMPT SEQUENCES in zshmisc(1): &lsquo;%B&rsquo;,
&lsquo;%S&rsquo;, &lsquo;%U&rsquo;, &lsquo;%F&rsquo;,
&lsquo;%K&rsquo; and their lower case counterparts, as well
as &lsquo;%{...%}&rsquo;. &lsquo;%F&rsquo;, &lsquo;%K&rsquo;
and &lsquo;%{...%}&rsquo; take arguments in <br>
the same form as prompt expansion. Note that the %G sequence
is not available; an argument to &lsquo;%{&rsquo; should be
used instead.</p>

<p style="margin-top: 1em">The style is tested with each
tag valid for the current completion before it is tested for
the descriptions tag. Hence different format strings can be
defined for differ&acirc; <br>
ent types of match.</p>

<p style="margin-top: 1em">Note also that some completer
functions define additional &lsquo;%&rsquo;-sequences. These
are described for the completer functions that make use of
them.</p>

<p style="margin-top: 1em">Some completion functions
display messages that may be customised by setting this
style for the messages tag. Here, the &lsquo;%d&rsquo; is
replaced with a message given by the com&acirc; <br>
pletion function.</p>

<p style="margin-top: 1em">Finally, the format string is
looked up with the warnings tag, for use when no matches
could be generated at all. In this case the &lsquo;%d&rsquo;
is replaced with the descriptions <br>
for the matches that were expected separated by spaces. The
sequence &lsquo;%D&rsquo; is replaced with the same
descriptions separated by newlines.</p>

<p style="margin-top: 1em">It is possible to use
printf-style field width specifiers with &lsquo;%d&rsquo;
and similar escape sequences. This is handled by the zformat
builtin command from the zsh/zutil mod&acirc; <br>
ule, see zshmodules(1).</p>

<p style="margin-top: 1em">glob This is used by the _expand
completer. If it is set to &lsquo;true&rsquo; (the default),
globbing will be attempted on the words resulting from a
previous substitution (see the sub&acirc; <br>
stitute style) or else the original string from the
line.</p>

<p style="margin-top: 1em">global If this is set to
&lsquo;true&rsquo; (the default), the _expand_alias
completer and bindable command will try to expand global
aliases.</p>

<p style="margin-top: 1em">group-name <br>
The completion system can group different types of matches,
which appear in separate lists. This style can be used to
give the names of groups for particular tags. For <br>
example, in command position the completion system generates
names of builtin and external commands, names of aliases,
shell functions and parameters and reserved words as <br>
possible completions. To have the external commands and
shell functions listed separately:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:-command-:*:commands&rsquo;
group-name commands <br>
zstyle &rsquo;:completion:*:*:-command-:*:functions&rsquo;
group-name functions</p>

<p style="margin-top: 1em">As a consequence, any match with
the same tag will be displayed in the same group.</p>

<p style="margin-top: 1em">If the name given is the empty
string the name of the tag for the matches will be used as
the name of the group. So, to have all different types of
matches displayed sep&acirc; <br>
arately, one can just set:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; group-name &rsquo;&rsquo;</p>

<p style="margin-top: 1em">All matches for which no group
name is defined will be put in a group named -default-.</p>

<p style="margin-top: 1em">group-order <br>
This style is additional to the group-name style to specify
the order for display of the groups defined by that style
(compare tag-order, which determines which comple&acirc;
<br>
tions appear at all). The groups named are shown in the
given order; any other groups are shown in the order defined
by the completion function.</p>

<p style="margin-top: 1em">For example, to have names of
builtin commands, shell functions and external commands
appear in that order when completing in command
position:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:-command-:*&rsquo; group-order
builtins functions commands</p>

<p style="margin-top: 1em">groups A list of names of UNIX
groups. If this is not set, group names are taken from the
YP database or the file &lsquo;/etc/group&rsquo;.</p>

<p style="margin-top: 1em">hidden If this is set to true,
matches for the given context will not be listed, although
any description for the matches set with the format style
will be shown. If it is set <br>
to &lsquo;all&rsquo;, not even the description will be
displayed.</p>

<p style="margin-top: 1em">Note that the matches will still
be completed; they are just not shown in the list. To avoid
having matches considered as possible completions at all,
the tag-order style <br>
can be modified as described below.</p>

<p style="margin-top: 1em">hosts A list of names of hosts
that should be completed. If this is not set, hostnames are
taken from the file &lsquo;/etc/hosts&rsquo;.</p>

<p style="margin-top: 1em">hosts-ports <br>
This style is used by commands that need or accept hostnames
and network ports. The strings in the value should be of the
form &lsquo;host:port&rsquo;. Valid ports are determined by
<br>
the presence of hostnames; multiple ports for the same host
may appear.</p>

<p style="margin-top: 1em">ignore-line <br>
This is tested for each tag valid for the current
completion. If it is set to &lsquo;true&rsquo;, none of the
words that are already on the line will be considered as
possible com&acirc; <br>
pletions. If it is set to &lsquo;current&rsquo;, the word
the cursor is on will not be considered as a possible
completion. The value &lsquo;current-shown&rsquo; is similar
but only applies if <br>
the list of completions is currently shown on the screen.
Finally, if the style is set to &lsquo;other&rsquo;, all
words on the line except for the current one will be
excluded from <br>
the possible completions.</p>

<p style="margin-top: 1em">The values &lsquo;current&rsquo;
and &lsquo;current-shown&rsquo; are a bit like the opposite
of the accept-exact style: only strings with missing
characters will be completed.</p>

<p style="margin-top: 1em">Note that you almost certainly
don&rsquo;t want to set this to &lsquo;true&rsquo; or
&lsquo;other&rsquo; for a general context such as
&lsquo;:completion:*&rsquo;. This is because it would
disallow completion of, <br>
for example, options multiple times even if the command in
question accepts the option more than once.</p>

<p style="margin-top: 1em">ignore-parents <br>
The style is tested without a tag by the function completing
pathnames in order to determine whether to ignore the names
of directories already mentioned in the current <br>
word, or the name of the current working directory. The
value must include one or both of the following strings:</p>

<p style="margin-top: 1em">parent The name of any directory
whose path is already contained in the word on the line is
ignored. For example, when completing after foo/../, the
directory foo will <br>
not be considered a valid completion.</p>

<p style="margin-top: 1em">pwd The name of the current
working directory will not be completed; hence, for example,
completion after ../ will not use the name of the current
directory.</p>

<p style="margin-top: 1em">In addition, the value may
include one or both of:</p>

<p style="margin-top: 1em">.. Ignore the specified
directories only when the word on the line contains the
substring &lsquo;../&rsquo;.</p>

<p style="margin-top: 1em">directory <br>
Ignore the specified directories only when names of
directories are completed, not when completing names of
files.</p>

<p style="margin-top: 1em">Excluded values act in a similar
fashion to values of the ignored-patterns style, so they can
be restored to consideration by the _ignored completer.</p>

<p style="margin-top: 1em">extra-verbose <br>
If set, the completion listing is more verbose at the cost
of a probable decrease in completion speed. Completion
performance will suffer if this style is set to
&lsquo;true&rsquo;.</p>

<p style="margin-top: 1em">ignored-patterns <br>
A list of patterns; any trial completion matching one of the
patterns will be excluded from consideration. The _ignored
completer can appear in the list of completers to <br>
restore the ignored matches. This is a more configurable
version of the shell parameter $fignore.</p>

<p style="margin-top: 1em">Note that the EXTENDED_GLOB
option is set during the execution of completion functions,
so the characters &lsquo;#&rsquo;, &lsquo;~&rsquo; and
&lsquo;^&rsquo; have special meanings in the patterns.</p>

<p style="margin-top: 1em">insert This style is used by the
_all_matches completer to decide whether to insert the list
of all matches unconditionally instead of adding the list as
another match.</p>

<p style="margin-top: 1em">insert-ids <br>
When completing process IDs, for example as arguments to the
kill and wait builtins the name of a command may be
converted to the appropriate process ID. A problem arises
<br>
when the process name typed is not unique. By default (or if
this style is set explicitly to &lsquo;menu&rsquo;) the name
will be converted immediately to a set of possible IDs, and
<br>
menu completion will be started to cycle through them.</p>

<p style="margin-top: 1em">If the value of the style is
&lsquo;single&rsquo;, the shell will wait until the user has
typed enough to make the command unique before converting
the name to an ID; attempts at com&acirc; <br>
pletion will be unsuccessful until that point. If the value
is any other string, menu completion will be started when
the string typed by the user is longer than the com&acirc;
<br>
mon prefix to the corresponding IDs.</p>

<p style="margin-top: 1em">insert-tab <br>
If this is set to &lsquo;true&rsquo;, the completion system
will insert a TAB character (assuming that was used to start
completion) instead of performing completion when there is
no <br>
non-blank character to the left of the cursor. If it is set
to &lsquo;false&rsquo;, completion will be done even
there.</p>

<p style="margin-top: 1em">The value may also contain the
substrings &lsquo;pending&rsquo; or
&lsquo;pending=val&rsquo;. In this case, the typed character
will be inserted instead of starting completion when there
is <br>
unprocessed input pending. If a val is given, completion
will not be done if there are at least that many characters
of unprocessed input. This is often useful when <br>
pasting characters into a terminal. Note however, that it
relies on the $PENDING special parameter from the zsh/zle
module being set properly which is not guaranteed on <br>
all platforms.</p>

<p style="margin-top: 1em">The default value of this style
is &lsquo;true&rsquo; except for completion within vared
builtin command where it is &lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">insert-unambiguous <br>
This is used by the _match and _approximate completers.
These completers are often used with menu completion since
the word typed may bear little resemblance to the final <br>
completion. However, if this style is &lsquo;true&rsquo;,
the completer will start menu completion only if it could
find no unambiguous initial string at least as long as the
origi&acirc; <br>
nal string typed by the user.</p>

<p style="margin-top: 1em">In the case of the _approximate
completer, the completer field in the context will already
have been set to one of correct-num or approximate-num,
where num is the number <br>
of errors that were accepted.</p>

<p style="margin-top: 1em">In the case of the _match
completer, the style may also be set to the string
&lsquo;pattern&rsquo;. Then the pattern on the line is left
unchanged if it does not match unambiguously.</p>

<p style="margin-top: 1em">keep-prefix <br>
This style is used by the _expand completer. If it is
&lsquo;true&rsquo;, the completer will try to keep a prefix
containing a tilde or parameter expansion. Hence, for
example, the <br>
string &lsquo;~/f*&rsquo; would be expanded to
&lsquo;~/foo&rsquo; instead of &lsquo;/home/user/foo&rsquo;.
If the style is set to &lsquo;changed&rsquo; (the default),
the prefix will only be left unchanged if there <br>
were other changes between the expanded words and the
original word from the command line. Any other value forces
the prefix to be expanded unconditionally.</p>

<p style="margin-top: 1em">The behaviour of expand when
this style is true is to cause _expand to give up when a
single expansion with the restored prefix is the same as the
original; hence any <br>
remaining completers may be called.</p>

<p style="margin-top: 1em">last-prompt <br>
This is a more flexible form of the ALWAYS_LAST_PROMPT
option. If it is true, the completion system will try to
return the cursor to the previous command line after
dis&acirc; <br>
playing a completion list. It is tested for all tags valid
for the current completion, then the default tag. The cursor
will be moved back to the previous line if this <br>
style is &lsquo;true&rsquo; for all types of match. Note
that unlike the ALWAYS_LAST_PROMPT option this is
independent of the numeric prefix argument.</p>

<p style="margin-top: 1em">known-hosts-files <br>
This style should contain a list of files to search for host
names and (if the use-ip style is set) IP addresses in a
format compatible with ssh known_hosts files. If it <br>
is not set, the files /etc/ssh/ssh_known_hosts and
~/.ssh/known_hosts are used.</p>

<p style="margin-top: 1em">list This style is used by the
_history_complete_word bindable command. If it is set to
&lsquo;true&rsquo; it has no effect. If it is set to
&lsquo;false&rsquo; matches will not be listed. This <br>
overrides the setting of the options controlling listing
behaviour, in particular AUTO_LIST. The context always
starts with &lsquo;:completion:history-words&rsquo;.</p>

<p style="margin-top: 1em">list-colors <br>
If the zsh/complist module is loaded, this style can be used
to set color specifications. This mechanism replaces the use
of the ZLS_COLORS and ZLS_COLOURS parameters <br>
described in the section &lsquo;The zsh/complist
Module&rsquo; in zshmodules(1), but the syntax is the
same.</p>

<p style="margin-top: 1em">If this style is set for the
default tag, the strings in the value are taken as
specifications that are to be used everywhere. If it is set
for other tags, the specifica&acirc; <br>
tions are used only for matches of the type described by the
tag. For this to work best, the group-name style must be set
to an empty string.</p>

<p style="margin-top: 1em">In addition to setting styles
for specific tags, it is also possible to use group names
specified explicitly by the group-name tag together with the
&lsquo;(group)&rsquo; syntax <br>
allowed by the ZLS_COLORS and ZLS_COLOURS parameters and
simply using the default tag.</p>

<p style="margin-top: 1em">It is possible to use any color
specifications already set up for the GNU version of the ls
command:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:default&rsquo; list-colors
${(s.:.)LS_COLORS}</p>

<p style="margin-top: 1em">The default colors are the same
as for the GNU ls command and can be obtained by setting the
style to an empty string (i.e. &rsquo;&rsquo;).</p>

<p style="margin-top: 1em">list-dirs-first <br>
This is used by file completion. If set, directories to be
completed are listed separately from and before completion
for other files, regardless of tag ordering. In <br>
addition, the tag other-files is used in place of all-files
for the remaining files, to indicate that no directories are
presented with that tag.</p>

<p style="margin-top: 1em">list-grouped <br>
If this style is &lsquo;true&rsquo; (the default), the
completion system will try to make certain completion
listings more compact by grouping matches. For example,
options for com&acirc; <br>
mands that have the same description (shown when the verbose
style is set to &lsquo;true&rsquo;) will appear as a single
entry. However, menu selection can be used to cycle through
<br>
all the matches.</p>

<p style="margin-top: 1em">list-packed <br>
This is tested for each tag valid in the current context as
well as the default tag. If it is set to &lsquo;true&rsquo;,
the corresponding matches appear in listings as if the <br>
LIST_PACKED option were set. If it is set to
&lsquo;false&rsquo;, they are listed normally.</p>

<p style="margin-top: 1em">list-prompt <br>
If this style is set for the default tag, completion lists
that don&rsquo;t fit on the screen can be scrolled (see the
description of the zsh/complist module in zshmodules(1)).
<br>
The value, if not the empty string, will be displayed after
every screenful and the shell will prompt for a key press;
if the style is set to the empty string, a default <br>
prompt will be used.</p>

<p style="margin-top: 1em">The value may contain the escape
sequences: &lsquo;%l&rsquo; or &lsquo;%L&rsquo;, which will
be replaced by the number of the last line displayed and the
total number of lines; &lsquo;%m&rsquo; or &lsquo;%M&rsquo;,
the <br>
number of the last match shown and the total number of
matches; and &lsquo;%p&rsquo; and &lsquo;%P&rsquo;,
&lsquo;Top&rsquo; when at the beginning of the list,
&lsquo;Bottom&rsquo; when at the end and the position <br>
shown as a percentage of the total length otherwise. In each
case the form with the uppercase letter will be replaced by
a string of fixed width, padded to the right <br>
with spaces, while the lowercase form will be replaced by a
variable width string. As in other prompt strings, the
escape sequences &lsquo;%S&rsquo;, &lsquo;%s&rsquo;,
&lsquo;%B&rsquo;, &lsquo;%b&rsquo;, &lsquo;%U&rsquo;,
&lsquo;%u&rsquo; for <br>
entering and leaving the display modes standout, bold and
underline, and &lsquo;%F&rsquo;, &lsquo;%f&rsquo;,
&lsquo;%K&rsquo;, &lsquo;%k&rsquo; for changing the
foreground background colour, are also available, as is <br>
the form &lsquo;%{...%}&rsquo; for enclosing escape
sequences which display with zero (or, with a numeric
argument, some other) width.</p>

<p style="margin-top: 1em">After deleting this prompt the
variable LISTPROMPT should be unset for the removal to take
effect.</p>

<p style="margin-top: 1em">list-rows-first <br>
This style is tested in the same way as the list-packed
style and determines whether matches are to be listed in a
rows-first fashion as if the LIST_ROWS_FIRST option were
<br>
set.</p>

<p style="margin-top: 1em">list-suffixes <br>
This style is used by the function that completes filenames.
If it is true, and completion is attempted on a string
containing multiple partially typed pathname compo&acirc;
<br>
nents, all ambiguous components will be shown. Otherwise,
completion stops at the first ambiguous component.</p>

<p style="margin-top: 1em">list-separator <br>
The value of this style is used in completion listing to
separate the string to complete from a description when
possible (e.g. when completing options). It defaults to <br>
&lsquo;--&rsquo; (two hyphens).</p>

<p style="margin-top: 1em">local This is for use with
functions that complete URLs for which the corresponding
files are available directly from the file system. Its value
should consist of three <br>
strings: a hostname, the path to the default web pages for
the server, and the directory name used by a user placing
web pages within their home area.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; local toast
/var/http/public/toast public_html</p>

<p style="margin-top: 1em">Completion after
&lsquo;http://toast/stuff/&rsquo; will look for files in the
directory /var/http/public/toast/stuff, while completion
after &lsquo;http://toast/~yousir/&rsquo; will look for <br>
files in the directory ~yousir/public_html.</p>

<p style="margin-top: 1em">mail-directory <br>
If set, zsh will assume that mailbox files can be found in
the directory specified. It defaults to
&lsquo;~/Mail&rsquo;.</p>

<p style="margin-top: 1em">match-original <br>
This is used by the _match completer. If it is set to only,
_match will try to generate matches without inserting a
&lsquo;*&rsquo; at the cursor position. If set to any other
<br>
non-empty value, it will first try to generate matches
without inserting the &lsquo;*&rsquo; and if that yields no
matches, it will try again with the &lsquo;*&rsquo;
inserted. If it is unset or <br>
set to the empty string, matching will only be performed
with the &lsquo;*&rsquo; inserted.</p>

<p style="margin-top: 1em">matcher <br>
This style is tested separately for each tag valid in the
current context. Its value is added to any match
specifications given by the matcher-list style. It should be
<br>
in the form described in the section &lsquo;Completion
Matching Control&rsquo; in zshcompwid(1).</p>

<p style="margin-top: 1em">matcher-list <br>
This style can be set to a list of match specifications that
are to be applied everywhere. Match specifications are
described in the section &lsquo;Completion Matching
Control&rsquo; <br>
in zshcompwid(1). The completion system will try them one
after another for each completer selected. For example, to
try first simple completion and, if that generates <br>
no matches, case-insensitive completion:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; matcher-list &rsquo;&rsquo;
&rsquo;m:{a-zA-Z}={A-Za-z}&rsquo;</p>

<p style="margin-top: 1em">By default each specification
replaces the previous one; however, if a specification is
prefixed with +, it is added to the existing list. Hence it
is possible to create <br>
increasingly general specifications without repetition:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; matcher-list &rsquo;&rsquo;
&rsquo;+m{a-z}={A-Z}&rsquo; &rsquo;+m{A-Z}={a-z}&rsquo;</p>

<p style="margin-top: 1em">It is possible to create match
specifications valid for particular completers by using the
third field of the context. For example, to use the
completers _complete and <br>
_prefix but only allow case-insensitive completion with
_complete:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete _prefix <br>
zstyle &rsquo;:completion:*:complete:*&rsquo; matcher-list
&rsquo;&rsquo; &rsquo;m:{a-zA-Z}={A-Za-z}&rsquo;</p>

<p style="margin-top: 1em">User-defined names, as explained
for the completer style, are available. This makes it
possible to try the same completer more than once with
different match specifica&acirc; <br>
tions each time. For example, to try normal completion
without a match specification, then normal completion with
case-insensitive matching, then correction, and finally <br>
partial-word completion:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete _correct
_complete:foo <br>
zstyle &rsquo;:completion:*:complete:*&rsquo; matcher-list
&rsquo;&rsquo; &rsquo;m:{a-zA-Z}={A-Za-z}&rsquo; <br>
zstyle &rsquo;:completion:*:foo:*&rsquo; matcher-list
&rsquo;m:{a-zA-Z}={A-Za-z} r:|[-_./]=* r:|=*&rsquo;</p>

<p style="margin-top: 1em">If the style is unset in any
context no match specification is applied. Note also that
some completers such as _correct and _approximate do not use
the match specifica&acirc; <br>
tions at all, though these completers will only ever be
called once even if the matcher-list contains more than one
element.</p>

<p style="margin-top: 1em">Where multiple specifications
are useful, note that the entire completion is done for each
element of matcher-list, which can quickly reduce the
shell&rsquo;s performance. As a <br>
rough rule of thumb, one to three strings will give
acceptable performance. On the other hand, putting multiple
space-separated values into the same string does not have
<br>
an appreciable impact on performance.</p>

<p style="margin-top: 1em">If there is no current matcher
or it is empty, and the option NO_CASE_GLOB is in effect,
the matching for files is performed case-insensitively in
any case. However, any <br>
matcher must explicitly specify case-insensitive matching if
that is required.</p>

<p style="margin-top: 1em">max-errors <br>
This is used by the _approximate and _correct completer
functions to determine the maximum number of errors to
allow. The completer will try to generate completions by
<br>
first allowing one error, then two errors, and so on, until
either a match or matches were found or the maximum number
of errors given by this style has been reached.</p>

<p style="margin-top: 1em">If the value for this style
contains the string &lsquo;numeric&rsquo;, the completer
function will take any numeric argument as the maximum
number of errors allowed. For example, with</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:approximate:::&rsquo; max-errors 2
numeric</p>

<p style="margin-top: 1em">two errors are allowed if no
numeric argument is given, but with a numeric argument of
six (as in &lsquo;ESC-6 TAB&rsquo;), up to six errors are
accepted. Hence with a value of &lsquo;0 <br>
numeric&rsquo;, no correcting completion will be attempted
unless a numeric argument is given.</p>

<p style="margin-top: 1em">If the value contains the string
&lsquo;not-numeric&rsquo;, the completer will not try to
generate corrected completions when given a numeric
argument, so in this case the number <br>
given should be greater than zero. For example, &lsquo;2
not-numeric&rsquo; specifies that correcting completion with
two errors will usually be performed, but if a numeric
argument <br>
is given, correcting completion will not be performed.</p>

<p style="margin-top: 1em">The default value for this style
is &lsquo;2 numeric&rsquo;.</p>

<p style="margin-top: 1em">max-matches-width <br>
This style is used to determine the trade off between the
width of the display used for matches and the width used for
their descriptions when the verbose style is in <br>
effect. The value gives the number of display columns to
reserve for the matches. The default is half the width of
the screen.</p>

<p style="margin-top: 1em">This has the most impact when
several matches have the same description and so will be
grouped together. Increasing the style will allow more
matches to be grouped <br>
together; decreasing it will allow more of the description
to be visible.</p>

<p style="margin-top: 1em">menu If this is true in the
context of any of the tags defined for the current
completion menu completion will be used. The value for a
specific tag will take precedence over <br>
that for the &lsquo;default&rsquo; tag.</p>

<p style="margin-top: 1em">If none of the values found in
this way is true but at least one is set to
&lsquo;auto&rsquo;, the shell behaves as if the AUTO_MENU
option is set.</p>

<p style="margin-top: 1em">If one of the values is
explicitly set to false, menu completion will be explicitly
turned off, overriding the MENU_COMPLETE option and other
settings.</p>

<p style="margin-top: 1em">In the form
&lsquo;yes=num&rsquo;, where &lsquo;yes&rsquo; may be any of
the true values (&lsquo;yes&rsquo;, &lsquo;true&rsquo;,
&lsquo;on&rsquo; and &lsquo;1&rsquo;), menu completion will
be turned on if there are at least num matches. In <br>
the form &lsquo;yes=long&rsquo;, menu completion will be
turned on if the list does not fit on the screen. This does
not activate menu completion if the widget normally only
lists <br>
completions, but menu completion can be activated in that
case with the value &lsquo;yes=long-list&rsquo; (Typically,
the value &lsquo;select=long-list&rsquo; described later is
more useful as it <br>
provides control over scrolling.)</p>

<p style="margin-top: 1em">Similarly, with any of the
&lsquo;false&rsquo; values (as in &lsquo;no=10&rsquo;), menu
completion will not be used if there are num or more
matches.</p>

<p style="margin-top: 1em">The value of this widget also
controls menu selection, as implemented by the zsh/complist
module. The following values may appear either alongside or
instead of the val&acirc; <br>
ues above.</p>

<p style="margin-top: 1em">If the value contains the string
&lsquo;select&rsquo;, menu selection will be started
unconditionally.</p>

<p style="margin-top: 1em">In the form
&lsquo;select=num&rsquo;, menu selection will only be
started if there are at least num matches. If the values for
more than one tag provide a number, the smallest number <br>
is taken.</p>

<p style="margin-top: 1em">Menu selection can be turned off
explicitly by defining a value containing the
string&lsquo;no-select&rsquo;.</p>

<p style="margin-top: 1em">It is also possible to start
menu selection only if the list of matches does not fit on
the screen by using the value &lsquo;select=long&rsquo;. To
start menu selection even if the <br>
current widget only performs listing, use the value
&lsquo;select=long-list&rsquo;.</p>

<p style="margin-top: 1em">To turn on menu completion or
menu selection when a there are a certain number of matches
or the list of matches does not fit on the screen, both of
&lsquo;yes=&rsquo; and &lsquo;select=&rsquo; <br>
may be given twice, once with a number and once with
&lsquo;long&rsquo; or &lsquo;long-list&rsquo;.</p>

<p style="margin-top: 1em">Finally, it is possible to
activate two special modes of menu selection. The word
&lsquo;interactive&rsquo; in the value causes interactive
mode to be entered immediately when menu <br>
selection is started; see the description of the
zsh/complist module in zshmodules(1) for a description of
interactive mode. Including the string &lsquo;search&rsquo;
does the same <br>
for incremental search mode. To select backward incremental
search, include the string
&lsquo;search-backward&rsquo;.</p>

<p style="margin-top: 1em">muttrc If set, gives the
location of the mutt configuration file. It defaults to
&lsquo;~/.muttrc&rsquo;.</p>

<p style="margin-top: 1em">numbers <br>
This is used with the jobs tag. If it is &lsquo;true&rsquo;,
the shell will complete job numbers instead of the shortest
unambiguous prefix of the job command text. If the value is
<br>
a number, job numbers will only be used if that many words
from the job descriptions are required to resolve
ambiguities. For example, if the value is &lsquo;1&rsquo;,
strings will <br>
only be used if all jobs differ in the first word on their
command lines.</p>

<p style="margin-top: 1em">old-list <br>
This is used by the _oldlist completer. If it is set to
&lsquo;always&rsquo;, then standard widgets which perform
listing will retain the current list of matches, however
they were <br>
generated; this can be turned off explicitly with the value
&lsquo;never&rsquo;, giving the behaviour without the
_oldlist completer. If the style is unset, or any other
value, then <br>
the existing list of completions is displayed if it is not
already; otherwise, the standard completion list is
generated; this is the default behaviour of _oldlist.
How&acirc; <br>
ever, if there is an old list and this style contains the
name of the completer function that generated the list, then
the old list will be used even if it was generated <br>
by a widget which does not do listing.</p>

<p style="margin-top: 1em">For example, suppose you type
^Xc to use the _correct_word widget, which generates a list
of corrections for the word under the cursor. Usually,
typing ^D would generate <br>
a standard list of completions for the word on the command
line, and show that. With _oldlist, it will instead show the
list of corrections already generated.</p>

<p style="margin-top: 1em">As another example consider the
_match completer: with the insert-unambiguous style set to
&lsquo;true&rsquo; it inserts only a common prefix string,
if there is any. However, this <br>
may remove parts of the original pattern, so that further
completion could produce more matches than on the first
attempt. By using the _oldlist completer and setting <br>
this style to _match, the list of matches generated on the
first attempt will be used again.</p>

<p style="margin-top: 1em">old-matches <br>
This is used by the _all_matches completer to decide if an
old list of matches should be used if one exists. This is
selected by one of the &lsquo;true&rsquo; values or by the
string <br>
&lsquo;only&rsquo;. If the value is &lsquo;only&rsquo;,
_all_matches will only use an old list and won&rsquo;t have
any effect on the list of matches currently being
generated.</p>

<p style="margin-top: 1em">If this style is set it is
generally unwise to call the _all_matches completer
unconditionally. One possible use is for either this style
or the completer style to be <br>
defined with the -e option to zstyle to make the style
conditional.</p>

<p style="margin-top: 1em">old-menu <br>
This is used by the _oldlist completer. It controls how menu
completion behaves when a completion has already been
inserted and the user types a standard completion key <br>
such as TAB. The default behaviour of _oldlist is that menu
completion always continues with the existing list of
completions. If this style is set to &lsquo;false&rsquo;,
however, <br>
a new completion is started if the old list was generated by
a different completion command; this is the behaviour
without the _oldlist completer.</p>

<p style="margin-top: 1em">For example, suppose you type
^Xc to generate a list of corrections, and menu completion
is started in one of the usual ways. Usually, or with this
style set to false, <br>
typing TAB at this point would start trying to complete the
line as it now appears. With _oldlist, it instead continues
to cycle through the list of corrections.</p>

<p style="margin-top: 1em">original <br>
This is used by the _approximate and _correct completers to
decide if the original string should be added as a possible
completion. Normally, this is done only if there <br>
are at least two possible corrections, but if this style is
set to &lsquo;true&rsquo;, it is always added. Note that the
style will be examined with the completer field in the
con&acirc; <br>
text name set to correct-num or approximate-num, where num
is the number of errors that were accepted.</p>

<p style="margin-top: 1em">packageset <br>
This style is used when completing arguments of the Debian
&lsquo;dpkg&rsquo; program. It contains an override for the
default package set for a given context. For example,</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:complete:dpkg:option--status-1:*&rsquo;
packageset avail</p>

<p style="margin-top: 1em">causes available packages,
rather than only installed packages, to be completed for
&lsquo;dpkg --status&rsquo;.</p>

<p style="margin-top: 1em">path The function that completes
color names uses this style with the colors tag. The value
should be the pathname of a file containing color names in
the format of an X11 <br>
rgb.txt file. If the style is not set but this file is found
in one of various standard locations it will be used as the
default.</p>

<p style="margin-top: 1em">path-completion <br>
This is used by filename completion. By default, filename
completion examines all components of a path to see if there
are completions of that component. For example, <br>
/u/b/z can be completed to /usr/bin/zsh. Explicitly setting
this style to false inhibits this behaviour for path
components up to the / before the cursor; this overrides
<br>
the setting of accept-exact-dirs.</p>

<p style="margin-top: 1em">Even with the style set to
false, it is still possible to complete multiple paths by
setting the option COMPLETE_IN_WORD and moving the cursor
back to the first component <br>
in the path to be completed. For example, /u/b/z can be
completed to /usr/bin/zsh if the cursor is after the /u.</p>

<p style="margin-top: 1em">pine-directory <br>
If set, specifies the directory containing PINE mailbox
files. There is no default, since recursively searching this
directory is inconvenient for anyone who doesn&rsquo;t use
<br>
PINE.</p>

<p style="margin-top: 1em">ports A list of Internet service
names (network ports) to complete. If this is not set,
service names are taken from the file
&lsquo;/etc/services&rsquo;.</p>

<p style="margin-top: 1em">prefix-hidden <br>
This is used for certain completions which share a common
prefix, for example command options beginning with dashes.
If it is &lsquo;true&rsquo;, the prefix will not be shown in
the <br>
list of matches.</p>

<p style="margin-top: 1em">The default value for this style
is &lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">prefix-needed <br>
This style is also relevant for matches with a common
prefix. If it is set to &lsquo;true&rsquo; this common
prefix must be typed by the user to generate the
matches.</p>

<p style="margin-top: 1em">The style is applicable to the
options, signals, jobs, functions, and parameters completion
tags.</p>

<p style="margin-top: 1em">For command options, this means
that the initial &lsquo;-&rsquo;, &lsquo;+&rsquo;, or
&lsquo;--&rsquo; must be typed explicitly before option
names will be completed.</p>

<p style="margin-top: 1em">For signals, an initial
&lsquo;-&rsquo; is required before signal names will be
completed.</p>

<p style="margin-top: 1em">For jobs, an initial
&lsquo;%&rsquo; is required before job names will be
completed.</p>

<p style="margin-top: 1em">For function and parameter
names, an initial &lsquo;_&rsquo; or &lsquo;.&rsquo; is
required before function or parameter names starting with
those characters will be completed.</p>

<p style="margin-top: 1em">The default value for this style
is &lsquo;false&rsquo; for function and parameter
completions, and &lsquo;true&rsquo; otherwise.</p>

<p style="margin-top: 1em">preserve-prefix <br>
This style is used when completing path names. Its value
should be a pattern matching an initial prefix of the word
to complete that should be left unchanged under all <br>
circumstances. For example, on some Unices an initial
&lsquo;//&rsquo; (double slash) has a special meaning;
setting this style to the string &lsquo;//&rsquo; will
preserve it. As another exam&acirc; <br>
ple, setting this style to &lsquo;?:/&rsquo; under Cygwin
would allow completion after &lsquo;a:/...&rsquo; and so
on.</p>

<p style="margin-top: 1em">range This is used by the
_history completer and the _history_complete_word bindable
command to decide which words should be completed.</p>

<p style="margin-top: 1em">If it is a singe number, only
the last N words from the history will be completed.</p>

<p style="margin-top: 1em">If it is a range of the form
&lsquo;max:slice&rsquo;, the last slice words will be
completed; then if that yields no matches, the slice words
before those will be tried and so on. <br>
This process stops either when at least one match was been
found, or max words have been tried.</p>

<p style="margin-top: 1em">The default is to complete all
words from the history at once.</p>

<p style="margin-top: 1em">recursive-files <br>
If this style is set, its value is an array of patterns to
be tested against &lsquo;$PWD/&rsquo;: note the trailing
slash, which allows directories in the pattern to be
delimited <br>
unambiguously by including slashes on both sides. If an
ordinary file completion fails and the word on the command
line does not yet have a directory part to its name, <br>
the style is retrieved using the same tag as for the
completion just attempted, then the elements tested against
$PWD/ in turn. If one matches, then the shell reattempts
<br>
completion by prepending the word on the command line with
each directory in the expansion of **/*(/) in turn.
Typically the elements of the style will be set to restrict
<br>
the number of directories beneath the current one to a
manageable number, for example &lsquo;*/.git/*&rsquo;.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; recursive-files
&rsquo;*/zsh/*&rsquo;</p>

<p style="margin-top: 1em">If the current directory is
/home/pws/zsh/Src, then zle_trTAB can be completed to
Zle/zle_tricky.c.</p>

<p style="margin-top: 1em">regular <br>
This style is used by the _expand_alias completer and
bindable command. If set to &lsquo;true&rsquo; (the
default), regular aliases will be expanded but only in
command position. If <br>
it is set to &lsquo;false&rsquo;, regular aliases will never
be expanded. If it is set to &lsquo;always&rsquo;, regular
aliases will be expanded even if not in command
position.</p>

<p style="margin-top: 1em">rehash If this is set when
completing external commands, the internal list (hash) of
commands will be updated for each search by issuing the
rehash command. There is a speed <br>
penalty for this which is only likely to be noticeable when
directories in the path have slow file access.</p>

<p style="margin-top: 1em">remote-access <br>
If set to false, certain commands will be prevented from
making Internet connections to retrieve remote information.
This includes the completion for the CVS command.</p>

<p style="margin-top: 1em">It is not always possible to
know if connections are in fact to a remote site, so some
may be prevented unnecessarily.</p>

<p style="margin-top: 1em">remove-all-dups <br>
The _history_complete_word bindable command and the _history
completer use this to decide if all duplicate matches should
be removed, rather than just consecutive dupli&acirc; <br>
cates.</p>

<p style="margin-top: 1em">select-prompt <br>
If this is set for the default tag, its value will be
displayed during menu selection (see the menu style above)
when the completion list does not fit on the screen as a
<br>
whole. The same escapes as for the list-prompt style are
understood, except that the numbers refer to the match or
line the mark is on. A default prompt is used when the <br>
value is the empty string.</p>

<p style="margin-top: 1em">select-scroll <br>
This style is tested for the default tag and determines how
a completion list is scrolled during a menu selection (see
the menu style above) when the completion list does <br>
not fit on the screen as a whole. If the value is
&lsquo;0&rsquo; (zero), the list is scrolled by
half-screenfuls; if it is a positive integer, the list is
scrolled by the given num&acirc; <br>
ber of lines; if it is a negative number, the list is
scrolled by a screenful minus the absolute value of the
given number of lines. The default is to scroll by single
<br>
lines.</p>

<p style="margin-top: 1em">separate-sections <br>
This style is used with the manuals tag when completing
names of manual pages. If it is &lsquo;true&rsquo;, entries
for different sections are added separately using tag names
of the <br>
form &lsquo;manual.X&rsquo;, where X is the section number.
When the group-name style is also in effect, pages from
different sections will appear separately. This style is
also <br>
used similarly with the words style when completing words
for the dict command. It allows words from different
dictionary databases to be added separately. The default
<br>
for this style is &lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">show-completer <br>
Tested whenever a new completer is tried. If it is true, the
completion system outputs a progress message in the listing
area showing what completer is being tried. The <br>
message will be overwritten by any output when completions
are found and is removed after completion is finished.</p>

<p style="margin-top: 1em">single-ignored <br>
This is used by the _ignored completer when there is only
one match. If its value is &lsquo;show&rsquo;, the single
match will be displayed but not inserted. If the value is
&lsquo;menu&rsquo;, <br>
then the single match and the original string are both added
as matches and menu completion is started, making it easy to
select either of them.</p>

<p style="margin-top: 1em">sort Many completion widgets
call _description at some point which decides whether the
matches are added sorted or unsorted (often indirectly via
_wanted or _requested). This <br>
style can be set explicitly to one of the usual true or
false values as an override. If it is not set for the
context, the standard behaviour of the calling widget is
<br>
used.</p>

<p style="margin-top: 1em">The style is tested first
against the full context including the tag, and if that
fails to produce a value against the context without the
tag.</p>

<p style="margin-top: 1em">If the calling widget explicitly
requests unsorted matches, this is usually honoured.
However, the default (unsorted) behaviour of completion for
the command history may <br>
be overridden by setting the style to true.</p>

<p style="margin-top: 1em">In the _expand completer, if it
is set to &lsquo;true&rsquo;, the expansions generated will
always be sorted. If it is set to &lsquo;menu&rsquo;, then
the expansions are only sorted when they <br>
are offered as single strings but not in the string
containing all possible expansions.</p>

<p style="margin-top: 1em">special-dirs <br>
Normally, the completion code will not produce the directory
names &lsquo;.&rsquo; and &lsquo;..&rsquo; as possible
completions. If this style is set to &lsquo;true&rsquo;, it
will add both &lsquo;.&rsquo; and &lsquo;..&rsquo; as <br>
possible completions; if it is set to &lsquo;..&rsquo;, only
&lsquo;..&rsquo; will be added.</p>

<p style="margin-top: 1em">The following example sets
special-dirs to &lsquo;..&rsquo; when the current prefix is
empty, is a single &lsquo;.&rsquo;, or consists only of a
path beginning with &lsquo;../&rsquo;. Otherwise the value
is <br>
&lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">zstyle -e
&rsquo;:completion:*&rsquo; special-dirs &rsquo;[[ $PREFIX =
(../)#(|.|..) ]] &amp;&amp; reply=(..)&rsquo;</p>

<p style="margin-top: 1em">squeeze-slashes <br>
If set to &lsquo;true&rsquo;, sequences of slashes in
filename paths (for example in &lsquo;foo//bar&rsquo;) will
be treated as a single slash. This is the usual behaviour of
UNIX paths. How&acirc; <br>
ever, by default the file completion function behaves as if
there were a &lsquo;*&rsquo; between the slashes.</p>

<p style="margin-top: 1em">stop If set to
&lsquo;true&rsquo;, the _history_complete_word bindable
command will stop once when reaching the beginning or end of
the history. Invoking _history_complete_word will then <br>
wrap around to the opposite end of the history. If this
style is set to &lsquo;false&rsquo; (the default),
_history_complete_word will loop immediately as in a menu
completion.</p>

<p style="margin-top: 1em">strip-comments <br>
If set to &lsquo;true&rsquo;, this style causes
non-essential comment text to be removed from completion
matches. Currently it is only used when completing e-mail
addresses where it <br>
removes any display name from the addresses, cutting them
down to plain user@host form.</p>

<p style="margin-top: 1em">subst-globs-only <br>
This is used by the _expand completer. If it is set to
&lsquo;true&rsquo;, the expansion will only be used if it
resulted from globbing; hence, if expansions resulted from
the use of <br>
the substitute style described below, but these were not
further changed by globbing, the expansions will be
rejected.</p>

<p style="margin-top: 1em">The default for this style is
&lsquo;false&rsquo;.</p>

<p style="margin-top: 1em">substitute <br>
This boolean style controls whether the _expand completer
will first try to expand all substitutions in the string
(such as &lsquo;$(...)&rsquo; and &lsquo;${...}&rsquo;).</p>

<p style="margin-top: 1em">The default is
&lsquo;true&rsquo;.</p>

<p style="margin-top: 1em">suffix This is used by the
_expand completer if the word starts with a tilde or
contains a parameter expansion. If it is set to
&lsquo;true&rsquo;, the word will only be expanded if it
<br>
doesn&rsquo;t have a suffix, i.e. if it is something like
&lsquo;~foo&rsquo; or &lsquo;$foo&rsquo; rather than
&lsquo;~foo/&rsquo; or &lsquo;$foo/bar&rsquo;, unless that
suffix itself contains characters eligible for expan&acirc;
<br>
sion. The default for this style is &lsquo;true&rsquo;.</p>

<p style="margin-top: 1em">tag-order <br>
This provides a mechanism for sorting how the tags available
in a particular context will be used.</p>

<p style="margin-top: 1em">The values for the style are
sets of space-separated lists of tags. The tags in each
value will be tried at the same time; if no match is found,
the next value is used. <br>
(See the file-patterns style for an exception to this
behavior.)</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:complete:-command-:*&rsquo; tag-order
&rsquo;commands functions&rsquo;</p>

<p style="margin-top: 1em">specifies that completion in
command position first offers external commands and shell
functions. Remaining tags will be tried if no completions
are found.</p>

<p style="margin-top: 1em">In addition to tag names, each
string in the value may take one of the following forms:</p>

<p style="margin-top: 1em">- If any value consists of only
a hyphen, then only the tags specified in the other values
are generated. Normally all tags not explicitly selected are
tried last if <br>
the specified tags fail to generate any matches. This means
that a single value consisting only of a single hyphen turns
off completion.</p>

<p style="margin-top: 1em">! tags... <br>
A string starting with an exclamation mark specifies names
of tags that are not to be used. The effect is the same as
if all other possible tags for the context <br>
had been listed.</p>

<p style="margin-top: 1em">tag:label ... <br>
Here, tag is one of the standard tags and label is an
arbitrary name. Matches are generated as normal but the name
label is used in contexts instead of tag. This <br>
is not useful in words starting with !.</p>

<p style="margin-top: 1em">If the label starts with a
hyphen, the tag is prepended to the label to form the name
used for lookup. This can be used to make the completion
system try a certain <br>
tag more than once, supplying different style settings for
each attempt; see below for an example.</p>

<p style="margin-top: 1em">tag:label:description <br>
As before, but description will replace the &lsquo;%d&rsquo;
in the value of the format style instead of the default
description supplied by the completion function. Spaces in
<br>
the description must be quoted with a backslash. A
&lsquo;%d&rsquo; appearing in description is replaced with
the description given by the completion function.</p>

<p style="margin-top: 1em">In any of the forms above the
tag may be a pattern or several patterns in the form
&lsquo;{pat1,pat2...}&rsquo;. In this case all matching tags
will be used except for any given <br>
explicitly in the same string.</p>

<p style="margin-top: 1em">One use of these features is to
try one tag more than once, setting other styles differently
on each attempt, but still to use all the other tags without
having to repeat <br>
them all. For example, to make completion of function names
in command position ignore all the completion functions
starting with an underscore the first time completion <br>
is tried:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:-command-:*&rsquo; tag-order
&rsquo;functions:-non-comp *&rsquo; functions <br>
zstyle &rsquo;:completion:*:functions-non-comp&rsquo;
ignored-patterns &rsquo;_*&rsquo;</p>

<p style="margin-top: 1em">On the first attempt, all tags
will be offered but the functions tag will be replaced by
functions-non-comp. The ignored-patterns style is set for
this tag to exclude <br>
functions starting with an underscore. If there are no
matches, the second value of the tag-order style is used
which completes functions using the default tag, this time
<br>
presumably including all function names.</p>

<p style="margin-top: 1em">The matches for one tag can be
split into different groups. For example:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; tag-order
&rsquo;options:-long:long&nbsp;options <br>
options:-short:short&nbsp;options <br>

options:-single-letter:single&nbsp;letter&nbsp;options&rsquo;</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:options-long&rsquo; ignored-patterns
&rsquo;[-+](|-|[^-]*)&rsquo; <br>
zstyle &rsquo;:completion:*:options-short&rsquo;
ignored-patterns &rsquo;--*&rsquo; &rsquo;[-+]?&rsquo; <br>
zstyle &rsquo;:completion:*:options-single-letter&rsquo;
ignored-patterns &rsquo;???*&rsquo;</p>

<p style="margin-top: 1em">With the group-names style set,
options beginning with &lsquo;--&rsquo;, options beginning
with a single &lsquo;-&rsquo; or &lsquo;+&rsquo; but
containing multiple characters, and single-letter options
will <br>
be displayed in separate groups with different
descriptions.</p>

<p style="margin-top: 1em">Another use of patterns is to
try multiple match specifications one after another. The
matcher-list style offers something similar, but it is
tested very early in the <br>
completion system and hence can&rsquo;t be set for single
commands nor for more specific contexts. Here is how to try
normal completion without any match specification and, if
<br>
that generates no matches, try again with case-insensitive
matching, restricting the effect to arguments of the command
foo:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*:*:foo:*&rsquo; tag-order
&rsquo;*&rsquo; &rsquo;*:-case&rsquo; <br>
zstyle &rsquo;:completion:*-case&rsquo; matcher
&rsquo;m:{a-z}={A-Z}&rsquo;</p>

<p style="margin-top: 1em">First, all the tags offered when
completing after foo are tried using the normal tag name. If
that generates no matches, the second value of tag-order is
used, which <br>
tries all tags again except that this time each has -case
appended to its name for lookup of styles. Hence this time
the value for the matcher style from the second call <br>
to zstyle in the example is used to make completion
case-insensitive.</p>

<p style="margin-top: 1em">It is possible to use the -e
option of the zstyle builtin command to specify conditions
for the use of particular tags. For example:</p>

<p style="margin-top: 1em">zstyle -e
&rsquo;*:-command-:*&rsquo; tag-order &rsquo; <br>
if [[ -n $PREFIX$SUFFIX ]]; then <br>
reply=( ) <br>
else <br>
reply=( - ) <br>
fi&rsquo;</p>

<p style="margin-top: 1em">Completion in command position
will be attempted only if the string typed so far is not
empty. This is tested using the PREFIX special parameter;
see zshcompwid for a <br>
description of parameters which are special inside
completion widgets. Setting reply to an empty array provides
the default behaviour of trying all tags at once; setting
<br>
it to an array containing only a hyphen disables the use of
all tags and hence of all completions.</p>

<p style="margin-top: 1em">If no tag-order style has been
defined for a context, the strings &lsquo;(|*-)argument-*
(|*-)option-* values&rsquo; and &lsquo;options&rsquo; plus
all tags offered by the completion function <br>
will be used to provide a sensible default behavior that
causes arguments (whether normal command arguments or
arguments of options) to be completed before option names
<br>
for most commands.</p>

<p style="margin-top: 1em">urls This is used together with
the urls tag by functions completing URLs.</p>

<p style="margin-top: 1em">If the value consists of more
than one string, or if the only string does not name a file
or directory, the strings are used as the URLs to
complete.</p>

<p style="margin-top: 1em">If the value contains only one
string which is the name of a normal file the URLs are taken
from that file (where the URLs may be separated by white
space or newlines).</p>

<p style="margin-top: 1em">Finally, if the only string in
the value names a directory, the directory hierarchy rooted
at this directory gives the completions. The top level
directory should be the <br>
file access method, such as &lsquo;http&rsquo;,
&lsquo;ftp&rsquo;, &lsquo;bookmark&rsquo; and so on. In many
cases the next level of directories will be a filename. The
directory hierarchy can descend as <br>
deep as necessary.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; urls ~/.urls <br>
mkdir -p ~/.urls/ftp/ftp.zsh.org/pub</p>

<p style="margin-top: 1em">allows completion of all the
components of the URL ftp://ftp.zsh.org/pub after suitable
commands such as &lsquo;netscape&rsquo; or
&lsquo;lynx&rsquo;. Note, however, that access methods and
<br>
files are completed separately, so if the hosts style is set
hosts can be completed without reference to the urls
style.</p>

<p style="margin-top: 1em">See the description in the
function _urls itself for more information (e.g. &lsquo;more
$^fpath/_urls(N)&rsquo;).</p>

<p style="margin-top: 1em">use-cache <br>
If this is set, the completion caching layer is activated
for any completions which use it (via the _store_cache,
_retrieve_cache, and _cache_invalid functions). The <br>
directory containing the cache files can be changed with the
cache-path style.</p>

<p style="margin-top: 1em">use-compctl <br>
If this style is set to a string not equal to false, 0, no,
and off, the completion system may use any completion
specifications defined with the compctl builtin command.
<br>
If the style is unset, this is done only if the zsh/compctl
module is loaded. The string may also contain the substring
&lsquo;first&rsquo; to use completions defined with
&lsquo;compctl <br>
-T&rsquo;, and the substring &lsquo;default&rsquo; to use
the completion defined with &lsquo;compctl -D&rsquo;.</p>

<p style="margin-top: 1em">Note that this is only intended
to smooth the transition from compctl to the new completion
system and may disappear in the future.</p>

<p style="margin-top: 1em">Note also that the definitions
from compctl will only be used if there is no specific
completion function for the command in question. For
example, if there is a function <br>
_foo to complete arguments to the command foo, compctl will
never be invoked for foo. However, the compctl version will
be tried if foo only uses default completion.</p>

<p style="margin-top: 1em">use-ip By default, the function
_hosts that completes host names strips IP addresses from
entries read from host databases such as NIS and ssh files.
If this style is true, the <br>
corresponding IP addresses can be completed as well. This
style is not use in any context where the hosts style is
set; note also it must be set before the cache of host <br>
names is generated (typically the first completion
attempt).</p>

<p style="margin-top: 1em">users This may be set to a list
of usernames to be completed. If it is not set all usernames
will be completed. Note that if it is set only that list of
users will be com&acirc; <br>
pleted; this is because on some systems querying all users
can take a prohibitive amount of time.</p>

<p style="margin-top: 1em">users-hosts <br>
The values of this style should be of the form
&lsquo;user@host&rsquo; or &lsquo;user:host&rsquo;. It is
used for commands that need pairs of user- and hostnames.
These commands will complete <br>
usernames from this style (only), and will restrict
subsequent hostname completion to hosts paired with that
user in one of the values of the style.</p>

<p style="margin-top: 1em">It is possible to group values
for sets of commands which allow a remote login, such as
rlogin and ssh, by using the my-accounts tag. Similarly,
values for sets of com&acirc; <br>
mands which usually refer to the accounts of other people,
such as talk and finger, can be grouped by using the
other-accounts tag. More ambivalent commands may use the
<br>
accounts tag.</p>

<p style="margin-top: 1em">users-hosts-ports <br>
Like users-hosts but used for commands like telnet and
containing strings of the form
&lsquo;user@host:port&rsquo;.</p>

<p style="margin-top: 1em">verbose <br>
If set, as it is by default, the completion listing is more
verbose. In particular many commands show descriptions for
options if this style is &lsquo;true&rsquo;.</p>

<p style="margin-top: 1em">word This is used by the _list
completer, which prevents the insertion of completions until
a second completion attempt when the line has not changed.
The normal way of find&acirc; <br>
ing out if the line has changed is to compare its entire
contents between the two occasions. If this style is true,
the comparison is instead performed only on the cur&acirc;
<br>
rent word. Hence if completion is performed on another word
with the same contents, completion will not be delayed.</p>

<p style="margin-top: 1em">CONTROL FUNCTIONS <br>
The initialization script compinit redefines all the widgets
which perform completion to call the supplied widget
function _main_complete. This function acts as a wrapper
call&acirc; <br>
ing the so-called &lsquo;completer&rsquo; functions that
generate matches. If _main_complete is called with
arguments, these are taken as the names of completer
functions to be called in <br>
the order given. If no arguments are given, the set of
functions to try is taken from the completer style. For
example, to use normal completion and correction if that
doesn&rsquo;t <br>
generate any matches:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete _correct</p>

<p style="margin-top: 1em">after calling compinit. The
default value for this style is &lsquo;_complete
_ignored&rsquo;, i.e. normally only ordinary completion is
tried, first with the effect of the ignored-patterns <br>
style and then without it. The _main_complete function uses
the return status of the completer functions to decide if
other completers should be called. If the return status is
<br>
zero, no other completers are tried and the _main_complete
function returns.</p>

<p style="margin-top: 1em">If the first argument to
_main_complete is a single hyphen, the arguments will not be
taken as names of completers. Instead, the second argument
gives a name to use in the com&acirc; <br>
pleter field of the context and the other arguments give a
command name and arguments to call to generate the
matches.</p>

<p style="margin-top: 1em">The following completer
functions are contained in the distribution, although users
may write their own. Note that in contexts the leading
underscore is stripped, for example <br>
basic completion is performed in the context
&lsquo;:completion::complete:...&rsquo;.</p>

<p style="margin-top: 1em">_all_matches <br>
This completer can be used to add a string consisting of all
other matches. As it influences later completers it must
appear as the first completer in the list. The list <br>
of all matches is affected by the avoid-completer and
old-matches styles described above.</p>

<p style="margin-top: 1em">It may be useful to use the
_generic function described below to bind _all_matches to
its own keystroke, for example:</p>

<p style="margin-top: 1em">zle -C all-matches complete-word
_generic <br>
bindkey &rsquo;^Xa&rsquo; all-matches <br>
zstyle &rsquo;:completion:all-matches:*&rsquo; old-matches
only <br>
zstyle &rsquo;:completion:all-matches::::&rsquo; completer
_all_matches</p>

<p style="margin-top: 1em">Note that this does not generate
completions by itself: first use any of the standard ways of
generating a list of completions, then use ^Xa to show all
matches. It is <br>
possible instead to add a standard completer to the list and
request that the list of all matches should be directly
inserted:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:all-matches::::&rsquo; completer
_all_matches _complete <br>
zstyle &rsquo;:completion:all-matches:*&rsquo; insert
true</p>

<p style="margin-top: 1em">In this case the old-matches
style should not be set.</p>

<p style="margin-top: 1em">_approximate <br>
This is similar to the basic _complete completer but allows
the completions to undergo corrections. The maximum number
of errors can be specified by the max-errors style; <br>
see the description of approximate matching in zshexpn(1)
for how errors are counted. Normally this completer will
only be tried after the normal _complete completer:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete
_approximate</p>

<p style="margin-top: 1em">This will give correcting
completion if and only if normal completion yields no
possible completions. When corrected completions are found,
the completer will normally <br>
start menu completion allowing you to cycle through these
strings.</p>

<p style="margin-top: 1em">This completer uses the tags
corrections and original when generating the possible
corrections and the original string. The format style for
the former may contain the <br>
additional sequences &lsquo;%e&rsquo; and &lsquo;%o&rsquo;
which will be replaced by the number of errors accepted to
generate the corrections and the original string,
respectively.</p>

<p style="margin-top: 1em">The completer progressively
increases the number of errors allowed up to the limit by
the max-errors style, hence if a completion is found with
one error, no completions <br>
with two errors will be shown, and so on. It modifies the
completer name in the context to indicate the number of
errors being tried: on the first try the completer field
<br>
contains &lsquo;approximate-1&rsquo;, on the second try
&lsquo;approximate-2&rsquo;, and so on.</p>

<p style="margin-top: 1em">When _approximate is called from
another function, the number of errors to accept may be
passed with the -a option. The argument is in the same
format as the max-errors <br>
style, all in one string.</p>

<p style="margin-top: 1em">Note that this completer (and
the _correct completer mentioned below) can be quite
expensive to call, especially when a large number of errors
are allowed. One way to <br>
avoid this is to set up the completer style using the -e
option to zstyle so that some completers are only used when
completion is attempted a second time on the same <br>
string, e.g.:</p>

<p style="margin-top: 1em">zstyle -e
&rsquo;:completion:*&rsquo; completer &rsquo; <br>
if [[ $_last_try != &quot;$HISTNO$BUFFER$CURSOR&quot; ]];
then <br>
_last_try=&quot;$HISTNO$BUFFER$CURSOR&quot; <br>
reply=(_complete _match _prefix) <br>
else <br>
reply=(_ignored _correct _approximate) <br>
fi&rsquo;</p>

<p style="margin-top: 1em">This uses the HISTNO parameter
and the BUFFER and CURSOR special parameters that are
available inside zle and completion widgets to find out if
the command line hasn&rsquo;t <br>
changed since the last time completion was tried. Only then
are the _ignored, _correct and _approximate completers
called.</p>

<p style="margin-top: 1em">_complete <br>
This completer generates all possible completions in a
context-sensitive manner, i.e. using the settings defined
with the compdef function explained above and the current
<br>
settings of all special parameters. This gives the normal
completion behaviour.</p>

<p style="margin-top: 1em">To complete arguments of
commands, _complete uses the utility function _normal, which
is in turn responsible for finding the particular function;
it is described below. <br>
Various contexts of the form -context- are handled
specifically. These are all mentioned above as possible
arguments to the #compdef tag.</p>

<p style="margin-top: 1em">Before trying to find a function
for a specific context, _complete checks if the parameter
&lsquo;compcontext&rsquo; is set. Setting
&lsquo;compcontext&rsquo; allows the usual completion
dis&acirc; <br>
patching to be overridden which is useful in places such as
a function that uses vared for input. If it is set to an
array, the elements are taken to be the possible <br>
matches which will be completed using the tag
&lsquo;values&rsquo; and the description
&lsquo;value&rsquo;. If it is set to an associative array,
the keys are used as the possible completions and <br>
the values (if non-empty) are used as descriptions for the
matches. If &lsquo;compcontext&rsquo; is set to a string
containing colons, it should be of the form
&lsquo;tag:descr:action&rsquo;. <br>
In this case the tag and descr give the tag and description
to use and the action indicates what should be completed in
one of the forms accepted by the _arguments utility <br>
function described below.</p>

<p style="margin-top: 1em">Finally, if
&lsquo;compcontext&rsquo; is set to a string without colons,
the value is taken as the name of the context to use and the
function defined for that context will be called. <br>
For this purpose, there is a special context named
-command-line- that completes whole command lines (commands
and their arguments). This is not used by the completion
<br>
system itself but is nonetheless handled when explicitly
called.</p>

<p style="margin-top: 1em">_correct <br>
Generate corrections, but not completions, for the current
word; this is similar to _approximate but will not allow any
number of extra characters at the cursor as that <br>
completer does. The effect is similar to spell-checking. It
is based on _approximate, but the completer field in the
context name is correct.</p>

<p style="margin-top: 1em">For example, with:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:::::&rsquo; completer _complete _correct
_approximate <br>
zstyle &rsquo;:completion:*:correct:::&rsquo; max-errors 2
not-numeric <br>
zstyle &rsquo;:completion:*:approximate:::&rsquo; max-errors
3 numeric</p>

<p style="margin-top: 1em">correction will accept up to two
errors. If a numeric argument is given, correction will not
be performed, but correcting completion will be, and will
accept as many <br>
errors as given by the numeric argument. Without a numeric
argument, first correction and then correcting completion
will be tried, with the first one accepting two <br>
errors and the second one accepting three errors.</p>

<p style="margin-top: 1em">When _correct is called as a
function, the number of errors to accept may be given
following the -a option. The argument is in the same form a
values to the accept style, <br>
all in one string.</p>

<p style="margin-top: 1em">This completer function is
intended to be used without the _approximate completer or,
as in the example, just before it. Using it after the
_approximate completer is use&acirc; <br>
less since _approximate will at least generate the corrected
strings generated by the _correct completer -- and probably
more.</p>

<p style="margin-top: 1em">_expand <br>
This completer function does not really perform completion,
but instead checks if the word on the command line is
eligible for expansion and, if it is, gives detailed
con&acirc; <br>
trol over how this expansion is done. For this to happen,
the completion system needs to be invoked with
complete-word, not expand-or-complete (the default binding
for <br>
TAB), as otherwise the string will be expanded by the
shell&rsquo;s internal mechanism before the completion
system is started. Note also this completer should be called
before <br>
the _complete completer function.</p>

<p style="margin-top: 1em">The tags used when generating
expansions are all-expansions for the string containing all
possible expansions, expansions when adding the possible
expansions as single <br>
matches and original when adding the original string from
the line. The order in which these strings are generated, if
at all, can be controlled by the group-order and <br>
tag-order styles, as usual.</p>

<p style="margin-top: 1em">The format string for
all-expansions and for expansions may contain the sequence
&lsquo;%o&rsquo; which will be replaced by the original
string from the line.</p>

<p style="margin-top: 1em">The kind of expansion to be
tried is controlled by the substitute, glob and
subst-globs-only styles.</p>

<p style="margin-top: 1em">It is also possible to call
_expand as a function, in which case the different modes may
be selected with options: -s for substitute, -g for glob and
-o for <br>
subst-globs-only.</p>

<p style="margin-top: 1em">_expand_alias <br>
If the word the cursor is on is an alias, it is expanded and
no other completers are called. The types of aliases which
are to be expanded can be controlled with the <br>
styles regular, global and disabled.</p>

<p style="margin-top: 1em">This function is also a bindable
command, see the section &lsquo;Bindable Commands&rsquo;
below.</p>

<p style="margin-top: 1em">_history <br>
Complete words from the shell&rsquo;s command history. This
completer can be controlled by the remove-all-dups, and sort
styles as for the _history_complete_word bindable com&acirc;
<br>
mand, see the section &lsquo;Bindable Commands&rsquo; below
and the section &lsquo;Completion System
Configuration&rsquo; above.</p>

<p style="margin-top: 1em">_ignored <br>
The ignored-patterns style can be set to a list of patterns
which are compared against possible completions; matching
ones are removed. With this completer those matches <br>
can be reinstated, as if no ignored-patterns style were set.
The completer actually generates its own list of matches;
which completers are invoked is determined in the <br>
same way as for the _prefix completer. The single-ignored
style is also available as described above.</p>

<p style="margin-top: 1em">_list This completer allows the
insertion of matches to be delayed until completion is
attempted a second time without the word on the line being
changed. On the first attempt, <br>
only the list of matches will be shown. It is affected by
the styles condition and word, see the section
&lsquo;Completion System Configuration&rsquo; above.</p>

<p style="margin-top: 1em">_match This completer is
intended to be used after the _complete completer. It
behaves similarly but the string on the command line may be
a pattern to match against trial com&acirc; <br>
pletions. This gives the effect of the GLOB_COMPLETE
option.</p>

<p style="margin-top: 1em">Normally completion will be
performed by taking the pattern from the line, inserting a
&lsquo;*&rsquo; at the cursor position and comparing the
resulting pattern with the possible <br>
completions generated. This can be modified with the
match-original style described above.</p>

<p style="margin-top: 1em">The generated matches will be
offered in a menu completion unless the insert-unambiguous
style is set to &lsquo;true&rsquo;; see the description
above for other options for this <br>
style.</p>

<p style="margin-top: 1em">Note that matcher specifications
defined globally or used by the completion functions (the
styles matcher-list and matcher) will not be used.</p>

<p style="margin-top: 1em">_menu This completer was written
as simple example function to show how menu completion can
be enabled in shell code. However, it has the notable effect
of disabling menu selec&acirc; <br>
tion which can be useful with _generic based widgets. It
should be used as the first completer in the list. Note that
this is independent of the setting of the MENU_COM&acirc;
<br>
PLETE option and does not work with the other menu
completion widgets such as reverse-menu-complete, or
accept-and-menu-complete.</p>

<p style="margin-top: 1em">_oldlist <br>
This completer controls how the standard completion widgets
behave when there is an existing list of completions which
may have been generated by a special completion <br>
(i.e. a separately-bound completion command). It allows the
ordinary completion keys to continue to use the list of
completions thus generated, instead of producing a new <br>
list of ordinary contextual completions. It should appear in
the list of completers before any of the widgets which
generate matches. It uses two styles: old-list and <br>
old-menu, see the section &lsquo;Completion System
Configuration&rsquo; above.</p>

<p style="margin-top: 1em">_prefix <br>
This completer can be used to try completion with the suffix
(everything after the cursor) ignored. In other words, the
suffix will not be considered to be part of the <br>
word to complete. The effect is similar to the
expand-or-complete-prefix command.</p>

<p style="margin-top: 1em">The completer style is used to
decide which other completers are to be called to generate
matches. If this style is unset, the list of completers set
for the current con&acirc; <br>
text is used -- except, of course, the _prefix completer
itself. Furthermore, if this completer appears more than
once in the list of completers only those completers not
<br>
already tried by the last invocation of _prefix will be
called.</p>

<p style="margin-top: 1em">For example, consider this
global completer style:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete _prefix
_correct _prefix:foo</p>

<p style="margin-top: 1em">Here, the _prefix completer
tries normal completion but ignoring the suffix. If that
doesn&rsquo;t generate any matches, and neither does the
call to the _correct completer <br>
after it, _prefix will be called a second time and, now only
trying correction with the suffix ignored. On the second
invocation the completer part of the context appears <br>
as &lsquo;foo&rsquo;.</p>

<p style="margin-top: 1em">To use _prefix as the last
resort and try only normal completion when it is
invoked:</p>

<p style="margin-top: 1em">zstyle
&rsquo;:completion:*&rsquo; completer _complete ... _prefix
<br>
zstyle &rsquo;:completion::prefix:*&rsquo; completer
_complete</p>

<p style="margin-top: 1em">The add-space style is also
respected. If it is set to &lsquo;true&rsquo; then _prefix
will insert a space between the matches generated (if any)
and the suffix.</p>

<p style="margin-top: 1em">Note that this completer is only
useful if the COMPLETE_IN_WORD option is set; otherwise, the
cursor will be moved to the end of the current word before
the completion <br>
code is called and hence there will be no suffix.</p>

<p style="margin-top: 1em">_user_expand <br>
This completer behaves similarly to the _expand completer
but instead performs expansions defined by users. The styles
add-space and sort styles specific to the _expand <br>
completer are usable with _user_expand in addition to other
styles handled more generally by the completion system. The
tag all-expansions is also available.</p>

<p style="margin-top: 1em">The expansion depends on the
array style user-expand being defined for the current
context; remember that the context for completers is less
specific than that for contex&acirc; <br>
tual completion as the full context has not yet been
determined. Elements of the array may have one of the
following forms: <br>
$hash</p>

<p style="margin-top: 1em">hash is the name of an
associative array. Note this is not a full parameter
expression, merely a $, suitably quoted to prevent immediate
expansion, followed by the <br>
name of an associative array. If the trial expansion word
matches a key in hash, the resulting expansion is the
corresponding value. <br>
_func</p>

<p style="margin-top: 1em">_func is the name of a shell
function whose name must begin with _ but is not otherwise
special to the completion system. The function is called
with the trial <br>
word as an argument. If the word is to be expanded, the
function should set the array reply to a list of expansions.
Optionally, it can set REPLY to a word that <br>
will be used as a description for the set of expansions. The
return status of the function is irrelevant. BINDABLE
COMMANDS <br>
In addition to the context-dependent completions provided,
which are expected to work in an intuitively obvious way,
there are a few widgets implementing special behaviour which
<br>
can be bound separately to keys. The following is a list of
these and their default bindings.</p>

<p style="margin-top: 1em">_bash_completions <br>
This function is used by two widgets, _bash_complete-word
and _bash_list-choices. It exists to provide compatibility
with completion bindings in bash. The last character <br>
of the binding determines what is completed:
&lsquo;!&rsquo;, command names; &lsquo;$&rsquo;, environment
variables; &lsquo;@&rsquo;, host names; &lsquo;/&rsquo;,
file names; &lsquo;~&rsquo; user names. In bash, the binding
pre&acirc; <br>
ceded by &lsquo;\&rsquo; gives completion, and preceded by
&lsquo;^X&rsquo; lists options. As some of these bindings
clash with standard zsh bindings, only &lsquo;\~&rsquo; and
&lsquo;^X~&rsquo; are bound by default. <br>
To add the rest, the following should be added to .zshrc
after compinit has been run:</p>

<p style="margin-top: 1em">for key in &rsquo;!&rsquo;
&rsquo;$&rsquo; &rsquo;@&rsquo; &rsquo;/&rsquo;
&rsquo;~&rsquo;; do <br>
bindkey &quot;\$key&quot; _bash_complete-word <br>
bindkey &quot;^X$key&quot; _bash_list-choices <br>
done</p>

<p style="margin-top: 1em">This includes the bindings for
&lsquo;~&rsquo; in case they were already bound to something
else; the completion code does not override user
bindings.</p>

<p style="margin-top: 1em">_correct_filename (^XC) <br>
Correct the filename path at the cursor position. Allows up
to six errors in the name. Can also be called with an
argument to correct a filename path, independently of <br>
zle; the correction is printed on standard output.</p>

<p style="margin-top: 1em">_correct_word (^Xc) <br>
Performs correction of the current argument using the usual
contextual completions as possible choices. This stores the
string &lsquo;correct-word&rsquo; in the function field of
the <br>
context name and then calls the _correct completer.</p>

<p style="margin-top: 1em">_expand_alias (^Xa) <br>
This function can be used as a completer and as a bindable
command. It expands the word the cursor is on if it is an
alias. The types of alias expanded can be controlled <br>
with the styles regular, global and disabled.</p>

<p style="margin-top: 1em">When used as a bindable command
there is one additional feature that can be selected by
setting the complete style to &lsquo;true&rsquo;. In this
case, if the word is not the name of <br>
an alias, _expand_alias tries to complete the word to a full
alias name without expanding it. It leaves the cursor
directly after the completed word so that invoking <br>
_expand_alias once more will expand the now-complete alias
name.</p>

<p style="margin-top: 1em">_expand_word (^Xe) <br>
Performs expansion on the current word: equivalent to the
standard expand-word command, but using the _expand
completer. Before calling it, the function field of the <br>
context is set to &lsquo;expand-word&rsquo;.</p>

<p style="margin-top: 1em">_generic <br>
This function is not defined as a widget and not bound by
default. However, it can be used to define a widget and will
then store the name of the widget in the function <br>
field of the context and call the completion system. This
allows custom completion widgets with their own set of style
settings to be defined easily. For example, to <br>
define a widget that performs normal completion and starts
menu selection:</p>

<p style="margin-top: 1em">zle -C foo complete-word
_generic <br>
bindkey &rsquo;...&rsquo; foo <br>
zstyle &rsquo;:completion:foo:*&rsquo; menu yes select=1</p>

<p style="margin-top: 1em">Note in particular that the
completer style may be set for the context in order to
change the set of functions used to generate possible
matches. If _generic is called <br>
with arguments, those are passed through to _main_complete
as the list of completers in place of those defined by the
completer style.</p>

<p style="margin-top: 1em">_history_complete_word (\/) <br>
Complete words from the shell&rsquo;s command history. This
uses the list, remove-all-dups, sort, and stop styles.</p>

<p style="margin-top: 1em">_most_recent_file (^Xm) <br>
Complete the name of the most recently modified file
matching the pattern on the command line (which may be
blank). If given a numeric argument N, complete the Nth most
<br>
recently modified file. Note the completion, if any, is
always unique.</p>

<p style="margin-top: 1em">_next_tags (^Xn) <br>
This command alters the set of matches used to that for the
next tag, or set of tags, either as given by the tag-order
style or as set by default; these matches would oth&acirc;
<br>
erwise not be available. Successive invocations of the
command cycle through all possible sets of tags.</p>

<p style="margin-top: 1em">_read_comp (^X^R) <br>
Prompt the user for a string, and use that to perform
completion on the current word. There are two possibilities
for the string. First, it can be a set of words begin&acirc;
<br>
ning &lsquo;_&rsquo;, for example &lsquo;_files -/&rsquo;,
in which case the function with any arguments will be called
to generate the completions. Unambiguous parts of the
function name will <br>
be completed automatically (normal completion is not
available at this point) until a space is typed.</p>

<p style="margin-top: 1em">Second, any other string will be
passed as a set of arguments to compadd and should hence be
an expression specifying what should be completed.</p>

<p style="margin-top: 1em">A very restricted set of editing
commands is available when reading the string:
&lsquo;DEL&rsquo; and &lsquo;^H&rsquo; delete the last
character; &lsquo;^U&rsquo; deletes the line, and
&lsquo;^C&rsquo; and &lsquo;^G&rsquo; abort <br>
the function, while &lsquo;RET&rsquo; accepts the
completion. Note the string is used verbatim as a command
line, so arguments must be quoted in accordance with
standard shell rules.</p>

<p style="margin-top: 1em">Once a string has been read, the
next call to _read_comp will use the existing string instead
of reading a new one. To force a new string to be read, call
_read_comp with <br>
a numeric argument.</p>

<p style="margin-top: 1em">_complete_debug (^X?) <br>
This widget performs ordinary completion, but captures in a
temporary file a trace of the shell commands executed by the
completion system. Each completion attempt gets <br>
its own file. A command to view each of these files is
pushed onto the editor buffer stack.</p>

<p style="margin-top: 1em">_complete_help (^Xh) <br>
This widget displays information about the context names,
the tags, and the completion functions used when completing
at the current cursor position. If given a numeric <br>
argument other than 1 (as in &lsquo;ESC-2 ^Xh&rsquo;), then
the styles used and the contexts for which they are used
will be shown, too.</p>

<p style="margin-top: 1em">Note that the information about
styles may be incomplete; it depends on the information
available from the completion functions called, which in
turn is determined by the <br>
user&rsquo;s own styles and other settings.</p>

<p style="margin-top: 1em">_complete_help_generic <br>
Unlike other commands listed here, this must be created as a
normal ZLE widget rather than a completion widget (i.e. with
zle -N). It is used for generating help with a <br>
widget bound to the _generic widget that is described
above.</p>

<p style="margin-top: 1em">If this widget is created using
the name of the function, as it is by default, then when
executed it will read a key sequence. This is expected to be
bound to a call to a <br>
completion function that uses the _generic widget. That
widget will be executed, and information provided in the
same format that the _complete_help widget displays for <br>
contextual completion.</p>

<p style="margin-top: 1em">If the widget&rsquo;s name
contains debug, for example if it is created as &lsquo;zle
-N _complete_debug_generic _complete_help_generic&rsquo;, it
will read and execute the keystring for a <br>
generic widget as before, but then generate debugging
information as done by _complete_debug for contextual
completion.</p>

<p style="margin-top: 1em">If the widget&rsquo;s name
contains noread, it will not read a keystring but instead
arrange that the next use of a generic widget run in the
same shell will have the effect as <br>
described above.</p>

<p style="margin-top: 1em">The widget works by setting the
shell parameter ZSH_TRACE_GENERIC_WIDGET which is read by
_generic. Unsetting the parameter cancels any pending effect
of the noread form.</p>

<p style="margin-top: 1em">For example, after executing the
following:</p>

<p style="margin-top: 1em">zle -N _complete_debug_generic
_complete_help_generic <br>
bindkey &rsquo;^x:&rsquo; _complete_debug_generic</p>

<p style="margin-top: 1em">typing &lsquo;C-x :&rsquo;
followed by the key sequence for a generic widget will cause
trace output for that widget to be saved to a file.</p>

<p style="margin-top: 1em">_complete_tag (^Xt) <br>
This widget completes symbol tags created by the etags or
ctags programmes (note there is no connection with the
completion system&rsquo;s tags) stored in a file TAGS, in
the <br>
format used by etags, or tags, in the format created by
ctags. It will look back up the path hierarchy for the first
occurrence of either file; if both exist, the file <br>
TAGS is preferred. You can specify the full path to a TAGS
or tags file by setting the parameter $TAGSFILE or $tagsfile
respectively. The corresponding completion tags <br>
used are etags and vtags, after emacs and vi
respectively.</p>

<p style="margin-top: 1em">UTILITY FUNCTIONS <br>
Descriptions follow for utility functions that may be useful
when writing completion functions. If functions are
installed in subdirectories, most of these reside in the
Base <br>
subdirectory. Like the example functions for commands in the
distribution, the utility functions generating matches all
follow the convention of returning status zero if they <br>
generated completions and non-zero if no matching
completions could be added.</p>

<p style="margin-top: 1em">Two more features are offered by
the _main_complete function. The arrays compprefuncs and
comppostfuncs may contain names of functions that are to be
called immediately before <br>
or after completion has been tried. A function will only be
called once unless it explicitly reinserts itself into the
array.</p>

<p style="margin-top: 1em">_all_labels [ -x ] [ -12VJ ] tag
name descr [ command args ... ] <br>
This is a convenient interface to the _next_label function
below, implementing the loop shown in the _next_label
example. The command and its arguments are called to
gen&acirc; <br>
erate the matches. The options stored in the parameter name
will automatically be inserted into the args passed to the
command. Normally, they are put directly after the <br>
command, but if one of the args is a single hyphen, they are
inserted directly before that. If the hyphen is the last
argument, it will be removed from the argument list <br>
before the command is called. This allows _all_labels to be
used in almost all cases where the matches can be generated
by a single call to the compadd builtin command or <br>
by a call to one of the utility functions.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">local expl <br>
... <br>
if _requested foo; then <br>
... <br>
_all_labels foo expl &rsquo;...&rsquo; compadd ... -
$matches <br>
fi</p>

<p style="margin-top: 1em">Will complete the strings from
the matches parameter, using compadd with additional options
which will take precedence over those generated by
_all_labels.</p>

<p style="margin-top: 1em">_alternative [ -O name ] [ -C
name ] spec ... <br>
This function is useful in simple cases where multiple tags
are available. Essentially it implements a loop like the one
described for the _tags function below.</p>

<p style="margin-top: 1em">The tags to use and the action
to perform if a tag is requested are described using the
specs which are of the form: &lsquo;tag:descr:action&rsquo;.
The tags are offered using _tags <br>
and if the tag is requested, the action is executed with the
given description descr. The actions are those accepted by
the _arguments function (described below), exclud&acirc;
<br>
ing the &lsquo;-&gt;state&rsquo; and &lsquo;=...&rsquo;
forms.</p>

<p style="margin-top: 1em">For example, the action may be a
simple function call:</p>

<p style="margin-top: 1em">_alternative
&rsquo;users:user:_users&rsquo;
&rsquo;hosts:host:_hosts&rsquo;</p>

<p style="margin-top: 1em">offers usernames and hostnames
as possible matches, generated by the _users and _hosts
functions respectively.</p>

<p style="margin-top: 1em">Like _arguments, this function
uses _all_labels to execute the actions, which will loop
over all sets of tags. Special handling is only required if
there is an additional <br>
valid tag, for example inside a function called from
_alternative.</p>

<p style="margin-top: 1em">The option &lsquo;-O name&rsquo;
is used in the same way as by the _arguments function. In
other words, the elements of the name array will be passed
to compadd when executing an <br>
action.</p>

<p style="margin-top: 1em">Like _tags this function
supports the -C option to give a different name for the
argument context field.</p>

<p style="margin-top: 1em">_arguments [ -nswWACRS ] [ -O
name ] [ -M matchspec ] [ : ] spec ... <br>
This function can be used to give a complete specification
for completion for a command whose arguments follow standard
UNIX option and argument conventions. The follow&acirc; <br>
ing forms specify individual sets of options and arguments;
to avoid ambiguity, these may be separated from the options
to _arguments itself by a single colon. Options to <br>
_arguments itself must be in separate words, i.e. -s -w, not
-sw.</p>

<p style="margin-top: 1em">With the option -n, _arguments
sets the parameter NORMARG to the position of the first
normal argument in the $words array, i.e. the position after
the end of the options. <br>
If that argument has not been reached, NORMARG is set to -1.
The caller should declare &lsquo;integer NORMARG&rsquo; if
the -n option is passed; otherwise the parameter is not
used.</p>

<p style="margin-top: 1em">n:message:action <br>
n::message:action <br>
This describes the n&rsquo;th normal argument. The message
will be printed above the matches generated and the action
indicates what can be completed in this position <br>
(see below). If there are two colons before the message the
argument is optional. If the message contains only white
space, nothing will be printed above the <br>
matches unless the action adds an explanation string
itself.</p>

<p style="margin-top: 1em">:message:action <br>
::message:action <br>
Similar, but describes the next argument, whatever number
that happens to be. If all arguments are specified in this
form in the correct order the numbers are <br>
unnecessary.</p>

<p style="margin-top: 1em">*:message:action <br>
*::message:action <br>
*:::message:action <br>
This describes how arguments (usually non-option arguments,
those not beginning with - or +) are to be completed when
neither of the first two forms was provided. <br>
Any number of arguments can be completed in this
fashion.</p>

<p style="margin-top: 1em">With two colons before the
message, the words special array and the CURRENT special
parameter are modified to refer only to the normal arguments
when the action is <br>
executed or evaluated. With three colons before the message
they are modified to refer only to the normal arguments
covered by this description.</p>

<p style="margin-top: 1em">optspec <br>
optspec:... <br>
This describes an option. The colon indicates handling for
one or more arguments to the option; if it is not present,
the option is assumed to take no arguments.</p>

<p style="margin-top: 1em">By default, options are
multi-character name, one &lsquo;-word&rsquo; per option.
With -s, options may be single characters, with more than
one option per word, although words <br>
starting with two hyphens, such as &lsquo;--prefix&rsquo;,
are still considered complete option names. This is suitable
for standard GNU options.</p>

<p style="margin-top: 1em">The combination of -s with -w
allows single-letter options to be combined in a single word
even if one or more of the options take arguments. For
example, if -a <br>
takes an argument, with no -s &lsquo;-ab&rsquo; is
considered as a single (unhandled) option; with -s -ab is an
option with the argument &lsquo;b&rsquo;; with both -s and
-w, -ab may be <br>
the option -a and the option -b with arguments still to
come.</p>

<p style="margin-top: 1em">The option -W takes this a stage
further: it is possible to complete single-letter options
even after an argument that occurs in the same word.
However, it <br>
depends on the action performed whether options will really
be completed at this point. For more control, use a utility
function like _guard as part of the action.</p>

<p style="margin-top: 1em">The following forms are
available for the initial optspec, whether or not the option
has arguments.</p>

<p style="margin-top: 1em">*optspec <br>
Here optspec is one of the remaining forms below. This
indicates the following optspec may be repeated. Otherwise
if the corresponding option is already <br>
present on the command line to the left of the cursor it
will not be offered again.</p>

<p style="margin-top: 1em">-optname <br>
+optname <br>
In the simplest form the optspec is just the option name
beginning with a minus or a plus sign, such as
&lsquo;-foo&rsquo;. The first argument for the option (if
any) <br>
must follow as a separate word directly after the
option.</p>

<p style="margin-top: 1em">Either of
&lsquo;-+optname&rsquo; and &lsquo;+-optname&rsquo; can be
used to specify that -optname and +optname are both
valid.</p>

<p style="margin-top: 1em">In all the remaining forms, the
leading &lsquo;-&rsquo; may be replaced by or paired with
&lsquo;+&rsquo; in this way.</p>

<p style="margin-top: 1em">-optname- <br>
The first argument of the option must come directly after
the option name in the same word. For example,
&lsquo;-foo-:...&rsquo; specifies that the completed option
and <br>
argument will look like &lsquo;-fooarg&rsquo;.</p>

<p style="margin-top: 1em">-optname+ <br>
The first argument may appear immediately after optname in
the same word, or may appear as a separate word after the
option. For example, &lsquo;-foo+:...&rsquo; speci&acirc;
<br>
fies that the completed option and argument will look like
either &lsquo;-fooarg&rsquo; or &lsquo;-foo arg&rsquo;.</p>

<p style="margin-top: 1em">-optname= <br>
The argument may appear as the next word, or in same word as
the option name provided that it is separated from it by an
equals sign, for example &lsquo;-foo=arg&rsquo; <br>
or &lsquo;-foo arg&rsquo;.</p>

<p style="margin-top: 1em">-optname=- <br>
The argument to the option must appear after an equals sign
in the same word, and may not be given in the next
argument.</p>

<p style="margin-top: 1em">optspec[explanation] <br>
An explanation string may be appended to any of the
preceding forms of optspec by enclosing it in brackets, as
in &lsquo;-q[query operation]&rsquo;.</p>

<p style="margin-top: 1em">The verbose style is used to
decide whether the explanation strings are displayed with
the option in a completion listing.</p>

<p style="margin-top: 1em">If no bracketed explanation
string is given but the auto-description style is set and
only one argument is described for this optspec, the value
of the style <br>
is displayed, with any appearance of the sequence
&lsquo;%d&rsquo; in it replaced by the message of the first
optarg that follows the optspec; see below.</p>

<p style="margin-top: 1em">It is possible for options with
a literal &lsquo;+&rsquo; or &lsquo;=&rsquo; to appear, but
that character must be quoted, for example
&lsquo;-+&rsquo;.</p>

<p style="margin-top: 1em">Each optarg following an optspec
must take one of the following forms:</p>

<p style="margin-top: 1em">:message:action <br>
::message:action <br>
An argument to the option; message and action are treated as
for ordinary arguments. In the first form, the argument is
mandatory, and in the second form it is <br>
optional.</p>

<p style="margin-top: 1em">This group may be repeated for
options which take multiple arguments. In other words,
:message1:action1:message2:action2 specifies that the option
takes two argu&acirc; <br>
ments.</p>

<p style="margin-top: 1em">:*pattern:message:action <br>
:*pattern::message:action <br>
:*pattern:::message:action <br>
This describes multiple arguments. Only the last optarg for
an option taking multiple arguments may be given in this
form. If the pattern is empty (i.e., :*:), <br>
all the remaining words on the line are to be completed as
described by the action; otherwise, all the words up to and
including a word matching the pattern are to <br>
be completed using the action.</p>

<p style="margin-top: 1em">Multiple colons are treated as
for the &lsquo;*:...&rsquo; forms for ordinary arguments:
when the message is preceded by two colons, the words
special array and the CURRENT <br>
special parameter are modified during the execution or
evaluation of the action to refer only to the words after
the option. When preceded by three colons, they <br>
are modified to refer only to the words covered by this
description.</p>

<p style="margin-top: 1em">Any literal colon in an optname,
message, or action must be preceded by a backslash,
&lsquo;&rsquo;.</p>

<p style="margin-top: 1em">Each of the forms above may be
preceded by a list in parentheses of option names and
argument numbers. If the given option is on the command
line, the options and arguments <br>
indicated in parentheses will not be offered. For example,
&lsquo;(-two -three 1)-one:...&rsquo; completes the option
&lsquo;-one&rsquo;; if this appears on the command line, the
options -two and <br>
-three and the first ordinary argument will not be completed
after it. &lsquo;(-foo):...&rsquo; specifies an ordinary
argument completion; -foo will not be completed if that
argument is <br>
already present.</p>

<p style="margin-top: 1em">Other items may appear in the
list of excluded options to indicate various other items
that should not be applied when the current specification is
matched: a single star (*) for <br>
the rest arguments (i.e. a specification of the form
&lsquo;*:...&rsquo;); a colon (:) for all normal
(non-option-) arguments; and a hyphen (-) for all options.
For example, if &lsquo;(*)&rsquo; <br>
appears before an option and the option appears on the
command line, the list of remaining arguments (those shown
in the above table beginning with &lsquo;*:&rsquo;) will not
be completed.</p>

<p style="margin-top: 1em">To aid in reuse of
specifications, it is possible to precede any of the forms
above with &lsquo;!&rsquo;; then the form will no longer be
completed, although if the option or argument <br>
appears on the command line they will be skipped as normal.
The main use for this is when the arguments are given by an
array, and _arguments is called repeatedly for more
spe&acirc; <br>
cific contexts: on the first call &lsquo;_arguments
$global_options&rsquo; is used, and on subsequent calls
&lsquo;_arguments !$^global_options&rsquo;.</p>

<p style="margin-top: 1em">In each of the forms above the
action determines how completions should be generated.
Except for the &lsquo;-&gt;string&rsquo; form below, the
action will be executed by calling the <br>
_all_labels function to process all tag labels. No special
handling of tags is needed unless a function call introduces
a new one.</p>

<p style="margin-top: 1em">The forms for action are as
follows.</p>

<p style="margin-top: 1em">(single unquoted space) <br>
This is useful where an argument is required but it is not
possible or desirable to generate matches for it. The
message will be displayed but no completions listed. <br>
Note that even in this case the colon at the end of the
message is needed; it may only be omitted when neither a
message nor an action is given.</p>

<p style="margin-top: 1em">(item1 item2 ...) <br>
One of a list of possible matches, for example:</p>

<p style="margin-top: 1em">:foo:(foo bar baz)</p>

<p style="margin-top: 1em">((item1desc1 ...)) <br>
Similar to the above, but with descriptions for each
possible match. Note the backslash before the colon. For
example,</p>

<p style="margin-top: 1em">:foo:((abar bbaz))</p>

<p style="margin-top: 1em">The matches will be listed
together with their descriptions if the description style is
set with the values tag in the context.</p>

<p style="margin-top: 1em">-&gt;string <br>
In this form, _arguments processes the arguments and options
and then returns control to the calling function with
parameters set to indicate the state of processing; the <br>
calling function then makes its own arrangements for
generating completions. For example, functions that
implement a state machine can use this type of action.</p>

<p style="margin-top: 1em">Where _arguments encounters
action in the &lsquo;-&gt;string&rsquo; format, it will
strip all leading and trailing whitespace from string and
set the array state to the set of all <br>
strings for which an action is to be performed. The elements
of the array state_descr are assigned the corresponding
message field from each optarg containing such an <br>
action.</p>

<p style="margin-top: 1em">By default and in common with
all other well behaved completion functions, _arguments
returns status zero if it was able to add matches and
non-zero otherwise. However, if <br>
the -R option is given, _arguments will instead return a
status of 300 to indicate that $state is to be handled.</p>

<p style="margin-top: 1em">In addition to $state and
$state_descr, _arguments also sets the global parameters
&lsquo;context&rsquo;, &lsquo;line&rsquo; and
&lsquo;opt_args&rsquo; as described below, and does not
reset any changes made <br>
to the special parameters such as PREFIX and words. This
gives the calling function the choice of resetting these
parameters or propagating changes in them.</p>

<p style="margin-top: 1em">A function calling _arguments
with at least one action containing a
&lsquo;-&gt;string&rsquo; must therefore declare appropriate
local parameters:</p>

<p style="margin-top: 1em">local context state state_descr
line <br>
typeset -A opt_args</p>

<p style="margin-top: 1em">to prevent _arguments from
altering the global environment.</p>

<p style="margin-top: 1em">{eval-string} <br>
A string in braces is evaluated as shell code to generate
matches. If the eval-string itself does not begin with an
opening parenthesis or brace it is split into separate <br>
words before execution.</p>

<p style="margin-top: 1em">= action <br>
If the action starts with &lsquo;= &rsquo; (an equals sign
followed by a space), _arguments will insert the contents of
the argument field of the current context as the new first
ele&acirc; <br>
ment in the words special array and increment the value of
the CURRENT special parameter. This has the effect of
inserting a dummy word onto the completion command line <br>
while not changing the point at which completion is taking
place.</p>

<p style="margin-top: 1em">This is most useful with one of
the specifiers that restrict the words on the command line
on which the action is to operate (the two- and three-colon
forms above). One <br>
particular use is when an action itself causes _arguments on
a restricted range; it is necessary to use this trick to
insert an appropriate command name into the range for <br>
the second call to _arguments to be able to parse the
line.</p>

<p style="margin-top: 1em">word... <br>
word... <br>
This covers all forms other than those above. If the action
starts with a space, the remaining list of words will be
invoked unchanged.</p>

<p style="margin-top: 1em">Otherwise it will be invoked
with some extra strings placed after the first word; these
are to be passed down as options to the compadd builtin.
They ensure that the <br>
state specified by _arguments, in particular the
descriptions of options and arguments, is correctly passed
to the completion command. These additional arguments are
<br>
taken from the array parameter &lsquo;expl&rsquo;; this will
be set up before executing the action and hence may be
referred to inside it, typically in an expansion of the form
<br>
&lsquo;$expl[@]&rsquo; which preserves empty elements of the
array.</p>

<p style="margin-top: 1em">During the performance of the
action the array &lsquo;line&rsquo; will be set to the
command name and normal arguments from the command line,
i.e. the words from the command line excluding <br>
all options and their arguments. Options are stored in the
associative array &lsquo;opt_args&rsquo; with option names
as keys and their arguments as the values. For options that
have more <br>
than one argument these are given as one string, separated
by colons. All colons in the original arguments are preceded
with backslashes.</p>

<p style="margin-top: 1em">The parameter
&lsquo;context&rsquo; is set when returning to the calling
function to perform an action of the form
&lsquo;-&gt;string&rsquo;. It is set to an array of elements
corresponding to the ele&acirc; <br>
ments of $state. Each element is a suitable name for the
argument field of the context: either a string of the form
&lsquo;option-opt-n&rsquo; for the n&rsquo;th argument of
the option -opt, or a <br>
string of the form &lsquo;argument-n&rsquo; for the
n&rsquo;th argument. For &lsquo;rest&rsquo; arguments, that
is those in the list at the end not handled by position, n
is the string &lsquo;rest&rsquo;. For example, <br>
when completing the argument of the -o option, the name is
&lsquo;option-o-1&rsquo;, while for the second normal
(non-option-) argument it is &lsquo;argument-2&rsquo;.</p>

<p style="margin-top: 1em">Furthermore, during the
evaluation of the action the context name in the curcontext
parameter is altered to append the same string that is
stored in the context parameter.</p>

<p style="margin-top: 1em">It is possible to specify
multiple sets of options and arguments with the sets
separated by single hyphens. The specifications before the
first hyphen (if any) are shared by all <br>
the remaining sets. The first word in every other set
provides a name for the set which may appear in exclusion
lists in specifications, either alone or before one of the
possi&acirc; <br>
ble values described above. In the second case a
&lsquo;-&rsquo; should appear between this name and the
remainder.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">_arguments -a - set1 -c - set2
-d &rsquo;:arg:(x2 y2)&rsquo;</p>

<p style="margin-top: 1em">This defines two sets. When the
command line contains the option &lsquo;-c&rsquo;, the
&lsquo;-d&rsquo; option and the argument will not be
considered possible completions. When it contains
&lsquo;-d&rsquo; or an <br>
argument, the option &lsquo;-c&rsquo; will not be
considered. However, after &lsquo;-a&rsquo; both sets will
still be considered valid.</p>

<p style="margin-top: 1em">If the name given for one of the
mutually exclusive sets is of the form &lsquo;(name)&rsquo;
then only one value from each set will ever be completed;
more formally, all specifications are <br>
mutually exclusive to all other specifications in the same
set. This is useful for defining multiple sets of options
which are mutually exclusive and in which the options are
<br>
aliases for each other. For example:</p>

<p style="margin-top: 1em">_arguments -a -b -
&rsquo;(compress)&rsquo;
{-c,--compress}&rsquo;[compress]&rsquo; -
&rsquo;(uncompress)&rsquo;
{-d,--decompress}&rsquo;[decompress]&rsquo;</p>

<p style="margin-top: 1em">As the completion code has to
parse the command line separately for each set this form of
argument is slow and should only be used when necessary. A
useful alternative is often <br>
an option specification with rest-arguments (as in
&lsquo;-foo:*:...&rsquo;); here the option -foo swallows up
all remaining arguments as described by the optarg
definitions.</p>

<p style="margin-top: 1em">The options -S and -A are
available to simplify the specifications for commands with
standard option parsing. With -S, no option will be
completed after a &lsquo;--&rsquo; appearing on its <br>
own on the line; this argument will otherwise be ignored;
hence in the line</p>

<p style="margin-top: 1em">foobar -a -- -b</p>

<p style="margin-top: 1em">the &lsquo;-a&rsquo; is
considered an option but the &lsquo;-b&rsquo; is considered
an argument, while the &lsquo;--&rsquo; is considered to be
neither.</p>

<p style="margin-top: 1em">With -A, no options will be
completed after the first non-option argument on the line.
The -A must be followed by a pattern matching all strings
which are not to be taken as <br>
arguments. For example, to make _arguments stop completing
options after the first normal argument, but ignoring all
strings starting with a hyphen even if they are not <br>
described by one of the optspecs, the form is &lsquo;-A
&quot;-*&quot;&rsquo;.</p>

<p style="margin-top: 1em">The option &lsquo;-O name&rsquo;
specifies the name of an array whose elements will be passed
as arguments to functions called to execute actions. For
example, this can be used to pass the <br>
same set of options for the compadd builtin to all
actions.</p>

<p style="margin-top: 1em">The option &lsquo;-M spec&rsquo;
sets a match specification to use to completion option names
and values. It must appear before the first argument
specification. The default is &lsquo;r:|[_-]=* <br>
r:|=*&rsquo;: this allows partial word completion after
&lsquo;_&rsquo; and &lsquo;-&rsquo;, for example
&lsquo;-f-b&rsquo; can be completed to
&lsquo;-foo-bar&rsquo;.</p>

<p style="margin-top: 1em">The option -C tells _arguments
to modify the curcontext parameter for an action of the form
&lsquo;-&gt;state&rsquo;. This is the standard parameter
used to keep track of the current context. <br>
Here it (and not the context array) should be made local to
the calling function to avoid passing back the modified
value and should be initialised to the current value at the
<br>
start of the function:</p>

<p style="margin-top: 1em">local
curcontext=&quot;$curcontext&quot;</p>

<p style="margin-top: 1em">This is useful where it is not
possible for multiple states to be valid together.</p>

<p style="margin-top: 1em">The option &lsquo;--&rsquo;
allows _arguments to work out the names of long options that
support the &lsquo;--help&rsquo; option which is standard in
many GNU commands. The command word is called with <br>
the argument &lsquo;--help&rsquo; and the output examined
for option names. Clearly, it can be dangerous to pass this
to commands which may not support this option as the
behaviour of the <br>
command is unspecified.</p>

<p style="margin-top: 1em">In addition to options,
&lsquo;_arguments --&rsquo; will try to deduce the types of
arguments available for options when the form
&lsquo;--opt=val&rsquo; is valid. It is also possible to
provide hints <br>
by examining the help text of the command and adding
specifiers of the form &lsquo;pattern:message:action&rsquo;;
note that normal _arguments specifiers are not used. The
pattern is matched <br>
against the help text for an option, and if it matches the
message and action are used as for other argument
specifiers. For example:</p>

<p style="margin-top: 1em">_arguments --
&rsquo;*toggle:(yes no)&rsquo;
&rsquo;*=FILE*:file:_files&rsquo;
&rsquo;*=DIR*:directory:_files -/&rsquo;
&rsquo;*=PATH*:directory:_files -/&rsquo;</p>

<p style="margin-top: 1em">Here, &lsquo;yes&rsquo; and
&lsquo;no&rsquo; will be completed as the argument of
options whose description ends in a star; file names will be
completed for options that contain the substring
&lsquo;=FILE&rsquo; in <br>
the description; and directories will be completed for
options whose description contains &lsquo;=DIR&rsquo; or
&lsquo;=PATH&rsquo;. The last three are in fact the default
and so need not be given <br>
explicitly, although it is possible to override the use of
these patterns. A typical help text which uses this feature
is:</p>

<p style="margin-top: 1em">-C, --directory=DIR change to
directory DIR</p>

<p style="margin-top: 1em">so that the above specifications
will cause directories to be completed after
&lsquo;--directory&rsquo;, though not after
&lsquo;-C&rsquo;.</p>

<p style="margin-top: 1em">Note also that _arguments tries
to find out automatically if the argument for an option is
optional. This can be specified explicitly by doubling the
colon before the message.</p>

<p style="margin-top: 1em">If the pattern ends in
&lsquo;(-)&rsquo;, this will be removed from the pattern and
the action will be used only directly after the
&lsquo;=&rsquo;, not in the next word. This is the behaviour
of a <br>
normal specification defined with the form
&lsquo;=-&rsquo;.</p>

<p style="margin-top: 1em">The &lsquo;_arguments --&rsquo;
can be followed by the option &lsquo;-i patterns&rsquo; to
give patterns for options which are not to be completed. The
patterns can be given as the name of an array <br>
parameter or as a literal list in parentheses. For
example,</p>

<p style="margin-top: 1em">_arguments -- -i
&quot;(--(en|dis)able-FEATURE*)&quot;</p>

<p style="margin-top: 1em">will cause completion to ignore
the options &lsquo;--enable-FEATURE&rsquo; and
&lsquo;--disable-FEATURE&rsquo; (this example is useful with
GNU configure).</p>

<p style="margin-top: 1em">The &lsquo;_arguments --&rsquo;
form can also be followed by the option &lsquo;-s
pair&rsquo; to describe option aliases. Each pair consists
of a pattern and a replacement. For example, some
config&acirc; <br>
ure-scripts describe options only as
&lsquo;--enable-foo&rsquo;, but also accept
&lsquo;--disable-foo&rsquo;. To allow completion of the
second form:</p>

<p style="margin-top: 1em">_arguments -- -s
&quot;(#--enable- --disable-)&quot;</p>

<p style="margin-top: 1em">Here is a more general example
of the use of _arguments:</p>

<p style="margin-top: 1em">_arguments &rsquo;-l+:left
border:&rsquo; &rsquo;-format:paper size:(letter A4)&rsquo;
&rsquo;*-copy:output file:_files::resolution:(300
600)&rsquo; &rsquo;:postscript file:_files -g
&para;eps&rsquo; &rsquo;*:page number:&rsquo;</p>

<p style="margin-top: 1em">This describes three options:
&lsquo;-l&rsquo;, &lsquo;-format&rsquo;, and
&lsquo;-copy&rsquo;. The first takes one argument described
as &lsquo;left border&rsquo; for which no completion will be
offered because of the empty <br>
action. Its argument may come directly after the
&lsquo;-l&rsquo; or it may be given as the next word on the
line.</p>

<p style="margin-top: 1em">The &lsquo;-format&rsquo; option
takes one argument in the next word, described as
&lsquo;paper size&rsquo; for which only the strings
&lsquo;letter&rsquo; and &lsquo;A4&rsquo; will be
completed.</p>

<p style="margin-top: 1em">The &lsquo;-copy&rsquo; option
may appear more than once on the command line and takes two
arguments. The first is mandatory and will be completed as a
filename. The second is optional <br>
(because of the second colon before the description
&lsquo;resolution&rsquo;) and will be completed from the
strings &lsquo;300&rsquo; and &lsquo;600&rsquo;.</p>

<p style="margin-top: 1em">The last two descriptions say
what should be completed as arguments. The first describes
the first argument as a &lsquo;postscript file&rsquo; and
makes files ending in &lsquo;ps&rsquo; or &lsquo;eps&rsquo;
be <br>
completed. The last description gives all other arguments
the description &lsquo;page numbers&rsquo; but does not
offer completions.</p>

<p style="margin-top: 1em">_cache_invalid cache_identifier
<br>
This function returns status zero if the completions cache
corresponding to the given cache identifier needs
rebuilding. It determines this by looking up the
cache-policy <br>
style for the current context. This should provide a
function name which is run with the full path to the
relevant cache file as the only argument.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">_example_caching_policy () {
<br>
# rebuild if cache is more than a week old <br>
local -a oldp <br>
oldp=( &quot;$1&quot;(Nm+7) ) <br>
(( $#oldp )) <br>
}</p>

<p style="margin-top: 1em">_call_function return name [
args ... ] <br>
If a function name exists, it is called with the arguments
args. The return argument gives the name of a parameter in
which the return status from the function name <br>
should be stored; if return is empty or a single hyphen it
is ignored.</p>

<p style="margin-top: 1em">The return status of
_call_function itself is zero if the function name exists
and was called and non-zero otherwise.</p>

<p style="margin-top: 1em">_call_program tag string ...
<br>
This function provides a mechanism for the user to override
the use of an external command. It looks up the command
style with the supplied tag. If the style is set, its <br>
value is used as the command to execute. The strings from
the call to _call_program, or from the style if set, are
concatenated with spaces between them and the resulting <br>
string is evaluated. The return status is the return status
of the command called.</p>

<p style="margin-top: 1em">_combination [ -s pattern ] tag
style spec ... field opts ... <br>
This function is used to complete combinations of values,
for example pairs of hostnames and usernames. The style
argument gives the style which defines the pairs; it is <br>
looked up in a context with the tag specified.</p>

<p style="margin-top: 1em">The style name consists of field
names separated by hyphens, for example
&lsquo;users-hosts-ports&rsquo;. For each field for a value
is already known, a spec of the form &lsquo;field=pat&acirc;
<br>
tern&rsquo; is given. For example, if the command line so
far specifies a user &lsquo;pws&rsquo;, the argument
&lsquo;users=pws&rsquo; should appear.</p>

<p style="margin-top: 1em">The next argument with no equals
sign is taken as the name of the field for which completions
should be generated (presumably not one of the fields for
which the value is <br>
known).</p>

<p style="margin-top: 1em">The matches generated will be
taken from the value of the style. These should contain the
possible values for the combinations in the appropriate
order (users, hosts, <br>
ports in the example above). The different fields the values
for the different fields are separated by colons. This can
be altered with the option -s to _combination <br>
which specifies a pattern. Typically this is a character
class, as for example &lsquo;-s &quot;[:@]&quot;&rsquo; in
the case of the users-hosts style. Each
&lsquo;field=pattern&rsquo; specification <br>
restricts the completions which apply to elements of the
style with appropriately matching fields.</p>

<p style="margin-top: 1em">If no style with the given name
is defined for the given tag, or if none of the strings in
style&rsquo;s value match, but a function name of the
required field preceded by an <br>
underscore is defined, that function will be called to
generate the matches. For example, if there is no
&lsquo;users-hosts-ports&rsquo; or no matching hostname when
a host is <br>
required, the function &lsquo;_hosts&rsquo; will
automatically be called.</p>

<p style="margin-top: 1em">If the same name is used for
more than one field, in both the &lsquo;field=pattern&rsquo;
and the argument that gives the name of the field to be
completed, the number of the field <br>
(starting with one) may be given after the fieldname,
separated from it by a colon.</p>

<p style="margin-top: 1em">All arguments after the required
field name are passed to compadd when generating matches
from the style value, or to the functions for the fields if
they are called.</p>

<p style="margin-top: 1em">_describe [ -oO | -t tag ] descr
name1 [ name2 ] opts ... -- ... <br>
This function associates completions with descriptions.
Multiple groups separated by -- can be supplied, potentially
with different completion options opts.</p>

<p style="margin-top: 1em">The descr is taken as a string
to display above the matches if the format style for the
descriptions tag is set. This is followed by one or two
names of arrays followed <br>
by options to pass to compadd. The first array contains the
possible completions with their descriptions in the form
&lsquo;completion:description&rsquo;. Any literal colons in
com&acirc; <br>
pletion must be quoted with a backslash. If a second array
is given, it should have the same number of elements as the
first; in this case the corresponding elements are <br>
added as possible completions instead of the completion
strings from the first array. The completion list will
retain the descriptions from the first array. Finally, a
<br>
set of completion options can appear.</p>

<p style="margin-top: 1em">If the option &lsquo;-o&rsquo;
appears before the first argument, the matches added will be
treated as names of command options (N.B. not shell
options), typically following a &lsquo;-&rsquo;, <br>
&lsquo;--&rsquo; or &lsquo;+&rsquo; on the command line. In
this case _describe uses the prefix-hidden, prefix-needed
and verbose styles to find out if the strings should be
added as completions <br>
and if the descriptions should be shown. Without the
&lsquo;-o&rsquo; option, only the verbose style is used to
decide how descriptions are shown. If &lsquo;-O&rsquo; is
used instead of &lsquo;-o&rsquo;, <br>
command options are completed as above but _describe will
not handle the prefix-needed style.</p>

<p style="margin-top: 1em">With the -t option a tag can be
specified. The default is &lsquo;values&rsquo; or, if the -o
option is given, &lsquo;options&rsquo;.</p>

<p style="margin-top: 1em">If selected by the list-grouped
style, strings with the same description will appear
together in the list.</p>

<p style="margin-top: 1em">_describe uses the _all_labels
function to generate the matches, so it does not need to
appear inside a loop over tag labels.</p>

<p style="margin-top: 1em">_description [ -x ] [ -12VJ ]
tag name descr [ spec ... ] <br>
This function is not to be confused with the previous one;
it is used as a helper function for creating options to
compadd. It is buried inside many of the higher level <br>
completion functions and so often does not need to be called
directly.</p>

<p style="margin-top: 1em">The styles listed below are
tested in the current context using the given tag. The
resulting options for compadd are put into the array named
name (this is traditionally <br>
&lsquo;expl&rsquo;, but this convention is not enforced).
The description for the corresponding set of matches is
passed to the function in descr.</p>

<p style="margin-top: 1em">The styles tested are: format,
hidden, matcher, ignored-patterns and group-name. The format
style is first tested for the given tag and then for the
descriptions tag if <br>
no value was found, while the remainder are only tested for
the tag given as the first argument. The function also calls
_setup which tests some more styles.</p>

<p style="margin-top: 1em">The string returned by the
format style (if any) will be modified so that the sequence
&lsquo;%d&rsquo; is replaced by the descr given as the third
argument without any leading or <br>
trailing white space. If, after removing the white space,
the descr is the empty string, the format style will not be
used and the options put into the name array will <br>
not contain an explanation string to be displayed above the
matches.</p>

<p style="margin-top: 1em">If _description is called with
more than three arguments, the additional specs should be of
the form &lsquo;char:str&rsquo;. These supply escape
sequence replacements for the format <br>
style: every appearance of &lsquo;%char&rsquo; will be
replaced by string.</p>

<p style="margin-top: 1em">If the -x option is given, the
description will be passed to compadd using the -x option
instead of the default -X. This means that the description
will be displayed even <br>
if there are no corresponding matches.</p>

<p style="margin-top: 1em">The options placed in the array
name take account of the group-name style, so matches are
placed in a separate group where necessary. The group
normally has its elements <br>
sorted (by passing the option -J to compadd), but if an
option starting with &lsquo;-V&rsquo;, &lsquo;-J&rsquo;,
&lsquo;-1&rsquo;, or &lsquo;-2&rsquo; is passed to
_description, that option will be included in the <br>
array. Hence it is possible for the completion group to be
unsorted by giving the option &lsquo;-V&rsquo;,
&lsquo;-1V&rsquo;, or &lsquo;-2V&rsquo;.</p>

<p style="margin-top: 1em">In most cases, the function will
be used like this:</p>

<p style="margin-top: 1em">local expl <br>
_description files expl file <br>
compadd &quot;$expl[@]&quot; - &quot;$files[@]&quot;</p>

<p style="margin-top: 1em">Note the use of the parameter
expl, the hyphen, and the list of matches. Almost all calls
to compadd within the completion system use a similar
format; this ensures that <br>
user-specified styles are correctly passed down to the
builtins which implement the internals of completion.</p>

<p style="margin-top: 1em">_dispatch context string ...
<br>
This sets the current context to context and looks for
completion functions to handle this context by hunting
through the list of command names or special contexts (as
<br>
described above for compdef) given as string .... The first
completion function to be defined for one of the contexts in
the list is used to generate matches. Typically, <br>
the last string is -default- to cause the function for
default completion to be used as a fallback.</p>

<p style="margin-top: 1em">The function sets the parameter
$service to the string being tried, and sets the
context/command field (the fourth) of the $curcontext
parameter to the context given as <br>
the first argument.</p>

<p style="margin-top: 1em">_files The function _files calls
_path_files with all the arguments it was passed except for
-g and -/. The use of these two options depends on the
setting of the file-patterns <br>
style.</p>

<p style="margin-top: 1em">This function accepts the full
set of options allowed by _path_files, described below.</p>

<p style="margin-top: 1em">_gnu_generic <br>
This function is a simple wrapper around the _arguments
function described above. It can be used to determine
automatically the long options understood by commands that
<br>
produce a list when passed the option &lsquo;--help&rsquo;.
It is intended to be used as a top-level completion function
in its own right. For example, to enable option completion
<br>
for the commands foo and bar, use</p>

<p style="margin-top: 1em">compdef _gnu_generic foo bar</p>

<p style="margin-top: 1em">after the call to compinit.</p>

<p style="margin-top: 1em">The completion system as
supplied is conservative in its use of this function, since
it is important to be sure the command understands the
option &lsquo;--help&rsquo;.</p>

<p style="margin-top: 1em">_guard [ options ] pattern descr
<br>
This function is intended to be used in the action for the
specifications passed to _arguments and similar functions.
It returns immediately with a non-zero return status <br>
if the string to be completed does not match the pattern. If
the pattern matches, the descr is displayed; the function
then returns status zero if the word to complete is <br>
not empty, non-zero otherwise.</p>

<p style="margin-top: 1em">The pattern may be preceded by
any of the options understood by compadd that are passed
down from _description, namely -M, -J, -V, -1, -2, -n, -F
and -X. All of these <br>
options will be ignored. This fits in conveniently with the
argument-passing conventions of actions for _arguments.</p>

<p style="margin-top: 1em">As an example, consider a
command taking the options -n and -none, where -n must be
followed by a numeric value in the same word. By using:</p>

<p style="margin-top: 1em">_arguments &rsquo;-n-: :_guard
&quot;[0-9]#&quot; &quot;numeric value&quot;&rsquo;
&rsquo;-none&rsquo;</p>

<p style="margin-top: 1em">_arguments can be made to both
display the message &lsquo;numeric value&rsquo; and complete
options after &lsquo;-n&lt;TAB&gt;&rsquo;. If the
&lsquo;-n&rsquo; is already followed by one or more digits
(the pat&acirc; <br>
tern passed to _guard) only the message will be displayed;
if the &lsquo;-n&rsquo; is followed by another character,
only options are completed.</p>

<p style="margin-top: 1em">_message [ -r12 ] [ -VJ group ]
descr <br>
_message -e [ tag ] descr <br>
The descr is used in the same way as the third argument to
the _description function, except that the resulting string
will always be shown whether or not matches were <br>
generated. This is useful for displaying a help message in
places where no completions can be generated.</p>

<p style="margin-top: 1em">The format style is examined
with the messages tag to find a message; the usual tag,
descriptions, is used only if the style is not set with the
former.</p>

<p style="margin-top: 1em">If the -r option is given, no
style is used; the descr is taken literally as the string to
display. This is most useful when the descr comes from a
pre-processed argument <br>
list which already contains an expanded description.</p>

<p style="margin-top: 1em">The -12VJ options and the group
are passed to compadd and hence determine the group the
message string is added to.</p>

<p style="margin-top: 1em">The second form gives a
description for completions with the tag tag to be shown
even if there are no matches for that tag. The tag can be
omitted and if so the tag is <br>
taken from the parameter $curtag; this is maintained by the
completion system and so is usually correct.</p>

<p style="margin-top: 1em">_multi_parts sep array <br>
The argument sep is a separator character. The array may be
either the name of an array parameter or a literal array in
the form &lsquo;(foo bar)&rsquo;, a parenthesised list of
<br>
words separated by whitespace. The possible completions are
the strings from the array. However, each chunk delimited by
sep will be completed separately. For example, <br>
the _tar function uses &lsquo;_multi_parts /
patharray&rsquo; to complete partial file paths from the
given array of complete file paths.</p>

<p style="margin-top: 1em">The -i option causes
_multi_parts to insert a unique match even if that requires
multiple separators to be inserted. This is not usually the
expected behaviour with file&acirc; <br>
names, but certain other types of completion, for example
those with a fixed set of possibilities, may be more suited
to this form.</p>

<p style="margin-top: 1em">Like other utility functions,
this function accepts the &lsquo;-V&rsquo;,
&lsquo;-J&rsquo;, &lsquo;-1&rsquo;, &lsquo;-2&rsquo;,
&lsquo;-n&rsquo;, &lsquo;-f&rsquo;, &lsquo;-X&rsquo;,
&lsquo;-M&rsquo;, &lsquo;-P&rsquo;, &lsquo;-S&rsquo;,
&lsquo;-r&rsquo;, &lsquo;-R&rsquo;, and &lsquo;-q&rsquo;
options and passes them to the <br>
compadd builtin.</p>

<p style="margin-top: 1em">_next_label [ -x ] [ -12VJ ] tag
name descr [ options ... ] <br>
This function is used to implement the loop over different
tag labels for a particular tag as described above for the
tag-order style. On each call it checks to see if <br>
there are any more tag labels; if there is it returns status
zero, otherwise non-zero. As this function requires a
current tag to be set, it must always follow a call to <br>
_tags or _requested.</p>

<p style="margin-top: 1em">The -x12VJ options and the first
three arguments are passed to the _description function.
Where appropriate the tag will be replaced by a tag label in
this call. Any <br>
description given in the tag-order style is preferred to the
descr passed to _next_label.</p>

<p style="margin-top: 1em">The options given after the
descr are set in the parameter given by name, and hence are
to be passed to compadd or whatever function is called to
add the matches.</p>

<p style="margin-top: 1em">Here is a typical use of this
function for the tag foo. The call to _requested determines
if tag foo is required at all; the loop over _next_label
handles any labels <br>
defined for the tag in the tag-order style.</p>

<p style="margin-top: 1em">local expl ret=1 <br>
... <br>
if _requested foo; then <br>
... <br>
while _next_label foo expl &rsquo;...&rsquo;; do <br>
compadd &quot;$expl[@]&quot; ... &amp;&amp; ret=0 <br>
done <br>
... <br>
fi <br>
return ret</p>

<p style="margin-top: 1em">_normal <br>
This is the standard function called to handle completion
outside any special -context-. It is called both to complete
the command word and also the arguments for a com&acirc;
<br>
mand. In the second case, _normal looks for a special
completion for that command, and if there is none it uses
the completion for the -default- context.</p>

<p style="margin-top: 1em">A second use is to reexamine the
command line specified by the $words array and the $CURRENT
parameter after those have been modified. For example, the
function _precom&acirc; <br>
mand, which completes after pre-command specifiers such as
nohup, removes the first word from the words array,
decrements the CURRENT parameter, then calls _normal again.
<br>
The effect is that &lsquo;nohup cmd ...&rsquo; is treated in
the same way as &lsquo;cmd ...&rsquo;.</p>

<p style="margin-top: 1em">If the command name matches one
of the patterns given by one of the options -p or -P to
compdef, the corresponding completion function is called and
then the parameter <br>
_compskip is checked. If it is set completion is terminated
at that point even if no matches have been found. This is
the same effect as in the -first- context.</p>

<p style="margin-top: 1em">_options <br>
This can be used to complete the names of shell options. It
provides a matcher specification that ignores a leading
&lsquo;no&rsquo;, ignores underscores and allows upper-case
let&acirc; <br>
ters to match their lower-case counterparts (for example,
&lsquo;glob&rsquo;, &lsquo;noglob&rsquo;,
&lsquo;NO_GLOB&rsquo; are all completed). Any arguments are
propagated to the compadd builtin.</p>

<p style="margin-top: 1em">_options_set and _options_unset
<br>
These functions complete only set or unset options, with the
same matching specification used in the _options
function.</p>

<p style="margin-top: 1em">Note that you need to uncomment
a few lines in the _main_complete function for these
functions to work properly. The lines in question are used
to store the option set&acirc; <br>
tings in effect before the completion widget locally sets
the options it needs. Hence these functions are not
generally used by the completion system.</p>

<p style="margin-top: 1em">_parameters <br>
This is used to complete the names of shell parameters.</p>

<p style="margin-top: 1em">The option &lsquo;-g
pattern&rsquo; limits the completion to parameters whose
type matches the pattern. The type of a parameter is that
shown by &lsquo;print ${(t)param}&rsquo;, hence judicious
<br>
use of &lsquo;*&rsquo; in pattern is probably necessary.</p>

<p style="margin-top: 1em">All other arguments are passed
to the compadd builtin.</p>

<p style="margin-top: 1em">_path_files <br>
This function is used throughout the completion system to
complete filenames. It allows completion of partial paths.
For example, the string &lsquo;/u/i/s/sig&rsquo; may be
com&acirc; <br>
pleted to &lsquo;/usr/include/sys/signal.h&rsquo;.</p>

<p style="margin-top: 1em">The options accepted by both
_path_files and _files are:</p>

<p style="margin-top: 1em">-f Complete all filenames. This
is the default.</p>

<p style="margin-top: 1em">-/ Specifies that only
directories should be completed.</p>

<p style="margin-top: 1em">-g pattern <br>
Specifies that only files matching the pattern should be
completed.</p>

<p style="margin-top: 1em">-W paths <br>
Specifies path prefixes that are to be prepended to the
string from the command line to generate the filenames but
that should not be inserted as completions nor <br>
shown in completion listings. Here, paths may be the name of
an array parameter, a literal list of paths enclosed in
parentheses or an absolute pathname.</p>

<p style="margin-top: 1em">-F ignored-files <br>
This behaves as for the corresponding option to the compadd
builtin. It gives direct control over which filenames should
be ignored. If the option is not present, <br>
the ignored-patterns style is used.</p>

<p style="margin-top: 1em">Both _path_files and _files also
accept the following options which are passed to compadd:
&lsquo;-J&rsquo;, &lsquo;-V&rsquo;, &lsquo;-1&rsquo;,
&lsquo;-2&rsquo;, &lsquo;-n&rsquo;, &lsquo;-X&rsquo;,
&lsquo;-M&rsquo;, &lsquo;-P&rsquo;, &lsquo;-S&rsquo;,
&lsquo;-q&rsquo;, &lsquo;-r&rsquo;, and
&lsquo;-R&rsquo;.</p>

<p style="margin-top: 1em">Finally, the _path_files
function uses the styles expand, ambiguous, special-dirs,
list-suffixes and file-sort described above.</p>

<p style="margin-top: 1em">_pick_variant [ -b builtin-label
] [ -c <br>
command ] [ -r name ] <br>
label=pattern ... label [ args ... ] <br>
This function is used to resolve situations where a single
command name requires more than one type of handling, either
because it has more than one variant or because <br>
there is a name clash between two different commands.</p>

<p style="margin-top: 1em">The command to run is taken from
the first element of the array words unless this is
overridden by the option -c. This command is run and its
output is compared with a <br>
series of patterns. Arguments to be passed to the command
can be specified at the end after all the other arguments.
The patterns to try in order are given by the argu&acirc;
<br>
ments label=pattern; if the output of &lsquo;command args
...&rsquo; contains pattern, then label is selected as the
label for the command variant. If none of the patterns
match, the <br>
final command label is selected and status 1 is
returned.</p>

<p style="margin-top: 1em">If the &lsquo;-b
builtin-label&rsquo; is given, the command is tested to see
if it is provided as a shell builtin, possibly autoloaded;
if so, the label builtin-label is selected as <br>
the label for the variant.</p>

<p style="margin-top: 1em">If the &lsquo;-r name&rsquo; is
given, the label picked is stored in the parameter named
name.</p>

<p style="margin-top: 1em">The results are also cached in
the _cmd_variant associative array indexed by the name of
the command run.</p>

<p style="margin-top: 1em">_regex_arguments name spec ...
<br>
This function generates a completion function name which
matches the specifications spec ..., a set of regular
expressions as described below. After running
_regex_argu&acirc; <br>
ments, the function name should be called as a normal
completion function. The pattern to be matched is given by
the contents of the words array up to the current cursor
<br>
position joined together with null characters; no quotation
is applied.</p>

<p style="margin-top: 1em">The arguments are grouped as
sets of alternatives separated by &lsquo;|&rsquo;, which are
tried one after the other until one matches. Each
alternative consists of a one or more <br>
specifications which are tried left to right, with each
pattern matched being stripped in turn from the command line
being tested, until all of the group succeeds or until <br>
one fails; in the latter case, the next alternative is
tried. This structure can be repeated to arbitrary depth by
using parentheses; matching proceeds from inside to <br>
outside.</p>

<p style="margin-top: 1em">A special procedure is applied
if no test succeeds but the remaining command line string
contains no null character (implying the remaining word is
the one for which com&acirc; <br>
pletions are to be generated). The completion target is
restricted to the remaining word and any actions for the
corresponding patterns are executed. In this case,
noth&acirc; <br>
ing is stripped from the command line string. The order of
evaluation of the actions can be determined by the tag-order
style; the various formats supported by _alterna&acirc; <br>
tive can be used in action. The descr is used for setting up
the array parameter expl.</p>

<p style="margin-top: 1em">Specification arguments take one
of following forms, in which metacharacters such as
&lsquo;(&rsquo;, &lsquo;)&rsquo;, &lsquo;#&rsquo; and
&lsquo;|&rsquo; should be quoted.</p>

<p style="margin-top: 1em">/pattern/ [%lookahead%] [-guard]
[:tag:descr:action] <br>
This is a single primitive component. The function tests
whether the combined pattern
&lsquo;(#b)((#B)pattern)lookahead*&rsquo; matches the
command line string. If so, <br>
&lsquo;guard&rsquo; is evaluated and its return status is
examined to determine if the test has succeeded. The pattern
string &lsquo;[]&rsquo; is guaranteed never to match. The
lookahead <br>
is not stripped from the command line before the next
pattern is examined.</p>

<p style="margin-top: 1em">The argument starting with : is
used in the same manner as an argument to _alternative.</p>

<p style="margin-top: 1em">A component is used as follows:
pattern is tested to see if the component already exists on
the command line. If it does, any following specifications
are examined <br>
to find something to complete. If a component is reached but
no such pattern exists yet on the command line, the string
containing the action is used to generate <br>
matches to insert at that point.</p>

<p style="margin-top: 1em">/pattern/+ [%lookahead%]
[-guard] [:tag:descr:action] <br>
This is similar to &lsquo;/pattern/ ...&rsquo; but the left
part of the command line string (i.e. the part already
matched by previous patterns) is also considered part of the
<br>
completion target.</p>

<p style="margin-top: 1em">/pattern/- [%lookahead%]
[-guard] [:tag:descr:action] <br>
This is similar to &lsquo;/pattern/ ...&rsquo; but the
actions of the current and previously matched patterns are
ignored even if the following &lsquo;pattern&rsquo; matches
the empty <br>
string.</p>

<p style="margin-top: 1em">( spec ) <br>
Parentheses may be used to groups specs; note each
parenthesis is a single argument to _regex_arguments.</p>

<p style="margin-top: 1em">spec # This allows any number of
repetitions of spec.</p>

<p style="margin-top: 1em">spec spec <br>
The two specs are to be matched one after the other as
described above.</p>

<p style="margin-top: 1em">spec | spec <br>
Either of the two specs can be matched.</p>

<p style="margin-top: 1em">The function _regex_words can be
used as a helper function to generate matches for a set of
alternative words possibly with their own arguments as a
command line argument.</p>

<p style="margin-top: 1em">Examples:</p>

<p style="margin-top: 1em">_regex_arguments _tst
/$&rsquo;[^ ]# &rsquo;/ /$&rsquo;[^ ]# &rsquo;/
:&rsquo;compadd aaa&rsquo;</p>

<p style="margin-top: 1em">This generates a function _tst
that completes aaa as its only argument. The tag and
description for the action have been omitted for brevity
(this works but is not recom&acirc; <br>
mended in normal use). The first component matches the
command word, which is arbitrary; the second matches any
argument. As the argument is also arbitrary, any
follow&acirc; <br>
ing component would not depend on aaa being present.</p>

<p style="margin-top: 1em">_regex_arguments _tst
/$&rsquo;[^ ]# &rsquo;/ /$&rsquo;aaa &rsquo;/
:&rsquo;compadd aaa&rsquo;</p>

<p style="margin-top: 1em">This is a more typical use; it
is similar, but any following patterns would only match if
aaa was present as the first argument.</p>

<p style="margin-top: 1em">_regex_arguments _tst
/$&rsquo;[^ ]# &rsquo;/ /$&rsquo;aaa &rsquo;/
:&rsquo;compadd aaa&rsquo; /$&rsquo;bbb &rsquo;/
:&rsquo;compadd bbb&rsquo; <br>
In this example, an indefinite number of command arguments
may be completed. Odd arguments are completed as aaa and
even arguments as bbb. Completion fails unless the <br>
set of aaa and bbb arguments before the current one is
matched correctly.</p>

<p style="margin-top: 1em">_regex_arguments _tst
/$&rsquo;[^ ]# &rsquo;/ /$&rsquo;aaa &rsquo;/
:&rsquo;compadd aaa&rsquo; /$&rsquo;bbb &rsquo;/
:&rsquo;compadd bbb&rsquo; <br>
This is similar, but either aaa or bbb may be completed for
any argument. In this case _regex_words could be used to
generate a suitable expression for the arguments.</p>

<p style="margin-top: 1em">_regex_words tag description
spec ... <br>
This function can be used to generate arguments for the
_regex_arguments command which may be inserted at any point
where a set of rules is expected. The tag and descrip&acirc;
<br>
tion give a standard tag and description pertaining to the
current context. Each spec contains two or three arguments
separated by a colon: note that there is no leading <br>
colon in this case.</p>

<p style="margin-top: 1em">Each spec gives one of a set of
words that may be completed at this point, together with
arguments. It is thus roughly equivalent to the _arguments
function when used in <br>
normal (non-regex) completion.</p>

<p style="margin-top: 1em">The part of the spec before the
first colon is the word to be completed. This may contain a
*; the entire word, before and after the * is completed, but
only the text <br>
before the * is required for the context to be matched, so
that further arguments may be completed after the
abbreviated form.</p>

<p style="margin-top: 1em">The second part of spec is a
description for the word being completed.</p>

<p style="margin-top: 1em">The optional third part of the
spec describes how words following the one being completed
are themselves to be completed. It will be evaluated in
order to avoid problems <br>
with quoting. This means that typically it contains a
reference to an array containing previously generated regex
arguments.</p>

<p style="margin-top: 1em">The option -t term specifies a
terminator for the word instead of the usual space. This is
handled as an auto-removable suffix in the manner of the
option -s sep to _val&acirc; <br>
ues.</p>

<p style="margin-top: 1em">The result of the processing by
_regex_words is placed in the array reply, which should be
made local to the calling function. If the set of words and
arguments may be <br>
matched repeatedly, a # should be appended to the generated
array at that point.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">local -a reply <br>
_regex_words mydb-commands &rsquo;mydb commands&rsquo;
&rsquo;add:add an entry to mydb:$mydb_add_cmds&rsquo;
&rsquo;show:show entries in mydb&rsquo; <br>
_regex_arguments _mydb &quot;$reply[@]&quot; <br>
_mydb &quot;$@&quot;</p>

<p style="margin-top: 1em">This shows a completion function
for a command mydb which takes two command arguments, add
and show. show takes no arguments, while the arguments for
add have already <br>
been prepared in an array mydb_add_cmds, quite possibly by a
previous call to _regex_words.</p>

<p style="margin-top: 1em">_requested [ -x ] [ -12VJ ] tag
[ name descr [ command args ... ] ] <br>
This function is called to decide whether a tag already
registered by a call to _tags (see below) has been requested
by the user and hence completion should be performed <br>
for it. It returns status zero if the tag is requested and
non-zero otherwise. The function is typically used as part
of a loop over different tags as follows:</p>

<p style="margin-top: 1em">_tags foo bar baz <br>
while _tags; do <br>
if _requested foo; then <br>
... # perform completion for foo <br>
fi <br>
... # test the tags bar and baz in the same way <br>
... # exit loop if matches were generated <br>
done</p>

<p style="margin-top: 1em">Note that the test for whether
matches were generated is not performed until the end of the
_tags loop. This is so that the user can set the tag-order
style to specify a <br>
set of tags to be completed at the same time.</p>

<p style="margin-top: 1em">If name and descr are given,
_requested calls the _description function with these
arguments together with the options passed to
_requested.</p>

<p style="margin-top: 1em">If command is given, the
_all_labels function will be called immediately with the
same arguments. In simple cases this makes it possible to
perform the test for the tag <br>
and the matching in one go. For example:</p>

<p style="margin-top: 1em">local expl ret=1 <br>
_tags foo bar baz <br>
while _tags; do <br>
_requested foo expl &rsquo;description&rsquo; compadd foobar
foobaz &amp;&amp; ret=0 <br>
... <br>
(( ret )) || break <br>
done</p>

<p style="margin-top: 1em">If the command is not compadd,
it must nevertheless be prepared to handle the same
options.</p>

<p style="margin-top: 1em">_retrieve_cache cache_identifier
<br>
This function retrieves completion information from the file
given by cache_identifier, stored in a directory specified
by the cache-path style which defaults to ~/.zcomp&acirc;
<br>
cache. The return status is zero if retrieval was
successful. It will only attempt retrieval if the use-cache
style is set, so you can call this function without
worry&acirc; <br>
ing about whether the user wanted to use the caching
layer.</p>

<p style="margin-top: 1em">See _store_cache below for more
details.</p>

<p style="margin-top: 1em">_sep_parts <br>
This function is passed alternating arrays and separators as
arguments. The arrays specify completions for parts of
strings to be separated by the separators. The arrays <br>
may be the names of array parameters or a quoted list of
words in parentheses. For example, with the array
&lsquo;hosts=(ftp news)&rsquo; the call &lsquo;_sep_parts
&rsquo;(foo bar)&rsquo; @ hosts&rsquo; <br>
will complete the string &lsquo;f&rsquo; to
&lsquo;foo&rsquo; and the string &lsquo;b@n&rsquo; to
&lsquo;bar@news&rsquo;.</p>

<p style="margin-top: 1em">This function accepts the
compadd options &lsquo;-V&rsquo;, &lsquo;-J&rsquo;,
&lsquo;-1&rsquo;, &lsquo;-2&rsquo;, &lsquo;-n&rsquo;,
&lsquo;-X&rsquo;, &lsquo;-M&rsquo;, &lsquo;-P&rsquo;,
&lsquo;-S&rsquo;, &lsquo;-r&rsquo;, &lsquo;-R&rsquo;, and
&lsquo;-q&rsquo; and passes them on to the compadd builtin
used to add <br>
the matches.</p>

<p style="margin-top: 1em">_setup tag [ group ] <br>
This function sets up the special parameters used by the
completion system appropriately for the tag given as the
first argument. It uses the styles list-colors, <br>
list-packed, list-rows-first, last-prompt, accept-exact,
menu and force-list.</p>

<p style="margin-top: 1em">The optional group supplies the
name of the group in which the matches will be placed. If it
is not given, the tag is used as the group name.</p>

<p style="margin-top: 1em">This function is called
automatically from _description and hence is not normally
called explicitly.</p>

<p style="margin-top: 1em">_store_cache cache_identifier
params ... <br>
This function, together with _retrieve_cache and
_cache_invalid, implements a caching layer which can be used
in any completion function. Data obtained by costly
opera&acirc; <br>
tions are stored in parameters; this function then dumps the
values of those parameters to a file. The data can then be
retrieved quickly from that file via <br>
_retrieve_cache, even in different instances of the
shell.</p>

<p style="margin-top: 1em">The cache_identifier specifies
the file which the data should be dumped to. The file is
stored in a directory specified by the cache-path style
which defaults to ~/.zcom&acirc; <br>
pcache. The remaining params arguments are the parameters to
dump to the file.</p>

<p style="margin-top: 1em">The return status is zero if
storage was successful. The function will only attempt
storage if the use-cache style is set, so you can call this
function without worrying <br>
about whether the user wanted to use the caching layer.</p>

<p style="margin-top: 1em">The completion function may
avoid calling _retrieve_cache when it already has the
completion data available as parameters. However, in that
case it should call <br>
_cache_invalid to check whether the data in the parameters
and in the cache are still valid.</p>

<p style="margin-top: 1em">See the _perl_modules completion
function for a simple example of the usage of the caching
layer.</p>

<p style="margin-top: 1em">_tags [ [ -C name ] tags ... ]
<br>
If called with arguments, these are taken to be the names of
tags valid for completions in the current context. These
tags are stored internally and sorted by using the <br>
tag-order style.</p>

<p style="margin-top: 1em">Next, _tags is called repeatedly
without arguments from the same completion function. This
successively selects the first, second, etc. set of tags
requested by the user. <br>
The return status is zero if at least one of the tags is
requested and non-zero otherwise. To test if a particular
tag is to be tried, the _requested function should be <br>
called (see above).</p>

<p style="margin-top: 1em">If &lsquo;-C name&rsquo; is
given, name is temporarily stored in the argument field (the
fifth) of the context in the curcontext parameter during the
call to _tags; the field is <br>
restored on exit. This allows _tags to use a more specific
context without having to change and reset the curcontext
parameter (which has the same effect).</p>

<p style="margin-top: 1em">_values [ -O name ] [ -s sep ] [
-S sep ] [ -wC ] desc spec ... <br>
This is used to complete arbitrary keywords (values) and
their arguments, or lists of such combinations.</p>

<p style="margin-top: 1em">If the first argument is the
option &lsquo;-O name&rsquo;, it will be used in the same
way as by the _arguments function. In other words, the
elements of the name array will be <br>
passed to compadd when executing an action.</p>

<p style="margin-top: 1em">If the first argument (or the
first argument after &lsquo;-O name&rsquo;) is
&lsquo;-s&rsquo;, the next argument is used as the character
that separates multiple values. This character is
auto&acirc; <br>
matically added after each value in an auto-removable
fashion (see below); all values completed by &lsquo;_values
-s&rsquo; appear in the same word on the command line,
unlike comple&acirc; <br>
tion using _arguments. If this option is not present, only a
single value will be completed per word.</p>

<p style="margin-top: 1em">Normally, _values will only use
the current word to determine which values are already
present on the command line and hence are not to be
completed again. If the -w <br>
option is given, other arguments are examined as well.</p>

<p style="margin-top: 1em">The first non-option argument is
used as a string to print as a description before listing
the values.</p>

<p style="margin-top: 1em">All other arguments describe the
possible values and their arguments in the same format used
for the description of options by the _arguments function
(see above). The <br>
only differences are that no minus or plus sign is required
at the beginning, values can have only one argument, and the
forms of action beginning with an equal sign are <br>
not supported.</p>

<p style="margin-top: 1em">The character separating a value
from its argument can be set using the option -S (like -s,
followed by the character to use as the separator in the
next argument). By <br>
default the equals sign will be used as the separator
between values and arguments.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">_values -s ,
&rsquo;description&rsquo; &rsquo;*foo[bar]&rsquo;
&rsquo;(two)*one[number]:first count:&rsquo;
&rsquo;two[another number]::second count:(1 2 3)&rsquo;</p>

<p style="margin-top: 1em">This describes three possible
values: &lsquo;foo&rsquo;, &lsquo;one&rsquo;, and
&lsquo;two&rsquo;. The first is described as
&lsquo;bar&rsquo;, takes no argument and may appear more
than once. The second is described <br>
as &lsquo;number&rsquo;, may appear more than once, and
takes one mandatory argument described as &lsquo;first
count&rsquo;; no action is specified, so it will not be
completed. The &lsquo;(two)&rsquo; at <br>
the beginning says that if the value &lsquo;one&rsquo; is on
the line, the value &lsquo;two&rsquo; will no longer be
considered a possible completion. Finally, the last value
(&lsquo;two&rsquo;) is <br>
described as &lsquo;another number&rsquo; and takes an
optional argument described as &lsquo;second count&rsquo;
for which the completions (to appear after an
&lsquo;=&rsquo;) are &lsquo;1&rsquo;, &lsquo;2&rsquo;, and
&lsquo;3&rsquo;. The <br>
_values function will complete lists of these values
separated by commas.</p>

<p style="margin-top: 1em">Like _arguments, this function
temporarily adds another context name component to the
arguments element (the fifth) of the current context while
executing the action. <br>
Here this name is just the name of the value for which the
argument is completed.</p>

<p style="margin-top: 1em">The style verbose is used to
decide if the descriptions for the values (but not those for
the arguments) should be printed.</p>

<p style="margin-top: 1em">The associative array val_args
is used to report values and their arguments; this works
similarly to the opt_args associative array used by
_arguments. Hence the function <br>
calling _values should declare the local parameters state,
state_descr, line, context and val_args:</p>

<p style="margin-top: 1em">local context state state_descr
line <br>
typeset -A val_args</p>

<p style="margin-top: 1em">when using an action of the form
&lsquo;-&gt;string&rsquo;. With this function the context
parameter will be set to the name of the value whose
argument is to be completed. Note that <br>
for _values, the state and state_descr are scalars rather
than arrays. Only a single matching state is returned.</p>

<p style="margin-top: 1em">Note also that _values normally
adds the character used as the separator between values as
an auto-removable suffix (similar to a &lsquo;/&rsquo; after
a directory). However, this is <br>
not possible for a &lsquo;-&gt;string&rsquo; action as the
matches for the argument are generated by the calling
function. To get the usual behaviour, the calling function
can add the <br>
separator x as a suffix by passing the options &lsquo;-qS
x&rsquo; either directly or indirectly to compadd.</p>

<p style="margin-top: 1em">The option -C is treated in the
same way as it is by _arguments. In that case the parameter
curcontext should be made local instead of context (as
described above).</p>

<p style="margin-top: 1em">_wanted [ -x ] [ -C name ] [
-12VJ ] tag name descr command args ... <br>
In many contexts, completion can only generate one
particular set of matches, usually corresponding to a single
tag. However, it is still necessary to decide whether the
<br>
user requires matches of this type. This function is useful
in such a case.</p>

<p style="margin-top: 1em">The arguments to _wanted are the
same as those to _requested, i.e. arguments to be passed to
_description. However, in this case the command is not
optional; all the <br>
processing of tags, including the loop over both tags and
tag labels and the generation of matches, is carried out
automatically by _wanted.</p>

<p style="margin-top: 1em">Hence to offer only one tag and
immediately add the corresponding matches with the given
description:</p>

<p style="margin-top: 1em">local expl <br>
_wanted tag expl &rsquo;description&rsquo; compadd
matches...</p>

<p style="margin-top: 1em">Note that, as for _requested,
the command must be able to accept options to be passed down
to compadd.</p>

<p style="margin-top: 1em">Like _tags this function
supports the -C option to give a different name for the
argument context field. The -x option has the same meaning
as for _description.</p>

<p style="margin-top: 1em">COMPLETION DIRECTORIES <br>
In the source distribution, the files are contained in
various subdirectories of the Completion directory. They may
have been installed in the same structure, or into one
single <br>
function directory. The following is a description of the
files found in the original directory structure. If you wish
to alter an installed file, you will need to copy it to <br>
some directory which appears earlier in your fpath than the
standard directory where it appears.</p>

<p style="margin-top: 1em">Base The core functions and
special completion widgets automatically bound to keys. You
will certainly need most of these, though will probably not
need to alter them. Many <br>
of these are documented above.</p>

<p style="margin-top: 1em">Zsh Functions for completing
arguments of shell builtin commands and utility functions
for this. Some of these are also used by functions from the
Unix directory.</p>

<p style="margin-top: 1em">Unix Functions for completing
arguments of external commands and suites of commands. They
may need modifying for your system, although in many cases
some attempt is made to <br>
decide which version of a command is present. For example,
completion for the mount command tries to determine the
system it is running on, while completion for many <br>
other utilities try to decide whether the GNU version of the
command is in use, and hence whether the --help option is
supported.</p>

<p style="margin-top: 1em">X, AIX, BSD, ... <br>
Completion and utility function for commands available only
on some systems. These are not arranged hierarchically, so,
for example, both the Linux and Debian directo&acirc; <br>
ries, as well as the X directory, may be useful on your
system.</p>

<p style="margin-top: 1em">zsh 5.0.2 December 21, 2012
ZSHCOMPSYS(1)</p>
<hr>
</body>
</html>
