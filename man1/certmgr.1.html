<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>Mono(certmgr)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mono(certmgr)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">Mono(certmgr)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
certmgr - Mono Certificate Manager (CLI version)
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>certmgr [action] [object type] [options] store [filename]</b> or <b>certmgr
  -ssl [options] url</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This tool allow to list, add, remove or extract certificates, certificate
  revocation lists (CRL) or certificate trust lists (CTL) to/from a certificate
  store. Certificate stores are used to build and validate certificate chains
  for Authenticode(r) code signing validation and SSL server certificates.
<h1 class="Sh" title="Sh" id="STORES"><a class="selflink" href="#STORES">STORES</a></h1>
The <i>store</i> represents the certificate store to use. It can be one of the
  following:
<dl class="Bl-tag">
  <dt class="It-tag"><i>My</i></dt>
  <dd class="It-tag">This is the personal certificate store.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>AddressBook</i></dt>
  <dd class="It-tag">This is the store for other people.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>CA</i></dt>
  <dd class="It-tag">This is a store for intermediate certificate
    authorities.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>Trust</i></dt>
  <dd class="It-tag">This is for trusted roots.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>Disallowed</i></dt>
  <dd class="It-tag">This is for untrusted roots</dd>
</dl>
<h1 class="Sh" title="Sh" id="ACTIONS"><a class="selflink" href="#ACTIONS">ACTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-list</i></dt>
  <dd class="It-tag">List the certificates, CTL or CTL in the specified
    store.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-add</i></dt>
  <dd class="It-tag">Add a certificate, CRL or CTL to specified store. If
      filename it's a pkcs12 or pfx file, and it contains a private key, it will
      be imported to local key pair container.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-del</i></dt>
  <dd class="It-tag">Remove a certificate, CRL or CTL from specified store. You
      must specify the object to be removed with it's hash value (and not a
      filename). This hash value is shown when doing a <b>-list</b> on the
      store.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-put</i></dt>
  <dd class="It-tag">Copy a certificate, CRL or CTL from a store to a file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-ssl</i></dt>
  <dd class="It-tag">Download and add the certificates from a SSL session.
      You'll be asked to confirm the addition of every certificate received from
      the server. Note that SSL/TLS protocols do not requires a server to send
      the root certificate. This action assume an certificate (-c) object type
      and will import the certificates in appropriate stores (i.e. server
      certificate in the OtherPeople store, the root certificate in the Trust
      store, any other intermediate certificates in the IntermediateCA
    store).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-importKey</i></dt>
  <dd class="It-tag">Allows importing a private key from a pkcs12 file into a
      local key pair store. (Usefull when you already have the key's
      corresponding certificate installed at the specific store.)
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OBJECT_TYPES"><a class="selflink" href="#OBJECT_TYPES">OBJECT
  TYPES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-c , -cert , -certificate</i></dt>
  <dd class="It-tag">Add, Delete or Put certificates. That is the specified file
      must/will contains X.509 certificates in DER binary encoding.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-crl</i></dt>
  <dd class="It-tag">Add, Delete or Put certificate revocation lists (CRL). That
      is the specified file must/will contains X.509 CRL in DER binary
    encoding.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-ctl</i></dt>
  <dd class="It-tag">Add, Delete or Put certificate trust lists (CRL).
      UNSUPPORTED.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-m</i></dt>
  <dd class="It-tag">Use the machine's certificate stores (instead of the
      default user's stores).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-v</i></dt>
  <dd class="It-tag">More details displayed on the console.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-p password</i></dt>
  <dd class="It-tag">Use the specify password when accessing a pkcs12 file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>-help , -h , -? , /?</i></dt>
  <dd class="It-tag">Display help about this tool.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<b>WARNING: This details the current behavior of Mono and could change between
  releases.</b> The only safe way to interact with certificate stores is to use
  the certmgr tool. The current releases of Mono keeps all the user certificate
  stores in separates directories under <i>~/.config/.mono/certs/</i>
<dl class="Bl-tag">
  <dt class="It-tag">For example the trusted root certificates for a user would
    be kept under</dt>
  <dd class="It-tag"><i>~/.config/.mono/certs/Trust/</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Certificates files are kept in DER (binary) format
    (extension .cer).</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">The filenames either starts with</dt>
  <dd class="It-tag"><i>tbp</i> (thumbprint) or <i>ski</i> (subject key
      identifier).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">The rest of the filename is the base64-encoded value (tbp
    or ski).</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Private key data is stored under</dt>
  <dd class="It-tag"><i>~/.config/.mono/keypairs/</i>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mono certmgr.exe -list -c -m Trust</b></dt>
  <dd class="It-tag">List all certificates in the machine Trust store. This will
      display the hash value for each certificate. This value can be used to
      identify uniquely a certificate for some operations (e.g. delete). E.g.
      <b>Unique Hash: FFA3AC0084DA1673B5A031EBB2156B3E8FBBF6D8</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>mono certmgr.exe -del -c -m Trust
    FFA3AC0084DA1673B5A031EBB2156B3E8FBBF6D8</b></dt>
  <dd class="It-tag">Remove the certificate, represented by the hash value, from
      the machine Trust store. Note that the machine store is normally
      restricted. The following error message will appear if the current user
      doesn't have the minimum access rights to remove the certificate:
      <b>Access to the machine 'Trust' certificate store has been
    denied.</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>certmgr -ssl https://www.verisign.com</b></dt>
  <dd class="It-tag">Import certificates from www.verisign.com used for HTTP
      over SSL. See KNOWN ISSUES (MD2) if you're downloading from
      www.verisign.com.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>certmgr -ssl ldaps://www.nldap.com:636</b></dt>
  <dd class="It-tag">Import the certificates from www.nldap.com used for secure
      LDAP. This works even if we don't know how to speak LDAP because we stop
      the communication shortly after the SSL handshake (which gives us the
      certificate).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="KNOWN_ISSUES"><a class="selflink" href="#KNOWN_ISSUES">KNOWN
  ISSUES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>MD2</b></dt>
  <dd class="It-tag">Some Certificate Authorities (CA) old root certificates use
      the MD2 hash algorithm. MD2 is old enough not to be part of the standard
      .NET framework. This makes it impossible to validate a digital signature
      made with MD2. For this reason MD2 is included in the Mono.Security.dll
      assembly. However the machine.config file must be updated so the OID for
      MD2 is known at runtime.
    <div style="height: 1.00em;">&#x00A0;</div>
    To correct this insert the following XML snippet inside the
      &lt;configuration&gt; element of your machine.config file.
    <br/>
     &lt;mscorlib&gt;
    <br/>
     &lt;cryptographySettings&gt;
    <br/>
     &lt;cryptoNameMapping&gt;
    <br/>
     &lt;cryptoClasses&gt;
    <br/>
     &lt;cryptoClass monoMD2=&quot;Mono.Security.Cryptography.MD2Managed,
      Mono.Security, Version=1.0.5000.0, Culture=neutral,
      PublicKeyToken=0738eb9f132ed756&quot; /&gt;
    <br/>
     &lt;/cryptoClasses&gt;
    <br/>
     &lt;nameEntry name=&quot;MD2&quot; class=&quot;monoMD2&quot; /&gt;
    <br/>
     &lt;/cryptoNameMapping&gt;
    <br/>
     &lt;oidMap&gt;
    <br/>
     &lt;oidEntry OID=&quot;1.2.840.113549.2.2&quot; name=&quot;MD2&quot; /&gt;
    <br/>
     &lt;/oidMap&gt;
    <br/>
     &lt;/cryptographySettings&gt;
    <br/>
     &lt;/mscorlib&gt;
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written by Sebastien Pouliot
<div style="height: 1.00em;">&#x00A0;</div>
Minor additions by Pablo Ruiz Garc&#x00ED;a
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2004-2005 Novell.
<h1 class="Sh" title="Sh" id="MAILING_LISTS"><a class="selflink" href="#MAILING_LISTS">MAILING
  LISTS</a></h1>
Visit http://lists.ximian.com/mailman/listinfo/mono-list for details.
<h1 class="Sh" title="Sh" id="WEB_SITE"><a class="selflink" href="#WEB_SITE">WEB
  SITE</a></h1>
Visit http://www.mono-project.com for details
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>makecert(1),</b>setreg(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
