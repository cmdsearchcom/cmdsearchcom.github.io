<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:37:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SCONS-TIME(1) SCons 2.5.1 SCONS-TIME(1)</p>

<p style="margin-top: 1em">NAME <br>
scons-time - generate and display SCons timing
information</p>

<p style="margin-top: 1em">SYNOPSIS <br>
scons-time subcommand [options...] [arguments...]</p>

<p style="margin-top: 1em">GENERATING TIMING INFORMATION
<br>
scons-time run [-hnqv] [--aegis=PROJECT] [-f FILE]
[--number=NUMBER] [--outdir=OUTDIR] [-p STRING]
[--python=PYTHON] [-s DIR] [--scons=SCONS] [--svn=URL]
[ARGUMENTS]</p>

<p style="margin-top: 1em">Extracting Function Timings <br>
scons-time func [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[--func=NAME] [-p STRING] [-t NUMBER] [--title= TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">Extracting Memory Statistics
<br>
scons-time mem [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [--stage=STAGE] [-t NUMBER] [--title=TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">Extracting Object Counts <br>
scons-time obj [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [--stage=STAGE] [-t NUMBER] [--title=TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">Extracting Execution Times <br>
scons-time time [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [-t NUMBER] [--title=TITLE] [--which=WHICH]
[ARGUMENTS]</p>

<p style="margin-top: 1em">Help Text <br>
scons-time help SUBCOMMAND [...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The scons-time command runs an SCons configuration through a
standard set of profiled timings and can extract and graph
information from the resulting profiles and log files of
<br>
those timings. The action to be performed by the scons-time
script is specified by a subcommand, the first argument on
the command line. See the SUBCOMMANDS section below for <br>
information about the operation of specific subcommands.</p>

<p style="margin-top: 1em">The basic way to use scons-time
is to run the scons-time run subcommand (possibly multiple
times) to generate profile and log file output, and then use
one of the other <br>
subcommands to display the results captured in the profiles
and log files for a particular kind of information: function
timings (the scons-time func subcommand), total memory <br>
used (the scons-time mem subcommand), object counts (the
scons-time obj subcommand) and overall execution time (the
scons-time time subcommand). Options exist to place and find
<br>
the profiles and log files in separate directories, to
generate the output in a format suitable for graphing with
the gnuplot(1) program, and so on.</p>

<p style="margin-top: 1em">There are two basic ways the
scons-time run subcommand is intended to be used to gather
timing statistics for a configuration. One is to use the
--svn= option to test a <br>
configuration against a list of revisions from the SCons
Subversion repository. This will generate a profile and
timing log file for every revision listed with the --number=
<br>
option, and can be used to look at the impact of committed
changes to the SCons code base on a particular configuration
over time.</p>

<p style="margin-top: 1em">The other way is to profile
incremental changes to a local SCons code base during a
development cycle--that is, to look at the performance
impact of changes you&rsquo;re making in the <br>
local tree. In this mode, you run the scons-time run
subcommand without the --svn= option, in which case it
simply looks in the profile/log file output directory (the
current <br>
directory by default) and automatically figures out the next
run number for the output profile and log file. Used in this
way, the development cycle goes something like: make a <br>
change to SCons; run scons-time run to profile it against a
specific configuration; make another change to SCons; run
scons-time run again to profile it; etc.</p>

<p style="margin-top: 1em">OPTIONS <br>
The scons-time command only supports a few global
options:</p>

<p style="margin-top: 1em">-h, --help <br>
Displays the global help text and exits, identical to the
scons-time help subcommand.</p>

<p style="margin-top: 1em">-V, --version <br>
Displays the scons-time version and exits.</p>

<p style="margin-top: 1em">Most functionality is controlled
by options to the individual subcommands. See the next
section for information about individual subcommand
options.</p>

<p style="margin-top: 1em">SUBCOMMANDS <br>
The scons-time command supports the following individual
subcommands.</p>

<p style="margin-top: 1em">The func Subcommand <br>
scons-time func [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[--func=NAME] [-p STRING] [-t NUMBER] [--title= TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">The scons-time func subcommand
displays timing information for a specific Python function
within SCons. By default, it extracts information about the
_main() function, which <br>
includes the Python profiler timing for all of SCons.</p>

<p style="margin-top: 1em">The scons-time func subcommand
extracts function timing information from all the specified
file arguments, which should be Python profiler output
files. (Normally, these would be <br>
*.prof files generated by the scons-time run subcommand, but
they can actually be generated by any Python profiler
invocation.) All file name arguments will be globbed for
<br>
on-disk files.</p>

<p style="margin-top: 1em">If no arguments are specified,
then function timing information will be extracted from all
*.prof files, or the subset of them with a prefix specified
by the -p option.</p>

<p style="margin-top: 1em">Options include:</p>

<p style="margin-top: 1em">-C DIRECTORY, --chdir=DIRECTORY
<br>
Changes to the specified DIRECTORY before looking for the
specified files (or files that match the specified
patterns).</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
Reads configuration information from the specified FILE.</p>

<p style="margin-top: 1em">-fmt=FORMAT, --format=FORMAT
<br>
Reports the output in the specified FORMAT. The formats
currently supported are ascii (the default) and gnuplot.</p>

<p style="margin-top: 1em">--func=NAME <br>
Extracts timings for the specified function NAME. The
default is to report cumulative timings for the _main()
function, which contains the entire SCons run.</p>

<p style="margin-top: 1em">-h, --help <br>
Displays help text for the scons-time func subcommand.</p>

<p style="margin-top: 1em">-p STRING, --prefix=STRING <br>
Specifies the prefix string for profiles from which to
extract function timing information. This will be used to
search for profiles if no arguments are specified on the
<br>
command line.</p>

<p style="margin-top: 1em">-t NUMBER, --tail=NUMBER <br>
Only extracts function timings from the last NUMBER
files.</p>

<p style="margin-top: 1em">The help Subcommand <br>
scons-time help SUBCOMMAND [...] The help subcommand prints
help text for any other subcommands listed as later
arguments on the command line.</p>

<p style="margin-top: 1em">The mem Subcommand <br>
scons-time mem [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [--stage=STAGE] [-t NUMBER] [--title=TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">The scons-time mem subcommand
displays how much memory SCons uses.</p>

<p style="margin-top: 1em">The scons-time mem subcommand
extracts memory use information from all the specified file
arguments, which should be files containing output from
running SCons with the <br>
--debug=memory option. (Normally, these would be *.log files
generated by the scons-time run subcommand.) All file name
arguments will be globbed for on-disk files.</p>

<p style="margin-top: 1em">If no arguments are specified,
then memory information will be extracted from all *.log
files, or the subset of them with a prefix specified by the
-p option.</p>

<p style="margin-top: 1em">-C DIR, --chdir=DIR <br>
Changes to the specified DIRECTORY before looking for the
specified files (or files that match the specified
patterns).</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
Reads configuration information from the specified FILE.</p>

<p style="margin-top: 1em">-fmt=FORMAT, --format=FORMAT
<br>
Reports the output in the specified FORMAT. The formats
currently supported are ascii (the default) and gnuplot.</p>

<p style="margin-top: 1em">-h, --help <br>
Displays help text for the scons-time mem subcommand.</p>

<p style="margin-top: 1em">-p STRING, --prefix=STRING <br>
Specifies the prefix string for log files from which to
extract memory usage information. This will be used to
search for log files if no arguments are specified on the
<br>
command line.</p>

<p style="margin-top: 1em">--stage=STAGE <br>
Prints the memory used at the end of the specified STAGE:
pre-read (before the SConscript files are read), post-read ,
(after the SConscript files are read), pre-build <br>
(before any targets are built) or post-build (after any
targets are built). If no --stage option is specified, the
default behavior is post-build, which reports the final <br>
amount of memory used by SCons during each run.</p>

<p style="margin-top: 1em">-t NUMBER, --tail=NUMBER <br>
Only reports memory statistics from the last NUMBER
files.</p>

<p style="margin-top: 1em">The obj Subcommand <br>
scons-time obj [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [--stage=STAGE] [-t NUMBER] [--title=TITLE]
[ARGUMENTS]</p>

<p style="margin-top: 1em">The scons-time obj subcommand
displays how many objects of a specific named type are
created by SCons.</p>

<p style="margin-top: 1em">The scons-time obj subcommand
extracts object counts from all the specified file
arguments, which should be files containing output from
running SCons with the --debug=count <br>
option. (Normally, these would be *.log files generated by
the scons-time run subcommand.) All file name arguments will
be globbed for on-disk files.</p>

<p style="margin-top: 1em">If no arguments are specified,
then object counts will be extracted from all *.log files,
or the subset of them with a prefix specified by the -p
option.</p>

<p style="margin-top: 1em">-C DIR, --chdir=DIR <br>
Changes to the specified DIRECTORY before looking for the
specified files (or files that match the specified
patterns).</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
Reads configuration information from the specified FILE.</p>

<p style="margin-top: 1em">-fmt=FORMAT, --format=FORMAT
<br>
Reports the output in the specified FORMAT. The formats
currently supported are ascii (the default) and gnuplot.</p>

<p style="margin-top: 1em">-h, --help <br>
Displays help text for the scons-time obj subcommand.</p>

<p style="margin-top: 1em">-p STRING, --prefix=STRING <br>
Specifies the prefix string for log files from which to
extract object counts. This will be used to search for log
files if no arguments are specified on the command line.</p>

<p style="margin-top: 1em">--stage=STAGE <br>
Prints the object count at the end of the specified STAGE:
pre-read (before the SConscript files are read), post-read ,
(after the SConscript files are read), pre-build <br>
(before any targets are built) or post-build (after any
targets are built). If no --stage option is specified, the
default behavior is post-build, which reports the final <br>
object count during each run.</p>

<p style="margin-top: 1em">-t NUMBER, --tail=NUMBER <br>
Only reports object counts from the last NUMBER files.</p>

<p style="margin-top: 1em">The run Subcommand <br>
scons-time run [-hnqv] [--aegis=PROJECT] [-f FILE]
[--number=NUMBER] [--outdir=OUTDIR] [-p STRING]
[--python=PYTHON] [-s DIR] [--scons=SCONS] [--svn=URL]
[ARGUMENTS] The <br>
scons-time run subcommand is the basic subcommand for
profiling a specific configuration against a version of
SCons.</p>

<p style="margin-top: 1em">The configuration to be tested
is specified as a list of files or directories that will be
unpacked or copied into a temporary directory in which SCons
will be invoked. The <br>
scons-time run subcommand understands file suffixes like
.tar, .tar.gz, .tgz and .zip and will unpack their contents
into a temporary directory. If more than one argument is
<br>
specified, each one will be unpacked or copied into the
temporary directory &quot;on top of&quot; the previous
archives or directories, so the expectation is that multiple
specified <br>
archives share the same directory layout.</p>

<p style="margin-top: 1em">Once the file or directory
arguments are unpacked or copied to the temporary directory,
the scons-time run subcommand runs the requested version of
SCons against the <br>
configuration three times:</p>

<p style="margin-top: 1em">Startup <br>
SCons is run with the --help option so that just the
SConscript files are read, and then the default help text is
printed. This profiles just the perceived
&quot;overhead&quot; of <br>
starting up SCons and processing the SConscript files.</p>

<p style="margin-top: 1em">Full build <br>
SCons is run to build everything specified in the
configuration. Specific targets to be passed in on the
command l ine may be specified by the targets keyword in a
<br>
configuration file; see below for details.</p>

<p style="margin-top: 1em">Rebuild <br>
SCons is run again on the same just-built directory. If the
dependencies in the SCons configuration are correct, this
should be an up-to-date, &quot;do nothing&quot; rebuild.</p>

<p style="margin-top: 1em">Each invocation captures the
output log file and a profile.</p>

<p style="margin-top: 1em">The scons-time run subcommand
supports the following options:</p>

<p style="margin-top: 1em">--aegis=PROJECT <br>
Specifies the Aegis PROJECT from which the version(s) of
scons being timed will be extracted. When --aegis is
specified, the --number=NUMBER option specifies delta
numbers <br>
that will be tested. Output from each invocation run will be
placed in file names that match the Aegis delta numbers. If
the --number= option is not specified, then the <br>
default behavior is to time the tip of the specified
PROJECT.</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
Reads configuration information from the specified FILE.
This often provides a more convenient way to specify and
collect parameters associated with a specific timing <br>
configuration than specifying them on the command line. See
the CONFIGURATION FILE section below for information about
the configuration file parameters.</p>

<p style="margin-top: 1em">-h, --help <br>
Displays help text for the scons-time run subcommand.</p>

<p style="margin-top: 1em">-n, --no-exec <br>
Do not execute commands, just printing the command-line
equivalents of what would be executed. Note that the
scons-time script actually executes its actions in Python,
where <br>
possible, for portability. The commands displayed are UNIX
equivalents of what it&rsquo;s doing.</p>

<p style="margin-top: 1em">--number=NUMBER <br>
Specifies the run number to be used in the names of the log
files and profile outputs generated by this run.</p>

<p style="margin-top: 1em">When used in conjunction with
the --aegis=PROJECT option, NUMBER specifies one or more
comma-separated Aegis delta numbers that will be retrieved
automatically from the specified <br>
Aegis PROJECT.</p>

<p style="margin-top: 1em">When used in conjunction with
the --svn=URL option, NUMBER specifies one or more
comma-separated Subversion revision numbers that will be
retrieved automatically from the <br>
Subversion repository at the specified URL. Ranges of delta
or revision numbers may be specified be separating two
numbers with a hyphen (-).</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">% scons-time run
--svn=http://scons.tigris.org/svn/trunk --num=1247,1249-1252
.</p>

<p style="margin-top: 1em">-p STRING, --prefix=STRING <br>
Specifies the prefix string to be used for all of the log
files and profiles generated by this run. The default is
derived from the first specified argument: if the first <br>
argument is a directory, the default prefix is the name of
the directory; if the first argument is an archive (tar or
zip file), the default prefix is the the base name of <br>
the archive, that is, what remains after stripping the
archive suffix (.tgz, .tar.gz or .zip).</p>

<p style="margin-top: 1em">--python=PYTHON <br>
Specifies a path to the Python executable to be used for the
timing runs. The default is to use the same Python
executable that is running the scons-time command
itself.</p>

<p style="margin-top: 1em">-q, --quiet <br>
Suppresses display of the command lines being executed.</p>

<p style="margin-top: 1em">-s DIR, --subdir=DIR <br>
Specifies the name of directory or subdirectory from which
the commands should be executed. The default is XXX</p>

<p style="margin-top: 1em">--scons=SCONS <br>
Specifies a path to the SCons script to be used for the
timing runs. The default is XXX</p>

<p style="margin-top: 1em">--svn=URL, --subversion=URL <br>
Specifies the URL of the Subversion repository from which
the version(s) of scons being timed will be extracted. When
--svn is specified, the --number=NUMBER option specifies
<br>
revision numbers that will be tested. Output from each
invocation run will be placed in file names that match the
Subversion revision numbers. If the --number= option is not
<br>
specified, then the default behavior is to time the HEAD of
the specified URL.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Displays the output from individual commands to the screen
(in addition to capturing the output in log files).</p>

<p style="margin-top: 1em">The time Subcommand <br>
scons-time time [-h] [--chdir=DIR] [-f FILE] [--fmt=FORMAT]
[-p STRING] [-t NUMBER] [--title=TITLE] [--which=WHICH]
[ARGUMENTS]</p>

<p style="margin-top: 1em">The scons-time time subcommand
displays SCons execution times as reported by the scons
--debug=time option.</p>

<p style="margin-top: 1em">The scons-time time subcommand
extracts SCons timing from all the specified file arguments,
which should be files containing output from running SCons
with the --debug=time <br>
option. (Normally, these would be *.log files generated by
the scons-time run subcommand.) All file name arguments will
be globbed for on-disk files.</p>

<p style="margin-top: 1em">If no arguments are specified,
then execution timings will be extracted from all *.log
files, or the subset of them with a prefix specified by the
-p option.</p>

<p style="margin-top: 1em">-C DIR, --chdir=DIR <br>
Changes to the specified DIRECTORY before looking for the
specified files (or files that match the specified
patterns).</p>

<p style="margin-top: 1em">-f FILE, --file=FILE <br>
Reads configuration information from the specified FILE.</p>

<p style="margin-top: 1em">-fmt=FORMAT, --format=FORMAT
<br>
Reports the output in the specified FORMAT. The formats
currently supported are ascii (the default) and gnuplot.</p>

<p style="margin-top: 1em">-h, --help <br>
Displays help text for the scons-time time subcommand.</p>

<p style="margin-top: 1em">-p STRING, --prefix=STRING <br>
Specifies the prefix string for log files from which to
extract execution timings. This will be used to search for
log files if no arguments are specified on the command <br>
line.</p>

<p style="margin-top: 1em">-t NUMBER, --tail=NUMBER <br>
Only reports object counts from the last NUMBER files.</p>

<p style="margin-top: 1em">--which=WHICH <br>
Prints the execution time for the specified WHICH value:
total (the total execution time), SConscripts (total
execution time for the SConscript files themselves), SCons
<br>
(exectuion time in SCons code itself) or commands (execution
time of the commands and other actions used to build
targets). If no --which option is specified, the default
<br>
behavior is total, which reports the total execution time
for each run.</p>

<p style="margin-top: 1em">CONFIGURATION FILE <br>
Various scons-time subcommands can read information from a
specified configuration file when passed the -f or --file
options. The configuration file is actually executed as a
<br>
Python script. Setting Python variables in the configuration
file controls the behavior of the scons-time script more
conveniently than having to specify command-line options or
<br>
arguments for every run, and provides a handy way to
&quot;shrink-wrap&quot; the necessary information for
producing (and reporting) consistent timing runs for a given
configuration.</p>

<p style="margin-top: 1em">aegis <br>
The Aegis executable for extracting deltas. The default is
simply aegis.</p>

<p style="margin-top: 1em">aegis_project <br>
The Aegis project from which deltas should be extracted. The
default is whatever is specified with the --aegis=
command-line option.</p>

<p style="margin-top: 1em">archive_list <br>
A list of archives (files or directories) that will be
copied to the temporary directory in which SCons will be
invoked. .tar, .tar.gz, .tgz and .zip files will have their
<br>
contents unpacked in the temporary directory. Directory
trees and files will be copied as-is.</p>

<p style="margin-top: 1em">initial_commands <br>
A list of commands that will be executed before the actual
timed scons runs. This can be used for commands that are
necessary to prepare the source tree-for example, creating
<br>
a configuration file that should not be part of the timed
run.</p>

<p style="margin-top: 1em">key_location <br>
The location of the key on Gnuplot graphing information
generated with the --format=gnuplot option. The default is
bottom left.</p>

<p style="margin-top: 1em">prefix <br>
The file name prefix to be used when running or extracting
timing for this configuration.</p>

<p style="margin-top: 1em">python <br>
The path name of the Python executable to be used when
running or extracting information for this configuration.
The default is the same version of Python used to run the
<br>
SCons</p>

<p style="margin-top: 1em">scons <br>
The path name of the SCons script to be used when running or
extracting information for this configuration. The default
is simply scons.</p>

<p style="margin-top: 1em">scons_flags <br>
The scons flags used when running SCons to collect timing
information. The default value is --debug=count
--debug=memory --debug=time --debug=memoizer.</p>

<p style="margin-top: 1em">scons_lib_dir, scons_wrapper,
startup_targets, subdir <br>
The subdirectory of the project into which the scons-time
script should change before executing the SCons commands to
time.</p>

<p style="margin-top: 1em">subversion_url <br>
The Subversion URL from</p>

<p style="margin-top: 1em">svn <br>
The subversion executable used to check out revisions of
SCons to be timed. The default is simple svn.</p>

<p style="margin-top: 1em">svn_co_flag, tar, targets <br>
A string containing the targets that should be added to the
command line of every timed scons run. This can be used to
restrict what&rsquo;s being timed to a subset of the full
<br>
build for the configuration.</p>

<p style="margin-top: 1em">targets0, targets1, targets2,
title, unzip, verbose, vertical_bars</p>

<p style="margin-top: 1em">Example <br>
Here is an example scons-time configuration file for a
hypothetical sample project:</p>

<p style="margin-top: 1em"># The project doesn&rsquo;t use
SCons natively (yet), so we&rsquo;re <br>
# timing a separate set of SConscript files that we lay <br>
# on top of the vanilla unpacked project tarball. <br>
arguments = [&rsquo;project-1.2.tgz&rsquo;,
&rsquo;project-SConscripts.tar&rsquo;]</p>

<p style="margin-top: 1em"># The subdirectory name contains
the project version number, <br>
# so tell scons-time to chdir there before building. <br>
subdir = &rsquo;project-1.2&rsquo;</p>

<p style="margin-top: 1em"># Set the prefix so output log
files and profiles are named: <br>
# project-000-[012].{log,prof} <br>
# project-001-[012].{log,prof} <br>
# etc. <br>
prefix = &rsquo;project&rsquo;</p>

<p style="margin-top: 1em"># The SConscript files being
tested don&rsquo;t do any SConf <br>
# configuration, so run their normal ./configure script <br>
# before we invoke SCons. <br>
initial_commands = [ <br>
&rsquo;./configure&rsquo;, <br>
]</p>

<p style="margin-top: 1em"># Only time building the
bin/project executable. <br>
targets = &rsquo;bin/project&rsquo;</p>

<p style="margin-top: 1em"># Time against SCons revisions
of the branches/core branch <br>
subversion_url =
&rsquo;http://scons.tigris.org/svn/scons/branches/core&rsquo;</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
The scons-time script uses the following environment
variables:</p>

<p style="margin-top: 1em">PRESERVE <br>
If this value is set, the scons-time script will not remove
the temporary directory or directories in which it builds
the specified configuration or downloads a specific <br>
version of SCons.</p>

<p style="margin-top: 1em">SEE ALSO <br>
gnuplot(1), scons(1)</p>

<p style="margin-top: 1em">AUTHORS <br>
Steven Knight &lt;knight at baldmt dot com&gt;</p>

<p style="margin-top: 1em">SCons 2.5.1 11/03/2016
SCONS-TIME(1)</p>
<hr>
</body>
</html>
