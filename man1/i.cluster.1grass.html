<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>i.cluster(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">i.cluster(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">i.cluster(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>i.cluster</b> - Generates spectral signatures for land cover types in
  an image using a clustering algorithm.
<div>&#x00A0;</div>
The resulting signature file is used as input for i.maxlik, to generate an
  unsupervised image classification.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
imagery, classification, signatures
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>i.cluster</b>
<div>&#x00A0;</div>
<b>i.cluster --help</b>
<div>&#x00A0;</div>
<b>i.cluster</b> <b>group</b>=<i>name</i> <b>subgroup</b>=<i>name</i>
  <b>signaturefile</b>= <i>name</i> <b>classes</b>=<i>integer</i>
  [<b>seed</b>=<i>name</i>] [<b>sample</b>=<i>row_interval,col_interval</i>]
  [<b>iterations</b>=<i>integer</i>] [<b>convergence</b>=<i>float</i>]
  [<b>separation</b>= <i>float</i>] [<b>min_size</b>=<i>integer</i>]
  [<b>reportfile</b>= <i>name</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>group</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input imagery group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>subgroup</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input imagery subgroup</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>signaturefile</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output file containing result signatures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>classes</b>=<i>integer</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Initial number of classes
    <div>&#x00A0;</div>
    Options: <i>1-255</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>seed</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of file containing initial signatures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sample</b>=<i>row_interval,col_interval</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Sampling intervals (by row and col); default: ~10,000 pixels</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>iterations</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Maximum number of iterations
    <div>&#x00A0;</div>
    Default: <i>30</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>convergence</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Percent convergence
    <div>&#x00A0;</div>
    Options: <i>0-100</i>
    <div>&#x00A0;</div>
    Default: <i>98.0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separation</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Cluster separation
    <div>&#x00A0;</div>
    Default: <i>0.0</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>min_size</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Minimum number of pixels in a class
    <div>&#x00A0;</div>
    Default: <i>17</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reportfile</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output file containing final report</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>i.cluster</i> performs the first pass in the two-pass unsupervised
  classification of imagery, while the GRASS module <i></i> <i>i.maxlik</i>
  executes the second pass. Both commands must be run to complete the
  unsupervised classification.
<div class="Pp"></div>
<i>i.cluster</i> is a clustering algorithm (a modification of the <i>k</i>-means
  clustering algorithm) that reads through the (raster) imagery data and builds
  pixel clusters based on the spectral reflectances of the pixels (see Figure).
  The pixel clusters are imagery categories that can be related to land cover
  types on the ground. The spectral distributions of the clusters (e.g., land
  cover spectral signatures) are influenced by six parameters set by the user. A
  relevant parameter set by the user is the initial number of clusters to be
  discriminated.
<table class="tbl">
  <colgroup>
    <col style="width: 60.00ex;"/>
  </colgroup>
  <tr>
    <td><i>Fig.: Land use/land cover clustering of LANDSAT scene
      (simplified)</i></td>
  </tr>
</table>
<div class="Pp"></div>
<i>i.cluster</i> starts by generating spectral signatures for this number of
  clusters and &quot;attempts&quot; to end up with this number of clusters
  during the clustering process. The resulting number of clusters and their
  spectral distributions, however, are also influenced by the range of the
  spectral values (category values) in the image files and the other parameters
  set by the user. These parameters are: the minimum cluster size, minimum
  cluster separation, the percent convergence, the maximum number of iterations,
  and the row and column sampling intervals.
<div class="Pp"></div>
The cluster spectral signatures that result are composed of cluster means and
  covariance matrices. These cluster means and covariance matrices are used in
  the second pass ( <i>i.maxlik</i>) to classify the image. The clusters or
  spectral classes result can be related to land cover types on the ground. The
  user has to specify the name of group file, the name of subgroup file, the
  name of a file to contain result signatures, the initial number of clusters to
  be discriminated, and optionally other parameters (see below) where the
  <i>group</i> should contain the imagery files that the user wishes to
  classify. The <i>subgroup</i> is a subset of this group. The user must create
  a group and subgroup by running the GRASS program <i>i.group</i> before
  running <i>i.cluster</i>. The subgroup should contain only the imagery band
  files that the user wishes to classify. Note that this subgroup must contain
  more than one band file. The purpose of the group and subgroup is to collect
  map layers for classification or analysis. The <i>signaturefile</i> is the
  file to contain result signatures which can be used as input for
  <i>i.maxlik</i>. The classes value is the initial number of clusters to be
  discriminated; any parameter values left unspecified are set to their default
  values.
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>group=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name of the group file which contains the imagery files that the user
      wishes to classify.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>subgroup=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name of the subset of the group specified in group option, which must
      contain only imagery band files and more than one band file. The user must
      create a group and a subgroup by running the GRASS program <i>i.group</i>
      before running <i>i.cluster</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>signaturefile=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name assigned to output signature file which contains signatures of
      classes and can be used as the input file for the GRASS program
      <i>i.maxlik</i> for an unsupervised classification.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>classes=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The number of clusters that will initially be identified in the clustering
      process before the iterations begin.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>seed=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The name of a seed signature file is optional. The seed signatures are
      signatures that contain cluster means and covariance matrices which were
      calculated prior to the current run of <i>i.cluster</i>. They may be
      acquired from a previously run of <i>i.cluster</i> or from a supervised
      classification signature training site section (e.g., using the signature
      file output by <i>g.gui.iclass</i>). The purpose of seed signatures is to
      optimize the cluster decision boundaries (means) for the number of
      clusters specified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sample=</b><i>row_interval,col_interval</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    These numbers are optional with default values based on the size of the data
      set such that the total pixels to be processed is approximately 10,000
      (consider round up).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>iterations=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This parameter determines the maximum number of iterations which is greater
      than the number of iterations predicted to achieve the optimum percent
      convergence. The default value is 30. If the number of iterations reaches
      the maximum designated by the user; the user may want to rerun
      <i>i.cluster</i> with a higher number of iterations (see
      <i>reportfile</i>).
    <div>&#x00A0;</div>
    Default: 30</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>convergence=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    A high percent convergence is the point at which cluster means become stable
      during the iteration process. The default value is 98.0 percent. When
      clusters are being created, their means constantly change as pixels are
      assigned to them and the means are recalculated to include the new pixel.
      After all clusters have been created, <i>i.cluster</i> begins iterations
      that change cluster means by maximizing the distances between them. As
      these means shift, a higher and higher convergence is approached. Because
      means will never become totally static, a percent convergence and a
      maximum number of iterations are supplied to stop the iterative process.
      The percent convergence should be reached before the maximum number of
      iterations. If the maximum number of iterations is reached, it is probable
      that the desired percent convergence was not reached. The number of
      iterations is reported in the cluster statistics in the report file (see
      <i>reportfile</i>).
    <div>&#x00A0;</div>
    Default: 98.0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separation=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is the minimum separation below which clusters will be merged in the
      iteration process. The default value is 0.0. This is an image-specific
      number (a &quot;magic&quot; number) that depends on the image data being
      classified and the number of final clusters that are acceptable. Its
      determination requires experimentation. Note that as the minimum class (or
      cluster) separation is increased, the maximum number of iterations should
      also be increased to achieve this separation with a high percentage of
      convergence (see <i>convergence</i>).
    <div>&#x00A0;</div>
    Default: 0.0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>min_size=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is the minimum number of pixels that will be used to define a cluster,
      and is therefore the minimum number of pixels for which means and
      covariance matrices will be calculated.
    <div>&#x00A0;</div>
    Default: 17</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>reportfile=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The reportfile is an optional parameter which contains the result, i.e., the
      statistics for each cluster. Also included are the resulting percent
      convergence for the clusters, the number of iterations that was required
      to achieve the convergence, and the separability matrix.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<h2 class="Ss" title="Ss" id="Sampling_method"><a class="selflink" href="#Sampling_method">Sampling
  method</a></h2>
<i>i.cluster</i> does not cluster all pixels, but only a sample (see parameter
  <b>sample</b>). The result of that clustering is not that all pixels are
  assigned to a given cluster; essentially, only signatures which are
  representative of a given cluster are generated. When running <i>i.cluster</i>
  on the same data asking for the same number of classes, but with different
  sample sizes, likely slightly different signatures for each cluster are
  obtained at each run.
<h2 class="Ss" title="Ss" id="Algorithm_used_for_i.cluster"><a class="selflink" href="#Algorithm_used_for_i.cluster">Algorithm
  used for i.cluster</a></h2>
The algorithm uses input parameters set by the user on the initial number of
  clusters, the minimum distance between clusters, and the correspondence
  between iterations which is desired, and minimum size for each cluster. It
  also asks if all pixels to be clustered, or every &quot;x&quot;th row and
  &quot;y&quot;th column (sampling), the correspondence between iterations
  desired, and the maximum number of iterations to be carried out.
<div class="Pp"></div>
In the 1st pass, initial cluster means for each band are defined by giving the
  first cluster a value equal to the band mean minus its standard deviation, and
  the last cluster a value equal to the band mean plus its standard deviation,
  with all other cluster means distributed equally spaced in between these. Each
  pixel is then assigned to the class which it is closest to, distance being
  measured as Euclidean distance. All clusters less than the user-specified
  minimum distance are then merged. If a cluster has less than the
  user-specified minimum number of pixels, all those pixels are again reassigned
  to the next nearest cluster. New cluster means are calculated for each band as
  the average of raster pixel values in that band for all pixels present in that
  cluster.
<div class="Pp"></div>
In the 2nd pass, pixels are then again reassigned to clusters based on new
  cluster means. The cluster means are then again recalculated. This process is
  repeated until the correspondence between iterations reaches a user-specified
  level, or till the maximum number of iterations specified is over, whichever
  comes first.
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Preparing the statistics for unsupervised classification of a LANDSAT subscene
  in North Carolina:
<div>&#x00A0;</div>
<pre>
g.region raster=lsat7_2002_10 -p
# store VIZ, NIR, MIR into group/subgroup (leaving out TIR)
i.group group=lsat7_2002 subgroup=lsat7_2002 \
  input=lsat7_2002_10,lsat7_2002_20,lsat7_2002_30,lsat7_2002_40,lsat7_2002_50,lsat7_2002_70
# generate signature file and report
i.cluster group=lsat7_2002 subgroup=lsat7_2002 \
  signaturefile=sig_cluster_lsat2002 \
  classes=10 reportfile=rep_clust_lsat2002.txt
</pre>
To complete the unsupervised classification, <i>i.maxlik</i> is subsequently
  used. See example in its manual page.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Image classification wiki page</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Historical reference also the GRASS GIS 4 Image Processing
      manual (PDF)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">Wikipedia article on <i>k</i>-means clustering (note that
      <i>i.cluster</i> uses a modification of the <i>k</i>-means clustering
      algorithm)</dd>
</dl>
</div>
<div class="Pp"></div>
<i></i> <i>g.gui.iclass,</i> <i>i.group,</i> <i>i.gensig,</i> <i>i.maxlik,</i>
  <i>i.segment,</i> <i>i.smap,</i> <i>r.kappa</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Michael Shapiro, U.S. Army Construction Engineering Research Laboratory
<div>&#x00A0;</div>
Tao Wen, University of Illinois at Urbana-Champaign, Illinois
<div class="Pp"></div>
<i>Last changed: $Date: 2015-09-22 14:04:47 +0200 (Tue, 22 Sep 2015) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: i.cluster source code (history)
<div class="Pp"></div>
Main index | Imagery index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
