<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>rpmrebuild(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">rpmrebuild(1)</td>
    <td class="head-vol">rpm tools</td>
    <td class="head-rtitle">rpmrebuild(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
rpmrebuild - a tool to build an rpm package from an installed package
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
rpmrebuild [ <i>option</i>] &lt;<i>packagename</i>&gt;
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
rpmrebuild is a tool to build easily rpm package. it can be used to build an rpm
  file from an installed package (lost rpm) or to quickly make change to a
  package: just have your change on installed files and call rpmrebuild.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-5 --md5-compat-digest</b></dt>
  <dd class="It-tag">use rpm 4.4 compatible digest (md5)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --additional</b>=&lt;<i>flags</i>&gt;</dt>
  <dd class="It-tag">pass additional flags to <b>rpmbuild</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b, --batch</b></dt>
  <dd class="It-tag">work in batch mode (no interactive query if files
    change)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cap-from-db (default)</b></dt>
  <dd class="It-tag">set files posix capabilities as saved in rpm database</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cap-from-fs</b></dt>
  <dd class="It-tag">set files posix capabilities as installed files (do not
      force to original capabilities, saved in rpm database)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c,
    --comment-missing</b>=&lt;<i>yes</i>|<i>no</i>&gt;</dt>
  <dd class="It-tag">comment out in the specfile missing files. Default:
      <b>no</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D, --define</b>=&lt;<i>defines</i>&gt;</dt>
  <dd class="It-tag">defines to be passed to rpmbuild.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d, --directory</b>=&lt;<i>directory</i>&gt;</dt>
  <dd class="It-tag">rpm package result will be written in
    <i>directory</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e, --edit-spec</b></dt>
  <dd class="It-tag">alias to --edit-whole.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --filter</b>=&lt;<i>command</i>&gt;</dt>
  <dd class="It-tag">alias for <b>--change-spec-whole</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">output help information about all, but plugins option and
      exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help-plugins</b></dt>
  <dd class="It-tag">output help information about plugins options and
    exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i, --include</b>=&lt;<i>file</i>&gt;</dt>
  <dd class="It-tag">read more options from the file 'file'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I, --install&gt;</b></dt>
  <dd class="It-tag">install the created package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k, --keep-perm</b></dt>
  <dd class="It-tag">alias to <b>--pug-from-fs</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l, --list-plugin</b></dt>
  <dd class="It-tag">list installed plugins</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m, --modify</b>=&lt;<i>command</i>&gt;</dt>
  <dd class="It-tag">alias to <b>--change-files</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n, --notest-install </b></dt>
  <dd class="It-tag">do not test install at end of rpm building</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p, --package</b></dt>
  <dd class="It-tag">use package file, not installed rpm (this option is like
      rpm's -p option)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pug-from-db (default)</b></dt>
  <dd class="It-tag">set files permission, uid and gid as saved in rpm
    database</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pug-from-fs</b></dt>
  <dd class="It-tag">keep installed files permission, uid and gid (do not force
      to original files permission, uid and gid saved in rpm database)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P, --autoprovide</b></dt>
  <dd class="It-tag">use rpm scripts to compute provides</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R, --autorequire</b></dt>
  <dd class="It-tag">use rpm scripts to compute requires</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r, --release</b>=&lt;<i>version</i>&gt;<i></i></dt>
  <dd class="It-tag">specify a release</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s, --spec-only</b>=&lt;<i>specfile</i>&gt;</dt>
  <dd class="It-tag">do not rebuild package, only generate specfile. Can't be
      used with <b>--change-files</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">verbose output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug</b></dt>
  <dd class="It-tag">for debugging purposes : do not remove temporary files at
      end of work</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">output version information and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-w, --warning</b></dt>
  <dd class="It-tag">display some warnings if it detects a potential problem
      (for example, spec file which contains filename with globbing char).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-y, --verify</b>=&lt;<i>yes</i>|<i>no</i>&gt;</dt>
  <dd class="It-tag">Turn on/off package verifying before processing. Default:
      <b>yes</b>. Can be turn off to get better performance.</dd>
</dl>
<div class="Pp"></div>
PLUGINS OPTION
<div class="Pp"></div>
rpmrebuild use may be extended with plugins. Plugins are searched in
  <b>/usr/lib/rpmrebuild/plugins</b> and then in $PATH
<dl class="Bl-tag">
  <dt class="It-tag"><b>--change-files</b>=&lt;<i>command</i>&gt;</dt>
  <dd class="It-tag">Invoke plugin which change package's files. Note, that
      these files are copied before to the temporary location, so installed
      package's files not changed.
    <div>&#x00A0;</div>
    Can't be used with <b>--spec-only</b></dd>
</dl>
<div class="Pp"></div>
<b>--change-spec-whole</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-whole</b>
<div style="margin-left: 5.00ex;">Invoke plugin or editor to change
  specfile.</div>
<div class="Pp"></div>
<b>--change-spec-preamble</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-preamble</b>
<div class="Pp"></div>
<b>--change-spec-conflicts</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-conflicts</b>
<div class="Pp"></div>
<b>--change-spec-obsoletes</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-obsoletes</b>
<div class="Pp"></div>
<b>--change-spec-provides</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-provides</b>
<div class="Pp"></div>
<b>--change-spec-requires</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-requires</b>
<div class="Pp"></div>
<b>--change-spec-suggests</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-suggests</b>
<div class="Pp"></div>
<b>--change-spec-enhances</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-enhances</b>
<div class="Pp"></div>
<b>--change-spec-description</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-description</b>
<div class="Pp"></div>
<b>--change-spec-files</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-files</b>
<div class="Pp"></div>
<b>--change-spec-triggers</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-triggers</b>
<div class="Pp"></div>
<b>--change-spec-pre</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-pre</b>
<div class="Pp"></div>
<b>--change-spec-post</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-post</b>
<div class="Pp"></div>
<b>--change-spec-preun</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-preun</b>
<div class="Pp"></div>
<b>--change-spec-postun</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-postun</b>
<div class="Pp"></div>
<b>--change-spec-pretrans</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-postrans</b>
<div class="Pp"></div>
<b>--change-spec-postrans</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-postrans</b>
<div class="Pp"></div>
<b>--change-spec-verifyscript</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-verifyscript</b>
<div class="Pp"></div>
<b>--change-spec-changelog</b>=&lt;<i>command</i>&gt;
<div>&#x00A0;</div>
<b>--edit-changelog</b>
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">Invoke plugin or editor to change preamble,
  conflicts, obsoletes, provides, requires, description, files, triggers,
  preinstall, postinstall, preuninstall, postuninstall, verifyscript or
  changelog.
<div>&#x00A0;</div>
None of these options can be specified after <b>--change-spec-whole</b> or
  <b>--edit-whole</b>.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="INCLUDE_FILES"><a class="selflink" href="#INCLUDE_FILES">INCLUDE
  FILES</a></h1>
Any of the rpmrebuild's LONG option can be specified on the command line or in
  the include file (file specified with -i/--include option).
<div class="Pp"></div>
Include files are also searched in the <b>/usr/lib/rpmrebuild/plugins</b>
  directory.
<div class="Pp"></div>
Include file has following syntax.
<dl class="Bl-tag">
  <dt class="It-tag"><b>comments</b></dt>
  <dd class="It-tag">Any line begin with '#' or some number of whitespace and
      '#'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>empty line</b></dt>
  <dd class="It-tag">empty line are ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>option line</b></dt>
  <dd class="It-tag">option line is very similar to the option written on the
      command line. the limitation of the option line in the file are:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">long option</dt>
  <dd class="It-tag">should be used ONLY long options WITHOUT leading --.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">option's argument</dt>
  <dd class="It-tag">option's argument should not be quoted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">separator</dt>
  <dd class="It-tag">option's argument should be separated from option by spaces
      or tabs, not by equal ('=') sign.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">non-optional argument(s)</dt>
  <dd class="It-tag">package name (non-optional argument) shouldn't be specified
      in the include file.</dd>
</dl>
</div>
<div class="Pp"></div>
For example, if command line looks like:
<div style="margin-left: 5.00ex;">rpmrebuild --change-files=&quot;pgm1 a b
  c&quot; --change-spec-pre=&quot;pgm2 bb&quot; pkg</div>
<div class="Pp"></div>
Then include file should be written like:
<div style="margin-left: 5.00ex;">change-files pgm1 a b c
<div>&#x00A0;</div>
change-spec-pre pgm2 bb
<div>&#x00A0;</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>~/.rpmmacros</b></dt>
  <dd class="It-tag">is used by rpm when building packages (macros)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>$RPMREBUILD_TMPDIR/work</b></dt>
  <dd class="It-tag">directory where rpmrebuild put temporary files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RPMREBUILD_TMPDIR</b></dt>
  <dd class="It-tag">Directory for temporal files. If not set
      ~/.tmp/rpmrebuild.$$ is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>RPMREBUILD_OPTS</b></dt>
  <dd class="It-tag">This is another way to pass options to rpmrebuild (to use
      with care). It allows to change the default options on a host. For example
      to activate the un_prelink plugin, just set
      RPMREBUILD_OPTS=&quot;--include un_prelink.plug&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>VISUAL</b></dt>
  <dd class="It-tag">used to specify an editor for specfile. if not set
      <b>EDITOR</b> variable examined.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>EDITOR</b></dt>
  <dd class="It-tag">used to specify an editor for specfile. if not set
      <b>vi</b> used.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Build an rpm package as closed as possible to original one:
<div class="Pp"></div>
<b>rpmrebuild --batch package</b>
<div class="Pp"></div>
Build a modified package:
<div class="Pp"></div>
<b>rpmrebuild --keep-perm package</b>
<div class="Pp"></div>
Build a rpm from another rpm file:
<div class="Pp"></div>
<b>rpmrebuild --package --filter filter
  /usr/src/redhat/i386/package-i386.rpm</b>
<div class="Pp"></div>
rebuild and sign the bash package
<div class="Pp"></div>
<b>rpmrebuild --additional &quot;--sign&quot; bash</b>
<div class="Pp"></div>
Rebuild rpm as legacy (rpm[23]) package:
<div class="Pp"></div>
<b>rpmrebuild --additional &quot;--nodirtokens&quot; bash</b>
<div class="Pp"></div>
Specify generated rpm name:
<div class="Pp"></div>
<b>rpmrebuild --define &quot;_rpmfilename %%{NAME}.rpm&quot; bash</b>
<div class="Pp"></div>
Change package interactive
<div class="Pp"></div>
<b>rpmrebuild --package --change-files &quot;/bin/bash&quot;
  /some/place/bash.rpm</b>
<div class="Pp"></div>
Change package non-interactive
<div class="Pp"></div>
<b>rpmrebuild --package --change-files &quot;a.sh &amp;&amp; b.sh&quot;
  /some/place/bash.rpm</b>
<div class="Pp"></div>
if you have problem with rpm building, and if you know specfile syntax, you can
  also edit it:
<div class="Pp"></div>
<b>rpmrebuild --edit-whole package</b>
<div class="Pp"></div>
batch change of version tag
<div class="Pp"></div>
<b>rpmrebuild --change-spec-preamble='sed -e &quot;s/^Version:.*/Version:
  YourVersion/&quot;' YourPackage</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Eric Gerbier &lt;gerbier@users.sourceforge.net&gt;
<div>&#x00A0;</div>
Valery Reznic &lt;valery_reznic@users.sourceforge.net&gt;
<dl class="Bl-tag">
  <dt class="It-tag">See &lt;URL:http://rpmrebuild.sourceforge.net/&gt;.</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">rpmrebuild can not reproduce exactly a package, so</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    - md5 checksum will not match original ones.
    <div>&#x00A0;</div>
    - gpg or pgp signatures are lost</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">packages which contains file with globbing characters (* ..
    ? ) will not build</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
rpmrebuild is copyright (C) 2002 by Eric Gerbier.
<div>&#x00A0;</div>
this program is distributed under GNU General Public License
<div>&#x00A0;</div>
It is provided &quot;as is&quot;, without any express or implied warranties.
<div>&#x00A0;</div>
See the file COPYING for details.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
rpm(8), rpmbuild(8), rpmrebuild_plugins(1), 'man -k rrp' for plugins specific
  manpages.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2.11</td>
    <td class="foot-os">Eric Gerbier</td>
  </tr>
</table>
</body>
</html>
