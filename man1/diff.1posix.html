<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DIFF(1POSIX)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DIFF(1POSIX)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">DIFF(1POSIX)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="PROLOG"><a class="selflink" href="#PROLOG">PROLOG</a></h1>
This manual page is part of the POSIX Programmer's Manual. The Linux
  implementation of this interface may differ (consult the corresponding Linux
  manual page for details of Linux behavior), or the interface may not be
  implemented on Linux.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
diff &#x2014; compare two files
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
diff  <b>[</b>&#x2212;c|&#x2212;e|&#x2212;f|&#x2212;u|&#x2212;C <i>n</i>|&#x2212;U <i>n</i><b>] [</b>&#x2212;br<b>] </b><i>file1 file2</i>
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>diff</i> utility shall compare the contents of <i>file1</i> and
  <i>file2</i> and write to standard output a list of changes necessary to
  convert <i>file1</i> into <i>file2</i>. This list should be minimal. No output
  shall be produced if the files are identical.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The <i>diff</i> utility shall conform to the Base Definitions volume of
  POSIX.1&#x2010;2008, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>.
<div class="Pp"></div>
The following options shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;b</b></dt>
  <dd class="It-tag">Cause any amount of white space at the end of a line to be
      treated as a single &lt;newline&gt; (that is, the white-space characters
      preceding the &lt;newline&gt; are ignored) and other strings of
      white-space characters, not including &lt;newline&gt; characters, to
      compare equal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;c</b></dt>
  <dd class="It-tag">Produce output in a form that provides three lines of
      copied context.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;C&#x00A0;</b><i>n</i></dt>
  <dd class="It-tag">Produce output in a form that provides <i>n</i> lines of
      copied context (where <i>n</i> shall be interpreted as a positive decimal
      integer).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;e</b></dt>
  <dd class="It-tag">Produce output in a form suitable as input for the
      <i>ed</i> utility, which can then be used to convert <i>file1</i> into
      <i>file2</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;f</b></dt>
  <dd class="It-tag">Produce output in an alternative form, similar in format to
      <b>&#x2212;e</b>, but not intended to be suitable as input for the
      <i>ed</i> utility, and in the opposite order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;r</b></dt>
  <dd class="It-tag">Apply <i>diff</i> recursively to files and directories of
      the same name when <i>file1</i> and <i>file2</i> are both
    directories.</dd>
</dl>
<div style="margin-left: 10.00ex;">
<div class="Pp"></div>
The <i>diff</i> utility shall detect infinite loops; that is, entering a
  previously visited directory that is an ancestor of the last file encountered.
  When it detects an infinite loop, <i>diff</i> shall write a diagnostic message
  to standard error and shall either recover its position in the hierarchy or
  terminate.</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;u</b></dt>
  <dd class="It-tag">Produce output in a form that provides three lines of
      unified context.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2212;U&#x00A0;</b><i>n</i></dt>
  <dd class="It-tag">Produce output in a form that provides <i>n</i> lines of
      unified context (where <i>n</i> shall be interpreted as a non-negative
      decimal integer).</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPERANDS"><a class="selflink" href="#OPERANDS">OPERANDS</a></h1>
The following operands shall be supported:
<dl class="Bl-tag">
  <dt class="It-tag"><i>file1</i>,&#x00A0;<i>file2</i></dt>
  <dd class="It-tag">A pathname of a file to be compared. If either the
      <i>file1</i> or <i>file2</i> operand is <b>'&#x2212;'</b>, the standard
      input shall be used in its place.</dd>
</dl>
<div class="Pp"></div>
If both <i>file1</i> and <i>file2</i> are directories, <i>diff</i> shall not
  compare block special files, character special files, or FIFO special files to
  any files and shall not compare regular files to directories. Further details
  are as specified in <i>Diff Directory Comparison Format</i>. The behavior of
  <i>diff</i> on other file types is implementation-defined when found in
  directories.
<div class="Pp"></div>
If only one of <i>file1</i> and <i>file2</i> is a directory, <i>diff</i> shall
  be applied to the non-directory file and the file contained in the directory
  file with a filename that is the same as the last component of the
  non-directory file.
<h1 class="Sh" title="Sh" id="STDIN"><a class="selflink" href="#STDIN">STDIN</a></h1>
The standard input shall be used only if one of the <i>file1</i> or <i>file2</i>
  operands references standard input. See the INPUT FILES section.
<h1 class="Sh" title="Sh" id="INPUT_FILES"><a class="selflink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
The input files may be of any type.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
The following environment variables shall affect the execution of <i>diff</i>:
<dl class="Bl-tag">
  <dt class="It-tag"><i>LANG</i></dt>
  <dd class="It-tag">Provide a default value for the internationalization
      variables that are unset or null. (See the Base Definitions volume of
      POSIX.1&#x2010;2008, <i>Section 8.2</i>, <i>Internationalization
      Variables</i> for the precedence of internationalization variables used to
      determine the values of locale categories.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_ALL</i></dt>
  <dd class="It-tag">If set to a non-empty string value, override the values of
      all the other internationalization variables.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_CTYPE</i></dt>
  <dd class="It-tag">Determine the locale for the interpretation of sequences of
      bytes of text data as characters (for example, single-byte as opposed to
      multi-byte characters in arguments and input files).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_MESSAGES</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error and informative messages
      written to standard output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>LC_TIME</i></dt>
  <dd class="It-tag">Determine the locale for affecting the format of file
      timestamps written with the <b>&#x2212;C</b> and <b>&#x2212;c</b>
    options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>NLSPATH</i></dt>
  <dd class="It-tag">Determine the location of message catalogs for the
      processing of <i>LC_MESSAGES</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><i>TZ</i></dt>
  <dd class="It-tag">Determine the timezone used for calculating file timestamps
      written with a context format. If <i>TZ</i> is unset or null, an
      unspecified default timezone shall be used.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ASYNCHRONOUS_EVENTS"><a class="selflink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
Default.
<h1 class="Sh" title="Sh" id="STDOUT"><a class="selflink" href="#STDOUT">STDOUT</a></h1>
<h2 class="Ss" title="Ss" id="Diff_Directory_Comparison_Format"><a class="selflink" href="#Diff_Directory_Comparison_Format">Diff
  Directory Comparison Format</a></h2>
If both <i>file1</i> and <i>file2</i> are directories, the following output
  formats shall be used.
<div class="Pp"></div>
In the POSIX locale, each file that is present in only one directory shall be
  reported using the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;Only in %s: %s\n&quot;, &lt;</b><i>directory pathname</i><b>&gt;, &lt;</b><i>filename</i>&gt;
</pre>
</div>
<div class="Pp"></div>
In the POSIX locale, subdirectories that are common to the two directories may
  be reported with the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;Common subdirectories: %s and %s\n&quot;, &lt;</b><i>directory1 pathname</i>&gt;,
    &lt; <i>directory2 pathname</i>&gt;
</pre>
</div>
<div class="Pp"></div>
For each file common to the two directories, if the two files are not to be
  compared: if the two files have the same device ID and file serial number, or
  are both block special files that refer to the same device, or are both
  character special files that refer to the same device, in the POSIX locale the
  output format is unspecified. Otherwise, in the POSIX locale an unspecified
  format shall be used that contains the pathnames of the two files.
<div class="Pp"></div>
For each file common to the two directories, if the files are compared and are
  identical, no output shall be written. If the two files differ, the following
  format is written:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;diff %s %s %s\n&quot;, &lt;</b><i>diff_options</i>&gt;, &lt;<i>filename1</i>&gt;, &lt;<i>filename2</i>&gt;
</pre>
</div>
<div class="Pp"></div>
where &lt; <i>diff_options</i>&gt; are the options as specified on the command
  line.
<div class="Pp"></div>
All directory pathnames listed in this section shall be relative to the original
  command line arguments. All other names of files listed in this section shall
  be filenames (pathname components).
<h2 class="Ss" title="Ss" id="Diff_Binary_Output_Format"><a class="selflink" href="#Diff_Binary_Output_Format">Diff
  Binary Output Format</a></h2>
In the POSIX locale, if one or both of the files being compared are not text
  files, it is implementation-defined whether <i>diff</i> uses the binary file
  output format or the other formats as specified below. The binary file output
  format shall contain the pathnames of two files being compared and the string
  <b>&quot;differ&quot;</b>.
<div class="Pp"></div>
If both files being compared are text files, depending on the options specified,
  one of the following formats shall be used to write the differences.
<h2 class="Ss" title="Ss" id="Diff_Default_Output_Format"><a class="selflink" href="#Diff_Default_Output_Format">Diff
  Default Output Format</a></h2>
The default (without <b>&#x2212;e</b>, <b>&#x2212;f</b>, <b>&#x2212;c</b>,
  <b>&#x2212;C</b>, <b>&#x2212;u</b>, or <b>&#x2212;U</b> options) <i>diff</i>
  utility output shall contain lines of these forms:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%da%d\n&quot;, &lt;</b><i>num1</i>&gt;, &lt;<i>num2</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%da%d,%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;, &lt;<i>num3</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%dd%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%d,%dd%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;, &lt;<i>num3</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%dc%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%d,%dc%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;, &lt;<i>num3</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%dc%d,%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;, &lt;<i>num3</i>&gt;
</pre>
<div class="Pp"></div>
<pre>
&quot;%d,%dc%d,%d\n&quot;, &lt; <i>num1</i>&gt;, &lt;<i>num2</i>&gt;, &lt;<i>num3</i>&gt;, &lt;<i>num4</i>&gt;
</pre>
</div>
<div class="Pp"></div>
These lines resemble <i>ed</i> subcommands to convert <i>file1</i> into
  <i>file2</i>. The line numbers before the action letters shall pertain to
  <i>file1</i>; those after shall pertain to <i>file2</i>. Thus, by exchanging
  <i>a</i> for <i>d</i> and reading the line in reverse order, one can also
  determine how to convert <i>file2</i> into <i>file1</i>. As in <i>ed</i>,
  identical pairs (where <i>num1</i>= <i>num2</i>) are abbreviated as a single
  number.
<div class="Pp"></div>
Following each of these lines, <i>diff</i> shall write to standard output all
  lines affected in the first file using the format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&lt; %s&quot;, &lt;</b><i>line</i>&gt;
</pre>
</div>
<div class="Pp"></div>
and all lines affected in the second file using the format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&gt; %s&quot;, &lt;</b><i>line</i>&gt;
</pre>
</div>
<div class="Pp"></div>
If there are lines affected in both <i>file1</i> and <i>file2</i> (as with the
  <b>c</b> subcommand), the changes are separated with a line consisting of
  three &lt;hyphen&gt; characters:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&#x2212;&#x2212;&#x2212;\n&quot;</b>
</pre>
</div>
<h2 class="Ss" title="Ss" id="Diff_&#x2212;e_Output_Format"><a class="selflink" href="#Diff_&#x2212;e_Output_Format">Diff
  &#x2212;e Output Format</a></h2>
With the <b>&#x2212;e</b> option, a script shall be produced that shall, when
  provided as input to <i>ed</i>, along with an appended <b>w</b> (write)
  command, convert <i>file1</i> into <i>file2</i>. Only the <b>a</b> (append),
  <b>c</b> (change), <b>d</b> (delete), <b>i</b> (insert), and <b>s</b>
  (substitute) commands of <i>ed</i> shall be used in this script. Text lines,
  except those consisting of the single character &lt;period&gt; (<b>'.'</b>),
  shall be output as they appear in the file.
<h2 class="Ss" title="Ss" id="Diff_&#x2212;f_Output_Format"><a class="selflink" href="#Diff_&#x2212;f_Output_Format">Diff
  &#x2212;f Output Format</a></h2>
With the <b>&#x2212;f</b> option, an alternative format of script shall be
  produced. It is similar to that produced by <b>&#x2212;e</b>, with the
  following differences:
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">It is expressed in reverse sequence; the output of
      <b>&#x2212;e</b> orders changes from the end of the file to the beginning;
      the <b>&#x2212;f</b> from beginning to end.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">The command form &lt;<i>lines</i>&gt;
      &lt;<i>command-letter</i>&gt; used by <b>&#x2212;e</b> is reversed. For
      example, 10 <i>c</i> with <b>&#x2212;e</b> would be <i>c</i>10 with
      <b>&#x2212;f</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag">The form used for ranges of line numbers is
      &lt;space&gt;-separated, rather than &lt;comma&gt;-separated.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Diff_&#x2212;c_or_&#x2212;C_Output_Format"><a class="selflink" href="#Diff_&#x2212;c_or_&#x2212;C_Output_Format">Diff
  &#x2212;c or &#x2212;C Output Format</a></h2>
With the <b>&#x2212;c</b> or <b>&#x2212;C</b> option, the output format shall
  consist of affected lines along with surrounding lines of context. The
  affected lines shall show which ones need to be deleted or changed in
  <i>file1</i>, and those added from <i>file2</i>. With the <b>&#x2212;c</b>
  option, three lines of context, if available, shall be written before and
  after the affected lines. With the <b>&#x2212;C</b> option, the user can
  specify how many lines of context are written. The exact format follows.
<div class="Pp"></div>
The name and last modification time of each file shall be output in the
  following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;*** %s %s\n&quot;, </b><i>file1</i>, &lt;<i>file1 timestamp</i>&gt;
&quot;&#x2212;&#x2212;&#x2212; %s %s\n&quot;,  <i>file2</i>, &lt;<i>file2 timestamp</i>&gt;
</pre>
</div>
<div class="Pp"></div>
Each &lt; <i>file</i>&gt; field shall be the pathname of the corresponding file
  being compared. The pathname written for standard input is unspecified.
<div class="Pp"></div>
In the POSIX locale, each &lt; <i>timestamp</i>&gt; field shall be equivalent to
  the output from the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>date &quot;+%a %b %e %T %Y&quot;</b>
</pre>
</div>
<div class="Pp"></div>
without the trailing &lt;newline&gt;, executed at the time of last modification
  of the corresponding file (or the current time, if the file is standard
  input).
<div class="Pp"></div>
Then, the following output formats shall be applied for every set of changes.
<div class="Pp"></div>
First, a line shall be written in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;***************\n&quot;</b>
</pre>
</div>
<div class="Pp"></div>
Next, the range of lines in <i>file1</i> shall be written in the following
  format if the range contains two or more lines:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;*** %d,%d ****\n&quot;, &lt;</b><i>beginning line number</i>&gt;, &lt;<i>ending line number</i>&gt;
</pre>
</div>
<div class="Pp"></div>
and the following format otherwise:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;*** %d ****\n&quot;, &lt;</b><i>ending line number</i>&gt;
</pre>
</div>
<div class="Pp"></div>
The ending line number of an empty range shall be the number of the preceding
  line, or 0 if the range is at the start of the file.
<div class="Pp"></div>
Next, the affected lines along with lines of context (unaffected lines) shall be
  written. Unaffected lines shall be written in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;  %s&quot;, &lt;</b><i>unaffected_line</i>&gt;
</pre>
</div>
<div class="Pp"></div>
Deleted lines shall be written as:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&#x2212; %s&quot;, &lt;</b><i>deleted_line</i>&gt;
</pre>
</div>
<div class="Pp"></div>
Changed lines shall be written as:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;! %s&quot;, &lt;</b><i>changed_line</i>&gt;
</pre>
</div>
<div class="Pp"></div>
Next, the range of lines in <i>file2</i> shall be written in the following
  format if the range contains two or more lines:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&#x2212;&#x2212;&#x2212; %d,%d &#x2212;&#x2212;&#x2212;&#x2212;\n&quot;, &lt;</b><i>beginning line number</i>&gt;, &lt;<i>ending line number</i>&gt;
</pre>
</div>
<div class="Pp"></div>
and the following format otherwise:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;&#x2212;&#x2212;&#x2212; %d &#x2212;&#x2212;&#x2212;&#x2212;\n&quot;, &lt;</b><i>ending line number</i>&gt;
</pre>
</div>
<div class="Pp"></div>
Then, lines of context and changed lines shall be written as described in the
  previous formats. Lines added from <i>file2</i> shall be written in the
  following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;+ %s&quot;, &lt;</b><i>added_line</i>&gt;
</pre>
</div>
<h2 class="Ss" title="Ss" id="Diff_&#x2212;u_or_&#x2212;U_Output_Format"><a class="selflink" href="#Diff_&#x2212;u_or_&#x2212;U_Output_Format">Diff
  &#x2212;u or &#x2212;U Output Format</a></h2>
The <b>&#x2212;u</b> or <b>&#x2212;U</b> options behave like the
  <b>&#x2212;c</b> or <b>&#x2212;C</b> options, except that the context lines
  are not repeated; instead, the context, deleted, and added lines are shown
  together, interleaved. The exact format follows.
<div class="Pp"></div>
The name and last modification time of each file shall be output in the
  following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;--- %s%s%s %s0, file1, &lt;file1 timestamp&gt;, &lt;file1 frac&gt;, &lt;file1 zone&gt;</b>
<b>&quot;+++ %s%s%s %s0, file2, &lt;file2 timestamp&gt;, &lt;file2 frac&gt;, &lt;file2 zone&gt;</b>
</pre>
</div>
<div class="Pp"></div>
Each &lt; <i>file</i>&gt; field shall be the pathname of the corresponding file
  being compared, or the single character <b>'&#x2212;'</b> if standard input is
  being compared. However, if the pathname contains a &lt;tab&gt; or a
  &lt;newline&gt;, or if it does not consist entirely of characters taken from
  the portable character set, the behavior is implementation-defined.
<div class="Pp"></div>
Each &lt; <i>timestamp</i>&gt; field shall be equivalent to the output from the
  following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>date '+%Y-%m-%d %H:%M:%S'</b>
</pre>
</div>
<div class="Pp"></div>
without the trailing &lt;newline&gt;, executed at the time of last modification
  of the corresponding file (or the current time, if the file is standard
  input).
<div class="Pp"></div>
Each &lt; <i>frac</i>&gt; field shall be either empty, or a decimal point
  followed by at least one decimal digit, indicating the fractional-seconds part
  (if any) of the file timestamp. The number of fractional digits shall be at
  least the number needed to represent the file's timestamp without loss of
  information.
<div class="Pp"></div>
Each &lt; <i>zone</i>&gt; field shall be of the form <b>&quot;shhmm&quot;</b>,
  where <b>&quot;shh&quot;</b> is a signed two-digit decimal number in the range
  &#x2212;24 through +25, and <b>&quot;mm&quot;</b> is an unsigned two-digit
  decimal number in the range 00 through 59. It represents the timezone of the
  timestamp as the number of hours (hh) and minutes (mm) east (+) or west
  (&#x2212;) of UTC for the timestamp. If the hours and minutes are both zero,
  the sign shall be <b>'+'</b>. However, if the timezone is not an integral
  number of minutes away from UTC, the &lt; <i>zone</i>&gt; field is
  implementation-defined.
<div class="Pp"></div>
Then, the following output formats shall be applied for every set of changes.
<div class="Pp"></div>
First, the range of lines in each file shall be written in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;@@ -%s +%s @@&quot;, &lt;file1 range&gt;, &lt;file2 range&gt;</b>
</pre>
</div>
<div class="Pp"></div>
Each &lt; <i>range</i>&gt; field shall be of the form:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%1d&quot;, &lt;beginning line number&gt;</b>
</pre>
</div>
<div class="Pp"></div>
if the range contains exactly one line, and:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;%1d,%1d&quot;, &lt;beginning line number&gt;, &lt;number of lines&gt;</b>
</pre>
</div>
<div class="Pp"></div>
otherwise. If a range is empty, its beginning line number shall be the number of
  the line just before the range, or 0 if the empty range starts the file.
<div class="Pp"></div>
Next, the affected lines along with lines of context shall be written. Each
  non-empty unaffected line shall be written in the following format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot; %s&quot;, &lt;unaffected_line&gt;</b>
</pre>
</div>
<div class="Pp"></div>
where the contents of the unaffected line shall be taken from <i>file1</i>. It
  is implementation-defined whether an empty unaffected line is written as an
  empty line or a line containing a single &lt;space&gt; character. This line
  also represents the same line of <i>file2</i>, even though <i>file2</i>'s line
  may contain different contents due to the <b>&#x2212;b</b>. Deleted lines
  shall be written as:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;-%s&quot;, &lt;deleted_line&gt;</b>
</pre>
</div>
<div class="Pp"></div>
Added lines shall be written as:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;+%s&quot;, &lt;added_line&gt;</b>
</pre>
</div>
<div class="Pp"></div>
The order of lines written shall be the same as that of the corresponding file.
  A deleted line shall never be written immediately after an added line.
<div class="Pp"></div>
If <b>&#x2212;U</b> <i>n</i> is specified, the output shall contain no more than
  <i>n</i> consecutive unaffected lines; and if the output contains an affected
  line and this line is adjacent to up to <i>n</i> consecutive unaffected lines
  in the corresponding file, the output shall contain these unaffected lines.
  <b>&#x2212;u</b> shall act like <b>&#x2212;U</b>3.
<h1 class="Sh" title="Sh" id="STDERR"><a class="selflink" href="#STDERR">STDERR</a></h1>
The standard error shall be used only for diagnostic messages.
<h1 class="Sh" title="Sh" id="OUTPUT_FILES"><a class="selflink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXTENDED_DESCRIPTION"><a class="selflink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
None.
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
The following exit values shall be returned:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2002;0</dt>
  <dd class="It-tag">No differences were found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2002;1</dt>
  <dd class="It-tag">Differences were found.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&gt;1</dt>
  <dd class="It-tag">An error occurred.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="selflink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
Default.
<div class="Pp"></div>
<i>The following sections are informative.</i>
<h1 class="Sh" title="Sh" id="APPLICATION_USAGE"><a class="selflink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
If lines at the end of a file are changed and other lines are added, <i>diff</i>
  output may show this as a delete and add, as a change, or as a change and add;
  <i>diff</i> is not expected to know which happened and users should not care
  about the difference in output as long as it clearly shows the differences
  between the files.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
If <b>dir1</b> is a directory containing a directory named <b>x</b>, <b>dir2</b>
  is a directory containing a directory named <b>x</b>, <b>dir1/x</b> and
  <b>dir2/x</b> both contain files named <b>date.out</b>, and <b>dir2/x</b>
  contains a file named <b>y</b>, the command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>diff &#x2212;r dir1 dir2</b>
</pre>
</div>
<div class="Pp"></div>
could produce output similar to:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>Common subdirectories: dir1/x and dir2/x</b>
<b>Only in dir2/x: y</b>
<b>diff &#x2212;r dir1/x/date.out dir2/x/date.out</b>
<b>1c1</b>
<b>&lt; Mon Jul  2 13:12:16 PDT 1990</b>
<b>&#x2212;&#x2212;&#x2212;</b>
<b>&gt; Tue Jun 19 21:41:39 PDT 1990</b>
</pre>
</div>
<h1 class="Sh" title="Sh" id="RATIONALE"><a class="selflink" href="#RATIONALE">RATIONALE</a></h1>
The <b>&#x2212;h</b> option was omitted because it was insufficiently specified
  and does not add to applications portability.
<div class="Pp"></div>
Historical implementations employ algorithms that do not always produce a
  minimum list of differences; the current language about making every effort is
  the best this volume of POSIX.1&#x2010;2008 can do, as there is no metric that
  could be employed to judge the quality of implementations against any and all
  file contents. The statement ``This list should be minimal'' clearly implies
  that implementations are not expected to provide the following output when
  comparing two 100-line files that differ in only one character on a single
  line:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>1,100c1,100</b>
<b>all 100 lines from file1 preceded with &quot;&lt; &quot;</b>
<b>&#x2212;&#x2212;&#x2212;</b>
<b>all 100 lines from file2 preceded with &quot;&gt; &quot;</b>
</pre>
</div>
<div class="Pp"></div>
The ``Only in'' messages required when the <b>&#x2212;r</b> option is specified
  are not used by most historical implementations if the <b>&#x2212;e</b> option
  is also specified. It is required here because it provides useful information
  that must be provided to update a target directory hierarchy to match a source
  hierarchy. The ``Common subdirectories'' messages are written by System V and
  4.3 BSD when the <b>&#x2212;r</b> option is specified. They are allowed here
  but are not required because they are reporting on something that is the same,
  not reporting a difference, and are not needed to update a target hierarchy.
<div class="Pp"></div>
The <b>&#x2212;c</b> option, which writes output in a format using lines of
  context, has been included. The format is useful for a variety of reasons,
  among them being much improved readability and the ability to understand
  difference changes when the target file has line numbers that differ from
  another similar, but slightly different, copy. The <i>patch</i> utility is
  most valuable when working with difference listings using a context format.
  The BSD version of <b>&#x2212;c</b> takes an optional argument specifying the
  amount of context. Rather than overloading <b>&#x2212;c</b> and breaking the
  Utility Syntax Guidelines for <i>diff</i>, the standard developers decided to
  add a separate option for specifying a context diff with a specified amount of
  context (<b>&#x2212;C</b>). Also, the format for context <i>diff</i>s was
  extended slightly in 4.3 BSD to allow multiple changes that are within context
  lines from each other to be merged together. The output format contains an
  additional four &lt;asterisk&gt; characters after the range of affected lines
  in the first filename. This was to provide a flag for old programs (like old
  versions of <i>patch</i>) that only understand the old context format. The
  version of context described here does not require that multiple changes
  within context lines be merged, but it does not prohibit it either. The
  extension is upwards-compatible, so any vendors that wish to retain the old
  version of <i>diff</i> can do so by adding the extra four &lt;asterisk&gt;
  characters (that is, utilities that currently use <i>diff</i> and understand
  the new merged format will also understand the old unmerged format, but not
  <i>vice versa</i>).
<div class="Pp"></div>
The <b>&#x2212;u</b> and <b>&#x2212;U</b> options of GNU <i>diff</i> have been
  included. Their output format, designed by Wayne Davison, takes up less space
  than <b>&#x2212;c</b> and <b>&#x2212;C</b> format, and in many cases is easier
  to read. The format's timestamps do not vary by locale, so <i>LC_TIME</i> does
  not affect it. The format's line numbers are rendered with the <b>%1d</b>
  format, not <b>%d</b>, because the file format notation rules would allow
  extra &lt;blank&gt; characters to appear around the numbers.
<div class="Pp"></div>
The substitute command was added as an additional format for the
  <b>&#x2212;e</b> option. This was added to provide implementations with a way
  to fix the classic ``dot alone on a line'' bug present in many versions of
  <i>diff</i>. Since many implementations have fixed this bug, the standard
  developers decided not to standardize broken behavior, but rather to provide
  the necessary tool for fixing the bug. One way to fix this bug is to output
  two periods whenever a lone period is needed, then terminate the append
  command with a period, and then use the substitute command to convert the two
  periods into one period.
<div class="Pp"></div>
The BSD-derived <b>&#x2212;r</b> option was added to provide a mechanism for
  using <i>diff</i> to compare two file system trees. This behavior is useful,
  is standard practice on all BSD-derived systems, and is not easily
  reproducible with the <i>find</i> utility.
<div class="Pp"></div>
The requirement that <i>diff</i> not compare files in some circumstances, even
  though they have the same name, is based on the actual output of historical
  implementations. The specified behavior precludes the problems arising from
  running into FIFOs and other files that would cause <i>diff</i> to hang
  waiting for input with no indication to the user that <i>diff</i> was hung. An
  earlier version of this standard specified the output format more precisely,
  but in practice this requirement was widely ignored and the benefit of
  standardization seemed small, so it is now unspecified. In most common usage,
  <i>diff</i> <b>&#x2212;r</b> should indicate differences in the file
  hierarchies, not the difference of contents of devices pointed to by the
  hierarchies.
<div class="Pp"></div>
Many early implementations of <i>diff</i> require seekable files. Since the
  System Interfaces volume of POSIX.1&#x2010;2008 supports named pipes, the
  standard developers decided that such a restriction was unreasonable. Note
  also that the allowed filename <b>&#x2212;</b> almost always refers to a pipe.
<div class="Pp"></div>
No directory search order is specified for <i>diff</i>. The historical ordering
  is, in fact, not optimal, in that it prints out all of the differences at the
  current level, including the statements about all common subdirectories before
  recursing into those subdirectories.
<div class="Pp"></div>
The message:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<b></b>
<b>&quot;diff %s %s %s\n&quot;, &lt;</b><i>diff_options</i><b>&gt;, &lt;</b><i>filename1</i><b>&gt;, &lt;</b><i>filename2</i><b>&gt;</b>
</pre>
</div>
<div class="Pp"></div>
does not vary by locale because it is the representation of a command, not an
  English sentence.
<h1 class="Sh" title="Sh" id="FUTURE_DIRECTIONS"><a class="selflink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
None.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i><i>cmp</i></i>, <i><i>comm</i></i>, <i><i>ed</i></i>, <i><i>find</i></i>
<div class="Pp"></div>
The Base Definitions volume of POSIX.1&#x2010;2008, <i>Chapter 8</i>,
  <i>Environment Variables</i>, <i>Section 12.2</i>, <i>Utility Syntax
  Guidelines</i>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Portions of this text are reprinted and reproduced in electronic form from IEEE
  Std 1003.1, 2013 Edition, Standard for Information Technology -- Portable
  Operating System Interface (POSIX), The Open Group Base Specifications Issue
  7, Copyright (C) 2013 by the Institute of Electrical and Electronics
  Engineers, Inc and The Open Group. (This is POSIX.1-2008 with the 2013
  Technical Corrigendum 1 applied.) In the event of any discrepancy between this
  version and the original IEEE and The Open Group Standard, the original IEEE
  and The Open Group Standard is the referee document. The original Standard can
  be obtained online at http://www.unix.org/online.html .
<div style="height: 1.00em;">&#x00A0;</div>
Any typographical or formatting errors that appear in this page are most likely
  to have been introduced during the conversion of the source files to man page
  format. To report such errors, see
  https://www.kernel.org/doc/man-pages/reporting_bugs.html .</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</table>
</body>
</html>
