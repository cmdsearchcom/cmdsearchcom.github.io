<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>r.univar(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">r.univar(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">r.univar(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>r.univar</b> - Calculates univariate statistics from the non-null
  cells of a raster map.
<div>&#x00A0;</div>
Statistics include number of cells counted, minimum and maximum cell values,
  range, arithmetic mean, population variance, standard deviation, coefficient
  of variation, and sum.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
raster, statistics, univariate statistics, zonal statistics
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>r.univar</b>
<div>&#x00A0;</div>
<b>r.univar --help</b>
<div>&#x00A0;</div>
<b>r.univar</b> [-<b>getr</b>] <b>map</b>=<i>name</i>[,<i>name</i>,...]
  [<b>zones</b>= <i>name</i>] [<b>output</b>=<i>name</i>]
  [<b>percentile</b>=<i>float</i>[, <i>float</i>,...]]
  [<b>separator</b>=<i>character</i>] [-- <b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [--<b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print the stats in shell script style</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Calculate extended statistics</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Table output format instead of standard output format</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use the native resolution and extent of the raster map, instead of the
      current region</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>map</b>=<i>name[,</i><i>name</i>,...]
    <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of raster map(s)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>zones</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Raster map used for zoning, must be of type CELL</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output file (if omitted or &quot;-&quot; output to stdout)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>percentile</b>=<i>float[,</i><i>float</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Percentile to calculate (requires extended statistics flag)
    <div>&#x00A0;</div>
    Options: <i>0-100</i>
    <div>&#x00A0;</div>
    Default: <i>90</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>separator</b>=<i>character</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Field separator
    <div>&#x00A0;</div>
    Special characters: pipe, comma, space, tab, newline
    <div>&#x00A0;</div>
    Default: <i>pipe</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>r.univar</i> calculates the univariate statistics of one or several raster
  map(s). This includes the number of cells counted, minimum and maximum cell
  values, range, arithmetic mean, population variance, standard deviation,
  coefficient of variation, and sum. Statistics are calculated separately for
  every category/zone found in the <b>zones</b> input map if given. If the
  <b>-e</b> extended statistics flag is given the 1st quartile, median, 3rd
  quartile, and given <b>percentile</b> are calculated. If the <b>-g</b> flag is
  given the results are presented in a format suitable for use in a shell
  script. If the <b>-t</b> flag is given the results are presented in tabular
  format with the given field separator. The table can immediately be converted
  to a vector attribute table which can then be linked to a vector, e.g. the
  vector that was rasterized to create the <b>zones</b> input raster.
<div class="Pp"></div>
When multiple input maps are given to <i>r.univar</i>, the overall statistics
  are calculated. This is useful for a time series of the same variable, as well
  as for the case of a segmented/tiled dataset. Allowing multiple raster maps to
  be specified saves the user from using a temporary raster map for the result
  of <i>r.series</i> or <i>r.patch</i>.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
As with most GRASS raster modules, <i>r.univar</i> operates on the raster array
  defined by the current region settings, not the original extent and resolution
  of the input map. See <i>g.region</i>, but also the wiki page on the
  computational region to understand the impact of the region settings on the
  calculations.
<div class="Pp"></div>
This module can use large amounts of system memory when the <b>-e</b> extended
  statistics flag is used with a very large region setting. If the region is too
  large the module should exit gracefully with a memory allocation error. Basic
  statistics can be calculated using any size input region. Extended statistics
  can be calculated using <i>r.stats.quantile</i>.
<div class="Pp"></div>
Without a <b>zones</b> input raster, the <i>r.quantile</i> module will be
  significantly more efficient for calculating percentiles with large maps.
<div class="Pp"></div>
For calculating univariate statistics from a raster map based on vector polygon
  map and uploads statistics to new attribute columns, see <i>v.rast.stats</i>.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="Univariate_statistics"><a class="selflink" href="#Univariate_statistics">Univariate
  statistics</a></h2>
In this example, the raster map elevation in the North Carolina sample dataset
  is used to calculate univariate statistics:
<div>&#x00A0;</div>
<pre>
g.region raster=elevation -p
# standard output, along with extended statistics
r.univar -e elevation percentile=98
total null and non-null cells: 2025000
total null cells: 0
Of the non-null cells:
----------------------
n: 2025000
minimum: 55.5788
maximum: 156.33
range: 100.751
mean: 110.375
mean of absolute values: 110.375
standard deviation: 20.3153
variance: 412.712
variation coefficient: 18.4057 %
sum: 223510266.558102
1st quartile: 94.79
median (even number of cells): 108.88
3rd quartile: 126.792
98th percentile: 147.727
# script style output, along with extended statistics
r.univar -ge elevation percentile=98
n=2025000
null_cells=0
cells=2025000
min=55.5787925720215
max=156.329864501953
range=100.751071929932
mean=110.375440275606
mean_of_abs=110.375440275606
stddev=20.3153233205981
variance=412.712361620436
coeff_var=18.4056555243368
sum=223510266.558102
first_quartile=94.79
median=108.88
third_quartile=126.792
percentile_98=147.727
</pre>
<h2 class="Ss" title="Ss" id="Zonal_statistics"><a class="selflink" href="#Zonal_statistics">Zonal
  statistics</a></h2>
In this example, the raster polygon map basins in the North Carolina sample
  dataset is used to calculate raster statistics for zones for elevation raster
  map:
<div>&#x00A0;</div>
<pre>
g.region raster=basins -p
</pre>
This will set and print computational region in the format:
<div>&#x00A0;</div>
<pre>
projection: 99 (Lambert Conformal Conic)
zone:       0
datum:      nad83
ellipsoid:  a=6378137 es=0.006694380022900787
north:      228500
south:      215000
west:       630000
east:       645000
nsres:      10
ewres:      10
rows:       1350
cols:       1500
cells:      2025000
</pre>
Check basin&#x2019;s IDs using:
<div>&#x00A0;</div>
<pre>
r.category basins
</pre>
This will print them in the format:
<div>&#x00A0;</div>
<pre>
2
4
6
8
10
12
14
16
18
20
22
24
26
28
30
</pre>
Visualization of them underlying elevation map can be created as:
<div>&#x00A0;</div>
<pre>
d.mon wx0
d.rast map=elevation
r.colors map=elevation color=grey
d.rast map=basins
r.colors map=basins color=bgyr
d.legend raster=basins use=2,4,6,8,10,12,14,16,18,20,22,24,26,28,30
d.barscale
</pre>
<div>&#x00A0;</div>
<i>Figure: Zones (basins, opacity: 60%) with underlying elevation map</i> <i>for
  North Carolina sample dataset.</i>
<div class="Pp"></div>
Then statistics for elevation can be calculated separately for every zone, i.e.
  basin found in the <b>zones</b> parameter:
<div>&#x00A0;</div>
<pre>
r.univar -t map=elevation zones=basins separator=comma \
         output=basin_elev_zonal.csv
</pre>
This will print information in the format:
<div>&#x00A0;</div>
<pre>
zone,label,non_null_cells,null_cells,min,max,range,mean,mean_of_abs,
stddev,variance,coeff_var,sum,sum_abs2,,116975,0,55.5787925720215,
133.147018432617,77.5682258605957,92.1196971445722,92.1196971445722,
15.1475301152556,229.447668592576,16.4433129773355,10775701.5734863,
10775701.57348634,,75480,0,61.7890930175781,110.348838806152,
48.5597457885742,83.7808205765268,83.7808205765268,11.6451777476995,
135.610164775515,13.8995747088232,6323776.33711624,6323776.33711624
6,,1137,0,66.9641571044922,83.2070922851562,16.2429351806641,
73.1900814395257,73.1900814395257,4.15733292896409,17.2834170822492,
5.68018623179036,83217.1225967407,83217.12259674078,,80506,
0,67.4670791625977,147.161514282227, ...
</pre>
Comma Separated Values (CSV) file is best viewed through a spreadsheet program
  such as Microsoft Excel, Libre/Open Office Calc or Google Docs:
<div>&#x00A0;</div>
<i>Figure: Raster statistics for zones (basins, North Carolina sample</i>
  <i>dataset) viewed through Libre/Open Office Calc.</i>
<h1 class="Sh" title="Sh" id="TODO"><a class="selflink" href="#TODO">TODO</a></h1>
To be implemented <i>mode, skewness, kurtosis</i>.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>g.region,</i> <i>r3.univar,</i> <i>r.mode,</i> <i>r.quantile,</i>
  <i>r.series,</i> <i>r.stats,</i> <i>r.stats.quantile,</i>
  <i>r.stats.zonal,</i> <i>r.statistics,</i> <i>v.rast.stats,</i>
  <i>v.univar</i> <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Hamish Bowman, Otago University, New Zealand
<div>&#x00A0;</div>
Extended statistics by Martin Landa
<div>&#x00A0;</div>
Multiple input map support by Ivan Shmakov
<div>&#x00A0;</div>
Zonal loop by Markus Metz
<div class="Pp"></div>
<i>Last changed: $Date: 2016-12-11 19:03:35 +0100 (Sun, 11 Dec 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: r.univar source code (history)
<div class="Pp"></div>
Main index | Raster index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
