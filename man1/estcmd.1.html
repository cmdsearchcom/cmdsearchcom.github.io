<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:07:42 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ESTCMD(1) Hyper Estraier ESTCMD(1)</p>

<p style="margin-top: 1em">NAME <br>
estcmd - command line interface of the core API</p>

<p style="margin-top: 1em">SYNOPSIS <br>
estcmd create [-tr] [-apn|-acc] [-xs|-xl|-xh|-xh2|-xh3]
[-sv|-si|-sa] [-attr name type] db</p>

<p style="margin-top: 1em">estcmd put [-tr] [-cl] [-ws]
[-apn|-acc] [-xs|-xl|-xh||-xh2|-xh3] [-sv|-si|-sa] db
[file]</p>

<p style="margin-top: 1em">estcmd out [-cl] [-pc enc] db
expr</p>

<p style="margin-top: 1em">estcmd edit [-pc enc] db expr
name [value]</p>

<p style="margin-top: 1em">estcmd get [-nl|-nb] [-pidx
path] [-pc enc] db expr [attr]</p>

<p style="margin-top: 1em">estcmd list [-nl|-nb] [-lp]
db</p>

<p style="margin-top: 1em">estcmd uriid [-nl|-nb] [-pidx
path] [-pc enc] db expr</p>

<p style="margin-top: 1em">estcmd meta db [name
[value]]</p>

<p style="margin-top: 1em">estcmd inform [-nl|-nb] db</p>

<p style="margin-top: 1em">estcmd optimize [-onp] [-ond]
db</p>

<p style="margin-top: 1em">estcmd merge [-cl] db target</p>

<p style="margin-top: 1em">estcmd repair [-rst|-rsh] db</p>

<p style="margin-top: 1em">estcmd search [-nl|-nb] [-pidx
path] [-ic enc] [-vu|-va|-vf|-vs|-vh|-vx|-dd] [-sn wnum hnum
anum] [-kn num] [-um] [-ec rn] [-gs|-gf|-ga] [-cd] [-ni]
[-sf|-sfr|-sfu|-sfi] [-hs] <br>
[-attr expr] [-ord expr] [-max num] [-sk num] [-aux num]
[-dis name] [-sim id] db [phrase]</p>

<p style="margin-top: 1em">estcmd gather [-tr] [-cl] [-ws]
[-no] [-fe|-ft|-fh|-fm] [-fx sufs cmd] [-fz] [-fo] [-rm
sufs] [-ic enc] [-il lang] [-bc] [-lt num] [-lf num] [-pc
enc] [-px name] [-aa name value] <br>
[-apn|-acc] [-xs|-xl|-xh|-xh2|-xh3] [-sv|-si|-sa] [-ss name]
[-sd] [-cm] [-cs num] [-ncm] [-kn num] [-um] db
[file|dir]</p>

<p style="margin-top: 1em">estcmd purge [-cl] [-no] [-fc]
[-pc enc] [-attr expr] db [prefix]</p>

<p style="margin-top: 1em">estcmd extkeys [-no] [-fc]
[-dfdb file] [-ncm] [-ni] [-kn num] [-um] [-attr expr] db
[prefix]</p>

<p style="margin-top: 1em">estcmd words [-nl|-nb] [-dfdb
file] [-kw|-kt] db</p>

<p style="margin-top: 1em">estcmd draft [-ft|-fh|-fm] [-ic
enc] [-il lang] [-bc] [-lt num] [-kn num] [-um] [file]</p>

<p style="margin-top: 1em">estcmd break [-ic enc] [-il
lang] [-apn|-acc] [-wt] [file]</p>

<p style="margin-top: 1em">estcmd iconv [-ic enc] [-il
lang] [-oc enc] [file]</p>

<p style="margin-top: 1em">estcmd regex [-inv] [-repl str]
expr [file]</p>

<p style="margin-top: 1em">estcmd scandir [-tf|-td]
[-pa|-pu] [dir]</p>

<p style="margin-top: 1em">estcmd multi [-db db] [-nl|-nb]
[-ic enc] [-gs|-gf|-ga] [-cd] [-ni] [-sf|-sfr|-sfu|-sfi]
[-hs] [-hu] [-attr expr] [-ord expr] [-max num] [-sk num]
[-aux num] [-dis name] [phrase]</p>

<p style="margin-top: 1em">estcmd randput
[-ren|-rla|-reu|-ror|-rjp|-rch] [-cs num] db dnum</p>

<p style="margin-top: 1em">estcmd wicked db dnum</p>

<p style="margin-top: 1em">estcmd regression db</p>

<p style="margin-top: 1em">estcmd version</p>

<p style="margin-top: 1em">DESCRIPTION <br>
estcmd is an aggregation of sub commands. The name of a sub
command is specified by the first argument. Other arguments
are parsed according to each sub command. The argument <br>
db specifies the path of an index.</p>

<p style="margin-top: 1em">estcmd create [-tr] [-apn|-acc]
[-xs|-xl|-xh|-xh2|-xh3] [-sv|-si|-sa] [-attr name type] db
<br>
Create an index. <br>
If -tr is specified, a new index is created regardless if
one exists. <br>
If -apn is specified, N-gram analysis is performed against
European text also. <br>
If -acc is specified, character category analysis is
performed instead of N-gram analysis. <br>
If -xs is specified, the index is tuned to register less
than 50000 documents. <br>
If -xl is specified, the index is tuned to register more
than 300000 documents. <br>
If -xh is specified, the index is tuned to register more
than 1000000 documents. <br>
If -xh2 is specified, the index is tuned to register more
than 5000000 documents. <br>
If -xh3 is specified, the index is tuned to register more
than 10000000 documents. <br>
If -sv is specified, scores are stored as void. <br>
If -si is specified, scores are stored as 32-bit integer.
<br>
If -sa is specified, scores are stored as-is and marked not
to be tuned when search. <br>
-attr specifies an attribute index and its data type. This
option can be specified multiple times.</p>

<p style="margin-top: 1em">estcmd put [-tr] [-cl]
[-apn|-acc] [-xs|-xl|-xh|-xh2|-xh3] [-sv|-si|-sa] db [file]
<br>
Register a document of document draft to an index. <br>
file specifies a target file. If it is omitted, the standard
input is read. <br>
If -tr is specified, a new index is created regardless if
one exists. <br>
If -cl is specified, regions of a overwritten document are
cleaned up. <br>
If -ws is specified, scores are weighted statically with
score weighting attribute. <br>
If -apn is specified, N-gram analysis is performed against
European text also. <br>
If -acc is specified, character category analysis is
performed instead of N-gram analysis. <br>
If -xs is specified, the index is tuned to register less
than 50000 documents. <br>
If -xl is specified, the index is tuned to register more
than 300000 documents. <br>
If -xh is specified, the index is tuned to register more
than 1000000 documents. <br>
If -xh2 is specified, the index is tuned to register more
than 5000000 documents. <br>
If -xh3 is specified, the index is tuned to register more
than 10000000 documents. <br>
If -sv is specified, scores are stored as void. <br>
If -si is specified, scores are stored as 32-bit integer.
<br>
If -sa is specified, scores are stored as-is and marked not
to be tuned when search.</p>

<p style="margin-top: 1em">estcmd out [-pc enc] [-cl] db
expr <br>
Remove information of a document from an index. <br>
expr specifies the ID number, the URI, or the local path of
a document. <br>
If -cl is specified, regions of the document are cleaned up.
<br>
-pc specifies the encoding of file paths. By default, it is
ISO-8859-1.</p>

<p style="margin-top: 1em">estcmd edit [-pc enc] db expr
name [value] <br>
Edit an attribute of a document in an index. <br>
expr specifies the ID number, the URI, or the local path of
a document. <br>
name specifies the name of an attribute. <br>
value specifies the value of the attribute. If it is
omitted, the attribute is removed. <br>
-pc specifies the encoding of the file path and the
attribute value. By default, it is ISO-8859-1.</p>

<p style="margin-top: 1em">estcmd get [-nl|-nb] [-pidx
path] [-pc enc] db expr [attr] <br>
Output document draft of a document in an index. <br>
expr specifies the ID number, the URI, or the local path of
a document. <br>
If attr is specified, only the value of the attribute is
output. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking. <br>
-pidx specifies the path of a pseudo index. This option can
be specified multiple times. <br>
-pc specifies the encoding of file paths. By default, it is
ISO-8859-1.</p>

<p style="margin-top: 1em">estcmd list [-nl|-nb] [-lp] db
<br>
Output a list of all document in an index. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking. <br>
If -lp is specified, local path equivalent to URL of
&quot;file://&quot; is output.</p>

<p style="margin-top: 1em">estcmd uriid [-nl|-nb] [-pidx
path] [-pc enc] db expr <br>
Output the ID number of a document specified by URI. <br>
expr specifies the URI or the local path of a document. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking. <br>
-pidx specifies the path of a pseudo index. This option can
be specified multiple times. <br>
-pc specifies the encoding of file paths. By default, it is
ISO-8859-1.</p>

<p style="margin-top: 1em">estcmd meta db [name [value]]
<br>
Handle meta data. <br>
name specifies the name of a piece of meta data. If it is
omitted, a list of all names is output. <br>
value specifies the value of the meta data to be recorded.
If it is omitted, the current value is output. If it is an
empty string, the meta data is removed.</p>

<p style="margin-top: 1em">estcmd inform [-nl|-nb] db <br>
Output the number of documents and the number of unique
words in an index. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking.</p>

<p style="margin-top: 1em">estcmd optimize [-onp] [-ond] db
<br>
Optimize an index and clean up dispensable regions. <br>
If -onp is specified, it is omitted to clean up dispensable
regions. <br>
If -ond is specified, it is omitted to optimize the database
files.</p>

<p style="margin-top: 1em">estcmd merge [-cl] db target
<br>
Merge another index. <br>
target specifies the path of another index. <br>
If -cl is specified, regions of overwritten documents are
cleaned up.</p>

<p style="margin-top: 1em">estcmd repair [-rst|-rsh] db
<br>
Repair a broken index. <br>
If -rst is specified, strict consistency check is performed.
<br>
If -rsh is specified, consistency check is omitted.</p>

<p style="margin-top: 1em">estcmd search [-nl|-nb] [-pidx
path] [-ic enc] [-vu|-va|-vf|-vs|-vh|-vx|-dd] [-sn wnum hnum
anum] [-kn num] [-um] [-ec rn] [-gs|-gf|-ga] [-cd] [-ni]
[-sf|-sfr|-sfu|-sfi] [-hs] <br>
[-attr expr] [-ord expr] [-max num] [-sk num] [-aux num]
[-dis name] [-sim id] db [phrase] <br>
Search an index for documents. <br>
phrase specifies the search phrase. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking. <br>
-pidx specifies the path of a pseudo index. This option can
be specified multiple times. <br>
-ic specifies the input encoding. By default, it is UTF-8.
<br>
If -vu is specified, TSV of ID number and URI are output.
<br>
If -va is specified, multipart format including attributes
is output. <br>
If -vf is specified, multipart format including document
draft is output. <br>
If -vs is specified, multipart format including attributes
and snippets is output. <br>
If -vh is specified, human readable format including
attributes and snippets is output. <br>
If -vx is specified, XML including including attributes and
snippets is output. <br>
If -dd is specified, document draft data are dumped and
saved into separated files. <br>
-sn specifies the number of whole width of snippet and width
of strings picked up from the beginning of the text and
width of strings picked up around each highlighted <br>
word. <br>
-kn specifies the number of keywords to be extracted. By
default, keyword extraction is not performed. <br>
If -um is specified, morphological analyzers are used for
keyword extraction. <br>
-ec specifies lower limit of similarity eclipse. <br>
If -gs is specified, every key of N-gram is checked. By
default, it is alternately. <br>
If -gf is specified, keys of N-gram are checked every three.
<br>
If -ga is specified, keys of N-gram are checked every four.
<br>
If -cd is specified, whether documents match the search
phrase definitely is checked. <br>
If -ni is specified, TF-IDF tuning is omitted. <br>
If -sf is specified, the phrase is treated as a simplified
form. <br>
If -sfr is specified, the phrase is treated as a rough form.
<br>
If -sfu is specified, the phrase is treated as a union form.
<br>
If -sfi is specified, the phrase is treated as an
intersection form. <br>
If -hs is specified, score information is output as an
attribute. <br>
-attr specifies an attribute search condition. This option
can be specified multiple times. <br>
-ord specifies the order expression. By default, it is
descending by score. <br>
-max specifies the maximum number of shown documents.
Negative means unlimited. By default, it is 10. <br>
-sk specifies the number of documents to be skipped. By
default, it is 0. <br>
-aux specifies permission to adopt result of the auxiliary
index. If it is not more than 0, the auxiliary index is not
used. By default, it is 32. <br>
-dis specifies the name of the distinct attribute. <br>
-sim specifies the ID number of the seed document for
similarity search.</p>

<p style="margin-top: 1em">estcmd gather [-tr] [-cl] [-ws]
[-no] [-fe|-ft|-fh|-fm] [-fx sufs cmd] [-fz] [-fo] [-rm
sufs] [-ic enc] [-il lang] [-bc] [-lt num] [-lf num] [-pc
enc] [-px name] [-aa name value] <br>
[-apn|-acc] [-xs|-xl|-xh|-xh2|-xh3] [-sv|-si|-sa] [-ss name]
[-sd] [-cm] [-cs num] [-ncm] [-kn num] [-um] db [file|dir]
<br>
Scan the local file system and register documents into an
index. <br>
If the third argument is the name of a file, a list of paths
of target documents are read from it. If it is
&quot;-&quot;, the standard input is specified. <br>
If the third argument is the name of a directory. All files
under the directory are treated as target documents. <br>
If -tr is specified, a new index is created regardless if
one exists. <br>
If -cl is specified, regions of overwritten documents are
cleaned up. <br>
If -ws is specified, scores are weighted statically with
score weighting attribute. <br>
If -no is specified, operations are printed but not executed
actually. <br>
If -fe is specified, target files are treated as document
draft. By default, the format is detected by the suffix of
each document. <br>
If -ft is specified, target files are treated as plain text.
<br>
If -fh is specified, target files are treated as HTML. <br>
If -fm is specified, target files are treated as MIME. <br>
If -fx is specified, target files with the specified
suffixes are processed by the specified outer command.
&quot;*&quot; matches any file. If the command is leaded by
&quot;T@&quot;, the <br>
output of the command is treated as plain text. If the
command is leaded by &quot;H@&quot;, the output of the
command is treated as HTML. If the command is leaded by
&quot;M@&quot;, the <br>
output of the command is treated as MIME. Else, the output
is treated as document draft. This option can be specified
multiple times. <br>
If -fz is specified, documents which do not corresponding to
the condition of -fx are ignored. <br>
If -fo is specified, target files are not read. It is useful
for efficient process of the outer command. <br>
If -rm is specified, target files with the specified
suffixes are removed. &quot;*&quot; matches any file. This
option can be specified multiple times. <br>
-ic specifies the input encoding. By default, it is detected
automatically. <br>
-il specifies the preferred input language. By default,
English is preferred. <br>
If -bc is specified, binary files are detected and ignored.
<br>
-lt specifies the text size limitation by kilo bytes. By
default, it is 128KB. If it is negative, the size is
unlimited. <br>
-lf specifies the file size limitation by mega bytes. By
default, it is 32MB. If it is negative, the size is
unlimited. <br>
-pc specifies the encoding of file paths. By default, it is
ISO-8859-1. <br>
-px specifies the name of an attribute read from the list of
paths. As the list of paths can be in TSV format, the first
field is treated as the path of a target docu&acirc; <br>
ment, the second field and the followers are definitions of
attribute values. -px specifies the name of each values of
the second field and the followers. This option <br>
can be specified multiple times. <br>
-aa specifies the name and the value of an additional
attribute. This option can be specified multiple times. <br>
If -apn is specified, N-gram analysis is performed against
European text also. <br>
If -acc is specified, character category analysis is
performed instead of N-gram analysis. <br>
If -xs is specified, the index is tuned to register less
than 50000 documents. <br>
If -xl is specified, the index is tuned to register more
than 300000 documents. <br>
If -xh is specified, the index is tuned to register more
than 1000000 documents. <br>
If -xh2 is specified, the index is tuned to register more
than 5000000 documents. <br>
If -xh3 is specified, the index is tuned to register more
than 10000000 documents. <br>
If -sv is specified, scores are stored as void. <br>
If -si is specified, scores are stored as 32-bit integer.
<br>
If -sa is specified, scores are stored as-is and marked not
to be tuned when search. <br>
-ss specifies the name of an attribute for substitute score.
<br>
If -sd is specified, the modification date of each file is
recorded as an attribute. <br>
If -cm is specified, documents whose modification date has
not changed are ignored. <br>
-cs specifies the size of cache memory by mega bytes. By
default, it is 64MB. <br>
If -ncm is specified, checking availability of the virtual
memory is omitted. <br>
-kn specifies the number of keywords to be extracted. By
default, keyword extraction is not performed. <br>
If -um is specified, morphological analyzers are used for
keyword extraction.</p>

<p style="margin-top: 1em">estcmd purge [-cl] [-no] [-fc]
[-pc enc] [-attr expr] db [prefix] <br>
Purge information of documents which do not exist on the
file system. <br>
If prefix is specified, only documents whose URIs are begins
with it. It can be specified by the local path of a
directory. <br>
If -cl is specified, regions of the deleted documents are
cleaned up. <br>
If -no is specified, operations are printed but not executed
actually. <br>
If -fc is specified, information of all target documents are
deleted. <br>
-pc specifies the encoding of file paths. By default, it is
ISO-8859-1. <br>
-attr specifies an attribute search condition. This option
can be specified multiple times.</p>

<p style="margin-top: 1em">estcmd extkeys [-no] [-fc]
[-dfdb file] [-ncm] [-ni] [-kn num] [-um] [-attr expr] db
[prefix] <br>
Create a database of keywords extracted from documents. <br>
If prefix is specified, only documents whose URIs are begins
with it. <br>
If -no is specified, operations are printed but not executed
actually. <br>
If -fc is specified, all target documents are processed
whichever they have existing records or not. <br>
-dfdb specifies an outher database of document frequency. By
default, document frequency is calculated dynamically
according to the index. <br>
If -ncm is specified, checking availability of the virtual
memory is omitted. <br>
If -ni is specified, TF-IDF tuning is omitted. <br>
-kn specifies the number of keywords to be extracted. By
default, it is 32. <br>
If -um is specified, morphological analyzers are used for
keyword extraction. <br>
-attr specifies an attribute search condition. This option
can be specified multiple times.</p>

<p style="margin-top: 1em">estcmd words [-nl|-nb] [-dfdb
file] [-kw|-kt] db <br>
Output a list of all unique words and each record size which
is treated as docuemnt frequency. <br>
If -nl is specified, the index is opened without file
locking. <br>
If -nb is specified, file locking is performed without
blocking. <br>
-dfdb specifies an outer database where the result is
stored. By default, the result is output to the standard
output as TSV. If the outer database already exists, the
<br>
value of each record is incremented. <br>
If -kw is specified, keywords and numbers of corresponding
documents are output. <br>
If -kt is specified, keywords and their related terms are
output.</p>

<p style="margin-top: 1em">estcmd draft [-ft|-fh|-fm] [-ic
enc] [-il lang] [-bc] [-lt num] [-kn num] [-um] [file] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd break [-ic enc] [-il
lang] [-apn|-acc] [-wt] [file] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd iconv [-ic enc] [-il
lang] [-oc enc] [file] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd regex [-inv] [-repl str]
expr [file] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd scandir [-tf|-td]
[-pa|-pu] [dir] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd multi [-db db] [-nl|-nb]
[-ic enc] [-gs|-gf|-ga] [-cd] [-ni] [-sf|-sfr|-sfu|-sfi]
[-hs] [-hu] [-attr expr] [-ord expr] [-max num] [-sk num]
[-aux num] [-dis name] [phrase] <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd randput
[-ren|-rla|-reu|-ror|-rjp|-rch] [-cs num] db dnum <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd wicked db dnum <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd regression db <br>
For test and debug.</p>

<p style="margin-top: 1em">estcmd version <br>
Show the version information.</p>

<p style="margin-top: 1em">All sub commands return 0 if the
operation is success, else return 1. As for put, out,
gather, purge, randput, wicked, and regression, they finish
with closing the database when <br>
they catch the signal 1 (SIGHUP), 2 (SIGINT), 3 (SIGQUIT),
13 (SIGPIPE), or 15 (SIGTERM).</p>

<p style="margin-top: 1em">The data type of attribute
indexes specified by -attr option of create sub command
should be &quot;seq&quot; for sequential type,
&quot;str&quot; for string type, or &quot;num&quot; for
number type.</p>

<p style="margin-top: 1em">Each pseudo index specified by
-pidx option of search sub command and so on is a directory
containing files of document draft. If you search a main
index with pseudo indexes, <br>
meta search of the main index and pseudo indexes is
performed.</p>

<p style="margin-top: 1em">The encoding name specified by
-ic option should be such name registered to IETF as UTF-8,
ISO-8859-1, and so on. The language name specified by -il
option should be one of &quot;en&quot; <br>
(English), &quot;ja&quot; (Japanese, &quot;zh&quot;
(Chinese), &quot;ko&quot; (Korean).</p>

<p style="margin-top: 1em">The outer command specified by
-fx option of gather receives the path of the target
document by the first argument and the path for output by
the second argument. The original <br>
path of the target document is given as the value of the
environment variable &lsquo;ESTORIGFILE&rsquo;.</p>

<p style="margin-top: 1em">Note that similarity search is
very slow, by default. To improve the performance of
similarity search, running &quot;estcmd extkeys&quot;
beforehand is strongly recommended.</p>

<p style="margin-top: 1em">SEE ALSO <br>
estconfig(1), estmaster(1), estcall(1), estwaver(1),
estraier(3), estnode(3)</p>

<p style="margin-top: 1em">Please see
http://hyperestraier.sourceforge.net/uguide-en.html for
detail.</p>

<p style="margin-top: 1em">Man Page 2007-03-06
ESTCMD(1)</p>
<hr>
</body>
</html>
