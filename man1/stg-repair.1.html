<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>STG-REPAIR(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">STG-REPAIR(1)</td>
    <td class="head-vol">StGit Manual</td>
    <td class="head-rtitle">STG-REPAIR(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
stg-repair - Fix StGit metadata if branch was modified with git commands
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<i>stg</i> repair
</pre>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
If you modify an StGit stack (branch) with some git commands &#x2014; such as
  commit, pull, merge, and rebase &#x2014; you will leave the StGit metadata in
  an inconsistent state. In that situation, you have two options:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.Use &quot;stg undo&quot; to undo the effect
  of the git commands. (If you know what you are doing and want more control,
  &quot;git reset&quot; or similar will work too.)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.Use &quot;stg repair&quot;. This will fix
  up the StGit metadata to accommodate the modifications to the branch.
  Specifically, it will do the following:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;If you have made regular git commits
  on top of your stack of StGit patches, &quot;stg repair&quot; makes new StGit
  patches out of them, preserving their contents.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;However, merge commits cannot become
  patches; if you have committed a merge on top of your stack,
  &quot;repair&quot; will simply mark all patches below the merge unapplied,
  since they are no longer reachable. If this is not what you want, use
  &quot;stg undo&quot; to get rid of the merge and run &quot;stg repair&quot;
  again.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The applied patches are supposed to be
  precisely those that are reachable from the branch head. If you have used e.g.
  &quot;git reset&quot; to move the head, some applied patches may no longer be
  reachable, and some unapplied patches may have become reachable. &quot;stg
  repair&quot; will correct the appliedness of such patches.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
&quot;stg repair&quot; will fix these inconsistencies reliably, so as long
as you like what it does, you have no reason to avoid causing
them in the first place. For example, you might find it
convenient to make commits with a graphical tool and then have
&quot;stg repair&quot; make proper patches of the commits.
</pre>
</div>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
If using git commands on the stack was a mistake, running &quot;stg repair&quot;
  is <i>not</i> what you want. In that case, what you want is option (1) above.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="STGIT"><a class="selflink" href="#STGIT">STGIT</a></h1>
Part of the StGit suite - see <b>stg</b>(1)
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">02/12/2017</td>
    <td class="foot-os">StGit</td>
  </tr>
</table>
</body>
</html>
