<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:15 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>STG-REPAIR(1) StGit Manual STG-REPAIR(1)</p>

<p style="margin-top: 1em">NAME <br>
stg-repair - Fix StGit metadata if branch was modified with
git commands</p>

<p style="margin-top: 1em">SYNOPSIS <br>
stg repair</p>

<p style="margin-top: 1em">DESCRIPTION <br>
If you modify an StGit stack (branch) with some git commands
&acirc; such as commit, pull, merge, and rebase &acirc; you
will leave the StGit metadata in an inconsistent state. In
that <br>
situation, you have two options:</p>

<p style="margin-top: 1em">1. Use &quot;stg undo&quot; to
undo the effect of the git commands. (If you know what you
are doing and want more control, &quot;git reset&quot; or
similar will work too.)</p>

<p style="margin-top: 1em">2. Use &quot;stg repair&quot;.
This will fix up the StGit metadata to accommodate the
modifications to the branch. Specifically, it will do the
following:</p>

<p style="margin-top: 1em">&Acirc;&middot; If you have made
regular git commits on top of your stack of StGit patches,
&quot;stg repair&quot; makes new StGit patches out of them,
preserving their contents.</p>

<p style="margin-top: 1em">&Acirc;&middot; However, merge
commits cannot become patches; if you have committed a merge
on top of your stack, &quot;repair&quot; will simply mark
all patches below the merge unapplied, since <br>
they are no longer reachable. If this is not what you want,
use &quot;stg undo&quot; to get rid of the merge and run
&quot;stg repair&quot; again.</p>

<p style="margin-top: 1em">&Acirc;&middot; The applied
patches are supposed to be precisely those that are
reachable from the branch head. If you have used e.g.
&quot;git reset&quot; to move the head, some applied patches
<br>
may no longer be reachable, and some unapplied patches may
have become reachable. &quot;stg repair&quot; will correct
the appliedness of such patches.</p>

<p style="margin-top: 1em">&quot;stg repair&quot; will fix
these inconsistencies reliably, so as long <br>
as you like what it does, you have no reason to avoid
causing <br>
them in the first place. For example, you might find it <br>
convenient to make commits with a graphical tool and then
have <br>
&quot;stg repair&quot; make proper patches of the
commits.</p>

<p style="margin-top: 1em">Note <br>
If using git commands on the stack was a mistake, running
&quot;stg repair&quot; is not what you want. In that case,
what you want is option (1) above.</p>

<p style="margin-top: 1em">STGIT <br>
Part of the StGit suite - see stg(1)</p>

<p style="margin-top: 1em">StGit 02/12/2017
STG-REPAIR(1)</p>
<hr>
</body>
</html>
