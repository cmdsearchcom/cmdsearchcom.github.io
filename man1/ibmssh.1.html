<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:18:00 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>IBMSSH(1) IB MANAGEMENT SIMULATOR IBMSSH(1)</p>

<p style="margin-top: 1em">NAME <br>
ibmssh IB MANAGEMENT SIMULATOR - Extentended TCL shell</p>

<p style="margin-top: 1em">DESCRIPTION <br>
ibmssh is a TCL shell extended with interface for the IB
Management Simulator facilities. Normally you will not run
this shell directly - but instead it will be invoked by the
<br>
IBMgtSim utility. However, in order to write simulation
flows that interacts closely with the simulated model, a
simulation flow should be provided. This flow is loaded by
<br>
IBMgtSim and excersize the API provided by this shell.</p>

<p style="margin-top: 1em">The following sub sections
provide detailed definition for those objects and API.</p>

<p style="margin-top: 1em">IBMgtSim Constants <br>
These constants are provided by IBMgtSim</p>

<p style="margin-top: 1em">Massage Manager Log Verbosity
Flags</p>

<p style="margin-top: 1em">[ Constant : int ] $MsgShowFatal
= 0x01 <br>
[ Constant : int ] $MsgShowError = 0x02 <br>
[ Constant : int ] $MsgShowWarning = 0x04 <br>
[ Constant : int ] $MsgShowInfo = 0x08 <br>
[ Constant : int ] $MsgShowVerbose = 0x10 <br>
[ Constant : int ] $MsgShowContext = 0x20 <br>
[ Constant : int ] $MsgShowSource = 0x40 <br>
[ Constant : int ] $MsgShowTime = 0x80 <br>
[ Constant : int ] $MsgShowModule = 0x100 <br>
[ Constant : int ] $MsgShowMads = 0x200 <br>
[ Constant : int ] $MsgShowFrames = 0x400 <br>
[ Constant : int ] $MsgShowAll = 0xffff <br>
[ Constant : int ] $MsgDefault = 0x62f</p>

<p style="margin-top: 1em">Message Manager Objects <br>
class msgManager</p>

<p style="margin-top: 1em">This is the Message Manager
class</p>

<p style="margin-top: 1em">[ Member : returns int ]
getVerbLevel ?module? <br>
[ Member : returns int ] clrVerbLevel ?module? <br>
[ Member : returns void ] setVerbLevel vl ?module? <br>
[ Member : returns int ] outstandingMsgCount ?vl? <br>
[ Member : returns string ] outstandingMsgs ?vl? <br>
[ Member : returns string ] getNextMessage <br>
[ Member : returns void ] nullOutstandingMsgs <br>
[ Member : returns int ] setLogFile fileName</p>

<p style="margin-top: 1em">Random Manager Functions <br>
[ returns float ] rmRand <br>
obtain a random number in the range 0.0 - 1.0</p>

<p style="margin-top: 1em">[ returns int ] rmSeed seed <br>
initialize the seed for the random manager</p>

<p style="margin-top: 1em">class ib_node_info_t</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -base_version <br>
[ Member data: returns uint8_t * ] -class_version <br>
[ Member data: returns uint8_t * ] -node_type <br>
[ Member data: returns uint8_t * ] -num_ports <br>
[ Member data: returns ib_net64_t * ] -sys_guid <br>
[ Member data: returns ib_net64_t * ] -node_guid <br>
[ Member data: returns ib_net64_t * ] -port_guid <br>
[ Member data: returns ib_net16_t * ] -partition_cap <br>
[ Member data: returns ib_net16_t * ] -device_id <br>
[ Member data: returns ib_net32_t * ] -revision <br>
[ Member data: returns ib_net32_t * ]
-port_num_vendor_id</p>

<p style="margin-top: 1em">class ib_switch_info_t</p>

<p style="margin-top: 1em">[ Member data: returns
ib_net16_t * ] -lin_cap <br>
[ Member data: returns ib_net16_t * ] -rand_cap <br>
[ Member data: returns ib_net16_t * ] -mcast_cap <br>
[ Member data: returns ib_net16_t * ] -lin_top <br>
[ Member data: returns uint8_t * ] -def_port <br>
[ Member data: returns uint8_t * ] -def_mcast_pri_port <br>
[ Member data: returns uint8_t * ] -def_mcast_not_port <br>
[ Member data: returns uint8_t * ] -life_state <br>
[ Member data: returns ib_net16_t * ] -lids_per_port <br>
[ Member data: returns ib_net16_t * ] -enforce_cap <br>
[ Member data: returns uint8_t * ] -flags</p>

<p style="margin-top: 1em">class ib_port_info_t</p>

<p style="margin-top: 1em">[ Member data: returns
ib_net64_t * ] -m_key <br>
[ Member data: returns ib_net64_t * ] -subnet_prefix <br>
[ Member data: returns ib_net16_t * ] -base_lid <br>
[ Member data: returns ib_net16_t * ] -master_sm_base_lid
<br>
[ Member data: returns ib_net32_t * ] -capability_mask <br>
[ Member data: returns ib_net16_t * ] -diag_code <br>
[ Member data: returns ib_net16_t * ] -m_key_lease_period
<br>
[ Member data: returns uint8_t * ] -local_port_num <br>
[ Member data: returns uint8_t * ] -link_width_enabled <br>
[ Member data: returns uint8_t * ] -link_width_supported
<br>
[ Member data: returns uint8_t * ] -link_width_active <br>
[ Member data: returns uint8_t * ] -state_info1 <br>
[ Member data: returns uint8_t * ] -state_info2 <br>
LinkSpeedSupported and PortState</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -mkey_lmc <br>
PortPhysState and LinkDownDefaultState</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -link_speed <br>
[ Member data: returns uint8_t * ] -mtu_smsl <br>
LinkSpeedEnabled and LinkSpeedActive</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -vl_cap <br>
[ Member data: returns uint8_t * ] -vl_high_limit <br>
VlCap and InitType</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -vl_arb_high_cap <br>
[ Member data: returns uint8_t * ] -vl_arb_low_cap <br>
[ Member data: returns uint8_t * ] -mtu_cap <br>
[ Member data: returns uint8_t * ] -vl_stall_life <br>
[ Member data: returns uint8_t * ] -vl_enforce <br>
[ Member data: returns ib_net16_t * ] -m_key_violations <br>
[ Member data: returns ib_net16_t * ] -p_key_violations <br>
[ Member data: returns ib_net16_t * ] -q_key_violations <br>
[ Member data: returns uint8_t * ] -guid_cap <br>
[ Member data: returns uint8_t * ] -subnet_timeout <br>
[ Member data: returns uint8_t * ] -resp_time_value <br>
[ Member data: returns uint8_t * ] -error_threshold</p>

<p style="margin-top: 1em">class ib_node_desc_t</p>

<p style="margin-top: 1em">[ Member data: returns
uint8_array_t * ] -description <br>
Node String is an array of UTF-8 character that describes
the node in text format Note that this string is NOT NULL
TERMINATED!</p>

<p style="margin-top: 1em">class ib_lft_record_t</p>

<p style="margin-top: 1em">[ Member data: returns
ib_net16_t * ] -lid <br>
[ Member data: returns ib_net16_t * ] -block_num <br>
[ Member data: returns uint32_t * ] -resv0 <br>
[ Member data: returns uint8_array_t * ] -lft</p>

<p style="margin-top: 1em">class ib_pm_counters_t</p>

<p style="margin-top: 1em">[ Member data: returns ib_mad_t
* ] -mad_header <br>
[ Member data: returns uint32_array_t * ] -reserved0 <br>
[ Member data: returns uint8_t * ] -reserved1 <br>
[ Member data: returns uint8_t * ] -port_select <br>
[ Member data: returns ib_net16_t * ] -counter_select <br>
[ Member data: returns ib_net16_t * ] -symbol_error_counter
<br>
[ Member data: returns uint8_t * ]
-link_error_recovery_counter <br>
[ Member data: returns uint8_t * ] -link_down_counter <br>
[ Member data: returns ib_net16_t * ] -port_rcv_errors <br>
[ Member data: returns ib_net16_t * ]
-port_rcv_remote_physical_errors <br>
[ Member data: returns ib_net16_t * ]
-port_rcv_switch_relay_errors <br>
[ Member data: returns ib_net16_t * ] -port_xmit_discard
<br>
[ Member data: returns uint8_t * ]
-port_xmit_constraint_errors <br>
[ Member data: returns uint8_t * ]
-port_rcv_constraint_errors <br>
[ Member data: returns uint8_t * ] -reserved2 <br>
[ Member data: returns uint8_t * ]
-lli_errors_exc_buf_errors <br>
[ Member data: returns ib_net16_t * ] -reserved3 <br>
[ Member data: returns ib_net16_t * ] -vl15_dropped <br>
[ Member data: returns ib_net32_t * ] -port_xmit_data <br>
[ Member data: returns ib_net32_t * ] -port_rcv_data <br>
[ Member data: returns ib_net32_t * ] -port_xmit_pkts <br>
[ Member data: returns ib_net32_t * ] -port_rcv_pkts <br>
[ Member data: returns uint32_array_t * ] -reserved5</p>

<p style="margin-top: 1em">IBMgtSim Simulator Objects <br>
class IBMgtSim</p>

<p style="margin-top: 1em">[ Member : returns IBFabric * ]
getFabric <br>
[ Member : returns IBMSServer * ] getServer <br>
[ Member : returns IBMSDispatcher * ] getDispatcher <br>
[ Member : returns int ] init topoFileName serverPortNum
numWorkers</p>

<p style="margin-top: 1em">class IBMSNode</p>

<p style="margin-top: 1em">[ Member : returns IBNode * ]
getIBNode <br>
get the IBNode of the IBMSNode</p>

<p style="margin-top: 1em">[ Member : returns int ]
getLinkStatus outPortNum <br>
get the link status of the given port</p>

<p style="margin-top: 1em">[ Member : returns int ]
setPhyPortErrProfile portNum errProfileIn <br>
set a particular port err profile</p>

<p style="margin-top: 1em">[ Member : returns int ]
getPhyPortErrProfile portNum <br>
get a particular port err profile</p>

<p style="margin-top: 1em">[ Member : returns int ]
setPhyPortPMCounter portNum counterSelect countersVal <br>
set a specific port counter</p>

<p style="margin-top: 1em">[ Member : returns
ib_pm_counters_t * ] getPhyPortPMCounter portNum
counterSelect get a specific port counter <br>
[ Member : returns ib_port_info_t * ] getPortInfo portNum
<br>
get a specific port info</p>

<p style="margin-top: 1em">[ Member : returns int ]
setLinkStatus portNum newState <br>
set the Link status including sending trap128</p>

<p style="margin-top: 1em">[ Member : returns
ib_node_info_t * ] getNodeInfo <br>
get the node info</p>

<p style="margin-top: 1em">[ Member : returns
ib_switch_info_t * ] getSwitchInfo <br>
get the switch info</p>

<p style="margin-top: 1em">[ Member : returns
ib_pkey_table_t * ] getPKeyTblBlock portNum blockNum <br>
get pkey table block</p>

<p style="margin-top: 1em">[ Member : returns int ]
setPKeyTblBlock portNum blockNum tbl <br>
set pkey table block</p>

<p style="margin-top: 1em">[ Member : returns int ]
setCrSpace startAddr length data <br>
set CR Space Value</p>

<p style="margin-top: 1em">[ Member : returns int ]
getCrSpace startAddr length data <br>
get CR Space Value</p>

<p style="margin-top: 1em">[ Member : returns int ]
getMFTBlock blockIdx portIdx <br>
get MFT block</p>

<p style="margin-top: 1em">[ Member : returns int ]
setMFTBlock blockIdx portIdx inMftBlock <br>
set MFT block</p>

<p style="margin-top: 1em">class madMcMemberRec</p>

<p style="margin-top: 1em">[ Constructor: returns
madMcMemberRec * ] madMcMemberRec name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns ib_gid_t * ] -mgid <br>
[ Member data: returns ib_gid_t * ] -port_gid <br>
[ Member data: returns ib_net32_t * ] -qkey <br>
[ Member data: returns ib_net16_t * ] -mlid <br>
[ Member data: returns uint8_t * ] -mtu <br>
[ Member data: returns uint8_t * ] -tclass <br>
[ Member data: returns ib_net16_t * ] -pkey <br>
[ Member data: returns uint8_t * ] -rate <br>
[ Member data: returns uint8_t * ] -pkt_life <br>
[ Member data: returns ib_net32_t * ] -sl_flow_hop <br>
[ Member data: returns uint8_t * ] -scope_state <br>
[ Member : returns int ] send_set pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_del pFromNode fromPort destLid
comp_mask</p>

<p style="margin-top: 1em">class madPathRec</p>

<p style="margin-top: 1em">[ Constructor: returns
madPathRec * ] madPathRec name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_array_t * ] -resv0 <br>
[ Member data: returns ib_gid_t * ] -dgid <br>
[ Member data: returns ib_gid_t * ] -sgid <br>
[ Member data: returns ib_net16_t * ] -dlid <br>
[ Member data: returns ib_net16_t * ] -slid <br>
[ Member data: returns ib_net32_t * ] -hop_flow_raw <br>
[ Member data: returns uint8_t * ] -tclass <br>
[ Member data: returns uint8_t * ] -num_path <br>
[ Member data: returns ib_net16_t * ] -pkey <br>
[ Member data: returns ib_net16_t * ] -sl <br>
[ Member data: returns uint8_t * ] -mtu <br>
[ Member data: returns uint8_t * ] -rate <br>
[ Member data: returns uint8_t * ] -pkt_life <br>
[ Member data: returns uint8_t * ] -preference <br>
[ Member data: returns uint8_array_t * ] -resv2 <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask</p>

<p style="margin-top: 1em">class madServiceRec</p>

<p style="margin-top: 1em">[ Constructor: returns
madServiceRec * ] madServiceRec name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns ib_net64_t * ] -service_id <br>
[ Member data: returns ib_gid_t * ] -service_gid <br>
[ Member data: returns ib_net16_t * ] -service_pkey <br>
[ Member data: returns ib_net16_t * ] -resv <br>
[ Member data: returns ib_net32_t * ] -service_lease <br>
[ Member data: returns uint8_array_t * ] -service_key <br>
[ Member data: returns uint8_array_t * ] -service_name <br>
[ Member data: returns uint8_array_t * ] -service_data8 <br>
[ Member data: returns uint16_array_t * ] -service_data16
<br>
[ Member data: returns uint32_array_t * ] -service_data32
<br>
[ Member data: returns uint64_array_t * ] -service_data64
<br>
[ Member : returns int ] send_set pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_del pFromNode fromPort destLid
comp_mask</p>

<p style="margin-top: 1em">class madNotice128</p>

<p style="margin-top: 1em">[ Constructor: returns
madNotice128 * ] madNotice128 name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] -generic_type <br>
[ Member data: returns uint8_t * ] -prod_type_msb <br>
[ Member data: returns ib_net16_t * ] -prod_type_lsb <br>
[ Member data: returns ib_net16_t * ] -trap_num <br>
[ Member data: returns ib_net16_t * ] -issuer_lid <br>
[ Member data: returns ib_net16_t * ] -toggle_count <br>
[ Member data: returns ib_net16_t * ] -sw_lid <br>
the sw lid of which link state changed - for 128 only</p>

<p style="margin-top: 1em">[ Member data: returns ib_gid_t
* ] -issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<p style="margin-top: 1em">class madNotice129</p>

<p style="margin-top: 1em">[ Constructor: returns
madNotice129 * ] madNotice129 name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] -generic_type <br>
[ Member data: returns uint8_t * ] -prod_type_msb <br>
[ Member data: returns ib_net16_t * ] -prod_type_lsb <br>
[ Member data: returns ib_net16_t * ] -trap_num <br>
[ Member data: returns ib_net16_t * ] -issuer_lid <br>
[ Member data: returns ib_net16_t * ] -toggle_count <br>
[ Member data: returns ib_net16_t * ] -pad <br>
[ Member data: returns ib_net16_t * ] -lid <br>
lid and port number of the violation</p>

<p style="margin-top: 1em">[ Member data: returns uint8_t *
] -port_num <br>
[ Member data: returns ib_gid_t * ] -issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<p style="margin-top: 1em">class madNotice144</p>

<p style="margin-top: 1em">[ Constructor: returns
madNotice144 * ] madNotice144 name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] -generic_type <br>
[ Member data: returns uint8_t * ] -prod_type_msb <br>
[ Member data: returns ib_net16_t * ] -prod_type_lsb <br>
[ Member data: returns ib_net16_t * ] -trap_num <br>
[ Member data: returns ib_net16_t * ] -issuer_lid <br>
[ Member data: returns ib_net16_t * ] -toggle_count <br>
[ Member data: returns ib_net16_t * ] -pad1 <br>
[ Member data: returns ib_net16_t * ] -lid <br>
lid where capability mask changed</p>

<p style="margin-top: 1em">[ Member data: returns
ib_net16_t * ] -pad2 <br>
[ Member data: returns ib_net32_t * ] -new_cap_mask <br>
new capability mask</p>

<p style="margin-top: 1em">[ Member data: returns ib_gid_t
* ] -issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<p style="margin-top: 1em">AUTHOR <br>
Eitan Zahavi, Mellanox Technologies LTD,
eitan@mellanox.co.il</p>

<p style="margin-top: 1em">IBMGTSIM 1.0 2008-06-16
IBMSSH(1)</p>
<hr>
</body>
</html>
