<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GRDGRAVMAG3D(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GRDGRAVMAG3D(1)</td>
    <td class="head-vol">GMT</td>
    <td class="head-rtitle">GRDGRAVMAG3D(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
grdgravmag3d - Compute the gravity effect of a grid by the method of Okabe
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>grdgravmag3d</b> <i>grdfile_top</i> [<i>grdfile_bot</i>] [
  <b>-C</b><i>density</i> ] [ <b>-E</b><i>thick</i> ] [ <b>-F</b><i>xy_file</i>
  ] [ <b>-G</b><i>outgrid</i> ] [ <b>-H</b><i>&lt;&#x2026;&gt;</i> ] [
  <b>-I</b><i>increment</i> ] [ <b>-L</b><i>z_obs</i> ] [
  <b>-Q</b>[<b>n</b><i>n_pad</i>]|[ <i>pad_dist</i>]|[&lt;w/e/s/n&gt;] ] [
  <b>-R</b> <i>region</i> ] [ <b>-S</b><i>radius</i> ] [ <b>-V</b>[<i>level</i>]
  ] [ <b>-Z</b><i>level</i>[<b>b</b>|<b>t</b>] ] [ <b>-fg</b> ] [
  <b>-x</b><i>+a|n|-n</i> ]
<div style="height: 1.00em;">&#x00A0;</div>
<b>Note:</b> No space is allowed between the option flag and the associated
  arguments.
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>grdgravmag3d</b> will compute the gravity anomaly of a body described by one
  or (optionally) two grids The output can either be along a given set of xy
  locations or on a grid. This method is not particularly fast but allows
  computing the anomaly of arbitrarily complex shapes.
<h1 class="Sh" title="Sh" id="REQUIRED_ARGUMENTS"><a class="selflink" href="#REQUIRED_ARGUMENTS">REQUIRED
  ARGUMENTS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b><i>grdfile_top</i> [<i>grdfile_bot</i>]</b></dt>
  <dd class="It-tag">Grid file whose gravity effect is going to be computed. If
      two grids are provided then the gravity/magnetic effect of the volume
      between them is computed.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b><i>density</i></dt>
  <dd class="It-tag">Sets body density in SI. This option is mutually exclusive
      with <b>-H</b></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b><i>xy_file</i></dt>
  <dd class="It-tag">Provide locations where the anomaly will be computed. Note
      this option is mutually exclusive with <b>-G</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b><i>outgrid</i></dt>
  <dd class="It-tag">Output the gravity anomaly at nodes of this grid file.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OPTIONAL_ARGUMENTS"><a class="selflink" href="#OPTIONAL_ARGUMENTS">OPTIONAL
  ARGUMENTS</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b><i>thickness</i></dt>
  <dd class="It-tag">To provide the layer thickness in m [Default = 500 m].</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b><i>f_dec/f_dip/m_int/m_dec/m_dip</i>
    <b>-H</b><i>+m&lt;magfile&gt;</i> <b>-H</b><i>x|y|z|h|t</i>
    <b>-H</b><i>+i|+g|+r|+f|+n</i></dt>
  <dd class="It-tag">Sets parameters for computation of magnetic anomaly (Can be
      used multiple times).</dd>
</dl>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">f_dec/f_dip -&gt; geomagnetic
  declination/inclination
<div style="height: 1.00em;">&#x00A0;</div>
m_int/m_dec/m_dip -&gt; body magnetic intensity/declination/inclination</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
OR for a grid mode
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">+m&lt;magfile&gt; where
  &#x2018;magfile&#x2019; is the name of the magnetic intensity file.</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To compute a component, specify any of:
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;">x|X|e|E to compute the E-W component.
<div style="height: 1.00em;">&#x00A0;</div>
y|Y|n|N to compute the N-S component.
<div style="height: 1.00em;">&#x00A0;</div>
z|Z to compute the Vertical component.
<div style="height: 1.00em;">&#x00A0;</div>
h|H to compute the Horizontal component.
<div style="height: 1.00em;">&#x00A0;</div>
t|T|f|F to compute the total field.
<div style="height: 1.00em;">&#x00A0;</div>
For a variable inclination and declination use IGRF. Set any of
  <b>-H</b><i>+i|+g|+r|+f|+n</i> to do that</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b><i>xinc</i>[<i>unit</i>][<b>+e</b>|<b>n</b>][/<i>yinc</i>[<i>unit</i>][<b>+e</b>|<b>n</b>]]</dt>
  <dd class="It-tag"><i>x_inc</i> [and optionally <i>y_inc</i>] is the grid
      spacing. Optionally, append a suffix modifier. <b>Geographical (degrees)
      coordinates</b>: Append <b>m</b> to indicate arc minutes or <b>s</b> to
      indicate arc seconds. If one of the units <b>e</b>, <b>f</b>, <b>k</b>,
      <b>M</b>, <b>n</b> or <b>u</b> is appended instead, the increment is
      assumed to be given in meter, foot, km, Mile, nautical mile or US survey
      foot, respectively, and will be converted to the equivalent degrees
      longitude at the middle latitude of the region (the conversion depends on
      PROJ_ELLIPSOID). If <i>y_inc</i> is given but set to 0 it will be reset
      equal to <i>x_inc</i>; otherwise it will be converted to degrees latitude.
      <b>All coordinates</b>: If <b>+e</b> is appended then the corresponding
      max <i>x</i> (<i>east</i>) or <i>y</i> (<i>north</i>) may be slightly
      adjusted to fit exactly the given increment [by default the increment may
      be adjusted slightly to fit the given domain]. Finally, instead of giving
      an increment you may specify the <i>number of nodes</i> desired by
      appending <b>+n</b> to the supplied integer argument; the increment is
      then recalculated from the number of nodes and the domain. The resulting
      increment value depends on whether you have selected a gridline-registered
      or pixel-registered grid; see App-file-formats for details. Note: if
      <b>-R</b> <i>grdfile</i> is used then the grid spacing has already been
      initialized; use <b>-I</b> to override the values.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L</b><i>z_obs</i></dt>
  <dd class="It-tag">Sets level of observation [Default = 0]. That is the height
      (z) at which anomalies are computed.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Q</b>[<b>n</b><i>n_pad</i>]|[<i>pad_dist</i>]|[&lt;w/e/s/n&gt;]</dt>
  <dd class="It-tag"></dd>
</dl>
<div style="margin-left: 7.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">Extend the domain of computation with respect to output
    <b>-R</b> region.</dt>
  <dd class="It-tag"><b>-Qn</b><i>n_pad</i> artificially extends the width of
      the outer rim of cells to have a fake width of <i>n_pad</i> * dx[/dy].
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>-Q</b><i>pad_dist</i> extend the region by west-pad, east+pad, etc.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>-Q</b><i>region</i> Same syntax as <b>-R</b>.</dd>
</dl>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b><i>xmin</i>/<i>xmax</i>/<i>ymin</i>/<i>ymax</i>[<b>+r</b>][<b>+u</b><i>unit</i>]
    (more &#x2026;)</dt>
  <dd class="It-tag">Specify the region of interest. Note: this overrides the
      source grid region (Default: use same region as input)</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b><i>radius</i></dt>
  <dd class="It-tag">Set search radius in km (valid only in the two grids mode
      OR when <b>-E</b>) [Default = 30 km]. This option serves to speed up the
      computation by not computing the effect of prisms that are further away
      than <i>radius</i> from the current node.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>[<i>level</i>] (more &#x2026;)</dt>
  <dd class="It-tag">Select verbosity level [c].</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z</b><i>level</i>[<b>b</b>|<b>t</b>]</dt>
  <dd class="It-tag">level of reference plane [Default = 0]. Use this option
      when the triangles describe a non-closed surface and the volume is defined
      from each triangle and this reference level. An example will be the water
      depth to compute a Bouguer anomaly. Use <b>-Zb</b> or <b>Zt</b> to close
      the body at its bottom (for example, to compute the effect of a dome) or
      at its top (to compute the effect of a <i>spoon</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fg</b></dt>
  <dd class="It-tag">Geographic grids (dimensions of longitude, latitude) will
      be converted to meters via a &#x201C;Flat Earth&#x201D; approximation
      using the current ellipsoid parameters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b><i>+a|n|-n</i></dt>
  <dd class="It-tag">Choose the number of processors used in multi-threading
      (Only available with multi-threading builds).</dd>
</dl>
<div style="margin-left: 7.00ex;">
<div style="margin-left: 3.50ex;"><i>+a</i> Use all available processors.
<div style="height: 1.00em;">&#x00A0;</div>
<i>n</i> Use n processors (not more than max available off course).
<div style="height: 1.00em;">&#x00A0;</div>
<i>-n</i> Use (all - n) processors.</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-^</b> or just <b>-</b></dt>
  <dd class="It-tag">Print a short message about the syntax of the command, then
      exits (NOTE: on Windows just use <b>-</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-+</b> or just <b>+</b></dt>
  <dd class="It-tag">Print an extensive usage (help) message, including the
      explanation of any module-specific option (but not the GMT common
      options), then exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b> or no arguments</dt>
  <dd class="It-tag">Print a complete usage (help) message, including the
      explanation of all options, then exits.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="GRID_DISTANCE_UNITS"><a class="selflink" href="#GRID_DISTANCE_UNITS">GRID
  DISTANCE UNITS</a></h1>
If the grid does not have meter as the horizontal unit, append
  <b>+u</b><i>unit</i> to the input file name to convert from the specified unit
  to meter. If your grid is geographic, convert distances to meters by supplying
  <b>-fg</b> instead.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Suppose you want to compute the gravity effect of the phantom &#x201C;Sandy
  Island&#x201D; together with its not phantom seamount
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
gmt grdgravmag3d sandy_bat.grd -C1700 -Z-4300 -fg -I1m -Gsandy_okb.grd -V
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
To compute the vertical component due to a magnetization stored in
  <i>mag.grd</i> over a zone defined by the surface <i>bat.grd</i>, using
  variable declination and inclination provided the the IGRF and using 4
  processors, do:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
gmt grdgravmag3d bat.grd -E10000 -Gcomp_Z.grd -Hz -H+n -H+mmag.grd -x4 -V -S50
</pre>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
gmt, gmtgravmag3d, talwani2d, talwani3d
<h1 class="Sh" title="Sh" id="REFERENCE"><a class="selflink" href="#REFERENCE">REFERENCE</a></h1>
Okabe, M., Analytical expressions for gravity anomalies due to polyhedral bodies
  and translation into magnetic anomalies, <i>Geophysics</i>, 44, (1979), p
  730-741.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2017, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 24, 2017</td>
    <td class="foot-os">5.4.2</td>
  </tr>
</table>
</body>
</html>
