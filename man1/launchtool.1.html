<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:21:23 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>LAUNCHTOOL(1) General Commands Manual LAUNCHTOOL(1)</p>

<p style="margin-top: 1em">NAME <br>
launchtool - run a command supervising its execution.</p>

<p style="margin-top: 1em">SYNOPSIS <br>
launchtool [options] [command]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
launchtool is a tool that runs a user-supplied command and
can supervise its execution in many ways, such as
controlling its environment, blocking signals, logging its
output, <br>
changing user and group permissions, limiting resource
usage, restarting it if it fails, running it continuously
and turning it into a daemon.</p>

<p style="margin-top: 1em">launchtool is fully
configurable, both through the commandline and using
configuration files. Configuration files can be made
executable and start with &acirc;#!/usr/bin/launchtool <br>
-C&acirc;, to create daemons using simpler commands.</p>

<p style="margin-top: 1em">INVOCATION <br>
launchtool executes the command it finds in the commandline,
via switches or the configuration file. All non-switch
parameters are concatenated to the command, that will be
exe&acirc; <br>
cuted using &acirc;/bin/sh -c&acirc;.</p>

<p style="margin-top: 1em">launchtool default mode of
execution is to run the command normally and return its exit
status. All features are disabled by default and activated
using commandline options or <br>
values in the configuration file. Commandline options
override configuration files.</p>

<p style="margin-top: 1em">launchtool sessions are
identified by a tag that is used both to mark the command
output in logfiles and to identify running sessions to check
if they have already been started <br>
or send them a signal without specifying the process
PID.</p>

<p style="margin-top: 1em">OPTIONS <br>
launchtool follows the usual GNU command line syntax, with
long options starting with two dashes (&lsquo;-&rsquo;).</p>

<p style="margin-top: 1em">-?, --help <br>
Display a detailed help message with a summary of all
options.</p>

<p style="margin-top: 1em">--usage <br>
Display a brief usage message.</p>

<p style="margin-top: 1em">-k, --kill[=signal] <br>
Kill a running launchtool with the specified signal (15 by
default) and exit. No signal name parsing is (yet) provided,
so the signal must be specified by its number.</p>

<p style="margin-top: 1em">--check <br>
Check if another launchtool is running, then exit.</p>

<p style="margin-top: 1em">--showcfg <br>
Process config files and commandline, show the resulting
configuration and exit.</p>

<p style="margin-top: 1em">-V, --version <br>
Print version and exit.</p>

<p style="margin-top: 1em">-t, --tag=tag, &acirc;tag&acirc;
<br>
Tag used to identify the session</p>

<p style="margin-top: 1em">-C, --config=file <br>
Read configuration data from &acirc;file&acirc;. Defaults to
/etc/launchtool/&lt;tag&gt;.conf</p>

<p style="margin-top: 1em">-v, --verbose,
&acirc;verbose&acirc; <br>
Enable verbose output.</p>

<p style="margin-top: 1em">--no-verbose <br>
Disable verbose output.</p>

<p style="margin-top: 1em">--debug, &acirc;debug&acirc;
<br>
Enable debug output (includes --verbose output).</p>

<p style="margin-top: 1em">--no-debug <br>
Disable debug output.</p>

<p style="margin-top: 1em">-c, --command=cmd,
&acirc;command&acirc; <br>
Command to execute.</p>

<p style="margin-top: 1em">--visible-tag=tag,
&acirc;visible tag&acirc; <br>
Tag to use for pidfiles and logfiles instead of
&acirc;launchtool-&lt;tag&gt;&acirc;.</p>

<p style="margin-top: 1em">-d, --daemon,
&acirc;daemon&acirc; <br>
Fork to background and detach from terminal, becoming a
daemon.</p>

<p style="margin-top: 1em">-n, --no-daemon <br>
Don&rsquo;t become a daemon.</p>

<p style="margin-top: 1em">--pidfile, &acirc;pidfile&acirc;
<br>
Create a pidfile (default when --daemon is used).</p>

<p style="margin-top: 1em">--no-pidfile <br>
Don&rsquo;t create a pidfile (default when --daemon is not
used).</p>

<p style="margin-top: 1em">--piddir=dir,
&acirc;piddir&acirc; <br>
Directory where pidfiles are stored (default to
/var/run).</p>

<p style="margin-top: 1em">--chroot=dir, &acirc;root
dir&acirc; <br>
Chroot to this directory before running the command.</p>

<p style="margin-top: 1em">--chdir=dir, &acirc;start
dir&acirc; <br>
Chdir to this directory before running the command (default
to &rsquo;.&rsquo; or &rsquo;/&rsquo; if --daemon is
present).</p>

<p style="margin-top: 1em">-u, --user=user,
&acirc;user&acirc; <br>
User privileges to run the command with.</p>

<p style="margin-top: 1em">-g, --group=group,
&acirc;group&acirc; <br>
Group privileges to run the command with.</p>

<p style="margin-top: 1em">--umask=mask,
&acirc;umask&acirc; <br>
Set this umask before running the command.</p>

<p style="margin-top: 1em">-L, --infinite-runs,
&acirc;infinite runs&acirc; <br>
Never give up restarting the command if it fails.</p>

<p style="margin-top: 1em">--no-infinite-runs <br>
Give up restarting the command after a certain number of
failures.</p>

<p style="margin-top: 1em">--wait-times=t1,t2,... ,
&acirc;wait times&acirc; <br>
List of times (in seconds) to wait after a program failure
before restarting it. If not specified, failed commands will
not be restarted.</p>

<p style="margin-top: 1em">--good-running-time=seconds,
&acirc;good running time&acirc; <br>
Minimum running time needed to restart for the first wait
time.</p>


<p style="margin-top: 1em">--forwarded-signals=sig1,sig2,...
, &acirc;forwarded signals&acirc; <br>
List of signals (in name or in number) to be forwarded to
the command.</p>

<p style="margin-top: 1em">--blocked-signals=sig1,sig2,...
, &acirc;blocked signals&acirc; <br>
List of signals (in name or in number) to be blocked before
running the command.</p>

<p style="margin-top: 1em">--limit-cpu=seconds, &acirc;cpu
limit&acirc; <br>
CPU time limit for the command (see setrlimit(2)).</p>

<p style="margin-top: 1em">--limit-file-size=1024b-blocks,
&acirc;file size limit&acirc; <br>
File size limit for the command (see setrlimit(2)).</p>


<p style="margin-top: 1em">--limit-data-memory=1024b-blocks,
&acirc;data memory limit&acirc; <br>
Data memory size limit for the command (see
setrlimit(2)).</p>

<p style="margin-top: 1em">--limit-process-count=count,
&acirc;process count limit&acirc; <br>
Process count limit for the command (see setrlimit(2)).</p>

<p style="margin-top: 1em">--limit-open-files=count,
&acirc;open files limit&acirc; <br>
Open files limit for the command (see setrlimit(2)).</p>

<p style="margin-top: 1em">--limit-core-size=1024b-blocks,
&acirc;core size limit&acirc; <br>
Core file size limit for the command (see setrlimit(2)).</p>

<p style="margin-top: 1em">--restrict-environment,
&acirc;restrict environment&acirc; <br>
Restrict the child environment.</p>

<p style="margin-top: 1em">--no-restrict-environment <br>
Copy all environment variables to the child environment.</p>


<p style="margin-top: 1em">--allowed-env-vars=var1,var2,...
, &acirc;allowed env vars&acirc; <br>
List of environment variables to be copied to the child when
the environment is restricted.</p>

<p style="margin-top: 1em">--log-launchtool-output=target,
&acirc;launchtool output&acirc; <br>
Target of the launchtool output (ignore, stdout, stderr,
file:filename or syslog:identity,facility,level).</p>

<p style="margin-top: 1em">--log-launchtool-errors=target,
&acirc;launchtool errors&acirc; <br>
Target of the launchtool error messages (ignore, stdout,
stderr, file:filename or
syslog:identity,facility,level).</p>

<p style="margin-top: 1em">--log-child-output=target,
&acirc;command output&acirc; <br>
Target of the child output (ignore, stdout, stderr,
file:filename or syslog:identity,facility,level).</p>

<p style="margin-top: 1em">--log-child-errors=target,
&acirc;command errors&acirc; <br>
Target of the child error messages (ignore, stdout, stderr,
file:filename or syslog:identity,facility,level).</p>

<p style="margin-top: 1em">--silent-restart-status=value,
&acirc;silent restart status&acirc; <br>
Return value used by the child to explicitly request a
restart (feature disabled if not specified).</p>

<p style="margin-top: 1em">--silent-restart-time=seconds,
&acirc;silent restart time&acirc; <br>
Time to wait before restarting the child after an explicit
restart request.</p>

<p style="margin-top: 1em">--stats, &acirc;stats&acirc;
<br>
Produce some statistics when the command terminates (implied
by --verbose).</p>

<p style="margin-top: 1em">--no-stats <br>
Do not produce statistics when the command terminates.</p>

<p style="margin-top: 1em">LOGGING TARGETS <br>
Logging targets are specified with a target name and its
optional parameters, separated by a colon
(&acirc;:&acirc;).</p>

<p style="margin-top: 1em">Possible target configurations
are:</p>

<p style="margin-top: 1em">ignore Output is just
discarded.</p>

<p style="margin-top: 1em">stdout Output goes to the
standard output stream.</p>

<p style="margin-top: 1em">stderr Output goes to the
standard error stream.</p>

<p style="margin-top: 1em">file:filename <br>
Output goes to the file &acirc;filename&acirc;.</p>

<p style="margin-top: 1em">syslog:identity,facility,level
<br>
Output goes to syslog, with the given identity (a string
identifying the logger), facility (see syslog(3)) and level
(see syslog(3)).</p>

<p style="margin-top: 1em">CONFIGURATION FILE <br>
The configuration file is a sequence of &acirc;key =
value&acirc; lines. Empty lines and lines starting with
&rsquo;#&rsquo; are ignored.</p>

<p style="margin-top: 1em">The possible keys have been
listed in the OPTIONS section next to the corresponding
commandline switch.</p>

<p style="margin-top: 1em">Boolean (yes/no) values can take
the values &acirc;yes&acirc;, &acirc;no&acirc;,
&acirc;true&acirc;, &acirc;false&acirc;, &acirc;0&acirc; and
&acirc;1&acirc;.</p>

<p style="margin-top: 1em">EXAMPLES <br>
# Running a command normally</p>

<p style="margin-top: 1em">launchtool -t tag &rsquo;echo
&quot;Hello, world!&quot;&rsquo;</p>

<p style="margin-top: 1em"># Run a command restarting it if
it fails:</p>

<p style="margin-top: 1em">launchtool -t tag
--wait-times=1,1,1,3,3,3,10,10,10
&rsquo;my_wonderful_server&rsquo;</p>

<p style="margin-top: 1em"># Run a command, with
restrictions, restarting it if it fails, as a daemon</p>

<p style="margin-top: 1em">launchtool -t myserver -d
--user=myserver --chroot=/var/myserver
--limit-process-count=5 --limit-open-files=10
--wait-times=1,1,1,3,3,3,10,10,10 --infinite-runs --stats
--log-launchtool-output=syslog:myserver,LOG_DAEMON,LOG_INFO
--log-launchtool-errors=syslog:myserver,LOG_DAEMON,LOG_ERR
--log-child-output=syslog:myserver,LOG_DAEMON,LOG_INFO
--log-child-errors=syslog:myserver,LOG_DAEMON,LOG_ERR
&rsquo;my_experimental_server&rsquo;</p>

<p style="margin-top: 1em"># Same thing, using a
configuration file</p>

<p style="margin-top: 1em">tag = myserver <br>
command = my_wonderful_server <br>
daemon = yes <br>
stats = yes <br>
user = myserver <br>
root dir = /var/myserver <br>
process count limit = 5 <br>
open files limit = 10 <br>
wait times = 1,1,1,3,3,3,10,10,10 <br>
infinite runs = yes <br>
launchtool output = syslog:myserver,LOG_DAEMON,LOG_INFO <br>
launchtool errors = syslog:myserver,LOG_DAEMON,LOG_ERR <br>
command output = syslog:myserver,LOG_DAEMON,LOG_INFO <br>
command errors = syslog:myserver,LOG_DAEMON,LOG_ERR</p>

<p style="margin-top: 1em"># Transform a shell command in a
polling daemon <br>
# Make the file /tmp/have_mobile exist only if my cell phone
is present in the <br>
# IRDA discovery list</p>

<p style="margin-top: 1em">launchtool -t celldetect -d
--silent-restart-time=5 --silent-restart-status=0
--user=nobody &quot;if grep -q SIEMENS
/proc/sys/net/irda/discovery; then touch /tmp/have_mobile;
else rm -f /tmp/have_mobile; fi ; exit 0&quot;</p>

<p style="margin-top: 1em"># Ceck if the celldetect daemon
is running</p>

<p style="margin-top: 1em">launchtool -t celldetect
--check</p>

<p style="margin-top: 1em"># Kill the celldetect daemon
launched with the command above</p>

<p style="margin-top: 1em">launchtool -t celldetect -k</p>

<p style="margin-top: 1em"># Same polling daemon, with an
executable configuration file</p>

<p style="margin-top: 1em">#!/usr/bin/launchtool -C <br>
tag = celldetect <br>
command = if grep -q SIEMENS /proc/sys/net/irda/discovery;
then touch /tmp/have_mobile; else rm -f /tmp/have_mobile; fi
; exit 0 <br>
daemon = yes <br>
user = nobody <br>
silent restart time = 5 <br>
silent restart status = 0</p>

<p style="margin-top: 1em"># Ceck if the celldetect daemon
is running, using the executable configuration <br>
# file</p>

<p style="margin-top: 1em">celldetect --check</p>

<p style="margin-top: 1em"># Kill the celldetect daemon
using the executable configuration file</p>

<p style="margin-top: 1em">celldetect -k</p>

<p style="margin-top: 1em">SEE ALSO <br>
syslog(3), setrlimit(2).</p>

<p style="margin-top: 1em">AUTHOR <br>
launchtool has been written by Enrico Zini
&lt;enrico@debian.org&gt;.</p>

<p style="margin-top: 1em">october 03, 2002
LAUNCHTOOL(1)</p>
<hr>
</body>
</html>
