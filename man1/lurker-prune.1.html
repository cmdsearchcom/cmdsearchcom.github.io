<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>LURKER-PRUNE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LURKER-PRUNE(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">LURKER-PRUNE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
lurker-prune &#x2014; prunes the web-server cache
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>lurker-prune</b> [-c &lt;config-file&gt;] [-f &lt;frontend&gt;] [-m
  &lt;days&gt;] [-a &lt;days&gt;] [-p -v]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>lurker-prune</b> prunes obsolete or stale files from the web-server
  accessible cache. This command must be run at regular intervals from eg. a
  cronjob. If it is not run, then the lurker web interface will appear to not be
  receiving new mail or have contradictory links between pages. A good interval
  is every 15 minutes and should not exceed one hour.
<div class="Pp"></div>
Be aware that it is possible for an attacker to use up a large amount of disk
  space through lurker. An attacker could request many distinct lurker web pages
  each of which is cached, thus using disk space. Please setup a quota for the
  lurker user, read your logs, and follow whatever site-specific policies you
  have for denial of service.
<div class="Pp"></div>
A good script to run in parallel with normal lurker-prune use is one similar to:
  if test `du -s /var/www/lurker | cut -f1` -gt 32768; then lurker-prune -p; fi
  This might help guard against a potential denial-of-service attack.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c config-file</b></dt>
  <dd class="It-tag">Use this config file for lurker settings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f frontend</b></dt>
  <dd class="It-tag">The directory of the lurker frontend cache to clean. You
      can selectively purge cache with this option. By default, lurker-prune
      will clean all frontends specified in the config file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m days</b></dt>
  <dd class="It-tag">Keep cached files for at most this many days. Any cached
      file regardless of last access will be deleted after the specified number
      of days (defaults to 7). Files which are obsolete due to new mail, config
      changes, or no accesses will be deleted earlier. Deleted files will be
      automagically regenerated if needed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a days</b></dt>
  <dd class="It-tag">Kill cache files not accessed for this many days. Any
      cached file which has not been read from for the specified number of days
      (defaults to 1) will be deleted. Files which are obsolete due to new mail
      or config changes will be deleted earlier. Deleted files will be
      automagically regenerated if needed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b></dt>
  <dd class="It-tag">Purge mode. Delete all cache files even if they do not
      appear to be expired. This will only deletes files that are generated by
      lurker, and is thus preferable to rm */*.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Verbose operation. Indicate which files are being deleted
      and the reasoning behind lurker's decisions. This can help in tracking
      down why some files are deleted and not others.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
lurker-index(1), lurker-params(1), lurker-list(1)
<div class="Pp"></div>
lurker documentation on http://lurker.sourceforge.net/
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2002: Wesley W. Terpstra &lt;terpstra@users.sourceforge.net&gt;
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; version 2.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 59 Temple
  Place - Suite 330, Boston, MA 02111-1307, USA.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Before reporting a bug, please confirm that the bug you found is still present
  in the latest official release. If the problem persists, then send mail with
  instructions describing how to reproduce the bug to
  &lt;lurker-users@lists.sourceforge.net&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
