<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VARNISHSTAT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VARNISHSTAT(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">VARNISHSTAT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
varnishstat - Varnish Cache statistics
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
varnishstat [-1] [-f &lt;glob&gt;] [-h] [-j] [-l] [-n &lt;dir&gt;] [-N
  &lt;filename&gt;] [-t &lt;seconds|off&gt;] [-V] [-x]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The varnishstat utility displays statistics from a running varnishd(1) instance.
<div style="height: 1.00em;">&#x00A0;</div>
The following options are available:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-1</b></dt>
  <dd class="It-tag">Instead of presenting a continuously updated display, print
      the statistics to stdout.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b><i>&#x00A0;&lt;glob&gt;</i></dt>
  <dd class="It-tag">Field inclusion glob. Use backslash to escape characters.
      If the argument starts with '^' it is used as an exclusion glob. Multiple
      -f arguments may be given, and they will be applied in order.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Print program usage and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b></dt>
  <dd class="It-tag">Print statistics to stdout as JSON.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">Lists the available fields to use with the -f option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b><i>&#x00A0;&lt;dir&gt;</i></dt>
  <dd class="It-tag">Specify the varnishd working directory (also known as
      instance name) to get logs from. If -n is not specified, the host name is
      used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b><i>&#x00A0;&lt;filename&gt;</i></dt>
  <dd class="It-tag">Specify the filename of a stale VSM instance. When using
      this option the abandonment checking is disabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b><i>&#x00A0;&lt;seconds|off&gt;</i></dt>
  <dd class="It-tag">Timeout before returning error on initial VSM connection.
      If set the VSM connection is retried every 0.5 seconds for this many
      seconds. If zero the connection is attempted only once and will fail
      immediately if unsuccessful. If set to &quot;off&quot;, the connection
      will not fail, allowing the utility to start and wait indefinetely for the
      Varnish instance to appear. Defaults to 5 seconds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">Print version information and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Print statistics to stdout as XML.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="CURSES_MODE"><a class="selflink" href="#CURSES_MODE">CURSES
  MODE</a></h1>
When neither -1, -j or -x options are given, the application starts up in curses
  mode. This shows a continuously updated view of the counter values, along with
  their description.
<div style="height: 1.00em;">&#x00A0;</div>
The top area shows process uptime information.
<div style="height: 1.00em;">&#x00A0;</div>
The center area shows a list of counter values.
<div style="height: 1.00em;">&#x00A0;</div>
The bottom area shows the description of the currently selected counter.
<h2 class="Ss" title="Ss" id="Columns"><a class="selflink" href="#Columns">Columns</a></h2>
The following columns are displayed, from left to right:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Name</b></dt>
  <dd class="It-tag">The name of the counter</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Current</b></dt>
  <dd class="It-tag">The current value of the counter.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Change</b></dt>
  <dd class="It-tag">The average per second change over the last update
      interval.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Average</b></dt>
  <dd class="It-tag">The average value of this counter over the runtime of the
      Varnish daemon, or a period if the counter can't be averaged.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Avg_10</b></dt>
  <dd class="It-tag">The moving average over the last 10 update intervals.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Avg_100</b></dt>
  <dd class="It-tag">The moving average over the last 100 update intervals.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Avg_1000</b></dt>
  <dd class="It-tag">The moving average over the last 1000 update
    intervals.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Key_bindings"><a class="selflink" href="#Key_bindings">Key
  bindings</a></h2>
The following keys control the interactive display:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;UP&gt;</b></dt>
  <dd class="It-tag">Navigate the counter list one line up.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;DOWN&gt;</b></dt>
  <dd class="It-tag">Navigate the counter list one line down.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;PAGEUP&gt; or &lt;b&gt;</b></dt>
  <dd class="It-tag">Navigate the counter list one page up.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;PAGEDOWN&gt; or &lt;SPACE&gt;</b></dt>
  <dd class="It-tag">Navigate the counter list one page down.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;d&gt;</b></dt>
  <dd class="It-tag">Toggle between showing and hiding unseen counters. Unseen
      counters are those that has been zero for the entire runtime of
      varnishstat. Defaults to hide unseen counters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;e&gt;</b></dt>
  <dd class="It-tag">Toggle scaling of values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;g&gt;</b></dt>
  <dd class="It-tag">Go to the top of the counter list.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;G&gt;</b></dt>
  <dd class="It-tag">Go to the bottom of the counter list.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;v&gt;</b></dt>
  <dd class="It-tag">Cycle through the verbosity levels. Defaults to only
      showing informational counters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;q&gt;</b></dt>
  <dd class="It-tag">Quit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&lt;CTRL+T&gt;</b></dt>
  <dd class="It-tag">Sample now.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OUTPUTS"><a class="selflink" href="#OUTPUTS">OUTPUTS</a></h1>
The XML output format is:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
&lt;varnishstat timestamp=&quot;YYYY-MM-DDTHH:mm:SS&quot;&gt;
  &lt;stat&gt;
    &lt;type&gt;FIELD TYPE&lt;/type&gt;
    &lt;ident&gt;FIELD IDENT&lt;/ident&gt;
    &lt;name&gt;FIELD NAME&lt;/name&gt;
    &lt;value&gt;FIELD VALUE&lt;/value&gt;
    &lt;flag&gt;FIELD SEMANTICS&lt;/flag&gt;
    &lt;format&gt;FIELD DISPLAY FORMAT&lt;/format&gt;
    &lt;description&gt;FIELD DESCRIPTION&lt;/description&gt;
  &lt;/stat&gt;
  [..]
&lt;/varnishstat&gt;
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The JSON output format is:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
{
  &quot;timestamp&quot;: &quot;YYYY-MM-DDTHH:mm:SS&quot;,
  &quot;FIELD NAME&quot;: {
    &quot;description&quot;: &quot;FIELD DESCRIPTION&quot;,
    &quot;type&quot;: &quot;FIELD TYPE&quot;, &quot;ident&quot;: &quot;FIELD IDENT&quot;, &quot;flag&quot;: &quot;FIELD SEMANTICS&quot;, &quot;format&quot;: &quot;FIELD DISPLAY FORMAT&quot;,
    &quot;value&quot;: FIELD VALUE
  },
  &quot;FIELD NAME&quot;: {
    &quot;description&quot;: &quot;FIELD DESCRIPTION&quot;,
    &quot;type&quot;: &quot;FIELD TYPE&quot;, &quot;ident&quot;: &quot;FIELD IDENT&quot;, &quot;flag&quot;: &quot;FIELD SEMANTICS&quot;, &quot;format&quot;: &quot;FIELD DISPLAY FORMAT&quot;,
    &quot;value&quot;: FIELD VALUE
  },
  [..]
}
</pre>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Type and ident are optional. Timestamp is the time when the report was generated
  by varnishstat.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnishd(1)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnishhist(1)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnishlog(1)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnishncsa(1)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnishtop(1)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">curses(3)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><i>varnish-counters(7)</i></dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
This manual page was written by Dag-Erling Sm&#x00F8;rgrav, Per Buer, Lasse
  Karstensen and Martin Blix Grydeland.</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
