<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:09:59 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FINDIMAGEDUPES(1p) User Contributed Perl Documentation
FINDIMAGEDUPES(1p)</p>

<p style="margin-top: 1em">NAME <br>
findimagedupes - Finds visually similar or duplicate
images</p>

<p style="margin-top: 1em">SYNOPSIS <br>
findimagedupes [option ...] [--] [ - | [file ...] ]</p>

<p style="margin-top: 1em">Options: <br>
-f, --fingerprints=FILE -c, --collection=FILE <br>
-M, --merge=FILE -p, --program=PROGRAM <br>
-P, --prune -s, --script=FILE <br>
-a, --add -i, --include=TEXT <br>
-r, --rescan -I, --include-file=FILE <br>
-n, --no-compare <br>
-q, --quiet <br>
-t, --threshold=AMOUNT -v, --verbosity=LIST</p>

<p style="margin-top: 1em">-0, --null -h, --help <br>
-R, --recurse --man</p>

<p style="margin-top: 1em">With no options, compares the
specified files and does not use nor update any fingerprint
database.</p>

<p style="margin-top: 1em">Directories of images may be
specified instead of individual files; Sub-directories of
these are not searched unless --recurse is used.</p>

<p style="margin-top: 1em">OPTIONS <br>
-0, --null <br>
If a file &quot;-&quot; is given, a list of files is read
from stdin.</p>

<p style="margin-top: 1em">Without -0, the list is
specified one file per line, such as produced by find(1)
with its &quot;-print&quot; option.</p>

<p style="margin-top: 1em">With -0, the list is expected to
be null-delimited, such as produced by find(1) with its
&quot;-print0&quot; option.</p>

<p style="margin-top: 1em">-a, --add <br>
Only look for duplicates of files specified on the
commandline.</p>

<p style="margin-top: 1em">Matches are also sought in any
fingerprint databases specified.</p>

<p style="margin-top: 1em">-c, --collection=FILE <br>
Create GQView collection FILE.gqv of duplicates.</p>

<p style="margin-top: 1em">The program attempts to produce
well-formed collections. In particular, it will print a
warning and exclude any file whose name contains newline or
doublequote. (In this <br>
situation, gqview(1) seems to create a .gqv collection file
that it silently fails to read back in properly.)</p>

<p style="margin-top: 1em">-d, --debug=OPTS <br>
Enable debugging output. Options OPTS are subject to change.
See the program source for details.</p>

<p style="margin-top: 1em">-f, --fingerprints=FILE <br>
Use FILE as fingerprint database.</p>

<p style="margin-top: 1em">May be abbreviated as --fp or
--db.</p>

<p style="margin-top: 1em">This option may be given
multiple times when --merge is used. (Note: FILE could
contain commas, so multiple databases may not be specified
as a single comma-delimited <br>
list.)</p>

<p style="margin-top: 1em">-h, --help <br>
Print usage and option sections of this manual.</p>

<p style="margin-top: 1em">-i, --include=TEXT <br>
TEXT is Bourne-shell code to customise --script.</p>

<p style="margin-top: 1em">It is executed after any code
included using --include-file.</p>

<p style="margin-top: 1em">May be given multiple times.
Code will be concatenated.</p>

<p style="margin-top: 1em">-I, --include-file=FILE <br>
FILE is a file containing Bourne-shell code to customise
--script.</p>

<p style="margin-top: 1em">It is executed before any code
included using --include.</p>

<p style="margin-top: 1em">--man Display the full
documentation, using default pager.</p>

<p style="margin-top: 1em">--merge=FILE <br>
Takes any databases specified with --fingerprints and merges
them into a new database called FILE. Conflicting
fingerprints for an image will cause one of two actions to
<br>
occur:</p>

<p style="margin-top: 1em">1. If the image does not exist,
then the entry is elided.</p>

<p style="margin-top: 1em">2. If the image does exist, then
the old information is ignored and a new fingerprint is
generated from scratch.</p>

<p style="margin-top: 1em">By default, image existence is
not checked unless there is a conflict. To force removal of
defunct data, use --prune as well.</p>

<p style="margin-top: 1em">A list of image files is not
required if this option is used. However, if a list is
provided, fingerprint data for the files will be copied or
(re)generated as <br>
appropriate.</p>

<p style="margin-top: 1em">When --merge is used, the
original fingerprint databases are not modified, even if
--prune is used.</p>

<p style="margin-top: 1em">See also: --rescan</p>

<p style="margin-top: 1em">-n, --no-compare <br>
Don&rsquo;t look for duplicates.</p>

<p style="margin-top: 1em">-p, --program=PROGRAM <br>
Launch PROGRAM (in foreground) to view each set of
dupes.</p>

<p style="margin-top: 1em">PROGRAM must be the full path to
an existing executable file. For more flexibility, see the
--include and --include-file options.</p>

<p style="margin-top: 1em">See also: --script</p>

<p style="margin-top: 1em">--prune Remove fingerprint data
for images that do not exist any more. Has no effect unless
--fingerprints or --merge is also used.</p>

<p style="margin-top: 1em">Databases specified by
--fingerprints are only modified if --merge is not used.</p>

<p style="margin-top: 1em">-q, --quiet <br>
This option may be given multiple times.</p>

<p style="margin-top: 1em">Usually, progress, warning and
error messages are printed on stderr. If this option is
given, warnings are not displayed. If it is given twice or
more, errors are not <br>
displayed either.</p>

<p style="margin-top: 1em">Information requested with
--verbosity is still displayed.</p>

<p style="margin-top: 1em">-R, --recurse <br>
Use --recurse to search recursively for images inside
subdirectories. For historical reasons, the default is to
not do so. To avoid looping, symbolic links to <br>
directories are never followed.</p>

<p style="margin-top: 1em">-r, --rescan <br>
(Re)generate all fingerprints, not just any that are
unknown.</p>

<p style="margin-top: 1em">If used with --add, only the
fingerprints of files specified on the commandline are
(re)generated.</p>

<p style="margin-top: 1em">Implies --prune.</p>

<p style="margin-top: 1em">-s, --script=FILE <br>
When used with --program, PROGRAM is not launched
immediately. Instead sh(1)-style commands are saved to FILE.
This script may be edited (if desired) and then executed
<br>
manually.</p>

<p style="margin-top: 1em">When used without --program, two
skeletal shell functions are generated: &quot;VIEW&quot;
simply echo(1)s its arguments; the empty function
&quot;END&quot; runs after files-processing is <br>
finished.</p>

<p style="margin-top: 1em">To display to terminal (or feed
into a pipe), use &quot;-&quot; as FILE.</p>

<p style="margin-top: 1em">If --script is not given, the
script is still created in memory and is executed
immediately. So, with the default VIEW and END functions,
lines containing sets of <br>
duplicates are displayed. See: EXAMPLES</p>

<p style="margin-top: 1em">See also: --include,
--include-file</p>

<p style="margin-top: 1em">-t, --threshold=AMOUNT <br>
Use AMOUNT as threshold of similarity. Append &quot;%&quot;
to give a percentage or &quot;b&quot; for bits. For
backwards compatibility, a number with no unit is treated as
a percentage. <br>
Percentage is the minimum required for a match; bits is the
maximum that may differ: bits=floor(2.56(100-percent))</p>

<p style="margin-top: 1em">A fractional part may be given
but it is only accurate to 100/256 (0.390625) for percentage
and it is meaningless for &quot;bits&quot;. Default is
&quot;90%&quot; (&quot;25b&quot;) if not specified.</p>

<p style="margin-top: 1em">-v, --verbosity=LIST <br>
Enable display of informational messages to stdout, where
LIST is a comma-delimited list of:</p>

<p style="margin-top: 1em">md5 Display the checksum for
each file, as per md5sum(1).</p>

<p style="margin-top: 1em">fingerprint | fp <br>
Display the base64-encoded fingerprint of each file.</p>

<p style="margin-top: 1em">Alternatively, --verbosity may
be given multiple times, and accumulates. Note that this may
not be sensible. For example, to be useful, md5 output
probably should not be <br>
merged with fingerprint data.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
findimagedupes compares a list of files for visual
similarity.</p>

<p style="margin-top: 1em">To calculate an image
fingerprint: <br>
1) Read image. <br>
2) Resample to 160x160 to standardize size. <br>
3) Grayscale by reducing saturation. <br>
4) Blur a lot to get rid of noise. <br>
5) Normalize to spread out intensity as much as possible.
<br>
6) Equalize to make image as contrasty as possible. <br>
7) Resample again down to 16x16. <br>
8) Reduce to 1bpp. <br>
9) The fingerprint is this raw image data.</p>

<p style="margin-top: 1em">To compare two images for
similarity: <br>
1) Take fingerprint pairs and xor them. <br>
2) Compute the percentage of 1 bits in the result. <br>
3) If percentage exceeds threshold, declare files to be
similar.</p>

<p style="margin-top: 1em">RETURN VALUE <br>
0 Success.</p>

<p style="margin-top: 1em">1 Usage information was
requested (--help or --man), or there were warnings.</p>

<p style="margin-top: 1em">2 Invalid options or arguments
were provided.</p>

<p style="margin-top: 1em">3 Runtime error.</p>

<p style="margin-top: 1em">Any other return values indicate
an internal error of some sort.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
To be written.</p>

<p style="margin-top: 1em">EXAMPLES <br>
findimagedupes -R -- . <br>
Look for and compare images in all subdirectories of the
current directory.</p>

<p style="margin-top: 1em">find -type f . -print0 |
findimagedupes -0 -- - <br>
Same as above.</p>

<p style="margin-top: 1em">findimagedupes -i &rsquo;echo
&quot;# sort: manual&quot;&rsquo; -i &rsquo;VIEW(){ for f in
&quot;$@&quot;;do echo <br>
Use script hooks to produce collection-style output suitable
for use with gthumb(1).</p>

<p style="margin-top: 1em">FILES <br>
To be written.</p>

<p style="margin-top: 1em">BUGS <br>
There is a memory leak somewhere.</p>

<p style="margin-top: 1em">Killing the programme may
corrupt the fingerprint database(s).</p>

<p style="margin-top: 1em">Changing version of
GraphicsMagick invalidates fingerprint databases.</p>

<p style="margin-top: 1em">NOTES <br>
Directory recursion is deliberately not implemented:
Composing a file-list and using it with &quot;-&quot; is a
more flexible approach.</p>

<p style="margin-top: 1em">Repetitions are culled before
comparisons take place, so a commandline like
&quot;findimagedupes a.jpg a.jpg&quot; will not produce a
match.</p>

<p style="margin-top: 1em">The program needs a lot of
memory. Probably not an issue, unless your machine has less
than 128MB of free RAM and you try to compare more than a
hundred-thousand files at once <br>
(and the program will run quite slowly with that many files
anyway---about eight hours initially to generate
fingerprints and another ten minutes to do the actual
comparing).</p>

<p style="margin-top: 1em">SEE ALSO <br>
find(1), md5sum(1)</p>

<p style="margin-top: 1em">gqview - GTK based multiformat
image viewer</p>

<p style="margin-top: 1em">gthumb - an image viewer and
browser for GNOME</p>

<p style="margin-top: 1em">AUTHOR <br>
Jonathan H N Chin &lt;code@jhnc.org&gt;</p>

<p style="margin-top: 1em">COPYRIGHT AND LICENSE <br>
Copyright 2006-2008 by Jonathan H N Chin
&lt;code@jhnc.org&gt;.</p>

<p style="margin-top: 1em">This program is free software;
you may redistribute it and/or modify <br>
it under the terms of the GNU General Public License as
published by <br>
the Free Software Foundation; either version 3 of the
License, or <br>
(at your option) any later version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, <br>
but WITHOUT ANY WARRANTY; without even the implied warranty
of <br>
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
<br>
GNU General Public License for more details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License <br>
along with this program; if not, write to the Free Software
<br>
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
02111-1307 USA</p>

<p style="margin-top: 1em">HISTORY <br>
This code has been written from scratch. However it owes its
existence to findimagedupes by Rob Kudla and uses the same
duplicate-detection algorithm.</p>

<p style="margin-top: 1em">POD ERRORS <br>
Hey! The above document had some coding errors, which are
explained below:</p>

<p style="margin-top: 1em">Around line 876: <br>
Expected text after =item, not a number</p>

<p style="margin-top: 1em">Around line 881: <br>
Expected text after =item, not a number</p>

<p style="margin-top: 1em">Around line 885: <br>
Expected text after =item, not a number</p>

<p style="margin-top: 1em">perl v5.24.1 2016-10-24
FINDIMAGEDUPES(1p)</p>
<hr>
</body>
</html>
