<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>STONEVPN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">STONEVPN(1)</td>
    <td class="head-vol">StoneVPN User Manual</td>
    <td class="head-rtitle">STONEVPN(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
stonevpn - Easy OpenVPN certificate and configuration management
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>stonevpn -f</b> <i>filename</i> <b>-n</b> <i>commonname</i> <b>[ OPTIONS
  ]</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>StoneVPN</b> allows you to manage OpenVPN certificates and create
  configurations for Windows and Linux machines based on a template. It can
  package everything into a zipfile and mail it to a user.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Show program's version number and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b><i>,<b> --help</b></i></dt>
  <dd class="It-tag">Show the help message and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b><i>,<b> --debug</b></i></dt>
  <dd class="It-tag">Enable debugging information. You probably don't want to
      use this option as it prints quite useless information for normal
    usage.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b><i> CNAME</i><b>, --name=</b><i>CNAME</i></dt>
  <dd class="It-tag">Common Name, use quotes eg.: &quot;John Cleese&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b><i> FNAME</i><b>, --file=</b><i>FNAME</i></dt>
  <dd class="It-tag">Write to file FNAME (no extension!)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b><i> CONFS</i><b>, --config=</b><i>CONFS</i></dt>
  <dd class="It-tag">Create config files for <b>[ </b><i>windows</i> |
      <i>unix</i> <b> | </b><i>mac</i><b> | </b><i>all</i><b> ] </b>
    <div style="height: 1.00em;">&#x00A0;</div>
    When supplying <i>all</i> StoneVPN will generate configuration files for all
      three Operating Systems.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-e</b><i> FPREFIX</i><b>,
    --prefix=</b><i>FPREFIX</i></dt>
  <dd class="It-tag">Prefix (almost all) generated files. For example, if you
      set FPREFIX to 'mycorp', generated files will look like
      'mycorp-user.crt/zip/key'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b><i>,</i><b><b>--zip</b></b></dt>
  <dd class="It-tag">Package all generated files into a ZIP file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b><i> EMAILADDRESS</i><b>,
    --mail=</b><i>EMAILADDRESS</i></dt>
  <dd class="It-tag">Send all generated files by e-mail to <i>EMAILADDRESS</i>.
      You might want to encrypt the user's key with a password when using this
      method.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b><i>,</i><b><b>--free-ip</b></b></dt>
  <dd class="It-tag">Locate and assign free ip by parsing the OpenVPN server
      configuration file (more specifically the 'ifconfig-pool' line), and
      client configuration files within the ccd directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b><i>,</i><b><b>--passphrase</b></b></dt>
  <dd class="It-tag">Prompt for a passphrase when generating the user's private
      key. Leave empty to provide one on the commandline. For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -p mysecret</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-M</b><i>,</i><b><b>--mailpass</b></b></dt>
  <dd class="It-tag">Include passphrase in e-mail body (only useful with the
      '-m' option). You might want to change the mail_passtxt variable in
      stonevpn.conf as well.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-R</b><i> RANDPASS</i><b>,
    --randpass=</b><i>RANDPASS</i></dt>
  <dd class="It-tag">Generate a random password of RANDPASS characters. For
      example, to generate an 8 character passphrase:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -R 8</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-E</b><i>,</i><b><b>--extrafile</b></b></dt>
  <dd class="It-tag">Include extra files when generating a certificate. When
      also specifying the <b>--zip</b> option, these will be packed in the zip
      file. Else, they will remain in a subdirectory of the working directory,
      based on the given FNAME. Use the full path to the filename to be
      included. You can use this option multiple times:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -E /path/to/file1 -E
      /path/to/file2</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b><i>,</i><b><b>--serverip</b></b></dt>
  <dd class="It-tag">Use this IP address for the server when generating the
      configuration file, overriding the one specified in stonevpn.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b><i> SERIAL</i><b>, --revoke=</b><i>SERIAL</i></dt>
  <dd class="It-tag">Revoke certificate with serial SERIAL</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b><i> ROUTE</i><b>, --route=</b><i>ROUTE</i></dt>
  <dd class="It-tag">Push extra route(s) to client by means of a client
      configuration file on the server. For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -u 192.168.1.0/24
    <div style="height: 1.00em;">&#x00A0;</div>
    You can specify multiple routes with another '-u &lt;route&gt;'. This will
      write the route(s) to /etc/openvpn/cdd/Test_User</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b><i>,</i><b><b>--listrevoked</b></b></dt>
  <dd class="It-tag">List revoked certificates</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--crl</b></dt>
  <dd class="It-tag">Display CRL file contents</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b><i>,</i><b><b>--listall</b></b></dt>
  <dd class="It-tag">List all certificates</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b><i>,</i><b><b>--showserial</b></b></dt>
  <dd class="It-tag">Display current SSL serial number</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b><i> PRINTCERT</i><b>,
    --printcert=</b><i>PRINTCERT</i></dt>
  <dd class="It-tag">Prints information about a certficiate file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b><i>,</i><b><b>--printindex</b></b></dt>
  <dd class="It-tag">Prints index file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b><i> EXPIREDATE</i><b>,
    --expire=</b><i>EXPIREDATE</i></dt>
  <dd class="It-tag">Certificate expires in EXPIREDATE hours/days/years instead
      of the default specified in the openssl.cnf. For example:
    <div style="height: 1.00em;">&#x00A0;</div>
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -x 3h # valid for 3 hours
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -x 2d # same, but 2 days
    <br/>
     stonevpn -f user -n &quot;User Name&quot; -x 1y # and for one year</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b><i>,</i><b><b>--newcrl</b></b></dt>
  <dd class="It-tag">Create an empty CRL file (or overwrite an existing
    one)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b><i>,</i><b><b>--test</b></b></dt>
  <dd class="It-tag">Danger, Will Robinson, Danger! test parameter - can do
      anything! Review source before executing!
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<i>/etc/stonevpn.conf</i>
<div style="margin-left: 5.00ex;">Configuration file. See <b>stonevpn</b>(5) for
  further details.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">Create a certificate and (Unix) configuration file for John
    Cleese and pack everything into johncleese.zip:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    stonevpn -f johncleese -n &quot;John Cleese&quot; -z
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">The same, but now encrypt the user's private key with a
    password and email the zipfile to them:</dt>
  <dd class="It-tag">
    <div style="height: 1.00em;">&#x00A0;</div>
    stonevpn -f johncleese -n &quot;John Cleese&quot; -z -p -m user@domain.tld
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please report bugs on http://github.com/lkeijser/stonevpn/issues or mail the
  author.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
L&#x00E9;on Keijser &lt;keijser at stone-it dot com&gt;
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
stonevpn<i>(5)</i></div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2010</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
