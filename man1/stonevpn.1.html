<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:16 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>STONEVPN(1) StoneVPN User Manual STONEVPN(1)</p>

<p style="margin-top: 1em">NAME <br>
stonevpn - Easy OpenVPN certificate and configuration
management</p>

<p style="margin-top: 1em">SYNOPSIS <br>
stonevpn -f filename -n commonname [ OPTIONS ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
StoneVPN allows you to manage OpenVPN certificates and
create configurations for Windows and Linux machines based
on a template. It can package everything into a zipfile and
mail <br>
it to a user.</p>

<p style="margin-top: 1em">OPTIONS <br>
--version <br>
Show program&rsquo;s version number and exit</p>

<p style="margin-top: 1em">-h, --help <br>
Show the help message and exit</p>

<p style="margin-top: 1em">-D, --debug <br>
Enable debugging information. You probably don&rsquo;t want
to use this option as it prints quite useless information
for normal usage.</p>

<p style="margin-top: 1em">-n CNAME, --name=CNAME <br>
Common Name, use quotes eg.: &quot;John Cleese&quot;</p>

<p style="margin-top: 1em">-f FNAME, --file=FNAME <br>
Write to file FNAME (no extension!)</p>

<p style="margin-top: 1em">-o CONFS, --config=CONFS <br>
Create config files for [ windows | unix | mac | all ]</p>

<p style="margin-top: 1em">When supplying all StoneVPN will
generate configuration files for all three Operating
Systems.</p>

<p style="margin-top: 1em">-e FPREFIX, --prefix=FPREFIX
<br>
Prefix (almost all) generated files. For example, if you set
FPREFIX to &rsquo;mycorp&rsquo;, generated files will look
like &rsquo;mycorp-user.crt/zip/key&rsquo;</p>

<p style="margin-top: 1em">-z,--zip <br>
Package all generated files into a ZIP file.</p>

<p style="margin-top: 1em">-m EMAILADDRESS,
--mail=EMAILADDRESS <br>
Send all generated files by e-mail to EMAILADDRESS. You
might want to encrypt the user&rsquo;s key with a password
when using this method.</p>

<p style="margin-top: 1em">-i,--free-ip <br>
Locate and assign free ip by parsing the OpenVPN server
configuration file (more specifically the
&rsquo;ifconfig-pool&rsquo; line), and client configuration
files within the ccd <br>
directory.</p>

<p style="margin-top: 1em">-p,--passphrase <br>
Prompt for a passphrase when generating the user&rsquo;s
private key. Leave empty to provide one on the commandline.
For example:</p>

<p style="margin-top: 1em">stonevpn -f user -n &quot;User
Name&quot; -p mysecret</p>

<p style="margin-top: 1em">-M,--mailpass <br>
Include passphrase in e-mail body (only useful with the
&rsquo;-m&rsquo; option). You might want to change the
mail_passtxt variable in stonevpn.conf as well.</p>

<p style="margin-top: 1em">-R RANDPASS, --randpass=RANDPASS
<br>
Generate a random password of RANDPASS characters. For
example, to generate an 8 character passphrase:</p>

<p style="margin-top: 1em">stonevpn -f user -n &quot;User
Name&quot; -R 8</p>

<p style="margin-top: 1em">-E,--extrafile <br>
Include extra files when generating a certificate. When also
specifying the --zip option, these will be packed in the zip
file. Else, they will remain in a subdirectory of <br>
the working directory, based on the given FNAME. Use the
full path to the filename to be included. You can use this
option multiple times:</p>

<p style="margin-top: 1em">stonevpn -f user -n &quot;User
Name&quot; -E /path/to/file1 -E /path/to/file2</p>

<p style="margin-top: 1em">-S,--serverip <br>
Use this IP address for the server when generating the
configuration file, overriding the one specified in
stonevpn.conf</p>

<p style="margin-top: 1em">-r SERIAL, --revoke=SERIAL <br>
Revoke certificate with serial SERIAL</p>

<p style="margin-top: 1em">-u ROUTE, --route=ROUTE <br>
Push extra route(s) to client by means of a client
configuration file on the server. For example:</p>

<p style="margin-top: 1em">stonevpn -f user -n &quot;User
Name&quot; -u 192.168.1.0/24</p>

<p style="margin-top: 1em">You can specify multiple routes
with another &rsquo;-u &lt;route&gt;&rsquo;. This will write
the route(s) to /etc/openvpn/cdd/Test_User</p>

<p style="margin-top: 1em">-l,--listrevoked <br>
List revoked certificates</p>

<p style="margin-top: 1em">--crl Display CRL file
contents</p>

<p style="margin-top: 1em">-a,--listall <br>
List all certificates</p>

<p style="margin-top: 1em">-s,--showserial <br>
Display current SSL serial number</p>

<p style="margin-top: 1em">-c PRINTCERT,
--printcert=PRINTCERT <br>
Prints information about a certficiate file</p>

<p style="margin-top: 1em">-d,--printindex <br>
Prints index file</p>

<p style="margin-top: 1em">-x EXPIREDATE,
--expire=EXPIREDATE <br>
Certificate expires in EXPIREDATE hours/days/years instead
of the default specified in the openssl.cnf. For
example:</p>

<p style="margin-top: 1em">stonevpn -f user -n &quot;User
Name&quot; -x 3h # valid for 3 hours <br>
stonevpn -f user -n &quot;User Name&quot; -x 2d # same, but
2 days <br>
stonevpn -f user -n &quot;User Name&quot; -x 1y # and for
one year</p>

<p style="margin-top: 1em">-N,--newcrl <br>
Create an empty CRL file (or overwrite an existing one)</p>

<p style="margin-top: 1em">-t,--test <br>
Danger, Will Robinson, Danger! test parameter - can do
anything! Review source before executing!</p>

<p style="margin-top: 1em">FILES <br>
/etc/stonevpn.conf <br>
Configuration file. See stonevpn(5) for further details.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Create a certificate and (Unix) configuration file for John
Cleese and pack everything into johncleese.zip:</p>

<p style="margin-top: 1em">stonevpn -f johncleese -n
&quot;John Cleese&quot; -z</p>

<p style="margin-top: 1em">The same, but now encrypt the
user&rsquo;s private key with a password and email the
zipfile to them:</p>

<p style="margin-top: 1em">stonevpn -f johncleese -n
&quot;John Cleese&quot; -z -p -m user@domain.tld</p>

<p style="margin-top: 1em">BUGS <br>
Please report bugs on
http://github.com/lkeijser/stonevpn/issues or mail the
author.</p>

<p style="margin-top: 1em">AUTHOR <br>
L&Atilde;&copy;on Keijser &lt;keijser at stone-it dot
com&gt;</p>

<p style="margin-top: 1em">SEE ALSO <br>
stonevpn(5)</p>

<p style="margin-top: 1em">May 2010 STONEVPN(1)</p>
<hr>
</body>
</html>
