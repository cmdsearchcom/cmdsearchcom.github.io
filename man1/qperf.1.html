<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:34:40 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>QPERF(1) User Commands QPERF(1)</p>

<p style="margin-top: 1em">NAME <br>
qperf - Measure RDMA and IP performance</p>

<p style="margin-top: 1em">SYNOPSIS <br>
qperf <br>
qperf SERVERNODE [OPTIONS] TESTS</p>

<p style="margin-top: 1em">DESCRIPTION <br>
qperf measures bandwidth and latency between two nodes. It
can work over TCP/IP as well as the RDMA transports. On one
of the nodes, qperf is typically run with no arguments <br>
designating it the server node. One may then run qperf on a
client node to obtain measurements such as bandwidth,
latency and cpu utilization.</p>

<p style="margin-top: 1em">In its most basic form, qperf is
run on one node in server mode by invoking it with no
arguments. On the other node, it is run with two arguments:
the name of the server node <br>
followed by the name of the test. A list of tests can be
found in the section, TESTS. A variety of options may also
be specified.</p>

<p style="margin-top: 1em">One can get more detailed
information on qperf by using the --help option. Below are
examples of using the --help option:</p>

<p style="margin-top: 1em">qperf --help examples Some
examples of using qperf <br>
qperf --help opts Summary of options <br>
qperf --help options Description of options <br>
qperf --help tests Short summary and description of tests
<br>
qperf --help TESTNAME More information on test TESTNAME</p>

<p style="margin-top: 1em">EXAMPLES <br>
In these examples, we first run qperf on a node called
myserver in server mode by invoking it with no arguments. In
all the subsequent examples, we run qperf on another node
and <br>
connect to the server which we assume has a hostname of
myserver.</p>

<p style="margin-top: 1em">To run a TCP bandwidth and
latency test: <br>
qperf myserver tcp_bw tcp_lat</p>

<p style="margin-top: 1em">To run a UDP latency test and
then cause the server to terminate: <br>
qperf myserver udp_lat quit</p>

<p style="margin-top: 1em">To measure the RDMA UD latency
and bandwidth: <br>
qperf myserver ud_lat ud_bw</p>

<p style="margin-top: 1em">To measure RDMA UC
bi-directional bandwidth: <br>
qperf myserver rc_bi_bw</p>

<p style="margin-top: 1em">To get a range of TCP latencies
with a message size from 1 to 64K <br>
qperf myserver -oo msg_size:1:64K:*2 -vu tcp_lat</p>

<p style="margin-top: 1em">OPTIONS <br>
-ar, --access_recv OnOff <br>
If OnOff is non-zero, data is accessed once received.
Otherwise, data is ignored. By default, OnOff is 0. This can
help to mimic some applications.</p>

<p style="margin-top: 1em">-ar1 Cause received data to be
accessed.</p>

<p style="margin-top: 1em">-ap, --alt_port Port <br>
Set alternate path port. This enables automatic path
failover.</p>

<p style="margin-top: 1em">-lap, --loc_alt_port Port <br>
Set local alternate path port. This enables automatic path
failover.</p>

<p style="margin-top: 1em">-rap, --rem_alt_port Port <br>
Set remote alternate path port. This enables automatic path
failover.</p>

<p style="margin-top: 1em">-ca, --cpu_affinity PN <br>
Set cpu affinity to PN. CPUs are numbered sequentially from
0. If PN is &quot;any&quot;, any cpu is allowed otherwise
the cpu is limited to the one specified.</p>

<p style="margin-top: 1em">-lca, --loc_cpu_affinity PN <br>
Set local processor affinity to PN.</p>

<p style="margin-top: 1em">-rca, --rem_cpu_affinity PN <br>
Set remote processor affinity to PN.</p>

<p style="margin-top: 1em">-f, --flip OnOff <br>
If non-zero, cause sender and receiver to play opposite
roles.</p>

<p style="margin-top: 1em">-f1 Cause sender and receiver to
play opposite roles.</p>

<p style="margin-top: 1em">-h, --help Topic <br>
Print out information about Topic. To see the list of
topics, type qperf --help</p>

<p style="margin-top: 1em">-H, --host Host <br>
Run test between the current node and the qperf running on
node Host. This can also be specified as the first
non-option argument.</p>

<p style="margin-top: 1em">-i, --id Device:Port <br>
Use RDMA Device and Port.</p>

<p style="margin-top: 1em">-li, --loc_id Device:Port <br>
Use local RDMA Device and Port.</p>

<p style="margin-top: 1em">-ri, --rem_id Device:Port <br>
Use remote RDMA Device and Port.</p>

<p style="margin-top: 1em">-lp, --listen_port Port <br>
Set the port we listen on to ListenPort. This must be set to
the same port on both the server and client machines. The
default value is 19765.</p>

<p style="margin-top: 1em">-oo, --loop Var:Init:Last:Incr
<br>
Run a test multiple times sequencing through a series of
values. Var is the loop variable; Init is the initial value;
Last is the value it must not exceed and Incr is the <br>
increment. It is useful to set the --verbose_used (-vu)
option in conjunction with this option.</p>

<p style="margin-top: 1em">-m, --msg_size Size <br>
Set the message size to Size. The default value varies by
test. It is assumed that the value is specified in bytes
however, a trailing kib or K, mib or M, or gib or G <br>
indicates that the size is being specified in kibibytes,
mebibytes or gibibytes respectively while a trailing kb or
k, mb or m, or gb or g indicates kilobytes, megabytes <br>
or gigabytes respectively.</p>

<p style="margin-top: 1em">-mt, --mtu_size Size <br>
Set the MTU size. Only relevant to the RDMA UC/RC tests.
Units are specified in the same manner as the --msg_size
option.</p>

<p style="margin-top: 1em">-n, --no_msgs N <br>
Set test duration by number of messages sent instead of
time.</p>

<p style="margin-top: 1em">-cp, --cq_poll OnOff <br>
Turn polling mode on or off. This is only relevant to the
RDMA tests and determines whether they poll or wait on the
completion queues. If OnOff is 0, they wait; other&acirc;
<br>
wise they poll.</p>

<p style="margin-top: 1em">-lcp, --loc_cq_poll OnOff <br>
Locally turn polling mode on or off.</p>

<p style="margin-top: 1em">-rcp, --rem_cq_poll OnOff <br>
Remotely turn polling mode on or off.</p>

<p style="margin-top: 1em">-cp1 Turn polling mode on.</p>

<p style="margin-top: 1em">-lcp1 Turn local polling mode
on.</p>

<p style="margin-top: 1em">-rcp1 Turn remote polling mode
on.</p>

<p style="margin-top: 1em">-ip, --ip_port Port <br>
Use Port to run the socket tests. This is different from
--listen_port which is used for synchronization. This is
only relevant for the socket tests and refers to the <br>
TCP/UDP/RDS/SCTP port that the test is run on.</p>

<p style="margin-top: 1em">-e, --precision Digits <br>
Set the number of significant digits that are used to report
results.</p>

<p style="margin-top: 1em">-nr, --rd_atomic Max <br>
Set the number of in-flight operations that can be handled
for a RDMA read or atomic operation to Max. This is only
relevant to the RDMA Read and Atomic tests.</p>

<p style="margin-top: 1em">-lnr, --loc_rd_atomic Max <br>
Set local read/atomic count.</p>

<p style="margin-top: 1em">-rnr, --rem_rd_atomic Max <br>
Set remote read/atomic count.</p>

<p style="margin-top: 1em">-sl, --service_level SL <br>
Set RDMA service level to SL. This is only used by the RDMA
tests. The service level must be between 0 and 15. The
default service level is 0.</p>

<p style="margin-top: 1em">-lsl, --loc_service_level SL
<br>
Set local service level.</p>

<p style="margin-top: 1em">-rsl, --rem_service_level SL
<br>
Set remote service level.</p>

<p style="margin-top: 1em">-sb, --sock_buf_size Size <br>
Set the socket buffer size. This is only relevant to the
socket tests.</p>

<p style="margin-top: 1em">-lsb, --loc_sock_buf_size Size
<br>
Set local socket buffer size.</p>

<p style="margin-top: 1em">-rsb, --rem_sock_buf_size Size
<br>
Set remote socket buffer size.</p>

<p style="margin-top: 1em">-sp, --src_path_bits N <br>
Set source path bits. If the LMC is not zero, this will
cause the connection to use a LID with the low order LMC
bits set to N.</p>

<p style="margin-top: 1em">-lsp, --loc_src_path_bits N <br>
Set local source path bits.</p>

<p style="margin-top: 1em">-rsp, --rem_src_path_bits N <br>
Set remote source path bits.</p>

<p style="margin-top: 1em">-sr, --static_rate Rate <br>
Force InfiniBand static rate. Rate can be one of: 2.5, 5,
10, 20, 30, 40, 60, 80, 120, 1xSDR (2.5 Gbps), 1xDDR (5
Gbps), 1xQDR (10 Gbps), 4xSDR (2.5 Gbps), 4xDDR (5 <br>
Gbps), 4xQDR (10 Gbps), 8xSDR (2.5 Gbps), 8xDDR (5 Gbps),
8xQDR (10 Gbps).</p>

<p style="margin-top: 1em">-lsr, --loc_static_rate <br>
Force local InfiniBand static rate</p>

<p style="margin-top: 1em">-rsr, --rem_static_rate <br>
Force remote InfiniBand static rate</p>

<p style="margin-top: 1em">-t, --time Time <br>
Set test duration to Time. Specified in seconds however a
trailing m, h or d indicates that the time is specified in
minutes, hours or days respectively.</p>

<p style="margin-top: 1em">-to, --timeout Time <br>
Set timeout to Time. This is the timeout used for various
things such as exchanging messages. The default is 5
seconds.</p>

<p style="margin-top: 1em">-lto, --loc_timeout Time <br>
Set local timeout to Time. This may be used on the server to
set the timeout when initially exchanging data with each
client. However, as soon as we receive the client&rsquo;s
<br>
parameters, the client&rsquo;s remote timeout will override
this parameter.</p>

<p style="margin-top: 1em">-rto, --rem_timeout Time <br>
Set remote timeout to Time.</p>

<p style="margin-top: 1em">-un, --unify_nodes <br>
Unify the nodes. Describe them in terms of local and remote
rather than send and receive.</p>

<p style="margin-top: 1em">-uu, --unify_units <br>
Unify the units that results are shown in. Uses the lowest
common denominator. Helpful for scripts.</p>

<p style="margin-top: 1em">-ub, --use_bits_per_sec <br>
Use bits/sec rather than bytes/sec when displaying
networking speed.</p>

<p style="margin-top: 1em">-cm, --use_cm OnOff <br>
Use the RDMA Connection Manager (CM) if OnOff is non-zero.
It is necessary to use the CM for iWARP devices. The default
is to establish the connection without using the <br>
CM. This only works for the tests that use the RC
transport.</p>

<p style="margin-top: 1em">-cm1 Use RDMA Connection
Manager.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Provide more detailed output. Turns on -vc, -vs, -vt and
-vu.</p>

<p style="margin-top: 1em">-vc, --verbose_conf <br>
Provide information on configuration.</p>

<p style="margin-top: 1em">-vs, --verbose_stat <br>
Provide information on statistics.</p>

<p style="margin-top: 1em">-vt, --verbose_time <br>
Provide information on timing.</p>

<p style="margin-top: 1em">-vu, --verbose_used <br>
Provide information on parameters used.</p>

<p style="margin-top: 1em">-vv, --verbose_more <br>
Provide even more detailed output. Turns on -vvc, -vvs, -vvt
and -vvu.</p>

<p style="margin-top: 1em">-vvc, --verbose_more_conf <br>
Provide more information on configuration.</p>

<p style="margin-top: 1em">-vvs, --verbose_more_stat <br>
Provide more information on statistics.</p>

<p style="margin-top: 1em">-vvt, --verbose_more_time <br>
Provide more information on timing.</p>

<p style="margin-top: 1em">-vvu, --verbose_more_used <br>
Provide more information on parameters used.</p>

<p style="margin-top: 1em">-V, --version <br>
The current version of qperf is printed.</p>

<p style="margin-top: 1em">-ws, --wait_server Time <br>
If the server is not ready, continue to try connecting for
Time seconds before giving up. The default is 5 seconds.</p>

<p style="margin-top: 1em">TESTS <br>
conf Show configuration</p>

<p style="margin-top: 1em">quit Cause the server to
quit</p>

<p style="margin-top: 1em">rds_bw RDS streaming one way
bandwidth</p>

<p style="margin-top: 1em">rds_lat <br>
RDS one way latency</p>

<p style="margin-top: 1em">sctp_bw <br>
SCTP streaming one way bandwidth</p>

<p style="margin-top: 1em">sctp_lat <br>
SCTP one way latency</p>

<p style="margin-top: 1em">tcp_bw TCP streaming one way
bandwidth</p>

<p style="margin-top: 1em">tcp_lat <br>
TCP one way latency</p>

<p style="margin-top: 1em">udp_bw UDP streaming one way
bandwidth</p>

<p style="margin-top: 1em">udp_lat <br>
UDP one way latency</p>

<p style="margin-top: 1em">rc_bi_bw <br>
RC streaming two way bandwidth</p>

<p style="margin-top: 1em">rc_bw RC streaming one way
bandwidth</p>

<p style="margin-top: 1em">rc_lat RC one way latency</p>

<p style="margin-top: 1em">uc_bi_bw <br>
UC streaming two way bandwidth</p>

<p style="margin-top: 1em">uc_bw UC streaming one way
bandwidth</p>

<p style="margin-top: 1em">uc_lat UC one way latency</p>

<p style="margin-top: 1em">ud_bi_bw <br>
UD streaming two way bandwidth</p>

<p style="margin-top: 1em">ud_bw UD streaming one way
bandwidth</p>

<p style="margin-top: 1em">ud_lat UD one way latency</p>

<p style="margin-top: 1em">xrc_bi_bw <br>
XRC streaming two way bandwidth</p>

<p style="margin-top: 1em">xrc_bw XRC streaming one way
bandwidth</p>

<p style="margin-top: 1em">xrc_lat <br>
XRC one way latency</p>

<p style="margin-top: 1em">rc_rdma_read_bw <br>
RC RDMA read streaming one way bandwidth</p>

<p style="margin-top: 1em">rc_rdma_read_lat <br>
RC RDMA read one way latency</p>

<p style="margin-top: 1em">rc_rdma_write_bw <br>
RC RDMA write streaming one way bandwidth</p>

<p style="margin-top: 1em">rc_rdma_write_lat <br>
RC RDMA write one way latency</p>

<p style="margin-top: 1em">rc_rdma_write_poll_lat <br>
RC RDMA write one way polling latency</p>

<p style="margin-top: 1em">uc_rdma_write_bw <br>
UC RDMA write streaming one way bandwidth</p>

<p style="margin-top: 1em">uc_rdma_write_lat <br>
UC RDMA write one way latency</p>

<p style="margin-top: 1em">uc_rdma_write_poll_lat <br>
UC RDMA write one way polling latency</p>

<p style="margin-top: 1em">rc_compare_swap_mr <br>
RC compare and swap messaging rate</p>

<p style="margin-top: 1em">rc_fetch_add_mr <br>
RC fetch and add messaging rate</p>

<p style="margin-top: 1em">ver_rc_compare_swap <br>
Verify RC compare and swap</p>

<p style="margin-top: 1em">ver_rc_fetch_add <br>
Verify RC fetch and add</p>

<p style="margin-top: 1em">AUTHOR <br>
Written by Johann George.</p>

<p style="margin-top: 1em">BUGS <br>
None of the RDMA tests are available if qperf is compiled
without the RDMA libraries. None of the XRC tests are
available if qperf is compiled without the XRC extensions.
The <br>
-f option is not yet implemented in many of the tests.</p>

<p style="margin-top: 1em">qperf November 2016 QPERF(1)</p>
<hr>
</body>
</html>
