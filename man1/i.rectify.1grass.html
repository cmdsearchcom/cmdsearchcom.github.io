<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>i.rectify(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">i.rectify(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">i.rectify(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>i.rectify</b> - Rectifies an image by computing a coordinate
  transformation for each pixel in the image based on the control points.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
imagery, rectify
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>i.rectify</b>
<div>&#x00A0;</div>
<b>i.rectify --help</b>
<div>&#x00A0;</div>
<b>i.rectify</b> [-<b>cat</b>] <b>group</b>=<i>name</i>
  [<b>input</b>=<i>name</i>[, <i>name</i>,...]] <b>extension</b>=<i>string</i>
  <b>order</b>=<i>integer</i> [<b>resolution</b>=<i>float</i>]
  [<b>memory</b>=<i>memory in MB</i>] [<b>method</b>=<i>string</i>]
  [--<b>help</b>] [-- <b>verbose</b>] [--<b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use current region settings in target location (def.=calculate smallest
      area)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Rectify all raster maps in group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use thin plate spline</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>group</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input imagery group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name[,</i><i>name</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input raster map(s)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>extension</b>=<i>string</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output raster map(s) suffix</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>order</b>=<i>integer</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Rectification polynomial order (1-3)
    <div>&#x00A0;</div>
    Options: <i>1-3</i>
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>resolution</b>=<i>float</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Target resolution (ignored if -c flag used)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>memory</b>=<i>memory in MB</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Amount of memory to use in MB
    <div>&#x00A0;</div>
    Default: <i>300</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>method</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Interpolation method to use
    <div>&#x00A0;</div>
    Options: <i>nearest, linear, cubic, lanczos, linear_f, cubic_f,
      lanczos_f</i>
    <div>&#x00A0;</div>
    Default: <i>nearest</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>i.rectify</i> uses the control points included in the source data or
  identified with the Ground Control Points Manager to calculate a
  transformation matrix and then converts x,y cell coordinates to standard map
  coordinates for each pixel in the image. The result is a planimetric image
  with a transformed coordinate system (i.e., a different coordinate system than
  before it was rectified). Supported transformation methods are first, second,
  and third order polynomial and thin plate spline. Thin plate spline is
  recommended for ungeoreferenced satellite imagery where ground control points
  (GCPs) are included. Examples are NOAA/AVHRR and ENVISAT imagery which include
  throusands of GCPs.
<div class="Pp"></div>
If no ground control points are available, the Ground Control Points Manager
  must be run before <i>i.rectify</i>. An image must be georeferences before it
  can reside in a standard coordinate LOCATION, and therefore be analyzed with
  the other map layers in the standard coordinate LOCATION. Upon completion of
  <i>i.rectify</i>, the rectified image is deposited in the target standard
  coordinate LOCATION. This LOCATION is selected using <i>i.target</i>.
<div class="Pp"></div>
More than one raster map may be rectified at a time. Each cell file should be
  given a unique output file name. The rectified image or rectified raster maps
  will be located in the target LOCATION when the program is completed. The
  original unrectified files are not modified or removed.
<div class="Pp"></div>
If the <b>-c</b> flag is used, <i>i.rectify</i> will only rectify that portion
  of the image or raster map that occurs within the chosen window region in the
  target location, and only that portion of the cell file will be relocated in
  the target database. It is important therefore, to check the current mapset
  window in the target LOCATION if the <b>-c</b> flag is used.
<div class="Pp"></div>
If you are rectifying a file with plans to patch it to another file using the
  GRASS program <i>r.patch</i>, choose option number one, the current window in
  the target location. This window, however, must be the default window for the
  target LOCATION. When a file being rectified is smaller than the default
  window in which it is being rectified, NULLs are added to the rectified file.
  Patching files of the same size that contain NULL data, eliminates the
  possibility of a no-data line in the patched result. This is because, when the
  images are patched, the NULLs in the image are &quot;covered&quot; with
  non-NULL pixel values. When rectifying files that are going to be patched,
  rectify all of the files using the same default window.
<h2 class="Ss" title="Ss" id="Coordinate_transformation"><a class="selflink" href="#Coordinate_transformation">Coordinate
  transformation</a></h2>
The desired order of transformation (1, 2, or 3) is selected with the
  <b>order</b> option. The program will calculate the RMSE and check the
  required number of points.
<h2 class="Ss" title="Ss" id="Linear_affine_transformation_(1st_order_transformation)"><a class="selflink" href="#Linear_affine_transformation_(1st_order_transformation)">Linear
  affine transformation (1st order transformation)</a></h2>
x&#x2019; = ax + by +c
<div>&#x00A0;</div>
y&#x2019; = Ax + Bt +C The a,b,c,A,B,C are determined by least squares
  regression based on the control points entered. This transformation applies
  scaling, translation and rotation. It is NOT a general purpose
  rubber-sheeting, nor is it ortho-photo rectification using a DEM, not second
  order polynomial, etc. It can be used if (1) you have geometrically correct
  images, and (2) the terrain or camera distortion effect can be ignored.
<h2 class="Ss" title="Ss" id="Polynomial_Transformation_Matrix_(2nd,_3d_order_transformation)"><a class="selflink" href="#Polynomial_Transformation_Matrix_(2nd,_3d_order_transformation)">Polynomial
  Transformation Matrix (2nd, 3d order transformation)</a></h2>
<i>i.rectify</i> uses a first, second, or third order transformation matrix to
  calculate the registration coefficients. The number of control points required
  for a selected order of transformation (represented by n) is
<div>&#x00A0;</div>
((n + 1) * (n + 2) / 2) or 3, 6, and 10 respectively. It is strongly recommended
  that one or more additional points be identified to allow for an
  overly-determined transformation calculation which will generate the Root Mean
  Square (RMS) error values for each included point. The RMS error values for
  all the included control points are immediately recalculated when the user
  selects a different transformation order from the menu bar. The polynomial
  equations are performed using a modified Gaussian elimination method.
<h2 class="Ss" title="Ss" id="Thin_plate_spline_(TPS)_transformation"><a class="selflink" href="#Thin_plate_spline_(TPS)_transformation">Thin
  plate spline (TPS) transformation</a></h2>
TPS transformation is selected with the <b>-t</b> flag. This method of
  coordinate transformation is recommended for satellite imagery where hundreds
  or thousands of GCPs are included, and for historical printed or scanned maps
  with unknown georeferencing and/or known localized distortions.
<div class="Pp"></div>
TPS combines a linear affine transformation with individual transformation
  coefficients for each GCP, using the radial basis kernel function with the
  distance <i>dist</i> between any two points:
<div>&#x00A0;</div>
dist2 * log(dist) As a consequence, localized distortions can be removed with
  TPS transformation. For example, scan line sensors will have due to the
  changing viewing angle larger distortions towards the end points of the scan
  line than at the center of the scan line. Even higher order polynomial
  transformations are not able to remove these locally different distortions,
  but TPS transformation can. For best results, TPS requires an even and, for
  localized distortions, dense spacing of GCPs.
<h2 class="Ss" title="Ss" id="Resampling_method"><a class="selflink" href="#Resampling_method">Resampling
  method</a></h2>
The rectified data is resampled with one of seven different methods:
  <i>nearest</i>, <i>bilinear</i>, <i>cubic</i>, <i>lanczos</i>,
  <i>bilinear_f</i>, <i>cubic_f</i>, or <i>lanczos_f</i>.
<div class="Pp"></div>
The <i>method=nearest</i> method, which performs a nearest neighbor assignment,
  is the fastest of the resampling methods. It is primarily used for categorical
  data such as a land use classification, since it will not change the values of
  the data cells. The <i>method=bilinear</i> method determines the new value of
  the cell based on a weighted distance average of the 4 surrounding cells in
  the input map. The <i>method=cubic</i> method determines the new value of the
  cell based on a weighted distance average of the 16 surrounding cells in the
  input map. The <i>method=lanczos</i> method determines the new value of the
  cell based on a weighted distance average of the 25 surrounding cells in the
  input map.
<div class="Pp"></div>
The bilinear, cubic and lanczos interpolation methods are most appropriate for
  continuous data and cause some smoothing. These options should not be used
  with categorical data, since the cell values will be altered.
<div class="Pp"></div>
In the bilinear, cubic and lanczos methods, if any of the surrounding cells used
  to interpolate the new cell value are NULL, the resulting cell will be NULL,
  even if the nearest cell is not NULL. This will cause some thinning along NULL
  borders, such as the coasts of land areas in a DEM. The bilinear_f, cubic_f
  and lanczos_f interpolation methods can be used if thinning along NULL edges
  is not desired. These methods &quot;fall back&quot; to simpler interpolation
  methods along NULL borders. That is, from lanczos to cubic to bilinear to
  nearest.
<div class="Pp"></div>
If nearest neighbor assignment is used, the output map has the same raster
  format as the input map. If any of the other interpolations is used, the
  output map is written as floating point.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
If <i>i.rectify</i> starts normally but after some time the following text is
  seen:
<div>&#x00A0;</div>
ERROR: Error writing segment file
<div>&#x00A0;</div>
the user may try the <b>-c</b> flag or the module needs more free space on the
  hard drive.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The GRASS 4 <i></i> <i>Image</i> <i>Processing manual</i>
<div class="Pp"></div>
<i></i> <i>m.transform,</i> <i>r.proj,</i> <i>v.proj,</i> <i>i.group,</i>
  <i>i.target</i>
<div>&#x00A0;</div>
Ground Control Points Manager
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
William R. Enslin, Michigan State University, Center for Remote Sensing
<div class="Pp"></div>
Modified for GRASS 5.0 by:
<div>&#x00A0;</div>
Luca Palmeri (palmeri@ux1.unipd.it)
<div>&#x00A0;</div>
Bill Hughes
<div>&#x00A0;</div>
Pierre de Mouveaux (pmx@audiovu.com)
<div>&#x00A0;</div>
CMD mode by Bob Covill
<div class="Pp"></div>
<i>Last changed: $Date: 2013-06-04 21:23:48 +0200 (Tue, 04 Jun 2013) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: i.rectify source code (history)
<div class="Pp"></div>
Main index | Imagery index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
