<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>dpkg-source(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dpkg-source(1)</td>
    <td class="head-vol">dpkg utilities</td>
    <td class="head-rtitle">dpkg-source(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dpkg-source - Debian source package (.dsc) manipulation tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dpkg-source</b> [<i>option</i>...] <i>command</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>dpkg-source</b> packs and unpacks Debian source archives.
<div style="height: 1.00em;">&#x00A0;</div>
None of these commands allow multiple options to be combined into one, and they
  do not allow the value for an option to be specified in a separate argument.
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b>, <b>--extract</b> <i>filename</i>.dsc
    [<i>output-directory</i>]</dt>
  <dd class="It-tag">Extract a source package (<b>--extract</b> since dpkg
      1.17.14). One non-option argument must be supplied, the name of the Debian
      source control file (<b>.dsc</b>). An optional second non-option argument
      may be supplied to specify the directory to extract the source package to,
      this must not exist. If no output directory is specified, the source
      package is extracted into a directory named <i>source</i>-<i>version</i>
      under the current working directory.
    <div style="height: 1.00em;">&#x00A0;</div>
    <b>dpkg-source</b> will read the names of the other file(s) making up the
      source package from the control file; they are assumed to be in the same
      directory as the <b>.dsc</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    The files in the extracted package will have their permissions and
      ownerships set to those which would have been expected if the files and
      directories had simply been created - directories and executable files
      will be 0777 and plain files will be 0666, both modified by the
      extractors' umask; if the parent directory is setgid then the extracted
      directories will be too, and all the files and directories will inherit
      its group ownership.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the source package uses a non-standard format (currently this means all
      formats except &#x201C;1.0&#x201D;), its name will be stored in
      <b>debian/source/format</b> so that the following builds of the source
      package use the same format by default.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>, <b>--build</b> <i>directory</i>
    [<i>format-specific-parameters</i>]</dt>
  <dd class="It-tag">Build a source package (<b>--build</b> since dpkg 1.17.14).
      The first non-option argument is taken as the name of the directory
      containing the debianized source tree (i.e. with a debian sub-directory
      and maybe changes to the original files). Depending on the source package
      format used to build the package, additional parameters might be accepted.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>dpkg-source</b> will build the source package with the first format
      found in this ordered list: the format indicated with the <i>--format</i>
      command line option, the format indicated in <b>debian/source/format</b>,
      &#x201C;1.0&#x201D;. The fallback to &#x201C;1.0&#x201D; is deprecated and
      will be removed at some point in the future, you should always document
      the desired source format in <b>debian/source/format</b>. See section
      <b>SOURCE PACKAGE FORMATS</b> for an extensive description of the various
      source package formats.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--print-format</b> <i>directory</i></dt>
  <dd class="It-tag">Print the source format that would be used to build the
      source package if <b>dpkg-source --build </b><i>directory</i> was called
      (in the same conditions and with the same parameters; since dpkg 1.15.5).
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--before-build</b> <i>directory</i></dt>
  <dd class="It-tag">Run the corresponding hook of the source package format
      (since dpkg 1.15.8). This hook is called before any build of the package (
      <b>dpkg-buildpackage</b> calls it very early even before <b>debian/rules
      clean</b>). This command is idempotent and can be called multiple times.
      Not all source formats implement something in this hook, and those that do
      usually prepare the source tree for the build for example by ensuring that
      the Debian patches are applied.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--after-build</b> <i>directory</i></dt>
  <dd class="It-tag">Run the corresponding hook of the source package format
      (since dpkg 1.15.8). This hook is called after any build of the package (
      <b>dpkg-buildpackage</b> calls it last). This command is idempotent and
      can be called multiple times. Not all source formats implement something
      in this hook, and those that do usually use it to undo what
      <b>--before-build</b> has done.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--commit</b> [<i>directory</i>] ...</dt>
  <dd class="It-tag">Record changes in the source tree unpacked in
      <i>directory</i> (since dpkg 1.16.1). This command can take supplementary
      parameters depending on the source format. It will error out for formats
      where this operation doesn't mean anything.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b>, <b>--help</b></dt>
  <dd class="It-tag">Show the usage message and exit. The format specific build
      and extract options can be shown by using the <b>--format</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Show the version and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<h2 class="Ss" title="Ss" id="Generic_build_options"><a class="selflink" href="#Generic_build_options">Generic
  build options</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b><i>control-file</i></dt>
  <dd class="It-tag">Specifies the main source control file to read information
      from. The default is <b>debian/control</b>. If given with relative
      pathname this is interpreted starting at the source tree's top level
      directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b><i>changelog-file</i></dt>
  <dd class="It-tag">Specifies the changelog file to read information from. The
      default is <b>debian/changelog</b>. If given with relative pathname this
      is interpreted starting at the source tree's top level directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F</b><i>changelog-format</i></dt>
  <dd class="It-tag">Specifies the format of the changelog. See
      <b>dpkg-parsechangelog</b>(1) for information about alternative
    formats.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--format=</b><i>value</i></dt>
  <dd class="It-tag">Use the given format for building the source package (since
      dpkg 1.14.17). It does override any format given in
      <b>debian/source/format</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b><i>name</i><b>=</b><i>value</i></dt>
  <dd class="It-tag">Set an output substitution variable. See
      <b>deb-substvars</b>(5) for a discussion of output substitution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T</b><i>substvars-file</i></dt>
  <dd class="It-tag">Read substitution variables in <i>substvars-file</i>; the
      default is to not read any file. This option can be used multiple times to
      read substitution variables from multiple files (since dpkg 1.15.6).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b><i>field</i><b>=</b><i>value</i></dt>
  <dd class="It-tag">Override or add an output control file field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-U</b><i>field</i></dt>
  <dd class="It-tag">Remove an output control file field.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Z</b><i>compression</i>,
    <b>--compression</b>=<i>compression</i></dt>
  <dd class="It-tag">Specify the compression to use for created tarballs and
      diff files ( <b>--compression</b> since dpkg 1.15.5). Note that this
      option will not cause existing tarballs to be recompressed, it only
      affects new files. Supported values are: <i>gzip</i>, <i>bzip2</i>,
      <i>lzma</i> and <i>xz</i>. The default is <i>xz</i> for formats 2.0 and
      newer, and <i>gzip</i> for format 1.0. <i>xz</i> is only supported since
      dpkg 1.15.5.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z</b><i>level</i>,
    <b>--compression-level</b>=<i>level</i></dt>
  <dd class="It-tag">Compression level to use (<b>--compression-level</b> since
      dpkg 1.15.5). As with <b>-Z</b> it only affects newly created files.
      Supported values are: <i>1</i> to <i>9</i>, <i>best</i>, and <i>fast</i>.
      The default is <i>9</i> for gzip and bzip2, <i>6</i> for xz and lzma.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>[<i>regex</i>],
    <b>--diff-ignore</b>[=<i>regex</i>]</dt>
  <dd class="It-tag">You may specify a perl regular expression to match files
      you want filtered out of the list of files for the diff (
      <b>--diff-ignore</b> since dpkg 1.15.6). (This list is generated by a find
      command.) (If the source package is being built as a version 3 source
      package using a VCS, this can be used to ignore uncommited changes on
      specific files. Using -i.* will ignore all of them.)
    <div style="height: 1.00em;">&#x00A0;</div>
    The <b>-i</b> option by itself enables this setting with a default regex
      (preserving any modification to the default regex done by a previous use
      of <b>--extend-diff-ignore</b>) that will filter out control files and
      directories of the most common revision control systems, backup and swap
      files and Libtool build output directories. There can only be one active
      regex, of multiple <b>-i</b> options only the last one will take effect.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is very helpful in cutting out extraneous files that get included in
      the diff, e.g. if you maintain your source in a revision control system
      and want to use a checkout to build a source package without including the
      additional files and directories that it will usually contain (e.g. CVS/,
      .cvsignore, .svn/). The default regex is already very exhaustive, but if
      you need to replace it, please note that by default it can match any part
      of a path, so if you want to match the begin of a filename or only full
      filenames, you will need to provide the necessary anchors (e.g.
      &#x2018;(^|/)&#x2019;, &#x2018;($|/)&#x2019;) yourself.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--extend-diff-ignore</b>=<i>regex</i></dt>
  <dd class="It-tag">The perl regular expression specified will extend the
      default value used by <b>--diff-ignore</b> and its current value, if set
      (since dpkg 1.15.6). It does this by concatenating &#x201C;
      <b>|</b><i>regex</i>&#x201D; to the existing value. This option is
      convenient to use in <b>debian/source/options</b> to exclude some
      auto-generated files from the automatic patch generation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I</b>[<i>file-pattern</i>],
    <b>--tar-ignore</b>[=<i>file-pattern</i>]</dt>
  <dd class="It-tag">If this option is specified, the pattern will be passed to
      <b>tar</b>(1)'s <b>--exclude</b> option when it is called to generate a
      .orig.tar or .tar file ( <b>--tar-ignore</b> since dpkg 1.15.6). For
      example, <b>-I</b>CVS will make tar skip over CVS directories when
      generating a .tar.gz file. The option may be repeated multiple times to
      list multiple patterns to exclude.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>-I</b> by itself adds default <b>--exclude</b> options that will filter
      out control files and directories of the most common revision control
      systems, backup and swap files and Libtool build output directories.</dd>
</dl>
<div class="Pp"></div>
<b>Note:</b> While they have similar purposes, <b>-i</b> and <b>-I</b> have very
  different syntax and semantics. <b>-i</b> can only be specified once and takes
  a perl compatible regular expression which is matched against the full
  relative path of each file. <b>-I</b> can specified multiple times and takes a
  filename pattern with shell wildcards. The pattern is applied to the full
  relative path but also to each part of the path individually. The exact
  semantic of tar's <b>--exclude</b> option is somewhat complicated, see
  https://www.gnu.org/software/tar/manual/tar.html#wildcards for a full
  documentation.
<div style="height: 1.00em;">&#x00A0;</div>
The default regex and patterns for both options can be seen in the output of the
  <b>--help</b> command.
<h2 class="Ss" title="Ss" id="Generic_extract_options"><a class="selflink" href="#Generic_extract_options">Generic
  extract options</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-copy</b></dt>
  <dd class="It-tag">Do not copy original tarballs near the extracted source
      package (since dpkg 1.14.17).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-check</b></dt>
  <dd class="It-tag">Do not check signatures and checksums before unpacking
      (since dpkg 1.14.17).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-overwrite-dir</b></dt>
  <dd class="It-tag">Do not overwrite the extraction directory if it already
      exists (since dpkg 1.18.8).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--require-valid-signature</b></dt>
  <dd class="It-tag">Refuse to unpack the source package if it doesn't contain
      an OpenPGP signature that can be verified (since dpkg 1.15.0) either with
      the user's <i>trustedkeys.gpg</i> keyring, one of the vendor-specific
      keyrings, or one of the official Debian keyrings (
      <i>/usr/share/keyrings/debian-keyring.gpg</i> and
      <i>/usr/share/keyrings/debian-maintainers.gpg</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--require-strong-checksums</b></dt>
  <dd class="It-tag">Refuse to unpack the source package if it does not contain
      any strong checksums (since dpkg 1.18.7). Currently the only known
      checksum considered strong is <b>SHA-256</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-bad-version</b></dt>
  <dd class="It-tag">Turns the bad source package version check into a non-fatal
      warning (since dpkg 1.17.7). This option should only be necessary when
      extracting ancient source packages with broken versions, just for
      backwards compatibility.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SOURCE_PACKAGE_FORMATS"><a class="selflink" href="#SOURCE_PACKAGE_FORMATS">SOURCE
  PACKAGE FORMATS</a></h1>
If you don't know what source format to use, you should probably pick either
  &#x201C;3.0 (quilt)&#x201D; or &#x201C;3.0 (native)&#x201D;. See
  https://wiki.debian.org/Projects/DebSrc3.0 for information on the deployment
  of those formats within Debian.
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Format:_1.0"><a class="selflink" href="#Format:_1.0">Format:
  1.0</a></h2>
A source package in this format consists either of a <b>.orig.tar.gz</b>
  associated to a <b>.diff.gz</b> or a single <b>.tar.gz</b> (in that case the
  package is said to be <i>native</i>). Optionally the original tarball might be
  accompanied by a detached upstream signature <b>.orig.tar.gz.asc</b>,
  extraction supported since dpkg 1.18.5.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Extracting</b>
<div style="height: 1.00em;">&#x00A0;</div>
Extracting a native package is a simple extraction of the single tarball in the
  target directory. Extracting a non-native package is done by first unpacking
  the <b>.orig.tar.gz</b> and then applying the patch contained in the
  <b>.diff.gz</b> file. The timestamp of all patched files is reset to the
  extraction time of the source package (this avoids timestamp skews leading to
  problems when autogenerated files are patched). The diff can create new files
  (the whole debian directory is created that way) but can't remove files (empty
  files will be left over).
<div style="height: 1.00em;">&#x00A0;</div>
<b>Building</b>
<div style="height: 1.00em;">&#x00A0;</div>
Building a native package is just creating a single tarball with the source
  directory. Building a non-native package involves extracting the original
  tarball in a separate &#x201C;.orig&#x201D; directory and regenerating the
  <b>.diff.gz</b> by comparing the source package <i>directory</i> with the
  .orig directory.
<div style="height: 1.00em;">&#x00A0;</div>
<b>Build options (with --build):</b>
<div style="height: 1.00em;">&#x00A0;</div>
If a second non-option argument is supplied it should be the name of the
  original source directory or tarfile or the empty string if the package is a
  Debian-specific one and so has no Debianisation diffs. If no second argument
  is supplied then <b>dpkg-source</b> will look for the original source tarfile
  <i>package</i><b>_</b><i>upstream-version</i><b>.orig.tar.gz</b> or the
  original source directory <i>directory</i><b>.orig</b> depending on the
  <b>-sX</b> arguments.
<div style="height: 1.00em;">&#x00A0;</div>
<b>-sa</b>, <b>-sp</b>, <b>-sk</b>, <b>-su</b> and <b>-sr</b> will not overwrite
  existing tarfiles or directories. If this is desired then <b>-sA</b>,
  <b>-sP</b>, <b>-sK</b>, <b>-sU</b> and <b>-sR</b> should be used instead.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sk</b></dt>
  <dd class="It-tag">Specifies to expect the original source as a tarfile, by
      default
      <i>package</i><b>_</b><i>upstream-version</i><b>.orig.tar.</b><i>extension</i><b>.</b>
      It will leave this original source in place as a tarfile, or copy it to
      the current directory if it isn't already there. The tarball will be
      unpacked into <i>directory</i><b>.orig</b> for the generation of the
    diff.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sp</b></dt>
  <dd class="It-tag">Like <b>-sk</b> but will remove the directory again
      afterwards.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-su</b></dt>
  <dd class="It-tag">Specifies that the original source is expected as a
      directory, by default
      <i>package</i><b>-</b><i>upstream-version</i><b>.orig</b> and
      <b>dpkg-source</b> will create a new original source archive from it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sr</b></dt>
  <dd class="It-tag">Like <b>-su</b> but will remove that directory after it has
      been used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ss</b></dt>
  <dd class="It-tag">Specifies that the original source is available both as a
      directory and as a tarfile. <b>dpkg-source</b> will use the directory to
      create the diff, but the tarfile to create the <b>.dsc</b>. This option
      must be used with care - if the directory and tarfile do not match a bad
      source archive will be generated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sn</b></dt>
  <dd class="It-tag">Specifies to not look for any original source, and to not
      generate a diff. The second argument, if supplied, must be the empty
      string. This is used for Debian-specific packages which do not have a
      separate upstream source and therefore have no debianisation diffs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sa</b> or <b>-sA</b></dt>
  <dd class="It-tag">Specifies to look for the original source archive as a
      tarfile or as a directory - the second argument, if any, may be either, or
      the empty string (this is equivalent to using <b>-sn</b>). If a tarfile is
      found it will unpack it to create the diff and remove it afterwards (this
      is equivalent to <b>-sp</b>); if a directory is found it will pack it to
      create the original source and remove it afterwards (this is equivalent to
      <b>-sr</b>); if neither is found it will assume that the package has no
      debianisation diffs, only a straightforward source archive (this is
      equivalent to <b>-sn</b>). If both are found then <b>dpkg-source</b> will
      ignore the directory, overwriting it, if <b>-sA</b> was specified (this is
      equivalent to <b>-sP</b>) or raise an error if <b>-sa</b> was specified.
      <b>-sA</b> is the default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--abort-on-upstream-changes</b></dt>
  <dd class="It-tag">The process fails if the generated diff contains changes to
      files outside of the debian sub-directory (since dpkg 1.15.8). This option
      is not allowed in <b>debian/source/options</b> but can be used in
      <b>debian/source/local-options</b>.</dd>
</dl>
<div class="Pp"></div>
<b>Extract options (with --extract):</b>
<div style="height: 1.00em;">&#x00A0;</div>
In all cases any existing original source tree will be removed.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sp</b></dt>
  <dd class="It-tag">Used when extracting then the original source (if any) will
      be left as a tarfile. If it is not already located in the current
      directory or if an existing but different file is there it will be copied
      there. ( <b>This is the default</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-su</b></dt>
  <dd class="It-tag">Unpacks the original source tree.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sn</b></dt>
  <dd class="It-tag">Ensures that the original source is neither copied to the
      current directory nor unpacked. Any original source tree that was in the
      current directory is still removed.</dd>
</dl>
<div class="Pp"></div>
All the <b>-s</b><i>X</i> options are mutually exclusive. If you specify more
  than one only the last one will be used.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--skip-debianization</b></dt>
  <dd class="It-tag">Skips application of the debian diff on top of the upstream
      sources (since dpkg 1.15.1).</dd>
</dl>
<h2 class="Ss" title="Ss" id="Format:_2.0"><a class="selflink" href="#Format:_2.0">Format:
  2.0</a></h2>
Extraction supported since dpkg 1.13.9, building supported since dpkg 1.14.8.
  Also known as wig&amp;pen. This format is not recommended for wide-spread
  usage, the format &#x201C;3.0 (quilt)&#x201D; replaces it. Wig&amp;pen was the
  first specification of a new-generation source package format.
<div style="height: 1.00em;">&#x00A0;</div>
The behaviour of this format is the same as the &#x201C;3.0 (quilt)&#x201D;
  format except that it doesn't use an explicit list of patches. All files in
  <b>debian/patches/</b> matching the perl regular expression <b>[\w-]+</b> must
  be valid patches: they are applied at extraction time.
<div style="height: 1.00em;">&#x00A0;</div>
When building a new source package, any change to the upstream source is stored
  in a patch named <b>zz_debian-diff-auto</b>.
<h2 class="Ss" title="Ss" id="Format:_3.0_(native)"><a class="selflink" href="#Format:_3.0_(native)">Format:
  3.0 (native)</a></h2>
Supported since dpkg 1.14.17. This format is an extension of the native package
  format as defined in the 1.0 format. It supports all compression methods and
  will ignore by default any VCS specific files and directories as well as many
  temporary files (see default value associated to <b>-I</b> option in the
  <b>--help</b> output).
<h2 class="Ss" title="Ss" id="Format:_3.0_(quilt)"><a class="selflink" href="#Format:_3.0_(quilt)">Format:
  3.0 (quilt)</a></h2>
Supported since dpkg 1.14.17. A source package in this format contains at least
  an original tarball ( <b>.orig.tar.</b><i>ext</i> where <i>ext</i> can be
  <b>gz</b>, <b>bz2</b>, <b>lzma</b> and <b>xz</b>) and a debian tarball (
  <b>.debian.tar.</b> <i>ext</i>). It can also contain additional original
  tarballs ( <b>.orig-</b><i>component</i><b>.tar.</b><i>ext</i>).
  <i>component</i> can only contain alphanumeric characters and hyphens
  (&#x2018;-&#x2019;). Optionally each original tarball can be accompanied by a
  detached upstream signature ( <b>.orig.tar.</b><i>ext</i><b>.asc</b> and
  <b>.orig-</b> <i>component</i><b>.tar.</b><i>ext</i><b>.asc</b>), extraction
  supported since dpkg 1.17.20, building supported since dpkg 1.18.5.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>Extracting</b>
<div class="Pp"></div>
The main original tarball is extracted first, then all additional original
  tarballs are extracted in subdirectories named after the <i>component</i> part
  of their filename (any pre-existing directory is replaced). The debian tarball
  is extracted on top of the source directory after prior removal of any
  pre-existing <b>debian</b> directory. Note that the debian tarball must
  contain a <b>debian</b> sub-directory but it can also contain binary files
  outside of that directory (see <b>--include-binaries</b> option).
<div class="Pp"></div>
All patches listed in <b>debian/patches/debian.series</b> or
  <b>debian/patches/series</b> are then applied. If the former file is used and
  the latter one doesn't exist (or is a symlink), then the latter is replaced
  with a symlink to the former. This is meant to simplify usage of <b>quilt</b>
  to manage the set of patches. Note however that while <b>dpkg-source</b>
  parses correctly series files with explicit options used for patch application
  (stored on each line after the patch filename and one or more spaces), it does
  ignore those options and always expect patches that can be applied with the
  <b>-p1</b> option of <b>patch</b>. It will thus emit a warning when it
  encounters such options, and the build is likely to fail.
<div class="Pp"></div>
The timestamp of all patched files is reset to the extraction time of the source
  package (this avoids timestamp skews leading to problems when autogenerated
  files are patched).
<div class="Pp"></div>
Contrary to <b>quilt</b>'s default behaviour, patches are expected to apply
  without any fuzz. When that is not the case, you should refresh such patches
  with <b>quilt</b>, or <b>dpkg-source</b> will error out while trying to apply
  them.
<div class="Pp"></div>
Similarly to <b>quilt</b>'s default behaviour, the patches can remove files too.
<div class="Pp"></div>
The file <b>.pc/applied-patches</b> is created if some patches have been applied
  during the extraction.
<div class="Pp"></div>
<b>Building</b>
<div class="Pp"></div>
All original tarballs found in the current directory are extracted in a
  temporary directory by following the same logic as for the unpack, the debian
  directory is copied over in the temporary directory, and all patches except
  the automatic patch ( <b>debian-changes-</b><i>version</i> or
  <b>debian-changes</b>, depending on <b>--single-debian-patch</b>) are applied.
  The temporary directory is compared to the source package directory. When the
  diff is non-empty, the build fails unless <b>--single-debian-patch</b> or
  <b>--auto-commit</b> has been used, in which case the diff is stored in the
  automatic patch. If the automatic patch is created/deleted, it's added/removed
  from the series file and from the <b>quilt</b> metadata.
<div style="height: 1.00em;">&#x00A0;</div>
Any change on a binary file is not representable in a diff and will thus lead to
  a failure unless the maintainer deliberately decided to include that modified
  binary file in the debian tarball (by listing it in
  <b>debian/source/include-binaries</b>). The build will also fail if it finds
  binary files in the debian sub-directory unless they have been whitelisted
  through <b>debian/source/include-binaries</b>.
<div style="height: 1.00em;">&#x00A0;</div>
The updated debian directory and the list of modified binaries is then used to
  generate the debian tarball.
<div style="height: 1.00em;">&#x00A0;</div>
The automatically generated diff doesn't include changes on VCS specific files
  as well as many temporary files (see default value associated to <b>-i</b>
  option in the <b>--help</b> output). In particular, the <b>.pc</b> directory
  used by <b>quilt</b> is ignored during generation of the automatic patch.
<div style="height: 1.00em;">&#x00A0;</div>
Note: <b>dpkg-source</b> <b>--before-build</b> (and <b>--build</b>) will ensure
  that all patches listed in the series file are applied so that a package build
  always has all patches applied. It does this by finding unapplied patches
  (they are listed in the <b>series</b> file but not in
  <b>.pc/applied-patches</b>), and if the first patch in that set can be applied
  without errors, it will apply them all. The option <b>--no-preparation</b> can
  be used to disable this behavior.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>Recording changes</b>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--commit</b> [<i>directory</i>] [<i>patch-name</i>]
    [<i>patch-file</i>]</dt>
  <dd class="It-tag">Generates a patch corresponding to the local changes that
      are not managed by the <b>quilt</b> patch system and integrates it in the
      patch system under the name <i>patch-name</i>. If the name is missing, it
      will be asked interactively. If <i>patch-file</i> is given, it is used as
      the patch corresponding to the local changes to integrate. Once
      integrated, an editor is launched so that you can edit the
      meta-information in the patch header.
    <div style="height: 1.00em;">&#x00A0;</div>
    Passing <i>patch-file</i> is mainly useful after a build failure that
      pre-generated this file, and on this ground the given file is removed
      after integration. Note also that the changes contained in the patch file
      must already be applied on the tree and that the files modified by the
      patch must not have supplementary unrecorded changes.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the patch generation detects modified binary files, they will be
      automatically added to <b>debian/source/include-binaries</b> so that they
      end up in the debian tarball (exactly like <b>dpkg-source</b>
      <b>--include-binaries --build</b> would do).</dd>
</dl>
<div class="Pp"></div>
<b>Build options</b>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--allow-version-of-quilt-db=</b><i>version</i></dt>
  <dd class="It-tag">Allow <b>dpkg-source</b> to build the source package if the
      version of the <b>quilt</b> metadata is the one specified, even if
      <b>dpkg-source</b> doesn't know about it (since dpkg 1.15.5.4).
      Effectively this says that the given version of the <b>quilt</b> metadata
      is compatible with the version 2 that <b>dpkg-source</b> currently
      supports. The version of the <b>quilt</b> metadata is stored in
      <b>.pc/.version</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--include-removal</b></dt>
  <dd class="It-tag">Do not ignore removed files and include them in the
      automatically generated patch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--include-timestamp</b></dt>
  <dd class="It-tag">Include timestamp in the automatically generated
    patch.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--include-binaries</b></dt>
  <dd class="It-tag">Add all modified binaries in the debian tarball. Also add
      them to <b>debian/source/include-binaries</b>: they will be added by
      default in subsequent builds and this option is thus no more needed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-preparation</b></dt>
  <dd class="It-tag">Do not try to prepare the build tree by applying patches
      which are apparently unapplied (since dpkg 1.14.18).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--single-debian-patch</b></dt>
  <dd class="It-tag">Use <b>debian/patches/debian-changes</b> instead of
      <b>debian/patches/debian-changes-</b> <i>version</i> for the name of the
      automatic patch generated during build (since dpkg 1.15.5.4). This option
      is particularly useful when the package is maintained in a VCS and a patch
      set can't reliably be generated. Instead the current diff with upstream
      should be stored in a single patch. The option would be put in
      <b>debian/source/local-options</b> and would be accompanied by a
      <b>debian/source/local-patch-header</b> file explaining how the Debian
      changes can be best reviewed, for example in the VCS that is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--create-empty-orig</b></dt>
  <dd class="It-tag">Automatically create the main original tarball as empty if
      it's missing and if there are supplementary original tarballs (since dpkg
      1.15.6). This option is meant to be used when the source package is just a
      bundle of multiple upstream software and where there's no
      &#x201C;main&#x201D; software.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-unapply-patches, --unapply-patches</b></dt>
  <dd class="It-tag">By default, <b>dpkg-source</b> will automatically unapply
      the patches in the <b>--after-build</b> hook if it did apply them during
      <b>--before-build</b> (<b>--unapply-patches</b> since dpkg 1.15.8,
      <b>--no-unapply-patches</b> since dpkg 1.16.5). Those options allow you to
      forcefully disable or enable the patch unapplication process. Those
      options are only allowed in <b>debian/source/local-options</b> so that all
      generated source packages have the same behavior by default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--abort-on-upstream-changes</b></dt>
  <dd class="It-tag">The process fails if an automatic patch has been generated
      (since dpkg 1.15.8). This option can be used to ensure that all changes
      were properly recorded in separate <b>quilt</b> patches prior to the
      source package build. This option is not allowed in
      <b>debian/source/options</b> but can be used in
      <b>debian/source/local-options</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto-commit</b></dt>
  <dd class="It-tag">The process doesn't fail if an automatic patch has been
      generated, instead it's immediately recorded in the <b>quilt</b> series.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div class="Pp"></div>
<b>Extract options</b>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--skip-debianization</b></dt>
  <dd class="It-tag">Skips extraction of the debian tarball on top of the
      upstream sources (since dpkg 1.15.1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--skip-patches</b></dt>
  <dd class="It-tag">Do not apply patches at the end of the extraction (since
      dpkg 1.14.18).</dd>
</dl>
<h2 class="Ss" title="Ss" id="Format:_3.0_(custom)"><a class="selflink" href="#Format:_3.0_(custom)">Format:
  3.0 (custom)</a></h2>
Supported since dpkg 1.14.17. This format is special. It doesn't represent a
  real source package format but can be used to create source packages with
  arbitrary files.
<div class="Pp"></div>
<b>Build options</b>
<div class="Pp"></div>
All non-option arguments are taken as files to integrate in the generated source
  package. They must exist and are preferably in the current directory. At least
  one file must be given.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--target-format=</b><i>value</i></dt>
  <dd class="It-tag"><b>Required</b>. Defines the real format of the generated
      source package. The generated .dsc file will contain this value in its
      <b>Format</b> field and not &#x201C;3.0 (custom)&#x201D;.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Format:_3.0_(git)"><a class="selflink" href="#Format:_3.0_(git)">Format:
  3.0 (git)</a></h2>
Supported since dpkg 1.14.17. This format is experimental.
<div class="Pp"></div>
A source package in this format consists of a single bundle of a git repository
  <b>.git</b> to hold the source of a package. There may also be a
  <b>.gitshallow</b> file listing revisions for a shallow git clone.
<div class="Pp"></div>
<b>Extracting</b>
<div class="Pp"></div>
The bundle is cloned as a git repository to the target directory. If there is a
  gitshallow file, it is installed as <i>.git/shallow</i> inside the cloned git
  repository.
<div class="Pp"></div>
Note that by default the new repository will have the same branch checked out
  that was checked out in the original source. (Typically
  &#x201C;master&#x201D;, but it could be anything.) Any other branches will be
  available under <i>remotes/origin/</i>.
<div class="Pp"></div>
<b>Building</b>
<div class="Pp"></div>
Before going any further, some checks are done to ensure that we don't have any
  non-ignored uncommitted changes.
<div class="Pp"></div>
<b>git-bundle</b>(1) is used to generate a bundle of the git repository. By
  default, all branches and tags in the repository are included in the bundle.
<div class="Pp"></div>
<b>Build options</b>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--git-ref=</b><i>ref</i></dt>
  <dd class="It-tag">Allows specifying a git ref to include in the git bundle.
      Use disables the default behavior of including all branches and tags. May
      be specified multiple times. The <i>ref</i> can be the name of a branch or
      tag to include. It may also be any parameter that can be passed to
      <b>git-rev-list</b>(1). For example, to include only the master branch,
      use <b>--git-ref=</b>master. To include all tags and branches, except for
      the private branch, use <b>--git-ref=</b>--all
    <b>--git-ref=</b>^private</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--git-depth=</b><i>number</i></dt>
  <dd class="It-tag">Creates a shallow clone with a history truncated to the
      specified number of revisions.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Format:_3.0_(bzr)"><a class="selflink" href="#Format:_3.0_(bzr)">Format:
  3.0 (bzr)</a></h2>
Supported since dpkg 1.14.17. This format is experimental. It generates a single
  tarball containing the bzr repository.
<div class="Pp"></div>
<b>Extracting</b>
<div class="Pp"></div>
The tarball is unpacked and then bzr is used to checkout the current branch.
<div class="Pp"></div>
<b>Building</b>
<div class="Pp"></div>
Before going any further, some checks are done to ensure that we don't have any
  non-ignored uncommitted changes.
<div class="Pp"></div>
Then the VCS specific part of the source directory is copied over to a temporary
  directory. Before this temporary directory is packed in a tarball, various
  cleanup are done to save space.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<h2 class="Ss" title="Ss" id="no_source_format_specified_in_debian/source/format"><a class="selflink" href="#no_source_format_specified_in_debian/source/format">no
  source format specified in debian/source/format</a></h2>
The file <b>debian/source/format</b> should always exist and indicate the
  desired source format. For backwards compatibility, format &#x201C;1.0&#x201D;
  is assumed when the file doesn't exist but you should not rely on this: at
  some point in the future <b>dpkg-source</b> will be modified to fail when that
  file doesn't exist.
<div style="height: 1.00em;">&#x00A0;</div>
The rationale is that format &#x201C;1.0&#x201D; is no longer the recommended
  format, you should usually pick one of the newer formats (&#x201C;3.0
  (quilt)&#x201D;, &#x201C;3.0 (native)&#x201D;) but <b>dpkg-source</b> will not
  do this automatically for you. If you want to continue using the old format,
  you should be explicit about it and put &#x201C;1.0&#x201D; in
  <b>debian/source/format</b>.
<h2 class="Ss" title="Ss" id="the_diff_modifies_the_following_upstream_files"><a class="selflink" href="#the_diff_modifies_the_following_upstream_files">the
  diff modifies the following upstream files</a></h2>
When using source format &#x201C;1.0&#x201D; it is usually a bad idea to modify
  upstream files directly as the changes end up hidden and mostly undocumented
  in the .diff.gz file. Instead you should store your changes as patches in the
  debian directory and apply them at build-time. To avoid this complexity you
  can also use the format &#x201C;3.0 (quilt)&#x201D; that offers this natively.
<h2 class="Ss" title="Ss" id="cannot_represent_change_to_file"><a class="selflink" href="#cannot_represent_change_to_file">cannot
  represent change to <i>file</i></a></h2>
Changes to upstream sources are usually stored with patch files, but not all
  changes can be represented with patches: they can only alter the content of
  plain text files. If you try replacing a file with something of a different
  type (for example replacing a plain file with a symlink or a directory), you
  will get this error message.
<h2 class="Ss" title="Ss" id="newly_created_empty_file_file_will_not_be_represented_in_diff"><a class="selflink" href="#newly_created_empty_file_file_will_not_be_represented_in_diff">newly
  created empty file <i>file</i><b></b> <b>will</b> <b>not</b> <b>be</b>
  <b>represented</b> <b>in</b> <b>diff</b></a></h2>
Empty files can't be created with patch files. Thus this change is not recorded
  in the source package and you are warned about it.
<h2 class="Ss" title="Ss" id="executable_mode_perms_of_file_will_not_be_represented_in_diff"><a class="selflink" href="#executable_mode_perms_of_file_will_not_be_represented_in_diff">executable
  mode <i>perms</i><b></b> <b>of</b> <b></b><i>file</i><b></b> <b>will</b>
  <b>not</b> <b>be</b> <b>represented</b> <b>in</b> <b>diff</b></a></h2>
Patch files do not record permissions of files and thus executable permissions
  are not stored in the source package. This warning reminds you of that fact.
<h2 class="Ss" title="Ss" id="special_mode_perms_of_file_will_not_be_represented_in_diff"><a class="selflink" href="#special_mode_perms_of_file_will_not_be_represented_in_diff">special
  mode <i>perms</i><b></b> <b>of</b> <b></b><i>file</i><b></b> <b>will</b>
  <b>not</b> <b>be</b> <b>represented</b> <b>in</b> <b>diff</b></a></h2>
Patch files do not record permissions of files and thus modified permissions are
  not stored in the source package. This warning reminds you of that fact.
<h1 class="Sh" title="Sh" id="FILE_FORMATS"><a class="selflink" href="#FILE_FORMATS">FILE
  FORMATS</a></h1>
<h2 class="Ss" title="Ss" id="debian/source/format"><a class="selflink" href="#debian/source/format">debian/source/format</a></h2>
This file contains on a single line the format that should be used to build the
  source package (possible formats are described above). No leading or trailing
  spaces are allowed.
<h2 class="Ss" title="Ss" id="debian/source/include-binaries"><a class="selflink" href="#debian/source/include-binaries">debian/source/include-binaries</a></h2>
This file contains a list of binary files (one per line) that should be included
  in the debian tarball. Leading and trailing spaces are stripped. Lines
  starting with &#x2018; <b>#</b>&#x2019; are comments and are skipped. Empty
  lines are ignored.
<h2 class="Ss" title="Ss" id="debian/source/options"><a class="selflink" href="#debian/source/options">debian/source/options</a></h2>
This file contains a list of long options that should be automatically prepended
  to the set of command line options of a <b>dpkg-source --build</b> or
  <b>dpkg-source --print-format</b> call. Options like <b>--compression</b> and
  <b>--compression-level</b> are well suited for this file.
<div class="Pp"></div>
Each option should be put on a separate line. Empty lines and lines starting
  with &#x2018; <b>#</b>&#x2019; are ignored. The leading &#x2018;
  <b>--</b>&#x2019; should be stripped and short options are not allowed.
  Optional spaces are allowed around the &#x2018; <b>=</b>&#x2019; symbol and
  optional quotes are allowed around the value. Here's an example of such a
  file:
<div class="Pp"></div>
<br/>
 # let dpkg-source create a debian.tar.bz2 with maximal compression
<br/>
 compression = &quot;bzip2&quot;
<br/>
 compression-level = 9
<br/>
 # use debian/patches/debian-changes as automatic patch
<br/>
 single-debian-patch
<br/>
 # ignore changes on config.{sub,guess}
<br/>
 extend-diff-ignore = &quot;(^|/)(config.sub|config.guess)$&quot;
<div class="Pp"></div>
Note: <b>format</b> options are not accepted in this file, you should use
  <b>debian/source/format</b> instead.
<h2 class="Ss" title="Ss" id="debian/source/local-options"><a class="selflink" href="#debian/source/local-options">debian/source/local-options</a></h2>
Exactly like <b>debian/source/options</b> except that the file is not included
  in the generated source package. It can be useful to store a preference tied
  to the maintainer or to the VCS repository where the source package is
  maintained.
<h2 class="Ss" title="Ss" id="debian/source/local-patch-header_and_debian/source/patch-header"><a class="selflink" href="#debian/source/local-patch-header_and_debian/source/patch-header">debian/source/local-patch-header
  and debian/source/patch-header</a></h2>
Free form text that is put on top of the automatic patch generated in formats
  &#x201C;2.0&#x201D; or &#x201C;3.0 (quilt)&#x201D;. <b>local-patch-header</b>
  is not included in the generated source package while <b>patch-header</b> is.
<h2 class="Ss" title="Ss" id="debian/patches/series"><a class="selflink" href="#debian/patches/series">debian/patches/series</a></h2>
This file lists all patches that have to be applied (in the given order) on top
  of the upstream source package. Leading and trailing spaces are stripped.
  Lines starting with &#x2018; <b>#</b>&#x2019; are comments and are skipped.
  Empty lines are ignored. Remaining lines start with a patch filename (relative
  to the <b>debian/patches/</b> directory) up to the first space character or
  the end of line. Optional <b>quilt</b> options can follow up to the end of
  line or the first &#x2018; <b>#</b>&#x2019; preceded by one or more spaces
  (which marks the start of a comment up to the end of line).
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
The point at which field overriding occurs compared to certain standard output
  field settings is rather confused.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>deb-src-control</b>(5), <b>deb-changelog</b>(5), <b>dsc</b>(5).</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-12-05</td>
    <td class="foot-os">Debian Project</td>
  </tr>
</table>
</body>
</html>
