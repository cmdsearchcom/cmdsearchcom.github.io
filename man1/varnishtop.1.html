<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:41:59 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VARNISHTOP(1) VARNISHTOP(1)</p>

<p style="margin-top: 1em">NAME <br>
varnishtop - Varnish log entry ranking</p>

<p style="margin-top: 1em">SYNOPSIS <br>
varnishtop [-1] [-b] [-c] [-C] [-d] [-f] [-g
&lt;session|request|vxid|raw&gt;] [-h] [-i &lt;taglist&gt;]
[-I &lt;[taglist:]regex&gt;] [-L &lt;limit&gt;] [-n
&lt;dir&gt;] [-N &lt;filename&gt;] [-p &lt;period&gt;] [-q
<br>
&lt;query&gt;] [-r &lt;filename&gt;] [-t
&lt;seconds|off&gt;] [-T &lt;seconds&gt;] [-x
&lt;taglist&gt;] [-X &lt;[taglist:]regex&gt;] [-V]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The varnishtop utility reads varnishd(1) shared memory logs
and presents a continuously updated list of the most
commonly occurring log entries. With suitable filtering
using <br>
the -I, -i, -X and -x options, it can be used to display a
ranking of requested documents, clients, user agents, or any
other information which is recorded in the log.</p>

<p style="margin-top: 1em">The following options are
available:</p>

<p style="margin-top: 1em">-1 Instead of a continuously
updated display, print the statistics once and exit. Implies
-d.</p>

<p style="margin-top: 1em">-b Only display transactions and
log records coming from backend communication.</p>

<p style="margin-top: 1em">-c Only display transactions and
log records coming from client communication.</p>

<p style="margin-top: 1em">-C Do all regular expression and
string matching caseless.</p>

<p style="margin-top: 1em">-d Process log records at the
head of the log and exit.</p>

<p style="margin-top: 1em">-f Sort and group only on the
first field of each log entry. This is useful when
displaying e.g. stataddr entries, where the first field is
the client IP address.</p>

<p style="margin-top: 1em">-g
&lt;session|request|vxid|raw&gt; <br>
The grouping of the log records. The default is to group by
vxid.</p>

<p style="margin-top: 1em">-h Print program usage and
exit</p>

<p style="margin-top: 1em">-i &lt;taglist&gt; <br>
Include log records of these tags in output. Taglist is a
comma-separated list of tag globs. Multiple -i options may
be given.</p>

<p style="margin-top: 1em">If a tag include option is the
first of any tag selection options, all tags are first
marked excluded.</p>

<p style="margin-top: 1em">-I &lt;[taglist:]regex&gt; <br>
Include by regex matching. Output only records matching
taglist and regular expression. Applies to any tag if
taglist is absent.</p>

<p style="margin-top: 1em">If a tag include option is the
first of any tag selection options, all tags are first
marked excluded.</p>

<p style="margin-top: 1em">-L &lt;limit&gt; <br>
Sets the upper limit of incomplete transactions kept before
the oldest transaction is force completed. A warning record
is synthesized when this happens. This setting <br>
keeps an upper bound on the memory usage of running queries.
Defaults to 1000 transactions.</p>

<p style="margin-top: 1em">-n &lt;dir&gt; <br>
Specify the varnishd working directory (also known as
instance name) to get logs from. If -n is not specified, the
host name is used.</p>

<p style="margin-top: 1em">-N &lt;filename&gt; <br>
Specify the filename of a stale VSM instance. When using
this option the abandonment checking is disabled.</p>

<p style="margin-top: 1em">-p &lt;period&gt; <br>
Specified the number of seconds to measure over, the default
is 60 seconds. The first number in the list is the average
number of requests seen over this time period. This <br>
option has no effect if -1 option is also used.</p>

<p style="margin-top: 1em">-q &lt;query&gt; <br>
Specifies the VSL query to use.</p>

<p style="margin-top: 1em">-r &lt;filename&gt; <br>
Read log in binary file format from this file. The file can
be created with varnishlog -w filename.</p>

<p style="margin-top: 1em">-t &lt;seconds|off&gt; <br>
Timeout before returning error on initial VSM connection. If
set the VSM connection is retried every 0.5 seconds for this
many seconds. If zero the connection is attempted <br>
only once and will fail immediately if unsuccessful. If set
to &quot;off&quot;, the connection will not fail, allowing
the utility to start and wait indefinetely for the Varnish
<br>
instance to appear. Defaults to 5 seconds.</p>

<p style="margin-top: 1em">-T &lt;seconds&gt; <br>
Sets the transaction timeout in seconds. This defines the
maximum number of seconds elapsed between a Begin tag and
the End tag. If the timeout expires, a warning record <br>
is synthesized and the transaction is force completed.
Defaults to 120 seconds.</p>

<p style="margin-top: 1em">-x &lt;taglist&gt; <br>
Exclude log records of these tags in output. Taglist is a
comma-separated list of tag globs. Multiple -x options may
be given.</p>

<p style="margin-top: 1em">-X &lt;[taglist:]regex&gt; <br>
Exclude by regex matching. Do not output records matching
taglist and regular expression. Applies to any tag if
taglist is absent.</p>

<p style="margin-top: 1em">-V Print version information and
exit.</p>

<p style="margin-top: 1em">EXAMPLES <br>
The following example displays a continuously updated list
of the most frequently requested URLs:</p>

<p style="margin-top: 1em">varnishtop -i ReqURL</p>

<p style="margin-top: 1em">The following example displays a
continuously updated list of the most commonly used user
agents:</p>

<p style="margin-top: 1em">varnishtop -C -I
ReqHeader:User-Agent</p>

<p style="margin-top: 1em">SEE ALSO <br>
&Acirc;&middot; varnishd(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishhist(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishlog(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishncsa(1)</p>

<p style="margin-top: 1em">&Acirc;&middot;
varnishstat(1)</p>

<p style="margin-top: 1em">HISTORY <br>
The varnishtop utility was originally developed by
Poul-Henning Kamp in cooperation with Verdens Gang AS and
Varnish Software AS, and later substantially rewritten by
Dag-Erling <br>
Sm&Atilde;&cedil;rgrav. This manual page was written by
Dag-Erling Sm&Atilde;&cedil;rgrav, and later updated by
Martin Blix Grydeland.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
This document is licensed under the same licence as Varnish
itself. See LICENCE for details.</p>

<p style="margin-top: 1em">&Acirc;&middot; Copyright (c)
2006 Verdens Gang AS</p>

<p style="margin-top: 1em">&Acirc;&middot; Copyright (c)
2006-2015 Varnish Software AS</p>
 
<p style="margin-top: 1em">VARNISHTOP(1)</p>
<hr>
</body>
</html>
