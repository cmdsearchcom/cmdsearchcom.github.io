<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:32:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PMIE(1) General Commands Manual PMIE(1)</p>

<p style="margin-top: 1em">NAME <br>
pmie - inference engine for performance metrics</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pmie [-bCdefHqVvWxz] [-A align] [-a archive] [-c filename]
[-h host] [-l logfile] [-j stompfile] [-n pmnsfile] [-O
offset] [-S starttime] [-T endtime] [-t interval] [-U
username] <br>
[-Z timezone] [filename ...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
pmie accepts a collection of arithmetic, logical, and rule
expressions to be evaluated at specified frequencies. The
base data for the expressions consists of performance
met&acirc; <br>
rics values delivered in real-time from any host running the
Performance Metrics Collection Daemon (PMCD), or using
historical data from Performance Co-Pilot (PCP) archive
logs.</p>

<p style="margin-top: 1em">As well as computing arithmetic
and logical values, pmie can execute actions (popup alarms,
write system log messages, and launch programs) in response
to specified conditions. <br>
Such actions are extremely useful in detecting, monitoring
and correcting performance related problems.</p>

<p style="margin-top: 1em">The expressions to be evaluated
are read from configuration files specified by one or more
filename arguments. In the absence of any filename,
expressions are read from standard <br>
input.</p>

<p style="margin-top: 1em">A description of the command
line options specific to pmie follows:</p>

<p style="margin-top: 1em">-a archive which is a
comma-separated list of names, each of which may be the base
name of an archive or the name of a directory containing one
or more archives written by <br>
pmlogger(1). Multiple instances of the -a flag may appear on
the command line to specify a list of sets of archives. In
this case, it is required that only one set of ar&acirc;
<br>
chives be present for any one host. Also, any explicit host
names occurring in a pmie expression must match the host
name recorded in one of the archive labels. In the <br>
case of multiple sets of archives, timestamps recorded in
the archives are used to ensure temporal consistency.</p>

<p style="margin-top: 1em">-b Output will be line buffered
and standard output is attached to standard error. This is
most useful for background execution in conjunction with the
-l option. The -b <br>
option is always used for pmie instances launched from
pmie_check(1).</p>

<p style="margin-top: 1em">-C Parse the configuration
file(s) and exit before performing any evaluations. Any
errors in the configuration file are reported.</p>

<p style="margin-top: 1em">-c An alternative to specifying
filename at the end of the command line.</p>

<p style="margin-top: 1em">-d Normally pmie would be
launched as a non-interactive process to monitor and manage
the performance of one or more hosts. Given the -d flag
however, execution is interactive <br>
and the user is presented with a menu of options.
Interactive mode is useful mainly for debugging new
expressions.</p>

<p style="margin-top: 1em">-e When used with -V, -v or -W,
this option forces timestamps to be reported with each
expression. The timestamps are in ctime(3) format, enclosed
in parenthesis and appear <br>
after the expression name and before the expression value,
e.g. <br>
expr_1 (Tue Feb 6 19:55:10 2001): 12</p>

<p style="margin-top: 1em">-f If the -l option is specified
and there is no -a option (ie. real-time monitoring) then
pmie is run as a daemon in the background (in all other
cases foreground is the <br>
default). The -f option forces pmie to be run in the
foreground, independent of any other options.</p>

<p style="margin-top: 1em">-h By default performance data
is fetched from the local host (in real-time mode) or the
host for the first named set of archives on the command line
(in archive mode). The <br>
host argument overrides this default. It does not override
hosts explicitly named in the expressions being evaluated.
The host argument is interpreted as a connection <br>
specification for pmNewContext, and is later mapped to the
remote pmcd&rsquo;s self-reported host name for reporting
purposes. See also the %h vs. %c substitutions in rule
action <br>
strings below.</p>

<p style="margin-top: 1em">-l Standard error is sent to
logfile.</p>

<p style="margin-top: 1em">-j An alternative STOMP protocol
configuration is loaded from stompfile. If this option is
not used, and the stomp action is used in any rule, the
default location <br>
$PCP_SYSCONF_DIR/pmie/config/stomp will be used.</p>

<p style="margin-top: 1em">-n An alternative Performance
Metrics Name Space (PMNS) is loaded from the file
pmnsfile.</p>

<p style="margin-top: 1em">-q Suppresses diagnostic
messages that would be printed to standard output by
default, especially the &quot;evaluator exiting&quot;
message as this can confuse scripts.</p>

<p style="margin-top: 1em">-t The interval argument follows
the syntax described in PCPIntro(1), and in the simplest
form may be an unsigned integer (the implied units in this
case are seconds). The <br>
value is used to determine the sample interval for
expressions that do not explicitly set their sample interval
using the pmie variable delta described below. The default
<br>
is 10.0 seconds.</p>

<p style="margin-top: 1em">-U username <br>
User account under which to run pmie. The default is the
current user account for interactive use. When run as a
daemon, the unprivileged &quot;pcp&quot; account is used in
current <br>
versions of PCP, but in older versions the superuser account
(&quot;root&quot;) was used by default.</p>

<p style="margin-top: 1em">-v Unless one of the verbose
options -V, -v or -W appears on the command line,
expressions are evaluated silently, the only output is as a
result of any actions being executed. <br>
In the verbose mode, specified using the -v flag, the value
of each expression is printed as it is evaluated. The values
are in canonical units; bytes in the dimension of <br>
&lsquo;&lsquo;space&rsquo;&rsquo;, seconds in the dimension
of &lsquo;&lsquo;time&rsquo;&rsquo; and events in the
dimension of &lsquo;&lsquo;count&rsquo;&rsquo;. See
pmLookupDesc(3) for details of the supported dimension and
scaling mechanisms <br>
for performance metrics. The verbose mode is useful in
monitoring the value of given expressions, evaluating
derived performance metrics, passing these values on to
other <br>
tools for further processing and in debugging new
expressions.</p>

<p style="margin-top: 1em">-V This option has the same
effect as the -v option, except that the name of the host
and instance (if applicable) are printed as well as
expression values.</p>

<p style="margin-top: 1em">-W This option has the same
effect as the -V option described above, except that for
boolean expressions, only those names and values that make
the expression true are printed. <br>
These are the same names and values accessible to rule
actions as the %h, %i, %c and %v bindings, as described
below.</p>

<p style="margin-top: 1em">-x Execute in domain agent mode.
This mode is used within the Performance Co-Pilot product to
derive values for summary metrics, see pmdasummary(1). Only
restricted function&acirc; <br>
ality is available in this mode (expressions with actions
may not be used).</p>

<p style="margin-top: 1em">-Z Change the reporting timezone
to timezone in the format of the environment variable TZ as
described in environ(7).</p>

<p style="margin-top: 1em">-z Change the reporting timezone
to the timezone of the host that is the source of the
performance metrics, as identified via either the -h option
or the first named set of ar&acirc; <br>
chives (as described above for the -a option).</p>

<p style="margin-top: 1em">The -S, -T, -O, and -A options
may be used to define a time window to restrict the samples
retrieved, set an initial origin within the time window, or
specify a &lsquo;&lsquo;natural&rsquo;&rsquo; <br>
alignment of the sample times; refer to PCPIntro(1) for a
complete description of these options.</p>

<p style="margin-top: 1em">Output from pmie is directed to
standard output and standard error as follows:</p>

<p style="margin-top: 1em">stdout <br>
Expression values printed in the verbose -v mode and the
output of print actions.</p>

<p style="margin-top: 1em">stderr <br>
Error and warning messages for any syntactic or semantic
problems during expression parsing, and any semantic or
performance metrics availability problems during expression
<br>
evaluation.</p>

<p style="margin-top: 1em">EXAMPLES <br>
The following example expressions demonstrate some of the
capabilities of the inference engine.</p>

<p style="margin-top: 1em">The directory
$PCP_DEMOS_DIR/pmie contains a number of other annotated
examples of pmie expressions.</p>

<p style="margin-top: 1em">The variable delta controls
expression evaluation frequency. Specify that subsequent
expressions be evaluated once a second, until further
notice:</p>

<p style="margin-top: 1em">delta = 1 sec;</p>

<p style="margin-top: 1em">If the total context switch rate
exceeds 10000 per second per CPU, then display an alarm
notifier:</p>

<p style="margin-top: 1em">kernel.all.pswitch / hinv.ncpu
&gt; 10000 count/sec <br>
-&gt; alarm &quot;high context switch rate %v&quot;;</p>

<p style="margin-top: 1em">If the high context switch rate
is sustained for 10 consecutive samples, then launch top(1)
in an xterm(1) window to monitor processes, but do this at
most once every 5 minutes:</p>

<p style="margin-top: 1em">all_sample ( <br>
kernel.all.pswitch @0..9 &gt; 10 Kcount/sec * hinv.ncpu <br>
) -&gt; shell 5 min &quot;xterm -e
&rsquo;top&rsquo;&quot;;</p>

<p style="margin-top: 1em">The following rules are
evaluated once every 20 seconds:</p>

<p style="margin-top: 1em">delta = 20 sec;</p>

<p style="margin-top: 1em">If any disk is performing more
than 60 I/Os per second, then print a message identifying
the busy disk to standard output and launch dkvis(1):</p>

<p style="margin-top: 1em">some_inst ( <br>
disk.dev.total &gt; 60 count/sec <br>
) -&gt; print &quot;busy disks:&quot; &quot; %i&quot; &amp;
<br>
shell 5 min &quot;dkvis&quot;;</p>

<p style="margin-top: 1em">Refine the preceding rule to
apply only between the hours of 9am and 5pm, and to require
3 of 4 consecutive samples to exceed the threshold before
executing the action:</p>

<p style="margin-top: 1em">$hour &gt;= 9 &amp;&amp; $hour
&lt;= 17 &amp;&amp; <br>
some_inst ( <br>
75 %_sample ( <br>
disk.dev.total @0..3 &gt; 60 count/sec <br>
) <br>
) -&gt; print &quot;disks busy for 20 sec:&quot; &quot;
[%h]%i&quot;;</p>

<p style="margin-top: 1em">The following two rules are
evaluated once every 10 minutes:</p>

<p style="margin-top: 1em">delta = 10 min;</p>

<p style="margin-top: 1em">If either the / or the /usr
filesystem is more than 95% full, display an alarm popup,
but not if it has already been displayed during the last 4
hours:</p>

<p style="margin-top: 1em">filesys.free
#&rsquo;/dev/root&rsquo; / <br>
filesys.capacity #&rsquo;/dev/root&rsquo; &lt; 0.05 <br>
-&gt; alarm 4 hour &quot;root filesystem (almost)
full&quot;;</p>

<p style="margin-top: 1em">filesys.free
#&rsquo;/dev/usr&rsquo; / <br>
filesys.capacity #&rsquo;/dev/usr&rsquo; &lt; 0.05 <br>
-&gt; alarm 4 hour &quot;/usr filesystem (almost)
full&quot;;</p>

<p style="margin-top: 1em">The following rule requires a
machine that supports the PCP environment metrics. If the
machine environment temperature rises more than 2 degrees
over a 10 minute interval, <br>
write an entry in the system log:</p>

<p style="margin-top: 1em">environ.temp @0 - environ.temp
@1 &gt; 2 <br>
-&gt; alarm &quot;temperature rising fast&quot; &amp; <br>
syslog &quot;machine room temperature rise alarm&quot;;</p>

<p style="margin-top: 1em">And something interesting if you
have performance problems with your Oracle database:</p>

<p style="margin-top: 1em">// back to 30sec evaluations
<br>
delta = 30 sec; <br>
sid = &quot;ptg1&quot;; # $ORACLE_SID setting <br>
lid = &quot;223&quot;; # latch ID from v$latch <br>
lru = &quot;#&rsquo;$sid/$lid cache buffers lru
chain&rsquo;&quot;; <br>
host = &quot;:moomba.melbourne.sgi.com&quot;; <br>
gets = &quot;oracle.latch.gets $host $lru&quot;; <br>
total = &quot;oracle.latch.gets $host $lru + <br>
oracle.latch.misses $host $lru + <br>
oracle.latch.immisses $host $lru&quot;;</p>

<p style="margin-top: 1em">$total &gt; 100 &amp;&amp; $gets
/ $total &lt; 0.2 <br>
-&gt; alarm &quot;high lru latch contention in database
$sid&quot;;</p>

<p style="margin-top: 1em">The following ruleset will emit
exactly one message depending on the availability and value
of the 1-minute load average.</p>

<p style="margin-top: 1em">delta = 1 minute; <br>
ruleset <br>
kernel.all.load #&rsquo;1 minute&rsquo; &gt; 10 * hinv.ncpu
-&gt; <br>
print &quot;extreme load average %v&quot; <br>
else kernel.all.load #&rsquo;1 minute&rsquo; &gt; 2 *
hinv.ncpu -&gt; <br>
print &quot;moderate load average %v&quot; <br>
unknown -&gt; <br>
print &quot;load average unavailable&quot; <br>
otherwise -&gt; <br>
print &quot;load average OK&quot; <br>
;</p>

<p style="margin-top: 1em">The following rule will emit a
message when some filesystem is more than 75% full and is
filling at a rate that if sustained would fill the
filesystem to 100% in less than 30 <br>
minutes.</p>

<p style="margin-top: 1em">some_inst ( <br>
100 * filesys.used / filesys.capacity &gt; 75 &amp;&amp;
<br>
filesys.used + 30min * (rate filesys.used) &gt;
filesys.capacity <br>
) -&gt; print &quot;filesystem will be full within 30
mins:&quot; &quot; %i&quot;;</p>

<p style="margin-top: 1em">If the metric mypmda.errors
counts errors then the following rule will emit a message if
the rate of errors exceeds 1 per second provided the error
count is less than 100.</p>

<p style="margin-top: 1em">mypmda.errors &gt; 1 &amp;&amp;
instant mypmda.errors &lt; 100 <br>
-&gt; print &quot;high error rate: %v&quot;;</p>

<p style="margin-top: 1em">QUICK START <br>
The pmie specification language is powerful and large.</p>

<p style="margin-top: 1em">To expedite rapid development of
pmie rules, the pmieconf(1) tool provides a facility for
generating a pmie configuration file from a set of
generalized pmie rules. The supplied <br>
set of rules covers a wide range of performance
scenarios.</p>

<p style="margin-top: 1em">The Performance Co-Pilot
User&rsquo;s and Administrator&rsquo;s Guide provides a
detailed tutorial-style chapter covering pmie.</p>

<p style="margin-top: 1em">EXPRESSION SYNTAX <br>
This description is terse and informal. For a more
comprehensive description see the Performance Co-Pilot
User&rsquo;s and Administrator&rsquo;s Guide.</p>

<p style="margin-top: 1em">A pmie specification is a
sequence of semicolon terminated expressions.</p>

<p style="margin-top: 1em">Basic operators are modeled on
the arithmetic, relational and Boolean operators of the C
programming language. Precedence rules are as expected,
although the use of parentheses <br>
is encouraged to enhance readability and remove
ambiguity.</p>

<p style="margin-top: 1em">Operands are performance metric
names (see pmns(5)) and the normal literal constants.</p>

<p style="margin-top: 1em">Operands involving performance
metrics may produce sets of values, as a result of
enumeration in the dimensions of hosts, instances and time.
Special qualifiers may appear after <br>
a performance metric name to define the enumeration in each
dimension. For example,</p>

<p style="margin-top: 1em">kernel.percpu.cpu.user :foo :bar
#cpu0 @0..2</p>

<p style="margin-top: 1em">defines 6 values corresponding
to the time spent executing in user mode on CPU 0 on the
hosts &lsquo;&lsquo;foo&rsquo;&rsquo; and
&lsquo;&lsquo;bar&rsquo;&rsquo; over the last 3 consecutive
samples. The default interpretation <br>
in the absence of : (host), # (instance) and @ (time)
qualifiers is all instances at the most recent sample time
for the default source of PCP performance metrics.</p>

<p style="margin-top: 1em">Host and instance names that do
not follow the rules for variables in programming languages,
ie. alphabetic optionally followed by alphanumerics, should
be enclosed in single <br>
quotes.</p>

<p style="margin-top: 1em">Expression evaluation follows
the law of &lsquo;&lsquo;least surprises&rsquo;&rsquo;.
Where performance metrics have the semantics of a counter,
pmie will automatically convert to a rate based upon <br>
consecutive samples and the time interval between these
samples. All expressions are evaluated in double precision,
and where appropriate, automatically scaled into canonical
<br>
units of &lsquo;&lsquo;bytes&rsquo;&rsquo;,
&lsquo;&lsquo;seconds&rsquo;&rsquo; and
&lsquo;&lsquo;counts&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">A rule is a special form of
expression that specifies a condition or logical expression,
a special operator (-&gt;) and actions to be performed when
the condition is found to be <br>
true.</p>

<p style="margin-top: 1em">The following table summarizes
the basic pmie operators:</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; Operators &acirc; Explanation &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;+ - * / &acirc; Arithmetic &acirc; <br>
&acirc;&lt; &lt;= == &gt;= &gt; != &acirc; Relational (value
comparison) &acirc; <br>
&acirc;! &amp;&amp; || &acirc; Boolean &acirc; <br>
&acirc;-&gt; &acirc; Rule &acirc; <br>
&acirc;rising &acirc; Boolean, false to true transition
&acirc; <br>
&acirc;falling &acirc; Boolean, true to false transition
&acirc; <br>
&acirc;rate &acirc; Explicit rate conversion (rarely
required) &acirc; <br>
&acirc;instant &acirc; No automatic rate conversion (rarely
required) &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
The rate and instant operators are the logical inverse of
one another, so an arithmetic expression expr is equal to
rate instant expr. The more useful cases involve using rate
<br>
with a metric that is not a counter to determine the rate of
change over time or instant with a metric that is a counter
to determine if the current value is above or below some
<br>
threshold.</p>

<p style="margin-top: 1em">Aggregate operators may be used
to aggregate or summarize along one dimension of a
set-valued expression. The following aggregate operators map
from a logical expression to a <br>
logical expression of lower dimension.</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; Operators &acirc; Type &acirc; Explanation &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;some_inst &acirc; Existential &acirc; True if at
least one set &acirc; <br>
&acirc;some_host &acirc; &acirc; member is true in the
&acirc; <br>
&acirc;some_sample &acirc; &acirc; associated dimension
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;all_inst &acirc; Universal &acirc; True if all set
members &acirc; <br>
&acirc;all_host &acirc; &acirc; are true in the
associ&acirc; &acirc; <br>
&acirc;all_sample &acirc; &acirc; ated dimension &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;N%_inst &acirc; Percentile &acirc; True if at least N
per&acirc; &acirc; <br>
&acirc;N%_host &acirc; &acirc; cent of set members are
&acirc; <br>
&acirc;N%_sample &acirc; &acirc; true in the associated
&acirc; <br>
&acirc; &acirc; &acirc; dimension &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
The following instantial operators may be used to filter or
limit a set-valued logical expression, based on regular
expression matching of instance names. The logical
expression <br>
must be a set involving the dimension of instances, and the
regular expression is of the form used by egrep(1) or the
Extended Regular Expressions of regcomp(3).</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; Operators &acirc; Explanation &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;match_inst &acirc; For each value of the logical
expression &acirc; <br>
&acirc; &acirc; that is &lsquo;&lsquo;true&rsquo;&rsquo;,
the result is &lsquo;&lsquo;true&rsquo;&rsquo; &acirc; <br>
&acirc; &acirc; if the associated instance name matches
&acirc; <br>
&acirc; &acirc; the regular expression. Otherwise the
&acirc; <br>
&acirc; &acirc; result is &lsquo;&lsquo;false&rsquo;&rsquo;.
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;nomatch_inst &acirc; For each value of the logical
expression &acirc; <br>
&acirc; &acirc; that is &lsquo;&lsquo;true&rsquo;&rsquo;,
the result is &lsquo;&lsquo;true&rsquo;&rsquo; &acirc; <br>
&acirc; &acirc; if the associated instance name does not
&acirc; <br>
&acirc; &acirc; match the regular expression. Otherwise
&acirc; <br>
&acirc; &acirc; the result is
&lsquo;&lsquo;false&rsquo;&rsquo;. &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
For example, the expression below will be
&lsquo;&lsquo;true&rsquo;&rsquo; for disks attached to
controllers 2 or 3 performing more than 20 operations per
second: <br>
match_inst &quot;^dks[23]d&quot; disk.dev.total &gt; 20;</p>

<p style="margin-top: 1em">The following aggregate
operators map from an arithmetic expression to an arithmetic
expression of lower dimension.</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; Operators &acirc; Type &acirc; Explanation &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;min_inst &acirc; Extrema &acirc; Minimum value across
all &acirc; <br>
&acirc;min_host &acirc; &acirc; set members in the
asso&acirc; &acirc; <br>
&acirc;min_sample &acirc; &acirc; ciated dimension &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;max_inst &acirc; Extrema &acirc; Maximum value across
all &acirc; <br>
&acirc;max_host &acirc; &acirc; set members in the
asso&acirc; &acirc; <br>
&acirc;max_sample &acirc; &acirc; ciated dimension &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;sum_inst &acirc; Aggregate &acirc; Sum of values
across all &acirc; <br>
&acirc;sum_host &acirc; &acirc; set members in the
asso&acirc; &acirc; <br>
&acirc;sum_sample &acirc; &acirc; ciated dimension &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;avg_inst &acirc; Aggregate &acirc; Average value
across all &acirc; <br>
&acirc;avg_host &acirc; &acirc; set members in the
asso&acirc; &acirc; <br>
&acirc;avg_sample &acirc; &acirc; ciated dimension &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
The aggregate operators count_inst, count_host and
count_sample map from a logical expression to an arithmetic
expression of lower dimension by counting the number of set
members <br>
for which the expression is true in the associated
dimension.</p>

<p style="margin-top: 1em">For action rules, the following
actions are defined:</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc;Operators &acirc; Explanation &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;alarm &acirc; Raise a visible alarm with xconfirm(1)
&acirc; <br>
&acirc;print &acirc; Display on standard output &acirc; <br>
&acirc;shell &acirc; Execute with sh(1) &acirc; <br>
&acirc;stomp &acirc; Send a STOMP message to a JMS server
&acirc; <br>
&acirc;syslog &acirc; Append a message to system log file
&acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
Multiple actions may be separated by the &amp; and |
operators to specify respectively sequential execution (both
actions are executed) and alternate execution (the second
action <br>
will only be executed if the execution of the first action
returns a non-zero error status.</p>

<p style="margin-top: 1em">Arguments to actions are an
optional suppression time, and then one or more expressions
(a string is an expression in this context). Strings
appearing as arguments to an action <br>
may include the following special selectors that will be
replaced at the time the action is executed.</p>

<p style="margin-top: 1em">%h Host name(s) that make the
left-most top-level expression in the condition true.</p>

<p style="margin-top: 1em">%c Connection specification
string(s) or files for a PCP tool to reach the hosts or
archives that make the left-most top-level expression in the
condition true.</p>

<p style="margin-top: 1em">%i Instance(s) that make the
left-most top-level expression in the condition true.</p>

<p style="margin-top: 1em">%v One value from the left-most
top-level expression in the condition for each host and
instance pair that makes the condition true.</p>

<p style="margin-top: 1em">Note that expansion of the
special selectors is done by repeating the whole argument
once for each unique binding to any of the qualifying
special selectors. For example if a <br>
rule were true for the host mumble with instances grunt and
snort, and for host fumble the instance puff makes the rule
true, then the action <br>
... <br>
-&gt; shell myscript &quot;Warning: %h:%i busy &quot;; <br>
will execute myscript with the argument string
&quot;Warning: mumble:grunt busy Warning: mumble:snort busy
Warning: fumble:puff busy&quot;.</p>

<p style="margin-top: 1em">By comparison, if the action
<br>
... <br>
-&gt; shell myscript &quot;Warning! busy:&quot; &quot;
%h:%i&quot;; <br>
were executed under the same circumstances, then myscript
would be executed with the argument string &quot;Warning!
busy: mumble:grunt mumble:snort fumble:puff&quot;.</p>

<p style="margin-top: 1em">The semantics of the expansion
of the special selectors leads to a common usage pattern in
an action, where one argument is a constant (contains no
special selectors) the second <br>
argument contains the desired special selectors with minimal
separator characters, and an optional third argument
provides a constant postscript (e.g. to terminate any
argument <br>
quoting from the first argument). If necessary
post-processing (eg. in myscript) can provide the necessary
enumeration over each unique expansion of the string
containing just <br>
the special selectors.</p>

<p style="margin-top: 1em">For complex conditions, the
bindings to these selectors is not obvious. It is strongly
recommended that pmie be used in the debugging mode (specify
the -W command line option in <br>
particular) during rule development.</p>

<p style="margin-top: 1em">BOOLEAN EXPRESSIONS <br>
pmie expressions that have the semantics of a Boolean, e.g.
foo.bar &gt; 10 or some_inst ( my.table &lt; 0 ) are
assigned the values true or false or unknown. A value is
unknown if <br>
one or more of the underlying metric values is unavailable,
e.g. pmcd(1) on the host cannot be contacted, the metric is
not in the PCP archive, no values are currently avail&acirc;
<br>
able, insufficient values have been fetched to allow a rate
converted value to be computed or insufficient values have
been fetched to instantiate the required number of samples
<br>
in the temporal domain.</p>

<p style="margin-top: 1em">Boolean operators follow the
normal rules of Kleene logic (aka 3-valued logic) when
combining values that include unknown:</p>


<p style="margin-top: 1em">&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; &acirc; B &acirc; <br>
&acirc; A and B
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; true &acirc; false &acirc; unknown &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; true &acirc; true &acirc; false &acirc;
unknown &acirc; <br>
&acirc;
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;A &acirc; false &acirc; false &acirc; false &acirc;
false &acirc; <br>
&acirc;
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; unknown &acirc; unknown &acirc; false
&acirc; unknown &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; &acirc; B &acirc; <br>
&acirc; A or B
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; true &acirc; false &acirc; unknown &acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; true &acirc; true &acirc; true &acirc; true
&acirc; <br>
&acirc;
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;A &acirc; false &acirc; true &acirc; false &acirc;
unknown &acirc; <br>
&acirc;
&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; &acirc; unknown &acirc; true &acirc; unknown &acirc;
unknown &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&not;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
<br>
&acirc; A &acirc; not A &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; true &acirc; false &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc; false &acirc; true &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&frac14;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&curren;
<br>
&acirc;unknown &acirc; unknown &acirc; <br>

&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acute;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;&acirc;
RULESETS <br>
The ruleset clause is used to define a set of rules and
actions that are evaluated in order until some action is
executed, at which point the remaining rules and actions are
<br>
skipped until the ruleset is again scheduled for evaluation.
The keyword else is used to separate rules. After one or
more regular rules (with a predicate and an action), a <br>
ruleset may include an optional <br>
unknown -&gt; action <br>
clause, optionally followed by a <br>
otherwise -&gt; action <br>
clause.</p>

<p style="margin-top: 1em">If all of the predicates in the
rules evaluate to unknown and an unknown clause has been
specified then action associated with the unknown clause
will be executed.</p>

<p style="margin-top: 1em">If no rule predicate is true and
the unknown action is either not specified or not executed
and an otherwise clause has been specified, then the action
associated with the other&acirc; <br>
wise clause will be executed.</p>

<p style="margin-top: 1em">SCALE FACTORS <br>
Scale factors may be appended to arithmetic expressions and
force linear scaling of the value to canonical units. Simple
scale factors are constructed from the keywords: <br>
nanosecond, nanosec, nsec, microsecond, microsec, usec,
millisecond, millisec, msec, second, sec, minute, min, hour,
byte, Kbyte, Mbyte, Gbyte, Tbyte, count, Kcount and Mcount,
<br>
and the operator /, for example &lsquo;&lsquo;Kbytes /
hour&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">MACROS <br>
Macros are defined using expressions of the form:</p>

<p style="margin-top: 1em">name = constexpr;</p>

<p style="margin-top: 1em">Where name follows the normal
rules for variables in programming languages, ie. alphabetic
optionally followed by alphanumerics. constexpr must be a
constant expression, either <br>
a string (enclosed in double quotes) or an arithmetic
expression optionally followed by a scale factor.</p>

<p style="margin-top: 1em">Macros are expanded when their
name, prefixed by a dollar ($) appears in an expression, and
macros may be nested within a constexpr string.</p>

<p style="margin-top: 1em">The following reserved macro
names are understood.</p>

<p style="margin-top: 1em">minute Current minute of the
hour.</p>

<p style="margin-top: 1em">hour Current hour of the day, in
the range 0 to 23.</p>

<p style="margin-top: 1em">day Current day of the month, in
the range 1 to 31.</p>

<p style="margin-top: 1em">month Current month of the year,
in the range 0 (January) to 11 (December).</p>

<p style="margin-top: 1em">year Current year.</p>

<p style="margin-top: 1em">day_of_week <br>
Current day of the week, in the range 0 (Sunday) to 6
(Saturday).</p>

<p style="margin-top: 1em">delta Sample interval in effect
for this expression.</p>

<p style="margin-top: 1em">Dates and times are presented in
the reporting time zone (see description of -Z and -z
command line options above).</p>

<p style="margin-top: 1em">AUTOMATIC RESTART <br>
It is often useful for pmie processes to be started and
stopped when the local host is booted or shutdown, or when
they have been detected as no longer running (when they have
<br>
unexpectedly exited for some reason). Refer to pmie_check(1)
for details on automating this process.</p>

<p style="margin-top: 1em">EVENT MONITORING <br>
It is common for production systems to be monitored in a
central location. Traditionally on UNIX systems this has
been performed by the system log facilities - see logger(1),
<br>
and syslogd(1). On Windows, communication with the system
event log is handled by pcp-eventlog(1).</p>

<p style="margin-top: 1em">pmie fits into this model when
rules use the syslog action. Note that if the action string
begins with -p (priority) and/or -t (tag) then these are
extracted from the string and <br>
treated in the same way as in logger(1) and
pcp-eventlog(1).</p>

<p style="margin-top: 1em">However, it is common to have
other event monitoring frameworks also, into which you may
wish to incorporate performance events from pmie. You can
often use the shell action to <br>
send events to these frameworks, as they usually provide
their a program for injecting events into the framework from
external sources.</p>

<p style="margin-top: 1em">A final option is use of the
stomp (Streaming Text Oriented Messaging Protocol) action,
which allows pmie to connect to a central JMS (Java
Messaging System) server and send <br>
events to the PMIE topic. Tools can be written to extract
these text messages and present them to operations people
(via desktop popup windows, etc). Use of the stomp action
<br>
requires a stomp configuration file to be setup, which
specifies the location of the JMS server host, port number,
and username/password.</p>

<p style="margin-top: 1em">The format of this file is as
follows:</p>

<p style="margin-top: 1em">host=messages.sgi.com # this is
the JMS server (required) <br>
port=61616 # and its listening here (required) <br>
timeout=2 # seconds to wait for server (optional) <br>
username=joe # (required) <br>
password=j03ST0MP # (required) <br>
topic=PMIE # JMS topic for pmie messages (optional)</p>

<p style="margin-top: 1em">The timeout value specifies the
time (in seconds) that pmie should wait for acknowledgements
from the JMS server after sending a message (as required by
the STOMP protocol). <br>
Note that on startup, pmie will wait indefinitely for a
connection, and will not begin rule evaluation until that
initial connection has been established. Should the
connection <br>
to the JMS server be lost at any time while pmie is running,
pmie will attempt to reconnect on each subsequent truthful
evaluation of a rule with a stomp action, but not more <br>
than once per minute. This is to avoid contributing to
network congestion. In this situation, where the STOMP
connection to the JMS server has been severed, the stomp
action <br>
will return a non-zero error value.</p>

<p style="margin-top: 1em">FILES <br>
$PCP_DEMOS_DIR/pmie/* <br>
annotated example rules <br>
$PCP_VAR_DIR/pmns/* <br>
default PMNS specification files <br>
$PCP_TMP_DIR/pmie <br>
pmie maintains files in this directory to identify the
running pmie instances and to export runtime information
about each instance - this data forms the basis of the <br>
pmcd.pmie performance metrics <br>
$PCP_PMIECONTROL_PATH <br>
the default set of pmie instances to start at boot time -
refer to pmie_check(1) for details</p>

<p style="margin-top: 1em">BUGS <br>
The lexical scanner and parser will attempt to recover after
an error in the input expressions. Parsing resumes after
skipping input up to the next semi-colon (;), however
dur&acirc; <br>
ing this skipping process the scanner is ignorant of
comments and strings, so an embedded semi-colon may cause
parsing to resume at an unexpected place. This behavior is
largely <br>
benign, as until the initial syntax error is corrected, pmie
will not attempt any expression evaluation.</p>

<p style="margin-top: 1em">PCP ENVIRONMENT <br>
Environment variables with the prefix PCP_ are used to
parameterize the file and directory names used by PCP. On
each installation, the file /etc/pcp.conf contains the local
<br>
values for these variables. The $PCP_CONF variable may be
used to specify an alternative configuration file, as
described in pcp.conf(5).</p>

<p style="margin-top: 1em">When executing shell actions,
pmie overrides two variables - IFS and PATH - in the
environment of the child process. IFS is set to &quot;0. The
PATH is set to a combination of a <br>
default path for all platforms
(&quot;/usr/sbin:/sbin:/usr/bin:/usr/sbin&quot;) and several
configurable components. These are (in this order):
$PCP_BIN_DIR, $PCP_BINADM_DIR and <br>
$PCP_PLATFORM_PATHS.</p>

<p style="margin-top: 1em">When executing popup alarm
actions, pmie will use the value of $PCP_XCONFIRM_PROG as
the visual notification program to run. This is typically
set to pmconfirm(1), a cross-plat&acirc; <br>
form dialog box.</p>

<p style="margin-top: 1em">UNIX SEE ALSO <br>
logger(1).</p>

<p style="margin-top: 1em">WINDOWS SEE ALSO <br>
pcp-eventlog(1).</p>

<p style="margin-top: 1em">SEE ALSO <br>
PCPIntro(1), pmcd(1), pmconfirm(1), pmdumplog(1),
pmieconf(1), pmie_check(1), pminfo(1), pmlogger(1),
pmval(1), PMAPI(3), pcp.conf(5) and pcp.env(5).</p>

<p style="margin-top: 1em">USER GUIDE <br>
For a more complete description of the pmie language, refer
to the Performance Co-Pilot Users and Administrators Guide.
This is available online from: <br>

http://www.pcp.io/doc/pcp-users-and-administrators-guide.pdf</p>

<p style="margin-top: 1em">Performance Co-Pilot PCP
PMIE(1)</p>
<hr>
</body>
</html>
