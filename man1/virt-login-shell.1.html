<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VIRT-LOGIN-SHELL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VIRT-LOGIN-SHELL(1)</td>
    <td class="head-vol">Virtualization Support</td>
    <td class="head-rtitle">VIRT-LOGIN-SHELL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
virt-login-shell - tool to execute a shell within a container matching the users
  name
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>virt-login-shell</b> [<i>OPTION</i>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>virt-login-shell</b> program is a setuid shell that is used to join an
  LXC container that matches the user's name. If the container is not running,
  virt-login-shell will attempt to start the container. virt-login-shell is not
  allowed to be run by root. Normal users will get added to a container that
  matches their username, if it exists, and they are configured in
  /etc/libvirt/virt-login-shell.conf.
<div class="Pp"></div>
The basic structure of most virt-login-shell usage is:
<div class="Pp"></div>
<pre>
  virt-login-shell
</pre>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c CMD</b></dt>
  <dd class="It-tag">Instruct the shell to run CMD instead of presenting an
      interactive shell prompt.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Display command line help usage then exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">Display version information then exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONFIG"><a class="selflink" href="#CONFIG">CONFIG</a></h1>
By default, virt-login-shell will execute the /bin/sh program for the user. You
  can modify this behaviour by defining the shell variable in
  /etc/libvirt/virt-login-shell.conf.
<div class="Pp"></div>
eg. shell = [ &quot;/bin/bash&quot; ]
<div class="Pp"></div>
If the 'auto_shell' config option is set then it will attempt to automatically
  detect the shell from /etc/password inside the container. This should only be
  done if the container has a separate /etc directory from the host, otherwise
  it will end up recursively invoking virt-login-shell.
<div class="Pp"></div>
eg. auto_shell = 1
<div class="Pp"></div>
By default no users are allowed to use virt-login-shell, if you want to allow
  certain users to use virt-login-shell, you need to modify the allowed_users
  variable in /etc/libvirt/virt-login-shell.conf.
<div class="Pp"></div>
eg. allowed_users = [ &quot;tom&quot;, &quot;dick&quot;, &quot;harry&quot; ]
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<b>virt-login-shell</b> normally returns the exit status of the command it
  executed. If the command was killed by a signal, but that signal is not fatal
  to virt-login-shell, then it returns the signal number plus 128.
<div class="Pp"></div>
Exit status generated by <b>virt-login-shell</b> itself:
<dl class="Bl-tag">
  <dt class="It-tag"><b>0</b> An option was used to learn more about this
    binary.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>125</b> Generic error before attempting execution of the
    configured shell; for example, if libvirtd is not running.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>126</b> The configured shell exists but could not be
    executed.</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>127</b> The configured shell could not be found.</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Report any bugs discovered to the libvirt community via the mailing list
  &lt;http://libvirt.org/contact.html&gt; or bug tracker
  &lt;http://libvirt.org/bugs.html&gt;. Alternatively report bugs to your
  software distributor / vendor.
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
<pre>
  Please refer to the AUTHORS file distributed with libvirt.
  Daniel Walsh &lt;dwalsh at redhat dot com&gt;
</pre>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2013-2014 Red Hat, Inc., and the authors listed in the libvirt
  AUTHORS file.
<h1 class="Sh" title="Sh" id="LICENSE"><a class="selflink" href="#LICENSE">LICENSE</a></h1>
virt-login-shell is distributed under the terms of the GNU LGPL v2+. This is
  free software; see the source for copying conditions. There is NO warranty;
  not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>virsh</i>(1), &lt;http://www.libvirt.org/&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-06-22</td>
    <td class="foot-os">libvirt-2.0.0</td>
  </tr>
</table>
</body>
</html>
