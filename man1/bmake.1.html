<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:55:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>BMAKE(1) BSD General Commands Manual BMAKE(1)</p>

<p style="margin-top: 1em">NAME <br>
bmake &acirc; maintain program dependencies</p>

<p style="margin-top: 1em">SYNOPSIS <br>
bmake [-BeikNnqrstWwX] [-C directory] [-D variable] [-d
flags] [-f makefile] [-I directory] [-J private] [-j
max_jobs] [-m directory] [-T file] [-V variable]
[variable=value] <br>
[target ...]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
bmake is a program designed to simplify the maintenance of
other programs. Its input is a list of specifications as to
the files upon which programs and other files depend. If no
<br>
-f makefile makefile option is given, bmake will try to open
&acirc;makefile&acirc; then &acirc;Makefile&acirc; in order
to find the specifications. If the file
&acirc;.depend&acirc; exists, it is read (see <br>
mkdep(1)).</p>

<p style="margin-top: 1em">This manual page is intended as
a reference document only. For a more thorough description
of bmake and makefiles, please refer to PMake - A
Tutorial.</p>

<p style="margin-top: 1em">bmake will prepend the contents
of the MAKEFLAGS environment variable to the command line
arguments before parsing them.</p>

<p style="margin-top: 1em">The options are as follows:</p>

<p style="margin-top: 1em">-B Try to be backwards
compatible by executing a single shell per command and by
executing the commands to make the sources of a dependency
line in sequence.</p>

<p style="margin-top: 1em">-C directory <br>
Change to directory before reading the makefiles or doing
anything else. If multiple -C options are specified, each is
interpreted relative to the previous one: -C / -C <br>
etc is equivalent to -C /etc.</p>

<p style="margin-top: 1em">-D variable <br>
Define variable to be 1, in the global context.</p>

<p style="margin-top: 1em">-d [-]flags <br>
Turn on debugging, and specify which portions of bmake are
to print debugging information. Unless the flags are
preceded by &acirc;-&acirc; they are added to the MAKEFLAGS
environment <br>
variable and will be processed by any child make processes.
By default, debugging information is printed to standard
error, but this can be changed using the F debugging <br>
flag. The debugging output is always unbuffered; in
addition, if debugging is enabled but debugging output is
not directed to standard output, then the standard output is
<br>
line buffered. Flags is one or more of the following:</p>

<p style="margin-top: 1em">A Print all possible debugging
information; equivalent to specifying all of the debugging
flags.</p>

<p style="margin-top: 1em">a Print debugging information
about archive searching and caching.</p>

<p style="margin-top: 1em">C Print debugging information
about current working directory.</p>

<p style="margin-top: 1em">c Print debugging information
about conditional evaluation.</p>

<p style="margin-top: 1em">d Print debugging information
about directory searching and caching.</p>

<p style="margin-top: 1em">e Print debugging information
about failed commands and targets.</p>

<p style="margin-top: 1em">F[+]filename <br>
Specify where debugging output is written. This must be the
last flag, because it consumes the remainder of the
argument. If the character immediately after the <br>
&acirc;F&acirc; flag is &acirc;+&acirc;, then the file will
be opened in append mode; otherwise the file will be
overwritten. If the file name is &acirc;stdout&acirc; or
&acirc;stderr&acirc; then debugging out&acirc; <br>
put will be written to the standard output or standard error
output file descriptors respectively (and the
&acirc;+&acirc; option has no effect). Otherwise, the output
will be <br>
written to the named file. If the file name ends
&acirc;.%d&acirc; then the &acirc;%d&acirc; is replaced by
the pid.</p>

<p style="margin-top: 1em">f Print debugging information
about loop evaluation.</p>

<p style="margin-top: 1em">g1 Print the input graph before
making anything.</p>

<p style="margin-top: 1em">g2 Print the input graph after
making everything, or before exiting on error.</p>

<p style="margin-top: 1em">g3 Print the input graph before
exiting on error.</p>

<p style="margin-top: 1em">j Print debugging information
about running multiple shells.</p>

<p style="margin-top: 1em">l Print commands in Makefiles
regardless of whether or not they are prefixed by
&acirc;@&acirc; or other &quot;quiet&quot; flags. Also known
as &quot;loud&quot; behavior.</p>

<p style="margin-top: 1em">M Print debugging information
about &quot;meta&quot; mode decisions about targets.</p>

<p style="margin-top: 1em">m Print debugging information
about making targets, including modification dates.</p>

<p style="margin-top: 1em">n Don&rsquo;t delete the
temporary command scripts created when running commands.
These temporary scripts are created in the directory
referred to by the TMPDIR environ&acirc; <br>
ment variable, or in /tmp if TMPDIR is unset or set to the
empty string. The temporary scripts are created by
mkstemp(3), and have names of the form makeXXXXXX. <br>
NOTE: This can create many files in TMPDIR or /tmp, so use
with care.</p>

<p style="margin-top: 1em">p Print debugging information
about makefile parsing.</p>

<p style="margin-top: 1em">s Print debugging information
about suffix-transformation rules.</p>

<p style="margin-top: 1em">t Print debugging information
about target list maintenance.</p>

<p style="margin-top: 1em">V Force the -V option to print
raw values of variables.</p>

<p style="margin-top: 1em">v Print debugging information
about variable assignment.</p>

<p style="margin-top: 1em">x Run shell commands with -x so
the actual commands are printed as they are executed.</p>

<p style="margin-top: 1em">-e Specify that environment
variables override macro assignments within makefiles.</p>

<p style="margin-top: 1em">-f makefile <br>
Specify a makefile to read instead of the default
&acirc;makefile&acirc;. If makefile is &acirc;-&acirc;,
standard input is read. Multiple makefiles may be specified,
and are read in the order <br>
specified.</p>

<p style="margin-top: 1em">-I directory <br>
Specify a directory in which to search for makefiles and
included makefiles. The system makefile directory (or
directories, see the -m option) is automatically included as
<br>
part of this list.</p>

<p style="margin-top: 1em">-i Ignore non-zero exit of shell
commands in the makefile. Equivalent to specifying
&acirc;-&acirc; before each command line in the
makefile.</p>

<p style="margin-top: 1em">-J private <br>
This option should not be specified by the user.</p>

<p style="margin-top: 1em">When the j option is in use in a
recursive build, this option is passed by a make to child
makes to allow all the make processes in the build to
cooperate to avoid over&acirc; <br>
loading the system.</p>

<p style="margin-top: 1em">-j max_jobs <br>
Specify the maximum number of jobs that bmake may have
running at any one time. The value is saved in .MAKE.JOBS.
Turns compatibility mode off, unless the B flag is also <br>
specified. When compatibility mode is off, all commands
associated with a target are executed in a single shell
invocation as opposed to the traditional one shell
invoca&acirc; <br>
tion per line. This can break traditional scripts which
change directories on each command invocation and then
expect to start with a fresh environment on the next line.
<br>
It is more efficient to correct the scripts rather than turn
backwards compatibility on.</p>

<p style="margin-top: 1em">-k Continue processing after
errors are encountered, but only on those targets that do
not depend on the target whose creation caused the
error.</p>

<p style="margin-top: 1em">-m directory <br>
Specify a directory in which to search for sys.mk and
makefiles included via the
&acirc;&uml;file&acirc;&copy;-style include statement. The
-m option can be used multiple times to form a search <br>
path. This path will override the default system include
path: /usr/share/mk. Furthermore the system include path
will be appended to the search path used for <br>
&quot;file&quot;-style include statements (see the -I
option).</p>

<p style="margin-top: 1em">If a file or directory name in
the -m argument (or the MAKESYSPATH environment variable)
starts with the string &quot;.../&quot; then bmake will
search for the specified file or <br>
directory named in the remaining part of the argument
string. The search starts with the current directory of the
Makefile and then works upward towards the root of the <br>
filesystem. If the search is successful, then the resulting
directory replaces the &quot;.../&quot; specification in the
-m argument. If used, this feature allows bmake to easily
<br>
search in the current source tree for customized sys.mk
files (e.g., by using &quot;.../mk/sys.mk&quot; as an
argument).</p>

<p style="margin-top: 1em">-n Display the commands that
would have been executed, but do not actually execute them
unless the target depends on the .MAKE special source (see
below).</p>

<p style="margin-top: 1em">-N Display the commands which
would have been executed, but do not actually execute any of
them; useful for debugging top-level makefiles without
descending into subdirecto&acirc; <br>
ries.</p>

<p style="margin-top: 1em">-q Do not execute any commands,
but exit 0 if the specified targets are up-to-date and 1,
otherwise.</p>

<p style="margin-top: 1em">-r Do not use the built-in rules
specified in the system makefile.</p>

<p style="margin-top: 1em">-s Do not echo any commands as
they are executed. Equivalent to specifying &acirc;@&acirc;
before each command line in the makefile.</p>

<p style="margin-top: 1em">-T tracefile <br>
When used with the -j flag, append a trace record to
tracefile for each job started and completed.</p>

<p style="margin-top: 1em">-t Rather than re-building a
target as specified in the makefile, create it or update its
modification time to make it appear up-to-date.</p>

<p style="margin-top: 1em">-V variable <br>
Print bmake&rsquo;s idea of the value of variable, in the
global context. Do not build any targets. Multiple instances
of this option may be specified; the variables will be <br>
printed one per line, with a blank line for each null or
undefined variable. If variable contains a &acirc;$&acirc;
then the value will be expanded before printing.</p>

<p style="margin-top: 1em">-W Treat any warnings during
makefile parsing as errors.</p>

<p style="margin-top: 1em">-w Print entering and leaving
directory messages, pre and post processing.</p>

<p style="margin-top: 1em">-X Don&rsquo;t export variables
passed on the command line to the environment individually.
Variables passed on the command line are still exported via
the MAKEFLAGS environment <br>
variable. This option may be useful on systems which have a
small limit on the size of command arguments.</p>

<p style="margin-top: 1em">variable=value <br>
Set the value of the variable variable to value. Normally,
all values passed on the command line are also exported to
sub-makes in the environment. The -X flag disables <br>
this behavior. Variable assignments should follow options
for POSIX compatibility but no ordering is enforced.</p>

<p style="margin-top: 1em">There are seven different types
of lines in a makefile: file dependency specifications,
shell commands, variable assignments, include statements,
conditional directives, for loops, <br>
and comments.</p>

<p style="margin-top: 1em">In general, lines may be
continued from one line to the next by ending them with a
backslash (&acirc;&acirc;). The trailing newline character
and initial whitespace on the following line are <br>
compressed into a single space.</p>

<p style="margin-top: 1em">FILE DEPENDENCY SPECIFICATIONS
<br>
Dependency lines consist of one or more targets, an
operator, and zero or more sources. This creates a
relationship where the targets &acirc;depend&acirc; on the
sources and are usually cre&acirc; <br>
ated from them. The exact relationship between the target
and the source is determined by the operator that separates
them. The three operators are as follows:</p>

<p style="margin-top: 1em">: A target is considered
out-of-date if its modification time is less than those of
any of its sources. Sources for a target accumulate over
dependency lines when this opera&acirc; <br>
tor is used. The target is removed if bmake is
interrupted.</p>

<p style="margin-top: 1em">! Targets are always re-created,
but not until all sources have been examined and re-created
as necessary. Sources for a target accumulate over
dependency lines when this <br>
operator is used. The target is removed if bmake is
interrupted.</p>

<p style="margin-top: 1em">:: If no sources are specified,
the target is always re-created. Otherwise, a target is
considered out-of-date if any of its sources has been
modified more recently than the <br>
target. Sources for a target do not accumulate over
dependency lines when this operator is used. The target will
not be removed if bmake is interrupted.</p>

<p style="margin-top: 1em">Targets and sources may contain
the shell wildcard values &acirc;?&acirc;, &acirc;*&acirc;,
&acirc;[]&acirc;, and &acirc;{}&acirc;. The values
&acirc;?&acirc;, &acirc;*&acirc;, and &acirc;[]&acirc; may
only be used as part of the final component of the target or
<br>
source, and must be used to describe existing files. The
value &acirc;{}&acirc; need not necessarily be used to
describe existing files. Expansion is in directory order,
not alphabetically <br>
as done in the shell.</p>

<p style="margin-top: 1em">SHELL COMMANDS <br>
Each target may have associated with it one or more lines of
shell commands, normally used to create the target. Each of
the lines in this script must be preceded by a tab. (For
<br>
historical reasons, spaces are not accepted.) While targets
can appear in many dependency lines if desired, by default
only one of these rules may be followed by a creation <br>
script. If the &acirc;::&acirc; operator is used, however,
all rules may include scripts and the scripts are executed
in the order found.</p>

<p style="margin-top: 1em">Each line is treated as a
separate shell command, unless the end of line is escaped
with a backslash (&acirc;&acirc;) in which case that line
and the next are combined. If the first charac&acirc; <br>
ters of the command are any combination of &acirc;@&acirc;,
&acirc;+&acirc;, or &acirc;-&acirc;, the command is treated
specially. A &acirc;@&acirc; causes the command not to be
echoed before it is executed. A &acirc;+&acirc; causes the
<br>
command to be executed even when -n is given. This is
similar to the effect of the .MAKE special source, except
that the effect can be limited to a single line of a script.
A &acirc;-&acirc; <br>
in compatibility mode causes any non-zero exit status of the
command line to be ignored.</p>

<p style="margin-top: 1em">When bmake is run in jobs mode
with -j max_jobs, the entire script for the target is fed to
a single instance of the shell. In compatibility (non-jobs)
mode, each command is run <br>
in a separate process. If the command contains any shell
meta characters
(&acirc;#=|^(){};&amp;&lt;&gt;*?[]:$&lsquo;\n&acirc;) it
will be passed to the shell; otherwise bmake will attempt
direct execution. <br>
If a line starts with &acirc;-&acirc; and the shell has
ErrCtl enabled then failure of the command line will be
ignored as in compatibility mode. Otherwise &acirc;-&acirc;
affects the entire job; the <br>
script will stop at the first command line that fails, but
the target will not be deemed to have failed.</p>

<p style="margin-top: 1em">Makefiles should be written so
that the mode of bmake operation does not change their
behavior. For example, any command which needs to use
&acirc;cd&acirc; or &acirc;chdir&acirc; without potentially
<br>
changing the directory for subsequent commands should be put
in parentheses so it executes in a subshell. To force the
use of one shell, escape the line breaks so as to make the
<br>
whole script one command. For example:</p>

<p style="margin-top: 1em">avoid-chdir-side-effects: <br>
@echo Building $@ in &lsquo;pwd&lsquo; <br>
@(cd ${.CURDIR} &amp;&amp; ${MAKE} $@) <br>
@echo Back in &lsquo;pwd&lsquo;</p>


<p style="margin-top: 1em">ensure-one-shell-regardless-of-mode:
<br>
@echo Building $@ in &lsquo;pwd&lsquo;; (cd ${.CURDIR}
&amp;&amp; ${MAKE} $@); echo Back in &lsquo;pwd&lsquo;</p>

<p style="margin-top: 1em">Since bmake will chdir(2) to
&acirc;.OBJDIR&acirc; before executing any targets, each
child process starts with that as its current working
directory.</p>

<p style="margin-top: 1em">VARIABLE ASSIGNMENTS <br>
Variables in make are much like variables in the shell, and,
by tradition, consist of all upper-case letters.</p>

<p style="margin-top: 1em">Variable assignment modifiers
<br>
The five operators that can be used to assign values to
variables are as follows:</p>

<p style="margin-top: 1em">= Assign the value to the
variable. Any previous value is overridden.</p>

<p style="margin-top: 1em">+= Append the value to the
current value of the variable.</p>

<p style="margin-top: 1em">?= Assign the value to the
variable if it is not already defined.</p>

<p style="margin-top: 1em">:= Assign with expansion, i.e.
expand the value before assigning it to the variable.
Normally, expansion is not done until the variable is
referenced. NOTE: References to <br>
undefined variables are not expanded. This can cause
problems when variable modifiers are used.</p>

<p style="margin-top: 1em">!= Expand the value and pass it
to the shell for execution and assign the result to the
variable. Any newlines in the result are replaced with
spaces.</p>

<p style="margin-top: 1em">Any white-space before the
assigned value is removed; if the value is being appended, a
single space is inserted between the previous contents of
the variable and the appended <br>
value.</p>

<p style="margin-top: 1em">Variables are expanded by
surrounding the variable name with either curly braces
(&acirc;{}&acirc;) or parentheses (&acirc;()&acirc;) and
preceding it with a dollar sign (&acirc;$&acirc;). If the
variable name con&acirc; <br>
tains only a single letter, the surrounding braces or
parentheses are not required. This shorter form is not
recommended.</p>

<p style="margin-top: 1em">If the variable name contains a
dollar, then the name itself is expanded first. This allows
almost arbitrary variable names, however names containing
dollar, braces, parenthesis, <br>
or whitespace are really best avoided!</p>

<p style="margin-top: 1em">If the result of expanding a
variable contains a dollar sign (&acirc;$&acirc;) the string
is expanded again.</p>

<p style="margin-top: 1em">Variable substitution occurs at
three distinct times, depending on where the variable is
being used.</p>

<p style="margin-top: 1em">1. Variables in dependency lines
are expanded as the line is read.</p>

<p style="margin-top: 1em">2. Variables in shell commands
are expanded when the shell command is executed.</p>

<p style="margin-top: 1em">3. &acirc;.for&acirc; loop index
variables are expanded on each loop iteration. Note that
other variables are not expanded inside loops so the
following example code:</p>

<p style="margin-top: 1em">.for i in 1 2 3 <br>
a+= ${i} <br>
j= ${i} <br>
b+= ${j} <br>
.endfor</p>

<p style="margin-top: 1em">all: <br>
@echo ${a} <br>
@echo ${b}</p>

<p style="margin-top: 1em">will print:</p>

<p style="margin-top: 1em">1 2 3 <br>
3 3 3</p>

<p style="margin-top: 1em">Because while ${a} contains
&acirc;1 2 3&acirc; after the loop is executed, ${b}
contains &acirc;${j} ${j} ${j}&acirc; which expands to
&acirc;3 3 3&acirc; since after the loop completes ${j}
contains &acirc;3&acirc;.</p>

<p style="margin-top: 1em">Variable classes <br>
The four different classes of variables (in order of
increasing precedence) are:</p>

<p style="margin-top: 1em">Environment variables <br>
Variables defined as part of bmake&rsquo;s environment.</p>

<p style="margin-top: 1em">Global variables <br>
Variables defined in the makefile or in included
makefiles.</p>

<p style="margin-top: 1em">Command line variables <br>
Variables defined as part of the command line.</p>

<p style="margin-top: 1em">Local variables <br>
Variables that are defined specific to a certain target.</p>

<p style="margin-top: 1em">Local variables are all built in
and their values vary magically from target to target. It is
not currently possible to define new local variables. The
seven local variables are <br>
as follows:</p>

<p style="margin-top: 1em">.ALLSRC The list of all sources
for this target; also known as &acirc;&gt;&acirc;.</p>

<p style="margin-top: 1em">.ARCHIVE The name of the archive
file; also known as &acirc;!&acirc;.</p>

<p style="margin-top: 1em">.IMPSRC In suffix-transformation
rules, the name/path of the source from which the target is
to be transformed (the &acirc;implied&acirc; source); also
known as &acirc;&lt;&acirc;. It is not defined <br>
in explicit rules.</p>

<p style="margin-top: 1em">.MEMBER The name of the archive
member; also known as &acirc;%&acirc;.</p>

<p style="margin-top: 1em">.OODATE The list of sources for
this target that were deemed out-of-date; also known as
&acirc;?&acirc;.</p>

<p style="margin-top: 1em">.PREFIX The file prefix of the
target, containing only the file portion, no suffix or
preceding directory components; also known as
&acirc;*&acirc;. The suffix must be one of the <br>
known suffixes declared with .SUFFIXES or it will not be
recognized.</p>

<p style="margin-top: 1em">.TARGET The name of the target;
also known as &acirc;@&acirc;.</p>

<p style="margin-top: 1em">The shorter forms
(&acirc;&gt;&acirc;, &acirc;!&acirc;, &acirc;&lt;&acirc;,
&acirc;%&acirc;, &acirc;?&acirc;, &acirc;*&acirc;, and
&acirc;@&acirc;) are permitted for backward compatibility
with historical makefiles and legacy POSIX make and are not
recommended.</p>

<p style="margin-top: 1em">Variants of these variables with
the punctuation followed immediately by &acirc;D&acirc; or
&acirc;F&acirc;, e.g. &acirc;$(@D)&acirc;, are legacy forms
equivalent to using the &acirc;:H&acirc; and
&acirc;:T&acirc; modifiers. These forms <br>
are accepted for compatibility with AT&amp;T System V UNIX
makefiles and POSIX but are not recommended.</p>

<p style="margin-top: 1em">Four of the local variables may
be used in sources on dependency lines because they expand
to the proper value for each target on the line. These
variables are &acirc;.TARGET&acirc;, <br>
&acirc;.PREFIX&acirc;, &acirc;.ARCHIVE&acirc;, and
&acirc;.MEMBER&acirc;.</p>

<p style="margin-top: 1em">Additional built-in variables
<br>
In addition, bmake sets or knows about the following
variables:</p>

<p style="margin-top: 1em">$ A single dollar sign
&acirc;$&acirc;, i.e. &acirc;$$&acirc; expands to a single
dollar sign.</p>

<p style="margin-top: 1em">.ALLTARGETS The list of all
targets encountered in the Makefile. If evaluated during
Makefile parsing, lists only those targets encountered thus
far.</p>

<p style="margin-top: 1em">.CURDIR A path to the directory
where bmake was executed. Refer to the description of
&acirc;PWD&acirc; for more details.</p>

<p style="margin-top: 1em">.INCLUDEDFROMDIR <br>
The directory of the file this Makefile was included
from.</p>

<p style="margin-top: 1em">.INCLUDEDFROMFILE <br>
The filename of the file this Makefile was included
from.</p>

<p style="margin-top: 1em">MAKE The name that bmake was
executed with (argv[0]). For compatibility bmake also sets
.MAKE with the same value. The preferred variable to use is
the environment <br>
variable MAKE because it is more compatible with other
versions of bmake and cannot be confused with the special
target with the same name.</p>

<p style="margin-top: 1em">.MAKE.DEPENDFILE <br>
Names the makefile (default &acirc;.depend&acirc;) from
which generated dependencies are read.</p>

<p style="margin-top: 1em">.MAKE.EXPAND_VARIABLES <br>
A boolean that controls the default behavior of the -V
option.</p>

<p style="margin-top: 1em">.MAKE.EXPORTED The list of
variables exported by bmake.</p>

<p style="margin-top: 1em">.MAKE.JOBS The argument to the
-j option.</p>

<p style="margin-top: 1em">.MAKE.JOB.PREFIX <br>
If bmake is run with j then output for each target is
prefixed with a token &acirc;--- target ---&acirc; the first
part of which can be controlled via .MAKE.JOB.PREFIX. If
<br>
.MAKE.JOB.PREFIX is empty, no token is printed. <br>
For example:
.MAKE.JOB.PREFIX=${.newline}---${.MAKE:T}[${.MAKE.PID}]
would produce tokens like &acirc;---make[1234] target
---&acirc; making it easier to track the degree of <br>
parallelism being achieved.</p>

<p style="margin-top: 1em">MAKEFLAGS The environment
variable &acirc;MAKEFLAGS&acirc; may contain anything that
may be specified on bmake&rsquo;s command line. Anything
specified on bmake&rsquo;s command line is appended to <br>
the &acirc;MAKEFLAGS&acirc; variable which is then entered
into the environment for all programs which bmake
executes.</p>

<p style="margin-top: 1em">.MAKE.LEVEL The recursion depth
of bmake. The initial instance of bmake will be 0, and an
incremented value is put into the environment to be seen by
the next generation. <br>
This allows tests like: .if ${.MAKE.LEVEL} == 0 to protect
things which should only be evaluated in the initial
instance of bmake.</p>

<p style="margin-top: 1em">.MAKE.MAKEFILE_PREFERENCE <br>
The ordered list of makefile names (default
&acirc;makefile&acirc;, &acirc;Makefile&acirc;) that bmake
will look for.</p>

<p style="margin-top: 1em">.MAKE.MAKEFILES <br>
The list of makefiles read by bmake, which is useful for
tracking dependencies. Each makefile is recorded only once,
regardless of the number of times read.</p>

<p style="margin-top: 1em">.MAKE.MODE Processed after
reading all makefiles. Can affect the mode that bmake runs
in. It can contain a number of keywords:</p>

<p style="margin-top: 1em">compat Like -B, puts bmake into
&quot;compat&quot; mode.</p>

<p style="margin-top: 1em">meta Puts bmake into
&quot;meta&quot; mode, where meta files are created for each
target to capture the command run, the output generated and
if filemon(4) is avail&acirc; <br>
able, the system calls which are of interest to bmake. The
captured output can be very useful when diagnosing
errors.</p>

<p style="margin-top: 1em">curdirOk= bf Normally bmake will
not create .meta files in &acirc;.CURDIR&acirc;. This can be
overridden by setting bf to a value which represents
True.</p>

<p style="margin-top: 1em">env For debugging, it can be
useful to inlcude the environment in the .meta file.</p>

<p style="margin-top: 1em">verbose If in &quot;meta&quot;
mode, print a clue about the target being built. This is
useful if the build is otherwise running silently. The
message printed the value <br>
of: .MAKE.META.PREFIX.</p>

<p style="margin-top: 1em">ignore-cmd Some makefiles have
commands which are simply not stable. This keyword causes
them to be ignored for determining whether a target is out
of date in <br>
&quot;meta&quot; mode. See also .NOMETA_CMP.</p>

<p style="margin-top: 1em">silent= bf If bf is True, when a
.meta file is created, mark the target .SILENT.</p>

<p style="margin-top: 1em">.MAKE.META.BAILIWICK <br>
In &quot;meta&quot; mode, provides a list of prefixes which
match the directories controlled by bmake. If a file that
was generated outside of .OBJDIR but within said
baili&acirc; <br>
wick is missing, the current target is considered
out-of-date.</p>

<p style="margin-top: 1em">.MAKE.META.CREATED <br>
In &quot;meta&quot; mode, this variable contains a list of
all the meta files updated. If not empty, it can be used to
trigger processing of .MAKE.META.FILES.</p>

<p style="margin-top: 1em">.MAKE.META.FILES <br>
In &quot;meta&quot; mode, this variable contains a list of
all the meta files used (updated or not). This list can be
used to process the meta files to extract dependency <br>
information.</p>

<p style="margin-top: 1em">.MAKE.META.IGNORE_PATHS <br>
Provides a list of path prefixes that should be ignored;
because the contents are expected to change over time. The
default list includes: &acirc;/dev /etc /proc /tmp <br>
/var/run /var/tmp&acirc;</p>

<p style="margin-top: 1em">.MAKE.META.PREFIX <br>
Defines the message printed for each meta file updated in
&quot;meta verbose&quot; mode. The default value is: <br>
Building ${.TARGET:H:tA}/${.TARGET:T}</p>

<p style="margin-top: 1em">.MAKEOVERRIDES This variable is
used to record the names of variables assigned to on the
command line, so that they may be exported as part of
&acirc;MAKEFLAGS&acirc;. This behaviour can be <br>
disabled by assigning an empty value to
&acirc;.MAKEOVERRIDES&acirc; within a makefile. Extra
variables can be exported from a makefile by appending their
names to <br>
&acirc;.MAKEOVERRIDES&acirc;. &acirc;MAKEFLAGS&acirc; is
re-exported whenever &acirc;.MAKEOVERRIDES&acirc; is
modified.</p>

<p style="margin-top: 1em">.MAKE.PATH_FILEMON <br>
If bmake was built with filemon(4) support, this is set to
the path of the device node. This allows makefiles to test
for this support.</p>

<p style="margin-top: 1em">.MAKE.PID The process-id of
bmake.</p>

<p style="margin-top: 1em">.MAKE.PPID The parent process-id
of bmake.</p>

<p style="margin-top: 1em">.MAKE.SAVE_DOLLARS <br>
value should be a boolen that controls wether
&acirc;$$&acirc; are preserved when doing &acirc;:=&acirc;
assignments. The default is false, for backwards
compatability. Set to true for <br>
compatability with other makes. If set to false,
&acirc;$$&acirc; becomes &acirc;$&acirc; per normal
evaluation rules.</p>

<p style="margin-top: 1em">MAKE_PRINT_VAR_ON_ERROR <br>
When bmake stops due to an error, it prints its name and the
value of &acirc;.CURDIR&acirc; as well as the value of any
variables named in
&acirc;MAKE_PRINT_VAR_ON_ERROR&acirc;.</p>

<p style="margin-top: 1em">.newline This variable is simply
assigned a newline character as its value. This allows
expansions using the :@ modifier to put a newline between
iterations of the loop <br>
rather than a space. For example, the printing of
&acirc;MAKE_PRINT_VAR_ON_ERROR&acirc; could be done as
${MAKE_PRINT_VAR_ON_ERROR:@v@$v=&rsquo;${$v}&rsquo;${.newline}@}.</p>

<p style="margin-top: 1em">.OBJDIR A path to the directory
where the targets are built. Its value is determined by
trying to chdir(2) to the following directories in order and
using the first match:</p>

<p style="margin-top: 1em">1.
${MAKEOBJDIRPREFIX}${.CURDIR}</p>

<p style="margin-top: 1em">(Only if
&acirc;MAKEOBJDIRPREFIX&acirc; is set in the environment or
on the command line.)</p>

<p style="margin-top: 1em">2. ${MAKEOBJDIR}</p>

<p style="margin-top: 1em">(Only if
&acirc;MAKEOBJDIR&acirc; is set in the environment or on the
command line.)</p>

<p style="margin-top: 1em">3. ${.CURDIR}/obj.${MACHINE}</p>

<p style="margin-top: 1em">4. ${.CURDIR}/obj</p>

<p style="margin-top: 1em">5. /usr/obj/${.CURDIR}</p>

<p style="margin-top: 1em">6. ${.CURDIR}</p>

<p style="margin-top: 1em">Variable expansion is performed
on the value before it&rsquo;s used, so expressions such as
<br>
${.CURDIR:S,^/usr/src,/var/obj,} <br>
may be used. This is especially useful with
&acirc;MAKEOBJDIR&acirc;.</p>

<p style="margin-top: 1em">&acirc;.OBJDIR&acirc; may be
modified in the makefile via the special target
&acirc;.OBJDIR&acirc;. In all cases, bmake will chdir(2) to
the specified directory if it exists, and set <br>
&acirc;.OBJDIR&acirc; and &acirc;PWD&acirc; to that
directory before executing any targets.</p>

<p style="margin-top: 1em">.PARSEDIR A path to the
directory of the current &acirc;Makefile&acirc; being
parsed.</p>

<p style="margin-top: 1em">.PARSEFILE The basename of the
current &acirc;Makefile&acirc; being parsed. This variable
and &acirc;.PARSEDIR&acirc; are both set only while the
&acirc;Makefiles&acirc; are being parsed. If you want to
retain <br>
their current values, assign them to a variable using
assignment with expansion: (&acirc;:=&acirc;).</p>

<p style="margin-top: 1em">.PATH A variable that represents
the list of directories that bmake will search for files.
The search list should be updated using the target
&acirc;.PATH&acirc; rather than the <br>
variable.</p>

<p style="margin-top: 1em">PWD Alternate path to the
current directory. bmake normally sets &acirc;.CURDIR&acirc;
to the canonical path given by getcwd(3). However, if the
environment variable &acirc;PWD&acirc; is set <br>
and gives a path to the current directory, then bmake sets
&acirc;.CURDIR&acirc; to the value of &acirc;PWD&acirc;
instead. This behaviour is disabled if
&acirc;MAKEOBJDIRPREFIX&acirc; is set or <br>
&acirc;MAKEOBJDIR&acirc; contains a variable transform.
&acirc;PWD&acirc; is set to the value of
&acirc;.OBJDIR&acirc; for all programs which bmake
executes.</p>

<p style="margin-top: 1em">.TARGETS The list of targets
explicitly specified on the command line, if any.</p>

<p style="margin-top: 1em">VPATH Colon-separated
(&acirc;:&acirc;) lists of directories that bmake will
search for files. The variable is supported for
compatibility with old make programs only, use
&acirc;.PATH&acirc; <br>
instead.</p>

<p style="margin-top: 1em">Variable modifiers <br>
Variable expansion may be modified to select or modify each
word of the variable (where a &acirc;word&acirc; is
white-space delimited sequence of characters). The general
format of a variable <br>
expansion is as follows:</p>


<p style="margin-top: 1em">${variable[:modifier[:...]]}</p>

<p style="margin-top: 1em">Each modifier begins with a
colon, which may be escaped with a backslash
(&acirc;&acirc;).</p>

<p style="margin-top: 1em">A set of modifiers can be
specified via a variable, as follows:</p>


<p style="margin-top: 1em">modifier_variable=modifier[:...]
<br>
${variable:${modifier_variable}[:...]}</p>

<p style="margin-top: 1em">In this case the first modifier
in the modifier_variable does not start with a colon, since
that must appear in the referencing variable. If any of the
modifiers in the modi&acirc; <br>
fier_variable contain a dollar sign (&acirc;$&acirc;), these
must be doubled to avoid early expansion.</p>

<p style="margin-top: 1em">The supported modifiers are:</p>

<p style="margin-top: 1em">:E Replaces each word in the
variable with its suffix.</p>

<p style="margin-top: 1em">:H Replaces each word in the
variable with everything but the last component.</p>

<p style="margin-top: 1em">:Mpattern <br>
Select only those words that match pattern. The standard
shell wildcard characters (&acirc;*&acirc;, &acirc;?&acirc;,
and &acirc;[]&acirc;) may be used. The wildcard characters
may be escaped with a backslash <br>
(&acirc;&acirc;). As a consequence of the way values are
split into words, matched, and then joined, a construct like
<br>
${VAR:M*} <br>
will normalise the inter-word spacing, removing all leading
and trailing space, and converting multiple consecutive
spaces to single spaces.</p>

<p style="margin-top: 1em">:Npattern <br>
This is identical to &acirc;:M&acirc;, but selects all words
which do not match pattern.</p>

<p style="margin-top: 1em">:O Order every word in variable
alphabetically. To sort words in reverse order use the
&acirc;:O:[-1..1]&acirc; combination of modifiers.</p>

<p style="margin-top: 1em">:Ox Randomize words in variable.
The results will be different each time you are referring to
the modified variable; use the assignment with expansion
(&acirc;:=&acirc;) to prevent such be&acirc; <br>
haviour. For example,</p>

<p style="margin-top: 1em">LIST= uno due tre quattro <br>
RANDOM_LIST= ${LIST:Ox} <br>
STATIC_RANDOM_LIST:= ${LIST:Ox}</p>

<p style="margin-top: 1em">all: <br>
@echo &quot;${RANDOM_LIST}&quot; <br>
@echo &quot;${RANDOM_LIST}&quot; <br>
@echo &quot;${STATIC_RANDOM_LIST}&quot; <br>
@echo &quot;${STATIC_RANDOM_LIST}&quot; <br>
may produce output similar to:</p>

<p style="margin-top: 1em">quattro due tre uno <br>
tre due quattro uno <br>
due uno quattro tre <br>
due uno quattro tre</p>

<p style="margin-top: 1em">:Q Quotes every shell
meta-character in the variable, so that it can be passed
safely through recursive invocations of bmake.</p>

<p style="margin-top: 1em">:R Replaces each word in the
variable with everything but its suffix.</p>

<p style="margin-top: 1em">:gmtime <br>
The value is a format string for strftime(3), using the
current gmtime(3).</p>

<p style="margin-top: 1em">:hash <br>
Compute a 32bit hash of the value and encode it as hex
digits.</p>

<p style="margin-top: 1em">:localtime <br>
The value is a format string for strftime(3), using the
current localtime(3).</p>

<p style="margin-top: 1em">:tA Attempt to convert variable
to an absolute path using realpath(3), if that fails, the
value is unchanged.</p>

<p style="margin-top: 1em">:tl Converts variable to
lower-case letters.</p>

<p style="margin-top: 1em">:tsc <br>
Words in the variable are normally separated by a space on
expansion. This modifier sets the separator to the character
c. If c is omitted, then no separator is used. The <br>
common escapes (including octal numeric codes), work as
expected.</p>

<p style="margin-top: 1em">:tu Converts variable to
upper-case letters.</p>

<p style="margin-top: 1em">:tW Causes the value to be
treated as a single word (possibly containing embedded white
space). See also &acirc;:[*]&acirc;.</p>

<p style="margin-top: 1em">:tw Causes the value to be
treated as a sequence of words delimited by white space. See
also &acirc;:[@]&acirc;.</p>

<p style="margin-top: 1em">:S/old_string/new_string/[1gW]
<br>
Modify the first occurrence of old_string in the
variable&rsquo;s value, replacing it with new_string. If a
&acirc;g&acirc; is appended to the last slash of the
pattern, all occurrences in <br>
each word are replaced. If a &acirc;1&acirc; is appended to
the last slash of the pattern, only the first word is
affected. If a &acirc;W&acirc; is appended to the last slash
of the pattern, then <br>
the value is treated as a single word (possibly containing
embedded white space). If old_string begins with a caret
(&acirc;^&acirc;), old_string is anchored at the beginning
of each <br>
word. If old_string ends with a dollar sign
(&acirc;$&acirc;), it is anchored at the end of each word.
Inside new_string, an ampersand (&acirc;&amp;&acirc;) is
replaced by old_string (without any &acirc;^&acirc; <br>
or &acirc;$&acirc;). Any character may be used as a
delimiter for the parts of the modifier string. The
anchoring, ampersand and delimiter characters may be escaped
with a backslash <br>
(&acirc;&acirc;).</p>

<p style="margin-top: 1em">Variable expansion occurs in the
normal fashion inside both old_string and new_string with
the single exception that a backslash is used to prevent the
expansion of a dollar <br>
sign (&acirc;$&acirc;), not a preceding dollar sign as is
usual.</p>

<p style="margin-top: 1em">:C/pattern/replacement/[1gW]
<br>
The :C modifier is just like the :S modifier except that the
old and new strings, instead of being simple strings, are an
extended regular expression (see regex(3)) string <br>
pattern and an ed(1)-style string replacement. Normally, the
first occurrence of the pattern pattern in each word of the
value is substituted with replacement. The &acirc;1&acirc;
modi&acirc; <br>
fier causes the substitution to apply to at most one word;
the &acirc;g&acirc; modifier causes the substitution to
apply to as many instances of the search pattern pattern as
occur in the <br>
word or words it is found in; the &acirc;W&acirc; modifier
causes the value to be treated as a single word (possibly
containing embedded white space). Note that &acirc;1&acirc;
and &acirc;g&acirc; are orthogo&acirc; <br>
nal; the former specifies whether multiple words are
potentially affected, the latter whether multiple
substitutions can potentially occur within each affected
word.</p>

<p style="margin-top: 1em">As for the :S modifier, the
pattern and replacement are subjected to variable expansion
before being parsed as regular expressions.</p>

<p style="margin-top: 1em">:T Replaces each word in the
variable with its last component.</p>

<p style="margin-top: 1em">:u Remove adjacent duplicate
words (like uniq(1)).</p>

<p style="margin-top: 1em">:?true_string:false_string <br>
If the variable name (not its value), when parsed as a .if
conditional expression, evaluates to true, return as its
value the true_string, otherwise return the false_string.
<br>
Since the variable name is used as the expression, :? must
be the first modifier after the variable name itself - which
will, of course, usually contain variable expansions. <br>
A common error is trying to use expressions like <br>
${NUMBERS:M42:?match:no} <br>
which actually tests defined(NUMBERS), to determine is any
words match &quot;42&quot; you need to use something like:
<br>
${&quot;${NUMBERS:M42}&quot; != &quot;&quot;:?match:no}.</p>

<p style="margin-top: 1em">:old_string=new_string <br>
This is the AT&amp;T System V UNIX style variable
substitution. It must be the last modifier specified. If
old_string or new_string do not contain the pattern matching
character <br>
% then it is assumed that they are anchored at the end of
each word, so only suffixes or entire words may be replaced.
Otherwise % is the substring of old_string to be <br>
replaced in new_string.</p>

<p style="margin-top: 1em">Variable expansion occurs in the
normal fashion inside both old_string and new_string with
the single exception that a backslash is used to prevent the
expansion of a dollar <br>
sign (&acirc;$&acirc;), not a preceding dollar sign as is
usual.</p>

<p style="margin-top: 1em">:@temp@string@ <br>
This is the loop expansion mechanism from the OSF
Development Environment (ODE) make. Unlike .for loops
expansion occurs at the time of reference. Assign temp to
each word <br>
in the variable and evaluate string. The ODE convention is
that temp should start and end with a period. For example.
<br>
${LINKS:@.LINK.@${LN} ${TARGET} ${.LINK.}@}</p>

<p style="margin-top: 1em">However a single character
variable is often more readable: <br>

${MAKE_PRINT_VAR_ON_ERROR:@v@$v=&rsquo;${$v}&rsquo;${.newline}@}</p>

<p style="margin-top: 1em">:Unewval <br>
If the variable is undefined newval is the value. If the
variable is defined, the existing value is returned. This is
another ODE make feature. It is handy for setting per- <br>
target CFLAGS for instance: <br>
${_${.TARGET:T}_CFLAGS:U${DEF_CFLAGS}} <br>
If a value is only required if the variable is undefined,
use: <br>
${VAR:D:Unewval}</p>

<p style="margin-top: 1em">:Dnewval <br>
If the variable is defined newval is the value.</p>

<p style="margin-top: 1em">:L The name of the variable is
the value.</p>

<p style="margin-top: 1em">:P The path of the node which
has the same name as the variable is the value. If no such
node exists or its path is null, then the name of the
variable is used. In order for <br>
this modifier to work, the name (node) must at least have
appeared on the rhs of a dependency.</p>

<p style="margin-top: 1em">:!cmd! <br>
The output of running cmd is the value.</p>

<p style="margin-top: 1em">:sh If the variable is non-empty
it is run as a command and the output becomes the new
value.</p>

<p style="margin-top: 1em">::=str <br>
The variable is assigned the value str after substitution.
This modifier and its variations are useful in obscure
situations such as wanting to set a variable when shell
com&acirc; <br>
mands are being parsed. These assignment modifiers always
expand to nothing, so if appearing in a rule line by
themselves should be preceded with something to keep bmake
<br>
happy.</p>

<p style="margin-top: 1em">The &acirc;::&acirc; helps avoid
false matches with the AT&amp;T System V UNIX style :=
modifier and since substitution always occurs the ::= form
is vaguely appropriate.</p>

<p style="margin-top: 1em">::?=str <br>
As for ::= but only if the variable does not already have a
value.</p>

<p style="margin-top: 1em">::+=str <br>
Append str to the variable.</p>

<p style="margin-top: 1em">::!=cmd <br>
Assign the output of cmd to the variable.</p>

<p style="margin-top: 1em">:[range] <br>
Selects one or more words from the value, or performs other
operations related to the way in which the value is divided
into words.</p>

<p style="margin-top: 1em">Ordinarily, a value is treated
as a sequence of words delimited by white space. Some
modifiers suppress this behaviour, causing a value to be
treated as a single word (possi&acirc; <br>
bly containing embedded white space). An empty value, or a
value that consists entirely of white-space, is treated as a
single word. For the purposes of the &acirc;:[]&acirc;
modifier, <br>
the words are indexed both forwards using positive integers
(where index 1 represents the first word), and backwards
using negative integers (where index -1 represents the <br>
last word).</p>

<p style="margin-top: 1em">The range is subjected to
variable expansion, and the expanded result is then
interpreted as follows:</p>

<p style="margin-top: 1em">index Selects a single word from
the value.</p>

<p style="margin-top: 1em">start..end <br>
Selects all words from start to end, inclusive. For example,
&acirc;:[2..-1]&acirc; selects all words from the second
word to the last word. If start is greater than end, then
<br>
the words are output in reverse order. For example,
&acirc;:[-1..1]&acirc; selects all the words from last to
first.</p>

<p style="margin-top: 1em">* Causes subsequent modifiers to
treat the value as a single word (possibly containing
embedded white space). Analogous to the effect of
&quot;$*&quot; in Bourne shell.</p>

<p style="margin-top: 1em">0 Means the same as
&acirc;:[*]&acirc;.</p>

<p style="margin-top: 1em">@ Causes subsequent modifiers to
treat the value as a sequence of words delimited by white
space. Analogous to the effect of &quot;$@&quot; in Bourne
shell.</p>

<p style="margin-top: 1em"># Returns the number of words in
the value.</p>

<p style="margin-top: 1em">INCLUDE STATEMENTS, CONDITIONALS
AND FOR LOOPS <br>
Makefile inclusion, conditional structures and for loops
reminiscent of the C programming language are provided in
bmake. All such structures are identified by a line
beginning <br>
with a single dot (&acirc;.&acirc;) character. Files are
included with either .include &acirc;&uml;file&acirc;&copy;
or .include &quot;file&quot;. Variables between the angle
brackets or double quotes are expanded to form <br>
the file name. If angle brackets are used, the included
makefile is expected to be in the system makefile directory.
If double quotes are used, the including makefile&rsquo;s
directory <br>
and any directories specified using the -I option are
searched before the system makefile directory. For
compatibility with other versions of bmake &acirc;include
file ...&acirc; is also <br>
accepted.</p>

<p style="margin-top: 1em">If the include statement is
written as .-include or as .sinclude then errors locating
and/or opening include files are ignored.</p>

<p style="margin-top: 1em">If the include statement is
written as .dinclude not only are errors locating and/or
opening include files ignored, but stale dependencies within
the included file will be ignored <br>
just like .MAKE.DEPENDFILE.</p>

<p style="margin-top: 1em">Conditional expressions are also
preceded by a single dot as the first character of a line.
The possible conditionals are as follows:</p>

<p style="margin-top: 1em">.error message <br>
The message is printed along with the name of the makefile
and line number, then bmake will exit.</p>

<p style="margin-top: 1em">.export variable ... <br>
Export the specified global variable. If no variable list is
provided, all globals are exported except for internal
variables (those that start with &acirc;.&acirc;). This is
not <br>
affected by the -X flag, so should be used with caution. For
compatibility with other bmake programs &acirc;export
variable=value&acirc; is also accepted.</p>

<p style="margin-top: 1em">Appending a variable name to
.MAKE.EXPORTED is equivalent to exporting a variable.</p>

<p style="margin-top: 1em">.export-env variable ... <br>
The same as &acirc;.export&acirc;, except that the variable
is not appended to .MAKE.EXPORTED. This allows exporting a
value to the environment which is different from that used
by <br>
bmake internally.</p>

<p style="margin-top: 1em">.export-literal variable ...
<br>
The same as &acirc;.export-env&acirc;, except that variables
in the value are not expanded.</p>

<p style="margin-top: 1em">.info message <br>
The message is printed along with the name of the makefile
and line number.</p>

<p style="margin-top: 1em">.undef variable <br>
Un-define the specified global variable. Only global
variables may be un-defined.</p>

<p style="margin-top: 1em">.unexport variable ... <br>
The opposite of &acirc;.export&acirc;. The specified global
variable will be removed from .MAKE.EXPORTED. If no variable
list is provided, all globals are unexported, and <br>
.MAKE.EXPORTED deleted.</p>

<p style="margin-top: 1em">.unexport-env <br>
Unexport all globals previously exported and clear the
environment inherited from the parent. This operation will
cause a memory leak of the original environment, so <br>
should be used sparingly. Testing for .MAKE.LEVEL being 0,
would make sense. Also note that any variables which
originated in the parent environment should be explicitly
<br>
preserved if desired. For example:</p>

<p style="margin-top: 1em">.if ${.MAKE.LEVEL} == 0 <br>
PATH := ${PATH} <br>
.unexport-env <br>
.export PATH <br>
.endif</p>

<p style="margin-top: 1em">Would result in an environment
containing only &acirc;PATH&acirc;, which is the minimal
useful environment. Actually &acirc;.MAKE.LEVEL&acirc; will
also be pushed into the new environment.</p>

<p style="margin-top: 1em">.warning message <br>
The message prefixed by &acirc;warning:&acirc; is printed
along with the name of the makefile and line number.</p>

<p style="margin-top: 1em">.if [!]expression [operator
expression ...] <br>
Test the value of an expression.</p>

<p style="margin-top: 1em">.ifdef [!]variable [operator
variable ...] <br>
Test the value of a variable.</p>

<p style="margin-top: 1em">.ifndef [!]variable [operator
variable ...] <br>
Test the value of a variable.</p>

<p style="margin-top: 1em">.ifmake [!]target [operator
target ...] <br>
Test the target being built.</p>

<p style="margin-top: 1em">.ifnmake [!] target [operator
target ...] <br>
Test the target being built.</p>

<p style="margin-top: 1em">.else Reverse the sense of the
last conditional.</p>

<p style="margin-top: 1em">.elif [!] expression [operator
expression ...] <br>
A combination of &acirc;.else&acirc; followed by
&acirc;.if&acirc;.</p>

<p style="margin-top: 1em">.elifdef [!]variable [operator
variable ...] <br>
A combination of &acirc;.else&acirc; followed by
&acirc;.ifdef&acirc;.</p>

<p style="margin-top: 1em">.elifndef [!]variable [operator
variable ...] <br>
A combination of &acirc;.else&acirc; followed by
&acirc;.ifndef&acirc;.</p>

<p style="margin-top: 1em">.elifmake [!]target [operator
target ...] <br>
A combination of &acirc;.else&acirc; followed by
&acirc;.ifmake&acirc;.</p>

<p style="margin-top: 1em">.elifnmake [!]target [operator
target ...] <br>
A combination of &acirc;.else&acirc; followed by
&acirc;.ifnmake&acirc;.</p>

<p style="margin-top: 1em">.endif End the body of the
conditional.</p>

<p style="margin-top: 1em">The operator may be any one of
the following:</p>

<p style="margin-top: 1em">|| Logical OR.</p>

<p style="margin-top: 1em">&amp;&amp; Logical AND; of
higher precedence than &acirc;||&acirc;.</p>

<p style="margin-top: 1em">As in C, bmake will only
evaluate a conditional as far as is necessary to determine
its value. Parentheses may be used to change the order of
evaluation. The boolean operator &acirc;!&acirc; <br>
may be used to logically negate an entire conditional. It is
of higher precedence than &acirc;&amp;&amp;&acirc;.</p>

<p style="margin-top: 1em">The value of expression may be
any of the following:</p>

<p style="margin-top: 1em">defined Takes a variable name as
an argument and evaluates to true if the variable has been
defined.</p>

<p style="margin-top: 1em">make Takes a target name as an
argument and evaluates to true if the target was specified
as part of bmake&rsquo;s command line or was declared the
default target (either implicitly <br>
or explicitly, see .MAIN) before the line containing the
conditional.</p>

<p style="margin-top: 1em">empty Takes a variable, with
possible modifiers, and evaluates to true if the expansion
of the variable would result in an empty string.</p>

<p style="margin-top: 1em">exists Takes a file name as an
argument and evaluates to true if the file exists. The file
is searched for on the system search path (see .PATH).</p>

<p style="margin-top: 1em">target Takes a target name as an
argument and evaluates to true if the target has been
defined.</p>

<p style="margin-top: 1em">commands <br>
Takes a target name as an argument and evaluates to true if
the target has been defined and has commands associated with
it.</p>

<p style="margin-top: 1em">Expression may also be an
arithmetic or string comparison. Variable expansion is
performed on both sides of the comparison, after which the
integral values are compared. A value <br>
is interpreted as hexadecimal if it is preceded by 0x,
otherwise it is decimal; octal numbers are not supported.
The standard C relational operators are all supported. If
after <br>
variable expansion, either the left or right hand side of a
&acirc;==&acirc; or &acirc;!=&acirc; operator is not an
integral value, then string comparison is performed between
the expanded variables. If <br>
no relational operator is given, it is assumed that the
expanded variable is being compared against 0 or an empty
string in the case of a string comparison.</p>

<p style="margin-top: 1em">When bmake is evaluating one of
these conditional expressions, and it encounters a
(white-space separated) word it doesn&rsquo;t recognize,
either the &acirc;make&acirc; or &acirc;defined&acirc;
expression is <br>
applied to it, depending on the form of the conditional. If
the form is &acirc;.ifdef&acirc;, &acirc;.ifndef&acirc;, or
&acirc;.if&acirc; the &acirc;defined&acirc; expression is
applied. Similarly, if the form is &acirc;.ifmake&acirc; or
<br>
&acirc;.ifnmake, the&acirc; &acirc;make&acirc; expression is
applied.</p>

<p style="margin-top: 1em">If the conditional evaluates to
true the parsing of the makefile continues as before. If it
evaluates to false, the following lines are skipped. In both
cases this continues <br>
until a &acirc;.else&acirc; or &acirc;.endif&acirc; is
found.</p>

<p style="margin-top: 1em">For loops are typically used to
apply a set of rules to a list of files. The syntax of a for
loop is:</p>

<p style="margin-top: 1em">.for variable [variable ...] in
expression <br>
&acirc;&uml;make-rules&acirc;&copy; <br>
.endfor</p>

<p style="margin-top: 1em">After the for expression is
evaluated, it is split into words. On each iteration of the
loop, one word is taken and assigned to each variable, in
order, and these variables are <br>
substituted into the make-rules inside the body of the for
loop. The number of words must come out even; that is, if
there are three iteration variables, the number of words
pro&acirc; <br>
vided must be a multiple of three.</p>

<p style="margin-top: 1em">COMMENTS <br>
Comments begin with a hash (&acirc;#&acirc;) character,
anywhere but in a shell command line, and continue to the
end of an unescaped new line.</p>

<p style="margin-top: 1em">SPECIAL SOURCES (ATTRIBUTES)
<br>
.EXEC Target is never out of date, but always execute
commands anyway.</p>

<p style="margin-top: 1em">.IGNORE Ignore any errors from
the commands associated with this target, exactly as if they
all were preceded by a dash (&acirc;-&acirc;).</p>

<p style="margin-top: 1em">.MADE Mark all sources of this
target as being up-to-date.</p>

<p style="margin-top: 1em">.MAKE Execute the commands
associated with this target even if the -n or -t options
were specified. Normally used to mark recursive bmakes.</p>

<p style="margin-top: 1em">.META Create a meta file for the
target, even if it is flagged as .PHONY, .MAKE, or .SPECIAL.
Usage in conjunction with .MAKE is the most likely case. In
&quot;meta&quot; mode, the <br>
target is out-of-date if the meta file is missing.</p>

<p style="margin-top: 1em">.NOMETA Do not create a meta
file for the target. Meta files are also not created for
.PHONY, .MAKE, or .SPECIAL targets.</p>

<p style="margin-top: 1em">.NOMETA_CMP <br>
Ignore differences in commands when deciding if target is
out of date. This is useful if the command contains a value
which always changes. If the number of commands <br>
change, though, the target will still be out of date. The
same effect applies to any command line that uses the
variable .OODATE, which can be used for that purpose even
<br>
when not otherwise needed or desired:</p>

<p style="margin-top: 1em">skip-compare-for-some: <br>
@echo this will be compared <br>
@echo this will not ${.OODATE:M.NOMETA_CMP} <br>
@echo this will also be compared</p>

<p style="margin-top: 1em">The :M pattern suppresses any
expansion of the unwanted variable.</p>

<p style="margin-top: 1em">.NOPATH Do not search for the
target in the directories specified by .PATH.</p>

<p style="margin-top: 1em">.NOTMAIN Normally bmake selects
the first target it encounters as the default target to be
built if no target was specified. This source prevents this
target from being selected.</p>

<p style="margin-top: 1em">.OPTIONAL <br>
If a target is marked with this attribute and bmake
can&rsquo;t figure out how to create it, it will ignore this
fact and assume the file isn&rsquo;t needed or already
exists.</p>

<p style="margin-top: 1em">.PHONY The target does not
correspond to an actual file; it is always considered to be
out of date, and will not be created with the -t option.
Suffix-transformation rules are <br>
not applied to .PHONY targets.</p>

<p style="margin-top: 1em">.PRECIOUS <br>
When bmake is interrupted, it normally removes any partially
made targets. This source prevents the target from being
removed.</p>

<p style="margin-top: 1em">.RECURSIVE <br>
Synonym for .MAKE.</p>

<p style="margin-top: 1em">.SILENT Do not echo any of the
commands associated with this target, exactly as if they all
were preceded by an at sign (&acirc;@&acirc;).</p>

<p style="margin-top: 1em">.USE Turn the target into
bmake&rsquo;s version of a macro. When the target is used as
a source for another target, the other target acquires the
commands, sources, and attributes <br>
(except for .USE) of the source. If the target already has
commands, the .USE target&rsquo;s commands are appended to
them.</p>

<p style="margin-top: 1em">.USEBEFORE <br>
Exactly like .USE, but prepend the .USEBEFORE target
commands to the target.</p>

<p style="margin-top: 1em">.WAIT If .WAIT appears in a
dependency line, the sources that precede it are made before
the sources that succeed it in the line. Since the
dependents of files are not made <br>
until the file itself could be made, this also stops the
dependents being built unless they are needed for another
branch of the dependency tree. So given:</p>

<p style="margin-top: 1em">x: a .WAIT b <br>
echo x <br>
a: <br>
echo a <br>
b: b1 <br>
echo b <br>
b1: <br>
echo b1</p>

<p style="margin-top: 1em">the output is always
&acirc;a&acirc;, &acirc;b1&acirc;, &acirc;b&acirc;,
&acirc;x&acirc;. <br>
The ordering imposed by .WAIT is only relevant for parallel
makes.</p>

<p style="margin-top: 1em">SPECIAL TARGETS <br>
Special targets may not be included with other targets, i.e.
they must be the only target specified.</p>

<p style="margin-top: 1em">.BEGIN Any command lines
attached to this target are executed before anything else is
done.</p>

<p style="margin-top: 1em">.DEFAULT <br>
This is sort of a .USE rule for any target (that was used
only as a source) that bmake can&rsquo;t figure out any
other way to create. Only the shell script is used. The <br>
.IMPSRC variable of a target that inherits .DEFAULT&rsquo;s
commands is set to the target&rsquo;s own name.</p>

<p style="margin-top: 1em">.END Any command lines attached
to this target are executed after everything else is
done.</p>

<p style="margin-top: 1em">.ERROR Any command lines
attached to this target are executed when another target
fails. The .ERROR_TARGET variable is set to the target that
failed. See also <br>
MAKE_PRINT_VAR_ON_ERROR.</p>

<p style="margin-top: 1em">.IGNORE Mark each of the sources
with the .IGNORE attribute. If no sources are specified,
this is the equivalent of specifying the -i option.</p>

<p style="margin-top: 1em">.INTERRUPT <br>
If bmake is interrupted, the commands for this target will
be executed.</p>

<p style="margin-top: 1em">.MAIN If no target is specified
when bmake is invoked, this target will be built.</p>

<p style="margin-top: 1em">.MAKEFLAGS <br>
This target provides a way to specify flags for bmake when
the makefile is used. The flags are as if typed to the
shell, though the -f option will have no effect.</p>

<p style="margin-top: 1em">.NOPATH Apply the .NOPATH
attribute to any specified sources.</p>

<p style="margin-top: 1em">.NOTPARALLEL <br>
Disable parallel mode.</p>

<p style="margin-top: 1em">.NO_PARALLEL <br>
Synonym for .NOTPARALLEL, for compatibility with other pmake
variants.</p>

<p style="margin-top: 1em">.OBJDIR The source is a new
value for &acirc;.OBJDIR&acirc;. If it exists, bmake will
chdir(2) to it and update the value of
&acirc;.OBJDIR&acirc;.</p>

<p style="margin-top: 1em">.ORDER The named targets are
made in sequence. This ordering does not add targets to the
list of targets to be made. Since the dependents of a target
do not get built until the <br>
target itself could be built, unless &acirc;a&acirc; is
built by another part of the dependency graph, the following
is a dependency loop:</p>

<p style="margin-top: 1em">.ORDER: b a <br>
b: a</p>

<p style="margin-top: 1em">The ordering imposed by .ORDER
is only relevant for parallel makes.</p>

<p style="margin-top: 1em">.PATH The sources are
directories which are to be searched for files not found in
the current directory. If no sources are specified, any
previously specified directories are <br>
deleted. If the source is the special .DOTLAST target, then
the current working directory is searched last.</p>

<p style="margin-top: 1em">.PATH.suffix <br>
Like .PATH but applies only to files with a particular
suffix. The suffix must have been previously declared with
.SUFFIXES.</p>

<p style="margin-top: 1em">.PHONY Apply the .PHONY
attribute to any specified sources.</p>

<p style="margin-top: 1em">.PRECIOUS <br>
Apply the .PRECIOUS attribute to any specified sources. If
no sources are specified, the .PRECIOUS attribute is applied
to every target in the file.</p>

<p style="margin-top: 1em">.SHELL Sets the shell that bmake
will use to execute commands. The sources are a set of
field=value pairs.</p>

<p style="margin-top: 1em">name This is the minimal
specification, used to select one of the builtin shell
specs; sh, ksh, and csh.</p>

<p style="margin-top: 1em">path Specifies the path to the
shell.</p>

<p style="margin-top: 1em">hasErrCtl Indicates whether the
shell supports exit on error.</p>

<p style="margin-top: 1em">check The command to turn on
error checking.</p>

<p style="margin-top: 1em">ignore The command to disable
error checking.</p>

<p style="margin-top: 1em">echo The command to turn on
echoing of commands executed.</p>

<p style="margin-top: 1em">quiet The command to turn off
echoing of commands executed.</p>

<p style="margin-top: 1em">filter The output to filter
after issuing the quiet command. It is typically identical
to quiet.</p>

<p style="margin-top: 1em">errFlag The flag to pass the
shell to enable error checking.</p>

<p style="margin-top: 1em">echoFlag The flag to pass the
shell to enable command echoing.</p>

<p style="margin-top: 1em">newline The string literal to
pass the shell that results in a single newline character
when used outside of any quoting characters. <br>
Example:</p>

<p style="margin-top: 1em">.SHELL: name=ksh path=/bin/ksh
hasErrCtl=true check=&quot;set -e&quot; ignore=&quot;set
+e&quot; echo=&quot;set -v&quot; quiet=&quot;set +v&quot;
filter=&quot;set +v&quot; echoFlag=v errFlag=e
newline=&quot;&rsquo;0&quot;</p>

<p style="margin-top: 1em">.SILENT Apply the .SILENT
attribute to any specified sources. If no sources are
specified, the .SILENT attribute is applied to every command
in the file.</p>

<p style="margin-top: 1em">.STALE This target gets run when
a dependency file contains stale entries, having .ALLSRC set
to the name of that dependency file.</p>

<p style="margin-top: 1em">.SUFFIXES <br>
Each source specifies a suffix to bmake. If no sources are
specified, any previously specified suffixes are deleted. It
allows the creation of suffix-transformation <br>
rules.</p>

<p style="margin-top: 1em">Example:</p>

<p style="margin-top: 1em">.SUFFIXES: .o <br>
.c.o: <br>
cc -o ${.TARGET} -c ${.IMPSRC}</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
bmake uses the following environment variables, if they
exist: MACHINE, MACHINE_ARCH, MACHINE_MULTIARCH, MAKE,
MAKEFLAGS, MAKEOBJDIR, MAKEOBJDIRPREFIX, MAKESYSPATH, PWD,
and <br>
TMPDIR.</p>

<p style="margin-top: 1em">MAKEOBJDIRPREFIX and MAKEOBJDIR
may only be set in the environment or on the command line to
bmake and not as makefile variables; see the description of
&acirc;.OBJDIR&acirc; for more details.</p>

<p style="margin-top: 1em">FILES <br>
.depend list of dependencies <br>
Makefile list of dependencies <br>
makefile list of dependencies <br>
sys.mk system makefile <br>
/usr/share/mk system makefile directory</p>

<p style="margin-top: 1em">COMPATIBILITY <br>
The basic make syntax is compatible between different
versions of make; however the special variables, variable
modifiers and conditionals are not.</p>

<p style="margin-top: 1em">Older versions <br>
An incomplete list of changes in older versions of
bmake:</p>

<p style="margin-top: 1em">The way that .for loop variables
are substituted changed after NetBSD 5.0 so that they still
appear to be variable expansions. In particular this stops
them being treated as syn&acirc; <br>
tax, and removes some obscure problems using them in .if
statements.</p>

<p style="margin-top: 1em">The way that parallel makes are
scheduled changed in NetBSD 4.0 so that .ORDER and .WAIT
apply recursively to the dependent nodes. The algorithms
used may change again in the <br>
future.</p>

<p style="margin-top: 1em">Other make dialects <br>
Other make dialects (GNU make, SVR4 make, POSIX make, etc.)
do not support most of the features of bmake as described in
this manual. Most notably:</p>

<p style="margin-top: 1em">&Acirc;&middot; The .WAIT and
.ORDER declarations and most functionality pertaining to
parallelization. (GNU make supports parallelization but
lacks these features needed to control it <br>
effectively.)</p>

<p style="margin-top: 1em">&Acirc;&middot; Directives,
including for loops and conditionals and most of the forms
of include files. (GNU make has its own incompatible and
less powerful syntax for conditionals.)</p>

<p style="margin-top: 1em">&Acirc;&middot; All built-in
variables that begin with a dot.</p>

<p style="margin-top: 1em">&Acirc;&middot; Most of the
special sources and targets that begin with a dot, with the
notable exception of .PHONY, .PRECIOUS, and .SUFFIXES.</p>

<p style="margin-top: 1em">&Acirc;&middot; Variable
modifiers, except for the <br>
:old=new <br>
string substitution, which does not portably support
globbing with &acirc;%&acirc; and historically only works on
declared suffixes.</p>

<p style="margin-top: 1em">&Acirc;&middot; The $&gt;
variable even in its short form; most makes support this
functionality but its name varies.</p>

<p style="margin-top: 1em">Some features are somewhat more
portable, such as assignment with +=, ?=, and !=. The .PATH
functionality is based on an older feature VPATH found in
GNU make and many versions of <br>
SVR4 make; however, historically its behavior is too
ill-defined (and too buggy) to rely upon.</p>

<p style="margin-top: 1em">The $@ and $&lt; variables are
more or less universally portable, as is the $(MAKE)
variable. Basic use of suffix rules (for files only in the
current directory, not trying to chain <br>
transformations together, etc.) is also reasonably
portable.</p>

<p style="margin-top: 1em">SEE ALSO <br>
mkdep(1)</p>

<p style="margin-top: 1em">HISTORY <br>
bmake is derived from NetBSD make(1). It uses autoconf to
facilitate portability to other platforms.</p>

<p style="margin-top: 1em">A make command appeared in
Version 7 AT&amp;T UNIX. This make implementation is based
on Adam De Boor&rsquo;s pmake program which was written for
Sprite at Berkeley. It was designed to be <br>
a parallel distributed make running jobs on different
machines using a daemon called &acirc;customs&acirc;.</p>

<p style="margin-top: 1em">Historically the
target/dependency &acirc;FRC&acirc; has been used to FoRCe
rebuilding (since the target/dependency does not exist...
unless someone creates an &acirc;FRC&acirc; file).</p>

<p style="margin-top: 1em">BUGS <br>
The make syntax is difficult to parse without actually
acting of the data. For instance finding the end of a
variable use should involve scanning each the modifiers
using the cor&acirc; <br>
rect terminator for each field. In many places make just
counts {} and () in order to find the end of a variable
expansion.</p>

<p style="margin-top: 1em">There is no way of escaping a
space character in a filename.</p>

<p style="margin-top: 1em">BSD February 19, 2016 BSD</p>
<hr>
</body>
</html>
