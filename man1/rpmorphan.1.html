<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>RPMORPHAN(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RPMORPHAN(1)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">RPMORPHAN(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
rpmorphan - find orphaned packages
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
rpmorphan finds &quot;orphaned&quot; packages on your system. It determines
  which packages have no other packages depending on their installation, and
  shows you a list of these packages. It is clone of deborphan debian software
  for rpm packages.
<div class="Pp"></div>
It will try to help you to remove unused packages, for exemple :
<div class="Pp"></div>
- after a distribution upgrade
<div class="Pp"></div>
- when you want to suppress packages after some tests
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
rpmorphan [options] [targets]
<div class="Pp"></div>
or
<div class="Pp"></div>
grpmorphan [options] [targets]
<div class="Pp"></div>
using grpmorphan is a short way to use &quot;rpmorphan -gui&quot;
<div class="Pp"></div>
options:
<div class="Pp"></div>
<pre>
   -help                brief help message
   -man                 full documentation
   -V, --version        print version
   -verbose             verbose
   -debug               debug mode (for developpers only)
   -dry-run             simulate package remove
   -fullalgo            force full algorythm
   -suggests            use suggested package as if required
   -arch                work and show on full name with version and architecture
   -log-file mylog      change default log file to mylog
   -use-cache           use cache to avoid rpm query
   -clear-cache         remove cache file
   -gui                 display the graphical interface
   -tk                  display the tk graphical interface
   -curses              display the curses graphical interface
   -exclude pac         exclude pac from results
   -install-time +/-d   apply on packages which are installed before (after) d days
   -access-time d       apply on packages which are not been accessed for d days (slow)
</pre>
<div class="Pp"></div>
targets:
<div class="Pp"></div>
<pre>
   -package pac         search if pac is an orphan package
   -all                 apply on all packages
   -guess-perl          apply on perl packages
   -guess-python        apply on python packages
   -guess-pike          apply on pike packages
   -guess-ruby          apply on ruby packages
   -guess-common        apply on common packages
   -guess-data          apply on data packages
   -guess-doc           apply on documentation packages
   -guess-dev           apply on development packages
   -guess-lib           apply on library packages (this is the default target if none is specified)
   -guess-all           apply all -guess-* options (perl, python ...)
   -guess-custom regex  apply the given regex to filter to package's names to filter the output
</pre>
<div class="Pp"></div>
keep file management
<div class="Pp"></div>
<pre>
   -keep-file file      define the keep file to be used
   -list-keep           list permanent exclude list
   -zero-keep           empty permanent exclude list
   -add-keep pac        add pac package to permanent exclude list
   -del-keep pac        remove pac package from permanent exclude list
</pre>
<h1 class="Sh" title="Sh" id="REQUIRED_ARGUMENTS"><a class="selflink" href="#REQUIRED_ARGUMENTS">REQUIRED
  ARGUMENTS</a></h1>
you should provide at least one target. this can be
<dl class="Bl-tag">
  <dt class="It-tag"><b>-all</b></dt>
  <dd class="It-tag">all the installed rpm package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-package</b></dt>
  <dd class="It-tag">one or several explicit package</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-*</b></dt>
  <dd class="It-tag">pre-selected packages groups</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-custom</b></dt>
  <dd class="It-tag">give a filter to select the packages you want study. you
      can use regular expressions.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-help</b></dt>
  <dd class="It-tag">Print a brief help message and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-man</b></dt>
  <dd class="It-tag">Print the manual page and exits.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-version</b></dt>
  <dd class="It-tag">Print the program release and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-verbose</b></dt>
  <dd class="It-tag">The program works and print debugging messages.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-debug</b></dt>
  <dd class="It-tag">for developpers, the program will dump internals
    structures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dry-run</b></dt>
  <dd class="It-tag">this is a simulation mode : rpmorphan will show you what is
      the result of package removing. The window's title is modified to show
      this mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-use-cache</b></dt>
  <dd class="It-tag">the rpm query may be long (10 to 30 s). If you will run an
      rpmorphan tool several time, this option will allow to gain a lot of time
      : it save the rpm query on a file cache (first call), then use this cache
      instead quering rpm (others calls).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-clear-cache</b></dt>
  <dd class="It-tag">to remove cache file. Can be used with -use-cache to write
      a new cache.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-gui</b></dt>
  <dd class="It-tag">display a graphical interface which allow to show
      informations, remove packages (an internal help is provided). This is
      currently the same as the -tk option</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-tk</b></dt>
  <dd class="It-tag">display a tk graphical interface which allow to show
      informations, remove packages (an internal help is provided). The Tk perl
      module is necessary to run the gui.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-curses</b></dt>
  <dd class="It-tag">display a curses graphical interface which allow to show
      informations, remove packages (an internal help is provided). The
      Curses::UI perl module is necessary to run the gui.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-exclude</b></dt>
  <dd class="It-tag">this option will specify the packages to exclude from the
      output. Can be used as '--exclude pac1 --exclude pac2' or '--exclude
      &quot;pac1, pac2&quot;'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-install-time</b></dt>
  <dd class="It-tag">install-time is a filter on the period from the package
      installation date to now (in days). if set positive, it only allow
      packages installed before x days. if set negative, it only allow packages
      installed since x days.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-access-time</b></dt>
  <dd class="It-tag">access-time is designed to filter packages which have not
      been used since x days.
    <div style="height: 1.00em;">&#x00A0;</div>
    be careful : this option will slow the program</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-fullalgo</b></dt>
  <dd class="It-tag">for a small list of packages, rpmorphan use a different
      quicker methode : rpm -e --test
    <div style="height: 1.00em;">&#x00A0;</div>
    this option can be used to force the use of the full algo</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-suggests</b></dt>
  <dd class="It-tag">some rpm version offers a meta-data dependency call
      suggests : it is for usefull but not necessary packages. if this option is
      set, the suggested packages are used in rpmorphan as required packages.
      The default value for this option is unset.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-arch</b></dt>
  <dd class="It-tag">by default, rpmorphan works on package name. this option
      will rpmorphan work on full package name : name-version-release.arch. This
      may be usefull if you have several version or several archictectures
      installed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-log-file</b></dt>
  <dd class="It-tag">change the default log file (/var/log/rpmorphan.log) to the
      given file name</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-package</b></dt>
  <dd class="It-tag">search if the given package(s) is(are) orphaned. Can be
      used as '--package pac1 --package pac2' or '--package &quot;pac1,
      pac2&quot;'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-all</b></dt>
  <dd class="It-tag">apply on all installed packages. The output should be
      interpreted. For example lilo or grub are orphaned packages, but are
      necessary to boot ...
    <div style="height: 1.00em;">&#x00A0;</div>
    the &quot;-install-time&quot; and &quot;-access-time&quot; options may be
      useful to filter the list</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-perl</b></dt>
  <dd class="It-tag">This option tries to find perl modules. It tries to match
      &quot;^perl&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-python</b></dt>
  <dd class="It-tag">This option tries to find python modules. It tries to match
      &quot;^python&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-pike</b></dt>
  <dd class="It-tag">This option tries to find pike modules. It tries to match
      &quot;^pike&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-ruby</b></dt>
  <dd class="It-tag">This option tries to find ruby modules. It tries to match
      &quot;^ruby&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-common</b></dt>
  <dd class="It-tag">This option tries to find common packages. It tries to
      match &quot;-common$&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-data</b></dt>
  <dd class="It-tag">This option tries to find data packages. It tries to match
      &quot;-data$&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-doc</b></dt>
  <dd class="It-tag">This option tries to find documentation packages. It tries
      to match &quot;-doc$&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-data</b></dt>
  <dd class="It-tag">This option tries to find data packages. It tries to match
      &quot;-data$&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-dev</b></dt>
  <dd class="It-tag">This option tries to find development packages. It tries to
      match &quot;-devel$&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-lib</b></dt>
  <dd class="It-tag">This option tries to find library packages. It tries to
      match &quot;^lib&quot;</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-all</b></dt>
  <dd class="It-tag">This is a short to tell : Try all of the above (perl,
      python ...)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-guess-custom</b></dt>
  <dd class="It-tag">this will allow you to specify your own filter. for exemple
      &quot;^wh&quot; will match whois, whatsnewfm ...</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keep-file</b></dt>
  <dd class="It-tag">define the keep file to be used. If not set, the
      /var/lib/rpmorphan/keep will be used</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-list-keep</b></dt>
  <dd class="It-tag">list the permanent list of excluded packages and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-zero-keep</b></dt>
  <dd class="It-tag">empty the permanent list of excluded packages and
    exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-add-keep</b></dt>
  <dd class="It-tag">add package(s) to the permanent list of excluded packages
      and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
    Can be used as '--add-keep pac1 --add-keep pac2' or '--add-keep &quot;pac1,
      pac2&quot;'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-del-keep</b></dt>
  <dd class="It-tag">remove package(s) from the permanent list of excluded
      packages and exit.
    <div style="height: 1.00em;">&#x00A0;</div>
    Can be used as '--add-keep pac1 --add-keep pac2' or '--add-keep &quot;pac1,
      pac2&quot;'</dd>
</dl>
<h1 class="Sh" title="Sh" id="USAGE"><a class="selflink" href="#USAGE">USAGE</a></h1>
rpmorphan can be useful after a distribution upgrade, to remove packages
  forgotten by the upgrade tool. It is interesting to use the options &quot;-all
  -install-time +xx'.
<div class="Pp"></div>
If you want to remove some recent tested packages, my advice is &quot;-all
  -install-time -xx'.
<div class="Pp"></div>
if you just want to clean your disk, use '-all -access-time xxx'
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
/var/lib/rpmorphan/keep : the permanent exclude list
<div class="Pp"></div>
/tmp/rpmorphan.cache : cache file to store rpm query. The cache file is common
  to all rpmorphan tools
<div class="Pp"></div>
/var/log/rpmorphan.log : log of all deleted packages
<h1 class="Sh" title="Sh" id="CONFIGURATION"><a class="selflink" href="#CONFIGURATION">CONFIGURATION</a></h1>
the program can read rcfile if some exists. it will load in order
<div class="Pp"></div>
/etc/rpmorphanrc
<div class="Pp"></div>
~/.rpmorphanrc
<div class="Pp"></div>
.rpmorphanrc
<div class="Pp"></div>
In this file,
<div class="Pp"></div>
# are comments,
<div class="Pp"></div>
and parameters are stored in the following format : parameter = value
<div class="Pp"></div>
example :
<div class="Pp"></div>
all = 1
<div class="Pp"></div>
curses = 1
<h1 class="Sh" title="Sh" id="DEPENDENCIES"><a class="selflink" href="#DEPENDENCIES">DEPENDENCIES</a></h1>
rpmorphan uses standard perl module in console mode.
<div class="Pp"></div>
If you want to use the Tk graphical interface, you should install the Tk module
  (perl-Tk rpm package).
<div class="Pp"></div>
If you want to use the curses interface, you should install the Curses::UI perl
  module ( perl-Curses-UI rpm package).
<div class="Pp"></div>
If you want to speed up rpmorphan, you should install the RPM2 perl module (
  perl-RPM2 rpm package). On mandriva, the URPM perl module (dependency from
  urpmi) will be used instead.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">display orphaned libraries</dt>
  <dd class="It-tag">rpmorphan</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">display all orphaned packages in a curses interface</dt>
  <dd class="It-tag">rpmorphan --all --curses</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">display orphaned packages, not used since one year</dt>
  <dd class="It-tag">rpmorphan --all -access-time +365</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">display all orphaned packages, installed in the last 10
    days</dt>
  <dd class="It-tag">rpmorphan --all -install-time -10</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">display all orphaned packages, installed one month ago (or
    more)</dt>
  <dd class="It-tag">rpmorphan --all -install-time +30</dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS_AND_LIMITATIONS"><a class="selflink" href="#BUGS_AND_LIMITATIONS">BUGS
  AND LIMITATIONS</a></h1>
Virtuals packages are not well (for now) taken in account. Let's see an example
  : lilo and grub provide 'bootloader' virtual, which is necessary for system
  boot. if the 2 are installed, they will be shown all 2 as orphans (but you can
  not remove the 2). If you remove one of them, the other is now longer shown as
  orphan.
<div class="Pp"></div>
the software can only work with one version of each software : we only treat the
  first version seen
<h1 class="Sh" title="Sh" id="INCOMPATIBILITIES"><a class="selflink" href="#INCOMPATIBILITIES">INCOMPATIBILITIES</a></h1>
not known
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
to be written
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
this program can be used as &quot;normal&quot; user to show orphans, but you
  need to run it as supersuser (root) to remove packages or apply changes in the
  permanent exclude list
<div class="Pp"></div>
access-time and install-time options are &quot;new&quot; features, not available
  in deborphan tool
<div class="Pp"></div>
For Fedora users : Yum offers a program called 'package-cleanup' which, called
  with the '--leaves' option, can show quickly a list of unused library
  packages.
<div class="Pp"></div>
For Mandriva users : the 'urpme --auto-orphans' command show quickly a a list of
  unused library packages.
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">RPMORPHAN_METHOD</dt>
  <dd class="It-tag">for experts only : allow to force the method used to get
      rpm data. It can be set to URPM, RPM2 or 'basic' (for external rpm
    query)</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>rpm</i>(1) for rpm call
<div class="Pp"></div>
<i>rpmusage</i>(1)
<div class="Pp"></div>
<i>rpmdep</i>(1)
<div class="Pp"></div>
<i>rpmduplicates</i>(1)
<div class="Pp"></div>
<i>rpmextra</i>(1)
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
should be allways 0
<h1 class="Sh" title="Sh" id="LICENSE_AND_COPYRIGHT"><a class="selflink" href="#LICENSE_AND_COPYRIGHT">LICENSE
  AND COPYRIGHT</a></h1>
Copyright (C) 2006 by Eric Gerbier This program is free software; you can
  redistribute it and/or modify it under the terms of the GNU General Public
  License as published by the Free Software Foundation; either version 2 of the
  License, or (at your option) any later version.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Eric Gerbier
<div class="Pp"></div>
you can report any bug or suggest to gerbier@users.sourceforge.net</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-02-11</td>
    <td class="foot-os">perl v5.24.1</td>
  </tr>
</table>
</body>
</html>
