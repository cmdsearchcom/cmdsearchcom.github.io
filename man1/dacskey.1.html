<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:02:04 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>DACSKEY(1) DACS Commands Manual DACSKEY(1)</p>

<p style="margin-top: 1em">NAME <br>
dacskey - generate encryption keys for DACS</p>

<p style="margin-top: 1em">SYNOPSIS <br>
dacskey [dacsoptions[1]] <br>
[-check | -gen | -priv | -private | -pub | -public] <br>
[-p | -pf passphrase-file] [-pem] [-vfs] [-rsa_key_bits
number] [--] keyfile</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This program is part of the DACS suite.</p>

<p style="margin-top: 1em">The dacskey utility generates
encryption keys for DACS that are cryptographically sound.
Keys are represented externally as an XML document called a
keyfile. The program can also <br>
validate a keyfile or display a key.</p>

<p style="margin-top: 1em">Keys are created for at least
three different purposes, although every keyfile has the
same format:</p>

<p style="margin-top: 1em">&Acirc;&middot; Keys that are
shared by all of the jurisdictions within the same DACS
federation, identified by the virtual filestore item type
federation_keys. It is through these &quot;master&quot; <br>
keys that any jurisdiction is able to decrypt and validate
credentials created by any other jurisdiction within the
same federation quickly and without any additional <br>
communication. These keys are generated initially by a
designated federation administrator at the time a federation
is created. These keys can be generated at any <br>
jurisdiction within the federation.</p>

<p style="margin-top: 1em">Ideally, new keys should be
generated at regular intervals and also whenever warranted
to maintain security, such as when a jurisdiction leaves the
federation or if a key may <br>
have been compromised. When a jurisdiction joins a
federation, it must receive a copy of the current keys.
There is currently no automated key management support; <br>
administrators must distribute these keys to all
jurisdictions over a secure channel whenever they are
changed. Besides using some method of encryption to ensure
the keys <br>
remain private during distribution, take care not to mangle
the XML document (e.g., through line breaks or
truncation).</p>

<p style="margin-top: 1em">&Acirc;&middot; Keys that are
used by a jurisdiction for its own purposes, identified by
the virtual filestore item type jurisdiction_keys. These
keys are kept private to the jurisdiction <br>
(they are not shared with any other jurisdiction) and are
ordinarily generated at that jurisdiction. These keys should
be regenerated periodically as a routine security <br>
measure.</p>

<p style="margin-top: 1em">&Acirc;&middot; Keys that are
used by a DACS application at a particular jurisdiction for
its own purposes (dacsgrid(1)[2], for instance). These keys
should be regenerated periodically, but <br>
take care to retain the old keys so that they can be used
for decryption before information is re-encrypted using the
new keys.</p>

<p style="margin-top: 1em">The program ordinarily uses
OpenSSL&rsquo;s ssl(3)[3] library to acquire high-quality
random material. In certain situations, an experienced
administrator might find the -p and -pf <br>
options useful; others should avoid them, however.</p>

<p style="margin-top: 1em">When keys are generated, the
output is written to keyfile, which is either created or
truncated. In this context, keyfile must be a pathname.
Unless directly written to where <br>
federation_keys (or jurisdiction_keys) points, keyfile must
be copied there.</p>

<p style="margin-top: 1em">Assuming that the default site
configuration file (conf/site.conf-std, which establishes
default locations for these files) has been installed:</p>

<p style="margin-top: 1em">% dacskey -u mysite.example.com
-q fkeys <br>
% install -o root -g www -m 0640 fkeys
/usr/local/dacs/federations/example.com/federation_keyfile
<br>
% dacskey -u mysite.example.com -q jkeys <br>
% install -o root -g www -m 0640 jkeys
/usr/local/dacs/federations/example.com/mysite/jurisdiction_keyfile</p>

<p style="margin-top: 1em">The owner, group, and mode
assigned to these files in this example are typical but are
only suggestions.</p>

<p style="margin-top: 1em">Security <br>
A keyfile generated by this command must be accessible
(readable and writable) only by DACS web services and the
DACS administrator. It must be kept unreadable and
unwritable <br>
by all others.</p>

<p style="margin-top: 1em">When not generating keys, by
default keyfile is a pathname. If the -vfs flag is given,
then keyfile is a DACS URI, item type, or absolute
pathname.</p>

<p style="margin-top: 1em">OPTIONS <br>
In addition to the standard dacsoptions[1], dacskey
recognizes these options:</p>

<p style="margin-top: 1em">-gen <br>
Generate new keys. This is the default operation.</p>

<p style="margin-top: 1em">-check <br>
Validate keyfile, an existing keyfile. The keyfile is
expressed as a vfs-ref or an absolute filename (see
dacs.conf(5)[4]).</p>

<p style="margin-top: 1em">-priv <br>
-private <br>
Print the private key found in keyfile, an existing keyfile,
to stdout. The private key is not encrypted. If the -pem
flag is present, the PEM format is used, otherwise the <br>
DACS base-64 encoding is used (the latter is used when keys
appear in XML attribute values).</p>

<p style="margin-top: 1em">-pub <br>
-public <br>
Print the public key found in keyfile, an existing keyfile,
to stdout. If the -pem flag is present, the PEM format is
used, otherwise the DACS base-64 encoding is used (the <br>
latter is used when keys appear in XML attribute
values).</p>

<p style="margin-top: 1em">-p <br>
Rather than using the default source for generating random
strings, derive the random strings from material read from
the standard input. The user is prompted for input. This
<br>
option should not be used under normal circumstances.</p>

<p style="margin-top: 1em">-pem <br>
When printing a key, use the PEM format.</p>

<p style="margin-top: 1em">-pf passphrase-file <br>
Rather than using the default source for generating random
strings, derive the random strings from material read from
passphrase-file. If the filename argument is &quot;-&quot;,
the <br>
standard input is read. This option should not be used under
normal circumstances.</p>

<p style="margin-top: 1em">-rsa_key_bits number <br>
This specifies the length of the RSA modulus, in bits, used
for asymmetric key generation. Used as the num argument to
RSA_generate_key(3)[5], the value must satisfy that <br>
function&rsquo;s constraints.</p>

<p style="margin-top: 1em">-- <br>
This argument explicitly marks the end of the flags.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
The program exits 0 if everything was fine, 1 if an error
occurred.</p>

<p style="margin-top: 1em">SEE ALSO <br>
dacsauth(1)[6], dacsgrid(1)[2], dacsinit(1)[7],
dacsrlink(1)[8] dacstoken(1)[9], dacs.install(7)[10],
dacs_acs(8)[11]</p>

<p style="margin-top: 1em">AUTHOR <br>
Distributed Systems Software (www.dss.ca[12])</p>

<p style="margin-top: 1em">COPYING <br>
Copyright2003-2014 Distributed Systems Software. See the
LICENSE[13] file that accompanies the distribution for
licensing information.</p>

<p style="margin-top: 1em">NOTES <br>
1. dacsoptions <br>
http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>

<p style="margin-top: 1em">2. dacsgrid(1) <br>
http://dacs.dss.ca/man/dacsgrid.1.html</p>

<p style="margin-top: 1em">3. ssl(3) <br>

http://www.freebsd.org/cgi/man.cgi?query=ssl&amp;apropos=0&amp;sektion=3&amp;manpath=FreeBSD+10.1-RELEASE&amp;format=html</p>

<p style="margin-top: 1em">4. dacs.conf(5) <br>
http://dacs.dss.ca/man/dacs.conf.5.html#VFS</p>

<p style="margin-top: 1em">5. RSA_generate_key(3) <br>

http://www.freebsd.org/cgi/man.cgi?query=RSA_generate_key&amp;apropos=0&amp;sektion=3&amp;manpath=FreeBSD+10.1-RELEASE&amp;format=html</p>

<p style="margin-top: 1em">6. dacsauth(1) <br>
http://dacs.dss.ca/man/dacsauth.1.html</p>

<p style="margin-top: 1em">7. dacsinit(1) <br>
http://dacs.dss.ca/man/dacsinit.1.html</p>

<p style="margin-top: 1em">8. dacsrlink(1) <br>
http://dacs.dss.ca/man/dacsrlink.1.html</p>

<p style="margin-top: 1em">9. dacstoken(1) <br>
http://dacs.dss.ca/man/dacstoken.1.html</p>

<p style="margin-top: 1em">10. dacs.install(7) <br>
http://dacs.dss.ca/man/dacs.install.7.html</p>

<p style="margin-top: 1em">11. dacs_acs(8) <br>
http://dacs.dss.ca/man/dacs_acs.8.html</p>

<p style="margin-top: 1em">12. www.dss.ca <br>
http://www.dss.ca</p>

<p style="margin-top: 1em">13. LICENSE <br>
http://dacs.dss.ca/man/../misc/LICENSE</p>

<p style="margin-top: 1em">DACS 1.4.38a 01/12/2017
DACSKEY(1)</p>
<hr>
</body>
</html>
