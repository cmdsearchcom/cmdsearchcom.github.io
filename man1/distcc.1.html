<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>distcc(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">distcc(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">distcc(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
distcc - distributed C/C++/ObjC compiler with distcc-pump extensions
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>distcc</b> <i>&lt;compiler&gt; [COMPILER OPTIONS]</i>
<div class="Pp"></div>
<b>distcc</b> <i>[COMPILER OPTIONS]</i>
<div class="Pp"></div>
<b>&lt;compiler&gt;</b> <i>[COMPILER OPTIONS]</i>
<div class="Pp"></div>
<b>distcc</b> <i>[DISTCC OPTIONS]</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
distcc distributes compilation of C code across several machines on a network.
  distcc should always generate the same results as a local compile, it is
  simple to install and use, and it is often much faster than a local compile.
<div class="Pp"></div>
This version incorporates plain distcc as well as an enhancement called pump
  mode or distcc-pump.
<div class="Pp"></div>
For each job, distcc in plain mode sends the complete preprocessed source code
  and compiler arguments across the network from the client to a compilation
  server. In pump mode, distcc sends the source code and recursively included
  header files (excluding those from the default system header directories), so
  that both preprocessing and compilation can take place on the compilation
  servers. This speeds up the delivery of compilations by up to an order of
  magnitude over plain distcc.
<div class="Pp"></div>
Compilation is driven by a client machine, which is typically the developer's
  workstation or laptop. The distcc client runs on this machine, as does make,
  the preprocessor (if distcc's pump mode is not used), the linker, and other
  stages of the build process. Any number of volunteer machines act as
  compilation servers and help the client to build the program, by running the
  <b>distccd(1)</b> daemon, C compiler and assembler as required.
<div class="Pp"></div>
distcc can run across either TCP sockets (on port 3632 by default), or through a
  tunnel command such as ssh(1). For TCP connections the volunteers must run the
  distccd(1) daemon either directly or from inetd. For SSH connections distccd
  must be installed but should <b>not</b> be listening for connections.
<div class="Pp"></div>
TCP connections should only be used on secure networks because there is no user
  authentication or protection of source or object code. SSH connections are
  typically 25% slower because of processor overhead for encryption, although
  this can vary greatly depending on CPUs, network and the program being built.
<div class="Pp"></div>
distcc is intended to be used with GNU Make's <b>-j</b> option, which runs
  several compiler processes concurrently. distcc spreads the jobs across both
  local and remote CPUs. Because distcc is able to distribute most of the work
  across the network, a higher concurrency level can be used than for local
  builds. As a rule of thumb, the <b>-j</b> value should be set to about twice
  the total number of available server CPUs but subject to client limitations.
  This setting allows for maximal interleaving of tasks being blocked waiting
  for disk or network IO. Note that distcc can also work with other build
  control tools, such as SCons, where similar concurrency settings must be
  adjusted.
<div style="height: 1.00em;">&#x00A0;</div>
The <b>-j</b> setting, especially for large values of <b>-j,</b> must take into
  account the CPU load on the client. Additional measures may be needed to
  curtail the client load. For example, concurrent linking should be severely
  curtailed using auxiliary locks. The effect of other build activity, such as
  Java compilation when building mixed code, should be considered. The
  <b>--localslots_cpp</b> parameter is by default set to 16. This limits the
  number of concurrent processes that do preprocessing in plain distcc
  (non-pump) mode. Therefore, larger <b>-j</b> values than 16 may be used
  without overloading a single-CPU client due to preprocessing. Such large
  values may speed up parts of the build that do not involve C compilations, but
  they may not be useful to distcc efficiency in plain mode.
<div style="height: 1.00em;">&#x00A0;</div>
In contrast, using pump mode and say 40 servers, a setting of <b>-j80</b> or
  larger may be appropriate even for single-CPU clients.
<div class="Pp"></div>
It is strongly recommended that you install the same compiler version on all
  machines participating in a build. Incompatible compilers may cause mysterious
  compile or link failures.
<h1 class="Sh" title="Sh" id="QUICKSTART"><a class="selflink" href="#QUICKSTART">QUICKSTART</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">1</dt>
  <dd class="It-tag">For each machine, download distcc, unpack, and
    install.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2</dt>
  <dd class="It-tag">On each of the servers, run <b>distccd --daemon</b> with
      <b>--allow</b> options to restrict access.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3</dt>
  <dd class="It-tag">Put the names of the servers in your environment:</dd>
</dl>
<div style="margin-left: 5.00ex;">$ export DISTCC_HOSTS='localhost red green
  blue'</div>
<dl class="Bl-tag">
  <dt class="It-tag">4</dt>
  <dd class="It-tag">Build!</dd>
</dl>
<div style="margin-left: 5.00ex;">$ make -j8 CC=distcc</div>
<h1 class="Sh" title="Sh" id="QUICKSTART_FOR_DISTCC-PUMP_MODE"><a class="selflink" href="#QUICKSTART_FOR_DISTCC-PUMP_MODE">QUICKSTART
  FOR DISTCC-PUMP MODE</a></h1>
Proceed as above, but in Step 3, specify that the remote hosts are to carry the
  burden of preprocessing and that the files sent over the network should be
  compressed:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">$ export DISTCC_HOSTS='--randomize localhost
  red,cpp,lzo green,cpp,lzo blue,cpp,lzo'</div>
<div style="height: 1.00em;">&#x00A0;</div>
The <b>--randomize</b> option enforces a uniform usage of compile servers. While
  you will get some benefit from distcc's pump mode with only a few servers, you
  get increasing benefit with more server CPUs (up to the hundreds!). Wrap your
  build inside the pump command, here assuming 10 servers:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">$ distcc-pump make -j20 CC=distcc</div>
<h1 class="Sh" title="Sh" id="HOW_PLAIN_(NON-PUMP)_DISTCC_WORKS"><a class="selflink" href="#HOW_PLAIN_(NON-PUMP)_DISTCC_WORKS">HOW
  PLAIN (NON-PUMP) DISTCC WORKS</a></h1>
distcc only ever runs the compiler and assembler remotely. With plain distcc,
  the preprocessor must always run locally because it needs to access various
  header files on the local machine which may not be present, or may not be the
  same, on the volunteer. The linker similarly needs to examine libraries and
  object files, and so must run locally.
<div class="Pp"></div>
The compiler and assembler take only a single input file (the preprocessed
  source) and produce a single output (the object file). distcc ships these two
  files across the network and can therefore run the compiler/assembler
  remotely.
<div class="Pp"></div>
Fortunately, for most programs running the preprocessor is relatively cheap, and
  the linker is called relatively infrequent, so most of the work can be
  distributed.
<div class="Pp"></div>
distcc examines its command line to determine which of these phases are being
  invoked, and whether the job can be distributed.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HOW_DISTCC-PUMP_MODE_WORKS"><a class="selflink" href="#HOW_DISTCC-PUMP_MODE_WORKS">HOW
  DISTCC-PUMP MODE WORKS</a></h1>
In pump mode, distcc runs the preprocessor remotely too. To do so, the
  preprocessor must have access to all the files that it would have accessed if
  had been running locally. In pump mode, therefore, distcc gathers all of the
  recursively included headers, except the ones that are default system headers,
  and sends them along with the source file to the compilation server.
<div style="height: 1.00em;">&#x00A0;</div>
In distcc-pump mode, the server unpacks the set of all source files in a
  temporary directory, which contains a directory tree that mirrors the part of
  the file system that is relevant to preprocessing, including symbolic links.
<div style="height: 1.00em;">&#x00A0;</div>
The compiler is then run from the path in the temporary directory that
  corresponds to the current working directory on the client. To find and
  transmit the many hundreds of files that are often part of a single
  compilation, pump mode uses an incremental include analysis algorithm. The
  include server is a Python program that implements this algorithm. The
  distcc-pump command starts the include server so that throughout the build it
  can answer include queries by distcc commands.
<div style="height: 1.00em;">&#x00A0;</div>
The include server uses static analysis of the macro language to deal with
  conditional compilation and computed includes. It uses the property that when
  a given header file has already been analyzed for includes, it is not
  necessary to do so again if all the include options (-I's) are unchanged
  (along with other conditions).
<div style="height: 1.00em;">&#x00A0;</div>
For large builds, header files are included, on average, hundreds of times each.
  With distcc-pump mode each such file is analyzed only a few times, perhaps
  just once, instead of being preprocessed hundreds of times. Also, each source
  or header file is now compressed only once, because the include server
  memoizes the compressed files. As a result, the time used for preparing
  compilations may drop by up to an order of magnitude over the preprocessing of
  plain distcc.
<div style="height: 1.00em;">&#x00A0;</div>
Because distcc in pump mode is able to push out files up to about ten times
  faster, build speed may increase 3X or more for large builds compared to plain
  distcc mode.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="RESTRICTIONS_FOR_PUMP_MODE"><a class="selflink" href="#RESTRICTIONS_FOR_PUMP_MODE">RESTRICTIONS
  FOR PUMP MODE</a></h1>
Using pump mode requires both client and servers to use release 3.0 or later of
  distcc and distccd (respectively).
<div style="height: 1.00em;">&#x00A0;</div>
The incremental include analysis of distc-pump mode rests on the fundamental
  assumption that source and header files do not change during the build
  process. A few complex build systems, such as that for Linux kernel 2.6, do
  not quite satisfy this requirement. To overcome such issues, and other corner
  cases such as absolute filepaths in includes, see the <b>include_server(1)</b>
  man page.
<div style="height: 1.00em;">&#x00A0;</div>
Another important assumption is that the include configuration of all machines
  must be identical. Thus the headers under the default system path must be the
  same on all servers and all clients. If a standard GNU compiler installation
  is used, then this requirement applies to all libraries whose header files are
  installed under /usr/include or /usr/local/include/. Note that installing
  software packages often lead to additional headers files being placed in
  subdirectories of either.
<div style="height: 1.00em;">&#x00A0;</div>
If this assumption does not hold, then it is possible to break builds with
  distcc-pump mode, or worse, to get wrong results without warning. Presently
  this condition is not verified, and it is on our TODO list to address this
  issue.
<div style="height: 1.00em;">&#x00A0;</div>
An easy way to guarantee that the include configurations are identical is to use
  a cross-compiler that defines a default system search path restricted to
  directories of the compiler installation.
<div style="height: 1.00em;">&#x00A0;</div>
See the <b>include_server</b>(1) manual for more information on symptoms and
  causes of violations of distcc-pump mode assumptions.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTION_SUMMARY"><a class="selflink" href="#OPTION_SUMMARY">OPTION
  SUMMARY</a></h1>
Most options passed to distcc are interpreted as compiler options. The following
  options are understood by distcc itself. If any of these options are
  specified, distcc will not invoke the compiler.
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Displays summary instructions.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Displays the distcc client version.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-hosts</b></dt>
  <dd class="It-tag">Displays the host list that distcc would use. See the Host
      Specifications section.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--scan-includes</b></dt>
  <dd class="It-tag">Displays the list of files that distcc would send to the
      remote machine, as computed by the include server. This is a conservative
      (over-)approximation of the files that would be read by the C compiler.
      This option only works in pump mode. See the &quot;How Distcc-pump Mode
      Works&quot; section for details on how this is computed.
    <div style="height: 1.00em;">&#x00A0;</div>
    The list output by <b>distcc --scan-includes</b> will contain one entry per
      line. Each line contains a category followed by a path. The category is
      one of FILE, SYMLINK, DIRECTORY, or SYSTEMDIR:
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<div style="margin-left: 5.00ex;"><b>FILE</b> indicates a source file or header
  file that would be sent to the distcc server host.
<div style="height: 1.00em;">&#x00A0;</div>
<b>SYMLINK</b> indicates a symbolic link that would be sent to the distcc server
  host.
<div style="height: 1.00em;">&#x00A0;</div>
<b>DIRECTORY</b> indicates a directory that may be needed in order to compile
  the source file. For example, a directory &quot;foo&quot; may be needed
  because of an include of the form #include &quot;foo/../bar.h&quot;. Such
  directories would be created on the distcc server host.
<div style="height: 1.00em;">&#x00A0;</div>
<b>SYSTEMDIR</b> indicates a system include directory, i.e. a directory which is
  on the compiler's default include path, such as &quot;/usr/include&quot;; such
  directories are assumed to be present on the distcc server host, and so would
  not be sent to the distcc server host.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b></dt>
  <dd class="It-tag">Displays distcc's concurrency level, as calculated from the
      host list; it is the maximum number of outstanding jobs issued by this
      client to all servers. By default this will be four times the number of
      hosts in the host list, unless the /LIMIT option was used in the host
      list. See the Host Specifications section.</dd>
</dl>
<h1 class="Sh" title="Sh" id="INSTALLING_DISTCC"><a class="selflink" href="#INSTALLING_DISTCC">INSTALLING
  DISTCC</a></h1>
There are three different ways to call distcc, to suit different circumstances:
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
distcc can be installed under the name of the real compiler, to intercept calls
  to it and run them remotely. This &quot;masqueraded&quot; compiler has the
  widest compatibility with existing source trees, and is convenient when you
  want to use distcc for all compilation. The fact that distcc is being used is
  transparent to the makefiles.
<div class="Pp"></div>
distcc can be prepended to compiler command lines, such as &quot;distcc cc -c
  hello.c&quot; or CC=&quot;distcc gcc&quot;. This is convenient when you want
  to use distcc for only some compilations or to try it out, but can cause
  trouble with some makefiles or versions of libtool that assume $CC does not
  contain a space.
<div class="Pp"></div>
Finally, distcc can be used directly as a compiler. &quot;cc&quot; is always
  used as the name of the real compiler in this &quot;implicit&quot; mode. This
  can be convenient for interactive use when &quot;explicit&quot; mode does not
  work but is not really recommended for new use.</div>
<div class="Pp"></div>
Remember that you should not use two methods for calling distcc at the same
  time. If you are using a masquerade directory, don't change CC and/or CXX,
  just put the directory early on your PATH. If you're not using a masquerade
  directory, you'll need to either change CC and/or CXX, or modify the
  makefile(s) to call distcc explicitly.
<h1 class="Sh" title="Sh" id="MASQUERADING"><a class="selflink" href="#MASQUERADING">MASQUERADING</a></h1>
The basic idea is to create a &quot;masquerade directory&quot; which contains
  links from the name of the real compiler to the distcc binary. This directory
  is inserted early on the PATH, so that calls to the compiler are intercepted
  and distcc is run instead. distcc then removes itself from the PATH to find
  the real compiler.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
# mkdir /usr/lib/distcc/bin
# cd /usr/lib/distcc/bin
# ln -s ../../../bin/distcc gcc
# ln -s ../../../bin/distcc cc
# ln -s ../../../bin/distcc g++
# ln -s ../../../bin/distcc c++
</pre>
</div>
<div class="Pp"></div>
Then, to use distcc, a user just needs to put the directory /usr/lib/distcc/bin
  early in the PATH, and have set a host list in DISTCC_HOSTS or a file. distcc
  will handle the rest.
<div class="Pp"></div>
Note that this masquerade directory must occur on the PATH earlier than the
  directory that contains the actual compilers of the same names, and that any
  auxiliary programs that these compilers call (such as as or ld) must also be
  found on the PATH in a directory after the masquerade directory since distcc
  calls out to the real compiler with a PATH value that has all directory up to
  and including the masquerade directory trimmed off.
<div class="Pp"></div>
It is possible to get a &quot;recursion error&quot; in masquerade mode, which
  means that distcc is somehow finding itself again, not the real compiler. This
  can indicate that you have two masquerade directories on the PATH, possibly
  because of having two distcc installations in different locations. It can also
  indicate that you're trying to mix &quot;masqueraded&quot; and
  &quot;explicit&quot; operation.
<div class="Pp"></div>
Recursion errors can be avoided by using shell scripts instead of links. For
  example, in /usr/lib/distcc/bin create a file cc which contains:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
#!/bin/sh 
distcc /usr/bin/gcc &quot;$@&quot;
</pre>
</div>
<div class="Pp"></div>
In this way, we are not dependent on distcc having to locate the real gcc by
  investigating the PATH variable. Instead, the compiler location is explicitly
  provided.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="USING_DISTCC_WITH_CCACHE"><a class="selflink" href="#USING_DISTCC_WITH_CCACHE">USING
  DISTCC WITH CCACHE</a></h1>
ccache is a program that speeds software builds by caching the results of
  compilations. ccache is normally called before distcc, so that results are
  retrieved from a normal cache. Some experimentation may be required for
  idiosyncratic makefiles to make everything work together.
<div class="Pp"></div>
The most reliable method is to set
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>CCACHE_PREFIX=&quot;distcc&quot;</b></dd>
</dl>
<div class="Pp"></div>
This tells ccache to run distcc as a wrapper around the real compiler. ccache
  still uses the real compiler to detect compiler upgrades.
<div class="Pp"></div>
ccache can then be run using either a masquerade directory <i>or</i> by setting
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag"><b>CC=&quot;ccache gcc&quot;</b></dd>
</dl>
<div class="Pp"></div>
As of version 2.2, ccache does not cache compilation from preprocessed source
  and so will never get a cache hit if it is run from distccd or distcc. It must
  be run only on the client side and before distcc to be any use.
<div style="height: 1.00em;">&#x00A0;</div>
distcc's pump mode is not compatible with ccache.
<h1 class="Sh" title="Sh" id="HOST_SPECIFICATIONS"><a class="selflink" href="#HOST_SPECIFICATIONS">HOST
  SPECIFICATIONS</a></h1>
A &quot;host list&quot; tells distcc which machines to use for compilation. In
  order, distcc looks in the <b>$DISTCC_HOSTS</b> environment variable, the
  user's <b>$DISTCC_DIR/hosts</b> file, and the system-wide host file. If no
  host list can be found, distcc emits a warning and compiles locally.
<div class="Pp"></div>
The host list is a simple whitespace separated list of host specifications. The
  simplest and most common form is a host names, such as
<div class="Pp"></div>
<div style="margin-left: 5.00ex;"><b>localhost red green blue</b></div>
<div class="Pp"></div>
distcc prefers hosts towards the start of the list, so machines should be listed
  in descending order of speed. In particular, when only a single compilation
  can be run (such as from a configure script), the first machine listed is used
  (but see <i>--randomize</i> below).
<div class="Pp"></div>
Placing <i>localhost</i> at the right point in the list is important to getting
  good performance. Because overhead for running jobs locally is low, localhost
  should normally be first. However, it is important that the client have enough
  cycles free to run the local jobs and the distcc client. If the client is
  slower than the volunteers, or if there are many volunteers, then the client
  should be put later in the list or not at all. As a general rule, if the
  aggregate CPU speed of the client is less than one fifth of the total, then
  the client should be left out of the list.
<div class="Pp"></div>
If you have a large shared build cluster and a single shared hosts file, the
  above rules would cause the first few machines in the hosts file to be tried
  first even though they are likely to be busier than machines later in the
  list. To avoid this, place the keyword <i>--randomize</i> into the host list.
  This will cause the host list to be randomized, which should improve
  performance slightly for large build clusters.
<div class="Pp"></div>
There are two special host names <b>--localslots</b> and <b>--localslots_cpp</b>
  which are useful for adjusting load on the local machine. The
  <b>--localslots</b> host specifies how many jobs that cannot be run remotely
  that can be run concurrently on the local machine, while
  <b>--localslots_cpp</b> controls how many preprocessors will run in parallel
  on the local machine. Tuning these values can improve performance. Linking on
  large projects can take large amounts of memory. Running parallel linkers,
  which cannot be executed remotely, may force the machine to swap, which
  reduces performance over just running the jobs in sequence without swapping.
  Getting the number of parallel preprocessors just right allows you to use
  larger parallel factors with make, since the local machine now has some
  machanism for measuring local resource usage.
<div class="Pp"></div>
Finally there is the host entry
<div class="Pp"></div>
Performance depends on the details of the source and makefiles used for the
  project, and the machine and network speeds. Experimenting with different
  settings for the host list and <b>-j</b> factor may improve performance.
<div class="Pp"></div>
The syntax is
<div class="Pp"></div>
<pre>
  DISTCC_HOSTS = HOSTSPEC ...
  HOSTSPEC = LOCAL_HOST | SSH_HOST | TCP_HOST | OLDSTYLE_TCP_HOST
                        | GLOBAL_OPTION
                        | ZEROCONF
  LOCAL_HOST = localhost[/LIMIT]
             | --localslots=&lt;int&gt;
             | --localslots_cpp=&lt;int&gt;
  SSH_HOST = [USER]@HOSTID[/LIMIT][:COMMAND][OPTIONS]
  TCP_HOST = HOSTID[:PORT][/LIMIT][OPTIONS]
  OLDSTYLE_TCP_HOST = HOSTID[/LIMIT][:PORT][OPTIONS]
  HOSTID = HOSTNAME | IPV4 | IPV6
  OPTIONS = ,OPTION[OPTIONS]
  OPTION = lzo | cpp
  GLOBAL_OPTION = --randomize
  ZEROCONF = +zeroconf
</pre>
<div class="Pp"></div>
Here are some individual examples of the syntax:
<dl class="Bl-tag">
  <dt class="It-tag"><b>localhost</b></dt>
  <dd class="It-tag">The literal word &quot;localhost&quot; is interpreted
      specially to cause compilations to be directly executed, rather than
      passed to a daemon on the local machine. If you do want to connect to a
      daemon on the local machine for testing, then give the machine's IP
      address or real hostname. (This will be slower.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>IPV6</b></dt>
  <dd class="It-tag">A literal IPv6 address enclosed in square brackets, such as
      <b>[::1]</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>IPV4</b></dt>
  <dd class="It-tag">A literal IPv4 address, such as <b>10.0.0.1</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOSTNAME</b></dt>
  <dd class="It-tag">A hostname to be looked up using the resolver.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:PORT</b></dt>
  <dd class="It-tag">Connect to a specified decimal port number, rather than the
      default of 3632.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>@HOSTID</b></dt>
  <dd class="It-tag">Connect to the host over SSH, rather than TCP. Options for
      the SSH connection can be set in <b>~/.ssh/config</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>USER@</b></dt>
  <dd class="It-tag">Connect to the host over SSH as a specified username.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>:COMMAND</b></dt>
  <dd class="It-tag">Connect over SSH, and use a specified path to find the
      distccd server. This is normally only needed if for some reason you can't
      install distccd into a directory on the default PATH for SSH connections.
      Use this if you get errors like &quot;distccd: command not found&quot; in
      SSH mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>/LIMIT</b></dt>
  <dd class="It-tag">A decimal limit can be added to any host specification to
      restrict the number of jobs that this client will send to the machine. The
      limit defaults to four per host (two for localhost), but may be further
      restricted by the server. You should only need to increase this for
      servers with more than two processors.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>,lzo</b></dt>
  <dd class="It-tag">Enables LZO compression for this TCP or SSH host.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>,cpp</b></dt>
  <dd class="It-tag">Enables distcc-pump mode for this host. Note: the build
      command must be wrapped in the distcc-pump script in order to start the
      include server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--randomize</b></dt>
  <dd class="It-tag">Randomize the order of the host list before execution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>+zeroconf</b></dt>
  <dd class="It-tag"><b>This option is only available if distcc was compiled
      with Avahi support enabled at configure time.</b> When this special entry
      is present in the hosts list, distcc will use Avahi Zeroconf DNS Service
      Discovery (DNS-SD) to locate any available distccd servers on the local
      network. This avoids the need to explicitly list the host names or IP
      addresses of the distcc server machines. The distccd servers must have
      been started with the &quot;--zeroconf&quot; option to distccd. An
      important caveat is that in the current implementation, pump mode
      (&quot;,cpp&quot;) and compression (&quot;,lzo&quot;) will never be used
      for hosts located via zeroconf.</dd>
</dl>
<div class="Pp"></div>
Here is an example demonstrating some possibilities:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">
<pre>
<b>localhost/2 @bigman/16:/opt/bin/distccd oldmachine:4200/1</b>
<b># cartman is down</b>
<b>distant/3,lzo</b>
</pre>
</div>
<div class="Pp"></div>
Comments are allowed in host specifications. Comments start with a hash/pound
  sign ( <b>#</b>) and run to the end of the line.
<div class="Pp"></div>
If a host in the list is not reachable distcc will emit a warning and ignore
  that host for about one minute.
<h1 class="Sh" title="Sh" id="COMPRESSION"><a class="selflink" href="#COMPRESSION">COMPRESSION</a></h1>
The <b>lzo</b> host option specifies that LZO compression should be used for
  data transfer, including preprocessed source, object code and error messages.
  Compression is usually economical on networks slower than 100Mbps, but results
  may vary depending on the network, processors and source tree.
<div class="Pp"></div>
Enabling compression makes the distcc client and server use more CPU time, but
  less network traffic. The added CPU time is insignificant for pump mode. The
  compression ratio is typically 4:1 for source and 2:1 for object code.
<div class="Pp"></div>
Using compression requires both client and server to use at least release 2.9 of
  distcc. No server configuration is required: the server always responds with
  compressed replies to compressed requests.
<div class="Pp"></div>
Pump mode requires the servers to have the lzo host option on.
<h1 class="Sh" title="Sh" id="SEARCH_PATHS"><a class="selflink" href="#SEARCH_PATHS">SEARCH
  PATHS</a></h1>
If the compiler name is an absolute path, it is passed verbatim to the server
  and the compiler is run from that directory. For example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;"><b>distcc /usr/local/bin/gcc-3.1415 -c
  hello.c</b></div>
<div class="Pp"></div>
If the compiler name is not absolute, or not fully qualified, distccd's PATH is
  searched. When distcc is run from a masquerade directory, only the base name
  of the compiler is used. The client's PATH is used only to run the
  preprocessor and has no effect on the server's path.
<h1 class="Sh" title="Sh" id="TIMEOUTS"><a class="selflink" href="#TIMEOUTS">TIMEOUTS</a></h1>
Both the distcc client and server impose timeouts on transfer of data across the
  network. This is intended to detect hosts which are down or unreachable, and
  to prevent compiles hanging indefinitely if a server is disconnected while in
  use. If a client-side timeout expires, the job will be re-run locally.
<div class="Pp"></div>
The timeouts are not configurable at present.
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
Error messages or warnings from local or remote compilers are passed through to
  diagnostic output on the client.
<div class="Pp"></div>
distcc can supply extensive debugging information when the verbose option is
  used. This is controlled by the <b>DISTCC_VERBOSE</b> environment variable on
  the client, and the <b>--verbose</b> option on the server. For
  troubleshooting, examine both the client and server error messages.
<h1 class="Sh" title="Sh" id="EXIT_CODES"><a class="selflink" href="#EXIT_CODES">EXIT
  CODES</a></h1>
The exit code of distcc is normally that of the compiler: zero for successful
  compilation and non-zero otherwise.
<div class="Pp"></div>
distcc distinguishes between &quot;genuine&quot; errors such as a syntax error
  in the source, and &quot;accidental&quot; errors such as a networking problem
  connecting to a volunteer. In the case of accidental errors, distcc will retry
  the compilation locally unless the DISTCC_FALLBACK option has been disabled.
<div class="Pp"></div>
If the compiler exits with a signal, distcc returns an exit code of 128 plus the
  signal number.
<div class="Pp"></div>
distcc internal errors cause an exit code between 100 and 127. In particular
<dl class="Bl-tag">
  <dt class="It-tag">100</dt>
  <dd class="It-tag">General distcc failure.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">101</dt>
  <dd class="It-tag">Bad arguments.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">102</dt>
  <dd class="It-tag">Bind failed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">103</dt>
  <dd class="It-tag">Connect failed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">104</dt>
  <dd class="It-tag">Compiler crashed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">105</dt>
  <dd class="It-tag">Out of memory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">106</dt>
  <dd class="It-tag">Bad Host SPEC</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">107</dt>
  <dd class="It-tag">I/O Error</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">108</dt>
  <dd class="It-tag">Truncated.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">109</dt>
  <dd class="It-tag">Protocol Error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">110</dt>
  <dd class="It-tag">The given compiler was not found on the remote host. Check
      that $CC is set appropriately and that it's installed in a directory on
      the search path for distccd.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">111</dt>
  <dd class="It-tag">Recursive call to distcc.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">112</dt>
  <dd class="It-tag">Failed to discard privileges.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">113</dt>
  <dd class="It-tag">Network access denied.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">114</dt>
  <dd class="It-tag">In use by another process.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">115</dt>
  <dd class="It-tag">No such file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">116</dt>
  <dd class="It-tag">No hosts defined and fallbacks disabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">118</dt>
  <dd class="It-tag">Timeout.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
If $DISTCC_HOSTS is not set, distcc reads a host list from either
  <b>$DISTCC_DIR/hosts</b> or a system-wide configuration file set at compile
  time. The file locations are shown in the output from <b>distcc --help</b>
<div class="Pp"></div>
distcc creates a number of temporary and lock files underneath the temporary
  directory.
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
distcc's behaviour is controlled by a number of environment variables. For most
  cases nothing need be set if the host list is stored in a file.
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_HOSTS</b></dt>
  <dd class="It-tag">Space-separated list of volunteer host specifications.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_VERBOSE</b></dt>
  <dd class="It-tag">If set to 1, distcc produces explanatory messages on the
      standard error stream or in the log file. This can be helpful in debugging
      problems. Bug reports should include verbose output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_LOG</b></dt>
  <dd class="It-tag">Log file to receive messages from distcc itself, rather
      than stderr.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_FALLBACK</b></dt>
  <dd class="It-tag">By default distcc will compile locally if it fails to
      distribute a job to the intended machine, or if no host list can be found.
      If this variable is set to 0 then fallbacks are disabled and those
      compilations will simply fail. Note that this does not affect jobs which
      must always be local such as linking.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_SAVE_TEMPS</b></dt>
  <dd class="It-tag">If set to 1, temporary files are not deleted after use.
      Good for debugging, or if your disks are too empty.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_TCP_CORK</b></dt>
  <dd class="It-tag">If set to 0, disable use of &quot;TCP corks&quot;, even if
      they're present on this system. Using corks normally helps pack requests
      into fewer packets and aids performance. This should normally be left
      enabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_SSH</b></dt>
  <dd class="It-tag">Specifies the command used for opening SSH connections.
      Defaults to &quot;ssh&quot; but may be set to a different connection
      command such as &quot;lsh&quot; or &quot;tsocks-ssh&quot; that accepts a
      similar command line. The command is not split into words and is not
      executed through the shell.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_DIR</b></dt>
  <dd class="It-tag">Per-user configuration directory to store lock files and
      state files. By default <b>~/.distcc/</b> is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>TMPDIR</b></dt>
  <dd class="It-tag">Directory for temporary files such as preprocessor output.
      By default /tmp/ is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>UNCACHED_ERR_FD</b></dt>
  <dd class="It-tag">If set and if DISTCC_LOG is not set, distcc errors are
      written to the file descriptor identified by this variable. This variable
      is intended mainly for automatic use by ccache, which sets it to avoid
      caching transient errors such as network problems.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DISTCC_ENABLE_DISCREPANCY_EMAIL</b></dt>
  <dd class="It-tag">If set, distcc sends an email when a compilation failed
      remotely, but succeeded locally. Built-in heuristics prevent some such
      discrepancy email from being sent if the problem is that a local file
      changed between the failing remote compilation and the succeeding local
      compilation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DCC_EMAILLOG_WHOM_TO_BLAME</b></dt>
  <dd class="It-tag">The email address for discrepancy email; the default is
      &quot;distcc-pump-errors&quot;.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CROSS_COMPILING"><a class="selflink" href="#CROSS_COMPILING">CROSS
  COMPILING</a></h1>
Cross compilation means building programs to run on a machine with a different
  processor, architecture, or operating system to where they were compiled.
  distcc supports cross compilation, including teams of mixed-architecture
  machines, although some changes to the compilation commands may be required.
<div class="Pp"></div>
The compilation command passed to distcc must be one that will execute properly
  on every volunteer machine to produce an object file of the appropriate type.
  If the machines have different processors, then simply using <b>distcc cc</b>
  will probably not work, because that will normally invoke the volunteer's
  native compiler.
<div class="Pp"></div>
Machines with the same CPU but different operating systems may not necessarily
  generate compatible .o files.
<div class="Pp"></div>
Several different gcc configurations can be installed side-by-side on any
  machine. If you build gcc from source, you should use the <b>--program-suffix
  configuration</b> options to cause it to be installed with a name that encodes
  the gcc version and the target platform.
<div class="Pp"></div>
The recommended convention for the gcc name is <i>TARGET-gcc-VERSION</i> such as
  <b>i686-linux-gcc-3.2</b> . GCC 3.3 will install itself under this name, in
  addition to <i>TARGET-gcc</i> and, if it's native, <i>gcc-VERSION</i> and
  <i>gcc</i> .
<div class="Pp"></div>
The compiler must be installed under the same name on the client and on every
  volunteer machine.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
If you think you have found a distcc bug, please see the file
  <i>reporting-bugs.txt</i> in the documentation directory for information on
  how to report it.
<div class="Pp"></div>
Some makefiles have missing or extra dependencies that cause incorrect or slow
  parallel builds. Recursive make is inefficient and can leave processors
  unnecessarily idle for long periods. (See <i>Recursive Make Considered
  Harmful</i> by Peter Miller.) Makefile bugs are the most common cause of trees
  failing to build under distcc. Alternatives to Make such as <i>SCons</i> can
  give much faster builds for some projects.
<div class="Pp"></div>
Using different versions of gcc can cause confusing build problems because the
  header files and binary interfaces have changed over time, and some
  distributors have included incompatible patches without changing the version
  number. distcc does not protect against using incompatible versions. Compiler
  errors about link problems or declarations in system header files are usually
  due to mismatched or incorrectly installed compilers.
<div class="Pp"></div>
gcc's <b>-MD</b> option can produce output in the wrong directory if the source
  and object files are in different directories and the <b>-MF</b> option is not
  used. There is no perfect solution because of incompatible changes between gcc
  versions. Explicitly specifying the dependency output file with <b>-MF</b>
  will fix the problem.
<div class="Pp"></div>
TCP mode connections should only be used on trusted networks.
<div class="Pp"></div>
Including slow machines in the list of volunteer hosts can slow the build down.
<div class="Pp"></div>
When distcc or ccache is used on NFS, the filesystem must be exported with the
  <b>no_subtree_check</b> option to allow reliable renames between directories.
<div class="Pp"></div>
The compiler can be invoked with a command line <b>gcc hello.c</b> to both
  compile and link. distcc doesn't split this into separate parts, but rather
  runs the whole thing locally.
<div class="Pp"></div>
distcc-pump mode reverts to plain distcc mode for source files that contain
  includes with absolute paths (either directly or in an included file).
<div class="Pp"></div>
Due to limitations in gcc, gdb may not be able to automatically find the source
  files for programs built using distcc in some circumstances. The gdb
  <b>directory</b> command can be used. For distcc's plain (non-pump) mode, this
  is fixed in gcc 3.4 and later. For pump mode, the fix in gcc 3.4 does not
  suffice; we've worked around the gcc limitation by rewriting the object files
  that gcc produces, but this is only done for ELF object files, but not for
  other object file formats.
<div class="Pp"></div>
The .o files produced by discc in pump mode will be different from those
  produced locally: for non-ELF files, the debug information will specify
  compile directories of the server. The code itself should be identical.
<div class="Pp"></div>
For the ELF-format, distcc rewrites the .o files to correct compile directory
  path information. While the resulting .o files are not bytewise identical to
  what would have been produced by compiling on the local client (due to
  different padding, etc), they should be functionally identical.
<div class="Pp"></div>
In distcc-pump mode, the include server is unable to handle certain very
  complicated computed includes as found in parts of the Boost library. The
  include server will time out and distcc will revert to plain mode.
<div class="Pp"></div>
In distcc-pump mode, certain assumptions are made that source and header files
  do not change during the build. See discussion in section DISTCC DISCREPANCY
  SYMPTOMS of <b>include_server</b>(1().
<div style="height: 1.00em;">&#x00A0;</div>
Other known bugs may be documented on <i>http://code.google.com/p/distcc/</i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
distcc was written by Martin Pool &lt;mbp@sourcefrog.net&gt;, with the
  co-operation of many scholars including Wayne Davison, Frerich Raabe, Dimitri
  Papadopoulos and others noted in the NEWS file. Please report bugs to
  &lt;distcc@lists.samba.org&gt;. See <b>distcc-pump</b>(1) for the authors of
  pump mode.
<h1 class="Sh" title="Sh" id="LICENCE"><a class="selflink" href="#LICENCE">LICENCE</a></h1>
You are free to use distcc. distcc (including this manual) may be copied,
  modified or distributed only under the terms of the GNU General Public Licence
  version 2 or later. distcc comes with absolutely no warrany. A copy of the GPL
  is included in the file COPYING.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>distccd</b>(1), <b>distcc-pump</b>(1), <b>include_server</b>(1),
  <b>gcc</b>(1), <b>make</b>(1), and <b>ccache</b>(1).
  <i>http://code.google.com/p/distcc/</i> <i>http://ccache.samba.org/</i></div>
<table class="foot">
  <tr>
    <td class="foot-date">9 June 2008</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
