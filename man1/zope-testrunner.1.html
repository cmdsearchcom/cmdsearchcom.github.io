<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ZOPE.TESTRUNNER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ZOPE.TESTRUNNER(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">ZOPE.TESTRUNNER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
zope.testrunner - Zope testrunner script
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>zope-testrunner</b> [ <i>options</i>] [<i>MODULE</i>] [<i>TEST</i>]
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">show this help message and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Searching and filtering:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Options in this group are used to define which tests to
      run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b> PACKAGE, <b>--package</b>=<i>PACKAGE</i>,
    <b>--dir</b>= <i>PACKAGE</i></dt>
  <dd class="It-tag">Search the given package's directories for tests. This can
      be specified more than once to run tests in multiple parts of the source
      tree. For example, if refactoring interfaces, you don't want to see the
      way you have broken setups for tests in other packages. You *just* want to
      run the interface tests. Packages are supplied as dotted names. For
      compatibility with the old test runner, forward and backward slashed in
      package names are converted to dots. (In the special case of packages
      spread over multiple directories, only directories within the test search
      path are searched. See the <b>--path</b> option.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b> MODULE, <b>--module</b>=<i>MODULE</i></dt>
  <dd class="It-tag">Specify a test-module filter as a regular expression. This
      is a case-sensitive regular expression, used in search (not match) mode,
      to limit which test modules are searched for tests. The regular
      expressions are checked against dotted module names. In an extension of
      Python regexp notation, a leading &quot;!&quot; is stripped and causes the
      sense of the remaining regexp to be negated (so &quot;!bc&quot; matches
      any string that does not match &quot;bc&quot;, and vice versa). The option
      can be specified multiple test-module filters. Test modules matching any
      of the test filters are searched. If no test-module filter is specified,
      then all test modules are used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t</b> TEST, <b>--test</b>=<i>TEST</i></dt>
  <dd class="It-tag">Specify a test filter as a regular expression. This is a
      case-sensitive regular expression, used in search (not match) mode, to
      limit which tests are run. In an extension of Python regexp notation, a
      leading &quot;!&quot; is stripped and causes the sense of the remaining
      regexp to be negated (so &quot;!bc&quot; matches any string that does not
      match &quot;bc&quot;, and vice versa). The option can be specified
      multiple test filters. Tests matching any of the test filters are
      included. If no test filter is specified, then all tests are run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u</b>, <b>--unit</b></dt>
  <dd class="It-tag">Run only unit tests, ignoring any layer options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--non-unit</b></dt>
  <dd class="It-tag">Run tests other than unit tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--layer</b>=<i>LAYER</i></dt>
  <dd class="It-tag">Specify a test layer to run. The option can be given
      multiple times to specify more than one layer. If not specified, all
      layers are run. It is common for the running script to provide default
      values for this option. Layers are specified regular expressions, used in
      search mode, for dotted names of objects that define a layer. In an
      extension of Python regexp notation, a leading &quot;!&quot; is stripped
      and causes the sense of the remaining regexp to be negated (so
      &quot;!bc&quot; matches any string that does not match &quot;bc&quot;, and
      vice versa). The layer named 'zope.testrunner.layer.UnitTests' is reserved
      for unit tests, however, take note of the <b>--unit</b> and non-unit
      options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b> AT_LEVEL, <b>--at-level</b>=<i>AT_LEVEL</i></dt>
  <dd class="It-tag">Run the tests at the given level. Any test at a level at or
      below this is run, any test at a level above this is not run. Level 0 runs
      all tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--all</b></dt>
  <dd class="It-tag">Run tests at all levels.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-tests</b></dt>
  <dd class="It-tag">List all tests that matched your filters. Do not run any
      tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Reporting:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Reporting options control basic aspects of test-runner
      output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b></dt>
  <dd class="It-tag">Make output more verbose. Increment the verbosity
    level.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b>, <b>--quiet</b></dt>
  <dd class="It-tag">Make the output minimal, overriding any verbosity
    options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>, <b>--progress</b></dt>
  <dd class="It-tag">Output progress status</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-progress</b></dt>
  <dd class="It-tag">Do not output progress status. This is the default, but can
      be used to counter a previous use of <b>--progress</b> or <b>-p</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto-progress</b></dt>
  <dd class="It-tag">Output progress status, but only when stdout is a
    terminal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b>, <b>--color</b></dt>
  <dd class="It-tag">Colorize the output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C</b>, <b>--no-color</b></dt>
  <dd class="It-tag">Do not colorize the output. This is the default, but can be
      used to counter a previous use of <b>--color</b> or <b>-c</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto-color</b></dt>
  <dd class="It-tag">Colorize the output, but only when stdout is a
    terminal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--slow-test</b>=<i>N</i></dt>
  <dd class="It-tag">With <b>-c</b> and <b>-vvv</b>, highlight tests that take
      longer than N seconds (default: 10).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-1</b>, <b>--hide-secondary-failures</b></dt>
  <dd class="It-tag">Report only the first failure in a doctest. (Examples after
      the failure are still executed, in case they do any cleanup.)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--show-secondary-failures</b></dt>
  <dd class="It-tag">Report all failures in a doctest. This is the default, but
      can be used to counter a default use of <b>-1</b> or
      <b>--hide-secondary-failures</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ndiff</b></dt>
  <dd class="It-tag">When there is a doctest failure, show it as a diff using
      the ndiff.py utility.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--udiff</b></dt>
  <dd class="It-tag">When there is a doctest failure, show it as a unified
    diff.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cdiff</b></dt>
  <dd class="It-tag">When there is a doctest failure, show it as a context
    diff.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-new-thread</b>=<i>REGEXP</i></dt>
  <dd class="It-tag">If a thread with this name is left behind, don't report
      this at the end. This is a case-sensitive regular expression, used in
      match mode. This option can be used multiple times. If a thread name
      matches any of them, it will be ignored.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Analysis:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Analysis options provide tools for analysing test
    output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b>, <b>--stop-on-error</b>, <b>--stop</b></dt>
  <dd class="It-tag">Stop running tests after first test failure or error.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--post-mortem</b>, <b>--pdb</b></dt>
  <dd class="It-tag">Enable post-mortem debugging of test failures</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b> GC, <b>--gc</b>=<i>GC</i></dt>
  <dd class="It-tag">Set the garbage collector generation threshold. This can be
      used to stress memory and gc correctness. Some crashes are only
      reproducible when the threshold is set to 1 (aggressive garbage
      collection). Do &quot;--gc 0&quot; to disable garbage collection
      altogether. The <b>--gc</b> option can be used up to 3 times to specify up
      to 3 of the 3 Python gc_threshold settings.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-G</b> GC_OPTION,
    <b>--gc-option</b>=<i>GC_OPTION</i></dt>
  <dd class="It-tag">Set a Python gc-module debug flag. This option can be used
      more than once to set multiple flags.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b> REPEAT, <b>--repeat</b>=<i>REPEAT</i></dt>
  <dd class="It-tag">Repeat the tests the given number of times. This option is
      used to make sure that tests leave their environment in the state they
      found it and, with the <b>--report-refcounts</b> option to look for memory
      leaks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--report-refcounts</b></dt>
  <dd class="It-tag">After each run of the tests, output a report summarizing
      changes in refcounts by object type. This option that requires that Python
      was built with the <b>--with-pydebug</b> option to configure.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--coverage</b>=<i>COVERAGE</i></dt>
  <dd class="It-tag">Perform code-coverage analysis, saving trace data to the
      directory with the given name. A code coverage summary is printed to
      standard out.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--profile</b>=<i>PROFILE</i></dt>
  <dd class="It-tag">Run the tests under cProfiler or hotshot and display the
      top 50 stats, sorted by cumulative time and number of calls.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--profile-directory</b>=<i>PROF_DIR</i></dt>
  <dd class="It-tag">Directory for temporary profiler files. All files named
      tests_profile.*.prof in this directory will be removed. If you intend to
      run multiple instances of the test runner in parallel, be sure to tell
      them to use different directories, so they won't step on each other's
      toes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pychecker</b></dt>
  <dd class="It-tag">Run the tests under pychecker</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Setup:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Setup options are normally supplied by the testrunner
      script, although they can be overridden by users.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--path</b>=<i>PATH</i></dt>
  <dd class="It-tag">Specify a path to be added to Python's search path. This
      option can be used multiple times to specify multiple search paths. The
      path is usually specified by the test-runner script itself, rather than by
      users of the script, although it can be overridden by users. Only tests
      found in the path will be run. This option also specifies directories to
      be searched for tests. See the search_directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--test-path</b>=<i>TEST_PATH</i></dt>
  <dd class="It-tag">Specify a path to be searched for tests, but not added to
      the Python search path. This option can be used multiple times to specify
      multiple search paths. The path is usually specified by the test-runner
      script itself, rather than by users of the script, although it can be
      overridden by users. Only tests found in the path will be run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--package-path</b>=<i>PACKAGE_PATH</i></dt>
  <dd class="It-tag">Specify a path to be searched for tests, but not added to
      the Python search path. Also specify a package for files found in this
      path. This is used to deal with directories that are stitched into
      packages that are not otherwise searched for tests. This option takes 2
      arguments. The first is a path name. The second is the package name. This
      option can be used multiple times to specify multiple search paths. The
      path is usually specified by the test-runner script itself, rather than by
      users of the script, although it can be overridden by users. Only tests
      found in the path will be run.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--tests-pattern</b>=<i>TESTS_PATTERN</i></dt>
  <dd class="It-tag">The test runner looks for modules containing tests. It uses
      this pattern to identify these modules. The modules may be either packages
      or python files. If a test module is a package, it uses the value given by
      the test-file-pattern to identify python files within the package
      containing tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--suite-name</b>=<i>SUITE_NAME</i></dt>
  <dd class="It-tag">Specify the name of the object in each test_module that
      contains the module's test suite.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--test-file-pattern</b>=<i>TEST_FILE_PATTERN</i></dt>
  <dd class="It-tag">Specify a pattern for identifying python files within a
      tests package. See the documentation for the <b>--tests-pattern</b>
      option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore_dir</b>=<i>IGNORE_DIR</i></dt>
  <dd class="It-tag">Specifies the name of a directory to ignore when looking
      for tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--shuffle</b></dt>
  <dd class="It-tag">Shuffles the order in which tests are ran.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--shuffle-seed</b>=<i>SHUFFLE_SEED</i></dt>
  <dd class="It-tag">Value used to initialize the tests shuffler. Specify a
      value to create repeatable random ordered tests.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Other:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Other options</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print the version of the testrunner, and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j</b> PROCESSES</dt>
  <dd class="It-tag">Use up to given number of parallel processes to execute
      tests. May decrease test run time substantially. Defaults to 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b>, <b>--keepbytecode</b></dt>
  <dd class="It-tag">Normally, the test runner scans the test paths and the test
      directories looking for and deleting pyc or pyo files without
      corresponding py files. This is to prevent spurious test failures due to
      finding compiled modules where source modules have been deleted. This scan
      can be time consuming. Using this option disables this scan. If you know
      you haven't removed any modules since last running the tests, can make the
      test run go much faster.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--usecompiled</b></dt>
  <dd class="It-tag">Normally, a package must contain an __init__.py file, and
      only .py files can contain test code. When this option is specified,
      compiled Python files (.pyc and .pyo) can be used instead: a directory
      containing __init__.pyc or __init__.pyo is also considered to be a
      package, and if file XYZ.py contains tests but is absent while XYZ.pyc or
      XYZ.pyo exists then the compiled files will be used. This is necessary
      when running tests against a tree where the .py files have been removed
      after compilation to .pyc/.pyo. Use of this option implies
      <b>--keepbytecode</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--exit-with-status</b></dt>
  <dd class="It-tag">DEPRECATED: The test runner will always exit with a
    status.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2017</td>
    <td class="foot-os">zope.testrunner version 4.7.0</td>
  </tr>
</table>
</body>
</html>
