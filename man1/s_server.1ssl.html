<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:00 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>S_SERVER(1) OpenSSL S_SERVER(1)</p>

<p style="margin-top: 1em">NAME <br>
s_server - SSL/TLS server program</p>

<p style="margin-top: 1em">SYNOPSIS <br>
openssl s_server [-accept port] [-context id] [-verify
depth] [-Verify depth] [-crl_check] [-crl_check_all] [-cert
filename] [-certform DER|PEM] [-key keyfile] [-keyform
DER|PEM] <br>
[-pass arg] [-dcert filename] [-dcertform DER|PEM] [-dkey
keyfile] [-dkeyform DER|PEM] [-dpass arg] [-dhparam
filename] [-nbio] [-nbio_test] [-crlf] [-debug] [-msg]
[-state] <br>
[-CApath directory] [-CAfile filename] [-trusted_first]
[-krb5svc service] [-keytab filename] [-nocert] [-cipher
cipherlist] [-quiet] [-no_tmp_rsa] [-ssl2] [-ssl3] [-tls1]
<br>
[-tls1_1] [-tls1_2] [-dtls1] [-no_ssl2] [-no_ssl3]
[-no_tls1] [-no_tls1_1] [-no_tls1_2] [-no_dhe] [-no_ecdhe]
[-bugs] [-hack] [-www] [-WWW] [-HTTP] [-engine id]
[-tlsextdebug] <br>
[-no_ticket] [-id_prefix arg] [-rand file(s)] [-nextprotoneg
protocols]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The s_server command implements a generic SSL/TLS server
which listens for connections on a given port using
SSL/TLS.</p>

<p style="margin-top: 1em">OPTIONS <br>
-accept port <br>
the TCP port to listen on for connections. If not specified
4433 is used.</p>

<p style="margin-top: 1em">-context id <br>
sets the SSL context id. It can be given any string value.
If this option is not present a default value will be
used.</p>

<p style="margin-top: 1em">-cert certname <br>
The certificate to use, most servers cipher suites require
the use of a certificate and some require a certificate with
a certain public key type: for example the DSS cipher <br>
suites require a certificate containing a DSS (DSA) key. If
not specified then the filename &quot;server.pem&quot; will
be used.</p>

<p style="margin-top: 1em">-certform format <br>
The certificate format to use: DER or PEM. PEM is the
default.</p>

<p style="margin-top: 1em">-key keyfile <br>
The private key to use. If not specified then the
certificate file will be used.</p>

<p style="margin-top: 1em">-keyform format <br>
The private format to use: DER or PEM. PEM is the
default.</p>

<p style="margin-top: 1em">-pass arg <br>
the private key password source. For more information about
the format of arg see the PASS PHRASE ARGUMENTS section in
openssl(1).</p>

<p style="margin-top: 1em">-dcert filename, -dkey keyname
<br>
specify an additional certificate and private key, these
behave in the same manner as the -cert and -key options
except there is no default if they are not specified (no
<br>
additional certificate and key is used). As noted above some
cipher suites require a certificate containing a key of a
certain type. Some cipher suites need a certificate <br>
carrying an RSA key and some a DSS (DSA) key. By using RSA
and DSS certificates and keys a server can support clients
which only support RSA or DSS cipher suites by using an <br>
appropriate certificate.</p>

<p style="margin-top: 1em">-dcertform format, -dkeyform
format, -dpass arg <br>
addtional certificate and private key format and passphrase
respectively.</p>

<p style="margin-top: 1em">-nocert <br>
if this option is set then no certificate is used. This
restricts the cipher suites available to the anonymous ones
(currently just anonymous DH).</p>

<p style="margin-top: 1em">-dhparam filename <br>
the DH parameter file to use. The ephemeral DH cipher suites
generate keys using a set of DH parameters. If not specified
then an attempt is made to load the parameters from <br>
the server certificate file. If this fails then a static set
of parameters hard coded into the s_server program will be
used.</p>

<p style="margin-top: 1em">-no_dhe <br>
if this option is set then no DH parameters will be loaded
effectively disabling the ephemeral DH cipher suites.</p>

<p style="margin-top: 1em">-no_ecdhe <br>
if this option is set then ephemeral ECDH cipher suites will
be disabled.</p>

<p style="margin-top: 1em">-no_tmp_rsa <br>
certain export cipher suites sometimes use a temporary RSA
key, this option disables temporary RSA key generation.</p>

<p style="margin-top: 1em">-verify depth, -Verify depth
<br>
The verify depth to use. This specifies the maximum length
of the client certificate chain and makes the server request
a certificate from the client. With the -verify option <br>
a certificate is requested but the client does not have to
send one, with the -Verify option the client must supply a
certificate or an error occurs.</p>

<p style="margin-top: 1em">-crl_check, -crl_check_all <br>
Check the peer certificate has not been revoked by its CA.
The CRL(s) are appended to the certificate file. With the
-crl_check_all option all CRLs of all CAs in the chain <br>
are checked.</p>

<p style="margin-top: 1em">-CApath directory <br>
The directory to use for client certificate verification.
This directory must be in &quot;hash format&quot;, see
verify for more information. These are also used when
building the <br>
server certificate chain.</p>

<p style="margin-top: 1em">-CAfile file <br>
A file containing trusted certificates to use during client
authentication and to use when attempting to build the
server certificate chain. The list is also used in the list
<br>
of acceptable client CAs passed to the client when a
certificate is requested.</p>

<p style="margin-top: 1em">-trusted_first <br>
Use certificates in CA file or CA directory before other
certificates when building the trust chain to verify client
certificates. This is mainly useful in environments with
<br>
Bridge CA or Cross-Certified CAs.</p>

<p style="margin-top: 1em">-krb5svc service <br>
the Kerberos service name to use (default &quot;host&quot;).
This means s_server will expect a ticket for the principal
service/hostname@REALM, and will need keys for that
principal in <br>
its keytab.</p>

<p style="margin-top: 1em">-keytab filename <br>
the Kerberos &quot;keytab&quot; (key table) file, containing
keys for the s_server service principal (Kerberos identity;
see -krb5svc).</p>

<p style="margin-top: 1em">-state <br>
prints out the SSL session states.</p>

<p style="margin-top: 1em">-debug <br>
print extensive debugging information including a hex dump
of all traffic.</p>

<p style="margin-top: 1em">-msg <br>
show all protocol messages with hex dump.</p>

<p style="margin-top: 1em">-nbio_test <br>
tests non blocking I/O</p>

<p style="margin-top: 1em">-nbio <br>
turns on non blocking I/O</p>

<p style="margin-top: 1em">-crlf <br>
this option translated a line feed from the terminal into
CR+LF.</p>

<p style="margin-top: 1em">-quiet <br>
inhibit printing of session and certificate information.</p>

<p style="margin-top: 1em">-psk_hint hint <br>
Use the PSK identity hint hint when using a PSK cipher
suite.</p>

<p style="margin-top: 1em">-psk key <br>
Use the PSK key key when using a PSK cipher suite. The key
is given as a hexadecimal number without leading 0x, for
example -psk 1a2b3c4d.</p>

<p style="margin-top: 1em">-ssl2, -ssl3, -tls1, -tls1_1,
-tls1_2, -dtls1, -no_ssl2, -no_ssl3, -no_tls1, -no_tls1_1,
-no_tls1_2 <br>
these options disable the use of certain SSL or TLS
protocols. By default the initial handshake uses a method
which should be compatible with all servers and permit them
to <br>
use SSL v3, SSL v2 or TLS as appropriate.</p>

<p style="margin-top: 1em">-bugs <br>
there are several known bug in SSL and TLS implementations.
Adding this option enables various workarounds.</p>

<p style="margin-top: 1em">-hack <br>
this option enables a further workaround for some some early
Netscape SSL code (?).</p>

<p style="margin-top: 1em">-cipher cipherlist <br>
this allows the cipher list used by the server to be
modified. When the client sends a list of supported ciphers
the first client cipher also included in the server list is
<br>
used. Because the client specifies the preference order, the
order of the server cipherlist irrelevant. See the ciphers
command for more information.</p>

<p style="margin-top: 1em">-tlsextdebug <br>
print out a hex dump of any TLS extensions received from the
server.</p>

<p style="margin-top: 1em">-no_ticket <br>
disable RFC4507bis session ticket support.</p>

<p style="margin-top: 1em">-www <br>
sends a status message back to the client when it connects.
This includes lots of information about the ciphers used and
various session parameters. The output is in HTML <br>
format so this option will normally be used with a web
browser.</p>

<p style="margin-top: 1em">-WWW <br>
emulates a simple web server. Pages will be resolved
relative to the current directory, for example if the URL
https://myhost/page.html is requested the file ./page.html
will <br>
be loaded.</p>

<p style="margin-top: 1em">-HTTP <br>
emulates a simple web server. Pages will be resolved
relative to the current directory, for example if the URL
https://myhost/page.html is requested the file ./page.html
will <br>
be loaded. The files loaded are assumed to contain a
complete and correct HTTP response (lines that are part of
the HTTP response line and headers must end with CRLF).</p>

<p style="margin-top: 1em">-engine id <br>
specifying an engine (by its unique id string) will cause
s_server to attempt to obtain a functional reference to the
specified engine, thus initialising it if needed. The <br>
engine will then be set as the default for all available
algorithms.</p>

<p style="margin-top: 1em">-id_prefix arg <br>
generate SSL/TLS session IDs prefixed by arg. This is mostly
useful for testing any SSL/TLS code (eg. proxies) that wish
to deal with multiple servers, when each of which <br>
might be generating a unique range of session IDs (eg. with
a certain prefix).</p>

<p style="margin-top: 1em">-rand file(s) <br>
a file or files containing random data used to seed the
random number generator, or an EGD socket (see RAND_egd(3)).
Multiple files can be specified separated by a OS- <br>
dependent character. The separator is ; for MS-Windows, ,
for OpenVMS, and : for all others.</p>

<p style="margin-top: 1em">-nextprotoneg protocols <br>
enable Next Protocol Negotiation TLS extension and provide a
comma-separated list of supported protocol names. The list
should contain most wanted protocols first. Protocol <br>
names are printable ASCII strings, for example
&quot;http/1.1&quot; or &quot;spdy/3&quot;.</p>

<p style="margin-top: 1em">CONNECTED COMMANDS <br>
If a connection request is established with an SSL client
and neither the -www nor the -WWW option has been used then
normally any data received from the client is displayed and
<br>
any key presses will be sent to the client.</p>

<p style="margin-top: 1em">Certain single letter commands
are also recognized which perform special operations: these
are listed below.</p>

<p style="margin-top: 1em">q end the current SSL connection
but still accept new connections.</p>

<p style="margin-top: 1em">Q end the current SSL connection
and exit.</p>

<p style="margin-top: 1em">r renegotiate the SSL
session.</p>

<p style="margin-top: 1em">R renegotiate the SSL session
and request a client certificate.</p>

<p style="margin-top: 1em">P send some plain text down the
underlying TCP connection: this should cause the client to
disconnect due to a protocol violation.</p>

<p style="margin-top: 1em">S print out some session cache
status information.</p>

<p style="margin-top: 1em">NOTES <br>
s_server can be used to debug SSL clients. To accept
connections from a web browser the command:</p>

<p style="margin-top: 1em">openssl s_server -accept 443
-www</p>

<p style="margin-top: 1em">can be used for example.</p>

<p style="margin-top: 1em">Most web browsers (in particular
Netscape and MSIE) only support RSA cipher suites, so they
cannot connect to servers which don&rsquo;t use a
certificate carrying an RSA key or a <br>
version of OpenSSL with RSA disabled.</p>

<p style="margin-top: 1em">Although specifying an empty
list of CAs when requesting a client certificate is strictly
speaking a protocol violation, some SSL clients interpret
this to mean any CA is <br>
acceptable. This is useful for debugging purposes.</p>

<p style="margin-top: 1em">The session parameters can
printed out using the sess_id program.</p>

<p style="margin-top: 1em">BUGS <br>
Because this program has a lot of options and also because
some of the techniques used are rather old, the C source of
s_server is rather hard to read and not a model of how <br>
things should be done. A typical SSL server program would be
much simpler.</p>

<p style="margin-top: 1em">The output of common ciphers is
wrong: it just gives the list of ciphers that OpenSSL
recognizes and the client supports.</p>

<p style="margin-top: 1em">There should be a way for the
s_server program to print out details of any unknown cipher
suites a client says it supports.</p>

<p style="margin-top: 1em">SEE ALSO <br>
sess_id(1), s_client(1), ciphers(1)</p>

<p style="margin-top: 1em">1.0.1e 2017-02-20
S_SERVER(1)</p>
<hr>
</body>
</html>
