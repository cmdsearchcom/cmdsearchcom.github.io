<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>S_SERVER(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">S_SERVER(1)</td>
    <td class="head-vol">OpenSSL</td>
    <td class="head-rtitle">S_SERVER(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
s_server - SSL/TLS server program
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>openssl</b> <b>s_server</b> [ <b>-accept port</b>] [ <b>-context id</b>] [
  <b>-verify depth</b>] [ <b>-Verify depth</b>] [ <b>-crl_check</b>] [
  <b>-crl_check_all</b>] [ <b>-cert filename</b>] [ <b>-certform DER|PEM</b>] [
  <b>-key keyfile</b>] [ <b>-keyform DER|PEM</b>] [ <b>-pass arg</b>] [
  <b>-dcert filename</b>] [ <b>-dcertform DER|PEM</b>] [ <b>-dkey keyfile</b>] [
  <b>-dkeyform DER|PEM</b>] [ <b>-dpass arg</b>] [ <b>-dhparam filename</b>] [
  <b>-nbio</b>] [ <b>-nbio_test</b>] [ <b>-crlf</b>] [ <b>-debug</b>] [
  <b>-msg</b>] [ <b>-state</b>] [ <b>-CApath directory</b>] [ <b>-CAfile
  filename</b>] [ <b>-trusted_first</b>] [ <b>-krb5svc service</b>] [ <b>-keytab
  filename</b>] [ <b>-nocert</b>] [ <b>-cipher cipherlist</b>] [ <b>-quiet</b>]
  [ <b>-no_tmp_rsa</b>] [ <b>-ssl2</b>] [ <b>-ssl3</b>] [ <b>-tls1</b>] [
  <b>-tls1_1</b>] [ <b>-tls1_2</b>] [ <b>-dtls1</b>] [ <b>-no_ssl2</b>] [
  <b>-no_ssl3</b>] [ <b>-no_tls1</b>] [ <b>-no_tls1_1</b>] [ <b>-no_tls1_2</b>]
  [ <b>-no_dhe</b>] [ <b>-no_ecdhe</b>] [ <b>-bugs</b>] [ <b>-hack</b>] [
  <b>-www</b>] [ <b>-WWW</b>] [ <b>-HTTP</b>] [ <b>-engine id</b>] [
  <b>-tlsextdebug</b>] [ <b>-no_ticket</b>] [ <b>-id_prefix arg</b>] [ <b>-rand
  file(s)</b>] [ <b>-nextprotoneg protocols</b>]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>s_server</b> command implements a generic SSL/TLS server which listens
  for connections on a given port using SSL/TLS.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-accept port</b></dt>
  <dd class="It-tag">the TCP port to listen on for connections. If not specified
      4433 is used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-context id</b></dt>
  <dd class="It-tag">sets the SSL context id. It can be given any string value.
      If this option is not present a default value will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-cert certname</b></dt>
  <dd class="It-tag">The certificate to use, most servers cipher suites require
      the use of a certificate and some require a certificate with a certain
      public key type: for example the DSS cipher suites require a certificate
      containing a DSS (DSA) key. If not specified then the filename
      &quot;server.pem&quot; will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-certform format</b></dt>
  <dd class="It-tag">The certificate format to use: DER or PEM. PEM is the
      default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-key keyfile</b></dt>
  <dd class="It-tag">The private key to use. If not specified then the
      certificate file will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keyform format</b></dt>
  <dd class="It-tag">The private format to use: DER or PEM. PEM is the
    default.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-pass arg</b></dt>
  <dd class="It-tag">the private key password source. For more information about
      the format of <b>arg</b> see the <b>PASS PHRASE ARGUMENTS</b> section in
      <i>openssl</i>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dcert filename</b>, <b>-dkey keyname</b></dt>
  <dd class="It-tag">specify an additional certificate and private key, these
      behave in the same manner as the <b>-cert</b> and <b>-key</b> options
      except there is no default if they are not specified (no additional
      certificate and key is used). As noted above some cipher suites require a
      certificate containing a key of a certain type. Some cipher suites need a
      certificate carrying an RSA key and some a DSS (DSA) key. By using RSA and
      DSS certificates and keys a server can support clients which only support
      RSA or DSS cipher suites by using an appropriate certificate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dcertform format</b>, <b>-dkeyform format</b>,
    <b>-dpass arg</b></dt>
  <dd class="It-tag">addtional certificate and private key format and passphrase
      respectively.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nocert</b></dt>
  <dd class="It-tag">if this option is set then no certificate is used. This
      restricts the cipher suites available to the anonymous ones (currently
      just anonymous DH).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dhparam filename</b></dt>
  <dd class="It-tag">the DH parameter file to use. The ephemeral DH cipher
      suites generate keys using a set of DH parameters. If not specified then
      an attempt is made to load the parameters from the server certificate
      file. If this fails then a static set of parameters hard coded into the
      s_server program will be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no_dhe</b></dt>
  <dd class="It-tag">if this option is set then no DH parameters will be loaded
      effectively disabling the ephemeral DH cipher suites.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no_ecdhe</b></dt>
  <dd class="It-tag">if this option is set then ephemeral ECDH cipher suites
      will be disabled.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no_tmp_rsa</b></dt>
  <dd class="It-tag">certain export cipher suites sometimes use a temporary RSA
      key, this option disables temporary RSA key generation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-verify depth</b>, <b>-Verify depth</b></dt>
  <dd class="It-tag">The verify depth to use. This specifies the maximum length
      of the client certificate chain and makes the server request a certificate
      from the client. With the <b>-verify</b> option a certificate is requested
      but the client does not have to send one, with the <b>-Verify</b> option
      the client must supply a certificate or an error occurs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-crl_check</b>, <b>-crl_check_all</b></dt>
  <dd class="It-tag">Check the peer certificate has not been revoked by its CA.
      The CRL(s) are appended to the certificate file. With the
      <b>-crl_check_all</b> option all CRLs of all CAs in the chain are
    checked.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-CApath directory</b></dt>
  <dd class="It-tag">The directory to use for client certificate verification.
      This directory must be in &quot;hash format&quot;, see <b>verify</b> for
      more information. These are also used when building the server certificate
      chain.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-CAfile file</b></dt>
  <dd class="It-tag">A file containing trusted certificates to use during client
      authentication and to use when attempting to build the server certificate
      chain. The list is also used in the list of acceptable client CAs passed
      to the client when a certificate is requested.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-trusted_first</b></dt>
  <dd class="It-tag">Use certificates in CA file or CA directory before other
      certificates when building the trust chain to verify client certificates.
      This is mainly useful in environments with Bridge CA or Cross-Certified
      CAs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-krb5svc service</b></dt>
  <dd class="It-tag">the Kerberos service name to use (default
      &quot;host&quot;). This means s_server will expect a ticket for the
      principal <i>service</i>/hostname@REALM, and will need keys for that
      principal in its keytab.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-keytab filename</b></dt>
  <dd class="It-tag">the Kerberos &quot;keytab&quot; (key table) file,
      containing keys for the s_server service principal (Kerberos identity; see
      -krb5svc).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-state</b></dt>
  <dd class="It-tag">prints out the SSL session states.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-debug</b></dt>
  <dd class="It-tag">print extensive debugging information including a hex dump
      of all traffic.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-msg</b></dt>
  <dd class="It-tag">show all protocol messages with hex dump.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nbio_test</b></dt>
  <dd class="It-tag">tests non blocking I/O</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nbio</b></dt>
  <dd class="It-tag">turns on non blocking I/O</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-crlf</b></dt>
  <dd class="It-tag">this option translated a line feed from the terminal into
      CR+LF.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-quiet</b></dt>
  <dd class="It-tag">inhibit printing of session and certificate
    information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-psk_hint hint</b></dt>
  <dd class="It-tag">Use the PSK identity hint <b>hint</b> when using a PSK
      cipher suite.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-psk key</b></dt>
  <dd class="It-tag">Use the PSK key <b>key</b> when using a PSK cipher suite.
      The key is given as a hexadecimal number without leading 0x, for example
      -psk 1a2b3c4d.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ssl2</b>, <b>-ssl3</b>, <b>-tls1</b>, <b>-tls1_1</b>,
    <b>-tls1_2</b>, <b>-dtls1</b>, <b>-no_ssl2</b>, <b>-no_ssl3</b>,
    <b>-no_tls1</b>, <b>-no_tls1_1</b>, <b>-no_tls1_2</b></dt>
  <dd class="It-tag">these options disable the use of certain SSL or TLS
      protocols. By default the initial handshake uses a method which should be
      compatible with all servers and permit them to use SSL v3, SSL v2 or TLS
      as appropriate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-bugs</b></dt>
  <dd class="It-tag">there are several known bug in SSL and TLS implementations.
      Adding this option enables various workarounds.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-hack</b></dt>
  <dd class="It-tag">this option enables a further workaround for some some
      early Netscape SSL code (?).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-cipher cipherlist</b></dt>
  <dd class="It-tag">this allows the cipher list used by the server to be
      modified. When the client sends a list of supported ciphers the first
      client cipher also included in the server list is used. Because the client
      specifies the preference order, the order of the server cipherlist
      irrelevant. See the <b>ciphers</b> command for more information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-tlsextdebug</b></dt>
  <dd class="It-tag">print out a hex dump of any TLS extensions received from
      the server.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no_ticket</b></dt>
  <dd class="It-tag">disable RFC4507bis session ticket support.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-www</b></dt>
  <dd class="It-tag">sends a status message back to the client when it connects.
      This includes lots of information about the ciphers used and various
      session parameters. The output is in HTML format so this option will
      normally be used with a web browser.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-WWW</b></dt>
  <dd class="It-tag">emulates a simple web server. Pages will be resolved
      relative to the current directory, for example if the URL
      https://myhost/page.html is requested the file ./page.html will be
    loaded.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-HTTP</b></dt>
  <dd class="It-tag">emulates a simple web server. Pages will be resolved
      relative to the current directory, for example if the URL
      https://myhost/page.html is requested the file ./page.html will be loaded.
      The files loaded are assumed to contain a complete and correct HTTP
      response (lines that are part of the HTTP response line and headers must
      end with CRLF).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-engine id</b></dt>
  <dd class="It-tag">specifying an engine (by its unique <b>id</b> string) will
      cause <b>s_server</b> to attempt to obtain a functional reference to the
      specified engine, thus initialising it if needed. The engine will then be
      set as the default for all available algorithms.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-id_prefix arg</b></dt>
  <dd class="It-tag">generate SSL/TLS session IDs prefixed by <b>arg</b>. This
      is mostly useful for testing any SSL/TLS code (eg. proxies) that wish to
      deal with multiple servers, when each of which might be generating a
      unique range of session IDs (eg. with a certain prefix).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-rand file(s)</b></dt>
  <dd class="It-tag">a file or files containing random data used to seed the
      random number generator, or an EGD socket (see <i>RAND_egd</i>(3)).
      Multiple files can be specified separated by a OS-dependent character. The
      separator is <b>;</b> for MS-Windows, <b>,</b> for OpenVMS, and <b>:</b>
      for all others.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nextprotoneg protocols</b></dt>
  <dd class="It-tag">enable Next Protocol Negotiation TLS extension and provide
      a comma-separated list of supported protocol names. The list should
      contain most wanted protocols first. Protocol names are printable ASCII
      strings, for example &quot;http/1.1&quot; or &quot;spdy/3&quot;.</dd>
</dl>
<h1 class="Sh" title="Sh" id="CONNECTED_COMMANDS"><a class="selflink" href="#CONNECTED_COMMANDS">CONNECTED
  COMMANDS</a></h1>
If a connection request is established with an SSL client and neither the
  <b>-www</b> nor the <b>-WWW</b> option has been used then normally any data
  received from the client is displayed and any key presses will be sent to the
  client.
<div class="Pp"></div>
Certain single letter commands are also recognized which perform special
  operations: these are listed below.
<dl class="Bl-tag">
  <dt class="It-tag"><b>q</b></dt>
  <dd class="It-tag">end the current SSL connection but still accept new
      connections.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Q</b></dt>
  <dd class="It-tag">end the current SSL connection and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>r</b></dt>
  <dd class="It-tag">renegotiate the SSL session.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>R</b></dt>
  <dd class="It-tag">renegotiate the SSL session and request a client
      certificate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>P</b></dt>
  <dd class="It-tag">send some plain text down the underlying TCP connection:
      this should cause the client to disconnect due to a protocol
    violation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>S</b></dt>
  <dd class="It-tag">print out some session cache status information.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<b>s_server</b> can be used to debug SSL clients. To accept connections from a
  web browser the command:
<div class="Pp"></div>
<pre>
 openssl s_server -accept 443 -www
</pre>
<div class="Pp"></div>
can be used for example.
<div class="Pp"></div>
Most web browsers (in particular Netscape and MSIE) only support RSA cipher
  suites, so they cannot connect to servers which don't use a certificate
  carrying an RSA key or a version of OpenSSL with RSA disabled.
<div class="Pp"></div>
Although specifying an empty list of CAs when requesting a client certificate is
  strictly speaking a protocol violation, some SSL clients interpret this to
  mean any CA is acceptable. This is useful for debugging purposes.
<div class="Pp"></div>
The session parameters can printed out using the <b>sess_id</b> program.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Because this program has a lot of options and also because some of the
  techniques used are rather old, the C source of s_server is rather hard to
  read and not a model of how things should be done. A typical SSL server
  program would be much simpler.
<div class="Pp"></div>
The output of common ciphers is wrong: it just gives the list of ciphers that
  OpenSSL recognizes and the client supports.
<div class="Pp"></div>
There should be a way for the <b>s_server</b> program to print out details of
  any unknown cipher suites a client says it supports.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>sess_id</i>(1), <i>s_client</i>(1), <i>ciphers</i>(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-02-20</td>
    <td class="foot-os">1.0.1e</td>
  </tr>
</table>
</body>
</html>
