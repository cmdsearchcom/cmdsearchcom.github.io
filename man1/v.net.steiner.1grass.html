<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>v.net.steiner(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">v.net.steiner(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">v.net.steiner(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>v.net.steiner</b> - Creates Steiner tree for the network and given
  terminals.
<div>&#x00A0;</div>
Note that &#x2019;Minimum Steiner Tree&#x2019; problem is NP-hard and heuristic
  algorithm is used in this module so the result may be sub optimal.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
vector, network, steiner tree
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>v.net.steiner</b>
<div>&#x00A0;</div>
<b>v.net.steiner --help</b>
<div>&#x00A0;</div>
<b>v.net.steiner</b> [-<b>g</b>] <b>input</b>=<i>name</i>
  <b>output</b>=<i>name</i> [ <b>arc_type</b>=<i>string</i>[,<i>string</i>,...]]
  [ <b>arc_layer</b>=<i>string</i>] [<b>node_layer</b>=<i>string</i>]
  [<b>acolumn</b>= <i>string</i>] <b>terminal_cats</b>=<i>range</i>
  [<b>npoints</b>= <i>integer</i>] [--<b>overwrite</b>] [--<b>help</b>]
  [--<b>verbose</b>] [-- <b>quiet</b>] [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use geodesic calculation for longitude-latitude locations</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>input</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input vector map
    <div>&#x00A0;</div>
    Or data source for direct OGR access</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output vector map</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_type</b>=<i>string[,</i><i>string</i>,...]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc type
    <div>&#x00A0;</div>
    Input feature type
    <div>&#x00A0;</div>
    Options: <i>line, boundary</i>
    <div>&#x00A0;</div>
    Default: <i>line,boundary</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>arc_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arc layer
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>1</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>node_layer</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Node layer (used for terminals)
    <div>&#x00A0;</div>
    Vector features can have category values in different layers. This number
      determines which layer to use. When used with direct OGR access this is
      the layer name.
    <div>&#x00A0;</div>
    Default: <i>2</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>acolumn</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Arcs&#x2019; cost column (for both directions)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>terminal_cats</b>=<i>range</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Category values
    <div>&#x00A0;</div>
    Categories of points on terminals (layer is specified by nlayer)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>npoints</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Number of Steiner points (-1 for all possible)
    <div>&#x00A0;</div>
    Default: <i>-1</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<i>v.net.steiner</i> calculates the optimal connection of nodes on a vector
  network.
<div class="Pp"></div>
A Steiner tree is used to calculate the minimum-cost vector network connecting
  some number of end nodes in a network framework. For example it could be used
  to find the path following a road system which will minimize the amount of
  fibre optic cable needed to connect a series of satellite offices.
<div class="Pp"></div>
Costs may be either line lengths, or attributes saved in a database table. These
  attribute values are taken as costs of whole segments, not as costs to
  traverse a length unit (e.g. meter) of the segment. For example, if the speed
  limit is 100 km / h, the cost to traverse a 10 km long road segment must be
  calculated as length / speed = 10 km / (100 km/h) = 0.1 h. Supported are cost
  assignments for both arcs and nodes. For areas, costs will be calculated along
  boundary lines.
<div class="Pp"></div>
Points representing nodes must be exactly on network nodes, and the input vector
  map needs to be prepared with <i>v.net operation=connect</i>.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
Current implementation of obtaining Steiner tree is not memory efficient. An
  attempt to run module on a network with large number of intersections thus
  might result in failure to allocate memory or out of memory condition.
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Steiner tree for 6 digitized nodes (Spearfish):
<div class="Pp"></div>
Shortest path, along unimproved roads:
<div class="Pp"></div>
Fastest path, along highways:
<div class="Pp"></div>
<pre>
# Spearfish
g.copy vect=roads,myroads
# we have 6 locations to allocate
echo &quot;1|601653.5|4922869.2|a
2|608284|4923776.6|b
3|601845|4914981.9|c
4|596270|4917456.3|d
5|593330.8|4924096.6|e
6|598005.5|4921439.2|f&quot; | v.in.ascii in=- cat=1 x=2 y=3 out=centers col=&quot;cat integer, \
                         east double precision, north double precision, label varchar(43)&quot;
v.db.select centers
v.category centers op=report
# type       count        min        max
# point          6          1          6
# create lines map connecting points to network (on layer 2)
v.net myroads points=centers out=myroads_net op=connect thresh=500
# set up costs as traveling time
# create unique categories for each road in layer 3
v.category in=myroads_net out=myroads_net_time opt=add cat=1 layer=3 type=line
# add new table for layer 3
v.db.addtable myroads_net_time layer=3 col=&quot;cat integer,label varchar(43),length double precision,speed double precision,cost double precision&quot;
# copy road type to layer 3
v.to.db myroads_net_time layer=3 qlayer=1 opt=query qcolumn=label columns=label
# upload road length in miles
v.to.db myroads_net_time layer=3 type=line option=length col=length unit=miles
# set speed limits in miles / hour
v.db.update myroads_net_time layer=3 col=speed val=&quot;5.0&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;75.0&quot; where=&quot;label=&#x2019;interstate&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;75.0&quot; where=&quot;label=&#x2019;primary highway, hard surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;50.0&quot; where=&quot;label=&#x2019;secondary highway, hard surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;25.0&quot; where=&quot;label=&#x2019;light-duty road, improved surface&#x2019;&quot;
v.db.update myroads_net_time layer=3 col=speed val=&quot;5.0&quot; where=&quot;label=&#x2019;unimproved road&#x2019;&quot;
# define traveling costs as traveling time in minutes:
v.db.update myroads_net_time layer=3 col=cost val=&quot;length / speed * 60&quot;
# shortest path
v.net.steiner myroads_net_time arc_layer=3 node_layer=2 terminal_cats=1-6 out=mysteiner_distance
# fastest path
v.net.steiner myroads_net_time arc_layer=3 node_layer=2 acol=cost terminal_cats=1-6 out=mysteiner_time
</pre>
To display the result, run for example:
<div>&#x00A0;</div>
<pre>
# display the results
g.region vector=myroads_net
# shortest path
d.mon x0
d.vect myroads_net
d.vect -c centers icon=basic/triangle
d.font Vera
d.vect centers col=red disp=attr attrcol=label lsize=12
d.vect mysteiner_distance col=blue width=2
# fastest path
d.mon x1
d.vect myroads_net
d.vect -c centers icon=basic/triangle
d.font Vera
d.vect centers col=red disp=attr attrcol=label lsize=12
d.vect mysteiner_time col=blue width=2
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i>d.path</i>, <i>v.net</i>, <i>v.net.alloc</i>, <i>v.net.iso</i>,
  <i>v.net.path</i>, <i>v.net.salesman</i>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Radim Blazek, ITC-Irst, Trento, Italy
<div>&#x00A0;</div>
Documentation: Markus Neteler, Markus Metz
<div class="Pp"></div>
<i>Last changed: $Date: 2016-03-08 08:50:26 +0100 (Tue, 08 Mar 2016) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: v.net.steiner source code (history)
<div class="Pp"></div>
Main index | Vector index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
