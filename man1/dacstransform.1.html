<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>DACSTRANSFORM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DACSTRANSFORM(1)</td>
    <td class="head-vol">DACS Commands Manual</td>
    <td class="head-rtitle">DACSTRANSFORM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dacstransform - rule-based document transformation
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 14.00ex; text-indent: -14.00ex;"><b>dacstransform</b>
  [ <i></i><b>dacsoptions</b>[1]] [<b>-admin</b>]
  [<b>-ct&#x00A0;</b><b></b><i>str</i>] [ <b>-docs&#x00A0;</b><b></b><i>dir</i>]
  [ <b>-f</b>] [<b>-F&#x00A0;</b><b></b><i>field_sep</i>]
  [<b>-fd&#x00A0;</b><b></b> <i>domain</i>]
  [<b>-fh&#x00A0;</b><b></b><i>hostname</i>] [
  <b>-fj&#x00A0;</b><b></b><i>jurname</i>]
<div>&#x00A0;</div>
[ <b>-fn&#x00A0;</b><b></b><i>fedname</i>] [<b>-h</b> | <b>-help</b>]
  [<b>-i&#x00A0;</b> <b></b><i>ident</i>]
  [<b>-il&#x00A0;</b><b></b><i>ident</i>] [
  <b>-ilg&#x00A0;</b><b></b><i>ident</i>] [ <b>-ieuid</b>]
<div>&#x00A0;</div>
[ <b>-ieuidg</b>] [<b>-iuid</b>] [<b>-insert</b>] [<b>-iuidg</b>] [<b>-lg</b>]
  [<b>-name&#x00A0;</b><b></b><i>str</i>]
  [<b>-prefix&#x00A0;</b><b></b><i>str</i>] [
  <b>-roles&#x00A0;</b><b></b><i>roles_vfs</i>] [
  <b>-rprefix&#x00A0;</b><b></b><i>regex</i>]
  [<b>-rsuffix&#x00A0;</b><b></b><i>regex</i>] [
  <b>-suffix&#x00A0;</b><b></b><i>str</i>]
  [{<b>-r</b>&#x00A0;|&#x00A0;<b>-rules</b>}&#x00A0; <i>rules_uri</i>]
<div>&#x00A0;</div>
[ <b>-var&#x00A0;</b><b></b><i>name=value</i>] [<b>-x</b>] [<b>--</b>] {<b>-</b>
  | <i>file</i>}</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This program is part of the <b>DACS</b> suite.
<div class="Pp"></div>
<b>dacstransform</b> supplies the functionality of <b>dacs_transform</b> from
  the command-line. Because the two programs are almost identical, please refer
  to <b>dacs_transform(8)</b>[2] for details.
<div class="Pp"></div>
If the program is executed through the system's &quot;#!&quot; mechanism (
  <b>execve(2)</b>[3]), one or more command line arguments can be given:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
#!/usr/local/dacs/bin/dacstransform -Dfoo=val -ct ''
Hello, world
<div class="Pp"></div>
Bye
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Such programs always use the script file as input, therefore no expression or
  other file can be specified on the &quot;#!&quot; line.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
The program has some limitations, including missing configuration capabilities
  and features, that might be expected in a production version but which have
  not yet been implemented.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The arguments are processed as they are examined (left-to-right) and their
  ordering can be significant. Command line arguments override <b>DACS</b>
  configuration (see below).
<div class="Pp"></div>
Please refer to <b>dacscheck(1)</b>[4] for a description of the flags related to
  setting identities and <b>DACS</b> context. If no identity is specified, the
  program will use the values of the environment variables <b>REMOTE_USER</b>
  and <b>DACS_ROLES</b> if they are available and valid.
<div class="Pp"></div>
The following command line flags are recognized:
<div class="Pp"></div>
<b>-ct </b><b></b><i>str</i>
<div style="margin-left: 4.00ex;">Set the MIME Content-Type to <i>str</i>. The
  default is not to emit this header.</div>
<div class="Pp"></div>
<b>-docs </b><b></b><i>dir</i>
<div style="margin-left: 4.00ex;">Set the directory containing the documents to
  <i>dir</i> - the <i>file</i> argument will be relative to <i>dir</i>. If
  <i>dir</i> is the empty string, however, this mapping will not be performed.
  The mapping is also disabled if the <b>-f</b> is given or if the standard
  input is read. This argument overrides any configuration of transform_docs or
  default behaviour.</div>
<div class="Pp"></div>
<b>-f</b>
<div style="margin-left: 4.00ex;">Disable input file location mapping.</div>
<div class="Pp"></div>
<b>-h</b>
<div>&#x00A0;</div>
<b>-help</b>
<div style="margin-left: 4.00ex;">Prints the usage blurb, which includes a
  listing of the program's defaults.</div>
<div class="Pp"></div>
<b>-insert </b><b></b><i>dir</i>
<div style="margin-left: 4.00ex;">If a relative path is given for the value of a
  filename attribute with the insert, insertv, or expand directive, prefix the
  relative path with the string <i>dir</i>.</div>
<div class="Pp"></div>
<b>-name </b><b></b><i>str</i>
<div style="margin-left: 4.00ex;">The name of the input document is <i>str</i>.
  This is used to associate a rule with the document; that is, it is matched
  against a rule's service or delegate element. By default, it is the name of
  the input file or the path component of the input URI. If the effective name
  does not begin with a slash character, one is prepended. The argument should
  probably be given if the standard input is being read.</div>
<div class="Pp"></div>
<b>-prefix </b><b></b><i>str</i>
<div style="margin-left: 4.00ex;">A directive is introduced by <i>str</i>
  appearing at the beginning of an input line. The default is
  &quot;&lt;--DACS&quot;.</div>
<div class="Pp"></div>
<b>-suffix </b><b></b><i>str</i>
<div style="margin-left: 4.00ex;">A directive is terminated by <i>str</i>
  appearing at the end of a directive line. The default is
  &quot;--&gt;&quot;.</div>
<div class="Pp"></div>
<b>-r </b><b></b><i>rules_uri</i>
<div>&#x00A0;</div>
<b>-rules </b><b></b><i>rules_uri</i>
<div style="margin-left: 4.00ex;">The location of the ruleset to be applied to
  the document, as a <b>DACS</b> VFS URI.</div>
<div class="Pp"></div>
<b>-rprefix </b><b></b><i>regex</i>
<div style="margin-left: 4.00ex;">A line whose beginning matches <i>regex</i>
  introduces a directive. This overrides the default and any <b>-prefix</b>
  flag. IEEE Std 1003.2 (&quot;POSIX.2&quot;) &quot;extended&quot; regular
  expressions are supported ( <b>regex(3)</b>[5]).</div>
<div class="Pp"></div>
<b>-rsuffix </b><b></b><i>regex</i>
<div style="margin-left: 4.00ex;">A directive is terminated by a string that
  matches <i>regex</i>, followed immediately by the end of the line. This
  overrides the default and any <b>-suffix</b> flag. IEEE Std 1003.2
  (&quot;POSIX.2&quot;) &quot;extended&quot; regular expressions are supported (
  <b>regex(3)</b>[5]).</div>
<div class="Pp"></div>
<b>-var</b> <i>name=value</i>
<div style="margin-left: 4.00ex;">Add a variable definition to the <i>DACS</i>
  namespace. The variable <i>${DACS::</i><i></i><i>name</i><i>}</i> will be
  assigned the string <i>value</i>. The <i>name</i> must be syntactically valid.
  This flag is equivalent to the <b>dacsoptions</b>[1] flag
  <b>-D</b><i>name=value</i>. This flag may be repeated. It is best to avoid the
  variable name <i>stdin</i>, which has a special purpose. If <i>name</i> is
  defined more than once its value is indeterminate.
<div style="height: 1.00em;">&#x00A0;</div>
In a directive, an attribute value that is enclosed within backtick quotes is
  evaluated as an expression, which may include variable references. Variables
  from the <i>Env</i> namespace and, if available, the <i>Conf</i> are also
  instantiated. The current directive's attributes are accessible in the
  <i>Attr</i> namespace; these attribute values are <i>unevaluated</i> and
  quoted.</div>
<div class="Pp"></div>
<b>-x</b>
<div style="margin-left: 4.00ex;">Run as a command, not a web service. This is
  often required when <b>dacstransform</b> is run as a CGI program.</div>
<div class="Pp"></div>
<b>--</b>
<div style="margin-left: 4.00ex;">Flags end. An input source argument may
  follow.</div>
<div class="Pp"></div>
After the flags, the input source can be specified. By default, or if <b>-</b>
  is given, the standard input is read, otherwise <i>file</i> is read.
<div class="Pp"></div>
Whitespace is not ignored at the beginning or end of an input line with respect
  to directive prefix and suffix matching.
<h2 class="Ss" title="Ss" id="Configuration"><a class="selflink" href="#Configuration">Configuration</a></h2>
Configuration variables can be set to change some of the program's defaults, but
  each one is overridden if a value is also given on the command line:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_docs</i>: This is the
  full pathname of the root directory in which original documents are kept. By
  default, the program will use a subdirectory
  <i>${Conf::DACS_HOME}</i>dacs_transform/docs. (default:
  /usr/local/dacs/dacs_transform/docs)
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Security</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
Change the default with care. In the absence of an appropriate access control
  rule, setting the pathname to &quot;/&quot; or the empty string, would provide
  access to any file on the server that can be read by this web service.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_acls</i>: This is the VFS
  specification for the rules. By default, the program will use
  <i>${Conf::DACS_HOME}</i>dacs_transform/acls. (default:
  [transform-acls]dacs-fs:/usr/local/dacs/dacs_transform/acls)</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_annotation</i>: This is
  the annotation to interpolate in redacted text instead of the default.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_prefix</i>: Instead of
  the default prefix string used to introduce a directive, the value of this
  variable is used. It must appear at the beginning of a line.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_suffix</i>: Instead of
  the default string used to end a directive, the value of this variable is
  used.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_rprefix</i>: A line whose
  beginning matches the specified regular expression introduces a
  directive.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;<i>transform_rsuffix</i>: The end of a
  directive is found by matching the specified regular expression.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DIAGNOSTICS"><a class="selflink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
The program exits 0 if everything was fine, 1 if an error occurred.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>dacs_transform(8)</b>[2], <b>dacs.exprs(5)</b>[6], <b>dacs.acls(5)</b>[7]
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Distributed Systems Software ( <b>www.dss.ca</b>[8])
<h1 class="Sh" title="Sh" id="COPYING"><a class="selflink" href="#COPYING">COPYING</a></h1>
Copyright2003-2014 Distributed Systems Software. See the <b>LICENSE</b>[9] file
  that accompanies the distribution for licensing information.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag">dacsoptions</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/dacs.1.html#dacsoptions</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">dacs_transform(8)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/dacs_transform.8.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag">execve(2)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.freebsd.org/cgi/man.cgi?query=execve&amp;apropos=0&amp;esektion=2&amp;emanpath=FreeBSD+10.1-RELEASE&amp;format=html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 4.</dt>
  <dd class="It-tag">dacscheck(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/dacscheck.1.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 5.</dt>
  <dd class="It-tag">regex(3)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.freebsd.org/cgi/man.cgi?query=regex&amp;apropos=0&amp;esektion=3&amp;emanpath=FreeBSD+10.1-RELEASE&amp;format=html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 6.</dt>
  <dd class="It-tag">dacs.exprs(5)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/dacs.exprs.5.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 7.</dt>
  <dd class="It-tag">dacs.acls(5)</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/dacs.acls.5.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 8.</dt>
  <dd class="It-tag">www.dss.ca</dd>
</dl>
<div style="margin-left: 4.00ex;">http://www.dss.ca</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 9.</dt>
  <dd class="It-tag">LICENSE</dd>
</dl>
<div style="margin-left: 4.00ex;">http://dacs.dss.ca/man/../misc/LICENSE</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">01/12/2017</td>
    <td class="foot-os">DACS 1.4.38a</td>
  </tr>
</table>
</body>
</html>
