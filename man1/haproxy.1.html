<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>HAPROXY(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">HAPROXY(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">HAPROXY(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
HAProxy - fast and reliable http reverse proxy and load balancer
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
haproxy -f &lt;configuration&#x00A0;file&gt; [-L&#x00A0;&lt;name&gt;]
  [-n&#x00A0;maxconn] [-N&#x00A0;maxconn] [-C&#x00A0;&lt;dir&gt;] [-v|-vv] [-d]
  [-D] [-q] [-V] [-c] [-p&#x00A0;&lt;pidfile&gt;] [-dk] [-ds] [-de] [-dp] [-db]
  [-dM[&lt;byte&gt;]] [-m&#x00A0;&lt;megs&gt;] [{-sf|-st}&#x00A0;pidlist...]
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
HAProxy is a TCP/HTTP reverse proxy which is particularly suited for high
  availability environments. Indeed, it can:
<br/>
 - route HTTP requests depending on statically assigned cookies ;
<br/>
 - spread the load among several servers while assuring server
<br/>
 persistence through the use of HTTP cookies ;
<br/>
 - switch to backup servers in the event a main one fails ;
<br/>
 - accept connections to special ports dedicated to service
<br/>
 monitoring ;
<br/>
 - stop accepting connections without breaking existing ones ;
<br/>
 - add/modify/delete HTTP headers both ways ;
<br/>
 - block requests matching a particular pattern ;
<br/>
 - hold clients to the right application server depending on
<br/>
 application cookies
<br/>
 - report detailed status as HTML pages to authenticated users from an
<br/>
 URI intercepted from the application.
<div style="height: 1.00em;">&#x00A0;</div>
It needs very little resource. Its event-driven architecture allows it to easily
  handle thousands of simultaneous connections on hundreds of instances without
  risking the system's stability.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f &lt;configuration file&gt;</b></dt>
  <dd class="It-tag">Specify configuration file path.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L &lt;name&gt;</b></dt>
  <dd class="It-tag">Set the local instance's peer name. Peers are defined in
      the <b>peers</b> configuration section and used for syncing stick tables
      between different instances. If this option is not specified, the local
      hostname is used as peer name.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n &lt;maxconn&gt;</b></dt>
  <dd class="It-tag">Set the high limit for the total number of simultaneous
      connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N &lt;maxconn&gt;</b></dt>
  <dd class="It-tag">Set the high limit for the per-listener number of
      simultaneous connections.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-C &lt;dir&gt;</b></dt>
  <dd class="It-tag">Change directory to &lt;<i>dir</i>&gt; before loading any
      files.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Display HAProxy's version.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-vv</b></dt>
  <dd class="It-tag">Display HAProxy's version and all build options.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Start in foreground with debugging mode enabled. When the
      proxy runs in this mode, it dumps every connections, disconnections,
      timestamps, and HTTP headers to stdout. This should NEVER be used in an
      init script since it will prevent the system from starting up.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b></dt>
  <dd class="It-tag">Start in daemon mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-Ds</b></dt>
  <dd class="It-tag">Start in systemd daemon mode, keeping a process in
      foreground.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q</b></dt>
  <dd class="It-tag">Disable messages on output.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b></dt>
  <dd class="It-tag">Displays messages on output even when -q or 'quiet' are
      specified. Some information about pollers and config file are displayed
      during startup.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c</b></dt>
  <dd class="It-tag">Only checks config file and exits with code 0 if no error
      was found, or exits with code 1 if a syntax error was found.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p &lt;pidfile&gt;</b></dt>
  <dd class="It-tag">Ask the process to write down each of its children's pids
      to this file in daemon mode.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dk</b></dt>
  <dd class="It-tag">Disable use of <b>kqueue</b>(2). <b>kqueue</b>(2) is
      available only on BSD systems.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ds</b></dt>
  <dd class="It-tag">Disable use of speculative <b>epoll</b>(7). <b>epoll</b>(7)
      is available only on Linux 2.6 and some custom Linux 2.4 systems.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-de</b></dt>
  <dd class="It-tag">Disable use of <b>epoll</b>(7). <b>epoll</b>(7) is
      available only on Linux 2.6 and some custom Linux 2.4 systems.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dp</b></dt>
  <dd class="It-tag">Disables use of <b>poll</b>(2). <b>select</b>(2) might be
      used instead.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dS</b></dt>
  <dd class="It-tag">Disables use of <b>splice</b>(2), which is broken on older
      kernels.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-db</b></dt>
  <dd class="It-tag">Disables background mode (stays in foreground, useful for
      debugging). For debugging, the '-db' option is very useful as it
      temporarily disables daemon mode and multi-process mode. The service can
      then be stopped by simply pressing Ctrl-C, without having to edit the
      config nor run full debug.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dM[&lt;byte&gt;]</b></dt>
  <dd class="It-tag">Initializes all allocated memory areas with the given
      &lt;<i>byte</i>&gt;. This makes it easier to detect bugs resulting from
      uninitialized memory accesses, at the expense of touching all allocated
      memory once. If &lt; <i>byte</i>&gt; is not specified, it defaults to 0x50
      (ASCII 'P').
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m &lt;megs&gt;</b></dt>
  <dd class="It-tag">Enforce a memory usage limit to a maximum of &lt;megs&gt;
      megabytes.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-sf &lt;pidlist&gt;</b></dt>
  <dd class="It-tag">Send FINISH signal to the pids in pidlist after startup.
      The processes which receive this signal will wait for all sessions to
      finish before exiting. This option must be specified last, followed by any
      number of PIDs. Technically speaking, <b>SIGTTOU</b> and <b>SIGUSR1</b>
      are sent.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-st &lt;pidlist&gt;</b></dt>
  <dd class="It-tag">Send TERMINATE signal to the pids in pidlist after startup.
      The processes which receive this signal will wait immediately terminate,
      closing all active sessions. This option must be specified last, followed
      by any number of PIDs. Technically speaking, <b>SIGTTOU</b> and
      <b>SIGTERM</b> are sent.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="LOGGING"><a class="selflink" href="#LOGGING">LOGGING</a></h1>
Since HAProxy can run inside a chroot, it cannot reliably access /dev/log. For
  this reason, it uses the UDP protocol to send its logs to the server, even if
  it is the local server. People who experience trouble receiving logs should
  ensure that their syslog daemon listens to the UDP socket. Several Linux
  distributions which ship with syslogd from the sysklogd package have UDP
  disabled by default. The <b>-r</b> option must be passed to the daemon in
  order to enable UDP.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SIGNALS"><a class="selflink" href="#SIGNALS">SIGNALS</a></h1>
Some signals have a special meaning for the haproxy daemon. Generally, they are
  used between daemons and need not be used by the administrator.
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGUSR1</b></dt>
  <dd class="It-tag">Tells the daemon to stop all proxies and exit once all
      sessions are closed. It is often referred to as the &quot;soft-stop&quot;
      signal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGTTOU</b></dt>
  <dd class="It-tag">Tells the daemon to stop listening to all sockets. Used
      internally by <b>-sf</b> and <b>-st</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGTTIN</b></dt>
  <dd class="It-tag">Tells the daemon to restart listening to all sockets after
      a <b>SIGTTOU</b>. Used internally when there was a problem during hot
      reconfiguration.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGINT</b> and <b>SIGTERM</b></dt>
  <dd class="It-tag">Both signals can be used to quickly stop the daemon.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGHUP</b></dt>
  <dd class="It-tag">Dumps the status of all proxies and servers into the logs.
      Mostly used for trouble-shooting purposes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGQUIT</b></dt>
  <dd class="It-tag">Dumps information about memory pools on stderr. Mostly used
      for debugging purposes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- <b>SIGPIPE</b></dt>
  <dd class="It-tag">This signal is intercepted and ignored on systems without
      <b>MSG_NOSIGNAL</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
A much better documentation can be found in configuration.txt. On Debian
  systems, you can find this file in
  /usr/share/doc/haproxy/configuration.txt.gz.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
HAProxy was written by Willy Tarreau. This man page was written by Arnaud Cornet
  and Willy Tarreau.
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">17 August 2007</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
