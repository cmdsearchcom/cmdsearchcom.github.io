<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:23:52 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>mapcache_seed(1) mapcache_seed(1)</p>

<p style="margin-top: 1em">NAME <br>
mapcache_seed - generate tiles to seed mapcache</p>

<p style="margin-top: 1em">SYNOPSIS <br>
mapcache_seed -c /path/to/mapcache.xml [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
mapcache_seed is an advanced seeding tool for mapcache,
whose main features are:</p>

<p style="margin-top: 1em">&Acirc;&middot; configurable
number of seeding threads, to speed up the rendering</p>

<p style="margin-top: 1em">&Acirc;&middot; ability to
reseed tiles older than a certain timestamp</p>

<p style="margin-top: 1em">&Acirc;&middot; ability to seed
tiles given a shapefile/OGR datasource</p>

<p style="margin-top: 1em">OPTIONS <br>
-c, --config file <br>
Path to the mapcache.xml configuration file that contains
the tilesets that need to be seeded.</p>

<p style="margin-top: 1em">-C, --cache override <br>
Override cache used by selected tileset (useful for
selectively seeding fallback/multitier caches).</p>

<p style="margin-top: 1em">-t, --tileset name <br>
Name of the tileset that must be seeded.</p>

<p style="margin-top: 1em">-g, --grid name <br>
Name of the grid that must be seeded (the selected tileset
must reference the given grid).</p>

<p style="margin-top: 1em">-z, --zoom minzoom,maxzoom <br>
(Optional) Start and end zoom levels that must be seeded,
separated by a comma, e.g. 0,6.</p>

<p style="margin-top: 1em">-M, --metasize width,height <br>
Override metatile size while seeding, e.g. 8,8.</p>

<p style="margin-top: 1em">-e, --extent minx,miny,maxx,maxy
<br>
(Optional) Bounding box of the area to seed.</p>

<p style="margin-top: 1em">-o, --older timestamp|now <br>
(Optional) Only seed tiles that are older than the given
value. The value can either be the string &quot;now&quot;,
or a date formatted like year/month/day hour:minute, e.g.:
<br>
&quot;2011/01/31 20:45&quot;. (Note that a full timestamp
should be quoted).</p>

<p style="margin-top: 1em">-n, --nthreads number <br>
Number of parallel threads that should be used to request
tiles from the WMS source. The default is 1, but can be set
higher if the WMS server can withstand parallel re&acirc;
<br>
quests (as a rule of thumb, the value chosen here should
never be much higher than the number of cpus on the WMS
server). (Incompatible with -p/--nprocesses).</p>

<p style="margin-top: 1em">-p, --nprocesses number <br>
Number of parallel processes that should be used to request
tiles from the WMS source. (Incompatible with
-n/--nthreads).</p>

<p style="margin-top: 1em">-P, --precent number <br>
Percent of failed requests allowed from the last 1000 before
we abort (default: 1%, set to 0 to abort on first
error).</p>

<p style="margin-top: 1em">-L, --log-failed file <br>
Log failed tiles to file.</p>

<p style="margin-top: 1em">-R, --retry-failed file <br>
Rtry failed requests logged to file by --log-failed.</p>

<p style="margin-top: 1em">-m, --mode seed|delete|transfer
<br>
Mode the utility will be running in: either seed (default),
delete or transfer.</p>

<p style="margin-top: 1em">-x, --transfer tileset <br>
Name of tileset to transfer.</p>

<p style="margin-top: 1em">-D, --dimension DIMENSION=VALUE
<br>
Used to specify which dimension to use if the tileset
supports dimensions. Can be used multiple times to set
multiple dimensions, e.g. -D &quot;DIM1=VAL1&quot; -D
&quot;DIM2=VAL2&quot;.</p>

<p style="margin-top: 1em">-h, --help <br>
Show help.</p>

<p style="margin-top: 1em">-q, --quiet <br>
Don&rsquo;t print progress messages to the standard
output.</p>

<p style="margin-top: 1em">-f, --force <br>
Force tile recreation even if it already exists.</p>

<p style="margin-top: 1em">-v, --verbose <br>
Print verbose debugging info (if compiled in).</p>

<p style="margin-top: 1em">Optional Commandline options
when using OGR/GEOS.</p>

<p style="margin-top: 1em">At compile time, if OGR and GEOS
where found on the system, the seeder tool supports
additional options to seed only the tiles that cover an
arbitrary geographical area.</p>

<p style="margin-top: 1em">Important: Note that for the
time being, the OGR datasource should be in the same
projection as the grid you are seeding, as there is no
automatic reprojection from the data&acirc; <br>
source projection to the grid projection.</p>

<p style="margin-top: 1em">-d, --ogr-datasource datasource
<br>
OGR connection to the spatial source. Consult the OGR
documentation for all that is supported. In the simplest
case (e.g. a Shapefile), this is just the full filename of
<br>
the shapefile.</p>

<p style="margin-top: 1em">-l, --ogr-layer layer <br>
(Optional) For datasources that contain multiple layers
(e.g. postgis, with multiple tables), determines which layer
will be used.</p>

<p style="margin-top: 1em">-s, --ogr-sql SQL <br>
OGR sql expression that can be applied (see
http://www.gdal.org/ogr/ogr_sql.html).</p>

<p style="margin-top: 1em">-w, --ogr-where where <br>
SQL &quot;where&quot; expression to filter out returned
values. This would typically be used to select only the
geometry of a given country if the datasource contains all
the world <br>
contours.</p>

<p style="margin-top: 1em">NOTES <br>
The seeding utility must be run under the same user account
as the user running the webserver. This is required so the
permissions on the tiles created by the seeder are
accessi&acirc; <br>
ble by the webserver, and conversely so the seeder has the
rights to write files to directories created by the
webserver.</p>

<p style="margin-top: 1em">A sample seeding session goes
like this:</p>

<p style="margin-top: 1em">[user@host]$ sudo www-data <br>
[www-data@host]$ mapcache_seed -c
/path/to/www/conf/mapcache.xml [options] <br>
[www-data@host]$ logout <br>
[user@host]$</p>

<p style="margin-top: 1em">EXAMPLE <br>
Seed the &quot;osm&quot; tileset with the
&quot;g&quot;(google/web-mercator) grid:</p>

<p style="margin-top: 1em">mapcache_seed -c mapcache.xml -t
osm -g g</p>

<p style="margin-top: 1em">Seed levels 0 through 12:</p>

<p style="margin-top: 1em">mapcache_seed -c mapcache.xml -t
osm -g g -z 0,12</p>

<p style="margin-top: 1em">Given a shapefile that contains
the world country countours, seed only the areas that are
covered by land (i.e. skip the oceans). Also use 4 request
threads in parallel:</p>

<p style="margin-top: 1em">mapcache_seed -c mapcache.xml -t
osm -g g -z 0,12 -n 4 -d /path/to/seed.shp</p>

<p style="margin-top: 1em">Same as beforehand, but only
seed the USA (notice the quote usage, required to create
valid sql with a single-quoted &rsquo;US&rsquo;:</p>

<p style="margin-top: 1em">mapcache_seed -c mapcache.xml -t
osm -g g -z 0,12 -n 4 -d /path/to/seed.shp -w
&quot;FIPS_A2=&rsquo;US&rsquo;&quot;</p>

<p style="margin-top: 1em">Reseed levels 0 to 12 (this
could also be done by deleting the cache for levels 0 to 12
and doing a classic seed, but doing so this way does not
slow down the access from web <br>
clients):</p>

<p style="margin-top: 1em">mapcache_seed -c mapcache.xml -t
osm -g g -z 0,12 -o now</p>

<p style="margin-top: 1em">14 July 2016
mapcache_seed(1)</p>
<hr>
</body>
</html>
