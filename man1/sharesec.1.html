<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:37:48 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SHARESEC(1) User Commands SHARESEC(1)</p>

<p style="margin-top: 1em">NAME <br>
sharesec - Set or get share ACLs</p>

<p style="margin-top: 1em">SYNOPSIS <br>
sharesec {sharename} [-r, --remove=ACL] [-m, --modify=ACL]
[-a, --add=ACL] [-R, --replace=ACLs] [-D, --delete] [-v,
--view] [--view-all] [-M, --machine-sid] [-F, --force] <br>
[-d, --debuglevel=DEBUGLEVEL] [-s, --configfile=CONFIGFILE]
[-l, --log-basename=LOGFILEBASE] [--version] [-?, --help]
[--usage] [-S, --setsddl=STRING] [-V, --viewsddl]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This tool is part of the samba(7) suite.</p>

<p style="margin-top: 1em">The sharesec program manipulates
share permissions on SMB file shares.</p>

<p style="margin-top: 1em">OPTIONS <br>
The following options are available to the sharesec program.
The format of ACLs is described in the section ACL
FORMAT</p>

<p style="margin-top: 1em">-a|--add=ACL <br>
Add the ACEs specified to the ACL list.</p>

<p style="margin-top: 1em">-D|--delete <br>
Delete the entire security descriptor.</p>

<p style="margin-top: 1em">-F|--force <br>
Force storing the ACL.</p>

<p style="margin-top: 1em">-m|--modify=ACL <br>
Modify existing ACEs.</p>

<p style="margin-top: 1em">-M|--machine-sid <br>
Initialize the machine SID.</p>

<p style="margin-top: 1em">-r|--remove=ACL <br>
Remove ACEs.</p>

<p style="margin-top: 1em">-R|--replace=ACLS <br>
Overwrite an existing share permission ACL.</p>

<p style="margin-top: 1em">-v|--view <br>
List a share acl</p>

<p style="margin-top: 1em">--view-all <br>
List all share acls</p>

<p style="margin-top: 1em">-S|--setsddl=STRING <br>
Set security descriptor by providing ACL in SDDL format.</p>

<p style="margin-top: 1em">-V|--viewsddl <br>
List a share acl in SDDL format.</p>

<p style="margin-top: 1em">-?|--help <br>
Print a summary of command line options.</p>

<p style="margin-top: 1em">-d|--debuglevel=level <br>
level is an integer from 0 to 10. The default value if this
parameter is not specified is 0.</p>

<p style="margin-top: 1em">The higher this value, the more
detail will be logged to the log files about the activities
of the server. At level 0, only critical errors and serious
warnings will be <br>
logged. Level 1 is a reasonable level for day-to-day running
- it generates a small amount of information about
operations carried out.</p>

<p style="margin-top: 1em">Levels above 1 will generate
considerable amounts of log data, and should only be used
when investigating a problem. Levels above 3 are designed
for use only by developers <br>
and generate HUGE amounts of log data, most of which is
extremely cryptic.</p>

<p style="margin-top: 1em">Note that specifying this
parameter here will override the log level parameter in the
smb.conf file.</p>

<p style="margin-top: 1em">-V|--version <br>
Prints the program version number.</p>


<p style="margin-top: 1em">-s|--configfile=&lt;configuration
file&gt; <br>
The file specified contains the configuration details
required by the server. The information in this file
includes server-specific information such as what printcap
file to <br>
use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at <br>
compile time.</p>

<p style="margin-top: 1em">-l|--log-basename=logdirectory
<br>
Base directory name for log/debug files. The extension
&quot;.progname&quot; will be appended (e.g. log.smbclient,
log.smbd, etc...). The log file is never removed by the
client.</p>


<p style="margin-top: 1em">--option=&lt;name&gt;=&lt;value&gt;
<br>
Set the smb.conf(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled-in defaults and options read from the
configuration file.</p>

<p style="margin-top: 1em">ACL FORMAT <br>
The format of an ACL is one or more ACL entries separated by
either commas or newlines. An ACL entry is one of the
following:</p>

<p style="margin-top: 1em">REVISION:&lt;revision number&gt;
<br>
OWNER:&lt;sid or name&gt; <br>
GROUP:&lt;sid or name&gt; <br>
ACL:&lt;sid or
name&gt;:&lt;type&gt;/&lt;flags&gt;/&lt;mask&gt;</p>

<p style="margin-top: 1em">The revision of the ACL
specifies the internal Windows NT ACL revision for the
security descriptor. If not specified it defaults to 1.
Using values other than 1 may cause strange <br>
behaviour.</p>

<p style="margin-top: 1em">The owner and group specify the
owner and group SIDs for the object. Share ACLs do not
specify an owner or a group, so these fields are empty.</p>

<p style="margin-top: 1em">ACLs specify permissions granted
to the SID. This SID can be specified in S-1-x-y-z format or
as a name in which case it is resolved against the server on
which the file or <br>
directory resides. The type, flags and mask values determine
the type of access granted to the SID.</p>

<p style="margin-top: 1em">The type can be either ALLOWED
or DENIED to allow/deny access to the SID. The flags values
are generally zero for share ACLs.</p>

<p style="margin-top: 1em">The mask is a value which
expresses the access right granted to the SID. It can be
given as a decimal or hexadecimal value, or by using one of
the following text strings which <br>
map to the NT file permissions of the same name.</p>

<p style="margin-top: 1em">&Acirc;&middot; R - Allow read
access</p>

<p style="margin-top: 1em">&Acirc;&middot; W - Allow write
access</p>

<p style="margin-top: 1em">&Acirc;&middot; X - Execute
permission on the object</p>

<p style="margin-top: 1em">&Acirc;&middot; D - Delete the
object</p>

<p style="margin-top: 1em">&Acirc;&middot; P - Change
permissions</p>

<p style="margin-top: 1em">&Acirc;&middot; O - Take
ownership</p>

<p style="margin-top: 1em">The following combined
permissions can be specified:</p>

<p style="margin-top: 1em">&Acirc;&middot; READ -
Equivalent to &rsquo;RX&rsquo; permissions</p>

<p style="margin-top: 1em">&Acirc;&middot; CHANGE -
Equivalent to &rsquo;RXWD&rsquo; permissions</p>

<p style="margin-top: 1em">&Acirc;&middot; FULL -
Equivalent to &rsquo;RWXDPO&rsquo; permissions</p>

<p style="margin-top: 1em">EXIT STATUS <br>
The sharesec program sets the exit status depending on the
success or otherwise of the operations performed. The exit
status may be one of the following values.</p>

<p style="margin-top: 1em">If the operation succeeded,
sharesec returns and exit status of 0. If sharesec
couldn&rsquo;t connect to the specified server, or there was
an error getting or setting the ACLs, an <br>
exit status of 1 is returned. If there was an error parsing
any command line arguments, an exit status of 2 is
returned.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Add full access for SID
S-1-5-21-1866488690-1365729215-3963860297-17724 on
share:</p>

<p style="margin-top: 1em">host:~ # sharesec share -a
S-1-5-21-1866488690-1365729215-3963860297-17724:ALLOWED/0/FULL</p>

<p style="margin-top: 1em">List all ACEs for share:</p>

<p style="margin-top: 1em">host:~ # sharesec share -v <br>
REVISION:1 <br>
CONTROL:SR|DP <br>
OWNER: <br>
GROUP: <br>
ACL:S-1-1-0:ALLOWED/0x0/FULL <br>

ACL:S-1-5-21-1866488690-1365729215-3963860297-17724:ALLOWED/0x0/FULL</p>

<p style="margin-top: 1em">VERSION <br>
This man page is correct for version 3 of the Samba
suite.</p>

<p style="margin-top: 1em">AUTHOR <br>
The original Samba software and related utilities were
created by Andrew Tridgell. Samba is now developed by the
Samba Team as an Open Source project similar to the way the
Linux <br>
kernel is developed.</p>

<p style="margin-top: 1em">Samba 4.4 05/25/2017
SHARESEC(1)</p>
<hr>
</body>
</html>
