<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:24:26 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>mformat(1) General Commands Manual mformat(1)</p>

<p style="margin-top: 1em">Name <br>
mformat - add an MSDOS filesystem to a low-level formatted
floppy disk</p>

<p style="margin-top: 1em">Note of warning <br>
This manpage has been automatically generated from
mtools&rsquo;s texinfo documentation, and may not be
entirely accurate or complete. See the end of this man page
for details.</p>

<p style="margin-top: 1em">Description <br>
The mformat command is used to add an MS-DOS file system to
a low-level formatted diskette. Its syntax is:</p>

<p style="margin-top: 1em">mformat [-t cylinders|-T
tot_sectors] [-h heads] [-s sectors] <br>
[-f size] [-1] [-4] [-8] <br>
[-v volume_label] <br>
[-F] [-S sizecode] <br>
[-M software_sector_size] <br>
[-N serial_number] [-a] <br>
[-C] [-H hidden_sectors] [-I fsVersion] <br>
[-r root_sectors] [-L fat_len] <br>
[-B boot_sector] [-k] <br>
[-m media_descriptor] <br>
[-K backup_boot] <br>
[-c clusters_per_sector] <br>
[-d fat_copies] <br>
[-X] [-2 sectors_on_track_0] [-3] <br>
[-0 rate_on_track_0] [-A rate_on_other_tracks] <br>
drive:</p>

<p style="margin-top: 1em">Mformat adds a minimal MS-DOS
file system (boot sector, FAT, and root directory) to a
diskette that has already been formatted by a Unix low-level
format.</p>

<p style="margin-top: 1em">The following options are
supported: (The S, 2, 1 and M options may not exist if this
copy of mtools has been compiled without the USE_2M
option)</p>

<p style="margin-top: 1em">The following options are the
same as for MS-DOS&rsquo;s format command:</p>

<p style="margin-top: 1em">Options <br>
v Specifies the volume label. A volume label identifies the
disk and can be a maximum of 11 characters. If you omit the
-v switch, mformat will assign no label to the disk.</p>

<p style="margin-top: 1em">f Specifies the size of the DOS
file system to format. Only a certain number of predefined
sizes are supported by this flag; for others use the
-h/-t/-s flags. The following <br>
sizes are supported:</p>

<p style="margin-top: 1em">160 160K, single-sided, 8
sectors per track, 40 cylinders (for 5 1/4 DD)</p>

<p style="margin-top: 1em">180 160K, single-sided, 9
sectors per track, 40 cylinders (for 5 1/4 DD)</p>

<p style="margin-top: 1em">320 320K, double-sided, 8
sectors per track, 40 cylinders (for 5 1/4 DD)</p>

<p style="margin-top: 1em">360 360K, double-sided, 9
sectors per track, 40 cylinders (for 5 1/4 DD)</p>

<p style="margin-top: 1em">720 720K, double-sided, 9
sectors per track, 80 cylinders (for 3 1/2 DD)</p>

<p style="margin-top: 1em">1200 1200K, double-sided, 15
sectors per track, 80 cylinders (for 5 1/4 HD)</p>

<p style="margin-top: 1em">1440 1440K, double-sided, 18
sectors per track, 80 cylinders (for 3 1/2 HD)</p>

<p style="margin-top: 1em">2880 2880K, double-sided, 36
sectors per track, 80 cylinders (for 3 1/2 ED)</p>

<p style="margin-top: 1em">t Specifies the number of tracks
on the disk.</p>

<p style="margin-top: 1em">T Specifies the number of total
sectors on the disk. Only one of these 2 options may be
specified (tracks or total sectors)</p>

<p style="margin-top: 1em">h The number of heads
(sides).</p>

<p style="margin-top: 1em">s Specifies the number of
sectors per track. If the 2m option is given, number of
512-byte sector equivalents on generic tracks (i.e. not head
0 track 0). If the 2m option <br>
is not given, number of physical sectors per track (which
may be bigger than 512 bytes).</p>

<p style="margin-top: 1em">1 Formats a single side
(equivalent to -h 1)</p>

<p style="margin-top: 1em">4 Formats a 360K double-sided
disk (equivalent to -f 360). When used together with -the 1
switch, this switch formats a 180K disk</p>

<p style="margin-top: 1em">8 Formats a disk with 8 sectors
per track.</p>

<p style="margin-top: 1em">MS-DOS format&rsquo;s q, u and b
options are not supported, and s has a different
meaning.</p>

<p style="margin-top: 1em">The following options are
specific to mtools:</p>

<p style="margin-top: 1em">F Format the partition as
FAT32.</p>

<p style="margin-top: 1em">S The size code. The size of the
sector is 2 ^ (sizecode + 7).</p>

<p style="margin-top: 1em">X formats the disk as an XDF
disk. See section XDF, for more details. The disk has first
to be low-level formatted using the xdfcopy utility included
in the fdutils package. <br>
XDF disks are used for instance for OS/2 install disks.</p>

<p style="margin-top: 1em">2 2m format. The parameter to
this option describes the number of sectors on track 0, head
0. This option is recommended for sectors bigger than
normal.</p>

<p style="margin-top: 1em">3 don&rsquo;t use a 2m format,
even if the current geometry of the disk is a 2m
geometry.</p>

<p style="margin-top: 1em">0 Data transfer rate on track
0</p>

<p style="margin-top: 1em">A Data transfer rate on tracks
other than 0</p>

<p style="margin-top: 1em">M software sector size. This
parameter describes the sector size in bytes used by the
MS-DOS file system. By default it is the physical sector
size.</p>

<p style="margin-top: 1em">N Uses the requested serial
number, instead of generating one automatically</p>

<p style="margin-top: 1em">a If this option is given, an
Atari style serial number is generated. Ataris store their
serial number in the OEM label.</p>

<p style="margin-top: 1em">C creates the disk image file to
install the MS-DOS file system on it. Obviously, this is
useless on physical devices such as floppies and hard disk
partitions, but is <br>
interesting for image files.</p>

<p style="margin-top: 1em">H number of hidden sectors. This
parameter is useful for formatting hard disk partition,
which are not aligned on track boundaries (i.e. first head
of first track doesn&rsquo;t <br>
belong to the partition, but contains a partition table). In
that case the number of hidden sectors is in general the
number of sectors per cylinder. This is untested.</p>

<p style="margin-top: 1em">I Sets the fsVersion id when
formatting a FAT32 drive. In order to find this out, run
minfo on an existing FAT32 drive, and mail me about it, so I
can include the correct <br>
value in future versions of mtools.</p>

<p style="margin-top: 1em">c Sets the size of a cluster (in
sectors). If this cluster size would generate a FAT that too
big for its number of bits, mtools automatically increases
the cluster size, <br>
until the FAT is small enough.</p>

<p style="margin-top: 1em">d Sets the number of FAT copies.
Default is 2. This setting can also be specified using the
MTOOLS_NFATS environment variable.</p>

<p style="margin-top: 1em">r Sets the size of the root
directory (in sectors). Only applicable to 12 and 16 bit
FATs. This setting can also be specified using the
MTOOLS_DIR_LEN environment variable.</p>

<p style="margin-top: 1em">L Sets the length of the
FAT.</p>

<p style="margin-top: 1em">B Use the boot sector stored in
the given file or device, instead of using its own. Only the
geometry fields are updated to match the target disks
parameters.</p>

<p style="margin-top: 1em">k Keep the existing boot sector
as much as possible. Only the geometry fields and other
similar file system data are updated to match the target
disks parameters.</p>

<p style="margin-top: 1em">K Sets the sector number where
the backup of the boot sector should be stored (only
relevant on FAT32).</p>

<p style="margin-top: 1em">m Use a non-standard media
descriptor byte for this disk. The media descriptor is
stored at position 21 of the boot sector, and as first byte
in each FAT copy. Using this <br>
option may confuse DOS or older mtools version, and may make
the disk unreadable. Only use if you know what you are
doing.</p>

<p style="margin-top: 1em">To format a diskette at a
density other than the default, you must supply (at least)
those command line parameters that are different from the
default.</p>

<p style="margin-top: 1em">Mformat returns 0 on success or
1 on failure.</p>

<p style="margin-top: 1em">It doesn&rsquo;t record bad
block information to the Fat, use mbadblocks for that.</p>

<p style="margin-top: 1em">See Also <br>
Mtools&rsquo; texinfo doc</p>

<p style="margin-top: 1em">Viewing the texi doc <br>
This manpage has been automatically generated from
mtools&rsquo;s texinfo documentation. However, this process
is only approximative, and some items, such as
crossreferences, footnotes <br>
and indices are lost in this translation process. Indeed,
these items have no appropriate representation in the
manpage format. Moreover, not all information has been
trans&acirc; <br>
lated into the manpage version. Thus I strongly advise you
to use the original texinfo doc. See the end of this manpage
for instructions how to view the texinfo doc.</p>

<p style="margin-top: 1em">* To generate a printable copy
from the texinfo doc, run the following commands:</p>

<p style="margin-top: 1em">./configure; make dvi; dvips
mtools.dvi</p>

<p style="margin-top: 1em">* To generate a html copy,
run:</p>

<p style="margin-top: 1em">./configure; make html</p>

<p style="margin-top: 1em">A premade html can be found at
&lsquo;http://www.gnu.org/software/mtools/manual/mtools.html&rsquo;</p>

<p style="margin-top: 1em">* To generate an info copy
(browsable using emacs&rsquo; info mode), run:</p>

<p style="margin-top: 1em">./configure; make info</p>

<p style="margin-top: 1em">The texinfo doc looks most
pretty when printed or as html. Indeed, in the info version
certain examples are difficult to read due to the quoting
conventions used in info.</p>

<p style="margin-top: 1em">mtools-4.0.18 09Jan13
mformat(1)</p>
<hr>
</body>
</html>
