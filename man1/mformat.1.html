<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>mformat(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">mformat(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">mformat(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="Name"><a class="selflink" href="#Name">Name</a></h1>
mformat - add an MSDOS filesystem to a low-level formatted floppy disk
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Note_of_warning"><a class="selflink" href="#Note_of_warning">Note&#x00A0;of&#x00A0;warning</a></h1>
This manpage has been automatically generated from mtools's texinfo
  documentation, and may not be entirely accurate or complete. See the end of
  this man page for details.
<h1 class="Sh" title="Sh" id="Description"><a class="selflink" href="#Description">Description</a></h1>
The mformat command is used to add an MS-DOS file system to a low-level
  formatted diskette. Its syntax is:
<div class="Pp"></div>
<pre>
mformat [-t  <i>cylinders</i>|-T <i>tot_sectors</i>] [-h <i>heads</i>] [-s <i>sectors</i>]
  [-f  <i>size</i>] [-1] [-4] [-8]
  [-v  <i>volume_label</i>]
  [-F] [-S  <i>sizecode</i>]
  [-M  <i>software_sector_size</i>]
  [-N  <i>serial_number</i>] [-a]
  [-C] [-H  <i>hidden_sectors</i>] [-I <i>fsVersion</i>]
  [-r  <i>root_sectors</i>] [-L <i>fat_len</i>] 
  [-B  <i>boot_sector</i>] [-k]
  [-m  <i>media_descriptor</i>]
  [-K  <i>backup_boot</i>]
  [-c  <i>clusters_per_sector</i>]
  [-d  <i>fat_copies</i>]
  [-X] [-2  <i>sectors_on_track_0</i>] [-3]
  [-0  <i>rate_on_track_0</i>] [-A <i>rate_on_other_tracks</i>]
   <i>drive:</i>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
Mformat adds a minimal MS-DOS file system (boot sector, FAT, and root directory)
  to a diskette that has already been formatted by a Unix low-level format.
<div class="Pp"></div>
The following options are supported: (The S, 2, 1 and M options may not exist if
  this copy of mtools has been compiled without the USE_2M option)
<div class="Pp"></div>
The following options are the same as for MS-DOS's format command:
<h1 class="Sh" title="Sh" id="Options"><a class="selflink" href="#Options">Options</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">v&#x00A0;</dt>
  <dd class="It-tag">Specifies the volume label. A volume label identifies the
      disk and can be a maximum of 11 characters. If you omit the -v switch,
      mformat will assign no label to the disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">f&#x00A0;</dt>
  <dd class="It-tag">Specifies the size of the DOS file system to format. Only a
      certain number of predefined sizes are supported by this flag; for others
      use the -h/-t/-s flags. The following sizes are supported:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">160&#x00A0;</dt>
  <dd class="It-tag">160K, single-sided, 8 sectors per track, 40 cylinders (for
      5 1/4 DD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">180&#x00A0;</dt>
  <dd class="It-tag">160K, single-sided, 9 sectors per track, 40 cylinders (for
      5 1/4 DD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">320&#x00A0;</dt>
  <dd class="It-tag">320K, double-sided, 8 sectors per track, 40 cylinders (for
      5 1/4 DD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">360&#x00A0;</dt>
  <dd class="It-tag">360K, double-sided, 9 sectors per track, 40 cylinders (for
      5 1/4 DD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">720&#x00A0;</dt>
  <dd class="It-tag">720K, double-sided, 9 sectors per track, 80 cylinders (for
      3 1/2 DD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1200&#x00A0;</dt>
  <dd class="It-tag">1200K, double-sided, 15 sectors per track, 80 cylinders
      (for 5 1/4 HD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1440&#x00A0;</dt>
  <dd class="It-tag">1440K, double-sided, 18 sectors per track, 80 cylinders
      (for 3 1/2 HD)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2880&#x00A0;</dt>
  <dd class="It-tag">2880K, double-sided, 36 sectors per track, 80 cylinders
      (for 3 1/2 ED)</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt class="It-tag">t&#x00A0;</dt>
  <dd class="It-tag">Specifies the number of tracks on the disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">T&#x00A0;</dt>
  <dd class="It-tag">Specifies the number of total sectors on the disk. Only one
      of these 2 options may be specified (tracks or total sectors)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">h&#x00A0;</dt>
  <dd class="It-tag">The number of heads (sides).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">s&#x00A0;</dt>
  <dd class="It-tag">Specifies the number of sectors per track. If the 2m option
      is given, number of 512-byte sector equivalents on generic tracks (i.e.
      not head 0 track 0). If the 2m option is not given, number of physical
      sectors per track (which may be bigger than 512 bytes).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1&#x00A0;</dt>
  <dd class="It-tag">Formats a single side (equivalent to -h 1)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4&#x00A0;</dt>
  <dd class="It-tag">Formats a 360K double-sided disk (equivalent to -f 360).
      When used together with -the 1 switch, this switch formats a 180K
    disk</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">8&#x00A0;</dt>
  <dd class="It-tag">Formats a disk with 8 sectors per track.</dd>
</dl>
<div class="Pp"></div>
MS-DOS format's q, u and b options are not supported, and s has a different
  meaning.
<div class="Pp"></div>
The following options are specific to mtools:
<dl class="Bl-tag">
  <dt class="It-tag">F&#x00A0;</dt>
  <dd class="It-tag">Format the partition as FAT32.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">S&#x00A0;</dt>
  <dd class="It-tag">The size code. The size of the sector is 2 ^ (sizecode +
      7).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">X&#x00A0;</dt>
  <dd class="It-tag">formats the disk as an XDF disk. See section XDF, for more
      details. The disk has first to be low-level formatted using the xdfcopy
      utility included in the fdutils package. XDF disks are used for instance
      for OS/2 install disks.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2&#x00A0;</dt>
  <dd class="It-tag">2m format. The parameter to this option describes the
      number of sectors on track 0, head 0. This option is recommended for
      sectors bigger than normal.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3&#x00A0;</dt>
  <dd class="It-tag">don't use a 2m format, even if the current geometry of the
      disk is a 2m geometry.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">0&#x00A0;</dt>
  <dd class="It-tag">Data transfer rate on track 0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">A&#x00A0;</dt>
  <dd class="It-tag">Data transfer rate on tracks other than 0</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">M&#x00A0;</dt>
  <dd class="It-tag">software sector size. This parameter describes the sector
      size in bytes used by the MS-DOS file system. By default it is the
      physical sector size.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">N&#x00A0;</dt>
  <dd class="It-tag">Uses the requested serial number, instead of generating one
      automatically</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">a&#x00A0;</dt>
  <dd class="It-tag">If this option is given, an Atari style serial number is
      generated. Ataris store their serial number in the OEM label.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">C&#x00A0;</dt>
  <dd class="It-tag">creates the disk image file to install the MS-DOS file
      system on it. Obviously, this is useless on physical devices such as
      floppies and hard disk partitions, but is interesting for image
    files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">H&#x00A0;</dt>
  <dd class="It-tag">number of hidden sectors. This parameter is useful for
      formatting hard disk partition, which are not aligned on track boundaries
      (i.e. first head of first track doesn't belong to the partition, but
      contains a partition table). In that case the number of hidden sectors is
      in general the number of sectors per cylinder. This is untested.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">I&#x00A0;</dt>
  <dd class="It-tag">Sets the fsVersion id when formatting a FAT32 drive. In
      order to find this out, run minfo on an existing FAT32 drive, and mail me
      about it, so I can include the correct value in future versions of
    mtools.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">c&#x00A0;</dt>
  <dd class="It-tag">Sets the size of a cluster (in sectors). If this cluster
      size would generate a FAT that too big for its number of bits, mtools
      automatically increases the cluster size, until the FAT is small
    enough.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">d&#x00A0;</dt>
  <dd class="It-tag">Sets the number of FAT copies. Default is 2. This setting
      can also be specified using the MTOOLS_NFATS environment variable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">r&#x00A0;</dt>
  <dd class="It-tag">Sets the size of the root directory (in sectors). Only
      applicable to 12 and 16 bit FATs. This setting can also be specified using
      the MTOOLS_DIR_LEN environment variable.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">L&#x00A0;</dt>
  <dd class="It-tag">Sets the length of the FAT.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">B&#x00A0;</dt>
  <dd class="It-tag">Use the boot sector stored in the given file or device,
      instead of using its own. Only the geometry fields are updated to match
      the target disks parameters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">k&#x00A0;</dt>
  <dd class="It-tag">Keep the existing boot sector as much as possible. Only the
      geometry fields and other similar file system data are updated to match
      the target disks parameters.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">K&#x00A0;</dt>
  <dd class="It-tag">Sets the sector number where the backup of the boot sector
      should be stored (only relevant on FAT32).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">m&#x00A0;</dt>
  <dd class="It-tag">Use a non-standard media descriptor byte for this disk. The
      media descriptor is stored at position 21 of the boot sector, and as first
      byte in each FAT copy. Using this option may confuse DOS or older mtools
      version, and may make the disk unreadable. Only use if you know what you
      are doing.</dd>
</dl>
<div class="Pp"></div>
To format a diskette at a density other than the default, you must supply (at
  least) those command line parameters that are different from the default.
<div class="Pp"></div>
Mformat returns 0 on success or 1 on failure.
<div class="Pp"></div>
It doesn't record bad block information to the Fat, use mbadblocks for that.
<h1 class="Sh" title="Sh" id="See_Also"><a class="selflink" href="#See_Also">See&#x00A0;Also</a></h1>
Mtools' texinfo doc
<h1 class="Sh" title="Sh" id="Viewing_the_texi_doc"><a class="selflink" href="#Viewing_the_texi_doc">Viewing&#x00A0;the&#x00A0;texi&#x00A0;doc</a></h1>
This manpage has been automatically generated from mtools's texinfo
  documentation. However, this process is only approximative, and some items,
  such as crossreferences, footnotes and indices are lost in this translation
  process. Indeed, these items have no appropriate representation in the manpage
  format. Moreover, not all information has been translated into the manpage
  version. Thus I strongly advise you to use the original texinfo doc. See the
  end of this manpage for instructions how to view the texinfo doc.
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate a printable copy from the texinfo doc, run the
      following commands:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make dvi; dvips mtools.dvi
    </pre>
    <br/>
  </dd>
</dl>
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate a html copy, run:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make html
    </pre>
    <br/>
  </dd>
</dl>
<div class="Pp"></div>
A premade html can be found at
  `http://www.gnu.org/software/mtools/manual/mtools.html'
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate an info copy (browsable using emacs' info
      mode), run:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make info
    </pre>
    <br/>
  </dd>
</dl>
<div class="Pp"></div>
<div class="Pp"></div>
The texinfo doc looks most pretty when printed or as html. Indeed, in the info
  version certain examples are difficult to read due to the quoting conventions
  used in info.</div>
<table class="foot">
  <tr>
    <td class="foot-date">09Jan13</td>
    <td class="foot-os">mtools-4.0.18</td>
  </tr>
</table>
</body>
</html>
