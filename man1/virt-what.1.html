<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:42:22 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VIRT-WHAT(1) Virtualization Support VIRT-WHAT(1)</p>

<p style="margin-top: 1em">NAME <br>
virt-what - detect if we are running in a virtual
machine</p>

<p style="margin-top: 1em">SUMMARY <br>
virt-what [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
&quot;virt-what&quot; is a shell script which can be used to
detect if the program is running in a virtual machine.</p>

<p style="margin-top: 1em">The program prints out a list of
&quot;facts&quot; about the virtual machine, derived from
heuristics. One fact is printed per line.</p>

<p style="margin-top: 1em">If nothing is printed and the
script exits with code 0 (no error), then it can mean either
that the program is running on bare-metal or the program is
running inside a type of <br>
virtual machine which we don&rsquo;t know about or cannot
detect.</p>

<p style="margin-top: 1em">FACTS <br>
docker <br>
This is a Docker container.</p>

<p style="margin-top: 1em">Status: confirmed by Charles
Nguyen</p>

<p style="margin-top: 1em">hyperv <br>
This is Microsoft Hyper-V hypervisor.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">ibm_power-kvm <br>
This is an IBM POWER KVM guest.</p>

<p style="margin-top: 1em">Status: contributed by Adrian
Likins.</p>

<p style="margin-top: 1em">ibm_power-lpar_shared <br>
ibm_power-lpar_dedicated <br>
This is an IBM POWER LPAR (hardware partition) in either
shared or dedicated mode.</p>

<p style="margin-top: 1em">Status: contributed by Adrian
Likins.</p>

<p style="margin-top: 1em">ibm_systemz <br>
This is an IBM SystemZ (or other S/390) hardware
partitioning system. Additional facts listed below may also
be printed.</p>

<p style="margin-top: 1em">ibm_systemz-direct <br>
This is Linux running directly on a IBM SystemZ hardware
partitioning system.</p>

<p style="margin-top: 1em">This is expected to be a highly
unusual configuration - if you see this result you should
treat it with suspicion.</p>

<p style="margin-top: 1em">Status: not confirmed</p>

<p style="margin-top: 1em">ibm_systemz-lpar <br>
This is Linux running directly on an LPAR on an IBM SystemZ
hardware partitioning system.</p>

<p style="margin-top: 1em">Status: not confirmed</p>

<p style="margin-top: 1em">ibm_systemz-zvm <br>
This is a z/VM guest running in an LPAR on an IBM SystemZ
hardware partitioning system.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ using
a Fedora guest running in z/VM</p>

<p style="margin-top: 1em">linux_vserver <br>
This is printed for backwards compatibility with older
virt-what which could not distinguish between a Linux
VServer container guest and host.</p>

<p style="margin-top: 1em">linux_vserver-guest <br>
This process is running in a Linux VServer container.</p>

<p style="margin-top: 1em">Status: contributed by BarXX
Metin</p>

<p style="margin-top: 1em">linux_vserver-host <br>
This process is running as the Linux VServer host (VxID
0).</p>

<p style="margin-top: 1em">Status: contributed by BarXX
Metin and Elan Ruusamaee</p>

<p style="margin-top: 1em">lxc This process is running in a
Linux LXC container.</p>

<p style="margin-top: 1em">Status: contributed by Marc
Fournier</p>

<p style="margin-top: 1em">kvm This guest is running on the
KVM hypervisor using hardware acceleration.</p>

<p style="margin-top: 1em">Note that if the hypervisor is
using software acceleration you should not see this, but
should see the &quot;qemu&quot; fact instead.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ.</p>

<p style="margin-top: 1em">lkvm <br>
This guest is running on the KVM hypervisor using hardware
acceleration, and the userspace component of the hypervisor
is lkvm (a.k.a kvmtool).</p>

<p style="margin-top: 1em">Status: contributed by Andrew
Jones</p>

<p style="margin-top: 1em">openvz <br>
The guest appears to be running inside an OpenVZ or
Virtuozzo container.</p>

<p style="margin-top: 1em">Status: contributed by Evgeniy
Sokolov</p>

<p style="margin-top: 1em">ovirt <br>
The guest is running on an oVirt or RHEV node.</p>

<p style="margin-top: 1em">Status: contributed by RWMJ, not
confirmed</p>

<p style="margin-top: 1em">parallels <br>
The guest is running inside Parallels Virtual Platform
(Parallels Desktop, Parallels Server).</p>

<p style="margin-top: 1em">Status: contributed by Justin
Clift</p>

<p style="margin-top: 1em">powervm_lx86 <br>
The guest is running inside IBM PowerVM Lx86 Linux/x86
emulator.</p>

<p style="margin-top: 1em">Status: data originally supplied
by Jeffrey Scheel, confirmed by Yufang Zhang and RWMJ</p>

<p style="margin-top: 1em">qemu <br>
This is QEMU hypervisor using software emulation.</p>

<p style="margin-top: 1em">Note that for KVM (hardware
accelerated) guests you should not see this.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ.</p>

<p style="margin-top: 1em">uml This is a User-Mode Linux
(UML) guest.</p>

<p style="margin-top: 1em">Status: contributed by Laurent
Leonard</p>

<p style="margin-top: 1em">virt <br>
Some sort of virtualization appears to be present, but we
are not sure what it is. In some very rare corner cases
where we know that virtualization is hard to detect, we <br>
will try a timing attack to see if certain machine
instructions are running much more slowly than they should
be, which would indicate virtualization. In this case, the
<br>
generic fact &quot;virt&quot; is printed.</p>

<p style="margin-top: 1em">virtage <br>
This is Hitachi Virtualization Manager (HVM) Virtage
hardware partitioning system.</p>

<p style="margin-top: 1em">Status: data supplied by Bhavna
Sarathy, not confirmed</p>

<p style="margin-top: 1em">virtualbox <br>
This is a VirtualBox guest.</p>

<p style="margin-top: 1em">Status: contributed by Laurent
Leonard</p>

<p style="margin-top: 1em">virtualpc <br>
The guest appears to be running on Microsoft VirtualPC.</p>

<p style="margin-top: 1em">Status: not confirmed</p>

<p style="margin-top: 1em">vmware <br>
The guest appears to be running on VMware hypervisor.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">xen The guest appears to be
running on Xen hypervisor.</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">xen-dom0 <br>
This is the Xen dom0 (privileged domain).</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">xen-domU <br>
This is a Xen domU (paravirtualized guest domain).</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">xen-hvm <br>
This is a Xen guest fully virtualized (HVM).</p>

<p style="margin-top: 1em">Status: confirmed by RWMJ</p>

<p style="margin-top: 1em">EXIT STATUS <br>
Programs that use or wrap &quot;virt-what&quot; should check
that the exit status is 0 before they attempt to parse the
output of the command.</p>

<p style="margin-top: 1em">A non-zero exit status indicates
some error, for example, an unrecognized command line
argument. If the exit status is non-zero then the output
&quot;facts&quot; (if any were printed) <br>
cannot be guaranteed and should be ignored.</p>

<p style="margin-top: 1em">The exit status does not have
anything to do with whether the program is running on
baremetal or under virtualization, nor with whether
&quot;virt-what&quot; managed detection
&quot;correctly&quot; <br>
(which is basically unknowable given the large variety of
virtualization systems out there and that some systems
deliberately emulate others).</p>

<p style="margin-top: 1em">RUNNING VIRT-WHAT FROM OTHER
PROGRAMS <br>
&quot;virt-what&quot; is designed so that you can easily run
it from other programs or wrap it up in a library.</p>

<p style="margin-top: 1em">Your program should check the
exit status (see the section above).</p>

<p style="margin-top: 1em">Some programming languages
(notably Python: issue 1652) erroneously mask the
&quot;SIGPIPE&quot; signal and do not restore it when
executing subprocesses. &quot;virt-what&quot; is a shell
script <br>
and some shell commands do not work correctly when you do
this. You may see warnings from &quot;virt-what&quot;
similar to this:</p>

<p style="margin-top: 1em">echo: write error: Broken
pipe</p>

<p style="margin-top: 1em">The solution is to set the
&quot;SIGPIPE&quot; signal handler back to
&quot;SIG_DFL&quot; before running
&quot;virt-what&quot;.</p>

<p style="margin-top: 1em">IMPORTANT NOTE <br>
Most of the time, using this program is the wrong thing to
do. Instead you should detect the specific features you
actually want to use. (As an example, if you wanted to issue
<br>
Xen hypervisor commands you would look for the
&quot;/proc/xen/privcmd&quot; file).</p>

<p style="margin-top: 1em">However people keep asking for
this, so we provide it. There are a few legitimate uses:</p>

<p style="margin-top: 1em">Bug reporting tool <br>
If you think that virtualization could affect how your
program runs, then you might use &quot;virt-what&quot; to
report this in a bug reporting tool.</p>

<p style="margin-top: 1em">Status display and monitoring
tools <br>
You might include this information in status and monitoring
programs.</p>

<p style="margin-top: 1em">System tuning (sometimes) <br>
You might use this program to tune an operating system so it
runs better as a virtual machine of a particular hypervisor.
However if installing paravirtualized drivers, it&rsquo;s
<br>
better to check for the specific features your drivers need
(eg. for the presence of PCI devices).</p>

<p style="margin-top: 1em">SEE ALSO <br>
&lt;http://people.redhat.com/~rjones/virt-what/&gt;,
&lt;http://www.vmware.com/&gt;,
&lt;http://www.microsoft.com/windows/products/winfamily/virtualpc&gt;,
&lt;http://xensource.com/&gt;, <br>
&lt;http://bellard.org/qemu/&gt;,
&lt;http://kvm.qumranet.com/&gt;,
&lt;http://openvz.org/&gt;</p>

<p style="margin-top: 1em">AUTHORS <br>
Richard W.M. Jones &lt;rjones @ redhat . com&gt;</p>

<p style="margin-top: 1em">COPYRIGHT <br>
(C) Copyright 2008-2015 Red Hat Inc.,
&lt;http://people.redhat.com/~rjones/virt-what/&gt;</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
the GNU General Public License as published by the Free
Software Foundation; either <br>
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 675
Mass Ave, Cambridge, MA 02139, <br>
USA.</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Bugs can be viewed on the Red Hat Bugzilla page:
&lt;https://bugzilla.redhat.com/&gt;.</p>

<p style="margin-top: 1em">If you find a bug in virt-what,
please follow these steps to report it:</p>

<p style="margin-top: 1em">1. Check for existing bug
reports <br>
Go to &lt;https://bugzilla.redhat.com/&gt; and search for
similar bugs. Someone may already have reported the same
bug, and they may even have fixed it.</p>

<p style="margin-top: 1em">2. Capture debug and error
messages <br>
Run</p>

<p style="margin-top: 1em">virt-what &gt; virt-what.log
2&gt;&amp;1</p>

<p style="margin-top: 1em">and keep virt-what.log. It may
contain error messages which you should submit with your bug
report.</p>

<p style="margin-top: 1em">3. Get version of virt-what.
<br>
Run</p>

<p style="margin-top: 1em">virt-what --version</p>

<p style="margin-top: 1em">4. Submit a bug report. <br>
Go to &lt;https://bugzilla.redhat.com/&gt; and enter a new
bug. Please describe the problem in as much detail as
possible.</p>

<p style="margin-top: 1em">Remember to include the version
numbers (step 3) and the debug messages file (step 2) and as
much other detail as possible.</p>

<p style="margin-top: 1em">5. Assign the bug to rjones @
redhat.com <br>
Assign or reassign the bug to rjones @ redhat.com (without
the spaces). You can also send me an email with the bug
number if you want a faster response.</p>

<p style="margin-top: 1em">virt-what-1.13 2016-11-05
VIRT-WHAT(1)</p>
<hr>
</body>
</html>
