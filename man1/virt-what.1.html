<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>VIRT-WHAT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">VIRT-WHAT(1)</td>
    <td class="head-vol">Virtualization Support</td>
    <td class="head-rtitle">VIRT-WHAT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
virt-what - detect if we are running in a virtual machine
<h1 class="Sh" title="Sh" id="SUMMARY"><a class="selflink" href="#SUMMARY">SUMMARY</a></h1>
virt-what [options]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
&quot;virt-what&quot; is a shell script which can be used to detect if the
  program is running in a virtual machine.
<div class="Pp"></div>
The program prints out a list of &quot;facts&quot; about the virtual machine,
  derived from heuristics. One fact is printed per line.
<div class="Pp"></div>
If nothing is printed and the script exits with code 0 (no error), then it can
  mean <i>either</i> that the program is running on bare-metal <i>or</i> the
  program is running inside a type of virtual machine which we don't know about
  or cannot detect.
<h1 class="Sh" title="Sh" id="FACTS"><a class="selflink" href="#FACTS">FACTS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>docker</b></dt>
  <dd class="It-tag">This is a Docker container.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by Charles Nguyen</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>hyperv</b></dt>
  <dd class="It-tag">This is Microsoft Hyper-V hypervisor.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_power-kvm</b></dt>
  <dd class="It-tag">This is an IBM POWER KVM guest.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Adrian Likins.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_power-lpar_shared</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_power-lpar_dedicated</b></dt>
  <dd class="It-tag">This is an IBM POWER LPAR (hardware partition) in either
      shared or dedicated mode.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Adrian Likins.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_systemz</b></dt>
  <dd class="It-tag">This is an IBM SystemZ (or other S/390) hardware
      partitioning system. Additional facts listed below may also be
    printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_systemz-direct</b></dt>
  <dd class="It-tag">This is Linux running directly on a IBM SystemZ hardware
      partitioning system.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is expected to be a highly unusual configuration - if you see this
      result you should treat it with suspicion.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: not confirmed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_systemz-lpar</b></dt>
  <dd class="It-tag">This is Linux running directly on an LPAR on an IBM SystemZ
      hardware partitioning system.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: not confirmed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ibm_systemz-zvm</b></dt>
  <dd class="It-tag">This is a z/VM guest running in an LPAR on an IBM SystemZ
      hardware partitioning system.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ using a Fedora guest running in z/VM</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>linux_vserver</b></dt>
  <dd class="It-tag">This is printed for backwards compatibility with older
      virt-what which could not distinguish between a Linux VServer container
      guest and host.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>linux_vserver-guest</b></dt>
  <dd class="It-tag">This process is running in a Linux VServer container.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by BarXX Metin</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>linux_vserver-host</b></dt>
  <dd class="It-tag">This process is running as the Linux VServer host (VxID 0).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by BarXX Metin and Elan Ruusamaee</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lxc</b></dt>
  <dd class="It-tag">This process is running in a Linux LXC container.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Marc Fournier</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>kvm</b></dt>
  <dd class="It-tag">This guest is running on the KVM hypervisor using hardware
      acceleration.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that if the hypervisor is using software acceleration you should
      <i>not</i> see this, but should see the &quot;qemu&quot; fact instead.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>lkvm</b></dt>
  <dd class="It-tag">This guest is running on the KVM hypervisor using hardware
      acceleration, and the userspace component of the hypervisor is lkvm (a.k.a
      kvmtool).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Andrew Jones</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>openvz</b></dt>
  <dd class="It-tag">The guest appears to be running inside an OpenVZ or
      Virtuozzo container.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Evgeniy Sokolov</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>ovirt</b></dt>
  <dd class="It-tag">The guest is running on an oVirt or RHEV node.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by RWMJ, not confirmed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>parallels</b></dt>
  <dd class="It-tag">The guest is running inside Parallels Virtual Platform
      (Parallels Desktop, Parallels Server).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Justin Clift</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>powervm_lx86</b></dt>
  <dd class="It-tag">The guest is running inside IBM PowerVM Lx86 Linux/x86
      emulator.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: data originally supplied by Jeffrey Scheel, confirmed by Yufang
      Zhang and RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>qemu</b></dt>
  <dd class="It-tag">This is QEMU hypervisor using software emulation.
    <div style="height: 1.00em;">&#x00A0;</div>
    Note that for KVM (hardware accelerated) guests you should <i>not</i> see
      this.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>uml</b></dt>
  <dd class="It-tag">This is a User-Mode Linux (UML) guest.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Laurent Leonard</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>virt</b></dt>
  <dd class="It-tag">Some sort of virtualization appears to be present, but we
      are not sure what it is. In some very rare corner cases where we know that
      virtualization is hard to detect, we will try a timing attack to see if
      certain machine instructions are running much more slowly than they should
      be, which would indicate virtualization. In this case, the generic fact
      &quot;virt&quot; is printed.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>virtage</b></dt>
  <dd class="It-tag">This is Hitachi Virtualization Manager (HVM) Virtage
      hardware partitioning system.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: data supplied by Bhavna Sarathy, not confirmed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>virtualbox</b></dt>
  <dd class="It-tag">This is a VirtualBox guest.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: contributed by Laurent Leonard</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>virtualpc</b></dt>
  <dd class="It-tag">The guest appears to be running on Microsoft VirtualPC.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: not confirmed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>vmware</b></dt>
  <dd class="It-tag">The guest appears to be running on VMware hypervisor.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>xen</b></dt>
  <dd class="It-tag">The guest appears to be running on Xen hypervisor.
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>xen-dom0</b></dt>
  <dd class="It-tag">This is the Xen dom0 (privileged domain).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>xen-domU</b></dt>
  <dd class="It-tag">This is a Xen domU (paravirtualized guest domain).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>xen-hvm</b></dt>
  <dd class="It-tag">This is a Xen guest fully virtualized (HVM).
    <div style="height: 1.00em;">&#x00A0;</div>
    Status: confirmed by RWMJ</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
Programs that use or wrap &quot;virt-what&quot; should check that the exit
  status is 0 before they attempt to parse the output of the command.
<div class="Pp"></div>
A non-zero exit status indicates some error, for example, an unrecognized
  command line argument. If the exit status is non-zero then the output
  &quot;facts&quot; (if any were printed) cannot be guaranteed and should be
  ignored.
<div class="Pp"></div>
The exit status does <i>not</i> have anything to do with whether the program is
  running on baremetal or under virtualization, nor with whether
  &quot;virt-what&quot; managed detection &quot;correctly&quot; (which is
  basically unknowable given the large variety of virtualization systems out
  there and that some systems deliberately emulate others).
<h1 class="Sh" title="Sh" id="RUNNING_VIRT-WHAT_FROM_OTHER_PROGRAMS"><a class="selflink" href="#RUNNING_VIRT-WHAT_FROM_OTHER_PROGRAMS">RUNNING
  VIRT-WHAT FROM OTHER PROGRAMS</a></h1>
&quot;virt-what&quot; is designed so that you can easily run it from other
  programs or wrap it up in a library.
<div class="Pp"></div>
Your program should check the exit status (see the section above).
<div class="Pp"></div>
Some programming languages (notably Python: issue 1652) erroneously mask the
  &quot;SIGPIPE&quot; signal and do not restore it when executing subprocesses.
  &quot;virt-what&quot; is a shell script and some shell commands do not work
  correctly when you do this. You may see warnings from &quot;virt-what&quot;
  similar to this:
<div class="Pp"></div>
<pre>
 echo: write error: Broken pipe
</pre>
<div class="Pp"></div>
The solution is to set the &quot;SIGPIPE&quot; signal handler back to
  &quot;SIG_DFL&quot; before running &quot;virt-what&quot;.
<h1 class="Sh" title="Sh" id="IMPORTANT_NOTE"><a class="selflink" href="#IMPORTANT_NOTE">IMPORTANT
  NOTE</a></h1>
Most of the time, using this program is the <i>wrong</i> thing to do. Instead
  you should detect the specific features you actually want to use. (As an
  example, if you wanted to issue Xen hypervisor commands you would look for the
  &quot;/proc/xen/privcmd&quot; file).
<div class="Pp"></div>
However people keep asking for this, so we provide it. There are a few
  legitimate uses:
<dl class="Bl-tag">
  <dt class="It-tag">Bug reporting tool</dt>
  <dd class="It-tag">If you think that virtualization could affect how your
      program runs, then you might use &quot;virt-what&quot; to report this in a
      bug reporting tool.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">Status display and monitoring tools</dt>
  <dd class="It-tag">You might include this information in status and monitoring
      programs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">System tuning (sometimes)</dt>
  <dd class="It-tag">You might use this program to tune an operating system so
      it runs better as a virtual machine of a particular hypervisor. However if
      installing paravirtualized drivers, it's better to check for the specific
      features your drivers need (eg. for the presence of PCI devices).</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
&lt;http://people.redhat.com/~rjones/virt-what/&gt;,
  &lt;http://www.vmware.com/&gt;,
  &lt;http://www.microsoft.com/windows/products/winfamily/virtualpc&gt;,
  &lt;http://xensource.com/&gt;, &lt;http://bellard.org/qemu/&gt;,
  &lt;http://kvm.qumranet.com/&gt;, &lt;http://openvz.org/&gt;
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Richard W.M. Jones &lt;rjones @ redhat . com&gt;
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
(C) Copyright 2008-2015 Red Hat Inc.,
  &lt;http://people.redhat.com/~rjones/virt-what/&gt;
<div class="Pp"></div>
This program is free software; you can redistribute it and/or modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation; either version 2 of the License, or (at your option) any later
  version.
<div class="Pp"></div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
  A PARTICULAR PURPOSE. See the GNU General Public License for more details.
<div class="Pp"></div>
You should have received a copy of the GNU General Public License along with
  this program; if not, write to the Free Software Foundation, Inc., 675 Mass
  Ave, Cambridge, MA 02139, USA.
<h1 class="Sh" title="Sh" id="REPORTING_BUGS"><a class="selflink" href="#REPORTING_BUGS">REPORTING
  BUGS</a></h1>
Bugs can be viewed on the Red Hat Bugzilla page:
  &lt;https://bugzilla.redhat.com/&gt;.
<div class="Pp"></div>
If you find a bug in virt-what, please follow these steps to report it:
<dl class="Bl-tag">
  <dt class="It-tag">1. Check for existing bug reports</dt>
  <dd class="It-tag">Go to &lt;https://bugzilla.redhat.com/&gt; and search for
      similar bugs. Someone may already have reported the same bug, and they may
      even have fixed it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">2. Capture debug and error messages</dt>
  <dd class="It-tag">Run
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 virt-what &gt; virt-what.log 2&gt;&amp;1
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    and keep <i>virt-what.log</i>. It may contain error messages which you
      should submit with your bug report.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">3. Get version of virt-what.</dt>
  <dd class="It-tag">Run
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
 virt-what --version
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">4. Submit a bug report.</dt>
  <dd class="It-tag">Go to &lt;https://bugzilla.redhat.com/&gt; and enter a new
      bug. Please describe the problem in as much detail as possible.
    <div style="height: 1.00em;">&#x00A0;</div>
    Remember to include the version numbers (step 3) and the debug messages file
      (step 2) and as much other detail as possible.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">5. Assign the bug to rjones @ redhat.com</dt>
  <dd class="It-tag">Assign or reassign the bug to <b>rjones @ redhat.com</b>
      (without the spaces). You can also send me an email with the bug number if
      you want a faster response.</dd>
</dl>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2016-11-05</td>
    <td class="foot-os">virt-what-1.13</td>
  </tr>
</table>
</body>
</html>
