<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>cback-amazons3-sync(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">cback-amazons3-sync(1)</td>
    <td class="head-vol">Kenneth J. Pronovici</td>
    <td class="head-rtitle">cback-amazons3-sync(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
cback-amazons3-sync - Synchronize a local directory with an Amazon S3 bucket
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>cback-amazons3-sync</b> [ <i>switches</i>] sourceDir s3BucketUrl
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This is the Cedar Backup 2 Amazon S3 sync tool. It synchronizes a local
  directory to an Amazon S3 cloud storage bucket. After the sync is complete, a
  validation step is taken. An error is reported if the contents of the bucket
  do not match the source directory, or if the indicated size for any file
  differs.
<div class="Pp"></div>
Generally, one can run the cback-amazons3-sync command with no special switches.
  This will start it using the default Cedar Backup log file, etc. You only need
  to use the switches if you need to change the default behavior.
<h1 class="Sh" title="Sh" id="MIGRATING_FROM_VERSION_2_TO_VERSION_3"><a class="selflink" href="#MIGRATING_FROM_VERSION_2_TO_VERSION_3">MIGRATING
  FROM VERSION 2 TO VERSION 3</a></h1>
The main difference between Cedar Backup version 2 and Cedar Backup version 3 is
  the targeted Python interpreter. For most users, migration should be
  straightforward. See the discussion found at cback(1) or reference the Cedar
  Backup user guide.
<h1 class="Sh" title="Sh" id="ARGUMENTS"><a class="selflink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>sourceDir</b></dt>
  <dd class="It-tag">The source directory on a local disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>s3BucketUrl</b></dt>
  <dd class="It-tag">The URL specifying the location of the Amazon S3 cloud
      storage bucket to synchronize with, like
      <i>s3://example.com-backup/subdir</i>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SWITCHES"><a class="selflink" href="#SWITCHES">SWITCHES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Display usage/help listing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Display version information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b>, <b>--verbose</b></dt>
  <dd class="It-tag">Print verbose output to the screen as well writing to the
      logfile. When this option is enabled, most information that would normally
      be written to the logfile will also be written to the screen.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b>, <b>--logfile</b></dt>
  <dd class="It-tag">Specify the path to an alternate logfile. The default
      logfile file is <i>/var/log/cback.log</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--owner</b></dt>
  <dd class="It-tag">Specify the ownership of the logfile, in the form
      user:group. The default ownership is <i>root:adm</i>, to match the Debian
      standard for most logfiles. This value will only be used when creating a
      new logfile. If the logfile already exists when the cback script is
      executed, it will retain its existing ownership and mode. Only user and
      group names may be used, not numeric uid and gid values.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b>, <b>--mode</b></dt>
  <dd class="It-tag">Specify the permissions for the logfile, using the numeric
      mode as in chmod(1). The default mode is <i>640</i> (-rw-r-----). This
      value will only be used when creating a new logfile. If the logfile
      already exists when the cback script is executed, it will retain its
      existing ownership and mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-O</b>, <b>--output</b></dt>
  <dd class="It-tag">Record some sub-command output to the logfile. When this
      option is enabled, all output from system commands will be logged. This
      might be useful for debugging or just for reference.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b>, <b>--debug</b></dt>
  <dd class="It-tag">Write debugging information to the logfile. This option
      produces a high volume of output, and would generally only be needed when
      debugging a problem. This option implies the --output option, as
    well.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--stack</b></dt>
  <dd class="It-tag">Dump a Python stack trace instead of swallowing exceptions.
      This forces Cedar Backup to dump the entire Python stack trace associated
      with an error, rather than just progating last message it received back up
      to the user interface. Under some circumstances, this is useful
      information to include along with a bug report.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D</b>, <b>--diagnostics</b></dt>
  <dd class="It-tag">Display runtime diagnostic information and then exit. This
      diagnostic information is often useful when filing a bug report.</dd>
</dl>
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
This command returns 0 (zero) upon normal completion, and several other error
  codes related to particular errors.
<dl class="Bl-tag">
  <dt class="It-tag"><b>1</b></dt>
  <dd class="It-tag">The Python interpreter version is &lt; 2.7.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>2</b></dt>
  <dd class="It-tag">Error processing command-line arguments.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>3</b></dt>
  <dd class="It-tag">Error configuring logging.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>5</b></dt>
  <dd class="It-tag">Backup was interrupted with a CTRL-C or similar.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>6</b></dt>
  <dd class="It-tag">Other error during processing.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
This tool is a wrapper over the Amazon AWS CLI interface found in the aws(1)
  command. Specifically, cback-amazons3-sync invokes &quot;aws s3 sync&quot;
  followed by &quot;aws s3api list-objects&quot;.
<div class="Pp"></div>
Cedar Backup itself is designed to run as root. However, cback-amazons3-sync can
  be run safely as any user that is configured to use the Amazon AWS CLI
  interface. The aws(1) command will be executed by the same user which is
  executing cback-amazons3-sync.
<div class="Pp"></div>
You must configure the AWS CLI interface to have a valid connection to Amazon S3
  infrastructure before using cback-amazons3-sync. For more information about
  how to accomplish this, see the Cedar Backup user guide.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
cback(1)
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/var/log/cback.log</i> - Default log file</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="URLS"><a class="selflink" href="#URLS">URLS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">The project homepage is:
    <i>https://bitbucket.org/cedarsolutions/cedar-backup2</i></dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
If you find a bug, please report it.
<div class="Pp"></div>
If possible, give me the output from --diagnostics, all of the error messages
  that the script printed into its log, and also any stack-traces (exceptions)
  that Python printed. It would be even better if you could tell me how to
  reproduce the problem, for instance by sending me your configuration file.
<div class="Pp"></div>
Report bugs to &lt;support@cedar-solutions.com&gt; or by using the BitBucket
  issue tracker.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Written and maintained by Kenneth J. Pronovici &lt;pronovic@ieee.org&gt; with
  contributions from others.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2004-2011,2013-2015 Kenneth J. Pronovici.
<div class="Pp"></div>
This is free software; see the source for copying conditions. There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
  PURPOSE.</div>
<table class="foot">
  <tr>
    <td class="foot-date">July 2015</td>
    <td class="foot-os">Cedar Backup 2</td>
  </tr>
</table>
</body>
</html>
