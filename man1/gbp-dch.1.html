<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>GBP-DCH(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GBP-DCH(1)</td>
    <td class="head-vol">git-buildpackage Manual</td>
    <td class="head-rtitle">GBP-DCH(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
gbp-dch - Generate the Debian changelog from git commit messages
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>gbp&#x00A0;dch</b> [ <b>--version</b> ] [ <b>--help</b> ] [ <b>--verbose</b>
  ] [ <b>--color=</b><i>[auto|on|off]</i><b></b> ] [
  <b>--color-scheme=</b><i>COLOR_SCHEME</i> <b></b> ] [
  <b>--debian-branch=</b><i>branch_name</i><b></b> ] [
  <b>--debian-tag=</b><i>tag-format</i> <b></b> ] [
  <b>--upstream-branch=</b><i>branch_name</i> <b></b> ] [
  <b>--upstream-tag=</b><i>tag-format</i><b></b> ] [ <b>--ignore-branch</b> ] [
  [ <b>-S</b> | <b>--snapshot</b> ] [ <b>-R</b> | <b>--release</b> ] ] [ [
  <b>-a</b> | <b>--auto</b> ] [ <b>-s </b><i>commitish</i><b></b> |
  <b>--since=</b> <i>commitish</i><b></b> ] ] [ <b>-N </b><i>version</i><b></b>
  | <b>--new-version=</b><i>version</i><b></b> ] [ <b>--bpo</b> | <b>--nmu</b> |
  <b>--qa</b> | <b>--security</b> | <b>--team</b> ] [
  <b>--distribution=</b><i>name</i> <b></b> ] [ <b>--force-distribution</b> ] [
  <b>-U </b><i>level</i><b></b> | <b>--urgency=</b><i>level</i><b></b> ] [
  <b>--[no-]full</b> ] [ <b>--[no-]meta</b> ] [
  <b>--meta-closes=bug-close-tags</b> ] [
  <b>--meta-closes-bugnum=bug-number-format</b> ] [
  <b>--snapshot-number=</b><i>expression</i> <b></b> ] [
  <b>--id-length=</b><i>number</i> <b></b> ] [
  <b>--git-log=</b><i>git-log-options</i> <b></b> ] [ <b>--[no-]git-author</b> ]
  [ <b>--[no-]multimaint</b> ] [ <b>--[no-]multimaint-merge</b> ] [
  <b>--spawn-editor=[always|never|snapshot|release]</b> ] [
  <b>--commit-msg=</b><i>msg-format</i><b></b> ] [ <b>-c</b> | <b>--commit</b> ]
  [ <b>--customizations=</b><i>customization-file</i><b></b> ] [
  <b>--verbose</b> ] <b></b><i>[path1 path2]</i><b></b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>gbp&#x00A0;dch</b> reads git commit messages and generates the Debian
  changelog from it. If no arguments are given, <b>gbp&#x00A0;dch</b> starts
  from the commit corresponding to the last tagged Debian package version up to
  the current tip of the current branch. If the distribution of the topmost
  section in <i>debian/changelog</i> is <b>UNRELEASED</b>, the changelog entries
  will be inserted into this section. Otherwise, a new section will be created.
<div class="Pp"></div>
If <b>--auto</b> is given <b>gbp&#x00A0;dch</b>, tries to guess the last Git
  commit documented in the changelog - this only works in snapshot mode.
  Otherwise, <b>--since</b> can be used to tell <b>gbp&#x00A0;dch</b> at which
  point it should start in the Git history.
<div class="Pp"></div>
The additional path arguments can be used to restrict the repository paths
  <b>gbp&#x00A0;dch</b> looks at. Setting <i>path</i> to <b>debian/</b> is a
  good choice if upstream uses Git and all Debian packaging changes are
  restricted to the <i>debian/</i> subdir. In more sophisticated cases (like
  backports), you can use <b>--git-log</b> to restrict the generated changelog
  entries further, e.g. by using <b>--git-log=</b><i>&quot;--author=Foo
  Bar&quot;</i>.
<div class="Pp"></div>
The above relies on the <b>debian-branch</b> option pointing to the current
  branch and <b>upstream-branch</b> pointing to the corresponding upstream
  branch in order to find the right merge points of these branches. Furthermore
  <b>gbp&#x00A0;dch</b> must be able to identify git tags from upstream and
  Debian version numbers. If you're not using the defaults check the
  <b>upstream-tag</b> and <b>debian-tag</b> options.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Print version of the program, i.e. version of the
      git-buildpackage suite</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">Verbose execution</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">Print help and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--color=</b><i>[auto|on|off]</i><b> </b></dt>
  <dd class="It-tag">Whether to use colored output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--color-scheme=</b><i>COLOR_SCHEME</i><b> </b></dt>
  <dd class="It-tag">Colors to use in output (when color is enabled). The format
      for COLOR_SCHEME is
      '&lt;debug&gt;:&lt;info&gt;:&lt;warning&gt;:&lt;error&gt;'. Numerical
      values and color names are accepted, empty fields imply the default color.
      For example, <b>--git-color-scheme=</b>'cyan:34::' would show debug
      messages in cyan, info messages in blue and other messages in default
      (i.e. warning and error messages in red).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debian-branch=</b><i>branch_name</i><b> </b></dt>
  <dd class="It-tag">The branch in the Git repository the Debian package is
      being developed on, default is <i>master</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--upstream-branch=</b><i>branch_name</i><b> </b></dt>
  <dd class="It-tag">Branch to determine the upstream version from. Default is
      <i>upstream</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--git-upstream-tag=</b><i>TAG-FORMAT</i><b> </b></dt>
  <dd class="It-tag">use this tag format when looking for tags of upstream
      versions, default is <i>upstream/%(version)s</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-branch </b></dt>
  <dd class="It-tag">Don't check if the current branch matches
      <i>debian-branch</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debian-tag=</b><i>tag-format</i><b> </b></dt>
  <dd class="It-tag">tag format used, when tagging debian versions, default is
      <i>debian/%(version)s</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--since=</b><i>committish</i><b> </b></dt>
  <dd class="It-tag">Start reading commit messages at <i>committish</i>. This
      option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--auto, -a</b></dt>
  <dd class="It-tag">Guess the last commit documented in the changelog from the
      snapshot banner (or from the last tag if no snapshot banner exists). This
      option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--[no-]meta</b></dt>
  <dd class="It-tag">Parse meta tags like <b>Closes:</b>, <b>Thanks:</b> and
      <b>Gbp-Dch:</b>. See META TAGS below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--meta-closes=</b><i>bug-close-tags</i><b> </b></dt>
  <dd class="It-tag">What meta tags to look for to generate bug-closing
      changelog entries. The default is 'Closes|LP' to support Debian and
      Launchpad.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--meta-closes-bugnum=</b><i>bug-number-format</i><b>
    </b></dt>
  <dd class="It-tag">What regular expression should be used to parse out the bug
      number. The default is '(?:bug|issue)?\#?\s?\d+'. Note: the regex should
      suppress all portions of the bug number that are not wanted using
      &quot;(?:)&quot;, see Python regex manual for details.
    <div style="height: 1.00em;">&#x00A0;</div>
    Example: <b>--meta-closes-bugnum=</b>&quot;(?:bug)?\s*ex-\d+&quot; would
      match all of the following:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
                 Possible Txt  Match?    Result
                 ------------  ------    ------
                 bug EX-12345    Y       EX-12345
                 ex-01273        Y       ex-01273
                 bug ex-1ab      Y       ex-1
                 EX--12345       N
    </pre>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--[no-]full </b></dt>
  <dd class="It-tag">Include the full commit message in the changelog
    output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--snapshot, -S</b></dt>
  <dd class="It-tag">Create a snapshot release entry. This adds a snapshot
      release number and a warning banner to the changelog entry. The release
      version number is being auto incremented with every new snapshot release
      to avoid packages downgrades during snapshot testing.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--snapshot-number=</b><i>expression</i><b> </b></dt>
  <dd class="It-tag">Python expression that gets eval()ed to the new snapshot
      number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--release, -R</b></dt>
  <dd class="It-tag">Remove any snapshot release banners and version suffixes,
      set the current distribution to <i>unstable</i>, and open the changelog
      for final tweaking. This option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--new-version=</b><i>version</i><b>, -N
    </b><i>version</i> <b> </b></dt>
  <dd class="It-tag">Add a new changelog section with version <i>newversion</i>.
      Together with <b>--snapshot</b>, the snapshot number will be appended to
      <i>newversion</i>. This option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--team </b></dt>
  <dd class="It-tag">Create a Team upload changelog entry. This option can't be
      set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bpo </b></dt>
  <dd class="It-tag">Increment the Debian release number for an upload to
      backports, and add a backport upload changelog comment. This option can't
      be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--nmu </b></dt>
  <dd class="It-tag">Increment the Debian release number for a non-maintainer
      upload. This option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--qa </b></dt>
  <dd class="It-tag">Increment the Debian release number for a Debian QA Team
      upload, and add a QA upload changelog comment. This option can't be set
      via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--security </b></dt>
  <dd class="It-tag">Increment the Debian release number for a Debian Security
      Team non-maintainer upload, and add a &quot;Security Team upload&quot;
      changelog comment. This option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--distribution=</b><i>name</i><b> </b></dt>
  <dd class="It-tag">Set the distribution field to <i>name</i>. This option
      can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--force-distribution </b></dt>
  <dd class="It-tag">Force the distribution specified with <b>--distribution</b>
      to be used, even if it doesn't match the list of known distributions. This
      option can't be set via <i>gbp.conf</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--urgency=</b><i>level</i><b> </b></dt>
  <dd class="It-tag">Set the urgency field to <i>level</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--git-log=</b><i>git-log-options</i><b> </b></dt>
  <dd class="It-tag">Options passed on verbatim to git-log(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--id-length=</b><i>N</i><b> </b></dt>
  <dd class="It-tag">Include <i>N</i> digits of the commit id in the changelog
      entry. Default is to not include any commit ids at all.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ignore-regex=</b><i>regex</i><b> </b></dt>
  <dd class="It-tag">Ignore commit lines matching <i>regex</i> when generating
      the changelog.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--git-author </b></dt>
  <dd class="It-tag">Use user.name and user.email from <b>git-config</b>(1) for
      changelog trailer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--[no-]multimaint-merge </b></dt>
  <dd class="It-tag">Merge commits by maintainer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--spawn-editor=</b><i>[always|never|snapshot|release]</i><b>
    </b></dt>
  <dd class="It-tag">Whether to spawn an editor: always, never, when doing
      snapshots or when doing a release.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--commit-msg=</b><i>msg-format</i><b> </b></dt>
  <dd class="It-tag">use this format string for the commit message when
      committing the generated changelog file (when <b>--commit</b> is given).
      Default is <i>Update changelog for %(version)s release</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--commit </b></dt>
  <dd class="It-tag">Commit the generated changelog.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--customizations=</b><i>customization-file</i><b>
    </b></dt>
  <dd class="It-tag">Load Python code from <i>customization-file</i>. At the
      moment, the only useful thing the code can do is define a custom
      format_changelog_entry() function.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SNAPSHOT_MODE"><a class="selflink" href="#SNAPSHOT_MODE">SNAPSHOT
  MODE</a></h1>
Snapshot mode can be used for quick test and install cycles without having to
  worry about version numbers or changelog entries.
<div class="Pp"></div>
When using <b>--snapshot</b> or <b>-S</b>, <b>gbp&#x00A0;dch</b> uses a pseudo
  header in the Debian changelog to remember the last git commit it added a
  changelog entry for. It also sets a version number ending in
  <i>~&lt;snaspshotnumber&gt;.gbp&lt;commitid&gt;</i>. It automatically
  increments the snapshot number on subsequent invocations of
  <b>gbp&#x00A0;dch</b> <b>-S</b> so that later snapshots automatically have a
  higher version number. To leave snapshot mode, invoke <b>gbp&#x00A0;dch</b>
  with the <b>--release</b> option. This removes the pseudo header and unmangles
  the version number so the released version has a higher version number than
  the snapshots.
<h1 class="Sh" title="Sh" id="META_TAGS"><a class="selflink" href="#META_TAGS">META
  TAGS</a></h1>
Additional to the above options, the formatting of the commit message in
  <i>debian/changelog</i> can be modified by special tags (called Meta Tags)
  given in the git commit message. Meta Tag processing can be activated via the
  <b>--meta</b> option. The tags must start at the first column of a commit
  message but can appear on any line. They are of the form <b>Tagname</b>:
  <i>value</i>. Valid Meta Tags are:
<dl class="Bl-tag">
  <dt class="It-tag"><b> Gbp-Dch: </b><i>action</i><b> </b></dt>
  <dd class="It-tag">Supported actions are: <i>Ignore</i> which will ignore this
      commit when generating <i>debian/changelog</i>, <i>Short</i> which will
      only use the description (the first line) of the commit message when
      generating the changelog entry (useful when <b>--full</b> is given), and
      <i>Full</i> which will use the full commit message when generating the
      changelog entry (useful when <b>--full</b> is not given).
    <div style="height: 1.00em;">&#x00A0;</div>
    In addition to <b>Gbp-Dch</b>, the deprecated <b>Git-Dch</b> is still
      supported.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Thanks: </b><i>msg</i><b> </b></dt>
  <dd class="It-tag">Add a thanks message after the commit message.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Closes: </b><i>bugnumber</i><b> </b></dt>
  <dd class="It-tag">Indicate in the <i>debian/changelog</i> that the bug was
      closed by this commit. See the <b>--meta-closes</b> on how to extend this
      for other bugtrackers.</dd>
</dl>
<div class="Pp"></div>
The following git commit message:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
      Document meta tags
<div class="Pp"></div>
      so one doesn't have to consult the manual
<div class="Pp"></div>
      Gbp-Dch: Short
      Closes: #636088
      Thanks: Rapha&#x00EB;l Hertzog for the suggestion
    
</pre>
<div class="Pp"></div>
Results in this <i>debian/changelog</i> entry:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
      * Document meta tags.
        Thanks to Rapha&#x00EB;l Hertzog for the suggestion (Closes: #636088)
    
</pre>
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILES"><a class="selflink" href="#CONFIGURATION_FILES">CONFIGURATION
  FILES</a></h1>
Several <i>gbp.conf</i> files are parsed to set defaults for the above
  command-line arguments. See the <b>gbp.conf</b>(5)&gt; manpage for details.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>gbp-buildpackage</b>(1)&gt;, <b>gbp-import-dsc</b>(1)&gt;,
  <b>gbp-import-dscs</b>(1)&gt;, <b>gbp-import-orig</b>(1)&gt;,
  <b>gbp.conf</b>(5)&gt;, <b>debuild</b>(1), <b>git</b>(1),
  <b>pristine-tar</b>(1), <i>The Git-Buildpackage Manual</i>
  &lt;URL:file:///usr/share/doc/git-buildpackage/manual-html/index.html&gt;
  <i>Cl2vcs</i> &lt;URL:https://honk.sigxcpu.org/cl2vcs&gt;,
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Guido Guenther &lt;agx@sigxcpu.org&gt;</div>
<table class="foot">
  <tr>
    <td class="foot-date">07 February 2017</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
