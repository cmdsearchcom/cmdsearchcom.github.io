<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>Makebootfat Bootable FAT Disk Creation(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Makebootfat Bootable FAT Disk Creation(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">Makebootfat Bootable FAT Disk Creation(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
makebootfat &#x2010; Makebootfat Bootable FAT Disk Creation
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
makebootfat [options] IMAGE
<div class="Pp"></div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This utility creates a bootable FAT filesystem and populates it with files and
  boot tools.
<div class="Pp"></div>
It is mainly designed to create bootable USB and Fixed disk for the AdvanceCD
  project.
<div class="Pp"></div>
The official site of AdvanceCD and makebootfat is:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">http://advancemame.sourceforge.net/
<div class="Pp"></div>
</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;o, &#x2010;&#x2010;output DEVICE</b></dt>
  <dd class="It-tag">Specify the output device. It must be the device where you
      want to setup the filesystem. You can use the special &#x02DD;usb&#x02DD;
      value to automatically select the USB Mass Storage device connected at the
      system. This option is always required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;b, &#x2010;&#x2010;boot FILE</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;1, &#x2010;&#x2010;boot&#x2010;fat12
    FILE</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;2, &#x2010;&#x2010;boot&#x2010;fat16
    FILE</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;3, &#x2010;&#x2010;boot&#x2010;fat32
    FILE</b></dt>
  <dd class="It-tag">Specify the FAT boot sector images to use. The &#x2010;b
      option uses the same sector for all the FAT types. The other options can
      be used to specify a different sector for different FAT types. The FAT
      types for which a boot sector is not specified are not used. This option
      is always required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;m, &#x2010;&#x2010;mbr FILE</b></dt>
  <dd class="It-tag">Specify the MBR sector image to use. If this option is
      specified a partition table is created on the disk. Otherwise the disk is
      filled without a partition table like a floppy disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;F, &#x2010;&#x2010;mbrfat</b></dt>
  <dd class="It-tag">Change the MBR image specified with the &#x2010;m option to
      pretend to be a FAT filesystem starting from the first sector of the disk.
      This allows booting from USB&#x2010;FDD (Floppy Disk Drive) also using a
      partition table generally required by USB&#x2010;HDD (Hard Disk Drive).
      The MBR image specified with the &#x2010;m option must have executable
      code positioned like a FAT boot sector. You can use the included
      &#x2018;mbrfat.bin&#x2019; file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;c, &#x2010;&#x2010;copy FILE</b></dt>
  <dd class="It-tag">Copy the specified file in the root directory of the disk.
      The file is copied using the readonly attribute.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;x, &#x2010;&#x2010;exclude FILE</b></dt>
  <dd class="It-tag">Exclude the specified files and subdirectories in the IMAGE
      directory to copy. The path must be specified using the same format used
      in the IMAGE directory specification.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;X, &#x2010;&#x2010;syslinux2</b></dt>
  <dd class="It-tag">Enforce the syslinux 2.xx FAT limitations. Syslinux 2.xx
      doesn&#x2019;t support FAT32 at all, and FAT16 with 64 and 128 sectors per
      cluster formats. This option excludes all the FAT formats not supported by
      syslinux. Please note that it limits the maximum size of filesystem to 1
      GB.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;Y, &#x2010;&#x2010;syslinux3</b></dt>
  <dd class="It-tag">Enforce the syslinux 3.xx FAT support. Syslinux 3.00
      supports all the FAT types and sizes but it requires a special
      customisation of the boot sector and of the file
      &#x2018;ldlinux.sys&#x2019;. This option does this customisation without
      the need to use the syslinux installer if the &#x2018;ldlinux.sys&#x2019;
      file is copied on disk with the &#x2010;c option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;Z, &#x2010;&#x2010;zip</b></dt>
  <dd class="It-tag">If possible force the ZIP&#x2010;Disk compatibility. It
      sets a geometry of 32 sectors and 64 heads. It also uses the 4&#x2019;th
      partition entry in the partition table. It&#x2019;s required to boot also
      in USB&#x2010;ZIP mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;P, &#x2010;&#x2010;partition</b></dt>
  <dd class="It-tag">Ensure to operate on a partition and not on a disk.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;D, &#x2010;&#x2010;disk</b></dt>
  <dd class="It-tag">Ensure to operate on a disk and not on a partition.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;L, &#x2010;&#x2010;label LABEL</b></dt>
  <dd class="It-tag">Set the FAT label. The label is a string of 11 chars.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;O, &#x2010;&#x2010;oem OEM</b></dt>
  <dd class="It-tag">Set the FAT OEM name. The OEM name is a string of 11
    chars.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;S, &#x2010;&#x2010;serial SERIAL</b></dt>
  <dd class="It-tag">Set the FAT serial number. The serial number is a 32 bit
      unsigned integer.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;E, &#x2010;&#x2010;drive DRIVE</b></dt>
  <dd class="It-tag">Set the BIOS drive to setup in the FAT boot sector.
      Generally this value is ignored by boot sectors, with the exception of the
      FAT12 and FAT16 FreeDOS boot sectors that require the correct value or the
      value 255 to force auto detection.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;v, &#x2010;&#x2010;verbose</b></dt>
  <dd class="It-tag">Print some information on the device and on the filesystem
      created.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;i, &#x2010;&#x2010;interactive</b></dt>
  <dd class="It-tag">Show the errors in a message box. Only for Windows.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;h, &#x2010;&#x2010;help</b></dt>
  <dd class="It-tag">Print a short help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>&#x2010;V, &#x2010;&#x2010;version</b></dt>
  <dd class="It-tag">Print the version number.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>IMAGE</b></dt>
  <dd class="It-tag">Directory image to copy on the disk. All the files and
      subdirectories present in this directory are copied on the disk.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DISKS_AND_PARTITIONS_NAMES"><a class="selflink" href="#DISKS_AND_PARTITIONS_NAMES">DISKS
  AND PARTITIONS NAMES</a></h1>
In Linux disk devices are named /dev/hdX or /dev/sdX where X is a letter.
  Partition devices are named /dev/hdXN or /dev/sdXN where X is a letter and N a
  digit.
<div class="Pp"></div>
In Windows disk devices are named \\.\PhysicalDriveN where N is a digit.
  Partition devices are named \\.\X: where X is a letter, but sometimes \\.\X:
  is a disk and not a partition, for example on floppies and on all the USB Mass
  Storage devices without a partition table.
<h1 class="Sh" title="Sh" id="SYSLINUX"><a class="selflink" href="#SYSLINUX">SYSLINUX</a></h1>
To make a bootable FAT using syslinux you must use the &#x2010;X option for
  syslinux version 2.xx or the &#x2010;Y option for syslinux version 3.xx. You
  must also copy in the root directory of the disk the files:
<div style="margin-left: 0.00ex;">
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>ldlinux.sys</i>
  The syslinux loader.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>syslinux.cfg</i>
  The syslinux configuration file.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>linux</i>
  The Linux kernel image (the file name may be different).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>initrd.img</i>
  The initrd filesystem (the file name may be different or missing).</div>
</div>
<div class="Pp"></div>
You must also specify the &#x2018;ldlinux.bss&#x2019; boot sector with the
  &#x2010;b option and possibily the &#x2018;mbr.bin&#x2019; MBR sector with the
  &#x2010;m option. Both the sector images are present in the syslinux package.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">makebootfat &#x2010;o usb \
<div class="Pp"></div>
	&#x2010;Y \
<div class="Pp"></div>
	&#x2010;b ldlinux.bss &#x2010;m mbr.bin \
<div class="Pp"></div>
	&#x2010;c ldlinux.sys &#x2010;c syslinux.cfg \
<div class="Pp"></div>
	&#x2010;c linux &#x2010;c initrd.img \
<div class="Pp"></div>
	image
<div class="Pp"></div>
</div>
<h1 class="Sh" title="Sh" id="LOADLIN_AND_FREEDOS"><a class="selflink" href="#LOADLIN_AND_FREEDOS">LOADLIN
  AND FREEDOS</a></h1>
To make a bootable FAT using loadlin and FreeDOS you must copy in the root
  directory of the disk the files:
<div style="margin-left: 0.00ex;">
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>kernel.sys</i>
  The FreeDOS kernel. Remember to use the &#x02DD;32&#x02DD; kernel version to
  support FAT32.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>command.com</i>
  The FreeDOS shell.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>autoexec.bat</i>
  Used to start loadlin.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>loadlin.exe</i>
  The loadlin executable.</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>linux</i>
  The Linux kernel image (the file name may be different).</div>
<div class="Pp"></div>
<div class="Pp" style="margin-left: 4.00ex; text-indent: -4.00ex;"><i>initrd.img</i>
  The initrd filesystem (the file name may be different or missing).</div>
</div>
<div class="Pp"></div>
You must also specify the FreeDOS boot sectors available on the FreeDOS
  &#x2018;sys&#x2019; source package with the &#x2010;1, &#x2010;2, &#x2010;3
  option. For the MBR you can use the sectors image available on the FreeDOS
  &#x2018;fdisk&#x2019; source package.
<div class="Pp"></div>
For example:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">makebootfat &#x2010;o /dev/hda1 \
<div class="Pp"></div>
	&#x2010;E 255 \
<div class="Pp"></div>
	&#x2010;1 fat12com.bin &#x2010;2 fat16com.bin &#x2010;3 fat32lba.bin \
<div class="Pp"></div>
	&#x2010;c kernel.sys &#x2010;c command.com \
<div class="Pp"></div>
	&#x2010;c autoexec.bat &#x2010;c loadlin.exe \
<div class="Pp"></div>
	&#x2010;c linux &#x2010;c initrd.img \
<div class="Pp"></div>
	image
<div class="Pp"></div>
</div>
<h1 class="Sh" title="Sh" id="MULTI_STANDARD_USB_BOOTING"><a class="selflink" href="#MULTI_STANDARD_USB_BOOTING">MULTI
  STANDARD USB BOOTING</a></h1>
The BIOS USB boot support is generally differentiated in three categories:
  USB&#x2010;HDD, USB&#x2010;FDD and USB&#x2010;ZIP.
<div class="Pp"></div>
The USB&#x2010;HDD (Hard Disk Drive) standard is the preferred choice and it
  requires the presence of a partition table in the first sector of the disk.
  You can create this type of disk using the &#x2010;m option.
<div class="Pp"></div>
The USB&#x2010;FDD (Floppy Disk Drive) standard requires the presence of a
  filesystem starting from the first sector of the disk without a partition
  table. You can create this type of disk without using the &#x2010;m option.
<div class="Pp"></div>
The USB&#x2010;ZIP (ZIP Drive) standard requires the presence of a device with a
  very specific geometry. Specifically, it requires a geometry with 32 sectors
  and 64 heads. It also requires the presence of a partition table with only a
  bootable partition in the fourth entry. You can create this type of disk using
  the &#x2010;m and &#x2010;Z option.
<div class="Pp"></div>
Generally these standards are incompatible, but using the &#x2010;m, &#x2010;F
  and &#x2010;Z options you can create a disk compatible with all of them.
<div class="Pp"></div>
To use the &#x2010;F option, the MBR image specified must follow the constrains:
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">It must start with a standard FAT 3 bytes jump
    instruction.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">It must have the bytes from address 3 to 89 (included)
      unused.</dd>
</dl>
<div class="Pp"></div>
And example of such image is in the &#x2018;mbrfat.bin&#x2019; file.
<div class="Pp"></div>
For example to create a syslinux image:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">makebootfat &#x2010;o usb \
<div class="Pp"></div>
	&#x2010;Y \
<div class="Pp"></div>
	&#x2010;Z \
<div class="Pp"></div>
	&#x2010;b ldlinux.bss &#x2010;m mbrfat.bin &#x2010;F \
<div class="Pp"></div>
	&#x2010;c ldlinux.sys &#x2010;c syslinux.cfg \
<div class="Pp"></div>
	&#x2010;c linux &#x2010;c initrd.img \
<div class="Pp"></div>
	image
<div class="Pp"></div>
</div>
<div class="Pp"></div>
and for a FreeDOS and loadlin image:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">makebootfat &#x2010;o usb \
<div class="Pp"></div>
	&#x2010;E 255 \
<div class="Pp"></div>
	&#x2010;Z \
<div class="Pp"></div>
	&#x2010;1 fat12com.bin &#x2010;2 fat16com.bin &#x2010;3 fat32chs.bin \
<div class="Pp"></div>
	&#x2010;m mbrfat.bin &#x2010;F \
<div class="Pp"></div>
	&#x2010;c kernel.sys &#x2010;c command.com \
<div class="Pp"></div>
	&#x2010;c autoexec.bat &#x2010;c loadlin.exe \
<div class="Pp"></div>
	&#x2010;c linux &#x2010;c initrd.img \
<div class="Pp"></div>
	image
<div class="Pp"></div>
</div>
<div class="Pp"></div>
Please note that FreeDos has some problems booting from USB. It works only on
  very few conditions.
<h1 class="Sh" title="Sh" id="EXCLUSION"><a class="selflink" href="#EXCLUSION">EXCLUSION</a></h1>
To exclude some files or directories in the image copy, you can use the
  &#x2010;x option using the same path specification which are you using for the
  image directory.
<div class="Pp"></div>
For example, if you need to exclude the &#x2018;isolinux&#x2019; and
  &#x2018;syslinux&#x2019; subdirectories from the &#x2018;image&#x2019;
  directory you can use the command:
<div class="Pp"></div>
<div style="margin-left: 4.00ex;">makebootfat ... \
<div class="Pp"></div>
	&#x2010;x image/isolinux \
<div class="Pp"></div>
	&#x2010;x image/syslinux \
<div class="Pp"></div>
	image
<div class="Pp"></div>
</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
This file is Copyright (C) 2004, 2005 Andrea Mazzoleni
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
syslinux(1), mkdosfs(1), dosfsck(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
