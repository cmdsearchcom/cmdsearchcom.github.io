<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:23:39 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>Makebootfat Bootable FAT Disk Creation(1) General
Commands Manual Makebootfat Bootable FAT Disk
Creation(1)</p>

<p style="margin-top: 1em">NAME <br>
makebootfat &acirc; Makebootfat Bootable FAT Disk
Creation</p>

<p style="margin-top: 1em">SYNOPSIS <br>
makebootfat [options] IMAGE DESCRIPTION <br>
This utility creates a bootable FAT filesystem and populates
it with files and boot tools.</p>

<p style="margin-top: 1em">It is mainly designed to create
bootable USB and Fixed disk for the AdvanceCD project.</p>

<p style="margin-top: 1em">The official site of AdvanceCD
and makebootfat is:</p>


<p style="margin-top: 1em">http://advancemame.sourceforge.net/
OPTIONS <br>
&acirc;o, &acirc;&acirc;output DEVICE <br>
Specify the output device. It must be the device where you
want to setup the filesystem. You can use the special
&Euml;usb&Euml; value to automatically select the USB Mass
Storage <br>
device connected at the system. This option is always
required.</p>

<p style="margin-top: 1em">&acirc;b, &acirc;&acirc;boot
FILE</p>

<p style="margin-top: 1em">&acirc;1,
&acirc;&acirc;boot&acirc;fat12 FILE</p>

<p style="margin-top: 1em">&acirc;2,
&acirc;&acirc;boot&acirc;fat16 FILE</p>

<p style="margin-top: 1em">&acirc;3,
&acirc;&acirc;boot&acirc;fat32 FILE <br>
Specify the FAT boot sector images to use. The &acirc;b
option uses the same sector for all the FAT types. The other
options can be used to specify a different sector for
dif&acirc; <br>
ferent FAT types. The FAT types for which a boot sector is
not specified are not used. This option is always
required.</p>

<p style="margin-top: 1em">&acirc;m, &acirc;&acirc;mbr FILE
<br>
Specify the MBR sector image to use. If this option is
specified a partition table is created on the disk.
Otherwise the disk is filled without a partition table like
a <br>
floppy disk.</p>

<p style="margin-top: 1em">&acirc;F, &acirc;&acirc;mbrfat
<br>
Change the MBR image specified with the &acirc;m option to
pretend to be a FAT filesystem starting from the first
sector of the disk. This allows booting from USB&acirc;FDD
(Floppy <br>
Disk Drive) also using a partition table generally required
by USB&acirc;HDD (Hard Disk Drive). The MBR image specified
with the &acirc;m option must have executable code
positioned <br>
like a FAT boot sector. You can use the included
&acirc;mbrfat.bin&acirc; file.</p>

<p style="margin-top: 1em">&acirc;c, &acirc;&acirc;copy
FILE <br>
Copy the specified file in the root directory of the disk.
The file is copied using the readonly attribute.</p>

<p style="margin-top: 1em">&acirc;x, &acirc;&acirc;exclude
FILE <br>
Exclude the specified files and subdirectories in the IMAGE
directory to copy. The path must be specified using the same
format used in the IMAGE directory specification.</p>

<p style="margin-top: 1em">&acirc;X,
&acirc;&acirc;syslinux2 <br>
Enforce the syslinux 2.xx FAT limitations. Syslinux 2.xx
doesn&acirc;t support FAT32 at all, and FAT16 with 64 and
128 sectors per cluster formats. This option excludes all
the <br>
FAT formats not supported by syslinux. Please note that it
limits the maximum size of filesystem to 1 GB.</p>

<p style="margin-top: 1em">&acirc;Y,
&acirc;&acirc;syslinux3 <br>
Enforce the syslinux 3.xx FAT support. Syslinux 3.00
supports all the FAT types and sizes but it requires a
special customisation of the boot sector and of the file
<br>
&acirc;ldlinux.sys&acirc;. This option does this
customisation without the need to use the syslinux installer
if the &acirc;ldlinux.sys&acirc; file is copied on disk with
the &acirc;c option.</p>

<p style="margin-top: 1em">&acirc;Z, &acirc;&acirc;zip <br>
If possible force the ZIP&acirc;Disk compatibility. It sets
a geometry of 32 sectors and 64 heads. It also uses the
4&acirc;th partition entry in the partition table.
It&acirc;s required <br>
to boot also in USB&acirc;ZIP mode.</p>

<p style="margin-top: 1em">&acirc;P,
&acirc;&acirc;partition <br>
Ensure to operate on a partition and not on a disk.</p>

<p style="margin-top: 1em">&acirc;D, &acirc;&acirc;disk
<br>
Ensure to operate on a disk and not on a partition.</p>

<p style="margin-top: 1em">&acirc;L, &acirc;&acirc;label
LABEL <br>
Set the FAT label. The label is a string of 11 chars.</p>

<p style="margin-top: 1em">&acirc;O, &acirc;&acirc;oem OEM
<br>
Set the FAT OEM name. The OEM name is a string of 11
chars.</p>

<p style="margin-top: 1em">&acirc;S, &acirc;&acirc;serial
SERIAL <br>
Set the FAT serial number. The serial number is a 32 bit
unsigned integer.</p>

<p style="margin-top: 1em">&acirc;E, &acirc;&acirc;drive
DRIVE <br>
Set the BIOS drive to setup in the FAT boot sector.
Generally this value is ignored by boot sectors, with the
exception of the FAT12 and FAT16 FreeDOS boot sectors that
<br>
require the correct value or the value 255 to force auto
detection.</p>

<p style="margin-top: 1em">&acirc;v, &acirc;&acirc;verbose
<br>
Print some information on the device and on the filesystem
created.</p>

<p style="margin-top: 1em">&acirc;i,
&acirc;&acirc;interactive <br>
Show the errors in a message box. Only for Windows.</p>

<p style="margin-top: 1em">&acirc;h, &acirc;&acirc;help
<br>
Print a short help.</p>

<p style="margin-top: 1em">&acirc;V, &acirc;&acirc;version
<br>
Print the version number.</p>

<p style="margin-top: 1em">IMAGE Directory image to copy on
the disk. All the files and subdirectories present in this
directory are copied on the disk.</p>

<p style="margin-top: 1em">DISKS AND PARTITIONS NAMES <br>
In Linux disk devices are named /dev/hdX or /dev/sdX where X
is a letter. Partition devices are named /dev/hdXN or
/dev/sdXN where X is a letter and N a digit.</p>

<p style="margin-top: 1em">In Windows disk devices are
named \.PhysicalDriveN where N is a digit. Partition devices
are named \. <br>
tion, for example on floppies and on all the USB Mass
Storage devices without a partition table.</p>

<p style="margin-top: 1em">SYSLINUX <br>
To make a bootable FAT using syslinux you must use the
&acirc;X option for syslinux version 2.xx or the &acirc;Y
option for syslinux version 3.xx. You must also copy in the
root directory of <br>
the disk the files: <br>
ldlinux.sys The syslinux loader. <br>
syslinux.cfg The syslinux configuration file. <br>
linux The Linux kernel image (the file name may be
different). <br>
initrd.img The initrd filesystem (the file name may be
different or missing).</p>

<p style="margin-top: 1em">You must also specify the
&acirc;ldlinux.bss&acirc; boot sector with the &acirc;b
option and possibily the &acirc;mbr.bin&acirc; MBR sector
with the &acirc;m option. Both the sector images are present
in the sys&acirc; <br>
linux package.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">makebootfat &acirc;o usb
&acirc;Y &acirc;b ldlinux.bss &acirc;m mbr.bin &acirc;c
ldlinux.sys &acirc;c syslinux.cfg &acirc;c linux &acirc;c
initrd.img image LOADLIN AND FREEDOS <br>
To make a bootable FAT using loadlin and FreeDOS you must
copy in the root directory of the disk the files: <br>
kernel.sys The FreeDOS kernel. Remember to use the
&Euml;32&Euml; kernel version to support FAT32. <br>
command.com The FreeDOS shell. <br>
autoexec.bat Used to start loadlin. <br>
loadlin.exe The loadlin executable. <br>
linux The Linux kernel image (the file name may be
different). <br>
initrd.img The initrd filesystem (the file name may be
different or missing).</p>

<p style="margin-top: 1em">You must also specify the
FreeDOS boot sectors available on the FreeDOS
&acirc;sys&acirc; source package with the &acirc;1,
&acirc;2, &acirc;3 option. For the MBR you can use the
sectors image available on <br>
the FreeDOS &acirc;fdisk&acirc; source package.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">makebootfat &acirc;o /dev/hda1
&acirc;E 255 &acirc;1 fat12com.bin &acirc;2 fat16com.bin
&acirc;3 fat32lba.bin &acirc;c kernel.sys &acirc;c
command.com &acirc;c autoexec.bat &acirc;c loadlin.exe
&acirc;c linux &acirc;c initrd.img image MULTI STANDARD USB
BOOTING <br>
The BIOS USB boot support is generally differentiated in
three categories: USB&acirc;HDD, USB&acirc;FDD and
USB&acirc;ZIP.</p>

<p style="margin-top: 1em">The USB&acirc;HDD (Hard Disk
Drive) standard is the preferred choice and it requires the
presence of a partition table in the first sector of the
disk. You can create this type of disk <br>
using the &acirc;m option.</p>

<p style="margin-top: 1em">The USB&acirc;FDD (Floppy Disk
Drive) standard requires the presence of a filesystem
starting from the first sector of the disk without a
partition table. You can create this type of <br>
disk without using the &acirc;m option.</p>

<p style="margin-top: 1em">The USB&acirc;ZIP (ZIP Drive)
standard requires the presence of a device with a very
specific geometry. Specifically, it requires a geometry with
32 sectors and 64 heads. It also <br>
requires the presence of a partition table with only a
bootable partition in the fourth entry. You can create this
type of disk using the &acirc;m and &acirc;Z option.</p>

<p style="margin-top: 1em">Generally these standards are
incompatible, but using the &acirc;m, &acirc;F and &acirc;Z
options you can create a disk compatible with all of
them.</p>

<p style="margin-top: 1em">To use the &acirc;F option, the
MBR image specified must follow the constrains: <br>
&Acirc;&middot; It must start with a standard FAT 3 bytes
jump instruction. <br>
&Acirc;&middot; It must have the bytes from address 3 to 89
(included) unused.</p>

<p style="margin-top: 1em">And example of such image is in
the &acirc;mbrfat.bin&acirc; file.</p>

<p style="margin-top: 1em">For example to create a syslinux
image:</p>

<p style="margin-top: 1em">makebootfat &acirc;o usb
&acirc;Y &acirc;Z &acirc;b ldlinux.bss &acirc;m mbrfat.bin
&acirc;F &acirc;c ldlinux.sys &acirc;c syslinux.cfg &acirc;c
linux &acirc;c initrd.img image <br>
and for a FreeDOS and loadlin image:</p>

<p style="margin-top: 1em">makebootfat &acirc;o usb
&acirc;E 255 &acirc;Z &acirc;1 fat12com.bin &acirc;2
fat16com.bin &acirc;3 fat32chs.bin &acirc;m mbrfat.bin
&acirc;F &acirc;c kernel.sys &acirc;c command.com &acirc;c
autoexec.bat &acirc;c loadlin.exe &acirc;c linux &acirc;c
initrd.img image <br>
Please note that FreeDos has some problems booting from USB.
It works only on very few conditions.</p>

<p style="margin-top: 1em">EXCLUSION <br>
To exclude some files or directories in the image copy, you
can use the &acirc;x option using the same path
specification which are you using for the image
directory.</p>

<p style="margin-top: 1em">For example, if you need to
exclude the &acirc;isolinux&acirc; and
&acirc;syslinux&acirc; subdirectories from the
&acirc;image&acirc; directory you can use the command:</p>

<p style="margin-top: 1em">makebootfat ... &acirc;x
image/isolinux &acirc;x image/syslinux image COPYRIGHT <br>
This file is Copyright (C) 2004, 2005 Andrea Mazzoleni</p>

<p style="margin-top: 1em">SEE ALSO <br>
syslinux(1), mkdosfs(1), dosfsck(1)</p>

<p style="margin-top: 1em">Makebootfat Bootable FAT Disk
Creation(1)</p>
<hr>
</body>
</html>
