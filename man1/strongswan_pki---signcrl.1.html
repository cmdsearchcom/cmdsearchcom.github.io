<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PKI --SIGNCRL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PKI --SIGNCRL(1)</td>
    <td class="head-vol">strongSwan</td>
    <td class="head-rtitle">PKI --SIGNCRL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pki --signcrl - Issue a Certificate Revocation List (CRL) using a CA certificate
  and key
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>--cakey&#x00A0;</b><i>file</i><b>|--cakeyid&#x00A0;</b><i>hex</i>
  <b>--cacert&#x00A0;</b><i>file</i> [<span class="Op"><b>--lifetime</b>
  <i>days</i>]</span> [<span class="Op"><b>--this-update</b>
  <i>datetime</i>]</span> [<span class="Op"><b>--next-update</b>
  <i>datetime</i>]</span> [<span class="Op"><b>--lastcrl</b> <i>crl</i>]</span>
  [<span class="Op"><b>--basecrl</b> <i>crl</i>]</span>
  [<span class="Op"><b>--crluri</b> <i>uri</i>]</span>
  [<span class="Op"><b>--digest</b> <i>digest</i>]</span>
  [<span class="Op"><b>[<b>--reason&#x00A0;</b><i>reason</i>]&#x00A0;[<b>--date&#x00A0;</b><i>ts</i>]&#x00A0;<b>--cert&#x00A0;</b><i>file</i><b>|--serial&#x00A0;</b><i>hex</i></b>]</span>
  [<span class="Op"><b>--outform</b> <i>encoding</i>]</span>
  [<span class="Op"><b>--debug</b> <i>level</i>]</span>
  <b>--options&#x00A0;</b><i>file</i> <b>-h</b> | <b>--help</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This sub-command of <b>pki</b>(1) is used to issue a Certificate Revocation List
  (CRL) using a CA certificate and private key.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Print usage information with a summary of the available
      options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --debug </b><i>level</i></dt>
  <dd class="It-tag">Set debug level, default: 1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-+, --options </b><i>file</i></dt>
  <dd class="It-tag">Read command line options from <i>file</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k, --cakey </b><i>file</i></dt>
  <dd class="It-tag">CA private key file. Either this or <b>--cakeyid</b> is
      required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x, --cakeyid </b><i>hex</i></dt>
  <dd class="It-tag">Smartcard or TPM CA private key object handle in hex format
      with an optional 0x prefix. Either this or <b>--cakey</b> is
    required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c, --cacert </b><i>file</i></dt>
  <dd class="It-tag">CA certificate file. Required.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l, --lifetime </b><i>days</i></dt>
  <dd class="It-tag">Days until the CRL gets a nextUpdate, default: 15. Ignored
      if both an absolute start and end time are given.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-F, --this-update </b><i>datetime</i></dt>
  <dd class="It-tag">Absolute time when the validity of the CRL begins. The
      datetime format is defined by the <b>--dateform</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T, --next-update </b><i>datetime</i></dt>
  <dd class="It-tag">Absolute time when the validity of the CRL end. The
      datetime format is defined by the <b>--dateform</b> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D, --dateform </b><i>form</i></dt>
  <dd class="It-tag">strptime(3) format for the <b>--this-update</b> and
      <b>--next-update</b> options, default: <b>%d.%m.%y %T</b></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a, --lastcrl </b><i>crl</i></dt>
  <dd class="It-tag">CRL of lastUpdate to copy revocations from.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b, --basecrl </b><i>crl</i></dt>
  <dd class="It-tag">Base CRL to create a delta CRL for.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-u, --crluri </b><i>uri</i></dt>
  <dd class="It-tag">Freshest delta CRL URI to include in CRL. Can be used
      multiple times.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-g, --digest </b><i>digest</i></dt>
  <dd class="It-tag">Digest to use for signature creation. One of <i>md5</i>,
      <i>sha1</i>, <i>sha224</i>, <i>sha256</i>, <i>sha384</i>, or
      <i>sha512</i>. The default is determined based on the type and size of the
      signature key.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f, --outform </b><i>encoding</i></dt>
  <dd class="It-tag">Encoding of the created certificate file. Either <i>der</i>
      (ASN.1 DER) or <i>pem</i> (Base64 PEM), defaults to <i>der</i>.</dd>
</dl>
<h2 class="Ss" title="Ss" id="Revoked_Certificates"><a class="selflink" href="#Revoked_Certificates">Revoked
  Certificates</a></h2>
Multiple revoked certificates can be added to the CRL by either providing the
  certificate file or the respective serial number directly. A reason and a
  timestamp can be configured for each revocation (they have to be given before
  each certificate/serial on the command line).
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r, --reason </b><i>reason</i></dt>
  <dd class="It-tag">The reason why the certificate was revoked. One of
      <i>key-compromise</i>, <i>ca-compromise</i>, <i>affiliation-changed</i>,
      <i>superseded</i>, <i>cessation-of-operation</i>, or
      <i>certificate-hold</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d, --date </b><i>ts</i></dt>
  <dd class="It-tag">Revocation date as Unix timestamp. Defaults to the current
      time.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z, --cert </b><i>file</i></dt>
  <dd class="It-tag">Certificate file to revoke.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s, --serial </b><i>hex</i></dt>
  <dd class="It-tag">Hexadecimal encoded serial number of the certificate to
      revoke.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
Revoke a certificate:
<div class="Pp"></div>
<pre>
  pki --signcrl --cacert ca_cert.der --cakey ca_key.der \
      --reason superseded --cert cert.der &gt; crl.der
</pre>
<div class="Pp"></div>
Update an existing CRL with two new revocations, using the certificate's serial
  number, but no reason:
<div class="Pp"></div>
<pre>
  pki --signcrl --cacert ca_cert.der --cakey ca_key.der \
      --lastcrl old_crl.der --serial 0123 --serial 0345 &gt; crl.der
</pre>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>pki</b>(1)</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-08-12</td>
    <td class="foot-os">5.5.3</td>
  </tr>
</table>
</body>
</html>
