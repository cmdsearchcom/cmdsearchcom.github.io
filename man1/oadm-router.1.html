<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OADM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OADM(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OADM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
oadm router - Install a router
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>oadm router</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Install or configure a router
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command helps to setup a router to take edge traffic and balance it to your
  application. With no arguments, the command will check for an existing router
  service called 'router' and create one if it does not exist. If you want to
  test whether a router has already been created add the --dry-run flag and the
  command will exit with 1 if the registry does not exist.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
If a router does not exist with the given name, this command will create a
  deployment configuration and service that will run the router. If you are
  running your router in production, you should pass --replicas=2 or higher to
  ensure you have failover protection.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--create</b>=false
<br/>
 deprecated; this is now the default behavior
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--default-cert</b>=&quot;&quot;
<br/>
 Optional path to a certificate file that be used as the default certificate.
  The file should contain the cert, key, and any CA certs necessary for the
  router to serve the certificate.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--disable-namespace-ownership-check</b>=false
<br/>
 Disables the namespace ownership check and allows different namespaces to claim
  either different paths to a route host or overlapping host names in case of a
  wildcard route. The default behavior (false) to restrict claims to the oldest
  namespace that has claimed either the host or the subdomain. Please be aware
  that if namespace ownership checks are disabled, routes in a different
  namespace can use this mechanism to 'steal' sub-paths for existing domains.
  This is only safe if route creation privileges are restricted, or if all the
  users can be trusted.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--dry-run</b>=false
<br/>
 If true, show the result of the operation without performing it.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--expose-metrics</b>=false
<br/>
 If true, attempts to run an extra container in the pod to expose metrics - the
  image will either be set depending on the router implementation or provided
  with --metrics-image.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host</b>=&quot;&quot;
<br/>
 If the underlying router implementation connects with an external host, this is
  the external host's hostname.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-http-vserver</b>=&quot;&quot;
<br/>
 If the underlying router implementation uses virtual servers, this is the name
  of the virtual server for HTTP connections.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-https-vserver</b>=&quot;&quot;
<br/>
 If the underlying router implementation uses virtual servers, this is the name
  of the virtual server for HTTPS connections.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-insecure</b>=false
<br/>
 If the underlying router implementation connects with an external host over a
  secure connection, this causes the router to skip strict certificate
  verification with the external host.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-internal-ip</b>=&quot;&quot;
<br/>
 If the underlying router implementation requires the use of a specific network
  interface to connect to the pod network, this is the IP address of that
  internal interface.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-partition-path</b>=&quot;&quot;
<br/>
 If the underlying router implementation uses partitions for control boundaries,
  this is the path to use for that partition.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-password</b>=&quot;&quot;
<br/>
 If the underlying router implementation connects with an external host, this is
  the password for authenticating with the external host.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-private-key</b>=&quot;&quot;
<br/>
 If the underlying router implementation requires an SSH private key, this is
  the path to the private key file.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-username</b>=&quot;&quot;
<br/>
 If the underlying router implementation connects with an external host, this is
  the username for authenticating with the external host.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--external-host-vxlan-gw</b>=&quot;&quot;
<br/>
 If the underlying router implementation requires VxLAN access to the pod
  network, this is the gateway address that should be used in cidr format.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--force-subdomain</b>=&quot;&quot;
<br/>
 A router path format to force on all routes used by this router (will ignore
  the route host value)
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--host-network</b>=true
<br/>
 If true (the default), then use host networking rather than using a separate
  container network stack.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--host-ports</b>=true
<br/>
 If true (the default), when not using host networking host ports will be
  exposed.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--images</b>=&quot;openshift/origin-${component}:${version}&quot;
<br/>
 The image to base this router on - ${component} will be replaced with --type
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--labels</b>=&quot;router=&lt;name&gt;&quot;
<br/>
 A set of labels to uniquely identify the router and its components.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--latest-images</b>=false
<br/>
 If true, attempt to use the latest images for the router instead of the latest
  release.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--max-connections</b>=&quot;&quot;
<br/>
 Specifies the maximum number of concurrent connections.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--metrics-image</b>=&quot;&quot;
<br/>
 If --expose-metrics is specified this is the image to use to run a sidecar
  container in the pod exposing metrics. If not set and --expose-metrics is true
  the image will depend on router implementation.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-o</b>, <b>--output</b>=&quot;&quot;
<br/>
 Output results as yaml or json instead of executing, or use name for succint
  output (resource/name).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--output-version</b>=&quot;&quot;
<br/>
 The preferred API versions of the output objects
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--ports</b>=&quot;80:80,443:443&quot;
<br/>
 A comma delimited list of ports or port pairs to expose on the router pod. The
  default is set for HAProxy. Port pairs are applied to the service and to host
  ports (if specified).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--replicas</b>=1
<br/>
 The replication factor of the router; commonly 2 when high availability is
  desired.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--router-canonical-hostname</b>=&quot;&quot;
<br/>
 CanonicalHostname is the external host name for the router that can be used as
  a CNAME for the host requested for this route. This value is optional and may
  not be set in all cases.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--secrets-as-env</b>=false
<br/>
 If true, use environment variables for master secrets.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--selector</b>=&quot;&quot;
<br/>
 Selector used to filter nodes on deployment. Used to run routers on a specific
  set of nodes.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--service-account</b>=&quot;router&quot;
<br/>
 Name of the service account to use to run the router pod.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--stats-password</b>=&quot;&quot;
<br/>
 If the underlying router implementation can provide statistics this is the
  requested password for auth. If not set a password will be generated.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--stats-port</b>=1936
<br/>
 If the underlying router implementation can provide statistics this is a hint
  to expose it on this port. Specify 0 if you want to turn off exposing the
  statistics.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--stats-user</b>=&quot;admin&quot;
<br/>
 If the underlying router implementation can provide statistics this is the
  requested username for auth.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--subdomain</b>=&quot;&quot;
<br/>
 The template for the route subdomain exposed by this router, used for routes
  that are not externally specified. E.g.
  '${name}-${namespace}.apps.mycompany.com'
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--type</b>=&quot;haproxy-router&quot;
<br/>
 The type of router to use - if you specify --images this flag may be ignored.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 Path to a cert. file for the certificate authority
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # Check the default router (&quot;router&quot;)
  oadm router --dry-run
  
  # See what the router would look like if created
  oadm router -o yaml
  
  # Create a router with two replicas if it does not exist
  oadm router router-west --replicas=2
  
  # Use a different router image
  oadm router region-west --images=myrepo/somerouter:mytag
  
  # Run the router with a hint to the underlying implementation to _not_ expose statistics.
  oadm router router-west --stats-port=0
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>oadm(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
