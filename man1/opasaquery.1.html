<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:28:33 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p style="margin-top: 1em">opasaquery(1) Master map:
IFSFFCLIRG (Man Page) opasaquery(1)</p>

<p style="margin-top: 1em">NAME <br>
opasaquery</p>

<p style="margin-top: 1em">(All) Performs various queries
of the subnet manager/subnet agent and provides detailed
fabric information.</p>

<p style="margin-top: 1em">opareport and opareports can
provide a more powerful tool, however, in some cases
opasaquery is preferred, especially when dealing with
virtual fabrics, service records, and mul&acirc; <br>
ticast.</p>

<p style="margin-top: 1em">The command opasaquery is
installed on all hosts as part of the Intel(R) Omni-Path
Fabric Host Software, but it is also included in Intel(R)
Omni-Path Fabric Suite FastFabric <br>
Toolset.</p>

<p style="margin-top: 1em">By default, opasaquery uses the
first active port on the local system. However, if the node
is connected to more than one fabric (for example, a
subnet), the Intel(R) Omni-Path <br>
Host Fabric Interface (HFI) and port may be specified to
select the fabric whose SA is to be queried.</p>

<p style="margin-top: 1em">Syntax <br>
opasaquery [-v [-v] [-v]] [-I] [-h hfi] [-p port] [-o type]
[-l lid] <br>
[-t type] [-s guid] [-n guid] [-g guid] [-k pkey] [-i
vfIndex] <br>
[-S serviceId] [-L sl] [-u gid] [-m gid] [-d name] [-P
&rsquo;guid guid&rsquo;] <br>
[-G &rsquo;gid gid&rsquo;] [-a &rsquo;sguid...;
dguid...&rsquo;] [-A#8217#160;&rsquo;sgid...;
dgid...&rsquo;]</p>

<p style="margin-top: 1em">Options <br>
--help Produces full help text.</p>

<p style="margin-top: 1em">-v/--verbose <br>
Returns verbose output. A second invocation activates openib
debugging, a third invocation activates libibumad
debugging.</p>

<p style="margin-top: 1em">-I/--IB Issues query in legacy
InfiniBand* format.</p>

<p style="margin-top: 1em">-h/--hfi hfi <br>
HFI, numbered 1..n. Using 0 specifies that the -p port is a
system-wide port number. Default is 0.</p>

<p style="margin-top: 1em">-p/--port port <br>
Port, numbered 1..n. If 0, then port is a first active.
Default is first active.</p>

<p style="margin-top: 1em">-o/--output type <br>
Output type for query (default is node). See Output Types
for details.</p>

<p style="margin-top: 1em">-l/--lid lid <br>
Query a specific LID.</p>

<p style="margin-top: 1em">-t/--type node_type <br>
Query by node type. See Node Types for details.</p>

<p style="margin-top: 1em">-s/--sysguid system_image_guid
<br>
Query by system image GUID.</p>

<p style="margin-top: 1em">-n/--nodeguid node_guid <br>
Query by node GUID.</p>

<p style="margin-top: 1em">-g/--portguid port_guid <br>
Query by port GUID.</p>

<p style="margin-top: 1em">-k/--pkey pkey <br>
Query a specific PKey.</p>

<p style="margin-top: 1em">-i/--vfindex vfIndex <br>
Query a specific vfindex.</p>

<p style="margin-top: 1em">-S/--serviceId serviceId <br>
Query a specific service ID.</p>

<p style="margin-top: 1em">-L/--SL SL <br>
Query by service level.</p>

<p style="margin-top: 1em">-u/--portgid port_gid <br>
Query by port GID. See GIDs for details.</p>

<p style="margin-top: 1em">-m/--mcgid multicast_gid <br>
Query by multicast GID. See GIDs for details.</p>

<p style="margin-top: 1em">-d/--desc node_description <br>
Query by node name/description.</p>

<p style="margin-top: 1em">-P/--guidpair guid guid <br>
Query by a pair of port GUIDs.</p>

<p style="margin-top: 1em">-G/--gidpair gid gid <br>
Query by a pair of GIDs. See GIDs for details.</p>

<p style="margin-top: 1em">-a/--guidlist sguid ...;dguid
... <br>
Query by a list of port GUIDs.</p>

<p style="margin-top: 1em">-A/--gidlist sgid ...;dgid ...
<br>
Query by a list of GIDs. See GIDs for details.</p>

<p style="margin-top: 1em">-h and -p options permit a
variety of selections: <br>
-h 0 First active port in system (default).</p>

<p style="margin-top: 1em">-h 0 -p 0 First active port in
system.</p>

<p style="margin-top: 1em">-h x First active port on HFI
x.</p>

<p style="margin-top: 1em">-h x#8217#160;-p 0 <br>
First active port on HFI x.</p>

<p style="margin-top: 1em">-h 0 -p y Port y#8217#160;within
system (no matter which ports are active).</p>

<p style="margin-top: 1em">-h x#8217#160;-p y <br>
HFI x, port y.</p>

<p style="margin-top: 1em">Node Types <br>
fi Fabric Interface</p>

<p style="margin-top: 1em">sw Switch</p>

<p style="margin-top: 1em">GIDs <br>
Specify a 64-bit subnet and 64-bit interface ID in the
form:</p>

<p style="margin-top: 1em">subnet: interface</p>

<p style="margin-top: 1em">NOTE: In the following example,
the GID corresponds to a PortGID. In this case, the
interface ID coincides with the lower 64-bits of the GUID of
the card. The interface ID will <br>
be different if the GID is a MGID (that is, multicast GID).
See opafm.xml for MGID examples.</p>


<p style="margin-top: 1em">0xfe80000000000000:0x00117500a0000380</p>

<p style="margin-top: 1em">Output Types <br>
Default is node.</p>

<p style="margin-top: 1em">classportinfo <br>
classportinfo of the SA.</p>

<p style="margin-top: 1em">systemguid <br>
List of system image GUIDs.</p>

<p style="margin-top: 1em">nodeguid List of node GUIDs.</p>

<p style="margin-top: 1em">portguid List of port GUIDs.</p>

<p style="margin-top: 1em">lid List of LIDs.</p>

<p style="margin-top: 1em">desc List of node
descriptions/names.</p>

<p style="margin-top: 1em">path List of path records.</p>

<p style="margin-top: 1em">node List of node records.</p>

<p style="margin-top: 1em">portinfo List of port info
records.</p>

<p style="margin-top: 1em">sminfo List of SM info
records.</p>

<p style="margin-top: 1em">swinfo List of switch info
records.</p>

<p style="margin-top: 1em">link List of link records.</p>

<p style="margin-top: 1em">scsc List of SC to SC mapping
table records.</p>

<p style="margin-top: 1em">slsc List of SL to SC mapping
table records.</p>

<p style="margin-top: 1em">scsl List of SC to SL mapping
table records.</p>

<p style="margin-top: 1em">scvlt List of SC to VLt table
records.</p>

<p style="margin-top: 1em">scvlnt List of SC to VLnt table
records.</p>

<p style="margin-top: 1em">vlarb List of VL arbitration
table records.</p>

<p style="margin-top: 1em">pkey List of PKey table
records.</p>

<p style="margin-top: 1em">service List of service
records.</p>

<p style="margin-top: 1em">mcmember List of multicast
member records.</p>

<p style="margin-top: 1em">inform List of inform info
records.</p>

<p style="margin-top: 1em">linfdb List of switch linear
forwarding database (FDB) records.</p>

<p style="margin-top: 1em">mcfdb List of switch multicast
FDB records.</p>

<p style="margin-top: 1em">trace List of trace records.</p>

<p style="margin-top: 1em">vfinfo List of vFabrics.</p>

<p style="margin-top: 1em">vfinfocsv List of vFabrics in
CSV format.</p>

<p style="margin-top: 1em">vfinfocsv2 <br>
List of vFabrics in CSV format with enums.</p>

<p style="margin-top: 1em">fabricinfo <br>
Summary of fabric devices.</p>

<p style="margin-top: 1em">quarantine <br>
List of quarantined nodes.</p>

<p style="margin-top: 1em">conginfo List of Congestion Info
Records.</p>

<p style="margin-top: 1em">swcongset List of Switch
Congestion Settings.</p>

<p style="margin-top: 1em">swportcong <br>
List of Switch Port Congestion Settings.</p>

<p style="margin-top: 1em">hficongset <br>
List of HFI Congestion Settings.</p>

<p style="margin-top: 1em">hficongcon <br>
List of HFI Congestion Control Settings.</p>

<p style="margin-top: 1em">bfrctrl List of buffer control
tables.</p>

<p style="margin-top: 1em">cableinfo List of Cable Info
records.</p>

<p style="margin-top: 1em">portgroup List of AR Port Group
records.</p>

<p style="margin-top: 1em">portgroupfdb <br>
List of AR Port Group FWD records.</p>

<p style="margin-top: 1em">The vfinfocsv and vfinfocsv2
output formats are designed to make it easier to script
vfinfo queries. One line is output per vFabric of the
form:</p>


<p style="margin-top: 1em">name:index:pkey:sl:mtu:rate:optionflag</p>

<p style="margin-top: 1em">The only difference between
these two formats is how the MTU and rate are output.
vfinfocsv outputs MTU and rate in human/text readable
format. vfinfocsv2 outputs MTU and rate as <br>
enumerations defined for the SMA protocol. The opagetvf
command is based on this capability of opasaquery. For more
information, see opagetvf</p>

<p style="margin-top: 1em">Example <br>
opasaquery -o desc -t fi <br>
opasaquery -o portinfo -l 2 <br>
opasaquery -o sminfo <br>
opasaquery -o pkey</p>

<p style="margin-top: 1em">Input Options vs. Output
Permitted <br>
The following list shows the input (assorted query by
options) and outputs (-o) that are permitted.</p>

<p style="margin-top: 1em">None</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, path, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb, vfinfo, vfin&acirc; <br>
focsv, vfinfocsv2, scsc, slsc, scvlt, scnlmt, linfdb,
classportinfo, fabricinfo, quarantine, conginfo, swcongset,
swportcong, hficongset, hficongcon, bfrctl, <br>
cableinfo, portgroup, portgroupfdb</p>

<p style="margin-top: 1em">-o output not permitted <br>
trace</p>

<p style="margin-top: 1em">-t node_type</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, node</p>

<p style="margin-top: 1em">-o output not permitted <br>
portinfo, sminfo, swinfo, vlarb, pkey, service, mcmember,
inform, linfdb, mcfdb, trace, vfinfo, vfinfocsv,
vfinfocsv2</p>

<p style="margin-top: 1em">-l lid</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, path, node,
portinfo, swinfo, slvl, vlarb, pkey, service, mcmember,
linfdb, mcfdb</p>

<p style="margin-top: 1em">-o output not permitted <br>
sminfo, link, inform, trace, vfinfo, vfinfocsv,
vfinfocsv2</p>

<p style="margin-top: 1em">-k pkey</p>

<p style="margin-top: 1em">-o output permitted <br>
mcmember, path, vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemimageguid, nodeguid, portguid, lid, desc, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-i vfindex</p>

<p style="margin-top: 1em">-o output permitted <br>
vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemimageguid, nodeguid, portguid, lid, desc, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-s system_image_guid</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, node</p>

<p style="margin-top: 1em">-o output not permitted <br>
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb, trace, vfinfo, vfinfocsv,
vfinfocsv2</p>

<p style="margin-top: 1em">-n node_guid</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, node</p>

<p style="margin-top: 1em">-o output not permitted <br>
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb, trace, vfinfo, vfinfocsv,
vfinfocsv2</p>

<p style="margin-top: 1em">-g port_guid</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, path, node,
service, mcmember, inform, trace</p>

<p style="margin-top: 1em">-o output not permitted <br>
portinfo, sminfo, swinfo, link, vlarb, pkey, linfdb, mcfdb,
vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-u port_gid</p>

<p style="margin-top: 1em">-o output permitted <br>
path, service, mcmember, inform, trace</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, node, portinfo,
sminfo, swinfo, link, vlarb, pkey, linfdb, mcfdb, vfinfo,
vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-m multicast_gid</p>

<p style="margin-top: 1em">-o output permitted <br>
mcmember, vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, path, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
inform, linfdb, mcfdb, trace</p>

<p style="margin-top: 1em">-d name</p>

<p style="margin-top: 1em">-o output permitted <br>
systemguid, nodeguid, portguid, lid, desc, node</p>

<p style="margin-top: 1em">-o output not permitted <br>
trace</p>

<p style="margin-top: 1em">-P port_guid_pair</p>

<p style="margin-top: 1em">-o output permitted <br>
path, trace</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, node, portinfo,
sminfo, swinfo, link, vlarb, pkey, service, mcmember,
inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-S serviceId</p>

<p style="margin-top: 1em">-o output permitted <br>
path, vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemimageguid, nodeguid, portguid, lid, desc, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-L SL</p>

<p style="margin-top: 1em">-o output permitted <br>
path, vfinfo, vfinfocsv, vfinfocsv2</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemimageguid, nodeguid, portguid, lid, desc, node,
portinfo, sminfo, swinfo, link, vlarb, pkey, service,
mcmember, inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-G gid_pair</p>

<p style="margin-top: 1em">-o output permitted <br>
path, trace</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, node, portinfo,
sminfo, swinfo, link, vlarb, pkey, service, mcmember,
inform, linfdb, mcfdb</p>

<p style="margin-top: 1em">-a port_guid_list</p>

<p style="margin-top: 1em">-o output permitted <br>
path</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, node, portinfo,
sminfo, swinfo, link, vlarb, pkey, service, mcmember,
inform, linfdb, mcfdb, trace</p>

<p style="margin-top: 1em">-A gid_list</p>

<p style="margin-top: 1em">-o output permitted <br>
path</p>

<p style="margin-top: 1em">-o output not permitted <br>
systemguid, nodeguid, portguid, lid, desc, node, portinfo,
sminfo, swinfo, link, vlarb, pkey, service, mcmember,
inform, linfdb, mcfdb, trace</p>

<p style="margin-top: 1em">Copyright(C) 2015-2016 Intel
Corporation opasaquery(1)</p>
<hr>
</body>
</html>
