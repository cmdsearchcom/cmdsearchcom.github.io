<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>YUBICO-PIV-TOOL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">YUBICO-PIV-TOOL(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">YUBICO-PIV-TOOL(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
yubico-piv-tool - Yubico PIV tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>yubico-piv-tool</b> [ <i>OPTIONS</i>]...
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
yubico-piv-tool 1.4.3
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">Print help and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--full-help</b></dt>
  <dd class="It-tag">Print help, including hidden options, and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V</b>, <b>--version</b></dt>
  <dd class="It-tag">Print version and exit</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b>, <b>--verbose</b>[=<i>INT</i>]</dt>
  <dd class="It-tag">Print more information (default=`0')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r</b>, <b>--reader</b>=<i>STRING</i></dt>
  <dd class="It-tag">Only use a matching reader (default=`Yubikey')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-k</b>, <b>--key</b>[=<i>STRING</i>]</dt>
  <dd class="It-tag">Management key to use
      (default=`010203040506070801020304050607080102030405060708')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-a</b>, <b>--action</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Action to take (possible values=&quot;version&quot;,
      &quot;generate&quot;, &quot;set-mgm-key&quot;, &quot;reset&quot;,
      &quot;pin-retries&quot;, &quot;import-key&quot;,
      &quot;import-certificate&quot;, &quot;set-chuid&quot;,
      &quot;request-certificate&quot;, &quot;verify-pin&quot;,
      &quot;change-pin&quot;, &quot;change-puk&quot;, &quot;unblock-pin&quot;,
      &quot;selfsign-certificate&quot;, &quot;delete-certificate&quot;,
      &quot;read-certificate&quot;, &quot;status&quot;,
      &quot;test-signature&quot;, &quot;test-decipher&quot;,
      &quot;list-readers&quot;, &quot;set-ccc&quot;, &quot;write-object&quot;,
      &quot;read-object&quot;, &quot;attest&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Multiple actions may be given at once and will be executed
      in order for example <b>--action</b>=<i>verify-pin</i>
      <b>--action</b>=<i>request-certificate</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b>, <b>--slot</b>=<i>ENUM</i></dt>
  <dd class="It-tag">What key slot to operate on (possible
      values=&quot;9a&quot;, &quot;9c&quot;, &quot;9d&quot;, &quot;9e&quot;,
      &quot;82&quot;, &quot;83&quot;, &quot;84&quot;, &quot;85&quot;,
      &quot;86&quot;, &quot;87&quot;, &quot;88&quot;, &quot;89&quot;,
      &quot;8a&quot;, &quot;8b&quot;, &quot;8c&quot;, &quot;8d&quot;,
      &quot;8e&quot;, &quot;8f&quot;, &quot;90&quot;, &quot;91&quot;,
      &quot;92&quot;, &quot;93&quot;, &quot;94&quot;, &quot;95&quot;,
      &quot;f9&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">9a is for PIV Authentication 9c is for Digital Signature
      (PIN always checked) 9d is for Key Management 9e is for Card
      Authentication (PIN never checked) 82-95 is for Retired Key
    Management</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-A</b>, <b>--algorithm</b>=<i>ENUM</i></dt>
  <dd class="It-tag">What algorithm to use (possible values=&quot;RSA1024&quot;,
      &quot;RSA2048&quot;, &quot;ECCP256&quot;, &quot;ECCP384&quot;
      default=`RSA2048')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b>, <b>--hash</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Hash to use for signatures (possible
      values=&quot;SHA1&quot;, &quot;SHA256&quot;, &quot;SHA384&quot;,
      &quot;SHA512&quot; default=`SHA256')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n</b>, <b>--new-key</b>=<i>STRING</i></dt>
  <dd class="It-tag">New management key to use for action set-mgm-key</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pin-retries</b>=<i>INT</i></dt>
  <dd class="It-tag">Number of retries before the pin code is blocked</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--puk-retries</b>=<i>INT</i></dt>
  <dd class="It-tag">Number of retries before the puk code is blocked</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i</b>, <b>--input</b>=<i>STRING</i></dt>
  <dd class="It-tag">Filename to use as input, - for stdin (default=`-')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o</b>, <b>--output</b>=<i>STRING</i></dt>
  <dd class="It-tag">Filename to use as output, - for stdout (default=`-')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-K</b>, <b>--key-format</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Format of the key being read/written (possible
      values=&quot;PEM&quot;, &quot;PKCS12&quot;, &quot;GZIP&quot;,
      &quot;DER&quot;, &quot;SSH&quot; default=`PEM')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p</b>, <b>--password</b>=<i>STRING</i></dt>
  <dd class="It-tag">Password for decryption of private key file</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S</b>, <b>--subject</b>=<i>STRING</i></dt>
  <dd class="It-tag">The subject to use for certificate request</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">The subject must be written as:
      /CN=host.example.com/OU=test/O=example.com/</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--serial</b>=<i>INT</i></dt>
  <dd class="It-tag">Serial number of the self-signed certificate</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--valid-days</b>=<i>INT</i></dt>
  <dd class="It-tag">Time (in days) until the self-signed certificate expires
      (default=`365')</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-P</b>, <b>--pin</b>=<i>STRING</i></dt>
  <dd class="It-tag">Pin/puk code for verification</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-N</b>, <b>--new-pin</b>=<i>STRING</i></dt>
  <dd class="It-tag">New pin/puk code for changing</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--pin-policy</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Set pin policy for action generate or import-key (possible
      values=&quot;never&quot;, &quot;once&quot;, &quot;always&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--touch-policy</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Set touch policy for action generate, import-key or
      set-mgm-key (possible values=&quot;never&quot;, &quot;always&quot;,
      &quot;cached&quot;)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--id</b>=<i>INT</i></dt>
  <dd class="It-tag">Id of object for write/read object</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f</b>, <b>--format</b>=<i>ENUM</i></dt>
  <dd class="It-tag">Format of data for write/read object (possible
      values=&quot;hex&quot;, &quot;base64&quot;, &quot;binary&quot;
      default=`hex')</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
For more information about what's happening --verbose can be added to any
  command. For much more information --verbose=2 may be used.
<div style="height: 1.00em;">&#x00A0;</div>
Display what version of the application is running on the YubiKey:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -a version
<div style="height: 1.00em;">&#x00A0;</div>
Generate a new ECC-P256 key on device in slot 9a, will print the public key on
  stdout:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -s 9a -A ECCP256 -a generate
<div style="height: 1.00em;">&#x00A0;</div>
Generate a certificate request with public key from stdin, will print the
  resulting request on stdout:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -s 9a -S '/CN=foo/OU=test/O=example.com/' -P 123456 \
<br/>
 -a verify -a request
<div style="height: 1.00em;">&#x00A0;</div>
Generate a self-signed certificate with public key from stdin, will print the
  certificate, for later import, on stdout:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -s 9a -S '/CN=bar/OU=test/O=example.com/' -P 123456 \
<br/>
 -a verify -a selfsign
<div style="height: 1.00em;">&#x00A0;</div>
Import a certificate from stdin:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -s 9a -a import-certificate
<div style="height: 1.00em;">&#x00A0;</div>
Set a random chuid, import a key and import a certificate from a PKCS12 file
  with password test, into slot 9c:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -s 9c -i test.pfx -K PKCS12 -p test -a set-chuid \
<br/>
 -a import-key -a import-cert
<div style="height: 1.00em;">&#x00A0;</div>
Import a certificate which is larger than 2048 bytes and thus requires
  compression in order to fit:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 openssl x509 -in cert.pem -outform DER | gzip -9 &gt; der.gz
<br/>
 yubico-piv-tool -s 9c -i der.gz -K GZIP -a import-cert
<div style="height: 1.00em;">&#x00A0;</div>
Change the management key used for administrative authentication:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -n 0807605403020108070605040302010807060504030201 \
<br/>
 -a set-mgm-key
<div style="height: 1.00em;">&#x00A0;</div>
Delete a certificate in slot 9a:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -a delete-certificate -s 9a
<div style="height: 1.00em;">&#x00A0;</div>
Show some information on certificates and other data:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -a status
<div style="height: 1.00em;">&#x00A0;</div>
Read out the certificate from a slot and then run a signature test:
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -a read-cert -s 9a
<br/>
 yubico-piv-tool -a verify-pin -P 123456 -a test-signature -s 9a
<div style="height: 1.00em;">&#x00A0;</div>
Import a key into slot 85 (only available on YubiKey 4) and set the touch policy
  (also only available on YubiKey 4):
<div style="height: 1.00em;">&#x00A0;</div>
<br/>
 yubico-piv-tool -a import-key -s 85 --touch-policy=always -i key.pem</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 2017</td>
    <td class="foot-os">yubico-piv-tool 1.4.3</td>
  </tr>
</table>
</body>
</html>
