<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>COURIERMLM(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">COURIERMLM(1)</td>
    <td class="head-vol">Double Precision, Inc.</td>
    <td class="head-rtitle">COURIERMLM(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
couriermlm - The Courier mailing list manager
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 11.00ex; text-indent: -11.00ex;"><b>couriermlm</b>
  { <i>command</i>} {<i>directory</i>} [<i>arg</i>...]</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>couriermlm</b> is the Courier mail server's mailing list manager. This
  command sets up, maintains, and manages mailing lists. <b>couriermlm</b>
  automatically handles requests to subscribe and unsubscribe list members,
  detects undeliverable addresses and removes them from the subscription rolls.
  Mailing lists managed by <b>couriermlm</b> require zero human administrative
  oversight. <b>couriermlm</b> supports digests, write-only posting aliases, and
  moderated mailing lists.
<h2 class="Ss" title="Ss" id="CREATING_A_MAILING_LIST"><a class="selflink" href="#CREATING_A_MAILING_LIST">CREATING
  A MAILING LIST</a></h2>
Anyone can use <b>couriermlm</b>, not just the system administrator. The Courier
  mail server mail server translates an address list-name@domain as a local
  address with a corresponding <b></b><b>dot-courier</b>(5)[1] file. Anyone that
  can install a <b></b><b>dot-courier</b>(5)[1] file, and can schedule
  <b>cron</b>(8) jobs, can run a <b>couriermlm</b> mailing list.
<div class="Pp"></div>
Note that the system administrator can optionally remove the
  <b></b><b>dot-courier</b>(5)[1] support from the the Courier mail server.
  <b>couriermlm</b> will not work in that case.
<div class="Pp"></div>
Setting up a mailing list consists of the following steps:
<div class="Pp"></div>
Run <b>couriermlm create</b>
<div style="margin-left: 4.00ex;">Use this command to create a directory where
  <b>couriermlm</b> keeps all mailing list related files.</div>
<div class="Pp"></div>
Configure the mailing list
<div style="margin-left: 4.00ex;">The <b>couriermlm create</b> command
  initializes the mailing list subdirectory with some default template
  responses. It is necessary to customize them for your mailing list, and it may
  be necessary to issue some additional commands in order to configure
  appropriate mailing list options -- such as enabling unrestricted posting
  privileges, and enabling moderation.</div>
<div class="Pp"></div>
Create <b></b><b>dot-courier</b>(5)[1] files
<div style="margin-left: 4.00ex;">Set up to run <b>couriermlm</b> to distribute
  mailing list messages, and process requests.</div>
<div class="Pp"></div>
Set up <b>cron</b>(8)
<div style="margin-left: 4.00ex;">You need to set up <b>cron</b>(8) jobs to run
  the <b>couriermlm hourly</b> and <b>couriermlm daily</b> commands, which
  perform regular mailing list maintenance.</div>
<div class="Pp"></div>
Back up subscription lists
<div style="margin-left: 4.00ex;">As part of your daily job you should also run
  the <b>export</b> command, in order to back up the mailing list subscriber
  information. In the event that the mailing list database gets corrupted or
  lost, you can restore it from this backup file. See the <b>export</b> command
  for more information.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
Setting up a digest for the mailing list requires additional steps. See &quot;
  <b>Setting up a mailing list digest</b>[2]&quot; below for more information.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
The first step is to run the following command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm create  <i>directory</i> ADDRESS=<i>list@domain</i>
</pre>
</div>
<div class="Pp"></div>
<i>directory</i> is the mailing list directory that will be managed by
  <b>couriermlm</b>. This directory should not be created in advance, this
  command creates this directory, and initializes it.
<div class="Pp"></div>
<i>list@domain</i> is the mailing list's address, the address that sends
  messages to the mailing list.
<div class="Pp"></div>
An additional setting, URL may also be specified:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm create  <i>directory</i> ADDRESS=<i>list@domain</i> URL=<i>url</i>
</pre>
</div>
<div class="Pp"></div>
&#x201C;url&#x201D; would be the URL of the WebMLM web page for this mailing
  list. See <b></b><b>webmlmd</b>(1)[3] for more information.
<div class="Pp"></div>
The directory created by <b>couriermlm create</b> is initialized to contain a
  number of text files that <b>couriermlm</b> sends back as replies to
  administrative commands. It is necessary to edit these template files and
  adjust the text in those files for this mailing list. All template filenames
  end with .tmpl, and their contents are self explanatory. Some important
  template files are:
<div class="Pp"></div>
help.tmpl
<div style="margin-left: 4.00ex;">This text is returned in response to the help
  command. This text must be modified depending upon whether this mailing list
  is a moderated mailing list, has a digest version, or if any other non-default
  configuration options are set for the mailing list.</div>
<div class="Pp"></div>
sub.tmpl
<div style="margin-left: 4.00ex;">This is the reply that's sent back in response
  to a subscription request. Less important is unsub.tmpl, which is the response
  to a request to unsubscribe.</div>
<div class="Pp"></div>
sub2.tmpl
<div style="margin-left: 4.00ex;">This is the successful subscription
  confirmation. A brief overview of the mailing list might be appropriate
  here.</div>
<div class="Pp"></div>
<b>couriermlm</b> has rudimentary support for non-English templates. The
  <b>couriermlm create</b> command has a single, optional parameter,
  <b>--lang=</b> <b></b><i>suffix</i> The option must be specified after the
  mailing list directory's name:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm create  <i>directory</i> --lang=es ADDRESS=<i>list@domain</i> URL=<i>url</i>
</pre>
</div>
<div class="Pp"></div>
The templates for the stock text files come from /usr/lib/courier/couriermlm.
  This directory contains all the *.tmpl and *.html template files that
  <b>couriermlm create</b> installs in the new mailing list <i>directory</i>.
<div class="Pp"></div>
Translated versions of template files are installed in the same directory,
  /usr/lib/courier/couriermlm. The translated version of <i>file</i> must be
  installed as <i>file</i>.<i>suffix</i>, for example: help.tmpl.es is the
  translated version of help.tmpl, with the &#x201C;es&#x201D; suffix.
<div class="Pp"></div>
The <b>--lang=</b><b></b><i>suffix</i> option installs the the .suffix version
  of each text template file, if available. If not, the stock English template
  file gets copied, as usual.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
Do not remove the English template files, even if you never use them. They must
  be left in place, in /usr/lib/courier/couriermlm, for <b>couriermlm create</b>
  to work correctly.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
Example:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm create /home/lists/users-list --lang=es ...
</pre>
</div>
<div class="Pp"></div>
This example installs the *.es versions of mailing list template files. Only the
  stock, English template files come with the Courier mail server. This
  mechanism only provides an easy integration ability with template files from
  other sources.
<div class="Pp"></div>
There are some additional configuration files that can be modified to suit your
  taste:
<div class="Pp"></div>
headeradd
<div style="margin-left: 4.00ex;">This file can be initialized to contain any
  mail headers that will be automatically added to every mailing list message.
  The contents of this file are simply prepended to every message that goes out.
  Blank lines are not allowed.</div>
<div class="Pp"></div>
headerdel
<div style="margin-left: 4.00ex;">This file lists any headers that will be
  automatically removed from every mailing list message before it's sent. List
  each header one per line, including the : character. For example, to remove
  all <i>Received:</i> and <i>Date:</i> headers from every message, initialize
  this file to contain the following two lines:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
Received:
Date:
</pre>
</div>
</div>
<div class="Pp"></div>
Both the headeradd and headerdel files can be used to implement a popular
  feature of setting the replies to every message to go to the mailing list.
  Having &quot;Reply-To:&quot; in headerdel, removes any existing
  <i>Reply-To:</i> header, and then having &quot;Reply-To:
  <i>list@domain</i>&quot; in headeradd appends a fixed <i>Reply-To:</i> header
  to every message.
<div class="Pp"></div>
The <i>create</i> command also creates the following subdirectories in the
  mailing list directory:
<div class="Pp"></div>
sublist
<div style="margin-left: 4.00ex;">This subdirectory has the database files that
  contain the mailing list's subscription list.</div>
<div class="Pp"></div>
unsublist
<div style="margin-left: 4.00ex;">This subdirectory stores files that contain
  information about addresses that have been unsubscribed from the mailing list.
  This information might be of some use when tracking down an old subscription.
  The contents of this directory are not automatically purged, you must set up
  your own purging mechanism for this directory.</div>
<div class="Pp"></div>
commands, commands.dat
<div style="margin-left: 4.00ex;">These directories store temporary files that
  contain pending (unconfirmed) commands for the mailing list manager. The
  <b>couriermlm</b> commands <i>hourly</i> and <i>daily</i> must be executed
  regularly in order to periodically purge stale entries.</div>
<div class="Pp"></div>
modqueue
<div style="margin-left: 4.00ex;">Messages awaiting moderator approval (for
  moderated lists).</div>
<div class="Pp"></div>
archive
<div style="margin-left: 4.00ex;">Messages received by this mailing list will be
  stored here, in addition to being forwarded to subscribers. <b>couriermlm</b>
  does not automatically do any purging on this subdirectory, you must set up
  your own archiving mechanism that cleans out this subdirectory.</div>
<div class="Pp"></div>
The last step involves installing a couple of <b></b><b>dot-courier</b>(5)[1]
  files that run <b>couriermlm</b> to receive mailing list messages and
  administrative commands. The mailing list address, <i>list@domain</i>,
  corresponds to some <b></b><b>dot-courier</b>(5)[1] file. For example, if your
  system account is <i>john</i>, and your mail domain is <i>example.com</i>,
  then the <b></b><b>dot-courier</b>(5)[1] file for the mailing list
  <i>&lt;john-list@example.com&gt;</i> is $HOME/.courier-list.
<div class="Pp"></div>
Let's say that the <b></b><b>dot-courier</b>(5)[1] file is $HOME/.courier-list.
  To properly support the mailing list, the following
  <b></b><b>dot-courier</b>(5)[1] files will have to be initialized as follows:
<div class="Pp"></div>
$HOME/.courier-list
<div style="margin-left: 4.00ex;">This file should be initialized to contain the
  following delivery instruction:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
| /usr/bin/couriermlm msg  <i>directory</i>
</pre>
</div>
<i>directory</i> is the created mailing list directory.</div>
<div class="Pp"></div>
$HOME/.courier-list-owner
<div style="margin-left: 4.00ex;">This file should contain the appropriate
  delivery instructions for forwarding all mail addressed to
  &lt;list-owner@domain&gt; to the address of the owner of the mailing list.
  This can be another E-mail address, or a mailbox specification.</div>
<div class="Pp"></div>
$HOME/.courier-list-default
<div style="margin-left: 4.00ex;">This file should be initialized to contain the
  following delivery instruction:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
| /usr/bin/couriermlm ctlmsg  <i>directory</i>
</pre>
</div>
<i>directory</i> is the created mailing list directory. This
  <b></b><b>dot-courier</b>(5)[1] file provides support for all other addresses
  of the form &lt;list- <i>command</i>@domain&gt;, where <i>command</i> is a
  mailing list administrative command. Commands are sent to this mailing list
  manager by sending a message to one of several special addresses, described
  more fully in &quot; <b>Mailing list commands</b>[4]&quot;, below.</div>
<h2 class="Ss" title="Ss" id="MANUAL_COMMANDS"><a class="selflink" href="#MANUAL_COMMANDS">MANUAL
  COMMANDS</a></h2>
<b>couriermlm</b> may also be run manually from the command line as follows:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
/usr/bin/couriermlm  <i>command</i> <i>directory</i> [ options... ]
</pre>
</div>
<div class="Pp"></div>
<i>command</i> is a command from the following list. <i>directory</i> is the
  mailing list directory. The commands are:
<div class="Pp"></div>
create
<div style="margin-left: 4.00ex;">Create a mailing list.</div>
<div class="Pp"></div>
update
<div style="margin-left: 4.00ex;">Update/restore mailing list templates. The
  original, default, mailing list message template files (*.tmpl and
  *.tmpl.html) are reinstalled into the mailing list directory. This command
  must be processed for every mailing list directory after upgrading to the
  Courier server version 0.55, or later, from earlier versions (but see below).
  <b>couriermlm</b> in version 0.55 of the Courier mail server uses updated
  templates files, which must be installed in every mailing list directory.
  Although the names of many template files have not changed, the embedded
  markup codes in the template files work differently.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 1.Begin by making a backup copy of all *.tmpl
  files in the existing <b>couriermlm</b> mailing list directory.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 2.Run the &#x201C;update&#x201D; command on
  the list directory.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 3.Review the backed up template files,
  identify your customized changes, then retype them into new template files
  installed by the &#x201C;update&#x201D; command.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;"> 4.Proceed to the next mailing list
  directory.</div>
<div style="height: 1.00em;">&#x00A0;</div>
Yes, this is going to be a pain. This is the first overhaul of
  <b>couriermlm</b>'s infrastructure in many years. Once a decade, some elbow
  grease must be sacrificed in the name of progress. It's not the end of the
  world.
<div style="height: 1.00em;">&#x00A0;</div>
In an extreme emergency, preserve the <b>couriermlm</b> from the previous
  version of the Courier mail server. Mass-update all existing lists' .courier-
  <i>list</i> and .courier- <i>list</i>-default files to run the old
  <b>couriermlm</b>. Then, migrate each mailing list on a predetermined
  schedule. After migrating each list, put the default path back into the list's
  .courier files.
<div style="height: 1.00em;">&#x00A0;</div>
Keep in mind the following issues, while migrating the lists:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;The help.tmpl template file is usually
  the one that gets customized the most. In most cases, large bits and pieces of
  this file, that document certain list options that do not apply to this list,
  must be removed.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;There are several new template files,
  including a number of *.html files that refer to new HTML-formatted responses
  from <b>couriermlm</b>, and the WebMLM interface.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">&#x2022;Be aware of updated mail headers
  declared in several template files. The MIME character set is now given as
  utf-8. Some templates no longer contain the Mime-Version and Subject headers.
  The Subject headers are moved to separate template files. Many existing
  template files now contain both a plain text and an HTML-formatted version of
  the <b>couriermlm</b> response. Always scroll to the end of each template
  file, to reveal any appended HTML portion of template's text.</div>
</div>
<div class="Pp"></div>
set
<div style="margin-left: 4.00ex;">Set mailing list options.</div>
<div class="Pp"></div>
sub
<div style="margin-left: 4.00ex;">Manually subscribe an address to the mailing
  list.</div>
<div class="Pp"></div>
unsub
<div style="margin-left: 4.00ex;">Manually unsubscribe an address from the
  mailing list.</div>
<div class="Pp"></div>
lsub
<div style="margin-left: 4.00ex;">List all the subscribers to this mailing
  list.</div>
<div class="Pp"></div>
laliases
<div style="margin-left: 4.00ex;">List write-only aliases for this mailing
  list.</div>
<div class="Pp"></div>
export
<div style="margin-left: 4.00ex;">Export mailing list subscriber
  information.</div>
<div class="Pp"></div>
import
<div style="margin-left: 4.00ex;">Import mailing list subscriber
  information.</div>
<div class="Pp"></div>
ctlmsg
<div style="margin-left: 4.00ex;">Receive and interpret a control message.</div>
<div class="Pp"></div>
info
<div style="margin-left: 4.00ex;">Display a subscription record.</div>
<div class="Pp"></div>
msg
<div style="margin-left: 4.00ex;">Post a message to the mailing list.</div>
<div class="Pp"></div>
hourly
<div style="margin-left: 4.00ex;">Perform hourly maintenance. It is necessary to
  set up a <b>cron</b>(8) job to execute the <i>hourly</i> command once an
  hour.</div>
<div class="Pp"></div>
daily
<div style="margin-left: 4.00ex;">Perform daily maintenance. It is necessary to
  set up a <b>cron</b>(8) job to execute the <i>daily</i> command once a
  day.</div>
<div class="Pp"></div>
digest
<div style="margin-left: 4.00ex;">Create a digest. See &quot;<b>Setting up a
  mailing list digest</b>[2]&quot; below for more information.</div>
<h2 class="Ss" title="Ss" id="MANUAL_SUBSCRIPTION_MANAGEMENT"><a class="selflink" href="#MANUAL_SUBSCRIPTION_MANAGEMENT">MANUAL
  SUBSCRIPTION MANAGEMENT</a></h2>
The sub, unsub, lsub, laliases, export, and import commands allow manual
  subscription list management. Normally, subscription-related commands are done
  by sending an appropriate mailing list command, see &quot; <b>Mailing List
  Commands</b>[4]&quot;, below.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm sub  <i>directory</i> <i>user@domain</i>
</pre>
</div>
<div class="Pp"></div>
This command adds the address &lt;user@domain&gt; to the subscription list.
  <b>couriermlm</b> will now read a free-form comment or a note from standard
  input, terminated by an end-of-file (usually CTRL-D). The free-form comment is
  stored in the subscription database, together with the address, and is shown
  by the &quot;info&quot; command.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm unsub  <i>directory</i> <i>user@domain</i>
</pre>
</div>
<div class="Pp"></div>
This command remove the address &lt;user@domain&gt; from the subscription rolls.
  <b>couriermlm</b> will also read a free-form comment, which is added to the
  subscription record. After removing this address from the subscription rolls,
  its subscription record is archived in the <i>directory/unsublist</i>
  directory.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm lsub  <i>directory</i>
</pre>
</div>
<div class="Pp"></div>
This command lists all the addresses subscribed to the list, on standard output,
  one per line.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm laliases  <i>directory</i>
</pre>
</div>
<div class="Pp"></div>
This command lists all write-only aliases that have been subscribed to the list,
  together with the subscriber address that added each alias. See &quot;
  <b>Write-Only Aliases</b>[5]&quot; for more information.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm export  <i>directory</i>
</pre>
</div>
<div class="Pp"></div>
The <i>export</i> command lists the contents of the subscription database on
  standard output. The export command produces the following output format:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
<i>address</i>
<i>subscription information</i>
 ...
<i>address</i>
<i>subscription information</i>
 ...
</pre>
</div>
<div class="Pp"></div>
&quot; <i>address</i>&quot;, is an address subscribed to the mailing list. This
  is followed by its corresponding subscription information, usually a copy of
  the subscription request that was used to add the address to the mailing list.
  The subscription information is terminated by a line containing a single
  period. Any lines in the subscription information that begin with a period
  have an extra period prepended to them.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm import  <i>directory</i>
</pre>
</div>
<div class="Pp"></div>
The <i>import</i> command reads on standard input a previously exported mailing
  list subscription database, and adds those addresses to the indicated mailing
  list.
<div class="Pp"></div>
It is highly recommended to make a regular backup of subscriber information
  using the <i>export</i> command, in the event that the subscription database
  gets corrupted. In which case the <i>import</i> command can be used to rebuild
  the subscription database, in absence of any direct backups of the database
  files.
<h2 class="Ss" title="Ss" id="SETTING_MAILING_LIST_OPTIONS"><a class="selflink" href="#SETTING_MAILING_LIST_OPTIONS">SETTING
  MAILING LIST OPTIONS</a></h2>
The <i>set</i> command sets various list options:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm set  <i>directory</i> <i>option=value</i> <i>option=value...</i>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
Setting the ADDRESS or the URL options, described below, automatically updates
  the contents of the headeradd configuration file. Its existing
  &#x201C;List-&#x201D; headers are removed and replaced by updated
  &#x201C;List-&#x201D; headers that reflect the revised list address or URL.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
One or more options can be set with the same command. The available options are:
<div class="Pp"></div>
ADDRESS= <i>address</i>
<div style="margin-left: 4.00ex;">The base E-mail address for this mailing
  list.</div>
<div class="Pp"></div>
URL= <i>address</i>
<div style="margin-left: 4.00ex;">The URL of WebMLM web page for this mailing
  list.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
WebMLM determines its own URL automatically, by reading its HTTP headers. This
  setting is used by <b>couriermlm</b>, which has no knowledge of the web
  server's configuration, and needs to know the correct URL to insert into
  generated messages.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
CASESENSITIVE= <i>flag</i>
<div style="margin-left: 4.00ex;">If flag is &quot;1&quot;, the userid portion
  of E-mail addresses are case-sensitive. The domain address portion is always
  case-insensitive. The default setting is &quot;0&quot; making both userid and
  domain address portions of E-mail addresses case-insensitive.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
Be careful when changing this setting on an active list. Changing this option to
  &#x201C;CASESENSITIVE=1&#x201D;, forces all existing subscribers to make sure
  their addresses are lowercase-only, otherwise they will no longer be
  recognized as subscribers. Changing this option to
  &#x201C;CASESENSITIVE=0&#x201D; blocks all subscribed addresses that have
  uppercase characters in the userid portion of their E-mail address. They will
  continue to receive mailing list traffic, but unable to post messages to the
  list, or unsubscribe from it. It will not be possible to unsubscribe those
  addresses even by running the <b>couriermlm</b> command manually.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
DIGEST= <i>directory</i>
<div style="margin-left: 4.00ex;">Enable digests. <i>directory</i> is the
  pathname to the previously-createddigest list directory. See &quot; <b>Setting
  up a mailing list digest</b>[2]&quot; below for more information.</div>
<div class="Pp"></div>
KEYWORD= <i>keyword</i>
<div style="margin-left: 4.00ex;">Set the subject line keyword for mailing list
  messages. If set, <b>couriermlm</b> inserts &quot;[keyword]&quot; into the
  subject of every mailing list message, to aid sorting by the recipients.</div>
<div class="Pp"></div>
MAXBOUNCES= <i>n</i>
<div style="margin-left: 4.00ex;">Maximum number of bounce notifications sent by
  the <i>hourly</i> command, in order to prevent the mail system from being
  overloaded. The default is 20 bounce notifications. Any unsent notifications
  will be carried over to the next hourly job.</div>
<div class="Pp"></div>
MAXMODNOTICES= <i>n</i>
<div style="margin-left: 4.00ex;">Maximum number of moderation reminders sent by
  the <i>hourly</i> command, in order to prevent the mail system from being
  overloaded. The default is 20 moderation reminders. Any unsent reminders will
  be carried over to the next hourly job.</div>
<div class="Pp"></div>
MAXFETCHSIZE= <i>K</i>
<div style="margin-left: 4.00ex;">Maximum size, in kilobytes, of a response to
  the <i>fetch</i> command. The default is 100Kb. This option is used to
  minimize the impact of abusive requests for the entire archive, with a forged
  return address.</div>
<div class="Pp"></div>
NAME= <i>name</i>
<div style="margin-left: 4.00ex;">The name that's listed on the return address
  of administrative messages. Note that if <i>name</i> contains spaces, you
  should quote this argument in the shell. The default value is &quot;Courier
  Mailing List Manager&quot;.</div>
<div class="Pp"></div>
NOBOZOS= <i>flag</i>
<div style="margin-left: 4.00ex;">If flag is &quot;0&quot; <b>couriermlm</b>
  will not attempt to block misdirected subscribes and unsubscribes that are
  sent to the mailing list's posting address. If flag is &quot;1&quot; (the
  default), those kinds of messages will be bounced appropriately.</div>
<div class="Pp"></div>
NODSN= <i>flag</i>
<div style="margin-left: 4.00ex;">If flag is &quot;1&quot; <b>couriermlm</b>
  will use a Delivery Status Notification setting of &quot;never&quot; when it
  sends confirmation requests and help messages: this should reduce the amount
  of useless failure notifications generated when <b>couriermlm</b> dutifully
  replies to spam received by the mailing list administrative addresses, i.e.
  -(un)subscribe and -help. If flag is &quot;0&quot; (the default), a DSN
  setting of &quot;fail&quot; will be used. Please see <b>sendmail</b>(1)'s -n
  option for more details on the DSN setting.</div>
<div class="Pp"></div>
POST= <i>option</i>
<div style="margin-left: 4.00ex;">Set posting options. <i>option</i> is one of
  three values: &quot;subscribers&quot; - only subscribers may post messages to
  this mailing list (this is the default); &quot;all&quot; - anyone can post
  messages to this mailing list; &quot;mod&quot; - only subscribers may post,
  and messages are sent to the list owner for approval (moderation).</div>
<div class="Pp"></div>
POSTARCHIVE= <i>option</i>
<div style="margin-left: 4.00ex;">Set access to archived messages. <i>option</i>
  is either: &quot;all&quot; - Anyone can access the mailing list archive; or
  &quot;subscribers&quot; - only subscribers can access the archive. The default
  is &quot;all&quot;.</div>
<div class="Pp"></div>
PURGEARCHIVE= <i>d</i>
<div style="margin-left: 4.00ex;">Purge archived mailing list messages after
  <i>d</i> days. The default is 0 days - messages are never removed from the
  archive subdirectory.</div>
<div class="Pp"></div>
PURGEBOUNCE= <i>d</i>
<div style="margin-left: 4.00ex;">Wait <i>d</i> days for the probe message, that
  automatically unsubscribes undeliverable addresses, to bounce (default: 14
  days). Probe messages are sent three days (default) after the first message to
  an address bounces.</div>
<div class="Pp"></div>
PURGECMD= <i>h</i>
<div style="margin-left: 4.00ex;">Purge unconfirmed subscribe/unsubscribe
  requests after <i>h</i> hours (default: 48 hours).</div>
<div class="Pp"></div>
REMODERATE= <i>h</i>
<div style="margin-left: 4.00ex;">Resend a moderation reminder after <i>h</i>
  hours (default: 12 hours).</div>
<div class="Pp"></div>
REPORTADDR= <i>address</i>
<div style="margin-left: 4.00ex;">Mail daily reports of new and removed
  subscribers to this address. Must be set in order to receive reports. Provide
  an empty address to stop reporting.</div>
<div class="Pp"></div>
SIMPLECONFIRM= <i>n</i>
<div style="margin-left: 4.00ex;">If <i>n</i> is 1, confirmation requests may be
  acknowledged without adding &#x201C;yes&#x201D; to the subject line.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
The text in sub.tmpl, unsub.tmpl, and help.tmpl may need adjusting.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
SUBSCRIBE= <i>option</i>
<div style="margin-left: 4.00ex;">Set subscription options. <i>option</i> is
  either &quot;all&quot;, meaning that anyone can subscribe, or &quot;mod&quot;,
  meaning moderated subscription requests, where all subscription requests are
  sent to the mailing list owner for approval. The default is
  &quot;all&quot;.</div>
<div class="Pp"></div>
STARTPROBE= <i>n</i>
<div style="margin-left: 4.00ex;">Send a probe to a bouncing address <i>n</i>
  days after receiving the first bounce. Basically this means that an address
  must bounce for at least <i>n</i> days before it gets a probe message. The
  default is 3 days.</div>
<div class="Pp"></div>
Option names and settings are case sensitive.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
<div class="Pp"></div>
If you set up a digest list, you MUST set identical POSTARCHIVE option for both
  the main list and the digest list.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
<h2 class="Ss" title="Ss" id="DISPLAYING_A_SUBSCRIPTION_RECORD"><a class="selflink" href="#DISPLAYING_A_SUBSCRIPTION_RECORD">DISPLAYING
  A SUBSCRIPTION RECORD</a></h2>
The info command displays the subscription record for the requested address:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
couriermlm info  <i>directory</i> <i>user@domain</i>
</pre>
</div>
<div class="Pp"></div>
This displays the subscription record for &quot; <i>user@domain</i>&quot;, which
  typically consists of a copy of the initial subscription request, and
  confirmation.
<h2 class="Ss" title="Ss" id="SENDING_MESSAGES_TO_THE_MAILING_LIST"><a class="selflink" href="#SENDING_MESSAGES_TO_THE_MAILING_LIST">SENDING
  MESSAGES TO THE MAILING LIST</a></h2>
The <i>msg</i> commands reads an E-mail message on standard input, and mails the
  contents of the message to the mailing list's subscribers.
<div class="Pp"></div>
If the POST option is set to &quot;subscribers&quot;, the message is rejected
  unless the address in its From: header is a subscriber to this mailing list.
<div class="Pp"></div>
Control files headeradd and headerdel are read, and are applied to the message,
  as described previously.
<h2 class="Ss" title="Ss" id="MAILING_LIST_COMMANDS"><a class="selflink" href="#MAILING_LIST_COMMANDS">MAILING
  LIST COMMANDS</a></h2>
Mailing list commands can be sent via E-mail to <b>couriermlm</b> by sending a
  message to &lt;list- <i>command</i>@domain&gt;. The &quot;default&quot;
  <b></b> <b>dot-courier</b>(5)[1] file runs <b>couriermlm</b> to receive mail
  for all addresses of this form.
<div class="Pp"></div>
<b>couriermlm</b> reads the <b>DEFAULT</b> environment variable, which is set by
  the Courier mail server, that indicates the specific command. The available
  commands are:
<div class="Pp"></div>
help
<div style="margin-left: 4.00ex;">A simple autoresponder. <b>couriermlm</b>
  mails the sender the contents of the help.tmpl file.</div>
<div class="Pp"></div>
subscribe
<div style="margin-left: 4.00ex;">A request to subscribe to this mailing list.
  <b>couriermlm</b> reads the sender's address in order to determine what
  address to subscribe.</div>
<div class="Pp"></div>
subscribe- <i>name=domain</i>
<div style="margin-left: 4.00ex;">Explicitly specify the address to subscribe to
  the mailing list, instead of using a return address. In the previous example,
  sending a message addressed to
  &lt;my-widgets-subscribe-john=domain.com@example.com&gt; would result in a
  subscription request for &lt;john=domain.com&gt;. Any unusual punctuation
  characters in the address must be replaced by a plus sign, followed by two
  hexadecimal digits that represent the punctuation character's ASCII
  code.</div>
<div class="Pp"></div>
unsubscribe
<div style="margin-left: 4.00ex;">A request to unsubscribe to this mailing
  list.</div>
<div class="Pp"></div>
unsubscribe- <i>name=domain</i>
<div style="margin-left: 4.00ex;">Explicitly specify the address to unsubscribe
  from the mailing list.</div>
<div class="Pp"></div>
alias-subscribe
<div style="margin-left: 4.00ex;">Set up a write-only alias (see below).</div>
<div class="Pp"></div>
alias-subscribe- <i>name=domain</i>
<div style="margin-left: 4.00ex;">Explicitly specify the subscriber address for
  which a write-only alias needs to be set up.</div>
<div class="Pp"></div>
There are other commands that are used internally for maintaining the mailing
  list.
<h2 class="Ss" title="Ss" id="WRITE-ONLY_ALIASES"><a class="selflink" href="#WRITE-ONLY_ALIASES">WRITE-ONLY
  ALIASES</a></h2>
Write-only E-mail aliases can send messages to the mailing list, but they do not
  receive any mailing list messages themselves. A write-only alias can be set up
  by any subscriber. Only one write-only alias is allowed per subscribed E-mail
  address. Write-only aliases are not needed for mailing list that has the
  POST=all option set.
<div class="Pp"></div>
To set up a write-only alias, the subscriber sends a
  <b>couriermlm</b>alias-subscribe command. The subscriber's E-mail address can
  be explicitly specified in a similar manner as the subscribe command.
<div class="Pp"></div>
The subject line of the E-mail message must contain the E-mail write-only alias
  to be set up, and nothing else. <b>couriermlm</b> responds with a confirmation
  request, just like when subscribing to the list. This request must be
  acknowledged in the same way.
<div class="Pp"></div>
A subscriber's write-only alias can be changed at any time by repeating this
  procedure. The new alias replaces the previous one. To prevent abuse, there's
  a limit of at most one alias-subscribe command every 30 minutes.
<div class="Pp"></div>
Leave the subject of the E-mail message blank in order to remove an existing
  write-only alias,
<h2 class="Ss" title="Ss" id="SETTING_UP_A_MAILING_LIST_DIGEST"><a class="selflink" href="#SETTING_UP_A_MAILING_LIST_DIGEST">SETTING
  UP A MAILING LIST DIGEST</a></h2>
<b>couriermlm</b> supports mailing list digests. Mailing list digests are
  created as a second, separate, mailing list. The <i>create</i> command
  initializes a second mailing list directory, and then additional configuration
  takes place which links the main mailing list to the digest list.
<div class="Pp"></div>
If the mailing list address is list-address@example.com, the address of the
  digest version of the mailing list is usually list-address-digest@example.com,
  but it doesn't have to be this address. The only requirement is that the
  directory for the digest version of the mailing list must reside on the same
  file system as the directory for the mailing list itself, and both must be
  owned by the same userid.
<div class="Pp"></div>
To set up a mailing list digest, first proceed with the steps to create the
  mailing list itself. After the mailing list is created and configured, proceed
  as follows:
<div class="Pp"></div>
Create the digest list directory
<div style="margin-left: 4.00ex;">Execute the <i>create</i> command to create
  the digest version of the list:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
/usr/bin/couriermlm create \
    <i>/path/to/digest/list/directory</i> \
   ADDRESS= <i>list-address-digest@example.com</i>
</pre>
</div>
Use the full pathname to the mailing list directory, and the address of the
  digest version of the mailing list.</div>
<div class="Pp"></div>
Configure the digest list
<div style="margin-left: 4.00ex;">Execute the <i>set</i> command to set any
  appropriate options for the digest list. There one important differences to
  note: messages are not posted to the digest list directly, so there is no
  moderation option, however the digest version of the list can have moderated
  subscription requests.</div>
<div class="Pp"></div>
Link the two lists
<div style="margin-left: 4.00ex;">Set the DIGEST option for the main mailing
  list, specifying the directory of the digest list. This keyword lets
  <b>couriermlm</b> know that a digest version is available.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<div>&#x00A0;</div>
<b>Note</b>
<div>&#x00A0;</div>
<div>&#x00A0;</div>
You MUST set identical POSTARCHIVE option for both the main list, and the digest
  list.
<div style="height: 0.50em;">&#x00A0;</div>
</div>
</div>
<div class="Pp"></div>
Create <b></b><b>dot-courier</b>(5)[1] files
<div style="margin-left: 4.00ex;">It is necessary to create
  <b></b><b>dot-courier</b>(5)[1] files for the digest list just like the main
  list, except for some important differences, which are noted below.</div>
<div class="Pp"></div>
Create <b>cron</b>(8) jobs
<div style="margin-left: 4.00ex;">It is also necessary to create cron jobs for
  the digest list exactly like the main list, to run the <i>hourly</i> and
  <i>daily</i> cleanup. It's possible to set up one set of cron jobs to run
  <i>hourly</i> and <i>daily</i> cleanups consecutively for both lists.</div>
<div class="Pp"></div>
Create a <i>digest</i> <b>cron</b>(8) job
<div style="margin-left: 4.00ex;">The <i>digest</i> creates and distributes the
  digest version of the list. It can be executed by a <b>cron</b>(8) job, or the
  command can be executed manually.</div>
<div class="Pp"></div>
The main mailing list is supported by three <b></b><b>dot-courier</b>(5)[1]
  files, as previously described: the posting address, the owner forwarding
  address, and the default address that handles administrative control messages.
  In the following example, the names $HOME/.courier-list,
  $HOME/.courier-list-owner, and $HOME/.courier-list-default are used to
  represent each one of these files, and the following names are used to
  represent the <b></b><b>dot-courier</b>(5)[1] files that correspond to the
  digest version of the mailing list: $HOME/.courier-list-digest,
  $HOME/.courier-list-digest-owner, and $HOME/.courier-list-digest-default.
  Note, however, that the digest version of the mailing list can have any name,
  not necessary the name of the list, followed by &quot;digest&quot;.
<div class="Pp"></div>
The contents of both $HOME/.courier-list$HOME/.courier-list-digest must be the
  same. Sending a message to the digest address should really end up sending a
  message to the main mailing list. Do not put the address of the digest mailing
  list directory in $HOME/.courier-list-digest, instead specify the address of
  the main mailing list directory. Just copy $HOME/.courier-list to
  $HOME/.courier-list-digest.
<div class="Pp"></div>
However, the contents of $HOME/.courier-list-digest-default must specify the
  directory of the digest version of the mailing list. The digest list is
  managed separately from the main list, it has its own subscriber list that is
  separate from the list of subscribers to the main list.
  $HOME/.courier-list-default can simply be copied to
  $HOME/.courier-list-digest-default, then the directory can be changed in the
  latter.
<div class="Pp"></div>
$HOME/.courier-list-owner may use the same mailing list owner address as
  $HOME/.courier-list-digest-owner, or it can specify a different address. The
  both the digest and the main mailing list can have the same mailing list
  owner/moderator, or have a different owner/moderator.
<div class="Pp"></div>
The following command must be executed in order to link the two lists together:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
/usr/bin/couriermlm set \
     <i>/path/to/main/list/directory</i> \
    DIGEST= <i>/path/to/digest/list/directory</i>
</pre>
</div>
<div class="Pp"></div>
Setting the DIGEST option on the main list lets <b>couriermlm</b> know that a
  digest version is available. The DIGEST option must either use an absolute
  pathname, or a pathname that's relative to the main list directory (NOT the
  current directory).
<div class="Pp"></div>
When the DIGEST option is set, messages are simultaneously distributed to the
  mailing list's subscribers, saved in the archive subdirectory of the main
  list, then placed in the modqueue subdirectory of the digest list. Digest list
  do not employ moderation -- any moderation must take place on the main list --
  so the modqueue subdirectory is recycled to compile individual messages for
  the digest.
<div class="Pp"></div>
Finally, something needs to be done in order to actually distribute the digest
  to the digest list's subscribers. This is done by running the following
  command:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 4.00ex;">
<pre>
/usr/bin/couriermlm digest  <i>/path/to/digest/directory</i> <i>N</i> <i>H</i>
</pre>
</div>
<div class="Pp"></div>
This command creates a digest, and sends it out. The <i>N</i> and <i>H</i>
  arguments are optional. The digest is created only if there's at least
  <i>N</i> messages that are waiting to be sent in the digest list, or if the
  oldest message is at least <i>H</i> hours old. Both options default to 0, so
  the default behavior is to send a digest with all unsent messages.
<div class="Pp"></div>
Note that when the digest is created, ALL unsent messages are packaged into the
  digest, even if some messages are more recent than the time interval specified
  by the <i>H</i> option. A <b>cron</b>(8) job can be set up to run the
  <i>digest</i> command, or run it manually.
<div class="Pp"></div>
<b>couriermlm</b> automatically provides the From:, To: headers on a message
  digest. Additional headers may be specified by the headeradd file in the
  digest list directory. The headerdel file has no effect. Note that the
  individual messages in the digest are copies of the messages from the main
  mailing list, and thus have the headeradd and headerdel headers processed from
  the main mailing list directory.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
<b>couriermlm</b> will not work if the Courier mail server's support for
  <b></b><b>dot-courier</b>(5)[1] extensions is disabled.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b></b><b>courier</b>(8)[6], <b></b><b>dot-courier</b>(5)[1],
  <b></b><b>webmlmd</b>(1)[3].
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
<b>Sam Varshavchik</b>
<div style="margin-left: 4.00ex;">Author</div>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"> 1.</dt>
  <dd class="It-tag"><b>dot-courier</b>(5)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/dot-courier.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 2.</dt>
  <dd class="It-tag">Setting up a mailing list digest</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/#digest</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 3.</dt>
  <dd class="It-tag"><b>webmlmd</b>(1)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/webmlmd.html</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 4.</dt>
  <dd class="It-tag">Mailing list commands</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/#command</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 5.</dt>
  <dd class="It-tag">Write-Only Aliases</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/#wonly</div>
<dl class="Bl-tag">
  <dt class="It-tag"> 6.</dt>
  <dd class="It-tag"><b>courier</b>(8)</dd>
</dl>
<div style="margin-left: 4.00ex;">[set
  $man.base.url.for.relative.links]/courier.html</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/27/2015</td>
    <td class="foot-os">Courier Mail Server</td>
  </tr>
</table>
</body>
</html>
