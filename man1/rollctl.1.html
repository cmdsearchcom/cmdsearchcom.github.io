<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:35:51 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ROLLCTL(1) User Contributed Perl Documentation
ROLLCTL(1)</p>

<p style="margin-top: 1em">NAME <br>
rollctl - Send commands to the DNSSEC-Tools rollover
daemon</p>

<p style="margin-top: 1em">SYNOPSIS <br>
rollctl [options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The rollctl command sends commands to the DNSSEC-Tools
rollover daemon, rollerd. Only one option may be specified
on a command line.</p>

<p style="margin-top: 1em">In most cases, rollerd will send
a response to rollctl. rollctl will print a success or
failure message, as appropriate.</p>

<p style="margin-top: 1em">If rollctl is run as a
PAR-packed command, it will use its own local copy of the
dnssec-tools.conf file. This file will be found in the
package directory.</p>

<p style="margin-top: 1em">OPTIONS <br>
The following options are handled by rollctl.</p>

<p style="margin-top: 1em">-display <br>
Starts the rollover status GUI.</p>

<p style="margin-top: 1em">-dspub zone <br>
Indicates that zone&rsquo;s parent has published a new DS
record for zone.</p>

<p style="margin-top: 1em">Multiple zones can be specified
on the command line. For instance, this command will send
the dspub command to rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -dspub example1.com
example2.com example3.com</p>

<p style="margin-top: 1em">-dspuball <br>
Indicates that DS records have been published for all zones
in phase 5 of KSK rollover.</p>

<p style="margin-top: 1em">-group <br>
Indicates that the specified command should apply to a zone
group instead of a zone. Consequently, the specified zone
must actually be a zone group. This option must be <br>
used in conjunction with another command.</p>

<p style="margin-top: 1em">This option only applies to the
following commands: -dspub, -rollksk, -rollzone, -rollzsk,
and -skipzone. This command will have no effect if it is
given to other other <br>
commands.</p>

<p style="margin-top: 1em">-halt [now] <br>
Cleanly halts rollerd execution. If the optional now
parameter is given, then rollerd will be halted immediately,
rather than allowing it to complete its currently queued
<br>
operations.</p>

<p style="margin-top: 1em">-logfile logfile <br>
Sets the rollerd log file to logfile. This must be a valid
logging file, meaning that if logfile already exists, it
must be a regular file. The only exceptions to this are <br>
if logfile is /dev/stdout or /dev/tty.</p>

<p style="margin-top: 1em">-loglevel loglevel <br>
Sets the rollerd logging level to loglevel. This must be one
of the valid logging levels defined in rollmgr.pm(3).</p>

<p style="margin-top: 1em">If a logging level is not
specified, then the list of valid levels will be printed and
rollctl will exit. The list is given in both text and
numeric forms.</p>

<p style="margin-top: 1em">-logtz logtz <br>
Sets the rollerd logging timezone to loglevel. This must be
either gmt (for Greenwich Mean Time or local (for the
host&rsquo;s local time.)</p>

<p style="margin-top: 1em">-mergerrfs rollrec0 ... rollrecN
<br>
Tells rollerd to merge the specified rollrec files with its
active rollrec file. The names of the rollrec files must not
contain colons.</p>

<p style="margin-top: 1em">-nodisplay <br>
Stops the rollover status GUI.</p>

<p style="margin-top: 1em">-phasemsg length <br>
length is the default length of phase-related log messages
used by rollerd. The valid levels are &quot;long&quot; and
&quot;short&quot;, with &quot;long&quot; being the default
value.</p>

<p style="margin-top: 1em">The long message length means
that a phase description will be included with some log
messages. For example, the long form of a message about ZSK
rollover phase 3 will look <br>
like this: &quot;ZSK phase 3 (Waiting for old zone data to
expire from caches)&quot;.</p>

<p style="margin-top: 1em">The short message length means
that a phase description will not be included with some log
messages. For example, the short form of a message about ZSK
rollover phase 3 will <br>
look like this: &quot;ZSK phase 3&quot;.</p>

<p style="margin-top: 1em">-rollall <br>
Resumes rollover for all zones in the current rollrec file
that have been suspended. (&quot;skip&quot; zones are
suspended.)</p>

<p style="margin-top: 1em">-rollallksks <br>
Initiates KSK rollover for all the zones defined in the
current rollrec file that aren&rsquo;t currently in
rollover.</p>

<p style="margin-top: 1em">-rollallzsks <br>
Initiates ZSK rollover for all the zones defined in the
current rollrec file that aren&rsquo;t currently in
rollover.</p>

<p style="margin-top: 1em">-rollksk zone <br>
Initiates KSK rollover for the zone named by zone.</p>

<p style="margin-top: 1em">Multiple zones can be specified
on the command line. For instance, this command will send
the rollksk command to rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -rollksk example1.com
example2.com example3.com</p>

<p style="margin-top: 1em">-rollrec rollrec_file <br>
Sets the rollrec file to be processed by rollerd to
rollrec_file.</p>

<p style="margin-top: 1em">-rollzone zone <br>
Resumes rollover for the suspended zone named by zone.</p>

<p style="margin-top: 1em">Multiple zones can be specified
on the command line. For instance, this command will send
the rollzone command to rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -rollzone example1.com
example2.com example3.com</p>

<p style="margin-top: 1em">-rollzsk zone <br>
Initiates rollover for the zone named by zone.</p>

<p style="margin-top: 1em">Multiple zones can be specified
on the command line. For instance, this command will send
the rollzsk command to rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -rollzsk example1.com
example2.com example3.com</p>

<p style="margin-top: 1em">-runqueue <br>
Wakes up rollerd and has it run its queue of rollrec
entries.</p>

<p style="margin-top: 1em">-shutdown <br>
Synonym for -halt.</p>

<p style="margin-top: 1em">-signzone zone <br>
Signs zone&rsquo;s zonefile without performing any rollover
actions. The zone is signed with the keys most recently used
to sign the zone. No new keys will be generated.</p>

<p style="margin-top: 1em">-signzones [all | active] <br>
Signs the zonefiles of zones managed by rollerd, without
performing any rollover actions. If the all option is given,
then all of rollerd&rsquo;s zones will be signed. If the
<br>
active option is given, then only those zones which
aren&rsquo;t in the skip stage will be signed. The zones are
signed with the keys most recently used to sign each zone.
No new <br>
keys will be generated.</p>

<p style="margin-top: 1em">-skipall <br>
Suspends rollover for all zones in the current rollrec
file.</p>

<p style="margin-top: 1em">-skipzone zone <br>
Suspends rollover for the zone named by zone.</p>

<p style="margin-top: 1em">Multiple zones can be specified
on the command line. For instance, this command will send
the skipzone command to rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -skipzone example1.com
example2.com example3.com</p>

<p style="margin-top: 1em">-sleeptime seconds <br>
Sets rollerd&rsquo;s sleep time to seconds seconds.
sleeptime must be an integer at least as large as the
$MIN_SLEEP value in rollerd.</p>

<p style="margin-top: 1em">-splitrrf new-rrf zone0 ...
zoneN <br>
Tells rollerd to move a set of rollrec entries from the
current rollrec file into a new file. The new file is named
in the new-rrf parameter. The rollrec entries whose <br>
names correspond to the zone0 to zoneN list are moved to the
new file. The name of the new rollrec file and the zone
names must not contain colons.</p>

<p style="margin-top: 1em">-status <br>
Has rollerd write several of its operational parameters to
its log file. The parameters are also reported to rollctl,
which prints them to the screen.</p>

<p style="margin-top: 1em">-zonegroup [zone-group] <br>
Requests information about zone groups from rollerd. If the
optional zone-group argument is not given, then rollerd will
return a list of the defined zone groups and the <br>
number of zones in each. If a zone-group is specified, then
rollerd will return a list of the zones in that group.</p>

<p style="margin-top: 1em">(While this is using the term
&quot;zone&quot;, it is actually referring to the name of
the rollrec entries. For a particular rollrec entry, the
rollrec name is usually the same as <br>
the zone name, but this is not a requirement.)</p>

<p style="margin-top: 1em">-zonelog <br>
Set the logging level for the specified zone. The new
logging level is only for the current execution of rollerd
and is not saved to the active rollrec file.</p>

<p style="margin-top: 1em">The arguments for this command
must be in the format &quot;zone:loglevel&quot;. For
example, this command will send the zonelog command to
rollerd for three zones.</p>

<p style="margin-top: 1em">$ rollctl -zonelog
example1.com:info example2.com:6 example3.com:err</p>

<p style="margin-top: 1em">-zonestatus <br>
Has rollerd write the status of zones in the current rollrec
file to the rollerd log file. The status is also reported to
rollctl, which prints it to the screen. rollctl <br>
prints it in columnar fashion to enhance readability. The
columns, in order, are: rollrec name, zone name, roll/skip
state, and rollover phase.</p>

<p style="margin-top: 1em">Example: <br>
anothersub anothersub.example.com skip KSK 1 <br>
example.com example.com roll KSK 1 <br>
site1.in.subzone.example.com subzone.example.com roll KSK 3
<br>
site1.subzone.example.com subzone.example.com roll KSK 3</p>

<p style="margin-top: 1em">-zsargs arglist zones <br>
Provides additional zonesigner arguments for a given set of
zones. These arguments will override the arguments in the
DNSSEC-Tools defaults file, the DNSSEC-Tools <br>
configuration file, and the zones&rsquo; keyrec files.</p>

<p style="margin-top: 1em">The zonesigner argument list is
given in arglist. Given the rollctl argument processing, the
new arguments for zonesigner cannot be specified as
expected. Instead, the <br>
arguments should be given in the following manner. The
leading dash should be replaced with an equals sign. If the
option takes an argument, the space that would separate <br>
the option from the option&rsquo;s argument should also be
replaced by an equals sign. rollerd translates these
arguments to the appropriate format for zonesigner. These
examples <br>
should clarify the modifications:</p>

<p style="margin-top: 1em">normal zonesigner option -zsargs
options <br>
------------------------ --------------- <br>
-nokrfile =nokrfile <br>
-zskcount 5 =zskcount=5</p>

<p style="margin-top: 1em">The zones list is a
space-separated list of zones. All the new zonesigner
arguments will be applied to all the listed zones.</p>

<p style="margin-top: 1em">The &quot;=clear&quot; argument
is special. rollerd translates it to &quot;-clear&quot;,
which is not a normal zonesigner option. Instead, rollerd
recognizes &quot;-clear&quot; as an indicator that it <br>
should remove the zsargs field from the rollrec records for
the specified zones.</p>

<p style="margin-top: 1em">The following are valid uses of
-zsargs:</p>

<p style="margin-top: 1em"># rollctl -zsargs
=ksklength=2048 example.com <br>
# rollctl -zsargs =ksklen=2048 =zsklen=2048 example.com
test.com</p>

<p style="margin-top: 1em">-Version <br>
Displays the version information for rollctl and the
DNSSEC-Tools package.</p>

<p style="margin-top: 1em">-quiet <br>
Prevents output from being given. Both error and non-error
output is stopped.</p>

<p style="margin-top: 1em">-help <br>
Displays a usage message.</p>

<p style="margin-top: 1em">EXIT CODES <br>
rollctl may give the following exit codes:</p>

<p style="margin-top: 1em">0 - Successful execution <br>
1 - Error sending the command to rollerd. <br>
2 - Missing argument. <br>
3 - Too many commands specified. <br>
200 - Rollerd is not running. <br>
201 - Configuration file checks failed.</p>

<p style="margin-top: 1em">FUTURE <br>
The following modifications may be made in the future:</p>

<p style="margin-top: 1em">command execution order <br>
The commands will be executed in the order given on the
command line rather than in alphabetical order.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright 2006-2014 SPARTA, Inc. All rights reserved. See
the COPYING file included with the DNSSEC-Tools package for
details.</p>

<p style="margin-top: 1em">AUTHOR <br>
Wayne Morrison, tewok@tislabs.com</p>

<p style="margin-top: 1em">SEE ALSO <br>
Net::DNS::SEC::Tools::rollmgr.pm(3),
Net::DNS::SEC::Tools::rollrec.pm(3)</p>

<p style="margin-top: 1em">rollerd(8)</p>

<p style="margin-top: 1em">perl v5.24.0 2015-06-30
ROLLCTL(1)</p>
<hr>
</body>
</html>
