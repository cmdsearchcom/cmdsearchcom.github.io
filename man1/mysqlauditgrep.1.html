<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:26:37 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>MYSQLAUDITGREP(1) MySQL Utilities MYSQLAUDITGREP(1)</p>

<p style="margin-top: 1em">NAME <br>
mysqlauditgrep - Search an audit log</p>

<p style="margin-top: 1em">SYNOPSIS</p>

<p style="margin-top: 1em">mysqlauditgrep <br>
[OPTIONS]... <br>
AUDIT_LOG_FILE <br>
mysqlauditgrep <br>
--file-stats[--format=FORMAT] <br>
AUDIT_LOG_FILE <br>
mysqlauditgrep <br>
--format=FORMAT <br>
AUDIT_LOG_FILE <br>
mysqlauditgrep <br>
[--users=USERS] <br>
[--start-date=START_DATE] <br>
[--end-date=END_DATE] <br>
[--pattern=PATTERN[--regexp]] <br>
[--query-type=QUERY_TYPE] <br>
[--event-type=EVENT_TYPE] <br>
[--status=STATUS] <br>
[--format=FORMAT] <br>
AUDIT_LOG_FILE</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This utility allows you to search the current or archived
audit logs, allowing you to display data from the audit log
file according to the defined search criterion. It also <br>
allows you to output the results in different formats,
namely GRID (default), TAB, CSV, VERTICAL, and RAW (the
original XML format).</p>

<p style="margin-top: 1em">This utility allows you to
search and filter the returned audit log records by: users
(--users), date and time ranges (--start-date and
--end-date), SQL query types <br>
(--query-type), logged event and record types
(--event-type), status (--status), and matching patterns
(--pattern). Any of these search options can be combined and
used together, <br>
with the retrieved records resulting from all passed in
options being true.</p>

<p style="margin-top: 1em">The --pattern supports two types
of pattern matching: standard SQL, used with the SQL LIKE
operator (SQL patterns), and standard REGEXP (POSIX regular
expression patterns).</p>

<p style="margin-top: 1em">This utility always requires an
audit log file to be passed in, so the AUDIT_LOG_FILE
argument is searched as a full path and file name for the
audit log file. If not specified, <br>
a notification concerning this requirement will be printed.
And if --format is passed in without search parameters, then
all the records of the audit log are displayed in the <br>
specified format.</p>

<p style="margin-top: 1em">The --file-stats option is not
considered a search criteria, and is used to display the
file statistics of a specified audit log. Other search
options will be ignored when the <br>
--file-stats option is used, except the --format option will
continue to format the results accordingly.</p>

<p style="margin-top: 1em">To specify the format of the
generated results, use one of the following values with the
--format option:</p>

<p style="margin-top: 1em">&Acirc;&middot; GRID
(default)</p>

<p style="margin-top: 1em">Display output in grid or table
format like that of the mysql client command-line tool.</p>

<p style="margin-top: 1em">&Acirc;&middot; CSV</p>

<p style="margin-top: 1em">Display output in
comma-separated values format.</p>

<p style="margin-top: 1em">&Acirc;&middot; VERTICAL</p>

<p style="margin-top: 1em">Display output in single-column
format like that of the G command for the mysql client
command-line tool.</p>

<p style="margin-top: 1em">&Acirc;&middot; RAW</p>

<p style="margin-top: 1em">Display output results in the
original raw format of the audit log records, which is
written in XML. <br>
Standard SQL Pattern Matching.PP The simple patterns defined
by the SQL standard enables users to use two characters with
special meanings: &acirc;%&acirc; (percent) matches zero or
more <br>
characters, and &acirc;_&acirc; (underscore) matches exactly
one arbitrary character. In standard SQL, these types of
patterns are used with the LIKE comparison operator, and
they are <br>
case-insensitive by default. This utility assumes that they
are case-insensitive.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;audit%&quot;</p>

<p style="margin-top: 1em">Match any string that starts
with &quot;audit&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;%log%&quot;</p>

<p style="margin-top: 1em">Match any string containing the
word &quot;log&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;%_&quot;</p>

<p style="margin-top: 1em">Match any string consisting of
one or more characters.</p>

<p style="margin-top: 1em">For documentation about the
standard SQL pattern matching syntax, see Pattern
Matching[1]. REGEXP Pattern Matching (POSIX).PP Standard
REGEXP patterns are more powerful than the <br>
simple patterns defined in the SQL standard. A regular
expression is a string of ordinary and special characters
specified to match other strings. Unlike SQL Patterns,
REGEXP <br>
patterns are case-sensitive. The REGEXP syntax defines the
following characters with special meaning:</p>

<p style="margin-top: 1em">&Acirc;&middot; .</p>

<p style="margin-top: 1em">Match any character.</p>

<p style="margin-top: 1em">&Acirc;&middot; ^</p>

<p style="margin-top: 1em">Match the beginning of a
string.</p>

<p style="margin-top: 1em">&Acirc;&middot; $</p>

<p style="margin-top: 1em">Match the end of a string.</p>

<p style="margin-top: 1em">&Acirc;&middot; <br>
Match zero or more repetitions of the preceding regular
expression.</p>

<p style="margin-top: 1em">&Acirc;&middot; +</p>

<p style="margin-top: 1em">Match one or more repetitions of
the preceding regular expression.</p>

<p style="margin-top: 1em">&Acirc;&middot; ?</p>

<p style="margin-top: 1em">Match zero or one repetition of
the preceding regular expression.</p>

<p style="margin-top: 1em">&Acirc;&middot; |</p>

<p style="margin-top: 1em">Match either the regular
expressions from the left or right of |.</p>

<p style="margin-top: 1em">&Acirc;&middot; []</p>

<p style="margin-top: 1em">Indicates a set of characters to
match.</p>

<p style="margin-top: 1em">Note <br>
Special characters lose their special meaning inside sets.
In particular, the caret symbol (^) acquires a different
meaning if it is the first character of the set, <br>
matching the complementary set (i.e., all the characters
that are not in the set will be matched).</p>

<p style="margin-top: 1em">&Acirc;&middot; {m}</p>

<p style="margin-top: 1em">Match m repetitions of the
preceding regular expression.</p>

<p style="margin-top: 1em">&Acirc;&middot; {m,n}</p>

<p style="margin-top: 1em">Match from m to n repetitions of
the preceding regular expression.</p>

<p style="margin-top: 1em">&Acirc;&middot; ()</p>

<p style="margin-top: 1em">Define a matching group, and
matches the regular expression inside the parentheses.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">&Acirc;&middot; &quot;a</p>

<p style="margin-top: 1em">Match a sequence of zero or more
a.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;a+&quot;</p>

<p style="margin-top: 1em">Match a sequence of one or more
a.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;a?&quot;</p>

<p style="margin-top: 1em">Match zero or one a.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;ab|cd&quot;</p>

<p style="margin-top: 1em">Match ab or cd.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;[axy]&quot;</p>

<p style="margin-top: 1em">Match a, x or y.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;[a-f]&quot;</p>

<p style="margin-top: 1em">Match any character in the range
a to f (that is, a, b, c, d, e, or f).</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;[^axy]&quot;</p>

<p style="margin-top: 1em">Match any character except a, x
or y.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;a{5}&quot;</p>

<p style="margin-top: 1em">Match exactly five copies of
a.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;a{2,5}&quot;</p>

<p style="margin-top: 1em">Match from two to five copies of
a.</p>

<p style="margin-top: 1em">&Acirc;&middot;
&quot;(abc)+&quot;</p>

<p style="margin-top: 1em">Match one or more repetitions of
abc.</p>

<p style="margin-top: 1em">This is a brief overview of
regular expressions that can be used to define this type of
patterns. The full syntax is described in the Python
&quot;re&quot; module docs[2], supporting the <br>
definition of much more complex pattern matching expression.
OPTIONS.PP mysqlauditgrep accepts the following command-line
options:</p>

<p style="margin-top: 1em">&Acirc;&middot;
--end-date=&lt;END_DATE&gt;</p>

<p style="margin-top: 1em">End date/time to retrieve log
entries until the specified date/time range. If not
specified or the value is 0, all entries to the end of the
log are displayed. Accepted <br>
formats: &quot;yyyy-mm-ddThh:mm:ss&quot; or
&quot;yyyy-mm-dd&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--event-type=&lt;EVENT_TYPE&gt;</p>

<p style="margin-top: 1em">Comma-separated list of event
types to search in all audit log records matching the
specified types. Supported values are: Audit, Binlog Dump,
Change user, Close stmt, <br>
Connect Out, Connect, Create DB, Daemon, Debug, Delayed
insert, Drop DB, Execute, Fetch, Field List, Init DB, Kill,
Long Data, NoAudit, Ping, Prepare, Processlist, Query, <br>
Quit, Refresh, Register Slave, Reset stmt, Set option,
Shutdown, Sleep, Statistics, Table Dump, Time.</p>

<p style="margin-top: 1em">&Acirc;&middot; --file-stats</p>

<p style="margin-top: 1em">Display the audit log file
statistics.</p>

<p style="margin-top: 1em">&Acirc;&middot; --format=FORMAT,
-f FORMAT</p>

<p style="margin-top: 1em">Output format to display the
resulting data. Supported format values: GRID (default),
TAB, CSV, VERTICAL and RAW.</p>

<p style="margin-top: 1em">&Acirc;&middot; --help</p>

<p style="margin-top: 1em">Display a help message and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot; --license</p>

<p style="margin-top: 1em">Display license information and
exit.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--pattern=&lt;PATTERN&gt;, -e &lt;PATTERN&gt;</p>

<p style="margin-top: 1em">Search pattern to retrieve all
entries with at least one attribute value matching the
specified pattern. By default the standard SQL LIKE patterns
are used for matching. If <br>
the --regexp option is set, then REGEXP patterns must be
specified for matching.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--query-type=&lt;QUERY_TYPE&gt;</p>

<p style="margin-top: 1em">Comma-separated list of SQL
statements/commands to search for and match. Supported
values: CREATE, ALTER, DROP, TRUNCATE, RENAME, GRANT,
REVOKE, SELECT, INSERT, UPDATE, <br>
DELETE, COMMIT, SHOW, SET, CALL, PREPARE, EXECUTE,
DEALLOCATE.</p>

<p style="margin-top: 1em">&Acirc;&middot; --regexp,
--basic-regexp, -G</p>

<p style="margin-top: 1em">Indicates that pattern matching
will be performed using a regular expression REGEXP (from
the Python re module). By default, the simple standard SQL
LIKE patterns are used <br>
for matching. This affects how the value specified by the
--pattern option is interpreted.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--start-date=&lt;START_DATE&gt;</p>

<p style="margin-top: 1em">Starting date/time to retrieve
log entries from the specified date/time range. If not
specified or the value is 0, all entries from the start of
the log are displayed. <br>
Accepted formats: yyyy-mm-ddThh:mm:ss or yyyy-mm-dd.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--status=&lt;STATUS&gt;</p>

<p style="margin-top: 1em">Comma-separated list of status
values or intervals to search for all audit log records with
a matching status. Status values are non-negative integers
(corresponding to MySQL <br>
error codes). Status intervals are closed (i.e., include
both endpoints) and defined simply using a dash between its
endpoints. For Example: 1051,1068-1075,1109,1146.</p>

<p style="margin-top: 1em">The --status option is available
as of MySQL Utilities 1.2.4 / 1.3.3.</p>

<p style="margin-top: 1em">&Acirc;&middot;
--users=&lt;USERS&gt;, -u &lt;USERS&gt;</p>

<p style="margin-top: 1em">Comma-separated list of user
names, to search for their associated log entries. For
example: &quot;dan,jon,john,paul,philip,stefan&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; --verbose,
-v</p>

<p style="margin-top: 1em">Specify how much information to
display. Use this option multiple times to increase the
amount of information. For example, -v = verbose, -vv = more
verbose, -vvv = debug.</p>

<p style="margin-top: 1em">&Acirc;&middot; --version</p>

<p style="margin-top: 1em">Display version information and
exit. <br>
NOTES.PP This utility is available as of MySQL Utilities
1.2.0.</p>

<p style="margin-top: 1em">This utility can only be applied
to servers with the audit log plugin enabled[3]. And the
audit log plugin is available as of MySQL Server versions
5.5.28 and 5.6.10.</p>

<p style="margin-top: 1em">This utility support both of the
existing audit log file formats (old and new). The new audit
log format is supported as of MySQL Utilities 1.4.3. See The
Audit Log File[4], for <br>
more information about available file formats.</p>

<p style="margin-top: 1em">This utility requires the use of
Python version 2.6 or higher, but does not support Python
3.</p>

<p style="margin-top: 1em">Single or double quote
characters (respectively, &rsquo; or &quot;) can be used
around option values. In fact, quotes are required to set
some options values correctly, such as values with <br>
whitespace. For example, to specify the event types Create
DB and Drop DB for the --event-type option, the following
syntax must be used: --event-type=&rsquo;Create DB,Drop
DB&rsquo; or <br>
--event-type=&quot;Create DB,Drop DB&quot;. EXAMPLES.PP To
display the audit log file statistics and output the results
in CSV format, run the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--file-stats --format=CSV /SERVER/data/audit.log <br>
# <br>
# Audit Log File Statistics: <br>
# <br>
File,Size,Created,Last Modified <br>
audit.log,9101,Thu Sep 27 13:33:11 2012,Thu Oct 11 17:40:35
2012 <br>
# <br>
# Audit Log Startup Entries: <br>
# <br>

SERVER_ID,STARTUP_OPTIONS,NAME,TIMESTAMP,MYSQL_VERSION,OS_VERSION,VERSION
<br>
1,/SERVER/sql/mysqld
--defaults-file=/SERVER/my.cnf,Audit,2012-09-27T13:33:11,5.5.29-log,x86_64-Linux,1</p>

<p style="margin-top: 1em">To display the audit log entries
of specific users, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--users=tester1,tester2 /SERVER/data/audit.log</p>

<p style="margin-top: 1em">To display the audit log file
statistics, run the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--users=tester1,tester2 /SERVER/data/audit.log <br>

+---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+
<br>
| STATUS | SERVER_ID | NAME | TIMESTAMP | CONNECTION_ID |
HOST | USER | PRIV_USER | IP | SQLTEXT | <br>

+---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+
<br>
| 0 | 1 | Connect | 2012-09-28T11:26:50 | 9 | localhost |
root | tester1 | 127.0.0.1 | None | <br>
| 0 | 1 | Query | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | SET @@session.autocommit = OFF | <br>
| 0 | 1 | Ping | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | None | <br>
| 0 | 1 | Query | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | SHOW VARIABLES LIKE &rsquo;READ_ONLY&rsquo;
| <br>
| 0 | 1 | Query | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | COMMIT | <br>
| 0 | 1 | Ping | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | None | <br>
| 0 | 1 | Query | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | COMMIT | <br>
| 0 | 1 | Quit | 2012-09-28T11:26:50 | 9 | None | root |
tester1 | None | None | <br>
| 0 | 1 | Connect | 2012-10-10T15:55:55 | 11 | localhost |
tester2 | root | 127.0.0.1 | None | <br>
| 0 | 1 | Query | 2012-10-10T15:55:55 | 11 | None | tester2
| root | None | select @@version_comment limit 1 | <br>
| 0 | 1 | Query | 2012-10-10T15:56:10 | 11 | None | tester2
| root | None | show databases | <br>
| 1046 | 1 | Query | 2012-10-10T15:57:26 | 11 | None |
tester2 | root | None | show tables test | <br>
| 1046 | 1 | Query | 2012-10-10T15:57:36 | 11 | None |
tester2 | root | None | show tables test | <br>
| 0 | 1 | Query | 2012-10-10T15:57:51 | 11 | None | tester2
| root | None | show tables in test | <br>
| 0 | 1 | Quit | 2012-10-10T15:57:59 | 11 | None | tester2 |
root | None | None | <br>
| 0 | 1 | Connect | 2012-10-10T17:35:42 | 12 | localhost |
tester2 | root | 127.0.0.1 | None | <br>
| 0 | 1 | Query | 2012-10-10T17:35:42 | 12 | None | tester2
| root | None | select @@version_comment limit 1 | <br>
| 0 | 1 | Quit | 2012-10-10T17:47:22 | 12 | None | tester2 |
root | None | None | <br>

+---------+------------+----------+----------------------+----------------+------------+----------+------------+------------+----------------------------------+</p>

<p style="margin-top: 1em">To display the audit log entries
for a specific date/time range, use the following
command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--start-date=2012-09-27T13:33:47 --end-date=2012-09-28
/SERVER/data/audit.log <br>

+---------+----------------------+--------+----------------+---------------------------------------------------------------------------+
<br>
| STATUS | TIMESTAMP | NAME | CONNECTION_ID | SQLTEXT | <br>

+---------+----------------------+--------+----------------+---------------------------------------------------------------------------+
<br>
| 0 | 2012-09-27T13:33:47 | Ping | 7 | None | <br>
| 0 | 2012-09-27T13:33:47 | Query | 7 | SELECT * FROM
INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME LIKE
&rsquo;audit%&rsquo; | <br>
| 0 | 2012-09-27T13:33:47 | Query | 7 | COMMIT | <br>
| 0 | 2012-09-27T13:34:48 | Quit | 7 | None | <br>
| 0 | 2012-09-27T13:34:48 | Quit | 8 | None | <br>

+---------+----------------------+--------+----------------+---------------------------------------------------------------------------+</p>

<p style="margin-top: 1em">To display the audit log entries
matching a specific SQL LIKE pattern, use the following
command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--pattern=&quot;% = ___&quot;; /SERVER/data/audit.log <br>

+---------+----------------------+--------+---------------------------------+----------------+
<br>
| STATUS | TIMESTAMP | NAME | SQLTEXT | CONNECTION_ID | <br>

+---------+----------------------+--------+---------------------------------+----------------+
<br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 8 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 9 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 10 | <br>

+---------+----------------------+--------+---------------------------------+----------------+</p>

<p style="margin-top: 1em">To display the audit log entries
matching a specific REGEXP pattern, use the following
command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--pattern=&quot;.* = ...&quot; --regexp
/SERVER/data/audit.log <br>

+---------+----------------------+--------+---------------------------------+----------------+
<br>
| STATUS | TIMESTAMP | NAME | SQLTEXT | CONNECTION_ID | <br>

+---------+----------------------+--------+---------------------------------+----------------+
<br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 8 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 9 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 10 | <br>

+---------+----------------------+--------+---------------------------------+----------------+</p>

<p style="margin-top: 1em">To display the audit log entries
of specific query types, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--query-type=show,SET /SERVER/data/audit.log <br>

+---------+----------------------+--------+-------------------------------------------------+----------------+
<br>
| STATUS | TIMESTAMP | NAME | SQLTEXT | CONNECTION_ID | <br>

+---------+----------------------+--------+-------------------------------------------------+----------------+
<br>
| 0 | 2012-09-27T13:33:39 | Query | SET NAMES
&rsquo;latin1&rsquo; COLLATE &rsquo;latin1_swedish_ci&rsquo;
| 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SHOW VARIABLES LIKE
&rsquo;READ_ONLY&rsquo; | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SHOW VARIABLES LIKE
&rsquo;datadir&rsquo; | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SHOW VARIABLES LIKE
&rsquo;basedir&rsquo; | 7 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SET NAMES
&rsquo;latin1&rsquo; COLLATE &rsquo;latin1_swedish_ci&rsquo;
| 8 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SET @@session.autocommit
= OFF | 8 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SHOW VARIABLES LIKE
&rsquo;READ_ONLY&rsquo; | 8 | <br>
| 0 | 2012-09-27T13:33:39 | Query | SHOW VARIABLES LIKE
&rsquo;basedir&rsquo; | 8 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET NAMES
&rsquo;latin1&rsquo; COLLATE &rsquo;latin1_swedish_ci&rsquo;
| 9 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 9 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SHOW VARIABLES LIKE
&rsquo;READ_ONLY&rsquo; | 9 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET NAMES
&rsquo;latin1&rsquo; COLLATE &rsquo;latin1_swedish_ci&rsquo;
| 10 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET @@session.autocommit
= OFF | 10 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SHOW VARIABLES LIKE
&rsquo;READ_ONLY&rsquo; | 10 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SET
@@GLOBAL.audit_log_flush = ON | 10 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SHOW VARIABLES LIKE
&rsquo;audit_log_policy&rsquo; | 10 | <br>
| 0 | 2012-09-28T11:26:50 | Query | SHOW VARIABLES LIKE
&rsquo;audit_log_rotate_on_size&rsquo; | 10 | <br>
| 0 | 2012-10-10T15:56:10 | Query | show databases | 11 |
<br>
| 1046 | 2012-10-10T15:57:26 | Query | show tables test | 11
| <br>
| 1046 | 2012-10-10T15:57:36 | Query | show tables test | 11
| <br>
| 0 | 2012-10-10T15:57:51 | Query | show tables in test | 11
| <br>

+---------+----------------------+--------+-------------------------------------------------+----------------+</p>

<p style="margin-top: 1em">To display the audit log entries
of specific event types, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--event-type=&quot;Ping,Connect&quot; /SERVER/data/audit.log
<br>

+---------+----------+----------------------+----------------+------------+---------+------------+------------+
<br>
| STATUS | NAME | TIMESTAMP | CONNECTION_ID | HOST | USER |
PRIV_USER | IP | <br>

+---------+----------+----------------------+----------------+------------+---------+------------+------------+
<br>
| 0 | Connect | 2012-09-27T13:33:39 | 7 | localhost | root |
root | 127.0.0.1 | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 7 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 7 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 7 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 7 | None | None | None |
None | <br>
| 0 | Connect | 2012-09-27T13:33:39 | 8 | localhost | root |
root | 127.0.0.1 | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 8 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-27T13:33:39 | 8 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-27T13:33:47 | 7 | None | None | None |
None | <br>
| 0 | Connect | 2012-09-28T11:26:50 | 9 | localhost | root |
tester | 127.0.0.1 | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 9 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 9 | None | None | None |
None | <br>
| 0 | Connect | 2012-09-28T11:26:50 | 10 | localhost | root
| root | 127.0.0.1 | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 10 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 10 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 10 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 10 | None | None | None |
None | <br>
| 0 | Ping | 2012-09-28T11:26:50 | 10 | None | None | None |
None | <br>
| 0 | Connect | 2012-10-10T15:55:55 | 11 | localhost |
tester | root | 127.0.0.1 | <br>
| 0 | Connect | 2012-10-10T17:35:42 | 12 | localhost |
tester | root | 127.0.0.1 | <br>

+---------+----------+----------------------+----------------+------------+---------+------------+------------+</p>

<p style="margin-top: 1em">To display the audit log entries
with a specific status, use the following command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--status=1100-1199,1046 /SERVER/data/audit.log <br>

+---------+----------------------+--------+---------------------------------------------------------------------+----------------+
<br>
| STATUS | TIMESTAMP | NAME | SQLTEXT | CONNECTION_ID | <br>

+---------+----------------------+--------+---------------------------------------------------------------------+----------------+
<br>
| 1046 | 2012-10-10T15:57:26 | Query | show tables test | 11
| <br>
| 1046 | 2012-10-10T15:57:36 | Query | show tables test | 11
| <br>
| 1146 | 2012-10-10T17:44:55 | Query | select * from
teste.employees where salary &gt; 500 and salary &lt; 1000 |
12 | <br>
| 1046 | 2012-10-10T17:47:17 | Query | select * from
test_encoding where value =
&rsquo;&lt;&gt;&quot;&amp;&rsquo; | 12 | <br>

+---------+----------------------+--------+---------------------------------------------------------------------+----------------+</p>

<p style="margin-top: 1em">Note <br>
You can view all successful commands with --status=0, and
all unsuccessful commands with --status=1-9999.</p>

<p style="margin-top: 1em">To display the audit log entries
matching several search criteria, use the following
command:</p>

<p style="margin-top: 1em">shell&gt; mysqlauditgrep
--users=root --start-date=0 --end-date=2012-10-10
--event-type=Query --query-type=SET --status=0
--pattern=&quot;%audit_log%&quot; /SERVER/data/audit.log
<br>

+---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+
<br>
| STATUS | SERVER_ID | NAME | TIMESTAMP | CONNECTION_ID |
USER | PRIV_USER | SQLTEXT | <br>

+---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+
<br>
| 0 | 1 | Query | 2012-09-28T11:26:50 | 10 | root | root |
SET @@GLOBAL.audit_log_flush = ON | <br>

+---------+------------+--------+----------------------+----------------+-------+------------+------------------------------------+</p>

<p style="margin-top: 1em">PERMISSIONS REQUIRED.PP The user
must have permissions to read the audit log on disk.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright &Acirc;&copy; 2006, 2015, Oracle and/or its
affiliates. All rights reserved.</p>

<p style="margin-top: 1em">This documentation is free
software; you can redistribute it and/or modify it only
under the terms of the GNU General Public License as
published by the Free Software Foundation; <br>
version 2 of the License.</p>

<p style="margin-top: 1em">This documentation is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with the program; if
not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, <br>
Boston, MA 02110-1301 USA or see
http://www.gnu.org/licenses/.</p>

<p style="margin-top: 1em">NOTES <br>
1. Pattern Matching <br>

http://dev.mysql.com/doc/refman/5.6/en/pattern-matching.html</p>

<p style="margin-top: 1em">2. Python &quot;re&quot; module
docs <br>
http://docs.python.org/2/library/re.html</p>

<p style="margin-top: 1em">3. audit log plugin enabled <br>

http://dev.mysql.com/doc/refman/5.6/en/audit-log-plugin-installation.html</p>

<p style="margin-top: 1em">4. The Audit Log File <br>

http://dev.mysql.com/doc/refman/5.6/en/audit-log-file.html</p>

<p style="margin-top: 1em">SEE ALSO <br>
For more information, please refer to the MySQL Utilities
and Fabric documentation, which is available online at
http://dev.mysql.com/doc/index-utils-fabric.html</p>

<p style="margin-top: 1em">AUTHOR <br>
Oracle Corporation (http://dev.mysql.com/).</p>

<p style="margin-top: 1em">MySQL 1.5.6 09/15/2015
MYSQLAUDITGREP(1)</p>
<hr>
</body>
</html>
