<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:35:55 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>r.out.gdal(1grass) Grass User&rsquo;s Manual
r.out.gdal(1grass)</p>

<p style="margin-top: 1em">NAME <br>
r.out.gdal - Exports GRASS raster maps into GDAL supported
formats.</p>

<p style="margin-top: 1em">KEYWORDS <br>
raster, export</p>

<p style="margin-top: 1em">SYNOPSIS <br>
r.out.gdal <br>
r.out.gdal --help <br>
r.out.gdal [-lcmtf] input=name output=name format=string
[type=string] [createopt=string[,string,...]]
[metaopt=string[,string,...]] [nodata=float] [--overwrite]
<br>
[--help] [--verbose] [--quiet] [--ui]</p>

<p style="margin-top: 1em">Flags: <br>
-l <br>
List supported output formats</p>

<p style="margin-top: 1em">-c <br>
Do not write GDAL standard colortable <br>
Only applicable to Byte or UInt16 data types</p>

<p style="margin-top: 1em">-m <br>
Do not write non-standard metadata <br>
Enhances compatibility with other GIS software</p>

<p style="margin-top: 1em">-t <br>
Write raster attribute table <br>
Some export formats may not be supported</p>

<p style="margin-top: 1em">-f <br>
Force raster export despite any warnings of data loss <br>
Overrides nodata safety check</p>

<p style="margin-top: 1em">--overwrite <br>
Allow output files to overwrite existing files</p>

<p style="margin-top: 1em">--help <br>
Print usage summary</p>

<p style="margin-top: 1em">--verbose <br>
Verbose module output</p>

<p style="margin-top: 1em">--quiet <br>
Quiet module output</p>

<p style="margin-top: 1em">--ui <br>
Force launching GUI dialog</p>

<p style="margin-top: 1em">Parameters: <br>
input=name [required] <br>
Name of raster map (or group) to export</p>

<p style="margin-top: 1em">output=name [required] <br>
Name for output raster file</p>

<p style="margin-top: 1em">format=string [required] <br>
Raster data format to write (case sensitive, see also -l
flag) <br>
Options: VRT, GTiff, NITF, HFA, ELAS, AAIGrid, DTED, PNG,
JPEG, MEM, GIF, XPM, BMP, PCIDSK, PCRaster, ILWIS, SGI,
SRTMHGT, Leveller, Terragen, GMT, netCDF, HDF4Image, ISIS2,
<br>
ERS, JP2OpenJPEG, FIT, RMF, WMS, RST, INGR, GSAG, GSBG,
GS7BG, R, KMLSUPEROVERLAY, WEBP, PDF, Rasterlite, MBTiles,
CALS, WMTS, MRF, PNM, PAux, MFF, MFF2, BT, LAN, IDA, LCP,
<br>
GTX, NTv2, CTable2, KRO, ROI_PAC, ENVI, EHdr, ISCE, ARG,
USGSDEM, ADRG, BLX, EPSILON, PostGISRaster, SAGA, XYZ, HF2,
ZMap, GPKG <br>
Default: GTiff</p>

<p style="margin-top: 1em">type=string <br>
Data type <br>
Options: Byte, Int16, UInt16, Int32, UInt32, Float32,
Float64, CInt16, CInt32, CFloat32, CFloat64</p>

<p style="margin-top: 1em">createopt=string[,string,...]
<br>
Creation option(s) to pass to the output format driver <br>
In the form of &quot;NAME=VALUE&quot;, separate multiple
entries with a comma</p>

<p style="margin-top: 1em">metaopt=string[,string,...] <br>
Metadata key(s) and value(s) to include <br>
In the form of &quot;META-TAG=VALUE&quot;, separate multiple
entries with a comma. Not supported by all output format
drivers.</p>

<p style="margin-top: 1em">nodata=float <br>
Assign a specified nodata value to output bands <br>
If given, the nodata value is always written to metadata
even if there are no NULL cells in the input band (enhances
output compatibility).</p>

<p style="margin-top: 1em">DESCRIPTION <br>
r.out.gdal allows a user to export a GRASS raster map layer
into any GDAL supported raster map format. If a GRASS raster
map is exported for a particular application, the
appli&acirc; <br>
cation&acirc;s native format would be preferable. GeoTIFF is
supported by a wide range of applications (see also NOTES on
GeoTIFF below).</p>

<p style="margin-top: 1em">To specify multiple creation
options use a comma separated list
(createopt=&quot;TFW=YES,COMPRESS=DEFLATE&quot;).</p>

<p style="margin-top: 1em">For possible createopt and
metaopt parameters please consult the individual supported
formats pages on the GDAL website. The createopt parameter
may be used to create TFW or <br>
World files
(&quot;TFW=YES&quot;,&quot;WORLDFILE=ON&quot;).</p>

<p style="margin-top: 1em">r.out.gdal also supports the
export of multiband rasters as a group, when the imagery
group&acirc;s name is entered as input. (created imagery
groups with the i.group module)</p>

<p style="margin-top: 1em">As with most GRASS raster
modules, the current region extents and region resolution
are used, and a MASK is respected if present. Use
g.region&acirc;s &quot;align=&quot;, or &quot;raster=&quot;
options <br>
if you need to realign the region settings to match the
original map&acirc;s before export.</p>

<p style="margin-top: 1em">SUPPORTED RASTER FORMATS <br>
The set of supported raster formats written by r.out.gdal
depends on the local GDAL installation. Available may be
(incomplete list):</p>

<p style="margin-top: 1em">AAIGrid: Arc/Info ASCII Grid
<br>
BMP: MS Windows Device Independent Bitmap <br>
BSB: Maptech BSB Nautical Charts <br>
DTED: DTED Elevation Raster <br>
ELAS: ELAS <br>
ENVI: ENVI .hdr Labelled <br>
FIT: FIT Image <br>
GIF: Graphics Interchange Format (.gif) <br>
GTiff: GeoTIFF <br>
HDF4Image: HDF4 Dataset <br>
HFA: Erdas Imagine Images (.img) <br>
JPEG2000: JPEG-2000 part 1 (ISO/IEC 15444-1) <br>
JPEG: JPEG JFIF <br>
MEM: In Memory Raster <br>
MFF2: Atlantis MFF2 (HKV) Raster <br>
MFF: Atlantis MFF Raster <br>
NITF: National Imagery Transmission Format <br>
PAux: PCI .aux Labelled <br>
PCIDSK: PCIDSK Database File <br>
PNG: Portable Network Graphics <br>
PNM: Portable Pixmap Format (netpbm) <br>
VRT: Virtual Raster <br>
XPM: X11 PixMap Format</p>

<p style="margin-top: 1em">NOTES <br>
Out of the GDAL data types, the closest match for GRASS
CELL, FCELL and DCELL rasters are respectively Int32,
Float32 and Float64. These are not exact equivalents, but
they will <br>
preserve the maximum possible data range and number of
decimal places for each respective GRASS raster data type.
Please keep in mind that not all CELL rasters will require
<br>
Int32 - e.g., 0-255 CELL raster are covered by the Byte type
as well. Moreover, some GDAL-supported formats do not
support all the data types possible in GDAL and GRASS. Use
<br>
r.info to check the data type and range for your GRASS
raster, refer to specific format documentation (on the GDAL
website), format vendor&acirc;s documentation, and e.g. the
Wikipedia <br>
article Typical boundaries of primitive integral types for
details.</p>

<p style="margin-top: 1em">Ranges of GDAL data types <br>
GDAL data type minimum maximum <br>
Byte 0 255 <br>
UInt16 0 65,535 <br>
Int16, CInt16 -32,768 32,767 <br>
UInt32 0 4,294,967,295 <br>
Int32, CInt32 -2,147,483,648 2,147,483,647 <br>
Float32, CFloat32 -3.4E38 3.4E38 <br>
Float64, CFloat64 -1.79E308 1.79E308</p>

<p style="margin-top: 1em">If there is a need to keep file
sizes small, use the simplest data type covering the data
range of the raster(s) to be exported, e.g., if suitable use
Byte rather than UInt16; <br>
use Int16 rather than Int32; or use Float32 rather than
Float64. In addition, the COMPRESS createopt used can have a
very large impact on the size of the output file.</p>

<p style="margin-top: 1em">Some software may not recognize
all of the compression methods available for a given file
format, and certain compression methods may only be
supported for certain data types <br>
(depends on vendor and version).</p>

<p style="margin-top: 1em">If the export settings are set
such that data loss would occur in the output file (i.e, due
to the particular choice of data type and/or file type), the
normal behaviour of <br>
r.out.gdal in this case would be to issue an error message
describing the problem and exit without exporting. The -f
flag allows raster export even if some of the data loss
tests <br>
are not passed, and warnings are issued instead of
errors.</p>

<p style="margin-top: 1em">r.out.gdal exports may appear
all black or gray on initial display in other GIS software.
This is not a bug of r.out.gdal, but often caused by the
default color table assigned by <br>
that software. The default color table may be grayscale
covering the whole range of possible values which is very
large for e.g. Int32 or Float32. E.g. stretching the color
ta&acirc; <br>
ble to actual min/max would help (sometimes under
symbology).</p>

<p style="margin-top: 1em">GeoTIFF caveats <br>
GeoTIFF exports can only be displayed by standard image
viewers if the GDAL data type was set to Byte and the
GeoTIFF contains either one or three bands. All other data
types and <br>
numbers of bands can be properly read with GIS software
only. Although GeoTIFF files usually have a .tif extension,
these files are not necessarily images but first of all
spa&acirc; <br>
tial raster datasets, e.g. SRTM DEM version 4.</p>

<p style="margin-top: 1em">When writing out multi-band
GeoTIFF images for users of ESRI software or ImageMagick,
the interleaving mode should be set to &quot;pixel&quot;
using createopt=&quot;INTERLEAVE=PIXEL&quot;. BAND <br>
interleaving is slightly more efficient, but not supported
by some applications. This issue only arises when writing
out multi-band imagery groups.</p>

<p style="margin-top: 1em">Improving GeoTIFF compatibility
<br>
To create a GeoTIFF that is highly compatible with various
other GIS software packages, it is recommended to keep the
GeoTIFF file as simple as possible. You will have to
experi&acirc; <br>
ment with which options your software is compatible with, as
this varies widely between vendors and versions. Long term,
the less metadata you have to remove the more
self-docu&acirc; <br>
menting (and useful) the dataset will be.</p>

<p style="margin-top: 1em">Here are some things to try:</p>

<p style="margin-top: 1em">&Acirc;&middot; Create a World
file with createopt=&quot;TFW=YES&quot;.</p>

<p style="margin-top: 1em">&Acirc;&middot; Do not use
GeoTIFF internal compression. Other GIS software often
supports only a subset of the available compression methods
with the supported methods differing between <br>
GIS software packages. Unfortunately this means the output
image can be rather huge, but the file can be compressed
with software like zip, gnuzip, or bzip2.</p>

<p style="margin-top: 1em">&Acirc;&middot; Skip exporting
the color table. Color tables are not always properly
rendered, particularly for type UInt16, and the GeoTIFF file
can appear completely black. If you are <br>
lucky the problematic software package has a method to reset
the color table and assign a new color table (sometimes
called symbology).</p>

<p style="margin-top: 1em">&Acirc;&middot; Keep metadata
simple with createopt=&quot;PROFILE=GeoTIFF&quot; or
createopt=&quot;PROFILE=BASELINE&quot;. With BASELINE no
GDAL or GeoTIFF tags will be written and a World file is
required <br>
(createopt=&quot;TFW=YES&quot;).</p>

<p style="margin-top: 1em">&Acirc;&middot; Adding overviews
with gdaladdo after exporting can speed up display. Note
that other software might create their own overviews,
ignoring existing overviews.</p>

<p style="margin-top: 1em">EXAMPLES <br>
Export the integer raster basin_50K map to GeoTIFF format
<br>
g.region raster=basin_50K -p <br>
r.out.gdal input=basin_50K output=basin_50K.tif</p>

<p style="margin-top: 1em">Export a DCELL raster map in
GeoTIFF format suitable for ESRI software <br>
g.region raster=elevation -p <br>
r.out.gdal in=elevation output=elevation.tif
createopt=&quot;PROFILE=GeoTIFF,TFW=YES&quot;</p>

<p style="margin-top: 1em">Export a raster map in
&quot;Deflate&quot; compressed GeoTIFF format <br>
g.region raster=elevation -p <br>
r.out.gdal in=elevation output=elevation.tif
createopt=&quot;COMPRESS=DEFLATE&quot;</p>

<p style="margin-top: 1em">Export R,G,B imagery bands in
GeoTIFF format suitable for ESRI software <br>
i.group group=nc_landsat_rgb
input=lsat7_2002_30,lsat7_2002_20,lsat7_2002_10 <br>
g.region raster=lsat7_2002_30 -p <br>
r.out.gdal in=nc_landsat_rgb output=nc_landsat_rgb.tif
type=Byte
createopt=&quot;PROFILE=GeoTIFF,INTERLEAVE=PIXEL,TFW=YES&quot;</p>

<p style="margin-top: 1em">Export the floating point raster
elevation map to ERDAS/IMG format <br>
g.region raster=elevation -p <br>
r.out.gdal input=elevation output=elelevation.img format=HFA
type=Float32</p>

<p style="margin-top: 1em">Export group of image maps as
multi-band file <br>
g.list group <br>
i.group group=tm7 subgroup=tm7
input=tm7_10,tm7_20,tm7_30,tm7_40,tm7_50,tm7_60,tm7_70 <br>
i.group -l tm7 <br>
g.region raster=tm7_10 -p <br>
r.out.gdal tm7 output=lsat_multiband.tif <br>
gdalinfo lsat_multiband.tif</p>

<p style="margin-top: 1em">Export RGB with alpha channel
that encodes NULL cells <br>
When exporting exporting RGB data rather than GIS data for
Web applications or generally the scope of visualization,
the alpha channel is of use. Here the export type is
commonly <br>
the Byte data type.</p>

<p style="margin-top: 1em">When exporting data with
r.out.gdal, assigning a nodata value (specific parameter of
the module) means that any band values equal to this nodata
value will be interpreted as <br>
nodata. Using an additional alpha channel means that all
pixels with an alpha value of 0 are transparent. The alpha
channel thus represents per-pixel encoding of nodata, just
<br>
like the GRASS MASK (null file). That means when using an
alpha channel, you do not need to &quot;free up&quot; any
particular value, but you can use any value you like to
replace NULL <br>
cells, as long as the value can be represented by the Byte
data type. It does not matter if that value is already
present in any of the input bands.</p>

<p style="margin-top: 1em">Hence for
&quot;visual-only&quot; RGB data export it is needed to
create an additional alpha channel that encodes all NULL
cells and in the RGB bands to be exported replace NULL cells
with <br>
some value in the range 0-255. For example:</p>

<p style="margin-top: 1em"># for simplicity variables are
used <br>
RMAP=&quot;lsat7_2000_30&quot; <br>
GMAP=&quot;lsat7_2000_20&quot; <br>
BMAP=&quot;lsat7_2000_10&quot; <br>
OUTNAME=&quot;lsat7_2000_RGBA.tif&quot; <br>
# extract alpha <br>
r.mapcalc &quot;out_a = if(isnull($RMAP) || isnull($GMAP) ||
isnull($BMAP), 0, 255)&quot; <br>
# replace NULL cells with a valid value, extract colors <br>
# exporting 8 bit RGB data, not GIS data, therefore the
&lsquo;#&lsquo; operator: <br>
r.mapcalc &quot;out_r = if(isnull($RMAP), 0, #$RMAP)&quot;
<br>
r.mapcalc &quot;out_g = if(isnull($GMAP), 0, #$GMAP)&quot;
<br>
r.mapcalc &quot;out_b = if(isnull($BMAP), 0, #$BMAP)&quot;
<br>
# create group for export <br>
i.group group=out_rgba input=out_r,out_g,out_b,out_a <br>
# remove any MASK because this works only if there are <br>
# no NULL cells in the bands to be exported <br>
r.mask -r <br>
# export the group: <br>
# add PROFILE=BASELINE to createopt to produce a standard
TIFF file <br>
# without any GTiff extensions <br>
r.out.gdal input=out_rgba output=$OUTNAME -cm
createopt=&quot;PHOTOMETRIC=RGB,ALPHA=YES&quot; <br>
gdalinfo $OUTNAME <br>
The resulting GeoTIFF file can be used e.g. for Web server
applications.</p>

<p style="margin-top: 1em">GDAL RELATED ERROR MESSAGES <br>
&Acirc;&middot; &quot;ERROR 6: SetColorInterpretation() not
supported for this dataset.&quot;: This may indicate that
the color table was not written properly. But usually it
will be correct and <br>
the message can be ignored.</p>

<p style="margin-top: 1em">&Acirc;&middot; &quot;ERROR 6:
SetNoDataValue() not supported for this dataset.&quot;: The
selected output format does not support &quot;no data&quot;.
It is recommended to use a different output format if <br>
your data contains NULLs.</p>

<p style="margin-top: 1em">&Acirc;&middot; &quot;Warning 1:
Lost metadata writing to GeoTIFF ... too large to fit in
tag.&quot;: The color table metadata may be too large. It is
recommended to simplify or not write the <br>
color table, or use a different output format or the flags
-c and -m.</p>

<p style="margin-top: 1em">SEE ALSO <br>
The GDAL supported formats page. <br>
r.out.ascii, r.out.bin, r.out.mat, r.out.png, r.out.ppm,
r.pack</p>

<p style="margin-top: 1em">REFERENCES <br>
GDAL Pages: http://www.gdal.org</p>

<p style="margin-top: 1em">AUTHORS <br>
Vytautas Vebra (oliver4grass at gmail.com) <br>
Markus Metz (improved nodata logic)</p>

<p style="margin-top: 1em">Last changed: $Date: 2016-08-27
12:54:05 +0200 (Sat, 27 Aug 2016) $</p>

<p style="margin-top: 1em">SOURCE CODE <br>
Available at: r.out.gdal source code (history)</p>

<p style="margin-top: 1em">Main index | Raster index |
Topics index | Keywords index | Graphical index | Full
index</p>

<p style="margin-top: 1em">&Acirc;&copy; 2003-2016 GRASS
Development Team, GRASS GIS 7.2.0 Reference Manual</p>

<p style="margin-top: 1em">GRASS 7.2.0
r.out.gdal(1grass)</p>
<hr>
</body>
</html>
