<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>OC ADM MIGRATE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">OC ADM MIGRATE(1)</td>
    <td class="head-vol">June 2016</td>
    <td class="head-rtitle">OC ADM MIGRATE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
oc adm migrate storage - Update the stored version of API objects
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>oc adm migrate storage</b> [OPTIONS]
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Migrate internal object storage via update
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
This command invokes an update operation on every API object reachable by the
  caller. This forces the server to write to the underlying storage if the
  object representation has changed. Use this command to ensure that the most
  recent storage changes have been applied to all objects (storage version,
  storage encoding, any newer object defaults).
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
To operate on a subset of resources, use the --include flag. If you encounter
  errors during a run the command will output a list of resources that received
  errors, which you can then re-run the command on. You may also specify
  --from-key and --to-key to restrict the set of resource names to operate on
  (key is NAMESPACE/NAME for resources in namespaces or NAME for cluster scoped
  resources). --from-key is inclusive if specified, while --to-key is exclusive.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
By default, events are not migrated since they expire within a very short period
  of time. If you have significantly increased the expiration time of events,
  run a migration with --include=events
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
WARNING: This is a slow command and will put significant load on an API server.
  It may also result in significant intra-cluster traffic.
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>--all-namespaces</b>=true
<br/>
 Migrate objects in all namespaces. Defaults to true.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--confirm</b>=false
<br/>
 If true, all requested objects will be migrated. Defaults to false.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-f</b>, <b>--filename</b>=[]
<br/>
 Filename, directory, or URL to docker-compose.yml file to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--from-key</b>=&quot;&quot;
<br/>
 If specified, only migrate items with a key (namespace/name or name) greater
  than or equal to this value
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--include</b>=[*]
<br/>
 Resource types to migrate. Passing --filename will override this flag.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-o</b>, <b>--output</b>=&quot;&quot;
<br/>
 Output the modified objects instead of saving them, valid values are 'yaml' or
  'json'
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--to-key</b>=&quot;&quot;
<br/>
 If specified, only migrate items with a key (namespace/name or name) less than
  this value
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS_INHERITED_FROM_PARENT_COMMANDS"><a class="selflink" href="#OPTIONS_INHERITED_FROM_PARENT_COMMANDS">OPTIONS
  INHERITED FROM PARENT COMMANDS</a></h1>
<b>--api-version</b>=&quot;&quot;
<br/>
 DEPRECATED: The API version to use when talking to the server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--as</b>=&quot;&quot;
<br/>
 Username to impersonate for the operation
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--azure-container-registry-config</b>=&quot;&quot;
<br/>
 Path to the file container Azure container registry configuration information.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--certificate-authority</b>=&quot;&quot;
<br/>
 Path to a cert. file for the certificate authority
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-certificate</b>=&quot;&quot;
<br/>
 Path to a client certificate file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--client-key</b>=&quot;&quot;
<br/>
 Path to a client key file for TLS
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--cluster</b>=&quot;&quot;
<br/>
 The name of the kubeconfig cluster to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--config</b>=&quot;&quot;
<br/>
 Path to the config file to use for CLI requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--context</b>=&quot;&quot;
<br/>
 The name of the kubeconfig context to use
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--google-json-key</b>=&quot;&quot;
<br/>
 The Google Cloud Platform Service Account JSON Key to use for authentication.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--insecure-skip-tls-verify</b>=false
<br/>
 If true, the server's certificate will not be checked for validity. This will
  make your HTTPS connections insecure
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--log-flush-frequency</b>=0
<br/>
 Maximum number of seconds between log flushes
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--match-server-version</b>=false
<br/>
 Require server version to match client version
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>-n</b>, <b>--namespace</b>=&quot;&quot;
<br/>
 If present, the namespace scope for this CLI request
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--request-timeout</b>=&quot;0&quot;
<br/>
 The length of time to wait before giving up on a single server request.
  Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A
  value of zero means don't timeout requests.
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--server</b>=&quot;&quot;
<br/>
 The address and port of the Kubernetes API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--token</b>=&quot;&quot;
<br/>
 Bearer token for authentication to the API server
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
<b>--user</b>=&quot;&quot;
<br/>
 The name of the kubeconfig user to use
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
  # Perform a dry-run of updating all objects
  oc adm migrate storage
  
  # To actually perform the update, the confirm flag must be appended
  oc adm migrate storage --confirm
  
  # Only migrate pods
  oc adm migrate storage --include=pods --confirm
  
  # Only pods that are in namespaces starting with &quot;bar&quot;
  oc adm migrate storage --include=pods --confirm --from-key=bar/ --to-key=bar/\xFF
<div class="Pp"></div>
</pre>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>oc-adm-migrate(1)</b>,
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="HISTORY"><a class="selflink" href="#HISTORY">HISTORY</a></h1>
June 2016, Ported from the Kubernetes man-doc generator</div>
<table class="foot">
  <tr>
    <td class="foot-date"> Openshift CLI User Manuals</td>
    <td class="foot-os">Openshift</td>
  </tr>
</table>
</body>
</html>
