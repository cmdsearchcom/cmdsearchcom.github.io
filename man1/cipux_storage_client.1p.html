<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:58:33 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>CIPUX_STORAGE_CLIENT(1p) User Contributed Perl
Documentation CIPUX_STORAGE_CLIENT(1p)</p>

<p style="margin-top: 1em">NAME <br>
cipux_storage_client - Command line interface to CipUX
storage abstraction layer</p>

<p style="margin-top: 1em">VERSION <br>
version 3.4.0.2</p>

<p style="margin-top: 1em">USAGE <br>
(1) cipux_storage_client -h <br>
(2) cipux_storage_client [OPT] -t get_value -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR&gt; [-y &lt;ATTR&gt;] <br>
(3) cipux_storage_client [OPT] -t get_all_values -s
&lt;TYPE&gt; -y &lt;ATTR&gt; [-y &lt;ATTR&gt;] <br>
(4) cipux_storage_client [OPT] -t set_value [-r] -s
&lt;TYPE&gt; -o &lt;OBJ&gt; -y &lt;ATTR&gt; -v &lt;VAL&gt;
<br>
cipux_storage_client [OPT] -t set_value -a -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR&gt; -v &lt;VAL&gt; <br>
cipux_storage_client [OPT] -t set_value [-r] -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR=VAL&gt; [-y &lt;ATTR=VAL&gt;]
<br>
cipux_storage_client [OPT] -t set_value -a -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR=VAL&gt; [-y &lt;ATTR=VAL&gt;]
<br>
cipux_storage_client [OPT] -t set_value -d -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR&gt; [-y &lt;ATTR&gt;] <br>
cipux_storage_client [OPT] -t set_value -e -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -y &lt;ATTR&gt; <br>
(5) cipux_storage_client [OPT] -t set_all_values [-r] -s
&lt;TYPE&gt; -y &lt;ATTR&gt; -v &lt;VAL&gt; <br>
cipux_storage_client [OPT] -t set_all_values -a -s
&lt;TYPE&gt; -y &lt;ATTR&gt; -v &lt;VAL&gt; <br>
cipux_storage_client [OPT] -t set_all_values [-r] -s
&lt;TYPE&gt; -y &lt;ATTR=VAL&gt; [-y &lt;ATTR=VAL&gt;] <br>
cipux_storage_client [OPT] -t set_all_values -a -s
&lt;TYPE&gt; -y &lt;ATTR=VAL&gt; [-y &lt;ATTR=VAL&gt;] <br>
cipux_storage_client [OPT] -t set_all_values -d -s
&lt;TYPE&gt; -y &lt;ATTR&gt; [-y &lt;ATTR&gt;] <br>
(6) cipux_storage_client [OPT] -t add_node -s &lt;TYPE&gt;
-o &lt;OBJ&gt; -x &lt;ATTR=VAL&gt; [-x &lt;ATTR=VAL&gt;]
<br>
(7) cipux_storage_client [OPT] -t delete_node -s
&lt;TYPE&gt; -o &lt;OBJ&gt; <br>
(8) cipux_storage_client [OPT] -t rename_node -s
&lt;TYPE&gt; -o &lt;OBJ&gt; -v &lt;VAL&gt; <br>
abbreviations: OBJ = OBJECT, ATTR = ATTRIBUTE, VAL = VALUE,
OPT = OPTIONS</p>

<p style="margin-top: 1em">OPTIONS <br>
Options for all commands:</p>

<p style="margin-top: 1em">-c | --cfg :
cipux-storage-access.conf <br>
-D | --debug [&lt;LEVEL&gt;] : print debug messages for
developers <br>
-h | --help : print help (this message + options) <br>
-p | --pretty : nice boxed output <br>
-V | --version : print only version <br>
--verbose : print more messages</p>

<p style="margin-top: 1em">Options for some commands:</p>

<p style="margin-top: 1em">-a | --add : rather add then
replace a value <br>
-d | --del : delete the value of the attribute <br>
-e | --erase : delete the attribute <br>
-l | --list : lists configuration scopes, can be used for
--type <br>
-o | --object : LDAP object leaf <br>
-r | --replace : replace a value, default behaviour <br>
-s | --storage_type : configuration type <br>
-t | --storage_task : action to perform <br>
-v | --value : value to be set <br>
-x | --mattrvalue : multiple LDAP attributes, please see
description <br>
-y | --attrvalue : LDAP attribute, please see
description</p>

<p style="margin-top: 1em">REQUIRED ARGUMENTS <br>
cipux_storage_client</p>

<p style="margin-top: 1em">-t or -h</p>

<p style="margin-top: 1em">cipux_storage_client -t
get_value</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-o &lt;OBJ&gt; <br>
-y &lt;ATTR&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
get_all_values</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-y &lt;ATTR&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-o &lt;OBJ&gt; <br>
-y &lt;ATTR&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_all_values</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-y &lt;ATTR&gt; <br>
-v &lt;VAL&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
add_node</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-o &lt;OBJ&gt; <br>
-x &lt;ATTR=VAL&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
delete_node</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-o &lt;OBJ&gt;</p>

<p style="margin-top: 1em">cipux_storage_client -t
rename_node</p>

<p style="margin-top: 1em">-s &lt;TYPE&gt; <br>
-o &lt;OBJ&gt; <br>
-v &lt;VAL&gt;</p>

<p style="margin-top: 1em">DESCRIPTION OF OPTIONS <br>
-a Same as option --add.</p>

<p style="margin-top: 1em">--add <br>
This adds a value where possible rather then replace a
value.</p>

<p style="margin-top: 1em">--attrvalue <br>
This can be used to specify the attribute by</p>

<p style="margin-top: 1em">--attrvalue
&lt;ATTRIBUTE&gt;</p>

<p style="margin-top: 1em">Or it can be used to specify the
attribute and the value</p>

<p style="margin-top: 1em">--attrvalue
&lt;ATTRIBUTE&gt;=&lt;VALUE&gt;</p>

<p style="margin-top: 1em">Of course it can also be use
together with --value option to specify the attribute and
the value like this:</p>

<p style="margin-top: 1em">--attrvalue &lt;ATTRIBUTE&gt;
--value &lt;VALUE&gt;</p>

<p style="margin-top: 1em">-D Same as option --debug.</p>

<p style="margin-top: 1em">-d Same as option --del.</p>

<p style="margin-top: 1em">--del <br>
This deletes the attribute from the object where
possible.</p>

<p style="margin-top: 1em">-e Same as option --erase</p>

<p style="margin-top: 1em">--erase <br>
Deletes the LDAP attribute of a given object. This will
delete also all content of this attribute. If the an object
has multible values for that attribute all values will be
<br>
removed. If this is option is set, it will trigger --delete
command line option automatically.</p>

<p style="margin-top: 1em">-h Same as option --help</p>

<p style="margin-top: 1em">--help <br>
Prints brief help message.</p>

<p style="margin-top: 1em">--mattrvalue <br>
This is option have to be use if a LDAP object has to be
created. Unlike --attrvalue this option requires always an
attribute and a value. Therefore only this syntax is <br>
possible:</p>

<p style="margin-top: 1em">--mattrvalue
&lt;ATTRIBUTE&gt;=&lt;VALUE&gt;</p>

<p style="margin-top: 1em">The reason for this is to be
able to gave the user exact hints when he try to create a
object but forget the value.</p>

<p style="margin-top: 1em">The &rsquo;m&rsquo; stands for
multiple. So it is possible to give the option several
times.</p>

<p style="margin-top: 1em">-o Same as option --object</p>

<p style="margin-top: 1em">--object <br>
This option is used to specify the object on which the
command is operating. Make sure you choose the right object.
Of course this will also fail when the object is not <br>
fetchable with (in the objects list of) --storage_type.</p>

<p style="margin-top: 1em">-p Same as option --pretty.</p>

<p style="margin-top: 1em">--pretty <br>
On command which produce an output, this option can be used
to draw a fancy box around the output.</p>

<p style="margin-top: 1em">-r Same as option --replace.</p>

<p style="margin-top: 1em">--replace <br>
For some command this is the default option. It replace the
value of a given attribute with a new value.</p>

<p style="margin-top: 1em">-s Same as option
--storage_type.</p>

<p style="margin-top: 1em">--storage_task <br>
Name fo the action that can be performed. Valid actions
are:</p>

<p style="margin-top: 1em">get_all_values <br>
set_all_values <br>
add_node <br>
get_value <br>
set_value <br>
list <br>
delete_node <br>
rename_node</p>

<p style="margin-top: 1em">--storage_type <br>
This option defines the &rsquo;type of the object&rsquo; the
command is operating with. A &rsquo;type of object&rsquo; is
a certain set of objects with common attributes. For example
all POSIX <br>
account objects. You can easily define new types of objects
in the configuration file. The default location of this file
is /etc/cipux/cipux-storage-structure.conf.</p>

<p style="margin-top: 1em">-t Same as --storage_task.</p>

<p style="margin-top: 1em">-V Same as option --version.</p>

<p style="margin-top: 1em">--version <br>
Prints the version and exits.</p>

<p style="margin-top: 1em">--verbose <br>
Not implemented jet.</p>

<p style="margin-top: 1em">-l Same as option --list</p>

<p style="margin-top: 1em">--list <br>
Lists all object scopes. The object scopes are red from the
configuration file. The default location of the
configuration file is
/usr/share/cipux/etc/cipux-storage.perl. <br>
One object type is needed for the --storage_type option.</p>

<p style="margin-top: 1em">-v Same as option --verbose.</p>

<p style="margin-top: 1em">--value <br>
On some commands this is use to provide a value for an
object or an attribute.</p>

<p style="margin-top: 1em">-x Same as option
--mattrvalue.</p>

<p style="margin-top: 1em">-y Same as option
--attrvalue.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This is the command line client for CipUX::Storage. It can
be used to get modify or delete CipUX storage objects.</p>

<p style="margin-top: 1em">COMMANDS <br>
cipux_storage_client -t get_value <br>
cipux_storage_client -t set_value <br>
cipux_storage_client -t get_all_values <br>
cipux_storage_client -t set_all_values <br>
cipux_storage_client -t add_node <br>
cipux_storage_client -t rename_node <br>
cipux_storage_client -t delete_node</p>

<p style="margin-top: 1em">cipux_storage_client -t
get_value <br>
Retrieve one or more LDAP values for every given attribute
of a given object.</p>

<p style="margin-top: 1em">cipux_storage_client -t
get_all_values <br>
Retrieve one or more LDAP values for every given attribute
of all objects in a given object type.</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value <br>
(1) You can add values with cipux_storage_client -t
set_value.</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e memberUid -o testgroup -v
login -a</p>

<p style="margin-top: 1em">But this make only a difference
for LDAP attributes which can be there more then one
time.</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e memberUid -o testgroup -v
login1 -a <br>
cipux_storage_client -t set_value -s all_group_node -e
memberUid -o testgroup -v login2 -a</p>

<p style="margin-top: 1em">This will result:</p>

<p style="margin-top: 1em">memberUid: login1 <br>
memberUid: login2</p>

<p style="margin-top: 1em">Where as the following lines
have a different result:</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e groupType -o testgruppe -v
public -a</p>

<p style="margin-top: 1em">The resulting exception:</p>

<p style="margin-top: 1em">attribute
&rsquo;groupType&rsquo; cannot have multiple values at
./cipux_storage_client -t set_value line 369</p>

<p style="margin-top: 1em">In this case you have to remove
the -a option from your line or use -r.</p>

<p style="margin-top: 1em">(2) The default behavior is to
replace values. Values can be replaces with:</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e groupType -o testgruppe -v
private</p>

<p style="margin-top: 1em">or</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e groupType -o testgruppe -v
private -r</p>

<p style="margin-top: 1em">This will replace the existing
value with the new one.</p>

<p style="margin-top: 1em">But be aware (!), if you have 3
members in a group, for example:</p>

<p style="margin-top: 1em">memberUid: login1 <br>
memberUid: login2 <br>
memberUid: login3</p>

<p style="margin-top: 1em">after command the command:</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e memberUid -o testgroup -v
login4</p>

<p style="margin-top: 1em">you will have only one
member!</p>

<p style="margin-top: 1em">memberUid: login4</p>

<p style="margin-top: 1em">Therefor the default behavior is
to replace all but one value. The replace and not the add is
the default behavior, because it there are more single
attributes in LDAP and <br>
therefor the probability of failure will be less if replace
is the default behavior.</p>

<p style="margin-top: 1em">(3) Also LDAP attributes can be
deleted. If you have 2 memberUid&rsquo;s for example the
delete operation will led to an exception:</p>

<p style="margin-top: 1em">modify/delete: memberUid: no
such value at ./cipux_storage_client -t set_value line
369</p>

<p style="margin-top: 1em">So to delete all (!) member you
have to do two LDAP operations:</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_value -s all_group_node -e memberUid -o testgroup -v
login -r <br>
cipux_storage_client -t set_value -s all_group_node -e
memberUid -o testgroup -v login -d</p>

<p style="margin-top: 1em">Where as the value from -v is
not important.</p>

<p style="margin-top: 1em">cipux_storage_client -t
set_all_values <br>
Set all LDAP values of a given object and attribute.</p>

<p style="margin-top: 1em">cipux_storage_client -t add_node
<br>
Adds an LDAP node.</p>

<p style="margin-top: 1em">SYNOPIS</p>

<p style="margin-top: 1em">cipux_storage_client -t add_node
-s &lt;TYPE&gt; -o &lt;NAME&gt; -x
&lt;ATTR&gt;=&lt;VALUE&gt; [-x &lt;ATTR&gt;=&lt;VALUE&gt;
...]</p>

<p style="margin-top: 1em">Usage example</p>

<p style="margin-top: 1em">cipux_storage_client -t add_node
-s cipux_room -o test1 -x objectClass=room -x
objectClass=cipuxRoom -x cn=test1</p>

<p style="margin-top: 1em">If you do not provide cn=NAME
for example, you will get the following exception:</p>

<p style="margin-top: 1em">EXCEPTION mandatory attr [cn] is
missing! <br>
Please provide -x or --mattrvalue command line option! <br>
Example: -x cn=&lt;VALUE&gt;</p>

<p style="margin-top: 1em">To add a user node (not a
complete user account!) this will create a half user account
named testuser:</p>

<p style="margin-top: 1em">cipux_storage_client -t add_node
-s cipux_account.user -o testuser -x cipuxFirstname=test -x
cipuxLastname=user -x objectClass=cipuxAccount -x
objectClass=posixAccount -x objectClass=shadowAccount -x
uid=testuser -x cn=testuser -x cipuxCreationDate=2007-10-26
-x uidNumber=20000 -x gidNumber=20000 -x
homeDirectory=/home/testuser -x objectClass=imapUser -x
mailMessageStore=/tmp -D 129</p>

<p style="margin-top: 1em">Of course this is just an
example. It is not a good idea to give /tmp as mail storage
directory or use a static uidNumber. But this or a similar
command can be user to test the <br>
LDAP layer.</p>

<p style="margin-top: 1em">cipux_storage_client -t
rename_node <br>
The rename command sets upon the Net::LDAP command modrdn.
And due to the fact that simply rename a LDAP dn is not hole
task of renaming an LDAP leaf the command can rename only
<br>
certain LDAP objects.</p>

<p style="margin-top: 1em">It can for example rename a
cipuxConfiguration LDAP leaf. Before renaming it looks
basically like this:</p>

<p style="margin-top: 1em">dn:
cn=testconfig,ou=Configuration,ou=CipUX,dc=nodomain <br>
cipuxVariable: testvalue <br>
cn: testconfig <br>
objectClass: top <br>
objectClass: cipuxConfiguration</p>

<p style="margin-top: 1em">If you now issue the
command:</p>

<p style="margin-top: 1em">cipux_storage_client -t
rename_node -s cipux_configuration -o testconfig -v
myconfig</p>

<p style="margin-top: 1em">You will get</p>

<p style="margin-top: 1em">dn:
cn=myconfig,ou=Configuration,ou=CipUX,dc=nodomain <br>
cipuxVariable: testvalue <br>
cn: testconfig <br>
cn: myconfig <br>
objectClass: top <br>
objectClass: cipuxConfiguration</p>

<p style="margin-top: 1em">You noticed the &rsquo;cn&rsquo;
has doubled, since LDAP expect a corresponding
&rsquo;cn&rsquo; in this LDAP object? There for this
configuration has now two names. It should be difficult to
crate now <br>
a new &rsquo;testconfig&rsquo;. You have to delete
&rsquo;cn: testconfig&rsquo; attribute and value before you
can create a new &rsquo;testconfig&rsquo;. Because this is
rather confusing, you should avoid renaming <br>
where possible. Deleting an object and recreate it is a
safer way.</p>

<p style="margin-top: 1em">cipux_storage_client -t
delete_node <br>
Deletes a given LDAP node.</p>

<p style="margin-top: 1em">DIAGNOSTICS <br>
TODO</p>

<p style="margin-top: 1em">EXIT STATUS <br>
TODO</p>

<p style="margin-top: 1em">CONFIGURATION <br>
/usr/share/cipux/etc/cipux_storage.perl</p>

<p style="margin-top: 1em">DEPENDENCIES <br>
CipUX::Storage::Client</p>

<p style="margin-top: 1em">INCOMPATIBILITIES <br>
Not known.</p>

<p style="margin-top: 1em">BUGS AND LIMITATIONS <br>
Not known.</p>

<p style="margin-top: 1em">SEE ALSO <br>
See the CipUX webpage and the manual at
&lt;http://www.cipux.org&gt;</p>

<p style="margin-top: 1em">See the mailing list
&lt;http://sympa.cipworx.org/wws/info/cipux-devel&gt;</p>

<p style="margin-top: 1em">AUTHOR <br>
Christian Kuelker &lt;christian.kuelker@cipworx.org&gt;</p>

<p style="margin-top: 1em">LICENSE AND COPYRIGHT <br>
Copyright (C) 2008 - 2009 by Christian Kuelker</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
the GNU General Public License as published by the Free
Software Foundation; either <br>
version 2, or (at your option) any later version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 59
Temple Place, Suite 330, <br>
Boston, MA 02111-1307 USA</p>

<p style="margin-top: 1em">perl v5.20.2 2015-07-24
CIPUX_STORAGE_CLIENT(1p)</p>
<hr>
</body>
</html>
