<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>JIGDO-FILE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">JIGDO-FILE(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">JIGDO-FILE(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
jigdo-file - Prepare files for Jigsaw Download (distribution of huge files, e.g.
  CD images).
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>jigdo-file</b> <b> </b><i> COMMAND</i><b></b> <b></b> [
  <b>--image=</b><i>cdrom.iso</i> <b></b> ] [
  <b>--jigdo=</b><i>cdrom.jigdo</i><b></b> ] [
  <b>--template=</b><i>cdrom.template</i> <b></b> ] [ <b>--force</b> ] [ <b>MORE
  OPTIONS</b> ] [ <b></b><i>FILES</i><b></b><i> ...</i> |
  <b>--files-from=</b><i>f</i><b></b> ]
<br/>
 <b>Common COMMANDs: make-template,</b> <b>make-image, verify</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Jigsaw Download, or short jigdo, is a scheme developed primarily to make it easy
  to distribute huge filesystem images (e.g. CD (ISO9660) or DVD (UDF) images)
  over the internet, but it could also be used for other data which is awkward
  to handle due to its size, like audio/video files or large software packages.
<div class="Pp"></div>
jigdo tries to ensure that the large file (always called <i>image</i> from now
  on) is downloaded in small parts which can be stored on different servers.
  People who want to download the image do so by telling the <b>jigdo</b>(1)
  <b>(NOT IMPLEMENTED YET)</b> download tool to process one ` <i>.jigdo</i>'
  file; using it, <b>jigdo</b> downloads the parts and reassembles the image.
  <b>jigdo-file</b> is used to prepare the files for download.
<div class="Pp"></div>
What makes jigdo special is that the parts that are used to reconstruct the
  image can have any size and content - they only need to be contained in a
  contiguous region anywhere in the image.
<div class="Pp"></div>
For example, if you wish to distribute an ISO9660 image which contains a
  snapshot of an FTP server, you can instruct <b>jigdo-file</b> to prepare the
  download data in such a way that when people use <b>jigdo</b> to download the
  image, <b>jigdo</b> actually fetches the individual files from the FTP server
  and assembles them into an exact copy of your image - during the download! (If
  the image is not a filesystem dump, you can use <b>split</b>(1) to create the
  small parts that the image will be reassembled from.)
<div class="Pp"></div>
You are completely free to choose where the individual parts of the image are
  stored: They may be in entirely different directories on different servers
  (e.g. because of storage/bandwidth constraints), but this is invisible to the
  people downloading your image. The information about available servers only
  needs to be added to the ` <i>.jigdo</i>' file by you before distributing it.
<div class="Pp"></div>
The `DETAILS' section below contains technical details on how jigdo works. The
  `EXAMPLES' section lists a number of common scenarios and may help you to get
  an idea of what jigdo is useful for.
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
Many options are specific to a particular <i>COMMAND</i>; the ones below are
  general or used by several commands. Further options are listed below with the
  individual commands. All options are silently ignored if they are not
  applicable to the current command. For any <i>BYTES</i> parameters to options,
  you can append one of the letters `k', `M' or `G' to the amount you specify,
  to indicate kilobytes, megabytes or gigabytes.
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h --help</b></dt>
  <dd class="It-tag">Output short summary of commands and options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H --help-all</b></dt>
  <dd class="It-tag">Output complete summary of commands and options.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v --version</b></dt>
  <dd class="It-tag">Output program version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i --image=</b><i>cdrom.iso</i><b></b></dt>
  <dd class="It-tag">Specify location of the file containing the image. The
      image is the large file that you want to distribute.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-j --jigdo=</b><i>cdrom.jigdo</i><b></b></dt>
  <dd class="It-tag">Specify location of the Jigsaw Download description file.
      The jigdo file is a human-readable file generated by <b>jigdo-file</b>, to
      which you add information about all the servers you are going to upload
      the files to. <b>jigdo</b> will download this file as the first step of
      retrieving the image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t --template=</b><i>cdrom.template</i><b></b></dt>
  <dd class="It-tag">Specify location of the image `template' file. The template
      file is a binary file generated by <b>jigdo-file</b>, it contains
      information on how to reassemble the image and also (in compressed form)
      all the data from the image which was not found in any of the parts.
    <div style="height: 1.00em;">&#x00A0;</div>
    Depending on the command, each of these three files is used sometimes for
      input, sometimes for output. If the file is to be used for output for a
      particular command and the output file already exists, <b>jigdo-file</b>
      exits with an error, unless <b>--force</b> is present.
    <div style="height: 1.00em;">&#x00A0;</div>
    In most cases, you will only need to specify one out of <b>-i</b> <b>-j</b>
      <b>-t</b>, because any missing filenames will be deduced from the one you
      specify. This is done by first stripping any extension from the supplied
      name and then appending nothing (if deducing <b>--image</b>), `
      <i>.jigdo</i>' or ` <i>.template</i>'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r --report=default|noprogress|quiet|grep</b></dt>
  <dd class="It-tag">Control how verbose the program is, and what format the
      output has: <b>noprogress</b> is the same as <b>default</b> except that no
      `x% done' progress messages are printed. <b>quiet</b> restricts the output
      to what is absolutely necessary, mostly error messages. <b>grep</b> is
      only different from <b>default</b> for the <b>make-template</b> command:
      It enables output in a simple ` <i>&lt;offset&gt;</i> <i>&lt;file&gt;</i>'
      format which is useful when searching for binary files in other binary
      files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f --force</b></dt>
  <dd class="It-tag">Overwrite existent output files without complaining.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-force</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Refuse to overwrite existent
      output files.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-c --cache=</b><i>jigdo-cache.db</i><b></b></dt>
  <dd class="It-tag"><b>jigdo-file</b> usually needs to read the entire contents
      of all the <i>FILES</i> you specify. If you use it repeatedly (e.g.
      because you make a new CD image available daily), caching the file
      information will increase the program's speed significantly. The cache
      file is automatically created if it is not yet present. Data is usually
      both read from and written to it.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-cache</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Do not use a cache.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--cache-expiry=</b><i>SECONDS</i><b></b></dt>
  <dd class="It-tag">Set maximum age of cache entries. Any entries older than
      this will be removed from the cache. The default is 30 days. You can
      append one of the letters `h', `d', `w', `m', `y' to denote hours, days,
      weeks, months or years, respectively. A value of `0' or `off' disables
      expiry, so that all entries will stay in the cache forever. See the
      section `CACHE FILES' below for more information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--readbuffer=</b><i>BYTES</i><b></b></dt>
  <dd class="It-tag">Set size of internal buffers. The default is 128k - if you
      have a fast disc, increasing this value may make <b>jigdo-file</b> faster,
      but in general, changing it is not necessary.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--md5-block-size=</b><i>BYTES</i><b></b></dt>
  <dd class="It-tag"><b>Uninteresting internal parameter.</b> Set size of blocks
      into which files are subdivided. The default is 128k. If you change it,
      any cache file will have to be regenerated. Internally, <b>jigdo-file</b>
      may choose to use a slightly larger or smaller value.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-T --files-from=</b><i>file</i><b></b></dt>
  <dd class="It-tag">Read file and directory names from the specified file. If
      <i>file</i> is `-', read names from standard input. Each line in the file
      is taken as a name, so the names may contain spaces, but not newline
      characters. An empty line causes <b>jigdo-file</b> to stop reading from
      the file.
    <div style="height: 1.00em;">&#x00A0;</div>
     <b>find</b>(1) is a powerful tool for generating file lists, but make sure
      to use ` <b>find -type</b> <b>f</b>' if possible - otherwise, if you
      instruct <b>find</b> to output both a filename and a symlink to that
      filename, <b>jigdo-file</b> will read the file contents twice.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--hex</b></dt>
  <dd class="It-tag">Output checksums in hexadecimal instead of Base64-like
      format. This should not be used with the <b>make-template</b> command,
      because the resulting ` <i>.jigdo</i>' file violates the ` <i>.jigdo</i>'
      file format. Its intended use is to make <b>jigdo-file</b> more
      interoperable with other Unix shell utilities like <b>md5sum</b>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-hex</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Use jigdo's own Base64-like
      encoding of checksums.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug[=help|=all|=</b><i>UNIT,~UNIT...</i><b>
    ]</b></dt>
  <dd class="It-tag">Switch on or off debugging output. Just `--debug' is
      equivalent to `--debug=all'. The argument is a comma-separated list of
      unit names for which debugging output is to be enabled, or disabled if the
      name is preceded by `~'. The special name `all' means all units. By
      default, debugging output is switched off except for the units `assert'
      and `general'. The exact list of available units for which debugging can
      be switched on depends on whether jigdo was compiled with debugging
      support - the list can be printed with `--debug=help'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b></b><i>FILES</i><b></b></dt>
  <dd class="It-tag">Names of files or directories to use as input. These are
      the parts that are contained in the image. In case one of the names is a
      directory, the program recursively scans the directory and adds all files
      contained in it. While doing this, it follows symbolic links, but avoids
      symlink loops.
    <div style="height: 1.00em;">&#x00A0;</div>
    If one of the filenames starts with the character `-', you must precede the
      list of files with `--'. A value of `-' has <b>no</b> special meaning in
      this list, it stands for a file whose name is a single hyphen.</dd>
</dl>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
The command name is the first non-option argument passed to <b>jigdo-file</b>.
  Most commands have short abbreviations as well as long names. <b>The short
  command</b> <b>names should not be used in scripts - there may be
  incompatible</b> <b>changes to them in the future!</b>
<h2 class="Ss" title="Ss" id="MAKE-TEMPLATE,_MT"><a class="selflink" href="#MAKE-TEMPLATE,_MT">MAKE-TEMPLATE,
  MT</a></h2>
Reads <i>image</i> and <i>FILES</i>, creates ` <i>.jigdo</i>' and `
  <i>.template</i>'. This is the main functionality of <b>jigdo-file</b>.
<div class="Pp"></div>
It is possible to specify both <b>--image=-</b> and <b>--files-from=-</b>. In
  this case, first the list of files is read from standard input until an empty
  line is encountered. Everything following it is assumed to be the image data.
  This can be useful if you use <b>mkisofs</b>(1) or similar programs that can
  output the complete image on their standard output, because there is no need
  to store the image on disc temporarily.
<div class="Pp"></div>
If a <i>FILES</i> argument contains the characters `//' (Unix) or `\.\'
  (Windows), this has special meaning. In the final jigdo file that users will
  download, each of the parts is referenced in the `[Parts]' section with a URI
  of the form `Label:some/filename'. (See `FORMAT OF .JIGDO FILES' below for a
  detailed description.) The `[Servers]' section gives a mapping of labels to
  servers on the internet, with lines like
  `Label=http://myserver.org/jigdofiles/'. Using this information, <b>jigdo</b>
  will create the final download URI for the part,
  `http://myserver.org/jigdofiles/some/filename'. Specifying `//' (or `\.\') in
  a file or directory name serves to `cut off' the names at the right directory
  level. For example, if the Unix path of one of your <i>FILES</i> is
  `/path/some/filename', you can tell <b>jigdo-file</b> to cut off after the
  `/path' by passing it the argument `/path//some/filename', or `/path//' if you
  want the whole directory scanned. The path names need not be absolute;
  `somedirectory//' is also possible.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--label </b><i>Label=/path</i><b></b></dt>
  <dd class="It-tag">Specify a name to use as the label name for a path on disc.
      (Influences the output jigdo file.) If you used `//' in the <i>FILES</i>
      arguments as described above, <b>jigdo-file</b> will by default pick label
      names automatically (`A', `B' etc.). With this option, you can give labels
      more meaningful names. Note that the label name will only be used if one
      or more <i>FILES</i> begin with `/path//'.
    <div style="height: 1.00em;">&#x00A0;</div>
    Try to use label names that start with uppercase characters, to disambiguate
      them clearly from protocol names like `http', `ftp'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--uri
    </b><i>Label=http://some.server.org/</i><b></b></dt>
  <dd class="It-tag">By default, using <b>--label</b> as described above will
      cause lines of the form `Label=file:/path/' to be written to the
      `[Servers]' section of the output jigdo file. If you want to override the
      `file:' URI so that the line reads `Label=http://some.server.org/', you
      can do so by specifying <b>--uri</b> along with <b>--label</b>. Giving
      just <b>--uri</b> <b></b><i>Label=...</i><b></b> without the corresponding
      <b>--label</b> <b></b><i>Label=...</i><b></b> has no effect, and even if
      you specify both, an entry is only added to the `[Servers]' section if the
      label is referenced by at least one `[Parts]' entry.
    <div style="height: 1.00em;">&#x00A0;</div>
    The supplied value is not quoted by the program; if it contains characters
      such as space or any of the characters #&quot;'\ then you must quote it.
      (Under Unix, you may need to quote the value twice to also protect it from
      the shell, e.g. \\\\ or '\\' to get a single backslash in the URI.)
    <div style="height: 1.00em;">&#x00A0;</div>
    The mapping specified with an <b>--uri</b> option is ignored if it is
      already present in the output jigdo file.
    <div style="height: 1.00em;">&#x00A0;</div>
    Users of the Windows version may notice that the `\' directory separators
      are converted into `/' in the `file:' URIs that are generated by default.
      This is done to increase cross-platform compatibility of `file:' - the
      <b>print-missing</b> command of the Windows version will automatically
      re-convert the characters when it prints the URIs. In case you supply your
      own `file:' URIs under Windows using <b>--uri</b>, you must also exchange
      `/' and `\'.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-0 to -9</b></dt>
  <dd class="It-tag">Set amount of compression in the output template file, from
      <b>-0</b> (no compression) to <b>-9</b> (maximum compression). The default
      is <b>-9</b>, which can make the template generation quite slow. By
      default, the compression algorithm used is the same as for
    <b>gzip</b>(1).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gzip and --bzip2</b></dt>
  <dd class="It-tag">Choose between the gzip and bzip2 compression algorithms.
      The default is gzip. Bzip2 usually gives a better compression ratio, but
      compression is significantly slower than with gzip.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--min-length=</b><i>BYTES</i><b></b></dt>
  <dd class="It-tag">Set minimum length of a part for <b>jigdo-file</b> to look
      for it in the image. The default is 1k. Parts smaller than this will never
      be found in the image, so their data will be included in the template
      file. The search algorithm used requires such a minimum length, otherwise
      template generation could become extremely slow. If you know for sure that
      all your <i>FILES</i> are larger than a certain amount, you can increase
      <b>jigdo-file</b>'s speed slightly by specifying the amount with this
      option. There is a hard-wired absolute minimum of 256 bytes - anything
      lower will silently be set to 256.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--merge=</b><i>FILE</i><b></b></dt>
  <dd class="It-tag">Include the contents of <i>FILE</i> in the output `
      <i>.jigdo</i>' file. The file can contain data which you want added to the
      output (for example, a `[Servers]' section with a list of your servers as
      entries), or it can be the jigdo file output by an earlier run of
      <b>jigdo-file</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    It is possible to specify the same file for input with <b>--merge</b> and
      for output with <b>--jigdo</b>. However, you will also need to use
      <b>--force</b> to make the program overwrite the old version of the jigdo
      file with the new one. <i>FILE</i> can be `-' for standard input.
    <div style="height: 1.00em;">&#x00A0;</div>
    When <b>adding</b> new information to the supplied file, <b>jigdo-file</b>
      will not insert new lines into the `[Parts]' section if an entry for the
      same MD5 checksum (but not necessarily with the same URI!) already exists,
      and it will not insert new lines into the `[Servers]' section if a
      completely identical entry already exists.
    <div style="height: 1.00em;">&#x00A0;</div>
    When <b>reading in</b> the existing <i>FILE</i>, the behaviour is slightly
      different: The program <b>preserves</b> entries in the `[Parts]' section
      with identical checksum, but different URIs. For completely identical
      entries (same checksum and URI), only one entry is preserved and the
      duplicates are removed. The `[Servers]' section is left untouched.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--image-section</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Causes <b>jigdo-file</b> to add
      an `[Image]' section to the ` <i>.jigdo</i>' file.
    <div style="height: 1.00em;">&#x00A0;</div>
    As an exception, a new `[Image]' section is <b>not</b> added if you use
      <b>--merge</b> and the file to merge contains an `[Image]' section with a
      line which reads `Template-MD5Sum=' (end of line after the `='). In this
      case, the generated template data's MD5 checksum value is just added after
      the `=' of the first line of this form in the file - no whole new
      `[Image]' section is appended. This behaviour is useful because it allows
      you to pass via <b>--merge</b> an `[Image]' section with arbitrary content
      and then have the MD5 checksum automatically added by <b>jigdo-file</b>.
      The section `FORMAT OF .JIGDO FILES' below explains the `[Image]' section
      contents in greater detail.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-image-section</b></dt>
  <dd class="It-tag">Do <b>not</b> include an `[Image]' section in the `
      <i>.jigdo</i>' file. You need to add one yourself if you use this option.
      However, doing that is not easy (you also need to add a `Template-MD5Sum'
      line with the correct checksum, or <b>jigdo</b> will complain), so use of
      this option is discouraged.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--servers-section</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Causes <b>jigdo-file</b> to add
      a `[Servers]' section to the ` <i>.jigdo</i>' file. This default section
      uses `file:' URIs, which allows for immediate reassembly of the image from
      the local filesystem, and is also useful if you want to edit the file
      manually and replace the `file:' URIs with other URIs.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-servers-section</b></dt>
  <dd class="It-tag">Do <b>not</b> add a `[Servers]' section at the end of the `
      <i>.jigdo</i>' file. Useful e.g. if you are going to append the section
      with a script.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--match-exec=</b><i>SHELLCOMMAND</i><b></b></dt>
  <dd class="It-tag">Whenever a file is found in the image, execute the supplied
      command string by passing it to a shell. <b>jigdo-file</b> sets up a
      number of environment variables with information about the file match. For
      example, if the file ` <i>/path//a/b/file</i>' was found in the image and
      `Label:a/b/file' is going to be written to the ` <i>.jigdo</i>' file:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>LABEL</b>=&quot;Label&quot; - Name of the label for the
      file. The example assumes that ` <b>--label</b> Label=/path' was specified
      by you. In the absence of such an option, <b>LABEL</b> will be set but
      empty.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>LABELPATH</b>=&quot;/path/&quot; - The path
      corresponding to the label, or in other words, the prefix of the matched
      file's path that will <b>not</b> appear in the output ` <i>.jigdo</i>'
      file. Is set even without any ` <b>--label</b>' option present. Ends with
      a slash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>MATCHPATH</b>=&quot;a/b/&quot; - The rest of the path,
      without the leafname of the matched file. Is either empty or ends with a
      slash.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>LEAF</b>=&quot;file&quot; - The leafname of the matched
      file.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>MD5SUM</b>=&quot;lNVdUSqbo2yqm33webrhnw&quot; - The
      md5sum of the matched file, in Base64-like format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag"><b>FILE</b>=&quot;/path//a/b/file&quot; - For convenience,
      the complete path of the file. The variable is always set to
      $LABELPATH$MATCHPATH$LEAF.</dd>
</dl>
</div>
<div style="height: 1.00em;">&#x00A0;</div>
Please be careful to correctly quote the string passed to this option, otherwise
  your supplied command will not work with filenames that contain spaces. As an
  example, to create a backup of hard links to the matched files, use the
  following option: --match-exec='mkdir -p &quot;${LABEL:-.}/$MATCHPATH&quot;
  &amp;&amp; ln -f &quot;$FILE&quot; &quot;${LABEL:-.}/$MATCHPATH$LEAF&quot;'
<div style="height: 1.00em;">&#x00A0;</div>
By default, no command is executed. Use --match-exec=&quot;&quot; to remove a
  command string which was set with an earlier use of this option.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--greedy-matching</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Imagine that your image
      contains a <i>.tar</i> file which in turn contains another file <i>x</i>,
      and that you provide both the <i>.tar</i> and the files inside it on the
      command line. When <b>jigdo-file</b> scans the image, it encounters the
      beginning of the <i>.tar</i> file, and then the file <i>x</i>.
    <div style="height: 1.00em;">&#x00A0;</div>
    At this point, a decision must be made: Should the smaller file <i>x</i> be
      recorded as matched, or should it be ignored in favour of the larger (and
      thus better) match of the <i>.tar</i> file? Unfortunately, at this point
      it is not clear whether there will actually be a full match of the
      <i>.tar</i>, so by default, the program prefers the small match.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-greedy-matching</b></dt>
  <dd class="It-tag">In the case where a large partial match is present and a
      shorter match has been confirmed, ignore the small match. (See the option
      above.)</dd>
</dl>
<h2 class="Ss" title="Ss" id="MAKE-IMAGE,_MI"><a class="selflink" href="#MAKE-IMAGE,_MI">MAKE-IMAGE,
  MI</a></h2>
Reads ` <i>.template</i>' and <i>FILES</i>, creates <i>image</i> (or `
  <i>imagename.tmp</i>'). Provides a rudimentary way of reassembling images -
  <b>jigdo</b> is usually better suited for this task. However, in contrast to
  <b>jigdo</b>, no `<i>.jigdo</i>' file is required.
<div class="Pp"></div>
If the image is to be written to a file (and not to standard output), it is
  possible to create the image in several steps, with several invocations of `
  <b>jigdo-file</b> <b>make-image</b>', as follows: You first invoke
  <b>jigdo-file</b>, specifying as many files as are available at this time. The
  program scans the files, and those that are contained in the image are copied
  to a temporary file, whose name is formed by appending ` <i>.tmp</i>' to the
  image filename.
<div class="Pp"></div>
For all further files which could be parts of the image, you repeat this
  process. As soon as all parts are present, the temporary file will be
  truncated slightly (to delete some administrative data that <b>jigdo-file</b>
  appends at the end) and renamed to the final image name. The possibility of
  reassembling the image in several steps is especially useful for gathering
  files from removable media, e.g. several older CDs.
<div class="Pp"></div>
Scripts using <b>make-image</b> can detect whether image creation is complete by
  checking the exit status: 0 signals successful creation, whereas 1 means that
  more files need to be supplied. Other errors result in an exit status of 2
  (`recoverable', e.g. file not found) or 3 (non-recoverable, e.g. write error).
<dl class="Bl-tag">
  <dt class="It-tag"><b>--check-files</b></dt>
  <dd class="It-tag"><b>This is the default.</b> Whenever any part is copied to
      the image, re-check its checksum against the checksum stored in the
      template. It is recommended that you leave this switched on, even if it
      slows down image creation a bit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-check-files</b></dt>
  <dd class="It-tag">Do not check files' checksums when copying them to the
      image. This can be safely used when no cache file is used (which means
      that files will be written to the image immediately after being scanned)
      or the whole image is checked later with the <b>verify</b> command.</dd>
</dl>
<h2 class="Ss" title="Ss" id="PRINT-MISSING,_PM"><a class="selflink" href="#PRINT-MISSING,_PM">PRINT-MISSING,
  PM</a></h2>
Reads ` <i>.jigdo</i>', ` <i>.template</i>' and (if present) `
  <i>imagename.tmp</i>', outputs a list of URIs still needed to completely
  reassemble the image.
<div class="Pp"></div>
Together with the <b>make-image</b> command, this provides most of the
  functionality of <b>jigdo</b> on the command line.
<div class="Pp"></div>
For each part that is not yet present in the temporary image file, the file
  checksum is looked up in the `[Parts]' section of the jigdo file. Any label in
  the corresponding entry is then expanded according to the label definitions in
  the `[Servers]' section and printed on standard output. <b>jigdo</b> allows
  you to specify several alternative locations for each label in this section,
  but <b>print-missing</b> will only output the first one for each missing part.
<div class="Pp"></div>
If the checksum cannot be found in the `[Parts]' section (this Should Not Happen
  unless you deleted that section), a lookup is instead made for `MD5Sum:
  <i>&lt;checksum&gt;</i>', just like with <b>jigdo</b>. (Thus, if you want to
  get rid of the `[Parts]' section, you can do so if you rename each part to its
  own checksum.)
<dl class="Bl-tag">
  <dt class="It-tag"><b>--uri
    </b><i>Label=http://some.server.org/</i><b></b></dt>
  <dd class="It-tag">Override the entries in the ` <i>.jigdo</i>' file for any
      label with a URI of your choice. With the example above, a `[Parts]' entry
      of `Label:some/filename' will cause the line
      `http://some.server.org/some/filename' to be printed.
    <div style="height: 1.00em;">&#x00A0;</div>
    The supplied value is not quoted by the program; if it contains characters
      such as space or any of the characters #&quot;'\ then you must quote it.
      (Under Unix, you may need to quote the value twice to also protect it from
      the shell, e.g. \\\\ or '\\' to get a single backslash in the URI.)</dd>
</dl>
<h2 class="Ss" title="Ss" id="PRINT-MISSING-ALL,_PMA"><a class="selflink" href="#PRINT-MISSING-ALL,_PMA">PRINT-MISSING-ALL,
  PMA</a></h2>
Just like <b>print-missing</b>, this command outputs a list of URIs still needed
  to completely reassemble the image. However, <b>all</b> alternative download
  locations are printed instead of just one. In the output, the URIs for a file
  are separated from other files' URIs with blank lines. The <b>--uri</b> option
  has the same effect as for <b>print-missing</b>.
<h2 class="Ss" title="Ss" id="VERIFY,_VER"><a class="selflink" href="#VERIFY,_VER">VERIFY,
  VER</a></h2>
Reads <i>image</i> (presumably generated with <b>make-image</b>) and `
  <i>.template</i>', checks for correct checksum of image.
<div class="Pp"></div>
The template data does not only contain checksums of the individual parts, but
  also of the image as a whole. <b>make-image</b> already performs a number of
  internal checks, but if you like, you can additionally check the image with
  this command.
<h2 class="Ss" title="Ss" id="SCAN,_SC"><a class="selflink" href="#SCAN,_SC">SCAN,
  SC</a></h2>
Reads all the <i>FILES</i> and enters them into the cache, unless they are
  already cached. The <b>--cache</b> option must be present for this command.
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-scan-whole-file</b></dt>
  <dd class="It-tag"><b>This is the default.</b> This only causes the first
      <b>--md5-block-size</b> bytes of each file to be read. If the cache is
      used later by <b>jigdo-file make-image</b>, the rest of the file will be
      read once these first bytes are recognized in the input image.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--scan-whole-file</b></dt>
  <dd class="It-tag">Immediately read the entire file contents and store them in
      the cache.</dd>
</dl>
<h2 class="Ss" title="Ss" id="MD5SUM,_MD5"><a class="selflink" href="#MD5SUM,_MD5">MD5SUM,
  MD5</a></h2>
Reads all the <i>FILES</i> and prints out MD5 checksums of their contents. This
  command is quite similar to <b>md5sum</b>(1), except that the checksum is
  output in the Base64-like encoding which is also used elsewhere by
  <b>jigdo-file</b>.
<div class="Pp"></div>
The <i>FILES</i> arguments are processed in the same way as with the other
  commands, which means that recursion automatically takes place for any
  arguments that are directories, and that symbolic links are not listed except
  when the file(s) they point to are not reachable directly.
<div class="Pp"></div>
In the checksum list printed on standard output, only the part of the filename
  following any `//' (or `\.\' on Windows) is printed. Any <b>--cache</b> will
  be used for querying files' MD5 checksums and/or writing the checksums of
  scanned files.
<h2 class="Ss" title="Ss" id="LIST-TEMPLATE,_LS"><a class="selflink" href="#LIST-TEMPLATE,_LS">LIST-TEMPLATE,
  LS</a></h2>
Reads a ` <i>.template</i>' file and outputs low-level information about the
  image and all parts contained in it, including offset, length and checksum.
<div class="Pp"></div>
You can also use this command with temporary image files (by specifying
  something like <b>--template=imagename.tmp</b>) - in that case, the output
  also distinguishes between parts that have been written to the image and parts
  that haven't.
<div class="Pp"></div>
The exact output format may change incompatibly between different jigdo
  releases. The following different types of lines can be output. `have-file'
  only occurs for ` <i>.tmp</i>' files, indicating a file that has already been
  successfully written to the temporary file:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
in-template  <i>offset-in-image length</i>
need-file  <i>offset-in-image length file-md5sum filestart-rsyncsum</i>
have-file  <i>offset-in-image length file-md5sum filestart-rsyncsum</i>
image-info  <i>image-length image-md5sum rsyncsum-size</i>
</pre>
<h1 class="Sh" title="Sh" id="DETAILS"><a class="selflink" href="#DETAILS">DETAILS</a></h1>
Jigsaw Download was created with the format of ISO9660 CD images in mind -
  however, the following also applies to many other filesystem formats, as well
  as to `tar' archives and uncompressed `zip' archives. A CD image contains both
  information for organizing the filesystem (header with disc name etc., ISO9660
  directory data, data of extensions such as Joliet or RockRidge, zero padding)
  and the files contained on the CD. An important property that jigdo relies on
  is that each file is stored in one contiguous section of the image; it is not
  split into two or more parts.
<div class="Pp"></div>
When <b>jigdo-file</b> is given a number of files that might be contained in an
  image, it detects whether any of the files are present using a `rolling
  checksum' inspired by the one used by <b>rsync</b>(1). The resulting data is
  written to the ` <i>.template</i>' file: If a section of the image could not
  be matched (e.g. it was directory information), the data is compressed and
  written directly to the template. However, if a matching file was found, its
  data is omitted from the template. Instead, only a reference (an MD5 checksum
  of the file) is inserted in the template.
<div class="Pp"></div>
Note that the template data only contains binary data, it does not contain any
  filenames or URIs, since it cannot be easily edited in case any of these
  values need to be changed. All that information is stored in the `
  <i>.jigdo</i>' file, a text file to which you can add URLs for your server(s).
  The jigdo file provides a mapping for each MD5 checksum to one or more
  alternative download locations for the corresponding part.
<div class="Pp"></div>
Apart from the mapping of MD5 sums to URIs, the jigdo file also contains an URI
  pointing to a download location for the template file. This way, the
  <b>jigdo</b> download tool only needs to be given one URI (that of the `
  <i>.jigdo</i>' file) to be able to download and reassemble the complete image.
<h1 class="Sh" title="Sh" id="FORMAT_OF_.JIGDO_FILES"><a class="selflink" href="#FORMAT_OF_.JIGDO_FILES">FORMAT
  OF .JIGDO FILES</a></h1>
The overall format of ` <i>.jigdo</i>' files follows that of ` <i>.ini</i>'
  files, as also used by the Gnome and KDE projects for some data. The file is
  organized into sections, each of which is preceded by a line reading
  `[Sectionname]'. Within each section, lines have the form `Label=Value'. Such
  lines are also called `entries' below. All ` <i>.jigdo</i>' files use UTF-8 as
  their character encoding.
<div class="Pp"></div>
Comments are introduced with the `#' character and extend to the end of the
  line. Whitespace is ignored at line start and end as well as to the left and
  right of section names and the `=' in entries. Furthermore, the jigdo
  utilities split up the text of the entry value (i.e. the part after the `=')
  into whitespace-separated words, much like the Unix shell. Single '' and
  double &quot;&quot; quotes can be used to prevent that e.g. URIs containing
  whitespace are split apart. Similarly, characters with special meaning (the
  characters '&quot;#\ and space/tab) must be quoted with \ to appear in the
  value. As with the shell, there is a difference between '&#x00A0;' and
  &quot;&#x00A0;&quot;: Within '&#x00A0;', the characters &quot;#\ and
  whitespace lose their special meaning and become ordinary characters, whereas
  within &quot;&#x00A0;&quot;, only the characters '# and whitespace lose their
  special meaning - in other words, backslash escapes still work inside
  &quot;&#x00A0;&quot;, but not '&#x00A0;'.
<div class="Pp"></div>
` <i>.jigdo</i>' files can optionally be compressed with <b>gzip</b>(1).
  <b>jigdo-file</b> always outputs uncompressed files, which you can compress
  yourself. <b>jigdo-lite</b> supports single uncompressed and compressed files.
<div class="Pp"></div>
(Behaviour which may change in the future and which should not be relied upon:
  <b>jigdo</b> additionally supports any number of concatenated plaintext and
  gzipped parts in the files - for example, you can compress a ` <i>.jigdo</i>'
  file and then add a couple of lines of uncompressed data to the end.)
<div class="Pp"></div>
In all cases, the ` <i>.gz</i>' extension should be removed from the filename -
  the tools will determine automatically from the file contents whether a file
  is compressed or not.
<div class="Pp"></div>
Below is a description of the individual section names used by jigdo.
<h2 class="Ss" title="Ss" id="JIGDO_SECTION"><a class="selflink" href="#JIGDO_SECTION">JIGDO
  SECTION</a></h2>
<pre>
[Jigdo]
Version=1.1
Generator=jigdo-file/1.0.0
</pre>
<div class="Pp"></div>
Information about the version of the jigdo file format used, and the program
  that generated it. There should be one such section per ` <i>.jigdo</i>' file.
<h2 class="Ss" title="Ss" id="IMAGE_SECTION"><a class="selflink" href="#IMAGE_SECTION">IMAGE
  SECTION</a></h2>
<pre>
[Image]
Filename= <i>&quot;filename for saving on user's disc&quot;</i>
Template= <i>&quot;URI where to fetch template file&quot;</i>
Template-MD5Sum=OQ8riqT1BuyzsrT9964A7g
ShortInfo= <i>single-line description of the image (200 characters max.)</i>
Info= <i>long description (5000 characters max.)</i>
</pre>
<div class="Pp"></div>
The value for the `Template' entry can be either an URL (absolute or relative to
  the URL of the jigdo file) or a string of the form `
  <i>Label</i>:<i>pathname</i>' ( <b>UNIMPLEMENTED</b>), as described below.
<div class="Pp"></div>
The `Template-MD5Sum' entry is added by <b>jigdo-file</b> and specifies the MD5
  checksum of the generated ` <i>.template</i>' file. It is used by <b>jigdo</b>
  to detect cases where the downloaded template data is corrupted or belongs to
  a different image.
<div class="Pp"></div>
Unlike other entry values, the values of the `ShortInfo' and `Info' entries are
  <b>not</b> split up into words, instead all quoting is preserved.
<div class="Pp"></div>
The value of the `Info' entry is special in that <b>jigdo</b>(1) can optionally
  parse XML markup it contains. If the markup has errors such as
  unbalanced/unsupported tags, the string is displayed literally, without XML
  parsing. Supported tags are &lt;b&gt;&lt;/b&gt; (bold), &lt;i&gt;&lt;/i&gt;
  (italic), &lt;tt&gt;&lt;/tt&gt; (typewriter font), &lt;u&gt;&lt;/u&gt;
  (underline), &lt;big&gt;&lt;/big&gt; (larger font),
  &lt;small&gt;&lt;/small&gt; (smaller font) and &lt;br/&gt; (linebreak).
  Supported entities include &amp;lt; (`&lt;'), &amp;gt; (`&gt;') and &amp;amp;
  (`&amp;'). Note that the whole `Info' entry must be on one line in the jigdo
  file.
<div class="Pp"></div>
This section may occur multiple times, but all except the first one will be
  ignored. This is useful e.g. when creating a ` <i>.jigdo</i>' file for a DVD
  image when you already have ` <i>.jigdo</i>' files for CDs with the same
  content: You can simply `[Include]' (see below) the CDs' jigdo files at the
  end of the DVD jigdo file, after its `[Image]' section.
<h2 class="Ss" title="Ss" id="PARTS_SECTION"><a class="selflink" href="#PARTS_SECTION">PARTS
  SECTION</a></h2>
<pre>
[Parts]
xJNkjrq8NYMraeGavUpllw=LabelA:part0
GoTResP2EC6Lb_2wTsqOoQ=LabelA:part1
kyfebwu6clbYqqWUdFIyaw=LabelB:some/path/part2
-J9UAimo0Bqg9c0oOXI1mQ=http://some.where.com/part3
</pre>
<div class="Pp"></div>
All lines in the section, which provides the mapping from MD5 checksums to URIs,
  have the same format: On the left side of the `=' the checksum (encoded with a
  Base64-like encoding) is given, and on the right a string corresponding to the
  part with this checksum; either a complete URI or a string of the form `
  <i>Label</i>: <i>pathname</i>', which is expanded into one or more URIs by
  looking up the definition(s) for the <i>Label</i> in the `[Servers]' section.
<div class="Pp"></div>
In case a particular MD5 checksum cannot be found in any `[Parts]' section by
  <b>jigdo</b>, the program will perform a lookup for `MD5Sum:
  <i>&lt;checksum&gt;</i>', e.g. for `MD5Sum:xJNkjrq8NYMraeGavUpllw' if you
  deleted the line for `part0' above.
<div class="Pp"></div>
A checksum appearing multiple times in this section indicates alternative
  download locations for the part.
<div class="Pp"></div>
There may be any number of `[Parts]' sections in the file; they are all
  considered when looking up MD5 checksums.
<div class="Pp"></div>
<b>jigdo-file</b> always puts the `[Parts]' section at the end of the file, and
  it even rearranges any file specified with <b>--merge</b> to have only one
  such section at the end. This is done to allow <b>jigdo</b> to display the
  information from the `[Image]' section while the rest of that file is still
  being downloaded.
<h2 class="Ss" title="Ss" id="SERVERS_SECTION"><a class="selflink" href="#SERVERS_SECTION">SERVERS
  SECTION</a></h2>
<pre>
[Servers]
LabelA=http://myserver.org/
LabelA=ftp://mirror.myserver.org/
LabelB=LabelC:subdirectory/
LabelC=http://some.where.com/jigdo/
</pre>
<div class="Pp"></div>
All lines in the section, which provides the mapping from server labels to
  server locations, have the same format: On the left side of the `=' the label
  name is given, and on the right the value to expand the label name to.
<div class="Pp"></div>
A label name appearing multiple times in this section indicates alternative
  download locations for the parts that use the label in the `[Parts]' section.
  This notation makes it very easy to add mirrors to the jigdo file.
<div class="Pp"></div>
As shown by the example above, the label values may themselves reference other
  labels. In this case, the entry `LabelB:some/path/part2' in the `[Parts]'
  section will expand to
  `http://some.where.com/jigdo/subdirectory/some/path/part2'. Loops in the label
  definitions result in undefined behaviour and must be avoided.
<div class="Pp"></div>
There may be any number of `[Servers]' sections in the file; they are all
  considered when looking up labels. Either of `[Parts]' or `[Servers]', but not
  both, can be omitted from the jigdo file.
<h2 class="Ss" title="Ss" id="COMMENT_SECTION"><a class="selflink" href="#COMMENT_SECTION">COMMENT
  SECTION</a></h2>
<pre>
[Comment]
Any text, except that lines must not begin with `['.
</pre>
<div class="Pp"></div>
All text following a `[Comment]' or `[comment]' line is ignored, up to the next
  line with a section label.
<h2 class="Ss" title="Ss" id="INCLUDE_DIRECTIVE"><a class="selflink" href="#INCLUDE_DIRECTIVE">INCLUDE
  DIRECTIVE</a></h2>
<pre>
[Include http://some.url/file.jigdo]
</pre>
<div class="Pp"></div>
Lines of this form cause the content of the specified jigdo file to be
  downloaded and parsed just like the main jigdo file. The effect will be the
  same as copying the included file's contents into the file which contains the
  include directive. (Exception: Any relative URLs are always resolved using the
  URL of the ` <i>.jigdo</i>' file that contains that relative URL.)
<div class="Pp"></div>
The URL argument can be an absolute or relative URL. Relative URLs are assumed
  to be relative to the URL of the jigdo file which contains the include
  directive. Includes can be nested, but it is an error to create a loop of
  include directives. It is <b>not</b> possible to use URLs of the form `
  <i>Label</i>: <i>pathname</i>'.
<div class="Pp"></div>
The URL cannot be quoted with &quot;&quot;. Any `]' characters in the argument
  must be escaped as `%5D', and any spaces as `%20'.
<div class="Pp"></div>
Include directives are only supported by <b>jigdo</b>, they are ignored by
  <b>jigdo-lite</b>.
<div class="Pp"></div>
An include directive terminates any previous section, but it does not start a
  new one. In other words, a new section must always be started after the
  include line, <b>jigdo</b> does not allow normal entries to appear below the
  `[Include]'.
<h1 class="Sh" title="Sh" id="CACHE_FILES"><a class="selflink" href="#CACHE_FILES">CACHE
  FILES</a></h1>
Any file specified with the <b>--cache</b> option is used to store information
  about the <i>FILES</i> presented to <b>jigdo-file</b>. When querying the
  cache, a file is considered unchanged (and the cached data is used) only if
  filename, file size and last modification time (mtime) match exactly. For the
  filename match, not the entire file name is used, but only the part following
  any `//', so that any changes to the part before the `//' will not invalidate
  the cache.
<div class="Pp"></div>
Old cache entries are removed from the cache if they have not been read from or
  written to for the amount of time specified with <b>--cache-expiry</b>.
  Entries are <b>not</b> immediately removed from the cache if the file they
  refer to no longer exists - this makes it possible to cache information about
  files on removable media.
<div class="Pp"></div>
Cache expiry only takes place <b>after</b> <b>jigdo-file</b> has done its main
  work - if any old entries are accessed before expiry takes place, they will be
  kept. For example, if the program is run using the default expiry time of 30
  days, but accesses a cache file with entries generated 2 months ago, then
  entries in that cache <b>will</b> be considered, and only those cache entries
  that were not needed during the program run will be expired.
<div class="Pp"></div>
Due to a peculiarity of the underlying database library (libdb3), cache files
  never shrink, they only grow. If a large number of entries was expired from
  your cache file and you want it to shrink, you can either just delete it (of
  course then everything will have to be regenerated) or use the utilities
  accompanying libdb3 to dump and restore the database, with a command like `
  <b>db3_dump</b> <b></b><i>old-cache.db</i><b> | db3_load</b>
  <b></b><i>new-cache.db</i> <b></b>'. For Debian, these programs are supplied
  in the package `libdb3-util'.
<div class="Pp"></div>
If a different <b>--md5-block-size</b> is specified, the entire file needs to be
  re-read to update its cache entry. If a different <b>--min-length</b> is
  specified, only the first `md5-block-size' bytes of the file need to be
  re-read.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="PREPARING_YOUR_CD_IMAGE_FOR_DISTRIBUTION"><a class="selflink" href="#PREPARING_YOUR_CD_IMAGE_FOR_DISTRIBUTION">PREPARING
  YOUR CD IMAGE FOR DISTRIBUTION</a></h2>
You have created a CD image ` <i>image.iso</i>' from some of the files stored in
  the directory ` <i>/home/ftp</i>' on your harddisc, which is also available
  online as `ftp://mysite.org'. As you don't want to waste space by effectively
  hosting the same data twice (once as files on the FTP server, once inside the
  image), and you are fed up with users' downloads aborting after 200MB and
  their restarting the download dozens of times, you decide to use jigdo. How do
  you prepare the image for download?
<div class="Pp"></div>
In fact, only one command is necessary:
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<b>jigdo-file make-template</b> <b>--image=image.iso
  --jigdo=/home/ftp/image.jigdo</b> <b>--template=/home/ftp/image.template
  /home/ftp// --label</b> <b>Mysite=/home/ftp --uri</b>
  <b>Mysite=ftp://mysite.org/</b></div>
<div class="Pp"></div>
People can now point <b>jigdo</b> at `ftp://mysite.org/image.jigdo' to download
  your image. The template file needs to be accessible as
  `ftp://mysite.org/image.template'.
<div class="Pp"></div>
Note that nothing prevents you from doing the same for an FTP server that isn't
  administrated by you - in that case, you only need to host the `
  <i>.jigdo</i>' and ` <i>.template</i>' files on your own server/homepage.
<h2 class="Ss" title="Ss" id="PREPARING_AN_ARBITRARY_LARGE_FILE_FOR_DISTRIBUTION"><a class="selflink" href="#PREPARING_AN_ARBITRARY_LARGE_FILE_FOR_DISTRIBUTION">PREPARING
  AN ARBITRARY LARGE FILE FOR DISTRIBUTION</a></h2>
We assume that you have a large file that is not a filesystem, e.g. `
  <i>movie.mpeg</i>'. Because of space problems, you want to distribute the data
  on two servers.
<div class="Pp"></div>
In this case, the parts of the image need to be generated artificially with the
  <b>split</b> command. For example, to create chunks of 4MB each, use `
  <b>split -b 4m</b> <b>movie.mpeg part</b>'. Copy the resulting files `
  <i>partXX</i>' into two directories ` <i>1</i>' and ` <i>2</i>' that you
  create, according to how you want the files distributed between the servers.
  Next, create the jigdo and template files with ` <b>jigdo-file
  make-template</b> <b>--image=movie.mpeg 1// 2//</b>'. You will need to edit
  the ` <i>.jigdo</i>' file and provide the right URIs for the two servers that
  you are going to upload the ` <i>partXX</i>' files to.
<h2 class="Ss" title="Ss" id="CUSTOMIZED_VERSIONS_OF_IMAGES"><a class="selflink" href="#CUSTOMIZED_VERSIONS_OF_IMAGES">CUSTOMIZED
  VERSIONS OF IMAGES</a></h2>
Because it is possible to assign a different URI for each part of an image if
  necessary, jigdo is very flexible. Only one example is the possibility of
  customized versions of images: Suppose that someone is distributing a CD
  image, and that you want to make a few small changes to it and redistribute
  your own version. You download the ` <i>official.iso</i>' CD image with
  <b>jigdo</b> (passing it the URL of ` <i>official.jigdo</i>'), write it to
  CD-R, make your changes (say, adding files from the ` <i>myfiles</i>'
  directory on your harddisc) and produce your own version, `
  <i>myversion.iso</i>'. Next, you instruct <b>jigdo-file</b> to create the
  jigdo and template files for your modified image, using the command
<div style="height: 1.00em;">&#x00A0;</div>
<div style="margin-left: 5.00ex;">
<div class="Pp"></div>
<b>jigdo-file make-template</b> <b>--image=myversion.iso /mnt/cdrom/ myfiles//
  --label</b> <b>My=myfiles/ --uri My=http://my.homepage.net/</b>
  <b>--merge=official.jigdo</b></div>
while ` <i>official.iso</i>' is mounted under ` <i>/mnt/cdrom</i>'. By using
  <b>--merge</b>, you have told <b>jigdo-file</b> to take the contents of `
  <i>official.jigdo</i>', add to it a new `[Image]' section for `
  <i>myversion.iso</i>' and write the resulting jigdo file to `
  <i>myversion.jigdo</i>' - so now ` <i>myversion.jigdo</i>' offers two images
  for download, the original version and your modified version. (If you do not
  want it to offer the official version, edit it and remove the `[Image]'
  section that lists ` <i>official.iso</i>'.)
<div class="Pp"></div>
Now you can upload the ` <i>.jigdo</i>' file, the ` <i>.template</i>' file and
  also the files in ` <i>myfiles</i>' to `http://my.homepage.net/'. Thus, for
  people to download your modified image, you do <b>not</b> need to upload the
  complete image contents to your web space, but only the changes you made!
<div class="Pp"></div>
(In case you only made very few changes, you could also omit the `myfiles'
  parameter in the command above, then all your changes end up in the new
  template file.)
<h2 class="Ss" title="Ss" id="COMBINING_MANY_JIGDO-MANAGED_IMAGES_INTO_ONE"><a class="selflink" href="#COMBINING_MANY_JIGDO-MANAGED_IMAGES_INTO_ONE">COMBINING
  MANY JIGDO-MANAGED IMAGES INTO ONE</a></h2>
It is also no problem to combine data from several sources that use jigdo. For
  example, if of five different and unrelated servers each one distributes a
  different CD image via jigdo, you can create a customized DVD image that
  contains the data from all these CDs. When people use <b>jigdo</b> to download
  your image, the individual files on the DVD are fetched from the same sources
  as the original CDs.
<div class="Pp"></div>
Consequently, even though you will be distributing a 3.2GB file via your web
  space, the actual amount of data that is stored on your server will only be in
  the order of several MBs.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
For certain contents of one of the input files, most notably a sequence of zero
  bytes longer than <b>--min-length</b> at the start of the file and an area of
  zeros preceding the file data in the image, <b>jigdo-file make-template</b>
  may fail to find the file in the image. Unfortunately, this restriction cannot
  be avoided because the program could become very slow otherwise. If you use
  the <b>--debug</b> option, all instances of <b>jigdo-file</b> discarding
  possible matches are indicated by lines containing the word `DROPPED'.
<div class="Pp"></div>
In fact, not only all-zeroes files trigger this behaviour, but also files which
  contain at their start a long sequence of short identical strings. For
  example, both a file containing only `a' characters and one containing
  `abcabcabcabc...' are problematic.
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>jigdo</b>(1) (NOT YET IMPLEMENTED), <b>jigdo-lite</b>(1),
  <b>jigdo-mirror</b>(1), <b>split</b>(1) (or `<b>info split</b>'),
  <b>find</b>(1) (or ` <b>info find</b>'), <b>mkisofs</b>(1), <b>md5sum</b>(1)
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Jigsaw Download &lt;URL:http://atterer.net/jigdo/&gt; was written by Richard
  Atterer &lt;jigdo atterer.net&gt;, to make downloading of CD ROM images for
  the Debian Linux distribution more convenient.</div>
<table class="foot">
  <tr>
    <td class="foot-date">19 May 2006</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
