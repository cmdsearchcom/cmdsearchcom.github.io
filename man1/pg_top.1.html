<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:31:30 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>PG_TOP(1) General Commands Manual PG_TOP(1)</p>

<p style="margin-top: 1em">NAME <br>
pg_top - display and update information about the top cpu
PostgreSQL processes</p>

<p style="margin-top: 1em">SYNOPSIS <br>
pg_top [ OPTIONS ] [ NUMBER ]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
pg_top displays the top processes on the system and
periodically updates this information. Raw cpu percentage is
used to rank the processes. If number is given, then the top
<br>
number processes will be displayed instead of the
default.</p>

<p style="margin-top: 1em">pg_top makes a distinction
between terminals that support advanced capabilities and
those that do not. This distinction affects the choice of
defaults for certain options. In <br>
the remainder of this document, an &quot;intelligent&quot;
terminal is one that supports cursor addressing, clear
screen, and clear to end of line. Conversely, a
&quot;dumb&quot; terminal is one <br>
that does not support such features. If the output of pg_top
is redirected to a file, it acts as if it were being run on
a dumb terminal.</p>

<p style="margin-top: 1em">OPTIONS <br>
-C, --color-mode <br>
Turn off the use of color in the display.</p>

<p style="margin-top: 1em">-I, --hide-idle <br>
Do not display idle processes. By default, pg_top displays
both active and idle processes.</p>

<p style="margin-top: 1em">-T, --show-tags <br>
List all available color tags and the current set of tests
used for color highlighting, then exit.</p>

<p style="margin-top: 1em">-W, --password <br>
Forces pg_top to prompt for a password before connecting to
a database.</p>

<p style="margin-top: 1em">-b, --batch <br>
Use &quot;batch&quot; mode. In this mode, all input from the
terminal is ignored. Interrupt characters (such as ^C and ^
still have an effect. This is the default on a dumb <br>
terminal, or when the output is not a terminal.</p>

<p style="margin-top: 1em">-c, --show-command <br>
Show the command name for each process. Default is to show
the full command line. This option is not supported on all
platforms.</p>

<p style="margin-top: 1em">-i, --interactive <br>
Use &quot;interactive&quot; mode. In this mode, any input is
immediately read for processing. See the section on
&quot;Interactive Mode&quot; for an explanation of which
keys perform what <br>
functions. After the command is processed, the screen will
immediately be updated, even if the command was not
understood. This mode is the default when standard output
<br>
is an intelligent terminal.</p>

<p style="margin-top: 1em">-n, --non-interactive <br>
Use &quot;non-interactive&quot; mode. This is indentical to
&quot;batch&quot; mode.</p>

<p style="margin-top: 1em">-q, --quick-mode <br>
Renice pg_top to -20 so that it will run faster. This can be
used when the system is being very sluggish to improve the
possibility of discovering the problem. This <br>
option can only be used by root.</p>

<p style="margin-top: 1em">-r, --remote-mode <br>
Monitor a remote database where the database is on a system
other than where pg_top is running from. pg_top will monitor
a remote database if it has the pg_proctab exten&acirc; <br>
sion installed.</p>

<p style="margin-top: 1em">-u, --show-uid <br>
Do not take the time to map uid numbers to usernames.
Normally, pg_top will read as much of the file
&quot;/etc/passwd&quot; as is necessary to map all the user
id numbers it <br>
encounters into login names. This option disables all that,
while possibly decreasing execution time. The uid numbers
are displayed instead of the names.</p>

<p style="margin-top: 1em">-V, --version <br>
Write version number information to stderr then exit
immediately. No other processing takes place when this
option is used. To see current revision information while
<br>
pg_top is running, use the help command &quot;?&quot;.</p>

<p style="margin-top: 1em">-s TIME, --set-delay=TIME <br>
TIME Set the delay between screen updates to TIME seconds.
The default delay between updates is 5 seconds.</p>

<p style="margin-top: 1em">-o FIELD, --order-field=FIELD
<br>
Sort the process display area on the specified field. The
field name is the name of the column as seen in the output,
but in lower case. Likely values are &quot;cpu&quot;,
&quot;size&quot;, <br>
&quot;res&quot;, and &quot;time&quot;, but may vary on
different operating systems. Note that not all operating
systems support this option.</p>

<p style="margin-top: 1em">-x COUNT, --set-display=COUNT
<br>
Show only count displays, then exit. A display is considered
to be one update of the screen. This option allows the user
to select the number of displays he wants to see <br>
before pg_top automatically exits. For intelligent
terminals, no upper limit is set. The default is 1 for dumb
terminals.</p>

<p style="margin-top: 1em">-z USERNAME,
--show-username=USERNAME <br>
Show only those processes owned by USERNAME. This option
currently only accepts usernames and will not understand uid
numbers.</p>

<p style="margin-top: 1em">-h HOST, --host=HOST <br>
Specifies the host name of the machine on which the server
is running. If the value begins with a slash, it is used as
the directory for the Unix domain socket. The <br>
default is taken from the PGHOST environment variable, if
set.</p>

<p style="margin-top: 1em">-p PORT, --port=PORT <br>
Specifies the TCP port or local Unix domain socket file
extension on which the server is listening for connections.
Defaults to the PGPORT environment variable, if set.</p>

<p style="margin-top: 1em">-U USERNAME, --username=USERNAME
<br>
User name to connect as.</p>

<p style="margin-top: 1em">-W, --password <br>
Force pg_top to prompt for a password before connecting to a
database.</p>

<p style="margin-top: 1em">Both COUNT and NUMBER fields can
be specified as &quot;infinite&quot;, indicating that they
can stretch as far as possible. This is accomplished by
using any proper prefix of the keywords <br>
&quot;infinity&quot;, &quot;maximum&quot;, or
&quot;all&quot;. The default for count on an intelligent
terminal is, in fact, infinity.</p>

<p style="margin-top: 1em">The environment variable PG_TOP
is examined for options before the command line is scanned.
This enables a user to set his or her own defaults. The
number of processes to dis&acirc; <br>
play can also be specified in the environment variable
PG_TOP. The options -C, -I, and -u are actually toggles. A
second specification of any of these options will negate the
<br>
first. Thus a user who has the environment variable PG_TOP
set to &quot;-I&quot; may use the command &quot;top -I&quot;
to see idle processes.</p>

<p style="margin-top: 1em">INTERACTIVE MODE <br>
When pg_top is running in &quot;interactive mode&quot;, it
reads commands from the terminal and acts upon them
accordingly. In this mode, the terminal is put in
&quot;CBREAK&quot;, so that a char&acirc; <br>
acter will be processed as soon as it is typed. Almost
always, a key will be pressed when pg_top is between
displays; that is, while it is waiting for time seconds to
elapse. <br>
If this is the case, the command will be processed and the
display will be updated immediately thereafter (reflecting
any changes that the command may have specified). This
hap&acirc; <br>
pens even if the command was incorrect. If a key is pressed
while pg_top is in the middle of updating the display, it
will finish the update and then process the command. Some
<br>
commands require additional information, and the user will
be prompted accordingly. While typing this information in,
the user&rsquo;s erase and kill keys (as set up by the
command <br>
stty) are recognized, and a newline terminates the
input.</p>

<p style="margin-top: 1em">These commands are currently
recognized (^L refers to control-L):</p>

<p style="margin-top: 1em">^L Redraw the screen.</p>

<p style="margin-top: 1em">A Display the actual query plan
(EXPLAIN ANALYZE) of the currently running SQL statement by
re-running the SQL statement (prompt for process id.)</p>

<p style="margin-top: 1em">C Toggle the use of color in the
display.</p>

<p style="margin-top: 1em">c Toggle the display of the full
command line.</p>

<p style="margin-top: 1em">d Change the number of displays
to show (prompt for new number). Remember that the next
display counts as one, so typing d1 will make pg_top show
one final display and then <br>
immediately exit.</p>

<p style="margin-top: 1em">h or ? Display a summary of the
commands (help screen). Version information is included in
this display.</p>

<p style="margin-top: 1em">E Display re-determined
execution plan (EXPLAIN) of the SQL statement by a backend
process (prompt for process id.)</p>

<p style="margin-top: 1em">e Display a list of system
errors (if any) generated by the last kill or renice
command.</p>

<p style="margin-top: 1em">i (or I) Toggle the display of
idle processes.</p>

<p style="margin-top: 1em">k Send a signal
(&quot;kill&quot; by default) to a list of processes. This
acts similarly to the command kill(1)).</p>

<p style="margin-top: 1em">L Display the currently held
locks by a backend process (prompt for process id.)</p>

<p style="margin-top: 1em">M Order by memory
utilization.</p>

<p style="margin-top: 1em">N Sort by process id.</p>

<p style="margin-top: 1em">n or # Change the number of
processes to display (prompt for new number).</p>

<p style="margin-top: 1em">o Change the order in which the
display is sorted. This command is not available on all
systems. The sort key names when viewing processes vary fron
system to system but <br>
usually include: &quot;cpu&quot;, &quot;res&quot;,
&quot;size&quot;, &quot;time&quot;. The default is cpu. When
viewing user table statistics: &quot;seq_scan&quot;,
&quot;seq_tup_read&quot;, &quot;idx_scan&quot;,
&quot;idx_tup_fetch&quot;, <br>
&quot;n_tup_ins&quot;, &quot;n_tup_upd&quot;,
&quot;n_tup_del&quot;. The default is seq_scan. When viewing
user index statistics: &quot;idx_scan&quot;,
&quot;idx_tup_fetch&quot;, &quot;idx_tup_read&quot;. The
default is <br>
idx_scan.</p>

<p style="margin-top: 1em">P Sort by processor
utilization.</p>

<p style="margin-top: 1em">Q Display the currently running
query of a backend process (prompt for process id.)</p>

<p style="margin-top: 1em">q Quit pg_top.</p>

<p style="margin-top: 1em">R Display user table
statistics.</p>

<p style="margin-top: 1em">r Change the priority (the
&quot;nice&quot;) of a list of processes. This acts
similarly to the command renice(8)).</p>

<p style="margin-top: 1em">s Change the number of seconds
to delay between displays (prompt for new number).</p>

<p style="margin-top: 1em">T Order by time.</p>

<p style="margin-top: 1em">t Toggle between cumulative or
differential statistics when viewing user table or user
index statistics.</p>

<p style="margin-top: 1em">u Display only processes owned
by a specific username (prompt for username). If the
username specified is simply &quot;+&quot;, then processes
belonging to all users will be dis&acirc; <br>
played.</p>

<p style="margin-top: 1em">X Display user index
statistics.</p>

<p style="margin-top: 1em">THE DISPLAY <br>
The actual display varies depending on the specific variant
of Unix that the machine is running. This description may
not exactly match what is seen by pg_top running on this
<br>
particular machine. Differences are listed at the end of
this manual entry.</p>

<p style="margin-top: 1em">The top few lines of the display
show general information about the state of the system,
including the last process id assigned to a process (on most
systems), the three load <br>
averages, the current time, the number of existing
processes, the number of processes in each state (sleeping,
running, starting, zombies, and stopped), and a percentage
of time <br>
spent in each of the processor states (user, nice, system,
and idle). It also includes information about physical and
virtual memory allocation.</p>

<p style="margin-top: 1em">The remainder of the screen
displays information about individual processes. This
display is similar in spirit to ps(1) but it is not exactly
the same. The columns displayed by <br>
pg_top will differ slightly between operating systems.
Generally, the following fields are displayed:</p>

<p style="margin-top: 1em">PID The process id.</p>

<p style="margin-top: 1em">USERNAME <br>
Username of the process&rsquo;s owner (if -u is specified, a
UID column will be substituted for USERNAME).</p>

<p style="margin-top: 1em">PRI Current priority of the
process.</p>

<p style="margin-top: 1em">NICE Nice amount in the range
-20 to 20, as established by the use of the command
nice.</p>

<p style="margin-top: 1em">SIZE Total size of the process
(text, data, and stack) given in kilobytes.</p>

<p style="margin-top: 1em">RES Resident memory: current
amount of process memory that resides in physical memory,
given in kilobytes.</p>

<p style="margin-top: 1em">STATE Current state (typically
one of &quot;sleep&quot;, &quot;run&quot;, &quot;idl&quot;,
&quot;zomb&quot;, or &quot;stop&quot;).</p>

<p style="margin-top: 1em">TIME Number of system and user
cpu seconds that the process has used.</p>

<p style="margin-top: 1em">CPU Percentage of available cpu
time used by this process.</p>

<p style="margin-top: 1em">COMMAND <br>
Name of the command that the process is currently
running.</p>

<p style="margin-top: 1em">COLOR <br>
pg_top supports the use of ANSI color in its output. By
default, color is available but not used. The environment
variable TOPCOLORS specifies colors to use and conditions
for <br>
which they should be used. At the present time, only numbers
in the summay display area can be colored. In a future
version it will be possible to highlight numbers in the <br>
process display area as well. The environment variable is
the only way to specify color: there is no equivalent
command line option. Note that the environment variable
TOP&acirc; <br>
COLOURS is also understood. The British spelling takes
precedence. The use of color only works on terminals that
understand and process ANSI color escape sequences.</p>

<p style="margin-top: 1em">The environment variable is a
sequence of color specifications, separated by colons. Each
specification takes the form tag=min,max#code where tag is
the name of the value to <br>
check, min and max specify a range for the value, and code
is an ANSI color code. Multiple color codes can be listed
and separated with semi-colons. A missing min implies the
<br>
lowest possible value (usually 0) and a missing max implies
infinity. The comma must always be present. When specifying
numbers for load averages, they should be multiplied by <br>
100. For example, the specification 1min=500,1000#31
indicates that a 1 minute load average between 5 and 10
should be displayed in red. Color attributes can be
combined. For <br>
example, the specification 5min=1000,#37;41 indicates that a
5 minute load average higher than 10 should be displayed
with white characters on a red background. A special tag
<br>
named header is used to control the color of the header for
process display. It should be specified with no lower and
upper limits, specifically header=,# followed by the ANSI
<br>
color code.</p>

<p style="margin-top: 1em">You can see a list of color
codes recognized by this installation of pg_top with the -T
option. This will also show the current set of tests used
for color highligting, as spec&acirc; <br>
ified in the environment.</p>

<p style="margin-top: 1em">AUTHOR <br>
William LeFebvre Mark Wong</p>

<p style="margin-top: 1em">ENVIRONMENT <br>
PG_TOP user-configurable defaults for options. PG_TOPCOLORS
color specification</p>

<p style="margin-top: 1em">BUGS <br>
As with ps(1), things can change while pg_top is collecting
information for an update. The picture it gives is only a
close approximation to reality.</p>

<p style="margin-top: 1em">SEE ALSO <br>
kill(1), ps(1), stty(1), mem(4), renice(8)</p>

<p style="margin-top: 1em">LINUX NOTES <br>
The Linux port was written by Richard Henderson
&lt;rth@tamu.edu&gt;. The CPU% calculation was brazenly
stolen from the Solaris 2 port and should be attributed to
one of the many <br>
names listed in its man page.</p>

<p style="margin-top: 1em">The order support was stolen
from SUNOS 5 port by Alexey Klimkin
&lt;kad@klon.tme.mcst.ru&gt;</p>

<p style="margin-top: 1em">Made to work under 2.4 by
William LeFebvre.</p>

<p style="margin-top: 1em">4th Berkeley Distribution Local
PG_TOP(1)</p>
<hr>
</body>
</html>
