<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:42:21 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>VIRT-TOP(1) Virtualization Support VIRT-TOP(1)</p>

<p style="margin-top: 1em">NAME <br>
virt-top - &rsquo;top&rsquo;-like utility for virtualization
stats</p>

<p style="margin-top: 1em">SUMMARY <br>
virt-top [-options]</p>

<p style="margin-top: 1em">DESCRIPTION <br>
virt-top is a top(1)-like utility for showing stats of
virtualized domains. Many keys and command line options are
the same as for ordinary top.</p>

<p style="margin-top: 1em">It uses libvirt so it is capable
of showing stats across a variety of different
virtualization systems.</p>

<p style="margin-top: 1em">OPTIONS <br>
-1 Display physical CPUs by default (instead of
domains).</p>

<p style="margin-top: 1em">Under each domain column, two
numbers are shown. The first is the percentage of the
physical CPU used by the domain and the hypervisor together.
The second is the <br>
percentage used by just the domain.</p>

<p style="margin-top: 1em">When virt-top is running, use
the 1 key to toggle between physical CPUs and domains
display.</p>

<p style="margin-top: 1em">-2 Display network interfaces by
default (instead of domains). When virt-top is running, use
the 2 key to toggle between network interfaces and domains
display.</p>

<p style="margin-top: 1em">-3 Display block devices
(virtual disks) by default (instead of domains). When
virt-top is running, use the 3 key to toggle between block
devices and domains display.</p>

<p style="margin-top: 1em">-b Batch mode. In this mode
keypresses are ignored.</p>

<p style="margin-top: 1em">-c uri or --connect uri <br>
Connect to the libvirt URI given.</p>

<p style="margin-top: 1em">To connect to QEMU/KVM you would
normally do -c qemu:///system</p>

<p style="margin-top: 1em">To connect to Xen on the same
host, do -c xen:///</p>

<p style="margin-top: 1em">To connect to libvirtd on a
remote machine you would normally do -c
qemu://host/system</p>

<p style="margin-top: 1em">If this option is not given then
virt-top connects by default to whatever is the default
hypervisor for libvirt, although this can be overridden by
setting environment <br>
variables.</p>

<p style="margin-top: 1em">See the libvirt documentation at
&lt;http://libvirt.org/uri.html&gt; for further
information.</p>

<p style="margin-top: 1em">-d delay <br>
Set the delay between screen updates in seconds. The default
is 3.0 seconds. You can change this while virt-top is
running by pressing either s or d key.</p>

<p style="margin-top: 1em">-n iterations <br>
Set the number of iterations to run. The default is to run
continuously.</p>

<p style="margin-top: 1em">-o sort <br>
Set the sort order to one of: cpu (sort by %CPU used), mem
(sort by total memory), time (sort by total time), id (sort
by domain ID), name (sort by domain name), netrx (sort <br>
by network received bytes), nettx (sort by network
transmitted bytes), blockrdrq (sort by block device [disk]
read requests), blockwrrq (sort by block device [disk] write
<br>
requests).</p>

<p style="margin-top: 1em">While virt-top is running you
can change the sort order using keys P (cpu), M (memory), T
(total time), N (domain ID), F (interactively select the
sort field).</p>

<p style="margin-top: 1em">-s Secure mode. Currently this
does nothing.</p>

<p style="margin-top: 1em">--hist-cpu secs <br>
Set the time in seconds between updates of the historical
%CPU at the top right of the display.</p>

<p style="margin-top: 1em">--csv file.csv <br>
Write the statistics to file file.csv. First a header is
written showing the statistics being recorded in each
column, then one line is written for each screen update. The
<br>
CSV file can be loaded directly by most spreadsheet
programs.</p>

<p style="margin-top: 1em">Currently the statistics which
this records vary between releases of virt-top (but the
column headers will stay the same, so you can use those to
process the CSV file).</p>

<p style="margin-top: 1em">Not every version of virt-top
supports CSV output - it depends how the program was
compiled (see README file in the source distribution for
details).</p>

<p style="margin-top: 1em">To save space you can compress
your CSV files (if your shell supports this feature, eg.
bash):</p>

<p style="margin-top: 1em">virt-top --csv &gt;(gzip -9 &gt;
output.csv.gz)</p>

<p style="margin-top: 1em">You can use a similar trick to
split the CSV file up. In this example the CSV file is split
every 1000 lines into files called output.csv.00,
output.csv.01 etc.</p>

<p style="margin-top: 1em">virt-top --csv &gt;(split -d -l
1000 - output.csv.)</p>

<p style="margin-top: 1em">RHEL provides a short Python
script called &quot;processcsv.py&quot; which can be used to
post-process the CSV output. Run it like this:</p>

<p style="margin-top: 1em">virt-top --csv data.csv <br>
processcsv.py &lt; data.csv</p>

<p style="margin-top: 1em">This creates or overwrites the
following files in the current directory:</p>

<p style="margin-top: 1em">global.csv <br>
domain&lt;NNN&gt;.csv</p>

<p style="margin-top: 1em">&quot;global.csv&quot; will
contain the global data. One
&quot;domain&lt;NNN&gt;.csv&quot; file will also be created
for each domain with ID &quot;NNN&quot;, containing the
per-domain data.</p>

<p style="margin-top: 1em">--no-csv-cpu <br>
Disable domain CPU stats in CSV output.</p>

<p style="margin-top: 1em">--no-csv-mem <br>
Disable domain memory stats in CSV output.</p>

<p style="margin-top: 1em">--no-csv-block <br>
Disable domain block device stats in CSV output.</p>

<p style="margin-top: 1em">--no-csv-net <br>
Disable domain network interface stats in CSV output.</p>

<p style="margin-top: 1em">--debug filename <br>
Send debug and error messages to filename. To send error
messages to syslog you can do:</p>

<p style="margin-top: 1em">virt-top --debug &gt;(logger -t
virt-top)</p>

<p style="margin-top: 1em">See also REPORTING BUGS
below.</p>

<p style="margin-top: 1em">--init-file filename <br>
Read filename as the init file instead of the default which
is $HOME/.virt-toprc. See also INIT FILE below.</p>

<p style="margin-top: 1em">--no-init-file <br>
Do not read any init file.</p>

<p style="margin-top: 1em">--script <br>
Script mode. There will be no user interface. This is most
useful when used together with the --csv and -n options.</p>

<p style="margin-top: 1em">--stream <br>
Stream mode. All output is sent to stdout. This can be used
from shell scripts etc. There is no user interface.</p>

<p style="margin-top: 1em">--block-in-bytes <br>
Show I/O statistics in Bytes. Default is shown in the number
of Requests.</p>

<p style="margin-top: 1em">--end-time time <br>
The program will exit at the time given.</p>

<p style="margin-top: 1em">The time may be given in one of
the following formats:</p>

<p style="margin-top: 1em">YYYY-MM-DD HH:MM:SS <br>
End time is the date and time given.</p>

<p style="margin-top: 1em">HH:MM:SS <br>
End time is the time given, today.</p>

<p style="margin-top: 1em">+HH:MM:SS <br>
End time is HH hours, MM minutes, SS seconds in the future
(counted from the moment that program starts).</p>

<p style="margin-top: 1em">+secs <br>
End time is secs seconds in the future.</p>

<p style="margin-top: 1em">For example to run the program
for 3 minutes you could do:</p>

<p style="margin-top: 1em">virt-top --end-time
+00:03:00</p>

<p style="margin-top: 1em">or:</p>

<p style="margin-top: 1em">virt-top --end-time +180</p>

<p style="margin-top: 1em">Not every version of virt-top
supports this option - it depends how the program was
compiled (see README file in the source distribution for
details).</p>

<p style="margin-top: 1em">--help <br>
Display usage summary.</p>

<p style="margin-top: 1em">--version <br>
Display version number and exit.</p>

<p style="margin-top: 1em">KEYS <br>
Note that keys are case sensitive. For example use
upper-case P (shift P) to sort by %CPU. ^ before a key means
a Ctrl key, so ^L is Ctrl L.</p>

<p style="margin-top: 1em">space or ^L <br>
Updates the display.</p>

<p style="margin-top: 1em">q Quits the program.</p>

<p style="margin-top: 1em">h Displays help.</p>

<p style="margin-top: 1em">s or d <br>
Change the delay between screen updates.</p>

<p style="margin-top: 1em">B Toggle Block I/O statistics so
they are shown in either bytes or requests.</p>

<p style="margin-top: 1em">0 (number 0) <br>
Show the normal list of domains display.</p>

<p style="margin-top: 1em">1 (number 1) <br>
Toggle into showing physical CPUs. If pressed again toggles
back to showing domains (the normal display).</p>

<p style="margin-top: 1em">2 Toggle into showing network
interfaces. If pressed again toggles back to showing
domains.</p>

<p style="margin-top: 1em">3 Toggle into showing block
devices (virtual disks). If pressed again toggles back to
showing domains.</p>

<p style="margin-top: 1em">P Sort by %CPU.</p>

<p style="margin-top: 1em">M Sort by total memory. Note
that this shows the total memory allocated to the guest, not
the memory being used.</p>

<p style="margin-top: 1em">T Sort by total time.</p>

<p style="margin-top: 1em">N Sort by domain ID.</p>

<p style="margin-top: 1em">F Select the sort field
interactively (there are other sort fields you can choose
using this key).</p>

<p style="margin-top: 1em">W This creates or overwrites the
init file with the current settings.</p>

<p style="margin-top: 1em">This key is disabled if
--no-init-file was specified on the command line or if
overwrite-init-file false is given in the init file.</p>

<p style="margin-top: 1em">INIT FILE <br>
When virt-top starts up, it reads initial settings from the
file .virt-toprc in the user&rsquo;s home directory.</p>

<p style="margin-top: 1em">The name of this file may be
overridden using the --init-file filename command line
option or may be disabled entirely using --no-init-file.</p>

<p style="margin-top: 1em">The init file has a simple
format. Blank lines and comments beginning with # are
ignored. Everything else is a set of key value pairs,
described below.</p>

<p style="margin-top: 1em">display task|pcpu|block|net <br>
Sets the major display mode to one of task (tasks, the
default), pcpu (physical CPUs), block (block devices), or
net (network interfaces).</p>

<p style="margin-top: 1em">delay secs <br>
Sets the delay between display updates in seconds.</p>

<p style="margin-top: 1em">hist-cpu secs <br>
Sets the historical CPU delay in seconds.</p>

<p style="margin-top: 1em">iterations n <br>
Sets the number of iterations to run before we exit. Setting
this to -1 means to run continuously.</p>

<p style="margin-top: 1em">sort cpu|mem|time|id|name|...
<br>
Sets the sort order. The option names are the same as for
the command line -o option.</p>

<p style="margin-top: 1em">connect uri <br>
Sets the default connection URI.</p>

<p style="margin-top: 1em">debug filename <br>
Sets the default filename to use for debug and error
messages.</p>

<p style="margin-top: 1em">csv filename <br>
Enables CSV output to the named file.</p>

<p style="margin-top: 1em">csv-cpu true|false <br>
Enable or disable domain CPU stats in CSV output.</p>

<p style="margin-top: 1em">csv-mem true|false <br>
Enable or disable domain memory stats in CSV output.</p>

<p style="margin-top: 1em">csv-block true|false <br>
Enable or disable domain block device stats in CSV
output.</p>

<p style="margin-top: 1em">csv-net true|false <br>
Enable or disable domain network interface stats in CSV
output.</p>

<p style="margin-top: 1em">batch true|false <br>
Sets batch mode.</p>

<p style="margin-top: 1em">secure true|false <br>
Sets secure mode.</p>

<p style="margin-top: 1em">script true|false <br>
Sets script mode.</p>

<p style="margin-top: 1em">stream true|false <br>
Sets stream mode.</p>

<p style="margin-top: 1em">block-in-bytes true|false <br>
Show block device statistics in bytes.</p>

<p style="margin-top: 1em">end-time time <br>
Set the time at which the program exits. See above for the
time formats supported.</p>

<p style="margin-top: 1em">overwrite-init-file false <br>
If set to false then the W key will not overwrite the init
file.</p>

<p style="margin-top: 1em">Note that in the current
implementation, options specified in the init file override
options specified on the command line. This is a bug and
this behaviour may change in the <br>
future.</p>

<p style="margin-top: 1em">COLUMN HEADINGS <br>
%CPU <br>
Percentage of CPU used. As with top(1), 100% means that all
physical CPUs are being fully used.</p>

<p style="margin-top: 1em">DEVICE <br>
The block device name.</p>

<p style="margin-top: 1em">DOMAIN <br>
NAME <br>
The name of the libvirt domain.</p>

<p style="margin-top: 1em">ID The libvirt domain ID.</p>

<p style="margin-top: 1em">INTERFACE <br>
The network interface name.</p>

<p style="margin-top: 1em">%MEM <br>
The percentage of host memory assigned to the guest.</p>

<p style="margin-top: 1em">PHYCPU <br>
The physical CPU.</p>

<p style="margin-top: 1em">RDBY <br>
Disk bytes read since last displayed.</p>

<p style="margin-top: 1em">RDRQ <br>
Disk read requests since last displayed.</p>

<p style="margin-top: 1em">RXBY <br>
Network bytes received since last displayed.</p>

<p style="margin-top: 1em">RXPK <br>
Network packets received since last displayed.</p>

<p style="margin-top: 1em">S The state of the domain, one
of:</p>

<p style="margin-top: 1em">? Unknown.</p>

<p style="margin-top: 1em">R Running.</p>

<p style="margin-top: 1em">S Blocked.</p>

<p style="margin-top: 1em">P Paused.</p>

<p style="margin-top: 1em">D <br>
O Shutdown.</p>

<p style="margin-top: 1em">X Crashed.</p>

<p style="margin-top: 1em">TIME <br>
Total CPU time used.</p>

<p style="margin-top: 1em">TXBY <br>
Network bytes transmitted since last displayed.</p>

<p style="margin-top: 1em">TXPK <br>
Network packets transmitted since last displayed.</p>

<p style="margin-top: 1em">WRBY <br>
Disk bytes written since last displayed.</p>

<p style="margin-top: 1em">WRRQ <br>
Disk write requests since last displayed.</p>

<p style="margin-top: 1em">NOTES <br>
Block I/O statistics <br>
This I/O value is the amount of I/O since the previous
iteration of virt-top. To calculate speed of I/O, you should
divide the number by delay secs.</p>

<p style="margin-top: 1em">NETWORK RX BYTES AND PACKETS
<br>
Libvirt/virt-top has no way to know that a packet
transmitted to a guest was received (eg. if the guest is not
listening). In the network RX stats, virt-top reports the
packets <br>
transmitted to the guest, on the basis that the guest might
receive them.</p>

<p style="margin-top: 1em">In particular this includes
broadcast packets. Because of the way that Linux bridges
work, if the guest is connected to a bridge, it will
probably see a steady &quot;background <br>
noise&quot; of RX packets even when the network interface is
idle or down. These are caused by STP packets generated by
the bridge.</p>

<p style="margin-top: 1em">DEBUGGING LIBVIRT ISSUES <br>
virt-top tries to turn libvirt errors into informative
messages. However if libvirt initialization fails then this
is not possible. Instead you will get an obscure error
like:</p>

<p style="margin-top: 1em">libvir: error : Unknown failure
<br>
Fatal error: exception Libvirt.Virterror(...)</p>

<p style="margin-top: 1em">To see the cause of libvirt
errors in more detail, enable libvirt debugging by setting
this environment variable:</p>

<p style="margin-top: 1em">export LIBVIRT_DEBUG=1</p>

<p style="margin-top: 1em">SEE ALSO <br>
top(1), virsh(1), &lt;http://www.libvirt.org/ocaml/&gt;,
&lt;http://www.libvirt.org/&gt;,
&lt;http://people.redhat.com/~rjones/&gt;,
&lt;http://caml.inria.fr/&gt;</p>

<p style="margin-top: 1em">AUTHORS <br>
Richard W.M. Jones &lt;rjones @ redhat . com&gt;</p>

<p style="margin-top: 1em">COPYRIGHT <br>
(C) Copyright 2007-2012 Red Hat Inc., Richard W.M. Jones
http://libvirt.org/</p>

<p style="margin-top: 1em">This program is free software;
you can redistribute it and/or modify it under the terms of
the GNU General Public License as published by the Free
Software Foundation; either <br>
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-top: 1em">This program is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR <br>
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-top: 1em">You should have received a copy
of the GNU General Public License along with this program;
if not, write to the Free Software Foundation, Inc., 675
Mass Ave, Cambridge, MA 02139, <br>
USA.</p>

<p style="margin-top: 1em">REPORTING BUGS <br>
Bugs can be viewed on the Red Hat Bugzilla page:
&lt;https://bugzilla.redhat.com/&gt;.</p>

<p style="margin-top: 1em">If you find a bug in virt-top,
please follow these steps to report it:</p>

<p style="margin-top: 1em">1. Check for existing bug
reports <br>
Go to &lt;https://bugzilla.redhat.com/&gt; and search for
similar bugs. Someone may already have reported the same
bug, and they may even have fixed it.</p>

<p style="margin-top: 1em">2. Capture debug and error
messages <br>
Run</p>

<p style="margin-top: 1em">virt-top --debug
virt-top.log</p>

<p style="margin-top: 1em">and keep virt-top.log. It
contains error messages which you should submit with your
bug report.</p>

<p style="margin-top: 1em">3. Get version of virt-top and
version of libvirt. <br>
Use:</p>

<p style="margin-top: 1em">virt-top --version</p>

<p style="margin-top: 1em">If you can get the precise
version of libvirt you are using then that too is
helpful.</p>

<p style="margin-top: 1em">4. Submit a bug report. <br>
Go to &lt;https://bugzilla.redhat.com/&gt; and enter a new
bug. Please describe the problem in as much detail as
possible.</p>

<p style="margin-top: 1em">Remember to include the version
numbers (step 3) and the debug messages file (step 2).</p>

<p style="margin-top: 1em">5. Assign the bug to rjones @
redhat.com <br>
Assign or reassign the bug to rjones @ redhat.com (without
the spaces). You can also send me an email with the bug
number if you want a faster response.</p>

<p style="margin-top: 1em">virt-top-1.0.8 2015-11-20
VIRT-TOP(1)</p>
<hr>
</body>
</html>
