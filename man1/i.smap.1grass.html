<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>i.smap(1grass)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">i.smap(1grass)</td>
    <td class="head-vol">Grass User's Manual</td>
    <td class="head-rtitle">i.smap(1grass)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<i></i><b>i.smap</b> - Performs contextual image classification using sequential
  maximum a posteriori (SMAP) estimation.
<h1 class="Sh" title="Sh" id="KEYWORDS"><a class="selflink" href="#KEYWORDS">KEYWORDS</a></h1>
imagery, classification, supervised classification, segmentation, SMAP
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>i.smap</b>
<div>&#x00A0;</div>
<b>i.smap --help</b>
<div>&#x00A0;</div>
<b>i.smap</b> [-<b>m</b>] <b>group</b>=<i>name</i> <b>subgroup</b>=<i>name</i>
  <b>signaturefile</b>=<i>name</i> <b>output</b>=<i>name</i>
  [<b>goodness</b>=<i>name</i>] [<b>blocksize</b>=<i>integer</i>]
  [--<b>overwrite</b>] [-- <b>help</b>] [--<b>verbose</b>] [--<b>quiet</b>]
  [--<b>ui</b>]
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use maximum likelihood estimation (instead of smap)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--overwrite</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Allow output files to overwrite existing files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print usage summary</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--verbose</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Verbose module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Quiet module output</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ui</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force launching GUI dialog</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>group</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input imagery group</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>subgroup</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input imagery subgroup</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>signaturefile</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name of input file containing signatures
    <div>&#x00A0;</div>
    Generated by i.gensigset</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>output</b>=<i>name</i> <b>[required]</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output raster map holding classification results</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>goodness</b>=<i>name</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Name for output raster map holding goodness of fit (lower is better)</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocksize</b>=<i>integer</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Size of submatrix to process at one time
    <div>&#x00A0;</div>
    Default: <i>1024</i></dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>i.smap</i> program is used to segment multispectral images using a
  spectral class model known as a Gaussian mixture distribution. Since Gaussian
  mixture distributions include conventional multivariate Gaussian
  distributions, this program may also be used to segment multispectral images
  based on simple spectral mean and covariance parameters.
<div class="Pp"></div>
<i>i.smap</i> has two modes of operation. The first mode is the sequential
  maximum a posteriori (SMAP) mode [1,2]. The SMAP segmentation algorithm
  attempts to improve segmentation accuracy by segmenting the image into regions
  rather than segmenting each pixel separately (see NOTES).
<div class="Pp"></div>
The second mode is the more conventional maximum likelihood (ML) classification
  which classifies each pixel separately, but requires somewhat less
  computation. This mode is selected with the <b>-m</b> flag (see below).
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<h2 class="Ss" title="Ss" id="Flags:"><a class="selflink" href="#Flags:">Flags:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-m</b> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use maximum likelihood estimation (instead of smap). Normal operation is to
      use SMAP estimation (see NOTES).</dd>
</dl>
<h2 class="Ss" title="Ss" id="Parameters:"><a class="selflink" href="#Parameters:">Parameters:</a></h2>
<dl class="Bl-tag">
  <dt class="It-tag"><b>group=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    imagery group
    <div>&#x00A0;</div>
    The imagery group that defines the image to be classified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>subgroup=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    imagery subgroup
    <div>&#x00A0;</div>
    The subgroup within the group specified that specifies the subset of the
      band files that are to be used as image data to be classified.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>signaturefile=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    imagery signaturefile
    <div>&#x00A0;</div>
    The signature file that contains the spectral signatures (i.e., the
      statistics) for the classes to be identified in the image. This signature
      file is produced by the program <i>i.gensigset</i> (see NOTES).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>blocksize=</b><i>value</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    size of submatrix to process at one time
    <div>&#x00A0;</div>
    default: 1024
    <div>&#x00A0;</div>
    This option specifies the size of the &quot;window&quot; to be used when
      reading the image data.</dd>
</dl>
<div class="Pp"></div>
This program was written to be nice about memory usage without influencing the
  resultant classification. This option allows the user to control how much
  memory is used. More memory may mean faster (or slower) operation depending on
  how much real memory your machine has and how much virtual memory the program
  uses.
<div class="Pp"></div>
The size of the submatrix used in segmenting the image has a principle function
  of controlling memory usage; however, it also can have a subtle effect on the
  quality of the segmentation in the smap mode. The smoothing parameters for the
  smap segmentation are estimated separately for each submatrix. Therefore, if
  the image has regions with qualitatively different behavior, (e.g., natural
  woodlands and man-made agricultural fields) it may be useful to use a
  submatrix small enough so that different smoothing parameters may be used for
  each distinctive region of the image.
<div class="Pp"></div>
The submatrix size has no effect on the performance of the ML segmentation
  method.
<dl class="Bl-tag">
  <dt class="It-tag"><b>output=</b><i>name</i> </dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    output raster map.
    <div>&#x00A0;</div>
    The name of a raster map that will contain the classification results. This
      new raster map layer will contain categories that can be related to
      landcover categories on the ground.</dd>
</dl>
<h1 class="Sh" title="Sh" id="INTERACTIVE_MODE"><a class="selflink" href="#INTERACTIVE_MODE">INTERACTIVE
  MODE</a></h1>
If none of the arguments are specified on the command line, <i>i.smap</i> will
  interactively prompt for the names of the maps and files.
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
The SMAP algorithm exploits the fact that nearby pixels in an image are likely
  to have the same class. It works by segmenting the image at various scales or
  resolutions and using the coarse scale segmentations to guide the finer scale
  segmentations. In addition to reducing the number of misclassifications, the
  SMAP algorithm generally produces segmentations with larger connected regions
  of a fixed class which may be useful in some applications.
<div class="Pp"></div>
The amount of smoothing that is performed in the segmentation is dependent of
  the behavior of the data in the image. If the data suggests that the nearby
  pixels often change class, then the algorithm will adaptively reduce the
  amount of smoothing. This ensures that excessively large regions are not
  formed.
<div class="Pp"></div>
The degree of misclassifications can be investigated with the goodness of fit
  output map. Lower values indicate a better fit. The largest 5 to 15% of the
  goodness values may need some closer inspection.
<div class="Pp"></div>
The module <i>i.smap</i> does not support MASKed or NULL cells. Therefore it
  might be necessary to create a copy of the classification results using e.g.
  r.mapcalc:
<div class="Pp"></div>
<pre>
r.mapcalc &quot;MASKed_map = classification_results&quot;
</pre>
<h1 class="Sh" title="Sh" id="EXAMPLE"><a class="selflink" href="#EXAMPLE">EXAMPLE</a></h1>
Supervised classification of LANDSAT
<div>&#x00A0;</div>
<pre>
g.region raster=lsat7_2002_10 -p
# store VIZ, NIR, MIR into group/subgroup
i.group group=my_lsat7_2002 subgroup=my_lsat7_2002 \
  input=lsat7_2002_10,lsat7_2002_20,lsat7_2002_30,lsat7_2002_40,lsat7_2002_50,lsat7_2002_70
# Now digitize training areas &quot;training&quot; with the digitizer
# and convert to raster model with v.to.rast
v.to.rast input=training output=training use=cat label_column=label
# calculate statistics
i.gensigset trainingmap=training group=my_lsat7_2002 subgroup=my_lsat7_2002 \
            signaturefile=my_smap_lsat7_2002 maxsig=5
i.smap group=my_lsat7_2002 subgroup=my_lsat7_2002 signaturefile=my_smap_lsat7_2002 \
       output=lsat7_2002_smap_classes
# Visually check result
d.mon wx0
d.rast.leg lsat7_2002_smap_classes
# Statistically check result
r.kappa -w classification=lsat7_2002_smap_classes reference=training
</pre>
<h1 class="Sh" title="Sh" id="REFERENCES"><a class="selflink" href="#REFERENCES">REFERENCES</a></h1>
<div style="margin-left: 4.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">C. Bouman and M. Shapiro, &quot;Multispectral Image
      Segmentation using a Multiscale Image Model&quot;, <i>Proc. of IEEE
      Int&#x2019;l Conf. on Acoust., Speech and Sig. Proc.,</i> pp. III-565 -
      III-568, San Francisco, California, March 23-26, 1992.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">C. Bouman and M. Shapiro 1994, &quot;A Multiscale Random
      Field Model for Bayesian Image Segmentation&quot;, <i>IEEE Trans. on Image
      Processing., 3(2), 162-177&quot;</i> <i>(PDF)</i></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">McCauley, J.D. and B.A. Engel 1995, &quot;Comparison of
      Scene Segmentations: SMAP, ECHO and Maximum Likelyhood&quot;, <i>IEEE
      Trans. on Geoscience and Remote Sensing, 33(6): 1313-1316.</i></dd>
</dl>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<i></i> <i>i.group</i> for creating groups and subgroups
<div>&#x00A0;</div>
<i>r.mapcalc</i> to copy classification result in order to cut out MASKed
  subareas
<div>&#x00A0;</div>
<i>i.gensigset</i> to generate the signature file required by this program
<div class="Pp"></div>
<i></i> <i>g.gui.iclass,</i> <i>i.maxlik,</i> <i>i.smap,</i> <i>r.kappa</i>
  <i></i>
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Charles Bouman, School of Electrical Engineering, Purdue University
<div class="Pp"></div>
Michael Shapiro, U.S.Army Construction Engineering Research Laboratory
<div class="Pp"></div>
<i>Last changed: $Date: 2014-12-19 22:17:36 +0100 (Fri, 19 Dec 2014) $</i>
<h1 class="Sh" title="Sh" id="SOURCE_CODE"><a class="selflink" href="#SOURCE_CODE">SOURCE
  CODE</a></h1>
Available at: i.smap source code (history)
<div class="Pp"></div>
Main index | Imagery index | Topics index | Keywords index | Graphical index |
  Full index
<div class="Pp"></div>
&#x00A9; 2003-2016 GRASS Development Team, GRASS GIS 7.2.0 Reference
  Manual</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os">GRASS 7.2.0</td>
  </tr>
</table>
</body>
</html>
