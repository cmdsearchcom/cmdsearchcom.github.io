<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:19:07 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>i.smap(1grass) Grass User&rsquo;s Manual
i.smap(1grass)</p>

<p style="margin-top: 1em">NAME <br>
i.smap - Performs contextual image classification using
sequential maximum a posteriori (SMAP) estimation.</p>

<p style="margin-top: 1em">KEYWORDS <br>
imagery, classification, supervised classification,
segmentation, SMAP</p>

<p style="margin-top: 1em">SYNOPSIS <br>
i.smap <br>
i.smap --help <br>
i.smap [-m] group=name subgroup=name signaturefile=name
output=name [goodness=name] [blocksize=integer]
[--overwrite] [--help] [--verbose] [--quiet] [--ui]</p>

<p style="margin-top: 1em">Flags: <br>
-m <br>
Use maximum likelihood estimation (instead of smap)</p>

<p style="margin-top: 1em">--overwrite <br>
Allow output files to overwrite existing files</p>

<p style="margin-top: 1em">--help <br>
Print usage summary</p>

<p style="margin-top: 1em">--verbose <br>
Verbose module output</p>

<p style="margin-top: 1em">--quiet <br>
Quiet module output</p>

<p style="margin-top: 1em">--ui <br>
Force launching GUI dialog</p>

<p style="margin-top: 1em">Parameters: <br>
group=name [required] <br>
Name of input imagery group</p>

<p style="margin-top: 1em">subgroup=name [required] <br>
Name of input imagery subgroup</p>

<p style="margin-top: 1em">signaturefile=name [required]
<br>
Name of input file containing signatures <br>
Generated by i.gensigset</p>

<p style="margin-top: 1em">output=name [required] <br>
Name for output raster map holding classification
results</p>

<p style="margin-top: 1em">goodness=name <br>
Name for output raster map holding goodness of fit (lower is
better)</p>

<p style="margin-top: 1em">blocksize=integer <br>
Size of submatrix to process at one time <br>
Default: 1024</p>

<p style="margin-top: 1em">DESCRIPTION <br>
The i.smap program is used to segment multispectral images
using a spectral class model known as a Gaussian mixture
distribution. Since Gaussian mixture distributions include
<br>
conventional multivariate Gaussian distributions, this
program may also be used to segment multispectral images
based on simple spectral mean and covariance parameters.</p>

<p style="margin-top: 1em">i.smap has two modes of
operation. The first mode is the sequential maximum a
posteriori (SMAP) mode [1,2]. The SMAP segmentation
algorithm attempts to improve segmentation <br>
accuracy by segmenting the image into regions rather than
segmenting each pixel separately (see NOTES).</p>

<p style="margin-top: 1em">The second mode is the more
conventional maximum likelihood (ML) classification which
classifies each pixel separately, but requires somewhat less
computation. This mode is <br>
selected with the -m flag (see below).</p>

<p style="margin-top: 1em">OPTIONS <br>
Flags: <br>
-m <br>
Use maximum likelihood estimation (instead of smap). Normal
operation is to use SMAP estimation (see NOTES).</p>

<p style="margin-top: 1em">Parameters: <br>
group=name <br>
imagery group <br>
The imagery group that defines the image to be
classified.</p>

<p style="margin-top: 1em">subgroup=name <br>
imagery subgroup <br>
The subgroup within the group specified that specifies the
subset of the band files that are to be used as image data
to be classified.</p>

<p style="margin-top: 1em">signaturefile=name <br>
imagery signaturefile <br>
The signature file that contains the spectral signatures
(i.e., the statistics) for the classes to be identified in
the image. This signature file is produced by the program
<br>
i.gensigset (see NOTES).</p>

<p style="margin-top: 1em">blocksize=value <br>
size of submatrix to process at one time <br>
default: 1024 <br>
This option specifies the size of the &quot;window&quot; to
be used when reading the image data.</p>

<p style="margin-top: 1em">This program was written to be
nice about memory usage without influencing the resultant
classification. This option allows the user to control how
much memory is used. More <br>
memory may mean faster (or slower) operation depending on
how much real memory your machine has and how much virtual
memory the program uses.</p>

<p style="margin-top: 1em">The size of the submatrix used
in segmenting the image has a principle function of
controlling memory usage; however, it also can have a subtle
effect on the quality of the seg&acirc; <br>
mentation in the smap mode. The smoothing parameters for the
smap segmentation are estimated separately for each
submatrix. Therefore, if the image has regions with
qualita&acirc; <br>
tively different behavior, (e.g., natural woodlands and
man-made agricultural fields) it may be useful to use a
submatrix small enough so that different smoothing
parameters may <br>
be used for each distinctive region of the image.</p>

<p style="margin-top: 1em">The submatrix size has no effect
on the performance of the ML segmentation method.</p>

<p style="margin-top: 1em">output=name <br>
output raster map. <br>
The name of a raster map that will contain the
classification results. This new raster map layer will
contain categories that can be related to landcover
categories on the <br>
ground.</p>

<p style="margin-top: 1em">INTERACTIVE MODE <br>
If none of the arguments are specified on the command line,
i.smap will interactively prompt for the names of the maps
and files.</p>

<p style="margin-top: 1em">NOTES <br>
The SMAP algorithm exploits the fact that nearby pixels in
an image are likely to have the same class. It works by
segmenting the image at various scales or resolutions and
<br>
using the coarse scale segmentations to guide the finer
scale segmentations. In addition to reducing the number of
misclassifications, the SMAP algorithm generally produces
seg&acirc; <br>
mentations with larger connected regions of a fixed class
which may be useful in some applications.</p>

<p style="margin-top: 1em">The amount of smoothing that is
performed in the segmentation is dependent of the behavior
of the data in the image. If the data suggests that the
nearby pixels often change <br>
class, then the algorithm will adaptively reduce the amount
of smoothing. This ensures that excessively large regions
are not formed.</p>

<p style="margin-top: 1em">The degree of misclassifications
can be investigated with the goodness of fit output map.
Lower values indicate a better fit. The largest 5 to 15% of
the goodness values may need <br>
some closer inspection.</p>

<p style="margin-top: 1em">The module i.smap does not
support MASKed or NULL cells. Therefore it might be
necessary to create a copy of the classification results
using e.g. r.mapcalc:</p>

<p style="margin-top: 1em">r.mapcalc &quot;MASKed_map =
classification_results&quot;</p>

<p style="margin-top: 1em">EXAMPLE <br>
Supervised classification of LANDSAT <br>
g.region raster=lsat7_2002_10 -p <br>
# store VIZ, NIR, MIR into group/subgroup <br>
i.group group=my_lsat7_2002 subgroup=my_lsat7_2002
input=lsat7_2002_10,lsat7_2002_20,lsat7_2002_30,lsat7_2002_40,lsat7_2002_50,lsat7_2002_70
<br>
# Now digitize training areas &quot;training&quot; with the
digitizer <br>
# and convert to raster model with v.to.rast <br>
v.to.rast input=training output=training use=cat
label_column=label <br>
# calculate statistics <br>
i.gensigset trainingmap=training group=my_lsat7_2002
subgroup=my_lsat7_2002 signaturefile=my_smap_lsat7_2002
maxsig=5 <br>
i.smap group=my_lsat7_2002 subgroup=my_lsat7_2002
signaturefile=my_smap_lsat7_2002
output=lsat7_2002_smap_classes <br>
# Visually check result <br>
d.mon wx0 <br>
d.rast.leg lsat7_2002_smap_classes <br>
# Statistically check result <br>
r.kappa -w classification=lsat7_2002_smap_classes
reference=training</p>

<p style="margin-top: 1em">REFERENCES <br>
&Acirc;&middot; C. Bouman and M. Shapiro,
&quot;Multispectral Image Segmentation using a Multiscale
Image Model&quot;, Proc. of IEEE Int&acirc;l Conf. on
Acoust., Speech and Sig. Proc., pp. III-565 - <br>
III-568, San Francisco, California, March 23-26, 1992.</p>

<p style="margin-top: 1em">&Acirc;&middot; C. Bouman and M.
Shapiro 1994, &quot;A Multiscale Random Field Model for
Bayesian Image Segmentation&quot;, IEEE Trans. on Image
Processing., 3(2), 162-177&quot; (PDF)</p>

<p style="margin-top: 1em">&Acirc;&middot; McCauley, J.D.
and B.A. Engel 1995, &quot;Comparison of Scene
Segmentations: SMAP, ECHO and Maximum Likelyhood&quot;, IEEE
Trans. on Geoscience and Remote Sensing, 33(6): <br>
1313-1316.</p>

<p style="margin-top: 1em">SEE ALSO <br>
i.group for creating groups and subgroups <br>
r.mapcalc to copy classification result in order to cut out
MASKed subareas <br>
i.gensigset to generate the signature file required by this
program</p>

<p style="margin-top: 1em">g.gui.iclass, i.maxlik, i.smap,
r.kappa</p>

<p style="margin-top: 1em">AUTHORS <br>
Charles Bouman, School of Electrical Engineering, Purdue
University</p>

<p style="margin-top: 1em">Michael Shapiro, U.S.Army
Construction Engineering Research Laboratory</p>

<p style="margin-top: 1em">Last changed: $Date: 2014-12-19
22:17:36 +0100 (Fri, 19 Dec 2014) $</p>

<p style="margin-top: 1em">SOURCE CODE <br>
Available at: i.smap source code (history)</p>

<p style="margin-top: 1em">Main index | Imagery index |
Topics index | Keywords index | Graphical index | Full
index</p>

<p style="margin-top: 1em">&Acirc;&copy; 2003-2016 GRASS
Development Team, GRASS GIS 7.2.0 Reference Manual</p>

<p style="margin-top: 1em">GRASS 7.2.0 i.smap(1grass)</p>
<hr>
</body>
</html>
