<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>superformat(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">superformat(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">superformat(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="Name"><a class="selflink" href="#Name">Name</a></h1>
superformat - format floppies
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="Note"><a class="selflink" href="#Note">Note</a></h1>
This manpage has been automatically generated from fdutils's texinfo
  documentation. However, this process is only approximative, and some items,
  such as cross-references, footnotes and indices are lost in this translation
  process. Indeed, these items have no appropriate representation in the manpage
  format. Moreover, only the items specific to each command have been
  translated, and the general information about fdutils has been dropped in the
  manpage version. Thus I strongly advise you to use the original texinfo doc.
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate a printable copy from the texinfo doc, run the
      following commands:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make dvi; dvips fdutils.dvi
    </pre>
    <br/>
    <div style="height: 1.00em;">&#x00A0;</div>
    </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate a HTML copy, run:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make html
    </pre>
    <br/>
    <div style="height: 1.00em;">&#x00A0;</div>
    A pre-made HTML can be found at: `http://www.tux.org/pub/knaff/fdutils'</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">* &#x00A0;&#x00A0;</dt>
  <dd class="It-tag">To generate an info copy (browsable using emacs' info
      mode), run:
    <div style="height: 1.00em;">&#x00A0;</div>
    <pre>
<br/>
    ./configure; make info
    </pre>
    <br/>
    <div style="height: 1.00em;">&#x00A0;</div>
    </dd>
</dl>
<div class="Pp"></div>
The texinfo doc looks most pretty when printed or as HTML. Indeed, in the info
  version certain examples are difficult to read due to the quoting conventions
  used in info.
<h1 class="Sh" title="Sh" id="Description"><a class="selflink" href="#Description">Description</a></h1>
<pre>
<br/>
superformat [-D  <i>dos-drive</i>] [-v <i>verbosity-level</i>] [-b <i>begin-track</i>]
[-e  <i>end-track</i>] [--superverify] [--dosverify]
[--noverify] [--verify_later] [--zero-based]
[-G  <i>format-gap</i>] [-F <i>final-gap</i>] [-i <i>interleave</i>] [-c <i>chunksize</i>]
[-g  <i>gap</i>] [--absolute-skew <i>absolute-skew</i>] [--head-skew <i>head-skew</i>]
[--track-skew  <i>track-skew</i>] [--biggest-last] <i>drive</i> [<i>media-description</i>]
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
superformat is used to format disks with a capacity of up to 1992K HD or 3984K
  ED. See section Extended formats, for a detailed description of these formats.
  See section Media description, for a detailed description of the syntax for
  the media description. If no media description is given, superformat formats a
  disk in the highest available density for that drive, using standard
  parameters (i.e. no extra capacity formats).
<div class="Pp"></div>
When the disk is formatted, superformat automatically invokes mformat in order
  to put an MS-DOS filesystem on it. You may ignore this filesystem, if you
  don't need it.
<div class="Pp"></div>
Superformat allows one to format 2m formats. Be aware, however, that these 2m
  formats were specifically designed to hold an MS-DOS filesystem, and that they
  take advantage of the fact that the MS-DOS filesystem uses redundant sectors
  on the first track (the FAT, which is represented twice). The second copy of
  the FAT is <i>not</i> represented on the disk.
<div class="Pp"></div>
High capacity formats are sensitive to the exact rotation speed of the drive and
  the resulting difference in raw capacity. That's why superformat performs a
  measurement of the disks raw capacity before proceeding with the formatting.
  This measurement is rather time consuming, and can be avoided by storing the
  relative deviation of the drive capacity into the drive definition file file.
  See section Drive descriptions, for more details on this file. The line to be
  inserted into the drive definition file is printed by superformat after
  performing its measurement. However, this line depends on the drive and the
  controller. Do not copy it to other computers. Remove it before installing
  another drive or upgrade your floppy controller. Swap the drive numbers if you
  swap the drives in your computer.
<h1 class="Sh" title="Sh" id="Common_Options"><a class="selflink" href="#Common_Options">Common&#x00A0;Options</a></h1>
Many options have a long and a short form.
<dl class="Bl-tag">
  <dt class="It-tag">-h&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--help</dt>
  <dd class="It-tag">Print the help.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-D&#x00A0;<i>drive</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--dosdrive&#x00A0;<i>dos-drive</i></dt>
  <dd class="It-tag">Selects DOS drive letter for mformat (for example a: or
      b:). The colon may be omitted. The default is derived from the minor
      device number. If the drive letter cannot be guessed, and is not given on
      the command line, mformat is skipped.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-v&#x00A0;<i>verbosity-level</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--verbosity&#x00A0;<i>verbosity-level</i></dt>
  <dd class="It-tag">Sets the verbosity level. 1 prints a dot for each formatted
      track. 2 prints a changing sign for each formatted track (- for formatting
      the first head, = for formatting the second head, x for verifying the
      first head, and + for verifying the second head). 3 prints a complete line
      listing head and track. 6 and 9 print debugging information.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--superverify&#x00A0;</dt>
  <dd class="It-tag">Verifies the disk by first reading the track, than writing
      a pattern of U's, and then reading it again. This is useful as some errors
      only show up after the disk has once been written. However, this is also
      slower.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-B&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--dosverify</dt>
  <dd class="It-tag">Verifies the disk using the mbadblocks program. mbadblocks
      marks the bad sectors as bad in the FAT. The advantage of this is that
      disks which are only partially bad can still be used for MS-DOS
      filesystems.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-V&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--verify_later</dt>
  <dd class="It-tag">Verifies the whole disk at the end of the formatting
      process instead of at each track. Verifying the disk at each track has the
      advantage of detecting errors early on.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-f&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--noverify</dt>
  <dd class="It-tag">Skips the verification altogether.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--print-drive-deviation&#x00A0;</dt>
  <dd class="It-tag">Does not format, but prints the drive deviation. If file
      /etc/driveprm exists and provides a deviation for the drive, nothing is
      printed and the disk is not formatted.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Advanced_Options"><a class="selflink" href="#Advanced_Options">Advanced&#x00A0;Options</a></h1>
Usually, superformat uses sensible default values for these options, which you
  normally don't need to override. They are intended for expert users. Most of
  them should only be needed in cases where the hardware or superformat itself
  has bugs.
<dl class="Bl-tag">
  <dt class="It-tag">-b&#x00A0;<i>begin-track</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--begin_track&#x00A0;&#x00A0;<i>begin-track</i></dt>
  <dd class="It-tag">Describes the track where to begin formatting. This is
      useful if the previous formatting failed halfway through. The default is
      0.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-e&#x00A0;<i>end-track</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--end_track&#x00A0;<i>end-track</i></dt>
  <dd class="It-tag">Describes where to stop formatting. <i>end_track</i> is the
      last track to be formatted plus one. This is mainly useful for testing
      purposes. By default, this is the same as the total number of tracks. When
      the formatting stops, the final skew is displayed (to be used as absolute
      skew when you'll continue).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-S&#x00A0;<i>sizecode</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--sizecode&#x00A0;<i>sizecode</i></dt>
  <dd class="It-tag">Set the sector size to be used. The sector size is 128 * (2
      ^ <i>sizecode</i>). Sector sizes below 512 bytes are not supported, thus
      sizecode must be at least 2. By default 512 is assumed, unless you ask for
      more sectors than would fit with 512 bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--stretch&#x00A0;<i>stretch</i>&#x00A0;</dt>
  <dd class="It-tag">Set the stretch factor. The stretch factor describes how
      many physical tracks to skip to get to the next logical track (2 ^
      <i>stretch</i>). On double density 5 1/4 disks, the tracks are further
      apart from each other.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-G&#x00A0;<i>fmt-gap</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--format_gap&#x00A0;<i>fmt-gap</i></dt>
  <dd class="It-tag">Set the formatting gap. The formatting gap tells how far
      the sectors are away from each other. By default, this is chosen so as to
      evenly distribute the sectors along the track.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-F&#x00A0;<i>final-gap</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--final_gap&#x00A0;<i>final-gap</i></dt>
  <dd class="It-tag">Set the formatting gap to be used after the last
    sector.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-i&#x00A0;<i>interleave</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--interleave&#x00A0;<i>interleave</i></dt>
  <dd class="It-tag">Set the sector interleave factor.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">-c&#x00A0;<i>chunksize</i>&#x00A0;</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--chunksize&#x00A0;<i>chunksize</i></dt>
  <dd class="It-tag">Set the size of the chunks. The chunks are small auxiliary
      sectors used during formatting. They are used to handle heterogeneous
      sector sizes (i.e. not all sectors have the same size) and negative
      formatting gaps.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--biggest-last&#x00A0;</dt>
  <dd class="It-tag">For MSS formats, make sure that the biggest sector is last
      on the track. This makes the format more reliable on drives which are out
      of spec.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--zero-based&#x00A0;</dt>
  <dd class="It-tag">Formats the disk with sector numbers starting at 0, rather
      than 1. Certain CP/M boxes or Music synthesizers use this format. Those
      disks can currently not be read/written to by the standard Linux
      read/write API; you have to use fdrawcmd to access them. As disk verifying
      is done by this API, verifying is automatically switched off when
      formatting zero-based.</dd>
</dl>
<h1 class="Sh" title="Sh" id="Sector_skewing_options"><a class="selflink" href="#Sector_skewing_options">Sector&#x00A0;skewing&#x00A0;options</a></h1>
In order to maximize the user data transfer rate, the sectors are arranged in
  such a way that sector 1 of the new track/head comes under the head at the
  very moment when the drive is ready to read from that track, after having read
  the previous track. Thus the first sector of the second track is not
  necessarily near the first sector of the first track. The skew value describes
  for each track how far sector number 1 is away from the index mark. This skew
  value changes for each head and track. The amount of this change depends on
  how fast the disk spins, and on how much time is needed to change the head or
  the track.
<dl class="Bl-tag">
  <dt class="It-tag">--absolute_skew&#x00A0;<i>absolute-skew</i>&#x00A0;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Set the absolute skew. This skew value is used for the
      first formatted track. It is expressed in raw bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--head_skew&#x00A0;<i>head-skew</i>&#x00A0;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Set the head skew. This is the skew added for passing from
      head 0 to head 1. It is expressed in raw bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--track_skew&#x00A0;<i>track-skew</i>&#x00A0;</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Set the track skew. This is the skew added for seeking to
      the next track. It is expressed in raw bytes.</dd>
</dl>
<div class="Pp"></div>
Example: (absolute skew=3, head skew=1, track skew=2)
<div class="Pp"></div>
<pre>
<br/>
track 0 head 0: 4,5,6,1,2,3	(skew=3)
track 0 head 1: 3,4,5,6,1,2	(skew=4)
track 1 head 0: 1,2,3,4,5,6	(skew=0)
track 1 head 1: 6,1,2,3,4,5	(skew=1)
track 2 head 0: 4,5,6,1,2,3	(skew=3)
track 2 head 1: 3,4,5,6,1,2	(skew=4)
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
N.B. For simplicity's sake, this example expresses skews in units of sectors. In
  reality, superformat expects the skews to be expressed in raw bytes.
<h1 class="Sh" title="Sh" id="Media_description"><a class="selflink" href="#Media_description">Media
  description</a></h1>
Please see the Media description section in the full fdutils documentation:
<div>&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">- Texinfo documentation (info fdutils)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- HTML documentation in
    /usr/share/doc/fdutils/Fdutils.html</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">- or DVI documentation in
    /usr/share/doc/fdutils/Fdutils.dvi.gz</dt>
  <dd class="It-tag"></dd>
</dl>
<h1 class="Sh" title="Sh" id="Examples"><a class="selflink" href="#Examples">Examples</a></h1>
In all the examples of this section, we assume that drive 0 is a 3 1/2 and drive
  1 a 5 1/4.
<div class="Pp"></div>
The following example shows how to format a 1440K disk in drive 0:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd0 hd
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 1200K disk in drive 1:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd1 hd
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 1440K disk in drive 1:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd1 hd sect=18
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 720K disk in drive 0:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd0 dd
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 1743K disk in drive 0 (83 cylinders
  times 21 sectors):
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd0 sect=21 cyl=83
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 1992K disk in drive 0 (83 cylinders
  times 2 heads times 12 KB per track)
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd0 tracksize=12KB cyl=83 mss
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
The following example shows how to format a 1840K disk in drive 0. It will have
  5 2048-byte sectors, one 1024-byte sector, and one 512-byte sector per track:
<div style="height: 1.00em;">&#x00A0;</div>
<pre>
<br/>
superformat /dev/fd0 tracksize=23b mss 2m ssize=2KB
</pre>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<div class="Pp"></div>
All these formats can be autodetected by mtools, using the floppy driver's
  default settings.
<h1 class="Sh" title="Sh" id="Troubleshooting"><a class="selflink" href="#Troubleshooting">Troubleshooting</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">FDC&#x00A0;busy,&#x00A0;sleeping&#x00A0;for&#x00A0;a&#x00A0;second&#x00A0;</dt>
  <dd class="It-tag">When another program accesses a disk drive on the same
      controller as the one being formatted, superformat has to wait until the
      other access is finished. If this happens, check whether any other program
      accesses a drive (or whether a drive is mounted), kill that program (or
      unmount the drive), and the format should proceed normally.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">I/O&#x00A0;errors&#x00A0;during&#x00A0;verification&#x00A0;</dt>
  <dd class="It-tag">Your drive may be too far out of tolerance, and you may
      thus need to supply a margin parameter. Run floppymeter (see section
      floppymeter) to find out an appropriate value for this parameter, and add
      the suggested margin parameter to the command line</dd>
</dl>
<h1 class="Sh" title="Sh" id="Bugs"><a class="selflink" href="#Bugs">Bugs</a></h1>
Opening up new window while superformat is running produces overrun errors.
  These errors are benign, as the failed operation is automatically retried
  until it succeeds.
<h1 class="Sh" title="Sh" id="See_Also"><a class="selflink" href="#See_Also">See
  Also</a></h1>
Fdutils' texinfo doc</div>
<table class="foot">
  <tr>
    <td class="foot-date">03Mar05</td>
    <td class="foot-os">fdutils-5.5</td>
  </tr>
</table>
</body>
</html>
