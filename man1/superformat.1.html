<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:39:25 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>superformat(1) General Commands Manual
superformat(1)</p>

<p style="margin-top: 1em">Name <br>
superformat - format floppies</p>

<p style="margin-top: 1em">Note <br>
This manpage has been automatically generated from
fdutils&rsquo;s texinfo documentation. However, this process
is only approximative, and some items, such as
cross-references, foot&acirc; <br>
notes and indices are lost in this translation process.
Indeed, these items have no appropriate representation in
the manpage format. Moreover, only the items specific to
each <br>
command have been translated, and the general information
about fdutils has been dropped in the manpage version. Thus
I strongly advise you to use the original texinfo doc.</p>

<p style="margin-top: 1em">* To generate a printable copy
from the texinfo doc, run the following commands:</p>

<p style="margin-top: 1em">./configure; make dvi; dvips
fdutils.dvi</p>

<p style="margin-top: 1em">* To generate a HTML copy,
run:</p>

<p style="margin-top: 1em">./configure; make html</p>

<p style="margin-top: 1em">A pre-made HTML can be found at:
&lsquo;http://www.tux.org/pub/knaff/fdutils&rsquo;</p>

<p style="margin-top: 1em">* To generate an info copy
(browsable using emacs&rsquo; info mode), run:</p>

<p style="margin-top: 1em">./configure; make info</p>

<p style="margin-top: 1em">The texinfo doc looks most
pretty when printed or as HTML. Indeed, in the info version
certain examples are difficult to read due to the quoting
conventions used in info.</p>

<p style="margin-top: 1em">Description <br>
superformat [-D dos-drive] [-v verbosity-level] [-b
begin-track] <br>
[-e end-track] [--superverify] [--dosverify] <br>
[--noverify] [--verify_later] [--zero-based] <br>
[-G format-gap] [-F final-gap] [-i interleave] [-c
chunksize] <br>
[-g gap] [--absolute-skew absolute-skew] [--head-skew
head-skew] <br>
[--track-skew track-skew] [--biggest-last] drive
[media-description]</p>

<p style="margin-top: 1em">superformat is used to format
disks with a capacity of up to 1992K HD or 3984K ED. See
section Extended formats, for a detailed description of
these formats. See section Media <br>
description, for a detailed description of the syntax for
the media description. If no media description is given,
superformat formats a disk in the highest available density
<br>
for that drive, using standard parameters (i.e. no extra
capacity formats).</p>

<p style="margin-top: 1em">When the disk is formatted,
superformat automatically invokes mformat in order to put an
MS-DOS filesystem on it. You may ignore this filesystem, if
you don&rsquo;t need it.</p>

<p style="margin-top: 1em">Superformat allows one to format
2m formats. Be aware, however, that these 2m formats were
specifically designed to hold an MS-DOS filesystem, and that
they take advantage of <br>
the fact that the MS-DOS filesystem uses redundant sectors
on the first track (the FAT, which is represented twice).
The second copy of the FAT is not represented on the
disk.</p>

<p style="margin-top: 1em">High capacity formats are
sensitive to the exact rotation speed of the drive and the
resulting difference in raw capacity. That&rsquo;s why
superformat performs a measurement of the <br>
disks raw capacity before proceeding with the formatting.
This measurement is rather time consuming, and can be
avoided by storing the relative deviation of the drive
capacity <br>
into the drive definition file file. See section Drive
descriptions, for more details on this file. The line to be
inserted into the drive definition file is printed by
superfor&acirc; <br>
mat after performing its measurement. However, this line
depends on the drive and the controller. Do not copy it to
other computers. Remove it before installing another drive
<br>
or upgrade your floppy controller. Swap the drive numbers if
you swap the drives in your computer.</p>

<p style="margin-top: 1em">Common Options <br>
Many options have a long and a short form.</p>

<p style="margin-top: 1em">-h <br>
--help Print the help.</p>

<p style="margin-top: 1em">-D drive <br>
--dosdrive dos-drive <br>
Selects DOS drive letter for mformat (for example a: or b:).
The colon may be omitted. The default is derived from the
minor device number. If the drive letter cannot <br>
be guessed, and is not given on the command line, mformat is
skipped.</p>

<p style="margin-top: 1em">-v verbosity-level <br>
--verbosity verbosity-level <br>
Sets the verbosity level. 1 prints a dot for each formatted
track. 2 prints a changing sign for each formatted track (-
for formatting the first head, = for formatting the <br>
second head, x for verifying the first head, and + for
verifying the second head). 3 prints a complete line listing
head and track. 6 and 9 print debugging information.</p>

<p style="margin-top: 1em">--superverify <br>
Verifies the disk by first reading the track, than writing a
pattern of U&rsquo;s, and then reading it again. This is
useful as some errors only show up after the disk has once
<br>
been written. However, this is also slower.</p>

<p style="margin-top: 1em">-B <br>
--dosverify <br>
Verifies the disk using the mbadblocks program. mbadblocks
marks the bad sectors as bad in the FAT. The advantage of
this is that disks which are only partially bad can <br>
still be used for MS-DOS filesystems.</p>

<p style="margin-top: 1em">-V <br>
--verify_later <br>
Verifies the whole disk at the end of the formatting process
instead of at each track. Verifying the disk at each track
has the advantage of detecting errors early on.</p>

<p style="margin-top: 1em">-f <br>
--noverify <br>
Skips the verification altogether.</p>

<p style="margin-top: 1em">--print-drive-deviation <br>
Does not format, but prints the drive deviation. If file
/etc/driveprm exists and provides a deviation for the drive,
nothing is printed and the disk is not formatted.</p>

<p style="margin-top: 1em">Advanced Options <br>
Usually, superformat uses sensible default values for these
options, which you normally don&rsquo;t need to override.
They are intended for expert users. Most of them should only
be <br>
needed in cases where the hardware or superformat itself has
bugs.</p>

<p style="margin-top: 1em">-b begin-track <br>
--begin_track begin-track <br>
Describes the track where to begin formatting. This is
useful if the previous formatting failed halfway through.
The default is 0.</p>

<p style="margin-top: 1em">-e end-track <br>
--end_track end-track <br>
Describes where to stop formatting. end_track is the last
track to be formatted plus one. This is mainly useful for
testing purposes. By default, this is the same as the <br>
total number of tracks. When the formatting stops, the final
skew is displayed (to be used as absolute skew when
you&rsquo;ll continue).</p>

<p style="margin-top: 1em">-S sizecode <br>
--sizecode sizecode <br>
Set the sector size to be used. The sector size is 128 * (2
^ sizecode). Sector sizes below 512 bytes are not supported,
thus sizecode must be at least 2. By default 512 <br>
is assumed, unless you ask for more sectors than would fit
with 512 bytes.</p>

<p style="margin-top: 1em">--stretch stretch <br>
Set the stretch factor. The stretch factor describes how
many physical tracks to skip to get to the next logical
track (2 ^ stretch). On double density 5 1/4 disks, the <br>
tracks are further apart from each other.</p>

<p style="margin-top: 1em">-G fmt-gap <br>
--format_gap fmt-gap <br>
Set the formatting gap. The formatting gap tells how far the
sectors are away from each other. By default, this is chosen
so as to evenly distribute the sectors along the <br>
track.</p>

<p style="margin-top: 1em">-F final-gap <br>
--final_gap final-gap <br>
Set the formatting gap to be used after the last sector.</p>

<p style="margin-top: 1em">-i interleave <br>
--interleave interleave <br>
Set the sector interleave factor.</p>

<p style="margin-top: 1em">-c chunksize <br>
--chunksize chunksize <br>
Set the size of the chunks. The chunks are small auxiliary
sectors used during formatting. They are used to handle
heterogeneous sector sizes (i.e. not all sectors have <br>
the same size) and negative formatting gaps.</p>

<p style="margin-top: 1em">--biggest-last <br>
For MSS formats, make sure that the biggest sector is last
on the track. This makes the format more reliable on drives
which are out of spec.</p>

<p style="margin-top: 1em">--zero-based <br>
Formats the disk with sector numbers starting at 0, rather
than 1. Certain CP/M boxes or Music synthesizers use this
format. Those disks can currently not be read/written <br>
to by the standard Linux read/write API; you have to use
fdrawcmd to access them. As disk verifying is done by this
API, verifying is automatically switched off when for&acirc;
<br>
matting zero-based.</p>

<p style="margin-top: 1em">Sector skewing options <br>
In order to maximize the user data transfer rate, the
sectors are arranged in such a way that sector 1 of the new
track/head comes under the head at the very moment when the
<br>
drive is ready to read from that track, after having read
the previous track. Thus the first sector of the second
track is not necessarily near the first sector of the first
<br>
track. The skew value describes for each track how far
sector number 1 is away from the index mark. This skew value
changes for each head and track. The amount of this change
<br>
depends on how fast the disk spins, and on how much time is
needed to change the head or the track.</p>

<p style="margin-top: 1em">--absolute_skew
absolute-skew</p>

<p style="margin-top: 1em">Set the absolute skew. This skew
value is used for the first formatted track. It is expressed
in raw bytes.</p>

<p style="margin-top: 1em">--head_skew head-skew</p>

<p style="margin-top: 1em">Set the head skew. This is the
skew added for passing from head 0 to head 1. It is
expressed in raw bytes.</p>

<p style="margin-top: 1em">--track_skew track-skew</p>

<p style="margin-top: 1em">Set the track skew. This is the
skew added for seeking to the next track. It is expressed in
raw bytes.</p>

<p style="margin-top: 1em">Example: (absolute skew=3, head
skew=1, track skew=2)</p>

<p style="margin-top: 1em">track 0 head 0: 4,5,6,1,2,3
(skew=3) <br>
track 0 head 1: 3,4,5,6,1,2 (skew=4)</p>

<p style="margin-top: 1em">track 1 head 0: 1,2,3,4,5,6
(skew=0) <br>
track 1 head 1: 6,1,2,3,4,5 (skew=1)</p>

<p style="margin-top: 1em">track 2 head 0: 4,5,6,1,2,3
(skew=3) <br>
track 2 head 1: 3,4,5,6,1,2 (skew=4)</p>

<p style="margin-top: 1em">N.B. For simplicity&rsquo;s
sake, this example expresses skews in units of sectors. In
reality, superformat expects the skews to be expressed in
raw bytes.</p>

<p style="margin-top: 1em">Media description <br>
Please see the Media description section in the full fdutils
documentation: <br>
- Texinfo documentation (info fdutils) <br>
- HTML documentation in /usr/share/doc/fdutils/Fdutils.html
<br>
- or DVI documentation in
/usr/share/doc/fdutils/Fdutils.dvi.gz</p>

<p style="margin-top: 1em">Examples <br>
In all the examples of this section, we assume that drive 0
is a 3 1/2 and drive 1 a 5 1/4.</p>

<p style="margin-top: 1em">The following example shows how
to format a 1440K disk in drive 0:</p>

<p style="margin-top: 1em">superformat /dev/fd0 hd</p>

<p style="margin-top: 1em">The following example shows how
to format a 1200K disk in drive 1:</p>

<p style="margin-top: 1em">superformat /dev/fd1 hd</p>

<p style="margin-top: 1em">The following example shows how
to format a 1440K disk in drive 1:</p>

<p style="margin-top: 1em">superformat /dev/fd1 hd
sect=18</p>

<p style="margin-top: 1em">The following example shows how
to format a 720K disk in drive 0:</p>

<p style="margin-top: 1em">superformat /dev/fd0 dd</p>

<p style="margin-top: 1em">The following example shows how
to format a 1743K disk in drive 0 (83 cylinders times 21
sectors):</p>

<p style="margin-top: 1em">superformat /dev/fd0 sect=21
cyl=83</p>

<p style="margin-top: 1em">The following example shows how
to format a 1992K disk in drive 0 (83 cylinders times 2
heads times 12 KB per track)</p>

<p style="margin-top: 1em">superformat /dev/fd0
tracksize=12KB cyl=83 mss</p>

<p style="margin-top: 1em">The following example shows how
to format a 1840K disk in drive 0. It will have 5 2048-byte
sectors, one 1024-byte sector, and one 512-byte sector per
track:</p>

<p style="margin-top: 1em">superformat /dev/fd0
tracksize=23b mss 2m ssize=2KB</p>

<p style="margin-top: 1em">All these formats can be
autodetected by mtools, using the floppy driver&rsquo;s
default settings.</p>

<p style="margin-top: 1em">Troubleshooting <br>
FDC busy, sleeping for a second <br>
When another program accesses a disk drive on the same
controller as the one being formatted, superformat has to
wait until the other access is finished. If this happens,
<br>
check whether any other program accesses a drive (or whether
a drive is mounted), kill that program (or unmount the
drive), and the format should proceed normally.</p>

<p style="margin-top: 1em">I/O errors during verification
<br>
Your drive may be too far out of tolerance, and you may thus
need to supply a margin parameter. Run floppymeter (see
section floppymeter) to find out an appropriate <br>
value for this parameter, and add the suggested margin
parameter to the command line</p>

<p style="margin-top: 1em">Bugs <br>
Opening up new window while superformat is running produces
overrun errors. These errors are benign, as the failed
operation is automatically retried until it succeeds.</p>

<p style="margin-top: 1em">See Also <br>
Fdutils&rsquo; texinfo doc</p>

<p style="margin-top: 1em">fdutils-5.5 03Mar05
superformat(1)</p>
<hr>
</body>
</html>
