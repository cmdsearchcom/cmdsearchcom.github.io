<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:29:39 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>p11tool(1) User Commands p11tool(1)</p>

<p style="margin-top: 1em">NAME <br>
p11tool - GnuTLS PKCS #11 tool</p>

<p style="margin-top: 1em">SYNOPSIS <br>
p11tool [-flags] [-flag [value]] [--option-name[[=| ]value]]
[url]</p>

<p style="margin-top: 1em">Operands and options may be
intermixed. They will be reordered.</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Program that allows operations on PKCS #11 smart cards and
security modules.</p>

<p style="margin-top: 1em">To use PKCS #11 tokens with
GnuTLS the p11-kit configuration files need to be setup.
That is create a .module file in /etc/pkcs11/modules with
the contents &rsquo;module: <br>
/path/to/pkcs11.so&rsquo;. Alternatively the configuration
file /etc/gnutls/pkcs11.conf has to exist and contain a
number of lines of the form
&rsquo;load=/usr/lib/opensc-pkcs11.so&rsquo;.</p>

<p style="margin-top: 1em">You can provide the PIN to be
used for the PKCS #11 operations with the environment
variables GNUTLS_PIN and GNUTLS_SO_PIN.</p>

<p style="margin-top: 1em">OPTIONS <br>
-d number, --debug=number <br>
Enable debugging. This option takes an integer number as its
argument. The value of number is constrained to being: <br>
in the range 0 through 9999</p>

<p style="margin-top: 1em">Specifies the debug level.</p>

<p style="margin-top: 1em">--outfile=string <br>
Output file.</p>

<p style="margin-top: 1em">--list-tokens <br>
List all available tokens.</p>

<p style="margin-top: 1em">--export <br>
Export the object specified by the URL.</p>

<p style="margin-top: 1em">--export-chain <br>
Export the certificate specified by the URL and its chain of
trust.</p>

<p style="margin-top: 1em">Exports the certificate
specified by the URL and generates its chain of trust based
on the stored certificates in the module.</p>

<p style="margin-top: 1em">--list-mechanisms <br>
List all available mechanisms in a token.</p>

<p style="margin-top: 1em">--info List information on an
available object in a token.</p>

<p style="margin-top: 1em">--list-all <br>
List all available objects in a token.</p>

<p style="margin-top: 1em">--list-all-certs <br>
List all available certificates in a token.</p>

<p style="margin-top: 1em">--list-certs <br>
List all certificates that have an associated private
key.</p>

<p style="margin-top: 1em">--list-all-privkeys <br>
List all available private keys in a token.</p>

<p style="margin-top: 1em">Lists all the private keys in a
token that match the specified URL.</p>

<p style="margin-top: 1em">--list-privkeys <br>
This is an alias for the --list-all-privkeys option.</p>

<p style="margin-top: 1em">--list-keys <br>
This is an alias for the --list-all-privkeys option.</p>

<p style="margin-top: 1em">--list-all-trusted <br>
List all available certificates marked as trusted.</p>

<p style="margin-top: 1em">--write <br>
Writes the loaded objects to a PKCS #11 token.</p>

<p style="margin-top: 1em">It can be used to write private
keys, certificates or secret keys to a token.</p>

<p style="margin-top: 1em">--delete <br>
Deletes the objects matching the PKCS #11 URL.</p>

<p style="margin-top: 1em">--generate-random=number <br>
Generate random data. This option takes an integer number as
its argument.</p>

<p style="margin-top: 1em">Asks the token to generate a
number of bytes of random bytes.</p>

<p style="margin-top: 1em">--generate-rsa <br>
Generate an RSA private-public key pair.</p>

<p style="margin-top: 1em">Generates an RSA private-public
key pair on the specified token.</p>

<p style="margin-top: 1em">--generate-dsa <br>
Generate a DSA private-public key pair.</p>

<p style="margin-top: 1em">Generates a DSA private-public
key pair on the specified token.</p>

<p style="margin-top: 1em">--generate-ecc <br>
Generate an ECDSA private-public key pair.</p>

<p style="margin-top: 1em">Generates an ECDSA
private-public key pair on the specified token.</p>

<p style="margin-top: 1em">--export-pubkey <br>
Export the public key for a private key.</p>

<p style="margin-top: 1em">Exports the public key for the
specified private key</p>

<p style="margin-top: 1em">--label=string <br>
Sets a label for the write operation.</p>

<p style="margin-top: 1em">--mark-wrap, - Fl -no-mark-wrap
<br>
Marks the generated key to be a wrapping key. The
no-mark-wrap form will disable the option.</p>

<p style="margin-top: 1em">Marks the generated key with the
CKA_WRAP flag.</p>

<p style="margin-top: 1em">--mark-trusted, - Fl
-no-mark-trusted <br>
Marks the object to be written as trusted. The
no-mark-trusted form will disable the option.</p>

<p style="margin-top: 1em">Marks the object to be
generated/copied with the CKA_TRUST flag.</p>

<p style="margin-top: 1em">--mark-ca, - Fl -no-mark-ca <br>
Marks the object to be written as a CA. The no-mark-ca form
will disable the option.</p>

<p style="margin-top: 1em">Marks the object to be
generated/copied with the CKA_CERTIFICATE_CATEGORY as
CA.</p>

<p style="margin-top: 1em">--mark-private, - Fl
-no-mark-private <br>
Marks the object to be written as private. The
no-mark-private form will disable the option. This option is
enabled by default.</p>

<p style="margin-top: 1em">Marks the object to be
generated/copied with the CKA_PRIVATE flag. The written
object will require a PIN to be used.</p>

<p style="margin-top: 1em">--trusted <br>
This is an alias for the --mark-trusted option.</p>

<p style="margin-top: 1em">--ca This is an alias for the
--mark-ca option.</p>

<p style="margin-top: 1em">--private <br>
This is an alias for the --mark-private option.</p>

<p style="margin-top: 1em">--login, - Fl -no-login <br>
Force (user) login to token. The no-login form will disable
the option.</p>

<p style="margin-top: 1em">--so-login, - Fl -no-so-login
<br>
Force security officer login to token. The no-so-login form
will disable the option.</p>

<p style="margin-top: 1em">Forces login to the token as
security officer (admin).</p>

<p style="margin-top: 1em">--admin-login <br>
This is an alias for the --so-login option.</p>

<p style="margin-top: 1em">--detailed-url, - Fl
-no-detailed-url <br>
Print detailed URLs. The no-detailed-url form will disable
the option.</p>

<p style="margin-top: 1em">--secret-key=string <br>
Provide a hex encoded secret key.</p>

<p style="margin-top: 1em">--load-privkey=file <br>
Private key file to use.</p>

<p style="margin-top: 1em">--load-pubkey=file <br>
Public key file to use.</p>

<p style="margin-top: 1em">--load-certificate=file <br>
Certificate file to use.</p>

<p style="margin-top: 1em">-8, --pkcs8 <br>
Use PKCS #8 format for private keys.</p>

<p style="margin-top: 1em">--bits=number <br>
Specify the number of bits for key generate. This option
takes an integer number as its argument.</p>

<p style="margin-top: 1em">--curve=string <br>
Specify the curve used for EC key generation.</p>

<p style="margin-top: 1em">Supported values are secp192r1,
secp224r1, secp256r1, secp384r1 and secp521r1.</p>

<p style="margin-top: 1em">--sec-param=security parameter
<br>
Specify the security level.</p>

<p style="margin-top: 1em">This is alternative to the bits
option. Available options are [low, legacy, medium, high,
ultra].</p>

<p style="margin-top: 1em">--inder, - Fl -no-inder <br>
Use DER/RAW format for input. The no-inder form will disable
the option.</p>

<p style="margin-top: 1em">Use DER/RAW format for input
certificates and private keys.</p>

<p style="margin-top: 1em">--inraw <br>
This is an alias for the --inder option.</p>

<p style="margin-top: 1em">--outder, - Fl -no-outder <br>
Use DER format for output certificates, private keys, and DH
parameters. The no-outder form will disable the option.</p>

<p style="margin-top: 1em">The output will be in DER or RAW
format.</p>

<p style="margin-top: 1em">--outraw <br>
This is an alias for the --outder option.</p>

<p style="margin-top: 1em">--initialize <br>
Initializes a PKCS #11 token.</p>

<p style="margin-top: 1em">--set-pin=string <br>
Specify the PIN to use on token initialization.</p>

<p style="margin-top: 1em">Alternatively the GNUTLS_PIN
environment variable may be used.</p>

<p style="margin-top: 1em">--set-so-pin=string <br>
Specify the Security Officer&rsquo;s PIN to use on token
initialization.</p>

<p style="margin-top: 1em">Alternatively the GNUTLS_SO_PIN
environment variable may be used.</p>

<p style="margin-top: 1em">--provider=file <br>
Specify the PKCS #11 provider library.</p>

<p style="margin-top: 1em">This will override the default
options in /etc/gnutls/pkcs11.conf</p>

<p style="margin-top: 1em">--batch <br>
Disable all interaction with the tool. All parameters need
to be specified on command line..</p>

<p style="margin-top: 1em">-h, --help <br>
Display usage information and exit.</p>

<p style="margin-top: 1em">-!, --more-help <br>
Pass the extended usage information through a pager.</p>

<p style="margin-top: 1em">-v [{v|c|n --version [{v|c|n}]}]
<br>
Output version of program and exit. The default mode is
&lsquo;v&rsquo;, a simple version. The &lsquo;c&rsquo; mode
will print copyright information and &lsquo;n&rsquo; will
print the full copyright <br>
notice.</p>

<p style="margin-top: 1em">EXAMPLES <br>
To view all tokens in your system use: <br>
$ p11tool --list-tokens</p>

<p style="margin-top: 1em">To view all objects in a token
use: <br>
$ p11tool --login --list-all
&quot;pkcs11:TOKEN-URL&quot;</p>

<p style="margin-top: 1em">To store a private key and a
certificate in a token run: <br>
$ p11tool --login --write &quot;pkcs11:URL&quot;
--load-privkey key.pem --label &quot;Mykey&quot; <br>
$ p11tool --login --write &quot;pkcs11:URL&quot;
--load-certificate cert.pem --label &quot;Mykey&quot; <br>
Note that some tokens require the same label to be used for
the certificate and its corresponding private key.</p>

<p style="margin-top: 1em">To generate an RSA private key
inside the token use: <br>
$ p11tool --login --generate-rsa --bits 1024 --label
&quot;MyNewKey&quot; --outfile MyNewKey.pub
&quot;pkcs11:TOKEN-URL&quot; <br>
The bits parameter in the above example is explicitly set
because some tokens only support limited choices in the bit
length. The output file is the corresponding public key.
<br>
This key can be used to general a certificate request with
certtool. <br>
certtool --generate-request --load-privkey
&quot;pkcs11:KEY-URL&quot; --load-pubkey MyNewKey.pub
--outfile request.pem</p>

<p style="margin-top: 1em">EXIT STATUS <br>
One of the following exit values will be returned:</p>

<p style="margin-top: 1em">0 (EXIT_SUCCESS) <br>
Successful program execution.</p>

<p style="margin-top: 1em">1 (EXIT_FAILURE) <br>
The operation failed or the command syntax was not
valid.</p>

<p style="margin-top: 1em">70 (EX_SOFTWARE) <br>
libopts had an internal operational error. Please report it
to autogen-users@lists.sourceforge.net. Thank you.</p>

<p style="margin-top: 1em">SEE ALSO <br>
certtool (1)</p>

<p style="margin-top: 1em">AUTHORS <br>
Nikos Mavrogiannopoulos, Simon Josefsson and others; see
/usr/share/doc/gnutls/AUTHORS for a complete list.</p>

<p style="margin-top: 1em">COPYRIGHT <br>
Copyright (C) 2000-2016 Free Software Foundation, and others
all rights reserved. This program is released under the
terms of the GNU General Public License, version 3 or
later.</p>

<p style="margin-top: 1em">BUGS <br>
Please send bug reports to: bugs@gnutls.org</p>

<p style="margin-top: 1em">NOTES <br>
This manual page was AutoGen-erated from the p11tool option
definitions.</p>

<p style="margin-top: 1em">3.3.24 06 Jul 2016
p11tool(1)</p>
<hr>
</body>
</html>
