<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>p11tool(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">p11tool(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">p11tool(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b>p11tool</b> - GnuTLS PKCS #11 tool
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>p11tool</b> [ <b>-flags</b>] [ <b>-flag</b> [<i>value</i>]] [
  <b>--option-name</b>[[=| ] <i>value</i>]] [url]
<div style="height: 0.00ex;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
Operands and options may be intermixed. They will be reordered.
<div style="height: 0.00ex;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Program that allows operations on PKCS #11 smart cards and security modules.
<div style="height: 1.00em;">&#x00A0;</div>
To use PKCS #11 tokens with GnuTLS the p11-kit configuration files need to be
  setup. That is create a .module file in /etc/pkcs11/modules with the contents
  'module: /path/to/pkcs11.so'. Alternatively the configuration file
  /etc/gnutls/pkcs11.conf has to exist and contain a number of lines of the form
  'load=/usr/lib/opensc-pkcs11.so'.
<div style="height: 1.00em;">&#x00A0;</div>
You can provide the PIN to be used for the PKCS #11 operations with the
  environment variables GNUTLS_PIN and GNUTLS_SO_PIN.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b> <i>number</i>, <b>--debug</b>=<i>number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Enable debugging. This option takes an integer number as its argument. The
      value of <i>number</i> is constrained to being:
    <br/>
    <pre>
in the range  0 through 9999
    </pre>
    <br/>
    <div style="height: 1.00em;">&#x00A0;</div>
    Specifies the debug level.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--outfile</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output file.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-tokens</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available tokens.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Export the object specified by the URL.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export-chain</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Export the certificate specified by the URL and its chain of trust.
    <div style="height: 1.00em;">&#x00A0;</div>
    Exports the certificate specified by the URL and generates its chain of
      trust based on the stored certificates in the module.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-mechanisms</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available mechanisms in a token.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--info</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List information on an available object in a token.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-all</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available objects in a token.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-all-certs</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available certificates in a token.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-certs</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all certificates that have an associated private key.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-all-privkeys</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available private keys in a token.
    <div style="height: 1.00em;">&#x00A0;</div>
    Lists all the private keys in a token that match the specified URL.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-privkeys</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--list-all-privkeys</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-keys</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--list-all-privkeys</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-all-trusted</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    List all available certificates marked as trusted.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--write</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Writes the loaded objects to a PKCS #11 token.
    <div style="height: 1.00em;">&#x00A0;</div>
    It can be used to write private keys, certificates or secret keys to a
      token.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--delete</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Deletes the objects matching the PKCS #11 URL.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generate-random</b>=<i>number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Generate random data. This option takes an integer number as its argument.
    <div style="height: 1.00em;">&#x00A0;</div>
    Asks the token to generate a number of bytes of random bytes.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generate-rsa</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Generate an RSA private-public key pair.
    <div style="height: 1.00em;">&#x00A0;</div>
    Generates an RSA private-public key pair on the specified token.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generate-dsa</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Generate a DSA private-public key pair.
    <div style="height: 1.00em;">&#x00A0;</div>
    Generates a DSA private-public key pair on the specified token.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--generate-ecc</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Generate an ECDSA private-public key pair.
    <div style="height: 1.00em;">&#x00A0;</div>
    Generates an ECDSA private-public key pair on the specified token.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--export-pubkey</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Export the public key for a private key.
    <div style="height: 1.00em;">&#x00A0;</div>
    Exports the public key for the specified private key</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--label</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Sets a label for the write operation.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-wrap</b>, <b>- Fl -no-mark-wrap</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Marks the generated key to be a wrapping key. The <i>no-mark-wrap</i> form
      will disable the option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Marks the generated key with the CKA_WRAP flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-trusted</b>, <b>- Fl -no-mark-trusted</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Marks the object to be written as trusted. The <i>no-mark-trusted</i> form
      will disable the option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Marks the object to be generated/copied with the CKA_TRUST flag.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-ca</b>, <b>- Fl -no-mark-ca</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Marks the object to be written as a CA. The <i>no-mark-ca</i> form will
      disable the option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Marks the object to be generated/copied with the CKA_CERTIFICATE_CATEGORY as
      CA.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--mark-private</b>, <b>- Fl -no-mark-private</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Marks the object to be written as private. The <i>no-mark-private</i> form
      will disable the option. This option is enabled by default.
    <div style="height: 1.00em;">&#x00A0;</div>
    Marks the object to be generated/copied with the CKA_PRIVATE flag. The
      written object will require a PIN to be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--trusted</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--mark-trusted</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ca</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--mark-ca</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--private</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--mark-private</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--login</b>, <b>- Fl -no-login</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force (user) login to token. The <i>no-login</i> form will disable the
      option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--so-login</b>, <b>- Fl -no-so-login</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Force security officer login to token. The <i>no-so-login</i> form will
      disable the option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Forces login to the token as security officer (admin).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--admin-login</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--so-login</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--detailed-url</b>, <b>- Fl -no-detailed-url</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Print detailed URLs. The <i>no-detailed-url</i> form will disable the
      option.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--secret-key</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Provide a hex encoded secret key.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--load-privkey</b>=<i>file</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Private key file to use.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--load-pubkey</b>=<i>file</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Public key file to use.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--load-certificate</b>=<i>file</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Certificate file to use.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-8</b>, <b>--pkcs8</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use PKCS #8 format for private keys.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bits</b>=<i>number</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the number of bits for key generate. This option takes an integer
      number as its argument.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--curve</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the curve used for EC key generation.
    <div style="height: 1.00em;">&#x00A0;</div>
    Supported values are secp192r1, secp224r1, secp256r1, secp384r1 and
      secp521r1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--sec-param</b>=<i>security</i> <i>parameter</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the security level.
    <div style="height: 1.00em;">&#x00A0;</div>
    This is alternative to the bits option. Available options are [low, legacy,
      medium, high, ultra].</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--inder</b>, <b>- Fl -no-inder</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use DER/RAW format for input. The <i>no-inder</i> form will disable the
      option.
    <div style="height: 1.00em;">&#x00A0;</div>
    Use DER/RAW format for input certificates and private keys.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--inraw</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--inder</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--outder</b>, <b>- Fl -no-outder</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Use DER format for output certificates, private keys, and DH parameters. The
      <i>no-outder</i> form will disable the option.
    <div style="height: 1.00em;">&#x00A0;</div>
    The output will be in DER or RAW format.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--outraw</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    This is an alias for the <i>--outder</i> option.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--initialize</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Initializes a PKCS #11 token.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--set-pin</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the PIN to use on token initialization.
    <div style="height: 1.00em;">&#x00A0;</div>
    Alternatively the GNUTLS_PIN environment variable may be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--set-so-pin</b>=<i>string</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the Security Officer's PIN to use on token initialization.
    <div style="height: 1.00em;">&#x00A0;</div>
    Alternatively the GNUTLS_SO_PIN environment variable may be used.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--provider</b>=<i>file</i></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Specify the PKCS #11 provider library.
    <div style="height: 1.00em;">&#x00A0;</div>
    This will override the default options in /etc/gnutls/pkcs11.conf</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Disable all interaction with the tool. All parameters need to be specified
      on command line..
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b>, <b>--help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Display usage information and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-!</b>, <b>--more-help</b></dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Pass the extended usage information through a pager.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b> [{<i>v|c|n</i> <b>--version</b>
    [{<i>v|c|n</i>}]}]</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Output version of program and exit. The default mode is `v', a simple
      version. The `c' mode will print copyright information and `n' will print
      the full copyright notice.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To view all tokens in your system use:
<div>&#x00A0;</div>
<br/>
<pre>
$ p11tool --list-tokens
<br/>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To view all objects in a token use:
<div>&#x00A0;</div>
<br/>
<pre>
$ p11tool --login --list-all &quot;pkcs11:TOKEN-URL&quot;
<br/>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
To store a private key and a certificate in a token run:
<div>&#x00A0;</div>
<br/>
<pre>
$ p11tool --login --write &quot;pkcs11:URL&quot; --load-privkey key.pem           --label &quot;Mykey&quot;
$ p11tool --login --write &quot;pkcs11:URL&quot; --load-certificate cert.pem           --label &quot;Mykey&quot;
<br/>
</pre>
Note that some tokens require the same label to be used for the certificate and
  its corresponding private key.
<div style="height: 1.00em;">&#x00A0;</div>
To generate an RSA private key inside the token use:
<div>&#x00A0;</div>
<br/>
<pre>
$ p11tool --login --generate-rsa --bits 1024 --label &quot;MyNewKey&quot;           --outfile MyNewKey.pub &quot;pkcs11:TOKEN-URL&quot;
<br/>
</pre>
The bits parameter in the above example is explicitly set because some tokens
  only support limited choices in the bit length. The output file is the
  corresponding public key. This key can be used to general a certificate
  request with certtool.
<div>&#x00A0;</div>
<br/>
<pre>
certtool --generate-request --load-privkey &quot;pkcs11:KEY-URL&quot;    --load-pubkey MyNewKey.pub --outfile request.pem
<br/>
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="EXIT_STATUS"><a class="selflink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
One of the following exit values will be returned:
<dl class="Bl-tag">
  <dt class="It-tag">0 (EXIT_SUCCESS)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    Successful program execution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">1 (EXIT_FAILURE)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    The operation failed or the command syntax was not valid.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">70 (EX_SOFTWARE)</dt>
  <dd class="It-tag">
    <div>&#x00A0;</div>
    libopts had an internal operational error. Please report it to
      autogen-users@lists.sourceforge.net. Thank you.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<br/>
 certtool (1)
<h1 class="Sh" title="Sh" id="AUTHORS"><a class="selflink" href="#AUTHORS">AUTHORS</a></h1>
Nikos Mavrogiannopoulos, Simon Josefsson and others; see
  /usr/share/doc/gnutls/AUTHORS for a complete list.
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2000-2016 Free Software Foundation, and others all rights
  reserved. This program is released under the terms of the GNU General Public
  License, version 3 or later.
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please send bug reports to: bugs@gnutls.org
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
This manual page was <i>AutoGen</i>-erated from the <b>p11tool</b> option
  definitions.</div>
<table class="foot">
  <tr>
    <td class="foot-date">06 Jul 2016</td>
    <td class="foot-os">3.3.24</td>
  </tr>
</table>
</body>
</html>
