<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>PYNAG(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PYNAG(1)</td>
    <td class="head-vol">pynag</td>
    <td class="head-rtitle">PYNAG(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pynag - command line front for manipulating nagios configuration
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
pynag &lt;sub-command&gt; [options] [arguments]
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
pynag is a command-line utility that can be used to view or change current
  nagios configuration.
<h1 class="Sh" title="Sh" id="SUB-COMMANDS"><a class="selflink" href="#SUB-COMMANDS">SUB-COMMANDS</a></h1>
<i>list</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">print to screen nagios configuration objects
  as specified by a WHERE clause
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag list [attribute1] [attribute2] [WHERE ...]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>update</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">modify specific attributes of nagios objects
  as specified by a WHERE and SET clause
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag update set attr1=value WHERE attr=value and attr=value
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>delete</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Delete objects from nagios configuration as
  specified by a WHERE clause
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag delete delete &lt;WHERE ...&gt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>add</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Add a new object definition
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag add &lt;object_type&gt; &lt;attr1=value1&gt; [attr2=value2]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>copy</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Copy objects, specifiying which attributes to
  change
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag copy &lt;WHERE ...&gt; &lt;SET attr1=value1 [attr2=value2] ...&gt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>execute</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">Executes the currently configured check
  command for a host or a service
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag execute &lt;host_name&gt; [service_description]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
<i>config</i>
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">modify values in main nagios configuration
  file (nagios.cfg)
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag config [--set &lt;attribute=value&gt;] [--old_value=attribute]
pynag config [--append &lt;attribute=value&gt;] [--old_value=attribute]
pynag config [--remove &lt;attribute&gt;] [--old_value=attribute]
pynag config [--get &lt;attribute&gt;]
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<h1 class="Sh" title="Sh" id="WHERE_STATEMENTS"><a class="selflink" href="#WHERE_STATEMENTS">WHERE
  STATEMENTS</a></h1>
Some Subcommands use WHERE statements to filter which objects to work with.
  Where has certain similarity with SQL syntax.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Syntax:</b></dt>
  <dd class="It-tag">
    <pre>
WHERE &lt;attr=value&gt; [AND attr=value] [OR attr=value] 
<br/>
[another where statement]
<br/>
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
    <div style="height: 1.00em;">&#x00A0;</div>
    where &quot;attr&quot; is any nagios attribute (i.e. host_name or
      service_description).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Example:</b></dt>
  <dd class="It-tag">
    <pre>
pynag list WHERE host_name=localhost and object_type=service
pynag list WHERE object_type=host or object_type=service
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Any search attributes have the same syntax as the pynag filter. For example
  these work just fine:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag list WHERE host_name__contains=production
pynag list WHERE host_name__startswith=prod
pynag list WHERE host_name__notcontains=test
pynag list host_name address WHERE address__exists=True
pynag list host_name WHERE register__isnot=0
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
The pynag filter supports few parameters that are not just attributes.
<div style="height: 1.00em;">&#x00A0;</div>
Example:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">filename -- The filename which the object belongs</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">id -- pynag unique identifier for the object</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">effective_command_line -- command which nagios will
    execute</dd>
</dl>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
Of course these can be combined with the pynag filter syntax:
<div style="margin-left: 0.00ex;">
<div style="margin-left: 3.50ex;">
<pre>
pynag list where filename__startswith=/etc/nagios/conf.d/
pynag list host_name service_description effective_command_line
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<br/>
</div>
<br/>
<div style="height: 1.00em;">&#x00A0;</div>
For detailed description of the filter see pydoc for
  pynag.Model.ObjectDefintion.filter()
<h1 class="Sh" title="Sh" id="SET_STATEMENTS"><a class="selflink" href="#SET_STATEMENTS">SET
  STATEMENTS</a></h1>
Subcommands that use SET statements (like update or copy) use them a list of
  attributes change for a specific object.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>Syntax:</b></dt>
  <dd class="It-tag">
    <pre>
SET &lt;attr1=value1&gt; [attr2=value2] [...]
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Example:</b></dt>
  <dd class="It-tag">
    <pre>
pynag update SET address=127.0.0.1 WHERE host_name=localhost and object_type=host
    </pre>
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<h2 class="Ss" title="Ss" id="List_all_services_that_have_myhost_as_a_host_name"><a class="selflink" href="#List_all_services_that_have_myhost_as_a_host_name">List
  all services that have myhost as a host_name</a></h2>
<pre>
pynag list host_name service_description WHERE host_name=myhost and object_type=service
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="Set_check_period_to_24x7_on_all_services_that_belong_to_host_myhost"><a class="selflink" href="#Set_check_period_to_24x7_on_all_services_that_belong_to_host_myhost">Set
  check_period to 24x7 on all services that belong to host myhost</a></h2>
<pre>
pynag update set check_period=24x7 WHERE host_name=myhost
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="list_examples"><a class="selflink" href="#list_examples">list
  examples</a></h2>
<pre>
pynag list host_name address WHERE object_type=host
pynag list host_name service_description WHERE host_name=examplehost and object_type=service
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="update_examples"><a class="selflink" href="#update_examples">update
  examples</a></h2>
<pre>
pynag update SET host_name=newhostname WHERE host_name=oldhostname
pynag update SET address=127.0.0.1 WHERE host_name='examplehost.example.com' and object_type=host
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="copy_examples"><a class="selflink" href="#copy_examples">copy
  examples</a></h2>
<pre>
pynag copy SET host_name=newhostname WHERE  host_name=oldhostname
pynag copy SET address=127.0.0.1 WHERE host_name='examplehost.example.com' and object_type=host
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="add_examples"><a class="selflink" href="#add_examples">add
  examples</a></h2>
<pre>
pynag add host host_name=examplehost use=generic-host address=127.0.0.1
pynag add service service_description=&quot;Test Service&quot; use=&quot;check_nrpe&quot; host_name=&quot;localhost&quot;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="delete_examples"><a class="selflink" href="#delete_examples">delete
  examples</a></h2>
<pre>
pynag delete where object_type=service and host_name='mydeprecated_host'
pynag delete where filename__startswith='/etc/nagios/myoldhosts'
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h2 class="Ss" title="Ss" id="execute_examples"><a class="selflink" href="#execute_examples">execute
  examples</a></h2>
<pre>
pynag execute localhost
pynag execute localhost &quot;Disk Space
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="ADDITIONAL_RESOURCES"><a class="selflink" href="#ADDITIONAL_RESOURCES">ADDITIONAL
  RESOURCES</a></h1>
See <i>http://github.com/pynag/pynag.git</i> for more information.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Pall Sigurdsson and Tomas Edwardsson
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2014, Pall Sigurdsson and Tomas Edwardsson</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 5, 2014</td>
    <td class="foot-os">0.9.1</td>
  </tr>
</table>
</body>
</html>
