<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>pki-ca-kraconnector(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">pki-ca-kraconnector(1)</td>
    <td class="head-vol">PKI CA-KRA Connector Management Commands</td>
    <td class="head-rtitle">pki-ca-kraconnector(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pki-ca-kraconnector - Command-Line Interface for managing CA-KRA connectors.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<b>pki</b> [CLI options] <b>ca-kraconnector</b>
<b>pki</b> [CLI options] <b>ca-kraconnector-show</b>
<b>pki</b> [CLI options] <b>ca-kraconnector-add</b> --input-file &lt;input file&gt; | --host &lt;KRA host&gt; --port &lt;KRA port&gt;
<b>pki</b> [CLI options] <b>ca-kraconnector-del</b> --host &lt;KRA host&gt; --port &lt;KRA port&gt;
</pre>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>pki-ca-kraconnector</b> commands provide command-line interfaces to
  manage CA-KRA connectors. This command should be applied against CAs only.
<div style="height: 1.00em;">&#x00A0;</div>
When keys are archived, the CA communicates with the KRA through authenticated
  persistent connections called Connectors. Because the CA initiates the
  communication, the connector configuration is performed on the CA only. A
  Connector is automatically configured on the issuing CA whenever a KRA is set
  up by <b>pkispawn</b>.
<div style="height: 1.00em;">&#x00A0;</div>
A CA may have only one KRA connector. This connector can be configured to talk
  to multiple KRAs (for high availability) only if the KRAs are clones.
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>ca-kraconnector</b>
<div style="margin-left: 4.00ex;">This command is to list available KRA
  connector commands.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>ca-kraconnector-show</b>
<div style="margin-left: 4.00ex;">This command is to view the configuration
  settings for the CA-KRA connector configured on the CA. These details can be
  redirected to a file, modified as needed, and used as the input file for the
  <b>ca-kraconnector-add</b> command.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>ca-kraconnector-add</b> --input-file
  &lt;input_file&gt;
<div style="margin-left: 4.00ex;">This command is to configure the CA-KRA
  connector on the CA subsystem. The input file is an XML document as provided
  by the <b>ca-kraconnector-show</b> command.
<div style="height: 1.00em;">&#x00A0;</div>
A CA-KRA connector can only be created from an input file only if a connector
  does not already exist. If one already exists, it should be removed
  first.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>ca-kraconnector-add</b> --host &lt;KRA host&gt;
  --port &lt;KRA Port&gt;
<div style="margin-left: 4.00ex;">This command is to add a host to an existing
  CA-KRA connector.</div>
<div class="Pp"></div>
<b>pki</b> [CLI options] <b>ca-kraconnector-del</b> --host &lt;KRA Host&gt;
  --port &lt;KRA Port&gt;
<div style="margin-left: 4.00ex;">This command is to delete a host from the
  CA-KRA connector on a CA. If the last KRA host is removed, the connector
  configuration is removed from the CA.</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
The CLI options are described in <b>pki</b>(1).
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPERATIONS"><a class="selflink" href="#OPERATIONS">OPERATIONS</a></h1>
To view available CA-KRA connector commands, type <b>pki ca-kraconnector</b>. To
  view each command's usage, type <b> pki ca-kraconnector-&lt;command&gt;
  --help</b>.
<div style="height: 1.00em;">&#x00A0;</div>
All CA-KRA connector commands must be executed as the CA administrator.
<div style="height: 1.00em;">&#x00A0;</div>
To retrieve the CA-KRA connector configuration from the CA:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;CA admin authentication&gt; ca-kraconnector-show</b>
<div style="height: 1.00em;">&#x00A0;</div>
One of the most common use cases for these commands is to add a KRA clone to an
  existing CA-KRA connector for high availability. This can be done using the
  pki ca-kraconnector-add command as shown:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;CA admin authentication&gt; ca-kraconnector-add --host
  kra2.example.com --port 8443</b>
<div style="height: 1.00em;">&#x00A0;</div>
To delete a KRA clone from the connector:
<div style="height: 1.00em;">&#x00A0;</div>
<b>pki &lt;CA admin authentication&gt; ca-kraconnector-del --host
  kra2.example.com --port 8443</b>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Ade Lee &lt;alee@redhat.com&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2016 Red Hat, Inc. This is licensed under the GNU General Public
  License, version 2 (GPLv2). A copy of this license is available at
  http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 10, 2016</td>
    <td class="foot-os">version 10.3</td>
  </tr>
</table>
</body>
</html>
