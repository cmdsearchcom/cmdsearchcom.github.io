<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>LAMBOOT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LAMBOOT(1)</td>
    <td class="head-vol">LAM TOOLS</td>
    <td class="head-rtitle">LAMBOOT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
lamboot - Start a LAM multicomputer.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;">lamboot [-b]
  [-d] [-h] [-H] [-l] [-s] [-v] [-V] [-x] [-nn] [-np] [-c conf file] [-prefix
  /lam/install/path/] [-sessionprefix value] [-sessionsuffix value]
  [-withlamprefixpath value] [-ssi key value] [bhost]
<div>&#x00A0;</div>
</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b</b></dt>
  <dd class="It-tag">Assume local and remote shell are the same. This means that
      only one remote shell invocation is used to each node. If <b>-b</b> is not
      used, two remote shell invocations are used to each node.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d</b></dt>
  <dd class="It-tag">Turn on debugging output. This implies -v.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h</b></dt>
  <dd class="It-tag">Print the command help menu.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l</b></dt>
  <dd class="It-tag">Delay hostname-to-IP-address resolution.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-prefix</b></dt>
  <dd class="It-tag">Use the LAM installation specified in /lam/install/path/.
      Not compatible with LAM/MPI versions prior to 7.1.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s</b></dt>
  <dd class="It-tag">Close stdio on the local node.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ssi key value</b></dt>
  <dd class="It-tag">Send arguments to various SSI modules. See the
      &quot;SSI&quot; section, below.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v</b></dt>
  <dd class="It-tag">Be verbose.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x</b></dt>
  <dd class="It-tag">Run in fault tolerant mode.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H</b></dt>
  <dd class="It-tag">Do not display the command header.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-nn</b></dt>
  <dd class="It-tag">Don't add &quot;-n&quot; to the remote agent command
    line</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-np</b></dt>
  <dd class="It-tag">Do not force the execution of $HOME/.profile on remote
      hosts</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-session-prefix value</b></dt>
  <dd class="It-tag">Set the session prefix, overriding
    LAM_MPI_SESSION_PREFIX.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-session-suffix value</b></dt>
  <dd class="It-tag">Set the session suffix, overriding
    LAM_MPI_SESSION_SUFFIX.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-withlamprefixpath value</b></dt>
  <dd class="It-tag">Override the internal installation path. For internal use
      only, do not use unless you know what you are doing.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT_VARIABLES"><a class="selflink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>LAM_MPI_SESSION_PREFIX</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>LAM_MPI_SESSION_SUFFIX</b></dt>
  <dd class="It-tag">It is possible to change the session directory used by
      LAM/MPI, normally of the form:</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tmpdir/lam-username@hostname[-suffix]</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">tmpdir</dt>
  <dd class="It-tag">will be set to <i>LAM_MPI_SESSION_PREFIX</i> if set.
      Otherwise, it will fall back to the value of <i>TMPDIR</i>. If neither of
      these are set, the default is /tmp.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">suffix</dt>
  <dd class="It-tag">can be overridden by the <i>LAM_MPI_SESSION_SUFFIX</i>
      environment variable. If <i>LAM_MPI_SESSION_SUFFIX</i> is not set and LAM
      is running under a supported batch scheduling system, <i>$suffix</i> will
      be a value unique to the currently running job.</dd>
</dl>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <i>lamboot</i> tool starts the LAM software on each of the machines
  specified in the boot schema, <i>bhost</i>. The boot schema specifies the
  hostnames of nodes to be used in the run-time MPI environment, and optionally
  lists how may CPUs LAM may used on each node. The user may wish to first run
  the recon(1) tool to verify that LAM can be started.
<div class="Pp"></div>
Starting LAM is a three step procedure. In the first step, hboot(1) is invoked
  on each of the specified machines. Then each machine allocates a dynamic port
  and communicates it back to <i>lamboot</i> which collects them. In the third
  step, <i>lamboot</i> gives each machine the list of machines/ports in order to
  form a fully connected topology. If any machine was not able to start, or if a
  timeout period expires before the first step completes, <i>lamboot</i> invokes
  lamwipe(1) to terminate LAM and reports the error.
<div class="Pp"></div>
The <i>bhost</i> file is a LAM boot schema written in the host file syntax. See
  bhost(5). Instead of the command line, a boot schema can be specified in the
  LAMBHOST environment variable. Otherwise a default file, lam-bhost.def, is
  used. LAM searches for <i>bhost</i> first in the local directory and then in
  the installation directory under etc/.
<div class="Pp"></div>
In addition, <i>lamboot</i> uses a process schema for the individual LAM nodes.
  A process schema (see conf(5)) is a description of the processes which
  constitute the operating system on a node. In general, the system
  administrator maintains this file -- LAM/MPI users will generally not need to
  change this file. It is also possible for the user to customize the LAM
  software with a private process schema.
<h2 class="Ss" title="Ss" id="The_bhost_file"><a class="selflink" href="#The_bhost_file">The
  bhost file</a></h2>
The format of the <i>bhost</i> file is documented in the bhost(5) man page.
<div class="Pp"></div>
<i>lamboot</i> will resolve all names in <i>bhost</i> on the node in which
  <i>lamboot</i> was invoked (the origin node). After that, LAM will only use IP
  addresses, not names. Specifically, the name resolution configuration on all
  other nodes is not used. Hence, the the origin node must be able to resolve
  all the names in <i>bhost</i> to addresses that are reachable by all other
  nodes.
<div class="Pp"></div>
A common mistake is to list <i>localhost</i> (or any name that resolves to the
  special address 127.0.0.1 -- the loopback TCP/IP device) in a <i>bhost</i>
  file that contains other nodes. In this case, the address 127.0.0.1 would be
  sent to each of the other nodes as the address of the origin node. If the
  other nodes try to use 127.0.0.1 to contact the origin node, they will
  actually be contacting themselves, and would eventually timeout and fail.
<div class="Pp"></div>
The IP addresses obtained from <i>bhost</i> are used for LAM's meta messages:
  startup and shutdown of jobs, out-of-band messages used for coordination, etc.
  The amount of traffic is fairly low (unless using the &quot;lamd&quot; mode of
  MPI message passing, in which case all MPI traffic will also utilize LAM's
  meta messages for transport -- see mpirun(1)). When using the TCP RPI, these
  IP addresses are also used for MPI message passing via direct sockets between
  each pair of nodes.
<div class="Pp"></div>
A common case is where a &quot;master&quot; node has multiple network interface
  cards (NICs) -- one that is connected to a public network, and one that is
  connected to a private network where parallel jobs are to be run. To include
  the master node in a <i>bhost</i> file, the IP name (or address) of the NIC on
  the private network should be listed in <i>bhost</i>. This ensures that all
  the other nodes can reach the master node on the private network.
<div class="Pp"></div>
As another example, some configurations have multiple TCP/IP NICs in each node
  of a parallel job. One NIC is considered &quot;slow&quot; (e.g., 10Mbps),
  while the other is considered &quot;fast&quot; (e.g., 100Mbps). It is
  desirable to allow LAM to take advantage of the higher bandwidth on the
  &quot;fast&quot; network for MPI messages. As such, <i>bhost</i> should list
  the IP names (or addresses) of all the &quot;fast&quot; NICs. However, if the
  LAM RPI does not use TCP/IP (e.g., the Myrinet/GM RPI), the <i>bhost</i> file
  should probably list the &quot;slow&quot; NICs so that LAM's meta message
  traffic does not cause overhead and potentially detract from performance on
  the &quot;fast&quot; network from other high-performance applications.
<h2 class="Ss" title="Ss" id="Delaying_hostname_lookups"><a class="selflink" href="#Delaying_hostname_lookups">Delaying
  hostname lookups</a></h2>
Normally, name resolution of hostnames is done on the machines where
  <i>lamboot</i> is invoked. This is done for optimization reasons, so that the
  list of hostnames only needs to be resolved once (potentially minimizing the
  amount of DNS or other hostname-lookup network traffic).
<div class="Pp"></div>
However, in some non-uniform networking environments, this is not sufficient
  because each host may have a different IP address on each of its peers. For
  example, host A may have address Z on host B, but have address Y on host C.
<div class="Pp"></div>
The <i>-l</i> option to <i>lamboot</i> will cause LAM to distribute hostnames to
  each node rather than a fully resolved set of IP addresses. Hence, each node
  where LAM is booted will do its own name resolution on the list of hostnames.
<h2 class="Ss" title="Ss" id="SSI_(System_Services_Interface)"><a class="selflink" href="#SSI_(System_Services_Interface)">SSI
  (System Services Interface)</a></h2>
The <i>-ssi</i> switch allows the passing of parameters to various SSI modules.
  LAM's SSI modules are described in detail in lamssi(7). SSI modules have
  direct impact on MPI programs because they allow tunable parameters to be set
  at run time (such as which boot device driver to use, what parameters to pass
  to that driver, etc.).
<div class="Pp"></div>
The <i>-ssi</i> switch takes two arguments: <i>key</i> and <i>value</i>. The
  <i>key</i> argument generally specifies which SSI module will receive the
  value. For example, the <i>key</i> &quot;boot&quot; is used to select which
  RPI to be used for starting processes on remote nodes. The <i>value</i>
  argument is the value that is passed. For example:
<dl class="Bl-tag">
  <dt class="It-tag">lamboot -ssi boot tm</dt>
  <dd class="It-tag">Tells LAM to use the &quot;tm&quot; boot module for native
      launching in PBSPro / OpenPBS environments (the tm boot module does not
      require a boot schema).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">lamboot -ssi boot rsh -ssi rsh_agent &quot;ssh -x&quot;
    boot_schema</dt>
  <dd class="It-tag">Tells LAM to use the &quot;rsh&quot; boot module, and tells
      the rsh module to use &quot;ssh -x&quot; as the specific agent to launch
      executables on remote nodes.</dd>
</dl>
<div class="Pp"></div>
And so on. LAM's boot SSI modules are described in lamssi_boot(7). This page
  should be consulted for specific actions that are taken by, and how to tweak
  the run-time behavior of each boot module.
<div class="Pp"></div>
The <i>-ssi</i> switch can be used multiple times to specify different
  <i>key</i> and/or <i>value</i> arguments. If the same <i>key</i> is specified
  more than once, the <i>value</i>s are concatenated with a comma
  (&quot;,&quot;) separating them.
<div class="Pp"></div>
Note that the <i>-ssi</i> switch is simply a shortcut for setting environment
  variables. The same effect may be accomplished by setting corresponding
  environment variables before running <i>lamboot</i>. The form of the
  environment variables that LAM sets are: <i>LAM_MPI_SSI_key=value</i>.
<div class="Pp"></div>
Note that the <i>-ssi</i> switch overrides any previously set environment
  variables. Also note that unknown <i>key</i> arguments are still set as
  environment variable -- they are not checked (by <i>lamwipe</i>) for
  correctness. Illegal or incorrect <i>value</i> arguments may or may not be
  reported -- it depends on the specific SSI module.
<h2 class="Ss" title="Ss" id="Remote_Executable_Invocation"><a class="selflink" href="#Remote_Executable_Invocation">Remote
  Executable Invocation</a></h2>
All tweakable aspects of launching executables on remote nodes during
  <i>lamboot</i> are discussed in lamssi(7) and lamssi_boot(7). Topics include
  (but are not limited to): discovery of remote shell, run-time overrides of the
  agent use to launch remote executables (e.g., rsh and ssh), etc.
<h2 class="Ss" title="Ss" id="Closing_stdio"><a class="selflink" href="#Closing_stdio">Closing
  stdio</a></h2>
The stdio of each LAM daemon on a remote host that is launched by <i>lamboot</i>
  is closed by default. Normally, the stdio of the LAM daemon launched on the
  local host is left open so that the internal LAM tstdio(3) package works
  properly. However, it is sometimes desirable to close the stdio of the local
  LAM daemon as well. For example:
<div class="Pp"></div>
<div style="margin-left: 5.00ex;">rsh somenode lamboot -s hostfile</div>
<div class="Pp"></div>
This is because <i>rsh</i> waits for two conditions before exiting:
  <i>lamboot</i> to exit, and stdout / stderr to be closed. Without <i>-s</i>,
  stdout / stderr would not be closed, and <i>rsh</i> (and <i>ssh</i>) will hang
  even though <i>lamboot</i> had completed. <i>-s</i> causes the stdout / stderr
  of the local LAM daemon to be closed upon invocation, which will allow
  <i>rsh</i> to complete. Using <i>-s</i> will not affect <i>lamboot</i> in any
  other way, but it will prevent the tstdio(3) package from working properly.
<h2 class="Ss" title="Ss" id="Fault_Tolerance"><a class="selflink" href="#Fault_Tolerance">Fault
  Tolerance</a></h2>
If the <i>-x</i> option is given, LAM runs in fault tolerant mode. In this mode,
  nodes exchange ``heart beat'' messages periodically to make sure all nodes are
  running and the links connecting them are operational. When a node's heart
  beats stop, it is declared ``dead'' and all LAM nodes (and processes) are
  notified. This allows users to write fault tolerant applications that can
  degrade gracefully, or fully recover by replacing the defunct node with
  another (see lamgrow(1)). Since this mode introduces a performance penalty, it
  is not activated by default.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">lamboot -v</dt>
  <dd class="It-tag">Start LAM on the machines described in the default boot
      schema. Report about important steps as they are done.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">lamboot -d hostfile</dt>
  <dd class="It-tag">Start LAM on the machines described in file
      <i>hostfile</i>. Provide incredibly detailed reports on what is happening
      at each stage in the boot process.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">lamboot mynodes</dt>
  <dd class="It-tag">Start LAM on the machines described in the boot schema
      <i>mynodes</i>. Operate silently.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">laminstalldir/etc/lam-bhost.def</dt>
  <dd class="It-tag">default boot schema file, where &quot;laminstalldir&quot;
      is the directory where LAM/MPI was installed</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">laminstalldir/etc/lam-conf.lamd</dt>
  <dd class="It-tag">default process schema file for LAM nodes</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
recon(1), lamwipe(1), hboot(1), tstdio(3), bhost(5), conf(5), lam-helpfile(5),
  lamssi(7), lamssi_boot(7)
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">July, 2007</td>
    <td class="foot-os">LAM 7.1.4</td>
  </tr>
</table>
</body>
</html>
