<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:09:34 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>FFMPEG-BITSTREAM-FILTERS(1)
FFMPEG-BITSTREAM-FILTERS(1)</p>

<p style="margin-top: 1em">NAME <br>
ffmpeg-bitstream-filters - FFmpeg bitstream filters</p>

<p style="margin-top: 1em">DESCRIPTION <br>
This document describes the bitstream filters provided by
the libavcodec library.</p>

<p style="margin-top: 1em">A bitstream filter operates on
the encoded stream data, and performs bitstream level
modifications without performing decoding.</p>

<p style="margin-top: 1em">BITSTREAM FILTERS <br>
When you configure your FFmpeg build, all the supported
bitstream filters are enabled by default. You can list all
available ones using the configure option
&quot;--list-bsfs&quot;.</p>

<p style="margin-top: 1em">You can disable all the
bitstream filters using the configure option
&quot;--disable-bsfs&quot;, and selectively enable any
bitstream filter using the option
&quot;--enable-bsf=BSF&quot;, or you can <br>
disable a particular bitstream filter using the option
&quot;--disable-bsf=BSF&quot;.</p>

<p style="margin-top: 1em">The option &quot;-bsfs&quot; of
the ff* tools will display the list of all the supported
bitstream filters included in your build.</p>

<p style="margin-top: 1em">The ff* tools have a -bsf option
applied per stream, taking a comma-separated list of
filters, whose parameters follow the filter name after a
&rsquo;=&rsquo;.</p>

<p style="margin-top: 1em">ffmpeg -i INPUT -c:v copy -bsf:v
filter1[=opt1=str1:opt2=str2][,filter2] OUTPUT</p>

<p style="margin-top: 1em">Below is a description of the
currently available bitstream filters, with their
parameters, if any.</p>

<p style="margin-top: 1em">aac_adtstoasc <br>
Convert MPEG-2/4 AAC ADTS to MPEG-4 Audio Specific
Configuration bitstream filter.</p>

<p style="margin-top: 1em">This filter creates an MPEG-4
AudioSpecificConfig from an MPEG-2/4 ADTS header and removes
the ADTS header.</p>

<p style="margin-top: 1em">This is required for example
when copying an AAC stream from a raw ADTS AAC container to
a FLV or a MOV/MP4 file.</p>

<p style="margin-top: 1em">chomp <br>
Remove zero padding at the end of a packet.</p>

<p style="margin-top: 1em">dump_extra <br>
Add extradata to the beginning of the filtered packets.</p>

<p style="margin-top: 1em">The additional argument
specifies which packets should be filtered. It accepts the
values:</p>

<p style="margin-top: 1em">a add extradata to all key
packets, but only if local_header is set in the flags2 codec
context field</p>

<p style="margin-top: 1em">k add extradata to all key
packets</p>

<p style="margin-top: 1em">e add extradata to all
packets</p>

<p style="margin-top: 1em">If not specified it is assumed
k.</p>

<p style="margin-top: 1em">For example the following ffmpeg
command forces a global header (thus disabling individual
packet headers) in the H.264 packets generated by the
&quot;libx264&quot; encoder, but corrects <br>
them by adding the header stored in extradata to the key
packets:</p>

<p style="margin-top: 1em">ffmpeg -i INPUT -map 0 -flags:v
+global_header -c:v libx264 -bsf:v dump_extra out.ts</p>

<p style="margin-top: 1em">dca_core <br>
Extract DCA core from DTS-HD streams.</p>

<p style="margin-top: 1em">h264_mp4toannexb <br>
Convert an H.264 bitstream from length prefixed mode to
start code prefixed mode (as defined in the Annex B of the
ITU-T H.264 specification).</p>

<p style="margin-top: 1em">This is required by some
streaming formats, typically the MPEG-2 transport stream
format (&quot;mpegts&quot;).</p>

<p style="margin-top: 1em">For example to remux an MP4 file
containing an H.264 stream to mpegts format with ffmpeg, you
can use the command:</p>

<p style="margin-top: 1em">ffmpeg -i INPUT.mp4 -codec copy
-bsf:v h264_mp4toannexb OUTPUT.ts</p>

<p style="margin-top: 1em">imxdump <br>
Modifies the bitstream to fit in MOV and to be usable by the
Final Cut Pro decoder. This filter only applies to the
mpeg2video codec, and is likely not needed for Final Cut Pro
7 <br>
and newer with the appropriate -tag:v.</p>

<p style="margin-top: 1em">For example, to remux 30 MB/sec
NTSC IMX to MOV:</p>

<p style="margin-top: 1em">ffmpeg -i input.mxf -c copy
-bsf:v imxdump -tag:v mx3n output.mov</p>

<p style="margin-top: 1em">mjpeg2jpeg <br>
Convert MJPEG/AVI1 packets to full JPEG/JFIF packets.</p>

<p style="margin-top: 1em">MJPEG is a video codec wherein
each video frame is essentially a JPEG image. The individual
frames can be extracted without loss, e.g. by</p>

<p style="margin-top: 1em">ffmpeg -i ../some_mjpeg.avi -c:v
copy frames_%d.jpg</p>

<p style="margin-top: 1em">Unfortunately, these chunks are
incomplete JPEG images, because they lack the DHT segment
required for decoding. Quoting from <br>

&lt;http://www.digitalpreservation.gov/formats/fdd/fdd000063.shtml&gt;:</p>

<p style="margin-top: 1em">Avery Lee, writing in the
rec.video.desktop newsgroup in 2001, commented that
&quot;MJPEG, or at least the MJPEG in AVIs having the MJPG
fourcc, is restricted JPEG with a fixed -- and <br>
*omitted* -- Huffman table. The JPEG must be YCbCr
colorspace, it must be 4:2:2, and it must use basic Huffman
encoding, not arithmetic or progressive. . . . You can
indeed <br>
extract the MJPEG frames and decode them with a regular JPEG
decoder, but you have to prepend the DHT segment to them, or
else the decoder won&rsquo;t have any idea how to decompress
<br>
the data. The exact table necessary is given in the OpenDML
spec.&quot;</p>

<p style="margin-top: 1em">This bitstream filter patches
the header of frames extracted from an MJPEG stream
(carrying the AVI1 header ID and lacking a DHT segment) to
produce fully qualified JPEG images.</p>

<p style="margin-top: 1em">ffmpeg -i mjpeg-movie.avi -c:v
copy -bsf:v mjpeg2jpeg frame_%d.jpg <br>
exiftran -i -9 frame*.jpg <br>
ffmpeg -i frame_%d.jpg -c:v copy rotated.avi</p>

<p style="margin-top: 1em">mjpega_dump_header <br>
movsub <br>
mp3_header_decompress <br>
mpeg4_unpack_bframes <br>
Unpack DivX-style packed B-frames.</p>

<p style="margin-top: 1em">DivX-style packed B-frames are
not valid MPEG-4 and were only a workaround for the broken
Video for Windows subsystem. They use more space, can cause
minor AV sync issues, <br>
require more CPU power to decode (unless the player has some
decoded picture queue to compensate the 2,0,2,0 frame per
packet style) and cause trouble if copied into a standard
<br>
container like mp4 or mpeg-ps/ts, because MPEG-4 decoders
may not be able to decode them, since they are not valid
MPEG-4.</p>

<p style="margin-top: 1em">For example to fix an AVI file
containing an MPEG-4 stream with DivX-style packed B-frames
using ffmpeg, you can use the command:</p>

<p style="margin-top: 1em">ffmpeg -i INPUT.avi -codec copy
-bsf:v mpeg4_unpack_bframes OUTPUT.avi</p>

<p style="margin-top: 1em">noise <br>
Damages the contents of packets without damaging the
container. Can be used for fuzzing or testing error
resilience/concealment.</p>

<p style="margin-top: 1em">Parameters: A numeral string,
whose value is related to how often output bytes will be
modified. Therefore, values below or equal to 0 are
forbidden, and the lower the more <br>
frequent bytes will be modified, with 1 meaning every byte
is modified.</p>

<p style="margin-top: 1em">ffmpeg -i INPUT -c copy -bsf
noise[=1] output.mkv</p>

<p style="margin-top: 1em">applies the modification to
every byte.</p>

<p style="margin-top: 1em">remove_extra SEE ALSO <br>
ffmpeg(1), ffplay(1), ffprobe(1), ffserver(1),
libavcodec(3)</p>

<p style="margin-top: 1em">AUTHORS <br>
The FFmpeg developers.</p>

<p style="margin-top: 1em">For details about the
authorship, see the Git history of the project
(git://source.ffmpeg.org/ffmpeg), e.g. by typing the command
git log in the FFmpeg source directory, or <br>
browsing the online repository at
&lt;http://source.ffmpeg.org&gt;.</p>

<p style="margin-top: 1em">Maintainers for the specific
components are listed in the file MAINTAINERS in the source
code tree.</p>
 
<p style="margin-top: 1em">FFMPEG-BITSTREAM-FILTERS(1)</p>
<hr>
</body>
</html>
