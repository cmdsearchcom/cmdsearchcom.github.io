<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>FLENT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FLENT(1)</td>
    <td class="head-vol">Flent: The FLExible Network Tester</td>
    <td class="head-rtitle">FLENT(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
flent - Flent: The FLExible Network Tester
<h1 class="Sh" title="Sh" id="INTRODUCTION"><a class="selflink" href="#INTRODUCTION">INTRODUCTION</a></h1>
Flent is a wrapper around <i>netperf</i> and similar tools to run predefined
  tests and aggregate and plot the results. It defines several tests that can be
  run against one or more hosts, primarily targeted at testing for the presence
  of bufferbloat under various conditions.
<div style="height: 1.00em;">&#x00A0;</div>
The aggregated data is saved in (gzipped) JSON format for later processing
  and/or import into other tools. The JSON format is documented below.
<div style="height: 1.00em;">&#x00A0;</div>
Apart from the JSON format, the data can be output as csv values, emacs org mode
  tables or plots. Each test can specify several different plots, including
  time-series plots of the values against each other, as well as CDF plots of
  (e.g.) ping times.
<div style="height: 1.00em;">&#x00A0;</div>
Plots can be output to the formats supported by matplotlib by specifying the
  output filename with <b>-o</b> <i>output.{png,ps,pdf,svg}</i>. If no output
  file is specified, the plot is displayed using matplotlib&#x2019;s interactive
  plot browser, which also allows saving of the output (in .png format).
<h2 class="Ss" title="Ss" id="Requirements"><a class="selflink" href="#Requirements">Requirements</a></h2>
Flent runs on Python, versions 2.7+ and 3.3+. Plotting requires a functional
  <b>matplotlib</b> installation (but everything else can run without
  <b>matplotlib</b>). For the interactive plot viewer, a graphical display (and
  suitably configured <b>matplotlib</b>) is required.
<div style="height: 1.00em;">&#x00A0;</div>
Most tests employ the netperf benchmarking tool to run the tests. Version 2.6 or
  higher is required, and netperf must be compiled with the <b>--enable-demo</b>
  option passed to <b>./configure</b>. Some tests use iperf in addition to, or
  instead of netperf. Both tools must be available in the <b>PATH</b>.
<div style="height: 1.00em;">&#x00A0;</div>
For ICMP ping measurements, the version of ping employed must support output
  timestamping (the -D parameter to GNU ping). This is not supported by the BSD
  and OSX versions of ping. As an alternative to the regular ping command, the
  <b>fping</b> utility (see <i>http://fping.org</i>) can be employed. In that
  case fping must be version 3.5 or greater. Flent will attempt to detect the
  presence of fping in the <b>PATH</b> and check for support for the -D
  parameter. If this check is successful, <b>fping</b> will be employed for ping
  data, otherwise the system ping will be used.
<h1 class="Sh" title="Sh" id="RUNNING_FLENT"><a class="selflink" href="#RUNNING_FLENT">RUNNING
  FLENT</a></h1>
When run, flent must be supplied either (a) a test name and one or more host
  names to connect to, or (b) one or more input files containing data from
  previous runs to post-process.
<div style="height: 1.00em;">&#x00A0;</div>
Test names, hostnames and input file names can all be specified as unqualified
  arguments, and flent will do its best to guess which is which. For each
  argument, if it is an existing file, it is assumed to be an input file, if it
  is the name of an existing test configuration it&#x2019;s assumed to be a test
  name, and if neither of those are true, it is assumed to be a host name. The
  <i>-i</i> and <i>-H</i> switches can be used to explicitly specify the
  interpretation of an argument.
<h2 class="Ss" title="Ss" id="Invocation"><a class="selflink" href="#Invocation">Invocation</a></h2>
<b>flent</b> [<i>options</i>] <i>&lt;host|test|input file</i> ...<i>&gt;</i>
<h2 class="Ss" title="Ss" id="General_options"><a class="selflink" href="#General_options">General
  options</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-o OUTPUT, --output=OUTPUT</b></dt>
  <dd class="It-tag">File to write processed output to (default standard
    out).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-D DATA_DIR, --data-dir=DATA_DIR</b></dt>
  <dd class="It-tag">Directory to store data files in. Defaults to the current
      directory.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-i INPUT, --input=INPUT</b></dt>
  <dd class="It-tag">File to read input from (instead of running tests). Input
      files can also be specified as unqualified arguments without using the
      <i>-i</i> switch.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-f FORMAT, --format=FORMAT</b></dt>
  <dd class="It-tag">Select output format (plot, csv, org_table, stats). Default
      is no processed output (just writes the JSON data file).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-p PLOT, --plot=PLOT</b></dt>
  <dd class="It-tag">Select which plot to output for the given test (implies
      <i>-f</i> plot). Use the <i>--list-plots</i> option to see available
      plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-t TITLE, --title-extra=TITLE</b></dt>
  <dd class="It-tag">Text to add to plot title and data file name.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-n NOTE, --note=NOTE</b></dt>
  <dd class="It-tag">Add arbitrary text as a note to be stored in the JSON data
      file (under the <i>NOTE</i> key in the metadata object).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-r RCFILE, --rcfile=RCFILE</b></dt>
  <dd class="It-tag">Load configuration data from <i>RCFILE</i> (default
      <i>~/.flentrc</i>). See section below for information on the rc file
      format.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-x, --extended-metadata</b></dt>
  <dd class="It-tag">Collect extended metadata and store it with the data file.
      May include details of your machine you don&#x2019;t want to distribute;
      see the section on the data format below.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--remote-metadata=HOSTNAME</b></dt>
  <dd class="It-tag">Collect extended metadata from a remote host.
      <i>HOSTNAME</i> is passed verbatim to ssh, so can include hosts specified
      in ~/.ssh/config. Note that gathering the data can take some time, since
      it involves executing several remote commands. This option can be
      specified multiple times and implies <i>--extended-metadata</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gui</b></dt>
  <dd class="It-tag">Run the flent GUI. All other options are used as defaults
      in the GUI, but can be changed once it is running. The GUI can also be
      started by running the <b>flent-gui</b> binary. For more information on
      the GUI, see the gui section.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--new-gui-instance</b></dt>
  <dd class="It-tag">Start a new GUI instance. Otherwise, flent will try to
      connect to an already running GUI instance and have that load any new data
      files specified as arguments. Implies <i>--gui</i> when passed on the
      command line, but not when set in the rc file. Note that when multiple GUI
      instances are running, there is no guarantee as to which instance will get
      a subsequent open request (if run again without
      <i>--new-gui-instance</i>).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--gui-no-defer</b></dt>
  <dd class="It-tag">Normally, the GUI defers redrawing plots until they are
      needed to avoid redrawing all open plots every time an option changes.
      This switch turns off that optimisation in favour of always redrawing
      everything straight away. This is useful when loading a bunch of plots
      from the command line and then wanting to flip through them without
      drawing delay.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-b BATCH_NAME, --batch-name=BATCH_NAME</b></dt>
  <dd class="It-tag">Run test batch BATCH_NAME (must be specified in a batch
      file loaded by the <i>--batch-file</i> option). Can be supplied multiple
      times.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-B BATCH_FILE, --batch-file=BATCH_FILE</b></dt>
  <dd class="It-tag">Load batch file BATCH_FILE. Can be specified multiple
      times, in which case the files will be combined (with identically-named
      sections being overridden by later files). See appropriate section below
      for an explanation of the batch file format.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-override=key=value</b></dt>
  <dd class="It-tag">Override parameter &#x2019;key&#x2019; in the batch config
      and set it to &#x2019;value&#x2019;. The key name will be case folded to
      lower case. Can be specified multiple times.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-dry-run</b></dt>
  <dd class="It-tag">Dry batch run. Prints what would be done, but
      doesn&#x2019;t actually run any tests.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-verbose</b></dt>
  <dd class="It-tag">Be verbose during batch run: Print all commands
    executed.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-repetitions=REPETITIONS</b></dt>
  <dd class="It-tag">Shorthand for <i>--batch-override</i>
      <b>'repetitions=REPETITIONS&#x2019;</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-title=TITLE</b></dt>
  <dd class="It-tag">Shorthand for <i>--batch-override</i>
      <b>'batch_title=TITLE&#x2019;</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--batch-resume=DIR</b></dt>
  <dd class="It-tag">Try to resume a previously interrupted batch run. The
      argument is the top-level output directory from the previous run.
    <div style="height: 1.00em;">&#x00A0;</div>
    This will attempt to find a data file in the resume directory and load the
      BATCH_TIME from the previous run from that and continue. The assumption is
      that the output directory and filenames are generated from the batch time,
      so that they will match with the previous run when the same time is used.
      Then, tests for which data files already exist will be skipped on this
      run. If the rest of the batch invocation is different from the one being
      resumed, results may not be what you want.
    <div style="height: 1.00em;">&#x00A0;</div>
    There's a check to ensure that the generated output path is a subdirectory
      of the resume directory, and the whole run will be aborted if it
    isn't.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Test_configuration_options"><a class="selflink" href="#Test_configuration_options">Test
  configuration options</a></h2>
These options affect the behaviour of the test being run and have no effect when
  parsing input files.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-H HOST, --host=HOST</b></dt>
  <dd class="It-tag">Host to connect to for tests. For tests that support it,
      multiple hosts can be specified by supplying this option multiple times.
      Hosts can also be specified as unqualified arguments; this parameter
      guarantees that the argument be interpreted as a host name (rather than
      being subject to auto-detection between input files, hostnames and test
      names).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--local-bind=IP</b></dt>
  <dd class="It-tag">Local hostname or IP address to bind to (for test tools
      that support this). Can be specified multiple times for tests that connect
      to more than one host; if it is, it must be specified as many times as
      there are hosts.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--remote-host=idx=HOSTNAME</b></dt>
  <dd class="It-tag">A remote hostname to connect to when starting a test. The
      idx is the runner index, which is assigned sequentially to each
      <i>runner</i> (and so it is <i>not</i> the same as the sequence of
      hostnames). Look for the 'IDX' key in SERIES_META for a test get the idx
      used here, but note that the idx assignment depends on the exact arguments
      to the test.
    <div style="height: 1.00em;">&#x00A0;</div>
    This works by simply prepending 'ssh HOSTNAME' to the runner command, so it
      relies on the same binaries being in the same places on both machines, and
      won't work for all runners.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option can be specified multiple times to have multiple runners run on
      remote hosts.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-l LENGTH, --length=LENGTH</b></dt>
  <dd class="It-tag">Base test length (some tests may add some time to
    this).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-s STEP_SIZE, --step-size=STEP_SIZE</b></dt>
  <dd class="It-tag">Measurement data point step size.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-d DELAY, --delay=DELAY</b></dt>
  <dd class="It-tag">Number of seconds to delay parts of test (such as bandwidth
      loaders).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-4, --ipv4</b></dt>
  <dd class="It-tag">Use IPv4 for tests (some tests may ignore this).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-6, --ipv6</b></dt>
  <dd class="It-tag">Use IPv6 for tests (some tests may ignore this).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--socket-timeout=SOCKET_TIMEOUT</b></dt>
  <dd class="It-tag">Socket timeout (in seconds) used for UDP delay measurement,
      to prevent stalls on packet loss. Only enabled if the installed netperf
      version is detected to support this (requires SVN version of netperf).
    <div style="height: 1.00em;">&#x00A0;</div>
    For the default value, see the output of flent <i>-h</i>. The value of this
      parameter is an implicit upper bound on how long a round-trip time that
      can be measured. As such you may need to adjust it if you are experiencing
      latency above the default value. Set to 0 to disable.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--test-parameter=key=value</b></dt>
  <dd class="It-tag">Arbitrary test parameter in key=value format. Key will be
      case folded to lower case. The values are stored with the results
      metadata, and so can be used for storing arbitrary information relevant
      for a particular test run.
    <div style="height: 1.00em;">&#x00A0;</div>
    In addition to serving as simple metadata, the test parameters can also
      affect the behaviour of some test configurations. See the tests section
      for information on these.
    <div style="height: 1.00em;">&#x00A0;</div>
    This option can be specified multiple times to set multiple test
    parameters.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--swap-up-down</b></dt>
  <dd class="It-tag">Switch upstream and downstream directions for data
      transfer. This means that &#x2019;upload&#x2019; will become
      &#x2019;download&#x2019; and vice versa. Works by exchanging netperf
      <b>TCP_MAERTS</b> and <b>TCP_STREAM</b> parameters, so only works for
      tests that employ these as their data transfer, and only for the TCP
      streams.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Plot_configuration_options"><a class="selflink" href="#Plot_configuration_options">Plot
  configuration options</a></h2>
These options are used to configure the appearance of plot output and only make
  sense combined with <i>-f</i> <i>plot</i>.
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-z, --zero-y</b></dt>
  <dd class="It-tag">Always start y axis of plot at zero, instead of autoscaling
      the axis (also disables log scales). Autoscaling is still enabled for the
      upper bound.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bounds-x=BOUNDS</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--bounds-y=BOUNDS</b></dt>
  <dd class="It-tag">Specify bounds of the plot axes. If specifying one number,
      that will become the upper bound. Specify two numbers separated by a comma
      to specify both upper and lower bounds. To specify just the lower bound,
      add a comma afterwards. Can be specified twice, corresponding to figures
      with multiple axes.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--label-x=LABEL</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--label-y=LABEL</b></dt>
  <dd class="It-tag">Override the figure axis labels. Can be specified twice,
      corresponding to figures with multiple axes.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--colours=COLOURS</b></dt>
  <dd class="It-tag">Comma-separated list of colours to be used for the plot
      colour cycle. Can be specified in any format understood by matplotlib
      (including HTML hex values prefixed with a #).
    <div style="height: 1.00em;">&#x00A0;</div>
    Yes, this option uses British spelling. No, American spelling is not
      supported. Deal with it.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-I, --invert-latency-y</b></dt>
  <dd class="It-tag">Invert the y-axis for latency data series (making plots
      show &#x2019;better values upwards&#x2019;).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--log-scale</b></dt>
  <dd class="It-tag">Use logarithmic scale on plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--norm-factor=FACTOR</b></dt>
  <dd class="It-tag">Factor to normalise data by. I.e. divide all data points by
      this value. Can be specified multiple times, in which case each value
      corresponds to a data series.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--scale-data=SCALE_DATA</b></dt>
  <dd class="It-tag">Additional data files to consider when scaling the plot
      axes (for plotting several plots with identical axes). Note, this displays
      only the first data set, but with axis scaling taking into account the
      additional data sets. Can be supplied multiple times; see also
      <i>--scale-mode</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-S, --scale-mode</b></dt>
  <dd class="It-tag">Treat file names (except for the first one) passed as
      unqualified arguments as if passed as <i>--scale-data</i> (default as if
      passed as <i>--input</i>).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--concatenate</b></dt>
  <dd class="It-tag">Concatenate multiple result sets into one data series. This
      means that each data file will have its time axis shifted by the preceding
      series duration and appended to the first data set specified. Only works
      for data sets from the same test, obviously.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--absolute-time</b></dt>
  <dd class="It-tag">Plot data points with absolute UNIX time on the x-axis.
      This requires the absolute starting time for the test run to be stored in
      the data file, and so it won&#x2019;t work with data files that predates
      this feature.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--subplot-combine</b></dt>
  <dd class="It-tag">When plotting multiple data series, plot each one on a
      separate subplot instead of combining them into one plot. This mode is not
      supported for all plot types, and only works when <i>--scale-mode</i> is
      disabled.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-print-n</b></dt>
  <dd class="It-tag">Do not print the number of data points on combined plots.
      When using plot types that combines results from several test runs, the
      number of data series in each combined data point is normally added after
      the series name, (n=X) for X data series. This option turns that off.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-annotation</b></dt>
  <dd class="It-tag">Exclude annotation with hostnames, time and test length
      from plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-title</b></dt>
  <dd class="It-tag">Exclude title from plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--override-title=TITLE</b></dt>
  <dd class="It-tag">Override plot title with this string. Completely discards
      the configured title (from the test configuration), as well as the title
      stored in the data set, and replaces it with the value supplied here. This
      is useful to override the plot title <i>at the time of plotting</i>, for
      instance to add a title to an aggregate plot from several data series.
      When this parameter is specified, <i>--no-title</i> has no effect.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--override-label=LABEL</b></dt>
  <dd class="It-tag">Override dataset label. Can be specified multiple times
      when multiple datasets are being plotted, in which case the order of
      labels corresponds to the order of datasets.
    <div style="height: 1.00em;">&#x00A0;</div>
    Like <i>--override-title</i>, this is applied <i>at the time of
      plotting</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--override-group-by=GROUP</b></dt>
  <dd class="It-tag">Override the <b>group_by</b> setting for combination plots.
      This is useful to, for instance, switch to splitting up combined data sets
      by batch run instead of by file name.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--combine-save-dir=DIRNAME</b></dt>
  <dd class="It-tag">When doing a combination plot save the intermediate data to
      <b>DIRNAME</b>. This can then be used for subsequent plotting to avoid
      having to load all the source data files again on each plot.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--split-group=LABEL</b></dt>
  <dd class="It-tag">Split data sets into groups when creating box plots.
      Specify this option multiple times to define the new groups; the value of
      each option is the group name.
    <div style="height: 1.00em;">&#x00A0;</div>
    Say you're plotting nine datasets which are really testing two variables
      with three values each. In this case, it can be useful to have the box
      plot of the results be split into three parts (corresponding to the values
      of one variable) with each three boxes in each of them (corresponding to
      the values of the second variable). This option makes this possible;
      simply specify it three times with the labels to be used for the three
      groups.
    <div style="height: 1.00em;">&#x00A0;</div>
    A constraint on this option is that the number of datasets being plotted
      must be divisible by the number of groups.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-markers</b></dt>
  <dd class="It-tag">Don&#x2019;t use line markers to differentiate data series
      on plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-legend</b></dt>
  <dd class="It-tag">Exclude legend from plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--horizontal-legend</b></dt>
  <dd class="It-tag">Place a horizontal legend below the plot instead of a
      vertical one next to it. Doesn't work well if there are too many items in
      the legend, obviously.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--legend-title=LEGEND_TITLE</b></dt>
  <dd class="It-tag">Override legend title on plot.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--legend-placement=LEGEND_PLACEMENT</b></dt>
  <dd class="It-tag">Control legend placement. Enabling this option will place
      the legend inside the plot at the specified location. Use 'best' to let
      matplotlib decide.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--legend-columns=LEGEND_COLUMNS</b></dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>Set the number of columns in the legend.</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--filter-legend</b></dt>
  <dd class="It-tag">Filter legend labels by removing the longest common
      substring from all entries. This is not particularly smart, so should be
      used with care.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--filter-regexp=REGEXP</b></dt>
  <dd class="It-tag">Filter the plot legend by the supplied regular expression.
      Note that for combining several plot results, the regular expression is
      also applied before the grouping logic, meaning that a too wide filter can
      mess up the grouping.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--filter-series=SERIES</b></dt>
  <dd class="It-tag">Filter out specified series from plot. Can be specified
      multiple times.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--skip-missing-series</b></dt>
  <dd class="It-tag">Skip missing series entirely from plots. Only works for bar
      plots.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--replace-legend=src=dest</b></dt>
  <dd class="It-tag">Replace 'src' with 'dst' in legends. Can be specified
      multiple times.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--figure-width=FIG_WIDTH</b></dt>
  <dd class="It-tag">Figure width in inches. Used when saving plots to file and
      for default size of the interactive plot window.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--figure-height=FIG_HEIGHT</b></dt>
  <dd class="It-tag">Figure height in inches. Used when saving plots to file and
      for default size of the interactive plot window.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--figure-dpi=FIG_DPI</b></dt>
  <dd class="It-tag">Figure DPI. Used when saving plots to raster format
    files.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-matplotlibrc</b></dt>
  <dd class="It-tag">Don&#x2019;t load included matplotlibrc values. Use this if
      autodetection of custom matplotlibrc fails and flent is inadvertently
      overriding rc values.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--no-hover-highlight</b></dt>
  <dd class="It-tag">Don't highlight data series on hover in interactive plot
      views. Use this if redrawing is too slow, or the highlighting is undesired
      for other reasons.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Test_tool-related_options"><a class="selflink" href="#Test_tool-related_options">Test
  tool-related options</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--control-host=HOST</b></dt>
  <dd class="It-tag">Hostname for the test control connection (for test tools
      that support this). Default: First hostname of test target.
    <div style="height: 1.00em;">&#x00A0;</div>
    When running tests that uses D-ITG as a test tool (such as the voip-*
      tests), this switch controls where flent will look for the D-ITG control
      server (see section below on running tests with D-ITG). For Netperf-based
      tests, this option is passed to Netperf to control where to point the
      control connection. This is useful to, for instance, to run the control
      server communication over a separate control network so as to not
      interfere with test traffic.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--control-local-bind=IP</b></dt>
  <dd class="It-tag">Local hostname or IP to bind control connection to (for
      test tools that support it; currently netperf). If not supplied, the value
      for <i>--local-bind</i> will be used. Note that if this value is passed
      but <i>--local-bind</i> is <i>not</i>, netperf will use the value
      specified here to bind the data connections to as well.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--netperf-control-port=PORT</b></dt>
  <dd class="It-tag">Port for Netperf control server. Default: 12865.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ditg-control-port=PORT</b></dt>
  <dd class="It-tag">Port for D-ITG control server. Default: 8000.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--ditg-control-secret=SECRET</b></dt>
  <dd class="It-tag">Secret for D-ITG control server authentication. Default:
      &#x2019;&#x2019;.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--http-getter-urllist=FILENAME</b></dt>
  <dd class="It-tag">When running HTTP tests, the http-getter tool is used to
      fetch URLs (see <i>https://github.com/tohojo/http-getter</i>). This option
      specifies the filename containing the list of HTTP URLs to get. Can also
      be a URL, which will then be downloaded as part of each test iteration. If
      not specified, this is set to <i>http:/</i>/&lt;hostname&gt;/filelist.txt
      where &lt;hostname&gt; is the first test hostname.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--http-getter-dns-servers=DNS_SERVERS</b></dt>
  <dd class="It-tag">DNS servers to use for http-getter lookups. Format is
      host[:port][,host[:port]]... This option will only work if libcurl
      supports it (needs to be built with the ares resolver). Default is none
      (use the system resolver).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--http-getter-timeout=MILLISECONDS</b></dt>
  <dd class="It-tag">Timeout for HTTP connections. Default is to use the test
      length.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--http-getter-workers=NUMBER</b></dt>
  <dd class="It-tag">Number of workers to use for getting HTTP urls. Default is
      4.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Misc_and_debugging_options:"><a class="selflink" href="#Misc_and_debugging_options:">Misc
  and debugging options:</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-L LOG_FILE, --log-file=LOG_FILE</b></dt>
  <dd class="It-tag">Write debug log (test program output) to log file.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-tests</b></dt>
  <dd class="It-tag">List available tests and exit.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list-plots</b></dt>
  <dd class="It-tag">List available plots for selected test and exit.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-V, --version</b></dt>
  <dd class="It-tag">Show Flent version information and exit.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-v, --verbose</b></dt>
  <dd class="It-tag">Enable verbose logging to console.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-q, --quiet</b></dt>
  <dd class="It-tag">Disable normal logging to console (and only log warnings
      and errors).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>--debug-error</b></dt>
  <dd class="It-tag">Print full exception backtraces to console.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>-h, --help</b></dt>
  <dd class="It-tag">Show usage help message and exit.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Signals"><a class="selflink" href="#Signals">Signals</a></h2>
Flent will abort what it is currently doing on receiving a <b>SIGINT</b> -- this
  includes killing all runners, cleaning up temporary files and shutting down as
  gracefully as possible. Runners are killed with <b>SIGTERM</b> in this mode,
  and their output is discarded. If a batch run is in progress, the current test
  will be interrupted in this way, and the rest of the batch run is aborted.
  Previously completed tests and their results are not aborted. Post-commands
  marked as &#x2019;essential&#x2019; will be run after the test is interrupted.
  Additionally, flent converts <b>SIGTERM</b> into <b>SIGINT</b> internally and
  reacts accordingly.
<div style="height: 1.00em;">&#x00A0;</div>
Upon receiving a <b>SIGUSR1</b>, flent will try to gracefully abort the test it
  is currently running, and parse the output of the runners to the extent that
  any such output exists. That is, each runner will be killed by a
  <b>SIGINT</b>, which will cause a graceful shutdown for at least ping and
  netperf (although netperf running in <i>TCP_MAERTS</i> mode will bug out when
  interrupted like this, so end-of-tests statistics will be missing). Flent will
  only react once to a <b>SIGUSR1</b>, sending exactly one <b>SIGINT</b> to the
  active runners, then wait for them to exit. This may take several seconds in
  the case of netperf. If the runners for some reason fail to exit, flent will
  be stuck and will need to be killed with <b>SIGINT</b>. If running in batch
  mode, <b>SIGUSR1</b> will only affect the currently running test; subsequent
  tests will still be run.
<h1 class="Sh" title="Sh" id="SUPPLIED_TESTS"><a class="selflink" href="#SUPPLIED_TESTS">SUPPLIED
  TESTS</a></h1>
Test are supplied as Python files and can specify commands to run etc. For a
  full list of the tests supported by flent, see the <b>--list-tests</b> option.
<h2 class="Ss" title="Ss" id="The_Realtime_Response_Under_Load_(RRUL)_test"><a class="selflink" href="#The_Realtime_Response_Under_Load_(RRUL)_test">The
  Realtime Response Under Load (RRUL) test</a></h2>
This test exists in a couple of variants and is a partial implementation of the
  RRUL specification as written by Dave Taht (see
  <i>https://github.com/dtaht/deBloat/blob/master/spec/rrule.doc?raw=true</i>).
  It works by running RTT measurement using ICMP ping and UDP roundtrip time
  measurement, while loading up the link with eight TCP streams (four downloads,
  four uploads). This quite reliably saturates the measured link (wherever the
  bottleneck might be), and thus exposes bufferbloat when it is present.
<h2 class="Ss" title="Ss" id="Simple_TCP_flow_tests"><a class="selflink" href="#Simple_TCP_flow_tests">Simple
  TCP flow tests</a></h2>
These tests combine a TCP flow (either in one direction, or both) with an ICMP
  ping measurement. It&#x2019;s a simpler test than RRUL, but in some cases the
  single TCP flow can be sufficient to saturate the link.
<h2 class="Ss" title="Ss" id="UDP_flood_test"><a class="selflink" href="#UDP_flood_test">UDP
  flood test</a></h2>
This test runs <i>iperf</i> configured to emit 100Mbps of UDP packets targeted
  at the test host, while measuring RTT using ICMP ping. It is useful for
  observing latency in the face of a completely unresponsive packet stream.
<h2 class="Ss" title="Ss" id="Test_parameters"><a class="selflink" href="#Test_parameters">Test
  parameters</a></h2>
Some test parameters (set with <b>--test-parameter</b>) affect the way tests
  behave. These are:
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>upload_streams</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>download_streams</b></dt>
  <dd class="It-tag">These set the number of upload or download streams for the
      <b>tcp_nup</b>, <b>tcp_ndown</b> and <b>rrul_be_nflows</b> tests.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>udp_bandwidth</b></dt>
  <dd class="It-tag">This sets the bandwidth of each UDP stream in the
      <b>udp_*</b> tests. The option is passed to <b>iperf</b> so can be in any
      syntax the iperf understands (e.g. <b>20M</b> for 20 Mbps).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>burst_length</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>burst_ports</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>burst_psize</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>burst_tos</b></dt>
  <dd class="It-tag">These set the length, number of ports to use, packet size
      and TOS value for the packet bursts generated in the <b>burst*</b>
    tests.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>cpu_stats_hosts</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>netstat_hosts</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>qdisc_stats_hosts</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>wifi_stats_hosts</b></dt>
  <dd class="It-tag">These set hostnames to gather statistics from from during
      the test. The hostnames are passed to SSH, so can be anything understood
      by SSH (including using <b>username@host</b> syntax, or using hosts
      defined in <b>~/.ssh/config</b>). This will attempt to run remote commands
      on these hosts to gather the required statistics, so passwordless login
      has to be enabled for. Multiple hostnames can be specified, separated by
      commas.
    <div style="height: 1.00em;">&#x00A0;</div>
    CPU stats and netstat output is global to the machine being connected to.
      The qdisc and WiFi stats need extra parameters to work. These are
      <b>qdisc_stats_interfaces</b>, <b>wifi_stats_interfaces</b> and
      <b>wifi_stats_stations</b>. The two former specify which interfaces to
      gather statistics from. These are paired with the hostnames, and so must
      contain the same number of elements (also comma-separated) as the
      <b>_hosts</b> variables. To specify multiple interfaces on the same host,
      duplicate the hostname. The <b>wifi_stats_stations</b> parameter specifies
      MAC addresses of stations to gather statistics for. This list is the same
      for all hosts, but only stations present in debugfs on each host are
      actually captured.
    <div style="height: 1.00em;">&#x00A0;</div>
    The qdisc stats gather statistics output from <b>tc -s</b>, while the WiFi
      stats gather statistics from debugfs. These are gathered by looping in a
      shell script; however, for better performance, the <b>tc_iterate</b> and
      <b>wifistats_iterate</b> programmes available in the <b>misc/</b>
      directory of the source code tarball can be installed. On low-powered
      systems this can be critical to get correct statistics. The helper
      programmes are packaged for LEDE/OpenWrt in the <b>flent-tools</b>
      package.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>ping_hosts</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>ping_local_binds</b></dt>
  <dd class="It-tag">These are used to define one or more extra host names that
      will receive a ping flow while a test is run. The <b>ping_hosts</b>
      variable simply specifies hostnames to ping (several can be specified by
      separating them with commas). The <b>ping_local_binds</b> variable sets
      local IP address(es) to bind to for the extra ping flows. If specified, it
      must contain the same number of local addresses as the number of ping
      hosts. The same local address can be specified multiple times,
    however.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>voip_host</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>voip_local_bind</b></dt>
  <dd class="It-tag"></dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>voip_control_host</b></dt>
  <dd class="It-tag">Similar to the ping variants above, these parameters
      specify a hostname that will receive a VoIP test. However, unlike the ping
      parameters, only one hostname can be specified for VoIP tests, and that
      end-host needs to have D-ITG (and the control server) running.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>control_hosts</b></dt>
  <dd class="It-tag">Hostnames to use for the control connections for the
      <b>rtt_fair_var*</b> tests. Comma-separated. If specified, it must contain
      as many hostnames as the number of target hostnames specified for the
      test.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="THE_FLENT_GUI"><a class="selflink" href="#THE_FLENT_GUI">THE
  FLENT GUI</a></h1>
Flent comes equipped with a GUI to browse and plot previously captured datasets.
  The GUI requires PyQt4; if this is installed, it can be launched with the
  <b>--gui</b> parameter, or by launching the <b>flent-gui</b> binary.
  Additionally, if Flent is launched without parameters and without a
  controlling terminal, the GUI will be launched automatically.
<div style="height: 1.00em;">&#x00A0;</div>
The GUI can be used for interactively plotting previously captured datasets, and
  makes it easy to compare results from several test runs. It presents a tabbed
  interface to graphs of data files, allows dynamic configuration of plots, and
  includes a metadata browser. For each loaded data file, additional data files
  can be loaded and added to the plot, similar to what happens when specifying
  multiple input files for plotting on the command line. A checkbox controls
  whether the added data files are added as separate entries to the plot, or
  whether they are used for scaling the output (mirroring the
  <b>--scale-mode</b>) command line switch.
<div style="height: 1.00em;">&#x00A0;</div>
The GUI also incorporates matplotlib&#x2019;s interactive browsing toolbar,
  enabling panning and zooming of the plot area, dynamic configuration of plot
  and axis parameters and labels and saving the plots to file. The exact dynamic
  features supported depends on the installed version of matplotlib.
<h1 class="Sh" title="Sh" id="CONFIGURATION_FILES"><a class="selflink" href="#CONFIGURATION_FILES">CONFIGURATION
  FILES</a></h1>
<h2 class="Ss" title="Ss" id="The_RC_file"><a class="selflink" href="#The_RC_file">The
  RC file</a></h2>
Some of the command line options can be specified in an rc file. By default,
  flent looks for this in <b>~/.flentrc</b>, but an alternative location can be
  specified with the <b>--rcfile</b> command line option.
<div style="height: 1.00em;">&#x00A0;</div>
The rc file allows options to be specified globally, an optionally overridden
  for specific tests. For an explanation of the options, refer to the annotated
  example rc file, by default installed to
  <b>/usr/share/doc/flent/flentrc.example</b>.
<h2 class="Ss" title="Ss" id="Batch_Files"><a class="selflink" href="#Batch_Files">Batch
  Files</a></h2>
Flent supports reading batch files to automate running several tests and do
  setup/teardown of test environment etc. This greatly aids reproducibility of
  tests.
<div style="height: 1.00em;">&#x00A0;</div>
The batch file is parsed as an ini file, and can have three types of sections:
  batches, commands and args. Each section also has a name; type and name are
  separated with two colons. 'Batches' are named tests that can be selected from
  the command line, 'commands' are system commands to be run before or after
  each test run, and 'args' are used in the looping mechanism (which allows
  repeating tests multiple times with different parameters).
<div style="height: 1.00em;">&#x00A0;</div>
Variables in sections control the operation of Flent and can be modified in
  several ways: Sections of the same type can inherit from each other and the
  variables in an 'arg' section will be interpolated into the batch definition
  on each iteration of a loop. In addition, variable contents can be substituted
  into other variables by using the ${varname} syntax. These three operations
  are resolved in this order (inheritance, arg interpolation and variable
  substitution).
<div style="height: 1.00em;">&#x00A0;</div>
An annotated example batchfile is distributed with the source code, and is by
  default installed to <b>/usr/share/doc/flent/batchfile.example</b>.
<h1 class="Sh" title="Sh" id="THE_DATA_FILE_FORMAT"><a class="selflink" href="#THE_DATA_FILE_FORMAT">THE
  DATA FILE FORMAT</a></h1>
The aggregated test data is saved in a file called
  <b>&lt;test_name&gt;-&lt;date&gt;.&lt;title&gt;.flent.gz</b> (the title part
  is omitted if no title is specified by the <b>-t</b> parameter). This file
  contains the data points generated during the test, as well as some metadata.
<h2 class="Ss" title="Ss" id="The_top-level_object_keys"><a class="selflink" href="#The_top-level_object_keys">The
  top-level object keys</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>version</b></dt>
  <dd class="It-tag">The file format version as an integer.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>x_values</b></dt>
  <dd class="It-tag">An array of the x values for the test data (typically the
      time values for timeseries data).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>results</b></dt>
  <dd class="It-tag">A JSON object containing the result data series. The keys
      are the data series names; the value for each key is an array of y values
      for that data series. The data array has the same length as the
      <i>x_values</i> array, but there may be missing data points (signified by
      null values).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>metadata</b></dt>
  <dd class="It-tag">An object containing various data points about the test
      run. The metadata values are read in as configuration parameters when the
      data set is loaded in for further processing. Not all tests use all the
      parameters, but they are saved anyway.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>raw_values</b></dt>
  <dd class="It-tag">An array of objects for each data series. Each element of
      the array contains the raw values as parsed from the test tool
      corresponding to that data series.</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Metadata_keys"><a class="selflink" href="#Metadata_keys">Metadata
  keys</a></h2>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>NAME</b></dt>
  <dd class="It-tag">The test name.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>TITLE</b></dt>
  <dd class="It-tag">Any extra title specified by the <b>--title-extra</b>
      parameter when the test was run.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>HOSTS</b></dt>
  <dd class="It-tag">List of the server hostnames connected to during the
    test.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>LOCAL_HOST</b></dt>
  <dd class="It-tag">The hostname of the machine that ran the test.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>LENGTH</b></dt>
  <dd class="It-tag">Test length in seconds, as specified by the <b>--length</b>
      parameter.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>TOTAL_LENGTH</b></dt>
  <dd class="It-tag">Actual data series length, after the test has added time to
      the <i>LENGTH</i>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>STEP_SIZE</b></dt>
  <dd class="It-tag">Time step size granularity.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>TIME</b></dt>
  <dd class="It-tag">ISO timestamp of the time the test was initiated.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>NOTE</b></dt>
  <dd class="It-tag">Arbitrary text as entered with the <b>--note</b> switch
      when the test was run.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>FLENT_VERSION</b></dt>
  <dd class="It-tag">Version of Flent that generated the data file.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>IP_VERSION</b></dt>
  <dd class="It-tag">IP version used to run test (as specified by command line
      parameters, or auto-detected from <b>getaddrinfo()</b> if
    unspecified).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>KERNEL_NAME</b></dt>
  <dd class="It-tag">The kernel name as reported by <b>uname -s</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>KERNEL_RELEASE</b></dt>
  <dd class="It-tag">The kernel release as reported by <b>uname -r</b>.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>MODULE_VERSIONS</b></dt>
  <dd class="It-tag">The sha1sum of certain interesting Linux kernel modules, if
      available. Can be used to match test data to specific code versions, if
      the kernel build is instrumented to, e.g., set the build ID to a git
      revision.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>SYSCTLS</b></dt>
  <dd class="It-tag">The values of several networking-related sysctls on the
      host (if available; Linux only).</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>EGRESS_INFO</b></dt>
  <dd class="It-tag">Interface name, qdisc, offload, driver and BQL
      configuration of the interface used to reach the test target. This
      requires that the <b>ip</b> binary is present on Linux, but can be
      extracted from <b>route</b> on BSD. Qdisc information requires the
      <b>tc</b> binary to be present, and offload information requires
      <b>ethtool</b>.
    <div style="height: 1.00em;">&#x00A0;</div>
    If the <b>--remote-metadata</b> is used, the extended metadata info is
      gathered for each of the hostnames specified. This is gathered under the
      <b>REMOTE_METADATA</b> key in the metadata object, keyed by the hostname
      values passed to <b>--remote-metadata</b>. Additionally, the
      <b>REMOTE_METADATA</b> object will contain an object called
      <b>INGRESS_INFO</b> which is a duplicate of <i>EGRESS_INFO</i>, but with
      the destination IP exchanged for the source address of the host running
      flent. The assumption here is that <b>--remote-metadata</b> is used to
      capture metadata of a router known to be in the test path, in which case
      <b>INGRESS_INFO</b> will contain information about the reverse path from
      the router (which is ingress from the point of view of the host running
      flent). If the host being queried for remote metadata is off the path, the
      contents of <b>INGRESS_INFO</b> will probably be the same as that of
      <i>EGRESS_INFO</i> .</dd>
</dl>
</div>
<br/>
<h2 class="Ss" title="Ss" id="Extended_metadata"><a class="selflink" href="#Extended_metadata">Extended
  metadata</a></h2>
If the <b>--extended-metadata</b> switch is turned on, the following additional
  values are collected and stored (to the extent they are available from the
  platform):
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>IP_ADDRS</b></dt>
  <dd class="It-tag">IP addresses assigned to the machine running flent.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>GATEWAYS</b></dt>
  <dd class="It-tag">IP addresses of all detected default gateways on the
      system, and the interfaces they are reachable through. Only available if
      the <b>netstat</b> binary is present on the system.</dd>
</dl>
</div>
<br/>
<div style="margin-left: 0.00ex;">
<dl class="Bl-tag">
  <dt class="It-tag"><b>EGRESS_INFO</b></dt>
  <dd class="It-tag">In the <i>EGRESS_INFO</i> key, the IP address of the
      next-hop router and the interface MAC address are added if extended
      metadata is enabled.</dd>
</dl>
</div>
<br/>
<h1 class="Sh" title="Sh" id="OUTPUT_FORMATS"><a class="selflink" href="#OUTPUT_FORMATS">OUTPUT
  FORMATS</a></h1>
The following output formats are currently supported by Flent:
<h2 class="Ss" title="Ss" id="Plot_output_(-f_plot)"><a class="selflink" href="#Plot_output_(-f_plot)">Plot
  output ( <b>-f</b> <b>plot</b>)</a></h2>
Output test data as one of a series of graphical plots of timeseries data or
  summarised as a CDF plot. Each test supplies a number of different plots; the
  list of plots for a given test is output by the <b>--list-plots</b> switch
  (which must be supplied along with a test name).
<div style="height: 1.00em;">&#x00A0;</div>
The plots are drawn by matplotlib, and can be displayed on the screen
  interactively (requires a graphical display), or output to a file in svg, pdf,
  ps and png formats. Using the <b>-o</b> switch turns out file output (the file
  format is inferred from the file name), while not supplying the switch turns
  on the interactive plot viewer.
<h2 class="Ss" title="Ss" id="Tabulated_output_(-f_csv_and_-f_org_table)"><a class="selflink" href="#Tabulated_output_(-f_csv_and_-f_org_table)">Tabulated
  output ( <b>-f</b> <b>csv</b> and <b>-f</b> <b>org_table</b>)</a></h2>
These formats output the numeric data in a tabulated format to be consumed by
  other applications. The <i>csv</i> output format is a comma-separated output
  that can be imported into e.g. spreadsheets, while <i>org_table</i> outputs a
  tabulated output in the table format supported by Emacs org mode. The data is
  output in text format to standard output, or written to a file if invoked with
  the <b>-o</b> parameter.
<h2 class="Ss" title="Ss" id="Statistics_output_(-f_stats)"><a class="selflink" href="#Statistics_output_(-f_stats)">Statistics
  output ( <b>-f</b> <b>stats</b>)</a></h2>
This output format outputs various statistics about the test data, such as total
  bandwidth consumed, and various statistical measures (min/max/mean/median/std
  dev/variance) for each data source specified in the relevant test (this can
  include some data sources not includes on plots). The data is output in text
  format to standard output, or written to a file if invoked with the <b>-o</b>
  parameter.
<h2 class="Ss" title="Ss" id="Metadata_output_(-f_metadata)"><a class="selflink" href="#Metadata_output_(-f_metadata)">Metadata
  output ( <b>-f</b> <b>metadata</b>)</a></h2>
This output format outputs the test metadata as pretty-printed JSON (also
  suitable for human consumption). It is output as a list of objects, where each
  object corresponds to the metadata of one test. Mostly useful for inspecting
  metadata of stored data files.
<h1 class="Sh" title="Sh" id="MISC_INFO"><a class="selflink" href="#MISC_INFO">MISC
  INFO</a></h1>
<h2 class="Ss" title="Ss" id="Running_Tests_With_The_D-ITG_Tool"><a class="selflink" href="#Running_Tests_With_The_D-ITG_Tool">Running
  Tests With The D-ITG Tool</a></h2>
This version of flent has experimental support for running and parsing the
  output of the D-ITG test tool (see
  <i>http://traffic.comics.unina.it/software/ITG/</i>). Flent supports parsing
  the one-way delay as measured by D-ITG. However, in order to do so, the data
  needs to be collected at the receiver end, statistics extracted, and the
  result passed back to flent on the sending side.
<div style="height: 1.00em;">&#x00A0;</div>
To perform this function, flent supports a control server which will listen to
  XML-RPC requests, spawn an appropriate ITGRecv instance and, after the test is
  done, parse its output and make it available for flent to retrieve. This
  control server is available as a Python file that by default is installed in
  <b>/usr/share/doc/flent/misc</b>. It currently requires a patched version of
  D-ITG v2.8.1. The patch is also included in the same directory.
<div style="height: 1.00em;">&#x00A0;</div>
Note that the D-ITG server is finicky and not designed with security in mind.
  For this reason, the control server includes HMAC authentication to only allow
  authenticated clients to run a test against the server; however there is
  currently no support for enforcement of this in e.g. firewall rules. Please
  bear this in mind when running a publicly reachable ITGRecv instance (with or
  without the control server). Another security issue with the control server is
  that the Python XML-RPC library by default is vulnerable to XML entity
  expansion attacks. For this reason, it is highly recommended to install the
  <b>defusedxml</b> library (available at
  <i>https://pypi.python.org/pypi/defusedxml/</i>) on the host running the
  control server. The server will try to find the library on startup and refuse
  to run if it is not available, unless explicitly told otherwise.
<h2 class="Ss" title="Ss" id="Bugs"><a class="selflink" href="#Bugs">Bugs</a></h2>
Under some conditions (such as severe bufferbloat), the UDP RTT measurements
  done by netperf can experience packet loss to the extent that the test aborts
  completely, which can cause missing data points for some measurement series.
  The --socket-timeout feature can alleviate this, but requires a recent SVN
  version of netperf to work. Flent tries to detect if netperf supports this
  option and enables it for the UDP measurements if it does.
<div style="height: 1.00em;">&#x00A0;</div>
Probably many other bugs. Please report any found to
  <i>https://github.com/tohojo/flent/issues</i> and include the output of
  <b>flent --version</b> in the report.
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
Toke H&#x00F8;iland-J&#x00F8;rgensen
<h1 class="Sh" title="Sh" id="COPYRIGHT"><a class="selflink" href="#COPYRIGHT">COPYRIGHT</a></h1>
2012-2016, Toke H&#x00F8;iland-J&#x00F8;rgensen and contributors. Source code is
  GPLv3. Documentation is CC-BY-SA</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 16, 2017</td>
    <td class="foot-os">1.0.1</td>
  </tr>
</table>
</body>
</html>
