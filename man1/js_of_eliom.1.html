<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>ELIOMC(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ELIOMC(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">ELIOMC(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
eliomc, eliomcp, eliomopt, js_of_eliom, eliomdep - the eliom build tools
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>eliomc</b> [<i>options</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomcp</b> [<i>options</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomopt</b> [<i>options</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomdep</b> [<i>options</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomdoc</b> [<i>options</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliompp</b> [<i>-client</i>|<i>-server</i>] files
<div style="height: 1.00em;">&#x00A0;</div>
<b>js_of_eliom</b> [<i>options</i>] files -o filename.js
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>eliomc,</b> <b>eliomcp</b> and <b>eliomopt</b> are wrapper around the OCaml
  compiler that ease the compilation of the server part of projects based on the
  Eliom framework. They respectively accept the same set of option than the
  <b>ocamlc</b>(1),<b>ocamlcp</b>(1) and <b>ocamlopt</b>(1) compilers plus the
  specific ones described in the <i>OPTIONS</i> section.
<div style="height: 1.00em;">&#x00A0;</div>
<b>js_of_eliom</b> is a wrapper around the OCaml and Js_of_ocaml compilers that
  ease the compilation of the client part of projects based on the Eliom
  framework. It accepts the same set of option than the <b>ocamlc</b>(1)
  compiler plus the specific ones described in the <i>OPTIONS</i> section.
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomdep</b> is a wrapper around <b>ocamldep</b>(1) that handles dependencies
  of an .eliom source files. It accepts the same set of options plus the
  specific ones described in the <i>OPTIONS</i> section. It makes the assumption
  that server-side compiled modules of OCaml files located in this directory
  subtree are in directory <i>_server</i> (with same subdirectories structure)
  (resp. in directory <i>_client</i> for client-side compiled modules).
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliompp (EXPERIMENTAL)</b> is a preprocessor which remove specific sections,
  depending on the given option. The option <b>-client</b> will remove all the
  top-level parts and server sections and the option <b>-server</b> will remove
  only the client sections.
<div style="height: 1.00em;">&#x00A0;</div>
<b>eliomdoc (EXPERIMENTAL)</b> is a wrapper around the OCaml documentation
  generator <b>ocamldoc.</b> It allows you to generate documentation from
  <b>client</b> or <b>server</b> side. It accepts the same set of option than
  <b>ocamldoc</b>(1). It automatically extracts the commentaries from the
  desired sections. <b>eliomdoc</b> is currently experimental, and you could
  find some undefined behaviours. (see
  http://ocsigen.org/eliom/manual/workflow-compilation). Some well known bugs
  are:
<div>&#x00A0;</div>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">your files should always begin with a value and not with a
      comment. Otherwise, camlp4 won't output the commentaries.
    <div>&#x00A0;</div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">&#x2022;</dt>
  <dd class="It-tag">sometimes, comment node are not attached as expected.
      That's because camlp4 (sometimes) remove extra new line between value
      elements.
    <div style="height: 1.00em;">&#x00A0;</div>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="COMPILING_ELIOM_SOURCE_FILES"><a class="selflink" href="#COMPILING_ELIOM_SOURCE_FILES">COMPILING
  ELIOM SOURCE FILES</a></h1>
The compilation of files with a .eliom extension is achieved in three steps:
  infer the type of value sent by the server to the client; compile the server
  part of the code and compile the client part. The first two steps can be
  realised with <b>eliomc</b> and the last one with <b>js_of_eliom.</b>
<div style="height: 1.00em;">&#x00A0;</div>
Both tools produce a .cmo file named as the original .eliom file. To avoid
  overwriting the .cmo representing the server part with .cmo of the client
  part, files generated by <b>eliomc</b>&#x00A0;or<b>&#x00A0;eliomopt</b> are
  stored by default in a subdirectory named _server and files generated by
  <b>js_of_eliom</b> are stored in a subdirectory named _client. Those default
  directories could be respectively overridden by the environment variables
  ELIOM_SERVER_DIR and ELIOM_CLIENT_DIR.
<div style="height: 1.00em;">&#x00A0;</div>
The types infered by <b>eliomc</b> for values sent by the server to the client
  are stored in an intermediate files named as the original .eliom file and
  whose extension is .type_mli. That file is required by <b>js_of_eliom</b> for
  compiling the client part of the .eliom file. The <b>eliomdep</b> tool
  correctly generate dependencies that intermediate file for the server .cmo and
  the client .cmo.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<b>-eliom-inc&#x00A0;&lt;dir&gt;</b> Add &lt;dir&gt; to the list of eliom
  include directories (eliomdep only).
<dl class="Bl-tag">
  <dt class="It-tag"><b>-dir&#x00A0;&lt;dir&gt;</b></dt>
  <dd class="It-tag">Specify the target directory for generated files</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-package&#x00A0;&lt;name&gt;</b></dt>
  <dd class="It-tag">This is the same option as the ocamlfind one.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-predicates&#x00A0;&lt;p&gt;</b></dt>
  <dd class="It-tag">This is the same option as the ocamlfind one.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-no-autoload</b></dt>
  <dd class="It-tag">Do not load commonly used syntax extensions (deriving, lwt,
      js_of_ocaml, tyxml).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-type-conv</b></dt>
  <dd class="It-tag">Use type_conv syntax extensions instead of deriving one. It
      has no effect if used in conjunction with -no-autoload.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-ppopt&#x00A0;&lt;opt&gt;</b></dt>
  <dd class="It-tag">Append &lt;opt&gt; to preprocessor invocation.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-jsopt&#x00A0;&lt;opt&gt;</b></dt>
  <dd class="It-tag">Append &lt;opt&gt; to js_of_ocaml invocation (js_of_eliom
      only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-infer&#x00A0;&lt;opt&gt;</b></dt>
  <dd class="It-tag">For .eliom file, only generate the intermediate .type_mli
      file (eliomc and eliomopt only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-noinfer&#x00A0;&lt;opt&gt;</b></dt>
  <dd class="It-tag">For .eliom file, do not generate the intermediate .type_mli
      file (eliomc and eliomopt only).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-help</b>&#x00A0;or<b>&#x00A0;--help</b></dt>
  <dd class="It-tag">Display a short usage summary and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
The compilation of an Eliom projects composed of a server specific file named
  server.ml, a client specific file named client.ml and two common files name
  base.eliom and main.eliom, could be achieved with the following commands:
<div style="height: 1.00em;">&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;eliomc -a -o appl.cma server.ml base.eliom
  main.eliom
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;js_of_eliom -o appl.js client.ml base.eliom
  main.eliom
<div style="height: 1.00em;">&#x00A0;</div>
To avoid recompiling the whole project each times, this could be split in
  multiple steps:
<div style="height: 1.00em;">&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;eliomc -c server.ml
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;eliomc -c base.eliom
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;eliomc -c main.eliom
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;eliomc -a -o appl.cma _server/server.cmo
  _server/base.cmo _server/main.cmo
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;js_of_eliom -c client.ml
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;js_of_eliom -c base.eliom
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;js_of_eliom -c main.eliom
<div>&#x00A0;</div>
&#x00A0;&#x00A0;&#x00A0;&#x00A0;js_of_eliom -o appl.js _client/client.cmo
  _client/base.cmo _client/main.cmo
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>ocamlc</b>(1), <b>ocamlopt</b>(1), <b>js_of_ocaml</b>(1),
  <b>ocamlfind</b>(1), <b>ocamlcp</b>(1), <b>ocamldep</b>(1).
<h1 class="Sh" title="Sh" id="AUTHOR"><a class="selflink" href="#AUTHOR">AUTHOR</a></h1>
eliomc, js_of_eliom, eliomdep and eliomopt were written by Gregoire Henry
  &lt;gregoire.henry@pps.jussieu.fr&gt;.
<div style="height: 1.00em;">&#x00A0;</div>
eliomdoc was written by Charly Chevalier &lt;charly.n.chevalier@gmail.com&gt;.
<div class="Pp"></div>
This manual page was written by Pierre Chambart
  &lt;chambart@crans.org&gt;.</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-02-15</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
