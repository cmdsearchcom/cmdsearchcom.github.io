<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>pfscolortransform(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">pfscolortransform(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">pfscolortransform(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
pfscolortransform - Apply color calibration using user provided matrix file.
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>pfscolortransform</b> (-- <b>xyzrgb</b> matrix-file | --<b>rgbxyz</b>
  matrix-file) [-- <b>transpose]</b>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Use this command to calibrate colours using a calibration matrix supplied in a
  text file. The command is intended for linearized (not gamma corrected) color
  spaces. The matrix should be 3x3 and it should transform from CIE XYZ to ITU
  rec. 709 RGB (sRGB primaries but linear, no gamma) or from the same RGB to CIE
  XYZ (see options below). The text file should contain three rows with numbers
  separated by a comma, for example:
<div class="Pp"></div>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">0.0292,0.0126,0.0009</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">0.0052,0.0340,-0.0049</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">0.0055,-0.0059,0.0409</dd>
</dl>
<div class="Pp"></div>
If the -- <b>xyzrgb</b> is supplied, the pixel values are color-transformed as
  follows:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[RGB]' = M * [XYZ]</dd>
</dl>
<div class="Pp"></div>
where ' is matrix transposition, * is matrix multiplication, RGB is a vector of
  RGB values and XYZ is the vector of CIE XYZ trichromatic values. If the --
  <b>rgbxyz</b> is supplied, the pixel values are color-transformed as follows:
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">[XYZ]' = M * [RGB]</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">--<b>xyzrgb</b> matrix-file, -<b>x</b> matrix-file</dt>
  <dd class="It-tag">User provided matrix is a conversion matrix to convert from
      XYZ to RGB color space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--<b>rgbxyz</b> matrix-file, -<b>r</b> matrix-file</dt>
  <dd class="It-tag">User provided matrix is a conversion matrix to convert from
      RGB to XYZ color space.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag">--<b>transpose, -</b><b>t</b></dt>
  <dd class="It-tag">Take transpose of provided matrix file.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">pfsin memorial.hdr | pfscolortransform -x matrix.txt |
    pfsout memorial_gc.ppm</dt>
  <dd class="It-tag"></dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"></dt>
  <dd class="It-tag">Color calibrate memorial image with matrix in matrix.txt
      file and save to memorial_gc.ppm.</dd>
</dl>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>pfsin</b>(1) <b>pfsout</b>(1) <b>pfsdisplayfunction</b>(1)
<h1 class="Sh" title="Sh" id="BUGS"><a class="selflink" href="#BUGS">BUGS</a></h1>
Please report bugs and comments to the pfstools discussion group
  (http://groups.google.com/group/pfstools).</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
