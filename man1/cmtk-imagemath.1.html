<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 15:59:29 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>imagemath(1) The Computational Morphometry Toolkit
imagemath(1)</p>

<p style="margin-top: 1em">NAME <br>
imagemath - Image operations</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Perform operations on images using stack-based postfix
notation.</p>

<p style="margin-top: 1em">Images can be read from files
and pushed onto the stack. Images on the stack can be
processed and combined via different operators. Results of
all operations are put back onto <br>
the stack, where they can be further processed or written
back to image files.</p>

<p style="margin-top: 1em">OPTIONS <br>
Global Toolkit Options (these are shared by all CMTK tools)
<br>
--help <br>
Write list of basic command line options to standard
output.</p>

<p style="margin-top: 1em">--help-all <br>
Write complete list of basic and advanced command line
options to standard output.</p>

<p style="margin-top: 1em">--wiki <br>
Write list of command line options to standard output in
MediaWiki markup.</p>

<p style="margin-top: 1em">--man <br>
Write man page source in &rsquo;nroff&rsquo; markup to
standard output.</p>

<p style="margin-top: 1em">--version <br>
Write toolkit version to standard output.</p>

<p style="margin-top: 1em">--echo <br>
Write the current command line to standard output.</p>

<p style="margin-top: 1em">--verbose-level &lt;integer&gt;
<br>
Set verbosity level.</p>

<p style="margin-top: 1em">--verbose, -v <br>
Increment verbosity level by 1 (deprecated; supported for
backward compatibility).</p>

<p style="margin-top: 1em">--threads &lt;integer&gt; <br>
Set maximum number of parallel threads (for POSIX threads
and OpenMP).</p>

<p style="margin-top: 1em">Input/output operations <br>
--in &lt;string-vector&gt; <br>
Read input image(s) to top of stack</p>

<p style="margin-top: 1em">--out &lt;string&gt; <br>
Write output image from top of stack (but leave it on the
stack)</p>

<p style="margin-top: 1em">--set-padding-value
&lt;double&gt; <br>
Set the value that is interpreted as padding value in
subsequently read images.</p>

<p style="margin-top: 1em">--unset-padding <br>
Disable padding. All values in subsequently read images will
be interpreted as actual data.</p>

<p style="margin-top: 1em">Internal settings <br>
--float <br>
Use single precision for computations and results [This is
the default]</p>

<p style="margin-top: 1em">--double <br>
Use double precision for computations and results</p>

<p style="margin-top: 1em">Stack operations <br>
--pop <br>
Pop (discard) top image from stack.</p>

<p style="margin-top: 1em">--dup <br>
Duplicate image on top of the stack.</p>

<p style="margin-top: 1em">--all <br>
Apply next single-image operation to all images on the
stack.</p>

<p style="margin-top: 1em">Single-image operators <br>
--fill &lt;double&gt; <br>
Fill top image with constant value (i.e., assign value to
all pixels)</p>

<p style="margin-top: 1em">--abs <br>
Apply abs() function to top image</p>

<p style="margin-top: 1em">--log <br>
Apply log() function to top image</p>

<p style="margin-top: 1em">--logit <br>
Apply log(x/(1-x)) function to top image</p>

<p style="margin-top: 1em">--logistic <br>
Apply 1/(1+exp(-x)) function to top image</p>

<p style="margin-top: 1em">--exp <br>
Apply exp() function to top image</p>

<p style="margin-top: 1em">--sqr <br>
Apply square operator to top image</p>

<p style="margin-top: 1em">--sqrt <br>
Apply square root operator to top image</p>

<p style="margin-top: 1em">--trunc <br>
Truncate all values in top image to integer</p>

<p style="margin-top: 1em">--one-over <br>
For each pixel, replace its value x with 1.0/x</p>

<p style="margin-top: 1em">--scalar-mul &lt;double&gt; <br>
Multiply top image with a scalar value</p>

<p style="margin-top: 1em">--scalar-add &lt;double&gt; <br>
Add a scalar to each pixel of the top image</p>

<p style="margin-top: 1em">--scalar-xor &lt;integer&gt;
<br>
Bitwise exclusive-or between top level and given scalar
value</p>

<p style="margin-top: 1em">--scalar-and &lt;integer&gt;
<br>
Bitwise and operation between top level and given scalar
value</p>

<p style="margin-top: 1em">--thresh-below &lt;double&gt;
<br>
Set values below given threshold to threshold.</p>

<p style="margin-top: 1em">--thresh-above &lt;double&gt;
<br>
Set values above given threshold to threshold.</p>

<p style="margin-top: 1em">Image pair operators <br>
--add <br>
Add top and second image, place result on stack</p>

<p style="margin-top: 1em">--mul <br>
Multiply top and second image, place result on stack</p>

<p style="margin-top: 1em">--div <br>
Divide top image by second image, place result on stack</p>

<p style="margin-top: 1em">--atan2 <br>
Compute atan2() function from tup two image pixel pairs,
place result on stack</p>

<p style="margin-top: 1em">--match-histograms <br>
Scale intensities in one image to match intensities of
another. The last image pushed onto the stack provides the
reference intensity distribution, the preceding image will
<br>
be modified. Both input images are removed from the stack
and the modified image is pushed onto the stack.</p>

<p style="margin-top: 1em">--match-mean-sdev <br>
Scale intensities of one image to match mean and standard
deviation of another. The last image pushed onto the stack
provides the reference intensity distribution, the
pre&acirc; <br>
ceding image will be modified. Both input images are removed
from the stack and the modified image is pushed onto the
stack.</p>

<p style="margin-top: 1em">--match-mean-sdev3 <br>
Scale intensities of an image by a factor and offset
computed from two other images to match their mean and
standard deviations. The last image pushed onto the stack
pro&acirc; <br>
vides the reference intensity distribution, the preceding
image provides the intensity distribution to match to the
reference image&rsquo;s, and the third image on the stack
will <br>
be modified. All three input images are removed from the
stack and the modified image is pushed onto the stack.</p>

<p style="margin-top: 1em">--mask-average <br>
Mask averaging: the top image is taken as a multi-label
mask. The pixels in the second image are averaged by mask
labels, and then replaced with the average value for each
<br>
mask label.</p>

<p style="margin-top: 1em">Complex Arithmetic <br>
--complex-div <br>
Complex division, (a+ib)/(c+id), assuming four values were
put on the stack in order a, b, c, d. Place result on stack,
real first, imaginary second (i.e., imaginary is <br>
top).</p>

<p style="margin-top: 1em">Operators that contract the
entire stack into a single image <br>
--sum <br>
Sum all images on stack, place result on stack</p>

<p style="margin-top: 1em">--product <br>
Compute product of all images on stack, place result on
stack</p>

<p style="margin-top: 1em">--average <br>
Average all images on stack, place result on stack</p>

<p style="margin-top: 1em">--variance <br>
For each pixel, compute variance over all images on stack,
place result on stack</p>

<p style="margin-top: 1em">--combine-pca <br>
Combine images using PCA by projecting onto direction of
largest correlation</p>

<p style="margin-top: 1em">--max-value <br>
For each pixel, compute maximum VALUE over all images, place
result on stack</p>

<p style="margin-top: 1em">--min-value <br>
For each pixel, compute minimum VALUE over all images, place
result on stack</p>

<p style="margin-top: 1em">--max-index <br>
For each pixel, compute INDEX of image with maximum value,
place result on stack</p>

<p style="margin-top: 1em">Operators that contract a stack
of label images into a single label image <br>
--vote <br>
Merge all images on stack with voting, place result on
stack</p>

<p style="margin-top: 1em">--staple &lt;integer&gt; <br>
Combine binary maps on the stack using [arg] iterations of
the STAPLE algorithm. The result of this operation is the
spatial map of &rsquo;weights&rsquo; W, which are the
probabilities <br>
of image foreground at each pixel. In &rsquo;verbose&rsquo;
mode, estimated expert parameters p (sensitivity) and q
(specificity) are also written to standard output.</p>

<p style="margin-top: 1em">--contract-labels <br>
Contract multiple label maps into one by selecting the first
(over all images on the stack) non-zero label at each
pixel</p>

<p style="margin-top: 1em">--mstaple &lt;integer&gt; <br>
Combine multi-label maps on the stack using [arg] iterations
of the multi-class STAPLE algorithm.The result of this
operation is the combined maximum-likeliood multi-label <br>
map.</p>

<p style="margin-top: 1em">--mstaple-disputed
&lt;integer&gt; <br>
Like previous operation, apply multi-class STAPLE algorithm,
but restrict computation to &rsquo;disputed&rsquo;voxels,
i.e., those where the input label maps disagree. This often
<br>
improves results by reducing, e.g., background effects.</p>

<p style="margin-top: 1em">--stack-entropy-labels <br>
Compute stack entropy at each pixel from integer (label)
input images</p>

<p style="margin-top: 1em">AUTHORS <br>
Torsten Rohlfing, with contributions from Michael P. Hasak,
Greg Jefferis, Calvin R. Maurer, Daniel B. Russakoff, and
Yaroslav Halchenko</p>

<p style="margin-top: 1em">LICENSE <br>
http://www.fsf.org/licensing/licenses/gpl.html</p>

<p style="margin-top: 1em">BUGS <br>
Report bugs at http://nitrc.org/projects/cmtk/</p>

<p style="margin-top: 1em">ACKNOWLEDGMENTS <br>
CMTK is developed with support from the NIAAA under Grant
AA021697, National Consortium on Alcohol and
Neurodevelopment in Adolescence (N-CANDA): Data Integration
Component. From <br>
April 2009 through September 2011, CMTK development and
maintenance was supported by the NIBIB under Grant
EB008381.</p>

<p style="margin-top: 1em">CMTK 3.3.1 Jan 13 2017
imagemath(1)</p>
<hr>
</body>
</html>
