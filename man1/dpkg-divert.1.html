<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
  </style>
  <title>dpkg-divert(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dpkg-divert(1)</td>
    <td class="head-vol">dpkg utilities</td>
    <td class="head-rtitle">dpkg-divert(1)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
dpkg-divert - override a package's version of a file
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b>dpkg-divert</b> [<i>option</i>...] <i>command</i>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>dpkg-divert</b> is the utility used to set up and update the list of
  diversions.
<div class="Pp"></div>
File <i>diversions</i> are a way of forcing <b>dpkg</b>(1) not to install a file
  into its location, but to a <i>diverted</i> location. Diversions can be used
  through the Debian package scripts to move a file away when it causes a
  conflict. System administrators can also use it to override some package's
  configuration file, or whenever some files (which aren't marked as
  &#x201C;conffiles&#x201D;) need to be preserved by <b>dpkg</b>, when
  installing a newer version of a package which contains those files.
<div style="height: 1.00em;">&#x00A0;</div>
<h1 class="Sh" title="Sh" id="COMMANDS"><a class="selflink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag">[<b>--add</b>] <i>file</i></dt>
  <dd class="It-tag">Add a diversion for <i>file</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--remove</b><i> file</i></dt>
  <dd class="It-tag">Remove a diversion for <i>file</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--list</b><i> glob-pattern</i></dt>
  <dd class="It-tag">List diversions matching <i>glob-pattern</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--listpackage</b><i> file</i></dt>
  <dd class="It-tag">Print the name of the package that diverts <i>file</i>
      (since dpkg 1.15.0). Prints LOCAL if <i>file</i> is locally diverted and
      nothing if <i>file</i> is not diverted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--truename</b><i> file</i></dt>
  <dd class="It-tag">Print the real name for a diverted file.</dd>
</dl>
<h1 class="Sh" title="Sh" id="OPTIONS"><a class="selflink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--admindir</b><i> directory</i></dt>
  <dd class="It-tag">Set the <b>dpkg</b> data directory to <i>directory</i>
      (default: <i>/var/lib/dpkg</i>).</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--divert</b><i> divert-to</i></dt>
  <dd class="It-tag"><i>divert-to</i> is the location where the versions of
      <i>file</i>, as provided by other packages, will be diverted.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--local</b></dt>
  <dd class="It-tag">Specifies that all packages' versions of this file are
      diverted. This means, that there are no exceptions, and whatever package
      is installed, the file is diverted. This can be used by an admin to
      install a locally modified version.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--package</b><i> package</i></dt>
  <dd class="It-tag"><i>package</i> is the name of a package whose copy of
      <i>file</i> will not be diverted. i.e. <i>file</i> will be diverted for
      all packages except <i>package</i>.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--quiet</b></dt>
  <dd class="It-tag">Quiet mode, i.e. no verbose output.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--rename</b></dt>
  <dd class="It-tag">Actually move the file aside (or back). <b>dpkg-divert</b>
      will abort operation in case the destination file already exists.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--test</b></dt>
  <dd class="It-tag">Test mode, i.e. don't actually perform any changes, just
      demonstrate.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>-?</b>, <b>--help</b></dt>
  <dd class="It-tag">Show the usage message and exit.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>--version</b></dt>
  <dd class="It-tag">Show the version and exit.</dd>
</dl>
<h1 class="Sh" title="Sh" id="ENVIRONMENT"><a class="selflink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DPKG_ADMINDIR</b></dt>
  <dd class="It-tag">If set and the <b>--admindir</b> option has not been
      specified, it will be used as the <b>dpkg</b> data directory.</dd>
</dl>
<dl class="Bl-tag">
  <dt class="It-tag"><b>DPKG_MAINTSCRIPT_PACKAGE</b></dt>
  <dd class="It-tag">If set and the <b>--local</b> and <b>--package</b> options
      have not been specified, <b>dpkg-divert</b> will use it as the package
      name.</dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="selflink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt class="It-tag"><i>/var/lib/dpkg/diversions</i></dt>
  <dd class="It-tag">File which contains the current list of diversions of the
      system. It is located in the <b>dpkg</b> administration directory, along
      with other files important to <b>dpkg</b>, such as <i>status</i> or
      <i>available</i>.
    <div>&#x00A0;</div>
    Note: <b>dpkg-divert</b> preserves the old copy of this file, with extension
      <i>-old</i>, before replacing it with the new one.</dd>
</dl>
<h1 class="Sh" title="Sh" id="NOTES"><a class="selflink" href="#NOTES">NOTES</a></h1>
When adding, default is <b>--local</b> and <b>--divert</b>
  <i>original</i><b>.distrib</b>. When removing, <b>--package</b> or
  <b>--local</b> and <b>--divert</b> must match if specified.
<div style="height: 1.00em;">&#x00A0;</div>
Directories can't be diverted with <b>dpkg-divert</b>.
<div style="height: 1.00em;">&#x00A0;</div>
Care should be taken when diverting shared libraries, <b>ldconfig</b>(8) creates
  a symbolic link based on the DT_SONAME field embedded in the library. Because
  <b>ldconfig</b> doesn't honour diverts (only <b>dpkg</b> does), the symlink
  may end up pointing at the diverted library, if a diverted library has the
  same SONAME as the undiverted one.
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="selflink" href="#EXAMPLES">EXAMPLES</a></h1>
To divert all copies of a <i>/usr/bin/example</i> to
  <i>/usr/bin/example.foo</i>, i.e. directs all packages providing
  <i>/usr/bin/example</i> to install it as <i>/usr/bin/example.foo</i>,
  performing the rename if required:
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;">dpkg-divert
  --divert /usr/bin/example.foo --rename /usr/bin/example</div>
<div class="Pp"></div>
To remove that diversion:
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;">dpkg-divert
  --rename --remove /usr/bin/example
<div style="height: 1.00em;">&#x00A0;</div>
</div>
<div class="Pp"></div>
To divert any package trying to install <i>/usr/bin/example</i> to
  <i>/usr/bin/example.foo</i>, except your own <i>wibble</i> package:
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;">dpkg-divert
  --package wibble --divert /usr/bin/example.foo --rename /usr/bin/example</div>
<div class="Pp"></div>
To remove that diversion:
<div class="Pp"></div>
<div class="Pp" style="margin-left: 5.00ex; text-indent: -5.00ex;">dpkg-divert
  --package wibble --rename --remove /usr/bin/example</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="selflink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>dpkg</b>(1).</div>
<table class="foot">
  <tr>
    <td class="foot-date">2011-08-14</td>
    <td class="foot-os">Debian Project</td>
  </tr>
</table>
</body>
</html>
