<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Sun Aug 27 16:45:01 2017 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>ZSHMODULES(1) General Commands Manual ZSHMODULES(1)</p>

<p style="margin-top: 1em">NAME <br>
zshmodules - zsh loadable modules</p>

<p style="margin-top: 1em">DESCRIPTION <br>
Some optional parts of zsh are in modules, separate from the
core of the shell. Each of these modules may be linked in to
the shell at build time, or can be dynamically linked <br>
while the shell is running if the installation supports this
feature. Modules are linked at runtime with the zmodload
command, see zshbuiltins(1).</p>

<p style="margin-top: 1em">The modules that are bundled
with the zsh distribution are:</p>

<p style="margin-top: 1em">zsh/attr <br>
Builtins for manipulating extended attributes (xattr).</p>

<p style="margin-top: 1em">zsh/cap <br>
Builtins for manipulating POSIX.1e (POSIX.6) capability
(privilege) sets.</p>

<p style="margin-top: 1em">zsh/clone <br>
A builtin that can clone a running shell onto another
terminal.</p>

<p style="margin-top: 1em">zsh/compctl <br>
The compctl builtin for controlling completion.</p>

<p style="margin-top: 1em">zsh/complete <br>
The basic completion code.</p>

<p style="margin-top: 1em">zsh/complist <br>
Completion listing extensions.</p>

<p style="margin-top: 1em">zsh/computil <br>
A module with utility builtins needed for the shell function
based completion system.</p>

<p style="margin-top: 1em">zsh/curses <br>
curses windowing commands</p>

<p style="margin-top: 1em">zsh/datetime <br>
Some date/time commands and parameters.</p>

<p style="margin-top: 1em">zsh/deltochar <br>
A ZLE function duplicating EMACS&rsquo; zap-to-char.</p>

<p style="margin-top: 1em">zsh/example <br>
An example of how to write a module.</p>

<p style="margin-top: 1em">zsh/files <br>
Some basic file manipulation commands as builtins.</p>

<p style="margin-top: 1em">zsh/langinfo <br>
Interface to locale information.</p>

<p style="margin-top: 1em">zsh/mapfile <br>
Access to external files via a special associative
array.</p>

<p style="margin-top: 1em">zsh/mathfunc <br>
Standard scientific functions for use in mathematical
evaluations.</p>

<p style="margin-top: 1em">zsh/newuser <br>
Arrange for files for new users to be installed.</p>

<p style="margin-top: 1em">zsh/parameter <br>
Access to internal hash tables via special associative
arrays.</p>

<p style="margin-top: 1em">zsh/pcre <br>
Interface to the PCRE library.</p>

<p style="margin-top: 1em">zsh/regex <br>
Interface to the POSIX regex library.</p>

<p style="margin-top: 1em">zsh/sched <br>
A builtin that provides a timed execution facility within
the shell.</p>

<p style="margin-top: 1em">zsh/net/socket <br>
Manipulation of Unix domain sockets</p>

<p style="margin-top: 1em">zsh/stat <br>
A builtin command interface to the stat system call.</p>

<p style="margin-top: 1em">zsh/system <br>
A builtin interface to various low-level system
features.</p>

<p style="margin-top: 1em">zsh/net/tcp <br>
Manipulation of TCP sockets</p>

<p style="margin-top: 1em">zsh/termcap <br>
Interface to the termcap database.</p>

<p style="margin-top: 1em">zsh/terminfo <br>
Interface to the terminfo database.</p>

<p style="margin-top: 1em">zsh/zftp <br>
A builtin FTP client.</p>

<p style="margin-top: 1em">zsh/zle <br>
The Zsh Line Editor, including the bindkey and vared
builtins.</p>

<p style="margin-top: 1em">zsh/zleparameter <br>
Access to internals of the Zsh Line Editor via
parameters.</p>

<p style="margin-top: 1em">zsh/zprof <br>
A module allowing profiling for shell functions.</p>

<p style="margin-top: 1em">zsh/zpty <br>
A builtin for starting a command in a pseudo-terminal.</p>

<p style="margin-top: 1em">zsh/zselect <br>
Block and return when file descriptors are ready.</p>

<p style="margin-top: 1em">zsh/zutil <br>
Some utility builtins, e.g. the one for supporting
configuration via styles.</p>

<p style="margin-top: 1em">THE ZSH/ATTR MODULE <br>
The zsh/attr module is used for manipulating extended
attributes. The -h option causes all commands to operate on
symbolic links instead of their targets. The builtins in
this <br>
module are:</p>

<p style="margin-top: 1em">zgetattr [ -h ] filename
attribute [ parameter ] <br>
Get the extended attribute attribute from the specified
filename. If the optional argument parameter is given, the
attribute is set on that parameter instead of being <br>
printed to stdout.</p>

<p style="margin-top: 1em">zsetattr [ -h ] filename
attribute value <br>
Set the extended attribute attribute on the specified
filename to value.</p>

<p style="margin-top: 1em">zdelattr [ -h ] filename
attribute <br>
Remove the extended attribute attribute from the specified
filename.</p>

<p style="margin-top: 1em">zlistattr [ -h ] filename [
parameter ] <br>
List the extended attributes currently set on the specified
filename. If the optional argument parameter is given, the
list of attributes is set on that parameter instead <br>
of being printed to stdout.</p>

<p style="margin-top: 1em">zgetattr and zlistattr allocate
memory dynamically. If the attribute or list of attributes
grows between the allocation and the call to get them, they
return 2. On all other <br>
errors, 1 is returned. This allows the calling function to
check for this case and retry.</p>

<p style="margin-top: 1em">THE ZSH/CAP MODULE <br>
The zsh/cap module is used for manipulating POSIX.1e
(POSIX.6) capability sets. If the operating system does not
support this interface, the builtins defined by this module
will <br>
do nothing. The builtins in this module are:</p>

<p style="margin-top: 1em">cap [ capabilities ] <br>
Change the shell&rsquo;s process capability sets to the
specified capabilities, otherwise display the shell&rsquo;s
current capabilities.</p>

<p style="margin-top: 1em">getcap filename ... <br>
This is a built-in implementation of the POSIX standard
utility. It displays the capability sets on each specified
filename.</p>

<p style="margin-top: 1em">setcap capabilities filename ...
<br>
This is a built-in implementation of the POSIX standard
utility. It sets the capability sets on each specified
filename to the specified capabilities.</p>

<p style="margin-top: 1em">THE ZSH/CLONE MODULE <br>
The zsh/clone module makes available one builtin
command:</p>

<p style="margin-top: 1em">clone tty <br>
Creates a forked instance of the current shell, attached to
the specified tty. In the new shell, the PID, PPID and TTY
special parameters are changed appropriately. $! <br>
is set to zero in the new shell, and to the new
shell&rsquo;s PID in the original shell.</p>

<p style="margin-top: 1em">The return status of the builtin
is zero in both shells if successful, and non-zero on
error.</p>

<p style="margin-top: 1em">The target of clone should be an
unused terminal, such as an unused virtual console or a
virtual terminal created by</p>

<p style="margin-top: 1em">xterm -e sh -c &rsquo;trap : INT
QUIT TSTP; tty; while :; do sleep 100000000; done&rsquo;</p>

<p style="margin-top: 1em">Some words of explanation are
warranted about this long xterm command line: when doing
clone on a pseudo-terminal, some other session
(&quot;session&quot; meant as a unix session <br>
group, or SID) is already owning the terminal. Hence the
cloned zsh cannot acquire the pseudo-terminal as a
controlling tty. That means two things:</p>

<p style="margin-top: 1em">the job control signals will go
to the sh-started-by-xterm process <br>
group (that&rsquo;s why we disable INT QUIT and TSTP with
trap; otherwise <br>
the while loop could get suspended or killed)</p>

<p style="margin-top: 1em">the cloned shell will have job
control disabled, and the job <br>
control keys (control-C, control-&nbsp;and control-Z) will
not work.</p>

<p style="margin-top: 1em">This does not apply when cloning
to an unused vc.</p>

<p style="margin-top: 1em">Cloning to a used (and
unprepared) terminal will result in two processes reading
simultaneously from the same terminal, with input bytes
going randomly to either process.</p>

<p style="margin-top: 1em">clone is mostly useful as a
shell built-in replacement for openvt.</p>

<p style="margin-top: 1em">THE ZSH/COMPCTL MODULE <br>
The zsh/compctl module makes available two builtin commands.
compctl, is the old, deprecated way to control completions
for ZLE. See zshcompctl(1). The other builtin command, <br>
compcall can be used in user-defined completion widgets, see
zshcompwid(1).</p>

<p style="margin-top: 1em">THE ZSH/COMPLETE MODULE <br>
The zsh/complete module makes available several builtin
commands which can be used in user-defined completion
widgets, see zshcompwid(1).</p>

<p style="margin-top: 1em">THE ZSH/COMPLIST MODULE <br>
The zsh/complist module offers three extensions to
completion listings: the ability to highlight matches in
such a list, the ability to scroll through long lists and a
different <br>
style of menu completion.</p>

<p style="margin-top: 1em">Colored completion listings <br>
Whenever one of the parameters ZLS_COLORS or ZLS_COLOURS is
set and the zsh/complist module is loaded or linked into the
shell, completion lists will be colored. Note, however, <br>
that complist will not automatically be loaded if it is not
linked in: on systems with dynamic loading, &lsquo;zmodload
zsh/complist&rsquo; is required.</p>

<p style="margin-top: 1em">The parameters ZLS_COLORS and
ZLS_COLOURS describe how matches are highlighted. To turn on
highlighting an empty value suffices, in which case all the
default values given below <br>
will be used. The format of the value of these parameters is
the same as used by the GNU version of the ls command: a
colon-separated list of specifications of the form <br>
&lsquo;name=value&rsquo;. The name may be one of the
following strings, most of which specify file types for
which the value will be used. The strings and their default
values are:</p>

<p style="margin-top: 1em">no 0 for normal text (i.e. when
displaying something other than a matched file)</p>

<p style="margin-top: 1em">fi 0 for regular files</p>

<p style="margin-top: 1em">di 32 for directories</p>

<p style="margin-top: 1em">ln 36 for symbolic links. If
this has the special value target, symbolic links are
dereferenced and the target file used to determine the
display format.</p>

<p style="margin-top: 1em">pi 31 for named pipes
(FIFOs)</p>

<p style="margin-top: 1em">so 33 for sockets</p>

<p style="margin-top: 1em">bd 44;37 <br>
for block devices</p>

<p style="margin-top: 1em">cd 44;37 <br>
for character devices</p>

<p style="margin-top: 1em">or none <br>
for a symlink to nonexistent file (default is the value
defined for ln)</p>

<p style="margin-top: 1em">mi none <br>
for a non-existent file (default is the value defined for
fi); this code is currently not used</p>

<p style="margin-top: 1em">su 37;41 <br>
for files with setuid bit set</p>

<p style="margin-top: 1em">sg 30;43 <br>
for files with setgid bit set</p>

<p style="margin-top: 1em">tw 30;42 <br>
for world writable directories with sticky bit set</p>

<p style="margin-top: 1em">ow 34;43 <br>
for world writable directories without sticky bit set</p>

<p style="margin-top: 1em">sa none <br>
for files with an associated suffix alias; this is only
tested after specific suffixes, as described below</p>

<p style="margin-top: 1em">st 37;44 <br>
for directories with sticky bit set but not world
writable</p>

<p style="margin-top: 1em">ex 35 for executable files</p>

<p style="margin-top: 1em">lc \[ for the left code (see
below)</p>

<p style="margin-top: 1em">rc m for the right code</p>

<p style="margin-top: 1em">tc 0 for the character
indicating the file type printed after filenames if the
LIST_TYPES option is set</p>

<p style="margin-top: 1em">sp 0 for the spaces printed
after matches to align the next column</p>

<p style="margin-top: 1em">ec none <br>
for the end code</p>

<p style="margin-top: 1em">Apart from these strings, the
name may also be an asterisk (&lsquo;*&rsquo;) followed by
any string. The value given for such a string will be used
for all files whose name ends with the <br>
string. The name may also be an equals sign
(&lsquo;=&rsquo;) followed by a pattern; the EXTENDED_GLOB
option will be turned on for evaluation of the pattern. The
value given for this pat&acirc; <br>
tern will be used for all matches (not just filenames) whose
display string are matched by the pattern. Definitions for
the form with the leading equal sign take precedence over
<br>
the values defined for file types, which in turn take
precedence over the form with the leading asterisk (file
extensions).</p>

<p style="margin-top: 1em">The leading-equals form also
allows different parts of the displayed strings to be
colored differently. For this, the pattern has to use the
&lsquo;(#b)&rsquo; globbing flag and pairs of <br>
parentheses surrounding the parts of the strings that are to
be colored differently. In this case the value may consist
of more than one color code separated by equal signs. <br>
The first code will be used for all parts for which no
explicit code is specified and the following codes will be
used for the parts matched by the sub-patterns in
parentheses. <br>
For example, the specification
&lsquo;=(#b)(?)*(?)=0=3=7&rsquo; will be used for all
matches which are at least two characters long and will use
the code &lsquo;3&rsquo; for the first character,
&lsquo;7&rsquo; for <br>
the last character and &lsquo;0&rsquo; for the rest.</p>

<p style="margin-top: 1em">All three forms of name may be
preceded by a pattern in parentheses. If this is given, the
value will be used only for matches in groups whose names
are matched by the pattern <br>
given in the parentheses. For example,
&lsquo;(g*)m*=43&rsquo; highlights all matches beginning
with &lsquo;m&rsquo; in groups whose names begin with
&lsquo;g&rsquo; using the color code &lsquo;43&rsquo;. In
case of the <br>
&lsquo;lc&rsquo;, &lsquo;rc&rsquo;, and &lsquo;ec&rsquo;
codes, the group pattern is ignored.</p>

<p style="margin-top: 1em">Note also that all patterns are
tried in the order in which they appear in the parameter
value until the first one matches which is then used.</p>

<p style="margin-top: 1em">When printing a match, the code
prints the value of lc, the value for the file-type or the
last matching specification with a &lsquo;*&rsquo;, the
value of rc, the string to display for the <br>
match itself, and then the value of ec if that is defined or
the values of lc, no, and rc if ec is not defined.</p>

<p style="margin-top: 1em">The default values are ISO 6429
(ANSI) compliant and can be used on vt100 compatible
terminals such as xterms. On monochrome terminals the
default values will have no visible <br>
effect. The colors function from the contribution can be
used to get associative arrays containing the codes for ANSI
terminals (see the section &lsquo;Other Functions&rsquo; in
zshcon&acirc; <br>
trib(1)). For example, after loading colors, one could use
&lsquo;$colors[red]&rsquo; to get the code for foreground
color red and &lsquo;$colors[bg-green]&rsquo; for the code
for background color <br>
green.</p>

<p style="margin-top: 1em">If the completion system invoked
by compinit is used, these parameters should not be set
directly because the system controls them itself. Instead,
the list-colors style should <br>
be used (see the section &lsquo;Completion System
Configuration&rsquo; in zshcompsys(1)).</p>

<p style="margin-top: 1em">Scrolling in completion listings
<br>
To enable scrolling through a completion list, the
LISTPROMPT parameter must be set. Its value will be used as
the prompt; if it is the empty string, a default prompt will
be <br>
used. The value may contain escapes of the form
&lsquo;%x&rsquo;. It supports the escapes &lsquo;%B&rsquo;,
&lsquo;%b&rsquo;, &lsquo;%S&rsquo;, &lsquo;%s&rsquo;,
&lsquo;%U&rsquo;, &lsquo;%u&rsquo;, &lsquo;%F&rsquo;,
&lsquo;%f&rsquo;, &lsquo;%K&rsquo;, &lsquo;%k&rsquo; and
&lsquo;%{...%}&rsquo; used also in shell <br>
prompts as well as three pairs of additional sequences: a
&lsquo;%l&rsquo; or &lsquo;%L&rsquo; is replaced by the
number of the last line shown and the total number of lines
in the form &lsquo;number/total&rsquo;; <br>
a &lsquo;%m&rsquo; or &lsquo;%M&rsquo; is replaced with the
number of the last match shown and the total number of
matches; and &lsquo;%p&rsquo; or &lsquo;%P&rsquo; is
replaced with &lsquo;Top&rsquo;, &lsquo;Bottom&rsquo; or the
position of the first <br>
line shown in percent of the total number of lines,
respectively. In each of these cases the form with the
uppercase letter will be replaced with a string of fixed
width, padded <br>
to the right with spaces, while the lowercase form will not
be padded.</p>

<p style="margin-top: 1em">If the parameter LISTPROMPT is
set, the completion code will not ask if the list should be
shown. Instead it immediately starts displaying the list,
stopping after the first <br>
screenful, showing the prompt at the bottom, waiting for a
keypress after temporarily switching to the listscroll
keymap. Some of the zle functions have a special meaning
while <br>
scrolling lists:</p>

<p style="margin-top: 1em">send-break <br>
stops listing discarding the key pressed</p>

<p style="margin-top: 1em">accept-line, down-history,
down-line-or-history <br>
down-line-or-search, vi-down-line-or-history <br>
scrolls forward one line</p>

<p style="margin-top: 1em">complete-word, menu-complete,
expand-or-complete <br>
expand-or-complete-prefix, menu-complete-or-expand <br>
scrolls forward one screenful</p>

<p style="margin-top: 1em">accept-search <br>
stop listing but take no other action</p>

<p style="margin-top: 1em">Every other character stops
listing and immediately processes the key as usual. Any key
that is not bound in the listscroll keymap or that is bound
to undefined-key is looked up <br>
in the keymap currently selected.</p>

<p style="margin-top: 1em">As for the ZLS_COLORS and
ZLS_COLOURS parameters, LISTPROMPT should not be set
directly when using the shell function based completion
system. Instead, the list-prompt style <br>
should be used.</p>

<p style="margin-top: 1em">Menu selection <br>
The zsh/complist module also offers an alternative style of
selecting matches from a list, called menu selection, which
can be used if the shell is set up to return to the last
<br>
prompt after showing a completion list (see the
ALWAYS_LAST_PROMPT option in zshoptions(1)).</p>

<p style="margin-top: 1em">Menu selection can be invoked
directly by the widget menu-select defined by this module.
This is a standard ZLE widget that can be bound to a key in
the usual way as described <br>
in zshzle(1).</p>

<p style="margin-top: 1em">Alternatively, the parameter
MENUSELECT can be set to an integer, which gives the minimum
number of matches that must be present before menu selection
is automatically turned on. <br>
This second method requires that menu completion be started,
either directly from a widget such as menu-complete, or due
to one of the options MENU_COMPLETE or AUTO_MENU being <br>
set. If MENUSELECT is set, but is 0, 1 or empty, menu
selection will always be started during an ambiguous menu
completion.</p>

<p style="margin-top: 1em">When using the completion system
based on shell functions, the MENUSELECT parameter should
not be used (like the ZLS_COLORS and ZLS_COLOURS parameters
described above). Instead, <br>
the menu style should be used with the select=...
keyword.</p>

<p style="margin-top: 1em">After menu selection is started,
the matches will be listed. If there are more matches than
fit on the screen, only the first screenful is shown. The
matches to insert into the <br>
command line can be selected from this list. In the list one
match is highlighted using the value for ma from the
ZLS_COLORS or ZLS_COLOURS parameter. The default value for
<br>
this is &lsquo;7&rsquo; which forces the selected match to
be highlighted using standout mode on a vt100-compatible
terminal. If neither ZLS_COLORS nor ZLS_COLOURS is set, the
same terminal <br>
control sequence as for the &lsquo;%S&rsquo; escape in
prompts is used.</p>

<p style="margin-top: 1em">If there are more matches than
fit on the screen and the parameter MENUPROMPT is set, its
value will be shown below the matches. It supports the same
escape sequences as LIST&acirc; <br>
PROMPT, but the number of the match or line shown will be
that of the one where the mark is placed. If its value is
the empty string, a default prompt will be used.</p>

<p style="margin-top: 1em">The MENUSCROLL parameter can be
used to specify how the list is scrolled. If the parameter
is unset, this is done line by line, if it is set to
&lsquo;0&rsquo; (zero), the list will scroll <br>
half the number of lines of the screen. If the value is
positive, it gives the number of lines to scroll and if it
is negative, the list will be scrolled the number of lines
of <br>
the screen minus the (absolute) value.</p>

<p style="margin-top: 1em">As for the ZLS_COLORS,
ZLS_COLOURS and LISTPROMPT parameters, neither MENUPROMPT
nor MENUSCROLL should be set directly when using the shell
function based completion system. <br>
Instead, the select-prompt and select-scroll styles should
be used.</p>

<p style="margin-top: 1em">The completion code sometimes
decides not to show all of the matches in the list. These
hidden matches are either matches for which the completion
function which added them <br>
explicitly requested that they not appear in the list (using
the -n option of the compadd builtin command) or they are
matches which duplicate a string already in the list <br>
(because they differ only in things like prefixes or
suffixes that are not displayed). In the list used for menu
selection, however, even these matches are shown so that it
is <br>
possible to select them. To highlight such matches the hi
and du capabilities in the ZLS_COLORS and ZLS_COLOURS
parameters are supported for hidden matches of the first and
sec&acirc; <br>
ond kind, respectively.</p>

<p style="margin-top: 1em">Selecting matches is done by
moving the mark around using the zle movement functions.
When not all matches can be shown on the screen at the same
time, the list will scroll up <br>
and down when crossing the top or bottom line. The following
zle functions have special meaning during menu selection.
Note that the following always perform the same task <br>
within the menu selection map and cannot be replaced by user
defined widgets, nor can the set of functions be
extended:</p>

<p style="margin-top: 1em">accept-line, accept-search <br>
accept the current match and leave menu selection (but do
not cause the command line to be accepted)</p>

<p style="margin-top: 1em">send-break <br>
leaves menu selection and restores the previous contents of
the command line</p>

<p style="margin-top: 1em">redisplay, clear-screen <br>
execute their normal function without leaving menu
selection</p>

<p style="margin-top: 1em">accept-and-hold,
accept-and-menu-complete <br>
accept the currently inserted match and continue selection
allowing to select the next match to insert into the
line</p>

<p style="margin-top: 1em">accept-and-infer-next-history
<br>
accepts the current match and then tries completion with
menu selection again; in the case of files this allows one
to select a directory and immediately attempt to com&acirc;
<br>
plete files in it; if there are no matches, a message is
shown and one can use undo to go back to completion on the
previous level, every other key leaves menu selection <br>
(including the other zle functions which are otherwise
special during menu selection)</p>

<p style="margin-top: 1em">undo removes matches inserted
during the menu selection by one of the three functions
before</p>

<p style="margin-top: 1em">down-history,
down-line-or-history <br>
vi-down-line-or-history, down-line-or-search <br>
moves the mark one line down</p>

<p style="margin-top: 1em">up-history, up-line-or-history
<br>
vi-up-line-or-history, up-line-or-search <br>
moves the mark one line up</p>

<p style="margin-top: 1em">forward-char, vi-forward-char
<br>
moves the mark one column right</p>

<p style="margin-top: 1em">backward-char, vi-backward-char
<br>
moves the mark one column left</p>

<p style="margin-top: 1em">forward-word, vi-forward-word
<br>
vi-forward-word-end, emacs-forward-word <br>
moves the mark one screenful down</p>

<p style="margin-top: 1em">backward-word, vi-backward-word,
emacs-backward-word <br>
moves the mark one screenful up</p>

<p style="margin-top: 1em">vi-forward-blank-word,
vi-forward-blank-word-end <br>
moves the mark to the first line of the next group of
matches</p>

<p style="margin-top: 1em">vi-backward-blank-word <br>
moves the mark to the last line of the previous group of
matches</p>

<p style="margin-top: 1em">beginning-of-history <br>
moves the mark to the first line</p>

<p style="margin-top: 1em">end-of-history <br>
moves the mark to the last line</p>

<p style="margin-top: 1em">beginning-of-buffer-or-history,
beginning-of-line <br>
beginning-of-line-hist, vi-beginning-of-line <br>
moves the mark to the leftmost column</p>

<p style="margin-top: 1em">end-of-buffer-or-history,
end-of-line <br>
end-of-line-hist, vi-end-of-line <br>
moves the mark to the rightmost column</p>

<p style="margin-top: 1em">complete-word, menu-complete,
expand-or-complete <br>
expand-or-complete-prefix, menu-expand-or-complete <br>
moves the mark to the next match</p>

<p style="margin-top: 1em">reverse-menu-complete <br>
moves the mark to the previous match</p>

<p style="margin-top: 1em">vi-insert <br>
this toggles between normal and interactive mode; in
interactive mode the keys bound to self-insert and
self-insert-unmeta insert into the command line as in normal
edit&acirc; <br>
ing mode but without leaving menu selection; after each
character completion is tried again and the list changes to
contain only the new matches; the completion widgets <br>
make the longest unambiguous string be inserted in the
command line and undo and backward-delete-char go back to
the previous set of matches</p>


<p style="margin-top: 1em">history-incremental-search-forward
<br>
history-incremental-search-backward <br>
this starts incremental searches in the list of completions
displayed; in this mode, accept-line only leaves incremental
search, going back to the normal menu selection <br>
mode</p>

<p style="margin-top: 1em">All movement functions wrap
around at the edges; any other zle function not listed
leaves menu selection and executes that function. It is
possible to make widgets in the above <br>
list do the same by using the form of the widget with a
&lsquo;.&rsquo; in front. For example, the widget
&lsquo;.accept-line&rsquo; has the effect of leaving menu
selection and accepting the entire <br>
command line.</p>

<p style="margin-top: 1em">During this selection the widget
uses the keymap menuselect. Any key that is not defined in
this keymap or that is bound to undefined-key is looked up
in the keymap currently <br>
selected. This is used to ensure that the most important
keys used during selection (namely the cursor keys, return,
and TAB) have sensible defaults. However, keys in the <br>
menuselect keymap can be modified directly using the bindkey
builtin command (see zshmodules(1)). For example, to make
the return key leave menu selection without accepting the
<br>
match currently selected one could call</p>

<p style="margin-top: 1em">bindkey -M menuselect
&rsquo;^M&rsquo; send-break</p>

<p style="margin-top: 1em">after loading the zsh/complist
module.</p>

<p style="margin-top: 1em">THE ZSH/COMPUTIL MODULE <br>
The zsh/computil module adds several builtin commands that
are used by some of the completion functions in the
completion system based on shell functions (see
zshcompsys(1) ). <br>
Except for compquote these builtin commands are very
specialised and thus not very interesting when writing your
own completion functions. In summary, these builtin commands
<br>
are:</p>

<p style="margin-top: 1em">comparguments <br>
This is used by the _arguments function to do the argument
and command line parsing. Like compdescribe it has an option
-i to do the parsing and initialize some internal <br>
state and various options to access the state information to
decide what should be completed.</p>

<p style="margin-top: 1em">compdescribe <br>
This is used by the _describe function to build the displays
for the matches and to get the strings to add as matches
with their options. On the first call one of the <br>
options -i or -I should be supplied as the first argument.
In the first case, display strings without the descriptions
will be generated, in the second case, the string <br>
used to separate the matches from their descriptions must be
given as the second argument and the descriptions (if any)
will be shown. All other arguments are like the <br>
definition arguments to _describe itself.</p>

<p style="margin-top: 1em">Once compdescribe has been
called with either the -i or the -I option, it can be
repeatedly called with the -g option and the names of five
arrays as its arguments. This <br>
will step through the different sets of matches and store
the options in the first array, the strings with
descriptions in the second, the matches for these in the
third, <br>
the strings without descriptions in the fourth, and the
matches for them in the fifth array. These are then directly
given to compadd to register the matches with the <br>
completion code.</p>

<p style="margin-top: 1em">compfiles <br>
Used by the _path_files function to optimize complex
recursive filename generation (globbing). It does three
things. With the -p and -P options it builds the glob
pat&acirc; <br>
terns to use, including the paths already handled and trying
to optimize the patterns with respect to the prefix and
suffix from the line and the match specification cur&acirc;
<br>
rently used. The -i option does the directory tests for the
ignore-parents style and the -r option tests if a component
for some of the matches are equal to the string on <br>
the line and removes all other matches if that is true.</p>

<p style="margin-top: 1em">compgroups <br>
Used by the _tags function to implement the internals of the
group-order style. This only takes its arguments as names of
completion groups and creates the groups for it <br>
(all six types: sorted and unsorted, both without removing
duplicates, with removing all duplicates and with removing
consecutive duplicates).</p>

<p style="margin-top: 1em">compquote [ -p ] names ... <br>
There may be reasons to write completion functions that have
to add the matches using the -Q option to compadd and
perform quoting themselves. Instead of interpreting the <br>
first character of the all_quotes key of the compstate
special association and using the q flag for parameter
expansions, one can use this builtin command. The arguments
<br>
are the names of scalar or array parameters and the values
of these parameters are quoted as needed for the innermost
quoting level. If the -p option is given, quoting is <br>
done as if there is some prefix before the values of the
parameters, so that a leading equal sign will not be
quoted.</p>

<p style="margin-top: 1em">The return status is non-zero in
case of an error and zero otherwise.</p>

<p style="margin-top: 1em">comptags <br>
comptry <br>
These implement the internals of the tags mechanism.</p>

<p style="margin-top: 1em">compvalues <br>
Like comparguments, but for the _values function.</p>

<p style="margin-top: 1em">THE ZSH/CURSES MODULE <br>
The zsh/curses module makes available one builtin command
and various parameters.</p>

<p style="margin-top: 1em">Builtin <br>
zcurses init <br>
zcurses end <br>
zcurses addwin targetwin nlines ncols begin_y begin_x [
parentwin ] <br>
zcurses delwin targetwin <br>
zcurses refresh [ targetwin ... ] <br>
zcurses touch targetwin ... <br>
zcurses move targetwin new_y new_x <br>
zcurses clear targetwin [ redraw | eol | bot ] <br>
zcurses position targetwin array <br>
zcurses char targetwin character <br>
zcurses string targetwin string <br>
zcurses border targetwin border <br>
zcurses attr targetwin [ {+/-}attribute | fg_col/bg_col ]
[...] <br>
zcurses bg targetwin [ {+/-}attribute | fg_col/bg_col |
@char ] [...] <br>
zcurses scroll targetwin [ on | off | {+/-}lines ] <br>
zcurses input targetwin [ param [ kparam [ mparam ] ] ] <br>
zcurses mouse [ delay num | {+/-}motion ] <br>
zcurses timeout targetwin intval <br>
zcurses querychar targetwin [ param ] <br>
Manipulate curses windows. All uses of this command should
be bracketed by &lsquo;zcurses init&rsquo; to initialise use
of curses, and &lsquo;zcurses end&rsquo; to end it; omitting
&lsquo;zcurses end&rsquo; <br>
can cause the terminal to be in an unwanted state.</p>

<p style="margin-top: 1em">The subcommand addwin creates a
window with nlines lines and ncols columns. Its upper left
corner will be placed at row begin_y and column begin_x of
the screen. tar&acirc; <br>
getwin is a string and refers to the name of a window that
is not currently assigned. Note in particular the curses
convention that vertical values appear before horizon&acirc;
<br>
tal values.</p>

<p style="margin-top: 1em">If addwin is given an existing
window as the final argument, the new window is created as a
subwindow of parentwin. This differs from an ordinary new
window in that the <br>
memory of the window contents is shared with the
parent&rsquo;s memory. Subwindows must be deleted before
their parent. Note that the coordinates of subwindows are
relative to <br>
the screen, not the parent, as with other windows.</p>

<p style="margin-top: 1em">Use the subcommand delwin to
delete a window created with addwin. Note that end does not
implicitly delete windows, and that delwin does not erase
the screen image of the <br>
window.</p>

<p style="margin-top: 1em">The window corresponding to the
full visible screen is called stdscr; it always exists after
&lsquo;zcurses init&rsquo; and cannot be delete with
delwin.</p>

<p style="margin-top: 1em">The subcommand refresh will
refresh window targetwin; this is necessary to make any
pending changes (such as characters you have prepared for
output with char) visible on <br>
the screen. refresh without an argument causes the screen to
be cleared and redrawn. If multiple windows are given, the
screen is updated once at the end.</p>

<p style="margin-top: 1em">The subcommand touch marks the
targetwins listed as changed. This is necessary before
refreshing windows if a window that was in front of another
window (which may be <br>
stdscr) is deleted.</p>

<p style="margin-top: 1em">The subcommand move moves the
cursor position in targetwin to new coordinates new_y and
new_x. Note that the subcommand string (but not the
subcommand char) advances the <br>
cursor position over the characters added.</p>

<p style="margin-top: 1em">The subcommand clear erases the
contents of targetwin. One (and no more than one) of three
options may be specified. With the option redraw, in
addition the next refresh <br>
of targetwin will cause the screen to be cleared and
repainted. With the option eol, targetwin is only cleared to
the end of the current cursor line. With the option <br>
bot, targetwin is cleared to the end of the window, i.e
everything to the right and below the cursor is cleared.</p>

<p style="margin-top: 1em">The subcommand position writes
various positions associated with targetwin into the array
named array. These are, in order:</p>

<p style="margin-top: 1em">The y and x coordinates of the
cursor relative to the top left <br>
of targetwin</p>

<p style="margin-top: 1em">The y and x coordinates of the
top left of targetwin on the <br>
screen</p>

<p style="margin-top: 1em">The size of targetwin in y and x
dimensions.</p>

<p style="margin-top: 1em">Outputting characters and
strings are achieved by char and string respectively.</p>

<p style="margin-top: 1em">To draw a border around window
targetwin, use border. Note that the border is not
subsequently handled specially: in other words, the border
is simply a set of charac&acirc; <br>
ters output at the edge of the window. Hence it can be
overwritten, can scroll off the window, etc.</p>

<p style="margin-top: 1em">The subcommand attr will set
targetwin&rsquo;s attributes or foreground/background color
pair for any successive character output. Each attribute
given on the line may be <br>
prepended by a + to set or a - to unset that attribute; + is
assumed if absent. The attributes supported are blink, bold,
dim, reverse, standout, and underline.</p>

<p style="margin-top: 1em">Each fg_col/bg_col attribute (to
be read as &lsquo;fg_col on bg_col&rsquo;) sets the
foreground and background color for character output. The
color default is sometimes available <br>
(in particular if the library is ncurses), specifying the
foreground or background color with which the terminal
started. The color pair default/default is always
avail&acirc; <br>
able.</p>

<p style="margin-top: 1em">bg overrides the color and other
attributes of all characters in the window. Its usual use is
to set the background initially, but it will overwrite the
attributes of any <br>
characters at the time when it is called. In addition to the
arguments allowed with attr, an argument @char specifies a
character to be shown in otherwise blank areas of <br>
the window. Owing to limitations of curses this cannot be a
multibyte character (use of ASCII characters only is
recommended). As the specified set of attributes over&acirc;
<br>
ride the existing background, turning attributes off in the
arguments is not useful, though this does not cause an
error.</p>

<p style="margin-top: 1em">The subcommand scroll can be
used with on or off to enabled or disable scrolling of a
window when the cursor would otherwise move below the window
due to typing or output. <br>
It can also be used with a positive or negative integer to
scroll the window up or down the given number of lines
without changing the current cursor position (which <br>
therefore appears to move in the opposite direction relative
to the window). In the second case, if scrolling is off it
is temporarily turned on to allow the window to be <br>
scrolled.</p>

<p style="margin-top: 1em">The subcommand input reads a
single character from the window without echoing it back. If
param is supplied the character is assigned to the parameter
param, else it is <br>
assigned to the parameter REPLY.</p>

<p style="margin-top: 1em">If both param and kparam are
supplied, the key is read in &lsquo;keypad&rsquo; mode. In
this mode special keys such as function keys and arrow keys
return the name of the key in the <br>
parameter kparam. The key names are the macros defined in
the curses.h or ncurses.h with the prefix &lsquo;KEY_&rsquo;
removed; see also the description of the parameter
zcurses_key&acirc; <br>
codes below. Other keys cause a value to be set in param as
before. On a successful return only one of param or kparam
contains a non-empty string; the other is set to <br>
an empty string.</p>

<p style="margin-top: 1em">If mparam is also supplied,
input attempts to handle mouse input. This is only available
with the ncurses library; mouse handling can be detected by
checking for the exit <br>
status of &lsquo;zcurses mouse&rsquo; with no arguments. If
a mouse button is clicked (or double- or triple-clicked, or
pressed or released with a configurable delay from being
<br>
clicked) then kparam is set to the string MOUSE, and mparam
is set to an array consisting of the following elements:
<br>
- An identifier to discriminate different input devices;
this is only rarely useful. <br>
- The x, y and z coordinates of the mouse click relative to
the full screen, as three elements in that order (i.e. the y
coordinate is, unusually, after the x coordi&acirc; <br>
nate). The z coordinate is only available for a few unusual
input devices and is otherwise set to zero. <br>
- Any events that occurred as separate items; usually there
will be just one. An event consists of PRESSED, RELEASED,
CLICKED, DOUBLE_CLICKED or TRIPLE_CLICKED fol&acirc; <br>
lowed immediately (in the same element) by the number of the
button. <br>
- If the shift key was pressed, the string SHIFT. <br>
- If the control key was pressed, the string CTRL. <br>
- If the alt key was pressed, the string ALT.</p>

<p style="margin-top: 1em">Not all mouse events may be
passed through to the terminal window; most terminal
emulators handle some mouse events themselves. Note that the
ncurses manual implies that <br>
using input both with and without mouse handling may cause
the mouse cursor to appear and disappear.</p>

<p style="margin-top: 1em">The subcommand mouse can be used
to configure the use of the mouse. There is no window
argument; mouse options are global. &lsquo;zcurses
mouse&rsquo; with no arguments returns sta&acirc; <br>
tus 0 if mouse handling is possible, else status 1.
Otherwise, the possible arguments (which may be combined on
the same command line) are as follows. delay num sets the
<br>
maximum delay in milliseconds between press and release
events to be considered as a click; the value 0 disables
click resolution, and the default is one sixth of a
sec&acirc; <br>
ond. motion proceeded by an optional &lsquo;+&rsquo; (the
default) or - turns on or off reporting of mouse motion in
addition to clicks, presses and releases, which are always
<br>
reported. However, it appears reports for mouse motion are
not currently implemented.</p>

<p style="margin-top: 1em">The subcommand timeout specifies
a timeout value for input from targetwin. If intval is
negative, &lsquo;zcurses input&rsquo; waits indefinitely for
a character to be typed; this is <br>
the default. If intval is zero, &lsquo;zcurses input&rsquo;
returns immediately; if there is typeahead it is returned,
else no input is done and status 1 is returned. If intval is
<br>
positive, &lsquo;zcurses input&rsquo; waits intval
milliseconds for input and if there is none at the end of
that period returns status 1.</p>

<p style="margin-top: 1em">The subcommand querychar queries
the character at the current cursor position. The return
values are stored in the array named param if supplied, else
in the array reply. <br>
The first value is the character (which may be a multibyte
character if the system supports them); the second is the
color pair in the usual fg_col/bg_col notation, or 0 <br>
if color is not supported. Any attributes other than color
that apply to the character, as set with the subcommand
attr, appear as additional elements.</p>

<p style="margin-top: 1em">Parameters <br>
ZCURSES_COLORS <br>
Readonly integer. The maximum number of colors the terminal
supports. This value is initialised by the curses library
and is not available until the first time zcurses <br>
init is run.</p>

<p style="margin-top: 1em">ZCURSES_COLOR_PAIRS <br>
Readonly integer. The maximum number of color pairs
fg_col/bg_col that may be defined in &lsquo;zcurses
attr&rsquo; commands; note this limit applies to all color
pairs that have <br>
been used whether or not they are currently active. This
value is initialised by the curses library and is not
available until the first time zcurses init is run.</p>

<p style="margin-top: 1em">zcurses_attrs <br>
Readonly array. The attributes supported by zsh/curses;
available as soon as the module is loaded.</p>

<p style="margin-top: 1em">zcurses_colors <br>
Readonly array. The colors supported by zsh/curses;
available as soon as the module is loaded.</p>

<p style="margin-top: 1em">zcurses_keycodes <br>
Readonly array. The values that may be returned in the
second parameter supplied to &lsquo;zcurses input&rsquo; in
the order in which they are defined internally by curses.
Not all <br>
function keys are listed, only F0; curses reserves space for
F0 up to F63.</p>

<p style="margin-top: 1em">zcurses_windows <br>
Readonly array. The current list of windows, i.e. all
windows that have been created with &lsquo;zcurses
addwin&rsquo; and not removed with &lsquo;zcurses
delwin&rsquo;.</p>

<p style="margin-top: 1em">THE ZSH/DATETIME MODULE <br>
The zsh/datetime module makes available one builtin
command:</p>

<p style="margin-top: 1em">strftime [ -s scalar ] format
epochtime <br>
strftime -r [ -q ] [ -s scalar ] format timestring <br>
Output the date denoted by epochtime in the format
specified.</p>

<p style="margin-top: 1em">With the option -r (reverse),
use the format format to parse the input string timestring
and output the number of seconds since the epoch at which
the time occurred. If <br>
no timezone is parsed, the current timezone is used; other
parameters are set to zero if not present. If timestring
does not match format the command returns status 1; it <br>
will additionally print an error message unless the option
-q (quiet) is given. If timestring matches format but not
all characters in timestring were used, the conver&acirc;
<br>
sion succeeds; however, a warning is issued unless the
option -q is given. The matching is implemented by the
system function strptime; see strptime(3). This means that
<br>
zsh format extensions are not available, however for reverse
lookup they are not required. If the function is not
implemented, the command returns status 2 and (unless -q
<br>
is given) prints a message.</p>

<p style="margin-top: 1em">If -s scalar is given, assign
the date string (or epoch time in seconds if -r is given) to
scalar instead of printing it.</p>

<p style="margin-top: 1em">The zsh/datetime module makes
available several parameters; all are readonly:</p>

<p style="margin-top: 1em">EPOCHREALTIME <br>
A floating point value representing the number of seconds
since the epoch. The notional accuracy is to nanoseconds if
the clock_gettime call is available and to microsec&acirc;
<br>
onds otherwise, but in practice the range of double
precision floating point and shell scheduling latencies may
be significant effects.</p>

<p style="margin-top: 1em">EPOCHSECONDS <br>
An integer value representing the number of seconds since
the epoch.</p>

<p style="margin-top: 1em">epochtime <br>
An array value containing the number of seconds since the
epoch in the first element and the remainder of the time
since the epoch in nanoseconds in the second element. <br>
To ensure the two elements are consistent the array should
be copied or otherwise referenced as a single substitution
before the values are used. The following idiom may <br>
be used:</p>

<p style="margin-top: 1em">for secs nsecs in $epochtime; do
<br>
... <br>
done</p>

<p style="margin-top: 1em">THE ZSH/DELTOCHAR MODULE <br>
The zsh/deltochar module makes available two ZLE
functions:</p>

<p style="margin-top: 1em">delete-to-char <br>
Read a character from the keyboard, and delete from the
cursor position up to and including the next (or, with
repeat count n, the nth) instance of that character.
Nega&acirc; <br>
tive repeat counts mean delete backwards.</p>

<p style="margin-top: 1em">zap-to-char <br>
This behaves like delete-to-char, except that the final
occurrence of the character itself is not deleted.</p>

<p style="margin-top: 1em">THE ZSH/EXAMPLE MODULE <br>
The zsh/example module makes available one builtin
command:</p>

<p style="margin-top: 1em">example [ -flags ] [ args ... ]
<br>
Displays the flags and arguments it is invoked with.</p>

<p style="margin-top: 1em">The purpose of the module is to
serve as an example of how to write a module.</p>

<p style="margin-top: 1em">THE ZSH/FILES MODULE <br>
The zsh/files module makes available some common commands
for file manipulation as builtins; these commands are
probably not needed for many normal situations but can be
useful <br>
in emergency recovery situations with constrained resources.
The commands do not implement all features now required by
relevant standards committees.</p>

<p style="margin-top: 1em">For all commands, a variant
beginning zf_ is also available and loaded automatically.
Using the features capability of zmodload will let you load
only those names you want.</p>

<p style="margin-top: 1em">The commands loaded by default
are:</p>

<p style="margin-top: 1em">chgrp [ -hRs ] group filename
... <br>
Changes group of files specified. This is equivalent to
chown with a user-spec argument of &lsquo;:group&rsquo;.</p>

<p style="margin-top: 1em">chown [ -hRs ] user-spec
filename ... <br>
Changes ownership and group of files specified.</p>

<p style="margin-top: 1em">The user-spec can be in four
forms:</p>

<p style="margin-top: 1em">user change owner to user; do
not change group <br>
user:: change owner to user; do not change group <br>
user: change owner to user; change group to user&rsquo;s
primary group <br>
user:group <br>
change owner to user; change group to group <br>
:group do not change owner; change group to group</p>

<p style="margin-top: 1em">In each case, the
&lsquo;:&rsquo; may instead be a &lsquo;.&rsquo;. The rule
is that if there is a &lsquo;:&rsquo; then the separator is
&lsquo;:&rsquo;, otherwise if there is a &lsquo;.&rsquo;
then the separator is &lsquo;.&rsquo;, otherwise <br>
there is no separator.</p>

<p style="margin-top: 1em">Each of user and group may be
either a username (or group name, as appropriate) or a
decimal user ID (group ID). Interpretation as a name takes
precedence, if there is an <br>
all-numeric username (or group name).</p>

<p style="margin-top: 1em">If the target is a symbolic
link, the -h option causes chown to set the ownership of the
link instead of its target.</p>

<p style="margin-top: 1em">The -R option causes chown to
recursively descend into directories, changing the ownership
of all files in the directory after changing the ownership
of the directory <br>
itself.</p>

<p style="margin-top: 1em">The -s option is a zsh extension
to chown functionality. It enables paranoid behaviour,
intended to avoid security problems involving a chown being
tricked into affecting <br>
files other than the ones intended. It will refuse to follow
symbolic links, so that (for example) &lsquo;&lsquo;chown
luser /tmp/foo/passwd&rsquo;&rsquo; can&rsquo;t accidentally
chown /etc/passwd if <br>
/tmp/foo happens to be a link to /etc. It will also check
where it is after leaving directories, so that a recursive
chown of a deep directory tree can&rsquo;t end up
recur&acirc; <br>
sively chowning /usr as a result of directories being moved
up the tree.</p>

<p style="margin-top: 1em">ln [ -dfhins ] filename dest
<br>
ln [ -dfhins ] filename ... dir <br>
Creates hard (or, with -s, symbolic) links. In the first
form, the specified destination is created, as a link to the
specified filename. In the second form, each of the <br>
filenames is taken in turn, and linked to a pathname in the
specified directory that has the same last pathname
component.</p>

<p style="margin-top: 1em">Normally, ln will not attempt to
create hard links to directories. This check can be
overridden using the -d option. Typically only the
super-user can actually succeed <br>
in creating hard links to directories. This does not apply
to symbolic links in any case.</p>

<p style="margin-top: 1em">By default, existing files
cannot be replaced by links. The -i option causes the user
to be queried about replacing existing files. The -f option
causes existing files <br>
to be silently deleted, without querying. -f takes
precedence.</p>

<p style="margin-top: 1em">The -h and -n options are
identical and both exist for compatibility; either one
indicates that if the target is a symlink then it should not
be dereferenced. Typically <br>
this is used in combination with -sf so that if an existing
link points to a directory then it will be removed, instead
of followed. If this option is used with multiple <br>
filenames and the target is a symbolic link pointing to a
directory then the result is an error.</p>

<p style="margin-top: 1em">mkdir [ -p ] [ -m mode ] dir ...
<br>
Creates directories. With the -p option, non-existing parent
directories are first created if necessary, and there will
be no complaint if the directory already exists. <br>
The -m option can be used to specify (in octal) a set of
file permissions for the created directories, otherwise mode
777 modified by the current umask (see umask(2)) is <br>
used.</p>

<p style="margin-top: 1em">mv [ -fi ] filename dest <br>
mv [ -fi ] filename ... dir <br>
Moves files. In the first form, the specified filename is
moved to the specified destination. In the second form, each
of the filenames is taken in turn, and moved to a <br>
pathname in the specified directory that has the same last
pathname component.</p>

<p style="margin-top: 1em">By default, the user will be
queried before replacing any file that the user cannot write
to, but writable files will be silently removed. The -i
option causes the user <br>
to be queried about replacing any existing files. The -f
option causes any existing files to be silently deleted,
without querying. -f takes precedence.</p>

<p style="margin-top: 1em">Note that this mv will not move
files across devices. Historical versions of mv, when actual
renaming is impossible, fall back on copying and removing
files; if this be&acirc; <br>
haviour is desired, use cp and rm manually. This may change
in a future version.</p>

<p style="margin-top: 1em">rm [ -dfirs ] filename ... <br>
Removes files and directories specified.</p>

<p style="margin-top: 1em">Normally, rm will not remove
directories (except with the -r option). The -d option
causes rm to try removing directories with unlink (see
unlink(2)), the same method <br>
used for files. Typically only the super-user can actually
succeed in unlinking directories in this way. -d takes
precedence over -r.</p>

<p style="margin-top: 1em">By default, the user will be
queried before removing any file that the user cannot write
to, but writable files will be silently removed. The -i
option causes the user to <br>
be queried about removing any files. The -f option causes
files to be silently deleted, without querying, and
suppresses all error indications. -f takes precedence.</p>

<p style="margin-top: 1em">The -r option causes rm to
recursively descend into directories, deleting all files in
the directory before removing the directory with the rmdir
system call (see <br>
rmdir(2)).</p>

<p style="margin-top: 1em">The -s option is a zsh extension
to rm functionality. It enables paranoid behaviour, intended
to avoid common security problems involving a root-run rm
being tricked into <br>
removing files other than the ones intended. It will refuse
to follow symbolic links, so that (for example)
&lsquo;&lsquo;rm /tmp/foo/passwd&rsquo;&rsquo; can&rsquo;t
accidentally remove /etc/passwd <br>
if /tmp/foo happens to be a link to /etc. It will also check
where it is after leaving directories, so that a recursive
removal of a deep directory tree can&rsquo;t end up <br>
recursively removing /usr as a result of directories being
moved up the tree.</p>

<p style="margin-top: 1em">rmdir dir ... <br>
Removes empty directories specified.</p>

<p style="margin-top: 1em">sync Calls the system call of
the same name (see sync(2)), which flushes dirty buffers to
disk. It might return before the I/O has actually been
completed.</p>

<p style="margin-top: 1em">THE ZSH/LANGINFO MODULE <br>
The zsh/langinfo module makes available one parameter:</p>

<p style="margin-top: 1em">langinfo <br>
An associative array that maps langinfo elements to their
values.</p>

<p style="margin-top: 1em">Your implementation may support
a number of the following keys:</p>

<p style="margin-top: 1em">CODESET, D_T_FMT, D_FMT, T_FMT,
RADIXCHAR, THOUSEP, YESEXPR, NOEXPR, CRNCYSTR, ABDAY_{1..7},
DAY_{1..7}, ABMON_{1..12}, MON_{1..12}, T_FMT_AMPM, AM_STR,
PM_STR, ERA, <br>
ERA_D_FMT, ERA_D_T_FMT, ERA_T_FMT, ALT_DIGITS</p>

<p style="margin-top: 1em">THE ZSH/MAPFILE MODULE <br>
The zsh/mapfile module provides one special associative
array parameter of the same name.</p>

<p style="margin-top: 1em">mapfile <br>
This associative array takes as keys the names of files; the
resulting value is the content of the file. The value is
treated identically to any other text coming from a <br>
parameter. The value may also be assigned to, in which case
the file in question is written (whether or not it
originally existed); or an element may be unset, which will
<br>
delete the file in question. For example, &lsquo;vared
mapfile[myfile]&rsquo; works as expected, editing the file
&lsquo;myfile&rsquo;.</p>

<p style="margin-top: 1em">When the array is accessed as a
whole, the keys are the names of files in the current
directory, and the values are empty (to save a huge overhead
in memory). Thus <br>
${(k)mapfile} has the same affect as the glob operator *(D),
since files beginning with a dot are not special. Care must
be taken with expressions such as rm ${(k)map&acirc; <br>
file}, which will delete every file in the current directory
without the usual &lsquo;rm *&rsquo; test.</p>

<p style="margin-top: 1em">The parameter mapfile may be
made read-only; in that case, files referenced may not be
written or deleted.</p>

<p style="margin-top: 1em">A file may conveniently be read
into an array as one line per element with the form
&lsquo;array=(&quot;${(f)mapfile[filename]}&quot;)&rsquo;.
The double quotes are necessary to prevent empty <br>
lines from being removed.</p>

<p style="margin-top: 1em">Limitations <br>
Although reading and writing of the file in question is
efficiently handled, zsh&rsquo;s internal memory management
may be arbitrarily baroque; however, mapfile is usually very
much <br>
more efficient than anything involving a loop. Note in
particular that the whole contents of the file will always
reside physically in memory when accessed (possibly multiple
<br>
times, due to standard parameter substitution operations).
In particular, this means handling of sufficiently long
files (greater than the machine&rsquo;s swap space, or than
the <br>
range of the pointer type) will be incorrect.</p>

<p style="margin-top: 1em">No errors are printed or flagged
for non-existent, unreadable, or unwritable files, as the
parameter mechanism is too low in the shell execution
hierarchy to make this conve&acirc; <br>
nient.</p>

<p style="margin-top: 1em">It is unfortunate that the
mechanism for loading modules does not yet allow the user to
specify the name of the shell parameter to be given the
special behaviour.</p>

<p style="margin-top: 1em">THE ZSH/MATHFUNC MODULE <br>
The zsh/mathfunc module provides standard mathematical
functions for use when evaluating mathematical formulae. The
syntax agrees with normal C and FORTRAN conventions, for
<br>
example,</p>

<p style="margin-top: 1em">(( f = sin(0.3) ))</p>

<p style="margin-top: 1em">assigns the sine of 0.3 to the
parameter f.</p>

<p style="margin-top: 1em">Most functions take floating
point arguments and return a floating point value. However,
any necessary conversions from or to integer type will be
performed automatically by the <br>
shell. Apart from atan with a second argument and the abs,
int and float functions, all functions behave as noted in
the manual page for the corresponding C function, except
<br>
that any arguments out of range for the function in question
will be detected by the shell and an error reported.</p>

<p style="margin-top: 1em">The following functions take a
single floating point argument: acos, acosh, asin, asinh,
atan, atanh, cbrt, ceil, cos, cosh, erf, erfc, exp, expm1,
fabs, floor, gamma, j0, j1, <br>
lgamma, log, log10, log1p, logb, sin, sinh, sqrt, tan, tanh,
y0, y1. The atan function can optionally take a second
argument, in which case it behaves like the C function
atan2. <br>
The ilogb function takes a single floating point argument,
but returns an integer.</p>

<p style="margin-top: 1em">The function signgam takes no
arguments, and returns an integer, which is the C variable
of the same name, as described in gamma(3). Note that it is
therefore only useful imme&acirc; <br>
diately after a call to gamma or lgamma. Note also that
&lsquo;signgam(RPAR&rsquo; and &lsquo;signgam&rsquo; are
distinct expressions.</p>

<p style="margin-top: 1em">The following functions take two
floating point arguments: copysign, fmod, hypot,
nextafter.</p>

<p style="margin-top: 1em">The following take an integer
first argument and a floating point second argument: jn,
yn.</p>

<p style="margin-top: 1em">The following take a floating
point first argument and an integer second argument: ldexp,
scalb.</p>

<p style="margin-top: 1em">The function abs does not
convert the type of its single argument; it returns the
absolute value of either a floating point number or an
integer. The functions float and int <br>
convert their arguments into a floating point or integer
value (by truncation) respectively.</p>

<p style="margin-top: 1em">Note that the C pow function is
available in ordinary math evaluation as the
&lsquo;**&rsquo; operator and is not provided here.</p>

<p style="margin-top: 1em">The function rand48 is available
if your system&rsquo;s mathematical library has the function
erand48(3). It returns a pseudo-random floating point number
between 0 and 1. It takes a <br>
single string optional argument.</p>

<p style="margin-top: 1em">If the argument is not present,
the random number seed is initialised by three calls to the
rand(3) function --- this produces the same random numbers
as the next three values of <br>
$RANDOM.</p>

<p style="margin-top: 1em">If the argument is present, it
gives the name of a scalar parameter where the current
random number seed will be stored. On the first call, the
value must contain at least <br>
twelve hexadecimal digits (the remainder of the string is
ignored), or the seed will be initialised in the same manner
as for a call to rand48 with no argument. Subsequent calls
<br>
to rand48(param) will then maintain the seed in the
parameter param as a string of twelve hexadecimal digits,
with no base signifier. The random number sequences for
different <br>
parameters are completely independent, and are also
independent from that used by calls to rand48 with no
argument.</p>

<p style="margin-top: 1em">For example, consider</p>

<p style="margin-top: 1em">print $(( rand48(seed) )) <br>
print $(( rand48() )) <br>
print $(( rand48(seed) ))</p>

<p style="margin-top: 1em">Assuming $seed does not exist,
it will be initialised by the first call. In the second
call, the default seed is initialised; note, however, that
because of the properties of <br>
rand() there is a correlation between the seeds used for the
two initialisations, so for more secure uses, you should
generate your own 12-byte seed. The third call returns to
<br>
the same sequence of random numbers used in the first call,
unaffected by the intervening rand48().</p>

<p style="margin-top: 1em">THE ZSH/NEWUSER MODULE <br>
The zsh/newuser module is loaded at boot if it is available,
the RCS option is set, and the PRIVILEGED option is not set
(all three are true by default). This takes place
imme&acirc; <br>
diately after commands in the global zshenv file (typically
/etc/zshenv), if any, have been executed. If the module is
not available it is silently ignored by the shell; the <br>
module may safely be removed from $MODULE_PATH by the
administrator if it is not required.</p>

<p style="margin-top: 1em">On loading, the module tests if
any of the start-up files .zshenv, .zprofile, .zshrc or
.zlogin exist in the directory given by the environment
variable ZDOTDIR, or the user&rsquo;s <br>
home directory if that is not set. The test is not performed
and the module halts processing if the shell was in an
emulation mode (i.e. had been invoked as some other shell
<br>
than zsh).</p>

<p style="margin-top: 1em">If none of the start-up files
were found, the module then looks for the file newuser first
in a sitewide directory, usually the parent directory of the
site-functions directory, <br>
and if that is not found the module searches in a
version-specific directory, usually the parent of the
functions directory containing version-specific functions.
(These direc&acirc; <br>
tories can be configured when zsh is built using the
--enable-site-scriptdir=dir and --enable-scriptdir=dir flags
to configure, respectively; the defaults are
prefix/share/zsh <br>
and prefix/share/zsh/$ZSH_VERSION where the default prefix
is /usr/local.)</p>

<p style="margin-top: 1em">If the file newuser is found, it
is then sourced in the same manner as a start-up file. The
file is expected to contain code to install start-up files
for the user, however any <br>
valid shell code will be executed.</p>

<p style="margin-top: 1em">The zsh/newuser module is then
unconditionally unloaded.</p>

<p style="margin-top: 1em">Note that it is possible to
achieve exactly the same effect as the zsh/newuser module by
adding code to /etc/zshenv. The module exists simply to
allow the shell to make arrange&acirc; <br>
ments for new users without the need for intervention by
package maintainers and system administrators.</p>

<p style="margin-top: 1em">The script supplied with the
module invokes the shell function zsh-newuser-install. This
may be invoked directly by the user even if the zsh/newuser
module is disabled. Note, <br>
however, that if the module is not installed the function
will not be installed either. The function is documented in
the section User Configuration Functions in
zshcontrib(1).</p>

<p style="margin-top: 1em">THE ZSH/PARAMETER MODULE <br>
The zsh/parameter module gives access to some of the
internal hash tables used by the shell by defining some
special parameters.</p>

<p style="margin-top: 1em">options <br>
The keys for this associative array are the names of the
options that can be set and unset using the setopt and
unsetopt builtins. The value of each key is either the <br>
string on if the option is currently set, or the string off
if the option is unset. Setting a key to one of these
strings is like setting or unsetting the option,
respec&acirc; <br>
tively. Unsetting a key in this array is like setting it to
the value off.</p>

<p style="margin-top: 1em">commands <br>
This array gives access to the command hash table. The keys
are the names of external commands, the values are the
pathnames of the files that would be executed when the <br>
command would be invoked. Setting a key in this array
defines a new entry in this table in the same way as with
the hash builtin. Unsetting a key as in &lsquo;unset
&quot;com&acirc; <br>
mands[foo]&quot;&rsquo; removes the entry for the given key
from the command hash table.</p>

<p style="margin-top: 1em">functions <br>
This associative array maps names of enabled functions to
their definitions. Setting a key in it is like defining a
function with the name given by the key and the body <br>
given by the value. Unsetting a key removes the definition
for the function named by the key.</p>

<p style="margin-top: 1em">dis_functions <br>
Like functions but for disabled functions.</p>

<p style="margin-top: 1em">builtins <br>
This associative array gives information about the builtin
commands currently enabled. The keys are the names of the
builtin commands and the values are either
&lsquo;undefined&rsquo; <br>
for builtin commands that will automatically be loaded from
a module if invoked or &lsquo;defined&rsquo; for builtin
commands that are already loaded.</p>

<p style="margin-top: 1em">dis_builtins <br>
Like builtins but for disabled builtin commands.</p>

<p style="margin-top: 1em">reswords <br>
This array contains the enabled reserved words.</p>

<p style="margin-top: 1em">dis_reswords <br>
Like reswords but for disabled reserved words.</p>

<p style="margin-top: 1em">aliases <br>
This maps the names of the regular aliases currently enabled
to their expansions.</p>

<p style="margin-top: 1em">dis_aliases <br>
Like aliases but for disabled regular aliases.</p>

<p style="margin-top: 1em">galiases <br>
Like aliases, but for global aliases.</p>

<p style="margin-top: 1em">dis_galiases <br>
Like galiases but for disabled global aliases.</p>

<p style="margin-top: 1em">saliases <br>
Like raliases, but for suffix aliases.</p>

<p style="margin-top: 1em">dis_saliases <br>
Like saliases but for disabled suffix aliases.</p>

<p style="margin-top: 1em">parameters <br>
The keys in this associative array are the names of the
parameters currently defined. The values are strings
describing the type of the parameter, in the same format
used <br>
by the t parameter flag, see zshexpn(1) . Setting or
unsetting keys in this array is not possible.</p>

<p style="margin-top: 1em">modules <br>
An associative array giving information about modules. The
keys are the names of the modules loaded, registered to be
autoloaded, or aliased. The value says which state <br>
the named module is in and is one of the strings
&lsquo;loaded&rsquo;, &lsquo;autoloaded&rsquo;, or
&lsquo;alias:name&rsquo;, where name is the name the module
is aliased to.</p>

<p style="margin-top: 1em">Setting or unsetting keys in
this array is not possible.</p>

<p style="margin-top: 1em">dirstack <br>
A normal array holding the elements of the directory stack.
Note that the output of the dirs builtin command includes
one more directory, the current working directory.</p>

<p style="margin-top: 1em">history <br>
This associative array maps history event numbers to the
full history lines.</p>

<p style="margin-top: 1em">historywords <br>
A special array containing the words stored in the
history.</p>

<p style="margin-top: 1em">jobdirs <br>
This associative array maps job numbers to the directories
from which the job was started (which may not be the current
directory of the job).</p>

<p style="margin-top: 1em">The keys of the associative
arrays are usually valid job numbers, and these are the
values output with, for example, ${(k)jobdirs}. Non-numeric
job references may be used <br>
when looking up a value; for example, ${jobdirs[%+]} refers
to the current job.</p>

<p style="margin-top: 1em">jobtexts <br>
This associative array maps job numbers to the texts of the
command lines that were used to start the jobs.</p>

<p style="margin-top: 1em">Handling of the keys of the
associative array is as described for jobdirs above.</p>

<p style="margin-top: 1em">jobstates <br>
This associative array gives information about the states of
the jobs currently known. The keys are the job numbers and
the values are strings of the form <br>
&lsquo;job-state:mark:pid=state...&rsquo;. The job-state
gives the state the whole job is currently in, one of
&lsquo;running&rsquo;, &lsquo;suspended&rsquo;, or
&lsquo;done&rsquo;. The mark is &lsquo;+&rsquo; for the
current job, <br>
&lsquo;-&rsquo; for the previous job and empty otherwise.
This is followed by one &lsquo;pid=state&rsquo; for every
process in the job. The pids are, of course, the process IDs
and the state <br>
describes the state of that process.</p>

<p style="margin-top: 1em">Handling of the keys of the
associative array is as described for jobdirs above.</p>

<p style="margin-top: 1em">nameddirs <br>
This associative array maps the names of named directories
to the pathnames they stand for.</p>

<p style="margin-top: 1em">userdirs <br>
This associative array maps user names to the pathnames of
their home directories.</p>

<p style="margin-top: 1em">usergroups <br>
This associative array maps names of system groups of which
the current user is a member to the corresponding group
identifiers. The contents are the same as the groups <br>
output by the id command.</p>

<p style="margin-top: 1em">funcfiletrace <br>
This array contains the absolute line numbers and
corresponding file names for the point where the current
function, sourced file, or (if EVAL_LINENO is set) eval
command <br>
was called. The array is of the same length as
funcsourcetrace and functrace, but differs from
funcsourcetrace in that the line and file are the point of
call, not the <br>
point of definition, and differs from functrace in that all
values are absolute line numbers in files, rather than
relative to the start of a function, if any.</p>

<p style="margin-top: 1em">funcsourcetrace <br>
This array contains the file names and line numbers of the
points where the functions, sourced files, and (if
EVAL_LINENO is set) eval commands currently being executed
<br>
were defined. The line number is the line where the
&lsquo;function name&rsquo; or &lsquo;name ()&rsquo;
started. In the case of an autoloaded function the line
number is reported as zero. <br>
The format of each element is filename:lineno. For functions
autoloaded from a file in native zsh format, where only the
body of the function occurs in the file, or for <br>
files that have been executed by the source or
&lsquo;.&rsquo; builtins, the trace information is shown as
filename:0, since the entire file is the definition.</p>

<p style="margin-top: 1em">Most users will be interested in
the information in the funcfiletrace array instead.</p>

<p style="margin-top: 1em">funcstack <br>
This array contains the names of the functions, sourced
files, and (if EVAL_LINENO is set) eval commands. currently
being executed. The first element is the name of the <br>
function using the parameter.</p>

<p style="margin-top: 1em">functrace <br>
This array contains the names and line numbers of the
callers corresponding to the functions currently being
executed. The format of each element is name:lineno. Callers
<br>
are also shown for sourced files; the caller is the point
where the source or &lsquo;.&rsquo; command was
executed.</p>

<p style="margin-top: 1em">THE ZSH/PCRE MODULE <br>
The zsh/pcre module makes some commands available as
builtins:</p>

<p style="margin-top: 1em">pcre_compile [ -aimxs ] PCRE
<br>
Compiles a perl-compatible regular expression.</p>

<p style="margin-top: 1em">Option -a will force the pattern
to be anchored. Option -i will compile a case-insensitive
pattern. Option -m will compile a multi-line pattern; that
is, ^ and $ will <br>
match newlines within the pattern. Option -x will compile an
extended pattern, wherein whitespace and # comments are
ignored. Option -s makes the dot metacharacter match <br>
all characters, including those that indicate newline.</p>

<p style="margin-top: 1em">pcre_study <br>
Studies the previously-compiled PCRE which may result in
faster matching.</p>

<p style="margin-top: 1em">pcre_match [ -v var ] [ -a arr ]
[ -n offset ] [ -b ] string <br>
Returns successfully if string matches the
previously-compiled PCRE.</p>

<p style="margin-top: 1em">Upon successful match, if the
expression captures substrings within parentheses,
pcre_match will set the array $match to those substrings,
unless the -a option is given, <br>
in which case it will set the array arr. Similarly, the
variable MATCH will be set to the entire matched portion of
the string, unless the -v option is given, in which <br>
case the variable var will be set. No variables are altered
if there is no successful match. A -n option starts
searching for a match from the byte offset position in <br>
string. If the -b option is given, the variable ZPCRE_OP
will be set to an offset pair string, representing the byte
offset positions of the entire matched portion within <br>
the string. For example, a ZPCRE_OP set to &quot;32 45&quot;
indicates that the matched portion began on byte offset 32
and ended on byte offset 44. Here, byte offset position 45
<br>
is the position directly after the matched portion. Keep in
mind that the byte position isn&rsquo;t necessarily the same
as the character position when UTF-8 characters are <br>
involved. Consequently, the byte offset positions are only
to be relied on in the context of using them for subsequent
searches on string, using an offset position as an <br>
argument to the -n option. This is mostly used to implement
the &quot;find all non-overlapping matches&quot;
functionality.</p>

<p style="margin-top: 1em">A simple example of &quot;find
all non-overlapping matches&quot;:</p>

<p style="margin-top: 1em">string=&quot;The following zip
codes: 78884 90210 99513&quot; <br>
pcre_compile -m &quot;{5}&quot; <br>
accum=() <br>
pcre_match -b -- $string <br>
while [[ $? -eq 0 ]] do <br>
b=($=ZPCRE_OP) <br>
accum+=$MATCH <br>
pcre_match -b -n $b[2] -- $string <br>
done <br>
print -l $accum</p>

<p style="margin-top: 1em">The zsh/pcre module makes
available the following test condition: <br>
expr -pcre-match pcre <br>
Matches a string against a perl-compatible regular
expression.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">[[ &quot;$text&quot; -pcre-match
^d+$ ]] &amp;&amp; print text variable contains only
&quot;d&rsquo;s&quot;.</p>

<p style="margin-top: 1em">THE ZSH/REGEX MODULE <br>
The zsh/regex module makes available the following test
condition: <br>
expr -regex-match regex <br>
Matches a string against a POSIX extended regular
expression. On successful match, matched portion of the
string will normally be placed in the MATCH variable. If
there <br>
are any capturing parentheses within the regex, then the
match array variable will contain those. If the match is not
successful, then the variables will not be altered.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">[[ alphabetical -regex-match
^a([^a]+)a([^a]+)a ]] &amp;&amp; <br>
print -l $MATCH X $match</p>

<p style="margin-top: 1em">If the option REMATCH_PCRE is
not set, then the =~ operator will automatically load this
module as needed and will invoke the -regex-match
operator.</p>

<p style="margin-top: 1em">If BASH_REMATCH is set, then the
array BASH_REMATCH will be set instead of MATCH and
match.</p>

<p style="margin-top: 1em">THE ZSH/SCHED MODULE <br>
The zsh/sched module makes available one builtin command and
one parameter.</p>

<p style="margin-top: 1em">sched [-o] [+]hh:mm[:ss] command
... <br>
sched [-o] [+]seconds command ... <br>
sched [ -item ] <br>
Make an entry in the scheduled list of commands to execute.
The time may be specified in either absolute or relative
time, and either as hours, minutes and (optionally) <br>
seconds separated by a colon, or seconds alone. An absolute
number of seconds indicates the time since the epoch
(1970/01/01 00:00); this is useful in combination with <br>
the features in the zsh/datetime module, see the
zsh/datetime module entry in zshmodules(1).</p>

<p style="margin-top: 1em">With no arguments, prints the
list of scheduled commands. If the scheduled command has the
-o flag set, this is shown at the start of the command.</p>

<p style="margin-top: 1em">With the argument
&lsquo;-item&rsquo;, removes the given item from the list.
The numbering of the list is continuous and entries are in
time order, so the numbering can change when <br>
entries are added or deleted.</p>

<p style="margin-top: 1em">Commands are executed either
immediately before a prompt, or while the shell&rsquo;s line
editor is waiting for input. In the latter case it is useful
to be able to produce <br>
output that does not interfere with the line being edited.
Providing the option -o causes the shell to clear the
command line before the event and redraw it afterwards. <br>
This should be used with any scheduled event that produces
visible output to the terminal; it is not needed, for
example, with output that updates a terminal
emulator&rsquo;s <br>
title bar.</p>

<p style="margin-top: 1em">The sched builtin is not made
available by default when the shell starts in a mode
emulating another shell. It can be made available with the
command &lsquo;zmodload -F <br>
zsh/sched b:sched&rsquo;.</p>

<p style="margin-top: 1em">zsh_scheduled_events <br>
A readonly array corresponding to the events scheduled by
the sched builtin. The indices of the array correspond to
the numbers shown when sched is run with no arguments <br>
(provided that the KSH_ARRAYS option is not set). The value
of the array consists of the scheduled time in seconds since
the epoch (see the section &lsquo;The zsh/datetime
Mod&acirc; <br>
ule&rsquo; for facilities for using this number), followed
by a colon, followed by any options (which may be empty but
will be preceded by a &lsquo;-&rsquo; otherwise), followed
by a colon, <br>
followed by the command to be executed.</p>

<p style="margin-top: 1em">The sched builtin should be used
for manipulating the events. Note that this will have an
immediate effect on the contents of the array, so that
indices may become <br>
invalid.</p>

<p style="margin-top: 1em">THE ZSH/NET/SOCKET MODULE <br>
The zsh/net/socket module makes available one builtin
command:</p>

<p style="margin-top: 1em">zsocket [ -altv ] [ -d fd ] [
args ] <br>
zsocket is implemented as a builtin to allow full use of
shell command line editing, file I/O, and job control
mechanisms.</p>

<p style="margin-top: 1em">Outbound Connections <br>
zsocket [ -v ] [ -d fd ] filename <br>
Open a new Unix domain connection to filename. The shell
parameter REPLY will be set to the file descriptor
associated with that connection. Currently, only stream
con&acirc; <br>
nections are supported.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">Inbound Connections <br>
zsocket -l [ -v ] [ -d fd ] filename <br>
zsocket -l will open a socket listening on filename. The
shell parameter REPLY will be set to the file descriptor
associated with that listener.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">zsocket -a [ -tv ] [ -d targetfd
] listenfd <br>
zsocket -a will accept an incoming connection to the socket
associated with listenfd. The shell parameter REPLY will be
set to the file descriptor associated with the <br>
inbound connection.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">If -t is specified, zsocket will
return if no incoming connection is pending. Otherwise it
will wait for one.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">THE ZSH/STAT MODULE <br>
The zsh/stat module makes available one builtin command
under two possible names:</p>

<p style="margin-top: 1em">zstat [ -gnNolLtTrs ] [ -f fd ]
[ -H hash ] [ -A array ] [ -F fmt ] [ +element ] [ file ...
] <br>
stat ... <br>
The command acts as a front end to the stat system call (see
stat(2)). The same command is provided with two names; as
the name stat is often used by an external command <br>
it is recommended that only the zstat form of the command is
used. This can be arranged by loading the module with the
command &lsquo;zmodload -F zsh/stat b:zstat&rsquo;.</p>

<p style="margin-top: 1em">If the stat call fails, the
appropriate system error message printed and status 1 is
returned. The fields of struct stat give information about
the files provided as <br>
arguments to the command. In addition to those available
from the stat call, an extra element &lsquo;link&rsquo; is
provided. These elements are:</p>

<p style="margin-top: 1em">device The number of the device
on which the file resides.</p>

<p style="margin-top: 1em">inode The unique number of the
file on this device (&lsquo;inode&rsquo; number).</p>

<p style="margin-top: 1em">mode The mode of the file; that
is, the file&rsquo;s type and access permissions. With the
-s option, this will be returned as a string corresponding
to the first column in <br>
the display of the ls -l command.</p>

<p style="margin-top: 1em">nlink The number of hard links
to the file.</p>

<p style="margin-top: 1em">uid The user ID of the owner of
the file. With the -s option, this is displayed as a user
name.</p>

<p style="margin-top: 1em">gid The group ID of the file.
With the -s option, this is displayed as a group name.</p>

<p style="margin-top: 1em">rdev The raw device number. This
is only useful for special devices.</p>

<p style="margin-top: 1em">size The size of the file in
bytes.</p>

<p style="margin-top: 1em">atime <br>
mtime <br>
ctime The last access, modification and inode change times
of the file, respectively, as the number of seconds since
midnight GMT on 1st January, 1970. With the -s <br>
option, these are printed as strings for the local time
zone; the format can be altered with the -F option, and with
the -g option the times are in GMT.</p>

<p style="margin-top: 1em">blksize <br>
The number of bytes in one allocation block on the device on
which the file resides.</p>

<p style="margin-top: 1em">block The number of disk blocks
used by the file.</p>

<p style="margin-top: 1em">link If the file is a link and
the -L option is in effect, this contains the name of the
file linked to, otherwise it is empty. Note that if this
element is selected <br>
(&lsquo;&lsquo;zstat +link&rsquo;&rsquo;) then the -L option
is automatically used.</p>

<p style="margin-top: 1em">A particular element may be
selected by including its name preceded by a &lsquo;+&rsquo;
in the option list; only one element is allowed. The element
may be shortened to any unique <br>
set of leading characters. Otherwise, all elements will be
shown for all files.</p>

<p style="margin-top: 1em">Options:</p>

<p style="margin-top: 1em">-A array <br>
Instead of displaying the results on standard output, assign
them to an array, one struct stat element per array element
for each file in order. In this case nei&acirc; <br>
ther the name of the element nor the name of the files
appears in array unless the -t or -n options were given,
respectively. If -t is given, the element name <br>
appears as a prefix to the appropriate array element; if -n
is given, the file name appears as a separate array element
preceding all the others. Other formatting <br>
options are respected.</p>

<p style="margin-top: 1em">-H hash <br>
Similar to -A, but instead assign the values to hash. The
keys are the elements listed above. If the -n option is
provided then the name of the file is included <br>
in the hash with key name.</p>

<p style="margin-top: 1em">-f fd Use the file on file
descriptor fd instead of named files; no list of file names
is allowed in this case.</p>

<p style="margin-top: 1em">-F fmt Supplies a strftime (see
strftime(3)) string for the formatting of the time elements.
The -s option is implied.</p>

<p style="margin-top: 1em">-g Show the time elements in the
GMT time zone. The -s option is implied.</p>

<p style="margin-top: 1em">-l List the names of the type
elements (to standard output or an array as appropriate) and
return immediately; options other than -A and arguments are
ignored.</p>

<p style="margin-top: 1em">-L Perform an lstat (see
lstat(2)) rather than a stat system call. In this case, if
the file is a link, information about the link itself rather
than the target file <br>
is returned. This option is required to make the link
element useful. It&rsquo;s important to note that this is
the exact opposite from ls(1), etc.</p>

<p style="margin-top: 1em">-n Always show the names of
files. Usually these are only shown when output is to
standard output and there is more than one file in the
list.</p>

<p style="margin-top: 1em">-N Never show the names of
files.</p>

<p style="margin-top: 1em">-o If a raw file mode is
printed, show it in octal, which is more useful for human
consumption than the default of decimal. A leading zero will
be printed in this <br>
case. Note that this does not affect whether a raw or
formatted file mode is shown, which is controlled by the -r
and -s options, nor whether a mode is shown at <br>
all.</p>

<p style="margin-top: 1em">-r Print raw data (the default
format) alongside string data (the -s format); the string
data appears in parentheses after the raw data.</p>

<p style="margin-top: 1em">-s Print mode, uid, gid and the
three time elements as strings instead of numbers. In each
case the format is like that of ls -l.</p>

<p style="margin-top: 1em">-t Always show the type names
for the elements of struct stat. Usually these are only
shown when output is to standard output and no individual
element has been <br>
selected.</p>

<p style="margin-top: 1em">-T Never show the type names of
the struct stat elements.</p>

<p style="margin-top: 1em">THE ZSH/SYSTEM MODULE <br>
The zsh/system module makes available various builtin
commands and parameters.</p>

<p style="margin-top: 1em">Builtins <br>
syserror [ -e errvar ] [ -p prefix ] [ errno | errname ]
<br>
This command prints out the error message associated with
errno, a system error number, followed by a newline to
standard error.</p>

<p style="margin-top: 1em">Instead of the error number, a
name errname, for example ENOENT, may be used. The set of
names is the same as the contents of the array errnos, see
below.</p>

<p style="margin-top: 1em">If the string prefix is given,
it is printed in front of the error message, with no
intervening space.</p>

<p style="margin-top: 1em">If errvar is supplied, the
entire message, without a newline, is assigned to the
parameter names errvar and nothing is output.</p>

<p style="margin-top: 1em">A return status of 0 indicates
the message was successfully printed (although it may not be
useful if the error number was out of the system&rsquo;s
range), a return status of 1 <br>
indicates an error in the parameters, and a return status of
2 indicates the error name was not recognised (no message is
printed for this).</p>

<p style="margin-top: 1em">sysread [ -c countvar ] [ -i
infd ] [ -o outfd ] <br>
[ -s bufsize ] [ -t timeout ] [ param ] <br>
Perform a single system read from file descriptor infd, or
zero if that is not given. The result of the read is stored
in param or REPLY if that is not given. If count&acirc; <br>
var is given, the number of bytes read is assigned to the
parameter named by countvar.</p>

<p style="margin-top: 1em">The maximum number of bytes read
is bufsize or 8192 if that is not given, however the command
returns as soon as any number of bytes was successfully
read.</p>

<p style="margin-top: 1em">If timeout is given, it
specifies a timeout in seconds, which may be zero to poll
the file descriptor. This is handled by the poll system call
if available, otherwise the <br>
select system call if available.</p>

<p style="margin-top: 1em">If outfd is given, an attempt is
made to write all the bytes just read to the file descriptor
outfd. If this fails, because of a system error other than
EINTR or because <br>
of an internal zsh error during an interrupt, the bytes read
but not written are stored in the parameter named by param
if supplied (no default is used in this case), and <br>
the number of bytes read but not written is stored in the
parameter named by countvar if that is supplied. If it was
successful, countvar contains the full number of <br>
bytes transferred, as usual, and param is not set.</p>

<p style="margin-top: 1em">The error EINTR (interrupted
system call) is handled internally so that shell interrupts
are transparent to the caller. Any other error causes a
return.</p>

<p style="margin-top: 1em">The possible return statuses are
<br>
0 At least one byte of data was successfully read and, if
appropriate, written.</p>

<p style="margin-top: 1em">1 There was an error in the
parameters to the command. This is the only error for which
a message is printed to standard error.</p>

<p style="margin-top: 1em">2 There was an error on the
read, or on polling the input file descriptor for a timeout.
The parameter ERRNO gives the error.</p>

<p style="margin-top: 1em">3 Data were successfully read,
but there was an error writing them to outfd. The parameter
ERRNO gives the error.</p>

<p style="margin-top: 1em">4 The attempt to read timed out.
Note this does not set ERRNO as this is not a system
error.</p>

<p style="margin-top: 1em">5 No system error occurred, but
zero bytes were read. This usually indicates end of file.
The parameters are set according to the usual rules; no
write to outfd is <br>
attempted.</p>

<p style="margin-top: 1em">syswrite [ -c countvar ] [ -o
outfd ] data <br>
The data (a single string of bytes) are written to the file
descriptor outfd, or 1 if that is not given, using the write
system call. Multiple write operations may be <br>
used if the first does not write all the data.</p>

<p style="margin-top: 1em">If countvar is given, the number
of byte written is stored in the parameter named by
countvar; this may not be the full length of data if an
error occurred.</p>

<p style="margin-top: 1em">The error EINTR (interrupted
system call) is handled internally by retrying; otherwise an
error causes the command to return. For example, if the file
descriptor is set <br>
to non-blocking output, an error EAGAIN (on some systems,
EWOULDBLOCK) may result in the command returning early.</p>

<p style="margin-top: 1em">The return status may be 0 for
success, 1 for an error in the parameters to the command, or
2 for an error on the write; no error message is printed in
the last case, but <br>
the parameter ERRNO will reflect the error that
occurred.</p>

<p style="margin-top: 1em">zsystem flock [ -t timeout ] [
-f var ] [-er] file <br>
zsystem flock -u fd_expr <br>
The builtin zsystem&rsquo;s subcommand flock performs
advisory file locking (via the fcntl(2) system call) over
the entire contents of the given file. This form of locking
<br>
requires the processes accessing the file to cooperate; its
most obvious use is between two instances of the shell
itself.</p>

<p style="margin-top: 1em">In the first form the named
file, which must already exist, is locked by opening a file
descriptor to the file and applying a lock to the file
descriptor. The lock termi&acirc; <br>
nates when the shell process that created the lock exits; it
is therefore often convenient to create file locks within
subshells, since the lock is automatically released <br>
when the subshell exits. Status 0 is returned if the lock
succeeds, else status 1.</p>

<p style="margin-top: 1em">In the second form the file
descriptor given by the arithmetic expression fd_expr is
closed, releasing a lock. The file descriptor can be queried
by using the &lsquo;-f var&rsquo; <br>
form during the lock; on a successful lock, the shell
variable var is set to the file descriptor used for locking.
The lock will be released if the file descriptor is <br>
closed by any other means, for example using &lsquo;exec
{var}&gt;&amp;-&rsquo;; however, the form described here
performs a safety check that the file descriptor is in use
for file locking.</p>

<p style="margin-top: 1em">By default the shell waits
indefinitely for the lock to succeed. The option -t timeout
specifies a timeout for the lock in seconds; currently this
must be an integer. <br>
The shell will attempt to lock the file once a second during
this period. If the attempt times out, status 2 is
returned.</p>

<p style="margin-top: 1em">If the option -e is given, the
file descriptor for the lock is preserved when the shell
uses exec to start a new process; otherwise it is closed at
that point and the lock <br>
released.</p>

<p style="margin-top: 1em">If the option -r is given, the
lock is only for reading, otherwise it is for reading and
writing. The file descriptor is opened accordingly.</p>

<p style="margin-top: 1em">zsystem supports subcommand <br>
The builtin zsystem&rsquo;s subcommand supports tests
whether a given subcommand is supported. It returns status 0
if so, else status 1. It operates silently unless there was
<br>
a syntax error (i.e. the wrong number of arguments), in
which case status 255 is returned. Status 1 can indicate one
of two things: subcommand is known but not supported <br>
by the current operating system, or subcommand is not known
(possibly because this is an older version of the shell
before it was implemented).</p>

<p style="margin-top: 1em">Parameters <br>
errnos A readonly array of the names of errors defined on
the system. These are typically macros defined in C by
including the system header file errno.h. The index of each
<br>
name (assuming the option KSH_ARRAYS is unset) corresponds
to the error number. Error numbers num before the last known
error which have no name are given the name Enum <br>
in the array.</p>

<p style="margin-top: 1em">Note that aliases for errors are
not handled; only the canonical name is used.</p>

<p style="margin-top: 1em">sysparams <br>
A readonly associative array. The keys are: <br>
pid Returns the process ID of the current process, even in
subshells. Compare $$, which returns the process ID of the
main shell process.</p>

<p style="margin-top: 1em">ppid Returns the process ID of
the parent of the current process, even in subshells.
Compare $PPID, which returns the process ID of the parent of
the main shell process.</p>

<p style="margin-top: 1em">THE ZSH/NET/TCP MODULE <br>
The zsh/net/tcp module makes available one builtin
command:</p>

<p style="margin-top: 1em">ztcp [ -acflLtv ] [ -d fd ] [
args ] <br>
ztcp is implemented as a builtin to allow full use of shell
command line editing, file I/O, and job control
mechanisms.</p>

<p style="margin-top: 1em">If ztcp is run with no options,
it will output the contents of its session table.</p>

<p style="margin-top: 1em">If it is run with only the
option -L, it will output the contents of the session table
in a format suitable for automatic parsing. The option is
ignored if given with a <br>
command to open or close a session. The output consists of a
set of lines, one per session, each containing the following
elements separated by spaces:</p>

<p style="margin-top: 1em">File descriptor <br>
The file descriptor in use for the connection. For normal
inbound (I) and outbound (O) connections this may be read
and written by the usual shell mechanisms. <br>
However, it should only be close with &lsquo;ztcp
-c&rsquo;.</p>

<p style="margin-top: 1em">Connection type <br>
A letter indicating how the session was created:</p>

<p style="margin-top: 1em">Z A session created with the
zftp command.</p>

<p style="margin-top: 1em">L A connection opened for
listening with &lsquo;ztcp -l&rsquo;.</p>

<p style="margin-top: 1em">I An inbound connection accepted
with &lsquo;ztcp -a&rsquo;.</p>

<p style="margin-top: 1em">O An outbound connection created
with &lsquo;ztcp host ...&rsquo;.</p>

<p style="margin-top: 1em">The local host <br>
This is usually set to an all-zero IP address as the address
of the localhost is irrelevant.</p>

<p style="margin-top: 1em">The local port <br>
This is likely to be zero unless the connection is for
listening.</p>

<p style="margin-top: 1em">The remote host <br>
This is the fully qualified domain name of the peer, if
available, else an IP address. It is an all-zero IP address
for a session opened for listening.</p>

<p style="margin-top: 1em">The remote port <br>
This is zero for a connection opened for listening.</p>

<p style="margin-top: 1em">Outbound Connections <br>
ztcp [ -v ] [ -d fd ] host [ port ] <br>
Open a new TCP connection to host. If the port is omitted,
it will default to port 23. The connection will be added to
the session table and the shell parameter REPLY <br>
will be set to the file descriptor associated with that
connection.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">Inbound Connections <br>
ztcp -l [ -v ] [ -d fd ] port <br>
ztcp -l will open a socket listening on TCP port. The socket
will be added to the session table and the shell parameter
REPLY will be set to the file descriptor associ&acirc; <br>
ated with that listener.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">ztcp -a [ -tv ] [ -d targetfd ]
listenfd <br>
ztcp -a will accept an incoming connection to the port
associated with listenfd. The connection will be added to
the session table and the shell parameter REPLY will be <br>
set to the file descriptor associated with the inbound
connection.</p>

<p style="margin-top: 1em">If -d is specified, its argument
will be taken as the target file descriptor for the
connection.</p>

<p style="margin-top: 1em">If -t is specified, ztcp will
return if no incoming connection is pending. Otherwise it
will wait for one.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">Closing Connections <br>
ztcp -cf [ -v ] [ fd ] <br>
ztcp -c [ -v ] [ fd ] <br>
ztcp -c will close the socket associated with fd. The socket
will be removed from the session table. If fd is not
specified, ztcp will close everything in the session <br>
table.</p>

<p style="margin-top: 1em">Normally, sockets registered by
zftp (see zshmodules(1) ) cannot be closed this way. In
order to force such a socket closed, use -f.</p>

<p style="margin-top: 1em">In order to elicit more verbose
output, use -v.</p>

<p style="margin-top: 1em">Example <br>
Here is how to create a TCP connection between two instances
of zsh. We need to pick an unassigned port; here we use the
randomly chosen 5123.</p>

<p style="margin-top: 1em">On host1, <br>
zmodload zsh/net/tcp <br>
ztcp -l 5123 <br>
listenfd=$REPLY <br>
ztcp -a $listenfd <br>
fd=$REPLY <br>
The second from last command blocks until there is an
incoming connection.</p>

<p style="margin-top: 1em">Now create a connection from
host2 (which may, of course, be the same machine): <br>
zmodload zsh/net/tcp <br>
ztcp host1 5123 <br>
fd=$REPLY</p>

<p style="margin-top: 1em">Now on each host, $fd contains a
file descriptor for talking to the other. For example, on
host1: <br>
print This is a message &gt;&amp;$fd <br>
and on host2: <br>
read -r line &lt;&amp;$fd; print -r - $line <br>
prints &lsquo;This is a message&rsquo;.</p>

<p style="margin-top: 1em">To tidy up, on host1: <br>
ztcp -c $listenfd <br>
ztcp -c $fd <br>
and on host2 <br>
ztcp -c $fd</p>

<p style="margin-top: 1em">THE ZSH/TERMCAP MODULE <br>
The zsh/termcap module makes available one builtin
command:</p>

<p style="margin-top: 1em">echotc cap [ arg ... ] <br>
Output the termcap value corresponding to the capability
cap, with optional arguments.</p>

<p style="margin-top: 1em">The zsh/termcap module makes
available one parameter:</p>

<p style="margin-top: 1em">termcap <br>
An associative array that maps termcap capability codes to
their values.</p>

<p style="margin-top: 1em">THE ZSH/TERMINFO MODULE <br>
The zsh/terminfo module makes available one builtin
command:</p>

<p style="margin-top: 1em">echoti cap [ arg ] <br>
Output the terminfo value corresponding to the capability
cap, instantiated with arg if applicable.</p>

<p style="margin-top: 1em">The zsh/terminfo module makes
available one parameter:</p>

<p style="margin-top: 1em">terminfo <br>
An associative array that maps terminfo capability names to
their values.</p>

<p style="margin-top: 1em">THE ZSH/ZFTP MODULE <br>
The zsh/zftp module makes available one builtin command:</p>

<p style="margin-top: 1em">zftp subcommand [ args ] <br>
The zsh/zftp module is a client for FTP (file transfer
protocol). It is implemented as a builtin to allow full use
of shell command line editing, file I/O, and job con&acirc;
<br>
trol mechanisms. Often, users will access it via shell
functions providing a more powerful interface; a set is
provided with the zsh distribution and is described in <br>
zshzftpsys(1). However, the zftp command is entirely usable
in its own right.</p>

<p style="margin-top: 1em">All commands consist of the
command name zftp followed by the name of a subcommand.
These are listed below. The return status of each subcommand
is supposed to reflect <br>
the success or failure of the remote operation. See a
description of the variable ZFTP_VERBOSE for more
information on how responses from the server may be
printed.</p>

<p style="margin-top: 1em">Subcommands <br>
open host[:port] [ user [ password [ account ] ] ] <br>
Open a new FTP session to host, which may be the name of a
TCP/IP connected host or an IP number in the standard dot
notation. If the argument is in the form host:port, <br>
open a connection to TCP port port instead of the standard
FTP port 21. This may be the name of a TCP service or a
number: see the description of ZFTP_PORT below for <br>
more information.</p>

<p style="margin-top: 1em">If IPv6 addresses in colon
format are used, the host should be surrounded by quoted
square brackets to distinguish it from the port, for example
<br>
&rsquo;[fe80::203:baff:fe02:8b56]&rsquo;. For consistency
this is allowed with all forms of host.</p>

<p style="margin-top: 1em">Remaining arguments are passed
to the login subcommand. Note that if no arguments beyond
host are supplied, open will not automatically call login.
If no arguments at <br>
all are supplied, open will use the parameters set by the
params subcommand.</p>

<p style="margin-top: 1em">After a successful open, the
shell variables ZFTP_HOST, ZFTP_PORT, ZFTP_IP and
ZFTP_SYSTEM are available; see &lsquo;Variables&rsquo;
below.</p>

<p style="margin-top: 1em">login [ name [ password [
account ] ] ] <br>
user [ name [ password [ account ] ] ] <br>
Login the user name with parameters password and account.
Any of the parameters can be omitted, and will be read from
standard input if needed (name is always needed). <br>
If standard input is a terminal, a prompt for each one will
be printed on standard error and password will not be
echoed. If any of the parameters are not used, a warning
<br>
message is printed.</p>

<p style="margin-top: 1em">After a successful login, the
shell variables ZFTP_USER, ZFTP_ACCOUNT and ZFTP_PWD are
available; see &lsquo;Variables&rsquo; below.</p>

<p style="margin-top: 1em">This command may be re-issued
when a user is already logged in, and the server will first
be reinitialized for a new user.</p>

<p style="margin-top: 1em">params [ host [ user [ password
[ account ] ] ] ] <br>
params - <br>
Store the given parameters for a later open command with no
arguments. Only those given on the command line will be
remembered. If no arguments are given, the parameters <br>
currently set are printed, although the password will appear
as a line of stars; the return status is one if no
parameters were set, zero otherwise.</p>

<p style="margin-top: 1em">Any of the parameters may be
specified as a &lsquo;?&rsquo;, which may need to be quoted
to protect it from shell expansion. In this case, the
appropriate parameter will be read from <br>
stdin as with the login subcommand, including special
handling of password. If the &lsquo;?&rsquo; is followed by
a string, that is used as the prompt for reading the
parameter <br>
instead of the default message (any necessary punctuation
and whitespace should be included at the end of the prompt).
The first letter of the parameter (only) may be <br>
quoted with a &lsquo;&acute;; hence an argument
&quot;\$word&quot; guarantees that the string from the shell
parameter $word will be treated literally, whether or not it
begins with a &lsquo;?&rsquo;.</p>

<p style="margin-top: 1em">If instead a single
&lsquo;-&rsquo; is given, the existing parameters, if any,
are deleted. In that case, calling open with no arguments
will cause an error.</p>

<p style="margin-top: 1em">The list of parameters is not
deleted after a close, however it will be deleted if the
zsh/zftp module is unloaded.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">zftp params ftp.elsewhere.xx
juser &rsquo;?Password for juser: &rsquo;</p>

<p style="margin-top: 1em">will store the host
ftp.elsewhere.xx and the user juser and then prompt the user
for the corresponding password with the given prompt.</p>

<p style="margin-top: 1em">test Test the connection; if the
server has reported that it has closed the connection (maybe
due to a timeout), return status 2; if no connection was
open anyway, return sta&acirc; <br>
tus 1; else return status 0. The test subcommand is silent,
apart from messages printed by the $ZFTP_VERBOSE mechanism,
or error messages if the connection closes. There <br>
is no network overhead for this test.</p>

<p style="margin-top: 1em">The test is only supported on
systems with either the select(2) or poll(2) system calls;
otherwise the message &lsquo;not supported on this
system&rsquo; is printed instead.</p>

<p style="margin-top: 1em">The test subcommand will
automatically be called at the start of any other subcommand
for the current session when a connection is open.</p>

<p style="margin-top: 1em">cd directory <br>
Change the remote directory to directory. Also alters the
shell variable ZFTP_PWD.</p>

<p style="margin-top: 1em">cdup Change the remote directory
to the one higher in the directory tree. Note that cd ..
will also work correctly on non-UNIX systems.</p>

<p style="margin-top: 1em">dir [ args... ] <br>
Give a (verbose) listing of the remote directory. The args
are passed directly to the server. The command&rsquo;s
behaviour is implementation dependent, but a UNIX server
will <br>
typically interpret args as arguments to the ls command and
with no arguments return the result of &lsquo;ls -l&rsquo;.
The directory is listed to standard output.</p>

<p style="margin-top: 1em">ls [ args ] <br>
Give a (short) listing of the remote directory. With no
args, produces a raw list of the files in the directory, one
per line. Otherwise, up to vagaries of the server <br>
implementation, behaves similar to dir.</p>

<p style="margin-top: 1em">type [ type ] <br>
Change the type for the transfer to type, or print the
current type if type is absent. The allowed values are
&lsquo;A&rsquo; (ASCII), &lsquo;I&rsquo; (Image, i.e.
binary), or &lsquo;B&rsquo; (a synonym for <br>
&lsquo;I&rsquo;).</p>

<p style="margin-top: 1em">The FTP default for a transfer
is ASCII. However, if zftp finds that the remote host is a
UNIX machine with 8-bit byes, it will automatically switch
to using binary for <br>
file transfers upon open. This can subsequently be
overridden.</p>

<p style="margin-top: 1em">The transfer type is only passed
to the remote host when a data connection is established;
this command involves no network overhead.</p>

<p style="margin-top: 1em">ascii The same as type A.</p>

<p style="margin-top: 1em">binary The same as type I.</p>

<p style="margin-top: 1em">mode [ S | B ] <br>
Set the mode type to stream (S) or block (B). Stream mode is
the default; block mode is not widely supported.</p>

<p style="margin-top: 1em">remote files... <br>
local [ files... ] <br>
Print the size and last modification time of the remote or
local files. If there is more than one item on the list, the
name of the file is printed first. The first num&acirc; <br>
ber is the file size, the second is the last modification
time of the file in the format CCYYMMDDhhmmSS consisting of
year, month, date, hour, minutes and seconds in GMT. <br>
Note that this format, including the length, is guaranteed,
so that time strings can be directly compared via the [[
builtin&rsquo;s &lt; and &gt; operators, even if they are
too long <br>
to be represented as integers.</p>

<p style="margin-top: 1em">Not all servers support the
commands for retrieving this information. In that case, the
remote command will print nothing and return status 2,
compared with status 1 for <br>
a file not found.</p>

<p style="margin-top: 1em">The local command (but not
remote) may be used with no arguments, in which case the
information comes from examining file descriptor zero. This
is the same file as seen <br>
by a put command with no further redirection.</p>

<p style="margin-top: 1em">get file [...] <br>
Retrieve all files from the server, concatenating them and
sending them to standard output.</p>

<p style="margin-top: 1em">put file [...] <br>
For each file, read a file from standard input and send that
to the remote host with the given name.</p>

<p style="margin-top: 1em">append file [...] <br>
As put, but if the remote file already exists, data is
appended to it instead of overwriting it.</p>

<p style="margin-top: 1em">getat file point <br>
putat file point <br>
appendat file point <br>
Versions of get, put and append which will start the
transfer at the given point in the remote file. This is
useful for appending to an incomplete local file. However,
<br>
note that this ability is not universally supported by
servers (and is not quite the behaviour specified by the
standard).</p>

<p style="margin-top: 1em">delete file [...] <br>
Delete the list of files on the server.</p>

<p style="margin-top: 1em">mkdir directory <br>
Create a new directory directory on the server.</p>

<p style="margin-top: 1em">rmdir directory <br>
Delete the directory directory on the server.</p>

<p style="margin-top: 1em">rename old-name new-name <br>
Rename file old-name to new-name on the server.</p>

<p style="margin-top: 1em">site args... <br>
Send a host-specific command to the server. You will
probably only need this if instructed by the server to use
it.</p>

<p style="margin-top: 1em">quote args... <br>
Send the raw FTP command sequence to the server. You should
be familiar with the FTP command set as defined in RFC959
before doing this. Useful commands may include STAT <br>
and HELP. Note also the mechanism for returning messages as
described for the variable ZFTP_VERBOSE below, in particular
that all messages from the control connection are <br>
sent to standard error.</p>

<p style="margin-top: 1em">close <br>
quit Close the current data connection. This unsets the
shell parameters ZFTP_HOST, ZFTP_PORT, ZFTP_IP, ZFTP_SYSTEM,
ZFTP_USER, ZFTP_ACCOUNT, ZFTP_PWD, ZFTP_TYPE and <br>
ZFTP_MODE.</p>

<p style="margin-top: 1em">session [ sessname ] <br>
Allows multiple FTP sessions to be used at once. The name of
the session is an arbitrary string of characters; the
default session is called &lsquo;default&rsquo;. If this
command <br>
is called without an argument, it will list all the current
sessions; with an argument, it will either switch to the
existing session called sessname, or create a new ses&acirc;
<br>
sion of that name.</p>

<p style="margin-top: 1em">Each session remembers the
status of the connection, the set of connection-specific
shell parameters (the same set as are unset when a
connection closes, as given in the <br>
description of close), and any user parameters specified
with the params subcommand. Changing to a previous session
restores those values; changing to a new session ini&acirc;
<br>
tialises them in the same way as if zftp had just been
loaded. The name of the current session is given by the
parameter ZFTP_SESSION.</p>

<p style="margin-top: 1em">rmsession [ sessname ] <br>
Delete a session; if a name is not given, the current
session is deleted. If the current session is deleted, the
earliest existing session becomes the new current ses&acirc;
<br>
sion, otherwise the current session is not changed. If the
session being deleted is the only one, a new session called
&lsquo;default&rsquo; is created and becomes the current
ses&acirc; <br>
sion; note that this is a new session even if the session
being deleted is also called &lsquo;default&rsquo;. It is
recommended that sessions not be deleted while background
commands <br>
which use zftp are still active.</p>

<p style="margin-top: 1em">Parameters <br>
The following shell parameters are used by zftp. Currently
none of them are special.</p>

<p style="margin-top: 1em">ZFTP_TMOUT <br>
Integer. The time in seconds to wait for a network operation
to complete before returning an error. If this is not set
when the module is loaded, it will be given the <br>
default value 60. A value of zero turns off timeouts. If a
timeout occurs on the control connection it will be closed.
Use a larger value if this occurs too frequently.</p>

<p style="margin-top: 1em">ZFTP_IP <br>
Readonly. The IP address of the current connection in dot
notation.</p>

<p style="margin-top: 1em">ZFTP_HOST <br>
Readonly. The hostname of the current remote server. If the
host was opened as an IP number, ZFTP_HOST contains that
instead; this saves the overhead for a name lookup, <br>
as IP numbers are most commonly used when a nameserver is
unavailable.</p>

<p style="margin-top: 1em">ZFTP_PORT <br>
Readonly. The number of the remote TCP port to which the
connection is open (even if the port was originally
specified as a named service). Usually this is the standard
<br>
FTP port, 21.</p>

<p style="margin-top: 1em">In the unlikely event that your
system does not have the appropriate conversion functions,
this appears in network byte order. If your system is
little-endian, the port <br>
then consists of two swapped bytes and the standard port
will be reported as 5376. In that case, numeric ports passed
to zftp open will also need to be in this format.</p>

<p style="margin-top: 1em">ZFTP_SYSTEM <br>
Readonly. The system type string returned by the server in
response to an FTP SYST request. The most interesting case
is a string beginning &quot;UNIX Type: L8&quot;, which <br>
ensures maximum compatibility with a local UNIX host.</p>

<p style="margin-top: 1em">ZFTP_TYPE <br>
Readonly. The type to be used for data transfers , either
&lsquo;A&rsquo; or &lsquo;I&rsquo;. Use the type subcommand
to change this.</p>

<p style="margin-top: 1em">ZFTP_USER <br>
Readonly. The username currently logged in, if any.</p>

<p style="margin-top: 1em">ZFTP_ACCOUNT <br>
Readonly. The account name of the current user, if any. Most
servers do not require an account name.</p>

<p style="margin-top: 1em">ZFTP_PWD <br>
Readonly. The current directory on the server.</p>

<p style="margin-top: 1em">ZFTP_CODE <br>
Readonly. The three digit code of the last FTP reply from
the server as a string. This can still be read after the
connection is closed, and is not changed when the cur&acirc;
<br>
rent session changes.</p>

<p style="margin-top: 1em">ZFTP_REPLY <br>
Readonly. The last line of the last reply sent by the
server. This can still be read after the connection is
closed, and is not changed when the current session
changes.</p>

<p style="margin-top: 1em">ZFTP_SESSION <br>
Readonly. The name of the current FTP session; see the
description of the session subcommand.</p>

<p style="margin-top: 1em">ZFTP_PREFS <br>
A string of preferences for altering aspects of zftp&rsquo;s
behaviour. Each preference is a single character. The
following are defined:</p>

<p style="margin-top: 1em">P Passive: attempt to make the
remote server initiate data transfers. This is slightly more
efficient than sendport mode. If the letter S occurs later
in the <br>
string, zftp will use sendport mode if passive mode is not
available.</p>

<p style="margin-top: 1em">S Sendport: initiate transfers
by the FTP PORT command. If this occurs before any P in the
string, passive mode will never be attempted.</p>

<p style="margin-top: 1em">D Dumb: use only the bare
minimum of FTP commands. This prevents the variables
ZFTP_SYSTEM and ZFTP_PWD from being set, and will mean all
connections default to <br>
ASCII type. It may prevent ZFTP_SIZE from being set during a
transfer if the server does not send it anyway (many servers
do).</p>

<p style="margin-top: 1em">If ZFTP_PREFS is not set when
zftp is loaded, it will be set to a default of
&lsquo;PS&rsquo;, i.e. use passive mode if available,
otherwise fall back to sendport mode.</p>

<p style="margin-top: 1em">ZFTP_VERBOSE <br>
A string of digits between 0 and 5 inclusive, specifying
which responses from the server should be printed. All
responses go to standard error. If any of the numbers 1 <br>
to 5 appear in the string, raw responses from the server
with reply codes beginning with that digit will be printed
to standard error. The first digit of the three digit <br>
reply code is defined by RFC959 to correspond to:</p>

<p style="margin-top: 1em">1. A positive preliminary
reply.</p>

<p style="margin-top: 1em">2. A positive completion
reply.</p>

<p style="margin-top: 1em">3. A positive intermediate
reply.</p>

<p style="margin-top: 1em">4. A transient negative
completion reply.</p>

<p style="margin-top: 1em">5. A permanent negative
completion reply.</p>

<p style="margin-top: 1em">It should be noted that, for
unknown reasons, the reply &lsquo;Service not
available&rsquo;, which forces termination of a connection,
is classified as 421, i.e. &lsquo;transient negative&rsquo;,
<br>
an interesting interpretation of the word
&lsquo;transient&rsquo;.</p>

<p style="margin-top: 1em">The code 0 is special: it
indicates that all but the last line of multiline replies
read from the server will be printed to standard error in a
processed format. By con&acirc; <br>
vention, servers use this mechanism for sending information
for the user to read. The appropriate reply code, if it
matches the same response, takes priority.</p>

<p style="margin-top: 1em">If ZFTP_VERBOSE is not set when
zftp is loaded, it will be set to the default value 450,
i.e., messages destined for the user and all errors will be
printed. A null <br>
string is valid and specifies that no messages should be
printed.</p>

<p style="margin-top: 1em">Functions <br>
zftp_chpwd <br>
If this function is set by the user, it is called every time
the directory changes on the server, including when a user
is logged in, or when a connection is closed. In <br>
the last case, $ZFTP_PWD will be unset; otherwise it will
reflect the new directory.</p>

<p style="margin-top: 1em">zftp_progress <br>
If this function is set by the user, it will be called
during a get, put or append operation each time sufficient
data has been received from the host. During a get, the <br>
data is sent to standard output, so it is vital that this
function should write to standard error or directly to the
terminal, not to standard output.</p>

<p style="margin-top: 1em">When it is called with a
transfer in progress, the following additional shell
parameters are set:</p>

<p style="margin-top: 1em">ZFTP_FILE <br>
The name of the remote file being transferred from or
to.</p>

<p style="margin-top: 1em">ZFTP_TRANSFER <br>
A G for a get operation and a P for a put operation.</p>

<p style="margin-top: 1em">ZFTP_SIZE <br>
The total size of the complete file being transferred: the
same as the first value provided by the remote and local
subcommands for a particular file. If the <br>
server cannot supply this value for a remote file being
retrieved, it will not be set. If input is from a pipe the
value may be incorrect and correspond simply to <br>
a full pipe buffer.</p>

<p style="margin-top: 1em">ZFTP_COUNT <br>
The amount of data so far transferred; a number between zero
and $ZFTP_SIZE, if that is set. This number is always
available.</p>

<p style="margin-top: 1em">The function is initially called
with ZFTP_TRANSFER set appropriately and ZFTP_COUNT set to
zero. After the transfer is finished, the function will be
called one more <br>
time with ZFTP_TRANSFER set to GF or PF, in case it wishes
to tidy up. It is otherwise never called twice with the same
value of ZFTP_COUNT.</p>

<p style="margin-top: 1em">Sometimes the progress meter may
cause disruption. It is up to the user to decide whether the
function should be defined and to use unfunction when
necessary.</p>

<p style="margin-top: 1em">Problems <br>
A connection may not be opened in the left hand side of a
pipe as this occurs in a subshell and the file information
is not updated in the main shell. In the case of type or
<br>
mode changes or closing the connection in a subshell, the
information is returned but variables are not updated until
the next call to zftp. Other status changes in subshells
<br>
will not be reflected by changes to the variables (but
should be otherwise harmless).</p>

<p style="margin-top: 1em">Deleting sessions while a zftp
command is active in the background can have unexpected
effects, even if it does not use the session being deleted.
This is because all shell sub&acirc; <br>
processes share information on the state of all connections,
and deleting a session changes the ordering of that
information.</p>

<p style="margin-top: 1em">On some operating systems, the
control connection is not valid after a fork(), so that
operations in subshells, on the left hand side of a
pipeline, or in the background are not <br>
possible, as they should be. This is presumably a bug in the
operating system.</p>

<p style="margin-top: 1em">THE ZSH/ZLE MODULE <br>
The zsh/zle module contains the Zsh Line Editor. See
zshzle(1).</p>

<p style="margin-top: 1em">THE ZSH/ZLEPARAMETER MODULE <br>
The zsh/zleparameter module defines two special parameters
that can be used to access internal information of the Zsh
Line Editor (see zshzle(1)).</p>

<p style="margin-top: 1em">keymaps <br>
This array contains the names of the keymaps currently
defined.</p>

<p style="margin-top: 1em">widgets <br>
This associative array contains one entry per widget
defined. The name of the widget is the key and the value
gives information about the widget. It is either the string
<br>
&lsquo;builtin&rsquo; for builtin widgets, a string of the
form &lsquo;user:name&rsquo; for user-defined widgets, where
name is the name of the shell function implementing the
widget, or it is a <br>
string of the form &lsquo;completion:type:name&rsquo;, for
completion widgets. In the last case type is the name of the
builtin widgets the completion widget imitates in its
behavior <br>
and name is the name of the shell function implementing the
completion widget.</p>

<p style="margin-top: 1em">THE ZSH/ZPROF MODULE <br>
When loaded, the zsh/zprof causes shell functions to be
profiled. The profiling results can be obtained with the
zprof builtin command made available by this module. There
is <br>
no way to turn profiling off other than unloading the
module.</p>

<p style="margin-top: 1em">zprof [ -c ] <br>
Without the -c option, zprof lists profiling results to
standard output. The format is comparable to that of
commands like gprof.</p>

<p style="margin-top: 1em">At the top there is a summary
listing all functions that were called at least once. This
summary is sorted in decreasing order of the amount of time
spent in each. The <br>
lines contain the number of the function in order, which is
used in other parts of the list in suffixes of the form
&lsquo;[num]&rsquo;, then the number of calls made to the
function. <br>
The next three columns list the time in milliseconds spent
in the function and its descendants, the average time in
milliseconds spent in the function and its descendants <br>
per call and the percentage of time spent in all shell
functions used in this function and its descendants. The
following three columns give the same information, but <br>
counting only the time spent in the function itself. The
final column shows the name of the function.</p>

<p style="margin-top: 1em">After the summary, detailed
information about every function that was invoked is listed,
sorted in decreasing order of the amount of time spent in
each function and its <br>
descendants. Each of these entries consists of descriptions
for the functions that called the function described, the
function itself, and the functions that were called <br>
from it. The description for the function itself has the
same format as in the summary (and shows the same
information). The other lines don&rsquo;t show the number of
the <br>
function at the beginning and have their function named
indented to make it easier to distinguish the line showing
the function described in the section from the
surround&acirc; <br>
ing lines.</p>

<p style="margin-top: 1em">The information shown in this
case is almost the same as in the summary, but only refers
to the call hierarchy being displayed. For example, for a
calling function the <br>
column showing the total running time lists the time spent
in the described function and its descendants only for the
times when it was called from that particular calling <br>
function. Likewise, for a called function, this columns
lists the total time spent in the called function and its
descendants only for the times when it was called from <br>
the function described.</p>

<p style="margin-top: 1em">Also in this case, the column
showing the number of calls to a function also shows a slash
and then the total number of invocations made to the called
function.</p>

<p style="margin-top: 1em">As long as the zsh/zprof module
is loaded, profiling will be done and multiple invocations
of the zprof builtin command will show the times and numbers
of calls since the <br>
module was loaded. With the -c option, the zprof builtin
command will reset its internal counters and will not show
the listing.</p>

<p style="margin-top: 1em">THE ZSH/ZPTY MODULE <br>
The zsh/zpty module offers one builtin:</p>

<p style="margin-top: 1em">zpty [ -e ] [ -b ] name [ arg
... ] <br>
The arguments following name are concatenated with spaces
between, then executed as a command, as if passed to the
eval builtin. The command runs under a newly assigned <br>
pseudo-terminal; this is useful for running commands
non-interactively which expect an interactive environment.
The name is not part of the command, but is used to refer
<br>
to this command in later calls to zpty.</p>

<p style="margin-top: 1em">With the -e option, the
pseudo-terminal is set up so that input characters are
echoed.</p>

<p style="margin-top: 1em">With the -b option, input to and
output from the pseudo-terminal are made non-blocking.</p>

<p style="margin-top: 1em">zpty -d [ names ... ] <br>
The second form, with the -d option, is used to delete
commands previously started, by supplying a list of their
names. If no names are given, all commands are deleted. <br>
Deleting a command causes the HUP signal to be sent to the
corresponding process.</p>

<p style="margin-top: 1em">zpty -w [ -n ] name [ strings
... ] <br>
The -w option can be used to send the to command name the
given strings as input (separated by spaces). If the -n
option is not given, a newline is added at the end.</p>

<p style="margin-top: 1em">If no strings are provided, the
standard input is copied to the pseudo-terminal; this may
stop before copying the full input if the pseudo-terminal is
non-blocking.</p>

<p style="margin-top: 1em">Note that the command under the
pseudo-terminal sees this input as if it were typed, so
beware when sending special tty driver characters such as
word-erase, line-kill, <br>
and end-of-file.</p>

<p style="margin-top: 1em">zpty -r [ -mt ] name [ param [
pattern ] ] <br>
The -r option can be used to read the output of the command
name. With only a name argument, the output read is copied
to the standard output. Unless the pseudo-terminal <br>
is non-blocking, copying continues until the command under
the pseudo-terminal exits; when non-blocking, only as much
output as is immediately available is copied. The <br>
return status is zero if any output is copied.</p>

<p style="margin-top: 1em">When also given a param
argument, at most one line is read and stored in the
parameter named param. Less than a full line may be read if
the pseudo-terminal is non-block&acirc; <br>
ing. The return status is zero if at least one character is
stored in param.</p>

<p style="margin-top: 1em">If a pattern is given as well,
output is read until the whole string read matches the
pattern, even in the non-blocking case. The return status is
zero if the string read <br>
matches the pattern, or if the command has exited but at
least one character could still be read. If the option -m is
present, the return status is zero only if the pat&acirc;
<br>
tern matches. As of this writing, a maximum of one megabyte
of output can be consumed this way; if a full megabyte is
read without matching the pattern, the return status <br>
is non-zero.</p>

<p style="margin-top: 1em">In all cases, the return status
is non-zero if nothing could be read, and is 2 if this is
because the command has finished.</p>

<p style="margin-top: 1em">If the -r option is combined
with the -t option, zpty tests whether output is available
before trying to read. If no output is available, zpty
immediately returns the <br>
status 1. When used with a pattern, the behaviour on a
failed poll is similar to when the command has exited: the
return value is zero if at least one character could <br>
still be read even if the pattern failed to match.</p>

<p style="margin-top: 1em">zpty -t name <br>
The -t option without the -r option can be used to test
whether the command name is still running. It returns a zero
status if the command is running and a non-zero value <br>
otherwise.</p>

<p style="margin-top: 1em">zpty [ -L ] <br>
The last form, without any arguments, is used to list the
commands currently defined. If the -L option is given, this
is done in the form of calls to the zpty builtin.</p>

<p style="margin-top: 1em">THE ZSH/ZSELECT MODULE <br>
The zsh/zselect module makes available one builtin
command:</p>

<p style="margin-top: 1em">zselect [ -rwe -t timeout -a
array ] [ fd ... ] <br>
The zselect builtin is a front-end to the
&lsquo;select&rsquo; system call, which blocks until a file
descriptor is ready for reading or writing, or has an error
condition, with an <br>
optional timeout. If this is not available on your system,
the command prints an error message and returns status 2
(normal errors return status 1). For more informa&acirc;
<br>
tion, see your systems documentation for select(3). Note
there is no connection with the shell builtin of the same
name.</p>

<p style="margin-top: 1em">Arguments and options may be
intermingled in any order. Non-option arguments are file
descriptors, which must be decimal integers. By default,
file descriptors are to be <br>
tested for reading, i.e. zselect will return when data is
available to be read from the file descriptor, or more
precisely, when a read operation from the file descriptor
<br>
will not block. After a -r, -w and -e, the given file
descriptors are to be tested for reading, writing, or error
conditions. These options and an arbitrary list of file <br>
descriptors may be given in any order.</p>

<p style="margin-top: 1em">(The presence of an &lsquo;error
condition&rsquo; is not well defined in the documentation
for many implementations of the select system call.
According to recent versions of the <br>
POSIX specification, it is really an exception condition, of
which the only standard example is out-of-band data received
on a socket. So zsh users are unlikely to find <br>
the -e option useful.)</p>

<p style="margin-top: 1em">The option &lsquo;-t
timeout&rsquo; specifies a timeout in hundredths of a
second. This may be zero, in which case the file descriptors
will simply be polled and zselect will return <br>
immediately. It is possible to call zselect with no file
descriptors and a non-zero timeout for use as a
finer-grained replacement for &lsquo;sleep&rsquo;; note,
however, the return <br>
status is always 1 for a timeout.</p>

<p style="margin-top: 1em">The option &lsquo;-a
array&rsquo; indicates that array should be set to indicate
the file descriptor(s) which are ready. If the option is not
given, the array reply will be used for <br>
this purpose. The array will contain a string similar to the
arguments for zselect. For example,</p>

<p style="margin-top: 1em">zselect -t 0 -r 0 -w 1</p>

<p style="margin-top: 1em">might return immediately with
status 0 and $reply containing &lsquo;-r 0 -w 1&rsquo; to
show that both file descriptors are ready for the requested
operations.</p>

<p style="margin-top: 1em">The option &lsquo;-A
assoc&rsquo; indicates that the associative array assoc
should be set to indicate the file descriptor(s( which are
ready. This option overrides the option -a, <br>
nor will reply be modified. The keys of assoc are the file
descriptors, and the corresponding values are any of the
characters &lsquo;rwe&rsquo; to indicate the condition.</p>

<p style="margin-top: 1em">The command returns status 0 if
some file descriptors are ready for reading. If the
operation timed out, or a timeout of 0 was given and no file
descriptors were ready, <br>
or there was an error, it returns status 1 and the array
will not be set (nor modified in any way). If there was an
error in the select operation the appropriate error <br>
message is printed.</p>

<p style="margin-top: 1em">THE ZSH/ZUTIL MODULE <br>
The zsh/zutil module only adds some builtins:</p>

<p style="margin-top: 1em">zstyle [ -L [ pattern [ style ]
] ] <br>
zstyle [ -e | - | -- ] pattern style strings ... <br>
zstyle -d [ pattern [ styles ... ] ] <br>
zstyle -g name [ pattern [ style ] ] <br>
zstyle -abs context style name [ sep ] <br>
zstyle -Tt context style [ strings ...] <br>
zstyle -m context style pattern <br>
This builtin command is used to define and lookup styles.
Styles are pairs of names and values, where the values
consist of any number of strings. They are stored <br>
together with patterns and lookup is done by giving a
string, called the &lsquo;context&rsquo;, which is compared
to the patterns. The definition stored for the first
matching pat&acirc; <br>
tern will be returned.</p>

<p style="margin-top: 1em">For ordering of comparisons,
patterns are searched from most specific to least specific,
and patterns that are equally specific keep the order in
which they were defined. <br>
A pattern is considered to be more specific than another if
it contains more components (substrings separated by colons)
or if the patterns for the components are more <br>
specific, where simple strings are considered to be more
specific than patterns and complex patterns are considered
to be more specific than the pattern &lsquo;*&rsquo;.</p>

<p style="margin-top: 1em">The first form (without
arguments) lists the definitions. Styles are shown in
alphabetic order and patterns are shown in the order zstyle
will test them.</p>

<p style="margin-top: 1em">If the -L option is given,
listing is done in the form of calls to zstyle. The optional
first argument is a pattern which will be matched against
the string supplied as <br>
the pattern for the context; note that this means, for
example, &lsquo;zstyle -L &quot;:completion:*&quot;&rsquo;
will match any supplied pattern beginning
&lsquo;:completion:&rsquo;, not just &quot;:comple&acirc;
<br>
tion:*&quot;: use &quot;:completion: to match that. The
optional second argument limits the output to a specific
style (not a pattern). -L is not compatible with any other
<br>
options.</p>

<p style="margin-top: 1em">The other forms are the
following:</p>

<p style="margin-top: 1em">zstyle [ - | -- | -e ] pattern
style strings ... <br>
Defines the given style for the pattern with the strings as
the value. If the -e option is given, the strings will be
concatenated (separated by spaces) and the <br>
resulting string will be evaluated (in the same way as it is
done by the eval builtin command) when the style is looked
up. In this case the parameter &lsquo;reply&rsquo; must <br>
be assigned to set the strings returned after the
evaluation. Before evaluating the value, reply is unset, and
if it is still unset after the evaluation, the style <br>
is treated as if it were not set.</p>

<p style="margin-top: 1em">zstyle -d [ pattern [ styles ...
] ] <br>
Delete style definitions. Without arguments all definitions
are deleted, with a pattern all definitions for that pattern
are deleted and if any styles are given, <br>
then only those styles are deleted for the pattern.</p>

<p style="margin-top: 1em">zstyle -g name [ pattern [ style
] ] <br>
Retrieve a style definition. The name is used as the name of
an array in which the results are stored. Without any
further arguments, all patterns defined are <br>
returned. With a pattern the styles defined for that pattern
are returned and with both a pattern and a style, the value
strings of that combination is returned.</p>

<p style="margin-top: 1em">The other forms can be used to
look up or test patterns.</p>

<p style="margin-top: 1em">zstyle -s context style name [
sep ] <br>
The parameter name is set to the value of the style
interpreted as a string. If the value contains several
strings they are concatenated with spaces (or with the <br>
sep string if that is given) between them.</p>

<p style="margin-top: 1em">zstyle -b context style name
<br>
The value is stored in name as a boolean, i.e. as the string
&lsquo;yes&rsquo; if the value has only one string and that
string is equal to one of &lsquo;yes&rsquo;,
&lsquo;true&rsquo;, &lsquo;on&rsquo;, or &lsquo;1&rsquo;.
<br>
If the value is any other string or has more than one
string, the parameter is set to &lsquo;no&rsquo;.</p>

<p style="margin-top: 1em">zstyle -a context style name
<br>
The value is stored in name as an array. If name is declared
as an associative array, the first, third, etc. strings are
used as the keys and the other strings are <br>
used as the values.</p>

<p style="margin-top: 1em">zstyle -t context style [
strings ...] <br>
zstyle -T context style [ strings ...] <br>
Test the value of a style, i.e. the -t option only returns a
status (sets $?). Without any strings the return status is
zero if the style is defined for at least <br>
one matching pattern, has only one string in its value, and
that is equal to one of &lsquo;true&rsquo;,
&lsquo;yes&rsquo;, &lsquo;on&rsquo; or &lsquo;1&rsquo;. If
any strings are given the status is zero if and <br>
only if at least one of the strings is equal to at least one
of the strings in the value. If the style is defined but
doesn&rsquo;t match, the return status is 1. If the <br>
style is not defined, the status is 2.</p>

<p style="margin-top: 1em">The -T option tests the values
of the style like -t, but it returns status zero (rather
than 2) if the style is not defined for any matching
pattern.</p>

<p style="margin-top: 1em">zstyle -m context style pattern
<br>
Match a value. Returns status zero if the pattern matches at
least one of the strings in the value.</p>

<p style="margin-top: 1em">zformat -f param format specs
... <br>
zformat -a array sep specs ... <br>
This builtin provides two different forms of formatting. The
first form is selected with the -f option. In this case the
format string will be modified by replacing <br>
sequences starting with a percent sign in it with strings
from the specs. Each spec should be of the form
&lsquo;char:string&rsquo; which will cause every appearance
of the sequence <br>
&lsquo;%char&rsquo; in format to be replaced by the string.
The &lsquo;%&rsquo; sequence may also contain optional
minimum and maximum field width specifications between the
&lsquo;%&rsquo; and the &lsquo;char&rsquo; <br>
in the form &lsquo;%min.maxc&rsquo;, i.e. the minimum field
width is given first and if the maximum field width is used,
it has to be preceded by a dot. Specifying a minimum field
<br>
width makes the result be padded with spaces to the right if
the string is shorter than the requested width. Padding to
the left can be achieved by giving a negative min&acirc;
<br>
imum field width. If a maximum field width is specified, the
string will be truncated after that many characters. After
all &lsquo;%&rsquo; sequences for the given specs have been
<br>
processed, the resulting string is stored in the parameter
param.</p>

<p style="margin-top: 1em">The %-escapes also understand
ternary expressions in the form used by prompts. The % is
followed by a &lsquo;(&rsquo; and then an ordinary format
specifier character as described <br>
above. There may be a set of digits either before or after
the &lsquo;(&rsquo;; these specify a test number, which
defaults to zero. Negative numbers are also allowed. An
arbitrary <br>
delimiter character follows the format specifier, which is
followed by a piece of &lsquo;true&rsquo; text, the
delimiter character again, a piece of &lsquo;false&rsquo;
text, and a closing paren&acirc; <br>
thesis. The complete expression (without the digits) thus
looks like &lsquo;%(X.text1.text2)&rsquo;, except that the
&lsquo;.&rsquo; character is arbitrary. The value given for
the format spec&acirc; <br>
ifier in the char:string expressions is evaluated as a
mathematical expression, and compared with the test number.
If they are the same, text1 is output, else text2 is <br>
output. A parenthesis may be escaped in text2 as %). Either
of text1 or text2 may contain nested %-escapes.</p>

<p style="margin-top: 1em">For example:</p>

<p style="margin-top: 1em">zformat -f REPLY &quot;The
answer is &rsquo;%3(c.yes.no)&rsquo;.&quot; c:3</p>

<p style="margin-top: 1em">outputs &quot;The answer is
&rsquo;yes&rsquo;.&quot; to REPLY since the value for the
format specifier c is 3, agreeing with the digit argument to
the ternary expression.</p>

<p style="margin-top: 1em">The second form, using the -a
option, can be used for aligning strings. Here, the specs
are of the form &lsquo;left:right&rsquo; where
&lsquo;left&rsquo; and &lsquo;right&rsquo; are arbitrary
strings. <br>
These strings are modified by replacing the colons by the
sep string and padding the left strings with spaces to the
right so that the sep strings in the result (and hence <br>
the right strings after them) are all aligned if the strings
are printed below each other. All strings without a colon
are left unchanged and all strings with an empty <br>
right string have the trailing colon removed. In both cases
the lengths of the strings are not used to determine how the
other strings are to be aligned. The resulting <br>
strings are stored in the array.</p>

<p style="margin-top: 1em">zregexparse <br>
This implements some internals of the _regex_arguments
function.</p>

<p style="margin-top: 1em">zparseopts [ -D ] [ -K ] [ -M ]
[ -E ] [ -a array ] [ -A assoc ] specs <br>
This builtin simplifies the parsing of options in positional
parameters, i.e. the set of arguments given by $*. Each spec
describes one option and must be of the form <br>
&lsquo;opt[=array]&rsquo;. If an option described by opt is
found in the positional parameters it is copied into the
array specified with the -a option; if the optional
&lsquo;=array&rsquo; is <br>
given, it is instead copied into that array.</p>

<p style="margin-top: 1em">Note that it is an error to give
any spec without an &lsquo;=array&rsquo; unless one of the
-a or -A options is used.</p>

<p style="margin-top: 1em">Unless the -E option is given,
parsing stops at the first string that isn&rsquo;t described
by one of the specs. Even with -E, parsing always stops at a
positional parameter <br>
equal to &lsquo;-&rsquo; or &lsquo;--&rsquo;.</p>

<p style="margin-top: 1em">The opt description must be one
of the following. Any of the special characters can appear
in the option name provided it is preceded by a
backslash.</p>

<p style="margin-top: 1em">name <br>
name+ The name is the name of the option without the leading
&lsquo;-&rsquo;. To specify a GNU-style long option, one of
the usual two leading &lsquo;-&rsquo; must be included in
name; for <br>
example, a &lsquo;--file&rsquo; option is represented by a
name of &lsquo;-file&rsquo;.</p>

<p style="margin-top: 1em">If a &lsquo;+&rsquo; appears
after name, the option is appended to array each time it is
found in the positional parameters; without the
&lsquo;+&rsquo; only the last occurrence of the <br>
option is preserved.</p>

<p style="margin-top: 1em">If one of these forms is used,
the option takes no argument, so parsing stops if the next
positional parameter does not also begin with
&lsquo;-&rsquo; (unless the -E option is <br>
used).</p>

<p style="margin-top: 1em">name: <br>
name:- <br>
name:: If one or two colons are given, the option takes an
argument; with one colon, the argument is mandatory and with
two colons it is optional. The argument is <br>
appended to the array after the option itself.</p>

<p style="margin-top: 1em">An optional argument is put into
the same array element as the option name (note that this
makes empty strings as arguments indistinguishable). A
mandatory argu&acirc; <br>
ment is added as a separate element unless the
&lsquo;:-&rsquo; form is used, in which case the argument is
put into the same element.</p>

<p style="margin-top: 1em">A &lsquo;+&rsquo; as described
above may appear between the name and the first colon.</p>

<p style="margin-top: 1em">The options of zparseopts itself
are:</p>

<p style="margin-top: 1em">-a array <br>
As described above, this names the default array in which to
store the recognised options.</p>

<p style="margin-top: 1em">-A assoc <br>
If this is given, the options and their values are also put
into an associative array with the option names as keys and
the arguments (if any) as the values.</p>

<p style="margin-top: 1em">-D If this option is given, all
options found are removed from the positional parameters of
the calling shell or shell function, up to but not including
any not described by <br>
the specs. This is similar to using the shift builtin.</p>

<p style="margin-top: 1em">-K With this option, the arrays
specified with the -a and -A options and with the
&lsquo;=array&rsquo; forms are kept unchanged when none of
the specs for them is used. This allows <br>
assignment of default values to them before calling
zparseopts.</p>

<p style="margin-top: 1em">-M This changes the assignment
rules to implement a map among equivalent option names. If
any spec uses the &lsquo;=array&rsquo; form, the string
array is interpreted as the name of <br>
another spec, which is used to choose where to store the
values. If no other spec is found, the values are stored as
usual. This changes only the way the values are <br>
stored, not the way $* is parsed, so results may be
unpredicable if the &lsquo;name+&rsquo; specifier is used
inconsistently.</p>

<p style="margin-top: 1em">-E This changes the parsing
rules to not stop at the first string that isn&rsquo;t
described by one of the specs. It can be used to test for or
(if used together with -D) extract <br>
options and their arguments, ignoring all other options and
arguments that may be in the positional parameters.</p>

<p style="margin-top: 1em">For example,</p>

<p style="margin-top: 1em">set -- -a -bx -c y -cz baz -cend
<br>
zparseopts a=foo b:=bar c+:=bar</p>

<p style="margin-top: 1em">will have the effect of</p>

<p style="margin-top: 1em">foo=(-a) <br>
bar=(-b x -c y -c z)</p>

<p style="margin-top: 1em">The arguments from
&lsquo;baz&rsquo; on will not be used.</p>

<p style="margin-top: 1em">As an example for the -E option,
consider:</p>

<p style="margin-top: 1em">set -- -a x -b y -c z arg1 arg2
<br>
zparseopts -E -D b:=bar</p>

<p style="margin-top: 1em">will have the effect of</p>

<p style="margin-top: 1em">bar=(-b y) <br>
set -- -a x -c z arg1 arg2</p>

<p style="margin-top: 1em">I.e., the option -b and its
arguments are taken from the positional parameters and put
into the array bar.</p>

<p style="margin-top: 1em">The -M option can be used like
this:</p>

<p style="margin-top: 1em">set -- -a -bx -c y -cz baz -cend
<br>
zparseopts -A bar -M a=foo b+: c:=b</p>

<p style="margin-top: 1em">to have the effect of</p>

<p style="margin-top: 1em">foo=(-a) <br>
bar=(-a &rsquo;&rsquo; -b xyz)</p>

<p style="margin-top: 1em">zsh 5.0.2 December 21, 2012
ZSHMODULES(1)</p>
<hr>
</body>
</html>
